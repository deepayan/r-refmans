<!DOCTYPE html><html lang="en"><head><title>Help for package pxR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {pxR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#as.array.px'><p>Extraction of data from px objects into arrays</p></a></li>
<li><a href='#as.data.frame.px'>
<p>Extraction of data from px into data.frame objects</p></a></li>
<li><a href='#as.px'><p> Convert an array or a data.frame into an object of class px</p></a></li>
<li><a href='#read.px'>
<p>Reads a PC-Axis file</p></a></li>
<li><a href='#summary.px'>
<p>summary.px</p></a></li>
<li><a href='#write.json.stat'>
<p>Write a px object in JSON-stat format.</p></a></li>
<li><a href='#write.px'>
<p>Write a PC-Axis file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>PC-Axis with R</td>
</tr>
<tr>
<td>Version:</td>
<td>0.42.7</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-11-20</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a set of functions for reading and writing PC-Axis files, used by different statistical organizations around the globe for data dissemination.</td>
</tr>
<tr>
<td>Depends:</td>
<td>stringr, reshape2, RJSONIO, plyr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/cjgb/pxR">https://github.com/cjgb/pxR</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-11-23 01:03:12 UTC; carlos</td>
</tr>
<tr>
<td>Author:</td>
<td>Carlos J. Gil Bellosta [cre, aut],
  Francisco J. Viciana [aut],
  Oscar Perpinan Lamigueiro [aut],
  Emilio Torres Manzanera [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Carlos J. Gil Bellosta &lt;cgb@datanalytics.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-11-23 07:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='as.array.px'>Extraction of data from px objects into arrays </h2><span id='topic+as.array.px'></span>

<h3>Description</h3>

<p>This function extracts the data component from a px object as a <code>array</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'px'
as.array(x, use.codes = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as.array.px_+3A_x">x</code></td>
<td>
<p>A <code>px</code> object.</p>
</td></tr>
<tr><td><code id="as.array.px_+3A_use.codes">use.codes</code></td>
<td>
<p>A logical value to indicate whether to use CODES
instead of VALUES as  names of the levels: TRUE to use  CODES,
defaut FALSE.
Or a vector with the names of the variables
that use CODES to identify levels  </p>
</td></tr>
<tr><td><code id="as.array.px_+3A_...">...</code></td>
<td>
<p>Additional arguments. Not used yet.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An array</p>


<h3>Author(s)</h3>

<p>Francisco J. Viciana</p>


<h3>References</h3>

<p>https://www.scb.se/globalassets/vara-tjanster/px-programmen/px-file_format_specification_2013.pdf
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read.px">read.px</a></code>,
<code><a href="#topic+as.data.frame.px">as.data.frame.px</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>my.px     &lt;- read.px(system.file("extdata", "example.px", package = "pxR"))
my.array  &lt;- as.array(my.px)
my.array2  &lt;- as.array(my.px ,use.codes=TRUE)
my.array3  &lt;- as.array(my.px ,use.codes=c('municipios'))
</code></pre>

<hr>
<h2 id='as.data.frame.px'>
Extraction of data from px into data.frame objects
</h2><span id='topic+as.data.frame.px'></span><span id='topic+as.data.frame'></span>

<h3>Description</h3>

<p>This function extracts the data component from a px object as a <code>data.frame</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'px'
as.data.frame( x, ..., use.codes = FALSE,
                 warnings.as.errors = TRUE, direction = 'long')
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as.data.frame.px_+3A_x">x</code></td>
<td>
<p> a px object </p>
</td></tr>
<tr><td><code id="as.data.frame.px_+3A_use.codes">use.codes</code></td>
<td>
<p> If true, this parameter replaces the names (or
levels) of the variables by their codes, if available;
alternatively, it can be a character vector identifying those
variables for which codes will replace the levels of the
variables. See details section. </p>
</td></tr>
<tr><td><code id="as.data.frame.px_+3A_warnings.as.errors">warnings.as.errors</code></td>
<td>
<p> If true, the function will fail in case any issues are found; otherwise, it will generate warnings. </p>
</td></tr>
<tr><td><code id="as.data.frame.px_+3A_direction">direction</code></td>
<td>
<p>character string, either ‘&quot;wide&quot;’ to reshape to wide format,
or ‘&quot;long&quot;’ to reshape to long format (default).</p>
</td></tr>
<tr><td><code id="as.data.frame.px_+3A_...">...</code></td>
<td>
<p> Additional arguments, currently not used </p>
</td></tr>
</table>


<h3>Details</h3>

<p>The PC-Axis provides two alternative mechanisms for naming variables: their values or their codes, usually less verbose.
The the <code>use.codes</code> parameter can be used to select those variables for which the CODES attribute in the PC-Axis file for naming the levels of the variables.
It should be noted that there may not be CODES for all variables; in such cases, the VALUES are used instead.
</p>
<p>The function will operate in 'paranoid mode' unless <code>warnings.as.errors</code> is set to <code>FALSE</code>.
In such mode, the function will fail if any issues are found in the data.
If <code>warnings.as.errors</code> is set to <code>FALSE</code>, the function will do its best to solve some known issues in some PC-Axis files.
</p>


<h3>Value</h3>

<p>A data.frame object.
</p>


<h3>Author(s)</h3>

<p>Carlos J. Gil Bellosta, Oscar Perpiñán Lamigueiro, Francisco J. Viciana
Fernández, Emilio Torres
</p>


<h3>References</h3>

<p>https://www.scb.se/globalassets/vara-tjanster/px-programmen/px-file_format_specification_2013.pdf
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read.px">read.px</a></code>,
<code><a href="#topic+as.array.px">as.array.px</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>my.px.object &lt;- read.px(system.file("extdata", "example.px",
                                              package = "pxR"))
my.px.data   &lt;- as.data.frame(my.px.object)
</code></pre>

<hr>
<h2 id='as.px'> Convert an array or a data.frame into an object of class px</h2><span id='topic+as.px'></span><span id='topic+as.px.array'></span><span id='topic+as.px.data.frame'></span>

<h3>Description</h3>

<p>This function converts an array object into a <code>px</code> object. It uses the
<code>dimnames</code> of the array to fill the <code>VALUES</code> list of the
<code>px</code> object. It can also converts an data.frame object into a
<code>px</code> object. Optionally it uses an object of type <code>px</code> as the
skeleton of the new object. </p>


<h3>Usage</h3>

<pre><code class='language-R'>  as.px(x,... )
  ## S3 method for class 'array'
as.px(x, skeleton.px = NULL, list.keys = NULL, ...)
  ## S3 method for class 'data.frame'
as.px(x, skeleton.px = NULL,
                             list.keys = NULL, value.column = NULL,  ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as.px_+3A_x">x</code></td>
<td>
<p>An array or <code>data.frame</code> with the data required to build the <code>px</code> object</p>
</td></tr>
<tr><td><code id="as.px_+3A_skeleton.px">skeleton.px</code></td>
<td>
<p>A <code>px</code> object with metadata that will be used in the new <code>px</code> object</p>
</td></tr>
<tr><td><code id="as.px_+3A_list.keys">list.keys</code></td>
<td>
<p>A optional list of metadata pairs</p>
</td></tr>
<tr><td><code id="as.px_+3A_value.column">value.column</code></td>
<td>
<p>Optional name to numeric value column in data.frame; defaults to &quot;value&quot;</p>
</td></tr>    
<tr><td><code id="as.px_+3A_...">...</code></td>
<td>
<p> Other arguments that can be passed to the function </p>
</td></tr>
</table>


<h3>Details</h3>

<p>A <code>px</code> object is the internal representation in R of a PC-Axis
file. As such, it contains both data and metadata.
</p>
<p>The data to populate the <code>px</code> object comes from <code>x</code>, the
first argument of the function. If <code>x</code> is an array, it needs
to have 'named <code>dimnames</code>', i.e., its <code>dimnames</code> attribute
needs to be a list with named entries.
</p>
<p><code>x</code> can also be a molten <code>data.frame</code>, i.e., each row contains a single 
value and the remaining columns indicate the levels of the variables it refers to.
The ts <code>names</code> will be used in STUB and HEDING keyword of px objects. The first 
column of <code>x</code> will be used as 'HEADING', and the rest, in reverse, order as 'STUB'. 
</p>
<p>There are two compatible methods to provide metadata information. The
first one is via <code>skeleton.px</code>, a <code>px</code> object whose metadata
(title, etc.) is to be recycled in the new object. In addition to
that, <code>list.keys</code> can be used to pass metadata in key-value pairs
as shown in the examples below.
</p>
<p>Metadata provided in <code>list.keys</code> has priority over metadata
coming from <code>skeleton.px</code>. Also, note that the metadata items
used to name the variables and their labels are neither extracted from
<code>skeleton.px</code> nor <code>px</code> but from the <code>dimnames</code> attribute 
of <code>x</code>.
</p>
<p>Note that the keywords 'HEADING', 'VALUES' and 'DATA', if present in <code>skeleton.px</code> or
<code>list.keys</code>, are ignored. Inconsistent 'CODES' in <code>skeleton.px</code> will also be
ignored.
</p>
<p>Few checks are made to guarantee that metadata keys conform to the PC-Axis standard.
</p>


<h3>Value</h3>

<p> a <code>px</code> object </p>


<h3>Author(s)</h3>

<p>Francisco J. Viciana, Carlos J. Gil Bellosta,</p>


<h3>See Also</h3>

<p><code><a href="#topic+write.px">write.px</a></code>,
<code><a href="#topic+as.array.px">as.array.px</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
my.px.object  &lt;- read.px(system.file("extdata", "example.px", package = "pxR"))
my.data       &lt;- as.array(my.px.object)
my.px.object2 &lt;- as.px(my.data)
my.px.object3 &lt;- as.px(my.data, skeleton.px = my.px.object) 
my.px.object4 &lt;- as.px(my.data, list.keys = list(MATRIX = "xxx", CONTENTS = "new data",
                             NEWKEY = "another key", UNITS = "people", TITLE = "My Title"))
                             
my.px.df      &lt;- as.data.frame(my.px.object)
my.px.object5 &lt;- as.px(my.px.df)
</code></pre>

<hr>
<h2 id='read.px'>
Reads a PC-Axis file
</h2><span id='topic+read.px'></span>

<h3>Description</h3>

<p>This function reads a PC-AXIS file (a text file with certain format) and creates an object of the class px.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.px(filename, encoding = NULL,
        na.strings = c('"."', '".."', '"..."', '"...."', '"....."', '"......"',
                       '":"'))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read.px_+3A_filename">filename</code></td>
<td>
<p> The name of the PC-Axis file to read </p>
</td></tr>
<tr><td><code id="read.px_+3A_encoding">encoding</code></td>
<td>
<p>A character string describing the current encoding; see the Details section</p>
</td></tr>
<tr><td><code id="read.px_+3A_na.strings">na.strings</code></td>
<td>
<p>A character to be interpreted as missing value in
the <code>DATA</code> field of the PC-AXIS file. The chapter 4 of the
second reference provides details about the dot codes used in the
PC-AXIS format.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function reads data files in the PC-Axis format.
The format is described in the two documents in the reference section.
</p>
<p>According to them, null values can be encoded using &quot;.&quot;, &quot;..&quot;, &quot;...&quot;, or &quot;....&quot;.
</p>
<p>Also, the documentation is not very specific concerning the actual encoding to be expected in
PC-Axis files.
It is however quite safe to assume that they will be encoded using some &quot;latin1&quot; variant.
The alternative value for the <code>encoding</code> argument would be &quot;utf-8&quot;.
</p>


<h3>Value</h3>

<p>An object of the class <code>px</code>, which is essentially a list comprising the
fields of a PC-AXIS file (see references for details).
</p>


<h3>Author(s)</h3>

<p>Carlos J. Gil Bellosta, Oscar Perpiñan Lamigueiro, Francisco J. Viciana Fernández
</p>


<h3>References</h3>

<p><a href="https://www.scb.se/globalassets/vara-tjanster/px-programmen/px-file_format_specification_2013.pdf">https://www.scb.se/globalassets/vara-tjanster/px-programmen/px-file_format_specification_2013.pdf</a>
<a href="https://tilastokeskus.fi/tup/pcaxis/tiedostomuoto2006_laaja_en.pdf">https://tilastokeskus.fi/tup/pcaxis/tiedostomuoto2006_laaja_en.pdf</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+as.data.frame.px">as.data.frame.px</a></code>,
<code><a href="#topic+as.array.px">as.array.px</a></code>
<code><a href="base.html#topic+iconv">iconv</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
my.px.object &lt;- read.px(system.file("extdata", "example.px",
                        package = "pxR") )
my.px.data   &lt;-  as.data.frame( my.px.object )

</code></pre>

<hr>
<h2 id='summary.px'>
summary.px
</h2><span id='topic+summary.px'></span><span id='topic+summary'></span>

<h3>Description</h3>

<p>Compactly display the internal structure of a px object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'px'
summary( object, ... )
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.px_+3A_object">object</code></td>
<td>
<p> a px object </p>
</td></tr>
<tr><td><code id="summary.px_+3A_...">...</code></td>
<td>
<p> Additional arguments, currently not used </p>
</td></tr>
</table>


<h3>Value</h3>

<p>A verbose description of data and metadata within the px object.
</p>


<h3>Author(s)</h3>

<p>Carlos J. Gil Bellosta
</p>


<h3>References</h3>

<p>https://www.scb.se/globalassets/vara-tjanster/px-programmen/px-file_format_specification_2013.pdf
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read.px">read.px</a></code>
<code><a href="#topic+as.data.frame.px">as.data.frame.px</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>my.px.object &lt;- read.px(system.file( "extdata", "example.px", package = "pxR"))
summary(my.px.object)
</code></pre>

<hr>
<h2 id='write.json.stat'>
Write a px object in JSON-stat format.
</h2><span id='topic+write.json.stat'></span>

<h3>Description</h3>

<p>This function writes a object of class <code>px</code> to a file conforming the JSON-stat standard, a simple lightweight JSON dissemination format best suited for data visualization, mobile apps, or open data initiatives.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write.json.stat(obj.px, filename)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write.json.stat_+3A_obj.px">obj.px</code></td>
<td>
<p>the name of a objest of class <code>px</code></p>
</td></tr>
<tr><td><code id="write.json.stat_+3A_filename">filename</code></td>
<td>
<p>the name of the json-stat file to be created (suggested extension, .json)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carlos J. Gil Bellosta
</p>


<h3>References</h3>

<p><a href="https://json-stat.org/">https://json-stat.org/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+write.px">write.px</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  opx1 &lt;- read.px(system.file( "extdata", "example.px", package = "pxR"))
  write.json.stat(opx1, file = "opx.px")

## End(Not run)
</code></pre>

<hr>
<h2 id='write.px'>
Write a PC-Axis file
</h2><span id='topic+write.px'></span>

<h3>Description</h3>

<p>This function writes an object of class <code>px</code> to a PC-Axis file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write.px(obj.px, filename, heading = NULL, stub = NULL,
         keys = NULL , write.na = FALSE, write.zero = FALSE,
         fileEncoding = "ISO-8859-1")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write.px_+3A_obj.px">obj.px</code></td>
<td>
<p>The name of a object of class <code>px</code></p>
</td></tr>
<tr><td><code id="write.px_+3A_filename">filename</code></td>
<td>
<p>The name of the PC-Axis file to create</p>
</td></tr>
<tr><td><code id="write.px_+3A_heading">heading</code></td>
<td>
<p>An optional character vector with the names of variables in the HEADING part of the output file</p>
</td></tr>
<tr><td><code id="write.px_+3A_stub">stub</code></td>
<td>
<p>An optional character vector with the names of the variables in the STUB part of the output file</p>
</td></tr>
<tr><td><code id="write.px_+3A_keys">keys</code></td>
<td>
<p>An optional character vector indicating the variables used as keys</p>
</td></tr>
<tr><td><code id="write.px_+3A_write.na">write.na</code></td>
<td>
<p>Whether to write rows with NA values (if keys are used)</p>
</td></tr>
<tr><td><code id="write.px_+3A_write.zero">write.zero</code></td>
<td>
<p>Whetehr to write rows with 0 values (if keys are used)</p>
</td></tr>
<tr><td><code id="write.px_+3A_fileencoding">fileEncoding</code></td>
<td>
<p>A character string describing the encoding to use in px file (see <code><a href="base.html#topic+iconv">iconv</a></code> for details)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function can write either regular files or files with KEYS.
</p>
<p>For regular files, by default, the output file will have a single variable in the HEADING part of the file (columns in the matrix). It
is possible to override the default by providing the <code>heading</code> and <code>stub</code> parameters. These are optional, non-overlapping,
exhaustive character vectors of names of variables in the output matrix.
</p>
<p>It is possible to write files with KEYS which could help reduce the final file size for large and sparse datasets. In such case, it
is possible to indicate whether to write rows with all values equal to 0 or NA or not (via arguments <code>write.zero</code> and ·<code>write.na</code>).
</p>


<h3>Author(s)</h3>

<p>Francisco J. Viciana Fernández, Oscar Perpiñan Lamigueiro, Carlos J. Gil Bellosta
</p>


<h3>References</h3>

<p><a href="https://www.scb.se/globalassets/vara-tjanster/px-programmen/px-file_format_specification_2013.pdf">https://www.scb.se/globalassets/vara-tjanster/px-programmen/px-file_format_specification_2013.pdf</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read.px">read.px</a></code>,
<code><a href="#topic+as.data.frame.px">as.data.frame.px</a></code>,
<code><a href="#topic+as.array.px">as.array.px</a></code>
<code><a href="base.html#topic+iconv">iconv</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>opx1 &lt;- read.px(system.file( "extdata", "example.px", package = "pxR"))
## Not run: 
	write.px(opx1, file = "opx.px")
	write.px(opx1, file = "opx.px",
                   heading = c("sexo", "edad"),
                   stub = "municipios")
        write.px(opx1, filename  = "opx.px",
                 keys = c("municipios","edad"))

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
