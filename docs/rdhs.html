<!DOCTYPE html><html><head><title>Help for package rdhs</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rdhs}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#rdhs'><p><span class="pkg">rdhs</span> DHS database through R</p></a></li>
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#as_factor.labelled'><p>Archived dataset capable as_factor</p></a></li>
<li><a href='#authenticate_dhs'><p>DHS Website Authentication</p></a></li>
<li><a href='#available_datasets'><p>Create a data frame of datasets that your log in can download</p></a></li>
<li><a href='#client_cache_date'><p>Pull last cache date</p></a></li>
<li><a href='#client_dhs'><p>Make a dhs client</p></a></li>
<li><a href='#collapse_api_responses'><p>collapse API response list</p></a></li>
<li><a href='#data_and_labels'><p>Create list of dataset and its variable names</p></a></li>
<li><a href='#delabel_df'><p>convert labelled data frame to data frame of just characters</p></a></li>
<li><a href='#dhs_countries'><p>API request of DHS Countries</p></a></li>
<li><a href='#dhs_data'><p>API request of DHS Indicator Data</p></a></li>
<li><a href='#dhs_data_updates'><p>API request of DHS Data Updates</p></a></li>
<li><a href='#dhs_datasets'><p>API request of DHS Datasets</p></a></li>
<li><a href='#dhs_geometry'><p>API request of DHS Geometry</p></a></li>
<li><a href='#dhs_gps_data_format'><p>DHS GPS Data Format</p></a></li>
<li><a href='#dhs_indicators'><p>API request of DHS Indicators</p></a></li>
<li><a href='#dhs_info'><p>API request of DHS Info</p></a></li>
<li><a href='#dhs_publications'><p>API request of DHS Publications</p></a></li>
<li><a href='#dhs_survey_characteristics'><p>API request of DHS Survey Characteristics</p></a></li>
<li><a href='#dhs_surveys'><p>API request of DHS Surveys</p></a></li>
<li><a href='#dhs_tags'><p>API request of DHS Tags</p></a></li>
<li><a href='#dhs_ui_updates'><p>API request of DHS UI Updates</p></a></li>
<li><a href='#download_boundaries'><p>DHS Spatial Boundaries</p></a></li>
<li><a href='#download_datasets'><p>Create a data frame of datasets that your log in can download</p></a></li>
<li><a href='#extract_dhs'><p>Extract Data</p></a></li>
<li><a href='#extraction'><p>DHS survey questions extracted from datasets</p></a></li>
<li><a href='#factor_format'><p>reformat haven and labelled read ins to have no factors or labels</p></a></li>
<li><a href='#file_dataset_format'><p>Returns what the dataset file ending should be for a given filename</p></a></li>
<li><a href='#get_available_datasets'><p>Get Available Datasets</p></a></li>
<li><a href='#get_datasets'><p>Get Datasets</p></a></li>
<li><a href='#get_downloaded_datasets'><p>Get Downloaded Datasets</p></a></li>
<li><a href='#get_labels_from_dataset'><p>Return variable labels from a dataset</p></a></li>
<li><a href='#get_rdhs_config'><p>Get rdhs config</p></a></li>
<li><a href='#get_variable_labels'><p>Get Survey Variable Labels</p></a></li>
<li><a href='#last_api_update'><p>Pull last DHS API database update time</p></a></li>
<li><a href='#model_datasets'><p>DHS model datasets</p></a></li>
<li><a href='#parse_map'><p>Create dictionary from DHS .MAP codebook</p></a></li>
<li><a href='#parse_meta'><p>Parse fixed-width file metadata</p></a></li>
<li><a href='#rbind_labelled'><p>Combine data frames with columns of class 'labelled'</p></a></li>
<li><a href='#rbind_list_base'><p>implementation of data.tables rbindlist</p></a></li>
<li><a href='#read_dhs_dataset'><p>read in dhs standard file types</p></a></li>
<li><a href='#read_dhs_dta'><p>Read DHS Stata data set</p></a></li>
<li><a href='#read_dhs_flat'><p>Read DHS flat file data set</p></a></li>
<li><a href='#read_zipdata'><p>Read filetype from a zipped folder based on the file ending</p></a></li>
<li><a href='#response_is_json'><p>checks if the response is json or not by looking at the responses headers</p></a></li>
<li><a href='#response_to_json'><p>converts response to json by first converting the response to text</p></a></li>
<li><a href='#search_variable_labels'><p>Search Survey Variable Definitions</p></a></li>
<li><a href='#search_variables'><p>Search Survey Variables</p></a></li>
<li><a href='#set_rdhs_config'><p>Set rdhs config</p></a></li>
<li><a href='#unzip_special'><p>unzip special that catches for 4GB+</p></a></li>
<li><a href='#update_rdhs_config'><p>Update your current rdhs config</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>API Client and Dataset Management for the Demographic and Health
Survey (DHS) Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.8.1</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>OJ Watson &lt;oj.watson@hotmail.co.uk&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://docs.ropensci.org/rdhs/">https://docs.ropensci.org/rdhs/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/rdhs/issues">https://github.com/ropensci/rdhs/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a client for (1) querying the DHS API for survey indicators
  and metadata (<a href="https://api.dhsprogram.com/#/index.html">https://api.dhsprogram.com/#/index.html</a>), (2) identifying surveys
  and datasets for analysis, (3) downloading survey datasets from the DHS website,
  (4) loading datasets and associate metadata into R, and (5) extracting variables
  and combining datasets for pooled analysis.</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.3.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>brio, R6, httr, jsonlite, foreign, magrittr, rappdirs, digest,
storr, xml2, qdapRegex, getPass, haven, iotools, sf, cli, rlang</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown, ggplot2, survey, data.table,
microbenchmark</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-20 18:01:12 UTC; oj</td>
</tr>
<tr>
<td>Author:</td>
<td>OJ Watson <a href="https://orcid.org/0000-0003-2374-0741"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Jeff Eaton <a href="https://orcid.org/0000-0001-7728-728X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Lucy D'Agostino McGowan
    <a href="https://orcid.org/0000-0001-7297-9359"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [rev],
  Duncan Gillespie [rev]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-21 11:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='rdhs'><span class="pkg">rdhs</span> DHS database through R</h2><span id='topic+rdhs'></span><span id='topic+rdhs-package'></span>

<h3>Description</h3>

<p>Provides a client for (1) querying the DHS API for survey indicators
and metadata, (2) identifying surveys and datasets for analysis,
(3) downloading survey datasets from the DHS website, (4) loading
datasets and associate metadata into R, and (5) extracting variables
and combining datasets for pooled analysis.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: OJ Watson <a href="mailto:oj.watson@hotmail.co.uk">oj.watson@hotmail.co.uk</a> (<a href="https://orcid.org/0000-0003-2374-0741">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Jeff Eaton (<a href="https://orcid.org/0000-0001-7728-728X">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Lucy D'Agostino McGowan (<a href="https://orcid.org/0000-0001-7297-9359">ORCID</a>) [reviewer]
</p>
</li>
<li><p> Duncan Gillespie [reviewer]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://docs.ropensci.org/rdhs/">https://docs.ropensci.org/rdhs/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ropensci/rdhs/issues">https://github.com/ropensci/rdhs/issues</a>
</p>
</li></ul>


<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code><a href="magrittr.html#topic+pipe">%&gt;%</a></code> for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>

<hr>
<h2 id='as_factor.labelled'>Archived dataset capable as_factor</h2><span id='topic+as_factor.labelled'></span>

<h3>Description</h3>

<p>Changes in 'haven' have meant that 'labelled' class are now referred to as
'haven_labelled' classes. If 'haven::as_factor' is used on old datasets they
will fail to find the suitable method. rdhs::as_factor.labelled will work on
old archived datasets that have a 'labelled' class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_factor.labelled(
  x,
  levels = c("default", "labels", "values", "both"),
  ordered = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_factor.labelled_+3A_x">x</code></td>
<td>
<p>Object to coerce to a factor.</p>
</td></tr>
<tr><td><code id="as_factor.labelled_+3A_levels">levels</code></td>
<td>
<p>How to create the levels of the generated factor:
</p>

<ul>
<li><p> &quot;default&quot;: uses labels where available, otherwise the values.
Labels are sorted by value.
</p>
</li>
<li><p> &quot;both&quot;: like &quot;default&quot;, but pastes together the level and value
</p>
</li>
<li><p> &quot;label&quot;: use only the labels; unlabelled values become <code>NA</code>
</p>
</li>
<li><p> &quot;values: use only the values
</p>
</li></ul>
</td></tr>
<tr><td><code id="as_factor.labelled_+3A_ordered">ordered</code></td>
<td>
<p>If <code>TRUE</code> create an ordered (ordinal) factor, if
<code>FALSE</code> (the default) create a regular (nominal) factor.</p>
</td></tr>
<tr><td><code id="as_factor.labelled_+3A_...">...</code></td>
<td>
<p>Other arguments passed down to method.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For more details see <code>haven::as_factor</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# create a data.frame using the new haven_labelled class
df1 &lt;- data.frame(
area = haven::labelled(c(1L, 2L, 3L), c("reg 1"=1,"reg 2"=2,"reg 3"=3)),
climate = haven::labelled(c(0L, 1L, 1L), c("cold"=0,"hot"=1))
)

# manually change it to the old style
class(df1$area) &lt;- "labelled"
class(df1$climate) &lt;- "labelled"

# with rdhs attached, i.e. library(rdhs), we can now do the following
haven::as_factor(df1$area)

# we can also use this on the data.frame by using the only_labelled argument
haven::as_factor(df1, only_labelled = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='authenticate_dhs'>DHS Website Authentication</h2><span id='topic+authenticate_dhs'></span>

<h3>Description</h3>

<p>Authenticate Users for DHS website
</p>


<h3>Usage</h3>

<pre><code class='language-R'>authenticate_dhs(config)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="authenticate_dhs_+3A_config">config</code></td>
<td>
<p>Object of class 'rdhs_config' as produced by 'read_rdhs_config'
that must contain a valid 'email', 'project' and 'password'.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the user has more than one project that contains the first
30 characters of the provided project they will be prompted to choose
which project they want. This choice will be saved so they do
not have to enter it again in this R session.
</p>


<h3>Value</h3>

<p>Returns list of length 3:
</p>

<ul>
<li><p> user_name: your email usually
</p>
</li>
<li><p> user_pass: your password you provided
</p>
</li>
<li><p> proj_id: your project number
</p>
</li></ul>



<h3>Note</h3>

<p>Credit for some of the function to
<a href="https://github.com/ajdamico/lodown/blob/master/R/dhs.R">https://github.com/ajdamico/lodown/blob/master/R/dhs.R</a>
</p>

<hr>
<h2 id='available_datasets'>Create a data frame of datasets that your log in can download</h2><span id='topic+available_datasets'></span>

<h3>Description</h3>

<p>DHS datasets that can be downloaded
</p>


<h3>Usage</h3>

<pre><code class='language-R'>available_datasets(
  config,
  datasets_api_results = NULL,
  surveys_api_results = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="available_datasets_+3A_config">config</code></td>
<td>
<p>Object of class 'rdhs_config' as produced by 'read_rdhs_config'
that must contain a valid 'email', 'project' and 'password'.</p>
</td></tr>
<tr><td><code id="available_datasets_+3A_datasets_api_results">datasets_api_results</code></td>
<td>
<p>Data.table for the api results for the datasets
endpoint. Default = NULL and
generated by default if not declared.</p>
</td></tr>
<tr><td><code id="available_datasets_+3A_surveys_api_results">surveys_api_results</code></td>
<td>
<p>Data.table for the api results for the surveys
endpoint. Default = NULL and
generated by default if not declared.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>"data.frame"</code> of length 14:
</p>

<ul>
<li><p>&quot;FileFormat&quot;
</p>
</li>
<li><p>&quot;FileSize&quot;
</p>
</li>
<li><p>&quot;DatasetType&quot;
</p>
</li>
<li><p>&quot;SurveyNum&quot;
</p>
</li>
<li><p>&quot;SurveyId&quot;
</p>
</li>
<li><p>&quot;FileType&quot;
</p>
</li>
<li><p>&quot;FileDateLastModified&quot;
</p>
</li>
<li><p>&quot;SurveyYearLabel&quot;
</p>
</li>
<li><p>&quot;SurveyType&quot;
</p>
</li>
<li><p>&quot;SurveyYear&quot;
</p>
</li>
<li><p>&quot;DHS_CountryCode&quot;
</p>
</li>
<li><p>&quot;FileName&quot;
</p>
</li>
<li><p>&quot;CountryName&quot;
</p>
</li>
<li><p>&quot;URLS&quot;
</p>
</li></ul>



<h3>Note</h3>

<p>Inspiration for function to
<a href="https://github.com/ajdamico/lodown/blob/master/R/dhs.R">https://github.com/ajdamico/lodown/blob/master/R/dhs.R</a>
</p>

<hr>
<h2 id='client_cache_date'>Pull last cache date</h2><span id='topic+client_cache_date'></span>

<h3>Description</h3>

<p>Pull last cache date
</p>


<h3>Usage</h3>

<pre><code class='language-R'>client_cache_date(root)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="client_cache_date_+3A_root">root</code></td>
<td>
<p>Character for root path to where client,
caches, surveys etc. will be stored.</p>
</td></tr>
</table>

<hr>
<h2 id='client_dhs'>Make a dhs client</h2><span id='topic+client_dhs'></span>

<h3>Description</h3>

<p>Make a DHS API client
</p>


<h3>Usage</h3>

<pre><code class='language-R'>client_dhs(config = NULL, root = rappdirs_rdhs(), api_key = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="client_dhs_+3A_config">config</code></td>
<td>
<p>config object, as created using <code>read_rdhs_config</code></p>
</td></tr>
<tr><td><code id="client_dhs_+3A_root">root</code></td>
<td>
<p>Character for root directory to where client, caches,
surveys etc. will be stored. Default = <code>rappdirs_rdhs()</code></p>
</td></tr>
<tr><td><code id="client_dhs_+3A_api_key">api_key</code></td>
<td>
<p>Character for DHS API KEY. Default = NULL</p>
</td></tr>
</table>


<h3>Methods</h3>


<dl>
<dt><code>dhs_api_request</code></dt><dd>
<p>Makes a call to the DHS websites API. You can make requests to any of their declared api endpoints (see <code>vignette(rdhs)</code> for more on these). API queries can be filtered by providing query terms, and you can control how many search results you want returned. The default parameters will return all of the results, and will format it nicely into a data.frame for you.
N.B. This is easier to now do by using the bespoke functions that are included within the package. These take the form dhs_&lt;endpoint&gt;, e.g. <code><a href="#topic+dhs_data">dhs_data</a></code>. These functions can also take your client as an argument that will cache the response for you
</p>
<p><em>Usage:</em>
<code>dhs_api_request(api_endpoint, query = list(), api_key = private$api_key,
      num_results = 100, just_results = TRUE)</code>
</p>
<p><em>Arguments:</em>
</p>

<ul>
<li><p><code>api_endpoint</code>:   API endpoint. Must be one of the 12 possible endpoints.

</p>
</li>
<li><p><code>query</code>:   List of query filters. To see possible query filter terms for each endpoint then head to the DHS api website.

</p>
</li>
<li><p><code>api_key</code>:   DHS API key. Default will grab the key provided when the client was created.

</p>
</li>
<li><p><code>num_results</code>:   The Number of results to return. Default = &quot;ALL&quot; which will loop through all the api search results pages for you if there are more results than their API will allow you to fetch in one page. If you specify a number this many results will be returned (but probably best to just leave default).

</p>
</li>
<li><p><code>just_results</code>:   Boolean whether to return just the results or all the http API response. Default = TRUE (probably best again to leave as this.)

</p>
</li></ul>

<p><em>Value</em>:
Data.frame with search results if just_results=TRUE, otherwise a nested list with all the API responses for each page required.
</p>
</dd>
<dt><code>available_datasets</code></dt><dd>
<p>Searches the DHS website for all the datasets that you can download. The results of this function are cached in the client. If you have recently requested new datasets from the DHS website then you can specify to clear the cache first so that you get the new set of datasets available to you.
</p>
<p><em>Usage:</em>
<code>available_datasets(clear_cache_first = FALSE)</code>
</p>
<p><em>Arguments:</em>
</p>

<ul>
<li><p><code>clear_cache_first</code>:   Boolean detailing if you would like to clear the cached available datasets first. The default is set to FALSE. This option is available so that you can make sure your client fetches any new datasets that you have recently been given access to.

</p>
</li></ul>

<p><em>Value</em>:
Data.frame object with 14 variables that detail the surveys you can download, their url download links and the country, survey, year etc info for that link.
</p>
</dd>
<dt><code>get_datasets</code></dt><dd>
<p>Gets datasets from your cache or downloads from the DHS website. By providing the filenames, as specified in one of the returned fields from <code><a href="#topic+dhs_datasets">dhs_datasets</a></code>, the client will log in for you and download all the files you have requested. If any of the requested files are unavailable for your log in, these will be flagged up first as a message so you can make a note and request them through the DHS website. You also have the option to control whether the downloaded zip file is then extracted and converted into a more convenient R <code>data.frame</code>. This converted object will then be subsequently saved as a &quot;.rds&quot; object within the client root directory datasets folder, which can then be more quickly loaded when needed with <code>readRDS</code>. You also have the option to reformat the dataset, which will ensure that a suitable parser is used to preserve the meta information in your dataset, such as what different survey response codes mean.
</p>
<p><em>Usage:</em>
<code>get_datasets(dataset_filenames, download_option = "rds", reformat = FALSE,
      all_lower = TRUE, output_dir_root = file.path(private$root,
          "datasets"), clear_cache = FALSE, ...)</code>
</p>
<p><em>Arguments:</em>
</p>

<ul>
<li><p><code>dataset_filenames</code>:   The desired filenames to be downloaded. These can be found as one of the returned fields from <code><a href="#topic+dhs_datasets">dhs_datasets</a></code>. Alternatively you can also pass the desired rows from <code><a href="#topic+dhs_datasets">dhs_datasets</a></code>.

</p>
</li>
<li><p><code>download_option</code>:   Character specifying whether the dataset should be just downloaded (&quot;zip&quot;), imported and saved as an .rds object (&quot;rds&quot;), or both extract and rds (&quot;both&quot;). Conveniently you can just specify any letter from these options.

</p>
</li>
<li><p><code>reformat</code>:   Boolean concerning whether to reformat read in datasets by removing all factors and labels. Default = FALSE.

</p>
</li>
<li><p><code>all_lower</code>:   Logical indicating whether all value labels should be lower case. Default to 'TRUE'.

</p>
</li>
<li><p><code>output_dir_root</code>:   Root directory where the datasets will be stored within. The default will download datasets to a subfolder of the client root called &quot;datasets&quot;

</p>
</li>
<li><p><code>clear_cache</code>:   Should your available datasets cache be cleared first. This will allow newly accessed datasets to be available. Default = 'TRUE'

</p>
</li>
<li><p><code>...</code>:   Any other arguments to be passed to <code><a href="#topic+read_dhs_dataset">read_dhs_dataset</a></code>

</p>
</li></ul>

<p><em>Value</em>:
Depends on the download_option requested, but ultimately it is a file path to where the dataset was downloaded to, so that you can interact with it accordingly.
</p>
</dd>
<dt><code>survey_questions</code></dt><dd>
<p>Use this function after download_survey to query downloaded surveys for what questions they asked. This function will look for the downloaded and imported survey datasets from the cache, and will download them if not previously downloaded.
</p>
<p><em>Usage:</em>
<code>survey_questions(dataset_filenames, search_terms = NULL, essential_terms = NULL,
      regex = NULL, rm_na = TRUE, ...)</code>
</p>
<p><em>Arguments:</em>
</p>

<ul>
<li><p><code>dataset_filenames</code>:   The desired filenames to be downloaded. These can be found as one of the returned fields from <code><a href="#topic+dhs_datasets">dhs_datasets</a></code>.

</p>
</li>
<li><p><code>search_terms</code>:   Character vector of search terms. If any of these terms are found within the surveys question descriptions, the corresponding code and description will be returned.

</p>
</li>
<li><p><code>essential_terms</code>:   Character pattern that has to be in the description of survey questions. I.e. the function will first find all survey_questions that contain your search terms (or regex) OR essential_terms. It will then remove any questions that did not contain your essential_terms. Default = NULL.

</p>
</li>
<li><p><code>regex</code>:   Regex character pattern for matching. If you want to specify your regex search pattern, then specify this argument. N.B. If both search_terms and regex are supplied as arguments then regex will be ignored.

</p>
</li>
<li><p><code>rm_na</code>:   Should NAs be removed. Default is 'TRUE'

</p>
</li>
<li><p><code>...</code>:   Any other arguments to be passed to <code><a href="#topic+download_datasets">download_datasets</a></code>

</p>
</li></ul>

<p><em>Value</em>:
Data frame of the surveys where matches were found and then all the resultant codes and descriptions.
</p>
</dd>
<dt><code>survey_variables</code></dt><dd>
<p>Use this function after download_survey to look up all the surveys that have the provided codes.
</p>
<p><em>Usage:</em>
<code>survey_variables(dataset_filenames, variables, essential_variables = NULL,
      rm_na = TRUE, ...)</code>
</p>
<p><em>Arguments:</em>
</p>

<ul>
<li><p><code>dataset_filenames</code>:   The desired filenames to be downloaded. These can be found as one of the returned fields from <code><a href="#topic+dhs_datasets">dhs_datasets</a></code>.

</p>
</li>
<li><p><code>variables</code>:   Character vector of survey variables to be looked up

</p>
</li>
<li><p><code>essential_variables</code>:   Character vector of variables that need to present. If any of the codes are not present in that survey, the survey will not be returned by this function. Default = NULL.

</p>
</li>
<li><p><code>rm_na</code>:   Should NAs be removed. Default is 'TRUE'

</p>
</li>
<li><p><code>...</code>:   Any other arguments to be passed to <code><a href="#topic+download_datasets">download_datasets</a></code>

</p>
</li></ul>

<p><em>Value</em>:
Data frame of the surveys where matches were found and then all the resultant codes and descriptions.
</p>
</dd>
<dt><code>extract</code></dt><dd>
<p>Function to extract datasets using a set of survey questions as taken from the output from <code>survey_questions</code>
</p>
<p><em>Usage:</em>
<code>extract(questions, add_geo = FALSE)</code>
</p>
<p><em>Arguments:</em>
</p>

<ul>
<li><p><code>questions</code>:   Questions to be queried, in the format from <code>survey_questions</code>

</p>
</li>
<li><p><code>add_geo</code>:   Add geographic information to the extract. Default = TRUE

</p>
</li></ul>

</dd>
<dt><code>get_variable_labels</code></dt><dd>
<p>Returns information about a dataset's survey variables and definitions.
</p>
<p><em>Usage:</em>
<code>get_variable_labels(dataset_filenames = NULL, dataset_paths = NULL, rm_na = FALSE)</code>
</p>
<p><em>Arguments:</em>
</p>

<ul>
<li><p><code>dataset_filenames</code>:   Vector of dataset filenames to look up

</p>
</li>
<li><p><code>dataset_paths</code>:   Vector of dataset file paths to where datasets have been saved to

</p>
</li>
<li><p><code>rm_na</code>:   Should variables and labels with NAs be removed. Default = FALSE

</p>
</li></ul>

<p><em>Value</em>:
Data frame of survey variable names and definitions
</p>
</dd>
<dt><code>get_cache_date</code></dt><dd>
<p>Returns the private member variable cache-date, which is the date the client was last created/validated against the DHS API.
</p>
<p><em>Usage:</em>
<code>get_cache_date()</code>
</p>
<p><em>Value</em>:
POSIXct and POSIXt time
</p>
</dd>
<dt><code>get_root</code></dt><dd>
<p>Returns the file path to the client's root directory
</p>
<p><em>Usage:</em>
<code>get_root()</code>
</p>
<p><em>Value</em>:
Character string file path
</p>
</dd>
<dt><code>get_config</code></dt><dd>
<p>Returns the client's configuration
</p>
<p><em>Usage:</em>
<code>get_config()</code>
</p>
<p><em>Value</em>:
Config data.frame
</p>
</dd>
<dt><code>get_downloaded_datasets</code></dt><dd>
<p>Returns a named list of all downloaded datasets and their file paths
</p>
<p><em>Usage:</em>
<code>get_downloaded_datasets()</code>
</p>
<p><em>Value</em>:
List of dataset names and file paths.
</p>
</dd>
<dt><code>set_cache_date</code></dt><dd>
<p>Sets the private member variable cache-date, which is the date the client was last created/validated against the DHS API. This should never really be needed but is included to demonstrate the cache clearing properties of the client in the vignette.
</p>
<p><em>Usage:</em>
<code>set_cache_date(date)</code>
</p>
<p><em>Arguments:</em>
</p>

<ul>
<li><p><code>date</code>:   POSIXct and POSIXt time to update cache time to.

</p>
</li></ul>

</dd>
<dt><code>save_client</code></dt><dd>
<p>Internally save the client object as an .rds file within the root directory for the client.
</p>
<p><em>Usage:</em>
<code>save_client()</code>
</p>
</dd>
<dt><code>clear_namespace</code></dt><dd>
<p>Clear the keys and values associated within a cache context. The dhs client caches a number of different tasks, and places these within specific contexts using the package <code>storr::storr_rds</code>.
</p>
<p><em>Usage:</em>
<code>clear_namespace(namespace)</code>
</p>
<p><em>Arguments:</em>
</p>

<ul>
<li><p><code>namespace</code>:   Character string for the namespace to be cleared.

</p>
</li></ul>

</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# create an rdhs config file at "rdhs.json"
conf &lt;- set_rdhs_config(
config_path = "rdhs.json",global = FALSE, prompt = FALSE
)
td &lt;- tempdir()
cli &lt;- rdhs::client_dhs(api_key = "DEMO_1234", config = conf, root = td)

## End(Not run)
</code></pre>

<hr>
<h2 id='collapse_api_responses'>collapse API response list</h2><span id='topic+collapse_api_responses'></span>

<h3>Description</h3>

<p>collapse API response list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>collapse_api_responses(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="collapse_api_responses_+3A_x">x</code></td>
<td>
<p>List of lists from API to be collapsed</p>
</td></tr>
</table>

<hr>
<h2 id='data_and_labels'>Create list of dataset and its variable names</h2><span id='topic+data_and_labels'></span>

<h3>Description</h3>

<p>Function to give the former output of get_datasets as it can be nice to have
both the definitions and the dataset attached together
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_and_labels(dataset)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="data_and_labels_+3A_dataset">dataset</code></td>
<td>
<p>Any read in dataset created by <code>get_datasets</code>,
either as the file path or after having
been read using <code>readRDS</code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# get the model datasets included with the package
model_datasets &lt;- model_datasets

# download one of them
g &lt;- get_datasets(dataset_filenames = model_datasets$FileName[1])
dl &lt;- data_and_labels(g$zzbr62dt)

# now we easily have our survey question labels easily accessible
grep("bed net", dl$variable_names$description, value = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='delabel_df'>convert labelled data frame to data frame of just characters</h2><span id='topic+delabel_df'></span>

<h3>Description</h3>

<p>convert labelled data frame to data frame of just characters
</p>


<h3>Usage</h3>

<pre><code class='language-R'>delabel_df(df)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="delabel_df_+3A_df">df</code></td>
<td>
<p>data frame to convert labelled elements of. Likely this will be
the output of <code><a href="#topic+extract_dhs">extract_dhs</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of de-labelled elements
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df1 &lt;- data.frame(
area = haven::labelled(c(1L, 2L, 3L), c("reg 1"=1,"reg 2"=2,"reg 3"=3)),
climate = haven::labelled(c(0L, 1L, 1L), c("cold"=0,"hot"=1))
)

df_char &lt;- delabel_df(df = df1)

</code></pre>

<hr>
<h2 id='dhs_countries'>API request of DHS Countries</h2><span id='topic+dhs_countries'></span>

<h3>Description</h3>

<p>API request of DHS Countries
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dhs_countries(
  countryIds = NULL,
  indicatorIds = NULL,
  surveyIds = NULL,
  surveyYear = NULL,
  surveyYearStart = NULL,
  surveyYearEnd = NULL,
  surveyType = NULL,
  surveyCharacteristicIds = NULL,
  tagIds = NULL,
  f = NULL,
  returnFields = NULL,
  perPage = NULL,
  page = NULL,
  client = NULL,
  force = FALSE,
  all_results = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dhs_countries_+3A_countryids">countryIds</code></td>
<td>
<p>Specify a comma separated list of country ids to filter
by. For a list of countries use
<code>dhs_countries(returnFields=c("CountryName","DHS_CountryCode"))</code></p>
</td></tr>
<tr><td><code id="dhs_countries_+3A_indicatorids">indicatorIds</code></td>
<td>
<p>Specify a comma separated list of indicators ids to
filter by. For a list of indicators use
<code>dhs_indicators(returnFields=c("IndicatorId","Label","Definition"))</code></p>
</td></tr>
<tr><td><code id="dhs_countries_+3A_surveyids">surveyIds</code></td>
<td>
<p>Specify a comma separated list of survey ids to filter by.
For a list of surveys use <code>dhs_surveys(returnFields=c("SurveyId",
"SurveyYearLabel","SurveyType","CountryName"))</code></p>
</td></tr>
<tr><td><code id="dhs_countries_+3A_surveyyear">surveyYear</code></td>
<td>
<p>Specify a comma separated list of survey years to
filter by.</p>
</td></tr>
<tr><td><code id="dhs_countries_+3A_surveyyearstart">surveyYearStart</code></td>
<td>
<p>Specify a range of Survey Years to filter Countries
on. surveyYearStart is an inclusive value. Can be used alone or in
conjunction with surveyYearEnd.</p>
</td></tr>
<tr><td><code id="dhs_countries_+3A_surveyyearend">surveyYearEnd</code></td>
<td>
<p>Specify a range of Survey Years to filter Countries on.
surveyYearEnd is an inclusive value. Can be used alone or in conjunction
with surveyYearStart.</p>
</td></tr>
<tr><td><code id="dhs_countries_+3A_surveytype">surveyType</code></td>
<td>
<p>Specify a survey type to filter by.</p>
</td></tr>
<tr><td><code id="dhs_countries_+3A_surveycharacteristicids">surveyCharacteristicIds</code></td>
<td>
<p>Specify a survey characteristic id to filter
countries in surveys with the specified survey characteristic. For a list
of survey characteristics use
<code>dhs_surveys(returnFields=c("SurveyId","SurveyYearLabel",
"SurveyType","CountryName"))</code></p>
</td></tr>
<tr><td><code id="dhs_countries_+3A_tagids">tagIds</code></td>
<td>
<p>Specify a tag id to filter countries with surveys containing
indicators with the specified tag. For a list of tags use
<code>dhs_tags()</code></p>
</td></tr>
<tr><td><code id="dhs_countries_+3A_f">f</code></td>
<td>
<p>You can specify the format of the data returned from the query as
HTML, JSON, PJSON, geoJSON, JSONP, XML or CSV. The default data format
is JSON.</p>
</td></tr>
<tr><td><code id="dhs_countries_+3A_returnfields">returnFields</code></td>
<td>
<p>Specify a list of attributes to be returned.</p>
</td></tr>
<tr><td><code id="dhs_countries_+3A_perpage">perPage</code></td>
<td>
<p>Specify the number of results to be returned per page. By
default the API will return 100 results.</p>
</td></tr>
<tr><td><code id="dhs_countries_+3A_page">page</code></td>
<td>
<p>Allows specifying a page number to obtain for the API request. By
default the API will return page 1.</p>
</td></tr>
<tr><td><code id="dhs_countries_+3A_client">client</code></td>
<td>
<p>If the API request should be cached, then provide a client
object created by <code><a href="#topic+client_dhs">client_dhs</a></code></p>
</td></tr>
<tr><td><code id="dhs_countries_+3A_force">force</code></td>
<td>
<p>Should we force fetching the API results, and ignore any
cached results we have. Default = FALSE</p>
</td></tr>
<tr><td><code id="dhs_countries_+3A_all_results">all_results</code></td>
<td>
<p>Boolean for if all results should be returned. If FALSE
then the specified page only will be returned. Default = TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>data.table</code> of 12 (or less if <code>returnFields</code> is provided)
countries with their corresponding details. A detailed description of all
the attributes returned is provided at
<a href="https://api.dhsprogram.com/rest/dhs/countries/fields">https://api.dhsprogram.com/rest/dhs/countries/fields</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# A common use for the countries API endpoint is to query which countries
# ask questions about a given topic. For example to find all countries that
# record data on malaria prevalence by RDT:

dat &lt;- dhs_countries(indicatorIds = "ML_PMAL_C_RDT")

# Additionally you may want to know all the countries that have conducted
# MIS (malaria indicator surveys):

dat &lt;- dhs_countries(surveyType="MIS")

# A complete list of examples for how each argument to the countries API
# endpoint can be provided is given below, which is a copy of each of
# the examples listed in the API at:

# https://api.dhsprogram.com/#/api-countries.cfm


dat &lt;- dhs_countries(countryIds="EG",all_results=FALSE)
dat &lt;- dhs_countries(indicatorIds="FE_FRTR_W_TFR",all_results=FALSE)
dat &lt;- dhs_countries(surveyIds="SN2010DHS",all_results=FALSE)
dat &lt;- dhs_countries(surveyYear="2010",all_results=FALSE)
dat &lt;- dhs_countries(surveyYearStart="2006",all_results=FALSE)
dat &lt;- dhs_countries(surveyYearStart="1991", surveyYearEnd="2006",
all_results=FALSE)
dat &lt;- dhs_countries(surveyType="DHS",all_results=FALSE)
dat &lt;- dhs_countries(surveyCharacteristicIds="32",all_results=FALSE)
dat &lt;- dhs_countries(tagIds="1",all_results=FALSE)
dat &lt;- dhs_countries(f="html",all_results=FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='dhs_data'>API request of DHS Indicator Data</h2><span id='topic+dhs_data'></span>

<h3>Description</h3>

<p>API request of DHS Indicator Data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dhs_data(
  countryIds = NULL,
  indicatorIds = NULL,
  surveyIds = NULL,
  selectSurveys = NULL,
  surveyYear = NULL,
  surveyYearStart = NULL,
  surveyYearEnd = NULL,
  surveyType = NULL,
  surveyCharacteristicIds = NULL,
  characteristicCategory = NULL,
  characteristicLabel = NULL,
  tagIds = NULL,
  breakdown = NULL,
  returnGeometry = NULL,
  f = NULL,
  returnFields = NULL,
  perPage = NULL,
  page = NULL,
  client = NULL,
  force = FALSE,
  all_results = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dhs_data_+3A_countryids">countryIds</code></td>
<td>
<p>Specify a comma separated list of country ids to filter
by. For a list of countries use
<code>dhs_countries(returnFields=c("CountryName","DHS_CountryCode"))</code></p>
</td></tr>
<tr><td><code id="dhs_data_+3A_indicatorids">indicatorIds</code></td>
<td>
<p>Specify a comma separated list of indicator ids to
filter by. For a list of indicators use
<code>dhs_indicators(returnFields=c("IndicatorId","Label","Definition"))</code></p>
</td></tr>
<tr><td><code id="dhs_data_+3A_surveyids">surveyIds</code></td>
<td>
<p>Specify a comma separated list of survey ids to filter by.
For a list of surveys use
<code>dhs_surveys(returnFields=c("SurveyId","SurveyYearLabel",
  "SurveyType","CountryName"))</code></p>
</td></tr>
<tr><td><code id="dhs_data_+3A_selectsurveys">selectSurveys</code></td>
<td>
<p>Specify to filter Data from the latest survey by adding
'selectSurveys=&quot;latest&quot;' in conjunction with a Country Code and/or Survey
Type. Please Note: Not all indicators are present in the latest surveys.
To filter your API Indicator Data call to return the latest survey data in
which a specific set of indicators is present, add
'selectSurveys=&quot;byIndicator&quot;' in conjunction with Indicator IDs, Country
Code, and/or Survey Type instead
of using 'selectSurveys=&quot;latest&quot;'</p>
</td></tr>
<tr><td><code id="dhs_data_+3A_surveyyear">surveyYear</code></td>
<td>
<p>Specify a comma separated list of survey years to
filter by.</p>
</td></tr>
<tr><td><code id="dhs_data_+3A_surveyyearstart">surveyYearStart</code></td>
<td>
<p>Specify a range of Survey Years to filter Data on.
surveyYearStart is an inclusive value. Can be used alone or in conjunction
with surveyYearEnd.</p>
</td></tr>
<tr><td><code id="dhs_data_+3A_surveyyearend">surveyYearEnd</code></td>
<td>
<p>Specify a range of Survey Years to filter Data on.
surveyYearEnd is an inclusive value. Can be used alone or in conjunction
with surveyYearStart.</p>
</td></tr>
<tr><td><code id="dhs_data_+3A_surveytype">surveyType</code></td>
<td>
<p>Specify a survey type to filter by.</p>
</td></tr>
<tr><td><code id="dhs_data_+3A_surveycharacteristicids">surveyCharacteristicIds</code></td>
<td>
<p>Specify a survey characteristic id to filter
data on surveys with the specified survey characteristic. For a list of
survey characteristics use
<code>dhs_surveys(returnFields=c("SurveyId","SurveyYearLabel",
  "SurveyType","CountryName"))</code></p>
</td></tr>
<tr><td><code id="dhs_data_+3A_characteristiccategory">characteristicCategory</code></td>
<td>
<p>Specify a survey characteristic category to
filter data on surveys with the specified survey characteristic category.
This query is case insensitive, but it only recognizes exact phrase
matches. For example, 'characteristicCategory=&quot;wealth&quot;' will return
results that have a characteristic category of 'Wealth' while
&lsquo;characteristicCategory=&quot;wealth quintile&quot;&rsquo; will return results that have
a characteristic category of 'Wealth Quintile'.</p>
</td></tr>
<tr><td><code id="dhs_data_+3A_characteristiclabel">characteristicLabel</code></td>
<td>
<p>Specify a survey characteristic category to
filter data on surveys with the specified survey characteristic category.
This query is case insensitive, but it only recognizes exact phrase
matches. You can use characteristicLabel on its own or in conjunction with
characteristicCategory.</p>
</td></tr>
<tr><td><code id="dhs_data_+3A_tagids">tagIds</code></td>
<td>
<p>Specify a tag id to filter data on indicators with the
specified tag. For a list of tags use <code>dhs_tags()</code></p>
</td></tr>
<tr><td><code id="dhs_data_+3A_breakdown">breakdown</code></td>
<td>
<p>Data can be requested at different levels via the breakdown
parameter. By default national data is returned and provides totals on a
national level. 'breakdown=&quot;subnational&quot;' data provides values on a
subnational level. 'breakdown=&quot;background&quot;' provides totals on categorized
basis. Examples are urban/rural, education and wealth level.
'breakdown=&quot;all&quot;' provides all the data including disaggregated data.</p>
</td></tr>
<tr><td><code id="dhs_data_+3A_returngeometry">returnGeometry</code></td>
<td>
<p>Coordinates can be requested from the API by including
'returnGeometry=TRUE' in your request. The default for this value is
false.</p>
</td></tr>
<tr><td><code id="dhs_data_+3A_f">f</code></td>
<td>
<p>You can specify the format of the data returned from the query as
HTML, JSON, PJSON, geoJSON, JSONP, XML or CSV. The default data format is
JSON.</p>
</td></tr>
<tr><td><code id="dhs_data_+3A_returnfields">returnFields</code></td>
<td>
<p>Specify a list of attributes to be returned.</p>
</td></tr>
<tr><td><code id="dhs_data_+3A_perpage">perPage</code></td>
<td>
<p>Specify the number of results to be returned per page. By
default the API will return 100 results.</p>
</td></tr>
<tr><td><code id="dhs_data_+3A_page">page</code></td>
<td>
<p>Allows specifying a page number to obtain for the API request.
By default the API will return page 1.</p>
</td></tr>
<tr><td><code id="dhs_data_+3A_client">client</code></td>
<td>
<p>If the API request should be cached, then provide a client
object created by <code><a href="#topic+client_dhs">client_dhs</a></code></p>
</td></tr>
<tr><td><code id="dhs_data_+3A_force">force</code></td>
<td>
<p>Should we force fetching the API results, and ignore any
cached results we have. Default = FALSE</p>
</td></tr>
<tr><td><code id="dhs_data_+3A_all_results">all_results</code></td>
<td>
<p>Boolean for if all results should be returned. If FALSE
then the specified page only will be returned. Default = TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>data.table</code> of 27 (or less if <code>returnFields</code> is provided)
data for your particular query. Details of properties returned with each
row of data are provided at
<a href="https://api.dhsprogram.com/rest/dhs/data/fields">https://api.dhsprogram.com/rest/dhs/data/fields</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# A common use for the indicator data API will be to search for a specific
# health indicator for a given country. For example to return the total
# malaria prevalence according to RDT, given by the indicator ML_PMAL_C_RDT,
# in Senegal since 2010:

dat &lt;- dhs_data(
indicatorIds="ML_PMAL_C_RDT",
countryIds="SN",
surveyYearStart="2006"
)

# A complete list of examples for how each argument to the data api
# endpoint can be provided is given below, which is a copy of each of
# the examples listed in the API at:

# https://api.dhsprogram.com/#/api-data.cfm


dat &lt;- dhs_data(countryIds="EG",all_results=FALSE)
dat &lt;- dhs_data(indicatorIds="FE_FRTR_W_TFR",all_results=FALSE)
dat &lt;- dhs_data(surveyIds="SN2010DHS",all_results=FALSE)
dat &lt;- dhs_data(selectSurveys="latest",all_results=FALSE)
dat &lt;- dhs_data(selectSurveys="byIndicator", indicatorIds="FE_CEBA_W_CH0",
all_results=FALSE)
dat &lt;- dhs_data(surveyYear="2010",all_results=FALSE)
dat &lt;- dhs_data(surveyYearStart="2006",all_results=FALSE)
dat &lt;- dhs_data(surveyYearStart="1991", surveyYearEnd="2006",
all_results=FALSE)
dat &lt;- dhs_data(surveyType="DHS",all_results=FALSE)
dat &lt;- dhs_data(surveyCharacteristicIds="32",all_results=FALSE)
dat &lt;- dhs_data(characteristicCategory="wealth quintile",all_results=FALSE)
dat &lt;- dhs_data(breakdown="all", countryIds="AZ", characteristicLabel="6+",
all_results=FALSE)
dat &lt;- dhs_data(tagIds="1",all_results=FALSE)
dat &lt;- dhs_data(breakdown="subnational",all_results=FALSE)
dat &lt;- dhs_data(breakdown="background",all_results=FALSE)
dat &lt;- dhs_data(breakdown="all",all_results=FALSE)
dat &lt;- dhs_data(f="html",all_results=FALSE)
dat &lt;- dhs_data(f="geojson", returnGeometry="true",all_results=FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='dhs_data_updates'>API request of DHS Data Updates</h2><span id='topic+dhs_data_updates'></span>

<h3>Description</h3>

<p>API request of DHS Data Updates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dhs_data_updates(
  lastUpdate = NULL,
  f = NULL,
  returnFields = NULL,
  perPage = NULL,
  page = NULL,
  client = NULL,
  force = FALSE,
  all_results = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dhs_data_updates_+3A_lastupdate">lastUpdate</code></td>
<td>
<p>Specify a date or Unix time to filter the updates by.
Only results for data that have been updated on or after the specified
date will be returned.</p>
</td></tr>
<tr><td><code id="dhs_data_updates_+3A_f">f</code></td>
<td>
<p>You can specify the format of the data returned from the query as
HTML, JSON, PJSON, geoJSON, JSONP, XML or CSV. The default data format is
JSON.</p>
</td></tr>
<tr><td><code id="dhs_data_updates_+3A_returnfields">returnFields</code></td>
<td>
<p>Specify a list of attributes to be returned.</p>
</td></tr>
<tr><td><code id="dhs_data_updates_+3A_perpage">perPage</code></td>
<td>
<p>Specify the number of results to be returned per page. By
default the API will return 100 results.</p>
</td></tr>
<tr><td><code id="dhs_data_updates_+3A_page">page</code></td>
<td>
<p>Allows specifying a page number to obtain for the API request.
By default the API will return page 1.</p>
</td></tr>
<tr><td><code id="dhs_data_updates_+3A_client">client</code></td>
<td>
<p>If the API request should be cached, then provide a client
object created by <code><a href="#topic+client_dhs">client_dhs</a></code></p>
</td></tr>
<tr><td><code id="dhs_data_updates_+3A_force">force</code></td>
<td>
<p>Should we force fetching the API results, and ignore any
cached results we have. Default = FALSE</p>
</td></tr>
<tr><td><code id="dhs_data_updates_+3A_all_results">all_results</code></td>
<td>
<p>Boolean for if all results should be returned. If FALSE
then the specified page only will be returned. Default = TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>data.table</code> of 9 (or less if <code>returnFields</code> is provided)
indicators or surveys that have been added/updated or removed. A detailed
description of all the attributes returned is provided at
<a href="https://api.dhsprogram.com/rest/dhs/dataupdates/fields">https://api.dhsprogram.com/rest/dhs/dataupdates/fields</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# The API endpoint for the data updates available within the DHS
# is a very useful endpoint, which is used a lot within `rdhs`. For example,
# we use it to keep the end user's cache up to date. For example to find all
# updates that have occurred in 2018:

dat &lt;- dhs_data_updates(lastUpdate="20180101")

# A complete list of examples for how each argument to the data updates
# API endpoint can be provided is given below, which is a
# copy of each of the examples listed in the API at:

# https://api.dhsprogram.com/#/api-dataupdates.cfm


dat &lt;- dhs_data_updates(lastUpdate="20150901",all_results=FALSE)
dat &lt;- dhs_data_updates(f="html",all_results=FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='dhs_datasets'>API request of DHS Datasets</h2><span id='topic+dhs_datasets'></span>

<h3>Description</h3>

<p>API request of DHS Datasets
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dhs_datasets(
  countryIds = NULL,
  selectSurveys = NULL,
  surveyIds = NULL,
  surveyYear = NULL,
  surveyYearStart = NULL,
  surveyYearEnd = NULL,
  surveyType = NULL,
  fileFormat = NULL,
  fileType = NULL,
  f = NULL,
  returnFields = NULL,
  perPage = NULL,
  page = NULL,
  client = NULL,
  force = FALSE,
  all_results = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dhs_datasets_+3A_countryids">countryIds</code></td>
<td>
<p>Specify a comma separated list of country ids to filter
by. For a list of countries use
<code>dhs_countries(returnFields=c("CountryName","DHS_CountryCode"))</code></p>
</td></tr>
<tr><td><code id="dhs_datasets_+3A_selectsurveys">selectSurveys</code></td>
<td>
<p>Specify to filter data from the latest survey by
including 'selectSurveys=TRUE' in your request. Note: Please use this
parameter in conjunction with countryCode, surveyType, or indicatorIds for
best results.</p>
</td></tr>
<tr><td><code id="dhs_datasets_+3A_surveyids">surveyIds</code></td>
<td>
<p>Specify a comma separated list of survey ids to filter by.
For a list of surveys use
<code>dhs_surveys(returnFields=c("SurveyId","SurveyYearLabel",
"SurveyType","CountryName"))</code></p>
</td></tr>
<tr><td><code id="dhs_datasets_+3A_surveyyear">surveyYear</code></td>
<td>
<p>Specify a comma separated list of survey years to
filter by.</p>
</td></tr>
<tr><td><code id="dhs_datasets_+3A_surveyyearstart">surveyYearStart</code></td>
<td>
<p>Specify a range of Survey Years to filter Datasets
on. surveyYearStart is an inclusive value. Can be used alone or in
conjunction with surveyYearEnd.</p>
</td></tr>
<tr><td><code id="dhs_datasets_+3A_surveyyearend">surveyYearEnd</code></td>
<td>
<p>Specify a range of Survey Years to filter Datasets on.
surveyYearEnd is an inclusive value. Can be used alone or in conjunction
with surveyYearStart.</p>
</td></tr>
<tr><td><code id="dhs_datasets_+3A_surveytype">surveyType</code></td>
<td>
<p>Specify a survey type to filter by.</p>
</td></tr>
<tr><td><code id="dhs_datasets_+3A_fileformat">fileFormat</code></td>
<td>
<p>Specify the file format for the survey. Can use file
format type name (SAS, Stata, SPSS, Flat, Hierarchical) or file format
code. View list of file format codes -
<a href="https://dhsprogram.com/data/File-Types-and-Names.cfm">https://dhsprogram.com/data/File-Types-and-Names.cfm</a></p>
</td></tr>
<tr><td><code id="dhs_datasets_+3A_filetype">fileType</code></td>
<td>
<p>Specify the type of dataset generated for the survey
(e.g. household, women, men, children, couples, etc.). View list of file
type codes - <a href="https://dhsprogram.com/data/File-Types-and-Names.cfm">https://dhsprogram.com/data/File-Types-and-Names.cfm</a></p>
</td></tr>
<tr><td><code id="dhs_datasets_+3A_f">f</code></td>
<td>
<p>You can specify the format of the data returned from the query as
HTML, JSON, PJSON, geoJSON, JSONP, XML or CSV. The default data format is
JSON.</p>
</td></tr>
<tr><td><code id="dhs_datasets_+3A_returnfields">returnFields</code></td>
<td>
<p>Specify a list of attributes to be returned.</p>
</td></tr>
<tr><td><code id="dhs_datasets_+3A_perpage">perPage</code></td>
<td>
<p>Specify the number of results to be returned per page. By
default the API will return 100 results.</p>
</td></tr>
<tr><td><code id="dhs_datasets_+3A_page">page</code></td>
<td>
<p>Allows specifying a page number to obtain for the API request.
By default the API will return page 1.</p>
</td></tr>
<tr><td><code id="dhs_datasets_+3A_client">client</code></td>
<td>
<p>If the API request should be cached, then provide a client
object created by <code><a href="#topic+client_dhs">client_dhs</a></code></p>
</td></tr>
<tr><td><code id="dhs_datasets_+3A_force">force</code></td>
<td>
<p>Should we force fetching the API results, and ignore any
cached results we have. Default = FALSE</p>
</td></tr>
<tr><td><code id="dhs_datasets_+3A_all_results">all_results</code></td>
<td>
<p>Boolean for if all results should be returned. If FALSE
then the specified page only will be returned. Default = TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>data.table</code> of 13 (or less if <code>returnFields</code> is provided)
datasets with their corresponding details. A detailed description of all
the attributes returned is provided at
<a href="https://api.dhsprogram.com/rest/dhs/datasets/fields">https://api.dhsprogram.com/rest/dhs/datasets/fields</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# The API endpoint for the datasets available within the DHS website
# is a very useful endpoint, which is used a lot within `rdhs`. For example,
# it is used to find the file names and size of the dataset files, as well
# as when they were last modified. This enables us to see which datasets
# have been updated and may thus be out of date. For example to find all
# datasets that have been modified in 2018:

dat &lt;- dhs_datasets()
dates &lt;- rdhs:::mdy_hms(dat$FileDateLastModified)
years &lt;- as.POSIXlt(dates, tz = tz(dates))$year + 1900
modified_in_2018 &lt;- which(years == 2018)

# A complete list of examples for how each argument to the datasets
# API endpoint can be provided is given below, which is a
# copy of each of the examples listed in the API at:

# https://api.dhsprogram.com/#/api-datasets.cfm


dat &lt;- dhs_datasets(countryIds="EG",all_results=FALSE)
dat &lt;- dhs_datasets(selectSurveys="latest",all_results=FALSE)
dat &lt;- dhs_datasets(surveyIds="SN2010DHS",all_results=FALSE)
dat &lt;- dhs_datasets(surveyYear="2010",all_results=FALSE)
dat &lt;- dhs_datasets(surveyYearStart="2006",all_results=FALSE)
dat &lt;- dhs_datasets(surveyYearStart="1991", surveyYearEnd="2006",
all_results=FALSE)
dat &lt;- dhs_datasets(surveyType="DHS",all_results=FALSE)
dat &lt;- dhs_datasets(fileFormat="stata",all_results=FALSE)
dat &lt;- dhs_datasets(fileFormat="DT",all_results=FALSE)
dat &lt;- dhs_datasets(fileType="KR",all_results=FALSE)
dat &lt;- dhs_datasets(f="geojson",all_results=FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='dhs_geometry'>API request of DHS Geometry</h2><span id='topic+dhs_geometry'></span>

<h3>Description</h3>

<p>API request of DHS Geometry
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dhs_geometry(
  countryIds = NULL,
  surveyIds = NULL,
  surveyYear = NULL,
  surveyYearStart = NULL,
  surveyYearEnd = NULL,
  surveyType = NULL,
  f = NULL,
  returnFields = NULL,
  perPage = NULL,
  page = NULL,
  client = NULL,
  force = FALSE,
  all_results = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dhs_geometry_+3A_countryids">countryIds</code></td>
<td>
<p>Specify a comma separated list of country ids to filter
by. For a list of countries use
<code>dhs_countries(returnFields=c("CountryName","DHS_CountryCode"))</code></p>
</td></tr>
<tr><td><code id="dhs_geometry_+3A_surveyids">surveyIds</code></td>
<td>
<p>Specify a comma separated list of survey ids to filter by.
For a list of surveys use
<code>dhs_surveys(returnFields=c("SurveyId","SurveyYearLabel",
"SurveyType","CountryName"))</code></p>
</td></tr>
<tr><td><code id="dhs_geometry_+3A_surveyyear">surveyYear</code></td>
<td>
<p>Specify a comma separated list of survey years to
filter by.</p>
</td></tr>
<tr><td><code id="dhs_geometry_+3A_surveyyearstart">surveyYearStart</code></td>
<td>
<p>Specify a range of Survey Years to filter Geometry
on. surveyYearStart is an inclusive value. Can be used alone or in
conjunction with surveyYearEnd.</p>
</td></tr>
<tr><td><code id="dhs_geometry_+3A_surveyyearend">surveyYearEnd</code></td>
<td>
<p>Specify a range of Survey Years to filter Geometry on.
surveyYearEnd is an inclusive value. Can be used alone or in conjunction
with surveyYearStart.</p>
</td></tr>
<tr><td><code id="dhs_geometry_+3A_surveytype">surveyType</code></td>
<td>
<p>Specify a survey type to filter by.</p>
</td></tr>
<tr><td><code id="dhs_geometry_+3A_f">f</code></td>
<td>
<p>You can specify the format of the data returned from the query as
HTML, JSON, PJSON, geoJSON, JSONP, XML or CSV. The default data format
is JSON.</p>
</td></tr>
<tr><td><code id="dhs_geometry_+3A_returnfields">returnFields</code></td>
<td>
<p>Specify a list of attributes to be returned.</p>
</td></tr>
<tr><td><code id="dhs_geometry_+3A_perpage">perPage</code></td>
<td>
<p>Specify the number of results to be returned per page. By
default the API will return 100 results.</p>
</td></tr>
<tr><td><code id="dhs_geometry_+3A_page">page</code></td>
<td>
<p>Allows specifying a page number to obtain for the API request.
By default the API will return page 1.</p>
</td></tr>
<tr><td><code id="dhs_geometry_+3A_client">client</code></td>
<td>
<p>If the API request should be cached, then provide a client
object created by <code><a href="#topic+client_dhs">client_dhs</a></code></p>
</td></tr>
<tr><td><code id="dhs_geometry_+3A_force">force</code></td>
<td>
<p>Should we force fetching the API results, and ignore any
cached results we have. Default = FALSE</p>
</td></tr>
<tr><td><code id="dhs_geometry_+3A_all_results">all_results</code></td>
<td>
<p>Boolean for if all results should be returned. If FALSE
then the specified page only will be returned. Default = TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>data.table</code> of 7 (or less if <code>returnFields</code> is provided)
geometry with their corresponding details. A detailed description of all
the attributes returned is provided at
<a href="https://api.dhsprogram.com/rest/dhs/geometry/fields">https://api.dhsprogram.com/rest/dhs/geometry/fields</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# The geometry API endpoint returns the spatial geometry for countries, and
# can then be used to recreate the spatial polygon for a given country. For
# example to return the coordinates for the Senegal 2010 DHS survey:

dat &lt;- dhs_geometry(surveyIds="SN2010DHS")

# At the moment there is no function to convert the coordinates returned by
# the API but this will be in the next version of rdhs. For those interested
# look at the geojson vignette for an alternative way to produce plots.

# A complete list of examples for how each argument to the geometry
# API endpoint can be provided is given below, which is a
# copy of each of the examples listed in the API at:

# https://api.dhsprogram.com/#/api-geometry.cfm


dat &lt;- dhs_geometry(countryIds="EG",all_results=FALSE)
dat &lt;- dhs_geometry(surveyIds="SN2010DHS",all_results=FALSE)
dat &lt;- dhs_geometry(surveyYear="2010",all_results=FALSE)
dat &lt;- dhs_geometry(surveyYearStart="2006",all_results=FALSE)
dat &lt;- dhs_geometry(surveyYearStart="1991", surveyYearEnd="2006",
all_results=FALSE)
dat &lt;- dhs_geometry(surveyType="DHS",all_results=FALSE)
dat &lt;- dhs_geometry(f="geojson",all_results=FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='dhs_gps_data_format'>DHS GPS Data Format</h2><span id='topic+dhs_gps_data_format'></span>

<h3>Description</h3>

<p>Data frame to describe the data encoded in DHS GPS files
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(dhs_gps_data_format)
</code></pre>


<h3>Format</h3>

<p>A dataframe of 20 observations of 3 variables:
</p>
<p><code>dhs_gps_data_format</code>: A dataframe of GPS data descriptions.
</p>

<ul>
<li><p>&quot;Name&quot;
</p>
</li>
<li><p>&quot;Type&quot;
</p>
</li>
<li><p>&quot;Description&quot;
</p>
</li></ul>


<hr>
<h2 id='dhs_indicators'>API request of DHS Indicators</h2><span id='topic+dhs_indicators'></span>

<h3>Description</h3>

<p>API request of DHS Indicators
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dhs_indicators(
  countryIds = NULL,
  indicatorIds = NULL,
  surveyIds = NULL,
  surveyYear = NULL,
  surveyYearStart = NULL,
  surveyYearEnd = NULL,
  surveyType = NULL,
  surveyCharacteristicIds = NULL,
  tagIds = NULL,
  f = NULL,
  returnFields = NULL,
  perPage = NULL,
  page = NULL,
  client = NULL,
  force = FALSE,
  all_results = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dhs_indicators_+3A_countryids">countryIds</code></td>
<td>
<p>Specify a comma separated list of country ids to filter
by. For a list of countries use
<code>dhs_countries(returnFields=c("CountryName","DHS_CountryCode"))</code></p>
</td></tr>
<tr><td><code id="dhs_indicators_+3A_indicatorids">indicatorIds</code></td>
<td>
<p>Specify a comma separated list of indicators ids to
filter by. For a list of indicators use
<code>dhs_indicators(returnFields=c("IndicatorId","Label","Definition"))</code></p>
</td></tr>
<tr><td><code id="dhs_indicators_+3A_surveyids">surveyIds</code></td>
<td>
<p>Specify a comma separated list of survey ids to filter by.
For a list of surveys use
<code>dhs_surveys(returnFields=c("SurveyId","SurveyYearLabel",
  "SurveyType","CountryName"))</code></p>
</td></tr>
<tr><td><code id="dhs_indicators_+3A_surveyyear">surveyYear</code></td>
<td>
<p>Specify a survey year to filter by.</p>
</td></tr>
<tr><td><code id="dhs_indicators_+3A_surveyyearstart">surveyYearStart</code></td>
<td>
<p>Specify a range of Survey Years to filter Indicators
on. surveyYearStart is an inclusive value. Can be used alone or in
conjunction with surveyYearEnd.</p>
</td></tr>
<tr><td><code id="dhs_indicators_+3A_surveyyearend">surveyYearEnd</code></td>
<td>
<p>Specify a range of Survey Years to filter Indicators
on. surveyYearEnd is an inclusive value. Can be used alone or in
conjunction with surveyYearStart.</p>
</td></tr>
<tr><td><code id="dhs_indicators_+3A_surveytype">surveyType</code></td>
<td>
<p>Specify a comma separated list of survey years to
filter by.</p>
</td></tr>
<tr><td><code id="dhs_indicators_+3A_surveycharacteristicids">surveyCharacteristicIds</code></td>
<td>
<p>Specify a survey characteristic id to filter
indicators in surveys with the specified survey characteristic. For a list
of survey characteristics use
<code>dhs_surveys(returnFields=c("SurveyId","SurveyYearLabel",
"SurveyType","CountryName"))</code></p>
</td></tr>
<tr><td><code id="dhs_indicators_+3A_tagids">tagIds</code></td>
<td>
<p>Specify a tag id to filter indicators with the specified tag.
For a list of tags use <code>dhs_tags()</code></p>
</td></tr>
<tr><td><code id="dhs_indicators_+3A_f">f</code></td>
<td>
<p>You can specify the format of the data returned from the query as
HTML, JSON, PJSON, geoJSON, JSONP, XML or CSV. The default data format
is JSON.</p>
</td></tr>
<tr><td><code id="dhs_indicators_+3A_returnfields">returnFields</code></td>
<td>
<p>Specify a list of attributes to be returned.</p>
</td></tr>
<tr><td><code id="dhs_indicators_+3A_perpage">perPage</code></td>
<td>
<p>Specify the number of results to be returned per page. By
default the API will return 100 results.</p>
</td></tr>
<tr><td><code id="dhs_indicators_+3A_page">page</code></td>
<td>
<p>Allows specifying a page number to obtain for the API request. By
default the API will return page 1.</p>
</td></tr>
<tr><td><code id="dhs_indicators_+3A_client">client</code></td>
<td>
<p>If the API request should be cached, then provide a client
object created by <code><a href="#topic+client_dhs">client_dhs</a></code></p>
</td></tr>
<tr><td><code id="dhs_indicators_+3A_force">force</code></td>
<td>
<p>Should we force fetching the API results, and ignore any
cached results we have. Default = FALSE</p>
</td></tr>
<tr><td><code id="dhs_indicators_+3A_all_results">all_results</code></td>
<td>
<p>Boolean for if all results should be returned. If FALSE
then the specified page only will be returned. Default = TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>data.table</code> of 18 (or less if <code>returnFields</code> is provided)
indicators with attributes for each indicator. A detailed description of
all the attributes returned is provided at
<a href="https://api.dhsprogram.com/rest/dhs/indicators/fields">https://api.dhsprogram.com/rest/dhs/indicators/fields</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# A common use for the indicators data API will be to search for a list of
# health indicators within a given characteristic category, such as anemia
# testing, HIV prevalence, micronutrients etc. For example to return all the
# indicators relating to malaria testing by RDTs:

dat &lt;- dhs_indicators(surveyCharacteristicIds="90")

# A list of the different `surveyCharacteristicIds` can be found
# [here](https://api.dhsprogram.com/rest/dhs/surveycharacteristics?f=html)

# A complete list of examples for how each argument to the indicator API
# endpoint can be provided is given below, which is a copy of each of
# the examples listed in the API at:

# https://api.dhsprogram.com/#/api-indicators.cfm


dat &lt;- dhs_indicators(countryIds="EG",all_results=FALSE)
dat &lt;- dhs_indicators(indicatorIds="FE_FRTR_W_TFR",all_results=FALSE)
dat &lt;- dhs_indicators(surveyIds="SN2010DHS",all_results=FALSE)
dat &lt;- dhs_indicators(surveyYear="2010",all_results=FALSE)
dat &lt;- dhs_indicators(surveyYearStart="2006",all_results=FALSE)
dat &lt;- dhs_indicators(surveyYearStart="1991", surveyYearEnd="2006",
all_results=FALSE)
dat &lt;- dhs_indicators(surveyType="DHS",all_results=FALSE)
dat &lt;- dhs_indicators(surveyCharacteristicIds="32",all_results=FALSE)
dat &lt;- dhs_indicators(tagIds="1",all_results=FALSE)
dat &lt;- dhs_indicators(f="html",all_results=FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='dhs_info'>API request of DHS Info</h2><span id='topic+dhs_info'></span>

<h3>Description</h3>

<p>API request of DHS Info
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dhs_info(
  infoType = NULL,
  f = NULL,
  returnFields = NULL,
  perPage = NULL,
  page = NULL,
  client = NULL,
  force = FALSE,
  all_results = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dhs_info_+3A_infotype">infoType</code></td>
<td>
<p>Specify a type of info to obtain the information requested.
Default is version. 'infoType=&quot;version&quot;&ldquo; (default) Provides the version
of the API.
Example: https://api.dhsprogram.com/rest/dhs/info?infoType=version
'infoType=&quot;citation&quot;' Provides the citation for the API to include with
your application or data.
Example: https://api.dhsprogram.com/rest/dhs/info?infoType=citation</p>
</td></tr>
<tr><td><code id="dhs_info_+3A_f">f</code></td>
<td>
<p>You can specify the format of the data returned from the query as
HTML, JSON, PJSON, geoJSON, JSONP, XML or CSV. The default data format
is JSON.</p>
</td></tr>
<tr><td><code id="dhs_info_+3A_returnfields">returnFields</code></td>
<td>
<p>Specify a list of attributes to be returned.</p>
</td></tr>
<tr><td><code id="dhs_info_+3A_perpage">perPage</code></td>
<td>
<p>Specify the number of results to be returned per page. By
default the API will return 100 results.</p>
</td></tr>
<tr><td><code id="dhs_info_+3A_page">page</code></td>
<td>
<p>Allows specifying a page number to obtain for the API request. By
default the API will return page 1.</p>
</td></tr>
<tr><td><code id="dhs_info_+3A_client">client</code></td>
<td>
<p>If the API request should be cached, then provide a client
object created by <code><a href="#topic+client_dhs">client_dhs</a></code></p>
</td></tr>
<tr><td><code id="dhs_info_+3A_force">force</code></td>
<td>
<p>Should we force fetching the API results, and ignore any
cached results we have. Default = FALSE</p>
</td></tr>
<tr><td><code id="dhs_info_+3A_all_results">all_results</code></td>
<td>
<p>Boolean for if all results should be returned. If FALSE
then the specified page only will be returned. Default = TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>data.table</code> of 2 (or less if <code>returnFields</code> is provided)
fields describing the type of information that was requested and a value
corresponding to the information requested.
<a href="https://api.dhsprogram.com/rest/dhs/info/fields">https://api.dhsprogram.com/rest/dhs/info/fields</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# The main use for the info API  will be to confirm the version of the API
# being used to providing the most current citation for the data.

dat &lt;- dhs_info(infoType="version")

# A complete list of examples for how each argument to the info API
# endpoint can be provided is given below, which is a copy of each of
# the examples listed in the API at:

# https://api.dhsprogram.com/#/api-info.cfm


dat &lt;- dhs_info(infoType="version",all_results=FALSE)
dat &lt;- dhs_info(infoType="citation",all_results=FALSE)
dat &lt;- dhs_info(f="html",all_results=FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='dhs_publications'>API request of DHS Publications</h2><span id='topic+dhs_publications'></span>

<h3>Description</h3>

<p>API request of DHS Publications
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dhs_publications(
  countryIds = NULL,
  selectSurveys = NULL,
  indicatorIds = NULL,
  surveyIds = NULL,
  surveyYear = NULL,
  surveyYearStart = NULL,
  surveyYearEnd = NULL,
  surveyType = NULL,
  surveyCharacteristicIds = NULL,
  tagIds = NULL,
  f = NULL,
  returnFields = NULL,
  perPage = NULL,
  page = NULL,
  client = NULL,
  force = FALSE,
  all_results = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dhs_publications_+3A_countryids">countryIds</code></td>
<td>
<p>Specify a comma separated list of country ids to filter
by. For a list of countries use
<code>dhs_countries(returnFields=c("CountryName","DHS_CountryCode"))</code></p>
</td></tr>
<tr><td><code id="dhs_publications_+3A_selectsurveys">selectSurveys</code></td>
<td>
<p>Specify to filter data from the latest survey by
including 'selectSurveys=TRUE' in your request. Note: Please use this
parameter in conjunction with countryCode, surveyType, or indicatorIds
for best results.</p>
</td></tr>
<tr><td><code id="dhs_publications_+3A_indicatorids">indicatorIds</code></td>
<td>
<p>Specify a comma separated list of indicators ids to
filter by. For a list of indicators use
<code>dhs_indicators(returnFields=c("IndicatorId","Label","Definition"))</code></p>
</td></tr>
<tr><td><code id="dhs_publications_+3A_surveyids">surveyIds</code></td>
<td>
<p>Specify a comma separated list of survey ids to filter by.
For a list of surveys use
<code>dhs_surveys(returnFields=c("SurveyId","SurveyYearLabel",
"SurveyType","CountryName"))</code></p>
</td></tr>
<tr><td><code id="dhs_publications_+3A_surveyyear">surveyYear</code></td>
<td>
<p>Specify a comma separated list of survey years to
filter by.</p>
</td></tr>
<tr><td><code id="dhs_publications_+3A_surveyyearstart">surveyYearStart</code></td>
<td>
<p>Specify a range of Survey Years to filter
Publications on. surveyYearStart is an inclusive value. Can be used alone
or in conjunction with surveyYearEnd.</p>
</td></tr>
<tr><td><code id="dhs_publications_+3A_surveyyearend">surveyYearEnd</code></td>
<td>
<p>Specify a range of Survey Years to filter Publications
on. surveyYearEnd is an inclusive value. Can be used alone or in
conjunction with surveyYearStart.</p>
</td></tr>
<tr><td><code id="dhs_publications_+3A_surveytype">surveyType</code></td>
<td>
<p>Specify a survey type to filter by.</p>
</td></tr>
<tr><td><code id="dhs_publications_+3A_surveycharacteristicids">surveyCharacteristicIds</code></td>
<td>
<p>Specify a survey characteristic id to filter
publications with countries with the specified survey characteristics.
For a list of survey characteristics use
<code>dhs_surveys(returnFields=c("SurveyId","SurveyYearLabel",
"SurveyType","CountryName"))</code></p>
</td></tr>
<tr><td><code id="dhs_publications_+3A_tagids">tagIds</code></td>
<td>
<p>Specify a tag id to filter publications with surveys
containing indicators with the specified tag. For a list of tags use
<code>dhs_tags()</code></p>
</td></tr>
<tr><td><code id="dhs_publications_+3A_f">f</code></td>
<td>
<p>You can specify the format of the data returned from the query as
HTML, JSON, PJSON, geoJSON, JSONP, XML or CSV. The default data format is
JSON.</p>
</td></tr>
<tr><td><code id="dhs_publications_+3A_returnfields">returnFields</code></td>
<td>
<p>Specify a list of attributes to be returned.</p>
</td></tr>
<tr><td><code id="dhs_publications_+3A_perpage">perPage</code></td>
<td>
<p>Specify the number of results to be returned per page. By
default the API will return 100 results.</p>
</td></tr>
<tr><td><code id="dhs_publications_+3A_page">page</code></td>
<td>
<p>Allows specifying a page number to obtain for the API request.
By default the API will return page 1.</p>
</td></tr>
<tr><td><code id="dhs_publications_+3A_client">client</code></td>
<td>
<p>If the API request should be cached, then provide a client
object created by <code><a href="#topic+client_dhs">client_dhs</a></code></p>
</td></tr>
<tr><td><code id="dhs_publications_+3A_force">force</code></td>
<td>
<p>Should we force fetching the API results, and ignore any
cached results we have. Default = FALSE</p>
</td></tr>
<tr><td><code id="dhs_publications_+3A_all_results">all_results</code></td>
<td>
<p>Boolean for if all results should be returned. If FALSE
then the specified page only will be returned. Default = TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>data.table</code> of 10 (or less if <code>returnFields</code> is provided)
publications with detailed information for each publication. A detailed
description of all the attributes returned is provided at
<a href="https://api.dhsprogram.com/rest/dhs/publications/fields">https://api.dhsprogram.com/rest/dhs/publications/fields</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# A main use for the publications API endpoint is to find which surveys have
# a published report resulting from the conducted survey:

dat &lt;- dhs_publications()

# A complete list of examples for how each argument to the publications
# API endpoint can be provided is given below, which is a
# copy of each of the examples listed in the API at:

# https://api.dhsprogram.com/#/api-publications.cfm


dat &lt;- dhs_publications(countryIds="EG",all_results=FALSE)
dat &lt;- dhs_publications(selectSurveys="latest",all_results=FALSE)
dat &lt;- dhs_publications(indicatorIds="FE_FRTR_W_TFR",all_results=FALSE)
dat &lt;- dhs_publications(surveyIds="SN2010DHS",all_results=FALSE)
dat &lt;- dhs_publications(surveyYear="2010",all_results=FALSE)
dat &lt;- dhs_publications(surveyYearStart="2006",all_results=FALSE)
dat &lt;- dhs_publications(surveyYearStart="1991", surveyYearEnd="2006",
all_results=FALSE)
dat &lt;- dhs_publications(surveyType="DHS",all_results=FALSE)
dat &lt;- dhs_publications(surveyCharacteristicIds="32",all_results=FALSE)
dat &lt;- dhs_publications(tagIds=1,all_results=FALSE)
dat &lt;- dhs_publications(f="html",all_results=FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='dhs_survey_characteristics'>API request of DHS Survey Characteristics</h2><span id='topic+dhs_survey_characteristics'></span>

<h3>Description</h3>

<p>API request of DHS Survey Characteristics
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dhs_survey_characteristics(
  countryIds = NULL,
  indicatorIds = NULL,
  surveyIds = NULL,
  surveyYear = NULL,
  surveyYearStart = NULL,
  surveyYearEnd = NULL,
  surveyType = NULL,
  f = NULL,
  returnFields = NULL,
  perPage = NULL,
  page = NULL,
  client = NULL,
  force = FALSE,
  all_results = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dhs_survey_characteristics_+3A_countryids">countryIds</code></td>
<td>
<p>Specify a comma separated list of country ids to filter
by. For a list of countries use
<code>dhs_countries(returnFields=c("CountryName","DHS_CountryCode"))</code></p>
</td></tr>
<tr><td><code id="dhs_survey_characteristics_+3A_indicatorids">indicatorIds</code></td>
<td>
<p>Specify a comma separated list of indicators ids to
filter by. For a list of indicators use
<code>dhs_indicators(returnFields=c("IndicatorId","Label","Definition"))</code></p>
</td></tr>
<tr><td><code id="dhs_survey_characteristics_+3A_surveyids">surveyIds</code></td>
<td>
<p>Specify a comma separated list of survey ids to filter by.
For a list of surveys use
<code>dhs_surveys(returnFields=c("SurveyId","SurveyYearLabel",
"SurveyType","CountryName"))</code></p>
</td></tr>
<tr><td><code id="dhs_survey_characteristics_+3A_surveyyear">surveyYear</code></td>
<td>
<p>Specify a comma separated list of survey years to
filter by.</p>
</td></tr>
<tr><td><code id="dhs_survey_characteristics_+3A_surveyyearstart">surveyYearStart</code></td>
<td>
<p>Specify a range of Survey Years to filter Survey
Characteristics on. surveyYearStart is an inclusive value. Can be used
alone or in conjunction with surveyYearEnd.</p>
</td></tr>
<tr><td><code id="dhs_survey_characteristics_+3A_surveyyearend">surveyYearEnd</code></td>
<td>
<p>Specify a range of Survey Years to filter Survey
Characteristics on. surveyYearEnd is an inclusive value. Can be used alone
or in conjunction with surveyYearStart.</p>
</td></tr>
<tr><td><code id="dhs_survey_characteristics_+3A_surveytype">surveyType</code></td>
<td>
<p>Specify a survey type to filter by.</p>
</td></tr>
<tr><td><code id="dhs_survey_characteristics_+3A_f">f</code></td>
<td>
<p>You can specify the format of the data returned from the query as
HTML, JSON, PJSON, geoJSON, JSONP, XML or CSV. The default data format
is JSON.</p>
</td></tr>
<tr><td><code id="dhs_survey_characteristics_+3A_returnfields">returnFields</code></td>
<td>
<p>Specify a list of attributes to be returned.</p>
</td></tr>
<tr><td><code id="dhs_survey_characteristics_+3A_perpage">perPage</code></td>
<td>
<p>Specify the number of results to be returned per page. By
default the API will return 100 results.</p>
</td></tr>
<tr><td><code id="dhs_survey_characteristics_+3A_page">page</code></td>
<td>
<p>Allows specifying a page number to obtain for the API request. By
default the API will return page 1.</p>
</td></tr>
<tr><td><code id="dhs_survey_characteristics_+3A_client">client</code></td>
<td>
<p>If the API request should be cached, then provide a client
object created by <code><a href="#topic+client_dhs">client_dhs</a></code></p>
</td></tr>
<tr><td><code id="dhs_survey_characteristics_+3A_force">force</code></td>
<td>
<p>Should we force fetching the API results, and ignore any
cached results we have. Default = FALSE</p>
</td></tr>
<tr><td><code id="dhs_survey_characteristics_+3A_all_results">all_results</code></td>
<td>
<p>Boolean for if all results should be returned. If FALSE
then the specified page only will be returned. Default = TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>data.table</code> of 2 (or less if <code>returnFields</code> is provided)
survey characteristics. A survey can be labelled with one or more of these
survey characteristics. A description of all the attributes returned is
provided at
<a href="https://api.dhsprogram.com/rest/dhs/surveycharacteristics/fields">https://api.dhsprogram.com/rest/dhs/surveycharacteristics/fields</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# A good use for the survey characteristics API endpoint is to query what the
# IDs are for each survey characteristic. These are useful for passing as
# arguments to other API endpoints.For example to show all the ids:

dat &lt;- dhs_survey_characteristics()

# Or if your analysis is foucssed on a particular country, and you want to
# see all the characteristics surveyed for e.g. Senegal

dat &lt;- dhs_countries(countryIds="SN")

# A complete list of examples for how each argument to the survey
# characteristics API endpoint can be provided is given below, which is a
# copy of each of the examples listed in the API at:

# https://api.dhsprogram.com/#/api-surveycharacteristics.cfm


dat &lt;- dhs_survey_characteristics(countryIds="EG",all_results=FALSE)
dat &lt;- dhs_survey_characteristics(indicatorIds="FE_FRTR_W_TFR",
all_results=FALSE)
dat &lt;- dhs_survey_characteristics(surveyIds="SN2010DHS,all_results=FALSE")
dat &lt;- dhs_survey_characteristics(surveyYear="2010,all_results=FALSE")
dat &lt;- dhs_survey_characteristics(surveyYearStart="2006",all_results=FALSE)
dat &lt;- dhs_survey_characteristics(surveyYearStart="1991",
surveyYearEnd="2006",all_results=FALSE)
dat &lt;- dhs_survey_characteristics(surveyType="DHS",all_results=FALSE)
dat &lt;- dhs_survey_characteristics(f="html",all_results=FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='dhs_surveys'>API request of DHS Surveys</h2><span id='topic+dhs_surveys'></span>

<h3>Description</h3>

<p>API request of DHS Surveys
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dhs_surveys(
  countryIds = NULL,
  indicatorIds = NULL,
  selectSurveys = NULL,
  surveyIds = NULL,
  surveyYear = NULL,
  surveyYearStart = NULL,
  surveyYearEnd = NULL,
  surveyType = NULL,
  surveyStatus = NULL,
  surveyCharacteristicIds = NULL,
  tagIds = NULL,
  f = NULL,
  returnFields = NULL,
  perPage = NULL,
  page = NULL,
  client = NULL,
  force = FALSE,
  all_results = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dhs_surveys_+3A_countryids">countryIds</code></td>
<td>
<p>Specify a comma separated list of country ids to
filter by. For a list of countries use
<code>dhs_countries(returnFields=c("CountryName","DHS_CountryCode"))</code></p>
</td></tr>
<tr><td><code id="dhs_surveys_+3A_indicatorids">indicatorIds</code></td>
<td>
<p>Specify a comma separated list of indicators ids to
filter by. For a list of indicators use
<code>dhs_indicators(returnFields=c("IndicatorId","Label","Definition"))</code></p>
</td></tr>
<tr><td><code id="dhs_surveys_+3A_selectsurveys">selectSurveys</code></td>
<td>
<p>Specify to filter data from the latest survey by
including 'selectSurveys=TRUE' in your request. Note: Please use this
parameter in conjunction with countryCode, surveyType, or indicatorIds
for best results.</p>
</td></tr>
<tr><td><code id="dhs_surveys_+3A_surveyids">surveyIds</code></td>
<td>
<p>Specify a comma separated list of survey ids to filter by.
For a list of surveys use
<code>dhs_surveys(returnFields=c("SurveyId","SurveyYearLabel",
"SurveyType","CountryName"))</code></p>
</td></tr>
<tr><td><code id="dhs_surveys_+3A_surveyyear">surveyYear</code></td>
<td>
<p>Specify a comma separated list of survey years to
filter by.</p>
</td></tr>
<tr><td><code id="dhs_surveys_+3A_surveyyearstart">surveyYearStart</code></td>
<td>
<p>Specify a range of Survey Years to filter Surveys on.
surveyYearStart is an inclusive value. Can be used alone or in conjunction
with surveyYearEnd.</p>
</td></tr>
<tr><td><code id="dhs_surveys_+3A_surveyyearend">surveyYearEnd</code></td>
<td>
<p>Specify a range of Survey Years to filter Surveys on.
surveyYearEnd is an inclusive value. Can be used alone or in conjunction
with surveyYearStart.</p>
</td></tr>
<tr><td><code id="dhs_surveys_+3A_surveytype">surveyType</code></td>
<td>
<p>Specify a survey type to filter by.</p>
</td></tr>
<tr><td><code id="dhs_surveys_+3A_surveystatus">surveyStatus</code></td>
<td>
<p>Every survey is assigned a surveys status and can be
queried based on the surveyStatus parameter. 'surveyStatus=&quot;available&quot;'
(default) provides a list of all surveys for which the DHS API contains
Indicator Data. 'surveyStatus=&quot;Completed&quot;' provides a list of all
completed surveys. NOTE: Data may not be available for every completed
survey. 'surveyStatus=&quot;Ongoing&quot;' provides a list of all ongoing surveys.
'surveyStatus=&quot;all&quot;' provides a list of all surveys.</p>
</td></tr>
<tr><td><code id="dhs_surveys_+3A_surveycharacteristicids">surveyCharacteristicIds</code></td>
<td>
<p>Specify a survey characteristic id to filter
surveys with the specified survey characteristic. For a list of survey
characteristics use <code>dhs_surveys(returnFields=c("SurveyId",
"SurveyYearLabel","SurveyType","CountryName"))</code></p>
</td></tr>
<tr><td><code id="dhs_surveys_+3A_tagids">tagIds</code></td>
<td>
<p>Specify a tag id to filter surveys containing indicators with
the specified tag. For a list of tags use <code>dhs_tags()</code></p>
</td></tr>
<tr><td><code id="dhs_surveys_+3A_f">f</code></td>
<td>
<p>You can specify the format of the data returned from the query as
HTML, JSON, PJSON, geoJSON, JSONP, XML or CSV. The default data format
is JSON.</p>
</td></tr>
<tr><td><code id="dhs_surveys_+3A_returnfields">returnFields</code></td>
<td>
<p>Specify a list of attributes to be returned.</p>
</td></tr>
<tr><td><code id="dhs_surveys_+3A_perpage">perPage</code></td>
<td>
<p>Specify the number of results to be returned per page. By
default the API will return 100 results.</p>
</td></tr>
<tr><td><code id="dhs_surveys_+3A_page">page</code></td>
<td>
<p>Allows specifying a page number to obtain for the API request. By
default the API will return page 1.</p>
</td></tr>
<tr><td><code id="dhs_surveys_+3A_client">client</code></td>
<td>
<p>If the API request should be cached, then provide a client
object created by <code><a href="#topic+client_dhs">client_dhs</a></code></p>
</td></tr>
<tr><td><code id="dhs_surveys_+3A_force">force</code></td>
<td>
<p>Should we force fetching the API results, and ignore any
cached results we have. Default = FALSE</p>
</td></tr>
<tr><td><code id="dhs_surveys_+3A_all_results">all_results</code></td>
<td>
<p>Boolean for if all results should be returned. If FALSE
then the specified page only will be returned. Default = TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>data.table</code> of 28 (or less if <code>returnFields</code> is provided)
surveys with detailed information for each survey. A detailed description
of all the attributes returned is provided at
<a href="https://api.dhsprogram.com/rest/dhs/surveys/fields">https://api.dhsprogram.com/rest/dhs/surveys/fields</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# A common use for the surveys API endpoint is to query which countries
# have conducted surveys since a given year, e.g. since 2010

dat &lt;- dhs_surveys(surveyYearStart="2010")

# Additionally, some countries conduct non DHS surveys, but the data for
# thse is also available within the DHS website/API. To query these:

dat &lt;- dhs_surveys(surveyType="MIS")

# Lastly, you may be interested to know about anything peculiar about a
# particular survey's implementation. This can be found by looking within
# the footnotes variable within the data frame returned. For example, the
# Madagascar 2013 MIS:

dat$Footnotes[dat$SurveyId == "MD2013MIS"]

# A complete list of examples for how each argument to the surveys API
# endpoint can be provided is given below, which is a copy of each of
# the examples listed in the API at:

# https://api.dhsprogram.com/#/api-surveys.cfm


dat &lt;- dhs_surveys(countryIds="EG",all_results=FALSE)
dat &lt;- dhs_surveys(indicatorIds="FE_FRTR_W_TFR",all_results=FALSE)
dat &lt;- dhs_surveys(selectSurveys="latest",all_results=FALSE)
dat &lt;- dhs_surveys(surveyIds="SN2010DHS",all_results=FALSE)
dat &lt;- dhs_surveys(surveyYear="2010",all_results=FALSE)
dat &lt;- dhs_surveys(surveyYearStart="2006",all_results=FALSE)
dat &lt;- dhs_surveys(surveyYearStart="1991", surveyYearEnd="2006",
all_results=FALSE)
dat &lt;- dhs_surveys(surveyType="DHS",all_results=FALSE)
dat &lt;- dhs_surveys(surveyStatus="Surveys",all_results=FALSE)
dat &lt;- dhs_surveys(surveyStatus="Completed",all_results=FALSE)
dat &lt;- dhs_surveys(surveyStatus="Ongoing",all_results=FALSE)
dat &lt;- dhs_surveys(surveyStatus="All",all_results=FALSE)
dat &lt;- dhs_surveys(surveyCharacteristicIds="32",all_results=FALSE)
dat &lt;- dhs_surveys(tagIds="1",all_results=FALSE)
dat &lt;- dhs_surveys(f="html",all_results=FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='dhs_tags'>API request of DHS Tags</h2><span id='topic+dhs_tags'></span>

<h3>Description</h3>

<p>API request of DHS Tags
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dhs_tags(
  countryIds = NULL,
  indicatorIds = NULL,
  surveyIds = NULL,
  surveyYear = NULL,
  surveyYearStart = NULL,
  surveyYearEnd = NULL,
  surveyType = NULL,
  f = NULL,
  returnFields = NULL,
  perPage = NULL,
  page = NULL,
  client = NULL,
  force = FALSE,
  all_results = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dhs_tags_+3A_countryids">countryIds</code></td>
<td>
<p>Specify a comma separated list of country ids to filter
by. For a list of countries use
<code>dhs_countries(returnFields=c("CountryName","DHS_CountryCode"))</code></p>
</td></tr>
<tr><td><code id="dhs_tags_+3A_indicatorids">indicatorIds</code></td>
<td>
<p>Specify a comma separated list of indicators ids to
filter by. For a list of indicators use
<code>dhs_indicators(returnFields=c("IndicatorId","Label","Definition"))</code></p>
</td></tr>
<tr><td><code id="dhs_tags_+3A_surveyids">surveyIds</code></td>
<td>
<p>Specify a comma separated list of survey ids to filter by.
For a list of surveys use
<code>dhs_surveys(returnFields=c("SurveyId","SurveyYearLabel",
"SurveyType","CountryName"))</code></p>
</td></tr>
<tr><td><code id="dhs_tags_+3A_surveyyear">surveyYear</code></td>
<td>
<p>Specify a comma separated list of survey years to
filter by.</p>
</td></tr>
<tr><td><code id="dhs_tags_+3A_surveyyearstart">surveyYearStart</code></td>
<td>
<p>Specify a range of Survey Years to filter Tags on.
surveyYearStart is an inclusive value. Can be used alone or in
conjunction with surveyYearEnd.</p>
</td></tr>
<tr><td><code id="dhs_tags_+3A_surveyyearend">surveyYearEnd</code></td>
<td>
<p>Specify a range of Survey Years to filter Tags on.
surveyYearEnd is an inclusive value. Can be used alone or in conjunction
with surveyYearStart.</p>
</td></tr>
<tr><td><code id="dhs_tags_+3A_surveytype">surveyType</code></td>
<td>
<p>Specify a survey type to filter by.</p>
</td></tr>
<tr><td><code id="dhs_tags_+3A_f">f</code></td>
<td>
<p>You can specify the format of the data returned from the query as
HTML, JSON, PJSON, geoJSON, JSONP, XML or CSV. The default data format
is JSON.</p>
</td></tr>
<tr><td><code id="dhs_tags_+3A_returnfields">returnFields</code></td>
<td>
<p>Specify a list of attributes to be returned.</p>
</td></tr>
<tr><td><code id="dhs_tags_+3A_perpage">perPage</code></td>
<td>
<p>Specify the number of results to be returned per page. By
default the API will return 100 results.</p>
</td></tr>
<tr><td><code id="dhs_tags_+3A_page">page</code></td>
<td>
<p>Allows specifying a page number to obtain for the API request. By
default the API will return page 1.</p>
</td></tr>
<tr><td><code id="dhs_tags_+3A_client">client</code></td>
<td>
<p>If the API request should be cached, then provide a client
object created by <code><a href="#topic+client_dhs">client_dhs</a></code></p>
</td></tr>
<tr><td><code id="dhs_tags_+3A_force">force</code></td>
<td>
<p>Should we force fetching the API results, and ignore any
cached results we have. Default = FALSE</p>
</td></tr>
<tr><td><code id="dhs_tags_+3A_all_results">all_results</code></td>
<td>
<p>Boolean for if all results should be returned. If FALSE
then the specified page only will be returned. Default = TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>data.table</code> of 4 (or less if <code>returnFields</code> is provided)
tags with detailed information. An indicators can be tagged with one or
more tags to help identify certain topics an indicator can be identified
by. A description of the attributes returned is provided at
<a href="https://api.dhsprogram.com/rest/dhs/tags/fields">https://api.dhsprogram.com/rest/dhs/tags/fields</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# A good use for the tags API endpoint is to query what the
# IDs are for each tag. These are useful for passing as
# arguments to other API endpoints.For example to show all the ids:

dat &lt;- dhs_tags()

# Or if your analysis is foucssed on a particular country, and you want to
# see all the characteristics surveyed for e.g. Senegal

dat &lt;- dhs_tags(countryIds="SN")

# A complete list of examples for how each argument to the survey
# tags API endpoint can be provided is given below, which is a
# copy of each of the examples listed in the API at:

# https://api.dhsprogram.com/#/api-tags.cfm


dat &lt;- dhs_tags(countryIds="EG",all_results=FALSE)
dat &lt;- dhs_tags(indicatorIds="FE_FRTR_W_TFR",all_results=FALSE)
dat &lt;- dhs_tags(surveyIds="SN2010DHS",all_results=FALSE)
dat &lt;- dhs_tags(surveyYear="2010",all_results=FALSE)
dat &lt;- dhs_tags(surveyYearStart="2006",all_results=FALSE)
dat &lt;- dhs_tags(surveyYearStart="1991", surveyYearEnd="2006",
all_results=FALSE)
dat &lt;- dhs_tags(surveyType="DHS",all_results=FALSE)
dat &lt;- dhs_tags(f="html",all_results=FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='dhs_ui_updates'>API request of DHS UI Updates</h2><span id='topic+dhs_ui_updates'></span>

<h3>Description</h3>

<p>API request of DHS UI Updates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dhs_ui_updates(
  lastUpdate = NULL,
  f = NULL,
  returnFields = NULL,
  perPage = NULL,
  page = NULL,
  client = NULL,
  force = FALSE,
  all_results = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dhs_ui_updates_+3A_lastupdate">lastUpdate</code></td>
<td>
<p>Specify a date or Unix time to filter the updates by. Only
results for interfaces that has been updated on or after the specified
date will be returned.</p>
</td></tr>
<tr><td><code id="dhs_ui_updates_+3A_f">f</code></td>
<td>
<p>You can specify the format of the data returned from the query as
HTML, JSON, PJSON, geoJSON, JSONP, XML or CSV. The default data format
is JSON.</p>
</td></tr>
<tr><td><code id="dhs_ui_updates_+3A_returnfields">returnFields</code></td>
<td>
<p>Specify a list of attributes to be returned.</p>
</td></tr>
<tr><td><code id="dhs_ui_updates_+3A_perpage">perPage</code></td>
<td>
<p>Specify the number of results to be returned per page. By
default the API will return 100 results.</p>
</td></tr>
<tr><td><code id="dhs_ui_updates_+3A_page">page</code></td>
<td>
<p>Allows specifying a page number to obtain for the API request. By
default the API will return page 1.</p>
</td></tr>
<tr><td><code id="dhs_ui_updates_+3A_client">client</code></td>
<td>
<p>If the API request should be cached, then provide a client
object created by <code><a href="#topic+client_dhs">client_dhs</a></code></p>
</td></tr>
<tr><td><code id="dhs_ui_updates_+3A_force">force</code></td>
<td>
<p>Should we force fetching the API results, and ignore any
cached results we have. Default = FALSE</p>
</td></tr>
<tr><td><code id="dhs_ui_updates_+3A_all_results">all_results</code></td>
<td>
<p>Boolean for if all results should be returned. If FALSE
then the specified page only will be returned. Default = TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>data.table</code> of 3 (or less if <code>returnFields</code> is provided)
interfaces that have been added/updated or removed. A detailed description
of all the attributes returned is provided at
<a href="https://api.dhsprogram.com/rest/dhs/uiupdates/fields">https://api.dhsprogram.com/rest/dhs/uiupdates/fields</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# The main use for the ui updates API will be to search for the last time
# there was a change to the UI. For example to return all the
# changes since 2018:

dat &lt;- dhs_ui_updates(lastUpdate="20180101")

# A complete list of examples for how each argument to the ui updates API
# endpoint can be provided is given below, which is a copy of each of
# the examples listed in the API at:

# https://api.dhsprogram.com/#/api-uiupdates.cfm


dat &lt;- dhs_ui_updates(lastUpdate="20150901",all_results=FALSE)
dat &lt;- dhs_ui_updates(f="html",all_results=FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='download_boundaries'>DHS Spatial Boundaries</h2><span id='topic+download_boundaries'></span>

<h3>Description</h3>

<p>Download Spatial Boundaries
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_boundaries(
  surveyNum = NULL,
  surveyId = NULL,
  countryId = NULL,
  method = "sf",
  quiet_download = FALSE,
  quiet_parse = TRUE,
  server_sleep = 5
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="download_boundaries_+3A_surveynum">surveyNum</code></td>
<td>
<p>Numeric for the survey number to be downloaded. Values for
surveyNum can be found in the datasets or surveys endpoints in the DHS API
that can be accessed using <code><a href="#topic+dhs_datasets">dhs_datasets</a></code> and
<code><a href="#topic+dhs_surveys">dhs_surveys</a></code>. Default is NULL, which will cause the SurveyId
to be used to find the survey.</p>
</td></tr>
<tr><td><code id="download_boundaries_+3A_surveyid">surveyId</code></td>
<td>
<p>Numeric for the survey ID to be downloaded. Values for
surveyId can be found in the datasets or surveys endpoints in the DHS API
that can be accessed using <code><a href="#topic+dhs_datasets">dhs_datasets</a></code> and
<code><a href="#topic+dhs_surveys">dhs_surveys</a></code>. Default is NULL, which will cause the SurveyNum
to be used to find the survey.</p>
</td></tr>
<tr><td><code id="download_boundaries_+3A_countryid">countryId</code></td>
<td>
<p>2-letter DHS country code for the country of the survey
being downloaded. Default = NULL, which will cause the countrycode to be
looked up from the API.</p>
</td></tr>
<tr><td><code id="download_boundaries_+3A_method">method</code></td>
<td>
<p>Character for how the downloaded shape file is read in.
Default = &quot;sf&quot;, which uses <code>sf::st_read</code>. Currently, this is the only
option available('rgdal' used to be available) but for development reasons
this will be left as a parameter option for possible future alternatives
to read in spatial files.
To just return the file paths for the files use method = &quot;zip&quot;.</p>
</td></tr>
<tr><td><code id="download_boundaries_+3A_quiet_download">quiet_download</code></td>
<td>
<p>Whether to download file quietly. Passed to
['download_file()']. Default is 'FALSE'.</p>
</td></tr>
<tr><td><code id="download_boundaries_+3A_quiet_parse">quiet_parse</code></td>
<td>
<p>Whether to read boundaries dataset quietly. Applies to
'method = &quot;sf&quot;'. Default is 'TRUE'.</p>
</td></tr>
<tr><td><code id="download_boundaries_+3A_server_sleep">server_sleep</code></td>
<td>
<p>Numeric for length of sleep prior to downloading file
from their survey. Default 5 seconds.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Downloads the spatial boundaries from the DHS spatial repository,
which can be found at <a href="https://spatialdata.dhsprogram.com/home/">https://spatialdata.dhsprogram.com/home/</a>.
</p>


<h3>Value</h3>

<p>Returns either the spatial file as a 'sf' (see [sf::sf]) object, or
a vector of the file paths of where the boundary was downloaded to.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 # using the surveyNum
 res &lt;- download_boundaries(surveyNum = 471, countryId = "AF")

 # using the surveyId and no countryID
 res &lt;- download_boundaries(surveyId = "AF2010OTH")

 
## End(Not run)
</code></pre>

<hr>
<h2 id='download_datasets'>Create a data frame of datasets that your log in can download</h2><span id='topic+download_datasets'></span>

<h3>Description</h3>

<p>Download datasets specified using output of <code>available_datasets</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_datasets(
  config,
  desired_dataset,
  download_option = "both",
  reformat = TRUE,
  all_lower = TRUE,
  output_dir_root = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="download_datasets_+3A_config">config</code></td>
<td>
<p>Object of class 'rdhs_config' as produced by 'read_rdhs_config'
that must contain a valid 'email', 'project' and 'password'.</p>
</td></tr>
<tr><td><code id="download_datasets_+3A_desired_dataset">desired_dataset</code></td>
<td>
<p>Row from <code>available_datasets</code></p>
</td></tr>
<tr><td><code id="download_datasets_+3A_download_option">download_option</code></td>
<td>
<p>Character dictating how the survey is stored when
downloaded. Must be one of:
</p>

<ul>
<li><p>&quot;zip&quot; - Just the zip. &quot;z&quot;, &quot;i&quot;, &quot;p&quot; or &quot;zip&quot; will match
</p>
</li>
<li><p>&quot;rds&quot; - Just the read in and saved rds. &quot;r&quot;, &quot;d&quot;, &quot;s&quot; or &quot;rdhs&quot;
will match
</p>
</li>
<li><p>&quot;both&quot; - Both the rds and extract. &quot;b&quot;, &quot;o&quot;, &quot;t&quot;, &quot;h&quot; or &quot;both&quot;
will match
</p>
</li></ul>
</td></tr>
<tr><td><code id="download_datasets_+3A_reformat">reformat</code></td>
<td>
<p>Boolean detailing whether dataset rds should be
reformatted for ease of use later. Default = TRUE</p>
</td></tr>
<tr><td><code id="download_datasets_+3A_all_lower">all_lower</code></td>
<td>
<p>Logical indicating whether all value labels should be
lower case. Default to 'TRUE'.</p>
</td></tr>
<tr><td><code id="download_datasets_+3A_output_dir_root">output_dir_root</code></td>
<td>
<p>Directory where files are to be downloaded to</p>
</td></tr>
<tr><td><code id="download_datasets_+3A_...">...</code></td>
<td>
<p>Any other arguments to be passed to
<code><a href="#topic+read_dhs_dataset">read_dhs_dataset</a></code></p>
</td></tr>
</table>

<hr>
<h2 id='extract_dhs'>Extract Data</h2><span id='topic+extract_dhs'></span>

<h3>Description</h3>

<p>Extracts data from your downloaded datasets according to a data.frame of
requested survey variables or survey definitions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_dhs(questions, add_geo = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extract_dhs_+3A_questions">questions</code></td>
<td>
<p>Questions to be queried, in the format from
<code><a href="#topic+search_variables">search_variables</a></code> or <code><a href="#topic+search_variable_labels">search_variable_labels</a></code></p>
</td></tr>
<tr><td><code id="extract_dhs_+3A_add_geo">add_geo</code></td>
<td>
<p>Add geographic information to the extract. Defaut = 'TRUE'</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Function to extract datasets using a set of survey questions as
taken from the output from <code><a href="#topic+search_variables">search_variables</a></code>
or <code><a href="#topic+search_variable_labels">search_variable_labels</a></code>
</p>


<h3>Value</h3>

<p>A <code>list</code> of 'data.frames' for each survey data extracted.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# get the model datasets included with the package
model_datasets &lt;- model_datasets

# download one of them
g &lt;- get_datasets(dataset_filenames = model_datasets$FileName[1])

# create some terms of data me may want to extrac
st &lt;- search_variable_labels(names(g), "bed net")

# and now extract it
ex &lt;- extract_dhs(st)

## End(Not run)
</code></pre>

<hr>
<h2 id='extraction'>DHS survey questions extracted from datasets</h2><span id='topic+extraction'></span>

<h3>Description</h3>

<p>Create a list of survey responses extracted using output of
<code>R6_client_dhs$public_methods$survey_questions</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extraction(questions, available_datasets, geo_surveys, add_geo = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extraction_+3A_questions">questions</code></td>
<td>
<p>Output of
<code>R6_client_dhs$public_methods$survey_questions</code></p>
</td></tr>
<tr><td><code id="extraction_+3A_available_datasets">available_datasets</code></td>
<td>
<p>Datasets that could be available.
Output of <code>R6_client_dhs$public_methods$available_datasets</code></p>
</td></tr>
<tr><td><code id="extraction_+3A_geo_surveys">geo_surveys</code></td>
<td>
<p>Geographic Data Survey file paths.</p>
</td></tr>
<tr><td><code id="extraction_+3A_add_geo">add_geo</code></td>
<td>
<p>Boolean detailing if geographic datasets should be added.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns 'data.frame' with variables corresponding to
the requested variables in the questions object. Will also have
geographic data related columns if 'add_geo=TRUE' is set.
Lastly a SurveyId variable will also be appended corresponding to
<code><a href="#topic+dhs_datasets">dhs_datasets</a></code>$SurveyId
</p>

<hr>
<h2 id='factor_format'>reformat haven and labelled read ins to have no factors or labels</h2><span id='topic+factor_format'></span>

<h3>Description</h3>

<p>reformat haven and labelled read ins to have no factors or labels
</p>


<h3>Usage</h3>

<pre><code class='language-R'>factor_format(res, reformat = FALSE, all_lower = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="factor_format_+3A_res">res</code></td>
<td>
<p>dataset to be formatted</p>
</td></tr>
<tr><td><code id="factor_format_+3A_reformat">reformat</code></td>
<td>
<p>Boolean whether to remove all factors and labels and
just return the unfactored data. Default = FALSE</p>
</td></tr>
<tr><td><code id="factor_format_+3A_all_lower">all_lower</code></td>
<td>
<p>Logical indicating whether all value labels
should be lower case. Default to 'TRUE'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list with the formatted dataset and the code descriptions
</p>

<hr>
<h2 id='file_dataset_format'>Returns what the dataset file ending should be for a given filename</h2><span id='topic+file_dataset_format'></span>

<h3>Description</h3>

<p>Returns what the dataset file ending should be for a given filename
</p>


<h3>Usage</h3>

<pre><code class='language-R'>file_dataset_format(file_format)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="file_dataset_format_+3A_file_format">file_format</code></td>
<td>
<p>FileFormat for a file as taken from the API,
e.g. <code>dhs_datasets(returnFields = "FileFormat")</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>One of &quot;dat&quot;,&quot;dat&quot;,&quot;sas7bdat&quot;,&quot;sav&quot; or &quot;dta&quot;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>file_format &lt;- "Stata dataset (.dta)"
identical(rdhs:::file_dataset_format(file_format),"dta")

</code></pre>

<hr>
<h2 id='get_available_datasets'>Get Available Datasets</h2><span id='topic+get_available_datasets'></span>

<h3>Description</h3>

<p>Details the datasets that your login credentials have access to
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_available_datasets(clear_cache = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_available_datasets_+3A_clear_cache">clear_cache</code></td>
<td>
<p>Boolean detailing if you would like to clear the
cached available datasets first. The default is set to FALSE. This option
is available so that you can make sure your client fetches any new datasets
that you have recently been given access to.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Searches the DHS website for all the datasets that you can download.
The results of this function are cached in the client. If you have recently
requested new datasets from the DHS website then you can specify to clear
the cache first so that you get the new set of datasets available to you.
This function is used by <code><a href="#topic+get_datasets">get_datasets</a></code> and should thus be
used with 'clear_cache_first = TRUE' before using 'get_datasets' if you
have recently requested new datasets.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> with 14 variables that detail the surveys you can
download, their url download links and the country, survey, year etc info
for that link.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# grab the datasets
datasets &lt;- get_available_datasets()

# and if we look at the last one it will be the model datasets from DHS
tail(datasets, 1)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_datasets'>Get Datasets</h2><span id='topic+get_datasets'></span>

<h3>Description</h3>

<p>Downloads datasets you have access to from the DHS website
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_datasets(
  dataset_filenames,
  download_option = "rds",
  reformat = FALSE,
  all_lower = TRUE,
  output_dir_root = NULL,
  clear_cache = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_datasets_+3A_dataset_filenames">dataset_filenames</code></td>
<td>
<p>The desired filenames to be downloaded. These can be
found as one of the returned fields from <code><a href="#topic+dhs_datasets">dhs_datasets</a></code>.
Alternatively you can also pass the desired rows from
<code><a href="#topic+dhs_datasets">dhs_datasets</a></code>.</p>
</td></tr>
<tr><td><code id="get_datasets_+3A_download_option">download_option</code></td>
<td>
<p>Character specifying whether the dataset should be
just downloaded (&quot;zip&quot;), imported and saved as an .rds object (&quot;rds&quot;), or
both extract and rds (&quot;both&quot;). Conveniently you can just specify any letter
from these options.</p>
</td></tr>
<tr><td><code id="get_datasets_+3A_reformat">reformat</code></td>
<td>
<p>Boolean concerning whether to reformat read in datasets by
removing all factors and labels. Default = FALSE.</p>
</td></tr>
<tr><td><code id="get_datasets_+3A_all_lower">all_lower</code></td>
<td>
<p>Logical indicating whether all value labels should be lower
case. Default to 'TRUE'.</p>
</td></tr>
<tr><td><code id="get_datasets_+3A_output_dir_root">output_dir_root</code></td>
<td>
<p>Root directory where the datasets will be stored
within. The default will download
datasets to a subfolder of the client root called &quot;datasets&quot;</p>
</td></tr>
<tr><td><code id="get_datasets_+3A_clear_cache">clear_cache</code></td>
<td>
<p>Should your available datasets cache be cleared first.
This will allow newly accessed datasets to be available. Default = 'FALSE'</p>
</td></tr>
<tr><td><code id="get_datasets_+3A_...">...</code></td>
<td>
<p>Any other arguments to be passed to <code><a href="#topic+read_dhs_dataset">read_dhs_dataset</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Gets datasets from your cache or downloads from the DHS website.
By providing the filenames, as specified in one of the returned fields
from <code><a href="#topic+dhs_datasets">dhs_datasets</a></code>, the client will log in for you and download
all the files you have requested. If any of the requested files are
unavailable for your log in, these will be flagged up first as a message so
you can make a note and request them through the DHS website. You also have
the option to control whether the downloaded zip file is then extracted and
converted into a more convenient R <code>data.frame</code>. This converted object
will then be subsequently saved as a &quot;.rds&quot; object within the client root
directory datasets folder, which can then be more quickly loaded when
needed with <code>readRDS</code>. You also have the option to reformat the
dataset, which will ensure that the datasets returned are encoded simply
as character strings, i.e. there are no factors or labels.
</p>


<h3>Value</h3>

<p>Depends on the download_option requested, but ultimately it is a file
path to where the dataset was downloaded to, so that you can interact with
it accordingly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> ## Not run: 
# get the model datasets included with the package
model_datasets &lt;- model_datasets

# download one of them
g &lt;- get_datasets(dataset_filenames = model_datasets$FileName[1])

## End(Not run)
</code></pre>

<hr>
<h2 id='get_downloaded_datasets'>Get Downloaded Datasets</h2><span id='topic+get_downloaded_datasets'></span>

<h3>Description</h3>

<p>Detail the datasets that you have already downloaded
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_downloaded_datasets()
</code></pre>


<h3>Details</h3>

<p>Returns a <code>data.frame</code> of the datasets that have been
downloaded within this client. This could be useful if you are without
an internet connection and wish to know which saved
dataset files in your root directory correspond to which dataset
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> of downloaded datasets
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# get the model datasets included with the package
model_datasets &lt;- model_datasets

# download one of them
g &lt;- get_datasets(dataset_filenames = model_datasets$FileName[1])

# these will then be stored so that we know what datasets we have downloaded
d &lt;- get_downloaded_datasets()

# which returns a names list of file paths to the datasets
d[1]

## End(Not run)
</code></pre>

<hr>
<h2 id='get_labels_from_dataset'>Return variable labels from a dataset</h2><span id='topic+get_labels_from_dataset'></span>

<h3>Description</h3>

<p>Returns variable labels stored as <code>"label"</code> attribute.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_labels_from_dataset(data, return_all = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_labels_from_dataset_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> from which to extract variable labels.</p>
</td></tr>
<tr><td><code id="get_labels_from_dataset_+3A_return_all">return_all</code></td>
<td>
<p>Logical whether to return all variables (<code>TRUE</code>)
or only those with labels.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> consisting of the variable name and labels.
</p>

<hr>
<h2 id='get_rdhs_config'>Get rdhs config</h2><span id='topic+get_rdhs_config'></span>

<h3>Description</h3>

<p>Gets the rdhs config being used
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_rdhs_config()
</code></pre>


<h3>Details</h3>

<p>Returns the config being used by rdhs at the moment. This will
either be a 'data.frame' with class 'rdhs_config' or will be NULL if
this has not been set up yet
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> containing your rdhs config
</p>

<hr>
<h2 id='get_variable_labels'>Get Survey Variable Labels</h2><span id='topic+get_variable_labels'></span>

<h3>Description</h3>

<p>Return variable labels from a dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_variable_labels(dataset, return_all = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_variable_labels_+3A_dataset">dataset</code></td>
<td>
<p>Can be either the file path to a dataset, the dataset as a
'data.frame' or the filenames of datasets. See details for more information</p>
</td></tr>
<tr><td><code id="get_variable_labels_+3A_return_all">return_all</code></td>
<td>
<p>Logical whether to return all variables (<code>TRUE</code>)
or only those with labels.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns variable names and their labels from a dataset.
You can pass for the 'data' argument any of
the following:
</p>

<ul>
<li><p> The file path to a saved dataset. This would be the direct
output of <code><a href="#topic+get_datasets">get_datasets</a></code>
</p>
</li>
<li><p> A read in dataset, i.e. produced by using <code><a href="base.html#topic+readRDS">readRDS</a></code>
to load a dataset from
a file path produced by <code><a href="#topic+get_datasets">get_datasets</a></code>
</p>
</li>
<li><p> Dataset filenames. These can be found as one of the returned
fields from <code><a href="#topic+dhs_datasets">dhs_datasets</a></code>. If these datasets have not been
downloaded before this will download them for you.
</p>
</li></ul>



<h3>Value</h3>

<p>A <code>data.frame</code> consisting of the variable name and labels.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# get the model datasets included with the package
model_datasets &lt;- model_datasets

# download one of them
g &lt;- get_datasets(dataset_filenames = model_datasets$FileName[1])

# we can pass the list of filepaths to the function
head(get_variable_labels(g))

# or we can pass the full dataset
r &lt;- readRDS(g[[1]])
head(get_variable_labels(r))

## End(Not run)
</code></pre>

<hr>
<h2 id='last_api_update'>Pull last DHS API database update time</h2><span id='topic+last_api_update'></span>

<h3>Description</h3>

<p>Pull last DHS API database update time
</p>


<h3>Usage</h3>

<pre><code class='language-R'>last_api_update(timeout = 30)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="last_api_update_+3A_timeout">timeout</code></td>
<td>
<p>Numeric for API timeout. Default = 30</p>
</td></tr>
</table>

<hr>
<h2 id='model_datasets'>DHS model datasets</h2><span id='topic+model_datasets'></span>

<h3>Description</h3>

<p>The model datasets from the DHS website in a 'data.frame' that is analogous
to those returned by 'get_available_datasets()'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(model_datasets)
</code></pre>


<h3>Format</h3>

<p>A dataframe of 36 observations of 14 variables:
</p>
<p><code>model_datasets</code>: A dataframe of model datasets
</p>

<ul>
<li><p>&quot;FileFormat&quot;
</p>
</li>
<li><p>&quot;FileSize&quot;
</p>
</li>
<li><p>&quot;DatasetType&quot;
</p>
</li>
<li><p>&quot;SurveyNum&quot;
</p>
</li>
<li><p>&quot;SurveyId&quot;
</p>
</li>
<li><p>&quot;FileType&quot;
</p>
</li>
<li><p>&quot;FileDateLastModified&quot;
</p>
</li>
<li><p>&quot;SurveyYearLabel&quot;
</p>
</li>
<li><p>&quot;SurveyType&quot;
</p>
</li>
<li><p>&quot;SurveyYear&quot;
</p>
</li>
<li><p>&quot;DHS_CountryCode&quot;
</p>
</li>
<li><p>&quot;FileName&quot;
</p>
</li>
<li><p>&quot;CountryName&quot;
</p>
</li>
<li><p>&quot;URLS&quot;
</p>
</li></ul>


<hr>
<h2 id='parse_map'>Create dictionary from DHS .MAP codebook</h2><span id='topic+parse_map'></span>

<h3>Description</h3>

<p>Create dictionary from DHS .MAP codebook
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_map(map, all_lower = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parse_map_+3A_map">map</code></td>
<td>
<p>A character vector containing .MAP file, e.g. from 'readLines()'.</p>
</td></tr>
<tr><td><code id="parse_map_+3A_all_lower">all_lower</code></td>
<td>
<p>Logical indicating whether all value labels should be
converted to lower case</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently hardcoded for 111 char width .MAP files, which covers the
vast majority
of DHS Phase V, VI, and VIII. To be extended in the future and perhaps add other useful options.
</p>


<h3>Value</h3>

<p>A data frame containing metadata, principally variable labels and
a vector of value labels.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrdt_zip &lt;- tempfile()
download.file("https://dhsprogram.com/data/model_data/dhs/zzmr61fl.zip",
              mrdt_zip, mode="wb")

map &lt;- rdhs::read_zipdata(mrdt_zip, "\\.MAP", readLines)
dct &lt;- rdhs:::parse_map(map)

</code></pre>

<hr>
<h2 id='parse_meta'>Parse fixed-width file metadata</h2><span id='topic+parse_meta'></span><span id='topic+parse_dcf'></span><span id='topic+parse_sps'></span><span id='topic+parse_do'></span>

<h3>Description</h3>

<p>Parse dataset metadata
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_dcf(dcf, all_lower = TRUE)

parse_sps(sps, all_lower = TRUE)

parse_do(do, dct, all_lower = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parse_meta_+3A_dcf">dcf</code></td>
<td>
<p>.DCF file path to parse</p>
</td></tr>
<tr><td><code id="parse_meta_+3A_all_lower">all_lower</code></td>
<td>
<p>logical indicating whether to convert variable labels to
lower case. Defaults to 'TRUE'.</p>
</td></tr>
<tr><td><code id="parse_meta_+3A_sps">sps</code></td>
<td>
<p>.SPS file as character vector (e.g. from readLines / brio::read_lines)</p>
</td></tr>
<tr><td><code id="parse_meta_+3A_do">do</code></td>
<td>
<p>.DO file as character vector (e.g. from readLines / brio::read_lines)</p>
</td></tr>
<tr><td><code id="parse_meta_+3A_dct">dct</code></td>
<td>
<p>.DCT file as character vector (e.g. from readLines / brio::read_lines)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame with metadata for parsing fixed-width flat file
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrfl_zip &lt;- tempfile()
download.file("https://dhsprogram.com/data/model_data/dhs/zzmr61fl.zip",
              mrfl_zip, mode = "wb")

dcf &lt;- rdhs::read_zipdata(mrfl_zip, "\\.DCF", readLines)
dct &lt;- rdhs:::parse_dcf(dcf)

sps &lt;- rdhs::read_zipdata(mrfl_zip, "\\.SPS", readLines)
dct &lt;- rdhs:::parse_sps(sps)

do &lt;- rdhs::read_zipdata(mrfl_zip, "\\.DO", readLines)
dctin &lt;- rdhs::read_zipdata(mrfl_zip, "\\.DCT", readLines)
dct &lt;- rdhs:::parse_do(do, dctin)

</code></pre>

<hr>
<h2 id='rbind_labelled'>Combine data frames with columns of class 'labelled'</h2><span id='topic+rbind_labelled'></span>

<h3>Description</h3>

<p>Combine data frames with columns of class 'labelled'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rbind_labelled(..., labels = NULL, warn = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rbind_labelled_+3A_...">...</code></td>
<td>
<p>data frames to bind together, potentially with columns of
class &quot;labelled&quot;. The first argument can be a list of data frames, similar
to 'plyr::rbind.fill'.</p>
</td></tr>
<tr><td><code id="rbind_labelled_+3A_labels">labels</code></td>
<td>
<p>A named list providing vectors of value labels or describing
how to handle columns of class 'labelled'. See details for usage.</p>
</td></tr>
<tr><td><code id="rbind_labelled_+3A_warn">warn</code></td>
<td>
<p>Logical indicating to warn if combining variables with different
value labels. Defaults to TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The argument 'labels' provides options for how to handle binding of
columns of class 'labelled'. Typical use is to provide a named list
with elements for each labelled column. Elements of the list
are either a vector of labels that should be applied to the column
or the character string &quot;concatenated&quot;, which indicates that labels
should be concatenated such that all unique labels are distinct
values in the combined vector. This is accomplished by converting
to character strings, binding, and then casting back to labelled.
For labelled columns for which labels are not provided in the 'label'
argument, the default behaviour is that the labels from the first
data frame with labels for that column are inherited by the combined
data.
</p>
<p>See examples.
</p>


<h3>Value</h3>

<p>A data frame.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df1 &lt;- data.frame(
area = haven::labelled(c(1L, 2L, 3L), c("reg 1"=1,"reg 2"=2,"reg 3"=3)),
climate = haven::labelled(c(0L, 1L, 1L), c("cold"=0,"hot"=1))
)
df2 &lt;- data.frame(
area    = haven::labelled(c(1L, 2L), c("reg A"=1, "reg B"=2)),
climate = haven::labelled(c(1L, 0L), c("cold"=0, "warm"=1))
)

# Default: all data frames inherit labels from first df. Incorrect if
# "reg 1" and "reg A" are from different countries, for example.
dfA &lt;- rbind_labelled(df1, df2)
haven::as_factor(dfA)

# Concatenate value labels for "area". Regions are coded separately,
# and original integer values are lost (by necessity of more levels now).
# For "climate", codes "1 = hot" and "1 = warm", are coded as the same
# outcome, inheriting "1 = hot" from df1 by default.
dfB &lt;- rbind_labelled(df1, df2, labels=list(area = "concatenate"))
dfB
haven::as_factor(dfB)

# We can specify to code as "1=warm/hot" rather than inheriting "hot".
dfC &lt;- rbind_labelled(df1, df2,
labels=list(area = "concatenate", climate = c("cold"=0, "warm/hot"=1)))

dfC$climate
haven::as_factor(dfC)

# Or use `climate="concatenate"` to code "warm" and "hot" as different.
dfD &lt;- rbind_labelled(df1, df2,
labels=list(area = "concatenate", climate="concatenate"))

dfD
haven::as_factor(dfD)

</code></pre>

<hr>
<h2 id='rbind_list_base'>implementation of data.tables rbindlist</h2><span id='topic+rbind_list_base'></span>

<h3>Description</h3>

<p>implementation of data.tables rbindlist
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rbind_list_base(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rbind_list_base_+3A_x">x</code></td>
<td>
<p>List of lists to be converted to a data.frame</p>
</td></tr>
</table>

<hr>
<h2 id='read_dhs_dataset'>read in dhs standard file types</h2><span id='topic+read_dhs_dataset'></span>

<h3>Description</h3>

<p>read in dhs standard file types
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_dhs_dataset(file, dataset, reformat = FALSE, all_lower = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_dhs_dataset_+3A_file">file</code></td>
<td>
<p>path to zip file to be read</p>
</td></tr>
<tr><td><code id="read_dhs_dataset_+3A_dataset">dataset</code></td>
<td>
<p>row from <code><a href="#topic+dhs_datasets">dhs_datasets</a></code> that
corresponds to the file</p>
</td></tr>
<tr><td><code id="read_dhs_dataset_+3A_reformat">reformat</code></td>
<td>
<p>boolean detailing if datasets should be nicely
reformatted. Default = 'FALSE'</p>
</td></tr>
<tr><td><code id="read_dhs_dataset_+3A_all_lower">all_lower</code></td>
<td>
<p>Logical indicating whether all value labels
should be lower case. Default to 'TRUE'.</p>
</td></tr>
<tr><td><code id="read_dhs_dataset_+3A_...">...</code></td>
<td>
<p>Extra arguments to be passed to either
<code><a href="#topic+read_dhs_dta">read_dhs_dta</a></code> or <code><a href="#topic+read_dhs_flat">read_dhs_flat</a></code></p>
</td></tr>
</table>

<hr>
<h2 id='read_dhs_dta'>Read DHS Stata data set</h2><span id='topic+read_dhs_dta'></span>

<h3>Description</h3>

<p>This function reads a DHS recode dataset from the zipped Stata dataset.
By default ('mode = &quot;haven&quot;'), it reads in the stata data set using
<code><a href="haven.html#topic+read_dta">read_dta</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_dhs_dta(zfile, mode = "haven", all_lower = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_dhs_dta_+3A_zfile">zfile</code></td>
<td>
<p>Path to '.zip' file containing Stata dataset, usually ending
in filename 'XXXXXXDT.zip'</p>
</td></tr>
<tr><td><code id="read_dhs_dta_+3A_mode">mode</code></td>
<td>
<p>Read mode for Stata '.dta' file. Defaults to &quot;haven&quot;, see
'Details' for other options.</p>
</td></tr>
<tr><td><code id="read_dhs_dta_+3A_all_lower">all_lower</code></td>
<td>
<p>Logical indicating whether all value labels should be lower
case. Default to 'TRUE'.</p>
</td></tr>
<tr><td><code id="read_dhs_dta_+3A_...">...</code></td>
<td>
<p>Other arguments to be passed to <code><a href="#topic+read_zipdata">read_zipdata</a></code>.
Here this will be arguments to pass to either <code><a href="haven.html#topic+read_dta">read_dta</a></code>
or <code><a href="foreign.html#topic+read.dta">read.dta</a></code> depending on the mode provided</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The default 'mode=&quot;haven&quot;' uses  <code><a href="haven.html#topic+read_dta">read_dta</a></code>
to read in the dataset. We have chosen this option as it is more consistent
with respect to variable labels and descriptions than others.
The other options either use use <code><a href="foreign.html#topic+read.dta">read.dta</a></code>
or they use the '.MAP' dictionary file provided with the DHS Stata datasets
to reconstruct the variable labels and value labels. In this case, value
labels are stored are stored using the the 'labelled' class from 'haven'.
See '?haven::labelled' for more information. Variable labels are stored in
the &quot;label&quot; attribute of each variable, the same as 'haven::read_dta()'.
</p>
<p>Currently, 'mode=&quot;map&quot;' is only implemented for 111
character fixed-width .MAP files, which comprises
the vast majority of recode data files from DHS Phases V,
VI, and VII and some from Phase IV. Parsers
for other .MAP formats will be added in future.
</p>
<p>Other available modes read labels from the Stata dataset
with various options available in R:
</p>
<p>* 'mode=&quot;map&quot;' uses the '.MAP' dictionary file provided with the DHS Stata
datasets to reconstruct the variable labels and value labels. In this case,
value labels are stored are stored using the the 'labelled' class
from 'haven'. See '?haven::labelled' for more information. Variable labels
are stored in the &quot;label&quot; attribute of each variable, the same as
'haven::read_dta()'.
</p>
<p>* 'mode=&quot;haven&quot;': use 'haven::read_dta()' to read dataset.
This option retains the native value codings
with value labels affixed with the 'labelled' class.
</p>
<p>* 'mode=&quot;foreign&quot;': use 'foreign::read.dta()',
with default options convert.factors=TRUE to add
variable labels. Note that variable labels will
not be added if labels are not present for all
values, but variable labels are available via the &quot;val.labels&quot; attribute.
</p>
<p>* 'mode=&quot;foreignNA&quot;': use 'foreign::read.dta(..., convert.factors=NA)',
which converts any values without labels to 'NA'. This risks data loss
if labelling is incomplete in Stata datasets.
</p>
<p>* 'mode=&quot;raw&quot;': use 'foreign::read.dta(..., convert.factors=FALSE)',
which simply loads underlying value coding. Variable labels and value
labels are still available through dataset attributes (see examples).
</p>


<h3>Value</h3>

<p>A data frame. If mode = 'map', value labels for each variable are
stored as the 'labelled' class from 'haven'.
</p>


<h3>See Also</h3>

<p><code><a href="foreign.html#topic+read.dta">read.dta</a></code>, <code><a href="haven.html#topic+labelled">labelled</a></code>,
<code><a href="haven.html#topic+read_dta">read_dta</a></code>.
</p>
<p>For more information on the DHS filetypes and contents of
distributed dataset .ZIP files, see
<a href="https://dhsprogram.com/data/File-Types-and-Names.cfm#CP_JUMP_10334">https://dhsprogram.com/data/File-Types-and-Names.cfm#CP_JUMP_10334</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrdt_zip &lt;- tempfile()
download.file("https://dhsprogram.com/data/model_data/dhs/zzmr61dt.zip",
              mrdt_zip, mode="wb")

mr &lt;- rdhs::read_dhs_dta(mrdt_zip,mode="map")
attr(mr$mv213, "label")
class(mr$mv213)
head(mr$mv213)
table(mr$mv213)
table(haven::as_factor(mr$mv213))

## If Stata file codebook is complete, `mode="map"` and `"haven"`
## should be the same.
mr_hav &lt;- rdhs::read_dhs_dta(mrdt_zip, mode="haven")
attr(mr_hav$mv213, "label")
class(mr_hav$mv213)
head(mr_hav$mv213)  # "9=missing" omitted from .dta codebook
table(mr_hav$mv213)
table(haven::as_factor(mr_hav$mv213))

## Parsing codebook when using foreign::read.dta()
# foreign issues with duplicated factors
# Specifying foreignNA can help but often will not as below.
# Thus we would recommend either using mode = "haven" or mode = "raw"
## Not run: 
mr_for &lt;- rdhs::read_dhs_dta(mrdt_zip, mode="foreign")
mr_for &lt;- rdhs::read_dhs_dta(mrdt_zip, mode = "foreignNA")

## End(Not run)
## Don't convert factors
mr_raw &lt;- rdhs::read_dhs_dta(mrdt_zip, mode="raw")
table(mr_raw$mv213)

</code></pre>

<hr>
<h2 id='read_dhs_flat'>Read DHS flat file data set</h2><span id='topic+read_dhs_flat'></span>

<h3>Description</h3>

<p>This function reads a DHS recode dataset from the zipped flat file dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_dhs_flat(zfile, all_lower = TRUE, meta_source = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_dhs_flat_+3A_zfile">zfile</code></td>
<td>
<p>Path to '.zip' file containing flat file dataset, usually
ending in filename 'XXXXXXFL.zip'</p>
</td></tr>
<tr><td><code id="read_dhs_flat_+3A_all_lower">all_lower</code></td>
<td>
<p>Logical indicating whether all value labels should be
lower case. Default to 'TRUE'.</p>
</td></tr>
<tr><td><code id="read_dhs_flat_+3A_meta_source">meta_source</code></td>
<td>
<p>character string indicating metadata source file for data
dictionary. Default <code>NULL</code> first tried to use <code>.DCF</code> and then
<code>.SPS</code> if not found.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame. Value labels for each variable are stored as the
'labelled' class from 'haven'.
</p>


<h3>See Also</h3>

<p><code><a href="haven.html#topic+labelled">labelled</a></code>, <code><a href="#topic+read_dhs_dta">read_dhs_dta</a></code>.
</p>
<p>For more information on the DHS filetypes and contents of distributed
dataset .ZIP files, see
<a href="https://dhsprogram.com/data/File-Types-and-Names.cfm#CP_JUMP_10334">https://dhsprogram.com/data/File-Types-and-Names.cfm#CP_JUMP_10334</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrfl_zip &lt;- tempfile()
download.file("https://dhsprogram.com/data/model_data/dhs/zzmr61fl.zip",
              mrfl_zip,mode="wb")

mr &lt;- rdhs:::read_dhs_flat(mrfl_zip)
attr(mr$mv213, "label")
class(mr$mv213)
head(mr$mv213)
table(mr$mv213)
table(haven::as_factor(mr$mv213))

</code></pre>

<hr>
<h2 id='read_zipdata'>Read filetype from a zipped folder based on the file ending</h2><span id='topic+read_zipdata'></span>

<h3>Description</h3>

<p>Read filetype from a zipped folder based on the file ending
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_zipdata(zfile, pattern = ".dta$", readfn = haven::read_dta, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_zipdata_+3A_zfile">zfile</code></td>
<td>
<p>Path to '.zip' file containing flat file dataset,
usually ending in filename 'XXXXXXFL.zip'</p>
</td></tr>
<tr><td><code id="read_zipdata_+3A_pattern">pattern</code></td>
<td>
<p>String detailing which filetype is to be read
from within the zip by means of a grep. Default = &quot;.dta$&quot;</p>
</td></tr>
<tr><td><code id="read_zipdata_+3A_readfn">readfn</code></td>
<td>
<p>Function object to be used for reading in the
identified file within the zip. Default = 'haven::read_dta'</p>
</td></tr>
<tr><td><code id="read_zipdata_+3A_...">...</code></td>
<td>
<p>additional arguments to readfn</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# get the model datasets included in the package
model_datasets &lt;- model_datasets

# download just the zip
g &lt;- get_datasets(
dataset_filenames = model_datasets$FileName[1],
download_option = "zip"
)

# and then read from the zip. This function is used internally by rdhs
# when using `get_datasets` with `download_option = .rds` (default)
r &lt;- read_zipdata(
g[[1]], pattern = ".dta"
)

# and we can pass a function to read the file and any other args with ...
r &lt;- read_zipdata(
g[[1]], pattern = ".dta", readfn = haven::read_dta, encoding = "UTF-8"
)

## End(Not run)
</code></pre>

<hr>
<h2 id='response_is_json'>checks if the response is json or not by looking at the responses headers</h2><span id='topic+response_is_json'></span>

<h3>Description</h3>

<p>checks if the response is json or not by looking at the responses headers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>response_is_json(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="response_is_json_+3A_x">x</code></td>
<td>
<p>A response</p>
</td></tr>
</table>

<hr>
<h2 id='response_to_json'>converts response to json by first converting the response to text</h2><span id='topic+response_to_json'></span>

<h3>Description</h3>

<p>converts response to json by first converting the response to text
</p>


<h3>Usage</h3>

<pre><code class='language-R'>response_to_json(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="response_to_json_+3A_x">x</code></td>
<td>
<p>A response</p>
</td></tr>
</table>

<hr>
<h2 id='search_variable_labels'>Search Survey Variable Definitions</h2><span id='topic+search_variable_labels'></span>

<h3>Description</h3>

<p>Searches across datasets specified for requested survey variable definitions.
This function (or <code><a href="#topic+search_variable_labels">search_variable_labels</a></code>) should be used to
provide the 'questions' argument for <code><a href="#topic+extract_dhs">extract_dhs</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>search_variable_labels(
  dataset_filenames,
  search_terms = NULL,
  essential_terms = NULL,
  regex = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="search_variable_labels_+3A_dataset_filenames">dataset_filenames</code></td>
<td>
<p>The desired filenames to be downloaded. These can be
found as one of the returned fields from <code><a href="#topic+dhs_datasets">dhs_datasets</a></code>.</p>
</td></tr>
<tr><td><code id="search_variable_labels_+3A_search_terms">search_terms</code></td>
<td>
<p>Character vector of search terms. If any of these terms
are found within the survey question definitions, the corresponding survey
variable and definitions will be returned.</p>
</td></tr>
<tr><td><code id="search_variable_labels_+3A_essential_terms">essential_terms</code></td>
<td>
<p>Character pattern that has to be in the definitions of
survey question definitions. I.e. the function will first find
all survey variable definitions that contain your 'search_terms'
(or regex) OR 'essential_terms'. It will then remove any questions
that did not contain your 'essential_terms'. Default = 'NULL'.</p>
</td></tr>
<tr><td><code id="search_variable_labels_+3A_regex">regex</code></td>
<td>
<p>Regex character pattern for matching. If you want to specify
your regex search pattern, then specify this argument. N.B. If both
'search_terms' and 'regex&ldquo; are supplied as arguments then regex will
be ignored.</p>
</td></tr>
<tr><td><code id="search_variable_labels_+3A_...">...</code></td>
<td>
<p>Any other arguments to be passed to
<code><a href="#topic+download_datasets">download_datasets</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Use this function after <code><a href="#topic+get_datasets">get_datasets</a></code> to query
downloaded datasets for what survey questions they asked.
This function will look for your downloaded and imported survey datasets
from your cached files, and will download them if not downloaded.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> of the surveys where matches were found
and then all the resultant codes and descriptions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# get the model datasets included with the package
model_datasets &lt;- model_datasets

# download two of them
g &lt;- get_datasets(dataset_filenames = model_datasets$FileName[1:2])

# and now seearch within these for survey variable labels of interest
vars &lt;- search_variable_labels(
dataset_filenames = names(g), search_terms = "fever"
)

head(vars)

# if we specify an essential term then no results will be returned from
# a dataset if it does not have any results from the search with this term
search_variable_labels(
dataset_filenames = names(g),
search_terms = "fever",
essential_terms = "primaquine",
)

# we can also use regex queries if we prefer, by passing `regex = TRUE`
vars &lt;- search_variable_labels(
dataset_filenames = names(g), search_terms = "fever|net", regex = TRUE
)

## End(Not run)
</code></pre>

<hr>
<h2 id='search_variables'>Search Survey Variables</h2><span id='topic+search_variables'></span>

<h3>Description</h3>

<p>Searches across datasets specified for requested survey variables.
This function (or <code><a href="#topic+search_variable_labels">search_variable_labels</a></code>)
should be used to provide the 'questions' argument
for <code><a href="#topic+extract_dhs">extract_dhs</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>search_variables(dataset_filenames, variables, essential_variables = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="search_variables_+3A_dataset_filenames">dataset_filenames</code></td>
<td>
<p>The desired filenames to be downloaded.
These can be found as one of the returned fields from
<code><a href="#topic+dhs_datasets">dhs_datasets</a></code>.</p>
</td></tr>
<tr><td><code id="search_variables_+3A_variables">variables</code></td>
<td>
<p>Character vector of survey variables to be looked up</p>
</td></tr>
<tr><td><code id="search_variables_+3A_essential_variables">essential_variables</code></td>
<td>
<p>Character vector of variables that need to
present. If any of the codes are not present in that survey,
the survey will not be returned by this function. Default = 'NULL'.</p>
</td></tr>
<tr><td><code id="search_variables_+3A_...">...</code></td>
<td>
<p>Any other arguments to be passed to
<code><a href="#topic+download_datasets">download_datasets</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Use this function after <code><a href="#topic+get_datasets">get_datasets</a></code> to look up all
the survey variables that have the required variable.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> of the surveys where matches were
found and then all the resultant codes and descriptions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# get the model datasets included with the package
model_datasets &lt;- model_datasets

# download two of them
g &lt;- get_datasets(dataset_filenames = model_datasets$FileName[1:2])

# and now seearch within these for survey variables
search_variables(
dataset_filenames = names(g), variables = c("v002","v102","ml13"),
)

# if we specify an essential variable then that dataset has to have that
# variable or else no variables will be returned for that datasets
search_variables(
dataset_filenames = names(g),
variables = c("v002","v102","ml13"),
essential_variables = "ml13"
)

## End(Not run)
</code></pre>

<hr>
<h2 id='set_rdhs_config'>Set rdhs config</h2><span id='topic+set_rdhs_config'></span>

<h3>Description</h3>

<p>Sets the configuration settings for using rdhs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_rdhs_config(
  email = NULL,
  project = NULL,
  cache_path = NULL,
  config_path = NULL,
  global = TRUE,
  verbose_download = FALSE,
  verbose_setup = TRUE,
  data_frame = NULL,
  timeout = 30,
  password_prompt = FALSE,
  prompt = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_rdhs_config_+3A_email">email</code></td>
<td>
<p>Character for email used to login to the DHS website.</p>
</td></tr>
<tr><td><code id="set_rdhs_config_+3A_project">project</code></td>
<td>
<p>Character for the name of the DHS project from which
datasets should be downloaded.</p>
</td></tr>
<tr><td><code id="set_rdhs_config_+3A_cache_path">cache_path</code></td>
<td>
<p>Character for directory path where datasets and API calls
will be cached. If left bank, a suitable directory will be created within
your user cache directory for your operating system (permission granting).</p>
</td></tr>
<tr><td><code id="set_rdhs_config_+3A_config_path">config_path</code></td>
<td>
<p>Character for where the config file should be saved.
For a global configuration, &lsquo;config_path' must be &rsquo;~/.rdhs.json'.
For a local configuration, &lsquo;config_path' must be &rsquo;rdhs.json'.
If left bank, the config file will be stored within
your user cache directory for your operating system (permission granting).</p>
</td></tr>
<tr><td><code id="set_rdhs_config_+3A_global">global</code></td>
<td>
<p>Logical for the config_path to be interpreted as a global
config path or a local one. Default = TRUE.</p>
</td></tr>
<tr><td><code id="set_rdhs_config_+3A_verbose_download">verbose_download</code></td>
<td>
<p>Logical for dataset download progress bars to be
shown. Default = FALSE.</p>
</td></tr>
<tr><td><code id="set_rdhs_config_+3A_verbose_setup">verbose_setup</code></td>
<td>
<p>Logical for rdhs setup and messages to be printed.
Default = TRUE.</p>
</td></tr>
<tr><td><code id="set_rdhs_config_+3A_data_frame">data_frame</code></td>
<td>
<p>Function with which to convert API calls into. If left
blank <code>data_frame</code> objects are returned. Must be passed as a
character. Examples could be:
<code>data.table::as.data.table</code>
<code>tibble::as.tibble</code></p>
</td></tr>
<tr><td><code id="set_rdhs_config_+3A_timeout">timeout</code></td>
<td>
<p>Numeric for how long in seconds to wait for the DHS API to
respond. Default = 30.</p>
</td></tr>
<tr><td><code id="set_rdhs_config_+3A_password_prompt">password_prompt</code></td>
<td>
<p>Logical whether user is asked to type their password,
even if they have previously set it. Default = FALSE. Set to TRUE if you
have mistyped your password when using <code>set_rdhs_config</code>.</p>
</td></tr>
<tr><td><code id="set_rdhs_config_+3A_prompt">prompt</code></td>
<td>
<p>Logical for whether the user should be prompted for
permission to write to files. This should not need be
changed by the user. Default = TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Setting up a configuration will enable API results to be cached, as
well as enabling datasets from the DHS website to be downloaded and also
cached. To enable results to be cached you have to either provide a valid
'cache_path' argument, or allow rdhs to write to the user cache directory
for your operating system. To do the later, leave the 'cache_path' argument
blank and you will be explicitly prompted to give permission to 'rdhs' to
save your results in this directory. If you do not then your API calls and
any downloaded datasets will be saved in the temp directory and deleted
after your R session closes. To allow 'rdhs' to download datasets from the
DHS website, you have to provide both an 'email' and 'project' argument.
You will then be prompted to type in your login password securely.
Your provided config (email, project, password, cache_path etc) will be
saved at the location provided by 'config_path'. If no argument is provided
'config_path' will be either set to within your user cache directory if you
have given permission to do so, otherwise it will be placed within your
temp directory.
</p>
<p>When creating your config you also have the option to specify whether the
'config_path' provided should be used as a local configuration or a global
one. This is controlled using the 'global' argument, which by default is
set equal to 'TRUE'. A global config is saved within your R root directory
(the directory that a new R session will start in). If you set 'global' to
'FALSE' the config file will be saved within the current directory. This
can be useful if you create a new DHS project for each new piece of work,
and want to keep the datasets you download for this project separate to
another. If you want to have your config file saved in a different
directory, then you must create a file &quot;rdhs.json&quot; first in that directory
before specifying the full path to it, as well as setting 'global' equal to
'FALSE'.
</p>
<p>As an aside, it is useful for the DHS program to see how the surveys they
conducted are being used, and thus it is helpful for them if you do create
a new project for each new piece of work (e.g. a different publication).
However, we would still recommend setting up a global config and using
the same 'cache_path' for different projects as this will save you time
downloading the same datasets as you have downloaded before.
</p>
<p>Lastly, you can decide how API calls from the DHS API are formatted by
providing an argument for 'data_frame'. If left blank API calls will be
returned as 'data.frame' objects, however, you could return API calls as
'data.table' objects using 'data.table::as.data.table'.
</p>


<h3>Value</h3>

<p>Invisibly returns the rdhs config object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# normal set up we would prvide the email and project, and be prompted for
# the password. (not run as it requires a prompt)
set_rdhs_config(email = "blah@gmail.com", project = "Blahs",
config_path = "rdhs.json", global = FALSE)


# otherwise we can do this by specifying prompt to FALSE
set_rdhs_config(
config_path = "rdhs.json", global = FALSE, prompt = FALSE
)

# you can look at what you have set these to using \code{get_rdhs_config}
config &lt;- get_rdhs_config()

## End(Not run)


</code></pre>

<hr>
<h2 id='unzip_special'>unzip special that catches for 4GB+</h2><span id='topic+unzip_special'></span>

<h3>Description</h3>

<p>unzip special that catches for 4GB+
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unzip_special(
  zipfile,
  files = NULL,
  overwrite = TRUE,
  junkpaths = FALSE,
  exdir = ".",
  unzip = "internal",
  setTimes = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="unzip_special_+3A_zipfile">zipfile</code></td>
<td>
<p>The pathname of the zip file: tilde expansion (see
<code><a href="base.html#topic+path.expand">path.expand</a></code> will be performed.)</p>
</td></tr>
<tr><td><code id="unzip_special_+3A_files">files</code></td>
<td>
<p>A character vector of recorded filepaths to be extracted:
the default is to extract all files.</p>
</td></tr>
<tr><td><code id="unzip_special_+3A_overwrite">overwrite</code></td>
<td>
<p>If <code>TRUE</code>, overwrite existing files (the equivalent
of <code>unzip -o</code>), otherwise ignore such files (the equivalent of
<code>unzip -n</code>).</p>
</td></tr>
<tr><td><code id="unzip_special_+3A_junkpaths">junkpaths</code></td>
<td>
<p>If <code>TRUE</code>, use only the basename of the stored
filepath when extracting.  The equivalent of <code>unzip -j</code>.</p>
</td></tr>
<tr><td><code id="unzip_special_+3A_exdir">exdir</code></td>
<td>
<p>The directory to extract files to (the equivalent of
<code>unzip -d</code>).  It will be created if necessary.</p>
</td></tr>
<tr><td><code id="unzip_special_+3A_unzip">unzip</code></td>
<td>
<p>The method to be used.  An alternative is to use
<code>getOption("unzip")</code>, which on a Unix-alike may be set to the
path to a <code>unzip</code> program.</p>
</td></tr>
<tr><td><code id="unzip_special_+3A_settimes">setTimes</code></td>
<td>
<p>logical.  For the internal method only, should the
file times be set based on the times in the zip file?  (NB: this
applies to included files, not to directories.)</p>
</td></tr>
</table>

<hr>
<h2 id='update_rdhs_config'>Update your current rdhs config</h2><span id='topic+update_rdhs_config'></span>

<h3>Description</h3>

<p><code>update_rdhs_config</code> allows you to update elements of your
rdhs config, without having to set it completely via <code>set_rdhs_config</code>.
For each config element, provide the new changes required. To update your
password, set <code>password = TRUE</code> and you will be asked securely for your
new password.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_rdhs_config(
  password = FALSE,
  email = NULL,
  project = NULL,
  cache_path = NULL,
  config_path = NULL,
  global = NULL,
  verbose_download = NULL,
  verbose_setup = NULL,
  timeout = NULL,
  data_frame = NULL,
  project_choice = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_rdhs_config_+3A_password">password</code></td>
<td>
<p>Logical for updating your password securely. Default = FALSE</p>
</td></tr>
<tr><td><code id="update_rdhs_config_+3A_email">email</code></td>
<td>
<p>Character for email used to login to the DHS website.</p>
</td></tr>
<tr><td><code id="update_rdhs_config_+3A_project">project</code></td>
<td>
<p>Character for the name of the DHS project from which
datasets should be downloaded.</p>
</td></tr>
<tr><td><code id="update_rdhs_config_+3A_cache_path">cache_path</code></td>
<td>
<p>Character for directory path where datasets and API calls
will be cached. If left bank, a suitable directory will be created within
your user cache directory for your operating system (permission granting).</p>
</td></tr>
<tr><td><code id="update_rdhs_config_+3A_config_path">config_path</code></td>
<td>
<p>Character for where the config file should be saved.
For a global configuration, &lsquo;config_path' must be &rsquo;~/.rdhs.json'.
For a local configuration, &lsquo;config_path' must be &rsquo;rdhs.json'.
If left bank, the config file will be stored within
your user cache directory for your operating system (permission granting).</p>
</td></tr>
<tr><td><code id="update_rdhs_config_+3A_global">global</code></td>
<td>
<p>Logical for the config_path to be interpreted as a global
config path or a local one. Default = TRUE.</p>
</td></tr>
<tr><td><code id="update_rdhs_config_+3A_verbose_download">verbose_download</code></td>
<td>
<p>Logical for dataset download progress bars to be
shown. Default = FALSE.</p>
</td></tr>
<tr><td><code id="update_rdhs_config_+3A_verbose_setup">verbose_setup</code></td>
<td>
<p>Logical for rdhs setup and messages to be printed.
Default = TRUE.</p>
</td></tr>
<tr><td><code id="update_rdhs_config_+3A_timeout">timeout</code></td>
<td>
<p>Numeric for how long in seconds to wait for the DHS API to
respond. Default = 30.</p>
</td></tr>
<tr><td><code id="update_rdhs_config_+3A_data_frame">data_frame</code></td>
<td>
<p>Function with which to convert API calls into. If left
blank <code>data_frame</code> objects are returned. Must be passed as a
character. Examples could be:
<code>data.table::as.data.table</code>
<code>tibble::as.tibble</code></p>
</td></tr>
<tr><td><code id="update_rdhs_config_+3A_project_choice">project_choice</code></td>
<td>
<p>Numeric for project choice. See <code>authenticate_dhs</code>
for more info.</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
