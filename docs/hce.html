<!DOCTYPE html><html><head><title>Help for package hce</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {hce}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ADET'><p>Event-Time dataset for kidney outcomes.</p></a></li>
<li><a href='#ADLB'><p>Laboratory dataset for Glomerular Filtration Rate (GFR) measurements.</p></a></li>
<li><a href='#ADSL'><p>Baseline characteristics dataset of patients with kidney function assessments.</p></a></li>
<li><a href='#as_hce'><p>A generic function for coercing data structures to <code>hce</code> objects</p></a></li>
<li><a href='#as_hce.data.frame'><p>Coerce a data frame to an <code>hce</code> object</p></a></li>
<li><a href='#calcWINS'><p>A generic function for calculating win statistics</p></a></li>
<li><a href='#calcWINS.data.frame'><p>Win statistics calculation using a data frame</p></a></li>
<li><a href='#calcWINS.formula'><p>Win statistics calculation using formula syntax</p></a></li>
<li><a href='#calcWINS.hce'><p>Win statistics calculation for <code>hce</code> objects</p></a></li>
<li><a href='#calcWO'><p>A generic function for calculating win odds</p></a></li>
<li><a href='#calcWO.data.frame'><p>Win odds calculation using a data frame</p></a></li>
<li><a href='#calcWO.formula'><p>Win odds calculation using formula syntax</p></a></li>
<li><a href='#calcWO.hce'><p>Win odds calculation for <code>hce</code> objects</p></a></li>
<li><a href='#COVID19'><p>COVID-19 ordinal scale dataset (full report).</p></a></li>
<li><a href='#COVID19b'><p>COVID-19 ordinal scale dataset (preliminary report).</p></a></li>
<li><a href='#hce'><p>Helper function for <code>hce</code> objects</p></a></li>
<li><a href='#HCE1'><p><code>HCE1</code>, <code>HCE2</code>, <code>HCE3</code>, <code>HCE4</code> datasets for 1000 patients with different treatment effects.</p></a></li>
<li><a href='#HCE2'><p><code>HCE1</code>, <code>HCE2</code>, <code>HCE3</code>, <code>HCE4</code> datasets for 1000 patients with different treatment effects.</p></a></li>
<li><a href='#HCE3'><p><code>HCE1</code>, <code>HCE2</code>, <code>HCE3</code>, <code>HCE4</code> datasets for 1000 patients with different treatment effects.</p></a></li>
<li><a href='#HCE4'><p><code>HCE1</code>, <code>HCE2</code>, <code>HCE3</code>, <code>HCE4</code> datasets for 1000 patients with different treatment effects.</p></a></li>
<li><a href='#KHCE'><p>Kidney Hierarchical Composite Endpoint dataset.</p></a></li>
<li><a href='#minWO'><p>Minimum detectable or WO for alternative hypothesis for given power (no ties)</p></a></li>
<li><a href='#plot.hce_results'><p>A print method for <code>hce_results </code> objects</p></a></li>
<li><a href='#powerWO'><p>Power calculation for the win odds test (no ties)</p></a></li>
<li><a href='#print.hce_results'><p>A print method for <code>hce_results</code> objects</p></a></li>
<li><a href='#propWINS'><p>Proportion of wins/losses/ties given the win odds and the win ratio</p></a></li>
<li><a href='#regWO'><p>A generic function for win odds regression</p></a></li>
<li><a href='#regWO.data.frame'><p>Win odds regression using a data frame</p></a></li>
<li><a href='#simHCE'><p>Simulate <code>hce</code> object with given event rates of time-to-event outcomes (Weibull), mean and SD of the continuous outcome (normal or log-normal) by treatment group</p></a></li>
<li><a href='#sizeWO'><p>Sample size calculation for the win odds test (no ties)</p></a></li>
<li><a href='#sizeWR'><p>Sample size calculation for the win ratio test (with WR = 1 null hypothesis)</p></a></li>
<li><a href='#stratWO'><p>A generic function for stratified win odds with adjustment</p></a></li>
<li><a href='#stratWO.data.frame'><p>Stratified win odds with adjustment</p></a></li>
<li><a href='#summaryWO'><p>A generic function for summarizing win odds</p></a></li>
<li><a href='#summaryWO.data.frame'><p>Win odds summary for a data frame</p></a></li>
<li><a href='#summaryWO.formula'><p>Win odds summary using formula syntax</p></a></li>
<li><a href='#summaryWO.hce'><p>Win odds summary for <code>hce</code> objects</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Design and Analysis of Hierarchical Composite Endpoints</td>
</tr>
<tr>
<td>Version:</td>
<td>0.6.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Simulate and analyze hierarchical composite endpoints. Win odds is the main analysis method, but other win statistics (win ratio, net benefit) are implemented as well in case of no censoring. See Gasparyan SB et al (2023) "Hierarchical Composite Endpoints in COVID-19: The DARE-19 Trial." Case Studies in Innovative Clinical Trials, 95-148. Chapman; Hall/CRC. &lt;<a href="https://doi.org/10.1201%2F9781003288640-7">doi:10.1201/9781003288640-7</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>base, stats</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-12 13:14:25 UTC; r148404</td>
</tr>
<tr>
<td>Author:</td>
<td>Samvel B. Gasparyan
    <a href="https://orcid.org/0000-0002-4797-2208"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Samvel B. Gasparyan &lt;gasparyan.co@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-12 15:50:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='ADET'>Event-Time dataset for kidney outcomes.</h2><span id='topic+ADET'></span>

<h3>Description</h3>

<p>A dataset with multiple kidney outcomes over time scale outcomes of 1500 patients in the <code>ADSL</code> dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ADET
</code></pre>


<h3>Format</h3>

<p>a data frame with 604 rows (events) and 6 variables:
</p>

<dl>
<dt>ID</dt><dd><p>patient identifiers, numeric</p>
</dd>
<dt>AVAL</dt><dd><p>occurence time of the event, numeric</p>
</dd>
<dt>PARAM</dt><dd><p>name of the event, character</p>
</dd>
<dt>PARAMCD</dt><dd><p>coded name of the event, character</p>
</dd>
<dt>PARAMN</dt><dd><p>type of the event, outcomes 1-7, where a higher value means a better outcome, numeric</p>
</dd>
<dt>TRTPN</dt><dd><p>treatment values, 1 Active or 2 Placebo, numeric</p>
</dd>
</dl>



<h3>Source</h3>

<p>Heerspink HL et al &quot;Development and validation of a new hierarchical composite endpoint for clinical trials of kidney disease progression.&quot; Journal of the American Society of Nephrology (2023): <a href="doi:10.1681/ASN.0000000000000243">doi:10.1681/ASN.0000000000000243</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>head(ADET)
# Number of unique patients
length(unique(ADET$ID)) 
# Number of events per event type
barplot(table(ADET$PARAM))
</code></pre>

<hr>
<h2 id='ADLB'>Laboratory dataset for Glomerular Filtration Rate (GFR) measurements.</h2><span id='topic+ADLB'></span>

<h3>Description</h3>

<p>A dataset of laboratory measurements of kidney function over time for the 1500 patients in the <code>ADSL</code> dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ADLB
</code></pre>


<h3>Format</h3>

<p>a data frame with 13980 rows and 8 variables:
</p>

<dl>
<dt>ID</dt><dd><p>patient identifiers, numeric</p>
</dd>
<dt>TRTPN</dt><dd><p>treatment values, 1 Active or 2 Placebo, numeric</p>
</dd>
<dt>AVAL</dt><dd><p>measurement value, numeric</p>
</dd>
<dt>ADAY</dt><dd><p>measurement day in the study, numeric</p>
</dd>
<dt>AVISITN</dt><dd><p>hospital visit number, numeric</p>
</dd>
<dt>PARAM</dt><dd><p>name of the event, GFR measurments, character</p>
</dd>
<dt>PARAMCD</dt><dd><p>coded name of the event, GFR, character</p>
</dd>
<dt>PARAMN</dt><dd><p>type of the event is set to 7 for all measurements, numeric</p>
</dd>
</dl>



<h3>Source</h3>

<p>Heerspink HL et al &quot;Development and validation of a new hierarchical composite endpoint for clinical trials of kidney disease progression.&quot; Journal of the American Society of Nephrology (2023): <a href="doi:10.1681/ASN.0000000000000243">doi:10.1681/ASN.0000000000000243</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>head(ADLB)
</code></pre>

<hr>
<h2 id='ADSL'>Baseline characteristics dataset of patients with kidney function assessments.</h2><span id='topic+ADSL'></span>

<h3>Description</h3>

<p>A data frame with baseline characteristics for 1500 patients used to derive <code>KHCE</code> dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ADSL
</code></pre>


<h3>Format</h3>

<p>a data frame with 1500 rows and 4 variables:
</p>

<dl>
<dt>ID</dt><dd><p>patient identifiers, numeric</p>
</dd>
<dt>TRTPN</dt><dd><p>treatment values, 1 Active or 2 Placebo, numeric</p>
</dd>
<dt>EGFRBL</dt><dd><p>Baseline GFR values of patients, numeric</p>
</dd>
<dt>STRATAN</dt><dd><p>strata 1-4, higher value means a higher risk for kidney disease progression, numeric</p>
</dd>
</dl>



<h3>Source</h3>

<p>Heerspink HL et al &quot;Development and validation of a new hierarchical composite endpoint for clinical trials of kidney disease progression.&quot; Journal of the American Society of Nephrology (2023): <a href="doi:10.1681/ASN.0000000000000243">doi:10.1681/ASN.0000000000000243</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>head(ADSL)
</code></pre>

<hr>
<h2 id='as_hce'>A generic function for coercing data structures to <code>hce</code> objects</h2><span id='topic+as_hce'></span>

<h3>Description</h3>

<p>A generic function for coercing data structures to <code>hce</code> objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_hce(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_hce_+3A_x">x</code></td>
<td>
<p>an object used to select a method.</p>
</td></tr>
<tr><td><code id="as_hce_+3A_...">...</code></td>
<td>
<p>additional parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an <code>hce</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+as_hce.data.frame">as_hce.data.frame()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>### data frames 
data(HCE1)
HCE &lt;- as_hce(HCE1)
calcWINS(HCE)
</code></pre>

<hr>
<h2 id='as_hce.data.frame'>Coerce a data frame to an <code>hce</code> object</h2><span id='topic+as_hce.data.frame'></span>

<h3>Description</h3>

<p>Coerce a data frame to an <code>hce</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'data.frame'
as_hce(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_hce.data.frame_+3A_x">x</code></td>
<td>
<p>a data frame.</p>
</td></tr>
<tr><td><code id="as_hce.data.frame_+3A_...">...</code></td>
<td>
<p>additional parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an <code>hce</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>KHCE &lt;- as_hce(KHCE)
calcWO(KHCE)
</code></pre>

<hr>
<h2 id='calcWINS'>A generic function for calculating win statistics</h2><span id='topic+calcWINS'></span>

<h3>Description</h3>

<p>A generic function for calculating win statistics
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calcWINS(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calcWINS_+3A_x">x</code></td>
<td>
<p>an object used to select a method.</p>
</td></tr>
<tr><td><code id="calcWINS_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame containing calculated values.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+calcWINS.hce">calcWINS.hce()</a></code>, <code><a href="#topic+calcWINS.formula">calcWINS.formula()</a></code>, <code><a href="#topic+calcWINS.data.frame">calcWINS.data.frame()</a></code>  methods.
</p>

<hr>
<h2 id='calcWINS.data.frame'>Win statistics calculation using a data frame</h2><span id='topic+calcWINS.data.frame'></span>

<h3>Description</h3>

<p>Win statistics calculation using a data frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'data.frame'
calcWINS(x, AVAL, TRTP, ref, alpha = 0.05, WOnull = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calcWINS.data.frame_+3A_x">x</code></td>
<td>
<p>a data frame containing subject-level data.</p>
</td></tr>
<tr><td><code id="calcWINS.data.frame_+3A_aval">AVAL</code></td>
<td>
<p>variable in the data with ordinal analysis values.</p>
</td></tr>
<tr><td><code id="calcWINS.data.frame_+3A_trtp">TRTP</code></td>
<td>
<p>the treatment variable in the data.</p>
</td></tr>
<tr><td><code id="calcWINS.data.frame_+3A_ref">ref</code></td>
<td>
<p>the reference treatment group.</p>
</td></tr>
<tr><td><code id="calcWINS.data.frame_+3A_alpha">alpha</code></td>
<td>
<p>2-sided significance level. The default is 0.05.</p>
</td></tr>
<tr><td><code id="calcWINS.data.frame_+3A_wonull">WOnull</code></td>
<td>
<p>the null hypothesis. The default is 1.</p>
</td></tr>
<tr><td><code id="calcWINS.data.frame_+3A_...">...</code></td>
<td>
<p>additional parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list containing win statistics and their confidence intervals. It contains the following named data frames:
</p>

<ul>
<li><p> summary a data frame containing number of wins, losses, and ties of the active treatment group and the overall number of comparisons.
</p>
</li>
<li><p> WP a data frame containing the win probability and its confidence interval.
</p>
</li>
<li><p> NetBenefit a data frame containing the net benefit and its confidence interval. This is just a <code style="white-space: pre;">&#8288;2x-1&#8288;</code> transformation of WP and its CI.
</p>
</li>
<li><p> WO a data frame containing the win odds and its confidence interval.
</p>
</li>
<li><p> WR1 a data frame containing the win ratio and its confidence interval, using the transformed standard error of the <code>gamma</code> statistic.
</p>
</li>
<li><p> WR2 a data frame containing the win ratio and its confidence interval, using the standard error calculated using <code>Pties</code>.
</p>
</li>
<li><p> gamma a data frame containing Goodman Kruskal's <code>gamma</code> and its confidence interval.
</p>
</li>
<li><p> SE a data frame containing standard errors used to calculated the Confidence intervals for win statistics.
</p>
</li></ul>



<h3>References</h3>

<p>The theory of win statistics is covered in the following papers.
</p>

<ul>
<li><p> For the win proportion CI calculation see
<br /> <br /> Gasparyan SB et al. (2021) &quot;Adjusted win ratio with stratification: calculation methods and interpretation.&quot; Statistical Methods in Medical Research 30.2: 580-611. <a href="doi:10.1177/0962280220942558">doi:10.1177/0962280220942558</a>.
</p>
</li>
<li><p> The win odds CI is calculated using the formula in
<br /> <br /> Gasparyan SB et al. (2021) &quot;Power and sample size calculation for the win odds test: application to an ordinal endpoint in COVID-19 trials.&quot; Journal of Biopharmaceutical Statistics 31.6: 765-787. <a href="doi:10.1080/10543406.2021.1968893">doi:10.1080/10543406.2021.1968893</a>.
</p>
</li>
<li><p> The win ratio the first CI uses the standard error derived from the standard error of the <code>gamma</code> statistic presented in
<br /> <br /> Gasparyan SB, Kowalewski EK, Buenconsejo J, Koch GG. (2023) “Hierarchical Composite Endpoints in COVID-19: The DARE-19 Trial.” In Case Studies in Innovative Clinical Trials, Chapter 7, 95–148. Chapman; Hall/CRC. <a href="doi:10.1201/9781003288640-7">doi:10.1201/9781003288640-7</a>.
</p>
</li>
<li><p> The win ratio the second CI uses the standard error presented in
<br /> <br /> Yu RX, Ganju J. (2022) &quot;Sample size formula for a win ratio endpoint.&quot; Statistics in Medicine 41.6: 950-63. <a href="doi:10.1002/sim.9297">doi:10.1002/sim.9297</a>.
</p>
</li>
<li><p> The Goodman Kruskal's <code>gamma</code> and its CI match those in <code>DescTools::GoodmanKruskalGamma()</code> and are based on
<br /> <br /> Agresti A. (2002) Categorical Data Analysis. John Wiley &amp; Sons, pp. 57-59. <a href="doi:10.1002/0471249688">doi:10.1002/0471249688</a>.
<br /> <br /> Brown MB, Benedetti JK. (1977) &quot;Sampling Behavior of Tests for Correlation in Two-Way Contingency Tables.&quot; Journal of the American Statistical Association 72, 309-315. <a href="doi:10.1080/01621459.1977.10480995">doi:10.1080/01621459.1977.10480995</a>.
<br /> <br /> Goodman LA, Kruskal WH. (1954) &quot;Measures of association for cross classifications.&quot; Journal of the American Statistical Association 49, 732-764. <a href="doi:10.1080/01621459.1954.10501231">doi:10.1080/01621459.1954.10501231</a>.
<br /> <br /> Goodman LA, Kruskal WH. (1963) &quot;Measures of association for cross classifications III: Approximate sampling theory.&quot; Journal of the American Statistical Association 58, 310-364. <a href="doi:10.1080/01621459.1963.10500850">doi:10.1080/01621459.1963.10500850</a>.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+calcWINS">calcWINS()</a></code>, <code><a href="#topic+calcWINS.hce">calcWINS.hce()</a></code>, <code><a href="#topic+calcWINS.formula">calcWINS.formula()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>calcWINS(x = COVID19b, AVAL = "GROUP", TRTP = "TRTP", ref = "Placebo")
</code></pre>

<hr>
<h2 id='calcWINS.formula'>Win statistics calculation using formula syntax</h2><span id='topic+calcWINS.formula'></span>

<h3>Description</h3>

<p>Win statistics calculation using formula syntax
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'formula'
calcWINS(x, data, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calcWINS.formula_+3A_x">x</code></td>
<td>
<p>an object of class formula.</p>
</td></tr>
<tr><td><code id="calcWINS.formula_+3A_data">data</code></td>
<td>
<p>a data frame.</p>
</td></tr>
<tr><td><code id="calcWINS.formula_+3A_...">...</code></td>
<td>
<p>additional parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list containing win statistics and their confidence intervals. It contains the following named data frames:
</p>

<ul>
<li><p> summary a data frame containing number of wins, losses, and ties of the active treatment group and the overall number of comparisons.
</p>
</li>
<li><p> WP a data frame containing the win probability and its confidence interval.
</p>
</li>
<li><p> NetBenefit a data frame containing the net benefit and its confidence interval. This is just a <code style="white-space: pre;">&#8288;2x-1&#8288;</code> transformation of WP and its CI.
</p>
</li>
<li><p> WO a data frame containing the win odds and its confidence interval.
</p>
</li>
<li><p> WR1 a data frame containing the win ratio and its confidence interval, using the transformed standard error of the <code>gamma</code> statistic.
</p>
</li>
<li><p> WR2 a data frame containing the win ratio and its confidence interval, using the standard error calculated using <code>Pties</code>.
</p>
</li>
<li><p> gamma a data frame containing Goodman Kruskal's <code>gamma</code> and its confidence interval.
</p>
</li>
<li><p> SE a data frame containing standard errors used to calculated the Confidence intervals for win statistics.
</p>
</li></ul>



<h3>References</h3>

<p>The theory of win statistics is covered in the following papers.
</p>

<ul>
<li><p> For the win proportion CI calculation see
<br /> <br /> Gasparyan SB et al. (2021) &quot;Adjusted win ratio with stratification: calculation methods and interpretation.&quot; Statistical Methods in Medical Research 30.2: 580-611. <a href="doi:10.1177/0962280220942558">doi:10.1177/0962280220942558</a>.
</p>
</li>
<li><p> The win odds CI is calculated using the formula in
<br /> <br /> Gasparyan SB et al. (2021) &quot;Power and sample size calculation for the win odds test: application to an ordinal endpoint in COVID-19 trials.&quot; Journal of Biopharmaceutical Statistics 31.6: 765-787. <a href="doi:10.1080/10543406.2021.1968893">doi:10.1080/10543406.2021.1968893</a>.
</p>
</li>
<li><p> The win ratio the first CI uses the standard error derived from the standard error of the <code>gamma</code> statistic presented in
<br /> <br /> Gasparyan SB, Kowalewski EK, Buenconsejo J, Koch GG. (2023) “Hierarchical Composite Endpoints in COVID-19: The DARE-19 Trial.” In Case Studies in Innovative Clinical Trials, Chapter 7, 95–148. Chapman; Hall/CRC. <a href="doi:10.1201/9781003288640-7">doi:10.1201/9781003288640-7</a>.
</p>
</li>
<li><p> The win ratio the second CI uses the standard error presented in
<br /> <br /> Yu RX, Ganju J. (2022) &quot;Sample size formula for a win ratio endpoint.&quot; Statistics in Medicine 41.6: 950-63. <a href="doi:10.1002/sim.9297">doi:10.1002/sim.9297</a>.
</p>
</li>
<li><p> The Goodman Kruskal's <code>gamma</code> and its CI match those in <code>DescTools::GoodmanKruskalGamma()</code> and are based on
<br /> <br /> Agresti A. (2002) Categorical Data Analysis. John Wiley &amp; Sons, pp. 57-59. <a href="doi:10.1002/0471249688">doi:10.1002/0471249688</a>.
<br /> <br /> Brown MB, Benedetti JK. (1977) &quot;Sampling Behavior of Tests for Correlation in Two-Way Contingency Tables.&quot; Journal of the American Statistical Association 72, 309-315. <a href="doi:10.1080/01621459.1977.10480995">doi:10.1080/01621459.1977.10480995</a>.
<br /> <br /> Goodman LA, Kruskal WH. (1954) &quot;Measures of association for cross classifications.&quot; Journal of the American Statistical Association 49, 732-764. <a href="doi:10.1080/01621459.1954.10501231">doi:10.1080/01621459.1954.10501231</a>.
<br /> <br /> Goodman LA, Kruskal WH. (1963) &quot;Measures of association for cross classifications III: Approximate sampling theory.&quot; Journal of the American Statistical Association 58, 310-364. <a href="doi:10.1080/01621459.1963.10500850">doi:10.1080/01621459.1963.10500850</a>.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+calcWINS">calcWINS()</a></code>, <code><a href="#topic+calcWINS.hce">calcWINS.hce()</a></code>, <code><a href="#topic+calcWINS.data.frame">calcWINS.data.frame()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example 1
calcWINS(x = GROUP ~ TRTP, data = COVID19b)
# Example 2
calcWINS(x = GROUP ~ TRTP, data = COVID19, ref = "Placebo", alpha = 0.01, WOnull = 1.2)
</code></pre>

<hr>
<h2 id='calcWINS.hce'>Win statistics calculation for <code>hce</code> objects</h2><span id='topic+calcWINS.hce'></span>

<h3>Description</h3>

<p>Win statistics calculation for <code>hce</code> objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'hce'
calcWINS(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calcWINS.hce_+3A_x">x</code></td>
<td>
<p>an <code>hce</code> object.</p>
</td></tr>
<tr><td><code id="calcWINS.hce_+3A_...">...</code></td>
<td>
<p>additional parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list containing win statistics and their confidence intervals. It contains the following named data frames:
</p>

<ul>
<li><p> summary a data frame containing number of wins, losses, and ties of the active treatment group and the overall number of comparisons.
</p>
</li>
<li><p> WP a data frame containing the win probability and its confidence interval.
</p>
</li>
<li><p> NetBenefit a data frame containing the net benefit and its confidence interval. This is just a <code style="white-space: pre;">&#8288;2x-1&#8288;</code> transformation of WP and its CI.
</p>
</li>
<li><p> WO a data frame containing the win odds and its confidence interval.
</p>
</li>
<li><p> WR1 a data frame containing the win ratio and its confidence interval, using the transformed standard error of the <code>gamma</code> statistic.
</p>
</li>
<li><p> WR2 a data frame containing the win ratio and its confidence interval, using the standard error calculated using <code>Pties</code>.
</p>
</li>
<li><p> gamma a data frame containing Goodman Kruskal's <code>gamma</code> and its confidence interval.
</p>
</li>
<li><p> SE a data frame containing standard errors used to calculated the Confidence intervals for win statistics.
</p>
</li></ul>



<h3>References</h3>

<p>The theory of win statistics is covered in the following papers.
</p>

<ul>
<li><p> For the win proportion CI calculation see
<br /> <br /> Gasparyan SB et al. (2021) &quot;Adjusted win ratio with stratification: calculation methods and interpretation.&quot; Statistical Methods in Medical Research 30.2: 580-611. <a href="doi:10.1177/0962280220942558">doi:10.1177/0962280220942558</a>.
</p>
</li>
<li><p> The win odds CI is calculated using the formula in
<br /> <br /> Gasparyan SB et al. (2021) &quot;Power and sample size calculation for the win odds test: application to an ordinal endpoint in COVID-19 trials.&quot; Journal of Biopharmaceutical Statistics 31.6: 765-787. <a href="doi:10.1080/10543406.2021.1968893">doi:10.1080/10543406.2021.1968893</a>.
</p>
</li>
<li><p> The win ratio the first CI uses the standard error derived from the standard error of the <code>gamma</code> statistic presented in
<br /> <br /> Gasparyan SB, Kowalewski EK, Buenconsejo J, Koch GG. (2023) “Hierarchical Composite Endpoints in COVID-19: The DARE-19 Trial.” In Case Studies in Innovative Clinical Trials, Chapter 7, 95–148. Chapman; Hall/CRC. <a href="doi:10.1201/9781003288640-7">doi:10.1201/9781003288640-7</a>.
</p>
</li>
<li><p> The win ratio the second CI uses the standard error presented in
<br /> <br /> Yu RX, Ganju J. (2022) &quot;Sample size formula for a win ratio endpoint.&quot; Statistics in Medicine 41.6: 950-63. <a href="doi:10.1002/sim.9297">doi:10.1002/sim.9297</a>.
</p>
</li>
<li><p> The Goodman Kruskal's <code>gamma</code> and its CI match those in <code>DescTools::GoodmanKruskalGamma()</code> and are based on
<br /> <br /> Agresti A. (2002) Categorical Data Analysis. John Wiley &amp; Sons, pp. 57-59. <a href="doi:10.1002/0471249688">doi:10.1002/0471249688</a>.
<br /> <br /> Brown MB, Benedetti JK. (1977) &quot;Sampling Behavior of Tests for Correlation in Two-Way Contingency Tables.&quot; Journal of the American Statistical Association 72, 309-315. <a href="doi:10.1080/01621459.1977.10480995">doi:10.1080/01621459.1977.10480995</a>.
<br /> <br /> Goodman LA, Kruskal WH. (1954) &quot;Measures of association for cross classifications.&quot; Journal of the American Statistical Association 49, 732-764. <a href="doi:10.1080/01621459.1954.10501231">doi:10.1080/01621459.1954.10501231</a>.
<br /> <br /> Goodman LA, Kruskal WH. (1963) &quot;Measures of association for cross classifications III: Approximate sampling theory.&quot; Journal of the American Statistical Association 58, 310-364. <a href="doi:10.1080/01621459.1963.10500850">doi:10.1080/01621459.1963.10500850</a>.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+calcWINS">calcWINS()</a></code>, <code><a href="#topic+calcWINS.formula">calcWINS.formula()</a></code>, <code><a href="#topic+calcWINS.data.frame">calcWINS.data.frame()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example 1
COVID19HCE &lt;- hce(GROUP = COVID19$GROUP, TRTP = COVID19$TRTP)
calcWINS(COVID19HCE)
# Example 2
COVID19bHCE &lt;- hce(GROUP = COVID19b$GROUP, TRTP = COVID19b$TRTP)
calcWINS(COVID19bHCE, ref = "Placebo", WOnull = 1.1, alpha = 0.01)
</code></pre>

<hr>
<h2 id='calcWO'>A generic function for calculating win odds</h2><span id='topic+calcWO'></span>

<h3>Description</h3>

<p>A generic function for calculating win odds
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calcWO(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calcWO_+3A_x">x</code></td>
<td>
<p>an object used to select a method.</p>
</td></tr>
<tr><td><code id="calcWO_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame containing calculated values.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+calcWO.hce">calcWO.hce()</a></code>, <code><a href="#topic+calcWO.formula">calcWO.formula()</a></code>, <code><a href="#topic+calcWO.data.frame">calcWO.data.frame()</a></code>  methods.
</p>

<hr>
<h2 id='calcWO.data.frame'>Win odds calculation using a data frame</h2><span id='topic+calcWO.data.frame'></span>

<h3>Description</h3>

<p>Win odds calculation using a data frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'data.frame'
calcWO(x, AVAL, TRTP, ref, alpha = 0.05, WOnull = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calcWO.data.frame_+3A_x">x</code></td>
<td>
<p>a data frame containing subject-level data.</p>
</td></tr>
<tr><td><code id="calcWO.data.frame_+3A_aval">AVAL</code></td>
<td>
<p>variable in the data with ordinal analysis values.</p>
</td></tr>
<tr><td><code id="calcWO.data.frame_+3A_trtp">TRTP</code></td>
<td>
<p>the treatment variable in the data.</p>
</td></tr>
<tr><td><code id="calcWO.data.frame_+3A_ref">ref</code></td>
<td>
<p>the reference treatment group.</p>
</td></tr>
<tr><td><code id="calcWO.data.frame_+3A_alpha">alpha</code></td>
<td>
<p>significance level. The default is 0.05.</p>
</td></tr>
<tr><td><code id="calcWO.data.frame_+3A_wonull">WOnull</code></td>
<td>
<p>the null hypothesis. The default is 1.</p>
</td></tr>
<tr><td><code id="calcWO.data.frame_+3A_...">...</code></td>
<td>
<p>additional parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame containing the win odds and its confidence interval. It contains the following columns:
</p>

<ul>
<li><p> WO calculated win odds.
</p>
</li>
<li><p> LCL lower confidence limit.
</p>
</li>
<li><p> UCL upper confidence limit.
</p>
</li>
<li><p> SE standard error of the win odds.
</p>
</li>
<li><p> WOnull win odds of the null hypothesis (specified in the <code>WOnull</code> argument).
</p>
</li>
<li><p> alpha two-sided significance level for calculating the confidence interval (specified in the <code>alpha</code> argument).
</p>
</li>
<li><p> Pvalue p-value associated with testing the null hypothesis.
</p>
</li>
<li><p> WP calculated win probability.
</p>
</li>
<li><p> WP_SE standard error of the win probability.
</p>
</li>
<li><p> WP_SD standard deviation of the win probability, calculated as <code>WP_SE</code> multiplied by <code>sqrt(N)</code>.
</p>
</li>
<li><p> N total number of patients in the analysis.
</p>
</li></ul>



<h3>References</h3>

<p>Gasparyan SB et al. &quot;Adjusted win ratio with stratification: calculation methods and interpretation.&quot; Statistical Methods in Medical Research 30.2 (2021): 580-611. <a href="doi:10.1177/0962280220942558">doi:10.1177/0962280220942558</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+calcWO">calcWO()</a></code>, <code><a href="#topic+calcWO.hce">calcWO.hce()</a></code>, <code><a href="#topic+calcWO.formula">calcWO.formula()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(HCE4)
calcWO(x = HCE4, AVAL = "AVAL", TRTP = "TRTP", ref = "P")
</code></pre>

<hr>
<h2 id='calcWO.formula'>Win odds calculation using formula syntax</h2><span id='topic+calcWO.formula'></span>

<h3>Description</h3>

<p>Win odds calculation using formula syntax
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'formula'
calcWO(x, data, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calcWO.formula_+3A_x">x</code></td>
<td>
<p>an object of class formula.</p>
</td></tr>
<tr><td><code id="calcWO.formula_+3A_data">data</code></td>
<td>
<p>a data frame.</p>
</td></tr>
<tr><td><code id="calcWO.formula_+3A_...">...</code></td>
<td>
<p>additional parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame containing the win odds and its confidence interval. It contains the following columns:
</p>

<ul>
<li><p> WO calculated win odds.
</p>
</li>
<li><p> LCL lower confidence limit.
</p>
</li>
<li><p> UCL upper confidence limit.
</p>
</li>
<li><p> SE standard error of the win odds.
</p>
</li>
<li><p> WOnull win odds of the null hypothesis (specified in the <code>WOnull</code> argument).
</p>
</li>
<li><p> alpha two-sided significance level for calculating the confidence interval (specified in the <code>alpha</code> argument).
</p>
</li>
<li><p> Pvalue p-value associated with testing the null hypothesis.
</p>
</li>
<li><p> WP calculated win probability.
</p>
</li>
<li><p> WP_SE standard error of the win probability.
</p>
</li>
<li><p> WP_SD standard deviation of the win probability, calculated as <code>WP_SE</code> multiplied by <code>sqrt(N)</code>.
</p>
</li>
<li><p> N total number of patients in the analysis.
</p>
</li>
<li><p> formula returning the specified formula in the <code>x</code> argument.
</p>
</li>
<li><p> ref showing how the reference group was selected. Can be modifying by specifying the <code>ref</code> argument.
</p>
</li></ul>



<h3>References</h3>

<p>Gasparyan SB et al. &quot;Adjusted win ratio with stratification: calculation methods and interpretation.&quot; Statistical Methods in Medical Research 30.2 (2021): 580-611. <a href="doi:10.1177/0962280220942558">doi:10.1177/0962280220942558</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+calcWO">calcWO()</a></code>, <code><a href="#topic+calcWO.hce">calcWO.hce()</a></code>, <code><a href="#topic+calcWO.data.frame">calcWO.data.frame()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Example 1
data(HCE1)
calcWO(AVAL ~ TRTP, data = HCE1)

#Example 2
calcWO(data = COVID19, GROUP ~ TRTP, ref = "Placebo")

</code></pre>

<hr>
<h2 id='calcWO.hce'>Win odds calculation for <code>hce</code> objects</h2><span id='topic+calcWO.hce'></span>

<h3>Description</h3>

<p>Win odds calculation for <code>hce</code> objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'hce'
calcWO(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calcWO.hce_+3A_x">x</code></td>
<td>
<p>an <code>hce</code> object.</p>
</td></tr>
<tr><td><code id="calcWO.hce_+3A_...">...</code></td>
<td>
<p>additional parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame containing the win odds and its confidence interval. It contains the following columns:
</p>

<ul>
<li><p> WO calculated win odds.
</p>
</li>
<li><p> LCL lower confidence limit.
</p>
</li>
<li><p> UCL upper confidence limit.
</p>
</li>
<li><p> SE standard error of the win odds.
</p>
</li>
<li><p> WOnull win odds of the null hypothesis (specified in the <code>WOnull</code> argument).
</p>
</li>
<li><p> alpha two-sided significance level for calculating the confidence interval (specified in the <code>alpha</code> argument).
</p>
</li>
<li><p> Pvalue p-value associated with testing the null hypothesis.
</p>
</li>
<li><p> WP calculated win probability.
</p>
</li>
<li><p> WP_SE standard error of the win probability.
</p>
</li>
<li><p> WP_SD standard deviation of the win probability, calculated as <code>WP_SE</code> multiplied by <code>sqrt(N)</code>.
</p>
</li>
<li><p> N total number of patients in the analysis.
</p>
</li></ul>



<h3>References</h3>

<p>Gasparyan SB et al. &quot;Adjusted win ratio with stratification: calculation methods and interpretation.&quot; Statistical Methods in Medical Research 30.2 (2021): 580-611. <a href="doi:10.1177/0962280220942558">doi:10.1177/0962280220942558</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+calcWO">calcWO()</a></code>, <code><a href="#topic+calcWO.formula">calcWO.formula()</a></code>, <code><a href="#topic+calcWO.data.frame">calcWO.data.frame()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>Rates_A &lt;- c(1, 1.5) 
Rates_P &lt;- c(2, 2) 
dat &lt;- simHCE(n = 500, TTE_A = Rates_A, TTE_P = Rates_P, CM_A = 1.25, CM_P = 1)
calcWO(dat)
calcWO(dat, ref = "A", WOnull = 1, alpha = 0.01)
</code></pre>

<hr>
<h2 id='COVID19'>COVID-19 ordinal scale dataset (full report).</h2><span id='topic+COVID19'></span>

<h3>Description</h3>

<p>A dataset with COVID-19 ordinal scale outcomes for 1062 patients.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>COVID19
</code></pre>


<h3>Format</h3>

<p>a data frame with 1062 rows and 2 variables:
</p>

<dl>
<dt>GROUP</dt><dd><p>type of the event, ordinal outcomes 1-8, where a higher value means a better outcome</p>
</dd>
<dt>TRTP</dt><dd><p>treatment values, A Active or P Placebo, character</p>
</dd>
</dl>



<h3>Source</h3>

<p>Beigel JH et al. &quot;Remdesivir for the treatment of Covid-19-final report.&quot; New England Journal of Medicine 383.19 (2020): 1813-1836. <a href="doi:10.1056/NEJMoa2007764">doi:10.1056/NEJMoa2007764</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Frequencies
table(COVID19)
mosaicplot(table(COVID19), col = c(1, 8, 6, 2, 4, 5, 3, 7), 
xlab = "Treatment", ylab = "Ordinal Scale", main = "COVID-19 ordinal scale")
# Convert to an hce object
COVID19HCE &lt;- hce(GROUP = COVID19$GROUP, TRTP = COVID19$TRTP)
# Summary wins, losses, and ties with win odds
summaryWO(COVID19HCE, ref = "Placebo")
</code></pre>

<hr>
<h2 id='COVID19b'>COVID-19 ordinal scale dataset (preliminary report).</h2><span id='topic+COVID19b'></span>

<h3>Description</h3>

<p>A dataset with COVID-19 ordinal scale outcomes for 844 patients.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>COVID19b
</code></pre>


<h3>Format</h3>

<p>a data frame with 844 rows and 2 variables:
</p>

<dl>
<dt>GROUP</dt><dd><p>type of the event, ordinal outcomes 1-8, where a higher value means a better outcome</p>
</dd>
<dt>TRTP</dt><dd><p>treatment values, Active or Placebo, character</p>
</dd>
</dl>



<h3>Source</h3>

<p>Beigel JH et al. &quot;Remdesivir for the treatment of Covid-19-final report.&quot; New England Journal of Medicine 383.19 (2020): 1813-1836. <a href="doi:10.1056/NEJMoa2007764">doi:10.1056/NEJMoa2007764</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Frequencies
table(COVID19b)
mosaicplot(table(COVID19b), col = c(1, 8, 6, 2, 4, 5, 3, 7), 
xlab = "Treatment", ylab = "Ordinal Scale", main = "COVID-19 ordinal scale")
# Calculate win statistics
calcWINS(x = COVID19b, AVAL = "GROUP", TRTP = "TRTP", ref = "Placebo")
</code></pre>

<hr>
<h2 id='hce'>Helper function for <code>hce</code> objects</h2><span id='topic+hce'></span>

<h3>Description</h3>

<p>Helper function for <code>hce</code> objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hce(
  GROUP = character(),
  TRTP = character(),
  AVAL0 = 0,
  ORD = sort(unique(GROUP))
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hce_+3A_group">GROUP</code></td>
<td>
<p>a character vector of the same length as <code>AVAL</code> containing events.</p>
</td></tr>
<tr><td><code id="hce_+3A_trtp">TRTP</code></td>
<td>
<p>a character vector of the same length as <code>AVAL</code> containing assigned treatment groups.</p>
</td></tr>
<tr><td><code id="hce_+3A_aval0">AVAL0</code></td>
<td>
<p>a numeric vector of analysis values within each category. The default is 0.</p>
</td></tr>
<tr><td><code id="hce_+3A_ord">ORD</code></td>
<td>
<p>a character vector containing ordered unique values of the <code>GROUP</code> variable for determining the hierarchy of events.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class <code>hce</code>. Its is a subject-level data frame (each row corresponds to one subject), containing the following columns:
</p>

<ul>
<li><p> SUBJID subject ID.
</p>
</li>
<li><p> GROUP a character vector specifying the type of the outcome the patient experienced - either a TTE (time-to-event) or C (continuous).
</p>
</li>
<li><p> GROUPN a numeric vector version of the <code>GROUP</code> column.
</p>
</li>
<li><p> AVAL0 original analysis values - time of the time-to-event outcomes or the continuous outcome.
</p>
</li>
<li><p> AVAL derived analysis value <code>AVAL = AVAL0 + GROUPN</code>.
</p>
</li>
<li><p> TRTP assigned treatment groups.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+as_hce">as_hce()</a></code> for coercing to <code>hce</code> objects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example 1
set.seed(2022)
d &lt;- hce(GROUP = sample(x = c("A", "B", "C"), size = 10, replace = TRUE), 
TRTP = rep(c("Active", "Control"), each = 5), 
AVAL0 = c(rnorm(5, mean = 1), rnorm(5)), ORD = c("A", "B", "C"))
calcWO(d, ref = "Control")
</code></pre>

<hr>
<h2 id='HCE1'><code>HCE1</code>, <code>HCE2</code>, <code>HCE3</code>, <code>HCE4</code> datasets for 1000 patients with different treatment effects.</h2><span id='topic+HCE1'></span>

<h3>Description</h3>

<p>A simulated dataset containing the ordinal values and other attributes for 1000 patients.
HCE1
</p>


<h3>Usage</h3>

<pre><code class='language-R'>HCE1
</code></pre>


<h3>Format</h3>

<p>a data frame with 1000 rows and 6 variables:
</p>

<dl>
<dt>SUBJID</dt><dd><p>subject ID, numbers from 1 to 1000</p>
</dd>
<dt>GROUP</dt><dd><p>type of the event, either Time-To-Event (TTE) or Continuous (C), character</p>
</dd>
<dt>GROUPN</dt><dd><p>type of the event, for the ordering of outcomes in the <code>GROUP</code> variable, numeric</p>
</dd>
<dt>AVAL</dt><dd><p><code>AVAL = AVAL0 + GROUPN</code>, ordinal analysis values for the HCE analysis, numeric, but caution NOT to apply numeric operations; will give meaningless results</p>
</dd>
<dt>AVAL0</dt><dd><p>original values for each type of the event, time for TTE outcomes, numeric values for Continuous outcomes, numeric</p>
</dd>
<dt>TRTP</dt><dd><p>treatment values, A Active or P Placebo, character</p>
</dd>
</dl>


<hr>
<h2 id='HCE2'><code>HCE1</code>, <code>HCE2</code>, <code>HCE3</code>, <code>HCE4</code> datasets for 1000 patients with different treatment effects.</h2><span id='topic+HCE2'></span>

<h3>Description</h3>

<p>A simulated dataset containing the ordinal values and other attributes for 1000 patients.
HCE2
</p>


<h3>Usage</h3>

<pre><code class='language-R'>HCE2
</code></pre>


<h3>Format</h3>

<p>a data frame with 1000 rows and 6 variables:
</p>

<dl>
<dt>SUBJID</dt><dd><p>subject ID, numbers from 1 to 1000</p>
</dd>
<dt>GROUP</dt><dd><p>type of the event, either Time-To-Event (TTE) or Continuous (C), character</p>
</dd>
<dt>GROUPN</dt><dd><p>type of the event, for the ordering of outcomes in the <code>GROUP</code> variable, numeric</p>
</dd>
<dt>AVAL</dt><dd><p><code>AVAL = AVAL0 + GROUPN</code>, ordinal analysis values for the HCE analysis, numeric, but caution NOT to apply numeric operations; will give meaningless results</p>
</dd>
<dt>AVAL0</dt><dd><p>original values for each type of the event, time for TTE outcomes, numeric values for Continuous outcomes, numeric</p>
</dd>
<dt>TRTP</dt><dd><p>treatment values, A Active or P Placebo, character</p>
</dd>
</dl>


<hr>
<h2 id='HCE3'><code>HCE1</code>, <code>HCE2</code>, <code>HCE3</code>, <code>HCE4</code> datasets for 1000 patients with different treatment effects.</h2><span id='topic+HCE3'></span>

<h3>Description</h3>

<p>A simulated dataset containing the ordinal values and other attributes for 1000 patients.
HCE3
</p>


<h3>Usage</h3>

<pre><code class='language-R'>HCE3
</code></pre>


<h3>Format</h3>

<p>a data frame with 1000 rows and 6 variables:
</p>

<dl>
<dt>SUBJID</dt><dd><p>subject ID, numbers from 1 to 1000</p>
</dd>
<dt>GROUP</dt><dd><p>type of the event, either Time-To-Event (TTE) or Continuous (C), character</p>
</dd>
<dt>GROUPN</dt><dd><p>type of the event, for the ordering of outcomes in the <code>GROUP</code> variable, numeric</p>
</dd>
<dt>AVAL</dt><dd><p><code>AVAL = AVAL0 + GROUPN</code>, ordinal analysis values for the HCE analysis, numeric, but caution NOT to apply numeric operations; will give meaningless results</p>
</dd>
<dt>AVAL0</dt><dd><p>original values for each type of the event, time for TTE outcomes, numeric values for Continuous outcomes, numeric</p>
</dd>
<dt>TRTP</dt><dd><p>treatment values, A Active or P Placebo, character</p>
</dd>
</dl>


<hr>
<h2 id='HCE4'><code>HCE1</code>, <code>HCE2</code>, <code>HCE3</code>, <code>HCE4</code> datasets for 1000 patients with different treatment effects.</h2><span id='topic+HCE4'></span>

<h3>Description</h3>

<p>A simulated dataset containing the ordinal values and other attributes for 1000 patients.
HCE4
</p>


<h3>Usage</h3>

<pre><code class='language-R'>HCE4
</code></pre>


<h3>Format</h3>

<p>a data frame with 1000 rows and 6 variables:
</p>

<dl>
<dt>SUBJID</dt><dd><p>subject ID, numbers from 1 to 1000</p>
</dd>
<dt>GROUP</dt><dd><p>type of the event, either Time-To-Event (TTE) or Continuous (C), character</p>
</dd>
<dt>GROUPN</dt><dd><p>type of the event, for the ordering of outcomes in the <code>GROUP</code> variable, numeric</p>
</dd>
<dt>AVAL</dt><dd><p><code>AVAL = AVAL0 + GROUPN</code>, ordinal analysis values for the HCE analysis, numeric, but caution NOT to apply numeric operations; will give meaningless results</p>
</dd>
<dt>AVAL0</dt><dd><p>original values for each type of the event, time for TTE outcomes, numeric values for Continuous outcomes, numeric</p>
</dd>
<dt>TRTP</dt><dd><p>treatment values, A Active or P Placebo, character</p>
</dd>
</dl>


<hr>
<h2 id='KHCE'>Kidney Hierarchical Composite Endpoint dataset.</h2><span id='topic+KHCE'></span>

<h3>Description</h3>

<p>A dataset with kidney ordinal scale outcomes of 1500 patients in the <code>ADSL</code> dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>KHCE
</code></pre>


<h3>Format</h3>

<p>a data frame with 1500 rows and 11 variables:
</p>

<dl>
<dt>ID</dt><dd><p>patient identifiers, numeric</p>
</dd>
<dt>TRTPN</dt><dd><p>treatment values, 1 Active or 2 Placebo, numeric</p>
</dd>
<dt>AVAL0</dt><dd><p>original values for each type of the event, time for TTE outcomes 1-6, numeric values for Continuous outcome 7, numeric</p>
</dd>
<dt>AVAL</dt><dd><p><code>AVAL = AVAL0 + GROUPN</code>, ordinal analysis values for the HCE analysis, numeric, but caution NOT to apply numeric operations; will give meaningless results</p>
</dd>
<dt>GROUP</dt><dd><p>name of the event, character</p>
</dd>
<dt>GROUPN</dt><dd><p>ordinal outcomes corresponding to <code>PARAMN</code> values, numeric</p>
</dd>
<dt>PARAMCD</dt><dd><p>coded name of the event, character</p>
</dd>
<dt>PARAMN</dt><dd><p>severity of the event, outcomes 1-7, where a higher value means a better outcome, character</p>
</dd>
<dt>STRATAN</dt><dd><p>strata 1-4, higher value means more severe kidney disease, numeric</p>
</dd>
<dt>EGFRBL</dt><dd><p>Baseline GFR values of patients, numeric</p>
</dd>
<dt>TRTP</dt><dd><p>treatment values, A Active or P Placebo, character</p>
</dd>
<dt>PADY</dt><dd><p>primary analysis day (in years), length of the fixed follow-up, numeric</p>
</dd>
</dl>



<h3>Source</h3>

<p>Heerspink HL et al &quot;Development and validation of a new hierarchical composite endpoint for clinical trials of kidney disease progression.&quot; Journal of the American Society of Nephrology (2023): <a href="doi:10.1681/ASN.0000000000000243">doi:10.1681/ASN.0000000000000243</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Adjusted win odds
res &lt;- regWO(x = KHCE, AVAL = "AVAL", TRTP = "TRTP", COVAR = "STRATAN", ref = "P")
res
</code></pre>

<hr>
<h2 id='minWO'>Minimum detectable or WO for alternative hypothesis for given power (no ties)</h2><span id='topic+minWO'></span>

<h3>Description</h3>

<p>Minimum detectable or WO for alternative hypothesis for given power (no ties)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>minWO(N, power = 0.5, SD = NULL, k = 0.5, alpha = 0.05, WOnull = 1, digits = 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="minWO_+3A_n">N</code></td>
<td>
<p>a numeric vector of sample size values (two arms combined).</p>
</td></tr>
<tr><td><code id="minWO_+3A_power">power</code></td>
<td>
<p>the given power. The default is 0.5 corresponding to the minimum detectable win odds. A numeric vector of length 1.</p>
</td></tr>
<tr><td><code id="minWO_+3A_sd">SD</code></td>
<td>
<p>assumed standard deviation of the win proportion. By default uses the conservative SD. A numeric vector of length 1.</p>
</td></tr>
<tr><td><code id="minWO_+3A_k">k</code></td>
<td>
<p>proportion of active group in the overall sample size. Default is 0.5 (balanced randomization). A numeric vector of length 1.</p>
</td></tr>
<tr><td><code id="minWO_+3A_alpha">alpha</code></td>
<td>
<p>the significance level for the 2-sided test. Default is 0.05. A numeric vector of length 1.</p>
</td></tr>
<tr><td><code id="minWO_+3A_wonull">WOnull</code></td>
<td>
<p>the win odds value of the null hypothesis (default is 1). A numeric vector of length 1.</p>
</td></tr>
<tr><td><code id="minWO_+3A_digits">digits</code></td>
<td>
<p>precision to use for reporting calculated win odds.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame containing the calculated WO with input values.
</p>


<h3>References</h3>

<p>Gasparyan SB et al. (2021) &quot;Power and sample size calculation for the win odds test: application to an ordinal endpoint in COVID-19 trials.&quot; Journal of Biopharmaceutical Statistics 31.6: 765-787. <a href="doi:10.1080/10543406.2021.1968893">doi:10.1080/10543406.2021.1968893</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+powerWO">powerWO()</a></code>, <code><a href="#topic+sizeWO">sizeWO()</a></code>  for WO power and sample size calculation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>minWO(N = 100, digits = 5)
minWO(N = 1200, power = 0.9)
minWO(N = 1200, power = 0.9, k = 0.75)
</code></pre>

<hr>
<h2 id='plot.hce_results'>A print method for <code>hce_results </code> objects</h2><span id='topic+plot.hce_results'></span>

<h3>Description</h3>

<p>A print method for <code>hce_results </code> objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'hce_results'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.hce_results_+3A_x">x</code></td>
<td>
<p>an object of class <code>hce_results</code>.</p>
</td></tr>
<tr><td><code id="plot.hce_results_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed to <code><a href="base.html#topic+plot">base::plot()</a></code> function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>no return value, called for plotting.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>WO &lt;- minWO(N = 100:1000)
plot(WO)
POW &lt;- powerWO(N = 100:1000, WO = 1.2)
plot(POW, ylim = c(0, 1))
</code></pre>

<hr>
<h2 id='powerWO'>Power calculation for the win odds test (no ties)</h2><span id='topic+powerWO'></span>

<h3>Description</h3>

<p>Power calculation for the win odds test (no ties)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>powerWO(N, WO, SD = NULL, k = 0.5, alpha = 0.05, WOnull = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="powerWO_+3A_n">N</code></td>
<td>
<p>a numeric vector of sample size values.</p>
</td></tr>
<tr><td><code id="powerWO_+3A_wo">WO</code></td>
<td>
<p>the given win odds for the alternative hypothesis. A numeric vector of length 1.</p>
</td></tr>
<tr><td><code id="powerWO_+3A_sd">SD</code></td>
<td>
<p>assumed standard deviation of the win proportion. By default uses the conservative SD. A numeric vector of length 1.</p>
</td></tr>
<tr><td><code id="powerWO_+3A_k">k</code></td>
<td>
<p>proportion of active group in the overall sample size. Default is 0.5 (balanced randomization). A numeric vector of length 1.</p>
</td></tr>
<tr><td><code id="powerWO_+3A_alpha">alpha</code></td>
<td>
<p>the significance level for the 2-sided test. Default is 0.05. A numeric vector of length 1.</p>
</td></tr>
<tr><td><code id="powerWO_+3A_wonull">WOnull</code></td>
<td>
<p>the win odds value of the null hypothesis (default is 1). A numeric vector of length 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame containing the calculated power with input values.
</p>


<h3>References</h3>

<p>Gasparyan SB et al. (2021) &quot;Power and sample size calculation for the win odds test: application to an ordinal endpoint in COVID-19 trials.&quot; Journal of Biopharmaceutical Statistics 31.6 : 765-787. <a href="doi:10.1080/10543406.2021.1968893">doi:10.1080/10543406.2021.1968893</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sizeWO">sizeWO()</a></code>, <code><a href="#topic+minWO">minWO()</a></code> for WO sample size or minimum detectable WO calculation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example 1- Use the default standard deviation
powerWO(N = 1000, WO = 1.2)
powerWO(N = seq(500, 1500, 100), WO = 1.2)
# Example 2 - Use data-driven win odds and standard deviation from the COVID19 dataset
res &lt;- calcWO(x = COVID19, AVAL = "GROUP", TRTP = "TRTP", ref = "Placebo")
print(res)
powerWO(N = 500, WO = res$WO, SD = res$SD_WP)
powerWO(N = 500, WO = res$WO) # power with the default standard deviation for the win proportion.
# Example 3 - Non-balanced 3:1 randomization
powerWO(N = 1000, WO = 1.2, k = 0.75)
</code></pre>

<hr>
<h2 id='print.hce_results'>A print method for <code>hce_results</code> objects</h2><span id='topic+print.hce_results'></span>

<h3>Description</h3>

<p>A print method for <code>hce_results</code> objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'hce_results'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.hce_results_+3A_x">x</code></td>
<td>
<p>an object of class <code>hce_results</code>.</p>
</td></tr>
<tr><td><code id="print.hce_results_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed to <code><a href="base.html#topic+print">base::print()</a></code> function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>no return value, called for printing.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>print(powerWO(N = 1000, WO = 1.2))
</code></pre>

<hr>
<h2 id='propWINS'>Proportion of wins/losses/ties given the win odds and the win ratio</h2><span id='topic+propWINS'></span>

<h3>Description</h3>

<p>Proportion of wins/losses/ties given the win odds and the win ratio
</p>


<h3>Usage</h3>

<pre><code class='language-R'>propWINS(WO, WR, Overall = 1, alpha = NULL, N = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="propWINS_+3A_wo">WO</code></td>
<td>
<p>win odds.</p>
</td></tr>
<tr><td><code id="propWINS_+3A_wr">WR</code></td>
<td>
<p>win ratio.</p>
</td></tr>
<tr><td><code id="propWINS_+3A_overall">Overall</code></td>
<td>
<p>number of comparisons, the sample size of
the active treatment multiplied by the sample size of the placebo.
The default is 1, hence gives the proportion.</p>
</td></tr>
<tr><td><code id="propWINS_+3A_alpha">alpha</code></td>
<td>
<p>significance level for the win ratio confidence interval. The default is <code>NULL</code> hence the confidence interval is not produced.</p>
</td></tr>
<tr><td><code id="propWINS_+3A_n">N</code></td>
<td>
<p>the combined sample size of two treatment groups. The default is <code>NULL</code>. If <code>alpha</code> is specified then either <code>N</code> should be specified or <code>Overall &gt; 1</code>.
For given <code>Overall</code>, the pooled sample size is calculated as <code>N = 2*sqrt(Overall)</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><img src="../help/figures/propWINS.png" alt="Calculation formula" />
</p>


<h3>Value</h3>

<p>a data frame with a number (or proportion if <code>Overall = 1</code>) of wins/losses/ties. If <code>alpha</code> is specified returns also <code>WR</code> confidence interval.
</p>


<h3>References</h3>


<ul>
<li><p> For the relationship between win odds and win ratio see
<br /> <br /> Gasparyan SB et al. &quot;Hierarchical Composite Endpoints in COVID-19: The DARE-19 Trial&quot;. Case Studies in Innovative Clinical Trials, Chapter 7 (2023): 95-148. Chapman and Hall/CRC. <a href="doi:10.1201/9781003288640-7">doi:10.1201/9781003288640-7</a>.
</p>
</li>
<li><p> The win ratio CI uses the standard error presented in
<br /> <br /> Yu RX, Ganju J. (2022) &quot;Sample size formula for a win ratio endpoint.&quot; Statistics in Medicine 41.6: 950-63. <a href="doi:10.1002/sim.9297">doi:10.1002/sim.9297</a>.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># Example 1
propWINS(WR = 2, WO = 1.5)
# Example 2 - Back-calculation 
COVID19HCE &lt;- hce(GROUP = COVID19$GROUP, TRTP = COVID19$TRTP)
res &lt;- calcWINS(COVID19HCE)
WR &lt;- res$WR1$WR
WO &lt;- res$WO$WO
Overall &lt;- res$summary$TOTAL
propWINS(WR = WR, WO = WO, Overall = Overall)
## Verify 
res$summary
# Example 3 - Confidence interval
 propWINS(WR = 1.4, WO = 1.3, alpha = 0.05, Overall = 2500)
 propWINS(WR = 2, WO = 1.5, alpha = 0.01, N = 500)
</code></pre>

<hr>
<h2 id='regWO'>A generic function for win odds regression</h2><span id='topic+regWO'></span>

<h3>Description</h3>

<p>A generic function for win odds regression
</p>


<h3>Usage</h3>

<pre><code class='language-R'>regWO(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="regWO_+3A_x">x</code></td>
<td>
<p>an object used to select a method.</p>
</td></tr>
<tr><td><code id="regWO_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame containing calculated values.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+regWO.data.frame">regWO.data.frame()</a></code>  methods.
</p>

<hr>
<h2 id='regWO.data.frame'>Win odds regression using a data frame</h2><span id='topic+regWO.data.frame'></span>

<h3>Description</h3>

<p>Win odds regression using a data frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'data.frame'
regWO(x, AVAL, TRTP, COVAR, ref, alpha = 0.05, WOnull = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="regWO.data.frame_+3A_x">x</code></td>
<td>
<p>a data frame containing subject-level data.</p>
</td></tr>
<tr><td><code id="regWO.data.frame_+3A_aval">AVAL</code></td>
<td>
<p>variable in the data with ordinal analysis values.</p>
</td></tr>
<tr><td><code id="regWO.data.frame_+3A_trtp">TRTP</code></td>
<td>
<p>the treatment variable in the data.</p>
</td></tr>
<tr><td><code id="regWO.data.frame_+3A_covar">COVAR</code></td>
<td>
<p>a numeric covariate.</p>
</td></tr>
<tr><td><code id="regWO.data.frame_+3A_ref">ref</code></td>
<td>
<p>the reference treatment group.</p>
</td></tr>
<tr><td><code id="regWO.data.frame_+3A_alpha">alpha</code></td>
<td>
<p>significance level. The default is 0.05.</p>
</td></tr>
<tr><td><code id="regWO.data.frame_+3A_wonull">WOnull</code></td>
<td>
<p>the null hypothesis. The default is 1.</p>
</td></tr>
<tr><td><code id="regWO.data.frame_+3A_...">...</code></td>
<td>
<p>additional parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame containing the win odds and its confidence interval.
</p>

<ul>
<li><p> WO_beta adjusted win odds.
</p>
</li>
<li><p> LCL lower confidence limit for adjusted WO.
</p>
</li>
<li><p> UCL upper confidence limit for adjusted WO.
</p>
</li>
<li><p> SE standard error of the adjusted win odds.
</p>
</li>
<li><p> WOnull win odds of the null hypothesis (specified in the <code>WOnull</code> argument).
</p>
</li>
<li><p> alpha two-sided significance level for calculating the confidence interval (specified in the <code>alpha</code> argument).
</p>
</li>
<li><p> Pvalue p-value associated with testing the null hypothesis.
</p>
</li>
<li><p> N total number of patients in the analysis.
</p>
</li>
<li><p> beta adjusted win probability.
</p>
</li>
<li><p> SE_beta standard error for the adjusted win probability.
</p>
</li>
<li><p> SD_beta standard deviation for the adjusted win probability.
</p>
</li>
<li><p> WP (non-adjusted) win probability.
</p>
</li>
<li><p> SE_WP standard error of the non-adjusted win probability.
</p>
</li>
<li><p> SD_WP standard deviation of the non-adjusted win probability.
</p>
</li>
<li><p> WO non-adjusted win odds.
</p>
</li>
<li><p> COVAR_MEAN_DIFF mean difference between two treatment groups of the numeric covariate.
</p>
</li>
<li><p> COVAR_VAR sum of variances of two treatment groups of the numeric covariate.
</p>
</li>
<li><p> COVAR_COV covariance between the response and the numeric covariate.
</p>
</li></ul>



<h3>References</h3>

<p>Gasparyan SB et al. (2021) &quot;Adjusted win ratio with stratification: calculation methods and interpretation.&quot; Statistical Methods in Medical Research 30.2: 580-611. <a href="doi:10.1177/0962280220942558">doi:10.1177/0962280220942558</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+regWO">regWO()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># A baseline covariate that is highly correlated with the outcome
set.seed(2023)
dat &lt;- COVID19
n &lt;- nrow(dat)
dat$Severity &lt;- ifelse(dat$GROUP &gt; 4, rnorm(n, 0), rnorm(n, 100))
tapply(dat$Severity, dat$TRTP, mean)
regWO(x = dat, AVAL = "GROUP", TRTP = "TRTP", COVAR = "Severity", ref = "Placebo")
# Without adjustment
calcWO(x = dat, AVAL = "GROUP", TRTP = "TRTP", ref = "Placebo")
</code></pre>

<hr>
<h2 id='simHCE'>Simulate <code>hce</code> object with given event rates of time-to-event outcomes (Weibull), mean and SD of the continuous outcome (normal or log-normal) by treatment group</h2><span id='topic+simHCE'></span>

<h3>Description</h3>

<p>Simulate <code>hce</code> object with given event rates of time-to-event outcomes (Weibull), mean and SD of the continuous outcome (normal or log-normal) by treatment group
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simHCE(
  n,
  n0 = n,
  TTE_A,
  TTE_P,
  CM_A,
  CM_P,
  CSD_A = 1,
  CSD_P = 1,
  fixedfy = 1,
  yeardays = 360,
  pat = 100,
  shape = 1,
  logC = FALSE,
  seed = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simHCE_+3A_n">n</code></td>
<td>
<p>sample size in the active treatment group.</p>
</td></tr>
<tr><td><code id="simHCE_+3A_n0">n0</code></td>
<td>
<p>sample size in the placebo group.</p>
</td></tr>
<tr><td><code id="simHCE_+3A_tte_a">TTE_A</code></td>
<td>
<p>event rates per year in the active group for the time-to-event outcomes.</p>
</td></tr>
<tr><td><code id="simHCE_+3A_tte_p">TTE_P</code></td>
<td>
<p>event rates per year in the placebo group for the time-to-event outcomes. Should have the same length as <code>TTE_A</code>.</p>
</td></tr>
<tr><td><code id="simHCE_+3A_cm_a">CM_A</code></td>
<td>
<p>mean value for the continuous outcome of the active group.</p>
</td></tr>
<tr><td><code id="simHCE_+3A_cm_p">CM_P</code></td>
<td>
<p>mean value for the continuous outcome of the placebo group.</p>
</td></tr>
<tr><td><code id="simHCE_+3A_csd_a">CSD_A</code></td>
<td>
<p>standard deviation for the continuous outcome of the active group.</p>
</td></tr>
<tr><td><code id="simHCE_+3A_csd_p">CSD_P</code></td>
<td>
<p>standard deviation for the continuous outcome of the placebo group.</p>
</td></tr>
<tr><td><code id="simHCE_+3A_fixedfy">fixedfy</code></td>
<td>
<p>length of follow-up in years.</p>
</td></tr>
<tr><td><code id="simHCE_+3A_yeardays">yeardays</code></td>
<td>
<p>number of days in a year.</p>
</td></tr>
<tr><td><code id="simHCE_+3A_pat">pat</code></td>
<td>
<p>scale of provided event rates (per <code>pat</code>-years).</p>
</td></tr>
<tr><td><code id="simHCE_+3A_shape">shape</code></td>
<td>
<p>shape of the Weibull distribution for time-to-event outcomes. Default is exponential distribution with <code>shape = 1</code>.</p>
</td></tr>
<tr><td><code id="simHCE_+3A_logc">logC</code></td>
<td>
<p>logical, whether to use log-normal distribution for the continuous outcome.</p>
</td></tr>
<tr><td><code id="simHCE_+3A_seed">seed</code></td>
<td>
<p>the seed for generating random numbers.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class <code>hce</code> containing the following columns:
</p>

<ul>
<li><p> ID subject identifier.
</p>
</li>
<li><p> TRTP planned treatment group - &quot;A&quot; for active, &quot;P&quot; for Placebo.
</p>
</li>
<li><p> GROUP type of the outcome, either &quot;TTE&quot; for time-to-event outcomes or &quot;C&quot; for continuous.
Only one continuous outcome is possible, but no restriction on the number of &quot;TTE&quot; outcomes.
</p>
</li>
<li><p> GROUPN order of outcomes in <code>GROUP</code>, with a higher value signifying a better outcome.
</p>
</li>
<li><p> AVALT the timing of the time-to-event outcomes.
</p>
</li>
<li><p> AVAL0 numeric values of the continuous outcome and the timing of &quot;TTE&quot; outcomes.
</p>
</li>
<li><p> AVAL analysis values derived as <code>AVAL0 + GROUPN</code>. For the continuous outcome the values of <code>AVAL0</code> are shifted to start always from 0.
</p>
</li>
<li><p> seed the seed of the random sample. If not specified in <code>seed</code> argument will be selected based on system time.
</p>
</li>
<li><p> PADY primary analysis day, the length of fixed follow-up in days calculated as <code>yeardays</code> multiplied by <code>fixedfy</code>.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+hce">hce()</a></code>, <code><a href="#topic+as_hce">as_hce()</a></code> for the helper a coerce function to hce objects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example 1
Rates_A &lt;- c(1.72, 1.74, 0.58, 1.5, 1)
Rates_P &lt;- c(2.47, 2.24, 2.9, 4, 6)
dat &lt;- simHCE(n = 2500, TTE_A = Rates_A, TTE_P = Rates_P,
              CM_A = -3, CM_P = -6, CSD_A = 16, CSD_P = 15, fixedfy = 3)
head(dat)

# Example 2
Rates_A &lt;- 10
Rates_P &lt;- 15
dat &lt;- simHCE(n = 1000, n0 = 500, TTE_A = Rates_A, TTE_P = Rates_P, 
              CM_A = 0.1, CM_P = 0, seed = 5, shape = 0.2, logC = TRUE)
summaryWO(dat)
</code></pre>

<hr>
<h2 id='sizeWO'>Sample size calculation for the win odds test (no ties)</h2><span id='topic+sizeWO'></span>

<h3>Description</h3>

<p>Sample size calculation for the win odds test (no ties)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sizeWO(WO, power, SD = NULL, k = 0.5, alpha = 0.05, WOnull = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sizeWO_+3A_wo">WO</code></td>
<td>
<p>a numeric vector of win odds values.</p>
</td></tr>
<tr><td><code id="sizeWO_+3A_power">power</code></td>
<td>
<p>the given power. A numeric vector of length 1.</p>
</td></tr>
<tr><td><code id="sizeWO_+3A_sd">SD</code></td>
<td>
<p>assumed standard deviation of the win proportion. By default uses the conservative SD. A numeric vector of length 1.</p>
</td></tr>
<tr><td><code id="sizeWO_+3A_k">k</code></td>
<td>
<p>proportion of active group in the overall sample size. Default is 0.5 (balanced randomization). A numeric vector of length 1.</p>
</td></tr>
<tr><td><code id="sizeWO_+3A_alpha">alpha</code></td>
<td>
<p>the significance level for the 2-sided test. Default is 0.05. A numeric vector of length 1.</p>
</td></tr>
<tr><td><code id="sizeWO_+3A_wonull">WOnull</code></td>
<td>
<p>the win odds value of the null hypothesis (default is 1). A numeric vector of length 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame containing the sample size with input values.
</p>


<h3>References</h3>

<p>Gasparyan SB et al. (2021) &quot;Power and sample size calculation for the win odds test: application to an ordinal endpoint in COVID-19 trials.&quot; Journal of Biopharmaceutical Statistics 31.6: 765-787. <a href="doi:10.1080/10543406.2021.1968893">doi:10.1080/10543406.2021.1968893</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+powerWO">powerWO()</a></code>, <code><a href="#topic+minWO">minWO()</a></code> for WO power or minimum detectable WO calculation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sizeWO(WO = 1.25, power = 0.9)
sizeWO(WO = 1.25, power = 0.9, k = 0.75)
sizeWO(WO = seq(1.05, 1.5, 0.05), power = 0.9)
</code></pre>

<hr>
<h2 id='sizeWR'>Sample size calculation for the win ratio test (with WR = 1 null hypothesis)</h2><span id='topic+sizeWR'></span>

<h3>Description</h3>

<p>Sample size calculation for the win ratio test (with WR = 1 null hypothesis)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sizeWR(WR, power, WO = NULL, Pties = NULL, k = 0.5, alpha = 0.05)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sizeWR_+3A_wr">WR</code></td>
<td>
<p>a numeric vector of win odds values.</p>
</td></tr>
<tr><td><code id="sizeWR_+3A_power">power</code></td>
<td>
<p>the given power. A numeric vector of length 1.</p>
</td></tr>
<tr><td><code id="sizeWR_+3A_wo">WO</code></td>
<td>
<p>win odds. Should be specified only if <code>Pties</code> is not specified. A numeric vector of length 1.</p>
</td></tr>
<tr><td><code id="sizeWR_+3A_pties">Pties</code></td>
<td>
<p>probability of ties. A numeric vector of length 1.</p>
</td></tr>
<tr><td><code id="sizeWR_+3A_k">k</code></td>
<td>
<p>proportion of active group in the overall sample size. Default is 0.5 (balanced randomization). A numeric vector of length 1.</p>
</td></tr>
<tr><td><code id="sizeWR_+3A_alpha">alpha</code></td>
<td>
<p>the significance level for the 2-sided test. Default is 0.05. A numeric vector of length 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame containing the sample size with input values.
</p>


<h3>References</h3>

<p>Yu RX, Ganju J. (2022) &quot;Sample size formula for a win ratio endpoint.&quot; Statistics in Medicine, 41.6: 950-63. <a href="doi:10.1002/sim.9297">doi:10.1002/sim.9297</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sizeWO">sizeWO()</a></code> for WO sample size calculation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sizeWR(WR = 1.35, Pties = 0.125, power = 0.8)
sizeWR(WR = 1.35, WO = 1.3, power = seq(0.5, 0.9, 0.05))
</code></pre>

<hr>
<h2 id='stratWO'>A generic function for stratified win odds with adjustment</h2><span id='topic+stratWO'></span>

<h3>Description</h3>

<p>A generic function for stratified win odds with adjustment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stratWO(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stratWO_+3A_x">x</code></td>
<td>
<p>an object used to select a method.</p>
</td></tr>
<tr><td><code id="stratWO_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list containing the stratified results and results by strata.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+stratWO.data.frame">stratWO.data.frame()</a></code>  methods.
</p>

<hr>
<h2 id='stratWO.data.frame'>Stratified win odds with adjustment</h2><span id='topic+stratWO.data.frame'></span>

<h3>Description</h3>

<p>Stratified win odds with adjustment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'data.frame'
stratWO(
  x,
  AVAL,
  TRTP,
  STRATA,
  ref,
  COVAR = NULL,
  alpha = 0.05,
  WOnull = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stratWO.data.frame_+3A_x">x</code></td>
<td>
<p>a data frame containing subject-level data.</p>
</td></tr>
<tr><td><code id="stratWO.data.frame_+3A_aval">AVAL</code></td>
<td>
<p>variable in the data with ordinal analysis values.</p>
</td></tr>
<tr><td><code id="stratWO.data.frame_+3A_trtp">TRTP</code></td>
<td>
<p>the treatment variable in the data.</p>
</td></tr>
<tr><td><code id="stratWO.data.frame_+3A_strata">STRATA</code></td>
<td>
<p>a character variable for stratification.</p>
</td></tr>
<tr><td><code id="stratWO.data.frame_+3A_ref">ref</code></td>
<td>
<p>the reference treatment group.</p>
</td></tr>
<tr><td><code id="stratWO.data.frame_+3A_covar">COVAR</code></td>
<td>
<p>a numeric covariate.</p>
</td></tr>
<tr><td><code id="stratWO.data.frame_+3A_alpha">alpha</code></td>
<td>
<p>the reference treatment group.</p>
</td></tr>
<tr><td><code id="stratWO.data.frame_+3A_wonull">WOnull</code></td>
<td>
<p>the null hypothesis. The default is 1.</p>
</td></tr>
<tr><td><code id="stratWO.data.frame_+3A_...">...</code></td>
<td>
<p>additional parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame containing the following columns:
</p>

<ul>
<li><p> WO stratified (or adjusted/stratified) win odds.
</p>
</li>
<li><p> LCL lower confidence limit for adjusted (or adjusted/stratified) WO.
</p>
</li>
<li><p> UCL upper confidence limit for adjusted (or adjusted/stratified) WO.
</p>
</li>
<li><p> SE standard error of the adjusted (or adjusted/stratified) win odds.
</p>
</li>
<li><p> WOnull win odds of the null hypothesis (specified in the <code>WOnull</code> argument).
</p>
</li>
<li><p> alpha two-sided significance level for calculating the confidence interval (specified in the <code>alpha</code> argument).
</p>
</li>
<li><p> Pvalue p-value associated with testing the null hypothesis.
</p>
</li>
<li><p> WP adjusted (or adjusted/stratified) win probability.
</p>
</li>
<li><p> SE_WP standard error for the adjusted (or adjusted/stratified) win probability.
</p>
</li>
<li><p> SD_WP standard deviation of the adjusted (or adjusted/stratified) win probability.
</p>
</li>
<li><p> N total number of patients in the analysis.
</p>
</li>
<li><p> Type &quot;STRATIFIED&quot; or &quot;STRATIFIED/ADJUSTED&quot; depending on whether <code>COVAR</code> is specified.
</p>
</li></ul>



<h3>References</h3>

<p>Gasparyan SB et al. (2021) &quot;Adjusted win ratio with stratification: calculation methods and interpretation.&quot; Statistical Methods in Medical Research 30.2: 580-611. <a href="doi:10.1177/0962280220942558">doi:10.1177/0962280220942558</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+stratWO">stratWO()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Stratified win odds
res &lt;- stratWO(x = KHCE, AVAL = "AVAL", TRTP = "TRTP", 
STRATA = "STRATAN", ref = "P")
res
## Compare with the win odds in each stratum separately
lapply(split(KHCE, KHCE$STRATAN), calcWO, AVAL = "AVAL", TRTP = "TRTP", ref = "P")
# Stratified and adjusted win odds
res &lt;- stratWO(x = KHCE, AVAL = "AVAL", COVAR = "EGFRBL", 
TRTP = "TRTP", STRATA = "STRATAN", ref = "P")
res
</code></pre>

<hr>
<h2 id='summaryWO'>A generic function for summarizing win odds</h2><span id='topic+summaryWO'></span>

<h3>Description</h3>

<p>A generic function for summarizing win odds
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summaryWO(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summaryWO_+3A_x">x</code></td>
<td>
<p>an object used to select a method.</p>
</td></tr>
<tr><td><code id="summaryWO_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame containing calculated values.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+summaryWO.hce">summaryWO.hce()</a></code>, <code><a href="#topic+summaryWO.formula">summaryWO.formula()</a></code>, <code><a href="#topic+summaryWO.data.frame">summaryWO.data.frame()</a></code>  methods.
</p>

<hr>
<h2 id='summaryWO.data.frame'>Win odds summary for a data frame</h2><span id='topic+summaryWO.data.frame'></span>

<h3>Description</h3>

<p>Win odds summary for a data frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'data.frame'
summaryWO(x, AVAL, TRTP, ref, GROUP = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summaryWO.data.frame_+3A_x">x</code></td>
<td>
<p>a data frame containing subject-level data.</p>
</td></tr>
<tr><td><code id="summaryWO.data.frame_+3A_aval">AVAL</code></td>
<td>
<p>variable in the data with ordinal analysis values.</p>
</td></tr>
<tr><td><code id="summaryWO.data.frame_+3A_trtp">TRTP</code></td>
<td>
<p>the treatment variable in the data.</p>
</td></tr>
<tr><td><code id="summaryWO.data.frame_+3A_ref">ref</code></td>
<td>
<p>the reference treatment group.</p>
</td></tr>
<tr><td><code id="summaryWO.data.frame_+3A_group">GROUP</code></td>
<td>
<p>an optional variable for grouping.</p>
</td></tr>
<tr><td><code id="summaryWO.data.frame_+3A_...">...</code></td>
<td>
<p>additional parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list containing the summary of wins, losses, and ties. It contains the following named objects:
</p>

<ul>
<li><p> summary a data frame containing number of wins, losses, and ties by treatment group and the overall number of comparisons.
</p>
</li>
<li><p> summary_by_GROUP (if <code>GROUP</code> variable is specified) a summary data frame by <code>GROUP</code>.
</p>
</li>
<li><p> WO calculated WO (win odds) and WP (win probability) and their standard errors.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+calcWO">calcWO()</a></code>, <code><a href="#topic+summaryWO">summaryWO()</a></code>, <code><a href="#topic+summaryWO.data.frame">summaryWO.data.frame()</a></code>  methods.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>summaryWO(x = HCE3, AVAL = "AVAL", TRTP = "TRTP", ref = "P", GROUP = "GROUP")
</code></pre>

<hr>
<h2 id='summaryWO.formula'>Win odds summary using formula syntax</h2><span id='topic+summaryWO.formula'></span>

<h3>Description</h3>

<p>Win odds summary using formula syntax
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'formula'
summaryWO(x, data, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summaryWO.formula_+3A_x">x</code></td>
<td>
<p>an object of class formula.</p>
</td></tr>
<tr><td><code id="summaryWO.formula_+3A_data">data</code></td>
<td>
<p>a data frame.</p>
</td></tr>
<tr><td><code id="summaryWO.formula_+3A_...">...</code></td>
<td>
<p>additional parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list containing the summary of wins, losses, and ties. It contains the following named objects:
</p>

<ul>
<li><p> summary a data frame containing number of wins, losses, and ties by treatment group and the overall number of comparisons.
</p>
</li>
<li><p> WO calculated WO (win odds) and WP (win probability) and their standard errors.
</p>
</li>
<li><p> formula returning the specified formula in the <code>x</code> argument.
</p>
</li>
<li><p> ref showing how the reference group was selected. Can be modifying by specifying the <code>ref</code> argument.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>summaryWO(data = COVID19, GROUP ~ TRTP)
summaryWO(data = COVID19, GROUP ~ TRTP, GROUP = "GROUP", ref = "Placebo")
</code></pre>

<hr>
<h2 id='summaryWO.hce'>Win odds summary for <code>hce</code> objects</h2><span id='topic+summaryWO.hce'></span>

<h3>Description</h3>

<p>Win odds summary for <code>hce</code> objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'hce'
summaryWO(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summaryWO.hce_+3A_x">x</code></td>
<td>
<p>an <code>hce</code> object.</p>
</td></tr>
<tr><td><code id="summaryWO.hce_+3A_...">...</code></td>
<td>
<p>additional parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list containing the summary of wins, losses, and ties. It contains the following named objects:
</p>

<ul>
<li><p> summary a data frame containing number of wins, losses, and ties by treatment group and the overall number of comparisons.
</p>
</li>
<li><p> summary_by_GROUP (if <code>GROUP</code> variable is specified) a summary data frame by <code>GROUP</code>.
</p>
</li>
<li><p> WO calculated WO (win odds) and WP (win probability) and their standard errors.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+calcWO">calcWO()</a></code>, <code><a href="#topic+summaryWO">summaryWO()</a></code>, <code><a href="#topic+summaryWO.data.frame">summaryWO.data.frame()</a></code> methods.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- as_hce(HCE4)
summaryWO(dat, ref = "P")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
