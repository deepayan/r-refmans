<!DOCTYPE html><html><head><title>Help for package itol.toolkit</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {itol.toolkit}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#+,itol.hub,itol.unit-method'><p>plus method</p>
add method for S4 class itol.hub and itol.unit</a></li>
<li><a href='#complex_html_text'><p>Complex HTML text</p></a></li>
<li><a href='#convert_01'><p>Convert character data to 0/1</p></a></li>
<li><a href='#convert_01_to_connect'><p>Convert 0/1 data to connection pairs</p></a></li>
<li><a href='#convert_range_to_node'><p>Convert range to node id</p></a></li>
<li><a href='#correct_get_color'><p>correct_get_color</p></a></li>
<li><a href='#count_to_tree'><p>Calculate tree based on count matrix</p></a></li>
<li><a href='#create_hub'><p>Create itol.hub Object</p></a></li>
<li><a href='#create_theme'><p>Create itol.theme Object</p></a></li>
<li><a href='#create_unit'><p>Create itol.unit</p></a></li>
<li><a href='#df_merge'><p>Merge two data frame</p></a></li>
<li><a href='#fa_read'><p>Read fasta file</p></a></li>
<li><a href='#fa_write'><p>Write fasta file</p></a></li>
<li><a href='#file_get_dir'><p>Get file dir</p></a></li>
<li><a href='#file_get_name'><p>Get file name</p></a></li>
<li><a href='#file_to_unit'><p>Create itol.unit Object from file</p></a></li>
<li><a href='#get_color'><p>get_color</p></a></li>
<li><a href='#head_line'><p>head line</p></a></li>
<li><a href='#hub_to_unit'><p>Create itol.unit Object from object</p></a></li>
<li><a href='#inbuilt_themes'><p>inbuilt themes</p></a></li>
<li><a href='#itol.hub-class'><p>The itol.hub Class</p></a></li>
<li><a href='#itol.theme-class'><p>The itol.theme Class</p></a></li>
<li><a href='#itol.unit-class'><p>The itol.unit Class</p></a></li>
<li><a href='#learn_data'><p>Learn data from template file</p></a></li>
<li><a href='#learn_data_from_file'><p>Learn object data from file</p></a></li>
<li><a href='#learn_data_from_files'><p>Learn object data from files</p></a></li>
<li><a href='#learn_data_from_unit'><p>Learn object data from unit</p></a></li>
<li><a href='#learn_data_from_unit_list'><p>Learn object data from units</p></a></li>
<li><a href='#learn_df'><p>Learn from tree</p></a></li>
<li><a href='#learn_field'><p>Learn field</p></a></li>
<li><a href='#learn_legend'><p>Learn legend</p></a></li>
<li><a href='#learn_line'><p>Learn paramter</p></a></li>
<li><a href='#learn_profile'><p>Learn profile</p></a></li>
<li><a href='#learn_separator'><p>Learn separator</p></a></li>
<li><a href='#learn_subdf'><p>Learn sub data frame</p></a></li>
<li><a href='#learn_theme_align'><p>Learn align</p></a></li>
<li><a href='#learn_theme_alignment'><p>Learn alignment</p></a></li>
<li><a href='#learn_theme_bar'><p>Learn bar</p></a></li>
<li><a href='#learn_theme_basic_plot'><p>Learn basic plot</p></a></li>
<li><a href='#learn_theme_basic_theme'><p>Learn basic theme</p></a></li>
<li><a href='#learn_theme_binary'><p>Learn binary</p></a></li>
<li><a href='#learn_theme_border'><p>Learn border</p></a></li>
<li><a href='#learn_theme_common_themes'><p>Learn common themes</p></a></li>
<li><a href='#learn_theme_connection'><p>Learn connection</p></a></li>
<li><a href='#learn_theme_domain'><p>Learn domain</p></a></li>
<li><a href='#learn_theme_externalshape'><p>Learn externalshape</p></a></li>
<li><a href='#learn_theme_heatmap'><p>Learn heatmap</p></a></li>
<li><a href='#learn_theme_image'><p>Learn image</p></a></li>
<li><a href='#learn_theme_label'><p>Learn label</p></a></li>
<li><a href='#learn_theme_linechart'><p>Learn linechart</p></a></li>
<li><a href='#learn_theme_piechart'><p>Learn piechart</p></a></li>
<li><a href='#learn_theme_specific_themes'><p>Learn specific themes</p></a></li>
<li><a href='#learn_theme_strip_label'><p>Learn strip label</p></a></li>
<li><a href='#learn_type'><p>Learn template type</p></a></li>
<li><a href='#line_clean'><p>Filter out comments and empty lines</p></a></li>
<li><a href='#line_split'><p>Split lines into two parts</p></a></li>
<li><a href='#merge_unit'><p>Merge units</p></a></li>
<li><a href='#search_tree_file'><p>Search tree file</p></a></li>
<li><a href='#show,itol.hub-method'><p>show method for S4 class itol.hub</p></a></li>
<li><a href='#template_groups'><p>template groups</p></a></li>
<li><a href='#template_parameters_count'><p>template parameters count</p></a></li>
<li><a href='#train_theme'><p>Train inbuilt theme</p></a></li>
<li><a href='#unite_rows'><p>Paste rows</p></a></li>
<li><a href='#use.theme'><p>Extract theme from inbuilt_themes</p></a></li>
<li><a href='#write_hub'><p>Write all data object into files</p></a></li>
<li><a href='#write_raw'><p>Write raw data into files</p></a></li>
<li><a href='#write_unit'><p>Write unit object into file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Helper Functions for 'Interactive Tree Of Life'</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.7</td>
</tr>
<tr>
<td>Description:</td>
<td>
    The 'Interactive Tree Of Life' <a href="https://itol.embl.de/">https://itol.embl.de/</a> online server can 
    edit and annotate trees interactively. The 'itol.toolkit' package can 
    support all types of annotation templates.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, stringr, stats, seqinr, utils, methods, tidyr, ape,
data.table, purrr, wesanderson, miniUI, shiny, rstudioapi,
colourpicker, ggsci, RColorBrewer</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Collate:</td>
<td>'addins.R' 'data.R' 'learn.R' 'object.R' 'utils.R' 'output.R'
'user.R' 'ops.R'</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-18 03:04:21 UTC; zhoutong</td>
</tr>
<tr>
<td>Author:</td>
<td>Tong Zhou [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Tong Zhou &lt;tongzhou2017@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-18 15:30:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='+2B+2Citol.hub+2Citol.unit-method'>plus method
add method for S4 class itol.hub and itol.unit</h2><span id='topic++2B+2Citol.hub+2Citol.unit-method'></span><span id='topic++2B+2Citol.unit+2Citol.unit-method'></span>

<h3>Description</h3>

<p>plus method
add method for S4 class itol.hub and itol.unit
</p>
<p>plus method
add method for S4 class itol.unit and itol.unit
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'itol.hub,itol.unit'
e1 + e2

## S4 method for signature 'itol.unit,itol.unit'
e1 + e2
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B2B+2B2Citol.hub+2B2Citol.unit-method_+3A_e1">e1</code></td>
<td>
<p>An object of class itol.unit</p>
</td></tr>
<tr><td><code id="+2B2B+2B2Citol.hub+2B2Citol.unit-method_+3A_e2">e2</code></td>
<td>
<p>An object of class itol.unit</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a itol.hub object with new data from itol.unit object
</p>
<p>a itol.unit object with merged data
</p>

<hr>
<h2 id='complex_html_text'>Complex HTML text</h2><span id='topic+complex_html_text'></span>

<h3>Description</h3>

<p>Interactively combine columns by HTML styles and record workflow as
reproducible code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>complex_html_text()
</code></pre>


<h3>Details</h3>

<p>When you're done, the code performing this operation will be emitted
at the cursor position.
</p>

<hr>
<h2 id='convert_01'>Convert character data to 0/1</h2><span id='topic+convert_01'></span>

<h3>Description</h3>

<p>In data frame and list, convert character and numberic data to 0/1.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_01(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="convert_01_+3A_object">object</code></td>
<td>
<p>data frame or list</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with 0/1 values
</p>

<hr>
<h2 id='convert_01_to_connect'>Convert 0/1 data to connection pairs</h2><span id='topic+convert_01_to_connect'></span>

<h3>Description</h3>

<p>If two column has more than 1 shared element then they have connection. Convert
0/1 data to connection pairs in long shape table. The 0-connection pairs are removed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_01_to_connect(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="convert_01_to_connect_+3A_object">object</code></td>
<td>
<p>data frame with 0/1 data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with source and target connection information
</p>

<hr>
<h2 id='convert_range_to_node'>Convert range to node id</h2><span id='topic+convert_range_to_node'></span>

<h3>Description</h3>

<p>Convert the data frame with range id to node id by mrca method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_range_to_node(df, tree)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="convert_range_to_node_+3A_df">df</code></td>
<td>
<p>data frame with any type of id</p>
</td></tr>
<tr><td><code id="convert_range_to_node_+3A_tree">tree</code></td>
<td>
<p>tree file path</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with converted id from range id
</p>

<hr>
<h2 id='correct_get_color'>correct_get_color</h2><span id='topic+correct_get_color'></span>

<h3>Description</h3>

<p>correct_get_color. (Version 0.0.0.9000)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>correct_get_color(str)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="correct_get_color_+3A_str">str</code></td>
<td>
<p>taxa string</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of colors
</p>

<hr>
<h2 id='count_to_tree'>Calculate tree based on count matrix</h2><span id='topic+count_to_tree'></span>

<h3>Description</h3>

<p>While we start analysis from count matrix not sequences
alignment, we could use clustering methods to get main tree in phylo object
class of output as Newick format file. If the samples or elements have group
information, we could use weighted clustering method to get a clear grouped
structure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>count_to_tree(count, group = NULL, weight = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="count_to_tree_+3A_count">count</code></td>
<td>
<p>a data frame containing numberic values of abundance or other
count.</p>
</td></tr>
<tr><td><code id="count_to_tree_+3A_group">group</code></td>
<td>
<p>a vector of character containing the group information. The
length of the vector should be same with the count columns number. If using
unweighted clustring, should ignore this parameter.</p>
</td></tr>
<tr><td><code id="count_to_tree_+3A_weight">weight</code></td>
<td>
<p>a number specifying the weight size of the group information.
In most case, 1 is enough. If the value is between 0 and 1, it will make the
weight of group information weak. If the value is more than 1, it will make
the weight of group information strong.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a phylo class object containing
</p>
<table>
<tr><td><code>edge</code></td>
<td>
<p>a vector of integers specifying edge id. The length of
vector is double of node number</p>
</td></tr>
<tr><td><code>edge.length</code></td>
<td>
<p>a vector of numbers specifying edge length</p>
</td></tr>
<tr><td><code>tip.label</code></td>
<td>
<p>a vector of character specifying the tip label</p>
</td></tr>
<tr><td><code>Nnode</code></td>
<td>
<p>a number specifying the number of nodes</p>
</td></tr>
<tr><td><code>node.label</code></td>
<td>
<p>a vector of character specifying the node label.
If the tree calculated from count matrix or other case, the node label will
generated by ape::makeNodeLabel function. And the Most Recent Common
Ancestors(MRCA) node will be named with weighted group information, if the
parameter group is not null.</p>
</td></tr>
</table>

<hr>
<h2 id='create_hub'>Create itol.hub Object</h2><span id='topic+create_hub'></span>

<h3>Description</h3>

<p>create a new object for itol.hub
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_hub(
  tree,
  field_tree = NULL,
  seq = NULL,
  abundance = NULL,
  taxonomy = NULL,
  node_data = NULL,
  tip_data = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_hub_+3A_tree">tree</code></td>
<td>
<p>tree file</p>
</td></tr>
<tr><td><code id="create_hub_+3A_field_tree">field_tree</code></td>
<td>
<p>todo</p>
</td></tr>
<tr><td><code id="create_hub_+3A_seq">seq</code></td>
<td>
<p>todo</p>
</td></tr>
<tr><td><code id="create_hub_+3A_abundance">abundance</code></td>
<td>
<p>todo</p>
</td></tr>
<tr><td><code id="create_hub_+3A_taxonomy">taxonomy</code></td>
<td>
<p>todo</p>
</td></tr>
<tr><td><code id="create_hub_+3A_node_data">node_data</code></td>
<td>
<p>todo</p>
</td></tr>
<tr><td><code id="create_hub_+3A_tip_data">tip_data</code></td>
<td>
<p>todo</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a itol.hub object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>TREE &lt;- system.file("extdata", "tree_of_itol_templates.tree", package = "itol.toolkit")
create_hub(tree = TREE)

</code></pre>

<hr>
<h2 id='create_theme'>Create itol.theme Object</h2><span id='topic+create_theme'></span>

<h3>Description</h3>

<p>create a new object for itol.theme
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_theme(unit = NULL, file = NULL, tree = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_theme_+3A_unit">unit</code></td>
<td>
<p>unit object</p>
</td></tr>
<tr><td><code id="create_theme_+3A_file">file</code></td>
<td>
<p>template file</p>
</td></tr>
<tr><td><code id="create_theme_+3A_tree">tree</code></td>
<td>
<p>tree file</p>
</td></tr>
<tr><td><code id="create_theme_+3A_...">...</code></td>
<td>
<p>Further arguments to be passed to subsequent functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a itol.theme object
</p>

<hr>
<h2 id='create_unit'>Create itol.unit</h2><span id='topic+create_unit'></span>

<h3>Description</h3>

<p>Create itol.unit from simple input in R environment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_unit(
  data,
  key,
  type,
  style = "default",
  subtype = NULL,
  color = NULL,
  line_type = NULL,
  font_type = NULL,
  size_factor = NULL,
  position = NULL,
  background_color = NULL,
  rotation = NULL,
  method = NULL,
  shape = NULL,
  fill = NULL,
  tree
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_unit_+3A_data">data</code></td>
<td>
<p>if type == &quot;COLLAPSE&quot;, a vector of characters specifying the tips
or node used for collapsing used for extracting.</p>
</td></tr>
<tr><td><code id="create_unit_+3A_key">key</code></td>
<td>
<p>a character specifying the output file name for hub object.</p>
</td></tr>
<tr><td><code id="create_unit_+3A_type">type</code></td>
<td>
<p>a character specifying the template type used for extracting.
Following choices are possible: &quot;COLLAPSE&quot;,&quot;PRUNE&quot;,&quot;SPACING&quot;,&quot;TREE_COLORS&quot;,
&quot;DATASET_STYLE&quot;,&quot;LABELS&quot;,&quot;DATASET_TEXT&quot;,&quot;DATASET_COLORSTRIP&quot;,
&quot;DATASET_BINARY&quot;,&quot;DATASET_GRADIENT&quot;,&quot;DATASET_HEATMAP&quot;,&quot;DATASET_SYMBOL&quot;,
&quot;DATASET_EXTERNALSHAPE&quot;,&quot;DATASET_DOMAINS&quot;,&quot;DATASET_SIMPLEBAR&quot;,
&quot;DATASET_MULTIBAR&quot;,&quot;DATASET_BOXPLOT&quot;,&quot;DATASET_LINECHART&quot;,&quot;DATASET_PIECHART&quot;,
&quot;DATASET_ALIGNMENT&quot;,&quot;DATASET_CONNECTION&quot;,&quot;DATASET_IMAGE&quot;,&quot;POPUP_INFO.</p>
</td></tr>
<tr><td><code id="create_unit_+3A_style">style</code></td>
<td>
<p>a character specifying the specific version of template type
used for extracting. The default value is &quot;default&quot; style for all types.</p>
</td></tr>
<tr><td><code id="create_unit_+3A_subtype">subtype</code></td>
<td>
<p>a character specifying the subtype under type. If the type is
&quot;TREE_COLORS&quot;, the following choices are possible: &quot;range&quot;, &quot;clade&quot;,
&quot;branch&quot;, &quot;label&quot;, &quot;label_background&quot;.</p>
</td></tr>
<tr><td><code id="create_unit_+3A_color">color</code></td>
<td>
<p>a character specifying the color pattern name. The following
choices are possible: &quot;table2itol&quot;, &quot;RColorBrewer&quot;, &quot;ggsci&quot;.</p>
</td></tr>
<tr><td><code id="create_unit_+3A_line_type">line_type</code></td>
<td>
<p>a character specifying the normal or dashed line type used
in clade and branch subtype.</p>
</td></tr>
<tr><td><code id="create_unit_+3A_font_type">font_type</code></td>
<td>
<p>a character specifying the bold, italic, and bold-italic
font type used in label and branch subtype.</p>
</td></tr>
<tr><td><code id="create_unit_+3A_size_factor">size_factor</code></td>
<td>
<p>a number specifying the line width used in clade and
branch subtype and size factor in label subtype.</p>
</td></tr>
<tr><td><code id="create_unit_+3A_position">position</code></td>
<td>
<p>If type == &quot;DATASET_STYLE&quot;, a character
specifying the position: The following choices are possible: &quot;node&quot; and
&quot;clade&quot;. If type == &quot;DATASET_TEXT&quot;, a number specifying the position of the
text on the tree: -1 = external label; a number between 0 and 1 = internal
label positioned at the specified value along the node branch (for example,
position 0 is exactly at the start of node branch, position 0.5 is in the
middle, and position 1 is at the end)</p>
</td></tr>
<tr><td><code id="create_unit_+3A_background_color">background_color</code></td>
<td>
<p>Only used while type == &quot;DATASET_STYLE&quot; and subtype
== &quot;label&quot;. a character or a vector of character specifying the background
color in hexadecimal, RGB or RGBA notation.</p>
</td></tr>
<tr><td><code id="create_unit_+3A_rotation">rotation</code></td>
<td>
<p>Only used while type == &quot;DATASET_TEXT&quot;. a number or a
vector of number specifying the rotation angle of the text.</p>
</td></tr>
<tr><td><code id="create_unit_+3A_method">method</code></td>
<td>
<p>a character specifying the numbric data summarise method. If
type == &quot;DATASET_BINARY&quot;, the following choices are possible: &quot;mean&quot;,
&quot;sum&quot;.</p>
</td></tr>
<tr><td><code id="create_unit_+3A_shape">shape</code></td>
<td>
<p>a character or a vector of character specifying the symbol
shape. If type == &quot;DATASET_BINARY&quot;, the default is 2. If type ==
&quot;DATASET_SYMBOL&quot;, the following choices are possible: 1 for rectangle, 2
for circle, 3 for star, 4 for left pointing triangle, 5 for right pointing
triangle. If using NULL and there are data column, the functions will
automaticly help users to setup the shapes based on the levels of the
data.</p>
</td></tr>
<tr><td><code id="create_unit_+3A_fill">fill</code></td>
<td>
<p>If type == &quot;DATASET_SYMBOL&quot;, 1/0 is specifying the shape
outlier filled or not. If type == &quot;DATASET_DOMAINS&quot;, the following choices
are possible: &quot;RE|HH|HV|EL|DI|TR|TL|PL|PR|PU|PD|OC|GP&quot;.</p>
</td></tr>
<tr><td><code id="create_unit_+3A_tree">tree</code></td>
<td>
<p>a character specifying Newick format tree file path or a phylo
object of main phylogenetic tree.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a itol.unit object containing
</p>
<table>
<tr><td><code>type</code></td>
<td>
<p>This group holds information about the template type of
the data only. This is a very critical piece of information. In many
functions of the itol.toolkit package, the template type information is
used to determine the different data processing and input/output methods.</p>
</td></tr>
<tr><td><code>sep</code></td>
<td>
<p>This group holds data separator information only.
This is one of the most important parameters for data reading and output.
It is a separate category because it is frequently used and is an input
parameter for other subsequent parameters to be read.</p>
</td></tr>
<tr><td><code>profile</code></td>
<td>
<p>This group contains basic information about the
dataset, such as the dataset name and a color label to distinguish the
dataset. The dataset name is extremely important. This parameter is used
almost throughout the data processing of the itol.toolkit package.
With the content of this parameter as the key value, the data and theme
information of the dataset are associated. In turn, high throughput
learning and writing of large-scale data can be achieved. This parameter
is not included in some template types with a particularly simple structure,
so we choose a file name or a user-defined method as the key value.</p>
</td></tr>
<tr><td><code>field</code></td>
<td>
<p>This group contains information about each sample
within the dataset, and this type of parameter exists only for multi-sample
data. This information even includes the clustering tree between samples.
This information is usually stored as part of the column names in the
metadata part or abundance information of the itol.hub object.</p>
</td></tr>
<tr><td><code>common_themes</code></td>
<td>
<p>These themes are used at high frequency in
different templates. These parameters are small in number but constitute some
common features of iTOL visual style settings, such as legend, margin, etc.</p>
</td></tr>
<tr><td><code>specific_themes</code></td>
<td>
<p>These themes are used only in specific
templates. The number of these parameters is very large. However, most of
them are used in only one template to control the style details of the
visualization. By unifying these parameters and calling them according to the
template type, users can perform secondary development and data processing
with a high degree of parameter aggregation without worrying too much about
the differences between different template types.</p>
</td></tr>
<tr><td><code>data</code></td>
<td>
<p>This slot contains a list of two data frames with the
nodes and tips data separately. The first column of the two data frames is
the node or tip id. If the input data contains range id, it would be
converted to node id by the convert_range_to_node function automatically.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>tree &lt;- system.file("extdata","tree_of_itol_templates.tree",package = "itol.toolkit")
data("template_groups")
data("template_parameters_count")
# COLLAPSE
group_names &lt;- unique(template_groups$group)
object &lt;- create_hub(tree = tree)
unit &lt;- create_unit(data = group_names, key = "E001_collapse_1",
type = "COLLAPSE", tree = tree)
object &lt;- learn_data_from_unit(object,unit)
# PRUNE
select_note = c("theme_style","basic_plot")
unit &lt;- create_unit(data = select_note, key = "E002_prune_1",
type = "PRUNE", tree = tree)
object &lt;- learn_data_from_unit(object,unit)
# SPACING
df_values = data.frame(id = row.names(template_parameters_count),
values = rowSums(template_parameters_count))
unit &lt;- create_unit(data = df_values, key = "E005_spacing_1",
type = "SPACING", tree = tree)
object &lt;- learn_data_from_unit(object,unit)
# TREE_COLORS
## range
unit &lt;- create_unit(data = template_groups,
key = "E006_tree_colors_1", type = "TREE_COLORS", subtype = "range",
tree = tree)
object &lt;- learn_data_from_unit(object,unit)
</code></pre>

<hr>
<h2 id='df_merge'>Merge two data frame</h2><span id='topic+df_merge'></span>

<h3>Description</h3>

<p>merge sub data frame into initial data frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>df_merge(df1, df2, by = "id")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="df_merge_+3A_df1">df1</code></td>
<td>
<p>initial data frame</p>
</td></tr>
<tr><td><code id="df_merge_+3A_df2">df2</code></td>
<td>
<p>sub data frame</p>
</td></tr>
<tr><td><code id="df_merge_+3A_by">by</code></td>
<td>
<p>key column</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame containing merged information
</p>

<hr>
<h2 id='fa_read'>Read fasta file</h2><span id='topic+fa_read'></span>

<h3>Description</h3>

<p>Read the fasta format sequences file into data.frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fa_read(file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fa_read_+3A_file">file</code></td>
<td>
<p>input file in fasta format</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with sequence id and sequence
</p>

<hr>
<h2 id='fa_write'>Write fasta file</h2><span id='topic+fa_write'></span>

<h3>Description</h3>

<p>Write the fasta format sequences file from data.frame. (Version 0.0.0.9000)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fa_write(object, file, id = "seq_name", seq = "sequence", append = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fa_write_+3A_object">object</code></td>
<td>
<p>data.frame format data</p>
</td></tr>
<tr><td><code id="fa_write_+3A_file">file</code></td>
<td>
<p>input file in fasta format</p>
</td></tr>
<tr><td><code id="fa_write_+3A_id">id</code></td>
<td>
<p>id col</p>
</td></tr>
<tr><td><code id="fa_write_+3A_seq">seq</code></td>
<td>
<p>seq col</p>
</td></tr>
<tr><td><code id="fa_write_+3A_append">append</code></td>
<td>
<p>append at the end of an already existing file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, only output a fasta file
</p>

<hr>
<h2 id='file_get_dir'>Get file dir</h2><span id='topic+file_get_dir'></span>

<h3>Description</h3>

<p>Get file dir from string
</p>


<h3>Usage</h3>

<pre><code class='language-R'>file_get_dir(str, up = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="file_get_dir_+3A_str">str</code></td>
<td>
<p>str</p>
</td></tr>
<tr><td><code id="file_get_dir_+3A_up">up</code></td>
<td>
<p>up dir</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character specifying the dir path
</p>

<hr>
<h2 id='file_get_name'>Get file name</h2><span id='topic+file_get_name'></span>

<h3>Description</h3>

<p>Get file name from string
</p>


<h3>Usage</h3>

<pre><code class='language-R'>file_get_name(str, with_ext = TRUE, keep_dir = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="file_get_name_+3A_str">str</code></td>
<td>
<p>str</p>
</td></tr>
<tr><td><code id="file_get_name_+3A_with_ext">with_ext</code></td>
<td>
<p>with ext or not</p>
</td></tr>
<tr><td><code id="file_get_name_+3A_keep_dir">keep_dir</code></td>
<td>
<p>keep file dir or not</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character specifying the file name
</p>

<hr>
<h2 id='file_to_unit'>Create itol.unit Object from file</h2><span id='topic+file_to_unit'></span>

<h3>Description</h3>

<p>create a new object for itol.unit
</p>


<h3>Usage</h3>

<pre><code class='language-R'>file_to_unit(file, tree, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="file_to_unit_+3A_file">file</code></td>
<td>
<p>template file</p>
</td></tr>
<tr><td><code id="file_to_unit_+3A_tree">tree</code></td>
<td>
<p>tree file</p>
</td></tr>
<tr><td><code id="file_to_unit_+3A_...">...</code></td>
<td>
<p>Further arguments to be passed to subsequent functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a itol.unit object
</p>

<hr>
<h2 id='get_color'>get_color</h2><span id='topic+get_color'></span>

<h3>Description</h3>

<p>get color, support max length 40
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_color(n = 0, set = "table2itol")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_color_+3A_n">n</code></td>
<td>
<p>level length of a vector</p>
</td></tr>
<tr><td><code id="get_color_+3A_set">set</code></td>
<td>
<p>a character specifying the palette set name. In dedault,
table2itol is setted. The following choices are possible: wsanderson.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of colors
</p>

<hr>
<h2 id='head_line'>head line</h2><span id='topic+head_line'></span>

<h3>Description</h3>

<p>Head line for templates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>head_line(function_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="head_line_+3A_function_name">function_name</code></td>
<td>
<p>parent function name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character specifying the template type
</p>

<hr>
<h2 id='hub_to_unit'>Create itol.unit Object from object</h2><span id='topic+hub_to_unit'></span>

<h3>Description</h3>

<p>create a new object for itol.unit
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hub_to_unit(object, theme, key)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hub_to_unit_+3A_object">object</code></td>
<td>
<p>itol.hub object</p>
</td></tr>
<tr><td><code id="hub_to_unit_+3A_theme">theme</code></td>
<td>
<p>itol.theme object</p>
</td></tr>
<tr><td><code id="hub_to_unit_+3A_key">key</code></td>
<td>
<p>key id of dataset name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a itol.unit object
</p>

<hr>
<h2 id='inbuilt_themes'>inbuilt themes</h2><span id='topic+inbuilt_themes'></span>

<h3>Description</h3>

<p>Default themes learned from iTOL offical template examples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inbuilt_themes
</code></pre>


<h3>Format</h3>



<h4><code>inbuilt_themes</code></h4>

<p>A list with 23 template themes:
</p>

<dl>
<dt>COLLAPSE</dt><dd><p>Default theme of collapse template</p>
</dd>
<dt>PRUNE</dt><dd><p>Default theme of prune template</p>
</dd>
<dt>SPACING</dt><dd><p>Default theme of spacing template</p>
</dd>
<dt>TREE_COLORS</dt><dd><p>Default theme of tree colors template</p>
</dd>
<dt>DATASET_STYLE</dt><dd><p>Default theme of style template</p>
</dd>
<dt>LABELS</dt><dd><p>Default theme of labels template</p>
</dd>
<dt>DATASET_TEXT</dt><dd><p>Default theme of text template</p>
</dd>
<dt>DATASET_COLORSTRIP</dt><dd><p>Default theme of colorstrip template</p>
</dd>
<dt>DATASET_BINARY</dt><dd><p>Default theme of binary template</p>
</dd>
<dt>DATASET_GRADIENT</dt><dd><p>Default theme of gradient template</p>
</dd>
<dt>DATASET_HEATMAP</dt><dd><p>Default theme of heatmap template</p>
</dd>
<dt>DATASET_SYMBOL</dt><dd><p>Default theme of symbol template</p>
</dd>
<dt>DATASET_EXTERNALSHAPE</dt><dd><p>Default theme of externalshape template</p>
</dd>
<dt>DATASET_DOMAINS</dt><dd><p>Default theme of domains template</p>
</dd>
<dt>DATASET_SIMPLEBAR</dt><dd><p>Default theme of simple bar template</p>
</dd>
<dt>DATASET_MULTIBAR</dt><dd><p>Default theme of multi bar template</p>
</dd>
<dt>DATASET_BOXPLOT</dt><dd><p>Default theme of box plot template</p>
</dd>
<dt>DATASET_LINECHART</dt><dd><p>Default theme of line chart template</p>
</dd>
<dt>DATASET_PIECHART</dt><dd><p>Default theme of pie chart template</p>
</dd>
<dt>DATASET_ALIGNMENT</dt><dd><p>Default theme of alignment template</p>
</dd>
<dt>DATASET_CONNECTION</dt><dd><p>Default theme of connection template</p>
</dd>
<dt>DATASET_IMAGE</dt><dd><p>Default theme of image template</p>
</dd>
<dt>POPUP_INFO</dt><dd><p>Default theme of popup info template</p>
</dd>
</dl>
<p>...

</p>


<hr>
<h2 id='itol.hub-class'>The itol.hub Class</h2><span id='topic+itol.hub-class'></span><span id='topic+itol.hub'></span>

<h3>Description</h3>

<p>The itol.hub object is an intermediate storage container used internally throughout the
integration procedure to hold bits of data that are useful downstream.
</p>


<h3>Slots</h3>


<dl>
<dt><code>tree</code></dt><dd><p>a list of meta data table, usually raw, full, and analyze</p>
</dd>
<dt><code>seq</code></dt><dd><p>identity of the active assay</p>
</dd>
<dt><code>abundance</code></dt><dd><p>abundance</p>
</dd>
<dt><code>taxonomy</code></dt><dd><p>taxonomy</p>
</dd>
<dt><code>meta.data</code></dt><dd><p>other meta.data</p>
</dd>
<dt><code>theme</code></dt><dd><p>itol theme</p>
</dd>
</dl>

<hr>
<h2 id='itol.theme-class'>The itol.theme Class</h2><span id='topic+itol.theme-class'></span><span id='topic+itol.theme'></span>

<h3>Description</h3>

<p>The itol.theme object is an intermediate storage container used internally throughout the
integration procedure to hold bits of data that are useful downstream.
</p>


<h3>Slots</h3>


<dl>
<dt><code>type</code></dt><dd><p>a list of meta data table, usually raw, full, and analyze</p>
</dd>
<dt><code>sep</code></dt><dd><p>identity of the active assay</p>
</dd>
<dt><code>profile</code></dt><dd><p>abundance</p>
</dd>
<dt><code>field</code></dt><dd><p>taxonomy</p>
</dd>
<dt><code>common_themes</code></dt><dd><p>other meta.data</p>
</dd>
<dt><code>specific_themes</code></dt><dd><p>itol theme</p>
</dd>
</dl>

<hr>
<h2 id='itol.unit-class'>The itol.unit Class</h2><span id='topic+itol.unit-class'></span><span id='topic+itol.unit'></span>

<h3>Description</h3>

<p>The itol.unit object is an intermediate storage container used internally throughout the
integration procedure to hold bits of data that are useful downstream.
</p>


<h3>Slots</h3>


<dl>
<dt><code>type</code></dt><dd><p>a list of meta data table, usually raw, full, and analyze</p>
</dd>
<dt><code>sep</code></dt><dd><p>identity of the active assay</p>
</dd>
<dt><code>profile</code></dt><dd><p>abundance</p>
</dd>
<dt><code>field</code></dt><dd><p>taxonomy</p>
</dd>
<dt><code>common_themes</code></dt><dd><p>other meta.data</p>
</dd>
<dt><code>specific_themes</code></dt><dd><p>itol theme</p>
</dd>
<dt><code>data</code></dt><dd><p>data</p>
</dd>
</dl>

<hr>
<h2 id='learn_data'>Learn data from template file</h2><span id='topic+learn_data'></span>

<h3>Description</h3>

<p>Learn data from template file into data frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_data(df1 = NULL, file, tree = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_data_+3A_df1">df1</code></td>
<td>
<p>initial data frame</p>
</td></tr>
<tr><td><code id="learn_data_+3A_file">file</code></td>
<td>
<p>template file</p>
</td></tr>
<tr><td><code id="learn_data_+3A_tree">tree</code></td>
<td>
<p>tree file</p>
</td></tr>
<tr><td><code id="learn_data_+3A_...">...</code></td>
<td>
<p>Further arguments to be passed to subsequent functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with two data frame of node and tip annotation data
</p>

<hr>
<h2 id='learn_data_from_file'>Learn object data from file</h2><span id='topic+learn_data_from_file'></span>

<h3>Description</h3>

<p>Learn itol.hub object data from template file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_data_from_file(object, file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_data_from_file_+3A_object">object</code></td>
<td>
<p>itol.hub object</p>
</td></tr>
<tr><td><code id="learn_data_from_file_+3A_file">file</code></td>
<td>
<p>template file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a itol.hub object with new data from template file
</p>

<hr>
<h2 id='learn_data_from_files'>Learn object data from files</h2><span id='topic+learn_data_from_files'></span>

<h3>Description</h3>

<p>Learn itol.hub object data from template file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_data_from_files(object, files = NULL, dir = NULL, pattern = ".", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_data_from_files_+3A_object">object</code></td>
<td>
<p>itol.hub object</p>
</td></tr>
<tr><td><code id="learn_data_from_files_+3A_files">files</code></td>
<td>
<p>template files path</p>
</td></tr>
<tr><td><code id="learn_data_from_files_+3A_dir">dir</code></td>
<td>
<p>files path</p>
</td></tr>
<tr><td><code id="learn_data_from_files_+3A_pattern">pattern</code></td>
<td>
<p>file name pattern in regex</p>
</td></tr>
<tr><td><code id="learn_data_from_files_+3A_...">...</code></td>
<td>
<p>Further arguments to be passed to subsequent functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a itol.hub object with new data from template files
</p>

<hr>
<h2 id='learn_data_from_unit'>Learn object data from unit</h2><span id='topic+learn_data_from_unit'></span>

<h3>Description</h3>

<p>Learn itol.hub object data from unit object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_data_from_unit(object, unit)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_data_from_unit_+3A_object">object</code></td>
<td>
<p>itol.hub object</p>
</td></tr>
<tr><td><code id="learn_data_from_unit_+3A_unit">unit</code></td>
<td>
<p>itol.unit object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a itol.hub object containing new data from itol.unit object
</p>

<hr>
<h2 id='learn_data_from_unit_list'>Learn object data from units</h2><span id='topic+learn_data_from_unit_list'></span>

<h3>Description</h3>

<p>Learn itol.hub object data from list of unit object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_data_from_unit_list(object, units)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_data_from_unit_list_+3A_object">object</code></td>
<td>
<p>itol.hub object</p>
</td></tr>
<tr><td><code id="learn_data_from_unit_list_+3A_units">units</code></td>
<td>
<p>itol.unit object list</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a itol.hub object with new data from a list of itol.unit objects
</p>

<hr>
<h2 id='learn_df'>Learn from tree</h2><span id='topic+learn_df'></span>

<h3>Description</h3>

<p>Learn initial data frame from Newick format tree leaves.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_df(tree, node = FALSE, tip = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_df_+3A_tree">tree</code></td>
<td>
<p>Newick tree file or phylo object.</p>
</td></tr>
<tr><td><code id="learn_df_+3A_node">node</code></td>
<td>
<p>a logical to control output with node label or not. The default
value is FALSE.</p>
</td></tr>
<tr><td><code id="learn_df_+3A_tip">tip</code></td>
<td>
<p>a logical to control output tip label or not.The default value is
TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list containing
</p>
<table>
<tr><td><code>node</code></td>
<td>
<p>a data frame with id column. The id information is from
the node label in Newick format tree file or phylo object. If the node
parameter set as FALSE, the node information will be NULL.</p>
</td></tr>
<tr><td><code>tip</code></td>
<td>
<p>a data frame with id column. The id information is from
the tip label in Newick format tree file or phylo object. If the tip
parameter set as FALSE, the tip information will be NULL.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>tree &lt;- system.file("extdata",
                    "tree_of_itol_templates.tree",
                    package = "itol.toolkit")
sub_df &lt;- learn_df(tree,node=TRUE,tip=TRUE)
</code></pre>

<hr>
<h2 id='learn_field'>Learn field</h2><span id='topic+learn_field'></span>

<h3>Description</h3>

<p>learn field paramters as list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_field(lines, sep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_field_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_field_+3A_sep">sep</code></td>
<td>
<p>a character specifying the separator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of field parameters containing
</p>
<table>
<tr><td><code>labels</code></td>
<td>
<p>a vector of characters specifying the filed name. In
DATASET_HEATMAP, the labels are shown as heatamp column names.</p>
</td></tr>
<tr><td><code>colors</code></td>
<td>
<p>define colors for each individual field column (use
hexadecimal, RGB or RGBA notation; if using RGB/RGBA, COMMA cannot be used as
SEPARATOR)</p>
</td></tr>
<tr><td><code>shapes</code></td>
<td>
<p>Shape should be a number between 1 and 6, or any
protein domain shape definition. 1-square, 2-circle, 3-star, 4-right pointing
triangle, 5-left pointing triangle, 6-checkmark</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>tree &lt;- system.file("extdata",
                    "tree_of_itol_templates.tree",
                    package = "itol.toolkit")
df_frequence &lt;- data.table::fread(system.file("extdata",
                                              "templates_frequence.txt",
                                              package = "itol.toolkit"))
## create unit
unit &lt;- create_unit(data = df_frequence,
                    key = "Quickstart",
                    type = "DATASET_HEATMAP",
                    tree = tree)
## write unit
file &lt;- tempfile()
write_unit(unit,file)
## Learn legend parameters
lines &lt;- line_clean(file=file)
sep = learn_separator(file = file)
learn_field(lines = lines, sep = sep)
</code></pre>

<hr>
<h2 id='learn_legend'>Learn legend</h2><span id='topic+learn_legend'></span>

<h3>Description</h3>

<p>learn legend paramters as list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_legend(lines, sep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_legend_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_legend_+3A_sep">sep</code></td>
<td>
<p>a character specifying the separator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of legned parameters containing
</p>
<table>
<tr><td><code>title</code></td>
<td>
<p>a character specifying the title of legend. There should
not be the character same with separater within.</p>
</td></tr>
<tr><td><code>position_x</code></td>
<td>
<p>a number specifying the x axis px value of the
legend.</p>
</td></tr>
<tr><td><code>position_y</code></td>
<td>
<p>a number specifying the y axis px value of the
legend.</p>
</td></tr>
<tr><td><code>horizontal</code></td>
<td>
<p>To order legend entries horizontally instead of
vertically, set this parameter to 1</p>
</td></tr>
<tr><td><code>shapes</code></td>
<td>
<p>Shape should be a number between 1 and 6, or any
protein domain shape definition. 1-square, 2-circle, 3-star, 4-right pointing
triangle, 5-left pointing triangle, 6-checkmark</p>
</td></tr>
<tr><td><code>colors</code></td>
<td>
<p>define colors for each legend element (use hexadecimal,
RGB or RGBA notation; if using RGB/RGBA, COMMA cannot be used as SEPARATOR)</p>
</td></tr>
<tr><td><code>labels</code></td>
<td>
<p>The legend element label.There should not be the
character same with separater within.</p>
</td></tr>
<tr><td><code>shape_scales</code></td>
<td>
<p>For each shape, you can define a scaling factor
between 0 and 1.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>tree &lt;- system.file("extdata",
                    "tree_of_itol_templates.tree",
                    package = "itol.toolkit")
df_frequence &lt;- data.table::fread(system.file("extdata",
                                              "templates_frequence.txt",
                                              package = "itol.toolkit"))
## create unit
unit &lt;- create_unit(data = df_frequence,
                    key = "Quickstart",
                    type = "DATASET_SIMPLEBAR",
                    method = "mean",
                    tree = tree)
## write unit
file &lt;- tempfile()
write_unit(unit,file)
## Learn legend parameters
lines &lt;- line_clean(file=file)
sep = learn_separator(file = file)
learn_legend(lines = lines, sep = sep)
</code></pre>

<hr>
<h2 id='learn_line'>Learn paramter</h2><span id='topic+learn_line'></span>

<h3>Description</h3>

<p>learn paramter name and values based on the key name in the
front of line.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_line(lines, param, sep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_line_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_line_+3A_param">param</code></td>
<td>
<p>a charactor string of paramter key name. The key name should be
uppercase letters or '_' without spacing.</p>
</td></tr>
<tr><td><code id="learn_line_+3A_sep">sep</code></td>
<td>
<p>a charactor specifying the separator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a charactor string containing parameter value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tree &lt;- system.file("extdata",
                    "tree_of_itol_templates.tree",
                    package = "itol.toolkit")
data("template_groups")
df_group &lt;- data.frame(id = unique(template_groups$group),
                       data = unique(template_groups$group))
## create unit
unit &lt;- create_unit(data = df_group,
                    key = "Quickstart",
                    type = "DATASET_COLORSTRIP",
                    tree = tree)
## write unit
file &lt;- tempfile()
write_unit(unit,file)
## Learn parameter
lines &lt;- line_clean(file=file)
sep = learn_separator(file = file)
learn_line(lines = lines, param = "STRIP_WIDTH", sep = sep)
</code></pre>

<hr>
<h2 id='learn_profile'>Learn profile</h2><span id='topic+learn_profile'></span>

<h3>Description</h3>

<p>learn profile paramters as list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_profile(lines, sep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_profile_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_profile_+3A_sep">sep</code></td>
<td>
<p>a character specifying the separator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of profile parameters containing
</p>
<table>
<tr><td><code>name</code></td>
<td>
<p>a character specifying label, which is used in the legend
table</p>
</td></tr>
<tr><td><code>color</code></td>
<td>
<p>dataset color in the legend (use hexadecimal, RGB or
RGBA notation; if using RGB/RGBA, COMMA cannot be used as SEPARATOR)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>tree &lt;- system.file("extdata",
                    "tree_of_itol_templates.tree",
                    package = "itol.toolkit")
df_frequence &lt;- data.table::fread(system.file("extdata",
                                              "templates_frequence.txt",
                                              package = "itol.toolkit"))
## create unit
unit &lt;- create_unit(data = df_frequence,
                    key = "Quickstart",
                    type = "DATASET_HEATMAP",
                    tree = tree)
## write unit
file &lt;- tempfile()
write_unit(unit,file)
## Learn legend parameters
lines &lt;- line_clean(file=file)
sep = learn_separator(file = file)
learn_profile(lines = lines, sep = sep)
</code></pre>

<hr>
<h2 id='learn_separator'>Learn separator</h2><span id='topic+learn_separator'></span>

<h3>Description</h3>

<p>Learn 3 types of separators: tab, space, and comma.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_separator(lines = NULL, file = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_separator_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file. If the file
parameter is NULL, this parameter should be set.</p>
</td></tr>
<tr><td><code id="learn_separator_+3A_file">file</code></td>
<td>
<p>a character specifying the template file path. If this parameter
is setted, the lines parameter will be replaced.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character specifying the separator
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tree &lt;- system.file("extdata",
                    "tree_of_itol_templates.tree",
                    package = "itol.toolkit")
data("template_groups")
df_group &lt;- data.frame(id = unique(template_groups$group),
                       data = unique(template_groups$group))
## create unit
unit &lt;- create_unit(data = df_group,
                    key = "Quickstart",
                    type = "DATASET_COLORSTRIP",
                    tree = tree)
## write unit
file &lt;- tempfile()
write_unit(unit,file)
## Learn template type
learn_separator(file = file)
</code></pre>

<hr>
<h2 id='learn_subdf'>Learn sub data frame</h2><span id='topic+learn_subdf'></span>

<h3>Description</h3>

<p>Learn sub data frame from template file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_subdf(lines, type, sep, dataset_name = NULL, field_labels = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_subdf_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_subdf_+3A_type">type</code></td>
<td>
<p>template type</p>
</td></tr>
<tr><td><code id="learn_subdf_+3A_sep">sep</code></td>
<td>
<p>a character specifying the separator.</p>
</td></tr>
<tr><td><code id="learn_subdf_+3A_dataset_name">dataset_name</code></td>
<td>
<p>label in template file</p>
</td></tr>
<tr><td><code id="learn_subdf_+3A_field_labels">field_labels</code></td>
<td>
<p>sample ids for binary, heatmap, and other multi-column value templates</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame containing the data learned from template file
</p>

<hr>
<h2 id='learn_theme_align'>Learn align</h2><span id='topic+learn_theme_align'></span>

<h3>Description</h3>

<p>learn connection paramters as list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_theme_align(lines, sep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_theme_align_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_theme_align_+3A_sep">sep</code></td>
<td>
<p>a character specifying the separator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of align parameters containing
</p>

<hr>
<h2 id='learn_theme_alignment'>Learn alignment</h2><span id='topic+learn_theme_alignment'></span>

<h3>Description</h3>

<p>learn alignment paramters as list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_theme_alignment(lines, sep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_theme_alignment_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_theme_alignment_+3A_sep">sep</code></td>
<td>
<p>a character specifying the separator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of alignment parameters containing
</p>

<hr>
<h2 id='learn_theme_bar'>Learn bar</h2><span id='topic+learn_theme_bar'></span>

<h3>Description</h3>

<p>learn bar paramters as list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_theme_bar(lines, sep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_theme_bar_+3A_lines">lines</code></td>
<td>
<p>file lines</p>
</td></tr>
<tr><td><code id="learn_theme_bar_+3A_sep">sep</code></td>
<td>
<p>a character specifying the separator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of bar parameters containing
</p>

<hr>
<h2 id='learn_theme_basic_plot'>Learn basic plot</h2><span id='topic+learn_theme_basic_plot'></span>

<h3>Description</h3>

<p>learn basic plot paramters as list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_theme_basic_plot(lines, sep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_theme_basic_plot_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_theme_basic_plot_+3A_sep">sep</code></td>
<td>
<p>a character specifying the separator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of basic plot parameters containing
</p>

<hr>
<h2 id='learn_theme_basic_theme'>Learn basic theme</h2><span id='topic+learn_theme_basic_theme'></span>

<h3>Description</h3>

<p>learn basic theme paramters as list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_theme_basic_theme(lines, sep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_theme_basic_theme_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_theme_basic_theme_+3A_sep">sep</code></td>
<td>
<p>a character specifying the separator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of basic theme parameters containing
</p>

<hr>
<h2 id='learn_theme_binary'>Learn binary</h2><span id='topic+learn_theme_binary'></span>

<h3>Description</h3>

<p>learn binary paramters as list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_theme_binary(lines, sep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_theme_binary_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_theme_binary_+3A_sep">sep</code></td>
<td>
<p>a character specifying the separator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of binary chart parameters containing
</p>

<hr>
<h2 id='learn_theme_border'>Learn border</h2><span id='topic+learn_theme_border'></span>

<h3>Description</h3>

<p>learn border paramters as list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_theme_border(lines, sep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_theme_border_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_theme_border_+3A_sep">sep</code></td>
<td>
<p>a character specifying the separator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of border parameters containing
</p>

<hr>
<h2 id='learn_theme_common_themes'>Learn common themes</h2><span id='topic+learn_theme_common_themes'></span>

<h3>Description</h3>

<p>learn common theme paramters as list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_theme_common_themes(lines, sep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_theme_common_themes_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_theme_common_themes_+3A_sep">sep</code></td>
<td>
<p>a character specifying the separator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of common theme parameters containing
</p>

<hr>
<h2 id='learn_theme_connection'>Learn connection</h2><span id='topic+learn_theme_connection'></span>

<h3>Description</h3>

<p>learn connection paramters as list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_theme_connection(lines, sep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_theme_connection_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_theme_connection_+3A_sep">sep</code></td>
<td>
<p>a character specifying the separator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of connection parameters containing
</p>

<hr>
<h2 id='learn_theme_domain'>Learn domain</h2><span id='topic+learn_theme_domain'></span>

<h3>Description</h3>

<p>learn domain paramters as list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_theme_domain(lines, sep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_theme_domain_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_theme_domain_+3A_sep">sep</code></td>
<td>
<p>a character specifying the separator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of domain parameters containing
</p>

<hr>
<h2 id='learn_theme_externalshape'>Learn externalshape</h2><span id='topic+learn_theme_externalshape'></span>

<h3>Description</h3>

<p>learn connection paramters as list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_theme_externalshape(lines, sep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_theme_externalshape_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_theme_externalshape_+3A_sep">sep</code></td>
<td>
<p>a character specifying the separator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of external shape parameters containing
</p>

<hr>
<h2 id='learn_theme_heatmap'>Learn heatmap</h2><span id='topic+learn_theme_heatmap'></span>

<h3>Description</h3>

<p>learn heatmap paramters as list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_theme_heatmap(lines, sep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_theme_heatmap_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_theme_heatmap_+3A_sep">sep</code></td>
<td>
<p>a character specifying the separator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of heatmap parameters containing
</p>

<hr>
<h2 id='learn_theme_image'>Learn image</h2><span id='topic+learn_theme_image'></span>

<h3>Description</h3>

<p>learn connection paramters as list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_theme_image(lines, sep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_theme_image_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_theme_image_+3A_sep">sep</code></td>
<td>
<p>a character specifying the separator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of image parameters containing
</p>

<hr>
<h2 id='learn_theme_label'>Learn label</h2><span id='topic+learn_theme_label'></span>

<h3>Description</h3>

<p>learn label paramters as list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_theme_label(lines, sep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_theme_label_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_theme_label_+3A_sep">sep</code></td>
<td>
<p>a character specifying the separator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of label parameters containing
</p>
<table>
<tr><td><code>display</code></td>
<td>
<p>1/0 specifying display or hide the text labels above
each field column</p>
</td></tr>
<tr><td><code>size</code></td>
<td>
<p>a number specifying the size factor for the text labels</p>
</td></tr>
<tr><td><code>top</code></td>
<td>
<p>1/0 specifying the labels position. If 0, label text which
does not fit into the shape will be hidden</p>
</td></tr>
<tr><td><code>below</code></td>
<td>
<p>1/0 specifying the labels position. By default, internal
labels will be placed above the branches. If 1, labels will be below the
branches</p>
</td></tr>
<tr><td><code>rotation</code></td>
<td>
<p>a number specifying text label rotation angle</p>
</td></tr>
<tr><td><code>straight</code></td>
<td>
<p>1/0 specifying tree rotation. If set to 1, tree
rotation will not influence the individual label rotation</p>
</td></tr>
<tr><td><code>vertical</code></td>
<td>
<p>a number specifying the label vertical shift. Shift
internal labels vertically by this amount of pixels (positive or negative)</p>
</td></tr>
<tr><td><code>shift</code></td>
<td>
<p>a number specifying the label shift. text label shift in
pixels (positive or negative)</p>
</td></tr>
<tr><td><code>external_shift</code></td>
<td>
<p>1/0 specifying label external shift that add
extra horizontal shift to the external labels. Useful in unrooted display
mode to shift text labels further away from the node labels.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
  tree &lt;- system.file("extdata",
                      "tree_of_itol_templates.tree",
                      package = "itol.toolkit")
  tab_tmp &lt;- data.table::fread(system.file("extdata",
                                           "parameter_groups.txt",
                                           package = "itol.toolkit"))
  tab_id_group &lt;- tab_tmp[,c(1,2)]
  tab_tmp &lt;- tab_tmp[,-c(1,2)]
  tab_tmp_01 &lt;- convert_01(object = tab_tmp)
  tab_tmp_01 &lt;- cbind(tab_id_group,tab_tmp_01)
  order &lt;- c("type","separator","profile","field","common themes",
    "specific themes","data")
  tab_tmp_01_long &lt;- tab_tmp_01 %&gt;%
                       tidyr::gather(key = "variable",
                                     value = "value",
                                     c(-parameter,-group))
  template_start_group &lt;- tab_tmp_01_long %&gt;%
                            group_by(group,variable) %&gt;%
                            summarise(sublen = sum(value)) %&gt;%
                            tidyr::spread(key=variable,
                                          value=sublen)
  template_start_group$group &lt;- factor(template_start_group$group,
                                       levels = order)
  template_start_group &lt;- template_start_group %&gt;% arrange(group)
  start_group &lt;- data.frame(Var1 = template_start_group$group,
                            Freq = apply(template_start_group[,-1], 1, max))
  start_group$start &lt;- 0
  for (i in 2:nrow(start_group)) {
    start_group$start[i] &lt;- sum(start_group$Freq[1:(i-1)])
  }
  template_start_group[template_start_group == 0] &lt;- NA
  template_end_group &lt;- template_start_group[,2:(ncol(template_start_group)-1)] + start_group$start
  template_end_group &lt;- data.frame(group = order,template_end_group)
  template_end_group_long &lt;- template_end_group %&gt;%
                               tidyr::gather(key = "variable",
                                             value = "value",
                                             -group)
  names(template_end_group_long)[3] &lt;- "end"
  template_end_group_long$start &lt;- rep(start_group$start,
                                       length(unique(template_end_group_long$variable)))
  template_end_group_long &lt;- template_end_group_long %&gt;% na.omit()
  template_end_group_long$length &lt;- sum(start_group$Freq)
  template_end_group_long &lt;- template_end_group_long[,c(2,5,4,3,1)]
  template_end_group_long$group &lt;- factor(template_end_group_long$group,levels = order)
  unit &lt;- create_unit(data = template_end_group_long,
                      key = "Quickstart",
                      type = "DATASET_DOMAINS",
                      tree = tree)
  file &lt;- tempfile()
  write_unit(unit,file)
  lines &lt;- line_clean(file=file)
  sep = learn_separator(file = file)
  learn_theme_label(lines,sep)
</code></pre>

<hr>
<h2 id='learn_theme_linechart'>Learn linechart</h2><span id='topic+learn_theme_linechart'></span>

<h3>Description</h3>

<p>learn linechart paramters as list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_theme_linechart(lines, sep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_theme_linechart_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_theme_linechart_+3A_sep">sep</code></td>
<td>
<p>a character specifying the separator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of line chart parameters containing
</p>

<hr>
<h2 id='learn_theme_piechart'>Learn piechart</h2><span id='topic+learn_theme_piechart'></span>

<h3>Description</h3>

<p>learn piechart paramters as list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_theme_piechart(lines, sep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_theme_piechart_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_theme_piechart_+3A_sep">sep</code></td>
<td>
<p>a character specifying the separator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of pie chart parameters containing
</p>

<hr>
<h2 id='learn_theme_specific_themes'>Learn specific themes</h2><span id='topic+learn_theme_specific_themes'></span>

<h3>Description</h3>

<p>learn specific theme paramters as list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_theme_specific_themes(lines, sep, type)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_theme_specific_themes_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_theme_specific_themes_+3A_sep">sep</code></td>
<td>
<p>a character specifying the separator.</p>
</td></tr>
<tr><td><code id="learn_theme_specific_themes_+3A_type">type</code></td>
<td>
<p>template type</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of specific theme parameters containing
</p>

<hr>
<h2 id='learn_theme_strip_label'>Learn strip label</h2><span id='topic+learn_theme_strip_label'></span>

<h3>Description</h3>

<p>learn strip label paramters as list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_theme_strip_label(lines, sep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_theme_strip_label_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="learn_theme_strip_label_+3A_sep">sep</code></td>
<td>
<p>a charactor specifying the separator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of strip label parameters containing
</p>
<table>
<tr><td><code>display</code></td>
<td>
<p>0/1 specifying display or hide the individual label
inside each colored strip (when defined in the data below)</p>
</td></tr>
<tr><td><code>width</code></td>
<td>
<p>a number specifying width of the colored strip</p>
</td></tr>
<tr><td><code>size</code></td>
<td>
<p>a number specifying strip label size factor (relative to
the tree leaf labels)</p>
</td></tr>
<tr><td><code>color</code></td>
<td>
<p>define colors for each strip label element (use
hexadecimal, RGB or RGBA notation; if using RGB/RGBA, COMMA cannot be used
as SEPARATOR)</p>
</td></tr>
<tr><td><code>color_branches</code></td>
<td>
<p>1/0 specifying branches of the tree will or not
be colored according to the colors of the strips above the leaves. When all
children of a node have the same color, it will be colored the same, ie. the
color will propagate inwards towards the root.</p>
</td></tr>
<tr><td><code>position</code></td>
<td>
<p>a character specifying position of the strip label
within the box; 'top', 'center' or 'bottom'</p>
</td></tr>
<tr><td><code>shift</code></td>
<td>
<p>a number specifying strip label shift in pixels
(positive or negative)</p>
</td></tr>
<tr><td><code>rotation</code></td>
<td>
<p>a number specifying rotation of the strip labels;
used only in rectangular tree display mode</p>
</td></tr>
<tr><td><code>outline_width</code></td>
<td>
<p>a number specifying draw a black outline around
the text (width in pixels)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>tree &lt;- system.file("extdata",
                    "tree_of_itol_templates.tree",
                    package = "itol.toolkit")
data("template_groups")
df_group &lt;- data.frame(id = unique(template_groups$group),
                       data = unique(template_groups$group))
## create unit
unit &lt;- create_unit(data = df_group,
                    key = "Quickstart",
                    type = "DATASET_COLORSTRIP",
                    tree = tree)
## write unit
file &lt;- tempfile()
write_unit(unit,file)
## Learn parameter
lines &lt;- line_clean(file=file)
sep = learn_separator(file = file)
learn_theme_strip_label(lines = lines, sep = sep)
</code></pre>

<hr>
<h2 id='learn_type'>Learn template type</h2><span id='topic+learn_type'></span>

<h3>Description</h3>

<p>Extract first line of template to learn type information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>learn_type(file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="learn_type_+3A_file">file</code></td>
<td>
<p>template file. All the template files should follow the format
rules as same with iTOL offical template files. The files should start with
the following headers: &quot;COLLAPSE&quot;, &quot;PRUNE&quot;, &quot;SPACING&quot;, &quot;TREE_COLORS&quot;,
&quot;DATASET_STYLE&quot;, &quot;LABELS&quot;, &quot;DATASET_TEXT&quot;, &quot;DATASET_COLORSTRIP&quot;,
&quot;DATASET_BINARY&quot;, &quot;DATASET_GRADIENT&quot;, &quot;DATASET_HEATMAP&quot;, &quot;DATASET_SYMBOL&quot;,
&quot;DATASET_EXTERNALSHAPE&quot;, &quot;DATASET_DOMAINS&quot;, &quot;DATASET_SIMPLEBAR&quot;,
&quot;DATASET_MULTIBAR&quot;, &quot;DATASET_BOXPLOT&quot;, &quot;DATASET_LINECHART&quot;,
&quot;DATASET_PIECHART&quot;, &quot;DATASET_ALIGNMENT&quot;, &quot;DATASET_CONNECTION&quot;,
&quot;DATASET_IMAGE&quot;, &quot;POPUP_INFO&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character specifying header information
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tree &lt;- system.file("extdata",
                    "tree_of_itol_templates.tree",
                    package = "itol.toolkit")
data("template_groups")
df_group &lt;- data.frame(id = unique(template_groups$group),
                       data = unique(template_groups$group))
## create unit
unit &lt;- create_unit(data = df_group,
                    key = "Quickstart",
                    type = "DATASET_COLORSTRIP",
                    tree = tree)
## write unit
file &lt;- tempfile()
write_unit(unit,file)
## Learn template type
learn_type(file)
</code></pre>

<hr>
<h2 id='line_clean'>Filter out comments and empty lines</h2><span id='topic+line_clean'></span>

<h3>Description</h3>

<p>Remove the lines start with # or without any information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>line_clean(lines = NULL, file = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="line_clean_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings. The strings are containing the
lines of template file. If the file parameter is NULL, this parameter should
be set.</p>
</td></tr>
<tr><td><code id="line_clean_+3A_file">file</code></td>
<td>
<p>a character specifying the template file path. If this parameter
is setted, the lines parameter will be replaced.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of character strings
</p>


<h3>Examples</h3>

<pre><code class='language-R'>strs &lt;- c("#comment","DATA")
line_clean(lines=strs)
</code></pre>

<hr>
<h2 id='line_split'>Split lines into two parts</h2><span id='topic+line_split'></span>

<h3>Description</h3>

<p>Split lines based on the data block marker
</p>


<h3>Usage</h3>

<pre><code class='language-R'>line_split(lines, param = "data")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="line_split_+3A_lines">lines</code></td>
<td>
<p>a vector of character strings from template file.</p>
</td></tr>
<tr><td><code id="line_split_+3A_param">param</code></td>
<td>
<p>&quot;theme&quot; or &quot;data&quot; for the theme paramters or the data lines</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of character strings containing data or theme information
</p>

<hr>
<h2 id='merge_unit'>Merge units</h2><span id='topic+merge_unit'></span>

<h3>Description</h3>

<p>Merge two itol.unit with same type. The second unit data will be
added into the first one.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>merge_unit(obj1, obj2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="merge_unit_+3A_obj1">obj1</code></td>
<td>
<p>a itol.unit object specifying the first unit</p>
</td></tr>
<tr><td><code id="merge_unit_+3A_obj2">obj2</code></td>
<td>
<p>a itol.unit object specifying the second unit</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a itol.unit object with merged data
</p>

<hr>
<h2 id='search_tree_file'>Search tree file</h2><span id='topic+search_tree_file'></span>

<h3>Description</h3>

<p>Search Newick format tree file in dir
</p>


<h3>Usage</h3>

<pre><code class='language-R'>search_tree_file(
  dir = getwd(),
  n = "first",
  method = "mtime",
  max_size = 10240
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="search_tree_file_+3A_dir">dir</code></td>
<td>
<p>a path with tree file and other template files</p>
</td></tr>
<tr><td><code id="search_tree_file_+3A_n">n</code></td>
<td>
<p>'first', 'last', 'all'</p>
</td></tr>
<tr><td><code id="search_tree_file_+3A_method">method</code></td>
<td>
<p>sort by 'mtime', 'ctime', 'atime', 'character'</p>
</td></tr>
<tr><td><code id="search_tree_file_+3A_max_size">max_size</code></td>
<td>
<p>limit file size to accelerate searching</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of characters specifying the file name
</p>

<hr>
<h2 id='show+2Citol.hub-method'>show method for S4 class itol.hub</h2><span id='topic+show+2Citol.hub-method'></span>

<h3>Description</h3>

<p>show method for S4 class itol.hub
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'itol.hub'
show(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show+2B2Citol.hub-method_+3A_object">object</code></td>
<td>
<p>An object of class itol.hub</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a stdout screen information about itol.hub object
</p>

<hr>
<h2 id='template_groups'>template groups</h2><span id='topic+template_groups'></span>

<h3>Description</h3>

<p>Templates were clustered into 5 groups by parameter similarity.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>template_groups
</code></pre>


<h3>Format</h3>



<h4><code>template_groups</code></h4>

<p>A data frame with template group clustering reslut:
</p>

<dl>
<dt>template</dt><dd><p>All the 23 template types of iTOL</p>
</dd>
<dt>group</dt><dd><p>5 clustring gourps:
Tree structure: This group only controls the topology of tree branch
merging, filtering, and spacing. There are no style and rich annotation
data, even though most of the annotation data only include single-column id
information and do not contain any dataset base information, sample
information, or common and specific style information. It is a particularly
simple type of template.
Theme style: This does not change any topology or add any text information
but only changes the color scheme, line type and width, and font style and
size of existing information. This is an extremely comprehensive and
diverse type of annotation information.
Text: This group contains any templates with added text information. With
super flexible and convenient annotation methods, users can modify even a
single character's style in HTML. Users can also modify the text annotation
style of nodes and branches in batch based on matching conditions in
itol.hub objects, which require regular expression replacement and
precise data filtering. This high-frequency data processing is difficult to
achieve and retain the workflow in the EXCEL-based editor.
Basic plot: This group contains basic visualization methods. From a
functional point of view, this is the most feature-rich class of templates.
The similarity of the parameters within this part is very high.The
structured and uniform organization of these templates can greatly reduce
code redundancy and the user workload of data organizing. Moreover,
boxplot, which is not a regular enough data annotation template, can be
automatedly manipulated in R. The lack of template data structure makes
using frequency unbalanced among research. Hence, the frequency of using
these low-frequency templates can be increased.
Advanced plot: Compared with the basic visualization methods, these
visualization methods contain more comprehensive data types and often
require third-party tools for input data processing. But they are the most
extensible type of visualization methods for iTOL.
</p>
</dd>
</dl>
<p>...

</p>


<hr>
<h2 id='template_parameters_count'>template parameters count</h2><span id='topic+template_parameters_count'></span>

<h3>Description</h3>

<p>Template types and parameters count matrix. The row names are template types.
The column names are parameters short ids. The parameters are including the
themes parameters and data column names. All the details are introduced in
the full-page Excel file on GitHub.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>template_parameters_count
</code></pre>


<h3>Format</h3>



<h4><code>template_parameters_count</code></h4>

<p>A data frame with template types and parameters 0/1 count matrix:
</p>

<dl>
<dt>V1</dt><dd><p>head. file type head notice</p>
</dd>
<dt>V2</dt><dd><p>separator. select the separator which is used to delimit the
data below (TAB,SPACE or COMMA).This separator must be used throughout this
file.</p>
</dd>
<dt>V3</dt><dd><p>dataset name. label is used in the legend table</p>
</dd>
</dl>
<p>...

</p>


<hr>
<h2 id='train_theme'>Train inbuilt theme</h2><span id='topic+train_theme'></span>

<h3>Description</h3>

<p>The inbuilt theme is the template of all output file and unit.
Using this function can train the inbuilt theme object by custom files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>train_theme(dir = getwd())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="train_theme_+3A_dir">dir</code></td>
<td>
<p>the path of tree file and template files</p>
</td></tr>
</table>


<h3>Value</h3>

<p>replace the global variable inbuilt_themes
</p>

<hr>
<h2 id='unite_rows'>Paste rows</h2><span id='topic+unite_rows'></span>

<h3>Description</h3>

<p>Paste rows group by key column
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unite_rows(df)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="unite_rows_+3A_df">df</code></td>
<td>
<p>input data frame</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with pasted row by same id
</p>

<hr>
<h2 id='use.theme'>Extract theme from inbuilt_themes</h2><span id='topic+use.theme'></span>

<h3>Description</h3>

<p>Extract theme from 23 template types in inbuilt_themes data
in package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>use.theme(type, style = "default")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="use.theme_+3A_type">type</code></td>
<td>
<p>a character specifying the template type used for extracting.
Following choices are possible: &quot;COLLAPSE&quot;,&quot;PRUNE&quot;,&quot;SPACING&quot;,&quot;TREE_COLORS&quot;,
&quot;DATASET_STYLE&quot;,&quot;LABELS&quot;,&quot;DATASET_TEXT&quot;,&quot;DATASET_COLORSTRIP&quot;,
&quot;DATASET_BINARY&quot;,&quot;DATASET_GRADIENT&quot;,&quot;DATASET_HEATMAP&quot;,&quot;DATASET_SYMBOL&quot;,
&quot;DATASET_EXTERNALSHAPE&quot;,&quot;DATASET_DOMAINS&quot;,&quot;DATASET_SIMPLEBAR&quot;,
&quot;DATASET_MULTIBAR&quot;,&quot;DATASET_BOXPLOT&quot;,&quot;DATASET_LINECHART&quot;,&quot;DATASET_PIECHART&quot;,
&quot;DATASET_ALIGNMENT&quot;,&quot;DATASET_CONNECTION&quot;,&quot;DATASET_IMAGE&quot;,&quot;POPUP_INFO.</p>
</td></tr>
<tr><td><code id="use.theme_+3A_style">style</code></td>
<td>
<p>a character specifying the specific version of template type
used for extracting. The default value is &quot;default&quot; style for all types.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a itol.theme object containing
</p>
<table>
<tr><td><code>type</code></td>
<td>
<p>This group holds information about the template type of
the data only. This is a very critical piece of information. In many
functions of the itol.toolkit package, the template type information is
used to determine the different data processing and input/output methods.</p>
</td></tr>
<tr><td><code>sep</code></td>
<td>
<p>This group holds data separator information only.
This is one of the most important parameters for data reading and output.
It is a separate category because it is frequently used and is an input
parameter for other subsequent parameters to be read.</p>
</td></tr>
<tr><td><code>profile</code></td>
<td>
<p>This group contains basic information about the
dataset, such as the dataset name and a color label to distinguish the
dataset. The dataset name is extremely important. This parameter is used
almost throughout the data processing of the itol.toolkit package.
With the content of this parameter as the key value, the data and theme
information of the dataset are associated. In turn, high throughput
learning and writing of large-scale data can be achieved. This parameter
is not included in some template types with a particularly simple structure,
so we choose a file name or a user-defined method as the key value.</p>
</td></tr>
<tr><td><code>field</code></td>
<td>
<p>This group contains information about each sample
within the dataset, and this type of parameter exists only for multi-sample
data. This information even includes the clustering tree between samples.
This information is usually stored as part of the column names in the
metadata part or abundance information of the itol.hub object.</p>
</td></tr>
<tr><td><code>common_themes</code></td>
<td>
<p>These themes are used at high frequency in
different templates. These parameters are small in number but constitute some
common features of iTOL visual style settings, such as legend, margin, etc.</p>
</td></tr>
<tr><td><code>specific_themes</code></td>
<td>
<p>These themes are used only in specific
templates. The number of these parameters is very large. However, most of
them are used in only one template to control the style details of the
visualization. By unifying these parameters and calling them according to the
template type, users can perform secondary development and data processing
with a high degree of parameter aggregation without worrying too much about
the differences between different template types.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>theme &lt;- use.theme("COLLAPSE")
</code></pre>

<hr>
<h2 id='write_hub'>Write all data object into files</h2><span id='topic+write_hub'></span>

<h3>Description</h3>

<p>Write itol.hub object into template files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_hub(object, dir = getwd())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_hub_+3A_object">object</code></td>
<td>
<p>itol.hub object holds the complete data and theme information.
This is an all-in-one object that collects all the information. Based on this
object, it is possible to export template files directly. It can also be
converted to an operation unit object for the detailed processing of
individual datasets. The object can also be saved locally for reproducible
visualization to share. This object contains species or sample clustering
trees, sequence alignment, species abundance or gene expression table,
multi-level taxonomic information, metadata, and a list of custom themes.
Each element name in the theme list is prefixed with the column name of the
metadata and is used to establish the association between the theme and the
data. For some special dataset types, the storage location is not in the
metadata, but it also conforms to the association with themes. The program
automatically decides where to read the data according to the different
output template types. The user only needs to explicitly define the theme
name to be output consistent with the data name prefix.</p>
</td></tr>
<tr><td><code id="write_hub_+3A_dir">dir</code></td>
<td>
<p>output dir path. Define the output files location using absolute
or relative path. The template files will output by the key information from
theme name in the hub object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, only output template files
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tree &lt;- system.file("extdata",
                    "tree_of_itol_templates.tree",
                    package = "itol.toolkit")
hub &lt;- create_hub(tree = tree)
data("template_groups")
df_group &lt;- data.frame(id = unique(template_groups$group),
                       data = unique(template_groups$group))
## create unit
unit_1 &lt;- create_unit(data = df_group,
                      key = "Quickstart_1",
                      type = "TREE_COLORS",
                      subtype = "clade",
                      line_type = c(rep("normal",4),"dashed"),
                      size_factor = 5,
                      tree = tree)
unit_2 &lt;- create_unit(data = df_group,
                      key = "Quickstart_2",
                      type = "DATASET_COLORSTRIP",
                      tree = tree)
## write hub
hub &lt;- hub + unit_1 + unit_2
write_hub(hub,tempdir())
</code></pre>

<hr>
<h2 id='write_raw'>Write raw data into files</h2><span id='topic+write_raw'></span>

<h3>Description</h3>

<p>Write raw data in itol.hub object into files
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_raw(object, dir, title)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_raw_+3A_object">object</code></td>
<td>
<p>itol.hub object holds the complete data and theme information.
This is an all-in-one object that collects all the information. Based on this
object, it is possible to export template files directly. It can also be
converted to an operation unit object for the detailed processing of
individual datasets. The object can also be saved locally for reproducible
visualization to share. This object contains species or sample clustering
trees, sequence alignment, species abundance or gene expression table,
multi-level taxonomic information, metadata, and a list of custom themes.
Each element name in the theme list is prefixed with the column name of the
metadata and is used to establish the association between the theme and the
data. For some special dataset types, the storage location is not in the
metadata, but it also conforms to the association with themes. The program
automatically decides where to read the data according to the different
output template types. The user only needs to explicitly define the theme
name to be output consistent with the data name prefix.</p>
</td></tr>
<tr><td><code id="write_raw_+3A_dir">dir</code></td>
<td>
<p>output dir path. Define the output files location using absolute
or relative path. The raw data will write into files. The following raw data
will be outputted: main tree, sample tree, alignment sequences, abundance
count table, taxonomy table, metadata on nodes and tips.</p>
</td></tr>
<tr><td><code id="write_raw_+3A_title">title</code></td>
<td>
<p>files name title string. This character specified the prefix of
raw data files.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, only output raw data files
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tree &lt;- system.file("extdata",
                    "tree_of_itol_templates.tree",
                    package = "itol.toolkit")
hub &lt;- create_hub(tree = tree)
df_values &lt;- data.table::fread(system.file("extdata",
                                           "templates_frequence.txt",
                                           package = "itol.toolkit"))
unit &lt;- create_unit(data = df_values,
                    key = "Quickstart",
                    type = "DATASET_HEATMAP",
                    tree = tree)
hub &lt;- hub + unit
write_raw(hub,tempdir(),"Quickstart")
</code></pre>

<hr>
<h2 id='write_unit'>Write unit object into file</h2><span id='topic+write_unit'></span>

<h3>Description</h3>

<p>Write itol.unit object into template file. This function will
using the type information in unit object to decide different output methods
for the template formats.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_unit(unit, file = getwd())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_unit_+3A_unit">unit</code></td>
<td>
<p>unit object. The unit object holds the data and theme of a single
dataset. This is the smallest data operation unit. At this level, individual
data can be fine-tuned. It is also possible to extract the style of a unit
for use in other units. It is also possible to use many units to learn a
complete itol.hub object. Almost all specific data operations behind the
itol.toolkit package are performed at the unit level. Because itol.hub
objects have comprehensive information, but to ensure that the correspondence
with phylogenetic branches or nodes remains consistent when different data
types are saved, many complex data aggregations are saved, which does not
facilitate data processing. Therefore, in the actual data processing process,
unit objects are generated from the itol.hub object and then processed.</p>
</td></tr>
<tr><td><code id="write_unit_+3A_file">file</code></td>
<td>
<p>output file path. Define the output file location and file name
using absolute or relative path.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, only output a template file
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tree &lt;- system.file("extdata",
                    "tree_of_itol_templates.tree",
                    package = "itol.toolkit")
data("template_groups")
df_group &lt;- data.frame(id = unique(template_groups$group),
                       data = unique(template_groups$group))
## create unit
unit &lt;- create_unit(data = df_group,
                    key = "Quickstart",
                    type = "DATASET_COLORSTRIP",
                    tree = tree)
## write unit
write_unit(unit,tempfile())
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
