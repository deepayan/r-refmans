<!DOCTYPE html><html><head><title>Help for package gofastr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {gofastr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#as_dtm'><p>Coerce Various Object Into a <code>DocumentTermMatrix</code>/<code>TermDocumentMatrix</code></p></a></li>
<li><a href='#filter_documents'><p>Remove Documents Below a Threshold from a TermDocumentMatrix/DocumentTermMatrix</p></a></li>
<li><a href='#filter_tf_idf'><p>Remove Words Below a TF-IDF Threshold from a TermDocumentMatrix/DocumentTermMatrix</p></a></li>
<li><a href='#filter_words'><p>Remove Words Below a Threshold from a TermDocumentMatrix/DocumentTermMatrix</p></a></li>
<li><a href='#gofastr'><p>Fast DocumentTermMatrix and TermDocumentMatrix Creation</p></a></li>
<li><a href='#partial_republican_debates_2015'><p>2015 U.S. Partial Republican Primary Presidential Debates</p></a></li>
<li><a href='#presidential_debates_2012'><p>2012 U.S. Presidential Debates</p></a></li>
<li><a href='#q_dtm'><p>Quick DocumentTermMatrix</p></a></li>
<li><a href='#q_tdm'><p>Quick TermDocumentMatrix</p></a></li>
<li><a href='#remove_stopwords'><p>Remove Stopwords from a TermDocumentMatrix/DocumentTermMatrix</p></a></li>
<li><a href='#select_documents'><p>Select Documents rom a TermDocumentMatrix/DocumentTermMatrix</p></a></li>
<li><a href='#sub_in_na'><p>Regex Sub to Missing</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Fast DocumentTermMatrix and TermDocumentMatrix Creation</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.0</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Tyler Rinker &lt;tyler.rinker@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Harness the power of 'quanteda', 'data.table' &amp; 'stringi' to quickly generate 'tm' DocumentTermMatrix
             and TermDocumentMatrix data structures.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.2)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table (&ge; 1.9.5), quanteda, slam, SnowballC, stats, tm</td>
</tr>
<tr>
<td>Date:</td>
<td>2017-12-16</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.0.1</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://github.com/trinker/gofastr">http://github.com/trinker/gofastr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="http://github.com/trinker/gofastr/issues">http://github.com/trinker/gofastr/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2017-12-16 21:25:10 UTC; Tyler</td>
</tr>
<tr>
<td>Author:</td>
<td>Tyler Rinker [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2017-12-16 21:39:50 UTC</td>
</tr>
</table>
<hr>
<h2 id='as_dtm'>Coerce Various Object Into a <code>DocumentTermMatrix</code>/<code>TermDocumentMatrix</code></h2><span id='topic+as_dtm'></span><span id='topic+as_tdm'></span>

<h3>Description</h3>

<p>Convenience functions to convert a objects from different packages into either a <code>tm::DocumentTermMatrix</code> or <code>tm::TermDocumentMatrix</code> object.  Grouping variables are used as the row/column names for the <code>DocumentTermMatrix</code>/<code>TermDocumentMatrix</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_dtm(x, weighting = tm::weightTf, docs = NULL, pos = TRUE, ...)

as_tdm(x, weighting = tm::weightTf, docs = NULL, pos = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_dtm_+3A_x">x</code></td>
<td>
<p>A data object.</p>
</td></tr>
<tr><td><code id="as_dtm_+3A_weighting">weighting</code></td>
<td>
<p>A weighting function capable of handling a <code>tm::DocumentTermMatrix</code>. It defaults to <code>weightTf</code> for term frequency weighting. Available weighting functions shipped with the <span class="pkg">tm</span> package are <code>weightTf</code>, <code>weightTfIdf</code>, <code>weightBin</code>, and <code>weightSMART</code>.</p>
</td></tr>
<tr><td><code id="as_dtm_+3A_docs">docs</code></td>
<td>
<p>The vector of integers or character strings denoting document
columns.</p>
</td></tr>
<tr><td><code id="as_dtm_+3A_pos">pos</code></td>
<td>
<p>logical.  If <code>TRUE</code> parts of speech will be used.  If
<code>FALSE</code> the corresponding tokens will be used.</p>
</td></tr>
<tr><td><code id="as_dtm_+3A_...">...</code></td>
<td>
<p>ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>tm::DocumentTermMatrix</code> or <code>tm::TermDocumentMatrix</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>with(partial_republican_debates_2015,
    as_dtm(dialogue, paste(location, element_id, sentence_id, sep = "_"))
)

as_dtm(mtcars)
as_dtm(CO2, docs = c('Plant', 'Type', 'Treatment'))
## Not run: 
## termco object to DTM/TDM
library(termco)
as_dtm(markers)
as_dtm(markers,weighting = tm::weightTfIdf)
as_tdm(markers)

cosine_distance &lt;- function (x, ...) {
    x &lt;- t(slam::as.simple_triplet_matrix(x))
    stats::as.dist(1 - slam::crossprod_simple_triplet_matrix(x)/(sqrt(slam::col_sums(x^2) %*%
        t(slam::col_sums(x^2)))))
}


mod &lt;- hclust(cosine_distance(as_dtm(markers)))
plot(mod)
rect.hclust(mod, k = 5, border = "red")

(clusters &lt;- cutree(mod, 5))

## Parts of speech to DTM/TDM
library(tagger)
library(dplyr)
data(presidential_debates_2012_pos)

pos &lt;- presidential_debates_2012_pos %&gt;%
    select_tags(c("NN", "NNP", "NNPS", "NNS"))

as_dtm(pos_text)
as_dtm(pos_text, pos=FALSE)

as_tdm(pos_text)
as_tdm(pos_text, pos=FALSE)

presidential_debates_2012_pos %&gt;%
    as_basic() %&gt;%
    as_dtm()

## End(Not run)
</code></pre>

<hr>
<h2 id='filter_documents'>Remove Documents Below a Threshold from a TermDocumentMatrix/DocumentTermMatrix</h2><span id='topic+filter_documents'></span>

<h3>Description</h3>

<p>Remove documents from a <code><a href="tm.html#topic+TermDocumentMatrix">TermDocumentMatrix</a></code>
or <code><a href="tm.html#topic+DocumentTermMatrix">DocumentTermMatrix</a></code> not meeting a <code><a href="base.html#topic+rowSums">rowSums</a></code>/
<code><a href="base.html#topic+colSums">colSums</a></code> threshold.  Useful for removing empty documents.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_documents(x, min = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_documents_+3A_x">x</code></td>
<td>
<p>A <code><a href="tm.html#topic+TermDocumentMatrix">TermDocumentMatrix</a></code> or <code><a href="tm.html#topic+DocumentTermMatrix">DocumentTermMatrix</a></code>.</p>
</td></tr>
<tr><td><code id="filter_documents_+3A_min">min</code></td>
<td>
<p>A minimal threshold that a documents row/column must sum to.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="tm.html#topic+TermDocumentMatrix">TermDocumentMatrix</a></code> or <code><a href="tm.html#topic+DocumentTermMatrix">DocumentTermMatrix</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>(x &lt;-with(presidential_debates_2012, q_dtm(dialogue, paste(time, tot, sep = "_"))))
filter_documents(x)
(y &lt;- with(presidential_debates_2012, q_tdm(dialogue, paste(time, tot, sep = "_"))))
filter_documents(y)
</code></pre>

<hr>
<h2 id='filter_tf_idf'>Remove Words Below a TF-IDF Threshold from a TermDocumentMatrix/DocumentTermMatrix</h2><span id='topic+filter_tf_idf'></span>

<h3>Description</h3>

<p>Remove words from a <code><a href="tm.html#topic+TermDocumentMatrix">TermDocumentMatrix</a></code>
or <code><a href="tm.html#topic+DocumentTermMatrix">DocumentTermMatrix</a></code> not meeting a tf-idf threshold.  Code
is based on Gruen &amp; Hornik's (2011) code but allows for easier chaining and
extends the filtering to a <code><a href="tm.html#topic+TermDocumentMatrix">TermDocumentMatrix</a></code>.  This can be
used to remove words that appear too frequently in a corpus, therefore these
words do not carry much information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_tf_idf(x, min = NULL, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_tf_idf_+3A_x">x</code></td>
<td>
<p>A <code><a href="tm.html#topic+TermDocumentMatrix">TermDocumentMatrix</a></code> or <code><a href="tm.html#topic+DocumentTermMatrix">DocumentTermMatrix</a></code>.</p>
</td></tr>
<tr><td><code id="filter_tf_idf_+3A_min">min</code></td>
<td>
<p>A minimal threshold that a word tf-idf must exceed.  If <code>min = NULL</code>
the median of the tf-idf will be used.</p>
</td></tr>
<tr><td><code id="filter_tf_idf_+3A_verbose">verbose</code></td>
<td>
<p>logical.  If <code>TRUE</code> the summary stats from the tf-idf are
printed.  This can be useful for exploration and setting the <code>min</code> value.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="tm.html#topic+TermDocumentMatrix">TermDocumentMatrix</a></code> or <code><a href="tm.html#topic+DocumentTermMatrix">DocumentTermMatrix</a></code>.
</p>


<h3>Author(s)</h3>

<p>Bettina Gr\&quot;un, Kurt Hornik, and Tyler Rinker &lt;tyler.rinker@gmail.com&gt;.
</p>


<h3>References</h3>

<p>Bettina Gruen &amp; Kurt Hornik (2011). topicmodels: An R Package for
Fitting Topic Models. Journal of Statistical Software, 40(13), 1-30.
<a href="http://www.jstatsoft.org/article/view/v040i13/v40i13.pdf">http://www.jstatsoft.org/article/view/v040i13/v40i13.pdf</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>(x &lt;-with(presidential_debates_2012, q_dtm(dialogue, paste(person, time, sep = "_"))))
filter_tf_idf(x)
filter_tf_idf(x, .5)
filter_tf_idf(x, verbose=TRUE)
(y &lt;- with(presidential_debates_2012, q_tdm(dialogue, paste(person, time, sep = "_"))))
filter_tf_idf(y)
</code></pre>

<hr>
<h2 id='filter_words'>Remove Words Below a Threshold from a TermDocumentMatrix/DocumentTermMatrix</h2><span id='topic+filter_words'></span>

<h3>Description</h3>

<p>Remove words from a <code><a href="tm.html#topic+TermDocumentMatrix">TermDocumentMatrix</a></code>
or <code><a href="tm.html#topic+DocumentTermMatrix">DocumentTermMatrix</a></code> not meeting a <code><a href="base.html#topic+rowSums">rowSums</a></code>/
<code><a href="base.html#topic+colSums">colSums</a></code> threshold.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_words(x, min = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_words_+3A_x">x</code></td>
<td>
<p>A <code><a href="tm.html#topic+TermDocumentMatrix">TermDocumentMatrix</a></code> or <code><a href="tm.html#topic+DocumentTermMatrix">DocumentTermMatrix</a></code>.</p>
</td></tr>
<tr><td><code id="filter_words_+3A_min">min</code></td>
<td>
<p>A minimal threshold that a words row/column must sum to.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="tm.html#topic+TermDocumentMatrix">TermDocumentMatrix</a></code> or <code><a href="tm.html#topic+DocumentTermMatrix">DocumentTermMatrix</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>(x &lt;-with(presidential_debates_2012, q_dtm(dialogue, paste(time, tot, sep = "_"))))
filter_words(x)
filter_words(x, 5)
(y &lt;- with(presidential_debates_2012, q_tdm(dialogue, paste(time, tot, sep = "_"))))
filter_words(y, 6)
</code></pre>

<hr>
<h2 id='gofastr'>Fast DocumentTermMatrix and TermDocumentMatrix Creation</h2><span id='topic+gofastr'></span><span id='topic+package-gofastr'></span><span id='topic+gofastr-package'></span>

<h3>Description</h3>

<p>This package does one thing...It harness the power of <span class="pkg">quanteda</span>,
<span class="pkg">data.table</span> &amp; <span class="pkg">stringi</span> to quickly generate <span class="pkg">tm</span>
<code><a href="tm.html#topic+TermDocumentMatrix">TermDocumentMatrix</a></code> &amp; <code><a href="tm.html#topic+DocumentTermMatrix">DocumentTermMatrix</a></code>
data structures without creating a <code><a href="tm.html#topic+Corpus">Corpus</a></code> first.
</p>

<hr>
<h2 id='partial_republican_debates_2015'>2015 U.S. Partial Republican Primary Presidential Debates</h2><span id='topic+partial_republican_debates_2015'></span>

<h3>Description</h3>

<p>A dataset containing a cleaned version of four primary presidential debates for
the 2016 election.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(partial_republican_debates_2015)
</code></pre>


<h3>Format</h3>

<p>A data frame with 7405 rows and 5 variables</p>


<h3>Details</h3>


<ul>
<li><p> location. Where debate took place
</p>
</li>
<li><p> person. The speaker
</p>
</li>
<li><p> dialogue. The words spoken
</p>
</li>
<li><p> element_id. Original line number (turn of talk) within location
</p>
</li>
<li><p> sentence_id. Sentence number within <code>element_id</code>
</p>
</li></ul>



<h3>References</h3>

<p><a href="http://www.presidency.ucsb.edu">http://www.presidency.ucsb.edu</a>
</p>

<hr>
<h2 id='presidential_debates_2012'>2012 U.S. Presidential Debates</h2><span id='topic+presidential_debates_2012'></span>

<h3>Description</h3>

<p>A dataset containing a cleaned version of all three presidential debates for
the 2012 election.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(presidential_debates_2012)
</code></pre>


<h3>Format</h3>

<p>A data frame with 2912 rows and 4 variables</p>


<h3>Details</h3>


<ul>
<li><p> person. The speaker
</p>
</li>
<li><p> tot. Turn of talk
</p>
</li>
<li><p> dialogue. The words spoken
</p>
</li>
<li><p> time. Variable indicating which of the three debates the dialogue is from
</p>
</li></ul>


<hr>
<h2 id='q_dtm'>Quick DocumentTermMatrix</h2><span id='topic+q_dtm'></span><span id='topic+q_dtm_stem'></span>

<h3>Description</h3>

<p>Make a <code><a href="tm.html#topic+DocumentTermMatrix">DocumentTermMatrix</a></code> from a vector of text and and
optional vector of documents.  To stem a document as well use the
<code>q_dtm_stem</code> version of <code>q_dtm</code> which uses <span class="pkg">SnowballC</span>'s
<code><a href="SnowballC.html#topic+wordStem">wordStem</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>q_dtm(text, docs = seq_along(text), to = "tm", keep.hyphen = FALSE,
  ngrams = NULL, ...)

q_dtm_stem(text, docs = seq_along(text), to = "tm", keep.hyphen = FALSE,
  ngrams = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="q_dtm_+3A_text">text</code></td>
<td>
<p>A vector of strings.</p>
</td></tr>
<tr><td><code id="q_dtm_+3A_docs">docs</code></td>
<td>
<p>A vector of document names.</p>
</td></tr>
<tr><td><code id="q_dtm_+3A_to">to</code></td>
<td>
<p>target conversion format, consisting of the name of the package into
whose document-term matrix representation the dfm will be converted:
</p>

<dl>
<dt><code>"lda"</code></dt><dd><p>a list with components &quot;documents&quot; and &quot;vocab&quot; as needed by
<code>lda.collapsed.gibbs.sampler</code> from the <span class="pkg">lda</span> package</p>
</dd>
<dt><code>"tm"</code></dt><dd><p>a <a href="tm.html#topic+DocumentTermMatrix">DocumentTermMatrix</a> from the <span class="pkg">tm</span> package</p>
</dd>
<dt><code>"stm"</code></dt><dd><p>the  format for the <span class="pkg">stm</span> package</p>
</dd>
<dt><code>"austin"</code></dt><dd><p>the <code>wfm</code> format from the <strong>austin</strong> package</p>
</dd>
<dt><code>"topicmodels"</code></dt><dd><p>the &quot;dtm&quot; format as used by the <span class="pkg">topicmodels</span> package</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="q_dtm_+3A_keep.hyphen">keep.hyphen</code></td>
<td>
<p>logical.  If <code>TRUE</code> hyphens are retained in the terms
(e.g., &quot;math-like&quot; is kept as &quot;math-like&quot;), otherwise they become a split for
terms (e.g., &quot;math-like&quot; is converted to &quot;math&quot; &amp; &quot;like&quot;).</p>
</td></tr>
<tr><td><code id="q_dtm_+3A_ngrams">ngrams</code></td>
<td>
<p>A vector of ngrams (multiple wrds with spaces).  Using this
option results in the ngrams that will be retained in the matrix.</p>
</td></tr>
<tr><td><code id="q_dtm_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code><a href="quanteda.html#topic+dfm">dfm</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="tm.html#topic+DocumentTermMatrix">DocumentTermMatrix</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="quanteda.html#topic+dfm">dfm</a></code>,
<code><a href="quanteda.html#topic+convert">convert</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>(x &lt;- with(presidential_debates_2012, q_dtm(dialogue, paste(time, tot, sep = "_"))))
tm::weightTfIdf(x)

(x2 &lt;- with(presidential_debates_2012, q_dtm_stem(dialogue, paste(time, tot, sep = "_"))))
remove_stopwords(x2, stem=TRUE)

bigrams &lt;- c('make sure', 'governor romney', 'mister president',
    'united states', 'middle class', 'middle east', 'health care',
    'american people', 'dodd frank', 'wall street', 'small business')

grep(" ", x$dimnames$Terms, value = TRUE) #no ngrams

(x3 &lt;- with(presidential_debates_2012,
    q_dtm(dialogue, paste(time, tot, sep = "_"), ngrams = bigrams)
))

grep(" ", x3$dimnames$Terms, value = TRUE) #ngrams
</code></pre>

<hr>
<h2 id='q_tdm'>Quick TermDocumentMatrix</h2><span id='topic+q_tdm'></span><span id='topic+q_tdm_stem'></span>

<h3>Description</h3>

<p>Make a <code><a href="tm.html#topic+TermDocumentMatrix">TermDocumentMatrix</a></code> from a vector of text and and
optional vector of documents.  To stem a document as well use the
<code>q_tdm_stem</code> version of <code>q_tdm</code> which uses <span class="pkg">SnowballC</span>'s
<code><a href="SnowballC.html#topic+wordStem">wordStem</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>q_tdm(text, docs = seq_along(text), to = "tm", keep.hyphen = FALSE,
  ngrams = NULL, ...)

q_tdm_stem(text, docs = seq_along(text), to = "tm", keep.hyphen = FALSE,
  ngrams = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="q_tdm_+3A_text">text</code></td>
<td>
<p>A vector of strings.</p>
</td></tr>
<tr><td><code id="q_tdm_+3A_docs">docs</code></td>
<td>
<p>A vector of document names.</p>
</td></tr>
<tr><td><code id="q_tdm_+3A_to">to</code></td>
<td>
<p>target conversion format, consisting of the name of the package into
whose document-term matrix representation the dfm will be converted:
</p>

<dl>
<dt><code>"lda"</code></dt><dd><p>a list with components &quot;documents&quot; and &quot;vocab&quot; as needed by
<code>lda.collapsed.gibbs.sampler</code> from the <span class="pkg">lda</span> package</p>
</dd>
<dt><code>"tm"</code></dt><dd><p>a <a href="tm.html#topic+DocumentTermMatrix">DocumentTermMatrix</a> from the <span class="pkg">tm</span> package</p>
</dd>
<dt><code>"stm"</code></dt><dd><p>the  format for the <span class="pkg">stm</span> package</p>
</dd>
<dt><code>"austin"</code></dt><dd><p>the <code>wfm</code> format from the <strong>austin</strong> package</p>
</dd>
<dt><code>"topicmodels"</code></dt><dd><p>the &quot;dtm&quot; format as used by the <span class="pkg">topicmodels</span> package</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="q_tdm_+3A_keep.hyphen">keep.hyphen</code></td>
<td>
<p>logical.  If <code>TRUE</code> hyphens are retained in the terms
(e.g., &quot;math-like&quot; is kept as &quot;math-like&quot;), otherwise they become a split for
terms (e.g., &quot;math-like&quot; is converted to &quot;math&quot; &amp; &quot;like&quot;).</p>
</td></tr>
<tr><td><code id="q_tdm_+3A_ngrams">ngrams</code></td>
<td>
<p>A vector of ngrams (multiple wrds with spaces).  Using this
option results in the ngrams that will be retained in the matrix.</p>
</td></tr>
<tr><td><code id="q_tdm_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code><a href="quanteda.html#topic+dfm">dfm</a></code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>(x &lt;- with(presidential_debates_2012, q_tdm(dialogue, paste(time, tot, sep = "_"))))
tm::weightTfIdf(x)

(x2 &lt;- with(presidential_debates_2012, q_tdm_stem(dialogue, paste(time, tot, sep = "_"))))
remove_stopwords(x2, stem=TRUE)
</code></pre>

<hr>
<h2 id='remove_stopwords'>Remove Stopwords from a TermDocumentMatrix/DocumentTermMatrix</h2><span id='topic+remove_stopwords'></span><span id='topic+prep_stopwords'></span>

<h3>Description</h3>

<p><code>remove_stopwords</code> - Remove stopwords and &lt; nchar words from a
<code><a href="tm.html#topic+TermDocumentMatrix">TermDocumentMatrix</a></code> or <code><a href="tm.html#topic+DocumentTermMatrix">DocumentTermMatrix</a></code>.
</p>
<p><code>prep_stopwords</code> - Join multiple vectors of words, convert to lower case,
and return sorted unique words.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove_stopwords(x, stopwords = tm::stopwords("english"), min.char = 3,
  max.char = NULL, stem = FALSE, denumber = TRUE)

prep_stopwords(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="remove_stopwords_+3A_x">x</code></td>
<td>
<p>A <code><a href="tm.html#topic+TermDocumentMatrix">TermDocumentMatrix</a></code> or <code><a href="tm.html#topic+DocumentTermMatrix">DocumentTermMatrix</a></code>.</p>
</td></tr>
<tr><td><code id="remove_stopwords_+3A_stopwords">stopwords</code></td>
<td>
<p>A vector of stopwords to remove.</p>
</td></tr>
<tr><td><code id="remove_stopwords_+3A_min.char">min.char</code></td>
<td>
<p>The minimal length character for retained words.</p>
</td></tr>
<tr><td><code id="remove_stopwords_+3A_max.char">max.char</code></td>
<td>
<p>The maximum length character for retained words.</p>
</td></tr>
<tr><td><code id="remove_stopwords_+3A_stem">stem</code></td>
<td>
<p>Logical.  If <code>TRUE</code> the <code>stopwords</code> will be stemmed.</p>
</td></tr>
<tr><td><code id="remove_stopwords_+3A_denumber">denumber</code></td>
<td>
<p>Logical.  If <code>TRUE</code> numbers will be excluded.</p>
</td></tr>
<tr><td><code id="remove_stopwords_+3A_...">...</code></td>
<td>
<p><code><a href="base.html#topic+vector">vector</a></code>s of words.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="tm.html#topic+TermDocumentMatrix">TermDocumentMatrix</a></code> or <code><a href="tm.html#topic+DocumentTermMatrix">DocumentTermMatrix</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>(x &lt;-with(presidential_debates_2012, q_dtm(dialogue, paste(time, tot, sep = "_"))))
remove_stopwords(x)
(y &lt;- with(presidential_debates_2012, q_tdm(dialogue, paste(time, tot, sep = "_"))))
remove_stopwords(y)

prep_stopwords("the", "ChIcken", "Hello", tm::stopwords("english"), c("John", "Josh"))
</code></pre>

<hr>
<h2 id='select_documents'>Select Documents rom a TermDocumentMatrix/DocumentTermMatrix</h2><span id='topic+select_documents'></span>

<h3>Description</h3>

<p>Select documents from a <code><a href="tm.html#topic+TermDocumentMatrix">TermDocumentMatrix</a></code>
or <code><a href="tm.html#topic+DocumentTermMatrix">DocumentTermMatrix</a></code> matching a regular expression.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>select_documents(x, pattern, invert = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="select_documents_+3A_x">x</code></td>
<td>
<p>A <code><a href="tm.html#topic+TermDocumentMatrix">TermDocumentMatrix</a></code> or <code><a href="tm.html#topic+DocumentTermMatrix">DocumentTermMatrix</a></code>.</p>
</td></tr>
<tr><td><code id="select_documents_+3A_pattern">pattern</code></td>
<td>
<p>A regex pattern used to select documents.</p>
</td></tr>
<tr><td><code id="select_documents_+3A_invert">invert</code></td>
<td>
<p>logical.  If <code>TRUE</code> the pattern is inverted to exclude
these documents.</p>
</td></tr>
<tr><td><code id="select_documents_+3A_...">...</code></td>
<td>
<p>Other arguments passed to <code><a href="base.html#topic+grepl">grepl</a></code>
(<code>perl = TRUE</code> is hard coded).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="tm.html#topic+TermDocumentMatrix">TermDocumentMatrix</a></code> or <code><a href="tm.html#topic+DocumentTermMatrix">DocumentTermMatrix</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>(x &lt;-with(presidential_debates_2012, q_dtm(dialogue, paste(time, person, sep = "_"))))
select_documents(x, 'romney', ignore.case=TRUE)
select_documents(x, '^(?!.*romney).*$', ignore.case = TRUE)      # regex way to invert
select_documents(x, 'romney', ignore.case = TRUE, invert = TRUE) # easier way to invert
(y &lt;- with(presidential_debates_2012, q_tdm(dialogue, paste(time, person, sep = "_"))))
select_documents(y, '[2-3]')
</code></pre>

<hr>
<h2 id='sub_in_na'>Regex Sub to Missing</h2><span id='topic+sub_in_na'></span>

<h3>Description</h3>

<p>Use a regex to identify elements to sub out for missing <code>NA</code>.  Useful
within a <span class="pkg">magrittr</span> pipeline before producing the
<code><a href="tm.html#topic+TermDocumentMatrix">TermDocumentMatrix</a></code> or <code><a href="tm.html#topic+DocumentTermMatrix">DocumentTermMatrix</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sub_in_na(x, regex = "^[^A-Za-z]*$", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sub_in_na_+3A_x">x</code></td>
<td>
<p>A vector of text strings.</p>
</td></tr>
<tr><td><code id="sub_in_na_+3A_regex">regex</code></td>
<td>
<p>A regex to match strings in a vector.</p>
</td></tr>
<tr><td><code id="sub_in_na_+3A_...">...</code></td>
<td>
<p>Other arguments passed to <code><a href="base.html#topic+grepl">grepl</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a vector with <code>NA</code>s inserted.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- c("45", "..", "", "   ", "dog")
sub_in_na(x)
sub_in_na(x, "^\\s*$")

## Not run: 
library(tidyverse)
x %&gt;%
    q_dtm() %&gt;%
    as.matrix()

x %&gt;%
    sub_in_na() %&gt;%
    q_dtm() %&gt;%
    as.matrix()

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
