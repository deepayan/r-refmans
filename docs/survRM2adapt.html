<!DOCTYPE html><html><head><title>Help for package survRM2adapt</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {survRM2adapt}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#survRM2adapt-package'><p>Flexible and Coherent Test/Estimation Procedure Based on Restricted Mean Survival Times</p></a></li>
<li><a href='#cm214_pfs'><p>Sample Reconstructed Data of CheckMate214 Study</p></a></li>
<li><a href='#ltrmst2adapt'><p>Long-Term Restricted Mean Survival Times with Adaptively Selected Lower End of Time Window</p></a></li>
<li><a href='#print.ltrmst2adapt'><p>print.ltrmst2adapt</p></a></li>
<li><a href='#print.rmst2adapt'><p>print.rmst2adapt</p></a></li>
<li><a href='#rmst2adapt'><p>Restricted Mean Survival Times with Adaptively Selected Truncation Time Point</p></a></li>
<li><a href='#rmst2adapt.sample.data'><p>Generate a sample data from the pbc data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Flexible and Coherent Test/Estimation Procedure Based on
Restricted Mean Survival Times</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-3-27</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Miki Horiguchi &lt;horiguchimiki@gmail.com&gt;</td>
</tr>
<tr>
<td>Imports:</td>
<td>survival, mvtnorm</td>
</tr>
<tr>
<td>Description:</td>
<td>Estimates the restricted mean survival time (RMST) with the time window [0, tau], where tau is adaptively selected from the procedure, proposed by Horiguchi et al. (2018) &lt;<a href="https://doi.org/10.1002%2Fsim.7661">doi:10.1002/sim.7661</a>&gt;. It also estimates the RMST with the time window [tau1, tau2], where tau1 is adaptively selected from the procedure, proposed by Horiguchi et al. (2023) &lt;<a href="https://doi.org/10.1002%2Fsim.9662">doi:10.1002/sim.9662</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-03-27 21:47:07 UTC; miki</td>
</tr>
<tr>
<td>Author:</td>
<td>Miki Horiguchi <a href="https://orcid.org/0000-0002-9800-1954"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Lu Tian <a href="https://orcid.org/0000-0002-5893-0169"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Hajime Uno <a href="https://orcid.org/0000-0003-0622-8471"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-03-28 07:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='survRM2adapt-package'>Flexible and Coherent Test/Estimation Procedure Based on Restricted Mean Survival Times</h2><span id='topic+survRM2adapt-package'></span>

<h3>Description</h3>

<p>Estimates the restricted mean survival time (RMST) with a time window [0, tau], where tau is selected during the procedure from among the time points provided by the user.
It also estimates the RMST with a time window [tau1, tau2], where tau1 is selected during the procedure, same as above.
</p>


<h3>Author(s)</h3>

<p>Miki Horiguchi, Lu Tian, Hajime Uno
</p>
<p>Maintainer: Miki Horiguchi &lt;horiguchimiki@gmail.com&gt;
</p>


<h3>References</h3>

<p>Horiguchi M, Cronin A, Takeuchi M, Uno H. A flexible and coherent test/estimation procedure based on restricted mean survival times for censored time-to-event data
in randomized clinical trials. Statistics in Medicine 2018. DOI:10.1002/sim.7661.
</p>
<p>Horiguchi M, Tian L, Uno H. On assessing survival benefit of immunotherapy using long-term restricted mean survival time.
Statistics in Medicine 2023. DOI:10.1002/sim.9662.
</p>


<h3>See Also</h3>

<p>survival survRM2
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#--- Adaptive RMST test/estimation method by rmst2adapt() ---#
data    = rmst2adapt.sample.data()
nmethod = 100 #This is only for example use.
              #Recommended to specify at least 100000 (default) or larger.

a       = rmst2adapt(indata=data, tau_star=seq(6,12,2), method="perturbation",
               nmethod=nmethod, test="2_side", seed=123)
print(a)

#--- Adaptive long-term RMST test/estimation method by ltrmst2adapt() ---#
data    = cm214_pfs
b       = ltrmst2adapt(indata=data, tau1=c(0,1,2,3), tau2=10, 
               test="2_side", seed=123)
print(b)
</code></pre>

<hr>
<h2 id='cm214_pfs'>Sample Reconstructed Data of CheckMate214 Study</h2><span id='topic+cm214_pfs'></span>

<h3>Description</h3>

<p>The progression-free survival data reconstructed from the publication of the CheckMate214 study.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(cm214_pfs)
</code></pre>


<h3>Format</h3>

<p>A dataset containing 3 columns:
</p>

<dl>
<dt>time</dt><dd><p>the time-to-event variable (the time unit is month)</p>
</dd>
<dt>status</dt><dd><p>the event indicator (1=event, 0=censor)</p>
</dd>
<dt>arm</dt><dd><p>the treatment indicator (1=treatment, 0=control)</p>
</dd>
</dl>



<h3>Details</h3>

<p>This is a reconstructed patient-level data from the results reported by Motzer et al.(2018) &lt;doi:10.1056/NEJMoa1712126&gt;.
The data consists of 847 patients with previously untreated clear-cell advanced renal-cell carcinoma; 425 for the nivolumab plus ipilimumab group (treatment) and 422 for the sunitinib group (control).
</p>


<h3>Source</h3>

<p>Motzer RJ, Tannir NM, McDermott DF, et al. Nivolumab plus ipilimumab versus sunitinib in advanced renal-cell carcinoma.
New England Journal of Medicine. 2018;378(14):1277-1290. &lt;doi:10.1056/NEJMoa1712126&gt;
Guyot P, Ades AE, Ouwens MJ, Welton NJ. Enhanced secondary analysis of survival data: reconstructing the data from published Kaplan-Meier survival curves. BMC Med Res Methodol. 2012;12(1):9. &lt;doi:10.1186/1471-2288-12-9&gt;
</p>

<hr>
<h2 id='ltrmst2adapt'>Long-Term Restricted Mean Survival Times with Adaptively Selected Lower End of Time Window</h2><span id='topic+ltrmst2adapt'></span>

<h3>Description</h3>

<p>This function performs the method proposed by Horiguchi, Tian, and Uno. (2023) &lt;doi:10.1002/sim.9662&gt;.
Specifically, it estimates the restricted mean survival time (RMST) within a prespecified time window (from tau1 to tau2) to quantify the long-term treatment benefit. 
Instead of choosing one specific time point as the lower end of the time window (tau1), the procedure allows users to prespecify a set of time points.
The procedure picks one time point among the set of tau1 values that gives the most significant difference in the long-term RMST between the two groups.
It then performs testing for equality of the long-term RMSTs between the two groups and estimates the difference in RMST within the adaptively selected time window [tau1, tau2] between the two groups.
Multiplicity as a result of specifying several values for tau1 is taken into account in this procedure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ltrmst2adapt(indata, tau1, tau2, iteration=50000, seed=NULL, test="2_side", conf.int=0.95)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ltrmst2adapt_+3A_indata">indata</code></td>
<td>
<p>A data matrix (data frame). The 1st column is the time-to-event variable, the 2nd column is the event indicator (1=event, 0=censor), and the 3rd column is the treatment indicator (1=treatment, 0=control).
No missing values are allowed in this data matrix.</p>
</td></tr>
<tr><td><code id="ltrmst2adapt_+3A_tau1">tau1</code></td>
<td>
<p>An integer value or a vector indicating a set of tau1 values for the lower end of the time window.</p>
</td></tr>
<tr><td><code id="ltrmst2adapt_+3A_tau2">tau2</code></td>
<td>
<p>An integer value indicating the upper end of the time window. When tau2 = NULL, the default value is used. See Details for the definition of the default value for tau2.</p>
</td></tr>
<tr><td><code id="ltrmst2adapt_+3A_iteration">iteration</code></td>
<td>
<p>A number of iterations for the resampling (the multivariate normal distribution-based perturbation method). It is recommended to specify at least 50000 (default) or larger.</p>
</td></tr>
<tr><td><code id="ltrmst2adapt_+3A_seed">seed</code></td>
<td>
<p>An integer value used for random number generation in the resampling procedure. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="ltrmst2adapt_+3A_test">test</code></td>
<td>
<p>Specify <code>"1_side"</code> for the one-sided test where the alternative hypothesis is that the treatment group is superior to the control group with respect to survival time. 
Specify <code>"2_side"</code> for the two-sided test where the alternative hypothesis is that the treatment group is not equal to the control group with respect to survival time.
Default is <code>"2_side"</code>.</p>
</td></tr>
<tr><td><code id="ltrmst2adapt_+3A_conf.int">conf.int</code></td>
<td>
<p>Specify a confidence coefficient for calculating confidence bands for the differences in long-term RMST. Default is <code>0.95</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The definition of the default value for tau2. Let x1 and x0 be the maximum observed time in Group 1 and Group 0, respectively. 
Case 1: If the last observations in Group 1 and Group 0 are &quot;event,&quot; then tau = max(x1, x0). 
Case 2-1: If the last observation in Group 1 is &quot;event,&quot; the last observation in Group 0 is &quot;censor,&quot; and x1 &lt;= x0, tau2 = max(x1, x0) = x0. 
Case 2-2: If the last observation in Group 0 is &quot;event,&quot; the last observation in Group 1 is &quot;censor,&quot; and x1 &gt; x0, tau2 = max(x1, x0) = x1. 
Case 3-1: If the last observation in Group 1 is &quot;event,&quot; the last observation in Group 0 is &quot;censor,&quot; and x1 &gt; x0, tau2 = min(x1, x0) = x0. 
Case 3-2: If the last observation in Group 0 is &quot;event,&quot; the last observation in Group 1 is &quot;censor,&quot; and x1 &lt;= x0, tau2 = min(x1, x0) = x1. 
Case 4: If the last observations in Group 1 and Group 0 are &quot;censor,&quot; then tau = min(x1, x0).
</p>


<h3>Value</h3>

<p>an object of class ltrmst2adapt.
</p>
<table>
<tr><td><code>iteration</code></td>
<td>
<p>The number of iterations for resampling from a multivariate normal distribution with a mean 0 and a variance-covariance matrix.</p>
</td></tr>
<tr><td><code>test</code></td>
<td>
<p>The type of test used in the analyses</p>
</td></tr>
<tr><td><code>arm1</code></td>
<td>
<p>The RMST [tau1, tau2] estimation for arm1</p>
</td></tr>
<tr><td><code>arm0</code></td>
<td>
<p>The RMST [tau1, tau2] estimation for arm0</p>
</td></tr>
<tr><td><code>diff10</code></td>
<td>
<p>The difference in RMST [tau1, tau2] between the two groups (arm1 minus arm0)</p>
</td></tr>
<tr><td><code>diff10_selected</code></td>
<td>
<p>The difference in RMST within the selected time window [tau1, tau2] between the two groups (arm1 minus arm0) with the normal confidence interval considering the randomness of selecting one time window. The p-value for the RMST difference test within the selected time window [tau1, tau2] is also provided.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Miki Horiguchi, Lu Tian, Hajime Uno
</p>


<h3>References</h3>

<p>Horiguchi M, Tian L, Uno H. On assessing survival benefit of immunotherapy using long-term restricted mean survival time. Statistics in Medicine 2023. DOI:10.1002/sim.9662.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#--- sample data ---#
data = cm214_pfs
b    = ltrmst2adapt(indata=data, tau1=c(0,1,2,3), tau2=10, 
               test="2_side", seed=123)
print(b)
</code></pre>

<hr>
<h2 id='print.ltrmst2adapt'>print.ltrmst2adapt</h2><span id='topic+print.ltrmst2adapt'></span>

<h3>Description</h3>

<p>S3 method for class 'ltrmst2adapt'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ltrmst2adapt'
print(x, digits = 3, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.ltrmst2adapt_+3A_x">x</code></td>
<td>
<p>Object to be printed</p>
</td></tr>
<tr><td><code id="print.ltrmst2adapt_+3A_digits">digits</code></td>
<td>
<p>Integer indicating the number of decimal places</p>
</td></tr>
<tr><td><code id="print.ltrmst2adapt_+3A_...">...</code></td>
<td>
<p>Further arguments ignored in this function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns summary output for class 'ltrmst2adapt'
</p>

<hr>
<h2 id='print.rmst2adapt'>print.rmst2adapt</h2><span id='topic+print.rmst2adapt'></span>

<h3>Description</h3>

<p>S3 method for class 'rmst2adapt'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rmst2adapt'
print(x, digits = 3, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.rmst2adapt_+3A_x">x</code></td>
<td>
<p>Object to be printed</p>
</td></tr>
<tr><td><code id="print.rmst2adapt_+3A_digits">digits</code></td>
<td>
<p>Integer indicating the number of decimal places</p>
</td></tr>
<tr><td><code id="print.rmst2adapt_+3A_...">...</code></td>
<td>
<p>Further arguments ignored in this function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns summary output for class 'rmst2adapt'
</p>

<hr>
<h2 id='rmst2adapt'>Restricted Mean Survival Times with Adaptively Selected Truncation Time Point</h2><span id='topic+rmst2adapt'></span>

<h3>Description</h3>

<p>This function performs the procedure proposed by Horiguchi et al. (2018) &lt;doi:10.1002/sim.7661&gt;.
The method specifies a set of truncation time points, taus, for calculating restricted mean survival times (RMST),
performs testing for equality of the RMSTs between the two groups, and estimates the difference in RMST between the two groups at the specified tau's.
The multiplicity as a result of specifying several taus is taken into account in this procedure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rmst2adapt(indata, tau_star, method="perturbation", nmethod=100000,
        seed=NULL, test="2_side", conf.int=0.95)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rmst2adapt_+3A_indata">indata</code></td>
<td>
<p>A data matrix (data frame). The 1st column is the time-to-event variable, the 2nd column is the event indicator (1=event, 0=censor), and the 3rd column is the treatment indicator (1=treatment, 0=control).
No missing values are allowed in this data matrix.</p>
</td></tr>
<tr><td><code id="rmst2adapt_+3A_tau_star">tau_star</code></td>
<td>
<p>A vector indicating a set of tau's. All elements in <code>tau_star</code> need to be shorter than or equal to the minimum time point of the largest observed time in each of the two groups.</p>
</td></tr>
<tr><td><code id="rmst2adapt_+3A_method">method</code></td>
<td>
<p>A type of the resampling method. It supports <code>"perturbation"</code> (default).</p>
</td></tr>
<tr><td><code id="rmst2adapt_+3A_nmethod">nmethod</code></td>
<td>
<p>A number of iterations for resampling. It is recommended to specify at least 100000 (default) or larger.</p>
</td></tr>
<tr><td><code id="rmst2adapt_+3A_seed">seed</code></td>
<td>
<p>An integer value used for random number generation in the resampling procedures. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="rmst2adapt_+3A_test">test</code></td>
<td>
<p>Specify <code>"1_side"</code> for the one-sided test where the alternative hypothesis is that the treatment group is superior to the control group with respect to survival time.
Specify <code>"2_side"</code> for the two-sided test where the alternative hypothesis is that the treatment group is not equal to the control group with respect to survival time.
Default is <code>"2_side"</code>.</p>
</td></tr>
<tr><td><code id="rmst2adapt_+3A_conf.int">conf.int</code></td>
<td>
<p>Specify a confidence coefficient for calculating confidence bands for the differences in RMST. Default is <code>0.95</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class rmst2adapt.
</p>
<table>
<tr><td><code>method</code></td>
<td>
<p>The resampling method used in the analyses</p>
</td></tr>
<tr><td><code>nmethod</code></td>
<td>
<p>The number of iterations for the resampling</p>
</td></tr>
<tr><td><code>test</code></td>
<td>
<p>The type of test used in the analyses</p>
</td></tr>
<tr><td><code>candidate_taus</code></td>
<td>
<p>The set of taus used in the analyses</p>
</td></tr>
<tr><td><code>observed_z</code></td>
<td>
<p>The observed test statistic Z_star</p>
</td></tr>
<tr><td><code>p_value</code></td>
<td>
<p>The p-value of testing for equality of the RMSTs between the two groups</p>
</td></tr>
<tr><td><code>conf_band</code></td>
<td>
<p>The difference in RMST between the two groups at the specified taus</p>
</td></tr>
<tr><td><code>selected_tau</code></td>
<td>
<p>The value of tau selected to summarize the treatment effect</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Miki Horiguchi, Hajime Uno
</p>


<h3>References</h3>

<p>Horiguchi M, Cronin A, Takeuchi M, Uno H. A flexible and coherent test/estimation procedure based on restricted mean survival times for censored time-to-event data
in randomized clinical trials. Statistics in Medicine 2018. doi:10.1002/sim.7661.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#--- sample data ---#
data    = rmst2adapt.sample.data()
nmethod = 100 #This is only for example use.
              #Recommended to specify at least 100000 (default) or larger.

a = rmst2adapt(indata=data, tau_star=seq(6,12,2), method="perturbation",
               nmethod=nmethod, test="2_side", seed=123)
print(a)
</code></pre>

<hr>
<h2 id='rmst2adapt.sample.data'>Generate a sample data from the pbc data</h2><span id='topic+rmst2adapt.sample.data'></span>

<h3>Description</h3>

<p>This is a function to retrieve 312 randomized patients from the pbc data in survival package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rmst2adapt.sample.data(t.unit="year")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rmst2adapt.sample.data_+3A_t.unit">t.unit</code></td>
<td>
<p>Specify the time unit. It supports &quot;year&quot; (default), &quot;month&quot;, and &quot;day&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function creates a sample dataset to illustrate the usage of the function <code>rmst2adapt()</code> in this package.
The original pbc data in <code>survival</code> package consists of 418 patients data.
This function loads the pbc data, select the 312 patients who were randomized.
The status variable is edited, so that 1 indicates death and 0 indicates alive.
</p>


<h3>Value</h3>

<p>returns a data frame
</p>


<h3>See Also</h3>

<p><code>pbc</code> in survival package
</p>


<h3>Examples</h3>

<pre><code class='language-R'>D=rmst2adapt.sample.data()
head(D)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
