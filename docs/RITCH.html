<!DOCTYPE html><html><head><title>Help for package RITCH</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {RITCH}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_meta_to_filename'><p>Adds meta information (date and exchange) to an itch filename</p></a></li>
<li><a href='#count_functions'><p>Counts the messages of an ITCH-file</p></a></li>
<li><a href='#count_internal'><p>Internal function to count the messages</p></a></li>
<li><a href='#download_sample_file'><p>Downloads a sample ITCH File from NASDAQs Server</p></a></li>
<li><a href='#download_stock_directory'><p>Downloads the stock directory (stock locate codes) for a given date and exchange</p></a></li>
<li><a href='#ex20101224.TEST_ITCH_50'><p>ITCH 50 Example Testing Dataset</p></a></li>
<li><a href='#filter_itch'><p>Filters an ITCH file to another ITCH file</p></a></li>
<li><a href='#format_bytes'><p>Formats a number of bytes</p></a></li>
<li><a href='#get_date_from_filename'><p>Returns the date from an ITCH-filename</p></a></li>
<li><a href='#get_exchange_from_filename'><p>Returns the exchange from an ITCH-filename</p></a></li>
<li><a href='#get_msg_classes'><p>Returns the message class data for the message types</p></a></li>
<li><a href='#gz_functions'><p>Compresses and uncompresses files to and from gz-archives</p></a></li>
<li><a href='#list_sample_files'><p>Returns a data.table of the sample files on the server</p></a></li>
<li><a href='#open_itch_sample_server'><p>Opens the ITCH sample page</p></a></li>
<li><a href='#open_itch_specification'><p>Opens the ITCH Specification PDF</p></a></li>
<li><a href='#read_functions'><p>Reads certain messages of an ITCH-file into a data.table</p></a></li>
<li><a href='#write_itch'><p>Writes a data.frame or a list of data.frames of ITCH messages to file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>R Parser for the ITCH-Protocol</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.26</td>
</tr>
<tr>
<td>Description:</td>
<td>Allows to efficiently parse, filter, and write binary ITCH Files (Version 5.0) containing detailed financial transactions as distributed by NASDAQ to an R data.table.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://davzim.github.io/RITCH/">https://davzim.github.io/RITCH/</a>, <a href="https://github.com/DavZim/RITCH">https://github.com/DavZim/RITCH</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/DavZim/RITCH/issues">https://github.com/DavZim/RITCH/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table, Rcpp (&ge; 0.12.12), nanotime (&ge; 0.3.2), bit64 (&ge;
4.0.5)</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>tinytest</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-15 14:19:07 UTC; david</td>
</tr>
<tr>
<td>Author:</td>
<td>David Zimmermann-Kollenda [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>David Zimmermann-Kollenda &lt;david_j_zimmermann@hotmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-15 15:10:07 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_meta_to_filename'>Adds meta information (date and exchange) to an itch filename</h2><span id='topic+add_meta_to_filename'></span>

<h3>Description</h3>

<p>Note that if date and exchange information are already present,
they are overwritten
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_meta_to_filename(file, date, exchange)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_meta_to_filename_+3A_file">file</code></td>
<td>
<p>the filename</p>
</td></tr>
<tr><td><code id="add_meta_to_filename_+3A_date">date</code></td>
<td>
<p>the date as a date-class or as a string that is understood by
<code><a href="base.html#topic+as.Date">base::as.Date()</a></code>.</p>
</td></tr>
<tr><td><code id="add_meta_to_filename_+3A_exchange">exchange</code></td>
<td>
<p>the name of the exchange</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the filename with exchanged or added date and exchange information
</p>


<h3>Examples</h3>

<pre><code class='language-R'>add_meta_to_filename("03302017.NASDAQ_ITCH50", "2010-12-24", "TEST")
add_meta_to_filename("20170130.BX_ITCH_50.gz", "2010-12-24", "TEST")
add_meta_to_filename("S030220-v50-bx.txt.gz", "2010-12-24", "TEST")
add_meta_to_filename("unknown_file.ITCH_50", "2010-12-24", "TEST")
</code></pre>

<hr>
<h2 id='count_functions'>Counts the messages of an ITCH-file</h2><span id='topic+count_functions'></span><span id='topic+count_messages'></span><span id='topic+count_orders'></span><span id='topic+count_trades'></span><span id='topic+count_modifications'></span><span id='topic+count_system_events'></span><span id='topic+count_stock_directory'></span><span id='topic+count_trading_status'></span><span id='topic+count_reg_sho'></span><span id='topic+count_market_participant_states'></span><span id='topic+count_mwcb'></span><span id='topic+count_ipo'></span><span id='topic+count_luld'></span><span id='topic+count_noii'></span><span id='topic+count_rpii'></span>

<h3>Description</h3>

<p>Counts the messages of an ITCH-file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>count_messages(
  file,
  add_meta_data = FALSE,
  buffer_size = -1,
  quiet = FALSE,
  force_gunzip = FALSE,
  gz_dir = tempdir(),
  force_cleanup = TRUE
)

count_orders(x)

count_trades(x)

count_modifications(x)

count_system_events(x)

count_stock_directory(x)

count_trading_status(x)

count_reg_sho(x)

count_market_participant_states(x)

count_mwcb(x)

count_ipo(x)

count_luld(x)

count_noii(x)

count_rpii(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="count_functions_+3A_file">file</code></td>
<td>
<p>the path to the input file, either a gz-file or a plain-text file</p>
</td></tr>
<tr><td><code id="count_functions_+3A_add_meta_data">add_meta_data</code></td>
<td>
<p>if the meta-data of the messages should be added, defaults to FALSE</p>
</td></tr>
<tr><td><code id="count_functions_+3A_buffer_size">buffer_size</code></td>
<td>
<p>the size of the buffer in bytes, defaults to 1e8 (100 MB), if you have a large amount of RAM, 1e9 (1GB) might be faster</p>
</td></tr>
<tr><td><code id="count_functions_+3A_quiet">quiet</code></td>
<td>
<p>if TRUE, the status messages are supressed, defaults to FALSE</p>
</td></tr>
<tr><td><code id="count_functions_+3A_force_gunzip">force_gunzip</code></td>
<td>
<p>only applies if file is a gz-file and a file with the same (gunzipped) name already exists.
if set to TRUE, the existing file is overwritten. Default value is FALSE</p>
</td></tr>
<tr><td><code id="count_functions_+3A_gz_dir">gz_dir</code></td>
<td>
<p>a directory where the gz archive is extracted to.
Only applies if file is a gz archive. Default is <code><a href="base.html#topic+tempdir">tempdir()</a></code>.</p>
</td></tr>
<tr><td><code id="count_functions_+3A_force_cleanup">force_cleanup</code></td>
<td>
<p>only applies if file is a gz-file. If force_cleanup=TRUE, the gunzipped raw file will be deleted afterwards.</p>
</td></tr>
<tr><td><code id="count_functions_+3A_x">x</code></td>
<td>
<p>a file or a data.table containing the message types and the counts,
as outputted by <code>count_messages</code></p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li> <p><code>count_orders</code>: Counts order messages. Message type <code>A</code> and <code>F</code>
</p>
</li></ul>


<ul>
<li> <p><code>count_trades</code>: Counts trade messages. Message type <code>P</code>, <code>Q</code> and <code>B</code>
</p>
</li></ul>


<ul>
<li> <p><code>count_modifications</code>: Counts order modification messages. Message
type <code>E</code>, <code>C</code>, <code>X</code>, <code>D</code>, and <code>U</code>
</p>
</li></ul>


<ul>
<li> <p><code>count_system_events</code>: Counts system event messages. Message type <code>S</code>
</p>
</li></ul>


<ul>
<li> <p><code>count_stock_directory</code>: Counts stock trading messages. Message
type <code>R</code>
</p>
</li></ul>


<ul>
<li> <p><code>count_trading_status</code>: Counts trading status messages. Message
type <code>H</code> and <code>h</code>
</p>
</li></ul>


<ul>
<li> <p><code>count_reg_sho</code>: Counts messages regarding reg SHO. Message type
<code>Y</code>
</p>
</li></ul>


<ul>
<li> <p><code>count_market_participant_states</code>: Counts messages regarding the
status of market participants. Message type <code>L</code>
</p>
</li></ul>


<ul>
<li> <p><code>count_mwcb</code>: Counts messages regarding Market-Wide-Circuit-Breakers
(MWCB). Message type <code>V</code> and <code>W</code>
</p>
</li></ul>


<ul>
<li> <p><code>count_ipo</code>: Counts messages regarding IPOs. Message type <code>K</code>
</p>
</li></ul>


<ul>
<li> <p><code>count_luld</code>: Counts messages regarding LULDs (limit up-limit down)
auction collars. Message type <code>J</code>
</p>
</li></ul>


<ul>
<li> <p><code>count_noii</code>: Counts Net Order Imbalance Indicatio (NOII) messages.
Message type <code>I</code>
</p>
</li></ul>


<ul>
<li> <p><code>count_rpii</code>: Counts Retail Price Improvement Indicator (RPII)
messages. Message type <code>N</code>
</p>
</li></ul>



<h3>Value</h3>

<p>a data.table containing the message-type and their counts for <code>count_messages</code>
or an integer value for the other functions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>file &lt;- system.file("extdata", "ex20101224.TEST_ITCH_50", package = "RITCH")
count_messages(file)
count_messages(file, add_meta_data = TRUE, quiet = TRUE)

# file can also be a .gz file
gz_file &lt;- system.file("extdata", "ex20101224.TEST_ITCH_50.gz", package = "RITCH")
count_messages(gz_file, quiet = TRUE)

# count only a specific class
msg_count &lt;- count_messages(file, quiet = TRUE)

# either count based on a given data.table outputted by count_messages
count_orders(msg_count)

# or count orders from a file and not from a msg_count
count_orders(file)

### Specific class count functions are:
count_orders(msg_count)
count_trades(msg_count)
count_modifications(msg_count)
count_system_events(msg_count)
count_stock_directory(msg_count)
count_trading_status(msg_count)
count_reg_sho(msg_count)
count_market_participant_states(msg_count)
count_mwcb(msg_count)
count_ipo(msg_count)
count_luld(msg_count)
count_noii(msg_count)
count_rpii(msg_count)
</code></pre>

<hr>
<h2 id='count_internal'>Internal function to count the messages</h2><span id='topic+count_internal'></span>

<h3>Description</h3>

<p>Internal function to count the messages
</p>


<h3>Usage</h3>

<pre><code class='language-R'>count_internal(x, types)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="count_internal_+3A_x">x</code></td>
<td>
<p>a data.frame containing the message types and the counts</p>
</td></tr>
<tr><td><code id="count_internal_+3A_types">types</code></td>
<td>
<p>a vector containing the types</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a numeric value of number of orders in x
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Only used internally
</code></pre>

<hr>
<h2 id='download_sample_file'>Downloads a sample ITCH File from NASDAQs Server</h2><span id='topic+download_sample_file'></span>

<h3>Description</h3>

<p>The Server can be found at <a href="https://emi.nasdaq.com/ITCH/Nasdaq%20ITCH/">https://emi.nasdaq.com/ITCH/Nasdaq%20ITCH/</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_sample_file(
  choice = c("smallest", "largest", "earliest", "latest", "random", "all"),
  file = NA,
  exchanges = NA,
  dir = ".",
  force_download = FALSE,
  check_md5sum = TRUE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="download_sample_file_+3A_choice">choice</code></td>
<td>
<p>which file should be chosen? One of: smallest (default), largest,
earliest (date-wise), latest, random, or all.</p>
</td></tr>
<tr><td><code id="download_sample_file_+3A_file">file</code></td>
<td>
<p>the name of a specific file, overrules the choice and exchanges arguments</p>
</td></tr>
<tr><td><code id="download_sample_file_+3A_exchanges">exchanges</code></td>
<td>
<p>A vector of exchanges, can be NASDAQ, BX, or PSX.
The default value is to consider all exchanges.</p>
</td></tr>
<tr><td><code id="download_sample_file_+3A_dir">dir</code></td>
<td>
<p>The directory where the files will be saved to, default is current working directory.</p>
</td></tr>
<tr><td><code id="download_sample_file_+3A_force_download">force_download</code></td>
<td>
<p>If the file should be downloaded even if it already exists locally.
Default value is FALSE.</p>
</td></tr>
<tr><td><code id="download_sample_file_+3A_check_md5sum">check_md5sum</code></td>
<td>
<p>If the md5-sum (hash-value) of the downloaded file should be checked, default value is TRUE.</p>
</td></tr>
<tr><td><code id="download_sample_file_+3A_quiet">quiet</code></td>
<td>
<p>if TRUE, the status messages are suppressed, defaults to FALSE</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Warning: the smallest file is around 300 MB, with the largest exceeding 5 GB.
There are about 17 files in total. Downloading all might take a considerable amount of time.
</p>


<h3>Value</h3>

<p>an invisible vector of the files
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
download_sample_file()
file &lt;- download_sample_file()
file

# download a specific sample file
file &lt;- download_sample_file(file = "2019130.BX_ITCH_50.gz")
file

## End(Not run)
</code></pre>

<hr>
<h2 id='download_stock_directory'>Downloads the stock directory (stock locate codes) for a given date and exchange</h2><span id='topic+download_stock_directory'></span>

<h3>Description</h3>

<p>The data is downloaded from NASDAQs server, which can be found here
<a href="https://emi.nasdaq.com/ITCH/Stock_Locate_Codes/">https://emi.nasdaq.com/ITCH/Stock_Locate_Codes/</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_stock_directory(exchange, date, cache = FALSE, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="download_stock_directory_+3A_exchange">exchange</code></td>
<td>
<p>The exchange, either NASDAQ (equivalent to NDQ), BX, or PSX</p>
</td></tr>
<tr><td><code id="download_stock_directory_+3A_date">date</code></td>
<td>
<p>The date, should be of class Date. If not the value is converted
using <code>as.Date</code>.</p>
</td></tr>
<tr><td><code id="download_stock_directory_+3A_cache">cache</code></td>
<td>
<p>If the stock directory should be cached, can be set to TRUE
to save the stock directories in the working directory or a character for a
target directory.</p>
</td></tr>
<tr><td><code id="download_stock_directory_+3A_quiet">quiet</code></td>
<td>
<p>If the download function should be quiet, default is FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.table of the tickers, the respective stock locate codes, and
the exchange/date information
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  download_stock_directory("BX", "2019-07-02")
  download_stock_directory(c("BX", "NDQ"), c("2019-07-02", "2019-07-03"))
  download_stock_directory("BX", "2019-07-02", cache = TRUE)

  download_stock_directory("BX", "2019-07-02", cache = "stock_directory")
  dir.exists("stock_directory")
  list.files("stock_directory")

## End(Not run)
</code></pre>

<hr>
<h2 id='ex20101224.TEST_ITCH_50'>ITCH 50 Example Testing Dataset</h2><span id='topic+ex20101224.TEST_ITCH_50'></span>

<h3>Description</h3>

<p>ITCH 50 Example Testing Dataset
</p>


<h3>ex20101224.TEST_ITCH_50</h3>

<p>The test dataset contains artificial trading data for three made up stocks:
<code>ALC</code>, <code>BOB</code>, and <code>CHAR</code>.
</p>
<p>The dataset is used in the examples and unit tests of the package.
</p>
<p>The data contains the following count of messages:
</p>

<ul>
<li><p> 6 system event (message type <code>S</code>)
</p>
</li>
<li><p> 3 stock directory (message type <code>R</code>)
</p>
</li>
<li><p> 3 trading status (message type <code>H</code>)
</p>
</li>
<li><p> 5000 orders (4997 message type <code>A</code> and 3 <code>F</code>)
</p>
</li>
<li><p> 2000 modifications (198 <code>F</code>, 45 <code>X</code>, 1745 <code>D</code>, and 12 <code>U</code> message types)
</p>
</li>
<li><p> 5000 trades (message type <code>P</code>)
</p>
</li></ul>

<p>The file is also available as <code>ex20101224.TEST_ITCH_50.gz</code>.
</p>
<p>To get real sample ITCH datasets, see the <code><a href="#topic+download_sample_file">download_sample_file()</a></code>
function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>file &lt;- system.file("extdata", "ex20101224.TEST_ITCH_50", package = "RITCH")

sys &lt;- read_system_events(file)
</code></pre>

<hr>
<h2 id='filter_itch'>Filters an ITCH file to another ITCH file</h2><span id='topic+filter_itch'></span>

<h3>Description</h3>

<p>This function allows to perform very fast filter operations on large ITCH
files. The messages are written to another ITCH file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_itch(
  infile,
  outfile,
  filter_msg_class = NA_character_,
  filter_msg_type = NA_character_,
  filter_stock_locate = NA_integer_,
  min_timestamp = bit64::as.integer64(NA),
  max_timestamp = bit64::as.integer64(NA),
  filter_stock = NA_character_,
  stock_directory = NA,
  skip = 0,
  n_max = -1,
  append = FALSE,
  overwrite = FALSE,
  gz = FALSE,
  buffer_size = -1,
  quiet = FALSE,
  force_gunzip = FALSE,
  force_cleanup = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_itch_+3A_infile">infile</code></td>
<td>
<p>the input file where the messages are taken from, can be a
gz-archive or a plain ITCH file.</p>
</td></tr>
<tr><td><code id="filter_itch_+3A_outfile">outfile</code></td>
<td>
<p>the output file where the filtered messages are written to.
Note that the date and exchange information from the <code>infile</code> are used,
see also <code><a href="#topic+add_meta_to_filename">add_meta_to_filename()</a></code> for further information.</p>
</td></tr>
<tr><td><code id="filter_itch_+3A_filter_msg_class">filter_msg_class</code></td>
<td>
<p>a vector of classes to load, can be &quot;orders&quot;, &quot;trades&quot;,
&quot;modifications&quot;, ... see also <code><a href="#topic+get_msg_classes">get_msg_classes()</a></code>.
Default value is to take all message classes.</p>
</td></tr>
<tr><td><code id="filter_itch_+3A_filter_msg_type">filter_msg_type</code></td>
<td>
<p>a character vector, specifying a filter for message types.
Note that this can be used to only return 'A' orders for instance.</p>
</td></tr>
<tr><td><code id="filter_itch_+3A_filter_stock_locate">filter_stock_locate</code></td>
<td>
<p>an integer vector, specifying a filter for locate codes.
The locate codes can be looked up by calling <code><a href="#topic+read_stock_directory">read_stock_directory()</a></code>
or by downloading from NASDAQ by using <code><a href="#topic+download_stock_directory">download_stock_directory()</a></code>.
Note that some message types (e.g., system events, MWCB, and IPO) do not use
a locate code.</p>
</td></tr>
<tr><td><code id="filter_itch_+3A_min_timestamp">min_timestamp</code></td>
<td>
<p>an 64 bit integer vector (see also <code><a href="bit64.html#topic+as.integer64.character">bit64::as.integer64()</a></code>)
of minimum timestamp (inclusive).
Note: min and max timestamp must be supplied with the same length or left empty.</p>
</td></tr>
<tr><td><code id="filter_itch_+3A_max_timestamp">max_timestamp</code></td>
<td>
<p>an 64 bit integer vector (see also <code><a href="bit64.html#topic+as.integer64.character">bit64::as.integer64()</a></code>)
of maxium timestamp (inclusive).
Note: min and max timestamp must be supplied with the same length or left empty.</p>
</td></tr>
<tr><td><code id="filter_itch_+3A_filter_stock">filter_stock</code></td>
<td>
<p>a character vector, specifying a filter for stocks.
Note that this a shorthand for the <code>filter_stock_locate</code> argument, as it
tries to find the stock_locate based on the <code>stock_directory</code> argument,
if this is not found, it will try to extract the stock directory from the file,
else an error is thrown.</p>
</td></tr>
<tr><td><code id="filter_itch_+3A_stock_directory">stock_directory</code></td>
<td>
<p>A data.frame containing the stock-locate code relationship.
As outputted by <code><a href="#topic+read_stock_directory">read_stock_directory()</a></code>.
Only used if <code>filter_stock</code> is set. To download the stock directory from
NASDAQs server, use <code><a href="#topic+download_stock_directory">download_stock_directory()</a></code>.</p>
</td></tr>
<tr><td><code id="filter_itch_+3A_skip">skip</code></td>
<td>
<p>Number of messages to skip before starting parsing messages,
note the skip parameter applies to the specific message class, i.e., it would
skip the messages for each type (e.g., skip the first 10 messages for each class).</p>
</td></tr>
<tr><td><code id="filter_itch_+3A_n_max">n_max</code></td>
<td>
<p>Maximum number of messages to parse, default is to read all values.
Can also be a data.frame of msg_types and counts, as returned by
<code><a href="#topic+count_messages">count_messages()</a></code>.
Note the n_max parameter applies to the specific message class not the whole
file.</p>
</td></tr>
<tr><td><code id="filter_itch_+3A_append">append</code></td>
<td>
<p>if the messages should be appended to the outfile, default is
false. Note, this is helpful if <code>skip</code> and or <code>n_max</code> are used for
batch filtering.</p>
</td></tr>
<tr><td><code id="filter_itch_+3A_overwrite">overwrite</code></td>
<td>
<p>if an existing outfile with the same name should be
overwritten. Default value is false</p>
</td></tr>
<tr><td><code id="filter_itch_+3A_gz">gz</code></td>
<td>
<p>if the output file should be gzip-compressed. Note that the name
of the output file will be appended with .gz if not already present. The
final output name is returned. Default value is false.</p>
</td></tr>
<tr><td><code id="filter_itch_+3A_buffer_size">buffer_size</code></td>
<td>
<p>the size of the buffer in bytes, defaults to 1e8 (100 MB),
if you have a large amount of RAM, 1e9 (1GB) might be faster</p>
</td></tr>
<tr><td><code id="filter_itch_+3A_quiet">quiet</code></td>
<td>
<p>if TRUE, the status messages are suppressed, defaults to FALSE</p>
</td></tr>
<tr><td><code id="filter_itch_+3A_force_gunzip">force_gunzip</code></td>
<td>
<p>only applies if the input file is a gz-archive and a file with the same (gunzipped) name already exists.
if set to TRUE, the existing file is overwritten. Default value is FALSE</p>
</td></tr>
<tr><td><code id="filter_itch_+3A_force_cleanup">force_cleanup</code></td>
<td>
<p>only applies if the input file is a gz-archive.
If force_cleanup=TRUE, the gunzipped raw file will be deleted afterwards.
Only applies when the gunzipped raw file did not exist before.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that this can be especially useful on larger files or where memory
is not large enough to filter the datalimits the analysis.
</p>
<p>As with the <code><a href="#topic+read_itch">read_itch()</a></code> functions, it allows to filter for
<code>msg_class</code>, <code>msg_type</code>, <code>stock_locate</code>/<code>stock</code>, and
<code>timestamp</code>.
</p>


<h3>Value</h3>

<p>the name of the output file (maybe different from the inputted
outfile due to adding the date and exchange), silently
</p>


<h3>Examples</h3>

<pre><code class='language-R'>infile &lt;- system.file("extdata", "ex20101224.TEST_ITCH_50", package = "RITCH")
outfile &lt;- tempfile(fileext = "_20101224.TEST_ITCH_50")
filter_itch(
  infile, outfile,
  filter_msg_class = c("orders", "trades"),
  filter_msg_type = "R", # stock_directory
  skip = 0, n_max = 100
)

# expecting 100 orders, 100 trades, and 3 stock_directory entries
count_messages(outfile)

# check that the output file contains the same
res  &lt;- read_itch(outfile, c("orders", "trades", "stock_directory"))
sapply(res, nrow)

res2 &lt;- read_itch(infile,  c("orders", "trades", "stock_directory"),
                  n_max = 100)

all.equal(res, res2)
</code></pre>

<hr>
<h2 id='format_bytes'>Formats a number of bytes</h2><span id='topic+format_bytes'></span>

<h3>Description</h3>

<p>Formats a number of bytes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_bytes(x, digits = 2, unit_suffix = "B", base = 1000)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format_bytes_+3A_x">x</code></td>
<td>
<p>the values</p>
</td></tr>
<tr><td><code id="format_bytes_+3A_digits">digits</code></td>
<td>
<p>the number of digits to display, default value is 2</p>
</td></tr>
<tr><td><code id="format_bytes_+3A_unit_suffix">unit_suffix</code></td>
<td>
<p>the unit suffix, default value is 'B' (for bytes),
useful is also 'B/s' if you have read/write speeds</p>
</td></tr>
<tr><td><code id="format_bytes_+3A_base">base</code></td>
<td>
<p>the base for kilo, mega, ... definition, default is 1000</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the values as a character
</p>


<h3>Examples</h3>

<pre><code class='language-R'>format_bytes(1234)
format_bytes(1234567890)
format_bytes(123456789012, unit_suffix = "iB", base = 1024)
</code></pre>

<hr>
<h2 id='get_date_from_filename'>Returns the date from an ITCH-filename</h2><span id='topic+get_date_from_filename'></span>

<h3>Description</h3>

<p>Returns the date from an ITCH-filename
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_date_from_filename(file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_date_from_filename_+3A_file">file</code></td>
<td>
<p>a filename</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the date as fastPOSIXct
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_date_from_filename("03302017.NASDAQ_ITCH50")
get_date_from_filename("20170130.BX_ITCH_50.gz")
get_date_from_filename("S030220-v50-bx.txt.gz")
get_date_from_filename("unknown_file_format")
</code></pre>

<hr>
<h2 id='get_exchange_from_filename'>Returns the exchange from an ITCH-filename</h2><span id='topic+get_exchange_from_filename'></span>

<h3>Description</h3>

<p>Returns the exchange from an ITCH-filename
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_exchange_from_filename(file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_exchange_from_filename_+3A_file">file</code></td>
<td>
<p>a filename</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The exchange
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_exchange_from_filename("03302017.NASDAQ_ITCH50")
get_exchange_from_filename("20170130.BX_ITCH_50.gz")
get_exchange_from_filename("S030220-v50-bx.txt.gz")
get_exchange_from_filename("Unknown_file_format")
</code></pre>

<hr>
<h2 id='get_msg_classes'>Returns the message class data for the message types</h2><span id='topic+get_msg_classes'></span>

<h3>Description</h3>

<p>All information is handled according to the official ITCH 5.0
documentation as found here:
<a href="http://www.nasdaqtrader.com/content/technicalsupport/specifications/dataproducts/NQTVITCHSpecification.pdf">http://www.nasdaqtrader.com/content/technicalsupport/specifications/dataproducts/NQTVITCHSpecification.pdf</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_msg_classes()
</code></pre>


<h3>Details</h3>


<ul>
<li> <p><code>msg_type</code> the type of the message
</p>
</li>
<li> <p><code>msg_class</code> the group the message belongs to
</p>
</li>
<li> <p><code>msg_name</code> the official name of the message
</p>
</li>
<li> <p><code>doc_nr</code> the number of the message in the documentation
</p>
</li></ul>



<h3>Value</h3>

<p>a data.table with the information of the message-types
</p>


<h3>See Also</h3>

<p><code>open_itch_specification()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_msg_classes()
</code></pre>

<hr>
<h2 id='gz_functions'>Compresses and uncompresses files to and from gz-archives</h2><span id='topic+gz_functions'></span><span id='topic+gunzip_file'></span><span id='topic+gzip_file'></span>

<h3>Description</h3>

<p>Allows the compression and uncompression of files
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gunzip_file(
  infile,
  outfile = gsub("\\.gz$", "", infile),
  buffer_size = min(4 * file.size(infile), 2e+09)
)

gzip_file(
  infile,
  outfile = NA,
  buffer_size = min(4 * file.size(infile), 2e+09)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gz_functions_+3A_infile">infile</code></td>
<td>
<p>the file to be zipped or unzipped</p>
</td></tr>
<tr><td><code id="gz_functions_+3A_outfile">outfile</code></td>
<td>
<p>the resulting zipped or unzipped file</p>
</td></tr>
<tr><td><code id="gz_functions_+3A_buffer_size">buffer_size</code></td>
<td>
<p>the size of the buffer to read in at once, default is 4 times the file.size (max 2Gb).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Functions are
</p>

<ul>
<li> <p><code>gunzip_file</code>: uncompresses a gz-archive to raw binary data
</p>
</li></ul>

<p>-<code>gzip_file</code>: compresses a raw binary data file to a gz-archive
</p>


<h3>Value</h3>

<p>The filename of the unzipped file, invisibly
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gzfile &lt;- system.file("extdata", "ex20101224.TEST_ITCH_50.gz", package = "RITCH")
file   &lt;- system.file("extdata", "ex20101224.TEST_ITCH_50", package = "RITCH")

# uncompress file
(outfile &lt;- gunzip_file(gzfile, "tmp"))
file.info(outfile)
unlink(outfile)

# compress file
(outfile &lt;- gzip_file(file))
file.info(outfile)
unlink(outfile)
</code></pre>

<hr>
<h2 id='list_sample_files'>Returns a data.table of the sample files on the server</h2><span id='topic+list_sample_files'></span>

<h3>Description</h3>

<p>The Server can be found at <a href="https://emi.nasdaq.com/ITCH/Nasdaq%20ITCH/">https://emi.nasdaq.com/ITCH/Nasdaq%20ITCH/</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_sample_files()
</code></pre>


<h3>Value</h3>

<p>a data.table of the files
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  list_sample_files()

## End(Not run)
</code></pre>

<hr>
<h2 id='open_itch_sample_server'>Opens the ITCH sample page</h2><span id='topic+open_itch_sample_server'></span>

<h3>Description</h3>

<p>The server can be found at <a href="https://emi.nasdaq.com/ITCH/Nasdaq%20ITCH/">https://emi.nasdaq.com/ITCH/Nasdaq%20ITCH/</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>open_itch_sample_server()
</code></pre>


<h3>Value</h3>

<p>the URL (invisible)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
open_itch_sample_server()

## End(Not run)
</code></pre>

<hr>
<h2 id='open_itch_specification'>Opens the ITCH Specification PDF</h2><span id='topic+open_itch_specification'></span>

<h3>Description</h3>

<p>The specifications can be found as a PDF <a href="https://www.nasdaqtrader.com/content/technicalsupport/specifications/dataproducts/NQTVITCHspecification.pdf">https://www.nasdaqtrader.com/content/technicalsupport/specifications/dataproducts/NQTVITCHspecification.pdf</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>open_itch_specification()
</code></pre>


<h3>Value</h3>

<p>the URL (invisible)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
open_itch_specification()

## End(Not run)
</code></pre>

<hr>
<h2 id='read_functions'>Reads certain messages of an ITCH-file into a data.table</h2><span id='topic+read_functions'></span><span id='topic+read_itch'></span><span id='topic+read_system_events'></span><span id='topic+read_stock_directory'></span><span id='topic+read_trading_status'></span><span id='topic+read_reg_sho'></span><span id='topic+read_market_participant_states'></span><span id='topic+read_mwcb'></span><span id='topic+read_ipo'></span><span id='topic+read_luld'></span><span id='topic+read_orders'></span><span id='topic+read_modifications'></span><span id='topic+read_trades'></span><span id='topic+read_noii'></span><span id='topic+read_rpii'></span><span id='topic+get_orders'></span><span id='topic+get_trades'></span><span id='topic+get_modifications'></span>

<h3>Description</h3>

<p>For faster file-reads (at the tradeoff of increased memory usages), you can
increase the <code>buffer_size</code> to 1GB (1e9) or more.
</p>
<p>If you access the same file multiple times, you can provide the message
counts as outputted from <code><a href="#topic+count_messages">count_messages()</a></code> to the <code>n_max</code>
argument, this allows skipping one pass over the file per read instruction.
</p>
<p>If you need to read in multiple message classes, you can specify multiple
message classes to <code>read_itch</code>, which results in only a single file pass.
</p>
<p>If the file is too large to be loaded into the workspace at once, you can
specify different <code>skip</code> and <code>n_max</code> to load only
a specific range of messages.
Alternatively, you can filter certain messages to another file using
<code><a href="#topic+filter_itch">filter_itch()</a></code>, which is substantially faster than parsing a file
and filtering it.
</p>
<p>Note that all read functions allow both plain ITCH files as well as gzipped
files.
If a gzipped file is found, it will look for a plain ITCH file with
the same name and use that instead.
If this file is not found, it will be created by unzipping the archive.
Note that the unzipped file is NOT deleted by default (the file will be
created in the current working directory).
It might result in increased disk usage but reduces future read times for
that specific file.
To force RITCH to delete &quot;temporary&quot; files after uncompressing, use
<code>force_cleanup = TRUE</code> (only deletes the files if they were extracted
before, does not remove the archive itself).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_itch(
  file,
  filter_msg_class = NA,
  skip = 0,
  n_max = -1,
  filter_msg_type = NA_character_,
  filter_stock_locate = NA_integer_,
  min_timestamp = bit64::as.integer64(NA),
  max_timestamp = bit64::as.integer64(NA),
  filter_stock = NA_character_,
  stock_directory = NA,
  buffer_size = -1,
  quiet = FALSE,
  add_meta = TRUE,
  force_gunzip = FALSE,
  gz_dir = tempdir(),
  force_cleanup = TRUE
)

read_system_events(file, ..., add_descriptions = FALSE)

read_stock_directory(file, ..., add_descriptions = FALSE)

read_trading_status(file, ..., add_descriptions = FALSE)

read_reg_sho(file, ..., add_descriptions = FALSE)

read_market_participant_states(file, ..., add_descriptions = FALSE)

read_mwcb(file, ...)

read_ipo(file, ..., add_descriptions = FALSE)

read_luld(file, ...)

read_orders(file, ...)

read_modifications(file, ...)

read_trades(file, ...)

read_noii(file, ..., add_descriptions = FALSE)

read_rpii(file, ..., add_descriptions = FALSE)

get_orders(file, ...)

get_trades(file, ...)

get_modifications(file, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_functions_+3A_file">file</code></td>
<td>
<p>the path to the input file, either a gz-archive or a plain ITCH file</p>
</td></tr>
<tr><td><code id="read_functions_+3A_filter_msg_class">filter_msg_class</code></td>
<td>
<p>a vector of classes to load, can be &quot;orders&quot;, &quot;trades&quot;,
&quot;modifications&quot;, ... see also <code><a href="#topic+get_msg_classes">get_msg_classes()</a></code>.
Default value is to take all message classes.</p>
</td></tr>
<tr><td><code id="read_functions_+3A_skip">skip</code></td>
<td>
<p>Number of messages to skip before starting parsing messages,
note the skip parameter applies to the specific message class, i.e., it would
skip the messages for each type (e.g., skip the first 10 messages for each class).</p>
</td></tr>
<tr><td><code id="read_functions_+3A_n_max">n_max</code></td>
<td>
<p>Maximum number of messages to parse, default is to read all values.
Can also be a data.frame of msg_types and counts, as returned by
<code><a href="#topic+count_messages">count_messages()</a></code>.
Note the n_max parameter applies to the specific message class not the whole
file.</p>
</td></tr>
<tr><td><code id="read_functions_+3A_filter_msg_type">filter_msg_type</code></td>
<td>
<p>a character vector, specifying a filter for message types.
Note that this can be used to only return 'A' orders for instance.</p>
</td></tr>
<tr><td><code id="read_functions_+3A_filter_stock_locate">filter_stock_locate</code></td>
<td>
<p>an integer vector, specifying a filter for locate codes.
The locate codes can be looked up by calling <code><a href="#topic+read_stock_directory">read_stock_directory()</a></code>
or by downloading from NASDAQ by using <code><a href="#topic+download_stock_directory">download_stock_directory()</a></code>.
Note that some message types (e.g., system events, MWCB, and IPO) do not use
a locate code.</p>
</td></tr>
<tr><td><code id="read_functions_+3A_min_timestamp">min_timestamp</code></td>
<td>
<p>an 64 bit integer vector (see also <code><a href="bit64.html#topic+as.integer64.character">bit64::as.integer64()</a></code>)
of minimum timestamp (inclusive).
Note: min and max timestamp must be supplied with the same length or left empty.</p>
</td></tr>
<tr><td><code id="read_functions_+3A_max_timestamp">max_timestamp</code></td>
<td>
<p>an 64 bit integer vector (see also <code><a href="bit64.html#topic+as.integer64.character">bit64::as.integer64()</a></code>)
of maxium timestamp (inclusive).
Note: min and max timestamp must be supplied with the same length or left empty.</p>
</td></tr>
<tr><td><code id="read_functions_+3A_filter_stock">filter_stock</code></td>
<td>
<p>a character vector, specifying a filter for stocks.
Note that this a shorthand for the <code>filter_stock_locate</code> argument, as it
tries to find the stock_locate based on the <code>stock_directory</code> argument,
if this is not found, it will try to extract the stock directory from the file,
else an error is thrown.</p>
</td></tr>
<tr><td><code id="read_functions_+3A_stock_directory">stock_directory</code></td>
<td>
<p>A data.frame containing the stock-locate code relationship.
As outputted by <code><a href="#topic+read_stock_directory">read_stock_directory()</a></code>.
Only used if <code>filter_stock</code> is set. To download the stock directory from
NASDAQs server, use <code><a href="#topic+download_stock_directory">download_stock_directory()</a></code>.</p>
</td></tr>
<tr><td><code id="read_functions_+3A_buffer_size">buffer_size</code></td>
<td>
<p>the size of the buffer in bytes, defaults to 1e8 (100 MB),
if you have a large amount of RAM, 1e9 (1GB) might be faster</p>
</td></tr>
<tr><td><code id="read_functions_+3A_quiet">quiet</code></td>
<td>
<p>if TRUE, the status messages are suppressed, defaults to FALSE</p>
</td></tr>
<tr><td><code id="read_functions_+3A_add_meta">add_meta</code></td>
<td>
<p>if TRUE, the date and exchange information of the file are added, defaults to TRUE</p>
</td></tr>
<tr><td><code id="read_functions_+3A_force_gunzip">force_gunzip</code></td>
<td>
<p>only applies if the input file is a gz-archive and a file with the same (gunzipped) name already exists.
if set to TRUE, the existing file is overwritten. Default value is FALSE</p>
</td></tr>
<tr><td><code id="read_functions_+3A_gz_dir">gz_dir</code></td>
<td>
<p>a directory where the gz archive is extracted to.
Only applies if file is a gz archive. Default is <code><a href="base.html#topic+tempdir">tempdir()</a></code>.</p>
</td></tr>
<tr><td><code id="read_functions_+3A_force_cleanup">force_cleanup</code></td>
<td>
<p>only applies if the input file is a gz-archive.
If force_cleanup=TRUE, the gunzipped raw file will be deleted afterwards.
Only applies when the gunzipped raw file did not exist before.</p>
</td></tr>
<tr><td><code id="read_functions_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code>read_itch</code></p>
</td></tr>
<tr><td><code id="read_functions_+3A_add_descriptions">add_descriptions</code></td>
<td>
<p>add longer descriptions to shortened variables.
The added information is taken from the official ITCH documentation
see also <code><a href="#topic+open_itch_specification">open_itch_specification()</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The details of the different messages types can be found in the official
ITCH specification (see also <code><a href="#topic+open_itch_specification">open_itch_specification()</a></code>)
</p>

<ul>
<li> <p><code>read_itch</code>: Reads a message class message, can also read multiple
classes in one file-pass.
</p>
</li></ul>


<ul>
<li> <p><code>read_system_events</code>: Reads system event messages. Message type <code>S</code>
</p>
</li></ul>


<ul>
<li> <p><code>read_stock_directory</code>: Reads stock trading messages. Message type <code>R</code>
</p>
</li></ul>


<ul>
<li> <p><code>read_trading_status</code>: Reads trading status messages. Message type <code>H</code>
and <code>h</code>
</p>
</li></ul>


<ul>
<li> <p><code>read_reg_sho</code>: Reads messages regarding reg SHO. Message type <code>Y</code>
</p>
</li></ul>


<ul>
<li> <p><code>read_market_participant_states</code>: Reads messages regarding the
status of market participants. Message type <code>L</code>
</p>
</li></ul>


<ul>
<li> <p><code>read_mwcb</code>: Reads messages regarding Market-Wide-Circuit-Breakers
(MWCB). Message type <code>V</code> and <code>W</code>
</p>
</li></ul>


<ul>
<li> <p><code>read_ipo</code>: Reads messages regarding IPOs. Message type <code>K</code>
</p>
</li></ul>


<ul>
<li> <p><code>read_luld</code>: Reads messages regarding LULDs (limit up-limit down)
auction collars. Message type <code>J</code>
</p>
</li></ul>


<ul>
<li> <p><code>read_orders</code>: Reads order messages. Message type <code>A</code> and <code>F</code>
</p>
</li></ul>


<ul>
<li> <p><code>read_modifications</code>: Reads order modification messages. Message
type <code>E</code>, <code>C</code>, <code>X</code>, <code>D</code>, and <code>U</code>
</p>
</li></ul>


<ul>
<li> <p><code>read_trades</code>: Reads trade messages. Message type <code>P</code>, <code>Q</code> and <code>B</code>
</p>
</li></ul>


<ul>
<li> <p><code>read_noii</code>: Reads Net Order Imbalance Indicatio (NOII) messages.
Message type <code>I</code>
</p>
</li></ul>


<ul>
<li> <p><code>read_rpii</code>: Reads Retail Price Improvement Indicator (RPII)
messages. Message type <code>N</code>
</p>
</li></ul>

<p>For backwards compatability reasons, the following functions are provided as
well:
</p>

<ul>
<li> <p><code>get_orders</code>: Redirects to <code>read_orders</code>
</p>
</li></ul>


<ul>
<li> <p><code>get_trades</code>: Redirects to <code>read_trades</code>
</p>
</li></ul>


<ul>
<li> <p><code>get_modifications</code>: Redirects to <code>read_modifications</code>
</p>
</li></ul>



<h3>Value</h3>

<p>a data.table containing the messages
</p>


<h3>References</h3>

<p><a href="https://www.nasdaqtrader.com/content/technicalsupport/specifications/dataproducts/NQTVITCHspecification.pdf">https://www.nasdaqtrader.com/content/technicalsupport/specifications/dataproducts/NQTVITCHspecification.pdf</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
file &lt;- system.file("extdata", "ex20101224.TEST_ITCH_50", package = "RITCH")
od &lt;- read_orders(file, quiet = FALSE) # note quiet = FALSE is the default
tr &lt;- read_trades(file, quiet = TRUE)

## Alternatively
od &lt;- read_itch(file, "orders", quiet = TRUE)

ll &lt;- read_itch(file, c("orders", "trades"), quiet = TRUE)

od
tr
str(ll, max.level = 1)

## additional options:

# take only subset of messages
od &lt;- read_orders(file, skip = 3, n_max = 10)

# a message count can be provided for slightly faster reads
msg_count &lt;- count_messages(file, quiet = TRUE)
od &lt;- read_orders(file, n_max = msg_count)

## .gz archive functionality
# .gz archives will be automatically unzipped
gz_file &lt;- system.file("extdata", "ex20101224.TEST_ITCH_50.gz", package = "RITCH")
od &lt;- read_orders(gz_file)
# force a decompress and delete the decompressed file afterwards
od &lt;- read_orders(gz_file, force_gunzip = TRUE, force_cleanup = TRUE)

## read_itch()
otm &lt;- read_itch(file, c("orders", "trades"), quiet = TRUE)
str(otm, max.level = 1)

## read_system_events()
se &lt;- read_system_events(file, add_descriptions = TRUE, quiet = TRUE)
se

## read_stock_directory()
sd &lt;- read_stock_directory(file, add_descriptions = TRUE, quiet = TRUE)
sd

## read_trading_status()
ts &lt;- read_trading_status(file, add_descriptions = TRUE, quiet = TRUE)
ts

## read_reg_sho()
## Not run: 
# note the example file has no reg SHO messages
rs &lt;- read_reg_sho(file, add_descriptions = TRUE, quiet = TRUE)
rs

## End(Not run)

## read_market_participant_states()
## Not run: 
# note the example file has no market participant states
mps &lt;- read_market_participant_states(file, add_descriptions = TRUE,
                                      quiet = TRUE)
mps

## End(Not run)

## read_mwcb()
## Not run: 
# note the example file has no circuit breakers messages
mwcb &lt;- read_mwcb(file, quiet = TRUE)
mwcb

## End(Not run)

## read_ipo()
## Not run: 
# note the example file has no IPOs
ipo &lt;- read_ipo(file, add_descriptions = TRUE, quiet = TRUE)
ipo

## End(Not run)

## read_luld()
## Not run: 
# note the example file has no LULD messages
luld &lt;- read_luld(file, quiet = TRUE)
luld

## End(Not run)

## read_orders()
od &lt;- read_orders(file, quiet = TRUE)
od

## read_modifications()
mod &lt;- read_modifications(file, quiet = TRUE)
mod

## read_trades()
tr &lt;- read_trades(file, quiet = TRUE)
tr

## read_noii()
## Not run: 
# note the example file has no NOII messages
noii &lt;- read_noii(file, add_descriptions = TRUE, quiet = TRUE)
noii

## End(Not run)

## read_rpii()
## Not run: 
# note the example file has no RPII messages
rpii &lt;- read_rpii(file, add_descriptions = TRUE, quiet = TRUE)
rpii

## End(Not run)
</code></pre>

<hr>
<h2 id='write_itch'>Writes a data.frame or a list of data.frames of ITCH messages to file</h2><span id='topic+write_itch'></span>

<h3>Description</h3>

<p>Note that additional information, e.g., columns that were added, will be
dropped in the process and only ITCH-compliant information is saved.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_itch(
  ll,
  file,
  add_meta = TRUE,
  append = FALSE,
  compress = FALSE,
  buffer_size = 1e+08,
  quiet = FALSE,
  append_warning = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_itch_+3A_ll">ll</code></td>
<td>
<p>a data.frame or a list of data.frames of ITCH messages, in the format
that the <code><a href="#topic+read_functions">read_functions()</a></code> return</p>
</td></tr>
<tr><td><code id="write_itch_+3A_file">file</code></td>
<td>
<p>the filename of the target file. If the folder to the file does
not exist, it will be created recursively</p>
</td></tr>
<tr><td><code id="write_itch_+3A_add_meta">add_meta</code></td>
<td>
<p>if date and file information should be added to the filename.
Default value is TRUE. Note that adding meta information changes the filename.</p>
</td></tr>
<tr><td><code id="write_itch_+3A_append">append</code></td>
<td>
<p>if the information should be appended to the file. Default value
is FALSE</p>
</td></tr>
<tr><td><code id="write_itch_+3A_compress">compress</code></td>
<td>
<p>if the file should be gzipped. Default value is FALSE.
Note that if you compress a file, buffer_size matters a lot, with larger
buffers you are more likely to get smaller filesizes in the end.
Alternatively, but slower, is to write the file without compression fully
and then gzip the file using another program.</p>
</td></tr>
<tr><td><code id="write_itch_+3A_buffer_size">buffer_size</code></td>
<td>
<p>the maximum buffer size. Default value is 1e8 (100MB).
Accepted values are &gt; 52 and &lt; 5e9</p>
</td></tr>
<tr><td><code id="write_itch_+3A_quiet">quiet</code></td>
<td>
<p>if TRUE, the status messages are suppressed, defaults to FALSE</p>
</td></tr>
<tr><td><code id="write_itch_+3A_append_warning">append_warning</code></td>
<td>
<p>if append is set, a warning about timestamp ordering is
given. Set <code>append_warning = FALSE</code> to silence the warning. Default
value is TRUE</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that the ITCH filename contains the information for the date and exchange.
This can be specified explicitly in the file argument or it is added if not
turned off <code>add_meta = FALSE</code>.
</p>


<h3>Value</h3>

<p>the filename (invisibly)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>infile &lt;- system.file("extdata", "ex20101224.TEST_ITCH_50", package = "RITCH")
sys &lt;- read_system_events(infile, quiet = TRUE)
outfile &lt;- tempfile()
write_itch(sys, outfile)

# create a list of events, stock directory, and orders and write to a file
sdir &lt;- read_stock_directory(infile, quiet = TRUE)
od   &lt;- read_orders(infile, quiet = TRUE)

ll &lt;- list(sys, sdir, od)
write_itch(ll, outfile)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
