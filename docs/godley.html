<!DOCTYPE html><html lang="en"><head><title>Help for package godley</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {godley}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_equation'><p>Add equations to the model</p></a></li>
<li><a href='#add_equation_single'><p>Add single equation to the model</p></a></li>
<li><a href='#add_scenario'><p>Add scenario to the model</p></a></li>
<li><a href='#add_shock'><p>Add shock to shock object</p></a></li>
<li><a href='#add_variable'><p>Add variables to the model</p></a></li>
<li><a href='#add_variable_single'><p>Add single variable to the model</p></a></li>
<li><a href='#change_init'><p>Change initial value of a variable</p></a></li>
<li><a href='#check_parentheses_balance'><p>Verify if parentheses in the equation are properly balanced</p></a></li>
<li><a href='#create_model'><p>Create SFC model object</p></a></li>
<li><a href='#create_sensitivity'><p>Create model with sensitivity scenarios</p></a></li>
<li><a href='#create_shock'><p>Create shock used in <code>add_scenario()</code>.</p></a></li>
<li><a href='#d'><p>Calculate 1 order lag difference of a variable in model</p></a></li>
<li><a href='#plot_cycles'><p>Network plot of the model</p></a></li>
<li><a href='#plot_simulation'><p>Plot simulations of multiple variables in multiple scenarios</p></a></li>
<li><a href='#prepare'><p>Make initial matrix row for baseline scenario and prepare equations for <code>simulate_scenario()</code></p></a></li>
<li><a href='#restore_equation'><p>Restore equation notation for warning messages</p></a></li>
<li><a href='#simulate_scenario'><p>Simulate scenario of SFC model object</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Stock-Flow-Consistent Model Simulator</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.2</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Elżbieta Jowik &lt;jowik.elzbieta@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Define, simulate, and validate stock-flow consistent (SFC) macroeconomic models. The godley R package offers tools to dynamically define model structures by adding variables and specifying governing systems of equations. With it, users can analyze how different macroeconomic structures affect key variables, perform parameter sensitivity analyses, introduce policy shocks, and visualize resulting economic scenarios. The accounting structure of SFC models follows the approach outlined in the seminal study by Godley and Lavoie (2007, ISBN:978-1-137-08599-3), ensuring a comprehensive integration of all economic flows and stocks. The algorithms implemented to solve the models are based on methodologies from Kinsella and O'Shea (2010) &lt;<a href="https://doi.org/10.2139%2Fssrn.1729205">doi:10.2139/ssrn.1729205</a>&gt;, Peressini and Sullivan (1988, ISBN:0-387-96614-5), and contributions by Joao Macalos.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://gamrot.github.io/godley/">https://gamrot.github.io/godley/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/gamrot/godley/issues">https://github.com/gamrot/godley/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, stringr, tidyr, igraph, purrr, vctrs, rlang, rootSolve,
plotly, magrittr, checkmate, vecsets, lubridate, data.table,
tibble, visNetwork</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-22 08:21:18 UTC; ejowik001</td>
</tr>
<tr>
<td>Author:</td>
<td>Michał Gamrot [aut, cph],
  Iwo Augustyński [ctb],
  Julian Kacprzak [ctb],
  Elżbieta Jowik [cre, ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-02-23 23:30:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_equation'>Add equations to the model</h2><span id='topic+add_equation'></span>

<h3>Description</h3>

<p>Add equations to the model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_equation(model, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_equation_+3A_model">model</code></td>
<td>
<p>SFC model object</p>
</td></tr>
<tr><td><code id="add_equation_+3A_...">...</code></td>
<td>
<p>additional arguments passed to the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>updated SFC model object containing added equation
</p>

<hr>
<h2 id='add_equation_single'>Add single equation to the model</h2><span id='topic+add_equation_single'></span>

<h3>Description</h3>

<p>helper for add_equation()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_equation_single(model, equation, hidden = FALSE, desc = "")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_equation_single_+3A_model">model</code></td>
<td>
<p>SFC model object</p>
</td></tr>
<tr><td><code id="add_equation_single_+3A_equation">equation</code></td>
<td>
<p>string equation in format: 'x = y + z - a * b + (c + d) / e + f[-1]'</p>
</td></tr>
<tr><td><code id="add_equation_single_+3A_hidden">hidden</code></td>
<td>
<p>logical, indicates if equation should be written as hidden, defaults to FALSE</p>
</td></tr>
<tr><td><code id="add_equation_single_+3A_desc">desc</code></td>
<td>
<p>string equation description</p>
</td></tr>
</table>

<hr>
<h2 id='add_scenario'>Add scenario to the model</h2><span id='topic+add_scenario'></span>

<h3>Description</h3>

<p>Add scenario to the model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_scenario(
  model,
  name = "expansion",
  origin = "baseline",
  origin_start = NA,
  origin_end = NA,
  shock
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_scenario_+3A_model">model</code></td>
<td>
<p>SFC model object</p>
</td></tr>
<tr><td><code id="add_scenario_+3A_name">name</code></td>
<td>
<p>string name of scenario, defaults to 'expansion'</p>
</td></tr>
<tr><td><code id="add_scenario_+3A_origin">origin</code></td>
<td>
<p>string name of origin scenario, from which the new scenario will be created, defaults to 'baseline'</p>
</td></tr>
<tr><td><code id="add_scenario_+3A_origin_start">origin_start</code></td>
<td>
<p>numeric period number from origin scenario from which the new scenario will begin</p>
</td></tr>
<tr><td><code id="add_scenario_+3A_origin_end">origin_end</code></td>
<td>
<p>numeric period number from origin scenario on which the new scenario will end</p>
</td></tr>
<tr><td><code id="add_scenario_+3A_shock">shock</code></td>
<td>
<p>shock object from <code>create_shock()</code> and <code>add_shock()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>updated SFC model object containing added scenario
</p>

<hr>
<h2 id='add_shock'>Add shock to shock object</h2><span id='topic+add_shock'></span>

<h3>Description</h3>

<p>Add shock to shock object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_shock(
  shock,
  variable,
  value = NA,
  rate = NA,
  absolute = NA,
  start = NA,
  end = NA,
  desc = ""
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_shock_+3A_shock">shock</code></td>
<td>
<p>tibble from <code>create_shock()</code></p>
</td></tr>
<tr><td><code id="add_shock_+3A_variable">variable</code></td>
<td>
<p>string variable name</p>
</td></tr>
<tr><td><code id="add_shock_+3A_value">value</code></td>
<td>
<p>numeric, an explicit value or values for the variable, will be extended with last value</p>
</td></tr>
<tr><td><code id="add_shock_+3A_rate">rate</code></td>
<td>
<p>numeric, multiplier to influence the original value of the variable</p>
</td></tr>
<tr><td><code id="add_shock_+3A_absolute">absolute</code></td>
<td>
<p>numeric, absolute value to influence the original value of the variable</p>
</td></tr>
<tr><td><code id="add_shock_+3A_start">start</code></td>
<td>
<p>numeric or date period number for the shock to take place, defaults to NA</p>
</td></tr>
<tr><td><code id="add_shock_+3A_end">end</code></td>
<td>
<p>numeric or date period number for the shock to take place, defaults to NA</p>
</td></tr>
<tr><td><code id="add_shock_+3A_desc">desc</code></td>
<td>
<p>string variable description</p>
</td></tr>
</table>


<h3>Value</h3>

<p>updated shock object containing added shock
</p>

<hr>
<h2 id='add_variable'>Add variables to the model</h2><span id='topic+add_variable'></span>

<h3>Description</h3>

<p>Add variables to the model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_variable(model, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_variable_+3A_model">model</code></td>
<td>
<p>SFC model object</p>
</td></tr>
<tr><td><code id="add_variable_+3A_...">...</code></td>
<td>
<p>additional arguments passed to the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>updated SFC model object containing added variable
</p>

<hr>
<h2 id='add_variable_single'>Add single variable to the model</h2><span id='topic+add_variable_single'></span>

<h3>Description</h3>

<p>helper for add_variable()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_variable_single(model, name, init = NA, desc = "")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_variable_single_+3A_model">model</code></td>
<td>
<p>SFC model object</p>
</td></tr>
<tr><td><code id="add_variable_single_+3A_name">name</code></td>
<td>
<p>string name for added variable</p>
</td></tr>
<tr><td><code id="add_variable_single_+3A_init">init</code></td>
<td>
<p>numeric initial value, defaults to 1e-05</p>
</td></tr>
<tr><td><code id="add_variable_single_+3A_desc">desc</code></td>
<td>
<p>string variable description</p>
</td></tr>
</table>

<hr>
<h2 id='change_init'>Change initial value of a variable</h2><span id='topic+change_init'></span>

<h3>Description</h3>

<p>Change initial value of a variable
</p>


<h3>Usage</h3>

<pre><code class='language-R'>change_init(model, name, value)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="change_init_+3A_model">model</code></td>
<td>
<p>SFC model object</p>
</td></tr>
<tr><td><code id="change_init_+3A_name">name</code></td>
<td>
<p>string variable name</p>
</td></tr>
<tr><td><code id="change_init_+3A_value">value</code></td>
<td>
<p>numeric value that will replace existing initial value</p>
</td></tr>
</table>


<h3>Value</h3>

<p>updated SFC model object with new variable initial value
</p>

<hr>
<h2 id='check_parentheses_balance'>Verify if parentheses in the equation are properly balanced</h2><span id='topic+check_parentheses_balance'></span>

<h3>Description</h3>

<p>This function checks if all parentheses in a given equation string are correctly
paired and balanced. If there are no parentheses, the equation is considered
trivially balanced. It returns 'TRUE' if the parentheses are balanced and 'FALSE' otherwise.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_parentheses_balance(eq)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_parentheses_balance_+3A_eq">eq</code></td>
<td>
<p>A character string representing an equation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical value indicating whether the parentheses are balanced ('TRUE') or not ('FALSE').
</p>

<hr>
<h2 id='create_model'>Create SFC model object</h2><span id='topic+create_model'></span>

<h3>Description</h3>

<p>Create SFC model object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_model(name = "SFC model", template)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_model_+3A_name">name</code></td>
<td>
<p>string name for created SFC model object</p>
</td></tr>
<tr><td><code id="create_model_+3A_template">template</code></td>
<td>
<p>string name of model template chosen from: 'SIM', 'PC', 'LP', 'REG', 'OPEN', 'BMW', 'BMWK', 'DIS', 'DISINF', 'SIMEX', 'PCEX'
or user created SFC model object to be used as a template</p>
</td></tr>
</table>


<h3>Value</h3>

<p>SFC model object
</p>

<hr>
<h2 id='create_sensitivity'>Create model with sensitivity scenarios</h2><span id='topic+create_sensitivity'></span>

<h3>Description</h3>

<p>Create model with sensitivity scenarios
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_sensitivity(model_pass, variable, lower = 0, upper = 1, step = 0.1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_sensitivity_+3A_model_pass">model_pass</code></td>
<td>
<p>SFC model object that will be used as a baseline for sensitivity calculation</p>
</td></tr>
<tr><td><code id="create_sensitivity_+3A_variable">variable</code></td>
<td>
<p>string name of the variable that will be used</p>
</td></tr>
<tr><td><code id="create_sensitivity_+3A_lower">lower</code></td>
<td>
<p>numeric lower bound value of the variable</p>
</td></tr>
<tr><td><code id="create_sensitivity_+3A_upper">upper</code></td>
<td>
<p>numeric upper bound value of the variable</p>
</td></tr>
<tr><td><code id="create_sensitivity_+3A_step">step</code></td>
<td>
<p>numeric step between upper and lower bounds for the variable to take value</p>
</td></tr>
</table>


<h3>Value</h3>

<p>SFC model object with sensitivity scenarios
</p>

<hr>
<h2 id='create_shock'>Create shock used in <code>add_scenario()</code>.</h2><span id='topic+create_shock'></span>

<h3>Description</h3>

<p>Create shock used in <code>add_scenario()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_shock()
</code></pre>


<h3>Value</h3>

<p>shock object
</p>

<hr>
<h2 id='d'>Calculate 1 order lag difference of a variable in model</h2><span id='topic+d'></span>

<h3>Description</h3>

<p>Calculate 1 order lag difference of a variable in model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>d(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="d_+3A_x">x</code></td>
<td>
<p>variable name</p>
</td></tr>
</table>


<h3>Details</h3>

<p>this is a special function to be used exclusively in model equation strings e.g. &quot;x = d(y) + z&quot;
</p>


<h3>Value</h3>

<p>difference
</p>

<hr>
<h2 id='plot_cycles'>Network plot of the model</h2><span id='topic+plot_cycles'></span>

<h3>Description</h3>

<p>Network plot of the model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_cycles(model, save_file = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_cycles_+3A_model">model</code></td>
<td>
<p>SFC model object created with <code><a href="#topic+create_model">create_model</a></code></p>
</td></tr>
<tr><td><code id="plot_cycles_+3A_save_file">save_file</code></td>
<td>
<p>name and path to save the plot as html file</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function creates a representation of a model as a directed graph.
Additionally it shows cycles in the model including these with lagged variables.
Graph can be saved as html file.
</p>


<h3>Value</h3>

<p>visNetwork object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model &lt;- godley::create_model(name = "SFC model", template = "BMW")
plot_cycles(model)

</code></pre>

<hr>
<h2 id='plot_simulation'>Plot simulations of multiple variables in multiple scenarios</h2><span id='topic+plot_simulation'></span>

<h3>Description</h3>

<p>Plot simulations of multiple variables in multiple scenarios
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_simulation(
  model,
  scenario = "baseline",
  take_all = FALSE,
  from = NA,
  to = NA,
  expressions = "Y"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_simulation_+3A_model">model</code></td>
<td>
<p>SFC model object</p>
</td></tr>
<tr><td><code id="plot_simulation_+3A_scenario">scenario</code></td>
<td>
<p>vector of strings or single string name of scenario(s) from which take variables values, defaults to 'baseline'</p>
</td></tr>
<tr><td><code id="plot_simulation_+3A_take_all">take_all</code></td>
<td>
<p>logical indicating whether all scenarios containing the given scenario name string(s) should be used, defaults to FALSE</p>
</td></tr>
<tr><td><code id="plot_simulation_+3A_from">from</code></td>
<td>
<p>numeric period number from which the plot should start, defaults to maximum value</p>
</td></tr>
<tr><td><code id="plot_simulation_+3A_to">to</code></td>
<td>
<p>numeric period number on which the plot should end, defaults to minimum value</p>
</td></tr>
<tr><td><code id="plot_simulation_+3A_expressions">expressions</code></td>
<td>
<p>vector of strings or single string name of variable(s) expression(s) to plot, defaults to 'Y'</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>plotly</code> plot
</p>

<hr>
<h2 id='prepare'>Make initial matrix row for baseline scenario and prepare equations for <code>simulate_scenario()</code></h2><span id='topic+prepare'></span>

<h3>Description</h3>

<p>Make initial matrix row for baseline scenario and prepare equations for <code>simulate_scenario()</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prepare(model, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prepare_+3A_model">model</code></td>
<td>
<p>SFC model object</p>
</td></tr>
<tr><td><code id="prepare_+3A_verbose">verbose</code></td>
<td>
<p>logical to tell if additional model verbose should be displayed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>verified and prepared SFC model object
</p>

<hr>
<h2 id='restore_equation'>Restore equation notation for warning messages</h2><span id='topic+restore_equation'></span>

<h3>Description</h3>

<p>This function converts an internally processed equation expression (e.g., &lsquo;m[.i, &rsquo;Var']')
into a more readable format (e.g., 'Var'). The function handles lagged variables,
transforming expressions such as &lsquo;m[.i - 1, &rsquo;Var']' into 'Var[-1]'.
It is intended for use in warning messages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>restore_equation(eq_line)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="restore_equation_+3A_eq_line">eq_line</code></td>
<td>
<p>A character string representing an equation with internal indexing.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string where the internal indexing notation has been restored to
a more user-friendly form.
</p>

<hr>
<h2 id='simulate_scenario'>Simulate scenario of SFC model object</h2><span id='topic+simulate_scenario'></span>

<h3>Description</h3>

<p>Simulate scenario of SFC model object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulate_scenario(
  model,
  scenario,
  periods = NA,
  start_date = NA,
  method = "Gauss",
  max_iter = 350,
  tol = 1e-05,
  hidden_tol = 0.1,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="simulate_scenario_+3A_model">model</code></td>
<td>
<p>SFC model object</p>
</td></tr>
<tr><td><code id="simulate_scenario_+3A_scenario">scenario</code></td>
<td>
<p>vector of strings or single string name of scenario(s) to simulate</p>
</td></tr>
<tr><td><code id="simulate_scenario_+3A_periods">periods</code></td>
<td>
<p>numeric total number of rows (periods) in the model, defaults to 100</p>
</td></tr>
<tr><td><code id="simulate_scenario_+3A_start_date">start_date</code></td>
<td>
<p>character date to begin the simulation in the format &quot;yyyy-mm-dd&quot;</p>
</td></tr>
<tr><td><code id="simulate_scenario_+3A_method">method</code></td>
<td>
<p>string name of method used to find solution chosen from: 'Gauss', 'Newton', defaults to 'Gauss'</p>
</td></tr>
<tr><td><code id="simulate_scenario_+3A_max_iter">max_iter</code></td>
<td>
<p>numeric maximum iterations allowed per period, defaults to 350</p>
</td></tr>
<tr><td><code id="simulate_scenario_+3A_tol">tol</code></td>
<td>
<p>numeric tolerance accepted to determine convergence, defaults to 1e-05</p>
</td></tr>
<tr><td><code id="simulate_scenario_+3A_hidden_tol">hidden_tol</code></td>
<td>
<p>numeric error tolerance to accept the equality of hidden equations, defaults to 0.1.</p>
</td></tr>
<tr><td><code id="simulate_scenario_+3A_verbose">verbose</code></td>
<td>
<p>logical to tell if additional model verbose should be displayed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>updated model containing simulated scenario(s)
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
