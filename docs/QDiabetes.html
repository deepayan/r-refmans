<!DOCTYPE html><html><head><title>Help for package QDiabetes</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {QDiabetes}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#dat_qdr'><p>QDiabetes Sample Dataset</p></a></li>
<li><a href='#getTDS'><p>Lookup Townsend Deprivation Scores from UK Postcodes</p></a></li>
<li><a href='#QDiabetes-package'><p>Type 2 Diabetes Risk Calculator</p></a></li>
<li><a href='#QDR2013'><p>QDiabetes-2013 Risk Calculator</p></a></li>
<li><a href='#QDR2018A'><p>QDiabetes-2018 Risk Calculator (A-Variant)</p></a></li>
<li><a href='#QDR2018B'><p>QDiabetes-2018 Risk Calculator (B-Variant)</p></a></li>
<li><a href='#QDR2018C'><p>QDiabetes-2018 Risk Calculator (C-Variant)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>1.0-2</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-02-07</td>
</tr>
<tr>
<td>Title:</td>
<td>Type 2 Diabetes Risk Calculator</td>
</tr>
<tr>
<td>Description:</td>
<td>Calculate the risk of developing type 2 diabetes using risk prediction algorithms derived by 'ClinRisk'.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats</td>
</tr>
<tr>
<td>Suggests:</td>
<td>graphics, tinytest, utils</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/AGPL-3">AGPL-3</a> + file LICENSE</td>
</tr>
<tr>
<td>Copyright:</td>
<td>University of Oxford + file inst/COPYRIGHTS</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/Feakster/qdiabetes">https://github.com/Feakster/qdiabetes</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/Feakster/qdiabetes/issues">https://github.com/Feakster/qdiabetes/issues</a></td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>true</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-02-07 12:17:00 UTC; benjamin</td>
</tr>
<tr>
<td>Author:</td>
<td>Benjamin G. Feakins
    <a href="https://orcid.org/0000-0002-3928-6750"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Sarah L. Lay-Flurrie
    <a href="https://orcid.org/0000-0003-1094-8455"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Richard J. Stevens
    <a href="https://orcid.org/0000-0002-9258-4060"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Trish Greenhalgh <a href="https://orcid.org/0000-0003-2369-8088"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Tim A. Holt <a href="https://orcid.org/0000-0002-1214-1682"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Evangelos Kontopantelis
    <a href="https://orcid.org/0000-0001-6450-5815"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Dianna M. Smith <a href="https://orcid.org/0000-0002-0650-6606"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Bernard C. Gudgin [ctb],
  Benjamin J. Cairns
    <a href="https://orcid.org/0000-0001-7994-8213"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [csl, sad],
  National Institute for Health Research School for Primary Care Research
    [fnd],
  University of Oxford [cph, sht]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Benjamin G. Feakins &lt;benjamin.feakins@ndph.ox.ac.uk&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-02-11 09:50:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='dat_qdr'>QDiabetes Sample Dataset</h2><span id='topic+dat_qdr'></span>

<h3>Description</h3>

<p>A simulated sample dataset for exploring the use of the <code>QDR2013</code>, <code>QDR2018A</code>, <code>QDR2018B</code> and <code>QDR2018C</code> type 2 diabetes risk prediction functions of this package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("dat_qdr")</code></pre>


<h3>Format</h3>

<p>A data frame with 50 observations on the following 21 variables:
</p>

<dl>
<dt><code>sex</code></dt><dd><p>A factor vector of genders. Possible values: <code>"Female"</code> or <code>"Male"</code>.</p>
</dd>
<dt><code>age</code></dt><dd><p>An integer vector of ages (years).</p>
</dd>
<dt><code>bmi</code></dt><dd><p>A double vector ofbody-mass indexes (kg/m^2).</p>
</dd>
<dt><code>ht</code></dt><dd><p>A double vector of heights (m).</p>
</dd>
<dt><code>wt</code></dt><dd><p>A double vector of weights (kg).</p>
</dd>
<dt><code>fpg</code></dt><dd><p>A double vector of fasting plasma glucose test results (mmol/L).</p>
</dd>
<dt><code>hba1c</code></dt><dd><p>A double vector of glycated haemoglobin test results (mmol/mol).</p>
</dd>
<dt><code>ethn</code></dt><dd><p>A factor vector of ethnicities. Possible values:
</p>

<ul>
<li> <p><code>"WhiteNA"</code> (White or not stated)
</p>
</li>
<li> <p><code>"Indian"</code> (Indian)
</p>
</li>
<li> <p><code>"Pakistani"</code> (Pakistani)
</p>
</li>
<li> <p><code>"Bangladeshi"</code> (Bangladeshi)
</p>
</li>
<li> <p><code>"OtherAsian"</code> (Other Asian)
</p>
</li>
<li> <p><code>"BlackCaribbean"</code> (Black Caribbean)
</p>
</li>
<li> <p><code>"BlackAfrican"</code> (Black African)
</p>
</li>
<li> <p><code>"Chinese"</code> (Chinese)
</p>
</li>
<li> <p><code>"Other"</code> (Other ethnic group).
</p>
</li></ul>

</dd>
<dt><code>smoke</code></dt><dd><p>A factor vector of smoking statuses. Possible values:
</p>

<ul>
<li> <p><code>"Non"</code> (Non-smoker)
</p>
</li>
<li> <p><code>"Ex"</code> (Ex-smoker)
</p>
</li>
<li> <p><code>"Light"</code> (Light smoker - less than 10 cigarettes per day)
</p>
</li>
<li> <p><code>"Moderate"</code> (Moderate smoker - 10 to 19 cigarettes per day)
</p>
</li>
<li> <p><code>"Heavy"</code> (Heavy smoker - 20 or more cigarettes per day).
</p>
</li></ul>

</dd>
<dt><code>postcode</code></dt><dd><p>A character vector of UK postcodes.</p>
</dd>
<dt><code>tds</code></dt><dd><p>A double vector of Townsend deprivation scores.</p>
</dd>
<dt><code>fhdm</code></dt><dd><p>A logical vector indicating family history of diabetes.</p>
</dd>
<dt><code>htn</code></dt><dd><p>A logical vector indicating history of hypertension.</p>
</dd>
<dt><code>cvd</code></dt><dd><p>A logical vector indicating history of cardiovascular disease.</p>
</dd>
<dt><code>gdm</code></dt><dd><p>A logical vector indicating history of gestational diabetes.</p>
</dd>
<dt><code>pcos</code></dt><dd><p>A logical vector indicating history of polycystic ovary syndrome.</p>
</dd>
<dt><code>learn</code></dt><dd><p>A logical vector indicating history of learning difficulties.</p>
</dd>
<dt><code>psy</code></dt><dd><p>A logical vector indicating history of shizophrenia or bipolar affective disorder.</p>
</dd>
<dt><code>ster</code></dt><dd><p>A logical vector indicating history of corticosteroid use.</p>
</dd>
<dt><code>stat</code></dt><dd><p>A logical vector indicating history of statin use.</p>
</dd>
<dt><code>apsy</code></dt><dd><p>A logical vector indicating history of 2nd generation antipsychotic use.</p>
</dd>
</dl>



<h3>Details</h3>

<p>A simulated dataset containing the characteristics of 50 subjects (one per row).
No relationships have been simulated between variables.
The dataset contains no values or combinations of values that would result in warnings or errors from any of the risk prediction functions in this package.
It exists purely to allow for testing and exploration of these functions.
</p>


<h3>Author(s)</h3>

<p>Benjamin G. Feakins <a href="mailto:benjamin.feakins@ndph.ox.ac.uk">benjamin.feakins@ndph.ox.ac.uk</a></p>


<h3>Source</h3>

<p>The dataset is simulated, except for the <code>postcode</code> and <code>tds</code> variables, which are key-value pairs randomly drawn from an Office for National Statistics dataset.
For more information on this dataset, see the documentation for the <code><a href="#topic+getTDS">getTDS</a></code> function.
</p>

<ul>
<li><p> Contains OS data (C) Crown copyright and database right 2020
</p>
</li>
<li><p> Contains Royal Mail data (C) Royal Mail copyright and database right 2020
</p>
</li>
<li><p> Source: Office for National Statistics licensed under the Open Government Licence v.3.0
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>data(dat_qdr)
str(dat_qdr)
</code></pre>

<hr>
<h2 id='getTDS'>Lookup Townsend Deprivation Scores from UK Postcodes</h2><span id='topic+getTDS'></span>

<h3>Description</h3>

<p>Convenient function to look up Townsend deprivation scores using UK postcodes, postcode prefixes, postcode suffixes or a regular expression.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getTDS(postcode, type = "full", squash = ifelse(type != "regex", FALSE, TRUE))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getTDS_+3A_postcode">postcode</code></td>
<td>
<p>A vector of UK postcodes, postcode prefixes, postcode suffixes, or a regular expression.</p>
</td></tr>
<tr><td><code id="getTDS_+3A_type">type</code></td>
<td>
<p>A character string indicating the term provided in the <code>postcode</code> parameter. Possible values are:</p>
</td></tr>
</table>

<ul>
<li> <p><code>"full"</code> &mdash; a full five&ndash;seven character postcode.
</p>
</li>
<li> <p><code>"prefix"</code> &mdash; a two&ndash;four character postcode prefix.
</p>
</li>
<li> <p><code>"suffix"</code> &mdash; a three character postcode suffix.
</p>
</li>
<li> <p><code>"regex"</code> &mdash; a regular expression, allowing any nature of postcode match.
</p>
</li></ul>

<table>
<tr><td><code id="getTDS_+3A_squash">squash</code></td>
<td>
<p>a logical parameter indicating whether the scores returned should be aggregated into a single median value.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>getTDS</code> is a lookup function that queries a dataset of postcodes and Townsend deprivation scores.
This dataset was created by joining a dataset of postcodes to a dataset of Townsend deprivation scores, via output area codes.
Both data sets are made available by the Office for National Statistics under the <a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/">Open Government License</a>.
The postcode dataset was last updated in February 2019, while the dataset of Townsend deprivation scores uses values obtained from the 2011 UK census (matching the Townsend deprivation score dates used by ClinRisk in the derivation of the QDiabetes-2018 algorithms).
</p>


<h3>Value</h3>

<p>Townsend Deprivation Score.
</p>
<p>Where <code>type</code> is not set to <code>"regex"</code>, the length and nature of the value returned are governed by the <code>type</code> and <code>squash</code> parameters:
</p>

<ul>
<li><p> When <code>squash</code> is set to <code>FALSE</code> (the default value) an output vector will be returned that is of equal length to the input vector. When <code>squash</code> is set to <code>TRUE</code> a numeric output of length one will be returned, comprising the median Townsend deprivation score from all matched postcodes.
</p>
</li>
<li><p> As each postcode is only associated with a single output area, when <code>type</code> is set to <code>"full"</code> and <code>squash</code> is set to <code>FALSE</code> the Townsend deprivation scores returned will be the exact values associated with each linked output area.
</p>
</li>
<li><p> As each postcode prefix or suffix may be associated with multiple output areas, when <code>squash</code> is set to <code>FALSE</code> and <code>type</code> is set to <code>"prefix"</code> or <code>"suffix"</code> the median Townsend deprivation score per prefix/suffix will be returned.
</p>
</li></ul>



<h3>Note</h3>

<p>PO Box codes have no associated Townsend deprivation scores and will not work as function inputs.
No Northern Ireland postcodes are present in the database searched by <code>getTDS</code> as their use is governed by a separate, more restrictive license.
</p>

<ul>
<li><p> Contains OS data (C) Crown copyright and database right 2020
</p>
</li>
<li><p> Contains Royal Mail data (C) Royal Mail copyright and database right 2020
</p>
</li>
<li><p> Source: Office for National Statistics licensed under the Open Government Licence v.3.0
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Benjamin G. Feakins <a href="mailto:benjamin.feakins@ndph.ox.ac.uk">benjamin.feakins@ndph.ox.ac.uk</a></p>


<h3>Source</h3>

<p>UK Postcode-to-output-area data were obtained <a href="http://geoportal1-ons.opendata.arcgis.com/datasets/postcode-to-output-area-to-lower-layer-super-output-area-to-middle-layer-super-output-area-to-local-authority-district-february-2019-lookup-in-the-uk">here</a> from the Office for National Statistics.
</p>
<p>Output-area-to-Townsend-deprivation-scores data were obtained <a href="https://www.statistics.digitalresources.jisc.ac.uk/dataset/2011-uk-townsend-deprivation-scores">here</a> from the Office for National Statistics.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Simple usage
getTDS(postcode = "OX2 6GG")
getTDS(postcode = c("OX2 6NW", "OX3 7LF"))

## Case &amp; white space insensitive
getTDS(postcode = c("OX37LF", "OX3 7LF", "ox37lf", "ox3 7lf"))

## Median Townsend Deprivaton Score per Postcode Prefix ##
getTDS(postcode = paste0("OX", 1:9), type = "prefix")

## Median Overall Townsend Deprivation Score for a Set of Prefixes ##
getTDS(postcode = paste0("OX", 1:9), type = "prefix", squash = TRUE)

## Median Townsend Deprivaton Score per Postcode Suffix ##
getTDS(postcode = paste0(1:9, "AA"), type = "suffix")

## Median Overall Townsend Deprivation Score for a Set of Prefixes ##
getTDS(postcode = paste0(1:9, "AA"), type = "suffix", squash = TRUE)

## Median Overall Townsend Deprivation Score for Postcodes Matching a Regular Expression ##
getTDS(postcode = "^OX37[A-Z]{2}$", type = "regex")
</code></pre>

<hr>
<h2 id='QDiabetes-package'>Type 2 Diabetes Risk Calculator</h2><span id='topic+QDiabetes-package'></span><span id='topic+QDiabetes'></span>

<h3>Description</h3>

<p>This package calculates the risk of developing type 2 diabetes using risk prediction algorithms, which were initially derived by <a href="https://clinrisk.co.uk/ClinRisk/Welcome.html">ClinRisk</a>. Currently, these include QDiabetes-2013 and <a href="https://qdiabetes.org/">QDiabetes-2018</a>, although older (and eventually more recent) versions of QDiabetes will be included in future releases.
</p>


<h3>Details</h3>

<p>The package consistes of four risk prediction functions for use in estimating the risk of developing type 2 diabetes:
</p>

<ul>
<li><p><code><a href="#topic+QDR2013">QDR2013</a></code> - For estimating the 1&ndash;10-year risk using QDiabetes-2013.
</p>
</li>
<li><p><code><a href="#topic+QDR2018A">QDR2018A</a></code> - For estimating the 10-year risk using QDiabetes-2018 (Model A).
</p>
</li>
<li><p><code><a href="#topic+QDR2018B">QDR2018B</a></code> - For estimating the 10-year risk using QDiabetes-2018 (Model B).
</p>
</li>
<li><p><code><a href="#topic+QDR2018C">QDR2018C</a></code> - For estimating the 10-year risk using QDiabetes-2018 (Model C).
</p>
</li></ul>

<p>The following variables are used by each risk prediction function present in this package:
</p>

<table>
<tr>
 <td style="text-align: left;">
    <b>Description</b>                                      </td><td style="text-align: right;">  <b>Variable</b> </td><td style="text-align: right;">  <b>Type</b> </td><td style="text-align: right;">  <b><code>QDR2013</code></b> </td><td style="text-align: right;">  <b><code>QDR2018A</code></b>  </td><td style="text-align: right;">  <b><code>QDR2018B</code></b>  </td><td style="text-align: right;">  <b><code>QDR2018C</code></b>  </td>
</tr>
<tr>
 <td style="text-align: left;">
    Gender                                                  </td><td style="text-align: right;">  <code>sex</code>      </td><td style="text-align: right;">  character   </td><td style="text-align: right;">  x                     </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td>
</tr>
<tr>
 <td style="text-align: left;">
    Age                                                     </td><td style="text-align: right;">  <code>age</code>      </td><td style="text-align: right;">  double      </td><td style="text-align: right;">  x                     </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td>
</tr>
<tr>
 <td style="text-align: left;">
    Body mass index (BMI)                                   </td><td style="text-align: right;">  <code>bmi</code>      </td><td style="text-align: right;">  double      </td><td style="text-align: right;">  x                     </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td>
</tr>
<tr>
 <td style="text-align: left;">
    Ethnicity                                               </td><td style="text-align: right;">  <code>ethn</code>     </td><td style="text-align: right;">  character   </td><td style="text-align: right;">  x                     </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td>
</tr>
<tr>
 <td style="text-align: left;">
    Smoking status                                          </td><td style="text-align: right;">  <code>smoke</code>    </td><td style="text-align: right;">  character   </td><td style="text-align: right;">  x                     </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td>
</tr>
<tr>
 <td style="text-align: left;">
    Deprivation                                             </td><td style="text-align: right;">  <code>tds</code>      </td><td style="text-align: right;">  double      </td><td style="text-align: right;">  x                     </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td>
</tr>
<tr>
 <td style="text-align: left;">
    Fasting plasma glucose (FPG)                            </td><td style="text-align: right;">  <code>fpg</code>      </td><td style="text-align: right;">  double      </td><td style="text-align: right;">                        </td><td style="text-align: right;">                          </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">                          </td>
</tr>
<tr>
 <td style="text-align: left;">
    Glycated haemoglobin (HbA1c)                            </td><td style="text-align: right;">  <code>hba1c</code>    </td><td style="text-align: right;">  double      </td><td style="text-align: right;">                        </td><td style="text-align: right;">                          </td><td style="text-align: right;">                          </td><td style="text-align: right;">  x                       </td>
</tr>
<tr>
 <td style="text-align: left;">
    Family history of diabetes                              </td><td style="text-align: right;">  <code>fhdm</code>     </td><td style="text-align: right;">  logical     </td><td style="text-align: right;">  x                     </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td>
</tr>
<tr>
 <td style="text-align: left;">
    History of treated hypertension                         </td><td style="text-align: right;">  <code>htn</code>      </td><td style="text-align: right;">  logical     </td><td style="text-align: right;">  x                     </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td>
</tr>
<tr>
 <td style="text-align: left;">
    History of cardiovascular disease                       </td><td style="text-align: right;">  <code>cvd</code>      </td><td style="text-align: right;">  logical     </td><td style="text-align: right;">  x                     </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td>
</tr>
<tr>
 <td style="text-align: left;">
    History of gestational Diabetes                         </td><td style="text-align: right;">  <code>gdm</code>      </td><td style="text-align: right;">  logical     </td><td style="text-align: right;">                        </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td>
</tr>
<tr>
 <td style="text-align: left;">
    History of polycystic ovary syndrome                    </td><td style="text-align: right;">  <code>pcos</code>     </td><td style="text-align: right;">  logical     </td><td style="text-align: right;">                        </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td>
</tr>
<tr>
 <td style="text-align: left;">
    History of learning difficulties                        </td><td style="text-align: right;">  <code>learn</code>    </td><td style="text-align: right;">  logical     </td><td style="text-align: right;">                        </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td>
</tr>
<tr>
 <td style="text-align: left;">
    History of schizophrenia or bipolar affective disorder  </td><td style="text-align: right;">  <code>psy</code>      </td><td style="text-align: right;">  logical     </td><td style="text-align: right;">                        </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td>
</tr>
<tr>
 <td style="text-align: left;">
    History of corticosteroid use                           </td><td style="text-align: right;">  <code>ster</code>     </td><td style="text-align: right;">  logical     </td><td style="text-align: right;">  x                     </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td>
</tr>
<tr>
 <td style="text-align: left;">
    History of statin use                                   </td><td style="text-align: right;">  <code>stat</code>     </td><td style="text-align: right;">  logical     </td><td style="text-align: right;">                        </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td>
</tr>
<tr>
 <td style="text-align: left;">
    History of use of 2nd generation antipsychotics         </td><td style="text-align: right;">  <code>apsy</code>     </td><td style="text-align: right;">  logical     </td><td style="text-align: right;">                        </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td><td style="text-align: right;">  x                       </td>
</tr>
<tr>
 <td style="text-align: left;">
    Survival time                                           </td><td style="text-align: right;">  <code>surv</code>     </td><td style="text-align: right;">  integer     </td><td style="text-align: right;">  x                     </td><td style="text-align: right;">                          </td><td style="text-align: right;">                          </td><td style="text-align: right;">
  </td>
</tr>

</table>

<p><em>NB: height (<code>ht</code>) and weight (<code>wt</code>) may be specified in place of body mass index (<code>bmi</code>) in any of the above functions.</em>
</p>
<p>As per <span class="rlang"><b>R</b></span>'s general coding sytax, factor or character values may be passed to any risk prediction function parameter where a character value is expected, so long as the factor variable label matches one of the expected character strings. Similarly, <code>0</code> or <code>1</code> many be used in place of <code>FALSE</code> or <code>TRUE</code> for any function parameter where a logical value is expected.
</p>


<h3>Disclaimer</h3>

<p>ClinRisk do not support of endorse this code. End users should see the original C source as the 'gold standard' open source implementation. Please note that the QDiabetes <span class="rlang"><b>R</b></span> package has been created as a research tool for scientific purposes only. The QDiabetes <span class="rlang"><b>R</b></span> package has not been granted Medicines and Healthcare products Regulatory Agency (MHRA) approval as a medical device, and hence, should not be used as part of any individualised risk assessment.
</p>


<h3>Funding</h3>

<p>This project was funded by the National Institute for Health Research (NIHR) School for Primary Care Research (SPCR) [project number: <a href="https://www.spcr.nihr.ac.uk/projects/412-quantifying-the-risk-of-type-2-diabetes-across-the-uk">412</a>]. The views expressed are those of the author(s) and not necessarily those of the NIHR or the Department of Health and Social Care.
</p>


<h3>Note</h3>

<p>Many of the default values used in the risk prediction functions of this package were selected to be representative of a UK population. These values are only intended to minimise the amount of typing required when using the risk prediction functions in an exploratory manner. They are unlikely to be useful in a research setting, and you would need to know the exact values to assign to all function parameters in order to make accurate risk predictions. Hence, while you can get risk preditions from the <code><a href="#topic+QDR2013">QDR2013</a></code> and <code><a href="#topic+QDR2018A">QDR2018A</a></code> functions through the specification of only <code>sex</code>, <code>age</code>, and <code>bmi</code>, you would be assuming White or missing ethnicity, non-smoking status, a Townsend deprivation score of 0, and the complete absence of any relevant medical history/conditions and concommitant drug therapies. In the case of <code><a href="#topic+QDR2013">QDR2013</a></code>, you would also be assuming that a 10-year risk window is desired.
</p>


<h3>Author(s)</h3>

<p>Benjamin G. Feakins <a href="mailto:benjamin.feakins@ndph.ox.ac.uk">benjamin.feakins@ndph.ox.ac.uk</a></p>


<h3>References</h3>

<p>Hippisley-Cox, J., Coupland, C., Robson, J., Sheikh, A. and Brindle, P. (2009).
Predicting risk of type 2 diabetes in England and Wales: prospective derivation and validation of QDScore.
<em>BMJ</em>
<b>338</b>, b880.
doi: <a href="https://doi.org/10.1136/bmj.b880">10.1136/bmj.b880</a>
</p>
<p>Hippisley-Cox, J. and Coupland, C. (2017).
Development and validation of QDiabetes-2018 risk prediction algorithm to estimate future risk of type 2 diabetes: cohort study.
<em>BMJ</em>
<b>359</b>, j5019.
doi: <a href="https://doi.org/10.1136/bmj.j5019">10.1136/bmj.j5019</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getTDS">getTDS</a></code> - For looking up Townsend deprivation scores from UK postcodes.
</p>
<p><code><a href="#topic+dat_qdr">dat_qdr</a></code> - QDiabetes sample dataset.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>### Simple usage
## QDiabetes-2013
QDR2013(sex = "Female", age = 76, ht = 1.65, wt = 70)
QDR2013(sex = "Male", age = seq(25, 80, 5), bmi = 40, ethn = "Other", tds = 5)
## QDiabetes-2018
# Model A
QDR2018A(sex = "Female", age = 76, ht = 1.65, wt = 70)
QDR2018A(sex = "Male", age = seq(25, 80, 5), bmi = 40, ethn = "Other", tds = 5)
# Model B (inc. FPG)
QDR2018B(sex = "Female", age = 76, ht = 1.65, wt = 70, fpg = 4)
QDR2018B(sex = "Male", age = 55, bmi = 40, fpg = 2:6, ethn = "BlackCaribbean")
# Model C (inc. HbA1c)
QDR2018C(sex = "Female", age = 76, ht = 1.65, wt = 70, hba1c = 25)
QDR2018C(sex = "Male", age = 55, bmi = 40, hba1c = seq(15, 40, 5), ethn = "Chinese")

### Using postcodes to estimate Townsend deprivation scores
## QDiabetes-2013
QDR2013(sex = "Male", age = 65, bmi = 40, tds = getTDS("OX3 7LF"))
QDR2013(sex = "Female", age = 60, bmi = 35, tds = getTDS(c("OX2 6NW", "OX2 6GG")))
## QDiabetes-2018
# Model A
QDR2018A(sex = "Male", age = 65, bmi = 40, tds = getTDS("OX3 7LF"))
QDR2018A(sex = "Female", age = 60, bmi = 35, tds = getTDS(c("OX2 6NW", "OX2 6GG")))
# Model B (inc. FPG)
QDR2018B(sex = "Male", age = 65, bmi = 40, fpg = 6, tds = getTDS("OX3 7LF"))
QDR2018B(sex = "Female", age = 60, bmi = 35, fpg = 6, tds = getTDS(c("OX2 6NW", "OX2 6GG")))
# Model C (inc. HbA1c)
QDR2018C(sex = "Male", age = 65, bmi = 40, hba1c = 42, tds = getTDS("OX3 7LF"))
QDR2018C(sex = "Female", age = 60, bmi = 35, hba1c = 42, tds = getTDS(c("OX2 6NW", "OX2 6GG")))
</code></pre>

<hr>
<h2 id='QDR2013'>QDiabetes-2013 Risk Calculator</h2><span id='topic+QDR2013'></span><span id='topic+QDiabetes-2013'></span>

<h3>Description</h3>

<p>Calculate the risk of developing type 2 diabetes, using the QDiabetes-2013 algorithm.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>QDR2013(sex, age, bmi, ht, wt, ethn = "WhiteNA", smoke = "Non", tds = 0,
        fhdm = FALSE, htn = FALSE, cvd = FALSE, ster = FALSE, surv = 10L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="QDR2013_+3A_sex">sex</code></td>
<td>
<p>Gender. Must be <code>"Male"</code> or <code>"Female"</code>.</p>
</td></tr>
<tr><td><code id="QDR2013_+3A_age">age</code></td>
<td>
<p>Age, in years. Must be <code class="reqn">\ge</code>25 and &lt;85.</p>
</td></tr>
<tr><td><code id="QDR2013_+3A_bmi">bmi</code></td>
<td>
<p>Body-mass index, in kg/m^2. Must be <code class="reqn">\ge</code>40/2.1^2 and <code class="reqn">\le</code>180/1.4^2. Within this range, values &gt;40 are set to 40, while values &lt;20 are set to 20.</p>
</td></tr>
<tr><td><code id="QDR2013_+3A_ht">ht</code></td>
<td>
<p>Height, in m. Must be <code class="reqn">\ge</code>1.4 and <code class="reqn">\le</code>2.1.</p>
</td></tr>
<tr><td><code id="QDR2013_+3A_wt">wt</code></td>
<td>
<p>Weight, in kg. Must be <code class="reqn">\ge</code>40 and <code class="reqn">\le</code>180.</p>
</td></tr>
<tr><td><code id="QDR2013_+3A_ethn">ethn</code></td>
<td>
<p>Ethnicity. Must be one of:
</p>

<ul>
<li> <p><code>"WhiteNA"</code> (White or not stated)
</p>
</li>
<li> <p><code>"Indian"</code> (Indian)
</p>
</li>
<li> <p><code>"Pakistani"</code> (Pakistani)
</p>
</li>
<li> <p><code>"Bangladeshi"</code> (Bangladeshi)
</p>
</li>
<li> <p><code>"OtherAsian"</code> (Other Asian)
</p>
</li>
<li> <p><code>"BlackCaribbean"</code> (Black Caribbean)
</p>
</li>
<li> <p><code>"BlackAfrican"</code> (Black African)
</p>
</li>
<li> <p><code>"Chinese"</code> (Chinese)
</p>
</li>
<li> <p><code>"Other"</code> (Other ethnic group).
</p>
</li></ul>

</td></tr>
<tr><td><code id="QDR2013_+3A_smoke">smoke</code></td>
<td>
<p>Smoking status. Must be one of:
</p>

<ul>
<li> <p><code>"Non"</code> (Non-smoker)
</p>
</li>
<li> <p><code>"Ex"</code> (Ex-smoker)
</p>
</li>
<li> <p><code>"Light"</code> (Light smoker - less than 10 cigarettes per day)
</p>
</li>
<li> <p><code>"Moderate"</code> (Moderate smoker - 10 to 19 cigarettes per day)
</p>
</li>
<li> <p><code>"Heavy"</code> (Heavy smoker - 20 or more cigarettes per day).
</p>
</li></ul>

</td></tr>
<tr><td><code id="QDR2013_+3A_tds">tds</code></td>
<td>
<p>Townsend deprivation score. Must be <code class="reqn">\ge</code>-7 and <code class="reqn">\le</code>11.</p>
</td></tr>
<tr><td><code id="QDR2013_+3A_fhdm">fhdm</code></td>
<td>
<p>Family history of diabetes in 1st degree relative.</p>
</td></tr>
<tr><td><code id="QDR2013_+3A_htn">htn</code></td>
<td>
<p>History of hypertension.</p>
</td></tr>
<tr><td><code id="QDR2013_+3A_cvd">cvd</code></td>
<td>
<p>History of cardiovascular disease.</p>
</td></tr>
<tr><td><code id="QDR2013_+3A_ster">ster</code></td>
<td>
<p>History of use of corticosteroids.</p>
</td></tr>
<tr><td><code id="QDR2013_+3A_surv">surv</code></td>
<td>
<p>Time point at which the Kaplan-Meier cumulative survival estimate is used to calculate risk. Must be an integer value between 1 and 10.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Risk (%) of type 2 diabetes.</p>


<h3>Note</h3>

<p>The QDiabetes <span class="rlang"><b>R</b></span> package has been created as a research tool for scientific purposes only.
The QDiabetes <span class="rlang"><b>R</b></span> package has not been granted Medicines and Healthcare products Regulatory Agency (MHRA) approval as a medical device, and hence, should not be used as part of any individualised risk assessment.
</p>


<h3>Author(s)</h3>

<p>Benjamin G. Feakins <a href="mailto:benjamin.feakins@ndph.ox.ac.uk">benjamin.feakins@ndph.ox.ac.uk</a></p>


<h3>Source</h3>

<p><a href="https://svn.clinrisk.co.uk/opensource/qdiabetes/standard/">https://svn.clinrisk.co.uk/opensource/qdiabetes/standard/</a></p>


<h3>See Also</h3>

<p><code><a href="#topic+QDR2018A">QDR2018A</a></code> - For estimating the 10-year risk using QDiabetes-2018 (Model A).
</p>
<p><code><a href="#topic+QDR2018B">QDR2018B</a></code> - For estimating the 10-year risk using QDiabetes-2018 (Model B).
</p>
<p><code><a href="#topic+QDR2018C">QDR2018C</a></code> - For estimating the 10-year risk using QDiabetes-2018 (Model C).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Simple usage
QDR2013(sex = "Female", age = 76, ht = 1.65, wt = 70)
QDR2013(sex = "Male", age = seq(25, 80, 5), bmi = 40, ethn = "Other", tds = 5)
QDR2013(sex = "Female", age = 65, bmi = 35, smoke = c("Non", "Ex", "Light"), fhdm = TRUE)

## Using postcodes to estimate Townsend deprivation scores
QDR2013(sex = "Male", age = 65, bmi = 40, tds = getTDS("OX3 7LF"))
QDR2013(sex = "Female", age = 60, bmi = 35, tds = getTDS(c("OX2 6NW", "OX2 6GG")))

## Data frame usage
data(dat_qdr)
with(dat_qdr, QDR2013(sex = sex, age = age, bmi = bmi))

## Plotting outputs
age &lt;- seq(25, 80, 5)
risk_m &lt;- QDR2013(sex = "Male", age = age, bmi = 40)
risk_f &lt;- QDR2013(sex = "Female", age = age, bmi = 40)

oldpar &lt;- par(no.readonly = TRUE)
par(cex = 0.8, cex.sub = 0.8)
plot.new()
plot.window(xlim = range(age), ylim = range(pretty(c(risk_m, risk_f))))
axis(1, at = age)
axis(2, at = pretty(c(risk_m, risk_f)))
title(
  main = "Diabetes 10-year risk with age:\nQDiabetes-2013",
  sub = expression("BMI set to"~40*kg/m^2*", other variables set to defaults"),
  xlab = "Age (years)", ylab = "Risk (%)"
)
lines(age, risk_m, type = "b", col = "navy", lwd = 1.5)
lines(age, risk_f, type = "b", col = "red3", lwd = 1.5)
legend("bottomright", legend = c("Male", "Female"), col = c("navy", "red3"), lty = 1, bty = "n")
par(oldpar)
</code></pre>

<hr>
<h2 id='QDR2018A'>QDiabetes-2018 Risk Calculator (A-Variant)</h2><span id='topic+QDR2018A'></span><span id='topic+QDiabetes-2018A'></span>

<h3>Description</h3>

<p>Calculate the 10-year risk of developing type 2 diabetes, using the A-variant of the QDiabetes-2018 algorithm.
This variant does not use fasting plasma glucose or glycated haemoglobin A1c.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>QDR2018A(sex, age, bmi, ht, wt, ethn = "WhiteNA", smoke = "Non", tds = 0,
         fhdm = FALSE, htn = FALSE, cvd = FALSE, gdm = FALSE, pcos = FALSE,
         learn = FALSE, psy = FALSE, ster = FALSE, stat = FALSE, apsy = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="QDR2018A_+3A_sex">sex</code></td>
<td>
<p>Gender. Must be <code>"Male"</code> or <code>"Female"</code>.</p>
</td></tr>
<tr><td><code id="QDR2018A_+3A_age">age</code></td>
<td>
<p>Age, in years. Must be <code class="reqn">\ge</code>25 and &lt;85.</p>
</td></tr>
<tr><td><code id="QDR2018A_+3A_bmi">bmi</code></td>
<td>
<p>Body-mass index, in kg/m^2. Must be <code class="reqn">\ge</code>40/2.1^2 and <code class="reqn">\le</code>180/1.4^2. Within this range, values &gt;40 are set to 40, while values &lt;20 are set to 20.</p>
</td></tr>
<tr><td><code id="QDR2018A_+3A_ht">ht</code></td>
<td>
<p>Height, in m. Must be <code class="reqn">\ge</code>1.4 and <code class="reqn">\le</code>2.1.</p>
</td></tr>
<tr><td><code id="QDR2018A_+3A_wt">wt</code></td>
<td>
<p>Weight, in kg. Must be <code class="reqn">\ge</code>40 and <code class="reqn">\le</code>180.</p>
</td></tr>
<tr><td><code id="QDR2018A_+3A_ethn">ethn</code></td>
<td>
<p>Ethnicity. Must be one of:
</p>

<ul>
<li> <p><code>"WhiteNA"</code> (White or not stated)
</p>
</li>
<li> <p><code>"Indian"</code> (Indian)
</p>
</li>
<li> <p><code>"Pakistani"</code> (Pakistani)
</p>
</li>
<li> <p><code>"Bangladeshi"</code> (Bangladeshi)
</p>
</li>
<li> <p><code>"OtherAsian"</code> (Other Asian)
</p>
</li>
<li> <p><code>"BlackCaribbean"</code> (Black Caribbean)
</p>
</li>
<li> <p><code>"BlackAfrican"</code> (Black African)
</p>
</li>
<li> <p><code>"Chinese"</code> (Chinese)
</p>
</li>
<li> <p><code>"Other"</code> (Other ethnic group).
</p>
</li></ul>

</td></tr>
<tr><td><code id="QDR2018A_+3A_smoke">smoke</code></td>
<td>
<p>Smoking status. Must be one of:
</p>

<ul>
<li> <p><code>"Non"</code> (Non-smoker)
</p>
</li>
<li> <p><code>"Ex"</code> (Ex-smoker)
</p>
</li>
<li> <p><code>"Light"</code> (Light smoker - less than 10 cigarettes per day)
</p>
</li>
<li> <p><code>"Moderate"</code> (Moderate smoker - 10 to 19 cigarettes per day)
</p>
</li>
<li> <p><code>"Heavy"</code> (Heavy smoker - 20 or more cigarettes per day).
</p>
</li></ul>

</td></tr>
<tr><td><code id="QDR2018A_+3A_tds">tds</code></td>
<td>
<p>Townsend deprivation score. Must be <code class="reqn">\ge</code>-8 and <code class="reqn">\le</code>14.</p>
</td></tr>
<tr><td><code id="QDR2018A_+3A_fhdm">fhdm</code></td>
<td>
<p>Family history of diabetes in 1st degree relative.</p>
</td></tr>
<tr><td><code id="QDR2018A_+3A_htn">htn</code></td>
<td>
<p>History of hypertension.</p>
</td></tr>
<tr><td><code id="QDR2018A_+3A_cvd">cvd</code></td>
<td>
<p>History of cardiovascular disease.</p>
</td></tr>
<tr><td><code id="QDR2018A_+3A_gdm">gdm</code></td>
<td>
<p>History of gestational diabetes.</p>
</td></tr>
<tr><td><code id="QDR2018A_+3A_pcos">pcos</code></td>
<td>
<p>History of polycystic ovary syndrome.</p>
</td></tr>
<tr><td><code id="QDR2018A_+3A_learn">learn</code></td>
<td>
<p>History of one or more conditions conveying learning difficulties.</p>
</td></tr>
<tr><td><code id="QDR2018A_+3A_psy">psy</code></td>
<td>
<p>History of schizophrenia or bipolar affective disorder.</p>
</td></tr>
<tr><td><code id="QDR2018A_+3A_ster">ster</code></td>
<td>
<p>History of use of corticosteroids.</p>
</td></tr>
<tr><td><code id="QDR2018A_+3A_stat">stat</code></td>
<td>
<p>History of use of statins.</p>
</td></tr>
<tr><td><code id="QDR2018A_+3A_apsy">apsy</code></td>
<td>
<p>History of use of 2nd generation antipsychotics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Risk (%) of type 2 diabetes.</p>


<h3>Note</h3>

<p>The QDiabetes <span class="rlang"><b>R</b></span> package has been created as a research tool for scientific purposes only.
The QDiabetes <span class="rlang"><b>R</b></span> package has not been granted Medicines and Healthcare products Regulatory Agency (MHRA) approval as a medical device, and hence, should not be used as part of any individualised risk assessment.
</p>


<h3>Author(s)</h3>

<p>Benjamin G. Feakins <a href="mailto:benjamin.feakins@ndph.ox.ac.uk">benjamin.feakins@ndph.ox.ac.uk</a></p>


<h3>Source</h3>

<p><a href="https://qdiabetes.org/2018/src.php">https://qdiabetes.org/2018/src.php</a></p>


<h3>References</h3>

<p>Hippisley-Cox, J. and Coupland, C. (2017).
Development and validation of QDiabetes-2018 risk prediction algorithm to estimate future risk of type 2 diabetes: cohort study.
<em>BMJ</em>
<b>359</b>, j5019.
doi: <a href="https://doi.org/10.1136/bmj.j5019">10.1136/bmj.j5019</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+QDR2013">QDR2013</a></code> - For estimating the 1&ndash;10-year risk using QDiabetes-2013.
</p>
<p><code><a href="#topic+QDR2018B">QDR2018B</a></code> - For estimating the 10-year risk using QDiabetes-2018 (Model B).
</p>
<p><code><a href="#topic+QDR2018C">QDR2018C</a></code> - For estimating the 10-year risk using QDiabetes-2018 (Model C).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Simple usage
QDR2018A(sex = "Female", age = 76, ht = 1.65, wt = 70)
QDR2018A(sex = "Male", age = seq(25, 80, 5), bmi = 40, ethn = "Other", tds = 5)
QDR2018A(sex = "Female", age = 65, bmi = 35, smoke = c("Non", "Ex", "Light"), fhdm = TRUE)

## Using postcodes to estimate Townsend deprivation scores
QDR2018A(sex = "Male", age = 65, bmi = 40, tds = getTDS("OX3 7LF"))
QDR2018A(sex = "Female", age = 60, bmi = 35, tds = getTDS(c("OX2 6NW", "OX2 6GG")))

## Data frame usage
data(dat_qdr)
with(dat_qdr, QDR2018A(sex = sex, age = age, bmi = bmi))

## Plotting outputs
age &lt;- seq(25, 80, 5)
risk_m &lt;- QDR2018A(sex = "Male", age = age, bmi = 40)
risk_f &lt;- QDR2018A(sex = "Female", age = age, bmi = 40)

oldpar &lt;- par(no.readonly = TRUE)
par(cex = 0.8, cex.sub = 0.8)
plot.new()
plot.window(xlim = range(age), ylim = range(pretty(c(risk_m, risk_f))))
axis(1, at = age)
axis(2, at = pretty(c(risk_m, risk_f)))
title(
  main = "Diabetes 10-year risk with age:\nQDiabetes-2018 (A-Variant)",
  sub = expression("BMI set to"~40*kg/m^2*", other variables set to defaults"),
  xlab = "Age (years)", ylab = "Risk (%)"
)
lines(age, risk_m, type = "b", col = "navy", lwd = 1.5)
lines(age, risk_f, type = "b", col = "red3", lwd = 1.5)
legend("bottomright", legend = c("Male", "Female"), col = c("navy", "red3"), lty = 1, bty = "n")
par(oldpar)
</code></pre>

<hr>
<h2 id='QDR2018B'>QDiabetes-2018 Risk Calculator (B-Variant)</h2><span id='topic+QDR2018B'></span><span id='topic+QDiabetes-2018B'></span>

<h3>Description</h3>

<p>Calculate the 10-year risk of developing type 2 diabetes, using the B-variant of the QDiabetes-2018 algorithm.
This variant includes all risk predictors present in the A-variant, with the addition of fasting plasma glucose.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>QDR2018B(sex, age, bmi, ht, wt, fpg, ethn = "WhiteNA", smoke = "Non", tds = 0,
         fhdm = FALSE, htn = FALSE, cvd = FALSE, gdm = FALSE, pcos = FALSE,
         learn = FALSE, psy = FALSE, ster = FALSE, stat = FALSE, apsy = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="QDR2018B_+3A_sex">sex</code></td>
<td>
<p>Gender. Must be <code>"Male"</code> or <code>"Female"</code>.</p>
</td></tr>
<tr><td><code id="QDR2018B_+3A_age">age</code></td>
<td>
<p>Age, in years. Must be <code class="reqn">\ge</code>25 and &lt;85.</p>
</td></tr>
<tr><td><code id="QDR2018B_+3A_bmi">bmi</code></td>
<td>
<p>Body-mass index, in kg/m^2. Must be <code class="reqn">\ge</code>40/2.1^2 and <code class="reqn">\le</code>180/1.4^2. Within this range, values &gt;40 are set to 40, while values &lt;20 are set to 20.</p>
</td></tr>
<tr><td><code id="QDR2018B_+3A_ht">ht</code></td>
<td>
<p>Height, in m. Must be <code class="reqn">\ge</code>1.4 and <code class="reqn">\le</code>2.1.</p>
</td></tr>
<tr><td><code id="QDR2018B_+3A_wt">wt</code></td>
<td>
<p>Weight, in kg. Must be <code class="reqn">\ge</code>40 and <code class="reqn">\le</code>180.</p>
</td></tr>
<tr><td><code id="QDR2018B_+3A_fpg">fpg</code></td>
<td>
<p>Fasting plasma glucose level, in mmol/L. Must be <code class="reqn">\ge</code>2 and &lt;7.</p>
</td></tr>
<tr><td><code id="QDR2018B_+3A_ethn">ethn</code></td>
<td>
<p>Ethnicity. Must be one of:
</p>

<ul>
<li> <p><code>"WhiteNA"</code> (White or not stated)
</p>
</li>
<li> <p><code>"Indian"</code> (Indian)
</p>
</li>
<li> <p><code>"Pakistani"</code> (Pakistani)
</p>
</li>
<li> <p><code>"Bangladeshi"</code> (Bangladeshi)
</p>
</li>
<li> <p><code>"OtherAsian"</code> (Other Asian)
</p>
</li>
<li> <p><code>"BlackCaribbean"</code> (Black Caribbean)
</p>
</li>
<li> <p><code>"BlackAfrican"</code> (Black African)
</p>
</li>
<li> <p><code>"Chinese"</code> (Chinese)
</p>
</li>
<li> <p><code>"Other"</code> (Other ethnic group).
</p>
</li></ul>

</td></tr>
<tr><td><code id="QDR2018B_+3A_smoke">smoke</code></td>
<td>
<p>Smoking status. Must be one of:
</p>

<ul>
<li> <p><code>"Non"</code> (Non-smoker)
</p>
</li>
<li> <p><code>"Ex"</code> (Ex-smoker)
</p>
</li>
<li> <p><code>"Light"</code> (Light smoker - less than 10 cigarettes per day)
</p>
</li>
<li> <p><code>"Moderate"</code> (Moderate smoker - 10 to 19 cigarettes per day)
</p>
</li>
<li> <p><code>"Heavy"</code> (Heavy smoker - 20 or more cigarettes per day).
</p>
</li></ul>

</td></tr>
<tr><td><code id="QDR2018B_+3A_tds">tds</code></td>
<td>
<p>Townsend deprivation score. Must be <code class="reqn">\ge</code>-8 and <code class="reqn">\le</code>14.</p>
</td></tr>
<tr><td><code id="QDR2018B_+3A_fhdm">fhdm</code></td>
<td>
<p>Family history of diabetes in 1st degree relative.</p>
</td></tr>
<tr><td><code id="QDR2018B_+3A_htn">htn</code></td>
<td>
<p>History of hypertension.</p>
</td></tr>
<tr><td><code id="QDR2018B_+3A_cvd">cvd</code></td>
<td>
<p>History of cardiovascular disease.</p>
</td></tr>
<tr><td><code id="QDR2018B_+3A_gdm">gdm</code></td>
<td>
<p>History of gestational diabetes.</p>
</td></tr>
<tr><td><code id="QDR2018B_+3A_pcos">pcos</code></td>
<td>
<p>History of polycystic ovary syndrome.</p>
</td></tr>
<tr><td><code id="QDR2018B_+3A_learn">learn</code></td>
<td>
<p>History of one or more conditions conveying learning difficulties.</p>
</td></tr>
<tr><td><code id="QDR2018B_+3A_psy">psy</code></td>
<td>
<p>History of schizophrenia or bipolar affective disorder.</p>
</td></tr>
<tr><td><code id="QDR2018B_+3A_ster">ster</code></td>
<td>
<p>History of use of corticosteroids.</p>
</td></tr>
<tr><td><code id="QDR2018B_+3A_stat">stat</code></td>
<td>
<p>History of use of statins.</p>
</td></tr>
<tr><td><code id="QDR2018B_+3A_apsy">apsy</code></td>
<td>
<p>History of use of 2nd generation antipsychotics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Risk (%) of type 2 diabetes.</p>


<h3>Note</h3>

<p>The QDiabetes <span class="rlang"><b>R</b></span> package has been created as a research tool for scientific purposes only.
The QDiabetes <span class="rlang"><b>R</b></span> package has not been granted Medicines and Healthcare products Regulatory Agency (MHRA) approval as a medical device, and hence, should not be used as part of any individualised risk assessment.
</p>


<h3>Author(s)</h3>

<p>Benjamin G. Feakins <a href="mailto:benjamin.feakins@ndph.ox.ac.uk">benjamin.feakins@ndph.ox.ac.uk</a></p>


<h3>Source</h3>

<p><a href="https://qdiabetes.org/2018/src.php">https://qdiabetes.org/2018/src.php</a></p>


<h3>References</h3>

<p>Hippisley-Cox, J. and Coupland, C. (2017).
Development and validation of QDiabetes-2018 risk prediction algorithm to estimate future risk of type 2 diabetes: cohort study.
<em>BMJ</em>
<b>359</b>, j5019.
doi: <a href="https://doi.org/10.1136/bmj.j5019">10.1136/bmj.j5019</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+QDR2013">QDR2013</a></code> - For estimating the 1&ndash;10-year risk using QDiabetes-2013.
</p>
<p><code><a href="#topic+QDR2018A">QDR2018A</a></code> - For estimating the 10-year risk using QDiabetes-2018 (Model A).
</p>
<p><code><a href="#topic+QDR2018C">QDR2018C</a></code> - For estimating the 10-year risk using QDiabetes-2018 (Model C).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Simple usage
QDR2018B(sex = "Female", age = 76, ht = 1.65, wt = 70, fpg = 4)
QDR2018B(sex = "Male", age = 55, bmi = 40, fpg = 2:6, ethn = "BlackCaribbean")
QDR2018B(sex = "Female", age = 65, bmi = 35, fpg = 5, smoke = "Ex", cvd = c(FALSE, TRUE))

## Using postcodes to estimate Townsend deprivation scores
QDR2018B(sex = "Male", age = 65, bmi = 40, fpg = 6, tds = getTDS("OX3 7LF"))
QDR2018B(sex = "Female", age = 60, bmi = 35, fpg = 6, tds = getTDS(c("OX2 6NW", "OX2 6GG")))

## Data frame usage
data(dat_qdr)
with(dat_qdr, QDR2018B(sex = sex, age = age, bmi = bmi, fpg = fpg))

## Plotting outputs
fpg &lt;- seq(2, 6.5, length.out = 10)
risk_m &lt;- QDR2018B(sex = "Male", age = 65, bmi = 40, fpg = fpg)
risk_f &lt;- QDR2018B(sex = "Female", age = 65, bmi = 40, fpg = fpg)

oldpar &lt;- par(no.readonly = TRUE)
par(cex = 0.8, cex.sub = 0.8)
plot.new()
plot.window(xlim = range(fpg), ylim = range(pretty(c(risk_m, risk_f))))
axis(1, at = fpg)
axis(2, at = pretty(c(risk_m, risk_f)))
title(
  main = "Diabetes 10-year risk with fasting plasma glucose level:\nQDiabetes-2018 (B-Variant)",
  sub = expression("Age set to 65 years, BMI set to"~40*kg/m^2*", other variables set to defaults"),
  xlab = "Fasting Plasma Glucose (mmol/L)", ylab = "Risk (%)"
)
lines(fpg, risk_m, type = "b", col = "navy", lwd = 1.5)
lines(fpg, risk_f, type = "b", col = "red3", lwd = 1.5)
legend("bottomright", legend = c("Male", "Female"), col = c("navy", "red3"), lty = 1, bty = "n")
par(oldpar)
</code></pre>

<hr>
<h2 id='QDR2018C'>QDiabetes-2018 Risk Calculator (C-Variant)</h2><span id='topic+QDR2018C'></span><span id='topic+QDiabetes-2018C'></span>

<h3>Description</h3>

<p>Calculate the 10-year risk of developing type 2 diabetes, using the C-variant of the QDiabetes-2018 algorithm.
This variant includes all risk predictors present in the A-variant, with the addition of glycated haemoglobin A1c.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>QDR2018C(sex, age, bmi, ht, wt, hba1c, ethn = "WhiteNA", smoke = "Non", tds = 0,
         fhdm = FALSE, htn = FALSE, cvd = FALSE, gdm = FALSE, pcos = FALSE,
         learn = FALSE, psy = FALSE, ster = FALSE, stat = FALSE, apsy = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="QDR2018C_+3A_sex">sex</code></td>
<td>
<p>Gender. Must be <code>"Male"</code> or <code>"Female"</code>.</p>
</td></tr>
<tr><td><code id="QDR2018C_+3A_age">age</code></td>
<td>
<p>Age, in years. Must be <code class="reqn">\ge</code>25 and &lt;85.</p>
</td></tr>
<tr><td><code id="QDR2018C_+3A_bmi">bmi</code></td>
<td>
<p>Body-mass index, in kg/m^2. Must be <code class="reqn">\ge</code>40/2.1^2 and <code class="reqn">\le</code>180/1.4^2. Within this range, values &gt;40 are set to 40, while values &lt;20 are set to 20.</p>
</td></tr>
<tr><td><code id="QDR2018C_+3A_ht">ht</code></td>
<td>
<p>Height, in m. Must be <code class="reqn">\ge</code>1.4 and <code class="reqn">\le</code>2.1.</p>
</td></tr>
<tr><td><code id="QDR2018C_+3A_wt">wt</code></td>
<td>
<p>Weight, in kg. Must be <code class="reqn">\ge</code>40 and <code class="reqn">\le</code>180.</p>
</td></tr>
<tr><td><code id="QDR2018C_+3A_hba1c">hba1c</code></td>
<td>
<p>Glycated haemoglobin A1c level, in mmol/mol. Must be <code class="reqn">\ge</code>15 and &lt;48.</p>
</td></tr>
<tr><td><code id="QDR2018C_+3A_ethn">ethn</code></td>
<td>
<p>Ethnicity. Must be one of:
</p>

<ul>
<li> <p><code>"WhiteNA"</code> (White or not stated)
</p>
</li>
<li> <p><code>"Indian"</code> (Indian)
</p>
</li>
<li> <p><code>"Pakistani"</code> (Pakistani)
</p>
</li>
<li> <p><code>"Bangladeshi"</code> (Bangladeshi)
</p>
</li>
<li> <p><code>"OtherAsian"</code> (Other Asian)
</p>
</li>
<li> <p><code>"BlackCaribbean"</code> (Black Caribbean)
</p>
</li>
<li> <p><code>"BlackAfrican"</code> (Black African)
</p>
</li>
<li> <p><code>"Chinese"</code> (Chinese)
</p>
</li>
<li> <p><code>"Other"</code> (Other ethnic group).
</p>
</li></ul>

</td></tr>
<tr><td><code id="QDR2018C_+3A_smoke">smoke</code></td>
<td>
<p>Smoking status. Must be one of:
</p>

<ul>
<li> <p><code>"Non"</code> (Non-smoker)
</p>
</li>
<li> <p><code>"Ex"</code> (Ex-smoker)
</p>
</li>
<li> <p><code>"Light"</code> (Light smoker - less than 10 cigarettes per day)
</p>
</li>
<li> <p><code>"Moderate"</code> (Moderate smoker - 10 to 19 cigarettes per day)
</p>
</li>
<li> <p><code>"Heavy"</code> (Heavy smoker - 20 or more cigarettes per day).
</p>
</li></ul>

</td></tr>
<tr><td><code id="QDR2018C_+3A_tds">tds</code></td>
<td>
<p>Townsend deprivation score. Must be <code class="reqn">\ge</code>-8 and <code class="reqn">\le</code>14.</p>
</td></tr>
<tr><td><code id="QDR2018C_+3A_fhdm">fhdm</code></td>
<td>
<p>Family history of diabetes in 1st degree relative.</p>
</td></tr>
<tr><td><code id="QDR2018C_+3A_htn">htn</code></td>
<td>
<p>History of hypertension.</p>
</td></tr>
<tr><td><code id="QDR2018C_+3A_cvd">cvd</code></td>
<td>
<p>History of cardiovascular disease.</p>
</td></tr>
<tr><td><code id="QDR2018C_+3A_gdm">gdm</code></td>
<td>
<p>History of gestational diabetes.</p>
</td></tr>
<tr><td><code id="QDR2018C_+3A_pcos">pcos</code></td>
<td>
<p>History of polycystic ovary syndrome.</p>
</td></tr>
<tr><td><code id="QDR2018C_+3A_learn">learn</code></td>
<td>
<p>History of one or more conditions conveying learning difficulties.</p>
</td></tr>
<tr><td><code id="QDR2018C_+3A_psy">psy</code></td>
<td>
<p>History of schizophrenia or bipolar affective disorder.</p>
</td></tr>
<tr><td><code id="QDR2018C_+3A_ster">ster</code></td>
<td>
<p>History of use of corticosteroids.</p>
</td></tr>
<tr><td><code id="QDR2018C_+3A_stat">stat</code></td>
<td>
<p>History of use of statins.</p>
</td></tr>
<tr><td><code id="QDR2018C_+3A_apsy">apsy</code></td>
<td>
<p>History of use of 2nd generation antipsychotics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Risk (%) of type 2 diabetes.</p>


<h3>Note</h3>

<p>The QDiabetes <span class="rlang"><b>R</b></span> package has been created as a research tool for scientific purposes only.
The QDiabetes <span class="rlang"><b>R</b></span> package has not been granted Medicines and Healthcare products Regulatory Agency (MHRA) approval as a medical device, and hence, should not be used as part of any individualised risk assessment.
</p>


<h3>Author(s)</h3>

<p>Benjamin G. Feakins <a href="mailto:benjamin.feakins@ndph.ox.ac.uk">benjamin.feakins@ndph.ox.ac.uk</a></p>


<h3>Source</h3>

<p><a href="https://qdiabetes.org/2018/src.php">https://qdiabetes.org/2018/src.php</a></p>


<h3>References</h3>

<p>Hippisley-Cox, J. and Coupland, C. (2017).
Development and validation of QDiabetes-2018 risk prediction algorithm to estimate future risk of type 2 diabetes: cohort study.
<em>BMJ</em>
<b>359</b>, j5019.
doi: <a href="https://doi.org/10.1136/bmj.j5019">10.1136/bmj.j5019</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+QDR2013">QDR2013</a></code> - For estimating the 1&ndash;10-year risk using QDiabetes-2013.
</p>
<p><code><a href="#topic+QDR2018A">QDR2018A</a></code> - For estimating the 10-year risk using QDiabetes-2018 (Model A).
</p>
<p><code><a href="#topic+QDR2018B">QDR2018B</a></code> - For estimating the 10-year risk using QDiabetes-2018 (Model B).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Simple usage
QDR2018C(sex = "Female", age = 76, ht = 1.65, wt = 70, hba1c = 25)
QDR2018C(sex = "Male", age = 55, bmi = 40, hba1c = seq(15, 40, 5), ethn = "Chinese")
QDR2018C(sex = "Female", age = 65, bmi = 35, hba1c = 30, smoke = "Ex", fhdm = c(FALSE, TRUE))

## Using postcodes to estimate Townsend deprivation scores
QDR2018C(sex = "Male", age = 65, bmi = 40, hba1c = 42, tds = getTDS("OX3 7LF"))
QDR2018C(sex = "Female", age = 60, bmi = 35, hba1c = 42, tds = getTDS(c("OX2 6NW", "OX2 6GG")))

## Data frame usage
data(dat_qdr)
with(dat_qdr, QDR2018C(sex = sex, age = age, bmi = bmi, hba1c = hba1c))

## Plotting outputs
hba1c &lt;- seq(15, 42, length.out = 10)
risk_m &lt;- QDR2018C(sex = "Male", age = 65, bmi = 40, hba1c = hba1c)
risk_f &lt;- QDR2018C(sex = "Female", age = 65, bmi = 40, hba1c = hba1c)

oldpar &lt;- par(no.readonly = TRUE)
par(cex = 0.8, cex.sub = 0.8)
plot.new()
plot.window(xlim = range(hba1c), ylim = range(pretty(c(risk_m, risk_f))))
axis(1, at = hba1c)
axis(2, at = pretty(c(risk_m, risk_f)))
title(
  main = "Diabetes 10-year risk with glycated haemoglobin level:\nQDiabetes-2018 (C-Variant)",
  sub = expression("Age set to 65 years, BMI set to"~40*kg/m^2*", other variables set to defaults"),
  xlab = expression("Haemoglobin"~A[1*c]~"(mmol/mol)"), ylab = "Risk (%)"
)
lines(hba1c, risk_m, type = "b", col = "navy", lwd = 1.5)
lines(hba1c, risk_f, type = "b", col = "red3", lwd = 1.5)
legend("bottomright", legend = c("Male", "Female"), col = c("navy", "red3"), lty = 1, bty = "n")
par(oldpar)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
