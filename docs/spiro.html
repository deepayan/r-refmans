<!DOCTYPE html><html lang="en"><head><title>Help for package spiro</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {spiro}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#spiro-package'><p>spiro: Manage Data from Cardiopulmonary Exercise Testing</p></a></li>
<li><a href='#add_bodymass'><p>Calculate additional variables related to body mass for cardiopulmonary</p>
exercise testing data</a></li>
<li><a href='#add_hr'><p>Import and add heart rate data to cardiopulmonary exercise testing data</p></a></li>
<li><a href='#add_protocol'><p>Add a test protocol to an exercise testing data set</p></a></li>
<li><a href='#bw_filter'><p>Smooth data with a (zero-phase) Butterworth filter</p></a></li>
<li><a href='#get_anonid'><p>Get the anonymization id from personal data</p></a></li>
<li><a href='#get_protocol'><p>Guess a test protocol from a corresponding exercise testing data set</p></a></li>
<li><a href='#knit_print.spiro'><p>Printing spiro data frames in a knitr context</p></a></li>
<li><a href='#print.spiro'><p>Printing spiro data frames</p></a></li>
<li><a href='#set_protocol'><p>Setting an exercise testing profile</p></a></li>
<li><a href='#set_protocol_manual'><p>Manually setting a testing profile</p></a></li>
<li><a href='#spiro'><p>Import and process raw data from metabolic carts/spiroergometric measures</p></a></li>
<li><a href='#spiro_example'><p>Get path to spiro example</p></a></li>
<li><a href='#spiro_import'><p>Import raw data from spiroergometric devices (deprecated)</p></a></li>
<li><a href='#spiro_max'><p>Return maximum values from cardiopulmonary exercise tests</p></a></li>
<li><a href='#spiro_plot'><p>Plot data from cardiopulmonary exercise data files</p></a></li>
<li><a href='#spiro_raw'><p>Get raw data from a metabolic cart file or an imported spiro object</p></a></li>
<li><a href='#spiro_smooth'><p>Apply a smoothing filter to data from cardiopulmonary exercise testing.</p></a></li>
<li><a href='#spiro_summary'><p>Summarize data from cardiopulmonary exercise testing for each load step</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Manage Data from Cardiopulmonary Exercise Testing</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Import, process, summarize and visualize raw data from 
    metabolic carts. See Robergs, Dwyer, and Astorino (2010) &lt;<a href="https://doi.org/10.2165%2F11319670-000000000-00000">doi:10.2165/11319670-000000000-00000</a>&gt; for more details on data processing. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ropensci/spiro">https://github.com/ropensci/spiro</a>,
<a href="https://docs.ropensci.org/spiro/">https://docs.ropensci.org/spiro/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/spiro/issues">https://github.com/ropensci/spiro/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>ggplot2, xml2, readxl, knitr, cowplot, digest, signal</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), vdiffr, rmarkdown, ggborderline</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-18 11:10:16 UTC; Simon</td>
</tr>
<tr>
<td>Author:</td>
<td>Simon Nolte <a href="https://orcid.org/0000-0003-1643-1860"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Manuel Ramon [rev] (reviewed the package (v. 0.0.5) for rOpenSci, see
    &lt;https://github.com/ropensci/software-review/issues/541&gt;),
  James Hunter [rev] (reviewed the package (v. 0.0.5) for rOpenSci, see
    &lt;https://github.com/ropensci/software-review/issues/541&gt;)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Simon Nolte &lt;s.nolte@dshs-koeln.de&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-02-18 11:30:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='spiro-package'>spiro: Manage Data from Cardiopulmonary Exercise Testing</h2><span id='topic+spiro-package'></span>

<h3>Description</h3>

<p>Import, process, summarize and visualize raw data from metabolic carts. See Robergs, Dwyer, and Astorino (2010) <a href="https://doi.org/10.2165/11319670-000000000-00000">doi:10.2165/11319670-000000000-00000</a> for more details on data processing.
</p>


<h3>Main functions</h3>


<ul>
<li><p> Use <code><a href="#topic+spiro">spiro</a></code> for the import and processing of
cardiopulmonary exercise testing data.
</p>
</li>
<li><p> Use <code><a href="#topic+spiro_summary">spiro_summary</a></code> and <code><a href="#topic+spiro_max">spiro_max</a></code> for
a step wise summary or the maximum parameter values of the
imported data.
</p>
</li>
<li><p> Use <code><a href="#topic+spiro_plot">spiro_plot</a></code> to visualize the data.
</p>
</li></ul>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Simon Nolte <a href="mailto:s.nolte@dshs-koeln.de">s.nolte@dshs-koeln.de</a> (<a href="https://orcid.org/0000-0003-1643-1860">ORCID</a>)
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Manuel Ramon (reviewed the package (v. 0.0.5) for rOpenSci, see &lt;https://github.com/ropensci/software-review/issues/541&gt;) [reviewer]
</p>
</li>
<li><p> James Hunter (reviewed the package (v. 0.0.5) for rOpenSci, see &lt;https://github.com/ropensci/software-review/issues/541&gt;) [reviewer]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/ropensci/spiro">https://github.com/ropensci/spiro</a>
</p>
</li>
<li> <p><a href="https://docs.ropensci.org/spiro/">https://docs.ropensci.org/spiro/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ropensci/spiro/issues">https://github.com/ropensci/spiro/issues</a>
</p>
</li></ul>


<hr>
<h2 id='add_bodymass'>Calculate additional variables related to body mass for cardiopulmonary
exercise testing data</h2><span id='topic+add_bodymass'></span>

<h3>Description</h3>

<p><code>add_bodymass()</code> adds body mass-related variables to processed gas
exchange data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_bodymass(data, bodymass = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_bodymass_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> of the class <code>spiro</code> containing the gas
exchange data. Usually the output of a <code><a href="#topic+spiro">spiro</a></code> call.</p>
</td></tr>
<tr><td><code id="add_bodymass_+3A_bodymass">bodymass</code></td>
<td>
<p>A numeric value to manually set the participant's body mass.
Defaults to NULL to use body mass data from the file's meta data. Set to NA
to ignore the meta data without setting a new body mass.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Based on an individual's body mass, relative oxygen uptake (VO2_rel) and
carbon dioxide output (VCO2_rel) are calculated. For running protocols,
running economy (RE) is calculated.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> of the class <code>spiro</code> containing the
cardiopulmonary exercise testing data including variables related to body
mass.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># get example file
file &lt;- spiro_example("zan_gxt")

s &lt;- spiro(file)
out &lt;- add_bodymass(s, bodymass = 65.3)
head(out)
</code></pre>

<hr>
<h2 id='add_hr'>Import and add heart rate data to cardiopulmonary exercise testing data</h2><span id='topic+add_hr'></span>

<h3>Description</h3>

<p><code>add_hr()</code> imports an external file containing heart rate data and adds
it to an existing gas exchange data file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_hr(data, hr_file, hr_offset = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_hr_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> of the class <code>spiro</code> containing the gas
exchange data. Usually the output of a <code><a href="#topic+spiro">spiro</a></code> call.</p>
</td></tr>
<tr><td><code id="add_hr_+3A_hr_file">hr_file</code></td>
<td>
<p>The absolute or relative path of a <code>*tcx</code> file that
contains additional heart rate data.</p>
</td></tr>
<tr><td><code id="add_hr_+3A_hr_offset">hr_offset</code></td>
<td>
<p>An integer, corresponding to the temporal offset of the
heart-rate file. By default the start of the heart rate measurement is
linked to the start of the gas exchange measurement. A positive value
means, that the heart rate measurement started after the begin of the gas
exchange measurements; a negative value means it started before.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Heart rate data will be imported from a <code>.tcx</code> file. After interpolating
the data to full seconds, it is then matched to the imported gas exchange
data.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> of the class <code>spiro</code> containing the
cardiopulmonary exercise testing data including heart rate data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get example data
oxy_file &lt;- spiro_example("zan_ramp")
hr_file &lt;- spiro_example("hr_ramp.tcx")

# Import and process spiro data
oxy_data &lt;- spiro(oxy_file)

# Add heart rate data
out &lt;- add_hr(oxy_data, hr_file)
head(out)
</code></pre>

<hr>
<h2 id='add_protocol'>Add a test protocol to an exercise testing data set</h2><span id='topic+add_protocol'></span>

<h3>Description</h3>

<p><code>add_protocol()</code> adds a predefined test protocol to an existing set of
data from an exercise test.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_protocol(data, protocol)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_protocol_+3A_data">data</code></td>
<td>
<p>A spiro <code>data.frame</code> containing the exercise testing data.</p>
</td></tr>
<tr><td><code id="add_protocol_+3A_protocol">protocol</code></td>
<td>
<p>A <code>data.frame</code> containing the test protocol, as created
by <code><a href="#topic+set_protocol">set_protocol</a></code>, <code><a href="#topic+set_protocol_manual">set_protocol_manual</a></code> or
<code><a href="#topic+get_protocol">get_protocol</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> of the class <code>spiro</code> with cardiopulmonary
parameters and the corresponding load data.
</p>


<h3>See Also</h3>

<p><a href="#topic+set_protocol">set_protocol</a> for protocol setting with helper functions.
</p>
<p><a href="#topic+set_protocol_manual">set_protocol_manual</a> for manual protocol design.
</p>
<p><a href="#topic+get_protocol">get_protocol</a> For automated extraction of protocols from raw data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get example data
file &lt;- spiro_example("zan_gxt")

s &lt;- spiro(file)
out &lt;- add_protocol(
  s,
  set_protocol(pt_pre(60), pt_steps(300, 50, 50, 7, 30))
)
head(out)
</code></pre>

<hr>
<h2 id='bw_filter'>Smooth data with a (zero-phase) Butterworth filter</h2><span id='topic+bw_filter'></span>

<h3>Description</h3>

<p>Internal function for <code><a href="#topic+spiro_smooth">spiro_smooth</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bw_filter(x, n = 3, W = 0.04, zero_lag = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bw_filter_+3A_x">x</code></td>
<td>
<p>A numeric vector on which the digital filter should be applied</p>
</td></tr>
<tr><td><code id="bw_filter_+3A_n">n</code></td>
<td>
<p>Order of the Butterworth filter, defaults to 3</p>
</td></tr>
<tr><td><code id="bw_filter_+3A_w">W</code></td>
<td>
<p>Low-pass cut-off frequency of the filter, defaults to 0.04</p>
</td></tr>
<tr><td><code id="bw_filter_+3A_zero_lag">zero_lag</code></td>
<td>
<p>Whether a zero phase (forwards-backwards) filter should be
applied.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Digital filtering might be a preferable processing strategy for smoothing
data from gas exchange measures when compared to moving averages. Robergs et
al. (2010) proposes a third order Butterworth filter with a low-pass cut-off
frequency of 0.04 for filtering VO2 data.
</p>
<p>It should be noted that Butterworth filter comprise a time lag. A method to
create a time series with zero lag is to subsequently apply two Butterworth
filters in forward and reverse direction (forwards-backwards filtering).
While this procedure removes any time lag it changes the magnitude of the
filtering response, i.e. the resulting filter has not the same properties
(order and cut-off frequency) as a single filter.
</p>


<h3>Value</h3>

<p>A numeric vector of the same length as x.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get VO2 data from example file
vo2_vector &lt;- spiro(spiro_example("zan_gxt"))$VO2

out &lt;- bw_filter(vo2_vector)
head(out, n = 20)
</code></pre>

<hr>
<h2 id='get_anonid'>Get the anonymization id from personal data</h2><span id='topic+get_anonid'></span>

<h3>Description</h3>

<p><code>get_anonid()</code> returns the anonymization id corresponding to given
personal data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_anonid(name, surname, birthday = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_anonid_+3A_name">name</code></td>
<td>
<p>A character string, containing the participant's name as present
in the raw data file.</p>
</td></tr>
<tr><td><code id="get_anonid_+3A_surname">surname</code></td>
<td>
<p>A character string, containing the participant's surname as
present in the raw data file.</p>
</td></tr>
<tr><td><code id="get_anonid_+3A_birthday">birthday</code></td>
<td>
<p>A character string, containing the participant's birthday as
present in the raw data file. If no birthday data is available in the raw
data, this is ignored.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default, the spiro package anonymizes personal information obtained from
file meta data. The data are saved to the &quot;info&quot; attribute of a spiro() call.
The default anonymization ensures that no personal information is
accidentally revealed, e.g. by sharing spiro outputs as .Rda files.
</p>
<p>While there is no way to directly deanonymize the data, get_anonid() allows
you to recreate the ids, when meta data (name, surname and birthday) are
known. Birthday is only used within the id generation if available in the
original raw data.
</p>
<p>To disable the anonymization process during import use
<code>spiro(anonymize = FALSE)</code>
</p>


<h3>Value</h3>

<p>A character string, containing the anonymized id.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_anonid("Jesse", "Owens", "12.09.1913")
</code></pre>

<hr>
<h2 id='get_protocol'>Guess a test protocol from a corresponding exercise testing data set</h2><span id='topic+get_protocol'></span>

<h3>Description</h3>

<p><code>get_protocol()</code> gets the underlying test protocol based on given load
data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_protocol(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_protocol_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> containing the exercise testing data. It is
highly recommend to parse non-interpolated breath-by-breath data or
processed data with a very short interpolating/averaging interval.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> with the duration and load of each protocol step.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Import example data
raw_data &lt;- spiro_raw(data = spiro_example("zan_gxt"))

get_protocol(raw_data)
</code></pre>

<hr>
<h2 id='knit_print.spiro'>Printing spiro data frames in a knitr context</h2><span id='topic+knit_print.spiro'></span>

<h3>Description</h3>

<p><code>knit_print.spiro()</code> provides a method for printing <code>data.frames</code>
from <code><a href="#topic+spiro">spiro</a></code> within <code>knitr</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'spiro'
knit_print(x, min = 10, max = 20, digits = 2, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="knit_print.spiro_+3A_x">x</code></td>
<td>
<p>A <code>data.frame</code> of the class <code>spiro</code> to be printed.</p>
</td></tr>
<tr><td><code id="knit_print.spiro_+3A_min">min</code></td>
<td>
<p>An integer, which sets the number of rows to which <code>x</code> will
be limited in printing if row number exceed <code>max</code>.</p>
</td></tr>
<tr><td><code id="knit_print.spiro_+3A_max">max</code></td>
<td>
<p>An integer, setting the maximal number of rows to be not cut to
<code>min</code> in printing.</p>
</td></tr>
<tr><td><code id="knit_print.spiro_+3A_digits">digits</code></td>
<td>
<p>An integer giving the number of decimals to be rounded to.</p>
</td></tr>
<tr><td><code id="knit_print.spiro_+3A_...">...</code></td>
<td>
<p>Passing of additional arguments to <code>knit_print.default()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Cardiopulmonary exercise testing data imported by <code><a href="#topic+spiro">spiro</a></code> will
often come in large <code>data.frame</code>s. When knitting R Markdown documents
these will normally be printed in full size.
</p>
<p>This function provides a method for <code>data.frame</code>s of the class
<code>spiro</code> to limit the number of rows displayed to <code>min</code> if it
exceeds <code>max</code>. The number of hidden data rows will be printed below the
<code>data.frame</code>.
</p>


<h3>Value</h3>

<p>The function prints its argument and returns it invisibly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get example data
s &lt;- spiro(spiro_example("zan_gxt"))

knitr::knit_print(s)
</code></pre>

<hr>
<h2 id='print.spiro'>Printing spiro data frames</h2><span id='topic+print.spiro'></span>

<h3>Description</h3>

<p>Printing method for spiro objects that rounds output to two decimals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'spiro'
print(x, round = 2, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.spiro_+3A_x">x</code></td>
<td>
<p>A <code>data.frame</code> of the class <code>spiro</code> to be printed.</p>
</td></tr>
<tr><td><code id="print.spiro_+3A_round">round</code></td>
<td>
<p>An integer giving the number of decimals to be rounded to.</p>
</td></tr>
<tr><td><code id="print.spiro_+3A_...">...</code></td>
<td>
<p>Passing of additional arguments to <code>print.data.frame()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function prints its argument and returns it invisibly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get example data
s &lt;- spiro(spiro_example("zan_gxt"))

out &lt;- print(s)
head(out)
</code></pre>

<hr>
<h2 id='set_protocol'>Setting an exercise testing profile</h2><span id='topic+set_protocol'></span><span id='topic+pt_pre'></span><span id='topic+pt_wu'></span><span id='topic+pt_steps'></span><span id='topic+pt_const'></span>

<h3>Description</h3>

<p><code>set_protocol()</code> allows to set a load profile for an exercise test
based on profile sections.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_protocol(...)

pt_pre(duration)

pt_wu(duration, load, rest.duration = 0)

pt_steps(
  duration,
  load,
  increment,
  count,
  rest.duration = 0,
  last.duration = NULL
)

pt_const(duration, load, count, rest.duration = 0, last.duration = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_protocol_+3A_...">...</code></td>
<td>
<p>Functions related to sections of the load profile, such as
<code>pt_pre</code>, <code>pt_wu</code>, <code>pt_const</code> or <code>pt_step</code>. Sections
will be evaluated in the order they are entered.</p>
</td></tr>
<tr><td><code id="set_protocol_+3A_duration">duration</code></td>
<td>
<p>A number, giving the duration of the test section or
a single load within the test section (in seconds).</p>
</td></tr>
<tr><td><code id="set_protocol_+3A_load">load</code></td>
<td>
<p>A number, giving the (initial) load of a section.</p>
</td></tr>
<tr><td><code id="set_protocol_+3A_rest.duration">rest.duration</code></td>
<td>
<p>A number, specifying the duration of (each) rest (in
seconds).</p>
</td></tr>
<tr><td><code id="set_protocol_+3A_increment">increment</code></td>
<td>
<p>A number, giving the difference in load between the current
and the following load step.</p>
</td></tr>
<tr><td><code id="set_protocol_+3A_count">count</code></td>
<td>
<p>An integer for the number of load sections.</p>
</td></tr>
<tr><td><code id="set_protocol_+3A_last.duration">last.duration</code></td>
<td>
<p>A number, giving the duration of the last load step (in
seconds).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> with the duration and load of each protocol step.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>pt_pre()</code>: Add pre-measures to a load protocol
</p>
</li>
<li> <p><code>pt_wu()</code>: Add a warm up to a load protocol
</p>
</li>
<li> <p><code>pt_steps()</code>: Add a stepwise load protocol
</p>
</li>
<li> <p><code>pt_const()</code>: Add a constant load protocol
</p>
</li></ul>


<h3>See Also</h3>

<p><a href="#topic+set_protocol_manual">set_protocol_manual</a> for manual protocol design.
</p>
<p><a href="#topic+get_protocol">get_protocol</a> for automated extracting of protocols from raw data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_protocol(pt_pre(60), pt_wu(300, 100), pt_steps(180, 150, 25, 8, 30))
</code></pre>

<hr>
<h2 id='set_protocol_manual'>Manually setting a testing profile</h2><span id='topic+set_protocol_manual'></span><span id='topic+set_protocol_manual.default'></span><span id='topic+set_protocol_manual.data.frame'></span>

<h3>Description</h3>

<p><code>set_protocol_manual()</code> allows to set any user-defined load profile
for an exercise test.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_protocol_manual(duration, load = NULL)

## Default S3 method:
set_protocol_manual(duration, load)

## S3 method for class 'data.frame'
set_protocol_manual(duration, load = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_protocol_manual_+3A_duration">duration</code></td>
<td>
<p>Either a numeric vector containing the duration (in seconds)
of each load step, or a <code>data.frame</code> containing columns for duration
and load.</p>
</td></tr>
<tr><td><code id="set_protocol_manual_+3A_load">load</code></td>
<td>
<p>A numeric vector of the same length as <code>duration</code> containing
the corresponding load of each step. Not needed, if load and duration are
both given in a <code>data.frame</code> as the first argument of the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> with the duration and load of each protocol step.
</p>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>set_protocol_manual(default)</code>: Default method when duration and load are
given separately
</p>
</li>
<li> <p><code>set_protocol_manual(data.frame)</code>: Method for data frames with a duration and a
load column
</p>
</li></ul>


<h3>See Also</h3>

<p><a href="#topic+set_protocol">set_protocol</a> for protocol setting with helper functions.
</p>
<p><a href="#topic+get_protocol">get_protocol</a> For automated extracting of protocols from raw data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_protocol_manual(
  duration = c(300, 120, 300, 60, 300),
  load = c(3, 5, 3, 6, 3)
)

# using a data.frame as input
pt_data &lt;- data.frame(
  duration = c(180, 150, 120, 90, 60, 30),
  load = c(200, 250, 300, 350, 400, 450)
)
set_protocol_manual(pt_data)
</code></pre>

<hr>
<h2 id='spiro'>Import and process raw data from metabolic carts/spiroergometric measures</h2><span id='topic+spiro'></span>

<h3>Description</h3>

<p><code>spiro()</code> wraps multiple functions to import and process raw data from
metabolic carts into a <code>data.frame</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spiro(
  file,
  device = NULL,
  bodymass = NULL,
  hr_file = NULL,
  hr_offset = 0,
  protocol = NULL,
  anonymize = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="spiro_+3A_file">file</code></td>
<td>
<p>The absolute or relative path of the file that contains the gas
exchange data.</p>
</td></tr>
<tr><td><code id="spiro_+3A_device">device</code></td>
<td>
<p>A character string, specifying the device for measurement. By
default the device type is guessed by the characteristics of the
<code>file</code>. This can be overridden by setting the argument to
<code>"cortex"</code>, <code>"cosmed"</code>, <code>"vyntus"</code> or <code>"zan"</code>.</p>
</td></tr>
<tr><td><code id="spiro_+3A_bodymass">bodymass</code></td>
<td>
<p>Numeric value for the individual's body mass, if the default
value saved in the <code>file</code> should be overridden.</p>
</td></tr>
<tr><td><code id="spiro_+3A_hr_file">hr_file</code></td>
<td>
<p>The absolute or relative path of a <code>*tcx</code> file that
contains additional heart rate data.</p>
</td></tr>
<tr><td><code id="spiro_+3A_hr_offset">hr_offset</code></td>
<td>
<p>An integer, corresponding to the temporal offset of the
heart-rate file. By default the start of the heart rate measurement is
linked to the start of the gas exchange measurement. A positive value
means, that the heart rate measurement started after the begin of the gas
exchange measurements; a negative value means it started before.</p>
</td></tr>
<tr><td><code id="spiro_+3A_protocol">protocol</code></td>
<td>
<p>A <code>data.frame</code> by <code><a href="#topic+set_protocol">set_protocol</a></code> or
<code><a href="#topic+set_protocol_manual">set_protocol_manual</a></code> containing the test protocol. This is
automatically guessed by default. Set to NA to skip protocol guessing.</p>
</td></tr>
<tr><td><code id="spiro_+3A_anonymize">anonymize</code></td>
<td>
<p>Whether meta data should be anonymized during import.
Defaults to TRUE. See <code><a href="#topic+get_anonid">get_anonid</a></code> for more information.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function performs multiple operations on raw data from metabolic carts.
It imports the raw data from a file, which might be complemented by an
additional <code>.tcx</code> file with heart rate data.
</p>
<p>After using this function, you may summarize the resulting data frame with
<code><a href="#topic+spiro_summary">spiro_summary</a></code> and <code><a href="#topic+spiro_max">spiro_max</a></code>, or plot it with
<code><a href="#topic+spiro_plot">spiro_plot</a></code>.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> of the class <code>spiro</code> with cardiopulmonary
parameters interpolated to seconds and the corresponding load data.
</p>
<p>The attribute <code>"protocol"</code> provides additional information on the
underlying testing protocol. The attribute <code>"info"</code> contains
additional meta data from the original raw data file. The attribute
<code>"raw"</code> gives the imported raw data (without interpolation, similar to
calling <code><a href="#topic+spiro_raw">spiro_raw</a></code>).
</p>


<h3>Import</h3>

<p>Different metabolic carts yield different output formats for their data. By
default, this function will guess the used device based on the
characteristics of the given file. This behavior can be overridden by
explicitly stating the <code>device</code> argument.
</p>
<p>The currently supported metabolic carts are:
</p>

<ul>
<li> <p><strong>CORTEX</strong> (<code>.xlsx</code>, <code>.xls</code> or files <code>.xml</code> in
English or German language)
</p>
</li>
<li> <p><strong>COSMED</strong> (<code>.xlsx</code> or <code>.xls</code> files, in English or
German language)
</p>
</li>
<li> <p><strong>Vyntus</strong> (<code>.txt</code> files in English, French, German or
Norwegian language)
</p>
</li>
<li> <p><strong>ZAN</strong> (<code>.dat</code> files in German language, usually with
names in the form of <code>"EXEDxxx"</code>)
</p>
</li></ul>

<p>The spiro function can import personal meta data (name, sex, birthday, ...).
By default this data is anonymized with <code>anonymize = TRUE</code>, see
<code><a href="#topic+get_anonid">get_anonid</a></code> for more information.
</p>


<h3>Processing</h3>

<p>Breath-by-breath data is linearly interpolated to get data points for every
full second. Based on the given load data, the underlying exercise protocol
is guessed and applied to the data. If no load data is available or the
protocol guess turns wrong, you can manually specify the exercise
<code>protocol</code> by using <code><a href="#topic+set_protocol">set_protocol</a></code> or
<code><a href="#topic+set_protocol_manual">set_protocol_manual</a></code>. If you want to skip the automated protocol
guessing without providing an alternative, set <code>protocol = NA</code>. Note
that in this case, some functions relying on load data (such as
<code><a href="#topic+spiro_summary">spiro_summary</a></code>) will not work.
</p>
<p>Additional variables of gas exchange are calculated for further analysis. Per
default the body mass saved in the file's metadata is used for calculating
relative measures. It is possible to specify <code>bodymass</code> manually to the
function, overriding that value.
</p>
<p>Protocols, heart rate data and body mass information can also be given in a
piping coding style using the functions <code><a href="#topic+add_protocol">add_protocol</a></code>,
<code><a href="#topic+add_hr">add_hr</a></code> and <code><a href="#topic+add_bodymass">add_bodymass</a></code> (see examples).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># get example file
file &lt;- spiro_example("zan_gxt")

out &lt;- spiro(file)
head(out)

# import with user-defined test profile
p &lt;- set_protocol(pt_pre(60), pt_steps(300, 2, 0.4, 9, 30))
out2 &lt;- spiro(file, protocol = p)
head(out2)

# import with additional heart rate data
oxy_file &lt;- spiro_example("zan_ramp")
hr_file &lt;- spiro_example("hr_ramp.tcx")

out3 &lt;- spiro(oxy_file, hr_file = hr_file)
head(out3)

# use the add_* functions in a pipe
# Note: base R pipe requires R version 4.1 or greater)
## Not run: 
spiro(file) |&gt;
  add_hr(hr_file = hr_file, hr_offset = 0) |&gt;
  add_bodymass(68.2)

## End(Not run)
</code></pre>

<hr>
<h2 id='spiro_example'>Get path to spiro example</h2><span id='topic+spiro_example'></span>

<h3>Description</h3>

<p><code>spiro_example</code> returns the file path for example data files within the
<code>spiro</code> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spiro_example(file = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="spiro_example_+3A_file">file</code></td>
<td>
<p>Name of the file, either &quot;zan_gxt&quot;, &quot;zan_ramp&quot; or &quot;hr_ramp.tcx&quot;.
Leave the argument empty to get a vector with the paths of all three
example files.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with the absolute file path of the example
file(s).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># get path of a specific example data file
spiro_example("zan_gxt")

# get all paths of example data files
spiro_example()
</code></pre>

<hr>
<h2 id='spiro_import'>Import raw data from spiroergometric devices (deprecated)</h2><span id='topic+spiro_import'></span>

<h3>Description</h3>

<p>This function has been deprecated as of package version <code>0.2.0</code>. It will
be removed in the next version release. Please use <code><a href="#topic+spiro">spiro</a></code> for
automated import and processing or <code><a href="#topic+spiro_raw">spiro_raw</a></code> to import only raw
data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spiro_import(file, device = NULL, anonymize = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="spiro_import_+3A_file">file</code></td>
<td>
<p>The absolute or relative path of the file that contains the gas
exchange data.</p>
</td></tr>
<tr><td><code id="spiro_import_+3A_device">device</code></td>
<td>
<p>A character string, specifying the device for measurement. By
default the device type is guessed by the characteristics of the
<code>file</code>. This can be overridden by setting the argument to
<code>"cortex"</code>, <code>"cosmed"</code>, <code>"vyntus"</code> or <code>"zan"</code>.</p>
</td></tr>
<tr><td><code id="spiro_import_+3A_anonymize">anonymize</code></td>
<td>
<p>Whether meta data should be anonymized during import.
Defaults to TRUE. See <code><a href="#topic+get_anonid">get_anonid</a></code> for more information.</p>
</td></tr>
</table>

<hr>
<h2 id='spiro_max'>Return maximum values from cardiopulmonary exercise tests</h2><span id='topic+spiro_max'></span>

<h3>Description</h3>

<p><code>spiro_max()</code> returns a <code>data.frame</code> with the maximum gas exchange
parameters of an exercise test.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spiro_max(data, smooth = 30, hr_smooth = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="spiro_max_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> of the class <code>spiro</code> containing the gas
exchange data. Usually the output of a <code><a href="#topic+spiro">spiro</a></code> call.</p>
</td></tr>
<tr><td><code id="spiro_max_+3A_smooth">smooth</code></td>
<td>
<p>Parameter giving the filter methods for smoothing the data.
Default is <code>30</code> for a 30-second moving average. <code>"20b"</code> will
apply a 20-breath averaging for example. See <code><a href="#topic+spiro_smooth">spiro_smooth</a></code> for
further details and filter methods (e.g. Butterworth filters).</p>
</td></tr>
<tr><td><code id="spiro_max_+3A_hr_smooth">hr_smooth</code></td>
<td>
<p>A logical, whether smoothing should also apply to heart rate
data. Default is <code>FALSE</code>, which means that the absolute maximum heart rate
value is taken without smoothing.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Before calculating the maximum values, the raw data is smoothed. Default
smoothing method is a 30-second rolling average. See the <code>smooth</code>
argument in <code><a href="#topic+spiro_smooth">spiro_smooth</a></code> for more options, such as breath-based
averages or digital filtering.
</p>
<p>Parameters calculated are the maxima of oxygen uptake (absolute and
relative), carbon dioxide output, minute ventilation, respiratory exchange
ratio (RER), and heart rate. The maximum values are defined as the highest
single data values after the smoothing.
</p>
<p>For the maximum RER a different algorithm is used, as the RER during and
after rest may exceed the peak value during exercise. Therefore only values
during the last ten percent of the exercise time are considered for the
RERmax determination. The RERmax calculation works best for data from tests
without rest intervals (e.g., ramp tests) and with attached load protocol
data.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> with the maximum parameter values of the data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Import and process example data sets
gxt_data &lt;- spiro(file = spiro_example("zan_gxt"))

spiro_max(gxt_data)

# Use an averaging over a time interval of 15 seconds
spiro_max(gxt_data, smooth = 15)

# Use an averaging over an interval of 15 breaths
spiro_max(gxt_data, smooth = "15b")
</code></pre>

<hr>
<h2 id='spiro_plot'>Plot data from cardiopulmonary exercise data files</h2><span id='topic+spiro_plot'></span>

<h3>Description</h3>

<p><code>spiro_plot()</code> returns a <code>ggplot2</code> graph visualizing data from
cardiopulmonary exercise testing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spiro_plot(
  data,
  which = 1:9,
  smooth = "fz",
  base_size = 13,
  style_args = list(),
  grid_args = list(),
  vert_lines = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="spiro_plot_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> of the class <code>spiro</code> containing the gas
exchange data. Usually the output of a <code><a href="#topic+spiro">spiro</a></code> call.</p>
</td></tr>
<tr><td><code id="spiro_plot_+3A_which">which</code></td>
<td>
<p>A numeric integer setting the plot panels to be displayed. The
panels are numbered in the order of the traditional Wasserman 9-Panel
Plot:
</p>

<ul>
<li><p> 1: VE over time
</p>
</li>
<li><p> 2: HR and oxygen pulse over time
</p>
</li>
<li><p> 3: VO2, VCO2 and load over time
</p>
</li>
<li><p> 4: VE over VCO2
</p>
</li>
<li><p> 5: V-Slope: HR and VCO2 over VO2
</p>
</li>
<li><p> 6: EQVO2 and EQVCO2 over time
</p>
</li>
<li><p> 7: VT over VE
</p>
</li>
<li><p> 8: RER over time
</p>
</li>
<li><p> 9: PetO2 and PetCO2 over time
</p>
</li></ul>
</td></tr>
<tr><td><code id="spiro_plot_+3A_smooth">smooth</code></td>
<td>
<p>Parameter giving the filter methods for smoothing the data.
Default is <code>fz</code> for a zero phase Butterworth filter. See
<code><a href="#topic+spiro_smooth">spiro_smooth</a></code> for more details and other filter methods (e.g.
time based averages)</p>
</td></tr>
<tr><td><code id="spiro_plot_+3A_base_size">base_size</code></td>
<td>
<p>An integer controlling the base size of the plots (in pts).</p>
</td></tr>
<tr><td><code id="spiro_plot_+3A_style_args">style_args</code></td>
<td>
<p>A list of arguments controlling the color and size of lines
and points. See the section <strong>'Customization'</strong> for possible
arguments. Additional arguments are passed to ggplot2::theme() to modify
the appearance of the plots.</p>
</td></tr>
<tr><td><code id="spiro_plot_+3A_grid_args">grid_args</code></td>
<td>
<p>A list of arguments passed to <code>cowplot::plot_grid()</code> to
modify the arrangement of the plots.</p>
</td></tr>
<tr><td><code id="spiro_plot_+3A_vert_lines">vert_lines</code></td>
<td>
<p>Whether vertical lines should be displayed at the
time points of the first warm-up load, first load, and last load.
Defaults to FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function provides a shortcut for visualizing data from metabolic carts
processed by the <code><a href="#topic+spiro">spiro</a></code> function.
</p>


<h4>Customization</h4>

<p>There are three ways to customize the appearance of plots in
<code>spiro_plot</code>. First, you can control the color and size of points and
lines with the <code>style_args</code> argument. For a list of available arguments
that should be passed in form of a list, see below. Second, you can change
the appearance of axis and plot elements (e.g, axis titles, panel lines) by
passing arguments over to <code>ggplot2::theme()</code> via the <code>style_args</code>
argument. Third, you can modify the arrangement of plots by the <code>which</code>
argument and customize the arrangement by passing arguments to
<code>cowplot::plot_grid()</code> via the <code>grid_args</code> argument.
</p>


<h5>Style arguments</h5>


<dl>
<dt><code>size = 2</code></dt><dd><p>Defines the size of all points</p>
</dd>
<dt><code>linewidth = 1</code></dt><dd><p>Defines the width of all lines</p>
</dd>
<dt><code>color_VO2 = "#c00000"</code>, <code>color_VCO2 = "#0053a4"</code>,
<code>color_VE = "#003300"</code>, <code>color_VT = "grey30"</code>,
<code>color_RER = "#003300"</code>, <code>color_HR = "red"</code>,
<code>color_pulse = "pink"</code>
</dt><dd><p>Define the color of lines and points in the following plot panels: VO2
(panel 3,6,9), VCO2 (3,4,5,6,9), VE (1), VT (7), RER (8), HR (2,5),
pulse (2)</p>
</dd>
<dt>Additional arguments</dt><dd><p>Are passed to <code>ggplot2::theme()</code></p>
</dd>
</dl>





<h3>Value</h3>

<p>A ggplot object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Import and process example data
ramp_data &lt;- spiro(
  file = spiro_example("zan_ramp"),
  hr_file = spiro_example("hr_ramp.tcx")
)

# Display the traditional Wasserman 9-Panel Plot
spiro_plot(ramp_data)

# Display selected panels, here V-Slope
spiro_plot(ramp_data, which = 5)

# Modify the arrangement of plots by passing arguments to
# cowplot::plot_grid() via the grid_args argument
spiro_plot(ramp_data, which = c(4, 5, 6, 8), grid_args = list(nrow = 1))

# Modify the appearance of plots using the style_args argument
spiro_plot(ramp_data, style_args = list(size = 0.3, color_VCO2 = "black"))

# Modify the appearance of plots by passing arguments to ggplot2::theme() via
# the style_args argument
spiro_plot(ramp_data,
  style_args = list(axis.title.x = ggplot2::element_text(colour = "green"))
)

</code></pre>

<hr>
<h2 id='spiro_raw'>Get raw data from a metabolic cart file or an imported spiro object</h2><span id='topic+spiro_raw'></span><span id='topic+spiro_raw.default'></span><span id='topic+spiro_raw.spiro'></span>

<h3>Description</h3>

<p><code>spiro_raw()</code> retrieves cardiopulmonary raw data from various types of
metabolic cart files, or from objects previously imported and processed with
<code><a href="#topic+spiro">spiro</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spiro_raw(data, device = NULL, anonymize = TRUE)

## Default S3 method:
spiro_raw(data, device = NULL, anonymize = TRUE)

## S3 method for class 'spiro'
spiro_raw(data, device = NULL, anonymize = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="spiro_raw_+3A_data">data</code></td>
<td>
<p>Either the absolute or relative path of the file that contains
the gas exchange data, or a data frame of the class <code>spiro</code>, usually
the output of the <code><a href="#topic+spiro">spiro</a></code> function.</p>
</td></tr>
<tr><td><code id="spiro_raw_+3A_device">device</code></td>
<td>
<p>A character string, specifying the device for measurement. By
default the device type is guessed by the characteristics of the
<code>file</code>. This can be overridden by setting the argument to
<code>"cortex"</code>, <code>"cosmed"</code>, <code>"vyntus"</code> or <code>"zan"</code>.</p>
</td></tr>
<tr><td><code id="spiro_raw_+3A_anonymize">anonymize</code></td>
<td>
<p>Whether meta data should be anonymized during import.
Defaults to TRUE. See <code><a href="#topic+get_anonid">get_anonid</a></code> for more information.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The default way of importing data into the spiro package is using the
<code><a href="#topic+spiro">spiro</a></code> function. Besides importing this will perform further
processing steps such as the interpolation of data or the calculation of
additional variables. But in some cases the original raw data may be
preferable compared to the processed raw data. <code>spiro_raw</code> can either
retrieve the raw data from an already imported data set or from a new raw
data file.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> with data. The attribute <code>info</code> contains
addition meta-data retrieved from the original file.
</p>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>spiro_raw(default)</code>: Method for direct import from metabolic cart raw data
file
</p>
</li>
<li> <p><code>spiro_raw(spiro)</code>: Method for objects of class <code>spiro</code>, usually files
previously imported and processed with <code><a href="#topic+spiro">spiro</a></code>
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'># Get example data
file &lt;- spiro_example("zan_gxt")

# direct import of raw data
out &lt;- spiro_raw(file)
head(out)

# retrieval of raw data from previously processed object
s &lt;- spiro(file)
out2 &lt;- spiro_raw(s)
head(out2)
</code></pre>

<hr>
<h2 id='spiro_smooth'>Apply a smoothing filter to data from cardiopulmonary exercise testing.</h2><span id='topic+spiro_smooth'></span>

<h3>Description</h3>

<p>Filter vectors and data frames with moving averages and digital filters.
Provides the data filtering for <code><a href="#topic+spiro_max">spiro_max</a></code> and
<code><a href="#topic+spiro_plot">spiro_plot</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spiro_smooth(data, smooth = 30, columns = NULL, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="spiro_smooth_+3A_data">data</code></td>
<td>
<p>A data frame of the class <code>spiro</code>. Usually the output of
the <code><a href="#topic+spiro">spiro</a> function</code>.</p>
</td></tr>
<tr><td><code id="spiro_smooth_+3A_smooth">smooth</code></td>
<td>
<p>An integer or character string specifying the smoothing
strategy and parameters. Default is <code>30</code>, which means the applied
filter is a 30-second moving average. See the section
<strong>'Filtering Methods'</strong> for more details.</p>
</td></tr>
<tr><td><code id="spiro_smooth_+3A_columns">columns</code></td>
<td>
<p>A character vector of the data columns that should be
filtered. By default the filtering applies to all data column of
<code>data</code> (besides load, time and step).</p>
</td></tr>
<tr><td><code id="spiro_smooth_+3A_quiet">quiet</code></td>
<td>
<p>Whether warning message should be suppressed. Default is FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Raw data from cardiopulmonary is usually noisy due to measurement error and
biological breath-to-breath variability. When processing or visualizing the
gas exchange data, it is often helpful to filter the raw data. This function
provides different filtering methods (time average, breath average, digital
filters).
</p>
<p>Breath-based and digital filters will be applied on the raw breath-by-breath
data. Time-based averages will be used on the interpolated data.
</p>


<h3>Value</h3>

<p>A data frame
</p>


<h3>Filtering Methods</h3>


<dl>
<dt>Time-Based Average (e.g. <code>smooth = 30</code>)</dt><dd><p>A (centered) moving
average over a defined time span. The number can be given as an integer
or as a character (e.g. <code>smooth = "30"</code>) and defines the length of
the calculation interval in seconds.</p>
</dd>
<dt>Breath-Based Average (e.g. <code>smooth = "15b"</code>)</dt><dd><p>A (centered)
moving average over a defined number of breaths. The integer before the
letter 'b' defines the number of breaths for the calculation interval.</p>
</dd>
<dt>Butterworth filter (e.g. <code>smooth = "0.04f3"</code>)</dt><dd><p>A digital
Butterworth filter (with lag). The number before the letter 'f' defines
the low-pass cut-off frequency, the number after the letter 'f' gives the
order of the filter. See <code><a href="#topic+bw_filter">bw_filter</a></code> for more details.</p>
</dd>
<dt>Zero-lag Butterworth filter (e.g. <code>smooth = "0.04fz3"</code>)</dt><dd><p>A
digital forwards-backwards Butterworth filter (without lag). The number
before the letter 'f' defines the low-pass cut-off frequency, the number
after gives the order of the filter. See <code><a href="#topic+bw_filter">bw_filter</a></code> for more
details.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'># Get example data
file &lt;- spiro_example("zan_gxt")
d &lt;- spiro(file)

out &lt;- spiro_smooth(d, 30)
head(out)

# filter only the VO2 column with a zero-phase Butterworth filter
out2 &lt;- spiro_smooth(d, "0.04fz3", columns = "VO2")
head(out2)
</code></pre>

<hr>
<h2 id='spiro_summary'>Summarize data from cardiopulmonary exercise testing for each load step</h2><span id='topic+spiro_summary'></span>

<h3>Description</h3>

<p><code>spiro_summary()</code> returns a <code>data.frame</code> summarizing the main
parameters for each step of a cardiopulmonary exercise test.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spiro_summary(data, interval = 120, quiet = FALSE, exclude = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="spiro_summary_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> of the class <code>spiro</code>, as it is generated
by <code><a href="#topic+spiro">spiro</a></code>.</p>
</td></tr>
<tr><td><code id="spiro_summary_+3A_interval">interval</code></td>
<td>
<p>An integer giving the length of the computational interval in
seconds.</p>
</td></tr>
<tr><td><code id="spiro_summary_+3A_quiet">quiet</code></td>
<td>
<p>A logical value, whether or not messages should be displayed,
for example when intervals are shortened for specific steps.</p>
</td></tr>
<tr><td><code id="spiro_summary_+3A_exclude">exclude</code></td>
<td>
<p>A logical value, whether the last step should be excluded from
the summary if it was not completely performed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function generates mean values of gas exchange and cardiac parameters
for all steps of an exercise test. The calculation returns the mean of a
given <code>interval</code> before the end of each step.
</p>
<p>If the interval exceeds the duration of any step, a message will be
displayed. If the interval exceeds the duration of all steps, it will be
reset to the duration of the longest step. You can silence all messages by
setting <code>quiet = TRUE</code>.
</p>
<p>When setting <code>exclude = TRUE</code> the function will check whether the last
load step was terminated early. If this was the case, the step will not be
displayed in the summary.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> with the mean parameters for each step of the
exercise protocol.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Import and process example data
gxt_data &lt;- spiro(file = spiro_example("zan_gxt"))

spiro_summary(gxt_data)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
