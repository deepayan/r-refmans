<!DOCTYPE html><html><head><title>Help for package DirectEffects</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {DirectEffects}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#boots_g'><p>Coefficient Estimates across Bootstrapped Samples</p></a></li>
<li><a href='#cdesens'><p>Estimate sensitivity of ACDE estimates under varying levels of unobserved confounding</p></a></li>
<li><a href='#civilwar'><p>Data on civil wars and internal conflict from 1945-1999.</p></a></li>
<li><a href='#plot.cdesens'><p>Plot output from cdesens</p></a></li>
<li><a href='#ploughs'><p>Data on historical plough use and the socioeconomic status of</p>
women.</a></li>
<li><a href='#seq.g.vcov'><p>Consistent Variance estimator</p></a></li>
<li><a href='#sequential_g'><p>Perform linear sequential g-estimation to estimate the controlled</p>
direct effect of a treatment net the effect of a mediator.</a></li>
<li><a href='#summary.seqg'><p>Computes standard errors and p-values of DirectEffects estimates</p></a></li>
<li><a href='#summary.seqgboots'><p>Summary of DirectEffect Bootstrap Estimates</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>0.2.1</td>
</tr>
<tr>
<td>Title:</td>
<td>Estimating Controlled Direct Effects for Explaining Causal
Findings</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, sandwich, Formula, glue</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, dplyr, ggplot2, reshape2, scales, testthat, rmarkdown</td>
</tr>
<tr>
<td>Description:</td>
<td>A set of functions to estimate the controlled direct effect of treatment fixing a potential mediator to a specific value. Implements the sequential g-estimation estimator described in Vansteelandt (2009) &lt;<a href="https://doi.org/10.1097%2FEDE.0b013e3181b6f4c9">doi:10.1097/EDE.0b013e3181b6f4c9</a>&gt; and Acharya, Blackwell, and Sen (2016) &lt;<a href="https://doi.org/10.1017%2FS0003055416000216">doi:10.1017/S0003055416000216</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://www.mattblackwell.org/software/direct-effects/">https://www.mattblackwell.org/software/direct-effects/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/mattblackwell/DirectEffects/issues">https://github.com/mattblackwell/DirectEffects/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-05-12 18:24:04 UTC; mblackwell</td>
</tr>
<tr>
<td>Author:</td>
<td>Matthew Blackwell [aut, cre],
  Avidit Acharya [aut],
  Maya Sen [aut],
  Shiro Kuriwaki [aut],
  Jacob Brown [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Matthew Blackwell &lt;mblackwell@gov.harvard.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-05-12 20:02:11 UTC</td>
</tr>
</table>
<hr>
<h2 id='boots_g'>Coefficient Estimates across Bootstrapped Samples</h2><span id='topic+boots_g'></span>

<h3>Description</h3>

<p>Performs a simple bootstrap of a fitted DirectEffects model by re-estimating
the model with bootstrap samples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>boots_g(seqg, boots = 1000)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="boots_g_+3A_seqg">seqg</code></td>
<td>
<p>A fitted sequential_g estimate, computed by <code><a href="#topic+sequential_g">sequential_g</a></code>.</p>
</td></tr>
<tr><td><code id="boots_g_+3A_boots">boots</code></td>
<td>
<p>The number of bootstrap replicates. Defaults to 1000.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of type <span class="env">seqgboots</span> which is a matrix with <span class="env">boots</span>
rows and columns for each coefficient in the <span class="env">seqg</span> model. Use <span class="env">summary</span> 
to provide summary statistics, such as mean and quantiles.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(ploughs)
form &lt;- women_politics ~ plow +
 agricultural_suitability + tropical_climate + large_animals + rugged |
 years_civil_conflict + years_interstate_conflict  + oil_pc +
 european_descent + communist_dummy + polity2_2000 |
 centered_ln_inc + centered_ln_incsq
s1 &lt;- sequential_g(form, ploughs)

out.boots &lt;- boots_g(s1)

summary(out.boots)

</code></pre>

<hr>
<h2 id='cdesens'>Estimate sensitivity of ACDE estimates under varying levels of unobserved confounding</h2><span id='topic+cdesens'></span>

<h3>Description</h3>

<p>Estimate how the Average Controlled Direct Effect varies by various levels of
unobserved confounding. For each value of unmeasured confounding, summarized as
a correlation between residuals, <span class="env">cdesens</span> computes the ACDE. Standard
errors are computed by a simple bootstrap.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cdesens(
  seqg,
  var,
  rho = seq(-0.9, 0.9, by = 0.05),
  bootstrap = c("none", "standard"),
  boots_n = 1000,
  verbose = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cdesens_+3A_seqg">seqg</code></td>
<td>
<p>Output from sequential_g. The function only supports specifications with one
mediator variable.</p>
</td></tr>
<tr><td><code id="cdesens_+3A_var">var</code></td>
<td>
<p>A character indicating the name of the variable for
which the estimated ACDE is being evaluated.</p>
</td></tr>
<tr><td><code id="cdesens_+3A_rho">rho</code></td>
<td>
<p>A numerical vector of correlations between errors to test for. The
original model assumes <span class="env">rho = 0</span></p>
</td></tr>
<tr><td><code id="cdesens_+3A_bootstrap">bootstrap</code></td>
<td>
<p>character of c(&quot;none&quot;, &quot;standard&quot;), indicating whether to
include bootstrap standard errors. Default is &quot;none&quot;.</p>
</td></tr>
<tr><td><code id="cdesens_+3A_boots_n">boots_n</code></td>
<td>
<p>Number of bootstrap replicates, defaults to 100.</p>
</td></tr>
<tr><td><code id="cdesens_+3A_verbose">verbose</code></td>
<td>
<p>Whether to show progress and messages, defaults to
<span class="env">FALSE</span></p>
</td></tr>
<tr><td><code id="cdesens_+3A_...">...</code></td>
<td>
<p>Other parameters to pass on to <span class="env">lm.fit()</span> when
refitting the model</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>data(civilwar)


# main formula: Y ~ A + X | Z | M
form_main &lt;- onset ~ ethfrac + lmtnest + ncontig + Oil | warl +
  gdpenl + lpop + polity2l + relfrac | instab

# estimate CDE
direct &lt;- sequential_g(form_main, data = civilwar)

# sensitivity
out_sens &lt;- cdesens(direct, var = "ethfrac")

# plot sensitivity
plot(out_sens)

</code></pre>

<hr>
<h2 id='civilwar'>Data on civil wars and internal conflict from 1945-1999.</h2><span id='topic+civilwar'></span>

<h3>Description</h3>

<p>A dataset to replicate the analysis in Fearon and Laitin
(2003).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(civilwar)
</code></pre>


<h3>Format</h3>

<p>A data frame with 6610 observations and 69 variables.
</p>


<h3>Details</h3>


<ul>
<li><p> ccode. COW country id number
</p>
</li>
<li><p> country. country name
</p>
</li>
<li><p> cname. abbreviated country name
</p>
</li>
<li><p> cmark. 1 for first in each country series
</p>
</li>
<li><p> year. start year of war/conflict
</p>
</li>
<li><p> wars. number wars in progress in country year
</p>
</li>
<li><p> war. 1 if war ongoing in country year
</p>
</li>
<li><p> warl. lagged war, w/ 0 for start of country series
</p>
</li>
<li><p> onset. 1 for civil war onset
</p>
</li>
<li><p> ethonset. 1 if onset = 1 &amp; ethwar ~= 0
</p>
</li>
<li><p> durest. estimated war duration
</p>
</li>
<li><p> aim. 1 = rebels aim at center, 3 = aim at exit or autonomy, 2 = mixed or ambig.
</p>
</li>
<li><p> casename. Id for case, usually name of rebel group(s)
</p>
</li>
<li><p> ended. war ends = 1, 0 = ongoing
</p>
</li>
<li><p> ethwar. 0 = not ethnic, 1 = ambig/mixed, 2 = ethnic
</p>
</li>
<li><p> waryrs. war years for each onset
</p>
</li>
<li><p> pop. population, in 1000s
</p>
</li>
<li><p> lpop. log of pop
</p>
</li>
<li><p> polity2. revised polity score
</p>
</li>
<li><p> gdpen. gdp/pop based on pwt5.6, wdi2001,cow energy data
</p>
</li>
<li><p> gdptype. source/type of gdp/pop estimate
</p>
</li>
<li><p> gdpenl. lagged gdpenl, except for first in country series
</p>
</li>
<li><p> lgdpenl1. log of lagged gdpen
</p>
</li>
<li><p> lpopl1. log population, lagged except for first in country series
</p>
</li>
<li><p> region. country's region, based on MAR project
</p>
</li>
<li><p> western. Dummy for Western Democracies &amp; Japan
</p>
</li>
<li><p> eeurop. Dummy for Eastern Europe
</p>
</li>
<li><p> lamerica. Dummy for Latin America
</p>
</li>
<li><p> ssafrica. Dummy for Sub-Saharan Africa
</p>
</li>
<li><p> asia. Dummy for Asia (not including Japan)
</p>
</li>
<li><p> nafrme. Dummy for North Africa/Middle East
</p>
</li>
<li><p> colbrit. Former British colony
</p>
</li>
<li><p> colfra. former French colony
</p>
</li>
<li><p> mtnest. Estimated percent mountainous terrain
</p>
</li>
<li><p> lmtnest. log of mtnest
</p>
</li>
<li><p> elevdiff. high - low elevation, in meters
</p>
</li>
<li><p> Oil. more than 1/3 export revenues from fuels
</p>
</li>
<li><p> ncontig. noncontiguous state
</p>
</li>
<li><p> ethfrac. ethnic frac. based on Soviet Atlas, plus estimates for missing in 1964
</p>
</li>
<li><p> ef. ethnic fractionalization based on Fearon 2002 APSA paper
</p>
</li>
<li><p> plural. share of largest ethnic group (Fearon 2002 APSA)
</p>
</li>
<li><p> second. share of 2nd largest ethnic group (Fearon 2002 APSA)
</p>
</li>
<li><p> numlang. number languages in Ethnologue &gt; min(1
</p>
</li>
<li><p> relfrac. religious fractionalization
</p>
</li>
<li><p> plurrel. size of largest confession
</p>
</li>
<li><p> minrelpc. size of second largest confession
</p>
</li>
<li><p> muslim. percent muslim
</p>
</li>
<li><p> nwstate. 1 in 1st 2 years of state's existence
</p>
</li>
<li><p> polity2l. lagged polity2, except 1st in country series
</p>
</li>
<li><p> instab. &gt; 2 change in Polity measure in last 3 yrs
</p>
</li>
<li><p> anocl. lagged anocracy (-6 &lt; polity2l &lt; 6)
</p>
</li>
<li><p> deml. lagged democracy (polity2l &gt; 5)
</p>
</li>
<li><p> empethfrac. ethfrac coded for colonial empires
</p>
</li>
<li><p> empwarl. warl coded for data with empires
</p>
</li>
<li><p> emponset. onset coded for data with empires
</p>
</li>
<li><p> empgdpenl. gdpenl coded for empires data
</p>
</li>
<li><p> emplpopl. lpopl coded for empires data
</p>
</li>
<li><p> emplmtnest. lmtnest coded for empires data
</p>
</li>
<li><p> empncontig. ncontig coded for empires
</p>
</li>
<li><p> empolity2l. polity2l adjusted for empires (see fn38 in paper)
</p>
</li>
<li><p> sdwars. number Sambanis/Doyle civ wars in progress
</p>
</li>
<li><p> sdonset. onset of Sambanis/Doyle war
</p>
</li>
<li><p> colwars. number Collier/Hoeffler wars in progress
</p>
</li>
<li><p> colonset. onset of Collier/Hoeffler war
</p>
</li>
<li><p> cowwars. number COW civ wars in progress
</p>
</li>
<li><p> cowonset. onset of COW civ war
</p>
</li>
<li><p> cowwarl. 1 if COW war ongoing in last period
</p>
</li>
<li><p> sdwarl. 1 if S/D war ongoing in last period
</p>
</li>
<li><p> colwarl. 1 if C/H war ongoing in last period
</p>
</li></ul>



<h3>Source</h3>

<p>doi: <a href="https://doi.org/10.1017/S0003055403000534">10.1017/S0003055403000534</a>
</p>


<h3>References</h3>

<p>Fearon, James D., and David A. Laitin (2003). Ethnicity, Insurgency, and Civil War.
American Political Science Review, 97(1), 75-90. doi:10.1017/S0003055403000534
</p>

<hr>
<h2 id='plot.cdesens'>Plot output from cdesens</h2><span id='topic+plot.cdesens'></span>

<h3>Description</h3>

<p>Plot output from cdesens
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'cdesens'
plot(
  x,
  level = 0.95,
  xlim = NULL,
  ylim = NULL,
  xlab = NULL,
  ylab = "Estimated ACDE",
  bty = "n",
  col = "black",
  lwd = 2,
  ci.col = "grey70",
  ref.lines = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.cdesens_+3A_x">x</code></td>
<td>
<p>output from <span class="env">cdesens</span></p>
</td></tr>
<tr><td><code id="plot.cdesens_+3A_level">level</code></td>
<td>
<p>level of confidence interval to plot</p>
</td></tr>
<tr><td><code id="plot.cdesens_+3A_xlim">xlim</code></td>
<td>
<p>the x limits (x1, x2) of the plot for the sensitivity
analysis parameter, rho. Default is to use the range of
<span class="env">rho</span>.</p>
</td></tr>
<tr><td><code id="plot.cdesens_+3A_ylim">ylim</code></td>
<td>
<p>the y limits of the plot for the estimated CDEs.
Default is to show the all of the confidence intervals.</p>
</td></tr>
<tr><td><code id="plot.cdesens_+3A_xlab">xlab</code></td>
<td>
<p>label for the x axis.</p>
</td></tr>
<tr><td><code id="plot.cdesens_+3A_ylab">ylab</code></td>
<td>
<p>label for the y axis.</p>
</td></tr>
<tr><td><code id="plot.cdesens_+3A_bty">bty</code></td>
<td>
<p>a character string which determined the type of box
which is drawn about plots. Defaults to not drawing a box. See
<a href="graphics.html#topic+par">par</a> for more information.</p>
</td></tr>
<tr><td><code id="plot.cdesens_+3A_col">col</code></td>
<td>
<p>color for the line indicating the point estimates of the
bias-adjusted ACDE.</p>
</td></tr>
<tr><td><code id="plot.cdesens_+3A_lwd">lwd</code></td>
<td>
<p>line width for the line indicating the point estimates of the
bias-adjusted ACDE.</p>
</td></tr>
<tr><td><code id="plot.cdesens_+3A_ci.col">ci.col</code></td>
<td>
<p>color for the polygon that shows the confidence
intervals.</p>
</td></tr>
<tr><td><code id="plot.cdesens_+3A_ref.lines">ref.lines</code></td>
<td>
<p>a logical indicating whether horizontal and
vertical lines at 0 should be plotted.</p>
</td></tr>
<tr><td><code id="plot.cdesens_+3A_...">...</code></td>
<td>
<p>Other parameters to pass on to <span class="env">plot()</span></p>
</td></tr>
</table>

<hr>
<h2 id='ploughs'>Data on historical plough use and the socioeconomic status of
women.</h2><span id='topic+ploughs'></span>

<h3>Description</h3>

<p>A dataset to replicate the analysis in Alesina, Giuliano, and Nunn
(2013).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(ploughs)
</code></pre>


<h3>Format</h3>

<p>A data frame with 234 observations and 57 variables.
</p>


<h3>Details</h3>


<ul>
<li><p> isocode. 3-letter code for the country.
</p>
</li>
<li><p> flfp2000. Female labor force participation in 2000
</p>
</li>
<li><p> female_ownership. Percent of firms with female ownership (in
latest survey year)
</p>
</li>
<li><p> women_politics. Women in Politics in 2000, WDI
</p>
</li>
<li><p> plow. Animal plow cultivation variable (v39): Using
Ethnologue - pop weighted
</p>
</li>
<li><p> agricultural_suitability. overall (millets, sorghum, wheat,
barley, rye): share defined as suitable
</p>
</li>
<li><p> tropical_climate. Frac land: tropics and subtropics: using
Ethnologue - pop weighted
</p>
</li>
<li><p> large_animals. presence of large animals
</p>
</li>
<li><p> political_hierarchies. Jurisdictional hierarchy beyond local
community (v33): Using Ethnologue - pop weighted
</p>
</li>
<li><p> economic_complexity. Settlement patterns (v30)
</p>
</li>
<li><p> ln_income. ln (income)
</p>
</li>
<li><p> ln_income_squared. ln (income) ^2
</p>
</li>
<li><p> centered_ln_inc. de-meaned ln_inc
</p>
</li>
<li><p> centered_ln_incsq. de-meaned ln_inc squared
</p>
</li>
<li><p> country. country name
</p>
</li>
<li><p> communist_dummy. Communism indicator variable
</p>
</li>
<li><p> rugged. Ruggedness (Terrain Ruggedness Index, 100 m.)
</p>
</li>
<li><p> years_interstate_conflict. Years of interstate conflict, 1800-2007 - from COW
</p>
</li>
<li><p> serv_va_gdp2000. Value Added in Service/GDP in 2000
</p>
</li>
<li><p> polity2_2000. Polity 2 measure taken from the Polity IV dataset
</p>
</li>
<li><p> oil_pc. oil production/GDP
</p>
</li>
<li><p> ... other variables as annotated in the source.
</p>
</li></ul>



<h3>Source</h3>

<p>doi: <a href="https://doi.org/10.1093/qje/qjt005">10.1093/qje/qjt005</a>
</p>


<h3>References</h3>

<p>Alesina, A., Giuliano, P., &amp; Nunn, N. (2013). On the
Origins of Gender Roles: Women and the Plough. The Quarterly
Journal of Economics, 128(2), 469-530.
</p>

<hr>
<h2 id='seq.g.vcov'>Consistent Variance estimator</h2><span id='topic+seq.g.vcov'></span>

<h3>Description</h3>

<p>Called internally in sequential_g
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'g.vcov'
seq(first_mod, direct_mod, X1, X2, med.vars)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="seq.g.vcov_+3A_first_mod">first_mod</code></td>
<td>
<p>first stage model</p>
</td></tr>
<tr><td><code id="seq.g.vcov_+3A_direct_mod">direct_mod</code></td>
<td>
<p>DirectEffects model with terms</p>
</td></tr>
<tr><td><code id="seq.g.vcov_+3A_x1">X1</code></td>
<td>
<p>model matrix of first stage model</p>
</td></tr>
<tr><td><code id="seq.g.vcov_+3A_x2">X2</code></td>
<td>
<p>model matrix of DirectEffects model</p>
</td></tr>
<tr><td><code id="seq.g.vcov_+3A_med.vars">med.vars</code></td>
<td>
<p>vector of term.label attributes for mediators</p>
</td></tr>
</table>

<hr>
<h2 id='sequential_g'>Perform linear sequential g-estimation to estimate the controlled
direct effect of a treatment net the effect of a mediator.</h2><span id='topic+sequential_g'></span>

<h3>Description</h3>

<p>Perform linear sequential g-estimation to estimate the controlled
direct effect of a treatment net the effect of a mediator.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sequential_g(
  formula,
  data,
  subset,
  weights,
  na.action,
  offset,
  contrasts = NULL,
  verbose = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sequential_g_+3A_formula">formula</code></td>
<td>
<p>formula specification of the first-stage,
second-stage, and blip-down models. The right-hand side of the
formula should have three components separated by the <code>|</code>,
with the first component specifying the first-stage model with
treatment and any baseline covariates, the second component
specifying the intermediate covariates for the first-stage, and
the third component specifying the blip-down model. See Details
below for more information.</p>
</td></tr>
<tr><td><code id="sequential_g_+3A_data">data</code></td>
<td>
<p>A dataframe to apply <code>formula</code> on.</p>
</td></tr>
<tr><td><code id="sequential_g_+3A_subset">subset</code></td>
<td>
<p>A vector of logicals indicating which rows of <code>data</code> to keep.</p>
</td></tr>
<tr><td><code id="sequential_g_+3A_weights">weights</code></td>
<td>
<p>an optional vector of weights to be used in the fitting
process.  Should be <code>NULL</code> or a numeric vector.
If non-NULL, weighted least squares is used with weights
<code>weights</code> (that is, minimizing <code>sum(w*e^2)</code>); otherwise
ordinary least squares is used.  See also &lsquo;Details&rsquo;,</p>
</td></tr>
<tr><td><code id="sequential_g_+3A_na.action">na.action</code></td>
<td>
<p>a function which indicates what should happen
when the data contain <code>NA</code>s.  The default is set by
the <code>na.action</code> setting of <code><a href="base.html#topic+options">options</a></code>, and is
<code><a href="stats.html#topic+na.fail">na.fail</a></code> if that is unset.  The &lsquo;factory-fresh&rsquo;
default is <code><a href="stats.html#topic+na.omit">na.omit</a></code>.  Another possible value is
<code>NULL</code>, no action.  Value <code><a href="stats.html#topic+na.exclude">na.exclude</a></code> can be useful.</p>
</td></tr>
<tr><td><code id="sequential_g_+3A_offset">offset</code></td>
<td>
<p>this can be used to specify an <em>a priori</em> known
component to be included in the linear predictor during fitting.
This should be <code>NULL</code> or a numeric vector or matrix of extents
matching those of the response.  One or more <code><a href="stats.html#topic+offset">offset</a></code> terms can be
included in the formula instead or as well, and if more than one are
specified their sum is used.  See <code><a href="stats.html#topic+model.offset">model.offset</a></code>.</p>
</td></tr>
<tr><td><code id="sequential_g_+3A_contrasts">contrasts</code></td>
<td>
<p>an optional list. See the <code>contrasts.arg</code>
of <code><a href="stats.html#topic+model.matrix.default">model.matrix.default</a></code>.</p>
</td></tr>
<tr><td><code id="sequential_g_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether to suppress progress bar. Default is FALSE.</p>
</td></tr>
<tr><td><code id="sequential_g_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed to the low level
regression fitting functions (see below).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>sequential_g</code> function implements the linear
sequential g-estimator developed by Vansteelandt (2009) with the
consistent variance estimator developed by Acharya, Blackwell, and
Sen (2016).
</p>
<p>The formula specifies specifies the full first-stage model
including treatment, baseline confounders, intermediate
confounders, and the mediators. The user places <code>|</code> bars to
separate out these different components of the model. For
example, the formula should have the form <code>y ~ tr + x1 + x2
  | z1 + z2 | m1 + m2</code>. where <code>tr</code> is the name of the
treatment variable, <code>x1</code> and <code>x2</code> are baseline
covariates, <code>z1</code> and <code>z2</code> are intermediate covariates,
and <code>m1</code> and <code>m2</code> are the names of the mediator
variables. This last set of variables specify the 'blip-down' or
'demediation' function that is used to remove the average effect
of the mediator (possibly interacted) from the outcome to create
the blipped-down outcome. This blipped-down outcome is the passed
to a standard linear model with the covariates as specified for
the direct effects model.
</p>
<p>See the references below for more details.
</p>


<h3>Value</h3>

<p>Returns an object of <code>class</code> A <code>"seqg"</code>. Similar
to the output of a call to <code>lm</code>. Contains the following
components:
</p>

<ul>
<li><p> coefficients: a vector of named coefficients for the direct
effects model.
</p>
</li>
<li><p> residuals: the residuals, that is the blipped-down outcome
minus the fitted values.
</p>
</li>
<li><p> rank: the numeric rank of the fitted linear direct effects
model.
</p>
</li>
<li><p> fitted.values: the fitted mean values of the direct effects
model.
</p>
</li>
<li><p> weights: (only for weighted fits) the specified weights.
</p>
</li>
<li><p> df.residual: the residual degrees of freedom for the direct
effects model.
</p>
</li>
<li><p> aliased: logical vector indicating if any of the terms were
dropped or aliased due to perfect collinearity.
</p>
</li>
<li><p> terms: the list of <code>terms</code> object used. One for the
baseline covariates and treatment (<code>X</code>) and one for the
variables in the blip-down model (<code>M</code>).
</p>
</li>
<li><p> formula: the <code>formula</code> object used, possibly modified
to drop a constant in the blip-down model.
</p>
</li>
<li><p> call: the matched call.
</p>
</li>
<li><p> na.action: (where relevant) information returned by
<code>model.frame</code> of the special handling of <code>NA</code>s.
</p>
</li>
<li><p> xlevels: the levels of the factor variables.
</p>
</li>
<li><p> contrasts:  the contrasts used for the factor variables.
</p>
</li>
<li><p> first_mod: the output from the first-stage regression model.
</p>
</li>
<li><p> model: full model frame, including all variables.
</p>
</li>
<li><p> Ytilde: the blipped-down response vector.
</p>
</li>
<li><p> X: the model matrix for the second stage.
</p>
</li>
<li><p> M: the model matrix for demediation/blip-down function.
</p>
</li></ul>

<p>In addition, non-null fits will have components <code>assign</code>,
<code>effects</code>, and <code>qr</code> from the output of <code>lm.fit</code> or
<code>lm.wfit</code>, whichever is used.
</p>


<h3>References</h3>

<p>Vansteelandt, S. (2009). Estimating Direct Effects in
Cohort and Case-Control Studies. Epidemiology, 20(6), 851-860.
</p>
<p>Acharya, Avidit, Blackwell, Matthew, and Sen, Maya. (2016)
&quot;Explaining Causal Effects Without Bias: Detecting and Assessing
Direct Effects.&quot; American Political Science Review 110:3 pp.
512-529
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ploughs)

form_main &lt;- women_politics ~ plow +
  agricultural_suitability + tropical_climate + large_animals +
  political_hierarchies + economic_complexity +
  rugged | years_civil_conflict +
  years_interstate_conflict  + oil_pc +
  european_descent + communist_dummy + polity2_2000 +
  serv_va_gdp2000 | centered_ln_inc + centered_ln_incsq

direct &lt;- sequential_g(form_main, ploughs)

summary(direct)
</code></pre>

<hr>
<h2 id='summary.seqg'>Computes standard errors and p-values of DirectEffects estimates</h2><span id='topic+summary.seqg'></span>

<h3>Description</h3>

<p>Computes standard errors and p-values of DirectEffects estimates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'seqg'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.seqg_+3A_object">object</code></td>
<td>
<p>An object of class <span class="env">seqg</span>, computed by
<code><a href="#topic+sequential_g">sequential_g</a></code>.</p>
</td></tr>
<tr><td><code id="summary.seqg_+3A_...">...</code></td>
<td>
<p>additional arguments affecting the summary produced.</p>
</td></tr>
</table>

<hr>
<h2 id='summary.seqgboots'>Summary of DirectEffect Bootstrap Estimates</h2><span id='topic+summary.seqgboots'></span>

<h3>Description</h3>

<p>Summary of DirectEffect Bootstrap Estimates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'seqgboots'
summary(object, level = 0.95, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.seqgboots_+3A_object">object</code></td>
<td>
<p>An output of class <code>seqg</code> estimated by <code><a href="#topic+boots_g">boots_g</a></code>.</p>
</td></tr>
<tr><td><code id="summary.seqgboots_+3A_level">level</code></td>
<td>
<p>level of intervals to estimate. Defaults to 0.95</p>
</td></tr>
<tr><td><code id="summary.seqgboots_+3A_...">...</code></td>
<td>
<p>additional arguments affecting the summary produced.</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
