<!DOCTYPE html><html lang="en"><head><title>Help for package backtestGraphics</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {backtestGraphics}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#backtestGraphics-package'><p>A package to visualize backtest results</p></a></li>
<li><a href='#backtestGraphics'><p>Interactive Backtest Graphics</p></a></li>
<li><a href='#best_worst_month'><p>Find the best-performing and the worst-performing months</p></a></li>
<li><a href='#best_worst_three'><p>Find the three best-performing and worst-performing commodities</p></a></li>
<li><a href='#calc_pnl'><p>Calculate cumulative pnl, mean pnl, dollar sharpe ratio</p></a></li>
<li><a href='#cleanup_column'><p>Clean up the input data set</p></a></li>
<li><a href='#commodity'><p>Commodity Futures Data from 2003 to 2005.</p></a></li>
<li><a href='#create_instrument_optGroups'><p>Create opt group list for selectizeInput for instruments</p></a></li>
<li><a href='#create_strategy_optGroups'><p>Create opt group list for selectizeInput for strategies</p></a></li>
<li><a href='#credit'><p>Credit Default Swap Data from 2007 to 2009.</p></a></li>
<li><a href='#cumpnl_plot'><p>Draw an interactive line plot for cumulative P&amp;L</p></a></li>
<li><a href='#drawdown'><p>The Three Biggest Drawdowns in the portfolio</p></a></li>
<li><a href='#equity'><p>Equity Data from 2005 to 20014.</p></a></li>
<li><a href='#interactive_plot'><p>Interactive plot with dygraph</p></a></li>
<li><a href='#next_trading_day'><p>Next trading day</p></a></li>
<li><a href='#slice_data'><p>Slice Data Set</p></a></li>
<li><a href='#stat_calculation'><p>Calculate Statistics</p></a></li>
<li><a href='#sum_data'><p>Summarize data for the overall portfolio</p></a></li>
<li><a href='#trade_freq'><p>Find Trading Frequency</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Interactive Graphics for Portfolio Data</td>
</tr>
<tr>
<td>Description:</td>
<td>Creates an interactive graphics 
             interface to visualize backtest results of different financial 
             instruments, such as equities, futures, and credit default swaps.
             The package does not run backtests on the given data set but 
             displays a graphical explanation of the backtest results. Users can
             look at backtest graphics for different instruments, investment 
             strategies, and portfolios. Summary statistics of different 
             portfolio holdings are shown in the left panel, and interactive 
             plots of profit and loss (P&amp;L), net market value (NMV) and 
             gross market value (GMV) are displayed in the right panel. </td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.8</td>
</tr>
<tr>
<td>Date:</td>
<td>2025-01-02</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dygraphs, dplyr, scales, xts, shiny, tibble</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-01-08 05:07:15 UTC; milz</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-08 05:40:13 UTC</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Author:</td>
<td>Yanrong Song [aut, cre],
  Zijie Zhu [aut],
  David Kane [aut],
  Ziqi Lu [aut],
  Karan Tibrewal [aut],
  Fan Zhang [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Yanrong Song &lt;yrsong129@gmail.com&gt;</td>
</tr>
</table>
<hr>
<h2 id='backtestGraphics-package'>A package to visualize backtest results</h2><span id='topic+backtestGraphics-package'></span>

<h3>Description</h3>


<table>
<tr>
 <td style="text-align: left;"> Package </td><td style="text-align: left;"> backtestGraphics </td>
</tr>
<tr>
 <td style="text-align: left;"> Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;"> 
Version: </td><td style="text-align: left;"> 0.1-1</td>
</tr>
<tr>
 <td style="text-align: left;"> Date: </td><td style="text-align: left;"> 2015-07-14</td>
</tr>
<tr>
 <td style="text-align: left;"> License: </td><td style="text-align: left;"> GPL-3</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>



<h3>Details</h3>

<p>The backtestGraphics package creates an interactive graphics interface for 
commodity futures portfolios, equity portfolios and credit default swap. The 
interface contains three drop-down menus that allow the user to look at 
different portfolios, different investment strategies and different sectors 
or commodities. Summary statistics of the start date, end date, allocated 
capital, average GMV, number of instruments, cumulative P&amp;L, annualized P&amp;L, 
annualized volatility, sharpe ratio, best month and worst month are displayed
in the summary screen. More details of the top three drawdowns, three best 
performers and three worst performers are displayed in another detail screen.
An interactive plot for the cumulative P&amp;L or the daily P&amp;L is shown at the 
top and another interactive graph for nmv, gmv and number of contracts is 
displayed at the bottom.
</p>
<p>The package contains a main function <code>backtestGraphics</code> that takes in a 
data frame of backtest results, and returns summary statistics about the data 
frame and plots the historical traces of market values and profits. The package
also contains many helper functions that perform the calculations and 
plotting for the <code>backtestGraphics</code> function. These helper functions can
only be called within the <code>backtestGraphics</code> function.
</p>
<p>The package contains three data frames, <code>commodity</code>, <code>equity</code> and 
<code>credit</code>. The <code>commodity</code> data frame contains the backtest results 
for 28 commodities in the futures market. The <code>equity</code> data frame 
contains the backtest results for random 50 stocks. The <code>credit</code> data 
frame is the backtest result for credit default swap. The user can simply 
call <code>backtestGraphics</code> with these data frames. An example will be
<code>backtestGraphics(x = commodity)</code>.
</p>
<p>In order to use the user's own data frame, sometimes the user might need to
specify the column names of her data frame and pass them into the function.
Type <code>?backtestGraphics</code> for more details.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Yanrong Song <a href="mailto:yrsong129@gmail.com">yrsong129@gmail.com</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Zijie Zhu <a href="mailto:zijie.miller.zhu@gmail.com">zijie.miller.zhu@gmail.com</a>
</p>
</li>
<li><p> David Kane <a href="mailto:dave.kane@gmail.com">dave.kane@gmail.com</a>
</p>
</li>
<li><p> Ziqi Lu <a href="mailto:ziqi.lu@williams.edu">ziqi.lu@williams.edu</a>
</p>
</li>
<li><p> Karan Tibrewal <a href="mailto:karan.tibrewal@williams.edu">karan.tibrewal@williams.edu</a>
</p>
</li>
<li><p> Fan Zhang <a href="mailto:fan.zhang@williams.edu">fan.zhang@williams.edu</a>
</p>
</li></ul>


<hr>
<h2 id='backtestGraphics'>Interactive Backtest Graphics</h2><span id='topic+backtestGraphics'></span>

<h3>Description</h3>

<p>This function takes a data frame and returns an interactive interface for the
backtest data. The interface contains drop-down menus for different
strategies, portfolios and instruments/sectors. The user can slice her data
set according to the strategies for selecting instruments or the portfolio
numbers of her individual portfolios. The user can also look at a specific
group of instruments according to the sector of instruments. These sectors
will be in the same dropdown menu as instruments. The elements in each of the
three dropdown menus are generated according to the input data set. The
dropdown menus for strategies and portfolio numbers will only contain
&quot;Strategy Summary&quot; or &quot;Portfolio Summary&quot; if there's no strategy or portfolio
information available in the input data set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>backtestGraphics(
  x,
  trade.freq = NULL,
  name.var = "name",
  id.var = "id",
  date.var = "date",
  nmv.var = "nmv",
  gmv.var = "gmv",
  pnl.var = "pnl",
  contract.var = "contract",
  capital.num = NULL,
  sector.var = "sector",
  strategy.var = "strategy",
  substrategy.var = "substrategy",
  portfolio.var = "portfolio"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="backtestGraphics_+3A_x">x</code></td>
<td>
<p>is a data frame that contains the necessary information.</p>
</td></tr>
<tr><td><code id="backtestGraphics_+3A_trade.freq">trade.freq</code></td>
<td>
<p>is the trading frequency of the data set, numeric type. The
variable uses the number of dates between two trading dates to indicate 
trading frequency. The default value of this variable is NULL, and in this 
case the function will automatically calculate the trading period.</p>
</td></tr>
<tr><td><code id="backtestGraphics_+3A_name.var">name.var</code></td>
<td>
<p>is the column name of the instrument name column in the input
data set, character type. The default value of this variable is &quot;name&quot;. The
user has to specify name.var if she passes in a data frame with a different
column name for the instrument name. The input data set must contain either
a name column or an ID column.</p>
</td></tr>
<tr><td><code id="backtestGraphics_+3A_id.var">id.var</code></td>
<td>
<p>is the column name of the instrument ID column, character type.
The default value of this variable is &quot;id&quot;. If the input data set labels
the column of instrument ID's with some other column name, the user has to
pass in the column name here. The input data set has to contain either a
name column or an ID column.</p>
</td></tr>
<tr><td><code id="backtestGraphics_+3A_date.var">date.var</code></td>
<td>
<p>is the column name of the date column, character type. The 
default value of this variable is &quot;date&quot;. This column has to exist, and the
column name has to be correct in order for the function to process the data
set properly.</p>
</td></tr>
<tr><td><code id="backtestGraphics_+3A_nmv.var">nmv.var</code></td>
<td>
<p>is the column name of the &quot;net market value&quot; column, character
type. The default value of this variable is &quot;nmv&quot;. The input data set has
to contain either a &quot;net market value&quot; column or a &quot;number of contract&quot; 
column.</p>
</td></tr>
<tr><td><code id="backtestGraphics_+3A_gmv.var">gmv.var</code></td>
<td>
<p>The column name of the &quot;gross market value&quot; column if exists, 
character type. The default value of this variable is &quot;gmv&quot;. Such column
will be automatically calculated from the &quot;net market value&quot; column if it
does not exist.</p>
</td></tr>
<tr><td><code id="backtestGraphics_+3A_pnl.var">pnl.var</code></td>
<td>
<p>The column name of the profit-and-loss column, character type.
The default value of this variable is &quot;pnl&quot;. The data set has to contain 
such column so that the function can function properly. If such column is 
missing, the function will return an error indicating the problem.</p>
</td></tr>
<tr><td><code id="backtestGraphics_+3A_contract.var">contract.var</code></td>
<td>
<p>The column name of the contract number column, character 
type. The default value of this variable is &quot;contract&quot;. If such column is
missing, the function will instead use net market value as the contract
number for each day.</p>
</td></tr>
<tr><td><code id="backtestGraphics_+3A_capital.num">capital.num</code></td>
<td>
<p>The constant number of allocated capital for the whole 
portfolio, numeric type. The default value of such variable is <code>NULL</code>.
The function will use the number of allocated capital to calculate return 
rates. If the allocated capital for the portfolio is not specified, the 
function will use each day's gross market value to calculate the return 
rate for each day.</p>
</td></tr>
<tr><td><code id="backtestGraphics_+3A_sector.var">sector.var</code></td>
<td>
<p>is the column name of the sector column, character type.
The default value of this variable is &quot;sector&quot;. The sector column helps the
user to group instruments into big groups according to industries. The
function will still perform properly if the column name for sector is
wrong.</p>
</td></tr>
<tr><td><code id="backtestGraphics_+3A_strategy.var">strategy.var</code></td>
<td>
<p>The column name of the strategy column, if any. Character
type. The default value of this variable is &quot;strategy&quot;. This column can be 
missing from the input data set.</p>
</td></tr>
<tr><td><code id="backtestGraphics_+3A_substrategy.var">substrategy.var</code></td>
<td>
<p>The column name of the substrategy column, if any. 
Character type. The default value of this variable is &quot;substrategy&quot;. This 
column can be missing from the input data set.</p>
</td></tr>
<tr><td><code id="backtestGraphics_+3A_portfolio.var">portfolio.var</code></td>
<td>
<p>The column name of the portfolio number column, if any. 
Character type. The default value of this variable is &quot;portfolio&quot;. This 
column can be missing from the input data set.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The user can also slice the data set according to the division of the data 
set into main strategies, and the division of any main strategy into small 
substrategies. The &quot;substrategy&quot; column of the data set should indicate the
division of main strategies, if there are any substrategies. Note that the
structure of substrategies should conform to main strategies. That is, a
single substrategy should be under only one main strategy.
</p>
<p>Summary statistics are displayed in tables under the drop-down menu. The 
summary statistics contain data for the backtesting time horizon, profits, 
returns, volatility, market values, best/worst performers and biggest
drawdowns. Different interactive plots for the cumulative P&amp;L, daily P&amp;L, Net
Market Value (NMV), Gross Market Value (GMV) and number of contracts are
shown in the right panel.
</p>
<p>The <code>backtestGraphics</code> function takes in a data set as well as the names
of essential columns in the data set, if these names are different from the 
default ones. The column names should be assigned to the corresponding 
variables so that the function can recognize these columns. If some essential
columns are missing, the function will try to fill in these columns with 
existing data. If the function fails to do so due to a lack of data, the 
function will return an error about the missing columns. If a column name is 
wrong, the function will treat that column as a missing column. The input 
data set has to contain either a name column or an ID column, a date column, 
either a net market value column or a number of contract column and a P&amp;L 
column. The other columns either help the user slice the data set into 
different pieces to diagnose the data better, or can be calculated from the 
data inside the input data set.
</p>


<h3>Value</h3>

<p>a Shiny interface. The interactive shiny interface displays P&amp;L and 
cumulative P&amp;L on one chart, and number of contracts, net market value and 
gross market value on the other chart. Some summary statistics about return
and performances are displayed on the left sidebar as tables.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()) {backtestGraphics(credit)}

</code></pre>

<hr>
<h2 id='best_worst_month'>Find the best-performing and the worst-performing months</h2><span id='topic+best_worst_month'></span>

<h3>Description</h3>

<p>This function takes in a data set and returns a list with the best and the 
worst month and their respective pnl's.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>best_worst_month(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="best_worst_month_+3A_x">x</code></td>
<td>
<p>A data frame that contains data for individual instruments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the best month and the worst month, as well as their
respective p&amp;l's.
</p>

<hr>
<h2 id='best_worst_three'>Find the three best-performing and worst-performing commodities</h2><span id='topic+best_worst_three'></span>

<h3>Description</h3>

<p>This function takes in a data set and returns the best three and worst three 
commodity names and their respective pnls. All these data will be presented
as a formatted table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>best_worst_three(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="best_worst_three_+3A_x">x</code></td>
<td>
<p>A data frame that contains data for individual commodities.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>output A list of the best three and worst three performers with their 
commodity names, ids and respective pnls
</p>

<hr>
<h2 id='calc_pnl'>Calculate cumulative pnl, mean pnl, dollar sharpe ratio</h2><span id='topic+calc_pnl'></span>

<h3>Description</h3>

<p>This function takes in a data frame and calculates the cumulative P&amp;L, daily
P&amp;L, annualized P&amp;L, P&amp;L volatility and dollar sharpe ratio as well as three
biggest drawdowns. There are also average daily return rate and the standard 
deviation of daily return rates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_pnl(x, trade.freq = 7)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calc_pnl_+3A_x">x</code></td>
<td>
<p>A data frame that contains data for individual commodities.</p>
</td></tr>
<tr><td><code id="calc_pnl_+3A_trade.freq">trade.freq</code></td>
<td>
<p>The trading frequency of the portfolio, numeric</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list ith cumulative pnl, mean pnl, annualized volatility of pnl, 
dollar sharpe ratio and drawdown
</p>

<hr>
<h2 id='cleanup_column'>Clean up the input data set</h2><span id='topic+cleanup_column'></span>

<h3>Description</h3>

<p>This function cleans up the input data set in the backtestGraphics function.
This function checks if all the columns required by the backtestGraphics
function exist in the input data set. If any columns are missing, this
function will try to calculate or fill in the missing columns. If the input
data set misses too much data/columns, this function will return an error 
indicating the missing columns.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cleanup_column(
  x,
  name.var,
  id.var,
  date.var,
  nmv.var,
  gmv.var,
  pnl.var,
  contract.var,
  sector.var,
  strategy.var,
  substrategy.var,
  portfolio.var
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cleanup_column_+3A_x">x</code></td>
<td>
<p>is a data frame that contains the necessary information.</p>
</td></tr>
<tr><td><code id="cleanup_column_+3A_name.var">name.var</code></td>
<td>
<p>is the column name of the instrument name column in the input 
data set, character type. The default value of this variable is &quot;name&quot;. The user has to
specify name.var if she passes in a data frame with a different column name for the 
instrument name. The input data set must contain either a name column or an ID column.</p>
</td></tr>
<tr><td><code id="cleanup_column_+3A_id.var">id.var</code></td>
<td>
<p>is the column name of the instrument ID column, character type. 
The default value of this variable is &quot;id&quot;. If the input data set labels the
column of instrument ID's with some other column name, the user has to pass
in the column name here. The input data set has to contain either a name
column or an ID column.</p>
</td></tr>
<tr><td><code id="cleanup_column_+3A_date.var">date.var</code></td>
<td>
<p>is the column name of the date column, character type. The
default value of this variable is &quot;date&quot;. This column has to exist, and the
column name has to be correct in order for the function to process the data
set properly.</p>
</td></tr>
<tr><td><code id="cleanup_column_+3A_nmv.var">nmv.var</code></td>
<td>
<p>is the column name of the &quot;net market value&quot; column, character 
type. The default value of this variable is &quot;start.nmv&quot;. The input data set
has to contain either a &quot;net market value&quot; column or a &quot;number of contract&quot;
column.</p>
</td></tr>
<tr><td><code id="cleanup_column_+3A_gmv.var">gmv.var</code></td>
<td>
<p>The column name of the &quot;gross market value&quot; column if exists, 
character type. The default value of this variable is &quot;gmv&quot;. Such column will 
be automatically calculated from the &quot;net market value&quot; column if it does not 
exist.</p>
</td></tr>
<tr><td><code id="cleanup_column_+3A_pnl.var">pnl.var</code></td>
<td>
<p>The column name of the profit-and-loss column, character type.
The default value of this variable is &quot;pnl.adj&quot;. The data set has to contain
such column so that the function can function properly. If such column is
missing, the function will return an error indicating the problem.</p>
</td></tr>
<tr><td><code id="cleanup_column_+3A_contract.var">contract.var</code></td>
<td>
<p>The column name of the contract number column, character 
type. The default value of this variable is &quot;num.contract.start&quot;. If such 
column is missing, the function will instead use net market value as the
contract number for each day.</p>
</td></tr>
<tr><td><code id="cleanup_column_+3A_sector.var">sector.var</code></td>
<td>
<p>is the column name of the sector column, character type. The
default value of this variable is &quot;sector&quot;. The sector column helps the user
to group instruments into big groups according to industries. The function
will still perform properly if the column name for sector is wrong.</p>
</td></tr>
<tr><td><code id="cleanup_column_+3A_strategy.var">strategy.var</code></td>
<td>
<p>The column name of the strategy column, if any. Character 
type. The default value of this variable is &quot;strategy&quot;. This column can be
missing from the input data set.</p>
</td></tr>
<tr><td><code id="cleanup_column_+3A_substrategy.var">substrategy.var</code></td>
<td>
<p>The column name of the substrategy column, if any. 
Character type. The default value of this variable is &quot;substrategy&quot;. This
column can be missing from the input data set.</p>
</td></tr>
<tr><td><code id="cleanup_column_+3A_portfolio.var">portfolio.var</code></td>
<td>
<p>The column name of the portfolio number column, if any. 
Character type. The default value of this variable is &quot;portfolio&quot;. This
column can be missing from the input data set.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>x A data frame that only contains the needed data. The column names
are cleaned up here.
</p>

<hr>
<h2 id='commodity'>Commodity Futures Data from 2003 to 2005.</h2><span id='topic+commodity'></span>

<h3>Description</h3>

<p>This data frame contains the futures backtest results of 28 commodities from 
2003-01-01 to 2005-12-30. The data frame contains daily positions and profits
for each commodity.
</p>


<h3>Format</h3>

<p>A data frame with 11 variables 
</p>
 
<ul>
<li><p> name = The name of each commodity.
</p>
</li>
<li><p> id = The specific ID for each commodity.
</p>
</li>
<li><p> date = The individual trading date.
</p>
</li>
<li><p> sector = The sector a commodity.
</p>
</li>
<li><p> portfolio = The portfolio number the holding belongs to.
</p>
</li>
<li><p> strategy = The strategy under which substrategies and portfolios are
established. The same commodity can belong to different strategies at
the same time.
</p>
</li>
<li><p> substrategy = The substrategy under which portfolios are established.
Substrategy is only a finer division of strategies.
</p>
</li>
<li><p> gmv = The gross market value of the commodity on the trading date.
</p>
</li>
<li><p> nmv = The net market value of the commodity on the trading date.
</p>
</li>
<li><p> pnl = The adjusted P&amp;L of a commodity on the trading date.
</p>
</li>
<li><p> contract = The number of contracts of a commodity on that trading 
date.</p>
</li></ul>



<h3>Details</h3>

<p>The commodity data frame contains three layers of complexity. The first layer
is the strategy layer. The <code>strategy</code> column contains three different 
strategies that divide the whole data frame into three part. Each strategy is
further divided into different substrategies, and all these substrategies are
contained in the <code>substrategy</code> column. For each substrategy, different 
portfolios are formed regularly and overlapping with each other, so each 
substrategy is divided into different overlapping portfolios, contained in
the <code>portfolio</code> column.
</p>

<hr>
<h2 id='create_instrument_optGroups'>Create opt group list for selectizeInput for instruments</h2><span id='topic+create_instrument_optGroups'></span>

<h3>Description</h3>

<p>This function accepts the sector and id columns
of the data set and create a list of groups as required
by the selectizeInput optgroup functionality
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_instrument_optGroups(sector, id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_instrument_optGroups_+3A_sector">sector</code></td>
<td>
<p>sector column</p>
</td></tr>
<tr><td><code id="create_instrument_optGroups_+3A_id">id</code></td>
<td>
<p>id column</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of groups for sector/ id 
as required by the selectizeInput optgroup functionality
</p>

<hr>
<h2 id='create_strategy_optGroups'>Create opt group list for selectizeInput for strategies</h2><span id='topic+create_strategy_optGroups'></span>

<h3>Description</h3>

<p>This function accepts the strategy and substrategy columns
of the data set and create a list of groups as required
by the selectizeInput optgroup functionality
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_strategy_optGroups(strategy, substrategy)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_strategy_optGroups_+3A_strategy">strategy</code></td>
<td>
<p>strategy column</p>
</td></tr>
<tr><td><code id="create_strategy_optGroups_+3A_substrategy">substrategy</code></td>
<td>
<p>substrategy column</p>
</td></tr>
</table>


<h3>Details</h3>

<p>We assume that substrategies pertaining to a given strategy 
uses the name of the strategy followed by a period and then
the substrategy number. For example, substrategy 2 for strategy
1 must be named &quot;Strategy 1.2&quot;.
</p>


<h3>Value</h3>

<p>a list of groups for strategy/ substrategy 
as required by the selectizeInput optgroup functionality
</p>

<hr>
<h2 id='credit'>Credit Default Swap Data from 2007 to 2009.</h2><span id='topic+credit'></span>

<h3>Description</h3>

<p>This data frame contains the information of 260 credit default swaps (CDS) from
2007-01-02 to 2009-12-31. The data sets is actually a combination of CDS backtest
conducted under daily, weekly, monthly, and quartrly trading frequency. The strategy
column contains the trading frequency.
</p>


<h3>Format</h3>

<p>A data frame with 7 variables
</p>

<ul>
<li><p> name = The name of each credit default swap (CDS).
</p>
</li>
<li><p> date = The trading date.
</p>
</li>
<li><p> sector = The sector the CDS belongs to.
</p>
</li>
<li><p> strategy = The trading strategy of the credit default swap, including
&quot;daily&quot;, &quot;weekly&quot;, &quot;monthly&quot; and &quot;quarterly&quot;.
</p>
</li>
<li><p> gmv = The gross market value of the CDS held on that day.
</p>
</li>
<li><p> nmv = The net market value of the CDS held on that day.
</p>
</li>
<li><p> pnl = The P&amp;L value (adjusted) of the CDS on that day.
</p>
</li></ul>


<hr>
<h2 id='cumpnl_plot'>Draw an interactive line plot for cumulative P&amp;L</h2><span id='topic+cumpnl_plot'></span>

<h3>Description</h3>

<p>This function takes a data frame and returns an interactive plot for the
cumulative P&amp;L of the portfolio data. The plot is zoomable and specific data can be shown once the 
cursor is placed on the graph.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cumpnl_plot(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cumpnl_plot_+3A_x">x</code></td>
<td>
<p>A data frame that the function takes in.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plot. Red bars indicate loss and green bars indicate profit.
</p>

<hr>
<h2 id='drawdown'>The Three Biggest Drawdowns in the portfolio</h2><span id='topic+drawdown'></span>

<h3>Description</h3>

<p>Show the top 3 drawdowns including start and end dates, as well as
decrease in returns during the drawdown period. All the information will be
returned in a table, with all the numbers properly formatted.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drawdown(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="drawdown_+3A_x">x</code></td>
<td>
<p>A data frame with date and return columns</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the data set is not big enough that there are fewer drawdowns than 
required by the user, the function will throw NA's into the table so that the
table will still contain as many rows as the user demands.
</p>


<h3>Value</h3>

<p>A data frame that contains the starting date, end date and values of
the three biggest drawdowns.
</p>

<hr>
<h2 id='equity'>Equity Data from 2005 to 20014.</h2><span id='topic+equity'></span>

<h3>Description</h3>

<p>This data frame contains the information of 50 equities from 2005-05-02 to
2014-04-30. These 50 stocks are randomly chosen from a backtest results of
the whole stock markets.
</p>


<h3>Format</h3>

<p>A data frame with 5 variables 
</p>
 
<ul>
<li><p> name = The name of this equity.
</p>
</li>
<li><p> date = trading date.
</p>
</li>
<li><p> sector = The sector this equity belongs to. There are nine sectors
in total.
</p>
</li>
<li><p> nmv = The net market value of the equity held on that day.
</p>
</li>
<li><p> pnl = The adjusted P&amp;L of the equity on that day. P&amp;L is adjusted
according to the bid offer costs.
</p>
</li></ul>


<hr>
<h2 id='interactive_plot'>Interactive plot with dygraph</h2><span id='topic+interactive_plot'></span>

<h3>Description</h3>

<p>This function takes a data frame and returns an interactive plot for 
the portfolio data. The plot is zoomable and specific data can be shown once the 
cursor is placed on the graph.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>interactive_plot(x, type)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="interactive_plot_+3A_x">x</code></td>
<td>
<p>A data frame that the function takes in.</p>
</td></tr>
<tr><td><code id="interactive_plot_+3A_type">type</code></td>
<td>
<p>The value depicted by the plot, choices are <code>nmv</code>, <code>gmv</code>,
<code>contract</code>, <code>pnl</code> and <code>ret</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For all bar plots, green represents profit and red represents loss. 
This function also calculates gmv, cumulative P&amp;L and return rates if 
these statistics are not in the data frame. Number of contracts will all be zero if the column 
is missing.
</p>


<h3>Value</h3>

<p>A plot. Red bars indicate loss and green bars indicate profits.
</p>

<hr>
<h2 id='next_trading_day'>Next trading day</h2><span id='topic+next_trading_day'></span>

<h3>Description</h3>

<p>This function gets the next trading day as defined by is.trading.day()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>next_trading_day(d)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="next_trading_day_+3A_d">d</code></td>
<td>
<p>Date relative to which to get the next trading day.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Date The next trading day of date d.
</p>

<hr>
<h2 id='slice_data'>Slice Data Set</h2><span id='topic+slice_data'></span>

<h3>Description</h3>

<p>This function is part of the Shiny reactive functions. The function looks at
what strategy, portfolio and instrument the user selects, and then slices 
the data set into different pieces or summarizes the data set into a summary.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>slice_data(x, input, capital.num)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="slice_data_+3A_x">x</code></td>
<td>
<p>is an input data frame that is to be sliced according to the user's
selection of strategy, portfolio and instrument.</p>
</td></tr>
<tr><td><code id="slice_data_+3A_input">input</code></td>
<td>
<p>is a Shiny object that contains all the shiny inputs as a list.</p>
</td></tr>
<tr><td><code id="slice_data_+3A_capital.num">capital.num</code></td>
<td>
<p>is the amount of allocated capital for the portfolio, 
numeric type. The function will use capital.num to calculate return rates
if available, or use everyday's GMV to calculate return rates instead.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A small data set that has been retrieved from the previous data set.
</p>

<hr>
<h2 id='stat_calculation'>Calculate Statistics</h2><span id='topic+stat_calculation'></span>

<h3>Description</h3>

<p>This helper function calculates the summary of the input data set. The 
function takes in the sliced data set and the calculated trading frequency,
and calculate statistics about the market value, returns and volatility for
later display.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stat_calculation(x.list)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stat_calculation_+3A_x.list">x.list</code></td>
<td>
<p>is the input data set. Such data set has been sliced by
slice_data function, and is labeled as &quot;intermediate data set&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>f A list that contains all calculated numbers.
</p>

<hr>
<h2 id='sum_data'>Summarize data for the overall portfolio</h2><span id='topic+sum_data'></span>

<h3>Description</h3>

<p>This function takes in a data set and returns the summary for each day's
net market value, profit and loss, contract number and return rate.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sum_data(x, sector.selected = NULL, capital.num = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sum_data_+3A_x">x</code></td>
<td>
<p>A data frame that contains data for individual commodities.</p>
</td></tr>
<tr><td><code id="sum_data_+3A_sector.selected">sector.selected</code></td>
<td>
<p>The sector that the function is doing summarization
for. When &quot;sector.selected = NULL&quot;, the function performs summarization across
the whole data set.</p>
</td></tr>
<tr><td><code id="sum_data_+3A_capital.num">capital.num</code></td>
<td>
<p>The constant number of allocated capital to calculate return, 
number. Default value is NULL. When &quot;capital.num = NULL&quot;, the function uses
gross market value to calculate return rates for each row.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame that summarizes the market values and returns across all
commodities.
</p>

<hr>
<h2 id='trade_freq'>Find Trading Frequency</h2><span id='topic+trade_freq'></span>

<h3>Description</h3>

<p>This helper function looks for the trading frequency of the input data set.
It can identify daily, weekly, monthly or yearly trading frequency in the 
data set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trade_freq(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="trade_freq_+3A_x">x</code></td>
<td>
<p>The input data set whose trading period we are interested in</p>
</td></tr>
</table>


<h3>Value</h3>

<p>trade.freq The number that indicates the trading frequency.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
