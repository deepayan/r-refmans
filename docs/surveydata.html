<!DOCTYPE html><html><head><title>Help for package surveydata</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {surveydata}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#surveydata-package'><p>Tools, classes and methods to manipulate survey data.</p></a></li>
<li><a href='#as_opentext_datatable'><p>Converts free format question text to datatable using the <code>DT</code> package.</p></a></li>
<li><a href='#as.data.frame.surveydata'><p>Coerces surveydata object to data.frame.</p></a></li>
<li><a href='#as.surveydata'><p>Coercion from and to surveydata.</p></a></li>
<li><a href='#cbind.surveydata'><p>Combines surveydata object by columns.</p></a></li>
<li><a href='#dplyr-surveydata'><p>Methods to support dplyr verbs.</p></a></li>
<li><a href='#dropout'><p>Calculates at which questions respondents drop out.</p></a></li>
<li><a href='#encToInt'><p>Converts a character vector to an integer vector.</p></a></li>
<li><a href='#Extract'><p>Extract or replace subsets of surveydata, ensuring that the varlabels stay synchronized.</p></a></li>
<li><a href='#fix_common_encoding_problems'><p>Fix common encoding problems when working with web imported data.</p></a></li>
<li><a href='#fix_levels_01_spss'><p>Fix level formatting of all question with Yes/No type answers.</p></a></li>
<li><a href='#has_dont_know'><p>Tests whether levels contain &quot;Don't know&quot;.</p></a></li>
<li><a href='#hasDK'><p>Deprecated functions.</p></a></li>
<li><a href='#intToEnc'><p>Converts an integer vector to a character vector.</p></a></li>
<li><a href='#is.surveydata'><p>Tests whether an object is of class surveydata.</p></a></li>
<li><a href='#lapply_names'><p>Applies function only to named elements of a list.</p></a></li>
<li><a href='#leveltest'><p>Fix level formatting of all question with Yes/No type answers.</p></a></li>
<li><a href='#membersurvey'><p>Data frame with survey data of member satisfaction survey.</p></a></li>
<li><a href='#merge'><p>Merge surveydata objects.</p></a></li>
<li><a href='#merge_varlabels'><p>Merges variable.labels attribute from two surveydata objects</p></a></li>
<li><a href='#names+26lt+3B-.surveydata'><p>Updates names and variable.labels attribute of surveydata.</p></a></li>
<li><a href='#pattern'><p>Returns and updates pattern attribute.</p></a></li>
<li><a href='#print_opentext'><p>Print open text questions.</p></a></li>
<li><a href='#question_order'><p>Changes vector to ordered factor, adding NA levels if applicable.</p></a></li>
<li><a href='#question_text'><p>Returns question text.</p></a></li>
<li><a href='#question_text_common'><p>Returns common element of question text.</p></a></li>
<li><a href='#question_text_unique'><p>Returns unique elements of question text.</p></a></li>
<li><a href='#questions'><p>Returns a list of all the unique questions in the surveydata object.</p></a></li>
<li><a href='#remove_all_dont_know'><p>Removes &quot;Do not know&quot; and other similar words from factor levels in data frame.</p></a></li>
<li><a href='#remove_dont_know'><p>Removes &quot;Don't know&quot; from levels and replaces with NA.</p></a></li>
<li><a href='#rm.attrs'><p>Removes pattern and variable.labels from attributes list.</p></a></li>
<li><a href='#rm.pattern'><p>Removes pattern from attributes list.</p></a></li>
<li><a href='#split_common_unique'><p>Get common and unique text in question based on regex pattern identification.</p></a></li>
<li><a href='#strCommonUnique'><p>Finds the common and unique elements in a character vector.</p></a></li>
<li><a href='#survey_plot_question'><p>Plots single and  as multi-response questions.</p></a></li>
<li><a href='#survey_plot_satisfaction'><p>Plot satisfaction questions.</p></a></li>
<li><a href='#survey_plot_title'><p>Construct plot title from the question text, wrapping at the desired width.</p></a></li>
<li><a href='#survey_plot_yes_no'><p>Plot data in yes/no format.</p></a></li>
<li><a href='#varlabels'><p>Returns and updates variable.labels attribute of surveydata object.</p></a></li>
<li><a href='#which.q'><p>Identifies the columns indices corresponding to a specific question.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>0.2.7</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Title:</td>
<td>Tools to Work with Survey Data</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>true</td>
</tr>
<tr>
<td>Copyright:</td>
<td>Andrie de Vries</td>
</tr>
<tr>
<td>Description:</td>
<td>Data obtained from surveys contains information not only about the
    survey responses, but also the survey metadata, e.g. the original survey
    questions and the answer options. The 'surveydata' package makes it easy to
    keep track of this metadata, and to easily extract columns with
    specific questions.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/andrie/surveydata">https://github.com/andrie/surveydata</a>,
<a href="https://andrie.github.io/surveydata/">https://andrie.github.io/surveydata/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/andrie/surveydata/issues">https://github.com/andrie/surveydata/issues</a></td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>yes</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, rlang, magrittr, purrr, ggplot2, scales, tidyr, DT,
assertthat</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown, withr, covr, rprojroot, spelling</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-03-12 17:23:15 UTC; apdev</td>
</tr>
<tr>
<td>Author:</td>
<td>Andrie de Vries [aut, cre, cph],
  Evan Odell [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Andrie de Vries &lt;apdevries@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-03-12 18:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='surveydata-package'>Tools, classes and methods to manipulate survey data.</h2><span id='topic+surveydata-package'></span><span id='topic+surveydata'></span>

<h3>Description</h3>

<p>Tools, classes and methods to manipulate survey data.
</p>


<h3>Details</h3>

<p>Surveydata objects have been designed to function with SPSS export data, i.e. the result of an SPSS import,  <code><a href="foreign.html#topic+read.spss">foreign::read.spss()</a></code>.  This type of data is contained in a data.frame, with information about the questionnaire text in the <code>variable.labels</code> attribute.  Surveydata objects keep track of the variable labels, by offering methods for renaming, subsetting, etc.
</p>
<p>Coercion functions:
</p>

<ul>
<li> <p><code><a href="#topic+as.surveydata">as.surveydata()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+is.surveydata">is.surveydata()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+as.data.frame.surveydata">as.data.frame.surveydata()</a></code>
</p>
</li></ul>

<p>To access and modify attributes:
</p>

<ul>
<li> <p><code><a href="#topic+pattern">pattern()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+varlabels">varlabels()</a></code>
</p>
</li></ul>

<p>To subset or merge surveydata objects:
</p>

<ul>
<li> <p><code><a href="#topic+merge">merge()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+Extract">Extract()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+cbind.surveydata">cbind.surveydata()</a></code>
</p>
</li></ul>

<p>To extract question text from varlabels:
</p>

<ul>
<li> <p><code><a href="#topic+question_text">question_text()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+question_text_common">question_text_common()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+question_text_unique">question_text_unique()</a></code>
</p>
</li></ul>

<p>To fix common encoding problems:
</p>

<ul>
<li> <p><code><a href="#topic+encToInt">encToInt()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+intToEnc">intToEnc()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+fix_common_encoding_problems">fix_common_encoding_problems()</a></code>
</p>
</li></ul>

<p>To clean data:
</p>

<ul>
<li> <p><code><a href="#topic+remove_dont_know">remove_dont_know()</a></code> to remove &quot;Don't know&quot; responses
</p>
</li>
<li> <p><code><a href="#topic+remove_all_dont_know">remove_all_dont_know()</a></code> to remove &quot;Don't know&quot; responses from all questions
</p>
</li>
<li> <p><code><a href="#topic+fix_levels_01">fix_levels_01()</a></code> to fix level formatting of all question with Yes/No type answers
</p>
</li></ul>

<p>Miscellaneous tools:
</p>

<ul>
<li> <p><code><a href="#topic+dropout">dropout()</a></code> to determine questions where respondents drop out
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Andrie de Vries <a href="mailto:apdevries@gmail.com">apdevries@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(surveydata)

# Create surveydata object

sdat &lt;- data.frame(
    id   = 1:4,
    Q1   = c("Yes", "No", "Yes", "Yes"),
    Q4_1 = c(1, 2, 1, 2), 
    Q4_2 = c(3, 4, 4, 3), 
    Q4_3 = c(5, 5, 6, 6), 
    Q10 = factor(c("Male", "Female", "Female", "Male")),
    crossbreak  = c("A", "A", "B", "B"), 
    weight      = c(0.9, 1.1, 0.8, 1.2)
)

varlabels(sdat) &lt;- c(
    "RespID",
    "Question 1", 
    "Question 4: red", "Question 4: green", "Question 4: blue", 
    "Question 10",
    "crossbreak",
    "weight"
  )

sv &lt;- as.surveydata(sdat, renameVarlabels = TRUE)

# Extract specific questions
sv[, "Q1"]
sv[, "Q4"]

# Query attributes
varlabels(sv)
pattern(sv)

# Find unique questions

questions(sv)
which.q(sv, "Q1")
which.q(sv, "Q4")

# Find question text
question_text(sv, "Q1")
question_text(sv, "Q4")

question_text_common(sv, "Q4")
question_text_unique(sv, "Q4")


# Basic operations on a surveydata object, illustrated with the example dataset membersurvey

class(membersurvey)

questions(membersurvey)

which.q(membersurvey, "Q1")
which.q(membersurvey, "Q3")
which.q(membersurvey, c("Q1", "Q3"))

question_text(membersurvey, "Q3")
question_text_unique(membersurvey, "Q3")
question_text_common(membersurvey, "Q3")

# Extracting columns from a surveydata object

head(membersurvey[, "Q1"])
head(membersurvey["Q1"])
head(membersurvey[, "Q3"])
head(membersurvey[, c("Q1", "Q3")])

# Note that the result is always a surveydata object, even if only one column is extracted

head(membersurvey[, "id"])
str(membersurvey[, "id"])

</code></pre>

<hr>
<h2 id='as_opentext_datatable'>Converts free format question text to datatable using the <code>DT</code> package.</h2><span id='topic+as_opentext_datatable'></span>

<h3>Description</h3>

<p>Converts free format question text to datatable using the <code>DT</code> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_opentext_datatable(data, q)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_opentext_datatable_+3A_data">data</code></td>
<td>
<p>surveydata object</p>
</td></tr>
<tr><td><code id="as_opentext_datatable_+3A_q">q</code></td>
<td>
<p>Question</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other open text functions: 
<code><a href="#topic+print_opentext">print_opentext</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>as_opentext_datatable(membersurvey, "Q33")
</code></pre>

<hr>
<h2 id='as.data.frame.surveydata'>Coerces surveydata object to data.frame.</h2><span id='topic+as.data.frame.surveydata'></span><span id='topic+as.data.frame'></span>

<h3>Description</h3>

<p>Coerces surveydata object to data.frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'surveydata'
as.data.frame(x, ..., rm.pattern = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.data.frame.surveydata_+3A_x">x</code></td>
<td>
<p>Surveydata object to coerce to class data.frame</p>
</td></tr>
<tr><td><code id="as.data.frame.surveydata_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
<tr><td><code id="as.data.frame.surveydata_+3A_rm.pattern">rm.pattern</code></td>
<td>
<p>If TRUE removes <code><a href="#topic+pattern">pattern()</a></code> attributes from x</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="#topic+surveydata-package">surveydata-package</a>
</p>

<hr>
<h2 id='as.surveydata'>Coercion from and to surveydata.</h2><span id='topic+as.surveydata'></span><span id='topic+un_surveydata'></span>

<h3>Description</h3>

<p>Methods for creating <code>surveydata</code> objects, testing for class, and coercion from other objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.surveydata(
  x,
  sep = "_",
  exclude = "other",
  ptn = pattern(x),
  defaultPtn = list(sep = sep, exclude = exclude),
  renameVarlabels = FALSE
)

un_surveydata(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.surveydata_+3A_x">x</code></td>
<td>
<p>Object to coerce to surveydata</p>
</td></tr>
<tr><td><code id="as.surveydata_+3A_sep">sep</code></td>
<td>
<p>Separator between question and sub-question names</p>
</td></tr>
<tr><td><code id="as.surveydata_+3A_exclude">exclude</code></td>
<td>
<p>Excludes from pattern search</p>
</td></tr>
<tr><td><code id="as.surveydata_+3A_ptn">ptn</code></td>
<td>
<p>A list with two elements, <code>sep</code> and <code>exclude</code>.  See <code><a href="#topic+pattern">pattern()</a></code> and <code><a href="#topic+which.q">which.q()</a></code> for more detail.</p>
</td></tr>
<tr><td><code id="as.surveydata_+3A_defaultptn">defaultPtn</code></td>
<td>
<p>The default for <code>ptn</code>, if it doesn't exist in the object that is being coerced.</p>
</td></tr>
<tr><td><code id="as.surveydata_+3A_renamevarlabels">renameVarlabels</code></td>
<td>
<p>If TRUE, turns variable.labels attribute into a named vector, using <code>names(x)</code> as names.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function<code>un_surveydata()</code> removes the <code>surveydata</code> class from the object, leaving intact the other classes, e.g. <code>data.frame</code> or <code>tibble</code>
</p>


<h3>See Also</h3>

<p><a href="#topic+surveydata-package">surveydata-package</a>, <code><a href="#topic+is.surveydata">is.surveydata()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(surveydata)

# Create surveydata object

sdat &lt;- data.frame(
    id   = 1:4,
    Q1   = c("Yes", "No", "Yes", "Yes"),
    Q4_1 = c(1, 2, 1, 2), 
    Q4_2 = c(3, 4, 4, 3), 
    Q4_3 = c(5, 5, 6, 6), 
    Q10 = factor(c("Male", "Female", "Female", "Male")),
    crossbreak  = c("A", "A", "B", "B"), 
    weight      = c(0.9, 1.1, 0.8, 1.2)
)

varlabels(sdat) &lt;- c(
    "RespID",
    "Question 1", 
    "Question 4: red", "Question 4: green", "Question 4: blue", 
    "Question 10",
    "crossbreak",
    "weight"
  )

sv &lt;- as.surveydata(sdat, renameVarlabels = TRUE)

# Extract specific questions
sv[, "Q1"]
sv[, "Q4"]

# Query attributes
varlabels(sv)
pattern(sv)

# Find unique questions

questions(sv)
which.q(sv, "Q1")
which.q(sv, "Q4")

# Find question text
question_text(sv, "Q1")
question_text(sv, "Q4")

question_text_common(sv, "Q4")
question_text_unique(sv, "Q4")


# Basic operations on a surveydata object, illustrated with the example dataset membersurvey

class(membersurvey)

questions(membersurvey)

which.q(membersurvey, "Q1")
which.q(membersurvey, "Q3")
which.q(membersurvey, c("Q1", "Q3"))

question_text(membersurvey, "Q3")
question_text_unique(membersurvey, "Q3")
question_text_common(membersurvey, "Q3")

# Extracting columns from a surveydata object

head(membersurvey[, "Q1"])
head(membersurvey["Q1"])
head(membersurvey[, "Q3"])
head(membersurvey[, c("Q1", "Q3")])

# Note that the result is always a surveydata object, even if only one column is extracted

head(membersurvey[, "id"])
str(membersurvey[, "id"])

</code></pre>

<hr>
<h2 id='cbind.surveydata'>Combines surveydata object by columns.</h2><span id='topic+cbind.surveydata'></span>

<h3>Description</h3>

<p>Combines surveydata object by columns.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'surveydata'
cbind(..., deparse.level = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cbind.surveydata_+3A_...">...</code></td>
<td>
<p>surveydata objects</p>
</td></tr>
<tr><td><code id="cbind.surveydata_+3A_deparse.level">deparse.level</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>

<hr>
<h2 id='dplyr-surveydata'>Methods to support dplyr verbs.</h2><span id='topic+dplyr-surveydata'></span><span id='topic+mutate.surveydata'></span><span id='topic+as_tibble.surveydata'></span><span id='topic+as.tbl.surveydata'></span><span id='topic+select.surveydata'></span><span id='topic+filter'></span><span id='topic+arrange.surveydata'></span><span id='topic+summarise.surveydata'></span><span id='topic+summarize.surveydata'></span><span id='topic+slice.surveydata'></span>

<h3>Description</h3>

<p>The <code>surveydata</code> package exposes functionality to support some of the <code>dplyr</code> verbs, e.g. <code><a href="dplyr.html#topic+filter">dplyr::filter()</a></code>.  The computation is performed by <code>dplyr</code>, and the resulting object is of class <code>surveydata</code> (as well as the <code>dplyr</code> result).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'surveydata'
mutate(.data, ...)

## S3 method for class 'surveydata'
as_tibble(x, ..., .name_repair, rownames)

## S3 method for class 'surveydata'
as.tbl(x, ...)

## S3 method for class 'surveydata'
select(.data, ...)

## S3 method for class 'surveydata'
arrange(.data, ...)

## S3 method for class 'surveydata'
summarise(.data, ...)

## S3 method for class 'surveydata'
summarize(.data, ...)

## S3 method for class 'surveydata'
slice(.data, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dplyr-surveydata_+3A_.data">.data</code></td>
<td>
<p><code>surveydata</code> object or <code>tbl</code> passed to <code>dplyr</code> verb</p>
</td></tr>
<tr><td><code id="dplyr-surveydata_+3A_...">...</code></td>
<td>
<p>passed to dplyr verb</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>withr::with_package("dplyr", {
  membersurvey %&gt;% 
    as_tibble() %&gt;% 
    .[c("id", "Q1", "Q2")] %&gt;% 
    filter(Q2 == 2009)
})


</code></pre>

<hr>
<h2 id='dropout'>Calculates at which questions respondents drop out.</h2><span id='topic+dropout'></span>

<h3>Description</h3>

<p>The number of respondents for each question is calculated as the length of the vector, after omitting NA values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dropout(x, summary = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dropout_+3A_x">x</code></td>
<td>
<p>surveydata object, list or data.frame</p>
</td></tr>
<tr><td><code id="dropout_+3A_summary">summary</code></td>
<td>
<p>If TRUE, returns a shortened vector that contains only the points where respondents drop out. Otherwise, returns the number of respondents for each question.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Named numeric vector of respondent counts
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dropout(membersurvey[-(127:128)])
</code></pre>

<hr>
<h2 id='encToInt'>Converts a character vector to an integer vector.</h2><span id='topic+encToInt'></span>

<h3>Description</h3>

<p>Conversion of character vector to integer vector.  The encoding of the character vector can be specified but defaults to the current locale.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>encToInt(x, encoding = localeToCharset())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="encToInt_+3A_x">x</code></td>
<td>
<p>Character vector</p>
</td></tr>
<tr><td><code id="encToInt_+3A_encoding">encoding</code></td>
<td>
<p>A character string describing the encoding of x.  Defaults to the current locale.  See also <code><a href="base.html#topic+iconvlist">iconvlist()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer vector
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+iconv">iconv()</a></code>
</p>
<p>Other Functions to clean data: 
<code><a href="#topic+fix_common_encoding_problems">fix_common_encoding_problems</a>()</code>,
<code><a href="#topic+fix_levels_01_spss">fix_levels_01_spss</a>()</code>,
<code><a href="#topic+has_dont_know">has_dont_know</a>()</code>,
<code><a href="#topic+intToEnc">intToEnc</a>()</code>,
<code><a href="#topic+leveltest">leveltest</a></code>,
<code><a href="#topic+remove_all_dont_know">remove_all_dont_know</a>()</code>,
<code><a href="#topic+remove_dont_know">remove_dont_know</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>encToInt("\xfa")
</code></pre>

<hr>
<h2 id='Extract'>Extract or replace subsets of surveydata, ensuring that the varlabels stay synchronized.</h2><span id='topic+Extract'></span><span id='topic++5B.surveydata'></span><span id='topic++5B'></span><span id='topic++22+5B.surveydata+22'></span><span id='topic++5B+3C-.surveydata'></span><span id='topic++24+3C-.surveydata'></span><span id='topic++24+3C-'></span>

<h3>Description</h3>

<p>The <code>surveydata</code> package makes it easy to extract specific questions from a surveydata object. Because survey data typically has question names like &quot;Q1_a&quot;, &quot;Q1_b&quot;, &quot;Q1_c&quot; the extract method for a <code>surveydata</code> object makes it easy to extract all columns by simply specifying &quot;Q1&quot; as the argument to the column index.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'surveydata'
x[i, j, drop = FALSE]

## S3 replacement method for class 'surveydata'
x[i, j] &lt;- value

## S3 replacement method for class 'surveydata'
x$name &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Extract_+3A_x">x</code></td>
<td>
<p>surveydata object</p>
</td></tr>
<tr><td><code id="Extract_+3A_i">i</code></td>
<td>
<p>row index</p>
</td></tr>
<tr><td><code id="Extract_+3A_j">j</code></td>
<td>
<p>column index</p>
</td></tr>
<tr><td><code id="Extract_+3A_drop">drop</code></td>
<td>
<p>logical. Passed to <code style="white-space: pre;">&#8288;[.data.frame&#8288;</code>. Note that the default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="Extract_+3A_value">value</code></td>
<td>
<p>New value</p>
</td></tr>
<tr><td><code id="Extract_+3A_name">name</code></td>
<td>
<p>Names of columns</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Extraction is similar to data frames, with three important exceptions:
</p>

<ul>
<li><p> The column argument <code>j</code> is evaluated using <code><a href="#topic+which.q">which.q()</a></code> and will return all columns where the column names match the <code><a href="#topic+pattern">pattern()</a></code>.
</p>
</li>
<li><p> The <code>drop</code> argument is <code>FALSE</code>. Thus the result will always be a surveydata object, even if only a single column is returned.
</p>
</li>
<li><p> All extraction methods retain the <code>pattern</code> and <code>varlabels</code> arguments.
</p>
</li></ul>



<h3>See Also</h3>

<p><a href="#topic+surveydata-package">surveydata-package</a>, <a href="#topic+varlabels">varlabels</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
names(membersurvey)
head(membersurvey["Q1"])
head(membersurvey[c("Q1", "Q2")])
head(membersurvey[membersurvey$Q2=="2009", c("Q1", "Q2")])

# The pattern is used to extract columns

pattern(membersurvey)

grep("Q20", names(membersurvey), value=TRUE)
head(membersurvey["Q20"])
head(membersurvey["Q20_other"])

</code></pre>

<hr>
<h2 id='fix_common_encoding_problems'>Fix common encoding problems when working with web imported data.</h2><span id='topic+fix_common_encoding_problems'></span>

<h3>Description</h3>

<p>This function tries to resolve typical encoding problems when importing web data on Windows.
Typical problems occur with pound and emdash (-), especially when these originated in MS-Word.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fix_common_encoding_problems(x, encoding = localeToCharset())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fix_common_encoding_problems_+3A_x">x</code></td>
<td>
<p>A character vector</p>
</td></tr>
<tr><td><code id="fix_common_encoding_problems_+3A_encoding">encoding</code></td>
<td>
<p>A character string describing the encoding of x.  Defaults to the current locale.  See also <code><a href="base.html#topic+iconvlist">iconvlist()</a></code></p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other Functions to clean data: 
<code><a href="#topic+encToInt">encToInt</a>()</code>,
<code><a href="#topic+fix_levels_01_spss">fix_levels_01_spss</a>()</code>,
<code><a href="#topic+has_dont_know">has_dont_know</a>()</code>,
<code><a href="#topic+intToEnc">intToEnc</a>()</code>,
<code><a href="#topic+leveltest">leveltest</a></code>,
<code><a href="#topic+remove_all_dont_know">remove_all_dont_know</a>()</code>,
<code><a href="#topic+remove_dont_know">remove_dont_know</a>()</code>
</p>

<hr>
<h2 id='fix_levels_01_spss'>Fix level formatting of all question with Yes/No type answers.</h2><span id='topic+fix_levels_01_spss'></span><span id='topic+fix_levels_01_r'></span><span id='topic+fix_levels_01'></span>

<h3>Description</h3>

<p>Fix level formatting of all question with Yes/No type answers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fix_levels_01_spss(dat)

fix_levels_01_r(dat)

fix_levels_01(dat, origin = c("R", "SPSS"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fix_levels_01_spss_+3A_dat">dat</code></td>
<td>
<p>surveydata object</p>
</td></tr>
<tr><td><code id="fix_levels_01_spss_+3A_origin">origin</code></td>
<td>
<p>Either <code>R</code> or <code>SPSS</code></p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other Functions to clean data: 
<code><a href="#topic+encToInt">encToInt</a>()</code>,
<code><a href="#topic+fix_common_encoding_problems">fix_common_encoding_problems</a>()</code>,
<code><a href="#topic+has_dont_know">has_dont_know</a>()</code>,
<code><a href="#topic+intToEnc">intToEnc</a>()</code>,
<code><a href="#topic+leveltest">leveltest</a></code>,
<code><a href="#topic+remove_all_dont_know">remove_all_dont_know</a>()</code>,
<code><a href="#topic+remove_dont_know">remove_dont_know</a>()</code>
</p>

<hr>
<h2 id='has_dont_know'>Tests whether levels contain &quot;Don't know&quot;.</h2><span id='topic+has_dont_know'></span>

<h3>Description</h3>

<p>Returns TRUE if x contains any instances of dk
</p>


<h3>Usage</h3>

<pre><code class='language-R'>has_dont_know(x, dk = "Don't Know")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="has_dont_know_+3A_x">x</code></td>
<td>
<p>Character vector or factor</p>
</td></tr>
<tr><td><code id="has_dont_know_+3A_dk">dk</code></td>
<td>
<p>Character vector, containing search terms, e.g. <code>c("Don't know", "Don't Know")</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE or FALSE
</p>


<h3>See Also</h3>

<p>Other Functions to clean data: 
<code><a href="#topic+encToInt">encToInt</a>()</code>,
<code><a href="#topic+fix_common_encoding_problems">fix_common_encoding_problems</a>()</code>,
<code><a href="#topic+fix_levels_01_spss">fix_levels_01_spss</a>()</code>,
<code><a href="#topic+intToEnc">intToEnc</a>()</code>,
<code><a href="#topic+leveltest">leveltest</a></code>,
<code><a href="#topic+remove_all_dont_know">remove_all_dont_know</a>()</code>,
<code><a href="#topic+remove_dont_know">remove_dont_know</a>()</code>
</p>

<hr>
<h2 id='hasDK'>Deprecated functions.</h2><span id='topic+hasDK'></span><span id='topic+removeDK'></span><span id='topic+removeAllDK'></span><span id='topic+leveltestSPSS'></span><span id='topic+leveltestR'></span><span id='topic+fixLevels01SPSS'></span><span id='topic+fixLevels01R'></span><span id='topic+fixLevels01'></span><span id='topic+qOrder'></span><span id='topic+lapplyNames'></span><span id='topic+fixCommonEncodingProblems'></span><span id='topic+qText'></span><span id='topic+qTextUnique'></span><span id='topic+qTextCommon'></span>

<h3>Description</h3>

<p>These functions have all been superseded with functions using <code>snake_case</code> function names.
</p>

<ul>
<li> <p><code>hasDK</code>: <code><a href="#topic+has_dont_know">has_dont_know()</a></code>
</p>
</li>
<li> <p><code>removeDK</code>: <code><a href="#topic+remove_dont_know">remove_dont_know()</a></code>
</p>
</li>
<li> <p><code>removeAllDK</code>: <code><a href="#topic+remove_all_dont_know">remove_all_dont_know()</a></code>
</p>
</li>
<li> <p><code>leveltestSPSS</code>: <code><a href="#topic+leveltest_spss">leveltest_spss()</a></code>
</p>
</li>
<li> <p><code>leveltestR</code>: <code><a href="#topic+leveltest_r">leveltest_r()</a></code>
</p>
</li>
<li> <p><code>fixLevels01SPSS</code>: <code><a href="#topic+fix_levels_01_spss">fix_levels_01_spss()</a></code>
</p>
</li>
<li> <p><code>fixLevels01R</code>: <code><a href="#topic+fix_levels_01_r">fix_levels_01_r()</a></code>
</p>
</li>
<li> <p><code>fixLevels01</code>: <code><a href="#topic+fix_levels_01">fix_levels_01()</a></code>
</p>
</li>
<li> <p><code>qOrder</code>: <code><a href="#topic+question_order">question_order()</a></code>
</p>
</li>
<li> <p><code>lapplyNames</code>: <code><a href="#topic+lapply_names">lapply_names()</a></code>
</p>
</li>
<li> <p><code>fixCommonEncodingProblems</code>: <code><a href="#topic+fix_common_encoding_problems">fix_common_encoding_problems()</a></code>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>hasDK(...)

removeDK(...)

removeAllDK(...)

leveltestSPSS(...)

leveltestR(...)

fixLevels01SPSS(...)

fixLevels01R(...)

fixLevels01(...)

qOrder(...)

lapplyNames(...)

fixCommonEncodingProblems(...)

qText(...)

qTextUnique(...)

qTextCommon(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hasDK_+3A_...">...</code></td>
<td>
<p>passed to replacement function</p>
</td></tr>
</table>

<hr>
<h2 id='intToEnc'>Converts an integer vector to a character vector.</h2><span id='topic+intToEnc'></span>

<h3>Description</h3>

<p>Conversion of integer vector to character vector.  The encoding of the character vector can be specified but defaults to the current locale.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>intToEnc(x, encoding = localeToCharset())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="intToEnc_+3A_x">x</code></td>
<td>
<p>Integer vector</p>
</td></tr>
<tr><td><code id="intToEnc_+3A_encoding">encoding</code></td>
<td>
<p>A character string describing the encoding of x.  Defaults to the current locale.  See also <code><a href="base.html#topic+iconvlist">iconvlist()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+iconv">iconv()</a></code>
</p>
<p>Other Functions to clean data: 
<code><a href="#topic+encToInt">encToInt</a>()</code>,
<code><a href="#topic+fix_common_encoding_problems">fix_common_encoding_problems</a>()</code>,
<code><a href="#topic+fix_levels_01_spss">fix_levels_01_spss</a>()</code>,
<code><a href="#topic+has_dont_know">has_dont_know</a>()</code>,
<code><a href="#topic+leveltest">leveltest</a></code>,
<code><a href="#topic+remove_all_dont_know">remove_all_dont_know</a>()</code>,
<code><a href="#topic+remove_dont_know">remove_dont_know</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>intToEnc(8212)
</code></pre>

<hr>
<h2 id='is.surveydata'>Tests whether an object is of class surveydata.</h2><span id='topic+is.surveydata'></span>

<h3>Description</h3>

<p>Tests whether an object is of class surveydata.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.surveydata(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.surveydata_+3A_x">x</code></td>
<td>
<p>Object to check for being of class surveydata</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="#topic+surveydata-package">surveydata-package</a>
</p>

<hr>
<h2 id='lapply_names'>Applies function only to named elements of a list.</h2><span id='topic+lapply_names'></span>

<h3>Description</h3>

<p>This is useful to clean only some columns in a list (or <code>data.frame</code> or <code>surveydata</code> object). This is a simple wrapper around <code><a href="base.html#topic+lapply">lapply()</a></code> where only the named elements are changed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lapply_names(x, names, FUN, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lapply_names_+3A_x">x</code></td>
<td>
<p>list</p>
</td></tr>
<tr><td><code id="lapply_names_+3A_names">names</code></td>
<td>
<p>character vector identifying which elements of the list to apply FUN</p>
</td></tr>
<tr><td><code id="lapply_names_+3A_fun">FUN</code></td>
<td>
<p>function to apply.</p>
</td></tr>
<tr><td><code id="lapply_names_+3A_...">...</code></td>
<td>
<p>additional arguments passed to <code>FUN</code></p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other Tools: 
<code><a href="#topic+question_order">question_order</a>()</code>
</p>

<hr>
<h2 id='leveltest'>Fix level formatting of all question with Yes/No type answers.</h2><span id='topic+leveltest'></span><span id='topic+leveltest_spss'></span><span id='topic+leveltest_r'></span>

<h3>Description</h3>

<p>Fix level formatting of all question with Yes/No type answers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>leveltest_spss(x)

leveltest_r(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="leveltest_+3A_x">x</code></td>
<td>
<p>surveydata object</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other Functions to clean data: 
<code><a href="#topic+encToInt">encToInt</a>()</code>,
<code><a href="#topic+fix_common_encoding_problems">fix_common_encoding_problems</a>()</code>,
<code><a href="#topic+fix_levels_01_spss">fix_levels_01_spss</a>()</code>,
<code><a href="#topic+has_dont_know">has_dont_know</a>()</code>,
<code><a href="#topic+intToEnc">intToEnc</a>()</code>,
<code><a href="#topic+remove_all_dont_know">remove_all_dont_know</a>()</code>,
<code><a href="#topic+remove_dont_know">remove_dont_know</a>()</code>
</p>

<hr>
<h2 id='membersurvey'>Data frame with survey data of member satisfaction survey.</h2><span id='topic+membersurvey'></span>

<h3>Description</h3>

<p>Data frame with survey data of member satisfaction survey.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>membersurvey
</code></pre>


<h3>Format</h3>

<p>data frame
</p>

<hr>
<h2 id='merge'>Merge surveydata objects.</h2><span id='topic+merge'></span><span id='topic+merge.surveydata'></span>

<h3>Description</h3>

<p>The base R merge will merge data but not all of the attributes.  This function also merges the variable.labels attribute.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'surveydata'
merge(x, y, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="merge_+3A_x">x</code></td>
<td>
<p>surveydata object</p>
</td></tr>
<tr><td><code id="merge_+3A_y">y</code></td>
<td>
<p>surveydata object</p>
</td></tr>
<tr><td><code id="merge_+3A_...">...</code></td>
<td>
<p>Other parameters passed to <code><a href="#topic+merge">merge()</a></code></p>
</td></tr>
</table>

<hr>
<h2 id='merge_varlabels'>Merges variable.labels attribute from two surveydata objects</h2><span id='topic+merge_varlabels'></span>

<h3>Description</h3>

<p>Merges variable labels from two data objects.  The labels from dat1 takes precedence.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>merge_varlabels(dat1, dat2, new_names = union(names(dat1), names(dat2)))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="merge_varlabels_+3A_dat1">dat1</code></td>
<td>
<p>surveydata object</p>
</td></tr>
<tr><td><code id="merge_varlabels_+3A_dat2">dat2</code></td>
<td>
<p>surveydata object</p>
</td></tr>
<tr><td><code id="merge_varlabels_+3A_new_names">new_names</code></td>
<td>
<p>A vector with names of the merged varlabels.  Defaults to the union of names of dat1 and dat2</p>
</td></tr>
</table>

<hr>
<h2 id='names+26lt+3B-.surveydata'>Updates names and variable.labels attribute of surveydata.</h2><span id='topic+names+3C-.surveydata'></span><span id='topic+names+3C-'></span>

<h3>Description</h3>

<p>Updates names and variable.labels attribute of surveydata.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 replacement method for class 'surveydata'
names(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="names+2B26lt+2B3B-.surveydata_+3A_x">x</code></td>
<td>
<p>surveydata object</p>
</td></tr>
<tr><td><code id="names+2B26lt+2B3B-.surveydata_+3A_value">value</code></td>
<td>
<p>New names</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+surveydata-package">surveydata-package()</a></code>, <code><a href="#topic+is.surveydata">is.surveydata()</a></code>
</p>

<hr>
<h2 id='pattern'>Returns and updates pattern attribute.</h2><span id='topic+pattern'></span><span id='topic+pattern+3C-'></span>

<h3>Description</h3>

<p>The pattern attribute contains information about the separator character used to name sub-questions in the data.  Survey software typically makes use of underscores to distinguish sub-questions in a grid of questions, e.g. &quot;Q4_1&quot;, &quot;Q4_2&quot;, &quot;Q4_3&quot;, &quot;Q4_other&quot;. The function <code><a href="#topic+pattern">pattern()</a></code> returns the <code>pattern</code> attribute, and <a href="#topic+pattern+3C-">pattern&lt;-</a> updates the attribute.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pattern(x)

pattern(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pattern_+3A_x">x</code></td>
<td>
<p>surveydata object</p>
</td></tr>
<tr><td><code id="pattern_+3A_value">value</code></td>
<td>
<p>New value</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+as.surveydata">as.surveydata()</a></code>, <code><a href="#topic+which.q">which.q()</a></code>
</p>
<p>Other Attribute functions: 
<code><a href="#topic+varlabels">varlabels</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Extract the pattern from membersurvey

oldptn &lt;- pattern(membersurvey)
oldptn

# The pattern is used to extract columns

names(membersurvey)
grep("Q20", names(membersurvey), value=TRUE)

head(membersurvey["Q20"])
head(membersurvey["Q20_other"])

# Define a new pattern

pattern(membersurvey) &lt;- list(sep="_", exclude="")
head(membersurvey["Q20"])

# Reset original pattern

pattern(membersurvey) &lt;- oldptn
rm(oldptn)
</code></pre>

<hr>
<h2 id='print_opentext'>Print open text questions.</h2><span id='topic+print_opentext'></span>

<h3>Description</h3>

<p>Print open text questions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>print_opentext(data, q, cat = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print_opentext_+3A_data">data</code></td>
<td>
<p>data</p>
</td></tr>
<tr><td><code id="print_opentext_+3A_q">q</code></td>
<td>
<p>Question number</p>
</td></tr>
<tr><td><code id="print_opentext_+3A_cat">cat</code></td>
<td>
<p>If TRUE, prints results using <code>cat()</code></p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other open text functions: 
<code><a href="#topic+as_opentext_datatable">as_opentext_datatable</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>print_opentext(membersurvey, "Q33")
</code></pre>

<hr>
<h2 id='question_order'>Changes vector to ordered factor, adding NA levels if applicable.</h2><span id='topic+question_order'></span>

<h3>Description</h3>

<p>Changes vector to ordered factor, adding NA levels if applicable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>question_order(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="question_order_+3A_x">x</code></td>
<td>
<p>character vector</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other Tools: 
<code><a href="#topic+lapply_names">lapply_names</a>()</code>
</p>

<hr>
<h2 id='question_text'>Returns question text.</h2><span id='topic+question_text'></span>

<h3>Description</h3>

<p>Given a question id, e.g. &quot;Q4&quot;, returns question text for this question. Note that this returns. The functions <code><a href="#topic+question_text_unique">question_text_unique()</a></code> and <code><a href="#topic+question_text_common">question_text_common()</a></code> returns the unique and common components of the question text.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>question_text(x, Q)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="question_text_+3A_x">x</code></td>
<td>
<p>A surveydata object</p>
</td></tr>
<tr><td><code id="question_text_+3A_q">Q</code></td>
<td>
<p>The question id, e.g. &quot;Q4&quot;. If not supplied, returns the text for all questions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character vector
</p>


<h3>See Also</h3>

<p>Other Question functions: 
<code><a href="#topic+question_text_common">question_text_common</a>()</code>,
<code><a href="#topic+question_text_unique">question_text_unique</a>()</code>,
<code><a href="#topic+questions">questions</a>()</code>,
<code><a href="#topic+split_common_unique">split_common_unique</a>()</code>,
<code><a href="#topic+which.q">which.q</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Basic operations on a surveydata object, illustrated with the example dataset membersurvey

class(membersurvey)

questions(membersurvey)

which.q(membersurvey, "Q1")
which.q(membersurvey, "Q3")
which.q(membersurvey, c("Q1", "Q3"))

question_text(membersurvey, "Q3")
question_text_unique(membersurvey, "Q3")
question_text_common(membersurvey, "Q3")

# Extracting columns from a surveydata object

head(membersurvey[, "Q1"])
head(membersurvey["Q1"])
head(membersurvey[, "Q3"])
head(membersurvey[, c("Q1", "Q3")])

# Note that the result is always a surveydata object, even if only one column is extracted

head(membersurvey[, "id"])
str(membersurvey[, "id"])

</code></pre>

<hr>
<h2 id='question_text_common'>Returns common element of question text.</h2><span id='topic+question_text_common'></span>

<h3>Description</h3>

<p>Given a question id, e.g. &quot;Q4&quot;, finds all sub-questions, e.g. &quot;Q4_1&quot;, &quot;Q4_2&quot;, etc,
and returns the question text that is common to each.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>question_text_common(x, Q)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="question_text_common_+3A_x">x</code></td>
<td>
<p>A surveydata object</p>
</td></tr>
<tr><td><code id="question_text_common_+3A_q">Q</code></td>
<td>
<p>The question id, e.g. &quot;Q4&quot;. If not supplied, returns the text for all questions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character vector
</p>


<h3>See Also</h3>

<p>Other Question functions: 
<code><a href="#topic+question_text_unique">question_text_unique</a>()</code>,
<code><a href="#topic+question_text">question_text</a>()</code>,
<code><a href="#topic+questions">questions</a>()</code>,
<code><a href="#topic+split_common_unique">split_common_unique</a>()</code>,
<code><a href="#topic+which.q">which.q</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Basic operations on a surveydata object, illustrated with the example dataset membersurvey

class(membersurvey)

questions(membersurvey)

which.q(membersurvey, "Q1")
which.q(membersurvey, "Q3")
which.q(membersurvey, c("Q1", "Q3"))

question_text(membersurvey, "Q3")
question_text_unique(membersurvey, "Q3")
question_text_common(membersurvey, "Q3")

# Extracting columns from a surveydata object

head(membersurvey[, "Q1"])
head(membersurvey["Q1"])
head(membersurvey[, "Q3"])
head(membersurvey[, c("Q1", "Q3")])

# Note that the result is always a surveydata object, even if only one column is extracted

head(membersurvey[, "id"])
str(membersurvey[, "id"])

</code></pre>

<hr>
<h2 id='question_text_unique'>Returns unique elements of question text.</h2><span id='topic+question_text_unique'></span>

<h3>Description</h3>

<p>Given a question id, e.g. &quot;Q4&quot;, finds all sub-questions, e.g. Q4_1, Q4_2, etc,
and returns the question text that is unique to each
</p>


<h3>Usage</h3>

<pre><code class='language-R'>question_text_unique(x, Q)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="question_text_unique_+3A_x">x</code></td>
<td>
<p>A surveydata object</p>
</td></tr>
<tr><td><code id="question_text_unique_+3A_q">Q</code></td>
<td>
<p>The question id, e.g. &quot;Q4&quot;. If not supplied, returns the text for all questions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character vector
</p>


<h3>See Also</h3>

<p>Other Question functions: 
<code><a href="#topic+question_text_common">question_text_common</a>()</code>,
<code><a href="#topic+question_text">question_text</a>()</code>,
<code><a href="#topic+questions">questions</a>()</code>,
<code><a href="#topic+split_common_unique">split_common_unique</a>()</code>,
<code><a href="#topic+which.q">which.q</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Basic operations on a surveydata object, illustrated with the example dataset membersurvey

class(membersurvey)

questions(membersurvey)

which.q(membersurvey, "Q1")
which.q(membersurvey, "Q3")
which.q(membersurvey, c("Q1", "Q3"))

question_text(membersurvey, "Q3")
question_text_unique(membersurvey, "Q3")
question_text_common(membersurvey, "Q3")

# Extracting columns from a surveydata object

head(membersurvey[, "Q1"])
head(membersurvey["Q1"])
head(membersurvey[, "Q3"])
head(membersurvey[, c("Q1", "Q3")])

# Note that the result is always a surveydata object, even if only one column is extracted

head(membersurvey[, "id"])
str(membersurvey[, "id"])

</code></pre>

<hr>
<h2 id='questions'>Returns a list of all the unique questions in the surveydata object.</h2><span id='topic+questions'></span>

<h3>Description</h3>

<p>In many survey systems, sub-questions take the form Q1_a, Q1_b, with the main question and sub-question separated by an underscore. This function conveniently returns all of the main questions in a <code><a href="#topic+surveydata">surveydata()</a></code> object. It does this by using the <code><a href="#topic+pattern">pattern()</a></code> attribute of the surveydata object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>questions(x, ptn = pattern(x))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="questions_+3A_x">x</code></td>
<td>
<p>Object to coerce to surveydata</p>
</td></tr>
<tr><td><code id="questions_+3A_ptn">ptn</code></td>
<td>
<p>A list with two elements, <code>sep</code> and <code>exclude</code>.  See <code><a href="#topic+pattern">pattern()</a></code> and <code><a href="#topic+which.q">which.q()</a></code> for more detail.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>numeric vector
</p>


<h3>See Also</h3>

<p>which.q
</p>
<p>Other Question functions: 
<code><a href="#topic+question_text_common">question_text_common</a>()</code>,
<code><a href="#topic+question_text_unique">question_text_unique</a>()</code>,
<code><a href="#topic+question_text">question_text</a>()</code>,
<code><a href="#topic+split_common_unique">split_common_unique</a>()</code>,
<code><a href="#topic+which.q">which.q</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Basic operations on a surveydata object, illustrated with the example dataset membersurvey

class(membersurvey)

questions(membersurvey)

which.q(membersurvey, "Q1")
which.q(membersurvey, "Q3")
which.q(membersurvey, c("Q1", "Q3"))

question_text(membersurvey, "Q3")
question_text_unique(membersurvey, "Q3")
question_text_common(membersurvey, "Q3")

# Extracting columns from a surveydata object

head(membersurvey[, "Q1"])
head(membersurvey["Q1"])
head(membersurvey[, "Q3"])
head(membersurvey[, c("Q1", "Q3")])

# Note that the result is always a surveydata object, even if only one column is extracted

head(membersurvey[, "id"])
str(membersurvey[, "id"])

</code></pre>

<hr>
<h2 id='remove_all_dont_know'>Removes &quot;Do not know&quot; and other similar words from factor levels in data frame.</h2><span id='topic+remove_all_dont_know'></span>

<h3>Description</h3>

<p>Removes &quot;Do not know&quot; and other similar words from factor levels in data frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove_all_dont_know(x, dk = NULL, message = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="remove_all_dont_know_+3A_x">x</code></td>
<td>
<p>List or data frame</p>
</td></tr>
<tr><td><code id="remove_all_dont_know_+3A_dk">dk</code></td>
<td>
<p>Character vector, containing search terms, e.g. <code>c("Do not know", "DK")</code>.  These terms will be replaced by <code>NA</code>. If <code>NULL</code>, defaults to <code>c("I don't know", "Don't Know", "Don't know", "Dont know" , "DK")</code></p>
</td></tr>
<tr><td><code id="remove_all_dont_know_+3A_message">message</code></td>
<td>
<p>If TRUE, displays message with the number of instances that were removed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame
</p>


<h3>See Also</h3>

<p><code><a href="#topic+hasDK">hasDK()</a></code> and <code><a href="#topic+removeDK">removeDK()</a></code>
</p>
<p>Other Functions to clean data: 
<code><a href="#topic+encToInt">encToInt</a>()</code>,
<code><a href="#topic+fix_common_encoding_problems">fix_common_encoding_problems</a>()</code>,
<code><a href="#topic+fix_levels_01_spss">fix_levels_01_spss</a>()</code>,
<code><a href="#topic+has_dont_know">has_dont_know</a>()</code>,
<code><a href="#topic+intToEnc">intToEnc</a>()</code>,
<code><a href="#topic+leveltest">leveltest</a></code>,
<code><a href="#topic+remove_dont_know">remove_dont_know</a>()</code>
</p>

<hr>
<h2 id='remove_dont_know'>Removes &quot;Don't know&quot; from levels and replaces with NA.</h2><span id='topic+remove_dont_know'></span>

<h3>Description</h3>

<p>Tests the levels of x contain any instances of &quot;Don't know&quot;.  If so, replaces these levels with <code>NA</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove_dont_know(x, dk = "Don't Know")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="remove_dont_know_+3A_x">x</code></td>
<td>
<p>Character vector or factor</p>
</td></tr>
<tr><td><code id="remove_dont_know_+3A_dk">dk</code></td>
<td>
<p>Character vector, containing search terms, e.g. <code>c("Don't know", "Don't Know")</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A factor with &quot;Dont know&quot; removed
</p>


<h3>See Also</h3>

<p>Other Functions to clean data: 
<code><a href="#topic+encToInt">encToInt</a>()</code>,
<code><a href="#topic+fix_common_encoding_problems">fix_common_encoding_problems</a>()</code>,
<code><a href="#topic+fix_levels_01_spss">fix_levels_01_spss</a>()</code>,
<code><a href="#topic+has_dont_know">has_dont_know</a>()</code>,
<code><a href="#topic+intToEnc">intToEnc</a>()</code>,
<code><a href="#topic+leveltest">leveltest</a></code>,
<code><a href="#topic+remove_all_dont_know">remove_all_dont_know</a>()</code>
</p>

<hr>
<h2 id='rm.attrs'>Removes pattern and variable.labels from attributes list.</h2><span id='topic+rm.attrs'></span>

<h3>Description</h3>

<p>Removes pattern and variable.labels from attributes list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rm.attrs(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rm.attrs_+3A_x">x</code></td>
<td>
<p>Surveydata object</p>
</td></tr>
</table>

<hr>
<h2 id='rm.pattern'>Removes pattern from attributes list.</h2><span id='topic+rm.pattern'></span>

<h3>Description</h3>

<p>Removes pattern from attributes list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rm.pattern(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rm.pattern_+3A_x">x</code></td>
<td>
<p>Surveydata object</p>
</td></tr>
</table>

<hr>
<h2 id='split_common_unique'>Get common and unique text in question based on regex pattern identification.</h2><span id='topic+split_common_unique'></span>

<h3>Description</h3>

<p>Get common and unique text in question based on regex pattern identification.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>split_common_unique(x, ptn = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="split_common_unique_+3A_x">x</code></td>
<td>
<p>A character vector</p>
</td></tr>
<tr><td><code id="split_common_unique_+3A_ptn">ptn</code></td>
<td>
<p>A <code><a href="base.html#topic+regex">regex()</a></code> pattern that defines how the string should be split into common and unique elements</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other Question functions: 
<code><a href="#topic+question_text_common">question_text_common</a>()</code>,
<code><a href="#topic+question_text_unique">question_text_unique</a>()</code>,
<code><a href="#topic+question_text">question_text</a>()</code>,
<code><a href="#topic+questions">questions</a>()</code>,
<code><a href="#topic+which.q">which.q</a>()</code>
</p>

<hr>
<h2 id='strCommonUnique'>Finds the common and unique elements in a character vector.</h2><span id='topic+strCommonUnique'></span>

<h3>Description</h3>

<p>Function takes a character string as input and find the common and
unique elements.  Assumes that the common element is at start of string.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>strCommonUnique(string)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="strCommonUnique_+3A_string">string</code></td>
<td>
<p>Character vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of common and unique strings
</p>


<h3>Examples</h3>

<pre><code class='language-R'>test &lt;- c("Q_1", "Q_2", "Q_3")
strCommonUnique(test)$common
strCommonUnique(test)$unique
</code></pre>

<hr>
<h2 id='survey_plot_question'>Plots single and  as multi-response questions.</h2><span id='topic+survey_plot_question'></span>

<h3>Description</h3>

<p>Plots single and  as multi-response questions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survey_plot_question(data, q)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="survey_plot_question_+3A_data">data</code></td>
<td>
<p>surveydata object</p>
</td></tr>
<tr><td><code id="survey_plot_question_+3A_q">q</code></td>
<td>
<p>Question</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other survey plotting functions: 
<code><a href="#topic+survey_plot_satisfaction">survey_plot_satisfaction</a>()</code>,
<code><a href="#topic+survey_plot_yes_no">survey_plot_yes_no</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>question_text(membersurvey)

survey_plot_question(membersurvey, "Q2")
survey_plot_yes_no(membersurvey, "Q2")
survey_plot_satisfaction(membersurvey, "Q14")

</code></pre>

<hr>
<h2 id='survey_plot_satisfaction'>Plot satisfaction questions.</h2><span id='topic+survey_plot_satisfaction'></span>

<h3>Description</h3>

<p>Plot satisfaction questions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survey_plot_satisfaction(data, q, fun = c("net", "top3", "top2"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="survey_plot_satisfaction_+3A_data">data</code></td>
<td>
<p>surveydata object</p>
</td></tr>
<tr><td><code id="survey_plot_satisfaction_+3A_q">q</code></td>
<td>
<p>Question</p>
</td></tr>
<tr><td><code id="survey_plot_satisfaction_+3A_fun">fun</code></td>
<td>
<p>Aggregation function, one of <code>net</code> (compute net satisfaction score), <code>top3</code> (compute top 3 box score) and <code>top2</code> (compute top 2 box score)</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other survey plotting functions: 
<code><a href="#topic+survey_plot_question">survey_plot_question</a>()</code>,
<code><a href="#topic+survey_plot_yes_no">survey_plot_yes_no</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>question_text(membersurvey)

survey_plot_question(membersurvey, "Q2")
survey_plot_yes_no(membersurvey, "Q2")
survey_plot_satisfaction(membersurvey, "Q14")

</code></pre>

<hr>
<h2 id='survey_plot_title'>Construct plot title from the question text, wrapping at the desired width.</h2><span id='topic+survey_plot_title'></span>

<h3>Description</h3>

<p>This creates a plot title using <code style="white-space: pre;">&#8288;[ggplot2::ggtitle()]&#8288;</code>. The main title is string wrapped, and the subtitle is the number of observations in the data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survey_plot_title(data, q, width = 50)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="survey_plot_title_+3A_data">data</code></td>
<td>
<p>surveydata object</p>
</td></tr>
<tr><td><code id="survey_plot_title_+3A_q">q</code></td>
<td>
<p>Question</p>
</td></tr>
<tr><td><code id="survey_plot_title_+3A_width">width</code></td>
<td>
<p>Passed to <code><a href="base.html#topic+strwrap">strwrap()</a></code></p>
</td></tr>
</table>

<hr>
<h2 id='survey_plot_yes_no'>Plot data in yes/no format.</h2><span id='topic+survey_plot_yes_no'></span>

<h3>Description</h3>

<p>Plot data in yes/no format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survey_plot_yes_no(data, q)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="survey_plot_yes_no_+3A_data">data</code></td>
<td>
<p>surveydata object</p>
</td></tr>
<tr><td><code id="survey_plot_yes_no_+3A_q">q</code></td>
<td>
<p>Question</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other survey plotting functions: 
<code><a href="#topic+survey_plot_question">survey_plot_question</a>()</code>,
<code><a href="#topic+survey_plot_satisfaction">survey_plot_satisfaction</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>question_text(membersurvey)

survey_plot_question(membersurvey, "Q2")
survey_plot_yes_no(membersurvey, "Q2")
survey_plot_satisfaction(membersurvey, "Q14")

</code></pre>

<hr>
<h2 id='varlabels'>Returns and updates variable.labels attribute of surveydata object.</h2><span id='topic+varlabels'></span><span id='topic+varlabels+3C-'></span>

<h3>Description</h3>

<p>In a surveydata object, the <code>variable.labels</code> attribute store metadata about the original question text (see <code><a href="foreign.html#topic+read.spss">foreign::read.spss()</a></code> for details).  The function <code>varlabels()</code> returns the <code>variable.labels</code> attribute of data, and <code>varlabels(x) &lt;- value</code> updates this attribute.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>varlabels(x)

varlabels(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="varlabels_+3A_x">x</code></td>
<td>
<p>surveydata object</p>
</td></tr>
<tr><td><code id="varlabels_+3A_value">value</code></td>
<td>
<p>New value</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In a surveydata object, the <code>varlabels</code> attribute is a named character vector, where the names correspond to the names of the the columns in
</p>


<h3>See Also</h3>

<p><a href="#topic+surveydata-package">surveydata-package</a>
</p>
<p>Other Attribute functions: 
<code><a href="#topic+pattern">pattern</a>()</code>
</p>
<p>Other Attribute functions: 
<code><a href="#topic+pattern">pattern</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Extract the variable labels from membersurvey

ms &lt;- membersurvey[, c("id", "Q1", "Q2")]

str(ms)
varlabels(ms)
varlabels(ms)["Q2"]

# Assign a new value to the text of question 2

varlabels(ms)["Q2"] &lt;- "When did you join?"
varlabels(ms)
str(ms["Q2"])

</code></pre>

<hr>
<h2 id='which.q'>Identifies the columns indices corresponding to a specific question.</h2><span id='topic+which.q'></span>

<h3>Description</h3>

<p>In many survey systems, sub-questions take the form &quot;Q1_a&quot;, &quot;Q1_b&quot;, with the main question and sub-question separated by an underscore. This function conveniently returns column index of matches found for a question id in a <a href="#topic+surveydata">surveydata</a> object. It does this by using the <a href="#topic+pattern">pattern</a> attribute of the <code>surveydata</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>which.q(x, Q, ptn = pattern(x))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="which.q_+3A_x">x</code></td>
<td>
<p>Object to coerce to surveydata</p>
</td></tr>
<tr><td><code id="which.q_+3A_q">Q</code></td>
<td>
<p>Character string with question number, e.g. &quot;Q2&quot;</p>
</td></tr>
<tr><td><code id="which.q_+3A_ptn">ptn</code></td>
<td>
<p>A list with two elements, <code>sep</code> and <code>exclude</code>.  See <code><a href="#topic+pattern">pattern()</a></code> and <code><a href="#topic+which.q">which.q()</a></code> for more detail.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+questions">questions()</a></code> to return all questions matching the <code><a href="#topic+pattern">pattern()</a></code>
</p>
<p>Other Question functions: 
<code><a href="#topic+question_text_common">question_text_common</a>()</code>,
<code><a href="#topic+question_text_unique">question_text_unique</a>()</code>,
<code><a href="#topic+question_text">question_text</a>()</code>,
<code><a href="#topic+questions">questions</a>()</code>,
<code><a href="#topic+split_common_unique">split_common_unique</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Basic operations on a surveydata object, illustrated with the example dataset membersurvey

class(membersurvey)

questions(membersurvey)

which.q(membersurvey, "Q1")
which.q(membersurvey, "Q3")
which.q(membersurvey, c("Q1", "Q3"))

question_text(membersurvey, "Q3")
question_text_unique(membersurvey, "Q3")
question_text_common(membersurvey, "Q3")

# Extracting columns from a surveydata object

head(membersurvey[, "Q1"])
head(membersurvey["Q1"])
head(membersurvey[, "Q3"])
head(membersurvey[, c("Q1", "Q3")])

# Note that the result is always a surveydata object, even if only one column is extracted

head(membersurvey[, "id"])
str(membersurvey[, "id"])

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
