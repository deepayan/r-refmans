<!DOCTYPE html><html lang="en"><head><title>Help for package picohdr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {picohdr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#picohdr-package'><p>picohdr: Read, Write and Manipulate High Dynamic Range Images</p></a></li>
<li><a href='#adj_clamp'><p>Clamp values outside the specified range</p></a></li>
<li><a href='#adj_gamma'><p>Adjust gamma</p></a></li>
<li><a href='#adj_infinite'><p>Replace infinite values with the minimum/maximum of the finite values</p></a></li>
<li><a href='#adj_rescale'><p>Linearly rescale values to lie between the given limits</p></a></li>
<li><a href='#adj_shift_negatives_global'><p>Shift all values such that the minimum of the array is 0</p></a></li>
<li><a href='#adj_shift_negatives_local'><p>Shift all values in a plane such that the minimum in every plane is 0</p></a></li>
<li><a href='#array_to_df'><p>Convert array to a linear data.frame. Preserves array names if present.</p></a></li>
<li><a href='#exr_attrs'><p>Helper function to create attributes for <code>write_exr()</code></p></a></li>
<li><a href='#exr_info'><p>Extract the metadata from an EXR file</p></a></li>
<li><a href='#exr_type'><p>Functions for creating valid EXR type objects</p></a></li>
<li><a href='#plot.array'><p>Plot method for matrices and arrays</p></a></li>
<li><a href='#print.exr_type'><p>Print 'exr_type' objects</p></a></li>
<li><a href='#read_exr'><p>Read an EXR image</p></a></li>
<li><a href='#read_pfm'><p>Read PFM image</p></a></li>
<li><a href='#tm_reinhard'><p>Reinhard's global tone mapping</p></a></li>
<li><a href='#write_exr'><p>Write a numeric array as an EXR image</p></a></li>
<li><a href='#write_pfm'><p>Write a numeric array as PFM</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Read, Write and Manipulate High Dynamic Range Images</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Mike Cheng &lt;mikefc@coolbutuseless.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>High Dynamic Range (HDR) images support a large range in luminosity
    between the lightest and darkest regions of an image.  To capture this range,
    data in HDR images is often stored as floating point numbers and in formats
    that capture more data and channels than standard image types.  This package supports
    reading and writing two types of HDR images; PFM (Portable Float Map) 
    and OpenEXR images. HDR images can be converted to lower
    dynamic ranges (for viewing) using tone-mapping.  A number of
    tone-mapping algorithms are included which are based on 
    Reinhard (2002) "Photographic tone reproduction for digital images" 
    &lt;<a href="https://doi.org/10.1145%2F566654.566575">doi:10.1145/566654.566575</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>ctypesio</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, ggplot2, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Copyright:</td>
<td>The included images in the 'inst/image' directory were
created by the package author (Mike Cheng) and are licensed
under CC0 1.0. See 'COPYRIGHTS' file for more details.</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/coolbutuseless/picohdr">https://github.com/coolbutuseless/picohdr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/coolbutuseless/picohdr/issues">https://github.com/coolbutuseless/picohdr/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-10-25 07:25:58 UTC; mike</td>
</tr>
<tr>
<td>Author:</td>
<td>Mike Cheng [aut, cre, cph]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-10-28 12:00:08 UTC</td>
</tr>
</table>
<hr>
<h2 id='picohdr-package'>picohdr: Read, Write and Manipulate High Dynamic Range Images</h2><span id='topic+picohdr'></span><span id='topic+picohdr-package'></span>

<h3>Description</h3>

<p>High Dynamic Range (HDR) images support a large range in luminosity between the lightest and darkest regions of an image. To capture this range, data in HDR images is often stored as floating point numbers and in formats that capture more data and channels than standard image types. This package supports reading and writing two types of HDR images; PFM (Portable Float Map) and OpenEXR images. HDR images can be converted to lower dynamic ranges (for viewing) using tone-mapping. A number of tone-mapping algorithms are included which are based on Reinhard (2002) &quot;Photographic tone reproduction for digital images&quot; <a href="https://doi.org/10.1145/566654.566575">doi:10.1145/566654.566575</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Mike Cheng <a href="mailto:mikefc@coolbutuseless.com">mikefc@coolbutuseless.com</a> [copyright holder]
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/coolbutuseless/picohdr">https://github.com/coolbutuseless/picohdr</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/coolbutuseless/picohdr/issues">https://github.com/coolbutuseless/picohdr/issues</a>
</p>
</li></ul>


<hr>
<h2 id='adj_clamp'>Clamp values outside the specified range</h2><span id='topic+adj_clamp'></span>

<h3>Description</h3>

<p>Clamp values outside the specified range
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adj_clamp(arr, lo = -Inf, hi = Inf)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="adj_clamp_+3A_arr">arr</code></td>
<td>
<p>array or matrix</p>
</td></tr>
<tr><td><code id="adj_clamp_+3A_lo">lo</code></td>
<td>
<p>low value.  Values lower than this will be replaced with this value.
Default: -Inf</p>
</td></tr>
<tr><td><code id="adj_clamp_+3A_hi">hi</code></td>
<td>
<p>Values higher than this will be replaced with this value. Default: Inf</p>
</td></tr>
</table>


<h3>Value</h3>

<p>adjusted array
</p>


<h3>See Also</h3>

<p>Other array adjustment functions: 
<code><a href="#topic+adj_gamma">adj_gamma</a>()</code>,
<code><a href="#topic+adj_infinite">adj_infinite</a>()</code>,
<code><a href="#topic+adj_rescale">adj_rescale</a>()</code>,
<code><a href="#topic+adj_shift_negatives_global">adj_shift_negatives_global</a>()</code>,
<code><a href="#topic+adj_shift_negatives_local">adj_shift_negatives_local</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>arr &lt;- array(1:12, c(4, 3, 1))
arr
adj_clamp(arr, 10, 20)
</code></pre>

<hr>
<h2 id='adj_gamma'>Adjust gamma</h2><span id='topic+adj_gamma'></span>

<h3>Description</h3>

<p>Adjust gamma
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adj_gamma(arr, gamma = 1/2.2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="adj_gamma_+3A_arr">arr</code></td>
<td>
<p>array or matrix</p>
</td></tr>
<tr><td><code id="adj_gamma_+3A_gamma">gamma</code></td>
<td>
<p>gamma correction factor. Default: 1/2.2</p>
</td></tr>
</table>


<h3>Value</h3>

<p>adjusted array
</p>


<h3>See Also</h3>

<p>Other array adjustment functions: 
<code><a href="#topic+adj_clamp">adj_clamp</a>()</code>,
<code><a href="#topic+adj_infinite">adj_infinite</a>()</code>,
<code><a href="#topic+adj_rescale">adj_rescale</a>()</code>,
<code><a href="#topic+adj_shift_negatives_global">adj_shift_negatives_global</a>()</code>,
<code><a href="#topic+adj_shift_negatives_local">adj_shift_negatives_local</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>arr &lt;- array(1:12, c(4, 3, 1))
arr
adj_gamma(arr)
</code></pre>

<hr>
<h2 id='adj_infinite'>Replace infinite values with the minimum/maximum of the finite values</h2><span id='topic+adj_infinite'></span>

<h3>Description</h3>

<p>Replace infinite values with the minimum/maximum of the finite values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adj_infinite(arr)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="adj_infinite_+3A_arr">arr</code></td>
<td>
<p>array or matrix</p>
</td></tr>
</table>


<h3>Value</h3>

<p>adjusted array
</p>


<h3>See Also</h3>

<p>Other array adjustment functions: 
<code><a href="#topic+adj_clamp">adj_clamp</a>()</code>,
<code><a href="#topic+adj_gamma">adj_gamma</a>()</code>,
<code><a href="#topic+adj_rescale">adj_rescale</a>()</code>,
<code><a href="#topic+adj_shift_negatives_global">adj_shift_negatives_global</a>()</code>,
<code><a href="#topic+adj_shift_negatives_local">adj_shift_negatives_local</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>arr &lt;- array(c(-Inf, Inf, 1:10), c(4, 3, 1))
arr
adj_infinite(arr)
</code></pre>

<hr>
<h2 id='adj_rescale'>Linearly rescale values to lie between the given limits</h2><span id='topic+adj_rescale'></span>

<h3>Description</h3>

<p>Infinite values will be clamped to the limits
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adj_rescale(arr, lo, hi)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="adj_rescale_+3A_arr">arr</code></td>
<td>
<p>array or matrix</p>
</td></tr>
<tr><td><code id="adj_rescale_+3A_lo">lo</code>, <code id="adj_rescale_+3A_hi">hi</code></td>
<td>
<p>limits</p>
</td></tr>
</table>


<h3>Value</h3>

<p>adjusted array
</p>


<h3>See Also</h3>

<p>Other array adjustment functions: 
<code><a href="#topic+adj_clamp">adj_clamp</a>()</code>,
<code><a href="#topic+adj_gamma">adj_gamma</a>()</code>,
<code><a href="#topic+adj_infinite">adj_infinite</a>()</code>,
<code><a href="#topic+adj_shift_negatives_global">adj_shift_negatives_global</a>()</code>,
<code><a href="#topic+adj_shift_negatives_local">adj_shift_negatives_local</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>arr &lt;- array(1:24, c(4, 3, 2))
arr
adj_rescale(arr, 0, 1)
</code></pre>

<hr>
<h2 id='adj_shift_negatives_global'>Shift all values such that the minimum of the array is 0</h2><span id='topic+adj_shift_negatives_global'></span>

<h3>Description</h3>

<p>Shift all values such that the minimum of the array is 0
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adj_shift_negatives_global(arr)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="adj_shift_negatives_global_+3A_arr">arr</code></td>
<td>
<p>array or matrix</p>
</td></tr>
</table>


<h3>Value</h3>

<p>adjusted array
</p>


<h3>See Also</h3>

<p>Other array adjustment functions: 
<code><a href="#topic+adj_clamp">adj_clamp</a>()</code>,
<code><a href="#topic+adj_gamma">adj_gamma</a>()</code>,
<code><a href="#topic+adj_infinite">adj_infinite</a>()</code>,
<code><a href="#topic+adj_rescale">adj_rescale</a>()</code>,
<code><a href="#topic+adj_shift_negatives_local">adj_shift_negatives_local</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>arr &lt;- array(c(-5, 1:23), c(4, 3, 2))
arr
adj_shift_negatives_global(arr)
</code></pre>

<hr>
<h2 id='adj_shift_negatives_local'>Shift all values in a plane such that the minimum in every plane is 0</h2><span id='topic+adj_shift_negatives_local'></span>

<h3>Description</h3>

<p>Shift all values in a plane such that the minimum in every plane is 0
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adj_shift_negatives_local(arr)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="adj_shift_negatives_local_+3A_arr">arr</code></td>
<td>
<p>array or matrix</p>
</td></tr>
</table>


<h3>Value</h3>

<p>adjusted array
</p>


<h3>See Also</h3>

<p>Other array adjustment functions: 
<code><a href="#topic+adj_clamp">adj_clamp</a>()</code>,
<code><a href="#topic+adj_gamma">adj_gamma</a>()</code>,
<code><a href="#topic+adj_infinite">adj_infinite</a>()</code>,
<code><a href="#topic+adj_rescale">adj_rescale</a>()</code>,
<code><a href="#topic+adj_shift_negatives_global">adj_shift_negatives_global</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>arr &lt;- array(c(-5, 1:23), c(4, 3, 2))
arr
adj_shift_negatives_local(arr)
</code></pre>

<hr>
<h2 id='array_to_df'>Convert array to a linear data.frame. Preserves array names if present.</h2><span id='topic+array_to_df'></span>

<h3>Description</h3>

<p>This conversion is useful when preparing the data to summarise with
<code>ggplot</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>array_to_df(arr)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="array_to_df_+3A_arr">arr</code></td>
<td>
<p>array</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame with 'x', 'y', 'z', 'channel' and 'value.'  'channel' will 
be the channel name if found, otherwise it is equivalent to 'z'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>arr &lt;- array(1:24, dim = c(4, 3, 2))
array_to_df(arr)
</code></pre>

<hr>
<h2 id='exr_attrs'>Helper function to create attributes for <code><a href="#topic+write_exr">write_exr</a>()</code></h2><span id='topic+exr_attrs'></span>

<h3>Description</h3>

<p>The EXR file specification requires particular types to define the 
metadata for the image.  This function helps define these metadata
attributes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exr_attrs(
  channels = NULL,
  compression = NULL,
  dataWindow = NULL,
  displayWindow = NULL,
  lineOrder = NULL,
  pixelAspectRatio = NULL,
  screenWindowCenter = NULL,
  screenWindowWidth = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="exr_attrs_+3A_channels">channels</code></td>
<td>
<p><code>[exr_type$chlist()]</code> data.frame of channel
information with columns name [string], type ['half', 'float', 'uint'],
pLinear [0, 1], xSampling [0, 1], ySampling [0, 1]</p>
</td></tr>
<tr><td><code id="exr_attrs_+3A_compression">compression</code></td>
<td>
<p><code>[exr_type$compression()]</code> 'NONE' or 'ZIP'</p>
</td></tr>
<tr><td><code id="exr_attrs_+3A_datawindow">dataWindow</code></td>
<td>
<p><code>[exr_type$box2i()]</code> xmin, ymin, xmax, ymax
of data. Default: image size c(0, 0, w-1, h-1)</p>
</td></tr>
<tr><td><code id="exr_attrs_+3A_displaywindow">displayWindow</code></td>
<td>
<p><code>[exr_type$box2i()]</code> xmin, ymin, xmax, ymax
of display. Default: image size c(0, 0, w-1, h-1)</p>
</td></tr>
<tr><td><code id="exr_attrs_+3A_lineorder">lineOrder</code></td>
<td>
<p><code>[exr_type$lineOrder()]</code> Line ordering. One of
'increasing', 'decreasing' or 'random'.  Default: 'increasing'</p>
</td></tr>
<tr><td><code id="exr_attrs_+3A_pixelaspectratio">pixelAspectRatio</code></td>
<td>
<p><code>[exr_type$float()]</code>. Default: 1.0</p>
</td></tr>
<tr><td><code id="exr_attrs_+3A_screenwindowcenter">screenWindowCenter</code></td>
<td>
<p><code>[exr_type$v2f()]</code>. Default: c(0.0, 0.0)</p>
</td></tr>
<tr><td><code id="exr_attrs_+3A_screenwindowwidth">screenWindowWidth</code></td>
<td>
<p><code>[exr_type$float()]</code>. Default: 1.0</p>
</td></tr>
<tr><td><code id="exr_attrs_+3A_...">...</code></td>
<td>
<p>Other named parameters. value must be of class <code>exr_type</code>
e.g. <code>myLabel = exr_type$string("potpourri")</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In the majority of cases for basic image output, there is no need to specify
anything with this function.  <code><a href="#topic+write_exr">write_exr</a>()</code> will create mandatory 
attributes required for image output.
</p>
<p>Note that all values must be an object with class <code>exr_type</code>.  To 
create these types, use <code>exr_type$&lt;TYPE&gt;(...)</code>.
</p>


<h3>Value</h3>

<p>named list of attributes for writing EXR
</p>


<h3>Examples</h3>

<pre><code class='language-R'>exr_attrs(compression = exr_type$compression("ZIP"), 
          name        = exr_type$string("Render 032"))
</code></pre>

<hr>
<h2 id='exr_info'>Extract the metadata from an EXR file</h2><span id='topic+exr_info'></span>

<h3>Description</h3>

<p>This will extract attributes from any of EXR file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exr_info(filename, verbosity = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="exr_info_+3A_filename">filename</code></td>
<td>
<p>EXR filename or connection</p>
</td></tr>
<tr><td><code id="exr_info_+3A_verbosity">verbosity</code></td>
<td>
<p>verbosity. Default: 0</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Named list of image attributes
</p>


<h3>Examples</h3>

<pre><code class='language-R'>filename &lt;- system.file("image/rstats.exr", package = "picohdr")
exr_info(filename)
</code></pre>

<hr>
<h2 id='exr_type'>Functions for creating valid EXR type objects</h2><span id='topic+exr_type'></span>

<h3>Description</h3>

<p>This is a list of functions for creating EXR objects of a particular
EXR type.  Each function does checks for argument validity and calculates
size information required for EXR output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exr_type
</code></pre>


<h3>Format</h3>

<p>An object of class <code>list</code> of length 23.
</p>


<h3>Details</h3>

<p>Refer to official OpenEXR documentation
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create a v2f type
exr_type$v2f(c(12.1, 2.3))

# Create an attribute
exr_attrs(copyright = exr_type$string("mike"))
</code></pre>

<hr>
<h2 id='plot.array'>Plot method for matrices and arrays</h2><span id='topic+plot.array'></span>

<h3>Description</h3>

<p>Plot method for matrices and arrays
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'array'
plot(x, interpolate = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.array_+3A_x">x</code></td>
<td>
<p>matrix or array</p>
</td></tr>
<tr><td><code id="plot.array_+3A_interpolate">interpolate</code></td>
<td>
<p>Default: TRUE</p>
</td></tr>
<tr><td><code id="plot.array_+3A_...">...</code></td>
<td>
<p>other arguments passed to plot()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
filename &lt;- system.file("image/rstats.pfm.bz2", package = "picohdr")
image &lt;- read_pfm(filename)
image &lt;- adj_gamma(image)
plot(image)

</code></pre>

<hr>
<h2 id='print.exr_type'>Print 'exr_type' objects</h2><span id='topic+print.exr_type'></span>

<h3>Description</h3>

<p>Print 'exr_type' objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'exr_type'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.exr_type_+3A_x">x</code></td>
<td>
<p>exr_type object</p>
</td></tr>
<tr><td><code id="print.exr_type_+3A_...">...</code></td>
<td>
<p>other arguments passed on to NextMethod</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>bbox &lt;- exr_type$box2i(0, 0, 1, 1)
print(bbox)
</code></pre>

<hr>
<h2 id='read_exr'>Read an EXR image</h2><span id='topic+read_exr'></span>

<h3>Description</h3>

<p>Currently only single-part scanline images are supported (where the compression
is one of NONE, ZIP or ZIPS).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_exr(filename, verbosity = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_exr_+3A_filename">filename</code></td>
<td>
<p>EXR filename or connection</p>
</td></tr>
<tr><td><code id="read_exr_+3A_verbosity">verbosity</code></td>
<td>
<p>Level of debugging output. Default: 0 (no debugging output)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Numeric array with names along the third dimension.  Each plane in the
array corresponds to a channel in the EXR.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>filename &lt;- system.file("image/rstats.exr", package = "picohdr")
images &lt;- read_exr(filename)
dimnames(images)[[3]]

# Naively adjust one of the images for display
im &lt;- adj_rescale(images[, , 'dzdy'], lo = 0, hi = 1)
plot(im)
</code></pre>

<hr>
<h2 id='read_pfm'>Read PFM image</h2><span id='topic+read_pfm'></span>

<h3>Description</h3>

<p>Read PFM image
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_pfm(filename)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_pfm_+3A_filename">filename</code></td>
<td>
<p>PFM filename or connection object. If filename ends with 
'xz', 'bz2' or 'gz' suffix then it will be uncompressed automatically.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If input PFM file is grayscale, a 2D numeric array is returned.
If PFM file represents RGB color values, a 3D numeric array is returned.
</p>


<h3>See Also</h3>

<p>Other PFM functions: 
<code><a href="#topic+write_pfm">write_pfm</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>file &lt;- system.file("image/rstats.pfm.bz2", package = "picohdr")
arr &lt;- read_pfm(file)
arr[1:5, 1:5, ]

# Tone-map the image, gamma correct and plot
arr &lt;- tm_reinhard_basic(arr)
arr &lt;- adj_gamma(arr)
plot(arr)

</code></pre>

<hr>
<h2 id='tm_reinhard'>Reinhard's global tone mapping</h2><span id='topic+tm_reinhard'></span><span id='topic+tm_reinhard_basic'></span><span id='topic+tm_reinhard_variant'></span>

<h3>Description</h3>

<p>Tone mapping is a method for adapting an HDR image for display on a
low dynamic range device.  There are three included variants of Reinhard's global
tone mapping operator.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tm_reinhard(arr)

tm_reinhard_basic(arr)

tm_reinhard_variant(arr)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tm_reinhard_+3A_arr">arr</code></td>
<td>
<p>array or matrix</p>
</td></tr>
</table>


<h3>Details</h3>


<dl>
<dt><code>tm_reinhard()</code></dt><dd><p>[RGB] Reinhard's operator with a correction
for the maximum luminance</p>
</dd>
<dt><code>tm_reinhard_basic()</code></dt><dd><p>[RGB images] Reinhard's operator applied
equally to all colour channels</p>
</dd>
<dt><code>tm_reinhard_variant()</code></dt><dd><p>[RGB or Gray images] A combination of
the above two methods</p>
</dd>
</dl>

<p>These functions are based on Reinhard (2002) 
&quot;Photographic tone reproduction for digital images&quot;
</p>


<h3>Value</h3>

<p>New array with adjusted color values
</p>


<h3>Examples</h3>

<pre><code class='language-R'>filename &lt;- system.file("image", "rstats.pfm.bz2", package = "picohdr")
image &lt;- read_pfm(filename)
image &lt;- tm_reinhard_basic(image)
image &lt;- adj_gamma(image)
plot(image)
</code></pre>

<hr>
<h2 id='write_exr'>Write a numeric array as an EXR image</h2><span id='topic+write_exr'></span>

<h3>Description</h3>

<p>Write a numeric array as an EXR image
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_exr(
  arr,
  filename,
  pixel_type = c("half", "float", "uint"),
  channel_names = NULL,
  attrs = exr_attrs(),
  verbosity = 0
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write_exr_+3A_arr">arr</code></td>
<td>
<p>array representing image</p>
</td></tr>
<tr><td><code id="write_exr_+3A_filename">filename</code></td>
<td>
<p>filename</p>
</td></tr>
<tr><td><code id="write_exr_+3A_pixel_type">pixel_type</code></td>
<td>
<p>one of 'half', 'float' or 'double'.  Default: 'half'</p>
</td></tr>
<tr><td><code id="write_exr_+3A_channel_names">channel_names</code></td>
<td>
<p>character vector. names of each plane in the array. 
If <code>NULL</code> then channel names are extracted from the array 
with <code>dimnames(arr)[[3]]</code>.  If no names are set on the array, 
then channel names defaults to &quot;Y&quot;, &quot;RGB&quot; and 
&quot;RGBA&quot; for 1, 3, and 4 plane arrays respectively.  For 
all other array sizes, channel names allocated alphabetically from
'A' to 'Z'</p>
</td></tr>
<tr><td><code id="write_exr_+3A_attrs">attrs</code></td>
<td>
<p>EXR attributes for image. Use <code><a href="#topic+exr_attrs">exr_attrs</a>()</code></p>
</td></tr>
<tr><td><code id="write_exr_+3A_verbosity">verbosity</code></td>
<td>
<p>verbosity. default: 0</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>orig_file &lt;- system.file("image", "rstats.pfm.bz2", package = "picohdr")
arr &lt;- read_pfm(orig_file)
exr_file &lt;- tempfile(fileext = ".exr")
write_exr(arr, exr_file)
</code></pre>

<hr>
<h2 id='write_pfm'>Write a numeric array as PFM</h2><span id='topic+write_pfm'></span>

<h3>Description</h3>

<p>Write a numeric array as PFM
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_pfm(arr, filename, endian = "little")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write_pfm_+3A_arr">arr</code></td>
<td>
<p>numeric matrix or array (with 3 planes)</p>
</td></tr>
<tr><td><code id="write_pfm_+3A_filename">filename</code></td>
<td>
<p>filename or connection object. If filename ends with &quot;.xz&quot;, '.bz2' or
'.gz', then it will be automatically compressed.</p>
</td></tr>
<tr><td><code id="write_pfm_+3A_endian">endian</code></td>
<td>
<p>One of 'little' or 'big'. Default: 'little'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None.
</p>


<h3>See Also</h3>

<p>Other PFM functions: 
<code><a href="#topic+read_pfm">read_pfm</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>arr &lt;- array(runif(10 * 30 * 3), dim = c(10, 30, 3))
write_pfm(arr, tempfile())
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
