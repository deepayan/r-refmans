<!DOCTYPE html><html><head><title>Help for package convey</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {convey}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#contrastinf'><p>Generalized linearization of a smooth function of survey statistics</p></a></li>
<li><a href='#convey_prep'><p>prepare svydesign and svyrep.design objects for the convey package</p></a></li>
<li><a href='#densfun'><p>Estimate the derivative of the cdf function using kernel estimator</p></a></li>
<li><a href='#h_fun'><p>Computes the bandwidth needed to compute the derivative of the cdf function</p></a></li>
<li><a href='#icdf'><p>Linearization of the cumulative distribution function (cdf) of a variable</p></a></li>
<li><a href='#svyarpr'><p>At-risk-of-poverty rate</p></a></li>
<li><a href='#svyarpt'><p>At-risk-of-poverty threshold</p></a></li>
<li><a href='#svyatk'><p>Atkinson index</p></a></li>
<li><a href='#svyfgt'><p>FGT measure of poverty</p></a></li>
<li><a href='#svyfgtdec'><p>FGT indices decomposition</p></a></li>
<li><a href='#svygei'><p>Generalized entropy index</p></a></li>
<li><a href='#svygeidec'><p>Generalized Entropy Index Decomposition</p></a></li>
<li><a href='#svygini'><p>Gini coefficient</p></a></li>
<li><a href='#svygpg'><p>Linearization of the gender pay (wage) gap</p></a></li>
<li><a href='#svyiqalpha'><p>Linearization of a variable quantile</p></a></li>
<li><a href='#svyisq'><p>Linearization of the total below a quantile</p></a></li>
<li><a href='#svyjdiv'><p>J-divergence measure</p></a></li>
<li><a href='#svyjdivdec'><p>J-Divergence Decomposition</p></a></li>
<li><a href='#svylorenz'><p>Lorenz curve</p></a></li>
<li><a href='#svypoormed'><p>Relative median poverty gap</p></a></li>
<li><a href='#svyqsr'><p>Quintile Share Ratio</p></a></li>
<li><a href='#svyrich'><p>Richness measures</p></a></li>
<li><a href='#svyrmir'><p>Relative median income ratio</p></a></li>
<li><a href='#svyrmpg'><p>Relative median poverty gap</p></a></li>
<li><a href='#svywatts'><p>Watts measure of poverty</p></a></li>
<li><a href='#svywattsdec'><p>Watts poverty index decomposition</p></a></li>
<li><a href='#svyzenga'><p>Zenga index</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Income Concentration Analysis with Complex Survey Samples</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-12-25</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://guilhermejacob.github.io/context/">https://guilhermejacob.github.io/context/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ajdamico/convey/issues">https://github.com/ajdamico/convey/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Variance estimation on indicators of income concentration and
    poverty using complex sample survey designs. Wrapper around the
    'survey' package.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>survey (&ge; 4.2-1), methods</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown, vardpoor, laeken, DBI, RSQLite</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-08 15:08:36 UTC; AnthonyD</td>
</tr>
<tr>
<td>Author:</td>
<td>Djalma Pessoa [aut],
  Anthony Damico [aut, cre],
  Guilherme Jacob [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Anthony Damico &lt;ajdamico@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-08 22:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='contrastinf'>Generalized linearization of a smooth function of survey statistics</h2><span id='topic+contrastinf'></span>

<h3>Description</h3>

<p>Generalized linearization of a smooth function of survey statistics
</p>


<h3>Usage</h3>

<pre><code class='language-R'>contrastinf(exprlist, infunlist)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="contrastinf_+3A_exprlist">exprlist</code></td>
<td>
<p>a call</p>
</td></tr>
<tr><td><code id="contrastinf_+3A_infunlist">infunlist</code></td>
<td>
<p>a list of lists, each having two components: value - the estimate value and lin - the linearized variable</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The call must use function that <code>deriv</code> knows how to differentiate. It allows to compute the linearized variable of a complex indicator from the linearized variables of simpler component variables, avoiding the formal derivatives calculations.
</p>


<h3>Value</h3>

<p>a list with two components: values - the estimate value and lin - the linearized variable
</p>


<h3>Author(s)</h3>

<p>Djalma Pessoa, Guilherme Jacob, and Anthony Damico
</p>


<h3>References</h3>

<p>Guillaume Osier (2009). Variance estimation for complex indicators
of poverty and inequality. <em>Journal of the European Survey Research
Association</em>, Vol.3, No.3, pp. 167-195,
ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.
</p>


<h3>See Also</h3>

<p><code>svyqsr</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survey)
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )

# linearized design
des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep(des_eusilc)

w &lt;- weights(des_eusilc)

# ratio linearization
T1 = list(value = sum(w*eusilc$eqincome) , lin = eusilc$eqincome )
T2 = list(value = sum(w), lin = rep (1, nrow(eusilc)) )
list_all &lt;- list( T1 = T1, T2 = T2)
lin_R = contrastinf (quote(T1/T2), list_all)

# estimate of the variable eqincome mean
lin_R$value
# se estimate of the variable eqincome mean
SE(svytotal(lin_R$lin, des_eusilc))
# to check, use
svymean (~eqincome, des_eusilc)

# quintile share ratio (qsr) linearization
S20 &lt;- svyisq(~ eqincome, design = des_eusilc, .20, linearized = TRUE)
S20_val &lt;- coef (S20); attributes (S20_val) &lt;- NULL
S20_lin &lt;- attr(S20 , "linearized" )
S80 &lt;- svyisq(~ eqincome, design = des_eusilc, .80, linearized = TRUE)
S80_val &lt;- coef (S80); attributes (S80_val) &lt;- NULL
S80_lin &lt;- attr(S80 , "linearized" )
SU &lt;- list (value = S80_val, lin = S80_lin )
SI &lt;- list (value = S20_val, lin = S20_lin )
TOT &lt;- list(value = sum( w * eusilc$eqincome) , lin = eusilc$eqincome )
list_all &lt;- list (TOT = TOT, SI = SI, SU = SU )
lin_QSR &lt;- contrastinf( quote((TOT-SU)/SI), list_all)

# estimate of the qsr
lin_QSR$value
# se estimate of the qsr:
SE(svytotal(lin_QSR$lin, des_eusilc))
# to check, use
svyqsr(~eqincome, des_eusilc )
# proportion of income below the quantile .20
list_all &lt;- list (TOT = TOT, SI = SI )
lin_Lor &lt;- contrastinf( quote(SI/TOT), list_all)
# estimate of the proportion of income below the quantile .20
lin_Lor$value
# se estimate
SE(svytotal(lin_Lor$lin,des_eusilc))

</code></pre>

<hr>
<h2 id='convey_prep'>prepare svydesign and svyrep.design objects for the convey package</h2><span id='topic+convey_prep'></span>

<h3>Description</h3>

<p>sets the population of reference for poverty threshold estimation (needed for convey functions that use a global poverty threshold) within the design.  this function generally should be run immediately after the full design object creation with <code>svydesign</code> or <code>svrepdesign</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convey_prep(design)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="convey_prep_+3A_design">design</code></td>
<td>
<p>a survey design object of the library survey.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>functions in the convey package that use a global poverty threshold require the complete (pre-subsetted) design in order to calculate variances correctly.  this function stores the full design object as a separate attribute so that functions from the <code>survey</code> package such as <code>subset</code> and <code>svyby</code> do not disrupt the calculation of error terms.
</p>


<h3>Value</h3>

<p>the same survey object with a <code>full_design</code> attribute as the storage space for the unsubsetted survey design
</p>


<h3>Author(s)</h3>

<p>Djalma Pessoa, Anthony Damico, and Guilherme Jacob
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(survey)
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )

# linearized design: convey_prep must be run as soon as the linearized design has been created
des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep( des_eusilc )
# now this linearized design object is ready for analysis!

# # # CORRECT usage example # # #
des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep( des_eusilc )
sub_eusilc &lt;- subset( des_eusilc , age &gt; 20 )
# since convey_prep() was run immediately after creating the design
# this will calculate the variance accurately
SE( svyarpt( ~ eqincome , sub_eusilc ) )
# # # end of CORRECT usage example # # #

# # # INCORRECT usage example # # #
des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
sub_eusilc &lt;- subset( des_eusilc , age &gt; 20 )
sub_eusilc &lt;- convey_prep( sub_eusilc )
# since convey_prep() was not run immediately after creating the design
# this will make the variance wrong
SE( svyarpt( ~ eqincome , sub_eusilc ) )
# # # end of INCORRECT usage example # # #

</code></pre>

<hr>
<h2 id='densfun'>Estimate the derivative of the cdf function using kernel estimator</h2><span id='topic+densfun'></span>

<h3>Description</h3>

<p>computes the derivative of a function in a point using kernel estimation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>densfun(formula, design, x, h = NULL, FUN = "F", na.rm = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="densfun_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="densfun_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="densfun_+3A_x">x</code></td>
<td>
<p>the point where the derivative is calculated</p>
</td></tr>
<tr><td><code id="densfun_+3A_h">h</code></td>
<td>
<p>value of the bandwidth based on the whole sample</p>
</td></tr>
<tr><td><code id="densfun_+3A_fun">FUN</code></td>
<td>
<p>if <code>F</code> estimates the derivative of the cdf function; if <code>big_s</code> estimates the derivative of total in the tails of the distribution</p>
</td></tr>
<tr><td><code id="densfun_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped?</p>
</td></tr>
<tr><td><code id="densfun_+3A_...">...</code></td>
<td>
<p>future expansion</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the value of the derivative at <code>x</code>
</p>


<h3>Author(s)</h3>

<p>Djalma Pessoa and Anthony Damico
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )
library(survey)
des_eusilc &lt;- svydesign(ids = ~rb030, strata =~db040,  weights = ~rb050, data = eusilc)
des_eusilc &lt;- convey_prep( des_eusilc )
densfun (~eqincome, design=des_eusilc, 10000, FUN="F" )
# linearized design using a variable with missings
densfun ( ~ py010n , design = des_eusilc, 10000, FUN="F" )
densfun ( ~ py010n , design = des_eusilc , 10000,FUN="F", na.rm = TRUE )

</code></pre>

<hr>
<h2 id='h_fun'>Computes the bandwidth needed to compute the derivative of the cdf function</h2><span id='topic+h_fun'></span>

<h3>Description</h3>

<p>Using the whole sample, computes the bandwith used to get the linearized variable
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h_fun(incvar, w)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h_fun_+3A_incvar">incvar</code></td>
<td>
<p>income variable used in the estimation of the indicators</p>
</td></tr>
<tr><td><code id="h_fun_+3A_w">w</code></td>
<td>
<p>vector of design weights</p>
</td></tr>
</table>


<h3>Value</h3>

<p>value of the bandwidth
</p>


<h3>Author(s)</h3>

<p>Djalma Pessoa, Guilherme Jacob, and Anthony Damico
</p>

<hr>
<h2 id='icdf'>Linearization of the cumulative distribution function (cdf) of a variable</h2><span id='topic+icdf'></span>

<h3>Description</h3>

<p>Computes the linearized variable of the cdf function in a point.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>icdf(formula, design, x, na.rm = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="icdf_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="icdf_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="icdf_+3A_x">x</code></td>
<td>
<p>the point where the cdf is calculated</p>
</td></tr>
<tr><td><code id="icdf_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped?</p>
</td></tr>
<tr><td><code id="icdf_+3A_...">...</code></td>
<td>
<p>future expansion</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class &quot;<code>cvystat</code>&quot;, which are vectors with a &quot;<code>var</code>&quot; attribute giving the variance and a &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Djalma Pessoa and Anthony Damico
</p>


<h3>References</h3>

<p>Guillaume Osier (2009). Variance estimation for complex indicators
of poverty and inequality. <em>Journal of the European Survey Research
Association</em>, Vol.3, No.3, pp. 167-195,
ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.
Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators:
linearization and residual techniques. Survey Methodology, 25, 193-203,
URL <a href="https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882">https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svyarpr">svyarpr</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )
library(survey)
des_eusilc &lt;- svydesign(ids = ~rb030, strata =~db040,  weights = ~rb050, data = eusilc)
des_eusilc &lt;- convey_prep( des_eusilc )
icdf(~eqincome, design=des_eusilc, 10000 )
# linearized design using a variable with missings
icdf( ~ py010n , design = des_eusilc, 10000 )
icdf( ~ py010n , design = des_eusilc , 10000, na.rm = TRUE )
</code></pre>

<hr>
<h2 id='svyarpr'>At-risk-of-poverty rate</h2><span id='topic+svyarpr'></span><span id='topic+svyarpr.survey.design'></span><span id='topic+svyarpr.svyrep.design'></span><span id='topic+svyarpr.DBIsvydesign'></span>

<h3>Description</h3>

<p>Estimate the proportion of persons with income below the at-risk-of-poverty threshold.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svyarpr(formula, design, ...)

## S3 method for class 'survey.design'
svyarpr(formula, design, quantiles = 0.5, percent = 0.6, na.rm = FALSE, ...)

## S3 method for class 'svyrep.design'
svyarpr(formula, design, quantiles = 0.5, percent = 0.6, na.rm = FALSE, ...)

## S3 method for class 'DBIsvydesign'
svyarpr(formula, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svyarpr_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="svyarpr_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svyarpr_+3A_...">...</code></td>
<td>
<p>arguments passed on to 'svyarpt'</p>
</td></tr>
<tr><td><code id="svyarpr_+3A_quantiles">quantiles</code></td>
<td>
<p>income quantile, usually .50 (median)</p>
</td></tr>
<tr><td><code id="svyarpr_+3A_percent">percent</code></td>
<td>
<p>fraction of the quantile, usually .60</p>
</td></tr>
<tr><td><code id="svyarpr_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>cvystat</code>&quot;, which are vectors with a &quot;<code>var</code>&quot; attribute giving the variance and a &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Djalma Pessoa and Anthony Damico
</p>


<h3>References</h3>

<p>Guillaume Osier (2009). Variance estimation for complex indicators
of poverty and inequality. <em>Journal of the European Survey Research
Association</em>, Vol.3, No.3, pp. 167-195,
ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.
</p>
<p>Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators:
linearization and residual techniques. Survey Methodology, 25, 193-203,
URL <a href="https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882">https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svyarpt">svyarpt</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(survey)
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )

# linearized design
des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep( des_eusilc )

svyarpr( ~eqincome , design = des_eusilc )

# replicate-weighted design
des_eusilc_rep &lt;- as.svrepdesign( des_eusilc , type = "bootstrap" )
des_eusilc_rep &lt;- convey_prep( des_eusilc_rep )

svyarpr( ~eqincome , design = des_eusilc_rep )

## Not run: 

# linearized design using a variable with missings
svyarpr( ~ py010n , design = des_eusilc )
svyarpr( ~ py010n , design = des_eusilc , na.rm = TRUE )
# replicate-weighted design using a variable with missings
svyarpr( ~ py010n , design = des_eusilc_rep )
svyarpr( ~ py010n , design = des_eusilc_rep , na.rm = TRUE )

# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'eusilc' , eusilc )

dbd_eusilc &lt;-
	svydesign(
		ids = ~rb030 ,
		strata = ~db040 ,
		weights = ~rb050 ,
		data="eusilc",
		dbname=dbfile,
		dbtype="SQLite"
	)

dbd_eusilc &lt;- convey_prep( dbd_eusilc )

svyarpr( ~ eqincome , design = dbd_eusilc )

dbRemoveTable( conn , 'eusilc' )

dbDisconnect( conn , shutdown = TRUE )


## End(Not run)

</code></pre>

<hr>
<h2 id='svyarpt'>At-risk-of-poverty threshold</h2><span id='topic+svyarpt'></span><span id='topic+svyarpt.survey.design'></span><span id='topic+svyarpt.svyrep.design'></span><span id='topic+svyarpt.DBIsvydesign'></span>

<h3>Description</h3>

<p>The standard definition is to use 60% of the median income.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svyarpt(formula, design, ...)

## S3 method for class 'survey.design'
svyarpt(formula, design, quantiles = 0.5, percent = 0.6, na.rm = FALSE, ...)

## S3 method for class 'svyrep.design'
svyarpt(formula, design, quantiles = 0.5, percent = 0.6, na.rm = FALSE, ...)

## S3 method for class 'DBIsvydesign'
svyarpt(formula, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svyarpt_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="svyarpt_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svyarpt_+3A_...">...</code></td>
<td>
<p>arguments passed on to 'survey::oldsvyquantile'</p>
</td></tr>
<tr><td><code id="svyarpt_+3A_quantiles">quantiles</code></td>
<td>
<p>income quantile quantiles, usually .50 (median)</p>
</td></tr>
<tr><td><code id="svyarpt_+3A_percent">percent</code></td>
<td>
<p>fraction of the quantile, usually .60</p>
</td></tr>
<tr><td><code id="svyarpt_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>cvystat</code>&quot;, which are vectors with a &quot;<code>var</code>&quot; attribute giving the variance and a &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Djalma Pessoa and Anthony Damico
</p>


<h3>References</h3>

<p>Guillaume Osier (2009). Variance estimation for complex indicators
of poverty and inequality. <em>Journal of the European Survey Research
Association</em>, Vol.3, No.3, pp. 167-195,
ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.
</p>
<p>Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators:
linearization and residual techniques. Survey Methodology, 25, 193-203,
URL <a href="https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882">https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svyarpr">svyarpr</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(survey)
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )

# linearized design

des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep( des_eusilc )
svyarpt( ~eqincome , design = des_eusilc )

# replicate-weighted design
des_eusilc_rep &lt;- as.svrepdesign( des_eusilc , type = "bootstrap" )
des_eusilc_rep &lt;- convey_prep( des_eusilc_rep )
svyarpt( ~eqincome , design = des_eusilc_rep )

## Not run: 

# linearized design using a variable with missings
svyarpt( ~ py010n , design = des_eusilc )
svyarpt( ~ py010n , design = des_eusilc , na.rm = TRUE )
# replicate-weighted design using a variable with missings
svyarpt( ~ py010n , design = des_eusilc_rep )
svyarpt( ~ py010n , design = des_eusilc_rep , na.rm = TRUE )


# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'eusilc' , eusilc )

dbd_eusilc &lt;-
	svydesign(
		ids = ~rb030 ,
		strata = ~db040 ,
		weights = ~rb050 ,
		data="eusilc",
		dbname=dbfile,
		dbtype="SQLite"
	)

dbd_eusilc &lt;- convey_prep( dbd_eusilc )

svyarpt( ~ eqincome , design = dbd_eusilc )

dbRemoveTable( conn , 'eusilc' )

dbDisconnect( conn , shutdown = TRUE )


## End(Not run)

</code></pre>

<hr>
<h2 id='svyatk'>Atkinson index</h2><span id='topic+svyatk'></span><span id='topic+svyatk.survey.design'></span><span id='topic+svyatk.svyrep.design'></span><span id='topic+svyatk.DBIsvydesign'></span>

<h3>Description</h3>

<p>Estimate the Atkinson index, an inequality measure
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svyatk(formula, design, ...)

## S3 method for class 'survey.design'
svyatk(
  formula,
  design,
  epsilon = 1,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  influence = FALSE,
  ...
)

## S3 method for class 'svyrep.design'
svyatk(
  formula,
  design,
  epsilon = 1,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  return.replicates = FALSE,
  ...
)

## S3 method for class 'DBIsvydesign'
svyatk(formula, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svyatk_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="svyatk_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svyatk_+3A_...">...</code></td>
<td>
<p>future expansion</p>
</td></tr>
<tr><td><code id="svyatk_+3A_epsilon">epsilon</code></td>
<td>
<p>a parameter that determines the sensivity towards inequality in the bottom of the distribution. Defaults to <code>epsilon = 1</code>.</p>
</td></tr>
<tr><td><code id="svyatk_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped?</p>
</td></tr>
<tr><td><code id="svyatk_+3A_deff">deff</code></td>
<td>
<p>Return the design effect (see <code>survey::svymean</code>)</p>
</td></tr>
<tr><td><code id="svyatk_+3A_linearized">linearized</code></td>
<td>
<p>Should a matrix of linearized variables be returned</p>
</td></tr>
<tr><td><code id="svyatk_+3A_influence">influence</code></td>
<td>
<p>Should a matrix of (weighted) influence functions be returned? (for compatibility with <code><a href="survey.html#topic+svyby">svyby</a></code>)</p>
</td></tr>
<tr><td><code id="svyatk_+3A_return.replicates">return.replicates</code></td>
<td>
<p>Return the replicate estimates?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>cvystat</code>&quot;, which are vectors with a &quot;<code>var</code>&quot; attribute giving the variance and a &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Guilherme Jacob, Djalma Pessoa and Anthony Damico
</p>


<h3>References</h3>

<p>Matti Langel (2012). Measuring inequality in finite population sampling.
PhD thesis: Universite de Neuchatel,
URL <a href="https://doc.rero.ch/record/29204/files/00002252.pdf">https://doc.rero.ch/record/29204/files/00002252.pdf</a>.
</p>
<p>Martin Biewen and Stephen Jenkins (2002). Estimation of Generalized Entropy
and Atkinson Inequality Indices from Complex Survey Data. <em>DIW Discussion Papers</em>,
No.345,
URL <a href="https://www.diw.de/documents/publikationen/73/diw_01.c.40394.de/dp345.pdf">https://www.diw.de/documents/publikationen/73/diw_01.c.40394.de/dp345.pdf</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svygei">svygei</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survey)
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )

# linearized design
des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep(des_eusilc)

# replicate-weighted design
des_eusilc_rep &lt;- as.svrepdesign( des_eusilc , type = "bootstrap" )
des_eusilc_rep &lt;- convey_prep(des_eusilc_rep)


# subset all designs to positive income and non-missing records only
des_eusilc_pos_inc &lt;- subset( des_eusilc , eqincome &gt; 0 )
des_eusilc_rep_pos_inc &lt;- subset( des_eusilc_rep , eqincome &gt; 0 )


# linearized design
svyatk( ~eqincome , des_eusilc_pos_inc, epsilon = .5 )
svyatk( ~eqincome , des_eusilc_pos_inc )
svyatk( ~eqincome , des_eusilc_pos_inc, epsilon = 2 )

# replicate-weighted design
svyatk( ~eqincome , des_eusilc_rep_pos_inc, epsilon = .5 )
svyatk( ~eqincome , des_eusilc_rep_pos_inc )
svyatk( ~eqincome , des_eusilc_rep_pos_inc, epsilon = 2 )


# subsetting
svyatk( ~eqincome , subset(des_eusilc_pos_inc, db040 == "Styria"), epsilon = .5 )
svyatk( ~eqincome , subset(des_eusilc_pos_inc, db040 == "Styria") )
svyatk( ~eqincome , subset(des_eusilc_pos_inc, db040 == "Styria"), epsilon = 2 )

svyatk( ~eqincome , subset(des_eusilc_rep_pos_inc, db040 == "Styria"), epsilon = .5 )
svyatk( ~eqincome , subset(des_eusilc_rep_pos_inc, db040 == "Styria") )
svyatk( ~eqincome , subset(des_eusilc_rep_pos_inc, db040 == "Styria"), epsilon = 2 )

## Not run: 

# linearized design using a variable with missings (but subsetted to remove negatives)
svyatk( ~py010n , subset(des_eusilc, py010n &gt; 0 | is.na(py010n)), epsilon = .5 )
svyatk( ~py010n , subset(des_eusilc, py010n &gt; 0 | is.na(py010n)), epsilon = .5 , na.rm=TRUE )

# replicate-weighted design using a variable with missings (but subsetted to remove negatives)
svyatk( ~py010n , subset(des_eusilc_rep, py010n &gt; 0 | is.na(py010n)), epsilon = .5 )
svyatk( ~py010n , subset(des_eusilc_rep, py010n &gt; 0 | is.na(py010n)), epsilon = .5 , na.rm=TRUE )


# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'eusilc' , eusilc )

dbd_eusilc &lt;-
	svydesign(
		ids = ~rb030 ,
		strata = ~db040 ,
		weights = ~rb050 ,
		data="eusilc",
		dbname=dbfile,
		dbtype="SQLite"
	)

dbd_eusilc &lt;- convey_prep( dbd_eusilc )


# subset all designs to positive income and non-missing records only
dbd_eusilc_pos_inc &lt;- subset( dbd_eusilc , eqincome &gt; 0 )


# database-backed linearized design
svyatk( ~eqincome , dbd_eusilc_pos_inc, epsilon = .5 )
svyatk( ~eqincome , dbd_eusilc_pos_inc )
svyatk( ~eqincome , dbd_eusilc_pos_inc, epsilon = 2 )

svyatk( ~eqincome , subset(dbd_eusilc_pos_inc, db040 == "Styria"), epsilon = .5 )
svyatk( ~eqincome , subset(dbd_eusilc_pos_inc, db040 == "Styria") )
svyatk( ~eqincome , subset(dbd_eusilc_pos_inc, db040 == "Styria"), epsilon = 2 )

# database-backed linearized design using a variable with missings
# (but subsetted to remove negatives)
svyatk( ~py010n , subset(dbd_eusilc, py010n &gt; 0 | is.na(py010n)), epsilon = .5 )
svyatk( ~py010n , subset(dbd_eusilc, py010n &gt; 0 | is.na(py010n)), epsilon = .5 , na.rm=TRUE )


dbRemoveTable( conn , 'eusilc' )

dbDisconnect( conn , shutdown = TRUE )


## End(Not run)

</code></pre>

<hr>
<h2 id='svyfgt'>FGT measure of poverty</h2><span id='topic+svyfgt'></span><span id='topic+svyfgt.survey.design'></span><span id='topic+svyfgt.svyrep.design'></span><span id='topic+svyfgt.DBIsvydesign'></span>

<h3>Description</h3>

<p>Estimate the FGT measure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svyfgt(formula, design, ...)

## S3 method for class 'survey.design'
svyfgt(
  formula,
  design,
  g,
  type_thresh = "abs",
  abs_thresh = NULL,
  percent = 0.6,
  quantiles = 0.5,
  na.rm = FALSE,
  thresh = FALSE,
  deff = FALSE,
  linearized = FALSE,
  influence = FALSE,
  ...
)

## S3 method for class 'svyrep.design'
svyfgt(
  formula,
  design,
  g,
  type_thresh = "abs",
  abs_thresh = NULL,
  percent = 0.6,
  quantiles = 0.5,
  na.rm = FALSE,
  thresh = FALSE,
  deff = FALSE,
  linearized = FALSE,
  return.replicates = FALSE,
  ...
)

## S3 method for class 'DBIsvydesign'
svyfgt(formula, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svyfgt_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="svyfgt_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svyfgt_+3A_...">...</code></td>
<td>
<p>passed to <code>svyarpr</code> and <code>svyarpt</code></p>
</td></tr>
<tr><td><code id="svyfgt_+3A_g">g</code></td>
<td>
<p>If g=0 estimates the headcount ratio; If g=1 estimates the average normalised poverty gap, and if g=2 estimates the average squared normalised poverty gap</p>
</td></tr>
<tr><td><code id="svyfgt_+3A_type_thresh">type_thresh</code></td>
<td>
<p>type of poverty threshold. If &quot;abs&quot; the threshold is fixed and given the value
of abs_thresh; if &quot;relq&quot; it is given by percent times the quantile; if &quot;relm&quot; it is percent times the mean.</p>
</td></tr>
<tr><td><code id="svyfgt_+3A_abs_thresh">abs_thresh</code></td>
<td>
<p>poverty threshold value if type_thresh is &quot;abs&quot;</p>
</td></tr>
<tr><td><code id="svyfgt_+3A_percent">percent</code></td>
<td>
<p>the multiple of the the quantile or mean used in the poverty threshold definition</p>
</td></tr>
<tr><td><code id="svyfgt_+3A_quantiles">quantiles</code></td>
<td>
<p>the quantile used used in the poverty threshold definition</p>
</td></tr>
<tr><td><code id="svyfgt_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped?</p>
</td></tr>
<tr><td><code id="svyfgt_+3A_thresh">thresh</code></td>
<td>
<p>return the poverty threshold value</p>
</td></tr>
<tr><td><code id="svyfgt_+3A_deff">deff</code></td>
<td>
<p>Return the design effect (see <code>survey::svymean</code>)</p>
</td></tr>
<tr><td><code id="svyfgt_+3A_linearized">linearized</code></td>
<td>
<p>Should a matrix of linearized variables be returned?</p>
</td></tr>
<tr><td><code id="svyfgt_+3A_influence">influence</code></td>
<td>
<p>Should a matrix of (weighted) influence functions be returned? (for compatibility with <code><a href="survey.html#topic+svyby">svyby</a></code>). Not implemented yet for linearized designs.</p>
</td></tr>
<tr><td><code id="svyfgt_+3A_return.replicates">return.replicates</code></td>
<td>
<p>Return the replicate estimates?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>
<p>The FGT poverty measures have three special cases.
When <code>g = 0</code>, the FGT measure is the headcount poverty rate, assigning the same &quot;poverty-weight&quot; to all persons below the poverty line.
When <code>g = 1</code>, it becomes the poverty gap ratio, a measure which accounts for the intensity of income shortfall among the poor.
When <code>g = 2</code>. it becomes the squared poverty gap ratio, a measure that also accounts for inequality of poverty intesity across the poor.
The <code>g</code> is a poverty sensitivity parameter, adding more weight to people with greater income shortfalls as it increases.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>cvystat</code>&quot;, which are vectors with a &quot;<code>var</code>&quot; attribute giving the variance and a &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Djalma Pessoa, Anthony Damico, and Guilherme Jacob
</p>


<h3>References</h3>

<p>James Foster, Joel Greer and Erik Thorbecke (1984). A class of decomposable poverty measures.
<em>Econometrica</em>, Vol.52, No.3, pp. 761-766.
</p>
<p>Y.G. Berger and C. J. Skinner (2003), Variance estimation for a low income proportion.
<em>Journal of the Royal Statistical Society: Series C (Applied Statistics)</em>, Vol. 52, No. 4, pp. 457-468.
DOI <a href="https://doi.org/10.1111/1467-9876.00417">doi:10.1111/1467-9876.00417</a>
</p>
<p>Buhong Zheng (2001). Statistical inference for poverty measures with relative poverty lines.
<em>Journal of Econometrics</em>, Vol. 101, pp. 337-356.
</p>
<p>Guillaume Osier (2009). Variance estimation for complex indicators
of poverty and inequality. <em>Journal of the European Survey Research
Association</em>, Vol.3, No.3, pp. 167-195,
ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.
</p>
<p>Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators:
linearization and residual techniques. Survey Methodology, 25, 193-203,
URL <a href="https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882">https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svyarpt">svyarpt</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survey)
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )

# linearized design

des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep( des_eusilc )

# replicate-weighted design
des_eusilc_rep &lt;- as.svrepdesign( des_eusilc , type = "bootstrap" )
des_eusilc_rep &lt;- convey_prep( des_eusilc_rep )

# headcount ratio, poverty threshold fixed
svyfgt(~eqincome, des_eusilc, g=0,  abs_thresh=10000)
# poverty gap index, poverty threshold fixed
svyfgt(~eqincome, des_eusilc, g=1,  abs_thresh=10000)
# headcount ratio, poverty threshold equal to arpt
svyfgt(~eqincome, des_eusilc, g=0, type_thresh= "relq" , thresh = TRUE)
# poverty gap index, poverty threshold equal to arpt
svyfgt(~eqincome, des_eusilc, g=1, type_thresh= "relq", thresh = TRUE)
# headcount ratio, poverty threshold equal to .6 times the mean
svyfgt(~eqincome, des_eusilc, g=0, type_thresh= "relm", thresh = TRUE)
# poverty gap index, poverty threshold equal to 0.6 times the mean
svyfgt(~eqincome, des_eusilc, g=1, type_thresh= "relm" , thresh = TRUE)

#  using svrep.design:
# headcount ratio, poverty threshold fixed
svyfgt(~eqincome, des_eusilc_rep, g=0,  abs_thresh=10000)
# poverty gap index, poverty threshold fixed
svyfgt(~eqincome, des_eusilc, g=1,  abs_thresh=10000)
# headcount ratio, poverty threshold equal to arpt
svyfgt(~eqincome, des_eusilc_rep, g=0, type_thresh= "relq" , thresh = TRUE)
# poverty gap index, poverty threshold equal to arpt
svyfgt(~eqincome, des_eusilc, g=1, type_thresh= "relq", thresh = TRUE)
# headcount ratio, poverty threshold equal to .6 times the mean
svyfgt(~eqincome, des_eusilc_rep, g=0, type_thresh= "relm" , thresh = TRUE)
# poverty gap index, poverty threshold equal to 0.6 times the mean
svyfgt(~eqincome, des_eusilc_rep, g=1, type_thresh= "relm", thresh = TRUE)

## Not run: 

# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'eusilc' , eusilc )

dbd_eusilc &lt;-
	svydesign(
		ids = ~rb030 ,
		strata = ~db040 ,
		weights = ~rb050 ,
		data="eusilc",
		dbname=dbfile,
		dbtype="SQLite"
	)


dbd_eusilc &lt;- convey_prep( dbd_eusilc )

# headcount ratio, poverty threshold fixed
svyfgt(~eqincome, dbd_eusilc, g=0, abs_thresh=10000)
# poverty gap index, poverty threshold fixed
svyfgt(~eqincome, dbd_eusilc, g=1, abs_thresh=10000)
# headcount ratio, poverty threshold equal to arpt
svyfgt(~eqincome, dbd_eusilc, g=0, type_thresh= "relq", thresh = TRUE)
# poverty gap index, poverty threshold equal to arpt
svyfgt(~eqincome, dbd_eusilc, g=1, type_thresh= "relq")
# headcount ratio, poverty threshold equal to .6 times the mean
svyfgt(~eqincome, dbd_eusilc, g=0, type_thresh= "relm")
# poverty gap index, poverty threshold equal to 0.6 times the mean
svyfgt(~eqincome, dbd_eusilc, g=1, type_thresh= "relm")

dbRemoveTable( conn , 'eusilc' )

dbDisconnect( conn , shutdown = TRUE )


## End(Not run)

</code></pre>

<hr>
<h2 id='svyfgtdec'>FGT indices decomposition</h2><span id='topic+svyfgtdec'></span><span id='topic+svyfgtdec.survey.design'></span><span id='topic+svyfgtdec.svyrep.design'></span><span id='topic+svyfgtdec.DBIsvydesign'></span>

<h3>Description</h3>

<p>Estimate the Foster et al. (1984) poverty class and its components
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svyfgtdec(formula, design, ...)

## S3 method for class 'survey.design'
svyfgtdec(
  formula,
  design,
  g,
  type_thresh = "abs",
  abs_thresh = NULL,
  percent = 0.6,
  quantiles = 0.5,
  na.rm = FALSE,
  thresh = FALSE,
  ...
)

## S3 method for class 'svyrep.design'
svyfgtdec(
  formula,
  design,
  g,
  type_thresh = "abs",
  abs_thresh = NULL,
  percent = 0.6,
  quantiles = 0.5,
  na.rm = FALSE,
  thresh = FALSE,
  return.replicates = FALSE,
  ...
)

## S3 method for class 'DBIsvydesign'
svyfgtdec(formula, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svyfgtdec_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="svyfgtdec_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svyfgtdec_+3A_...">...</code></td>
<td>
<p>additional arguments. Currently not used.</p>
</td></tr>
<tr><td><code id="svyfgtdec_+3A_g">g</code></td>
<td>
<p>If g=2 estimates the average squared normalised poverty gap. This function is defined for g &gt;= 2 only,</p>
</td></tr>
<tr><td><code id="svyfgtdec_+3A_type_thresh">type_thresh</code></td>
<td>
<p>type of poverty threshold. If &quot;abs&quot; the threshold is fixed and given the value
of abs_thresh; if &quot;relq&quot; it is given by percent times the quantile; if &quot;relm&quot; it is percent times the mean.</p>
</td></tr>
<tr><td><code id="svyfgtdec_+3A_abs_thresh">abs_thresh</code></td>
<td>
<p>poverty threshold value if type_thresh is &quot;abs&quot;</p>
</td></tr>
<tr><td><code id="svyfgtdec_+3A_percent">percent</code></td>
<td>
<p>the multiple of the the quantile or mean used in the poverty threshold definition</p>
</td></tr>
<tr><td><code id="svyfgtdec_+3A_quantiles">quantiles</code></td>
<td>
<p>the quantile used used in the poverty threshold definition</p>
</td></tr>
<tr><td><code id="svyfgtdec_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped?</p>
</td></tr>
<tr><td><code id="svyfgtdec_+3A_thresh">thresh</code></td>
<td>
<p>return the poverty threshold value</p>
</td></tr>
<tr><td><code id="svyfgtdec_+3A_return.replicates">return.replicates</code></td>
<td>
<p>Return the replicate estimates?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>cvydstat</code>&quot;, with estimates for the FGT(g), FGT(0), FGT(1), income gap ratio and GEI(income gaps; epsilon = g) with a &quot;<code>var</code>&quot; attribute giving the variance-covariance matrix.
A &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Guilherme Jacob, Djalma Pessoa and Anthony Damico
</p>


<h3>References</h3>

<p>Oihana Aristondo, Cassilda Lasso De La vega and Ana Urrutia (2010).
A new multiplicative decomposition for the Foster-Greer-Thorbecke poverty indices.
<em>Bulletin of Economic Research</em>, Vol.62, No.3, pp. 259-267.
University of Wisconsin. &lt;doi:10.1111/j.1467-8586.2009.00320.x&gt;
</p>
<p>James Foster, Joel Greer and Erik Thorbecke (1984). A class of decomposable poverty measures.
<em>Econometrica</em>, Vol.52, No.3, pp. 761-766.
</p>
<p>Guillaume Osier (2009). Variance estimation for complex indicators
of poverty and inequality. <em>Journal of the European Survey Research
Association</em>, Vol.3, No.3, pp. 167-195,
ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.
</p>
<p>Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators:
linearization and residual techniques. Survey Methodology, 25, 193-203,
URL <a href="https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882">https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svyfgt">svyfgt</a>,<a href="#topic+svyfgt">svyfgt</a>,<a href="#topic+svyfgt">svyfgt</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survey)
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )

# linearized design

des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep( des_eusilc )

# replicate-weighted design
des_eusilc_rep &lt;- as.svrepdesign( des_eusilc , type = "bootstrap" )
des_eusilc_rep &lt;- convey_prep( des_eusilc_rep )

# absolute poverty threshold
svyfgtdec(~eqincome, des_eusilc, g=2, abs_thresh=10000)
# poverty threshold equal to arpt
svyfgtdec(~eqincome, des_eusilc, g=2, type_thresh= "relq" , thresh = TRUE)
# poverty threshold equal to 0.6 times the mean
svyfgtdec(~eqincome, des_eusilc, g=2, type_thresh= "relm" , thresh = TRUE)

# using svrep.design:
# absolute poverty threshold
svyfgtdec(~eqincome, des_eusilc_rep, g=2, abs_thresh=10000)
# poverty threshold equal to arpt
svyfgtdec(~eqincome, des_eusilc_rep, g=2, type_thresh= "relq" , thresh = TRUE)
# poverty threshold equal to 0.6 times the mean
svyfgtdec(~eqincome, des_eusilc_rep, g=2, type_thresh= "relm" , thresh = TRUE)

## Not run: 

# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'eusilc' , eusilc )

dbd_eusilc &lt;-
	svydesign(
		ids = ~rb030 ,
		strata = ~db040 ,
		weights = ~rb050 ,
		data="eusilc",
		dbname=dbfile,
		dbtype="SQLite"
	)


dbd_eusilc &lt;- convey_prep( dbd_eusilc )


# absolute poverty threshold
svyfgtdec(~eqincome, dbd_eusilc, g=2, abs_thresh=10000)
# poverty threshold equal to arpt
svyfgtdec(~eqincome, dbd_eusilc, g=2, type_thresh= "relq" , thresh = TRUE)
# poverty threshold equal to 0.6 times the mean
svyfgtdec(~eqincome, dbd_eusilc, g=2, type_thresh= "relm" , thresh = TRUE)

dbRemoveTable( conn , 'eusilc' )

dbDisconnect( conn , shutdown = TRUE )


## End(Not run)

</code></pre>

<hr>
<h2 id='svygei'>Generalized entropy index</h2><span id='topic+svygei'></span><span id='topic+svygei.survey.design'></span><span id='topic+svygei.svyrep.design'></span><span id='topic+svygei.DBIsvydesign'></span>

<h3>Description</h3>

<p>Estimate the generalized entropy index, a measure of inequality
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svygei(formula, design, ...)

## S3 method for class 'survey.design'
svygei(
  formula,
  design,
  epsilon = 1,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  influence = FALSE,
  ...
)

## S3 method for class 'svyrep.design'
svygei(
  formula,
  design,
  epsilon = 1,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  return.replicates = FALSE,
  ...
)

## S3 method for class 'DBIsvydesign'
svygei(formula, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svygei_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="svygei_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svygei_+3A_...">...</code></td>
<td>
<p>future expansion</p>
</td></tr>
<tr><td><code id="svygei_+3A_epsilon">epsilon</code></td>
<td>
<p>a parameter that determines the sensivity towards inequality in the top of the distribution. Defaults to epsilon = 1.</p>
</td></tr>
<tr><td><code id="svygei_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped?</p>
</td></tr>
<tr><td><code id="svygei_+3A_deff">deff</code></td>
<td>
<p>Return the design effect (see <code>survey::svymean</code>)</p>
</td></tr>
<tr><td><code id="svygei_+3A_linearized">linearized</code></td>
<td>
<p>Should a matrix of linearized variables be returned</p>
</td></tr>
<tr><td><code id="svygei_+3A_influence">influence</code></td>
<td>
<p>Should a matrix of (weighted) influence functions be returned? (for compatibility with <code><a href="survey.html#topic+svyby">svyby</a></code>)</p>
</td></tr>
<tr><td><code id="svygei_+3A_return.replicates">return.replicates</code></td>
<td>
<p>Return the replicate estimates?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>
<p>This measure only allows for strictly positive variables.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>cvystat</code>&quot;, which are vectors with a &quot;<code>var</code>&quot; attribute giving the variance and a &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Guilherme Jacob, Djalma Pessoa and Anthony Damico
</p>


<h3>References</h3>

<p>Matti Langel (2012). Measuring inequality in finite population sampling.
PhD thesis: Universite de Neuchatel,
URL <a href="https://doc.rero.ch/record/29204/files/00002252.pdf">https://doc.rero.ch/record/29204/files/00002252.pdf</a>.
</p>
<p>Martin Biewen and Stephen Jenkins (2002). Estimation of Generalized Entropy
and Atkinson Inequality Indices from Complex Survey Data. <em>DIW Discussion Papers</em>,
No.345,
URL <a href="https://www.diw.de/documents/publikationen/73/diw_01.c.40394.de/dp345.pdf">https://www.diw.de/documents/publikationen/73/diw_01.c.40394.de/dp345.pdf</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svyatk">svyatk</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survey)
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )

# linearized design
des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep(des_eusilc)

# replicate-weighted design
des_eusilc_rep &lt;- as.svrepdesign( des_eusilc , type = "bootstrap" )
des_eusilc_rep &lt;- convey_prep(des_eusilc_rep)

# linearized design
svygei( ~eqincome , subset(des_eusilc, eqincome &gt; 0), epsilon = 0 )
svygei( ~eqincome , subset(des_eusilc, eqincome &gt; 0), epsilon = .5 )
svygei( ~eqincome , subset(des_eusilc, eqincome &gt; 0), epsilon = 1 )
svygei( ~eqincome , subset(des_eusilc, eqincome &gt; 0), epsilon = 2 )

# replicate-weighted design
svygei( ~eqincome , subset(des_eusilc_rep, eqincome &gt; 0), epsilon = 0 )
svygei( ~eqincome , subset(des_eusilc_rep, eqincome &gt; 0), epsilon = .5 )
svygei( ~eqincome , subset(des_eusilc_rep, eqincome &gt; 0), epsilon = 1 )
svygei( ~eqincome , subset(des_eusilc_rep, eqincome &gt; 0), epsilon = 2 )

## Not run: 

# linearized design using a variable with missings
svygei( ~py010n , subset(des_eusilc, py010n &gt; 0 | is.na(py010n) ), epsilon = 0 )
svygei( ~py010n , subset(des_eusilc, py010n &gt; 0 | is.na(py010n) ), epsilon = 0, na.rm = TRUE )
svygei( ~py010n , subset(des_eusilc, py010n &gt; 0 | is.na(py010n) ), epsilon = .5 )
svygei( ~py010n , subset(des_eusilc, py010n &gt; 0 | is.na(py010n) ), epsilon = .5, na.rm = TRUE )
svygei( ~py010n , subset(des_eusilc, py010n &gt; 0 | is.na(py010n) ), epsilon = 1 )
svygei( ~py010n , subset(des_eusilc, py010n &gt; 0 | is.na(py010n) ), epsilon = 1, na.rm = TRUE )
svygei( ~py010n , subset(des_eusilc, py010n &gt; 0 | is.na(py010n) ), epsilon = 2 )
svygei( ~py010n , subset(des_eusilc, py010n &gt; 0 | is.na(py010n) ), epsilon = 2, na.rm = TRUE )

# replicate-weighted design using a variable with missings
svygei( ~py010n , subset(des_eusilc_rep, py010n &gt; 0 | is.na(py010n) ), epsilon = 0 )
svygei( ~py010n , subset(des_eusilc_rep, py010n &gt; 0 | is.na(py010n) ), epsilon = 0, na.rm = TRUE )
svygei( ~py010n , subset(des_eusilc_rep, py010n &gt; 0 | is.na(py010n) ), epsilon = .5 )
svygei( ~py010n , subset(des_eusilc_rep, py010n &gt; 0 | is.na(py010n) ), epsilon = .5, na.rm = TRUE )
svygei( ~py010n , subset(des_eusilc_rep, py010n &gt; 0 | is.na(py010n) ), epsilon = 1 )
svygei( ~py010n , subset(des_eusilc_rep, py010n &gt; 0 | is.na(py010n) ), epsilon = 1, na.rm = TRUE )
svygei( ~py010n , subset(des_eusilc_rep, py010n &gt; 0 | is.na(py010n) ), epsilon = 2 )
svygei( ~py010n , subset(des_eusilc_rep, py010n &gt; 0 | is.na(py010n) ), epsilon = 2, na.rm = TRUE )

# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'eusilc' , eusilc )

dbd_eusilc &lt;-
	svydesign(
		ids = ~rb030 ,
		strata = ~db040 ,
		weights = ~rb050 ,
		data="eusilc",
		dbname=dbfile,
		dbtype="SQLite"
	)

dbd_eusilc &lt;- convey_prep( dbd_eusilc )

# database-backed linearized design
svygei( ~eqincome , subset(dbd_eusilc, eqincome &gt; 0), epsilon = 0 )
svygei( ~eqincome , dbd_eusilc, epsilon = .5 )
svygei( ~eqincome , subset(dbd_eusilc, eqincome &gt; 0), epsilon = 1 )
svygei( ~eqincome , dbd_eusilc, epsilon = 2 )

# database-backed linearized design using a variable with missings
svygei( ~py010n , subset(dbd_eusilc, py010n &gt; 0 | is.na(py010n) ), epsilon = 0 )
svygei( ~py010n , subset(dbd_eusilc, py010n &gt; 0 | is.na(py010n) ), epsilon = 0, na.rm = TRUE )
svygei( ~py010n , dbd_eusilc, epsilon = .5 )
svygei( ~py010n , dbd_eusilc, epsilon = .5, na.rm = TRUE )
svygei( ~py010n , subset(dbd_eusilc, py010n &gt; 0 | is.na(py010n) ), epsilon = 1 )
svygei( ~py010n , subset(dbd_eusilc, py010n &gt; 0 | is.na(py010n) ), epsilon = 1, na.rm = TRUE )
svygei( ~py010n , dbd_eusilc, epsilon = 2 )
svygei( ~py010n , dbd_eusilc, epsilon = 2, na.rm = TRUE )

dbRemoveTable( conn , 'eusilc' )

dbDisconnect( conn , shutdown = TRUE )


## End(Not run)

</code></pre>

<hr>
<h2 id='svygeidec'>Generalized Entropy Index Decomposition</h2><span id='topic+svygeidec'></span><span id='topic+svygeidec.survey.design'></span><span id='topic+svygeidec.svyrep.design'></span><span id='topic+svygeidec.DBIsvydesign'></span>

<h3>Description</h3>

<p>Estimates the group decomposition of the generalized entropy index
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svygeidec(formula, subgroup, design, ...)

## S3 method for class 'survey.design'
svygeidec(
  formula,
  subgroup,
  design,
  epsilon = 1,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  influence = FALSE,
  ...
)

## S3 method for class 'svyrep.design'
svygeidec(
  formula,
  subgroup,
  design,
  epsilon = 1,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  return.replicates = FALSE,
  ...
)

## S3 method for class 'DBIsvydesign'
svygeidec(formula, subgroup, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svygeidec_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="svygeidec_+3A_subgroup">subgroup</code></td>
<td>
<p>a formula specifying the group variable</p>
</td></tr>
<tr><td><code id="svygeidec_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svygeidec_+3A_...">...</code></td>
<td>
<p>future expansion</p>
</td></tr>
<tr><td><code id="svygeidec_+3A_epsilon">epsilon</code></td>
<td>
<p>a parameter that determines the sensivity towards inequality in the top of the distribution. Defaults to epsilon = 1.</p>
</td></tr>
<tr><td><code id="svygeidec_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped? Observations containing missing values in income or group variables will be dropped.</p>
</td></tr>
<tr><td><code id="svygeidec_+3A_deff">deff</code></td>
<td>
<p>Return the design effect (see <code>survey::svymean</code>)</p>
</td></tr>
<tr><td><code id="svygeidec_+3A_linearized">linearized</code></td>
<td>
<p>Should a matrix of linearized variables be returned</p>
</td></tr>
<tr><td><code id="svygeidec_+3A_influence">influence</code></td>
<td>
<p>Should a matrix of (weighted) influence functions be returned? (for compatibility with <code><a href="survey.html#topic+svyby">svyby</a></code>)</p>
</td></tr>
<tr><td><code id="svygeidec_+3A_return.replicates">return.replicates</code></td>
<td>
<p>Return the replicate estimates?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>
<p>This measure only allows for strictly positive variables.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>cvydstat</code>&quot;, which are vectors with a &quot;<code>var</code>&quot; attribute giving the variance-covariance matrix and a &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Guilherme Jacob, Djalma Pessoa and Anthony Damico
</p>


<h3>References</h3>

<p>Anthony F. Shorrocks (1984). Inequality decomposition groups population subgroups.
<em>Econometrica</em>, v. 52, n. 6, 1984, pp. 1369-1385.
DOI <a href="https://doi.org/10.2307/1913511">doi:10.2307/1913511</a>.
</p>
<p>Martin Biewen and Stephen Jenkins (2002). Estimation of Generalized Entropy
and Atkinson Inequality Indices from Complex Survey Data. <em>DIW Discussion Papers</em>,
No.345,
URL <a href="https://www.diw.de/documents/publikationen/73/diw_01.c.40394.de/dp345.pdf">https://www.diw.de/documents/publikationen/73/diw_01.c.40394.de/dp345.pdf</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svygei">svygei</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survey)
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )

# linearized design
des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep(des_eusilc)

# replicate-weighted design
des_eusilc_rep &lt;- as.svrepdesign( des_eusilc , type = "bootstrap" )
des_eusilc_rep &lt;- convey_prep(des_eusilc_rep)

# linearized design
svygeidec( ~eqincome , ~rb090 , subset( des_eusilc, eqincome &gt; 0 ) , epsilon = 0 )
svygeidec( ~eqincome , ~rb090 , subset( des_eusilc, eqincome &gt; 0 ) , epsilon = .5 )
svygeidec( ~eqincome , ~rb090 , subset( des_eusilc, eqincome &gt; 0 ) , epsilon = 1 )
svygeidec( ~eqincome , ~rb090 , subset( des_eusilc, eqincome &gt; 0 ) , epsilon = 2 )

# replicate-weighted design
svygeidec( ~eqincome , ~rb090 , subset( des_eusilc_rep, eqincome &gt; 0 ) , epsilon = 0 )
svygeidec( ~eqincome , ~rb090 , subset( des_eusilc_rep, eqincome &gt; 0 ) , epsilon = .5 )
svygeidec( ~eqincome , ~rb090 , subset( des_eusilc_rep, eqincome &gt; 0 ) , epsilon = 1 )
svygeidec( ~eqincome , ~rb090 , subset( des_eusilc_rep, eqincome &gt; 0 ) , epsilon = 2 )

## Not run: 

# linearized design using a variable with missings
sub_des_eusilc &lt;- subset(des_eusilc, py010n &gt; 0 | is.na(py010n) )
svygeidec( ~py010n , ~rb090 , sub_des_eusilc , epsilon = 0 )
svygeidec( ~py010n , ~rb090 , sub_des_eusilc , epsilon = 0, na.rm = TRUE )
svygeidec( ~py010n , ~rb090 , sub_des_eusilc , epsilon = 1 )
svygeidec( ~py010n , ~rb090 , sub_des_eusilc , epsilon = 1, na.rm = TRUE )

# replicate-weighted design using a variable with missings
sub_des_eusilc_rep &lt;- subset(des_eusilc_rep, py010n &gt; 0 | is.na(py010n) )
svygeidec( ~py010n , ~rb090 , sub_des_eusilc_rep , epsilon = 0 )
svygeidec( ~py010n , ~rb090 , sub_des_eusilc_rep , epsilon = 0, na.rm = TRUE )
svygeidec( ~py010n , ~rb090 , sub_des_eusilc_rep , epsilon = 1 )
svygeidec( ~py010n , ~rb090 , sub_des_eusilc_rep , epsilon = 1, na.rm = TRUE )

# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'eusilc' , eusilc )

dbd_eusilc &lt;-
	svydesign(
		ids = ~rb030 ,
		strata = ~db040 ,
		weights = ~rb050 ,
		data="eusilc",
		dbname=dbfile,
		dbtype="SQLite"
	)

dbd_eusilc &lt;- convey_prep( dbd_eusilc )

# database-backed linearized design
svygeidec( ~eqincome , ~rb090 , subset(dbd_eusilc, eqincome &gt; 0) , epsilon = 0 )
svygeidec( ~eqincome , ~rb090 , subset(dbd_eusilc, eqincome &gt; 0) , epsilon = .5 )
svygeidec( ~eqincome , ~rb090 , subset(dbd_eusilc, eqincome &gt; 0) , epsilon = 1 )
svygeidec( ~eqincome , ~rb090 , subset(dbd_eusilc, eqincome &gt; 0) , epsilon = 2 )

# database-backed linearized design using a variable with missings
sub_dbd_eusilc &lt;- subset(dbd_eusilc, py010n &gt; 0 | is.na(py010n) )
svygeidec( ~py010n , ~rb090 , sub_dbd_eusilc , epsilon = 0 )
svygeidec( ~py010n , ~rb090 , sub_dbd_eusilc , epsilon = 0, na.rm = TRUE )
svygeidec( ~py010n , ~rb090 , sub_dbd_eusilc , epsilon = .5 )
svygeidec( ~py010n , ~rb090 , sub_dbd_eusilc , epsilon = .5, na.rm = TRUE )
svygeidec( ~py010n , ~rb090 , sub_dbd_eusilc , epsilon = 1 )
svygeidec( ~py010n , ~rb090 , sub_dbd_eusilc , epsilon = 1, na.rm = TRUE )
svygeidec( ~py010n , ~rb090 , sub_dbd_eusilc , epsilon = 2 )
svygeidec( ~py010n , ~rb090 , sub_dbd_eusilc , epsilon = 2, na.rm = TRUE )

dbRemoveTable( conn , 'eusilc' )

dbDisconnect( conn , shutdown = TRUE )


## End(Not run)

</code></pre>

<hr>
<h2 id='svygini'>Gini coefficient</h2><span id='topic+svygini'></span><span id='topic+svygini.survey.design'></span><span id='topic+svygini.svyrep.design'></span><span id='topic+svygini.DBIsvydesign'></span>

<h3>Description</h3>

<p>Estimate the Gini coefficient, an inequality measure
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svygini(formula, design, ...)

## S3 method for class 'survey.design'
svygini(
  formula,
  design,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  influence = FALSE,
  ...
)

## S3 method for class 'svyrep.design'
svygini(
  formula,
  design,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  return.replicates = FALSE,
  ...
)

## S3 method for class 'DBIsvydesign'
svygini(formula, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svygini_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="svygini_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svygini_+3A_...">...</code></td>
<td>
<p>future expansion</p>
</td></tr>
<tr><td><code id="svygini_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped?</p>
</td></tr>
<tr><td><code id="svygini_+3A_deff">deff</code></td>
<td>
<p>Return the design effect (see <code>survey::svymean</code>)</p>
</td></tr>
<tr><td><code id="svygini_+3A_linearized">linearized</code></td>
<td>
<p>Should a matrix of linearized variables be returned</p>
</td></tr>
<tr><td><code id="svygini_+3A_influence">influence</code></td>
<td>
<p>Should a matrix of (weighted) influence functions be returned? (for compatibility with <code><a href="survey.html#topic+svyby">svyby</a></code>)</p>
</td></tr>
<tr><td><code id="svygini_+3A_return.replicates">return.replicates</code></td>
<td>
<p>Return the replicate estimates?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>cvystat</code>&quot;, which are vectors with a &quot;<code>var</code>&quot; attribute giving the variance and a &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Djalma Pessoa, Guilherme Jacob, and Anthony Damico
</p>


<h3>References</h3>

<p>Guillaume Osier (2009). Variance estimation for complex indicators
of poverty and inequality. <em>Journal of the European Survey Research
Association</em>, Vol.3, No.3, pp. 167-195,
ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.
</p>
<p>Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators:
linearization and residual techniques. Survey Methodology, 25, 193-203,
URL <a href="https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882">https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svyarpr">svyarpr</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survey)
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )

# linearized design
des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep(des_eusilc)

svygini( ~eqincome , design = des_eusilc )

# replicate-weighted design
des_eusilc_rep &lt;- as.svrepdesign( des_eusilc , type = "bootstrap" )
des_eusilc_rep &lt;- convey_prep(des_eusilc_rep)

svygini( ~eqincome , design = des_eusilc_rep )

## Not run: 

# linearized design using a variable with missings
svygini( ~ py010n , design = des_eusilc )
svygini( ~ py010n , design = des_eusilc , na.rm = TRUE )
# replicate-weighted design using a variable with missings
svygini( ~ py010n , design = des_eusilc_rep )
svygini( ~ py010n , design = des_eusilc_rep , na.rm = TRUE )

# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'eusilc' , eusilc )

dbd_eusilc &lt;-
	svydesign(
		ids = ~rb030 ,
		strata = ~db040 ,
		weights = ~rb050 ,
		data="eusilc",
		dbname=dbfile,
		dbtype="SQLite"
	)

dbd_eusilc &lt;- convey_prep( dbd_eusilc )

svygini( ~ eqincome , design = dbd_eusilc )

dbRemoveTable( conn , 'eusilc' )

dbDisconnect( conn , shutdown = TRUE )


## End(Not run)

</code></pre>

<hr>
<h2 id='svygpg'>Linearization of the gender pay (wage) gap</h2><span id='topic+svygpg'></span><span id='topic+svygpg.survey.design'></span><span id='topic+svygpg.svyrep.design'></span><span id='topic+svygpg.DBIsvydesign'></span>

<h3>Description</h3>

<p>Estimate the difference between the average gross hourly earnings of men and women expressed as a percentage of the average gross hourly earnings of men.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svygpg(formula, design, ...)

## S3 method for class 'survey.design'
svygpg(formula, design, sex, na.rm = FALSE, ...)

## S3 method for class 'svyrep.design'
svygpg(formula, design, sex, na.rm = FALSE, ...)

## S3 method for class 'DBIsvydesign'
svygpg(formula, design, sex, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svygpg_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the gross hourly earnings variable</p>
</td></tr>
<tr><td><code id="svygpg_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svygpg_+3A_...">...</code></td>
<td>
<p>future expansion</p>
</td></tr>
<tr><td><code id="svygpg_+3A_sex">sex</code></td>
<td>
<p>formula with a factor with labels 'male' and 'female'</p>
</td></tr>
<tr><td><code id="svygpg_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>cvystat</code>&quot;, which are vectors with a &quot;<code>var</code>&quot; attribute giving the variance and a &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Djalma Pessoa and Anthony Damico
</p>


<h3>References</h3>

<p>Guillaume Osier (2009). Variance estimation for complex indicators
of poverty and inequality. <em>Journal of the European Survey Research
Association</em>, Vol.3, No.3, pp. 167-195,
ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.
</p>
<p>Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators:
linearization and residual techniques. Survey Methodology, 25, 193-203,
URL <a href="https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882">https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svyarpt">svyarpt</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(laeken)
library(survey)
data(ses)
names( ses ) &lt;- gsub( "size" , "size_" , tolower( names( ses ) ) )
des_ses &lt;- svydesign(id=~1, weights=~weights, data=ses)
des_ses &lt;- convey_prep(des_ses)

# linearized design
svygpg(~earningshour, des_ses, ~sex)
# replicate-weighted design
des_ses_rep &lt;-  as.svrepdesign( des_ses , type = "bootstrap" )
des_ses_rep &lt;- convey_prep(des_ses_rep)

svygpg(~earningshour, des_ses_rep, ~sex)

## Not run: 

# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'ses' , ses )

dbd_ses &lt;- svydesign(id=~1, weights=~weights, data="ses", dbname=dbfile, dbtype="SQLite")
dbd_ses &lt;- convey_prep( dbd_ses )

svygpg(formula=~earningshour, design=dbd_ses, sex= ~sex)

dbRemoveTable( conn , 'ses' )


## End(Not run)

</code></pre>

<hr>
<h2 id='svyiqalpha'>Linearization of a variable quantile</h2><span id='topic+svyiqalpha'></span><span id='topic+svyiqalpha.survey.design'></span><span id='topic+svyiqalpha.svyrep.design'></span><span id='topic+svyiqalpha.DBIsvydesign'></span>

<h3>Description</h3>

<p>Computes the linearized variable of a quantile of variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svyiqalpha(formula, design, ...)

## S3 method for class 'survey.design'
svyiqalpha(formula, design, alpha, na.rm = FALSE, ...)

## S3 method for class 'svyrep.design'
svyiqalpha(formula, design, alpha, na.rm = FALSE, ...)

## S3 method for class 'DBIsvydesign'
svyiqalpha(formula, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svyiqalpha_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="svyiqalpha_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svyiqalpha_+3A_...">...</code></td>
<td>
<p>arguments passed on to 'survey::oldsvyquantile'</p>
</td></tr>
<tr><td><code id="svyiqalpha_+3A_alpha">alpha</code></td>
<td>
<p>the order of the quantile</p>
</td></tr>
<tr><td><code id="svyiqalpha_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>cvystat</code>&quot;, which are vectors with a &quot;<code>var</code>&quot; attribute giving the variance and a &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Djalma Pessoa and Anthony Damico
</p>


<h3>References</h3>

<p>Guillaume Osier (2009). Variance estimation for complex indicators
of poverty and inequality. <em>Journal of the European Survey Research
Association</em>, Vol.3, No.3, pp. 167-195,
ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.
</p>
<p>Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators:
linearization and residual techniques. Survey Methodology, 25, 193-203,
URL <a href="https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882">https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svyarpr">svyarpr</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )
library(survey)
# linearized design
des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep(des_eusilc)

svyiqalpha( ~eqincome , design = des_eusilc, .50 )

# replicate-weighted design
des_eusilc_rep &lt;- as.svrepdesign( des_eusilc , type = "bootstrap" )
des_eusilc_rep &lt;- convey_prep(des_eusilc_rep)

svyiqalpha( ~eqincome , design = des_eusilc_rep, .50 )

## Not run: 

# linearized design using a variable with missings
svyiqalpha( ~ py010n , design = des_eusilc, .50 )
svyiqalpha( ~ py010n , design = des_eusilc , .50, na.rm = TRUE )
# replicate-weighted design using a variable with missings
svyiqalpha( ~ py010n , design = des_eusilc_rep, .50 )
svyiqalpha( ~ py010n , design = des_eusilc_rep ,.50, na.rm = TRUE )

# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'eusilc' , eusilc )

dbd_eusilc &lt;-
	svydesign(
		ids = ~rb030 ,
		strata = ~db040 ,
		weights = ~rb050 ,
		data="eusilc",
		dbname=dbfile,
		dbtype="SQLite"
	)

dbd_eusilc &lt;- convey_prep( dbd_eusilc )

svyiqalpha( ~ eqincome , design = dbd_eusilc, .50 )

dbRemoveTable( conn , 'eusilc' )

dbDisconnect( conn , shutdown = TRUE )


## End(Not run)

</code></pre>

<hr>
<h2 id='svyisq'>Linearization of the total below a quantile</h2><span id='topic+svyisq'></span><span id='topic+svyisq.survey.design'></span><span id='topic+svyisq.svyrep.design'></span><span id='topic+svyisq.DBIsvydesign'></span>

<h3>Description</h3>

<p>Computes the linearized variable of the total in the lower tail of
the distribution of a variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svyisq(formula, design, ...)

## S3 method for class 'survey.design'
svyisq(
  formula,
  design,
  alpha,
  quantile = FALSE,
  upper = FALSE,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  influence = FALSE,
  ...
)

## S3 method for class 'svyrep.design'
svyisq(
  formula,
  design,
  alpha,
  quantile = FALSE,
  upper = FALSE,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  return.replicates = FALSE,
  ...
)

## S3 method for class 'DBIsvydesign'
svyisq(formula, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svyisq_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="svyisq_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svyisq_+3A_...">...</code></td>
<td>
<p>arguments passed on to 'survey::oldsvyquantile'</p>
</td></tr>
<tr><td><code id="svyisq_+3A_alpha">alpha</code></td>
<td>
<p>the order of the quantile</p>
</td></tr>
<tr><td><code id="svyisq_+3A_quantile">quantile</code></td>
<td>
<p>return the upper bound of the lower tail</p>
</td></tr>
<tr><td><code id="svyisq_+3A_upper">upper</code></td>
<td>
<p>return the total in the total in the upper tail. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="svyisq_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped?</p>
</td></tr>
<tr><td><code id="svyisq_+3A_deff">deff</code></td>
<td>
<p>Return the design effect (see <code>survey::svymean</code>)</p>
</td></tr>
<tr><td><code id="svyisq_+3A_linearized">linearized</code></td>
<td>
<p>Should a matrix of linearized variables be returned</p>
</td></tr>
<tr><td><code id="svyisq_+3A_influence">influence</code></td>
<td>
<p>Should a matrix of (weighted) influence functions be returned? (for compatibility with <code><a href="survey.html#topic+svyby">svyby</a></code>)</p>
</td></tr>
<tr><td><code id="svyisq_+3A_return.replicates">return.replicates</code></td>
<td>
<p>Return the replicate estimates?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>cvystat</code>&quot;, which are vectors with a &quot;<code>var</code>&quot; attribute giving the variance and a &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Djalma Pessoa, Guilherme Jacob, and Anthony Damico
</p>


<h3>References</h3>

<p>Guillaume Osier (2009). Variance estimation for complex indicators
of poverty and inequality. <em>Journal of the European Survey Research
Association</em>, Vol.3, No.3, pp. 167-195,
ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.
</p>
<p>Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators:
linearization and residual techniques. Survey Methodology, 25, 193-203,
URL <a href="https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882">https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svyarpr">svyarpr</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )
library(survey)
des_eusilc &lt;- svydesign(ids = ~rb030, strata =~db040,  weights = ~rb050, data = eusilc)
des_eusilc &lt;- convey_prep(des_eusilc)
svyisq(~eqincome, design=des_eusilc,.20 , quantile = TRUE)

# replicate-weighted design
des_eusilc_rep &lt;- as.svrepdesign( des_eusilc , type = "bootstrap" )
des_eusilc_rep &lt;- convey_prep(des_eusilc_rep)

svyisq( ~eqincome , design = des_eusilc_rep, .20 , quantile = TRUE )

## Not run: 

# linearized design using a variable with missings
svyisq( ~ py010n , design = des_eusilc, .20 )
svyisq( ~ py010n , design = des_eusilc , .20, na.rm = TRUE )
# replicate-weighted design using a variable with missings
svyisq( ~ py010n , design = des_eusilc_rep, .20 )
svyisq( ~ py010n , design = des_eusilc_rep , .20,  na.rm = TRUE )

# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'eusilc' , eusilc )

dbd_eusilc &lt;-
	svydesign(
		ids = ~rb030 ,
		strata = ~db040 ,
		weights = ~rb050 ,
		data="eusilc",
		dbname=dbfile,
		dbtype="SQLite"
	)

dbd_eusilc &lt;- convey_prep( dbd_eusilc )

svyisq( ~ eqincome , design = dbd_eusilc, .20 )

dbRemoveTable( conn , 'eusilc' )

dbDisconnect( conn , shutdown = TRUE )


## End(Not run)

</code></pre>

<hr>
<h2 id='svyjdiv'>J-divergence measure</h2><span id='topic+svyjdiv'></span><span id='topic+svyjdiv.survey.design'></span><span id='topic+svyjdiv.svyrep.design'></span><span id='topic+svyjdiv.DBIsvydesign'></span>

<h3>Description</h3>

<p>Estimate the J-divergence measure, an entropy-based measure of inequality
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svyjdiv(formula, design, ...)

## S3 method for class 'survey.design'
svyjdiv(
  formula,
  design,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  influence = FALSE,
  ...
)

## S3 method for class 'svyrep.design'
svyjdiv(
  formula,
  design,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  return.replicates = FALSE,
  ...
)

## S3 method for class 'DBIsvydesign'
svyjdiv(formula, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svyjdiv_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="svyjdiv_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svyjdiv_+3A_...">...</code></td>
<td>
<p>future expansion</p>
</td></tr>
<tr><td><code id="svyjdiv_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped?</p>
</td></tr>
<tr><td><code id="svyjdiv_+3A_deff">deff</code></td>
<td>
<p>Return the design effect (see <code>survey::svymean</code>)</p>
</td></tr>
<tr><td><code id="svyjdiv_+3A_linearized">linearized</code></td>
<td>
<p>Should a matrix of linearized variables be returned</p>
</td></tr>
<tr><td><code id="svyjdiv_+3A_influence">influence</code></td>
<td>
<p>Should a matrix of (weighted) influence functions be returned? (for compatibility with <code><a href="survey.html#topic+svyby">svyby</a></code>)</p>
</td></tr>
<tr><td><code id="svyjdiv_+3A_return.replicates">return.replicates</code></td>
<td>
<p>Return the replicate estimates?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>
<p>This measure only allows for strictly positive variables.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>cvystat</code>&quot;, which are vectors with a &quot;<code>var</code>&quot; attribute giving the variance and a &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Guilherme Jacob, Djalma Pessoa, and Anthony Damico
</p>


<h3>References</h3>

<p>Nicholas Rohde (2016). J-divergence measurements of economic inequality.
J. R. Statist. Soc. A, v. 179, Part 3 (2016), pp. 847-870.
DOI <a href="https://doi.org/10.1111/rssa.12153">doi:10.1111/rssa.12153</a>.
</p>
<p>Martin Biewen and Stephen Jenkins (2002). Estimation of Generalized Entropy
and Atkinson Inequality Indices from Complex Survey Data. <em>DIW Discussion Papers</em>,
No.345,
URL <a href="https://www.diw.de/documents/publikationen/73/diw_01.c.40394.de/dp345.pdf">https://www.diw.de/documents/publikationen/73/diw_01.c.40394.de/dp345.pdf</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svygei">svygei</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survey)
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )

# linearized design
des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep(des_eusilc)

svyjdiv( ~eqincome , design = subset( des_eusilc , eqincome &gt; 0 ) )

# replicate-weighted design
des_eusilc_rep &lt;- as.svrepdesign( des_eusilc , type = "bootstrap" )
des_eusilc_rep &lt;- convey_prep(des_eusilc_rep)

svyjdiv( ~eqincome , design = subset( des_eusilc_rep , eqincome &gt; 0 ) )

## Not run: 

# linearized design using a variable with missings
svyjdiv( ~py010n , design = subset( des_eusilc , py010n &gt; 0 | is.na( py010n ) ) )
svyjdiv( ~py010n , design = subset( des_eusilc , py010n &gt; 0 | is.na( py010n ) ), na.rm = TRUE )
# replicate-weighted design using a variable with missings
svyjdiv( ~py010n , design = subset( des_eusilc_rep , py010n &gt; 0 | is.na( py010n ) ) )
svyjdiv( ~py010n , design = subset( des_eusilc_rep , py010n &gt; 0 | is.na( py010n ) ) , na.rm = TRUE )

# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'eusilc' , eusilc )

dbd_eusilc &lt;-
	svydesign(
		ids = ~rb030 ,
		strata = ~db040 ,
		weights = ~rb050 ,
		data="eusilc",
		dbname=dbfile,
		dbtype="SQLite"
	)

dbd_eusilc &lt;- convey_prep( dbd_eusilc )

svyjdiv( ~eqincome , design = subset( dbd_eusilc , eqincome &gt; 0 ) )

dbRemoveTable( conn , 'eusilc' )

dbDisconnect( conn , shutdown = TRUE )


## End(Not run)

</code></pre>

<hr>
<h2 id='svyjdivdec'>J-Divergence Decomposition</h2><span id='topic+svyjdivdec'></span><span id='topic+svyjdivdec.survey.design'></span><span id='topic+svyjdivdec.svyrep.design'></span><span id='topic+svyjdivdec.DBIsvydesign'></span>

<h3>Description</h3>

<p>Estimates the group decomposition of the generalized entropy index
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svyjdivdec(formula, subgroup, design, ...)

## S3 method for class 'survey.design'
svyjdivdec(
  formula,
  subgroup,
  design,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  influence = FALSE,
  ...
)

## S3 method for class 'svyrep.design'
svyjdivdec(
  formula,
  subgroup,
  design,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  return.replicates = FALSE,
  ...
)

## S3 method for class 'DBIsvydesign'
svyjdivdec(formula, subgroup, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svyjdivdec_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="svyjdivdec_+3A_subgroup">subgroup</code></td>
<td>
<p>a formula specifying the group variable</p>
</td></tr>
<tr><td><code id="svyjdivdec_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svyjdivdec_+3A_...">...</code></td>
<td>
<p>future expansion</p>
</td></tr>
<tr><td><code id="svyjdivdec_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped? Observations containing missing values in income or group variables will be dropped.</p>
</td></tr>
<tr><td><code id="svyjdivdec_+3A_deff">deff</code></td>
<td>
<p>Return the design effect (see <code>survey::svymean</code>)</p>
</td></tr>
<tr><td><code id="svyjdivdec_+3A_linearized">linearized</code></td>
<td>
<p>Should a matrix of linearized variables be returned</p>
</td></tr>
<tr><td><code id="svyjdivdec_+3A_influence">influence</code></td>
<td>
<p>Should a matrix of (weighted) influence functions be returned? (for compatibility with <code><a href="survey.html#topic+svyby">svyby</a></code>)</p>
</td></tr>
<tr><td><code id="svyjdivdec_+3A_return.replicates">return.replicates</code></td>
<td>
<p>Return the replicate estimates?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>
<p>This measure only allows for strictly positive variables.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>cvydstat</code>&quot;, which are vectors with a &quot;<code>var</code>&quot; attribute giving the variance-covariance matrix and a &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Guilherme Jacob, Djalma Pessoa, and Anthony Damico
</p>


<h3>References</h3>

<p>Anthony F. Shorrocks (1984). Inequality decomposition
by population subgroups. <em>Econometrica</em>, v. 52, n. 6, 1984, pp. 1369-1385.
DOI <a href="https://doi.org/10.2307/1913511">doi:10.2307/1913511</a>.
</p>
<p>Nicholas Rohde (2016). J-divergence measurements of economic inequality.
J. R. Statist. Soc. A, v. 179, Part 3 (2016), pp. 847-870.
DOI <a href="https://doi.org/10.1111/rssa.12153">doi:10.1111/rssa.12153</a>.
</p>
<p>Martin Biewen and Stephen Jenkins (2002). Estimation of Generalized Entropy
and Atkinson Inequality Indices from Complex Survey Data. <em>DIW Discussion Papers</em>,
No.345,
URL <a href="https://www.diw.de/documents/publikationen/73/diw_01.c.40394.de/dp345.pdf">https://www.diw.de/documents/publikationen/73/diw_01.c.40394.de/dp345.pdf</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svyjdiv">svyjdiv</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survey)
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )

# linearized design
des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep(des_eusilc)

# replicate-weighted design
des_eusilc_rep &lt;- as.svrepdesign( des_eusilc , type = "bootstrap" )
des_eusilc_rep &lt;- convey_prep(des_eusilc_rep)

# linearized design
svyjdivdec( ~eqincome , ~rb090 , subset(des_eusilc, eqincome &gt; 0) )

# replicate-weighted design
svyjdivdec( ~eqincome , ~rb090 , subset(des_eusilc_rep, eqincome &gt; 0) )

## Not run: 

# linearized design using a variable with missings
sub_des_eusilc &lt;- subset(des_eusilc, py010n &gt; 0 | is.na(py010n) )
svyjdivdec( ~py010n , ~rb090 , sub_des_eusilc )
svyjdivdec( ~py010n , ~rb090 , sub_des_eusilc , na.rm = TRUE )

# replicate-weighted design using a variable with missings
sub_des_eusilc_rep &lt;- subset(des_eusilc_rep, py010n &gt; 0 | is.na(py010n) )
svyjdivdec( ~py010n , ~rb090 , sub_des_eusilc_rep )
svyjdivdec( ~py010n , ~rb090 , sub_des_eusilc_rep , na.rm = TRUE )

# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'eusilc' , eusilc )

dbd_eusilc &lt;-
	svydesign(
		ids = ~rb030 ,
		strata = ~db040 ,
		weights = ~rb050 ,
		data="eusilc",
		dbname=dbfile,
		dbtype="SQLite"
	)

dbd_eusilc &lt;- convey_prep( dbd_eusilc )

# database-backed linearized design
svyjdivdec( ~eqincome , ~rb090 , subset(dbd_eusilc, eqincome &gt; 0) )

# database-backed linearized design using a variable with missings
sub_dbd_eusilc &lt;- subset(dbd_eusilc, py010n &gt; 0 | is.na(py010n) )
svyjdivdec( ~py010n , ~rb090 , sub_dbd_eusilc )
svyjdivdec( ~py010n , ~rb090 , sub_dbd_eusilc , na.rm = TRUE )

dbRemoveTable( conn , 'eusilc' )

dbDisconnect( conn , shutdown = TRUE )


## End(Not run)

</code></pre>

<hr>
<h2 id='svylorenz'>Lorenz curve</h2><span id='topic+svylorenz'></span><span id='topic+svylorenz.survey.design'></span><span id='topic+svylorenz.svyrep.design'></span><span id='topic+svylorenz.DBIsvydesign'></span>

<h3>Description</h3>

<p>Estimate the Lorenz curve, an inequality graph
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svylorenz(formula, design, ...)

## S3 method for class 'survey.design'
svylorenz(
  formula,
  design,
  quantiles = seq(0, 1, 0.1),
  empirical = FALSE,
  plot = TRUE,
  add = FALSE,
  curve.col = "red",
  ci = TRUE,
  alpha = 0.05,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  influence = FALSE,
  ...
)

## S3 method for class 'svyrep.design'
svylorenz(
  formula,
  design,
  quantiles = seq(0, 1, 0.1),
  empirical = FALSE,
  plot = TRUE,
  add = FALSE,
  curve.col = "red",
  ci = TRUE,
  alpha = 0.05,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  return.replicates = FALSE,
  ...
)

## S3 method for class 'DBIsvydesign'
svylorenz(formula, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svylorenz_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="svylorenz_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svylorenz_+3A_...">...</code></td>
<td>
<p>additional arguments passed to <code>plot</code> methods</p>
</td></tr>
<tr><td><code id="svylorenz_+3A_quantiles">quantiles</code></td>
<td>
<p>a sequence of probabilities that defines the quantiles sum to be calculated</p>
</td></tr>
<tr><td><code id="svylorenz_+3A_empirical">empirical</code></td>
<td>
<p>Should an empirical Lorenz curve be estimated as well? Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="svylorenz_+3A_plot">plot</code></td>
<td>
<p>Should the Lorenz curve be plotted? Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="svylorenz_+3A_add">add</code></td>
<td>
<p>Should a new curve be plotted on the current graph?</p>
</td></tr>
<tr><td><code id="svylorenz_+3A_curve.col">curve.col</code></td>
<td>
<p>a string defining the color of the curve.</p>
</td></tr>
<tr><td><code id="svylorenz_+3A_ci">ci</code></td>
<td>
<p>Should the confidence interval be plotted? Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="svylorenz_+3A_alpha">alpha</code></td>
<td>
<p>a number that especifies de confidence level for the graph.</p>
</td></tr>
<tr><td><code id="svylorenz_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped? Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="svylorenz_+3A_deff">deff</code></td>
<td>
<p>Return the design effect (see <code>survey::svymean</code>)</p>
</td></tr>
<tr><td><code id="svylorenz_+3A_linearized">linearized</code></td>
<td>
<p>Should a matrix of linearized variables be returned</p>
</td></tr>
<tr><td><code id="svylorenz_+3A_influence">influence</code></td>
<td>
<p>Should a matrix of (weighted) influence functions be returned? (for compatibility with <code><a href="survey.html#topic+svyby">svyby</a></code>)</p>
</td></tr>
<tr><td><code id="svylorenz_+3A_return.replicates">return.replicates</code></td>
<td>
<p>Return the replicate estimates?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>
<p>Notice that the 'empirical' curve is observation-based and is the one actually used to calculate the Gini index.
On the other hand, the quantile-based curve is used to estimate the shares, SEs and confidence intervals.
</p>
<p>This way, as the number of quantiles of the quantile-based function increases, the quantile-based curve approacches the observation-based curve.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>oldsvyquantile</code>&quot;, which are vectors with a &quot;<code>quantiles</code>&quot; attribute giving the proportion of income below that quantile,
and a &quot;<code>SE</code>&quot; attribute giving the standard errors of the estimates.
</p>


<h3>Author(s)</h3>

<p>Guilherme Jacob, Djalma Pessoa and Anthony Damico
</p>


<h3>References</h3>

<p>Milorad Kovacevic and David Binder (1997). Variance Estimation for Measures of Income
Inequality and Polarization - The Estimating Equations Approach. <em>Journal of Official Statistics</em>,
Vol.13, No.1, 1997. pp. 41 58. URL <a href="https://www.scb.se/contentassets/ca21efb41fee47d293bbee5bf7be7fb3/variance-estimation-for-measures-of-income-inequality-and-polarization---the-estimating-equations-approach.pdf">https://www.scb.se/contentassets/ca21efb41fee47d293bbee5bf7be7fb3/variance-estimation-for-measures-of-income-inequality-and-polarization&mdash;the-estimating-equations-approach.pdf</a>.
</p>
<p>Shlomo Yitzhaki and Robert Lerman (1989). Improving the accuracy of estimates of Gini coefficients.
<em>Journal of Econometrics</em>, Vol.42(1), pp. 43-47, September.
</p>
<p>Matti Langel (2012). <em>Measuring inequality in finite population sampling</em>. PhD thesis. URL <a href="http://doc.rero.ch/record/29204">http://doc.rero.ch/record/29204</a>.
</p>


<h3>See Also</h3>

<p><code><a href="survey.html#topic+oldsvyquantile">oldsvyquantile</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(survey)
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )

# linearized design
des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep( des_eusilc )
svylorenz( ~eqincome , des_eusilc, seq(0,1,.05), alpha = .01 )

# replicate-weighted design
des_eusilc_rep &lt;- as.svrepdesign( des_eusilc , type = "bootstrap" )
des_eusilc_rep &lt;- convey_prep( des_eusilc_rep )

svylorenz( ~eqincome , des_eusilc_rep, seq(0,1,.05), alpha = .01 )

## Not run: 

# linearized design using a variable with missings
svylorenz( ~py010n , des_eusilc, seq(0,1,.05), alpha = .01 )
svylorenz( ~py010n , des_eusilc, seq(0,1,.05), alpha = .01, na.rm = TRUE )
# demonstration of `curve.col=` and `add=` parameters
svylorenz( ~eqincome , des_eusilc, seq(0,1,.05), alpha = .05 , add = TRUE , curve.col = 'green' )
# replicate-weighted design using a variable with missings
svylorenz( ~py010n , des_eusilc_rep, seq(0,1,.05), alpha = .01 )
svylorenz( ~py010n , des_eusilc_rep, seq(0,1,.05), alpha = .01, na.rm = TRUE )



# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'eusilc' , eusilc )

dbd_eusilc &lt;-
	svydesign(
		ids = ~rb030 ,
		strata = ~db040 ,
		weights = ~rb050 ,
		data="eusilc",
		dbname=dbfile,
		dbtype="SQLite"
	)

dbd_eusilc &lt;- convey_prep( dbd_eusilc )

svylorenz( ~eqincome , dbd_eusilc, seq(0,1,.05), alpha = .01 )

# highlithing the difference between the quantile-based curve and the empirical version:
svylorenz( ~eqincome , dbd_eusilc, seq(0,1,.5), empirical = TRUE, ci = FALSE, curve.col = "green" )
svylorenz( ~eqincome , dbd_eusilc, seq(0,1,.5), alpha = .01, add = TRUE )
legend( "topleft", c("Quantile-based", "Empirical"), lwd = c(1,1), col = c("red", "green"))
# as the number of quantiles increases, the difference between the curves gets smaller
svylorenz( ~eqincome , dbd_eusilc, seq(0,1,.01), empirical = TRUE, ci = FALSE, curve.col = "green" )
svylorenz( ~eqincome , dbd_eusilc, seq(0,1,.01), alpha = .01, add = TRUE )
legend( "topleft", c("Quantile-based", "Empirical"), lwd = c(1,1), col = c("red", "green"))

dbRemoveTable( conn , 'eusilc' )

dbDisconnect( conn , shutdown = TRUE )


## End(Not run)

</code></pre>

<hr>
<h2 id='svypoormed'>Relative median poverty gap</h2><span id='topic+svypoormed'></span><span id='topic+svypoormed.survey.design'></span><span id='topic+svypoormed.svyrep.design'></span><span id='topic+svypoormed.DBIsvydesign'></span>

<h3>Description</h3>

<p>Estimate the median of incomes less than the at-risk-of-poverty threshold (<code>arpt</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svypoormed(formula, design, ...)

## S3 method for class 'survey.design'
svypoormed(formula, design, quantiles = 0.5, percent = 0.6, na.rm = FALSE, ...)

## S3 method for class 'svyrep.design'
svypoormed(formula, design, quantiles = 0.5, percent = 0.6, na.rm = FALSE, ...)

## S3 method for class 'DBIsvydesign'
svypoormed(formula, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svypoormed_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="svypoormed_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svypoormed_+3A_...">...</code></td>
<td>
<p>arguments passed on to 'survey::oldsvyquantile'</p>
</td></tr>
<tr><td><code id="svypoormed_+3A_quantiles">quantiles</code></td>
<td>
<p>income quantile, usually .5 (median)</p>
</td></tr>
<tr><td><code id="svypoormed_+3A_percent">percent</code></td>
<td>
<p>fraction of the quantile, usually .60</p>
</td></tr>
<tr><td><code id="svypoormed_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>cvystat</code>&quot;, which are vectors with a &quot;<code>var</code>&quot; attribute giving the variance and a &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Djalma Pessoa and Anthony Damico
</p>


<h3>References</h3>

<p>Guillaume Osier (2009). Variance estimation for complex indicators
of poverty and inequality. <em>Journal of the European Survey Research
Association</em>, Vol.3, No.3, pp. 167-195,
ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.
</p>
<p>Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators:
linearization and residual techniques. Survey Methodology, 25, 193-203,
URL <a href="https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882">https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svyarpt">svyarpt</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(survey)
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )

# linearized design
des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep( des_eusilc )

svypoormed( ~eqincome , design = des_eusilc )

# replicate-weighted design
des_eusilc_rep &lt;- as.svrepdesign( des_eusilc , type = "bootstrap" )
des_eusilc_rep &lt;- convey_prep( des_eusilc_rep )

svypoormed( ~eqincome , design = des_eusilc_rep )

## Not run: 

# linearized design using a variable with missings
svypoormed( ~ py010n , design = des_eusilc )
svypoormed( ~ py010n , design = des_eusilc , na.rm = TRUE )
# replicate-weighted design using a variable with missings
svypoormed( ~ py010n , design = des_eusilc_rep )
svypoormed( ~ py010n , design = des_eusilc_rep , na.rm = TRUE )

# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'eusilc' , eusilc )

dbd_eusilc &lt;-
	svydesign(
		ids = ~rb030 ,
		strata = ~db040 ,
		weights = ~rb050 ,
		data="eusilc",
		dbname=dbfile,
		dbtype="SQLite"
	)

dbd_eusilc &lt;- convey_prep( dbd_eusilc )

svypoormed( ~ eqincome , design = dbd_eusilc )

dbRemoveTable( conn , 'eusilc' )

dbDisconnect( conn , shutdown = TRUE )


## End(Not run)

</code></pre>

<hr>
<h2 id='svyqsr'>Quintile Share Ratio</h2><span id='topic+svyqsr'></span><span id='topic+svyqsr.survey.design'></span><span id='topic+svyqsr.svyrep.design'></span><span id='topic+svyqsr.DBIsvydesign'></span>

<h3>Description</h3>

<p>Estimate ratio of the total income received by the highest earners to the total income received by lowest earners, defaulting to 20
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svyqsr(formula, design, ...)

## S3 method for class 'survey.design'
svyqsr(
  formula,
  design,
  alpha1 = 0.2,
  alpha2 = (1 - alpha1),
  na.rm = FALSE,
  upper_quant = FALSE,
  lower_quant = FALSE,
  upper_tot = FALSE,
  lower_tot = FALSE,
  deff = FALSE,
  linearized = FALSE,
  influence = FALSE,
  ...
)

## S3 method for class 'svyrep.design'
svyqsr(
  formula,
  design,
  alpha1 = 0.2,
  alpha2 = (1 - alpha1),
  na.rm = FALSE,
  upper_quant = FALSE,
  lower_quant = FALSE,
  upper_tot = FALSE,
  lower_tot = FALSE,
  deff = FALSE,
  linearized = FALSE,
  return.replicates = FALSE,
  ...
)

## S3 method for class 'DBIsvydesign'
svyqsr(formula, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svyqsr_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="svyqsr_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svyqsr_+3A_...">...</code></td>
<td>
<p>future expansion</p>
</td></tr>
<tr><td><code id="svyqsr_+3A_alpha1">alpha1</code></td>
<td>
<p>order of the lower quintile</p>
</td></tr>
<tr><td><code id="svyqsr_+3A_alpha2">alpha2</code></td>
<td>
<p>order of the upper quintile</p>
</td></tr>
<tr><td><code id="svyqsr_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped?</p>
</td></tr>
<tr><td><code id="svyqsr_+3A_upper_quant">upper_quant</code></td>
<td>
<p>return the lower bound of highest earners</p>
</td></tr>
<tr><td><code id="svyqsr_+3A_lower_quant">lower_quant</code></td>
<td>
<p>return the upper bound of lowest earners</p>
</td></tr>
<tr><td><code id="svyqsr_+3A_upper_tot">upper_tot</code></td>
<td>
<p>return the highest earners total</p>
</td></tr>
<tr><td><code id="svyqsr_+3A_lower_tot">lower_tot</code></td>
<td>
<p>return the lowest earners total</p>
</td></tr>
<tr><td><code id="svyqsr_+3A_deff">deff</code></td>
<td>
<p>Return the design effect (see <code>survey::svymean</code>)</p>
</td></tr>
<tr><td><code id="svyqsr_+3A_linearized">linearized</code></td>
<td>
<p>Should a matrix of linearized variables be returned</p>
</td></tr>
<tr><td><code id="svyqsr_+3A_influence">influence</code></td>
<td>
<p>Should a matrix of (weighted) influence functions be returned? (for compatibility with <code><a href="survey.html#topic+svyby">svyby</a></code>)</p>
</td></tr>
<tr><td><code id="svyqsr_+3A_return.replicates">return.replicates</code></td>
<td>
<p>Return the replicate estimates?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>cvystat</code>&quot;, which are vectors with a &quot;<code>var</code>&quot; attribute giving the variance and a &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Djalma Pessoa and Anthony Damico
</p>


<h3>References</h3>

<p>Guillaume Osier (2009). Variance estimation for complex indicators
of poverty and inequality. <em>Journal of the European Survey Research
Association</em>, Vol.3, No.3, pp. 167-195,
ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.
</p>
<p>Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators:
linearization and residual techniques. Survey Methodology, 25, 193-203,
URL <a href="https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882">https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svyarpt">svyarpt</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(survey)
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )

# linearized design
des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep( des_eusilc )

svyqsr( ~eqincome , design = des_eusilc, upper_tot = TRUE, lower_tot = TRUE )

# replicate-weighted design
des_eusilc_rep &lt;- as.svrepdesign( des_eusilc , type = "bootstrap" )
des_eusilc_rep &lt;- convey_prep( des_eusilc_rep )

svyqsr( ~eqincome , design = des_eusilc_rep, upper_tot = TRUE, lower_tot = TRUE )

## Not run: 

# linearized design using a variable with missings
svyqsr( ~ db090 , design = des_eusilc )
svyqsr( ~ db090 , design = des_eusilc , na.rm = TRUE )
# replicate-weighted design using a variable with missings
svyqsr( ~ db090 , design = des_eusilc_rep )
svyqsr( ~ db090 , design = des_eusilc_rep , na.rm = TRUE )

# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'eusilc' , eusilc )

dbd_eusilc &lt;-
	svydesign(
		ids = ~rb030 ,
		strata = ~db040 ,
		weights = ~rb050 ,
		data="eusilc",
		dbname=dbfile,
		dbtype="SQLite"
	)

dbd_eusilc &lt;- convey_prep( dbd_eusilc )

svyqsr( ~ eqincome , design = dbd_eusilc )

dbRemoveTable( conn , 'eusilc' )

dbDisconnect( conn , shutdown = TRUE )


## End(Not run)

</code></pre>

<hr>
<h2 id='svyrich'>Richness measures</h2><span id='topic+svyrich'></span><span id='topic+svyrich.survey.design'></span><span id='topic+svyrich.svyrep.design'></span><span id='topic+svyrich.DBIsvydesign'></span>

<h3>Description</h3>

<p>Estimate Peichl, Schaefer and Scheicher (2010) richness measures.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svyrich(formula, design, ...)

## S3 method for class 'survey.design'
svyrich(
  formula,
  design,
  type_measure,
  g,
  type_thresh = "abs",
  abs_thresh = NULL,
  percent = 1.5,
  quantiles = 0.5,
  thresh = FALSE,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  ...
)

## S3 method for class 'svyrep.design'
svyrich(
  formula,
  design,
  type_measure,
  g,
  type_thresh = "abs",
  abs_thresh = NULL,
  percent = 1.5,
  quantiles = 0.5,
  thresh = FALSE,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  return.replicates = FALSE,
  ...
)

## S3 method for class 'DBIsvydesign'
svyrich(formula, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svyrich_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="svyrich_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svyrich_+3A_...">...</code></td>
<td>
<p>passed to <code>svyarpt</code></p>
</td></tr>
<tr><td><code id="svyrich_+3A_type_measure">type_measure</code></td>
<td>
<p>A string &quot;Cha&quot;, &quot;FGTT1&quot; or &quot;FGTT2&quot; defining the richness measure.</p>
</td></tr>
<tr><td><code id="svyrich_+3A_g">g</code></td>
<td>
<p>Richness preference parameter.</p>
</td></tr>
<tr><td><code id="svyrich_+3A_type_thresh">type_thresh</code></td>
<td>
<p>type of richness threshold. If &quot;abs&quot; the threshold is fixed and given the value of abs_thresh; if &quot;relq&quot; it is given by <code>percent</code> times the quantile; if &quot;relm&quot; it is <code>percent</code> times the mean.</p>
</td></tr>
<tr><td><code id="svyrich_+3A_abs_thresh">abs_thresh</code></td>
<td>
<p>richness threshold value if type_thresh is &quot;abs&quot;</p>
</td></tr>
<tr><td><code id="svyrich_+3A_percent">percent</code></td>
<td>
<p>the multiple of the quantile or mean used in the richness threshold definition. Defaults to <code>percent = 1.5</code>; i.e., 1.5 times the quantile or mean.</p>
</td></tr>
<tr><td><code id="svyrich_+3A_quantiles">quantiles</code></td>
<td>
<p>the quantile used used in the richness threshold definition. Defaults to <code>quantiles = .5</code>, the median.</p>
</td></tr>
<tr><td><code id="svyrich_+3A_thresh">thresh</code></td>
<td>
<p>return the richness threshold value</p>
</td></tr>
<tr><td><code id="svyrich_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped?</p>
</td></tr>
<tr><td><code id="svyrich_+3A_deff">deff</code></td>
<td>
<p>Return the design effect (see <code>survey::svymean</code>)</p>
</td></tr>
<tr><td><code id="svyrich_+3A_linearized">linearized</code></td>
<td>
<p>Should a matrix of linearized variables be returned</p>
</td></tr>
<tr><td><code id="svyrich_+3A_return.replicates">return.replicates</code></td>
<td>
<p>Return the replicate estimates?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>cvystat</code>&quot;, which are vectors with a &quot;<code>var</code>&quot; attribute giving the variance and a &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Guilherme Jacob, Djalma Pessoa and Anthony Damico
</p>


<h3>References</h3>

<p>Michal Brzezinski (2014). Statistical Inference for Richness Measures. <em>Applied Economics</em>,
Vol. 46, No. 14, pp. 1599-1608, DOI <a href="https://doi.org/10.1080/00036846.2014.880106">doi:10.1080/00036846.2014.880106</a>.
</p>
<p>Andreas Peichl, Thilo Schaefer, and Christoph Scheicher (2010). Measuring richness and poverty: A micro data
application to Europe and Germany. <em>Review of Income and Wealth</em>, Vol. 56, No.3, pp. 597-619.
</p>
<p>Guillaume Osier (2009). Variance estimation for complex indicators of poverty and inequality.
<em>Journal of the European Survey Research Association</em>, Vol.3, No.3, pp. 167-195,
ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svyfgt">svyfgt</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survey)
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )

# linearized design

des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep( des_eusilc )

# replicate-weighted design
des_eusilc_rep &lt;- as.svrepdesign( des_eusilc , type = "bootstrap" )
des_eusilc_rep &lt;- convey_prep( des_eusilc_rep )

# concave Chakravarty richness measure
# higher g= parameters tend toward headcount ratio, richness threshold fixed
svyrich(~eqincome, des_eusilc, type_measure = "Cha" , g=3,  abs_thresh=30000)
# g=1 parameter computes the richness gap index, richness threshold fixed
svyrich(~eqincome, des_eusilc, type_measure = "Cha" , g=1,  abs_thresh=30000)
# higher g= parameters tend toward headcount ratio, richness threshold equal to the median
svyrich(~eqincome, des_eusilc, type_measure = "Cha" , g=3, type_thresh= "relq" )
# g=1 parameter computes the richness gap index, richness threshold equal to the median
svyrich(~eqincome, des_eusilc, type_measure = "Cha" , g=1, type_thresh= "relq" )
# higher g= parameters tend toward headcount ratio, richness threshold equal to the mean
svyrich(~eqincome, des_eusilc, type_measure = "Cha" , g=3, type_thresh= "relm" )
# g=1 parameter computes the richness gap index, richness threshold equal to the mean
svyrich(~eqincome, des_eusilc, type_measure = "Cha" , g=1, type_thresh= "relm" )

#  using svrep.design:
# higher g= parameters tend toward headcount ratio, richness threshold fixed
svyrich(~eqincome, des_eusilc_rep, type_measure = "Cha" , g=3, abs_thresh=30000 )
# g=1 parameter computes the richness gap index, richness threshold fixed
svyrich(~eqincome, des_eusilc_rep, type_measure = "Cha" , g=1, abs_thresh=30000 )
# higher g= parameters tend toward headcount ratio, richness threshold equal to the median
svyrich(~eqincome, des_eusilc_rep, type_measure = "Cha" , g=3, type_thresh= "relq" )
# g=1 parameter computes the richness gap index, richness threshold equal to the median
svyrich(~eqincome, des_eusilc_rep, type_measure = "Cha" , g=1, type_thresh= "relq" )
# higher g= parameters tend toward headcount ratio, richness threshold equal to the mean
svyrich(~eqincome, des_eusilc_rep, type_measure = "Cha" , g=3, type_thresh= "relm" )
# g=1 parameter computes the richness gap index, richness threshold equal to the mean
svyrich(~eqincome, des_eusilc_rep, type_measure = "Cha" , g=1, type_thresh= "relm" )

## Not run: 

# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'eusilc' , eusilc )

dbd_eusilc &lt;-
	svydesign(
		ids = ~rb030 ,
		strata = ~db040 ,
		weights = ~rb050 ,
		data="eusilc",
		dbname=dbfile,
		dbtype="SQLite"
	)


dbd_eusilc &lt;- convey_prep( dbd_eusilc )

# higher g= parameters tend toward headcount ratio, richness threshold fixed
svyrich(~eqincome, dbd_eusilc, type_measure = "Cha" , g=3, abs_thresh=30000 )
# g=1 parameter computes the richness gap index, richness threshold fixed
svyrich(~eqincome, dbd_eusilc, type_measure = "Cha" , g=1, abs_thresh=30000 )
# higher g= parameters tend toward headcount ratio, richness threshold equal to the median
svyrich(~eqincome, dbd_eusilc, type_measure = "Cha" , g=3, type_thresh= "relq" )
# g=1 parameter computes the richness gap index, richness threshold equal to the median
svyrich(~eqincome, dbd_eusilc, type_measure = "Cha" , g=1, type_thresh= "relq" )
# higher g= parameters tend toward headcount ratio, richness threshold equal to the mean
svyrich(~eqincome, dbd_eusilc, type_measure = "Cha" , g=3, type_thresh= "relm" )
# g=1 parameter computes the richness gap index, richness threshold equal to the mean
svyrich(~eqincome, dbd_eusilc, type_measure = "Cha" , g=1, type_thresh= "relm" )

dbRemoveTable( conn , 'eusilc' )

dbDisconnect( conn , shutdown = TRUE )


## End(Not run)

</code></pre>

<hr>
<h2 id='svyrmir'>Relative median income ratio</h2><span id='topic+svyrmir'></span><span id='topic+svyrmir.survey.design'></span><span id='topic+svyrmir.svyrep.design'></span><span id='topic+svyrmir.DBIsvydesign'></span>

<h3>Description</h3>

<p>Estimate the ratio between the median income of people with age above 65 and the median income of people with age below 65.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svyrmir(formula, design, ...)

## S3 method for class 'survey.design'
svyrmir(
  formula,
  design,
  age,
  agelim = 65,
  quantiles = 0.5,
  na.rm = FALSE,
  med_old = FALSE,
  med_young = FALSE,
  ...
)

## S3 method for class 'svyrep.design'
svyrmir(
  formula,
  design,
  age,
  agelim = 65,
  quantiles = 0.5,
  na.rm = FALSE,
  med_old = FALSE,
  med_young = FALSE,
  ...
)

## S3 method for class 'DBIsvydesign'
svyrmir(formula, design, age, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svyrmir_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="svyrmir_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svyrmir_+3A_...">...</code></td>
<td>
<p>arguments passed on to 'survey::oldsvyquantile'</p>
</td></tr>
<tr><td><code id="svyrmir_+3A_age">age</code></td>
<td>
<p>formula defining the variable age</p>
</td></tr>
<tr><td><code id="svyrmir_+3A_agelim">agelim</code></td>
<td>
<p>the age cutpoint, the default is 65</p>
</td></tr>
<tr><td><code id="svyrmir_+3A_quantiles">quantiles</code></td>
<td>
<p>income quantile, usually .5 (median)</p>
</td></tr>
<tr><td><code id="svyrmir_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped?</p>
</td></tr>
<tr><td><code id="svyrmir_+3A_med_old">med_old</code></td>
<td>
<p>return the median income of people older than agelim</p>
</td></tr>
<tr><td><code id="svyrmir_+3A_med_young">med_young</code></td>
<td>
<p>return the median income of people younger than agelim</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>cvystat</code>&quot;, which are vectors with a &quot;<code>var</code>&quot; attribute giving the variance and a &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Djalma Pessoa and Anthony Damico
</p>


<h3>References</h3>

<p>Guillaume Osier (2009). Variance estimation for complex indicators
of poverty and inequality. <em>Journal of the European Survey Research
Association</em>, Vol.3, No.3, pp. 167-195,
ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.
</p>
<p>Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators:
linearization and residual techniques. Survey Methodology, 25, 193-203,
URL <a href="https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882">https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svyarpt">svyarpt</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survey)
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )

# missing completely at random, missingness rate = .20
ind_miss &lt;- rbinom(nrow(eusilc), 1, .20 )
eusilc$eqincome_miss &lt;- eusilc$eqincome
is.na(eusilc$eqincome_miss)&lt;- ind_miss==1

# linearized design
des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep(des_eusilc)

svyrmir( ~eqincome , design = des_eusilc , age = ~age, med_old = TRUE )

# replicate-weighted design
des_eusilc_rep &lt;- as.svrepdesign( des_eusilc , type = "bootstrap" )
des_eusilc_rep &lt;- convey_prep(des_eusilc_rep)

svyrmir( ~eqincome , design = des_eusilc_rep, age= ~age, med_old = TRUE )

## Not run: 

# linearized design using a variable with missings
svyrmir( ~ eqincome_miss , design = des_eusilc,age= ~age)
svyrmir( ~ eqincome_miss , design = des_eusilc , age= ~age, na.rm = TRUE )
# replicate-weighted design using a variable with missings
svyrmir( ~ eqincome_miss , design = des_eusilc_rep,age= ~age )
svyrmir( ~ eqincome_miss , design = des_eusilc_rep ,age= ~age, na.rm = TRUE )

# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'eusilc' , eusilc )

dbd_eusilc &lt;-
	svydesign(
		ids = ~rb030 ,
		strata = ~db040 ,
		weights = ~rb050 ,
		data="eusilc",
		dbname=dbfile,
		dbtype="SQLite"
	)

dbd_eusilc &lt;- convey_prep( dbd_eusilc )

svyrmir( ~eqincome , design = dbd_eusilc , age = ~age )

dbRemoveTable( conn , 'eusilc' )

dbDisconnect( conn , shutdown = TRUE )


## End(Not run)

</code></pre>

<hr>
<h2 id='svyrmpg'>Relative median poverty gap</h2><span id='topic+svyrmpg'></span><span id='topic+svyrmpg.survey.design'></span><span id='topic+svyrmpg.svyrep.design'></span><span id='topic+svyrmpg.DBIsvydesign'></span>

<h3>Description</h3>

<p>Estimate the difference between the at-risk-of-poverty threshold (<code>arpt</code>) and the median of incomes less than the <code>arpt</code> relative to the <code>arpt</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svyrmpg(formula, design, ...)

## S3 method for class 'survey.design'
svyrmpg(
  formula,
  design,
  quantiles = 0.5,
  percent = 0.6,
  na.rm = FALSE,
  thresh = FALSE,
  poor_median = FALSE,
  ...
)

## S3 method for class 'svyrep.design'
svyrmpg(
  formula,
  design,
  quantiles = 0.5,
  percent = 0.6,
  na.rm = FALSE,
  thresh = FALSE,
  poor_median = FALSE,
  ...
)

## S3 method for class 'DBIsvydesign'
svyrmpg(formula, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svyrmpg_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="svyrmpg_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svyrmpg_+3A_...">...</code></td>
<td>
<p>future expansion</p>
</td></tr>
<tr><td><code id="svyrmpg_+3A_quantiles">quantiles</code></td>
<td>
<p>income quantile, usually .5 (median)</p>
</td></tr>
<tr><td><code id="svyrmpg_+3A_percent">percent</code></td>
<td>
<p>fraction of the quantile, usually .60</p>
</td></tr>
<tr><td><code id="svyrmpg_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped?</p>
</td></tr>
<tr><td><code id="svyrmpg_+3A_thresh">thresh</code></td>
<td>
<p>return the poverty poverty threshold</p>
</td></tr>
<tr><td><code id="svyrmpg_+3A_poor_median">poor_median</code></td>
<td>
<p>return the median income of poor people</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>cvystat</code>&quot;, which are vectors with a &quot;<code>var</code>&quot; attribute giving the variance and a &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Djalma Pessoa and Anthony Damico
</p>


<h3>References</h3>

<p>Guillaume Osier (2009). Variance estimation for complex indicators
of poverty and inequality. <em>Journal of the European Survey Research
Association</em>, Vol.3, No.3, pp. 167-195,
ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.
</p>
<p>Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators:
linearization and residual techniques. Survey Methodology, 25, 193-203,
URL <a href="https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882">https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svyarpt">svyarpt</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(survey)
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )

# linearized design
des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep( des_eusilc )

svyrmpg( ~eqincome , design = des_eusilc, thresh = TRUE )

# replicate-weighted design
des_eusilc_rep &lt;- as.svrepdesign( des_eusilc , type = "bootstrap" )
des_eusilc_rep &lt;- convey_prep( des_eusilc_rep )

svyrmpg( ~eqincome , design = des_eusilc_rep, thresh = TRUE )

## Not run: 

# linearized design using a variable with missings
svyrmpg( ~ py010n , design = des_eusilc )
svyrmpg( ~ py010n , design = des_eusilc , na.rm = TRUE )
# replicate-weighted design using a variable with missings
svyrmpg( ~ py010n , design = des_eusilc_rep )
svyrmpg( ~ py010n , design = des_eusilc_rep , na.rm = TRUE )

# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'eusilc' , eusilc )

dbd_eusilc &lt;-
	svydesign(
		ids = ~rb030 ,
		strata = ~db040 ,
		weights = ~rb050 ,
		data="eusilc",
		dbname=dbfile,
		dbtype="SQLite"
	)

dbd_eusilc &lt;- convey_prep( dbd_eusilc )

svyrmpg( ~ eqincome , design = dbd_eusilc )

dbRemoveTable( conn , 'eusilc' )

dbDisconnect( conn , shutdown = TRUE )


## End(Not run)

</code></pre>

<hr>
<h2 id='svywatts'>Watts measure of poverty</h2><span id='topic+svywatts'></span><span id='topic+svywatts.survey.design'></span><span id='topic+svywatts.svyrep.design'></span><span id='topic+svywatts.DBIsvydesign'></span>

<h3>Description</h3>

<p>Estimate the Watts measure for the cases: <code>alpha=0</code> headcount ratio and <code>alpha=1</code> poverty gap index.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svywatts(formula, design, ...)

## S3 method for class 'survey.design'
svywatts(
  formula,
  design,
  type_thresh = "abs",
  abs_thresh = NULL,
  percent = 0.6,
  quantiles = 0.5,
  thresh = FALSE,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  influence = FALSE,
  ...
)

## S3 method for class 'svyrep.design'
svywatts(
  formula,
  design,
  type_thresh = "abs",
  abs_thresh = NULL,
  percent = 0.6,
  quantiles = 0.5,
  thresh = FALSE,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  return.replicates = FALSE,
  ...
)

## S3 method for class 'DBIsvydesign'
svywatts(formula, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svywatts_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="svywatts_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svywatts_+3A_...">...</code></td>
<td>
<p>passed to <code>svyarpr</code> and <code>svyarpt</code></p>
</td></tr>
<tr><td><code id="svywatts_+3A_type_thresh">type_thresh</code></td>
<td>
<p>type of poverty threshold. If &quot;abs&quot; the threshold is fixed and given the value
of abs_thresh; if &quot;relq&quot; it is given by percent times the quantile; if &quot;relm&quot; it is percent times the mean.</p>
</td></tr>
<tr><td><code id="svywatts_+3A_abs_thresh">abs_thresh</code></td>
<td>
<p>poverty threshold value if type_thresh is &quot;abs&quot;</p>
</td></tr>
<tr><td><code id="svywatts_+3A_percent">percent</code></td>
<td>
<p>the multiple of the the quantile or mean used in the poverty threshold definition</p>
</td></tr>
<tr><td><code id="svywatts_+3A_quantiles">quantiles</code></td>
<td>
<p>the quantile used used in the poverty threshold definition</p>
</td></tr>
<tr><td><code id="svywatts_+3A_thresh">thresh</code></td>
<td>
<p>return the poverty threshold value</p>
</td></tr>
<tr><td><code id="svywatts_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped?</p>
</td></tr>
<tr><td><code id="svywatts_+3A_deff">deff</code></td>
<td>
<p>Return the design effect (see <code>survey::svymean</code>)</p>
</td></tr>
<tr><td><code id="svywatts_+3A_linearized">linearized</code></td>
<td>
<p>Should a matrix of linearized variables be returned</p>
</td></tr>
<tr><td><code id="svywatts_+3A_influence">influence</code></td>
<td>
<p>Should a matrix of (weighted) influence functions be returned? (for compatibility with <code><a href="survey.html#topic+svyby">svyby</a></code>). Not implemented yet for linearized designs.</p>
</td></tr>
<tr><td><code id="svywatts_+3A_return.replicates">return.replicates</code></td>
<td>
<p>Return the replicate estimates?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>
<p>For the <code>svywatts</code> and <code>svywattsdec</code> functions, zeroes and negative numbers in the analysis domain cause an error because of the logarithm function in the definition of this poverty measure.  However, zeroes and negative values in the full survey design that are outside of the domain of analysis are valid to calculate the poverty threshold because zeroes and negatives are not a problem for computing quantiles (used when <code>type_thresh = "relq"</code>) or means (used when <code>type_thresh = "relm"</code>) . Missing values are treated differently.  <code>NA</code> values anywhere in the full survey design (not only the subset, or the domain of analysis) will cause these quantiles and means to return <code>NA</code> results.  To ignore <code>NA</code> values throughout, set <code>na.rm = TRUE</code>.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>cvystat</code>&quot;, which are vectors with a &quot;<code>var</code>&quot; attribute giving the variance and a &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Guilherme Jacob, Djalma Pessoa, and Anthony Damico
</p>


<h3>References</h3>

<p>Harold W. Watts (1968). An economic definition of poverty.
<em>Institute For Research on Poverty Discussion Papers</em>, n.5.
University of Wisconsin. URL <a href="https://www.irp.wisc.edu/publications/dps/pdfs/dp568.pdf">https://www.irp.wisc.edu/publications/dps/pdfs/dp568.pdf</a>.
</p>
<p>Buhong Zheng (2001). Statistical inference for poverty measures with relative poverty lines.
<em>Journal of Econometrics</em>, Vol. 101, pp. 337-356.
</p>
<p>Vijay Verma and Gianni Betti (2011). Taylor linearization sampling errors and design effects for poverty measures
and other complex statistics. <em>Journal Of Applied Statistics</em>, Vol.38, No.8, pp. 1549-1576,
DOI <a href="https://doi.org/10.1080/02664763.2010.515674">doi:10.1080/02664763.2010.515674</a>.
</p>
<p>Anthony B. Atkinson (1987). On the measurement of poverty.
<em>Econometrica</em>, Vol.55, No.4, (Jul., 1987), pp. 749-764,
DOI <a href="https://doi.org/10.2307/1911028">doi:10.2307/1911028</a>.
</p>
<p>Guillaume Osier (2009). Variance estimation for complex indicators
of poverty and inequality. <em>Journal of the European Survey Research
Association</em>, Vol.3, No.3, pp. 167-195,
ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.
</p>
<p>Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators:
linearization and residual techniques. Survey Methodology, 25, 193-203,
URL <a href="https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882">https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svyarpt">svyarpt</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survey)
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )

# linearized design

des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep( des_eusilc )

# replicate-weighted design
des_eusilc_rep &lt;- as.svrepdesign( des_eusilc , type = "bootstrap" )
des_eusilc_rep &lt;- convey_prep( des_eusilc_rep )

# filter positive incomes
des_eusilc &lt;- subset( des_eusilc , eqincome &gt; 0 )
des_eusilc_rep &lt;- subset( des_eusilc_rep , eqincome &gt; 0 )

# poverty threshold fixed
svywatts(~eqincome, des_eusilc ,  abs_thresh=10000)
# poverty threshold equal to arpt
svywatts(~eqincome, des_eusilc , type_thresh= "relq", thresh = TRUE)
# poverty threshold equal to 0.6 times the mean
svywatts(~eqincome, des_eusilc , type_thresh= "relm" , thresh = TRUE)
# using svrep.design:
# poverty threshold fixed
svywatts(~eqincome, des_eusilc_rep  ,  abs_thresh=10000)
# poverty threshold equal to arpt
svywatts(~eqincome, des_eusilc_rep  , type_thresh= "relq", thresh = TRUE)
# poverty threshold equal to 0.6 times the mean
svywatts(~eqincome, des_eusilc_rep  , type_thresh= "relm" , thresh = TRUE)

## Not run: 

# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'eusilc' , eusilc )

dbd_eusilc &lt;-
	svydesign(
		ids = ~rb030 ,
		strata = ~db040 ,
		weights = ~rb050 ,
		data="eusilc",
		dbname=dbfile,
		dbtype="SQLite"
	)

dbd_eusilc &lt;- convey_prep( dbd_eusilc )

# filter positive incomes
dbd_eusilc &lt;- subset( dbd_eusilc , eqincome &gt; 0 )

# poverty threshold fixed
svywatts(~eqincome, dbd_eusilc ,  abs_thresh=10000)
# poverty threshold equal to arpt
svywatts(~eqincome, dbd_eusilc , type_thresh= "relq", thresh = TRUE)
# poverty threshold equal to 0.6 times the mean
svywatts(~eqincome, dbd_eusilc , type_thresh= "relm" , thresh = TRUE)

dbRemoveTable( conn , 'eusilc' )

dbDisconnect( conn , shutdown = TRUE )


## End(Not run)

</code></pre>

<hr>
<h2 id='svywattsdec'>Watts poverty index decomposition</h2><span id='topic+svywattsdec'></span><span id='topic+svywattsdec.survey.design'></span><span id='topic+svywattsdec.svyrep.design'></span><span id='topic+svywattsdec.DBIsvydesign'></span>

<h3>Description</h3>

<p>Estimate the Watts (1968) poverty measure and its components
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svywattsdec(formula, design, ...)

## S3 method for class 'survey.design'
svywattsdec(
  formula,
  design,
  type_thresh = "abs",
  abs_thresh = NULL,
  percent = 0.6,
  quantiles = 0.5,
  na.rm = FALSE,
  thresh = FALSE,
  ...
)

## S3 method for class 'svyrep.design'
svywattsdec(
  formula,
  design,
  type_thresh = "abs",
  abs_thresh = NULL,
  percent = 0.6,
  quantiles = 0.5,
  na.rm = FALSE,
  thresh = FALSE,
  return.replicates = FALSE,
  ...
)

## S3 method for class 'DBIsvydesign'
svywattsdec(formula, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svywattsdec_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="svywattsdec_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svywattsdec_+3A_...">...</code></td>
<td>
<p>additional arguments. Currently not used.</p>
</td></tr>
<tr><td><code id="svywattsdec_+3A_type_thresh">type_thresh</code></td>
<td>
<p>type of poverty threshold. If &quot;abs&quot; the threshold is fixed and given the value
of abs_thresh; if &quot;relq&quot; it is given by percent times the quantile; if &quot;relm&quot; it is percent times the mean.</p>
</td></tr>
<tr><td><code id="svywattsdec_+3A_abs_thresh">abs_thresh</code></td>
<td>
<p>poverty threshold value if type_thresh is &quot;abs&quot;</p>
</td></tr>
<tr><td><code id="svywattsdec_+3A_percent">percent</code></td>
<td>
<p>the multiple of the the quantile or mean used in the poverty threshold definition</p>
</td></tr>
<tr><td><code id="svywattsdec_+3A_quantiles">quantiles</code></td>
<td>
<p>the quantile used used in the poverty threshold definition</p>
</td></tr>
<tr><td><code id="svywattsdec_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped?</p>
</td></tr>
<tr><td><code id="svywattsdec_+3A_thresh">thresh</code></td>
<td>
<p>return the poverty threshold value</p>
</td></tr>
<tr><td><code id="svywattsdec_+3A_return.replicates">return.replicates</code></td>
<td>
<p>Return the replicate estimates?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>
<p>For the <code>svywatts</code> and <code>svywattsdec</code> functions, zeroes and negative numbers in the analysis domain cause an error because of the logarithm function in the definition of this poverty measure.  However, zeroes and negative values in the full survey design that are outside of the domain of analysis are valid to calculate the poverty threshold because zeroes and negatives are not a problem for computing quantiles (used when <code>type_thresh = "relq"</code>) or means (used when <code>type_thresh = "relm"</code>) . Missing values are treated differently.  <code>NA</code> values anywhere in the full survey design (not only the subset, or the domain of analysis) will cause these quantiles and means to return <code>NA</code> results.  To ignore <code>NA</code> values throughout, set <code>na.rm = TRUE</code>.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>cvydstat</code>&quot;, with estimates for the Watts index, FGT(0), Watts Poverty Gap Ratio, and Theil(poor incomes) with a &quot;<code>var</code>&quot; attribute giving the variance-covariance matrix.
A &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Guilherme Jacob, Djalma Pessoa, and Anthony Damico
</p>


<h3>References</h3>

<p>McKinley L. Blackburn (1989). Poverty measurement: an index related to a Theil measure of inequality.
<em>Journal of Business &amp; Economic Statistics</em>, Vol.7, No.4, pp. 475-481,
DOI <a href="https://doi.org/10.1080/07350015.1989.10509760">doi:10.1080/07350015.1989.10509760</a>.
</p>
<p>Satya R. Chakravarty, Joseph Deutsch and Jacques Silber (2008).
On the Watts multidimensional poverty index and its decomposition.
<em>World Development</em>, Vol.36, No.6, pp.1067-1077.
</p>
<p>Harold W. Watts (1968). An economic definition of poverty.
<em>Institute For Research on Poverty Discussion Papers</em>, n.5.
University of Wisconsin. URL <a href="https://www.irp.wisc.edu/publications/dps/pdfs/dp568.pdf">https://www.irp.wisc.edu/publications/dps/pdfs/dp568.pdf</a>.
</p>
<p>Guillaume Osier (2009). Variance estimation for complex indicators
of poverty and inequality. <em>Journal of the European Survey Research
Association</em>, Vol.3, No.3, pp. 167-195,
ISSN 1864-3361, URL <a href="https://ojs.ub.uni-konstanz.de/srm/article/view/369">https://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.
</p>
<p>Jean-Claude Deville (1999). Variance estimation for complex statistics and estimators:
linearization and residual techniques. Survey Methodology, 25, 193-203,
URL <a href="https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882">https://www150.statcan.gc.ca/n1/en/catalogue/12-001-X19990024882</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svywatts">svywatts</a>,<a href="#topic+svyfgt">svyfgt</a>,<a href="#topic+svyfgt">svyfgt</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survey)
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )

# linearized design
des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep( des_eusilc )

# replicate-weighted design
des_eusilc_rep &lt;- as.svrepdesign( des_eusilc , type = "bootstrap" )
des_eusilc_rep &lt;- convey_prep( des_eusilc_rep )

# filter positive incomes
des_eusilc &lt;- subset( des_eusilc , eqincome &gt; 0 )
des_eusilc_rep &lt;- subset( des_eusilc_rep , eqincome &gt; 0 )

# absolute poverty threshold
svywattsdec(~eqincome, des_eusilc, abs_thresh=10000)
# poverty threshold equal to arpt
svywattsdec(~eqincome, des_eusilc, type_thresh= "relq" , thresh = TRUE)
# poverty threshold equal to 0.6 times the mean
svywattsdec(~eqincome, des_eusilc, type_thresh= "relm" , thresh = TRUE)

#  using svrep.design:
# absolute poverty threshold
svywattsdec(~eqincome, des_eusilc_rep, abs_thresh=10000)
# poverty threshold equal to arpt
svywattsdec(~eqincome, des_eusilc_rep, type_thresh= "relq" , thresh = TRUE)
# poverty threshold equal to 0.6 times the mean
svywattsdec(~eqincome, des_eusilc_rep, type_thresh= "relm" , thresh = TRUE)

## Not run: 

# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'eusilc' , eusilc )

dbd_eusilc &lt;-
	svydesign(
		ids = ~rb030 ,
		strata = ~db040 ,
		weights = ~rb050 ,
		data="eusilc",
		dbname=dbfile,
		dbtype="SQLite"
	)

dbd_eusilc &lt;- convey_prep( dbd_eusilc )
dbd_eusilc &lt;- subset( dbd_eusilc , eqincome &gt; 0 )

# absolute poverty threshold
svywattsdec(~eqincome, dbd_eusilc, abs_thresh=10000)
# poverty threshold equal to arpt
svywattsdec(~eqincome, dbd_eusilc, type_thresh= "relq" , thresh = TRUE)
# poverty threshold equal to 0.6 times the mean
svywattsdec(~eqincome, dbd_eusilc, type_thresh= "relm" , thresh = TRUE)

dbRemoveTable( conn , 'eusilc' )

dbDisconnect( conn , shutdown = TRUE )


## End(Not run)

</code></pre>

<hr>
<h2 id='svyzenga'>Zenga index</h2><span id='topic+svyzenga'></span><span id='topic+svyzenga.survey.design'></span><span id='topic+svyzenga.svyrep.design'></span><span id='topic+svyzenga.DBIsvydesign'></span>

<h3>Description</h3>

<p>Estimate the Zenga index, a measure of inequality
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svyzenga(formula, design, ...)

## S3 method for class 'survey.design'
svyzenga(
  formula,
  design,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  influence = FALSE,
  ...
)

## S3 method for class 'svyrep.design'
svyzenga(
  formula,
  design,
  na.rm = FALSE,
  deff = FALSE,
  linearized = FALSE,
  return.replicates = FALSE,
  ...
)

## S3 method for class 'DBIsvydesign'
svyzenga(formula, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svyzenga_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the income variable</p>
</td></tr>
<tr><td><code id="svyzenga_+3A_design">design</code></td>
<td>
<p>a design object of class <code>survey.design</code> or class <code>svyrep.design</code> from the <code>survey</code> library.</p>
</td></tr>
<tr><td><code id="svyzenga_+3A_...">...</code></td>
<td>
<p>future expansion</p>
</td></tr>
<tr><td><code id="svyzenga_+3A_na.rm">na.rm</code></td>
<td>
<p>Should cases with missing values be dropped?</p>
</td></tr>
<tr><td><code id="svyzenga_+3A_deff">deff</code></td>
<td>
<p>Return the design effect (see <code>survey::svymean</code>)</p>
</td></tr>
<tr><td><code id="svyzenga_+3A_linearized">linearized</code></td>
<td>
<p>Should a matrix of linearized variables be returned</p>
</td></tr>
<tr><td><code id="svyzenga_+3A_influence">influence</code></td>
<td>
<p>Should a matrix of (weighted) influence functions be returned? (for compatibility with <code><a href="survey.html#topic+svyby">svyby</a></code>)</p>
</td></tr>
<tr><td><code id="svyzenga_+3A_return.replicates">return.replicates</code></td>
<td>
<p>Return the replicate estimates?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>you must run the <code>convey_prep</code> function on your survey design object immediately after creating it with the <code>svydesign</code> or <code>svrepdesign</code> function.
</p>


<h3>Value</h3>

<p>Object of class &quot;<code>cvystat</code>&quot;, which are vectors with a &quot;<code>var</code>&quot; attribute giving the variance and a &quot;<code>statistic</code>&quot; attribute giving the name of the statistic.
</p>


<h3>Author(s)</h3>

<p>Djalma Pessoa, Guilherme Jacob, and Anthony Damico
</p>


<h3>References</h3>

<p>Lucio Barabesi, Giancarlo Diana and Pier Francesco Perri (2016). Linearization of inequality indices in the design-based framework. Statistics, 50(5), 1161-1172.
DOI <a href="https://doi.org/10.1080/02331888.2015.1135924">doi:10.1080/02331888.2015.1135924</a>.
</p>
<p>Matti Langel and Yves Tille (2012). Inference by linearization for Zenga's new inequality index: a comparison with the Gini index.
Metrika, 75, 1093-1110. DOI <a href="https://doi.org/10.1007/s00184-011-0369-1">doi:10.1007/s00184-011-0369-1</a>.
</p>
<p>Matti Langel (2012). Measuring inequality in finite population sampling.
PhD thesis: Universite de Neuchatel,
URL <a href="https://doc.rero.ch/record/29204/files/00002252.pdf">https://doc.rero.ch/record/29204/files/00002252.pdf</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+svygini">svygini</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survey)
library(laeken)
data(eusilc) ; names( eusilc ) &lt;- tolower( names( eusilc ) )

# linearized design
des_eusilc &lt;- svydesign( ids = ~rb030 , strata = ~db040 ,  weights = ~rb050 , data = eusilc )
des_eusilc &lt;- convey_prep(des_eusilc)

svyzenga( ~eqincome , design = des_eusilc )

# replicate-weighted design
des_eusilc_rep &lt;- as.svrepdesign( des_eusilc , type = "bootstrap" )
des_eusilc_rep &lt;- convey_prep(des_eusilc_rep)

svyzenga( ~eqincome , design = des_eusilc_rep )

## Not run: 

# linearized design using a variable with missings
svyzenga( ~ py010n , design = des_eusilc )
svyzenga( ~ py010n , design = des_eusilc , na.rm = TRUE )
# replicate-weighted design using a variable with missings
svyzenga( ~ py010n , design = des_eusilc_rep )
svyzenga( ~ py010n , design = des_eusilc_rep , na.rm = TRUE )

# database-backed design
library(RSQLite)
library(DBI)
dbfile &lt;- tempfile()
conn &lt;- dbConnect( RSQLite::SQLite() , dbfile )
dbWriteTable( conn , 'eusilc' , eusilc )

dbd_eusilc &lt;-
	svydesign(
		ids = ~rb030 ,
		strata = ~db040 ,
		weights = ~rb050 ,
		data="eusilc",
		dbname=dbfile,
		dbtype="SQLite"
	)

dbd_eusilc &lt;- convey_prep( dbd_eusilc )

svyzenga( ~ eqincome , design = dbd_eusilc )

dbRemoveTable( conn , 'eusilc' )

dbDisconnect( conn , shutdown = TRUE )


## End(Not run)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
