<!DOCTYPE html><html><head><title>Help for package tpfp</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {tpfp}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#caseID_m_q_c_vector_from_NI_M_Q_C'><p>Creats vectors: <code>m,q,c</code>  from integers: <code>M,Q,C</code></p></a></li>
<li><a href='#convertFromJafroc'><p>Convert  <code>.xlsx</code> File</p>
of <strong><em>Jafroc</em></strong>
into <span class="rlang"><b>R</b></span> object</a></li>
<li><a href='#convertFromJafrocCasewise'><p>Convert  <code>.xlsx</code> File</p>
of <strong><em>Jafroc</em></strong>
into <span class="rlang"><b>R</b></span> object</a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Counts the Number of True Positives and False Positives</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.1</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Issei Tsunoda &lt;tsunoda.issei1111@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Calculates the number of true positives and false positives from a dataset formatted for Jackknife alternative free-response receiver operating characteristic which is used for statistical analysis which is explained in the book 'Chakraborty' 'DP' (2017), "Observer Performance Methods for Diagnostic Imaging - Foundations, Modeling, and Applications with R-Based Examples", Taylor-Francis <a href="https://www.crcpress.com/9781482214840">https://www.crcpress.com/9781482214840</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>knitr, xlsx, readxl, tcltk</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown, openxlsx</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-11-01 06:48:34 UTC; tsuno</td>
</tr>
<tr>
<td>Author:</td>
<td>Issei Tsunoda [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-11-02 14:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='caseID_m_q_c_vector_from_NI_M_Q_C'>Creats vectors: <code>m,q,c</code>  from integers: <code>M,Q,C</code></h2><span id='topic+caseID_m_q_c_vector_from_NI_M_Q_C'></span>

<h3>Description</h3>

<p>Makes <code>m,q,c</code> vectors
from a collection of three integers <code>M,Q,C</code>,
where three vectors <code>m,q,c</code>
denotes modality ID, reader ID, confidence level,
respectively.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>caseID_m_q_c_vector_from_NI_M_Q_C(NI, M, Q, C)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="caseID_m_q_c_vector_from_NI_M_Q_C_+3A_ni">NI</code></td>
<td>
<p>A positive integer, indicating the number of cases, i.e., images</p>
</td></tr>
<tr><td><code id="caseID_m_q_c_vector_from_NI_M_Q_C_+3A_m">M</code></td>
<td>
<p>A positive integer, representing modality ID</p>
</td></tr>
<tr><td><code id="caseID_m_q_c_vector_from_NI_M_Q_C_+3A_q">Q</code></td>
<td>
<p>A positive integer, representing reader ID</p>
</td></tr>
<tr><td><code id="caseID_m_q_c_vector_from_NI_M_Q_C_+3A_c">C</code></td>
<td>
<p>A positive integer, representing confidence level</p>
</td></tr>
</table>


<h3>Details</h3>

<p>My research is not supported any found, I am completely independent
and only my own or my parents are supported my research.
No internet, poor condition, I made this. I must go on untill jounal accepts my manuscripts.
</p>
<p>I am not happy to spent with FROC analysis, since it is not my interest.
I want to research pure mathematics. I do not want to waste a time.
I do not want to waste a time in hospital or plurigo nodularis.
When I become happy? This program helps me? With great pain at 2019 Sept.
2019 Sept. 8
</p>


<h3>Value</h3>

<p>A data-frame, including three vectors, which are named <code>m,q,c</code>  representing modality ID and reader ID and confidence level, respectively.
</p>
<p>For example, the resulting object of <code>a &lt;- m_q_c_vector_from_M_Q_C(2,3,4)</code> is given by
</p>
<p><code>  &gt; a</code>
</p>

<table>
<tr>
 <td style="text-align: right;">
  <code> m </code></td><td style="text-align: right;"> <code> q</code> </td><td style="text-align: right;">  <code>c</code> </td>
</tr>
<tr>
 <td style="text-align: right;">
  -------- </td><td style="text-align: right;"> ------ </td><td style="text-align: right;"> ---------</td>
</tr>
<tr>
 <td style="text-align: right;">
  1 </td><td style="text-align: right;"> 1 </td><td style="text-align: right;"> 4</td>
</tr>
<tr>
 <td style="text-align: right;">
  1 </td><td style="text-align: right;"> 1 </td><td style="text-align: right;"> 3</td>
</tr>
<tr>
 <td style="text-align: right;">
  1 </td><td style="text-align: right;"> 1 </td><td style="text-align: right;"> 2</td>
</tr>
<tr>
 <td style="text-align: right;">
  1 </td><td style="text-align: right;"> 1 </td><td style="text-align: right;"> 1</td>
</tr>
<tr>
 <td style="text-align: right;">
  1 </td><td style="text-align: right;"> 2 </td><td style="text-align: right;"> 4</td>
</tr>
<tr>
 <td style="text-align: right;">
  1 </td><td style="text-align: right;"> 2 </td><td style="text-align: right;"> 3</td>
</tr>
<tr>
 <td style="text-align: right;">
  1 </td><td style="text-align: right;"> 2 </td><td style="text-align: right;"> 2</td>
</tr>
<tr>
 <td style="text-align: right;">
  1 </td><td style="text-align: right;"> 2 </td><td style="text-align: right;"> 1</td>
</tr>
<tr>
 <td style="text-align: right;">
  1 </td><td style="text-align: right;"> 3 </td><td style="text-align: right;"> 4</td>
</tr>
<tr>
 <td style="text-align: right;">
  1 </td><td style="text-align: right;"> 3 </td><td style="text-align: right;"> 3</td>
</tr>
<tr>
 <td style="text-align: right;">
  1 </td><td style="text-align: right;"> 3 </td><td style="text-align: right;"> 2</td>
</tr>
<tr>
 <td style="text-align: right;">
  1 </td><td style="text-align: right;"> 3 </td><td style="text-align: right;"> 1</td>
</tr>
<tr>
 <td style="text-align: right;">
  2 </td><td style="text-align: right;"> 1 </td><td style="text-align: right;"> 4</td>
</tr>
<tr>
 <td style="text-align: right;">
  2 </td><td style="text-align: right;"> 1 </td><td style="text-align: right;"> 3</td>
</tr>
<tr>
 <td style="text-align: right;">
  2 </td><td style="text-align: right;"> 1 </td><td style="text-align: right;"> 2</td>
</tr>
<tr>
 <td style="text-align: right;">
  2 </td><td style="text-align: right;"> 1 </td><td style="text-align: right;"> 1</td>
</tr>
<tr>
 <td style="text-align: right;">
  2 </td><td style="text-align: right;"> 2 </td><td style="text-align: right;"> 4</td>
</tr>
<tr>
 <td style="text-align: right;">
  2 </td><td style="text-align: right;"> 2 </td><td style="text-align: right;"> 3</td>
</tr>
<tr>
 <td style="text-align: right;">
  2 </td><td style="text-align: right;"> 2 </td><td style="text-align: right;"> 2</td>
</tr>
<tr>
 <td style="text-align: right;">
  2 </td><td style="text-align: right;"> 2 </td><td style="text-align: right;"> 1</td>
</tr>
<tr>
 <td style="text-align: right;">
  2 </td><td style="text-align: right;"> 3 </td><td style="text-align: right;"> 4</td>
</tr>
<tr>
 <td style="text-align: right;">
  2 </td><td style="text-align: right;"> 3 </td><td style="text-align: right;"> 3</td>
</tr>
<tr>
 <td style="text-align: right;">
  2 </td><td style="text-align: right;"> 3 </td><td style="text-align: right;"> 2</td>
</tr>
<tr>
 <td style="text-align: right;">
  2 </td><td style="text-align: right;"> 3 </td><td style="text-align: right;"> 1
</td>
</tr>

</table>



<h3>Examples</h3>

<pre><code class='language-R'>

#========================================================================================
#                     Create a ID vectors
#========================================================================================

  a &lt;- caseID_m_q_c_vector_from_NI_M_Q_C(2,2,3,4)

  a$caseID
  a$m
  a$q
  a$c


</code></pre>

<hr>
<h2 id='convertFromJafroc'>Convert  <code>.xlsx</code> File
of <strong><em>Jafroc</em></strong>
into <span class="rlang"><b>R</b></span> object</h2><span id='topic+convertFromJafroc'></span>

<h3>Description</h3>

<p><strong><em>Convert an FROC dataset</em></strong>
</p>

<dl>
<dt> <strong><em>from</em></strong>    </dt><dd> <p><code>.xlsx</code> file of <strong><em>Jafroc</em></strong>  </p>
</dd>
<dt> <strong><em>into</em></strong>    </dt><dd> <p><span class="rlang"><b>R</b></span> object   </p>
</dd>
</dl>



<h3>Usage</h3>

<pre><code class='language-R'>convertFromJafroc(No.of.Modalities, No.of.readers, No.of.confidence.levels)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="convertFromJafroc_+3A_no.of.modalities">No.of.Modalities</code></td>
<td>
<p>A positive integer, indicating the number of <em>modalities</em> for FROC data-set in <code>.xlsx</code> file.</p>
</td></tr>
<tr><td><code id="convertFromJafroc_+3A_no.of.readers">No.of.readers</code></td>
<td>
<p>A positive integer, indicating the number of <em>readers</em>  for FROC data-set  in an <code>.xlsx</code> file.</p>
</td></tr>
<tr><td><code id="convertFromJafroc_+3A_no.of.confidence.levels">No.of.confidence.levels</code></td>
<td>
<p>A positive integer, indicating the number of <em>confidence levels</em>  for FROC data-set in <code>.xlsx</code> file.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>The <code>.xlsx</code> file of Jafroc
consists of three sheets named <strong><em>TP, FP, Truth</em></strong>, <strong><em> precisely! Correctly! </em></strong>
(other names never be permitted !!)
</p>
<p><strong><em>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;  TP &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</em></strong>
</p>
<p>A sheet named <strong><em>TP</em></strong>  consists of five columns <strong><em> precisely </em></strong>  named from the right hand side:
</p>
<p><strong><em>ReaderID,	ModalityID,	CaseID,	LesionID,	TP_Rating.</em></strong>
</p>
<p><strong><em>NOTE.</em></strong>
</p>

<dl>
<dt>  <strong><em>CaseID</em></strong>            </dt><dd><p>  Note that the above word <strong><em>CaseID</em></strong> means the Image ID vectors indicating the ID of radiographs.  That is &quot;case = image = radiograph&quot;.</p>
</dd>
<dt> <strong><em>the first row</em></strong>      </dt><dd><p>  Note that the first row of each sheat of <code>.xlsx</code> file is constructed by the names of column as follows:   </p>
</dd>
</dl>

<p><strong>An Example of the sheet named <em>TP</em> in a <em><code>.xlsx</code></em> file for the <em>Jafroc</em> software</strong>
</p>
<p><strong> Interpretation of table</strong>
</p>
<p>Throughout this explanation, we follow the convention that readers are male.
</p>
<p>For example,
the first row means
the first reader (ReaderID=1) correctly find
the first lesion (LesionID = 1)
in the first image (CaseID = 1)
taken by the first modality (ModalityID = 1)
with his rating 5 (TP_Rating =5).
</p>
<p>Similarly,
the second row means
the first reader (ReaderID=1) correctly find
the 4-th lesion (LesionID = 4)
in the second image (CaseID = 2)
taken by the 2-nd modality (ModalityID = 2)
with his rating 4 (TP_Rating = 4).
</p>

<table>
<tr>
 <td style="text-align: center;">
  ReaderID </td><td style="text-align: center;">   ModalityID   </td><td style="text-align: center;">   CaseID </td><td style="text-align: center;">   LesionID </td><td style="text-align: center;">   TP_Rating.</td>
</tr>
<tr>
 <td style="text-align: center;">
  -------------------</td><td style="text-align: center;">-------------------</td><td style="text-align: center;">-------------------</td><td style="text-align: center;">-------------------</td><td style="text-align: center;">------------------</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">  1</td><td style="text-align: center;"> 5</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 2  </td><td style="text-align: center;"> 1</td><td style="text-align: center;"> 4</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 4  </td><td style="text-align: center;"> 1</td><td style="text-align: center;"> 5</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 8  </td><td style="text-align: center;"> 1</td><td style="text-align: center;"> 3</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 8  </td><td style="text-align: center;"> 2</td><td style="text-align: center;"> 4</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 9  </td><td style="text-align: center;"> 1</td><td style="text-align: center;"> 4</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 9  </td><td style="text-align: center;"> 2</td><td style="text-align: center;"> 3</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 9  </td><td style="text-align: center;"> 3</td><td style="text-align: center;"> 5</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 11 </td><td style="text-align: center;"> 1</td><td style="text-align: center;"> 3</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">  1</td><td style="text-align: center;"> 4</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 4  </td><td style="text-align: center;"> 1</td><td style="text-align: center;"> 4</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 5  </td><td style="text-align: center;"> 1</td><td style="text-align: center;"> 4</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 8  </td><td style="text-align: center;"> 1</td><td style="text-align: center;"> 1</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 8  </td><td style="text-align: center;"> 2</td><td style="text-align: center;"> 2</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 8  </td><td style="text-align: center;"> 3</td><td style="text-align: center;"> 2</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 10  </td><td style="text-align: center;"> 1</td><td style="text-align: center;"> 3</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 10 </td><td style="text-align: center;"> 2</td><td style="text-align: center;"> 2</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 11  </td><td style="text-align: center;"> 1</td><td style="text-align: center;"> 2</td>
</tr>
<tr>
 <td style="text-align: center;">

  : </td><td style="text-align: center;"> : </td><td style="text-align: center;"> :  </td><td style="text-align: center;"> :</td><td style="text-align: center;"> :</td>
</tr>
<tr>
 <td style="text-align: center;">
  : </td><td style="text-align: center;"> : </td><td style="text-align: center;"> :  </td><td style="text-align: center;"> :</td><td style="text-align: center;"> :</td>
</tr>
<tr>
 <td style="text-align: center;">    </td>
</tr>

</table>

<p><strong><em>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;  FP &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</em></strong>
</p>
<p>A sheet named <strong>FP</strong>  consists of four columns  <strong><em> precisely </em></strong>
named from the right hand side: <strong>ReaderID,	ModalityID,	CaseID,	FP_Rating</strong>
<strong>An Example of a sheet named FP in a file of extension &quot;<code>.xlsx</code>&quot; file for the Jafroc software</strong>
</p>
<p><strong> Interpretation of table</strong>
</p>
<p>For example,
the first row means that
the first reader (ReaderID=1) makes
a false alarm location
in the first image (CaseID = 1)
taken by the first modality (ModalityID = 1)
with his rating 2 (TP_Rating =2).
</p>
<p>Similarly,
the second row means that
the first reader (ReaderID=1) makes
a false alarm location
in the second image (CaseID = 2)
taken by the 2-nd modality (ModalityID = 2)
with his rating 1 (TP_Rating = 1).
</p>
<p>Similarly,
the 6-th and 7-th rows mean that
the first reader (ReaderID=1) makes
two false alarm location
in the second patient (CaseID = 2).
The first false alarm  is in the image
taken by the 1-st modality (ModalityID = 1)
with his rating 1 (TP_Rating = 1).
The second false alarm  is in the image
taken by the 3-rd modality (ModalityID = 3)
with his rating 2 (TP_Rating = 2).
</p>

<table>
<tr>
 <td style="text-align: center;">
  ReaderID </td><td style="text-align: center;">   ModalityID   </td><td style="text-align: center;">   CaseID  </td><td style="text-align: center;">   FP_Rating.</td>
</tr>
<tr>
 <td style="text-align: center;">
-------------------</td><td style="text-align: center;">-------------------</td><td style="text-align: center;">-------------------</td><td style="text-align: center;">------------------</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">   2</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 2  </td><td style="text-align: center;">  1</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 3  </td><td style="text-align: center;">  1</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 5  </td><td style="text-align: center;">  2</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 7 </td><td style="text-align: center;">   1</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 7  </td><td style="text-align: center;">   2</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 9  </td><td style="text-align: center;">   3</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 9  </td><td style="text-align: center;">   4</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 10 </td><td style="text-align: center;">   1</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">    2</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 2  </td><td style="text-align: center;">   3</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 3  </td><td style="text-align: center;">   4</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 8  </td><td style="text-align: center;">   1</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 9  </td><td style="text-align: center;">  1</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 11  </td><td style="text-align: center;">   1</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 14  </td><td style="text-align: center;">  1</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 15 </td><td style="text-align: center;">   1</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 21  </td><td style="text-align: center;">   2</td>
</tr>
<tr>
 <td style="text-align: center;">
  : </td><td style="text-align: center;"> :  </td><td style="text-align: center;"> :</td><td style="text-align: center;"> :</td>
</tr>
<tr>
 <td style="text-align: center;">
  : </td><td style="text-align: center;"> :  </td><td style="text-align: center;"> :</td><td style="text-align: center;"> :</td>
</tr>
<tr>
 <td style="text-align: center;">
     </td>
</tr>

</table>

<p><strong><em>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;  Truth &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</em></strong>
</p>
<p>A sheet named <strong>Truth </strong>  consists of three columns
<strong><em> precisely </em></strong>  named from the right
hand side:<strong>CaseID,	LesionID,	Weight</strong> .
</p>
<p><strong>An Example of a sheet named Truth in a <code>.xlsx</code> file for the Jafroc software</strong>
</p>
<p><strong> Interpretation of table</strong>
</p>
<p>For example, the first image (CaseID = 1) contains
three lesions each of which is named 1,2,3, namely LesionID = 1,2,3.
For example, the second image (CaseID = 2) contains
two lesions each of which is named 1,2, namely LesionID = 1,2.
For example, the third image (CaseID = 3) contains
a sinle lesion named 1, namely LesionID = 1.
</p>

<table>
<tr>
 <td style="text-align: center;">
  CaseID </td><td style="text-align: center;">   LesionID   </td><td style="text-align: center;">     Weight</td>
</tr>
<tr>
 <td style="text-align: center;">
  -------------------</td><td style="text-align: center;">-------------------</td><td style="text-align: center;">------------------</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">    0.3333...</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;">    0.3333...</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;">    0.3333...</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">    0.5</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;">    0.5</td>
</tr>
<tr>
 <td style="text-align: center;">
  3 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">    1</td>
</tr>
<tr>
 <td style="text-align: center;">
  4 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">    0.25</td>
</tr>
<tr>
 <td style="text-align: center;">
  4 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;">    0.25</td>
</tr>
<tr>
 <td style="text-align: center;">
  4 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;">    0.25</td>
</tr>
<tr>
 <td style="text-align: center;">
  4 </td><td style="text-align: center;"> 4 </td><td style="text-align: center;">    0.25</td>
</tr>
<tr>
 <td style="text-align: center;">
  5 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">    0.5</td>
</tr>
<tr>
 <td style="text-align: center;">
  5 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;">    0.5</td>
</tr>
<tr>
 <td style="text-align: center;">
  6 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">    0.3333...</td>
</tr>
<tr>
 <td style="text-align: center;">
  6 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;">    0.3333...</td>
</tr>
<tr>
 <td style="text-align: center;">
  6 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;">    0.3333...</td>
</tr>
<tr>
 <td style="text-align: center;">
  7 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">    0.3333...</td>
</tr>
<tr>
 <td style="text-align: center;">
  7 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;">    0.3333...</td>
</tr>
<tr>
 <td style="text-align: center;">
  7 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;">    0.3333...</td>
</tr>
<tr>
 <td style="text-align: center;">
  8 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">    0.25</td>
</tr>
<tr>
 <td style="text-align: center;">
  8 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;">    0.25</td>
</tr>
<tr>
 <td style="text-align: center;">
  8 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;">    0.25</td>
</tr>
<tr>
 <td style="text-align: center;">
  8 </td><td style="text-align: center;"> 4 </td><td style="text-align: center;">    0.25</td>
</tr>
<tr>
 <td style="text-align: center;">
  :  </td><td style="text-align: center;"> :</td><td style="text-align: center;"> :</td>
</tr>
<tr>
 <td style="text-align: center;">
  :  </td><td style="text-align: center;"> :</td><td style="text-align: center;"> :</td>
</tr>
<tr>
 <td style="text-align: center;">
  </td>
</tr>

</table>

<p>Note that the weght are used
such that each image influences
a same effect on the esimates.
Without weight, the images including
many targets (lesions) will have very strong effect
on the estimates.
To avoid such bias, Jafroc uses weight.
In another context,
weight would be used to specify more important lesions in each image.
</p>
<p>In this package, we do not use the information of weight.
Since the theory of the author of this package did not consider such weight.
In the future I have to include the notion of weight.
Jafroc use the notion fo figure of metric as non parametric manner.
So, it seems difficult to include it in the Bayesian model,
since generally speaking, Bayesian methodology is parametric.
</p>


<h3>Details</h3>

<p>Convert an Excel file whose extension
is <code>.xlsx</code> of Jafroc format to
an <span class="rlang"><b>R</b></span> object representing FROC data
</p>
<p>Revised 2019 Jun 19
Revised 2019 Dec 13
</p>
<p>The return values include a
list which can be passed to the  function <code>fit_Bayesian_FROC</code>.
For data of Jafroc, running this function,
we immediately can fit the author's Bayesian
FROC model to this return value.
</p>
<p>The Jafroc software's format consists of
suspicious locations marked by readers and true locations.
Such data is <em>redundant</em> for our
Bayesian statistical models.
So, we reduce the information of data to the number of
false positives and number of hits for
each confidence levels by this function.
</p>
<p>Data can be calculated from the following
Jafroc data, in which there are more information than TP and FP.
In fact, in the Jafroc data, the FP and TP are counted for each images, each lesions etc.
So, it has more information.
</p>
<p>It causes limitation of our model.
So, our model start to fit a model to
the reduced data from Jafroc. So,
the redunction will cause the non accuracy
evaluation of the observer performance.
The future research I should start the
Jafroc formulation.
</p>


<h3>Value</h3>

<p>A list, representing FROC data.
</p>


<h3>References</h3>

<p>Bayesian Models for Free-response
Receiver Operating Characteristic Analysis,pre-print
</p>


<h3>See Also</h3>

<p>Rjafroc, which is unfortunately not on CRAN, now  2019 Jun 19.
Or JAFROC software in the Chakarboty's Web page.
Unfortunately, this software is no longer supported.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Only run examples in interactive R sessions
if (interactive()) {
#========================================================================================
#                  Example for convert the Jafroc data
#========================================================================================


# Work Flow


# step 0) Make an .xlsx file "JafrocDatasetExample.xlsx" as example data
#          to be passed to the function by  an interactive manner.
# step 1) Convert the "JafrocDatasetExample.xlsx" file to an R object


# In the following code, when dialog box asks users to select a file, then
# Select "JafrocDatasetExample.xlsx" in working directory.




# This is important, so I write twice, again.


# In the following code, when dialog box asks you to select a file, then
# Select "JafrocDatasetExample.xlsx" in Working directory.



# In the following code, when dialog box asks you to select a file, then
# Select "JafrocDatasetExample.xlsx" in Working directory.






#========================================================================================
#         step 0)      Make a Jafroc data as an example dataset
#========================================================================================

# If you can find the xlsx file named JAFROC_data.xlsx
# in the director "inst/extdata" of this package,
# Then this step 0) is redundant. The author prepares this example for the people who
# cannot find the xlsx file in the  "inst/extdata" of this package.
# Using an xlsx file ( which is named JAFROC_data.xlsx and
# included in the director "inst/extdata" of this package,)
# we can reconstruct it  as follows:(If someone can obtain the Excel file
# from the path tpfp/inst/extdata/JAFROC_data.xlsx, then the following code
# is not required to run, because the same xlsx file is created.




Truth &lt;- readxl::read_excel(system.file("extdata",
 "JAFROC_data.xlsx",
  package="tpfp"),
   sheet = "Truth")
##### utils::View(Truth)

TP &lt;- readxl::read_excel( system.file("extdata",
                                      "JAFROC_data.xlsx",
                                       package="tpfp"),
                           sheet = "TP")
#### utils::View(TP)

FP &lt;- readxl::read_excel( system.file("extdata",
                                      "JAFROC_data.xlsx",
                                        package="tpfp"),
                          sheet = "FP")
#### utils::View(FP)





sample &lt;- list(TP=TP,FP=FP,Truth=Truth)
openxlsx::write.xlsx(sample,"JafrocDatasetExample.xlsx")

 tcltk::tkmessageBox(
 message="A file named

   JafrocDatasetExample.xlsx


 is created in the working directory")


# Now, we obtain an excel file named "JafrocDatasetExample.xlsx", which is same as
# the JAFROC_data.xlsx.
# whose format is available in the Jafroc software developed by Chakraborty.
# Note that if you have an excel file
# which is formulated correctolly  for our package,
# then the above process does not be required.




#    (0) From the above, we obtain  "JafrocDatasetExample.xlsx"
#    which is the multiple reader and multiple modality dataset
#    for Jafroc analysis which is Chakraborty's software Jafroc or the R package Rjafroc
#     but  NOT implemented in our package,.




#========================================================================================
#         step 1)      Convert the Jafroc data obtained in the above
#========================================================================================

# (1) Using "JafrocDatasetExample.xlsx" as an example excel file,
# we run the function to convert the excel file from Jafroc format
# to our format:


     dataList &lt;- convertFromJafroc(
                                  No.of.Modalities =5,
                                  No.of.readers    =4,
                                  No.of.confidence.levels = 5
                                   )



# In the variable, there is no xlsx files, since it is selected by interactive manner.
# So, please select the xlsx file, i.e.,  "JafrocDatasetExample.xlsx"  obtained
# in step 0) or your own Jafroc  .xlsx file.


}### Only run examples in interactive R sessions




</code></pre>

<hr>
<h2 id='convertFromJafrocCasewise'>Convert  <code>.xlsx</code> File
of <strong><em>Jafroc</em></strong>
into <span class="rlang"><b>R</b></span> object</h2><span id='topic+convertFromJafrocCasewise'></span>

<h3>Description</h3>

<p><strong><em>Convert an FROC dataset</em></strong>
</p>

<dl>
<dt> <strong><em>from</em></strong>    </dt><dd> <p><code>.xlsx</code> file of <strong><em>Jafroc</em></strong>  </p>
</dd>
<dt> <strong><em>into</em></strong>    </dt><dd> <p><span class="rlang"><b>R</b></span> object   </p>
</dd>
</dl>



<h3>Usage</h3>

<pre><code class='language-R'>convertFromJafrocCasewise(
  No.of.Modalities,
  No.of.readers,
  No.of.confidence.levels,
  debug = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="convertFromJafrocCasewise_+3A_no.of.modalities">No.of.Modalities</code></td>
<td>
<p>A positive integer, indicating the number of <em>modalities</em> for FROC data-set in <code>.xlsx</code> file.</p>
</td></tr>
<tr><td><code id="convertFromJafrocCasewise_+3A_no.of.readers">No.of.readers</code></td>
<td>
<p>A positive integer, indicating the number of <em>readers</em>  for FROC data-set  in an <code>.xlsx</code> file.</p>
</td></tr>
<tr><td><code id="convertFromJafrocCasewise_+3A_no.of.confidence.levels">No.of.confidence.levels</code></td>
<td>
<p>A positive integer, indicating the number of <em>confidence levels</em>  for FROC data-set in <code>.xlsx</code> file.</p>
</td></tr>
<tr><td><code id="convertFromJafrocCasewise_+3A_debug">debug</code></td>
<td>
<p>A logical, whether, inner objects in function is push out into global environment or not.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>The <code>.xlsx</code> file of Jafroc
consists of three sheets named <strong><em>TP, FP, Truth</em></strong>, <strong><em> precisely! Correctly! </em></strong>
(other names never be permitted !!)
</p>
<p><strong><em>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;  TP &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</em></strong>
</p>
<p>A sheet named <strong><em>TP</em></strong>  consists of five columns <strong><em> precisely </em></strong>  named from the right hand side:
</p>
<p><strong><em>ReaderID,	ModalityID,	CaseID,	LesionID,	TP_Rating.</em></strong>
</p>
<p><strong><em>NOTE.</em></strong>
</p>

<dl>
<dt>  <strong><em>CaseID</em></strong>            </dt><dd><p>  Note that the above word <strong><em>CaseID</em></strong> means the Image ID vectors indicating the ID of radiographs.  That is &quot;case = image = radiograph&quot;.</p>
</dd>
<dt> <strong><em>the first row</em></strong>      </dt><dd><p>  Note that the first row of each sheat of <code>.xlsx</code> file is constructed by the names of column as follows:   </p>
</dd>
</dl>

<p><strong>An Example of the sheet named <em>TP</em> in a <em><code>.xlsx</code></em> file for the <em>Jafroc</em> software</strong>
</p>
<p><strong> Interpretation of table</strong>
</p>
<p>Throughout this explanation, we follow the convention that readers are male.
</p>
<p>For example,
the first row means
the first reader (ReaderID=1) correctly find
the first lesion (LesionID = 1)
in the first image (CaseID = 1)
taken by the first modality (ModalityID = 1)
with his rating 5 (TP_Rating =5).
</p>
<p>Similarly,
the second row means
the first reader (ReaderID=1) correctly find
the 4-th lesion (LesionID = 4)
in the second image (CaseID = 2)
taken by the 2-nd modality (ModalityID = 2)
with his rating 4 (TP_Rating = 4).
</p>

<table>
<tr>
 <td style="text-align: center;">
  ReaderID </td><td style="text-align: center;">   ModalityID   </td><td style="text-align: center;">   CaseID </td><td style="text-align: center;">   LesionID </td><td style="text-align: center;">   TP_Rating.</td>
</tr>
<tr>
 <td style="text-align: center;">
  -------------------</td><td style="text-align: center;">-------------------</td><td style="text-align: center;">-------------------</td><td style="text-align: center;">-------------------</td><td style="text-align: center;">------------------</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">  1</td><td style="text-align: center;"> 5</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 2  </td><td style="text-align: center;"> 1</td><td style="text-align: center;"> 4</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 4  </td><td style="text-align: center;"> 1</td><td style="text-align: center;"> 5</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 8  </td><td style="text-align: center;"> 1</td><td style="text-align: center;"> 3</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 8  </td><td style="text-align: center;"> 2</td><td style="text-align: center;"> 4</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 9  </td><td style="text-align: center;"> 1</td><td style="text-align: center;"> 4</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 9  </td><td style="text-align: center;"> 2</td><td style="text-align: center;"> 3</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 9  </td><td style="text-align: center;"> 3</td><td style="text-align: center;"> 5</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 11 </td><td style="text-align: center;"> 1</td><td style="text-align: center;"> 3</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">  1</td><td style="text-align: center;"> 4</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 4  </td><td style="text-align: center;"> 1</td><td style="text-align: center;"> 4</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 5  </td><td style="text-align: center;"> 1</td><td style="text-align: center;"> 4</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 8  </td><td style="text-align: center;"> 1</td><td style="text-align: center;"> 1</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 8  </td><td style="text-align: center;"> 2</td><td style="text-align: center;"> 2</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 8  </td><td style="text-align: center;"> 3</td><td style="text-align: center;"> 2</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 10  </td><td style="text-align: center;"> 1</td><td style="text-align: center;"> 3</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 10 </td><td style="text-align: center;"> 2</td><td style="text-align: center;"> 2</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 11  </td><td style="text-align: center;"> 1</td><td style="text-align: center;"> 2</td>
</tr>
<tr>
 <td style="text-align: center;">

  : </td><td style="text-align: center;"> : </td><td style="text-align: center;"> :  </td><td style="text-align: center;"> :</td><td style="text-align: center;"> :</td>
</tr>
<tr>
 <td style="text-align: center;">
  : </td><td style="text-align: center;"> : </td><td style="text-align: center;"> :  </td><td style="text-align: center;"> :</td><td style="text-align: center;"> :</td>
</tr>
<tr>
 <td style="text-align: center;">    </td>
</tr>

</table>

<p><strong><em>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;  FP &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</em></strong>
</p>
<p>A sheet named <strong>FP</strong>  consists of four columns  <strong><em> precisely </em></strong>
named from the right hand side: <strong>ReaderID,	ModalityID,	CaseID,	FP_Rating</strong>
<strong>An Example of a sheet named FP in a <code>.xlsx</code> file for the Jafroc software</strong>
</p>
<p><strong> Interpretation of table</strong>
</p>
<p>For example,
the first row means
the first reader (ReaderID=1) makes
a false alarm location
in the first image (CaseID = 1)
taken by the first modality (ModalityID = 1)
with his rating 2 (TP_Rating =2).
</p>
<p>Similarly,
the second row means
the first reader (ReaderID=1) makes
a false alarm location
in the second image (CaseID = 2)
taken by the 2-nd modality (ModalityID = 2)
with his rating 1 (TP_Rating = 1).
</p>
<p>Similarly,
the 6-th and 7-th rows mean that
the first reader (ReaderID=1) makes
two false alarm location
in the second patient (CaseID = 2).
The first false alarm  is in the image
taken by the 1-st modality (ModalityID = 1)
with his rating 1 (TP_Rating = 1).
The second false alarm  is in the image
taken by the 3-rd modality (ModalityID = 3)
with his rating 2 (TP_Rating = 2).
</p>

<table>
<tr>
 <td style="text-align: center;">
  ReaderID </td><td style="text-align: center;">   ModalityID   </td><td style="text-align: center;">   CaseID  </td><td style="text-align: center;">   FP_Rating.</td>
</tr>
<tr>
 <td style="text-align: center;">
-------------------</td><td style="text-align: center;">-------------------</td><td style="text-align: center;">-------------------</td><td style="text-align: center;">------------------</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">   2</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 2  </td><td style="text-align: center;">  1</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 3  </td><td style="text-align: center;">  1</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 5  </td><td style="text-align: center;">  2</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 7 </td><td style="text-align: center;">   1</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 7  </td><td style="text-align: center;">   2</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 9  </td><td style="text-align: center;">   3</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 9  </td><td style="text-align: center;">   4</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 10 </td><td style="text-align: center;">   1</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">    2</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 2  </td><td style="text-align: center;">   3</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 3  </td><td style="text-align: center;">   4</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 8  </td><td style="text-align: center;">   1</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 9  </td><td style="text-align: center;">  1</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 11  </td><td style="text-align: center;">   1</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 14  </td><td style="text-align: center;">  1</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;"> 15 </td><td style="text-align: center;">   1</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;"> 21  </td><td style="text-align: center;">   2</td>
</tr>
<tr>
 <td style="text-align: center;">
  : </td><td style="text-align: center;"> :  </td><td style="text-align: center;"> :</td><td style="text-align: center;"> :</td>
</tr>
<tr>
 <td style="text-align: center;">
  : </td><td style="text-align: center;"> :  </td><td style="text-align: center;"> :</td><td style="text-align: center;"> :</td>
</tr>
<tr>
 <td style="text-align: center;">
     </td>
</tr>

</table>

<p><strong><em>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;  Truth &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</em></strong>
</p>
<p>A sheet named <strong>Truth </strong>  consists of three columns
<strong><em> precisely </em></strong>  named from the right
hand side:<strong>CaseID,	LesionID,	Weight</strong> .
</p>
<p><strong>An Example of a sheet named Truth in a <code>.xlsx</code> file for the Jafroc software</strong>
</p>
<p><strong> Interpretation of table</strong>
</p>
<p>For example, the first image (CaseID = 1) contains
three lesions each of which is named 1,2,3, namely LesionID = 1,2,3.
For example, the second image (CaseID = 2) contains
two lesions each of which is named 1,2, namely LesionID = 1,2.
For example, the third image (CaseID = 3) contains
a sinle lesion named 1, namely LesionID = 1.
</p>

<table>
<tr>
 <td style="text-align: center;">
  CaseID </td><td style="text-align: center;">   LesionID   </td><td style="text-align: center;">     Weight</td>
</tr>
<tr>
 <td style="text-align: center;">
  -------------------</td><td style="text-align: center;">-------------------</td><td style="text-align: center;">------------------</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">    0.3333...</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;">    0.3333...</td>
</tr>
<tr>
 <td style="text-align: center;">
  1 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;">    0.3333...</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">    0.5</td>
</tr>
<tr>
 <td style="text-align: center;">
  2 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;">    0.5</td>
</tr>
<tr>
 <td style="text-align: center;">
  3 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">    1</td>
</tr>
<tr>
 <td style="text-align: center;">
  4 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">    0.25</td>
</tr>
<tr>
 <td style="text-align: center;">
  4 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;">    0.25</td>
</tr>
<tr>
 <td style="text-align: center;">
  4 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;">    0.25</td>
</tr>
<tr>
 <td style="text-align: center;">
  4 </td><td style="text-align: center;"> 4 </td><td style="text-align: center;">    0.25</td>
</tr>
<tr>
 <td style="text-align: center;">
  5 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">    0.5</td>
</tr>
<tr>
 <td style="text-align: center;">
  5 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;">    0.5</td>
</tr>
<tr>
 <td style="text-align: center;">
  6 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">    0.3333...</td>
</tr>
<tr>
 <td style="text-align: center;">
  6 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;">    0.3333...</td>
</tr>
<tr>
 <td style="text-align: center;">
  6 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;">    0.3333...</td>
</tr>
<tr>
 <td style="text-align: center;">
  7 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">    0.3333...</td>
</tr>
<tr>
 <td style="text-align: center;">
  7 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;">    0.3333...</td>
</tr>
<tr>
 <td style="text-align: center;">
  7 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;">    0.3333...</td>
</tr>
<tr>
 <td style="text-align: center;">
  8 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;">    0.25</td>
</tr>
<tr>
 <td style="text-align: center;">
  8 </td><td style="text-align: center;"> 2 </td><td style="text-align: center;">    0.25</td>
</tr>
<tr>
 <td style="text-align: center;">
  8 </td><td style="text-align: center;"> 3 </td><td style="text-align: center;">    0.25</td>
</tr>
<tr>
 <td style="text-align: center;">
  8 </td><td style="text-align: center;"> 4 </td><td style="text-align: center;">    0.25</td>
</tr>
<tr>
 <td style="text-align: center;">
  :  </td><td style="text-align: center;"> :</td><td style="text-align: center;"> :</td>
</tr>
<tr>
 <td style="text-align: center;">
  :  </td><td style="text-align: center;"> :</td><td style="text-align: center;"> :</td>
</tr>
<tr>
 <td style="text-align: center;">
  </td>
</tr>

</table>

<p>Note that the weght are used
such that each image influences
a same effect on the esimates.
Without weight, the images including
many targets (lesions) will have very strong effect
on the estimates.
To avoid such bias, Jafroc uses weight.
In another context,
weight would be used to specify more important lesions in each image.
</p>
<p>In this package, we do not use the information of weight.
Since the theory of the author of this package did not consider such weight.
In the future I have to include the notion of weight.
Jafroc use the notion fo figure of metric as non parametric manner.
So, it seems difficult to include it in the Bayesian model,
since generally speaking, Bayesian methodology is parametric.
</p>


<h3>Details</h3>

<p>Convert an Excel file whose extension
is <code>.xlsx</code> of Jafroc format to
an <span class="rlang"><b>R</b></span> object representing FROC data.
</p>
<p>The return values include a
list which can be passed to the  function <code>fit_Bayesian_FROC</code>.
For data of Jafroc, running this function,
we immediately can fit the author's Bayesian
FROC model to this return value.
</p>
<p>The Jafroc software's format consists of
suspicious locations marked by readers and true locations.
Such data is <em>redundant</em> for our
Bayesian statistical models.
So, we reduce the information of data to the number of
false positives and number of hits for
each confidence levels by this function.
</p>
<p>Data can be calculated from the following
Jafroc data, in which there are more information than TP and FP.
In fact, in the Jafroc data, the FP and TP are counted for each images, each lesions etc.
So, it has more information.
</p>
<p>It causes limitation of our model.
So, our model start to fit a model to
the reduced data from Jafroc. So,
the redunction will cause the non accuracy
evaluation of the observer performance.
The future research I should start the
Jafroc formulation.
</p>


<h3>Value</h3>

<p>A list, representing FROC data.
</p>


<h3>References</h3>

<p>Bayesian Models for Free-response
Receiver Operating Characteristic Analysis,pre-print
</p>


<h3>See Also</h3>

<p>Rjafroc, which is unfortunately not on CRAN, now  2019 Jun 19.
Or JAFROC software in the Chakarboty's Web page.
Unfortunately, this software is no longer supported.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Only run examples in interactive R sessions
if (interactive()) {
#========================================================================================
#                  Example for convert the Jafroc data
#========================================================================================

# Work Flow

# step 0) Make an .xlsx file "JafrocDatasetExample.xlsx" as example data
#          to be passed to the function by interactive manner.
# step 1) Convert the "JafrocDatasetExample.xlsx" file to an R object













# In the following code, when dialog box asks you to select a file, then
# Select "JafrocDatasetExample.xlsx" in Working directory.


# This is important, so I write twice, again.


# In the following code, when dialog box asks you to select a file, then
# Select "JafrocDatasetExample.xlsx" in Working directory.



# In the following code, when dialog box asks you to select a file, then
# Select "JafrocDatasetExample.xlsx" in Working directory.





#========================================================================================
#         step 0)      Make a Jafroc data as an example dataset
#========================================================================================

# If you can find the xlsx file named JAFROC_data.xlsx
# in the director "inst/extdata" of this package,
# Then this step 0) is redundant. The author prepares this example for the people who
# cannot find the xlsx file in the  "inst/extdata" of this package.
# Using an xlsx file ( which is named JAFROC_data.xlsx and
# included in the director "inst/extdata" of this package,)
# we can reconstruct it  as follows:(If someone can obtain the Excel file
# from the path tpfp/inst/extdata/JAFROC_data.xlsx, then the following code
# is not required to run, because the same xlsx file is created.




Truth &lt;- readxl::read_excel(system.file("extdata",
 "JAFROC_data.xlsx",
  package="tpfp"),
   sheet = "Truth")
##### utils::View(Truth)

TP &lt;- readxl::read_excel( system.file("extdata",
                                      "JAFROC_data.xlsx",
                                       package="tpfp"),
                           sheet = "TP")
#### utils::View(TP)

FP &lt;- readxl::read_excel( system.file("extdata",
                                      "JAFROC_data.xlsx",
                                        package="tpfp"),
                          sheet = "FP")
#### utils::View(FP)





sample &lt;- list(TP=TP,FP=FP,Truth=Truth)
openxlsx::write.xlsx(sample,"JafrocDatasetExample.xlsx")

 tcltk::tkmessageBox(
 message="A file named

   JafrocDatasetExample.xlsx


 is created in the working directory")


# Now, we obtain an excel file named "JafrocDatasetExample.xlsx", which is same as
# the JAFROC_data.xlsx.
# whose format is available in the Jafroc software developed by Chakraborty.
# Note that if you have an excel file
# which is formulated correctolly  for our package,
# then the above process does not be required.




#    (0) From the above, we obtain  "JafrocDatasetExample.xlsx"
#    which is the multiple reader and multiple modality dataset
#    for Jafroc analysis which is Chakraborty's software Jafroc or the R package Rjafroc
#     but  NOT implemented in our package,.




#========================================================================================
#         step 1)      Convert the Jafroc data obtained in the above
#========================================================================================

# (1) Using "JafrocDatasetExample.xlsx" as an example excel file,
# we run the function to convert the excel file from Jafroc format
# to our format:


     dataList &lt;- convertFromJafrocCasewise(
                                  No.of.Modalities =5,
                                  No.of.readers    =4,
                                  No.of.confidence.levels = 5
                                   )



# In the variable, there is no xlsx files, since it is selected by interactive manner.
# So, please select the xlsx file, i.e.,  "JafrocDatasetExample.xlsx"  obtained
# in step 0) or your own Jafroc  .xlsx file.


}### Only run examples in interactive R sessions




</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
