<!DOCTYPE html><html><head><title>Help for package Rtrack</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {Rtrack}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#Rtrack-package'><p>Rtrack: Spatial Navigation Strategy Analysis</p></a></li>
<li><a href='#calculate_metrics'><p>Calculation of spatial search path metrics.</p></a></li>
<li><a href='#call_strategy'><p>Calculation of search strategies.</p></a></li>
<li><a href='#check_experiment'><p>Check experiment data.</p></a></li>
<li><a href='#export_data'><p>Export experiment data to a trackxf file.</p></a></li>
<li><a href='#export_results'><p>Export experiment results to a dataframe or file.</p></a></li>
<li><a href='#identify_track_format'><p>Check the format of a track file.</p></a></li>
<li><a href='#plot_density'><p>Plot a path density map.</p></a></li>
<li><a href='#plot_path'><p>Plot a path.</p></a></li>
<li><a href='#plot_strategies'><p>Plot water maze strategies.</p></a></li>
<li><a href='#plot_variable'><p>Plot path metrics.</p></a></li>
<li><a href='#read_arena'><p>Read an arena description.</p></a></li>
<li><a href='#read_experiment'><p>Read experiment data.</p></a></li>
<li><a href='#read_path'><p>Read path coordinates from raw data formats.</p></a></li>
<li><a href='#threshold_strategies'><p>Subset an rtrack_strategies object.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Spatial Navigation Strategy Analysis</td>
</tr>
<tr>
<td>Version:</td>
<td>2.0.3</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Rupert Overall &lt;rtrack@rupertoverall.net&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://rupertoverall.net/Rtrack/">https://rupertoverall.net/Rtrack/</a>,
<a href="https://github.com/rupertoverall/Rtrack">https://github.com/rupertoverall/Rtrack</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/rupertoverall/Rtrack/issues">https://github.com/rupertoverall/Rtrack/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>A toolkit for the analysis of paths from spatial tracking experiments and calculation of goal-finding strategies. 
    This package is centered on an approach using machine learning for path classification.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>crayon, graphics, grDevices, Hmisc, KernSmooth, methods,
openxlsx, parallel, pbapply, randomForest, RCurl, readxl,
rjson, scales, stats, stringi, terra, tools, utils, zip</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-12-11 10:05:48 UTC; rupert</td>
</tr>
<tr>
<td>Author:</td>
<td>Rupert Overall <a href="https://orcid.org/0000-0002-3882-6073"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-12-11 13:50:07 UTC</td>
</tr>
</table>
<hr>
<h2 id='Rtrack-package'>Rtrack: Spatial Navigation Strategy Analysis</h2><span id='topic+Rtrack'></span><span id='topic+Rtrack-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>A toolkit for the analysis of paths from spatial tracking experiments and calculation of goal-finding strategies. This package is centered on an approach using machine learning for path classification.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Rupert Overall <a href="mailto:rtrack@rupertoverall.net">rtrack@rupertoverall.net</a> (<a href="https://orcid.org/0000-0002-3882-6073">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://rupertoverall.net/Rtrack/">https://rupertoverall.net/Rtrack/</a>
</p>
</li>
<li> <p><a href="https://github.com/rupertoverall/Rtrack">https://github.com/rupertoverall/Rtrack</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/rupertoverall/Rtrack/issues">https://github.com/rupertoverall/Rtrack/issues</a>
</p>
</li></ul>


<hr>
<h2 id='calculate_metrics'>Calculation of spatial search path metrics.</h2><span id='topic+calculate_metrics'></span>

<h3>Description</h3>

<p>Calculates a range of metrics from path coordinates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculate_metrics(path, arena)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calculate_metrics_+3A_path">path</code></td>
<td>
<p>An <code>rtrack_path</code> object as returned by
<code><a href="#topic+read_path">read_path</a></code>.</p>
</td></tr>
<tr><td><code id="calculate_metrics_+3A_arena">arena</code></td>
<td>
<p>An <code>rtrack_arena</code> object as returned by
<code><a href="#topic+read_arena">read_arena</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Metrics are calculated based on normalised coordinate data and are made
accessible to machine learning algorithms in the <code>features</code> element of
the <code>rtrack_path</code> object. A relevant selection of metrics (with the same
units as the raw data) is also available as the <code>summary</code> element. These
can be useful for custom plots and are also the values exported by
<code><a href="#topic+export_results">export_results</a></code>. Extended metrics are also available as separate
elements of the <code>rtrack_metrics</code> object.
</p>


<h3>Value</h3>

<p>An <code>rtrack_metrics</code> object containing metrics of the search path.
This object is required as input for the <code><a href="#topic+call_strategy">call_strategy</a></code> and
<code><a href="#topic+plot_path">plot_path</a></code> functions.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read_path">read_path</a></code>, <code><a href="#topic+read_arena">read_arena</a></code>, and also
<code><a href="#topic+read_experiment">read_experiment</a></code> for processing many tracks at once.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(Rtrack)
track_file &lt;- system.file("extdata", "Track_1.tab", package = "Rtrack")
arena_description &lt;- system.file("extdata", "Arena.txt", package = "Rtrack")
arena &lt;- read_arena(arena_description)
path &lt;- read_path(track_file, arena, track.format = "raw.tab")
metrics &lt;- calculate_metrics(path, arena)

</code></pre>

<hr>
<h2 id='call_strategy'>Calculation of search strategies.</h2><span id='topic+call_strategy'></span>

<h3>Description</h3>

<p>Calculates search strategies from path metrics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>call_strategy(metrics, model = "default")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="call_strategy_+3A_metrics">metrics</code></td>
<td>
<p>An <code>rtrack_metrics</code> object from
<code><a href="#topic+calculate_metrics">calculate_metrics</a></code>, a list of such objects or an
<code>rtrack_experiment</code> object.</p>
</td></tr>
<tr><td><code id="call_strategy_+3A_model">model</code></td>
<td>
<p>The strategy calling model that should be used. Default models
have been implemented for for Morris water maze and Barnes maze
(<code>mwm_rf_v7</code> and <code>mb_rf_v1</code> respectively; both trained on mouse
data).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function implements a classifier based on a trained random forest model.
If the <code>model</code> parameter is left at &quot;default&quot;, then the default model
for the appropriate experiment type will be automatically selected. Please
note that search strategies are only available for Morris water maze and
Barnes maze at this stage. It is expected that other models will be added in
the future and your feedback is welcome.
</p>


<h3>Value</h3>

<p>An <code>rtrack_strategies</code> object. The <code>calls</code> element contains
the called strategy/strategies as well as confidence scores for all
possible strategies.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+threshold_strategies">threshold_strategies</a></code>, <code><a href="#topic+plot_strategies">plot_strategies</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(Rtrack)
track_file &lt;- system.file("extdata", "Track_1.tab", package = "Rtrack")
arena_description &lt;- system.file("extdata", "Arena.txt", package = "Rtrack")
arena &lt;- read_arena(arena_description)
path &lt;- read_path(track_file, arena, track.format = "raw.tab")
metrics &lt;- calculate_metrics(path, arena)
strategies &lt;- call_strategy(metrics)
# Inspect the strategy call
strategies$calls

</code></pre>

<hr>
<h2 id='check_experiment'>Check experiment data.</h2><span id='topic+check_experiment'></span>

<h3>Description</h3>

<p>Checks that the experiment description is well-formed and complete.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_experiment(
  filename,
  format = NA,
  interpolate = FALSE,
  project.dir = NA,
  data.dir = project.dir,
  author.note = "",
  threads = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_experiment_+3A_filename">filename</code></td>
<td>
<p>A spreadsheet file containing a description of the experiment
or a trackxf file containing an exported experiment archive.</p>
</td></tr>
<tr><td><code id="check_experiment_+3A_format">format</code></td>
<td>
<p>An experiment description for reading raw data can be provided
as an Excel spreadsheet (&quot;excel&quot;) or as a comma-delimited (&quot;csv&quot;) or
tab-delimited (&quot;tab&quot;, &quot;tsv&quot;, &quot;txt&quot; or &quot;text&quot;) text file. The value
&quot;trackxf&quot; indicates that the file is an archived experiment in the trackxf
format (as generated by <code><a href="#topic+export_data">export_data</a></code>). Default (<code>NA</code>) is
to guess the format from the file extension.</p>
</td></tr>
<tr><td><code id="check_experiment_+3A_interpolate">interpolate</code></td>
<td>
<p>Ignored. For compatibility with
<code><a href="#topic+read_experiment">read_experiment</a></code>.</p>
</td></tr>
<tr><td><code id="check_experiment_+3A_project.dir">project.dir</code></td>
<td>
<p>A directory path specifying where the files needed for
processing the experiment are stored. Ignored if <code>format = "trackxf"</code>.</p>
</td></tr>
<tr><td><code id="check_experiment_+3A_data.dir">data.dir</code></td>
<td>
<p>A directory path specifying where the raw data are stored.
This is a folder root and all paths specified in the spreadsheet. Ignored
if <code>format = "trackxf"</code>.</p>
</td></tr>
<tr><td><code id="check_experiment_+3A_author.note">author.note</code></td>
<td>
<p>Ignored. For compatibility with
<code><a href="#topic+read_experiment">read_experiment</a></code>.</p>
</td></tr>
<tr><td><code id="check_experiment_+3A_threads">threads</code></td>
<td>
<p>Ignored. For compatibility with <code><a href="#topic+read_experiment">read_experiment</a></code>.</p>
</td></tr>
<tr><td><code id="check_experiment_+3A_verbose">verbose</code></td>
<td>
<p>Ignored. For compatibility with <code><a href="#topic+read_experiment">read_experiment</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Information about a full experiment can be assembled into a spreadsheet
(Excel, CSV and tab-delimited text formats are supported) and used to process
large numbers of files in one batch. This function checks the spreadsheet to
make sure that it is properly formed and that all the data files referred to
are present.
</p>
<p>The function can (and ideally should) be run with the same parameters as will
be used to call <code><a href="#topic+read_experiment">read_experiment</a></code>, although many of the
parameters are not required for the check.
</p>
<p>The content of the spreadsheet, the presence and the content of any
supporting files are also checked. Checks do not cover validity of the raw
data, so it is still possible to have invalid data even if
<code><a href="#topic+check_experiment">check_experiment</a></code> returns <code>TRUE</code> (although this suggests an
underlying problem with the raw data). Warning and error messages are
intended to be useful and help any format issues be quickly resolved.
</p>


<h3>Value</h3>

<p>Invisibly returns <code>TRUE</code> for a successful check or <code>FALSE</code>
otherwise.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read_experiment">read_experiment</a></code>, <code><a href="#topic+export_data">export_data</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(Rtrack)
experiment.description &lt;- system.file("extdata", "Minimal_experiment.xlsx",
  package = "Rtrack")
check_experiment(experiment.description)
</code></pre>

<hr>
<h2 id='export_data'>Export experiment data to a trackxf file.</h2><span id='topic+export_data'></span>

<h3>Description</h3>

<p>Creates a representation of the experiment data in the trackxf format and
writes this to file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>export_data(experiment, file, tracks = "all")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="export_data_+3A_experiment">experiment</code></td>
<td>
<p>An <code>rtrack_experiment</code> object from
<code><a href="#topic+read_experiment">read_experiment</a></code>.</p>
</td></tr>
<tr><td><code id="export_data_+3A_file">file</code></td>
<td>
<p>The file to which the archive will be written. This should
ideally use the file extension <code>.trackxf</code> although other extensions
are also possible. If the filename is given without any extension
(recommended), then the <code>.trackxf</code> extension will be added
automatically.</p>
</td></tr>
<tr><td><code id="export_data_+3A_tracks">tracks</code></td>
<td>
<p>Which tracks should be exported. Default, &quot;all&quot; exports the
entire experiment object. A subset of tracks can be specified using either
numeric indices or a vector of track IDs following usual R standards.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The exported trackxf file contains all the raw data and experiment metadata.
The trackxf archive contains exactly the same information as if reading from
raw data. Calculated metrics are not exported, but can be recreated exactly.
</p>
<p>A formal description of the trackxf JSON format can be found in the schema
file at <a href="https://rupertoverall.net/trackxf/trackxf_schema_v0.json">https://rupertoverall.net/trackxf/trackxf_schema_v0.json</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read_experiment">read_experiment</a></code> to import the archive back into an
<code>rtrack_experiment</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(Rtrack)
experiment.description &lt;- system.file("extdata", "Minimal_experiment.xlsx",
  package = "Rtrack")
experiment &lt;- read_experiment(experiment.description, format = "excel",
  project.dir = system.file("extdata", "", package = "Rtrack"))
tempfile &lt;- file.path(tempdir(), "Minimal_experiment.trackxf") # Temporary file
export_data(experiment, file = tempfile)
imported.experiment &lt;- read_experiment(tempfile, format = "trackxf")
# Experiments are identical except for export timestamp/notes
all.equal(experiment, imported.experiment)
identical(experiment$metrics, imported.experiment$metrics)

</code></pre>

<hr>
<h2 id='export_results'>Export experiment results to a dataframe or file.</h2><span id='topic+export_results'></span>

<h3>Description</h3>

<p>Binds experiment data together with analysis results and optionally writes
this to file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>export_results(experiment, strategies = NULL, tracks = "all", file = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="export_results_+3A_experiment">experiment</code></td>
<td>
<p>An <code>rtrack_experiment</code> object from
<code><a href="#topic+read_experiment">read_experiment</a></code>.</p>
</td></tr>
<tr><td><code id="export_results_+3A_strategies">strategies</code></td>
<td>
<p>An optional <code>rtrack_strategies</code> object generated by
<code><a href="#topic+call_strategy">call_strategy</a></code>. If present, the strategies corresponding to
the tracks in the experiment (after subsetting using the <code>tracks</code>
parameter) will be extracted and returned in the results.</p>
</td></tr>
<tr><td><code id="export_results_+3A_tracks">tracks</code></td>
<td>
<p>Which tracks should be exported. Default, &quot;all&quot;, exports the
entire experiment object. A subset of tracks can be specified using either
numeric indices or a vector of track IDs following usual R standards.</p>
</td></tr>
<tr><td><code id="export_results_+3A_file">file</code></td>
<td>
<p>The file to which the results will be written. If <code>NULL</code>
(the default), the data will be returned as a
<code><a href="base.html#topic+data.frame">data.frame</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If only the results matching a thresholded subset of strategies should be
exported, then this can be achieved by performing strategy calling and
thresholding separately and passing the <code>strategies$tracks</code> component of
the resulting <code>rtrack_strategies</code> object to this function as the
parameter <code>tracks</code>. This will restrict the output of
<code>export_results</code> to only the tracks where an above-threshold strategy
has been determined.
</p>
<p>If the parameter <code>file</code> is supplied, the file extension will be used to
determine which format to save the file in. The formats &quot;.csv&quot;, &quot;.csv2&quot; (see
<code><a href="utils.html#topic+write.table">write.table</a></code> for details of the formats), &quot;.tsv&quot; (
tab-delimited text; can also  be written as &quot;.txt&quot; or &quot;.tab&quot;) and &quot;.xlsx&quot; are
supported. If the file extension is not in this list, the data will be
written as tab-delimited text with a warning. Note that the Excel &quot;.xlsx&quot;
format is supported, but the older &quot;.xls&quot; is not.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> containing the experimental groups and factors
(as supplied in the original experiment description) together with the
summary metrics. This is returned invisibly if <code>file</code> is specified.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+call_strategy">call_strategy</a></code>, <code><a href="#topic+threshold_strategies">threshold_strategies</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(Rtrack)
experiment.description &lt;- system.file("extdata", "Minimal_experiment.xlsx",
  package = "Rtrack")
experiment &lt;- read_experiment(experiment.description, format = "excel",
  project.dir = system.file("extdata", "", package = "Rtrack"))
# The code below returns a data.frame.
# Use the parameter 'file' to write to a file instead.
export_results(experiment)

</code></pre>

<hr>
<h2 id='identify_track_format'>Check the format of a track file.</h2><span id='topic+identify_track_format'></span>

<h3>Description</h3>

<p>A helper utility to determine the raw data format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>identify_track_format(filename = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="identify_track_format_+3A_filename">filename</code></td>
<td>
<p>A raw data file containing path coordinates. If this is NULL
or missing, then a message is given listing all of the possible format
codes.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Raw data from several sources can be read in directly. A number of formats
are supported, but it might not be clear which format code corresponds to
your data. This function can be run on a typical file to try to guess your
file format. If the format is not recognised, please visit the help page at
<a href="https://rupertoverall.net/Rtrack/help.html">https://rupertoverall.net/Rtrack/help.html</a> where it is also possible to
request support for new formats.
</p>


<h3>Value</h3>

<p>The format code as a character string. This code can be used as the
<code>track.format</code> parameter for <code><a href="#topic+read_path">read_path</a></code> or in the
<code>_TrackFileFormat</code> column in the experiment description passed to
<code><a href="#topic+read_experiment">read_experiment</a></code>.
</p>
<p>If the track format cannot be determined, <code>NA</code> is returned.
</p>
<p>When run without a <code>filename</code> parameter, a character vector containing
all supported format codes is invisibly returned.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read_path">read_path</a></code>, or <code><a href="#topic+read_experiment">read_experiment</a></code> to read
the track files.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(Rtrack)
track_file = system.file("extdata", "Track_1.tab", package = "Rtrack")
identify_track_format(track_file)

</code></pre>

<hr>
<h2 id='plot_density'>Plot a path density map.</h2><span id='topic+plot_density'></span>

<h3>Description</h3>

<p>Plots a density map (&quot;heatmap&quot;) of the path.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_density(
  metrics,
  title = NULL,
  col = (grDevices::colorRampPalette(c("#FCFBFD", "#9E9AC8", "#3F007D")))(256),
  legend = TRUE,
  feature.col = "black",
  feature.lwd = NA,
  lwd = 1,
  resolution = 600,
  margins = c(0, 0, 3, 0)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_density_+3A_metrics">metrics</code></td>
<td>
<p>An <code>rtrack_metrics</code> object from
<code><a href="#topic+calculate_metrics">calculate_metrics</a></code>.</p>
</td></tr>
<tr><td><code id="plot_density_+3A_title">title</code></td>
<td>
<p>An optional title for the plot. The default is to use the path
name saved in the <code>rtrack_metrics</code> object.</p>
</td></tr>
<tr><td><code id="plot_density_+3A_col">col</code></td>
<td>
<p>Colours for the density map. These can be provided as any vector
of colours. The recommended (and default) approach is to use
<code><a href="grDevices.html#topic+colorRampPalette">colorRampPalette</a></code>. The default colouring is a
simple white-to-blue scale.</p>
</td></tr>
<tr><td><code id="plot_density_+3A_legend">legend</code></td>
<td>
<p>Should a colour scale legend be drawn? Default is TRUE.</p>
</td></tr>
<tr><td><code id="plot_density_+3A_feature.col">feature.col</code></td>
<td>
<p>The colour to plot outlines of arena features (goals,
objects, aversive zone etc., depending on the arena type). Black by
default, but it may be useful to change this if a very dark colour scheme
is used.</p>
</td></tr>
<tr><td><code id="plot_density_+3A_feature.lwd">feature.lwd</code></td>
<td>
<p>The width of the lines used to plot the feature outlines.
By default this is drawn heavier to make them stand out.</p>
</td></tr>
<tr><td><code id="plot_density_+3A_lwd">lwd</code></td>
<td>
<p>The thickness of the lines used to draw the arena. Default is 1.</p>
</td></tr>
<tr><td><code id="plot_density_+3A_resolution">resolution</code></td>
<td>
<p>The resolution of the heatmap in pixels. The default is 600
x 600.</p>
</td></tr>
<tr><td><code id="plot_density_+3A_margins">margins</code></td>
<td>
<p>The margins of the plot (see the option <code>mar</code> in
<code><a href="graphics.html#topic+par">par</a></code>). The defaults should normally not need to be
changed.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+calculate_metrics">calculate_metrics</a></code>, <code><a href="#topic+plot_path">plot_path</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(Rtrack)
track_file &lt;- system.file("extdata", "Track_1.tab", package = "Rtrack")
arena_description &lt;- system.file("extdata", "Arena.txt", package = "Rtrack")
arena &lt;- read_arena(arena_description)
path &lt;- read_path(track_file, arena, track.format = "raw.tab")
metrics &lt;- calculate_metrics(path, arena)
plot_density(metrics)

</code></pre>

<hr>
<h2 id='plot_path'>Plot a path.</h2><span id='topic+plot_path'></span>

<h3>Description</h3>

<p>Plots the path together with a representation of the arena.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_path(
  metrics,
  title = NULL,
  quadrants = FALSE,
  highlight = TRUE,
  margins = c(0, 0, 3, 0),
  path.lwd = NA,
  lwd = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_path_+3A_metrics">metrics</code></td>
<td>
<p>A <code>metrics</code> object from <code><a href="#topic+calculate_metrics">calculate_metrics</a></code>.</p>
</td></tr>
<tr><td><code id="plot_path_+3A_title">title</code></td>
<td>
<p>An optional title for the plot. The default is to use the path
name saved in the <code>metrics</code> object.</p>
</td></tr>
<tr><td><code id="plot_path_+3A_quadrants">quadrants</code></td>
<td>
<p>Should the quadrants be marked on the plot. Default is FALSE</p>
</td></tr>
<tr><td><code id="plot_path_+3A_highlight">highlight</code></td>
<td>
<p>Should key features of the path be highlighted? Default is
TRUE. The type of highlight depends on the plot type: For Morris water maze
and Barnes maze, this will draw the section of the path equivalent in
length to the distance between the start and the goal in red. For active
place avoidance, the perimeter of the arena is annotated with a red point
at the median and a line extending from the lower to the upper quartile.
For other experiment types, this parameter is currently ignored.</p>
</td></tr>
<tr><td><code id="plot_path_+3A_margins">margins</code></td>
<td>
<p>The margins of the plot (see the option <code>mar</code> in
<code><a href="graphics.html#topic+par">par</a></code>). The defaults should normally not need to be
changed.</p>
</td></tr>
<tr><td><code id="plot_path_+3A_path.lwd">path.lwd</code></td>
<td>
<p>The thickness of the line used to draw the path. By default
this is drawn heavier to make them stand out.</p>
</td></tr>
<tr><td><code id="plot_path_+3A_lwd">lwd</code></td>
<td>
<p>The thickness of the lines used to draw the arena. Default is 1.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The path is plotted together with the context of the arena. The three
concentric zones of the arena (the wall, outer wall and annulus) are drawn in
progressively lighter shades of blue. The goal is a filled circle in orange
and the old goal is drawn in grey. The direct path to goal is shown as a
broken orange line and the &quot;approach corridor&quot; (in transparent orange) is
defined as a triangle fanning out from this line by 20 degrees either side.
The path itself is drawn in black with the initial path (the section of the
path equivalent in length to the distance between the start and the goal)
drawn in red if <code>highlight = TRUE</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+calculate_metrics">calculate_metrics</a></code>, and also
<code><a href="#topic+read_experiment">read_experiment</a></code> for processing many tracks at once.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(Rtrack)
track_file &lt;- system.file("extdata", "Track_1.tab", package = "Rtrack")
arena_description &lt;- system.file("extdata", "Arena.txt", package = "Rtrack")
arena &lt;- read_arena(arena_description)
path &lt;- read_path(track_file, arena, track.format = "raw.tab")
metrics &lt;- calculate_metrics(path, arena)
plot_path(metrics)

</code></pre>

<hr>
<h2 id='plot_strategies'>Plot water maze strategies.</h2><span id='topic+plot_strategies'></span>

<h3>Description</h3>

<p>Plots the strategy usage for all groups.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_strategies(
  strategies,
  experiment,
  factor = NA,
  exclude.probe = FALSE,
  boundaries = NA,
  legend = TRUE,
  screen = FALSE,
  margins = c(5, 4, 4, 8),
  lwd = 2
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_strategies_+3A_strategies">strategies</code></td>
<td>
<p>The strategy calls as returned from
<code><a href="#topic+call_strategy">call_strategy</a></code>.</p>
</td></tr>
<tr><td><code id="plot_strategies_+3A_experiment">experiment</code></td>
<td>
<p>The experiment object as returned from
<code><a href="#topic+read_experiment">read_experiment</a></code>.</p>
</td></tr>
<tr><td><code id="plot_strategies_+3A_factor">factor</code></td>
<td>
<p>The factor by which the data should be grouped. The default,
<code>NA</code>, means that all data will be shown in one plot. Specifying a
grouping factor will cause a separate plot to be generated for each group.</p>
</td></tr>
<tr><td><code id="plot_strategies_+3A_exclude.probe">exclude.probe</code></td>
<td>
<p>Should data from probe trials be excluded (see Details).</p>
</td></tr>
<tr><td><code id="plot_strategies_+3A_boundaries">boundaries</code></td>
<td>
<p>Where should the boundaries between arena types be drawn
(see Details).</p>
</td></tr>
<tr><td><code id="plot_strategies_+3A_legend">legend</code></td>
<td>
<p>Should a legend be drawn. Default is to add a legend to the
plot.</p>
</td></tr>
<tr><td><code id="plot_strategies_+3A_screen">screen</code></td>
<td>
<p>Should multiple plots be drawn to one page. Default is
<code>FALSE</code>. This can be useful for advanced layout using
<code><a href="graphics.html#topic+split.screen">split.screen</a></code>.</p>
</td></tr>
<tr><td><code id="plot_strategies_+3A_margins">margins</code></td>
<td>
<p>The margins of the plot (see the option <code>mar</code> in
<code><a href="graphics.html#topic+par">par</a></code>). The defaults should usually be fine, but they
can be overridden if, for example, factor names are very long.</p>
</td></tr>
<tr><td><code id="plot_strategies_+3A_lwd">lwd</code></td>
<td>
<p>The thickness of the plotted lines. Default is 2.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The strategies returned by <code><a href="#topic+read_experiment">read_experiment</a></code> can be shown in a
summary plot. In these plots, the fraction of subjects utilising a particular
strategy is shown for each day/trial. If a factor is provided, then one plot
will be made for each level of the factor. To view data for mutliple factors,
they will need to be collapsed into one composite factor for plotting using
this function. If probe trials were used, these can be ignored (not plotted)
as the strategy use in the absence of the goal will be somewhat different.
For this to work, a column named &quot;Probe&quot; must be present in the experiment
description spreadsheet and must contain the value &quot;TRUE&quot; for each probe
trial.
</p>
<p>Boundaries are drawn (as broken vertical lines) between different arena types
(for example between acquisition and goal reversal phases of a Morris water
maze experiment). By default, these are added between each unique arena
definition. If this is not appropriate, then this can be overridden by
providing the <code>boundaries</code> parameter with a <code><a href="base.html#topic+matrix">matrix</a></code> or
<code><a href="base.html#topic+data.frame">data.frame</a></code> with two columns for the day and trial number
respectively. Multiple boundaries can be defined by entering the day and
trial index into rows of this table. Use <code>boundaries = NULL</code> to suppress
boundary lines altogether.
</p>


<h3>Value</h3>

<p>A <code><a href="base.html#topic+list">list</a></code> of strategy call information.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># This function relies on data too large to include in the package.
# For a worked example, please see the vignette "Rtrack MWM analysis"
# in the online package documentation at
# https://rupertoverall.net/Rtrack/.

</code></pre>

<hr>
<h2 id='plot_variable'>Plot path metrics.</h2><span id='topic+plot_variable'></span>

<h3>Description</h3>

<p>Plots the metrics that have been calculated from path coordinates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_variable(
  variable,
  experiment,
  factor = NA,
  factor.colours = "auto",
  x.axis = NA,
  type = NA,
  point.type = NA,
  transparency = 0.25,
  exclude.probe = FALSE,
  boundaries = NA,
  legend = TRUE,
  titles = TRUE,
  margins = c(5, 4, 4, 8),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_variable_+3A_variable">variable</code></td>
<td>
<p>The variable/metric that should be plotted. See Details for
the ways to specify this.</p>
</td></tr>
<tr><td><code id="plot_variable_+3A_experiment">experiment</code></td>
<td>
<p>The <code>rtrack_experiment</code> object as returned from
<code><a href="#topic+read_experiment">read_experiment</a></code>.</p>
</td></tr>
<tr><td><code id="plot_variable_+3A_factor">factor</code></td>
<td>
<p>The factor (from the table in <code>experiment$factors</code>) by
which the data should be grouped. Each factor level will be plotted as a
separate series. If not specified, all values are plotted together in one
series.</p>
</td></tr>
<tr><td><code id="plot_variable_+3A_factor.colours">factor.colours</code></td>
<td>
<p>A colour to be used for each factor level. If not
specified, colours will be automatically generated. The vector of colours
is returned to allow additional plot customisation.</p>
</td></tr>
<tr><td><code id="plot_variable_+3A_x.axis">x.axis</code></td>
<td>
<p>The scale of the x axis. &quot;Day&quot; will add a labelled axis with
tick marks at each day. If this parameter is set to &quot;Trial&quot;, then tick
marks are added for each trial. If set to &quot;none&quot;, then no x axis will be
drawn. Default (<code>NA</code>) selects an option appropriate for the experiment
type.</p>
</td></tr>
<tr><td><code id="plot_variable_+3A_type">type</code></td>
<td>
<p>The type of plot to draw. Either &quot;p&quot; for a side-by-side
stripchart with individual points, &quot;l&quot; for a line graph showing medians and
whiskers/error bars for upper and lower quartiles, &quot;b&quot; for both of these
overlaid, or <code>NA</code> (the default) indicating that the function should
choose the most appropriate type for the plot.</p>
</td></tr>
<tr><td><code id="plot_variable_+3A_point.type">point.type</code></td>
<td>
<p>The type of point to draw. Either &quot;o&quot; for open circles, &quot;x&quot;
for filled circles or any of the integer values allowed by R (see the
<code>pch</code> option for <code><a href="graphics.html#topic+par">par</a></code>).</p>
</td></tr>
<tr><td><code id="plot_variable_+3A_transparency">transparency</code></td>
<td>
<p>A value from 0 (fully transparent) to 1 (fully opaque)
governing the transparency of the points. If filled symbols are used, then
transparency can help distinguish overlapping points.</p>
</td></tr>
<tr><td><code id="plot_variable_+3A_exclude.probe">exclude.probe</code></td>
<td>
<p>Should data from probe trials be excluded (see Details).</p>
</td></tr>
<tr><td><code id="plot_variable_+3A_boundaries">boundaries</code></td>
<td>
<p>Where should the boundaries between arena types be drawn
(see Details).</p>
</td></tr>
<tr><td><code id="plot_variable_+3A_legend">legend</code></td>
<td>
<p>Should a legend be added. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="plot_variable_+3A_titles">titles</code></td>
<td>
<p>Should titles be drawn. Default is to add a main title and
titles for the x and y axes. These can be suppressed and added afterwards
(using <code><a href="graphics.html#topic+title">title</a></code>). This might be helpful for localising
to a different language for example.</p>
</td></tr>
<tr><td><code id="plot_variable_+3A_margins">margins</code></td>
<td>
<p>The margins of the plot (see the option <code>mar</code> in
<code><a href="graphics.html#topic+par">par</a></code>). The defaults should usually be fine, but they
can be overridden if, for example, factor names are very long.</p>
</td></tr>
<tr><td><code id="plot_variable_+3A_...">...</code></td>
<td>
<p>Other parameters that control some aspects of the plot. The values
for <code>lwd</code>, <code>las</code>, <code>pch</code> and <code>cex</code> can be adjusted in
this way.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Many of the summary metrics (as returned in the <code>summary</code> component of
the <code><a href="#topic+calculate_metrics">calculate_metrics</a></code> output are useful for analysis in their
own right. These can be plotted as mean values over each trial with standard
error bars. If a factor is provided, then one data series will be plotted for
each level of the factor. To view data for mutliple factors, they will need
to be collapsed into one composite factor for plotting using this function.
If probe trials were used, then &quot;latency to goal&quot; and several other variables
do not make much sense, so the data for the probe trials can be suppressed.
For this to work, a column named &quot;Probe&quot; must be present in the experiment
description spreadsheet and must contain the value &quot;TRUE&quot; for each probe
trial.
</p>
<p>The <code>variable</code> parameter can either be specified as the name of one of
the summary metrics, the name of one of the columns from the experiment
description, or as a numeric vector. In the latter case, the numeric vector
must be the same length as the number of tracks in the experiment.
</p>
<p>Boundaries are drawn (as broken vertical lines) between different arena types
(for example between acquisition and goal reversal phases of a Morris water
maze experiment). By default, these are added between each unique arena
definition. If this is not appropriate, then this can be overridden by
providing the <code>boundaries</code> parameter with a <code><a href="base.html#topic+matrix">matrix</a></code> or
<code><a href="base.html#topic+data.frame">data.frame</a></code> with two columns for the day and trial number
respectively. Multiple boundaries can be defined by entering the day and
trial index into rows of this table. Use <code>boundaries = NULL</code> to suppress
boundary lines altogether.
</p>


<h3>Value</h3>

<p>A named vector of colours used for each factor level.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># This function relies on data too large to include in the package.
# For a worked example, please see the vignette "Rtrack MWM analysis"
# in the online package documentation at
# https://rupertoverall.net/Rtrack/.

</code></pre>

<hr>
<h2 id='read_arena'>Read an arena description.</h2><span id='topic+read_arena'></span>

<h3>Description</h3>

<p>The user will normally not need to call this function directly. Use
<code><a href="#topic+read_experiment">read_experiment</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_arena(filename, description = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_arena_+3A_filename">filename</code></td>
<td>
<p>A file specifying the arena.</p>
</td></tr>
<tr><td><code id="read_arena_+3A_description">description</code></td>
<td>
<p>A data.frame containing parameters specifying the arena.
If supplied, the <code>filename</code> argument will be ignored. This is intended
for internal use only and can be ignored.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Every path must be accompanied by a description of the &quot;arena&quot;. This
description includes arena size, goal coordinates etc. and is unique for
every combination of these (i.e. a different arena description file is
required for goal reversal trials).
</p>
<p>The <code>type</code> parameter specifies the type of experiment. Current options
are <code>mwm</code> (for Morris water maze), <code>barnes</code> (Barnes maze),
<code>oft</code> (open field test), <code>nor</code> (novel object recognition task) and
<code>apa</code> (active place avoidance, also known as the carousel maze). For the
water maze, Barnes maze and APA, the pool/arena and goal platforms/holes are
restricted to being circular (the square platforms sometimes used for MWM are
approximated by a circle of a diameter equal to the width of the square. This
is because the rotational orientation of square platforms is seldom recorded
(the behaviour of the package regarding this detail may be changed in future
versions).
</p>
<p>This function does not need to be explicitly called if
<code><a href="#topic+read_experiment">read_experiment</a></code> is being used (in that case, specify the arena
file names in the column &quot;_Arena&quot;).
</p>
<p>Quadrants are defined such that the goal is centred around the north
quadrant. Note that this means that the quadrant assignment will change in
the case of a goal reversal experiment. This simplifies the experiment set-up
considerably without imposing restrictions on more complex (e.g. multiple
reversal) study designs.
</p>


<h3>Value</h3>

<p>An <code>rtrack_arena</code> object containing a representation of the
arena, which can be passed to <code><a href="#topic+read_path">read_path</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read_path">read_path</a></code>, and also <code><a href="#topic+read_experiment">read_experiment</a></code> for
processing many tracks at once.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(Rtrack)
arena_description &lt;- system.file("extdata", "Arena.txt", package = "Rtrack")
arena &lt;- read_arena(arena_description)

</code></pre>

<hr>
<h2 id='read_experiment'>Read experiment data.</h2><span id='topic+read_experiment'></span>

<h3>Description</h3>

<p>Reads a spreadsheet containing a description of all the files required for an
experiment to allow batch execution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_experiment(
  filename,
  format = NA,
  interpolate = FALSE,
  project.dir = NA,
  data.dir = project.dir,
  author.note = "",
  threads = 1,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_experiment_+3A_filename">filename</code></td>
<td>
<p>A spreadsheet file containing a description of the experiment
or a trackxf file containing an exported experiment.</p>
</td></tr>
<tr><td><code id="read_experiment_+3A_format">format</code></td>
<td>
<p>An experiment description for reading raw data can be provided
as an Excel spreadsheet (&quot;excel&quot;) or as a comma-delimited (&quot;csv&quot;) or
tab-delimited (&quot;tab&quot;, &quot;tsv&quot;, &quot;txt&quot; or &quot;text&quot;) text file. The value &quot;trackxf&quot;
indicates that the file is an archived experiment in the trackxf format (as
generated by <code><a href="#topic+export_data">export_data</a></code>). Default (<code>NA</code>) is to guess
the format from the file extension.</p>
</td></tr>
<tr><td><code id="read_experiment_+3A_interpolate">interpolate</code></td>
<td>
<p>This is passed to the <code><a href="#topic+read_path">read_path</a></code> function and
specifies whether missing data points will be interpolated when reading raw
swim path data. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="read_experiment_+3A_project.dir">project.dir</code></td>
<td>
<p>A directory path specifying where the files needed for
processing the experiment are stored. Default (<code>NA</code>) means the project
files are in the same directory as the experiment description (specified by
<code>filename</code>). Ignored if <code>format = "trackxf"</code>.</p>
</td></tr>
<tr><td><code id="read_experiment_+3A_data.dir">data.dir</code></td>
<td>
<p>A directory path specifying where the raw data are stored.
All paths specified in the experiment description spreadsheet are
interpreted as being relative to the <code>data.dir</code> directory. Default is
the same directory as <code>project.dir</code>. Ignored if <code>format =
"trackxf"</code>.</p>
</td></tr>
<tr><td><code id="read_experiment_+3A_author.note">author.note</code></td>
<td>
<p>Optional text describing the experiment. This might be
useful if the data is to be published or otherwise shared. Appropriate
information might be author names and a link to a publication or website.</p>
</td></tr>
<tr><td><code id="read_experiment_+3A_threads">threads</code></td>
<td>
<p>The number of CPU threads/processes to run in parallel. The
default is 1, which will use just one single thread. A value of 0 will try
to use the maximum number of available cores (using multi-threading if
available). Using all of the available threads/logical cores may not be
sensible though, depending on your hardware. Note that for some Linux
machines with multi-threading capabilities, the number of threads detected
might be the same as the number of physical CPU cores. Negative values will
start the default number of threads minus the given number.</p>
</td></tr>
<tr><td><code id="read_experiment_+3A_verbose">verbose</code></td>
<td>
<p>Should feedback be printed to the console. This is only useful
for debugging and takes a little longer to run. Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Information about a full experiment can be assembled into a spreadsheet (
currently Excel and CSV formats are supported) and used to process large
numbers of files in one batch. The project directory (<code>project.dir</code>) is
where the arena description files are found. This will typically be the same
place as the experiment description file (and is set to be this by default).
This does not need to be the same as the current working directory. An
optional data directory (<code>data.dir</code>) can also be specified separately
allowing the storage-intensive raw data to be kept in a different location
(for example on a remote server). Together, these options allow for
flexibility in managing your raw data storage. Individual tracks are
associated with their raw data file, experimental group metadata, an arena
and any other parameters that the strategy-calling methods require. Required
columns are &quot;_TrackID&quot;, &quot;_TargetID&quot;, &quot;_Day&quot;, &quot;_Trial&quot;, &quot;_Arena&quot; &quot;_TrackFile&quot;
and &quot;_TrackFileFormat&quot; (note the leading underscore &quot;_&quot;). Any additional
columns (without a leading underscore) will be interpreted as user-defined
factors or other metadata and will be passed on to the final analysis objects
and thus be available for statistical analysis.
</p>
<p>For details on how interpolation is performed (if <code>interpolate</code> is set
to <code>TRUE</code>), see the documentation for <code><a href="#topic+read_path">read_path</a></code>.
</p>
<p>For larger experiments, it might be helpful to run the experiment processing
on multiple CPU cores in parallel. To do this, simply specify the number of
processes (&quot;threads&quot;) to use.
</p>


<h3>Value</h3>

<p>An <code>rtrack_experiment</code> object containing a complete description
of the experiment.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read_path">read_path</a></code>, <code><a href="#topic+read_arena">read_arena</a></code>,
<code><a href="#topic+identify_track_format">identify_track_format</a></code> to identify the format of your raw
track files, and <code><a href="#topic+check_experiment">check_experiment</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(Rtrack)
experiment.description = system.file("extdata", "Minimal_experiment.xlsx",
  package = "Rtrack")
experiment = read_experiment(experiment.description)

</code></pre>

<hr>
<h2 id='read_path'>Read path coordinates from raw data formats.</h2><span id='topic+read_path'></span>

<h3>Description</h3>

<p>You will normally not need to call this directly. Use
<code><a href="#topic+read_experiment">read_experiment</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_path(
  filename,
  arena,
  id = NULL,
  track.format = "none",
  track.index = NULL,
  interpolate = FALSE,
  time.bounds = c(NA, NA)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_path_+3A_filename">filename</code></td>
<td>
<p>A raw data file containing path coordinates. See details for
supported formats.</p>
</td></tr>
<tr><td><code id="read_path_+3A_arena">arena</code></td>
<td>
<p>The <code>arena</code> object associated with this track. This is
required to calibrate the track coordinates to the coordinate space of the
arena.</p>
</td></tr>
<tr><td><code id="read_path_+3A_id">id</code></td>
<td>
<p>An optional name for the experiment. Default is to generate this
from the filename provided.</p>
</td></tr>
<tr><td><code id="read_path_+3A_track.format">track.format</code></td>
<td>
<p>The format of the raw file.</p>
</td></tr>
<tr><td><code id="read_path_+3A_track.index">track.index</code></td>
<td>
<p>Only for formats where multiple tracks are stored in one
file (ignored otherwise). This parameter indicates which section of the
file corresponds to the track to be read. The exact usage depends on the
format being read.</p>
</td></tr>
<tr><td><code id="read_path_+3A_interpolate">interpolate</code></td>
<td>
<p>Should missing data points be interpolated. Default is
<code>FALSE</code>. Interpolation is performed at evenly-spaced intervals after
removing outliers.</p>
</td></tr>
<tr><td><code id="read_path_+3A_time.bounds">time.bounds</code></td>
<td>
<p>A vector of length 2 specifying the bounds on the
measurement times (see Details).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Raw data from several sources, including many commonly-used tracking
platforms, can be read in directly. To get a list of the supported formats,
use the command <code>Rtrack::identify_track_format()</code>. The &quot;raw.tab&quot; format
is a simple tab-delimited text file containing three columns &quot;Time&quot;, &quot;X&quot;
and &quot;Y&quot;. The timestamp values in &quot;Time&quot; should be in seconds from the start
of the trial recording and coordinates should be in real-world units (e.g.
cm, in).
</p>
<p>If <code>interpolate</code> is set to <code>TRUE</code>, then the raw data will be
cleaned to remove outlier points and ensure that time points are evenly
spaced. See the online documentation for details on the method used for each
experiment type.
</p>
<p>The raw path recordings can be truncated if necessary by specifying the
<code>time.bounds</code> parameter. This is a vector of length 2 containing the
earliest and latest time points that should be retained for analysis (any
points outside these bounds will be discarded). A value of <code>NA</code>
indicates that the path should not be truncated at that end (default is
<code>c(NA, NA)</code> meaning that the path will extend to the start and end of
the recorded values). The units used must match the time units in the track
files. This option should not normally need to be set, but may be useful if
data acquisition begins before, or ends after, the actual experimental trial
(e.g. if recording was running during entry and exit from the arena).
</p>


<h3>Value</h3>

<p>An <code>rtrack_path</code> object containing the extracted swim path. This
is a list comprised of the components <code>raw.t</code> (timestamp),
<code>raw.x</code> (x coordinates), <code>raw.y</code> (y coordinates),<code>t</code>,
<code>x</code> and <code>y</code> (normalised, cleaned and possibly interpolated
coordinates).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read_arena">read_arena</a></code>, <code><a href="#topic+identify_track_format">identify_track_format</a></code> to
identify the format code for your raw data, and also
<code><a href="#topic+read_experiment">read_experiment</a></code> for processing many tracks at once.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(Rtrack)
track_file &lt;- system.file("extdata", "Track_1.tab", package = "Rtrack")
arena_description &lt;- system.file("extdata", "Arena.txt", package = "Rtrack")
arena &lt;- read_arena(arena_description)
path &lt;- read_path(track_file, arena, track.format = "raw.tab")

</code></pre>

<hr>
<h2 id='threshold_strategies'>Subset an rtrack_strategies object.</h2><span id='topic+threshold_strategies'></span>

<h3>Description</h3>

<p>Subsets strategy calls based on a threshold.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>threshold_strategies(strategies, threshold = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="threshold_strategies_+3A_strategies">strategies</code></td>
<td>
<p>An <code>rtrack_strategies</code> object as generated by
<code><a href="#topic+call_strategy">call_strategy</a></code>.</p>
</td></tr>
<tr><td><code id="threshold_strategies_+3A_threshold">threshold</code></td>
<td>
<p>A numeric value between 0 and 1.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For strategy-calling algorithms yielding a confidence score (such as
<code><a href="#topic+call_strategy">call_strategy</a></code>), a value between 0 and 1 will return a new
<code>rtrack_strategies</code> object only including calls with a confidence score
above the given threshold.
</p>


<h3>Value</h3>

<p>An <code>rtrack_strategies</code> object including only above-threshold
calls. In addition, the component <code>thresholded</code> is set to <code>TRUE</code>
if thresholding was performed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(Rtrack)
track_file &lt;- system.file("extdata", "Track_1.tab", package = "Rtrack")
arena_description &lt;- system.file("extdata", "Arena.txt", package = "Rtrack")
arena &lt;- read_arena(arena_description)
path &lt;- read_path(track_file, arena, track.format = "raw.tab")
metrics &lt;- calculate_metrics(path, arena)
strategies &lt;- call_strategy(metrics)
# Inspect the strategy call (minimal experiment only has one track)
strategies$calls
# Thresholding at 0.7 will retain the track (confidence = 0.72)
strategies = threshold_strategies(strategies, threshold = 0.7)
strategies$calls
# Thresholding at 0.8 will discard the track, still returning an (empty) rtrack_strategies object
strategies = threshold_strategies(strategies, threshold = 0.8)
strategies$calls

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
