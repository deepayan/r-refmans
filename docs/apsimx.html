<!DOCTYPE html><html><head><title>Help for package apsimx</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {apsimx}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_column_apsim_met'><p>Add a column to an object of class &lsquo;met&rsquo;</p></a></li>
<li><a href='#amp_apsim_met'><p>Calculates attribute amp for an object of class &lsquo;met&rsquo;</p></a></li>
<li><a href='#apsim'><p>Run an APSIM (7.x) &lsquo;Classic&rsquo; simulation</p></a></li>
<li><a href='#apsim_example'><p>Access Example APSIM Simulations</p></a></li>
<li><a href='#apsim_options'><p>Setting some options specific to APSIM (7.x) &lsquo;Classic&rsquo;</p></a></li>
<li><a href='#apsim_version'><p>Display available APSIM &lsquo;Classic&rsquo; and APSIM-X versions</p></a></li>
<li><a href='#apsim.options'><p>Environment which stores APSIM options</p></a></li>
<li><a href='#apsimx'><p>Run an APSIM-X simulation</p></a></li>
<li><a href='#apsimx_example'><p>Access Example APSIM-X Simulations</p></a></li>
<li><a href='#apsimx_filetype'><p>Test file format for .apsimx files</p></a></li>
<li><a href='#apsimx_options'><p>Setting some options for the package</p></a></li>
<li><a href='#apsimx_soil_profile'><p>Create APSIM-X Soil Profiles</p></a></li>
<li><a href='#apsimx.options'><p>Environment which stores APSIM-X options</p></a></li>
<li><a href='#as_apsim_met'><p>Conversion from data frame to met object</p></a></li>
<li><a href='#auto_detect_apsim_examples'><p>Auto detect where apsim examples are located</p></a></li>
<li><a href='#auto_detect_apsimx_examples'><p>Auto detect where apsimx examples are located</p></a></li>
<li><a href='#available_water_content'><p>Calculate available water content</p></a></li>
<li><a href='#carbon_stocks'><p>Calculate soil carbon stocks</p></a></li>
<li><a href='#check_apsim_met'><p>Check a met file for possible errors</p></a></li>
<li><a href='#compare_apsim'><p>Compare two or more apsim output objects</p></a></li>
<li><a href='#compare_apsim_met'><p>Compare two or more metfiles</p></a></li>
<li><a href='#compare_apsim_soil_profile'><p>Compare two or more soil profiles</p></a></li>
<li><a href='#doy2date'><p>Converts from doy to date</p></a></li>
<li><a href='#edit_apsim'><p>Edit an APSIM (Classic) Simulation</p></a></li>
<li><a href='#edit_apsim_replace_soil_profile'><p>Edit APSIM &lsquo;Classic&rsquo; file with a replaced soil profile</p></a></li>
<li><a href='#edit_apsim_xml'><p>Edit an APSIM (Classic) Simulation auxiliary xml file</p></a></li>
<li><a href='#edit_apsimx'><p>Edit an APSIM-X (JSON) Simulation</p></a></li>
<li><a href='#edit_apsimx_batch'><p>Edit an APSIM-X (JSON) Simulation in Batch mode</p></a></li>
<li><a href='#edit_apsimx_replace_soil_profile'><p>Edit APSIM-X file with a replaced soil profile</p></a></li>
<li><a href='#edit_apsimx_replacement'><p>Edit a replacement component in an .apsimx (JSON) file</p></a></li>
<li><a href='#extract_values_apsimx'><p>Extract values from a parameter path</p></a></li>
<li><a href='#get_apsimx_json'><p>fetches the json file for a specific model from APSIMX github</p></a></li>
<li><a href='#get_chirps_apsim_met'><p>Get CHIRPS data for an APSIM met file</p></a></li>
<li><a href='#get_daymet_apsim_met'><p>Get DAYMET data for an APSIM met file</p></a></li>
<li><a href='#get_daymet2_apsim_met'><p>Get DAYMET data for an APSIM met file</p></a></li>
<li><a href='#get_gsod_apsim_met'><p>Get GSOD data for an APSIM met file</p></a></li>
<li><a href='#get_iem_apsim_met'><p>Get weather data from Iowa Environmental Ag Weather Stations</p></a></li>
<li><a href='#get_iemre_apsim_met'><p>Get weather data from Iowa Environmental Mesonet Reanalysis</p></a></li>
<li><a href='#get_isric_soil_profile'><p>Generate a synthetic APSIM soil profile from the ISRIC soil database</p></a></li>
<li><a href='#get_power_apsim_met'><p>Get NASA-POWER data for an APSIM met file</p></a></li>
<li><a href='#get_ssurgo_soil_profile'><p>Retrieve soil profile data and convert it to an object of class &lsquo;soil_profile&rsquo;</p></a></li>
<li><a href='#get_ssurgo_tables'><p>Retrieve soil profile data and return a (list) with data frames (tables)</p></a></li>
<li><a href='#get_worldmodeler_soil_profile'><p>Generate a synthetic APSIM soil profile from the World Modeler database</p></a></li>
<li><a href='#grep_json_list'><p>grep but for json list</p></a></li>
<li><a href='#impute_apsim_met'><p>Perform imputation for missing data in a met file</p></a></li>
<li><a href='#initialwater_parms'><p>Helper function to supply additional Initial Soil Water parameters</p></a></li>
<li><a href='#insert_replacement_node'><p>Inserts a replacement node in a simple apsimx simulation file</p></a></li>
<li><a href='#inspect_apsim'><p>Inspect an .apsim (XML) file</p></a></li>
<li><a href='#inspect_apsim_xml'><p>Inspect an APSIM Classic auxiliary (XML) file</p></a></li>
<li><a href='#inspect_apsimx'><p>Inspect an .apsimx (JSON) file</p></a></li>
<li><a href='#inspect_apsimx_json'><p>Inspect an .apsimx or .json (JSON) file</p></a></li>
<li><a href='#inspect_apsimx_replacement'><p>Inspect a replacement component in an .apsimx (JSON) file</p></a></li>
<li><a href='#mcmc.apsim.env'><p>Environment to store data for apsim MCMC</p></a></li>
<li><a href='#mcmc.apsimx.env'><p>Environment to store data for apsimx MCMC</p></a></li>
<li><a href='#napad_apsim_met'><p>Pad a met file with NAs when there are date discontinuities</p></a></li>
<li><a href='#obsWheat'><p>Observed wheat phenology, LAI and biomass</p></a></li>
<li><a href='#optim_apsim'><p>Optimize parameters in an APSIM simulation</p></a></li>
<li><a href='#optim_apsimx'><p>Optimize parameters in an APSIM Next Generation simulation</p></a></li>
<li><a href='#plot.met'><p>Plot method for object of class &lsquo;met&rsquo;</p></a></li>
<li><a href='#print.met'><p>Printer-friendly version of a metfile</p></a></li>
<li><a href='#read_apsim'><p>Read APSIM generated .out files</p></a></li>
<li><a href='#read_apsim_all'><p>Read all APSIM generated .out files in a directory</p></a></li>
<li><a href='#read_apsim_met'><p>Read in an APSIM met file</p></a></li>
<li><a href='#read_apsim_soils'><p>Read in a soils (XML) file into a list of &lsquo;soil_profile&rsquo; objects</p></a></li>
<li><a href='#read_apsimx'><p>Read APSIM-X generated .db files</p></a></li>
<li><a href='#read_apsimx_all'><p>Read all APSIM-X generated .db files in a directory</p></a></li>
<li><a href='#sens_apsim'><p>Sensitivity Analysis for APSIM Next Generation simulation</p></a></li>
<li><a href='#sens_apsimx'><p>Sensitivity Analysis for APSIM Next Generation simulation</p></a></li>
<li><a href='#soilorganicmatter_parms'><p>Helper function to supply additional Soil Organic Matter parameters</p></a></li>
<li><a href='#soilwat_parms'><p>Helper function to supply SoilWat parameters</p></a></li>
<li><a href='#ssurgo2sp'><p>Take in <abbr><span class="acronym">SSURGO</span></abbr> csv files and create a soil profile</p></a></li>
<li><a href='#summary.met'><p>Summary for an APSIM met file</p></a></li>
<li><a href='#swim_parms'><p>Helper function to supply SWIM parameters</p></a></li>
<li><a href='#tt_apsim_met'><p>Calculates Thermal Time taking a &lsquo;met&rsquo; object</p></a></li>
<li><a href='#unit_conv'><p>performs common unit conversions</p></a></li>
<li><a href='#view_apsim'><p>Viewing an APSIM Classic file interactively</p></a></li>
<li><a href='#view_apsim_xml'><p>View an APSIM Classic auxiliary (XML) file</p></a></li>
<li><a href='#view_apsimx'><p>Viewing an APSIM-X file interactively</p></a></li>
<li><a href='#wop'><p>Wheat example optimization results</p></a></li>
<li><a href='#wop.h'><p>Wheat example optimization results plus Hessian</p></a></li>
<li><a href='#write_apsim_met'><p>Write an APSIM met file</p></a></li>
<li><a href='#xargs_apsimx'><p>Provide extra arguments for APSIM-X</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Inspect, Read, Edit and Run 'APSIM' "Next Generation" and
'APSIM' Classic</td>
</tr>
<tr>
<td>Version:</td>
<td>2.6.2</td>
</tr>
<tr>
<td>Description:</td>
<td>The functions in this package inspect, read, edit and run files for 'APSIM' "Next Generation" ('JSON')
             and 'APSIM' "Classic" ('XML'). The files with an 'apsim' extension correspond to
	     'APSIM' Classic (7.x) - Windows only - and the ones with an 'apsimx' extension correspond to 'APSIM' "Next Generation".
	     For more information about 'APSIM' see (<a href="https://www.apsim.info/">https://www.apsim.info/</a>) and for 'APSIM'
	     next generation (<a href="https://apsimnextgeneration.netlify.app/">https://apsimnextgeneration.netlify.app/</a>). </td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/femiguez/apsimx/issues">https://github.com/femiguez/apsimx/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>DBI, jsonlite, knitr, RSQLite, tools, utils, xml2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>BayesianTools, chirps, datasets, daymetr, FedData, ggplot2,
GSODR, listviewer, maps, metrica, mvtnorm, nasapower, nloptr,
reactR, rmarkdown, sensitivity, soilDB, sp, spData, sf, ucminf</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-28 12:56:02 UTC; fernandomiguez</td>
</tr>
<tr>
<td>Author:</td>
<td>Fernando Miguez <a href="https://orcid.org/0000-0002-4627-8329"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Fernando Miguez &lt;femiguez@iastate.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-29 13:10:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_column_apsim_met'>Add a column to an object of class &lsquo;met&rsquo;</h2><span id='topic+add_column_apsim_met'></span><span id='topic++24+3C-.met'></span><span id='topic+remove_column_apsim_met'></span>

<h3>Description</h3>

<p>The usual way of adding a column to a data frame might
not work for an object of class &lsquo;met&rsquo;, so this method is recommended
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_column_apsim_met(met, value, name, units)

## S3 replacement method for class 'met'
x$name &lt;- value

remove_column_apsim_met(met, name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_column_apsim_met_+3A_met">met</code></td>
<td>
<p>object of class &lsquo;met&rsquo;</p>
</td></tr>
<tr><td><code id="add_column_apsim_met_+3A_value">value</code></td>
<td>
<p>value for the data.frame. It could be an integer, double or vector of length equal to the number of rows in x.</p>
</td></tr>
<tr><td><code id="add_column_apsim_met_+3A_name">name</code></td>
<td>
<p>name of the variable to be removed</p>
</td></tr>
<tr><td><code id="add_column_apsim_met_+3A_units">units</code></td>
<td>
<p>units for the new column (required)</p>
</td></tr>
<tr><td><code id="add_column_apsim_met_+3A_x">x</code></td>
<td>
<p>object of class &lsquo;met&rsquo;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class &lsquo;met&rsquo; with the additional column
</p>
<p>an object of class &lsquo;met&rsquo; without the variable (column) in &lsquo;name&rsquo;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
extd.dir &lt;- system.file("extdata", package = "apsimx")
ames &lt;- read_apsim_met("Ames.met", src.dir = extd.dir)

## The recommended method is
val &lt;- abs(rnorm(nrow(ames), 10))
ames &lt;- add_column_apsim_met(ames, value = val, name = "vp", units = "(hPa)")

## This is also possible
vp &lt;- data.frame(vp = abs(rnorm(nrow(ames), 10)))
attr(vp, "units") &lt;- "(hPa)"
ames$vp &lt;- vp$vp

## This is needed to ensure that units and related attributes are also removed
ames &lt;- remove_column_apsim_met(ames, "vp")
## However, ames$vp &lt;- NULL will also work



</code></pre>

<hr>
<h2 id='amp_apsim_met'>Calculates attribute amp for an object of class &lsquo;met&rsquo;</h2><span id='topic+amp_apsim_met'></span>

<h3>Description</h3>

<p>This function can re-calculates annual mean monthly amplitude
for an object of class &lsquo;met&rsquo;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>amp_apsim_met(met)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="amp_apsim_met_+3A_met">met</code></td>
<td>
<p>object of class &lsquo;met&rsquo;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class &lsquo;met&rsquo; with a recalculation of annual amplitude in mean monthly temperature
</p>

<hr>
<h2 id='apsim'>Run an APSIM (7.x) &lsquo;Classic&rsquo; simulation</h2><span id='topic+apsim'></span>

<h3>Description</h3>

<p>Run apsim from R. It's for Windows only. It uses &lsquo;shell&rsquo;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apsim(
  file = "",
  src.dir = ".",
  silent = FALSE,
  value = "report",
  cleanup = FALSE,
  simplify = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apsim_+3A_file">file</code></td>
<td>
<p>file name to be run (the extension .apsim is optional)</p>
</td></tr>
<tr><td><code id="apsim_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .apsim file to be run (defaults to the current directory)</p>
</td></tr>
<tr><td><code id="apsim_+3A_silent">silent</code></td>
<td>
<p>whether to print messages from apsim simulation</p>
</td></tr>
<tr><td><code id="apsim_+3A_value">value</code></td>
<td>
<p>how much output to return: <br />
option &lsquo;report&rsquo; returns only the &lsquo;main&rsquo; report component;
option &lsquo;all&rsquo; returns all components of the simulation; <br />
option &lsquo;none&rsquo; runs simulation but does not return a data frame; <br />
option &lsquo;user-defined&rsquo; should be the name of a specific output file.</p>
</td></tr>
<tr><td><code id="apsim_+3A_cleanup">cleanup</code></td>
<td>
<p>logical. Whether to delete the .out and .sum files generated by APSIM. Default is FALSE.</p>
</td></tr>
<tr><td><code id="apsim_+3A_simplify">simplify</code></td>
<td>
<p>whether to return a single data frame when multiple simulations are present. If FALSE it will return a list.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Run an APSIM (7.x) &lsquo;Classic&rsquo; Simulation
</p>
<p>A valid apsim file can be run from within R. The main goal is to make running APSIM-X
simple, especially for large scale simulations or parameter optimization
</p>


<h3>Value</h3>

<p>This function returns a data frame with APSIM output, but it depends on the argument &lsquo;value&rsquo; above.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## See function 'apsim_example' 


</code></pre>

<hr>
<h2 id='apsim_example'>Access Example APSIM Simulations</h2><span id='topic+apsim_example'></span>

<h3>Description</h3>

<p>simple function to run some of the built-in APSIM examples
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apsim_example(example = "Millet", silent = FALSE, tmp.dir = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apsim_example_+3A_example">example</code></td>
<td>
<p>run an example from built-in APSIM. Options are all of the ones included with the APSIM distribution, except &lsquo;Graph&rsquo;.</p>
</td></tr>
<tr><td><code id="apsim_example_+3A_silent">silent</code></td>
<td>
<p>whether to print standard output from the APSIM execution</p>
</td></tr>
<tr><td><code id="apsim_example_+3A_tmp.dir">tmp.dir</code></td>
<td>
<p>temporary directory where to write files</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function creates a temporary copy of the example file distributed with APSIM to avoid writing a .out file 
to the directory where the &lsquo;Examples&rsquo; are located. It is not a good practice and there is no guarantee that 
the user has read/write permissions in that directory.
</p>


<h3>Value</h3>

<p>This function returns a data frame with APSIM output
</p>


<h3>Note</h3>

<p>This function creates a new column &lsquo;Date&rsquo; which is in the R &lsquo;Date&rsquo; format which is convenient for graphics.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## Only run these if you have APSIM 'Classic' installed (Windows only)
millet &lt;- apsim_example("Millet")
potato &lt;- apsim_example("Potato")
sugar &lt;- apsim_example("Sugar")
## The 'Date' column is created by this function, based on apsim output.
require(ggplot2)
ggplot(data = millet , aes(x = Date, y = millet_biomass)) + 
  geom_line()

## End(Not run)

</code></pre>

<hr>
<h2 id='apsim_options'>Setting some options specific to APSIM (7.x) &lsquo;Classic&rsquo;</h2><span id='topic+apsim_options'></span>

<h3>Description</h3>

<p>Set the path to the APSIM executable, examples and warning suppression.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apsim_options(exe.path = NA, examples.path = NA, warn.versions = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apsim_options_+3A_exe.path">exe.path</code></td>
<td>
<p>path to apsim executable</p>
</td></tr>
<tr><td><code id="apsim_options_+3A_examples.path">examples.path</code></td>
<td>
<p>path to apsim examples</p>
</td></tr>
<tr><td><code id="apsim_options_+3A_warn.versions">warn.versions</code></td>
<td>
<p>logical. warning if multiple versions of APSIM are detected.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Set apsim options
</p>


<h3>Value</h3>

<p>It modifies the &lsquo;apsim.options&rsquo; environment as a side effect.
</p>


<h3>Note</h3>

<p>It is possible that APSIM 7.x &lsquo;Classic&rsquo; is installed in some alternative location other than the 
defaults ones. Guessing this can be difficult and then the auto_detect functions might
fail. Also, if multiple versions of APSIM are installed apsim will choose the newest
one but it will issue a warning. Suppress the warning by setting warn.versions = FLASE.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
names(apsim.options)
apsim_options(exe.path = "some-new-path-to-executable")
apsim.options$exe.path

## End(Not run)
</code></pre>

<hr>
<h2 id='apsim_version'>Display available APSIM &lsquo;Classic&rsquo; and APSIM-X versions</h2><span id='topic+apsim_version'></span>

<h3>Description</h3>

<p>Display available APSIM &lsquo;Classic&rsquo; and APSIM-X versions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apsim_version(which = c("all", "inuse"), verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apsim_version_+3A_which">which</code></td>
<td>
<p>either &lsquo;all&rsquo; or &lsquo;inuse&rsquo;</p>
</td></tr>
<tr><td><code id="apsim_version_+3A_verbose">verbose</code></td>
<td>
<p>whether to print the information to standard output</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame (all) or a vector (inuse) with APSIM-X and/or APSIM versions
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## Check which apsim version are avialable
ava &lt;- apsim_version(verbose = TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='apsim.options'>Environment which stores APSIM options</h2><span id='topic+apsim.options'></span>

<h3>Description</h3>

<p>Environment which can store the path to the executable and where examples are located.
Creating an environment avoids the use of global variables or other similar practices
which would have possible undesriable consequences.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apsim.options
</code></pre>


<h3>Format</h3>

<p>An object of class <code>environment</code> of length 3.
</p>


<h3>Details</h3>

<p>Environment which stores APSIM options
</p>


<h3>Value</h3>

<p>This is an environment, so nothing to return.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
names(apsim.options)
apsim_options(exe.path = "some-new-path-to-executable")
apsim.options$exe.path

## End(Not run)

</code></pre>

<hr>
<h2 id='apsimx'>Run an APSIM-X simulation</h2><span id='topic+apsimx'></span>

<h3>Description</h3>

<p>Run apsimx from R. It uses &lsquo;system&rsquo; (unix) or &lsquo;shell&rsquo; (windows) and it attempts to be platform independent.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apsimx(
  file = "",
  src.dir = ".",
  silent = FALSE,
  value = "report",
  cleanup = FALSE,
  simplify = TRUE,
  xargs
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apsimx_+3A_file">file</code></td>
<td>
<p>file name to be run (the extension .apsimx is optional)</p>
</td></tr>
<tr><td><code id="apsimx_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .apsimx file to be run (defaults to the current directory)</p>
</td></tr>
<tr><td><code id="apsimx_+3A_silent">silent</code></td>
<td>
<p>whether to print messages from apsim simulation</p>
</td></tr>
<tr><td><code id="apsimx_+3A_value">value</code></td>
<td>
<p>how much output to return: <br />
option &lsquo;report&rsquo; returns only the &lsquo;main&rsquo; report component; <br />
option &lsquo;all&rsquo; returns all components of the simulation; <br />
option &lsquo;none&rsquo; does not create a data.frame but it generates the databases; <br />
option &lsquo;user-defined&rsquo; should be the name of a specific table</p>
</td></tr>
<tr><td><code id="apsimx_+3A_cleanup">cleanup</code></td>
<td>
<p>logical. Whether to delete the .db file generated by APSIM-X. Default is FALSE</p>
</td></tr>
<tr><td><code id="apsimx_+3A_simplify">simplify</code></td>
<td>
<p>whether to return a single data frame when multiple reports are present. If FALSE it will return a list.</p>
</td></tr>
<tr><td><code id="apsimx_+3A_xargs">xargs</code></td>
<td>
<p>extra arguments to be passed to the APSIM-X run. Use function xargs_apsimx.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Run an APSIM-X Simulation
</p>
<p>A valid apsimx file can be run from within R. The main goal is to make running APSIM-X
simple, especially for large scale simulations or parameter optimization
</p>


<h3>Value</h3>

<p>a data frame with the &lsquo;Report&rsquo; from the APSIM-X simulation. The return value depends on the argument &lsquo;value&rsquo; above.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## See function 'apsimx_example' and vignette 'apsimx'


</code></pre>

<hr>
<h2 id='apsimx_example'>Access Example APSIM-X Simulations</h2><span id='topic+apsimx_example'></span>

<h3>Description</h3>

<p>simple function to run some of the built-in APSIM-X examples
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apsimx_example(example = "Wheat", silent = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apsimx_example_+3A_example">example</code></td>
<td>
<p>run an example from built-in APSIM-X. Options are all of the ones included with the APSIM-X distribution, except &lsquo;Graph&rsquo;.</p>
</td></tr>
<tr><td><code id="apsimx_example_+3A_silent">silent</code></td>
<td>
<p>whether to print standard output from the APSIM-X execution</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function creates a temporary copy of the example file distributed with APSIM-X to avoid writing a .db file 
to the directory where the &lsquo;Examples&rsquo; are located. It is not a good practice and there is no guarantee that 
the user has read/write permissions in that directory.
</p>


<h3>Value</h3>

<p>It returns a data frame
</p>


<h3>Note</h3>

<p>This function creates a new column &lsquo;Date&rsquo; which is in the R &lsquo;Date&rsquo; format which is convenient for graphics.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
wheat &lt;- apsimx_example("Wheat")
maize &lt;- apsimx_example("Maize")
barley &lt;- apsimx_example("Barley")
## The 'Date' column is created by this function, based on apsim output.
require(ggplot2)
ggplot(data = wheat , aes(x = Date, y = Yield)) + 
  geom_point()

## End(Not run)

</code></pre>

<hr>
<h2 id='apsimx_filetype'>Test file format for .apsimx files</h2><span id='topic+apsimx_filetype'></span>

<h3>Description</h3>

<p>Test whether an .apsimx file is XML or json
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apsimx_filetype(file = "", src.dir = ".")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apsimx_filetype_+3A_file">file</code></td>
<td>
<p>file ending in .apsimx to be tested</p>
</td></tr>
<tr><td><code id="apsimx_filetype_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .apsimx file to be tested; defaults to the current working directory</p>
</td></tr>
</table>


<h3>Value</h3>

<p>&lsquo;xml&rsquo;, &lsquo;json&rsquo; or &lsquo;unknown&rsquo;
</p>


<h3>Note</h3>

<p>Minimal function which reads only the first line in a file and tries to guess whether it is
an &lsquo;xml&rsquo; or &lsquo;json&rsquo; file type.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
extd.dir &lt;- system.file("extdata", package = "apsimx")
apsimx_filetype("Wheat.apsimx", src.dir = extd.dir) 


</code></pre>

<hr>
<h2 id='apsimx_options'>Setting some options for the package</h2><span id='topic+apsimx_options'></span>

<h3>Description</h3>

<p>Set the path to the APSIM-X executable, examples and warning suppression.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apsimx_options(
  exe.path = NA,
  dotnet = FALSE,
  mono = FALSE,
  examples.path = NA,
  warn.versions = TRUE,
  warn.find.apsimx = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apsimx_options_+3A_exe.path">exe.path</code></td>
<td>
<p>path to apsim executable. White spaces are not allowed.</p>
</td></tr>
<tr><td><code id="apsimx_options_+3A_dotnet">dotnet</code></td>
<td>
<p>logical indicating if APSIM should be run through the dotnet command</p>
</td></tr>
<tr><td><code id="apsimx_options_+3A_mono">mono</code></td>
<td>
<p>logical indicating if the mono command should be used when running APSIM. This is for versions 
for Mac/Linux older than Sept 2021.</p>
</td></tr>
<tr><td><code id="apsimx_options_+3A_examples.path">examples.path</code></td>
<td>
<p>path to apsim examples</p>
</td></tr>
<tr><td><code id="apsimx_options_+3A_warn.versions">warn.versions</code></td>
<td>
<p>logical. warning if multiple versions of APSIM-X are detected.</p>
</td></tr>
<tr><td><code id="apsimx_options_+3A_warn.find.apsimx">warn.find.apsimx</code></td>
<td>
<p>logical. By default a warning will be thrown if APSIM-X is not found. 
If &lsquo;exe.path&rsquo; is &lsquo;NA&rsquo; an error will be thrown instead.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Set apsimx options
</p>


<h3>Value</h3>

<p>as a side effect it modifies the &lsquo;apsimx.options&rsquo; environment.
</p>


<h3>Note</h3>

<p>It is possible that APSIM-X is installed in some alternative location other than the 
defaults ones. Guessing this can be difficult and then the auto_detect functions might
fail. Also, if multiple versions of APSIM-X are installed apsimx will choose the newest
one but it will issue a warning. Suppress the warning by setting warn.versions = FLASE.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
names(apsimx.options)
apsimx_options(exe.path = "some-new-path-to-executable")
apsimx.options$exe.path

</code></pre>

<hr>
<h2 id='apsimx_soil_profile'>Create APSIM-X Soil Profiles</h2><span id='topic+apsimx_soil_profile'></span><span id='topic+plot.soil_profile'></span><span id='topic+check_apsimx_soil_profile'></span>

<h3>Description</h3>

<p>Generates a soil profile that can then replace the existing one in an &lsquo;.apsimx&rsquo; or &lsquo;.apsim&rsquo; simulation file
</p>
<p>plotting function for a soil profile, it requires &lsquo;ggplot2&rsquo;
</p>
<p>checking an apsimx soil profile for reasonable values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apsimx_soil_profile(
  nlayers = 10,
  Depth = NULL,
  Thickness = NULL,
  BD = NULL,
  AirDry = NULL,
  LL15 = NULL,
  DUL = NULL,
  SAT = NULL,
  KS = NULL,
  crop.LL = NULL,
  crop.KL = NULL,
  crop.XF = NULL,
  Carbon = NULL,
  SoilCNRatio = NULL,
  FOM = NULL,
  FOM.CN = NULL,
  FBiom = NULL,
  FInert = NULL,
  NO3N = NULL,
  NH4N = NULL,
  PH = NULL,
  ParticleSizeClay = NULL,
  ParticleSizeSilt = NULL,
  ParticleSizeSand = NULL,
  soil.bottom = 150,
  water.table = 200,
  soil.type = 0,
  crops = c("Maize", "Soybean", "Wheat"),
  metadata = NULL,
  soilwat = NA,
  swim = NA,
  initialwater = NA,
  soilorganicmatter = NA,
  dist.parms = list(a = 0, b = 0.2),
  check = TRUE
)

## S3 method for class 'soil_profile'
plot(
  x,
  ...,
  property = c("all", "water", "BD", "AirDry", "LL15", "DUL", "SAT", "KS", "Carbon",
    "SoilCNRatio", "FOM", "FOM.CN", "FBiom", "FInert", "NO3N", "NH4N", "PH")
)

check_apsimx_soil_profile(x, particle.density = 2.65)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apsimx_soil_profile_+3A_nlayers">nlayers</code></td>
<td>
<p>Number of soil layers (default = 10)</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_depth">Depth</code></td>
<td>
<p>specific depths for each soil layer (cm)</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_thickness">Thickness</code></td>
<td>
<p>thickness for each soil layer (mm)</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_bd">BD</code></td>
<td>
<p>bulk density for each soil layer (g/cc) &ndash; &lsquo;cc&rsquo; is cubic cm</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_airdry">AirDry</code></td>
<td>
<p>air dry for each soil layer (mm/mm)</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_ll15">LL15</code></td>
<td>
<p>lower limit (15 bar) for each soil layer (mm/mm)</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_dul">DUL</code></td>
<td>
<p>drainage upper limit (0.33 bar) for each soil layer (mm/mm)</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_sat">SAT</code></td>
<td>
<p>saturation (0 bar) for each soil layer (mm/mm)</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_ks">KS</code></td>
<td>
<p>saturated hydraulic conductivity (mm/day)</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_crop.ll">crop.LL</code></td>
<td>
<p>lower limit for a specific crop</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_crop.kl">crop.KL</code></td>
<td>
<p>root ability to extract water for a specific crop</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_crop.xf">crop.XF</code></td>
<td>
<p>soil root exploration for a specific crop</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_carbon">Carbon</code></td>
<td>
<p>organic carbon (percent)</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_soilcnratio">SoilCNRatio</code></td>
<td>
<p>organic carbon C:N ratio</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_fom">FOM</code></td>
<td>
<p>fresh organic matter (kg/ha)</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_fom.cn">FOM.CN</code></td>
<td>
<p>fresh organic matter C:N ratio</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_fbiom">FBiom</code></td>
<td>
<p>Fraction of microbial biomass (0-1)</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_finert">FInert</code></td>
<td>
<p>Fraction of inert carbon (0-1)</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_no3n">NO3N</code></td>
<td>
<p>nitrate nitrogen (Chemical) (ppm)</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_nh4n">NH4N</code></td>
<td>
<p>ammonium nitrogen (Chemical) (ppm)</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_ph">PH</code></td>
<td>
<p>soil pH</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_particlesizeclay">ParticleSizeClay</code></td>
<td>
<p>particle size clay (in percent)</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_particlesizesilt">ParticleSizeSilt</code></td>
<td>
<p>particle size silt (in percent)</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_particlesizesand">ParticleSizeSand</code></td>
<td>
<p>particle size sand (in percent)</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_soil.bottom">soil.bottom</code></td>
<td>
<p>bottom of the soil profile (cm)</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_water.table">water.table</code></td>
<td>
<p>water table level (not used at the moment) (cm)</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_soil.type">soil.type</code></td>
<td>
<p>might use it in the future for auto filling missing information</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_crops">crops</code></td>
<td>
<p>name of crops being grown</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_metadata">metadata</code></td>
<td>
<p>list with soil metadata. For possible parameters and values see an example of <code><a href="#topic+inspect_apsimx">inspect_apsimx</a></code> with soil.child = &ldquo;Metadata&rdquo;.</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_soilwat">soilwat</code></td>
<td>
<p>optional &lsquo;list&rsquo; of class &lsquo;soilwat_parms&rsquo;</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_swim">swim</code></td>
<td>
<p>optional &lsquo;list&rsquo; of class &lsquo;swim_parms&rsquo;</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_initialwater">initialwater</code></td>
<td>
<p>optional &lsquo;list&rsquo; of class &lsquo;initialsoilwater_parms&rsquo;</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_soilorganicmatter">soilorganicmatter</code></td>
<td>
<p>optional &lsquo;list&rsquo; of class &lsquo;soilorganicmatter_parms&rsquo;</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_dist.parms">dist.parms</code></td>
<td>
<p>parameter values for creating a profile. If a == 0 and b == 0 then <br />
a constant value of 1 is used. If a == 0 and b != 0, then an exponential decay is used. <br />
If a != 0 and b != 0 then the equation is <code>a*soil.layer*exp(-b*soil.layer)</code>.</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_check">check</code></td>
<td>
<p>whether to check for reasonable values using <code><a href="#topic+check_apsimx_soil_profile">check_apsimx_soil_profile</a></code></p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_x">x</code></td>
<td>
<p>object of class &lsquo;soil_profile&rsquo; or the &lsquo;soil&rsquo; 
component within an object of class &lsquo;soil_profile&rsquo;.</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_...">...</code></td>
<td>
<p>additional plotting arguments (none use at the moment).</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_property">property</code></td>
<td>
<p>&ldquo;all&rdquo; for plotting all soil properties, &ldquo;water&rdquo; for just SAT, DUL and LL15</p>
</td></tr>
<tr><td><code id="apsimx_soil_profile_+3A_particle.density">particle.density</code></td>
<td>
<p>default value for soil particle density (2.65 g/cm3)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Soil Profiles
</p>
<p>Real soils might have discontinuities, but for APSIM it might be beneficial to be able to create 
a soil profile with an arbitrary number of layers and have flexibility in the 
distribution of soil physical and chemical properties. Steps:
</p>
<p>1. <code><a href="#topic+apsimx_soil_profile">apsimx_soil_profile</a></code> is a function which can create a soil matrix with many layers <br />
2. It allows for creating a smooth distribution for Physical (or Water), Chemical, InitialWater, Analysis, InitialN, Organic or SoilOrganicMatter <br />
3. The distribution can be specified with the &lsquo;a&rsquo; and &lsquo;c&rsquo; parameter of an exponential decay function, using a list. E.g. DUL = list(0.35, 0, -0.1).
This means that the top value for DUL will be 0.35 and it will decay with a rate of -0.1. <br />
4. If an increase and then a decay is needed the Ricker function can be used. See &lsquo;SSricker&rsquo; in the &lsquo;nlraa&rsquo; package. <br />
</p>
<p>The value of soil particle density (2.65 g/cm3) is hard coded in APSIM. 
https://en.wikipedia.org/wiki/Bulk_density
</p>


<h3>Value</h3>

<p>a soil profile with class &lsquo;soil_profile&rsquo; with elements &lsquo;soil&rsquo;, &lsquo;crops&rsquo;, &lsquo;metadata&rsquo;,
&lsquo;soilwat&rsquo; and &lsquo;swim&rsquo;.
</p>
<p>it produces a plot
</p>
<p>It does not produce output unless potential issues are found. Only warnings
are produced and it returns an object of class &lsquo;soil_profile&rsquo;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
 sp &lt;- apsimx_soil_profile()
 require(ggplot2)
 plot(sp)
 

</code></pre>

<hr>
<h2 id='apsimx.options'>Environment which stores APSIM-X options</h2><span id='topic+apsimx.options'></span>

<h3>Description</h3>

<p>Environment which can store the path to the executable, warning settings and 
where examples are located.
Creating an environment avoids the use of global variables or other similar practices
which would have possible undesriable consequences.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apsimx.options
</code></pre>


<h3>Format</h3>

<p>An object of class <code>environment</code> of length 7.
</p>


<h3>Details</h3>

<p>Environment which stores APSIM-X options
</p>


<h3>Value</h3>

<p>This is an environment, not a function, so nothing is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
names(apsimx.options)
apsimx_options(exe.path = "some-new-path-to-executable")
apsimx.options$exe.path


</code></pre>

<hr>
<h2 id='as_apsim_met'>Conversion from data frame to met object</h2><span id='topic+as_apsim_met'></span>

<h3>Description</h3>

<p>It makes minimum assumptions about the data so it is recommended to change defaults
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_apsim_met(
  x,
  filename = "noname.met",
  site = "nosite",
  latitude = 0,
  longitude = 0,
  tav = NA,
  amp = NA,
  colnames = c("year", "day", "radn", "maxt", "mint", "rain"),
  units = c("()", "()", "(MJ/m2/day)", "(oC)", "(oC)", "(mm)"),
  constants = NA,
  comments = NA,
  check = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_apsim_met_+3A_x">x</code></td>
<td>
<p>object of class &lsquo;data frame&rsquo;</p>
</td></tr>
<tr><td><code id="as_apsim_met_+3A_filename">filename</code></td>
<td>
<p>default &lsquo;noname.met&rsquo;</p>
</td></tr>
<tr><td><code id="as_apsim_met_+3A_site">site</code></td>
<td>
<p>default &lsquo;nosite&rsquo;</p>
</td></tr>
<tr><td><code id="as_apsim_met_+3A_latitude">latitude</code></td>
<td>
<p>default is zero (0)</p>
</td></tr>
<tr><td><code id="as_apsim_met_+3A_longitude">longitude</code></td>
<td>
<p>default is zero (0)</p>
</td></tr>
<tr><td><code id="as_apsim_met_+3A_tav">tav</code></td>
<td>
<p>average temperature (calculated if not supplied)</p>
</td></tr>
<tr><td><code id="as_apsim_met_+3A_amp">amp</code></td>
<td>
<p>temperature amplitude (calculated if not supplied)</p>
</td></tr>
<tr><td><code id="as_apsim_met_+3A_colnames">colnames</code></td>
<td>
<p>default are &ldquo;year&rdquo;, &ldquo;day&rdquo;, &ldquo;radn&rdquo;, 
&ldquo;maxt&rdquo;, &ldquo;mint&rdquo;, &ldquo;rain&rdquo;</p>
</td></tr>
<tr><td><code id="as_apsim_met_+3A_units">units</code></td>
<td>
<p>default are &ldquo;()&rdquo;, &ldquo;()&rdquo;, &ldquo;(MJ/m2/day)&rdquo;,
&ldquo;(oC)&rdquo;, &ldquo;(oC)&rdquo;, &ldquo;(mm)&rdquo;</p>
</td></tr>
<tr><td><code id="as_apsim_met_+3A_constants">constants</code></td>
<td>
<p>default is &ldquo;NA&rdquo;</p>
</td></tr>
<tr><td><code id="as_apsim_met_+3A_comments">comments</code></td>
<td>
<p>default is &ldquo;NA&rdquo;</p>
</td></tr>
<tr><td><code id="as_apsim_met_+3A_check">check</code></td>
<td>
<p>whether to check the resulting met file using <code><a href="#topic+check_apsim_met">check_apsim_met</a></code>.
default is TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Simple utility for converting a data frame to an object of class met
</p>


<h3>Value</h3>

<p>it returns an object of class &lsquo;met&rsquo;.
</p>

<hr>
<h2 id='auto_detect_apsim_examples'>Auto detect where apsim examples are located</h2><span id='topic+auto_detect_apsim_examples'></span>

<h3>Description</h3>

<p>simple function to detect where APSIM &lsquo;Classic&rsquo; examples are located
</p>


<h3>Usage</h3>

<pre><code class='language-R'>auto_detect_apsim_examples()
</code></pre>


<h3>Details</h3>

<p>Auto detect where APSIM (7.x) &lsquo;Classic&rsquo; examples are located
</p>


<h3>Value</h3>

<p>will create a directory pointing to APSIM &lsquo;Classic&rsquo; distributed examples
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ex.dir &lt;- auto_detect_apsim_examples()

## End(Not run)

</code></pre>

<hr>
<h2 id='auto_detect_apsimx_examples'>Auto detect where apsimx examples are located</h2><span id='topic+auto_detect_apsimx_examples'></span>

<h3>Description</h3>

<p>simple function to detect where APSIM-X examples are located
</p>


<h3>Usage</h3>

<pre><code class='language-R'>auto_detect_apsimx_examples()
</code></pre>


<h3>Details</h3>

<p>Auto detect where apsimx examples are located
</p>


<h3>Value</h3>

<p>will create a directory (character string) pointing to APSIM-X distributed examples
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ex.dir &lt;- auto_detect_apsimx_examples()

## End(Not run)

</code></pre>

<hr>
<h2 id='available_water_content'>Calculate available water content</h2><span id='topic+available_water_content'></span>

<h3>Description</h3>

<p>Calculation of available water content based on an object of class &lsquo;soil_profile&rsquo;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>available_water_content(
  x,
  depth,
  area = c("m", "m2", "ha"),
  method = c("linear", "constant"),
  weights,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="available_water_content_+3A_x">x</code></td>
<td>
<p>object of class &lsquo;soil_profile&rsquo;</p>
</td></tr>
<tr><td><code id="available_water_content_+3A_depth">depth</code></td>
<td>
<p>soil depth (in meters). If missing then the whole soil profile is used.</p>
</td></tr>
<tr><td><code id="available_water_content_+3A_area">area</code></td>
<td>
<p>either &lsquo;m&rsquo; meter, &lsquo;m2&rsquo; meter squared or &lsquo;ha&rsquo;.</p>
</td></tr>
<tr><td><code id="available_water_content_+3A_method">method</code></td>
<td>
<p>interpolation method. Either &lsquo;linear&rsquo; or &lsquo;constant&rsquo;.</p>
</td></tr>
<tr><td><code id="available_water_content_+3A_weights">weights</code></td>
<td>
<p>optional weights</p>
</td></tr>
<tr><td><code id="available_water_content_+3A_...">...</code></td>
<td>
<p>additional arguments passed to internal functions (none used at the moment).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Function to calculate available water content. The output units depend on the choice of area.
If &lsquo;m&rsquo; is used, then the output units will be &lsquo;mm&rsquo;. If the &lsquo;area&rsquo; is &lsquo;m2&rsquo;,
then the output units will be in &lsquo;m3&rsquo;. If the &lsquo;area&rsquo; is &lsquo;ha&rsquo;, then the output units will be &lsquo;kg/ha&rsquo;.
</p>


<h3>Value</h3>

<p>returns a value with attribute &lsquo;units&rsquo; and &lsquo;depth&rsquo;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
sp &lt;- apsimx_soil_profile()
available_water_content(sp)

## End(Not run)
</code></pre>

<hr>
<h2 id='carbon_stocks'>Calculate soil carbon stocks</h2><span id='topic+carbon_stocks'></span>

<h3>Description</h3>

<p>Calculation of carbon stocks based on an object of class &lsquo;soil_profile&rsquo;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>carbon_stocks(
  x,
  depth,
  area = c("m2", "ha"),
  method = c("linear", "constant"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="carbon_stocks_+3A_x">x</code></td>
<td>
<p>object of class &lsquo;soil_profile&rsquo;</p>
</td></tr>
<tr><td><code id="carbon_stocks_+3A_depth">depth</code></td>
<td>
<p>soil depth (in meters). If missing then the whole soil profile is used.</p>
</td></tr>
<tr><td><code id="carbon_stocks_+3A_area">area</code></td>
<td>
<p>either &lsquo;m2&rsquo; meter squared or &lsquo;ha&rsquo;.</p>
</td></tr>
<tr><td><code id="carbon_stocks_+3A_method">method</code></td>
<td>
<p>interpolation method. Either &lsquo;linear&rsquo; or &lsquo;constant&rsquo;.</p>
</td></tr>
<tr><td><code id="carbon_stocks_+3A_...">...</code></td>
<td>
<p>additional arguments passed to internal functions (none used at the moment).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Function to calculate carbon stocks. The output units depend on the choice of area.
If &lsquo;m2&rsquo; is used, then the output units will be &lsquo;kg/m2&rsquo;. If the &lsquo;area&rsquo;
is &lsquo;ha&rsquo;, then the output units will be &lsquo;Mg/ha&rsquo;.
</p>
<p>Note that the bulk density (which is needed in the calculation) is
available as part of the &lsquo;soil_profile&rsquo; object.
</p>


<h3>Value</h3>

<p>returns a value with attribute &lsquo;units&rsquo; and &lsquo;depth&rsquo;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
sp &lt;- apsimx_soil_profile()
carbon_stocks(sp)
carbon_stocks(sp, depth = 0.1)
carbon_stocks(sp, depth = 0.2)
carbon_stocks(sp, depth = 0.3)
carbon_stocks(sp, depth = 0.4)

## End(Not run)
</code></pre>

<hr>
<h2 id='check_apsim_met'>Check a met file for possible errors</h2><span id='topic+check_apsim_met'></span>

<h3>Description</h3>

<p>Takes in an object of class &lsquo;met&rsquo; and checks for missing/valid/reasonable values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_apsim_met(met)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_apsim_met_+3A_met">met</code></td>
<td>
<p>object of class &lsquo;met&rsquo;</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It will only check for missing values and reasonable (within range) values for:
&lsquo;year&rsquo;: range (1500 to 3000); <br />
&lsquo;day&rsquo;: range (1 to 366); <br /> 
&lsquo;maxt&rsquo;: range (-60 to 60) &ndash; units (C); <br />
&lsquo;mint&rsquo;: range (-60 to 40) &ndash; units (C); <br />
&lsquo;radn&rsquo;: range (0 to 40) &ndash; units (MJ/m2/day);  <br />
&lsquo;rain&rsquo;: range (0 to 100) &ndash; units (mm/day)
</p>


<h3>Value</h3>

<p>does not return anything unless possible errors are found
</p>

<hr>
<h2 id='compare_apsim'>Compare two or more apsim output objects</h2><span id='topic+compare_apsim'></span><span id='topic+print.out_mrg'></span><span id='topic+plot.out_mrg'></span>

<h3>Description</h3>

<p>Function which allows for a simple comparison between APSIM output objects
</p>
<p>print method for &lsquo;out_mrg&rsquo;
</p>
<p>plotting function for compare_apsim, it requires ggplot2
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compare_apsim(..., variable, index = "Date", by, labels, verbose = FALSE)

## S3 method for class 'out_mrg'
print(x, ..., digits = 2)

## S3 method for class 'out_mrg'
plot(
  x,
  ...,
  plot.type = c("vs", "diff", "ts", "density"),
  pairs = c(1, 2),
  cumulative = FALSE,
  variable,
  id,
  by,
  facet = FALSE,
  span = 0.75
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compare_apsim_+3A_...">...</code></td>
<td>
<p>data frames with APSIM output or observed data.</p>
</td></tr>
<tr><td><code id="compare_apsim_+3A_variable">variable</code></td>
<td>
<p>variable to plot</p>
</td></tr>
<tr><td><code id="compare_apsim_+3A_index">index</code></td>
<td>
<p>index for merging objects. Default is &lsquo;Date&rsquo;</p>
</td></tr>
<tr><td><code id="compare_apsim_+3A_by">by</code></td>
<td>
<p>variable in &lsquo;index&rsquo; used for plotting</p>
</td></tr>
<tr><td><code id="compare_apsim_+3A_labels">labels</code></td>
<td>
<p>labels for plotting and identification of objects.</p>
</td></tr>
<tr><td><code id="compare_apsim_+3A_verbose">verbose</code></td>
<td>
<p>whether to print indexes to console (default is FALSE).</p>
</td></tr>
<tr><td><code id="compare_apsim_+3A_x">x</code></td>
<td>
<p>object of class &lsquo;out_mrg&rsquo;</p>
</td></tr>
<tr><td><code id="compare_apsim_+3A_digits">digits</code></td>
<td>
<p>digits to print (default is 2)</p>
</td></tr>
<tr><td><code id="compare_apsim_+3A_plot.type">plot.type</code></td>
<td>
<p>either &lsquo;vs&rsquo;, &lsquo;diff&rsquo;, &lsquo;ts&rsquo; - for time series or &lsquo;density&rsquo;</p>
</td></tr>
<tr><td><code id="compare_apsim_+3A_pairs">pairs</code></td>
<td>
<p>pair of objects to compare, defaults to 1 and 2 but others are possible</p>
</td></tr>
<tr><td><code id="compare_apsim_+3A_cumulative">cumulative</code></td>
<td>
<p>whether to plot cumulative values (default FALSE)</p>
</td></tr>
<tr><td><code id="compare_apsim_+3A_id">id</code></td>
<td>
<p>identification (not implemented yet)</p>
</td></tr>
<tr><td><code id="compare_apsim_+3A_facet">facet</code></td>
<td>
<p>whether to facet or use color for the by variable (default is FALSE, meaning &lsquo;color&rsquo;)</p>
</td></tr>
<tr><td><code id="compare_apsim_+3A_span">span</code></td>
<td>
<p>argument passed to &lsquo;geom_smooth&rsquo;</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Plotting function for observed and simulated data
</p>


<h3>Value</h3>

<p>object of class &lsquo;out_mrg&rsquo;, which can be used for further plotting
</p>
<p>it prints the index.table data.frame
</p>
<p>it produces a plot
</p>


<h3>Note</h3>

<p>&lsquo;Con Corr&rsquo; is the concordance correlation coefficient (https://en.wikipedia.org/wiki/Concordance_correlation_coefficient);
&lsquo;ME&rsquo; is the model efficiency (https://en.wikipedia.org/wiki/Nash
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Directory with files
extd.dir &lt;- system.file("extdata", package = "apsimx")
## Comparing observed and simulated for Wheat
data(obsWheat)
sim.opt &lt;- read.csv(file.path(extd.dir, "wheat-sim-opt.csv"))
sim.opt$Date &lt;- as.Date(sim.opt$Date)

cap &lt;- compare_apsim(obsWheat, sim.opt, labels = c("obs", "sim"))

plot(cap)
plot(cap, plot.type = "diff")
plot(cap, plot.type = "ts")

plot(cap, variable = "AboveGround")
plot(cap, variable = "AboveGround", plot.type = "diff")
plot(cap, variable = "AboveGround", plot.type = "ts")


</code></pre>

<hr>
<h2 id='compare_apsim_met'>Compare two or more metfiles</h2><span id='topic+compare_apsim_met'></span><span id='topic+print.met_mrg'></span><span id='topic+plot.met_mrg'></span>

<h3>Description</h3>

<p>Helper function which allows for a simple comparison among &lsquo;met&rsquo; objects
</p>
<p>print method for &lsquo;met_mrg&rsquo;
</p>
<p>plotting function for compare_apsim_met, it requires ggplot2
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compare_apsim_met(
  ...,
  met.var = c("all", "radn", "maxt", "mint", "rain", "rh", "wind_speed", "vp"),
  labels,
  check = FALSE,
  verbose = FALSE
)

## S3 method for class 'met_mrg'
print(x, ..., digits = 2)

## S3 method for class 'met_mrg'
plot(
  x,
  ...,
  plot.type = c("vs", "diff", "ts", "density"),
  pairs = c(1, 2),
  cumulative = FALSE,
  met.var = c("radn", "maxt", "mint", "rain"),
  id,
  span = 0.75
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compare_apsim_met_+3A_...">...</code></td>
<td>
<p>met file objects. Should be of class &lsquo;met&rsquo;</p>
</td></tr>
<tr><td><code id="compare_apsim_met_+3A_met.var">met.var</code></td>
<td>
<p>meteorological variable to plot</p>
</td></tr>
<tr><td><code id="compare_apsim_met_+3A_labels">labels</code></td>
<td>
<p>labels for plotting and identification of &lsquo;met&rsquo; objects.</p>
</td></tr>
<tr><td><code id="compare_apsim_met_+3A_check">check</code></td>
<td>
<p>whether to check &lsquo;met&rsquo; objects using &lsquo;check_apsim_met&rsquo;.</p>
</td></tr>
<tr><td><code id="compare_apsim_met_+3A_verbose">verbose</code></td>
<td>
<p>whether to print agreement stats to console (default is FALSE).</p>
</td></tr>
<tr><td><code id="compare_apsim_met_+3A_x">x</code></td>
<td>
<p>object of class &lsquo;met_mrg&rsquo;</p>
</td></tr>
<tr><td><code id="compare_apsim_met_+3A_digits">digits</code></td>
<td>
<p>digits to print (default is 2)</p>
</td></tr>
<tr><td><code id="compare_apsim_met_+3A_plot.type">plot.type</code></td>
<td>
<p>either &lsquo;vs&rsquo;, &lsquo;diff&rsquo;, &lsquo;ts&rsquo; - for time series or &lsquo;density&rsquo;</p>
</td></tr>
<tr><td><code id="compare_apsim_met_+3A_pairs">pairs</code></td>
<td>
<p>pair of objects to compare, defaults to 1 and 2 but others are possible</p>
</td></tr>
<tr><td><code id="compare_apsim_met_+3A_cumulative">cumulative</code></td>
<td>
<p>whether to plot cumulative values (default FALSE)</p>
</td></tr>
<tr><td><code id="compare_apsim_met_+3A_id">id</code></td>
<td>
<p>identification (not implemented yet)</p>
</td></tr>
<tr><td><code id="compare_apsim_met_+3A_span">span</code></td>
<td>
<p>argument to be passed to &lsquo;geom_smooth&rsquo;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>object of class &lsquo;met_mrg&rsquo;, which can be used for further plotting
</p>
<p>it prints the index.table data.frame
</p>
<p>it produces a plot
</p>


<h3>Note</h3>

<p>I have only tested this for 2 or 3 objects. The code is set up to be able to 
compare more, but I'm not sure that would be all that useful.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
require(nasapower)
## Specify the location
lonlat &lt;- c(-93, 42)
## dates
dts &lt;- c("2017-01-01","2017-12-31")
## Get pwr
pwr &lt;- get_power_apsim_met(lonlat = lonlat, dates = dts)
## Get data from IEM
iem &lt;- get_iem_apsim_met(lonlat = lonlat, dates = dts)
## Compare them
cmet &lt;- compare_apsim_met(pwr[,1:6], iem, labels = c("pwr","iem"))
## Visualize radiation
plot(cmet, met.var = "radn")
plot(cmet, plot.type = "diff")
plot(cmet, plot.type = "ts")
## Visualize maxt
plot(cmet, met.var = "maxt")
plot(cmet, met.var = "maxt", plot.type = "diff")
plot(cmet, met.var = "maxt", plot.type = "ts")
## Cumulative rain
plot(cmet, met.var = "rain", plot.type = "ts", cumulative = TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='compare_apsim_soil_profile'>Compare two or more soil profiles</h2><span id='topic+compare_apsim_soil_profile'></span><span id='topic+print.soil_profile_mrg'></span><span id='topic+plot.soil_profile_mrg'></span>

<h3>Description</h3>

<p>Helper function which allows for a simple comparison among soil_profile objects
</p>
<p>print method for &lsquo;soil_profile_mrg&rsquo;
</p>
<p>plotting function for compare_apsim_soil_profile, it requires ggplot2
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compare_apsim_soil_profile(
  ...,
  soil.var = c("all", "Thickness", "BD", "AirDry", "LL15", "DUL", "SAT", "KS", "Carbon",
    "SoilCNRatio", "FOM", "FOM.CN", "FBiom", "FInert", "NO3N", "NH4N", "PH"),
  property,
  labels,
  check = FALSE,
  verbose = FALSE
)

## S3 method for class 'soil_profile_mrg'
print(x, ..., digits = 2)

## S3 method for class 'soil_profile_mrg'
plot(
  x,
  ...,
  plot.type = c("depth", "vs", "diff", "density"),
  pairs = c(1, 2),
  soil.var = c("all", "Thickness", "BD", "AirDry", "LL15", "DUL", "SAT", "KS", "Carbon",
    "SoilCNRatio", "FOM", "FOM.CN", "FBiom", "FInert", "NO3N", "NH4N", "PH"),
  span = 0.75
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compare_apsim_soil_profile_+3A_...">...</code></td>
<td>
<p>&lsquo;soil_profile&rsquo; objects. Should be of class &lsquo;soil_profile&rsquo;</p>
</td></tr>
<tr><td><code id="compare_apsim_soil_profile_+3A_soil.var">soil.var</code></td>
<td>
<p>soil variable to plot</p>
</td></tr>
<tr><td><code id="compare_apsim_soil_profile_+3A_property">property</code></td>
<td>
<p>meteorological variable to use in the comparison. Either &lsquo;all&rsquo;,
&lsquo;radn&rsquo;, &lsquo;maxt&rsquo;, &lsquo;mint&rsquo;, &lsquo;rain&rsquo;, &lsquo;rh&rsquo;, 
&lsquo;wind_speed&rsquo; or &lsquo;vp&rsquo;.</p>
</td></tr>
<tr><td><code id="compare_apsim_soil_profile_+3A_labels">labels</code></td>
<td>
<p>labels for plotting and identification of &lsquo;soil_profile&rsquo; objects.</p>
</td></tr>
<tr><td><code id="compare_apsim_soil_profile_+3A_check">check</code></td>
<td>
<p>whether to check &lsquo;soil_profile&rsquo; objects using &lsquo;check_apsimx_soil_profile&rsquo;.</p>
</td></tr>
<tr><td><code id="compare_apsim_soil_profile_+3A_verbose">verbose</code></td>
<td>
<p>whether to print agreement values (default is FALSE).</p>
</td></tr>
<tr><td><code id="compare_apsim_soil_profile_+3A_x">x</code></td>
<td>
<p>object of class &lsquo;soil_profile_mrg&rsquo;</p>
</td></tr>
<tr><td><code id="compare_apsim_soil_profile_+3A_digits">digits</code></td>
<td>
<p>number of digits to print (default is 2)</p>
</td></tr>
<tr><td><code id="compare_apsim_soil_profile_+3A_plot.type">plot.type</code></td>
<td>
<p>either &lsquo;depth&rsquo;, &lsquo;vs&rsquo;, &lsquo;diff&rsquo; or &lsquo;density&rsquo;</p>
</td></tr>
<tr><td><code id="compare_apsim_soil_profile_+3A_pairs">pairs</code></td>
<td>
<p>pair of objects to compare, defaults to 1 and 2 but others are possible</p>
</td></tr>
<tr><td><code id="compare_apsim_soil_profile_+3A_span">span</code></td>
<td>
<p>argument to be passed to &lsquo;geom_smooth&rsquo;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>object of class &lsquo;soil_profile_mrg&rsquo;, which can be used for further plotting
</p>
<p>a table with indexes for the soil profiles
</p>
<p>it produces a plot
</p>


<h3>Note</h3>

<p>I have only tested this for 2 or 3 objects. The code is set up to be able to 
compare more, but I'm not sure that would be all that useful.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
require(soilDB)
require(sp)
require(sf)
require(spData)
# Get two soil profiles
sp1 &lt;- get_ssurgo_soil_profile(lonlat = c(-93, 42))
sp2 &lt;- get_ssurgo_soil_profile(lonlat = c(-92, 41))
# Compare them
cmp &lt;- compare_apsim_soil_profile(sp1[[1]], sp2[[1]], labels = c("sp1", "sp2"))
# Plot the variables
plot(cmp)

## End(Not run)

</code></pre>

<hr>
<h2 id='doy2date'>Converts from doy to date</h2><span id='topic+doy2date'></span><span id='topic+date2doy'></span>

<h3>Description</h3>

<p>Given a day of the year as julian (1-366) it converts to &lsquo;Date&rsquo;
</p>
<p>Given a &lsquo;Date&rsquo; it converts to julian day (1-366) or day of the year
</p>


<h3>Usage</h3>

<pre><code class='language-R'>doy2date(x, year = 2001, inverse = FALSE)

date2doy(x, year = 2001, inverse = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="doy2date_+3A_x">x</code></td>
<td>
<p>either an integer 1-366 or a &lsquo;Date&rsquo;</p>
</td></tr>
<tr><td><code id="doy2date_+3A_year">year</code></td>
<td>
<p>year</p>
</td></tr>
<tr><td><code id="doy2date_+3A_inverse">inverse</code></td>
<td>
<p>if TRUE it goes from doy to &lsquo;Date&rsquo;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class &lsquo;Date&rsquo; or a numeric if inverse equals TRUE.
</p>
<p>an numeric or an object of class &lsquo;Date&rsquo; if inverse equals TRUE.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>doy2date(120)
date2doy("04-30")

</code></pre>

<hr>
<h2 id='edit_apsim'>Edit an APSIM (Classic) Simulation</h2><span id='topic+edit_apsim'></span>

<h3>Description</h3>

<p>This function allows editing of an APSIM (Classic) simulation file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edit_apsim(
  file,
  src.dir = ".",
  wrt.dir = NULL,
  node = c("Clock", "Weather", "Soil", "SurfaceOrganicMatter", "MicroClimate", "Crop",
    "Manager", "Outputfile", "Other"),
  soil.child = c("Metadata", "Water", "Physical", "OrganicMatter", "Chemical",
    "Analysis", "InitialWater", "Sample", "SWIM"),
  manager.child = NULL,
  parm = NULL,
  value = NULL,
  overwrite = FALSE,
  edit.tag = "-edited",
  parm.path = NULL,
  root,
  verbose = TRUE,
  check.length = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="edit_apsim_+3A_file">file</code></td>
<td>
<p>file ending in .apsim to be edited</p>
</td></tr>
<tr><td><code id="edit_apsim_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .apsim file to be edited; defaults to the current working directory</p>
</td></tr>
<tr><td><code id="edit_apsim_+3A_wrt.dir">wrt.dir</code></td>
<td>
<p>should be used if the destination directory is different from the src.dir</p>
</td></tr>
<tr><td><code id="edit_apsim_+3A_node">node</code></td>
<td>
<p>either &lsquo;Clock&rsquo;, &lsquo;Weather&rsquo;, &lsquo;Soil&rsquo;, 
&lsquo;SurfaceOrganicMatter&rsquo;, &lsquo;MicroClimate&rsquo;, &lsquo;Crop&rsquo;, &lsquo;Manager&rsquo;, &lsquo;Outputfile&rsquo; or &lsquo;Other&rsquo;</p>
</td></tr>
<tr><td><code id="edit_apsim_+3A_soil.child">soil.child</code></td>
<td>
<p>specific soil component to be edited</p>
</td></tr>
<tr><td><code id="edit_apsim_+3A_manager.child">manager.child</code></td>
<td>
<p>specific manager component to be edited (not implemented yet)</p>
</td></tr>
<tr><td><code id="edit_apsim_+3A_parm">parm</code></td>
<td>
<p>parameter to be edited</p>
</td></tr>
<tr><td><code id="edit_apsim_+3A_value">value</code></td>
<td>
<p>new values for the parameter to be edited</p>
</td></tr>
<tr><td><code id="edit_apsim_+3A_overwrite">overwrite</code></td>
<td>
<p>logical; if <code>TRUE</code> the old file is overwritten, a new file is written otherwise</p>
</td></tr>
<tr><td><code id="edit_apsim_+3A_edit.tag">edit.tag</code></td>
<td>
<p>if the file is edited a different tag from the default &lsquo;-edited&rsquo; can be used.</p>
</td></tr>
<tr><td><code id="edit_apsim_+3A_parm.path">parm.path</code></td>
<td>
<p>path to the attribute to edit when node is &lsquo;Other&rsquo;</p>
</td></tr>
<tr><td><code id="edit_apsim_+3A_root">root</code></td>
<td>
<p>supply the node postion in the case of multiple simulations such as factorials.</p>
</td></tr>
<tr><td><code id="edit_apsim_+3A_verbose">verbose</code></td>
<td>
<p>whether to print information about successful edit</p>
</td></tr>
<tr><td><code id="edit_apsim_+3A_check.length">check.length</code></td>
<td>
<p>check whether vectors are of the correct length</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The variables specified by <code>parm</code> within the .apsim file specified by <code>file</code> 
in the source directory <code>src.dir</code> are edited. The old values are replaced with <code>value</code>, which
is a list that has the same number of elements as the length of the vector <code>parm</code>.  The current
.apsim file will be overwritten if <code>overwrite</code> is set to <code>TRUE</code>; otherwise the file
&lsquo;file&rsquo; <em>-edited.apsim</em> will be created.  If (verbose = TRUE) then the name
of the written file is returned. 
</p>
<p>When node equals Outputfile, the editing allows to add variables, but not to remove them at the moment.
</p>


<h3>Value</h3>

<p>(when verbose=TRUE) complete file path to edited .apsimx file is returned as a character string.
As a side effect this function creates a new (XML) .apsimx file.
</p>


<h3>Note</h3>

<p>The components that can be edited are restricted becuase this is better in preventing
errors of editing unintended parts of the file. The disadvantage is that there is less flexibility
compared to the similar function in the 'apsimr' package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## This example will read one of the examples distributed with APSIM
## but write to a temporary directory

tmp.dir &lt;- tempdir()

extd.dir &lt;- system.file("extdata", package = "apsimx")
edit_apsim("Millet", src.dir = extd.dir, wrt.dir = tmp.dir, 
           node = "Clock",
           parm = "start_date", value = "01/02/1940")

## Editing all of the KL values for Millet
pp.KL &lt;- inspect_apsim_xml("Millet.apsim", src.dir = extd.dir, 
                  parm = "SoilCrop[8]/KL")
                 
kls &lt;- seq(0.08, 0.2, length.out = 11)

edit_apsim("Millet.apsim", 
           src.dir = extd.dir,
           wrt.dir = tmp.dir,
           node = "Other", 
           parm.path = pp.KL,
           value = kls)
           
## Check that it was properly edited

inspect_apsim("Millet-edited.apsim", 
              src.dir = tmp.dir,
              node = "Soil",
              soil.child = "Water",
              parm = "KL")

              


</code></pre>

<hr>
<h2 id='edit_apsim_replace_soil_profile'>Edit APSIM &lsquo;Classic&rsquo; file with a replaced soil profile</h2><span id='topic+edit_apsim_replace_soil_profile'></span>

<h3>Description</h3>

<p>Edits an APSIM Classic simulation by replacing the soil profile
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edit_apsim_replace_soil_profile(
  file = "",
  src.dir = ".",
  wrt.dir = NULL,
  soil.profile = NULL,
  swim = NULL,
  soilwat = NULL,
  initialwater = NULL,
  edit.tag = "-edited",
  overwrite = FALSE,
  verbose = TRUE,
  root
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="edit_apsim_replace_soil_profile_+3A_file">file</code></td>
<td>
<p>name of the .apsim file to be edited</p>
</td></tr>
<tr><td><code id="edit_apsim_replace_soil_profile_+3A_src.dir">src.dir</code></td>
<td>
<p>source directory</p>
</td></tr>
<tr><td><code id="edit_apsim_replace_soil_profile_+3A_wrt.dir">wrt.dir</code></td>
<td>
<p>writing directory</p>
</td></tr>
<tr><td><code id="edit_apsim_replace_soil_profile_+3A_soil.profile">soil.profile</code></td>
<td>
<p>a soil profile object with class &lsquo;soil_profile&rsquo;</p>
</td></tr>
<tr><td><code id="edit_apsim_replace_soil_profile_+3A_swim">swim</code></td>
<td>
<p>list with SWIM specific parameters</p>
</td></tr>
<tr><td><code id="edit_apsim_replace_soil_profile_+3A_soilwat">soilwat</code></td>
<td>
<p>list with SoilWat specific parameters</p>
</td></tr>
<tr><td><code id="edit_apsim_replace_soil_profile_+3A_initialwater">initialwater</code></td>
<td>
<p>list with InitialWater specific parameters</p>
</td></tr>
<tr><td><code id="edit_apsim_replace_soil_profile_+3A_edit.tag">edit.tag</code></td>
<td>
<p>default edit tag &lsquo;-edited&rsquo;</p>
</td></tr>
<tr><td><code id="edit_apsim_replace_soil_profile_+3A_overwrite">overwrite</code></td>
<td>
<p>default FALSE</p>
</td></tr>
<tr><td><code id="edit_apsim_replace_soil_profile_+3A_verbose">verbose</code></td>
<td>
<p>default TRUE. Will print messages indicating what was done.</p>
</td></tr>
<tr><td><code id="edit_apsim_replace_soil_profile_+3A_root">root</code></td>
<td>
<p>supply the node postion in the case of multiple simulations such as factorials.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is designed to batch replace the whole soil in an APSIM simulation.
</p>


<h3>Value</h3>

<p>writes an APSIM file to disk with the supplied soil profile
</p>


<h3>Note</h3>

<p>There is no such thing as a default soil, carefully build the profile for each simulation.
This function replaces values and it can grow an XML node, but it cannot edit a property
which is not present in the original file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
sp &lt;- apsimx_soil_profile(nlayers = 20,
                          crops = c("Barley", "Chickpea", "Lucerne", 
                          "Maize", "Perennial Grass", "Sorghum", 
                          "Wheat", "Millet"))

extd.dir &lt;- system.file("extdata", package = "apsimx")

## Writing to a temp directory
tmp.dir &lt;- tempdir()
edit_apsim_replace_soil_profile("Millet.apsim", soil.profile = sp, 
                                edit.tag = "-newsoil",
                                src.dir = extd.dir, 
                                wrt.dir = tmp.dir)
                                
inspect_apsim("Millet-newsoil.apsim", src.dir = tmp.dir,
              node = "Soil", soil.child = "Water")
 

</code></pre>

<hr>
<h2 id='edit_apsim_xml'>Edit an APSIM (Classic) Simulation auxiliary xml file</h2><span id='topic+edit_apsim_xml'></span>

<h3>Description</h3>

<p>This function allows editing of an APSIM (Classic) simulation xml file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edit_apsim_xml(
  file,
  src.dir = ".",
  wrt.dir = NULL,
  parm.path = NULL,
  value = NULL,
  overwrite = FALSE,
  edit.tag = "-edited",
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="edit_apsim_xml_+3A_file">file</code></td>
<td>
<p>file ending in .xml to be edited</p>
</td></tr>
<tr><td><code id="edit_apsim_xml_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .xml file to be edited; defaults to the current working directory</p>
</td></tr>
<tr><td><code id="edit_apsim_xml_+3A_wrt.dir">wrt.dir</code></td>
<td>
<p>should be used if the destination directory is different from the src.dir</p>
</td></tr>
<tr><td><code id="edit_apsim_xml_+3A_parm.path">parm.path</code></td>
<td>
<p>parameter path to be edited (see example)</p>
</td></tr>
<tr><td><code id="edit_apsim_xml_+3A_value">value</code></td>
<td>
<p>new values for the parameter to be edited</p>
</td></tr>
<tr><td><code id="edit_apsim_xml_+3A_overwrite">overwrite</code></td>
<td>
<p>logical; if <code>TRUE</code> the old file is overwritten, a new file is written otherwise</p>
</td></tr>
<tr><td><code id="edit_apsim_xml_+3A_edit.tag">edit.tag</code></td>
<td>
<p>if the file is edited a different tag from the default &lsquo;-edited&rsquo; can be used.</p>
</td></tr>
<tr><td><code id="edit_apsim_xml_+3A_verbose">verbose</code></td>
<td>
<p>whether to print information about successful edit</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The variables specified by <code>parm</code> within the .apsim file specified by <code>file</code> 
in the source directory <code>src.dir</code> are edited. The old values are replaced with <code>value</code>, which
is a list that has the same number of elements as the length of the vector <code>parm</code>.  The current
.xml file will be overwritten if <code>overwrite</code> is set to <code>TRUE</code>; otherwise the file
&lsquo;file&rsquo; <em>-edited.xml</em> will be created.  If (verbose = TRUE) then the name
of the written file is returned. The function is similar to the edit_sim_file functin in the &lsquo;apsimr&rsquo;
package, but with the difference that here the xml2 package is used instead.
</p>


<h3>Value</h3>

<p>(when verbose=TRUE) complete file path to edited .xml file is returned as a character string.
As a side effect this function creates a new XML file.
</p>


<h3>Note</h3>

<p>This function cannot check whether replacement is of the correct length. Also, there is
an inspect equivalent. It is more flexible than &lsquo;edit_apsim&rsquo; and (perhaps) similar to 
&lsquo;apsimr::edit_sim_file&rsquo;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## This example changes the RUE values

extd.dir &lt;- system.file("extdata", package = "apsimx")

values &lt;- paste(rep(1.7, 12), collapse = " ")

## Writing to a temp directory, but replace as needed
tmp.dir &lt;- tempdir()

edit_apsim_xml("Maize75.xml", 
               src.dir = extd.dir,
               wrt.dir = tmp.dir,
               parm.path = ".//Model/rue",
               value = values)

</code></pre>

<hr>
<h2 id='edit_apsimx'>Edit an APSIM-X (JSON) Simulation</h2><span id='topic+edit_apsimx'></span>

<h3>Description</h3>

<p>This function allows editing of an APSIM-X (JSON) simulation file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edit_apsimx(
  file,
  src.dir = ".",
  wrt.dir = NULL,
  node = c("Clock", "Weather", "Soil", "SurfaceOrganicMatter", "MicroClimate", "Crop",
    "Manager", "Report", "Operations", "Other"),
  soil.child = c("Metadata", "Water", "SoilWater", "Organic", "Physical", "Analysis",
    "Chemical", "InitialWater", "Sample"),
  manager.child = NULL,
  parm = NULL,
  value = NULL,
  overwrite = FALSE,
  edit.tag = "-edited",
  parm.path = NULL,
  root = NULL,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="edit_apsimx_+3A_file">file</code></td>
<td>
<p>file ending in .apsimx to be edited (JSON)</p>
</td></tr>
<tr><td><code id="edit_apsimx_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .apsimx file to be edited; defaults to the current working directory</p>
</td></tr>
<tr><td><code id="edit_apsimx_+3A_wrt.dir">wrt.dir</code></td>
<td>
<p>should be used if the destination directory is different from the src.dir</p>
</td></tr>
<tr><td><code id="edit_apsimx_+3A_node">node</code></td>
<td>
<p>either &lsquo;Clock&rsquo;, &lsquo;Weather&rsquo;, &lsquo;Soil&rsquo;, 
&lsquo;SurfaceOrganicMatter&rsquo;, &lsquo;MicroClimate&rsquo;, &lsquo;Crop&rsquo;, &lsquo;Manager&rsquo;, &lsquo;Report&rsquo;, &lsquo;Operations&rsquo; or &lsquo;Other&rsquo;</p>
</td></tr>
<tr><td><code id="edit_apsimx_+3A_soil.child">soil.child</code></td>
<td>
<p>specific soil component to be edited</p>
</td></tr>
<tr><td><code id="edit_apsimx_+3A_manager.child">manager.child</code></td>
<td>
<p>specific manager component to be edited</p>
</td></tr>
<tr><td><code id="edit_apsimx_+3A_parm">parm</code></td>
<td>
<p>parameter to be edited. It can be a regular expression.</p>
</td></tr>
<tr><td><code id="edit_apsimx_+3A_value">value</code></td>
<td>
<p>new values for the parameter to be edited</p>
</td></tr>
<tr><td><code id="edit_apsimx_+3A_overwrite">overwrite</code></td>
<td>
<p>logical; if <code>TRUE</code> the old file is overwritten, a new file is written otherwise</p>
</td></tr>
<tr><td><code id="edit_apsimx_+3A_edit.tag">edit.tag</code></td>
<td>
<p>if the file is edited a different tag from the default &lsquo;-edited&rsquo; can be used.</p>
</td></tr>
<tr><td><code id="edit_apsimx_+3A_parm.path">parm.path</code></td>
<td>
<p>path to the attribute to edit when node is &lsquo;Other&rsquo;</p>
</td></tr>
<tr><td><code id="edit_apsimx_+3A_root">root</code></td>
<td>
<p>supply the node postion in the case of multiple simulations such as factorials.</p>
</td></tr>
<tr><td><code id="edit_apsimx_+3A_verbose">verbose</code></td>
<td>
<p>whether to print information about successful edit</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The variables specified by <code>parm</code> within the .apsimx file specified by <code>file</code> 
in the source directory <code>src.dir</code> are edited. The old values are replaced with <code>value</code>, which
is a list that has the same number of elements as the length of the vector <code>parm</code>.  The current
.apsimx file will be overwritten if <code>overwrite</code> is set to <code>TRUE</code>; otherwise the file
&lsquo;file&rsquo; <em>-edited.apsimx</em> will be created.  If (verbose = TRUE) then the name
of the written file is returned. 
</p>
<p>When node equals Report, the editing allows to add variables, but not to remove them at the moment.
</p>
<p>When node equals Operations, &lsquo;parm&rsquo; should have a list with two elements. The first should be the line(s) to edit and 
the second should be the component(s) to edit. Either &lsquo;Date&rsquo;, &lsquo;Action&rsquo; or &lsquo;Line&rsquo;.
When more than one line is edited, &lsquo;value&rsquo; should be a character vector of the same length as the number of
lines to edit.
</p>


<h3>Value</h3>

<p>(when verbose=TRUE) complete file path to edited .apsimx file is returned as a character string.
As a side effect this function creates a new (JSON) .apsimx file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## This example will read one of the examples distributed with APSIM-X
## but write to a temporary directory
tmp.dir &lt;- tempdir()

## Edit Bulk density
extd.dir &lt;- system.file("extdata", package = "apsimx")
bds &lt;- c(1.02, 1.03, 1.09, 1.16, 1.18, 1.19, 1.20)
edit_apsimx("Wheat.apsimx", src.dir = extd.dir,
            wrt.dir = tmp.dir,
            node = "Soil",
            soil.child = "Water", 
            parm = "BD", value = bds,
            verbose = FALSE)
## Inspect file
inspect_apsimx("Wheat-edited.apsimx", src.dir = tmp.dir,
                node = "Soil", soil.child = "Water")
## To delete the file...
file.remove(file.path(tmp.dir, "Wheat-edited.apsimx"))

## Edit the fertilizer amount in 'Maize.apsimx'
edit_apsimx("Maize.apsimx", src.dir = extd.dir,
             wrt.dir = tmp.dir, node = "Manager",
             manager.child = "SowingFertiliser",
             parm = "Amount", value = 200, verbose = TRUE)
             
## Make sure it worked
inspect_apsimx("Maize-edited.apsimx", src.dir = tmp.dir, 
               node = "Manager",
               parm = list("SowingFertiliser", NA))

## Remove the file
file.remove(file.path(tmp.dir, "Maize-edited.apsimx"))


</code></pre>

<hr>
<h2 id='edit_apsimx_batch'>Edit an APSIM-X (JSON) Simulation in Batch mode</h2><span id='topic+edit_apsimx_batch'></span>

<h3>Description</h3>

<p>This function allows editing of an APSIM-X (JSON) simulation file in batch mode.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edit_apsimx_batch(
  file,
  src.dir = ".",
  wrt.dir = NULL,
  parms = NULL,
  silent = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="edit_apsimx_batch_+3A_file">file</code></td>
<td>
<p>file ending in .apsimx to be edited (JSON)</p>
</td></tr>
<tr><td><code id="edit_apsimx_batch_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .apsimx file to be edited; defaults to the current working directory</p>
</td></tr>
<tr><td><code id="edit_apsimx_batch_+3A_wrt.dir">wrt.dir</code></td>
<td>
<p>should be used if the destination directory is different from the src.dir</p>
</td></tr>
<tr><td><code id="edit_apsimx_batch_+3A_parms">parms</code></td>
<td>
<p>parameter to be edited in the for of &lsquo;key = value&rsquo;</p>
</td></tr>
<tr><td><code id="edit_apsimx_batch_+3A_silent">silent</code></td>
<td>
<p>controls the output of running APSIM at the command line</p>
</td></tr>
<tr><td><code id="edit_apsimx_batch_+3A_verbose">verbose</code></td>
<td>
<p>whether to print information about successful edit</p>
</td></tr>
</table>


<h3>Details</h3>

<p>from hol430
</p>
<p>This allows the user to specify an .apsimx file and a config file when running Models.exe. The .apsimx file will not be run but instead, the changes listed in the config file will be applied to the .apsimx file, which will then be written to disk under the same filename.
</p>
<p>The config file should contain lines of the form &lsquo;path = value&rsquo;
</p>
<p>e.g.
</p>
<p>[Clock].StartDate = 2019-1-20
.Simulations.Sim1.Name = SimulationVariant35
.Simulations.Sim2.Enabled = false
.Simulations.Sim1.Paddock.Soil.Thickness[1] = 50
Notes:
</p>
<p>Command line arguments should look like:
Models.exe file.apsimx /Edit /path/to/config/file.conf
</p>
<p>Relative paths will be resolved to the first match. ie
[Clock].StartDate will match the first clock found in the file.
</p>
<p>Dates can be specified as yyyy-mm-dd or mm/dd/yyyy.
</p>
<p>Strings should not be quoted
</p>
<p>Array indices will be interpted as 1-indexed (mad face). So the first
element in the array should have index 1 in the config file.
</p>
<p>The file will be upgraded to the latest file version as part of this
process.
</p>


<h3>Value</h3>

<p>(when verbose=TRUE) complete file path to edited .apsimx file is returned as a character string.
As a side effect this function creates a new (JSON) .apsimx file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## This example will read one of the examples distributed with APSIM-X
## but write to a temporary directory

tmp.dir &lt;- tempdir()

## Edit InitialResidueMass
extd.dir &lt;- system.file("extdata", package = "apsimx")
parms &lt;- list(`.Simulations.Simulation.Field.SurfaceOrganicMatter.InitialResidueMass` = 600)
edit_apsimx_batch("Wheat.apsimx", src.dir = extd.dir, wrt.dir = tmp.dir, parms = parms)


</code></pre>

<hr>
<h2 id='edit_apsimx_replace_soil_profile'>Edit APSIM-X file with a replaced soil profile</h2><span id='topic+edit_apsimx_replace_soil_profile'></span>

<h3>Description</h3>

<p>Edits an APSIM-X simulation by replacing the soil profile
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edit_apsimx_replace_soil_profile(
  file = "",
  src.dir = ".",
  wrt.dir = NULL,
  soil.profile = NULL,
  edit.tag = "-edited",
  overwrite = FALSE,
  verbose = TRUE,
  root = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="edit_apsimx_replace_soil_profile_+3A_file">file</code></td>
<td>
<p>name of the .apsimx file to be edited</p>
</td></tr>
<tr><td><code id="edit_apsimx_replace_soil_profile_+3A_src.dir">src.dir</code></td>
<td>
<p>source directory</p>
</td></tr>
<tr><td><code id="edit_apsimx_replace_soil_profile_+3A_wrt.dir">wrt.dir</code></td>
<td>
<p>writing directory</p>
</td></tr>
<tr><td><code id="edit_apsimx_replace_soil_profile_+3A_soil.profile">soil.profile</code></td>
<td>
<p>a soil profile object with class &lsquo;soil_profile&rsquo;</p>
</td></tr>
<tr><td><code id="edit_apsimx_replace_soil_profile_+3A_edit.tag">edit.tag</code></td>
<td>
<p>default edit tag &lsquo;-edited&rsquo;</p>
</td></tr>
<tr><td><code id="edit_apsimx_replace_soil_profile_+3A_overwrite">overwrite</code></td>
<td>
<p>default FALSE</p>
</td></tr>
<tr><td><code id="edit_apsimx_replace_soil_profile_+3A_verbose">verbose</code></td>
<td>
<p>default TRUE and it will print messages to console</p>
</td></tr>
<tr><td><code id="edit_apsimx_replace_soil_profile_+3A_root">root</code></td>
<td>
<p>supply the node postion in the case of multiple simulations such as factorials.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is designed to batch replace the whole soil in an APSIM simulation file.
</p>


<h3>Value</h3>

<p>writes a file to disk with the supplied soil profile
</p>


<h3>Note</h3>

<p>There is no such thing as a default soil, carefully build the profile for each simulation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
sp &lt;- apsimx_soil_profile()
extd.dir &lt;- system.file("extdata", package = "apsimx")

## I write to a temp directory but replace as needed
tmp.dir &lt;- tempdir()

edit_apsimx_replace_soil_profile("Maize.apsimx", soil.profile = sp, 
                                  src.dir = extd.dir, wrt.dir = tmp.dir)
inspect_apsimx("Maize-edited.apsimx", src.dir = tmp.dir,
                 node = "Soil")
 

</code></pre>

<hr>
<h2 id='edit_apsimx_replacement'>Edit a replacement component in an .apsimx (JSON) file</h2><span id='topic+edit_apsimx_replacement'></span>

<h3>Description</h3>

<p>edit the replacement componenet of an JSON apsimx file. It does not replace the GUI, but it can save time by quickly editing parameters and values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edit_apsimx_replacement(
  file = "",
  src.dir = ".",
  wrt.dir = ".",
  node = NULL,
  node.child = NULL,
  node.subchild = NULL,
  node.subsubchild = NULL,
  node.sub3child = NULL,
  node.sub4child = NULL,
  node.sub5child = NULL,
  node.string = NULL,
  root = list("Models.Core.Replacements", NA),
  parm = NULL,
  value = NULL,
  overwrite = FALSE,
  edit.tag = "-edited",
  verbose = TRUE,
  grep.options
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="edit_apsimx_replacement_+3A_file">file</code></td>
<td>
<p>file ending in .apsimx to edit (JSON)</p>
</td></tr>
<tr><td><code id="edit_apsimx_replacement_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .apsimx file; defaults to the current working directory</p>
</td></tr>
<tr><td><code id="edit_apsimx_replacement_+3A_wrt.dir">wrt.dir</code></td>
<td>
<p>should be used if the destination directory is different from the src.dir</p>
</td></tr>
<tr><td><code id="edit_apsimx_replacement_+3A_node">node</code></td>
<td>
<p>specific node to edit</p>
</td></tr>
<tr><td><code id="edit_apsimx_replacement_+3A_node.child">node.child</code></td>
<td>
<p>specific node child component to edit.</p>
</td></tr>
<tr><td><code id="edit_apsimx_replacement_+3A_node.subchild">node.subchild</code></td>
<td>
<p>specific node sub-child to edit.</p>
</td></tr>
<tr><td><code id="edit_apsimx_replacement_+3A_node.subsubchild">node.subsubchild</code></td>
<td>
<p>specific node sub-subchild to edit.</p>
</td></tr>
<tr><td><code id="edit_apsimx_replacement_+3A_node.sub3child">node.sub3child</code></td>
<td>
<p>specific node sub-sub-subchild to edit.</p>
</td></tr>
<tr><td><code id="edit_apsimx_replacement_+3A_node.sub4child">node.sub4child</code></td>
<td>
<p>specific node sub-sub-sub-subchild to edit.</p>
</td></tr>
<tr><td><code id="edit_apsimx_replacement_+3A_node.sub5child">node.sub5child</code></td>
<td>
<p>specific node sub-sub-sub-sub-subchild to edit.</p>
</td></tr>
<tr><td><code id="edit_apsimx_replacement_+3A_node.string">node.string</code></td>
<td>
<p>passing of a string instead of the node hierarchy. It can either start with a dot or not.
However, the &lsquo;best&rsquo; form is not to start with a dot as it should be a more convenient form of passing
the nodes and their childs and not a real &lsquo;jsonpath&rsquo;.</p>
</td></tr>
<tr><td><code id="edit_apsimx_replacement_+3A_root">root</code></td>
<td>
<p>&lsquo;root&rsquo; node to explore (default = &ldquo;Models.Core.Replacements&rdquo;)</p>
</td></tr>
<tr><td><code id="edit_apsimx_replacement_+3A_parm">parm</code></td>
<td>
<p>specific parameter to edit</p>
</td></tr>
<tr><td><code id="edit_apsimx_replacement_+3A_value">value</code></td>
<td>
<p>new values for the parameter</p>
</td></tr>
<tr><td><code id="edit_apsimx_replacement_+3A_overwrite">overwrite</code></td>
<td>
<p>logical; if <code>TRUE</code> the old file is overwritten, a new file is written otherwise</p>
</td></tr>
<tr><td><code id="edit_apsimx_replacement_+3A_edit.tag">edit.tag</code></td>
<td>
<p>if the file is edited a different tag from the default &lsquo;-edited&rsquo; can be used.</p>
</td></tr>
<tr><td><code id="edit_apsimx_replacement_+3A_verbose">verbose</code></td>
<td>
<p>whether to print information about successful edit</p>
</td></tr>
<tr><td><code id="edit_apsimx_replacement_+3A_grep.options">grep.options</code></td>
<td>
<p>Additional options for grep. To be passed as a list.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is simply a script that prints the relevant parameters which are likely to need editing. It does not print all information from an .apsimx file.
</p>


<h3>Value</h3>

<p>(when verbose=TRUE) complete file path to edited .apsimx file is returned as a character string.
As a side effect this function creates a new (JSON) .apsimx file.
</p>


<h3>Note</h3>

<p>The components that can be edited are restricted becuase this is better in preventing
errors of editing unintended parts of the file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
extd.dir &lt;- system.file("extdata", package = "apsimx")
## Writing to a temp directory, but change as needed
tmp.dir &lt;- tempdir()

## Inspect original values
inspect_apsimx_replacement("MaizeSoybean.apsimx", 
                           src.dir = extd.dir,
                           node = "Maize", 
                           node.child = "Phenology",
                           node.subchild = "ThermalTime", 
                           node.subsubchild = "BaseThermalTime",
                           node.sub3child = "Response")

edit_apsimx_replacement("MaizeSoybean.apsimx", 
                        src.dir = extd.dir, wrt.dir = tmp.dir,
                        node = "Maize", 
                        node.child = "Phenology",
                        node.subchild = "ThermalTime", 
                        node.subsubchild = "BaseThermalTime",
                        node.sub3child = "Response",
                        parm = "X",
                        value = c(10, 20, 30, 40, 50)) 
## inspect it
inspect_apsimx_replacement("MaizeSoybean-edited.apsimx", 
                           src.dir = tmp.dir,
                           node = "Maize", 
                           node.child = "Phenology",
                           node.subchild = "ThermalTime", 
                           node.subsubchild = "BaseThermalTime",
                           node.sub3child = "Response")

## Illustrating using 'node.string'
## Equivalent to the code to edit above

edit_apsimx_replacement("MaizeSoybean-edited.apsimx", 
                        src.dir = tmp.dir, wrt.dir = tmp.dir,
                        node.string = "Maize.Phenology.ThermalTime.BaseThermalTime.Response",
                        parm = "X",
                        value = c(11, 21, 31, 41, 51),
                        edit.tag = "-ns") 
                        
inspect_apsimx_replacement("MaizeSoybean-edited-ns.apsimx", 
                           src.dir = tmp.dir,
                           node = "Maize", 
                           node.child = "Phenology",
                           node.subchild = "ThermalTime", 
                           node.subsubchild = "BaseThermalTime",
                           node.sub3child = "Response")


</code></pre>

<hr>
<h2 id='extract_values_apsimx'>Extract values from a parameter path</h2><span id='topic+extract_values_apsimx'></span>

<h3>Description</h3>

<p>Extract initial values from a parameter path
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_values_apsimx(file, src.dir, parm.path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extract_values_apsimx_+3A_file">file</code></td>
<td>
<p>file name to be run (the extension .apsimx is optional)</p>
</td></tr>
<tr><td><code id="extract_values_apsimx_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .apsimx file to be run (defaults to the current directory)</p>
</td></tr>
<tr><td><code id="extract_values_apsimx_+3A_parm.path">parm.path</code></td>
<td>
<p>parameter path either use inspect_apsimx or see example below</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector with extracted parameter values from an APSIM file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Find examples
extd.dir &lt;- system.file("extdata", package = "apsimx")
## Extract parameter path
pp &lt;- inspect_apsimx("Maize.apsimx", src.dir = extd.dir,
                     node = "Manager", parm = list("Fert", 1))
ppa &lt;- paste0(pp, ".Amount")
## Extract value
extract_values_apsimx("Maize.apsimx", src.dir = extd.dir, parm.path = ppa)

</code></pre>

<hr>
<h2 id='get_apsimx_json'>fetches the json file for a specific model from APSIMX github</h2><span id='topic+get_apsimx_json'></span>

<h3>Description</h3>

<p>Retreives the json replacement file for a specific model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_apsimx_json(model = "Wheat", wrt.dir = ".", cleanup = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_apsimx_json_+3A_model">model</code></td>
<td>
<p>a model (e.g. &lsquo;Wheat&rsquo; or &lsquo;Maize&rsquo;)</p>
</td></tr>
<tr><td><code id="get_apsimx_json_+3A_wrt.dir">wrt.dir</code></td>
<td>
<p>directory to save the JSON file (default is the current directory)</p>
</td></tr>
<tr><td><code id="get_apsimx_json_+3A_cleanup">cleanup</code></td>
<td>
<p>whether to delete the JSON file</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Get APSIM-X Model Replacement from github
</p>


<h3>Value</h3>

<p>a list read through the jsonlite package
</p>


<h3>See Also</h3>

<p><code><a href="#topic+insert_replacement_node">insert_replacement_node</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
tmp.dir &lt;- tempdir()
wheat &lt;- get_apsimx_json(model = "Wheat", wrt.dir = tmp.dir)


</code></pre>

<hr>
<h2 id='get_chirps_apsim_met'>Get CHIRPS data for an APSIM met file</h2><span id='topic+get_chirps_apsim_met'></span>

<h3>Description</h3>

<p>Uses <code><a href="chirps.html#topic+get_chirps">get_chirps</a></code> from the <a href="https://CRAN.R-project.org/package=chirps"><span class="pkg">chirps</span></a> package to download data to create an APSIM met file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_chirps_apsim_met(
  lonlat,
  dates,
  wrt.dir = ".",
  filename = NULL,
  fillin.radn = TRUE,
  silent = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_chirps_apsim_met_+3A_lonlat">lonlat</code></td>
<td>
<p>Longitude and latitude vector</p>
</td></tr>
<tr><td><code id="get_chirps_apsim_met_+3A_dates">dates</code></td>
<td>
<p>date ranges</p>
</td></tr>
<tr><td><code id="get_chirps_apsim_met_+3A_wrt.dir">wrt.dir</code></td>
<td>
<p>write directory</p>
</td></tr>
<tr><td><code id="get_chirps_apsim_met_+3A_filename">filename</code></td>
<td>
<p>file name for writing out to disk</p>
</td></tr>
<tr><td><code id="get_chirps_apsim_met_+3A_fillin.radn">fillin.radn</code></td>
<td>
<p>whether to fill in radiation data using the nasapower pacakge. Default is TRUE.</p>
</td></tr>
<tr><td><code id="get_chirps_apsim_met_+3A_silent">silent</code></td>
<td>
<p>defaut is FALSE. Changing it will not do anything at the moment. A future feature.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function requires the <a href="https://CRAN.R-project.org/package=chirps"><span class="pkg">chirps</span></a> package, version 0.1.4.
</p>
<p>If the filename is not provided it will not write the file to disk,
but it will return an object of class &lsquo;met&rsquo;. This is useful in case manipulation
is required before writing to disk.
</p>


<h3>Value</h3>

<p>returns an object of class &lsquo;met&rsquo; and writes a file to disk when filename is supplied.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
require(chirps)
## This will not write a file to disk
chrp &lt;- get_chirps_apsim_met(lonlat = c(-93,42), dates = c("2012-01-01","2012-12-31"))

## End(Not run)

</code></pre>

<hr>
<h2 id='get_daymet_apsim_met'>Get DAYMET data for an APSIM met file</h2><span id='topic+get_daymet_apsim_met'></span>

<h3>Description</h3>

<p>Uses <code><a href="daymetr.html#topic+download_daymet">download_daymet</a></code> from the <a href="https://CRAN.R-project.org/package=daymetr"><span class="pkg">daymetr</span></a> package to download data to create an APSIM met file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_daymet_apsim_met(lonlat, years, wrt.dir = ".", filename, silent = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_daymet_apsim_met_+3A_lonlat">lonlat</code></td>
<td>
<p>Longitude and latitude vector</p>
</td></tr>
<tr><td><code id="get_daymet_apsim_met_+3A_years">years</code></td>
<td>
<p>a numeric vector of years to extract (c(start, end)). For example, f you need 2012 through 2015, use c(2012, 2015).</p>
</td></tr>
<tr><td><code id="get_daymet_apsim_met_+3A_wrt.dir">wrt.dir</code></td>
<td>
<p>write directory (default is the current directory)</p>
</td></tr>
<tr><td><code id="get_daymet_apsim_met_+3A_filename">filename</code></td>
<td>
<p>file name for writing out to disk</p>
</td></tr>
<tr><td><code id="get_daymet_apsim_met_+3A_silent">silent</code></td>
<td>
<p>argument passed to <code><a href="daymetr.html#topic+download_daymet">download_daymet</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function requires the <a href="https://CRAN.R-project.org/package=daymetr"><span class="pkg">daymetr</span></a> package. This function should replace 
the <code><a href="#topic+get_daymet_apsim_met">get_daymet_apsim_met</a></code> function.
</p>
<p>If the filename is not provided it will not write the file to disk, 
but it will return an object of class &lsquo;met&rsquo;. This is useful in case manipulation
is required before writing to disk. The variable &lsquo;srad&rsquo; as downloaded from
daymet is average solar radiation, so it is converted to total. 
Daily total radiation (MJ/m2/day) can be calculated as 
follows: ((srad (W/m2) * dayl (s/day)) / 1,000,000) <br />
Vapor Pressure Deficit (vp) should be in hecto Pascals
</p>


<h3>Value</h3>

<p>It returns an object of class &lsquo;met&rsquo; and writes a file to disk when filename is supplied.
</p>


<h3>Source</h3>

<p>The data is retrieved using the <a href="https://CRAN.R-project.org/package=daymetr"><span class="pkg">daymetr</span></a> package. For the original
source see: https://daymet.ornl.gov/
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
require(daymetr)
## I write to a temp directory but replace as needed
dmet12 &lt;- get_daymet_apsim_met(lonlat = c(-93,42), years = 2012)
summary(dmet12)
## Check for reasonable ranges 
check_apsim_met(dmet12)

## End(Not run)

</code></pre>

<hr>
<h2 id='get_daymet2_apsim_met'>Get DAYMET data for an APSIM met file</h2><span id='topic+get_daymet2_apsim_met'></span>

<h3>Description</h3>

<p>Uses <code><a href="daymetr.html#topic+download_daymet">download_daymet</a></code> from the <a href="https://CRAN.R-project.org/package=daymetr"><span class="pkg">daymetr</span></a> package to download data to create an APSIM met file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_daymet2_apsim_met(lonlat, years, wrt.dir = ".", filename, silent = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_daymet2_apsim_met_+3A_lonlat">lonlat</code></td>
<td>
<p>Longitude and latitude vector</p>
</td></tr>
<tr><td><code id="get_daymet2_apsim_met_+3A_years">years</code></td>
<td>
<p>a numeric vector of years to extract (c(start, end)). For example, f you need 2012 through 2015, use c(2012, 2015).</p>
</td></tr>
<tr><td><code id="get_daymet2_apsim_met_+3A_wrt.dir">wrt.dir</code></td>
<td>
<p>write directory (default is the current directory)</p>
</td></tr>
<tr><td><code id="get_daymet2_apsim_met_+3A_filename">filename</code></td>
<td>
<p>file name for writing out to disk</p>
</td></tr>
<tr><td><code id="get_daymet2_apsim_met_+3A_silent">silent</code></td>
<td>
<p>argument passed to <code><a href="daymetr.html#topic+download_daymet">download_daymet</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function requires the <a href="https://CRAN.R-project.org/package=daymetr"><span class="pkg">daymetr</span></a> package. This function should replace 
the <code><a href="#topic+get_daymet_apsim_met">get_daymet_apsim_met</a></code> function.
</p>
<p>If the filename is not provided it will not write the file to disk, 
but it will return an object of class &lsquo;met&rsquo;. This is useful in case manipulation
is required before writing to disk. The variable &lsquo;srad&rsquo; as downloaded from
daymet is average solar radiation, so it is converted to total. 
Daily total radiation (MJ/m2/day) can be calculated as 
follows: ((srad (W/m2) * dayl (s/day)) / 1,000,000) <br />
Vapor Pressure Deficit (vp) should be in hecto Pascals
</p>


<h3>Value</h3>

<p>It returns an object of class &lsquo;met&rsquo; and writes a file to disk when filename is supplied.
</p>


<h3>Source</h3>

<p>The data is retrieved using the <a href="https://CRAN.R-project.org/package=daymetr"><span class="pkg">daymetr</span></a> package. For the original
source see: https://daymet.ornl.gov/
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
require(daymetr)
## I write to a temp directory but replace as needed
dmet12 &lt;- get_daymet2_apsim_met(lonlat = c(-93,42), years = 2012)
summary(dmet12)
## Check for reasonable ranges 
check_apsim_met(dmet12)

## End(Not run)

</code></pre>

<hr>
<h2 id='get_gsod_apsim_met'>Get GSOD data for an APSIM met file</h2><span id='topic+get_gsod_apsim_met'></span>

<h3>Description</h3>

<p>Uses <code><a href="GSODR.html#topic+get_GSOD">get_GSOD</a></code> from the <a href="https://CRAN.R-project.org/package=GSODR"><span class="pkg">GSODR</span></a> package to download data to create an APSIM met file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_gsod_apsim_met(
  lonlat,
  dates,
  wrt.dir = ".",
  filename = NULL,
  distance = 100,
  fillin.radn = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_gsod_apsim_met_+3A_lonlat">lonlat</code></td>
<td>
<p>Longitude and latitude vector</p>
</td></tr>
<tr><td><code id="get_gsod_apsim_met_+3A_dates">dates</code></td>
<td>
<p>date ranges</p>
</td></tr>
<tr><td><code id="get_gsod_apsim_met_+3A_wrt.dir">wrt.dir</code></td>
<td>
<p>write directory</p>
</td></tr>
<tr><td><code id="get_gsod_apsim_met_+3A_filename">filename</code></td>
<td>
<p>file name for writing out to disk</p>
</td></tr>
<tr><td><code id="get_gsod_apsim_met_+3A_distance">distance</code></td>
<td>
<p>distance in kilometers for the nearest station</p>
</td></tr>
<tr><td><code id="get_gsod_apsim_met_+3A_fillin.radn">fillin.radn</code></td>
<td>
<p>whether to fill in radiation data using the nasapower pacakge. Default is FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function requires the <a href="https://CRAN.R-project.org/package=GSODR"><span class="pkg">GSODR</span></a> package.
</p>
<p>If the filename is not provided it will not write the file to disk, 
but it will return an object of class &lsquo;met&rsquo;. This is useful in case manipulation
is required before writing to disk.
</p>


<h3>Value</h3>

<p>returns an object of class &lsquo;met&rsquo; and writes a file to disk when filename is supplied.
</p>


<h3>Note</h3>

<p>This source of data does not provide solar radiation. If &lsquo;fillin.radn&rsquo; is
TRUE it fill in radiation data using the nasapower package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
require(GSODR)
## This will not write a file to disk
gsd &lt;- get_gsod_apsim_met(lonlat = c(-93,42), dates = c("2012-01-01","2012-12-31"),
                          fillin.radn = TRUE)
summary(gsd)
## Check for reasonable ranges
check_apsim_met(gsd)

## End(Not run)

</code></pre>

<hr>
<h2 id='get_iem_apsim_met'>Get weather data from Iowa Environmental Ag Weather Stations</h2><span id='topic+get_iem_apsim_met'></span>

<h3>Description</h3>

<p>Retrieves weather data from Iowa Environmental Mesonet (AgWeather) into an APSIM met file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_iem_apsim_met(lonlat, dates, wrt.dir = ".", state, station, filename)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_iem_apsim_met_+3A_lonlat">lonlat</code></td>
<td>
<p>Longitude and latitude vector (optional)</p>
</td></tr>
<tr><td><code id="get_iem_apsim_met_+3A_dates">dates</code></td>
<td>
<p>date ranges</p>
</td></tr>
<tr><td><code id="get_iem_apsim_met_+3A_wrt.dir">wrt.dir</code></td>
<td>
<p>write directory</p>
</td></tr>
<tr><td><code id="get_iem_apsim_met_+3A_state">state</code></td>
<td>
<p>state which you choose climate data from</p>
</td></tr>
<tr><td><code id="get_iem_apsim_met_+3A_station">station</code></td>
<td>
<p>station which you choose cliamte data from</p>
</td></tr>
<tr><td><code id="get_iem_apsim_met_+3A_filename">filename</code></td>
<td>
<p>file name for writing out to disk</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The original data can be obtained from: https://mesonet.agron.iastate.edu/request/coop/fe.phtml
</p>
<p>If the filename is not provided it will not write the file to disk, 
but it will return an object of class &lsquo;met&rsquo;. This is useful in case manipulation
is required before writing to disk. For this function either provide the longitude 
and latitude or the state and station, but not both. In fact, &lsquo;state&rsquo; and
&lsquo;station&rsquo; will be ignored if &lsquo;lonlat&rsquo; is supplied.
</p>


<h3>Value</h3>

<p>returns an object of class &lsquo;met&rsquo; and writes a file to disk when filename is supplied.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## This will not write a file to disk
iem.met &lt;- get_iem_apsim_met(state = "IA", 
                             station = "IA0200", 
                             dates = c("2012-01-01","2012-12-31"))

summary(iem.met)

## Alternatively, coordinates can be used
## This should be equivalent to the previous request
iem.met2 &lt;- get_iem_apsim_met(lonlat = c(-93.77, 42.02), 
                              dates = c("2012-01-01","2012-12-31"))

summary(iem.met2)

## End(Not run)

</code></pre>

<hr>
<h2 id='get_iemre_apsim_met'>Get weather data from Iowa Environmental Mesonet Reanalysis</h2><span id='topic+get_iemre_apsim_met'></span>

<h3>Description</h3>

<p>Retrieves weather data from Iowa Environmental Mesonet Reanalysis into an APSIM met file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_iemre_apsim_met(
  lonlat,
  dates,
  wrt.dir = ".",
  filename = NULL,
  fillin.radn = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_iemre_apsim_met_+3A_lonlat">lonlat</code></td>
<td>
<p>Longitude and latitude vector</p>
</td></tr>
<tr><td><code id="get_iemre_apsim_met_+3A_dates">dates</code></td>
<td>
<p>date ranges</p>
</td></tr>
<tr><td><code id="get_iemre_apsim_met_+3A_wrt.dir">wrt.dir</code></td>
<td>
<p>write directory</p>
</td></tr>
<tr><td><code id="get_iemre_apsim_met_+3A_filename">filename</code></td>
<td>
<p>file name for writing out to disk</p>
</td></tr>
<tr><td><code id="get_iemre_apsim_met_+3A_fillin.radn">fillin.radn</code></td>
<td>
<p>whether to fill in radiation data using the nasapower pacakge. Default is FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The original data can be obtained from: https://mesonet.agron.iastate.edu/iemre/
</p>
<p>If the filename is not provided it will not write the file to disk, 
but it will return an object of class &lsquo;met&rsquo;. This is useful in case manipulation
is required before writing to disk.
</p>


<h3>Value</h3>

<p>returns an object of class &lsquo;met&rsquo; and writes a file to disk when filename is supplied.
</p>


<h3>Note</h3>

<p>Multi-year query is not supported for this product.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## This will not write a file to disk
iemre &lt;- get_iemre_apsim_met(lonlat = c(-93,42), dates = c("2012-01-01","2012-12-31"))
## Note that solar radiation is not available, but can be filled in
## using the nasapower package
iemre2 &lt;- get_iemre_apsim_met(lonlat = c(-93,42), 
                             dates = c("2012-01-01","2012-12-31"), 
                             fillin.radn = TRUE)
summary(iemre)
summary(iemre2)

## Still it is important to check this object
check_apsim_met(iemre2)

## End(Not run)

</code></pre>

<hr>
<h2 id='get_isric_soil_profile'>Generate a synthetic APSIM soil profile from the ISRIC soil database</h2><span id='topic+get_isric_soil_profile'></span>

<h3>Description</h3>

<p>Retrieves soil data from the ISRIC global database and converts it to an APSIM soil_profile object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_isric_soil_profile(
  lonlat,
  statistic = c("mean", "Q0.5"),
  soil.profile,
  find.location.name = TRUE,
  fix = FALSE,
  verbose = TRUE,
  xargs = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_isric_soil_profile_+3A_lonlat">lonlat</code></td>
<td>
<p>Longitude and latitude vector (e.g. c(-93, 42)).</p>
</td></tr>
<tr><td><code id="get_isric_soil_profile_+3A_statistic">statistic</code></td>
<td>
<p>default is the mean</p>
</td></tr>
<tr><td><code id="get_isric_soil_profile_+3A_soil.profile">soil.profile</code></td>
<td>
<p>a soil profile to fill in in case the default one is not appropriate</p>
</td></tr>
<tr><td><code id="get_isric_soil_profile_+3A_find.location.name">find.location.name</code></td>
<td>
<p>default is TRUE. Use either maps package or photon API to find Country/State.
If you are running this function many times it might be better to set this to FALSE.</p>
</td></tr>
<tr><td><code id="get_isric_soil_profile_+3A_fix">fix</code></td>
<td>
<p>whether to fix compatibility between saturation and bulk density (default is FALSE).</p>
</td></tr>
<tr><td><code id="get_isric_soil_profile_+3A_verbose">verbose</code></td>
<td>
<p>argument passed to the fix function.</p>
</td></tr>
<tr><td><code id="get_isric_soil_profile_+3A_xargs">xargs</code></td>
<td>
<p>additional arguments passed to <code><a href="#topic+apsimx_soil_profile">apsimx_soil_profile</a></code> function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Source: https://www.isric.org/ <br />
Details: https://www.isric.org/explore/soilgrids/faq-soilgrids <br />
</p>
<p>Pedotransfer functions: Saxton and Rawls, 2006. Soil Water Characteristic Estimates by Texture and Organic Matter for Hydrologic Solutions.
Soil Sci. Soc. Am. J. 70:15691578. <br />
</p>
<p>TODO: need to look into how this is done in APSIM NG
https://github.com/APSIMInitiative/ApsimX/pull/3994/files <br />
</p>
<p>NOTE: Eric Zurcher provided help by sending me an R file originally written by
Andrew Moore. It provides a bit of context for how some of the decisions
were made for constructing the synthetic soil profiles in APSIM. (email from june 3 2021).
</p>
<p>Variable which are directly retrieved and a simple unit conversion is performed: <br />
* Bulk density - bdod <br />
* Carbon - soc <br />
* Clay - clay <br />
* Sand - sand <br />
* PH - phh2o <br />
* Nitrogen - nitrogen <br />
Variables which are estimated using pedotransfer functions: <br />
LL15, DUL, SAT, KS, AirDry <br />
TO-DO: <br />
What do I do with nitrogen? <br />
Can I use CEC? <br />
How can I have a guess at FBiom and Finert? <br />
FBiom does not depend on any soil property at the moment, should it? <br />
</p>


<h3>Value</h3>

<p>it generates an object of class &lsquo;soil_profile&rsquo;.
</p>


<h3>Author(s)</h3>

<p>Fernando E. Miguez, Eric Zurcher (CSIRO) and Andrew Moore (CSIRO)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+apsimx_soil_profile">apsimx_soil_profile</a></code>, <code><a href="#topic+edit_apsim_replace_soil_profile">edit_apsim_replace_soil_profile</a></code>, <code><a href="#topic+edit_apsimx_replace_soil_profile">edit_apsimx_replace_soil_profile</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## Get soil profile properties for a single point
sp1 &lt;- get_isric_soil_profile(lonlat = c(-93, 42), fix = TRUE, verbose = FALSE)

## Visualize
plot(sp1)
plot(sp1, property = "water")



## End(Not run)
</code></pre>

<hr>
<h2 id='get_power_apsim_met'>Get NASA-POWER data for an APSIM met file</h2><span id='topic+get_power_apsim_met'></span>

<h3>Description</h3>

<p>Uses <code><a href="nasapower.html#topic+get_power">get_power</a></code> from the <a href="https://CRAN.R-project.org/package=nasapower"><span class="pkg">nasapower</span></a> package to download data to create an APSIM met file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_power_apsim_met(lonlat, dates, wrt.dir = ".", filename = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_power_apsim_met_+3A_lonlat">lonlat</code></td>
<td>
<p>Longitude and latitude vector</p>
</td></tr>
<tr><td><code id="get_power_apsim_met_+3A_dates">dates</code></td>
<td>
<p>date ranges</p>
</td></tr>
<tr><td><code id="get_power_apsim_met_+3A_wrt.dir">wrt.dir</code></td>
<td>
<p>write directory</p>
</td></tr>
<tr><td><code id="get_power_apsim_met_+3A_filename">filename</code></td>
<td>
<p>file name for writing out to disk</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function requires the <a href="https://CRAN.R-project.org/package=nasapower"><span class="pkg">nasapower</span></a> package version 4.0.0.
</p>
<p>It looks like the earliest year you can request data for is 1984.
</p>
<p>If the filename is not provided it will not write the file to disk, 
but it will return an object of class &lsquo;met&rsquo;. This is useful in case manipulation
is required before writing to disk.
</p>


<h3>Value</h3>

<p>returns an object of class &lsquo;met&rsquo; and writes a file to disk when filename is supplied.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
require(nasapower)
## This will not write a file to disk
pwr &lt;- get_power_apsim_met(lonlat = c(-93,42), dates = c("2012-01-01","2012-12-31"))
## Let's insert a missing value
pwr[100, "radn"] &lt;- NA
summary(pwr)
## Check the met file 
check_apsim_met(pwr)
## Impute using linear interpolation
pwr.imptd &lt;- impute_apsim_met(pwr, verbose = TRUE)
summary(pwr.imptd)
check_apsim_met(pwr.imptd)

## End(Not run)

</code></pre>

<hr>
<h2 id='get_ssurgo_soil_profile'>Retrieve soil profile data and convert it to an object of class &lsquo;soil_profile&rsquo;</h2><span id='topic+get_ssurgo_soil_profile'></span>

<h3>Description</h3>

<p>Generate a synthetic soil profile based on the information in SSURGO database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_ssurgo_soil_profile(
  lonlat,
  shift = -1,
  nmapunit = 1,
  nsoil = 1,
  xout = NULL,
  soil.bottom = 200,
  method = c("constant", "linear"),
  nlayers = 10,
  check = TRUE,
  fix = FALSE,
  verbose = FALSE,
  xargs = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_ssurgo_soil_profile_+3A_lonlat">lonlat</code></td>
<td>
<p>Longitude and latitude vector (e.g. c(-93, 42))</p>
</td></tr>
<tr><td><code id="get_ssurgo_soil_profile_+3A_shift">shift</code></td>
<td>
<p>simple mechanism for creating an area of interest by displacing the point indicated in 
lonlat by some amount of distance (e.g. 300 - in meters)</p>
</td></tr>
<tr><td><code id="get_ssurgo_soil_profile_+3A_nmapunit">nmapunit</code></td>
<td>
<p>number of mapunits to select (see <code><a href="#topic+ssurgo2sp">ssurgo2sp</a></code>)</p>
</td></tr>
<tr><td><code id="get_ssurgo_soil_profile_+3A_nsoil">nsoil</code></td>
<td>
<p>number of soils to select (see <code><a href="#topic+ssurgo2sp">ssurgo2sp</a></code>). If the 
number of soils is negative or NA it will fetch all the soils in the mapunit</p>
</td></tr>
<tr><td><code id="get_ssurgo_soil_profile_+3A_xout">xout</code></td>
<td>
<p>see <code><a href="#topic+ssurgo2sp">ssurgo2sp</a></code></p>
</td></tr>
<tr><td><code id="get_ssurgo_soil_profile_+3A_soil.bottom">soil.bottom</code></td>
<td>
<p>see <code><a href="#topic+ssurgo2sp">ssurgo2sp</a></code></p>
</td></tr>
<tr><td><code id="get_ssurgo_soil_profile_+3A_method">method</code></td>
<td>
<p>interpolation method see <code><a href="#topic+ssurgo2sp">ssurgo2sp</a></code></p>
</td></tr>
<tr><td><code id="get_ssurgo_soil_profile_+3A_nlayers">nlayers</code></td>
<td>
<p>number for layer for the new soil profile</p>
</td></tr>
<tr><td><code id="get_ssurgo_soil_profile_+3A_check">check</code></td>
<td>
<p>whether to check for reasonable values using <code><a href="#topic+check_apsimx_soil_profile">check_apsimx_soil_profile</a></code>.
TRUE by default. If &lsquo;fix&rsquo; is TRUE, it will be applied only after the fix attempt.</p>
</td></tr>
<tr><td><code id="get_ssurgo_soil_profile_+3A_fix">fix</code></td>
<td>
<p>whether to fix compatibility between saturation and bulk density (default is FALSE).</p>
</td></tr>
<tr><td><code id="get_ssurgo_soil_profile_+3A_verbose">verbose</code></td>
<td>
<p>default FALSE. Whether to print messages.</p>
</td></tr>
<tr><td><code id="get_ssurgo_soil_profile_+3A_xargs">xargs</code></td>
<td>
<p>additional arguments passed to <code><a href="#topic+apsimx_soil_profile">apsimx_soil_profile</a></code> function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Data source is USDA-NRCS Soil Data Access. See package soilDB for more details
</p>


<h3>Value</h3>

<p>this function will always return a list. Each element of the list will
be an object of class &lsquo;soil_profile&rsquo;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
require(soilDB)
require(sp)
require(sf)
require(spData)
## Soil inforation for a single point
sp &lt;- get_ssurgo_soil_profile(lonlat = c(-93, 42))
## The initial attempt throws warnings, so better to use 'fix'
sp &lt;- get_ssurgo_soil_profile(lonlat = c(-93, 42), fix = TRUE)
plot(sp[[1]])
plot(sp[[1]], property = "water")

## End(Not run)


</code></pre>

<hr>
<h2 id='get_ssurgo_tables'>Retrieve soil profile data and return a (list) with data frames (tables)</h2><span id='topic+get_ssurgo_tables'></span>

<h3>Description</h3>

<p>This function does partially what get_ssurgo_soil_profile does, but it 
returns a list with tables for mapunit, component, chorizon and mapunit.shp (object of class sf)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_ssurgo_tables(lonlat, shift = -1, aoi, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_ssurgo_tables_+3A_lonlat">lonlat</code></td>
<td>
<p>Longitude and latitude vector (e.g. c(-93, 42))</p>
</td></tr>
<tr><td><code id="get_ssurgo_tables_+3A_shift">shift</code></td>
<td>
<p>simple mechanism for creating an area of interest by displacing the point indicated in 
lonlat by some amount of distance (e.g. 300 - in meters)</p>
</td></tr>
<tr><td><code id="get_ssurgo_tables_+3A_aoi">aoi</code></td>
<td>
<p>area of interest, if supplied the lonlat and shift arguments will be ignored. Should be
of class &lsquo;sp::SpatialPolygons&rsquo; or &lsquo;sf&rsquo;.</p>
</td></tr>
<tr><td><code id="get_ssurgo_tables_+3A_verbose">verbose</code></td>
<td>
<p>whether to print messages and warnings to the console default FALSE</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Data source is USDA-NRCS Soil Data Access. See package soilDB for more details
</p>
<p>* If a point is requested then an object of class &lsquo;sf&rsquo; is returned (for mapunit.shp) 
with the MUKEY and AREASYMBOL with GEOMETRY type: POINT. 
</p>
<p>* If a the request is for a spatial polygon, then an object of class &lsquo;sf&rsquo; is returned
with gid, mukey and area_ac with GEOMETRY type: POLYGON.
</p>


<h3>Value</h3>

<p>a list with elements: mapunit, component, chorizon and mapunit.shp
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
require(soilDB)
require(sp)
require(sf)
require(spData)
## retrieve data from lon -93, lat = 42
stbls &lt;- get_ssurgo_tables(lonlat = c(-93, 42)) 

stbls2 &lt;- get_ssurgo_tables(lonlat = c(-93, 42), shift = 200)


## End(Not run)
</code></pre>

<hr>
<h2 id='get_worldmodeler_soil_profile'>Generate a synthetic APSIM soil profile from the World Modeler database</h2><span id='topic+get_worldmodeler_soil_profile'></span>

<h3>Description</h3>

<p>Retrieves soil data from the World Modeler global database and converts it to an apsimx soil_profile object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_worldmodeler_soil_profile(
  lonlat,
  fix = FALSE,
  check = FALSE,
  soil.name,
  verbose = FALSE,
  cleanup = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_worldmodeler_soil_profile_+3A_lonlat">lonlat</code></td>
<td>
<p>Longitude and latitude vector (e.g. c(-93, 42)) or matrix.</p>
</td></tr>
<tr><td><code id="get_worldmodeler_soil_profile_+3A_fix">fix</code></td>
<td>
<p>whether to attempt to fix issues with the profile</p>
</td></tr>
<tr><td><code id="get_worldmodeler_soil_profile_+3A_check">check</code></td>
<td>
<p>whether to check the soil profile</p>
</td></tr>
<tr><td><code id="get_worldmodeler_soil_profile_+3A_soil.name">soil.name</code></td>
<td>
<p>optional soil name</p>
</td></tr>
<tr><td><code id="get_worldmodeler_soil_profile_+3A_verbose">verbose</code></td>
<td>
<p>default is FALSE</p>
</td></tr>
<tr><td><code id="get_worldmodeler_soil_profile_+3A_cleanup">cleanup</code></td>
<td>
<p>whether to delete temporary files</p>
</td></tr>
</table>


<h3>Value</h3>

<p>it generates an object of class &lsquo;soil_profile&rsquo;.
</p>


<h3>Author(s)</h3>

<p>Brian Collins (University of Southern Queensland) and Fernando Miguez
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## Get soil profile properties for a single point
## This causes a fatal error at the moment
## This is why I don't run it
if(FALSE){
  sp1 &lt;- get_worldmodeler_soil_profile(lonlat = c(-93, 42), fix = TRUE, verbose = FALSE)

  ## Visualize
  plot(sp1)
  plot(sp1, property = "water")
}

## End(Not run)
</code></pre>

<hr>
<h2 id='grep_json_list'>grep but for json list</h2><span id='topic+grep_json_list'></span>

<h3>Description</h3>

<p>recursive grep adapted for a json list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grep_json_list(pattern, x, ignore.case = FALSE, search.depth = 10)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="grep_json_list_+3A_pattern">pattern</code></td>
<td>
<p>as in grep</p>
</td></tr>
<tr><td><code id="grep_json_list_+3A_x">x</code></td>
<td>
<p>object (a list)</p>
</td></tr>
<tr><td><code id="grep_json_list_+3A_ignore.case">ignore.case</code></td>
<td>
<p>as in grep</p>
</td></tr>
<tr><td><code id="grep_json_list_+3A_search.depth">search.depth</code></td>
<td>
<p>search depth for the list (to prevent endless search)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>It returns a list with the found object, the json path and the positions in the list.
</p>

<hr>
<h2 id='impute_apsim_met'>Perform imputation for missing data in a met file</h2><span id='topic+impute_apsim_met'></span>

<h3>Description</h3>

<p>Takes in an object of class &lsquo;met&rsquo; and imputes values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>impute_apsim_met(
  met,
  method = c("approx", "spline", "mean"),
  verbose = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="impute_apsim_met_+3A_met">met</code></td>
<td>
<p>object of class &lsquo;met&rsquo;</p>
</td></tr>
<tr><td><code id="impute_apsim_met_+3A_method">method</code></td>
<td>
<p>method for imputation, &lsquo;approx&rsquo; (<code><a href="stats.html#topic+approxfun">approxfun</a></code>),
&lsquo;spline&rsquo; (<code><a href="stats.html#topic+splinefun">splinefun</a></code>) or &lsquo;mean&rsquo; (<code><a href="base.html#topic+mean">mean</a></code>).</p>
</td></tr>
<tr><td><code id="impute_apsim_met_+3A_verbose">verbose</code></td>
<td>
<p>whether to print missing data to the console, default = FALSE</p>
</td></tr>
<tr><td><code id="impute_apsim_met_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed to imputation method</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class &lsquo;met&rsquo; with attributes
</p>

<hr>
<h2 id='initialwater_parms'>Helper function to supply additional Initial Soil Water parameters</h2><span id='topic+initialwater_parms'></span>

<h3>Description</h3>

<p>Creates a list with specific components for the Initial Soil Water module
</p>


<h3>Usage</h3>

<pre><code class='language-R'>initialwater_parms(
  Depth = NA,
  Thickness = NA,
  InitialValues = NA,
  InitialPAWmm = NA,
  PercentFull = NA,
  RelativeTo = NA,
  FilledFromTop = NA,
  DepthWetSoil = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="initialwater_parms_+3A_depth">Depth</code></td>
<td>
<p>depth for soil layers (see APSIM documentation)</p>
</td></tr>
<tr><td><code id="initialwater_parms_+3A_thickness">Thickness</code></td>
<td>
<p>soil thickness for layers (either enter Depth or Thickness, but not both)</p>
</td></tr>
<tr><td><code id="initialwater_parms_+3A_initialvalues">InitialValues</code></td>
<td>
<p>initial values of soil water</p>
</td></tr>
<tr><td><code id="initialwater_parms_+3A_initialpawmm">InitialPAWmm</code></td>
<td>
<p>Initial Plant Available Water in mm</p>
</td></tr>
<tr><td><code id="initialwater_parms_+3A_percentfull">PercentFull</code></td>
<td>
<p>Percent full (0 - 100)</p>
</td></tr>
<tr><td><code id="initialwater_parms_+3A_relativeto">RelativeTo</code></td>
<td>
<p>usually LL15</p>
</td></tr>
<tr><td><code id="initialwater_parms_+3A_filledfromtop">FilledFromTop</code></td>
<td>
<p>either true or false</p>
</td></tr>
<tr><td><code id="initialwater_parms_+3A_depthwetsoil">DepthWetSoil</code></td>
<td>
<p>depth of wet soil in mm</p>
</td></tr>
</table>

<hr>
<h2 id='insert_replacement_node'>Inserts a replacement node in a simple apsimx simulation file</h2><span id='topic+insert_replacement_node'></span>

<h3>Description</h3>

<p>Inserts a replacement node in a simple apsimx simulation file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>insert_replacement_node(
  file,
  src.dir,
  wrt.dir,
  rep.node,
  rep.node.position = 1,
  new.core.position = rep.node.position + 1,
  edit.tag = "-edited",
  overwrite = FALSE,
  verbose = TRUE,
  root
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="insert_replacement_node_+3A_file">file</code></td>
<td>
<p>file ending in .apsimx to be edited (JSON)</p>
</td></tr>
<tr><td><code id="insert_replacement_node_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .apsimx file to be edited; defaults to the current working directory</p>
</td></tr>
<tr><td><code id="insert_replacement_node_+3A_wrt.dir">wrt.dir</code></td>
<td>
<p>should be used if the destination directory is different from the src.dir</p>
</td></tr>
<tr><td><code id="insert_replacement_node_+3A_rep.node">rep.node</code></td>
<td>
<p>replacement node as obtained by the <code><a href="#topic+get_apsimx_json">get_apsimx_json</a></code> function</p>
</td></tr>
<tr><td><code id="insert_replacement_node_+3A_rep.node.position">rep.node.position</code></td>
<td>
<p>position where the replacement node will be inserted, default is 1</p>
</td></tr>
<tr><td><code id="insert_replacement_node_+3A_new.core.position">new.core.position</code></td>
<td>
<p>this by default will place the core simulation below the replacement node position. 
With this option, this can be modified.</p>
</td></tr>
<tr><td><code id="insert_replacement_node_+3A_edit.tag">edit.tag</code></td>
<td>
<p>if the file is edited a different tag from the default &lsquo;-edited&rsquo; can be used.</p>
</td></tr>
<tr><td><code id="insert_replacement_node_+3A_overwrite">overwrite</code></td>
<td>
<p>logical; if <code>TRUE</code> the old file is overwritten, a new file is written otherwise</p>
</td></tr>
<tr><td><code id="insert_replacement_node_+3A_verbose">verbose</code></td>
<td>
<p>whether to print information about successful edit</p>
</td></tr>
<tr><td><code id="insert_replacement_node_+3A_root">root</code></td>
<td>
<p>supply the node postion in the case of multiple simulations such as factorials.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>it does not return an R object but it writes an apsimx file to disk
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
tmp.dir &lt;- tempdir()
wheat &lt;- get_apsimx_json(model = "Wheat", wrt.dir = tmp.dir)
extd.dir &lt;- system.file("extdata", package = "apsimx")
insert_replacement_node("Wheat.apsimx", 
                        src.dir = extd.dir, wrt.dir = tmp.dir,
                        rep.node = wheat)

## End(Not run)

</code></pre>

<hr>
<h2 id='inspect_apsim'>Inspect an .apsim (XML) file</h2><span id='topic+inspect_apsim'></span>

<h3>Description</h3>

<p>inspect an XML apsim file. It does not replace the GUI, but it can save time by quickly checking parameters and values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inspect_apsim(
  file = "",
  src.dir = ".",
  node = c("Clock", "Weather", "Soil", "SurfaceOrganicMatter", "Crop", "Manager",
    "Outputfile", "Other"),
  soil.child = c("Metadata", "Water", "OrganicMatter", "Nitrogen", "Analysis",
    "InitialWater", "Sample", "SWIM"),
  parm = NULL,
  digits = 3,
  print.path = FALSE,
  root
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="inspect_apsim_+3A_file">file</code></td>
<td>
<p>file ending in .apsim (Classic) to be inspected (XML)</p>
</td></tr>
<tr><td><code id="inspect_apsim_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .apsim file to be inspected; defaults to the current working directory</p>
</td></tr>
<tr><td><code id="inspect_apsim_+3A_node">node</code></td>
<td>
<p>either &lsquo;Weather&rsquo;, &lsquo;Soil&rsquo;, &lsquo;SurfaceOrganicMatter&rsquo;, 
&lsquo;MicroClimate&rsquo;, &lsquo;Crop&rsquo;, &lsquo;Manager&rsquo;, &lsquo;Outputfile&rsquo; or &lsquo;Other&rsquo;</p>
</td></tr>
<tr><td><code id="inspect_apsim_+3A_soil.child">soil.child</code></td>
<td>
<p>specific soil component to be inspected</p>
</td></tr>
<tr><td><code id="inspect_apsim_+3A_parm">parm</code></td>
<td>
<p>parameter to inspect when node = &lsquo;Crop&rsquo;, &lsquo;Manager&rsquo;, &lsquo;Outputfile&rsquo; or &lsquo;Other&rsquo;</p>
</td></tr>
<tr><td><code id="inspect_apsim_+3A_digits">digits</code></td>
<td>
<p>number of decimals to print (default 3)</p>
</td></tr>
<tr><td><code id="inspect_apsim_+3A_print.path">print.path</code></td>
<td>
<p>whether to print the parameter path (default = FALSE)</p>
</td></tr>
<tr><td><code id="inspect_apsim_+3A_root">root</code></td>
<td>
<p>root node label. In simulation structures such as factorials there will be multiple possible nodes. This can be specified by supplying an appropriate character.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is simply a script that prints the relevant parameters which are likely to need editing. It does not print all information from an .apsim file.
For &lsquo;Crop&rsquo;, &lsquo;Manager&rsquo; and &lsquo;Other&rsquo;, &lsquo;parm&rsquo; should be indicated with a first element to look for and a second with the relative position in case there are
multiple results.
</p>


<h3>Value</h3>

<p>It returns the parameter path (when print.path equals TRUE) and table with inspected parameters and values
</p>


<h3>Note</h3>

<p>When multiple folders are present as it is the case when there are factorials. Inspect will find
the instance in the first folder unless 'root' is supplied. By providing the name of the folder to root
(or a regular expression), the appropriate node can be selected. In this case the printed path will
be absolute instead of relative.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
extd.dir &lt;- system.file("extdata", package = "apsimx")
## Testing using 'Millet'
inspect_apsim("Millet.apsim", src.dir = extd.dir, node = "Clock")
inspect_apsim("Millet.apsim", src.dir = extd.dir, node = "Weather") 
inspect_apsim("Millet.apsim", src.dir = extd.dir, node = "Soil", soil.child = "Metadata")
inspect_apsim("Millet.apsim", src.dir = extd.dir, node = "Soil", soil.child = "OrganicMatter")
inspect_apsim("Millet.apsim", src.dir = extd.dir, node = "Soil", soil.child = "Analysis")
inspect_apsim("Millet.apsim", src.dir = extd.dir, node = "Soil", soil.child = "InitialWater")
inspect_apsim("Millet.apsim", src.dir = extd.dir, node = "Soil", soil.child = "Sample")
inspect_apsim("Millet.apsim", src.dir = extd.dir, node = "SurfaceOrganicMatter")
inspect_apsim("Millet.apsim", src.dir = extd.dir, node = "Crop", parm = list("sow",NA)) 
inspect_apsim("Millet.apsim", src.dir = extd.dir, node = "Crop", parm = list("sow",7))

## when soil.child = "Water" there are potentially many crops to chose from 
## This selects LL, KL and XF for Barley
inspect_apsim("Millet.apsim", src.dir = extd.dir, node = "Soil", 
              soil.child = "Water", parm = "Barley")
## This selects LL for all the crops
inspect_apsim("Millet.apsim", src.dir = extd.dir, node = "Soil", 
              soil.child = "Water", parm = "LL")
## To print the parm.path the selection needs to be unique
## but still there will be multiple soil layers
## 'parm' can be a list or a character vector of length equal to two
inspect_apsim("Millet.apsim", src.dir = extd.dir, node = "Soil", 
              soil.child = "Water", parm = list("Barley", "LL"),
              print.path = TRUE)

## Inspect outputfile
inspect_apsim("Millet.apsim", src.dir = extd.dir, node = "Outputfile",
              parm = "filename")
 
inspect_apsim("Millet.apsim", src.dir = extd.dir, node = "Outputfile",
              parm = "variables")

## Testing with maize-soybean-rotation.apsim
inspect_apsim("maize-soybean-rotation.apsim", src.dir = extd.dir, node = "Clock")
inspect_apsim("maize-soybean-rotation.apsim", src.dir = extd.dir, node = "Weather")
inspect_apsim("maize-soybean-rotation.apsim", src.dir = extd.dir, node = "Soil",
              soil.child = "Metadata")
inspect_apsim("maize-soybean-rotation.apsim", src.dir = extd.dir, node = "Soil", 
               soil.child = "OrganicMatter")
inspect_apsim("maize-soybean-rotation.apsim", src.dir = extd.dir, node = "Soil", 
               soil.child = "Analysis")
inspect_apsim("maize-soybean-rotation.apsim", src.dir = extd.dir, node = "Soil", 
               soil.child = "InitialWater")
inspect_apsim("maize-soybean-rotation.apsim", src.dir = extd.dir, node = "Soil", 
               soil.child = "Sample")
inspect_apsim("maize-soybean-rotation.apsim", src.dir = extd.dir, 
               node = "SurfaceOrganicMatter")
inspect_apsim("maize-soybean-rotation.apsim", src.dir = extd.dir, node = "Crop")
## This has many options and a complex structure
## It is possible to select unique managements, but not non-unique ones
## The first element in parm can be a regular expression
inspect_apsim("maize-soybean-rotation.apsim", src.dir = extd.dir, 
               node = "Manager", parm = list("rotat",NA))
inspect_apsim("maize-soybean-rotation.apsim", src.dir = extd.dir, 
               node = "Manager", 
               parm = list("sow on a fixed date - maize",NA))
## Select an individual row by position
inspect_apsim("maize-soybean-rotation.apsim", src.dir = extd.dir, 
              node = "Manager", 
              parm = list("sow on a fixed date - maize",7))
              
## Illustrating the 'print.path' feature.
inspect_apsim("Millet.apsim", src.dir = extd.dir, 
               node = "Soil", soil.child = "Water", 
               parm = "DUL", print.path = TRUE)
## But the path can also be returned as a string
## Which is useful for later editing
pp &lt;-  inspect_apsim("Millet.apsim", src.dir = extd.dir, 
               node = "Soil", soil.child = "Water", 
               parm = "DUL", print.path = TRUE)
               
## Inspecting a factorial
## (or simply a simulation with multiple folders)
## No cover
inspect_apsim("maize-factorial.apsim", src.dir = extd.dir, 
               root = "IA-CC_Canisteo_No-Cover")
               
## Cover
inspect_apsim("maize-factorial.apsim", src.dir = extd.dir, 
               root = "IA-CC_Canisteo_Cover")


</code></pre>

<hr>
<h2 id='inspect_apsim_xml'>Inspect an APSIM Classic auxiliary (XML) file</h2><span id='topic+inspect_apsim_xml'></span>

<h3>Description</h3>

<p>inspect an auxiliary XML apsim file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inspect_apsim_xml(
  file = "",
  src.dir = ".",
  parm,
  verbose = TRUE,
  print.path = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="inspect_apsim_xml_+3A_file">file</code></td>
<td>
<p>file ending in .xml to be inspected.</p>
</td></tr>
<tr><td><code id="inspect_apsim_xml_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .xml file to be inspected; defaults to the current working directory</p>
</td></tr>
<tr><td><code id="inspect_apsim_xml_+3A_parm">parm</code></td>
<td>
<p>parameter to inspect.</p>
</td></tr>
<tr><td><code id="inspect_apsim_xml_+3A_verbose">verbose</code></td>
<td>
<p>Whether to print to standard output</p>
</td></tr>
<tr><td><code id="inspect_apsim_xml_+3A_print.path">print.path</code></td>
<td>
<p>Whether to print the parameter path</p>
</td></tr>
</table>


<h3>Value</h3>

<p>it returns an absolute parameter path(s)
</p>


<h3>Note</h3>

<p>the behavior has changed from previous verions (earlier than 1.977). Before,
if more than match was found it would return an error. Now it returns a list with all
possible matches. This can be useful when trying to find a parameter.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> 

extd.dir &lt;- system.file("extdata", package = "apsimx")

inspect_apsim_xml("Maize75.xml", src.dir = extd.dir,
                  parm = "leaf_no_rate_change")
                  
pp &lt;- inspect_apsim_xml("Maize75.xml", src.dir = extd.dir,
                        parm = "leaf_no_rate_change",
                        verbose = FALSE, 
                        print.path = FALSE)

</code></pre>

<hr>
<h2 id='inspect_apsimx'>Inspect an .apsimx (JSON) file</h2><span id='topic+inspect_apsimx'></span>

<h3>Description</h3>

<p>inspect a JSON apsimx file. It does not replace the GUI, but it can save time by quickly checking parameters and values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inspect_apsimx(
  file = "",
  src.dir = ".",
  node = c("Clock", "Weather", "Soil", "SurfaceOrganicMatter", "MicroClimate", "Crop",
    "Manager", "Report", "Operations", "Other"),
  soil.child = c("Metadata", "Water", "InitialWater", "Chemical", "Physical", "Analysis",
    "SoilWater", "InitialN", "CERESSoilTemperature", "Sample", "Nutrient", "Organic"),
  parm = NULL,
  digits = 3,
  print.path = FALSE,
  root
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="inspect_apsimx_+3A_file">file</code></td>
<td>
<p>file ending in .apsimx to be inspected (JSON)</p>
</td></tr>
<tr><td><code id="inspect_apsimx_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .apsimx file to be inspected; defaults to the current working directory</p>
</td></tr>
<tr><td><code id="inspect_apsimx_+3A_node">node</code></td>
<td>
<p>specific node to be inspected either &lsquo;Clock&rsquo;, &lsquo;Weather&rsquo;, 
&lsquo;Soil&rsquo;, &lsquo;SurfaceOrganicMatter&rsquo;, &lsquo;MicroClimate&rsquo;, &lsquo;Crop&rsquo;,
&lsquo;Manager&rsquo;, &lsquo;Operations&rsquo; or &lsquo;Other&rsquo;</p>
</td></tr>
<tr><td><code id="inspect_apsimx_+3A_soil.child">soil.child</code></td>
<td>
<p>specific soil component to be inspected. The options vary depending on what is available (see details)</p>
</td></tr>
<tr><td><code id="inspect_apsimx_+3A_parm">parm</code></td>
<td>
<p>parameter to refine the inspection of the &lsquo;manager&rsquo; list(&lsquo;parm&rsquo;,&lsquo;position&rsquo;), use &lsquo;NA&rsquo; for all the positions. &lsquo;parm&rsquo; can be a regular expression for partial matching.</p>
</td></tr>
<tr><td><code id="inspect_apsimx_+3A_digits">digits</code></td>
<td>
<p>number of decimals to print (default 3). Not used now because everything is a character.</p>
</td></tr>
<tr><td><code id="inspect_apsimx_+3A_print.path">print.path</code></td>
<td>
<p>whether to print the path to the specific parameter. Useful to give the later editing. (Also returned as &lsquo;invisible&rsquo;)</p>
</td></tr>
<tr><td><code id="inspect_apsimx_+3A_root">root</code></td>
<td>
<p>root node label. In simulation structures such as factorials there will be multiple possible nodes. This can be specified by supplying an appropriate character.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In general, this function is used to edit one parameter at a time. There are some exceptions. <br />
</p>
<p>- For the Clock, both the &lsquo;Start&rsquo; and &lsquo;End&rsquo; can be edited in one call.
</p>
<p>This is simply a script that prints the relevant parameters which are likely to need editing. It does not print all information from an .apsimx file.
To investigate the available &lsquo;soil.childs&rsquo; specify &lsquo;Soil&rsquo; for &lsquo;node&rsquo; and do not specify the &lsquo;soil.child&rsquo;.
</p>


<h3>Value</h3>

<p>prints a table with inspected parameters and values (and &lsquo;parm path&rsquo; when &lsquo;print.path&rsquo; = TRUE).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
extd.dir &lt;- system.file("extdata", package = "apsimx")
inspect_apsimx("Wheat.apsimx", src.dir = extd.dir, node = "Clock") 
inspect_apsimx("Wheat.apsimx", src.dir = extd.dir, node = "Weather")
inspect_apsimx("Wheat.apsimx", src.dir = extd.dir, node = "Soil", soil.child = "Metadata") 
inspect_apsimx("Wheat.apsimx", src.dir = extd.dir, node = "Soil", soil.child = "Physical") 
inspect_apsimx("Wheat.apsimx", src.dir = extd.dir, node = "Soil", soil.child = "SoilWater") 
inspect_apsimx("Wheat.apsimx", src.dir = extd.dir, node = "Soil", soil.child = "Organic")
inspect_apsimx("Wheat.apsimx", src.dir = extd.dir, node = "Soil", soil.child = "Chemical")
inspect_apsimx("Wheat.apsimx", src.dir = extd.dir, node = "Soil", soil.child = "InitialWater")
inspect_apsimx("Wheat.apsimx", src.dir = extd.dir, node = "Soil", soil.child = "InitialN")
inspect_apsimx("Wheat.apsimx", src.dir = extd.dir, node = "SurfaceOrganicMatter")
inspect_apsimx("Wheat.apsimx", src.dir = extd.dir, node = "MicroClimate")
inspect_apsimx("Wheat.apsimx", src.dir = extd.dir, node = "Crop")
inspect_apsimx("Wheat.apsimx", src.dir = extd.dir, node = "Manager")
inspect_apsimx("Wheat.apsimx", src.dir = extd.dir, node = "Report")

## Manager folder present
extd.dir &lt;- system.file("extdata", package = "apsimx")
inspect_apsimx("maize-manager-folder.apsimx", node = "Other", src.dir = extd.dir,
               parm = list("Manager", "Fertiliser", "Amount"))
               


</code></pre>

<hr>
<h2 id='inspect_apsimx_json'>Inspect an .apsimx or .json (JSON) file</h2><span id='topic+inspect_apsimx_json'></span>

<h3>Description</h3>

<p>inspect an .apsimx or .json (JSON) file. It does not replace the GUI, but it can save time by quickly checking parameters and values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inspect_apsimx_json(
  file = "",
  src.dir = ".",
  parm,
  search.depth = 15,
  print.path = FALSE,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="inspect_apsimx_json_+3A_file">file</code></td>
<td>
<p>file ending in .apsimx or .json to be inspected (JSON)</p>
</td></tr>
<tr><td><code id="inspect_apsimx_json_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .apsimx or .json file to be inspected; defaults to the current working directory</p>
</td></tr>
<tr><td><code id="inspect_apsimx_json_+3A_parm">parm</code></td>
<td>
<p>string or regular expression for partial matching.</p>
</td></tr>
<tr><td><code id="inspect_apsimx_json_+3A_search.depth">search.depth</code></td>
<td>
<p>default is 15. How deep should the algorithm explore the structure of the list.</p>
</td></tr>
<tr><td><code id="inspect_apsimx_json_+3A_print.path">print.path</code></td>
<td>
<p>whether to print the parameter path (default is FALSE)</p>
</td></tr>
<tr><td><code id="inspect_apsimx_json_+3A_verbose">verbose</code></td>
<td>
<p>whether to print additional information (mostly used for debugging)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is a work in progress. There are many instances for which it will not work.
</p>
<p>It will probably only find the first instance that matches.
</p>
<p>A future feature will be to search for a jspath instead of simply a regular expression
</p>


<h3>Value</h3>

<p>prints a table with inspected parameters and values (and the path when &lsquo;print.path&rsquo; = TRUE).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
extd.dir &lt;- system.file("extdata", package = "apsimx")
## It seems to work for simple search
inspect_apsimx_json("Wheat.apsimx", src.dir = extd.dir, parm = "Version")
inspect_apsimx_json("Wheat.apsimx", src.dir = extd.dir, parm = "Simulations")
inspect_apsimx_json("Wheat.apsimx", src.dir = extd.dir, parm = "Clock")
inspect_apsimx_json("Wheat.apsimx", src.dir = extd.dir, parm = "Weather")
## Does return soil components
inspect_apsimx_json("Wheat.apsimx", src.dir = extd.dir, parm = "DUL")
## Or cultivar
inspect_apsimx_json("Wheat.apsimx", src.dir = extd.dir, parm = "Hartog")


</code></pre>

<hr>
<h2 id='inspect_apsimx_replacement'>Inspect a replacement component in an .apsimx (JSON) file</h2><span id='topic+inspect_apsimx_replacement'></span>

<h3>Description</h3>

<p>inspect the replacement componenet of an JSON apsimx file. It does not replace the GUI, but it can save time by quickly checking parameters and values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inspect_apsimx_replacement(
  file = "",
  src.dir = ".",
  node = NULL,
  node.child = NULL,
  node.subchild = NULL,
  node.subsubchild = NULL,
  node.sub3child = NULL,
  node.sub4child = NULL,
  node.sub5child = NULL,
  node.string = NULL,
  root = list("Models.Core.Replacements", NA),
  parm = NULL,
  display.available = FALSE,
  digits = 3,
  print.path = FALSE,
  verbose = TRUE,
  grep.options
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="inspect_apsimx_replacement_+3A_file">file</code></td>
<td>
<p>file ending in .apsimx to be inspected (JSON)</p>
</td></tr>
<tr><td><code id="inspect_apsimx_replacement_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .apsimx file to be inspected; defaults to the current working directory</p>
</td></tr>
<tr><td><code id="inspect_apsimx_replacement_+3A_node">node</code></td>
<td>
<p>specific node to be inspected</p>
</td></tr>
<tr><td><code id="inspect_apsimx_replacement_+3A_node.child">node.child</code></td>
<td>
<p>specific node child component to be inspected.</p>
</td></tr>
<tr><td><code id="inspect_apsimx_replacement_+3A_node.subchild">node.subchild</code></td>
<td>
<p>specific node sub-child to be inspected.</p>
</td></tr>
<tr><td><code id="inspect_apsimx_replacement_+3A_node.subsubchild">node.subsubchild</code></td>
<td>
<p>specific node sub-subchild to be inspected.</p>
</td></tr>
<tr><td><code id="inspect_apsimx_replacement_+3A_node.sub3child">node.sub3child</code></td>
<td>
<p>specific node sub3child to be inspected.</p>
</td></tr>
<tr><td><code id="inspect_apsimx_replacement_+3A_node.sub4child">node.sub4child</code></td>
<td>
<p>specific node sub4child to be inspected.</p>
</td></tr>
<tr><td><code id="inspect_apsimx_replacement_+3A_node.sub5child">node.sub5child</code></td>
<td>
<p>specific node sub5child to be inspected.</p>
</td></tr>
<tr><td><code id="inspect_apsimx_replacement_+3A_node.string">node.string</code></td>
<td>
<p>passing of a string instead of the node hierarchy.
Do not use this and also the other node arguments. This argument will
overwrite the other node specifications.</p>
</td></tr>
<tr><td><code id="inspect_apsimx_replacement_+3A_root">root</code></td>
<td>
<p>&lsquo;root&rsquo; for the inspection of a replacement file (it gives flexibility to inspect other types of files).
In previous versions of APSIM (before mid 2023) this was &lsquo;Models.Core.Replacement&rsquo;. In more recent versions, it needs
to be &lsquo;Models.Core.Folder&rsquo;.</p>
</td></tr>
<tr><td><code id="inspect_apsimx_replacement_+3A_parm">parm</code></td>
<td>
<p>specific parameter to display. It can be a regular expression.</p>
</td></tr>
<tr><td><code id="inspect_apsimx_replacement_+3A_display.available">display.available</code></td>
<td>
<p>logical. Whether to display available components to be inspected (default = FALSE)</p>
</td></tr>
<tr><td><code id="inspect_apsimx_replacement_+3A_digits">digits</code></td>
<td>
<p>number of decimals to print (default 3)</p>
</td></tr>
<tr><td><code id="inspect_apsimx_replacement_+3A_print.path">print.path</code></td>
<td>
<p>print the path to the inspected parameter (default FALSE)</p>
</td></tr>
<tr><td><code id="inspect_apsimx_replacement_+3A_verbose">verbose</code></td>
<td>
<p>whether to print additional information, default: TRUE</p>
</td></tr>
<tr><td><code id="inspect_apsimx_replacement_+3A_grep.options">grep.options</code></td>
<td>
<p>Additional options for grep. To be passed as a list.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is simply a script that prints the relevant parameters which are likely to need editing. It does not print all information from an .apsimx file.
</p>


<h3>Value</h3>

<p>table with inspected parameters and values (and &lsquo;parm path&rsquo; when &lsquo;print.path&rsquo; = TRUE).
</p>


<h3>Note</h3>

<p>I need to make some changes in order to be able to handle multiple parameters. At this point, it
might work but it will generate warnings.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
extd.dir &lt;- system.file("extdata", package = "apsimx")
inspect_apsimx_replacement("MaizeSoybean.apsimx", src.dir = extd.dir,
                           node = "Maize", node.child = "Phenology",
                           node.subchild = "ThermalTime", 
                           node.subsubchild = "BaseThermalTime",
                           node.sub3child = "Response") 
## For Wheat
## getting down to 'XYPairs'
inspect_apsimx_replacement("WheatRye.apsimx", 
                           src.dir = extd.dir,
                           node = "Wheat",
                           node.child = "Structure",
                           node.subchild = "BranchingRate",
                           node.subsubchild = "PotentialBranchingRate",
                           node.sub3child = "Vegetative",
                           node.sub4child = "PotentialBranchingRate",
                           node.sub5child = "XYPairs")

</code></pre>

<hr>
<h2 id='mcmc.apsim.env'>Environment to store data for apsim MCMC</h2><span id='topic+mcmc.apsim.env'></span>

<h3>Description</h3>

<p>Environment which stores data for MCMC
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mcmc.apsim.env
</code></pre>


<h3>Format</h3>

<p>An object of class <code>environment</code> of length 0.
</p>


<h3>Details</h3>

<p>Create an apsim environment for MCMC
</p>


<h3>Value</h3>

<p>This is an environment, so nothing to return.
</p>

<hr>
<h2 id='mcmc.apsimx.env'>Environment to store data for apsimx MCMC</h2><span id='topic+mcmc.apsimx.env'></span>

<h3>Description</h3>

<p>Environment which stores data for MCMC
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mcmc.apsimx.env
</code></pre>


<h3>Format</h3>

<p>An object of class <code>environment</code> of length 0.
</p>


<h3>Details</h3>

<p>Create an apsimx environment for MCMC
</p>


<h3>Value</h3>

<p>This is an environment, so nothing to return.
</p>

<hr>
<h2 id='napad_apsim_met'>Pad a met file with NAs when there are date discontinuities</h2><span id='topic+napad_apsim_met'></span>

<h3>Description</h3>

<p>It will fill in or &lsquo;pad&rsquo; a met object with NAs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>napad_apsim_met(met)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="napad_apsim_met_+3A_met">met</code></td>
<td>
<p>object of class &lsquo;met&rsquo;</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Fill in with missing data date discontinuities in a met file
</p>


<h3>Value</h3>

<p>It returns an object of class &lsquo;met&rsquo; with padded NAs.
</p>


<h3>Note</h3>

<p>The purpose of this function is to allow for imputation using <code><a href="#topic+impute_apsim_met">impute_apsim_met</a></code>
</p>

<hr>
<h2 id='obsWheat'>Observed wheat phenology, LAI and biomass</h2><span id='topic+obsWheat'></span>

<h3>Description</h3>

<p>Artificial observed data for Wheat
</p>


<h3>Usage</h3>

<pre><code class='language-R'>obsWheat
</code></pre>


<h3>Format</h3>

<p>A data frame with 10 rows and 4 variables:
</p>

<dl>
<dt>Date</dt><dd><p> -date- date starting Oct 1 2016 and ending June 6 2017</p>
</dd>
<dt>Wheat.Phenology.Stage</dt><dd><p> -numeric- phenology stage of wheat</p>
</dd>
<dt>Wheat.Leaf.LAI</dt><dd><p> -numeric- Leaf Area Index</p>
</dd>
<dt>Wheat.AboveGround.Wt</dt><dd><p>-numeric- above ground biomass (g/m2)</p>
</dd>
</dl>



<h3>Details</h3>

<p>A dataset containing the Date, phenology stage, LAI and above ground biomass for Wheat
</p>


<h3>Source</h3>

<p>These are simulated data. For details see the APSIM documentation
</p>

<hr>
<h2 id='optim_apsim'>Optimize parameters in an APSIM simulation</h2><span id='topic+optim_apsim'></span><span id='topic+print.optim_apsim'></span><span id='topic+vcov.optim_apsim'></span><span id='topic+coef.optim_apsim'></span><span id='topic+confint.optim_apsim'></span>

<h3>Description</h3>

<p>It is a wrapper for running APSIM and optimizing parameters using <code><a href="stats.html#topic+optim">optim</a></code>
</p>
<p>Friendly printing of optim_apsim
</p>
<p>Variance-Covariance for an &lsquo;optim_apsim&rsquo; object
</p>
<p>Parameter estimates for an &lsquo;optim_apsim&rsquo; object
</p>
<p>Confidence intervals for parameter estimates for an &lsquo;optim_apsim&rsquo; object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>optim_apsim(
  file,
  src.dir = ".",
  crop.file,
  parm.paths,
  data,
  type = c("optim", "nloptr", "mcmc", "ucminf"),
  weights,
  index = "Date",
  parm.vector.index,
  xml.parm,
  ...
)

## S3 method for class 'optim_apsim'
print(x, ..., digits = 3, level = 0.95)

## S3 method for class 'optim_apsim'
vcov(object, ..., scaled = TRUE)

## S3 method for class 'optim_apsim'
coef(object, ..., scaled = FALSE)

## S3 method for class 'optim_apsim'
confint(object, parm, level = 0.95, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="optim_apsim_+3A_file">file</code></td>
<td>
<p>file name to be run (the extension .apsim is optional)</p>
</td></tr>
<tr><td><code id="optim_apsim_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .apsim file to be run (defaults to the current directory)</p>
</td></tr>
<tr><td><code id="optim_apsim_+3A_crop.file">crop.file</code></td>
<td>
<p>name of auxiliary xml file where parameters are stored. If this is missing, it is 
assumed that the parameters to be edited are in the main simulation file.</p>
</td></tr>
<tr><td><code id="optim_apsim_+3A_parm.paths">parm.paths</code></td>
<td>
<p>absolute paths of the coefficients to be optimized. 
It is recommended that you use <code><a href="#topic+inspect_apsim">inspect_apsim</a></code> or <code><a href="#topic+inspect_apsim_xml">inspect_apsim_xml</a></code>  for this.</p>
</td></tr>
<tr><td><code id="optim_apsim_+3A_data">data</code></td>
<td>
<p>data frame with the observed data. By default is assumes there is a 'Date' column for the index.</p>
</td></tr>
<tr><td><code id="optim_apsim_+3A_type">type</code></td>
<td>
<p>Type of optimization. For now, <code><a href="stats.html#topic+optim">optim</a></code> and, if available, <code><a href="nloptr.html#topic+nloptr">nloptr</a></code> or 
&lsquo;mcmc&rsquo; through <code><a href="BayesianTools.html#topic+runMCMC">runMCMC</a></code>. Option &lsquo;ucminf&rsquo; uses the <code><a href="ucminf.html#topic+ucminf">ucminf</a></code> function.</p>
</td></tr>
<tr><td><code id="optim_apsim_+3A_weights">weights</code></td>
<td>
<p>Weighting method or values for computing the residual sum of squares (see Note).</p>
</td></tr>
<tr><td><code id="optim_apsim_+3A_index">index</code></td>
<td>
<p>Index for filtering APSIM output. &lsquo;Date&rsquo; is currently used. (I have not tested how well it works using anything other than Date).</p>
</td></tr>
<tr><td><code id="optim_apsim_+3A_parm.vector.index">parm.vector.index</code></td>
<td>
<p>Index to optimize a specific element of a parameter vector. At the moment it is
possible to only edit one element at a time. This is because there is a conflict when generating multiple
elements in the candidate vector for the same parameter.</p>
</td></tr>
<tr><td><code id="optim_apsim_+3A_xml.parm">xml.parm</code></td>
<td>
<p>optional logical vector used when optimizing parameters which are both in the .apsim file and in the &lsquo;crop.file&rsquo;.
If &lsquo;crop.file&rsquo; is missing it is assumed that the paramters to be optimized are in the .apsim file. If &lsquo;crop.file&rsquo; is
not missing it is assumed that they are in the &lsquo;crop.file&rsquo;. If the parameters are in both, this needs to be specified in 
this argument.</p>
</td></tr>
<tr><td><code id="optim_apsim_+3A_...">...</code></td>
<td>
<p>additional arguments (none used at the moment)</p>
</td></tr>
<tr><td><code id="optim_apsim_+3A_x">x</code></td>
<td>
<p>object of class &lsquo;optim_apsim&rsquo;</p>
</td></tr>
<tr><td><code id="optim_apsim_+3A_digits">digits</code></td>
<td>
<p>number of digits to round up the output</p>
</td></tr>
<tr><td><code id="optim_apsim_+3A_level">level</code></td>
<td>
<p>confidence level (default is 0.95)</p>
</td></tr>
<tr><td><code id="optim_apsim_+3A_object">object</code></td>
<td>
<p>object of class &lsquo;optim_apsim&rsquo;</p>
</td></tr>
<tr><td><code id="optim_apsim_+3A_scaled">scaled</code></td>
<td>
<p>whether to return the scaled or unscaled estimates
(TRUE in the optimized scale, FALSE in the original scale)</p>
</td></tr>
<tr><td><code id="optim_apsim_+3A_parm">parm</code></td>
<td>
<p>parameter to select (it can be a regular expression)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Simple optimization for APSIM Classic
</p>
<p>* This function assumes that you want to optimize parameters which are stored in
an auxiliary XML file. These are typically crop or cultivar specific parameters.
However, it is possible to optimize parameters present in the main simulation
file.
</p>
<p>* Only one observation per day is allowed in the data.
</p>
<p>* Given how APSIM Classic works, this can only be run when the main simulation
file is in the current directory and the crop file (or XML) 
should be in the same directory as the main simulation.
</p>
<p>* The initial values for the optimization should be the ones in the stored
crop parameter file.
</p>
<p>* It is suggested that you keep a backup of the original file. This function
will edit and overwrite the file during the optimization. 
</p>
<p>* When you use the parm.vector.index you cannot edit two separate elements of
a vector at the same time. This should be used to target a single element of 
a vector only.
</p>
<p>* Internally, the optimization is done around the scaled value of the initial parameter
values. A value of 1 would correspond to the inital value of the parameter. 
The &lsquo;lower&rsquo; and &lsquo;upper&rsquo; (or &lsquo;ub&rsquo; and &lsquo;lb&rsquo;) are also scaled 
to the initial values of the parameters. So, for example, if your initial value is 20 
and you provide an upper bound of 5, it means that the actual upper value that you are allowing for is 100.
</p>


<h3>Value</h3>

<p>object of class &lsquo;optim_apsim&rsquo;, but really just a list with results from optim and additional information.
</p>
<p>prints to console
</p>
<p>it returns the variance-covariance matrix for an object of class &lsquo;optim_apsim&rsquo;.
</p>
<p>a numeric vector with the value of the parameter estimates.
</p>
<p>a matrix with lower and upper limits and the point estimate (coef)
</p>


<h3>Note</h3>

<p>When computing the objective function (residual sum-of-squares) different variables are combined.
It is common to weight them since they are in different units. If the argument weights is not supplied
no weighting is applied. It can be &lsquo;mean&rsquo;, &lsquo;var&rsquo; or a numeric vector of appropriate length.
</p>
<p>This in the scale of the optimized parameters which are
scaled to be around 1.
</p>

<hr>
<h2 id='optim_apsimx'>Optimize parameters in an APSIM Next Generation simulation</h2><span id='topic+optim_apsimx'></span>

<h3>Description</h3>

<p>It is a wrapper for running APSIM-X and optimizing parameters using <code><a href="stats.html#topic+optim">optim</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>optim_apsimx(
  file,
  src.dir = ".",
  parm.paths,
  data,
  type = c("optim", "nloptr", "mcmc", "ucminf"),
  weights,
  index = "Date",
  parm.vector.index,
  replacement,
  root,
  initial.values,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="optim_apsimx_+3A_file">file</code></td>
<td>
<p>file name to be run (the extension .apsimx is optional)</p>
</td></tr>
<tr><td><code id="optim_apsimx_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .apsimx file to be run (defaults to the current directory)</p>
</td></tr>
<tr><td><code id="optim_apsimx_+3A_parm.paths">parm.paths</code></td>
<td>
<p>absolute or relative paths of the coefficients to be optimized. 
It is recommended that you use <code><a href="#topic+inspect_apsimx">inspect_apsimx</a></code> for this</p>
</td></tr>
<tr><td><code id="optim_apsimx_+3A_data">data</code></td>
<td>
<p>data frame with the observed data. By default is assumes there is a 'Date' column for the index.</p>
</td></tr>
<tr><td><code id="optim_apsimx_+3A_type">type</code></td>
<td>
<p>Type of optimization. For now, <code><a href="stats.html#topic+optim">optim</a></code>, and, if available, <code><a href="nloptr.html#topic+nloptr">nloptr</a></code> or 
&lsquo;mcmc&rsquo; through <code><a href="BayesianTools.html#topic+runMCMC">runMCMC</a></code>. Option &lsquo;ucminf&rsquo; uses the <code><a href="ucminf.html#topic+ucminf">ucminf</a></code> function.</p>
</td></tr>
<tr><td><code id="optim_apsimx_+3A_weights">weights</code></td>
<td>
<p>Weighting method or values for computing the residual sum of squares.</p>
</td></tr>
<tr><td><code id="optim_apsimx_+3A_index">index</code></td>
<td>
<p>Index for filtering APSIM output. Typically, &ldquo;Date&rdquo;, but it can be c(&ldquo;report&rdquo;, &ldquo;Date&rdquo;) for 
multiple simulations</p>
</td></tr>
<tr><td><code id="optim_apsimx_+3A_parm.vector.index">parm.vector.index</code></td>
<td>
<p>Index to optimize a specific element of a parameter vector.  At the moment it is
possible to only edit one element at a time. This is because there is a conflict when generating multiple
elements in the candidate vector for the same parameter.</p>
</td></tr>
<tr><td><code id="optim_apsimx_+3A_replacement">replacement</code></td>
<td>
<p>TRUE or FALSE for each parameter. Indicating whether it is part of 
the &lsquo;replacement&rsquo; component. Its length should be equal to the length or &lsquo;parm.paths&rsquo;.</p>
</td></tr>
<tr><td><code id="optim_apsimx_+3A_root">root</code></td>
<td>
<p>root argument for <code><a href="#topic+edit_apsimx_replacement">edit_apsimx_replacement</a></code></p>
</td></tr>
<tr><td><code id="optim_apsimx_+3A_initial.values">initial.values</code></td>
<td>
<p>(required) supply the initial values of the parameters. (Working on fixing this...).
If the parameters to be optimized correspond to a single value, then a simple numeric vector can be supplied.
If one or more of the parameters represent a vector in APSIM, then the initial values should be passed as a
list. At the moment, it is not possible to check if these are appropriate (correct name and length).</p>
</td></tr>
<tr><td><code id="optim_apsimx_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed to the optimization algorithm. See <code><a href="stats.html#topic+optim">optim</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Simple optimization for APSIM Next Generation
</p>
<p>* At the moment it is required to provide starting values for the parameters of interest.
</p>
<p>* It is suggested that you keep a backup of the original file. This function
will edit and overwrite the file during the optimization.
</p>
<p>* When you use the parm.vector.index you cannot edit two separate elements of
a vector at the same time. This should be used to target a single element of 
a vector only. (I can add this feature in the future if it is justified.)
</p>
<p>* Internally, the optimization is done around the scaled value of the initial parameter
values. A value of 1 would correspond to the inital value of the parameter. 
The &lsquo;lower&rsquo; and &lsquo;upper&rsquo; (or &lsquo;ub&rsquo; and &lsquo;lb&rsquo;) are also scaled 
to the initial values of the parameters. So, for example, if your initial value is 20 
and you provide an upper bound of 5, it means that the actual upper value that you are allowing for is 100. 
</p>
<p>* I have tested other optimizers and packages, but I think these are enough for most purposes. I tried
function stats::nlm (but it does not support bounds and it can fail), package 'optimx' is a bit messy and it
does not provide sufficient additional functionality. Package 'ucminf' seems like a good alternative, but it
did not perform better than the other ones.
</p>


<h3>Value</h3>

<p>object of class &lsquo;optim_apsim&rsquo;, but really just a list with results from optim and additional information.
</p>


<h3>Note</h3>

<p>When computing the objective function (residual sum-of-squares) different variables are combined.
It is common to weight them since they are in different units. If the argument weights is not supplied
no weighting is applied. It can be 'mean', 'variance' or a numeric vector of appropriate length.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## See the vignette for examples


</code></pre>

<hr>
<h2 id='plot.met'>Plot method for object of class &lsquo;met&rsquo;</h2><span id='topic+plot.met'></span>

<h3>Description</h3>

<p>Some plots are similar to APSIM, others are different
and more useful in some respects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'met'
plot(
  x,
  ...,
  years,
  met.var,
  plot.type = c("ts", "area", "col", "density"),
  cumulative = FALSE,
  facet = FALSE,
  climatology = FALSE,
  summary = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.met_+3A_x">x</code></td>
<td>
<p>object of class &lsquo;met&rsquo;</p>
</td></tr>
<tr><td><code id="plot.met_+3A_...">...</code></td>
<td>
<p>additional arguments. None used at the moment.</p>
</td></tr>
<tr><td><code id="plot.met_+3A_years">years</code></td>
<td>
<p>optional argument to subset years</p>
</td></tr>
<tr><td><code id="plot.met_+3A_met.var">met.var</code></td>
<td>
<p>optional argument to choose a certain variable. By default,
temperature (min and max) is displayed</p>
</td></tr>
<tr><td><code id="plot.met_+3A_plot.type">plot.type</code></td>
<td>
<p>type of plot, default is &lsquo;ts&rsquo; or time-series. 
The options &lsquo;area&rsquo; and &lsquo;col&rsquo; are only available when summary = TRUE.</p>
</td></tr>
<tr><td><code id="plot.met_+3A_cumulative">cumulative</code></td>
<td>
<p>default is FALSE. Especially useful for &lsquo;rain&rsquo;.</p>
</td></tr>
<tr><td><code id="plot.met_+3A_facet">facet</code></td>
<td>
<p>whether to display the years in in different panels (facets). Not implemented yet.</p>
</td></tr>
<tr><td><code id="plot.met_+3A_climatology">climatology</code></td>
<td>
<p>logical (default FALSE). Whether to display the &lsquo;climatology&rsquo;
which would be the average of the data. 
Ideally, there are at least 20 years in the &lsquo;met&rsquo; object.</p>
</td></tr>
<tr><td><code id="plot.met_+3A_summary">summary</code></td>
<td>
<p>whether to plot &lsquo;summary&rsquo; data. (default FALSE).</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
## Read in and plot a met file
extd.dir &lt;- system.file("extdata", package = "apsimx")
ames &lt;- read_apsim_met("Ames.met", src.dir = extd.dir)
plot(ames, years = 2012:2015)
## Perhaps more informative
plot(ames, years = 2012:2015, cumulative = TRUE)
## for rain
plot(ames, met.var = "rain", years = 2012:2015, cumulative = TRUE)
plot(ames, met.var = "rain", years = 2012:2015, cumulative = TRUE, climatology = TRUE)
## It is possible to add ggplot elements
library(ggplot2)
p1 &lt;- plot(ames, met.var = "rain", years = 2012:2015, cumulative = TRUE)
p1 + ggtitle("Cumulative rain for 2012-2015")


</code></pre>

<hr>
<h2 id='print.met'>Printer-friendly version of a metfile</h2><span id='topic+print.met'></span>

<h3>Description</h3>

<p>Print a met file in a friendly way
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'met'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.met_+3A_x">x</code></td>
<td>
<p>an R object of class &lsquo;met&rsquo;</p>
</td></tr>
<tr><td><code id="print.met_+3A_...">...</code></td>
<td>
<p>additional printing arguments</p>
</td></tr>
</table>


<h3>Value</h3>

<p>It prints to console. Not used to return an R object.
</p>

<hr>
<h2 id='read_apsim'>Read APSIM generated .out files</h2><span id='topic+read_apsim'></span>

<h3>Description</h3>

<p>read &lsquo;output&rsquo; databases created by APSIM runs (.out and .sim). One file at a time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_apsim(
  file = "",
  src.dir = ".",
  value = c("report", "all"),
  date.format = "%d/%m/%Y",
  silent = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_apsim_+3A_file">file</code></td>
<td>
<p>file name</p>
</td></tr>
<tr><td><code id="read_apsim_+3A_src.dir">src.dir</code></td>
<td>
<p>source directory where file is located</p>
</td></tr>
<tr><td><code id="read_apsim_+3A_value">value</code></td>
<td>
<p>either &lsquo;report&rsquo; (data.frame), &lsquo;user-defined&rsquo; or &lsquo;all&rsquo; (list)</p>
</td></tr>
<tr><td><code id="read_apsim_+3A_date.format">date.format</code></td>
<td>
<p>format for adding &lsquo;Date&rsquo; column</p>
</td></tr>
<tr><td><code id="read_apsim_+3A_silent">silent</code></td>
<td>
<p>whether to issue warnings or suppress them</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Read APSIM generated .out files
</p>


<h3>Value</h3>

<p>This function returns a data frame with APSIM output or a list if value equals &lsquo;all&rsquo;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read_apsim_all">read_apsim_all</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
extd.dir &lt;- system.file("extdata", package = "apsimx")
maize.out &lt;- read_apsim("Maize", src.dir = extd.dir, value = "report")
millet.out &lt;- read_apsim("Millet", src.dir = extd.dir, value = "report")

## End(Not run)

</code></pre>

<hr>
<h2 id='read_apsim_all'>Read all APSIM generated .out files in a directory</h2><span id='topic+read_apsim_all'></span>

<h3>Description</h3>

<p>Like <code><a href="#topic+read_apsim">read_apsim</a></code>, but it can read many .out files in a directory. 
It will read all of them unless these are filtered using a regular expression as an argument
to &lsquo;value&rsquo;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_apsim_all(
  filenames,
  src.dir = ".",
  value = "report",
  date.format = "%d/%m/%Y",
  simplify = TRUE,
  silent = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_apsim_all_+3A_filenames">filenames</code></td>
<td>
<p>names of files to be read</p>
</td></tr>
<tr><td><code id="read_apsim_all_+3A_src.dir">src.dir</code></td>
<td>
<p>source directory where files are located</p>
</td></tr>
<tr><td><code id="read_apsim_all_+3A_value">value</code></td>
<td>
<p>either &lsquo;report&rsquo;, &lsquo;user-defined&rsquo; or &lsquo;all&rsquo; (not implemented at the moment)</p>
</td></tr>
<tr><td><code id="read_apsim_all_+3A_date.format">date.format</code></td>
<td>
<p>format for adding &lsquo;Date&rsquo; column</p>
</td></tr>
<tr><td><code id="read_apsim_all_+3A_simplify">simplify</code></td>
<td>
<p>whether to return a single data frame or a list.</p>
</td></tr>
<tr><td><code id="read_apsim_all_+3A_silent">silent</code></td>
<td>
<p>whether to issue warnings or suppress them</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Read all APSIM generated .out files in a directory
</p>


<h3>Value</h3>

<p>returns a data frame or a list depending on the argument &lsquo;simplify&rsquo; above.
</p>


<h3>Note</h3>

<p>Warning: very simple function at the moment, not optimized for memory or speed.
</p>

<hr>
<h2 id='read_apsim_met'>Read in an APSIM met file</h2><span id='topic+read_apsim_met'></span>

<h3>Description</h3>

<p>Read into R a met file and return an object of class &lsquo;met&rsquo;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_apsim_met(file, src.dir = ".", verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_apsim_met_+3A_file">file</code></td>
<td>
<p>path to met file</p>
</td></tr>
<tr><td><code id="read_apsim_met_+3A_src.dir">src.dir</code></td>
<td>
<p>optional source directory</p>
</td></tr>
<tr><td><code id="read_apsim_met_+3A_verbose">verbose</code></td>
<td>
<p>whether to suppress all messages and warnings</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Read a met file into R
</p>
<p>This function uses S3 classes and stores the additional information as attributes <br />
I use a more strict format than <abbr><span class="acronym">APSIM</span></abbr> and reading and writing will not <br />
preserve all the details. For example, at this moment comments are lost through <br />
the process of read and write unless they are added back in manually. <br />
Also, empty lines are ignored so these will be lost as well in the read and write process.
</p>


<h3>Value</h3>

<p>an object of class &lsquo;met&rsquo; with attributes
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
extd.dir &lt;- system.file("extdata", package = "apsimx")
ames.met &lt;- read_apsim_met("Ames.met", src.dir = extd.dir)
ames.met


</code></pre>

<hr>
<h2 id='read_apsim_soils'>Read in a soils (XML) file into a list of &lsquo;soil_profile&rsquo; objects</h2><span id='topic+read_apsim_soils'></span>

<h3>Description</h3>

<p>APSIM soils can be stored as XML files (soils) and reading them in
converts them into a list of individual objects of class &lsquo;soil_profile&rsquo;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_apsim_soils(file, src.dir = ".", verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_apsim_soils_+3A_file">file</code></td>
<td>
<p>name of the file (the extension sohuld be .soils)</p>
</td></tr>
<tr><td><code id="read_apsim_soils_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .soils file (defaults to the current directory)</p>
</td></tr>
<tr><td><code id="read_apsim_soils_+3A_verbose">verbose</code></td>
<td>
<p>whether to print additional information about the progress of reading 
the individual soils in.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
extd.dir &lt;- system.file("extdata", package = "apsimx")

sls &lt;- read_apsim_soils("Clarion.soils", src.dir = extd.dir)


</code></pre>

<hr>
<h2 id='read_apsimx'>Read APSIM-X generated .db files</h2><span id='topic+read_apsimx'></span>

<h3>Description</h3>

<p>read SQLite databases created by APSIM-X runs. One file at a time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_apsimx(file = "", src.dir = ".", value = "report", simplify = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_apsimx_+3A_file">file</code></td>
<td>
<p>file name</p>
</td></tr>
<tr><td><code id="read_apsimx_+3A_src.dir">src.dir</code></td>
<td>
<p>source directory where file is located</p>
</td></tr>
<tr><td><code id="read_apsimx_+3A_value">value</code></td>
<td>
<p>either &lsquo;report&rsquo;, &lsquo;all&rsquo; (list) or user-defined for a specific report</p>
</td></tr>
<tr><td><code id="read_apsimx_+3A_simplify">simplify</code></td>
<td>
<p>if TRUE will attempt to simplify multiple reports into a single data.frame. 
If FALSE it will return a list.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Read APSIM-X generated .db files
</p>


<h3>Value</h3>

<p>normally it returns a data frame, but it depends on the argument &lsquo;value&rsquo; above
</p>


<h3>Note</h3>

<p>if there is one single report it will return a data.frame. 
If there are multiple reports, it will attempt to merge them into a data frame. 
If not possible it will return a list with names corresponding to the 
table report names. It is also possible to select a specific report from several
available by selecting &lsquo;value = ReportName&rsquo;, where &lsquo;ReportName&rsquo; is the name
of the specific report that should be returned.
If you select &lsquo;all&rsquo; it will return all the components in the data base also as a list.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read_apsimx_all">read_apsimx_all</a></code>
</p>

<hr>
<h2 id='read_apsimx_all'>Read all APSIM-X generated .db files in a directory</h2><span id='topic+read_apsimx_all'></span>

<h3>Description</h3>

<p>Like <code><a href="#topic+read_apsimx">read_apsimx</a></code>, but it reads all .db files in a directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_apsimx_all(src.dir = ".", value = "report")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_apsimx_all_+3A_src.dir">src.dir</code></td>
<td>
<p>source directory where files are located</p>
</td></tr>
<tr><td><code id="read_apsimx_all_+3A_value">value</code></td>
<td>
<p>either &lsquo;report&rsquo; or &lsquo;all&rsquo; (only &lsquo;report&rsquo; implemented at the moment)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Read all APSIM-X generated .db files in a directory
</p>


<h3>Value</h3>

<p>it returns a data frame or a list if &lsquo;value&rsquo; equals &lsquo;all&rsquo;.
</p>


<h3>Note</h3>

<p>Warning: very simple function at the moment, not optimized for memory or speed.
</p>

<hr>
<h2 id='sens_apsim'>Sensitivity Analysis for APSIM Next Generation simulation</h2><span id='topic+sens_apsim'></span>

<h3>Description</h3>

<p>It is a wrapper for running APSIM and evaluating different parameters values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sens_apsim(
  file,
  src.dir = ".",
  crop.file,
  parm.paths,
  parm.vector.index,
  xml.parm,
  grid,
  summary = c("mean", "max", "var", "sd", "none"),
  root,
  verbose = TRUE,
  cores = 1L,
  save,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sens_apsim_+3A_file">file</code></td>
<td>
<p>file name to be run (with extension .apsim)</p>
</td></tr>
<tr><td><code id="sens_apsim_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .apsim file to be run (defaults to the current directory)</p>
</td></tr>
<tr><td><code id="sens_apsim_+3A_crop.file">crop.file</code></td>
<td>
<p>name of auxiliary xml file where parameters are stored. If this is missing, it is 
assumed that the parameters to be edited are in the main simulation file.</p>
</td></tr>
<tr><td><code id="sens_apsim_+3A_parm.paths">parm.paths</code></td>
<td>
<p>absolute or relative paths of the coefficients to be evaluated. 
It is recommended that you use <code><a href="#topic+inspect_apsim">inspect_apsim</a></code> for this</p>
</td></tr>
<tr><td><code id="sens_apsim_+3A_parm.vector.index">parm.vector.index</code></td>
<td>
<p>Index to evaluate a specific element of a parameter vector.  At the moment it is
possible to only edit one element at a time. This is because there is a conflict when generating multiple
elements in the candidate vector for the same parameter.</p>
</td></tr>
<tr><td><code id="sens_apsim_+3A_xml.parm">xml.parm</code></td>
<td>
<p>TRUE or FALSE for each parameter. Indicating whether it is part of 
an xml file. Its length should be equal to the length or &lsquo;parm.paths&rsquo;.</p>
</td></tr>
<tr><td><code id="sens_apsim_+3A_grid">grid</code></td>
<td>
<p>grid of parameter values for the evaluation. It can be a data.frame.</p>
</td></tr>
<tr><td><code id="sens_apsim_+3A_summary">summary</code></td>
<td>
<p>function name to use to summarize the output to be a sinlge row (default is the mean).</p>
</td></tr>
<tr><td><code id="sens_apsim_+3A_root">root</code></td>
<td>
<p>root argument for <code><a href="#topic+edit_apsim">edit_apsim</a></code></p>
</td></tr>
<tr><td><code id="sens_apsim_+3A_verbose">verbose</code></td>
<td>
<p>whether to print progress in percent and elapsed time.</p>
</td></tr>
<tr><td><code id="sens_apsim_+3A_cores">cores</code></td>
<td>
<p>number of cores to use for parallel evaluation</p>
</td></tr>
<tr><td><code id="sens_apsim_+3A_save">save</code></td>
<td>
<p>whether to save intermediate results. By default they will be saved as a
&lsquo;csv&rsquo; file using the name of the apsim file. This will replace &lsquo;apsim&rsquo; with &lsquo;csv&rsquo;.
It is also possible to provide the file name here (for example: &lsquo;Some_results.csv&rsquo;).</p>
</td></tr>
<tr><td><code id="sens_apsim_+3A_...">...</code></td>
<td>
<p>additional arguments (none used at the moment).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>object of class &lsquo;sens_apsim&rsquo;, but really just a list with results from the evaluations.
</p>


<h3>Note</h3>

<p>The summary function is stored as an attribute of the data frame &lsquo;grid.sims&rsquo;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## See the vignette for examples


</code></pre>

<hr>
<h2 id='sens_apsimx'>Sensitivity Analysis for APSIM Next Generation simulation</h2><span id='topic+sens_apsimx'></span><span id='topic+summary.sens_apsim'></span>

<h3>Description</h3>

<p>It is a wrapper for running APSIM-X and evaluating different parameters values
</p>
<p>Summary computes variance-based sensitivity indexes from an object of class &lsquo;sens_apsim&rsquo;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sens_apsimx(
  file,
  src.dir = ".",
  parm.paths,
  convert,
  replacement,
  grid,
  summary = c("mean", "max", "var", "sd", "none"),
  root,
  verbose = TRUE,
  cores = 1L,
  save = FALSE,
  ...
)

## S3 method for class 'sens_apsim'
summary(object, ..., scale = FALSE, select = "all", warning = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sens_apsimx_+3A_file">file</code></td>
<td>
<p>file name to be run (the extension .apsimx is optional)</p>
</td></tr>
<tr><td><code id="sens_apsimx_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .apsimx file to be run (defaults to the current directory)</p>
</td></tr>
<tr><td><code id="sens_apsimx_+3A_parm.paths">parm.paths</code></td>
<td>
<p>absolute or relative paths of the coefficients to be evaluated. 
It is recommended that you use <code><a href="#topic+inspect_apsimx">inspect_apsimx</a></code> for this</p>
</td></tr>
<tr><td><code id="sens_apsimx_+3A_convert">convert</code></td>
<td>
<p>(logical) This argument is needed if there is a need to pass a vector instead of a single value.
The vector can be passed as a character string (separated by spaces) and it will be converted to a 
numeric vector. It should be either TRUE or FALSE for each parameter.</p>
</td></tr>
<tr><td><code id="sens_apsimx_+3A_replacement">replacement</code></td>
<td>
<p>TRUE or FALSE for each parameter. Indicating whether it is part of 
the &lsquo;replacement&rsquo; component. Its length should be equal to the length or &lsquo;parm.paths&rsquo;.</p>
</td></tr>
<tr><td><code id="sens_apsimx_+3A_grid">grid</code></td>
<td>
<p>grid of parameter values for the evaluation. It can be a data.frame.</p>
</td></tr>
<tr><td><code id="sens_apsimx_+3A_summary">summary</code></td>
<td>
<p>function name to use to summarize the output to be a sinlge row (default is the mean).</p>
</td></tr>
<tr><td><code id="sens_apsimx_+3A_root">root</code></td>
<td>
<p>root argument for <code><a href="#topic+edit_apsimx_replacement">edit_apsimx_replacement</a></code></p>
</td></tr>
<tr><td><code id="sens_apsimx_+3A_verbose">verbose</code></td>
<td>
<p>whether to print progress in percent and elapsed time.</p>
</td></tr>
<tr><td><code id="sens_apsimx_+3A_cores">cores</code></td>
<td>
<p>number of cores to use for parallel evaluation</p>
</td></tr>
<tr><td><code id="sens_apsimx_+3A_save">save</code></td>
<td>
<p>whether to save intermediate results. By default they will be saved as a
&lsquo;csv&rsquo; file using the name of the apsim file. This will replace &lsquo;apsimx&rsquo; with &lsquo;csv&rsquo;.
It is also possible to provide the file name here (for example: &lsquo;Some_results.csv&rsquo;).</p>
</td></tr>
<tr><td><code id="sens_apsimx_+3A_...">...</code></td>
<td>
<p>additional arguments (none used at the moment)</p>
</td></tr>
<tr><td><code id="sens_apsimx_+3A_object">object</code></td>
<td>
<p>object of class &lsquo;sens_apsim&rsquo;</p>
</td></tr>
<tr><td><code id="sens_apsimx_+3A_scale">scale</code></td>
<td>
<p>if all inputs are numeric it is better to scale them. The
default is FALSE as some inputs might be characters or factors. In this
case all inputs will be treated as factors in the sum of squares decomposition.</p>
</td></tr>
<tr><td><code id="sens_apsimx_+3A_select">select</code></td>
<td>
<p>option for selecting specific variables in the APSIM output. It will be treated as a regular expression</p>
</td></tr>
<tr><td><code id="sens_apsimx_+3A_warning">warning</code></td>
<td>
<p>whether to issue a warning when applying this function to an object which has not been summarized</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Suggested reading on the topic of sensitivity analysis:
</p>
<p>Pianosa et al (2016). Sensitivity analysis of environmental models: A systematic review with practical workflow.
<a href="https://doi.org/10.1016/j.envsoft.2016.02.008">doi:10.1016/j.envsoft.2016.02.008</a>
</p>
<p>Saltelli et al. . Global Sensitivity Analysis.
</p>


<h3>Value</h3>

<p>object of class &lsquo;sens_apsim&rsquo;, but really just a list with results from the evaluations.
</p>
<p>prints to console
</p>


<h3>Note</h3>

<p>The summary function is stored as an attribute of the data frame &lsquo;grid.sims&rsquo;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## See the vignette for examples


</code></pre>

<hr>
<h2 id='soilorganicmatter_parms'>Helper function to supply additional Soil Organic Matter parameters</h2><span id='topic+soilorganicmatter_parms'></span>

<h3>Description</h3>

<p>Creates a list with specific components for the Soil Organic Matter module
</p>


<h3>Usage</h3>

<pre><code class='language-R'>soilorganicmatter_parms(
  RootCN = NA,
  RootWt = NA,
  EnrACoeff = NA,
  EnrBCoeff = NA,
  OCUnits = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="soilorganicmatter_parms_+3A_rootcn">RootCN</code></td>
<td>
<p>Root Carbon:Nitrogen ratio (see APSIM documentation)</p>
</td></tr>
<tr><td><code id="soilorganicmatter_parms_+3A_rootwt">RootWt</code></td>
<td>
<p>Root weight (see APSIM documentation)</p>
</td></tr>
<tr><td><code id="soilorganicmatter_parms_+3A_enracoeff">EnrACoeff</code></td>
<td>
<p>(see APSIM documentation)</p>
</td></tr>
<tr><td><code id="soilorganicmatter_parms_+3A_enrbcoeff">EnrBCoeff</code></td>
<td>
<p>(see APSIM documentation)</p>
</td></tr>
<tr><td><code id="soilorganicmatter_parms_+3A_ocunits">OCUnits</code></td>
<td>
<p>Organic Carbon Units</p>
</td></tr>
</table>

<hr>
<h2 id='soilwat_parms'>Helper function to supply SoilWat parameters</h2><span id='topic+soilwat_parms'></span>

<h3>Description</h3>

<p>Creates a list with specific components for the SoilWat model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>soilwat_parms(
  SummerCona = NA,
  SummerU = NA,
  SummerDate = NA,
  WinterCona = NA,
  WinterU = NA,
  WinterDate = NA,
  DiffusConst = NA,
  DiffusSlope = NA,
  Salb = NA,
  CN2Bare = NA,
  CNRed = NA,
  CNCov = NA,
  Slope = NA,
  DischargeWidth = NA,
  CatchmentArea = NA,
  MaxPond = NA,
  SWCON = NA,
  Thickness = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="soilwat_parms_+3A_summercona">SummerCona</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="soilwat_parms_+3A_summeru">SummerU</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="soilwat_parms_+3A_summerdate">SummerDate</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="soilwat_parms_+3A_wintercona">WinterCona</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="soilwat_parms_+3A_winteru">WinterU</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="soilwat_parms_+3A_winterdate">WinterDate</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="soilwat_parms_+3A_diffusconst">DiffusConst</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="soilwat_parms_+3A_diffusslope">DiffusSlope</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="soilwat_parms_+3A_salb">Salb</code></td>
<td>
<p>soil albedo (see APSIM documentation)</p>
</td></tr>
<tr><td><code id="soilwat_parms_+3A_cn2bare">CN2Bare</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="soilwat_parms_+3A_cnred">CNRed</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="soilwat_parms_+3A_cncov">CNCov</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="soilwat_parms_+3A_slope">Slope</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="soilwat_parms_+3A_dischargewidth">DischargeWidth</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="soilwat_parms_+3A_catchmentarea">CatchmentArea</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="soilwat_parms_+3A_maxpond">MaxPond</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="soilwat_parms_+3A_swcon">SWCON</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="soilwat_parms_+3A_thickness">Thickness</code></td>
<td>
<p>provide the corresponding thickness layer</p>
</td></tr>
</table>


<h3>Details</h3>

<p>current documentation for APSIM 7.10 <a href="https://www.apsim.info/documentation/model-documentation/soil-modules-documentation/soilwat/">https://www.apsim.info/documentation/model-documentation/soil-modules-documentation/soilwat/</a>
</p>


<h3>Value</h3>

<p>a &lsquo;list&rsquo; with class &lsquo;soilwat_parms&rsquo;
</p>

<hr>
<h2 id='ssurgo2sp'>Take in <abbr><span class="acronym">SSURGO</span></abbr> csv files and create a soil profile</h2><span id='topic+ssurgo2sp'></span>

<h3>Description</h3>

<p>Utility function to convert <abbr><span class="acronym">SSURGO</span></abbr> data to soil profile
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ssurgo2sp(
  mapunit = NULL,
  component = NULL,
  chorizon = NULL,
  mapunit.shp = NULL,
  nmapunit = 1,
  nsoil = 1,
  xout = NULL,
  soil.bottom = 200,
  method = c("constant", "linear"),
  nlayers = 10,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ssurgo2sp_+3A_mapunit">mapunit</code></td>
<td>
<p>mapunit <abbr><span class="acronym">SSURGO</span></abbr> file</p>
</td></tr>
<tr><td><code id="ssurgo2sp_+3A_component">component</code></td>
<td>
<p>component <abbr><span class="acronym">SSURGO</span></abbr> file</p>
</td></tr>
<tr><td><code id="ssurgo2sp_+3A_chorizon">chorizon</code></td>
<td>
<p>chorizon <abbr><span class="acronym">SSURGO</span></abbr> file</p>
</td></tr>
<tr><td><code id="ssurgo2sp_+3A_mapunit.shp">mapunit.shp</code></td>
<td>
<p>mapunit shapefile for creating metadata</p>
</td></tr>
<tr><td><code id="ssurgo2sp_+3A_nmapunit">nmapunit</code></td>
<td>
<p>number of mapunits to select</p>
</td></tr>
<tr><td><code id="ssurgo2sp_+3A_nsoil">nsoil</code></td>
<td>
<p>number of soil components (within a mapunit) to consider</p>
</td></tr>
<tr><td><code id="ssurgo2sp_+3A_xout">xout</code></td>
<td>
<p>vector for interpolation and extrapolation</p>
</td></tr>
<tr><td><code id="ssurgo2sp_+3A_soil.bottom">soil.bottom</code></td>
<td>
<p>bottom of the soil profile</p>
</td></tr>
<tr><td><code id="ssurgo2sp_+3A_method">method</code></td>
<td>
<p>method used for interpolation (see <code><a href="stats.html#topic+approx">approx</a></code>)</p>
</td></tr>
<tr><td><code id="ssurgo2sp_+3A_nlayers">nlayers</code></td>
<td>
<p>number of soil layers to generate</p>
</td></tr>
<tr><td><code id="ssurgo2sp_+3A_verbose">verbose</code></td>
<td>
<p>whether to print details of the process</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Some of the conversions use pedotrasnfer equations from Saxton and Rawls.
Soil Water Characteristic Estimates by Texture and Organic Matter for Hydrologic Solutions.
Soil Sci. Soc. Am. J. 70:15691578 (2006).
</p>
<p>Download the data from <abbr><span class="acronym">SSURGO</span></abbr> using the &lsquo;FedData&rsquo; package <br />
This will generate csv files &lsquo;chorizon&rsquo;, &lsquo;component&rsquo; and &lsquo;mapunit&rsquo;, <br />
but also many other files which are not needed for creating a soil profile.
</p>


<h3>Value</h3>

<p>a list with soil profile matrices with length equal to nsoil
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
require(ggplot2)
require(sf)
extd.dir &lt;- system.file("extdata", package = "apsimx")

chorizon &lt;- read.csv(paste0(extd.dir,"/ISUAG/SSURGO/ISUAG_SSURGO_chorizon.csv"))
component &lt;- read.csv(paste0(extd.dir,"/ISUAG/SSURGO/ISUAG_SSURGO_component.csv"))
mapunit &lt;- read.csv(paste0(extd.dir,"/ISUAG/SSURGO/ISUAG_SSURGO_mapunit.csv"))
mapunit.shp &lt;- st_read(paste0(extd.dir,"/ISUAG/SSURGO/ISUAG_SSURGO_Mapunits.shp"), quiet = TRUE)

## Using default 'constant' method
sp.c &lt;- ssurgo2sp(mapunit = mapunit, 
                 component = component, 
                 chorizon = chorizon, 
                 mapunit.shp = mapunit.shp)

sp.c &lt;- sp.c[[1]]

ggplot(data = sp.c, aes(y = -Depth, x = Carbon)) + 
geom_point() + 
  geom_path() + 
  ylab("Soil Depth (cm)") + xlab("Organic Matter (percent)") +
  ggtitle("method = constant")
  
  
## Using 'linear' method
sp.l &lt;- ssurgo2sp(mapunit = mapunit, 
                 component = component, 
                 chorizon = chorizon, 
                 mapunit.shp = mapunit.shp,
                 method = "linear")
                 
sp.l &lt;- sp.l[[1]]
                 
ggplot(data = sp.l, aes(y = -Depth, x = Carbon)) + 
geom_point() + 
  geom_path() + 
  ylab("Soil Depth (cm)") + xlab("Organic Matter (percent)") +
  ggtitle("Method linear")


## Not run: 
## Method using get_ssurgo_tables

require(soilDB)
require(sp)
require(sf)
require(spData)
## retrieve data from lon -93, lat = 42
stbls &lt;- get_ssurgo_tables(lonlat = c(-93, 42))

sp2.c &lt;- ssurgo2sp(mapunit = stbls$mapunit, 
                 component = stbls$component, 
                 chorizon = stbls$chorizon, 
                 mapunit.shp = stbls$mapunit.shp)  
names(sp2.c)

metadata &lt;- attributes(sp2.c[[1]])
metadata$names &lt;- NULL; metadata$class &lt;- NULL; metadata$row.names &lt;- NULL

## Convert to an APSIM soil profile
asp2.c &lt;- apsimx_soil_profile(nlayers = 10,
                              Thickness = sp2.c[[1]]$Thickness * 10,
                              BD = sp2.c[[1]]$BD,
                              AirDry = sp2.c[[1]]$AirDry,
                              LL15 = sp2.c[[1]]$LL15,
                              DUL = sp2.c[[1]]$DUL,
                              SAT = sp2.c[[1]]$SAT,
                              KS = sp2.c[[1]]$KS,
                              Carbon = sp2.c[[1]]$Carbon,
                              PH = sp2.c[[1]]$PH,
                              ParticleSizeClay = sp2.c[[1]]$ParticleSizeClay,
                              ParticleSizeSilt = sp2.c[[1]]$ParticleSizeSilt,
                              ParticleSizeSand = sp2.c[[1]]$ParticleSizeSand,
                              metadata = metadata)
                              
plot(asp2.c)
plot(asp2.c, property = "water")


## End(Not run)
</code></pre>

<hr>
<h2 id='summary.met'>Summary for an APSIM met file</h2><span id='topic+summary.met'></span>

<h3>Description</h3>

<p>Create a data.frame summarizing an object of class &lsquo;met&rsquo;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'met'
summary(
  object,
  ...,
  years,
  months,
  days,
  julian.days,
  compute.frost = FALSE,
  frost.temperature = 0,
  check = FALSE,
  verbose = FALSE,
  na.rm = FALSE,
  digits = 2
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.met_+3A_object">object</code></td>
<td>
<p>object of class &lsquo;met&rsquo;</p>
</td></tr>
<tr><td><code id="summary.met_+3A_...">...</code></td>
<td>
<p>optional argument (none used at the momemt)</p>
</td></tr>
<tr><td><code id="summary.met_+3A_years">years</code></td>
<td>
<p>optional argument to subset years</p>
</td></tr>
<tr><td><code id="summary.met_+3A_months">months</code></td>
<td>
<p>optional argument to subset by months. If an integer, it should
be between 1 and 12. If a character, it can be in the format, for example, 
&lsquo;jan&rsquo; or &lsquo;Jan&rsquo;.</p>
</td></tr>
<tr><td><code id="summary.met_+3A_days">days</code></td>
<td>
<p>optional argument to subset by days. It should be an integer
between 1 and 31.</p>
</td></tr>
<tr><td><code id="summary.met_+3A_julian.days">julian.days</code></td>
<td>
<p>optional argument to subset by julian days. It
should be a vector of integers between 1 and 365. Either use &lsquo;days&rsquo; or
&lsquo;julian.days&rsquo; but not both.</p>
</td></tr>
<tr><td><code id="summary.met_+3A_compute.frost">compute.frost</code></td>
<td>
<p>logical (default FALSE). Whether to compute
frost statistics.</p>
</td></tr>
<tr><td><code id="summary.met_+3A_frost.temperature">frost.temperature</code></td>
<td>
<p>value to use for the calculation of the frost 
period (default is zero).</p>
</td></tr>
<tr><td><code id="summary.met_+3A_check">check</code></td>
<td>
<p>logical (default FALSE). Whether to &lsquo;check&rsquo; the &lsquo;met&rsquo; object.</p>
</td></tr>
<tr><td><code id="summary.met_+3A_verbose">verbose</code></td>
<td>
<p>whether to print additional infomation to the console</p>
</td></tr>
<tr><td><code id="summary.met_+3A_na.rm">na.rm</code></td>
<td>
<p>whether to remove missing values. Passed to &lsquo;aggregate&rsquo;</p>
</td></tr>
<tr><td><code id="summary.met_+3A_digits">digits</code></td>
<td>
<p>digits for rounding (default is 2).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The frost free period is computed by first spliting each year (or year interval)
in two halves. The first and last frosts in the first and second period are found.
For the Northern hemisphere calendar days are used (1-365).
For the Southern hemisphere the year is split in two halfs, but the second half of
the year is used as the first part of the growing season.
If frost is not found a zero is returned.
</p>


<h3>Value</h3>

<p>an object of class &lsquo;data.frame&rsquo; with attributes
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
extd.dir &lt;- system.file("extdata", package = "apsimx")
ames &lt;- read_apsim_met("Ames.met", src.dir = extd.dir)

summary(ames, years = 2014:2016)

</code></pre>

<hr>
<h2 id='swim_parms'>Helper function to supply SWIM parameters</h2><span id='topic+swim_parms'></span>

<h3>Description</h3>

<p>Creates a list with specific components for the SWIM model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>swim_parms(
  Salb = NA,
  CN2Bare = NA,
  CNRed = NA,
  CNCov = NA,
  KDul = NA,
  PSIDul = NA,
  VC = NA,
  DTmin = NA,
  DTmax = NA,
  MaxWaterIncrement = NA,
  SpaceWeightingFactor = NA,
  SoluteSpaceWeightingFactor = NA,
  Diagnostics = NA,
  SwimWaterTable_WaterTableDepth = NA,
  SwimSubsurfaceDrain_DrainDepth = NA,
  SwimSubsurfaceDrain_DrainSpacing = NA,
  SwimSubsurfaceDrain_DrainRadius = NA,
  SwimSubsurfaceDrain_Klat = NA,
  SwimSubsurfaceDrain_ImpermDepth = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="swim_parms_+3A_salb">Salb</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="swim_parms_+3A_cn2bare">CN2Bare</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="swim_parms_+3A_cnred">CNRed</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="swim_parms_+3A_cncov">CNCov</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="swim_parms_+3A_kdul">KDul</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="swim_parms_+3A_psidul">PSIDul</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="swim_parms_+3A_vc">VC</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="swim_parms_+3A_dtmin">DTmin</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="swim_parms_+3A_dtmax">DTmax</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="swim_parms_+3A_maxwaterincrement">MaxWaterIncrement</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="swim_parms_+3A_spaceweightingfactor">SpaceWeightingFactor</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="swim_parms_+3A_solutespaceweightingfactor">SoluteSpaceWeightingFactor</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="swim_parms_+3A_diagnostics">Diagnostics</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="swim_parms_+3A_swimwatertable_watertabledepth">SwimWaterTable_WaterTableDepth</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="swim_parms_+3A_swimsubsurfacedrain_draindepth">SwimSubsurfaceDrain_DrainDepth</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="swim_parms_+3A_swimsubsurfacedrain_drainspacing">SwimSubsurfaceDrain_DrainSpacing</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="swim_parms_+3A_swimsubsurfacedrain_drainradius">SwimSubsurfaceDrain_DrainRadius</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="swim_parms_+3A_swimsubsurfacedrain_klat">SwimSubsurfaceDrain_Klat</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
<tr><td><code id="swim_parms_+3A_swimsubsurfacedrain_impermdepth">SwimSubsurfaceDrain_ImpermDepth</code></td>
<td>
<p>see APSIM documentation</p>
</td></tr>
</table>


<h3>Details</h3>

<p>current documentation for APSIM 7.10 <a href="https://www.apsim.info/documentation/model-documentation/soil-modules-documentation/swim3/">https://www.apsim.info/documentation/model-documentation/soil-modules-documentation/swim3/</a>
</p>


<h3>Value</h3>

<p>a &lsquo;list&rsquo; with class &lsquo;swim_parms&rsquo;
</p>

<hr>
<h2 id='tt_apsim_met'>Calculates Thermal Time taking a &lsquo;met&rsquo; object</h2><span id='topic+tt_apsim_met'></span>

<h3>Description</h3>

<p>Calculates Thermal Time using the &lsquo;Classic&rsquo; formula, 
Heat Stress, Crop Heat Unit and other methods
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tt_apsim_met(
  met,
  dates,
  method = c("Classic_TT", "HeatStress_TT", "CropHeatUnit_TT", "APSIM_TT", "CERES_TT",
    "all"),
  x_temp = c(0, 26, 34),
  y_tt = c(0, 26, 0),
  base_temp = 0,
  max_temp = 30,
  dates.format = c("%d-%m")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tt_apsim_met_+3A_met">met</code></td>
<td>
<p>object of class &lsquo;met&rsquo;</p>
</td></tr>
<tr><td><code id="tt_apsim_met_+3A_dates">dates</code></td>
<td>
<p>when the calculation starts and when it ends. At the moment
it needs to be a character vector (e.g. c(&lsquo;01-05&rsquo;, &lsquo;10-10&rsquo;)). It will
use the same dates every year for multiple years.</p>
</td></tr>
<tr><td><code id="tt_apsim_met_+3A_method">method</code></td>
<td>
<p>one of &lsquo;Classic_TT&rsquo;, &lsquo;HeatStress_TT&rsquo;, &lsquo;ASPIM_TT&rsquo;,
&lsquo;CERES_TT&rsquo; and &lsquo;all&rsquo;</p>
</td></tr>
<tr><td><code id="tt_apsim_met_+3A_x_temp">x_temp</code></td>
<td>
<p>cardinal temperatures (base, optimal and maximum)</p>
</td></tr>
<tr><td><code id="tt_apsim_met_+3A_y_tt">y_tt</code></td>
<td>
<p>thermal time accumulation for cardinal temperatures</p>
</td></tr>
<tr><td><code id="tt_apsim_met_+3A_base_temp">base_temp</code></td>
<td>
<p>base temperature for Classic TT calculation</p>
</td></tr>
<tr><td><code id="tt_apsim_met_+3A_max_temp">max_temp</code></td>
<td>
<p>maximum temperature for Classic TT calculation</p>
</td></tr>
<tr><td><code id="tt_apsim_met_+3A_dates.format">dates.format</code></td>
<td>
<p>default is &lsquo;%d-%m&rsquo; which means day and month</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calculating Thermal Time using a variety of methods.
The function will fail if the method is not selected.
Also, it does not work if each year does not have at least
365 days.
</p>


<h3>Value</h3>

<p>it returns an object of class &lsquo;met&rsquo; with additional columns
&lsquo;Date&rsquo; and the corresponding TT calculation
</p>


<h3>References</h3>

<p>Abendroth, L.J., Miguez, F.E., Castellano, M.J. and Hatfield, J.L. (2019),
Climate Warming Trends in the U.S. Midwest Using Four Thermal Models. 
Agron. J., 111: 3230-3243. (doi:10.2134/agronj2019.02.0118)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
require(nasapower)
require(ggplot2)

pwr &lt;- get_power_apsim_met(lonlat = c(-93,42), dates = c("2012-01-01","2015-12-31"))
check_apsim_met(pwr)
pwr &lt;- impute_apsim_met(pwr)

pwr2 &lt;- tt_apsim_met(pwr, dates = c("01-05", "30-10"), method = c("Classic", "Heat"))

ggplot(data = pwr2, aes(x = Date, y = Classic_TT)) + geom_point()

ggplot(data = pwr2, aes(x = Date, y = HeatStress_TT)) + geom_point()


## End(Not run)
</code></pre>

<hr>
<h2 id='unit_conv'>performs common unit conversions</h2><span id='topic+unit_conv'></span>

<h3>Description</h3>

<p>This function is slowly getting better. Adding more unit conversions as I need them.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unit_conv(x, from, to, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="unit_conv_+3A_x">x</code></td>
<td>
<p>input variable</p>
</td></tr>
<tr><td><code id="unit_conv_+3A_from">from</code></td>
<td>
<p>original units</p>
</td></tr>
<tr><td><code id="unit_conv_+3A_to">to</code></td>
<td>
<p>target units</p>
</td></tr>
<tr><td><code id="unit_conv_+3A_...">...</code></td>
<td>
<p>additional arguments passed to specific conversions</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Function which performs common unit conversions
</p>
<p>At the moment possible conversions are:
</p>

<ul>
<li> <p>&lsquo;g/m2&rsquo; to &lsquo;kg/ha&rsquo;
</p>
</li>
<li> <p>&lsquo;kg/ha&rsquo; to &lsquo;g/m2&rsquo;
</p>
</li>
<li> <p>&lsquo;lb&rsquo; to &lsquo;kg&rsquo;
</p>
</li>
<li> <p>&lsquo;kg&rsquo; to &lsquo;lb&rsquo;
</p>
</li>
<li> <p>&lsquo;maize bu&rsquo; to &lsquo;kg&rsquo;
</p>
</li>
<li> <p>&lsquo;kg&rsquo; to &lsquo;maize bu&rsquo;
</p>
</li>
<li> <p>&lsquo;soy bu&rsquo; to &lsquo;kg&rsquo;
</p>
</li>
<li> <p>&lsquo;kg&rsquo; to &lsquo;soy bu&rsquo;
</p>
</li>
<li> <p>&lsquo;maize bu/ac&rsquo; to &lsquo;kg/ha&rsquo;
</p>
</li>
<li> <p>&lsquo;maize bu/ac&rsquo; to &lsquo;g/m2&rsquo;
</p>
</li>
<li> <p>&lsquo;kg/ha&rsquo; to &lsquo;maize bu/ac&rsquo;
</p>
</li>
<li> <p>&lsquo;g/m2&rsquo; to &lsquo;maize bu/ac&rsquo;
</p>
</li>
<li> <p>&lsquo;soy bu/ac&rsquo; to &lsquo;kg/ha&rsquo;
</p>
</li>
<li> <p>&lsquo;soy bu/ac&rsquo; to &lsquo;g/m2&rsquo;
</p>
</li>
<li> <p>&lsquo;kg/ha&rsquo; to &lsquo;soy bu/ac&rsquo;
</p>
</li>
<li> <p>&lsquo;g/m2&rsquo; to &lsquo;soy bu/ac&rsquo;
</p>
</li>
<li> <p>&lsquo;mm&rsquo; to &lsquo;inches&rsquo;
</p>
</li>
<li> <p>&lsquo;inches&rsquo; to &lsquo;mm&rsquo;
</p>
</li>
<li> <p>&lsquo;lb/ac&rsquo; to &lsquo;kg/ha&rsquo;
</p>
</li>
<li> <p>&lsquo;kg/ha&rsquo; to &lsquo;lb/ac&rsquo;
</p>
</li>
<li> <p>&lsquo;lb/ac&rsquo; to &lsquo;g/m2&rsquo;
</p>
</li>
<li> <p>&lsquo;g/m2&rsquo; to &lsquo;lb/ac&rsquo;
</p>
</li>
<li> <p>&lsquo;decimal&rsquo; to &lsquo;degrees&rsquo;
</p>
</li>
<li> <p>&lsquo;degrees&rsquo; to &lsquo;decimal&rsquo;
</p>
</li>
<li> <p>&lsquo;Fahrenheit&rsquo; to &lsquo;Celsius&rsquo;
</p>
</li>
<li> <p>&lsquo;Celsius&rsquo; to &lsquo;Fahrenheit&rsquo; 
</p>
</li></ul>

<p>This is for metric and Imperial conversions
Source: https://www.extension.iastate.edu/agdm/wholefarm/html/c6-80.html
</p>


<h3>Value</h3>

<p>value of the input variable with new units
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
grain.yield.gm2 &lt;- 600
grain.yield.kgha &lt;- unit_conv(grain.yield.gm2, from = "g/m2", to = "kg/ha")
grain.yield.kgha
## Converting coordinates
require(sp)
unit_conv("42d 0' 0\" N", from = "degrees", to = "decimal")
unit_conv(42, from = "decimal", to = "degrees") ## EW by default
unit_conv(42, from = "decimal", to = "degrees", NS = TRUE)


</code></pre>

<hr>
<h2 id='view_apsim'>Viewing an APSIM Classic file interactively</h2><span id='topic+view_apsim'></span>

<h3>Description</h3>

<p>Generate an interactive viewer for an APSIM file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>view_apsim(file, src.dir, viewer = c("json", "react"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="view_apsim_+3A_file">file</code></td>
<td>
<p>a file ending in .apsim to be inspected (XML)</p>
</td></tr>
<tr><td><code id="view_apsim_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .apsim file to be inspected; defaults to the current working directory</p>
</td></tr>
<tr><td><code id="view_apsim_+3A_viewer">viewer</code></td>
<td>
<p>either &ldquo;json&rdquo; or &ldquo;react&rdquo;.</p>
</td></tr>
<tr><td><code id="view_apsim_+3A_...">...</code></td>
<td>
<p>additional arguments passed to either &lsquo;jsonedit&rsquo; or &lsquo;reactjson&rsquo;.
These are functions in package <a href="https://CRAN.R-project.org/package=listviewer"><span class="pkg">listviewer</span></a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a display with the APSIM file structure.
</p>


<h3>Note</h3>

<p>I do not know how to edit an APSIM file using this method yet.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
extd.dir &lt;- system.file("extdata", package = "apsimx")
## View the structure of the APSIM-X simulation file
view_apsim("Millet.apsim", src.dir = extd.dir)


</code></pre>

<hr>
<h2 id='view_apsim_xml'>View an APSIM Classic auxiliary (XML) file</h2><span id='topic+view_apsim_xml'></span>

<h3>Description</h3>

<p>view an auxilliary XML apsim file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>view_apsim_xml(file, src.dir, viewer = c("json", "react"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="view_apsim_xml_+3A_file">file</code></td>
<td>
<p>file ending in .xml to be viewed.</p>
</td></tr>
<tr><td><code id="view_apsim_xml_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .xml file to be viewed; defaults to the current working directory</p>
</td></tr>
<tr><td><code id="view_apsim_xml_+3A_viewer">viewer</code></td>
<td>
<p>either &ldquo;json&rdquo; or &ldquo;react&rdquo;.</p>
</td></tr>
<tr><td><code id="view_apsim_xml_+3A_...">...</code></td>
<td>
<p>additional arguments passed to either &lsquo;jsonedit&rsquo; or &lsquo;reactjson&rsquo;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>view APSIM XML file
</p>


<h3>Value</h3>

<p>It does not return an object but it produces a tree display of the APSIM file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> 

extd.dir &lt;- system.file("extdata", package = "apsimx")
view_apsim_xml("Maize75.xml", src.dir = extd.dir)


</code></pre>

<hr>
<h2 id='view_apsimx'>Viewing an APSIM-X file interactively</h2><span id='topic+view_apsimx'></span>

<h3>Description</h3>

<p>Generate an interactive viewer for an APSIM-X file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>view_apsimx(file, src.dir, viewer = c("json", "react"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="view_apsimx_+3A_file">file</code></td>
<td>
<p>a file ending in .apsimx to be inspected (JSON)</p>
</td></tr>
<tr><td><code id="view_apsimx_+3A_src.dir">src.dir</code></td>
<td>
<p>directory containing the .apsimx file to be inspected; defaults to the current working directory</p>
</td></tr>
<tr><td><code id="view_apsimx_+3A_viewer">viewer</code></td>
<td>
<p>either &ldquo;json&rdquo; or &ldquo;react&rdquo;.</p>
</td></tr>
<tr><td><code id="view_apsimx_+3A_...">...</code></td>
<td>
<p>additional arguments passed to either &lsquo;jsonedit&rsquo; or &lsquo;reactjson&rsquo;.
These are functions in package <a href="https://CRAN.R-project.org/package=listviewer"><span class="pkg">listviewer</span></a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a display with the APSIM file structure.
</p>


<h3>Note</h3>

<p>I do not know how to edit an APSIM-X file using this method yet.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
extd.dir &lt;- system.file("extdata", package = "apsimx")
## View the structure of the APSIM-X simulation file
view_apsimx("Wheat.apsimx", src.dir = extd.dir)


</code></pre>

<hr>
<h2 id='wop'>Wheat example optimization results</h2><span id='topic+wop'></span>

<h3>Description</h3>

<p>Results from Wheat optimization example
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wop
</code></pre>


<h3>Format</h3>

<p>An object of class 'optim_apsim' 
</p>

<dl>
<dt> wop </dt><dd><p> wheat optimization results </p>
</dd>
</dl>



<h3>Source</h3>

<p>Result of running the examples in Parameter Optimization vignette
</p>

<hr>
<h2 id='wop.h'>Wheat example optimization results plus Hessian</h2><span id='topic+wop.h'></span>

<h3>Description</h3>

<p>Results from Wheat optimization example plus the Hessian
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wop.h
</code></pre>


<h3>Format</h3>

<p>An object of class 'optim_apsim' 
</p>

<dl>
<dt> wop.h </dt><dd><p> wheat optimization results plus Hessian</p>
</dd>
</dl>



<h3>Source</h3>

<p>Result of running the examples in Parameter Optimization vignette with the added Hessian
</p>

<hr>
<h2 id='write_apsim_met'>Write an APSIM met file</h2><span id='topic+write_apsim_met'></span>

<h3>Description</h3>

<p>Write an object of class &lsquo;met&rsquo; to disk
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_apsim_met(met, wrt.dir = NULL, filename = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_apsim_met_+3A_met">met</code></td>
<td>
<p>object of class &lsquo;met&rsquo;</p>
</td></tr>
<tr><td><code id="write_apsim_met_+3A_wrt.dir">wrt.dir</code></td>
<td>
<p>directory where the file will be written</p>
</td></tr>
<tr><td><code id="write_apsim_met_+3A_filename">filename</code></td>
<td>
<p>optional alternative filename</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Write a met file to disk. It takes an object of class &lsquo;met&rsquo;
</p>
<p>at the moment the read-write cycle will strip comments
</p>


<h3>Value</h3>

<p>does not create an R object, it only writes to disk
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
extd.dir &lt;- system.file("extdata", package = "apsimx")
ames.met &lt;- read_apsim_met("Ames.met", src.dir = extd.dir)
ames.met
tmp.dir &lt;- tempdir()
write_apsim_met(ames.met, wrt.dir = tmp.dir, filename = "Ames.met")
## Here I write to a temporary directory, but change this to where
## you want to write to


</code></pre>

<hr>
<h2 id='xargs_apsimx'>Provide extra arguments for APSIM-X</h2><span id='topic+xargs_apsimx'></span>

<h3>Description</h3>

<p>This provides additinoal command line arguments when running the model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xargs_apsimx(
  verbose = FALSE,
  csv = FALSE,
  merge.db.files = FALSE,
  list.simulations = FALSE,
  list.referenced.filenames = FALSE,
  single.threaded = FALSE,
  cpu.count = -1L,
  simulation.names = FALSE,
  dotnet = FALSE,
  mono = FALSE,
  exe.path = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="xargs_apsimx_+3A_verbose">verbose</code></td>
<td>
<p>Write detailed messages to stdout when a simulation starts/finishes.</p>
</td></tr>
<tr><td><code id="xargs_apsimx_+3A_csv">csv</code></td>
<td>
<p>Export all reports to .csv files.</p>
</td></tr>
<tr><td><code id="xargs_apsimx_+3A_merge.db.files">merge.db.files</code></td>
<td>
<p>Merge multiple .db files into a single .db file.</p>
</td></tr>
<tr><td><code id="xargs_apsimx_+3A_list.simulations">list.simulations</code></td>
<td>
<p>List simulation names without running them.</p>
</td></tr>
<tr><td><code id="xargs_apsimx_+3A_list.referenced.filenames">list.referenced.filenames</code></td>
<td>
<p>List all files that are referenced by an .apsimx file(s).</p>
</td></tr>
<tr><td><code id="xargs_apsimx_+3A_single.threaded">single.threaded</code></td>
<td>
<p>Run all simulations sequentially on a single thread.</p>
</td></tr>
<tr><td><code id="xargs_apsimx_+3A_cpu.count">cpu.count</code></td>
<td>
<p>(Default: -1) Maximum number of threads/processes to spawn for running simulations.</p>
</td></tr>
<tr><td><code id="xargs_apsimx_+3A_simulation.names">simulation.names</code></td>
<td>
<p>Only run simulations if their names match this regular expression.</p>
</td></tr>
<tr><td><code id="xargs_apsimx_+3A_dotnet">dotnet</code></td>
<td>
<p>Logical. There is a global option for this argument, but this will override it. This 
can be useful if the goal is to compare an old version of Next Gen (before Sept 2021) with a more
recent version in the same script. This might be needed if you have your own compiled version of APSIM Next Gen.</p>
</td></tr>
<tr><td><code id="xargs_apsimx_+3A_mono">mono</code></td>
<td>
<p>Logical. Should be set to TRUE if running a version of APSIM Next Gen from Aug 2021 or older on Mac or Linux.</p>
</td></tr>
<tr><td><code id="xargs_apsimx_+3A_exe.path">exe.path</code></td>
<td>
<p>executable path. This can be useful for having both a global option through &lsquo;apsimx.options&rsquo; and
a local option that will override that. This option will take precedence.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Extra arguments for running APSIM-X
</p>


<h3>Value</h3>

<p>it returns a character vector with the extra arguments.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
