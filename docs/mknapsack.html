<!DOCTYPE html><html><head><title>Help for package mknapsack</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mknapsack}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#group_moq'><p>Collapse function for the MOQ items</p></a></li>
<li><a href='#knapsack'><p>Solves knapsack problem with the library defined</p>
in knapsack.solver option:
- cbc (default) - uses rcbc package
- lpsolve - uses lpSolve package</a></li>
<li><a href='#mknapsack'><p>Optimal packing into multiple containers</p></a></li>
<li><a href='#moq_constraint'><p>Mininum Order Quantity (MOQ) contstraint generator</p></a></li>
<li><a href='#unitsbro'><p>Real sample of item utility for BRO created in May 2017</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Multiple Knapsack Problem Solver</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Package solves multiple knapsack optimisation problem. 
    Given a set of items, each with volume and value, 
    it will allocate them to knapsacks of a given size in a way that
    value of top N knapsacks is as large as possible.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/madedotcom/mknapsack">https://github.com/madedotcom/mknapsack</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/madedotcom/mknapsack/issues">https://github.com/madedotcom/mknapsack/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, mockery, Rglpk, ROI, ROI.plugin.glpk</td>
</tr>
<tr>
<td>Imports:</td>
<td>assertthat, data.table, lpSolve</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.0.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2018-04-09 21:20:40 UTC; byapparov</td>
</tr>
<tr>
<td>Author:</td>
<td>Bulat Yapparov [aut, cre],
  MADE.com [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Bulat Yapparov &lt;bulat.yapparov@made.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2018-04-10 12:45:53 UTC</td>
</tr>
</table>
<hr>
<h2 id='group_moq'>Collapse function for the MOQ items</h2><span id='topic+group_moq'></span>

<h3>Description</h3>

<p>Combines items with MOQ greater than one to a single line that represents min amount that can be ordered
</p>


<h3>Usage</h3>

<pre><code class='language-R'>group_moq(units)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="group_moq_+3A_units">units</code></td>
<td>
<p>data.table with following fields: sku, utility, volume, moq</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.table with sku, utility, volume and units fields. first lines for each sku are grouped according to moq
</p>

<hr>
<h2 id='knapsack'>Solves knapsack problem with the library defined
in knapsack.solver option:
- cbc (default) - uses rcbc package
- lpsolve - uses lpSolve package</h2><span id='topic+knapsack'></span>

<h3>Description</h3>

<p>Solves knapsack problem with the library defined
in knapsack.solver option:
- cbc (default) - uses rcbc package
- lpsolve - uses lpSolve package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>knapsack(profit, volume, moq = rep(0, length(profit)), cap = 65)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="knapsack_+3A_profit">profit</code></td>
<td>
<p>vector with profit for item</p>
</td></tr>
<tr><td><code id="knapsack_+3A_volume">volume</code></td>
<td>
<p>vector of item sizes in cubic meters</p>
</td></tr>
<tr><td><code id="knapsack_+3A_moq">moq</code></td>
<td>
<p>vector of flags where 1 means that row contans mininum order quantity (MOQ).
Defaults to zero vector matching profit in length.</p>
</td></tr>
<tr><td><code id="knapsack_+3A_cap">cap</code></td>
<td>
<p>size of the container in cubic meters</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector with container numbers keeping the permutation of the original data
</p>

<hr>
<h2 id='mknapsack'>Optimal packing into multiple containers</h2><span id='topic+mknapsack'></span>

<h3>Description</h3>

<p>Gets containers based on the utility of individual items, their volume and container size
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mknapsack(profit, volume, moq = rep(0, length(profit)), cap = 65,
  sold = rep(0, length(profit)))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mknapsack_+3A_profit">profit</code></td>
<td>
<p>vector with profit for item</p>
</td></tr>
<tr><td><code id="mknapsack_+3A_volume">volume</code></td>
<td>
<p>vector of item sizes in cubic meters</p>
</td></tr>
<tr><td><code id="mknapsack_+3A_moq">moq</code></td>
<td>
<p>vector of flags where 1 means that row contans mininum order quantity (MOQ).
Defaults to zero vector matching profit in length.</p>
</td></tr>
<tr><td><code id="mknapsack_+3A_cap">cap</code></td>
<td>
<p>size of the container in cubic meters</p>
</td></tr>
<tr><td><code id="mknapsack_+3A_sold">sold</code></td>
<td>
<p>vector with a number of items that were sold on demand</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector with container numbers keeping the permutation of the original data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Calculate the optimal containers summary for a sample dataset
data(unitsbro)
library(data.table)
units.combined &lt;- data.table(unitsbro)
moq &lt;- units.combined$moq
profit &lt;- units.combined$utility
volume &lt;- units.combined$volume
res &lt;- mknapsack(profit, volume, moq, 65)
units.combined$container &lt;- as.factor(res)
#Aggregate solution to container
containers &lt;- units.combined[order(container), .(volume = sum(volume),
profit = sum(profit)), by = container]

</code></pre>

<hr>
<h2 id='moq_constraint'>Mininum Order Quantity (MOQ) contstraint generator</h2><span id='topic+moq_constraint'></span>

<h3>Description</h3>

<p>Creates matrix of moq constraints for the LP optimisation.
It is assumed that there is only one moq position per SKU and
data is sorted by sku, therefore SKU index can be calculated
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moq_constraint(moq)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="moq_constraint_+3A_moq">moq</code></td>
<td>
<p>flag that indicates that this position contains MOQ</p>
</td></tr>
</table>


<h3>Value</h3>

<p>matrix that expesses the MOQ constraint:
non-MOQ item cannot be put into container that does not contain MOQ item
</p>

<hr>
<h2 id='unitsbro'>Real sample of item utility for BRO created in May 2017</h2><span id='topic+unitsbro'></span>

<h3>Description</h3>

<p>Dataset contains line items with utility and volume and can be used for
exploration of the package functionality.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unitsbro
</code></pre>


<h3>Format</h3>

<p>A data frame with rows and variables
</p>

<dl>
<dt>sku</dt><dd><p>identifier for the product</p>
</dd>
<dt>utility</dt><dd><p>proxy of the profit that this item delivers to the company if purchased</p>
</dd>
<dt>volume</dt><dd><p>volume of the item, usually in cubic meters</p>
</dd>
<dt>units</dt><dd><p>number of untis that this line contains</p>
</dd>
<dt>moq</dt><dd><p>If equals one, this line contains the minimum order quantity and shoudl be ordered prior to other lines of the same sku</p>
</dd>
</dl>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
