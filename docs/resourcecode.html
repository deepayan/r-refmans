<!DOCTYPE html><html lang="en-US"><head><title>Help for package resourcecode</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {resourcecode}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#resourcecode-package'><p>resourcecode: Access to the 'RESOURCECODE' Hindcast Database</p></a></li>
<li><a href='#+25nin+25'><p>Value Matching</p></a></li>
<li><a href='#closest_point_field'><p>Find the closest point of the FIELD grid to the specified position</p></a></li>
<li><a href='#closest_point_spec'><p>Find the closest point of the SPEC grid to the specified position</p></a></li>
<li><a href='#compute_orbital_speeds'><p>Compute the orbital speed at a given depth from the wave elevation 1D spectra</p></a></li>
<li><a href='#compute_sea_state_1d_spectrum'><p>Compute sea_state parameter from wave spectrum</p></a></li>
<li><a href='#compute_sea_state_2d_spectrum'><p>Compute sea_state parameter from wave directional spectrum</p></a></li>
<li><a href='#convert_spectrum_2d1d'><p>Converts a 2D spectrum time series to a 1D spectrum</p></a></li>
<li><a href='#dispersion'><p>Compute the dispersion relation of waves</p>
Find <em>k</em> s.t. (2.pi.f)^2 = g.k.tanh(k.d)</a></li>
<li><a href='#fastTrapz'><p>Fast implementation of pracma::trapz from the Armadillo C++ library</p></a></li>
<li><a href='#get_1d_spectrum'><p>Download the 1D spectrum data from IFREMER ftp</p></a></li>
<li><a href='#get_2d_spectrum'><p>Download the 2D spectrum data from IFREMER ftp</p></a></li>
<li><a href='#get_parameters'><p>Download time series of sea-state parameters from RESOURCECODE database</p></a></li>
<li><a href='#jonswap'><p>JONWSAP spectrum</p></a></li>
<li><a href='#plot_2d_specta'><p>Plot a wave density 2D spectrum</p></a></li>
<li><a href='#rscd_dir'><p>Resourcecode directional bins</p></a></li>
<li><a href='#rscd_freq'><p>Resourcecode frequency vector of 1D and 2D spectra</p></a></li>
<li><a href='#rscd_mapplot'><p>Create a map of the provided variable on the RESOURCECODE field grid</p></a></li>
<li><a href='#zmcomp2metconv'><p>Vector conversion</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Access to the 'RESOURCECODE' Hindcast Database</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-11-29</td>
</tr>
<tr>
<td>Description:</td>
<td>Utility functions to download data from the 'RESOURCECODE'
    hindcast database of sea-states, time series of sea-state parameters
    and time series of 1D and 2D wave spectra.  See
    <a href="https://resourcecode.ifremer.fr">https://resourcecode.ifremer.fr</a> for more details about the available
    data.  Also provides facilities to plot and analyse downloaded data,
    such as computing the sea-state parameters from both the 1D and 2D
    surface elevation variance spectral density.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/Resourcecode-project/r-resourcecode">https://github.com/Resourcecode-project/r-resourcecode</a>,
<a href="https://resourcecode-project.github.io/r-resourcecode/">https://resourcecode-project.github.io/r-resourcecode/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/Resourcecode-project/r-resourcecode/issues">https://github.com/Resourcecode-project/r-resourcecode/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6)</td>
</tr>
<tr>
<td>Imports:</td>
<td>abind, curl, geosphere, ggplot2, jsonlite, ncdf4, pracma,
Rcpp, rlang, sf, stats, tibble, tidyr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, resourcecodedata, testthat, vdiffr</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, RcppArmadillo</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Additional_repositories:</td>
<td><a href="https://resourcecode-project.github.io/drat/">https://resourcecode-project.github.io/drat/</a></td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/testthat/parallel:</td>
<td>true</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-12-02 14:54:43 UTC; nraillar</td>
</tr>
<tr>
<td>Author:</td>
<td>Nicolas Raillard <a href="https://orcid.org/0000-0003-3385-5104"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Nicolas Raillard &lt;nicolas.raillard@ifremer.fr&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-12-03 19:00:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='resourcecode-package'>resourcecode: Access to the 'RESOURCECODE' Hindcast Database</h2><span id='topic+resourcecode'></span><span id='topic+resourcecode-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Utility functions to download data from the 'RESOURCECODE' hindcast database of sea-states, time series of sea-state parameters and time series of 1D and 2D wave spectra. See <a href="https://resourcecode.ifremer.fr">https://resourcecode.ifremer.fr</a> for more details about the available data. Also provides facilities to plot and analyse downloaded data, such as computing the sea-state parameters from both the 1D and 2D surface elevation variance spectral density.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Nicolas Raillard <a href="mailto:nicolas.raillard@ifremer.fr">nicolas.raillard@ifremer.fr</a> (<a href="https://orcid.org/0000-0003-3385-5104">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/Resourcecode-project/r-resourcecode">https://github.com/Resourcecode-project/r-resourcecode</a>
</p>
</li>
<li> <p><a href="https://resourcecode-project.github.io/r-resourcecode/">https://resourcecode-project.github.io/r-resourcecode/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/Resourcecode-project/r-resourcecode/issues">https://github.com/Resourcecode-project/r-resourcecode/issues</a>
</p>
</li></ul>


<hr>
<h2 id='+25nin+25'>Value Matching</h2><span id='topic++25nin+25'></span>

<h3>Description</h3>

<p>Value Matching
</p>


<h3>Usage</h3>

<pre><code class='language-R'>x %nin% table
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25nin+2B25_+3A_x">x</code></td>
<td>
<p>value to search</p>
</td></tr>
<tr><td><code id="+2B25nin+2B25_+3A_table">table</code></td>
<td>
<p>table of values</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the opposite of x %in% table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>1:10 %in% c(1, 3, 5, 9)
1:10 %nin% c(1, 3, 5, 9)
</code></pre>

<hr>
<h2 id='closest_point_field'>Find the closest point of the FIELD grid to the specified position</h2><span id='topic+closest_point_field'></span>

<h3>Description</h3>

<p>Find the closest point of the FIELD grid to the specified position
</p>


<h3>Usage</h3>

<pre><code class='language-R'>closest_point_field(x, lat = NULL, closest = 1L, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="closest_point_field_+3A_x">x</code></td>
<td>
<p>vector of coordinates in the form longitude/latitude data frame</p>
</td></tr>
<tr><td><code id="closest_point_field_+3A_lat">lat</code></td>
<td>
<p>alternatively, x and lat can be vector of the same length</p>
</td></tr>
<tr><td><code id="closest_point_field_+3A_closest">closest</code></td>
<td>
<p>an integer to specify the number of point to output.</p>
</td></tr>
<tr><td><code id="closest_point_field_+3A_...">...</code></td>
<td>
<p>currently unused</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with two components: the closest point(s) of the grid and the distance (s).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Ensure that data package is available before running the example.
#  If it is not, see the `resourcecode` package vignette for details
# on installing the required data package.
if (requireNamespace("resourcecodedata", quietly = TRUE)) {
  semrev_west &lt;- closest_point_field(c(-2.786, 47.239))
  semrev_west
  }
</code></pre>

<hr>
<h2 id='closest_point_spec'>Find the closest point of the SPEC grid to the specified position</h2><span id='topic+closest_point_spec'></span>

<h3>Description</h3>

<p>Find the closest point of the SPEC grid to the specified position
</p>


<h3>Usage</h3>

<pre><code class='language-R'>closest_point_spec(x, lat = NULL, closest = 1L, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="closest_point_spec_+3A_x">x</code></td>
<td>
<p>vector of coordinates in the form longitude/latitude data frame</p>
</td></tr>
<tr><td><code id="closest_point_spec_+3A_lat">lat</code></td>
<td>
<p>alternatively, x and lat can be vector of the same length</p>
</td></tr>
<tr><td><code id="closest_point_spec_+3A_closest">closest</code></td>
<td>
<p>an integer to specify the number of point to output.</p>
</td></tr>
<tr><td><code id="closest_point_spec_+3A_...">...</code></td>
<td>
<p>currently unused</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with two components: the closest point(s) of the grid and the distance (s).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  semrev_west &lt;- closest_point_spec(c(-2.786, 47.239))
  semrev_west

</code></pre>

<hr>
<h2 id='compute_orbital_speeds'>Compute the orbital speed at a given depth from the wave elevation 1D spectra</h2><span id='topic+compute_orbital_speeds'></span>

<h3>Description</h3>

<p>Compute the orbital speed at a given depth from the wave elevation 1D spectra
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_orbital_speeds(spec, freq, z = 0, depth = Inf, output_speeds = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_orbital_speeds_+3A_spec">spec</code></td>
<td>
<p>1D spectral data: TxM matrix</p>
</td></tr>
<tr><td><code id="compute_orbital_speeds_+3A_freq">freq</code></td>
<td>
<p>the M frequencies</p>
</td></tr>
<tr><td><code id="compute_orbital_speeds_+3A_z">z</code></td>
<td>
<p>distance above the floor at which we want the orbital speed (single numeric)</p>
</td></tr>
<tr><td><code id="compute_orbital_speeds_+3A_depth">depth</code></td>
<td>
<p>depth time series (vector length T. Recycled if a single value is given)</p>
</td></tr>
<tr><td><code id="compute_orbital_speeds_+3A_output_speeds">output_speeds</code></td>
<td>
<p>TRUE if the spectral speed are needed. Otherwise, returns the RMS (default)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>depending on spec, a list with the spectral velocities for each component
(if output_speeds==FALSE) or a data.frame with a time series of horizontal and vertical
components of (spectral) orbital speed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Compute orbital speed for varying Hs
S &lt;- t(sapply(1:10, \(h) jonswap(h)$spec))
orb_speeds &lt;- compute_orbital_speeds(S, rscd_freq, depth = 100, z = 10)
plot(1:10, orb_speeds[, 1],
  type = "l",
  ylim = range(orb_speeds),
  xlab = "Hs (m)",
  ylab = "Orbital speed RMS (m/s)"
)
lines(1:10, orb_speeds[, 2], type = "l", col = "red")
</code></pre>

<hr>
<h2 id='compute_sea_state_1d_spectrum'>Compute sea_state parameter from wave spectrum</h2><span id='topic+compute_sea_state_1d_spectrum'></span>

<h3>Description</h3>

<p>Compute sea_state parameter from wave spectrum
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_sea_state_1d_spectrum(spec, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_sea_state_1d_spectrum_+3A_spec">spec</code></td>
<td>
<p>1D spectrum data, e.g. from <code>get_1Dspectrum</code></p>
</td></tr>
<tr><td><code id="compute_sea_state_1d_spectrum_+3A_...">...</code></td>
<td>
<p>currently unused</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a tibble with the sea-state parameters computed from the time series of 2D spectrum
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Ensure that data package is available before running the example.
#  If it is not, see the `resourcecode` package vignette for details
# on installing the required data package.
if (requireNamespace("resourcecodedata", quietly = TRUE)) {
rscd_params &lt;- get_parameters(
  node = "134865",
  start = "1994-01-01",
  end = "1994-01-31 23:00:00",
  parameters = c("hs", "tp", "cge", "t01", "dp", "dir")
)
spec &lt;- resourcecodedata::rscd_1d_spectra
param_calc &lt;- compute_sea_state_1d_spectrum(spec)
oldpar &lt;- par(mfcol = c(2, 2))
plot(param_calc$time, param_calc$hs, type = "l", xlab = "Time", ylab = "Hs (m)")
lines(rscd_params$time, rscd_params$hs, col = "red")
plot(param_calc$time, param_calc$cge, type = "l", xlab = "Time", ylab = "CgE (kW/m)")
lines(rscd_params$time, rscd_params$cge, col = "red")
plot(param_calc$time, param_calc$tp, type = "l", xlab = "Time", ylab = "Tp (s)")
lines(rscd_params$time, rscd_params$tp, col = "red")
plot(param_calc$time, param_calc$dp, type = "l", xlab = "Time", ylab = "Peak direction (°)")
lines(rscd_params$time, rscd_params$dp, col = "red")
par(oldpar)
}
</code></pre>

<hr>
<h2 id='compute_sea_state_2d_spectrum'>Compute sea_state parameter from wave directional spectrum</h2><span id='topic+compute_sea_state_2d_spectrum'></span>

<h3>Description</h3>

<p>Compute sea_state parameter from wave directional spectrum
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_sea_state_2d_spectrum(spec, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_sea_state_2d_spectrum_+3A_spec">spec</code></td>
<td>
<p>2D spectrum data, e.g. from <code>get_2Dspectrum</code></p>
</td></tr>
<tr><td><code id="compute_sea_state_2d_spectrum_+3A_...">...</code></td>
<td>
<p>currently unused</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a tibble with the sea-state parameters computed from the time series of 2D spectrum
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Ensure that data package is available before running the example.
#  If it is not, see the `resourcecode` package vignette for details
# on installing the required data package.
if (requireNamespace("resourcecodedata", quietly = TRUE)) {
 rscd_params &lt;- get_parameters(
  node = "134865",
  start = "1994-01-01",
  end = "1994-01-31 23:00:00",
  parameters = c("hs", "tp", "cge", "t01", "dp", "dir")
)
spec &lt;- resourcecodedata::rscd_2d_spectra
param_calc &lt;- compute_sea_state_2d_spectrum(spec)
oldpar &lt;- par(mfcol = c(2, 2))
plot(param_calc$time, param_calc$hs, type = "l", xlab = "Time", ylab = "Hs (m)")
lines(rscd_params$time, rscd_params$hs, col = "red")
plot(param_calc$time, param_calc$cge, type = "l", xlab = "Time", ylab = "CgE (kW/m)")
lines(rscd_params$time, rscd_params$cge, col = "red")
plot(param_calc$time, param_calc$tp, type = "l", xlab = "Time", ylab = "Tp (s)")
lines(rscd_params$time, rscd_params$tp, col = "red")
plot(param_calc$time, param_calc$dp, type = "l", xlab = "Time", ylab = "Dp (°)")
lines(rscd_params$time, rscd_params$dp, col = "red")
par(oldpar)
}
</code></pre>

<hr>
<h2 id='convert_spectrum_2d1d'>Converts a 2D spectrum time series to a 1D spectrum</h2><span id='topic+convert_spectrum_2d1d'></span>

<h3>Description</h3>

<p>Converts a 2D spectrum time series to a 1D spectrum
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_spectrum_2d1d(spec, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="convert_spectrum_2d1d_+3A_spec">spec</code></td>
<td>
<p>a structure with the needed fields, as an output from 'get_2Dspectrum' for example</p>
</td></tr>
<tr><td><code id="convert_spectrum_2d1d_+3A_...">...</code></td>
<td>
<p>unused yet</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a structure comparable to 'get_1Dspectrum'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Ensure that data package is available before running the example.
#  If it is not, see the `resourcecode` package vignette for details
# on installing the required data package.
if (requireNamespace("resourcecodedata", quietly = TRUE)) {
spec &lt;- resourcecodedata::rscd_2d_spectra
spec1D_RSCD &lt;- resourcecodedata::rscd_1d_spectra
spec1D &lt;- convert_spectrum_2d1d(spec)
# Check the differences, should be low
max(abs(spec1D_RSCD$ef - spec1D$ef))

# Plot the different spectrum
plot(spec1D$freq, spec1D$ef[, 1], type = "l", log = "xy")
lines(spec1D_RSCD$freq, spec1D_RSCD$ef[, 1], col = "red")

# Images
lims &lt;- c(0, 360)
r &lt;- as.POSIXct(round(range(spec1D$forcings$time), "hours"))
oldpar &lt;- par(mfcol = c(2, 1))
image(spec1D$forcings$time, spec1D$freq, t(spec1D$th1m),
  zlim = lims,
  xlab = "Time",
  ylab = "Freq (Hz)",
  xaxt = "n",
  main = "Directionnal spreading"
)
axis.POSIXct(1, spec1D$forcings$time,
  at = seq(r[1], r[2], by = "week"),
  format = "%Y-%m-%d",
  las = 2
)
image(spec1D_RSCD$forcings$time, spec1D_RSCD$freq, t(spec1D_RSCD$th1m),
  zlim = lims,
  xlab = "Time",
  ylab = "Freq (Hz)",
  xaxt = "n"
)
axis.POSIXct(1, spec1D$forcings$time,
  at = seq(r[1], r[2], by = "week"),
  format = "%Y-%m-%d",
  las = 2
)
par(oldpar)
}
</code></pre>

<hr>
<h2 id='dispersion'>Compute the dispersion relation of waves
Find <em>k</em> s.t. (2.pi.f)^2 = g.k.tanh(k.d)</h2><span id='topic+dispersion'></span>

<h3>Description</h3>

<p>Compute the dispersion relation of waves
Find <em>k</em> s.t. (2.pi.f)^2 = g.k.tanh(k.d)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dispersion(frequencies, depth, iter_max = 200, tol = 1e-06)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dispersion_+3A_frequencies">frequencies</code></td>
<td>
<p>frequency vector</p>
</td></tr>
<tr><td><code id="dispersion_+3A_depth">depth</code></td>
<td>
<p>depth (m)</p>
</td></tr>
<tr><td><code id="dispersion_+3A_iter_max">iter_max</code></td>
<td>
<p>maximum number of iterations in the solver</p>
</td></tr>
<tr><td><code id="dispersion_+3A_tol">tol</code></td>
<td>
<p>tolerance for termination.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the wave numbers (same size as frequencies)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>freq &lt;- seq(from = 0, to = 1, length.out = 100)
k1 &lt;- dispersion(freq, depth = 1)
k10 &lt;- dispersion(freq, depth = 10)
kInf &lt;- dispersion(freq, depth = Inf)
plot(freq, k1, type = "l")
lines(freq, k10, col = "red")
lines(freq, kInf, col = "green")
</code></pre>

<hr>
<h2 id='fastTrapz'>Fast implementation of pracma::trapz from the Armadillo C++ library</h2><span id='topic+fastTrapz'></span>

<h3>Description</h3>

<p>Compute the area of a multivariate function with (matrix) values Y at the points x.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fastTrapz(x, Y, dim = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fastTrapz_+3A_x">x</code></td>
<td>
<p>x-coordinates of points on the x-axis (vector)</p>
</td></tr>
<tr><td><code id="fastTrapz_+3A_y">Y</code></td>
<td>
<p>y-coordinates of function values (matrix)</p>
</td></tr>
<tr><td><code id="fastTrapz_+3A_dim">dim</code></td>
<td>
<p>an integer giving the subscripts which the function will be applied over. 1 indicates rows, 2 indicates columns</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector with one dimension less than Y
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x = 1:10
Y = sin(pi/10*matrix(1:10,ncol=10,nrow=10))
fastTrapz(x*pi/10,Y,2)
</code></pre>

<hr>
<h2 id='get_1d_spectrum'>Download the 1D spectrum data from IFREMER ftp</h2><span id='topic+get_1d_spectrum'></span>

<h3>Description</h3>

<p>Download the 1D spectrum data from IFREMER ftp
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_1d_spectrum(point, start = "1994-01-01", end = "1994-02-28")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_1d_spectrum_+3A_point">point</code></td>
<td>
<p>the location name (string) requested.
Alternatively, the node number. The consistency is checked internally.</p>
</td></tr>
<tr><td><code id="get_1d_spectrum_+3A_start">start</code></td>
<td>
<p>the starting date (as a string). The consistency is checked internally.</p>
</td></tr>
<tr><td><code id="get_1d_spectrum_+3A_end">end</code></td>
<td>
<p>the ending date as a string</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with 12 elements:
</p>

<dl>
<dt>longitude</dt><dd><p>Longitude</p>
</dd>
<dt>latitude</dt><dd><p>Latitude</p>
</dd>
<dt>frequency1</dt><dd><p>Lower frequency</p>
</dd>
<dt>frequency2</dt><dd><p>Upper frequency</p>
</dd>
<dt>ef</dt><dd><p>Surface elevation variance spectral density</p>
</dd>
<dt>th1m</dt><dd><p>Mean direction from first spectral moment</p>
</dd>
<dt>th2m</dt><dd><p>Mean direction from second spectral moment</p>
</dd>
<dt>sth1m</dt><dd><p>Mean directional spreading from first spectral moment</p>
</dd>
<dt>sth2m</dt><dd><p>Mean directional spreading from second spectral moment</p>
</dd>
<dt>freq</dt><dd><p>Central frequency</p>
</dd>
<dt>forcings</dt><dd><p>A data.frame with 14 variables:
</p>

<dl>
<dt>time</dt><dd><p>Time</p>
</dd>
<dt>dpt</dt><dd><p>Depth, positive downward</p>
</dd>
<dt>wnd</dt><dd><p>Wind intensity, at 10m above sea level</p>
</dd>
<dt>wnddir</dt><dd><p>Wind direction, comes from</p>
</dd>
<dt>cur</dt><dd><p>Current intensity, at the surface</p>
</dd>
<dt>curdir</dt><dd><p>Current direction, going to</p>
</dd>
<dt>hs</dt><dd><p>Significant wave height</p>
</dd>
<dt>fp</dt><dd><p>Peak wave frequency</p>
</dd>
<dt>f02</dt><dd><p>Mean wave frequency</p>
</dd>
<dt>f0m1</dt><dd><p>Mean wave frequency at spectral moment minus one</p>
</dd>
<dt>th1p</dt><dd><p>Mean wave direction at spectral peak</p>
</dd>
<dt>sth1p</dt><dd><p>Directional spreading at spectral peak</p>
</dd>
<dt>dir</dt><dd><p>Mean wave direction</p>
</dd>
<dt>spr</dt><dd><p>Mean directional spreading</p>
</dd>
</dl>
</dd>
<dt>station</dt><dd><p>Station name</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>
spec1D &lt;- get_1d_spectrum("SEMREVO", start = "1994-01-01", end = "1994-02-28")
r &lt;- as.POSIXct(round(range(spec1D$forcings$time), "month"))
image(spec1D$forcings$time, spec1D$freq, t(spec1D$ef),
  xaxt = "n", xlab = "Time",
  ylab = "Frequency (Hz)"
)
axis.POSIXct(1, spec1D$forcings$time,
  at = seq(r[1], r[2], by = "week"),
  format = "%Y-%m-%d", las = 2
)

</code></pre>

<hr>
<h2 id='get_2d_spectrum'>Download the 2D spectrum data from IFREMER ftp</h2><span id='topic+get_2d_spectrum'></span>

<h3>Description</h3>

<p>Download the 2D spectrum data from IFREMER ftp
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_2d_spectrum(point, start = "1994-01-01", end = "1994-02-28")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_2d_spectrum_+3A_point">point</code></td>
<td>
<p>the location name (string) requested.
Alternatively, the node number. The consistency is checked internally.</p>
</td></tr>
<tr><td><code id="get_2d_spectrum_+3A_start">start</code></td>
<td>
<p>the starting date (as a string). The consistency is checked internally.</p>
</td></tr>
<tr><td><code id="get_2d_spectrum_+3A_end">end</code></td>
<td>
<p>the ending date as a string</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with 9 elements:
</p>

<dl>
<dt>longitude</dt><dd><p>Longitude</p>
</dd>
<dt>latitude</dt><dd><p>Latitude</p>
</dd>
<dt>frequency1</dt><dd><p>Lower frequency</p>
</dd>
<dt>frequency2</dt><dd><p>Upper frequency</p>
</dd>
<dt>ef</dt><dd><p>Surface elevation variance spectral density</p>
</dd>
<dt>th1m</dt><dd><p>Mean direction from first spectral moment</p>
</dd>
<dt>th2m</dt><dd><p>Mean direction from second spectral moment</p>
</dd>
<dt>sth1m</dt><dd><p>Mean directional spreading from first spectral moment</p>
</dd>
<dt>sth2m</dt><dd><p>Mean directional spreading from second spectral moment</p>
</dd>
<dt>freq</dt><dd><p>Central frequency</p>
</dd>
<dt>dir</dt><dd><p>Directionnal bins</p>
</dd>
<dt>forcings</dt><dd><p>A data.frame with 6 variables:
</p>

<dl>
<dt>time</dt><dd><p>Time</p>
</dd>
<dt>dpt</dt><dd><p>Depth, positive downward</p>
</dd>
<dt>wnd</dt><dd><p>Wind intensity, at 10m above sea level</p>
</dd>
<dt>wnddir</dt><dd><p>Wind direction, comes from</p>
</dd>
<dt>cur</dt><dd><p>Current intensity, at the surface</p>
</dd>
<dt>curdir</dt><dd><p>Current direction, going to</p>
</dd>
</dl>
</dd>
<dt>station</dt><dd><p>Station name</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>
spec2D &lt;- get_2d_spectrum("SEMREVO", start = "1994-01-01", end = "1994-02-28")
image(spec2D$dir, spec2D$freq, spec2D$efth[, , 1],
  xlab = "Direction (°)",
  ylab = "Frequency (Hz"
)

</code></pre>

<hr>
<h2 id='get_parameters'>Download time series of sea-state parameters from RESOURCECODE database</h2><span id='topic+get_parameters'></span>

<h3>Description</h3>

<p>Download time series of sea-state parameters from RESOURCECODE database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_parameters(
  parameters = "hs",
  node = 42,
  start = as.POSIXct("1994-01-01 00:00:00", tz = "UTC"),
  end = as.POSIXct("1994-12-31 23:00:00", tz = "UTC")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_parameters_+3A_parameters">parameters</code></td>
<td>
<p>character vector of sea-state parameters</p>
</td></tr>
<tr><td><code id="get_parameters_+3A_node">node</code></td>
<td>
<p>single integer with the node to get</p>
</td></tr>
<tr><td><code id="get_parameters_+3A_start">start</code></td>
<td>
<p>starting date (as integer, character or posixct)</p>
</td></tr>
<tr><td><code id="get_parameters_+3A_end">end</code></td>
<td>
<p>ending date (as integer, character or posixct)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a tibble with N-rows and <code>length(parameters)</code> columns.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
      ts &lt;- get_parameters(parameters = c("hs", "tp"), node = 42)
      plot(ts$time,ts$hs,type='l')

</code></pre>

<hr>
<h2 id='jonswap'>JONWSAP spectrum</h2><span id='topic+jonswap'></span>

<h3>Description</h3>

<p>Creates a JONWSAP density spectrum (one-sided), defined by its integral parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>jonswap(hs = 5, tp = 15, fmax = rscd_freq, df = NULL, gam = 3.3)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="jonswap_+3A_hs">hs</code></td>
<td>
<p>Hs (default: 5m)</p>
</td></tr>
<tr><td><code id="jonswap_+3A_tp">tp</code></td>
<td>
<p>Period (default: 10s)</p>
</td></tr>
<tr><td><code id="jonswap_+3A_fmax">fmax</code></td>
<td>
<p>higher frequency of the spectrum or
vector of frequencies (default to resourcecode frequency vector)</p>
</td></tr>
<tr><td><code id="jonswap_+3A_df">df</code></td>
<td>
<p>frequency step (unused if fmax=vector of frequencies)</p>
</td></tr>
<tr><td><code id="jonswap_+3A_gam">gam</code></td>
<td>
<p>peak enhancement factor (default: 3.3)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Reference :
</p>

<ul>
<li><p> O.G.Houmb and T.Overvik, &quot;Parametrization of Wave Spectra and Long Term
Joint Distribution of Wave Height and Period,&quot;
in Proceedings, First International Conference
on Behaviour of Offshore Structures (BOSS), Trondheim 1976.
23rd International Towing Tank Conference, vol. II, pp. 544-551
</p>
</li>
<li><p> ITTC Committee, 2002, &quot;The Specialist Committee on Waves -
Final Report and Recommendations to the 23rd ITTC&quot;,
Proc. ITTC, vol. II, pp. 505-736.
</p>
</li></ul>



<h3>Value</h3>

<p>Density spectrum with corresponding parameters
</p>


<h3>Examples</h3>

<pre><code class='language-R'>S1 &lt;- jonswap(tp = 15)
S2 &lt;- jonswap(tp = 15, fmax = 0.95, df = 0.003)
plot(S1, type = "l", ylim = c(0, 72))
lines(S2, col = "red")
abline(v = 1 / 15)
</code></pre>

<hr>
<h2 id='plot_2d_specta'>Plot a wave density 2D spectrum</h2><span id='topic+plot_2d_specta'></span>

<h3>Description</h3>

<p>Plot a wave density 2D spectrum
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_2d_specta(
  spec,
  time = 1L,
  normalize = TRUE,
  trim = 0.01,
  cut_off = 0.4,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_2d_specta_+3A_spec">spec</code></td>
<td>
<p>the spectral data, as an output from <code>get_2Dspectrum</code></p>
</td></tr>
<tr><td><code id="plot_2d_specta_+3A_time">time</code></td>
<td>
<p>the time to plot. Either an integer or the date.</p>
</td></tr>
<tr><td><code id="plot_2d_specta_+3A_normalize">normalize</code></td>
<td>
<p>Should the spectrum be normalized to have maimum 1 before ploting</p>
</td></tr>
<tr><td><code id="plot_2d_specta_+3A_trim">trim</code></td>
<td>
<p>removes the values of the spectral density lower than this value</p>
</td></tr>
<tr><td><code id="plot_2d_specta_+3A_cut_off">cut_off</code></td>
<td>
<p>cut-off frequency above which the spectrum is not plotted</p>
</td></tr>
<tr><td><code id="plot_2d_specta_+3A_...">...</code></td>
<td>
<p>currently unused</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
    spec &lt;-  get_2d_spectrum("SEMREVO", start = "1994-01-01", end = "1994-01-31")
    plot_2d_specta(spec, 1)

</code></pre>

<hr>
<h2 id='rscd_dir'>Resourcecode directional bins</h2><span id='topic+rscd_dir'></span>

<h3>Description</h3>

<p>(equivalent to a directional resolution of 10°;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rscd_dir
</code></pre>


<h3>Format</h3>



<h4><code>rscd_dir</code></h4>

<p>An array of length 36 with the directionnal bins
</p>



<h3>Source</h3>

<p>User Manual of the RESOURCECODE database
<a href="https://archimer.ifremer.fr/doc/00751/86306/">https://archimer.ifremer.fr/doc/00751/86306/</a>
</p>

<hr>
<h2 id='rscd_freq'>Resourcecode frequency vector of 1D and 2D spectra</h2><span id='topic+rscd_freq'></span>

<h3>Description</h3>

<p>The wave spectrum discretization considers 36 frequencies, starting from
0.0339 Hz up to 0.9526 Hz with a frequency increment factor of 1.1
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rscd_freq
</code></pre>


<h3>Format</h3>



<h4><code>rscd_freq</code></h4>

<p>An array 36 elements with the frequencies values
</p>



<h3>Source</h3>

<p>User Manual of the RESOURCECODE database
<a href="https://archimer.ifremer.fr/doc/00751/86306/">https://archimer.ifremer.fr/doc/00751/86306/</a>
</p>

<hr>
<h2 id='rscd_mapplot'>Create a map of the provided variable on the RESOURCECODE field grid</h2><span id='topic+rscd_mapplot'></span>

<h3>Description</h3>

<p>Create a map of the provided variable on the RESOURCECODE field grid
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rscd_mapplot(
  z,
  name = "Depth (m)",
  zlim = NULL,
  palette = "YlOrRd",
  direction = 1,
  transform = "identity"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rscd_mapplot_+3A_z">z</code></td>
<td>
<p>the data ro plot: a vector of the same size as the grid (328,030 rows).</p>
</td></tr>
<tr><td><code id="rscd_mapplot_+3A_name">name</code></td>
<td>
<p>name of the variable plored, to be included in the legend.</p>
</td></tr>
<tr><td><code id="rscd_mapplot_+3A_zlim">zlim</code></td>
<td>
<p>limits of the scale. See <code><a href="ggplot2.html#topic+continuous_scale">continuous_scale</a></code> for details.</p>
</td></tr>
<tr><td><code id="rscd_mapplot_+3A_palette">palette</code></td>
<td>
<p>If a string, will use that named palette.
See <code><a href="ggplot2.html#topic+scale_colour_brewer">scale_colour_brewer</a></code> for other options.</p>
</td></tr>
<tr><td><code id="rscd_mapplot_+3A_direction">direction</code></td>
<td>
<p>Sets the order of colours in the scale.
See <code><a href="ggplot2.html#topic+scale_colour_brewer">scale_colour_brewer</a></code> for details.</p>
</td></tr>
<tr><td><code id="rscd_mapplot_+3A_transform">transform</code></td>
<td>
<p>Transformation to apply to the color scale.
See <code><a href="ggplot2.html#topic+continuous_scale">continuous_scale</a></code> for details.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot2 object
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Ensure that data package is available before running the example.
# If it is not, see the `resourcecode` package vignette for details
# on installing the required data package.
if (requireNamespace("resourcecodedata", quietly = TRUE)) {
rscd_mapplot(resourcecodedata::rscd_field$depth)
}
</code></pre>

<hr>
<h2 id='zmcomp2metconv'>Vector conversion</h2><span id='topic+zmcomp2metconv'></span>

<h3>Description</h3>

<p>Converts wind or current zonal and meridional velocity components to
magnitude and direction according to meteorological convention.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>zmcomp2metconv(u, v = NULL, names = c("wspd", "wdir"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="zmcomp2metconv_+3A_u">u</code></td>
<td>
<p>zonal velocity (1D vector) or matrix with zonal and meridional velocity (Nx2 matrix)</p>
</td></tr>
<tr><td><code id="zmcomp2metconv_+3A_v">v</code></td>
<td>
<p>meridional velocity (1D vector)</p>
</td></tr>
<tr><td><code id="zmcomp2metconv_+3A_names">names</code></td>
<td>
<p>names to construct the resulting data.frame</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a Nx2 data.frame with the norm and direction (meteorological convention)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>u &lt;- matrix(rnorm(200), nrow = 100, ncol = 2)
vdir &lt;- zmcomp2metconv(u)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
