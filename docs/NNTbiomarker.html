<!DOCTYPE html><html lang="en"><head><title>Help for package NNTbiomarker</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {NNTbiomarker}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#NNTbiomarker-package'>
<p>Plan a biomarker validation study by focusing on desired clinical actionability.</p></a></li>
<li><a href='#+25+26amp+3B+25'><p>%&amp;% string concatenation</p></a></li>
<li><a href='#achievable.se.sp'><p>achievable.se.sp(): target sensitivity and specificity for a retrospective study.</p></a></li>
<li><a href='#argmin'><p>argmin Argmin function for a vector.</p></a></li>
<li><a href='#binom.confint'><p>binom.confint</p></a></li>
<li><a href='#NNT.from.pv'><p>NNT.from.pv</p></a></li>
<li><a href='#NNT.from.sesp'><p>NNT.from.sesp</p></a></li>
<li><a href='#NNT.to.pv'><p>NNT.to.pv</p></a></li>
<li><a href='#NNT.to.sesp'><p>NNT.to.sesp</p></a></li>
<li><a href='#NNTintervalsProspective'><p>NNTintervalsProspective</p></a></li>
<li><a href='#NNTintervalsRetrospective'><p>NNTintervalsRetrospective</p></a></li>
<li><a href='#pv.from.sesp'><p>pv.from.sesp</p></a></li>
<li><a href='#ROCplots'><p>ROCplots</p></a></li>
<li><a href='#run'><p>run</p></a></li>
<li><a href='#runCombinePlots'><p>runCombinePlots</p></a></li>
<li><a href='#runElicit'><p>runElicit</p></a></li>
<li><a href='#sesp.from.pv'><p>sesp.from.pv</p></a></li>
<li><a href='#sesp.from.pv.feasible'><p>sesp.from.pv.feasible</p></a></li>
<li><a href='#setVerboseCatOption'><p>setVerboseCatOption</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Calculate Design Parameters for Biomarker Validation Studies</td>
</tr>
<tr>
<td>Version:</td>
<td>0.29.11</td>
</tr>
<tr>
<td>Date:</td>
<td>2015-08-20</td>
</tr>
<tr>
<td>Author:</td>
<td>Roger Day</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Roger Day &lt;day01@pitt.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Helps a clinical trial team  discuss
    the clinical goals  of a well-defined biomarker with a diagnostic,
    staging, prognostic, or predictive purpose.  From this discussion will
    come a statistical plan for a (non-randomized) validation trial.
    Both prospective and retrospective trials are supported. In a specific
    focused discussion, investigators should determine the range of
    "discomfort" for the NNT, number needed to treat.  The meaning of
    the discomfort range, [NNTlower, NNTupper], is that within this range
    most physicians would feel discomfort either in treating or withholding
    treatment. A pair of NNT values bracketing that range, NNTpos and NNTneg,
    become the targets of the study's design.  If the trial can demonstrate
    that a positive biomarker test yields an NNT less than NNTlower,
    and that a negative biomarker test yields an NNT less than NNTlower,
    then the biomarker may be useful for patients. A highlight of the package
    is visualization of a "contra-Bayes" theorem, which produces criteria for
    retrospective case-controls studies.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>shiny, xtable, stringr, magrittr, mvbutils</td>
</tr>
<tr>
<td>Collate:</td>
<td>aaa.R ifVerboseCat.R sesp-pv-NNT.R achievable.se.sp.R
binom.confint.R NNTintervals.R run.R ROCplots.R argmin.R zzz.R</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 0.8.1), knitr (&ge; 1.6), rmarkdown, ggplot2, plyr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2015-08-20 20:36:16 UTC; Roger</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2015-08-21 07:38:39</td>
</tr>
</table>
<hr>
<h2 id='NNTbiomarker-package'>
Plan a biomarker validation study by focusing on desired clinical actionability.
</h2><span id='topic+NNTbiomarker-package'></span><span id='topic+NNTbiomarker'></span>

<h3>Description</h3>

<p>Clarifying what performance would suffice if the test is to improve medical care makes it possible to design meaningful validation studies.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> NNTbiomarker</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 0.1</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2015-03-21</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> What license is it under?</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>This package bases the design of a biomarker study on the idea of &quot;number needed to treat&quot; (NNT). It postulates a &quot;range of discomfort&quot; for NNT, within which the clinical decision is uncomfortable for a treating physician.  provides a <code>shiny</code> window for eliciting the boundaries of the range of number needed to  </p>


<h3>Author(s)</h3>

<p>Roger Day
</p>
<p>Maintainer: Roger Day &lt;day01@pitt.edu&gt;
</p>


<h3>References</h3>

<p>See author for unpublished manuscript.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>NNT.to.pv(NNTpos=5, NNTneg=28)
NNT.from.sesp(se=0.7, sp=0.9, prev=0.1)
pv.to.sesp(pv = cbind(ppv=seq(.5, .9, .1), npv=0.9), prev = 0.2)

</code></pre>

<hr>
<h2 id='+25+26amp+3B+25'>%&amp;% string concatenation</h2><span id='topic++25+26+25'></span>

<h3>Description</h3>

<p>From mvbutils
</p>


<h3>Usage</h3>

<pre><code class='language-R'>a %&amp;% b
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25+2B26amp+2B3B+2B25_+3A_a">a</code></td>
<td>
<p>a string</p>
</td></tr>
<tr><td><code id="+2B25+2B26amp+2B3B+2B25_+3A_b">b</code></td>
<td>
<p>another string</p>
</td></tr>
</table>


<h3>Value</h3>

<p>paste0(a, b)
</p>

<hr>
<h2 id='achievable.se.sp'>achievable.se.sp(): target sensitivity and specificity for a retrospective study.</h2><span id='topic+achievable.se.sp'></span>

<h3>Description</h3>

<p>For a retrospective study design, given a prevalence value,
produce a plot displaying the achievable contours of
either predictive values or NNT values.
The calculation uses the &quot;contra-Bayes&quot; theorem, sesp.from.pv.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>achievable.se.sp(the.prev = 0.5, axes = c("pv", "NNT"),
  sesp.seq = seq(0.5, 1, 0.1), drawNNTaxes = TRUE, drawPVaxes = FALSE,
  drawArrows = TRUE, drawTable = TRUE, latexTable = TRUE,
  placePointLabels = TRUE, cexText = 0.5, cexSubtitle = 0.5,
  cexTitle = 0.7, y0arrow = 0.25, lwdArrow = 1, ltyArrow = 2,
  title = FALSE, mtext = FALSE, contours = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="achievable.se.sp_+3A_the.prev">the.prev</code></td>
<td>
<p>Prevalence (prior probability)</p>
</td></tr>
<tr><td><code id="achievable.se.sp_+3A_axes">axes</code></td>
<td>
<p>Should the axes be predictive values (&quot;pv&quot;) or NNT values? Default is &quot;pv&quot;.</p>
</td></tr>
<tr><td><code id="achievable.se.sp_+3A_sesp.seq">sesp.seq</code></td>
<td>
<p>Sequence of values at which the sensitivity and specificity will be explored.</p>
</td></tr>
<tr><td><code id="achievable.se.sp_+3A_drawnntaxes">drawNNTaxes</code></td>
<td>
<p>(default=TRUE) Option for tweaking the plot.</p>
</td></tr>
<tr><td><code id="achievable.se.sp_+3A_drawpvaxes">drawPVaxes</code></td>
<td>
<p>(default=FALSE) Option for tweaking the plot.</p>
</td></tr>
<tr><td><code id="achievable.se.sp_+3A_drawarrows">drawArrows</code></td>
<td>
<p>(default=TRUE) Arrow option; deprecated.</p>
</td></tr>
<tr><td><code id="achievable.se.sp_+3A_drawtable">drawTable</code></td>
<td>
<p>(default=TRUE) Option for tweaking the plot.</p>
</td></tr>
<tr><td><code id="achievable.se.sp_+3A_latextable">latexTable</code></td>
<td>
<p>(default=TRUE) Option for tweaking the plot.</p>
</td></tr>
<tr><td><code id="achievable.se.sp_+3A_placepointlabels">placePointLabels</code></td>
<td>
<p>(default=TRUE)  Write A, B, C, ... in circles where sensitivity=specificity.</p>
</td></tr>
<tr><td><code id="achievable.se.sp_+3A_cextext">cexText</code></td>
<td>
<p>(default=0.5) Option for tweaking the plot.</p>
</td></tr>
<tr><td><code id="achievable.se.sp_+3A_cexsubtitle">cexSubtitle</code></td>
<td>
<p>(default=0.5) Option for tweaking the plot.</p>
</td></tr>
<tr><td><code id="achievable.se.sp_+3A_cextitle">cexTitle</code></td>
<td>
<p>(default=0.7) Option for tweaking the plot.</p>
</td></tr>
<tr><td><code id="achievable.se.sp_+3A_y0arrow">y0arrow</code></td>
<td>
<p>(default=0.25) Arrow option; deprecated.</p>
</td></tr>
<tr><td><code id="achievable.se.sp_+3A_lwdarrow">lwdArrow</code></td>
<td>
<p>(default=1) Arrow option; deprecated.</p>
</td></tr>
<tr><td><code id="achievable.se.sp_+3A_ltyarrow">ltyArrow</code></td>
<td>
<p>(default=2) Arrow option; deprecated.</p>
</td></tr>
<tr><td><code id="achievable.se.sp_+3A_title">title</code></td>
<td>
<p>(default=FALSE) Option for tweaking the plot.</p>
</td></tr>
<tr><td><code id="achievable.se.sp_+3A_mtext">mtext</code></td>
<td>
<p>(default=FALSE) Option for tweaking the plot.</p>
</td></tr>
<tr><td><code id="achievable.se.sp_+3A_contours">contours</code></td>
<td>
<p>(default=TRUE) Option for tweaking the plot.</p>
</td></tr>
<tr><td><code id="achievable.se.sp_+3A_...">...</code></td>
<td>
<p>Options to pass to plot.default()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The predictive values when sensitivity equals specificity:  sesp.to.pv(cbind(sesp.seq,sesp.seq), prev=the.prev))
</p>

<hr>
<h2 id='argmin'>argmin Argmin function for a vector.</h2><span id='topic+argmin'></span>

<h3>Description</h3>

<p>Return the index minimizing distance from v to target.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>argmin(v, target = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="argmin_+3A_v">v</code></td>
<td>
<p>The vector to compare to target.</p>
</td></tr>
<tr><td><code id="argmin_+3A_target">target</code></td>
<td>
<p>The value sought in the vector; default=0.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The index in v of the value which is closest to target.
</p>

<hr>
<h2 id='binom.confint'>binom.confint</h2><span id='topic+binom.confint'></span>

<h3>Description</h3>

<p>Exact confidence intervals for a binomial proportion parameter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>binom.confint(k, n, alpha = 0.05, side = c("two", "upper", "lower"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="binom.confint_+3A_k">k</code></td>
<td>
<p>#&quot;heads&quot;</p>
</td></tr>
<tr><td><code id="binom.confint_+3A_n">n</code></td>
<td>
<p>sample size</p>
</td></tr>
<tr><td><code id="binom.confint_+3A_alpha">alpha</code></td>
<td>
<p>Confidence level</p>
</td></tr>
<tr><td><code id="binom.confint_+3A_side">side</code></td>
<td>
<p>Sidedness of the hypothesis: c(&quot;two&quot;, &quot;upper&quot;, &quot;lower&quot;)</p>
</td></tr>
</table>

<hr>
<h2 id='NNT.from.pv'>NNT.from.pv</h2><span id='topic+NNT.from.pv'></span><span id='topic+pv.to.NNT'></span>

<h3>Description</h3>

<p>Compute NNT values from predictive values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>NNT.from.pv(ppv, npv, pv)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="NNT.from.pv_+3A_ppv">ppv</code></td>
<td>
<p>Positive predictive value</p>
</td></tr>
<tr><td><code id="NNT.from.pv_+3A_npv">npv</code></td>
<td>
<p>Negative predictive value</p>
</td></tr>
<tr><td><code id="NNT.from.pv_+3A_pv">pv</code></td>
<td>
<p>Alternative input of ppv and npv, in matrix or named vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>c(NNTpos=NNTpos, NNTneg=NNTneg)
</p>

<hr>
<h2 id='NNT.from.sesp'>NNT.from.sesp</h2><span id='topic+NNT.from.sesp'></span><span id='topic+sesp.to.NNT'></span>

<h3>Description</h3>

<p>Compute NNT values from sensitivity aand specificity.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>NNT.from.sesp(se, sp, sesp, prev)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="NNT.from.sesp_+3A_se">se</code></td>
<td>
<p>Positive predictive value</p>
</td></tr>
<tr><td><code id="NNT.from.sesp_+3A_sp">sp</code></td>
<td>
<p>Negative predictive value</p>
</td></tr>
<tr><td><code id="NNT.from.sesp_+3A_sesp">sesp</code></td>
<td>
<p>Alternative input for se and sp, as matrix or named vector.</p>
</td></tr>
<tr><td><code id="NNT.from.sesp_+3A_prev">prev</code></td>
<td>
<p>Prevalence (prior probability)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>c(NNTpos=NNTpos, NNTneg=NNTneg)
</p>

<hr>
<h2 id='NNT.to.pv'>NNT.to.pv</h2><span id='topic+NNT.to.pv'></span><span id='topic+pv.from.NNT'></span>

<h3>Description</h3>

<p>Convert between (NNTpos, NNTneg)  and (PPV, NPV).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>NNT.to.pv(NNTpos, NNTneg, NNT, prev, calculate.se.sp = F)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="NNT.to.pv_+3A_nntpos">NNTpos</code></td>
<td>
<p>NNT for a patient with positive test result</p>
</td></tr>
<tr><td><code id="NNT.to.pv_+3A_nntneg">NNTneg</code></td>
<td>
<p>NNT for a patient with negative test result</p>
</td></tr>
<tr><td><code id="NNT.to.pv_+3A_nnt">NNT</code></td>
<td>
<p>A matrix or vector of (NNTpos, NNTneg) values.</p>
</td></tr>
<tr><td><code id="NNT.to.pv_+3A_prev">prev</code></td>
<td>
<p>Prevalence of the &quot;BestToTreat&quot; group before testing.</p>
</td></tr>
<tr><td><code id="NNT.to.pv_+3A_calculate.se.sp">calculate.se.sp</code></td>
<td>
<p>(default=FALSE) If TRUE, also calculate the sensitivity and specificity using the contra-Bayes theorem.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>For matrix input, cbind(ppv=ppv, npv=npv). For vector input, c(ppv=ppv, npv=npv).
</p>

<hr>
<h2 id='NNT.to.sesp'>NNT.to.sesp</h2><span id='topic+NNT.to.sesp'></span><span id='topic+sesp.from.NNT'></span>

<h3>Description</h3>

<p>Compute sensitivity aand specificity from NNT values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>NNT.to.sesp(NNTpos, NNTneg, NNT, prev)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="NNT.to.sesp_+3A_nntpos">NNTpos</code></td>
<td>
<p>NNT for a positive test result</p>
</td></tr>
<tr><td><code id="NNT.to.sesp_+3A_nntneg">NNTneg</code></td>
<td>
<p>NNT for a negative test result</p>
</td></tr>
<tr><td><code id="NNT.to.sesp_+3A_nnt">NNT</code></td>
<td>
<p>Alternative way in input NNT values (matrix or vector)</p>
</td></tr>
<tr><td><code id="NNT.to.sesp_+3A_prev">prev</code></td>
<td>
<p>Prevalence (prior probability)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>c(se=se, sp=sp)
</p>

<hr>
<h2 id='NNTintervalsProspective'>NNTintervalsProspective</h2><span id='topic+NNTintervalsProspective'></span>

<h3>Description</h3>

<p>Produce Bayesian and classical intervals for NNT from
observations in a prospective study.
Useful for &quot;anticipated results&quot; when designing a study,
The setting: patients will be tested immediately, and followed to determine the BestToTreat/BestToWait classification.
as well as analyzing study results.
There were (or will be) Npositives patients with a positive test, Nnegatives with a negative test.
The observed NNTs in each group were (or will be) NNTpos and NNTneg.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>NNTintervalsProspective(Npositives, Nnegatives, NtruePositives, NtrueNegatives,
  prev = 0.15, alpha = 0.025, prior = c(1/2, 1/2))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="NNTintervalsProspective_+3A_npositives">Npositives</code></td>
<td>
<p>Total number of observed positives.</p>
</td></tr>
<tr><td><code id="NNTintervalsProspective_+3A_nnegatives">Nnegatives</code></td>
<td>
<p>Total number of observed negatives.</p>
</td></tr>
<tr><td><code id="NNTintervalsProspective_+3A_ntruepositives">NtruePositives</code></td>
<td>
<p>Observed or anticipated number of &quot;BestToTreat&quot; among the positives.</p>
</td></tr>
<tr><td><code id="NNTintervalsProspective_+3A_ntruenegatives">NtrueNegatives</code></td>
<td>
<p>Observed or anticipated number of &quot;BestToWait&quot;  among the negatives.</p>
</td></tr>
<tr><td><code id="NNTintervalsProspective_+3A_prev">prev</code></td>
<td>
<p>= 0.15 Prevalence of &quot;BestToTreat&quot; characteristic.</p>
</td></tr>
<tr><td><code id="NNTintervalsProspective_+3A_alpha">alpha</code></td>
<td>
<p>= 0.025 Significance level (one side).</p>
</td></tr>
<tr><td><code id="NNTintervalsProspective_+3A_prior">prior</code></td>
<td>
<p>Beta parameters for prior. Default is the Jeffreys prior = c(1/2,1/2). Jaynes prior = c(0,0) won't work when #fp=1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The Bayesian predictive intervals for NNTpos and NNTneg. These are obtained from predictive intervals
for PPV and NPV, based on Jeffreys' beta(1/2,1/2) prior.
</p>

<hr>
<h2 id='NNTintervalsRetrospective'>NNTintervalsRetrospective</h2><span id='topic+NNTintervalsRetrospective'></span>

<h3>Description</h3>

<p>Bayes predictive intervals for sensitivity, specificity, NNTpos and NNTneg
in a case-control retrospective study.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>NNTintervalsRetrospective(Ncases = 10, Ncontrols = 30, NposCases = 6,
  NposControls = 2, prev = 0.15, alpha = 0.025, prior = c(1/2, 1/2))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="NNTintervalsRetrospective_+3A_ncases">Ncases</code></td>
<td>
<p>Number of cases in the study</p>
</td></tr>
<tr><td><code id="NNTintervalsRetrospective_+3A_ncontrols">Ncontrols</code></td>
<td>
<p>Number of controls in the study</p>
</td></tr>
<tr><td><code id="NNTintervalsRetrospective_+3A_nposcases">NposCases</code></td>
<td>
<p>Number of cases with positive test</p>
</td></tr>
<tr><td><code id="NNTintervalsRetrospective_+3A_nposcontrols">NposControls</code></td>
<td>
<p>Number of controls with positive test</p>
</td></tr>
<tr><td><code id="NNTintervalsRetrospective_+3A_prev">prev</code></td>
<td>
<p>Prevalence of the BestToTreat (versus BestToWait)</p>
</td></tr>
<tr><td><code id="NNTintervalsRetrospective_+3A_alpha">alpha</code></td>
<td>
<p>Significance level for interval.</p>
</td></tr>
<tr><td><code id="NNTintervalsRetrospective_+3A_prior">prior</code></td>
<td>
<p>Beta parameters for prior. Default is the Jeffreys prior = c(1/2,1/2). Jaynes prior = c(0,0) won't work when #fp=1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with 3 components containing intervals (predictive or otherwise), with names intervalsForSN, intervalsForSP, intervalsForNNT.
The intervals derive from assuming independent Jeffreys priors for SN and SP,
sampling from joint independent posteriors for SN and SP incorporating the
anticipated results, and applying NNT.from.sesp (Bayes theorem) to each
sampled pair to obtain a sample of NNTpos and NNTneg.
</p>

<hr>
<h2 id='pv.from.sesp'>pv.from.sesp</h2><span id='topic+pv.from.sesp'></span><span id='topic+sesp.to.pv'></span>

<h3>Description</h3>

<p>Computes predictive values from sensitivity and specificity.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pv.from.sesp(se = 0.8, sp = 0.8, sesp, prev = 0.001)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pv.from.sesp_+3A_se">se</code></td>
<td>
<p>Positive predictive value</p>
</td></tr>
<tr><td><code id="pv.from.sesp_+3A_sp">sp</code></td>
<td>
<p>Negative predictive value</p>
</td></tr>
<tr><td><code id="pv.from.sesp_+3A_sesp">sesp</code></td>
<td>
<p>Alternative input for se and sp, as matrix or named vector.</p>
</td></tr>
<tr><td><code id="pv.from.sesp_+3A_prev">prev</code></td>
<td>
<p>Prevalence (prior probability). Default =  0.001</p>
</td></tr>
</table>


<h3>Value</h3>

<p>c(ppv=ppv, npv=npv)
</p>

<hr>
<h2 id='ROCplots'>ROCplots</h2><span id='topic+ROCplots'></span>

<h3>Description</h3>

<p>A variety of ROC-related plots for a binary target and a single continuous predictor.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ROCplots(data, whichPlots = c("density", "raw", "ROC", "pv", "nnt",
  "nntRange"), NNTlower = 3, NNTupper = 10, N = 1000, prev = 0.2,
  diffInSD = 2, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ROCplots_+3A_data">data</code></td>
<td>
<p>Data frame with columns &quot;class&quot; (binary target variable) and &quot;X&quot; (predictor).</p>
</td></tr>
<tr><td><code id="ROCplots_+3A_whichplots">whichPlots</code></td>
<td>
<p>Which plots to do. Options are c(&quot;density&quot;, &quot;raw&quot;, &quot;ROC&quot;, &quot;pv&quot;, &quot;nnt&quot;)</p>
</td></tr>
<tr><td><code id="ROCplots_+3A_nntlower">NNTlower</code></td>
<td>
<p>Subjective input. If NNT &lt; NNTlower, the decision is clearly to Treat.</p>
</td></tr>
<tr><td><code id="ROCplots_+3A_nntupper">NNTupper</code></td>
<td>
<p>Subjective input. If NNT &gt; NNTupper, the decision is clearly to Wait.</p>
</td></tr>
<tr><td><code id="ROCplots_+3A_n">N</code></td>
<td>
<p>For simulated data: sample size</p>
</td></tr>
<tr><td><code id="ROCplots_+3A_prev">prev</code></td>
<td>
<p>For simulated data: Prevalence</p>
</td></tr>
<tr><td><code id="ROCplots_+3A_diffinsd">diffInSD</code></td>
<td>
<p>For simulated data: Difference: E(X | group=1) - E(X | group=0),measured in units of S.D (common to the 2 groups).</p>
</td></tr>
<tr><td><code id="ROCplots_+3A_...">...</code></td>
<td>
<p>Extra arguments for a plot. Do not supply unless length(whichPlots)==1.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The plots display the values achievable by changing the cutoff, in comparison with the desired values as determined by NNTlower and NNTupper.
The &quot;whichPlots&quot; options are as follows:
</p>

<ul>
<li><p>&quot;density&quot;Marginal density of X, with rug.
</p>
</li>
<li><p>&quot;raw&quot;X versus class.
</p>
</li>
<li><p>&quot;ROC&quot;Standard ROC curve.
</p>
</li>
<li><p>&quot;pv&quot;Plot of ppv versus npv, with indication of the acceptable range for cutoff.
</p>
</li>
<li><p>&quot;nnt&quot;Plot of NNTpos versus NNTneg, with indication of the acceptable region
</p>
</li>
<li><p>&quot;nntRange&quot;Plot of NNTpos and NNTneg versus cutoff, with indication of the acceptable range.
</p>
<p>By default, all the plots are made.
</p>
</li></ul>


<hr>
<h2 id='run'>run</h2><span id='topic+run'></span>

<h3>Description</h3>

<p>Run a shiny app for this package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run(shinyDir)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_+3A_shinydir">shinyDir</code></td>
<td>
<p>Current options are &quot;shinyElicit&quot; and &quot;shinyCombinePlots&quot;. If not provided, a menu of the options is provided.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The selected shiny app is run. See the vignette Using_the_NNTbiomarker_package for details, and the vignette The_Biomarker_Crisis for an overview.
</p>

<hr>
<h2 id='runCombinePlots'>runCombinePlots</h2><span id='topic+runCombinePlots'></span>

<h3>Description</h3>

<p>Run a shiny app connecting a visual scale for NNT quantities and a &quot;contra-Bayes&quot; plot for mapping from predictive values to sensitivity/specificity (Bayes theorem in reverse).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>runCombinePlots()
</code></pre>


<h3>See Also</h3>

<p>run
</p>

<hr>
<h2 id='runElicit'>runElicit</h2><span id='topic+runElicit'></span>

<h3>Description</h3>

<p>Run a shiny app outlining the process of specifying a design for a biomarker validation study.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>runElicit()
</code></pre>


<h3>See Also</h3>

<p>run
</p>

<hr>
<h2 id='sesp.from.pv'>sesp.from.pv</h2><span id='topic+pv.to.sesp'></span><span id='topic+sesp.from.pv'></span>

<h3>Description</h3>

<p>Computes sensitivity and specificity from  predictive values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sesp.from.pv(ppv = 0.1, npv = 0.7, pv, prev = 0.2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sesp.from.pv_+3A_ppv">ppv</code></td>
<td>
<p>Positive predictive value</p>
</td></tr>
<tr><td><code id="sesp.from.pv_+3A_npv">npv</code></td>
<td>
<p>Negative predictive value</p>
</td></tr>
<tr><td><code id="sesp.from.pv_+3A_pv">pv</code></td>
<td>
<p>Alternative input of ppv and npv, in matrix or named vector.</p>
</td></tr>
<tr><td><code id="sesp.from.pv_+3A_prev">prev</code></td>
<td>
<p>Prevalence (prior probability)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>c(se=se,sp=sp)
</p>

<hr>
<h2 id='sesp.from.pv.feasible'>sesp.from.pv.feasible</h2><span id='topic+sesp.from.pv.feasible'></span>

<h3>Description</h3>

<p>Computes sensitivity and specificity from  predictive values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sesp.from.pv.feasible(ppv, npv, prev, feasible = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sesp.from.pv.feasible_+3A_ppv">ppv</code></td>
<td>
<p>Positive predictive value</p>
</td></tr>
<tr><td><code id="sesp.from.pv.feasible_+3A_npv">npv</code></td>
<td>
<p>Negative predictive value</p>
</td></tr>
<tr><td><code id="sesp.from.pv.feasible_+3A_prev">prev</code></td>
<td>
<p>Prevalence (prior probability)</p>
</td></tr>
<tr><td><code id="sesp.from.pv.feasible_+3A_feasible">feasible</code></td>
<td>
<p>Only return results in [0,1]. Default=TRUE</p>
</td></tr>
</table>


<h3>Details</h3>

<p>NNT stands for Number Needed to Treat.  We have a range, such that
if NNT &lt; NNTpos, all patients will be treated, if NNT &gt; NNTneg then all
patients will not be treated. Suppose N=NNTpos is the number of patients such
that if N pts are positive,one will be a true positive. The &quot;eq&quot; means that we
choose NNTpos so that treating all or not treating all would be equivalent.
E(loss | treat) = (NNTpos-1) * L[A,H]  = E(loss | wait) = 1 * L[W,D] Actually
we choose N SMALLER so that TREATing is definitely, comfortably the right
thing. E(loss | treat) = (NNTpos-1) * L[A,H]  &lt;&lt;  E(loss | wait) = 1 * L[W,D]
Suppose N=NNTneg is the number of patients such that if N pts are negative, one
will be a false negative. The &quot;eq&quot; means that we choose NNTneg so that treating
all or not treating any would be equivalent. E(loss | treat) = (NNTneg-1) *
L[A,H]  = E(loss | wait) = 1 * L[W,D] Actually we choose N LARGER so that
WAITing is definitely, comfortably the right thing. E(loss | treat) =
(NNTpos-1) * L[A,H]  &gt;&gt; E(loss | wait) = 1 * L[W,D]
</p>


<h3>Value</h3>

<p>c(ppv=ppv, npv=npv, sp=sp, se=se)
</p>

<hr>
<h2 id='setVerboseCatOption'>setVerboseCatOption</h2><span id='topic+ifVerboseCat'></span><span id='topic+setVerboseCatOption'></span>

<h3>Description</h3>

<p>Allows user to toggle on and off printing messages on a per-function basis.
Should be usable in other packages, but not by importing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setVerboseCatOption(fname, value)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="setVerboseCatOption_+3A_fname">fname</code></td>
<td>
<p>Name of the function to control.</p>
</td></tr>
<tr><td><code id="setVerboseCatOption_+3A_value">value</code></td>
<td>
<p>Boolean value: should this function print out messages?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The new value of the namespace option for fname ifVerboseCat
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
