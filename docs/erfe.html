<!DOCTYPE html><html><head><title>Help for package erfe</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {erfe}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#dexpectilizeMatR'><p>Dexpectilize a matrix according the a single asymmetric point</p>
<code class="reqn">\tau \in (0, 1)</code>.</a></li>
<li><a href='#dexpectilizeVecR'><p>Dexpectilize a vector according the a single asymmetric</p>
point <code class="reqn">\tau\in (0, 1)</code>.</a></li>
<li><a href='#erfe'><p>Dexpectilize a vector according the a single asymmetric point</p></a></li>
<li><a href='#erfeVecR'><p>Dexpectilize a vector according the a single asymmetric point</p></a></li>
<li><a href='#sim_panel_data'><p>sim_panel_data for the erfe package</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Fits Expectile Regression for Panel Fixed Effect Model</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.1</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Amadou Barry &lt;barryhafia@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Fits the Expectile Regression for Fixed Effect (ERFE)
    estimator. The ERFE model extends the within-transformation strategy
    to solve the incidental parameter problem within the expectile
    regression framework. The ERFE model estimates the regressor effects
    on the expectiles of the response distribution.  The ERFE estimate
    corresponds to the classical fixed-effect within-estimator when the
    asymmetric point is 0.5. The paper by Barry, Oualkacha, and
    Charpentier (2021, &lt;<a href="https://doi.org/10.48550/arXiv.2108.04737">doi:10.48550/arXiv.2108.04737</a>&gt;) gives more details about the
    ERFE model.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://arxiv.org/abs/2108.04737">https://arxiv.org/abs/2108.04737</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/amadoudiogobarry/erfe/issues">https://github.com/amadoudiogobarry/erfe/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>Matrix, mvtnorm, stats</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-12-15 00:57:12 UTC; Amadou.Barry</td>
</tr>
<tr>
<td>Author:</td>
<td>Amadou Barry <a href="https://orcid.org/0000-0003-3396-1724"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [cre, aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-12-16 09:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='dexpectilizeMatR'>Dexpectilize a matrix according the a single asymmetric point
<code class="reqn">\tau \in (0, 1)</code>.</h2><span id='topic+dexpectilizeMatR'></span>

<h3>Description</h3>

<p>This function is part of the erfe package. It de-expectilizes
a matrix of data vertor-wise, which means subtracting
the expectile of level <code class="reqn">\tau \in (0, 1)</code> to every vector of
the matrix column-wise. When <code class="reqn">\tau=0.5</code> then the process of
de-expectilizing corresponds to the process of deamining
the matrix column-wise. That is, subtracting the mean-column
from the column vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dexpectilizeMatR(ymat, aweight, panSizeVec)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dexpectilizeMatR_+3A_ymat">ymat</code></td>
<td>
<p>Numeric matrix to de-expectilize column-wise.</p>
</td></tr>
<tr><td><code id="dexpectilizeMatR_+3A_aweight">aweight</code></td>
<td>
<p>Numeric vector of individual asymmetric weight.</p>
</td></tr>
<tr><td><code id="dexpectilizeMatR_+3A_pansizevec">panSizeVec</code></td>
<td>
<p>Numeric vector of individual panel size.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Return a de-expectilized matrix of the matrix ymat.
</p>


<h3>Author(s)</h3>

<p>Amadou Barry, <a href="mailto:barryhafia@gmail.com">barryhafia@gmail.com</a>
</p>


<h3>References</h3>

<p>Barry, Amadou, Oualkacha, Karim, and Charpentier
Arthur. (2022). <em>Weighted asymmetric least squares
regression with fixed-effects</em>.
arXiv preprint arXiv:2108.04737
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(13)
temps_obs &lt;- 5
n_subj &lt;- 50
id &lt;- rep(1:n_subj, each=temps_obs) 
asym &lt;- 0.5
panSizeVec &lt;- unname(unlist(lapply(split(id, id), function(x) length(x)))) 
ymat &lt;- matrix(NA, nrow = n_subj * temps_obs, ncol = 5)
ymat &lt;- matrix(mvtnorm::rmvnorm(n_subj * ncol(ymat),
sigma = diag(rep(1, temps_obs))), ncol = ncol(ymat))
aweight &lt;- rep(asym, temps_obs * n_subj)
aweight[!(ymat[, 1] &gt; mean(ymat[, 1]))] = 1 - asym
dexpectilizeMatR(ymat, aweight, panSizeVec)
</code></pre>

<hr>
<h2 id='dexpectilizeVecR'>Dexpectilize a vector according the a single asymmetric
point <code class="reqn">\tau\in (0, 1)</code>.</h2><span id='topic+dexpectilizeVecR'></span>

<h3>Description</h3>

<p>This function is part of the erfe package. It de-expectilizes
a vector of data, which means subtracting the expectile
of level <code class="reqn">\tau\in (0, 1)</code> of the vector to the vector itself.
When <code class="reqn">\tau=0.5</code> then the process of de-expectilizing
corresponds to the process of deamining the vector. That is,
subtracting the mean of the vector from the vector itself.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dexpectilizeVecR(yvec, aweight, panSizeVec)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dexpectilizeVecR_+3A_yvec">yvec</code></td>
<td>
<p>Numeric vector to de-expectilize.</p>
</td></tr>
<tr><td><code id="dexpectilizeVecR_+3A_aweight">aweight</code></td>
<td>
<p>Numeric vector of individual asymmetric weight.</p>
</td></tr>
<tr><td><code id="dexpectilizeVecR_+3A_pansizevec">panSizeVec</code></td>
<td>
<p>Numeric vector of individual panel size.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Return a de-expectilized vector of the vector yvec.
</p>


<h3>Author(s)</h3>

<p>Amadou Barry, <a href="mailto:barryhafia@gmail.com">barryhafia@gmail.com</a>
</p>


<h3>References</h3>

<p>Barry, Amadou, Oualkacha, Karim, and Charpentier
Arthur. (2022). <em>Weighted asymmetric least squares
regression with fixed-effects</em>.
arXiv preprint arXiv:2108.04737
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(13)
temps_obs &lt;- 5 # panel size
n_subj &lt;- 50 # sample size
id &lt;- rep(1:n_subj, each = temps_obs)
asym &lt;- 0.5
panSizeVec &lt;- unname(unlist(lapply(split(id, id), function(x) length(x))))
yvec &lt;- c(mvtnorm::rmvnorm(n_subj, sigma = diag(rep(1,temps_obs))))
aweight &lt;- rep(asym, temps_obs * n_subj)
aweight[!(yvec &gt; mean(yvec))] = 1 - asym
dexpectilizeVecR(yvec, aweight, panSizeVec)
</code></pre>

<hr>
<h2 id='erfe'>Dexpectilize a vector according the a single asymmetric point</h2><span id='topic+erfe'></span>

<h3>Description</h3>

<p>This function is the main fucntion of the erfe package.
It estimates the
ERFE model for a panel dataset and for a sequence of asymmetric point
<code class="reqn">\tau \in (0, 1)</code>. When <code class="reqn">\tau=0.5</code> the function estimate the
classical within-transformation estimator and its sandwich covariance
matrix.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>erfe(predictors, response, asymp = c(0.25, 0.5, 0.75), id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="erfe_+3A_predictors">predictors</code></td>
<td>
<p>Numeric matrix of covariates/regressors.</p>
</td></tr>
<tr><td><code id="erfe_+3A_response">response</code></td>
<td>
<p>Numeric vector of response variable.</p>
</td></tr>
<tr><td><code id="erfe_+3A_asymp">asymp</code></td>
<td>
<p>Sequence of asymmetric points.</p>
</td></tr>
<tr><td><code id="erfe_+3A_id">id</code></td>
<td>
<p>Ordered vector of subject ids.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list of list according to the
asymmetric points. Each list has objects related
to the erfe model such as the asymmetric point,
the coefficient-estimate, the standard deviation,
the estimated covariance.
</p>


<h3>Author(s)</h3>

<p>Amadou Barry, <a href="mailto:barryhafia@gmail.com">barryhafia@gmail.com</a>
</p>


<h3>References</h3>

<p>Barry, Amadou, Oualkacha, Karim, and Charpentier
Arthur. (2022). <em>Weighted asymmetric least squares
regression with fixed-effects</em>.
arXiv preprint arXiv:2108.04737
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(13)
temps_obs &lt;- 5
n_subj &lt;- 50
sig &lt;- diag(rep(1,temps_obs))
id &lt;- rep(1:n_subj, each=temps_obs)
rvec &lt;- c(mvtnorm::rmvnorm(n_subj, sigma = sig))
fvec &lt;- (1 + rep(rnorm(n_subj) , each=temps_obs))
predictors &lt;- cbind(rt(n_subj * temps_obs, df=2, ncp=1.3),
 1.2 * fvec + rnorm(n_subj * temps_obs, mean = 0.85, sd = 1.5) )
response &lt;- 0.6 * predictors[, 1] + predictors[, 2] + fvec + rvec
asymp &lt;- c(0.25,0.5,0.75)
erfe(predictors, response, asymp=c(0.25,0.5,0.75), id)
</code></pre>

<hr>
<h2 id='erfeVecR'>Dexpectilize a vector according the a single asymmetric point</h2><span id='topic+erfeVecR'></span>

<h3>Description</h3>

<p>This function is part of the erfe package. It estimates
the ERFE model for a panel dataset and for a
single asymmetric point <code class="reqn">\tau \in (0, 1)</code>.
When <code class="reqn">\tau=0.5</code> the function estimate the classical
within-transformation estimator and its sandwich
covariance matrix.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>erfeVecR(xmat, yvec, panSizeVec, asym, id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="erfeVecR_+3A_xmat">xmat</code></td>
<td>
<p>Numeric vector to de-expectilize.</p>
</td></tr>
<tr><td><code id="erfeVecR_+3A_yvec">yvec</code></td>
<td>
<p>Numeric vector of individual asymmetric weight.</p>
</td></tr>
<tr><td><code id="erfeVecR_+3A_pansizevec">panSizeVec</code></td>
<td>
<p>Numeric vector to individual panel size.</p>
</td></tr>
<tr><td><code id="erfeVecR_+3A_asym">asym</code></td>
<td>
<p>Numeric vector to individual panel size.</p>
</td></tr>
<tr><td><code id="erfeVecR_+3A_id">id</code></td>
<td>
<p>Numeric vector to individual panel size.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Return a list of objects related to the erfe model
such as the asymmetric point, the coefficient-estimate,
the standard deviation, the estimated covariance.
</p>


<h3>Author(s)</h3>

<p>Amadou Barry, <a href="mailto:barryhafia@gmail.com">barryhafia@gmail.com</a>
</p>


<h3>References</h3>

<p>Barry, Amadou, Oualkacha, Karim, and Charpentier 
Arthur. (2022). <em>Weighted asymmetric least squares
regression with fixed-effects</em>.
arXiv preprint arXiv:2108.04737
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(13)
temps_obs &lt;- 5
n_subj &lt;- 50
sig &lt;- diag(rep(1,temps_obs))
id &lt;- rep(1:n_subj, each=temps_obs)
rvec &lt;- c(mvtnorm::rmvnorm(n_subj, sigma = sig))
fvec &lt;- (1 + rep(rnorm(n_subj) , each=temps_obs))
xmat &lt;- cbind(rt(n_subj*temps_obs, df=2, ncp=1.3),
 1.2 * fvec + rnorm(n_subj * temps_obs, mean = 0.85, sd = 1.5) )
yvec &lt;- 0.6*xmat[, 1] + xmat[, 2] + fvec + rvec
asym &lt;- 0.5
panSizeVec &lt;- unname(unlist(lapply(split(id, id), function(x) length(x))))
erfeVecR(xmat, yvec, panSizeVec, asym, id)
</code></pre>

<hr>
<h2 id='sim_panel_data'>sim_panel_data for the erfe package</h2><span id='topic+sim_panel_data'></span>

<h3>Description</h3>

<p>Simulated toy data that comes with the erfe package.
The dataset is generated according to a location-shift Gaussian model
which corresponds to  model I of the manuscript simulation section.
The dataset is a balanced panel with 50 units and 5 within observations.
The dataset has 6 variables: id, pred1, pred2, resp, nobs, and year.
The variable id is the unit's ids, pred1 and pred2 are the main regressors.
The response variable is generated by two regressors (pred1 and pred2),
and one fixed-effect and a Gaussian error. The variable nobs is the number
of units and year is the panel number.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(sim_panel_data)
</code></pre>


<h3>Format</h3>

<p>An object of class <code>"data.frame"</code>
</p>

<dl>
<dt>id</dt><dd><p>The variable id is the unit's ids.</p>
</dd>
<dt>pred1</dt><dd><p>The first regressor.</p>
</dd>
<dt>pred2</dt><dd><p>The second regressor.</p>
</dd>
<dt>resp</dt><dd><p>The response variable.</p>
</dd>
<dt>nobs</dt><dd><p>The number of units.</p>
</dd>
<dt>year</dt><dd><p>The time ou panel variable.</p>
</dd>
</dl>



<h3>References</h3>

<p>This data set was artificially created for the erfe package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(sim_panel_data)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
