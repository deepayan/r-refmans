<!DOCTYPE html><html><head><title>Help for package saens</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {saens}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#AIC.eblupres'><p>Akaike's An Information Criterion.</p></a></li>
<li><a href='#autoplot'><p>Create a complete ggplot appropriate to a particular data type</p></a></li>
<li><a href='#autoplot.eblupres'><p>Autoplot EBLUP results.</p></a></li>
<li><a href='#coef.eblupres'><p>Extract Model Coefficients.</p></a></li>
<li><a href='#eblupfh'><p>EBLUPs based on a Fay-Herriot Model.</p></a></li>
<li><a href='#eblupfh_cluster'><p>EBLUPs based on a Fay-Herriot Model with Cluster Information.</p></a></li>
<li><a href='#logLik.eblupres'><p>Extract Log-Likelihood.</p></a></li>
<li><a href='#milk'><p>milk: Data on fresh milk expenditure.</p></a></li>
<li><a href='#mys'><p>mys: mean years of schooling people with disabilities in Papua Island, Indonesia.</p></a></li>
<li><a href='#summary.eblupres'><p>Summarizing EBLUP Model Fits.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Small Area Estimation with Cluster Information for Estimation of
Non-Sampled Areas</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Implementation of small area estimation (Fay-Herriot model) with EBLUP (Empirical Best Linear Unbiased Prediction) Approach for non-sampled area estimation by adding cluster information and assuming that there are similarities among particular areas. See also Rao &amp; Molina (2015, ISBN:978-1-118-73578-7) and Anisa et al. (2013) &lt;<a href="https://doi.org/10.9790%2F5728-10121519">doi:10.9790/5728-10121519</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/Alfrzlp/sae-ns">https://github.com/Alfrzlp/sae-ns</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/Alfrzlp/sae-ns/issues">https://github.com/Alfrzlp/sae-ns/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.00)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, dplyr, ggplot2, methods, rlang, stats, tidyr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-20 22:43:49 UTC; alfrz</td>
</tr>
<tr>
<td>Author:</td>
<td>Ridson Al Farizal P
    <a href="https://orcid.org/0000-0003-0617-0214"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre,
    cph],
  Azka Ubaidillah <a href="https://orcid.org/0000-0002-3597-0459"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ridson Al Farizal P &lt;alfrzlp@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-21 21:00:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='AIC.eblupres'>Akaike's An Information Criterion.</h2><span id='topic+AIC.eblupres'></span><span id='topic+BIC.eblupres'></span>

<h3>Description</h3>

<p>Generic function calculating Akaike's &quot;An Information Criterion&quot; for EBLUP model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'eblupres'
AIC(object, ...)

## S3 method for class 'eblupres'
BIC(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="AIC.eblupres_+3A_object">object</code></td>
<td>
<p>EBLUP model.</p>
</td></tr>
<tr><td><code id="AIC.eblupres_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>AIC value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>m1 &lt;- eblupfh_cluster(y ~ x1 + x2 + x3, data = mys, vardir = "var", cluster = "clust")
AIC(m1)

</code></pre>

<hr>
<h2 id='autoplot'>Create a complete ggplot appropriate to a particular data type</h2><span id='topic+autoplot'></span>

<h3>Description</h3>

<p><code>autoplot()</code> uses ggplot2 to draw a particular plot for an object of a
particular class in a single command. This defines the S3 generic that
other classes and packages can extend.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>autoplot(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="autoplot_+3A_object">object</code></td>
<td>
<p>an object, whose class will determine the behaviour of autoplot</p>
</td></tr>
<tr><td><code id="autoplot_+3A_...">...</code></td>
<td>
<p>other arguments passed to specific methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot object
</p>


<h3>See Also</h3>

<p><code><a href="ggplot2.html#topic+autolayer">autolayer()</a></code>, <code><a href="ggplot2.html#topic+ggplot">ggplot()</a></code> and <code><a href="ggplot2.html#topic+fortify">fortify()</a></code>
</p>

<hr>
<h2 id='autoplot.eblupres'>Autoplot EBLUP results.</h2><span id='topic+autoplot.eblupres'></span>

<h3>Description</h3>

<p>Autoplot EBLUP results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'eblupres'
autoplot(object, variable = "RSE", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="autoplot.eblupres_+3A_object">object</code></td>
<td>
<p>EBLUP model.</p>
</td></tr>
<tr><td><code id="autoplot.eblupres_+3A_variable">variable</code></td>
<td>
<p>variable to plot.</p>
</td></tr>
<tr><td><code id="autoplot.eblupres_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>plot.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(saens)

m1 &lt;- eblupfh_cluster(y ~ x1 + x2 + x3, data = mys, vardir = "var", cluster = "clust")
autoplot(m1)

</code></pre>

<hr>
<h2 id='coef.eblupres'>Extract Model Coefficients.</h2><span id='topic+coef.eblupres'></span>

<h3>Description</h3>

<p>Extract Model Coefficients.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'eblupres'
coef(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="coef.eblupres_+3A_object">object</code></td>
<td>
<p>EBLUP model.</p>
</td></tr>
<tr><td><code id="coef.eblupres_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>model coefficients
</p>


<h3>Examples</h3>

<pre><code class='language-R'>m1 &lt;- eblupfh_cluster(y ~ x1 + x2 + x3, data = mys, vardir = "var", cluster = "clust")
coef(m1)

</code></pre>

<hr>
<h2 id='eblupfh'>EBLUPs based on a Fay-Herriot Model.</h2><span id='topic+eblupfh'></span>

<h3>Description</h3>

<p>This function gives the Empirical Best Linear Unbiased Prediction (EBLUP) or Empirical Best (EB) predictor under normality based on a Fay-Herriot model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eblupfh(
  formula,
  data,
  vardir,
  method = "REML",
  maxiter = 100,
  precision = 1e-04,
  scale = FALSE,
  print_result = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="eblupfh_+3A_formula">formula</code></td>
<td>
<p>an object of class formula that contains a description of the model to be fitted. The variables included in the formula must be contained in the data.</p>
</td></tr>
<tr><td><code id="eblupfh_+3A_data">data</code></td>
<td>
<p>a data frame or a data frame extension (e.g. a tibble).</p>
</td></tr>
<tr><td><code id="eblupfh_+3A_vardir">vardir</code></td>
<td>
<p>vector or column names from data that contain variance sampling from the direct estimator for each area.</p>
</td></tr>
<tr><td><code id="eblupfh_+3A_method">method</code></td>
<td>
<p>Fitting method can be chosen between 'ML' and 'REML'.</p>
</td></tr>
<tr><td><code id="eblupfh_+3A_maxiter">maxiter</code></td>
<td>
<p>maximum number of iterations allowed in the Fisher-scoring algorithm. Default is 100 iterations.</p>
</td></tr>
<tr><td><code id="eblupfh_+3A_precision">precision</code></td>
<td>
<p>convergence tolerance limit for the Fisher-scoring algorithm. Default value is 0.0001.</p>
</td></tr>
<tr><td><code id="eblupfh_+3A_scale">scale</code></td>
<td>
<p>scaling auxiliary variable or not, default value is FALSE.</p>
</td></tr>
<tr><td><code id="eblupfh_+3A_print_result">print_result</code></td>
<td>
<p>print coefficient or not, default value is TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The model has a form that is response ~ auxiliary variables.
where numeric type response variables can contain NA.
When the response variable contains NA it will be estimated with cluster information.
</p>


<h3>Value</h3>

<p>The function returns a list with the following objects (<code>df_res</code> and <code>fit</code>):
<code>df_res</code> a data frame that contains the following columns: <br />
</p>

<ul>
<li> <p><code>y</code> variable response <br />
</p>
</li>
<li> <p><code>eblup</code> estimated results for each area <br />
</p>
</li>
<li> <p><code>random_effect</code> random effect for each area <br />
</p>
</li>
<li> <p><code>vardir</code> variance sampling from the direct estimator for each area <br />
</p>
</li>
<li> <p><code>mse</code> Mean Square Error <br />
</p>
</li>
<li> <p><code>rse</code> Relative Standart Error (%) <br />
</p>
</li></ul>

<p><code>fit</code> a list containing the following objects: <br />
</p>

<ul>
<li> <p><code>estcoef</code> a data frame with the estimated model coefficients in the first column (beta),
their asymptotic standard errors in the second column (std.error),
the t-statistics in the third column (tvalue) and the p-values of the significance of each coefficient
in last column (pvalue) <br />
</p>
</li>
<li> <p><code>model_formula</code> model formula applied <br />
</p>
</li>
<li> <p><code>method</code> type of fitting method applied (<code>ML</code> or <code>REML</code>) <br />
</p>
</li>
<li> <p><code>random_effect_var</code> estimated random effect variance <br />
</p>
</li>
<li> <p><code>convergence</code> logical value that indicates the Fisher-scoring algorithm has converged or not <br />
</p>
</li>
<li> <p><code>n_iter</code> number of iterations performed by the Fisher-scoring algorithm. <br />
</p>
</li>
<li> <p><code>goodness</code> vector containing several goodness-of-fit measures: loglikehood, AIC, and BIC <br />
</p>
</li></ul>



<h3>References</h3>


<ol>
<li><p> Rao, J. N., &amp; Molina, I. (2015). Small area estimation. John Wiley &amp; Sons.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>library(saens)

m1 &lt;- eblupfh(y ~ x1 + x2 + x3, data = na.omit(mys), vardir = "var")
m1 &lt;- eblupfh(y ~ x1 + x2 + x3, data = na.omit(mys), vardir = ~var)

</code></pre>

<hr>
<h2 id='eblupfh_cluster'>EBLUPs based on a Fay-Herriot Model with Cluster Information.</h2><span id='topic+eblupfh_cluster'></span>

<h3>Description</h3>

<p>This function gives the Empirical Best Linear Unbiased Prediction (EBLUP) or Empirical Best (EB) predictor based on a Fay-Herriot model with cluster information for non-sampled areas.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eblupfh_cluster(
  formula,
  data,
  vardir,
  cluster,
  method = "REML",
  maxiter = 100,
  precision = 1e-04,
  scale = FALSE,
  print_result = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="eblupfh_cluster_+3A_formula">formula</code></td>
<td>
<p>an object of class formula that contains a description of the model to be fitted. The variables included in the formula must be contained in the data.</p>
</td></tr>
<tr><td><code id="eblupfh_cluster_+3A_data">data</code></td>
<td>
<p>a data frame or a data frame extension (e.g. a tibble).</p>
</td></tr>
<tr><td><code id="eblupfh_cluster_+3A_vardir">vardir</code></td>
<td>
<p>vector or column names from data that contain variance sampling from the direct estimator for each area.</p>
</td></tr>
<tr><td><code id="eblupfh_cluster_+3A_cluster">cluster</code></td>
<td>
<p>vector or column name from data that contain cluster information.</p>
</td></tr>
<tr><td><code id="eblupfh_cluster_+3A_method">method</code></td>
<td>
<p>Fitting method can be chosen between 'ML' and 'REML'</p>
</td></tr>
<tr><td><code id="eblupfh_cluster_+3A_maxiter">maxiter</code></td>
<td>
<p>maximum number of iterations allowed in the Fisher-scoring algorithm. Default is 100 iterations.</p>
</td></tr>
<tr><td><code id="eblupfh_cluster_+3A_precision">precision</code></td>
<td>
<p>convergence tolerance limit for the Fisher-scoring algorithm. Default value is 0.0001.</p>
</td></tr>
<tr><td><code id="eblupfh_cluster_+3A_scale">scale</code></td>
<td>
<p>scaling auxiliary variable or not, default value is FALSE.</p>
</td></tr>
<tr><td><code id="eblupfh_cluster_+3A_print_result">print_result</code></td>
<td>
<p>print coefficient or not, default value is TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The model has a form that is response ~ auxiliary variables.
where numeric type response variables can contain NA.
When the response variable contains NA it will be estimated with cluster information.
</p>


<h3>Value</h3>

<p>The function returns a list with the following objects <code>df_res</code> and <code>fit</code>:
<code>df_res</code> a data frame that contains the following columns: <br />
</p>

<ul>
<li> <p><code>y</code> variable response <br />
</p>
</li>
<li> <p><code>eblup</code> estimated results for each area <br />
</p>
</li>
<li> <p><code>random_effect</code> random effect for each area <br />
</p>
</li>
<li> <p><code>vardir</code> variance sampling from the direct estimator for each area <br />
</p>
</li>
<li> <p><code>mse</code> Mean Square Error <br />
</p>
</li>
<li> <p><code>cluster</code> cluster information for each area <br />
</p>
</li>
<li> <p><code>rse</code> Relative Standart Error (%) <br />
</p>
</li></ul>

<p><code>fit</code> a list containing the following objects: <br />
</p>

<ul>
<li> <p><code>estcoef</code> a data frame with the estimated model coefficients in the first column (beta),
their asymptotic standard errors in the second column (std.error),
the t-statistics in the third column (tvalue) and the p-values of the significance of each coefficient
in last column (pvalue) <br />
</p>
</li>
<li> <p><code>model_formula</code> model formula applied <br />
</p>
</li>
<li> <p><code>method</code> type of fitting method applied (<code>ML</code> or <code>REML</code>) <br />
</p>
</li>
<li> <p><code>random_effect_var</code> estimated random effect variance <br />
</p>
</li>
<li> <p><code>convergence</code> logical value that indicates the Fisher-scoring algorithm has converged or not <br />
</p>
</li>
<li> <p><code>n_iter</code> number of iterations performed by the Fisher-scoring algorithm. <br />
</p>
</li>
<li> <p><code>goodness</code> vector containing several goodness-of-fit measures: loglikehood, AIC, and BIC <br />
</p>
</li></ul>



<h3>References</h3>


<ol>
<li><p> Rao, J. N., &amp; Molina, I. (2015). Small area estimation. John Wiley &amp; Sons.
</p>
</li>
<li><p> Anisa, R., Kurnia, A., &amp; Indahwati, I. (2013). Cluster information of non-sampled area in small area estimation. E-Prosiding Internasional| Departemen Statistika FMIPA Universitas Padjadjaran, 1(1), 69-76.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>library(saens)

m1 &lt;- eblupfh_cluster(y ~ x1 + x2 + x3, data = mys, vardir = "var", cluster = "clust")
m1 &lt;- eblupfh_cluster(y ~ x1 + x2 + x3, data = mys, vardir = ~var, cluster = ~clust)
</code></pre>

<hr>
<h2 id='logLik.eblupres'>Extract Log-Likelihood.</h2><span id='topic+logLik.eblupres'></span>

<h3>Description</h3>

<p>Extract Log-Likelihood.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'eblupres'
logLik(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="logLik.eblupres_+3A_object">object</code></td>
<td>
<p>EBLUP model.</p>
</td></tr>
<tr><td><code id="logLik.eblupres_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Log-Likehood value
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(saens)

model1 &lt;- eblupfh_cluster(y ~ x1 + x2 + x3, data = mys, vardir = "var", cluster = "clust")
logLik(model1)

</code></pre>

<hr>
<h2 id='milk'>milk: Data on fresh milk expenditure.</h2><span id='topic+milk'></span>

<h3>Description</h3>

<p>Data on fresh milk expenditure, used by Arora and Lahiri (1997) and by You and Chapman (2006).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>milk
</code></pre>


<h3>Format</h3>

<p>A data frame with 43 observations on the following 6 variables.
</p>

<dl>
<dt>SmallArea</dt><dd><p>areas of inferential interest.</p>
</dd>
<dt>ni</dt><dd><p>sample sizes of small areas.</p>
</dd>
<dt>yi</dt><dd><p>average expenditure on fresh milk for the year 1989 (direct estimates for the small areas).</p>
</dd>
<dt>SD</dt><dd><p>estimated standard deviations of yi.</p>
</dd>
<dt>var</dt><dd><p>variance sampling from the direct estimator (yi) for each area</p>
</dd>
<dt>CV</dt><dd><p>estimated coefficients of variation of yi.</p>
</dd>
<dt>MajorArea</dt><dd><p>major areas created by You and Chapman (2006). These areas have similar direct estimates and produce a large CV reduction when using a FH model.</p>
</dd>
</dl>



<h3>References</h3>


<ol>
<li><p> Arora, V. and Lahiri, P. (1997). On the superiority of the Bayesian method over the BLUP in small area estimation problems. Statistica Sinica 7, 1053-1063.
</p>
</li>
<li><p> You, Y. and Chapman, B. (2006). Small area estimation using area level models and estimated sampling variances. Survey Methodology 32, 97-103.
</p>
</li></ol>


<hr>
<h2 id='mys'>mys: mean years of schooling people with disabilities in Papua Island, Indonesia.</h2><span id='topic+mys'></span>

<h3>Description</h3>

<p>A dataset containing the mean years of schooling people with disabilities in Papua Island, Indonesia in 2021.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mys
</code></pre>


<h3>Format</h3>

<p>A data frame with 42 rows and 7 variables with 10 domains are non-sampled areas.
</p>

<dl>
<dt>area</dt><dd><p>regency municipality</p>
</dd>
<dt>y</dt><dd><p>mean years of schooling people with disabilities</p>
</dd>
<dt>var</dt><dd><p>variance sampling from the direct estimator for each area</p>
</dd>
<dt>rse</dt><dd><p>relative standard error (%)</p>
</dd>
<dt>x1</dt><dd><p>Number of Elementary Schools</p>
</dd>
<dt>x2</dt><dd><p>Number of Junior High Schools</p>
</dd>
<dt>x3</dt><dd><p>Number of Senior High Schools</p>
</dd>
<dt>clust</dt><dd><p>Cluster</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://www.bps.go.id">https://www.bps.go.id</a>
</p>

<hr>
<h2 id='summary.eblupres'>Summarizing EBLUP Model Fits.</h2><span id='topic+summary.eblupres'></span>

<h3>Description</h3>

<p>'summary' method for class &quot;eblupres&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'eblupres'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.eblupres_+3A_object">object</code></td>
<td>
<p>EBLUP model.</p>
</td></tr>
<tr><td><code id="summary.eblupres_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns a data frame that contains the following columns: <br />
* <code>y</code> variable response <br />
* <code>eblup</code> estimated results for each area <br />
* <code>random_effect</code> random effect for each area <br />
* <code>vardir</code> variance sampling from the direct estimator for each area <br />
* <code>mse</code> Mean Square Error <br />
* <code>cluster</code> cluster information for each area <br />
* <code>rse</code> Relative Standart Error (
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(saens)

model1 &lt;- eblupfh_cluster(y ~ x1 + x2 + x3, data = mys, vardir = "var", cluster = "clust")
summary(model1)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
