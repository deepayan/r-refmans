<!DOCTYPE html><html lang="en"><head><title>Help for package loggit2</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {loggit2}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#convert_lvl_input'><p>Convert Log Level Input to Integer</p></a></li>
<li><a href='#convert_to_csv'><p>Write log to csv file</p></a></li>
<li><a href='#find_call'><p>Find the Call of a Parent Function in the Call Hierarchy</p></a></li>
<li><a href='#get_echo'><p>Get echo</p></a></li>
<li><a href='#get_log_level'><p>Get Log Level</p></a></li>
<li><a href='#get_logfile'><p>Get Log File</p></a></li>
<li><a href='#get_lvl_int'><p>Get Log Level Integer</p></a></li>
<li><a href='#get_lvl_name'><p>Get Log Level Name</p></a></li>
<li><a href='#get_timestamp_format'><p>Get Timestamp Format</p></a></li>
<li><a href='#loggit'><p>Log messages and R objects</p></a></li>
<li><a href='#loggit_dots'><p>Internal logging function for custom log fields</p></a></li>
<li><a href='#loggit_internal'><p>Internal logging function</p></a></li>
<li><a href='#message'><p>Message Log Handler</p></a></li>
<li><a href='#read_logs'><p>Get log as <code>data.frame</code></p></a></li>
<li><a href='#read_ndjson'><p>Read ndJSON-formatted log file</p></a></li>
<li><a href='#rotate_logs'><p>Rotate log file</p></a></li>
<li><a href='#sanitizers'><p>Sanitization for ndJSON.</p></a></li>
<li><a href='#set_echo'><p>Set echo</p></a></li>
<li><a href='#set_log_level'><p>Set Log Level</p></a></li>
<li><a href='#set_logfile'><p>Set Log File</p></a></li>
<li><a href='#set_timestamp_format'><p>Set Timestamp Format</p></a></li>
<li><a href='#setup_echo'><p>Set up the echo for the application</p></a></li>
<li><a href='#setup_log_level'><p>Set up the log level for the application</p></a></li>
<li><a href='#setup_logfile'><p>Set up the logfile for the application</p></a></li>
<li><a href='#setup_timestamp_format'><p>Set up the timestamp format for the application</p></a></li>
<li><a href='#split_ndjson'><p>Convert a ndJSON object</p></a></li>
<li><a href='#stop'><p>Stop Log Handler</p></a></li>
<li><a href='#stopifnot'><p>Conditional Stop Log Handler</p></a></li>
<li><a href='#warning'><p>Warning Log Handler</p></a></li>
<li><a href='#with_loggit'><p>Log any expressions</p></a></li>
<li><a href='#write_ndjson'><p>Write ndJSON-formatted log file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Easy-to-Use, Dependencyless Logger</td>
</tr>
<tr>
<td>Description:</td>
<td>
    An easy-to-use 'ndjson' (newline-delimited 'JSON') logger.
    It provides a set of wrappers for base R's message(), warning(), and
    stop() functions that maintain identical functionality, but also log
    the handler message to an 'ndjson' log file.
    No change in existing code is necessary to use this package, 
    and only a few additional adjustments are needed to fully 
    utilize its potential.</td>
</tr>
<tr>
<td>Version:</td>
<td>2.3.1</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr (&ge; 1.19), rmarkdown (&ge; 1.8), testthat (&ge; 3.0), utils</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/MEO265/loggit2">https://github.com/MEO265/loggit2</a>, <a href="https://r-loggit.org/">https://r-loggit.org/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/MEO265/loggit2/issues">https://github.com/MEO265/loggit2/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-07-25 16:16:40 UTC; a501562</td>
</tr>
<tr>
<td>Author:</td>
<td>Matthias Ollech [cre, aut],
  Ryan Price [fnd, aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Matthias Ollech &lt;ollech@gmx.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-07-25 21:40:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='convert_lvl_input'>Convert Log Level Input to Integer</h2><span id='topic+convert_lvl_input'></span>

<h3>Description</h3>

<p>Convert Log Level Input to Integer
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_lvl_input(level)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="convert_lvl_input_+3A_level">level</code></td>
<td>
<p>Log level as character or numeric.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The log level integer.
</p>

<hr>
<h2 id='convert_to_csv'>Write log to csv file</h2><span id='topic+convert_to_csv'></span>

<h3>Description</h3>

<p>Creates a csv file from the ndjson log file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_to_csv(
  file,
  logfile = get_logfile(),
  unsanitize = FALSE,
  last_first = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="convert_to_csv_+3A_file">file</code></td>
<td>
<p>Path to write csv file to.</p>
</td></tr>
<tr><td><code id="convert_to_csv_+3A_logfile">logfile</code></td>
<td>
<p>Path to log file to read from.</p>
</td></tr>
<tr><td><code id="convert_to_csv_+3A_unsanitize">unsanitize</code></td>
<td>
<p>Should escaped special characters be unescaped?</p>
</td></tr>
<tr><td><code id="convert_to_csv_+3A_last_first">last_first</code></td>
<td>
<p>Should the last log entry be the first row of the data frame?</p>
</td></tr>
<tr><td><code id="convert_to_csv_+3A_...">...</code></td>
<td>
<p>Additional arguments to pass to <code>utils::write.csv()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Unescaping of special characters can lead to unexpected results. Use <code>unsanitize = TRUE</code> with caution.
</p>


<h3>Value</h3>

<p>Invisible <code>NULL</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  convert_to_csv("my_log.csv")

  convert_to_csv("my_log.csv", logfile = "my_log.log", last_first = TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='find_call'>Find the Call of a Parent Function in the Call Hierarchy</h2><span id='topic+find_call'></span>

<h3>Description</h3>

<p>This function is designed to inspect the call hierarchy and identify the call of a parent function.
Any wrapper environments above the global R environment that some IDEs cause are ignored.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_call()
</code></pre>


<h3>Value</h3>

<p>Returns the call of the parent function, or <code>NULL</code> if no such call is found.
</p>

<hr>
<h2 id='get_echo'>Get echo</h2><span id='topic+get_echo'></span>

<h3>Description</h3>

<p>Get echo
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_echo()
</code></pre>


<h3>Value</h3>

<p>Logical. Are log messages echoed to <code>stdout</code>?
</p>

<hr>
<h2 id='get_log_level'>Get Log Level</h2><span id='topic+get_log_level'></span>

<h3>Description</h3>

<p>Get Log Level
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_log_level()
</code></pre>


<h3>Value</h3>

<p>The log level.
</p>

<hr>
<h2 id='get_logfile'>Get Log File</h2><span id='topic+get_logfile'></span>

<h3>Description</h3>

<p>Return the log file that <code>loggit()</code> will write to by default.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_logfile()
</code></pre>


<h3>Value</h3>

<p>The log file path.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_logfile()

</code></pre>

<hr>
<h2 id='get_lvl_int'>Get Log Level Integer</h2><span id='topic+get_lvl_int'></span>

<h3>Description</h3>

<p>Get Log Level Integer
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_lvl_int(level)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_lvl_int_+3A_level">level</code></td>
<td>
<p>Log level as character.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The log level integer.
</p>

<hr>
<h2 id='get_lvl_name'>Get Log Level Name</h2><span id='topic+get_lvl_name'></span>

<h3>Description</h3>

<p>Get Log Level Name
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_lvl_name(level)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_lvl_name_+3A_level">level</code></td>
<td>
<p>Log level as integer.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The log level name.
</p>

<hr>
<h2 id='get_timestamp_format'>Get Timestamp Format</h2><span id='topic+get_timestamp_format'></span>

<h3>Description</h3>

<p>Get timestamp format for use in output logs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_timestamp_format()
</code></pre>


<h3>Value</h3>

<p>The timestamp format.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_timestamp_format()

</code></pre>

<hr>
<h2 id='loggit'>Log messages and R objects</h2><span id='topic+loggit'></span>

<h3>Description</h3>

<p>Log messages and R objects to a <a href="https://github.com/ndjson">ndjson</a> log file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loggit(
  log_lvl,
  log_msg,
  ...,
  echo = get_echo(),
  custom_log_lvl = FALSE,
  logfile = get_logfile(),
  ignore_log_level = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="loggit_+3A_log_lvl">log_lvl</code></td>
<td>
<p>Log level. A atomic vector of length one (usually <code>character</code>). Will be coerced to <code>character</code>.</p>
</td></tr>
<tr><td><code id="loggit_+3A_log_msg">log_msg</code></td>
<td>
<p>Log message. A atomic vector of length one (usually <code>character</code>). Will be coerced to <code>character</code>.</p>
</td></tr>
<tr><td><code id="loggit_+3A_...">...</code></td>
<td>
<p>Named arguments, each a atomic vector of length one, you wish to log. Will be coerced to <code>character</code>.
The names of the arguments are treated as column names in the log.</p>
</td></tr>
<tr><td><code id="loggit_+3A_echo">echo</code></td>
<td>
<p>Should the log entry (json) be echoed to <code>stdout</code> as well?</p>
</td></tr>
<tr><td><code id="loggit_+3A_custom_log_lvl">custom_log_lvl</code></td>
<td>
<p>Allow log levels other than &quot;DEBUG&quot;, &quot;INFO&quot;, &quot;WARN&quot;, and &quot;ERROR&quot;?</p>
</td></tr>
<tr><td><code id="loggit_+3A_logfile">logfile</code></td>
<td>
<p>Path of log file to write to.</p>
</td></tr>
<tr><td><code id="loggit_+3A_ignore_log_level">ignore_log_level</code></td>
<td>
<p>Ignore the log level set by <code>set_log_level()</code>?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisible <code>NULL</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  loggit("DEBUG", "This is a message")

  loggit("INFO", "This is a message", echo = FALSE)

  loggit("CUSTOM", "This is a message of a custom log_lvl", custom_log_lvl = TRUE)

  loggit(
   "INFO", "This is a message", but_maybe = "you want more fields?",
    sure = "why not?", like = 2, or = 10, what = "ever"
  )

## End(Not run)
</code></pre>

<hr>
<h2 id='loggit_dots'>Internal logging function for custom log fields</h2><span id='topic+loggit_dots'></span>

<h3>Description</h3>

<p>This function is used internally by the <code>loggit</code> function to log messages, levels, and custom fields.
Similar to <code>loggit_internal</code>, but with additional custom fields, and checks on those fields.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loggit_dots(log_lvl, log_msg, ..., echo, logfile = get_logfile())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="loggit_dots_+3A_log_lvl">log_lvl</code></td>
<td>
<p>Log level. A atomic vector of length one (usually <code>character</code>). Will be coerced to <code>character</code>.</p>
</td></tr>
<tr><td><code id="loggit_dots_+3A_log_msg">log_msg</code></td>
<td>
<p>Log message. A atomic vector of length one (usually <code>character</code>). Will be coerced to <code>character</code>.</p>
</td></tr>
<tr><td><code id="loggit_dots_+3A_...">...</code></td>
<td>
<p>Named arguments, each a atomic vector of length one, you wish to log. Will be coerced to <code>character</code>.
The names of the arguments are treated as column names in the log.</p>
</td></tr>
<tr><td><code id="loggit_dots_+3A_echo">echo</code></td>
<td>
<p>Should the log entry (json) be echoed to <code>stdout</code> as well?</p>
</td></tr>
<tr><td><code id="loggit_dots_+3A_logfile">logfile</code></td>
<td>
<p>A <code>connection</code>, or a character string naming the file to write to.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisible <code>NULL</code>.
</p>

<hr>
<h2 id='loggit_internal'>Internal logging function</h2><span id='topic+loggit_internal'></span>

<h3>Description</h3>

<p>This function is used internally by the <code>loggit</code> function to log messages and levels.
No checks are performed on the input, so it should used with caution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loggit_internal(log_lvl, log_msg, echo, logfile = get_logfile())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="loggit_internal_+3A_log_lvl">log_lvl</code></td>
<td>
<p>Log level. A atomic vector of length one (usually <code>character</code>). Will be coerced to <code>character</code>.</p>
</td></tr>
<tr><td><code id="loggit_internal_+3A_log_msg">log_msg</code></td>
<td>
<p>Log message. A atomic vector of length one (usually <code>character</code>). Will be coerced to <code>character</code>.</p>
</td></tr>
<tr><td><code id="loggit_internal_+3A_echo">echo</code></td>
<td>
<p>Should the log entry (json) be echoed to <code>stdout</code> as well?</p>
</td></tr>
<tr><td><code id="loggit_internal_+3A_logfile">logfile</code></td>
<td>
<p>A <code>connection</code>, or a character string naming the file to write to.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisible <code>NULL</code>.
</p>

<hr>
<h2 id='message'>Message Log Handler</h2><span id='topic+message'></span>

<h3>Description</h3>

<p>This function is identical to base R's <code><a href="base.html#topic+message">message</a></code>,
but it includes logging of the exception message via <code>loggit()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>message(..., domain = NULL, appendLF = TRUE, .loggit = NA, echo = get_echo())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="message_+3A_...">...</code></td>
<td>
<p>zero or more objects which can be coerced to character
(and which are pasted together with no separator) or (for
<code>message</code> only) a single condition object.</p>
</td></tr>
<tr><td><code id="message_+3A_domain">domain</code></td>
<td>
<p>see <code><a href="base.html#topic+gettext">gettext</a></code>.  If <code>NA</code>, messages will
not be translated, see also the note in <code><a href="base.html#topic+stop">stop</a></code>.</p>
</td></tr>
<tr><td><code id="message_+3A_appendlf">appendLF</code></td>
<td>
<p>logical: should messages given as a character string
have a newline appended?</p>
</td></tr>
<tr><td><code id="message_+3A_.loggit">.loggit</code></td>
<td>
<p>Should the condition message be added to the log?
If <code>NA</code> the log level set by <code>set_log_level()</code> is used to determine if the condition should be logged.</p>
</td></tr>
<tr><td><code id="message_+3A_echo">echo</code></td>
<td>
<p>Should the log entry (json) be echoed to <code>stdout</code> as well?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisible <code>NULL</code>.
</p>


<h3>See Also</h3>

<p>Other handlers: 
<code><a href="#topic+stop">stop</a>()</code>,
<code><a href="#topic+stopifnot">stopifnot</a>()</code>,
<code><a href="#topic+warning">warning</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  message("Don't say such silly things!")

  message("Don't say such silly things!", appendLF = FALSE, echo = FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='read_logs'>Get log as <code>data.frame</code></h2><span id='topic+read_logs'></span>

<h3>Description</h3>

<p>Returns a <code>data.frame</code> containing all the logs in the provided <code>ndjson</code> log file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_logs(logfile = get_logfile(), unsanitize = TRUE, last_first = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_logs_+3A_logfile">logfile</code></td>
<td>
<p>Path to log file to read from.</p>
</td></tr>
<tr><td><code id="read_logs_+3A_unsanitize">unsanitize</code></td>
<td>
<p>Should escaped special characters be unescaped?</p>
</td></tr>
<tr><td><code id="read_logs_+3A_last_first">last_first</code></td>
<td>
<p>Should the last log entry be the first row of the data frame?</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>read_logs()</code> returns a <code>data.frame</code> with the empty character columns &quot;timestamp&quot;, &quot;log_lvl&quot; and &quot;log_msg&quot;
if the log file has no entries.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code>, with the columns as the fields in the log file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  read_logs()

  read_logs(last_first = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='read_ndjson'>Read ndJSON-formatted log file</h2><span id='topic+read_ndjson'></span>

<h3>Description</h3>

<p>Read ndJSON-formatted log file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_ndjson(logfile, unsanitize = TRUE, last_first = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_ndjson_+3A_logfile">logfile</code></td>
<td>
<p>Path to log file to read from.</p>
</td></tr>
<tr><td><code id="read_ndjson_+3A_unsanitize">unsanitize</code></td>
<td>
<p>Should escaped special characters be unescaped?</p>
</td></tr>
<tr><td><code id="read_ndjson_+3A_last_first">last_first</code></td>
<td>
<p>Should the last log entry be the first row of the data frame?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code>, with the columns as the fields in the log file.
</p>

<hr>
<h2 id='rotate_logs'>Rotate log file</h2><span id='topic+rotate_logs'></span>

<h3>Description</h3>

<p>Truncates the log file to the line count provided as <code>rotate_lines</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rotate_logs(rotate_lines = 100000L, logfile = get_logfile())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rotate_logs_+3A_rotate_lines">rotate_lines</code></td>
<td>
<p>The number of log entries to keep in the logfile.</p>
</td></tr>
<tr><td><code id="rotate_logs_+3A_logfile">logfile</code></td>
<td>
<p>Log file to truncate.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisible <code>NULL</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  rotate_logs()

  rotate_logs(rotate_lines = 0L)

  rotate_logs(rotate_lines = 1000L, logfile = "my_log.log")

## End(Not run)
</code></pre>

<hr>
<h2 id='sanitizers'>Sanitization for ndJSON.</h2><span id='topic+sanitizers'></span><span id='topic+default_ndjson_sanitizer'></span><span id='topic+default_ndjson_unsanitizer'></span>

<h3>Description</h3>

<p><em>Sanitizer</em> and <em>unsanitizer</em> are needed because the <code>ndjson</code> format requires that each line be a valid JSON object,
thus special characters must be escaped. The functions worke in such a way that the concatenation
<code>unsanitizer(sanitizer())</code> corresponds to the identity function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_ndjson_sanitizer(string)

default_ndjson_unsanitizer(string)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sanitizers_+3A_string">string</code></td>
<td>
<p>A character vector.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The default sanatizer and unsanatizer are based on the following mapping:</p>

<table>
<tr>
 <td style="text-align: left;">
   Character </td><td style="text-align: left;"> Replacement </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code style="white-space: pre;">&#8288;\&#8288;</code> </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;\\&#8288;</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code style="white-space: pre;">&#8288;"&#8288;</code> </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;\"&#8288;</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code style="white-space: pre;">&#8288;\r&#8288;</code> </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;\\r&#8288;</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code style="white-space: pre;">&#8288;\n&#8288;</code> </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;\\n&#8288;</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Value</h3>

<p>A character vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  default_ndjson_sanitizer('This is \n an "example"')
  default_ndjson_unsanitizer('This is \\n an \\"example\\"')

## End(Not run)

</code></pre>

<hr>
<h2 id='set_echo'>Set echo</h2><span id='topic+set_echo'></span>

<h3>Description</h3>

<p>Set echo
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_echo(echo = TRUE, confirm = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_echo_+3A_echo">echo</code></td>
<td>
<p>Should log messages be echoed to <code>stdout</code>?</p>
</td></tr>
<tr><td><code id="set_echo_+3A_confirm">confirm</code></td>
<td>
<p>Print confirmation message of echo setting?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisible the previous echo setting.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 set_echo(TRUE)
 set_echo(FALSE)

## End(Not run)

</code></pre>

<hr>
<h2 id='set_log_level'>Set Log Level</h2><span id='topic+set_log_level'></span>

<h3>Description</h3>

<p>Set Log Level
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_log_level(level = "DEBUG", confirm = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_log_level_+3A_level">level</code></td>
<td>
<p>Log level to set, as a string or integer.</p>
</td></tr>
<tr><td><code id="set_log_level_+3A_confirm">confirm</code></td>
<td>
<p>Print confirmation message of log level?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Log levels are as follows:
DEBUG: 4
INFO: 3
WARNING: 2
ERROR: 1
NONE: 0
</p>


<h3>Value</h3>

<p>Invisible the previous log level.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 set_log_level("DEBUG")
 set_log_level("INFO")

 set_log_level(4)
 set_log_level(3)

## End(Not run)

</code></pre>

<hr>
<h2 id='set_logfile'>Set Log File</h2><span id='topic+set_logfile'></span>

<h3>Description</h3>

<p>Set the log file that loggit will write to by default.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_logfile(logfile = NULL, confirm = TRUE, create = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_logfile_+3A_logfile">logfile</code></td>
<td>
<p>Absolut or relative path to log file.
An attempt is made to convert the path into a canonical absolute form using <code><a href="base.html#topic+normalizePath">normalizePath()</a></code>.
If <code>NULL</code> will set to <code style="white-space: pre;">&#8288;&lt;tmpdir&gt;/loggit.log&#8288;</code>.</p>
</td></tr>
<tr><td><code id="set_logfile_+3A_confirm">confirm</code></td>
<td>
<p>Print confirmation of log file setting?</p>
</td></tr>
<tr><td><code id="set_logfile_+3A_create">create</code></td>
<td>
<p>Create the log file if it does not exist?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>No logs outside of a temporary directory will be written until this is set explicitly, as per CRAN policy.
Therefore, the default behavior is to create a file named <code>loggit.log</code> in your system's temporary directory.
</p>


<h3>Value</h3>

<p>Invisible the previous log file path.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  set_logfile("path/to/logfile.log")

## End(Not run)
</code></pre>

<hr>
<h2 id='set_timestamp_format'>Set Timestamp Format</h2><span id='topic+set_timestamp_format'></span>

<h3>Description</h3>

<p>Set timestamp format for use in output logs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_timestamp_format(ts_format = "%Y-%m-%dT%H:%M:%S%z", confirm = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_timestamp_format_+3A_ts_format">ts_format</code></td>
<td>
<p>ISO date format.</p>
</td></tr>
<tr><td><code id="set_timestamp_format_+3A_confirm">confirm</code></td>
<td>
<p>Print confirmation message of timestamp format?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function performs no time format validations, but will echo out the current time in
the provided format for manual validation.
</p>
<p>This function provides no means of setting a timezone, and instead relies on
the host system's time configuration to provide this. This is to enforce
consistency across software running on the host.
</p>


<h3>Value</h3>

<p>Invisible the previous timestamp format.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  set_timestamp_format("%Y-%m-%d %H:%M:%S")

## End(Not run)

</code></pre>

<hr>
<h2 id='setup_echo'>Set up the echo for the application</h2><span id='topic+setup_echo'></span>

<h3>Description</h3>

<p>This function retrieves the echo setting from the environment variable &quot;ECHO_LOGGIT2&quot;.
If the environment variable is set, it will be used as the echo setting.
If the environment variable is not set, the echo setting will be set to the default value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setup_echo()
</code></pre>


<h3>Details</h3>

<p>The environment variable must be set to one of: &quot;TRUE&quot; or &quot;FALSE&quot;.
</p>


<h3>Value</h3>

<p>Invisible the previous echo setting.
</p>

<hr>
<h2 id='setup_log_level'>Set up the log level for the application</h2><span id='topic+setup_log_level'></span>

<h3>Description</h3>

<p>This function retrieves the log level from the environment variable &quot;LEVEL_LOGGIT2&quot;.
If the environment variable is set, it will be used as the log level.
If the environment variable is not set, the log level will be set to the default value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setup_log_level()
</code></pre>


<h3>Details</h3>

<p>The environment variable must be set to one of: &quot;DEBUG&quot;, &quot;INFO&quot;, &quot;WARN&quot;, &quot;ERROR&quot; or &quot;NONE&quot;.
</p>


<h3>Value</h3>

<p>Invisible the previous log level.
</p>

<hr>
<h2 id='setup_logfile'>Set up the logfile for the application</h2><span id='topic+setup_logfile'></span>

<h3>Description</h3>

<p>This function retrieves the logfile path from the environment variable &quot;FILE_LOGGIT2&quot;.
If the environment variable is set, it will be used as the logfile path.
If the environment variable is not set, the logfile path will be set to the default value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setup_logfile()
</code></pre>


<h3>Value</h3>

<p>Invisible the previous log file path.
</p>

<hr>
<h2 id='setup_timestamp_format'>Set up the timestamp format for the application</h2><span id='topic+setup_timestamp_format'></span>

<h3>Description</h3>

<p>This function retrieves the timestamp format from the environment variable &quot;TIMESTAMP_LOGGIT2&quot;.
If the environment variable is set, it will be used as the timestamp format.
If the environment variable is not set, the timestamp format will be set to the default value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setup_timestamp_format()
</code></pre>


<h3>Value</h3>

<p>Invisible the previous timestamp format.
</p>

<hr>
<h2 id='split_ndjson'>Convert a ndJSON object</h2><span id='topic+split_ndjson'></span>

<h3>Description</h3>

<p>Split a vector of JSON strings into a list of R objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>split_ndjson(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="split_ndjson_+3A_x">x</code></td>
<td>
<p>A vector of JSON strings.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the same length as <code>x</code>, each containing two character vectors: <code>keys</code> and <code>values</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  split_ndjson(c('{"a": "1", "b": "2"}', '{"a": "3", "b": "4", "c": "5"}'))

## End(Not run)
</code></pre>

<hr>
<h2 id='stop'>Stop Log Handler</h2><span id='topic+stop'></span>

<h3>Description</h3>

<p>This function is identical to base R's <code><a href="base.html#topic+stop">stop</a></code>,
but it includes logging of the exception message via <code>loggit()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stop(..., call. = TRUE, domain = NULL, .loggit = NA, echo = get_echo())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stop_+3A_...">...</code></td>
<td>
<p>zero or more objects which can be coerced to character
(and which are pasted together with no separator) or a single
condition object.</p>
</td></tr>
<tr><td><code id="stop_+3A_call.">call.</code></td>
<td>
<p>logical, indicating if the call should become part of the
error message.</p>
</td></tr>
<tr><td><code id="stop_+3A_domain">domain</code></td>
<td>
<p>see <code><a href="base.html#topic+gettext">gettext</a></code>.  If <code>NA</code>, messages will
not be translated.</p>
</td></tr>
<tr><td><code id="stop_+3A_.loggit">.loggit</code></td>
<td>
<p>Should the condition message be added to the log?
If <code>NA</code> the log level set by <code>set_log_level()</code> is used to determine if the condition should be logged.</p>
</td></tr>
<tr><td><code id="stop_+3A_echo">echo</code></td>
<td>
<p>Should the log entry (json) be echoed to <code>stdout</code> as well?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value.
</p>


<h3>See Also</h3>

<p>Other handlers: 
<code><a href="#topic+message">message</a>()</code>,
<code><a href="#topic+stopifnot">stopifnot</a>()</code>,
<code><a href="#topic+warning">warning</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  stop("This is a completely false condition")

  stop("This is a completely false condition", echo = FALSE)

## End(Not run)

</code></pre>

<hr>
<h2 id='stopifnot'>Conditional Stop Log Handler</h2><span id='topic+stopifnot'></span>

<h3>Description</h3>

<p>This function is identical to base R's <code><a href="base.html#topic+stopifnot">stopifnot</a></code>,
but it includes logging of the exception message via <code>loggit()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stopifnot(..., exprs, exprObject, local, .loggit = NA, echo = get_echo())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stopifnot_+3A_...">...</code>, <code id="stopifnot_+3A_exprs">exprs</code></td>
<td>
<p>any number of <code>R</code> expressions, which should each evaluate to (a logical vector of all) <code>TRUE</code>.
Use <em>either</em> <code>...</code> <em>or</em> <code>exprs</code>, the latter typically an unevaluated expression of the form
</p>
<div class="sourceCode"><pre>{
  expr1
  expr2
  ....
}
</pre></div>
<p>Note that e.g., positive numbers are not <code>TRUE</code>, even when they are coerced to <code>TRUE</code>, e.g., inside <code style="white-space: pre;">&#8288;if(.)&#8288;</code> or
in arithmetic computations in <code>R</code>.
If names are provided to <code>...</code>, they will be used in lieu of the default error message.</p>
</td></tr>
<tr><td><code id="stopifnot_+3A_exprobject">exprObject</code></td>
<td>
<p>alternative to <code>exprs</code> or <code>...</code>:
an &lsquo;expression-like&rsquo; object, typically an
<code><a href="base.html#topic+expression">expression</a></code>, but also a <code><a href="base.html#topic+call">call</a></code>, a
<code><a href="base.html#topic+name">name</a></code>, or atomic constant such as <code>TRUE</code>.
</p>
</td></tr>
<tr><td><code id="stopifnot_+3A_local">local</code></td>
<td>
<p>(only when <code>exprs</code> is used:) indicates the
<code><a href="base.html#topic+environment">environment</a></code> in which the expressions should be
evaluated; by default the one from where <code>stopifnot()</code> has been
called.</p>
</td></tr>
<tr><td><code id="stopifnot_+3A_.loggit">.loggit</code></td>
<td>
<p>Should the condition message be added to the log?
If <code>NA</code> the log level set by <code>set_log_level()</code> is used to determine if the condition should be logged.</p>
</td></tr>
<tr><td><code id="stopifnot_+3A_echo">echo</code></td>
<td>
<p>Should the log entry (json) be echoed to <code>stdout</code> as well?</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other handlers: 
<code><a href="#topic+message">message</a>()</code>,
<code><a href="#topic+stop">stop</a>()</code>,
<code><a href="#topic+warning">warning</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 stopifnot("This is a completely false condition" = FALSE)

 stopifnot(5L == 5L, "This is a completely false condition" = FALSE, echo = FALSE)

## End(Not run)

</code></pre>

<hr>
<h2 id='warning'>Warning Log Handler</h2><span id='topic+warning'></span>

<h3>Description</h3>

<p>This function is identical to base R's <code><a href="base.html#topic+warning">warning</a></code>,
but it includes logging of the exception message via <code>loggit()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>warning(
  ...,
  call. = TRUE,
  immediate. = FALSE,
  noBreaks. = FALSE,
  domain = NULL,
  .loggit = NA,
  echo = get_echo()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="warning_+3A_...">...</code></td>
<td>
<p>zero or more objects which can be coerced to character
(and which are pasted together with no separator) or a single
condition object.</p>
</td></tr>
<tr><td><code id="warning_+3A_call.">call.</code></td>
<td>
<p>logical, indicating if the call should become part of the
warning message.</p>
</td></tr>
<tr><td><code id="warning_+3A_immediate.">immediate.</code></td>
<td>
<p>logical, indicating if the call should be output
immediately, even if <code><a href="base.html#topic+getOption">getOption</a>("warn") &lt;= 0</code>.</p>
</td></tr>
<tr><td><code id="warning_+3A_nobreaks.">noBreaks.</code></td>
<td>
<p>logical, indicating as far as possible the message should
be output as a single line when <code>options(warn = 1)</code>.</p>
</td></tr>
<tr><td><code id="warning_+3A_domain">domain</code></td>
<td>
<p>see <code><a href="base.html#topic+gettext">gettext</a></code>.  If <code>NA</code>, messages will
not be translated, see also the note in <code><a href="base.html#topic+stop">stop</a></code>.</p>
</td></tr>
<tr><td><code id="warning_+3A_.loggit">.loggit</code></td>
<td>
<p>Should the condition message be added to the log?
If <code>NA</code> the log level set by <code>set_log_level()</code> is used to determine if the condition should be logged.</p>
</td></tr>
<tr><td><code id="warning_+3A_echo">echo</code></td>
<td>
<p>Should the log entry (json) be echoed to <code>stdout</code> as well?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The warning message as <code><a href="base.html#topic+character">character</a></code> string, invisibly.
</p>


<h3>See Also</h3>

<p>Other handlers: 
<code><a href="#topic+message">message</a>()</code>,
<code><a href="#topic+stop">stop</a>()</code>,
<code><a href="#topic+stopifnot">stopifnot</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  warning("You may want to review that math")

  warning("You may want to review that math", immediate = FALSE, echo = FALSE)

## End(Not run)

</code></pre>

<hr>
<h2 id='with_loggit'>Log any expressions</h2><span id='topic+with_loggit'></span>

<h3>Description</h3>

<p>Log code without having to explicitly use the <code>loggit2</code> handlers.
This is particularly useful for code that cannot be customized, e.g. from third-party packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>with_loggit(
  exp,
  logfile = get_logfile(),
  echo = get_echo(),
  log_level = get_log_level()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="with_loggit_+3A_exp">exp</code></td>
<td>
<p>An <code>expression</code> to evaluate.</p>
</td></tr>
<tr><td><code id="with_loggit_+3A_logfile">logfile</code></td>
<td>
<p>Path of log file to write to.</p>
</td></tr>
<tr><td><code id="with_loggit_+3A_echo">echo</code></td>
<td>
<p>Should the log entry (json) be echoed to <code>stdout</code> as well?</p>
</td></tr>
<tr><td><code id="with_loggit_+3A_log_level">log_level</code></td>
<td>
<p>The log level to use.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>loggit2</code> handlers are already used in the expression, this can lead to conditions being logged
twice (in the same or different files).
</p>


<h3>Value</h3>

<p>The result of the expression.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 x &lt;- with_loggit(5L + 5L)

 with_loggit(base::message("Test log message"))

 with_loggit(base::warning("Test log message"), echo = FALSE, logfile = "my_log.log")

 x &lt;- with_loggit({
    y &lt;- 5L
    base::message("Test log message")
    base::warning("Test log message")
    1L + y
 })

## End(Not run)

</code></pre>

<hr>
<h2 id='write_ndjson'>Write ndJSON-formatted log file</h2><span id='topic+write_ndjson'></span>

<h3>Description</h3>

<p>Write ndJSON-formatted log file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_ndjson(
  log_df,
  logfile = get_logfile(),
  echo = get_echo(),
  overwrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write_ndjson_+3A_log_df">log_df</code></td>
<td>
<p>A <code>data.frame</code>. Entries are converted to <code>ndjson</code>, with the columns as the fields.</p>
</td></tr>
<tr><td><code id="write_ndjson_+3A_logfile">logfile</code></td>
<td>
<p>A <code>connection</code>, or a character string naming the file to write to.</p>
</td></tr>
<tr><td><code id="write_ndjson_+3A_echo">echo</code></td>
<td>
<p>Should the log entry (json) be echoed to <code>stdout</code> as well?</p>
</td></tr>
<tr><td><code id="write_ndjson_+3A_overwrite">overwrite</code></td>
<td>
<p>Overwrite previous log file?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisible <code>NULL</code>.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
