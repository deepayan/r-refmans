<!DOCTYPE html><html><head><title>Help for package QHScrnomo</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {QHScrnomo}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#anova.cmprsk'><p>ANOVA Table for a Competing Risks Regression Model</p></a></li>
<li><a href='#cindex'><p>Concordance Index Calculation (C-Index)</p></a></li>
<li><a href='#crr.fit'><p>Fit A Competing Risks Regression Model</p></a></li>
<li><a href='#groupci'><p>Assess Calibration for a Competing Risks Endpoint</p></a></li>
<li><a href='#Newlabels.cmprsk'><p>Change the Predictor Labels for a Competing Risks Regression Model</p></a></li>
<li><a href='#Newlevels.cmprsk'><p>Change the Level Labels of Categorical Predictors for a Competing Risks Regression Model</p></a></li>
<li><a href='#nomogram.crr'><p>Construct a Nomogram for a Competing Risks Regression Model</p></a></li>
<li><a href='#nomogram.mk6'><p>Construct a Nomogram for a Regression Model</p></a></li>
<li><a href='#pred.ci'><p>Extract Cumulative Incidence Estimates at a Specified Time Point</p></a></li>
<li><a href='#predict.cmprsk'><p>Calculate the Failure Time Probability from a Competing Risks Regression Model</p></a></li>
<li><a href='#prostate.dat'><p>Prostate cancer data set</p></a></li>
<li><a href='#sas.cmprsk'><p>Generate a Prediction Equation for a Competing Risks Regression Model</p></a></li>
<li><a href='#summary.cmprsk'><p>Summary of a Competing Risks Regression Model</p></a></li>
<li><a href='#tenf.crr'><p>Obtain K-Fold Cross-Validated Predictions</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Construct Nomograms for Competing Risks Regression Models</td>
</tr>
<tr>
<td>Version:</td>
<td>3.0.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Nomograms are constructed to predict the cumulative incidence
    rate which is calculated after adjusting for competing causes to the event of interest. 
    K-fold cross-validation is implemented to validate predictive accuracy using a competing-risk version of the concordance index.
    Methods are as described in: Kattan MW, Heller G, 
    Brennan MF (2003).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Imports:</td>
<td>cmprsk, Hmisc</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0), rms</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ClevelandClinicQHS/QHScrnomo">https://github.com/ClevelandClinicQHS/QHScrnomo</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ClevelandClinicQHS/QHScrnomo/issues">https://github.com/ClevelandClinicQHS/QHScrnomo/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-18 21:04:02 UTC; alexzajichek</td>
</tr>
<tr>
<td>Author:</td>
<td>Michael Kattan [aut],
  Changhong Yu [aut],
  Xinge Ji [aut],
  Zajichek Alex [cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Zajichek Alex &lt;zajicha2@ccf.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-18 21:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='anova.cmprsk'>ANOVA Table for a Competing Risks Regression Model</h2><span id='topic+anova.cmprsk'></span>

<h3>Description</h3>

<p>Uses the <code><a href="rms.html#topic+anova.rms">anova.rms</a></code> method to construct an analysis of variance table for the competing risks regression model fit from <code><a href="#topic+crr.fit">crr.fit</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'cmprsk'
anova(object,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="anova.cmprsk_+3A_object">object</code></td>
<td>
<p>A model fit by <code><a href="#topic+crr.fit">crr.fit</a></code></p>
</td></tr>
<tr><td><code id="anova.cmprsk_+3A_...">...</code></td>
<td>
<p>Not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code><a href="rms.html#topic+anova.rms">anova.rms</a></code> matrix
</p>


<h3>Note</h3>

<p>This function requires that the <code><a href="rms.html#topic+rms">rms</a></code> package is attached
</p>


<h3>Author(s)</h3>

<p>Changhong Yu. Department of
Quantitative Health Sciences, Cleveland Clinic
</p>


<h3>See Also</h3>

<p><code><a href="#topic+crr.fit">crr.fit</a></code> <code><a href="rms.html#topic+anova.rms">anova.rms</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dd &lt;- datadist(prostate.dat)
options(datadist = "dd")
prostate.f &lt;- cph(Surv(TIME_EVENT,EVENT_DOD == 1) ~ TX  + rcs(PSA,3) +
           BX_GLSN_CAT +  CLIN_STG + rcs(AGE,3) +
           RACE_AA, data = prostate.dat,
           x = TRUE, y = TRUE, surv = TRUE,time.inc = 144)
prostate.crr &lt;- crr.fit(prostate.f, cencode = 0, failcode = 1)
anova(prostate.crr)

</code></pre>

<hr>
<h2 id='cindex'>Concordance Index Calculation (C-Index)</h2><span id='topic+cindex'></span>

<h3>Description</h3>

<p>Computes the concordance index for a predictor as a discrimination metric for binary, time-to-event, and competing risks outcomes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cindex(
  prob,
  fstatus,
  ftime,
  type = "crr",
  failcode = 1,
  cencode = 0,
  tol = 1e-20
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cindex_+3A_prob">prob</code></td>
<td>
<p>A risk score (typically a probability giving the risk of event failure)</p>
</td></tr>
<tr><td><code id="cindex_+3A_fstatus">fstatus</code></td>
<td>
<p>The event status</p>
</td></tr>
<tr><td><code id="cindex_+3A_ftime">ftime</code></td>
<td>
<p>The event times. Applies when the <code>type</code> argument is <code>"survival"</code> or <code>"crr"</code></p>
</td></tr>
<tr><td><code id="cindex_+3A_type">type</code></td>
<td>
<p>The outcome type: <code>"logistic"</code> for binary, <code>"survival"</code> for ordinary time-to-event, and <code>"crr"</code> for competing risks outcomes. Defaults to <code>"crr"</code>.</p>
</td></tr>
<tr><td><code id="cindex_+3A_failcode">failcode</code></td>
<td>
<p>The value of <code>fstatus</code> that indicates the event of interest. Defaults to <code>1</code>.</p>
</td></tr>
<tr><td><code id="cindex_+3A_cencode">cencode</code></td>
<td>
<p>The censoring event code. Defaults to <code>0</code>.</p>
</td></tr>
<tr><td><code id="cindex_+3A_tol">tol</code></td>
<td>
<p>Error tolerance (not used)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named vector with following elements:
</p>
<table>
<tr><td><code>N</code></td>
<td>
<p>Total number of observations in the input data</p>
</td></tr>
<tr><td><code>n</code></td>
<td>
<p>Number of observations used for calculation</p>
</td></tr>
<tr><td><code>usable</code></td>
<td>
<p>Total number of usable pairs</p>
</td></tr>
<tr><td><code>concordant</code></td>
<td>
<p>Number of concordant pairs</p>
</td></tr>
<tr><td><code>cindex</code></td>
<td>
<p>The concordance index: number of concordant pairs divided by the total number of usable pairs</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Changhong Yu, Michael Kattan, Brian Wells, Amy Nowacki.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dd &lt;- datadist(prostate.dat)
options(datadist = "dd")
prostate.f &lt;- cph(Surv(TIME_EVENT,EVENT_DOD == 1) ~ TX  + rcs(PSA,3) +
           BX_GLSN_CAT +  CLIN_STG + rcs(AGE,3) +
           RACE_AA, data = prostate.dat,
           x = TRUE, y = TRUE, surv = TRUE,time.inc = 144)
prostate.crr &lt;- crr.fit(prostate.f, cencode = 0, failcode = 1)

# Cross-validated predictions
prostate.dat$preds.cv.prostate.crr.120 &lt;- tenf.crr(prostate.crr, time = 120, fold = 2)

## calculate the competing-risks version of concordance index
with(prostate.dat, cindex(preds.cv.prostate.crr.120,
                          ftime = TIME_EVENT,
                          fstatus =EVENT_DOD, type = "crr"))["cindex"]

</code></pre>

<hr>
<h2 id='crr.fit'>Fit A Competing Risks Regression Model</h2><span id='topic+crr.fit'></span>

<h3>Description</h3>

<p>Fits a competing risks regression model using the <code><a href="cmprsk.html#topic+crr">crr</a></code> function from an existing <code><a href="rms.html#topic+cph">cph</a></code>
object which can then be used to construct a nomogram.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crr.fit(fit, cencode = 0, failcode = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crr.fit_+3A_fit">fit</code></td>
<td>
<p>A Cox proportional hazards regression model constructed from <code><a href="rms.html#topic+cph">cph</a></code> (by Frank Harrell)</p>
</td></tr>
<tr><td><code id="crr.fit_+3A_cencode">cencode</code></td>
<td>
<p>The value of the status column that indicates a censored observation</p>
</td></tr>
<tr><td><code id="crr.fit_+3A_failcode">failcode</code></td>
<td>
<p>The value of the status column that indicates the event of interest</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list of class <code>cmprsk</code>, with components:
</p>
<table>
<tr><td><code>coef</code></td>
<td>
<p>the estimated regression coefficients</p>
</td></tr>
<tr><td><code>loglik</code></td>
<td>
<p>log pseudo-liklihood evaluated at coef</p>
</td></tr>
<tr><td><code>lscore</code></td>
<td>
<p>derivitives of the log pseudo-likelihood evaluated at coef</p>
</td></tr>
<tr><td><code>inf</code></td>
<td>
<p>-second derivatives of the log pseudo-likelihood</p>
</td></tr>
<tr><td><code>var</code></td>
<td>
<p>estimated variance covariance matrix of coef</p>
</td></tr>
<tr><td><code>res</code></td>
<td>
<p>matrix of residuals giving the contribution to each score
(columns) at each unique failure time (rows)</p>
</td></tr>
<tr><td><code>uftime</code></td>
<td>
<p>vector of unique failure times</p>
</td></tr>
<tr><td><code>bfitj</code></td>
<td>
<p>jumps in the Breslow-type estimate of the underlying
sub-distribution cumulative hazard (used by predict.crr())</p>
</td></tr>
<tr><td><code>tfs</code></td>
<td>
<p>the tfs matrix (output of  tf(), if used)</p>
</td></tr>
<tr><td><code>converged</code></td>
<td>
<p>TRUE if the iterative algorithm converged.</p>
</td></tr>
<tr><td><code>cencode</code></td>
<td>
<p>the value of the status indicator that indicates
a censored observation</p>
</td></tr>
<tr><td><code>failcode</code></td>
<td>
<p>the value of the status indicator that indicates an
event of interest</p>
</td></tr>
<tr><td><code>cph.f</code></td>
<td>
<p>regular survival model fitted by cph which is saved for
function <code>nomogram.crr</code> to adjust lp for
competing risks</p>
</td></tr>
<tr><td><code>cphdat</code></td>
<td>
<p>data used for cph model, where all
predictors are represented in numeric format, which is used by function
<code>tenf.crr</code> to do ten fold cross-validation</p>
</td></tr>
</table>


<h3>Note</h3>

<p>This function requires that the <code><a href="rms.html#topic+rms">rms</a></code> package is attached
</p>


<h3>Author(s)</h3>

<p>Michael W. Kattan, Ph.D. and Changhong Yu. Department of
Quantitative Health Sciences, Cleveland Clinic
</p>


<h3>References</h3>

<p>Michael W. Kattan, Glenn Heller and Murray F. Brennan (2003). A
competing-risks nomogram for sarcoma-specific death following local
recurrence. Statistics in Medicine. <code>Stat Med</code>. 2003;22:3515-3525.
</p>


<h3>See Also</h3>

<p><code><a href="rms.html#topic+cph">cph</a></code> <code><a href="cmprsk.html#topic+crr">crr</a></code>
<code>nomogram.crr</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dd &lt;- datadist(prostate.dat)
options(datadist = "dd")
prostate.f &lt;- cph(Surv(TIME_EVENT,EVENT_DOD == 1) ~ TX  + rcs(PSA,3) +
           BX_GLSN_CAT +  CLIN_STG + rcs(AGE,3) +
           RACE_AA, data = prostate.dat,
           x = TRUE, y = TRUE, surv = TRUE,time.inc = 144)
prostate.crr &lt;- crr.fit(prostate.f, cencode = 0, failcode = 1)
prostate.crr
</code></pre>

<hr>
<h2 id='groupci'>Assess Calibration for a Competing Risks Endpoint</h2><span id='topic+groupci'></span>

<h3>Description</h3>

<p>Uses <code><a href="cmprsk.html#topic+cuminc">cuminc</a></code> to estimate the cumulative incidence at a given time point within subgroups of a continuous variable (often predicted failure probabilities from a <code><a href="#topic+crr.fit">crr.fit</a></code> model).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>groupci(
  x,
  ftime,
  fstatus,
  u,
  cencode = 0,
  failcode = 1,
  ci = TRUE,
  m = 50,
  g = NULL,
  cuts = NULL,
  pl = TRUE,
  conf.int = 0.95,
  xlab = NULL,
  ylab = NULL,
  xlim = c(0, 1),
  ylim = c(0, 1),
  lty = 1,
  add = FALSE,
  cex.subtitle = FALSE,
  ab = TRUE,
  a = 0,
  b = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="groupci_+3A_x">x</code></td>
<td>
<p>A numeric variable to assess calibration for</p>
</td></tr>
<tr><td><code id="groupci_+3A_ftime">ftime</code></td>
<td>
<p>The event time variable. See <code><a href="cmprsk.html#topic+cuminc">cuminc</a></code>.</p>
</td></tr>
<tr><td><code id="groupci_+3A_fstatus">fstatus</code></td>
<td>
<p>The event status variable. See <code><a href="cmprsk.html#topic+cuminc">cuminc</a></code>.</p>
</td></tr>
<tr><td><code id="groupci_+3A_u">u</code></td>
<td>
<p>A single time point to assess calibration at</p>
</td></tr>
<tr><td><code id="groupci_+3A_cencode">cencode</code></td>
<td>
<p>The censoring event code. See <code><a href="cmprsk.html#topic+cuminc">cuminc</a></code>.</p>
</td></tr>
<tr><td><code id="groupci_+3A_failcode">failcode</code></td>
<td>
<p>The value of <code>fstatus</code> that indicates the event of interest</p>
</td></tr>
<tr><td><code id="groupci_+3A_ci">ci</code></td>
<td>
<p>Should the failure probability be assessed? Defaults to <code>TRUE</code>. If <code>FALSE</code>, the event-free probability is assessed.</p>
</td></tr>
<tr><td><code id="groupci_+3A_m">m</code></td>
<td>
<p>Minimum number of observations in each group. See <code><a href="Hmisc.html#topic+cut2">cut2</a></code>.</p>
</td></tr>
<tr><td><code id="groupci_+3A_g">g</code></td>
<td>
<p>Number of quantile groups. See <code><a href="Hmisc.html#topic+cut2">cut2</a></code>.</p>
</td></tr>
<tr><td><code id="groupci_+3A_cuts">cuts</code></td>
<td>
<p>Actual cut points to use for <code>x</code>. See <code><a href="Hmisc.html#topic+cut2">cut2</a></code>.</p>
</td></tr>
<tr><td><code id="groupci_+3A_pl">pl</code></td>
<td>
<p>Should the calibration curve be plotted? Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="groupci_+3A_conf.int">conf.int</code></td>
<td>
<p>Confidence limit on error bars. Defaults to 0.95. Set to <code>FALSE</code> to suppress.</p>
</td></tr>
<tr><td><code id="groupci_+3A_xlab">xlab</code></td>
<td>
<p>The x-axis label. Uses <code><a href="Hmisc.html#topic+label">label</a></code> or name of calling argument if not specified.</p>
</td></tr>
<tr><td><code id="groupci_+3A_ylab">ylab</code></td>
<td>
<p>The y-axis label. Uses a default label is none specified.</p>
</td></tr>
<tr><td><code id="groupci_+3A_xlim">xlim</code></td>
<td>
<p>The x-axis limits. Defaults to c(0, 1).</p>
</td></tr>
<tr><td><code id="groupci_+3A_ylim">ylim</code></td>
<td>
<p>The y-axis limits. Defaults to c(0, 1).</p>
</td></tr>
<tr><td><code id="groupci_+3A_lty">lty</code></td>
<td>
<p>Line type for connecting estimates and error bars</p>
</td></tr>
<tr><td><code id="groupci_+3A_add">add</code></td>
<td>
<p>Defaults to <code>FALSE</code>. Set to <code>TRUE</code> to add to an existing plot.</p>
</td></tr>
<tr><td><code id="groupci_+3A_cex.subtitle">cex.subtitle</code></td>
<td>
<p>Character size for subtitle (default 0.7). Defaults to <code>FALSE</code> to suppress.</p>
</td></tr>
<tr><td><code id="groupci_+3A_ab">ab</code></td>
<td>
<p>Should a reference line be added? See <code><a href="graphics.html#topic+abline">abline</a></code>.</p>
</td></tr>
<tr><td><code id="groupci_+3A_a">a</code></td>
<td>
<p>The intercept for the reference line. See <code><a href="graphics.html#topic+abline">abline</a></code>.</p>
</td></tr>
<tr><td><code id="groupci_+3A_b">b</code></td>
<td>
<p>The slope for the reference line. See <code><a href="graphics.html#topic+abline">abline</a></code>.</p>
</td></tr>
<tr><td><code id="groupci_+3A_...">...</code></td>
<td>
<p>Other arguments passed to <code><a href="graphics.html#topic+lines">lines</a></code> and <code><a href="Hmisc.html#topic+errbar">errbar</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To divide <code>x</code>, the function first looks for <code>cuts</code>, then <code>g</code>, then <code>m</code>.
</p>


<h3>Value</h3>

<p>A matrix with a row for each group of <code>x</code>:
</p>
<table>
<tr><td><code>x</code></td>
<td>
<p>Mean value of <code>x</code></p>
</td></tr>
<tr><td><code>n</code></td>
<td>
<p>Number of observations</p>
</td></tr>
<tr><td><code>events</code></td>
<td>
<p>Number of events (of type <code>failcode</code>)</p>
</td></tr>
<tr><td><code>ci</code></td>
<td>
<p>Estimated cumulative incidence (or event-free probability if <code>ci=FALSE</code>)</p>
</td></tr>
<tr><td><code>std.err</code></td>
<td>
<p>Estimated standard error for the <code>ci</code> value</p>
</td></tr>
</table>
<p>If <code>pl=TRUE</code>, a calibration plot is also displayed.
</p>


<h3>Author(s)</h3>

<p>Changhong Yu, Michael Kattan, Ph.D <br /> Department of Quantitative Health Sciences<br /> Cleveland Clinic<br />
</p>


<h3>See Also</h3>

<p><code><a href="cmprsk.html#topic+cuminc">cuminc</a></code> <code><a href="#topic+pred.ci">pred.ci</a></code> <code><a href="Hmisc.html#topic+cut2">cut2</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dd &lt;- datadist(prostate.dat)
options(datadist = "dd")
prostate.f &lt;- cph(Surv(TIME_EVENT,EVENT_DOD == 1) ~ TX  + rcs(PSA,3) +
           BX_GLSN_CAT +  CLIN_STG + rcs(AGE,3) +
           RACE_AA, data = prostate.dat,
           x = TRUE, y = TRUE, surv = TRUE,time.inc = 144)
prostate.crr &lt;- crr.fit(prostate.f, cencode = 0, failcode = 1)

# Cross-validated predictions
prostate.dat$preds.cv.prostate.crr.120 &lt;- tenf.crr(prostate.crr, time = 120, fold = 2)

with(prostate.dat,
     groupci(preds.cv.prostate.crr.120, ftime = TIME_EVENT,
             fstatus =EVENT_DOD, g = 5, u = 120,
             xlab = "Nomogram predicted 10-year cancerspecific mortality",
             ylab = "Observed predicted 10-year cancerspecific mortality")
)

</code></pre>

<hr>
<h2 id='Newlabels.cmprsk'>Change the Predictor Labels for a Competing Risks Regression Model</h2><span id='topic+Newlabels.cmprsk'></span>

<h3>Description</h3>

<p>Uses the <code><a href="rms.html#topic+Newlabels">Newlabels</a></code> function to change the labels predictors when constructing a nomogram.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'cmprsk'
Newlabels(fit, labels, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Newlabels.cmprsk_+3A_fit">fit</code></td>
<td>
<p>A model fit by <code><a href="#topic+crr.fit">crr.fit</a></code></p>
</td></tr>
<tr><td><code id="Newlabels.cmprsk_+3A_labels">labels</code></td>
<td>
<p>A character vector specifying the new labels for variables in a fit.</p>
</td></tr>
<tr><td><code id="Newlabels.cmprsk_+3A_...">...</code></td>
<td>
<p>Other arguments for <code><a href="rms.html#topic+Newlabels">Newlabels</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>To give new labels for all variables, you can specify labels of the
form <code>labels = c("Age in Years","Cholesterol")</code>, where the list of new labels
is assumed to be the length of all main effect-type variables in the fit
and in their original order in the model formula. You may specify a named
vector to give new labels in any order for a subset of the variables,
e.g., <code>labels = c(age = "Age in Years", chol = "Cholesterol")</code>.
</p>


<h3>Value</h3>

<p>A new <code><a href="#topic+crr.fit">crr.fit</a></code> object with adjusted labels
</p>


<h3>Author(s)</h3>

<p>Changhong Yu. Department of
Quantitative Health Sciences, Cleveland Clinic
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Newlevels.cmprsk">Newlevels.cmprsk</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dd &lt;- datadist(prostate.dat)
options(datadist = "dd")
prostate.f &lt;- cph(Surv(TIME_EVENT,EVENT_DOD == 1) ~ TX  + rcs(PSA,3) +
           BX_GLSN_CAT +  CLIN_STG + rcs(AGE,3) +
           RACE_AA, data = prostate.dat,
           x = TRUE, y = TRUE, surv = TRUE,time.inc = 144)
prostate.crr &lt;- crr.fit(prostate.f, cencode = 0, failcode = 1)
prostate.g &lt;- Newlabels(
prostate.crr,
c(
  TX = 'Treatment options',
  BX_GLSN_CAT = 'Biopsy Gleason Score Sum',
  CLIN_STG = 'Clinical stage'
)
)

</code></pre>

<hr>
<h2 id='Newlevels.cmprsk'>Change the Level Labels of Categorical Predictors for a Competing Risks Regression Model</h2><span id='topic+Newlevels.cmprsk'></span>

<h3>Description</h3>

<p>Uses the <code><a href="rms.html#topic+Newlevels">Newlevels</a></code> function to change the labels predictors when constructing a nomogram.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'cmprsk'
Newlevels(fit, levels, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Newlevels.cmprsk_+3A_fit">fit</code></td>
<td>
<p>A model fit by <code><a href="#topic+crr.fit">crr.fit</a></code></p>
</td></tr>
<tr><td><code id="Newlevels.cmprsk_+3A_levels">levels</code></td>
<td>
<p>A list of named vectors specifying the new level labels for categorical predictors.</p>
</td></tr>
<tr><td><code id="Newlevels.cmprsk_+3A_...">...</code></td>
<td>
<p>Other arguments for <code><a href="rms.html#topic+Newlevels">Newlevels</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A new <code><a href="#topic+crr.fit">crr.fit</a></code> object with adjusted labels on the factor levels
</p>


<h3>Note</h3>

<p>This will override <code>parms</code> and <code><a href="rms.html#topic+datadist">datadist</a></code> information that were stored with the fit.
</p>


<h3>Author(s)</h3>

<p>Changhong Yu. Department of
Quantitative Health Sciences, Cleveland Clinic
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Newlabels.cmprsk">Newlabels.cmprsk</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dd &lt;- datadist(prostate.dat)
options(datadist = "dd")
prostate.f &lt;- cph(Surv(TIME_EVENT,EVENT_DOD == 1) ~ TX  + rcs(PSA,3) +
           BX_GLSN_CAT +  CLIN_STG + rcs(AGE,3) +
           RACE_AA, data = prostate.dat,
           x = TRUE, y = TRUE, surv = TRUE,time.inc = 144)
prostate.crr &lt;- crr.fit(prostate.f, cencode = 0, failcode = 1)
prostate.g &lt;- Newlevels(prostate.crr, list(TX = c('Treatment 1', 'Treatment 2', 'Treatment 3')))

</code></pre>

<hr>
<h2 id='nomogram.crr'>Construct a Nomogram for a Competing Risks Regression Model</h2><span id='topic+nomogram.crr'></span>

<h3>Description</h3>

<p>Draws a partial nomogram from a <code><a href="#topic+crr.fit">crr.fit</a></code> object that can be used to manually obtain predicted values from from a competing risks regression model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nomogram.crr(
  fit,
  failtime,
  ci = TRUE,
  ...,
  adj.to,
  lp = TRUE,
  lp.at,
  lplabel = "Linear Predictor",
  fun.at,
  fun.lp.at,
  funlabel = "Predicted Value",
  fun.side,
  interact = NULL,
  intercept = 1,
  conf.int = FALSE,
  col.conf = c(1, 12),
  conf.space = c(0.08, 0.2),
  conf.lp = c("representative", "all", "none"),
  est.all = TRUE,
  abbrev = FALSE,
  minlength = 4,
  maxscale = 100,
  nint = 10,
  label.every = 1,
  force.label = FALSE,
  xfrac = 0.35,
  cex.axis = 0.85,
  cex.var = 1,
  col.grid = FALSE,
  vnames = c("labels", "names"),
  varname.label = TRUE,
  varname.label.sep = "=",
  ia.space = 0.7,
  tck = -0.009,
  lmgp = 0.4,
  omit = NULL,
  naxes,
  points.label = "Points",
  total.points.label = "Total Points",
  total.sep.page = FALSE,
  total.fun,
  verbose = FALSE,
  total.min,
  total.max,
  mikeomit = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nomogram.crr_+3A_fit">fit</code></td>
<td>
<p>A model fit by <code><a href="#topic+crr.fit">crr.fit</a></code></p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_failtime">failtime</code></td>
<td>
<p>A vector of time points to display failure probability axes for.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_ci">ci</code></td>
<td>
<p>Should the failure probability be displayed? Defaults to <code>TRUE</code>. If <code>FALSE</code>, the event-free probability is displayed.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_...">...</code></td>
<td>
<p>Settings of variables to use in constructing axes.
If <code>datadist</code> was in effect, the default is to use <code>pretty(total range, nint)</code>
for continuous variables, and the class levels for discrete ones.
For <code>legend.nomabbrev</code>, <code>...</code> specifies optional parameters to pass to the legend.
Common ones are <code>bty = "n"</code> to suppress drawing the box. You may want to
specify a non-proportionally spaced font (e.g., courier) number if
abbreviations are more than one letter long. This will make the abbreviation
definitions line up (e.g., specify font = 2, the default for courier).
Ignored for print.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_adj.to">adj.to</code></td>
<td>
<p>If <code>datadist</code> was not defined for all predictors, it is required to define adjustment settings for the undefined ones (e.g. <code>adj.to=list(age=50, sex="female")</code>).</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_lp">lp</code></td>
<td>
<p>Set to <code>FALSE</code> to suppress creation of an axis for scoring <code class="reqn">X\beta</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_lp.at">lp.at</code></td>
<td>
<p>If <code>lp=TRUE</code>, specifies a vector of settings of <code class="reqn">X\beta</code>. Default is to use <code>pretty(range of linear predictors, nint)</code>.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_lplabel">lplabel</code></td>
<td>
<p>label for linear predictor axis. Default is <code>"Linear Predictor"</code>.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_fun.at">fun.at</code></td>
<td>
<p>Function values to label on axis. Default <code>fun</code>
evaluated at <code>lp.at</code>. If more than one <code>fun</code> was specified,
using a vector for <code>fun.at</code> will cause all functions to be evaluated
at the same argument values. To use different values, specify a list of
vectors for <code>fun.at</code>, with elements corresponding to the different
functions (lists of vectors also applies to <code>fun.lp.at</code> and
<code>fun.side</code>).</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_fun.lp.at">fun.lp.at</code></td>
<td>
<p>If you want to evaluate one of the functions at a
different set of linear predictor values than may have been used in
constructing the linear predictor axis, specify a vector or list of
vectors of linear predictor values at which to evaluate the function.
This is especially useful for discrete functions. The presence of this
attribute also does away with the need for <code>nomogram</code> to compute
numerical approximations of the inverse of the function.  It also allows
the user-supplied function to return <code>factor</code> objects, which is
useful when e.g. a single tick mark position actually represents a range.
If the <code>fun.lp.at</code> parameter is present, the <code>fun.at</code> vector
for that function is ignored.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_funlabel">funlabel</code></td>
<td>
<p>Label for <code>fun</code> axis. If more than one function was
given but <code>funlabel</code> is of length one, it will be duplicated as needed. If
<code>fun</code> is a list of functions for which you specified names (see the
final example below), these names will be used as labels.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_fun.side">fun.side</code></td>
<td>
<p>A vector or list of vectors of <code>side</code> parameters for
the <code>axis</code> function for labeling function values. Values may be 1 to
position a tick mark label below the axis (the default), or 3 for above
the axis. If for example an axis has 5 tick mark labels and the second
and third will run into each other, specify <code>fun.side=c(1,1,3,1,1)</code>
(assuming only one function is specified as <code>fun</code>).</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_interact">interact</code></td>
<td>
<p>When a continuous variable interacts with a discrete one,
axes are constructed so that the continuous variable moves within the
axis, and separate axes represent levels of interacting factors. For
interactions between two continuous variables, all but the axis variable
must have discrete levels defined in <code>interact</code>. For discrete
interacting factors, you may specify levels to use in constructing the
multiple axes. For continuous interacting factors, you must do this.
Examples: <code>interact=list(age=seq(10,70,by=10),
  treat=c("A","B","D"))</code>.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_intercept">intercept</code></td>
<td>
<p>For models such as the ordinal logistic model with
multiple intercepts, specifies which one to use in evaluating the linear
predictor.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_conf.int">conf.int</code></td>
<td>
<p>Confidence levels to display for each scoring. Default is
<code>FALSE</code> to display no confidence limits. Setting <code>conf.int</code> to
<code>TRUE</code> is the same as setting it to <code>c(0.7, 0.9)</code>, with the
line segment between the 0.7 and 0.9 levels shaded using gray scale.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_col.conf">col.conf</code></td>
<td>
<p>Colors corresponding to <code>conf.int</code>. Use fractions for
gray scale (for UNIX S-PLUS).</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_conf.space">conf.space</code></td>
<td>
<p>A 2-element vector with the vertical range within which
to draw confidence bars, in units of 1=spacing between main bars. Four
heights are used within this range (8 for the linear predictor if more
than 16 unique values were evaluated), cycling them among separate
confidence intervals to reduce overlapping.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_conf.lp">conf.lp</code></td>
<td>
<p>Default is <code>"representative"</code> to group all linear
predictors evaluated into deciles, and to show, for the linear predictor
confidence intervals, only the mean linear predictor within the deciles
along with the median standard error within the deciles. Set
<code>conf.lp="none"</code> to suppress confidence limits for the linear
predictors, and to <code>"all"</code> to show all confidence limits.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_est.all">est.all</code></td>
<td>
<p>To plot axes for only the subset of variables named in
<code>...{}</code>, set <code>est.all=FALSE</code>. Note: This option only works
when zero has a special meaning for the variables that are omitted from
the graph.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_abbrev">abbrev</code></td>
<td>
<p>Set to <code>TRUE</code> to use the <code>abbreviate</code> function to
abbreviate levels of categorical factors, both for labeling tick marks
and for axis titles. If you only want to abbreviate certain predictor
variables, set <code>abbrev</code> to a vector of character strings containing
their names.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_minlength">minlength</code></td>
<td>
<p>Applies if <code>abbrev=TRUE</code>. Is the minimum
abbreviation length passed to the <code>abbreviate</code> function. If you set
<code>minlength=1</code>, the letters of the alphabet are used to label tick
marks for categorical predictors, and all letters are drawn no matter how
close together they are. For labeling axes (interaction settings),
<code>minlength=1</code> causes <code>minlength=4</code> to be used.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_maxscale">maxscale</code></td>
<td>
<p>Default maximum point score is 100.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_nint">nint</code></td>
<td>
<p>Number of intervals to label for axes representing continuous variables. See <code><a href="base.html#topic+pretty">pretty</a></code>.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_label.every">label.every</code></td>
<td>
<p>Specify <code>label.every=i</code> to label on every <code>i</code>th tick mark.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_force.label">force.label</code></td>
<td>
<p>Set to <code>TRUE</code> to force every tick mark intended to
be labeled to have a label plotted (whether the labels run into each
other or not)</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_xfrac">xfrac</code></td>
<td>
<p>Fraction of horizontal plot to set aside for axis titles</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_cex.axis">cex.axis</code></td>
<td>
<p>Character size for tick mark labels</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_cex.var">cex.var</code></td>
<td>
<p>Character size for axis titles (variable names)</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_col.grid">col.grid</code></td>
<td>
<p>If <code>col.grid=1</code>, no gray scale is used, but an
ordinary line is drawn. If <code>0&lt;col.grid&lt;1</code>, a <code>col</code> (gray
scale) of <code>col.grid</code> is used to draw vertical reference lines for
major axis divisions and <code>col.grid/2</code> for minor divisions. The
default is <code>col.grid=FALSE</code>, i.e., reference lines are omitted.
Specifying <code>col.grid=TRUE</code> is the same as specifying a gray scale
level of <code>col.grid=.2</code> (5 for Windows S-PLUS).</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_vnames">vnames</code></td>
<td>
<p>By default, variable labels are used to label axes. Set
<code>vnames="names"</code> to instead use variable names.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_varname.label">varname.label</code></td>
<td>
<p>In constructing axis titles for interactions, the
default is to add <code>"(interacting.varname=level)"</code> on the right.
Specify <code>varname.label=FALSE</code> to instead use <code>"(level)"</code>.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_varname.label.sep">varname.label.sep</code></td>
<td>
<p>If <code>varname.label=TRUE</code>, you can change the
separator to something other than <code>=</code> by specifying this parameter.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_ia.space">ia.space</code></td>
<td>
<p>When multiple axes are draw for levels of interacting
factors, the default is to group combinations related to a main effect.
This is done by spacing the axes for the second to last of these within a
group only 0.7 (by default) of the way down as compared with normal space
of 1 unit.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_tck">tck</code></td>
<td>
<p>See <code>tck</code> under <code>par</code>.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_lmgp">lmgp</code></td>
<td>
<p>Spacing between numeric axis labels and axis (see <code>par</code> for <code>mgp</code>)</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_omit">omit</code></td>
<td>
<p>Vector of character strings containing names of variables for
which to suppress drawing axes. Default is to show all variables.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_naxes">naxes</code></td>
<td>
<p>Maximum number of axes to allow on one plot. If the nomogram
requires more than one &quot;page&quot;, the &quot;Points&quot; axis will be repeated at the
top of each page when necessary.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_points.label">points.label</code></td>
<td>
<p>A character string giving the axis label for the points scale</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_total.points.label">total.points.label</code></td>
<td>
<p>A character string giving the axis label for the total points scale</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_total.sep.page">total.sep.page</code></td>
<td>
<p>Set to <code>TRUE</code> to force the total points and later axes to be placed on a separate page</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_total.fun">total.fun</code></td>
<td>
<p>A user-provided function that will be executed before the
total points axis is drawn. Default is not to execute a function. This
is useful e.g. when <code>total.sep.page=TRUE</code> and you wish to use
<code>locator</code> to find the coordinates for positioning an abbreviation
legend before it's too late and a new page is started (i.e.,
<code>total.fun=function()print(locator(1))</code>).</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_verbose">verbose</code></td>
<td>
<p>Set to <code>TRUE</code> to get printed output detailing how tick
marks are chosen and labeled for function axes. This is useful in seeing
how certain linear predictor values cannot be solved for using inverse
linear interpolation on the (requested linear predictor values, function
values at these lp values). When this happens you will see <code>NA</code>s in
the <code>verbose</code> output, and the corresponding tick marks will not
appear in the nomogram.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_total.min">total.min</code></td>
<td>
<p>Setting the minimal value in the total point axis on the nomogram.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_total.max">total.max</code></td>
<td>
<p>Setting the maximal value in the total point axis.</p>
</td></tr>
<tr><td><code id="nomogram.crr_+3A_mikeomit">mikeomit</code></td>
<td>
<p>The predictor variables specified by their names here will
not be shown in the nomogram. The predicted outcome based on this
reduced nomogram would be the same as if users were using the full
version of the nomogram by entering the some values for the predictors
remaining in the reduced nomogram but adjusted values for the hiden
predictors so that 0 points will be achieved from these hiden predictor
variables in the full nomogram.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of class <code>"nomogram"</code> that contains information used in
plotting the axes. Please see <code><a href="rms.html#topic+nomogram">nomogram</a></code> for details.
</p>


<h3>Author(s)</h3>

<p>Changhong Yu, Michael Kattan, Ph.D <br /> Department of Quantitative
Health Sciences<br /> Cleveland Clinic<br />
</p>
<p>Frank Harrell<br />
Department of Biostatistics<br />
Vanderbilt University<br />
<a href="mailto:f.harrell@vanderbilt.edu">f.harrell@vanderbilt.edu</a>
</p>


<h3>References</h3>

<p>Banks J: Nomograms. Encylopedia of Statistical Sciences, Vol 6.
Editors: S Kotz and NL Johnson.  New York: Wiley; 1985.
</p>
<p>Lubsen J, Pool J, van der Does, E: A practical device for the application
of a diagnostic or prognostic function.  Meth. Inform. Med. 17:127&ndash;129;
1978.
</p>
<p>Wikipedia: Nomogram, <a href="https://en.wikipedia.org/wiki/Nomogram">https://en.wikipedia.org/wiki/Nomogram</a>.
</p>
<p>Michael W. Kattan, Glenn Heller and Murray F. Brennan (2003). A
competing-risks nomogram <br /> for sarcoma-specific death following local
recurrence. Statistics in Medicine. <code>Stat Med</code>. 2003;22:3515-3525.
</p>


<h3>See Also</h3>

<p><code><a href="rms.html#topic+nomogram">nomogram</a></code> <code><a href="#topic+nomogram.mk6">nomogram.mk6</a></code> <code><a href="#topic+crr.fit">crr.fit</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(prostate.dat)
dd &lt;- datadist(prostate.dat)
options(datadist = "dd")
prostate.f &lt;- cph(Surv(TIME_EVENT,EVENT_DOD == 1) ~ TX  + rcs(PSA,3) +
           BX_GLSN_CAT +  CLIN_STG + rcs(AGE,3) +
           RACE_AA, data = prostate.dat,
           x = TRUE, y= TRUE, surv=TRUE,time.inc = 144)
prostate.crr &lt;- crr.fit(prostate.f,cencode = 0,failcode = 1)
## make a CRR nomogram
nomogram.crr(prostate.crr,failtime = 120,lp=FALSE,
funlabel = "Predicted 10-year cumulative incidence")

</code></pre>

<hr>
<h2 id='nomogram.mk6'>Construct a Nomogram for a Regression Model</h2><span id='topic+nomogram.mk6'></span>

<h3>Description</h3>

<p>Draws a partial nomogram that can be used to manually obtain predicted values. This is a modified version of <code><a href="rms.html#topic+nomogram">nomogram</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nomogram.mk6(
  fit,
  ...,
  adj.to,
  lp = TRUE,
  lp.at,
  lplabel = "Linear Predictor",
  fun,
  fun.at,
  fun.lp.at,
  funlabel = "Predicted Value",
  fun.side,
  interact = NULL,
  intercept = 1,
  conf.int = FALSE,
  col.conf = c(1, 12),
  conf.space = c(0.08, 0.2),
  conf.lp = c("representative", "all", "none"),
  est.all = TRUE,
  abbrev = FALSE,
  minlength = 4,
  maxscale = 100,
  nint = 10,
  label.every = 1,
  force.label = FALSE,
  xfrac = 0.35,
  cex.axis = 0.85,
  cex.var = 1,
  col.grid = NULL,
  vnames = c("labels", "names"),
  varname.label = TRUE,
  varname.label.sep = "=",
  ia.space = 0.7,
  tck = NA,
  tcl = -0.25,
  lmgp = 0.4,
  omit = NULL,
  naxes,
  points.label = "Points",
  total.points.label = "Total Points",
  total.sep.page = FALSE,
  total.fun,
  verbose = FALSE,
  cap.labels = FALSE,
  total.min,
  total.max,
  survtime,
  mikeomit = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nomogram.mk6_+3A_fit">fit</code></td>
<td>
<p>A regression model that was created with <code>library(rms)</code>
in effect, and (usually) with <code>options(datadist = "object.name")</code> in
effect.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_...">...</code></td>
<td>
<p>Settings of variables to use in constructing axes.
If <code>datadist</code> was in effect, the default is to use
<code>pretty(total range, nint)</code> for continuous variables, and the class
levels for discrete ones.
For <code>legend.nomabbrev</code>, <code>...</code> specifies optional parameters to
pass to <code>legend</code>.  Common ones are <code>bty = "n"</code> to suppress
drawing the box.  You may want to specify a non-proportionally spaced font
(e.g., courier) number if abbreviations are more than one letter long.
This will make the abbreviation definitions line up (e.g., specify
<code>font = 2</code>, the default for courier).  Ignored for <code>print</code>.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_adj.to">adj.to</code></td>
<td>
<p>If you didn't define <code>datadist</code> for all predictors,
you will have to define adjustment settings for the undefined ones, e.g.
<code>adj.to= list(age = 50, sex = "female")</code>.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_lp">lp</code></td>
<td>
<p>Set to <code>FALSE</code> to suppress creation of an axis for scoring
<code class="reqn">X\beta</code>.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_lp.at">lp.at</code></td>
<td>
<p>If <code>lp=TRUE</code>, <code>lp.at</code> may specify a vector of
settings of <code class="reqn">X\beta</code>.
Default is to use <code>pretty(range of linear predictors, nint)</code>.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_lplabel">lplabel</code></td>
<td>
<p>label for linear predictor axis.
Default is <code>"Linear Predictor"</code>.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_fun">fun</code></td>
<td>
<p>on another axis.  If more than one transformation is plotted,
put them in a list, e.g. <code>list(function(x) x/2, function(x) 2*x)</code>.
Any function values equal to <code>NA</code> will be ignored.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_fun.at">fun.at</code></td>
<td>
<p>function values to label on axis.  Default <code>fun</code>
evaluated at <code>lp.at</code>.   If more than one <code>fun</code> was specified,
using a vector for <code>fun.at</code> will cause all functions to be evaluated
at the same argument values.  To use different values, specify a list of
vectors for <code>fun.at</code>, with elements corresponding to the different
functions (lists of vectors also applies to <code>fun.lp.at</code> and
<code>fun.side</code>).</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_fun.lp.at">fun.lp.at</code></td>
<td>
<p>If you want to
evaluate one of the functions at a different set of linear predictor
values than may have been used in constructing the linear predictor axis,
specify a vector or list of vectors
of linear predictor values at which to evaluate the function.  This is
especially useful for discrete functions.  The presence of this attribute
also does away with the need for <code>nomogram</code> to compute numerical
approximations of the inverse of the function.  It also allows the
user-supplied function to return <code>factor</code> objects, which is useful
when e.g. a single tick mark position actually represents a range.
If the <code>fun.lp.at</code> parameter is present, the <code>fun.at</code>
vector for that function is ignored.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_funlabel">funlabel</code></td>
<td>
<p>label for <code>fun</code> axis.  If more than one function was
given but funlabel is of length one, it will be duplicated as needed.
If <code>fun</code> is a list of functions for which you specified names (see the
final example below), these names will be used as labels.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_fun.side">fun.side</code></td>
<td>
<p>a vector or list of vectors of <code>side</code> parameters for
the <code>axis</code> function for labeling function values.
Values may be 1 to position a tick mark label below the axis (the default),
or 3 for above the axis.  If for example an axis has 5 tick mark labels
and the second and third will run into each other, specify
<code>fun.side=c(1,1,3,1,1)</code> (assuming only one function is specified as
<code>fun</code>).</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_interact">interact</code></td>
<td>
<p>When a continuous variable interacts with a discrete one,
axes are constructed so that the continuous variable moves within the axis,
and separate axes represent levels of interacting factors.  For
interactions between two continuous variables, all but the axis variable
must have discrete levels defined in <code>interact</code>.
For discrete interacting factors, you may specify levels to use in
constructing the multiple axes.  For continuous interacting factors,
you must do this.  Examples: <code>interact = list(age = seq(10,70,by=10),
treat = c("A","B","D"))</code>.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_intercept">intercept</code></td>
<td>
<p>for models such as the ordinal logistic model with
multiple intercepts, specifies which one to use in evaluating the linear
predictor.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_conf.int">conf.int</code></td>
<td>
<p>confidence levels to display for each scoring.
Default is <code>FALSE</code> to display no confidence limits.
Setting <code>conf.int</code> to <code>TRUE</code> is the same as
setting it to <code>c(0.7, 0.9)</code>,
with the line segment between the 0.7 and 0.9 levels shaded using
gray scale.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_col.conf">col.conf</code></td>
<td>
<p>colors corresponding to <code>conf.int</code>.
Use fractions for gray scale(for UNIX S-PLUS).</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_conf.space">conf.space</code></td>
<td>
<p>a 2-element vector with the vertical range within which
to draw confidence bars, in units of 1=spacing between main bars.  Four
heights are used within this range (8 for the linear predictor if more than
16 unique values were evaluated), cycling them among separate confidence
intervals to reduce overlapping</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_conf.lp">conf.lp</code></td>
<td>
<p>default is <code>"representative"</code> to group all linear
predictors evaluated into deciles, and to show, for the linear predictor
confidence intervals, only the mean linear predictor within the deciles
along with the median standard error within the deciles.  Set
<code>conf.lp = "none"</code> to suppress confidence limits for the linear
predictors, and to <code>"all"</code> to show all confidence limits.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_est.all">est.all</code></td>
<td>
<p>To plot axes for only the subset of variables named in
<code>...</code>, set <code>est.all = FALSE</code>.  Note: This option only works
when zero has a special meaning for the variables that are omitted from the
graph</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_abbrev">abbrev</code></td>
<td>
<p>Set to <code>TRUE</code> to use the <code><a href="base.html#topic+abbreviate">abbreviate</a></code>
function to abbreviate levels of categorical factors, both for labeling
tick marks and for axis titles. If you only want to abbreviate certain
predictor variables, set <code>abbrev</code> to a vector of character strings
containing their names.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_minlength">minlength</code></td>
<td>
<p><code><a href="base.html#topic+abbreviate">abbreviate</a></code> function. If you set
<code>minlength = 1</code>, the letters of the alphabet are used to label tick
marks for categorical predictors, and all letters are drawn no matter how
close together they are.  For labeling axes (interaction settings),
<code>minlength = 1</code> causes <code>minlength = 4</code> to be used</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_maxscale">maxscale</code></td>
<td>
<p>default maximum point score is 100</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_nint">nint</code></td>
<td>
<p>number of intervals to label for axes representing continuous
variables.
See <code><a href="base.html#topic+pretty">pretty</a></code>.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_label.every">label.every</code></td>
<td>
<p>Specify <code>label.every = i</code> to label on every
<code>i</code>th tick mark</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_force.label">force.label</code></td>
<td>
<p>set to <code>TRUE</code> to force every tick mark intended to
be labeled to have a label plotted (whether the labels run into each other
or not)</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_xfrac">xfrac</code></td>
<td>
<p>fraction of horizontal plot to set aside for axis titles</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_cex.axis">cex.axis</code></td>
<td>
<p>character size for tick mark labels</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_cex.var">cex.var</code></td>
<td>
<p>character size for axis titles (variable names)</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_col.grid">col.grid</code></td>
<td>
<p>If left unspecified, no vertical reference lines are drawn.
Specify a vector of length one (to use the same color for both minor and
major reference lines) or two (corresponding to the color for the major and
minor divisions, respectively) containing colors, to cause vertical
reference lines to the top points scale to be drawn.  For R, a good choice
is <code>col.grid = gray(c(0.8, 0.95))</code>.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_vnames">vnames</code></td>
<td>
<p>By default, variable labels are used to label axes.  Set
<code>vnames = "names"</code> to instead use variable names.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_varname.label">varname.label</code></td>
<td>
<p>In constructing axis titles for interactions, the
default is to add <code>(interacting.varname = level)</code> on the right.
Specify <code>varname.label = FALSE</code> to instead use <code>"(level)"</code>.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_varname.label.sep">varname.label.sep</code></td>
<td>
<p>If <code>varname.label = TRUE</code>, you can change the
separator to something other than
<code>=</code> by specifying this parameter.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_ia.space">ia.space</code></td>
<td>
<p>When multiple axes are draw for levels of interacting
factors, the default is to group combinations related to a main effect.
This is done by spacing the axes for the second to last of these
within a group only
0.7 (by default) of the way down as compared with normal space of 1 unit.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_tck">tck</code></td>
<td>
<p>see <code>tck</code> under <code><a href="graphics.html#topic+par">par</a></code></p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_tcl">tcl</code></td>
<td>
<p>length of tick marks in nomogram</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_lmgp">lmgp</code></td>
<td>
<p>spacing between numeric axis labels and axis
(see <code><a href="graphics.html#topic+par">par</a></code> for <code>mgp</code>)</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_omit">omit</code></td>
<td>
<p>vector of character strings containing names of variables for
which to suppress drawing axes.  Default is to show all variables.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_naxes">naxes</code></td>
<td>
<p>maximum number of axes to allow on one plot.  If the nomogram
requires more than one &ldquo;page&rdquo;, the &ldquo;Points&rdquo; axis will be
repeated at the top of each page when necessary.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_points.label">points.label</code></td>
<td>
<p>a character string giving the axis label for the points
scale</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_total.points.label">total.points.label</code></td>
<td>
<p>a character string giving the axis label for
the total points scale</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_total.sep.page">total.sep.page</code></td>
<td>
<p>set to <code>TRUE</code> to force the total points and
later axes to be placed on a separate page</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_total.fun">total.fun</code></td>
<td>
<p>a user-provided function that will be executed before the
total points axis is drawn.  Default is not toe xecute a function.
This is useful e.g. when <code>total.sep.page = TRUE</code> and you wish to use
<code>locator</code> to find the coordinates for positioning an abbreviation
legend before it's too late and a new page is started (i.e.,
<code>total.fun = function() print(locator(1))</code>).</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_verbose">verbose</code></td>
<td>
<p>set to <code>TRUE</code> to get printed output detailing how tick
marks are chosen and labeled for function axes.  This is useful in seeing
how certain linear predictor values cannot be solved for using inverse
linear interpolation on the (requested linear predictor values, function
values at these lp values).  When this happens you will see <code>NA</code>s in
the verbose output, and the corresponding tick marks will not appear in
the nomogram.</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_cap.labels">cap.labels</code></td>
<td>
<p>logical: should the factor labels have their first
letter capitalized?</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_total.min">total.min</code></td>
<td>
<p>the minimum point for the total point axis</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_total.max">total.max</code></td>
<td>
<p>the maxmum point for the total point axis</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_survtime">survtime</code></td>
<td>
<p>specified survival time for the predicted survival
probability</p>
</td></tr>
<tr><td><code id="nomogram.mk6_+3A_mikeomit">mikeomit</code></td>
<td>
<p>a modified version of <code>omit</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="rms.html#topic+nomogram">nomogram</a></code>
</p>


<h3>Note</h3>

<p>Used internally for <code><a href="#topic+nomogram.crr">nomogram.crr</a></code>. See <code><a href="rms.html#topic+nomogram">nomogram</a></code>.
</p>


<h3>References</h3>

<p>Banks J: Nomograms. Encylopedia of Statistical Sciences, Vol 6.
Editors: S Kotz and NL Johnson.  New York: Wiley; 1985.
</p>
<p>Lubsen J, Pool J, van der Does, E: A practical device for the application
of a diagnostic or prognostic function.  Meth. Inform. Med. 17:127&ndash;129;
1978.
</p>
<p>Wikipedia: Nomogram, <a href="https://en.wikipedia.org/wiki/Nomogram">https://en.wikipedia.org/wiki/Nomogram</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+nomogram.crr">nomogram.crr</a></code> <code><a href="rms.html#topic+rms">rms</a></code> <code><a href="rms.html#topic+nomogram">nomogram</a></code> <code><a href="rms.html#topic+plot.summary.rms">plot.summary.rms</a></code> <code><a href="graphics.html#topic+axis">axis</a></code> <code><a href="base.html#topic+pretty">pretty</a></code> <code><a href="stats.html#topic+approx">approx</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(prostate.dat)
dd &lt;- datadist(prostate.dat)
options(datadist = "dd")
prostate.f &lt;- cph(Surv(TIME_EVENT,EVENT_DOD == 1) ~ TX  + rcs(PSA,3) +
           BX_GLSN_CAT +  CLIN_STG + rcs(AGE,3) +
           RACE_AA, data = prostate.dat,
           x = TRUE, y= TRUE, surv=TRUE,time.inc = 144)
## make a cph nomogram
nomogram.mk6(prostate.f, survtime=120, lp=FALSE,
funlabel = "Predicted 10-year cumulative incidence")

</code></pre>

<hr>
<h2 id='pred.ci'>Extract Cumulative Incidence Estimates at a Specified Time Point</h2><span id='topic+pred.ci'></span>

<h3>Description</h3>

<p>Extracts the cumulative incidence estimates from a <code><a href="cmprsk.html#topic+cuminc">cuminc</a></code> object for the cause of interest at a specified time point into a <code><a href="base.html#topic+data.frame">data.frame</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pred.ci(cum, tm1, failcode = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pred.ci_+3A_cum">cum</code></td>
<td>
<p>A <code><a href="cmprsk.html#topic+cuminc">cuminc</a></code> object</p>
</td></tr>
<tr><td><code id="pred.ci_+3A_tm1">tm1</code></td>
<td>
<p>A single time point to return the cumulative incidence at</p>
</td></tr>
<tr><td><code id="pred.ci_+3A_failcode">failcode</code></td>
<td>
<p>The value of the status column that indicates the event of interest</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="base.html#topic+data.frame">data.frame</a></code> with 3 columns:
</p>
<table>
<tr><td><code>Group</code></td>
<td>
<p>The group name. If the <code>group</code> argument was used in the <code><a href="cmprsk.html#topic+cuminc">cuminc</a></code> fit, there will be one row per group. Otherwise this is non-informative.</p>
</td></tr>
<tr><td><code>CI.Prob</code></td>
<td>
<p>The cumulative incidence probability at the desired time point</p>
</td></tr>
<tr><td><code>CI.Var</code></td>
<td>
<p>The estimated variance of the cumulative incidence estimate</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Michael W. Kattan, Ph.D. and Changhong Yu.<br /> Department of Quantitative Health Sciences, Cleveland Clinic
</p>


<h3>See Also</h3>

<p><code><a href="cmprsk.html#topic+cuminc">cuminc</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> cum &lt;- cmprsk::cuminc(prostate.dat$TIME_EVENT, prostate.dat$EVENT_DOD, cencode = 0)
 pred.ci(cum, 60, failcode = 1)

</code></pre>

<hr>
<h2 id='predict.cmprsk'>Calculate the Failure Time Probability from a Competing Risks Regression Model</h2><span id='topic+predict.cmprsk'></span>

<h3>Description</h3>

<p>Computes the predicted probability of the event of interest at a specified time point for a competing risks regression model fit by <code><a href="#topic+crr.fit">crr.fit</a></code>. This function is adapted from <code><a href="cmprsk.html#topic+predict.crr">predict.crr</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'cmprsk'
predict(object, newdata = NULL, time, lps, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict.cmprsk_+3A_object">object</code></td>
<td>
<p>A model fit by <code><a href="#topic+crr.fit">crr.fit</a></code></p>
</td></tr>
<tr><td><code id="predict.cmprsk_+3A_newdata">newdata</code></td>
<td>
<p>A <code>data.frame</code> for prediction containing values of covariates in the model. If missing, the model development dataset (<code>object$cphdat</code>) is used.</p>
</td></tr>
<tr><td><code id="predict.cmprsk_+3A_time">time</code></td>
<td>
<p>A single time point to calculate the failure probability</p>
</td></tr>
<tr><td><code id="predict.cmprsk_+3A_lps">lps</code></td>
<td>
<p>Should the linear predictor be returned instead of the failure probability? Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="predict.cmprsk_+3A_...">...</code></td>
<td>
<p>Additional arguments such as <code>cov2</code> as in <code><a href="cmprsk.html#topic+crr">crr</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of failure probabilities at the specified time point (or linear predictors if <code>lps=TRUE</code>) with length equal to the number of rows in <code>newdata</code>
</p>


<h3>Author(s)</h3>

<p>Michael W. Kattan, Ph.D. and Changhong Yu.<br /> Department of
Quantitative Health Sciences, Cleveland Clinic
</p>


<h3>References</h3>

<p><code> Fine JP and Gray RJ (1999)</code> A proportional hazards model
for the subdistribution of a competing risk.  <code>JASA</code> 94:496-509.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+crr.fit">crr.fit</a></code>, <code><a href="cmprsk.html#topic+predict.crr">predict.crr</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dd &lt;- datadist(prostate.dat)
options(datadist = "dd")
prostate.f &lt;- cph(Surv(TIME_EVENT,EVENT_DOD == 1) ~ TX  + rcs(PSA,3) +
           BX_GLSN_CAT +  CLIN_STG + rcs(AGE,3) +
           RACE_AA, data = prostate.dat,
           x = TRUE, y = TRUE, surv = TRUE,time.inc = 144)
prostate.crr &lt;- crr.fit(prostate.f, cencode = 0, failcode = 1)
predict(prostate.crr, time = 60)

</code></pre>

<hr>
<h2 id='prostate.dat'>Prostate cancer data set</h2><span id='topic+prostate.dat'></span>

<h3>Description</h3>

<p>This is an artificial prostate cancer dataset used for illustrating the usage of functions in <code>QHScrnomo</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prostate.dat
</code></pre>


<h3>Format</h3>



<h4><code>prostate.dat</code></h4>

<p>A data frame with 2000 observations on the following 9 variables:
</p>

<dl>
<dt>UNIQID</dt><dd><p>patient ID</p>
</dd>
<dt>TX</dt><dd><p>Treatment options of prostate cancera with levels <code>EBRT</code>, <code>PI</code>, <code>RP</code></p>
</dd>
<dt>PSA</dt><dd><p>Pre-treatment PSA levels</p>
</dd>
<dt>BX_GLSN_CAT</dt><dd><p>Biopsy Gleason Score Sum. a factor with levels <code>1</code> for 2-6 <code>2</code> for 7 and <code>3</code> for 8-10</p>
</dd>
<dt>CLIN_STG</dt><dd><p>Clinical stage with levels <code>T1</code>, <code>T2</code>, <code>T3</code></p>
</dd>
<dt>AGE</dt><dd><p>Age at treatment date</p>
</dd>
<dt>RACE_AA</dt><dd><p>patient ethnicity.a factor with levels <code>0</code> for other and <code>1</code> for African American</p>
</dd>
<dt>TIME_EVENT</dt><dd><p>follow up time in months</p>
</dd>
<dt>EVENT_DOD</dt><dd><p>followup status, 0 - censored, 1 - died of prostate cancer, 2 - died of other causes</p>
</dd>
</dl>




<h3>Details</h3>

<p>This is a simulated dataset
</p>

<hr>
<h2 id='sas.cmprsk'>Generate a Prediction Equation for a Competing Risks Regression Model</h2><span id='topic+sas.cmprsk'></span>

<h3>Description</h3>

<p>Uses <code><a href="rms.html#topic+Function">Function</a></code> to generate and print the linear predictor to the console or file which can be hard-coded into a function for evaluation on the scale of the original data. A time point can optionally be specified to retrieve the base sub-cumulative rate at that time point (i.e, the failure probability when all covariate values are 0).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sas.cmprsk(f, time = NA, baseonly = FALSE, file = "", append = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sas.cmprsk_+3A_f">f</code></td>
<td>
<p>A model fit by <code><a href="#topic+crr.fit">crr.fit</a></code></p>
</td></tr>
<tr><td><code id="sas.cmprsk_+3A_time">time</code></td>
<td>
<p>A single time point to calculate the failure probability</p>
</td></tr>
<tr><td><code id="sas.cmprsk_+3A_baseonly">baseonly</code></td>
<td>
<p>Should we only display the failure probability at the specified <code>time</code>? Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="sas.cmprsk_+3A_file">file</code></td>
<td>
<p>An optional connection or character string naming the file to print to.</p>
</td></tr>
<tr><td><code id="sas.cmprsk_+3A_append">append</code></td>
<td>
<p>Only used if the <code>file</code> argument is specified. If <code>TRUE</code>, the output will be appended to <code>file</code>, otherwise it will overwritten.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A printed equation using <code><a href="base.html#topic+cat">cat</a></code> (invisible <code>NULL</code>)
</p>


<h3>Author(s)</h3>

<p>Changhong Yu. Department of
Quantitative Health Sciences, Cleveland Clinic
</p>


<h3>See Also</h3>

<p><code><a href="#topic+crr.fit">crr.fit</a></code> <code><a href="rms.html#topic+sascode">sascode</a></code> <code><a href="rms.html#topic+Function">Function</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dd &lt;- datadist(prostate.dat)
options(datadist = "dd")
prostate.f &lt;- cph(Surv(TIME_EVENT,EVENT_DOD == 1) ~ TX  + rcs(PSA,3) +
           BX_GLSN_CAT +  CLIN_STG + rcs(AGE,3) +
           RACE_AA, data = prostate.dat,
           x = TRUE, y = TRUE, surv = TRUE,time.inc = 144)
prostate.crr &lt;- crr.fit(prostate.f, cencode = 0, failcode = 1)
sas.cmprsk(prostate.crr, time = 60)

</code></pre>

<hr>
<h2 id='summary.cmprsk'>Summary of a Competing Risks Regression Model</h2><span id='topic+summary.cmprsk'></span>

<h3>Description</h3>

<p>Uses the <code><a href="rms.html#topic+summary.rms">summary.rms</a></code> method to construct a summary for the competing risks regression model fit from <code><a href="#topic+crr.fit">crr.fit</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'cmprsk'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.cmprsk_+3A_object">object</code></td>
<td>
<p>A model fit by <code><a href="#topic+crr.fit">crr.fit</a></code></p>
</td></tr>
<tr><td><code id="summary.cmprsk_+3A_...">...</code></td>
<td>
<p>Other arguments for <code><a href="rms.html#topic+summary.rms">summary.rms</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="rms.html#topic+summary.rms">summary.rms</a></code> matrix
</p>


<h3>Note</h3>

<p>This function requires that the <code><a href="rms.html#topic+rms">rms</a></code> package is attached
</p>


<h3>Author(s)</h3>

<p>Changhong Yu. Department of
Quantitative Health Sciences, Cleveland Clinic
</p>


<h3>See Also</h3>

<p><code><a href="#topic+crr.fit">crr.fit</a></code> <code><a href="rms.html#topic+summary.rms">summary.rms</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dd &lt;- datadist(prostate.dat)
options(datadist = "dd")
prostate.f &lt;- cph(Surv(TIME_EVENT,EVENT_DOD == 1) ~ TX  + rcs(PSA,3) +
           BX_GLSN_CAT +  CLIN_STG + rcs(AGE,3) +
           RACE_AA, data = prostate.dat,
           x = TRUE, y = TRUE, surv = TRUE,time.inc = 144)
prostate.crr &lt;- crr.fit(prostate.f, cencode = 0, failcode = 1)
summary(prostate.crr)

</code></pre>

<hr>
<h2 id='tenf.crr'>Obtain K-Fold Cross-Validated Predictions</h2><span id='topic+tenf.crr'></span>

<h3>Description</h3>

<p>Computes &quot;out-of-sample&quot; predictions by K-fold cross-validation for each observation in the modeling data set from a <code><a href="#topic+crr.fit">crr.fit</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tenf.crr(fit, time = NULL, lps = FALSE, fold = 10, trace = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tenf.crr_+3A_fit">fit</code></td>
<td>
<p>A model fit by <code><a href="#topic+crr.fit">crr.fit</a></code></p>
</td></tr>
<tr><td><code id="tenf.crr_+3A_time">time</code></td>
<td>
<p>A single time point to calculate the failure probability</p>
</td></tr>
<tr><td><code id="tenf.crr_+3A_lps">lps</code></td>
<td>
<p>Should the linear predictor be returned instead of the failure probability? Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="tenf.crr_+3A_fold">fold</code></td>
<td>
<p>The number of folds. Defaults to <code>10</code>.</p>
</td></tr>
<tr><td><code id="tenf.crr_+3A_trace">trace</code></td>
<td>
<p>Should the progress of cross-validation be printed to the console? Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of failure probabilities at the specified time point (or linear predictors if <code>lps=TRUE</code>) with length equal to the number of rows in the original data set.
</p>


<h3>Author(s)</h3>

<p>Changhong Yu, Michael Kattan, Ph.D <br /> Department of Quantitative
Health Sciences<br /> Cleveland Clinic<br />
</p>


<h3>See Also</h3>

<p><code><a href="#topic+crr.fit">crr.fit</a></code> <code><a href="cmprsk.html#topic+crr">crr</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dd &lt;- datadist(prostate.dat)
options(datadist = "dd")
prostate.f &lt;- cph(Surv(TIME_EVENT,EVENT_DOD == 1) ~ TX  + rcs(PSA,3) +
           BX_GLSN_CAT +  CLIN_STG + rcs(AGE,3) +
           RACE_AA, data = prostate.dat,
           x = TRUE, y = TRUE, surv = TRUE,time.inc = 144)
prostate.crr &lt;- crr.fit(prostate.f, cencode = 0, failcode = 1)
tenf.crr(prostate.crr, time = 120, fold = 2)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
