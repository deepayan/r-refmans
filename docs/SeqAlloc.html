<!DOCTYPE html><html><head><title>Help for package SeqAlloc</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {SeqAlloc}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#SeqAlloc-package'>
<p>Sequential Allocation for Randomized Experiments</p></a></li>
<li><a href='#bcdalloc'>
<p>Biased Coin Design Allocation</p></a></li>
<li><a href='#caitalloc'>
<p>Sequential Allocation for CAIT Method</p></a></li>
<li><a href='#caralloc'>
<p>Sequential Allocation Using Covariate Adaptive Randomization</p></a></li>
<li><a href='#cguess'>
<p>Evaluate Optimal Guess</p></a></li>
<li><a href='#covimbal'>
<p>Evaluate covariate imbalance using R-squared.</p></a></li>
<li><a href='#MAICimbal'>
<p>Maximum Allocation Imbalance for Covariates</p></a></li>
<li><a href='#SeqAlloc'>
<p>Sequential Allocation for Prospective Experiments</p></a></li>
<li><a href='#SeqAllocplot'>
<p>Plot the evaluation criteria for the designs</p></a></li>
<li><a href='#stratblockalloc'>
<p>Stratified permuted block allocation</p></a></li>
<li><a href='#summary95'>
<p>Find summary statistics</p></a></li>
<li><a href='#WAICimbal'>
<p>Weighted Average of Allocation Imbalance for Covariates</p></a></li>
<li><a href='#weight_x'>
<p>Calculate weight matrix from matrix of covariates</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Sequential Allocation for Prospective Experiments</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2016-08-03</td>
</tr>
<tr>
<td>Author:</td>
<td>Xiaoshu Zhu and Sharon Lohr</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Xiaoshu Zhu &lt;xiaoshuzhu@westat.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Potential randomization schemes are prospectively evaluated when
    units are assigned to treatment arms upon entry into the experiment. The schemes
    are evaluated for balance on covariates and on predictability (i.e., how well
    could a site worker guess the treatment of the next unit enrolled).</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, graphics</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>5.0.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2016-08-03 18:49:44 UTC; zhu_x</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2016-08-04 01:09:17</td>
</tr>
</table>
<hr>
<h2 id='SeqAlloc-package'>
Sequential Allocation for Randomized Experiments
</h2><span id='topic+SeqAlloc-package'></span>

<h3>Description</h3>

<p>Potential randomization schemes are prospectively evaluated when units are assigned to treatment arms upon entry into the experiment. The schemes are evaluated for balance on covariates and on predictability (i.e., how well could a site worker guess the treatment of the next unit enrolled).
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> SeqAlloc</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 1.0</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2016-08-03</td>
</tr>
<tr>
 <td style="text-align: left;">
Imports: </td><td style="text-align: left;"> stats, graphics</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL-2</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Xiaoshu Zhu <a href="mailto:xiaoshuzhu@westat.com">xiaoshuzhu@westat.com</a> and Sharon Lohr
</p>


<h3>References</h3>

<p>Lohr, S. and X. Zhu (2015). Randomized Sequential Individual Assignment in Social Experiments: Evaluating the Design Options Prospectively. Sociological Methods and Research. [Advance online publication: December 27, 2015] doi: 10.1177/0049124115621332.
</p>
<p>McEntegart, D. J. (2003). The Pursuit of Balance Using Stratified and Dynamic Randomization Techniques: An Overview. Drug information Journal 37: 293-308.
</p>
<p>Rosenberger, W. F. and J. M. Lachin (2004). Randomization in Clinical Trials: Theory and Practice. New York: Wiley.
</p>

<hr>
<h2 id='bcdalloc'>
Biased Coin Design Allocation
</h2><span id='topic+bcdalloc'></span>

<h3>Description</h3>

<p>Allocates observations sequentially using a biased coin design. If equal numbers have been allocated to treatment and control, the next observation is allocated to treatment with probability 1/2. If there are more units assigned to treatment than control, the next observation is allocated to control with probability p; if there are more units assigned to control than treatment, the next observation is allocated to treatment with probability p.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bcdalloc(n, pbcd, tol = 1e-06)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bcdalloc_+3A_n">n</code></td>
<td>

<p>number of observations
</p>
</td></tr>
<tr><td><code id="bcdalloc_+3A_pbcd">pbcd</code></td>
<td>

<p>probability p used for biased coin
</p>
</td></tr>
<tr><td><code id="bcdalloc_+3A_tol">tol</code></td>
<td>

<p>tolerance used for allocation
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of zeroes and ones indicating the allocation of each unit to treatment (1) or control (0)
</p>


<h3>Author(s)</h3>

<p>Xiaoshu Zhu <a href="mailto:xiaoshuzhu@westat.com">xiaoshuzhu@westat.com</a> and Sharon Lohr
</p>


<h3>References</h3>

<p>Efron, B. (1971). Forcing a sequential experiment to be balanced. Biometrika, 58(3), 403-417.
</p>
<p>Lohr, S. and X. Zhu (2015). Randomized Sequential Individual Assignment in Social Experiments: Evaluating the Design Options Prospectively. Sociological Methods and Research. [Advance online publication: December 27, 2015] doi: 10.1177/0049124115621332.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>bcdalloc(20,0.7)
</code></pre>

<hr>
<h2 id='caitalloc'>
Sequential Allocation for CAIT Method
</h2><span id='topic+caitalloc'></span>

<h3>Description</h3>

<p>Performs the sequential allocation for the covariate-adjusted-imbalance-tolerance (CAIT) method of allocating observations in a randomized experiment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>caitalloc(carwt_x1, p, tol)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="caitalloc_+3A_carwt_x1">carwt_x1</code></td>
<td>

<p>matrix of dimension n x n, where n is the number of units to be randomly assigned to treatments. The (i,j) element of the matrix is the weighted match score of unit i and unit j. The matrix should be symmetric with diagonal elements of 1.
</p>
</td></tr>
<tr><td><code id="caitalloc_+3A_p">p</code></td>
<td>

<p>probability the next unit should be allocated to the experiment arm that currently has fewer observations. 
</p>
</td></tr>
<tr><td><code id="caitalloc_+3A_tol">tol</code></td>
<td>

<p>imbalance tolerance for deviation from equal allocation. 
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector with the allocation to treatment (denoted by 1) and control (denoted by 0)
</p>


<h3>Note</h3>

<p>This function works for categorical as well as binary covariates. The matrix carwt_x1 can be created from an X matrix by using the function weight_x in this package.
</p>


<h3>Author(s)</h3>

<p>Xiaoshu Zhu <a href="mailto:xiaoshuzhu@westat.com">xiaoshuzhu@westat.com</a> and Sharon Lohr
</p>


<h3>References</h3>

<p>Pocock, S.J. and R. Simon (1975). Sequential Treatment Assignment with Balancing for Prognostic Factors in a Controlled Clinical Trial. Biometrics 31, 103-115.
</p>
<p>Lohr, S. and X. Zhu (2015). Randomized Sequential Individual Assignment in Social Experiments: Evaluating the Design Options Prospectively. Sociological Methods and Research. [Advance online publication: December 27, 2015] doi: 10.1177/0049124115621332.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+weight_x">weight_x</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>wtmat &lt;- matrix(runif(10000), ncol=100) 
wtmat &lt;- (wtmat * lower.tri(wtmat)) + t(wtmat * lower.tri(wtmat)) 
diag(wtmat) &lt;- 1 

caitalloc(wtmat,1,3)
</code></pre>

<hr>
<h2 id='caralloc'>
Sequential Allocation Using Covariate Adaptive Randomization
</h2><span id='topic+caralloc'></span>

<h3>Description</h3>

<p>Performs the sequential allocation for the covariate-adjusted randomization (CAR) method of allocating observations in a randomized experiment. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>caralloc(xmat, carwt, p, tol)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="caralloc_+3A_xmat">xmat</code></td>
<td>

<p>matrix or data frame of covariates for prospective enrollees in the experiment.
</p>
</td></tr>
<tr><td><code id="caralloc_+3A_carwt">carwt</code></td>
<td>

<p>vector of weights
</p>
</td></tr>
<tr><td><code id="caralloc_+3A_p">p</code></td>
<td>

<p>probability the next unit should be allocated to the experiment arm that currently has fewer observations. For CAR, use 0.5 &lt; p &lt; 1.
</p>
</td></tr>
<tr><td><code id="caralloc_+3A_tol">tol</code></td>
<td>

<p>tolerance for deviation from equal allocation. For CAR, set tol to be a small value, say 0.01. For CAIM, set tol to be the imbalance tolerance (d).
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector with the allocation to treatment (denoted by 1) and control (denoted by 0)
</p>


<h3>Author(s)</h3>

<p>Xiaoshu Zhu <a href="mailto:xiaoshuzhu@westat.com">xiaoshuzhu@westat.com</a> and Sharon Lohr
</p>


<h3>References</h3>

<p>Lohr, S. and X. Zhu (2015). Randomized Sequential Individual Assignment in Social Experiments: Evaluating the Design Options Prospectively. Sociological Methods and Research. [Advance online publication: December 27, 2015] doi: 10.1177/0049124115621332.
</p>
<p>Pocock, S. J. and R. Simon (1975). Sequential Treatment Assignment with Balancing for Prognostic Factors in A Controlled Clinical Trial. Biometrics 31: 103-115.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sampsize &lt;- 200
percent &lt;- c(0.5,0.8,0.2,0.4)
carwt &lt;- c(.4,.3,.2,.1)

set.seed(5798)

xmat &lt;- matrix(rbinom(sampsize*length(percent),1,rep(percent,sampsize)),
              nrow=sampsize,ncol=length(percent),byrow=TRUE)
colnames(xmat) = c("C1","C2","C3","C4")
strat_factor = xmat[,1]*4 + xmat[,2]*2 + xmat[,4] + 1

caralloc(xmat,carwt,1,3)
</code></pre>

<hr>
<h2 id='cguess'>
Evaluate Optimal Guess
</h2><span id='topic+cguess'></span>

<h3>Description</h3>

<p>This function calculates the optimal guess for the allocation of the next observation in a sequential allocation scheme, and evaluates whether that guess is correct.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cguess(alloc)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cguess_+3A_alloc">alloc</code></td>
<td>

<p>vector of zeroes and ones, indicating the allocation to treatment (1) and control (0)
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Blackwell and Hodges (1957) proposed evaluating the predictability of a randomized allocation scheme by having an observer guess that the next unit would be allocated to the treatment arm that currently has fewer subjects. This function creates the guesses that would be generated by an observer following this strategy, then compares them with the actual allocation. If units 1 through j have more treatment than control units, then the observer guesses that observation j+1 is assigned to the control arm. If units 1 through j have more control than treatment units, then the observer guesses that observation j+1 is assigned to the treatment arm. If units 1 through j have the same number of control and treatment units, then the observer flips a coin with probability 0.5 for the allocation of the next unit. To reduce the variability in the percentage guessed correctly, this is recorded as a response of 0.5; however, the function is easily changed to allow the observer to guess treatment or control with probability 0.5 for that case.
</p>


<h3>Value</h3>

<p>Vector of length length(alloc) containing values 0, 0.5, and 1. A value is 1 if the guess is correct, 0 if it is incorrect, and 0.5 if the allocation preceding the observation in question was equal.
</p>


<h3>Author(s)</h3>

<p>Xiaoshu Zhu <a href="mailto:xiaoshuzhu@westat.com">xiaoshuzhu@westat.com</a> and Sharon Lohr
</p>


<h3>References</h3>

<p>Blackwell, David and Hodges, J. L. (1957). Design for the Control of Selection Bias. Annals of Mathematical Statistics 28: 449-460.
</p>
<p>Lohr, S. and X. Zhu (2015). Randomized Sequential Individual Assignment in Social Experiments: Evaluating the Design Options Prospectively. Sociological Methods and Research. [Advance online publication: December 27, 2015] doi: 10.1177/0049124115621332.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>alloc &lt;- rbinom(50,1,.5)

cguess(alloc)
</code></pre>

<hr>
<h2 id='covimbal'>
Evaluate covariate imbalance using R-squared.
</h2><span id='topic+covimbal'></span>

<h3>Description</h3>

<p>Evaluate imbalance in the covariates from the allocation by finding R-squared for a centered regression through the origin.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>covimbal(y, xmatc)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="covimbal_+3A_y">y</code></td>
<td>

<p>vector of 0's and 1's representing allocation
</p>
</td></tr>
<tr><td><code id="covimbal_+3A_xmatc">xmatc</code></td>
<td>

<p>centered X matrix
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Value of R-squared from centered regression
</p>


<h3>Author(s)</h3>

<p>Xiaoshu Zhu <a href="mailto:xiaoshuzhu@westat.com">xiaoshuzhu@westat.com</a> and Sharon Lohr
</p>


<h3>References</h3>

<p>Lohr, S. and X. Zhu (2015). Randomized Sequential Individual Assignment in Social Experiments: Evaluating the Design Options Prospectively. Sociological Methods and Research. [Advance online publication: December 27, 2015] doi: 10.1177/0049124115621332.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>alloc &lt;- rbinom(60,1,.5)
xmat &lt;- matrix(rbinom(240,1,.4),ncol=4)
xmatc &lt;- scale(xmat,center=TRUE,scale=FALSE) 

covimbal(alloc,xmatc)
</code></pre>

<hr>
<h2 id='MAICimbal'>
Maximum Allocation Imbalance for Covariates
</h2><span id='topic+MAICimbal'></span>

<h3>Description</h3>

<p>Evaluate maximum of the allocation imbalance for all covariates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>MAICimbal(alloc, xmat)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="MAICimbal_+3A_alloc">alloc</code></td>
<td>

<p>vector of allocations to treatment (1) or control (0)
</p>
</td></tr>
<tr><td><code id="MAICimbal_+3A_xmat">xmat</code></td>
<td>

<p>matrix describing covariates for each prospective observation
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>maximum of covariate imbalances
</p>


<h3>Author(s)</h3>

<p>Xiaoshu Zhu <a href="mailto:xiaoshuzhu@westat.com">xiaoshuzhu@westat.com</a> and Sharon Lohr
</p>


<h3>References</h3>

<p>Lohr, S. and X. Zhu (2015). Randomized Sequential Individual Assignment in Social Experiments: Evaluating the Design Options Prospectively. Sociological Methods and Research. [Advance online publication: December 27, 2015] doi: 10.1177/0049124115621332.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+WAICimbal">WAICimbal</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>alloc &lt;- rbinom(60,1,.5)
xmat &lt;- matrix(rbinom(240,1,.4),ncol=4)

MAICimbal(alloc, xmat) 
</code></pre>

<hr>
<h2 id='SeqAlloc'>
Sequential Allocation for Prospective Experiments
</h2><span id='topic+SeqAlloc'></span>

<h3>Description</h3>

<p>Simulates results of allocations using complete randomization (CR), random allocation rule (RAR), biased coin design (BCD), permuted block design (PBD), stratified permuted block design (SPBD), covariate-adaptive randomization (CAR), big stick design (BSD), and covariate-adjusted imbalance tolerance (CAIT) designs. The order of the prospective enrollees is permuted for a preset number of iterations; for each iteration, the allocations are determined for each of the methods listed above. The allocations are then evaluated for balance on the covariates and for predictability (i.e., how well an observer could guess the next treatment assignment).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SeqAlloc(xmat, carwt, strata = NULL, blksize, pbcd, pcar, bsdtol, caittol, 
         niter, seed = 12345)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SeqAlloc_+3A_xmat">xmat</code></td>
<td>

<p>matrix or data frame of covariates for prospective enrollees in the experiment. This matrix is to be used in CAR/CAIT methods, and should include strata or marginals of strata as columns
</p>
</td></tr>
<tr><td><code id="SeqAlloc_+3A_carwt">carwt</code></td>
<td>

<p>vector of weights to be used for CAR and CAIT methods
</p>
</td></tr>
<tr><td><code id="SeqAlloc_+3A_strata">strata</code></td>
<td>

<p>vector of planned strata for study (if none, should be NULL)
</p>
</td></tr>
<tr><td><code id="SeqAlloc_+3A_blksize">blksize</code></td>
<td>

<p>vector of block sizes for PBDs and SPBDs
</p>
</td></tr>
<tr><td><code id="SeqAlloc_+3A_pbcd">pbcd</code></td>
<td>

<p>probability for biased coin design (BCD) method
</p>
</td></tr>
<tr><td><code id="SeqAlloc_+3A_pcar">pcar</code></td>
<td>

<p>probability for CAR method
</p>
</td></tr>
<tr><td><code id="SeqAlloc_+3A_bsdtol">bsdtol</code></td>
<td>

<p>tolerance (d value) for BSD method
</p>
</td></tr>
<tr><td><code id="SeqAlloc_+3A_caittol">caittol</code></td>
<td>

<p>tolerance (d value) for CAIM method
</p>
</td></tr>
<tr><td><code id="SeqAlloc_+3A_niter">niter</code></td>
<td>

<p>number of iterations for simulation
</p>
</td></tr>
<tr><td><code id="SeqAlloc_+3A_seed">seed</code></td>
<td>

<p>random number seed, allows the allocation to be reproduced later
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List containing summary statistics (minimum, 25th percentile, median, mean, 75th percentile, 90th percentile, 95th percentile, maximum) for evaluation measures, including AI, Rsquared, MAIC, WAIC, perccorr, and perccorr_strat.
</p>
<table>
<tr><td><code>schemes</code></td>
<td>
<p>names of schemes evaluated</p>
</td></tr>
<tr><td><code>AI</code></td>
<td>
<p>value of overall allocation imblance defined as | Proportion of observations that are allocated to the treatment group - 0.5 |</p>
</td></tr>
<tr><td><code>Rsquared</code></td>
<td>
<p>value of R-squared from regression through the origin</p>
</td></tr>
<tr><td><code>MAIC</code></td>
<td>
<p>maximum of allocation imbalance for all covariates</p>
</td></tr>
<tr><td><code>WAIC</code></td>
<td>
<p>weighted average of allocation imbalance for all covariates</p>
</td></tr>
<tr><td><code>perccorr</code></td>
<td>
<p>percentage of allocations that an observer could guess correctly using the Blackwell-Hodges rule</p>
</td></tr>
<tr><td><code>perccorr_strat</code></td>
<td>
<p>percentage of allocations that an observer could guess correctly using the Blackwell-Hodges rule within each stratum</p>
</td></tr>
<tr><td><code>carwt</code></td>
<td>
<p>weights used in CAR and CAIM procedures</p>
</td></tr>
</table>


<h3>Note</h3>

<p>Because the program allows for sequential allocation methods, it can be slow when the data set and/or number of iterations is large.
</p>


<h3>Author(s)</h3>

<p>Xiaoshu Zhu <a href="mailto:xiaoshuzhu@westat.com">xiaoshuzhu@westat.com</a> and Sharon Lohr
</p>


<h3>References</h3>

<p>Blackwell, David and J. L. Hodges (1957). Design for the Control of Selection Bias. Annals of Mathematical Statistics 28: 449-460.
</p>
<p>Lohr, S. and X. Zhu (2015). Randomized Sequential Individual Assignment in Social Experiments: Evaluating the Design Options Prospectively. Sociological Methods and Research. [Advance online publication: December 27, 2015] doi: 10.1177/0049124115621332.
</p>
<p>Rosenberger, W. F. and Lachin, J. M. (2004). Randomization in Clinical Trials: Theory and Practice. New York: Wiley.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sampsize &lt;- 200
percent &lt;- c(0.5,0.8,0.2,0.4)
set.seed(200)

xmat &lt;- matrix(rbinom(sampsize*length(percent),1,rep(percent,sampsize)),
              nrow=sampsize,ncol=length(percent),byrow=TRUE)
colnames(xmat) &lt;- c("C1","C2","C3","C4")
strat_factor &lt;- xmat[,2]*2 + xmat[,4] + 1

SeqAlloc(xmat,carwt=c(.4,.3,.2,.1),strata=strat_factor,blksize=c(2,6),
         pbcd=.7,pcar=.8,bsdtol=2,caittol=5,niter=10, seed = 20850)

</code></pre>

<hr>
<h2 id='SeqAllocplot'>
Plot the evaluation criteria for the designs
</h2><span id='topic+SeqAllocplot'></span>

<h3>Description</h3>

<p>Provides boxplots and scatterplots of balance and predictability measures for candidate sequential allocations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SeqAllocplot(mysim, bporder = NULL, stratum = F, cexsize = 0.7)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SeqAllocplot_+3A_mysim">mysim</code></td>
<td>

<p>output from function SeqAlloc
</p>
</td></tr>
<tr><td><code id="SeqAllocplot_+3A_bporder">bporder</code></td>
<td>

<p>vector giving the randomization methods to be plotted, corresponding to the positions in mysim$schemes
</p>
</td></tr>
<tr><td><code id="SeqAllocplot_+3A_stratum">stratum</code></td>
<td>

<p>logical variable of whether PBD designs should be plotted, default is FALSE
</p>
</td></tr>
<tr><td><code id="SeqAllocplot_+3A_cexsize">cexsize</code></td>
<td>

<p>size of characters in plot and axis, default is 0.7
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Produces selected plots of predictability and balance for randomization schemes.Requires user to click window or press &quot;enter&quot; to progress through plots.
</p>


<h3>Note</h3>

<p>These are example plots; the plotting code can be extracted from this function or the function is easily modified if different plots are desired.
</p>


<h3>Author(s)</h3>

<p>Xiaoshu Zhu <a href="mailto:xiaoshuzhu@westat.com">xiaoshuzhu@westat.com</a> and Sharon Lohr
</p>


<h3>References</h3>

<p>Lohr, S. and X. Zhu (2015). Randomized Sequential Individual Assignment in Social Experiments: Evaluating the Design Options Prospectively. Sociological Methods and Research. [Advance online publication: December 27, 2015] doi: 10.1177/0049124115621332
</p>


<h3>See Also</h3>

<p><code><a href="#topic+SeqAlloc">SeqAlloc</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sampsize &lt;- 200
percent &lt;- c(0.5,0.8,0.2,0.4)
set.seed(200)

xmat &lt;- matrix(rbinom(sampsize*length(percent),1,rep(percent,sampsize)),
              nrow=sampsize,ncol=length(percent),byrow=TRUE)
colnames(xmat) &lt;- c("C1","C2","C3","C4")
strat_factor &lt;- xmat[,1]*4 + xmat[,2]*2 + xmat[,4] + 1

mysim &lt;- SeqAlloc(xmat,carwt=c(.4,.3,.2,.1),strata=strat_factor,blksize=c(2,6),
                   pbcd=.7,pcar=.67,bsdtol=2,caittol=3,niter=10, seed = 30924)

SeqAllocplot(mysim,bporder = c(3,4,7,8), stratum = FALSE, cexsize=0.6)
</code></pre>

<hr>
<h2 id='stratblockalloc'>
Stratified permuted block allocation
</h2><span id='topic+stratblockalloc'></span>

<h3>Description</h3>

<p>Allocates observations to treatment (1) or control (0) within strata
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stratblockalloc(n, blksize)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stratblockalloc_+3A_n">n</code></td>
<td>

<p>number of observations
</p>
</td></tr>
<tr><td><code id="stratblockalloc_+3A_blksize">blksize</code></td>
<td>

<p>size of each block: must be even number
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Allocates observations within each block of size blksize so that half of the observations in each block are in the treatment group and the other half are in the control group.
</p>


<h3>Value</h3>

<p>vector of allocations to treatment (1) or control (0) group
</p>


<h3>Author(s)</h3>

<p>Xiaoshu Zhu <a href="mailto:xiaoshuzhu@westat.com">xiaoshuzhu@westat.com</a> and Sharon Lohr
</p>


<h3>References</h3>

<p>Lohr, S. and X. Zhu (2015). Randomized Sequential Individual Assignment in Social Experiments: Evaluating the Design Options Prospectively. Sociological Methods and Research. [Advance online publication: December 27, 2015] doi: 10.1177/0049124115621332.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stratblockalloc(20,2)
</code></pre>

<hr>
<h2 id='summary95'>
Find summary statistics
</h2><span id='topic+summary95'></span>

<h3>Description</h3>

<p>Finds the Minimum, 25th percentile, Median, Mean, 75th percentile, 90th percentile, 95th percentile, and Maximum of the vector
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summary95(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary95_+3A_x">x</code></td>
<td>

<p>vector for which summary statistics are desired
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The code from the 'summary' function in R is modified to include the 90th and 95th percentiles
</p>


<h3>Value</h3>

<p>vector of summary statistics for data
</p>


<h3>Author(s)</h3>

<p>Xiaoshu Zhu <a href="mailto:xiaoshuzhu@westat.com">xiaoshuzhu@westat.com</a> and Sharon Lohr, adapted from 'summary' function in R.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>summary95(rnorm(40))
</code></pre>

<hr>
<h2 id='WAICimbal'>
Weighted Average of Allocation Imbalance for Covariates
</h2><span id='topic+WAICimbal'></span>

<h3>Description</h3>

<p>Evaluate weighted average of the allocation imbalance for all covariates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>WAICimbal(alloc, xmat, carwt)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="WAICimbal_+3A_alloc">alloc</code></td>
<td>

<p>vector of allocations to treatment (1) or control (0)
</p>
</td></tr>
<tr><td><code id="WAICimbal_+3A_xmat">xmat</code></td>
<td>

<p>matrix describing covariates for each prospective observation
</p>
</td></tr>
<tr><td><code id="WAICimbal_+3A_carwt">carwt</code></td>
<td>

<p>vector of weights to be accorded to respective covariates
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Weighted average of covariate imbalances
</p>


<h3>Author(s)</h3>

<p>Xiaoshu Zhu <a href="mailto:xiaoshuzhu@westat.com">xiaoshuzhu@westat.com</a> and Sharon Lohr
</p>


<h3>References</h3>

<p>Lohr, S. and X. Zhu (2015). Randomized Sequential Individual Assignment in Social Experiments: Evaluating the Design Options Prospectively. Sociological Methods and Research. [Advance online publication: December 27, 2015] doi: 10.1177/0049124115621332.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+MAICimbal">MAICimbal</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>alloc &lt;- rbinom(60,1,.5)
xmat &lt;- matrix(rbinom(240,1,.4),ncol=4)
carwt &lt;- c(.1,.3,.2,.4)

WAICimbal(alloc, xmat, carwt) 
</code></pre>

<hr>
<h2 id='weight_x'>
Calculate weight matrix from matrix of covariates
</h2><span id='topic+weight_x'></span>

<h3>Description</h3>

<p>Calculate a vector of weights relating vector xrow with the rows of xmat, according to the weights in vector carwt. For each row in xmat, the positions of agreement with xrow are found. The weight for that row of xmat is then the sum of the elements of carwt corresponding to the matches.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weight_x(xrow, xmat, carwt)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="weight_x_+3A_xrow">xrow</code></td>
<td>

<p>vector used for matching
</p>
</td></tr>
<tr><td><code id="weight_x_+3A_xmat">xmat</code></td>
<td>

<p>matrix of covariates
</p>
</td></tr>
<tr><td><code id="weight_x_+3A_carwt">carwt</code></td>
<td>

<p>vector of weight for each match
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of weights relating vector xrow to the rows of xmat
</p>


<h3>Author(s)</h3>

<p>Xiaoshu Zhu <a href="mailto:xiaoshuzhu@westat.com">xiaoshuzhu@westat.com</a> and Sharon Lohr
</p>


<h3>References</h3>

<p>Lohr, S. and X. Zhu (2015). Randomized Sequential Individual Assignment in Social Experiments: Evaluating the Design Options Prospectively. Sociological Methods and Research. [Advance online publication: December 27, 2015] doi: 10.1177/0049124115621332.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>xrow &lt;- c(1,0,1,1)
xmat &lt;- matrix(rbinom(60,1,.4),ncol=4)
carwt &lt;- c(.6,.4,.2,.1)

weight_x(xrow, xmat, carwt)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
