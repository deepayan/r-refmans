<!DOCTYPE html><html><head><title>Help for package miniCRAN</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {miniCRAN}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#.listFiles'><p>List pre-built packages in a directory based on file extension</p></a></li>
<li><a href='#addLocalPackage'><p>Add local packages to a miniCRAN repository.</p></a></li>
<li><a href='#addOldPackage'><p>Add old package versions to a miniCRAN repository.</p></a></li>
<li><a href='#addPackage'><p>Add packages to a miniCRAN repository.</p></a></li>
<li><a href='#addPackageListingGithub'><p>Add DESCRIPTION information from package on github.</p></a></li>
<li><a href='#basePkgs'><p>Returns names of base packages.</p></a></li>
<li><a href='#checkVersions'><p>Check for previous versions of packages in a miniCRAN repository.</p></a></li>
<li><a href='#cranJuly2014'><p>Stored version of available.packages()</p></a></li>
<li><a href='#getCranDescription'><p>Obtains DESCRIPTION metadata from CRAN for each package.</p></a></li>
<li><a href='#is.online'><p>Returns TRUE if the p3m URL can be accessed.</p></a></li>
<li><a href='#makeDepGraph'><p>Create dependency graph from available packages.</p></a></li>
<li><a href='#makeLibrary'><p>Deprecated function to download packages to local folder.</p></a></li>
<li><a href='#makeRepo'><p>Downloads packages from CRAN to specified path and creates a local</p>
repository.</a></li>
<li><a href='#miniCRAN-package'><p>description</p></a></li>
<li><a href='#pkgAvail'><p>Reads available packages from CRAN repository.</p></a></li>
<li><a href='#pkgDep'><p>Retrieves package dependencies.</p></a></li>
<li><a href='#plot.pkgDepGraph'><p>Plots a package dependency graph.</p></a></li>
<li><a href='#repoPrefix'><p>Get the path to the repo directory containing the package files.</p></a></li>
<li><a href='#twodigitRversion'><p>Get a two-digit version of the R version</p></a></li>
<li><a href='#updatePackages'><p>Check for available package updates in a miniCRAN repo.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>0.3.0</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Copyright:</td>
<td>Andrie de Vries, Microsoft Corporation</td>
</tr>
<tr>
<td>Title:</td>
<td>Create a Mini Version of CRAN Containing Only Selected Packages</td>
</tr>
<tr>
<td>Description:</td>
<td>Makes it possible to create an internally consistent
    repository consisting of selected packages from CRAN-like repositories.
    The user specifies a set of desired packages, and 'miniCRAN' recursively
    reads the dependency tree for these packages, then downloads only this
    subset. The user can then install packages from this repository directly,
    rather than from CRAN.  This is useful in production settings, e.g. server
    behind a firewall, or remote locations with slow (or zero) Internet access.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/andrie/miniCRAN">https://github.com/andrie/miniCRAN</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/andrie/miniCRAN/issues">https://github.com/andrie/miniCRAN/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>graphics, httr, methods, stats, tools, utils, igraph,
assertthat (&ge; 0.2.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>devtools, knitr, rmarkdown, testthat (&ge; 2.1.0), covr, withr,
mockery, testthis, roxygen2, mockr, spelling</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>true</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-28 20:42:22 UTC; apdev</td>
</tr>
<tr>
<td>Author:</td>
<td>Andrie de Vries [aut, cre, cph],
  Alex Chubaty [ctb],
  Microsoft Corporation [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Andrie de Vries &lt;apdevries@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-28 21:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='.listFiles'>List pre-built packages in a directory based on file extension</h2><span id='topic+.listFiles'></span>

<h3>Description</h3>

<p>List pre-built packages in a directory based on file extension
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.listFiles(pkgs, path, type)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".listFiles_+3A_pkgs">pkgs</code></td>
<td>
<p>Character vector of package names</p>
</td></tr>
<tr><td><code id=".listFiles_+3A_path">path</code></td>
<td>
<p>Character string specifying the directory containing packages to
be added.</p>
</td></tr>
<tr><td><code id=".listFiles_+3A_type">type</code></td>
<td>
<p>Character indicating the package type (e.g., &quot;source&quot;,
&quot;win.binary&quot;, etc.).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Installs the packages and returns the new package index.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 .listFiles('path/to/my/packages', type = "source")

## End(Not run)

</code></pre>

<hr>
<h2 id='addLocalPackage'>Add local packages to a miniCRAN repository.</h2><span id='topic+addLocalPackage'></span>

<h3>Description</h3>

<p>Examine the contents of a directory specified by <code>pkgPath</code> for pre-built
packages matching the names specified by <code>pkgs</code>, and add these to the
miniCRAN repository.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addLocalPackage(
  pkgs = NULL,
  pkgPath = NULL,
  path = NULL,
  type = "source",
  Rversion = R.version,
  writePACKAGES = TRUE,
  deps = FALSE,
  quiet = FALSE,
  build = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addLocalPackage_+3A_pkgs">pkgs</code></td>
<td>
<p>Character vector of packages to download</p>
</td></tr>
<tr><td><code id="addLocalPackage_+3A_pkgpath">pkgPath</code></td>
<td>
<p>Character vector of directory location containing packages to
be added. Note that <code>pkgPath</code> should be the parent directory of the package
(i.e., the package directory path is constructed from <code>file.path(pkgPath, pkgs)</code>).</p>
</td></tr>
<tr><td><code id="addLocalPackage_+3A_path">path</code></td>
<td>
<p>Destination download path. This path is the root folder of your
new repository.</p>
</td></tr>
<tr><td><code id="addLocalPackage_+3A_type">type</code></td>
<td>
<p>Possible values are (currently) &quot;source&quot;, &quot;mac.binary&quot; and
&quot;win.binary&quot;: the binary types can be listed and downloaded but not
installed on other platforms.  Passed to <code><a href="utils.html#topic+download.packages">download.packages()</a></code>.</p>
</td></tr>
<tr><td><code id="addLocalPackage_+3A_rversion">Rversion</code></td>
<td>
<p>Version of R (only used if <code>type</code> is not <code>source</code>.) Defaults to <a href="base.html#topic+R.version">R.version</a>, but this can be specified as any of the following formats:
</p>

<ul>
<li><p> a character string with the two digit R version, e.g. &quot;3.1&quot;
</p>
</li>
<li><p> a list with components <code>major</code> and <code>minor</code>
</p>
</li>
<li><p> the result of <code><a href="base.html#topic+getRversion">getRversion()</a></code>
</p>
</li>
<li><p> the result of <a href="base.html#topic+R.version">R.version</a>
</p>
</li></ul>
</td></tr>
<tr><td><code id="addLocalPackage_+3A_writepackages">writePACKAGES</code></td>
<td>
<p>If TRUE, calls <code><a href="tools.html#topic+write_PACKAGES">write_PACKAGES()</a></code> to update the
repository PACKAGES file.</p>
</td></tr>
<tr><td><code id="addLocalPackage_+3A_deps">deps</code></td>
<td>
<p>Not used. See note.</p>
</td></tr>
<tr><td><code id="addLocalPackage_+3A_quiet">quiet</code></td>
<td>
<p>If TRUE, suppress status messages (if any), and the progress bar
during download.</p>
</td></tr>
<tr><td><code id="addLocalPackage_+3A_build">build</code></td>
<td>
<p>Logical indicating whether packages should be build prior to
adding.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To build a package from source and then add it, use <code>build = TRUE</code>. Note that
package development libraries and the <code>devtools</code> package must be installed on
your system in order to build packages.
</p>


<h3>Value</h3>

<p>Installs the packages and returns the new package index.
</p>


<h3>Note</h3>

<p>Currently, adding local packages does not check nor download their
dependencies.
</p>


<h3>Author(s)</h3>

<p>Alex Chubaty
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 addLocalPackage("myPackage", "path/to/my/prebuilt/package",
                 "path/to/my/miniCRAN/repo")

 addLocalPackage("myPackage", "path/to/my/package/sourcecode",
                 "path/to/my/miniCRAN/repo", build = TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='addOldPackage'>Add old package versions to a miniCRAN repository.</h2><span id='topic+addOldPackage'></span>

<h3>Description</h3>

<p>Will download and add older source package versions. Older binary versions
are not normally available on CRAN and should be built from source on the
platform for which they are required. As such, specifying <code>type!="source"</code>
will likely fail as the download will not be successful.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addOldPackage(
  pkgs = NULL,
  path = NULL,
  vers = NULL,
  repos = getOption("repos"),
  type = "source",
  Rversion = R.version,
  writePACKAGES = TRUE,
  deps = FALSE,
  quiet = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addOldPackage_+3A_pkgs">pkgs</code></td>
<td>
<p>Character vector of packages to download</p>
</td></tr>
<tr><td><code id="addOldPackage_+3A_path">path</code></td>
<td>
<p>Destination download path. This path is the root folder of your
new repository.</p>
</td></tr>
<tr><td><code id="addOldPackage_+3A_vers">vers</code></td>
<td>
<p>The package version to install.</p>
</td></tr>
<tr><td><code id="addOldPackage_+3A_repos">repos</code></td>
<td>
<p>URL(s) of the 'contrib' sections of the repositories, e.g.
<code>"https://cran.us.r-project.org"</code>. Passed to <code><a href="utils.html#topic+available.packages">available.packages()</a></code></p>
</td></tr>
<tr><td><code id="addOldPackage_+3A_type">type</code></td>
<td>
<p>Possible values are (currently) &quot;source&quot;, &quot;mac.binary&quot; and
&quot;win.binary&quot;: the binary types can be listed and downloaded but not
installed on other platforms.  Passed to <code><a href="utils.html#topic+download.packages">download.packages()</a></code>.</p>
</td></tr>
<tr><td><code id="addOldPackage_+3A_rversion">Rversion</code></td>
<td>
<p>Version of R (only used if <code>type</code> is not <code>source</code>.) Defaults to <a href="base.html#topic+R.version">R.version</a>, but this can be specified as any of the following formats:
</p>

<ul>
<li><p> a character string with the two digit R version, e.g. &quot;3.1&quot;
</p>
</li>
<li><p> a list with components <code>major</code> and <code>minor</code>
</p>
</li>
<li><p> the result of <code><a href="base.html#topic+getRversion">getRversion()</a></code>
</p>
</li>
<li><p> the result of <a href="base.html#topic+R.version">R.version</a>
</p>
</li></ul>
</td></tr>
<tr><td><code id="addOldPackage_+3A_writepackages">writePACKAGES</code></td>
<td>
<p>If TRUE, calls <code><a href="tools.html#topic+write_PACKAGES">write_PACKAGES()</a></code> to update the
repository PACKAGES file.</p>
</td></tr>
<tr><td><code id="addOldPackage_+3A_deps">deps</code></td>
<td>
<p>logical indicating whether the package dependencies should be
added (default <code>TRUE</code>).</p>
</td></tr>
<tr><td><code id="addOldPackage_+3A_quiet">quiet</code></td>
<td>
<p>If TRUE, suppress status messages (if any), and the progress bar
during download.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Adds the packages, rebuilds the package index, and invisibly returns
the number of packages written to the index files.
</p>


<h3>Note</h3>

<p>Dependencies for old package versions cannot be determined
automatically and must be specified by the user in <code>pkgs</code> and <code>vers</code>. Thus,
<code>deps=FALSE</code> is the default for this function.
</p>


<h3>See Also</h3>

<p>Other update repo functions: 
<code><a href="#topic+addPackage">addPackage</a>()</code>,
<code><a href="#topic+checkVersions">checkVersions</a>()</code>,
<code><a href="#topic+makeRepo">makeRepo</a>()</code>,
<code><a href="#topic+updatePackages">updatePackages</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>### `checkVersions` and `add.packages.miniCRAN` require an existing miniCRAN repo

# Specify list of packages to download
mirror &lt;- c(CRAN = "https://cloud.r-project.org")
mirror
pkgs &lt;- c("foreach")
pkgTypes &lt;- c("source", "win.binary")

if (interactive()) {
  if (!is.online()) {
    message("p3m seems to be not available.  Check your internet connection.")
  } else {
    pdb &lt;- pkgAvail(repos = mirror, type = "source")
  }
} else {
  pdb &lt;- cranJuly2014
}


if (interactive()) {
  if (!is.online()) {
    message("p3m seems to be not available.  Check your internet connection.")
  } else {
    pkgList &lt;- pkgDep(pkgs, availPkgs = pdb, repos = mirror, type = "source", suggests = FALSE)
    pkgList
  }
}

# Create temporary folder for miniCRAN

if (interactive()) {
  if (!is.online()) {
    message("p3m seems to be not available.  Check your internet connection.")
  } else {
    dir.create(pth &lt;- file.path(tempdir(), "miniCRAN"))
    
    # Make repo for source and win.binary
    makeRepo(pkgList, path = pth, repos = mirror, type = pkgTypes)
    
    # Add other versions of a package (and assume these were added previously)
    oldVers &lt;- data.frame(
      package = c("foreach", "codetools", "iterators"),
      version = c("1.4.0", "0.2-7", "1.0.5"),
      stringsAsFactors = FALSE
    )
    pkgs &lt;- oldVers$package
    addOldPackage(pkgs, path = pth, vers = oldVers$version, repos = mirror, type = "source")
    # NOTE: older binary versions would need to be build from source
    
    # List package versions in the miniCRAN repo (produces warning about duplicates)
    pkgVersionsSrc &lt;- checkVersions(pkgs, path = pth, type = "source")
    pkgVersionsBin &lt;- checkVersions(pkgs, path = pth, type = "win.binary")
    
    # After inspecting package versions, remove old versions
    basename(pkgVersionsSrc$source) # "foreach_1.4.0.tar.gz"  "foreach_1.4.2.tar.gz"
    basename(pkgVersionsBin$win.binary) # "foreach_1.4.0.zip"     "foreach_1.4.2.zip"
    file.remove(c(pkgVersionsSrc$source[1], pkgVersionsBin$win.binary[1]))
    
    # Rebuild package index after adding/removing files
    updateRepoIndex(pth, type = pkgTypes, Rversion = R.version)
    
    pkgAvail(pth, type = "source")
    
    # Add new packages (from CRAN) to the miniCRAN repo
    addPackage("Matrix", path = pth, repos = mirror, type = pkgTypes)
    
    # Delete temporary folder
    unlink(pth, recursive = TRUE)
  }
}
</code></pre>

<hr>
<h2 id='addPackage'>Add packages to a miniCRAN repository.</h2><span id='topic+addPackage'></span>

<h3>Description</h3>

<p>Add packages to a miniCRAN repository.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addPackage(
  pkgs = NULL,
  path = NULL,
  repos = getOption("repos"),
  type = "source",
  Rversion = R.version,
  writePACKAGES = TRUE,
  deps = TRUE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addPackage_+3A_pkgs">pkgs</code></td>
<td>
<p>Character vector of packages to download</p>
</td></tr>
<tr><td><code id="addPackage_+3A_path">path</code></td>
<td>
<p>Destination download path. This path is the root folder of your
new repository.</p>
</td></tr>
<tr><td><code id="addPackage_+3A_repos">repos</code></td>
<td>
<p>URL(s) of the 'contrib' sections of the repositories, e.g.
<code>"https://cran.us.r-project.org"</code>. Passed to <code><a href="utils.html#topic+available.packages">available.packages()</a></code></p>
</td></tr>
<tr><td><code id="addPackage_+3A_type">type</code></td>
<td>
<p>Possible values are (currently) &quot;source&quot;, &quot;mac.binary&quot; and
&quot;win.binary&quot;: the binary types can be listed and downloaded but not
installed on other platforms.  Passed to <code><a href="utils.html#topic+download.packages">download.packages()</a></code>.</p>
</td></tr>
<tr><td><code id="addPackage_+3A_rversion">Rversion</code></td>
<td>
<p>Version of R (only used if <code>type</code> is not <code>source</code>.) Defaults to <a href="base.html#topic+R.version">R.version</a>, but this can be specified as any of the following formats:
</p>

<ul>
<li><p> a character string with the two digit R version, e.g. &quot;3.1&quot;
</p>
</li>
<li><p> a list with components <code>major</code> and <code>minor</code>
</p>
</li>
<li><p> the result of <code><a href="base.html#topic+getRversion">getRversion()</a></code>
</p>
</li>
<li><p> the result of <a href="base.html#topic+R.version">R.version</a>
</p>
</li></ul>
</td></tr>
<tr><td><code id="addPackage_+3A_writepackages">writePACKAGES</code></td>
<td>
<p>If TRUE, calls <code><a href="tools.html#topic+write_PACKAGES">write_PACKAGES()</a></code> to update the
repository PACKAGES file.</p>
</td></tr>
<tr><td><code id="addPackage_+3A_deps">deps</code></td>
<td>
<p>logical indicating whether the package dependencies should be
added (default <code>TRUE</code>).</p>
</td></tr>
<tr><td><code id="addPackage_+3A_quiet">quiet</code></td>
<td>
<p>If TRUE, suppress status messages (if any), and the progress bar
during download.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Installs the packages, rebuilds the package index, and invisibly
returns the number of packages written to the index files.
</p>


<h3>See Also</h3>

<p>Other update repo functions: 
<code><a href="#topic+addOldPackage">addOldPackage</a>()</code>,
<code><a href="#topic+checkVersions">checkVersions</a>()</code>,
<code><a href="#topic+makeRepo">makeRepo</a>()</code>,
<code><a href="#topic+updatePackages">updatePackages</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>### `checkVersions` and `add.packages.miniCRAN` require an existing miniCRAN repo

# Specify list of packages to download
mirror &lt;- c(CRAN = "https://cloud.r-project.org")
mirror
pkgs &lt;- c("foreach")
pkgTypes &lt;- c("source", "win.binary")

if (interactive()) {
  if (!is.online()) {
    message("p3m seems to be not available.  Check your internet connection.")
  } else {
    pdb &lt;- pkgAvail(repos = mirror, type = "source")
  }
} else {
  pdb &lt;- cranJuly2014
}


if (interactive()) {
  if (!is.online()) {
    message("p3m seems to be not available.  Check your internet connection.")
  } else {
    pkgList &lt;- pkgDep(pkgs, availPkgs = pdb, repos = mirror, type = "source", suggests = FALSE)
    pkgList
  }
}

# Create temporary folder for miniCRAN

if (interactive()) {
  if (!is.online()) {
    message("p3m seems to be not available.  Check your internet connection.")
  } else {
    dir.create(pth &lt;- file.path(tempdir(), "miniCRAN"))
    
    # Make repo for source and win.binary
    makeRepo(pkgList, path = pth, repos = mirror, type = pkgTypes)
    
    # Add other versions of a package (and assume these were added previously)
    oldVers &lt;- data.frame(
      package = c("foreach", "codetools", "iterators"),
      version = c("1.4.0", "0.2-7", "1.0.5"),
      stringsAsFactors = FALSE
    )
    pkgs &lt;- oldVers$package
    addOldPackage(pkgs, path = pth, vers = oldVers$version, repos = mirror, type = "source")
    # NOTE: older binary versions would need to be build from source
    
    # List package versions in the miniCRAN repo (produces warning about duplicates)
    pkgVersionsSrc &lt;- checkVersions(pkgs, path = pth, type = "source")
    pkgVersionsBin &lt;- checkVersions(pkgs, path = pth, type = "win.binary")
    
    # After inspecting package versions, remove old versions
    basename(pkgVersionsSrc$source) # "foreach_1.4.0.tar.gz"  "foreach_1.4.2.tar.gz"
    basename(pkgVersionsBin$win.binary) # "foreach_1.4.0.zip"     "foreach_1.4.2.zip"
    file.remove(c(pkgVersionsSrc$source[1], pkgVersionsBin$win.binary[1]))
    
    # Rebuild package index after adding/removing files
    updateRepoIndex(pth, type = pkgTypes, Rversion = R.version)
    
    pkgAvail(pth, type = "source")
    
    # Add new packages (from CRAN) to the miniCRAN repo
    addPackage("Matrix", path = pth, repos = mirror, type = pkgTypes)
    
    # Delete temporary folder
    unlink(pth, recursive = TRUE)
  }
}
</code></pre>

<hr>
<h2 id='addPackageListingGithub'>Add DESCRIPTION information from package on github.</h2><span id='topic+addPackageListingGithub'></span>

<h3>Description</h3>

<p>Downloads the DESCRIPTION file from a package on github, parses the fields
and adds (or replaces) a row in the available package database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addPackageListingGithub(
  pdb = pkgAvail(),
  repo,
  username = NULL,
  branch = "main"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addPackageListingGithub_+3A_pdb">pdb</code></td>
<td>
<p>Package database, usually the result of <code><a href="#topic+pkgAvail">pkgAvail()</a></code> or
<code><a href="utils.html#topic+available.packages">available.packages()</a></code></p>
</td></tr>
<tr><td><code id="addPackageListingGithub_+3A_repo">repo</code></td>
<td>
<p>Character vector. Name of repository on github, e.g.
<code>"andrie/rrd"</code></p>
</td></tr>
<tr><td><code id="addPackageListingGithub_+3A_username">username</code></td>
<td>
<p>Optional character vector. Name of repository on github, e.g.
<code>"andrie/rrd"</code></p>
</td></tr>
<tr><td><code id="addPackageListingGithub_+3A_branch">branch</code></td>
<td>
<p>name of branch, defaults to <code>"main"</code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Create package database
pdb &lt;- cranJuly2014

if (interactive()) {
  pdb &lt;- pkgAvail(repos = c(CRAN = "https://cloud.r-project.org"))

  # Overwrite pdb with development version of miniCRAN at github
  newpdb &lt;- addPackageListingGithub(pdb = pdb, "andrie/miniCRAN")
  newpdb["miniCRAN", ]

  # Add package from github that's not currently on CRAN
  newpdb &lt;- addPackageListingGithub(pdb = pdb, repo = "tidyverse/ggplot2", branch = "main")
  newpdb["ggplot2", ]

  set.seed(1)
  plot(makeDepGraph("ggplot2", availPkgs = newpdb, suggests = TRUE))
}
</code></pre>

<hr>
<h2 id='basePkgs'>Returns names of base packages.</h2><span id='topic+basePkgs'></span>

<h3>Description</h3>

<p>Retrieves names of installed packages by calling
<code><a href="utils.html#topic+installed.packages">utils::installed.packages()</a></code> and returning only those packages where
<code>Priority == "base"</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>basePkgs()
</code></pre>


<h3>See Also</h3>

<p><code><a href="#topic+pkgDep">pkgDep()</a></code>
</p>
<p>Other dependency functions: 
<code><a href="#topic+makeDepGraph">makeDepGraph</a>()</code>,
<code><a href="#topic+pkgDep">pkgDep</a>()</code>,
<code><a href="#topic+plot.pkgDepGraph">plot.pkgDepGraph</a>()</code>
</p>

<hr>
<h2 id='checkVersions'>Check for previous versions of packages in a miniCRAN repository.</h2><span id='topic+checkVersions'></span>

<h3>Description</h3>

<p>Checks for previous versions, and returns the file paths for packages with
multiple versions. You can subsequently decide which version to keep.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkVersions(pkgs = NULL, path = NULL, type = "source", Rversion = R.version)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkVersions_+3A_pkgs">pkgs</code></td>
<td>
<p>Character vector of packages to be installed. If not provided,
checks all files for multiple package versions.</p>
</td></tr>
<tr><td><code id="checkVersions_+3A_path">path</code></td>
<td>
<p>The local path to the directory where the miniCRAN repo resides.</p>
</td></tr>
<tr><td><code id="checkVersions_+3A_type">type</code></td>
<td>
<p>character, indicating the type of package to download and
install. See <code><a href="utils.html#topic+install.packages">install.packages()</a></code>.</p>
</td></tr>
<tr><td><code id="checkVersions_+3A_rversion">Rversion</code></td>
<td>
<p>Version of R (only used if <code>type</code> is not <code>source</code>.) Defaults to <a href="base.html#topic+R.version">R.version</a>, but this can be specified as any of the following formats:
</p>

<ul>
<li><p> a character string with the two digit R version, e.g. &quot;3.1&quot;
</p>
</li>
<li><p> a list with components <code>major</code> and <code>minor</code>
</p>
</li>
<li><p> the result of <code><a href="base.html#topic+getRversion">getRversion()</a></code>
</p>
</li>
<li><p> the result of <a href="base.html#topic+R.version">R.version</a>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns invisibly the file paths to packages with multiple versions
for removal.
</p>
<p>list with an element for each <code>type</code>, consisting of a character
vector of download paths
</p>


<h3>See Also</h3>

<p>Other update repo functions: 
<code><a href="#topic+addOldPackage">addOldPackage</a>()</code>,
<code><a href="#topic+addPackage">addPackage</a>()</code>,
<code><a href="#topic+makeRepo">makeRepo</a>()</code>,
<code><a href="#topic+updatePackages">updatePackages</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>### `checkVersions` and `add.packages.miniCRAN` require an existing miniCRAN repo

# Specify list of packages to download
mirror &lt;- c(CRAN = "https://cloud.r-project.org")
mirror
pkgs &lt;- c("foreach")
pkgTypes &lt;- c("source", "win.binary")

if (interactive()) {
  if (!is.online()) {
    message("p3m seems to be not available.  Check your internet connection.")
  } else {
    pdb &lt;- pkgAvail(repos = mirror, type = "source")
  }
} else {
  pdb &lt;- cranJuly2014
}


if (interactive()) {
  if (!is.online()) {
    message("p3m seems to be not available.  Check your internet connection.")
  } else {
    pkgList &lt;- pkgDep(pkgs, availPkgs = pdb, repos = mirror, type = "source", suggests = FALSE)
    pkgList
  }
}

# Create temporary folder for miniCRAN

if (interactive()) {
  if (!is.online()) {
    message("p3m seems to be not available.  Check your internet connection.")
  } else {
    dir.create(pth &lt;- file.path(tempdir(), "miniCRAN"))
    
    # Make repo for source and win.binary
    makeRepo(pkgList, path = pth, repos = mirror, type = pkgTypes)
    
    # Add other versions of a package (and assume these were added previously)
    oldVers &lt;- data.frame(
      package = c("foreach", "codetools", "iterators"),
      version = c("1.4.0", "0.2-7", "1.0.5"),
      stringsAsFactors = FALSE
    )
    pkgs &lt;- oldVers$package
    addOldPackage(pkgs, path = pth, vers = oldVers$version, repos = mirror, type = "source")
    # NOTE: older binary versions would need to be build from source
    
    # List package versions in the miniCRAN repo (produces warning about duplicates)
    pkgVersionsSrc &lt;- checkVersions(pkgs, path = pth, type = "source")
    pkgVersionsBin &lt;- checkVersions(pkgs, path = pth, type = "win.binary")
    
    # After inspecting package versions, remove old versions
    basename(pkgVersionsSrc$source) # "foreach_1.4.0.tar.gz"  "foreach_1.4.2.tar.gz"
    basename(pkgVersionsBin$win.binary) # "foreach_1.4.0.zip"     "foreach_1.4.2.zip"
    file.remove(c(pkgVersionsSrc$source[1], pkgVersionsBin$win.binary[1]))
    
    # Rebuild package index after adding/removing files
    updateRepoIndex(pth, type = pkgTypes, Rversion = R.version)
    
    pkgAvail(pth, type = "source")
    
    # Add new packages (from CRAN) to the miniCRAN repo
    addPackage("Matrix", path = pth, repos = mirror, type = pkgTypes)
    
    # Delete temporary folder
    unlink(pth, recursive = TRUE)
  }
}
</code></pre>

<hr>
<h2 id='cranJuly2014'>Stored version of available.packages()</h2><span id='topic+cranJuly2014'></span>

<h3>Description</h3>

<p>Copy of the result of <code><a href="utils.html#topic+available.packages">utils::available.packages()</a></code> on July 1, 2014.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cranJuly2014
</code></pre>


<h3>Format</h3>

<p>matrix
</p>

<hr>
<h2 id='getCranDescription'>Obtains DESCRIPTION metadata from CRAN for each package.</h2><span id='topic+getCranDescription'></span>

<h3>Description</h3>

<p>This is a wrapper around <code>tools::CRAN_package_db</code> and may be
deprecated in future versions of the package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getCranDescription(
  pkg,
  repos = getOption("repos"),
  type = "source",
  pkgs = pkgDep(pkg, repos = repos, type = type)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getCranDescription_+3A_pkg">pkg</code></td>
<td>
<p>Character vector of packages.</p>
</td></tr>
<tr><td><code id="getCranDescription_+3A_repos">repos</code></td>
<td>
<p>URL(s) of the 'contrib' sections of the repositories, e.g.
<code>"https://cran.us.r-project.org"</code>. Passed to <code><a href="utils.html#topic+available.packages">available.packages()</a></code></p>
</td></tr>
<tr><td><code id="getCranDescription_+3A_type">type</code></td>
<td>
<p>Possible values are (currently) &quot;source&quot;, &quot;mac.binary&quot; and
&quot;win.binary&quot;: the binary types can be listed and downloaded but not
installed on other platforms.  Passed to <code><a href="utils.html#topic+download.packages">download.packages()</a></code>.</p>
</td></tr>
<tr><td><code id="getCranDescription_+3A_pkgs">pkgs</code></td>
<td>
<p>Character vector of packages to download</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  getCranDescription(c("igraph", "ggplot2", "XML"),
                     repos = c(CRAN = getOption("minicran.mran"))
  )
}
</code></pre>

<hr>
<h2 id='is.online'>Returns TRUE if the p3m URL can be accessed.</h2><span id='topic+is.online'></span>

<h3>Description</h3>

<p>Returns TRUE if the p3m URL can be accessed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.online(url = NULL, tryHttp = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.online_+3A_url">url</code></td>
<td>
<p>p3m url</p>
</td></tr>
<tr><td><code id="is.online_+3A_tryhttp">tryHttp</code></td>
<td>
<p>If TRUE, also attempts http URL, for compatibility with older versions of R</p>
</td></tr>
</table>

<hr>
<h2 id='makeDepGraph'>Create dependency graph from available packages.</h2><span id='topic+makeDepGraph'></span>

<h3>Description</h3>

<p>Each package is a node, and a dependency is an edge
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeDepGraph(
  pkg,
  availPkgs,
  repos = getOption("repos"),
  type = "source",
  suggests = TRUE,
  enhances = FALSE,
  includeBasePkgs = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeDepGraph_+3A_pkg">pkg</code></td>
<td>
<p>Character vector of packages.</p>
</td></tr>
<tr><td><code id="makeDepGraph_+3A_availpkgs">availPkgs</code></td>
<td>
<p>Data frame with an element called <code>package</code>. The <code>package</code>
element is a vector of available packages.  Defaults to reading this list
from CRAN, using <code><a href="utils.html#topic+available.packages">available.packages()</a></code></p>
</td></tr>
<tr><td><code id="makeDepGraph_+3A_repos">repos</code></td>
<td>
<p>URL(s) of the 'contrib' sections of the repositories, e.g.
<code>"https://cran.us.r-project.org"</code>. Passed to <code><a href="utils.html#topic+available.packages">available.packages()</a></code></p>
</td></tr>
<tr><td><code id="makeDepGraph_+3A_type">type</code></td>
<td>
<p>Possible values are (currently) &quot;source&quot;, &quot;mac.binary&quot; and
&quot;win.binary&quot;: the binary types can be listed and downloaded but not
installed on other platforms.  Passed to <code><a href="utils.html#topic+download.packages">download.packages()</a></code>.</p>
</td></tr>
<tr><td><code id="makeDepGraph_+3A_suggests">suggests</code></td>
<td>
<p>If TRUE, retrieves Suggests dependencies (non-recursively)</p>
</td></tr>
<tr><td><code id="makeDepGraph_+3A_enhances">enhances</code></td>
<td>
<p>If TRUE, retrieves Enhances dependencies (non-recursively)</p>
</td></tr>
<tr><td><code id="makeDepGraph_+3A_includebasepkgs">includeBasePkgs</code></td>
<td>
<p>If TRUE, include base R packages in results</p>
</td></tr>
<tr><td><code id="makeDepGraph_+3A_...">...</code></td>
<td>
<p>Other arguments passed to <code><a href="utils.html#topic+available.packages">available.packages()</a></code></p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+pkgDep">pkgDep()</a></code> to extract package dependencies
</p>
<p>Other dependency functions: 
<code><a href="#topic+basePkgs">basePkgs</a>()</code>,
<code><a href="#topic+pkgDep">pkgDep</a>()</code>,
<code><a href="#topic+plot.pkgDepGraph">plot.pkgDepGraph</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (interactive()) {
  availPkgs &lt;- cranJuly2014
  
  availPkgs &lt;- pkgAvail(
    repos = c(CRAN = "https://cloud.r-project.org"),
    type = "source"
  )
  
  
  # Create dependency graph using stored database of available packages
  p &lt;- makeDepGraph(
    c("ggplot2", "forecast"),
    availPkgs = availPkgs
  )
  
  if(require(igraph)) plot(p)

  # Create dependency graph using newly retrieved database from CRAN
  
  p &lt;- makeDepGraph(
    c("ggplot2", "forecast"),
    repos = c(CRAN = getOption("minicran.mran")),
    type = "source"
  )
  if(requireNamespace("igraph", quietly = TRUE)) {
    plot(p)
  } else {
    message("install package `igraph` to view dependency graph")
  }
  
}
</code></pre>

<hr>
<h2 id='makeLibrary'>Deprecated function to download packages to local folder.</h2><span id='topic+makeLibrary'></span>

<h3>Description</h3>

<p>Deprecated function to download packages to local folder.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeLibrary(pkgs, path, type = "source")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeLibrary_+3A_pkgs">pkgs</code></td>
<td>
<p>Character vector of packages to download</p>
</td></tr>
<tr><td><code id="makeLibrary_+3A_path">path</code></td>
<td>
<p>Destination download path. This path is the root folder of your
new repository.</p>
</td></tr>
<tr><td><code id="makeLibrary_+3A_type">type</code></td>
<td>
<p>Possible values are (currently) &quot;source&quot;, &quot;mac.binary&quot; and
&quot;win.binary&quot;: the binary types can be listed and downloaded but not
installed on other platforms.  Passed to <code><a href="utils.html#topic+download.packages">download.packages()</a></code>.</p>
</td></tr>
</table>

<hr>
<h2 id='makeRepo'>Downloads packages from CRAN to specified path and creates a local
repository.</h2><span id='topic+makeRepo'></span><span id='topic+updateRepoIndex'></span>

<h3>Description</h3>

<p>Given a list of packages, downloads these packages to a specified destination
folder using the required CRAN folder structure, and finally creates the
PACKAGES index file.  Since the folder structure mimics the required
structure and files of a CRAN repository, it supports functions like
<code><a href="utils.html#topic+install.packages">utils::install.packages()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeRepo(
  pkgs,
  path,
  repos = getOption("repos"),
  type = "source",
  Rversion = R.version,
  download = TRUE,
  writePACKAGES = TRUE,
  quiet = FALSE
)

updateRepoIndex(path, type = "source", Rversion = R.version)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeRepo_+3A_pkgs">pkgs</code></td>
<td>
<p>Character vector of packages to download</p>
</td></tr>
<tr><td><code id="makeRepo_+3A_path">path</code></td>
<td>
<p>Destination download path. This path is the root folder of your
new repository.</p>
</td></tr>
<tr><td><code id="makeRepo_+3A_repos">repos</code></td>
<td>
<p>URL(s) of the 'contrib' sections of the repositories, e.g.
<code>"https://cran.us.r-project.org"</code>. Passed to <code><a href="utils.html#topic+available.packages">available.packages()</a></code></p>
</td></tr>
<tr><td><code id="makeRepo_+3A_type">type</code></td>
<td>
<p>Possible values are (currently) &quot;source&quot;, &quot;mac.binary&quot; and
&quot;win.binary&quot;: the binary types can be listed and downloaded but not
installed on other platforms.  Passed to <code><a href="utils.html#topic+download.packages">download.packages()</a></code>.</p>
</td></tr>
<tr><td><code id="makeRepo_+3A_rversion">Rversion</code></td>
<td>
<p>Version of R (only used if <code>type</code> is not <code>source</code>.) Defaults to <a href="base.html#topic+R.version">R.version</a>, but this can be specified as any of the following formats:
</p>

<ul>
<li><p> a character string with the two digit R version, e.g. &quot;3.1&quot;
</p>
</li>
<li><p> a list with components <code>major</code> and <code>minor</code>
</p>
</li>
<li><p> the result of <code><a href="base.html#topic+getRversion">getRversion()</a></code>
</p>
</li>
<li><p> the result of <a href="base.html#topic+R.version">R.version</a>
</p>
</li></ul>
</td></tr>
<tr><td><code id="makeRepo_+3A_download">download</code></td>
<td>
<p>If TRUE downloads packages.</p>
</td></tr>
<tr><td><code id="makeRepo_+3A_writepackages">writePACKAGES</code></td>
<td>
<p>If TRUE, calls <code><a href="tools.html#topic+write_PACKAGES">write_PACKAGES()</a></code> to update the
repository PACKAGES file.</p>
</td></tr>
<tr><td><code id="makeRepo_+3A_quiet">quiet</code></td>
<td>
<p>If TRUE, suppress status messages (if any), and the progress bar
during download.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character vector of downloaded package files
</p>


<h3>Repo folder structure</h3>

<p>A repository has two main folders, one for source packages, and the other
for binary packages.  Inside the binary package folder, <code>bin</code>, you will find
subfolders for Windows as well as the various OSX binaries.
</p>
<p><code>+- Root</code>
</p>
<p><code>...+- src/contrib</code>
</p>
<p><code>......+- PACKAGES</code>
</p>
<p><code>..+- bin</code>
</p>
<p><code>.......+- windows/contrib/version</code>
</p>
<p><code>..........+- PACKAGES</code>
</p>
<p><code>.......+-  macosx/contrib/version</code>
</p>
<p><code>..........+-  PACKAGES</code>
</p>
<p><code>.......+-  macosx/mavericks/contrib/version</code>
</p>
<p><code>..........+-  PACKAGES</code>
</p>
<p><code>.......+-  macosx/leopard/contrib/version</code>
</p>
<p><code>..........+- PACKAGES</code>
</p>


<h3>Note</h3>

<p>Internally makes use of <code><a href="utils.html#topic+download.packages">utils::download.packages()</a></code> and
<code><a href="tools.html#topic+write_PACKAGES">write_PACKAGES()</a></code>
</p>


<h3>See Also</h3>

<p>Other update repo functions: 
<code><a href="#topic+addOldPackage">addOldPackage</a>()</code>,
<code><a href="#topic+addPackage">addPackage</a>()</code>,
<code><a href="#topic+checkVersions">checkVersions</a>()</code>,
<code><a href="#topic+updatePackages">updatePackages</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Specify list of packages to download
mirror &lt;- c(CRAN = "https://cloud.r-project.org")
pkgs &lt;- c("foreach")

if (interactive()) {
  pdb &lt;- cranJuly2014
  
  pdb &lt;- pkgAvail(
    repos = c(CRAN = getOption("minicran.mran")),
    type = "source"
  )
  
  pkgList &lt;- pkgDep(pkgs, availPkgs = pdb, repos = mirror,
                    type = "source", suggests = FALSE)
  pkgList
  
  
  # Create temporary folder for miniCRAN
  dir.create(pth &lt;- file.path(tempdir(), "miniCRAN"))
  
  # Make repo for source and win.binary
  makeRepo(pkgList, path = pth, repos = mirror, type = "source")
  
  # List all files in miniCRAN
  list.files(pth, recursive = TRUE)
  
  # Check for available packages
  pkgAvail(repos = pth, type = "source")
  
  # Repeat process for windows binaries
  makeRepo(pkgList, path = pth, repos = mirror, type = "win.binary")
  pkgAvail(repos = pth, type = "win.binary")
  
  # Delete temporary folder
  unlink(pth, recursive = TRUE)
}
</code></pre>

<hr>
<h2 id='miniCRAN-package'>description</h2><span id='topic+miniCRAN-package'></span><span id='topic+miniCRAN'></span><span id='topic+minicran'></span>

<h3>Description</h3>

<p>At the end of 2014, CRAN consisted of more than 6,000 packages.  Many
organisations need to maintain a private mirror of CRAN, but with only a
subset of packages that are relevant to them.
</p>


<h3>Details</h3>

<p><code>miniCRAN</code> makes it possible to create an internally consistent repository
consisting of selected packages from CRAN-like repositories.  The user
specifies a set of desired packages, and miniCRAN recursively reads the
dependency tree for these packages, then downloads only this subset.
</p>
<p>There are many reasons for not creating a complete mirror CRAN using <code>rsync</code>:
</p>

<ul>
<li><p> You may wish to mirror only a subset of CRAN, for security, legal
compliance or any other in-house reason
</p>
</li>
<li><p> You may wish to restrict internal package use to a subset of public
packages, to minimize package duplication, or other reasons of coding
standards
</p>
</li>
<li><p> You may wish to make packages available from public repositories other than
CRAN, e.g. BioConductor, r-forge, OmegaHat, etc.
</p>
</li>
<li><p> You may wish to add custom in-house packages to your repository
</p>
</li></ul>

<p>The ambition of <code>miniCRAN</code> is to eventually satisfy all of these
considerations.
</p>


<h3>Making a private repo</h3>


<ul>
<li> <p><code><a href="#topic+pkgAvail">pkgAvail()</a></code>: Read from a local (or remote) CRAN-like repository and
determine available packages.
</p>
</li>
<li> <p><code><a href="#topic+pkgDep">pkgDep()</a></code>: Find (recursive) package dependencies.
</p>
</li>
<li> <p><code><a href="#topic+makeRepo">makeRepo()</a></code> : Make a mini CRAN repository, by downloading packages (and
their dependencies) and creating the appropriate file structure for a
repository.  This allows you to use functions like
<code><a href="utils.html#topic+available.packages">utils::available.packages()</a></code> and <code><a href="utils.html#topic+install.packages">utils::install.packages()</a></code> on your local
repository.
</p>
</li></ul>

<p>This subset will be internally consistent, i.e. the following functions
will work as expected:
</p>

<ul>
<li> <p><code><a href="utils.html#topic+available.packages">utils::available.packages()</a></code>
</p>
</li>
<li> <p><code><a href="utils.html#topic+install.packages">utils::install.packages()</a></code>
</p>
</li></ul>

<p>The main function is <code><a href="#topic+makeRepo">makeRepo()</a></code> - this will download all the required
packages, with their dependencies, into the appropriate repository file
structure, and then create the repository index (PACKAGES) file.
</p>


<h3>Updating packages in a repo</h3>


<ul>
<li> <p><code><a href="#topic+oldPackages">oldPackages()</a></code>: Indicates packages which have a (suitable) later version
on the repositories * <code><a href="#topic+updatePackages">updatePackages()</a></code>: Offers to download and install
such packages
</p>
</li></ul>



<h3>Creating dependencies</h3>

<p>To get a recursive list of dependencies as well as a plot, use <code><a href="#topic+pkgDep">pkgDep()</a></code>
followed by  <code><a href="#topic+makeDepGraph">makeDepGraph()</a></code>.
</p>

<ul>
<li> <p><code><a href="#topic+pkgDep">pkgDep()</a></code>: Find (recursive) package dependencies.
</p>
</li>
<li> <p><code><a href="#topic+makeDepGraph">makeDepGraph()</a></code>: Create graph of selected package dependencies.
</p>
</li>
<li> <p><code><a href="#topic+plot.pkgDepGraph">plot.pkgDepGraph()</a></code>: Create a visualization of the dependency graph
</p>
</li></ul>



<h3>Package options</h3>

 <dl>
<dt><code>minicran.mran</code></dt><dd><p>preferred p3m URL. Defaults to
<a href="https://packagemanager.posit.co/cran">https://packagemanager.posit.co/cran</a> for R versions 3.2.2 and greater. Versions
earlier than 3.2.2 use HTTP instead of HTTPS.</p>
</dd> </dl>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Andrie de Vries <a href="mailto:apdevries@gmail.com">apdevries@gmail.com</a> [copyright holder]
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Alex Chubaty <a href="mailto:alex.chubaty@gmail.com">alex.chubaty@gmail.com</a> [contributor]
</p>
</li>
<li><p> Microsoft Corporation [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/andrie/miniCRAN">https://github.com/andrie/miniCRAN</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/andrie/miniCRAN/issues">https://github.com/andrie/miniCRAN/issues</a>
</p>
</li></ul>


<hr>
<h2 id='pkgAvail'>Reads available packages from CRAN repository.</h2><span id='topic+pkgAvail'></span>

<h3>Description</h3>

<p>This is a thin wrapper around <code><a href="utils.html#topic+available.packages">utils::available.packages()</a></code>.  If the argument
<code>path</code> is supplied, then the function attempts to read from a local
repository, otherwise attempts to read from a CRAN mirror at the <code>repos</code> url.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pkgAvail(
  repos = getOption("repos"),
  type = "source",
  Rversion = R.version,
  quiet = FALSE,
  filters = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pkgAvail_+3A_repos">repos</code></td>
<td>
<p>URL(s) of the 'contrib' sections of the repositories, e.g.
<code>"https://cran.us.r-project.org"</code>. Passed to <code><a href="utils.html#topic+available.packages">available.packages()</a></code></p>
</td></tr>
<tr><td><code id="pkgAvail_+3A_type">type</code></td>
<td>
<p>Possible values are (currently) &quot;source&quot;, &quot;mac.binary&quot; and
&quot;win.binary&quot;: the binary types can be listed and downloaded but not
installed on other platforms.  Passed to <code><a href="utils.html#topic+download.packages">download.packages()</a></code>.</p>
</td></tr>
<tr><td><code id="pkgAvail_+3A_rversion">Rversion</code></td>
<td>
<p>Version of R (only used if <code>type</code> is not <code>source</code>.) Defaults to <a href="base.html#topic+R.version">R.version</a>, but this can be specified as any of the following formats:
</p>

<ul>
<li><p> a character string with the two digit R version, e.g. &quot;3.1&quot;
</p>
</li>
<li><p> a list with components <code>major</code> and <code>minor</code>
</p>
</li>
<li><p> the result of <code><a href="base.html#topic+getRversion">getRversion()</a></code>
</p>
</li>
<li><p> the result of <a href="base.html#topic+R.version">R.version</a>
</p>
</li></ul>
</td></tr>
<tr><td><code id="pkgAvail_+3A_quiet">quiet</code></td>
<td>
<p>If TRUE, suppresses warnings</p>
</td></tr>
<tr><td><code id="pkgAvail_+3A_filters">filters</code></td>
<td>
<p>passed to <a href="utils.html#topic+available.packages">utils::available.packages</a></p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+pkgDep">pkgDep()</a></code>
</p>

<hr>
<h2 id='pkgDep'>Retrieves package dependencies.</h2><span id='topic+pkgDep'></span>

<h3>Description</h3>

<p>Performs recursive retrieve for <code>Depends</code>, <code>Imports</code> and <code>LinkLibrary</code>.
Performs non-recursive retrieve for <code>Suggests</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pkgDep(
  pkg,
  availPkgs,
  repos = getOption("repos"),
  type = "source",
  depends = TRUE,
  suggests = TRUE,
  enhances = FALSE,
  includeBasePkgs = FALSE,
  Rversion = R.version,
  quiet = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pkgDep_+3A_pkg">pkg</code></td>
<td>
<p>Character vector of packages.</p>
</td></tr>
<tr><td><code id="pkgDep_+3A_availpkgs">availPkgs</code></td>
<td>
<p>Data frame with an element called <code>package</code>. The <code>package</code>
element is a vector of available packages.  Defaults to reading this list
from CRAN, using <code><a href="utils.html#topic+available.packages">available.packages()</a></code></p>
</td></tr>
<tr><td><code id="pkgDep_+3A_repos">repos</code></td>
<td>
<p>URL(s) of the 'contrib' sections of the repositories, e.g.
<code>"https://cran.us.r-project.org"</code>. Passed to <code><a href="utils.html#topic+available.packages">available.packages()</a></code></p>
</td></tr>
<tr><td><code id="pkgDep_+3A_type">type</code></td>
<td>
<p>Possible values are (currently) &quot;source&quot;, &quot;mac.binary&quot; and
&quot;win.binary&quot;: the binary types can be listed and downloaded but not
installed on other platforms.  Passed to <code><a href="utils.html#topic+download.packages">download.packages()</a></code>.</p>
</td></tr>
<tr><td><code id="pkgDep_+3A_depends">depends</code></td>
<td>
<p>If TRUE, retrieves <code>Depends</code>, <code>Imports</code> and <code>LinkingTo</code> dependencies
(non-recursively)</p>
</td></tr>
<tr><td><code id="pkgDep_+3A_suggests">suggests</code></td>
<td>
<p>If TRUE, retrieves Suggests dependencies (non-recursively)</p>
</td></tr>
<tr><td><code id="pkgDep_+3A_enhances">enhances</code></td>
<td>
<p>If TRUE, retrieves Enhances dependencies (non-recursively)</p>
</td></tr>
<tr><td><code id="pkgDep_+3A_includebasepkgs">includeBasePkgs</code></td>
<td>
<p>If TRUE, include base R packages in results</p>
</td></tr>
<tr><td><code id="pkgDep_+3A_rversion">Rversion</code></td>
<td>
<p>Version of R (only used if <code>type</code> is not <code>source</code>.) Defaults to <a href="base.html#topic+R.version">R.version</a>, but this can be specified as any of the following formats:
</p>

<ul>
<li><p> a character string with the two digit R version, e.g. &quot;3.1&quot;
</p>
</li>
<li><p> a list with components <code>major</code> and <code>minor</code>
</p>
</li>
<li><p> the result of <code><a href="base.html#topic+getRversion">getRversion()</a></code>
</p>
</li>
<li><p> the result of <a href="base.html#topic+R.version">R.version</a>
</p>
</li></ul>
</td></tr>
<tr><td><code id="pkgDep_+3A_quiet">quiet</code></td>
<td>
<p>If TRUE, suppresses warnings</p>
</td></tr>
<tr><td><code id="pkgDep_+3A_...">...</code></td>
<td>
<p>Other arguments passed to <code><a href="utils.html#topic+available.packages">available.packages()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>character vector of package names
</p>


<h3>See Also</h3>

<p>Other dependency functions: 
<code><a href="#topic+basePkgs">basePkgs</a>()</code>,
<code><a href="#topic+makeDepGraph">makeDepGraph</a>()</code>,
<code><a href="#topic+plot.pkgDepGraph">plot.pkgDepGraph</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (interactive()) {
  pkgDep(pkg = c("ggplot2", "plyr", "reshape2"),
         repos = c(CRAN = "https://cloud.r-project.org")
  )
  
  pdb &lt;- cranJuly2014
  pdb &lt;- pkgAvail(repos = c(CRAN = getOption("minicran.mran")))
  
  pkgDep(pkg = c("ggplot2", "plyr", "reshape2"), pdb)
  
}
</code></pre>

<hr>
<h2 id='plot.pkgDepGraph'>Plots a package dependency graph.</h2><span id='topic+plot.pkgDepGraph'></span>

<h3>Description</h3>

<p>Plots a package dependency graph.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'pkgDepGraph'
plot(
  x,
  pkgsToHighlight,
  main = paste(attr(x, "pkgs"), collapse = ", "),
  legendPosition = c(-1.2, -1),
  shape = "circle",
  vertex.size = 8,
  cex = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.pkgDepGraph_+3A_x">x</code></td>
<td>
<p>Object to plot</p>
</td></tr>
<tr><td><code id="plot.pkgDepGraph_+3A_pkgstohighlight">pkgsToHighlight</code></td>
<td>
<p>Optional character vector with names of package to
highlight. If missing, defaults to packages used in original call to
<code><a href="#topic+makeDepGraph">makeDepGraph()</a></code></p>
</td></tr>
<tr><td><code id="plot.pkgDepGraph_+3A_main">main</code></td>
<td>
<p>Title of plot</p>
</td></tr>
<tr><td><code id="plot.pkgDepGraph_+3A_legendposition">legendPosition</code></td>
<td>
<p>Numeric vector of length 2, indicating (x, y) position
of edge legend. Both values should be in the range <code style="white-space: pre;">&#8288;[-1; 1]&#8288;</code>.  If <code>NULL</code>,
the edge legend is not displayed.</p>
</td></tr>
<tr><td><code id="plot.pkgDepGraph_+3A_shape">shape</code></td>
<td>
<p>Shape of edge.  See <code><a href="igraph.html#topic+plot.common">igraph::igraph.plotting()</a></code>. Could be
&quot;none&quot;, &quot;circle&quot;, &quot;square&quot;, ...</p>
</td></tr>
<tr><td><code id="plot.pkgDepGraph_+3A_vertex.size">vertex.size</code></td>
<td>
<p>Size of vertex shape. <code><a href="igraph.html#topic+plot.common">igraph::igraph.plotting()</a></code></p>
</td></tr>
<tr><td><code id="plot.pkgDepGraph_+3A_cex">cex</code></td>
<td>
<p>Vertex label size.</p>
</td></tr>
<tr><td><code id="plot.pkgDepGraph_+3A_...">...</code></td>
<td>
<p>Ignored</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other dependency functions: 
<code><a href="#topic+basePkgs">basePkgs</a>()</code>,
<code><a href="#topic+makeDepGraph">makeDepGraph</a>()</code>,
<code><a href="#topic+pkgDep">pkgDep</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tags &lt;- "chron"

# Plot using defaults

if (interactive()){
  pdb &lt;- pkgAvail(
    repos = c(CRAN = getOption("minicran.mran")),
    type = "source"
  )
} else {
  pdb &lt;- cranJuly2014
}


if (interactive()) {
  dg &lt;- makeDepGraph(tags, availPkgs = pdb  , includeBasePkgs = FALSE,
                     suggests = TRUE, enhances = TRUE)
  
  set.seed(43);
  plot(dg)
  
  
  # Move edge legend to top left
  set.seed(42);
  plot(dg, legendPosition = c(-1, 1))
  
  # Change font size and shape size
  set.seed(42);
  plot(dg, legendPosition = c(-1, 1), vertex.size = 20,  cex = 0.5)
  
  
  # Move vertex legend to top right
  set.seed(42);
  plot(dg, legendPosition = c(1, 1), vertex.size = 20,  cex = 0.5)
}
</code></pre>

<hr>
<h2 id='repoPrefix'>Get the path to the repo directory containing the package files.</h2><span id='topic+repoPrefix'></span>

<h3>Description</h3>

<p>Get the path to the repo directory containing the package files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repoPrefix(type, Rversion)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="repoPrefix_+3A_type">type</code></td>
<td>
<p>character, indicating the type of package to download and
install. See <code><a href="utils.html#topic+install.packages">install.packages()</a></code>.</p>
</td></tr>
<tr><td><code id="repoPrefix_+3A_rversion">Rversion</code></td>
<td>
<p>Version of R (only used if <code>type</code> is not <code>source</code>.) Defaults to <a href="base.html#topic+R.version">R.version</a>, but this can be specified as any of the following formats:
</p>

<ul>
<li><p> a character string with the two digit R version, e.g. &quot;3.1&quot;
</p>
</li>
<li><p> a list with components <code>major</code> and <code>minor</code>
</p>
</li>
<li><p> the result of <code><a href="base.html#topic+getRversion">getRversion()</a></code>
</p>
</li>
<li><p> the result of <a href="base.html#topic+R.version">R.version</a>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>The file path to the package files directory.
</p>


<h3>Repo folder structure</h3>

<p>A repository has two main folders, one for source packages, and the other
for binary packages.  Inside the binary package folder, <code>bin</code>, you will find
subfolders for Windows as well as the various OSX binaries.
</p>
<p><code>+- Root</code>
</p>
<p><code>...+- src/contrib</code>
</p>
<p><code>......+- PACKAGES</code>
</p>
<p><code>..+- bin</code>
</p>
<p><code>.......+- windows/contrib/version</code>
</p>
<p><code>..........+- PACKAGES</code>
</p>
<p><code>.......+-  macosx/contrib/version</code>
</p>
<p><code>..........+-  PACKAGES</code>
</p>
<p><code>.......+-  macosx/mavericks/contrib/version</code>
</p>
<p><code>..........+-  PACKAGES</code>
</p>
<p><code>.......+-  macosx/leopard/contrib/version</code>
</p>
<p><code>..........+- PACKAGES</code>
</p>


<h3>Note</h3>

<p>Not all versions of R are compatible with with all package types (e.g.,
<code>mac.binary.el-capitan</code> is only valid for R &gt; 3.4.0).
</p>

<hr>
<h2 id='twodigitRversion'>Get a two-digit version of the R version</h2><span id='topic+twodigitRversion'></span>

<h3>Description</h3>

<p>Get a two-digit version of the R version
</p>


<h3>Usage</h3>

<pre><code class='language-R'>twodigitRversion(Rversion = R.version)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="twodigitRversion_+3A_rversion">Rversion</code></td>
<td>
<p>Version of R (only used if <code>type</code> is not <code>source</code>.) Defaults to <a href="base.html#topic+R.version">R.version</a>, but this can be specified as any of the following formats:
</p>

<ul>
<li><p> a character string with the two digit R version, e.g. &quot;3.1&quot;
</p>
</li>
<li><p> a list with components <code>major</code> and <code>minor</code>
</p>
</li>
<li><p> the result of <code><a href="base.html#topic+getRversion">getRversion()</a></code>
</p>
</li>
<li><p> the result of <a href="base.html#topic+R.version">R.version</a>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string representing the two-digit R version.
</p>

<hr>
<h2 id='updatePackages'>Check for available package updates in a miniCRAN repo.</h2><span id='topic+updatePackages'></span><span id='topic+oldPackages'></span>

<h3>Description</h3>

<p><code>oldPackages()</code> indicates packages which have a (suitable) later version on
the repositories whereas <code>updatePackages()</code> offers to download and install
such packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>oldPackages(
  path = NULL,
  repos = getOption("repos"),
  availPkgs = pkgAvail(repos = repos, type = type, Rversion = Rversion),
  method,
  availableLocal = pkgAvail(repos = path, type = type, Rversion = Rversion, quiet =
    quiet),
  type = "source",
  Rversion = R.version,
  quiet = FALSE
)

updatePackages(
  path = NULL,
  repos = getOption("repos"),
  method = NULL,
  ask = TRUE,
  availPkgs = pkgAvail(repos = repos, type = type, Rversion = Rversion),
  oldPkgs = NULL,
  type = "source",
  Rversion = R.version,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="updatePackages_+3A_path">path</code></td>
<td>
<p>Destination download path. This path is the root folder of your
new repository.</p>
</td></tr>
<tr><td><code id="updatePackages_+3A_repos">repos</code></td>
<td>
<p>URL(s) of the 'contrib' sections of the repositories, e.g.
<code>"https://cran.us.r-project.org"</code>. Passed to <code><a href="utils.html#topic+available.packages">available.packages()</a></code></p>
</td></tr>
<tr><td><code id="updatePackages_+3A_availpkgs">availPkgs</code></td>
<td>
<p>Data frame with an element called <code>package</code>. The <code>package</code>
element is a vector of available packages.  Defaults to reading this list
from CRAN, using <code><a href="utils.html#topic+available.packages">available.packages()</a></code></p>
</td></tr>
<tr><td><code id="updatePackages_+3A_method">method</code></td>
<td>
<p>Download method, see <code><a href="utils.html#topic+download.file">download.file()</a></code>.</p>
</td></tr>
<tr><td><code id="updatePackages_+3A_availablelocal">availableLocal</code></td>
<td>
<p>all packages hosted in the miniCRAN repo, as returned
by <code><a href="#topic+pkgAvail">pkgAvail()</a></code>. A subset can be specified; currently this must be in the
same (character matrix) format as returned by <code><a href="#topic+pkgAvail">pkgAvail()</a></code>.</p>
</td></tr>
<tr><td><code id="updatePackages_+3A_type">type</code></td>
<td>
<p>Possible values are (currently) &quot;source&quot;, &quot;mac.binary&quot; and
&quot;win.binary&quot;: the binary types can be listed and downloaded but not
installed on other platforms.  Passed to <code><a href="utils.html#topic+download.packages">download.packages()</a></code>.</p>
</td></tr>
<tr><td><code id="updatePackages_+3A_rversion">Rversion</code></td>
<td>
<p>Version of R (only used if <code>type</code> is not <code>source</code>.) Defaults to <a href="base.html#topic+R.version">R.version</a>, but this can be specified as any of the following formats:
</p>

<ul>
<li><p> a character string with the two digit R version, e.g. &quot;3.1&quot;
</p>
</li>
<li><p> a list with components <code>major</code> and <code>minor</code>
</p>
</li>
<li><p> the result of <code><a href="base.html#topic+getRversion">getRversion()</a></code>
</p>
</li>
<li><p> the result of <a href="base.html#topic+R.version">R.version</a>
</p>
</li></ul>
</td></tr>
<tr><td><code id="updatePackages_+3A_quiet">quiet</code></td>
<td>
<p>If TRUE, suppress status messages (if any), and the progress bar
during download.</p>
</td></tr>
<tr><td><code id="updatePackages_+3A_ask">ask</code></td>
<td>
<p>logical indicating whether to ask user before packages are
actually downloaded and installed.  Alternatively, the value <code>"graphics"</code>
starts an interactive widget to allow the user to (de-)select from the list of
packages which could be updated or added. The latter value only works on
systems with a GUI version of <code><a href="utils.html#topic+select.list">select.list()</a></code>, and is otherwise equivalent
to <code>ask = TRUE</code>.</p>
</td></tr>
<tr><td><code id="updatePackages_+3A_oldpkgs">oldPkgs</code></td>
<td>
<p>if specified as non-NULL, <code>updatePackages()</code> only considers
these packages for updating. This may be a character vector of package
names or a matrix as returned by <code>oldPackages()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions are based on <code><a href="utils.html#topic+update.packages">update.packages()</a></code>.  However, rather than
looking for locally installed packages they look for the package source and
binaries in the miniCRAN repository.
</p>


<h3>Value</h3>

<p><code>oldPackages()</code> returns a matrix with one row per package and columns
for &quot;Package&quot;, &quot;LocalVer&quot;, &quot;ReposVer&quot; and &quot;Repository&quot;.  The matrix row
names the package names.
</p>
<p><code>updatePackages</code> returns <code>NULL</code> invisibly.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+updatePackages">updatePackages()</a></code>, <code><a href="#topic+pkgAvail">pkgAvail()</a></code>.
</p>
<p>Other update repo functions: 
<code><a href="#topic+addOldPackage">addOldPackage</a>()</code>,
<code><a href="#topic+addPackage">addPackage</a>()</code>,
<code><a href="#topic+checkVersions">checkVersions</a>()</code>,
<code><a href="#topic+makeRepo">makeRepo</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>### `oldPackages` and `updatePackages` require an existing miniCRAN repo

# Specify list of packages to download
mirror &lt;- c(CRAN = "https://cloud.r-project.org")
pkgs &lt;- c("foreach")

pdb &lt;- cranJuly2014

if (interactive()) {
  pdb &lt;- pkgAvail(repos = mirror, type = "source")
  
  pkgList &lt;- pkgDep(pkgs, availPkgs = pdb, repos = mirror, type = "source", suggests = FALSE)
  pkgList
  
  # Create temporary folder for miniCRAN
  dir.create(pth &lt;- file.path(tempdir(), "miniCRAN"))
  
  # create the miniCRAN directory structure but only add bin files
  makeRepo(pkgList, path = pth, repos = mirror, type = "source", download = FALSE)
  makeRepo(pkgList, path = pth, repos = mirror, type = "win.binary", download = TRUE)
  
  # download old source package version and create repo index
  oldVers &lt;- data.frame(package = c("foreach", "codetools", "iterators"),
                        version = c("1.4.0", "0.2-7", "1.0.5"),
                        stringsAsFactors = FALSE)
  addOldPackage(pkgList, path = pth, repos = mirror, vers = oldVers$version, type = "source")
  # NOTE: older binary versions would need to be build from source
  
  # Check if updated packages are available
  oldPackages(path = pth, repos = mirror, type = "source") # should need update
  oldPackages(path = pth, repos = mirror, type = "win.binary") # should be current
  
  # Update available packages
  updatePackages(path = pth, repos = mirror, type = "source", ask = FALSE) # should need update
  updatePackages(path = pth, repos = mirror, type = "win.binary") # should be current
  
  # Delete temporary folder
  unlink(pth, recursive = TRUE)
}
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
