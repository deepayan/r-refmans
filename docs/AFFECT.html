<!DOCTYPE html><html><head><title>Help for package AFFECT</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {AFFECT}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#AFFECT'><p>Accelerated Functional Failure Time Model with Error-Contaminated Survival Times</p></a></li>
<li><a href='#Boosting'><p>Estimation of Functional Forms of Covaraites under AFT Models</p></a></li>
<li><a href='#data_gen'><p>Generation of Artificial Data</p></a></li>
<li><a href='#ME_correction'><p>Correction of Measurement Error in Survival time and Censoring Status.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Accelerated Functional Failure Time Model with
Error-Contaminated Survival Times</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.2</td>
</tr>
<tr>
<td>Author:</td>
<td>
    Hsiao-Ting Huang &lt;nikkihuang309700034@gmail.com&gt; [cre,aut]
    Li-Pang Chen &lt;lchen723@nccu.edu.tw&gt; [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Hsiao-Ting Huang &lt;nikkihuang309700034@gmail.com&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.3.1)</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats,ggplot2</td>
</tr>
<tr>
<td>Description:</td>
<td>We aim to deal with data with measurement error in the response and misclassification censoring status under an AFT model. This package primarily contains three functions, which are used to generate artificial data, correction for error-prone data and estimate the functional covariates for an AFT model.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-07-06 13:34:47 UTC; nikki</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-07-06 14:00:15 UTC</td>
</tr>
</table>
<hr>
<h2 id='AFFECT'>Accelerated Functional Failure Time Model with Error-Contaminated Survival Times</h2><span id='topic+AFFECT'></span>

<h3>Description</h3>

<p>The package AFFECT, referred to Accelerated Functional Failure time model with Error-Contaminated survival Times,
aims to recover the functional covariates under accelerated functional failure time models, where the data are
subject to error-prone response and misclassified censoring status. This package primarily
contains three functions. <code>data_gen</code> is applied to generate artificial data based on accelerated functional
failure time models, including potential covariates, error-prone response and misclassified censoring status.
<code>ME_correction</code> is used to do correction for error-prone response variable and misclassified censoring
status, and <code>Boosting</code> is used to recover the functional covariates under accelerated functional failure time models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AFFECT()
</code></pre>


<h3>Details</h3>

<p>This package aims to estimate functional covariates under an AFT models with error-prone response and
and misclassified censoring status. The strategy is to derive an unbiased estimating function by the Buckley-James
estimator with measurement error in response and misclassification in censoring status being corrected.
Finally. the functional covariates as well as informative covariates under an AFT models can be derived by
the boosting procedure.
</p>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>

<hr>
<h2 id='Boosting'>Estimation of Functional Forms of Covaraites under AFT Models</h2><span id='topic+Boosting'></span>

<h3>Description</h3>

<p>The function aims to select informative covariates under the AFT model and estimate their corresponding
functional forms with survival time. Specifically, the first step in this function is to derive an unbiased
estimating function by the Buckley-James method with corrected survival times and censoring status. After that, a
boosting algorithm with the cubic-spline method is implemented to an unbiased estimating function to detect
informative covariates and estimate the functional forms of covariates iteratively.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Boosting(data, iter = 50)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Boosting_+3A_data">data</code></td>
<td>
<p>A <code>c(n,p+2)</code> dimension of data, where <code>n</code> is sample size and
<code>p</code> is the number of covariates. The first column is survival time and second
column is censoring status, and the other columns are covariates.</p>
</td></tr>
<tr><td><code id="Boosting_+3A_iter">iter</code></td>
<td>
<p>The iteration times of the boosting procedure. The default value = 50 and the iteration will stop
when the absolute value of increment of every estimated value is small than 0.01.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>covariates The first ten covariates that are selected in the iteration.
</p>
<p>functional_forms The functional forms of the first ten covariates that are selected
in the iteration.
</p>
<p>predicted_failure_time The predicted failure time of every sample
</p>
<p>survival_curve Predicted survival curve of the sample.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## generate data with misclassification = 0.9 with n = 50, p = 6
## and variance of noise term is 0.75. The y* is is related to the first
## covariate.

b &lt;- matrix(0,ncol=6, nrow = 1)
b[1,1] &lt;- 1
data &lt;- data_gen(n=50, p=6, pi_01=0.9, pi_10 = 0.9, gamma0=1,
gamma1=b, e_var=0.75)

## Assume that covariates are independent and observed failure time is
## related to first covariate with weight equals 1. And the scalar
## in the classical additive measurement error model is 1 and
## Misclassifcation probability = 0.9.

matrixb &lt;- diag(6)
gamma_0 &lt;-  1
gamma_1 &lt;- matrix(0,ncol=6, nrow =1)
gamma_1[1,1] &lt;- 1
data1 &lt;- ME_correction(pi_10=0.9,pi_01=0.9,gamma0 = gamma_0,
gamma1 = gamma_1,
cor_covar=matrixb, y=data[,1],
indicator=data[,2], covariate = data[,3:8])
data1 &lt;- cbind(data1,data[,3:8])

## Data in boosting procedure with iteration times =2

result &lt;- Boosting(data=data1, iter=2)


</code></pre>

<hr>
<h2 id='data_gen'>Generation of Artificial Data</h2><span id='topic+data_gen'></span>

<h3>Description</h3>

<p>The function generates a set of artificial data, including covariates generated by uniform
distribution with an interval <code>[0.5, 0.5]</code>, survival time and censoring status with measurement error and misclassifications.
In this function, users can specify different degrees of measurement
error that links observed survival time with true survival time, and links observed
censoring status with true censoring status. Moreover, the accelerated functional failure time model considered in
function is given by <code>T=f(X1)+f(X2)+f(X3)+f(X4)+error</code>, where <code>T</code> is log failure time and <code>f(X1)=4*x1^2+x1</code>,
<code>f(X2)=sin(6*x2)</code>,<code>f(X3)=cos(6*x3)-1</code> and <code>f(X4)=4*x4^3+x4^2</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_gen(n, p, pi_01, pi_10, gamma0, gamma1, e_var)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="data_gen_+3A_n">n</code></td>
<td>
<p>Sample size.</p>
</td></tr>
<tr><td><code id="data_gen_+3A_p">p</code></td>
<td>
<p>The number of covariates.</p>
</td></tr>
<tr><td><code id="data_gen_+3A_pi_01">pi_01</code></td>
<td>
<p>Misclassifcation probability is P(Observed Censoring Status = 0 | Actual Censoring Status = 1).</p>
</td></tr>
<tr><td><code id="data_gen_+3A_pi_10">pi_10</code></td>
<td>
<p>Misclassifcation probability is P(Observed Censoring Status = 1 | Actual
Censoring Status = 0).</p>
</td></tr>
<tr><td><code id="data_gen_+3A_gamma0">gamma0</code></td>
<td>
<p>A scalar that links the observed survival time and true survival time in
the classical additive measurement error model <code>y*=y+gamma0+gamma1*X+v</code>, where y* is observed survival time and <code>y</code> is true survival time, and <code>x</code> is covariates and v is noise term.</p>
</td></tr>
<tr><td><code id="data_gen_+3A_gamma1">gamma1</code></td>
<td>
<p>A <code>p</code>-dimensional vector of parameters in the
additive measurement error model <code>y*=y+gamma0+gamma1*X+v</code>, where <code>y*</code>
is observed survival time and <code>y</code> is true survival time, <code>x</code> is covariates and <code>v</code> is
noise term.</p>
</td></tr>
<tr><td><code id="data_gen_+3A_e_var">e_var</code></td>
<td>
<p>The variance of noise term <code>v</code> in the additive measurement
error model <code>y*=y+gamma0+gamma1*X+v</code>, where <code>v</code> is assumed to follow a normal
distribution.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>generated_data <code>c(n,p+2)</code> dimensional data frame. The first column is observed survival time and
second column is observed censoring status, and the other columns are covariates.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Set the relationship between observed survival time
## and true survival time equals y*= y+1+X1+v, where the variance is
## 0.75 with n=500 and p=50 and misclassification probability=0.9.

a &lt;- matrix(0,ncol=50, nrow = 1); a[1,1] &lt;- 1
data &lt;- data_gen(n=500, p=50, pi_01=0.9, pi_10 = 0.9, gamma0=1,
gamma1=a, e_var=0.75)
</code></pre>

<hr>
<h2 id='ME_correction'>Correction of Measurement Error in Survival time and Censoring Status.</h2><span id='topic+ME_correction'></span>

<h3>Description</h3>

<p>This function aims to correct for measurement error in survival time and
misclassification in censoring status. The key strategy in the function <code>ME_correction</code> includes regression
calibration for survival time under additive measurement error models and the unbiased conditional expectation
approach for censoring status under misclassification models. With information of parameters in measurement error
models implemented, this function will give outputs with corrected survival time and censoring status.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ME_correction(
  pi_10,
  pi_01,
  gamma0,
  gamma1,
  cor_covar,
  indicator,
  yast,
  covariate
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ME_correction_+3A_pi_10">pi_10</code></td>
<td>
<p>Misclassifcation probability is P(Observed Censoring Status = 1 | Actual Censoring Status = 0).</p>
</td></tr>
<tr><td><code id="ME_correction_+3A_pi_01">pi_01</code></td>
<td>
<p>Misclassifcation probability is P(Observed Censoring Status = 0| Actual Censoring Status = 1).</p>
</td></tr>
<tr><td><code id="ME_correction_+3A_gamma0">gamma0</code></td>
<td>
<p>A scalar that links the observed survival time and true survival time in the classical additive
measurement error model <code>y*=y+gamma0+gamma1*X+v</code>, where <code>y*</code>
is observed survival time and <code>y</code> is true survival time, and <code>x</code> is covariates and <code>v</code> is noise
term.</p>
</td></tr>
<tr><td><code id="ME_correction_+3A_gamma1">gamma1</code></td>
<td>
<p>A <code>p</code>-dimensional vector of parameters in the additive
measurement error model <code>y*=y+gamma0+gamma1*X+v</code>, where <code>y*</code> is observed
survival time and <code>y</code> is true survival time, <code>x</code> is covariates and <code>v</code> is
noise term.</p>
</td></tr>
<tr><td><code id="ME_correction_+3A_cor_covar">cor_covar</code></td>
<td>
<p>A <code>c(p,p)</code> covariance matrix of a <code>p</code>-dimensional vector of covariates.</p>
</td></tr>
<tr><td><code id="ME_correction_+3A_indicator">indicator</code></td>
<td>
<p>A <code>n</code>-dimensional vector of misclassified censoring status, such as the second column generated
by the function <code>gen_data</code>.</p>
</td></tr>
<tr><td><code id="ME_correction_+3A_yast">yast</code></td>
<td>
<p>A <code>n</code>-dimensional vector of error-prone survival time, such as the first column
generated by the function <code>gen_data</code>.</p>
</td></tr>
<tr><td><code id="ME_correction_+3A_covariate">covariate</code></td>
<td>
<p>A <code>c(n,p)</code> matrix of covariates.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>correction_data A <code>c(n,2)</code> data frame. This first column is the corrected survival time, and the
second column is the corrected censoring indicator.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## generate data with misclassification = 0.9 with n = 500,
## p = 50 and variance of noise term is 0.75. The y* is related
## to the first covariate.

a &lt;- matrix(0,ncol=50, nrow = 1);a[1,1] &lt;- 1
data &lt;- data_gen(n=500, p=50, pi_01 = 0.9, pi_10 = 0.9,
gamma0=1, gamma1=a, e_var=0.75)

## Assume that covariates are independent and
## observed survival time is related to first covariate with
## weight equals 1. And the scalar in the classical additive
## measurement error model is 1 and is classifcation probability = 0.9.

matrixa &lt;- diag(50)
gamma_0 &lt;-  1 ; gamma_1 &lt;- matrix(0,ncol=50, nrow =1); gamma_1[1,1] &lt;- 1
corrected_data1 &lt;- ME_correction(pi_10=0.9,pi_01=0.9,gamma0 = gamma_0,
gamma1 = gamma_1,
cor_covar=matrixa, y=data[,1],
indicator=data[,2], covariate = data[,3:52])

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
