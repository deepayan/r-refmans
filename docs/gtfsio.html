<!DOCTYPE html><html><head><title>Help for package gtfsio</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {gtfsio}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#gtfsio-package'><p>gtfsio: Read and Write General Transit Feed Specification (GTFS) Data</p></a></li>
<li><a href='#[.gtfs'><p>Subset a GTFS object</p></a></li>
<li><a href='#assert_gtfs'><p>GTFS object validator</p></a></li>
<li><a href='#assert_vector'><p>Assert that an input is a vector/list with desired properties</p></a></li>
<li><a href='#check_field_class'><p>Check the classes of fields in a GTFS object element</p></a></li>
<li><a href='#check_field_exists'><p>Check the existence of fields in a GTFS object element</p></a></li>
<li><a href='#check_file_exists'><p>Check the existence of text files in a GTFS object</p></a></li>
<li><a href='#export_gtfs'><p>Export GTFS objects</p></a></li>
<li><a href='#get_gtfs_standards'><p>Generate GTFS standards</p></a></li>
<li><a href='#gtfsio_error'><p>gtfsio's custom error condition constructor</p></a></li>
<li><a href='#import_gtfs'><p>Import GTFS transit feeds</p></a></li>
<li><a href='#new_gtfs'><p>GTFS object constructor</p></a></li>
<li><a href='#parent_function_error'><p>Parent error function constructor</p></a></li>
<li><a href='#print.gtfs'><p>Print a GTFS object</p></a></li>
<li><a href='#read_files'><p>Read a GTFS text file</p></a></li>
<li><a href='#summary.gtfs'><p>Print summary of a GTFS object</p></a></li>
<li><a href='#translate_types'><p>Translate GTFS specification types to R equivalent types</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Read and Write General Transit Feed Specification (GTFS) Files</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Tools for the development of packages related to General
    Transit Feed Specification (GTFS) files. Establishes a standard for
    representing GTFS feeds using R data types. Provides fast and flexible
    functions to read and write GTFS feeds while sticking to this
    standard. Defines a basic 'gtfs' class which is meant to be extended
    by packages that depend on it. And offers utility functions that
    support checking the structure of GTFS objects.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://r-transit.github.io/gtfsio/">https://r-transit.github.io/gtfsio/</a>,
<a href="https://github.com/r-transit/gtfsio">https://github.com/r-transit/gtfsio</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/r-transit/gtfsio/issues">https://github.com/r-transit/gtfsio/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table, utils, zip</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, tinytest</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Collate:</td>
<td>'gtfsio_error.R' 'assert_gtfs.R' 'assert_inputs.R' 'checks.R'
'export_gtfs.R' 'get_gtfs_standards.R' 'gtfs_methods.R'
'gtfs_subset.R' 'gtfsio.R' 'import_gtfs.R' 'new_gtfs.R'</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-10-20 02:47:55 UTC; dhersz</td>
</tr>
<tr>
<td>Author:</td>
<td>Daniel Herszenhut <a href="https://orcid.org/0000-0001-8066-1105"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Flavio Poletti [aut],
  Mark Padgham [aut],
  Rafael H. M. Pereira
    <a href="https://orcid.org/0000-0003-2125-7465"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [rev],
  Tom Buckley [rev],
  Ipea - Institute for Applied Economic Research [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Daniel Herszenhut &lt;dhersz@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-10-20 04:50:23 UTC</td>
</tr>
</table>
<hr>
<h2 id='gtfsio-package'>gtfsio: Read and Write General Transit Feed Specification (GTFS) Data</h2><span id='topic+gtfsio'></span><span id='topic+gtfsio-package'></span>

<h3>Description</h3>

<p>Tools for the development of GTFS-related packages. Establishes a standard
for representing GTFS feeds using R data types. Provides fast and flexible
functions to read and write GTFS feeds while sticking to this standard.
Defines a basic <code>gtfs</code> class which is meant to be extended by packages
that depend on it. And offers utility functions that support checking the
structure of GTFS objects.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Daniel Herszenhut <a href="mailto:dhersz@gmail.com">dhersz@gmail.com</a> (<a href="https://orcid.org/0000-0001-8066-1105">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Flavio Poletti <a href="mailto:flavio.poletti@hotmail.ch">flavio.poletti@hotmail.ch</a>
</p>
</li>
<li><p> Mark Padgham <a href="mailto:mark.padgham@email.com">mark.padgham@email.com</a>
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Rafael H. M. Pereira <a href="mailto:rafa.pereira.br@gmail.com">rafa.pereira.br@gmail.com</a> (<a href="https://orcid.org/0000-0003-2125-7465">ORCID</a>) [reviewer]
</p>
</li>
<li><p> Tom Buckley <a href="mailto:tom@tbuckl.com">tom@tbuckl.com</a> [reviewer]
</p>
</li>
<li><p> Ipea - Institute for Applied Economic Research [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://r-transit.github.io/gtfsio/">https://r-transit.github.io/gtfsio/</a>
</p>
</li>
<li> <p><a href="https://github.com/r-transit/gtfsio">https://github.com/r-transit/gtfsio</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/r-transit/gtfsio/issues">https://github.com/r-transit/gtfsio/issues</a>
</p>
</li></ul>


<hr>
<h2 id='+5B.gtfs'>Subset a GTFS object</h2><span id='topic++5B.gtfs'></span>

<h3>Description</h3>

<p>Subsetting a GTFS object using <code>[</code> preserves the object class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'gtfs'
x[value]
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B5B.gtfs_+3A_x">x</code></td>
<td>
<p>A GTFS object.</p>
</td></tr>
<tr><td><code id="+2B5B.gtfs_+3A_value">value</code></td>
<td>
<p>Either a numeric or a character vector. Designates the elements
to be returned.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A GTFS object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gtfs_path &lt;- system.file("extdata/ggl_gtfs.zip", package = "gtfsio")

gtfs &lt;- import_gtfs(gtfs_path)
names(gtfs)
class(gtfs)

small_gtfs &lt;- gtfs[1:5]
names(small_gtfs)
class(small_gtfs)

small_gtfs &lt;- gtfs[c("shapes", "trips")]
names(small_gtfs)
class(small_gtfs)

</code></pre>

<hr>
<h2 id='assert_gtfs'>GTFS object validator</h2><span id='topic+assert_gtfs'></span>

<h3>Description</h3>

<p>Asserts that a GTFS object is valid. Valid objects are those in which:
</p>

<ul>
<li><p> Every element is named.
</p>
</li>
<li><p> Every element inherits from <code>data.frame</code>s.
</p>
</li></ul>

<p>The exception to the second rule are objects that contain an element named
<code>"."</code>. In such case, this element is actually composed by a named list of
elements who inherit from <code>data.frame</code>s.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assert_gtfs(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="assert_gtfs_+3A_x">x</code></td>
<td>
<p>A GTFS object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same GTFS object passed to <code>x</code>.
</p>


<h3>See Also</h3>

<p>Other constructors: 
<code><a href="#topic+new_gtfs">new_gtfs</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gtfs_path &lt;- system.file("extdata/ggl_gtfs.zip", package = "gtfsio")

gtfs &lt;- import_gtfs(gtfs_path)
gtfs &lt;- assert_gtfs(gtfs)

</code></pre>

<hr>
<h2 id='assert_vector'>Assert that an input is a vector/list with desired properties</h2><span id='topic+assert_vector'></span><span id='topic+assert_list'></span><span id='topic+assert_class'></span>

<h3>Description</h3>

<p>Assert that an input is a vector/list with desired properties
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assert_vector(
  x,
  class,
  len = NULL,
  null_ok = FALSE,
  var_name = NULL,
  subset_of = NULL,
  named = FALSE,
  n_call = -1L
)

assert_list(x, len = NULL, null_ok = FALSE, named = FALSE)

assert_class(x, class, n_call = -1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="assert_vector_+3A_x">x</code></td>
<td>
<p>A vector/list. The input to be analysed.</p>
</td></tr>
<tr><td><code id="assert_vector_+3A_class">class</code></td>
<td>
<p>A string. The class that this input should inherit from.</p>
</td></tr>
<tr><td><code id="assert_vector_+3A_len">len</code></td>
<td>
<p>An integer. The length of the vector. If <code>NULL</code>, length is not
checked.</p>
</td></tr>
<tr><td><code id="assert_vector_+3A_null_ok">null_ok</code></td>
<td>
<p>A logical. Whether the input could also be <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="assert_vector_+3A_var_name">var_name</code></td>
<td>
<p>A string. The name of the variable in the informative
message. If <code>NULL</code>, the name is guessed from the function call.</p>
</td></tr>
<tr><td><code id="assert_vector_+3A_subset_of">subset_of</code></td>
<td>
<p>A character vector. If <code>x</code> is a character vector, specifies
which values it can take. If <code>NULL</code>, values are not checked.</p>
</td></tr>
<tr><td><code id="assert_vector_+3A_named">named</code></td>
<td>
<p>A logical. Whether the input should be a named vector/list. If
<code>FALSE</code> this check is not enforced (i.e. the input object can be named even
if named is <code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="assert_vector_+3A_n_call">n_call</code></td>
<td>
<p>A negative integer. The number of frames to go back to find the
call to associate the error generated by the function with. Defaults to the
parent frame (-1). This argument is only relevant to other assertion
functions that build on top of this one.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>TRUE</code> if the check is successful. Throws an error describing the
issue with the input otherwise.
</p>

<hr>
<h2 id='check_field_class'>Check the classes of fields in a GTFS object element</h2><span id='topic+check_field_class'></span><span id='topic+assert_field_class'></span>

<h3>Description</h3>

<p>Checks the classes of fields, represented by columns, inside a GTFS object
element.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_field_class(x, file, fields, classes)

assert_field_class(x, file, fields, classes)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_field_class_+3A_x">x</code></td>
<td>
<p>A GTFS object.</p>
</td></tr>
<tr><td><code id="check_field_class_+3A_file">file</code></td>
<td>
<p>A string. The element, that represents a GTFS text file, whose
fields' classes should be checked.</p>
</td></tr>
<tr><td><code id="check_field_class_+3A_fields">fields</code></td>
<td>
<p>A character vector. The fields to have their classes checked.</p>
</td></tr>
<tr><td><code id="check_field_class_+3A_classes">classes</code></td>
<td>
<p>A character vector, with the same length of <code>fields</code>. The
classes that each field must inherit from.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>check_field_class</code> returns <code>TRUE</code> if the check is successful, and
<code>FALSE</code> otherwise. <br />
<code>assert_field_class</code> returns <code>x</code> invisibly if the check is
successful, and throws an error otherwise.
</p>


<h3>See Also</h3>

<p>Other checking functions: 
<code><a href="#topic+check_field_exists">check_field_exists</a>()</code>,
<code><a href="#topic+check_file_exists">check_file_exists</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gtfs_path &lt;- system.file("extdata/ggl_gtfs.zip", package = "gtfsio")
gtfs &lt;- import_gtfs(gtfs_path)

check_field_class(
  gtfs,
  "calendar",
  fields = c("monday", "tuesday"),
  classes = rep("integer", 2)
)

check_field_class(
  gtfs,
  "calendar",
  fields = c("monday", "tuesday"),
  classes = c("integer", "character")
)

</code></pre>

<hr>
<h2 id='check_field_exists'>Check the existence of fields in a GTFS object element</h2><span id='topic+check_field_exists'></span><span id='topic+assert_field_exists'></span>

<h3>Description</h3>

<p>Checks the existence of fields, represented by columns, inside a GTFS object
element.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_field_exists(x, file, fields)

assert_field_exists(x, file, fields)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_field_exists_+3A_x">x</code></td>
<td>
<p>A GTFS object.</p>
</td></tr>
<tr><td><code id="check_field_exists_+3A_file">file</code></td>
<td>
<p>A string. The element, that represents a GTFS text file, where
fields should be searched.</p>
</td></tr>
<tr><td><code id="check_field_exists_+3A_fields">fields</code></td>
<td>
<p>A character vector. The fields to check the existence of.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>check_field_exists</code> returns <code>TRUE</code> if the check is successful, and
<code>FALSE</code> otherwise. <br />
<code>assert_field_exists</code> returns <code>x</code> invisibly if the check is
successful, and throws an error otherwise.
</p>


<h3>See Also</h3>

<p>Other checking functions: 
<code><a href="#topic+check_field_class">check_field_class</a>()</code>,
<code><a href="#topic+check_file_exists">check_file_exists</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gtfs_path &lt;- system.file("extdata/ggl_gtfs.zip", package = "gtfsio")
gtfs &lt;- import_gtfs(gtfs_path)

check_field_exists(gtfs, "calendar", c("monday", "tuesday"))

check_field_exists(gtfs, "calendar", c("monday", "oi"))

</code></pre>

<hr>
<h2 id='check_file_exists'>Check the existence of text files in a GTFS object</h2><span id='topic+check_file_exists'></span><span id='topic+assert_file_exists'></span>

<h3>Description</h3>

<p>Checks the existence of elements inside a GTFS object that represent specific
GTFS text files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_file_exists(x, files)

assert_file_exists(x, files)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_file_exists_+3A_x">x</code></td>
<td>
<p>A GTFS object.</p>
</td></tr>
<tr><td><code id="check_file_exists_+3A_files">files</code></td>
<td>
<p>A character vector. The files to check the existence of.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>check_file_exists</code> returns <code>TRUE</code> if the check is successful, and
<code>FALSE</code> otherwise. <br />
<code>assert_file_exists</code> returns <code>x</code> invisibly if the check is
successful, and throws an error otherwise.
</p>


<h3>See Also</h3>

<p>Other checking functions: 
<code><a href="#topic+check_field_class">check_field_class</a>()</code>,
<code><a href="#topic+check_field_exists">check_field_exists</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gtfs_path &lt;- system.file("extdata/ggl_gtfs.zip", package = "gtfsio")
gtfs &lt;- import_gtfs(gtfs_path)

check_file_exists(gtfs, c("calendar", "agency"))

check_file_exists(gtfs, c("calendar", "oi"))

</code></pre>

<hr>
<h2 id='export_gtfs'>Export GTFS objects</h2><span id='topic+export_gtfs'></span>

<h3>Description</h3>

<p>Writes GTFS objects to disk as GTFS transit feeds. The object must be
formatted according to the standards for reading and writing GTFS transit
feeds, as specified in <code><a href="#topic+get_gtfs_standards">get_gtfs_standards</a></code> (i.e. data types are
not checked). If present, does not write auxiliary tables held in a sub-list
named <code>"."</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>export_gtfs(
  gtfs,
  path,
  files = NULL,
  standard_only = FALSE,
  compression_level = 9,
  as_dir = FALSE,
  overwrite = TRUE,
  quiet = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="export_gtfs_+3A_gtfs">gtfs</code></td>
<td>
<p>A GTFS object.</p>
</td></tr>
<tr><td><code id="export_gtfs_+3A_path">path</code></td>
<td>
<p>A string. Where the resulting <code>.zip</code> file must be written
to.</p>
</td></tr>
<tr><td><code id="export_gtfs_+3A_files">files</code></td>
<td>
<p>A character vector. The name of the elements to be written to
the feed.</p>
</td></tr>
<tr><td><code id="export_gtfs_+3A_standard_only">standard_only</code></td>
<td>
<p>A logical. Whether only standard files and fields should
be written (defaults to <code>TRUE</code>, which drops extra files and fields).</p>
</td></tr>
<tr><td><code id="export_gtfs_+3A_compression_level">compression_level</code></td>
<td>
<p>A numeric, between 1 and 9. The higher the value,
the best the compression, which demands more processing time. Defaults to 9
(best compression).</p>
</td></tr>
<tr><td><code id="export_gtfs_+3A_as_dir">as_dir</code></td>
<td>
<p>A logical. Whether the feed should be exported as a directory,
instead of a <code>.zip</code> file. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="export_gtfs_+3A_overwrite">overwrite</code></td>
<td>
<p>A logical. Whether to overwrite an existing <code>.zip</code> file
(defaults to <code>TRUE</code>).</p>
</td></tr>
<tr><td><code id="export_gtfs_+3A_quiet">quiet</code></td>
<td>
<p>A logical. Whether to hide log messages and progress bars
(defaults to <code>TRUE</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns the same GTFS object passed to <code>gtfs</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_gtfs_standards">get_gtfs_standards</a></code>
</p>
<p>Other io functions: 
<code><a href="#topic+import_gtfs">import_gtfs</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gtfs_path &lt;- system.file("extdata/ggl_gtfs.zip", package = "gtfsio")

gtfs &lt;- import_gtfs(gtfs_path)

tmpf &lt;- tempfile(pattern = "gtfs", fileext = ".zip")

export_gtfs(gtfs, tmpf)
zip::zip_list(tmpf)$filename

export_gtfs(gtfs, tmpf, files = c("shapes", "trips"))
zip::zip_list(tmpf)$filename

</code></pre>

<hr>
<h2 id='get_gtfs_standards'>Generate GTFS standards</h2><span id='topic+get_gtfs_standards'></span>

<h3>Description</h3>

<p>Generates a list specifying the standards to be used when reading and writing
GTFS feeds with R. Each list element (also a list) represents a distinct GTFS
table, and describes:
</p>

<ul>
<li><p> whether the table is required, optional or conditionally required;
</p>
</li>
<li><p> the fields that compose the table, including which R data type is best
suited to represent it, whether the field is required, optional or
conditionally required, and which values it can assume (most relevant to GTFS
<code>ENUM</code>s.
</p>
</li></ul>

<p>Note: the standards list is based on the specification as revised in May 9th,
2022.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_gtfs_standards()
</code></pre>


<h3>Value</h3>

<p>A named list, in which each element represents the R equivalent of
each GTFS table standard.
</p>


<h3>Details</h3>

<p>GTFS standards were derived from <a href="https://gtfs.org/schedule/reference/">GTFS Schedule Reference</a>. The R data types chosen to
represent each GTFS data type are described below:
</p>

<ul>
<li><p> Color = <code>character</code>
</p>
</li>
<li><p> Currency amount = <code>numeric</code>
</p>
</li>
<li><p> Currency code = <code>character</code>
</p>
</li>
<li><p> Date = <code>integer</code>
</p>
</li>
<li><p> Email = <code>character</code>
</p>
</li>
<li><p> ENUM = <code>integer</code>
</p>
</li>
<li><p> ID = <code>character</code>
</p>
</li>
<li><p> Integer = <code>integer</code>
</p>
</li>
<li><p> Language code = <code>character</code>
</p>
</li>
<li><p> Latitude = <code>numeric</code>
</p>
</li>
<li><p> Longitude = <code>numeric</code>
</p>
</li>
<li><p> Float = <code>numeric</code>
</p>
</li>
<li><p> Phone number = <code>character</code>
</p>
</li>
<li><p> Text = <code>character</code>
</p>
</li>
<li><p> Time = <code>character</code>
</p>
</li>
<li><p> Timezone = <code>character</code>
</p>
</li>
<li><p> URL = <code>character</code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>gtfs_standards &lt;- get_gtfs_standards()

</code></pre>

<hr>
<h2 id='gtfsio_error'>gtfsio's custom error condition constructor</h2><span id='topic+gtfsio_error'></span>

<h3>Description</h3>

<p>gtfsio's custom error condition constructor
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gtfsio_error(message, subclass = character(0), call = sys.call(-1))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gtfsio_error_+3A_message">message</code></td>
<td>
<p>The message to inform about the error.</p>
</td></tr>
<tr><td><code id="gtfsio_error_+3A_subclass">subclass</code></td>
<td>
<p>The subclass of the error.</p>
</td></tr>
<tr><td><code id="gtfsio_error_+3A_call">call</code></td>
<td>
<p>A call to associate the error with.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other error constructors: 
<code><a href="#topic+parent_function_error">parent_function_error</a>()</code>
</p>

<hr>
<h2 id='import_gtfs'>Import GTFS transit feeds</h2><span id='topic+import_gtfs'></span>

<h3>Description</h3>

<p>Imports GTFS transit feeds from either a local <code>.zip</code> file or an URL.
Columns are parsed according to the standards for reading and writing GTFS
feeds specified in <code><a href="#topic+get_gtfs_standards">get_gtfs_standards</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_gtfs(
  path,
  files = NULL,
  fields = NULL,
  extra_spec = NULL,
  skip = NULL,
  quiet = TRUE,
  encoding = "unknown"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="import_gtfs_+3A_path">path</code></td>
<td>
<p>A string. The path to a GTFS <code>.zip</code> file.</p>
</td></tr>
<tr><td><code id="import_gtfs_+3A_files">files</code></td>
<td>
<p>A character vector. The text files to be read from the GTFS,
without the <code>.txt</code> extension. If <code>NULL</code> (the default), all
existing text files are read.</p>
</td></tr>
<tr><td><code id="import_gtfs_+3A_fields">fields</code></td>
<td>
<p>A named list. The fields to be read from each text file, in the
format <code>list(file1 = c("field1", "field2"))</code>. If <code>NULL</code> (the
default), all fields from the files specified in <code>files</code> are read. If
a file is specified in <code>files</code> but not in <code>fields</code>, all fields
from that file will be read (i.e. you may specify in <code>fields</code> only
files whose fields you want to subset).</p>
</td></tr>
<tr><td><code id="import_gtfs_+3A_extra_spec">extra_spec</code></td>
<td>
<p>A named list. Custom specification used when reading
undocumented fields, in the format
<code>list(file1 = c(field1 = "type1", field2 = "type2"))</code>. If <code>NULL</code>
(the default), all undocumented fields are read as character. Similarly,
if an undocumented field is not specified in <code>extra_spec</code>, it is read
as character (i.e. you may specify in <code>extra_spec</code> only the fields
that you want to read as a different type). Only supports the
<code>character</code>, <code>integer</code> and <code>numeric</code> types, also used in
<code><a href="#topic+get_gtfs_standards">get_gtfs_standards</a></code>.</p>
</td></tr>
<tr><td><code id="import_gtfs_+3A_skip">skip</code></td>
<td>
<p>A character vector. Text files that should not be read from the
GTFS, without the <code>.txt</code> extension. If <code>NULL</code> (the default), no
files are skipped. Cannot be used if <code>files</code> is set.</p>
</td></tr>
<tr><td><code id="import_gtfs_+3A_quiet">quiet</code></td>
<td>
<p>A logical. Whether to hide log messages and progress bars
(defaults to <code>TRUE</code>).</p>
</td></tr>
<tr><td><code id="import_gtfs_+3A_encoding">encoding</code></td>
<td>
<p>A string. Passed to <code><a href="data.table.html#topic+fread">fread</a></code>, defaults
to <code>"unknown"</code>. Other possible options are <code>"UTF-8"</code> and
<code>"Latin-1"</code>. Please note that this is not used to re-encode the input,
but to enable handling encoded strings in their native encoding.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A GTFS object: a named list of data frames, each one corresponding to
a distinct text file from the given GTFS feed.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_gtfs_standards">get_gtfs_standards</a></code>
</p>
<p>Other io functions: 
<code><a href="#topic+export_gtfs">export_gtfs</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gtfs_path &lt;- system.file("extdata/ggl_gtfs.zip", package = "gtfsio")

# read all files and columns
gtfs &lt;- import_gtfs(gtfs_path)
names(gtfs)
names(gtfs$trips)

# read all columns from selected files
gtfs &lt;- import_gtfs(gtfs_path, files = c("trips", "stops"))
names(gtfs)
names(gtfs$trips)

# read specific columns from selected files
gtfs &lt;- import_gtfs(
  gtfs_path,
  files = c("trips", "stops"),
  fields = list(
    trips = c("route_id", "trip_id"),
    stops = c("stop_id", "stop_lat", "stop_lon")
  )
)

</code></pre>

<hr>
<h2 id='new_gtfs'>GTFS object constructor</h2><span id='topic+new_gtfs'></span>

<h3>Description</h3>

<p>Creates a GTFS object. Mostly useful for package authors who may want to
either create <code>gtfs</code> objects in their packages or create subclasses of
the main <code>gtfs</code> class. The usage of this function assumes some knowledge
on <code>gtfs</code> objects, thus inputs are not extensively checked. See
<code><a href="#topic+assert_gtfs">assert_gtfs</a></code> for more thorough checks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_gtfs(x, subclass = character(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="new_gtfs_+3A_x">x</code></td>
<td>
<p>A GTFS-like object (either a GTFS object or a named list). Each
element must represent a distinct GTFS text file.</p>
</td></tr>
<tr><td><code id="new_gtfs_+3A_subclass">subclass</code></td>
<td>
<p>A character vector. Subclasses to be assigned to the
<code>gtfs</code> object.</p>
</td></tr>
<tr><td><code id="new_gtfs_+3A_...">...</code></td>
<td>
<p>Name-value pairs. Additional attributes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A GTFS object: a named list of data frames, each one corresponding to
a distinct GTFS text file, with <code>gtfs</code> and <code>list</code> classes.
</p>


<h3>See Also</h3>

<p>Other constructors: 
<code><a href="#topic+assert_gtfs">assert_gtfs</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gtfs_path &lt;- system.file("extdata/ggl_gtfs.zip", package = "gtfsio")

tmpdir &lt;- tempfile(pattern = "new_gtfs_example")
zip::unzip(gtfs_path, exdir = tmpdir)

agency &lt;- data.table::fread(file.path(tmpdir, "agency.txt"))
stops &lt;- data.table::fread(file.path(tmpdir, "stops.txt"))
routes &lt;- data.table::fread(file.path(tmpdir, "routes.txt"))
trips &lt;- data.table::fread(file.path(tmpdir, "trips.txt"))
stop_times &lt;- data.table::fread(file.path(tmpdir, "stop_times.txt"))
calendar &lt;- data.table::fread(file.path(tmpdir, "calendar.txt"))

txt_files &lt;- list(
  agency = agency,
  stops = stops,
  routes = routes,
  trips = trips,
  stop_times = stop_times,
  calendar = calendar
)

gtfs &lt;- new_gtfs(txt_files)

class(gtfs)
names(gtfs)

</code></pre>

<hr>
<h2 id='parent_function_error'>Parent error function constructor</h2><span id='topic+parent_function_error'></span>

<h3>Description</h3>

<p>Creates a function that raises an error that is assigned to the function in
which the error was originally seen. Useful to prevent big repetitive
<code>gtfsio_error()</code> calls in the &quot;main&quot; functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parent_function_error(message, subclass = character(0))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parent_function_error_+3A_message">message</code></td>
<td>
<p>The message to inform about the error.</p>
</td></tr>
<tr><td><code id="parent_function_error_+3A_subclass">subclass</code></td>
<td>
<p>The subclass of the error.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other error constructors: 
<code><a href="#topic+gtfsio_error">gtfsio_error</a>()</code>
</p>

<hr>
<h2 id='print.gtfs'>Print a GTFS object</h2><span id='topic+print.gtfs'></span>

<h3>Description</h3>

<p>Prints a GTFS object suppressing the <code>class</code> attribute.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'gtfs'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.gtfs_+3A_x">x</code></td>
<td>
<p>A GTFS object.</p>
</td></tr>
<tr><td><code id="print.gtfs_+3A_...">...</code></td>
<td>
<p>Optional arguments ultimately passed to <code>format</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The GTFS object that was printed, invisibly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gtfs_path &lt;- system.file("extdata/ggl_gtfs.zip", package = "gtfsio")
gtfs &lt;- import_gtfs(gtfs_path)

# subset 'gtfs' for a smaller output
gtfs &lt;- gtfs[c("routes", "trips")]

print(gtfs)

</code></pre>

<hr>
<h2 id='read_files'>Read a GTFS text file</h2><span id='topic+read_files'></span>

<h3>Description</h3>

<p>Reads a GTFS text file from the main <code>.zip</code> file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_files(file, gtfs_standards, fields, extra_spec, tmpdir, quiet, encoding)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_files_+3A_file">file</code></td>
<td>
<p>A string. The name of the file (without <code>.txt</code> extension) to
be read.</p>
</td></tr>
<tr><td><code id="read_files_+3A_gtfs_standards">gtfs_standards</code></td>
<td>
<p>A named list. Created by
<code><a href="#topic+get_gtfs_standards">get_gtfs_standards</a></code>.</p>
</td></tr>
<tr><td><code id="read_files_+3A_fields">fields</code></td>
<td>
<p>A named list. Passed by the user to <code><a href="#topic+import_gtfs">import_gtfs</a></code>.</p>
</td></tr>
<tr><td><code id="read_files_+3A_extra_spec">extra_spec</code></td>
<td>
<p>A named list. Passed by the user to
<code><a href="#topic+import_gtfs">import_gtfs</a></code>.</p>
</td></tr>
<tr><td><code id="read_files_+3A_tmpdir">tmpdir</code></td>
<td>
<p>A string. The path to the temporary folder where GTFS text
files were unzipped to.</p>
</td></tr>
<tr><td><code id="read_files_+3A_quiet">quiet</code></td>
<td>
<p>Whether to hide log messages and progress bars (defaults to
TRUE).</p>
</td></tr>
<tr><td><code id="read_files_+3A_encoding">encoding</code></td>
<td>
<p>A string. Passed to <code><a href="data.table.html#topic+fread">fread</a></code>, defaults
to <code>"unknown"</code>. Other possible options are <code>"UTF-8"</code> and
<code>"Latin-1"</code>. Please note that this is not used to re-encode the input,
but to enable handling encoded strings in their native encoding.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.table</code> representing the desired text file according to
the standards for reading and writing GTFS feeds with R.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_gtfs_standards">get_gtfs_standards</a></code>
</p>

<hr>
<h2 id='summary.gtfs'>Print summary of a GTFS object</h2><span id='topic+summary.gtfs'></span>

<h3>Description</h3>

<p>Print summary of a GTFS object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'gtfs'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.gtfs_+3A_object">object</code></td>
<td>
<p>A GTFS object.</p>
</td></tr>
<tr><td><code id="summary.gtfs_+3A_...">...</code></td>
<td>
<p>Ignored.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>gtfs_path &lt;- system.file("extdata/ggl_gtfs.zip", package = "gtfsio")
gtfs &lt;- import_gtfs(gtfs_path)

summary(gtfs)

</code></pre>

<hr>
<h2 id='translate_types'>Translate GTFS specification types to R equivalent types</h2><span id='topic+translate_types'></span>

<h3>Description</h3>

<p>Translate GTFS specification types to R equivalent types
</p>


<h3>Usage</h3>

<pre><code class='language-R'>translate_types(text_file, r_equivalents)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="translate_types_+3A_text_file">text_file</code></td>
<td>
<p>A named <code>list</code> containing a GTFS text file specification, as
described in the body of <a href="#topic+get_gtfs_standards">get_gtfs_standards</a>.</p>
</td></tr>
<tr><td><code id="translate_types_+3A_r_equivalents">r_equivalents</code></td>
<td>
<p>A named <code style="white-space: pre;">&#8288;character vector&#8288;</code>, in which each name is the
GTFS specification type and the content its R equivalent.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named <code>list</code> holding a GTFS text file specification, but with
R data types instead of GTFS spec data types.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
