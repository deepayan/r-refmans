<!DOCTYPE html><html><head><title>Help for package catmaply</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {catmaply}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_catmaply_single'><p>Add single Catmaply traces</p></a></li>
<li><a href='#add_catmaply_slider'><p>Add catmaply slider traces</p></a></li>
<li><a href='#add_catmaply_traces'><p>Add Catmaply traces</p></a></li>
<li><a href='#catmaply'><p>Heatmap for categorical data using plotly</p></a></li>
<li><a href='#catmaply_annotations'><p>Get catmaply annotation list</p></a></li>
<li><a href='#catmaply_layout'><p>Adds time layout to catmaply object</p></a></li>
<li><a href='#catmaply_time_layout'><p>Adds time layout to catmaply object</p></a></li>
<li><a href='#catmaply-package'><p>catmaply: Heatmap for Categorical Data using 'plotly'</p></a></li>
<li><a href='#discrete_coloring'><p>Generates the parameters necessary for discrete coloring and colorbar</p></a></li>
<li><a href='#discrete_coloring_categorical'><p>Generates the parameters necessary for discrete coloring and colorbar</p></a></li>
<li><a href='#discrete_coloring_range'><p>Generates the parameters necessary for discrete coloring and colorbar</p></a></li>
<li><a href='#vbz'><p>Sample files provided by VBZ</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Heatmap for Categorical Data using 'plotly'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9.4</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Yves Mauron &lt;ypmauron@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Methods and plotting functions for displaying categorical data on an 
             interactive heatmap using 'plotly'. Provides functionality for strictly 
             categorical heatmaps, heatmaps illustrating categorized continuous data 
             and annotated heatmaps. Also, there are various options to interact with the x-axis
             to prevent overlapping axis labels, e.g. via simple sliders or range sliders. 
             Besides the viewer pane, resulting plots can be saved as a standalone HTML file, 
             embedded in 'R Markdown' documents or in a 'Shiny' app.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>plotly, dplyr, magrittr, rlang, tidyr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, viridis, lubridate, tidyverse, knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/VerkehrsbetriebeZuerich/catmaply">https://github.com/VerkehrsbetriebeZuerich/catmaply</a>,
<a href="https://verkehrsbetriebezuerich.github.io/catmaply/">https://verkehrsbetriebezuerich.github.io/catmaply/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/VerkehrsbetriebeZuerich/catmaply/issues">https://github.com/VerkehrsbetriebeZuerich/catmaply/issues</a></td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-30 21:33:26 UTC; yves</td>
</tr>
<tr>
<td>Author:</td>
<td>Yves Mauron [aut, cre],
  Trivadis AG [cph]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-30 21:50:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_catmaply_single'>Add single Catmaply traces</h2><span id='topic+add_catmaply_single'></span>

<h3>Description</h3>

<p>Function to produce a single catmaply trace without interactive legend.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_catmaply_single(
  fig,
  df,
  hover_hide,
  color_palette,
  categorical_color_range,
  legend_items,
  legend,
  visible = 1,
  colorbar_y = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_catmaply_single_+3A_fig">fig</code></td>
<td>
<p>plotly object</p>
</td></tr>
<tr><td><code id="add_catmaply_single_+3A_df">df</code></td>
<td>
<p>data.frame or tibble holding the data.</p>
</td></tr>
<tr><td><code id="add_catmaply_single_+3A_color_palette">color_palette</code></td>
<td>
<p>a color palette vector.</p>
</td></tr>
<tr><td><code id="add_catmaply_single_+3A_legend_items">legend_items</code></td>
<td>
<p>distinct/unique items of ordered legend items</p>
</td></tr>
<tr><td><code id="add_catmaply_single_+3A_legend">legend</code></td>
<td>
<p>boolean indicating if legend should be displayed or not; (default: TRUE).</p>
</td></tr>
<tr><td><code id="add_catmaply_single_+3A_colorbar_y">colorbar_y</code></td>
<td>
<p>y position of colorbar; (default: NA).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>plot_ly object
</p>

<hr>
<h2 id='add_catmaply_slider'>Add catmaply slider traces</h2><span id='topic+add_catmaply_slider'></span>

<h3>Description</h3>

<p>Function to produce catmaply traces.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_catmaply_slider(
  fig,
  df,
  annotated,
  text_color = "#444",
  text_size = 12,
  text_font_family = c("Open Sans", "verdana", "arial", "sans-serif"),
  slider_steps,
  slider_currentvalue_prefix = "",
  slider_step_visible,
  slider_currentvalue_visible,
  slider_tick_visible,
  hover_hide,
  color_palette,
  categorical_color_range,
  category_items,
  legend_items,
  legend
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_catmaply_slider_+3A_fig">fig</code></td>
<td>
<p>plotly object</p>
</td></tr>
<tr><td><code id="add_catmaply_slider_+3A_df">df</code></td>
<td>
<p>data.frame or tibble holding the data.</p>
</td></tr>
<tr><td><code id="add_catmaply_slider_+3A_annotated">annotated</code></td>
<td>
<p>boolean indicating if annotations should be displayed.</p>
</td></tr>
<tr><td><code id="add_catmaply_slider_+3A_text_color">text_color</code></td>
<td>
<p>font color to be used for text; (default: &quot;#444&quot;).</p>
</td></tr>
<tr><td><code id="add_catmaply_slider_+3A_text_size">text_size</code></td>
<td>
<p>font size to be used for text/annotation. Needs to be a number greater than or equal to 1; (default: 12).
The web browser will only be able to apply a font if it is available on the system which it operates.
Provide multiple font families, separated by commas, to indicate the preference in which to apply fonts if they aren't available on the system;
(default: c(&quot;Open Sans&quot;, &quot;verdana&quot;, &quot;arial&quot;, &quot;sans-serif&quot;)).</p>
</td></tr>
<tr><td><code id="add_catmaply_slider_+3A_slider_steps">slider_steps</code></td>
<td>
<p>list holding the configuration of the steps to be created. There are two alternatives: <code>auto</code> and
<code>custom</code>; whereas the <code>auto</code> mode creates the steps automatically and <code>custom</code> takes custom instructions on how to create the steps.
For mode <code>auto</code>, a <code>list</code> with the following elements has to be submitted (values of the list element are just examples): <br />
list( <br />
slider_start=1, <br />
slider_range=15, <br />
slider_shift=5, <br />
) <br />
This will create the steps automatically for you, essentially starting at position <code>slider_start</code>,
shifting the window of size <code>slider_range</code> along the x axis with a stepsize of <code>slider_shift</code>. The stepnames
are automatically selected with the x value of the left side of the slider_range (so for 1 it would take the first value of the x axis as name of the step). <br />
With custom, on the other hand, you can define the step configuration without any restrictions. The custom
configuration needs to be defined in a <code>list</code> with the following elements. <br />
list( <br />
list(name=&quot;Step_One&quot;, range=c(1, 50)), <br />
list(name=&quot;Step_Two&quot;, range=c(5, 55)), <br />
... <br />
). <br />
(default: <br />
list( <br />
slider_start=1, <br />
slider_range=15, <br />
slider_shift=5, <br />
)).</p>
</td></tr>
<tr><td><code id="add_catmaply_slider_+3A_slider_currentvalue_prefix">slider_currentvalue_prefix</code></td>
<td>
<p>prefix to be used for the slider title. Only used if <code>slider=TRUE</code>. (default: &quot;&quot;).</p>
</td></tr>
<tr><td><code id="add_catmaply_slider_+3A_slider_step_visible">slider_step_visible</code></td>
<td>
<p>boolean indicating if the step names should be displayed for the slider. (default: TRUE).</p>
</td></tr>
<tr><td><code id="add_catmaply_slider_+3A_slider_currentvalue_visible">slider_currentvalue_visible</code></td>
<td>
<p>boolean indicating if the currently selected value should be displayed above the slider. (default: TRUE).</p>
</td></tr>
<tr><td><code id="add_catmaply_slider_+3A_slider_tick_visible">slider_tick_visible</code></td>
<td>
<p>boolean indicating if the tickvalues should be displayed below the slider. (default: TRUE).</p>
</td></tr>
<tr><td><code id="add_catmaply_slider_+3A_hover_hide">hover_hide</code></td>
<td>
<p>boolean indicating if the hover label should be hidden or not; (default: FALSE).</p>
</td></tr>
<tr><td><code id="add_catmaply_slider_+3A_color_palette">color_palette</code></td>
<td>
<p>a color palette vector.</p>
</td></tr>
<tr><td><code id="add_catmaply_slider_+3A_categorical_color_range">categorical_color_range</code></td>
<td>
<p>if the resulting heatmap holds categorical field values or continuous values that belong to a category; (default: FALSE).</p>
</td></tr>
<tr><td><code id="add_catmaply_slider_+3A_category_items">category_items</code></td>
<td>
<p>distinct/unique items of ordered category items</p>
</td></tr>
<tr><td><code id="add_catmaply_slider_+3A_legend_items">legend_items</code></td>
<td>
<p>distinct/unique items of ordered legend items</p>
</td></tr>
</table>


<h3>Value</h3>

<p>plot_ly object
</p>

<hr>
<h2 id='add_catmaply_traces'>Add Catmaply traces</h2><span id='topic+add_catmaply_traces'></span>

<h3>Description</h3>

<p>Function to produce catmaply traces.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_catmaply_traces(
  fig,
  df,
  hover_hide,
  color_palette,
  categorical_color_range,
  category_items,
  legend_items
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_catmaply_traces_+3A_fig">fig</code></td>
<td>
<p>plotly object</p>
</td></tr>
<tr><td><code id="add_catmaply_traces_+3A_df">df</code></td>
<td>
<p>data.frame or tibble holding the data.</p>
</td></tr>
<tr><td><code id="add_catmaply_traces_+3A_hover_hide">hover_hide</code></td>
<td>
<p>boolean indicating if the hover label should be hidden or not; (default: FALSE).</p>
</td></tr>
<tr><td><code id="add_catmaply_traces_+3A_color_palette">color_palette</code></td>
<td>
<p>a color palette vector.</p>
</td></tr>
<tr><td><code id="add_catmaply_traces_+3A_categorical_color_range">categorical_color_range</code></td>
<td>
<p>if the resulting heatmap holds categorical field values or continuous values that belong to a category; (default: FALSE).</p>
</td></tr>
<tr><td><code id="add_catmaply_traces_+3A_category_items">category_items</code></td>
<td>
<p>distinct/unique items of ordered category items</p>
</td></tr>
<tr><td><code id="add_catmaply_traces_+3A_legend_items">legend_items</code></td>
<td>
<p>distinct/unique items of ordered legend items</p>
</td></tr>
</table>


<h3>Value</h3>

<p>plot_ly object
</p>

<hr>
<h2 id='catmaply'>Heatmap for categorical data using plotly</h2><span id='topic+catmaply'></span>

<h3>Description</h3>

<p><code>catmaply</code> is used to easily plot categorical data on heatmaps using plotly.
It can be used to plot heatmaps on categorical variables or, otherwise, plot continuous variables with categorical color range.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catmaply(
  df,
  x,
  x_order,
  x_side = "top",
  x_tickangle = 90,
  x_range = 30,
  y,
  y_order,
  y_side = "left",
  y_tickangle = 0,
  z,
  text,
  text_color = "#444",
  text_size = 12,
  text_font_family = c("Open Sans", "verdana", "arial", "sans-serif"),
  hover_template,
  hover_hide = FALSE,
  color_palette = viridis::plasma,
  categorical_color_range = FALSE,
  categorical_col = NA,
  font_family = c("Open Sans", "verdana", "arial", "sans-serif"),
  font_size = 12,
  font_color = "#444",
  legend = TRUE,
  legend_col,
  legend_interactive = TRUE,
  tickformatstops = NULL,
  rangeslider = TRUE,
  slider = FALSE,
  slider_steps = list(slider_start = 1, slider_range = 15, slider_shift = 5,
    slider_step_name = "x"),
  slider_currentvalue_prefix = "",
  slider_step_visible = TRUE,
  slider_currentvalue_visible = TRUE,
  slider_tick_visible = TRUE,
  source = "catmaply"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="catmaply_+3A_df">df</code></td>
<td>
<p>data.frame or tibble holding the data.</p>
</td></tr>
<tr><td><code id="catmaply_+3A_x">x</code></td>
<td>
<p>column name holding the axis values for x.</p>
</td></tr>
<tr><td><code id="catmaply_+3A_x_order">x_order</code></td>
<td>
<p>column name holding the ordering axis values for x. if no order is specified, then x will be used for ordering x; (default:&quot;x&quot;).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_x_side">x_side</code></td>
<td>
<p>on which side the axis labels on the x axis should appear. options: c(&quot;top&quot;, &quot;bottom&quot;); (default:&quot;top&quot;).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_x_tickangle">x_tickangle</code></td>
<td>
<p>the angle of the axis label on the x axis. options: range -180 until 180; (default:90).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_x_range">x_range</code></td>
<td>
<p>the initial range that should be displayed on the x axis. Only works with non-time x-axis at the moment; (default: 30).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_y">y</code></td>
<td>
<p>column name holding the axis values for y.</p>
</td></tr>
<tr><td><code id="catmaply_+3A_y_order">y_order</code></td>
<td>
<p>column name holding the ordering axis values for y. if no order is specified, then y will be used for ordering y; (default:&quot;y&quot;).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_y_side">y_side</code></td>
<td>
<p>on which side the axis labels on the y axis should appear. options: c(&quot;left&quot;, &quot;right&quot;); (default:&quot;left&quot;).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_y_tickangle">y_tickangle</code></td>
<td>
<p>the angle of the axis label on the x axis. options: range -180 until 180; (default:0).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_z">z</code></td>
<td>
<p>column name holding the values for the fields.</p>
</td></tr>
<tr><td><code id="catmaply_+3A_text">text</code></td>
<td>
<p>optional column name holding the values that should be displayed in the fields. NA values will not be displayed.</p>
</td></tr>
<tr><td><code id="catmaply_+3A_text_color">text_color</code></td>
<td>
<p>font color to be used for text; (default: &quot;#444&quot;).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_text_size">text_size</code></td>
<td>
<p>font size to be used for text/annotation. Needs to be a number greater than or equal to 1; (default: 12).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_text_font_family">text_font_family</code></td>
<td>
<p>the typeface that will be applied by the web browser for the text/annotation.
The web browser will only be able to apply a font if it is available on the system which it operates.
Provide multiple font families, separated by commas, to indicate the preference in which to apply fonts if they aren't available on the system;
(default: c(&quot;Open Sans&quot;, &quot;verdana&quot;, &quot;arial&quot;, &quot;sans-serif&quot;)).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_hover_template">hover_template</code></td>
<td>
<p>template to be used to create the hover label; (default:missing).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_hover_hide">hover_hide</code></td>
<td>
<p>boolean indicating if the hover label should be hidden or not; (default: FALSE).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_color_palette">color_palette</code></td>
<td>
<p>a color palette vector a function that is able to create one; (default: viridis::plasma).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_categorical_color_range">categorical_color_range</code></td>
<td>
<p>if the resulting heatmap holds categorical field values or continuous values that belong to a category; (default: FALSE).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_categorical_col">categorical_col</code></td>
<td>
<p>if categorical_color_range is TRUE, then this column is used to create categories; (default: NA).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_font_family">font_family</code></td>
<td>
<p>the typeface that will be applied by the web browser.
The web browser will only be able to apply a font if it is available on the system which it operates.
Provide multiple font families, separated by commas, to indicate the preference in which to apply fonts if they aren't available on the system;
(default: c(&quot;Open Sans&quot;, &quot;verdana&quot;, &quot;arial&quot;, &quot;sans-serif&quot;)).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_font_size">font_size</code></td>
<td>
<p>font size to be used for plot. needs to be a number greater than or equal to 1; (default: 12).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_font_color">font_color</code></td>
<td>
<p>font color to be used for plot; (default: &quot;#444&quot;).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_legend">legend</code></td>
<td>
<p>boolean indicating if legend should be displayed or not; (default: TRUE).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_legend_col">legend_col</code></td>
<td>
<p>column to be used for legend naming; (default: z/categorical_col).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_legend_interactive">legend_interactive</code></td>
<td>
<p>whether the legend should be interactive or not; i.e. remove traces on click; (default: TRUE).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_tickformatstops">tickformatstops</code></td>
<td>
<p>used only if x axis is of type c(&quot;POSIXct&quot;, &quot;POSIXt&quot;). List of named list where each named list has one or
more of the keys listed here: https://plotly.com/r/reference/#heatmap-colorbar-tickformatstops. Default is optimized for summarized data of level day 24 hours; <br />
if default value (NULL) is set, tickformatstops is set as follows:
for column class &quot;POSIXct&quot; or &quot;POSIXt&quot; <br />
list( <br />
list(dtickrange = list(NULL, 1000), value = &quot;%H:%M:%S.%L ms&quot;), <br />
list(dtickrange = list(1000, 60000), value = &quot;%H:%M:%S s&quot;), <br />
list(dtickrange = list(60000, 3600000), value = &quot;%H:%M m&quot;), <br />
list(dtickrange = list(3600000, 86400000), value = &quot;%H:%M h&quot;), <br />
list(dtickrange = list(86400000, 604800000), value = &quot;%H:%M h&quot;), <br />
list(dtickrange = list(604800000, &quot;M1&quot;), value = &quot;%H:%M h&quot;), <br />
list(dtickrange = list(&quot;M1&quot;, &quot;M12&quot;), value = &quot;%H:%M h&quot;), <br />
list(dtickrange = list(&quot;M12&quot;, NULL), value = &quot;%H:%M h&quot;) <br />
) <br />
) <br />
for class equals Date:
list( <br />
list(dtickrange = list(NULL, 1000), value = &quot;%H:%M:%S.%L ms&quot;), <br />
list(dtickrange = list(1000, 60000), value = &quot;%H:%M:%S s&quot;), <br />
list(dtickrange = list(60000, 3600000), value = &quot;%H:%M m&quot;), <br />
list(dtickrange = list(3600000, 86400000), value = &quot;%H:%M h&quot;), <br />
list(dtickrange = list(86400000, 604800000), value = &quot;%e. %b d&quot;), <br />
list(dtickrange = list(604800000, &quot;M1&quot;), value = &quot;%e. %b w&quot;), <br />
list(dtickrange = list(&quot;M1&quot;, &quot;M12&quot;), value = &quot;%b '%y M&quot;), <br />
list(dtickrange = list(&quot;M12&quot;, NULL), value = &quot;%Y Y&quot;) <br />
) <br />
) <br />
(default: NULL)</p>
</td></tr>
<tr><td><code id="catmaply_+3A_rangeslider">rangeslider</code></td>
<td>
<p>boolean value indicating whether the rangeslider should be displayed or not; (default: TRUE).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_slider">slider</code></td>
<td>
<p>boolean value indicating whether to use slider or not; if specified, <code>rangeslider</code> will not be displayed; (default: FALSE).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_slider_steps">slider_steps</code></td>
<td>
<p>list holding the configuration of the steps to be created. There are two alternatives: <code>auto</code> and
<code>custom</code>; whereas the <code>auto</code> mode creates the steps automatically and <code>custom</code> takes custom instructions on how to create the steps.
For mode <code>auto</code>, a <code>list</code> with the following elements has to be submitted (values of the list element are just examples): <br />
list( <br />
slider_start=1, <br />
slider_range=15, <br />
slider_shift=5, <br />
slider_step_name=&quot;x&quot;
) <br />
This will create the steps automatically for you, essentially starting at position <code>slider_start</code>,
shifting the window of size <code>slider_range</code> along the x axis with a stepsize of <code>slider_shift</code>. The stepnames
are automatically selected with the x value of the left side of the slider_range (so for 1 it would take the first value of the x axis as name of the step). <br />
With custom, on the other hand, you can define the step configuration without any restrictions. The custom
configuration needs to be defined in a <code>list</code> with the following elements. <br />
list( <br />
list(name=&quot;Step_One&quot;, range=c(1, 50)), <br />
list(name=&quot;Step_Two&quot;, range=c(5, 55)), <br />
... <br />
). <br />
(default: <br />
list( <br />
slider_start=1, <br />
slider_range=15, <br />
slider_shift=5, <br />
)).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_slider_currentvalue_prefix">slider_currentvalue_prefix</code></td>
<td>
<p>prefix to be used for the slider title. Only used if <code>slider=TRUE</code>. (default: &quot;&quot;).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_slider_step_visible">slider_step_visible</code></td>
<td>
<p>boolean indicating if the step names should be displayed for the slider. (default: TRUE).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_slider_currentvalue_visible">slider_currentvalue_visible</code></td>
<td>
<p>boolean indicating if the currently selected value should be displayed above the slider. (default: TRUE).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_slider_tick_visible">slider_tick_visible</code></td>
<td>
<p>boolean indicating if the tickvalues should be displayed below the slider. (default: TRUE).</p>
</td></tr>
<tr><td><code id="catmaply_+3A_source">source</code></td>
<td>
<p>a character string of length 1. Match the value of this string with the source argument in event_data() to retrieve the event data corresponding to a specific plot (shiny apps can have multiple plots).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>plot_ly object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(catmaply)

data("vbz")
df &lt;- vbz[[3]]

# simple plot
catmaply(
  df,
  x=trip_seq,
  x_order = trip_seq,
  y = stop_name,
  y_order = stop_seq,
  z = occ_category
)


# categorical color range and template
catmaply(
  df,
  x = trip_seq,
  y = stop_name,
  y_order = stop_seq,
  z = occupancy,
  categorical_color_range=TRUE,
  categorical_col = occ_category,
  hover_template = paste(
    '&lt;b&gt;Trip&lt;/b&gt;:', trip_seq,
    '&lt;br&gt;&lt;b&gt;Stop&lt;/b&gt;:', stop_seq,
    '&lt;br&gt;&lt;b&gt;Occupancy&lt;/b&gt;:', occ_category,
    '&lt;extra&gt;&lt;/extra&gt;'
  )
)
# for more examples, see vignette

</code></pre>

<hr>
<h2 id='catmaply_annotations'>Get catmaply annotation list</h2><span id='topic+catmaply_annotations'></span>

<h3>Description</h3>

<p>Function to produce catmaply traces.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catmaply_annotations(
  df,
  annotated,
  text_color = "#444",
  text_size = 12,
  text_font_family = c("Open Sans", "verdana", "arial", "sans-serif")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="catmaply_annotations_+3A_df">df</code></td>
<td>
<p>data.frame or tibble holding the data.</p>
</td></tr>
<tr><td><code id="catmaply_annotations_+3A_annotated">annotated</code></td>
<td>
<p>boolean indicating if annotations should be displayed.</p>
</td></tr>
<tr><td><code id="catmaply_annotations_+3A_text_color">text_color</code></td>
<td>
<p>font color to be used for text; (default: &quot;#444&quot;).</p>
</td></tr>
<tr><td><code id="catmaply_annotations_+3A_text_size">text_size</code></td>
<td>
<p>font size to be used for text/annotation. Needs to be a number greater than or equal to 1; (default: 12).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list
</p>

<hr>
<h2 id='catmaply_layout'>Adds time layout to catmaply object</h2><span id='topic+catmaply_layout'></span>

<h3>Description</h3>

<p>This layout is used if the x axis is of type time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catmaply_layout(
  fig,
  df,
  x,
  x_order,
  x_side,
  x_tickangle,
  x_range,
  y,
  y_order,
  y_side,
  y_tickangle,
  font_family,
  font_size,
  font_color,
  legend,
  rangeslider
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="catmaply_layout_+3A_fig">fig</code></td>
<td>
<p>plotly object</p>
</td></tr>
<tr><td><code id="catmaply_layout_+3A_df">df</code></td>
<td>
<p>data.frame or tibble holding the data.</p>
</td></tr>
<tr><td><code id="catmaply_layout_+3A_x">x</code></td>
<td>
<p>column name holding the axis values for x.</p>
</td></tr>
<tr><td><code id="catmaply_layout_+3A_x_order">x_order</code></td>
<td>
<p>column name holding the ordering axis values for x. if no order is specified, then x will be used for ordering x; (default:&quot;x&quot;).</p>
</td></tr>
<tr><td><code id="catmaply_layout_+3A_x_side">x_side</code></td>
<td>
<p>on which side the axis labels on the x axis should appear. options: c(&quot;top&quot;, &quot;bottom&quot;); (default:&quot;top&quot;).</p>
</td></tr>
<tr><td><code id="catmaply_layout_+3A_x_tickangle">x_tickangle</code></td>
<td>
<p>the angle of the axis label on the x axis. options: range -180 until 180; (default:90).</p>
</td></tr>
<tr><td><code id="catmaply_layout_+3A_x_range">x_range</code></td>
<td>
<p>the initial range that should be displayed on the x axis. Only works with non-time x-axis at the moment; (default: 30).</p>
</td></tr>
<tr><td><code id="catmaply_layout_+3A_y">y</code></td>
<td>
<p>column name holding the axis values for y.</p>
</td></tr>
<tr><td><code id="catmaply_layout_+3A_y_order">y_order</code></td>
<td>
<p>column name holding the ordering axis values for y. if no order is specified, then y will be used for ordering y; (default:&quot;y&quot;).</p>
</td></tr>
<tr><td><code id="catmaply_layout_+3A_y_side">y_side</code></td>
<td>
<p>on which side the axis labels on the y axis should appear. options: c(&quot;left&quot;, &quot;right&quot;); (default:&quot;left&quot;).</p>
</td></tr>
<tr><td><code id="catmaply_layout_+3A_y_tickangle">y_tickangle</code></td>
<td>
<p>the angle of the axis label on the x axis. options: range -180 until 180; (default:0).</p>
</td></tr>
<tr><td><code id="catmaply_layout_+3A_font_family">font_family</code></td>
<td>
<p>the typeface that will be applied by the web browser.
The web browser will only be able to apply a font if it is available on the system which it operates.
Provide multiple font families, separated by commas, to indicate the preference in which to apply fonts if they aren't available on the system;
(default: c(&quot;Open Sans&quot;, &quot;verdana&quot;, &quot;arial&quot;, &quot;sans-serif&quot;)).</p>
</td></tr>
<tr><td><code id="catmaply_layout_+3A_font_size">font_size</code></td>
<td>
<p>font size to be used for plot. needs to be a number greater than or equal to 1; (default: 12).</p>
</td></tr>
<tr><td><code id="catmaply_layout_+3A_font_color">font_color</code></td>
<td>
<p>font color to be used for plot; (default: &quot;#444&quot;)</p>
</td></tr>
<tr><td><code id="catmaply_layout_+3A_legend">legend</code></td>
<td>
<p>boolean indicating if legend should be displayed or not; (default: TRUE).</p>
</td></tr>
<tr><td><code id="catmaply_layout_+3A_rangeslider">rangeslider</code></td>
<td>
<p>whether or not the rangeslider should be displayed or not; (default: TRUE).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>plot_ly object
</p>

<hr>
<h2 id='catmaply_time_layout'>Adds time layout to catmaply object</h2><span id='topic+catmaply_time_layout'></span>

<h3>Description</h3>

<p>This layout is used if the x axis is of type time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catmaply_time_layout(
  fig,
  df,
  x,
  x_order,
  x_side,
  x_tickangle,
  x_range,
  y,
  y_order,
  y_side,
  y_tickangle,
  tickformatstops,
  font_family,
  font_size,
  font_color,
  legend,
  rangeslider
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="catmaply_time_layout_+3A_fig">fig</code></td>
<td>
<p>plotly object</p>
</td></tr>
<tr><td><code id="catmaply_time_layout_+3A_df">df</code></td>
<td>
<p>data.frame or tibble holding the data.</p>
</td></tr>
<tr><td><code id="catmaply_time_layout_+3A_x">x</code></td>
<td>
<p>column name holding the axis values for x.</p>
</td></tr>
<tr><td><code id="catmaply_time_layout_+3A_x_order">x_order</code></td>
<td>
<p>column name holding the ordering axis values for x. if no order is specified, then x will be used for ordering x; (default:&quot;x&quot;).</p>
</td></tr>
<tr><td><code id="catmaply_time_layout_+3A_x_side">x_side</code></td>
<td>
<p>on which side the axis labels on the x axis should appear. options: c(&quot;top&quot;, &quot;bottom&quot;); (default:&quot;top&quot;).</p>
</td></tr>
<tr><td><code id="catmaply_time_layout_+3A_x_tickangle">x_tickangle</code></td>
<td>
<p>the angle of the axis label on the x axis. options: range -180 until 180; (default:90).</p>
</td></tr>
<tr><td><code id="catmaply_time_layout_+3A_x_range">x_range</code></td>
<td>
<p>the initial range that should be displayed on the x axis. Only works with non-time x-axis at the moment; (default: 30).</p>
</td></tr>
<tr><td><code id="catmaply_time_layout_+3A_y">y</code></td>
<td>
<p>column name holding the axis values for y.</p>
</td></tr>
<tr><td><code id="catmaply_time_layout_+3A_y_order">y_order</code></td>
<td>
<p>column name holding the ordering axis values for y. if no order is specified, then y will be used for ordering y; (default:&quot;y&quot;).</p>
</td></tr>
<tr><td><code id="catmaply_time_layout_+3A_y_side">y_side</code></td>
<td>
<p>on which side the axis labels on the y axis should appear. options: c(&quot;left&quot;, &quot;right&quot;); (default:&quot;left&quot;).</p>
</td></tr>
<tr><td><code id="catmaply_time_layout_+3A_y_tickangle">y_tickangle</code></td>
<td>
<p>the angle of the axis label on the x axis. options: range -180 until 180; (default:0).</p>
</td></tr>
<tr><td><code id="catmaply_time_layout_+3A_tickformatstops">tickformatstops</code></td>
<td>
<p>used only if x axis is of type c(&quot;POSIXct&quot;, &quot;POSIXt&quot;). List of named list where each named list has one or more of the keys listed here: https://plotly.com/r/reference/#heatmap-colorbar-tickformatstops. Default is optimized for summarized data of level day 24 hours;
(default:
list(
list(dtickrange = list(NULL, 1000), value = &quot;
list(dtickrange = list(1000, 60000), value = &quot;
list(dtickrange = list(60000, 3600000), value = &quot;
list(dtickrange = list(3600000, 86400000), value = &quot;
list(dtickrange = list(86400000, 604800000), value = &quot;
list(dtickrange = list(604800000, &quot;M1&quot;), value = &quot;
list(dtickrange = list(&quot;M1&quot;, &quot;M12&quot;), value = &quot;
list(dtickrange = list(&quot;M12&quot;, NULL), value = &quot;
)
)</p>
</td></tr>
<tr><td><code id="catmaply_time_layout_+3A_font_family">font_family</code></td>
<td>
<p>the typeface that will be applied by the web browser.
The web browser will only be able to apply a font if it is available on the system which it operates.
Provide multiple font families, separated by commas, to indicate the preference in which to apply fonts if they aren't available on the system;
(default: c(&quot;Open Sans&quot;, &quot;verdana&quot;, &quot;arial&quot;, &quot;sans-serif&quot;)).</p>
</td></tr>
<tr><td><code id="catmaply_time_layout_+3A_font_size">font_size</code></td>
<td>
<p>font size to be used for plot. needs to be a number greater than or equal to 1; (default: 12).</p>
</td></tr>
<tr><td><code id="catmaply_time_layout_+3A_font_color">font_color</code></td>
<td>
<p>font color to be used for plot; (default: &quot;#444&quot;)</p>
</td></tr>
<tr><td><code id="catmaply_time_layout_+3A_legend">legend</code></td>
<td>
<p>boolean indicating if legend should be displayed or not; (default: TRUE).</p>
</td></tr>
<tr><td><code id="catmaply_time_layout_+3A_rangeslider">rangeslider</code></td>
<td>
<p>whether or not the rangeslider should be displayed or not; (default: TRUE).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>plot_ly object
</p>

<hr>
<h2 id='catmaply-package'>catmaply: Heatmap for Categorical Data using 'plotly'</h2><span id='topic+catmaply-package'></span><span id='topic+_PACKAGE'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Methods and plotting functions for displaying categorical data on an interactive heatmap using 'plotly'. Provides functionality for strictly categorical heatmaps, heatmaps illustrating categorized continuous data and annotated heatmaps. Also, there are various options to interact with the x-axis to prevent overlapping axis labels, e.g. via simple sliders or range sliders. Besides the viewer pane, resulting plots can be saved as a standalone HTML file, embedded in 'R Markdown' documents or in a 'Shiny' app.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Yves Mauron <a href="mailto:ypmauron@gmail.com">ypmauron@gmail.com</a>
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Trivadis AG [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/VerkehrsbetriebeZuerich/catmaply">https://github.com/VerkehrsbetriebeZuerich/catmaply</a>
</p>
</li>
<li> <p><a href="https://verkehrsbetriebezuerich.github.io/catmaply/">https://verkehrsbetriebezuerich.github.io/catmaply/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/VerkehrsbetriebeZuerich/catmaply/issues">https://github.com/VerkehrsbetriebeZuerich/catmaply/issues</a>
</p>
</li></ul>


<hr>
<h2 id='discrete_coloring'>Generates the parameters necessary for discrete coloring and colorbar</h2><span id='topic+discrete_coloring'></span>

<h3>Description</h3>

<p>Generates the parameters necessary for discrete coloring and colorbar
</p>


<h3>Usage</h3>

<pre><code class='language-R'>discrete_coloring(df, color_palette, categorical_color_range, legend_items)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="discrete_coloring_+3A_df">df</code></td>
<td>
<p>catmaply tibble</p>
</td></tr>
<tr><td><code id="discrete_coloring_+3A_color_palette">color_palette</code></td>
<td>
<p>the color palette</p>
</td></tr>
<tr><td><code id="discrete_coloring_+3A_categorical_color_range">categorical_color_range</code></td>
<td>
<p>whether to use categorical color range or not.</p>
</td></tr>
<tr><td><code id="discrete_coloring_+3A_legend_items">legend_items</code></td>
<td>
<p>distinct/unique items of ordered legend items</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list(colorscale, tickvals, ticktext)
</p>

<hr>
<h2 id='discrete_coloring_categorical'>Generates the parameters necessary for discrete coloring and colorbar</h2><span id='topic+discrete_coloring_categorical'></span>

<h3>Description</h3>

<p>Generates the parameters necessary for discrete coloring and colorbar
</p>


<h3>Usage</h3>

<pre><code class='language-R'>discrete_coloring_categorical(categories, color_palette, range_min, range_max)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="discrete_coloring_categorical_+3A_categories">categories</code></td>
<td>
<p>categories, for coloring should done</p>
</td></tr>
<tr><td><code id="discrete_coloring_categorical_+3A_color_palette">color_palette</code></td>
<td>
<p>the color palette</p>
</td></tr>
<tr><td><code id="discrete_coloring_categorical_+3A_range_min">range_min</code></td>
<td>
<p>max of z range; (default: length(categories))</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list(colorscale, tickvals, ticktext)
</p>

<hr>
<h2 id='discrete_coloring_range'>Generates the parameters necessary for discrete coloring and colorbar</h2><span id='topic+discrete_coloring_range'></span>

<h3>Description</h3>

<p>Generates the parameters necessary for discrete coloring and colorbar
</p>


<h3>Usage</h3>

<pre><code class='language-R'>discrete_coloring_range(df, color_palette, categorical_color_range)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="discrete_coloring_range_+3A_df">df</code></td>
<td>
<p>catmaply tibble</p>
</td></tr>
<tr><td><code id="discrete_coloring_range_+3A_color_palette">color_palette</code></td>
<td>
<p>the color palette</p>
</td></tr>
<tr><td><code id="discrete_coloring_range_+3A_categorical_color_range">categorical_color_range</code></td>
<td>
<p>whether to use categorical color range or not.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list(colorscale, tickvals, ticktext)
</p>

<hr>
<h2 id='vbz'>Sample files provided by VBZ</h2><span id='topic+vbz'></span>

<h3>Description</h3>

<p>Sample data of three distinct routes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vbz
</code></pre>


<h3>Format</h3>

<p>list with data.frame elements
</p>

<dl>
<dt>trip_seq</dt><dd><p>Sequence order of trips.</p>
</dd>
<dt>stop_seq</dt><dd><p>Sequence order of stops.</p>
</dd>
<dt>stop_name</dt><dd><p>Name of the stop.</p>
</dd>
<dt>trip_id</dt><dd><p>Id of trip</p>
</dd>
<dt>circulation_name</dt><dd><p>Name of circulation.</p>
</dd>
<dt>line_name</dt><dd><p>Name of line.</p>
</dd>
<dt>vehicle</dt><dd><p>Type of vehicle.</p>
</dd>
<dt>occupancy</dt><dd><p>Occupancy.</p>
</dd>
<dt>occ_category</dt><dd><p>Category of occupancy.</p>
</dd>
<dt>departure_time</dt><dd><p>Time of departure.</p>
</dd>
<dt>number_of_measurements</dt><dd><p>Number of measurements.</p>
</dd>
<dt>occ_cat_name</dt><dd><p>Occupancy category name</p>
</dd>
<dt>direction</dt><dd><p>Direction.</p>
</dd>
</dl>



<h3>Source</h3>

<p>vbz
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
