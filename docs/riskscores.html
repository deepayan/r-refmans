<!DOCTYPE html><html><head><title>Help for package riskscores</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {riskscores}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#breastcancer'><p>Breast tissue biopsy data</p></a></li>
<li><a href='#clip_exp_vals'><p>Clip Values</p></a></li>
<li><a href='#coef.risk_mod'><p>Extract Model Coefficients</p></a></li>
<li><a href='#cv_risk_mod'><p>Run Cross-Validation to Tune Lambda0</p></a></li>
<li><a href='#get_metrics'><p>Get Model Metrics</p></a></li>
<li><a href='#get_risk'><p>Calculate Risk Probability from Score</p></a></li>
<li><a href='#plot.cv_risk_mod'><p>Plot Risk Score Cross-Validation Results</p></a></li>
<li><a href='#plot.risk_mod'><p>Plot Risk Score Model Curve</p></a></li>
<li><a href='#predict.risk_mod'><p>Predict Method for Risk Model Fits</p></a></li>
<li><a href='#risk_mod'><p>Fit an Integer Risk Score Model</p></a></li>
<li><a href='#stratify_folds'><p>Generate Stratified Fold IDs</p></a></li>
<li><a href='#summary.risk_mod'><p>Summarize Risk Model Fit</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Optimized Integer Risk Score Models</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Implements an optimized approach to learning risk score models, where sparsity and integer constraints are integrated into the model-fitting process.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/hjeglinton/riskscores">https://github.com/hjeglinton/riskscores</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, foreach, ggplot2, magrittr, stats</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, kableExtra, rmarkdown, doParallel</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr, kableExtra</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-12-14 14:18:34 UTC; hannaheglinton</td>
</tr>
<tr>
<td>Author:</td>
<td>Hannah Eglinton [aut, cre],
  Alice Paul [aut, cph],
  Oscar Yan [aut],
  R Core Team [ctb, cph] (Copyright holder of Rinternals.h, R.h, lm.c,
    Applic.h, statsR.h, glm package),
  Robert Gentleman [ctb, cph] (Author and copyright holder of
    Rinternals.h),
  Ross Ihaka [ctb, cph] (Author and copyright holder of Rinternals.h),
  Simon Davies [ctb] (Author of glm.fit function (modified in
    cv_risk_mod.R)),
  Thomas Lumley [ctb] (Author of glm.fit function (modified in
    cv_risk_mod.R))</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Hannah Eglinton &lt;eglintonh@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-12-14 16:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='breastcancer'>Breast tissue biopsy data</h2><span id='topic+breastcancer'></span>

<h3>Description</h3>

<p>The Breast Cancer Wisconsin dataset from the UCI machine learning repository
records the measurements from breast tissue biopsies. The outcome of interest
is whether the sample was benign or malignant.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>breastcancer
</code></pre>


<h3>Format</h3>



<h4><code>breastcancer</code></h4>

<p>A data frame with 683 rows and 10 columns:
</p>

<dl>
<dt>Benign</dt><dd><p>1 for malignant, 0 for benign</p>
</dd>
<dt>ClumpThickness</dt><dd><p>Clump thickness on an integer scale from 1 to 10</p>
</dd>
<dt>UniformityOfCellSize</dt><dd><p>Uniformity of cell size on an integer scale from 1 to 10</p>
</dd>
<dt>UniformityofCellShape</dt><dd><p>Uniformity of cell shape on an integer scale from 1 to 10</p>
</dd>
<dt>MarginalAdhesion</dt><dd><p>Marginal adhesion on an integer scale from 1 to 10</p>
</dd>
<dt>SingleEpithelialCellSize</dt><dd><p>Single epithelial cell size on an integer scale from 1 to 10</p>
</dd>
<dt>BareNuclei</dt><dd><p>Bare nuclei on an integer scale from 1 to 10</p>
</dd>
<dt>BlandChromatin</dt><dd><p>Bland chromatin on an integer scale from 1 to 10</p>
</dd>
<dt>NormalNucleoli</dt><dd><p>Normal nucleoli on an integer scale from 1 to 10</p>
</dd>
<dt>Mitosis</dt><dd><p>Mitosis on an integer scale from 1 to 10</p>
</dd>
</dl>




<h3>Source</h3>

<p><a href="https://archive.ics.uci.edu/dataset/15/breast+cancer+wisconsin+original">https://archive.ics.uci.edu/dataset/15/breast+cancer+wisconsin+original</a>
</p>

<hr>
<h2 id='clip_exp_vals'>Clip Values</h2><span id='topic+clip_exp_vals'></span>

<h3>Description</h3>

<p>Clip values prior to exponentiation to avoid numeric errors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clip_exp_vals(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clip_exp_vals_+3A_x">x</code></td>
<td>
<p>Numeric vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Input vector <code>x</code> with all values between -709.78 and 709.78.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>clip_exp_vals(710)
</code></pre>

<hr>
<h2 id='coef.risk_mod'>Extract Model Coefficients</h2><span id='topic+coef.risk_mod'></span>

<h3>Description</h3>

<p>Extracts a vector of model coefficients (both nonzero and zero) from a
&quot;risk_mod&quot; object. Equivalent to accessing the <code>beta</code> attribute of a
&quot;risk_mod&quot; object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'risk_mod'
coef(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="coef.risk_mod_+3A_object">object</code></td>
<td>
<p>An object of class &quot;risk_mod&quot;, usually a result of a call to
<code><a href="#topic+risk_mod">risk_mod()</a></code>.</p>
</td></tr>
<tr><td><code id="coef.risk_mod_+3A_...">...</code></td>
<td>
<p>Additional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Numeric vector with coefficients.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>y &lt;- breastcancer[[1]]
X &lt;- as.matrix(breastcancer[,2:ncol(breastcancer)])

mod &lt;- risk_mod(X, y, lambda0 = 0.01)
coef(mod)

</code></pre>

<hr>
<h2 id='cv_risk_mod'>Run Cross-Validation to Tune Lambda0</h2><span id='topic+cv_risk_mod'></span>

<h3>Description</h3>

<p>Runs k-fold cross-validation on a grid of <code class="reqn">\lambda_0</code> values. Records
class accuracy and deviance for each <code class="reqn">\lambda_0</code>. Returns an object of
class &quot;cv_risk_mod&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cv_risk_mod(
  X,
  y,
  weights = NULL,
  a = -10,
  b = 10,
  max_iters = 100,
  tol = 1e-05,
  nlambda = 25,
  lambda_min_ratio = ifelse(nrow(X) &lt; ncol(X), 0.01, 1e-04),
  lambda0 = NULL,
  nfolds = 10,
  foldids = NULL,
  parallel = FALSE,
  seed = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cv_risk_mod_+3A_x">X</code></td>
<td>
<p>Input covariate matrix with dimension <code class="reqn">n \times p</code>;
every row is an observation.</p>
</td></tr>
<tr><td><code id="cv_risk_mod_+3A_y">y</code></td>
<td>
<p>Numeric vector for the (binomial) response variable.</p>
</td></tr>
<tr><td><code id="cv_risk_mod_+3A_weights">weights</code></td>
<td>
<p>Numeric vector of length <code class="reqn">n</code> with weights for each
observation. Unless otherwise specified, default will give equal weight to
each observation.</p>
</td></tr>
<tr><td><code id="cv_risk_mod_+3A_a">a</code></td>
<td>
<p>Integer lower bound for coefficients (default: -10).</p>
</td></tr>
<tr><td><code id="cv_risk_mod_+3A_b">b</code></td>
<td>
<p>Integer upper bound for coefficients (default: 10).</p>
</td></tr>
<tr><td><code id="cv_risk_mod_+3A_max_iters">max_iters</code></td>
<td>
<p>Maximum number of iterations (default: 100).</p>
</td></tr>
<tr><td><code id="cv_risk_mod_+3A_tol">tol</code></td>
<td>
<p>Tolerance for convergence (default: 1e-5).</p>
</td></tr>
<tr><td><code id="cv_risk_mod_+3A_nlambda">nlambda</code></td>
<td>
<p>Number of lambda values to try (default: 25).</p>
</td></tr>
<tr><td><code id="cv_risk_mod_+3A_lambda_min_ratio">lambda_min_ratio</code></td>
<td>
<p>Smallest value for lambda, as a fraction of
lambda_max (the smallest value for which all coefficients are zero).
The default depends on the sample size (<code class="reqn">n</code>) relative to the number of
variables (<code class="reqn">p</code>). If <code class="reqn">n &gt; p</code>, the default is 0.0001, close to zero.
If <code class="reqn">n &lt; p</code>, the default is 0.01.</p>
</td></tr>
<tr><td><code id="cv_risk_mod_+3A_lambda0">lambda0</code></td>
<td>
<p>Optional sequence of lambda values. By default, the function
will derive the lambda0 sequence based on the data (see <code>lambda_min_ratio</code>).</p>
</td></tr>
<tr><td><code id="cv_risk_mod_+3A_nfolds">nfolds</code></td>
<td>
<p>Number of folds, implied if <code>foldids</code> provided (default: 10).</p>
</td></tr>
<tr><td><code id="cv_risk_mod_+3A_foldids">foldids</code></td>
<td>
<p>Optional vector of values between 1 and <code>nfolds</code>.</p>
</td></tr>
<tr><td><code id="cv_risk_mod_+3A_parallel">parallel</code></td>
<td>
<p>If <code>TRUE</code>, parallel processing (using <a href="foreach.html#topic+foreach">foreach</a>) is implemented
during cross-validation to increase efficiency (default: <code>FALSE</code>).
User must first register parallel backend with a function such as
<a href="doParallel.html#topic+registerDoParallel">doParallel::registerDoParallel</a>.</p>
</td></tr>
<tr><td><code id="cv_risk_mod_+3A_seed">seed</code></td>
<td>
<p>An integer that is used as argument by <code>set.seed()</code> for
offsetting the random number generator. Default is to not set a particular
randomization seed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class &quot;cv_risk_mod&quot; with the following attributes:
</p>
<table>
<tr><td><code>results</code></td>
<td>
<p>Dataframe containing a summary of deviance and accuracy for each
value of <code>lambda0</code> (mean and SD). Also includes the number of nonzero
coefficients that are produced by each <code>lambda0</code> when fit on the full data.</p>
</td></tr>
<tr><td><code>lambda_min</code></td>
<td>
<p>Numeric value indicating the <code>lambda0</code> that resulted in the
lowest mean deviance.</p>
</td></tr>
<tr><td><code>lambda_1se</code></td>
<td>
<p>Numeric value indicating the largest <code>lamdba0</code> that
had a mean deviance within one standard error of <code>lambda_min</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='get_metrics'>Get Model Metrics</h2><span id='topic+get_metrics'></span>

<h3>Description</h3>

<p>Calculates a risk model's deviance, accuracy, sensitivity, and specificity
given a set of data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_metrics(mod, X = NULL, y = NULL, weights = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_metrics_+3A_mod">mod</code></td>
<td>
<p>An object of class <code>risk_mod</code>, usually a result of a call to
<code><a href="#topic+risk_mod">risk_mod()</a></code>.</p>
</td></tr>
<tr><td><code id="get_metrics_+3A_x">X</code></td>
<td>
<p>Input covariate matrix with dimension <code class="reqn">n \times p</code>;
every row is an observation.</p>
</td></tr>
<tr><td><code id="get_metrics_+3A_y">y</code></td>
<td>
<p>Numeric vector for the (binomial) response variable.</p>
</td></tr>
<tr><td><code id="get_metrics_+3A_weights">weights</code></td>
<td>
<p>Numeric vector of length <code class="reqn">n</code> with weights for each
observation. Unless otherwise specified, default will give equal weight to
each observation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with deviance (dev), accuracy (acc), sensitivity (sens), and
specificity (spec).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>y &lt;- breastcancer[[1]]
X &lt;- as.matrix(breastcancer[,2:ncol(breastcancer)])

mod &lt;- risk_mod(X, y)
get_metrics(mod, X, y)
</code></pre>

<hr>
<h2 id='get_risk'>Calculate Risk Probability from Score</h2><span id='topic+get_risk'></span>

<h3>Description</h3>

<p>Returns the risk probabilities for the provided score value(s).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_risk(object, score)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_risk_+3A_object">object</code></td>
<td>
<p>An object of class &quot;risk_mod&quot;, usually a result of a call to
<code><a href="#topic+risk_mod">risk_mod()</a></code>.</p>
</td></tr>
<tr><td><code id="get_risk_+3A_score">score</code></td>
<td>
<p>Numeric vector with score value(s).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Numeric vector with the same length as <code>score</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>y &lt;- breastcancer[[1]]
X &lt;- as.matrix(breastcancer[,2:ncol(breastcancer)])

mod &lt;- risk_mod(X, y)
get_risk(mod, score = c(1, 10, 20))

</code></pre>

<hr>
<h2 id='plot.cv_risk_mod'>Plot Risk Score Cross-Validation Results</h2><span id='topic+plot.cv_risk_mod'></span>

<h3>Description</h3>

<p>Plots the mean deviance for each <code class="reqn">lambda_0</code> tested during cross-validation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'cv_risk_mod'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.cv_risk_mod_+3A_x">x</code></td>
<td>
<p>An object of class &quot;cv_risk_mod&quot;, usually a result of a call to
<code><a href="#topic+cv_risk_mod">cv_risk_mod()</a></code>.</p>
</td></tr>
<tr><td><code id="plot.cv_risk_mod_+3A_...">...</code></td>
<td>
<p>Additional arguments affecting the plot produced</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class &quot;ggplot&quot;.
</p>

<hr>
<h2 id='plot.risk_mod'>Plot Risk Score Model Curve</h2><span id='topic+plot.risk_mod'></span>

<h3>Description</h3>

<p>Plots the linear regression equation associated with the integer risk score
model. Plots the scores on the x-axis and risk on the y-axis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'risk_mod'
plot(x, score_min = NULL, score_max = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.risk_mod_+3A_x">x</code></td>
<td>
<p>An object of class &quot;risk_mod&quot;, usually a result of a call to
<code><a href="#topic+risk_mod">risk_mod()</a></code>.</p>
</td></tr>
<tr><td><code id="plot.risk_mod_+3A_score_min">score_min</code></td>
<td>
<p>The minimum score displayed on the x-axis. The default is the
minimum score predicted from model's training data.</p>
</td></tr>
<tr><td><code id="plot.risk_mod_+3A_score_max">score_max</code></td>
<td>
<p>The maximum score displayed on the x-axis. The default is the
maximum score predicted from model's training data.</p>
</td></tr>
<tr><td><code id="plot.risk_mod_+3A_...">...</code></td>
<td>
<p>Additional arguments affecting the plot produced</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class &quot;ggplot&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>y &lt;- breastcancer[[1]]
X &lt;- as.matrix(breastcancer[,2:ncol(breastcancer)])
mod &lt;- risk_mod(X, y, lambda0 = 0.01)

plot(mod)
</code></pre>

<hr>
<h2 id='predict.risk_mod'>Predict Method for Risk Model Fits</h2><span id='topic+predict.risk_mod'></span>

<h3>Description</h3>

<p>Obtains predictions from risk score models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'risk_mod'
predict(object, newx = NULL, type = c("link", "response", "score"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict.risk_mod_+3A_object">object</code></td>
<td>
<p>An object of class &quot;risk_mod&quot;, usually a result of a call to
<code><a href="#topic+risk_mod">risk_mod()</a></code>.</p>
</td></tr>
<tr><td><code id="predict.risk_mod_+3A_newx">newx</code></td>
<td>
<p>Optional matrix of new values for <code>X</code> for which predictions are
to be made. If ommited, the fitted values are used.</p>
</td></tr>
<tr><td><code id="predict.risk_mod_+3A_type">type</code></td>
<td>
<p>The type of prediction required. The default (&quot;link&quot;) is on the
scale of the predictors (i.e. log-odds); the &quot;response&quot; type is on the scale
of the response variable (i.e. risk probabilities); the &quot;score&quot; type returns
the risk score calculated from the integer model.</p>
</td></tr>
<tr><td><code id="predict.risk_mod_+3A_...">...</code></td>
<td>
<p>Additional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Numeric vector of predicted values.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>y &lt;- breastcancer[[1]]
X &lt;- as.matrix(breastcancer[,2:ncol(breastcancer)])
mod &lt;- risk_mod(X, y, lambda0 = 0.01)
predict(mod, type = "link")[1]
predict(mod, type = "response")[1]
predict(mod, type = "score")[1]
</code></pre>

<hr>
<h2 id='risk_mod'>Fit an Integer Risk Score Model</h2><span id='topic+risk_mod'></span>

<h3>Description</h3>

<p>Fits an optimized integer risk score model using a cyclical coordinate descent
algorithm. Returns an object of class &quot;risk_mod&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>risk_mod(
  X,
  y,
  gamma = NULL,
  beta = NULL,
  weights = NULL,
  lambda0 = 0,
  a = -10,
  b = 10,
  max_iters = 100,
  tol = 1e-05
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="risk_mod_+3A_x">X</code></td>
<td>
<p>Input covariate matrix with dimension <code class="reqn">n \times p</code>;
every row is an observation.</p>
</td></tr>
<tr><td><code id="risk_mod_+3A_y">y</code></td>
<td>
<p>Numeric vector for the (binomial) response variable.</p>
</td></tr>
<tr><td><code id="risk_mod_+3A_gamma">gamma</code></td>
<td>
<p>Starting value to rescale coefficients for prediction (optional).</p>
</td></tr>
<tr><td><code id="risk_mod_+3A_beta">beta</code></td>
<td>
<p>Starting numeric vector with <code class="reqn">p</code> coefficients.
Default starting coefficients are rounded coefficients from a
logistic regression model.</p>
</td></tr>
<tr><td><code id="risk_mod_+3A_weights">weights</code></td>
<td>
<p>Numeric vector of length <code class="reqn">n</code> with weights for each
observation. Unless otherwise specified, default will give equal weight to
each observation.</p>
</td></tr>
<tr><td><code id="risk_mod_+3A_lambda0">lambda0</code></td>
<td>
<p>Penalty coefficient for L0 term (default: 0).
See <code><a href="#topic+cv_risk_mod">cv_risk_mod()</a></code> for <code>lambda0</code> tuning.</p>
</td></tr>
<tr><td><code id="risk_mod_+3A_a">a</code></td>
<td>
<p>Integer lower bound for coefficients (default: -10).</p>
</td></tr>
<tr><td><code id="risk_mod_+3A_b">b</code></td>
<td>
<p>Integer upper bound for coefficients (default: 10).</p>
</td></tr>
<tr><td><code id="risk_mod_+3A_max_iters">max_iters</code></td>
<td>
<p>Maximum number of iterations (default: 100).</p>
</td></tr>
<tr><td><code id="risk_mod_+3A_tol">tol</code></td>
<td>
<p>Tolerance for convergence (default: 1e-5).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function uses a cyclical coordinate descent algorithm to solve the
following optimization problem.
</p>
<p style="text-align: center;"><code class="reqn">\min_{\alpha,\beta} \quad \frac{1}{n} \sum_{i=1}^{n} (\gamma y_i x_i^T \beta - log(1 + exp(\gamma x_i^T \beta))) + \lambda_0 \sum_{j=1}^{p} 1(\beta_{j} \neq 0)</code>
</p>

<p style="text-align: center;"><code class="reqn">l \le \beta_j \le u \; \; \; \forall j = 1,2,...,p</code>
</p>

<p style="text-align: center;"><code class="reqn">\beta_j \in \mathbb{Z} \; \; \; \forall j = 1,2,...,p </code>
</p>

<p style="text-align: center;"><code class="reqn">\beta_0, \gamma \in \mathbb{R}</code>
</p>

<p>These constraints ensure that the model will be sparse and include
only integer coefficients.
</p>


<h3>Value</h3>

<p>An object of class &quot;risk_mod&quot; with the following attributes:
</p>
<table>
<tr><td><code>gamma</code></td>
<td>
<p>Final scalar value.</p>
</td></tr>
<tr><td><code>beta</code></td>
<td>
<p>Vector of integer coefficients.</p>
</td></tr>
<tr><td><code>glm_mod</code></td>
<td>
<p>Logistic regression object of class &quot;glm&quot; (see <a href="stats.html#topic+glm">stats::glm</a>).</p>
</td></tr>
<tr><td><code>X</code></td>
<td>
<p>Input covariate matrix.</p>
</td></tr>
<tr><td><code>y</code></td>
<td>
<p>Input response vector.</p>
</td></tr>
<tr><td><code>weights</code></td>
<td>
<p>Input weights.</p>
</td></tr>
<tr><td><code>lambda0</code></td>
<td>
<p>Imput <code>lambda0</code> value.</p>
</td></tr>
<tr><td><code>model_card</code></td>
<td>
<p>Dataframe displaying the nonzero integer coefficients
(i.e. &quot;points&quot;) of the risk score model.</p>
</td></tr>
<tr><td><code>score_map</code></td>
<td>
<p>Dataframe containing a column of possible scores and a column
with each score's associated risk probability.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>y &lt;- breastcancer[[1]]
X &lt;- as.matrix(breastcancer[,2:ncol(breastcancer)])

mod1 &lt;- risk_mod(X, y)
mod1$model_card

mod2 &lt;- risk_mod(X, y, lambda0 = 0.01)
mod2$model_card

mod3 &lt;- risk_mod(X, y, lambda0 = 0.01, a = -5, b = 5)
mod3$model_card
</code></pre>

<hr>
<h2 id='stratify_folds'>Generate Stratified Fold IDs</h2><span id='topic+stratify_folds'></span>

<h3>Description</h3>

<p>Returns a vector of fold IDs that preserves class proportions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stratify_folds(y, nfolds = 10, seed = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stratify_folds_+3A_y">y</code></td>
<td>
<p>Numeric vector for the (binomial) response variable.</p>
</td></tr>
<tr><td><code id="stratify_folds_+3A_nfolds">nfolds</code></td>
<td>
<p>Number of folds (default: 10).</p>
</td></tr>
<tr><td><code id="stratify_folds_+3A_seed">seed</code></td>
<td>
<p>An integer that is used as argument by <code>set.seed()</code> for
offsetting the random number generator. Default is to not set a particular
randomization seed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Numeric vector with the same length as <code>y</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>y &lt;- rbinom(100, 1, 0.3)
foldids &lt;- stratify_folds(y, nfolds = 5)
table(y, foldids)
</code></pre>

<hr>
<h2 id='summary.risk_mod'>Summarize Risk Model Fit</h2><span id='topic+summary.risk_mod'></span>

<h3>Description</h3>

<p>Prints text that summarizes &quot;risk_mod&quot; objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'risk_mod'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.risk_mod_+3A_object">object</code></td>
<td>
<p>An object of class &quot;risk_mod&quot;, usually a result of a call to
<code><a href="#topic+risk_mod">risk_mod()</a></code>.</p>
</td></tr>
<tr><td><code id="summary.risk_mod_+3A_...">...</code></td>
<td>
<p>Additional arguments affecting the summary produced.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Printed text with intercept, nonzero coefficients, gamma, lambda,
and deviance
</p>


<h3>Examples</h3>

<pre><code class='language-R'>y &lt;- breastcancer[[1]]
X &lt;- as.matrix(breastcancer[,2:ncol(breastcancer)])

mod &lt;- risk_mod(X, y, lambda0 = 0.01)
summary(mod)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
