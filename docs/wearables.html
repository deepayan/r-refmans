<!DOCTYPE html><html><head><title>Help for package wearables</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {wearables}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_chunk_group'><p>Addition of chunk groups</p></a></li>
<li><a href='#aggregate_e4_data'><p>Aggregate E4 data into 1min timesteps</p></a></li>
<li><a href='#as_time'><p>as_time</p></a></li>
<li><a href='#as_timeseries'><p>Convert an E4 data stream to a timeseries</p></a></li>
<li><a href='#batch_analysis'><p>Batch analysis</p></a></li>
<li><a href='#binary_classifier_config'><p>Configuration of the SVM algorithm for binary classification</p></a></li>
<li><a href='#calculate_RMSSD'><p>RMSSD calculation</p></a></li>
<li><a href='#char_clock_systime'><p>Force character datetime variable (&quot;yyyy-mm-dd hh:mm:ss&quot;) to system timezone</p></a></li>
<li><a href='#choose_between_classes'><p>Choice between two classes</p></a></li>
<li><a href='#compute_amplitude_features'><p>Amplitude features</p></a></li>
<li><a href='#compute_derivative_features'><p>Derivative features</p></a></li>
<li><a href='#compute_features2'><p>Features computation</p></a></li>
<li><a href='#compute_wavelet_coefficients'><p>Wavelet coefficients</p></a></li>
<li><a href='#compute_wavelet_decomposition'><p>Wavelet decomposition</p></a></li>
<li><a href='#create_e4_output_folder'><p>Output folder</p></a></li>
<li><a href='#e4_filecut_intervals'><p>Filter datasets for a Datetime start + end</p></a></li>
<li><a href='#filter_createdir_zip'><p>Function to filter the data object based on the time period and intervals that</p>
are needed for the files to be cut.
The function also creates identical Empatica E4 zipfiles in the same directory as
where the original zipfile is located.</a></li>
<li><a href='#filter_e4data_datetime'><p>Filter all four datasets for a Datetime start + end</p></a></li>
<li><a href='#find_peaks'><p>Function to find peaks of an EDA datafile</p></a></li>
<li><a href='#get_amp'><p>Peak amplitude</p></a></li>
<li><a href='#get_apex'><p>Get the eda apex of the signal</p></a></li>
<li><a href='#get_decay_time'><p>Decay time</p></a></li>
<li><a href='#get_derivative'><p>First derivative</p></a></li>
<li><a href='#get_eda_deriv'><p>Electrodermal activity signal derivative</p></a></li>
<li><a href='#get_half_amp'><p>Half peak amp</p></a></li>
<li><a href='#get_half_rise'><p>Half rise time</p></a></li>
<li><a href='#get_i_apex_with_decay'><p>Decaying peaks</p></a></li>
<li><a href='#get_kernel'><p>SVM kernel</p></a></li>
<li><a href='#get_max_deriv'><p>Maximum derivative</p></a></li>
<li><a href='#get_peak_end'><p>Peak end</p></a></li>
<li><a href='#get_peak_end_times'><p>Peak end times</p></a></li>
<li><a href='#get_peak_start'><p>Start of peaks</p></a></li>
<li><a href='#get_peak_start_times'><p>Peak start times</p></a></li>
<li><a href='#get_rise_time'><p>Rise time of peaks</p></a></li>
<li><a href='#get_SCR_width'><p>Peak width</p></a></li>
<li><a href='#get_second_derivative'><p>Second derivative</p></a></li>
<li><a href='#ibi_analysis'><p>IBI analysis</p></a></li>
<li><a href='#max_per_n'><p>Max value per segment of length n</p></a></li>
<li><a href='#multiclass_classifier_config'><p>Configuration of the SVM algorithm for ternary classification</p></a></li>
<li><a href='#pad_e4'><p>pad_e4</p></a></li>
<li><a href='#plot_artifacts'><p>Artifact plots</p></a></li>
<li><a href='#predict_binary_classifier'><p>Binary classifiers</p></a></li>
<li><a href='#predict_multiclass_classifier'><p>Ternary classifiers</p></a></li>
<li><a href='#prepend_time_column'><p>prepend_time_column</p></a></li>
<li><a href='#print.e4data'><p>Show class of object</p></a></li>
<li><a href='#process_eda'><p>Process EDA data</p></a></li>
<li><a href='#rbind_e4'><p>Row-bind E4 datasets</p></a></li>
<li><a href='#read_and_process_e4'><p>Read, process and feature extraction of E4 data</p></a></li>
<li><a href='#read_e4'><p>Read E4 data</p></a></li>
<li><a href='#remove_small_peaks'><p>Small peaks removal</p></a></li>
<li><a href='#upsample_data_to_8Hz'><p>Upsample EDA data to 8 Hz</p></a></li>
<li><a href='#write_processed_e4'><p>Write CSV files of the output</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-12-20</td>
</tr>
<tr>
<td>Title:</td>
<td>Tools to Read and Convert Wearables Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.8.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>xts, lubridate, dplyr, RHRV, magrittr, signal, waveslim,
futile.logger, kernlab, padr, varian, ggplot2, R.utils</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Peter de Looff &lt;peterdelooff@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>
    Package to read Empatica E4 data, perform several transformations, perform signal
    processing and analyses, including batch analyses.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-12-20 15:07:48 UTC; Gebruiker</td>
</tr>
<tr>
<td>Author:</td>
<td>Peter de Looff [aut, cre],
  Remko Duursma [aut],
  Saskia Koldijk [aut],
  Kees de Schepper [aut],
  Matthijs Noordzij [ctb],
  Natasha Jaques [ctb],
  Sara Taylor [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-12-20 15:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_chunk_group'>Addition of chunk groups</h2><span id='topic+add_chunk_group'></span>

<h3>Description</h3>

<p>partition data into chunks of a fixed number of rows in order to calculate
aggregated features per chunk
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_chunk_group(data, rows_per_chunk)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_chunk_group_+3A_data">data</code></td>
<td>
<p>df to partition into chunks</p>
</td></tr>
<tr><td><code id="add_chunk_group_+3A_rows_per_chunk">rows_per_chunk</code></td>
<td>
<p>size of a chunk</p>
</td></tr>
</table>

<hr>
<h2 id='aggregate_e4_data'>Aggregate E4 data into 1min timesteps</h2><span id='topic+aggregate_e4_data'></span>

<h3>Description</h3>

<p>Aggregate E4 data into 1min timesteps
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aggregate_e4_data(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="aggregate_e4_data_+3A_x">x</code></td>
<td>
<p>An object read by <code><a href="#topic+read_e4">read_e4</a></code>.</p>
</td></tr>
</table>

<hr>
<h2 id='as_time'>as_time</h2><span id='topic+as_time'></span>

<h3>Description</h3>

<p>Converts Unix time to as.POSIXct
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_time(x, tz = "UTC")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_time_+3A_x">x</code></td>
<td>
<p>takes a unixtime and converts to as.POSIXct</p>
</td></tr>
<tr><td><code id="as_time_+3A_tz">tz</code></td>
<td>
<p>timezone is set to UTC</p>
</td></tr>
</table>

<hr>
<h2 id='as_timeseries'>Convert an E4 data stream to a timeseries</h2><span id='topic+as_timeseries'></span>

<h3>Description</h3>

<p>Creates an xts object indexed by time
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_timeseries(data, index = 2, name_col = "V1")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_timeseries_+3A_data">data</code></td>
<td>
<p>A dataframe, subelements of list as output by read_e4 function</p>
</td></tr>
<tr><td><code id="as_timeseries_+3A_index">index</code></td>
<td>
<p>Which column (integer) to use as the data in the timeseries. Default: 2.</p>
</td></tr>
<tr><td><code id="as_timeseries_+3A_name_col">name_col</code></td>
<td>
<p>Column name to give to the timeseries data.</p>
</td></tr>
</table>

<hr>
<h2 id='batch_analysis'>Batch analysis</h2><span id='topic+batch_analysis'></span>

<h3>Description</h3>

<p>Read and process all ZIP files in a directory
</p>


<h3>Usage</h3>

<pre><code class='language-R'>batch_analysis(path_in = NULL, path_out = ".")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="batch_analysis_+3A_path_in">path_in</code></td>
<td>
<p>input path</p>
</td></tr>
<tr><td><code id="batch_analysis_+3A_path_out">path_out</code></td>
<td>
<p>output path</p>
</td></tr>
</table>

<hr>
<h2 id='binary_classifier_config'>Configuration of the SVM algorithm for binary classification</h2><span id='topic+binary_classifier_config'></span>

<h3>Description</h3>

<p>Configuration of the SVM algorithm for binary classification
</p>


<h3>Usage</h3>

<pre><code class='language-R'>binary_classifier_config
</code></pre>


<h3>Format</h3>

<p>An object of class <code>list</code> of length 4.
</p>


<h3>Author(s)</h3>

<p>Sara Taylor <a href="mailto:sataylor@mit.edu">sataylor@mit.edu</a>
</p>


<h3>References</h3>

<p><a href="https://eda-explorer.media.mit.edu/">https://eda-explorer.media.mit.edu/</a>
</p>

<hr>
<h2 id='calculate_RMSSD'>RMSSD calculation</h2><span id='topic+calculate_RMSSD'></span>

<h3>Description</h3>

<p>Calculation of RMSSD over 1 minute time periods for plotting
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculate_RMSSD(IBIdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calculate_RMSSD_+3A_ibidata">IBIdata</code></td>
<td>
<p>Uses the IBI data frame as created by <code><a href="#topic+read_e4">read_e4</a></code></p>
</td></tr>
</table>

<hr>
<h2 id='char_clock_systime'>Force character datetime variable (&quot;yyyy-mm-dd hh:mm:ss&quot;) to system timezone</h2><span id='topic+char_clock_systime'></span>

<h3>Description</h3>

<p>Force character datetime variable (&quot;yyyy-mm-dd hh:mm:ss&quot;) to system timezone
</p>


<h3>Usage</h3>

<pre><code class='language-R'>char_clock_systime(time)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="char_clock_systime_+3A_time">time</code></td>
<td>
<p>Datetime variable (&quot;yyyy-mm-dd hh:mm:ss&quot;)</p>
</td></tr>
</table>

<hr>
<h2 id='choose_between_classes'>Choice between two classes</h2><span id='topic+choose_between_classes'></span>

<h3>Description</h3>

<p>Make choice between two classes based on kernel values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>choose_between_classes(class_a, class_b, kernels)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="choose_between_classes_+3A_class_a">class_a</code></td>
<td>
<p>Number by which class a is indicated</p>
</td></tr>
<tr><td><code id="choose_between_classes_+3A_class_b">class_b</code></td>
<td>
<p>Number by which class b is indicated</p>
</td></tr>
<tr><td><code id="choose_between_classes_+3A_kernels">kernels</code></td>
<td>
<p>Kernel values from SVM</p>
</td></tr>
</table>

<hr>
<h2 id='compute_amplitude_features'>Amplitude features</h2><span id='topic+compute_amplitude_features'></span>

<h3>Description</h3>

<p>Compute amplitude features.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_amplitude_features(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compute_amplitude_features_+3A_data">data</code></td>
<td>
<p>vector of amplitude values</p>
</td></tr>
</table>

<hr>
<h2 id='compute_derivative_features'>Derivative features</h2><span id='topic+compute_derivative_features'></span>

<h3>Description</h3>

<p>Compute derivative features.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_derivative_features(derivative, feature_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compute_derivative_features_+3A_derivative">derivative</code></td>
<td>
<p>vector of derivatives</p>
</td></tr>
<tr><td><code id="compute_derivative_features_+3A_feature_name">feature_name</code></td>
<td>
<p>name of feature</p>
</td></tr>
</table>

<hr>
<h2 id='compute_features2'>Features computation</h2><span id='topic+compute_features2'></span>

<h3>Description</h3>

<p>Compute features for SVM
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_features2(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compute_features2_+3A_data">data</code></td>
<td>
<p>df with eda, filtered eda and timestamp columns</p>
</td></tr>
</table>

<hr>
<h2 id='compute_wavelet_coefficients'>Wavelet coefficients</h2><span id='topic+compute_wavelet_coefficients'></span>

<h3>Description</h3>

<p>Compute wavelet coefficients.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_wavelet_coefficients(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compute_wavelet_coefficients_+3A_data">data</code></td>
<td>
<p>data with an EDA element</p>
</td></tr>
</table>

<hr>
<h2 id='compute_wavelet_decomposition'>Wavelet decomposition</h2><span id='topic+compute_wavelet_decomposition'></span>

<h3>Description</h3>

<p>Compute wavelet decomposition.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_wavelet_decomposition(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compute_wavelet_decomposition_+3A_data">data</code></td>
<td>
<p>vector of values</p>
</td></tr>
</table>

<hr>
<h2 id='create_e4_output_folder'>Output folder</h2><span id='topic+create_e4_output_folder'></span>

<h3>Description</h3>

<p>Create output folder for E4 analysis results
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_e4_output_folder(obj, out_path = ".")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_e4_output_folder_+3A_obj">obj</code></td>
<td>
<p>e4 analysis object</p>
</td></tr>
<tr><td><code id="create_e4_output_folder_+3A_out_path">out_path</code></td>
<td>
<p>output folder</p>
</td></tr>
</table>

<hr>
<h2 id='e4_filecut_intervals'>Filter datasets for a Datetime start + end</h2><span id='topic+e4_filecut_intervals'></span>

<h3>Description</h3>

<p>A function to determine how many intervals should be
created. The question is at what time do you want the filecut to start, what should be 
the period that you want separate files for, and what should the interval be?
</p>


<h3>Usage</h3>

<pre><code class='language-R'>e4_filecut_intervals(time_start, time_end, interval)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="e4_filecut_intervals_+3A_time_start">time_start</code></td>
<td>
<p>User input start time in the character format 
&quot;yyyy-mm-dd hh:mm:ss&quot; / e.g., &quot;2019-11-27 08:32:00&quot;. Where do you want the file cut to start?</p>
</td></tr>
<tr><td><code id="e4_filecut_intervals_+3A_time_end">time_end</code></td>
<td>
<p>User input end time (same format as time_start)</p>
</td></tr>
<tr><td><code id="e4_filecut_intervals_+3A_interval">interval</code></td>
<td>
<p># Interval: User input interval (in minutes/ e.g., 5)
What is the duration of the interval you want to divide the period into? 
For example, the paper by de Looff et al. (2019) uses 5 minute intervals over
a 30 minute period preceding aggressive behavior. The 5 minute interval is 
chosen as for the calculation of some of the heart rate variability parameters 
one needs at least 5 minutes of data, but shorter intervals are possible as well, see for instance:
Shaffer, Fred, en J. P. Ginsberg. ‘An Overview of Heart Rate Variability Metrics and Norms’.
Frontiers in Public Health 5 (28 september 2017). https://doi.org/10.3389/fpubh.2017.00258.</p>
</td></tr>
</table>

<hr>
<h2 id='filter_createdir_zip'>Function to filter the data object based on the time period and intervals that
are needed for the files to be cut.
The function also creates identical Empatica E4 zipfiles in the same directory as
where the original zipfile is located.</h2><span id='topic+filter_createdir_zip'></span>

<h3>Description</h3>

<p>Function to filter the data object based on the time period and intervals that
are needed for the files to be cut.
The function also creates identical Empatica E4 zipfiles in the same directory as
where the original zipfile is located.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_createdir_zip(
  data,
  time_start,
  time_end,
  interval,
  out_path = NULL,
  fn_name = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_createdir_zip_+3A_data">data</code></td>
<td>
<p>Object read with <code><a href="#topic+read_e4">read_e4</a></code></p>
</td></tr>
<tr><td><code id="filter_createdir_zip_+3A_time_start">time_start</code></td>
<td>
<p>User input start time in the character format 
&quot;yyyy-mm-dd hh:mm:ss&quot; / e.g., &quot;2019-11-27 08:32:00&quot;. Where do you want the file cut to start?</p>
</td></tr>
<tr><td><code id="filter_createdir_zip_+3A_time_end">time_end</code></td>
<td>
<p>User input end time (same format as time_start)</p>
</td></tr>
<tr><td><code id="filter_createdir_zip_+3A_interval">interval</code></td>
<td>
<p># Interval: User input interval (in minutes/ e.g., 5)
What is the duration of the interval you want to divide the period into? 
For example, the paper by de Looff et al. (2019) uses 5 minute intervals over
a 30 minute period preceding aggressive behavior. The 5 minute interval is 
chosen as for the calculation of some of the heart rate variability parameters 
one needs at least 5 minutes of data.</p>
</td></tr>
<tr><td><code id="filter_createdir_zip_+3A_out_path">out_path</code></td>
<td>
<p>The directory where to write the cut files; defaults to the input folder.</p>
</td></tr>
<tr><td><code id="filter_createdir_zip_+3A_fn_name">fn_name</code></td>
<td>
<p>The directory where to write the cut files without the extension.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>out_path fn_name
</p>

<hr>
<h2 id='filter_e4data_datetime'>Filter all four datasets for a Datetime start + end</h2><span id='topic+filter_e4data_datetime'></span>

<h3>Description</h3>

<p>Filter all four datasets for a Datetime start + end
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_e4data_datetime(data, start, end)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_e4data_datetime_+3A_data">data</code></td>
<td>
<p>Object read with <code><a href="#topic+read_e4">read_e4</a></code></p>
</td></tr>
<tr><td><code id="filter_e4data_datetime_+3A_start">start</code></td>
<td>
<p>Start Datetime (posixct)</p>
</td></tr>
<tr><td><code id="filter_e4data_datetime_+3A_end">end</code></td>
<td>
<p>End Datetime (posixct)</p>
</td></tr>
</table>

<hr>
<h2 id='find_peaks'>Function to find peaks of an EDA datafile</h2><span id='topic+find_peaks'></span>

<h3>Description</h3>

<p>This function finds the peaks of an EDA signal and adds 
basic properties to the datafile.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_peaks(
  data,
  offset = 1,
  start_WT = 4,
  end_WT = 4,
  thres = 0.005,
  sample_rate = getOption("SAMPLE_RATE", 8)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="find_peaks_+3A_data">data</code></td>
<td>
<p>DataFrame with EDA as one of the columns and indexed by a datetimeIndex</p>
</td></tr>
<tr><td><code id="find_peaks_+3A_offset">offset</code></td>
<td>
<p>the number of rising seconds and falling seconds after a peak needed to be counted as a peak</p>
</td></tr>
<tr><td><code id="find_peaks_+3A_start_wt">start_WT</code></td>
<td>
<p>maximum number of seconds before the apex of a peak that is the &quot;start&quot; of the peak</p>
</td></tr>
<tr><td><code id="find_peaks_+3A_end_wt">end_WT</code></td>
<td>
<p>maximum number of seconds after the apex of a peak that is the &quot;end&quot; of the peak 50 percent of amp</p>
</td></tr>
<tr><td><code id="find_peaks_+3A_thres">thres</code></td>
<td>
<p>the minimum microsecond change required to register as a peak, defaults as .005</p>
</td></tr>
<tr><td><code id="find_peaks_+3A_sample_rate">sample_rate</code></td>
<td>
<p>number of samples per second, default=8</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Also, peak_end is assumed to be no later than the start of the next peak. 
Is that OK?
</p>


<h3>Value</h3>

<p>data frame with several columns
peaks               1 if apex
peak_start          1 if start of peak
peak_end            1 if end of preak
peak_start_times    if apex then corresponding start timestamp
peak_end_times      if apex then corresponding end timestamp
half_rise           if sharp decaying apex then time to halfway point in rise
amp                 if apex then value of EDA at apex - value of EDA at start
max_deriv           if apex then max derivative within 1 second of apex
rise_time           if apex then time from start to apex
decay_time          if sharp decaying apex then time from apex to end
SCR_width           if sharp decaying apex then time from half rise to end
</p>

<hr>
<h2 id='get_amp'>Peak amplitude</h2><span id='topic+get_amp'></span>

<h3>Description</h3>

<p>Get the amplitude of the peaks
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_amp(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_amp_+3A_data">data</code></td>
<td>
<p>df with peak info</p>
</td></tr>
</table>

<hr>
<h2 id='get_apex'>Get the eda apex of the signal</h2><span id='topic+get_apex'></span>

<h3>Description</h3>

<p>finds the apex of electrodermal activity eda signal 
within an optional time window
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_apex(eda_deriv, offset = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_apex_+3A_eda_deriv">eda_deriv</code></td>
<td>
<p>uses the eda derivative to find the apex</p>
</td></tr>
<tr><td><code id="get_apex_+3A_offset">offset</code></td>
<td>
<p>minimum number of downward measurements after the apex,
in order to be considered a peak (default 1 means no restrictions)</p>
</td></tr>
</table>

<hr>
<h2 id='get_decay_time'>Decay time</h2><span id='topic+get_decay_time'></span>

<h3>Description</h3>

<p>Get the time (in seconds) it takes to decay for each peak
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_decay_time(data, i_apex_with_decay)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_decay_time_+3A_data">data</code></td>
<td>
<p>df with peak info</p>
</td></tr>
<tr><td><code id="get_decay_time_+3A_i_apex_with_decay">i_apex_with_decay</code></td>
<td>
<p>indexes of relevant peaks</p>
</td></tr>
</table>

<hr>
<h2 id='get_derivative'>First derivative</h2><span id='topic+get_derivative'></span>

<h3>Description</h3>

<p>Get the first derivative.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_derivative(values)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_derivative_+3A_values">values</code></td>
<td>
<p>vector of numbers</p>
</td></tr>
</table>

<hr>
<h2 id='get_eda_deriv'>Electrodermal activity signal derivative</h2><span id='topic+get_eda_deriv'></span>

<h3>Description</h3>

<p>Finds the first derivatives of the eda signal
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_eda_deriv(eda)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_eda_deriv_+3A_eda">eda</code></td>
<td>
<p>eda vector</p>
</td></tr>
</table>

<hr>
<h2 id='get_half_amp'>Half peak amp</h2><span id='topic+get_half_amp'></span>

<h3>Description</h3>

<p>Get the amplitude value halfway between peak start and apex
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_half_amp(data, i)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_half_amp_+3A_data">data</code></td>
<td>
<p>df with peak info</p>
</td></tr>
<tr><td><code id="get_half_amp_+3A_i">i</code></td>
<td>
<p>apex index</p>
</td></tr>
</table>

<hr>
<h2 id='get_half_rise'>Half rise time</h2><span id='topic+get_half_rise'></span>

<h3>Description</h3>

<p>Get the time (in seconds) it takes to get to halfway the rise in a peak
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_half_rise(data, i_apex_with_decay)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_half_rise_+3A_data">data</code></td>
<td>
<p>df with peak info</p>
</td></tr>
<tr><td><code id="get_half_rise_+3A_i_apex_with_decay">i_apex_with_decay</code></td>
<td>
<p>relevant apices</p>
</td></tr>
</table>

<hr>
<h2 id='get_i_apex_with_decay'>Decaying peaks</h2><span id='topic+get_i_apex_with_decay'></span>

<h3>Description</h3>

<p>Identify peaks with a decent decay (at least half the amplitude of rise)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_i_apex_with_decay(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_i_apex_with_decay_+3A_data">data</code></td>
<td>
<p>df with peak info</p>
</td></tr>
</table>

<hr>
<h2 id='get_kernel'>SVM kernel</h2><span id='topic+get_kernel'></span>

<h3>Description</h3>

<p>Generate kernel needed for SVM
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_kernel(kernel_transformation, sigma, columns)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_kernel_+3A_kernel_transformation">kernel_transformation</code></td>
<td>
<p>Data matrix used to transform EDA features
into kernel values</p>
</td></tr>
<tr><td><code id="get_kernel_+3A_sigma">sigma</code></td>
<td>
<p>The inverse kernel width used by the kernel</p>
</td></tr>
<tr><td><code id="get_kernel_+3A_columns">columns</code></td>
<td>
<p>Features computed from EDA signal</p>
</td></tr>
</table>

<hr>
<h2 id='get_max_deriv'>Maximum derivative</h2><span id='topic+get_max_deriv'></span>

<h3>Description</h3>

<p>Get the largest slope before apex, interpolated to seconds
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_max_deriv(data, eda_deriv, sample_rate)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_max_deriv_+3A_data">data</code></td>
<td>
<p>df with info on the peaks</p>
</td></tr>
<tr><td><code id="get_max_deriv_+3A_eda_deriv">eda_deriv</code></td>
<td>
<p>derivative of the signal</p>
</td></tr>
<tr><td><code id="get_max_deriv_+3A_sample_rate">sample_rate</code></td>
<td>
<p>sample rate of the signal</p>
</td></tr>
</table>

<hr>
<h2 id='get_peak_end'>Peak end</h2><span id='topic+get_peak_end'></span>

<h3>Description</h3>

<p>Find the end of the peaks, with some restrictions on the search
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_peak_end(data, max_lookahead)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_peak_end_+3A_data">data</code></td>
<td>
<p>df with peak info</p>
</td></tr>
<tr><td><code id="get_peak_end_+3A_max_lookahead">max_lookahead</code></td>
<td>
<p>max distance from apex to search for end</p>
</td></tr>
</table>

<hr>
<h2 id='get_peak_end_times'>Peak end times</h2><span id='topic+get_peak_end_times'></span>

<h3>Description</h3>

<p>Get the end timstamp of the peaks
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_peak_end_times(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_peak_end_times_+3A_data">data</code></td>
<td>
<p>df with peak info</p>
</td></tr>
</table>

<hr>
<h2 id='get_peak_start'>Start of peaks</h2><span id='topic+get_peak_start'></span>

<h3>Description</h3>

<p>Provide info for each measurement whether it is the start of a peak (0 or 1)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_peak_start(data, sample_rate)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_peak_start_+3A_data">data</code></td>
<td>
<p>df with peak info</p>
</td></tr>
<tr><td><code id="get_peak_start_+3A_sample_rate">sample_rate</code></td>
<td>
<p>sample rate of the signal</p>
</td></tr>
</table>

<hr>
<h2 id='get_peak_start_times'>Peak start times</h2><span id='topic+get_peak_start_times'></span>

<h3>Description</h3>

<p>Get the start times of the peaks
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_peak_start_times(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_peak_start_times_+3A_data">data</code></td>
<td>
<p>df with peak info</p>
</td></tr>
</table>

<hr>
<h2 id='get_rise_time'>Rise time of peaks</h2><span id='topic+get_rise_time'></span>

<h3>Description</h3>

<p>Calculates the rise time of all peaks
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_rise_time(eda_deriv, apices, sample_rate, start_WT)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_rise_time_+3A_eda_deriv">eda_deriv</code></td>
<td>
<p>first derivative of signal</p>
</td></tr>
<tr><td><code id="get_rise_time_+3A_apices">apices</code></td>
<td>
<p>apex status per measurement (0 or 1)</p>
</td></tr>
<tr><td><code id="get_rise_time_+3A_sample_rate">sample_rate</code></td>
<td>
<p>sample rate of the signal</p>
</td></tr>
<tr><td><code id="get_rise_time_+3A_start_wt">start_WT</code></td>
<td>
<p>window within which to look for rise time (in seconds)</p>
</td></tr>
</table>

<hr>
<h2 id='get_SCR_width'>Peak width</h2><span id='topic+get_SCR_width'></span>

<h3>Description</h3>

<p>Get the width of the peak (in seconds, from halfway the rise until the end)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_SCR_width(data, i_apex_with_decay)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_SCR_width_+3A_data">data</code></td>
<td>
<p>df with peak info</p>
</td></tr>
<tr><td><code id="get_SCR_width_+3A_i_apex_with_decay">i_apex_with_decay</code></td>
<td>
<p>relevant apices</p>
</td></tr>
</table>

<hr>
<h2 id='get_second_derivative'>Second derivative</h2><span id='topic+get_second_derivative'></span>

<h3>Description</h3>

<p>Get the second derivative.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_second_derivative(values)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_second_derivative_+3A_values">values</code></td>
<td>
<p>vector of numbers</p>
</td></tr>
</table>

<hr>
<h2 id='ibi_analysis'>IBI analysis</h2><span id='topic+ibi_analysis'></span>

<h3>Description</h3>

<p>Analysis of interbeat interval (IBI)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ibi_analysis(IBI)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ibi_analysis_+3A_ibi">IBI</code></td>
<td>
<p>IBI data, component of object (the number of seconds since the start of the recording) read with <code><a href="#topic+read_e4">read_e4</a></code></p>
</td></tr>
</table>

<hr>
<h2 id='max_per_n'>Max value per segment of length n</h2><span id='topic+max_per_n'></span>

<h3>Description</h3>

<p>Give the maximum value of a vector of values per segment of length n.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>max_per_n(values, n, output_length)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="max_per_n_+3A_values">values</code></td>
<td>
<p>array of numbers</p>
</td></tr>
<tr><td><code id="max_per_n_+3A_n">n</code></td>
<td>
<p>length of each segment</p>
</td></tr>
<tr><td><code id="max_per_n_+3A_output_length">output_length</code></td>
<td>
<p>argument to adjust for final segment not being full</p>
</td></tr>
</table>

<hr>
<h2 id='multiclass_classifier_config'>Configuration of the SVM algorithm for ternary classification</h2><span id='topic+multiclass_classifier_config'></span>

<h3>Description</h3>

<p>Configuration of the SVM algorithm for ternary classification
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multiclass_classifier_config
</code></pre>


<h3>Format</h3>

<p>An object of class <code>list</code> of length 4.
</p>


<h3>Author(s)</h3>

<p>Sara Taylor <a href="mailto:sataylor@mit.edu">sataylor@mit.edu</a>
</p>


<h3>References</h3>

<p><a href="https://eda-explorer.media.mit.edu/">https://eda-explorer.media.mit.edu/</a>
</p>

<hr>
<h2 id='pad_e4'>pad_e4</h2><span id='topic+pad_e4'></span>

<h3>Description</h3>

<p>function to combine several e4 files, and sets the length of the x-axis
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pad_e4(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pad_e4_+3A_x">x</code></td>
<td>
<p>index of dataframe</p>
</td></tr>
</table>

<hr>
<h2 id='plot_artifacts'>Artifact plots</h2><span id='topic+plot_artifacts'></span>

<h3>Description</h3>

<p>Plot artifacts after eda_data is classified
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_artifacts(labels, eda_data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_artifacts_+3A_labels">labels</code></td>
<td>
<p>labels with artifact classification</p>
</td></tr>
<tr><td><code id="plot_artifacts_+3A_eda_data">eda_data</code></td>
<td>
<p>data upon which the labels are plotted</p>
</td></tr>
</table>

<hr>
<h2 id='predict_binary_classifier'>Binary classifiers</h2><span id='topic+predict_binary_classifier'></span>

<h3>Description</h3>

<p>Generate classifiers (artifact, no artifact)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predict_binary_classifier(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict_binary_classifier_+3A_data">data</code></td>
<td>
<p>features from EDA signal</p>
</td></tr>
</table>

<hr>
<h2 id='predict_multiclass_classifier'>Ternary classifiers</h2><span id='topic+predict_multiclass_classifier'></span>

<h3>Description</h3>

<p>Generate classifiers (artifact, unclear, no artifact)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predict_multiclass_classifier(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict_multiclass_classifier_+3A_data">data</code></td>
<td>
<p>features from EDA signal</p>
</td></tr>
</table>

<hr>
<h2 id='prepend_time_column'>prepend_time_column</h2><span id='topic+prepend_time_column'></span>

<h3>Description</h3>

<p>Column binds a time_column to the dataframe
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prepend_time_column(data, timestart, hertz, tz = Sys.timezone())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prepend_time_column_+3A_data">data</code></td>
<td>
<p>dataframe</p>
</td></tr>
<tr><td><code id="prepend_time_column_+3A_timestart">timestart</code></td>
<td>
<p>the start of the recording</p>
</td></tr>
<tr><td><code id="prepend_time_column_+3A_hertz">hertz</code></td>
<td>
<p>hertz in which the E4 data was recorded</p>
</td></tr>
<tr><td><code id="prepend_time_column_+3A_tz">tz</code></td>
<td>
<p>The timezone, defaults to user timezone</p>
</td></tr>
</table>

<hr>
<h2 id='print.e4data'>Show class of object</h2><span id='topic+print.e4data'></span>

<h3>Description</h3>

<p>Returns 'object of class'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'e4data'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.e4data_+3A_x">x</code></td>
<td>
<p>An e4 data list</p>
</td></tr>
<tr><td><code id="print.e4data_+3A_...">...</code></td>
<td>
<p>Further arguments currently ignored.</p>
</td></tr>
</table>

<hr>
<h2 id='process_eda'>Process EDA data</h2><span id='topic+process_eda'></span>

<h3>Description</h3>

<p>Process EDA data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>process_eda(eda_data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="process_eda_+3A_eda_data">eda_data</code></td>
<td>
<p>Data read with <code><a href="#topic+read_e4">read_e4</a></code></p>
</td></tr>
</table>

<hr>
<h2 id='rbind_e4'>Row-bind E4 datasets</h2><span id='topic+rbind_e4'></span>

<h3>Description</h3>

<p>Row-bind E4 datasets
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rbind_e4(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rbind_e4_+3A_data">data</code></td>
<td>
<p>An object read in by read_e4</p>
</td></tr>
</table>

<hr>
<h2 id='read_and_process_e4'>Read, process and feature extraction of E4 data</h2><span id='topic+read_and_process_e4'></span><span id='topic+process_e4'></span>

<h3>Description</h3>

<p>Reads the raw ZIP file using 'read_e4', 
performs analyses with 'ibi_analysis' and 'eda_analysis'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_and_process_e4(zipfile, tz = Sys.timezone())

process_e4(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_and_process_e4_+3A_zipfile">zipfile</code></td>
<td>
<p>zip file with e4 data to be read</p>
</td></tr>
<tr><td><code id="read_and_process_e4_+3A_tz">tz</code></td>
<td>
<p>timezone where data were recorded (default system timezone)</p>
</td></tr>
<tr><td><code id="read_and_process_e4_+3A_data">data</code></td>
<td>
<p>object from read_e4 function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object with processed data and analyses, object of class 'e4_analysis'.
</p>

<hr>
<h2 id='read_e4'>Read E4 data</h2><span id='topic+read_e4'></span>

<h3>Description</h3>

<p>Reads in E4 data as a list (with EDA, HR, Temp, ACC, BVP, IBI as dataframes), and prepends timecolumns
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_e4(zipfile = NULL, tz = Sys.timezone())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_e4_+3A_zipfile">zipfile</code></td>
<td>
<p>A zip file as exported by the instrument</p>
</td></tr>
<tr><td><code id="read_e4_+3A_tz">tz</code></td>
<td>
<p>The timezone used by the instrument (defaults to user timezone).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function reads in a zipfile as exported by Empatica Connect. Then it extracts the zipfiles in a temporary folder
and unzips the csv files in the temporary folder. 
</p>
<p>The EDA, HR, BVP, and TEMP csv files have a similar structure in which the
starting time of the recording is read from the first row of the file (in unix time). The frequency of the measurements is read from the 
second row of the recording (in Hz). Subsequently, the raw data is read from row three onward.
</p>
<p>The ACC csv file contain the acceleration of the Empatica E4 on the three axes x,y and z. The first row contains the starting
time of the recording in unix time. The second row contains the frequency of the measurements in Hz. 
Subsequently, the raw x, y, and z data is read from row three onward.
</p>
<p>The IBI file has a different structure, the starting time in unix is in the first row, first column.
The firs column contins the number of seconds past since the start of the recording. The number of seconds past since the 
start of the recording represent a heartbeat as derived from the algorithms from the photo plethysmogrophy sensor. The
second column contains the duration of the interval from one heartbeat to the next heartbeat.
</p>
<p>ACC.csv = 32 Hz
BVP.csv = 64 Hz
EDA.csv = 4 HZ
HR.csv = 1 HZ
TEMP.csv = 4 Hz
</p>
<p>Please also see the info.txt file provided in the zip file for additional information.
</p>
<p>The function returns an object of class &quot;e4_data&quot; with a prepended datetime columns
that defaults to user timezone. The object contains a list with dataframes from the physiological signals.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(wearables)
#read_e4()
</code></pre>

<hr>
<h2 id='remove_small_peaks'>Small peaks removal</h2><span id='topic+remove_small_peaks'></span>

<h3>Description</h3>

<p>Remove peaks with a small rise from start to apex are removed
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove_small_peaks(data, thres = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="remove_small_peaks_+3A_data">data</code></td>
<td>
<p>df with info on peaks</p>
</td></tr>
<tr><td><code id="remove_small_peaks_+3A_thres">thres</code></td>
<td>
<p>threshold of amplitude difference in order to be removed
(default 0 means no removals)</p>
</td></tr>
</table>

<hr>
<h2 id='upsample_data_to_8Hz'>Upsample EDA data to 8 Hz</h2><span id='topic+upsample_data_to_8Hz'></span>

<h3>Description</h3>

<p>Upsample EDA data to 8 Hz
</p>


<h3>Usage</h3>

<pre><code class='language-R'>upsample_data_to_8Hz(eda_data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="upsample_data_to_8Hz_+3A_eda_data">eda_data</code></td>
<td>
<p>Data read with <code><a href="#topic+read_e4">read_e4</a></code></p>
</td></tr>
</table>

<hr>
<h2 id='write_processed_e4'>Write CSV files of the output</h2><span id='topic+write_processed_e4'></span>

<h3>Description</h3>

<p>Slow!
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_processed_e4(obj, out_path = ".")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_processed_e4_+3A_obj">obj</code></td>
<td>
<p>e4 analysis object</p>
</td></tr>
<tr><td><code id="write_processed_e4_+3A_out_path">out_path</code></td>
<td>
<p>output folder</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
