<!DOCTYPE html><html lang="en"><head><title>Help for package condathis</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {condathis}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#condathis-package'><p>condathis: Run Any CLI Tool on a 'Conda' Environment</p></a></li>
<li><a href='#create_env'><p>Create a Conda Environment</p></a></li>
<li><a href='#env_exists'><p>Check If Environment Already exists</p></a></li>
<li><a href='#get_env_dir'><p>Retrieve Path To Environment</p></a></li>
<li><a href='#get_install_dir'><p>Retrieve and Create the <code>condathis</code> Data Directory</p></a></li>
<li><a href='#get_sys_arch'><p>Retrieve Operating System and CPU Architecture</p></a></li>
<li><a href='#install_micromamba'><p>Install Micromamba Binaries in the <code>condathis</code> Controlled Path</p></a></li>
<li><a href='#install_packages'><p>Install Packages in a Existing Conda Environment</p></a></li>
<li><a href='#list_envs'><p>List Installed Conda Environments</p></a></li>
<li><a href='#list_packages'><p>List Packages Installed in a Conda Environment</p></a></li>
<li><a href='#micromamba_bin_path'><p>Retrieve Path to the <code>micromamba</code> Executable</p></a></li>
<li><a href='#parse_output'><p>Parse the output of a Condathis command</p></a></li>
<li><a href='#remove_env'><p>Remove a Conda Environment</p></a></li>
<li><a href='#run'><p>Run Command-Line Tools in a Conda Environment</p></a></li>
<li><a href='#run_bin'><p>Run a Binary from a Conda Environment Without Environment Activation</p></a></li>
<li><a href='#with_sandbox_dir'><p>Execute Code in a Temporary Directory</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Run Any CLI Tool on a 'Conda' Environment</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Simplifies the execution of command line interface (CLI)
    tools within isolated and reproducible environments. It enables users
    to effortlessly manage 'Conda' environments, execute command line
    tools, handle dependencies, and ensure reproducibility in their data
    analysis workflows.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/luciorq/condathis">https://github.com/luciorq/condathis</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/luciorq/condathis/issues">https://github.com/luciorq/condathis/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, fs, jsonlite, processx, rlang, stringr, tibble, tools,
utils, withr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>curl, dplyr, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-01-23 18:36:55 UTC; luciorq</td>
</tr>
<tr>
<td>Author:</td>
<td>Lucio Queiroz <a href="https://orcid.org/0000-0002-6090-1834"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph],
  Claudio Zanettini <a href="https://orcid.org/0000-0001-5043-8033"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Lucio Queiroz &lt;luciorqueiroz@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-23 19:00:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='condathis-package'>condathis: Run Any CLI Tool on a 'Conda' Environment</h2><span id='topic+condathis'></span><span id='topic+condathis-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Simplifies the execution of command line interface (CLI) tools within isolated and reproducible environments. It enables users to effortlessly manage 'Conda' environments, execute command line tools, handle dependencies, and ensure reproducibility in their data analysis workflows.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Lucio Queiroz <a href="mailto:luciorqueiroz@gmail.com">luciorqueiroz@gmail.com</a> (<a href="https://orcid.org/0000-0002-6090-1834">ORCID</a>) [copyright holder]
</p>
<p>Authors:
</p>

<ul>
<li><p> Claudio Zanettini <a href="mailto:claudio.zanettini@gmail.com">claudio.zanettini@gmail.com</a> (<a href="https://orcid.org/0000-0001-5043-8033">ORCID</a>) [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/luciorq/condathis">https://github.com/luciorq/condathis</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/luciorq/condathis/issues">https://github.com/luciorq/condathis/issues</a>
</p>
</li></ul>


<hr>
<h2 id='create_env'>Create a Conda Environment</h2><span id='topic+create_env'></span>

<h3>Description</h3>

<p>Create Conda Environment with specific packages installed to be used by <code>run()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_env(
  packages = NULL,
  env_file = NULL,
  env_name = "condathis-env",
  channels = c("bioconda", "conda-forge"),
  method = c("native", "auto"),
  additional_channels = NULL,
  platform = NULL,
  verbose = "silent",
  overwrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_env_+3A_packages">packages</code></td>
<td>
<p>Character vector. Names of the packages, and
version strings if necessary, e.g. 'python=3.11'. The use of the <code>packages</code>
argument assumes that env_file is not used.</p>
</td></tr>
<tr><td><code id="create_env_+3A_env_file">env_file</code></td>
<td>
<p>Character. Path to the YAML file with Conda Environment
description. If this argument is used, the <code>packages</code> argument should not
be included in the command.</p>
</td></tr>
<tr><td><code id="create_env_+3A_env_name">env_name</code></td>
<td>
<p>Character. Name of the Conda environment where the packages
are going to be installed. Defaults to 'condathis-env'.</p>
</td></tr>
<tr><td><code id="create_env_+3A_channels">channels</code></td>
<td>
<p>Character vector. Names of the channels to be included.
By default 'c(&quot;bioconda&quot;, &quot;conda-forge&quot;)' are used for solving
dependencies.</p>
</td></tr>
<tr><td><code id="create_env_+3A_method">method</code></td>
<td>
<p>Character. Beckend method to run <code>micromamba</code>, the default is
&quot;auto&quot; running &quot;native&quot; with the <code>micromamba</code> binaries installed
by <code>condathis</code>.
This argument is <strong>soft deprecated</strong> as changing it don't really do anything.</p>
</td></tr>
<tr><td><code id="create_env_+3A_additional_channels">additional_channels</code></td>
<td>
<p>Character. Additional Channels to be added to the
default ones.</p>
</td></tr>
<tr><td><code id="create_env_+3A_platform">platform</code></td>
<td>
<p>Character. Platform to search for <code>packages</code>.
Defaults to <code>NULL</code> which will use the current platform.
E.g. &quot;linux-64&quot;, &quot;linux-32&quot;, &quot;osx-64&quot;, &quot;win-64&quot;, &quot;win-32&quot;, &quot;noarch&quot;.
Note: on Apple Silicon MacOS will use &quot;osx-64&quot; instead of &quot;osx-arm64&quot;
if Rosetta 2 is available and any of the <code>packages</code> is not available
for &quot;osx-arm64&quot;.</p>
</td></tr>
<tr><td><code id="create_env_+3A_verbose">verbose</code></td>
<td>
<p>Character string specifying the verbosity level of the function's output. Acceptable values are:
</p>

<ul>
<li> <p><strong>&quot;silent&quot;</strong>: Suppress all output from internal command-line tools. Equivalent to <code>FALSE</code>.
</p>
</li>
<li> <p><strong>&quot;cmd&quot;</strong>: Print the internal command(s) passed to the command-line tool.
</p>
</li>
<li> <p><strong>&quot;output&quot;</strong>: Print the standard output and error from the command-line tool to the screen. Note that the order of the standard output and error lines may not be correct, as standard output is typically buffered. If the standard output and/or error is redirected to a file or they are ignored, they will not be echoed.
</p>
</li>
<li> <p><strong>&quot;full&quot;</strong>: Print both the internal command(s) (<code>"cmd"</code>) and their standard output and error (<code>"output"</code>). Equivalent to <code>TRUE</code>.
Logical values <code>FALSE</code> and <code>TRUE</code> are also accepted for backward compatibility but are <em>soft-deprecated</em>. Please use <code>"silent"</code> and <code>"full"</code> respectively instead.
</p>
</li></ul>
</td></tr>
<tr><td><code id="create_env_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. Should environment always be overwritten?
Defaults to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>list</code> representing the result of the command
execution. Contains information about the standard output, standard error,
and exit status of the command.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
condathis::with_sandbox_dir({
  # Create a Conda environment and install the CLI `fastqc` in it.
  condathis::create_env(
    packages = "fastqc==0.12.1",
    env_name = "fastqc-env",
    verbose = "output"
  )
  #&gt; ! Environment fastqc-env succesfully created.
})

## End(Not run)
</code></pre>

<hr>
<h2 id='env_exists'>Check If Environment Already exists</h2><span id='topic+env_exists'></span>

<h3>Description</h3>

<p>This function checks whether a specified Conda environment already exists
in the available environments. It returns <code>TRUE</code> if the environment exists
and <code>FALSE</code> otherwise.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>env_exists(env_name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="env_exists_+3A_env_name">env_name</code></td>
<td>
<p>Character. Name of the Conda environment where the packages
are going to be installed. Defaults to 'condathis-env'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean. <code>TRUE</code> if the environment exists and <code>FALSE</code> otherwise.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
condathis::with_sandbox_dir({
  # Create the environment
  condathis::create_env(
    packages = "fastqc",
    env_name = "fastqc-env"
  )

  # Check if the environment exists
  condathis::env_exists("fastqc-env")
  #&gt; [1] TRUE

  # Check for a non-existent environment
  condathis::env_exists("non-existent-env")
  #&gt; [1] FALSE
})

## End(Not run)

</code></pre>

<hr>
<h2 id='get_env_dir'>Retrieve Path To Environment</h2><span id='topic+get_env_dir'></span>

<h3>Description</h3>

<p>Retrieve path to where environment should be created.
<strong>Note</strong>: It retrieves the Path even if the environment is <strong>not</strong> created yet.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_env_dir(env_name = "condathis-env")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_env_dir_+3A_env_name">env_name</code></td>
<td>
<p>Character. Name of the Conda environment where the packages
are going to be installed. Defaults to 'condathis-env'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string indicating the path where environments will be created.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>condathis::with_sandbox_dir({
  # Get the default environment directory
  condathis::get_env_dir()
  #&gt; "/path/to/condathis/envs/condathis-env"

  # Get the directory for a specific environment
  condathis::get_env_dir("my-env")
  #&gt; "/path/to/condathis/envs/my-env"
})

</code></pre>

<hr>
<h2 id='get_install_dir'>Retrieve and Create the <code>condathis</code> Data Directory</h2><span id='topic+get_install_dir'></span>

<h3>Description</h3>

<p>Retrieves the installation directory for the <code>condathis</code> package, creating it if it does not exist.
This function ensures that the package data directory complies with the <a href="https://specifications.freedesktop.org/basedir-spec/latest/">freedesktop's XDG Base Directory Specification</a>.
The base path can be controlled by the <code>XDG_DATA_HOME</code> environment variable.
Additionally, on Windows, <code style="white-space: pre;">&#8288;%LOCALAPPDATA%&#8288;</code> is also accepted as the base installation directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_install_dir()
</code></pre>


<h3>Details</h3>

<p>If the directory does not exist, it will be created. On macOS,
special handling is applied to avoid spaces in the path,
as <code style="white-space: pre;">&#8288;micromamba run&#8288;</code> fails if there are spaces in the path (e.g., in <code style="white-space: pre;">&#8288;~/Library/Application Support/condathis&#8288;</code>).
Therefore, Unix-style paths are used on macOS.
</p>


<h3>Value</h3>

<p>A character string representing the normalized, real path to the <code>condathis</code> data directory.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>condathis::with_sandbox_dir({
  condathis::get_install_dir()
  #&gt; /home/username/.local/share/condathis
})

</code></pre>

<hr>
<h2 id='get_sys_arch'>Retrieve Operating System and CPU Architecture</h2><span id='topic+get_sys_arch'></span>

<h3>Description</h3>

<p>This function retrieves the operating system (OS) name and the CPU architecture
of the current system. The output combines the OS and CPU architecture into
a single string in the format <code>"&lt;OS&gt;-&lt;Architecture&gt;"</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_sys_arch()
</code></pre>


<h3>Value</h3>

<p>A character string indicating the operating system and CPU architecture,
e.g., <code>"Darwin-x86_64"</code> or <code>"Linux-aarch64"</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Retrieve the system architecture
condathis::get_sys_arch()
#&gt; [1] "Darwin-x86_64"

</code></pre>

<hr>
<h2 id='install_micromamba'>Install Micromamba Binaries in the <code>condathis</code> Controlled Path</h2><span id='topic+install_micromamba'></span>

<h3>Description</h3>

<p>Downloads and installs the Micromamba binaries in the path managed by the <code>condathis</code> package.
Micromamba is a lightweight implementation of the Conda package manager and provides an efficient way
to create and manage conda environments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>install_micromamba(
  micromamba_version = "2.0.5-0",
  timeout_limit = 3600,
  download_method = "auto",
  force = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="install_micromamba_+3A_micromamba_version">micromamba_version</code></td>
<td>
<p>Character string specifying the version of Micromamba to download.
Defaults to <code>"2.0.4-0"</code>.</p>
</td></tr>
<tr><td><code id="install_micromamba_+3A_timeout_limit">timeout_limit</code></td>
<td>
<p>Numeric value specifying the timeout limit for downloading the Micromamba
binaries, in seconds. Defaults to <code>3600</code> seconds (1 hour).</p>
</td></tr>
<tr><td><code id="install_micromamba_+3A_download_method">download_method</code></td>
<td>
<p>Character string passed to the <code>method</code> argument of
the <code>utils::download.file()</code> function used for downloading the binaries.
Defaults to <code>"auto"</code>.</p>
</td></tr>
<tr><td><code id="install_micromamba_+3A_force">force</code></td>
<td>
<p>Logical. If set to TRUE, the download and installation of the
Micromamba binaries will be forced, even if they already exist in the
system or <code>condathis</code> controlled path. Defaults to FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function checks if Micromamba is already installed in the <code>condathis</code> controlled path.
If not, it downloads the specified version from the official GitHub releases and installs it.
On Windows, it ensures the binary is downloaded correctly by setting the download mode to <code>"wb"</code>.
If the download fails, appropriate error messages are displayed.
</p>


<h3>Value</h3>

<p>Invisibly returns the path to the installed Micromamba binary.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
condathis::with_sandbox_dir({
  # Install the default version of Micromamba
  condathis::install_micromamba()

  # Install a specific version of Micromamba
  condathis::install_micromamba(micromamba_version = "2.0.2-2")

  # Force reinstallation of Micromamba
  condathis::install_micromamba(force = TRUE)
})

## End(Not run)

</code></pre>

<hr>
<h2 id='install_packages'>Install Packages in a Existing Conda Environment</h2><span id='topic+install_packages'></span>

<h3>Description</h3>

<p>Install Packages in a Existing Conda Environment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>install_packages(
  packages,
  env_name = "condathis-env",
  channels = c("bioconda", "conda-forge"),
  additional_channels = NULL,
  verbose = "silent"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="install_packages_+3A_packages">packages</code></td>
<td>
<p>Character vector with the names of the packages and
version strings if necessary.</p>
</td></tr>
<tr><td><code id="install_packages_+3A_env_name">env_name</code></td>
<td>
<p>Name of the Conda environment where the packages are
going to be installed. Defaults to 'condathis-env'.</p>
</td></tr>
<tr><td><code id="install_packages_+3A_channels">channels</code></td>
<td>
<p>Character vector. Names of the channels to be included.
By default 'c(&quot;bioconda&quot;, &quot;conda-forge&quot;)' are used for solving
dependencies.</p>
</td></tr>
<tr><td><code id="install_packages_+3A_additional_channels">additional_channels</code></td>
<td>
<p>Character. Additional Channels to be added to the
default ones.</p>
</td></tr>
<tr><td><code id="install_packages_+3A_verbose">verbose</code></td>
<td>
<p>Character string specifying the verbosity level of the function's output. Acceptable values are:
</p>

<ul>
<li> <p><strong>&quot;silent&quot;</strong>: Suppress all output from internal command-line tools. Equivalent to <code>FALSE</code>.
</p>
</li>
<li> <p><strong>&quot;cmd&quot;</strong>: Print the internal command(s) passed to the command-line tool.
</p>
</li>
<li> <p><strong>&quot;output&quot;</strong>: Print the standard output and error from the command-line tool to the screen. Note that the order of the standard output and error lines may not be correct, as standard output is typically buffered. If the standard output and/or error is redirected to a file or they are ignored, they will not be echoed.
</p>
</li>
<li> <p><strong>&quot;full&quot;</strong>: Print both the internal command(s) (<code>"cmd"</code>) and their standard output and error (<code>"output"</code>). Equivalent to <code>TRUE</code>.
Logical values <code>FALSE</code> and <code>TRUE</code> are also accepted for backward compatibility but are <em>soft-deprecated</em>. Please use <code>"silent"</code> and <code>"full"</code> respectively instead.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>list</code> representing the result of the command
execution. Contains information about the standard output, standard error,
and exit status of the command.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
condathis::with_sandbox_dir({
  condathis::create_env(
    packages = "fastqc",
    env_name = "fastqc-env"
  )
  # Install the package `python` in the `fastqc-env` environment.
  # It is not recommended to install multiple packages in the same environment,
  #  # as it defeats the purpose of isolation provided by separate environments.
  condathis::install_packages(packages = "python", env_name = "fastqc-env")
})

## End(Not run)

</code></pre>

<hr>
<h2 id='list_envs'>List Installed Conda Environments</h2><span id='topic+list_envs'></span>

<h3>Description</h3>

<p>This function retrieves a list of Conda environments installed in the Condathis
environment directory. The returned value excludes any environments unrelated
to Condathis, such as the base Conda environment itself.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_envs(verbose = "silent")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="list_envs_+3A_verbose">verbose</code></td>
<td>
<p>A character string indicating the verbosity level for the command.
Defaults to <code>"silent"</code>. Options include <code>"silent"</code>, <code>"minimal"</code>, and <code>"verbose"</code>.
See <code><a href="#topic+run">run()</a></code> for details.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector containing the names of installed Conda environments.
If the command fails, the function returns the process exit status as a numeric value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
condathis::with_sandbox_dir({
  # Create environments
  condathis::create_env(
    packages = "fastqc",
    env_name = "fastqc-env"
  )
  condathis::create_env(
    packages = "python",
    env_name = "python-env"
  )

  # List environments
  condathis::list_envs()
  #&gt; [1] "fastqc-env" "python-env"
})

## End(Not run)

</code></pre>

<hr>
<h2 id='list_packages'>List Packages Installed in a Conda Environment</h2><span id='topic+list_packages'></span>

<h3>Description</h3>

<p>This function retrieves a list of all packages installed in the specified Conda
environment. The result is returned as a tibble with detailed information about
each package, including its name, version, and source details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_packages(env_name = "condathis-env", verbose = "silent")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="list_packages_+3A_env_name">env_name</code></td>
<td>
<p>Character. The name of the Conda environment where the tool will be run. Defaults to <code>"condathis-env"</code>.
If the specified environment does not exist, it will be created automatically using <code>create_env()</code>.</p>
</td></tr>
<tr><td><code id="list_packages_+3A_verbose">verbose</code></td>
<td>
<p>Character string specifying the verbosity level of the function's output. Acceptable values are:
</p>

<ul>
<li> <p><strong>&quot;silent&quot;</strong>: Suppress all output from internal command-line tools. Equivalent to <code>FALSE</code>.
</p>
</li>
<li> <p><strong>&quot;cmd&quot;</strong>: Print the internal command(s) passed to the command-line tool.
</p>
</li>
<li> <p><strong>&quot;output&quot;</strong>: Print the standard output and error from the command-line tool to the screen. Note that the order of the standard output and error lines may not be correct, as standard output is typically buffered. If the standard output and/or error is redirected to a file or they are ignored, they will not be echoed.
</p>
</li>
<li> <p><strong>&quot;full&quot;</strong>: Print both the internal command(s) (<code>"cmd"</code>) and their standard output and error (<code>"output"</code>). Equivalent to <code>TRUE</code>.
Logical values <code>FALSE</code> and <code>TRUE</code> are also accepted for backward compatibility but are <em>soft-deprecated</em>. Please use <code>"silent"</code> and <code>"full"</code> respectively instead.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble containing all the packages installed in the specified environment,
with the following columns:
</p>

<dl>
<dt>base_url</dt><dd><p>The base URL of the package source.</p>
</dd>
<dt>build_number</dt><dd><p>The build number of the package.</p>
</dd>
<dt>build_string</dt><dd><p>The build string describing the package build details.</p>
</dd>
<dt>channel</dt><dd><p>The channel from which the package was installed.</p>
</dd>
<dt>dist_name</dt><dd><p>The distribution name of the package.</p>
</dd>
<dt>name</dt><dd><p>The name of the package.</p>
</dd>
<dt>platform</dt><dd><p>The platform for which the package is built.</p>
</dd>
<dt>version</dt><dd><p>The version of the package.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
condathis::with_sandbox_dir({
  # Creates a Conda environment with the CLI `fastqc`
  condathis::create_env(
    packages = "fastqc",
    env_name = "fastqc-env"
  )
  # Lists the packages in env `fastqc-env`
  dat &lt;- condathis::list_packages("fastqc-env")
  dim(dat)
  #&gt; [1] 34  8
})

## End(Not run)
</code></pre>

<hr>
<h2 id='micromamba_bin_path'>Retrieve Path to the <code>micromamba</code> Executable</h2><span id='topic+micromamba_bin_path'></span>

<h3>Description</h3>

<p>This function returns the file path to the <code>micromamba</code> executable managed
by the <code>condathis</code> package. The path is determined based on the system's
operating system and architecture.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>micromamba_bin_path()
</code></pre>


<h3>Value</h3>

<p>A character string representing the full path to the <code>micromamba</code> executable.
The path differs depending on the operating system:
</p>

<dl>
<dt>Windows</dt><dd><p><code style="white-space: pre;">&#8288;&lt;install_dir&gt;/micromamba/Library/bin/micromamba.exe&#8288;</code></p>
</dd>
<dt>Other OS (e.g., Linux, macOS)</dt><dd><p><code style="white-space: pre;">&#8288;&lt;install_dir&gt;/micromamba/bin/micromamba&#8288;</code></p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>condathis::with_sandbox_dir({
  # Retrieve the path to where micromamba executable is searched
  micromamba_path &lt;- condathis::micromamba_bin_path()
  print(micromamba_path)
})

</code></pre>

<hr>
<h2 id='parse_output'>Parse the output of a Condathis command</h2><span id='topic+parse_output'></span>

<h3>Description</h3>

<p>This function processes the result of a <code><a href="#topic+run">run()</a></code> call by parsing
the specified output stream (<code>stdout</code> or <code>stderr</code>) into individual, trimmed lines.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_output(res, stream = c("stdout", "stderr"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="parse_output_+3A_res">res</code></td>
<td>
<p>A list containing the result of <code><a href="#topic+run">run()</a></code>, typically including
<code>stdout</code> and <code>stderr</code> as character strings.</p>
</td></tr>
<tr><td><code id="parse_output_+3A_stream">stream</code></td>
<td>
<p>A character string specifying the data stream to parse. Must be either
<code>"stdout"</code> or <code>"stderr"</code>. Defaults to <code>"stdout"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector where each element is a trimmed line from the specified stream.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example result object from condathis::run()
res &lt;- list(
  stdout = "line1\nline2\nline3\n",
  stderr = "error1\nerror2\n"
)

# Parse the standard output
parse_output(res, stream = "stdout")

# Parse the standard error
parse_output(res, stream = "stderr")

</code></pre>

<hr>
<h2 id='remove_env'>Remove a Conda Environment</h2><span id='topic+remove_env'></span>

<h3>Description</h3>

<p>Remove a Conda environment previously created by <code>create_env()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove_env(env_name = "condathis-env", verbose = "silent")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="remove_env_+3A_env_name">env_name</code></td>
<td>
<p>Character. Name of the Conda environment where the packages
are going to be installed. Defaults to 'condathis-env'.</p>
</td></tr>
<tr><td><code id="remove_env_+3A_verbose">verbose</code></td>
<td>
<p>Character string specifying the verbosity level of the function's output. Acceptable values are:
</p>

<ul>
<li> <p><strong>&quot;silent&quot;</strong>: Suppress all output from internal command-line tools. Equivalent to <code>FALSE</code>.
</p>
</li>
<li> <p><strong>&quot;cmd&quot;</strong>: Print the internal command(s) passed to the command-line tool.
</p>
</li>
<li> <p><strong>&quot;output&quot;</strong>: Print the standard output and error from the command-line tool to the screen. Note that the order of the standard output and error lines may not be correct, as standard output is typically buffered. If the standard output and/or error is redirected to a file or they are ignored, they will not be echoed.
</p>
</li>
<li> <p><strong>&quot;full&quot;</strong>: Print both the internal command(s) (<code>"cmd"</code>) and their standard output and error (<code>"output"</code>). Equivalent to <code>TRUE</code>.
Logical values <code>FALSE</code> and <code>TRUE</code> are also accepted for backward compatibility but are <em>soft-deprecated</em>. Please use <code>"silent"</code> and <code>"full"</code> respectively instead.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>list</code> representing the result of the command
execution. Contains information about the standard output, standard error,
and exit status of the command.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
condathis::with_sandbox_dir({
  condathis::create_env(
    packages = "fastqc",
    env_name = "fastqc-env"
  )
  condathis::remove_env(env_name = "fastqc-env")
})

## End(Not run)

</code></pre>

<hr>
<h2 id='run'>Run Command-Line Tools in a Conda Environment</h2><span id='topic+run'></span>

<h3>Description</h3>

<p>This function allows the execution of command-line tools within a specified Conda environment.
It runs the provided command in the designated Conda environment using the Micromamba binaries managed by the <code>condathis</code> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run(
  cmd,
  ...,
  env_name = "condathis-env",
  method = c("native", "auto"),
  verbose = c("silent", "cmd", "output", "full", FALSE, TRUE),
  error = c("cancel", "continue"),
  stdout = "|",
  stderr = "|"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_+3A_cmd">cmd</code></td>
<td>
<p>Character. The main command to be executed in the Conda environment.</p>
</td></tr>
<tr><td><code id="run_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to the command. These arguments will be passed directly to the command executed in the Conda environment.
File paths should not contain special characters or spaces.</p>
</td></tr>
<tr><td><code id="run_+3A_env_name">env_name</code></td>
<td>
<p>Character. The name of the Conda environment where the tool will be run. Defaults to <code>"condathis-env"</code>.
If the specified environment does not exist, it will be created automatically using <code>create_env()</code>.</p>
</td></tr>
<tr><td><code id="run_+3A_method">method</code></td>
<td>
<p>Character string. The method to use for running the command. Options are <code>"native"</code>, <code>"auto"</code>. Defaults to <code>"native"</code>.
This argument is <strong>soft deprecated</strong> as changing it don't really do anything.</p>
</td></tr>
<tr><td><code id="run_+3A_verbose">verbose</code></td>
<td>
<p>Character string specifying the verbosity level of the function's output. Acceptable values are:
</p>

<ul>
<li> <p><strong>&quot;silent&quot;</strong>: Suppress all output from internal command-line tools. Equivalent to <code>FALSE</code>.
</p>
</li>
<li> <p><strong>&quot;cmd&quot;</strong>: Print the internal command(s) passed to the command-line tool.
</p>
</li>
<li> <p><strong>&quot;output&quot;</strong>: Print the standard output and error from the command-line tool to the screen. Note that the order of the standard output and error lines may not be correct, as standard output is typically buffered. If the standard output and/or error is redirected to a file or they are ignored, they will not be echoed.
</p>
</li>
<li> <p><strong>&quot;full&quot;</strong>: Print both the internal command(s) (<code>"cmd"</code>) and their standard output and error (<code>"output"</code>). Equivalent to <code>TRUE</code>.
Logical values <code>FALSE</code> and <code>TRUE</code> are also accepted for backward compatibility but are <em>soft-deprecated</em>. Please use <code>"silent"</code> and <code>"full"</code> respectively instead.
</p>
</li></ul>
</td></tr>
<tr><td><code id="run_+3A_error">error</code></td>
<td>
<p>Character string. How to handle errors. Options are <code>"cancel"</code> or <code>"continue"</code>. Defaults to <code>"cancel"</code>.</p>
</td></tr>
<tr><td><code id="run_+3A_stdout">stdout</code></td>
<td>
<p>Default: &quot;|&quot; keep stdout to the R object
returned by <code>run()</code>.
A character string can be used to define a file path to be used as standard output. e.g: &quot;output.txt&quot;.</p>
</td></tr>
<tr><td><code id="run_+3A_stderr">stderr</code></td>
<td>
<p>Default: &quot;|&quot; keep stderr to the R object
returned by <code>run()</code>.
A character string can be used to define a file path to be used as standard error. e.g: &quot;error.txt&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>run()</code> function provides a flexible way to execute command-line tools within Conda environments.
This is particularly useful for reproducible research and ensuring that specific versions of tools are used.
</p>


<h3>Value</h3>

<p>An object of class <code>list</code> representing the result of the command execution.
Contains information about the standard output, standard error, and exit status of the command.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+install_micromamba">install_micromamba</a></code>, <code><a href="#topic+create_env">create_env</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
condathis::with_sandbox_dir({
  ## Create env
  create_env("samtools", env_name = "samtools-env")

  ## Run a command in a specific Conda environment
  samtools_res &lt;- run("samtools", "view", fs::path_package("condathis", "extdata", "example.bam"),
    env_name = "samtools-env"
  )
  parse_output(samtools_res)[1]
  #&gt; [1] "SOLEXA-1GA-1_6_FC20ET7:6:92:473:531\t0\tchr1\t10156..."
})

## End(Not run)

</code></pre>

<hr>
<h2 id='run_bin'>Run a Binary from a Conda Environment Without Environment Activation</h2><span id='topic+run_bin'></span>

<h3>Description</h3>

<p>Executes a binary command from a specified Conda environment without
activating the environment or using its environment variables.
This function temporarily clears Conda and Mamba-related environment
variables to prevent interference, ensuring that the command runs in a clean
environment.
Usually this is not what the user wants as this mode of execution does not
load environment variables and scripts defined in the environment
<code>activate.d</code>, check <code><a href="#topic+run">run()</a></code> for the stable function to use.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_bin(
  cmd,
  ...,
  env_name = "condathis-env",
  verbose = "silent",
  error = c("cancel", "continue"),
  stdout = "|",
  stderr = "|"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_bin_+3A_cmd">cmd</code></td>
<td>
<p>Character. The main command to be executed in the Conda environment.</p>
</td></tr>
<tr><td><code id="run_bin_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to the command. These arguments will be passed directly to the command executed in the Conda environment.
File paths should not contain special characters or spaces.</p>
</td></tr>
<tr><td><code id="run_bin_+3A_env_name">env_name</code></td>
<td>
<p>Character. The name of the Conda environment where the tool will be run. Defaults to <code>"condathis-env"</code>.
If the specified environment does not exist, it will be created automatically using <code>create_env()</code>.</p>
</td></tr>
<tr><td><code id="run_bin_+3A_verbose">verbose</code></td>
<td>
<p>Character string specifying the verbosity level of the function's output. Acceptable values are:
</p>

<ul>
<li> <p><strong>&quot;silent&quot;</strong>: Suppress all output from internal command-line tools. Equivalent to <code>FALSE</code>.
</p>
</li>
<li> <p><strong>&quot;cmd&quot;</strong>: Print the internal command(s) passed to the command-line tool.
</p>
</li>
<li> <p><strong>&quot;output&quot;</strong>: Print the standard output and error from the command-line tool to the screen. Note that the order of the standard output and error lines may not be correct, as standard output is typically buffered. If the standard output and/or error is redirected to a file or they are ignored, they will not be echoed.
</p>
</li>
<li> <p><strong>&quot;full&quot;</strong>: Print both the internal command(s) (<code>"cmd"</code>) and their standard output and error (<code>"output"</code>). Equivalent to <code>TRUE</code>.
Logical values <code>FALSE</code> and <code>TRUE</code> are also accepted for backward compatibility but are <em>soft-deprecated</em>. Please use <code>"silent"</code> and <code>"full"</code> respectively instead.
</p>
</li></ul>
</td></tr>
<tr><td><code id="run_bin_+3A_error">error</code></td>
<td>
<p>Character string. How to handle errors. Options are <code>"cancel"</code> or <code>"continue"</code>. Defaults to <code>"cancel"</code>.</p>
</td></tr>
<tr><td><code id="run_bin_+3A_stdout">stdout</code></td>
<td>
<p>Default: &quot;|&quot; keep stdout to the R object
returned by <code>run()</code>.
A character string can be used to define a file path to be used as standard output. e.g: &quot;output.txt&quot;.</p>
</td></tr>
<tr><td><code id="run_bin_+3A_stderr">stderr</code></td>
<td>
<p>Default: &quot;|&quot; keep stderr to the R object
returned by <code>run()</code>.
A character string can be used to define a file path to be used as standard error. e.g: &quot;error.txt&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>list</code> representing the result of the command
execution. Contains information about the standard output, standard error,
and exit status of the command.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
condathis::with_sandbox_dir({
  # Example assumes that 'my-env' exists and contains 'python'
  # Run 'python' with a script in 'my-env' environment
  condathis::run_bin(
    "python", "-c", "import sys; print(sys.version)",
    env_name = "my-env",
    verbose = "output"
  )

  # Run 'ls' command with additional arguments
  condathis::run_bin("ls", "-la", env_name = "my-env")
})

## End(Not run)

</code></pre>

<hr>
<h2 id='with_sandbox_dir'>Execute Code in a Temporary Directory</h2><span id='topic+with_sandbox_dir'></span>

<h3>Description</h3>

<p>Runs user-defined code inside a temporary directory, setting up a temporary
working environment. This function is intended for use in examples and tests
and ensures that no data is written to the user's file space.
Environment variables such as <code>HOME</code>, <code>APPDATA</code>, <code>R_USER_DATA_DIR</code>,
<code>XDG_DATA_HOME</code>, <code>LOCALAPPDATA</code>, and <code>USERPROFILE</code> are redirected to
temporary directories.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>with_sandbox_dir(code, .local_envir = base::parent.frame())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="with_sandbox_dir_+3A_code">code</code></td>
<td>
<p><a href="base.html#topic+expression">expression</a>
An expression containing the user-defined code to be executed in the
temporary environment.</p>
</td></tr>
<tr><td><code id="with_sandbox_dir_+3A_.local_envir">.local_envir</code></td>
<td>
<p><a href="base.html#topic+environment">environment</a>
The environment to use for scoping.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is not designed for direct use by package users. It is primarily
used to create an isolated environment during examples and tests. The temporary
directories are created automatically and cleaned up after execution.
</p>


<h3>Value</h3>

<p>Returns <code>NULL</code> invisibly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>condathis::with_sandbox_dir(print(fs::path_home()))
condathis::with_sandbox_dir(print(tools::R_user_dir("condathis")))

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
