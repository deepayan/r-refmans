<!DOCTYPE html><html lang="en-GB"><head><title>Help for package DTSg</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {DTSg}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#aggregate.DTSg'><p>Aggregate values</p></a></li>
<li><a href='#alter.DTSg'><p>Alter time series</p></a></li>
<li><a href='#clone.DTSg'><p>Clone object</p></a></li>
<li><a href='#colapply.DTSg'><p>Apply function column-wise</p></a></li>
<li><a href='#cols.DTSg'><p>Get column names</p></a></li>
<li><a href='#DTSg'><p>DTSg class</p></a></li>
<li><a href='#flow'><p>Daily river flows</p></a></li>
<li><a href='#getCol.DTSg'><p>Get column vector</p></a></li>
<li><a href='#interpolateLinear'><p>Linear interpolation</p></a></li>
<li><a href='#merge.DTSg'><p>Merge two objects</p></a></li>
<li><a href='#nas.DTSg'><p>List missing values</p></a></li>
<li><a href='#plot.DTSg'><p>Plot time series data</p></a></li>
<li><a href='#print.DTSg'><p>Print object</p></a></li>
<li><a href='#refresh.DTSg'><p>Object integrity</p></a></li>
<li><a href='#rollapply.DTSg'><p>Rolling window function</p></a></li>
<li><a href='#rollback'><p>Rollback of months</p></a></li>
<li><a href='#rowaggregate.DTSg'><p>Aggregate values row-wise</p></a></li>
<li><a href='#rowbind.DTSg'><p>Combine rows</p></a></li>
<li><a href='#S3WrapperGenerator'><p>S3 wrapper method generator</p></a></li>
<li><a href='#setColNames.DTSg'><p>Set column names</p></a></li>
<li><a href='#setCols.DTSg'><p>Set column values</p></a></li>
<li><a href='#subset.DTSg'><p>Subset time series data</p></a></li>
<li><a href='#summary.DTSg'><p>Summarise time series data</p></a></li>
<li><a href='#TALFs'><p>Temporal Aggregation Level Functions (TALFs)</p></a></li>
<li><a href='#values.DTSg'><p>Get values</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>A Class for Working with Time Series Data Based on 'data.table'
and 'R6' with Largely Optional Reference Semantics</td>
</tr>
<tr>
<td>Version:</td>
<td>2.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Basic time series functionalities such as listing of missing
    values, application of arbitrary aggregation as well as rolling (asymmetric)
    window functions and automatic detection of periodicity. As it is mainly
    based on 'data.table', it is fast and (in combination with the 'R6' package)
    offers reference semantics. In addition to its native R6 interface, it
    provides an S3 interface for those who prefer the latter. Finally yet
    importantly, its functional approach allows for incorporating
    functionalities from many other packages.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://gisler.github.io/DTSg/">https://gisler.github.io/DTSg/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/gisler/DTSg/issues">https://github.com/gisler/DTSg/issues</a></td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate, data.table, methods, R6, timechange</td>
</tr>
<tr>
<td>Suggests:</td>
<td>dygraphs, fasttime, knitr, RColorBrewer, RcppCCTZ, rmarkdown,
runner (&ge; 0.3.5), tinytest, units</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-01-20 21:29:31 UTC; ghepp</td>
</tr>
<tr>
<td>Author:</td>
<td>Gerold Hepp [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Gerold Hepp &lt;gisler@hepp.cc&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-20 23:50:14 UTC</td>
</tr>
</table>
<hr>
<h2 id='aggregate.DTSg'>Aggregate values</h2><span id='topic+aggregate.DTSg'></span><span id='topic+aggregate'></span>

<h3>Description</h3>

<p>Applies a temporal aggregation level function to the <em>.dateTime</em> column of a
<code><a href="#topic+DTSg">DTSg</a></code> object and aggregates its values column-wise to the function's
temporal aggregation level utilising one or more provided summary functions.
Additionally, it sets the object's <code><a href="#topic+DTSg">aggregated</a></code> field to <code>TRUE</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DTSg'
aggregate(
  x,
  funby,
  fun,
  ...,
  cols = self$cols(class = "numeric"),
  n = FALSE,
  ignoreDST = FALSE,
  multiplier = 1L,
  funbyHelpers = NULL,
  funbyApproach = self$funbyApproach,
  clone = getOption("DTSgClone")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="aggregate.DTSg_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+DTSg">DTSg</a></code> object (S3 method only).</p>
</td></tr>
<tr><td><code id="aggregate.DTSg_+3A_funby">funby</code></td>
<td>
<p>One of the temporal aggregation level functions described in
<code><a href="#topic+TALFs">TALFs</a></code> or a user defined temporal aggregation level function. See
corresponding section for further information.</p>
</td></tr>
<tr><td><code id="aggregate.DTSg_+3A_fun">fun</code></td>
<td>
<p>A summary function, (named) <code><a href="base.html#topic+list">list</a></code> of summary functions or
(named) character vector specifying summary functions applied column-wise
to all the values of the same temporal aggregation level. The return
value(s) must be of length one. See corresponding section for further
information.</p>
</td></tr>
<tr><td><code id="aggregate.DTSg_+3A_...">...</code></td>
<td>
<p>Further arguments passed on to <code>fun</code>.</p>
</td></tr>
<tr><td><code id="aggregate.DTSg_+3A_cols">cols</code></td>
<td>
<p>A character vector specifying the columns to aggregate. Another
possibility is a character string containing either comma separated column
names, for example, <code>"x,y,z"</code>, or the start and end column separated by a
colon, for example, <code>"x:z"</code>.</p>
</td></tr>
<tr><td><code id="aggregate.DTSg_+3A_n">n</code></td>
<td>
<p>A logical specifying if a column named <code>.n</code> giving the number of
values per temporal aggregation level shall be added. See corresponding
section for further information.</p>
</td></tr>
<tr><td><code id="aggregate.DTSg_+3A_ignoredst">ignoreDST</code></td>
<td>
<p>A logical specifying if day saving time shall be ignored
by <code>funby</code>. See corresponding section for further information.</p>
</td></tr>
<tr><td><code id="aggregate.DTSg_+3A_multiplier">multiplier</code></td>
<td>
<p>A positive integerish value &ldquo;multiplying&rdquo; the
temporal aggregation level of certain <code><a href="#topic+TALFs">TALFs</a></code>. See corresponding section
for further information.</p>
</td></tr>
<tr><td><code id="aggregate.DTSg_+3A_funbyhelpers">funbyHelpers</code></td>
<td>
<p>An optional <code><a href="base.html#topic+list">list</a></code> with helper data passed on to
<code>funby</code>. See corresponding section for further information.</p>
</td></tr>
<tr><td><code id="aggregate.DTSg_+3A_funbyapproach">funbyApproach</code></td>
<td>
<p>A character string specifying the flavour of the applied
temporal aggregation level function. Either <code>"timechange"</code>, which utilises
<code><a href="timechange.html#topic+time_round">timechange::time_floor</a></code>, or <code>"base"</code>, which utilises <code><a href="base.html#topic+as.POSIXct">as.POSIXct</a></code>, or
<code>"fasttime"</code>, which utilises <code><a href="fasttime.html#topic+fastPOSIXct">fasttime::fastPOSIXct</a></code>, or <code>"RcppCCTZ"</code>,
which utilises <code><a href="RcppCCTZ.html#topic+parseDatetime">RcppCCTZ::parseDatetime</a></code> as the main function for
transforming timestamps.</p>
</td></tr>
<tr><td><code id="aggregate.DTSg_+3A_clone">clone</code></td>
<td>
<p>A logical specifying if the object shall be modified in place or
if a deep clone (copy) shall be made beforehand.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an aggregated <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>


<h3>User defined TALFs, TALFs helper data and multiplier</h3>

<p>User defined temporal aggregation level functions have to return a
<code><a href="base.html#topic+POSIXct">POSIXct</a></code> vector of the same length as the time series and accept two
arguments: a <code><a href="base.html#topic+POSIXct">POSIXct</a></code> vector as its first and a <code><a href="base.html#topic+list">list</a></code> with helper data
as its second. The default elements of this <code><a href="base.html#topic+list">list</a></code> are as follows:
</p>

<ul>
<li> <p><em>timezone:</em> Same as the <code><a href="#topic+DTSg">timezone</a></code> field.
</p>
</li>
<li> <p><em>ignoreDST:</em> Same as the <code>ignoreDST</code> argument.
</p>
</li>
<li> <p><em>periodicity:</em> Same as the <code><a href="#topic+DTSg">periodicity</a></code> field.
</p>
</li>
<li> <p><em>na.status:</em> Same as the <code><a href="#topic+DTSg">na.status</a></code> field.
</p>
</li>
<li> <p><em>multiplier:</em> Same as the <code>multiplier</code> argument.
</p>
</li>
<li> <p><em>funbyApproach:</em> Same as the <code>funbyApproach</code> argument.
</p>
</li></ul>

<p>Any additional element specified in the <code>funbyHelpers</code> argument is appended
to the end of the default <code><a href="base.html#topic+list">list</a></code>. In case <code>funbyHelpers</code> contains an
<em>ignoreDST, multiplier</em> or <em>funbyApproach</em> element, it takes precedence over
the respective method argument. <em>timezone, periodicity</em> and <em>na.status</em>
elements are rejected, as they are always taken directly from the object.
</p>
<p>The temporal aggregation level of certain <code><a href="#topic+TALFs">TALFs</a></code> can be adjusted with the
help of the <code>multiplier</code> argument. A <code>multiplier</code> of <code>10</code>, for example, makes
<code><a href="#topic+byY_____">byY_____</a></code> aggregate to decades instead of years. Another example
is a <code>multiplier</code> of <code>6</code> provided to <code><a href="#topic+by_m____">by_m____</a></code>. The function
then aggregates all months of all first and all months of all second half
years instead of all months of all years separately. This feature is
supported by the following <code><a href="#topic+TALFs">TALFs</a></code> of the package:
</p>

<ul>
<li> <p><code><a href="#topic+byY_____">byY_____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+byYm____">byYm____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+byYmdH__">byYmdH__</a></code> (UTC and equivalent as well as all Etc/GMT time zones only)
</p>
</li>
<li> <p><code><a href="#topic+byYmdHM_">byYmdHM_</a></code>
</p>
</li>
<li> <p><code><a href="#topic+byYmdHMS">byYmdHMS</a></code>
</p>
</li>
<li> <p><code><a href="#topic+by_m____">by_m____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+by___H__">by___H__</a></code> (UTC and equivalent as well as all Etc/GMT time zones only)
</p>
</li>
<li> <p><code><a href="#topic+by____M_">by____M_</a></code>
</p>
</li>
<li> <p><code><a href="#topic+by_____S">by_____S</a></code>
</p>
</li></ul>



<h3>Summary functions</h3>

<p>Some examples for <code>fun</code> are as follows:
</p>

<ul>
<li> <p><code><a href="base.html#topic+mean">mean</a></code>
</p>
</li>
<li> <p><code><a href="base.html#topic+list">list</a>(min = <a href="base.html#topic+min">min</a>, max = <a href="base.html#topic+max">max</a>)</code>
</p>
</li>
<li> <p><code>c(sd = "sd", var = "var")</code>
</p>
</li></ul>

<p>A <code><a href="base.html#topic+list">list</a></code> or character vector must have names in case more than one summary
function is provided. The method can benefit from <span class="pkg">data.table</span>'s
<em><a href="data.table.html#topic+datatable-optimize">GForce</a></em> optimisation in case a character
vector specifying summary functions is provided.
</p>


<h3>Number of values per temporal aggregation level</h3>

<p>Depending on the number of columns to aggregate, the <code>.n</code> column contains
different counts:
</p>

<ul>
<li><p> One column: The counts are calculated from the columns' values disregarding
any missing values.
</p>
</li>
<li><p> More than one column: The counts are calculated from the <em>.dateTime</em> column
including all missing values.
</p>
</li></ul>



<h3>Ignore day saving time</h3>

<p><code>ignoreDST</code> tells a temporal aggregation level function if it is supposed to
ignore day saving time while transforming the timestamps. This can be a
desired feature for time series strictly following the position of the sun
such as hydrological time series. Doing so ensures that diurnal variations
are preserved by all means and all intervals are of the &ldquo;correct&rdquo;
length, however, a possible limitation might be that the day saving time
shift is invariably assumed to be one hour long. This feature requires that
the periodicity of the time series has been recognised and is supported by
the following <code><a href="#topic+TALFs">TALFs</a></code> of the package:
</p>

<ul>
<li> <p><code><a href="#topic+byY_____">byY_____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+byYQ____">byYQ____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+byYm____">byYm____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+byYmd___">byYmd___</a></code>
</p>
</li>
<li> <p><code><a href="#topic+by_Q____">by_Q____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+by_m____">by_m____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+by___H__">by___H__</a></code>
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+cols">cols</a></code>, <code><a href="base.html#topic+getOption">getOption</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># new DTSg object
x &lt;- DTSg$new(values = flow)

# mean yearly river flows
## R6 method
x$aggregate(
  funby = byY_____,
  fun = "mean",
  na.rm = TRUE
)$print()

## S3 method
print(aggregate(
  x = x,
  funby = byY_____,
  fun = "mean",
  na.rm = TRUE
))

# variance and standard deviation of river flows per quarter
## R6 method
x$aggregate(
  funby = byYQ____,
  fun = c(var = "var", sd = "sd"),
  na.rm = TRUE
)$print()

## S3 method
print(aggregate(
  x = x,
  funby = byYQ____,
  fun = c(var = "var", sd = "sd"),
  na.rm = TRUE
))

# mean of river flows of all first and all second half years
## R6 method
x$aggregate(
  funby = by_m____,
  fun = "mean",
  na.rm = TRUE,
  multiplier = 6
)$print()

## S3 method
print(aggregate(
  x = x,
  funby = by_m____,
  fun = "mean",
  na.rm = TRUE,
  multiplier = 6
))

</code></pre>

<hr>
<h2 id='alter.DTSg'>Alter time series</h2><span id='topic+alter.DTSg'></span><span id='topic+alter'></span>

<h3>Description</h3>

<p>Shortens, lengthens, filters for a consecutive range, changes the periodicity
and/or the status of missing values of a <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DTSg'
alter(
  x,
  from = first(self$values(reference = TRUE)[[".dateTime"]]),
  to = last(self$values(reference = TRUE)[[".dateTime"]]),
  by = self$periodicity,
  rollback = TRUE,
  clone = getOption("DTSgClone"),
  na.status = self$na.status,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="alter.DTSg_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+DTSg">DTSg</a></code> object (S3 method only).</p>
</td></tr>
<tr><td><code id="alter.DTSg_+3A_from">from</code></td>
<td>
<p>A <code><a href="base.html#topic+POSIXct">POSIXct</a></code> timestamp in the same time zone as the time series
or a character string coercible to one. Specifies the new start of the time
series.</p>
</td></tr>
<tr><td><code id="alter.DTSg_+3A_to">to</code></td>
<td>
<p>A <code><a href="base.html#topic+POSIXct">POSIXct</a></code> timestamp in the same time zone as the time series or
a character string coercible to one. Specifies the new end of the time
series.</p>
</td></tr>
<tr><td><code id="alter.DTSg_+3A_by">by</code></td>
<td>
<p>Specifies the new periodicity in one of the ways the <code>by</code> argument
of <code><a href="base.html#topic+seq.POSIXt">seq.POSIXt</a></code> can be specified. Must be specified for time series with
unrecognised periodicity. Time steps out of sync with the new periodicity
are dropped.</p>
</td></tr>
<tr><td><code id="alter.DTSg_+3A_rollback">rollback</code></td>
<td>
<p>A logical specifying if a call to <code><a href="#topic+rollback">rollback</a></code> shall be made
when appropriate.</p>
</td></tr>
<tr><td><code id="alter.DTSg_+3A_clone">clone</code></td>
<td>
<p>A logical specifying if the object shall be modified in place or
if a deep clone (copy) shall be made beforehand.</p>
</td></tr>
<tr><td><code id="alter.DTSg_+3A_na.status">na.status</code></td>
<td>
<p>A character string. Either <code>"explicit"</code>, which makes missing
timestamps explicit according to the recognised periodicity, or
<code>"implicit"</code>, which removes timestamps with missing values on all value
columns. Please note that <code><a href="#topic+DTSg">DTSg</a></code> objects work best with explicitly
missing values.</p>
</td></tr>
<tr><td><code id="alter.DTSg_+3A_...">...</code></td>
<td>
<p>Not used (S3 method only).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+getOption">getOption</a></code>, <code><a href="#topic+subset">subset</a></code>, <code><a href="#topic+nas">nas</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># new DTSg object
x &lt;- DTSg$new(values = flow)

# filter for the first two years
## R6 method
x$alter(
  from = "2007-01-01",
  to = "2008-12-31"
)$print()

## S3 method
print(alter(
  x = x,
  from = "2007-01-01",
  to = "2008-12-31"
))

# change periodicity to one month
## R6 method
x$alter(by = "1 month")$print()

## S3 method
print(alter(x = x, by = "1 month"))

</code></pre>

<hr>
<h2 id='clone.DTSg'>Clone object</h2><span id='topic+clone.DTSg'></span><span id='topic+clone'></span>

<h3>Description</h3>

<p>Clones (copies) a <code><a href="#topic+DTSg">DTSg</a></code> object. Merely assigning a variable representing a
<code><a href="#topic+DTSg">DTSg</a></code> object to a new variable does not result in a copy of the object.
Instead, both variables will reference and access the same data under the
hood, i.e. changing one will also affect the other. This is not an issue when
calling methods with the <em>DTSgClone</em> option or <code>clone</code> argument set to
<code>TRUE</code>, but has to be kept in mind when setting fields, as they are always
modified in place. See <code><a href="#topic+DTSg">DTSg</a></code> for further information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DTSg'
clone(x, deep = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clone.DTSg_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+DTSg">DTSg</a></code> object (S3 method only).</p>
</td></tr>
<tr><td><code id="clone.DTSg_+3A_deep">deep</code></td>
<td>
<p>A logical specifying if a deep copy shall be made (for
consistency with the <code><a href="R6.html#topic+R6Class">R6::R6Class</a></code> the default is <code>FALSE</code>, but should
generally be set to <code>TRUE</code>).</p>
</td></tr>
<tr><td><code id="clone.DTSg_+3A_...">...</code></td>
<td>
<p>Not used (S3 method only).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a cloned <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+options">options</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># new DTSg object
x &lt;- DTSg$new(values = flow)

# make a deep copy
## R6 method
x$clone(deep = TRUE)

## S3 method
clone(x = x, deep = TRUE)

</code></pre>

<hr>
<h2 id='colapply.DTSg'>Apply function column-wise</h2><span id='topic+colapply.DTSg'></span><span id='topic+colapply'></span>

<h3>Description</h3>

<p>Applies an arbitrary function to selected columns of a <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DTSg'
colapply(
  x,
  fun,
  ...,
  cols = self$cols(class = "numeric")[1L],
  resultCols = NULL,
  suffix = NULL,
  helpers = TRUE,
  funby = NULL,
  ignoreDST = FALSE,
  multiplier = 1L,
  funbyHelpers = NULL,
  funbyApproach = self$funbyApproach,
  clone = getOption("DTSgClone")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="colapply.DTSg_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+DTSg">DTSg</a></code> object (S3 method only).</p>
</td></tr>
<tr><td><code id="colapply.DTSg_+3A_fun">fun</code></td>
<td>
<p>A <code><a href="base.html#topic+function">function</a></code>. Its return value must be of length one.</p>
</td></tr>
<tr><td><code id="colapply.DTSg_+3A_...">...</code></td>
<td>
<p>Further arguments passed on to <code>fun</code>.</p>
</td></tr>
<tr><td><code id="colapply.DTSg_+3A_cols">cols</code></td>
<td>
<p>A character vector specifying the columns to apply <code>fun</code> to.
Another possibility is a character string containing either comma separated
column names, for example, <code>"x,y,z"</code>, or the start and end column separated
by a colon, for example, <code>"x:z"</code>.</p>
</td></tr>
<tr><td><code id="colapply.DTSg_+3A_resultcols">resultCols</code></td>
<td>
<p>An optional character vector of the same length as <code>cols</code>
specifying the column names for the return values of <code>fun</code>. Another
possibility is a character string containing comma separated column names,
for example, <code>"x,y,z"</code>. Non-existing columns are added and existing columns
are overwritten. Columns are matched element-wise between <code>cols</code> and
<code>resultCols</code>.</p>
</td></tr>
<tr><td><code id="colapply.DTSg_+3A_suffix">suffix</code></td>
<td>
<p>An optional character string. The return values of <code>fun</code> are
added as new columns with names consisting of the columns specified in
<code>cols</code> and this suffix. Existing columns are never overwritten. Only used
when <code>resultCols</code> is not specified.</p>
</td></tr>
<tr><td><code id="colapply.DTSg_+3A_helpers">helpers</code></td>
<td>
<p>A logical specifying if helper data shall be handed over to
<code>fun</code>. See corresponding section for further information.</p>
</td></tr>
<tr><td><code id="colapply.DTSg_+3A_funby">funby</code></td>
<td>
<p>One of the temporal aggregation level functions described in
<code><a href="#topic+TALFs">TALFs</a></code> or a user defined temporal aggregation level function. Can be
used to apply functions like <code><a href="base.html#topic+cumsum">cumsum</a></code> to a certain temporal level. See
corresponding section and examples for further information.</p>
</td></tr>
<tr><td><code id="colapply.DTSg_+3A_ignoredst">ignoreDST</code></td>
<td>
<p>A logical specifying if day saving time shall be ignored
by <code>funby</code>. See corresponding section for further information.</p>
</td></tr>
<tr><td><code id="colapply.DTSg_+3A_multiplier">multiplier</code></td>
<td>
<p>A positive integerish value &ldquo;multiplying&rdquo; the
temporal aggregation level of certain <code><a href="#topic+TALFs">TALFs</a></code>. See corresponding section
for further information.</p>
</td></tr>
<tr><td><code id="colapply.DTSg_+3A_funbyhelpers">funbyHelpers</code></td>
<td>
<p>An optional <code><a href="base.html#topic+list">list</a></code> with helper data passed on to
<code>funby</code>. See corresponding section for further information.</p>
</td></tr>
<tr><td><code id="colapply.DTSg_+3A_funbyapproach">funbyApproach</code></td>
<td>
<p>A character string specifying the flavour of the applied
temporal aggregation level function. Either <code>"timechange"</code>, which utilises
<code><a href="timechange.html#topic+time_round">timechange::time_floor</a></code>, or <code>"base"</code>, which utilises <code><a href="base.html#topic+as.POSIXct">as.POSIXct</a></code>, or
<code>"fasttime"</code>, which utilises <code><a href="fasttime.html#topic+fastPOSIXct">fasttime::fastPOSIXct</a></code>, or <code>"RcppCCTZ"</code>,
which utilises <code><a href="RcppCCTZ.html#topic+parseDatetime">RcppCCTZ::parseDatetime</a></code> as the main function for
transforming timestamps.</p>
</td></tr>
<tr><td><code id="colapply.DTSg_+3A_clone">clone</code></td>
<td>
<p>A logical specifying if the object shall be modified in place or
if a deep clone (copy) shall be made beforehand.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>


<h3>Helper data</h3>

<p>In addition to the <code>...</code> argument, this method optionally hands over a
<code><a href="base.html#topic+list">list</a></code> argument with helper data called <code>.helpers</code> to <code>fun</code>. This <code><a href="base.html#topic+list">list</a></code>
contains the following elements:
</p>

<ul>
<li> <p><em>.dateTime:</em> A <code><a href="base.html#topic+POSIXct">POSIXct</a></code> vector containing the <em>.dateTime</em> column.
</p>
</li>
<li> <p><em>periodicity:</em> Same as the <code><a href="#topic+DTSg">periodicity</a></code> field.
</p>
</li>
<li> <p><em>minLag:</em> A <code><a href="base.html#topic+difftime">difftime</a></code> object containing the minimum time difference
between two subsequent timestamps.
</p>
</li>
<li> <p><em>maxLag:</em> A <code><a href="base.html#topic+difftime">difftime</a></code> object containing the maximum time difference
between two subsequent timestamps.
</p>
</li></ul>



<h3>User defined TALFs, TALFs helper data and multiplier</h3>

<p>User defined temporal aggregation level functions have to return a
<code><a href="base.html#topic+POSIXct">POSIXct</a></code> vector of the same length as the time series and accept two
arguments: a <code><a href="base.html#topic+POSIXct">POSIXct</a></code> vector as its first and a <code><a href="base.html#topic+list">list</a></code> with helper data
as its second. The default elements of this <code><a href="base.html#topic+list">list</a></code> are as follows:
</p>

<ul>
<li> <p><em>timezone:</em> Same as the <code><a href="#topic+DTSg">timezone</a></code> field.
</p>
</li>
<li> <p><em>ignoreDST:</em> Same as the <code>ignoreDST</code> argument.
</p>
</li>
<li> <p><em>periodicity:</em> Same as the <code><a href="#topic+DTSg">periodicity</a></code> field.
</p>
</li>
<li> <p><em>na.status:</em> Same as the <code><a href="#topic+DTSg">na.status</a></code> field.
</p>
</li>
<li> <p><em>multiplier:</em> Same as the <code>multiplier</code> argument.
</p>
</li>
<li> <p><em>funbyApproach:</em> Same as the <code>funbyApproach</code> argument.
</p>
</li></ul>

<p>Any additional element specified in the <code>funbyHelpers</code> argument is appended
to the end of the default <code><a href="base.html#topic+list">list</a></code>. In case <code>funbyHelpers</code> contains an
<em>ignoreDST, multiplier</em> or <em>funbyApproach</em> element, it takes precedence over
the respective method argument. <em>timezone, periodicity</em> and <em>na.status</em>
elements are rejected, as they are always taken directly from the object.
</p>
<p>The temporal aggregation level of certain <code><a href="#topic+TALFs">TALFs</a></code> can be adjusted with the
help of the <code>multiplier</code> argument. A <code>multiplier</code> of <code>10</code>, for example, makes
<code><a href="#topic+byY_____">byY_____</a></code> aggregate to decades instead of years. Another example
is a <code>multiplier</code> of <code>6</code> provided to <code><a href="#topic+by_m____">by_m____</a></code>. The function
then aggregates all months of all first and all months of all second half
years instead of all months of all years separately. This feature is
supported by the following <code><a href="#topic+TALFs">TALFs</a></code> of the package:
</p>

<ul>
<li> <p><code><a href="#topic+byY_____">byY_____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+byYm____">byYm____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+byYmdH__">byYmdH__</a></code> (UTC and equivalent as well as all Etc/GMT time zones only)
</p>
</li>
<li> <p><code><a href="#topic+byYmdHM_">byYmdHM_</a></code>
</p>
</li>
<li> <p><code><a href="#topic+byYmdHMS">byYmdHMS</a></code>
</p>
</li>
<li> <p><code><a href="#topic+by_m____">by_m____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+by___H__">by___H__</a></code> (UTC and equivalent as well as all Etc/GMT time zones only)
</p>
</li>
<li> <p><code><a href="#topic+by____M_">by____M_</a></code>
</p>
</li>
<li> <p><code><a href="#topic+by_____S">by_____S</a></code>
</p>
</li></ul>



<h3>Ignore day saving time</h3>

<p><code>ignoreDST</code> tells a temporal aggregation level function if it is supposed to
ignore day saving time while transforming the timestamps. This can be a
desired feature for time series strictly following the position of the sun
such as hydrological time series. Doing so ensures that diurnal variations
are preserved by all means and all intervals are of the &ldquo;correct&rdquo;
length, however, a possible limitation might be that the day saving time
shift is invariably assumed to be one hour long. This feature requires that
the periodicity of the time series has been recognised and is supported by
the following <code><a href="#topic+TALFs">TALFs</a></code> of the package:
</p>

<ul>
<li> <p><code><a href="#topic+byY_____">byY_____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+byYQ____">byYQ____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+byYm____">byYm____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+byYmd___">byYmd___</a></code>
</p>
</li>
<li> <p><code><a href="#topic+by_Q____">by_Q____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+by_m____">by_m____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+by___H__">by___H__</a></code>
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+cols">cols</a></code>, <code><a href="base.html#topic+getOption">getOption</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># new DTSg object
x &lt;- DTSg$new(values = flow)

# linear interpolation of missing values
## R6 method
x$colapply(fun = interpolateLinear)$print()

## S3 method
print(colapply(x = x, fun = interpolateLinear))

# daily cumulative sums per month
## R6 method
x$colapply(
  fun = cumsum,
  helpers = FALSE,
  funby = byYm____
)$print()

## S3 method
print(colapply(
  x = x,
  fun = cumsum,
  helpers = FALSE,
  funby = byYm____
))

# calculate moving averages with the help of 'runner' (all four given
# approaches provide the same result with explicitly missing timestamps)
if (requireNamespace("runner", quietly = TRUE) &amp;&amp;
    packageVersion("runner") &gt;= package_version("0.3.5")) {
  wrapper &lt;- function(..., .helpers) {
    runner::runner(..., idx = .helpers[[".dateTime"]])
  }

  ## R6 method
  x$colapply(
    fun = runner::runner,
    f = mean,
    k = 5,
    lag = -2
  )$print()
  x$colapply(
    fun = wrapper,
    f = mean,
    k = "5 days",
    lag = "-2 days"
  )$print()
  x$colapply(
    fun = runner::runner,
    f = mean,
    k = "5 days",
    lag = "-2 days",
    idx = x$getCol(col = ".dateTime")
  )$print()
  x$colapply(
    fun = runner::runner,
    f = mean,
    k = "5 days",
    lag = "-2 days",
    idx = x[".dateTime"]
  )$print()

  ## S3 method
  print(colapply(
    x = x,
    fun = runner::runner,
    f = mean,
    k = 5,
    lag = -2
  ))
  print(colapply(
    x = x,
    fun = wrapper,
    f = mean,
    k = "5 days",
    lag = "-2 days"
  ))
  print(colapply(
    x = x,
    fun = runner::runner,
    f = mean,
    k = "5 days",
    lag = "-2 days",
    idx = getCol(x = x, col = ".dateTime")
  ))
  print(colapply(
    x = x,
    fun = runner::runner,
    f = mean,
    k = "5 days",
    lag = "-2 days",
    idx = x[".dateTime"]
  ))
}

# calculate rolling correlations somewhat inefficiently with the help of
# 'runner'
if (requireNamespace("runner", quietly = TRUE) &amp;&amp;
    packageVersion("runner") &gt;= package_version("0.3.8")) {
  wrapper &lt;- function(x, y, f, k, lag, ...) {
    runner::runner(
      cbind(x, y),
      f = function(x) f(x[, 1], x[, 2]),
      k = k,
      lag = lag
    )
  }

  ## R6 method
  x$colapply(
    fun = wrapper,
    y = x["flow"] + rnorm(length(x["flow"])),
    f = cor,
    k = 5,
    lag = -2
  )$print()

  ## S3 method
  print(colapply(
    x = x,
    fun = wrapper,
    y = x["flow"] + rnorm(length(x["flow"])),
    f = cor,
    k = 5,
    lag = -2
  ))
}
</code></pre>

<hr>
<h2 id='cols.DTSg'>Get column names</h2><span id='topic+cols.DTSg'></span><span id='topic+cols'></span>

<h3>Description</h3>

<p>Returns all column names of a <code><a href="#topic+DTSg">DTSg</a></code> object, those of certain <code><a href="base.html#topic+class">class</a></code>es,
<code><a href="base.html#topic+mode">mode</a></code>s, <code><a href="base.html#topic+typeof">typeof</a></code>s and/or those matching a certain pattern only.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DTSg'
cols(x, class = NULL, pattern = NULL, mode = NULL, typeof = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cols.DTSg_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+DTSg">DTSg</a></code> object (S3 method only).</p>
</td></tr>
<tr><td><code id="cols.DTSg_+3A_class">class</code></td>
<td>
<p>An optional character vector matched to the most specific class
(first element) of each column's <code><a href="base.html#topic+class">class</a></code> vector. The &ldquo;special
class&rdquo; <code>".numerary"</code> matches the <code><a href="base.html#topic+integer">integer</a></code> and <code><a href="base.html#topic+numeric">numeric</a></code> classes.</p>
</td></tr>
<tr><td><code id="cols.DTSg_+3A_pattern">pattern</code></td>
<td>
<p>An optional character string passed on to the <code>pattern</code>
argument of <code><a href="base.html#topic+grep">grep</a></code>.</p>
</td></tr>
<tr><td><code id="cols.DTSg_+3A_mode">mode</code></td>
<td>
<p>An optional character vector matched to each column's <code><a href="base.html#topic+mode">mode</a></code>.</p>
</td></tr>
<tr><td><code id="cols.DTSg_+3A_typeof">typeof</code></td>
<td>
<p>An optional character vector matched to each column's
<code><a href="base.html#topic+typeof">typeof</a></code>.</p>
</td></tr>
<tr><td><code id="cols.DTSg_+3A_...">...</code></td>
<td>
<p>Further arguments passed on to <code><a href="base.html#topic+grep">grep</a></code>. The <code>value</code> argument is
rejected.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a character vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># new DTSg object
x &lt;- DTSg$new(values = flow)

# get names of numeric columns
## R6 method
x$cols(class = "numeric")

## 'names()' is a "hidden" R6 alias for 'cols()'
x$names(class = "numeric")

## S3 method
cols(x = x, class = "numeric")

</code></pre>

<hr>
<h2 id='DTSg'>DTSg class</h2><span id='topic+DTSg'></span><span id='topic+new'></span>

<h3>Description</h3>

<p>The <code>DTSg</code> class is the working horse of the package. It is an
<code><a href="R6.html#topic+R6Class">R6::R6Class</a></code> and offers an S3 interface in addition to its native R6
interface. In the usage sections of the documentation, unfortunately, only
the usage of the S3 methods are displayed, however, the examples always show
both ways of calling the respective method. Generally, they are very similar
anyway. While the R6 interface always has the object first and the method is
then selected with the help of the <code>$</code> operator, for instance, <code>x$cols()</code>,
the S3 interface always has the method first and then the object as its first
argument, for instance, <code>cols(x)</code>. An exception is the <code>new</code> method. It is
not an S3 method, but an abused S4 constructor with the character string
<code>"DTSg"</code> as its first argument. Regarding the R6 interface, the <code>DTSg</code> class
generator has to be used to access the <code>new</code> method with the help of the <code>$</code>
operator.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new(Class, values, ID = "", parameter = "", unit = "", variant = "",
  aggregated = FALSE, fast = getOption("DTSgFast"), swallow = FALSE,
  na.status = getOption("DTSgNA.status"), funbyApproach =
  getOption("DTSgFunbyApproach"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="DTSg_+3A_class">Class</code></td>
<td>
<p>A character string. Must be <code>"DTSg"</code> in order to create a <code>DTSg</code>
object. Otherwise a different object may or may not be created (S4
constructor only).</p>
</td></tr>
<tr><td><code id="DTSg_+3A_values">values</code></td>
<td>
<p>A <code><a href="base.html#topic+data.frame">data.frame</a></code> or object inherited from class <code><a href="base.html#topic+data.frame">data.frame</a></code>,
e.g. <code><a href="data.table.html#topic+data.table">data.table::data.table</a></code>. Its first column must be of class
<code><a href="base.html#topic+POSIXct">POSIXct</a></code> or coercible to it. It serves as the object's time index and is
renamed to <em>.dateTime.</em></p>
</td></tr>
<tr><td><code id="DTSg_+3A_id">ID</code></td>
<td>
<p>A character string specifying the ID (name) of the time series data
object.</p>
</td></tr>
<tr><td><code id="DTSg_+3A_parameter">parameter</code></td>
<td>
<p>A character string specifying the parameter name of the time
series data.</p>
</td></tr>
<tr><td><code id="DTSg_+3A_unit">unit</code></td>
<td>
<p>A character string specifying the unit of the time series data.</p>
</td></tr>
<tr><td><code id="DTSg_+3A_variant">variant</code></td>
<td>
<p>A character string specifying further metadata of the time
series, for instance, <code>"min"</code> to point out that it is a time series of
lower bound measurements.</p>
</td></tr>
<tr><td><code id="DTSg_+3A_aggregated">aggregated</code></td>
<td>
<p>A logical specifying how the timestamps of the series have
to be interpreted: as snap-shots (<code>FALSE</code>) or as periods between subsequent
timestamps (<code>TRUE</code>).</p>
</td></tr>
<tr><td><code id="DTSg_+3A_fast">fast</code></td>
<td>
<p>A logical specifying if all rows (<code>FALSE</code>) or only the first 1000
rows (<code>TRUE</code>) shall be used to check the object's integrity and for the
automatic detection of the time series' periodicity.</p>
</td></tr>
<tr><td><code id="DTSg_+3A_swallow">swallow</code></td>
<td>
<p>A logical specifying if the object provided through the
<code>values</code> argument shall be &ldquo;swallowed&rdquo; by the <code>DTSg</code> object, i.e. no
copy of the data shall be made. This is generally more resource efficient,
but only works when the provided object is a <code><a href="data.table.html#topic+data.table">data.table::data.table</a></code>. Be
warned, however, that when the creation of the <code>DTSg</code> object fails for some
reason, the first column of the provided <code><a href="data.table.html#topic+data.table">data.table::data.table</a></code> might
have been coerced to <code><a href="base.html#topic+POSIXct">POSIXct</a></code> and keyed (see <code><a href="data.table.html#topic+setkey">data.table::setkey</a></code> for
further information). Furthermore, all references to the &ldquo;swallowed&rdquo;
<code><a href="data.table.html#topic+data.table">data.table::data.table</a></code> in the global (and only the global) environment
are removed upon the successful creation of the <code>DTSg</code> object.</p>
</td></tr>
<tr><td><code id="DTSg_+3A_na.status">na.status</code></td>
<td>
<p>A character string. Either <code>"explicit"</code>, which makes missing
timestamps explicit according to the recognised periodicity, or
<code>"implicit"</code>, which removes timestamps with missing values on all value
columns, or <code>"undecided"</code> for no such action. Please note that <code>DTSg</code>
objects work best with explicitly missing values.</p>
</td></tr>
<tr><td><code id="DTSg_+3A_funbyapproach">funbyApproach</code></td>
<td>
<p>A character string specifying the default flavour of
<code><a href="#topic+TALFs">TALFs</a></code> used with the created <code>DTSg</code> object. Either <code>"timechange"</code>, which
utilises <code><a href="timechange.html#topic+time_round">timechange::time_floor</a></code>, or <code>"base"</code>, which utilises
<code><a href="base.html#topic+as.POSIXct">as.POSIXct</a></code>, or <code>"fasttime"</code>, which utilises <code><a href="fasttime.html#topic+fastPOSIXct">fasttime::fastPOSIXct</a></code>,
or <code>"RcppCCTZ"</code>, which utilises <code><a href="RcppCCTZ.html#topic+parseDatetime">RcppCCTZ::parseDatetime</a></code> as the main
function for transforming timestamps. Custom approaches for user defined
temporal aggregation level functions are also possible.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>DTSg</code> object.
</p>


<h3>Methods</h3>

<p>A <code>DTSg</code> object has the following methods:
</p>

<ul>
<li> <p><code>aggregate</code>: See <code><a href="#topic+aggregate">aggregate</a></code> for further information.
</p>
</li>
<li> <p><code>alter</code>: See <code><a href="#topic+alter">alter</a></code> for further information.
</p>
</li>
<li> <p><code>clone</code>: See <code><a href="#topic+clone">clone</a></code> for further information.
</p>
</li>
<li> <p><code>colapply</code>: See <code><a href="#topic+colapply">colapply</a></code> for further information.
</p>
</li>
<li> <p><code>cols</code>: See <code><a href="#topic+cols">cols</a></code> for further information.
</p>
</li>
<li> <p><code>getCol</code>: See <code><a href="#topic+getCol">getCol</a></code> for further information.
</p>
</li>
<li> <p><code>merge</code>: See <code><a href="#topic+merge">merge</a></code> for further information.
</p>
</li>
<li> <p><code>nas</code>: See <code><a href="#topic+nas">nas</a></code> for further information.
</p>
</li>
<li> <p><code>plot</code>: See <code><a href="#topic+plot">plot</a></code> for further information.
</p>
</li>
<li> <p><code>print</code>: See <code><a href="#topic+print">print</a></code> for further information.
</p>
</li>
<li> <p><code>refresh</code>: See <code><a href="#topic+refresh">refresh</a></code> for further information.
</p>
</li>
<li> <p><code>rollapply</code>: See <code><a href="#topic+rollapply">rollapply</a></code> for further information.
</p>
</li>
<li> <p><code>rowaggregate</code>: See <code><a href="#topic+rowaggregate">rowaggregate</a></code> for further information.
</p>
</li>
<li> <p><code>rowbind</code>: See <code><a href="#topic+rowbind">rowbind</a></code> for further information.
</p>
</li>
<li> <p><code>setColNames</code>: See <code><a href="#topic+setColNames">setColNames</a></code> for further information.
</p>
</li>
<li> <p><code>setCols</code>: See <code><a href="#topic+setCols">setCols</a></code> for further information.
</p>
</li>
<li> <p><code>subset</code>: See <code><a href="#topic+subset">subset</a></code> for further information.
</p>
</li>
<li> <p><code>summary</code>: See <code><a href="#topic+summary">summary</a></code> for further information.
</p>
</li>
<li> <p><code>values</code>: See <code><a href="#topic+values">values</a></code> for further information.
</p>
</li></ul>



<h3>Fields</h3>

<p>A <code>DTSg</code> object has the following fields or properties as they are often
called. They are implemented through so called active bindings, which means
that they can be accessed and actively set with the help of the <code>$</code> operator,
for instance, <code>x$ID</code> gets the value of the <code>ID</code> field and
<code>x$ID &lt;- "River Flow"</code> sets its value. Please note that fields are always
modified in place, i.e. no deep clone (copy) of the object is made
beforehand. See <code><a href="#topic+clone">clone</a></code> for further information. Some of the fields are
read-only though:
</p>

<ul>
<li> <p><code>aggregated</code>: Same as the <code>aggregated</code> argument.
</p>
</li>
<li> <p><code>fast</code>: Same as the <code>fast</code> argument.
</p>
</li>
<li> <p><code>funbyApproach</code>: Same as the <code>funbyApproach</code> argument.
</p>
</li>
<li> <p><code>ID</code>: Same as the <code>ID</code> argument. It is used as the title of plots.
</p>
</li>
<li> <p><code>na.status</code>: Same as the <code>na.status</code> argument. When set, the missing values
of the object are expanded or collapsed accordingly.
</p>
</li>
<li> <p><code>parameter</code>: Same as the <code>parameter</code> argument. It is used as the label of
the primary axis of plots.
</p>
</li>
<li> <p><code>periodicity</code>: A <code><a href="base.html#topic+difftime">difftime</a></code> object for a regular and a character string
for an irregular <code>DTSg</code> object describing its periodicity or containing
<code>"unrecognised"</code> in case it could not be detected. When set, the periodicity
of the time series is changed as specified. See the <code>by</code> argument of
<code><a href="#topic+alter">alter</a></code> for further information.
</p>
</li>
<li> <p><code>regular</code>: A logical signalling if all lags in seconds between subsequent
timestamps are the same (<code>TRUE</code>) or if some are different (<code>FALSE</code>). A, for
instance, monthly time series is considered irregular in this sense
(read-only).
</p>
</li>
<li> <p><code>timestamps</code>: An integer showing the total number of timestamps of the time
series (read-only).
</p>
</li>
<li> <p><code>timezone</code>: A character string showing the time zone of the time series.
When set, the series is converted to the specified time zone. Only names from
<code><a href="base.html#topic+OlsonNames">OlsonNames</a></code> are accepted.
</p>
</li>
<li> <p><code>unit</code>: Same as the <code>unit</code> argument. It is added to the label of the
primary axis of plots when the <code>parameter</code> field is set.
</p>
</li>
<li> <p><code>variant</code>: Same as the <code>variant</code> argument. It is added to the label of the
primary axis of plots when the <code>parameter</code> field is set.
</p>
</li></ul>

<p>The <code>parameter</code>, <code>unit</code> and <code>variant</code> fields are especially useful for time
series of a single variable. For time series of multiple variables with
differing units the functionality of the <span class="pkg">units</span> package may pose a
viable alternative.
</p>


<h3>Options</h3>

<p>The behaviour of <code>DTSg</code> objects can be customised with the help of the
following option. See <code><a href="base.html#topic+options">options</a></code> for further information:
</p>

<ul>
<li> <p><em>DTSgClone:</em> A logical specifying if <code>DTSg</code> objects are, by default,
modified in place (<code>FALSE</code>) or if a deep clone (copy) shall be made
beforehand (<code>TRUE</code>) (package's default is <code>TRUE</code>).
</p>
</li>
<li> <p><em>DTSgDeprecatedWarnings:</em> A logical specifying if warnings are displayed
when calling deprecated features (package's default is <code>TRUE</code>).
</p>
</li>
<li> <p><em>DTSgFast:</em> Default value for the <code>fast</code> argument (package's default is
<code>FALSE</code>).
</p>
</li>
<li> <p><em>DTSgFunbyApproach:</em> Default value for the <code>funbyApproach</code> argument
(package's default is <code>"timechange"</code>).
</p>
</li>
<li> <p><em>DTSgNA.status:</em> Default value for the <code>na.status</code> argument  (package's
default is <code>"explicit"</code>).
</p>
</li></ul>



<h3>Note</h3>

<p>Due to the <code><a href="base.html#topic+POSIXct">POSIXct</a></code> nature of the <em>.dateTime</em> column, the same sub-second
accuracy, issues and limitations apply to <code>DTSg</code> objects. In order to prevent
at least some of the possible precision issues, the lags between subsequent
timestamps are rounded to microseconds during integrity checks. This
corresponds to the maximum value allowed for
<code><a href="base.html#topic+options">options</a>("digits.secs")</code>. As a consequence, time series with a
sub-second accuracy higher than a microsecond will never work.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># new DTSg object
## R6 constructor
DTSg$new(
  values = flow,
  ID = "River Flow"
)

## abused S4 constructor
new(
  Class = "DTSg",
  values = flow,
  ID = "River Flow"
)

</code></pre>

<hr>
<h2 id='flow'>Daily river flows</h2><span id='topic+flow'></span>

<h3>Description</h3>

<p>A dataset containing a fictional time series of daily river flows with
implicitly missing values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flow
</code></pre>


<h3>Format</h3>

<p>A <code><a href="data.table.html#topic+data.table">data.table::data.table</a></code> with 2169 rows and two columns:
</p>

<dl>
<dt>date</dt><dd><p>A <code><a href="base.html#topic+POSIXct">POSIXct</a></code> vector ranging from the start of the year 2007 to
the end of the year 2012.</p>
</dd>
<dt>flow</dt><dd><p>A numeric vector with daily river flows in cubic metres per
second.</p>
</dd>
</dl>


<hr>
<h2 id='getCol.DTSg'>Get column vector</h2><span id='topic+getCol.DTSg'></span><span id='topic+getCol'></span><span id='topic++5B.DTSg'></span>

<h3>Description</h3>

<p>Returns the values of a column of a <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>
<p>The extract operator (<code>[</code>) acts as a shortcut for <code>getCol</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DTSg'
getCol(x, col = self$cols(class = "numeric")[1L], ...)

## S3 method for class 'DTSg'
x[...]
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getCol.DTSg_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+DTSg">DTSg</a></code> object (<code>getCol</code> S3 method only).</p>
</td></tr>
<tr><td><code id="getCol.DTSg_+3A_col">col</code></td>
<td>
<p>A character string specifying a column name.</p>
</td></tr>
<tr><td><code id="getCol.DTSg_+3A_...">...</code></td>
<td>
<p>Arguments passed on to <code>getCol</code> (only used by the extract
operator).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a vector or a <code><a href="base.html#topic+list">list</a></code> in case of a <code><a href="base.html#topic+list">list</a></code> column.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cols">cols</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># new DTSg object
x &lt;- DTSg$new(values = flow)

# get the first ten values of the "flow" column
## R6 methods
x$getCol(col = "flow")[1:10]
x$`[`("flow")[1:10]

## S3 methods
getCol(x = x, col = "flow")[1:10]
x["flow"][1:10]

</code></pre>

<hr>
<h2 id='interpolateLinear'>Linear interpolation</h2><span id='topic+interpolateLinear'></span>

<h3>Description</h3>

<p>Linearly interpolates missing values of a numeric vector. For use with the
<code><a href="#topic+colapply">colapply</a></code> method of <code><a href="#topic+DTSg">DTSg</a></code> objects. Other uses are possible, but not
recommended.
</p>
<p>This <code><a href="base.html#topic+function">function</a></code> mainly serves as an example for writing user defined
<code><a href="base.html#topic+function">function</a></code>s utilising one of the <code><a href="base.html#topic+list">list</a></code>s with helper data handed over by
some of the methods of <code><a href="#topic+DTSg">DTSg</a></code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>interpolateLinear(.col, roll = Inf, rollends = TRUE, .helpers)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="interpolateLinear_+3A_.col">.col</code></td>
<td>
<p>A numeric vector.</p>
</td></tr>
<tr><td><code id="interpolateLinear_+3A_roll">roll</code></td>
<td>
<p>A positive numeric specifying the maximum size of gaps whose
missing values shall be interpolated. For time series with unrecognised
periodicity it is interpreted in seconds and for time series with
recognised periodicity it is multiplied with the maximum time difference
between two subsequent time steps in seconds. Thus, for regular time series
it is the number of time steps and for irregular it is an approximation of
it.</p>
</td></tr>
<tr><td><code id="interpolateLinear_+3A_rollends">rollends</code></td>
<td>
<p>A logical specifying if missing values at the start and end
of the time series shall be filled. See <code><a href="data.table.html#topic+data.table">data.table::data.table</a></code> for
further information.</p>
</td></tr>
<tr><td><code id="interpolateLinear_+3A_.helpers">.helpers</code></td>
<td>
<p>A <code><a href="base.html#topic+list">list</a></code> with helper data as handed over by <code><a href="#topic+colapply">colapply</a></code>.
See <code><a href="#topic+colapply">colapply</a></code> for further information.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a numeric vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># new DTSg object
x &lt;- DTSg$new(values = flow)

# linear interpolation of missing values
## R6 method
x$colapply(fun = interpolateLinear)$print()

## S3 method
print(colapply(x = x, fun = interpolateLinear))

</code></pre>

<hr>
<h2 id='merge.DTSg'>Merge two objects</h2><span id='topic+merge.DTSg'></span><span id='topic+merge'></span>

<h3>Description</h3>

<p>Joins two <code><a href="#topic+DTSg">DTSg</a></code> objects based on their <em>.dateTime</em> column. Their time
zones and <code>aggregated</code> fields must match.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DTSg'
merge(x, y, ..., clone = getOption("DTSgClone"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="merge.DTSg_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+DTSg">DTSg</a></code> object (S3 method only).</p>
</td></tr>
<tr><td><code id="merge.DTSg_+3A_y">y</code></td>
<td>
<p>A <code><a href="#topic+DTSg">DTSg</a></code> object or an object coercible to one. See <code><a href="#topic+new">new</a></code> for
further information.</p>
</td></tr>
<tr><td><code id="merge.DTSg_+3A_...">...</code></td>
<td>
<p>Further arguments passed on to <code><a href="data.table.html#topic+merge">data.table::merge</a></code>. As the
<code>by</code>, <code>by.x</code> and <code>by.y</code> arguments can endanger the object's integrity, they
are rejected.</p>
</td></tr>
<tr><td><code id="merge.DTSg_+3A_clone">clone</code></td>
<td>
<p>A logical specifying if the object shall be modified in place or
if a deep clone (copy) shall be made beforehand.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+getOption">getOption</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># new DTSg object
x &lt;- DTSg$new(values = flow)

# merge with 'data.table'
## R6 method
x$merge(
  y = flow,
  suffixes = c("_1", "_2")
)$print()

## S3 method
print(merge(
  x = x,
  y = flow,
  suffixes = c("_1", "_2")
))

</code></pre>

<hr>
<h2 id='nas.DTSg'>List missing values</h2><span id='topic+nas.DTSg'></span><span id='topic+nas'></span>

<h3>Description</h3>

<p>Lists the missing values of selected columns of a <code><a href="#topic+DTSg">DTSg</a></code> object with
recognised periodicity.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DTSg'
nas(x, cols = self$cols(), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nas.DTSg_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+DTSg">DTSg</a></code> object (S3 method only).</p>
</td></tr>
<tr><td><code id="nas.DTSg_+3A_cols">cols</code></td>
<td>
<p>A character vector specifying the columns whose missing values
shall be listed. Another possibility is a character string containing
either comma separated column names, for example, <code>"x,y,z"</code>, or the start
and end column separated by a colon, for example, <code>"x:z"</code>.</p>
</td></tr>
<tr><td><code id="nas.DTSg_+3A_...">...</code></td>
<td>
<p>Not used (S3 method only).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="data.table.html#topic+data.table">data.table::data.table</a></code> with five columns:
</p>

<ul>
<li> <p><em>.col:</em> the column name
</p>
</li>
<li> <p><em>.group:</em> the ID of the missing values group within each column
</p>
</li>
<li> <p><em>.from:</em> the first timestamp of the missing values group
</p>
</li>
<li> <p><em>.to:</em> the last timestamp of the missing values group
</p>
</li>
<li> <p><em>.n:</em> the number of missing values per group
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+cols">cols</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># new DTSg object
x &lt;- DTSg$new(values = flow)

# list missing values
## R6 method
x$nas()

## S3 method
nas(x = x)

</code></pre>

<hr>
<h2 id='plot.DTSg'>Plot time series data</h2><span id='topic+plot.DTSg'></span><span id='topic+plot'></span>

<h3>Description</h3>

<p>Displays an interactive plot of a <code><a href="#topic+DTSg">DTSg</a></code> object. This method requires
<span class="pkg">dygraphs</span> and <span class="pkg">RColorBrewer</span> to be installed. Its main purpose is
not to make pretty plots, but rather to offer a possibility to interactively
explore time series data. The title of the plot and the label of its primary
axis are automatically generated from the object's metadata (fields). See
<code><a href="#topic+DTSg">DTSg</a></code> for further information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DTSg'
plot(
  x,
  from = first(self$values(reference = TRUE)[[".dateTime"]]),
  to = last(self$values(reference = TRUE)[[".dateTime"]]),
  cols = self$cols(class = "numeric"),
  secAxisCols = NULL,
  secAxisLabel = "",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.DTSg_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+DTSg">DTSg</a></code> object (S3 method only).</p>
</td></tr>
<tr><td><code id="plot.DTSg_+3A_from">from</code></td>
<td>
<p>A <code><a href="base.html#topic+POSIXct">POSIXct</a></code> timestamp in the same time zone as the time series
or a character string coercible to one. The data is plotted from this
timestamp on.</p>
</td></tr>
<tr><td><code id="plot.DTSg_+3A_to">to</code></td>
<td>
<p>A <code><a href="base.html#topic+POSIXct">POSIXct</a></code> timestamp in the same time zone as the time series or
a character string coercible to one. The data is plotted up to this
timestamp.</p>
</td></tr>
<tr><td><code id="plot.DTSg_+3A_cols">cols</code></td>
<td>
<p>A character vector specifying the columns whose values shall be
plotted. Another possibility is a character string containing either comma
separated column names, for example, <code>"x,y,z"</code>, or the start and end column
separated by a colon, for example, <code>"x:z"</code>.</p>
</td></tr>
<tr><td><code id="plot.DTSg_+3A_secaxiscols">secAxisCols</code></td>
<td>
<p>An optional character vector specifying the columns whose
values shall be plotted on a secondary axis. Another possibility is a
character string containing either comma separated column names, for
example, <code>"x,y,z"</code>, or the start and end column separated by a colon, for
example, <code>"x:z"</code>. Must be a subset of <code>cols</code>.</p>
</td></tr>
<tr><td><code id="plot.DTSg_+3A_secaxislabel">secAxisLabel</code></td>
<td>
<p>A character string specifying the label of the optional
secondary axis.</p>
</td></tr>
<tr><td><code id="plot.DTSg_+3A_...">...</code></td>
<td>
<p>Not used (S3 method only).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cols">cols</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># new DTSg object
x &lt;- DTSg$new(values = flow)

# plot data
if (requireNamespace("dygraphs", quietly = TRUE) &amp;&amp;
    requireNamespace("RColorBrewer", quietly = TRUE)) {
  ## R6 method
  x$plot()

  ## S3 method
  plot(x = x)
}

</code></pre>

<hr>
<h2 id='print.DTSg'>Print object</h2><span id='topic+print.DTSg'></span><span id='topic+print'></span>

<h3>Description</h3>

<p>Prints a <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DTSg'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.DTSg_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+DTSg">DTSg</a></code> object (S3 method only).</p>
</td></tr>
<tr><td><code id="print.DTSg_+3A_...">...</code></td>
<td>
<p>Not used (S3 method only).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># new DTSg object
x &lt;- DTSg$new(values = flow)

# print object
## R6 method
x$print()

## S3 method
print(x = x)

</code></pre>

<hr>
<h2 id='refresh.DTSg'>Object integrity</h2><span id='topic+refresh.DTSg'></span><span id='topic+refresh'></span>

<h3>Description</h3>

<p>Checks the integrity of a <code><a href="#topic+DTSg">DTSg</a></code> object and tries to automatically
(re-)detect its periodicity. Normally, there is no reason for a user to call
this method. The only exception is stated in <code><a href="#topic+values">values</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DTSg'
refresh(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="refresh.DTSg_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+DTSg">DTSg</a></code> object (S3 method only).</p>
</td></tr>
<tr><td><code id="refresh.DTSg_+3A_...">...</code></td>
<td>
<p>Not used (S3 method only).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># new DTSg object
x &lt;- DTSg$new(values = flow)

# check the object's integrity
## R6 method
x$refresh()

## S3 method
refresh(x = x)

</code></pre>

<hr>
<h2 id='rollapply.DTSg'>Rolling window function</h2><span id='topic+rollapply.DTSg'></span><span id='topic+rollapply'></span>

<h3>Description</h3>

<p>Applies an arbitrary function to a rolling window of selected columns of a
<code><a href="#topic+DTSg">DTSg</a></code> object with recognised periodicity.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DTSg'
rollapply(
  x,
  fun,
  ...,
  cols = self$cols(class = "numeric")[1L],
  before = 1L,
  after = before,
  weights = "inverseDistance",
  parameters = list(power = 1),
  resultCols = NULL,
  suffix = NULL,
  helpers = TRUE,
  memoryOverCPU = TRUE,
  clone = getOption("DTSgClone")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rollapply.DTSg_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+DTSg">DTSg</a></code> object (S3 method only).</p>
</td></tr>
<tr><td><code id="rollapply.DTSg_+3A_fun">fun</code></td>
<td>
<p>A <code><a href="base.html#topic+function">function</a></code>. Its return value must be of length one.</p>
</td></tr>
<tr><td><code id="rollapply.DTSg_+3A_...">...</code></td>
<td>
<p>Further arguments passed on to <code>fun</code>.</p>
</td></tr>
<tr><td><code id="rollapply.DTSg_+3A_cols">cols</code></td>
<td>
<p>A character vector specifying the columns whose rolling window
<code>fun</code> shall be applied to. Another possibility is a character string
containing either comma separated column names, for example, <code>"x,y,z"</code>, or
the start and end column separated by a colon, for example, <code>"x:z"</code>.</p>
</td></tr>
<tr><td><code id="rollapply.DTSg_+3A_before">before</code></td>
<td>
<p>An integerish value specifying the size of the window in time
steps before the &ldquo;center&rdquo; of the rolling window.</p>
</td></tr>
<tr><td><code id="rollapply.DTSg_+3A_after">after</code></td>
<td>
<p>An integerish value specifying the size of the window in time
steps after the &ldquo;center&rdquo; of the rolling window.</p>
</td></tr>
<tr><td><code id="rollapply.DTSg_+3A_weights">weights</code></td>
<td>
<p>A character string specifying the method applied to calculate
the weights handed over to <code>fun</code>. These are useful for functions like
<code><a href="stats.html#topic+weighted.mean">weighted.mean</a></code>. See corresponding section for further information.</p>
</td></tr>
<tr><td><code id="rollapply.DTSg_+3A_parameters">parameters</code></td>
<td>
<p>A <code><a href="base.html#topic+list">list</a></code> specifying parameters for the weight calculation
method. See corresponding section for further information.</p>
</td></tr>
<tr><td><code id="rollapply.DTSg_+3A_resultcols">resultCols</code></td>
<td>
<p>An optional character vector of the same length as <code>cols</code>
specifying the column names for the return values of <code>fun</code>. Another
possibility is a character string containing comma separated column names,
for example, <code>"x,y,z"</code>. Non-existing columns are added and existing columns
are overwritten. Columns are matched element-wise between <code>cols</code> and
<code>resultCols</code>.</p>
</td></tr>
<tr><td><code id="rollapply.DTSg_+3A_suffix">suffix</code></td>
<td>
<p>An optional character string. The return values of <code>fun</code> are
added as new columns with names consisting of the columns specified in
<code>cols</code> and this suffix. Existing columns are never overwritten. Only used
when <code>resultCols</code> is not specified.</p>
</td></tr>
<tr><td><code id="rollapply.DTSg_+3A_helpers">helpers</code></td>
<td>
<p>A logical specifying if helper data shall be handed over to
<code>fun</code>. See corresponding section for further information.</p>
</td></tr>
<tr><td><code id="rollapply.DTSg_+3A_memoryovercpu">memoryOverCPU</code></td>
<td>
<p>A logical specifying if memory usage shall be preferred
over CPU usage for this method call. The former is generally faster for
smaller windows and shorter time series, the latter for bigger windows and
longer time series or might even be the only one which works depending on
the available hardware.</p>
</td></tr>
<tr><td><code id="rollapply.DTSg_+3A_clone">clone</code></td>
<td>
<p>A logical specifying if the object shall be modified in place or
if a deep clone (copy) shall be made beforehand.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>


<h3>Weights</h3>

<p>Currently, only one method to calculate weights is supported:
<code>"inverseDistance"</code>. The distance <code class="reqn">d</code> of the &ldquo;center&rdquo; is one and
each time step further away from the &ldquo;center&rdquo; adds one to it. So, for
example, the distance of a timestamp three steps away from the
&ldquo;center&rdquo; is four. Additionally, the calculation of the weights accepts
a power parameter <code class="reqn">p</code> as a named element of a <code><a href="base.html#topic+list">list</a></code> provided through
the <code>parameters</code> argument: <code class="reqn">\frac{1}{d^p}</code>.
</p>


<h3>Helper data</h3>

<p>In addition to the <code>...</code> argument, this method optionally hands over the
weights as a numeric vector (<code>w</code> argument) and a <code><a href="base.html#topic+list">list</a></code> argument with
helper data called <code>.helpers</code> to <code>fun</code>. This <code><a href="base.html#topic+list">list</a></code> contains the following
elements:
</p>

<ul>
<li> <p><em>before:</em> Same as the <code>before</code> argument.
</p>
</li>
<li> <p><em>after:</em> Same as the <code>after</code> argument.
</p>
</li>
<li> <p><em>windowSize:</em> Size of the rolling window (<code>before + 1L + after</code>).
</p>
</li>
<li> <p><em>centerIndex:</em> Index of the &ldquo;center&rdquo; of the rolling window
(<code>before + 1L</code>).
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+cols">cols</a></code>, <code><a href="base.html#topic+getOption">getOption</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># new DTSg object
x &lt;- DTSg$new(values = flow)

# calculate a moving average
## R6 method
x$rollapply(
  fun = mean,
  na.rm = TRUE,
  before = 2,
  after = 2
)$print()

## S3 method
print(rollapply(
  x = x,
  fun = mean,
  na.rm = TRUE,
  before = 2,
  after = 2
))

</code></pre>

<hr>
<h2 id='rollback'>Rollback of months</h2><span id='topic+rollback'></span>

<h3>Description</h3>

<p>Generating regular sequences of time with the help of <code><a href="base.html#topic+seq.POSIXt">seq.POSIXt</a></code> can have
undesirable effects. This function &ldquo;first advances the month without
changing the day: if this results in an invalid day of the month, it is
counted forward into the next month&rdquo;. Monthly or yearly sequences starting at
the end of a month with 30 or 31 days (or 29 in case of a leap year)
therefore do not always fall on the end of shorter months. <code>rollback</code> fixes
this by counting the days of affected months backwards again.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rollback(.dateTime, periodicity)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rollback_+3A_.datetime">.dateTime</code></td>
<td>
<p>A <code><a href="base.html#topic+POSIXct">POSIXct</a></code> vector.</p>
</td></tr>
<tr><td><code id="rollback_+3A_periodicity">periodicity</code></td>
<td>
<p>A character string specifying a multiple of month(s) or
year(s). See <code><a href="base.html#topic+seq.POSIXt">seq.POSIXt</a></code> for further information.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="base.html#topic+POSIXct">POSIXct</a></code> vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># rollback monthly time series
by &lt;- "1 month"
rollback(
  .dateTime = seq(
    from = as.POSIXct("2000-01-31", tz = "UTC"),
    to = as.POSIXct("2000-12-31", tz = "UTC"),
    by = by
  ),
  periodicity = by
)

</code></pre>

<hr>
<h2 id='rowaggregate.DTSg'>Aggregate values row-wise</h2><span id='topic+rowaggregate.DTSg'></span><span id='topic+rowaggregate'></span><span id='topic+raggregate'></span>

<h3>Description</h3>

<p>Applies one or more provided summary functions row-wise to selected columns
of a <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DTSg'
rowaggregate(
  x,
  resultCols,
  fun,
  ...,
  cols = self$cols(class = "numeric"),
  clone = getOption("DTSgClone")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rowaggregate.DTSg_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+DTSg">DTSg</a></code> object (S3 method only).</p>
</td></tr>
<tr><td><code id="rowaggregate.DTSg_+3A_resultcols">resultCols</code></td>
<td>
<p>A character vector either of length one (names of <code>fun</code> are
appended in the case one or more functions are provided) or the same length
as <code>fun</code> specifying the column names for the return values of <code>fun</code>.</p>
</td></tr>
<tr><td><code id="rowaggregate.DTSg_+3A_fun">fun</code></td>
<td>
<p>A summary function, (named) <code><a href="base.html#topic+list">list</a></code> of summary functions or
(named) character vector specifying summary functions applied row-wise to
all the values of the specified <code>cols</code>. The return value(s) must be of
length one. See corresponding section for further information.</p>
</td></tr>
<tr><td><code id="rowaggregate.DTSg_+3A_...">...</code></td>
<td>
<p>Further arguments passed on to <code>fun</code>.</p>
</td></tr>
<tr><td><code id="rowaggregate.DTSg_+3A_cols">cols</code></td>
<td>
<p>A character vector specifying the columns to apply <code>fun</code> to.
Another possibility is a character string containing either comma separated
column names, for example, <code>"x,y,z"</code>, or the start and end column separated
by a colon, for example, <code>"x:z"</code>.</p>
</td></tr>
<tr><td><code id="rowaggregate.DTSg_+3A_clone">clone</code></td>
<td>
<p>A logical specifying if the object shall be modified in place or
if a deep clone (copy) shall be made beforehand.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>


<h3>Summary functions</h3>

<p>Some examples for <code>fun</code> are as follows:
</p>

<ul>
<li> <p><code><a href="base.html#topic+mean">mean</a></code>
</p>
</li>
<li> <p><code><a href="base.html#topic+list">list</a>(min = <a href="base.html#topic+min">min</a>, max = <a href="base.html#topic+max">max</a>)</code>
</p>
</li>
<li> <p><code>c(sd = "sd", var = "var")</code>
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+cols">cols</a></code>, <code><a href="base.html#topic+getOption">getOption</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># new DTSg object
DT &lt;- data.table::data.table(
  date = flow$date,
  flow1 = flow$flow - abs(rnorm(nrow(flow))),
  flow2 = flow$flow,
  flow3 = flow$flow + abs(rnorm(nrow(flow)))
)
x &lt;- DTSg$new(values = DT)

# mean and standard deviation of multiple measurements per timestamp
## R6 method
x$rowaggregate(
  resultCols = "flow",
  fun = list(mean = mean, sd = sd)
)$print()

## 'raggregate()' is a "hidden" R6 alias for 'rowaggregate()'
x$raggregate(
  resultCols = "flow",
  fun = list(mean = mean, sd = sd)
)$print()

## S3 method
print(rowaggregate(
  x = x,
  resultCols = "flow",
  fun = list(mean = mean, sd = sd)
))

</code></pre>

<hr>
<h2 id='rowbind.DTSg'>Combine rows</h2><span id='topic+rowbind.DTSg'></span><span id='topic+rowbind'></span><span id='topic+rbind'></span>

<h3>Description</h3>

<p>Combines the rows of <code><a href="#topic+DTSg">DTSg</a></code> and other suitable objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DTSg'
rowbind(x, ..., clone = getOption("DTSgClone"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rowbind.DTSg_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+DTSg">DTSg</a></code> object (S3 method only).</p>
</td></tr>
<tr><td><code id="rowbind.DTSg_+3A_...">...</code></td>
<td>
<p>Any number of <code><a href="#topic+DTSg">DTSg</a></code> objects or objects coercible to one (see
<code><a href="#topic+new">new</a></code> for further information). <code><a href="base.html#topic+list">list</a></code>s of such objects or a mixture of
lists and non-lists are also accepted.</p>
</td></tr>
<tr><td><code id="rowbind.DTSg_+3A_clone">clone</code></td>
<td>
<p>A logical specifying if the object shall be modified in place or
if a deep clone (copy) shall be made beforehand.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cols">cols</a></code>, <code><a href="base.html#topic+getOption">getOption</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># new DTSg object
x &lt;- DTSg$new(values = flow[1:500, ])

# combine rows
## R6 method
x$rowbind(
  list(flow[1001:1500, ], DTSg$new(values = flow[501:1000, ])),
  flow[1501:.N, ]
)$print()

## 'rbind()' is a "hidden" R6 alias for 'rowbind()'
x$rbind(
  list(flow[1001:1500, ], DTSg$new(values = flow[501:1000, ])),
  flow[1501:.N, ]
)$print()

## S3 method
print(rowbind(
  x = x,
  list(flow[1001:1500, ], DTSg$new(values = flow[501:1000, ])),
  flow[1501:.N, ]
))

</code></pre>

<hr>
<h2 id='S3WrapperGenerator'>S3 wrapper method generator</h2><span id='topic+S3WrapperGenerator'></span>

<h3>Description</h3>

<p>Generates S3 wrapper methods for public methods of <code>R6ClassGenerator</code>s, but
can also be used to generate &ldquo;plain&rdquo; function wrappers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>S3WrapperGenerator(R6Method, self = "x", dots = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="S3WrapperGenerator_+3A_r6method">R6Method</code></td>
<td>
<p>An <code><a href="base.html#topic+expression">expression</a></code> with or a public method (<code><a href="base.html#topic+function">function</a></code>) of
an <code>R6ClassGenerator</code>.</p>
</td></tr>
<tr><td><code id="S3WrapperGenerator_+3A_self">self</code></td>
<td>
<p>A character string specifying the name of the parameter, which
will take the R6 object.</p>
</td></tr>
<tr><td><code id="S3WrapperGenerator_+3A_dots">dots</code></td>
<td>
<p>A logical specifying if a <code>...</code> parameter shall be added as last
parameter in case none already exists. This might be required for S3
generic/method consistency.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an S3 method (<code><a href="base.html#topic+function">function</a></code>).
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+S3Methods">S3Methods</a></code>, <code><a href="R6.html#topic+R6Class">R6::R6Class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># generate an S3 wrapper method for 'alter()' of 'DTSg'
alter.DTSg &lt;- S3WrapperGenerator(
  R6Method = DTSg$public_methods$alter
)

</code></pre>

<hr>
<h2 id='setColNames.DTSg'>Set column names</h2><span id='topic+setColNames.DTSg'></span><span id='topic+setColNames'></span><span id='topic+setnames'></span>

<h3>Description</h3>

<p>Changes the column names of <code><a href="#topic+DTSg">DTSg</a></code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DTSg'
setColNames(
  x,
  cols = self$cols(class = "numeric")[1L],
  values,
  clone = getOption("DTSgClone"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="setColNames.DTSg_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+DTSg">DTSg</a></code> object (S3 method only).</p>
</td></tr>
<tr><td><code id="setColNames.DTSg_+3A_cols">cols</code></td>
<td>
<p>A character vector specifying the columns whose names shall be
set. Another possibility is a character string containing either comma
separated column names, for example, <code>"x,y,z"</code>, or the start and end column
separated by a colon, for example, <code>"x:z"</code>. The name of the <em>.dateTime</em>
column cannot be changed.</p>
</td></tr>
<tr><td><code id="setColNames.DTSg_+3A_values">values</code></td>
<td>
<p>A character vector of the same length as <code>cols</code> specifying the
desired column names. Another possibility is a character string containing
comma separated column names, for example, <code>"x,y,z"</code>.</p>
</td></tr>
<tr><td><code id="setColNames.DTSg_+3A_clone">clone</code></td>
<td>
<p>A logical specifying if the object shall be modified in place or
if a deep clone (copy) shall be made beforehand.</p>
</td></tr>
<tr><td><code id="setColNames.DTSg_+3A_...">...</code></td>
<td>
<p>Not used (S3 method only).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cols">cols</a></code>, <code><a href="base.html#topic+getOption">getOption</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># new DTSg object
x &lt;- DTSg$new(values = flow)

# rename column "flow" to "River Flow"
## R6 method
x$setColNames(
  cols = "flow",
  values = "River Flow"
)$print()

## 'setnames()' is a "hidden" R6 alias for 'setColNames()'
x$setnames(
  cols = "flow",
  values = "River Flow"
)$print()

## S3 method
print(setColNames(
  x = x,
  cols = "flow",
  values = "River Flow"
))

</code></pre>

<hr>
<h2 id='setCols.DTSg'>Set column values</h2><span id='topic+setCols.DTSg'></span><span id='topic+setCols'></span><span id='topic+set'></span>

<h3>Description</h3>

<p>Changes the values of columns, adds columns to and/or removes columns from a
<code><a href="#topic+DTSg">DTSg</a></code> object. The values can optionally be set for certain rows only.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DTSg'
setCols(
  x,
  i,
  cols = self$cols(class = "numeric")[1L],
  values,
  clone = getOption("DTSgClone"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="setCols.DTSg_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+DTSg">DTSg</a></code> object (S3 method only).</p>
</td></tr>
<tr><td><code id="setCols.DTSg_+3A_i">i</code></td>
<td>
<p>An integerish vector indexing rows (positive numbers pick and
negative numbers omit rows) or a filter expression accepted by the <code>i</code>
argument of <code><a href="data.table.html#topic+data.table">data.table::data.table</a></code>. Filter expressions can contain the
special symbol <code><a href="data.table.html#topic+special-symbols">.N</a></code>.</p>
</td></tr>
<tr><td><code id="setCols.DTSg_+3A_cols">cols</code></td>
<td>
<p>A character vector specifying the columns whose values shall be
set. Another possibility is a character string containing comma separated
column names, for example, <code>"x,y,z"</code>. The values of the <em>.dateTime</em> column
cannot be changed.</p>
</td></tr>
<tr><td><code id="setCols.DTSg_+3A_values">values</code></td>
<td>
<p>A vector, <code><a href="base.html#topic+list">list</a></code> or list-like object (e.g.
<code><a href="data.table.html#topic+data.table">data.table::data.table</a></code>) of replacement and/or new values accepted by
the <code>value</code> argument of <span class="pkg">data.table</span>'s <code><a href="data.table.html#topic+assign">data.table::set</a></code> function.
<code>NULL</code> as a value removes a column.</p>
</td></tr>
<tr><td><code id="setCols.DTSg_+3A_clone">clone</code></td>
<td>
<p>A logical specifying if the object shall be modified in place or
if a deep clone (copy) shall be made beforehand.</p>
</td></tr>
<tr><td><code id="setCols.DTSg_+3A_...">...</code></td>
<td>
<p>Not used (S3 method only).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cols">cols</a></code>, <code><a href="base.html#topic+getOption">getOption</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># new DTSg object
x &lt;- DTSg$new(values = flow)

# cap river flows to 100
## R6 method
x$setCols(
  i = flow &gt; 100,
  cols = "flow",
  values = 100
)$print()

## 'set()' is a "hidden" R6 alias for 'setCols()'
x$set(
  i = flow &gt; 100,
  cols = "flow",
  values = 100
)$print()

## S3 method
print(setCols(
  x = x,
  i = flow &gt; 100,
  cols = "flow",
  values = 100
))

# set measurement unit with the help of 'units'
if (requireNamespace("units", quietly = TRUE)) {
  ## R6 method
  x$setCols(
    cols = "flow",
    values = units::set_units(x["flow"], "m^3/s")
  )$print()

  ## S3 method
  print(setCols(
    x = x,
    cols = "flow",
    values = units::set_units(x["flow"], "m^3/s")
  ))
}

</code></pre>

<hr>
<h2 id='subset.DTSg'>Subset time series data</h2><span id='topic+subset.DTSg'></span><span id='topic+subset'></span>

<h3>Description</h3>

<p>Filters rows and/or selects columns of a <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DTSg'
subset(
  x,
  i,
  cols = self$cols(),
  funby = NULL,
  ignoreDST = FALSE,
  na.status = "implicit",
  clone = getOption("DTSgClone"),
  multiplier = 1L,
  funbyHelpers = NULL,
  funbyApproach = self$funbyApproach,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="subset.DTSg_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+DTSg">DTSg</a></code> object (S3 method only).</p>
</td></tr>
<tr><td><code id="subset.DTSg_+3A_i">i</code></td>
<td>
<p>An integerish vector indexing rows (positive numbers pick and
negative numbers omit rows) or a filter expression accepted by the <code>i</code>
argument of <code><a href="data.table.html#topic+data.table">data.table::data.table</a></code>. Filter expressions can contain the
special symbol <code><a href="data.table.html#topic+special-symbols">.N</a></code>.</p>
</td></tr>
<tr><td><code id="subset.DTSg_+3A_cols">cols</code></td>
<td>
<p>A character vector specifying the columns to select. Another
possibility is a character string containing either comma separated column
names, for example, <code>"x,y,z"</code>, or the start and end column separated by a
colon, for example, <code>"x:z"</code>. The <em>.dateTime</em> column is always selected and
cannot be part of it.</p>
</td></tr>
<tr><td><code id="subset.DTSg_+3A_funby">funby</code></td>
<td>
<p>One of the temporal aggregation level functions described in
<code><a href="#topic+TALFs">TALFs</a></code> or a user defined temporal aggregation level function. Can be
used to, for instance, select the last two observations of a certain
temporal level. See corresponding section and examples for further
information.</p>
</td></tr>
<tr><td><code id="subset.DTSg_+3A_ignoredst">ignoreDST</code></td>
<td>
<p>A logical specifying if day saving time shall be ignored
by <code>funby</code>. See corresponding section for further information.</p>
</td></tr>
<tr><td><code id="subset.DTSg_+3A_na.status">na.status</code></td>
<td>
<p>A character string. Either <code>"explicit"</code>, which makes missing
timestamps explicit according to the recognised periodicity, or
<code>"implicit"</code>, which removes timestamps with missing values on all value
columns. See corresponding section for further information.</p>
</td></tr>
<tr><td><code id="subset.DTSg_+3A_clone">clone</code></td>
<td>
<p>A logical specifying if the object shall be modified in place or
if a deep clone (copy) shall be made beforehand.</p>
</td></tr>
<tr><td><code id="subset.DTSg_+3A_multiplier">multiplier</code></td>
<td>
<p>A positive integerish value &ldquo;multiplying&rdquo; the
temporal aggregation level of certain <code><a href="#topic+TALFs">TALFs</a></code>. See corresponding section
for further information.</p>
</td></tr>
<tr><td><code id="subset.DTSg_+3A_funbyhelpers">funbyHelpers</code></td>
<td>
<p>An optional <code><a href="base.html#topic+list">list</a></code> with helper data passed on to
<code>funby</code>. See corresponding section for further information.</p>
</td></tr>
<tr><td><code id="subset.DTSg_+3A_funbyapproach">funbyApproach</code></td>
<td>
<p>A character string specifying the flavour of the applied
temporal aggregation level function. Either <code>"timechange"</code>, which utilises
<code><a href="timechange.html#topic+time_round">timechange::time_floor</a></code>, or <code>"base"</code>, which utilises <code><a href="base.html#topic+as.POSIXct">as.POSIXct</a></code>, or
<code>"fasttime"</code>, which utilises <code><a href="fasttime.html#topic+fastPOSIXct">fasttime::fastPOSIXct</a></code>, or <code>"RcppCCTZ"</code>,
which utilises <code><a href="RcppCCTZ.html#topic+parseDatetime">RcppCCTZ::parseDatetime</a></code> as the main function for
transforming timestamps.</p>
</td></tr>
<tr><td><code id="subset.DTSg_+3A_...">...</code></td>
<td>
<p>Further arguments passed on to <code>fun</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>


<h3>Status of missing values</h3>

<p>Please note that filtering rows and having or making missing timestamps
explicit equals to setting the values of all other timestamps to missing. The
default value of <code>na.status</code> is therefore <code>"implicit"</code>. To simply filter for
a consecutive range of a <code><a href="#topic+DTSg">DTSg</a></code> object while leaving the <code>na.status</code>
untouched, <code><a href="#topic+alter">alter</a></code> is probably the better choice.
</p>


<h3>User defined TALFs, TALFs helper data and multiplier</h3>

<p>User defined temporal aggregation level functions have to return a
<code><a href="base.html#topic+POSIXct">POSIXct</a></code> vector of the same length as the time series and accept two
arguments: a <code><a href="base.html#topic+POSIXct">POSIXct</a></code> vector as its first and a <code><a href="base.html#topic+list">list</a></code> with helper data
as its second. The default elements of this <code><a href="base.html#topic+list">list</a></code> are as follows:
</p>

<ul>
<li> <p><em>timezone:</em> Same as the <code><a href="#topic+DTSg">timezone</a></code> field.
</p>
</li>
<li> <p><em>ignoreDST:</em> Same as the <code>ignoreDST</code> argument.
</p>
</li>
<li> <p><em>periodicity:</em> Same as the <code><a href="#topic+DTSg">periodicity</a></code> field.
</p>
</li>
<li> <p><em>na.status:</em> Same as the <code><a href="#topic+DTSg">na.status</a></code> field.
</p>
</li>
<li> <p><em>multiplier:</em> Same as the <code>multiplier</code> argument.
</p>
</li>
<li> <p><em>funbyApproach:</em> Same as the <code>funbyApproach</code> argument.
</p>
</li></ul>

<p>Any additional element specified in the <code>funbyHelpers</code> argument is appended
to the end of the default <code><a href="base.html#topic+list">list</a></code>. In case <code>funbyHelpers</code> contains an
<em>ignoreDST, multiplier</em> or <em>funbyApproach</em> element, it takes precedence over
the respective method argument. <em>timezone, periodicity</em> and <em>na.status</em>
elements are rejected, as they are always taken directly from the object.
</p>
<p>The temporal aggregation level of certain <code><a href="#topic+TALFs">TALFs</a></code> can be adjusted with the
help of the <code>multiplier</code> argument. A <code>multiplier</code> of <code>10</code>, for example, makes
<code><a href="#topic+byY_____">byY_____</a></code> aggregate to decades instead of years. Another example
is a <code>multiplier</code> of <code>6</code> provided to <code><a href="#topic+by_m____">by_m____</a></code>. The function
then aggregates all months of all first and all months of all second half
years instead of all months of all years separately. This feature is
supported by the following <code><a href="#topic+TALFs">TALFs</a></code> of the package:
</p>

<ul>
<li> <p><code><a href="#topic+byY_____">byY_____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+byYm____">byYm____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+byYmdH__">byYmdH__</a></code> (UTC and equivalent as well as all Etc/GMT time zones only)
</p>
</li>
<li> <p><code><a href="#topic+byYmdHM_">byYmdHM_</a></code>
</p>
</li>
<li> <p><code><a href="#topic+byYmdHMS">byYmdHMS</a></code>
</p>
</li>
<li> <p><code><a href="#topic+by_m____">by_m____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+by___H__">by___H__</a></code> (UTC and equivalent as well as all Etc/GMT time zones only)
</p>
</li>
<li> <p><code><a href="#topic+by____M_">by____M_</a></code>
</p>
</li>
<li> <p><code><a href="#topic+by_____S">by_____S</a></code>
</p>
</li></ul>



<h3>Ignore day saving time</h3>

<p><code>ignoreDST</code> tells a temporal aggregation level function if it is supposed to
ignore day saving time while transforming the timestamps. This can be a
desired feature for time series strictly following the position of the sun
such as hydrological time series. Doing so ensures that diurnal variations
are preserved by all means and all intervals are of the &ldquo;correct&rdquo;
length, however, a possible limitation might be that the day saving time
shift is invariably assumed to be one hour long. This feature requires that
the periodicity of the time series has been recognised and is supported by
the following <code><a href="#topic+TALFs">TALFs</a></code> of the package:
</p>

<ul>
<li> <p><code><a href="#topic+byY_____">byY_____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+byYQ____">byYQ____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+byYm____">byYm____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+byYmd___">byYmd___</a></code>
</p>
</li>
<li> <p><code><a href="#topic+by_Q____">by_Q____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+by_m____">by_m____</a></code>
</p>
</li>
<li> <p><code><a href="#topic+by___H__">by___H__</a></code>
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+cols">cols</a></code>, <code><a href="base.html#topic+getOption">getOption</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># new DTSg object
x &lt;- DTSg$new(values = flow)

# filter for the first six observations
## R6 method
x$subset(i = 1:6)$print()

## S3 method
print(subset(x = x, i = 1:6))

# filter for the last two observations per year
## R6 method
x$subset(
  i = (.N - 1):.N,
  funby = function(x, ...) {data.table::year(x)}
)$print()

## S3 method
print(subset(
  x = x,
  i = (.N - 1):.N,
  funby = function(x, ...) {data.table::year(x)}
))

</code></pre>

<hr>
<h2 id='summary.DTSg'>Summarise time series data</h2><span id='topic+summary.DTSg'></span><span id='topic+summary'></span>

<h3>Description</h3>

<p>Calculates summary statistics of selected columns of a <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DTSg'
summary(object, cols = self$cols(), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.DTSg_+3A_object">object</code></td>
<td>
<p>A <code><a href="#topic+DTSg">DTSg</a></code> object (S3 method only).</p>
</td></tr>
<tr><td><code id="summary.DTSg_+3A_cols">cols</code></td>
<td>
<p>A character vector specifying the columns whose values shall be
summarised. Another possibility is a character string containing either
comma separated column names, for example, <code>"x,y,z"</code>, or the start and end
column separated by a colon, for example, <code>"x:z"</code>.</p>
</td></tr>
<tr><td><code id="summary.DTSg_+3A_...">...</code></td>
<td>
<p>Further arguments passed on to <code><a href="base.html#topic+summary.data.frame">summary.data.frame</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="base.html#topic+table">table</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cols">cols</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># new DTSg object
x &lt;- DTSg$new(values = flow)

# calculate summary statistics
## R6 method
x$summary()

## S3 method
summary(object = x)

</code></pre>

<hr>
<h2 id='TALFs'>Temporal Aggregation Level Functions (TALFs)</h2><span id='topic+TALFs'></span><span id='topic+byY_____'></span><span id='topic+byYQ____'></span><span id='topic+byYm____'></span><span id='topic+byYmd___'></span><span id='topic+byYmdH__'></span><span id='topic+byYmdHM_'></span><span id='topic+byYmdHMS'></span><span id='topic+by______'></span><span id='topic+by_Q____'></span><span id='topic+by_m____'></span><span id='topic+by___H__'></span><span id='topic+by____M_'></span><span id='topic+by_____S'></span>

<h3>Description</h3>

<p>Simply hand over one of these functions to the <code>funby</code> argument of one of the
methods of a <code><a href="#topic+DTSg">DTSg</a></code> object, which supports it. The method then does the
rest of the work. See respective calling method for further information.
Other uses are possible, but not recommended.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>byY_____(.dateTime, .helpers)

byYQ____(.dateTime, .helpers)

byYm____(.dateTime, .helpers)

byYmd___(.dateTime, .helpers)

byYmdH__(.dateTime, .helpers)

byYmdHM_(.dateTime, .helpers)

byYmdHMS(.dateTime, .helpers)

by______(.dateTime, .helpers)

by_Q____(.dateTime, .helpers)

by_m____(.dateTime, .helpers)

by___H__(.dateTime, .helpers)

by____M_(.dateTime, .helpers)

by_____S(.dateTime, .helpers)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="TALFs_+3A_.datetime">.dateTime</code></td>
<td>
<p>A <code><a href="base.html#topic+POSIXct">POSIXct</a></code> vector.</p>
</td></tr>
<tr><td><code id="TALFs_+3A_.helpers">.helpers</code></td>
<td>
<p>A <code><a href="base.html#topic+list">list</a></code> with helper data as handed over by methods of
<code><a href="#topic+DTSg">DTSg</a></code> objects, which support the <code>funby</code> argument.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>All functions return a <code><a href="base.html#topic+POSIXct">POSIXct</a></code> vector with timestamps
corresponding to the function's temporal aggregation level.
</p>


<h3>Families and flavours</h3>

<p>There are two families of temporal aggregation level functions. The one
family truncates timestamps (truncating family), the other extracts a certain
part of them (extracting family). Each family comes in four flavours: the
first relies solely on base <span class="rlang"><b>R</b></span>, the second utilises <code><a href="fasttime.html#topic+fastPOSIXct">fasttime::fastPOSIXct</a></code>
of <span class="pkg">fasttime</span>, the third <code><a href="RcppCCTZ.html#topic+parseDatetime">RcppCCTZ::parseDatetime</a></code> of <span class="pkg">RcppCCTZ</span>
and the fourth <code><a href="timechange.html#topic+time_round">timechange::time_floor</a></code> of <span class="pkg">timechange</span>.
</p>
<p>The <span class="pkg">timechange</span> flavour generally is the fastest for both families of
functions and all time zones. Second best option for the extracting family of
functions generally is the <span class="pkg">fasttime</span> flavour, which, however, works with
UTC and equivalent as well as all Etc/GMT time zones only (execute
<code>grep("^(Etc/)?(UCT|UTC)$|^(Etc/)?GMT(\\+|-)?0?$", OlsonNames(), ignore.case = TRUE, value = TRUE)</code> for a full list of supported time zones) and is
limited to timestamps between the years 1970 and 2199. For time zones other
than UTC and equivalent the <span class="pkg">RcppCCTZ</span> flavour generally is the second
best option.
</p>
<p>Use the <code>funbyApproach</code> argument of the respective calling method in order to
specify the utilised flavour.
</p>
<p>The truncating family sets timestamps to the lowest possible point in time of
the corresponding temporal aggregation level:
</p>

<ul>
<li> <p><code>byY_____</code> truncates to year,    e.g. <em>2000-11-11 11:11:11.1</em> becomes <em>2000-01-01 00:00:00.0</em>
</p>
</li>
<li> <p><code>byYQ____</code> truncates to quarter, e.g. <em>2000-11-11 11:11:11.1</em> becomes <em>2000-10-01 00:00:00.0</em>
</p>
</li>
<li> <p><code>byYm____</code> truncates to month,   e.g. <em>2000-11-11 11:11:11.1</em> becomes <em>2000-11-01 00:00:00.0</em>
</p>
</li>
<li> <p><code>byYmd___</code> truncates to day,     e.g. <em>2000-11-11 11:11:11.1</em> becomes <em>2000-11-11 00:00:00.0</em>
</p>
</li>
<li> <p><code>byYmdH__</code> truncates to hour,    e.g. <em>2000-11-11 11:11:11.1</em> becomes <em>2000-11-11 11:00:00.0</em>
</p>
</li>
<li> <p><code>byYmdHM_</code> truncates to minute,  e.g. <em>2000-11-11 11:11:11.1</em> becomes <em>2000-11-11 11:11:00.0</em>
</p>
</li>
<li> <p><code>byYmdHMS</code> truncates to second,  e.g. <em>2000-11-11 11:11:11.1</em> becomes <em>2000-11-11 11:11:11.0</em>
</p>
</li></ul>

<p>By convention, the extracting family sets the year to 2199 and extracts a
certain part of timestamps:
</p>

<ul>
<li> <p><code>by______</code> extracts nothing,      i.e.          all timestamps become  <em>2199-01-01 00:00:00.0</em>
</p>
</li>
<li> <p><code>by_Q____</code> extracts the quarters, e.g. <em>2000-11-11 11:11:11.1</em> becomes <em>2199-10-01 00:00:00.0</em>
</p>
</li>
<li> <p><code>by_m____</code> extracts the months,   e.g. <em>2000-11-11 11:11:11.1</em> becomes <em>2199-11-01 00:00:00.0</em>
</p>
</li>
<li> <p><code>by___H__</code> extracts the hours,    e.g. <em>2000-11-11 11:11:11.1</em> becomes <em>2199-01-01 11:00:00.0</em>
</p>
</li>
<li> <p><code>by____M_</code> extracts the minutes,  e.g. <em>2000-11-11 11:11:11.1</em> becomes <em>2199-01-01 00:11:00.0</em>
</p>
</li>
<li> <p><code>by_____S</code> extracts the seconds,  e.g. <em>2000-11-11 11:11:11.1</em> becomes <em>2199-01-01 00:00:11.0</em>
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+aggregate">aggregate</a></code>, <code><a href="#topic+colapply">colapply</a></code>, <code><a href="#topic+subset">subset</a></code>
</p>

<hr>
<h2 id='values.DTSg'>Get values</h2><span id='topic+values.DTSg'></span><span id='topic+values'></span>

<h3>Description</h3>

<p>Returns the values of a <code><a href="#topic+DTSg">DTSg</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DTSg'
values(
  x,
  reference = FALSE,
  drop = FALSE,
  class = c("data.table", "data.frame"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="values.DTSg_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+DTSg">DTSg</a></code> object (S3 method only).</p>
</td></tr>
<tr><td><code id="values.DTSg_+3A_reference">reference</code></td>
<td>
<p>A logical specifying if a copy of the values or a reference
to the values shall be returned. See corresponding section for further
information.</p>
</td></tr>
<tr><td><code id="values.DTSg_+3A_drop">drop</code></td>
<td>
<p>A logical specifying if the object and all references to it shall
be removed from the global (and only the global) environment after
successfully returning its values. This feature allows for a resource
efficient destruction of a <code><a href="#topic+DTSg">DTSg</a></code> object while preserving its values.</p>
</td></tr>
<tr><td><code id="values.DTSg_+3A_class">class</code></td>
<td>
<p>A character string specifying the class of the returned values.
<code>"data.frame"</code> only works when either a copy of the values is returned or
the object is dropped.</p>
</td></tr>
<tr><td><code id="values.DTSg_+3A_...">...</code></td>
<td>
<p>Not used (S3 method only).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="data.table.html#topic+data.table">data.table::data.table</a></code>, a reference to a
<code><a href="data.table.html#topic+data.table">data.table::data.table</a></code> or a <code><a href="base.html#topic+data.frame">data.frame</a></code>.
</p>


<h3>Reference to the values</h3>

<p>A reference to the values of a <code><a href="#topic+DTSg">DTSg</a></code> object can be used to modify them in
place. This includes the <em>.dateTime</em> column, which serves as the object's
time index. Modifying this column can therefore endanger the object's
integrity. In case needs to do so ever arise, <code><a href="#topic+refresh">refresh</a></code> should be called
immediately afterwards in order to check the object's integrity.
</p>


<h3>Note</h3>

<p>The original name of the <em>.dateTime</em> column is restored when not returned as
a reference or when dropped.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># new DTSg object
x &lt;- DTSg$new(values = flow)

# get values
## R6 method
x$values()

## S3 method
values(x = x)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
