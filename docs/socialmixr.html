<!DOCTYPE html><html lang="en"><head><title>Help for package socialmixr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {socialmixr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#.get_survey'><p>Internal function to get survey data</p></a></li>
<li><a href='#check'><p>Check contact survey data</p></a></li>
<li><a href='#clean'><p>Clean contact survey data</p></a></li>
<li><a href='#contact_matrix'><p>Generate a contact matrix from diary survey data</p></a></li>
<li><a href='#download_survey'><p>Download a survey from its Zenodo repository</p></a></li>
<li><a href='#get_citation'><p>Citation for a survey</p></a></li>
<li><a href='#get_survey'><p>Get a survey, either from its Zenodo repository, a set of files, or a survey variable</p></a></li>
<li><a href='#is_doi'><p>Checks if a character string is a DOI</p></a></li>
<li><a href='#limits_to_agegroups'><p>Convert lower age limits to age groups.</p></a></li>
<li><a href='#list_surveys'><p>List all surveys available for download</p></a></li>
<li><a href='#load_survey'><p>Load a survey from local files</p></a></li>
<li><a href='#matrix_plot'><p>Draws an image plot of a contact matrix with a legend strip and the numeric values in the cells.</p></a></li>
<li><a href='#polymod'><p>Social contact data from 8 European countries</p></a></li>
<li><a href='#pop_age'><p>Change age groups in population data</p></a></li>
<li><a href='#reduce_agegroups'><p>Reduce the number of age groups given a broader set of limits</p></a></li>
<li><a href='#survey'><p>Contact survey</p></a></li>
<li><a href='#survey_countries'><p>List all countries contained in a survey</p></a></li>
<li><a href='#wpp_age'><p>Get age-specific population data according to the World Population Prospects 2017 edition</p></a></li>
<li><a href='#wpp_countries'><p>List all countries and regions for which socialmixr has population data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Social Mixing Matrices for Infectious Disease Modelling</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides methods for sampling contact matrices from diary
    data for use in infectious disease modelling, as discussed in Mossong
    et al. (2008) &lt;<a href="https://doi.org/10.1371%2Fjournal.pmed.0050074">doi:10.1371/journal.pmed.0050074</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>countrycode, curl, data.table, grDevices, httr, jsonlite,
lubridate, memoise, oai, wpp2017, xml2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>ggplot2, here, knitr, purrr, reshape2, rmarkdown, roxyglobals
(&ge; 1.0.0), testthat</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/epiforecasts/socialmixr">https://github.com/epiforecasts/socialmixr</a>,
<a href="https://epiforecasts.io/socialmixr/">https://epiforecasts.io/socialmixr/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/epiforecasts/socialmixr/issues">https://github.com/epiforecasts/socialmixr/issues</a></td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-10-18 14:59:45 UTC; eidesfun</td>
</tr>
<tr>
<td>Author:</td>
<td>Sebastian Funk [aut, cre],
  Lander Willem [aut],
  Hugo Gruson [aut],
  Maria Bekker-Nielsen Dunbar [ctb],
  Carl A. B. Pearson [ctb],
  Sam Clifford [ctb],
  Christopher Jarvis [ctb],
  Alexis Robert [ctb],
  Niel Hens [ctb],
  Pietro Coletti [col, dtm]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Sebastian Funk &lt;sebastian.funk@lshtm.ac.uk&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-10-18 15:20:01 UTC</td>
</tr>
</table>
<hr>
<h2 id='.get_survey'>Internal function to get survey data</h2><span id='topic+.get_survey'></span>

<h3>Description</h3>

<p>Internal function to get survey data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.get_survey(survey, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".get_survey_+3A_survey">survey</code></td>
<td>
<p>a DOI or url to get the survey from, or a <code><a href="#topic+survey">survey()</a></code> object (in which case only cleaning is done).</p>
</td></tr>
<tr><td><code id=".get_survey_+3A_...">...</code></td>
<td>
<p>options for <code><a href="#topic+clean">clean()</a></code>, which is called at the end of this</p>
</td></tr>
</table>

<hr>
<h2 id='check'>Check contact survey data</h2><span id='topic+check'></span><span id='topic+check.survey'></span>

<h3>Description</h3>

<p>Checks that a survey fulfills all the requirements to work with the 'contact_matrix' function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'survey'
check(
  x,
  id.column = "part_id",
  participant.age.column = "part_age",
  country.column = "country",
  year.column = "year",
  contact.age.column = "cnt_age",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+survey">survey()</a></code> object</p>
</td></tr>
<tr><td><code id="check_+3A_id.column">id.column</code></td>
<td>
<p>the column in both the <code>participants</code> and <code>contacts</code> data frames that links contacts to participants</p>
</td></tr>
<tr><td><code id="check_+3A_participant.age.column">participant.age.column</code></td>
<td>
<p>the column in the <code>participants</code> data frame containing participants' age; if this does not exist, at least columns &quot;..._exact&quot;, &quot;..._est_min&quot; and &quot;..._est_max&quot; must (see the <code>estimated.participant.age</code> option in <code><a href="#topic+contact_matrix">contact_matrix()</a></code>)</p>
</td></tr>
<tr><td><code id="check_+3A_country.column">country.column</code></td>
<td>
<p>the column in the <code>participants</code> data frame containing the country in which the participant was queried</p>
</td></tr>
<tr><td><code id="check_+3A_year.column">year.column</code></td>
<td>
<p>the column in the <code>participants</code> data frame containing the year in which the participant was queried</p>
</td></tr>
<tr><td><code id="check_+3A_contact.age.column">contact.age.column</code></td>
<td>
<p>the column in the <code>contacts</code> data frame containing the age of contacts; if this does not exist, at least columns &quot;..._exact&quot;, &quot;..._est_min&quot; and &quot;..._est_max&quot; must (see the <code>estimated.contact.age</code> option in <code><a href="#topic+contact_matrix">contact_matrix()</a></code>)</p>
</td></tr>
<tr><td><code id="check_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisibly returns a character vector of the relevant columns
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(polymod)
check(polymod)
</code></pre>

<hr>
<h2 id='clean'>Clean contact survey data</h2><span id='topic+clean'></span><span id='topic+clean.survey'></span>

<h3>Description</h3>

<p>Cleans survey data to work with the 'contact_matrix' function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'survey'
clean(x, country.column = "country", participant.age.column = "part_age", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clean_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+survey">survey()</a></code> object</p>
</td></tr>
<tr><td><code id="clean_+3A_country.column">country.column</code></td>
<td>
<p>the name of the country in which the survey participant was interviewed</p>
</td></tr>
<tr><td><code id="clean_+3A_participant.age.column">participant.age.column</code></td>
<td>
<p>the column in <code>x$participants</code> containing participants' age</p>
</td></tr>
<tr><td><code id="clean_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a cleaned survey in the correct format
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(polymod)
cleaned &lt;- clean(polymod) # not really necessary as the 'polymod' data set has already been cleaned
</code></pre>

<hr>
<h2 id='contact_matrix'>Generate a contact matrix from diary survey data</h2><span id='topic+contact_matrix'></span>

<h3>Description</h3>

<p>Samples a contact survey
</p>


<h3>Usage</h3>

<pre><code class='language-R'>contact_matrix(
  survey,
  countries = NULL,
  survey.pop,
  age.limits,
  filter,
  counts = FALSE,
  symmetric = FALSE,
  split = FALSE,
  sample.participants = FALSE,
  estimated.participant.age = c("mean", "sample", "missing"),
  estimated.contact.age = c("mean", "sample", "missing"),
  missing.participant.age = c("remove", "keep"),
  missing.contact.age = c("remove", "sample", "keep", "ignore"),
  weights = NULL,
  weigh.dayofweek = FALSE,
  weigh.age = FALSE,
  weight.threshold = NA,
  sample.all.age.groups = FALSE,
  return.part.weights = FALSE,
  return.demography = NA,
  per.capita = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="contact_matrix_+3A_survey">survey</code></td>
<td>
<p>a <code><a href="#topic+survey">survey()</a></code> object</p>
</td></tr>
<tr><td><code id="contact_matrix_+3A_countries">countries</code></td>
<td>
<p>limit to one or more countries; if not given, will use all countries in the survey; these can be given as country names or 2-letter (ISO Alpha-2) country codes</p>
</td></tr>
<tr><td><code id="contact_matrix_+3A_survey.pop">survey.pop</code></td>
<td>
<p>survey population &ndash; either a data frame with columns 'lower.age.limit' and 'population', or a character vector giving the name(s) of a country or countries from the list that can be obtained via <code>wpp_countries</code>; if not given, will use the country populations from the chosen countries, or all countries in the survey if <code>countries</code> is not given</p>
</td></tr>
<tr><td><code id="contact_matrix_+3A_age.limits">age.limits</code></td>
<td>
<p>lower limits of the age groups over which to construct the matrix</p>
</td></tr>
<tr><td><code id="contact_matrix_+3A_filter">filter</code></td>
<td>
<p>any filters to apply to the data, given as list of the form (column=filter_value) - only contacts that have 'filter_value' in 'column' will be considered. If multiple filters are given, they are all applied independently and in the sequence given.</p>
</td></tr>
<tr><td><code id="contact_matrix_+3A_counts">counts</code></td>
<td>
<p>whether to return counts (instead of means)</p>
</td></tr>
<tr><td><code id="contact_matrix_+3A_symmetric">symmetric</code></td>
<td>
<p>whether to make matrix symmetric, such that <code class="reqn">c_{ij}N_i = c_{ji}N_j</code>.</p>
</td></tr>
<tr><td><code id="contact_matrix_+3A_split">split</code></td>
<td>
<p>whether to split the contact matrix into the mean number of contacts, in each age group (split further into the product of the mean number of contacts across the whole population (<code>mean.contacts</code>), a normalisation constant (<code>normalisation</code>) and age-specific variation in contacts (<code>contacts</code>)), multiplied with an assortativity matrix (<code>assortativity</code>) and a population multiplier (<code>demograpy</code>). For more detail on this, see the &quot;Getting Started&quot; vignette.</p>
</td></tr>
<tr><td><code id="contact_matrix_+3A_sample.participants">sample.participants</code></td>
<td>
<p>whether to sample participants randomly (with replacement); done multiple times this can be used to assess uncertainty in the generated contact matrices. See the &quot;Bootstrapping&quot; section in the vignette for how to do this..</p>
</td></tr>
<tr><td><code id="contact_matrix_+3A_estimated.participant.age">estimated.participant.age</code></td>
<td>
<p>if set to &quot;mean&quot; (default), people whose ages are given as a range (in columns named &quot;..._est_min&quot; and &quot;..._est_max&quot;) but not exactly (in a column named &quot;..._exact&quot;) will have their age set to the mid-point of the range; if set to &quot;sample&quot;, the age will be sampled from the range; if set to &quot;missing&quot;, age ranges will be treated as missing</p>
</td></tr>
<tr><td><code id="contact_matrix_+3A_estimated.contact.age">estimated.contact.age</code></td>
<td>
<p>if set to &quot;mean&quot; (default), contacts whose ages are given as a range (in columns named &quot;..._est_min&quot; and &quot;..._est_max&quot;) but not exactly (in a column named &quot;..._exact&quot;) will have their age set to the mid-point of the range; if set to &quot;sample&quot;, the age will be sampled from the range; if set to &quot;missing&quot;, age ranges will be treated as missing</p>
</td></tr>
<tr><td><code id="contact_matrix_+3A_missing.participant.age">missing.participant.age</code></td>
<td>
<p>if set to &quot;remove&quot; (default), participants without age information are removed; if set to &quot;keep&quot;, participants with missing age are kept and treated as a separate age group</p>
</td></tr>
<tr><td><code id="contact_matrix_+3A_missing.contact.age">missing.contact.age</code></td>
<td>
<p>if set to &quot;remove&quot; (default), participants that have contacts without age information are removed; if set to &quot;sample&quot;, contacts without age information are sampled from all the contacts of participants of the same age group; if set to &quot;keep&quot;, contacts with missing age are kept and treated as a separate age group; if set to &quot;ignore&quot;, contact with missing age are ignored in the contact analysis</p>
</td></tr>
<tr><td><code id="contact_matrix_+3A_weights">weights</code></td>
<td>
<p>column names(s) of the participant data of the <code><a href="#topic+survey">survey()</a></code> object with user-specified weights (default = empty vector)</p>
</td></tr>
<tr><td><code id="contact_matrix_+3A_weigh.dayofweek">weigh.dayofweek</code></td>
<td>
<p>whether to weigh social contacts data by the day of the week (weight (5/7 / N_week / N) for weekdays and (2/7 / N_weekend / N) for weekends)</p>
</td></tr>
<tr><td><code id="contact_matrix_+3A_weigh.age">weigh.age</code></td>
<td>
<p>whether to weigh social contacts data by the age of the participants (vs. the populations' age distribution)</p>
</td></tr>
<tr><td><code id="contact_matrix_+3A_weight.threshold">weight.threshold</code></td>
<td>
<p>threshold value for the standardized weights before running an additional standardisation (default 'NA' = no cutoff)</p>
</td></tr>
<tr><td><code id="contact_matrix_+3A_sample.all.age.groups">sample.all.age.groups</code></td>
<td>
<p>what to do if sampling participants (with <code>sample.participants = TRUE</code>) fails to sample participants from one or more age groups; if FALSE (default), corresponding rows will be set to NA, if TRUE the sample will be discarded and a new one taken instead</p>
</td></tr>
<tr><td><code id="contact_matrix_+3A_return.part.weights">return.part.weights</code></td>
<td>
<p>boolean to return the participant weights</p>
</td></tr>
<tr><td><code id="contact_matrix_+3A_return.demography">return.demography</code></td>
<td>
<p>boolean to explicitly return demography data that corresponds to the survey data (default 'NA' = if demography data is requested by other function parameters)</p>
</td></tr>
<tr><td><code id="contact_matrix_+3A_per.capita">per.capita</code></td>
<td>
<p>whether to return a matrix with contact rates per capita (default is FALSE and not possible if 'counts=TRUE' or 'split=TRUE')</p>
</td></tr>
<tr><td><code id="contact_matrix_+3A_...">...</code></td>
<td>
<p>further arguments to pass to <code><a href="#topic+get_survey">get_survey()</a></code>, <code><a href="#topic+check">check()</a></code> and <code><a href="#topic+pop_age">pop_age()</a></code> (especially column names)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a contact matrix, and the underlying demography of the surveyed population
</p>


<h3>Author(s)</h3>

<p>Sebastian Funk
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(polymod)
contact_matrix(polymod, countries = "United Kingdom", age.limits = c(0, 1, 5, 15))
</code></pre>

<hr>
<h2 id='download_survey'>Download a survey from its Zenodo repository</h2><span id='topic+download_survey'></span>

<h3>Description</h3>

<p>Downloads survey data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_survey(survey, dir = NULL, sleep = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_survey_+3A_survey">survey</code></td>
<td>
<p>a URL (see <code><a href="#topic+list_surveys">list_surveys()</a></code>)</p>
</td></tr>
<tr><td><code id="download_survey_+3A_dir">dir</code></td>
<td>
<p>a directory to save the files to; if not given, will save to a
temporary directory</p>
</td></tr>
<tr><td><code id="download_survey_+3A_sleep">sleep</code></td>
<td>
<p>time to sleep between requests to avoid overloading the server
(passed on to <code><a href="base.html#topic+Sys.sleep">Sys.sleep</a></code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of filenames that can be used with <a href="#topic+load_survey">load_survey</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
list_surveys()
peru_survey &lt;- download_survey("https://doi.org/10.5281/zenodo.1095664")

## End(Not run)
</code></pre>

<hr>
<h2 id='get_citation'>Citation for a survey</h2><span id='topic+get_citation'></span>

<h3>Description</h3>

<p>Gets a full citation for a <code><a href="#topic+survey">survey()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_citation(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_citation_+3A_x">x</code></td>
<td>
<p>a character vector of surveys to cite</p>
</td></tr>
</table>


<h3>Value</h3>

<p>citation as bibentry
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(polymod)
citation &lt;- get_citation(polymod)
print(citation)
print(citation, style = "bibtex")
</code></pre>

<hr>
<h2 id='get_survey'>Get a survey, either from its Zenodo repository, a set of files, or a survey variable</h2><span id='topic+get_survey'></span>

<h3>Description</h3>

<p>Downloads survey data, or extracts them from files, and returns a clean data set. If a survey URL is accessed multiple times, the data will be cached (unless <code>clear_cache</code> is set to <code>TRUE</code>) to avoid repeated downloads.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_survey(survey, clear_cache = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_survey_+3A_survey">survey</code></td>
<td>
<p>a DOI or url to get the survey from, or a <code><a href="#topic+survey">survey()</a></code> object (in which case only cleaning is done).</p>
</td></tr>
<tr><td><code id="get_survey_+3A_clear_cache">clear_cache</code></td>
<td>
<p>logical, whether to clear the cache before downloading the survey; by default, the cache is not cleared and so multiple calls of this function to access the same survey will not result in repeated downloads</p>
</td></tr>
<tr><td><code id="get_survey_+3A_...">...</code></td>
<td>
<p>options for <code><a href="#topic+clean">clean()</a></code>, which is called at the end of this</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If survey objects are used repeatedly the downloaded files can be saved and reloaded between sessions then survey objects can be saved/loaded using <code><a href="base.html#topic+readRDS">base::saveRDS()</a></code> and <code><a href="base.html#topic+readRDS">base::readRDS()</a></code>, or via the individual survey files that can be downloaded using <code><a href="#topic+download_survey">download_survey()</a></code> and subsequently loaded using <code><a href="#topic+load_survey">load_survey()</a></code>.
</p>


<h3>Value</h3>

<p>a survey in the correct format
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
list_surveys()
peru_survey &lt;- get_survey("https://doi.org/10.5281/zenodo.1095664")

## End(Not run)
</code></pre>

<hr>
<h2 id='is_doi'>Checks if a character string is a DOI</h2><span id='topic+is_doi'></span>

<h3>Description</h3>

<p>Checks if a character string is a DOI
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_doi(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_doi_+3A_x">x</code></td>
<td>
<p>Character vector; the string or strings to check</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical; <code>TRUE</code> if <code>x</code> is a DOI, <code>FALSE</code> otherwise
</p>


<h3>Author(s)</h3>

<p>Sebastian Funk
</p>

<hr>
<h2 id='limits_to_agegroups'>Convert lower age limits to age groups.</h2><span id='topic+limits_to_agegroups'></span>

<h3>Description</h3>

<p>Mostly used for plot labelling
</p>


<h3>Usage</h3>

<pre><code class='language-R'>limits_to_agegroups(
  x,
  limits = sort(unique(x)),
  notation = c("dashes", "brackets")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="limits_to_agegroups_+3A_x">x</code></td>
<td>
<p>age limits to transform</p>
</td></tr>
<tr><td><code id="limits_to_agegroups_+3A_limits">limits</code></td>
<td>
<p>lower age limits; if not given, will use all limits in <code>x</code></p>
</td></tr>
<tr><td><code id="limits_to_agegroups_+3A_notation">notation</code></td>
<td>
<p>whether to use bracket notation, e.g. [0,4) or dash
notation, e.g. 0-4)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Age groups as specified in <code>notation</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>limits_to_agegroups(c(0, 5, 10))
</code></pre>

<hr>
<h2 id='list_surveys'>List all surveys available for download</h2><span id='topic+list_surveys'></span>

<h3>Description</h3>

<p>List all surveys available for download
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_surveys(clear_cache = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="list_surveys_+3A_clear_cache">clear_cache</code></td>
<td>
<p>logical, whether to clear the cache before downloading the survey; by default, the cache is not cleared and so multiple calls of this function to access the same survey will not result in repeated downloads</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character vector of surveys
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
list_surveys()

## End(Not run)
</code></pre>

<hr>
<h2 id='load_survey'>Load a survey from local files</h2><span id='topic+load_survey'></span>

<h3>Description</h3>

<p>Loads a survey from a local file system. Tables are expected as csv files, and a reference (if present) as JSON.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_survey(files, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="load_survey_+3A_files">files</code></td>
<td>
<p>a vector of file names as returned by <code><a href="#topic+download_survey">download_survey()</a></code></p>
</td></tr>
<tr><td><code id="load_survey_+3A_...">...</code></td>
<td>
<p>options for <code><a href="#topic+clean">clean()</a></code>, which is called at the end of this</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a survey in the correct format
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
list_surveys()
peru_files &lt;- download_survey("https://doi.org/10.5281/zenodo.1095664")
peru_survey &lt;- load_survey(peru_files)

## End(Not run)
</code></pre>

<hr>
<h2 id='matrix_plot'>Draws an image plot of a contact matrix with a legend strip and the numeric values in the cells.</h2><span id='topic+matrix_plot'></span>

<h3>Description</h3>

<p>This function combines the R image.plot function with numeric contact rates in the matrix cells.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>matrix_plot(
  mij,
  min.legend = 0,
  max.legend = NA,
  num.digits = 2,
  num.colors = 50,
  main,
  xlab,
  ylab,
  legend.width,
  legend.mar,
  legend.shrink,
  cex.lab,
  cex.axis,
  cex.text,
  color.palette = heat.colors
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="matrix_plot_+3A_mij">mij</code></td>
<td>
<p>a contact matrix containing contact rates between participants of age i (rows) with contacts of age j (columns). This is the default matrix format of <code><a href="#topic+contact_matrix">contact_matrix()</a></code>.</p>
</td></tr>
<tr><td><code id="matrix_plot_+3A_min.legend">min.legend</code></td>
<td>
<p>the color scale minimum (default = 0). Set to NA to use the minimum value of <code>mij</code>.</p>
</td></tr>
<tr><td><code id="matrix_plot_+3A_max.legend">max.legend</code></td>
<td>
<p>the color scale maximum (default = NA). Set to NA to use the maximum value of <code>mij</code>.</p>
</td></tr>
<tr><td><code id="matrix_plot_+3A_num.digits">num.digits</code></td>
<td>
<p>the number of digits when rounding the contact rates (default = 2). Use NA to disable this.</p>
</td></tr>
<tr><td><code id="matrix_plot_+3A_num.colors">num.colors</code></td>
<td>
<p>the number of color breaks (default = 50)</p>
</td></tr>
<tr><td><code id="matrix_plot_+3A_main">main</code></td>
<td>
<p>the figure title</p>
</td></tr>
<tr><td><code id="matrix_plot_+3A_xlab">xlab</code></td>
<td>
<p>a title for the x axis (default: &quot;Age group (years)&quot;)</p>
</td></tr>
<tr><td><code id="matrix_plot_+3A_ylab">ylab</code></td>
<td>
<p>a title for the y axis (default: &quot;Contact age group (years)&quot;)</p>
</td></tr>
<tr><td><code id="matrix_plot_+3A_legend.width">legend.width</code></td>
<td>
<p>width of the legend strip in characters. Default is 1.</p>
</td></tr>
<tr><td><code id="matrix_plot_+3A_legend.mar">legend.mar</code></td>
<td>
<p>width in characters of legend margin. Default is 5.1.</p>
</td></tr>
<tr><td><code id="matrix_plot_+3A_legend.shrink">legend.shrink</code></td>
<td>
<p>amount to shrink the size of legend relative to the full height or width of the plot. Default is 0.9.</p>
</td></tr>
<tr><td><code id="matrix_plot_+3A_cex.lab">cex.lab</code></td>
<td>
<p>size of the x and y labels (default: 1.2)</p>
</td></tr>
<tr><td><code id="matrix_plot_+3A_cex.axis">cex.axis</code></td>
<td>
<p>size of the axis labels (default: 0.8)</p>
</td></tr>
<tr><td><code id="matrix_plot_+3A_cex.text">cex.text</code></td>
<td>
<p>size of the numeric values in the matrix (default: 1)</p>
</td></tr>
<tr><td><code id="matrix_plot_+3A_color.palette">color.palette</code></td>
<td>
<p>the color palette to use (default: <code><a href="grDevices.html#topic+heat.colors">heat.colors()</a></code>). Other examples are <code><a href="grDevices.html#topic+topo.colors">topo.colors()</a></code>, <code><a href="grDevices.html#topic+terrain.colors">terrain.colors()</a></code> and <code><a href="grDevices.html#topic+hcl.colors">hcl.colors()</a></code>. User-defined functions are also possible if they take the number of colors to be in the palette as function argument.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a function using basic R graphics to visualise a social contact matrix.
</p>


<h3>Author(s)</h3>

<p>Lander Willem
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data(polymod)
mij &lt;- contact_matrix(polymod, countries = "United Kingdom", age.limits = c(0, 18, 65))$matrix
matrix_plot(mij)

## End(Not run)
</code></pre>

<hr>
<h2 id='polymod'>Social contact data from 8 European countries</h2><span id='topic+polymod'></span>

<h3>Description</h3>

<p>A dataset containing social mixing diary data from 8 European countries:
Belgium, Germany, Finland, Great Britain, Italy, Luxembourg,
The Netherlands and Poland.
The Data are fully described in Mossong J, Hens N, Jit M, Beutels P, Auranen
K, Mikolajczyk R, et al. (2008) Social Contacts and Mixing Patterns Relevant
to the Spread of Infectious Diseases. PLoS Med 5(3): e74.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>polymod
</code></pre>


<h3>Format</h3>

<p>A list of two data frames:
</p>

<dl>
<dt>participants</dt><dd><p>the study participant, with age, country, year and day
of the week (starting with 1 = Monday)</p>
</dd>
<dt>contacts</dt><dd><p>reported contacts of the study participants. The variable
phys_contact has two levels (1 denotes physical contact while 2 denotes
non-physical contact), duration_multi has five levels (1 is less than 5
minutes while 5 is more than 4 hours, increasing in the order found in
Figure 1 in Mossong et al.), and frequency_multi has five levels (1 is
daily, 2 is weekly, 3 is monthly, 4 is less often, and 5 is first time)</p>
</dd>
</dl>
<p>All other variables are described on the Zenodo repository of the data,
available at <a href="https://doi.org/10.5281/zenodo.1043437">doi:10.5281/zenodo.1043437</a>

</p>


<h3>Source</h3>

<p><a href="https://doi.org/10.1371/journal.pmed.0050074">doi:10.1371/journal.pmed.0050074</a>
</p>

<hr>
<h2 id='pop_age'>Change age groups in population data</h2><span id='topic+pop_age'></span>

<h3>Description</h3>

<p>This changes population data to have age groups with the given age.limits, extrapolating linearly between age groups (if more are requested than available) and summing populations (if fewer are requested than available)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pop_age(
  pop,
  age.limits,
  pop.age.column = "lower.age.limit",
  pop.column = "population",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pop_age_+3A_pop">pop</code></td>
<td>
<p>a data frame with columns indicating lower age limits and population sizes (see 'age.column' and 'pop.column')</p>
</td></tr>
<tr><td><code id="pop_age_+3A_age.limits">age.limits</code></td>
<td>
<p>lower age limits of age groups to extract</p>
</td></tr>
<tr><td><code id="pop_age_+3A_pop.age.column">pop.age.column</code></td>
<td>
<p>column in the 'pop' data frame indicating the lower age group limit</p>
</td></tr>
<tr><td><code id="pop_age_+3A_pop.column">pop.column</code></td>
<td>
<p>column in the 'pop' data frame indicating the population size</p>
</td></tr>
<tr><td><code id="pop_age_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame of age-specific population data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ages_it_2015 &lt;- wpp_age("Italy", 2015)

# Modify the age data.frame to get age groups of 10 years instead of 5
pop_age(ages_it_2015, age.limit = seq(0, 100, by = 10))

# The function will also automatically interpolate if necessary
pop_age(ages_it_2015, age.limit = c(0, 18, 40, 65))

</code></pre>

<hr>
<h2 id='reduce_agegroups'>Reduce the number of age groups given a broader set of limits</h2><span id='topic+reduce_agegroups'></span>

<h3>Description</h3>

<p>Operates on lower limits
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reduce_agegroups(x, limits)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="reduce_agegroups_+3A_x">x</code></td>
<td>
<p>vector of limits</p>
</td></tr>
<tr><td><code id="reduce_agegroups_+3A_limits">limits</code></td>
<td>
<p>new limits</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector with the new age groups
</p>


<h3>Examples</h3>

<pre><code class='language-R'>reduce_agegroups(seq_len(20), c(0, 5, 10))
</code></pre>

<hr>
<h2 id='survey'>Contact survey</h2><span id='topic+survey'></span>

<h3>Description</h3>

<p>A <code>survey</code> object contains the results of a contact survey. In particular, it contains two data frames called <code>participants</code> and <code>contacts</code> that are linked by a column specified as <code>id.column</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survey(participants, contacts, reference = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="survey_+3A_participants">participants</code></td>
<td>
<p>a <code>data.frame</code> containing information on participants</p>
</td></tr>
<tr><td><code id="survey_+3A_contacts">contacts</code></td>
<td>
<p>a <code>data.frame</code> containing information on contacts</p>
</td></tr>
<tr><td><code id="survey_+3A_reference">reference</code></td>
<td>
<p>a <code>list</code> containing information needed to reference the survey, in particular it can contain$a &quot;title&quot;, &quot;bibtype&quot;, &quot;author&quot;, &quot;doi&quot;, &quot;publisher&quot;, &quot;note&quot;, &quot;year&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a new survey object
</p>


<h3>Author(s)</h3>

<p>Sebastian Funk
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(polymod)
new_survey &lt;- survey(polymod$participants, polymod$contacts)
</code></pre>

<hr>
<h2 id='survey_countries'>List all countries contained in a survey</h2><span id='topic+survey_countries'></span>

<h3>Description</h3>

<p>List all countries contained in a survey
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survey_countries(survey, country.column = "country", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="survey_countries_+3A_survey">survey</code></td>
<td>
<p>a DOI or url to get the survey from, or a <code><a href="#topic+survey">survey()</a></code> object (in which case only cleaning is done).</p>
</td></tr>
<tr><td><code id="survey_countries_+3A_country.column">country.column</code></td>
<td>
<p>column in the survey indicating the country</p>
</td></tr>
<tr><td><code id="survey_countries_+3A_...">...</code></td>
<td>
<p>further arguments for <code><a href="#topic+get_survey">get_survey()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of countries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(polymod)
survey_countries(polymod)
</code></pre>

<hr>
<h2 id='wpp_age'>Get age-specific population data according to the World Population Prospects 2017 edition</h2><span id='topic+wpp_age'></span>

<h3>Description</h3>

<p>This uses data from the <code>wpp2017</code> package but combines male and female,
and converts age groups to lower age limits. If the requested year is not present
in the historical data, wpp projections are used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wpp_age(countries, years)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="wpp_age_+3A_countries">countries</code></td>
<td>
<p>countries, will return all if not given</p>
</td></tr>
<tr><td><code id="wpp_age_+3A_years">years</code></td>
<td>
<p>years, will return all if not given</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame of age-specific population data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>wpp_age("Italy", c(1990, 2000))
</code></pre>

<hr>
<h2 id='wpp_countries'>List all countries and regions for which socialmixr has population data</h2><span id='topic+wpp_countries'></span>

<h3>Description</h3>

<p>Uses the World Population Prospects data from the <code>wpp2017</code> package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wpp_countries()
</code></pre>


<h3>Value</h3>

<p>list of countries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>wpp_countries()
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
