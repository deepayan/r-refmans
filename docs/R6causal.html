<!DOCTYPE html><html lang="en"><head><title>Help for package R6causal</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {R6causal}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#R6causal-package'><p>R6causal: R6 Class for Structural Causal Models</p></a></li>
<li><a href='#analytic_linear_gaussian'><p>Simulate data from a conditional linear Gaussian SCM</p></a></li>
<li><a href='#analytic_linear_gaussian_conditining'><p>Return the mean and the covariance matrix of the conditional distribution of a linear Gaussian SCM</p></a></li>
<li><a href='#backdoor'><p>SCM &quot;backdoor&quot; used in the examples.</p></a></li>
<li><a href='#backdoor_md'><p>SCM &quot;backdoor_md&quot; used in the examples.</p></a></li>
<li><a href='#counterfactual'><p>Counterfactual inference via simulation</p></a></li>
<li><a href='#credit'><p>SCM &quot;credit&quot; used in the credit scoring example.</p></a></li>
<li><a href='#fairness'><p>Checking fairness of a prediction via counterfactual simulation</p></a></li>
<li><a href='#frontdoor'><p>SCM &quot;frontdoor&quot; used in the examples.</p></a></li>
<li><a href='#generate_condprob'><p>Define structural function by a conditional probability table</p></a></li>
<li><a href='#LinearGaussianSCM'><p>R6 Class for linear structural causal models where background variables have Gaussian distribution</p></a></li>
<li><a href='#ParallelWorld'><p>R6 Class for parallel world models</p></a></li>
<li><a href='#R6causalimport'><p>R6causal: R6 class for structural causal models</p></a></li>
<li><a href='#run_experiment'><p>Conduct a sequence of interventions and collect the simulated data.</p></a></li>
<li><a href='#SCM'><p>R6 Class for structural causal models</p></a></li>
<li><a href='#trapdoor'><p>SCM &quot;trapdoor&quot; used in the examples.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>R6 Class for Structural Causal Models</td>
</tr>
<tr>
<td>Version:</td>
<td>0.8.3</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Juha Karvanen &lt;juha.karvanen@iki.fi&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>The implemented R6 class 'SCM' aims to simplify working with structural causal models. The missing data mechanism can be defined as a part of the structural model. The class contains methods for 1) defining a structural causal model via functions, text or conditional probability tables, 2) printing basic information on the model, 3) plotting the graph for the model using packages 'igraph' or 'qgraph', 4) simulating data from the model, 5) applying an intervention, 6) checking the identifiability of a query using the R packages 'causaleffect' and 'dosearch', 7) defining the missing data mechanism, 8) simulating incomplete data from the model according to the specified missing data mechanism and 9) checking the identifiability in a missing data problem using the R package 'dosearch'. In addition, there are functions for running experiments and doing counterfactual inference using simulation.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/AGPL-3">AGPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>causaleffect, cfid, data.table, dosearch, glue, igraph, R6,
stats, MASS</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown, knitr, qgraph, sqldf</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Collate:</td>
<td>'R6causal-package.R' 'R6causal_utils.R' 'R6causal.R'
'R6causal_examples.R' 'R6causal_counterfactual.R'
'R6causal_functions.R' 'R6causal_linear.R'</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-14 15:34:40 UTC; juhak</td>
</tr>
<tr>
<td>Author:</td>
<td>Juha Karvanen <a href="https://orcid.org/0000-0001-5530-769X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-14 16:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='R6causal-package'>R6causal: R6 Class for Structural Causal Models</h2><span id='topic+R6causal'></span><span id='topic+R6causal-package'></span>

<h3>Description</h3>

<p>The implemented R6 class 'SCM' aims to simplify working with structural causal models. The missing data mechanism can be defined as a part of the structural model. The class contains methods for 1) defining a structural causal model via functions, text or conditional probability tables, 2) printing basic information on the model, 3) plotting the graph for the model using packages 'igraph' or 'qgraph', 4) simulating data from the model, 5) applying an intervention, 6) checking the identifiability of a query using the R packages 'causaleffect' and 'dosearch', 7) defining the missing data mechanism, 8) simulating incomplete data from the model according to the specified missing data mechanism and 9) checking the identifiability in a missing data problem using the R package 'dosearch'. In addition, there are functions for running experiments and doing counterfactual inference using simulation.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Juha Karvanen <a href="mailto:juha.karvanen@iki.fi">juha.karvanen@iki.fi</a> (<a href="https://orcid.org/0000-0001-5530-769X">ORCID</a>)
</p>

<hr>
<h2 id='analytic_linear_gaussian'>Simulate data from a conditional linear Gaussian SCM</h2><span id='topic+analytic_linear_gaussian'></span>

<h3>Description</h3>

<p>Simulate data from a conditional linear Gaussian SCM
</p>


<h3>Usage</h3>

<pre><code class='language-R'>analytic_linear_gaussian(scm, situation, n)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="analytic_linear_gaussian_+3A_scm">scm</code></td>
<td>
<p>A linear Gaussian SCM</p>
</td></tr>
<tr><td><code id="analytic_linear_gaussian_+3A_situation">situation</code></td>
<td>
<p>A list with the following element:
</p>

<ul>
<li><p> condition : either a string that gives an SQL query ( e.g. &quot;select x,y,z from DATA where&quot; )
or a data.table consisting of the valid rows ( e.g. data.table::data.table( x = 0, y = 0))
</p>
</li></ul>
</td></tr>
<tr><td><code id="analytic_linear_gaussian_+3A_n">n</code></td>
<td>
<p>The number of rows in the data to be simulated</p>
</td></tr>
</table>

<hr>
<h2 id='analytic_linear_gaussian_conditining'>Return the mean and the covariance matrix of the conditional distribution of a linear Gaussian SCM</h2><span id='topic+analytic_linear_gaussian_conditining'></span>

<h3>Description</h3>

<p>Return the mean and the covariance matrix of the conditional distribution of a linear Gaussian SCM
</p>


<h3>Usage</h3>

<pre><code class='language-R'>analytic_linear_gaussian_conditining(scm, situation)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="analytic_linear_gaussian_conditining_+3A_scm">scm</code></td>
<td>
<p>A linear Gaussian SCM</p>
</td></tr>
<tr><td><code id="analytic_linear_gaussian_conditining_+3A_situation">situation</code></td>
<td>
<p>A list with the following element:
</p>

<ul>
<li><p> condition : either a string that gives an SQL query ( e.g. &quot;select x,y,z from DATA where&quot; )
or a data.table consisting of the valid rows ( e.g. data.table::data.table( x = 0, y = 0))
</p>
</li></ul>
</td></tr>
</table>

<hr>
<h2 id='backdoor'>SCM &quot;backdoor&quot; used in the examples.</h2><span id='topic+backdoor'></span>

<h3>Description</h3>

<p>Variable z fulfills the back-door criterion for P(y|do(x))
</p>


<h3>Usage</h3>

<pre><code class='language-R'>backdoor
</code></pre>


<h3>Format</h3>

<p>An object of class <code>SCM</code> (inherits from <code>R6</code>) of length 42.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>backdoor
backdoor$plot()
</code></pre>

<hr>
<h2 id='backdoor_md'>SCM &quot;backdoor_md&quot; used in the examples.</h2><span id='topic+backdoor_md'></span>

<h3>Description</h3>

<p>Variable z fulfills the back-door criterion for P(y|do(x)).
Variable z is missing completely at random. The missingness of
variables x and y depend on z.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>backdoor_md
</code></pre>


<h3>Format</h3>

<p>An object of class <code>SCM</code> (inherits from <code>R6</code>) of length 42.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>backdoor_md
backdoor_md$plot()
</code></pre>

<hr>
<h2 id='counterfactual'>Counterfactual inference via simulation</h2><span id='topic+counterfactual'></span>

<h3>Description</h3>

<p>Counterfactual inference via simulation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>counterfactual(
  scm,
  situation,
  n,
  target = NULL,
  ifunction = NULL,
  method = NULL,
  returnscm = FALSE,
  control = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="counterfactual_+3A_scm">scm</code></td>
<td>
<p>An SCM object</p>
</td></tr>
<tr><td><code id="counterfactual_+3A_situation">situation</code></td>
<td>
<p>A list or a character string. The list has the following elements:
</p>

<ul>
<li><p> do : NULL or a list containing named elements 'target' and 'ifunction' that
specify the intervention carried out in the situation
</p>
</li>
<li><p> dolist : NULL or a list of lists containing named elements 'target' and 
'ifunction' that specify the intervention carried out in each parallel world
</p>
</li>
<li><p> condition : either a string that gives an SQL query ( e.g. &quot;select x,y,z from DATA where&quot; )
or a data.table consisting of the valid rows ( e.g. data.table::data.table( x = 0, y = 0))
</p>
</li>
<li><p> condition_type : (required only if method == &quot;u_find&quot;) A character vector giving the type (&quot;continuous&quot; or &quot;discrete&quot;) of every variable in <code>situation$condition</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="counterfactual_+3A_n">n</code></td>
<td>
<p>The number of rows in the data to be simulated</p>
</td></tr>
<tr><td><code id="counterfactual_+3A_target">target</code></td>
<td>
<p>NULL or a vector of variable names that specify the target
variable(s) of the counterfactual intervention.</p>
</td></tr>
<tr><td><code id="counterfactual_+3A_ifunction">ifunction</code></td>
<td>
<p>NULL or a list of functions for the counterfactual intervention.</p>
</td></tr>
<tr><td><code id="counterfactual_+3A_method">method</code></td>
<td>
<p>The simulation method, &quot;u_find&quot;, &quot;rejection&quot; or &quot;analytic_linear_gaussian&quot;</p>
</td></tr>
<tr><td><code id="counterfactual_+3A_returnscm">returnscm</code></td>
<td>
<p>A logical, should the internally created twin SCM or parallel 
world SCM returned?</p>
</td></tr>
<tr><td><code id="counterfactual_+3A_control">control</code></td>
<td>
<p>List of parameters to be passed to the simulation method:
</p>

<ul>
<li><p> batchsize: (u_find, rejection) The size of data from n observations are resampled (default n)
</p>
</li>
<li><p> max_iterations: (u_find) The maximum number of iterations for the binary search (default 50)
</p>
</li>
<li><p> minu: (u_find) A scalar or a named list that specifies the lower starting value for the binary search (default -10)
</p>
</li>
<li><p> maxu: (u_find) A scalar or a named list that specifies the upper starting value for the binary search (default 10)
</p>
</li>
<li><p> sampling_replace: (u_find) Logical, resampling with replacement? (default TRUE)
</p>
</li>
<li><p> nonunique_jittersd: (u_find) Standard deviation of the noise to be added to the output (default NULL meaning no noise)
</p>
</li>
<li><p> maxbatchs: (u_find, rejection) The maximum number of batches for rejection sampling (for discrete variables)
</p>
</li>
<li><p> weightfunction: (u_find) A function or a named list of functions to be applied to dedicated error terms to obtain the resampling weights (default stats::dnorm)
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>A data table representing the situation after the counterfactual intervention
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cfdata &lt;- counterfactual(backdoor,
                         situation = list(
                             do = list(target = "x", ifunction = 0),
                             condition = data.table::data.table( x = 0, y = 0)),
                         target = "x",
                         ifunction = 1,
                         method = "rejection",
                         n = 1000)
mean(cfdata$y)

backdoor_parallel &lt;- ParallelWorld$new(backdoor,
                                       dolist=list(
                                         list(target = "x", ifunction = 0),
                                         list(target = list("z","x"), ifunction = list(1,0))
                                       )
)
cfdata2 &lt;- counterfactual(backdoor_parallel,
                         situation = list(
                             do = NULL,
                             condition = data.table::data.table( y = 0, y_1 = 0, y_2 = 0)),
                         target = "x",
                         ifunction = 1,
                         method = "rejection",
                         n = 1000)
mean(cfdata2$y)
</code></pre>

<hr>
<h2 id='credit'>SCM &quot;credit&quot; used in the credit scoring example.</h2><span id='topic+credit'></span>

<h3>Description</h3>

<p>Variable <code>default</code> is the outcome to be predicted
</p>


<h3>Usage</h3>

<pre><code class='language-R'>credit
</code></pre>


<h3>Format</h3>

<p>An object of class <code>SCM</code> (inherits from <code>R6</code>) of length 42.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>credit$simulate(100)
summary(credit$simdata)
</code></pre>

<hr>
<h2 id='fairness'>Checking fairness of a prediction via counterfactual simulation</h2><span id='topic+fairness'></span>

<h3>Description</h3>

<p>Checking fairness of a prediction via counterfactual simulation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fairness(
  modellist,
  scm,
  sensitive,
  condition,
  condition_type,
  parents,
  n,
  sens_values = NULL,
  modeltype = "predict",
  method,
  control = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fairness_+3A_modellist">modellist</code></td>
<td>
<p>A list of model objects that have a predict method or a list of functions that return predictions</p>
</td></tr>
<tr><td><code id="fairness_+3A_scm">scm</code></td>
<td>
<p>An SCM object</p>
</td></tr>
<tr><td><code id="fairness_+3A_sensitive">sensitive</code></td>
<td>
<p>A character vector of the names of sensitive variables</p>
</td></tr>
<tr><td><code id="fairness_+3A_condition">condition</code></td>
<td>
<p>A data.table consisting of the valid rows ( e.g. data.table::data.table( x = 0, y = 0))</p>
</td></tr>
<tr><td><code id="fairness_+3A_condition_type">condition_type</code></td>
<td>
<p>(required only if method == &quot;u_find&quot;) A character vector giving the type (&quot;continuous&quot; or &quot;discrete&quot;) of every variable in <code>condition</code></p>
</td></tr>
<tr><td><code id="fairness_+3A_parents">parents</code></td>
<td>
<p>A character vector of the names of variables that remain fixed</p>
</td></tr>
<tr><td><code id="fairness_+3A_n">n</code></td>
<td>
<p>The number of rows in the data to be simulated by <code>counterfactual</code></p>
</td></tr>
<tr><td><code id="fairness_+3A_sens_values">sens_values</code></td>
<td>
<p>A data.table specifying the combinations of the values of sensitive variables to be considered (default NULL meaning the all possible combinations of the values of sensitive variables)</p>
</td></tr>
<tr><td><code id="fairness_+3A_modeltype">modeltype</code></td>
<td>
<p>&quot;predict&quot; (default) or &quot;function&quot; depending on the type <code>modellist</code></p>
</td></tr>
<tr><td><code id="fairness_+3A_method">method</code></td>
<td>
<p>The simulation method, &quot;u_find&quot;, &quot;rejection&quot; or &quot;analytic_linear_gaussian&quot;</p>
</td></tr>
<tr><td><code id="fairness_+3A_control">control</code></td>
<td>
<p>List of parameters to be passed to the simulation method, see <code>counterfactual</code>.</p>
</td></tr>
<tr><td><code id="fairness_+3A_...">...</code></td>
<td>
<p>Other arguments passed to <code>predict</code> or to the prediction functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing a data table for element of <code>modellist</code>. Each data table contains the predicted values after counterfactual interventions on the sensitive variables.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>trainingd &lt;- backdoor$simulate(10000, return_simdata = TRUE)
newd &lt;- backdoor$simulate(100, return_simdata = TRUE)
vnames &lt;- backdoor$vnames
m1 &lt;- lm(y ~  x + z, data = trainingd)
m2 &lt;- lm(y ~  z, data = trainingd)
fairlist &lt;- fairness(modellist = list(m1,m2),
                     scm = backdoor,
                     sensitive = c("x"),
                     sens_values = data.table::data.table(x=c(0,1)),
                     condition = newd[1,c("x","y")],
                     condition_type = list(x = "cont",
                                           z = "cont",
                                           y = "cont"),
                     parents = NULL,
                     n = 20,
                     modeltype = "predict",
                     method = "u_find")
</code></pre>

<hr>
<h2 id='frontdoor'>SCM &quot;frontdoor&quot; used in the examples.</h2><span id='topic+frontdoor'></span>

<h3>Description</h3>

<p>Variable z fulfills the front-door criterion for P(y|do(x))
</p>


<h3>Usage</h3>

<pre><code class='language-R'>frontdoor
</code></pre>


<h3>Format</h3>

<p>An object of class <code>SCM</code> (inherits from <code>R6</code>) of length 42.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>frontdoor
frontdoor$plot()
</code></pre>

<hr>
<h2 id='generate_condprob'>Define structural function by a conditional probability table</h2><span id='topic+generate_condprob'></span>

<h3>Description</h3>

<p>Define structural function by a conditional probability table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generate_condprob(ycondx, x, Umerge_expr = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="generate_condprob_+3A_ycondx">ycondx</code></td>
<td>
<p>A data table or a data frame with the following structure
</p>

<ul>
<li><p> 1st column: variable to be generated, &quot;Y&quot;
</p>
</li>
<li><p> middle columns: the parents of the the 1st column variable, &quot;X&quot;
</p>
</li>
<li><p> last column:  the probability the case specified be the other columns, &quot;P(Y|do(X))&quot;
</p>
</li></ul>
</td></tr>
<tr><td><code id="generate_condprob_+3A_x">x</code></td>
<td>
<p>A data table or a data frame that contains data on the variables in the
middle columns of <code>ycondx</code>, &quot;X&quot; and one or more columns giving data on U-variables.</p>
</td></tr>
<tr><td><code id="generate_condprob_+3A_umerge_expr">Umerge_expr</code></td>
<td>
<p>A character string specifying how the U-variables will
be combined when the value &quot;Y&quot; is generated, e.g. &quot;u&quot; or &quot;(u1+u2)/2&quot;. The result of the
expression should be a random number in the interval [0,1].</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data table containing the generated  variable, &quot;Y&quot;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ycondx &lt;- data.table::data.table(y =rep(c(0,1), each = 3), x=rep(1:3, 2),
                     prob = c(0.2,0.6,0.1,0.8,0.4,0.9))
x &lt;- data.table::data.table(x = sample(1:3, 20, replace = TRUE),
                       uy = stats::runif(20), uy2 = stats::runif(20))
generate_condprob(ycondx, x, Umerge_expr = "(uy+uy2)/2")
</code></pre>

<hr>
<h2 id='LinearGaussianSCM'>R6 Class for linear structural causal models where background variables have Gaussian distribution</h2><span id='topic+LinearGaussianSCM'></span>

<h3>Description</h3>

<p>R6 Class for linear structural causal models where background variables have Gaussian distribution
</p>
<p>R6 Class for linear structural causal models where background variables have Gaussian distribution
</p>


<h3>Details</h3>

<p>Inherits R6 class SCM.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+SCM">R6causal::SCM</a></code> -&gt; <code>LinearGausianSCM</code>
</p>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>linear_gaussian_B</code></dt><dd><p>Matrix of structural coefficients of the observed variables</p>
</dd>
<dt><code>linear_gaussian_A</code></dt><dd><p>Matrix of structural coefficients of the background variables</p>
</dd>
<dt><code>linear_gaussian_c</code></dt><dd><p>Vector of constants in structural coefficients</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-LinearGausianSCM-new"><code>LinearGaussianSCM$new()</code></a>
</p>
</li>
<li> <p><a href="#method-LinearGausianSCM-clone"><code>LinearGaussianSCM$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="add_variable"><a href='../../R6causal/html/SCM.html#method-SCM-add_variable'><code>R6causal::SCM$add_variable()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="an"><a href='../../R6causal/html/SCM.html#method-SCM-an'><code>R6causal::SCM$an()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="causal.effect"><a href='../../R6causal/html/SCM.html#method-SCM-causal.effect'><code>R6causal::SCM$causal.effect()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="cfid"><a href='../../R6causal/html/SCM.html#method-SCM-cfid'><code>R6causal::SCM$cfid()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="ch"><a href='../../R6causal/html/SCM.html#method-SCM-ch'><code>R6causal::SCM$ch()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="de"><a href='../../R6causal/html/SCM.html#method-SCM-de'><code>R6causal::SCM$de()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="dosearch"><a href='../../R6causal/html/SCM.html#method-SCM-dosearch'><code>R6causal::SCM$dosearch()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="intervene"><a href='../../R6causal/html/SCM.html#method-SCM-intervene'><code>R6causal::SCM$intervene()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="pa"><a href='../../R6causal/html/SCM.html#method-SCM-pa'><code>R6causal::SCM$pa()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="plot"><a href='../../R6causal/html/SCM.html#method-SCM-plot'><code>R6causal::SCM$plot()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="print"><a href='../../R6causal/html/SCM.html#method-SCM-print'><code>R6causal::SCM$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="remove_variable"><a href='../../R6causal/html/SCM.html#method-SCM-remove_variable'><code>R6causal::SCM$remove_variable()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="simulate"><a href='../../R6causal/html/SCM.html#method-SCM-simulate'><code>R6causal::SCM$simulate()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="tikz"><a href='../../R6causal/html/SCM.html#method-SCM-tikz'><code>R6causal::SCM$tikz()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-LinearGausianSCM-new"></a>



<h4>Method <code>new()</code></h4>

<p>Create a new linear Gaussian SCM object.
</p>


<h5>Usage</h5>

<div class="r"><pre>LinearGaussianSCM$new(
  name = "A linear Gaussian SCM",
  linear_gaussian = NULL,
  random_linear_gaussian = NULL,
  rflist = NULL,
  rprefix = "R_",
  starsuffix = "_md"
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt><dd><p>Name.</p>
</dd>
<dt><code>linear_gaussian</code></dt><dd><p>A list with the following elements:
</p>

<ul>
<li><p> uflist: A named list containing the functions for the background variables.
</p>
</li>
<li><p> vnames: A vector of names of the observed variables.
</p>
</li>
<li><p> vcoefmatrix: A matrix of coefficients for observed variables in the structural equations.
</p>
</li>
<li><p> ucoefvector: A vector of the coefficients of dedicated error terms in the structural equations.
</p>
</li>
<li><p> ccoefvector: A vector of constant terms in the structural equations.
</p>
</li>
<li><p> u2coefmatrix: A matrix of the coefficients of confounding background variables in the structural equations. The number of rows equals the number of the observed variables and the number of columns equals the number of confounding background variables.
</p>
</li></ul>
</dd>
<dt><code>random_linear_gaussian</code></dt><dd><p>A list with the following elements:
</p>

<ul>
<li><p> nv: The number of observed variables
</p>
</li>
<li><p> edgeprob: The probability of an edge between a pair of observed variables (provide either edgeprob or avgneighbors)
</p>
</li>
<li><p> avgneighbors: The average number of edges per a vertex (provide either edgeprob or avgneighbors)
</p>
</li>
<li><p> u2prob: The probability of unobserved confounder between a pair of observed variables (provide either u2prob or avgu2)
</p>
</li>
<li><p> avgu2: The average number of unobserved confounders per a vertex (provide either u2prob or avgu2)
</p>
</li>
<li><p> vcoefdistr: A function that generates the coefficients of observed variables in the structural equations. The function must have argument 'n'.
</p>
</li>
<li><p> ucoefdistr: A function that generates the coefficients of dedicated error terms in the structural equations. The function must have argument 'n'.
</p>
</li>
<li><p> ccoefdistr: A function that generates the constants in the structural equations. The function must have argument 'n'.
</p>
</li>
<li><p> u2coefdistr: A function that generates the coefficients of confounding background variables in the structural equations. The function must have argument 'n'.
</p>
</li></ul>
</dd>
<dt><code>rflist</code></dt><dd><p>A named list containing the functions for missingness indicators.</p>
</dd>
<dt><code>rprefix</code></dt><dd><p>The prefix of the missingness indicators.</p>
</dd>
<dt><code>starsuffix</code></dt><dd><p>The suffix for variables with missing data.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A new 'LinearGaussianSCM' object that also belongs to class 'SCM'.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>lgbackdoor &lt;- LinearGaussianSCM$new("Linear Gaussian Backdoor",
                linear_gaussian = list(
                  uflist = list(ux = function(n) {rnorm(n)},
                                uy = function(n) {rnorm(n)},
                                uz = function(n) {rnorm(n)}),
                  vnames = c("x","y","z"),
                  vcoefmatrix = matrix(c(0,0.4,0,0,0,0,0.6,0.8,0),3,3),
                  ucoefvector = c(1,1,1),
                  ccoefvector = c(0,0,0)))
randomlg &lt;- LinearGaussianSCM$new("Random Linear Gaussian",
                random_linear_gaussian = list(
                  nv = 10, 
                  edgeprob=0.5, 
                  vcoefdistr = function(n) {rnorm(n)}, 
                  ccoefdistr = function(n) {rnorm(n)}, 
                  ucoefdistr = function(n) {rnorm(n)}))
</pre>
</div>


<hr>
<a id="method-LinearGausianSCM-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>LinearGaussianSCM$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
## ------------------------------------------------
## Method `LinearGaussianSCM$new`
## ------------------------------------------------

lgbackdoor &lt;- LinearGaussianSCM$new("Linear Gaussian Backdoor",
                linear_gaussian = list(
                  uflist = list(ux = function(n) {rnorm(n)},
                                uy = function(n) {rnorm(n)},
                                uz = function(n) {rnorm(n)}),
                  vnames = c("x","y","z"),
                  vcoefmatrix = matrix(c(0,0.4,0,0,0,0,0.6,0.8,0),3,3),
                  ucoefvector = c(1,1,1),
                  ccoefvector = c(0,0,0)))
randomlg &lt;- LinearGaussianSCM$new("Random Linear Gaussian",
                random_linear_gaussian = list(
                  nv = 10, 
                  edgeprob=0.5, 
                  vcoefdistr = function(n) {rnorm(n)}, 
                  ccoefdistr = function(n) {rnorm(n)}, 
                  ucoefdistr = function(n) {rnorm(n)}))
</code></pre>

<hr>
<h2 id='ParallelWorld'>R6 Class for parallel world models</h2><span id='topic+ParallelWorld'></span>

<h3>Description</h3>

<p>R6 Class for parallel world models
</p>
<p>R6 Class for parallel world models
</p>


<h3>Details</h3>

<p>Inherits R6 class SCM.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+SCM">R6causal::SCM</a></code> -&gt; <code>ParallelWorld</code>
</p>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>num_worlds</code></dt><dd><p>Number of parallel worlds.</p>
</dd>
<dt><code>worldnames</code></dt><dd><p>Names of parallel worlds.</p>
</dd>
<dt><code>worldsuffix</code></dt><dd><p>Suffix used for parallel world variables.</p>
</dd>
<dt><code>originalscm</code></dt><dd><p>SCM from which the parallel worlds are derived.</p>
</dd>
<dt><code>dolist</code></dt><dd><p>List containing the interventions for each world.</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-ParallelWorld-new"><code>ParallelWorld$new()</code></a>
</p>
</li>
<li> <p><a href="#method-ParallelWorld-clone"><code>ParallelWorld$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="add_variable"><a href='../../R6causal/html/SCM.html#method-SCM-add_variable'><code>R6causal::SCM$add_variable()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="an"><a href='../../R6causal/html/SCM.html#method-SCM-an'><code>R6causal::SCM$an()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="causal.effect"><a href='../../R6causal/html/SCM.html#method-SCM-causal.effect'><code>R6causal::SCM$causal.effect()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="cfid"><a href='../../R6causal/html/SCM.html#method-SCM-cfid'><code>R6causal::SCM$cfid()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="ch"><a href='../../R6causal/html/SCM.html#method-SCM-ch'><code>R6causal::SCM$ch()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="de"><a href='../../R6causal/html/SCM.html#method-SCM-de'><code>R6causal::SCM$de()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="dosearch"><a href='../../R6causal/html/SCM.html#method-SCM-dosearch'><code>R6causal::SCM$dosearch()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="intervene"><a href='../../R6causal/html/SCM.html#method-SCM-intervene'><code>R6causal::SCM$intervene()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="pa"><a href='../../R6causal/html/SCM.html#method-SCM-pa'><code>R6causal::SCM$pa()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="plot"><a href='../../R6causal/html/SCM.html#method-SCM-plot'><code>R6causal::SCM$plot()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="print"><a href='../../R6causal/html/SCM.html#method-SCM-print'><code>R6causal::SCM$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="remove_variable"><a href='../../R6causal/html/SCM.html#method-SCM-remove_variable'><code>R6causal::SCM$remove_variable()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="simulate"><a href='../../R6causal/html/SCM.html#method-SCM-simulate'><code>R6causal::SCM$simulate()</code></a></span></li>
<li><span class="pkg-link" data-pkg="R6causal" data-topic="SCM" data-id="tikz"><a href='../../R6causal/html/SCM.html#method-SCM-tikz'><code>R6causal::SCM$tikz()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-ParallelWorld-new"></a>



<h4>Method <code>new()</code></h4>

<p>Create a new ParallelWorld object from an SCM object.
</p>


<h5>Usage</h5>

<div class="r"><pre>ParallelWorld$new(scm, dolist, worldnames = NULL, worldsuffix = "_")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>scm</code></dt><dd><p>An SCM object.</p>
</dd>
<dt><code>dolist</code></dt><dd><p>A list containing the interventions for each world. Each element 
of the list has the fields:
</p>

<ul>
<li><p> target: a vector of variable names that specify the target
variable(s) of the counterfactual intervention.
</p>
</li>
<li><p> ifunction: a list of functions for the counterfactual intervention.
</p>
</li></ul>
</dd>
<dt><code>worldnames</code></dt><dd><p>A character vector giving the names of the parallel worlds.</p>
</dd>
<dt><code>worldsuffix</code></dt><dd><p>A text giving the suffix used for parallel world variables 
before the world number. Defaults to &quot;_&quot; and the worlds have then suffixes 
&quot;_1&quot;, &quot;_2&quot;, &quot;_3&quot;, ...</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A new 'ParallelWorld' object that also belongs to class 'SCM'.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>backdoor_parallel &lt;- ParallelWorld$new(
                        backdoor,
                        dolist=list(
                            list(target = "x", 
                                 ifunction = 0),
                            list(target = list("z","x"), 
                                 ifunction = list(1,0))
                        )
)
backdoor_parallel 
plot(backdoor_parallel)
</pre>
</div>


<hr>
<a id="method-ParallelWorld-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>ParallelWorld$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
## ------------------------------------------------
## Method `ParallelWorld$new`
## ------------------------------------------------

backdoor_parallel &lt;- ParallelWorld$new(
                        backdoor,
                        dolist=list(
                            list(target = "x", 
                                 ifunction = 0),
                            list(target = list("z","x"), 
                                 ifunction = list(1,0))
                        )
)
backdoor_parallel 
plot(backdoor_parallel)
</code></pre>

<hr>
<h2 id='R6causalimport'>R6causal: R6 class for structural causal models</h2><span id='topic+R6causalimport'></span>

<h3>Description</h3>

<p>Package R6causal implements an R6 class for structural causal models (SCM)
with latent variables and missing data mechanism.  The class contains methods for
1) defining a structural causal model via functions, text or conditional probability tables,
2) printing basic information on the model,
3) plotting the graph for the model using packages 'igraph' or 'qgraph',
4) simulating data from the model, 5) applying an intervention,
6) checking the identifiability of a query using the R packages 'causaleffect' and 'dosearch',
7) defining the missing data mechanism,
8) simulating incomplete data from the model according to the specified missing data mechanism and
9) checking the identifiability in a missing data problem using the R package 'dosearch'.
In addition, there are functions for running experiments and doing counterfactual inference using simulation.
</p>


<h3>References</h3>

<p>J. Pearl (2009). Causality, 2nd edition, Cambridge University Press.
</p>

<hr>
<h2 id='run_experiment'>Conduct a sequence of interventions and collect the simulated data.</h2><span id='topic+run_experiment'></span>

<h3>Description</h3>

<p>Conduct a sequence of interventions and collect the simulated data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_experiment(scm, intervene, response, n)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_experiment_+3A_scm">scm</code></td>
<td>
<p>An SCM object</p>
</td></tr>
<tr><td><code id="run_experiment_+3A_intervene">intervene</code></td>
<td>
<p>A list where the names of the elements are the variables to be
intervened and the values of the elements are vectors specifying the values set
in the intervention</p>
</td></tr>
<tr><td><code id="run_experiment_+3A_response">response</code></td>
<td>
<p>A vector of the names of the response variables</p>
</td></tr>
<tr><td><code id="run_experiment_+3A_n">n</code></td>
<td>
<p>Size of the data to be simulated for each intervention</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the values of the response variables for all intervention combinations
</p>


<h3>Examples</h3>

<pre><code class='language-R'>backdoor_experiment &lt;- run_experiment(backdoor,
                                     intervene = list(x = c(0,1)),
                                     response = "y",
                                     n = 10000)
colMeans(backdoor_experiment$response_list$y)
</code></pre>

<hr>
<h2 id='SCM'>R6 Class for structural causal models</h2><span id='topic+SCM'></span>

<h3>Description</h3>

<p>R6 Class for structural causal models
</p>
<p>R6 Class for structural causal models
</p>


<h3>Details</h3>

<p>An R6 class for structural causal models (SCM)
with latent variables and missing data mechanism. There are methods for
defining, printing, plotting, intervening and simulating SCMs.
</p>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>vflist</code></dt><dd><p>List of the structural functions of observed variables.</p>
</dd>
<dt><code>vnames</code></dt><dd><p>List of the names of observed variables.</p>
</dd>
<dt><code>vstarnames</code></dt><dd><p>List of the names of observed variables with NA's.</p>
</dd>
<dt><code>vfsymb</code></dt><dd><p>List of the arguments of structural functions of observed variables.</p>
</dd>
<dt><code>uflist</code></dt><dd><p>List of the structural functions of unobserved variables.</p>
</dd>
<dt><code>unames</code></dt><dd><p>List of the names of unobserved variables.</p>
</dd>
<dt><code>unames_dedicated</code></dt><dd><p>List of the names of unobserved variables that have only one child.</p>
</dd>
<dt><code>unames_confounder</code></dt><dd><p>List of the names of unobserved variables that 
have two or more children.</p>
</dd>
<dt><code>dedicated_u</code></dt><dd><p>Named list of the names of unobserved variables that 
have only one child which is the name of the element.</p>
</dd>
<dt><code>is_linear_gaussian</code></dt><dd><p>Logical, does the SCM have linear functions 
and Gaussian background variables?</p>
</dd>
<dt><code>rflist</code></dt><dd><p>List of the structural functions of missingness indicators.</p>
</dd>
<dt><code>rfsymb</code></dt><dd><p>List of the names of missingness indicators.</p>
</dd>
<dt><code>rprefix</code></dt><dd><p>Prefix used to mark missingness indicators.</p>
</dd>
<dt><code>starsuffix</code></dt><dd><p>Suffix used to mark variables with missing data.</p>
</dd>
<dt><code>simdata</code></dt><dd><p>Data table containing data simulated from the SCM.</p>
</dd>
<dt><code>simdata_obs</code></dt><dd><p>Data table containing data simulated from the SCM
where missing values are indicated by <code>NA</code>.</p>
</dd>
<dt><code>igraph</code></dt><dd><p>The graph of the SCM in the <code>igraph</code> form
(without the missing data mechanism).</p>
</dd>
<dt><code>igraph_nodedicated</code></dt><dd><p>The graph of the SCM in the <code>igraph</code> form
(without the dedicated U variables and the missing data mechanism).</p>
</dd>
<dt><code>igraph_bidirected</code></dt><dd><p>The graph of the SCM in the <code>igraph</code> form where
latent variables are presented by bidirected arcs.</p>
</dd>
<dt><code>igraph_md</code></dt><dd><p>The graph of the SCM in the <code>igraph</code> form including
the missing data mechanism.</p>
</dd>
<dt><code>toporder</code></dt><dd><p>A vector giving the topological order of variables.</p>
</dd>
<dt><code>toporderv</code></dt><dd><p>A vector giving the topological order of observed
variables.</p>
</dd>
<dt><code>graphtext</code></dt><dd><p>A character string that gives the edges of the graph
of the SCM (without the missing data mechanism).</p>
</dd>
<dt><code>graphtext_md</code></dt><dd><p>A character string that gives the edges of the graph
of the SCM including the missing data mechanism.</p>
</dd>
<dt><code>name</code></dt><dd><p>The name of the SCM.</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-SCM-new"><code>SCM$new()</code></a>
</p>
</li>
<li> <p><a href="#method-SCM-print"><code>SCM$print()</code></a>
</p>
</li>
<li> <p><a href="#method-SCM-plot"><code>SCM$plot()</code></a>
</p>
</li>
<li> <p><a href="#method-SCM-tikz"><code>SCM$tikz()</code></a>
</p>
</li>
<li> <p><a href="#method-SCM-pa"><code>SCM$pa()</code></a>
</p>
</li>
<li> <p><a href="#method-SCM-ch"><code>SCM$ch()</code></a>
</p>
</li>
<li> <p><a href="#method-SCM-an"><code>SCM$an()</code></a>
</p>
</li>
<li> <p><a href="#method-SCM-de"><code>SCM$de()</code></a>
</p>
</li>
<li> <p><a href="#method-SCM-add_variable"><code>SCM$add_variable()</code></a>
</p>
</li>
<li> <p><a href="#method-SCM-remove_variable"><code>SCM$remove_variable()</code></a>
</p>
</li>
<li> <p><a href="#method-SCM-causal.effect"><code>SCM$causal.effect()</code></a>
</p>
</li>
<li> <p><a href="#method-SCM-dosearch"><code>SCM$dosearch()</code></a>
</p>
</li>
<li> <p><a href="#method-SCM-cfid"><code>SCM$cfid()</code></a>
</p>
</li>
<li> <p><a href="#method-SCM-intervene"><code>SCM$intervene()</code></a>
</p>
</li>
<li> <p><a href="#method-SCM-simulate"><code>SCM$simulate()</code></a>
</p>
</li>
<li> <p><a href="#method-SCM-clone"><code>SCM$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-SCM-new"></a>



<h4>Method <code>new()</code></h4>

<p>Create a new SCM object.
</p>


<h5>Usage</h5>

<div class="r"><pre>SCM$new(
  name = "An SCM",
  uflist = NULL,
  vflist = NULL,
  rflist = NULL,
  rprefix = "R_",
  starsuffix = "_md"
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt><dd><p>Name.</p>
</dd>
<dt><code>uflist</code></dt><dd><p>A named list containing the functions for the background variables.</p>
</dd>
<dt><code>vflist</code></dt><dd><p>A named list containing the functions for the observed variables.</p>
</dd>
<dt><code>rflist</code></dt><dd><p>A named list containing the functions for missingness indicators.</p>
</dd>
<dt><code>rprefix</code></dt><dd><p>The prefix of the missingness indicators.</p>
</dd>
<dt><code>starsuffix</code></dt><dd><p>The suffix for variables with missing data.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A new 'SCM' object.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>backdoor &lt;- SCM$new("backdoor",
 uflist = list(
  uz = function(n) {return(stats::runif(n))},
  ux = function(n) {return(stats::runif(n))},
  uy = function(n) {return(stats::runif(n))}
 ),
 vflist = list(
  z = function(uz) {
    return(as.numeric(uz &lt; 0.4))},
  x = function(ux, z) {
    return(as.numeric(ux &lt; 0.2 + 0.5*z))},
  y = function(uy, z, x) {
    return(as.numeric(uy &lt; 0.1 + 0.4*z + 0.4*x))}
 )
)
</pre>
</div>


<hr>
<a id="method-SCM-print"></a>



<h4>Method <code>print()</code></h4>

<p>Print a summmary of the SCM object.
</p>


<h5>Usage</h5>

<div class="r"><pre>SCM$print()</pre></div>



<h5>Examples</h5>

<div class="r example copy">
<pre>backdoor
</pre>
</div>


<hr>
<a id="method-SCM-plot"></a>



<h4>Method <code>plot()</code></h4>

<p>Plot the DAG of the SCM object.
</p>


<h5>Usage</h5>

<div class="r"><pre>SCM$plot(subset = "uvr", method = "igraph", ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>subset</code></dt><dd><p>Variable groups to be plotted: &quot;uvr&quot;, &quot;u2vr&quot;,&quot;vr&quot;,&quot;uv&quot;, &quot;u2v&quot; or &quot;v&quot;.</p>
</dd>
<dt><code>method</code></dt><dd><p>Plotting method: &quot;qgraph&quot; or &quot;igraph&quot;.</p>
</dd>
<dt><code>...</code></dt><dd><p>other parameters passed to the plotting method</p>
</dd>
</dl>

</div>



<h5>Examples</h5>

<div class="r example copy">
<pre>backdoor$plot()
backdoor$plot("v")
</pre>
</div>


<hr>
<a id="method-SCM-tikz"></a>



<h4>Method <code>tikz()</code></h4>

<p>Return a TikZ code for drawing the DAG of the SCM object in LaTeX.
</p>


<h5>Usage</h5>

<div class="r"><pre>SCM$tikz(
  subset = "uvr",
  layoutfunction = igraph::layout_with_lgl,
  labels = NULL,
  settings = list(force = FALSE, borders = TRUE, shape = "circle", size = 5, scale = 2),
  ...
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>subset</code></dt><dd><p>Variable groups to be plotted: &quot;uvr&quot;,&quot;vr&quot;,&quot;uv&quot;, or &quot;v&quot;.</p>
</dd>
<dt><code>layoutfunction</code></dt><dd><p>A layout function from igraph package.</p>
</dd>
<dt><code>labels</code></dt><dd><p>A named list that gives the names of vertices in TikZ.</p>
</dd>
<dt><code>settings</code></dt><dd><p>A list with the following elements:</p>
</dd>
<dt><code>...</code></dt><dd><p>Arguments to be passed to layoutfunction</p>
</dd>
</dl>

</div>


<hr>
<a id="method-SCM-pa"></a>



<h4>Method <code>pa()</code></h4>

<p>Return the parents of a set of vertices.
</p>


<h5>Usage</h5>

<div class="r"><pre>SCM$pa(vnames, includeself = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>vnames</code></dt><dd><p>A vector of vertex names</p>
</dd>
<dt><code>includeself</code></dt><dd><p>Logical, should <code>vnames</code> to be included in the results (defaults TRUE)</p>
</dd>
</dl>

</div>


<hr>
<a id="method-SCM-ch"></a>



<h4>Method <code>ch()</code></h4>

<p>Return the children of a set of vertices.
</p>


<h5>Usage</h5>

<div class="r"><pre>SCM$ch(vnames, includeself = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>vnames</code></dt><dd><p>A vector of vertex names</p>
</dd>
<dt><code>includeself</code></dt><dd><p>Logical, should <code>vnames</code> to be included in the results (defaults TRUE)</p>
</dd>
</dl>

</div>


<hr>
<a id="method-SCM-an"></a>



<h4>Method <code>an()</code></h4>

<p>Return the ancestors of a set of vertices.
</p>


<h5>Usage</h5>

<div class="r"><pre>SCM$an(vnames, includeself = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>vnames</code></dt><dd><p>A vector of vertex names</p>
</dd>
<dt><code>includeself</code></dt><dd><p>Logical, should <code>vnames</code> to be included in the results (defaults TRUE)</p>
</dd>
</dl>

</div>


<hr>
<a id="method-SCM-de"></a>



<h4>Method <code>de()</code></h4>

<p>Return the descendants of a set of vertices.
</p>


<h5>Usage</h5>

<div class="r"><pre>SCM$de(vnames, includeself = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>vnames</code></dt><dd><p>A vector of vertex names</p>
</dd>
<dt><code>includeself</code></dt><dd><p>Logical, should <code>vnames</code> to be included in the results (defaults TRUE)</p>
</dd>
</dl>

</div>


<hr>
<a id="method-SCM-add_variable"></a>



<h4>Method <code>add_variable()</code></h4>

<p>Add a new variable to the SCM object.
</p>


<h5>Usage</h5>

<div class="r"><pre>SCM$add_variable(
  vfnew = NULL,
  ufnew = NULL,
  rfnew = NULL,
  rprefixnew = NULL,
  starsuffixnew = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>vfnew</code></dt><dd><p>NULL or a named list containing the functions for the new observed variables.</p>
</dd>
<dt><code>ufnew</code></dt><dd><p>NULL or a named list containing the functions for the new latent variables.</p>
</dd>
<dt><code>rfnew</code></dt><dd><p>NULL or a named list containing the functions for the new missingness indicators.</p>
</dd>
<dt><code>rprefixnew</code></dt><dd><p>NULL or the prefix of the missingness indicators.</p>
</dd>
<dt><code>starsuffixnew</code></dt><dd><p>NULL orthe suffix for variables with missing data.</p>
</dd>
</dl>

</div>



<h5>Examples</h5>

<div class="r example copy">
<pre>backdoor2 &lt;- backdoor$clone()
backdoor2$add_variable(
   vfnew = list(
             w = function(uw, x) {
             return(as.numeric(uw &lt; 0.4 + 0.3*x))}),
   ufnew = list(
            uw = function(n) {return(stats::runif(n))})
) 
</pre>
</div>


<hr>
<a id="method-SCM-remove_variable"></a>



<h4>Method <code>remove_variable()</code></h4>

<p>Remove variables from the SCM object.
</p>


<h5>Usage</h5>

<div class="r"><pre>SCM$remove_variable(variablenames)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>variablenames</code></dt><dd><p>Names of the variables to be removed.</p>
</dd>
</dl>

</div>



<h5>Examples</h5>

<div class="r example copy">
<pre>backdoor2 &lt;- backdoor$clone()
backdoor2$remove_variable(c("uy","y"))
#' @include R6causal.R R6causal_examples.R
NULL
</pre>
</div>


<hr>
<a id="method-SCM-causal.effect"></a>



<h4>Method <code>causal.effect()</code></h4>

<p>Is a causal effect identifiable from observational data?
Calls the implementation of ID algorithm from package <span class="pkg">causaleffect</span>.
See the documentation of <code><a href="causaleffect.html#topic+causal.effect">causal.effect</a></code> for the details.
</p>


<h5>Usage</h5>

<div class="r"><pre>SCM$causal.effect(y, x, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>y</code></dt><dd><p>A vector of character strings specifying target variable(s).</p>
</dd>
<dt><code>x</code></dt><dd><p>A vector of character strings specifying intervention variable(s).</p>
</dd>
<dt><code>...</code></dt><dd><p>Other parameters passed to <code><a href="causaleffect.html#topic+causal.effect">causal.effect</a></code>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>An expression for the joint distribution of the set of variables (y) given
the intervention on the set of variables (x) conditional on (z) if the effect is
identifiable. Otherwise an error is thrown describing the graphical structure
that witnesses non-identifiability.
@examples
backdoor$causal.effect(y = &quot;y&quot;, x = &quot;x&quot;)
</p>


<hr>
<a id="method-SCM-dosearch"></a>



<h4>Method <code>dosearch()</code></h4>

<p>Is a causal effect or other query identifiable from given data sources?
Calls <code><a href="dosearch.html#topic+dosearch">dosearch</a></code> from the package <span class="pkg">dosearch</span>.
See the documentation of <span class="pkg">dosearch</span> for the details.
</p>


<h5>Usage</h5>

<div class="r"><pre>SCM$dosearch(
  data,
  query,
  transportability = NULL,
  selection_bias = NULL,
  missing_data = NULL,
  control = list()
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt><dd><p>Character string specifying the data sources.</p>
</dd>
<dt><code>query</code></dt><dd><p>Character string specifying the query of interest.</p>
</dd>
<dt><code>transportability</code></dt><dd><p>Other parameters passed to <code>dosearch()</code>.</p>
</dd>
<dt><code>selection_bias</code></dt><dd><p>Other parameters passed to <code>dosearch()</code>.</p>
</dd>
<dt><code>missing_data</code></dt><dd><p>Other parameters passed to <code>dosearch()</code>.</p>
</dd>
<dt><code>control</code></dt><dd><p>List of control parameters passed to <code>dosearch()</code>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>An object of class <code>dosearch::dosearch</code>.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>backdoor$dosearch(data = "p(x,y,z)", query = "p(y|do(x))")
</pre>
</div>


<hr>
<a id="method-SCM-cfid"></a>



<h4>Method <code>cfid()</code></h4>

<p>Is a counterfactual query identifiable from given data sources?
Calls <code>identifiable</code> from the package <span class="pkg">cfid</span>.
See the documentation of <span class="pkg">cfid</span> for the details.
</p>


<h5>Usage</h5>

<div class="r"><pre>SCM$cfid(gamma, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>gamma</code></dt><dd><p>An R object that can be coerced into a <code>cfid::counterfactual_conjunction</code> object that represents the counterfactual causal query.</p>
</dd>
<dt><code>...</code></dt><dd><p>Other arguments passed to <code>cfid::identifiable</code>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>An object of class <code>cfid::query</code>.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>backdoor$cfid(gamma = cfid::conj(cfid::cf("Y",0), cfid::cf("X",0, c(Z=1))) ) 
</pre>
</div>


<hr>
<a id="method-SCM-intervene"></a>



<h4>Method <code>intervene()</code></h4>

<p>Apply an intervention to the SCM object.
</p>


<h5>Usage</h5>

<div class="r"><pre>SCM$intervene(target, ifunction)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>target</code></dt><dd><p>Name(s) of the variables (in vflist, uflist or rflist) to be intervened.</p>
</dd>
<dt><code>ifunction</code></dt><dd><p>Either numeric value(s) or new structural function(s) for the target variables.</p>
</dd>
</dl>

</div>



<h5>Examples</h5>

<div class="r example copy">
<pre># A simple intervention
backdoor_x1 &lt;- backdoor$clone()  # making a copy
backdoor_x1$intervene("x",1) # applying the intervention
backdoor_x1$plot() # to see that arrows incoming to x are cut

# An intervention that redefines a structural equation
backdoor_yz &lt;- backdoor$clone()  # making a copy
backdoor_yz$intervene("y",
    function(uy, z) {return(as.numeric(uy &lt; 0.1 + 0.8*z ))}) # making y a function of z only
backdoor_yz$plot() # to see that arrow x -&gt; y is cut
</pre>
</div>


<hr>
<a id="method-SCM-simulate"></a>



<h4>Method <code>simulate()</code></h4>

<p>Simulate data from the SCM object.
Returns simulated data as a data.table and/or creates or updates <code>simdata</code> in the SCM object.
If <code>no_missing_data = FALSE</code>, creates or updates also <code>simdata_obs</code>
</p>


<h5>Usage</h5>

<div class="r"><pre>SCM$simulate(
  n = 1,
  no_missing_data = FALSE,
  seed = NULL,
  fixedvars = NULL,
  store_simdata = TRUE,
  return_simdata = FALSE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>n</code></dt><dd><p>Number of observations to be generated.</p>
</dd>
<dt><code>no_missing_data</code></dt><dd><p>Logical, should the generation of missing data skipped? (defaults FALSE).</p>
</dd>
<dt><code>seed</code></dt><dd><p>NULL or a number for <code>set.seed</code>.</p>
</dd>
<dt><code>fixedvars</code></dt><dd><p>List of variable names that remain unchanged or a data table/frame that contains the values of the fixed variables.</p>
</dd>
<dt><code>store_simdata</code></dt><dd><p>Logical, should the simulated data to be stored in the SCM object (defaults TRUE)</p>
</dd>
<dt><code>return_simdata</code></dt><dd><p>Logical, should the simulated data to be returned as the output (defaults FALSE)</p>
</dd>
</dl>

</div>



<h5>Examples</h5>

<div class="r example copy">
<pre>backdoor$simulate(8, return_simdata = TRUE, store_simdata = FALSE)
backdoor$simulate(10)
backdoor$simdata
</pre>
</div>


<hr>
<a id="method-SCM-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>SCM$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
## ------------------------------------------------
## Method `SCM$new`
## ------------------------------------------------

backdoor &lt;- SCM$new("backdoor",
 uflist = list(
  uz = function(n) {return(stats::runif(n))},
  ux = function(n) {return(stats::runif(n))},
  uy = function(n) {return(stats::runif(n))}
 ),
 vflist = list(
  z = function(uz) {
    return(as.numeric(uz &lt; 0.4))},
  x = function(ux, z) {
    return(as.numeric(ux &lt; 0.2 + 0.5*z))},
  y = function(uy, z, x) {
    return(as.numeric(uy &lt; 0.1 + 0.4*z + 0.4*x))}
 )
)

## ------------------------------------------------
## Method `SCM$print`
## ------------------------------------------------

backdoor

## ------------------------------------------------
## Method `SCM$plot`
## ------------------------------------------------

backdoor$plot()
backdoor$plot("v")

## ------------------------------------------------
## Method `SCM$add_variable`
## ------------------------------------------------

backdoor2 &lt;- backdoor$clone()
backdoor2$add_variable(
   vfnew = list(
             w = function(uw, x) {
             return(as.numeric(uw &lt; 0.4 + 0.3*x))}),
   ufnew = list(
            uw = function(n) {return(stats::runif(n))})
) 

## ------------------------------------------------
## Method `SCM$remove_variable`
## ------------------------------------------------

backdoor2 &lt;- backdoor$clone()
backdoor2$remove_variable(c("uy","y"))
#' @include R6causal.R R6causal_examples.R
NULL

## ------------------------------------------------
## Method `SCM$dosearch`
## ------------------------------------------------

backdoor$dosearch(data = "p(x,y,z)", query = "p(y|do(x))")

## ------------------------------------------------
## Method `SCM$cfid`
## ------------------------------------------------

backdoor$cfid(gamma = cfid::conj(cfid::cf("Y",0), cfid::cf("X",0, c(Z=1))) ) 

## ------------------------------------------------
## Method `SCM$intervene`
## ------------------------------------------------

# A simple intervention
backdoor_x1 &lt;- backdoor$clone()  # making a copy
backdoor_x1$intervene("x",1) # applying the intervention
backdoor_x1$plot() # to see that arrows incoming to x are cut

# An intervention that redefines a structural equation
backdoor_yz &lt;- backdoor$clone()  # making a copy
backdoor_yz$intervene("y",
    function(uy, z) {return(as.numeric(uy &lt; 0.1 + 0.8*z ))}) # making y a function of z only
backdoor_yz$plot() # to see that arrow x -&gt; y is cut

## ------------------------------------------------
## Method `SCM$simulate`
## ------------------------------------------------

backdoor$simulate(8, return_simdata = TRUE, store_simdata = FALSE)
backdoor$simulate(10)
backdoor$simdata
</code></pre>

<hr>
<h2 id='trapdoor'>SCM &quot;trapdoor&quot; used in the examples.</h2><span id='topic+trapdoor'></span>

<h3>Description</h3>

<p>Variable z is a trapdoor variable for P(y|do(x))
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trapdoor
</code></pre>


<h3>Format</h3>

<p>An object of class <code>SCM</code> (inherits from <code>R6</code>) of length 42.
</p>


<h3>References</h3>

<p>J. Helske, S. Tikka, J. Karvanen (2021). Estimation of causal effects with
small data in the presence of trapdoor variables,
Journal of the Royal Statistical Society Series A, 184(3), 1030-1051,
http://doi.org/10.1111/rssa.12699
</p>


<h3>Examples</h3>

<pre><code class='language-R'>trapdoor
trapdoor$plot()
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
