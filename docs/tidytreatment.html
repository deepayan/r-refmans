<!DOCTYPE html><html><head><title>Help for package tidytreatment</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {tidytreatment}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#avg_treatment_effects'><p>Get (conditional) average treatment effect draws from posterior</p></a></li>
<li><a href='#bartmodel1'><p>Example model 1</p></a></li>
<li><a href='#bartmodel1_modelmatrix'><p>Model matrix used for <code>bartmodel1</code></p></a></li>
<li><a href='#covariate_importance'><p>Counts of variable overall inclusion</p></a></li>
<li><a href='#covariate_with_treatment_importance'><p>Counts of variable inclusion when interacting with treatment</p></a></li>
<li><a href='#fitted_draws_BART'><p>Get fitted draws from posterior of <code>BART</code>-package models</p></a></li>
<li><a href='#fitted_draws.bartMachine'><p>Get fitted draws from posterior of <code>bartMachine</code> model</p></a></li>
<li><a href='#fitted_draws.lbart'><p>Get fitted draws from posterior of <code>lbart</code> model</p></a></li>
<li><a href='#fitted_draws.mbart'><p>Get fitted draws from posterior of <code>mbart</code> model</p></a></li>
<li><a href='#fitted_draws.mbart2'><p>Get fitted draws from posterior of <code>mbart2</code> model</p></a></li>
<li><a href='#fitted_draws.pbart'><p>Get fitted draws from posterior of <code>pbart</code> model</p></a></li>
<li><a href='#fitted_draws.wbart'><p>Get fitted draws from posterior of <code>wbart</code> model</p></a></li>
<li><a href='#has_common_support'><p>Evaluate if observations have common support.</p></a></li>
<li><a href='#has_tidytreatment_methods'><p>Check if a model class has required generic methods for tidytreatment functions.</p></a></li>
<li><a href='#highDim_testdataset3'><p>ACIC2019 High Dimensional Test Dataset</p></a></li>
<li><a href='#posterior_trees_BART'><p>Get posterior tree draws into tibble format from BART model</p></a></li>
<li><a href='#predicted_draws_BART'><p>Get predict draws from posterior of <code>BART</code>-package models</p></a></li>
<li><a href='#predicted_draws.bartMachine'><p>Get predict draws from posterior of <code>bartMachine</code> model</p></a></li>
<li><a href='#predicted_draws.wbart'><p>Get predict draws from posterior of <code>wbart</code> model</p></a></li>
<li><a href='#residual_draws_BART'><p>Get residual draw for BART model</p></a></li>
<li><a href='#residual_draws.bartMachine'><p>Get residual draw for <code>bartMachine</code> model</p></a></li>
<li><a href='#residual_draws.pbart'><p>Get residual draw for <code>pbart</code> model</p></a></li>
<li><a href='#residual_draws.wbart'><p>Get residual draw for <code>wbart</code> model</p></a></li>
<li><a href='#simulate_su_hill_data'><p>Simulate data with scenarios from Hill and Su (2013)</p></a></li>
<li><a href='#suhillsim1'><p>Example simulated dataset 1</p></a></li>
<li><a href='#tidy_ate'><p>Get average treatment effect draws from posterior</p></a></li>
<li><a href='#tidy_att'><p>Get average treatment effect on treated draws from posterior</p></a></li>
<li><a href='#tidytreatment'><p>tidytreatment: Tidy methods for Bayesian treatment effect models</p></a></li>
<li><a href='#treatment_effects'><p>Get (individual) treatment effect draws from posterior</p></a></li>
<li><a href='#treatment_effects.default'><p>Get treatment effect draws from posterior</p></a></li>
<li><a href='#variance_draws'><p>Get variance draws from posterior of BART models</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Tidy Methods for Bayesian Treatment Effect Models</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions for extracting tidy data from Bayesian treatment effect models, in particular BART, but extensions are possible. Functionality includes extracting tidy posterior summaries as in 'tidybayes' <a href="https://github.com/mjskay/tidybayes">https://github.com/mjskay/tidybayes</a>, estimating (average) treatment effects, common support calculations, and plotting useful summaries of these.</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/bonStats/tidytreatment">https://github.com/bonStats/tidytreatment</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/bonStats/tidytreatment/issues">https://github.com/bonStats/tidytreatment/issues</a></td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, BART, ggplot2, testthat (&ge; 3.0.0), withr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>tidybayes, purrr, tidyr, dplyr, readr, rlang</td>
</tr>
<tr>
<td>Enhances:</td>
<td>bartMachine</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-02-19 09:56:06 UTC; bon</td>
</tr>
<tr>
<td>Author:</td>
<td>Joshua J Bon <a href="https://orcid.org/0000-0003-2313-2949"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Joshua J Bon &lt;joshuajbon@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-02-21 09:00:07 UTC</td>
</tr>
</table>
<hr>
<h2 id='avg_treatment_effects'>Get (conditional) average treatment effect draws from posterior</h2><span id='topic+avg_treatment_effects'></span>

<h3>Description</h3>

<p>(C)ATE = (Conditional) Average Treatment Effects
<code>newdata</code> specifies the conditions, if unspecified it defaults to the original data.
Assumes treated column is either a integer column of 1's (treated) and 0's (nontreated) or logical indicating treatment if TRUE.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>avg_treatment_effects(
  model,
  treatment,
  newdata,
  subset = "all",
  common_support_method,
  cutoff,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="avg_treatment_effects_+3A_model">model</code></td>
<td>
<p>A supported Bayesian model fit that can provide fits and predictions.</p>
</td></tr>
<tr><td><code id="avg_treatment_effects_+3A_treatment">treatment</code></td>
<td>
<p>A character string specifying the name of the treatment variable.</p>
</td></tr>
<tr><td><code id="avg_treatment_effects_+3A_newdata">newdata</code></td>
<td>
<p>Data frame to generate fitted values from. If omitted, defaults to the data used to fit the model.</p>
</td></tr>
<tr><td><code id="avg_treatment_effects_+3A_subset">subset</code></td>
<td>
<p>Either &quot;treated&quot;, &quot;nontreated&quot;, or &quot;all&quot;. Default is &quot;all&quot;.</p>
</td></tr>
<tr><td><code id="avg_treatment_effects_+3A_common_support_method">common_support_method</code></td>
<td>
<p>Either &quot;sd&quot;, or &quot;chisq&quot;. Default is unspecified, and no common support calculation is done.</p>
</td></tr>
<tr><td><code id="avg_treatment_effects_+3A_cutoff">cutoff</code></td>
<td>
<p>Cutoff for common support (if in use).</p>
</td></tr>
<tr><td><code id="avg_treatment_effects_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to <code>tidybayes::fitted_draws</code> typically scale for <code>BART</code> models.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tidy data frame (tibble) with treatment effect values.
</p>

<hr>
<h2 id='bartmodel1'>Example model 1</h2><span id='topic+bartmodel1'></span>

<h3>Description</h3>

<p>Model fit with simulated data from simulated dataset <code>suhillsim1</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bartmodel1
</code></pre>


<h3>Format</h3>

<p>Object of type <code>BART::wbart</code>
</p>


<h3>Details</h3>

<p>Propensity score estimated and included <code>suhillsim1</code> for fitting the model.
</p>


<h3>Source</h3>

<p><a href="https://github.com/bonStats/tidytreatment/tree/master/data-raw">https://github.com/bonStats/tidytreatment/tree/master/data-raw</a>
</p>

<hr>
<h2 id='bartmodel1_modelmatrix'>Model matrix used for <code>bartmodel1</code></h2><span id='topic+bartmodel1_modelmatrix'></span>

<h3>Description</h3>

<p>Useful for testing tidytreatment package functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bartmodel1_modelmatrix
</code></pre>


<h3>Format</h3>

<p>Object of type <code>BART::wbart</code>
</p>


<h3>Source</h3>

<p><a href="https://github.com/bonStats/tidytreatment/tree/master/data-raw">https://github.com/bonStats/tidytreatment/tree/master/data-raw</a>
</p>

<hr>
<h2 id='covariate_importance'>Counts of variable overall inclusion</h2><span id='topic+covariate_importance'></span>

<h3>Description</h3>

<p>Inclusion metric for bartMachine and BART are scaled differently.
bartMachine averaged over number of trees, in addition to number of MCMC draws.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>covariate_importance(model, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="covariate_importance_+3A_model">model</code></td>
<td>
<p>Model</p>
</td></tr>
<tr><td><code id="covariate_importance_+3A_...">...</code></td>
<td>
<p>Arguments to pass to particular methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Tidy data with counts of variable inclusion, when interacting with treatment variable.
</p>

<hr>
<h2 id='covariate_with_treatment_importance'>Counts of variable inclusion when interacting with treatment</h2><span id='topic+covariate_with_treatment_importance'></span>

<h3>Description</h3>

<p>Counts of variable inclusion when interacting with treatment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>covariate_with_treatment_importance(model, treatment, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="covariate_with_treatment_importance_+3A_model">model</code></td>
<td>
<p>Model</p>
</td></tr>
<tr><td><code id="covariate_with_treatment_importance_+3A_treatment">treatment</code></td>
<td>
<p>A character string specifying the name of the treatment variable.</p>
</td></tr>
<tr><td><code id="covariate_with_treatment_importance_+3A_...">...</code></td>
<td>
<p>Arguments to pass to particular methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Tidy data with counts of variable inclusion, when interacting with treatment variable.
</p>

<hr>
<h2 id='fitted_draws_BART'>Get fitted draws from posterior of <code>BART</code>-package models</h2><span id='topic+fitted_draws_BART'></span>

<h3>Description</h3>

<p>Get fitted draws from posterior of <code>BART</code>-package models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fitted_draws_BART(
  model,
  newdata = NULL,
  value = ".value",
  ...,
  include_newdata = TRUE,
  include_sigsqs = FALSE,
  scale = "real"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fitted_draws_BART_+3A_model">model</code></td>
<td>
<p>A model from <code>BART</code> package.</p>
</td></tr>
<tr><td><code id="fitted_draws_BART_+3A_newdata">newdata</code></td>
<td>
<p>Data frame to generate fitted values from. If omitted, defaults to the data used to fit the model.</p>
</td></tr>
<tr><td><code id="fitted_draws_BART_+3A_value">value</code></td>
<td>
<p>The name of the output column for <code>fitted_draws</code>; default <code>".value"</code>.</p>
</td></tr>
<tr><td><code id="fitted_draws_BART_+3A_...">...</code></td>
<td>
<p>Arguments to pass to <code>predict</code> (e.g. <code>BART:::predict.wbart</code>).</p>
</td></tr>
<tr><td><code id="fitted_draws_BART_+3A_include_newdata">include_newdata</code></td>
<td>
<p>Should the newdata be included in the tibble?</p>
</td></tr>
<tr><td><code id="fitted_draws_BART_+3A_include_sigsqs">include_sigsqs</code></td>
<td>
<p>Should the posterior sigma-squared draw be included?</p>
</td></tr>
<tr><td><code id="fitted_draws_BART_+3A_scale">scale</code></td>
<td>
<p>Should the fitted values be on the real, probit or logit scale?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tidy data frame (tibble) with fitted values.
</p>

<hr>
<h2 id='fitted_draws.bartMachine'>Get fitted draws from posterior of <code>bartMachine</code> model</h2><span id='topic+fitted_draws.bartMachine'></span>

<h3>Description</h3>

<p>Get fitted draws from posterior of <code>bartMachine</code> model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bartMachine'
fitted_draws(
  model,
  newdata,
  value = ".value",
  ...,
  n = NULL,
  include_newdata = TRUE,
  include_sigsqs = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fitted_draws.bartMachine_+3A_model">model</code></td>
<td>
<p>A <code>bartMachine</code> model.</p>
</td></tr>
<tr><td><code id="fitted_draws.bartMachine_+3A_newdata">newdata</code></td>
<td>
<p>Data frame to generate fitted values from. If omitted, defaults to the data used to fit the model.</p>
</td></tr>
<tr><td><code id="fitted_draws.bartMachine_+3A_value">value</code></td>
<td>
<p>The name of the output column for <code>fitted_draws</code>; default <code>".value"</code>.</p>
</td></tr>
<tr><td><code id="fitted_draws.bartMachine_+3A_...">...</code></td>
<td>
<p>Not currently in use.</p>
</td></tr>
<tr><td><code id="fitted_draws.bartMachine_+3A_n">n</code></td>
<td>
<p>Not currently implemented.</p>
</td></tr>
<tr><td><code id="fitted_draws.bartMachine_+3A_include_newdata">include_newdata</code></td>
<td>
<p>Should the newdata be included in the tibble?</p>
</td></tr>
<tr><td><code id="fitted_draws.bartMachine_+3A_include_sigsqs">include_sigsqs</code></td>
<td>
<p>Should the posterior sigma-squared draw be included?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tidy data frame (tibble) with fitted values.
</p>

<hr>
<h2 id='fitted_draws.lbart'>Get fitted draws from posterior of <code>lbart</code> model</h2><span id='topic+fitted_draws.lbart'></span>

<h3>Description</h3>

<p>Get fitted draws from posterior of <code>lbart</code> model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'lbart'
fitted_draws(
  model,
  newdata,
  value = ".value",
  ...,
  n = NULL,
  include_newdata = TRUE,
  include_sigsqs = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fitted_draws.lbart_+3A_model">model</code></td>
<td>
<p>A model from <code>BART</code> package.</p>
</td></tr>
<tr><td><code id="fitted_draws.lbart_+3A_newdata">newdata</code></td>
<td>
<p>Data frame to generate fitted values from. If omitted, defaults to the data used to fit the model.</p>
</td></tr>
<tr><td><code id="fitted_draws.lbart_+3A_value">value</code></td>
<td>
<p>The name of the output column for <code>fitted_draws</code>; default <code>".value"</code>.</p>
</td></tr>
<tr><td><code id="fitted_draws.lbart_+3A_...">...</code></td>
<td>
<p>Not currently in use.</p>
</td></tr>
<tr><td><code id="fitted_draws.lbart_+3A_n">n</code></td>
<td>
<p>Not currently implemented.</p>
</td></tr>
<tr><td><code id="fitted_draws.lbart_+3A_include_newdata">include_newdata</code></td>
<td>
<p>Should the newdata be included in the tibble?</p>
</td></tr>
<tr><td><code id="fitted_draws.lbart_+3A_include_sigsqs">include_sigsqs</code></td>
<td>
<p>Should the posterior sigma-squared draw be included?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tidy data frame (tibble) with fitted values.
</p>

<hr>
<h2 id='fitted_draws.mbart'>Get fitted draws from posterior of <code>mbart</code> model</h2><span id='topic+fitted_draws.mbart'></span>

<h3>Description</h3>

<p>Get fitted draws from posterior of <code>mbart</code> model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mbart'
fitted_draws(
  model,
  newdata,
  value = ".value",
  ...,
  n = NULL,
  include_newdata = TRUE,
  include_sigsqs = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fitted_draws.mbart_+3A_model">model</code></td>
<td>
<p>A model from <code>BART</code> package.</p>
</td></tr>
<tr><td><code id="fitted_draws.mbart_+3A_newdata">newdata</code></td>
<td>
<p>Data frame to generate fitted values from. If omitted, defaults to the data used to fit the model.</p>
</td></tr>
<tr><td><code id="fitted_draws.mbart_+3A_value">value</code></td>
<td>
<p>The name of the output column for <code>fitted_draws</code>; default <code>".value"</code>.</p>
</td></tr>
<tr><td><code id="fitted_draws.mbart_+3A_...">...</code></td>
<td>
<p>Not currently in use.</p>
</td></tr>
<tr><td><code id="fitted_draws.mbart_+3A_n">n</code></td>
<td>
<p>Not currently implemented.</p>
</td></tr>
<tr><td><code id="fitted_draws.mbart_+3A_include_newdata">include_newdata</code></td>
<td>
<p>Should the newdata be included in the tibble?</p>
</td></tr>
<tr><td><code id="fitted_draws.mbart_+3A_include_sigsqs">include_sigsqs</code></td>
<td>
<p>Should the posterior sigma-squared draw be included?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tidy data frame (tibble) with fitted values.
</p>

<hr>
<h2 id='fitted_draws.mbart2'>Get fitted draws from posterior of <code>mbart2</code> model</h2><span id='topic+fitted_draws.mbart2'></span>

<h3>Description</h3>

<p>Get fitted draws from posterior of <code>mbart2</code> model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mbart2'
fitted_draws(
  model,
  newdata,
  value = ".value",
  ...,
  n = NULL,
  include_newdata = TRUE,
  include_sigsqs = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fitted_draws.mbart2_+3A_model">model</code></td>
<td>
<p>A model from <code>BART</code> package.</p>
</td></tr>
<tr><td><code id="fitted_draws.mbart2_+3A_newdata">newdata</code></td>
<td>
<p>Data frame to generate fitted values from. If omitted, defaults to the data used to fit the model.</p>
</td></tr>
<tr><td><code id="fitted_draws.mbart2_+3A_value">value</code></td>
<td>
<p>The name of the output column for <code>fitted_draws</code>; default <code>".value"</code>.</p>
</td></tr>
<tr><td><code id="fitted_draws.mbart2_+3A_...">...</code></td>
<td>
<p>Not currently in use.</p>
</td></tr>
<tr><td><code id="fitted_draws.mbart2_+3A_n">n</code></td>
<td>
<p>Not currently implemented.</p>
</td></tr>
<tr><td><code id="fitted_draws.mbart2_+3A_include_newdata">include_newdata</code></td>
<td>
<p>Should the newdata be included in the tibble?</p>
</td></tr>
<tr><td><code id="fitted_draws.mbart2_+3A_include_sigsqs">include_sigsqs</code></td>
<td>
<p>Should the posterior sigma-squared draw be included?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tidy data frame (tibble) with fitted values.
</p>

<hr>
<h2 id='fitted_draws.pbart'>Get fitted draws from posterior of <code>pbart</code> model</h2><span id='topic+fitted_draws.pbart'></span>

<h3>Description</h3>

<p>Get fitted draws from posterior of <code>pbart</code> model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'pbart'
fitted_draws(
  model,
  newdata,
  value = ".value",
  ...,
  n = NULL,
  include_newdata = TRUE,
  include_sigsqs = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fitted_draws.pbart_+3A_model">model</code></td>
<td>
<p>A model from <code>BART</code> package.</p>
</td></tr>
<tr><td><code id="fitted_draws.pbart_+3A_newdata">newdata</code></td>
<td>
<p>Data frame to generate fitted values from. If omitted, defaults to the data used to fit the model.</p>
</td></tr>
<tr><td><code id="fitted_draws.pbart_+3A_value">value</code></td>
<td>
<p>The name of the output column for <code>fitted_draws</code>; default <code>".value"</code>.</p>
</td></tr>
<tr><td><code id="fitted_draws.pbart_+3A_...">...</code></td>
<td>
<p>Not currently in use.</p>
</td></tr>
<tr><td><code id="fitted_draws.pbart_+3A_n">n</code></td>
<td>
<p>Not currently implemented.</p>
</td></tr>
<tr><td><code id="fitted_draws.pbart_+3A_include_newdata">include_newdata</code></td>
<td>
<p>Should the newdata be included in the tibble?</p>
</td></tr>
<tr><td><code id="fitted_draws.pbart_+3A_include_sigsqs">include_sigsqs</code></td>
<td>
<p>Should the posterior sigma-squared draw be included?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tidy data frame (tibble) with fitted values.
</p>

<hr>
<h2 id='fitted_draws.wbart'>Get fitted draws from posterior of <code>wbart</code> model</h2><span id='topic+fitted_draws.wbart'></span>

<h3>Description</h3>

<p>Get fitted draws from posterior of <code>wbart</code> model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'wbart'
fitted_draws(
  model,
  newdata,
  value = ".value",
  ...,
  n = NULL,
  include_newdata = TRUE,
  include_sigsqs = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fitted_draws.wbart_+3A_model">model</code></td>
<td>
<p>A model from <code>BART</code> package.</p>
</td></tr>
<tr><td><code id="fitted_draws.wbart_+3A_newdata">newdata</code></td>
<td>
<p>Data frame to generate fitted values from. If omitted, defaults to the data used to fit the model.</p>
</td></tr>
<tr><td><code id="fitted_draws.wbart_+3A_value">value</code></td>
<td>
<p>The name of the output column for <code>fitted_draws</code>; default <code>".value"</code>.</p>
</td></tr>
<tr><td><code id="fitted_draws.wbart_+3A_...">...</code></td>
<td>
<p>Not currently in use.</p>
</td></tr>
<tr><td><code id="fitted_draws.wbart_+3A_n">n</code></td>
<td>
<p>Not currently implemented.</p>
</td></tr>
<tr><td><code id="fitted_draws.wbart_+3A_include_newdata">include_newdata</code></td>
<td>
<p>Should the newdata be included in the tibble?</p>
</td></tr>
<tr><td><code id="fitted_draws.wbart_+3A_include_sigsqs">include_sigsqs</code></td>
<td>
<p>Should the posterior sigma-squared draw be included?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tidy data frame (tibble) with fitted values.
</p>

<hr>
<h2 id='has_common_support'>Evaluate if observations have common support.</h2><span id='topic+has_common_support'></span>

<h3>Description</h3>

<p>The common support identification methods are based on Hill and Su (2013).
Loosely speaker, an individuals treatment effect estimate has common support if the counter factual
estimate is not too uncertain. The estimates are uncertain when the prediction is 'far away' from
other observations. Removing estimates without common support can be beneficial for treat effect
estimates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>has_common_support(model, treatment, method, cutoff, modeldata = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="has_common_support_+3A_model">model</code></td>
<td>
<p>A supported Bayesian model fit that can provide fits and predictions.</p>
</td></tr>
<tr><td><code id="has_common_support_+3A_treatment">treatment</code></td>
<td>
<p>A character string specifying the name of the treatment variable.</p>
</td></tr>
<tr><td><code id="has_common_support_+3A_method">method</code></td>
<td>
<p>Method to use in determining common support. 'chisq', or 'sd'.</p>
</td></tr>
<tr><td><code id="has_common_support_+3A_cutoff">cutoff</code></td>
<td>
<p>Cutoff point to use for method.</p>
</td></tr>
<tr><td><code id="has_common_support_+3A_modeldata">modeldata</code></td>
<td>
<p>Manually provide model data for some models (e.g. from BART package)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Hill, Jennifer; Su, Yu-Sung. Ann. Appl. Stat. 7 (2013), no. 3, 1386&ndash;1420. doi:10.1214/13-AOAS630. <a href="https://projecteuclid.org/euclid.aoas/1380804800">https://projecteuclid.org/euclid.aoas/1380804800</a>
</p>


<h3>Value</h3>

<p>Tibble with a row for each observation and a column indicating whether common support exists.
</p>

<hr>
<h2 id='has_tidytreatment_methods'>Check if a model class has required generic methods for tidytreatment functions.</h2><span id='topic+has_tidytreatment_methods'></span>

<h3>Description</h3>

<p>Check if a model class has required generic methods for tidytreatment functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>has_tidytreatment_methods(model)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="has_tidytreatment_methods_+3A_model">model</code></td>
<td>
<p>Model to be checked.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean
</p>

<hr>
<h2 id='highDim_testdataset3'>ACIC2019 High Dimensional Test Dataset</h2><span id='topic+highDim_testdataset3'></span>

<h3>Description</h3>

<p>Dataset from the &quot;Data Challenge&quot; for the Atlantic Causal Inference Conference 2019.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>highDim_testdataset3
</code></pre>


<h3>Format</h3>

<p>A data frame with 2000 observations, and 187 variables.
</p>

<dl>
<dt>Y</dt><dd><p>Outcome variable</p>
</dd>
<dt>A</dt><dd><p>Treatment variable</p>
</dd>
<dt>V1,V2,V3,V4,V5,V6,V7,V8,V9,V10,V11,V12,V13,V14,V15,V16,V17,V18,V19,V20,V21,V22,V23,V24,V25,V26,V27,V28,V29,V30,V31,V32,V33,V34,V35,V36,V37,V38,V39,V40,V41,V42,V43,V44,V45,V46,V47,V48,V49,V50,V51,V52,V53,V54,V55,V56,V57,V58,V59,V60,V61,V62,V63,V64,V65,V66,V67,V68,V69,V70,V71,V72,V73,V74,V75,V76,V77,V78,V79,V80,V81,V82,V83,V84,V85,V86,V87,V88,V89,V90,V91,V92,V93,V94,V95,V96,V97,V98,V99,V100,V101,V102,V103,V104,V105,V106,V107,V108,V109,V110,V111,V112,V113,V114,V115,V116,V117,V118,V119,V120,V121,V122,V123,V124,V125,V126,V127,V128,V129,V130,V131,V132,V133,V134,V135,V136,V137,V138,V139,V140,V141,V142,V143,V144,V145,V146,V147,V148,V149,V150,V151,V152,V153,V154,V155,V156,V157,V158,V159,V160,V161,V162,V163,V164,V165,V166,V167,V168,V169,V170,V171,V172,V173,V174,V175,V176,V177,V178,V179,V180,V181,V182,V183,V184,V185</dt><dd><p>Other covariates</p>
</dd>
</dl>
<p>...

</p>


<h3>Source</h3>

<p><a href="https://www.mcgill.ca/epi-biostat-occh/seminars-events/atlantic-causal-inference-conference-2019/data-challenge">https://www.mcgill.ca/epi-biostat-occh/seminars-events/atlantic-causal-inference-conference-2019/data-challenge</a>
</p>

<hr>
<h2 id='posterior_trees_BART'>Get posterior tree draws into tibble format from BART model</h2><span id='topic+posterior_trees_BART'></span>

<h3>Description</h3>

<p>Tibble grouped by iteration ('iter') and tree id ('tree_id'). All information
calculated by method is included in output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>posterior_trees_BART(model, label_digits = 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="posterior_trees_BART_+3A_model">model</code></td>
<td>
<p>BART model.</p>
</td></tr>
<tr><td><code id="posterior_trees_BART_+3A_label_digits">label_digits</code></td>
<td>
<p>Rounding for labels.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with columns to </p>

<dl>
<dt>iter</dt><dd><p>Integer describing unique MCMC iteration.</p>
</dd>
<dt>tree_id</dt><dd><p>Integer. Unique tree id with each 'iter'.</p>
</dd>
<dt>node</dt><dd><p>Integer describing node in tree. Unique to each 'tree'-'iter'.</p>
</dd>
<dt>parent</dt><dd><p>Integer describing parent node in tree.</p>
</dd>
<dt>label</dt><dd><p>Label for the node.</p>
</dd>
<dt>tier</dt><dd><p>Position in tree hierarchy.</p>
</dd>
<dt>var</dt><dd><p>Variable for split.</p>
</dd>
<dt>cut</dt><dd><p>Numeric. Value of decision rule for 'var'.</p>
</dd>
<dt>is_leaf</dt><dd><p>Logical. 'TRUE' if leaf, 'FALSE' if stem.</p>
</dd>
<dt>leaf_value</dt><dd></dd>
<dt>child_left</dt><dd><p>Integer. Left child of node.</p>
</dd>
<dt>child_right</dt><dd><p>Integer. Right child of node.</p>
</dd>
</dl>


<hr>
<h2 id='predicted_draws_BART'>Get predict draws from posterior of <code>BART</code>-package models</h2><span id='topic+predicted_draws_BART'></span>

<h3>Description</h3>

<p>Get predict draws from posterior of <code>BART</code>-package models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predicted_draws_BART(
  object,
  newdata = NULL,
  value = ".prediction",
  ...,
  rng = stats::rnorm,
  include_newdata = TRUE,
  include_fitted = FALSE,
  include_sigsqs = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predicted_draws_BART_+3A_object">object</code></td>
<td>
<p>A <code>BART</code>-package model.</p>
</td></tr>
<tr><td><code id="predicted_draws_BART_+3A_newdata">newdata</code></td>
<td>
<p>Data frame to generate predictions from. If omitted, most model types will generate predictions from the data used to fit the model.</p>
</td></tr>
<tr><td><code id="predicted_draws_BART_+3A_value">value</code></td>
<td>
<p>The name of the output column for <code>predicted_draws</code>; default <code>".prediction"</code>.</p>
</td></tr>
<tr><td><code id="predicted_draws_BART_+3A_...">...</code></td>
<td>
<p>Arguments to pass to <code>predict</code> (e.g. <code>BART:::predict.wbart</code>).</p>
</td></tr>
<tr><td><code id="predicted_draws_BART_+3A_rng">rng</code></td>
<td>
<p>Random number generator function. Default is <code>rnorm</code> for models with Gaussian errors.</p>
</td></tr>
<tr><td><code id="predicted_draws_BART_+3A_include_newdata">include_newdata</code></td>
<td>
<p>Should the newdata be included in the tibble?</p>
</td></tr>
<tr><td><code id="predicted_draws_BART_+3A_include_fitted">include_fitted</code></td>
<td>
<p>Should the posterior fitted values be included in the tibble?</p>
</td></tr>
<tr><td><code id="predicted_draws_BART_+3A_include_sigsqs">include_sigsqs</code></td>
<td>
<p>Should the posterior sigma-squared draw be included?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tidy data frame (tibble) with predicted values.
</p>

<hr>
<h2 id='predicted_draws.bartMachine'>Get predict draws from posterior of <code>bartMachine</code> model</h2><span id='topic+predicted_draws.bartMachine'></span>

<h3>Description</h3>

<p>Get predict draws from posterior of <code>bartMachine</code> model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bartMachine'
predicted_draws(
  object,
  newdata,
  value = ".prediction",
  ...,
  ndraws = NULL,
  include_newdata = TRUE,
  include_fitted = FALSE,
  include_sigsqs = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predicted_draws.bartMachine_+3A_object">object</code></td>
<td>
<p>A <code>bartMachine</code> model.</p>
</td></tr>
<tr><td><code id="predicted_draws.bartMachine_+3A_newdata">newdata</code></td>
<td>
<p>Data frame to generate predictions from. If omitted, most model types will generate predictions from the data used to fit the model.</p>
</td></tr>
<tr><td><code id="predicted_draws.bartMachine_+3A_value">value</code></td>
<td>
<p>The name of the output column for <code>predicted_draws</code>; default <code>".prediction"</code>.</p>
</td></tr>
<tr><td><code id="predicted_draws.bartMachine_+3A_...">...</code></td>
<td>
<p>Not currently in use.</p>
</td></tr>
<tr><td><code id="predicted_draws.bartMachine_+3A_ndraws">ndraws</code></td>
<td>
<p>Not currently implemented.</p>
</td></tr>
<tr><td><code id="predicted_draws.bartMachine_+3A_include_newdata">include_newdata</code></td>
<td>
<p>Should the newdata be included in the tibble?</p>
</td></tr>
<tr><td><code id="predicted_draws.bartMachine_+3A_include_fitted">include_fitted</code></td>
<td>
<p>Should the posterior fitted values be included in the tibble?</p>
</td></tr>
<tr><td><code id="predicted_draws.bartMachine_+3A_include_sigsqs">include_sigsqs</code></td>
<td>
<p>Should the posterior sigma-squared draw be included?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tidy data frame (tibble) with predicted values.
</p>

<hr>
<h2 id='predicted_draws.wbart'>Get predict draws from posterior of <code>wbart</code> model</h2><span id='topic+predicted_draws.wbart'></span>

<h3>Description</h3>

<p>Get predict draws from posterior of <code>wbart</code> model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'wbart'
predicted_draws(
  object,
  newdata,
  value = ".prediction",
  ...,
  ndraws = NULL,
  include_newdata = TRUE,
  include_fitted = FALSE,
  include_sigsqs = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predicted_draws.wbart_+3A_object">object</code></td>
<td>
<p>A <code>wbart</code> model.</p>
</td></tr>
<tr><td><code id="predicted_draws.wbart_+3A_newdata">newdata</code></td>
<td>
<p>Data frame to generate predictions from. If omitted, most model types will generate predictions from the data used to fit the model.</p>
</td></tr>
<tr><td><code id="predicted_draws.wbart_+3A_value">value</code></td>
<td>
<p>The name of the output column for <code>predicted_draws</code>; default <code>".prediction"</code>.</p>
</td></tr>
<tr><td><code id="predicted_draws.wbart_+3A_...">...</code></td>
<td>
<p>Use to specify random number generator, default is <code>rng=stats::rnorm</code>.</p>
</td></tr>
<tr><td><code id="predicted_draws.wbart_+3A_ndraws">ndraws</code></td>
<td>
<p>Not currently implemented.</p>
</td></tr>
<tr><td><code id="predicted_draws.wbart_+3A_include_newdata">include_newdata</code></td>
<td>
<p>Should the newdata be included in the tibble?</p>
</td></tr>
<tr><td><code id="predicted_draws.wbart_+3A_include_fitted">include_fitted</code></td>
<td>
<p>Should the posterior fitted values be included in the tibble?</p>
</td></tr>
<tr><td><code id="predicted_draws.wbart_+3A_include_sigsqs">include_sigsqs</code></td>
<td>
<p>Should the posterior sigma-squared draw be included?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tidy data frame (tibble) with predicted values.
</p>

<hr>
<h2 id='residual_draws_BART'>Get residual draw for BART model</h2><span id='topic+residual_draws_BART'></span>

<h3>Description</h3>

<p>Classes from <code>BART</code>-package models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>residual_draws_BART(
  object,
  response,
  newdata = NULL,
  value = ".residual",
  include_newdata = TRUE,
  include_sigsqs = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="residual_draws_BART_+3A_object">object</code></td>
<td>
<p>model from <code>BART</code> package.</p>
</td></tr>
<tr><td><code id="residual_draws_BART_+3A_response">response</code></td>
<td>
<p>Original response vector.</p>
</td></tr>
<tr><td><code id="residual_draws_BART_+3A_newdata">newdata</code></td>
<td>
<p>Data frame to generate predictions from. If omitted, original data used to fit the model.</p>
</td></tr>
<tr><td><code id="residual_draws_BART_+3A_value">value</code></td>
<td>
<p>Name of the output column for residual_draws; default is <code>.residual</code>.</p>
</td></tr>
<tr><td><code id="residual_draws_BART_+3A_include_newdata">include_newdata</code></td>
<td>
<p>Should the newdata be included in the tibble?</p>
</td></tr>
<tr><td><code id="residual_draws_BART_+3A_include_sigsqs">include_sigsqs</code></td>
<td>
<p>Should the posterior sigma-squared draw be included?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Tibble with residuals.
</p>

<hr>
<h2 id='residual_draws.bartMachine'>Get residual draw for <code>bartMachine</code> model</h2><span id='topic+residual_draws.bartMachine'></span>

<h3>Description</h3>

<p>Get residual draw for <code>bartMachine</code> model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bartMachine'
residual_draws(
  object,
  newdata,
  value = ".residual",
  ...,
  ndraws = NULL,
  include_newdata = TRUE,
  include_sigsqs = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="residual_draws.bartMachine_+3A_object">object</code></td>
<td>
<p><code>bartMachine</code> model.</p>
</td></tr>
<tr><td><code id="residual_draws.bartMachine_+3A_newdata">newdata</code></td>
<td>
<p>Data frame to generate predictions from. If omitted, original data used to fit the model.</p>
</td></tr>
<tr><td><code id="residual_draws.bartMachine_+3A_value">value</code></td>
<td>
<p>Name of the output column for residual_draws; default is <code>.residual</code>.</p>
</td></tr>
<tr><td><code id="residual_draws.bartMachine_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to the underlying prediction method for the type of model given.</p>
</td></tr>
<tr><td><code id="residual_draws.bartMachine_+3A_ndraws">ndraws</code></td>
<td>
<p>Not currently implemented.</p>
</td></tr>
<tr><td><code id="residual_draws.bartMachine_+3A_include_newdata">include_newdata</code></td>
<td>
<p>Should the newdata be included in the tibble?</p>
</td></tr>
<tr><td><code id="residual_draws.bartMachine_+3A_include_sigsqs">include_sigsqs</code></td>
<td>
<p>Should the posterior sigma-squared draw be included?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Tibble with residuals.
</p>

<hr>
<h2 id='residual_draws.pbart'>Get residual draw for <code>pbart</code> model</h2><span id='topic+residual_draws.pbart'></span>

<h3>Description</h3>

<p>The original response variable must be passed as an argument to this function.
e.g. 'response = y'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'pbart'
residual_draws(
  object,
  newdata,
  value = ".residual",
  ...,
  ndraws = NULL,
  include_newdata = TRUE,
  include_sigsqs = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="residual_draws.pbart_+3A_object">object</code></td>
<td>
<p><code>wbart</code> model.</p>
</td></tr>
<tr><td><code id="residual_draws.pbart_+3A_newdata">newdata</code></td>
<td>
<p>Data frame to generate predictions from. If omitted, original data used to fit the model.</p>
</td></tr>
<tr><td><code id="residual_draws.pbart_+3A_value">value</code></td>
<td>
<p>Name of the output column for residual_draws; default is <code>.residual</code>.</p>
</td></tr>
<tr><td><code id="residual_draws.pbart_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to the underlying prediction method for the type of model given.</p>
</td></tr>
<tr><td><code id="residual_draws.pbart_+3A_ndraws">ndraws</code></td>
<td>
<p>Not currently implemented.</p>
</td></tr>
<tr><td><code id="residual_draws.pbart_+3A_include_newdata">include_newdata</code></td>
<td>
<p>Should the newdata be included in the tibble?</p>
</td></tr>
<tr><td><code id="residual_draws.pbart_+3A_include_sigsqs">include_sigsqs</code></td>
<td>
<p>Should the posterior sigma-squared draw be included?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Tibble with residuals.
</p>

<hr>
<h2 id='residual_draws.wbart'>Get residual draw for <code>wbart</code> model</h2><span id='topic+residual_draws.wbart'></span>

<h3>Description</h3>

<p>The original response variable must be passed as an argument to this function.
e.g. 'response = y'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'wbart'
residual_draws(
  object,
  newdata,
  value = ".residual",
  ...,
  ndraws = NULL,
  include_newdata = TRUE,
  include_sigsqs = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="residual_draws.wbart_+3A_object">object</code></td>
<td>
<p><code>wbart</code> model.</p>
</td></tr>
<tr><td><code id="residual_draws.wbart_+3A_newdata">newdata</code></td>
<td>
<p>Data frame to generate predictions from. If omitted, original data used to fit the model.</p>
</td></tr>
<tr><td><code id="residual_draws.wbart_+3A_value">value</code></td>
<td>
<p>Name of the output column for residual_draws; default is <code>.residual</code>.</p>
</td></tr>
<tr><td><code id="residual_draws.wbart_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to the underlying prediction method for the type of model given.</p>
</td></tr>
<tr><td><code id="residual_draws.wbart_+3A_ndraws">ndraws</code></td>
<td>
<p>Not currently implemented.</p>
</td></tr>
<tr><td><code id="residual_draws.wbart_+3A_include_newdata">include_newdata</code></td>
<td>
<p>Should the newdata be included in the tibble?</p>
</td></tr>
<tr><td><code id="residual_draws.wbart_+3A_include_sigsqs">include_sigsqs</code></td>
<td>
<p>Should the posterior sigma-squared draw be included?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Tibble with residuals.
</p>

<hr>
<h2 id='simulate_su_hill_data'>Simulate data with scenarios from Hill and Su (2013)</h2><span id='topic+simulate_su_hill_data'></span>

<h3>Description</h3>

<p>Sample <code class="reqn">n</code> observations with the following scheme:
</p>

<ol>
<li><p> Covariates: <code class="reqn">X_j ~ N(0,1)</code>.
</p>
</li>
<li><p> Assignment: <code class="reqn">Z ~ Bin(n, p)</code>  with <code class="reqn">p = logit^{-1}(a + X \gamma^L + Q \gamma^N)</code> where <code class="reqn">a = \omega - mean(X \gamma^L + Q \gamma^N)</code>.
</p>
</li>
<li><p> Mean response: <code class="reqn">E(Y(0)|X) = X \beta_0^L + Q \beta_0^N </code> and <code class="reqn">E(Y(1)|X) = X \beta_1^L + Q \beta_1^N</code>.
</p>
</li>
<li><p> Observation: <code class="reqn">Y ~ N(\mu,\sigma_y^2))</code>.
</p>
</li></ol>

<p>Superscript <code class="reqn">L</code> denotes the linear components, whilst <code class="reqn">N</code> denotes the non-linear
components.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulate_su_hill_data(
  n,
  treatment_linear = TRUE,
  response_parallel = TRUE,
  response_aligned = TRUE,
  y_sd = 1,
  tau = 4,
  omega = 0,
  add_categorical = FALSE,
  coef_categorical_treatment = NULL,
  coef_categorical_nontreatment = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simulate_su_hill_data_+3A_n">n</code></td>
<td>
<p>Size of simulated sample.</p>
</td></tr>
<tr><td><code id="simulate_su_hill_data_+3A_treatment_linear">treatment_linear</code></td>
<td>
<p>Treatment assignment mechanism is linear?</p>
</td></tr>
<tr><td><code id="simulate_su_hill_data_+3A_response_parallel">response_parallel</code></td>
<td>
<p>Response surface is parallel?</p>
</td></tr>
<tr><td><code id="simulate_su_hill_data_+3A_response_aligned">response_aligned</code></td>
<td>
<p>Response surface is aligned?</p>
</td></tr>
<tr><td><code id="simulate_su_hill_data_+3A_y_sd">y_sd</code></td>
<td>
<p>Observation noise.</p>
</td></tr>
<tr><td><code id="simulate_su_hill_data_+3A_tau">tau</code></td>
<td>
<p>Treatment effect for parallel response surfaces. Not applicable if surface is nonparallel.</p>
</td></tr>
<tr><td><code id="simulate_su_hill_data_+3A_omega">omega</code></td>
<td>
<p>Offset to control treatment assignment ratios.</p>
</td></tr>
<tr><td><code id="simulate_su_hill_data_+3A_add_categorical">add_categorical</code></td>
<td>
<p>Should a categorical variable be added? (Not in Hill and Su)</p>
</td></tr>
<tr><td><code id="simulate_su_hill_data_+3A_coef_categorical_treatment">coef_categorical_treatment</code></td>
<td>
<p>What are the coefficients of the categorical variable under treatment? (Not in Hill and Su)</p>
</td></tr>
<tr><td><code id="simulate_su_hill_data_+3A_coef_categorical_nontreatment">coef_categorical_nontreatment</code></td>
<td>
<p>What are the coefficients of the categorical variable under nontreatment? (Not in Hill and Su)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Coefficients used are returned in the list this function creates. See Table 1 in Su and Hill (2013) for the table of coefficients.
The <code class="reqn">X_j</code> are in a data.frame named <code>data</code> in the returned list.
The formula for the model matrix <code class="reqn">[X,Q]</code> is named <code>su_hill_formula</code> in the returned list.
The coefficients used for the model matrix are contained in <code>coefs</code>.
The Su and Hill (2013) simulations did not include categorical variables, but you can add them here using arguments: <code>add_categorical</code>, <code>coef_categorical_treatment</code>, <code>coef_categorical_nontreatment</code>.
</p>
<p>Hill, Jennifer; Su, Yu-Sung. Ann. Appl. Stat. 7 (2013), no. 3, 1386&ndash;1420. doi:10.1214/13-AOAS630. <a href="https://projecteuclid.org/euclid.aoas/1380804800">https://projecteuclid.org/euclid.aoas/1380804800</a>
</p>


<h3>Value</h3>

<p>An object of class <code>suhillsim</code> that is a list with elements
</p>
<table>
<tr><td><code>data</code></td>
<td>
<p>Simulated data in data.frame</p>
</td></tr>
<tr><td><code>mean_y</code></td>
<td>
<p>The mean y values for each individual (row)</p>
</td></tr>
<tr><td><code>args</code></td>
<td>
<p>List of arguments passed to function</p>
</td></tr>
<tr><td><code>formulas</code></td>
<td>
<p>Response formulas used to generate data</p>
</td></tr>
<tr><td><code>coefs</code></td>
<td>
<p>Coefficients for the formulas</p>
</td></tr>
</table>

<hr>
<h2 id='suhillsim1'>Example simulated dataset 1</h2><span id='topic+suhillsim1'></span>

<h3>Description</h3>

<p>Simulated with <code>simulate_su_hill_data(...)</code>, see details.
Includes propensity score estimated using BART (<code>prop_score</code>), see source.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>suhillsim1
</code></pre>


<h3>Format</h3>

<p>See <code>?simulate_su_hill_data</code> for output format.
</p>


<h3>Details</h3>

<pre>set.seed(101)
 suhillsim1 &lt;- simulate_su_hill_data(n = 100, treatment_linear = FALSE,  omega = 0, add_categorical = TRUE,
   coef_categorical_treatment = c(0,0,1),
   coef_categorical_nontreatment = c(-1,0,-1))
</pre>


<h3>Source</h3>

<p><a href="https://github.com/bonStats/tidytreatment/tree/master/data-raw">https://github.com/bonStats/tidytreatment/tree/master/data-raw</a>
</p>

<hr>
<h2 id='tidy_ate'>Get average treatment effect draws from posterior</h2><span id='topic+tidy_ate'></span>

<h3>Description</h3>

<p>ATE = Average Treatment Effects
Assumes treated column is either a integer column of 1's (treated) and 0's (nontreated) or logical indicating treatment if TRUE.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tidy_ate(model, treatment, common_support_method, cutoff, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tidy_ate_+3A_model">model</code></td>
<td>
<p>A supported Bayesian model fit that can provide fits and predictions.</p>
</td></tr>
<tr><td><code id="tidy_ate_+3A_treatment">treatment</code></td>
<td>
<p>A character string specifying the name of the treatment variable.</p>
</td></tr>
<tr><td><code id="tidy_ate_+3A_common_support_method">common_support_method</code></td>
<td>
<p>Either &quot;sd&quot;, or &quot;chisq&quot;. Default is unspecified, and no common support calculation is done.</p>
</td></tr>
<tr><td><code id="tidy_ate_+3A_cutoff">cutoff</code></td>
<td>
<p>Cutoff for common support (if in use).</p>
</td></tr>
<tr><td><code id="tidy_ate_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to <code>tidybayes::fitted_draws</code> typically scale for <code>BART</code> models.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tidy data frame (tibble) with treatment effect values.
</p>

<hr>
<h2 id='tidy_att'>Get average treatment effect on treated draws from posterior</h2><span id='topic+tidy_att'></span>

<h3>Description</h3>

<p>ATT = average Treatment Effects on Treated
Assumes treated column is either a integer column of 1's (treated) and 0's (nontreated) or logical indicating treatment if TRUE.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tidy_att(model, treatment, common_support_method, cutoff, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tidy_att_+3A_model">model</code></td>
<td>
<p>A supported Bayesian model fit that can provide fits and predictions.</p>
</td></tr>
<tr><td><code id="tidy_att_+3A_treatment">treatment</code></td>
<td>
<p>A character string specifying the name of the treatment variable.</p>
</td></tr>
<tr><td><code id="tidy_att_+3A_common_support_method">common_support_method</code></td>
<td>
<p>Either &quot;sd&quot;, or &quot;chisq&quot;. Default is unspecified, and no common support calculation is done.</p>
</td></tr>
<tr><td><code id="tidy_att_+3A_cutoff">cutoff</code></td>
<td>
<p>Cutoff for common support (if in use).</p>
</td></tr>
<tr><td><code id="tidy_att_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to <code>tidybayes::fitted_draws</code> typically scale for <code>BART</code> models.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tidy data frame (tibble) with treatment effect values.
</p>

<hr>
<h2 id='tidytreatment'>tidytreatment: Tidy methods for Bayesian treatment effect models</h2><span id='topic+tidytreatment'></span>

<h3>Description</h3>

<p>tidytreatment provides functions for extracting tidy data from Bayesian treatment effect models, estimating treatment effects, and plotting useful summaries of these.
</p>

<hr>
<h2 id='treatment_effects'>Get (individual) treatment effect draws from posterior</h2><span id='topic+treatment_effects'></span>

<h3>Description</h3>

<p>CTE = Conditional Treatment Effects (usually used to generate (C)ATE or ATT)
<code>newdata</code> specifies the conditions, if unspecified it defaults to the original data.
Assumes treated column is either a integer column of 1's (treated) and 0's (nontreated) or logical indicating treatment if TRUE.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>treatment_effects(
  model,
  treatment,
  newdata,
  subset = "all",
  common_support_method,
  cutoff,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="treatment_effects_+3A_model">model</code></td>
<td>
<p>A supported Bayesian model fit that can provide fits and predictions.</p>
</td></tr>
<tr><td><code id="treatment_effects_+3A_treatment">treatment</code></td>
<td>
<p>A character string specifying the name of the treatment variable.</p>
</td></tr>
<tr><td><code id="treatment_effects_+3A_newdata">newdata</code></td>
<td>
<p>Data frame to generate fitted values from. If omitted, defaults to the data used to fit the model.</p>
</td></tr>
<tr><td><code id="treatment_effects_+3A_subset">subset</code></td>
<td>
<p>Either &quot;treated&quot;, &quot;nontreated&quot;, or &quot;all&quot;. Default is &quot;all&quot;.</p>
</td></tr>
<tr><td><code id="treatment_effects_+3A_common_support_method">common_support_method</code></td>
<td>
<p>Either &quot;sd&quot;, or &quot;chisq&quot;. Default is unspecified, and no common support calculation is done.</p>
</td></tr>
<tr><td><code id="treatment_effects_+3A_cutoff">cutoff</code></td>
<td>
<p>Cutoff for common support (if in use).</p>
</td></tr>
<tr><td><code id="treatment_effects_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to <code>tidybayes::fitted_draws</code> typically scale for <code>BART</code> models.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tidy data frame (tibble) with treatment effect values.
</p>

<hr>
<h2 id='treatment_effects.default'>Get treatment effect draws from posterior</h2><span id='topic+treatment_effects.default'></span>

<h3>Description</h3>

<p>CTE = Conditional Treatment Effects (or CATE, the average effects)
<code>newdata</code> specifies the conditions, if unspecified it defaults to the original data.
Assumes treated column is either a integer column of 1's (treated) and 0's (nontreated) or logical indicating treatment if TRUE.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Default S3 method:
treatment_effects(
  model,
  treatment,
  newdata,
  subset = "all",
  common_support_method,
  cutoff,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="treatment_effects.default_+3A_model">model</code></td>
<td>
<p>A supported Bayesian model fit that can provide fits and predictions.</p>
</td></tr>
<tr><td><code id="treatment_effects.default_+3A_treatment">treatment</code></td>
<td>
<p>A character string specifying the name of the treatment variable.</p>
</td></tr>
<tr><td><code id="treatment_effects.default_+3A_newdata">newdata</code></td>
<td>
<p>Data frame to generate fitted values from. If omitted, defaults to the data used to fit the model.</p>
</td></tr>
<tr><td><code id="treatment_effects.default_+3A_subset">subset</code></td>
<td>
<p>Either &quot;treated&quot;, &quot;nontreated&quot;, or &quot;all&quot;. Default is &quot;all&quot;.</p>
</td></tr>
<tr><td><code id="treatment_effects.default_+3A_common_support_method">common_support_method</code></td>
<td>
<p>Either &quot;sd&quot;, or &quot;chisq&quot;. Default is unspecified, and no common support calculation is done.</p>
</td></tr>
<tr><td><code id="treatment_effects.default_+3A_cutoff">cutoff</code></td>
<td>
<p>Cutoff for common support (if in use).</p>
</td></tr>
<tr><td><code id="treatment_effects.default_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to <code>tidybayes::fitted_draws</code> typically scale for <code>BART</code> models.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tidy data frame (tibble) with treatment effect values.
</p>

<hr>
<h2 id='variance_draws'>Get variance draws from posterior of BART models</h2><span id='topic+variance_draws'></span>

<h3>Description</h3>

<p>Models from <code>BART</code>-package include warm-up and skipped MCMC draws.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>variance_draws(model, value = ".sigma_sq", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="variance_draws_+3A_model">model</code></td>
<td>
<p>A model from a supported package.</p>
</td></tr>
<tr><td><code id="variance_draws_+3A_value">value</code></td>
<td>
<p>The name of the output column for variance parameter; default <code>".sigma_sq"</code>.</p>
</td></tr>
<tr><td><code id="variance_draws_+3A_...">...</code></td>
<td>
<p>Additional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tidy data frame (tibble) with draws of variance parameter
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
