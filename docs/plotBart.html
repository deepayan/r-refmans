<!DOCTYPE html><html><head><title>Help for package plotBart</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {plotBart}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#lalonde'><p>Lalonde dataset</p></a></li>
<li><a href='#plot_balance'><p>Plot the balance</p></a></li>
<li><a href='#plot_CATE'><p>Plot the histogram or density of the Conditional Average Treatment Effect</p></a></li>
<li><a href='#plot_common_support'><p>Plot common support based on the standard deviation rule, chi squared rule, or both</p></a></li>
<li><a href='#plot_ICATE'><p>Plot Individual Conditional Average Treatment effects</p></a></li>
<li><a href='#plot_moderator_c_loess'><p>LOESS plot of a continuous moderating variable</p></a></li>
<li><a href='#plot_moderator_c_pd'><p>Partial dependency plot of a continuous moderating variable</p></a></li>
<li><a href='#plot_moderator_d_density'><p>Plot the Conditional Average Treatment Effect conditional on a discrete moderator</p></a></li>
<li><a href='#plot_moderator_d_linerange'><p>Plot the posterior interval of the Conditional Average Treatment Effect grouped by a discrete variable</p></a></li>
<li><a href='#plot_moderator_search'><p>Plot a single regression tree of covariates on ICATEs</p></a></li>
<li><a href='#plot_overlap_pScores'><p>Plot the overlap via propensity score method</p></a></li>
<li><a href='#plot_overlap_vars'><p>Plot the overlap of variables</p></a></li>
<li><a href='#plot_PATE'><p>Plot histogram or density of Population Average Treatment Effect</p></a></li>
<li><a href='#plot_SATE'><p>Plot histogram or density of Sample Average Treatment Effects</p></a></li>
<li><a href='#plot_trace'><p>Trace plot the estimands of a 'bartCause::bartc()' model</p></a></li>
<li><a href='#plot_waterfall'><p>Plot a waterfall of the ICATEs</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Diagnostic and Plotting Functions to Supplement 'bartCause'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.7</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions to assist in diagnostics and plotting during the causal inference modeling process. 
  Supplements the 'bartCause' package.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://priism-center.github.io/plotBart/">https://priism-center.github.io/plotBart/</a>,
<a href="https://github.com/priism-center/plotBart">https://github.com/priism-center/plotBart</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/priism-center/plotBart/issues">https://github.com/priism-center/plotBart/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10), bartCause (&ge; 1.0.4), ggplot2 (&ge; 3.3.2)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr (&ge; 1.0.5), tidyr (&ge; 1.1.3), rpart (&ge; 4.1.15), stats
(&ge; 3.6.2), ggdendro (&ge; 0.1.22)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, vdiffr, arm (&ge; 1.10.1), covr, knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-05-26 13:16:41 UTC; joemarlo</td>
</tr>
<tr>
<td>Author:</td>
<td>Joseph Marlo [aut, cre],
  George Perrett [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Joseph Marlo &lt;jpm770@nyu.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-05-27 07:50:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='lalonde'>Lalonde dataset</h2><span id='topic+lalonde'></span>

<h3>Description</h3>

<p>Lalonde dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lalonde
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 445 rows and 12 columns.
</p>


<h3>Source</h3>

<p><a href="https://CRAN.R-project.org/package=arm">https://CRAN.R-project.org/package=arm</a>
</p>

<hr>
<h2 id='plot_balance'>Plot the balance</h2><span id='topic+plot_balance'></span>

<h3>Description</h3>

<p>Visualize balance of variables between treatment and control groups. Balance plot reflects balance in standardized units.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_balance(.data, treatment, confounders)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_balance_+3A_.data">.data</code></td>
<td>
<p>dataframe</p>
</td></tr>
<tr><td><code id="plot_balance_+3A_treatment">treatment</code></td>
<td>
<p>the column denoted treatment. Must be binary.</p>
</td></tr>
<tr><td><code id="plot_balance_+3A_confounders">confounders</code></td>
<td>
<p>character list of column names denoting the X columns of interest</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ggplot object
</p>


<h3>Author(s)</h3>

<p>Joseph Marlo
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(lalonde)
plot_balance(lalonde, 'treat', c('re78', 'age', 'educ')) + labs(title = 'My new title')
</code></pre>

<hr>
<h2 id='plot_CATE'>Plot the histogram or density of the Conditional Average Treatment Effect</h2><span id='topic+plot_CATE'></span>

<h3>Description</h3>

<p>Plot the conditional average treatment effect (CATE) of a 'bartCause' model.
The conditional average treatment effect is derived from taking the difference between
predictions for each individual under the control condition and under the treatment condition averaged over the population.
Means of the CATE distribution will resemble SATE and PATE but the CATE distribution accounts for more uncertainty than SATE and less uncertainty than PATE.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_CATE(
  .model,
  type = c("histogram", "density"),
  ci_80 = FALSE,
  ci_95 = FALSE,
  reference = NULL,
  .mean = FALSE,
  .median = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_CATE_+3A_.model">.model</code></td>
<td>
<p>a model produced by 'bartCause::bartc()'</p>
</td></tr>
<tr><td><code id="plot_CATE_+3A_type">type</code></td>
<td>
<p>histogram or density</p>
</td></tr>
<tr><td><code id="plot_CATE_+3A_ci_80">ci_80</code></td>
<td>
<p>TRUE/FALSE. Show the 80% credible interval?</p>
</td></tr>
<tr><td><code id="plot_CATE_+3A_ci_95">ci_95</code></td>
<td>
<p>TRUE/FALSE. Show the 95% credible interval?</p>
</td></tr>
<tr><td><code id="plot_CATE_+3A_reference">reference</code></td>
<td>
<p>numeric. Show a vertical reference line at this value</p>
</td></tr>
<tr><td><code id="plot_CATE_+3A_.mean">.mean</code></td>
<td>
<p>TRUE/FALSE. Show the mean reference line</p>
</td></tr>
<tr><td><code id="plot_CATE_+3A_.median">.median</code></td>
<td>
<p>TRUE/FALSE. Show the median reference line</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ggplot object
</p>


<h3>Author(s)</h3>

<p>George Perrett, Joseph Marlo
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(lalonde)
confounders &lt;- c('age', 'educ', 'black', 'hisp', 'married', 'nodegr')
model_results &lt;- bartCause::bartc(
 response = lalonde[['re78']],
 treatment = lalonde[['treat']],
 confounders = as.matrix(lalonde[, confounders]),
 estimand = 'ate',
 commonSup.rule = 'none'
)
plot_CATE(model_results)

</code></pre>

<hr>
<h2 id='plot_common_support'>Plot common support based on the standard deviation rule, chi squared rule, or both</h2><span id='topic+plot_common_support'></span>

<h3>Description</h3>

<p>Plot common support based on the standard deviation rule, chi squared rule, or both.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_common_support(.model, rule = c("both", "sd", "chi"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_common_support_+3A_.model">.model</code></td>
<td>
<p>a model produced by 'bartCause::bartc()'</p>
</td></tr>
<tr><td><code id="plot_common_support_+3A_rule">rule</code></td>
<td>
<p>one of c('both', 'sd', 'chi') denoting which rule to use to identify lack of support</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Sufficient overlap/common support is an assumption of causal inference.
BART models use the uncertainty of counter factual uncertainty.
When the posterior distribution of an individual's counterfactual prediction extends beyond a specified cut-point, that point likely has insufficient common support.
'bartCause' model offer the option to automatically remove points without common support from analyses, however, this must be specified during model fitting.
Cut-points are determined through one of two rules: the standard deviation (sd) or chi-squared (chi).
Under the standard deviation rule, a point has weak common support if its posterior distribution of the counterfactual deviation is greater than the maximum posterior of the observed predictions with 1 standard deviation of the distribution of standard deviations for each individual's predicted outcome under the observed assignment.
Under the chi-squared rule, a point is discarded if the variance between its counterfactual prediction over observed prediction are statistically different under a chi-squared distribution with 1 degree of freedom. For more details on discard rules see Hill and Su 2013.
</p>
<p>When called this plot will show how many points would have been removed under the standard deviation and chi-squared rules. This plot should be used as a diagnostic for 'bartCause' models fit without a common-support rule.
</p>


<h3>Value</h3>

<p>ggplot object
</p>


<h3>Author(s)</h3>

<p>George Perrett, Joseph Marlo
</p>


<h3>References</h3>

<p>Hill, J., &amp; Su, Y. S. (2013).
Assessing lack of common support in causal inference using Bayesian nonparametrics: Implications for evaluating the effect of breastfeeding on children's cognitive outcomes.
The Annals of Applied Statistics,
1386-1420.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(lalonde)
confounders &lt;- c('age', 'educ', 'black', 'hisp', 'married', 'nodegr')
model_results &lt;- bartCause::bartc(
 response = lalonde[['re78']],
 treatment = lalonde[['treat']],
 confounders = as.matrix(lalonde[, confounders]),
 estimand = 'ate',
 commonSuprule = 'none'
)
plot_common_support(model_results)

</code></pre>

<hr>
<h2 id='plot_ICATE'>Plot Individual Conditional Average Treatment effects</h2><span id='topic+plot_ICATE'></span>

<h3>Description</h3>

<p>Plots a histogram of Individual Conditional Average Treatment effects (ICATE).
ICATEs are the difference in each individual's predicted outcome under the treatment and predicted outcome under the control averaged over the individual.
Plots of ICATEs are useful to identify potential heterogeneous treatment effects between different individuals. ICATE plots can be grouped by discrete variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_ICATE(.model, .group_by = NULL, n_bins = 30, .alpha = 0.7)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_ICATE_+3A_.model">.model</code></td>
<td>
<p>a model produced by 'bartCause::bartc()'</p>
</td></tr>
<tr><td><code id="plot_ICATE_+3A_.group_by">.group_by</code></td>
<td>
<p>a grouping variable as a vector</p>
</td></tr>
<tr><td><code id="plot_ICATE_+3A_n_bins">n_bins</code></td>
<td>
<p>number of bins</p>
</td></tr>
<tr><td><code id="plot_ICATE_+3A_.alpha">.alpha</code></td>
<td>
<p>transparency of histograms</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ggplot object
</p>


<h3>Author(s)</h3>

<p>George Perrett
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(lalonde)
confounders &lt;- c('age', 'educ', 'black', 'hisp', 'married', 'nodegr')
model_results &lt;- bartCause::bartc(
 response = lalonde[['re78']],
 treatment = lalonde[['treat']],
 confounders = as.matrix(lalonde[, confounders]),
 estimand = 'ate',
 commonSup.rule = 'none'
)
plot_ICATE(model_results, lalonde$married)

</code></pre>

<hr>
<h2 id='plot_moderator_c_loess'>LOESS plot of a continuous moderating variable</h2><span id='topic+plot_moderator_c_loess'></span>

<h3>Description</h3>

<p>Plot the LOESS prediction of ICATEs by a continuous covariate. This is an alternative to partial dependency plots to assess treatment effect heterogeneity by a continuous covariate. See Carnegie, Dorie and Hill 2019.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_moderator_c_loess(.model, moderator, line_color = "blue")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_moderator_c_loess_+3A_.model">.model</code></td>
<td>
<p>a model produced by 'bartCause::bartc()'</p>
</td></tr>
<tr><td><code id="plot_moderator_c_loess_+3A_moderator">moderator</code></td>
<td>
<p>the moderator as a vector</p>
</td></tr>
<tr><td><code id="plot_moderator_c_loess_+3A_line_color">line_color</code></td>
<td>
<p>the color of the loess line</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ggplot object
</p>


<h3>Author(s)</h3>

<p>George Perrett, Joseph Marlo
</p>


<h3>References</h3>

<p>Carnegie, N., Dorie, V., &amp; Hill, J. L. (2019).
Examining treatment effect heterogeneity using BART.
Observational Studies, 5(2), 52-70.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(lalonde)
confounders &lt;- c('age', 'educ', 'black', 'hisp', 'married', 'nodegr')
model_results &lt;- bartCause::bartc(
 response = lalonde[['re78']],
 treatment = lalonde[['treat']],
 confounders = as.matrix(lalonde[, confounders]),
 estimand = 'ate',
 commonSuprule = 'none'
)
plot_moderator_c_loess(model_results, lalonde$age)

</code></pre>

<hr>
<h2 id='plot_moderator_c_pd'>Partial dependency plot of a continuous moderating variable</h2><span id='topic+plot_moderator_c_pd'></span>

<h3>Description</h3>

<p>Plot a partial dependency plot with a continuous covariate from a 'bartCause' model. Identify treatment effect variation predicted across levels of a continuous variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_moderator_c_pd(.model, moderator, n_bins = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_moderator_c_pd_+3A_.model">.model</code></td>
<td>
<p>a model produced by 'bartCause::bartc()'</p>
</td></tr>
<tr><td><code id="plot_moderator_c_pd_+3A_moderator">moderator</code></td>
<td>
<p>the moderator as a vector</p>
</td></tr>
<tr><td><code id="plot_moderator_c_pd_+3A_n_bins">n_bins</code></td>
<td>
<p>number of bins to cut the moderator with. Defaults to the lesser of 15 and number of distinct levels of the moderator</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Partial dependency plots are one way to evaluate heterogeneous treatment effects that vary by values of a continuous covariate. For more information on partial dependency plots from BART causal inference models see Green and Kern 2012.
</p>


<h3>Value</h3>

<p>ggplot object
</p>


<h3>Author(s)</h3>

<p>George Perrett, Joseph Marlo
</p>


<h3>References</h3>

<p>Green, D. P., &amp; Kern, H. L. (2012).
Modeling heterogeneous treatment effects in survey experiments with Bayesian additive regression trees.
Public opinion quarterly, 76(3), 491-511.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(lalonde)
confounders &lt;- c('age', 'educ', 'black', 'hisp', 'married', 'nodegr')
model_results &lt;- bartCause::bartc(
 response = lalonde[['re78']],
 treatment = lalonde[['treat']],
 confounders = as.matrix(lalonde[, confounders]),
 estimand = 'ate',
 commonSuprule = 'none',
 keepTrees = TRUE
)
plot_moderator_c_pd(model_results, lalonde$age)

</code></pre>

<hr>
<h2 id='plot_moderator_d_density'>Plot the Conditional Average Treatment Effect conditional on a discrete moderator</h2><span id='topic+plot_moderator_d_density'></span>

<h3>Description</h3>

<p>Plot the Conditional Average Treatment Effect split by a discrete moderating variable. This plot will provide a visual test of moderation by discrete variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_moderator_d_density(
  .model,
  moderator,
  .alpha = 0.7,
  facet = FALSE,
  .ncol = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_moderator_d_density_+3A_.model">.model</code></td>
<td>
<p>a model produced by 'bartCause::bartc()'</p>
</td></tr>
<tr><td><code id="plot_moderator_d_density_+3A_moderator">moderator</code></td>
<td>
<p>the moderator as a vector</p>
</td></tr>
<tr><td><code id="plot_moderator_d_density_+3A_.alpha">.alpha</code></td>
<td>
<p>transparency value [0, 1]</p>
</td></tr>
<tr><td><code id="plot_moderator_d_density_+3A_facet">facet</code></td>
<td>
<p>TRUE/FALSE. Create panel plots of each moderator level?</p>
</td></tr>
<tr><td><code id="plot_moderator_d_density_+3A_.ncol">.ncol</code></td>
<td>
<p>number of columns to use when faceting</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ggplot object
</p>


<h3>Author(s)</h3>

<p>George Perrett
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(lalonde)
confounders &lt;- c('age', 'educ', 'black', 'hisp', 'married', 'nodegr')
model_results &lt;- bartCause::bartc(
 response = lalonde[['re78']],
 treatment = lalonde[['treat']],
 confounders = as.matrix(lalonde[, confounders]),
 estimand = 'ate',
 commonSuprule = 'none'
)
plot_moderator_d_density(model_results, lalonde$educ)

</code></pre>

<hr>
<h2 id='plot_moderator_d_linerange'>Plot the posterior interval of the Conditional Average Treatment Effect grouped by a discrete variable</h2><span id='topic+plot_moderator_d_linerange'></span>

<h3>Description</h3>

<p>Plots the range of the Conditional Average Treatment Effect grouped by a discrete variable. This is analogous to plot_moderator_d_density but is preferable for moderators with many categories. Rather than plotting the full density, the posterior range is shown.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_moderator_d_linerange(.model, moderator, .alpha = 0.7, horizontal = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_moderator_d_linerange_+3A_.model">.model</code></td>
<td>
<p>a model produced by 'bartCause::bartc()'</p>
</td></tr>
<tr><td><code id="plot_moderator_d_linerange_+3A_moderator">moderator</code></td>
<td>
<p>the moderator as a vector</p>
</td></tr>
<tr><td><code id="plot_moderator_d_linerange_+3A_.alpha">.alpha</code></td>
<td>
<p>transparency value [0, 1]</p>
</td></tr>
<tr><td><code id="plot_moderator_d_linerange_+3A_horizontal">horizontal</code></td>
<td>
<p>flip the plot horizontal?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ggplot object
</p>


<h3>Author(s)</h3>

<p>George Perrett, Joseph Marlo
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(lalonde)
confounders &lt;- c('age', 'educ', 'black', 'hisp', 'married', 'nodegr')
model_results &lt;- bartCause::bartc(
 response = lalonde[['re78']],
 treatment = lalonde[['treat']],
 confounders = as.matrix(lalonde[, confounders]),
 estimand = 'ate',
 commonSuprule = 'none'
)
plot_moderator_d_linerange(model_results, lalonde$educ)

</code></pre>

<hr>
<h2 id='plot_moderator_search'>Plot a single regression tree of covariates on ICATEs</h2><span id='topic+plot_moderator_search'></span>

<h3>Description</h3>

<p>Plot a single regression tree for exploratory heterogeneous effects. Fit single regression tree on bartc() ICATEs to produce variable importance plot. This plot is useful for identifying potential moderating variables.
Tree depth may be set to depths 1, 2 or 3. Terminal nodes signal the Conditional Average Treatment effect within levels of moderation variables. Trees with different values across terminal nodes suggest strong treatment effect moderation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_moderator_search(.model, max_depth = c(2, 1, 3))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_moderator_search_+3A_.model">.model</code></td>
<td>
<p>a model produced by 'bartCause::bartc()'</p>
</td></tr>
<tr><td><code id="plot_moderator_search_+3A_max_depth">max_depth</code></td>
<td>
<p>one of c(1, 2, 3). Maximum number of node levels within the tree. 2 is recommended</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ggplot object
</p>


<h3>Author(s)</h3>

<p>George Perrett, Joseph Marlo
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(lalonde)
confounders &lt;- c('age', 'educ', 'black', 'hisp', 'married', 'nodegr')
model_results &lt;- bartCause::bartc(
 response = lalonde[['re78']],
 treatment = lalonde[['treat']],
 confounders = as.matrix(lalonde[, confounders]),
 estimand = 'ate',
 commonSuprule = 'none'
)
plot_moderator_search(model_results)

</code></pre>

<hr>
<h2 id='plot_overlap_pScores'>Plot the overlap via propensity score method</h2><span id='topic+plot_overlap_pScores'></span>

<h3>Description</h3>

<p>Plot histograms showing the overlap between propensity scores by treatment status.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_overlap_pScores(
  .data,
  treatment,
  response,
  confounders,
  plot_type = c("histogram", "density"),
  pscores = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_overlap_pScores_+3A_.data">.data</code></td>
<td>
<p>dataframe</p>
</td></tr>
<tr><td><code id="plot_overlap_pScores_+3A_treatment">treatment</code></td>
<td>
<p>character. Name of the treatment column within .data</p>
</td></tr>
<tr><td><code id="plot_overlap_pScores_+3A_response">response</code></td>
<td>
<p>character. Name of the response column within .data</p>
</td></tr>
<tr><td><code id="plot_overlap_pScores_+3A_confounders">confounders</code></td>
<td>
<p>character list of column names denoting confounders within .data</p>
</td></tr>
<tr><td><code id="plot_overlap_pScores_+3A_plot_type">plot_type</code></td>
<td>
<p>the plot type, one of c('Histogram', 'Density')</p>
</td></tr>
<tr><td><code id="plot_overlap_pScores_+3A_pscores">pscores</code></td>
<td>
<p>propensity scores. If not provided, then propensity scores will be calculated using BART</p>
</td></tr>
<tr><td><code id="plot_overlap_pScores_+3A_...">...</code></td>
<td>
<p>additional arguments passed to 'bartCause::bartc' propensity score calculation</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ggplot object
</p>


<h3>Author(s)</h3>

<p>George Perrett, Joseph Marlo
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot_overlap_vars">plot_overlap_vars</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(lalonde)
plot_overlap_pScores(
 .data = lalonde,
 treatment = 'treat',
 response = 're78',
 confounders = c('age', 'educ'),
 plot_type = 'histogram',
 pscores = NULL,
 seed = 44
)

</code></pre>

<hr>
<h2 id='plot_overlap_vars'>Plot the overlap of variables</h2><span id='topic+plot_overlap_vars'></span>

<h3>Description</h3>

<p>Plot histograms showing the overlap between variables by treatment status.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_overlap_vars(
  .data,
  treatment,
  confounders,
  plot_type = c("histogram", "density")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_overlap_vars_+3A_.data">.data</code></td>
<td>
<p>dataframe</p>
</td></tr>
<tr><td><code id="plot_overlap_vars_+3A_treatment">treatment</code></td>
<td>
<p>character. Name of the treatment column within .data</p>
</td></tr>
<tr><td><code id="plot_overlap_vars_+3A_confounders">confounders</code></td>
<td>
<p>character list of column names denoting confounders within .data</p>
</td></tr>
<tr><td><code id="plot_overlap_vars_+3A_plot_type">plot_type</code></td>
<td>
<p>the plot type, one of c('histogram', 'density'). Defaults to 'histogram'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ggplot object
</p>


<h3>Author(s)</h3>

<p>George Perrett, Joseph Marlo
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot_overlap_pScores">plot_overlap_pScores</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(lalonde)
plot_overlap_vars(
 .data = lalonde,
 treatment = 'treat',
 confounders = c('age', 'educ'),
 plot_type = 'Histogram'
)
</code></pre>

<hr>
<h2 id='plot_PATE'>Plot histogram or density of Population Average Treatment Effect</h2><span id='topic+plot_PATE'></span>

<h3>Description</h3>

<p>Plot shows the Population Average Treatment Effect which is derived from the posterior predictive distribution of the difference between <code class="reqn">y | z=1, X</code> and <code class="reqn">y | z=0, X</code>.
Mean of PATE will resemble CATE and SATE but PATE will account for more uncertainty and is recommended for informing inferences on the average treatment effect.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_PATE(
  .model,
  type = c("histogram", "density"),
  ci_80 = FALSE,
  ci_95 = FALSE,
  reference = NULL,
  .mean = FALSE,
  .median = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_PATE_+3A_.model">.model</code></td>
<td>
<p>a model produced by 'bartCause::bartc()'</p>
</td></tr>
<tr><td><code id="plot_PATE_+3A_type">type</code></td>
<td>
<p>histogram or density</p>
</td></tr>
<tr><td><code id="plot_PATE_+3A_ci_80">ci_80</code></td>
<td>
<p>TRUE/FALSE. Show the 80% credible interval?</p>
</td></tr>
<tr><td><code id="plot_PATE_+3A_ci_95">ci_95</code></td>
<td>
<p>TRUE/FALSE. Show the 95% credible interval?</p>
</td></tr>
<tr><td><code id="plot_PATE_+3A_reference">reference</code></td>
<td>
<p>numeric. Show a vertical reference line at this value</p>
</td></tr>
<tr><td><code id="plot_PATE_+3A_.mean">.mean</code></td>
<td>
<p>TRUE/FALSE. Show the mean reference line</p>
</td></tr>
<tr><td><code id="plot_PATE_+3A_.median">.median</code></td>
<td>
<p>TRUE/FALSE. Show the median reference line</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ggplot object
</p>


<h3>Author(s)</h3>

<p>George Perrett, Joseph Marlo
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(lalonde)
confounders &lt;- c('age', 'educ', 'black', 'hisp', 'married', 'nodegr')
model_results &lt;- bartCause::bartc(
 response = lalonde[['re78']],
 treatment = lalonde[['treat']],
 confounders = as.matrix(lalonde[, confounders]),
 estimand = 'ate',
 commonSup.rule = 'none'
)
plot_PATE(model_results)

</code></pre>

<hr>
<h2 id='plot_SATE'>Plot histogram or density of Sample Average Treatment Effects</h2><span id='topic+plot_SATE'></span>

<h3>Description</h3>

<p>Plot a histogram or density of the Sample Average Treatment Effect (SATE). The Sample Average Treatment Effect is derived from taking the difference of each individual's observed outcome and a predicted counterfactual outcome from a BART model averaged over the population.
The mean of SATE will resemble means of CATE and PATE but will account for the least uncertainty.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_SATE(
  .model,
  type = c("histogram", "density"),
  ci_80 = FALSE,
  ci_95 = FALSE,
  reference = NULL,
  .mean = FALSE,
  .median = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_SATE_+3A_.model">.model</code></td>
<td>
<p>a model produced by 'bartCause::bartc()'</p>
</td></tr>
<tr><td><code id="plot_SATE_+3A_type">type</code></td>
<td>
<p>histogram or density</p>
</td></tr>
<tr><td><code id="plot_SATE_+3A_ci_80">ci_80</code></td>
<td>
<p>TRUE/FALSE. Show the 80% credible interval?</p>
</td></tr>
<tr><td><code id="plot_SATE_+3A_ci_95">ci_95</code></td>
<td>
<p>TRUE/FALSE. Show the 95% credible interval?</p>
</td></tr>
<tr><td><code id="plot_SATE_+3A_reference">reference</code></td>
<td>
<p>numeric. Show a vertical reference line at this x-axis value</p>
</td></tr>
<tr><td><code id="plot_SATE_+3A_.mean">.mean</code></td>
<td>
<p>TRUE/FALSE. Show the mean reference line</p>
</td></tr>
<tr><td><code id="plot_SATE_+3A_.median">.median</code></td>
<td>
<p>TRUE/FALSE. Show the median reference line</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ggplot object
</p>


<h3>Author(s)</h3>

<p>George Perrett, Joseph Marlo
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(lalonde)
confounders &lt;- c('age', 'educ', 'black', 'hisp', 'married', 'nodegr')
model_results &lt;- bartCause::bartc(
 response = lalonde[['re78']],
 treatment = lalonde[['treat']],
 confounders = as.matrix(lalonde[, confounders]),
 estimand = 'ate',
 commonSup.rule = 'none'
)
plot_SATE(model_results)

</code></pre>

<hr>
<h2 id='plot_trace'>Trace plot the estimands of a 'bartCause::bartc()' model</h2><span id='topic+plot_trace'></span>

<h3>Description</h3>

<p>Returns a ggplot of the estimated effect over each iteration of the model fit. This is used to visually assess the convergence of Markov chain Monte Carlo (MCMC) sampling. Chains should be well mixed such that no single color is notably separate from others.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_trace(.model)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_trace_+3A_.model">.model</code></td>
<td>
<p>a model produced by 'bartCause::bartc()'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ggplot object
</p>


<h3>Author(s)</h3>

<p>Joseph Marlo, George Perrett
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(lalonde)
confounders &lt;- c('age', 'educ', 'black', 'hisp', 'married', 'nodegr')
model_results &lt;- bartCause::bartc(
 response = lalonde[['re78']],
 treatment = lalonde[['treat']],
 confounders = as.matrix(lalonde[, confounders]),
 estimand = 'ate',
 commonSup.rule = 'none'
)
plot_trace(.model = model_results)

</code></pre>

<hr>
<h2 id='plot_waterfall'>Plot a waterfall of the ICATEs</h2><span id='topic+plot_waterfall'></span>

<h3>Description</h3>

<p>Plots the point and posterior intervals of each individual's ICATE ordered by the ICATE or a continuous variable. Points can be colored by a discrete variable.
Waterfall plots are a useful visual diagnostic of possible treatment effect heterogeneity.
A flat line implies little treatment effect heterogeneity while a steeper curve implies that the treatment effect varies across individuals in the sample. Ordering points by a continuous variable or coloring points by a discrete variable can be helpful to identify potential moderators of the treatment effect.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_waterfall(
  .model,
  descending = TRUE,
  .order = NULL,
  .color = NULL,
  .alpha = 0.5
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_waterfall_+3A_.model">.model</code></td>
<td>
<p>a model produced by 'bartCause::bartc()'</p>
</td></tr>
<tr><td><code id="plot_waterfall_+3A_descending">descending</code></td>
<td>
<p>order the ICATEs by value?</p>
</td></tr>
<tr><td><code id="plot_waterfall_+3A_.order">.order</code></td>
<td>
<p>a vector representing a custom order</p>
</td></tr>
<tr><td><code id="plot_waterfall_+3A_.color">.color</code></td>
<td>
<p>a vector representing colors</p>
</td></tr>
<tr><td><code id="plot_waterfall_+3A_.alpha">.alpha</code></td>
<td>
<p>transparency value [0, 1]</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ggplot object
</p>


<h3>Author(s)</h3>

<p>George Perrett
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(lalonde)
confounders &lt;- c('age', 'educ', 'black', 'hisp', 'married', 'nodegr')
model_results &lt;- bartCause::bartc(
 response = lalonde[['re78']],
 treatment = lalonde[['treat']],
 confounders = as.matrix(lalonde[, confounders]),
 estimand = 'ate',
 commonSuprule = 'none'
)
plot_waterfall(model_results)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
