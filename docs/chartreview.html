<!DOCTYPE html><html lang="en"><head><title>Help for package chartreview</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {chartreview}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#credibleinterval'><p>Bayesian credible interval for binomial quantity</p></a></li>
<li><a href='#fullrun'><p>Adaptive sampling algorithm which implements several types of sampling strategies</p></a></li>
<li><a href='#lai'><p>Lai confidence sequence for binomial quantity</p></a></li>
<li><a href='#makeplot'><p>Generate plots on confidence intervals and prediction</p></a></li>
<li><a href='#normalci'><p>Normal confidence interval for continuous quantity</p></a></li>
<li><a href='#stoppingcriterion'><p>Different options for the stopping criterion</p></a></li>
<li><a href='#stratum'><p>Statification of input data matrix into given strata</p></a></li>
<li><a href='#subsetInterval'><p>Check if some interval is a subset of another interval</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Adaptive Multi-Wave Sampling for Efficient Chart Validation</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2025-01-14</td>
</tr>
<tr>
<td>Author:</td>
<td>Georg Hahn [aut, cre],
  Sebastian Schneeweiss [ctb],
  Shirley Wang [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Georg Hahn &lt;ghahn@bwh.harvard.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Functionality to perform adaptive multi-wave sampling for efficient chart validation. Code allows one to define strata, adaptively sample using several types of confidence bounds for the quantity of interest (Lai's confidence bands, Bayesian credible intervals, normal confidence intervals), and sampling strategies (random sampling, stratified random sampling, Neyman's sampling, see Neyman (1934) &lt;<a href="https://doi.org/10.2307%2F2342192">doi:10.2307/2342192</a>&gt; and Neyman (1938) &lt;<a href="https://doi.org/10.1080%2F01621459.1938.10503378">doi:10.1080/01621459.1938.10503378</a>&gt;).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rdpack, anesrake, weights, grDevices, graphics, methods, stats</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-01-16 15:52:10 UTC; acer</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-17 09:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='credibleinterval'>Bayesian credible interval for binomial quantity</h2><span id='topic+credibleinterval'></span>

<h3>Description</h3>

<p>Bayesian credible interval for binomial quantity
</p>


<h3>Usage</h3>

<pre><code class='language-R'>credibleinterval(k, S, alpha)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="credibleinterval_+3A_k">k</code></td>
<td>
<p>Number of experiments.</p>
</td></tr>
<tr><td><code id="credibleinterval_+3A_s">S</code></td>
<td>
<p>Observed number of successes.</p>
</td></tr>
<tr><td><code id="credibleinterval_+3A_alpha">alpha</code></td>
<td>
<p>Level.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Bayesian credible interval.
</p>


<h3>References</h3>

<p>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(chartreview)
print(credibleinterval(10,5,0.05))

</code></pre>

<hr>
<h2 id='fullrun'>Adaptive sampling algorithm which implements several types of sampling strategies</h2><span id='topic+fullrun'></span>

<h3>Description</h3>

<p>Adaptive sampling algorithm which implements several types of sampling strategies
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fullrun(
  dat1,
  S,
  dat2,
  mode = 1,
  batchsize = 100,
  raking = TRUE,
  rakingmode = 3,
  rakingthreshold = 0.05,
  sdEstimate = mad,
  minSamples = 10
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fullrun_+3A_dat1">dat1</code></td>
<td>
<p>First dataset on which the strata are computed.</p>
</td></tr>
<tr><td><code id="fullrun_+3A_s">S</code></td>
<td>
<p>Matrix defining the strata.</p>
</td></tr>
<tr><td><code id="fullrun_+3A_dat2">dat2</code></td>
<td>
<p>Second dataset on which confidence intervals are computed.</p>
</td></tr>
<tr><td><code id="fullrun_+3A_mode">mode</code></td>
<td>
<p>Sampling mode (1 for random sampling, 2 for stratified random sampling, 3 for Neyman's sampling).</p>
</td></tr>
<tr><td><code id="fullrun_+3A_batchsize">batchsize</code></td>
<td>
<p>Batch size in each wave.</p>
</td></tr>
<tr><td><code id="fullrun_+3A_raking">raking</code></td>
<td>
<p>Boolean flag to switch on raking.</p>
</td></tr>
<tr><td><code id="fullrun_+3A_rakingmode">rakingmode</code></td>
<td>
<p>Option for raking (1 for random sampling, 2 for deterministic allocation, 3 for residual resampling).</p>
</td></tr>
<tr><td><code id="fullrun_+3A_rakingthreshold">rakingthreshold</code></td>
<td>
<p>Threshold for applying raking to a stratum.</p>
</td></tr>
<tr><td><code id="fullrun_+3A_sdestimate">sdEstimate</code></td>
<td>
<p>The estimate of the standard deviation as a function handle (usually sd or mad).</p>
</td></tr>
<tr><td><code id="fullrun_+3A_minsamples">minSamples</code></td>
<td>
<p>Minimum number of samples used in each iteration.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with the resampled datasets per wave.
</p>


<h3>References</h3>

<p>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(chartreview)

</code></pre>

<hr>
<h2 id='lai'>Lai confidence sequence for binomial quantity</h2><span id='topic+lai'></span>

<h3>Description</h3>

<p>Lai confidence sequence for binomial quantity
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lai(n, x, alpha)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="lai_+3A_n">n</code></td>
<td>
<p>Number of experiments</p>
</td></tr>
<tr><td><code id="lai_+3A_x">x</code></td>
<td>
<p>Observed number of successes.</p>
</td></tr>
<tr><td><code id="lai_+3A_alpha">alpha</code></td>
<td>
<p>Error probability.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Binomial confidence interval.
</p>


<h3>References</h3>

<p>Lai, TL (1976). On Confidence Sequences. Ann Statist 4(2):265-280.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(chartreview)
print(lai(10,5,0.05))

</code></pre>

<hr>
<h2 id='makeplot'>Generate plots on confidence intervals and prediction</h2><span id='topic+makeplot'></span>

<h3>Description</h3>

<p>Generate plots on confidence intervals and prediction
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeplot(
  dataset2,
  dat2,
  optionCI = 1,
  stopCI = NULL,
  alpha = 0.05,
  stoppingoption = 2,
  xlim = NULL,
  ylim = NULL,
  main = NULL,
  makePlot = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="makeplot_+3A_dataset2">dataset2</code></td>
<td>
<p>The output dataset of the function 'fullrun'.</p>
</td></tr>
<tr><td><code id="makeplot_+3A_dat2">dat2</code></td>
<td>
<p>Second dataset on which confidence intervals are computed, see function 'fullrun'.</p>
</td></tr>
<tr><td><code id="makeplot_+3A_optionci">optionCI</code></td>
<td>
<p>Parameter to switch between confidence intervals (1 for Lai's confidence bands, 2 for Bayesian credible intervals, 3 for normal confidence intervals).</p>
</td></tr>
<tr><td><code id="makeplot_+3A_stopci">stopCI</code></td>
<td>
<p>The stopping bounds.</p>
</td></tr>
<tr><td><code id="makeplot_+3A_alpha">alpha</code></td>
<td>
<p>The error used to compute confidence bands.</p>
</td></tr>
<tr><td><code id="makeplot_+3A_stoppingoption">stoppingoption</code></td>
<td>
<p>Type of stopping criterion (1 for confidence interval included in stopCI, 2 for upper bound below or lower bound above stopCI, 3 for length restriction on confidence interval).</p>
</td></tr>
<tr><td><code id="makeplot_+3A_xlim">xlim</code></td>
<td>
<p>Optional parameter to set x-axis in plots.</p>
</td></tr>
<tr><td><code id="makeplot_+3A_ylim">ylim</code></td>
<td>
<p>Optional parameter to set y-axis in plots.</p>
</td></tr>
<tr><td><code id="makeplot_+3A_main">main</code></td>
<td>
<p>Optional parameter to set title of plots.</p>
</td></tr>
<tr><td><code id="makeplot_+3A_makeplot">makePlot</code></td>
<td>
<p>Parameter to control plot output.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with confidence intervals (slot CIs), the stopping point (slot stopline), and the reason for stopping (stopreason, see function 'stoppingcriterion').
</p>


<h3>References</h3>

<p>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(chartreview)

</code></pre>

<hr>
<h2 id='normalci'>Normal confidence interval for continuous quantity</h2><span id='topic+normalci'></span>

<h3>Description</h3>

<p>Normal confidence interval for continuous quantity
</p>


<h3>Usage</h3>

<pre><code class='language-R'>normalci(x, a)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="normalci_+3A_x">x</code></td>
<td>
<p>Vector of samples.</p>
</td></tr>
<tr><td><code id="normalci_+3A_a">a</code></td>
<td>
<p>Error probability.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Normal confidence interval.
</p>


<h3>References</h3>

<p>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(chartreview)
x &lt;- rnorm(10)
print(normalci(x,0.05))

</code></pre>

<hr>
<h2 id='stoppingcriterion'>Different options for the stopping criterion</h2><span id='topic+stoppingcriterion'></span>

<h3>Description</h3>

<p>Different options for the stopping criterion
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stoppingcriterion(ci, stopCI, stoppingoption = 2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stoppingcriterion_+3A_ci">ci</code></td>
<td>
<p>Confidence interval as tuple vector.</p>
</td></tr>
<tr><td><code id="stoppingcriterion_+3A_stopci">stopCI</code></td>
<td>
<p>Either a confidence interval for stoppingoption=1 and stoppingoption=2, or a scalar for stoppingoption=3.</p>
</td></tr>
<tr><td><code id="stoppingcriterion_+3A_stoppingoption">stoppingoption</code></td>
<td>
<p>Option to determine if the stopping criterion is satisfied (1 for confidence interval included in stopCI, 2 for upper bound below or lower bound above stopCI, 3 for length restriction on confidence interval).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean answer if stopping criterion reached.
</p>


<h3>References</h3>

<p>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(chartreview)
stoppingcriterion(c(0.5,0.6), c(0.7,0.8), stoppingoption=1)

</code></pre>

<hr>
<h2 id='stratum'>Statification of input data matrix into given strata</h2><span id='topic+stratum'></span>

<h3>Description</h3>

<p>Statification of input data matrix into given strata
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stratum(x, S, index)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stratum_+3A_x">x</code></td>
<td>
<p>Input data matrix.</p>
</td></tr>
<tr><td><code id="stratum_+3A_s">S</code></td>
<td>
<p>Strata by row in matrix S, with 2 columns per variable aka startpoint [included] and endpoint [excluded].</p>
</td></tr>
<tr><td><code id="stratum_+3A_index">index</code></td>
<td>
<p>Index of the stratum in S.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of indices belong to the given stratum
</p>


<h3>References</h3>

<p>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(chartreview)
x &lt;- matrix(runif(10),ncol=1)
strata &lt;- (0:10)/10
S &lt;- cbind(strata[-length(strata)],strata[-1])
print(stratum(x,S,1))

</code></pre>

<hr>
<h2 id='subsetInterval'>Check if some interval is a subset of another interval</h2><span id='topic+subsetInterval'></span>

<h3>Description</h3>

<p>Check if some interval is a subset of another interval
</p>


<h3>Usage</h3>

<pre><code class='language-R'>subsetInterval(x, y)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="subsetInterval_+3A_x">x</code></td>
<td>
<p>First interval given by tuple.</p>
</td></tr>
<tr><td><code id="subsetInterval_+3A_y">y</code></td>
<td>
<p>Second interval given by tuple.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean answer if &quot;x subseteq y&quot;.
</p>


<h3>References</h3>

<p>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(chartreview)
x &lt;- sort(runif(2))
y &lt;- sort(runif(2))
print(subsetInterval(x,y))

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
