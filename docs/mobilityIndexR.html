<!DOCTYPE html><html><head><title>Help for package mobilityIndexR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mobilityIndexR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#getHypothesisTest'><p>Hypothesis Test for Two Mobility Datasets</p></a></li>
<li><a href='#getMobilityIndices'><p>Calculates Mobility Indices at Two Points in Time</p></a></li>
<li><a href='#getTMatrix'><p>Calculates Transition Matrix</p></a></li>
<li><a href='#gradeMobility'><p>Example Grades Dataset</p></a></li>
<li><a href='#incomeMobility'><p>Example Income Dataset</p></a></li>
<li><a href='#incomeZeroInfMobility'><p>Example Zero-Inflated Income Dataset</p></a></li>
<li><a href='#mobilityIndexR'><p>mobilityIndexR: A package for calculating transition matrices and mobility indices</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Calculates Transition Matrices and Mobility Indices</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.1</td>
</tr>
<tr>
<td>Author:</td>
<td>Brett Mullins and Trevor Harkreader</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Brett Mullins &lt;brettcmullins@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Measures mobility in a population through transition matrices and mobility indices. Relative, mixed, and absolute transition matrices are supported. The Prais-Bibby, Absolute Movement, Origin Specific, and Weighted Group Mobility indices are supported. Example income and grade data are included.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 2.1.0), covr, knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-01-16 22:14:14 UTC; brettm</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-01-20 11:50:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='getHypothesisTest'>Hypothesis Test for Two Mobility Datasets</h2><span id='topic+getHypothesisTest'></span>

<h3>Description</h3>

<p>Calculates hypothesis tests of mobility indices from two datasets.
Specifically, for datasets A and B, this function performs one-sided nonparametric hypothesis tests
that the index value for A is greater than the corresponding index value for B.
Supports Prais-Bibby, Absolute Movement, Origin Specific, and Weighted Group Mobility indices and relative, mixed,
and absolute types of rankings in the calculation these indices.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getHypothesisTest(
  dat_A,
  dat_B,
  cols_A,
  cols_B,
  type,
  indices = "all",
  num_ranks,
  exclude_value,
  bounds,
  rerank_exclude_value = FALSE,
  strict = TRUE,
  bootstrap_iter = 100
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getHypothesisTest_+3A_dat_a">dat_A</code></td>
<td>
<p>a dataframe with an &quot;id&quot; column</p>
</td></tr>
<tr><td><code id="getHypothesisTest_+3A_dat_b">dat_B</code></td>
<td>
<p>a dataframe with an &quot;id&quot; column</p>
</td></tr>
<tr><td><code id="getHypothesisTest_+3A_cols_a">cols_A</code></td>
<td>
<p>a list of character strings denoting the first and second column
to be used in the index calculations for dat_A</p>
</td></tr>
<tr><td><code id="getHypothesisTest_+3A_cols_b">cols_B</code></td>
<td>
<p>a list of character strings denoting the first and second column
to be used in the index calculations for dat_B</p>
</td></tr>
<tr><td><code id="getHypothesisTest_+3A_type">type</code></td>
<td>
<p>a character string indicating the type of ranking;
accepts 'relative', 'mixed', and 'absolute'</p>
</td></tr>
<tr><td><code id="getHypothesisTest_+3A_indices">indices</code></td>
<td>
<p>a vector of character strings indicating which mobility indices are desired;
currently support 'prais_bibby', 'average_movement', 'wgm', and 'origin_specific'.
The default value is 'all'.</p>
</td></tr>
<tr><td><code id="getHypothesisTest_+3A_num_ranks">num_ranks</code></td>
<td>
<p>an integer specifying the number of ranks for a relative or mixed ranking</p>
</td></tr>
<tr><td><code id="getHypothesisTest_+3A_exclude_value">exclude_value</code></td>
<td>
<p>a single numeric value that is excluded in calculating the transition matrix;
see the rerank_exclude_value parameter to specify how the exclude value is handled</p>
</td></tr>
<tr><td><code id="getHypothesisTest_+3A_bounds">bounds</code></td>
<td>
<p>a sequence of numeric bounds for defining absolute ranks</p>
</td></tr>
<tr><td><code id="getHypothesisTest_+3A_rerank_exclude_value">rerank_exclude_value</code></td>
<td>
<p>a character string indicating how the exclude value is handled when present; accepts
'as_new_rank', 'as_existing_rank', and 'exclude'</p>
</td></tr>
<tr><td><code id="getHypothesisTest_+3A_strict">strict</code></td>
<td>
<p>logical. If TRUE, indices are calculated from the given values. If FALSE,
indices are calculated by jittering the values to ensure uniqueness of bounds of ranks.
Only used with relative and mixed types. The default value is TRUE.</p>
</td></tr>
<tr><td><code id="getHypothesisTest_+3A_bootstrap_iter">bootstrap_iter</code></td>
<td>
<p>the number of bootstrap iterations used to estimate hypothesis tests.
The default value is 100.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a named vector containing the estimated probabilities that index value for dataset A is greater than the corresponding index value for dataset B
</p>


<h3>Examples</h3>

<pre><code class='language-R'>getHypothesisTest(dat_A = incomeMobility,
                  dat_B = incomeMobility,
                  cols_A = c("t0", "t3"),
                  cols_B = c("t5", "t8"),
                  type = "relative",
                  num_ranks = 5)
</code></pre>

<hr>
<h2 id='getMobilityIndices'>Calculates Mobility Indices at Two Points in Time</h2><span id='topic+getMobilityIndices'></span>

<h3>Description</h3>

<p>Calculates mobility indices from two columns in dataset. Supports Prais-Bibby,
Absolute Movement, Origin Specific, and Weighted Group Mobility indices and relative, mixed,
and absolute types of rankings in the calculation these indices.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getMobilityIndices(
  dat,
  col_x,
  col_y,
  type,
  indices = "all",
  num_ranks,
  exclude_value,
  bounds,
  rerank_exclude_value,
  strict = TRUE,
  intervals = FALSE,
  interval_pct = 0.95,
  bootstrap_iter = 100
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getMobilityIndices_+3A_dat">dat</code></td>
<td>
<p>a dataframe with an &quot;id&quot; column</p>
</td></tr>
<tr><td><code id="getMobilityIndices_+3A_col_x">col_x</code></td>
<td>
<p>a character string denoting the first column to be used in the index calculation</p>
</td></tr>
<tr><td><code id="getMobilityIndices_+3A_col_y">col_y</code></td>
<td>
<p>a character string denoting the second column to be used in the index calculation</p>
</td></tr>
<tr><td><code id="getMobilityIndices_+3A_type">type</code></td>
<td>
<p>a character string indicating the type of ranking;
accepts 'relative', 'mixed', and 'absolute'</p>
</td></tr>
<tr><td><code id="getMobilityIndices_+3A_indices">indices</code></td>
<td>
<p>a vector of character strings indicating which mobility indices are desired;
currently support 'prais_bibby', 'average_movement', 'wgm', and 'origin_specific'.
The default value is 'all'.</p>
</td></tr>
<tr><td><code id="getMobilityIndices_+3A_num_ranks">num_ranks</code></td>
<td>
<p>an integer specifying the number of ranks for a relative or mixed ranking</p>
</td></tr>
<tr><td><code id="getMobilityIndices_+3A_exclude_value">exclude_value</code></td>
<td>
<p>a single numeric value that is excluded in calculating the transition matrix;
see the rerank_exclude_value parameter to specify how the exclude value is handled</p>
</td></tr>
<tr><td><code id="getMobilityIndices_+3A_bounds">bounds</code></td>
<td>
<p>a sequence of numeric bounds for defining absolute ranks</p>
</td></tr>
<tr><td><code id="getMobilityIndices_+3A_rerank_exclude_value">rerank_exclude_value</code></td>
<td>
<p>a character string indicating how the exclude value is handled when present; accepts
'as_new_rank', 'as_existing_rank', and 'exclude'</p>
</td></tr>
<tr><td><code id="getMobilityIndices_+3A_strict">strict</code></td>
<td>
<p>logical. If TRUE, indices are calculated from the given values. If FALSE,
indices are calculated by jittering the values to ensure uniqueness of bounds of ranks.
Only used with relative and mixed types. The default value is TRUE.</p>
</td></tr>
<tr><td><code id="getMobilityIndices_+3A_intervals">intervals</code></td>
<td>
<p>logical. If TRUE, will calculate bootstrapped confidence intervals
using the percentile method. The default value is FALSE.</p>
</td></tr>
<tr><td><code id="getMobilityIndices_+3A_interval_pct">interval_pct</code></td>
<td>
<p>a number between zero and one indicating the size of the bootstrapped intervals.
The default value is 0.95.</p>
</td></tr>
<tr><td><code id="getMobilityIndices_+3A_bootstrap_iter">bootstrap_iter</code></td>
<td>
<p>the number of bootstrap iterations used to estimate intervals.
The default value is 100.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a named vector containing the desired index values
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(incomeMobility)
getMobilityIndices(dat = incomeMobility,
                   col_x = 't0',
                   col_y = 't2',
                   type = 'relative',
                   num_ranks = 5)
</code></pre>

<hr>
<h2 id='getTMatrix'>Calculates Transition Matrix</h2><span id='topic+getTMatrix'></span>

<h3>Description</h3>

<p>Returns transition matrix from two columns in dataset. Supports relative, mixed,
and absolute transition matrices as well as handling an excluded value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getTMatrix(
  dat,
  col_x,
  col_y,
  type,
  probs = TRUE,
  num_ranks,
  exclude_value,
  bounds,
  rerank_exclude_value,
  strict = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getTMatrix_+3A_dat">dat</code></td>
<td>
<p>a dataframe with an &quot;id&quot; column</p>
</td></tr>
<tr><td><code id="getTMatrix_+3A_col_x">col_x</code></td>
<td>
<p>a character string denoting the first column from dat to be used in the transition matrix</p>
</td></tr>
<tr><td><code id="getTMatrix_+3A_col_y">col_y</code></td>
<td>
<p>a character string denoting the second column from dat to be used in the transition matrix</p>
</td></tr>
<tr><td><code id="getTMatrix_+3A_type">type</code></td>
<td>
<p>a character string indicating the type of transition matrix;
accepts 'relative', 'mixed', and 'absolute'</p>
</td></tr>
<tr><td><code id="getTMatrix_+3A_probs">probs</code></td>
<td>
<p>logical. If TRUE, values in transition matrix are probabilities;
if FALSE, values in transition matrix are counts</p>
</td></tr>
<tr><td><code id="getTMatrix_+3A_num_ranks">num_ranks</code></td>
<td>
<p>an integer specifying the number of ranks for a relative or mixed transition matrix</p>
</td></tr>
<tr><td><code id="getTMatrix_+3A_exclude_value">exclude_value</code></td>
<td>
<p>a single numeric value that is excluded in calculating the transition matrix;
see the rerank_exclude_value parameter to specify how the exclude value is handled</p>
</td></tr>
<tr><td><code id="getTMatrix_+3A_bounds">bounds</code></td>
<td>
<p>a sequence of numeric bounds for defining absolute transition matrix ranks</p>
</td></tr>
<tr><td><code id="getTMatrix_+3A_rerank_exclude_value">rerank_exclude_value</code></td>
<td>
<p>a character string indicating how the exclude value is handled when present; accepts
'as_new_rank', 'as_existing_rank', and 'exclude'</p>
</td></tr>
<tr><td><code id="getTMatrix_+3A_strict">strict</code></td>
<td>
<p>logical. If TRUE, transition matrix is calculated from the given values. If FALSE,
transition matrix is calculated by jittering the values to ensure uniqueness of bounds.
Only used with relative and mixed types.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list with a transition matrix as a Matrix and vectors of the the x and y bounds corresponding to the ranks in the matrix
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(incomeMobility)
getTMatrix(dat = incomeMobility,
           col_x = 't0',
           col_y = 't9',
           type = 'relative',
           num_ranks = 5)
</code></pre>

<hr>
<h2 id='gradeMobility'>Example Grades Dataset</h2><span id='topic+gradeMobility'></span>

<h3>Description</h3>

<p>This is an example grade dataset for measuring grade mobility.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gradeMobility
</code></pre>


<h3>Format</h3>

<p>A <code>data.frame</code> with 13 columns:
</p>

<dl>
<dt>id</dt><dd><p>A unique integer id for each row representing a student</p>
</dd>
<dt>cohort</dt><dd><p>Class of student</p>
</dd>
<dt>t0</dt><dd><p>Grade at time 0</p>
</dd>
<dt>t1</dt><dd><p>Grade at time 1</p>
</dd>
<dt>t2</dt><dd><p>Grade at time 2</p>
</dd>
<dt>t3</dt><dd><p>Grade at time 3</p>
</dd>
<dt>t4</dt><dd><p>Grade at time 4</p>
</dd>
<dt>t5</dt><dd><p>Grade at time 5</p>
</dd>
<dt>t6</dt><dd><p>Grade at time 6</p>
</dd>
<dt>t7</dt><dd><p>Grade at time 7</p>
</dd>
<dt>t8</dt><dd><p>Grade at time 8</p>
</dd>
<dt>t9</dt><dd><p>Grade at time 9</p>
</dd>
<dt>t10</dt><dd><p>Grade at time 10</p>
</dd>
</dl>


<hr>
<h2 id='incomeMobility'>Example Income Dataset</h2><span id='topic+incomeMobility'></span>

<h3>Description</h3>

<p>This is an example income dataset to measure income mobility.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>incomeMobility
</code></pre>


<h3>Format</h3>

<p>A <code>data.frame</code> with 13 columns:
</p>

<dl>
<dt>id</dt><dd><p>A unique integer id for each row representing an individual</p>
</dd>
<dt>cohort</dt><dd><p>Year when first income is observed</p>
</dd>
<dt>t0</dt><dd><p>Income at time 0</p>
</dd>
<dt>t1</dt><dd><p>Income at time 1</p>
</dd>
<dt>t2</dt><dd><p>Income at time 2</p>
</dd>
<dt>t3</dt><dd><p>Income at time 3</p>
</dd>
<dt>t4</dt><dd><p>Income at time 4</p>
</dd>
<dt>t5</dt><dd><p>Income at time 5</p>
</dd>
<dt>t6</dt><dd><p>Income at time 6</p>
</dd>
<dt>t7</dt><dd><p>Income at time 7</p>
</dd>
<dt>t8</dt><dd><p>Income at time 8</p>
</dd>
<dt>t9</dt><dd><p>Income at time 9</p>
</dd>
<dt>t10</dt><dd><p>Income at time 10</p>
</dd>
</dl>


<hr>
<h2 id='incomeZeroInfMobility'>Example Zero-Inflated Income Dataset</h2><span id='topic+incomeZeroInfMobility'></span>

<h3>Description</h3>

<p>These is an example income dataset to measure income mobility with an inflated number of zeros.
Zero-inflated data is often observed in practice and will cause difficulties for some transition matrix and mobility
index approaches.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>incomeZeroInfMobility
</code></pre>


<h3>Format</h3>

<p>A <code>data.frame</code> with 13 columns:
</p>

<dl>
<dt>id</dt><dd><p>A unique integer id for each row representing an individual</p>
</dd>
<dt>cohort</dt><dd><p>Year when first income is observed</p>
</dd>
<dt>t0</dt><dd><p>Income at time 0</p>
</dd>
<dt>t1</dt><dd><p>Income at time 1</p>
</dd>
<dt>t2</dt><dd><p>Income at time 2</p>
</dd>
<dt>t3</dt><dd><p>Income at time 3</p>
</dd>
<dt>t4</dt><dd><p>Income at time 4</p>
</dd>
<dt>t5</dt><dd><p>Income at time 5</p>
</dd>
<dt>t6</dt><dd><p>Income at time 6</p>
</dd>
<dt>t7</dt><dd><p>Income at time 7</p>
</dd>
<dt>t8</dt><dd><p>Income at time 8</p>
</dd>
<dt>t9</dt><dd><p>Income at time 9</p>
</dd>
<dt>t10</dt><dd><p>Income at time 10</p>
</dd>
</dl>


<hr>
<h2 id='mobilityIndexR'>mobilityIndexR: A package for calculating transition matrices and mobility indices</h2><span id='topic+mobilityIndexR'></span>

<h3>Description</h3>

<p>This package measures mobility in a population through transition matrices and mobility indices.
Relative, mixed, and absolute transition matrices are supported for various use cases. With respect to indices,
the Prais-Bibby, Absolute Movement, Origin Specific, and Shorrocks indices are supported. Example income and
grade data are included for demos.
</p>


<h3>mobilityIndexR functions</h3>

<p>getTMatrix
getMobilityIndices
getHypothesisTest
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
