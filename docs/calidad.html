<!DOCTYPE html><html><head><title>Help for package calidad</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {calidad}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#assess'><p>assess the quality of mean estimations</p></a></li>
<li><a href='#casen'><p>Encuesta de Caracterización Socioeconómica Nacional 2020 - CASEN en Pandemia 2020</p></a></li>
<li><a href='#create_html'><p>Create html table with the results of the evaluation</p></a></li>
<li><a href='#create_mean'><p>Create the inputs to evaluate the quality of mean estimations</p></a></li>
<li><a href='#create_prop'><p>Create the inputs to evaluate the quality of proportion estimations</p></a></li>
<li><a href='#create_prop_internal'><p>internal function to calculate proportion estimations</p></a></li>
<li><a href='#create_ratio_internal'><p>internal function to calculate ratios estimations</p></a></li>
<li><a href='#create_size'><p>Create the inputs to evaluate the quality of total estimations</p></a></li>
<li><a href='#create_total'><p>Create the inputs to evaluate the quality of the sum of continuous variables</p></a></li>
<li><a href='#ene'><p>Encuesta Nacional de Empleo - ENE. 2020-efm</p></a></li>
<li><a href='#enusc'><p>Encuesta Nacional Urbana de Seguridad ciudadana 2019 - ENUSC 2019</p></a></li>
<li><a href='#epf_personas'><p>VIII Encuesta de Presupuestos Familiares</p></a></li>
<li><a href='#get_cv'><p>Get the coefficient of variation</p></a></li>
<li><a href='#get_df'><p>Get degrees of freedom</p></a></li>
<li><a href='#get_survey_table'><p>Calculates multiple estimations. Internal wrapper for survey package</p></a></li>
<li><a href='#quadratic'><p>Calcula el valor de una función cuadrática</p></a></li>
<li><a href='#standardize_columns'><p>standardize and sort column names</p></a></li>
<li><a href='#standardize_design_variables'><p>Standardize the name of design variables</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Assesses the Quality of Estimates Made by Complex Sample Designs</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Assesses the quality of estimates made by complex sample designs,
  following the methodology developed by the National Institute of Statistics Chile (2020, <a href="https://www.ine.cl/docs/default-source/institucionalidad/buenas-pr%C3%A1cticas/clasificaciones-y-estandares/est%C3%A1ndar-evaluaci%C3%B3n-de-calidad-de-estimaciones-publicaci%C3%B3n-27022020.pdf">https://www.ine.cl/docs/default-source/institucionalidad/buenas-pr%C3%A1cticas/clasificaciones-y-estandares/est%C3%A1ndar-evaluaci%C3%B3n-de-calidad-de-estimaciones-publicaci%C3%B3n-27022020.pdf</a>)
  and by Economic Commission  for Latin America and
  Caribbean (2020, <a href="https://repositorio.cepal.org/bitstream/handle/11362/45681/1/S2000293_es.pdf">https://repositorio.cepal.org/bitstream/handle/11362/45681/1/S2000293_es.pdf</a>). </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>rlang, dplyr, purrr, survey, kableExtra, stringr, tidyr, haven</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-05 12:50:07 UTC; klaus</td>
</tr>
<tr>
<td>Author:</td>
<td>Klaus Lehmann [aut, cre],
  Ricardo Pizarro [aut],
  Ignacio Agloni [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Klaus Lehmann &lt;klehmann@fen.uchile.cl&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-06 09:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='assess'>assess the quality of mean estimations</h2><span id='topic+assess'></span>

<h3>Description</h3>

<p><code>assess</code> assess the quality of mean estimation using the
methodology created by INE Chile, which considers sample size, degrees of freedom and
coeficient of variation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assess(table, publish = FALSE, scheme = c("chile", "eclac"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="assess_+3A_table">table</code></td>
<td>
<p><code>dataframe</code> created by <code>crear_insumos_media</code></p>
</td></tr>
<tr><td><code id="assess_+3A_publish">publish</code></td>
<td>
<p><code>boolean</code> indicating if the evaluation of the complete table
must be added. If it is TRUE, the function adds a new column to the <code>dataframe</code></p>
</td></tr>
<tr><td><code id="assess_+3A_scheme">scheme</code></td>
<td>
<p>string variable, default scheme is &quot;chile&quot; which refers to the evaluation protocol proposed by INE Chile. the alternative is &quot;eclac&quot; to use the eclac protocol</p>
</td></tr>
<tr><td><code id="assess_+3A_...">...</code></td>
<td>
<p>the list of cepal parameters. The complete list of parameters is
</p>
<p>1. General Parameters
</p>

<ul>
<li> <p><code>df</code> degrees of freedom. default: 9
</p>
</li>
<li> <p><code>n</code> sample size. default ine scheme is 60. default cepal scheme: 100
</p>
</li></ul>

<p>2. INE parameters
</p>

<ul>
<li> <p><code>cv_lower_ine</code> lower limit for cv. default: 0.15
</p>
</li>
<li> <p><code>cv_upper_ine</code> upper limit for cv. default: 0.3
</p>
</li></ul>

<p>3. CEPAL parameters
</p>

<ul>
<li> <p><code>cv_cepal</code> limit for cv. default: 0.2
</p>
</li>
<li> <p><code>ess</code> efective sample size. default: 140
</p>
</li>
<li> <p><code>unweighted</code> unweighted count. default: 50
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>dataframe</code> with all the columns included in the input table, plus a new column
containing a label indicating the evaluation of each estimation: reliable, bit reliable or unreliable
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dc &lt;- survey::svydesign(ids = ~varunit, strata = ~varstrat, data = epf_personas, weights = ~fe)
assess(create_mean("gastot_hd", domains = "zona+sexo", design = dc))
</code></pre>

<hr>
<h2 id='casen'>Encuesta de Caracterización Socioeconómica Nacional 2020 - CASEN en Pandemia 2020</h2><span id='topic+casen'></span>

<h3>Description</h3>

<p>CASEN data for the year 2020. Contains only a few variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>casen
</code></pre>


<h3>Format</h3>

<p>dataframe with 185.437 rows y 6 columns
</p>

<dl>
<dt>folio</dt><dd><p>household id</p>
</dd>
<dt>sexo</dt><dd><p>1 = man; 2 = woman</p>
</dd>
<dt>edad</dt><dd><p>age</p>
</dd>
<dt>activ</dt><dd><p>Economic activity status</p>
</dd>
<dt>ing_aut_hog</dt><dd><p>Household Income</p>
</dd>
<dt>pobreza</dt><dd><p>poverty status: 1 = extreme poverty, 2 = non-extreme poverty, 3 = non-poverty</p>
</dd>
<dt>expr</dt><dd><p>regional sample weights</p>
</dd>
<dt>estrato</dt><dd><p>strata</p>
</dd>
<dt>cod_upm</dt><dd><p>PSU</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="http://observatorio.ministeriodesarrollosocial.gob.cl/encuesta-casen-en-pandemia-2020">http://observatorio.ministeriodesarrollosocial.gob.cl/encuesta-casen-en-pandemia-2020</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(casen)

</code></pre>

<hr>
<h2 id='create_html'>Create html table with the results of the evaluation</h2><span id='topic+create_html'></span>

<h3>Description</h3>

<p>Create html table with the results of the evaluation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_html(table)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_html_+3A_table">table</code></td>
<td>
<p><code>dataframe</code> generated by evaluate function</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>html</code> table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survey)
library(dplyr)

hogar &lt;- epf_personas %&gt;%
  group_by(folio) %&gt;%
  slice(1)
dc &lt;- survey::svydesign(ids = ~varunit, strata = ~varstrat, data = hogar, weights = ~fe)
table &lt;- assess(create_prop("ocupado", domains = "zona+sexo", design = dc))
</code></pre>

<hr>
<h2 id='create_mean'>Create the inputs to evaluate the quality of mean estimations</h2><span id='topic+create_mean'></span>

<h3>Description</h3>

<p><code>create_mean</code> generates ano <code>dataframe</code> with the following elements: mean,
degrees of freedom, sample size and coefficient of variation. The function allows
grouping in several domains.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_mean(
  var,
  domains = NULL,
  subpop = NULL,
  design,
  ci = FALSE,
  ess = FALSE,
  ajuste_ene = FALSE,
  standard_eval = FALSE,
  rm.na = FALSE,
  deff = FALSE,
  rel_error = FALSE,
  unweighted = FALSE,
  eclac_input = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_mean_+3A_var">var</code></td>
<td>
<p>numeric variable within the  <code>dataframe</code>.</p>
</td></tr>
<tr><td><code id="create_mean_+3A_domains">domains</code></td>
<td>
<p>domains to be estimated separated by the + character.</p>
</td></tr>
<tr><td><code id="create_mean_+3A_subpop">subpop</code></td>
<td>
<p>integer dummy variable to filter the dataframe</p>
</td></tr>
<tr><td><code id="create_mean_+3A_design">design</code></td>
<td>
<p>complex design created by <code>survey</code> package</p>
</td></tr>
<tr><td><code id="create_mean_+3A_ci">ci</code></td>
<td>
<p><code>boolean</code> indicating if the confidence intervals must be calculated</p>
</td></tr>
<tr><td><code id="create_mean_+3A_ess">ess</code></td>
<td>
<p><code>boolean</code> Effective sample size</p>
</td></tr>
<tr><td><code id="create_mean_+3A_ajuste_ene">ajuste_ene</code></td>
<td>
<p><code>boolean</code> indicating if an adjustment for the sampling-frame transition period must be used</p>
</td></tr>
<tr><td><code id="create_mean_+3A_standard_eval">standard_eval</code></td>
<td>
<p><code>boolean</code> Indicating if the function is wrapped inside a function, if <code>TRUE</code> avoid lazy eval errors</p>
</td></tr>
<tr><td><code id="create_mean_+3A_rm.na">rm.na</code></td>
<td>
<p><code>boolean</code> Remove NA if it is required</p>
</td></tr>
<tr><td><code id="create_mean_+3A_deff">deff</code></td>
<td>
<p><code>boolean</code> Design effect</p>
</td></tr>
<tr><td><code id="create_mean_+3A_rel_error">rel_error</code></td>
<td>
<p><code>boolean</code> Relative error</p>
</td></tr>
<tr><td><code id="create_mean_+3A_unweighted">unweighted</code></td>
<td>
<p><code>boolean</code> Add non weighted count if it is required</p>
</td></tr>
<tr><td><code id="create_mean_+3A_eclac_input">eclac_input</code></td>
<td>
<p><code>boolean</code> return eclac inputs</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>dataframe</code> that contains the inputs and all domains to be evaluated
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dc &lt;- survey::svydesign(ids = ~varunit, strata = ~varstrat, data = epf_personas, weights = ~fe)
create_mean("gastot_hd", "zona+sexo",  design = dc)
</code></pre>

<hr>
<h2 id='create_prop'>Create the inputs to evaluate the quality of proportion estimations</h2><span id='topic+create_prop'></span>

<h3>Description</h3>

<p><code>create_prop</code> generates a <code>dataframe</code> with the following elements: sum,
degrees of freedom, sample size, standard error and coefficient of variation. The function allows
grouping in several domains.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_prop(
  var,
  denominator = NULL,
  domains = NULL,
  subpop = NULL,
  design,
  ci = FALSE,
  deff = FALSE,
  ess = FALSE,
  ajuste_ene = FALSE,
  rel_error = FALSE,
  log_cv = FALSE,
  unweighted = FALSE,
  standard_eval = FALSE,
  eclac_input = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_prop_+3A_var">var</code></td>
<td>
<p>numeric variable within the <code>dataframe</code>, is the numerator of the ratio to be calculated.</p>
</td></tr>
<tr><td><code id="create_prop_+3A_denominator">denominator</code></td>
<td>
<p>numeric variable within the <code>dataframe</code>, is the denominator of the ratio to be calculated. If the <code>var</code> parameter is dummy, it can be NULL</p>
</td></tr>
<tr><td><code id="create_prop_+3A_domains">domains</code></td>
<td>
<p>domains to be estimated separated by the + character.</p>
</td></tr>
<tr><td><code id="create_prop_+3A_subpop">subpop</code></td>
<td>
<p>integer dummy variable to filter the dataframe</p>
</td></tr>
<tr><td><code id="create_prop_+3A_design">design</code></td>
<td>
<p>complex design created by <code>survey</code> package</p>
</td></tr>
<tr><td><code id="create_prop_+3A_ci">ci</code></td>
<td>
<p><code>boolean</code> indicating if the confidence intervals must be calculated</p>
</td></tr>
<tr><td><code id="create_prop_+3A_deff">deff</code></td>
<td>
<p><code>boolean</code> Design effect</p>
</td></tr>
<tr><td><code id="create_prop_+3A_ess">ess</code></td>
<td>
<p><code>boolean</code> Effective sample size</p>
</td></tr>
<tr><td><code id="create_prop_+3A_ajuste_ene">ajuste_ene</code></td>
<td>
<p><code>boolean</code> indicating if an adjustment for the sampling-frame transition period must be used</p>
</td></tr>
<tr><td><code id="create_prop_+3A_rel_error">rel_error</code></td>
<td>
<p><code>boolean</code> Relative error</p>
</td></tr>
<tr><td><code id="create_prop_+3A_log_cv">log_cv</code></td>
<td>
<p><code>boolean</code> logarithmic coefficient of variation</p>
</td></tr>
<tr><td><code id="create_prop_+3A_unweighted">unweighted</code></td>
<td>
<p><code>boolean</code> Add non weighted count if it is required</p>
</td></tr>
<tr><td><code id="create_prop_+3A_standard_eval">standard_eval</code></td>
<td>
<p><code>boolean</code> Indicating if the function is wrapped inside a function, if <code>TRUE</code> avoid lazy eval errors</p>
</td></tr>
<tr><td><code id="create_prop_+3A_eclac_input">eclac_input</code></td>
<td>
<p><code>boolean</code> return eclac inputs</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>dataframe</code> that contains the inputs and all domains to be evaluated
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survey)
library(dplyr)

epf &lt;- mutate(epf_personas, gasto_zona1 = if_else(zona == 1, gastot_hd, 0))
dc &lt;- svydesign(ids = ~varunit, strata = ~varstrat, data = epf, weights = ~fe)
old_options &lt;- options()
options(survey.lonely.psu = "certainty")

create_prop(var = "gasto_zona1", denominator = "gastot_hd", design =  dc)

enusc &lt;- filter(enusc, Kish == 1)

dc &lt;- svydesign(ids = ~Conglomerado, strata = ~VarStrat, data = enusc, weights = ~Fact_Pers)
options(survey.lonely.psu = "certainty")
create_prop(var = "VP_DC", denominator = "hom_insg_taxi", design = dc)
options(old_options)
</code></pre>

<hr>
<h2 id='create_prop_internal'>internal function to calculate proportion estimations</h2><span id='topic+create_prop_internal'></span>

<h3>Description</h3>

<p>internal function to calculate proportion estimations
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_prop_internal(
  var,
  domains = NULL,
  subpop = NULL,
  disenio,
  ci = FALSE,
  deff = FALSE,
  ess = FALSE,
  ajuste_ene = FALSE,
  rel_error = FALSE,
  log_cv = FALSE,
  unweighted = FALSE,
  standard_eval = TRUE,
  rm.na = FALSE,
  env = parent.frame()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_prop_internal_+3A_var">var</code></td>
<td>
<p>integer dummy variable within the  <code>dataframe</code></p>
</td></tr>
<tr><td><code id="create_prop_internal_+3A_domains">domains</code></td>
<td>
<p>domains to be estimated separated by the + character.</p>
</td></tr>
<tr><td><code id="create_prop_internal_+3A_subpop">subpop</code></td>
<td>
<p>integer dummy variable to filter the dataframe</p>
</td></tr>
<tr><td><code id="create_prop_internal_+3A_disenio">disenio</code></td>
<td>
<p>complex design created by <code>survey</code> package</p>
</td></tr>
<tr><td><code id="create_prop_internal_+3A_ci">ci</code></td>
<td>
<p><code>boolean</code> indicating if the confidence intervals must be calculated</p>
</td></tr>
<tr><td><code id="create_prop_internal_+3A_deff">deff</code></td>
<td>
<p><code>boolean</code> Design effect</p>
</td></tr>
<tr><td><code id="create_prop_internal_+3A_ess">ess</code></td>
<td>
<p><code>boolean</code> Effective sample size</p>
</td></tr>
<tr><td><code id="create_prop_internal_+3A_ajuste_ene">ajuste_ene</code></td>
<td>
<p><code>boolean</code> indicating if an adjustment for the sampling-frame transition period must be used</p>
</td></tr>
<tr><td><code id="create_prop_internal_+3A_rel_error">rel_error</code></td>
<td>
<p><code>boolean</code> Relative error</p>
</td></tr>
<tr><td><code id="create_prop_internal_+3A_log_cv">log_cv</code></td>
<td>
<p><code>boolean</code> indicating if the log cv must be returned</p>
</td></tr>
<tr><td><code id="create_prop_internal_+3A_unweighted">unweighted</code></td>
<td>
<p><code>boolean</code> Add non weighted count if it is required</p>
</td></tr>
<tr><td><code id="create_prop_internal_+3A_standard_eval">standard_eval</code></td>
<td>
<p><code>boolean</code> indicating if the function is inside another function, by default it is TRUE, avoid problems with lazy eval.</p>
</td></tr>
<tr><td><code id="create_prop_internal_+3A_rm.na">rm.na</code></td>
<td>
<p><code>boolean</code> indicating if NA values must be removed</p>
</td></tr>
<tr><td><code id="create_prop_internal_+3A_env">env</code></td>
<td>
<p>parent environment to get some variables</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>dataframe</code> that contains the inputs and all domains to be evaluated
</p>

<hr>
<h2 id='create_ratio_internal'>internal function to calculate ratios estimations</h2><span id='topic+create_ratio_internal'></span>

<h3>Description</h3>

<p>internal function to calculate ratios estimations
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_ratio_internal(
  var,
  denominator,
  domains = NULL,
  subpop = NULL,
  disenio,
  ci = FALSE,
  deff = FALSE,
  ess = FALSE,
  ajuste_ene = FALSE,
  unweighted = FALSE,
  rel_error = FALSE,
  rm.na = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_ratio_internal_+3A_var">var</code></td>
<td>
<p>numeric variable within the <code>dataframe</code>, is the numerator of the ratio to be calculated.</p>
</td></tr>
<tr><td><code id="create_ratio_internal_+3A_denominator">denominator</code></td>
<td>
<p>numeric variable within the <code>dataframe</code>, is the denominator of the ratio to be calculated.</p>
</td></tr>
<tr><td><code id="create_ratio_internal_+3A_domains">domains</code></td>
<td>
<p>domains to be estimated separated by the + character.</p>
</td></tr>
<tr><td><code id="create_ratio_internal_+3A_subpop">subpop</code></td>
<td>
<p>integer dummy variable to filter the dataframe</p>
</td></tr>
<tr><td><code id="create_ratio_internal_+3A_disenio">disenio</code></td>
<td>
<p>complex design created by <code>survey</code> package</p>
</td></tr>
<tr><td><code id="create_ratio_internal_+3A_ci">ci</code></td>
<td>
<p><code>boolean</code> indicating if the confidence intervals must be calculated</p>
</td></tr>
<tr><td><code id="create_ratio_internal_+3A_deff">deff</code></td>
<td>
<p><code>boolean</code> Design effect</p>
</td></tr>
<tr><td><code id="create_ratio_internal_+3A_ess">ess</code></td>
<td>
<p><code>boolean</code> Effective sample size</p>
</td></tr>
<tr><td><code id="create_ratio_internal_+3A_ajuste_ene">ajuste_ene</code></td>
<td>
<p><code>boolean</code> indicating if an adjustment for the sampling-frame transition period must be used</p>
</td></tr>
<tr><td><code id="create_ratio_internal_+3A_unweighted">unweighted</code></td>
<td>
<p><code>boolean</code> Add non weighted count if it is required</p>
</td></tr>
<tr><td><code id="create_ratio_internal_+3A_rel_error">rel_error</code></td>
<td>
<p><code>boolean</code> Relative error</p>
</td></tr>
<tr><td><code id="create_ratio_internal_+3A_rm.na">rm.na</code></td>
<td>
<p><code>boolean</code> indicating if NA values must be removed</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>dataframe</code> that contains the inputs and all domains to be evaluated
</p>

<hr>
<h2 id='create_size'>Create the inputs to evaluate the quality of total estimations</h2><span id='topic+create_size'></span>

<h3>Description</h3>

<p><code>create_size</code> generates a <code>dataframe</code> with the following elements: sum,
degrees of freedom, sample size and coefficient of variation. The function allows
grouping in several domains.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_size(
  var,
  domains = NULL,
  subpop = NULL,
  design,
  ci = FALSE,
  ess = FALSE,
  ajuste_ene = FALSE,
  standard_eval = FALSE,
  rm.na = FALSE,
  deff = FALSE,
  rel_error = FALSE,
  unweighted = FALSE,
  df_type = c("ine", "eclac"),
  eclac_input = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_size_+3A_var">var</code></td>
<td>
<p>numeric variable within the  <code>dataframe</code>. When the domain parameter is not used,
it is possible to include more than one variable using the + separator. When a value is introduced
in the domain parameter, the estimation variable must be a dummy variable.</p>
</td></tr>
<tr><td><code id="create_size_+3A_domains">domains</code></td>
<td>
<p>domains to be estimated separated by the + character.</p>
</td></tr>
<tr><td><code id="create_size_+3A_subpop">subpop</code></td>
<td>
<p>integer dummy variable to filter the dataframe</p>
</td></tr>
<tr><td><code id="create_size_+3A_design">design</code></td>
<td>
<p>complex design created by <code>survey</code> package</p>
</td></tr>
<tr><td><code id="create_size_+3A_ci">ci</code></td>
<td>
<p><code>boolean</code> indicating if the confidence intervals must be calculated</p>
</td></tr>
<tr><td><code id="create_size_+3A_ess">ess</code></td>
<td>
<p><code>boolean</code> Effective sample size</p>
</td></tr>
<tr><td><code id="create_size_+3A_ajuste_ene">ajuste_ene</code></td>
<td>
<p><code>boolean</code> indicating if an adjustment for the sampling-frame transition period must be used</p>
</td></tr>
<tr><td><code id="create_size_+3A_standard_eval">standard_eval</code></td>
<td>
<p><code>boolean</code> Indicating if the function is wrapped inside a function, if <code>TRUE</code> avoid lazy eval errors</p>
</td></tr>
<tr><td><code id="create_size_+3A_rm.na">rm.na</code></td>
<td>
<p><code>boolean</code> Remove NA if it is required</p>
</td></tr>
<tr><td><code id="create_size_+3A_deff">deff</code></td>
<td>
<p><code>boolean</code> Design effect</p>
</td></tr>
<tr><td><code id="create_size_+3A_rel_error">rel_error</code></td>
<td>
<p><code>boolean</code> Relative error</p>
</td></tr>
<tr><td><code id="create_size_+3A_unweighted">unweighted</code></td>
<td>
<p><code>boolean</code> Add non weighted count if it is required</p>
</td></tr>
<tr><td><code id="create_size_+3A_df_type">df_type</code></td>
<td>
<p><code>string</code> Use degrees of freedom calculation approach from INE Chile or CEPAL, by default &quot;ine&quot;.</p>
</td></tr>
<tr><td><code id="create_size_+3A_eclac_input">eclac_input</code></td>
<td>
<p><code>boolean</code> return eclac inputs</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>dataframe</code> that contains the inputs and all domains to be evaluated
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dc &lt;- survey::svydesign(ids = ~varunit, strata = ~varstrat, data = epf_personas, weights = ~fe)
create_size("ocupado", "zona+sexo", design = dc)
</code></pre>

<hr>
<h2 id='create_total'>Create the inputs to evaluate the quality of the sum of continuous variables</h2><span id='topic+create_total'></span>

<h3>Description</h3>

<p><code>create_total</code> generates a <code>dataframe</code> with the following elements: sum,
degrees of freedom, sample size and coefficient of variation. The function allows
grouping in several domains.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_total(
  var,
  domains = NULL,
  subpop = NULL,
  design,
  ci = FALSE,
  ess = FALSE,
  ajuste_ene = FALSE,
  standard_eval = FALSE,
  rm.na = FALSE,
  deff = FALSE,
  rel_error = FALSE,
  unweighted = FALSE,
  eclac_input = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_total_+3A_var">var</code></td>
<td>
<p>numeric variable within the  <code>dataframe</code>.</p>
</td></tr>
<tr><td><code id="create_total_+3A_domains">domains</code></td>
<td>
<p>domains to be estimated separated by the + character.</p>
</td></tr>
<tr><td><code id="create_total_+3A_subpop">subpop</code></td>
<td>
<p>integer dummy variable to filter the dataframe</p>
</td></tr>
<tr><td><code id="create_total_+3A_design">design</code></td>
<td>
<p>complex design created by <code>survey</code> package</p>
</td></tr>
<tr><td><code id="create_total_+3A_ci">ci</code></td>
<td>
<p><code>boolean</code> indicating if the confidence intervals must be calculated</p>
</td></tr>
<tr><td><code id="create_total_+3A_ess">ess</code></td>
<td>
<p><code>boolean</code> Effective sample size</p>
</td></tr>
<tr><td><code id="create_total_+3A_ajuste_ene">ajuste_ene</code></td>
<td>
<p><code>boolean</code> indicating if an adjustment for the sampling-frame transition period must be used</p>
</td></tr>
<tr><td><code id="create_total_+3A_standard_eval">standard_eval</code></td>
<td>
<p><code>boolean</code> Indicating if the function is wrapped inside a function, if <code>TRUE</code> avoid lazy eval errors</p>
</td></tr>
<tr><td><code id="create_total_+3A_rm.na">rm.na</code></td>
<td>
<p><code>boolean</code> Remove NA if it is required</p>
</td></tr>
<tr><td><code id="create_total_+3A_deff">deff</code></td>
<td>
<p><code>boolean</code> Design effect</p>
</td></tr>
<tr><td><code id="create_total_+3A_rel_error">rel_error</code></td>
<td>
<p><code>boolean</code> Relative error</p>
</td></tr>
<tr><td><code id="create_total_+3A_unweighted">unweighted</code></td>
<td>
<p><code>boolean</code> Add non weighted count if it is required</p>
</td></tr>
<tr><td><code id="create_total_+3A_eclac_input">eclac_input</code></td>
<td>
<p><code>boolean</code> return eclac inputs</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>dataframe</code> that contains the inputs and all domains to be evaluated
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dc &lt;- survey::svydesign(ids = ~varunit, strata = ~varstrat, data = epf_personas, weights = ~fe)
create_total("gastot_hd", "zona+sexo", subpop = "ocupado", design = dc)
</code></pre>

<hr>
<h2 id='ene'>Encuesta Nacional de Empleo - ENE. 2020-efm</h2><span id='topic+ene'></span>

<h3>Description</h3>

<p>Reduced version of the ENE database. Contains
some sociodemographic variables and the necessary information
to work with complex design
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ene
</code></pre>


<h3>Format</h3>

<p>dataframe with 87.842 rows y 7 columns
</p>

<dl>
<dt>sexo</dt><dd><p>1 = man; 2 = woman </p>
</dd>
<dt>region</dt><dd><p>region</p>
</dd>
<dt>cae_especifico</dt><dd><p>Economic activity status</p>
</dd>
<dt>fe</dt><dd><p>sample weights</p>
</dd>
<dt>varunit</dt><dd><p>PSU</p>
</dd>
<dt>varstrat</dt><dd><p>strata</p>
</dd>
<dt>fdt</dt><dd><p>It shows if the person belongs to labour force: 1 = yes; 0 = no</p>
</dd>
<dt>ocupado</dt><dd><p>1 = employed; 0 = non-employed</p>
</dd>
<dt>desocupado</dt><dd><p>1 = non-employed; 0 = employed</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://www.ine.cl/estadisticas/sociales/mercado-laboral/ocupacion-y-desocupacion">https://www.ine.cl/estadisticas/sociales/mercado-laboral/ocupacion-y-desocupacion</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ene)

</code></pre>

<hr>
<h2 id='enusc'>Encuesta Nacional Urbana de Seguridad ciudadana 2019 - ENUSC 2019</h2><span id='topic+enusc'></span>

<h3>Description</h3>

<p>ENUSC data for the year 2019. Contains only a few variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>enusc
</code></pre>


<h3>Format</h3>

<p>dataframe with 24.465 rows y 22 columns
</p>

<dl>
<dt>rph_sexo</dt><dd><p>1 = man; 2 = woman</p>
</dd>
<dt>region</dt><dd><p>16 regions</p>
</dd>
<dt>Fact_Pers</dt><dd><p>person sample weights</p>
</dd>
<dt>Fact_Hog</dt><dd><p>household sample weights</p>
</dd>
<dt>Conglomerado</dt><dd><p>PSU</p>
</dd>
<dt>VarStrat</dt><dd><p>strata</p>
</dd>
<dt>VP_DC</dt><dd><p>Individual victimization. It works combined with Fact_Pers</p>
</dd>
<dt>VA_DC</dt><dd><p>Household victimization. It works combined  with Fact_Hog</p>
</dd>
<dt>rph_edad</dt><dd><p>age</p>
</dd>
<dt>P3_1_1</dt><dd><p> Perception of increased crime in the country. It works combined with Fact_Pers</p>
</dd>
<dt>P8_1_1</dt><dd><p>Cause of increased crime in the neighborhood. It works combined with Fact_Pers</p>
</dd>
<dt>muj_insg_taxi</dt><dd><p>Female perception of insecurity inside taxis. Variable elaborated with variables P9 and rph_sexo . It works combined with Fact_Pers</p>
</dd>
<dt>hom_insg_taxi</dt><dd><p>Male perception of insecurity inside taxis. Variable elaborated with variables P9 and rph_sexo. It works combined with Fact_Pers</p>
</dd>
<dt>muj_insg_micro</dt><dd><p>Female perception of insecurity inside buses. Variable elaborated with variables P9 and rph_sexo. It works combined with Fact_Pers</p>
</dd>
<dt>hom_insg_micro</dt><dd><p>Male perception of insecurity inside buses. Variable elaborated with variables P9 and rph_sexo. It works combined with Fact_Pers</p>
</dd>
<dt>muj_insg_centr.com</dt><dd><p>Female perception of insecurity inside malls. Variable elaborated with variables P9 and rph_sexo. It works combined with Fact_Pers</p>
</dd>
<dt>hom_insg_centr.com</dt><dd><p>Male perception of insecurity inside malls. Variable elaborated with variables P9 and rph_sexo. It works combined with Fact_Pers</p>
</dd>
<dt>muj_insg_loc.col</dt><dd><p>Female perception of insecurity public transport. Variable elaborated with variables P9 and rph_sexo. It works combined with Fact_Pers</p>
</dd>
<dt>hom_insg_loc.col</dt><dd><p>Male perception of insecurity public transport. Variable elaborated with variables P9 and rph_sexo. It works combined with Fact_Pers</p>
</dd>
<dt>muj_insg_barrio</dt><dd><p>Female perception of insecurity neighborhood. Variable elaborated with variables P9 and rph_sexo. It works combined with Fact_Pers</p>
</dd>
<dt>hom_insg_barrio</dt><dd><p>Male perception of insecurity neighborhood. Variable elaborated with variables P9 and rph_sexo. It works combined with Fact_Pers</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://www.ine.cl/docs/default-source/seguridad-ciudadana/bbdd/2019/base-de-datos---xvi-enusc-2019-(csv).csv?sfvrsn=d3465758_2&amp;download=true">https://www.ine.cl/docs/default-source/seguridad-ciudadana/bbdd/2019/base-de-datos&mdash;xvi-enusc-2019-(csv).csv?sfvrsn=d3465758_2&amp;download=true</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(enusc)

</code></pre>

<hr>
<h2 id='epf_personas'>VIII Encuesta de Presupuestos Familiares</h2><span id='topic+epf_personas'></span>

<h3>Description</h3>

<p>Reduced version of the VIII EPF database. Contains
some sociodemographic variables and the necessary information
to work with complex design.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>epf_personas
</code></pre>


<h3>Format</h3>

<p>dataframe compuesto por 48.308 observaciones y 8 variables
</p>

<dl>
<dt>sexo</dt><dd><p>1 = male; 2 = female</p>
</dd>
<dt>zona</dt><dd><p>1 = metropolitan area; 2 = rest of the regional capitals</p>
</dd>
<dt>ecivil</dt><dd><p>marital status</p>
</dd>
<dt>fe</dt><dd><p>sample weights</p>
</dd>
<dt>varunit</dt><dd><p>PSU</p>
</dd>
<dt>varstrat</dt><dd><p>strata</p>
</dd>
<dt>gastot_hd</dt><dd><p>household expenditure</p>
</dd>
<dt>ocupado</dt><dd><p>1 = employed; 0 = non-employed</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://www.ine.cl/estadisticas/sociales/ingresos-y-gastos/encuesta-de-presupuestos-familiares">https://www.ine.cl/estadisticas/sociales/ingresos-y-gastos/encuesta-de-presupuestos-familiares</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(epf_personas)

</code></pre>

<hr>
<h2 id='get_cv'>Get the coefficient of variation</h2><span id='topic+get_cv'></span>

<h3>Description</h3>

<p>Receive a table created with survey and return the coefficient of variation for each cell
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_cv(table, design, domains, type_est = "all", env = parent.frame())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_cv_+3A_table">table</code></td>
<td>
<p><code>dataframe</code> with results</p>
</td></tr>
<tr><td><code id="get_cv_+3A_design">design</code></td>
<td>
<p>design</p>
</td></tr>
<tr><td><code id="get_cv_+3A_domains">domains</code></td>
<td>
<p><code>vector</code> with domains</p>
</td></tr>
<tr><td><code id="get_cv_+3A_type_est">type_est</code></td>
<td>
<p>type of estimation: all or size.</p>
</td></tr>
<tr><td><code id="get_cv_+3A_env">env</code></td>
<td>
<p>parent environment</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>dataframe</code> with results including including CV
</p>

<hr>
<h2 id='get_df'>Get degrees of freedom</h2><span id='topic+get_df'></span>

<h3>Description</h3>

<p>Receive data and domains. Returns a data frame with the psu, strata and df for each cell
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_df(data, domains, df_type = "eclac")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_df_+3A_data">data</code></td>
<td>
<p><code>dataframe</code></p>
</td></tr>
<tr><td><code id="get_df_+3A_domains">domains</code></td>
<td>
<p><code>string</code> with domains</p>
</td></tr>
<tr><td><code id="get_df_+3A_df_type">df_type</code></td>
<td>
<p><code>string</code> Use degrees of freedom calculation approach from INE Chile or eclac, by default &quot;ine&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>dataframe</code> with results including degrees of freedom
</p>

<hr>
<h2 id='get_survey_table'>Calculates multiple estimations. Internal wrapper for survey package</h2><span id='topic+get_survey_table'></span>

<h3>Description</h3>

<p>Generates a table with estimates for a given aggregation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_survey_table(
  var,
  domains,
  complex_design,
  estimation = "mean",
  env = parent.frame(),
  fun,
  denom = NULL,
  type_est = "all"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_survey_table_+3A_var">var</code></td>
<td>
<p><code>string</code> objective variable</p>
</td></tr>
<tr><td><code id="get_survey_table_+3A_domains">domains</code></td>
<td>
<p><code>domains</code></p>
</td></tr>
<tr><td><code id="get_survey_table_+3A_complex_design">complex_design</code></td>
<td>
<p>design from <code>survey</code></p>
</td></tr>
<tr><td><code id="get_survey_table_+3A_estimation">estimation</code></td>
<td>
<p><code>string</code> indicating if the mean must be calculated</p>
</td></tr>
<tr><td><code id="get_survey_table_+3A_env">env</code></td>
<td>
<p>parent environment</p>
</td></tr>
<tr><td><code id="get_survey_table_+3A_fun">fun</code></td>
<td>
<p>function required regarding the estimation</p>
</td></tr>
<tr><td><code id="get_survey_table_+3A_denom">denom</code></td>
<td>
<p>denominator. This parameter works for the ratio estimation</p>
</td></tr>
<tr><td><code id="get_survey_table_+3A_type_est">type_est</code></td>
<td>
<p>type of estimation: all or size</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>dataframe</code> containing  main results from survey
</p>

<hr>
<h2 id='quadratic'>Calcula el valor de una función cuadrática</h2><span id='topic+quadratic'></span>

<h3>Description</h3>

<p><code>quadratic</code> returns the output of a particular function created by INE Chile, which
is assessed at the value of the estimated proportion from a sample. If the output of the
function is  higher than the standard error, it is interpreted as a signal that the
estimation is not reliable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>quadratic(p)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="quadratic_+3A_p">p</code></td>
<td>
<p>numeric vector with the values of the estimations for proportions</p>
</td></tr>
</table>


<h3>Value</h3>

<p>numeric vector
</p>

<hr>
<h2 id='standardize_columns'>standardize and sort column names</h2><span id='topic+standardize_columns'></span>

<h3>Description</h3>

<p>Receive the survey table in raw state and sort it
</p>


<h3>Usage</h3>

<pre><code class='language-R'>standardize_columns(data, var, denom)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="standardize_columns_+3A_data">data</code></td>
<td>
<p><code>dataframe</code> with results</p>
</td></tr>
<tr><td><code id="standardize_columns_+3A_var">var</code></td>
<td>
<p><code>string</code> with the objective variable</p>
</td></tr>
<tr><td><code id="standardize_columns_+3A_denom">denom</code></td>
<td>
<p>denominator</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>dataframe</code> with standardized data
</p>

<hr>
<h2 id='standardize_design_variables'>Standardize the name of design variables</h2><span id='topic+standardize_design_variables'></span>

<h3>Description</h3>

<p>Rename design variables, so we can use the later
</p>


<h3>Usage</h3>

<pre><code class='language-R'>standardize_design_variables(design)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="standardize_design_variables_+3A_design">design</code></td>
<td>
<p><code>dataframe</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>design survey
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
