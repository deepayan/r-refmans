<!DOCTYPE html><html><head><title>Help for package admiralvaccine</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {admiralvaccine}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#admiralvaccine_adce'><p>Clinical Events Analysis Dataset - Vaccine Specific</p></a></li>
<li><a href='#admiralvaccine_adface'><p>Findings About Clinical Events Analysis Dataset - Vaccine Specific</p></a></li>
<li><a href='#admiralvaccine_adis'><p>Immunogenicity Specimen Assessments Analysis Dataset - Vaccine Specific</p></a></li>
<li><a href='#admiralvaccine_adsl'><p>Subject Level Analysis Dataset - Vaccine Specific</p></a></li>
<li><a href='#admiralvaccine-package'><p>admiralvaccine: Vaccine Extension Package for ADaM in 'R' Asset Library</p></a></li>
<li><a href='#derive_diam_to_sev_records'><p>Creating Severity Records From Diameter</p></a></li>
<li><a href='#derive_fever_records'><p>Creating Fever Records</p></a></li>
<li><a href='#derive_var_aval_adis'><p>Derive AVAL variable for ADIS ADaM domain</p></a></li>
<li><a href='#derive_vars_crit'><p>Derive Analysis Criterion Evaluation Variables</p></a></li>
<li><a href='#derive_vars_event_flag'><p>Adds Flag Variables for an Occurred Event .</p></a></li>
<li><a href='#derive_vars_max_flag'><p>Creating ANLxxFL Variables To Flag The Maximum Records</p></a></li>
<li><a href='#derive_vars_merged_vaccine'><p>Add New Variable(s) to the Input dataset Based on Variables from Another dataset</p></a></li>
<li><a href='#derive_vars_params'><p>Assigning Parameter Variables</p></a></li>
<li><a href='#derive_vars_vaxdt'><p>Add Vaccination Date Variables to the Output Dataset</p></a></li>
<li><a href='#max_flag'><p>Creating Maximum Flag</p></a></li>
<li><a href='#post_process_reacto'><p>Post processing function for ADFACE dataset</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Vaccine Extension Package for ADaM in 'R' Asset Library</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Programming vaccine specific Clinical Data Interchange
    Standards Consortium (CDISC) compliant Analysis Data Model (ADaM)
    datasets in 'R'. Flat model is followed as per 
    Center for Biologics Evaluation and Research (CBER) guidelines for
    creating vaccine specific domains. ADaM datasets are a mandatory part
    of any New Drug or Biologics License Application submitted to the
    United States Food and Drug Administration (FDA). Analysis derivations
    are implemented in accordance with the "Analysis Data Model
    Implementation Guide" (CDISC Analysis Data Model Team (2021),
    <a href="https://www.cdisc.org/standards/foundational/adam/adamig-v1-3-release-package">https://www.cdisc.org/standards/foundational/adam/adamig-v1-3-release-package</a>).
    The package is an extension package of the 'admiral' package.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (&ge; 2)</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://pharmaverse.github.io/admiralvaccine/">https://pharmaverse.github.io/admiralvaccine/</a>,
<a href="https://github.com/pharmaverse/admiralvaccine/">https://github.com/pharmaverse/admiralvaccine/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/pharmaverse/admiralvaccine/issues/">https://github.com/pharmaverse/admiralvaccine/issues/</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>Imports:</td>
<td>admiral (&ge; 1.0.0), admiraldev (&ge; 1.0.0), assertthat (&ge;
0.2.1), dplyr (&ge; 0.8.4), hms (&ge; 0.5.3), lifecycle (&ge; 0.1.0),
lubridate (&ge; 1.7.4), magrittr (&ge; 1.5), metatools, purrr (&ge;
0.3.3), rlang (&ge; 0.4.4), stringr (&ge; 1.4.0), tidyr (&ge; 1.0.2),
tidyselect (&ge; 1.0.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, devtools, diffdf, DT, knitr, lintr, methods, miniUI,
pharmaversesdtm, pkgdown, rmarkdown, roxygen2, spelling,
styler, testthat, tibble, usethis</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-08 09:41:25 UTC; amrut</td>
</tr>
<tr>
<td>Author:</td>
<td>Sukalpo Saha [aut, cre],
  Arjun Rubalingam [aut],
  Ben Straub [aut],
  Vikram S [aut],
  Dhivya Kanagaraj [aut],
  Federico Baratin [aut],
  Yamini Purna Bollu [aut],
  Ilse Augustyns [aut],
  Kalyani Bodicherla [aut],
  Hilde Delanghe [aut],
  Lee Armishaw [aut],
  Neetu Sangari [ctb],
  Abdul Khayat [ctb],
  Ankur Jindal [ctb],
  Jayashree V [ctb],
  Jagadish Katam [ctb],
  Andrea Pammolli [ctb],
  Daniele Bottigliengo [ctb],
  Ranya Ben Hsain [ctb],
  Marleen Nijs [ctb],
  Mandy Peng [ctb],
  Tina Zhai [ctb],
  Ross Farrugia [ctb],
  Stefan Bundfuss [ctb],
  Edoardo Mancini [ctb],
  Pfizer Inc. [cph, fnd],
  GlaxoSmithKline LLC [cph, fnd],
  Johnson &amp; Johnson [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Sukalpo Saha &lt;sukalpo.saha@pfizer.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-08 13:30:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='admiralvaccine_adce'>Clinical Events Analysis Dataset - Vaccine Specific</h2><span id='topic+admiralvaccine_adce'></span>

<h3>Description</h3>

<p>An example Clinical Events analysis dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>admiralvaccine_adce
</code></pre>


<h3>Format</h3>

<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 44 rows and 56 columns.
</p>


<h3>Source</h3>

<p>(<a href="https://github.com/pharmaverse/admiralvaccine/blob/main/inst/templates/ad_adce.R">https://github.com/pharmaverse/admiralvaccine/blob/main/inst/templates/ad_adce.R</a>)
</p>


<h3>See Also</h3>

<p>Other dataset: 
<code><a href="#topic+admiralvaccine_adface">admiralvaccine_adface</a></code>,
<code><a href="#topic+admiralvaccine_adis">admiralvaccine_adis</a></code>,
<code><a href="#topic+admiralvaccine_adsl">admiralvaccine_adsl</a></code>
</p>

<hr>
<h2 id='admiralvaccine_adface'>Findings About Clinical Events Analysis Dataset - Vaccine Specific</h2><span id='topic+admiralvaccine_adface'></span>

<h3>Description</h3>

<p>An example Findings About Clinical Events analysis dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>admiralvaccine_adface
</code></pre>


<h3>Format</h3>

<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 371 rows and 60 columns.
</p>


<h3>Source</h3>

<p>(<a href="https://github.com/pharmaverse/admiralvaccine/blob/main/inst/templates/ad_adface.R">https://github.com/pharmaverse/admiralvaccine/blob/main/inst/templates/ad_adface.R</a>)
</p>


<h3>See Also</h3>

<p>Other dataset: 
<code><a href="#topic+admiralvaccine_adce">admiralvaccine_adce</a></code>,
<code><a href="#topic+admiralvaccine_adis">admiralvaccine_adis</a></code>,
<code><a href="#topic+admiralvaccine_adsl">admiralvaccine_adsl</a></code>
</p>

<hr>
<h2 id='admiralvaccine_adis'>Immunogenicity Specimen Assessments Analysis Dataset - Vaccine Specific</h2><span id='topic+admiralvaccine_adis'></span>

<h3>Description</h3>

<p>An example Immunogenicity Specimen Assessments analysis dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>admiralvaccine_adis
</code></pre>


<h3>Format</h3>

<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 64 rows and 102 columns.
</p>


<h3>Source</h3>

<p>(<a href="https://github.com/pharmaverse/admiralvaccine/blob/main/inst/templates/ad_adis.R">https://github.com/pharmaverse/admiralvaccine/blob/main/inst/templates/ad_adis.R</a>)
</p>


<h3>See Also</h3>

<p>Other dataset: 
<code><a href="#topic+admiralvaccine_adce">admiralvaccine_adce</a></code>,
<code><a href="#topic+admiralvaccine_adface">admiralvaccine_adface</a></code>,
<code><a href="#topic+admiralvaccine_adsl">admiralvaccine_adsl</a></code>
</p>

<hr>
<h2 id='admiralvaccine_adsl'>Subject Level Analysis Dataset - Vaccine Specific</h2><span id='topic+admiralvaccine_adsl'></span>

<h3>Description</h3>

<p>An example Subject Level analysis dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>admiralvaccine_adsl
</code></pre>


<h3>Format</h3>

<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 2 rows and 46 columns.
</p>


<h3>Source</h3>

<p>(<a href="https://github.com/pharmaverse/admiralvaccine/blob/main/inst/templates/ad_adsl.R">https://github.com/pharmaverse/admiralvaccine/blob/main/inst/templates/ad_adsl.R</a>)
</p>


<h3>See Also</h3>

<p>Other dataset: 
<code><a href="#topic+admiralvaccine_adce">admiralvaccine_adce</a></code>,
<code><a href="#topic+admiralvaccine_adface">admiralvaccine_adface</a></code>,
<code><a href="#topic+admiralvaccine_adis">admiralvaccine_adis</a></code>
</p>

<hr>
<h2 id='admiralvaccine-package'>admiralvaccine: Vaccine Extension Package for ADaM in 'R' Asset Library</h2><span id='topic+admiralvaccine'></span><span id='topic+admiralvaccine-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Programming vaccine specific Clinical Data Interchange Standards Consortium (CDISC) compliant Analysis Data Model (ADaM) datasets in 'R'. Flat model is followed as per Center for Biologics Evaluation and Research (CBER) guidelines for creating vaccine specific domains. ADaM datasets are a mandatory part of any New Drug or Biologics License Application submitted to the United States Food and Drug Administration (FDA). Analysis derivations are implemented in accordance with the &quot;Analysis Data Model Implementation Guide&quot; (CDISC Analysis Data Model Team (2021), <a href="https://www.cdisc.org/standards/foundational/adam/adamig-v1-3-release-package">https://www.cdisc.org/standards/foundational/adam/adamig-v1-3-release-package</a>). The package is an extension package of the 'admiral' package.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Sukalpo Saha <a href="mailto:sukalpo.saha@pfizer.com">sukalpo.saha@pfizer.com</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Arjun Rubalingam <a href="mailto:arjun.rubalingam@pfizer.com">arjun.rubalingam@pfizer.com</a>
</p>
</li>
<li><p> Ben Straub <a href="mailto:ben.x.straub@gsk.com">ben.x.straub@gsk.com</a>
</p>
</li>
<li><p> Vikram S
</p>
</li>
<li><p> Dhivya Kanagaraj
</p>
</li>
<li><p> Federico Baratin
</p>
</li>
<li><p> Yamini Purna Bollu
</p>
</li>
<li><p> Ilse Augustyns
</p>
</li>
<li><p> Kalyani Bodicherla
</p>
</li>
<li><p> Hilde Delanghe
</p>
</li>
<li><p> Lee Armishaw
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Neetu Sangari [contributor]
</p>
</li>
<li><p> Abdul Khayat [contributor]
</p>
</li>
<li><p> Ankur Jindal [contributor]
</p>
</li>
<li><p> Jayashree V [contributor]
</p>
</li>
<li><p> Jagadish Katam [contributor]
</p>
</li>
<li><p> Andrea Pammolli [contributor]
</p>
</li>
<li><p> Daniele Bottigliengo [contributor]
</p>
</li>
<li><p> Ranya Ben Hsain [contributor]
</p>
</li>
<li><p> Marleen Nijs [contributor]
</p>
</li>
<li><p> Mandy Peng [contributor]
</p>
</li>
<li><p> Tina Zhai [contributor]
</p>
</li>
<li><p> Ross Farrugia [contributor]
</p>
</li>
<li><p> Stefan Bundfuss [contributor]
</p>
</li>
<li><p> Edoardo Mancini [contributor]
</p>
</li>
<li><p> Pfizer Inc. [copyright holder, funder]
</p>
</li>
<li><p> GlaxoSmithKline LLC [copyright holder, funder]
</p>
</li>
<li><p> Johnson &amp; Johnson [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://pharmaverse.github.io/admiralvaccine/">https://pharmaverse.github.io/admiralvaccine/</a>
</p>
</li>
<li> <p><a href="https://github.com/pharmaverse/admiralvaccine/">https://github.com/pharmaverse/admiralvaccine/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/pharmaverse/admiralvaccine/issues/">https://github.com/pharmaverse/admiralvaccine/issues/</a>
</p>
</li></ul>


<hr>
<h2 id='derive_diam_to_sev_records'>Creating Severity Records From Diameter</h2><span id='topic+derive_diam_to_sev_records'></span>

<h3>Description</h3>

<p>To derive the severity records from the diameter records.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>derive_diam_to_sev_records(
  dataset,
  diam_code = "DIAMETER",
  faobj_values = c("REDNESS", "SWELLING"),
  testcd_sev = "SEV",
  test_sev = "Severity/Intensity",
  none = 0,
  mild = 2,
  mod = 5,
  sev = 10
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="derive_diam_to_sev_records_+3A_dataset">dataset</code></td>
<td>
<p>Input data set
</p>
<p>The variables <code>USUBJID</code>,<code>FAOBJ</code>,<code>AVAL</code>, <code>AVALC</code>, <code>FATESTCD</code> and <code>FATEST</code> are expected
for Input data set.</p>
</td></tr>
<tr><td><code id="derive_diam_to_sev_records_+3A_diam_code">diam_code</code></td>
<td>
<p>Diameter record filter
</p>
<p><em>Permitted Value</em>: A character vector or scalar.
</p>
<p>Helps to filter the diameter records to derive the severity records by
passing the <code>FATESTCD</code> value for diameter which is corresponding to the
specified events in <code>faobj_values</code>.</p>
</td></tr>
<tr><td><code id="derive_diam_to_sev_records_+3A_faobj_values">faobj_values</code></td>
<td>
<p>Event filter
</p>
<p><em>Permitted Value</em>: A character vector or Scalar.
</p>
<p>Helps to filter the events (<code>Redness</code> and <code>Swelling</code>) which has diameter records
to derive severity records by passing the events from <code>FAOBJ</code>.</p>
</td></tr>
<tr><td><code id="derive_diam_to_sev_records_+3A_testcd_sev">testcd_sev</code></td>
<td>
<p>To assign <code>FATESTCD</code> value for severity
</p>
<p><em>Permitted Value</em>: A character scalar
</p>
<p>Assign the value for <code>FATESTCD</code> variable to indicate the severity records.
Ignore the argument if you want to set the default value (<code>SEV</code>).</p>
</td></tr>
<tr><td><code id="derive_diam_to_sev_records_+3A_test_sev">test_sev</code></td>
<td>
<p><code>FATEST</code> Value for severity
</p>
<p><em>Permitted Value</em>: A Character scalar
</p>
<p>Assign the value for <code>FATEST</code> variable to indicate the severity records.
Ignore the argument if you want to set the default value.</p>
</td></tr>
<tr><td><code id="derive_diam_to_sev_records_+3A_none">none</code></td>
<td>
<p>Pass the lower limit for grade <code>"NONE"</code>
</p>
<p><em>Permitted Value:</em> A numeric vector
</p>
<p>The <code>none</code> and the following arguments (<code>mild</code>, <code>mode</code> and <code>sev</code>) will be
used for assigning the diameter limit to derive the <code>AVALC</code> (severity grade).
</p>
<p><em>Assign the lower limit to derive the Severity Grade (<code>AVALC</code>).</em><br />
<em>For Example: User passing 0 to <code>none</code> and 2 to <code>mild</code>, 0 will act as lower limit and 2 will act</em>
<em>as upper limit.</em><br />
</p>
<p><em>Note: Use the limit reference to pass the values to these arguments</em><br />
<em>Since the condition was coded like this,</em><br />
<em>NONE : <code>none</code> &lt; AVAL &lt;= <code>mild</code></em><br />
<em>MILD : <code>mild</code> &lt; AVAL &lt;= <code>mod</code></em><br />
<em>MODERATE : <code>mod</code> &lt; AVAL &lt;= <code>sev</code></em><br />
<em>SEVERE : <code>sev</code> &lt; AVAL</em><br />
<em>User should pass the values as numeric scalar. Refer the default values.</em></p>
</td></tr>
<tr><td><code id="derive_diam_to_sev_records_+3A_mild">mild</code></td>
<td>
<p>Pass the lower limit for grade <code>"MILD"</code>
</p>
<p><em>Permitted Value:</em> A numeric vector</p>
</td></tr>
<tr><td><code id="derive_diam_to_sev_records_+3A_mod">mod</code></td>
<td>
<p>Pass the lower limit for grade <code>"MODERATE"</code>
</p>
<p><em>Permitted Value:</em> A numeric vector</p>
</td></tr>
<tr><td><code id="derive_diam_to_sev_records_+3A_sev">sev</code></td>
<td>
<p>Pass the lower limit for grade <code>"SEVERE"</code>
</p>
<p><em>Permitted Value:</em> A numeric vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The Input data with the new severity records for Redness and swelling which
is specified in <code>faobj_values</code> and AVAL, AVALC will be derived and <code>FATESTCD</code>,
<code>FATEST</code> will be changed as per the values.
</p>


<h3>Note</h3>

<p>Basically, This function will derive and create the severity records from the
diameter record for the particular events specified in the <code>faobj_values</code> that user wants.
If you want to derive the Severity from diameter, even though you have the severity in SDTM data.
This function will re-derive the severity and remove the derived SDTM severity records.
</p>


<h3>Author(s)</h3>

<p>Arjun Rubalingam
</p>


<h3>See Also</h3>

<p>Other der_rec: 
<code><a href="#topic+derive_fever_records">derive_fever_records</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
library(admiral)
library(tibble)

input &lt;- tribble(
  ~USUBJID, ~FAOBJ, ~AVAL, ~AVALC, ~ATPTREF, ~FATEST, ~FATESTCD,
  "XYZ1001", "REDNESS", 7.5, "7.5", "VACCINATION 1", "Diameter", "DIAMETER",
  "XYZ1001", "REDNESS", 3.5, "3.5", "VACCINATION 1", "Diameter", "DIAMETER",
  "XYZ1001", "REDNESS", 2, "2", "VACCINATION 1", "Diameter", "DIAMETER",
  "XYZ1001", "REDNESS", 1.8, "1.8", "VACCINATION 1", "Diameter", "DIAMETER",
  "XYZ1001", "REDNESS", 1.4, "1.4", "VACCINATION 1", "Diameter", "DIAMETER",
  "XYZ1002", "REDNESS", 11.1, "11.1", "VACCINATION 2", "Diameter", "DIAMETER",
  "XYZ1002", "REDNESS", 7.4, "7.4", "VACCINATION 2", "Diameter", "DIAMETER",
  "XYZ1002", "REDNESS", 6, "6", "VACCINATION 2", "Diameter", "DIAMETER",
  "XYZ1002", "REDNESS", 2.1, "2.1", "VACCINATION 2", "Diameter", "DIAMETER",
  "XYZ1002", "REDNESS", 1.1, "1.1", "VACCINATION 2", "Diameter", "DIAMETER",
  "XYZ1001", "SWELLING", 5.5, "5.5", "VACCINATION 1", "Diameter", "DIAMETER",
  "XYZ1001", "SWELLING", 2.5, "2.5", "VACCINATION 1", "Diameter", "DIAMETER",
  "XYZ1001", "SWELLING", 2, "2", "VACCINATION 1", "Diameter", "DIAMETER",
  "XYZ1001", "SWELLING", 1.8, "1.8", "VACCINATION 1", "Diameter", "DIAMETER",
  "XYZ1001", "SWELLING", 1.4, "1.4", "VACCINATION 1", "Diameter", "DIAMETER",
  "XYZ1002", "SWELLING", 10.1, "10.1", "VACCINATION 2", "Diameter", "DIAMETER",
  "XYZ1002", "SWELLING", 7.1, "7.1", "VACCINATION 2", "Diameter", "DIAMETER",
  "XYZ1002", "SWELLING", 5, "5", "VACCINATION 2", "Diameter", "DIAMETER",
  "XYZ1002", "SWELLING", 1.8, "1.8", "VACCINATION 2", "Diameter", "DIAMETER",
  "XYZ1002", "SWELLING", 1.4, "1.4", "VACCINATION 2", "Diameter", "DIAMETER"
)

derive_diam_to_sev_records(
  dataset = input,
  faobj_values = c("REDNESS", "SWELLING"),
  diam_code = "DIAMETER",
  testcd_sev = "SEV",
  test_sev = "Severity"
)

</code></pre>

<hr>
<h2 id='derive_fever_records'>Creating Fever Records</h2><span id='topic+derive_fever_records'></span>

<h3>Description</h3>

<p>Creating Fever records from the <code>VS</code> SDTM dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>derive_fever_records(dataset, dataset_source, filter_source, faobj)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="derive_fever_records_+3A_dataset">dataset</code></td>
<td>
<p>Input Dataset
Input dataset is expected to have variables <code>USUBJID</code> and <code>FAOBJ</code>.</p>
</td></tr>
<tr><td><code id="derive_fever_records_+3A_dataset_source">dataset_source</code></td>
<td>
<p>Source Dataset - SDTM Vital Sign (<code>VS</code>)
Source Dataset (VS) is expected to have temperature records.</p>
</td></tr>
<tr><td><code id="derive_fever_records_+3A_filter_source">filter_source</code></td>
<td>
<p>Filter condition for Source dataset.</p>
</td></tr>
<tr><td><code id="derive_fever_records_+3A_faobj">faobj</code></td>
<td>
<p>FAOBJ Value for fever records in output dataset.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Check if <code>FAOBJ = FEVER</code> record is present in input dataset,
if not then use <code>SDTM.VS</code> to get FEVER records.
With temperature values from <code>VSSTRESN</code> we decide if FEVER has
occurred or not (<code>FAORRES = "Y"/"N"</code>).
Since records are derived, these FEVER records are considered <code>DTYPE = "DERIVED"</code>
if <code>FAOBJ = FEVER</code> record is present, then input dataset will be made as output with no further
analysis.
</p>
<p>The temperature value greater or equal 38Â° C will be considered as FEVER records.
</p>


<h3>Value</h3>

<p>The output dataset contains records with <code>FATESTCD = "OCCUR"</code> for
<code>FAOBJ = FEVER</code> records.
</p>


<h3>Author(s)</h3>

<p>Dhivya Kanagaraj
</p>


<h3>See Also</h3>

<p>Other der_rec: 
<code><a href="#topic+derive_diam_to_sev_records">derive_diam_to_sev_records</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(tibble)
library(dplyr)
library(admiraldev)
library(admiral)

input &lt;- tribble(
  ~USUBJID, ~FAOBJ, ~FATESTCD, ~FACAT, ~FASCAT, ~FATPT,
  "ABC101", "REDNESS", "SEV", "REACTOGENICITY", "ADMINISTRATIVE SITE", "DAY 1",
  "ABC101", "REDNESS", "DIAM", "REACTOGENICITY", "ADMINISTRATIVE SITE", "DAY 2",
  "ABC101", "VOMITTING", "SEV", "REACTOGENICITY", "SYSTEMIC", "DAY 1",
  "ABC101", "FATIQUE", "OCCUR", "REACTOGENICITY", "SYSTEMIC", "DAY 3"
)

vs &lt;- tribble(
  ~USUBJID, ~VSTESTCD, ~VSCAT, ~VSSTRESN, ~VSSTRESU, ~VSTPT,
  "ABC101", "TEMP", "REACTOGENICITY", 38.3, "C", "DAY 1",
  "ABC101", "TEMP", "REACTOGENICITY", 38, "C", "DAY 2",
  "ABC101", "TEMP", "REACTOGENICITY", 36, "C", "DAY 3",
  "ABC101", "TEMP", "REACTOGENICITY", 37, "C", "DAY 4",
  "ABC101", "TEMP", "REACTOGENICITY", 39, "C", "DAY 5",
  "ABC101", "TEMP", "REACTOGENICITY", 39, "C", "DAY 6",
  "ABC101", "TEMP", "REACTOGENICITY", 38, "C", "DAY 7"
)

derive_fever_records(
  dataset = input,
  dataset_source = vs,
  filter_source = VSCAT == "REACTOGENICITY" &amp; VSTESTCD == "TEMP",
  faobj = "FEVER"
)

</code></pre>

<hr>
<h2 id='derive_var_aval_adis'>Derive AVAL variable for ADIS ADaM domain</h2><span id='topic+derive_var_aval_adis'></span>

<h3>Description</h3>

<p>Derive <code>AVAL</code> variable for Laboratory Immunology Data ADaM domain.
A common rule has been decided for its derivation, based on <code>ISLLOQ</code>, <code>ISULOQ</code> and <code>ISORRES</code>
when both <code>ISLLOQ</code> and <code>ISULOQ</code> are present.
If <code>ISULOQ</code> is not present, the variables used are <code>ISLLOQ</code> and <code>ISORRES</code>.
Please, refers to arguments description for additional details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>derive_var_aval_adis(
  dataset,
  lower_rule,
  middle_rule,
  upper_rule = NULL,
  round = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="derive_var_aval_adis_+3A_dataset">dataset</code></td>
<td>
<p>Input dataset.</p>
</td></tr>
<tr><td><code id="derive_var_aval_adis_+3A_lower_rule">lower_rule</code></td>
<td>
<p>Derivation rule when <code>ISSTRESN</code> value is below <code>ISLLOQ</code>.
When <code>ISSTRESN</code> is missing, the inequality in <code>ISORRES</code> is checked for the derivation.</p>
</td></tr>
<tr><td><code id="derive_var_aval_adis_+3A_middle_rule">middle_rule</code></td>
<td>
<p>Derivation rule when <code>ISSTRESN</code> value is greater than <code>ISLLOQ</code> and
lower than <code>ISULOQ</code>.
If <code>ISULOQ</code> is not present, derivation rule when <code>ISSTRESN</code> is greater than <code>ISLLOQ</code>.
When <code>ISSTRESN</code> is missing, the inequality in <code>ISORRES</code> is checked for the derivation.</p>
</td></tr>
<tr><td><code id="derive_var_aval_adis_+3A_upper_rule">upper_rule</code></td>
<td>
<p>Derivation rule when <code>ISSTRESN</code> value is greater than <code>ISULOQ</code>.
This is an optional argument since <code>ISULOQ</code> may not be present.
When <code>ISSTRESN</code> is missing, the inequality in <code>ISORRES</code>. is checked for the derivation.
Default value is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="derive_var_aval_adis_+3A_round">round</code></td>
<td>
<p>Rounding for <code>AVAL</code> variable. An integer argument which specifies
the number of decimals displayed.
Default value is <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Dataset with <code>AVAL</code> variable derived.
</p>


<h3>Author(s)</h3>

<p>Federico Baratin
</p>


<h3>See Also</h3>

<p>Other der_var: 
<code><a href="#topic+derive_vars_crit">derive_vars_crit</a>()</code>,
<code><a href="#topic+derive_vars_event_flag">derive_vars_event_flag</a>()</code>,
<code><a href="#topic+derive_vars_max_flag">derive_vars_max_flag</a>()</code>,
<code><a href="#topic+derive_vars_merged_vaccine">derive_vars_merged_vaccine</a>()</code>,
<code><a href="#topic+derive_vars_params">derive_vars_params</a>()</code>,
<code><a href="#topic+derive_vars_vaxdt">derive_vars_vaxdt</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(tibble)
library(admiral)
library(admiraldev)
library(dplyr)
library(rlang)

input &lt;- tribble(
  ~USUBJID, ~AVISITN, ~PARAMCD, ~PARAM, ~ISORRES, ~ISSTRESN, ~ISLLOQ, ~ISULOQ,
  "ABC-1001", 10, "J0033VN", "J0033VN Antibody", NA, NA, 2, 100,
  "ABC-1001", 10, "I0019NT", "I0019NT Antibody", "3", 3.0, 4, 200,
  "ABC-1001", 10, "M0019LN", "M0019LN Antibody", "&gt;150", NA, 8, 150,
  "ABC-1001", 10, "R0003MA", "R0003MA Antibody", "140.5", 140.5, 4, 120,
  "ABC-1001", 30, "J0033VN", "J0033VN Antibody", "2", 2.0, 2, 100,
  "ABC-1001", 30, "I0019NT", "I0019NT Antibody", NA, NA, 4, 200,
  "ABC-1001", 30, "M0019LN", "M0019LN Antibody", NA, NA, 8, 150,
  "ABC-1001", 30, "R0003MA", "R0003MA Antibody", "98.2", 98.2, 4, 120,
  "ABC-1001", 10, "J0033VNL", "LOG10 (J0033VN Antibody)", NA, NA, 2, 100,
  "ABC-1001", 10, "I0019NTL", "LOG10 (I0019NT Antibody)", "3", 3.0, 4, 200,
  "ABC-1001", 10, "M0019LNL", "LOG10 (M0019LN Antibody)", "&gt;150", NA, 8, 150,
  "ABC-1001", 10, "R0003MAL", "LOG10 (R0003MA Antibody)", "140.5", 140.5, 4, 120,
  "ABC-1001", 30, "J0033VNL", "LOG10 (J0033VN Antibody)", "2", 2.0, 2, 100,
  "ABC-1001", 30, "I0019NTL", "LOG10 (I0019NT Antibody)", NA, NA, 4, 200,
  "ABC-1001", 30, "M0019LNL", "LOG10 (M0019LN Antibody)", NA, NA, 8, 150,
  "ABC-1001", 30, "R0003MAL", "LOG10 (R0003MA Antibody)", "98.2", 98.2, 4, 120,
  "ABC-1002", 10, "J0033VN", "J0033VN Antibody", "3", 3.0, 2, 100,
  "ABC-1002", 10, "I0019NT", "I0019NT Antibody", NA, NA, 4, 200,
  "ABC-1002", 10, "M0019LN", "M0019LN Antibody", NA, NA, 8, 150,
  "ABC-1002", 10, "R0003MA", "R0003MA Antibody", "48.9", 48.9, 4, 120,
  "ABC-1002", 30, "J0033VN", "J0033VN Antibody", NA, NA, 2, 100,
  "ABC-1002", 30, "I0019NT", "I0019NT Antibody", NA, NA, 4, 200,
  "ABC-1002", 30, "M0019LN", "M0019LN Antibody", "5", 5.0, 8, 150,
  "ABC-1002", 30, "R0003MA", "R0003MA Antibody", "228.1", 228.1, 4, 120
)

derive_var_aval_adis(
  dataset = input,
  lower_rule = ISLLOQ / 2,
  middle_rule = ISSTRESN,
  upper_rule = ISULOQ,
  round = 2
)

</code></pre>

<hr>
<h2 id='derive_vars_crit'>Derive Analysis Criterion Evaluation Variables</h2><span id='topic+derive_vars_crit'></span>

<h3>Description</h3>

<p>Derive analysis criterion evaluation result variable, paired with character
and numeric flags.
This function allows also the derivation of a CRIT like variable with a
different name (ex: <code>ANL01FL</code>), without generating additional numeric (ex: <code>ANL01FN</code>)
and character label (ex: <code>ANL01</code>) variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>derive_vars_crit(dataset, prefix, crit_label, condition, criterion)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="derive_vars_crit_+3A_dataset">dataset</code></td>
<td>
<p>Input dataset</p>
</td></tr>
<tr><td><code id="derive_vars_crit_+3A_prefix">prefix</code></td>
<td>
<p>Variables to add
</p>
<p>The analysis criterion evaluation variable's name (i.e., <code>CRIT1</code>)
This name is also used in order to create both character and numeric
flags variables (i.e., <code>CRIT1FL</code> and <code>CRIT1FN</code>).
If the name does not contain CRIT wording, it generates a flag variable
(ex: <code>ANL01FL</code>) whose logic is equals to <code>CRIT1</code> variable, without generating
additional numeric (ex: <code>ANL01FN</code>) and character (<code>ANL01</code>) variables.</p>
</td></tr>
<tr><td><code id="derive_vars_crit_+3A_crit_label">crit_label</code></td>
<td>
<p>Criterion value
</p>
<p>A text description defining the condition necessary to satisfy the presence
of the criterion</p>
</td></tr>
<tr><td><code id="derive_vars_crit_+3A_condition">condition</code></td>
<td>
<p>Condition for selecting a subset
</p>
<p>The condition specified in order to select a subset from the input dataset
in which the rule is applied.</p>
</td></tr>
<tr><td><code id="derive_vars_crit_+3A_criterion">criterion</code></td>
<td>
<p>Criterion rule
</p>
<p>The criterion that each selected row satisfies or not.
Returns <code>Y</code> or <code>N</code> for character variable and <code>1</code> or <code>0</code> for numeric variable
if the criterion is met or not, respectively.
Returns <code>NA</code> for not selected rows (not taken into account from condition)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Dataset with criterion variables
</p>


<h3>Author(s)</h3>

<p>Federico Baratin
</p>


<h3>See Also</h3>

<p>Other der_var: 
<code><a href="#topic+derive_var_aval_adis">derive_var_aval_adis</a>()</code>,
<code><a href="#topic+derive_vars_event_flag">derive_vars_event_flag</a>()</code>,
<code><a href="#topic+derive_vars_max_flag">derive_vars_max_flag</a>()</code>,
<code><a href="#topic+derive_vars_merged_vaccine">derive_vars_merged_vaccine</a>()</code>,
<code><a href="#topic+derive_vars_params">derive_vars_params</a>()</code>,
<code><a href="#topic+derive_vars_vaxdt">derive_vars_vaxdt</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(tibble)
library(admiral)
library(admiraldev)
library(dplyr)

input &lt;- tribble(
  ~USUBJID, ~AVISITN, ~ISCAT, ~PARAMCD, ~AVAL, ~ISLLOQ,
  "999999-000001", 10, "IMMUNOLOGY", "J0033VN", 2, 4,
  "999999-000001", 10, "IMMUNOLOGY", "I0019NT", 3, 6,
  "999999-000001", 10, "IMMUNOLOGY", "M0019LN", 4, 4,
  "999999-000001", 10, "IMMUNOLOGY", "R0003MA", 3, 6,
  "999999-000001", 30, "IMMUNOLOGY", "J0033VN", 60, 4,
  "999999-000001", 30, "IMMUNOLOGY", "I0019NT", 567, 6,
  "999999-000001", 30, "IMMUNOLOGY", "M0019LN", 659, 4,
  "999999-000001", 30, "IMMUNOLOGY", "R0003MA", 250, 6,
  "999999-000002", 10, "IMMUNOLOGY", "J0033VN", 2, 4,
  "999999-000002", 10, "IMMUNOLOGY", "I0019NT", 7, 6,
  "999999-000002", 10, "IMMUNOLOGY", "M0019LN", 5, 4,
  "999999-000002", 10, "IMMUNOLOGY", "R0003MA", 3, 6,
  "999999-000002", 30, "IMMUNOLOGY", "J0033VN", 55, 4,
  "999999-000002", 30, "IMMUNOLOGY", "I0019NT", 89, 6,
  "999999-000002", 30, "IMMUNOLOGY", "M0019LN", 990, 4,
  "999999-000002", 30, "IMMUNOLOGY", "R0003MA", 340, 6,
  "999999-000003", 10, "IMMUNOLOGY", "J0033VN", 3, 4,
  "999999-000003", 10, "IMMUNOLOGY", "I0019NT", 6, 6,
  "999999-000003", 10, "IMMUNOLOGY", "M0019LN", 2, 4,
  "999999-000003", 10, "IMMUNOLOGY", "R0003MA", 2, 6,
  "999999-000003", 30, "IMMUNOLOGY", "J0033VN", 45, 4,
  "999999-000003", 30, "IMMUNOLOGY", "I0019NT", 381, 6,
  "999999-000003", 30, "IMMUNOLOGY", "M0019LN", 542, 4,
  "999999-000003", 30, "IMMUNOLOGY", "R0003MA", NA, 6
)


derive_vars_crit(
  dataset = input,
  prefix = "CRIT1",
  crit_label = "Titer &gt;= ISLLOQ",
  condition = !is.na(AVAL) &amp; !is.na(ISLLOQ),
  criterion = AVAL &gt;= ISLLOQ
)

</code></pre>

<hr>
<h2 id='derive_vars_event_flag'>Adds Flag Variables for an Occurred Event .</h2><span id='topic+derive_vars_event_flag'></span>

<h3>Description</h3>

<p>Creates two flag variables for the event occurred, one for the event occurred
within each by group and one to flag if the event occurred or not
for each day.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>derive_vars_event_flag(
  dataset,
  by_vars,
  aval_cutoff,
  new_var1 = NULL,
  new_var2 = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="derive_vars_event_flag_+3A_dataset">dataset</code></td>
<td>
<p>Input dataset
</p>
<p>The variables specified by the <code>by_vars</code> argument are
expected.</p>
</td></tr>
<tr><td><code id="derive_vars_event_flag_+3A_by_vars">by_vars</code></td>
<td>
<p>Grouping variables
</p>
<p>The variables to be considered for grouping for creating a new
variable <code>new_var1</code></p>
</td></tr>
<tr><td><code id="derive_vars_event_flag_+3A_aval_cutoff">aval_cutoff</code></td>
<td>
<p>Cutoff value for <code>AVAL</code>
</p>
<p>For <code>TESTCD</code> code list values based on diameter, if <code>AVAL</code> is greater than
<code>aval_cutoff</code> then the event is considered to have occurred. For example,
if <code>aval_cutoff</code> = 2.5 then the subjects with <code>AVAL</code> value greater than
2.5 are considered.</p>
</td></tr>
<tr><td><code id="derive_vars_event_flag_+3A_new_var1">new_var1</code></td>
<td>
<p>Name of the new flag variable 1
</p>
<div class="sourceCode"><pre>A new flag variable will be created with values `Y` or `N`.
If the event is occurred at least once during a observation period for
a subject then the new variable will be flagged as `Y` otherwise `N`.
</pre></div></td></tr>
<tr><td><code id="derive_vars_event_flag_+3A_new_var2">new_var2</code></td>
<td>
<p>Name of the new flag variable 2.
</p>
<div class="sourceCode"><pre>A new flag variable will be created with values `Y` or `N`.
If the event is occurred on the particular day then the new variable will
be flagged as `Y` otherwise `N`.
</pre></div></td></tr>
</table>


<h3>Details</h3>

<p>The event is considered to have occurred if <code>AVAL</code> is greater than the <code>aval_cutoff</code>
or <code>AVALC</code> has values <code>Y</code>, <code>MILD</code>, <code>MODERATE</code>, <code>SEVERE</code>. In all other cases, the
event is not considered to have occurred.
</p>
<p>The names for the new flag variables created will be sponsor specific.
</p>
<p>For the <code>new_var1</code> it will flag all observations as &quot;Y&quot; within the by group
if the event occurred at least once during observation period. If the event
is not at all occurred during the observation period then all the
observations within by group will be flagged as &quot;N&quot;.
</p>
<p>For derived maximum records in <code>FATESTCD</code> , the <code>new_var2</code> will be
set to <code>NA</code>.
</p>
<p>If both <code>new_var1</code> and <code>new_var2</code> are <code>NULL</code>, this function will return the
input dataset as output dataset.
</p>


<h3>Value</h3>

<p>The dataset with the flag variables added to it.
</p>


<h3>See Also</h3>

<p>Other der_var: 
<code><a href="#topic+derive_var_aval_adis">derive_var_aval_adis</a>()</code>,
<code><a href="#topic+derive_vars_crit">derive_vars_crit</a>()</code>,
<code><a href="#topic+derive_vars_max_flag">derive_vars_max_flag</a>()</code>,
<code><a href="#topic+derive_vars_merged_vaccine">derive_vars_merged_vaccine</a>()</code>,
<code><a href="#topic+derive_vars_params">derive_vars_params</a>()</code>,
<code><a href="#topic+derive_vars_vaxdt">derive_vars_vaxdt</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(tibble)
library(admiral)
library(dplyr)

input &lt;- tribble(
  ~USUBJID, ~FAOBJ, ~ATPTREF, ~AVAL, ~AVALC, ~FATEST, ~FATESTCD, ~FASCAT,
  "1", "REDNESS", "VAC1", 3.5, "3.5", "Diameter", "DIAMETER", "ADMIN-SITE",
  "1", "REDNESS", "VAC1", 4.5, "4.5", "Diameter", "DIAMETER", "ADMIN-SITE",
  "1", "REDNESS", "VAC1", 1.5, "1.5", "Diameter", "DIAMETER", "ADMIN-SITE",
  "1", "REDNESS", "VAC1", 4.5, "4.5", "Diameter", "DIAMETER", "ADMIN-SITE",
  "1", "FATIGUE", "VAC1", 1, "MILD", "Severity", "SEV", "SYSTEMIC",
  "1", "FATIGUE", "VAC1", 2, "MODERATE", "Severity", "SEV", "SYSTEMIC",
  "1", "FATIGUE", "VAC1", 0, "NONE", "Severity", "SEV", "SYSTEMIC",
  "1", "FATIGUE", "VAC1", 2, "MODERATE", "Severity", "SEV", "SYSTEMIC",
  "1", "REDNESS", "VAC2", 6.5, "6.5", "Diameter", "DIAMETER", "ADMIN-SITE",
  "1", "REDNESS", "VAC2", 7.5, "7.5", "Diameter", "DIAMETER", "ADMIN-SITE",
  "1", "REDNESS", "VAC2", 2.5, "2.5", "Diameter", "DIAMETER", "ADMIN-SITE",
  "1", "REDNESS", "VAC2", 7.5, "7.5", "Diameter", "DIAMETER", "ADMIN-SITE",
  "1", "FATIGUE", "VAC2", 1, "MILD", "Severity", "SEV", "SYSTEMIC",
  "1", "FATIGUE", "VAC2", 2, "MODERATE", "Severity", "SEV", "SYSTEMIC",
  "1", "FATIGUE", "VAC2", 0, "NONE", "Severity", "SEV", "SYSTEMIC",
  "1", "FATIGUE", "VAC2", 2, "MODERATE", "Severity", "SEV", "SYSTEMIC",
)

derive_vars_event_flag(
  dataset = input,
  by_vars = exprs(USUBJID, FAOBJ, ATPTREF),
  aval_cutoff = 2.5,
  new_var1 = EVENTL,
  new_var2 = EVENTDL
)

</code></pre>

<hr>
<h2 id='derive_vars_max_flag'>Creating ANLxxFL Variables To Flag The Maximum Records</h2><span id='topic+derive_vars_max_flag'></span>

<h3>Description</h3>

<p>Adds Flags variables for maximum record per subject per event for overall
and per vaccination
</p>


<h3>Usage</h3>

<pre><code class='language-R'>derive_vars_max_flag(dataset, flag1 = "ANL01FL", flag2 = "ANL02FL")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="derive_vars_max_flag_+3A_dataset">dataset</code></td>
<td>
<p>Input dataset</p>
</td></tr>
<tr><td><code id="derive_vars_max_flag_+3A_flag1">flag1</code></td>
<td>
<p>Flags the maximum record per subject per event per
vaccination.
<em>Permitted value: Any variable name as a string or NULL</em>.
</p>
<p><code>NULL</code> denotes not to create the flag</p>
</td></tr>
<tr><td><code id="derive_vars_max_flag_+3A_flag2">flag2</code></td>
<td>
<p>Flags the maximum record per subject per event for Overall
</p>
<p><em>Permitted value: Any variable name as a string or NULL</em>.
</p>
<p><code>NULL</code> denotes not to create the flag</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This utility flags the maximum record per subject per event
per vaccination/Overall
If both parameters <code>flag1</code> &amp; <code>flag2</code> are passed as <code>NULL</code> then
utility will throw error and flags will not be created.
</p>


<h3>Value</h3>

<p>The output dataframe with <code>ANLxxFL</code> flags
</p>


<h3>Author(s)</h3>

<p>Dhivya Kanagaraj
</p>


<h3>See Also</h3>

<p>Other der_var: 
<code><a href="#topic+derive_var_aval_adis">derive_var_aval_adis</a>()</code>,
<code><a href="#topic+derive_vars_crit">derive_vars_crit</a>()</code>,
<code><a href="#topic+derive_vars_event_flag">derive_vars_event_flag</a>()</code>,
<code><a href="#topic+derive_vars_merged_vaccine">derive_vars_merged_vaccine</a>()</code>,
<code><a href="#topic+derive_vars_params">derive_vars_params</a>()</code>,
<code><a href="#topic+derive_vars_vaxdt">derive_vars_vaxdt</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
library(admiraldev)
library(admiral)
library(tibble)

input &lt;- tribble(
  ~USUBJID, ~FAOBJ, ~FATESTCD, ~FATPTREF, ~AVAL, ~FATPT, ~PARAMCD,
  "ABC101", "REDNESS", "DIAMETER", "VACC 1", 10, "DAY 1", "DIARE",
  "ABC101", "REDNESS", "DIAMETER", "VACC 1", 7, "DAY 2", "DIARE",
  "ABC101", "REDNESS", "DIAMETER", "VACC 2", 3, "DAY 1", "DIARE",
  "ABC101", "REDNESS", "DIAMETER", "VACC 2", 8, "DAY 2", "DIARE",
  "ABC101", "FATIQUE", "SEV", "VACC 1", 1, "DAY 1", "SEVFAT",
  "ABC101", "FATIQUE", "SEV", "VACC 1", 1, "DAY 2", "SEVFAT",
  "ABC101", "FATIQUE", "SEV", "VACC 2", 2, "DAY 1", "SEVFAT",
  "ABC101", "FATIQUE", "SEV", "VACC 2", 3, "DAY 2", "SEVFAT"
)

derive_vars_max_flag(
  dataset = input,
  flag1 = "ANL01FL",
  flag2 = "ANL02FL"
)
derive_vars_max_flag(
  dataset = input,
  flag1 = NULL,
  flag2 = "ANL02FL"
)
derive_vars_max_flag(
  dataset = input,
  flag1 = "ANL01FL",
  flag2 = NULL
)

</code></pre>

<hr>
<h2 id='derive_vars_merged_vaccine'>Add New Variable(s) to the Input dataset Based on Variables from Another dataset</h2><span id='topic+derive_vars_merged_vaccine'></span>

<h3>Description</h3>

<p>Add new variables to the input dataset based on variables from another dataset.
The variables to be added to the output dataset will be based on input variables
passed on <code>ex_vars</code> argument.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>derive_vars_merged_vaccine(
  dataset,
  dataset_ex,
  by_vars_sys,
  by_vars_adms,
  dataset_supp = NULL,
  dataset_suppex = NULL,
  ex_vars
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="derive_vars_merged_vaccine_+3A_dataset">dataset</code></td>
<td>
<p>Input dataset
</p>
<p>The variables specified by the <code>by_vars</code> argument inside the
<code>derive_vars_merged</code>are expected.</p>
</td></tr>
<tr><td><code id="derive_vars_merged_vaccine_+3A_dataset_ex">dataset_ex</code></td>
<td>
<p>EX dataset to merge with the input dataset.
</p>
<p>The variables specified by the <code>ex_vars</code> argument are expected.</p>
</td></tr>
<tr><td><code id="derive_vars_merged_vaccine_+3A_by_vars_sys">by_vars_sys</code></td>
<td>
<p>Grouping variables for systemic events.</p>
</td></tr>
<tr><td><code id="derive_vars_merged_vaccine_+3A_by_vars_adms">by_vars_adms</code></td>
<td>
<p>Grouping variables for administration site events.</p>
</td></tr>
<tr><td><code id="derive_vars_merged_vaccine_+3A_dataset_supp">dataset_supp</code></td>
<td>
<p>Supplementary input dataset
</p>
<p>By default <code>dataset_supp</code> will be <code>NULL</code>, user has to provide
supplementary dataset to merge it back with original input dataset
if they have supplementary dataset in their case.</p>
</td></tr>
<tr><td><code id="derive_vars_merged_vaccine_+3A_dataset_suppex">dataset_suppex</code></td>
<td>
<p>Supplementary EX dataset
</p>
<p>By default <code>dataset_suppex</code> will be <code>NULL</code>, user has to provide
supplementary dataset to merge it back with original <code>EX</code> dataset
if they have supplementary dataset in their case.</p>
</td></tr>
<tr><td><code id="derive_vars_merged_vaccine_+3A_ex_vars">ex_vars</code></td>
<td>
<p>Variables to be added to the output dataset from EX dataset</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The input dataset will be merged with <code>EX</code> dataset for &quot;ADMINISTRATION SITE&quot; and
&quot;SYSTEMIC&quot; categories separately and these datasets will be bound together as
the final output dataset.
</p>
<p>This function is intended to add only <code>EX</code> variables to the input dataset and user
is expected to handle if any pre-processing is required.
</p>
<p>Only the variables passed to the <code>ex_vars</code> will be added in the output dataset
</p>
<p>If the input dataset has multiple vaccination for a subject at same visit
then this function will not merge ex dataset and will return only the input
dataset merged with its supplementary dataset.
</p>


<h3>Value</h3>

<p>The dataset with variables added from the EX dataset.
</p>


<h3>Author(s)</h3>

<p>Vikram S
</p>


<h3>See Also</h3>

<p>Other der_var: 
<code><a href="#topic+derive_var_aval_adis">derive_var_aval_adis</a>()</code>,
<code><a href="#topic+derive_vars_crit">derive_vars_crit</a>()</code>,
<code><a href="#topic+derive_vars_event_flag">derive_vars_event_flag</a>()</code>,
<code><a href="#topic+derive_vars_max_flag">derive_vars_max_flag</a>()</code>,
<code><a href="#topic+derive_vars_params">derive_vars_params</a>()</code>,
<code><a href="#topic+derive_vars_vaxdt">derive_vars_vaxdt</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(tibble)
library(admiral)
library(dplyr)
library(pharmaversesdtm)

derive_vars_merged_vaccine(
  dataset = face_vaccine,
  dataset_ex = ex_vaccine,
  dataset_supp = NULL,
  dataset_suppex = NULL,
  by_vars_sys = exprs(USUBJID, FATPTREF = EXLNKGRP),
  by_vars_adms = exprs(USUBJID, FATPTREF = EXLNKGRP, FALOC = EXLOC, FALAT = EXLAT),
  ex_vars = exprs(EXTRT, EXDOSE, EXDOSU, EXSTDTC, EXENDTC)
) %&gt;%
  select(USUBJID, FATPTREF, FALOC, FALAT, EXTRT, EXDOSE, EXDOSU, EXSTDTC, EXENDTC) %&gt;%
  head(10)

derive_vars_merged_vaccine(
  dataset = face_vaccine,
  dataset_ex = ex_vaccine,
  dataset_supp = suppface_vaccine,
  dataset_suppex = suppex_vaccine,
  by_vars_sys = exprs(USUBJID, FATPTREF = EXLNKGRP),
  by_vars_adms = exprs(USUBJID, FATPTREF = EXLNKGRP, FALOC = EXLOC, FALAT = EXLAT),
  ex_vars = exprs(EXTRT, EXDOSE, EXDOSU, EXSTDTC, EXENDTC)
) %&gt;%
  filter(CLTYP == "DAIRY") %&gt;%
  select(USUBJID, FATPTREF, CLTYP, EXTRT, EXDOSE, EXDOSU, EXSTDTC, EXENDTC)
</code></pre>

<hr>
<h2 id='derive_vars_params'>Assigning Parameter Variables</h2><span id='topic+derive_vars_params'></span>

<h3>Description</h3>

<p>Creating <code>PARAMCD</code> from lookup dataset and assigning <code>PARAM</code>,<code>PARAMN</code>,<code>PARCAT1</code>,
<code>PARCAT2</code> variables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>derive_vars_params(dataset, lookup_dataset, merge_vars)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="derive_vars_params_+3A_dataset">dataset</code></td>
<td>
<p>Input dataset
Input dataset is expected to have variables <code>USUBJID</code>,<code>FAOBJ</code>,
<code>FACAT</code>, <code>FATESTCD</code> and <code>FATEST</code></p>
</td></tr>
<tr><td><code id="derive_vars_params_+3A_lookup_dataset">lookup_dataset</code></td>
<td>
<p>lookup dataset containing <code>PARAMCD</code> values for every
unique <code>FATESTCD</code> and <code>FAOBJ</code>
lookup dataset is expected to have variables <code>FATEST</code>, <code>PARAMCD</code>,
<code>FATESTCD</code>, <code>FAOBJ</code> and one entry for every unique
<code>FATESTCD</code> and <code>FAOBJ</code></p>
</td></tr>
<tr><td><code id="derive_vars_params_+3A_merge_vars">merge_vars</code></td>
<td>
<p>List of Variables need to be merged from lookup dataset</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A lookup dataset is required with <code>PARAMCD</code> values for every combination
of <code>FATEST</code> &amp; <code>FAOBJ</code>.
<code>PARAMCD</code> <code>PARAMN</code> <code>PARAMN</code> <code>PARCAT1</code> <code>PARCAT2</code> values can be assigned
from lookup dataset.
</p>
<div class="sourceCode"><pre> if `PARAMN` not assigned in lookup dataset then
 `PARAMN` is assigned with a unique number for every unique PARAM value.
 if `PARAM` value not assigned in lookup dataset then
 `PARAM` value is a combination of `FAOBJ` `FATEST` `FASTRESU` `FALOC`
 `FADIR` `FALAT`
 if `PARCAT1` value not assigned in lookup dataset then
 `PARCAT1` is assigned as `FACAT`
 if `PARCAT2` value not assigned in lookup dataset then
 `PARCAT2` is assigned as `FASCAT`
</pre></div>


<h3>Value</h3>

<p>The output dataset contains all observations and variables of the
input dataset along with <code>PARAM</code>,<code>PARAMCD</code>,<code>PARCAT1</code>,<code>PARCAT2</code>,<code>PARAMN</code>
</p>


<h3>Author(s)</h3>

<p>Dhivya Kanagaraj
</p>


<h3>See Also</h3>

<p>Other der_var: 
<code><a href="#topic+derive_var_aval_adis">derive_var_aval_adis</a>()</code>,
<code><a href="#topic+derive_vars_crit">derive_vars_crit</a>()</code>,
<code><a href="#topic+derive_vars_event_flag">derive_vars_event_flag</a>()</code>,
<code><a href="#topic+derive_vars_max_flag">derive_vars_max_flag</a>()</code>,
<code><a href="#topic+derive_vars_merged_vaccine">derive_vars_merged_vaccine</a>()</code>,
<code><a href="#topic+derive_vars_vaxdt">derive_vars_vaxdt</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(admiral)
library(tibble)
library(dplyr)

lookup_dataset &lt;- tibble::tribble(
  ~FATESTCD, ~PARAMCD, ~PARAMN, ~FATEST, ~FAOBJ,
  "SEV", "SEVREDN", 1, "Severity", "Redness",
  "DIAMETER", "DIARE", 2, "Diameter", "Redness",
  "MAXDIAM", "MDIRE", 3, "Maximum Diameter cm", "Redness",
  "MAXTEMP", "MAXTEMP", 4, "Maximum Temperature", "Fever",
  "OCCUR", "OCFEVER", 5, "Occurrence Indicator", "Fever",
  "OCCUR", "OCERYTH", 6, "Occurrence Indicator", "Erythema",
  "SEV", "SEVPAIN", 7, "Severity", "Pain at Injection site",
  "OCCUR", "OCPAIN", 8, "Occurrence Indicator", "Pain at Injection site",
  "OCCUR", "OCSWEL", 9, "Occurrence Indicator", "Swelling"
)

input &lt;- tibble::tribble(
  ~USUBJID, ~FACAT, ~FASCAT, ~FATESTCD, ~FAOBJ, ~FATEST, ~FALOC, ~FALAT,
  "ABC101", "REACTO", "ADMIN", "SEV", "Redness", "Severity", "ARM", "LEFT",
  "ABC101", "REACTO", "ADMIN", "DIAMETER", "Redness", "Diameter", "ARM", "RIGHT",
  "ABC101", "REACTO", "ADMIN", "MAXDIAM", "Redness", "Maximum Diameter", NA, NA,
  "ABC101", "REACTO", "SYSTEMIC", "MAXTEMP", "Fever", "Maximum Temp", NA, NA,
  "ABC101", "REACTO", "SYSTEMIC", "OCCUR", "Fever", "Occurrence", NA, NA,
  "ABC101", "REACTO", "ADMIN", "OCCUR", "Erythema", "Occurrence", NA, NA,
  "ABC101", "REACTO", "ADMIN", "SEV", "Swelling", "Severity", NA, NA,
  "ABC101", "REACTO", "ADMIN", "OCCUR", "Swelling", "Occurrence", NA, NA,
  "ABC101", "REACTO", "ADMIN", "OCCUR", "Swelling", "Occurrence", NA, NA
)

derive_vars_params(
  dataset = input,
  lookup_dataset = lookup_dataset,
  merge_vars = exprs(PARAMCD, PARAMN)
)

</code></pre>

<hr>
<h2 id='derive_vars_vaxdt'>Add Vaccination Date Variables to the Output Dataset</h2><span id='topic+derive_vars_vaxdt'></span>

<h3>Description</h3>

<p>Creates vaccination date variables from <code>EX</code> domain. A date variable will be
created for each vaccination taking values from the variable <code>EXSTDTC</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>derive_vars_vaxdt(dataset, dataset_adsl, by_vars, order)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="derive_vars_vaxdt_+3A_dataset">dataset</code></td>
<td>
<p>Input dataset
</p>
<p>The variables specified by the <code>by_vars</code> argument are expected.</p>
</td></tr>
<tr><td><code id="derive_vars_vaxdt_+3A_dataset_adsl">dataset_adsl</code></td>
<td>
<p>Input adsl dataset
</p>
<p>The vaccination date variables created will be merged with this adsl dataset.</p>
</td></tr>
<tr><td><code id="derive_vars_vaxdt_+3A_by_vars">by_vars</code></td>
<td>
<p>Grouping variables.
</p>
<p>The variables to be grouped to filter the first observation within each
by group.</p>
</td></tr>
<tr><td><code id="derive_vars_vaxdt_+3A_order">order</code></td>
<td>
<p>Sorting variables.
</p>
<p>The variables order to be specified either in ascending or descending order.
By default ascending order will be applicable.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If there are multiple vaccinations for a visit per subject,warning will be
provided and only first observation will be filtered based on the variable
order specified on the <code>order</code> argument. In this case, user need to select
the <code>by_vars</code> appropriately.
</p>
<p>The number of variables created will be based on the number of vaccinations
per subject per visit.
</p>


<h3>Value</h3>

<p>The adsl dataset with vaccination date variables added to it.
</p>


<h3>Author(s)</h3>

<p>Vikram S
</p>


<h3>See Also</h3>

<p>Other der_var: 
<code><a href="#topic+derive_var_aval_adis">derive_var_aval_adis</a>()</code>,
<code><a href="#topic+derive_vars_crit">derive_vars_crit</a>()</code>,
<code><a href="#topic+derive_vars_event_flag">derive_vars_event_flag</a>()</code>,
<code><a href="#topic+derive_vars_max_flag">derive_vars_max_flag</a>()</code>,
<code><a href="#topic+derive_vars_merged_vaccine">derive_vars_merged_vaccine</a>()</code>,
<code><a href="#topic+derive_vars_params">derive_vars_params</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(tibble)
library(admiral)
library(dplyr)

input &lt;- tribble(
  ~USUBJID, ~EXSTDTC, ~VISITNUM, ~EXTRT, ~EXLNKGRP, ~VISIT,
  "A001", "2015-01-10", 1, "DRUG A", "VAC 1", "VISIT 1",
  "A001", "2015-01-11", 2, "DRUG A", "VAC 2", "VISIT 2",
  "A001", "2015-01-12", 3, "DRUG B", "VAC 3", "VISIT 3",
  "A002", "2015-01-13", 1, "DRUG B", "VAC 1", "VISIT 1",
  "A002", "2015-01-14", 2, "DRUG C", "VAC 2", "VISIT 2"
)

adsl &lt;- tribble(
  ~USUBJID, ~SEX, ~AGE,
  "A001", "MALE", 23,
  "A002", "FEMALE", 26,
)

derive_vars_vaxdt(
  dataset = input,
  dataset_adsl = adsl,
  by_vars = exprs(USUBJID, VISITNUM),
  order = exprs(USUBJID, VISITNUM, VISIT, EXSTDTC)
)
</code></pre>

<hr>
<h2 id='max_flag'>Creating Maximum Flag</h2><span id='topic+max_flag'></span>

<h3>Description</h3>

<p>To Flag the maximum records depends on the grouping variables in a flag variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>max_flag(dataset, by_vars, fl)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="max_flag_+3A_dataset">dataset</code></td>
<td>
<p>Input dataset</p>
</td></tr>
<tr><td><code id="max_flag_+3A_by_vars">by_vars</code></td>
<td>
<p>By variables which goes to group by, to create the flag. Pass the variables
inside the exprs().</p>
</td></tr>
<tr><td><code id="max_flag_+3A_fl">fl</code></td>
<td>
<p>Flag variable name, Pass it as string.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame with flag variable which is flagged for the maximum value records depending on
the variables passed in <code>by_vars</code> by user.
</p>


<h3>Author(s)</h3>

<p>Dhivya Kanagaraj
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(tibble)
library(admiral)

input &lt;- tribble(
  ~USUBJID, ~FAOBJ, ~FATESTCD, ~FATPTREF, ~AVAL, ~FATPT, ~PARAMCD,
  "ABC101", "REDNESS", "DIAMETER", "VACC 1", 10, "DAY 1", "DIARE",
  "ABC101", "REDNESS", "DIAMETER", "VACC 1", 7, "DAY 2", "DIARE",
  "ABC101", "REDNESS", "DIAMETER", "VACC 2", 3, "DAY 1", "DIARE",
  "ABC101", "REDNESS", "DIAMETER", "VACC 2", 8, "DAY 2", "DIARE",
  "ABC101", "FATIQUE", "SEV", "VACC 1", 1, "DAY 1", "SEVFAT",
  "ABC101", "FATIQUE", "SEV", "VACC 1", 1, "DAY 2", "SEVFAT",
  "ABC101", "FATIQUE", "SEV", "VACC 2", 2, "DAY 1", "SEVFAT",
  "ABC101", "FATIQUE", "SEV", "VACC 2", 3, "DAY 2", "SEVFAT"
)

max_flag(
  dataset = input,
  by_vars = exprs(USUBJID, FAOBJ, FATPTREF, PARAMCD),
  fl = "ANL01FL"
)

</code></pre>

<hr>
<h2 id='post_process_reacto'>Post processing function for ADFACE dataset</h2><span id='topic+post_process_reacto'></span>

<h3>Description</h3>

<p>This is used to do post processing for ADaM reactogenicity dataset, for the derived
SDTM level records, the corresponding values in FA variables will be <code>NA</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>post_process_reacto(
  dataset,
  filter_dataset = FATESTCD %in% c("MAXDIAM", "MAXSEV", "MAXTEMP") | (FATESTCD ==
    "OCCUR" &amp; FAOBJ == "FEVER")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="post_process_reacto_+3A_dataset">dataset</code></td>
<td>
<p>Input dataset</p>
</td></tr>
<tr><td><code id="post_process_reacto_+3A_filter_dataset">filter_dataset</code></td>
<td>
<p>Filter condition
Conversion of records in FA variables to NA depends on this condition.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The input dataframe with <code>NA</code> values in FA variables where the SDTM records modified for
ADaM derivation purpose.
</p>


<h3>Author(s)</h3>

<p>Arjun Rubalingam
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
library(admiral)
library(tibble)

input &lt;- tribble(
  ~USUBJID, ~FAOBJ, ~FALAT, ~FACAT, ~FASCAT, ~FATPT, ~FATESTCD, ~PARAMCD, ~AVAL,
  "ABC-1001", "FEVER", NA, "REACTO", "SYS", "DAY 1", "MAXTEMP", "MAXTEMP", 39.4,
  "ABC-1001", "VOMITING", NA, "REACTO", "SYS", "DAY 4", "MAXSEV", "MAXVOMIT", 3,
  "ABC-1001", "SWELLING", "LEFT", "REACTO", "ADMIN", "DAY 1", "MAXSEV", "MAXSWEL", 3,
  "ABC-1001", "REDNESS", "LEFT", "REACTO", "ADMIN", "DAY 2", "DIAMATER", "DIARE", 10.3,
  "ABC-1001", "FEVER", "LEFT", "REACTO", "SYS", "DAY 2", "OCCUR", "OCCFEV", NA
)

post_process_reacto(
  dataset = input,
  filter_dataset = FATESTCD %in% c("MAXSEV", "MAXTEMP") |
    (FATESTCD == "OCCUR" &amp; FAOBJ == "FEVER")
)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
