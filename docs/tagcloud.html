<!DOCTYPE html><html><head><title>Help for package tagcloud</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {tagcloud}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#plot.tagcloud'><p>Tag and Word Clouds</p></a></li>
<li><a href='#editor.tagcloud'><p>Simple interactive editing of tag clouds</p></a></li>
<li><a href='#gambia'><p>Results of GO enrichment analysis in TB</p></a></li>
<li><a href='#smoothPalette'><p>Replace a vector of numbers by a gradient of colors</p></a></li>
<li><a href='#strmultline'><p>Replace some spaces in multi-word sentences by newlines</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Tag Clouds</td>
</tr>
<tr>
<td>Version:</td>
<td>0.6</td>
</tr>
<tr>
<td>Date:</td>
<td>2015-07-02</td>
</tr>
<tr>
<td>Author:</td>
<td>January Weiner</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>January Weiner &lt;january.weiner@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Generating Tag and Word Clouds.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>Depends:</td>
<td>Rcpp (&ge; 0.9.4)</td>
</tr>
<tr>
<td>Imports:</td>
<td>RColorBrewer</td>
</tr>
<tr>
<td>Suggests:</td>
<td>extrafont,knitr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://logfc.wordpress.com">http://logfc.wordpress.com</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2015-07-03 07:23:26.877 UTC; january</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2015-07-03 11:17:02</td>
</tr>
</table>
<hr>
<h2 id='plot.tagcloud'>Tag and Word Clouds</h2><span id='topic+plot.tagcloud'></span><span id='topic+print.tagcloud'></span><span id='topic+print.tagcloudsummary'></span><span id='topic+summary.tagcloud'></span><span id='topic+tagcloud'></span><span id='topic+tagcloud-class'></span><span id='topic+tagcloud-package'></span>

<h3>Description</h3>

<p>Functions to create and display plots called tag clouds, word clouds or
weighted lists, in which a usually large number of words is displayed in
size correlated with a numerical value (for example, frequency in a text or
enrichment of a GO term). This makes it easier to visualize the prominence
of certain tags or words. Also, it looks nice.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'tagcloud'
plot(x, family = NULL, add = FALSE, with.box = FALSE,
  col = NULL, sel = NULL, ...)

## S3 method for class 'tagcloud'
summary(object, ...)

tagcloud(tags, weights = 1, algorithm = "oval", scale = "auto",
  scale.multiplier = 1, order = "size", sel = NULL, wmin = NULL,
  wmax = NULL, floor = 1, ceiling = 3, family = NULL, col = NULL,
  fvert = 0, plot = TRUE, add = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.tagcloud_+3A_x">x</code>, <code id="plot.tagcloud_+3A_object">object</code></td>
<td>
<p>An object of the type produced by tagcloud.</p>
</td></tr>
<tr><td><code id="plot.tagcloud_+3A_family">family</code></td>
<td>
<p>Font family to use, a vector containing font families to use
for each tag. For the <code>tagcloud</code> function, the special keyword &quot;random&quot;
can be used to assign random families (requires the extrafont package).</p>
</td></tr>
<tr><td><code id="plot.tagcloud_+3A_add">add</code></td>
<td>
<p>If TRUE, the tags will be added to the current plot instead of
creating a new plot.</p>
</td></tr>
<tr><td><code id="plot.tagcloud_+3A_with.box">with.box</code></td>
<td>
<p>If TRUE, a rectangle will be plotted around each tag.</p>
</td></tr>
<tr><td><code id="plot.tagcloud_+3A_col">col</code></td>
<td>
<p>Color or a vector containing colors to use for drawing the tags.</p>
</td></tr>
<tr><td><code id="plot.tagcloud_+3A_sel">sel</code></td>
<td>
<p>An integer or boolean vector indicating which terms from the
provided list will be used to plot. The vectors <code>col</code> and
<code>weights</code> will be filtered accordingly.</p>
</td></tr>
<tr><td><code id="plot.tagcloud_+3A_tags">tags</code></td>
<td>
<p>A character vector containing words or tags to be shown on the
plot.</p>
</td></tr>
<tr><td><code id="plot.tagcloud_+3A_weights">weights</code></td>
<td>
<p>A numeric vector giving the relative proportions of text size
corresponding to the given tag.</p>
</td></tr>
<tr><td><code id="plot.tagcloud_+3A_algorithm">algorithm</code></td>
<td>
<p>Name of the algorithm to use. Can be &quot;oval&quot;, &quot;fill&quot;,
&quot;random&quot;, &quot;snake&quot;, &quot;list&quot; or &quot;clist&quot;. See Details.</p>
</td></tr>
<tr><td><code id="plot.tagcloud_+3A_scale">scale</code></td>
<td>
<p>If &quot;auto&quot;, text expansion will be calculated automatically to
fit the available space. Otherwise, a numeric value used to modify the
calculated text sizes; tune scale to achieve a better fit.</p>
</td></tr>
<tr><td><code id="plot.tagcloud_+3A_scale.multiplier">scale.multiplier</code></td>
<td>
<p>Multiplier for the final calculated text expansion
parameter. Increase if there is too much empty space around the tag cloud;
decrease if the tags go over the plot boundaries.</p>
</td></tr>
<tr><td><code id="plot.tagcloud_+3A_order">order</code></td>
<td>
<p>Determines in which order the tags will be drawn. Can be
&quot;size&quot;, &quot;keep&quot;, &quot;random&quot;, &quot;height&quot; or &quot;width&quot;. See Details.</p>
</td></tr>
<tr><td><code id="plot.tagcloud_+3A_wmin">wmin</code></td>
<td>
<p>All items in the <code>weights</code> vector smaller than <code>wmin</code>
will be changed to <code>wmin</code></p>
</td></tr>
<tr><td><code id="plot.tagcloud_+3A_wmax">wmax</code></td>
<td>
<p>All items in the <code>weights</code> vector larger than <code>wmax</code>
will be changed to <code>wmax</code></p>
</td></tr>
<tr><td><code id="plot.tagcloud_+3A_floor">floor</code></td>
<td>
<p>Minimal text size. See Details.</p>
</td></tr>
<tr><td><code id="plot.tagcloud_+3A_ceiling">ceiling</code></td>
<td>
<p>Maximal text size. See Details.</p>
</td></tr>
<tr><td><code id="plot.tagcloud_+3A_fvert">fvert</code></td>
<td>
<p>Fraction of tags which will be rotated by 90 degrees
counterclockwise.</p>
</td></tr>
<tr><td><code id="plot.tagcloud_+3A_plot">plot</code></td>
<td>
<p>If FALSE, no plot will be produced.</p>
</td></tr>
<tr><td><code id="plot.tagcloud_+3A_...">...</code></td>
<td>
<p>Further arguments to be passed to downstream methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The package <code>tagcloud</code> creates and plots tag clouds (word clouds).  The
algorithms in the package have been designed specifically with long tags
(such as GO Term descriptions) in mind.
</p>


<h4>Term ordering</h4>

<p>The available arguments are as follows:
</p>

<ul>
<li><p> size &ndash; tags are ordered by size, that is, their effective
width multiplied by their effective height. Default.
</p>
</li>
<li><p> keep &ndash; keep the order from the list of words provided
</p>
</li>
<li><p> random &ndash; randomize the tag list
</p>
</li>
<li><p> width &ndash; order by effective screen width
</p>
</li>
<li><p> height &ndash; order by effective screen height
</p>
</li></ul>

<p>By default, prior to plotting terms are ordered by size.
</p>



<h4>Algorithms</h4>

<p>There are four algorithms for placing tags on the
plot implemented in tagcloud.
</p>

<ul>
<li><p> oval &ndash; creates an oval cloud.
</p>
</li>
<li><p> fill &ndash; an attempt will
be made to fill the available space
</p>
</li>
<li><p> random &ndash; randomly distribute tags
over the available space.  This algorithm is slow and not very effective
</p>
</li>
<li><p> snake &ndash; tags are placed clockwise around the first tag to plot
</p>
</li>
<li><p> list &ndash; create a list, one tag directly beneath another, justified left
</p>
</li>
<li><p> clist &ndash; create a list, one tag directly beneath another, centered
</p>
</li></ul>

<p>Algorithms <code>oval</code>, <code>fill</code> and <code>random</code> attempt to fill the
available space by adjusting the scaling factor for the font sizes. </p>



<h4>Calculation of tag sizes</h4>

<p>Placing tags such that the empty space
between the tags is minimized poses a non-trivial problem, because the
effective bounding box of a displayed text is not linearly dependent on the
<code>cex</code> parameter.
</p>
<p>In tagcloud, first a <code>cex</code> parameter is calculated for each tag
separately, based on the parameters <code>floor</code>, <code>ceiling</code> and the
vector of weights. Note that all weights smaller than <code>wmin</code> are
replaced by <code>wmin</code> and all weights larger than <code>wmax</code> are replaced
by <code>wmax</code>. Then, effective heights and widths of the tags to be
displayed are calculated using the <code><a href="graphics.html#topic+strwidth">strwidth</a></code> and
<code><a href="graphics.html#topic+strheight">strheight</a></code> functions.
</p>
<p>Unless the argument <code>scale</code> is different from &quot;auto&quot;, a scaling
parameter for <code>cex</code> is automatically calculated based on the current
area of the tags and the available plotting area. This usually results in a
reasonable plot, but is neither guaranteed to occupy all of the available
space without margins, nor that no tag will cross the view port.
</p>



<h3>Value</h3>

<p><code>tagcloud</code> returns an object of the <code>tagcloud-class</code>, which really
is a data frame with the following columns:
</p>

<ul>
<li><p><code>tags</code> &ndash; the tags, words or phrases shown on the plot
</p>
</li>
<li><p><code>weights</code> &ndash; a numeric vector that is used to calculate the size
of the plotted tags
</p>
</li>
<li><p><code>family</code> &ndash; name of the font family to be used in plotting
</p>
</li>
<li><p><code>vertical</code> &ndash; whether the tag should be rotated by 90
degrees counter-clockwise
</p>
</li>
<li><p><code>x</code>,<code>y</code> &ndash; coordinates of the left
lower corner of the tags bounding box
</p>
</li>
<li><p><code>w</code>,<code>h</code> &ndash; width and height of the bounding box
</p>
</li>
<li><p><code>cex</code> &ndash; text expansion factor, see <code><a href="graphics.html#topic+par">par</a></code>
</p>
</li>
<li><p><code>s</code> &ndash; surface of the tag (width x height)
</p>
</li></ul>

<p>The object of the <code>tagcloud</code> class can be manipulated using
<code><a href="#topic+editor.tagcloud">editor.tagcloud</a></code> and displayed using <code><a href="graphics.html#topic+plot">plot</a></code>,
<code><a href="base.html#topic+print">print</a></code> and <code><a href="base.html#topic+summary">summary</a></code> functions.
</p>


<h3>Note</h3>

<p>Care should be taken when using extra fonts loaded by the extrafont
package; not all fonts can be easily copied to a PDF file.
</p>
<p>Some ideas in this package are based on the 'wordcloud' package by Ian
Fellows.
</p>


<h3>Author(s)</h3>

<p>January Weiner &lt;january.weiner@gmail.com&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+editor.tagcloud">editor.tagcloud</a></code> &ndash; interactive editing of tagcloud
objects.
</p>
<p><code><a href="#topic+strmultline">strmultline</a></code> &ndash; splitting multi-word sentences into lines for a
better cloud display.
</p>
<p><code><a href="#topic+smoothPalette">smoothPalette</a></code> &ndash; mapping values onto a color gradient.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># a rather boring tag cloud
data( gambia )
terms &lt;- gambia$Term
tagcloud( terms )

# tag cloud with weights relative to P value
# colors relative to odds ratio, from light
# grey to black
weights &lt;- -log( gambia$Pvalue )
colors  &lt;- smoothPalette( gambia$OddsRatio, max=4 )
tagcloud( terms, weights, col= colors, algorithm= "oval" )

# tag cloud filling the whole plot
tagcloud( terms, weights, col= colors, algorithm= "fill" )

# just a list of only the first ten terms
tagcloud( terms, weights, sel= 1:10,
          col= colors, algorithm= "list", order= "width" )

# oval, with line breaks in terms
terms &lt;- strmultline( gambia$Term )
tagcloud( terms, weights, col= colors, algorithm= "oval" )

## Not run: 
# shows available font families, scaled according to
# the total disk space occupied by the fonts
require( extrafont )
ft &lt;- fonttable()
fi &lt;- file.info( fonttable()$fontfile )
families &lt;- unique( ft$FamilyName )
sizes    &lt;- sapply( families,function( x ) sum( fi[ ft$FamilyName == x, "size" ] ) )
tagcloud( families, sizes, family= families )

## End(Not run)
</code></pre>

<hr>
<h2 id='editor.tagcloud'>Simple interactive editing of tag clouds</h2><span id='topic+editor.tagcloud'></span>

<h3>Description</h3>

<p>A minimalistic editor for object of the tagcloud class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>editor.tagcloud(boxes)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="editor.tagcloud_+3A_boxes">boxes</code></td>
<td>
<p>An object of the tagcloud class, returned by the
<code><a href="#topic+tagcloud">tagcloud</a></code> function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>tagcloud</code> provides a minimalistic editor for tag clouds produced by
<code><a href="#topic+tagcloud">tagcloud</a></code> function. After <code>editor.tagcloud</code> is called, the
tag cloud is plotted. First click selects the tag to be moved. The second
click sends the tag such that its left lower corner is at the position
indicated by the mouse. Right-clicking terminates the program.
</p>


<h3>Value</h3>

<p>An object of the <code>tagcloud class</code> with the modified positions
of the tags.
</p>


<h3>Author(s)</h3>

<p>January Weiner &lt;january.weiner@gmail.com&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+tagcloud">tagcloud</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data( gambia )
terms &lt;- gambia$Term
tagcloud( terms )
boxes &lt;- editor.tagcloud( boxes )


## End(Not run)
</code></pre>

<hr>
<h2 id='gambia'>Results of GO enrichment analysis in TB</h2><span id='topic+gambia'></span>

<h3>Description</h3>

<p>A data.frame object containing the results of a GO enrichment analysis from
the GOstats package.
</p>


<h3>Format</h3>

<p>A data frame with 318 observations on the following 9 variables.
</p>
<p> GOBPID Pvalue OddsRatio ExpCount Count Size Term
</p>
<dl>
<dt>GOBPID</dt><dd><p>Gene Ontology (GO) biological process (BP) identifier</p>
</dd>
<dt>Pvalue</dt><dd><p>P value from enrichment test</p>
</dd>
<dt>OddsRatio</dt><dd><p>Measure of enrichment</p>
</dd>
<dt>ExpCount</dt><dd><p>expected number of genes in the enriched partition
which map to this GO term</p>
</dd>
<dt>Count</dt><dd><p>number of genes in the enriched partition which map to this GO term</p>
</dd>
<dt>Size</dt><dd><p>number of genes within this GO Term</p>
</dd>
<dt>Term</dt><dd><p>Gene Ontology term description</p>
</dd>
</dl>


<h3>Details</h3>

<p>The data results from a microarray analysis of the whole blood transcriptome
of tuberculosis (TB) patients compared to healthy individuals. Genes were
sorted by their p-value and analysed using the GOstats package.
</p>
<p>Significantly enriched GO terms are included in this data frame.
</p>


<h3>Source</h3>

<p>Maertzdorf J., Ota M., Repsilber D., Mollenkopf H.J., Weiner J., et
al. (2011) Functional Correlations of Pathogenesis-Driven Gene Expression
Signatures in Tuberculosis. PLoS ONE 6(10): e26938.
doi:10.1371/journal.pone.0026938
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(gambia)
tagcloud( gambia$Term, -log( gambia$Pvalue ) )
</code></pre>

<hr>
<h2 id='smoothPalette'>Replace a vector of numbers by a gradient of colors</h2><span id='topic+smoothPalette'></span>

<h3>Description</h3>

<p>Replace a vector of numbers by a vector of colors from a palette, such that
values correspond to the colors on a smooth gradient.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smoothPalette(x, pal = NULL, max = NULL, min = NULL, n = 9,
  palfunc = NULL, na.color = "white")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="smoothPalette_+3A_x">x</code></td>
<td>
<p>A numeric vector</p>
</td></tr>
<tr><td><code id="smoothPalette_+3A_pal">pal</code></td>
<td>
<p>Character vector containing the color gradient onto which the
numeric vector <code>x</code> will be mapped. By default, a gradient from white to
black is generated. If it is a single character value, it will be treated as
name of an RColorBrewer palette (see <code><a href="RColorBrewer.html#topic+brewer.pal">brewer.pal</a></code>).</p>
</td></tr>
<tr><td><code id="smoothPalette_+3A_max">max</code></td>
<td>
<p>Values of <code>x</code> larger than <code>max</code> will be replaced by
<code>max</code></p>
</td></tr>
<tr><td><code id="smoothPalette_+3A_min">min</code></td>
<td>
<p>Values of <code>x</code> smaller than <code>min</code> will be replaced by
<code>min</code></p>
</td></tr>
<tr><td><code id="smoothPalette_+3A_n">n</code></td>
<td>
<p>Number of steps</p>
</td></tr>
<tr><td><code id="smoothPalette_+3A_palfunc">palfunc</code></td>
<td>
<p>Palette function returned by colorRampPalette</p>
</td></tr>
<tr><td><code id="smoothPalette_+3A_na.color">na.color</code></td>
<td>
<p>NA values will be replaced by that color</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used to map a continues numerical vector on an ordinal
character vector, in especially a vector of colors. Color palette can be
specified using an RColorBrewer palette name.
</p>


<h3>Value</h3>

<p>A character vector of the same length as the numeric vector
<code>x</code>, containing the matching colors.
</p>


<h3>Author(s)</h3>

<p>January Weiner &lt;january.weiner@gmail.com&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+tagcloud">tagcloud</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>smoothPalette( 1:3 )
# will print:
# "#CCCCCC" "#666666" "#000000"

smoothPalette( 1:3, pal= "Blues" )
# will produce:
# "#F7FBFF" "#6BAED6" "#08306B"

x &lt;- runif( 100 )
plot( 1:100, x, col= smoothPalette( x, pal= "BrBG" ), pch= 19 )
</code></pre>

<hr>
<h2 id='strmultline'>Replace some spaces in multi-word sentences by newlines</h2><span id='topic+strmultline'></span>

<h3>Description</h3>

<p>Replace a space character by a newline in a multi-word sentence to get a
better height / width ratio
</p>


<h3>Usage</h3>

<pre><code class='language-R'>strmultline(strings, ratio = 0.2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="strmultline_+3A_strings">strings</code></td>
<td>
<p>a character vector containing the multi-word sentences to be
split</p>
</td></tr>
<tr><td><code id="strmultline_+3A_ratio">ratio</code></td>
<td>
<p>the desired ratio height / width</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Very long tags, for example GO Term descriptions, make a bad tag cloud.
<code>strmultline</code> tries to chop up such a long sentence into multiple
(currently two) lines, to get a better height / width ratio.
</p>


<h3>Value</h3>

<p>A character vector containing the modified sentences.
</p>


<h3>Author(s)</h3>

<p>January Weiner &lt;january.weiner@gmail.com&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+tagcloud">tagcloud</a></code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
