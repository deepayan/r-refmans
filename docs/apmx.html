<!DOCTYPE html><html><head><title>Help for package apmx</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {apmx}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#cov_apply'><p>Apply covariates to PK(PD) dataset</p></a></li>
<li><a href='#cov_find'><p>Find covariates of particular types</p></a></li>
<li><a href='#DM'><p>DM</p></a></li>
<li><a href='#EX'><p>EX</p></a></li>
<li><a href='#LB'><p>LB</p></a></li>
<li><a href='#PC'><p>PC</p></a></li>
<li><a href='#pk_build'><p>Create a NONMEM PK(PD) dataset</p></a></li>
<li><a href='#pk_combine'><p>combine study level datasets to form population dataset</p></a></li>
<li><a href='#pk_define'><p>Create definition file from published dataset</p></a></li>
<li><a href='#pk_summarize'><p>Produce summary tables for a PK(PD) dataset</p></a></li>
<li><a href='#pk_write'><p>Write PK(PD) dataset to specified location</p></a></li>
<li><a href='#variable_list_create'><p>Create a dataframe with standard variable names and definitions</p></a></li>
<li><a href='#version_log'><p>Create and maintain a dataset version log</p></a></li>
<li><a href='#VL'><p>VL</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Automated Population Pharmacokinetic Dataset Assembly</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-01-05</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Stephen Amori &lt;stephen.amori@amadorbio.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Automated methods to assemble population PK (pharmacokinetic) and
    PKPD (pharmacodynamic) datasets for analysis in 'NONMEM' (non-linear mixed effects
    modeling) by Bauer (2019) &lt;<a href="https://doi.org/10.1002%2Fpsp4.12404">doi:10.1002/psp4.12404</a>&gt;. The package includes functions
    to build datasets from SDTM (study data tabulation module)
    <a href="https://www.cdisc.org/standards/foundational/sdtm">https://www.cdisc.org/standards/foundational/sdtm</a>, ADaM (analysis dataset
    module) <a href="https://www.cdisc.org/standards/foundational/adam">https://www.cdisc.org/standards/foundational/adam</a>, or other dataset
    formats. The package will combine population datasets, add covariates, and
    create documentation to support regulatory submission and internal communication.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, tidyr, purrr, this.path, flextable, officer,
tidyselect, utils, arsenal</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/stephen-amori/apmx">https://github.com/stephen-amori/apmx</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/stephen-amori/apmx/issues">https://github.com/stephen-amori/apmx/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.00)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown, knitr, testthat, tibble</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-05 20:40:33 UTC; Stephen.Amori</td>
</tr>
<tr>
<td>Author:</td>
<td>Stephen Amori [aut, cre, cph],
  Ethan DellaMaestra [aut],
  Michael Dick [aut],
  Daniel Litow [ctb],
  Jonah Lyon [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-09 09:00:18 UTC</td>
</tr>
</table>
<hr>
<h2 id='cov_apply'>Apply covariates to PK(PD) dataset</h2><span id='topic+cov_apply'></span>

<h3>Description</h3>

<p>Add covariates to a dataset built by pk_build() or pk_combine()
Can add subject-level covariates (by any ID variable) or time-varying (by any time variable)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cov_apply(
  df,
  cov,
  id.by = "USUBJID",
  time.by = NA,
  direction = "downup",
  exp = FALSE,
  ebe = FALSE,
  cov.rnd = NA,
  na = -999,
  demo.map = TRUE,
  keep.other = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cov_apply_+3A_df">df</code></td>
<td>
<p>PK(PD) dataframe generated by pk_build</p>
</td></tr>
<tr><td><code id="cov_apply_+3A_cov">cov</code></td>
<td>
<p>dataframe of covariates</p>
</td></tr>
<tr><td><code id="cov_apply_+3A_id.by">id.by</code></td>
<td>
<p>id variable to merge covariates</p>
</td></tr>
<tr><td><code id="cov_apply_+3A_time.by">time.by</code></td>
<td>
<p>time variable to merge covariates</p>
</td></tr>
<tr><td><code id="cov_apply_+3A_direction">direction</code></td>
<td>
<p>fill direction for time-varying covariates</p>
</td></tr>
<tr><td><code id="cov_apply_+3A_exp">exp</code></td>
<td>
<p>treats new covariates as exposure metrics when TRUE</p>
</td></tr>
<tr><td><code id="cov_apply_+3A_ebe">ebe</code></td>
<td>
<p>treats new covariates as empirical bayes estimates when TRUE</p>
</td></tr>
<tr><td><code id="cov_apply_+3A_cov.rnd">cov.rnd</code></td>
<td>
<p>covariate rounding parameter</p>
</td></tr>
<tr><td><code id="cov_apply_+3A_na">na</code></td>
<td>
<p>value to replace NA numeric covariates</p>
</td></tr>
<tr><td><code id="cov_apply_+3A_demo.map">demo.map</code></td>
<td>
<p>toggle pre-set numeric values for SEX, RACE, and ETHNIC demographic variables</p>
</td></tr>
<tr><td><code id="cov_apply_+3A_keep.other">keep.other</code></td>
<td>
<p>filter to keep or remove other events, EVID = 2</p>
</td></tr>
</table>


<h3>Value</h3>

<p>PK(PD) dataset with additional covariates]
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Simple ex domain with 1 subject and 1 dose
ex &lt;- data.frame(STUDYID = "ABC101",
                 USUBJID = "ABC101-001",
                 EXSTDTC = "2000-01-01 10:00:00",
                 EXSTDY = 1,
                 EXTPTNUM = 0,
                 EXDOSE = 100,
                 CMT = 1,
                 EXTRT = "ABC",
                 EXDOSU = "mg",
                 VISIT = "Day 1",
                 EXTPT = "Dose",
                 EXDOSFRQ = "Once",
                 EXROUTE = "Oral")

## Simple pc domain with 1 subject and 3 observations
pc &lt;- data.frame(USUBJID = "ABC101-001",
                 PCDTC = c("2000-01-01 09:40:00",
                           "2000-01-01 10:29:00",
                           "2000-01-01 12:05:00"),
                 PCDY = 1,
                 PCTPTNUM = c(0, ##Units of hours
                              0.021,
                              0.083),
                 PCSTRESN = c(NA,
                              469,
                              870),
                 PCLLOQ = 25,
                 CMT = 2,
                 VISIT = "Day 1",
                 PCTPT = c("Pre-dose",
                           "30-min post-dose",
                           "2-hr post-dose"),
                 PCTEST = "ABC",
                 PCSTRESU = "ug/mL")

## Create with pk_build()
df &lt;- pk_build(ex, pc)

## Simple dm domain for the corresponding study
dm &lt;- data.frame(USUBJID = c("ABC101-001",
                             "ABC101-002",
                             "ABC101-003"),
                 AGE = c(45,
                         37,
                         73),
                 AGEU = "years",
                 SEX = c("Male",
                         "Female",
                         "Male"),
                 RACE = c("White",
                          "White",
                          "Black"),
                 ETHNIC = c("Not Hispanic/Latino",
                            "Not Hispanic/Latino",
                            "Not Hispanic/Latino"))

## Add covariates with cov_apply()
df1 &lt;- cov_apply(df, dm)

</code></pre>

<hr>
<h2 id='cov_find'>Find covariates of particular types</h2><span id='topic+cov_find'></span>

<h3>Description</h3>

<p>Can filter for categorical, continuous, or other covariates.
Can filter for numeric or character type.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cov_find(df, cov, type)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cov_find_+3A_df">df</code></td>
<td>
<p>PK(PD) dataset</p>
</td></tr>
<tr><td><code id="cov_find_+3A_cov">cov</code></td>
<td>
<p>covariate distribution</p>
</td></tr>
<tr><td><code id="cov_find_+3A_type">type</code></td>
<td>
<p>covariate type</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of desired column names
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Simple ex domain with 1 subject and 1 dose
ex &lt;- data.frame(STUDYID = "ABC101",
                 USUBJID = "ABC101-001",
                 EXSTDTC = "2000-01-01 10:00:00",
                 EXSTDY = 1,
                 EXTPTNUM = 0,
                 EXDOSE = 100,
                 CMT = 1,
                 EXTRT = "ABC",
                 EXDOSU = "mg",
                 VISIT = "Day 1",
                 EXTPT = "Dose",
                 EXDOSFRQ = "Once",
                 EXROUTE = "Oral")

## Simple pc domain with 1 subject and 3 observations
pc &lt;- data.frame(USUBJID = "ABC101-001",
                 PCDTC = c("2000-01-01 09:40:00",
                           "2000-01-01 10:29:00",
                           "2000-01-01 12:05:00"),
                 PCDY = 1,
                 PCTPTNUM = c(0, ##Units of hours
                              0.021,
                              0.083),
                 PCSTRESN = c(NA,
                              469,
                              870),
                 PCLLOQ = 25,
                 CMT = 2,
                 VISIT = "Day 1",
                 PCTPT = c("Pre-dose",
                           "30-min post-dose",
                           "2-hr post-dose"),
                 PCTEST = "ABC",
                 PCSTRESU = "ug/mL")

## Create with pk_build()
df &lt;- pk_build(ex, pc)

## Simple dm domain for the corresponding study
dm &lt;- data.frame(USUBJID = c("ABC101-001",
                             "ABC101-002",
                             "ABC101-003"),
                 AGE = c(45,
                         37,
                         73),
                 AGEU = "years",
                 SEX = c("Male",
                         "Female",
                         "Male"),
                 RACE = c("White",
                          "White",
                          "Black"),
                 ETHNIC = c("Not Hispanic/Latino",
                            "Not Hispanic/Latino",
                            "Not Hispanic/Latino"))

## Add covariates with cov_apply()
df1 &lt;- cov_apply(df, dm)

## Find covariates with cov_find()
cov_find(df1, cov="categorical", type="numeric")
cov_find(df1, cov="categorical", type="character")
cov_find(df1, cov="continuous", type="numeric")
cov_find(df1, cov="units", type="character")

</code></pre>

<hr>
<h2 id='DM'>DM</h2><span id='topic+DM'></span>

<h3>Description</h3>

<p>Randomly generated demographic data domain
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DM
</code></pre>


<h3>Format</h3>

<p>## 'DM'
A data frame with 22 rows and 12 variables:
</p>

<dl>
<dt>STUDYID</dt><dd><p>study label</p>
</dd>
<dt>SITEID</dt><dd><p>site code</p>
</dd>
<dt>SUBJID</dt><dd><p>subject code</p>
</dd>
<dt>USUBJID</dt><dd><p>unique subject ID</p>
</dd>
<dt>SCRFL</dt><dd><p>screen fail flag</p>
</dd>
<dt>ICFDT</dt><dd><p>informed consent date</p>
</dd>
<dt>ICFDTC</dt><dd><p>informed consent date character form</p>
</dd>
<dt>DOBDT</dt><dd><p>date of birth</p>
</dd>
<dt>AGE</dt><dd><p>subject baseline age</p>
</dd>
<dt>SEX</dt><dd><p>subject sex</p>
</dd>
<dt>RACE</dt><dd><p>subject race</p>
</dd>
<dt>ETHNIC</dt><dd><p>subject ethnicity</p>
</dd>
</dl>


<hr>
<h2 id='EX'>EX</h2><span id='topic+EX'></span>

<h3>Description</h3>

<p>Randomly generated exposure domain
</p>


<h3>Usage</h3>

<pre><code class='language-R'>EX
</code></pre>


<h3>Format</h3>

<p>## 'EX'
A data frame with 42 rows and 19 variables:
</p>

<dl>
<dt>STUDYID</dt><dd><p>study label</p>
</dd>
<dt>SITEID</dt><dd><p>site code</p>
</dd>
<dt>USUBJID</dt><dd><p>unique subject ID</p>
</dd>
<dt>EXCAT</dt><dd><p>domain category</p>
</dd>
<dt>VISIT</dt><dd><p>visit label</p>
</dd>
<dt>EXSTDY</dt><dd><p>numeric study day</p>
</dd>
<dt>VISCRFN</dt><dd><p>visit numeric code</p>
</dd>
<dt>EXTRT</dt><dd><p>treatment label</p>
</dd>
<dt>EXDOSE</dt><dd><p>treatment amount</p>
</dd>
<dt>EXDOSU</dt><dd><p>treatment unit label</p>
</dd>
<dt>EXROUTE</dt><dd><p>treatment route label</p>
</dd>
<dt>EXDOSFRQ</dt><dd><p>treatment frequency</p>
</dd>
<dt>EXDT</dt><dd><p>treatment administration date</p>
</dd>
<dt>EXDTC</dt><dd><p>treatment administration date character form</p>
</dd>
<dt>EXTM</dt><dd><p>treatment administration time</p>
</dd>
<dt>EXTMC</dt><dd><p>treatment administration time character form</p>
</dd>
<dt>EXSTDTC</dt><dd><p>treatment administration date and time</p>
</dd>
<dt>EXTPT</dt><dd><p>treatment timepoint label</p>
</dd>
<dt>EXTPTNUM</dt><dd><p>treatment numeric timepoint</p>
</dd>
</dl>


<hr>
<h2 id='LB'>LB</h2><span id='topic+LB'></span>

<h3>Description</h3>

<p>Randomly generated laboratory data domain
</p>


<h3>Usage</h3>

<pre><code class='language-R'>LB
</code></pre>


<h3>Format</h3>

<p>## 'LB'
A data frame with 2159 rows and 16 variables:
</p>

<dl>
<dt>STUDYID</dt><dd><p>study label</p>
</dd>
<dt>SITEID</dt><dd><p>site code</p>
</dd>
<dt>USUBJID</dt><dd><p>unique subject ID</p>
</dd>
<dt>LBCAT</dt><dd><p>domain category</p>
</dd>
<dt>LBCOMPFL</dt><dd><p>completion flag</p>
</dd>
<dt>LBDT</dt><dd><p>date of assessment</p>
</dd>
<dt>LBVST</dt><dd><p>visit label</p>
</dd>
<dt>VISCRFN</dt><dd><p>visit numeric code</p>
</dd>
<dt>LBTPT</dt><dd><p>timepoint label</p>
</dd>
<dt>LBTPTN</dt><dd><p>timepoint numeric code</p>
</dd>
<dt>LBPARAMCD</dt><dd><p>parameter code</p>
</dd>
<dt>LBPARAM</dt><dd><p>parameter</p>
</dd>
<dt>LBORRES</dt><dd><p>original parameter result</p>
</dd>
<dt>LBORRESC</dt><dd><p>original parameter result, character form</p>
</dd>
<dt>LBORRESU</dt><dd><p>original parameter unit label</p>
</dd>
</dl>


<hr>
<h2 id='PC'>PC</h2><span id='topic+PC'></span>

<h3>Description</h3>

<p>Randomly generated pharmacokinetic observation domain
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PC
</code></pre>


<h3>Format</h3>

<p>## 'PC'
A data frame with 420 rows and 19 variables:
</p>

<dl>
<dt>STUDYID</dt><dd><p>study label</p>
</dd>
<dt>SITEID</dt><dd><p>site code</p>
</dd>
<dt>USUBJID</dt><dd><p>unique subject ID</p>
</dd>
<dt>PCCAT</dt><dd><p>domain category</p>
</dd>
<dt>PCTEST</dt><dd><p>analyte category</p>
</dd>
<dt>VISIT</dt><dd><p>visit label</p>
</dd>
<dt>PCDY</dt><dd><p>study numeric day</p>
</dd>
<dt>VISCRFN</dt><dd><p>visit numeric code</p>
</dd>
<dt>PCTPT</dt><dd><p>timepoint label</p>
</dd>
<dt>PCTPTN</dt><dd><p>timepoint numeric code</p>
</dd>
<dt>PCSTAT</dt><dd><p>completion status</p>
</dd>
<dt>PCDT</dt><dd><p>observation date</p>
</dd>
<dt>PCTM</dt><dd><p>observation time</p>
</dd>
<dt>PCTMC</dt><dd><p>observation time character form</p>
</dd>
<dt>PCDTC</dt><dd><p>observation date and time</p>
</dd>
<dt>PCORRES</dt><dd><p>original pharmacokinetic observation</p>
</dd>
<dt>PCORRESU</dt><dd><p>original pharmacokinetic observation unit label</p>
</dd>
<dt>PCSTRESN</dt><dd><p>standardized pharmacokinetic numeric observation</p>
</dd>
<dt>PCSTRESC</dt><dd><p>standardized pharmacokinetic character observation</p>
</dd>
<dt>PCSTRESU</dt><dd><p>standardized pharmacokinetic observation unit label</p>
</dd>
<dt>PCLLOQ</dt><dd><p>standardized pharmacokinetic observation lower limit of quantification</p>
</dd>
</dl>


<hr>
<h2 id='pk_build'>Create a NONMEM PK(PD) dataset</h2><span id='topic+pk_build'></span>

<h3>Description</h3>

<p>Input a pre-processed ex and pc domain for combination into a NONMEM dataset.
Additional pd endpoints, subject-level covariates, and time-varying covariates can also be added.
Other parameters can customize some calculations and formatting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pk_build(
  ex,
  pc = NA,
  pd = NA,
  sl.cov = NA,
  tv.cov = NA,
  time.units = "days",
  cycle.length = NA,
  na = -999,
  time.rnd = NULL,
  amt.rnd = NULL,
  dv.rnd = NULL,
  cov.rnd = NULL,
  impute = NA,
  BDV = FALSE,
  DDV = FALSE,
  PDV = FALSE,
  sparse = 3,
  demo.map = TRUE,
  tv.cov.fill = "downup",
  keep.other = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pk_build_+3A_ex">ex</code></td>
<td>
<p>dose event dataframe</p>
</td></tr>
<tr><td><code id="pk_build_+3A_pc">pc</code></td>
<td>
<p>pc event dataframe</p>
</td></tr>
<tr><td><code id="pk_build_+3A_pd">pd</code></td>
<td>
<p>pd event dataframe</p>
</td></tr>
<tr><td><code id="pk_build_+3A_sl.cov">sl.cov</code></td>
<td>
<p>subject-level covariate dataframe</p>
</td></tr>
<tr><td><code id="pk_build_+3A_tv.cov">tv.cov</code></td>
<td>
<p>time-varying covariate dataframe</p>
</td></tr>
<tr><td><code id="pk_build_+3A_time.units">time.units</code></td>
<td>
<p>units for time attributes</p>
</td></tr>
<tr><td><code id="pk_build_+3A_cycle.length">cycle.length</code></td>
<td>
<p>cycle length in units of days</p>
</td></tr>
<tr><td><code id="pk_build_+3A_na">na</code></td>
<td>
<p>value for missing numeric items</p>
</td></tr>
<tr><td><code id="pk_build_+3A_time.rnd">time.rnd</code></td>
<td>
<p>time attribute rounding parameter</p>
</td></tr>
<tr><td><code id="pk_build_+3A_amt.rnd">amt.rnd</code></td>
<td>
<p>amount attribute rounding parameter</p>
</td></tr>
<tr><td><code id="pk_build_+3A_dv.rnd">dv.rnd</code></td>
<td>
<p>dependent variable attribute rounding parameter</p>
</td></tr>
<tr><td><code id="pk_build_+3A_cov.rnd">cov.rnd</code></td>
<td>
<p>covariate attribute rounding parameter</p>
</td></tr>
<tr><td><code id="pk_build_+3A_impute">impute</code></td>
<td>
<p>imputation method</p>
</td></tr>
<tr><td><code id="pk_build_+3A_bdv">BDV</code></td>
<td>
<p>baseline pd attribute</p>
</td></tr>
<tr><td><code id="pk_build_+3A_ddv">DDV</code></td>
<td>
<p>change from baseline pd attribute</p>
</td></tr>
<tr><td><code id="pk_build_+3A_pdv">PDV</code></td>
<td>
<p>percent change from baseline pd attribute</p>
</td></tr>
<tr><td><code id="pk_build_+3A_sparse">sparse</code></td>
<td>
<p>threshold for sparse sampling</p>
</td></tr>
<tr><td><code id="pk_build_+3A_demo.map">demo.map</code></td>
<td>
<p>toggle pre-set numeric values for SEX, RACE, and ETHNIC demographic variables</p>
</td></tr>
<tr><td><code id="pk_build_+3A_tv.cov.fill">tv.cov.fill</code></td>
<td>
<p>time-varying covariate fill direction</p>
</td></tr>
<tr><td><code id="pk_build_+3A_keep.other">keep.other</code></td>
<td>
<p>filter to keep or remove other events, EVID = 2</p>
</td></tr>
</table>


<h3>Value</h3>

<p>PK(PD) dataset
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Simple ex domain with 1 subject and 1 dose
ex &lt;- data.frame(STUDYID = "ABC101",
                 USUBJID = "ABC101-001",
                 EXSTDTC = "2000-01-01 10:00:00",
                 EXSTDY = 1,
                 EXTPTNUM = 0,
                 EXDOSE = 100,
                 CMT = 1,
                 EXTRT = "ABC",
                 EXDOSU = "mg",
                 VISIT = "Day 1",
                 EXTPT = "Dose",
                 EXDOSFRQ = "Once",
                 EXROUTE = "Oral")

## Simple pc domain with 1 subject and 3 observations
pc &lt;- data.frame(USUBJID = "ABC101-001",
                 PCDTC = c("2000-01-01 09:40:00",
                           "2000-01-01 10:29:00",
                           "2000-01-01 12:05:00"),
                 PCDY = 1,
                 PCTPTNUM = c(0, ##Units of hours
                              0.021,
                              0.083),
                 PCSTRESN = c(NA,
                              469,
                              870),
                 PCLLOQ = 25,
                 CMT = 2,
                 VISIT = "Day 1",
                 PCTPT = c("Pre-dose",
                           "30-min post-dose",
                           "2-hr post-dose"),
                 PCTEST = "ABC",
                 PCSTRESU = "ug/mL")

## Create with pk_build()
df &lt;- pk_build(ex, pc)

</code></pre>

<hr>
<h2 id='pk_combine'>combine study level datasets to form population dataset</h2><span id='topic+pk_combine'></span>

<h3>Description</h3>

<p>Input two datasets created by pk_build().
Any character descriptions that were numerically mapped will be re-mapped to the whole population.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pk_combine(df1, df2, demo.map = TRUE, na = -999)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pk_combine_+3A_df1">df1</code></td>
<td>
<p>original PK(PD) dataset</p>
</td></tr>
<tr><td><code id="pk_combine_+3A_df2">df2</code></td>
<td>
<p>additional PK(PD) dataset</p>
</td></tr>
<tr><td><code id="pk_combine_+3A_demo.map">demo.map</code></td>
<td>
<p>toggle pre-set numeric values for SEX, RACE, and ETHNIC demographic variables</p>
</td></tr>
<tr><td><code id="pk_combine_+3A_na">na</code></td>
<td>
<p>value for missing numeric items</p>
</td></tr>
</table>


<h3>Value</h3>

<p>population PK(PD) dataset
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Simple ex domain with 1 subject and 1 dose, study 101
ex101 &lt;- data.frame(STUDYID = "ABC101",
                    USUBJID = "ABC101-001",
                    EXSTDTC = "2000-01-01 10:00:00",
                    EXSTDY = 1,
                    EXTPTNUM = 0,
                    EXDOSE = 100,
                    CMT = 1,
                    EXTRT = "ABC",
                    EXDOSU = "mg",
                    VISIT = "Day 1",
                    EXTPT = "Dose",
                    EXDOSFRQ = "Once",
                    EXROUTE = "Oral")

## Simple ex domain with 1 subject and 1 dose, study 102
ex102 &lt;- data.frame(STUDYID = "ABC102",
                    USUBJID = "ABC102-001",
                    EXSTDTC = "2001-01-01 08:09:00",
                    EXSTDY = 1,
                    EXTPTNUM = 0,
                    EXDOSE = 200,
                    CMT = 1,
                    EXTRT = "ABC",
                    EXDOSU = "mg",
                    VISIT = "Day 1",
                    EXTPT = "Dose",
                    EXDOSFRQ = "QW",
                    EXROUTE = "Oral")

## Simple pc domain with 1 subject and 3 observations, study 101
pc101 &lt;- data.frame(USUBJID = "ABC101-001",
                    PCDTC = c("2000-01-01 09:40:00",
                              "2000-01-01 10:29:00",
                              "2000-01-01 12:05:00"),
                    PCDY = 1,
                    PCTPTNUM = c(0, ##Units of hours
                                 0.021,
                                 0.083),
                    PCSTRESN = c(NA,
                                 469,
                                 870),
                    PCLLOQ = 25,
                    CMT = 2,
                    VISIT = "Day 1",
                    PCTPT = c("Pre-dose",
                              "30-min post-dose",
                              "2-hr post-dose"),
                    PCTEST = "ABC",
                    PCSTRESU = "ug/mL")

## Simple pc domain with 1 subject and 3 observations, study 102
pc102 &lt;- data.frame(USUBJID = "ABC102-001",
                    PCDTC = c("2001-01-01 08:05:00",
                              "2001-01-01 11:38:00",
                              "2001-01-02 08:11:00"),
                    PCDY = 1,
                    PCTPTNUM = c(0, ##Units of hours
                                 0.125,
                                 1),
                    PCSTRESN = c(NA,
                                 1150,
                                 591),
                    PCLLOQ = 25,
                    CMT = 2,
                    VISIT = "Day 1",
                    PCTPT = c("Pre-dose",
                              "2-4 hr post-dose",
                              "24 hr post-dose"),
                    PCTEST = "ABC",
                    PCSTRESU = "ug/mL")

## Create with pk_build()
df101 &lt;- pk_build(ex101, pc101)
df102 &lt;- pk_build(ex102, pc102)

## Combine with pk_combine()
df_combine &lt;- pk_combine(df101, df102)

</code></pre>

<hr>
<h2 id='pk_define'>Create definition file from published dataset</h2><span id='topic+pk_define'></span>

<h3>Description</h3>

<p>Definition file table can be read into a template word document (.docx) or blank document if desired.
Definitions are sourced from a variable list stored separately on your server.
Please refer to apmx::variable_list_export() for a standard copy of the variable list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pk_define(
  df,
  file = NULL,
  project,
  data,
  variable.list,
  template = NULL,
  font = "Times New Roman",
  size = 9,
  na = -999
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pk_define_+3A_df">df</code></td>
<td>
<p>apmx analysis dataset</p>
</td></tr>
<tr><td><code id="pk_define_+3A_file">file</code></td>
<td>
<p>optional filepath for defintion file (.docx file)</p>
</td></tr>
<tr><td><code id="pk_define_+3A_project">project</code></td>
<td>
<p>project name</p>
</td></tr>
<tr><td><code id="pk_define_+3A_data">data</code></td>
<td>
<p>dataset name</p>
</td></tr>
<tr><td><code id="pk_define_+3A_variable.list">variable.list</code></td>
<td>
<p>reference dataframe for variable definitions</p>
</td></tr>
<tr><td><code id="pk_define_+3A_template">template</code></td>
<td>
<p>optional filepath for definition file template (.docx file)</p>
</td></tr>
<tr><td><code id="pk_define_+3A_font">font</code></td>
<td>
<p>font for table contents</p>
</td></tr>
<tr><td><code id="pk_define_+3A_size">size</code></td>
<td>
<p>font size for table contents</p>
</td></tr>
<tr><td><code id="pk_define_+3A_na">na</code></td>
<td>
<p>value used for missing or na numeric covariates</p>
</td></tr>
</table>


<h3>Value</h3>

<p>dataset definition file
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Simple ex domain with 1 subject and 1 dose
ex &lt;- data.frame(STUDYID = "ABC101",
                 USUBJID = "ABC101-001",
                 EXSTDTC = "2000-01-01 10:00:00",
                 EXSTDY = 1,
                 EXTPTNUM = 0,
                 EXDOSE = 100,
                 CMT = 1,
                 EXTRT = "ABC",
                 EXDOSU = "mg",
                 VISIT = "Day 1",
                 EXTPT = "Dose",
                 EXDOSFRQ = "Once",
                 EXROUTE = "Oral")

## Simple pc domain with 1 subject and 3 observations
pc &lt;- data.frame(USUBJID = "ABC101-001",
                 PCDTC = c("2000-01-01 09:40:00",
                           "2000-01-01 10:29:00",
                           "2000-01-01 12:05:00"),
                 PCDY = 1,
                 PCTPTNUM = c(0, ##Units of hours
                              0.021,
                              0.083),
                 PCSTRESN = c(NA,
                              469,
                              870),
                 PCLLOQ = 25,
                 CMT = 2,
                 VISIT = "Day 1",
                 PCTPT = c("Pre-dose",
                           "30-min post-dose",
                           "2-hr post-dose"),
                 PCTEST = "ABC",
                 PCSTRESU = "ug/mL")

## Create apmx dataset with pk_build()
df &lt;- pk_build(ex, pc)

## Create variable definitions with variable_list_create()
vl &lt;- variable_list_create()

## Create definition file
pk_define(df, variable.list = vl)

</code></pre>

<hr>
<h2 id='pk_summarize'>Produce summary tables for a PK(PD) dataset</h2><span id='topic+pk_summarize'></span>

<h3>Description</h3>

<p>Summarize BLQ distributions, categorical covariates, and continuous covariates in three tables.
Outputs are default .csv files, but can also be .docx and/or .pptx
Tables are default stratified by study, but can be stratified by any variable requested by the user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pk_summarize(
  df,
  dir = NA,
  strat.by = "NSTUDYC",
  ignore.c = TRUE,
  na = -999,
  docx = FALSE,
  pptx = FALSE,
  docx.font = "Times New Roman",
  docx.size = 9,
  docx.template = NULL,
  pptx.template = NULL,
  pptx.font = "Times New Roman",
  pptx.size = 12,
  docx.orientation = "portrait",
  ignore.request = c()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pk_summarize_+3A_df">df</code></td>
<td>
<p>dataset produced by pk_build().</p>
</td></tr>
<tr><td><code id="pk_summarize_+3A_dir">dir</code></td>
<td>
<p>filepath for output directory.</p>
</td></tr>
<tr><td><code id="pk_summarize_+3A_strat.by">strat.by</code></td>
<td>
<p>vector of variables names to stratify the summary tables.</p>
</td></tr>
<tr><td><code id="pk_summarize_+3A_ignore.c">ignore.c</code></td>
<td>
<p>ignores records flagged in the C column when TRUE.</p>
</td></tr>
<tr><td><code id="pk_summarize_+3A_na">na</code></td>
<td>
<p>numeric value to be interpreted as NA or missing.</p>
</td></tr>
<tr><td><code id="pk_summarize_+3A_docx">docx</code></td>
<td>
<p>creates summary tables as a Word document when TRUE.</p>
</td></tr>
<tr><td><code id="pk_summarize_+3A_pptx">pptx</code></td>
<td>
<p>creates summary tables as a PowerPoint document when TRUE.</p>
</td></tr>
<tr><td><code id="pk_summarize_+3A_docx.font">docx.font</code></td>
<td>
<p>font for the summary tables in the Word document.</p>
</td></tr>
<tr><td><code id="pk_summarize_+3A_docx.size">docx.size</code></td>
<td>
<p>font size for the summary tables in the Word document.</p>
</td></tr>
<tr><td><code id="pk_summarize_+3A_docx.template">docx.template</code></td>
<td>
<p>filepath for template .docx file. When NULL, the summary tables print to a blank document.</p>
</td></tr>
<tr><td><code id="pk_summarize_+3A_pptx.template">pptx.template</code></td>
<td>
<p>filepath for template .pptx file. When NULL, the summary tables print to a blank slide.</p>
</td></tr>
<tr><td><code id="pk_summarize_+3A_pptx.font">pptx.font</code></td>
<td>
<p>font for the summary tables in the PowerPoint document.</p>
</td></tr>
<tr><td><code id="pk_summarize_+3A_pptx.size">pptx.size</code></td>
<td>
<p>font size for the summary tables in the PowerPoint document.</p>
</td></tr>
<tr><td><code id="pk_summarize_+3A_docx.orientation">docx.orientation</code></td>
<td>
<p>orientation of .docx files.</p>
</td></tr>
<tr><td><code id="pk_summarize_+3A_ignore.request">ignore.request</code></td>
<td>
<p>vector of additional logical expressions to filter the datase prior to summary.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>summary tables as .csv, .docx, and .pptx files
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Simple ex domain with 1 subject and 1 dose
ex &lt;- data.frame(STUDYID = "ABC101",
                 USUBJID = "ABC101-001",
                 EXSTDTC = "2000-01-01 10:00:00",
                 EXSTDY = 1,
                 EXTPTNUM = 0,
                 EXDOSE = 100,
                 CMT = 1,
                 EXTRT = "ABC",
                 EXDOSU = "mg",
                 VISIT = "Day 1",
                 EXTPT = "Dose",
                 EXDOSFRQ = "Once",
                 EXROUTE = "Oral")

## Simple pc domain with 1 subject and 3 observations
pc &lt;- data.frame(USUBJID = "ABC101-001",
                 PCDTC = c("2000-01-01 09:40:00",
                           "2000-01-01 10:29:00",
                           "2000-01-01 12:05:00"),
                 PCDY = 1,
                 PCTPTNUM = c(0, ##Units of hours
                              0.021,
                              0.083),
                 PCSTRESN = c(NA,
                              469,
                              870),
                 PCLLOQ = 25,
                 CMT = 2,
                 VISIT = "Day 1",
                 PCTPT = c("Pre-dose",
                           "30-min post-dose",
                           "2-hr post-dose"),
                 PCTEST = "ABC",
                 PCSTRESU = "ug/mL")

## Create with pk_build()
df &lt;- pk_build(ex, pc)


## Generate summary statistics with pk_summarize()
pk_summarize(df)



</code></pre>

<hr>
<h2 id='pk_write'>Write PK(PD) dataset to specified location</h2><span id='topic+pk_write'></span>

<h3>Description</h3>

<p>Dataset created by pk_build() or pk_combine() will be outputted as a .csv file with NONMEM-standard formatting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pk_write(df, file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pk_write_+3A_df">df</code></td>
<td>
<p>PK(PD) dataframe</p>
</td></tr>
<tr><td><code id="pk_write_+3A_file">file</code></td>
<td>
<p>filepath</p>
</td></tr>
</table>


<h3>Value</h3>

<p>writes dataset to specified location
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Simple ex domain with 1 subject and 1 dose
ex &lt;- data.frame(STUDYID = "ABC101",
                 USUBJID = "ABC101-001",
                 EXSTDTC = "2000-01-01 10:00:00",
                 EXSTDY = 1,
                 EXTPTNUM = 0,
                 EXDOSE = 100,
                 CMT = 1,
                 EXTRT = "ABC",
                 EXDOSU = "mg",
                 VISIT = "Day 1",
                 EXTPT = "Dose",
                 EXDOSFRQ = "Once",
                 EXROUTE = "Oral")

## Simple pc domain with 1 subject and 3 observations
pc &lt;- data.frame(USUBJID = "ABC101-001",
                 PCDTC = c("2000-01-01 09:40:00",
                           "2000-01-01 10:29:00",
                           "2000-01-01 12:05:00"),
                 PCDY = 1,
                 PCTPTNUM = c(0, ##Units of hours
                              0.021,
                              0.083),
                 PCSTRESN = c(NA,
                              469,
                              870),
                 PCLLOQ = 25,
                 CMT = 2,
                 VISIT = "Day 1",
                 PCTPT = c("Pre-dose",
                           "30-min post-dose",
                           "2-hr post-dose"),
                 PCTEST = "ABC",
                 PCSTRESU = "ug/mL")

## Create with pk_build()
df &lt;- pk_build(ex, pc)

## Write with pk_write()
name &lt;- "dataset.csv"
pk_write(df, file.path(tempdir(), name))

</code></pre>

<hr>
<h2 id='variable_list_create'>Create a dataframe with standard variable names and definitions</h2><span id='topic+variable_list_create'></span>

<h3>Description</h3>

<p>Variable list should be used as an input to the apmx::pk_define() function.
The user should add additional definitions to the file for custom columns with apmx::variable_list_add().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>variable_list_create(
  variable = NULL,
  categorization = NULL,
  description = NULL,
  comment = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="variable_list_create_+3A_variable">variable</code></td>
<td>
<p>vector of variable names</p>
</td></tr>
<tr><td><code id="variable_list_create_+3A_categorization">categorization</code></td>
<td>
<p>vector of category names</p>
</td></tr>
<tr><td><code id="variable_list_create_+3A_description">description</code></td>
<td>
<p>vector of variable descriptions</p>
</td></tr>
<tr><td><code id="variable_list_create_+3A_comment">comment</code></td>
<td>
<p>vector of variable comments (can be left NA)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>dataframe of standard variable definitions
</p>


<h3>Examples</h3>

<pre><code class='language-R'>vl &lt;- variable_list_create(variable = c("WEIGHT", "HEIGHT"),
                           categorization = rep("Covariate", 2),
                           description = c("weight", "height"))

</code></pre>

<hr>
<h2 id='version_log'>Create and maintain a dataset version log</h2><span id='topic+version_log'></span>

<h3>Description</h3>

<p>Version log is outputted as a .docx file.
Document tracks changes in subject count, record count, new variables, and changing variables.
User comments in the word document are preserved between versions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>version_log(
  df,
  name,
  file = NULL,
  prevdata = NULL,
  template = NULL,
  comp_var,
  src_data = "",
  font = "Times New Roman",
  size = 9,
  orient = "landscape"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="version_log_+3A_df">df</code></td>
<td>
<p>filepath of new dataset</p>
</td></tr>
<tr><td><code id="version_log_+3A_name">name</code></td>
<td>
<p>name of the dataset (filename with .csv suffix)</p>
</td></tr>
<tr><td><code id="version_log_+3A_file">file</code></td>
<td>
<p>filepath for version log file (.docx)</p>
</td></tr>
<tr><td><code id="version_log_+3A_prevdata">prevdata</code></td>
<td>
<p>comparison dataset filepath</p>
</td></tr>
<tr><td><code id="version_log_+3A_template">template</code></td>
<td>
<p>template docx filepath</p>
</td></tr>
<tr><td><code id="version_log_+3A_comp_var">comp_var</code></td>
<td>
<p>grouping variables for comparison</p>
</td></tr>
<tr><td><code id="version_log_+3A_src_data">src_data</code></td>
<td>
<p>string to describe source data</p>
</td></tr>
<tr><td><code id="version_log_+3A_font">font</code></td>
<td>
<p>font style</p>
</td></tr>
<tr><td><code id="version_log_+3A_size">size</code></td>
<td>
<p>font size</p>
</td></tr>
<tr><td><code id="version_log_+3A_orient">orient</code></td>
<td>
<p>document orientation</p>
</td></tr>
</table>


<h3>Value</h3>

<p>version log as a .docx file
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Simple ex domain with 1 subject and 1 dose
ex &lt;- data.frame(STUDYID = "ABC101",
                 USUBJID = "ABC101-001",
                 EXSTDTC = "2000-01-01 10:00:00",
                 EXSTDY = 1,
                 EXTPTNUM = 0,
                 EXDOSE = 100,
                 CMT = 1,
                 EXTRT = "ABC",
                 EXDOSU = "mg",
                 VISIT = "Day 1",
                 EXTPT = "Dose",
                 EXDOSFRQ = "Once",
                 EXROUTE = "Oral")

## Simple pc domain with 1 subject and 3 observations
pc &lt;- data.frame(USUBJID = "ABC101-001",
                 PCDTC = c("2000-01-01 09:40:00",
                           "2000-01-01 10:29:00",
                           "2000-01-01 12:05:00"),
                 PCDY = 1,
                 PCTPTNUM = c(0, ##Units of hours
                              0.021,
                              0.083),
                 PCSTRESN = c(NA,
                              469,
                              870),
                 PCLLOQ = 25,
                 CMT = 2,
                 VISIT = "Day 1",
                 PCTPT = c("Pre-dose",
                           "30-min post-dose",
                           "2-hr post-dose"),
                 PCTEST = "ABC",
                 PCSTRESU = "ug/mL")

## Create with pk_build()
df &lt;- pk_build(ex, pc)

## Document with version_log()
vlog &lt;- version_log(df, name = "PK_DATA_V01.csv")

</code></pre>

<hr>
<h2 id='VL'>VL</h2><span id='topic+VL'></span>

<h3>Description</h3>

<p>Variable list with apmx variables and definitions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>VL
</code></pre>


<h3>Format</h3>

<p>## 'VL'
A data frame with 66 rows and 4 variables:
</p>

<dl>
<dt>Variable</dt><dd><p>Column or variable name</p>
</dd>
<dt>Categorization</dt><dd><p>Column or variable category</p>
</dd>
<dt>Description</dt><dd><p>Column or variable description</p>
</dd>
<dt>Comment</dt><dd><p>NA by default</p>
</dd>
</dl>


</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
