<!DOCTYPE html><html lang="en"><head><title>Help for package processanimateR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {processanimateR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#activity_select_decoration'><p>Decoration callback for activity selection</p></a></li>
<li><a href='#animate_process'><p>Animate cases on a process map</p></a></li>
<li><a href='#attribution_osm'><p>Standard attribution</p></a></li>
<li><a href='#example_log'><p>Example event log used in documentation</p></a></li>
<li><a href='#icon_circle'><p>Standard circle marker</p></a></li>
<li><a href='#icon_marker'><p>Standard map marker</p></a></li>
<li><a href='#processanimaterOutput'><p>Create a process animation output element</p></a></li>
<li><a href='#renderer_graphviz'><p>Render as a plain graph</p></a></li>
<li><a href='#renderer_leaflet'><p>Render as graph on a geographical map</p></a></li>
<li><a href='#renderProcessanimater'><p>Renders process animation output</p></a></li>
<li><a href='#token_aes'><p>Tokens aesthetics mapping</p></a></li>
<li><a href='#token_scale'><p>Token scale mapping values to aesthetics</p></a></li>
<li><a href='#token_select_decoration'><p>Decoration callback for token selection</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Process Map Token Replay Animation</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.5</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-07-14</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides animated process maps based on the 'procesmapR' package.
  Cases stored in event logs created with with 'bupaR' S3 class eventlog() are
  rendered as tokens (SVG shapes) and animated according to their occurrence 
  times on top of the process map. For rendering SVG animations ('SMIL') and the
  'htmlwidget' package are used.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>bupaR, processmapR (&ge; 0.3.1), rlang, magrittr, dplyr, tidyr,
htmlwidgets, DiagrammeR (&ge; 1.0.0), grDevices, stringr,
htmltools</td>
</tr>
<tr>
<td>Suggests:</td>
<td>eventdataR, edeaR, testthat, knitr, rmarkdown, shiny,
RColorBrewer, lubridate</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/bupaverse/processanimateR/">https://github.com/bupaverse/processanimateR/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/bupaverse/processanimateR/issues">https://github.com/bupaverse/processanimateR/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-07-20 12:14:54 UTC; FelixMannhardt</td>
</tr>
<tr>
<td>Author:</td>
<td>Felix Mannhardt [aut, cre],
  Gert Janssenswillen [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Felix Mannhardt &lt;f.mannhardt@tue.nl&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-07-20 12:40:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='activity_select_decoration'>Decoration callback for activity selection</h2><span id='topic+activity_select_decoration'></span>

<h3>Description</h3>

<p>Decoration callback for activity selection
</p>


<h3>Usage</h3>

<pre><code class='language-R'>activity_select_decoration(
  stroke_dasharray = "2",
  stroke_width = "2",
  stroke = "black"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="activity_select_decoration_+3A_stroke_dasharray">stroke_dasharray</code></td>
<td>
<p>Sets the 'stroke-dasharray' attribute for selected activities.</p>
</td></tr>
<tr><td><code id="activity_select_decoration_+3A_stroke_width">stroke_width</code></td>
<td>
<p>Sets the 'stroke-width' attribute for selected activities.</p>
</td></tr>
<tr><td><code id="activity_select_decoration_+3A_stroke">stroke</code></td>
<td>
<p>Sets the 'stroke' attribute for selected activities.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A JavaScript callback function called when activity selection changes.
</p>


<h3>See Also</h3>

<p>animate_process
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create a decoration callback that increases the activity stroke width
activity_select_decoration(stroke_width = "5")

</code></pre>

<hr>
<h2 id='animate_process'>Animate cases on a process map</h2><span id='topic+animate_process'></span>

<h3>Description</h3>

<p>This function animates the cases stored in a 'bupaR' event log on top of a process model.
Each case is represented by a token that travels through the process model according to the waiting and processing times of activities.
Currently, animation is only supported for process models created by <code><a href="processmapR.html#topic+process_map">process_map</a></code> of the 'processmapR' package.
The animation will be rendered as SVG animation (SMIL) using the 'htmlwidgets' framework. Each token is a SVG shape and customizable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>animate_process(
  eventlog,
  processmap = process_map(eventlog, render = F, ...),
  renderer = renderer_graphviz(),
  mode = c("absolute", "relative", "off"),
  duration = 60,
  jitter = 0,
  timeline = TRUE,
  legend = NULL,
  initial_state = c("playing", "paused"),
  initial_time = 0,
  repeat_count = 1,
  repeat_delay = 0.5,
  epsilon_time = duration/1000,
  mapping = token_aes(),
  token_callback_onclick = c("function(svg_root, svg_element, case_id) {", "}"),
  token_callback_select = token_select_decoration(),
  activity_callback_onclick = c("function(svg_root, svg_element, activity_id) {", "}"),
  activity_callback_select = activity_select_decoration(),
  elementId = NULL,
  preRenderHook = NULL,
  width = NULL,
  height = NULL,
  sizingPolicy = htmlwidgets::sizingPolicy(browser.fill = TRUE, viewer.fill = TRUE,
    knitr.figure = FALSE, knitr.defaultWidth = "100%", knitr.defaultHeight = "300"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="animate_process_+3A_eventlog">eventlog</code></td>
<td>
<p>The 'bupaR' event log object that should be animated</p>
</td></tr>
<tr><td><code id="animate_process_+3A_processmap">processmap</code></td>
<td>
<p>A process map created with 'processmapR' (<code><a href="processmapR.html#topic+process_map">process_map</a></code>)
on which the event log will be animated. If not provided a standard process map will be generated
from the supplied event log.</p>
</td></tr>
<tr><td><code id="animate_process_+3A_renderer">renderer</code></td>
<td>
<p>Whether to use Graphviz (<code><a href="#topic+renderer_graphviz">renderer_graphviz</a></code>) to layout and render the process map,
or to render the process map using Leaflet (<code><a href="#topic+renderer_leaflet">renderer_leaflet</a></code>) on a geographical map.</p>
</td></tr>
<tr><td><code id="animate_process_+3A_mode">mode</code></td>
<td>
<p>Whether to animate the cases according to their actual time of occurrence ('absolute') or to start all cases at once ('relative').</p>
</td></tr>
<tr><td><code id="animate_process_+3A_duration">duration</code></td>
<td>
<p>The overall duration of the animation, all times are scaled according to this overall duration.</p>
</td></tr>
<tr><td><code id="animate_process_+3A_jitter">jitter</code></td>
<td>
<p>The magnitude of a random coordinate translation, known as jitter in scatterplots, which is added to each token.
Adding jitter can help to disambiguate tokens drawn on top of each other.</p>
</td></tr>
<tr><td><code id="animate_process_+3A_timeline">timeline</code></td>
<td>
<p>Whether to render a timeline slider in supported browsers (Work only on recent versions of Chrome and Firefox).</p>
</td></tr>
<tr><td><code id="animate_process_+3A_legend">legend</code></td>
<td>
<p>Whether to show a legend for the 'size' or the 'color' scale. The default is not to show a legend.</p>
</td></tr>
<tr><td><code id="animate_process_+3A_initial_state">initial_state</code></td>
<td>
<p>Whether the initial playback state is 'playing' or 'paused'. The default is 'playing'.</p>
</td></tr>
<tr><td><code id="animate_process_+3A_initial_time">initial_time</code></td>
<td>
<p>Sets the initial time of the animation. The default value is '0'.</p>
</td></tr>
<tr><td><code id="animate_process_+3A_repeat_count">repeat_count</code></td>
<td>
<p>The number of times the process animation is repeated.</p>
</td></tr>
<tr><td><code id="animate_process_+3A_repeat_delay">repeat_delay</code></td>
<td>
<p>The seconds to wait before one repetition of the animation.</p>
</td></tr>
<tr><td><code id="animate_process_+3A_epsilon_time">epsilon_time</code></td>
<td>
<p>A (small) time to be added to every animation to ensure that tokens are visible.</p>
</td></tr>
<tr><td><code id="animate_process_+3A_mapping">mapping</code></td>
<td>
<p>A list of aesthetic mappings from event log attributes to certain visual parameters of the tokens.
Use <code><a href="#topic+token_aes">token_aes</a></code> to create a suitable mapping list.</p>
</td></tr>
<tr><td><code id="animate_process_+3A_token_callback_onclick">token_callback_onclick</code></td>
<td>
<p>A JavaScript function that is called when a token is clicked.
The function is parsed by <code><a href="htmlwidgets.html#topic+JS">JS</a></code> and received three parameters: &lsquo;svg_root', &rsquo;svg_element', and 'case_id'.</p>
</td></tr>
<tr><td><code id="animate_process_+3A_token_callback_select">token_callback_select</code></td>
<td>
<p>A JavaScript callback function called when token selection changes.</p>
</td></tr>
<tr><td><code id="animate_process_+3A_activity_callback_onclick">activity_callback_onclick</code></td>
<td>
<p>A JavaScript function that is called when an activity is clicked.
The function is parsed by <code><a href="htmlwidgets.html#topic+JS">JS</a></code> and received three parameters: 'svg_root', 'svg_element', and 'activity_id'.</p>
</td></tr>
<tr><td><code id="animate_process_+3A_activity_callback_select">activity_callback_select</code></td>
<td>
<p>A JavaScript callback function called when activity selection changes.</p>
</td></tr>
<tr><td><code id="animate_process_+3A_elementid">elementId</code></td>
<td>
<p>passed through to <code><a href="htmlwidgets.html#topic+createWidget">createWidget</a></code>. A custom elementId is useful to capture the selection events
via input$elementId_tokens and input$elementId_activities when used in Shiny.</p>
</td></tr>
<tr><td><code id="animate_process_+3A_prerenderhook">preRenderHook</code></td>
<td>
<p>passed through to <code><a href="htmlwidgets.html#topic+createWidget">createWidget</a></code>.</p>
</td></tr>
<tr><td><code id="animate_process_+3A_width">width</code>, <code id="animate_process_+3A_height">height</code></td>
<td>
<p>Fixed size for widget (in css units).
The default is NULL, which results in intelligent automatic sizing based on the widget's container.</p>
</td></tr>
<tr><td><code id="animate_process_+3A_sizingpolicy">sizingPolicy</code></td>
<td>
<p>Options that govern how the widget is sized in various
containers (e.g. a standalone browser, the RStudio Viewer, a knitr figure,
or a Shiny output binding). These options can be specified by calling the
<code><a href="htmlwidgets.html#topic+sizingPolicy">sizingPolicy</a></code> function.</p>
</td></tr>
<tr><td><code id="animate_process_+3A_...">...</code></td>
<td>
<p>Options passed on to <code><a href="processmapR.html#topic+process_map">process_map</a></code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="processmapR.html#topic+process_map">process_map</a></code>, <code><a href="#topic+token_aes">token_aes</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(example_log)

# Animate the process with default options (absolute time and 60s duration)
animate_process(example_log)

# Animate the process with default options (relative time, with jitter, infinite repeat)
animate_process(example_log, mode = "relative", jitter = 10, repeat_count = Inf)


</code></pre>

<hr>
<h2 id='attribution_osm'>Standard attribution</h2><span id='topic+attribution_osm'></span>

<h3>Description</h3>

<p>This is the standard attribution advised for OPenStreetMap tiles.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>attribution_osm()
</code></pre>


<h3>Value</h3>

<p>The attribution character vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>attribution_osm()
</code></pre>

<hr>
<h2 id='example_log'>Example event log used in documentation</h2><span id='topic+example_log'></span>

<h3>Description</h3>

<p>Example event log used in documentation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>example_log
</code></pre>


<h3>Format</h3>

<p>An bupaR event log
</p>

<hr>
<h2 id='icon_circle'>Standard circle marker</h2><span id='topic+icon_circle'></span>

<h3>Description</h3>

<p>The marker is based on Material Design (Apache 2.0 License): https://material.io/
</p>


<h3>Usage</h3>

<pre><code class='language-R'>icon_circle()
</code></pre>


<h3>Value</h3>

<p>SVG code for a map  marker.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>icon_circle()
</code></pre>

<hr>
<h2 id='icon_marker'>Standard map marker</h2><span id='topic+icon_marker'></span>

<h3>Description</h3>

<p>The marker is based on Material Design (Apache 2.0 License): https://material.io/
</p>


<h3>Usage</h3>

<pre><code class='language-R'>icon_marker()
</code></pre>


<h3>Value</h3>

<p>SVG code for a map  marker.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>icon_marker()
</code></pre>

<hr>
<h2 id='processanimaterOutput'>Create a process animation output element</h2><span id='topic+processanimaterOutput'></span>

<h3>Description</h3>

<p>Renders a renderProcessanimater within an application page.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>processanimaterOutput(outputId, width = "100%", height = "400px")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="processanimaterOutput_+3A_outputid">outputId</code></td>
<td>
<p>Output variable to read the animation from</p>
</td></tr>
<tr><td><code id="processanimaterOutput_+3A_width">width</code>, <code id="processanimaterOutput_+3A_height">height</code></td>
<td>
<p>Must be a valid CSS unit (like 100
which will be coerced to a string and have px appended.</p>
</td></tr>
</table>

<hr>
<h2 id='renderer_graphviz'>Render as a plain graph</h2><span id='topic+renderer_graphviz'></span>

<h3>Description</h3>

<p>This renderer uses viz.js to render the process map using the DOT layout.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>renderer_graphviz(
  svg_fit = TRUE,
  svg_contain = FALSE,
  svg_resize_fit = TRUE,
  zoom_controls = TRUE,
  zoom_initial = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="renderer_graphviz_+3A_svg_fit">svg_fit</code></td>
<td>
<p>Whether to scale the process map to fully fit in its container. If set to 'TRUE' the process map will be scaled to be fully visible and may appear very small.</p>
</td></tr>
<tr><td><code id="renderer_graphviz_+3A_svg_contain">svg_contain</code></td>
<td>
<p>Whether to scale the process map to use all available space (contain) from its container. If set to 'FALSE', if 'svg_fit' is set this takes precedence.</p>
</td></tr>
<tr><td><code id="renderer_graphviz_+3A_svg_resize_fit">svg_resize_fit</code></td>
<td>
<p>Whether to (re)-fit the process map to its container upon resize.</p>
</td></tr>
<tr><td><code id="renderer_graphviz_+3A_zoom_controls">zoom_controls</code></td>
<td>
<p>Whether to show zoom controls.</p>
</td></tr>
<tr><td><code id="renderer_graphviz_+3A_zoom_initial">zoom_initial</code></td>
<td>
<p>The initial zoom level to use.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A rendering function to be used with <code><a href="#topic+animate_process">animate_process</a></code>
</p>


<h3>See Also</h3>

<p>animate_process
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(example_log)

# Animate the process with the default GraphViz DOT renderer
animate_process(example_log, renderer = renderer_graphviz())

</code></pre>

<hr>
<h2 id='renderer_leaflet'>Render as graph on a geographical map</h2><span id='topic+renderer_leaflet'></span>

<h3>Description</h3>

<p>This renderer uses Leaflet to draw the nodes and egdes of the process map on a geographical map.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>renderer_leaflet(
  node_coordinates,
  edge_coordinates = data.frame(act_from = character(0), act_to = character(0), lat =
    numeric(0), lng = numeric(0), stringsAsFactors = FALSE),
  layer = c(paste0("new L.TileLayer('", tile, "',"), paste0("{ attribution : '",
    attribution_osm(), "'})")),
  tile = "http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
  options = list(),
  grayscale = TRUE,
  icon_act = icon_marker(),
  icon_start = icon_circle(),
  icon_end = icon_circle(),
  scale_max = 4,
  scale_min = 0.25
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="renderer_leaflet_+3A_node_coordinates">node_coordinates</code></td>
<td>
<p>A data frame with node coordinates in the format 'act', 'lat', 'lng'.</p>
</td></tr>
<tr><td><code id="renderer_leaflet_+3A_edge_coordinates">edge_coordinates</code></td>
<td>
<p>A data frame with additional edge coordinates in the format 'act_from', 'act_to', 'lat', 'lng'.</p>
</td></tr>
<tr><td><code id="renderer_leaflet_+3A_layer">layer</code></td>
<td>
<p>The JavaScript code used to create a Leaflet layer. A TileLayer is used as default value.</p>
</td></tr>
<tr><td><code id="renderer_leaflet_+3A_tile">tile</code></td>
<td>
<p>The URL to be used for the standard Leaflet TileLayer.</p>
</td></tr>
<tr><td><code id="renderer_leaflet_+3A_options">options</code></td>
<td>
<p>A named list of leaflet options, such as the center point of the map and the initial zoom level.</p>
</td></tr>
<tr><td><code id="renderer_leaflet_+3A_grayscale">grayscale</code></td>
<td>
<p>Whether to apply a grayscale filter to the map.</p>
</td></tr>
<tr><td><code id="renderer_leaflet_+3A_icon_act">icon_act</code></td>
<td>
<p>The SVG code used for the activity icon.</p>
</td></tr>
<tr><td><code id="renderer_leaflet_+3A_icon_start">icon_start</code></td>
<td>
<p>The SVG code used for the start icon.</p>
</td></tr>
<tr><td><code id="renderer_leaflet_+3A_icon_end">icon_end</code></td>
<td>
<p>The SVG code used for the end icon.</p>
</td></tr>
<tr><td><code id="renderer_leaflet_+3A_scale_max">scale_max</code></td>
<td>
<p>The maximum factor to be used to scale the process map with when zooming out.</p>
</td></tr>
<tr><td><code id="renderer_leaflet_+3A_scale_min">scale_min</code></td>
<td>
<p>The minimum factor to be used to scale the process map with when zooming in.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A rendering function to be used with <code><a href="#topic+animate_process">animate_process</a></code>
</p>


<h3>See Also</h3>

<p>animate_process
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(example_log)

# Animate the example process with activities placed in some locations
animate_process(example_log,
  renderer = renderer_leaflet(
    node_coordinates = data.frame(
       act = c("A", "B", "C", "D", "ARTIFICIAL_START", "ARTIFICIAL_END"),
       lat = c(63.443680, 63.426925, 63.409207, 63.422336, 63.450950, 63.419706),
       lng = c(10.383625, 10.396972, 10.406418, 10.432119, 10.383368, 10.252347),
       stringsAsFactors = FALSE),
    edge_coordinates = data.frame(
       act_from = c("B"),
       act_to = c("C"),
       lat = c(63.419207),
       lng = c(10.386418),
       stringsAsFactors = FALSE),
    options = list(center = c(63.412273, 10.399590), zoom = 12)),
  duration = 5, repeat_count = Inf)

</code></pre>

<hr>
<h2 id='renderProcessanimater'>Renders process animation output</h2><span id='topic+renderProcessanimater'></span>

<h3>Description</h3>

<p>Renders a SVG process animation suitable to be used by processanimaterOutput.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>renderProcessanimater(expr, env = parent.frame(), quoted = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="renderProcessanimater_+3A_expr">expr</code></td>
<td>
<p>The expression generating a process animation (animate_process).</p>
</td></tr>
<tr><td><code id="renderProcessanimater_+3A_env">env</code></td>
<td>
<p>The environment in which to evaluate expr.</p>
</td></tr>
<tr><td><code id="renderProcessanimater_+3A_quoted">quoted</code></td>
<td>
<p>Is expr a quoted expression (with quote())? This is useful if you want to save an expression in a variable.</p>
</td></tr>
</table>

<hr>
<h2 id='token_aes'>Tokens aesthetics mapping</h2><span id='topic+token_aes'></span>

<h3>Description</h3>

<p>Tokens aesthetics mapping
</p>


<h3>Usage</h3>

<pre><code class='language-R'>token_aes(
  size = token_scale(),
  color = token_scale(),
  image = token_scale(),
  opacity = token_scale(),
  shape = "circle",
  attributes = list()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="token_aes_+3A_size">size</code></td>
<td>
<p>The scale used for the token size.</p>
</td></tr>
<tr><td><code id="token_aes_+3A_color">color</code></td>
<td>
<p>The scale used for the token color,</p>
</td></tr>
<tr><td><code id="token_aes_+3A_image">image</code></td>
<td>
<p>The scale used for the token image.</p>
</td></tr>
<tr><td><code id="token_aes_+3A_opacity">opacity</code></td>
<td>
<p>The scale used for the token opacity.</p>
</td></tr>
<tr><td><code id="token_aes_+3A_shape">shape</code></td>
<td>
<p>The (fixed) SVG shape to be used to draw tokens. Can be either 'circle' (default), 'rect' or 'image'.
In the latter case the image URL needs to be specified as parameter 'token_image'.</p>
</td></tr>
<tr><td><code id="token_aes_+3A_attributes">attributes</code></td>
<td>
<p>A list of additional (fixed) SVG attributes to be added to each token.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An aesthetics mapping for 'animate_process'.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+animate_process">animate_process</a></code>, <code><a href="#topic+token_scale">token_scale</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(example_log)

# Change default token sizes / shape
animate_process(example_log, mapping = token_aes(size = token_scale(12), shape = "rect"))

# Change default token color
animate_process(example_log, mapping = token_aes(color = token_scale("red")))

# Change default token opacity
animate_process(example_log, mapping = token_aes(opacity = token_scale("0.2")))

# Change default token image (GIFs work too)
animate_process(example_log,
   mapping = token_aes(shape = "image",
    size = token_scale(10),
    image = token_scale("https://upload.wikimedia.org/wikipedia/en/5/5f/Pacman.gif")))

# A more elaborate example with a secondary data frame
library(eventdataR)
data(traffic_fines)
# Change token color based on a numeric attribute, here the nonsensical 'time' of an event
animate_process(edeaR::filter_trace_frequency(bupaR::sample_n(traffic_fines,1000),percentage=0.95),
  legend = "color", mode = "relative",
  mapping = token_aes(color = token_scale("amount",
                                          scale = "linear",
                                          range = c("yellow","red"))))


</code></pre>

<hr>
<h2 id='token_scale'>Token scale mapping values to aesthetics</h2><span id='topic+token_scale'></span>

<h3>Description</h3>

<p>Creates a 'list' of parameters suitable to be used as token scale in (<code><a href="#topic+token_aes">token_aes</a></code>) for mapping values to certain aesthetics of the tokens in a process map animation.
Refer to the d3-scale documentation (https://github.com/d3/d3-scale) for more information about how to set 'domain' and 'range' properly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>token_scale(
  attribute = NULL,
  scale = c("identity", "linear", "sqrt", "log", "quantize", "ordinal", "time"),
  domain = NULL,
  range = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="token_scale_+3A_attribute">attribute</code></td>
<td>
<p>This may be (1) the name of the event attribute to be used as values,
(2) a data frame with three columns (case, time, value) in which the values in the case column are matching the case identifier of the supplied event log, or
(3) a constant value that does not change over time.</p>
</td></tr>
<tr><td><code id="token_scale_+3A_scale">scale</code></td>
<td>
<p>Which D3 scale function to be used out of 'identity', 'linear', 'sqrt', 'log', 'quantize', 'ordinal', or 'time'.</p>
</td></tr>
<tr><td><code id="token_scale_+3A_domain">domain</code></td>
<td>
<p>The domain of the D3 scale function. Can be left NULL in which case it will be automatically determined based on the values.</p>
</td></tr>
<tr><td><code id="token_scale_+3A_range">range</code></td>
<td>
<p>The range of the D3 scale function. Should be a vector of two or more numerical values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A scale to be used with 'token_mapping'
</p>


<h3>See Also</h3>

<p><code><a href="#topic+animate_process">animate_process</a></code>, <code><a href="#topic+token_aes">token_aes</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(example_log)

# (1) Change token color based on a factor attribute
animate_process(example_log,
 legend = "color",
 mapping = token_aes(color = token_scale("res", scale = "ordinal",
  range = RColorBrewer::brewer.pal(8, "Paired"))))

# (2) Change token color based on second data frame
x &lt;- data.frame(case = as.character(rep(c(1,2,3), 2)),
                time = seq(from = as.POSIXct("2018-10-03 03:41:00"),
                           to = as.POSIXct("2018-10-03 06:00:00"),
                           length.out = 6),
                value = rep(c("orange", "green"), 3),
                stringsAsFactors = FALSE)

animate_process(example_log,
                mode = "relative",
                jitter = 10,
                legend = "color",
                mapping = token_aes(color = token_scale(x)))


# (3) Constant token color
animate_process(example_log,
 legend = "color",
 mapping = token_aes(color = token_scale("red")))

</code></pre>

<hr>
<h2 id='token_select_decoration'>Decoration callback for token selection</h2><span id='topic+token_select_decoration'></span>

<h3>Description</h3>

<p>Decoration callback for token selection
</p>


<h3>Usage</h3>

<pre><code class='language-R'>token_select_decoration(stroke = "black")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="token_select_decoration_+3A_stroke">stroke</code></td>
<td>
<p>Sets the 'stroke' attribute of selected tokens.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A JavaScript callback function called when token selection changes.
</p>


<h3>See Also</h3>

<p>animate_process
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create a decoration callback that paints tokens red
token_select_decoration("red")

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
