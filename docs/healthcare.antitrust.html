<!DOCTYPE html><html><head><title>Help for package healthcare.antitrust</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {healthcare.antitrust}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#cell_defn'><p>Allocate Observations to Cells</p></a></li>
<li><a href='#discharge_data'><p>A simulated dataset of hospital discharges</p></a></li>
<li><a href='#div_calc'><p>Diversion Ratio Calculator</p></a></li>
<li><a href='#healthcare.antitrust-package'><p>healthcare.antitrust: Healthcare Antitrust Analysis</p></a></li>
<li><a href='#wtp_calc'><p>Willingness-to-Pay Calculator</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Healthcare Antitrust Analysis</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.4</td>
</tr>
<tr>
<td>Description:</td>
<td>Antitrust analysis of
    healthcare markets. Contains functions to implement the 
    semiparametric estimation technique described in Raval, Rosenbaum,
    and Tenn (2017) "A Semiparametric Discrete Choice Model: An Application
    to Hospital Mergers" &lt;<a href="https://doi.org/10.1111%2Fecin.12454">doi:10.1111/ecin.12454</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://creativecommons.org/publicdomain/zero/1.0/legalcode">CC0</a></td>
</tr>
<tr>
<td>Copyright:</td>
<td>As a work of the United States government, this project is
in the public domain within the United States. Additionally, we
waive copyright and related rights in the work worldwide
through the CC0 1.0 Universal public domain dedication.</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>methods, stats</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/mpanhans/healthcare.antitrust">https://github.com/mpanhans/healthcare.antitrust</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-08 17:11:18 UTC; mattpanhans</td>
</tr>
<tr>
<td>Author:</td>
<td>Matthew T Panhans <a href="https://orcid.org/0000-0001-7874-6740"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Matthew T Panhans &lt;mpanhans@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-09 00:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='cell_defn'>Allocate Observations to Cells</h2><span id='topic+cell_defn'></span>

<h3>Description</h3>

<p>Take a dataset of hospital discharges, and assigns them to cells that
meet a minimum threshold cell size.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cell_defn(data, min_size, layers, count = "count", expandLayers = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cell_defn_+3A_data">data</code></td>
<td>
<p>Dataset of discharges.</p>
</td></tr>
<tr><td><code id="cell_defn_+3A_min_size">min_size</code></td>
<td>
<p>Minimize cell size.</p>
</td></tr>
<tr><td><code id="cell_defn_+3A_layers">layers</code></td>
<td>
<p>A list of lists. Each layer is a list of the variables
on which observations will be allocated to cells. The layers should
be ordered in decreasing refinement, so that observations not assigned
to a cell meeting the minimum size threshold can be assigned by a
more coarse layer.</p>
</td></tr>
<tr><td><code id="cell_defn_+3A_count">count</code></td>
<td>
<p>Name of variable which indicates the number of admissions
represented by an observation. Default variable name is <code>count</code>.</p>
</td></tr>
<tr><td><code id="cell_defn_+3A_expandlayers">expandLayers</code></td>
<td>
<p>logical; if only a single layer is given, setting this to
TRUE will expand the layer to a set of layers where each layer drops the
last variable in the list of the previous layer.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the variable <code>count</code> is not available, the function will assume that
each observation represents one admission, and a variable <code>count</code> will
be created in the output data frame to indicate this.
</p>
<p>When assigning observations to cells in a given layer, this function
only assigns observations that have not been previously assigned in a
finer layer. That is, the function assigns observations without
replacement. Assignment with replacement is currently not supported.
</p>
<p>For more details see the example vignette by typing:
<code>vignette("semipar_example", package = "healthcare.antitrust")</code>
</p>


<h3>Value</h3>

<p>A list of data frames. The first component in the list, <code>assigned</code>,
is the original data frame, with observations assigned to cells, and
excluding observations that were not assigned. The assigned cells are
designated by the variable <code>cell</code>, and the layer number in
which the observation is assigned to the cell is given by the variable
<code>cell_type</code>. The second component of the list, <code>unassigned</code>, is a
data frame with the unassigned observations.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(discharge_data, package = "healthcare.antitrust")

list1 &lt;- c("drg","age","zip5")
layers &lt;- list(list1)
th &lt;- 15
discharge_data$count &lt;- 1

outList &lt;- cell_defn(discharge_data,th,layers)

</code></pre>

<hr>
<h2 id='discharge_data'>A simulated dataset of hospital discharges</h2><span id='topic+discharge_data'></span>

<h3>Description</h3>

<p>A simulated dataset of hospital discharges containing patient
characteristics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>discharge_data
</code></pre>


<h3>Format</h3>

<p>A data frame with 1,200 rows (one for each discharge)
and 7 variables:
</p>

<dl>
<dt>drg</dt><dd><p>diagnosis related group (drg) code for the admission</p>
</dd>
<dt>age</dt><dd><p>patient age</p>
</dd>
<dt>zip5</dt><dd><p>patient 5 digit zip code of residence</p>
</dd>
<dt>hosp_id</dt><dd><p>hospital identifier</p>
</dd>
<dt>hospital</dt><dd><p>hospital name</p>
</dd>
<dt>sys_id</dt><dd><p>system identifier</p>
</dd>
<dt>system</dt><dd><p>system name</p>
</dd>
</dl>



<h3>Source</h3>

<p>Created as part of healthcare.antitrust package.
</p>

<hr>
<h2 id='div_calc'>Diversion Ratio Calculator</h2><span id='topic+div_calc'></span>

<h3>Description</h3>

<p>Calculates provider-level diversion ratios, once cells have been
defined.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>div_calc(
  data,
  cell = "cell",
  provider_id = "provider_id",
  provider = "provider",
  sys_id = "sys_id",
  focal_sys_id = NULL,
  party_ind = "party_ind",
  count = "count",
  dropDegenerateCell = TRUE,
  hosp_id = NA,
  hospital = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="div_calc_+3A_data">data</code></td>
<td>
<p>Dataset of patient choices, with required variables:
<code>cell</code>, <code>provider_id</code>, <code>hospital</code>, <code>sys_id</code>,
<code>party_ind</code>, <code>count</code>. Use other function arguments to
indicate alternative variable names to the default names.</p>
</td></tr>
<tr><td><code id="div_calc_+3A_cell">cell</code></td>
<td>
<p>Name of variable specifying cell to which each observation
has been allocated. Default variable name is <code>cell</code>. Can be
created by <code>cell_defn</code> function.</p>
</td></tr>
<tr><td><code id="div_calc_+3A_provider_id">provider_id</code></td>
<td>
<p>Name of variable specifying (numeric) provider
identifier. Default variable name is <code>provider_id</code>.</p>
</td></tr>
<tr><td><code id="div_calc_+3A_provider">provider</code></td>
<td>
<p>Name of variable specifying (string) provider name.
Default variable name is <code>provider</code>.</p>
</td></tr>
<tr><td><code id="div_calc_+3A_sys_id">sys_id</code></td>
<td>
<p>Name of variable specifying (numeric) system identifier.
Default variable name is <code>sys_id</code>.</p>
</td></tr>
<tr><td><code id="div_calc_+3A_focal_sys_id">focal_sys_id</code></td>
<td>
<p>numeric; list of sys_id's specifying systems of interest
for which diversions will be calculated from. For a merger, this will
typically be the system identifies of the merging parties.</p>
</td></tr>
<tr><td><code id="div_calc_+3A_party_ind">party_ind</code></td>
<td>
<p>deprecated; use focal_sys_id instead.</p>
</td></tr>
<tr><td><code id="div_calc_+3A_count">count</code></td>
<td>
<p>Name of variable indicating the number of admissions
represented by the observation. Set = 1 for every row if each
observation represents one admission.</p>
</td></tr>
<tr><td><code id="div_calc_+3A_dropdegeneratecell">dropDegenerateCell</code></td>
<td>
<p>logical; specifies how to treat cells with a
100 percent within-system share. If TRUE, observations in degenerate, 100
percent share cells will be ignored in the diversion ratio calculation.
If FALSE, any such individuals will be assigned to the outside option,
but still included in the denominator, so that the inside-option diversion
will total less than 100  percent.</p>
</td></tr>
<tr><td><code id="div_calc_+3A_hosp_id">hosp_id</code></td>
<td>
<p>deprecated; use provider_id instead.</p>
</td></tr>
<tr><td><code id="div_calc_+3A_hospital">hospital</code></td>
<td>
<p>deprecated; use provider instead.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For system-to-system diversions, set <code>provider_id</code> and
<code>provider</code> equal to corresponding system-level identifiers.
Diversions then reflect that patients are not allowed to divert to
within-system alternative providers
</p>
<p>For more details see the example vignette by typing:
<code>vignette("semipar_example", package = "healthcare.antitrust")</code>
</p>


<h3>Value</h3>

<p>A list with two components. The first component, <code>provider_level</code>,
is a matrix giving provider-level diversions from party providers to
all other providers The second object, <code>sys_level</code>, is a matrix that
aggregates party providers to systems, thus giving diversions from party
systems to all other providers
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(discharge_data, package = "healthcare.antitrust")

list1 &lt;- c("drg","age","zip5")
layers &lt;- list(list1)
th &lt;- 15
discharge_data$count &lt;- 1

outList &lt;- cell_defn(discharge_data,th,layers)
D0 &lt;- outList$assigned

out &lt;- div_calc(D0, provider_id = "hosp_id", provider = "hospital",
          focal_sys_id = c(1,5))

</code></pre>

<hr>
<h2 id='healthcare.antitrust-package'>healthcare.antitrust: Healthcare Antitrust Analysis</h2><span id='topic+healthcare.antitrust'></span><span id='topic+healthcare.antitrust-package'></span>

<h3>Description</h3>

<p>Antitrust analysis of healthcare markets. Contains functions to implement the semiparametric estimation technique described in Raval, Rosenbaum, and Tenn (2017) &quot;A Semiparametric Discrete Choice Model: An Application to Hospital Mergers&quot; <a href="https://doi.org/10.1111/ecin.12454">doi:10.1111/ecin.12454</a>.
</p>


<h3>Details</h3>

<p>For more details see the example vignette by typing:
<code>vignette("semipar_example", package = "healthcare.antitrust")</code>
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Matthew T Panhans <a href="mailto:mpanhans@gmail.com">mpanhans@gmail.com</a> (<a href="https://orcid.org/0000-0001-7874-6740">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/mpanhans/healthcare.antitrust">https://github.com/mpanhans/healthcare.antitrust</a>
</p>
</li></ul>


<hr>
<h2 id='wtp_calc'>Willingness-to-Pay Calculator</h2><span id='topic+wtp_calc'></span>

<h3>Description</h3>

<p>This function calculates the system-level Willingness-To-Pay.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wtp_calc(
  data,
  cell = "cell",
  sys_id = "sys_id",
  count = "count",
  weight = "weight",
  dropDegenerateCell = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wtp_calc_+3A_data">data</code></td>
<td>
<p>Dataset of hospital discharges. Required variables:
<code>cell</code> and <code>sys_id</code>. Use other function arguments to
indicate alternative variable names to the default names.</p>
</td></tr>
<tr><td><code id="wtp_calc_+3A_cell">cell</code></td>
<td>
<p>Name of variable specifying cell to which each observation
has been allocated. Default variable name is <code>cell</code>. Can be
created by <code>cell_defn</code> function.</p>
</td></tr>
<tr><td><code id="wtp_calc_+3A_sys_id">sys_id</code></td>
<td>
<p>Name of variable specifying (numeric) system identifier.
Default variable name is <code>sys_id</code>.</p>
</td></tr>
<tr><td><code id="wtp_calc_+3A_count">count</code></td>
<td>
<p>Name of variable indicating the number of admissions
represented by the observation. Set = 1 for every row if each
observation represents one admission.</p>
</td></tr>
<tr><td><code id="wtp_calc_+3A_weight">weight</code></td>
<td>
<p>Name of variable indicating designated weight of admission; =1 if
observations should be equally weighted.</p>
</td></tr>
<tr><td><code id="wtp_calc_+3A_dropdegeneratecell">dropDegenerateCell</code></td>
<td>
<p>logical; specifies how to treat cells with a
100 percent within-system share. If TRUE, observations in degenerate,
100 percent share cells will be ignored in the WTP calculation. If FALSE,
an adjustment is made where any cells with &gt; 99 percent share at a single
hospital have the share set to 99.0 percent.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function calculates the system-level WTP. For use in a WTP
simulation exercise of the &quot;WTP/Q Method&quot; described in Brand and Balan
(2018) <a href="https://doi.org/10.2139/SSRN.3153109">doi:10.2139/SSRN.3153109</a>.
Hospital systems need to be numbered by <code>sys_id</code>, with a distinct
<code>sys_id</code> for each independent hospital.
</p>
<p>The <code>weight</code> input might for example be a DRG weight for each inpatient
hospital admission.
</p>
<p>For more details see the example vignette by typing:
<code>vignette("semipar_example", package = "healthcare.antitrust")</code>
</p>


<h3>Value</h3>

<p>A data frame with the number of rows equal to the number of systems
in the input data frame, and the following variables: <code>sys_id</code> is the system
identifier, <code>WTP_s</code> is the system's WTP, <code>N_s</code> is the number of admission
for the system, and <code>WTP_s_wt</code> is the weighted WTP for the system
if the weight input is provided.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(discharge_data, package = "healthcare.antitrust")

list1 &lt;- c("drg","age","zip5")
layers &lt;- list(list1)
th &lt;- 15
discharge_data$count &lt;- 1

outList &lt;- cell_defn(discharge_data,th,layers)
D0 &lt;- outList$assigned

out &lt;- wtp_calc(D0)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
