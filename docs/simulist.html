<!DOCTYPE html><html lang="en-GB"><head><title>Help for package simulist</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {simulist}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#simulist-package'><p>simulist: Simulate Disease Outbreak Line List and Contacts Data</p></a></li>
<li><a href='#.add_cols'><p>Add line list event dates and case information as columns to infectious</p>
history <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code></a></li>
<li><a href='#.anonymise'><p>Anonymise names</p></a></li>
<li><a href='#.check_age_df'><p>Check if <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> defining age structure of population is correct</p></a></li>
<li><a href='#.check_risk_df'><p>Check if <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> defining age-stratified hospitalisation or death risk</p>
is correct</a></li>
<li><a href='#.check_sim_input'><p>Check if arguments input to simulation function are valid</p></a></li>
<li><a href='#.cross_check_sim_input'><p>Cross check the onset-to-hospitalisation or -death arguments are</p>
compatible with hospitalisation and death risks</a></li>
<li><a href='#.sample_names'><p>Sample names using <code>randomNames::randomNames()</code></p></a></li>
<li><a href='#.sim_internal'><p>Internal simulation function called by the exported simulation functions</p>
within <span class="pkg">simulist</span></a></li>
<li><a href='#.sim_network_bp'><p>Simulate a random network branching process model with a probability of</p>
infection for each contact</a></li>
<li><a href='#as_function'><p>Convert <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> or <code>NULL</code> to function</p></a></li>
<li><a href='#create_config'><p>Create a list of configuration settings for some details of <code>sim_linelist()</code></p></a></li>
<li><a href='#sim_contacts'><p>Simulate contacts for an infectious disease outbreak</p></a></li>
<li><a href='#sim_linelist'><p>Simulate a line list</p></a></li>
<li><a href='#sim_outbreak'><p>Simulate a line list and a contacts table</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Simulate Disease Outbreak Line List and Contacts Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Tools to simulate realistic raw case data for an epidemic in
    the form of line lists and contacts using a branching process.
    Simulated outbreaks are parameterised with epidemiological parameters
    and can have age structured populations, age-stratified
    hospitalisation and death risk and time-varying case fatality risk.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/epiverse-trace/simulist">https://github.com/epiverse-trace/simulist</a>,
<a href="https://epiverse-trace.github.io/simulist/">https://epiverse-trace.github.io/simulist/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/epiverse-trace/simulist/issues">https://github.com/epiverse-trace/simulist/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate, epiparameter (&ge; 0.4.0), randomNames, rlang, stats</td>
</tr>
<tr>
<td>Suggests:</td>
<td>dplyr, epicontacts (&ge; 1.1.3), ggplot2, incidence2 (&ge;
2.1.0), knitr, rmarkdown, spelling, testthat (&ge; 3.0.0), tidyr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>epiverse-trace/epiversetheme</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-01-09 14:04:38 UTC; lshjl15</td>
</tr>
<tr>
<td>Author:</td>
<td>Joshua W. Lambert <a href="https://orcid.org/0000-0001-5218-3046"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph],
  Carmen Tamayo <a href="https://orcid.org/0000-0003-4184-2864"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Hugo Gruson <a href="https://orcid.org/0000-0002-4094-1476"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb,
    rev],
  Pratik R. Gupte <a href="https://orcid.org/0000-0001-5294-7819"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb, rev],
  Adam Kucharski <a href="https://orcid.org/0000-0001-8814-9421"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [rev],
  Chris Hartgerink <a href="https://orcid.org/0000-0003-1050-6809"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [rev]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Joshua W. Lambert &lt;joshua.lambert@lshtm.ac.uk&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-10 14:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='simulist-package'>simulist: Simulate Disease Outbreak Line List and Contacts Data</h2><span id='topic+simulist'></span><span id='topic+simulist-package'></span>

<h3>Description</h3>

<p>Tools to simulate realistic raw case data for an epidemic in the form of line lists and contacts using a branching process. Simulated outbreaks are parameterised with epidemiological parameters and can have age structured populations, age-stratified hospitalisation and death risk and time-varying case fatality risk.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Joshua W. Lambert <a href="mailto:joshua.lambert@lshtm.ac.uk">joshua.lambert@lshtm.ac.uk</a> (<a href="https://orcid.org/0000-0001-5218-3046">ORCID</a>) [copyright holder]
</p>
<p>Authors:
</p>

<ul>
<li><p> Carmen Tamayo <a href="mailto:carmen.tamayo-cuartero@lshtm.ac.uk">carmen.tamayo-cuartero@lshtm.ac.uk</a> (<a href="https://orcid.org/0000-0003-4184-2864">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Hugo Gruson <a href="mailto:hugo@data.org">hugo@data.org</a> (<a href="https://orcid.org/0000-0002-4094-1476">ORCID</a>) [contributor, reviewer]
</p>
</li>
<li><p> Pratik R. Gupte <a href="mailto:pratik.gupte@lshtm.ac.uk">pratik.gupte@lshtm.ac.uk</a> (<a href="https://orcid.org/0000-0001-5294-7819">ORCID</a>) [contributor, reviewer]
</p>
</li>
<li><p> Adam Kucharski <a href="mailto:adam.kucharski@lshtm.ac.uk">adam.kucharski@lshtm.ac.uk</a> (<a href="https://orcid.org/0000-0001-8814-9421">ORCID</a>) [reviewer]
</p>
</li>
<li><p> Chris Hartgerink <a href="mailto:chris@data.org">chris@data.org</a> (<a href="https://orcid.org/0000-0003-1050-6809">ORCID</a>) [reviewer]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/epiverse-trace/simulist">https://github.com/epiverse-trace/simulist</a>
</p>
</li>
<li> <p><a href="https://epiverse-trace.github.io/simulist/">https://epiverse-trace.github.io/simulist/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/epiverse-trace/simulist/issues">https://github.com/epiverse-trace/simulist/issues</a>
</p>
</li></ul>


<hr>
<h2 id='.add_cols'>Add line list event dates and case information as columns to infectious
history <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code></h2><span id='topic+.add_cols'></span><span id='topic+.add_date_contact'></span><span id='topic+.add_hospitalisation'></span><span id='topic+.add_outcome'></span><span id='topic+.add_names'></span><span id='topic+.add_ct'></span>

<h3>Description</h3>

<p>These <code style="white-space: pre;">&#8288;.add_*()&#8288;</code> functions add columns to the <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code>
output by <code><a href="#topic+.sim_network_bp">.sim_network_bp()</a></code>. The <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> supplied to <code>.data</code> will
have a different number of columns depending on which function is being
called (i.e. the <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> supplied to <code><a href="#topic+.add_hospitalisation">.add_hospitalisation()</a></code> will
have more columns than the <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> supplied to <code><a href="#topic+.add_date_contact">.add_date_contact()</a></code>
as former function is called later in the simulation).
</p>
<p>The event date could be first contact, last contact or other.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.add_date_contact(
  .data,
  contact_type = c("first", "last"),
  distribution = c("pois", "geom"),
  ...,
  outbreak_start_date = NULL
)

.add_hospitalisation(.data, onset_to_hosp, hosp_risk)

.add_outcome(
  .data,
  onset_to_death,
  onset_to_recovery,
  hosp_death_risk,
  non_hosp_death_risk,
  config
)

.add_names(.data, anonymise = FALSE)

.add_ct(.data, distribution = c("norm", "lnorm"), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".add_cols_+3A_.data">.data</code></td>
<td>
<p>A <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> containing the infectious history from a
branching process simulation (<code><a href="#topic+.sim_network_bp">.sim_network_bp()</a></code>).</p>
</td></tr>
<tr><td><code id=".add_cols_+3A_contact_type">contact_type</code></td>
<td>
<p>A <code>character</code> with the type of contact, either first
contact (<code>"first"</code>), or last contact (<code>"last"</code>).</p>
</td></tr>
<tr><td><code id=".add_cols_+3A_distribution">distribution</code></td>
<td>
<p>A <code>character</code> with the name of the distribution,
following the base R convention for distribution naming (e.g. Poisson
is <code>pois</code>).</p>
</td></tr>
<tr><td><code id=".add_cols_+3A_...">...</code></td>
<td>
<p><a href="base.html#topic+dots">dots</a> Extra arguments to be passed to the distribution function
given in the <code>distribution</code> argument.</p>
</td></tr>
<tr><td><code id=".add_cols_+3A_outbreak_start_date">outbreak_start_date</code></td>
<td>
<p>A <code>date</code> for the start of the outbreak.</p>
</td></tr>
<tr><td><code id=".add_cols_+3A_onset_to_hosp">onset_to_hosp</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
onset-to-hospitalisation delay distribution. <code>onset_to_hosp</code> can also be
set to <code>NULL</code> to not simulate hospitalisation (admission) dates.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of <code>numeric</code>s for the length of the onset-to-hospitalisation delay. The
function must have a single argument.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a random
number generator internally.
</p>
<p>The default is an anonymous function with a lognormal distribution random
number generator (<code><a href="stats.html#topic+rlnorm">rlnorm()</a></code>) with <code>meanlog = 1.5</code> and <code>sdlog = 0.5</code>.
</p>
<p>If <code>onset_to_hosp</code> is set to <code>NULL</code> then <code>hosp_risk</code> and <code>hosp_death_risk</code>
will be automatically set to <code>NULL</code> if not manually specified.</p>
</td></tr>
<tr><td><code id=".add_cols_+3A_hosp_risk">hosp_risk</code></td>
<td>
<p>Either a single <code>numeric</code> for the hospitalisation risk of
everyone in the population, or a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age specific
hospitalisation risks. Default is 20% hospitalisation (<code>0.2</code>) for the entire
population. If the <code>onset_to_hosp</code> argument is set to <code>NULL</code> this argument
will automatically be set to <code>NULL</code> if not specified or can be manually
set to <code>NULL</code>. See details and examples for more information.</p>
</td></tr>
<tr><td><code id=".add_cols_+3A_onset_to_death">onset_to_death</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
onset-to-death delay distribution. <code>onset_to_death</code> can also be set to
<code>NULL</code> to not simulate dates for individuals that died.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of <code>numeric</code>s for the length of the onset-to-death delay. The function must
have a single argument.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a random
number generator internally.
</p>
<p>The default is an anonymous function with a lognormal distribution random
number generator (<code><a href="stats.html#topic+rlnorm">rlnorm()</a></code>) with <code>meanlog = 2.5</code> and <code>sdlog = 0.5</code>.
</p>
<p>If <code>onset_to_death</code> is set to <code>NULL</code> then <code>non_hosp_death_risk</code> and
<code>hosp_death_risk</code> will be automatically set to <code>NULL</code> if not manually
specified.</p>
</td></tr>
<tr><td><code id=".add_cols_+3A_onset_to_recovery">onset_to_recovery</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
onset-to-recovery delay distribution. <code>onset_to_recovery</code> can also be <code>NULL</code>
to not simulate dates for individuals that recovered.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of <code>numeric</code>s for the length of the onset-to-recovery delay. The function
must have a single argument.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a random
number generator internally.
</p>
<p>The default is <code>NULL</code> so by default cases that recover get an <code>NA</code> in the
<code style="white-space: pre;">&#8288;$date_outcome&#8288;</code> line list column.</p>
</td></tr>
<tr><td><code id=".add_cols_+3A_hosp_death_risk">hosp_death_risk</code></td>
<td>
<p>Either a single <code>numeric</code> for the death risk for
hospitalised individuals across the population, or a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age
specific hospitalised death risks Default is 50% death risk in hospitals
(<code>0.5</code>) for the entire population. If the <code>onset_to_death</code> argument is set
to <code>NULL</code> this argument will automatically be set to <code>NULL</code> if not specified
or can be manually set to <code>NULL</code>. See details and examples for more
information. The <code>hosp_death_risk</code> can vary through time if specified in
the <code>time_varying_death_risk</code> element of <code>config</code>, see
<code>vignette("time-varying-cfr", package = "simulist")</code> for more information.</p>
</td></tr>
<tr><td><code id=".add_cols_+3A_non_hosp_death_risk">non_hosp_death_risk</code></td>
<td>
<p>Either a single <code>numeric</code> for the death risk for
outside of hospitals across the population, or a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age
specific death risks outside of hospitals. Default is 5% death risk outside
of hospitals  (<code>0.05</code>) for the entire population. If the <code>onset_to_death</code>
argument is set to <code>NULL</code> this argument will automatically be set to <code>NULL</code>
if not specified or can be manually set to <code>NULL</code>. See details and examples
for more information. The <code>non_hosp_death_risk</code> can vary through time if
specified in the <code>time_varying_death_risk</code> element of <code>config</code>, see
<code>vignette("time-varying-cfr", package = "simulist")</code> for more information.</p>
</td></tr>
<tr><td><code id=".add_cols_+3A_config">config</code></td>
<td>
<p>A list of settings to adjust the randomly sampled delays and
Ct values. See <code><a href="#topic+create_config">create_config()</a></code> for more information.</p>
</td></tr>
<tr><td><code id=".add_cols_+3A_anonymise">anonymise</code></td>
<td>
<p>A <code>logical</code> boolean for whether case names should be
anonymised. Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with one more column than input into <code>.data</code>.
Unless the column heading is already present in which the data is
overwritten.
</p>

<hr>
<h2 id='.anonymise'>Anonymise names</h2><span id='topic+.anonymise'></span>

<h3>Description</h3>

<p>A simple algorithm to replace names with an alphanumeric string with an
fixed number of characters (i.e. <code><a href="base.html#topic+nchar">nchar()</a></code>) specified by <code>string_len</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.anonymise(x, string_len = 10)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".anonymise_+3A_x">x</code></td>
<td>
<p>A vector of <code>character</code> strings.</p>
</td></tr>
<tr><td><code id=".anonymise_+3A_string_len">string_len</code></td>
<td>
<p>A single <code>numeric</code> specifying the number of alphanumeric
characters to use for each anonymising <code>character</code> string.
Default is <code>10</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of <code>character</code> strings of equal length to the input.
</p>

<hr>
<h2 id='.check_age_df'>Check if <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> defining age structure of population is correct</h2><span id='topic+.check_age_df'></span>

<h3>Description</h3>

<p>Check if <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> defining age structure of population is correct
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.check_age_df(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".check_age_df_+3A_x">x</code></td>
<td>
<p>A <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code>, also called for error side-effects when input is
invalid.
</p>

<hr>
<h2 id='.check_risk_df'>Check if <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> defining age-stratified hospitalisation or death risk
is correct</h2><span id='topic+.check_risk_df'></span>

<h3>Description</h3>

<p>Check if <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> defining age-stratified hospitalisation or death risk
is correct
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.check_risk_df(x, age_range)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".check_risk_df_+3A_x">x</code></td>
<td>
<p>A <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code>, also called for error side-effects when input is
invalid.
</p>

<hr>
<h2 id='.check_sim_input'>Check if arguments input to simulation function are valid</h2><span id='topic+.check_sim_input'></span>

<h3>Description</h3>

<p>Check if arguments input to simulation function are valid
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.check_sim_input(
  sim_type = c("linelist", "contacts", "outbreak"),
  contact_distribution,
  infectious_period,
  prob_infection,
  outbreak_start_date,
  outbreak_size,
  onset_to_hosp = NULL,
  onset_to_death = NULL,
  onset_to_recovery = NULL,
  anonymise = NULL,
  case_type_probs = NULL,
  contact_tracing_status_probs = NULL,
  hosp_risk = NULL,
  hosp_death_risk = NULL,
  non_hosp_death_risk = NULL,
  population_age = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".check_sim_input_+3A_sim_type">sim_type</code></td>
<td>
<p>A <code>character</code> string specifying which simulation function
this function is being called within.</p>
</td></tr>
<tr><td><code id=".check_sim_input_+3A_contact_distribution">contact_distribution</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object to
generate the number of contacts per infection.
</p>
<p>The function can be defined or anonymous. The function must have a single
argument in the form of an <code>integer</code> vector with elements representing the
number of contacts, and return a <code>numeric</code> vector where each element
corresponds to the probability of observing the number of contacts in the
vector passed to the function. The index of the <code>numeric</code> vector returned
is offset by one to the corresponding probability of observing the number
of contacts, i.e. the first element of the output vector is the probability
of observing zero contacts, the second element is the probability of
observing one contact, etc.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a
probability mass function internally.
</p>
<p>The default is an anonymous function with a Poisson probability mass function
(<code><a href="stats.html#topic+dpois">dpois()</a></code>) with a mean (<code class="reqn">\lambda</code>) of 2 contacts per infection.</p>
</td></tr>
<tr><td><code id=".check_sim_input_+3A_infectious_period">infectious_period</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
infectious period. This defines the duration from becoming infectious to
no longer infectious. In the simulation, individuals are assumed to
become infectious immediately after being infected (the latency period is
assumed to be zero). The time intervals between an infected individual and
their contacts are assumed to be uniformly distributed within the
infectious period. Infectious periods must be strictly positive.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of randomly generated real numbers representing sampled infectious periods.
The function must have a single argument, the number of random infectious
periods to generate.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into random
number generator internally.
</p>
<p>The default is an anonymous function with a lognormal distribution random
number generator (<code><a href="stats.html#topic+rlnorm">rlnorm()</a></code>) with <code>meanlog = 2</code> and <code>sdlog = 0.5</code>.</p>
</td></tr>
<tr><td><code id=".check_sim_input_+3A_prob_infection">prob_infection</code></td>
<td>
<p>A single <code>numeric</code> for the probability of a secondary
contact being infected by an infected primary contact.</p>
</td></tr>
<tr><td><code id=".check_sim_input_+3A_outbreak_start_date">outbreak_start_date</code></td>
<td>
<p>A <code>date</code> for the start of the outbreak.</p>
</td></tr>
<tr><td><code id=".check_sim_input_+3A_outbreak_size">outbreak_size</code></td>
<td>
<p>A <code>numeric</code> vector of length 2 defining the minimum and
the maximum number of infected individuals for the simulated outbreak.
Default is <code>c(10, 1e4)</code>, so the minimum outbreak size is 10 infected
individuals, and the maximum outbreak size is 10,000 infected individuals.
Either number can be changed to increase or decrease the maximum or minimum
outbreak size to allow simulating larger or smaller outbreaks. If the
minimum outbreak size cannot be reached after running the simulation for
many iterations (internally) then the function errors, whereas if the
maximum outbreak size is exceeded the function returns the data early and a
warning stating how many cases and contacts are returned.</p>
</td></tr>
<tr><td><code id=".check_sim_input_+3A_onset_to_hosp">onset_to_hosp</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
onset-to-hospitalisation delay distribution. <code>onset_to_hosp</code> can also be
set to <code>NULL</code> to not simulate hospitalisation (admission) dates.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of <code>numeric</code>s for the length of the onset-to-hospitalisation delay. The
function must have a single argument.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a random
number generator internally.
</p>
<p>The default is an anonymous function with a lognormal distribution random
number generator (<code><a href="stats.html#topic+rlnorm">rlnorm()</a></code>) with <code>meanlog = 1.5</code> and <code>sdlog = 0.5</code>.
</p>
<p>If <code>onset_to_hosp</code> is set to <code>NULL</code> then <code>hosp_risk</code> and <code>hosp_death_risk</code>
will be automatically set to <code>NULL</code> if not manually specified.</p>
</td></tr>
<tr><td><code id=".check_sim_input_+3A_onset_to_death">onset_to_death</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
onset-to-death delay distribution. <code>onset_to_death</code> can also be set to
<code>NULL</code> to not simulate dates for individuals that died.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of <code>numeric</code>s for the length of the onset-to-death delay. The function must
have a single argument.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a random
number generator internally.
</p>
<p>The default is an anonymous function with a lognormal distribution random
number generator (<code><a href="stats.html#topic+rlnorm">rlnorm()</a></code>) with <code>meanlog = 2.5</code> and <code>sdlog = 0.5</code>.
</p>
<p>If <code>onset_to_death</code> is set to <code>NULL</code> then <code>non_hosp_death_risk</code> and
<code>hosp_death_risk</code> will be automatically set to <code>NULL</code> if not manually
specified.</p>
</td></tr>
<tr><td><code id=".check_sim_input_+3A_onset_to_recovery">onset_to_recovery</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
onset-to-recovery delay distribution. <code>onset_to_recovery</code> can also be <code>NULL</code>
to not simulate dates for individuals that recovered.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of <code>numeric</code>s for the length of the onset-to-recovery delay. The function
must have a single argument.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a random
number generator internally.
</p>
<p>The default is <code>NULL</code> so by default cases that recover get an <code>NA</code> in the
<code style="white-space: pre;">&#8288;$date_outcome&#8288;</code> line list column.</p>
</td></tr>
<tr><td><code id=".check_sim_input_+3A_anonymise">anonymise</code></td>
<td>
<p>A <code>logical</code> boolean for whether case names should be
anonymised. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id=".check_sim_input_+3A_case_type_probs">case_type_probs</code></td>
<td>
<p>A named <code>numeric</code> vector with the probability of
each case type. The names of the vector must be <code>"suspected"</code>, <code>"probable"</code>,
<code>"confirmed"</code>. Values of each case type must sum to one.</p>
</td></tr>
<tr><td><code id=".check_sim_input_+3A_contact_tracing_status_probs">contact_tracing_status_probs</code></td>
<td>
<p>A named <code>numeric</code> vector with the
probability of each contact tracing status. The names of the vector must
be <code>"under_followup"</code>, <code>"lost_to_followup"</code>, <code>"unknown"</code>. Values of each
contact tracing status must sum to one.</p>
</td></tr>
<tr><td><code id=".check_sim_input_+3A_hosp_risk">hosp_risk</code></td>
<td>
<p>Either a single <code>numeric</code> for the hospitalisation risk of
everyone in the population, or a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age specific
hospitalisation risks. Default is 20% hospitalisation (<code>0.2</code>) for the entire
population. If the <code>onset_to_hosp</code> argument is set to <code>NULL</code> this argument
will automatically be set to <code>NULL</code> if not specified or can be manually
set to <code>NULL</code>. See details and examples for more information.</p>
</td></tr>
<tr><td><code id=".check_sim_input_+3A_hosp_death_risk">hosp_death_risk</code></td>
<td>
<p>Either a single <code>numeric</code> for the death risk for
hospitalised individuals across the population, or a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age
specific hospitalised death risks Default is 50% death risk in hospitals
(<code>0.5</code>) for the entire population. If the <code>onset_to_death</code> argument is set
to <code>NULL</code> this argument will automatically be set to <code>NULL</code> if not specified
or can be manually set to <code>NULL</code>. See details and examples for more
information. The <code>hosp_death_risk</code> can vary through time if specified in
the <code>time_varying_death_risk</code> element of <code>config</code>, see
<code>vignette("time-varying-cfr", package = "simulist")</code> for more information.</p>
</td></tr>
<tr><td><code id=".check_sim_input_+3A_non_hosp_death_risk">non_hosp_death_risk</code></td>
<td>
<p>Either a single <code>numeric</code> for the death risk for
outside of hospitals across the population, or a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age
specific death risks outside of hospitals. Default is 5% death risk outside
of hospitals  (<code>0.05</code>) for the entire population. If the <code>onset_to_death</code>
argument is set to <code>NULL</code> this argument will automatically be set to <code>NULL</code>
if not specified or can be manually set to <code>NULL</code>. See details and examples
for more information. The <code>non_hosp_death_risk</code> can vary through time if
specified in the <code>time_varying_death_risk</code> element of <code>config</code>, see
<code>vignette("time-varying-cfr", package = "simulist")</code> for more information.</p>
</td></tr>
<tr><td><code id=".check_sim_input_+3A_population_age">population_age</code></td>
<td>
<p>Either a <code>numeric</code> vector with two elements or a
<code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age structure in the population. Use a <code>numeric</code> vector
to specific the age range of the population, the first element is the lower
bound for the age range, and and the second is the upper bound for the age
range (both inclusive, i.e. [lower, upper]). The <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with
age groups and the proportion of the population in that group. See details
and examples for more information.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Arguments that are used by all simulation functions are required
and not given a default value, for other arguments that are not inputs in
all simulation functions a default of <code>NULL</code> is used.
</p>
<p>Defaults mentioned in argument documentation is the default for the exported
simulation function and not the default in this checking function. In this
function there is either no default or <code>NULL</code>.
</p>


<h3>Value</h3>

<p>Invisibly return the <code>sim_type</code> <code>character</code> string. The function is
called for its side-effects, which will error if the input is invalid.
</p>

<hr>
<h2 id='.cross_check_sim_input'>Cross check the onset-to-hospitalisation or -death arguments are
compatible with hospitalisation and death risks</h2><span id='topic+.cross_check_sim_input'></span>

<h3>Description</h3>

<p>There are two types of cross-checking:
</p>

<ol>
<li><p> If the onset-to-event distribution is specified but the corresponding risk
is not specified (i.e. <code>NULL</code>) the function will error (<code><a href="base.html#topic+stop">stop()</a></code>).
</p>
</li>
<li><p> If the onset-to-event distribution is not specified (i.e. <code>NULL</code>) but the
corresponding risk is specified the function will throw a warning
(<code><a href="base.html#topic+warning">warning()</a></code>).
</p>
</li></ol>

<p>The difference in condition handling is because in the case that the
onset-to-event is <code>NULL</code> the simulation can safely ignore the corresponding
risk, while throwing a warning, as there are no events. In other words, if
the onset-to-hospitalisation is not specified, no infected individuals will
go to hospital and the <code>date_admission</code> column in the line list will all be
<code>NA</code>s. However, if the onset-to-event is specified and the corresponding
risk is <code>NULL</code> then the proportion of individuals infected that are
hospitalised or die cannot be calculated and therefore the simulation
cannot run. It is in this latter case that the cross-checking throws an
error.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.cross_check_sim_input(
  onset_to_hosp,
  onset_to_death,
  hosp_risk,
  hosp_death_risk,
  non_hosp_death_risk
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".cross_check_sim_input_+3A_onset_to_hosp">onset_to_hosp</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
onset-to-hospitalisation delay distribution. <code>onset_to_hosp</code> can also be
set to <code>NULL</code> to not simulate hospitalisation (admission) dates.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of <code>numeric</code>s for the length of the onset-to-hospitalisation delay. The
function must have a single argument.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a random
number generator internally.
</p>
<p>The default is an anonymous function with a lognormal distribution random
number generator (<code><a href="stats.html#topic+rlnorm">rlnorm()</a></code>) with <code>meanlog = 1.5</code> and <code>sdlog = 0.5</code>.
</p>
<p>If <code>onset_to_hosp</code> is set to <code>NULL</code> then <code>hosp_risk</code> and <code>hosp_death_risk</code>
will be automatically set to <code>NULL</code> if not manually specified.</p>
</td></tr>
<tr><td><code id=".cross_check_sim_input_+3A_onset_to_death">onset_to_death</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
onset-to-death delay distribution. <code>onset_to_death</code> can also be set to
<code>NULL</code> to not simulate dates for individuals that died.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of <code>numeric</code>s for the length of the onset-to-death delay. The function must
have a single argument.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a random
number generator internally.
</p>
<p>The default is an anonymous function with a lognormal distribution random
number generator (<code><a href="stats.html#topic+rlnorm">rlnorm()</a></code>) with <code>meanlog = 2.5</code> and <code>sdlog = 0.5</code>.
</p>
<p>If <code>onset_to_death</code> is set to <code>NULL</code> then <code>non_hosp_death_risk</code> and
<code>hosp_death_risk</code> will be automatically set to <code>NULL</code> if not manually
specified.</p>
</td></tr>
<tr><td><code id=".cross_check_sim_input_+3A_hosp_risk">hosp_risk</code></td>
<td>
<p>Either a single <code>numeric</code> for the hospitalisation risk of
everyone in the population, or a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age specific
hospitalisation risks. Default is 20% hospitalisation (<code>0.2</code>) for the entire
population. If the <code>onset_to_hosp</code> argument is set to <code>NULL</code> this argument
will automatically be set to <code>NULL</code> if not specified or can be manually
set to <code>NULL</code>. See details and examples for more information.</p>
</td></tr>
<tr><td><code id=".cross_check_sim_input_+3A_hosp_death_risk">hosp_death_risk</code></td>
<td>
<p>Either a single <code>numeric</code> for the death risk for
hospitalised individuals across the population, or a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age
specific hospitalised death risks Default is 50% death risk in hospitals
(<code>0.5</code>) for the entire population. If the <code>onset_to_death</code> argument is set
to <code>NULL</code> this argument will automatically be set to <code>NULL</code> if not specified
or can be manually set to <code>NULL</code>. See details and examples for more
information. The <code>hosp_death_risk</code> can vary through time if specified in
the <code>time_varying_death_risk</code> element of <code>config</code>, see
<code>vignette("time-varying-cfr", package = "simulist")</code> for more information.</p>
</td></tr>
<tr><td><code id=".cross_check_sim_input_+3A_non_hosp_death_risk">non_hosp_death_risk</code></td>
<td>
<p>Either a single <code>numeric</code> for the death risk for
outside of hospitals across the population, or a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age
specific death risks outside of hospitals. Default is 5% death risk outside
of hospitals  (<code>0.05</code>) for the entire population. If the <code>onset_to_death</code>
argument is set to <code>NULL</code> this argument will automatically be set to <code>NULL</code>
if not specified or can be manually set to <code>NULL</code>. See details and examples
for more information. The <code>non_hosp_death_risk</code> can vary through time if
specified in the <code>time_varying_death_risk</code> element of <code>config</code>, see
<code>vignette("time-varying-cfr", package = "simulist")</code> for more information.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly return the <code>onset_to_hosp</code> argument. The function is
called for its side-effects, which will error or warn if the input is
invalid.
</p>

<hr>
<h2 id='.sample_names'>Sample names using <code><a href="randomNames.html#topic+randomNames">randomNames::randomNames()</a></code></h2><span id='topic+.sample_names'></span>

<h3>Description</h3>

<p>Sample names for specified sexes by sampling with replacement to avoid
exhausting number of name when <code>sample.with.replacement = FALSE</code>. The
duplicated names during sampling need to be removed to ensure each
individual has a unique name. In order to have enough unique names, more
names than required are sampled from <code><a href="randomNames.html#topic+randomNames">randomNames::randomNames()</a></code>, and the
level of oversampling is determined by the <code>buffer_factor</code> argument. A
<code>buffer_factor</code> too high and the more names are sampled which takes longer,
a <code>buffer_factor</code> too low and not enough unique names are sampled and
the <code>.sample_names()</code> function will need to loop until it has enough
unique names.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.sample_names(.data, buffer_factor = 1.5)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".sample_names_+3A_.data">.data</code></td>
<td>
<p>A <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> containing the infectious history from a
branching process simulation (<code><a href="#topic+.sim_network_bp">.sim_network_bp()</a></code>).</p>
</td></tr>
<tr><td><code id=".sample_names_+3A_buffer_factor">buffer_factor</code></td>
<td>
<p>A single <code>numeric</code> determining the level of
oversampling (or buffer) when creating a vector of unique names from
<code><a href="randomNames.html#topic+randomNames">randomNames::randomNames()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>character</code> vector.
</p>

<hr>
<h2 id='.sim_internal'>Internal simulation function called by the exported simulation functions
within <span class="pkg">simulist</span></h2><span id='topic+.sim_internal'></span>

<h3>Description</h3>

<p>This internal function simulates a line list, and
when <code>sim_type</code> is <code>"contacts"</code> or <code>"outbreak"</code> a contacts table as well.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.sim_internal(
  sim_type = c("linelist", "contacts", "outbreak"),
  contact_distribution,
  infectious_period,
  prob_infection,
  onset_to_hosp = NULL,
  onset_to_death = NULL,
  onset_to_recovery = NULL,
  hosp_risk = NULL,
  hosp_death_risk = NULL,
  non_hosp_death_risk = NULL,
  outbreak_start_date,
  anonymise = NULL,
  outbreak_size,
  population_age,
  case_type_probs = NULL,
  contact_tracing_status_probs = NULL,
  config
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".sim_internal_+3A_sim_type">sim_type</code></td>
<td>
<p>A <code>character</code> string specifying which simulation function
this function is being called within.</p>
</td></tr>
<tr><td><code id=".sim_internal_+3A_contact_distribution">contact_distribution</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object to
generate the number of contacts per infection.
</p>
<p>The function can be defined or anonymous. The function must have a single
argument in the form of an <code>integer</code> vector with elements representing the
number of contacts, and return a <code>numeric</code> vector where each element
corresponds to the probability of observing the number of contacts in the
vector passed to the function. The index of the <code>numeric</code> vector returned
is offset by one to the corresponding probability of observing the number
of contacts, i.e. the first element of the output vector is the probability
of observing zero contacts, the second element is the probability of
observing one contact, etc.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a
probability mass function internally.
</p>
<p>The default is an anonymous function with a Poisson probability mass function
(<code><a href="stats.html#topic+dpois">dpois()</a></code>) with a mean (<code class="reqn">\lambda</code>) of 2 contacts per infection.</p>
</td></tr>
<tr><td><code id=".sim_internal_+3A_infectious_period">infectious_period</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
infectious period. This defines the duration from becoming infectious to
no longer infectious. In the simulation, individuals are assumed to
become infectious immediately after being infected (the latency period is
assumed to be zero). The time intervals between an infected individual and
their contacts are assumed to be uniformly distributed within the
infectious period. Infectious periods must be strictly positive.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of randomly generated real numbers representing sampled infectious periods.
The function must have a single argument, the number of random infectious
periods to generate.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into random
number generator internally.
</p>
<p>The default is an anonymous function with a lognormal distribution random
number generator (<code><a href="stats.html#topic+rlnorm">rlnorm()</a></code>) with <code>meanlog = 2</code> and <code>sdlog = 0.5</code>.</p>
</td></tr>
<tr><td><code id=".sim_internal_+3A_prob_infection">prob_infection</code></td>
<td>
<p>A single <code>numeric</code> for the probability of a secondary
contact being infected by an infected primary contact.</p>
</td></tr>
<tr><td><code id=".sim_internal_+3A_onset_to_hosp">onset_to_hosp</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
onset-to-hospitalisation delay distribution. <code>onset_to_hosp</code> can also be
set to <code>NULL</code> to not simulate hospitalisation (admission) dates.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of <code>numeric</code>s for the length of the onset-to-hospitalisation delay. The
function must have a single argument.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a random
number generator internally.
</p>
<p>The default is an anonymous function with a lognormal distribution random
number generator (<code><a href="stats.html#topic+rlnorm">rlnorm()</a></code>) with <code>meanlog = 1.5</code> and <code>sdlog = 0.5</code>.
</p>
<p>If <code>onset_to_hosp</code> is set to <code>NULL</code> then <code>hosp_risk</code> and <code>hosp_death_risk</code>
will be automatically set to <code>NULL</code> if not manually specified.</p>
</td></tr>
<tr><td><code id=".sim_internal_+3A_onset_to_death">onset_to_death</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
onset-to-death delay distribution. <code>onset_to_death</code> can also be set to
<code>NULL</code> to not simulate dates for individuals that died.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of <code>numeric</code>s for the length of the onset-to-death delay. The function must
have a single argument.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a random
number generator internally.
</p>
<p>The default is an anonymous function with a lognormal distribution random
number generator (<code><a href="stats.html#topic+rlnorm">rlnorm()</a></code>) with <code>meanlog = 2.5</code> and <code>sdlog = 0.5</code>.
</p>
<p>If <code>onset_to_death</code> is set to <code>NULL</code> then <code>non_hosp_death_risk</code> and
<code>hosp_death_risk</code> will be automatically set to <code>NULL</code> if not manually
specified.</p>
</td></tr>
<tr><td><code id=".sim_internal_+3A_onset_to_recovery">onset_to_recovery</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
onset-to-recovery delay distribution. <code>onset_to_recovery</code> can also be <code>NULL</code>
to not simulate dates for individuals that recovered.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of <code>numeric</code>s for the length of the onset-to-recovery delay. The function
must have a single argument.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a random
number generator internally.
</p>
<p>The default is <code>NULL</code> so by default cases that recover get an <code>NA</code> in the
<code style="white-space: pre;">&#8288;$date_outcome&#8288;</code> line list column.</p>
</td></tr>
<tr><td><code id=".sim_internal_+3A_hosp_risk">hosp_risk</code></td>
<td>
<p>Either a single <code>numeric</code> for the hospitalisation risk of
everyone in the population, or a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age specific
hospitalisation risks. Default is 20% hospitalisation (<code>0.2</code>) for the entire
population. If the <code>onset_to_hosp</code> argument is set to <code>NULL</code> this argument
will automatically be set to <code>NULL</code> if not specified or can be manually
set to <code>NULL</code>. See details and examples for more information.</p>
</td></tr>
<tr><td><code id=".sim_internal_+3A_hosp_death_risk">hosp_death_risk</code></td>
<td>
<p>Either a single <code>numeric</code> for the death risk for
hospitalised individuals across the population, or a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age
specific hospitalised death risks Default is 50% death risk in hospitals
(<code>0.5</code>) for the entire population. If the <code>onset_to_death</code> argument is set
to <code>NULL</code> this argument will automatically be set to <code>NULL</code> if not specified
or can be manually set to <code>NULL</code>. See details and examples for more
information. The <code>hosp_death_risk</code> can vary through time if specified in
the <code>time_varying_death_risk</code> element of <code>config</code>, see
<code>vignette("time-varying-cfr", package = "simulist")</code> for more information.</p>
</td></tr>
<tr><td><code id=".sim_internal_+3A_non_hosp_death_risk">non_hosp_death_risk</code></td>
<td>
<p>Either a single <code>numeric</code> for the death risk for
outside of hospitals across the population, or a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age
specific death risks outside of hospitals. Default is 5% death risk outside
of hospitals  (<code>0.05</code>) for the entire population. If the <code>onset_to_death</code>
argument is set to <code>NULL</code> this argument will automatically be set to <code>NULL</code>
if not specified or can be manually set to <code>NULL</code>. See details and examples
for more information. The <code>non_hosp_death_risk</code> can vary through time if
specified in the <code>time_varying_death_risk</code> element of <code>config</code>, see
<code>vignette("time-varying-cfr", package = "simulist")</code> for more information.</p>
</td></tr>
<tr><td><code id=".sim_internal_+3A_outbreak_start_date">outbreak_start_date</code></td>
<td>
<p>A <code>date</code> for the start of the outbreak.</p>
</td></tr>
<tr><td><code id=".sim_internal_+3A_anonymise">anonymise</code></td>
<td>
<p>A <code>logical</code> boolean for whether case names should be
anonymised. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id=".sim_internal_+3A_outbreak_size">outbreak_size</code></td>
<td>
<p>A <code>numeric</code> vector of length 2 defining the minimum and
the maximum number of infected individuals for the simulated outbreak.
Default is <code>c(10, 1e4)</code>, so the minimum outbreak size is 10 infected
individuals, and the maximum outbreak size is 10,000 infected individuals.
Either number can be changed to increase or decrease the maximum or minimum
outbreak size to allow simulating larger or smaller outbreaks. If the
minimum outbreak size cannot be reached after running the simulation for
many iterations (internally) then the function errors, whereas if the
maximum outbreak size is exceeded the function returns the data early and a
warning stating how many cases and contacts are returned.</p>
</td></tr>
<tr><td><code id=".sim_internal_+3A_population_age">population_age</code></td>
<td>
<p>Either a <code>numeric</code> vector with two elements or a
<code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age structure in the population. Use a <code>numeric</code> vector
to specific the age range of the population, the first element is the lower
bound for the age range, and and the second is the upper bound for the age
range (both inclusive, i.e. [lower, upper]). The <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with
age groups and the proportion of the population in that group. See details
and examples for more information.</p>
</td></tr>
<tr><td><code id=".sim_internal_+3A_case_type_probs">case_type_probs</code></td>
<td>
<p>A named <code>numeric</code> vector with the probability of
each case type. The names of the vector must be <code>"suspected"</code>, <code>"probable"</code>,
<code>"confirmed"</code>. Values of each case type must sum to one.</p>
</td></tr>
<tr><td><code id=".sim_internal_+3A_contact_tracing_status_probs">contact_tracing_status_probs</code></td>
<td>
<p>A named <code>numeric</code> vector with the
probability of each contact tracing status. The names of the vector must
be <code>"under_followup"</code>, <code>"lost_to_followup"</code>, <code>"unknown"</code>. Values of each
contact tracing status must sum to one.</p>
</td></tr>
<tr><td><code id=".sim_internal_+3A_config">config</code></td>
<td>
<p>A list of settings to adjust the randomly sampled delays and
Ct values. See <code><a href="#topic+create_config">create_config()</a></code> for more information.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> if <code>sim_type</code> is <code>"linelist"</code> or <code>"contacts"</code>, or a
list of two <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code>s if <code>sim_type</code> is <code>"outbreak"</code>.
</p>

<hr>
<h2 id='.sim_network_bp'>Simulate a random network branching process model with a probability of
infection for each contact</h2><span id='topic+.sim_network_bp'></span>

<h3>Description</h3>

<p>Simulate a branching process on a infinite network where the contact
distribution provides a function to sample the number of contacts of each
individual in the simulation. Each contact is then infected with the
probability of infection. The time between each contact is assumed to be
evenly distributed across the infectious period of the infected individual,
and is independent of whether the contact becomes infected.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.sim_network_bp(
  contact_distribution,
  infectious_period,
  prob_infection,
  max_outbreak_size,
  config
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".sim_network_bp_+3A_contact_distribution">contact_distribution</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object to
generate the number of contacts per infection.
</p>
<p>The function can be defined or anonymous. The function must have a single
argument in the form of an <code>integer</code> vector with elements representing the
number of contacts, and return a <code>numeric</code> vector where each element
corresponds to the probability of observing the number of contacts in the
vector passed to the function. The index of the <code>numeric</code> vector returned
is offset by one to the corresponding probability of observing the number
of contacts, i.e. the first element of the output vector is the probability
of observing zero contacts, the second element is the probability of
observing one contact, etc.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a
probability mass function internally.
</p>
<p>The default is an anonymous function with a Poisson probability mass function
(<code><a href="stats.html#topic+dpois">dpois()</a></code>) with a mean (<code class="reqn">\lambda</code>) of 2 contacts per infection.</p>
</td></tr>
<tr><td><code id=".sim_network_bp_+3A_infectious_period">infectious_period</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
infectious period. This defines the duration from becoming infectious to
no longer infectious. In the simulation, individuals are assumed to
become infectious immediately after being infected (the latency period is
assumed to be zero). The time intervals between an infected individual and
their contacts are assumed to be uniformly distributed within the
infectious period. Infectious periods must be strictly positive.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of randomly generated real numbers representing sampled infectious periods.
The function must have a single argument, the number of random infectious
periods to generate.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into random
number generator internally.
</p>
<p>The default is an anonymous function with a lognormal distribution random
number generator (<code><a href="stats.html#topic+rlnorm">rlnorm()</a></code>) with <code>meanlog = 2</code> and <code>sdlog = 0.5</code>.</p>
</td></tr>
<tr><td><code id=".sim_network_bp_+3A_prob_infection">prob_infection</code></td>
<td>
<p>A single <code>numeric</code> for the probability of a secondary
contact being infected by an infected primary contact.</p>
</td></tr>
<tr><td><code id=".sim_network_bp_+3A_config">config</code></td>
<td>
<p>A list of settings to adjust the randomly sampled delays and
Ct values. See <code><a href="#topic+create_config">create_config()</a></code> for more information.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The contact distribution sampled takes the network effect
<code class="reqn">q(n) \sim (n + 1)p(n + 1)</code> where <code class="reqn">p(n)</code> is the probability
density function of a distribution, e.g., Poisson or Negative binomial.
That is to say, the probability of having choosing a contact at random by
following up a contact chooses individuals with a probability proportional
to their number of contacts. The plus one is because one of the contacts
was &quot;used&quot; to infect the person.
</p>


<h3>Value</h3>

<p>A <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with the contact and transmission chain data.
</p>

<hr>
<h2 id='as_function'>Convert <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> or <code>NULL</code> to function</h2><span id='topic+as_function'></span>

<h3>Description</h3>

<p>An extension to <code><a href="base.html#topic+as.function">as.function()</a></code>, particularly the <span class="pkg">epiparameter</span>
<code>as.function</code> S3 method, with the added feature that <code><a href="base.html#topic+NULL">NULL</a></code>s are converted
into functions that generate a vector of <code>NA</code>s to behave equivalently to
the generator functions output from
<code>as.function(..., func_type = "generate")</code>.
</p>
<p>If a function is already passed to <code>as_function</code> it will be returned
unchanged.
</p>
<p>There is also input checking to error if input is not an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code>,
<code>function</code> (<a href="base.html#topic+closure">closure</a>), or for onset-to-event distributions <code>NULL</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_function(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_function_+3A_x">x</code></td>
<td>
<p>A named list containing either <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code>, <code>function</code> or
<code>NULL</code>. Named list elements are: <code>"contact_distribution"</code>,
<code>"infectious_period"</code>, <code>"onset_to_hosp"</code>, <code>"onset_to_death"</code>,
<code style="white-space: pre;">&#8288;"onset_to_recovery".&#8288;</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of <code>function</code>s.
</p>

<hr>
<h2 id='create_config'>Create a list of configuration settings for some details of <code><a href="#topic+sim_linelist">sim_linelist()</a></code></h2><span id='topic+create_config'></span>

<h3>Description</h3>

<p>Create a list of configuration settings for some details of <code><a href="#topic+sim_linelist">sim_linelist()</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_config(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_config_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; Named elements to replace
default settings. Only if names match exactly are elements replaced,
otherwise the function errors.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>config</code> argument in <code><a href="#topic+sim_linelist">sim_linelist()</a></code> controls the small details
around time windows around infections (time of first contact and last
contact with infector), and the distribution of the Cycle threshold (Ct)
value from a Real-time PCR or quantitative PCR (qPCR) for confirmed
cases, the network effect in the simulation, and if there is a time-varying
death risk.
</p>
<p>Accepted arguments and their defaults are:
</p>

<ul>
<li> <p><code>last_contact_distribution = "pois"</code>
</p>
</li>
<li> <p><code>last_contact_distribution_params = c(lambda = 3)</code>
</p>
</li>
<li> <p><code>first_contact_distribution = "pois"</code>
</p>
</li>
<li> <p><code>first_contact_distribution_params = c(lambda = 3)</code>
</p>
</li>
<li> <p><code>ct_distribution = "norm"</code>
</p>
</li>
<li> <p><code>ct_distribution_params = c(mean = 25, sd = 2)</code>
</p>
</li>
<li> <p><code>network = "adjusted"</code>
</p>
</li>
<li> <p><code>time_varying_death_risk = NULL</code>
</p>
</li></ul>

<p>These parameters do not warrant their own arguments in
<code><a href="#topic+sim_linelist">sim_linelist()</a></code> as they rarely need to be changed from their default
setting. Therefore it is not worth increasing the number of <code><a href="#topic+sim_linelist">sim_linelist()</a></code>
arguments to accommodate these and the <code>config</code> argument keeps the function
signature simpler and more readable.
</p>
<p>The accepted distributions are:
</p>

<ul>
<li> <p><code>last_contact_distribution = c("pois", "geom")</code>
</p>
</li>
<li> <p><code>first_contact_distribution = c("pois", "geom")</code>
</p>
</li>
<li> <p><code>ct_distribution = c("norm", "lnorm")</code>
</p>
</li></ul>

<p>The <code>network</code> option controls whether to sample contacts from a adjusted or
unadjusted contact distribution. Adjusted (default) sampling uses
<code class="reqn">q(n) \sim (n + 1)p(n + 1)</code> where <code class="reqn">p(n)</code> is the probability
density function of a distribution, e.g., Poisson or Negative binomial.
Unadjusted (<code>network = "unadjusted"</code>) instead samples contacts directly from
a probability distribution <code class="reqn">p(n)</code>.
</p>


<h3>Value</h3>

<p>A list of settings for <code><a href="#topic+sim_linelist">sim_linelist()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># example with default configuration
create_config()

# example with customised Ct distribution
create_config(
  ct_distribution = "lnorm",
  ct_distribution_params = c(meanlog = 2, sdlog = 1)
)
</code></pre>

<hr>
<h2 id='sim_contacts'>Simulate contacts for an infectious disease outbreak</h2><span id='topic+sim_contacts'></span>

<h3>Description</h3>

<p>Simulate contacts for an infectious disease outbreak
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sim_contacts(
  contact_distribution = function(x) stats::dpois(x = x, lambda = 2),
  infectious_period = function(x) stats::rlnorm(n = x, meanlog = 2, sdlog = 0.5),
  prob_infection = 0.5,
  outbreak_start_date = as.Date("2023-01-01"),
  anonymise = FALSE,
  outbreak_size = c(10, 10000),
  population_age = c(1, 90),
  contact_tracing_status_probs = c(under_followup = 0.7, lost_to_followup = 0.2, unknown
    = 0.1),
  config = create_config()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sim_contacts_+3A_contact_distribution">contact_distribution</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object to
generate the number of contacts per infection.
</p>
<p>The function can be defined or anonymous. The function must have a single
argument in the form of an <code>integer</code> vector with elements representing the
number of contacts, and return a <code>numeric</code> vector where each element
corresponds to the probability of observing the number of contacts in the
vector passed to the function. The index of the <code>numeric</code> vector returned
is offset by one to the corresponding probability of observing the number
of contacts, i.e. the first element of the output vector is the probability
of observing zero contacts, the second element is the probability of
observing one contact, etc.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a
probability mass function internally.
</p>
<p>The default is an anonymous function with a Poisson probability mass function
(<code><a href="stats.html#topic+dpois">dpois()</a></code>) with a mean (<code class="reqn">\lambda</code>) of 2 contacts per infection.</p>
</td></tr>
<tr><td><code id="sim_contacts_+3A_infectious_period">infectious_period</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
infectious period. This defines the duration from becoming infectious to
no longer infectious. In the simulation, individuals are assumed to
become infectious immediately after being infected (the latency period is
assumed to be zero). The time intervals between an infected individual and
their contacts are assumed to be uniformly distributed within the
infectious period. Infectious periods must be strictly positive.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of randomly generated real numbers representing sampled infectious periods.
The function must have a single argument, the number of random infectious
periods to generate.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into random
number generator internally.
</p>
<p>The default is an anonymous function with a lognormal distribution random
number generator (<code><a href="stats.html#topic+rlnorm">rlnorm()</a></code>) with <code>meanlog = 2</code> and <code>sdlog = 0.5</code>.</p>
</td></tr>
<tr><td><code id="sim_contacts_+3A_prob_infection">prob_infection</code></td>
<td>
<p>A single <code>numeric</code> for the probability of a secondary
contact being infected by an infected primary contact.</p>
</td></tr>
<tr><td><code id="sim_contacts_+3A_outbreak_start_date">outbreak_start_date</code></td>
<td>
<p>A <code>date</code> for the start of the outbreak.</p>
</td></tr>
<tr><td><code id="sim_contacts_+3A_anonymise">anonymise</code></td>
<td>
<p>A <code>logical</code> boolean for whether case names should be
anonymised. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="sim_contacts_+3A_outbreak_size">outbreak_size</code></td>
<td>
<p>A <code>numeric</code> vector of length 2 defining the minimum and
the maximum number of infected individuals for the simulated outbreak.
Default is <code>c(10, 1e4)</code>, so the minimum outbreak size is 10 infected
individuals, and the maximum outbreak size is 10,000 infected individuals.
Either number can be changed to increase or decrease the maximum or minimum
outbreak size to allow simulating larger or smaller outbreaks. If the
minimum outbreak size cannot be reached after running the simulation for
many iterations (internally) then the function errors, whereas if the
maximum outbreak size is exceeded the function returns the data early and a
warning stating how many cases and contacts are returned.</p>
</td></tr>
<tr><td><code id="sim_contacts_+3A_population_age">population_age</code></td>
<td>
<p>Either a <code>numeric</code> vector with two elements or a
<code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age structure in the population. Use a <code>numeric</code> vector
to specific the age range of the population, the first element is the lower
bound for the age range, and and the second is the upper bound for the age
range (both inclusive, i.e. [lower, upper]). The <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with
age groups and the proportion of the population in that group. See details
and examples for more information.</p>
</td></tr>
<tr><td><code id="sim_contacts_+3A_contact_tracing_status_probs">contact_tracing_status_probs</code></td>
<td>
<p>A named <code>numeric</code> vector with the
probability of each contact tracing status. The names of the vector must
be <code>"under_followup"</code>, <code>"lost_to_followup"</code>, <code>"unknown"</code>. Values of each
contact tracing status must sum to one.</p>
</td></tr>
<tr><td><code id="sim_contacts_+3A_config">config</code></td>
<td>
<p>A list of settings to adjust the randomly sampled delays and
Ct values. See <code><a href="#topic+create_config">create_config()</a></code> for more information.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A contacts <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code>
</p>


<h3>Author(s)</h3>

<p>Joshua W. Lambert, Carmen Tamayo
</p>


<h3>Examples</h3>

<pre><code class='language-R'># quickly simulate contact tracing data using the function defaults
contacts &lt;- sim_contacts()
head(contacts)

# to simulate more realistic contact tracing data load epiparameters from
# {epiparameter}
library(epiparameter)
contact_distribution &lt;- epiparameter(
  disease = "COVID-19",
  epi_name = "contact distribution",
  prob_distribution = create_prob_distribution(
    prob_distribution = "pois",
    prob_distribution_params = c(mean = 2)
  )
)

infectious_period &lt;- epiparameter(
  disease = "COVID-19",
  epi_name = "infectious period",
  prob_distribution = create_prob_distribution(
    prob_distribution = "gamma",
    prob_distribution_params = c(shape = 1, scale = 1)
  )
)

contacts &lt;- sim_contacts(
  contact_distribution = contact_distribution,
  infectious_period = infectious_period,
  prob_infection = 0.5
)
</code></pre>

<hr>
<h2 id='sim_linelist'>Simulate a line list</h2><span id='topic+sim_linelist'></span>

<h3>Description</h3>

<p>The line list is simulated using a branching process and
parameterised with epidemiological parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sim_linelist(
  contact_distribution = function(x) stats::dpois(x = x, lambda = 2),
  infectious_period = function(x) stats::rlnorm(n = x, meanlog = 2, sdlog = 0.5),
  prob_infection = 0.5,
  onset_to_hosp = function(x) stats::rlnorm(n = x, meanlog = 1.5, sdlog = 0.5),
  onset_to_death = function(x) stats::rlnorm(n = x, meanlog = 2.5, sdlog = 0.5),
  onset_to_recovery = NULL,
  hosp_risk = 0.2,
  hosp_death_risk = 0.5,
  non_hosp_death_risk = 0.05,
  outbreak_start_date = as.Date("2023-01-01"),
  anonymise = FALSE,
  outbreak_size = c(10, 10000),
  population_age = c(1, 90),
  case_type_probs = c(suspected = 0.2, probable = 0.3, confirmed = 0.5),
  config = create_config()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sim_linelist_+3A_contact_distribution">contact_distribution</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object to
generate the number of contacts per infection.
</p>
<p>The function can be defined or anonymous. The function must have a single
argument in the form of an <code>integer</code> vector with elements representing the
number of contacts, and return a <code>numeric</code> vector where each element
corresponds to the probability of observing the number of contacts in the
vector passed to the function. The index of the <code>numeric</code> vector returned
is offset by one to the corresponding probability of observing the number
of contacts, i.e. the first element of the output vector is the probability
of observing zero contacts, the second element is the probability of
observing one contact, etc.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a
probability mass function internally.
</p>
<p>The default is an anonymous function with a Poisson probability mass function
(<code><a href="stats.html#topic+dpois">dpois()</a></code>) with a mean (<code class="reqn">\lambda</code>) of 2 contacts per infection.</p>
</td></tr>
<tr><td><code id="sim_linelist_+3A_infectious_period">infectious_period</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
infectious period. This defines the duration from becoming infectious to
no longer infectious. In the simulation, individuals are assumed to
become infectious immediately after being infected (the latency period is
assumed to be zero). The time intervals between an infected individual and
their contacts are assumed to be uniformly distributed within the
infectious period. Infectious periods must be strictly positive.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of randomly generated real numbers representing sampled infectious periods.
The function must have a single argument, the number of random infectious
periods to generate.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into random
number generator internally.
</p>
<p>The default is an anonymous function with a lognormal distribution random
number generator (<code><a href="stats.html#topic+rlnorm">rlnorm()</a></code>) with <code>meanlog = 2</code> and <code>sdlog = 0.5</code>.</p>
</td></tr>
<tr><td><code id="sim_linelist_+3A_prob_infection">prob_infection</code></td>
<td>
<p>A single <code>numeric</code> for the probability of a secondary
contact being infected by an infected primary contact.</p>
</td></tr>
<tr><td><code id="sim_linelist_+3A_onset_to_hosp">onset_to_hosp</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
onset-to-hospitalisation delay distribution. <code>onset_to_hosp</code> can also be
set to <code>NULL</code> to not simulate hospitalisation (admission) dates.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of <code>numeric</code>s for the length of the onset-to-hospitalisation delay. The
function must have a single argument.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a random
number generator internally.
</p>
<p>The default is an anonymous function with a lognormal distribution random
number generator (<code><a href="stats.html#topic+rlnorm">rlnorm()</a></code>) with <code>meanlog = 1.5</code> and <code>sdlog = 0.5</code>.
</p>
<p>If <code>onset_to_hosp</code> is set to <code>NULL</code> then <code>hosp_risk</code> and <code>hosp_death_risk</code>
will be automatically set to <code>NULL</code> if not manually specified.</p>
</td></tr>
<tr><td><code id="sim_linelist_+3A_onset_to_death">onset_to_death</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
onset-to-death delay distribution. <code>onset_to_death</code> can also be set to
<code>NULL</code> to not simulate dates for individuals that died.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of <code>numeric</code>s for the length of the onset-to-death delay. The function must
have a single argument.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a random
number generator internally.
</p>
<p>The default is an anonymous function with a lognormal distribution random
number generator (<code><a href="stats.html#topic+rlnorm">rlnorm()</a></code>) with <code>meanlog = 2.5</code> and <code>sdlog = 0.5</code>.
</p>
<p>If <code>onset_to_death</code> is set to <code>NULL</code> then <code>non_hosp_death_risk</code> and
<code>hosp_death_risk</code> will be automatically set to <code>NULL</code> if not manually
specified.</p>
</td></tr>
<tr><td><code id="sim_linelist_+3A_onset_to_recovery">onset_to_recovery</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
onset-to-recovery delay distribution. <code>onset_to_recovery</code> can also be <code>NULL</code>
to not simulate dates for individuals that recovered.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of <code>numeric</code>s for the length of the onset-to-recovery delay. The function
must have a single argument.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a random
number generator internally.
</p>
<p>The default is <code>NULL</code> so by default cases that recover get an <code>NA</code> in the
<code style="white-space: pre;">&#8288;$date_outcome&#8288;</code> line list column.</p>
</td></tr>
<tr><td><code id="sim_linelist_+3A_hosp_risk">hosp_risk</code></td>
<td>
<p>Either a single <code>numeric</code> for the hospitalisation risk of
everyone in the population, or a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age specific
hospitalisation risks. Default is 20% hospitalisation (<code>0.2</code>) for the entire
population. If the <code>onset_to_hosp</code> argument is set to <code>NULL</code> this argument
will automatically be set to <code>NULL</code> if not specified or can be manually
set to <code>NULL</code>. See details and examples for more information.</p>
</td></tr>
<tr><td><code id="sim_linelist_+3A_hosp_death_risk">hosp_death_risk</code></td>
<td>
<p>Either a single <code>numeric</code> for the death risk for
hospitalised individuals across the population, or a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age
specific hospitalised death risks Default is 50% death risk in hospitals
(<code>0.5</code>) for the entire population. If the <code>onset_to_death</code> argument is set
to <code>NULL</code> this argument will automatically be set to <code>NULL</code> if not specified
or can be manually set to <code>NULL</code>. See details and examples for more
information. The <code>hosp_death_risk</code> can vary through time if specified in
the <code>time_varying_death_risk</code> element of <code>config</code>, see
<code>vignette("time-varying-cfr", package = "simulist")</code> for more information.</p>
</td></tr>
<tr><td><code id="sim_linelist_+3A_non_hosp_death_risk">non_hosp_death_risk</code></td>
<td>
<p>Either a single <code>numeric</code> for the death risk for
outside of hospitals across the population, or a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age
specific death risks outside of hospitals. Default is 5% death risk outside
of hospitals  (<code>0.05</code>) for the entire population. If the <code>onset_to_death</code>
argument is set to <code>NULL</code> this argument will automatically be set to <code>NULL</code>
if not specified or can be manually set to <code>NULL</code>. See details and examples
for more information. The <code>non_hosp_death_risk</code> can vary through time if
specified in the <code>time_varying_death_risk</code> element of <code>config</code>, see
<code>vignette("time-varying-cfr", package = "simulist")</code> for more information.</p>
</td></tr>
<tr><td><code id="sim_linelist_+3A_outbreak_start_date">outbreak_start_date</code></td>
<td>
<p>A <code>date</code> for the start of the outbreak.</p>
</td></tr>
<tr><td><code id="sim_linelist_+3A_anonymise">anonymise</code></td>
<td>
<p>A <code>logical</code> boolean for whether case names should be
anonymised. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="sim_linelist_+3A_outbreak_size">outbreak_size</code></td>
<td>
<p>A <code>numeric</code> vector of length 2 defining the minimum and
the maximum number of infected individuals for the simulated outbreak.
Default is <code>c(10, 1e4)</code>, so the minimum outbreak size is 10 infected
individuals, and the maximum outbreak size is 10,000 infected individuals.
Either number can be changed to increase or decrease the maximum or minimum
outbreak size to allow simulating larger or smaller outbreaks. If the
minimum outbreak size cannot be reached after running the simulation for
many iterations (internally) then the function errors, whereas if the
maximum outbreak size is exceeded the function returns the data early and a
warning stating how many cases and contacts are returned.</p>
</td></tr>
<tr><td><code id="sim_linelist_+3A_population_age">population_age</code></td>
<td>
<p>Either a <code>numeric</code> vector with two elements or a
<code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age structure in the population. Use a <code>numeric</code> vector
to specific the age range of the population, the first element is the lower
bound for the age range, and and the second is the upper bound for the age
range (both inclusive, i.e. [lower, upper]). The <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with
age groups and the proportion of the population in that group. See details
and examples for more information.</p>
</td></tr>
<tr><td><code id="sim_linelist_+3A_case_type_probs">case_type_probs</code></td>
<td>
<p>A named <code>numeric</code> vector with the probability of
each case type. The names of the vector must be <code>"suspected"</code>, <code>"probable"</code>,
<code>"confirmed"</code>. Values of each case type must sum to one.</p>
</td></tr>
<tr><td><code id="sim_linelist_+3A_config">config</code></td>
<td>
<p>A list of settings to adjust the randomly sampled delays and
Ct values. See <code><a href="#topic+create_config">create_config()</a></code> for more information.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For age-stratified hospitalised and death risks a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code>
will need to be passed to the <code>hosp_risk</code> and/or <code>hosp_death_risk</code>
arguments. This <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> should have two columns:
</p>

<ul>
<li> <p><code>age_limit</code>: a column with one <code>numeric</code> per cell for the lower bound
(minimum) age of the age group (inclusive).
</p>
</li>
<li> <p><code>risk</code>: a column with one <code>numeric</code> per cell for the proportion
(or probability) of hospitalisation for that age group. Should be between
0 and 1.
</p>
</li></ul>

<p>For an age structured population, a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with two columns:
</p>

<ul>
<li> <p><code>age_range</code>: a column with characters specifying the lower and upper bound
of that age group, separated by a hyphen (-). Both bounds are inclusive
(integers). For example, an age group of one to ten would be given as
<code>"1-10"</code>.
</p>
</li>
<li> <p><code>proportion</code>: a column with the proportion of the population that are in
that age group. Proportions must sum to one.
</p>
</li></ul>



<h3>Value</h3>

<p>A line list <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code>
</p>


<h3>Author(s)</h3>

<p>Joshua W. Lambert, Carmen Tamayo
</p>


<h3>Examples</h3>

<pre><code class='language-R'># quickly simulate a line list using the function defaults
linelist &lt;- sim_linelist()
head(linelist)

# to simulate a more realistic line list load epiparameters from
# {epiparameter}
library(epiparameter)
contact_distribution &lt;- epiparameter(
  disease = "COVID-19",
  epi_name = "contact distribution",
  prob_distribution = create_prob_distribution(
    prob_distribution = "pois",
    prob_distribution_params = c(mean = 2)
  )
)

infectious_period &lt;- epiparameter(
  disease = "COVID-19",
  epi_name = "infectious period",
  prob_distribution = create_prob_distribution(
    prob_distribution = "gamma",
    prob_distribution_params = c(shape = 1, scale = 1)
  )
)

# get onset to hospital admission from {epiparameter} database
onset_to_hosp &lt;- epiparameter_db(
  disease = "COVID-19",
  epi_name = "onset to hospitalisation",
  single_epiparameter = TRUE
)

# get onset to death from {epiparameter} database
onset_to_death &lt;- epiparameter_db(
  disease = "COVID-19",
  epi_name = "onset to death",
  single_epiparameter = TRUE
)
# example with single hospitalisation risk for entire population
linelist &lt;- sim_linelist(
  contact_distribution = contact_distribution,
  infectious_period = infectious_period,
  prob_infection = 0.5,
  onset_to_hosp = onset_to_hosp,
  onset_to_death = onset_to_death,
  hosp_risk = 0.5
)
head(linelist)

# example with age-stratified hospitalisation risk
# 20% for over 80s
# 10% for under 5s
# 5% for the rest
age_dep_hosp_risk &lt;- data.frame(
  age_limit = c(1, 5, 80),
  risk = c(0.1, 0.05, 0.2)
)
linelist &lt;- sim_linelist(
  contact_distribution = contact_distribution,
  infectious_period = infectious_period,
  prob_infection = 0.5,
  onset_to_hosp = onset_to_hosp,
  onset_to_death = onset_to_death,
  hosp_risk = age_dep_hosp_risk
)
head(linelist)
</code></pre>

<hr>
<h2 id='sim_outbreak'>Simulate a line list and a contacts table</h2><span id='topic+sim_outbreak'></span>

<h3>Description</h3>

<p>The line list and contacts are simulated using a branching
process and parameterised with epidemiological parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sim_outbreak(
  contact_distribution = function(x) stats::dpois(x = x, lambda = 2),
  infectious_period = function(x) stats::rlnorm(n = x, meanlog = 2, sdlog = 0.5),
  prob_infection = 0.5,
  onset_to_hosp = function(x) stats::rlnorm(n = x, meanlog = 1.5, sdlog = 0.5),
  onset_to_death = function(x) stats::rlnorm(n = x, meanlog = 2.5, sdlog = 0.5),
  onset_to_recovery = NULL,
  hosp_risk = 0.2,
  hosp_death_risk = 0.5,
  non_hosp_death_risk = 0.05,
  outbreak_start_date = as.Date("2023-01-01"),
  anonymise = FALSE,
  outbreak_size = c(10, 10000),
  population_age = c(1, 90),
  case_type_probs = c(suspected = 0.2, probable = 0.3, confirmed = 0.5),
  contact_tracing_status_probs = c(under_followup = 0.7, lost_to_followup = 0.2, unknown
    = 0.1),
  config = create_config()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sim_outbreak_+3A_contact_distribution">contact_distribution</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object to
generate the number of contacts per infection.
</p>
<p>The function can be defined or anonymous. The function must have a single
argument in the form of an <code>integer</code> vector with elements representing the
number of contacts, and return a <code>numeric</code> vector where each element
corresponds to the probability of observing the number of contacts in the
vector passed to the function. The index of the <code>numeric</code> vector returned
is offset by one to the corresponding probability of observing the number
of contacts, i.e. the first element of the output vector is the probability
of observing zero contacts, the second element is the probability of
observing one contact, etc.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a
probability mass function internally.
</p>
<p>The default is an anonymous function with a Poisson probability mass function
(<code><a href="stats.html#topic+dpois">dpois()</a></code>) with a mean (<code class="reqn">\lambda</code>) of 2 contacts per infection.</p>
</td></tr>
<tr><td><code id="sim_outbreak_+3A_infectious_period">infectious_period</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
infectious period. This defines the duration from becoming infectious to
no longer infectious. In the simulation, individuals are assumed to
become infectious immediately after being infected (the latency period is
assumed to be zero). The time intervals between an infected individual and
their contacts are assumed to be uniformly distributed within the
infectious period. Infectious periods must be strictly positive.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of randomly generated real numbers representing sampled infectious periods.
The function must have a single argument, the number of random infectious
periods to generate.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into random
number generator internally.
</p>
<p>The default is an anonymous function with a lognormal distribution random
number generator (<code><a href="stats.html#topic+rlnorm">rlnorm()</a></code>) with <code>meanlog = 2</code> and <code>sdlog = 0.5</code>.</p>
</td></tr>
<tr><td><code id="sim_outbreak_+3A_prob_infection">prob_infection</code></td>
<td>
<p>A single <code>numeric</code> for the probability of a secondary
contact being infected by an infected primary contact.</p>
</td></tr>
<tr><td><code id="sim_outbreak_+3A_onset_to_hosp">onset_to_hosp</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
onset-to-hospitalisation delay distribution. <code>onset_to_hosp</code> can also be
set to <code>NULL</code> to not simulate hospitalisation (admission) dates.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of <code>numeric</code>s for the length of the onset-to-hospitalisation delay. The
function must have a single argument.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a random
number generator internally.
</p>
<p>The default is an anonymous function with a lognormal distribution random
number generator (<code><a href="stats.html#topic+rlnorm">rlnorm()</a></code>) with <code>meanlog = 1.5</code> and <code>sdlog = 0.5</code>.
</p>
<p>If <code>onset_to_hosp</code> is set to <code>NULL</code> then <code>hosp_risk</code> and <code>hosp_death_risk</code>
will be automatically set to <code>NULL</code> if not manually specified.</p>
</td></tr>
<tr><td><code id="sim_outbreak_+3A_onset_to_death">onset_to_death</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
onset-to-death delay distribution. <code>onset_to_death</code> can also be set to
<code>NULL</code> to not simulate dates for individuals that died.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of <code>numeric</code>s for the length of the onset-to-death delay. The function must
have a single argument.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a random
number generator internally.
</p>
<p>The default is an anonymous function with a lognormal distribution random
number generator (<code><a href="stats.html#topic+rlnorm">rlnorm()</a></code>) with <code>meanlog = 2.5</code> and <code>sdlog = 0.5</code>.
</p>
<p>If <code>onset_to_death</code> is set to <code>NULL</code> then <code>non_hosp_death_risk</code> and
<code>hosp_death_risk</code> will be automatically set to <code>NULL</code> if not manually
specified.</p>
</td></tr>
<tr><td><code id="sim_outbreak_+3A_onset_to_recovery">onset_to_recovery</code></td>
<td>
<p>A <code>function</code> or an <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> object for the
onset-to-recovery delay distribution. <code>onset_to_recovery</code> can also be <code>NULL</code>
to not simulate dates for individuals that recovered.
</p>
<p>The function can be defined or anonymous. The function must return a vector
of <code>numeric</code>s for the length of the onset-to-recovery delay. The function
must have a single argument.
</p>
<p>An <code style="white-space: pre;">&#8288;&lt;epiparameter&gt;&#8288;</code> can be provided. This will be converted into a random
number generator internally.
</p>
<p>The default is <code>NULL</code> so by default cases that recover get an <code>NA</code> in the
<code style="white-space: pre;">&#8288;$date_outcome&#8288;</code> line list column.</p>
</td></tr>
<tr><td><code id="sim_outbreak_+3A_hosp_risk">hosp_risk</code></td>
<td>
<p>Either a single <code>numeric</code> for the hospitalisation risk of
everyone in the population, or a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age specific
hospitalisation risks. Default is 20% hospitalisation (<code>0.2</code>) for the entire
population. If the <code>onset_to_hosp</code> argument is set to <code>NULL</code> this argument
will automatically be set to <code>NULL</code> if not specified or can be manually
set to <code>NULL</code>. See details and examples for more information.</p>
</td></tr>
<tr><td><code id="sim_outbreak_+3A_hosp_death_risk">hosp_death_risk</code></td>
<td>
<p>Either a single <code>numeric</code> for the death risk for
hospitalised individuals across the population, or a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age
specific hospitalised death risks Default is 50% death risk in hospitals
(<code>0.5</code>) for the entire population. If the <code>onset_to_death</code> argument is set
to <code>NULL</code> this argument will automatically be set to <code>NULL</code> if not specified
or can be manually set to <code>NULL</code>. See details and examples for more
information. The <code>hosp_death_risk</code> can vary through time if specified in
the <code>time_varying_death_risk</code> element of <code>config</code>, see
<code>vignette("time-varying-cfr", package = "simulist")</code> for more information.</p>
</td></tr>
<tr><td><code id="sim_outbreak_+3A_non_hosp_death_risk">non_hosp_death_risk</code></td>
<td>
<p>Either a single <code>numeric</code> for the death risk for
outside of hospitals across the population, or a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age
specific death risks outside of hospitals. Default is 5% death risk outside
of hospitals  (<code>0.05</code>) for the entire population. If the <code>onset_to_death</code>
argument is set to <code>NULL</code> this argument will automatically be set to <code>NULL</code>
if not specified or can be manually set to <code>NULL</code>. See details and examples
for more information. The <code>non_hosp_death_risk</code> can vary through time if
specified in the <code>time_varying_death_risk</code> element of <code>config</code>, see
<code>vignette("time-varying-cfr", package = "simulist")</code> for more information.</p>
</td></tr>
<tr><td><code id="sim_outbreak_+3A_outbreak_start_date">outbreak_start_date</code></td>
<td>
<p>A <code>date</code> for the start of the outbreak.</p>
</td></tr>
<tr><td><code id="sim_outbreak_+3A_anonymise">anonymise</code></td>
<td>
<p>A <code>logical</code> boolean for whether case names should be
anonymised. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="sim_outbreak_+3A_outbreak_size">outbreak_size</code></td>
<td>
<p>A <code>numeric</code> vector of length 2 defining the minimum and
the maximum number of infected individuals for the simulated outbreak.
Default is <code>c(10, 1e4)</code>, so the minimum outbreak size is 10 infected
individuals, and the maximum outbreak size is 10,000 infected individuals.
Either number can be changed to increase or decrease the maximum or minimum
outbreak size to allow simulating larger or smaller outbreaks. If the
minimum outbreak size cannot be reached after running the simulation for
many iterations (internally) then the function errors, whereas if the
maximum outbreak size is exceeded the function returns the data early and a
warning stating how many cases and contacts are returned.</p>
</td></tr>
<tr><td><code id="sim_outbreak_+3A_population_age">population_age</code></td>
<td>
<p>Either a <code>numeric</code> vector with two elements or a
<code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with age structure in the population. Use a <code>numeric</code> vector
to specific the age range of the population, the first element is the lower
bound for the age range, and and the second is the upper bound for the age
range (both inclusive, i.e. [lower, upper]). The <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with
age groups and the proportion of the population in that group. See details
and examples for more information.</p>
</td></tr>
<tr><td><code id="sim_outbreak_+3A_case_type_probs">case_type_probs</code></td>
<td>
<p>A named <code>numeric</code> vector with the probability of
each case type. The names of the vector must be <code>"suspected"</code>, <code>"probable"</code>,
<code>"confirmed"</code>. Values of each case type must sum to one.</p>
</td></tr>
<tr><td><code id="sim_outbreak_+3A_contact_tracing_status_probs">contact_tracing_status_probs</code></td>
<td>
<p>A named <code>numeric</code> vector with the
probability of each contact tracing status. The names of the vector must
be <code>"under_followup"</code>, <code>"lost_to_followup"</code>, <code>"unknown"</code>. Values of each
contact tracing status must sum to one.</p>
</td></tr>
<tr><td><code id="sim_outbreak_+3A_config">config</code></td>
<td>
<p>A list of settings to adjust the randomly sampled delays and
Ct values. See <code><a href="#topic+create_config">create_config()</a></code> for more information.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For age-stratified hospitalised and death risks a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code>
will need to be passed to the <code>hosp_risk</code> and/or <code>hosp_death_risk</code>
arguments. This <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> should have two columns:
</p>

<ul>
<li> <p><code>age_limit</code>: a column with one <code>numeric</code> per cell for the lower bound
(minimum) age of the age group (inclusive).
</p>
</li>
<li> <p><code>risk</code>: a column with one <code>numeric</code> per cell for the proportion
(or probability) of hospitalisation for that age group. Should be between
0 and 1.
</p>
</li></ul>

<p>For an age structured population, a <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code> with two columns:
</p>

<ul>
<li> <p><code>age_range</code>: a column with characters specifying the lower and upper bound
of that age group, separated by a hyphen (-). Both bounds are inclusive
(integers). For example, an age group of one to ten would be given as
<code>"1-10"</code>.
</p>
</li>
<li> <p><code>proportion</code>: a column with the proportion of the population that are in
that age group. Proportions must sum to one.
</p>
</li></ul>



<h3>Value</h3>

<p>A list with two elements:
</p>

<ol>
<li><p> A line list <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code>
</p>
</li>
<li><p> A contacts <code style="white-space: pre;">&#8288;&lt;data.frame&gt;&#8288;</code>
</p>
</li></ol>



<h3>Author(s)</h3>

<p>Joshua W. Lambert
</p>


<h3>Examples</h3>

<pre><code class='language-R'># quickly simulate an outbreak using the function defaults
outbreak &lt;- sim_outbreak()
head(outbreak$linelist)
head(outbreak$contacts)

# to simulate a more realistic outbreak load epiparameters from
# {epiparameter}
library(epiparameter)
contact_distribution &lt;- epiparameter(
  disease = "COVID-19",
  epi_name = "contact distribution",
  prob_distribution = create_prob_distribution(
    prob_distribution = "pois",
    prob_distribution_params = c(mean = 2)
  )
)

infectious_period &lt;- epiparameter(
  disease = "COVID-19",
  epi_name = "infectious period",
  prob_distribution = create_prob_distribution(
    prob_distribution = "gamma",
    prob_distribution_params = c(shape = 1, scale = 1)
  )
)

# get onset to hospital admission from {epiparameter} database
onset_to_hosp &lt;- epiparameter_db(
  disease = "COVID-19",
  epi_name = "onset to hospitalisation",
  single_epiparameter = TRUE
)

# get onset to death from {epiparameter} database
onset_to_death &lt;- epiparameter_db(
  disease = "COVID-19",
  epi_name = "onset to death",
  single_epiparameter = TRUE
)

outbreak &lt;- sim_outbreak(
  contact_distribution = contact_distribution,
  infectious_period = infectious_period,
  prob_infection = 0.5,
  onset_to_hosp = onset_to_hosp,
  onset_to_death = onset_to_death
)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
