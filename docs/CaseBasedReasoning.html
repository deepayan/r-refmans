<!DOCTYPE html><html><head><title>Help for package CaseBasedReasoning</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {CaseBasedReasoning}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#asDistObject'><p>Converts a distance vector into an object of class <code>dist</code></p></a></li>
<li><a href='#call_function'><p>Call a function by character strings using the namespace and custom</p>
parameters.</a></li>
<li><a href='#CaseBasedReasoning'><p>Case Based Reasoning</p></a></li>
<li><a href='#CBRBase'><p>Root class for common functionality of this package</p></a></li>
<li><a href='#CoxModel'><p>Cox-Beta Model for Case-Based-Reasoning</p></a></li>
<li><a href='#depth_distance'><p>Depth Distance</p></a></li>
<li><a href='#distanceRandomForest'><p>Distance calculation based on RandomForest Proximity or Depth</p></a></li>
<li><a href='#edges_between_terminal_nodes'><p>Number of Edges between Terminal Nodes</p></a></li>
<li><a href='#generate_grid'><p>Generate Grid</p></a></li>
<li><a href='#LinearModel'><p>Linear Regression Model for Case-Based-Reasoning</p></a></li>
<li><a href='#LogisticModel'><p>Logistic Regression Model for Case-Based-Reasoning</p></a></li>
<li><a href='#proximity_distance'><p>Get proximity matrix of an ranger object</p></a></li>
<li><a href='#ranger_forests_to_matrix'><p>Forest2Matrix</p></a></li>
<li><a href='#RegressionModel'><p>Root class for Regression Models, e.g., CPH, logistic, and linear regression</p></a></li>
<li><a href='#RFModel'><p>RandomForest Model for Searching Similar Cases</p></a></li>
<li><a href='#terminalNodes'><p>Get the terminal node id of a RandomForest Object</p></a></li>
<li><a href='#weightedDistance'><p>Weighted Distance calculation</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Case Based Reasoning</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-04-29</td>
</tr>
<tr>
<td>Description:</td>
<td>Case-based reasoning is a problem-solving methodology that involves solving a new problem by referring to the solution of a similar problem in a large set of previously solved problems. The key aspect of Case Based Reasoning is to determine the problem that "most closely" matches the new problem at hand. This is achieved by defining a family of distance functions and using these distance functions as parameters for local averaging regression estimates of the final result. The optimal distance function is chosen based on a specific error measure used in regression estimation. This approach allows for efficient problem-solving by leveraging past experiences and adapting solutions from similar cases. The underlying concept is inspired by the work of Dippon J. (2002) &lt;<a href="https://doi.org/10.1016%2FS0167-9473%2802%2900058-0">doi:10.1016/S0167-9473(02)00058-0</a>&gt;.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/sipemu/case-based-reasoning">https://github.com/sipemu/case-based-reasoning</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/sipemu/case-based-reasoning/issues">https://github.com/sipemu/case-based-reasoning/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Depends:</td>
<td>Rcpp, RcppParallel, rms</td>
</tr>
<tr>
<td>Imports:</td>
<td>R6, ranger, survival, ggplot2, cowplot, dplyr, purrr, tidyr,
pryr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown, RcppArmadillo</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, RcppArmadillo, RcppParallel</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>GNU make</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>yes</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-04-29 08:29:05 UTC; simonm</td>
</tr>
<tr>
<td>Author:</td>
<td>Simon Mueller [cre, aut],
  PD Dr. Juergen Dippon [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Simon Mueller &lt;simon.mueller@muon-stat.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-05-02 08:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='asDistObject'>Converts a distance vector into an object of class <code>dist</code></h2><span id='topic+asDistObject'></span>

<h3>Description</h3>

<p>Converts a distance vector into an object of class <code>dist</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>asDistObject(x, n, method)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="asDistObject_+3A_x">x</code></td>
<td>
<p>data vector</p>
</td></tr>
<tr><td><code id="asDistObject_+3A_n">n</code></td>
<td>
<p>length of x</p>
</td></tr>
<tr><td><code id="asDistObject_+3A_method">method</code></td>
<td>
<p>method description</p>
</td></tr>
</table>

<hr>
<h2 id='call_function'>Call a function by character strings using the namespace and custom 
parameters.</h2><span id='topic+call_function'></span>

<h3>Description</h3>

<p>Call a function by character strings using the namespace and custom 
parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>call_function(func_list)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="call_function_+3A_func_list">func_list</code></td>
<td>
<p>A list with fields func, namespace, and args</p>
</td></tr>
</table>

<hr>
<h2 id='CaseBasedReasoning'>Case Based Reasoning</h2><span id='topic+CaseBasedReasoning'></span>

<h3>Description</h3>

<p>A R package for Case Based Reasoning using statistical/ML models.
</p>

<hr>
<h2 id='CBRBase'>Root class for common functionality of this package</h2><span id='topic+CBRBase'></span>

<h3>Description</h3>

<p>Root class for common functionality of this package
</p>
<p>Root class for common functionality of this package
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>model</code></dt><dd><p>the statistical model</p>
</dd>
<dt><code>data</code></dt><dd><p>training data</p>
</dd>
<dt><code>model_fit</code></dt><dd><p>trained object</p>
</dd>
<dt><code>formula</code></dt><dd><p>Object of class formula or character describing the model fit</p>
</dd>
<dt><code>terms</code></dt><dd><p>terms of the formula</p>
</dd>
<dt><code>endPoint</code></dt><dd><p>Target variable</p>
</dd>
<dt><code>distMat</code></dt><dd><p>A matrix with distances</p>
</dd>
<dt><code>orderMat</code></dt><dd><p>A matrix with the order indices for similar cases search</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-CBRBase-new"><code>CBRBase$new()</code></a>
</p>
</li>
<li> <p><a href="#method-CBRBase-fit"><code>CBRBase$fit()</code></a>
</p>
</li>
<li> <p><a href="#method-CBRBase-calc_distance_matrix"><code>CBRBase$calc_distance_matrix()</code></a>
</p>
</li>
<li> <p><a href="#method-CBRBase-get_similar_cases"><code>CBRBase$get_similar_cases()</code></a>
</p>
</li>
<li> <p><a href="#method-CBRBase-clone"><code>CBRBase$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-CBRBase-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize object for searching similar cases
</p>


<h5>Usage</h5>

<div class="r"><pre>CBRBase$new(formula, data)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>formula</code></dt><dd><p>Object of class formula or character describing the model fit</p>
</dd>
<dt><code>data</code></dt><dd></dd>
</dl>

</div>


<hr>
<a id="method-CBRBase-fit"></a>



<h4>Method <code>fit()</code></h4>

<p>Fit the Model
</p>


<h5>Usage</h5>

<div class="r"><pre>CBRBase$fit()</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>x</code></dt><dd><p>Training data of class data.frame</p>
</dd>
</dl>

</div>


<hr>
<a id="method-CBRBase-calc_distance_matrix"></a>



<h4>Method <code>calc_distance_matrix()</code></h4>

<p>Calculates the distance matrix
</p>


<h5>Usage</h5>

<div class="r"><pre>CBRBase$calc_distance_matrix(query = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>query</code></dt><dd><p>Query data of class data.frame</p>
</dd>
<dt><code>x</code></dt><dd><p>Training data of class data.frame</p>
</dd>
</dl>

</div>


<hr>
<a id="method-CBRBase-get_similar_cases"></a>



<h4>Method <code>get_similar_cases()</code></h4>

<p>Extracts similar cases
</p>


<h5>Usage</h5>

<div class="r"><pre>CBRBase$get_similar_cases(query, k = 1, addDistance = T, merge = F)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>query</code></dt><dd><p>Query data of class data.frame</p>
</dd>
<dt><code>k</code></dt><dd><p>number of similar cases</p>
</dd>
<dt><code>addDistance</code></dt><dd><p>Add distance to result data.frame</p>
</dd>
<dt><code>merge</code></dt><dd><p>Add query data to matched cases data.frame</p>
</dd>
</dl>

</div>


<hr>
<a id="method-CBRBase-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>CBRBase$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='CoxModel'>Cox-Beta Model for Case-Based-Reasoning</h2><span id='topic+CoxModel'></span>

<h3>Description</h3>

<p>Cox-Beta Model for Case-Based-Reasoning
</p>
<p>Cox-Beta Model for Case-Based-Reasoning
</p>


<h3>Details</h3>

<p>Regression beta coefficients obtained from a CPH regression model fitted on the 
training data are used for building a weighted distance measure between
train and test data. Afterwards, we will use these weights for calculating a 
(n x m)-distance matrix, where n is the number of observations in the training data, 
and m is the number of observations of the test data. The user can use this 
distance matrix for further cluster analysis or for extracting for each test observation 
k (= 1,...,l) similar cases from the train data. We use the rms-package for model fitting,
variable selection, and checking model assumptions.
If the user omits the test data, this functions returns a n x n-distance matrix.
</p>


<h3>Super classes</h3>

<p><code><a href="#topic+CBRBase">CaseBasedReasoning::CBRBase</a></code> -&gt; <code><a href="#topic+RegressionModel">CaseBasedReasoning::RegressionModel</a></code> -&gt; <code>CoxModel</code>
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>model</code></dt><dd><p>the statistical model</p>
</dd>
<dt><code>model_params</code></dt><dd><p>rms arguments</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-CoxModel-check_ph"><code>CoxModel$check_ph()</code></a>
</p>
</li>
<li> <p><a href="#method-CoxModel-clone"><code>CoxModel$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="CBRBase" data-id="calc_distance_matrix"><a href='../../CaseBasedReasoning/html/CBRBase.html#method-CBRBase-calc_distance_matrix'><code>CaseBasedReasoning::CBRBase$calc_distance_matrix()</code></a></span></li>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="CBRBase" data-id="get_similar_cases"><a href='../../CaseBasedReasoning/html/CBRBase.html#method-CBRBase-get_similar_cases'><code>CaseBasedReasoning::CBRBase$get_similar_cases()</code></a></span></li>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="CBRBase" data-id="initialize"><a href='../../CaseBasedReasoning/html/CBRBase.html#method-CBRBase-initialize'><code>CaseBasedReasoning::CBRBase$initialize()</code></a></span></li>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="RegressionModel" data-id="fit"><a href='../../CaseBasedReasoning/html/RegressionModel.html#method-RegressionModel-fit'><code>CaseBasedReasoning::RegressionModel$fit()</code></a></span></li>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="RegressionModel" data-id="print"><a href='../../CaseBasedReasoning/html/RegressionModel.html#method-RegressionModel-print'><code>CaseBasedReasoning::RegressionModel$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="RegressionModel" data-id="variable_selection"><a href='../../CaseBasedReasoning/html/RegressionModel.html#method-RegressionModel-variable_selection'><code>CaseBasedReasoning::RegressionModel$variable_selection()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-CoxModel-check_ph"></a>



<h4>Method <code>check_ph()</code></h4>

<p>Check proportional hazard assumption graphically
</p>


<h5>Usage</h5>

<div class="r"><pre>CoxModel$check_ph()</pre></div>


<hr>
<a id="method-CoxModel-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>CoxModel$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='depth_distance'>Depth Distance</h2><span id='topic+depth_distance'></span>

<h3>Description</h3>

<p>This function returns for each observation the pairwise sum of edges  
between the corresponding terminal nodes over each tree in the random forest.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>depth_distance(x, y = NULL, rfObject)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="depth_distance_+3A_x">x</code></td>
<td>
<p>A data.frame with the same columns as in the training data of the RandomForest model</p>
</td></tr>
<tr><td><code id="depth_distance_+3A_y">y</code></td>
<td>
<p>A data.frame with the same columns as in the training data of the RandomForest model</p>
</td></tr>
<tr><td><code id="depth_distance_+3A_rfobject">rfObject</code></td>
<td>
<p><code>ranger</code> object</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
require(ranger)
rf &lt;- ranger(Species ~ ., data = iris, num.trees = 5, write.forest = TRUE)
depth_distance(x=iris[, -5], rfObject=rf)


</code></pre>

<hr>
<h2 id='distanceRandomForest'>Distance calculation based on RandomForest Proximity or Depth</h2><span id='topic+distanceRandomForest'></span>

<h3>Description</h3>

<p>Distance calculation based on RandomForest Proximity or Depth
</p>


<h3>Usage</h3>

<pre><code class='language-R'>distanceRandomForest(
  x,
  y = NULL,
  rfObject,
  method = "Proximity",
  threads = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="distanceRandomForest_+3A_x">x</code></td>
<td>
<p>a data.frame</p>
</td></tr>
<tr><td><code id="distanceRandomForest_+3A_y">y</code></td>
<td>
<p>a second data.frame</p>
</td></tr>
<tr><td><code id="distanceRandomForest_+3A_rfobject">rfObject</code></td>
<td>
<p><code>ranger</code> object</p>
</td></tr>
<tr><td><code id="distanceRandomForest_+3A_method">method</code></td>
<td>
<p>distance calculation method, Proximity (Default) or Depth.</p>
</td></tr>
<tr><td><code id="distanceRandomForest_+3A_threads">threads</code></td>
<td>
<p>number of threads to use</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>dist</code> or a matrix object with pairwise distance of 
observations in x vs y (if not null)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(ranger)
# proximity pairwise distances
rf.fit &lt;- ranger(Species ~ ., data = iris, num.trees = 500, write.forest = TRUE)
distanceRandomForest(x = iris[, -5], rfObject = rf.fit, method = "Proximity", threads = 1)

# depth distance for train versus test subset
set.seed(1234L)
learn &lt;- sample(1:150, 100)
test &lt;- (1:150)[-learn]
rf.fit &lt;- ranger(Species ~ ., data = iris[learn, ], num.trees = 500, write.forest = TRUE)
distanceRandomForest(x = iris[learn, -5], y = iris[test, -5], rfObject = rf.fit, method = "Depth")


</code></pre>

<hr>
<h2 id='edges_between_terminal_nodes'>Number of Edges between Terminal Nodes</h2><span id='topic+edges_between_terminal_nodes'></span>

<h3>Description</h3>

<p>first two columns are terminal node IDs; If an ID pair do not 
appear in a tree -1 is inserted
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edges_between_terminal_nodes(rfObject)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="edges_between_terminal_nodes_+3A_rfobject">rfObject</code></td>
<td>
<p><code>ranger</code> object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>matrix</code> object with pairwise terminal node edge length
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
require(ranger)
rf.fit &lt;- ranger(Species ~ ., data = iris, num.trees = 5, write.forest = TRUE)
edges_between_terminal_nodes(rf.fit)


</code></pre>

<hr>
<h2 id='generate_grid'>Generate Grid</h2><span id='topic+generate_grid'></span>

<h3>Description</h3>

<p>Generates a uniform grid over the distribution of the time2event variable, 
calculates closest point and returns this point for each input time2event 
element. Memory consumption will increase when performing the randomForest 
model with many unique time2event values. Therefore, we offer a reduction of 
the time2event values by choosing closest elements in a grid.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generate_grid(t2e, grid_length = 250)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generate_grid_+3A_t2e">t2e</code></td>
<td>
<p>numeric vector with time2event values</p>
</td></tr>
<tr><td><code id="generate_grid_+3A_grid_length">grid_length</code></td>
<td>
<p>number of grid elements</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with new_t2e and grid_error
</p>

<hr>
<h2 id='LinearModel'>Linear Regression Model for Case-Based-Reasoning</h2><span id='topic+LinearModel'></span>

<h3>Description</h3>

<p>Linear Regression Model for Case-Based-Reasoning
</p>
<p>Linear Regression Model for Case-Based-Reasoning
</p>


<h3>Super classes</h3>

<p><code><a href="#topic+CBRBase">CaseBasedReasoning::CBRBase</a></code> -&gt; <code><a href="#topic+RegressionModel">CaseBasedReasoning::RegressionModel</a></code> -&gt; <code>LinearModel</code>
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>model</code></dt><dd><p>the statistical model</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-LinearModel-clone"><code>LinearModel$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="CBRBase" data-id="calc_distance_matrix"><a href='../../CaseBasedReasoning/html/CBRBase.html#method-CBRBase-calc_distance_matrix'><code>CaseBasedReasoning::CBRBase$calc_distance_matrix()</code></a></span></li>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="CBRBase" data-id="get_similar_cases"><a href='../../CaseBasedReasoning/html/CBRBase.html#method-CBRBase-get_similar_cases'><code>CaseBasedReasoning::CBRBase$get_similar_cases()</code></a></span></li>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="CBRBase" data-id="initialize"><a href='../../CaseBasedReasoning/html/CBRBase.html#method-CBRBase-initialize'><code>CaseBasedReasoning::CBRBase$initialize()</code></a></span></li>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="RegressionModel" data-id="fit"><a href='../../CaseBasedReasoning/html/RegressionModel.html#method-RegressionModel-fit'><code>CaseBasedReasoning::RegressionModel$fit()</code></a></span></li>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="RegressionModel" data-id="print"><a href='../../CaseBasedReasoning/html/RegressionModel.html#method-RegressionModel-print'><code>CaseBasedReasoning::RegressionModel$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="RegressionModel" data-id="variable_selection"><a href='../../CaseBasedReasoning/html/RegressionModel.html#method-RegressionModel-variable_selection'><code>CaseBasedReasoning::RegressionModel$variable_selection()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-LinearModel-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>LinearModel$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='LogisticModel'>Logistic Regression Model for Case-Based-Reasoning</h2><span id='topic+LogisticModel'></span>

<h3>Description</h3>

<p>Logistic Regression Model for Case-Based-Reasoning
</p>
<p>Logistic Regression Model for Case-Based-Reasoning
</p>


<h3>Super classes</h3>

<p><code><a href="#topic+CBRBase">CaseBasedReasoning::CBRBase</a></code> -&gt; <code><a href="#topic+RegressionModel">CaseBasedReasoning::RegressionModel</a></code> -&gt; <code>LogisticModel</code>
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>model</code></dt><dd><p>the statistical model</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-LogisticModel-clone"><code>LogisticModel$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="CBRBase" data-id="calc_distance_matrix"><a href='../../CaseBasedReasoning/html/CBRBase.html#method-CBRBase-calc_distance_matrix'><code>CaseBasedReasoning::CBRBase$calc_distance_matrix()</code></a></span></li>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="CBRBase" data-id="get_similar_cases"><a href='../../CaseBasedReasoning/html/CBRBase.html#method-CBRBase-get_similar_cases'><code>CaseBasedReasoning::CBRBase$get_similar_cases()</code></a></span></li>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="CBRBase" data-id="initialize"><a href='../../CaseBasedReasoning/html/CBRBase.html#method-CBRBase-initialize'><code>CaseBasedReasoning::CBRBase$initialize()</code></a></span></li>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="RegressionModel" data-id="fit"><a href='../../CaseBasedReasoning/html/RegressionModel.html#method-RegressionModel-fit'><code>CaseBasedReasoning::RegressionModel$fit()</code></a></span></li>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="RegressionModel" data-id="print"><a href='../../CaseBasedReasoning/html/RegressionModel.html#method-RegressionModel-print'><code>CaseBasedReasoning::RegressionModel$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="RegressionModel" data-id="variable_selection"><a href='../../CaseBasedReasoning/html/RegressionModel.html#method-RegressionModel-variable_selection'><code>CaseBasedReasoning::RegressionModel$variable_selection()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-LogisticModel-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>LogisticModel$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='proximity_distance'>Get proximity matrix of an ranger object</h2><span id='topic+proximity_distance'></span>

<h3>Description</h3>

<p>Get proximity matrix of an ranger object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>proximity_distance(x, y = NULL, rfObject, as_dist = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="proximity_distance_+3A_x">x</code></td>
<td>
<p>a new dataset</p>
</td></tr>
<tr><td><code id="proximity_distance_+3A_y">y</code></td>
<td>
<p>a second new dataset (Default: NULL)</p>
</td></tr>
<tr><td><code id="proximity_distance_+3A_rfobject">rfObject</code></td>
<td>
<p><code>ranger</code> object</p>
</td></tr>
<tr><td><code id="proximity_distance_+3A_as_dist">as_dist</code></td>
<td>
<p>Bool, return a dist object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>dist</code> or a matrix object with pairwise proximity of 
observations in x vs y (if not null)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
require(ranger)
rf &lt;- ranger(Species ~ ., data = iris, num.trees = 5, write.forest = TRUE)
proximity_distance(x = iris[, -5], rfObject = rf)

set.seed(1234L)
learn &lt;- sample(1:150, 100)
test &lt;- (1:150)[-learn]
rf &lt;- ranger(Species ~ ., data = iris[learn, ], num.trees = 500, write.forest = TRUE)
proximity_distance(x = iris[learn, -5], y = iris[test, -5], rfObject = rf)

</code></pre>

<hr>
<h2 id='ranger_forests_to_matrix'>Forest2Matrix</h2><span id='topic+ranger_forests_to_matrix'></span>

<h3>Description</h3>

<p>Transform trees of a <code>ranger</code>-object to a matrix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ranger_forests_to_matrix(rfObject)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ranger_forests_to_matrix_+3A_rfobject">rfObject</code></td>
<td>
<p><code>ranger</code> object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>matrix</code> object with 
Column 1: tree ID
Column 2: node ID
Column 3: child node ID 1
Column 4: child node ID 2
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(ranger)
rf.fit &lt;- ranger(Species ~ ., data = iris, num.trees = 5, write.forest = TRUE)
forest_matrix &lt;- ranger_forests_to_matrix(rf.fit)


</code></pre>

<hr>
<h2 id='RegressionModel'>Root class for Regression Models, e.g., CPH, logistic, and linear regression</h2><span id='topic+RegressionModel'></span>

<h3>Description</h3>

<p>Root class for Regression Models, e.g., CPH, logistic, and linear regression
</p>
<p>Root class for Regression Models, e.g., CPH, logistic, and linear regression
</p>


<h3>Super class</h3>

<p><code><a href="#topic+CBRBase">CaseBasedReasoning::CBRBase</a></code> -&gt; <code>RegressionModel</code>
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>model_params</code></dt><dd><p>rms arguments</p>
</dd>
<dt><code>weights</code></dt><dd><p>Weights for distance calculation</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-RegressionModel-print"><code>RegressionModel$print()</code></a>
</p>
</li>
<li> <p><a href="#method-RegressionModel-variable_selection"><code>RegressionModel$variable_selection()</code></a>
</p>
</li>
<li> <p><a href="#method-RegressionModel-fit"><code>RegressionModel$fit()</code></a>
</p>
</li>
<li> <p><a href="#method-RegressionModel-clone"><code>RegressionModel$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="CBRBase" data-id="calc_distance_matrix"><a href='../../CaseBasedReasoning/html/CBRBase.html#method-CBRBase-calc_distance_matrix'><code>CaseBasedReasoning::CBRBase$calc_distance_matrix()</code></a></span></li>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="CBRBase" data-id="get_similar_cases"><a href='../../CaseBasedReasoning/html/CBRBase.html#method-CBRBase-get_similar_cases'><code>CaseBasedReasoning::CBRBase$get_similar_cases()</code></a></span></li>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="CBRBase" data-id="initialize"><a href='../../CaseBasedReasoning/html/CBRBase.html#method-CBRBase-initialize'><code>CaseBasedReasoning::CBRBase$initialize()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-RegressionModel-print"></a>



<h4>Method <code>print()</code></h4>

<p>Prints information of the initialized object
</p>


<h5>Usage</h5>

<div class="r"><pre>RegressionModel$print()</pre></div>


<hr>
<a id="method-RegressionModel-variable_selection"></a>



<h4>Method <code>variable_selection()</code></h4>

<p>Fast backward variable selection with penalization
</p>


<h5>Usage</h5>

<div class="r"><pre>RegressionModel$variable_selection(x)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>x</code></dt><dd><p>Training data of class data.frame</p>
</dd>
</dl>

</div>


<hr>
<a id="method-RegressionModel-fit"></a>



<h4>Method <code>fit()</code></h4>

<p>Fit the RandomForest
</p>


<h5>Usage</h5>

<div class="r"><pre>RegressionModel$fit()</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>x</code></dt><dd><p>Training data of class data.frame</p>
</dd>
</dl>

</div>


<hr>
<a id="method-RegressionModel-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>RegressionModel$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='RFModel'>RandomForest Model for Searching Similar Cases</h2><span id='topic+RFModel'></span>

<h3>Description</h3>

<p>RandomForest Model for Searching Similar Cases
</p>
<p>RandomForest Model for Searching Similar Cases
</p>


<h3>Details</h3>

<p>This class uses the proximity or depth matrix of the RandomForest algorithm 
as a similarity matrix of training and query 
observations. By default all cases with at least one missing values are dropped 
from learning, calculating the distance matrix and searching for similar
cases.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+CBRBase">CaseBasedReasoning::CBRBase</a></code> -&gt; <code>RFModel</code>
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>model</code></dt><dd><p>the statistical model</p>
</dd>
<dt><code>model_params</code></dt><dd><p>model arguments</p>
</dd>
<dt><code>dist_method</code></dt><dd><p>Distance method</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-RFModel-print"><code>RFModel$print()</code></a>
</p>
</li>
<li> <p><a href="#method-RFModel-new"><code>RFModel$new()</code></a>
</p>
</li>
<li> <p><a href="#method-RFModel-fit"><code>RFModel$fit()</code></a>
</p>
</li>
<li> <p><a href="#method-RFModel-set_distance_method"><code>RFModel$set_distance_method()</code></a>
</p>
</li>
<li> <p><a href="#method-RFModel-clone"><code>RFModel$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="CBRBase" data-id="calc_distance_matrix"><a href='../../CaseBasedReasoning/html/CBRBase.html#method-CBRBase-calc_distance_matrix'><code>CaseBasedReasoning::CBRBase$calc_distance_matrix()</code></a></span></li>
<li><span class="pkg-link" data-pkg="CaseBasedReasoning" data-topic="CBRBase" data-id="get_similar_cases"><a href='../../CaseBasedReasoning/html/CBRBase.html#method-CBRBase-get_similar_cases'><code>CaseBasedReasoning::CBRBase$get_similar_cases()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-RFModel-print"></a>



<h4>Method <code>print()</code></h4>

<p>Prints information of the initialized object
</p>


<h5>Usage</h5>

<div class="r"><pre>RFModel$print()</pre></div>


<hr>
<a id="method-RFModel-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize a RandomForest object for searching similar cases.
</p>


<h5>Usage</h5>

<div class="r"><pre>RFModel$new(formula, data, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>formula</code></dt><dd><p>Object of class formula or character describing the model fit.</p>
</dd>
<dt><code>data</code></dt><dd><p>Training data of class data.frame</p>
</dd>
<dt><code>...</code></dt><dd><p>ranger RandomForest arguments</p>
</dd>
</dl>

</div>


<hr>
<a id="method-RFModel-fit"></a>



<h4>Method <code>fit()</code></h4>

<p>Fit the RandomForest
</p>


<h5>Usage</h5>

<div class="r"><pre>RFModel$fit()</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>x</code></dt><dd><p>Training data of class data.frame</p>
</dd>
</dl>

</div>


<hr>
<a id="method-RFModel-set_distance_method"></a>



<h4>Method <code>set_distance_method()</code></h4>

<p>Set the distance method. Available are Proximity and Depth
</p>


<h5>Usage</h5>

<div class="r"><pre>RFModel$set_distance_method(method = "Depth")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>method</code></dt><dd><p>Distance calculation method (default: Proximity)</p>
</dd>
</dl>

</div>


<hr>
<a id="method-RFModel-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>RFModel$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>References</h3>

<p>Englund and Verikas. A novel approach to estimate proximity in a random 
forest: An exploratory study.
</p>

<hr>
<h2 id='terminalNodes'>Get the terminal node id of a RandomForest Object</h2><span id='topic+terminalNodes'></span>

<h3>Description</h3>

<p>Extracts for each observation and for each tree in the forest the terminal 
node id. The index of terminal nodes are starting with 1, e.g., the root node has id 1
</p>


<h3>Usage</h3>

<pre><code class='language-R'>terminalNodes(x, rfObject)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="terminalNodes_+3A_x">x</code></td>
<td>
<p>a data.frame</p>
</td></tr>
<tr><td><code id="terminalNodes_+3A_rfobject">rfObject</code></td>
<td>
<p><code>ranger</code> object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Matrix with terminal node IDs for all observations in x (rows) and
trees (columns)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ranger)
rf.fit &lt;- ranger(Species ~ ., data = iris, num.trees = 5, write.forest = TRUE)
dfNodes &lt;- terminalNodes(iris[, -5], rf.fit)

</code></pre>

<hr>
<h2 id='weightedDistance'>Weighted Distance calculation</h2><span id='topic+weightedDistance'></span>

<h3>Description</h3>

<p>Weighted Distance calculation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weightedDistance(x, y = NULL, weights = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="weightedDistance_+3A_x">x</code></td>
<td>
<p>a new dataset</p>
</td></tr>
<tr><td><code id="weightedDistance_+3A_y">y</code></td>
<td>
<p>a second new dataset</p>
</td></tr>
<tr><td><code id="weightedDistance_+3A_weights">weights</code></td>
<td>
<p>a vector of weights</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>dist</code> or <code>matrix</code> object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
require(ranger)
rf &lt;- ranger(Species ~ ., data = iris, num.trees = 5, write.forest = TRUE)
terminalNodes(iris[, -5], rf)


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
