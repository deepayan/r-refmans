<!DOCTYPE html><html><head><title>Help for package OSMscale</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {OSMscale}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#OSMscale-package'><p>Add a Scalebar to OpenStreetMap Plots</p></a></li>
<li><a href='#biketrack'><p>GPS recorded bike track</p></a></li>
<li><a href='#checkLL'><p>lat-long coordinate check</p></a></li>
<li><a href='#degree'><p>decimal degree coordinate conversion</p></a></li>
<li><a href='#earthDist'><p>distance between lat-long coordinates</p></a></li>
<li><a href='#equidistPoints'><p>Evenly spaced points along path</p></a></li>
<li><a href='#mapComp'><p>Compare map tiles</p></a></li>
<li><a href='#maxEarthDist'><p>maximum distance between set of points</p></a></li>
<li><a href='#pointsMap'><p>Get map for lat-long points</p></a></li>
<li><a href='#proj'><p>CRS of various PROJ.4 projections</p></a></li>
<li><a href='#projectPoints'><p>Project lat-lon points</p></a></li>
<li><a href='#randomPoints'><p>Distanced random points</p></a></li>
<li><a href='#scaleBar'><p>scalebar for OSM plots</p></a></li>
<li><a href='#triangleArea'><p>Area of a triangle</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Add a Scale Bar to 'OpenStreetMap' Plots</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5.20</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-10-12</td>
</tr>
<tr>
<td>Author:</td>
<td>Berry Boessenkool</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Berry Boessenkool &lt;berry-b@gmx.de&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Functionality to handle and project lat-long coordinates, easily download background maps
    and add a correct scale bar to 'OpenStreetMap' plots in any map projection.</td>
</tr>
<tr>
<td>Imports:</td>
<td>OpenStreetMap, berryFunctions (&ge; 1.15.0), sf, pbapply</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/brry/OSMscale">https://github.com/brry/OSMscale</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/brry/OSMscale/issues">https://github.com/brry/OSMscale/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-10-12 08:09:23 UTC; berry</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-10-13 12:40:08 UTC</td>
</tr>
</table>
<hr>
<h2 id='OSMscale-package'>Add a Scalebar to OpenStreetMap Plots</h2><span id='topic+OSMscale-package'></span><span id='topic+OSMscale'></span>

<h3>Description</h3>

<p>Functionality to handle and project lat-long coordinates,
easily download background maps
and add a correct scale bar to 'OpenStreetMap' plots in any map projection.
There are some other spatially related miscellaneous functions as well.
</p>


<h3>Note</h3>

<p>Get the most recent code updates at <a href="https://github.com/brry/OSMscale">https://github.com/brry/OSMscale</a>
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, June 2016
</p>


<h3>See Also</h3>

<p><code><a href="#topic+scaleBar">scaleBar</a></code>, <code><a href="#topic+pointsMap">pointsMap</a></code>, <code><a href="#topic+projectPoints">projectPoints</a></code>,
mapmisc article at <a href="https://journal.r-project.org/archive/2016-1/brown.pdf">https://journal.r-project.org/archive/2016-1/brown.pdf</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if(FALSE){ # Not tested on CRAN to avoid download time
d &lt;- read.table(sep=",", header=TRUE, text=
"lat, long
55.685143, 12.580008
52.514464, 13.350137
50.106452, 14.419989
48.847003, 2.337213
51.505364, -0.164752")

# zoom set to 3 to speed up tests. automatic zoom determination is better.
map &lt;- pointsMap(lat, long, data=d, type="esri",
                 proj=putm(d$long), scale=FALSE, zoom=3, pch=16, col=2)
scaleBar(map, abslen=500, y=0.8, cex=0.8)
lines(projectPoints(d$lat, d$long), col="blue", lwd=2)
}

</code></pre>

<hr>
<h2 id='biketrack'>GPS recorded bike track</h2><span id='topic+biketrack'></span>

<h3>Description</h3>

<p>My daily bike route, recorded with the app OSMtracker on my Samsung Galaxy S5
</p>


<h3>Format</h3>

<p>'data.frame':	254 obs. of  4 variables:<br />
$ lon : num  13 13 13 13 13 ...<br />
$ lat : num  52.4 52.4 52.4 52.4 52.4 ...<br />
$ time: POSIXct, format: &quot;2016-05-18 07:53:22&quot; &quot;2016-05-18 07:53:23&quot; ...<br />
$ ele : num  66 66 66 67 67 67 68 69 69 69 ....
</p>


<h3>Source</h3>

<p>GPS track export from OSMtracker App
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(biketrack)
plot(biketrack[,1:2])
# see equidistPoints

</code></pre>

<hr>
<h2 id='checkLL'>lat-long coordinate check</h2><span id='topic+checkLL'></span>

<h3>Description</h3>

<p>check lat-long coordinates for plausibility
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkLL(lat, long, data, fun = stop, quiet = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkLL_+3A_lat">lat</code>, <code id="checkLL_+3A_long">long</code></td>
<td>
<p>Latitude (North/South) and longitude (East/West) coordinates in decimal degrees</p>
</td></tr>
<tr><td><code id="checkLL_+3A_data">data</code></td>
<td>
<p>Optional: data.frame with the columns <code>lat</code> and <code>long</code></p>
</td></tr>
<tr><td><code id="checkLL_+3A_fun">fun</code></td>
<td>
<p>One of the functions <code><a href="base.html#topic+stop">stop</a></code>, <code><a href="base.html#topic+warning">warning</a></code>,
or <code><a href="base.html#topic+message">message</a></code>. DEFAULT: stop</p>
</td></tr>
<tr><td><code id="checkLL_+3A_quiet">quiet</code></td>
<td>
<p>Logical: suppress non-df warning in <code><a href="berryFunctions.html#topic+getColumn">getColumn</a></code>? 
DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="checkLL_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code>fun</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisible T/F vector showing which of the coordinates is violated
in the order: minlat, maxlat, minlong, maxlong.
Only returned if check is passed or fun != stop
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Aug 2016
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pointsMap">pointsMap</a></code>, <code><a href="#topic+putm">putm</a></code>,
<code>berryFunctions::<a href="berryFunctions.html#topic+checkFile">checkFile</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>checkLL(lat=52, long=130)
checkLL(130, 52, fun=message)
checkLL(85:95, 0, fun=message)

d &lt;- data.frame(x=0, y=0)
checkLL(y,x, d)

# informative errors:
library("berryFunctions")
is.error(   checkLL(85:95, 0, fun="message"),  tell=TRUE)
is.error(   checkLL(170,35),  tell=TRUE)

mustfail &lt;- function(expr) stopifnot(berryFunctions::is.error(expr))
mustfail( checkLL(100)         )
mustfail( checkLL(100, 200)    )
mustfail( checkLL(-100, 200)   )
mustfail( checkLL(90.000001, 0)   )

</code></pre>

<hr>
<h2 id='degree'>decimal degree coordinate conversion</h2><span id='topic+degree'></span>

<h3>Description</h3>

<p>Convert latitude-longitude coordinates
between decimal representation and degree-minute-second notation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>degree(
  lat,
  long,
  data,
  todms = !is.character(lat),
  digits = 1,
  drop = FALSE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="degree_+3A_lat">lat</code>, <code id="degree_+3A_long">long</code></td>
<td>
<p>Latitude (North/South) and longitude (East/West) coordinates in decimal degrees</p>
</td></tr>
<tr><td><code id="degree_+3A_data">data</code></td>
<td>
<p>Optional: data.frame with the columns <code>lat</code> and <code>long</code></p>
</td></tr>
<tr><td><code id="degree_+3A_todms">todms</code></td>
<td>
<p>Logical specifying direction of conversion.
If FALSE, converts to decimal degree notation, splitting coordinates
at the symbols for degree, minute and second (\U00B0, ', &quot;).
DEFAULT: !is.character(lat)</p>
</td></tr>
<tr><td><code id="degree_+3A_digits">digits</code></td>
<td>
<p>Number of digits the seconds are <code><a href="base.html#topic+round">round</a>ed</code> to. DEFAULT: 1</p>
</td></tr>
<tr><td><code id="degree_+3A_drop">drop</code></td>
<td>
<p>Drop to lowest dimension? DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="degree_+3A_quiet">quiet</code></td>
<td>
<p>Logical: suppress non-df warning in <code><a href="berryFunctions.html#topic+getColumn">getColumn</a></code>? 
DEFAULT: FALSE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame with x and y as character strings or numerical values,
depending on conversion direction
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Aug 2016
</p>


<h3>See Also</h3>

<p><code><a href="#topic+earthDist">earthDist</a></code>, <code><a href="#topic+projectPoints">projectPoints</a></code> for geographical reprojection
</p>


<h3>Examples</h3>

<pre><code class='language-R'># DECIMAL to DMS notation: --------------------------------------------------
degree(52.366360, 13.024181)
degree(c(52.366360, -32.599203), c(13.024181,-55.809601))
degree(52.366360, 13.024181, drop=TRUE) # vector
degree(47.001, -13.325731, digits=5)

# Use table with values instead of single vectors:
d &lt;- read.table(header=TRUE, sep=",", text="
lat, long
 52.366360,  13.024181
-32.599203, -55.809601")
degree(lat, long, data=d)

# DMS to DECIMAL notation: --------------------------------------------------
# You can use the degree symbol and escaped quotation mark (\") as well.
degree("52'21'58.9'N", "13'1'27.1'E")
print(degree("52'21'58.9'N", "13'1'27.1'E"), digits=15)

d2 &lt;- read.table(header=TRUE, stringsAsFactors=FALSE, text="
lat long
52'21'58.9'N 13'01'27.1'E
32'35'57.1'S 55'48'34.6'W") # columns cannot be comma-separated!
degree(lat, long, data=d2)

# Rounding error checks: ----------------------------------------------------
oo &lt;- options(digits=15)
d
degree(lat, long, data=degree(lat, long, d))
degree(lat, long, data=degree(lat, long, d, digits=3))
options(oo)
stopifnot(all(degree(lat,long,data=degree(lat,long,d, digits=3))==d))

</code></pre>

<hr>
<h2 id='earthDist'>distance between lat-long coordinates</h2><span id='topic+earthDist'></span>

<h3>Description</h3>

<p>Great-circle distance between points at lat-long coordinates.
(The shortest distance over the earth's surface).
The distance of all the entries is computed relative to the <code>i</code>th one.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>earthDist(lat, long, data, r = 6371, i = 1L, along = FALSE, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="earthDist_+3A_lat">lat</code>, <code id="earthDist_+3A_long">long</code></td>
<td>
<p>Latitude (North/South) and longitude (East/West) coordinates in decimal degrees</p>
</td></tr>
<tr><td><code id="earthDist_+3A_data">data</code></td>
<td>
<p>Optional: data.frame with the columns <code>lat</code> and <code>long</code></p>
</td></tr>
<tr><td><code id="earthDist_+3A_r">r</code></td>
<td>
<p>radius of the earth. Could be given in miles. DEFAULT: 6371 (km)</p>
</td></tr>
<tr><td><code id="earthDist_+3A_i">i</code></td>
<td>
<p>Integer: Index element against which all coordinate pairs
are computed. DEFAULT: 1</p>
</td></tr>
<tr><td><code id="earthDist_+3A_along">along</code></td>
<td>
<p>Logical: Should distances be computed along vector of points?
If TRUE, <code>i</code> is ignored. DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="earthDist_+3A_quiet">quiet</code></td>
<td>
<p>Logical: suppress non-df warning in <code><a href="berryFunctions.html#topic+getColumn">getColumn</a></code>? 
DEFAULT: FALSE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector with distance(s) in km (or units of <code>r</code>, if <code>r</code> is changed)
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Aug 2016 + Jan 2017.
Angle formula from Diercke Weltatlas 1996, Page 245
</p>


<h3>See Also</h3>

<p><code><a href="#topic+maxEarthDist">maxEarthDist</a></code>, <code><a href="#topic+degree">degree</a></code> for pre-formatting,
<a href="http://www.movable-type.co.uk/scripts/latlong.html">http://www.movable-type.co.uk/scripts/latlong.html</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>d &lt;- read.table(header=TRUE, sep=",", text="
lat, long
52.514687,  13.350012   # Berlin
51.503162,  -0.131082   # London
35.685024, 139.753365") # Tokio
earthDist(lat, long, d)      # from Berlin to L and T: 928 and 8922 km
earthDist(lat, long, d, i=2) # from London to B and T: 928 and 9562 km

# slightly different with other formulas:
# install.packages("geosphere")
# geosphere::distHaversine(as.matrix(d[1,2:1]), as.matrix(d[2,2:1])) / 1000

# Distance along vector of points:
d &lt;- data.frame(lat=21:50, long=1:30)
pointsMap(lat,long,d, zoom=2, proj=putm(1:30) )
along1 &lt;- earthDist(lat,long,d, along=TRUE)
along2 &lt;- c(0, sapply(2:nrow(d), function(i) earthDist(lat,long,data=d[i-1:0,])[2]))
along1-along2 # all zero, but second version is MUCH slower for large datasets


# compare with UTM distance
set.seed(42)
d &lt;- data.frame(lat=runif(100, 47,54), long=runif(100, 6, 15))
d2 &lt;- projectPoints(d$lat, d$long)
d_utm &lt;- berryFunctions::distance(d2$x[-1],d2$y[-1], d2$x[1],d2$y[1])/1000
d_earth &lt;- earthDist(lat,long, d)[-1]
plot(d_utm, d_earth) # distances in km
hist(d_utm-d_earth) # UTM distance slightly larger than earth distance
plot(d_earth, d_utm-d_earth) # correlates with distance
berryFunctions::colPoints(d2$x[-1], d2$y[-1], d_utm-d_earth, add=FALSE)
points(d2$x[1],d2$y[1], pch=3, cex=2, lwd=2)


</code></pre>

<hr>
<h2 id='equidistPoints'>Evenly spaced points along path</h2><span id='topic+equidistPoints'></span>

<h3>Description</h3>

<p>Compute waypoints with equal distance to each other along a (curved) path or track given by coordinates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>equidistPoints(x, y, z, data, n, nint = 30, mid = FALSE, quiet = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="equidistPoints_+3A_x">x</code>, <code id="equidistPoints_+3A_y">y</code>, <code id="equidistPoints_+3A_z">z</code></td>
<td>
<p>Vectors with coordinates. z is optional and can be left empty</p>
</td></tr>
<tr><td><code id="equidistPoints_+3A_data">data</code></td>
<td>
<p>Optional: data.frame with the column names as given by x,y (and z)</p>
</td></tr>
<tr><td><code id="equidistPoints_+3A_n">n</code></td>
<td>
<p>Number of segments to create along the path (=number of points-1)</p>
</td></tr>
<tr><td><code id="equidistPoints_+3A_nint">nint</code></td>
<td>
<p>Number of points to interpolate between original coordinates (with <code><a href="berryFunctions.html#topic+approx2">approx2</a></code>).
Larger numbers give more precisely equidistant points, but increase computing time.
<code>int=1</code> to not do any interpolation. DEFAULT: 30</p>
</td></tr>
<tr><td><code id="equidistPoints_+3A_mid">mid</code></td>
<td>
<p>Logical: Should centers of segments be returned instead of their ends?</p>
</td></tr>
<tr><td><code id="equidistPoints_+3A_quiet">quiet</code></td>
<td>
<p>Logical: suppress non-df warning in <code><a href="berryFunctions.html#topic+getColumn">getColumn</a></code>? 
DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="equidistPoints_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="stats.html#topic+approx">approx</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Dataframe with the coordinates of the final points.
ATTENTION: The columns are named x,y,z, not with the original names from the function call.
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, May 2016
</p>


<h3>See Also</h3>

<p><code>berryFunctions::<a href="berryFunctions.html#topic+distance">distance</a></code> and <code><a href="berryFunctions.html#topic+approx2">approx2</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(berryFunctions) # distance, colPoints etc
x &lt;- c(2.7, 5, 7.8, 10.8, 13.7, 15.8, 17.4, 17.7, 16.2, 15.8, 15.1, 13.1, 9.3, 4.8, 6.8, 12.2)
y &lt;- c(2.3, 2.1, 2.6, 3.3, 3.7, 4.7, 7.6, 11.7, 12.4, 12.3, 12.3, 12.3, 12, 12.1, 17.5, 19.6)
eP &lt;- equidistPoints(x,y, n=10) ; eP
plot(x,y, type="o", pch=4)
points(equidistPoints(x,y, n=10), col=4, pch=16)
points(equidistPoints(x,y, n=10, nint=1), col=2) # from original point set
round(distance(eP$x, eP$y), 2) # the 2.69 instead of 4.50 is in the sharp curve
# These points are quidistant along the original track

plot(x,y, type="o", pch=16, col=2)
round(sort(distance(x,y)), 2)
xn &lt;- equidistPoints(x,y, n=10)$x
yn &lt;- equidistPoints(x,y, n=10)$y
lines(xn,yn, type="o", pch=16)
round(sort(distance(xn,yn)), 2)
for(i in 1:8)
{
xn &lt;- equidistPoints(xn,yn, n=10)$x
yn &lt;- equidistPoints(xn,yn, n=10)$y
lines(xn,yn, type="o", pch=16)
print(round(sort(distance(xn,yn)), 2))
} # We may recursively get closer to equidistant along track _and_ air,
# but never actually reach it.

# Real dataset:
data(biketrack)
colPoints("lon","lat","ele",data=biketrack, add=FALSE,asp=1,pch=4,lines=TRUE)
points(equidistPoints(lon, lat, data=biketrack, n=25), pch=3, lwd=3, col=2)
bt2 &lt;- equidistPoints(lon, lat, ele, data=biketrack, n=25)
bt2$dist &lt;- distance(bt2$x, bt2$y)*1000
colPoints("x", "y", "z", data=bt2, legend=FALSE)
# in curves, crow-distance is shorter sometimes
plot(lat~lon, data=biketrack, asp=1, type="l")
colPoints("x","y","dist",data=bt2, Range=c(2.5,4),add=TRUE,asp=1,pch=3,lwd=5)
lines(lat~lon, data=biketrack)

</code></pre>

<hr>
<h2 id='mapComp'>Compare map tiles</h2><span id='topic+mapComp'></span>

<h3>Description</h3>

<p>Compare map tiles
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mapComp(
  lat,
  long,
  data,
  types = NA,
  progress = TRUE,
  file = "mapComp.pdf",
  overwrite = FALSE,
  pargs = NULL,
  quiet = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mapComp_+3A_lat">lat</code>, <code id="mapComp_+3A_long">long</code>, <code id="mapComp_+3A_data">data</code></td>
<td>
<p>Coordinates as in <code><a href="#topic+pointsMap">pointsMap</a></code></p>
</td></tr>
<tr><td><code id="mapComp_+3A_types">types</code></td>
<td>
<p>Character string vector, types for
<code>OpenStreetMap::<a href="OpenStreetMap.html#topic+openmap">openmap</a></code>
DEFAULT: NA (all current types)</p>
</td></tr>
<tr><td><code id="mapComp_+3A_progress">progress</code></td>
<td>
<p>Display progress bar? DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="mapComp_+3A_file">file</code></td>
<td>
<p>PDF filename. Will not be overwritten. DEFAULT: &quot;mapComp.pdf&quot;</p>
</td></tr>
<tr><td><code id="mapComp_+3A_overwrite">overwrite</code></td>
<td>
<p>Overwrite pdf file? DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="mapComp_+3A_pargs">pargs</code></td>
<td>
<p>List of arguments passed to <code><a href="grDevices.html#topic+pdf">pdf</a></code>. DEFAULT:NULL</p>
</td></tr>
<tr><td><code id="mapComp_+3A_quiet">quiet</code></td>
<td>
<p>Logical: suppress non-df warning in <code><a href="berryFunctions.html#topic+getColumn">getColumn</a></code>? 
DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="mapComp_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="#topic+pointsMap">pointsMap</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of maps, writes to a pdf
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Jul 2017
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pointsMap">pointsMap</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:  # Exclude from CRAN checks because of download time
maps &lt;- mapComp(c(52.39,52.46), c(12.99,13.06),
                pargs=list(width=8.27, height=11.96), overwrite=TRUE)

# still need to suppress output to console:
https://stackoverflow.com/questions/45041762/suppress-rjava-error-output-in-console

unlink("mapComp.pdf")

## End(Not run)

</code></pre>

<hr>
<h2 id='maxEarthDist'>maximum distance between set of points</h2><span id='topic+maxEarthDist'></span>

<h3>Description</h3>

<p>Maximum great-circle distance between points at lat-long coordinates.
This is not computationally efficient.
For large datasets, consider pages like <a href="https://stackoverflow.com/a/16870359">https://stackoverflow.com/a/16870359</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>maxEarthDist(
  lat,
  long,
  data,
  r = 6371,
  fun = max,
  each = TRUE,
  quiet = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="maxEarthDist_+3A_lat">lat</code>, <code id="maxEarthDist_+3A_long">long</code>, <code id="maxEarthDist_+3A_data">data</code></td>
<td>
<p>Coordinates for <code><a href="#topic+earthDist">earthDist</a></code></p>
</td></tr>
<tr><td><code id="maxEarthDist_+3A_r">r</code></td>
<td>
<p>Earth Radius for <code><a href="#topic+earthDist">earthDist</a></code></p>
</td></tr>
<tr><td><code id="maxEarthDist_+3A_fun">fun</code></td>
<td>
<p>Function to be applied. DEFAULT: <code><a href="base.html#topic+max">max</a></code></p>
</td></tr>
<tr><td><code id="maxEarthDist_+3A_each">each</code></td>
<td>
<p>Logical: give max dist to all other points for each point separately?
If FALSE, will return the maximum of the complete distance matrix,
as if <code>max(maxEarthDist(y,x))</code>. DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="maxEarthDist_+3A_quiet">quiet</code></td>
<td>
<p>Logical: suppress non-df warning in <code><a href="berryFunctions.html#topic+getColumn">getColumn</a></code>? 
DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="maxEarthDist_+3A_...">...</code></td>
<td>
<p>Further arguments passed to fun, like na.rm=TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Single number
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Jan 2017
</p>


<h3>See Also</h3>

<p><code><a href="#topic+earthDist">earthDist</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
d &lt;- read.table(header=TRUE, text="
    x     y
14.9 53.73
1.12 53.12
6.55 58.13
7.71 71.44
")

plot(d, asp=1, pch=as.character(1:4), xlab="lon", ylab="lat")
for(i in 1:4) segments(d$x[-i], d$y[-i], d$x[i], d$y[i], col=2)
text(x=c(7,10,11), y=c(53,56,64), round(earthDist(y,x,d    )[-1]),  col=2)
text(x=c(4,4),     y=c(56,61),    round(earthDist(y,x,d,i=2)[3:4]), col=2)
text(x=7,          y=64,          round(earthDist(y,x,d,i=4)[3]),   col=2)

round(  earthDist(y,x,d, i=2)   )
round(  earthDist(y,x,d, i=3)   )

round(  maxEarthDist(y,x,d)              )
round(  maxEarthDist(y,x,d, each=FALSE)  )
round(  maxEarthDist(y,x,d, fun=min)     )

maxEarthDist(y,x, d[1:2,] )

</code></pre>

<hr>
<h2 id='pointsMap'>Get map for lat-long points</h2><span id='topic+pointsMap'></span>

<h3>Description</h3>

<p>Download and plot map with the extend of a dataset with lat-long coordinates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pointsMap(
  lat,
  long,
  data,
  ext = 0.07,
  fx = 0.05,
  fy = fx,
  type = "osm",
  zoom = NULL,
  minNumTiles = 9L,
  mergeTiles = TRUE,
  map = NULL,
  proj = NA,
  plot = TRUE,
  mar = c(0, 0, 0, 0),
  add = FALSE,
  scale = TRUE,
  quiet = FALSE,
  pch = 3,
  col = "red",
  cex = 1,
  bg = NA,
  pargs = NULL,
  titleargs = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pointsMap_+3A_lat">lat</code>, <code id="pointsMap_+3A_long">long</code></td>
<td>
<p>Latitude (North/South) and longitude (East/West) coordinates in decimal degrees</p>
</td></tr>
<tr><td><code id="pointsMap_+3A_data">data</code></td>
<td>
<p>Optional: data.frame with the columns <code>lat</code> and <code>long</code></p>
</td></tr>
<tr><td><code id="pointsMap_+3A_ext">ext</code></td>
<td>
<p>Extension added in each direction if a single coordinate is given. DEFAULT: 0.07</p>
</td></tr>
<tr><td><code id="pointsMap_+3A_fx">fx</code>, <code id="pointsMap_+3A_fy">fy</code></td>
<td>
<p>Extend factors (additional map space around actual points)
passed to custom version of <code><a href="grDevices.html#topic+extendrange">extendrange</a></code>. DEFAULT: 0.05</p>
</td></tr>
<tr><td><code id="pointsMap_+3A_type">type</code></td>
<td>
<p>Tile server in <code>OpenStreetMap::<a href="OpenStreetMap.html#topic+openmap">openmap</a></code>.
For an overview, see <a href="https://blog.fellstat.com/?p=356">https://blog.fellstat.com/?p=356</a> and
<code><a href="#topic+mapComp">mapComp</a></code>. DEFAULT: &quot;osm&quot;</p>
</td></tr>
<tr><td><code id="pointsMap_+3A_zoom">zoom</code>, <code id="pointsMap_+3A_minnumtiles">minNumTiles</code>, <code id="pointsMap_+3A_mergetiles">mergeTiles</code></td>
<td>
<p>Arguments passed to <code><a href="OpenStreetMap.html#topic+openmap">openmap</a></code></p>
</td></tr>
<tr><td><code id="pointsMap_+3A_map">map</code></td>
<td>
<p>Optional map object. If given, it is not downloaded again.
Useful to project maps in a second step. DEFAULT: NULL</p>
</td></tr>
<tr><td><code id="pointsMap_+3A_proj">proj</code></td>
<td>
<p>If you want to reproject the map (Consumes some extra time), the
proj4 character string or CRS object to project to, e.g. <code><a href="#topic+putm">putm</a>(long=long)</code>.
DEFAULT: NA (no conversion)</p>
</td></tr>
<tr><td><code id="pointsMap_+3A_plot">plot</code></td>
<td>
<p>Logical: Should map be plotted and points added? Plotting happens with
<code>OpenStreetMap::<a href="OpenStreetMap.html#topic+plot.OpenStreetMap">plot.OpenStreetMap</a>(map,
removeMargin=FALSE)</code>. DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="pointsMap_+3A_mar">mar</code></td>
<td>
<p>Margins to be set first (and left unchanged). DEFAULT: c(0,0,0,0)</p>
</td></tr>
<tr><td><code id="pointsMap_+3A_add">add</code></td>
<td>
<p>Logical: add points to existing map? DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="pointsMap_+3A_scale">scale</code></td>
<td>
<p>Logical: should <code><a href="#topic+scaleBar">scaleBar</a></code> be added? DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="pointsMap_+3A_quiet">quiet</code></td>
<td>
<p>Logical: suppress progress messages and non-df warning in 
<code><a href="berryFunctions.html#topic+getColumn">getColumn</a></code>? DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="pointsMap_+3A_pch">pch</code>, <code id="pointsMap_+3A_col">col</code>, <code id="pointsMap_+3A_cex">cex</code>, <code id="pointsMap_+3A_bg">bg</code></td>
<td>
<p>Arguments passed to <code><a href="graphics.html#topic+points">points</a></code>,
see <code>pargs</code> for more. DEFAULT: pch=3, col=&quot;red&quot;, cex=1, bg=NA</p>
</td></tr>
<tr><td><code id="pointsMap_+3A_pargs">pargs</code></td>
<td>
<p>List of arguments passed to <code><a href="graphics.html#topic+points">points</a></code> like lwd, type, cex, ...</p>
</td></tr>
<tr><td><code id="pointsMap_+3A_titleargs">titleargs</code></td>
<td>
<p>List of arguments passed to <code><a href="graphics.html#topic+title">title</a></code> (if not NULL). DEFAULT: NULL</p>
</td></tr>
<tr><td><code id="pointsMap_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="#topic+scaleBar">scaleBar</a></code> like abslen, ndiv, ...</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Map returned by <code>OpenStreetMap::<a href="OpenStreetMap.html#topic+openmap">openmap</a></code>
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Jun 2016
</p>


<h3>See Also</h3>

<p><code><a href="#topic+projectPoints">projectPoints</a></code>, <code>OpenStreetMap::<a href="OpenStreetMap.html#topic+openmap">openmap</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){
d &lt;- read.table(sep=",", header=TRUE, text=
"lat, long # could e.g. be copied from googleMaps, rightclick on What's here?
43.221028, -123.382998
43.215348, -123.353804
43.227785, -123.368694
43.232649, -123.355895")

map &lt;- pointsMap(lat, long, data=d)
axis(1, line=-2); axis(2, line=-2) # in whatever unit
map_utm &lt;- pointsMap(lat, long, d, map=map, proj=putm(d$long))
axis(1, line=-2); axis(2, line=-2) # now in meters
projectPoints(d$lat, d$long)
scaleBar(map_utm, x=0.2, y=0.8, unit="mi", type="line", col="red", length=0.25)
pointsMap(lat, long, d[1:2,], map=map_utm, add=TRUE, col="red", pch=3, pargs=list(lwd=3))

d &lt;- data.frame(long=c(12.95, 12.98, 13.22, 13.11), lat=c(52.40,52.52, 52.36, 52.45))
map &lt;- pointsMap(lat,long,d, type="bing") # aerial map
}

</code></pre>

<hr>
<h2 id='proj'>CRS of various PROJ.4 projections</h2><span id='topic+proj'></span><span id='topic+putm'></span><span id='topic+posm'></span><span id='topic+pll'></span><span id='topic+pmap'></span>

<h3>Description</h3>

<p>coordinate reference system (CRS) Object for several proj4 character strings.
<code>posm</code> and <code>pll</code> are taken directly from
<code>OpenStreetMap::<a href="OpenStreetMap.html#topic+osm">osm</a></code> and
<code><a href="OpenStreetMap.html#topic+longlat">longlat</a></code>.<br />
<code>pmap</code> gets the projection string from map objects as returned by <code><a href="#topic+pointsMap">pointsMap</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>putm(long, zone = mean(long, na.rm = TRUE)%/%6 + 31)

posm()

pll()

pmap(map)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="proj_+3A_long">long</code></td>
<td>
<p>Vector of decimal longitude coordinates (East/West values).
Not needed of <code>zone</code> is given.</p>
</td></tr>
<tr><td><code id="proj_+3A_zone">zone</code></td>
<td>
<p>UTM (Universal Transverse Mercator) zone, see e.g.
<a href="https://upload.wikimedia.org/wikipedia/commons/e/ed/Utm-zones.jpg">https://upload.wikimedia.org/wikipedia/commons/e/ed/Utm-zones.jpg</a>.
DEFAULT: UTM zone at <a href="base.html#topic+mean">mean</a> of <code>long</code></p>
</td></tr>
<tr><td><code id="proj_+3A_map">map</code></td>
<td>
<p>for pmap: map object as returned by <code><a href="#topic+pointsMap">pointsMap</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>sf::<a href="sf.html#topic+st_crs">st_crs</a></code> objects for one of: <br />
- UTM projection with given zone<br />
- Open street map (and google) mercator projection<br />
- Latitude Longitude projection<br />
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Aug 2016
</p>


<h3>See Also</h3>

<p><code><a href="#topic+projectPoints">projectPoints</a></code>, <code><a href="#topic+degree">degree</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>posm()
str(posm())
pll()
putm(5:14) # Germany
putm(zone=33) # Berlin

map &lt;- list(tiles=list(dummy=list(projection=pll())),
            bbox=list(p1=par("usr")[c(1,4)], p2=par("usr")[2:3]) )
pmap(map)

</code></pre>

<hr>
<h2 id='projectPoints'>Project lat-lon points</h2><span id='topic+projectPoints'></span>

<h3>Description</h3>

<p>Project long lat points to e.g. UTM projection.
Basics copied from <code>OpenStreetMap::<a href="OpenStreetMap.html#topic+projectMercator">projectMercator</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>projectPoints(
  lat,
  long,
  data,
  from = pll(),
  to = putm(long = long),
  dfout = TRUE,
  drop = FALSE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="projectPoints_+3A_lat">lat</code>, <code id="projectPoints_+3A_long">long</code></td>
<td>
<p>Latitude (North/South) and longitude (East/West) coordinates in decimal degrees</p>
</td></tr>
<tr><td><code id="projectPoints_+3A_data">data</code></td>
<td>
<p>Optional: data.frame with the columns <code>lat</code> and <code>long</code></p>
</td></tr>
<tr><td><code id="projectPoints_+3A_from">from</code></td>
<td>
<p>Original Projection CRS (do not change for latlong-coordinates).
DEFAULT: <code><a href="#topic+pll">pll</a>()</code> = sf::st_crs(&quot;+proj=longlat +datum=WGS84&quot;)</p>
</td></tr>
<tr><td><code id="projectPoints_+3A_to">to</code></td>
<td>
<p>target projection CRS (Coordinate Reference System) Object.
Other projections can be specified as <code>sf::<a href="sf.html#topic+st_crs">st_crs</a>("your_proj4_character_string")</code>.
DEFAULT: <code><a href="#topic+putm">putm</a>(long=long)</code></p>
</td></tr>
<tr><td><code id="projectPoints_+3A_dfout">dfout</code></td>
<td>
<p>Convert output to data.frame to allow easier indexing? DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="projectPoints_+3A_drop">drop</code></td>
<td>
<p>Drop to lowest dimension? DEFAULT: FALSE (unlike <code><a href="OpenStreetMap.html#topic+projectMercator">projectMercator</a></code>)</p>
</td></tr>
<tr><td><code id="projectPoints_+3A_quiet">quiet</code></td>
<td>
<p>Suppress warning about NA coordinates and non-df warning in 
<code><a href="berryFunctions.html#topic+getColumn">getColumn</a></code>? DEFAULT: FALSE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame (or matrix, if <code>dfout=FALSE</code>)  with points in new projection
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Jun 2016
</p>


<h3>See Also</h3>

<p><code><a href="#topic+scaleBar">scaleBar</a></code>, <code>OpenStreetMap::<a href="OpenStreetMap.html#topic+projectMercator">projectMercator</a></code>,
<a href="https://gis.stackexchange.com/a/74723">https://gis.stackexchange.com/a/74723</a>, <a href="https://spatialreference.org">https://spatialreference.org</a> on proj4strings
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("OpenStreetMap")
lat &lt;- runif(100, 6, 12)
lon &lt;- runif(100, 48, 58)
plot(lat,lon, main="flat earth unprojected")
plot(projectMercator(lat,lon), main="Mercator")
plot(projectPoints(lat,lon), main="UTM32")
stopifnot(all( projectPoints(lat,lon, to=posm()) == projectMercator(lat,lon) ))

projectPoints(c(52.4,NA),      c(13.6,12.9))
projectPoints(c(52.4,NA),      c(13.6,12.9), quiet=TRUE)
projectPoints(c(52.4,52.3,NA), c(13.6,12.9,13.1))
projectPoints(c(52.4,52.3,NA), c(13.6,NA  ,13.1))
projectPoints(c(52.4,52.3,NA), c(NA  ,12.9,13.1))

# Reference system ETRS89 with GRS80-Ellipsoid (common in Germany)
set.seed(42)
d &lt;- data.frame(N=runif(50,5734000,6115000), E=runif(50, 33189000,33458000))
d$VALUES &lt;- berryFunctions::rescale(d$N, 20,40) + rnorm(50, sd=5)
head(d)
c1 &lt;- projectPoints(lat=d$N, long=d$E-33e6, to=pll(),
          from=sf::st_crs("+proj=utm +zone=33 +ellps=GRS80 +units=m +no_defs") )
c2 &lt;- projectPoints(y, x, data=c1, to=posm() )
head(c1)
head(c2)

## Not run:  # not checked on CRAN because of file opening
map &lt;- pointsMap(y,x, c1, plot=FALSE)
pdf("ETRS89.pdf")
par(mar=c(0,0,0,0))
plot(map)
rect(par("usr")[1], par("usr")[3], par("usr")[2], par("usr")[4],
     col=berryFunctions::addAlpha("white", 0.7))
scaleBar(map, y=0.2, abslen=100)
points(c2)
berryFunctions::colPoints(c2$x, c2$y, d$VALUE )
dev.off()
berryFunctions::openFile("ETRS89.pdf")
#unlink("ETRS89.pdf")

## End(Not run)

</code></pre>

<hr>
<h2 id='randomPoints'>Distanced random points</h2><span id='topic+randomPoints'></span>

<h3>Description</h3>

<p>Arranges points in square randomly, but with certain minimal distance to each other
</p>


<h3>Usage</h3>

<pre><code class='language-R'>randomPoints(xmin, xmax, ymin, ymax, number, mindist, plot = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="randomPoints_+3A_xmin">xmin</code></td>
<td>
<p>Minimum x coordinate</p>
</td></tr>
<tr><td><code id="randomPoints_+3A_xmax">xmax</code></td>
<td>
<p>Upper limit x values</p>
</td></tr>
<tr><td><code id="randomPoints_+3A_ymin">ymin</code></td>
<td>
<p>Ditto for y</p>
</td></tr>
<tr><td><code id="randomPoints_+3A_ymax">ymax</code></td>
<td>
<p>And yet again: Ditto.</p>
</td></tr>
<tr><td><code id="randomPoints_+3A_number">number</code></td>
<td>
<p>How many points should be randomly + uniformly distributed</p>
</td></tr>
<tr><td><code id="randomPoints_+3A_mindist">mindist</code></td>
<td>
<p>Minimum DIstance each point should have to others</p>
</td></tr>
<tr><td><code id="randomPoints_+3A_plot">plot</code></td>
<td>
<p>Plot the result? DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="randomPoints_+3A_...">...</code></td>
<td>
<p>Further arguments passed to plot</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame with x and y coordinates.
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, 2011/2012
</p>


<h3>See Also</h3>

<p><code><a href="berryFunctions.html#topic+distance">distance</a></code>, the package RandomFields ( <a href="https://cran.r-project.org/package=RandomFields">https://cran.r-project.org/package=RandomFields</a>)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
P &lt;- randomPoints(xmin=200,xmax=700, ymin=300,ymax=680, number=60,mindist=10, asp=1)
rect(xleft=200, ybottom=300, xright=700, ytop=680, col=NA, border=1)

format( round(P,4), trim=FALSE)

for(i in 1:10)
{
rp &lt;- randomPoints(xmin=0,xmax=20, ymin=0,ymax=20, number=20, mindist=3, plot=FALSE)
plot(rp, las=1, asp=1, pch=16)
abline(h=0:30*2, v=0:30*2, col=8); box()
for(i in 1:nrow(rp))
    berryFunctions::circle(rp$x[i],rp$y[i], r=3, col=rgb(1,0,0,alpha=0.2), border=NA)
}

</code></pre>

<hr>
<h2 id='scaleBar'>scalebar for OSM plots</h2><span id='topic+scaleBar'></span>

<h3>Description</h3>

<p>Add a scalebar to default or (UTM)-projected OpenStreetMap plots
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scaleBar(
  map,
  x = 0.1,
  y = 0.9,
  length = 0.4,
  abslen = NA,
  unit = c("km", "m", "mi", "ft", "yd"),
  label = unit,
  type = c("bar", "line"),
  ndiv = NA,
  field = "rect",
  fill = NA,
  adj = c(0.5, 1.5),
  cex = par("cex"),
  col = c("black", "white"),
  targs = NULL,
  lwd = 7,
  lend = 1,
  bg = "transparent",
  mar = c(2, 0.7, 0.2, 3),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="scaleBar_+3A_map">map</code></td>
<td>
<p>Map object with map$tiles[[1]]$projection to get the projection from.</p>
</td></tr>
<tr><td><code id="scaleBar_+3A_x">x</code>, <code id="scaleBar_+3A_y">y</code></td>
<td>
<p>Relative position of left end of scalebar. DEFAULT: 0.1, 0.9</p>
</td></tr>
<tr><td><code id="scaleBar_+3A_length">length</code></td>
<td>
<p>Approximate relative length of bar. DEFAULT: 0.4</p>
</td></tr>
<tr><td><code id="scaleBar_+3A_abslen">abslen</code></td>
<td>
<p>Absolute length in <code>unit</code>s. DEFAULT: NA (computed internally from <code>length</code>)</p>
</td></tr>
<tr><td><code id="scaleBar_+3A_unit">unit</code></td>
<td>
<p>Unit for computation and label.
Possible: kilometer, meter, miles, feet, yards. DEFAULT: &quot;km&quot;</p>
</td></tr>
<tr><td><code id="scaleBar_+3A_label">label</code></td>
<td>
<p>Unit label in plot. DEFAULT: <code>unit</code></p>
</td></tr>
<tr><td><code id="scaleBar_+3A_type">type</code></td>
<td>
<p>Scalebar type: simple <code>'line'</code> or classical black &amp; white <code>'bar'</code>. DEFAULT: &quot;bar&quot;</p>
</td></tr>
<tr><td><code id="scaleBar_+3A_ndiv">ndiv</code></td>
<td>
<p>Number of divisions if <code>type="bar"</code>. DEFAULT: NA (computed internally)
Internal selection of <code>ndiv</code> is based on divisibility of abslen
(modulo) with 1:6. For ties, preferation order is 5&gt;4&gt;3&gt;2&gt;6&gt;1.</p>
</td></tr>
<tr><td><code id="scaleBar_+3A_field">field</code>, <code id="scaleBar_+3A_fill">fill</code>, <code id="scaleBar_+3A_adj">adj</code>, <code id="scaleBar_+3A_cex">cex</code></td>
<td>
<p>Arguments passed to <code><a href="berryFunctions.html#topic+textField">textField</a></code></p>
</td></tr>
<tr><td><code id="scaleBar_+3A_col">col</code></td>
<td>
<p>Vector of (possibly alternating) colors passed to
<code><a href="graphics.html#topic+segments">segments</a></code> or <code><a href="graphics.html#topic+rect">rect</a></code>. DEFAULT: c(&quot;black&quot;,&quot;white&quot;)</p>
</td></tr>
<tr><td><code id="scaleBar_+3A_targs">targs</code></td>
<td>
<p>List of further arguments passed to <code><a href="berryFunctions.html#topic+textField">textField</a></code>
like font, col (to differ from bar color), etc. DEFAULT: NULL</p>
</td></tr>
<tr><td><code id="scaleBar_+3A_lwd">lwd</code>, <code id="scaleBar_+3A_lend">lend</code></td>
<td>
<p>Line width and end style passed to <code><a href="graphics.html#topic+segments">segments</a></code>.
DEFAULT: 5,1, which works well in pdf graphics.</p>
</td></tr>
<tr><td><code id="scaleBar_+3A_bg">bg</code></td>
<td>
<p>Background color, e.g. <code><a href="berryFunctions.html#topic+addAlpha">addAlpha</a>(White)</code>.
DEFAULT: <code>"transparent"</code> to suppress background.</p>
</td></tr>
<tr><td><code id="scaleBar_+3A_mar">mar</code></td>
<td>
<p>Background margins approximately in letter width/height. DEFAULT: c(2,0.7,0.2,3)</p>
</td></tr>
<tr><td><code id="scaleBar_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="graphics.html#topic+segments">segments</a></code> like lty.
(Color for segments is the first value of <code>col</code>).
Passed to <code><a href="graphics.html#topic+rect">rect</a></code> if <code>type="bar"</code>, like lwd.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>scaleBar gets the right distance in the default mercator projected maps.
There, the axes are not in meters, but rather ca 0.7m units (for NW Germany area maps with 20km across).
Accordingly, other packages plot wrong bars, see the last example section.
</p>


<h3>Value</h3>

<p>invisible: coordinates of scalebar and label
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Jun 2016
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pointsMap">pointsMap</a></code>, <code><a href="#topic+projectPoints">projectPoints</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
plot(0:10, 40:50, type="n", asp=1) # Western Europe in lat-long
map &lt;- list(tiles=list(dummy=list(projection=pll())),
            bbox=list(p1=par("usr")[c(1,4)], p2=par("usr")[2:3]) )
scaleBar(map)

if(interactive()){
d &lt;- data.frame(long=c(12.95, 12.98, 13.22, 13.11), lat=c(52.40,52.52, 52.36, 52.45))
map &lt;- pointsMap(lat,long,d, scale=FALSE, zoom=9)
coord &lt;- scaleBar(map)  ; coord
scaleBar(map, bg=berryFunctions::addAlpha("white", 0.7))
scaleBar(map, 0.3, 0.05, unit="m", length=0.45, type="line")
scaleBar(map, 0.3, 0.5, unit="km", abslen=5, col=4:5, lwd=3)
scaleBar(map, 0.3, 0.8, unit="mi", col="red", targ=list(col="blue", font=2), type="line")

# I don't like subdivisions, but if you wanted them, you could use:
sb &lt;- scaleBar(map, 0.12, 0.28, abslen=10, adj=c(0.5, -1.5)  )
scaleBar(map, 0.12, 0.28, abslen=4, adj=c(0.5, -1.5), 
         targs=list(col="transparent"), label="" )

# more lines for exact measurements in scalebar:
segments(x0=seq(sb["x1"], sb["x2"], len=21), y0=sb["y1"], y1=sb["y2"], col=8)
rect(xleft=sb["x1"], xright=sb["x2"], ybottom=sb["y1"], ytop=sb["y2"])
}

## Not run:  # don't download too many maps in R CMD check
d &lt;- read.table(header=TRUE, sep=",", text="
lat, long
52.514687,  13.350012   # Berlin
51.503162,  -0.131082   # London
35.685024, 139.753365") # Tokio
map &lt;- pointsMap(lat, long, d, zoom=2, abslen=5000, y=0.7)
scaleBar(map, y=0.5, abslen=5000)   # in mercator projections, scale bars are not
scaleBar(map, y=0.3, abslen=5000)   # transferable to other latitudes

map_utm &lt;- pointsMap(lat, long, d[1:2,], proj=putm(long=d$long[1:2]),
                     zoom=4, y=0.7, abslen=500)
scaleBar(map_utm, y=0.5, abslen=500) # transferable in UTM projection
scaleBar(map_utm, y=0.3, abslen=500)

## End(Not run)

## Not run:  ## Too much downloading time, too error-prone
# Tests around the world
par(mfrow=c(1,2), mar=rep(1,4))
long &lt;- runif(2, -180, 180) ;  lat &lt;- runif(2, -90, 90)
long &lt;- 0:50 ;  lat &lt;- 0:50
map &lt;- pointsMap(lat, long)
map2 &lt;- pointsMap(lat, long, map=map, proj=putm(long=long))

## End(Not run)

## Not run:  ## excluded from tests to avoid package dependencies
berryFunctions::require2("SDMTools")
berryFunctions::require2("raster")
berryFunctions::require2("mapmisc")
par(mar=c(0,0,0,0))
map &lt;- OSMscale::pointsMap(long=c(12.95, 13.22), lat=c(52.52, 52.36))
SDMTools::Scalebar(x=1443391,y=6889679,distance=10000)
raster::scalebar(d=10000, xy=c(1443391,6884254))
OSMscale::scaleBar(map, x=0.35, y=0.45, abslen=5)
library(mapmisc) # otherwise rbind for SpatialPoints is not found
mapmisc::scaleBar(pmap(map)@projargs, seg.len=10, pos="center", bg="transparent")

## End(Not run)

</code></pre>

<hr>
<h2 id='triangleArea'>Area of a triangle</h2><span id='topic+triangleArea'></span>

<h3>Description</h3>

<p>calculate Area of a planar triangle
</p>


<h3>Usage</h3>

<pre><code class='language-R'>triangleArea(x, y, digits = 3)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="triangleArea_+3A_x">x</code></td>
<td>
<p>Vector with 3 values (x coordinates of triangle corners)</p>
</td></tr>
<tr><td><code id="triangleArea_+3A_y">y</code></td>
<td>
<p>Ditto for y.</p>
</td></tr>
<tr><td><code id="triangleArea_+3A_digits">digits</code></td>
<td>
<p>Number of digits the result is rounded to. DEFAULT: 3)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Numeric
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, 2011
</p>


<h3>See Also</h3>

<p><code>berryFunctions::<a href="berryFunctions.html#topic+distance">distance</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
a &lt;- c(1,5.387965,9); b &lt;- c(1,1,5)
plot(a[c(1:3,1)], b[c(1:3,1)], type="l", asp=1)#; grid()

triangleArea(a,b)
#triangleArea(a,b[1:2])

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
