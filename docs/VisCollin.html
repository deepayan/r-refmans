<!DOCTYPE html><html><head><title>Help for package VisCollin</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {VisCollin}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#biomass'><p>Biomass Production in the Cape Fear Estuary</p></a></li>
<li><a href='#cars'><p>Cars Data</p></a></li>
<li><a href='#cellgram'><p>Draw one cell in a tableplot</p></a></li>
<li><a href='#colldiag'><p>Collinearity Diagnostics</p></a></li>
<li><a href='#consumption'><p>Consumption Function Dataset</p></a></li>
<li><a href='#make.patterns'><p>Construct collection of pattern specifications for tableplot</p></a></li>
<li><a href='#tableplot'><p>Tableplot: A Semi-graphic Display of a Table</p></a></li>
<li><a href='#tableplot.colldig'><p>Tableplot for Collinearity Diagnostics</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Visualizing Collinearity Diagnostics</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-09-05</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides methods to calculate diagnostics for multicollinearity among predictors in a linear or
  generalized linear model. It also provides methods to visualize those diagnostics following Friendly &amp; Kwan (2009),
  "Where’s Waldo: Visualizing Collinearity Diagnostics", &lt;<a href="https://doi.org/10.1198%2Ftast.2009.0012">doi:10.1198/tast.2009.0012</a>&gt;.
  These include better tabular presentation of collinearity diagnostics that highlight the important numbers,
  a semi-graphic tableplot of the diagnostics to make warning and danger levels more salient,
  and a "collinearity biplot" of the smallest dimensions of predictor space, where collinearity is most apparent. </td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>car, corrgram, corrplot, dplyr, lmtest, knitr, tidyr</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/friendly/VisCollin">https://github.com/friendly/VisCollin</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/friendly/VisCollin/issues">https://github.com/friendly/VisCollin/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-05 15:50:59 UTC; friendly</td>
</tr>
<tr>
<td>Author:</td>
<td>Michael Friendly <a href="https://orcid.org/0000-0002-3237-0941"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Michael Friendly &lt;friendly@yorku.ca&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-05 16:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='biomass'>Biomass Production in the Cape Fear Estuary</h2><span id='topic+biomass'></span>

<h3>Description</h3>

<p>Data collected by Rick Linthurst (1979) at North Carolina State University for the
purpose of identifying the important soil characteristics influencing aerial
biomass production of the marsh grass <em>Spartina alterniflora</em> in the
Cape Fear Estuary of North Carolina. Three types of Spartina vegetation areas
(devegetated “dead” areas, “short” Spartina areas, and “tall” Spartina areas)
were sampled in each of three locations (Oak Island, Smith Island, and Snows
Marsh)
</p>
<p>Samples of the soil substrate from 5 random sites within
each location–vegetation type (giving 45 total samples) were analyzed for
14 soil physico-chemical characteristics each month for several months.
</p>


<h3>Format</h3>

<p>A data frame with 45 observations on the following 17 variables.
</p>

<dl>
<dt><code>loc</code></dt><dd><p>location, a factor with levels <code>OI</code> <code>SI</code> <code>SM</code></p>
</dd>
<dt><code>type</code></dt><dd><p>area type, a factor with levels <code>DVEG</code> <code>SHRT</code> <code>TALL</code></p>
</dd>
<dt><code>biomass</code></dt><dd><p>aerial biomass in <code class="reqn">gm^{-2}</code>, a numeric vector</p>
</dd>
<dt><code>H2S</code></dt><dd><p>hydrogen sulfide ppm, a numeric vector</p>
</dd>
<dt><code>sal</code></dt><dd><p>percent salinity, a numeric vector</p>
</dd>
<dt><code>Eh7</code></dt><dd><p>ester-hydrolase, a numeric vector</p>
</dd>
<dt><code>pH</code></dt><dd><p>acidity as measured in water, a numeric vector</p>
</dd>
<dt><code>buf</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>P</code></dt><dd><p>phosphorus ppm, a numeric vector</p>
</dd>
<dt><code>K</code></dt><dd><p>potassium ppm, a numeric vector</p>
</dd>
<dt><code>Ca</code></dt><dd><p>calcium ppm, a numeric vector</p>
</dd>
<dt><code>Mg</code></dt><dd><p>magnesium ppm, a numeric vector</p>
</dd>
<dt><code>Na</code></dt><dd><p>sodium ppm, a numeric vector</p>
</dd>
<dt><code>Mn</code></dt><dd><p>manganese ppm, a numeric vector</p>
</dd>
<dt><code>Zn</code></dt><dd><p>zinc ppm, a numeric vector</p>
</dd>
<dt><code>Cu</code></dt><dd><p>copper ppm, a numeric vector</p>
</dd>
<dt><code>NH4</code></dt><dd><p>ammonium ion ppm, a numeric vector</p>
</dd>
</dl>



<h3>Source</h3>

<p>Rawlings, J. O., Pantula, S. G., &amp; Dickey, D. A. (2001).
<em>Applied Regression Analysis: A Research Tool</em>, 2nd Ed., Springer New York.
Table 5.1.
</p>


<h3>References</h3>

<p>R. A. Linthurst. Aeration, nitrogen, pH and salinity as factors affecting <em>Spartina Alterniflora</em> growth and dieback.
PhD thesis, North Carolina State University, 1979.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(biomass)
str(biomass)
biomass.mod &lt;- lm (biomass ~ H2S + sal + Eh7 + pH + buf + P + K + Ca + Mg + Na +
                           Mn + Zn + Cu + NH4,
                 data=biomass)
car::vif(biomass.mod)

(cd &lt;- colldiag(biomass.mod, add.intercept=FALSE, center=TRUE))
# simplified display
print(cd, fuzz=.3)
</code></pre>

<hr>
<h2 id='cars'>Cars Data</h2><span id='topic+cars'></span>

<h3>Description</h3>

<p>Data from the 1983 ASA Data Exposition, held in conjunction with the Annual
Meetings in Toronto, August 15-18, 1983,
<a href="https://community.amstat.org/jointscsg-section/dataexpo/dataexpobefore1993">https://community.amstat.org/jointscsg-section/dataexpo/dataexpobefore1993</a>
The data set was collected by Ernesto Ramos and David Donoho on characteristics of automobiles.
</p>


<h3>Format</h3>

<p>A data frame with 406 observations on the following 10 variables:
</p>

<dl>
<dt><code>make</code></dt><dd><p>make of car, a factor with levels <code>amc</code> <code>audi</code> <code>bmw</code> <code>buick</code> <code>cadillac</code> <code>chev</code> <code>chrysler</code> <code>citroen</code> <code>datsun</code> <code>dodge</code> <code>fiat</code> <code>ford</code> <code>hi</code> <code>honda</code> <code>mazda</code> <code>mercedes</code> <code>mercury</code> <code>nissan</code> <code>oldsmobile</code> <code>opel</code> <code>peugeot</code> <code>plymouth</code> <code>pontiac</code> <code>renault</code> <code>saab</code> <code>subaru</code> <code>toyota</code> <code>triumph</code> <code>volvo</code> <code>vw</code></p>
</dd>
<dt><code>model</code></dt><dd><p>model of car, a character vector</p>
</dd>
<dt><code>mpg</code></dt><dd><p>miles per gallon, a numeric vector</p>
</dd>
<dt><code>cylinder</code></dt><dd><p>number of cylinders, a numeric vector</p>
</dd>
<dt><code>engine</code></dt><dd><p>engine displacement (cu. inches), a numeric vector</p>
</dd>
<dt><code>horse</code></dt><dd><p>horsepower, a numeric vector</p>
</dd>
<dt><code>weight</code></dt><dd><p>vehicle weight (lbs.), a numeric vector</p>
</dd>
<dt><code>accel</code></dt><dd><p>time to accelerate from O to 60 mph (sec.), a numeric vector</p>
</dd>
<dt><code>year</code></dt><dd><p>model year (modulo 100), a numeric vector ranging from 70 &ndash; 82</p>
</dd>
<dt><code>origin</code></dt><dd><p>region of origin, a factor with levels <code>Amer</code> <code>Eur</code> <code>Japan</code></p>
</dd>
</dl>



<h3>Source</h3>

<p>The data was provided for the ASA Data Exposition
in a &quot;shar&quot; file, <a href="http://lib.stat.cmu.edu/datasets/cars.data">http://lib.stat.cmu.edu/datasets/cars.data</a>.
It is a version of that used by Donoho and Ramos (1982) to illustrate PRIM-H.
</p>


<h3>References</h3>

<p>Donoho, David and Ramos, Ernesto (1982), &ldquo;PRIMDATA: Data Sets for Use With PRIM-H&rdquo; (Draft).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(cars)
cars.mod &lt;- lm (mpg ~ cylinder + engine + horse + weight + accel + year,
                data=cars)
car::vif(cars.mod)

(cd &lt;- colldiag(cars.mod, center=TRUE))

# simplified display
print(cd, fuzz=.3)
</code></pre>

<hr>
<h2 id='cellgram'>Draw one cell in a tableplot</h2><span id='topic+cellgram'></span>

<h3>Description</h3>

<p>Draws a graphic representing one or more values for one cell in a tableplot,
using shapes whose size is proportional to the cell values and other visual attributes
(outline color, fill color, outline line type, ...).
Several values can be shown in a cell, using different proportional shapes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cellgram(
  cell,
  shape = 0,
  shape.col = "black",
  shape.lty = 1,
  cell.fill = "white",
  back.fill = "white",
  label = 0,
  label.size = 0.7,
  ref.col = "grey80",
  ref.grid = FALSE,
  scale.max = 1,
  shape.name = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cellgram_+3A_cell">cell</code></td>
<td>
<p>Numeric value(s) to be depicted in the table cell</p>
</td></tr>
<tr><td><code id="cellgram_+3A_shape">shape</code></td>
<td>
<p>Integer(s) or character string(s) specifying the shape(s) used to encode the numerical value of
<code>cell</code>.
Any of <code>0="circle", 1="diamond", 2="square"</code>. Recycled to match the number of values
in the cell.</p>
</td></tr>
<tr><td><code id="cellgram_+3A_shape.col">shape.col</code></td>
<td>
<p>Outline color(s) for the shape(s). Recycled to match the number of values
in the cell.</p>
</td></tr>
<tr><td><code id="cellgram_+3A_shape.lty">shape.lty</code></td>
<td>
<p>Outline line type(s) for the shape(s). Recycled to match the number of values
in the cell.</p>
</td></tr>
<tr><td><code id="cellgram_+3A_cell.fill">cell.fill</code></td>
<td>
<p>Inside color of |smallest| shape in a cell</p>
</td></tr>
<tr><td><code id="cellgram_+3A_back.fill">back.fill</code></td>
<td>
<p>Background color of cell</p>
</td></tr>
<tr><td><code id="cellgram_+3A_label">label</code></td>
<td>
<p>Number of cell values to be printed in the corners of the cell; max is 4</p>
</td></tr>
<tr><td><code id="cellgram_+3A_label.size">label.size</code></td>
<td>
<p>Character size of cell label(s)</p>
</td></tr>
<tr><td><code id="cellgram_+3A_ref.col">ref.col</code></td>
<td>
<p>color of reference lines</p>
</td></tr>
<tr><td><code id="cellgram_+3A_ref.grid">ref.grid</code></td>
<td>
<p>whether to draw ref lines in the cells or not</p>
</td></tr>
<tr><td><code id="cellgram_+3A_scale.max">scale.max</code></td>
<td>
<p>scale values to this maximum</p>
</td></tr>
<tr><td><code id="cellgram_+3A_shape.name">shape.name</code></td>
<td>
<p>character string to uniquely identify shapes to help fill in smallest one</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None. Used for its graphic side effect
</p>


<h3>Examples</h3>

<pre><code class='language-R'># None

</code></pre>

<hr>
<h2 id='colldiag'>Collinearity Diagnostics</h2><span id='topic+colldiag'></span><span id='topic+print.colldiag'></span>

<h3>Description</h3>

<p>Calculates condition indexes and variance decomposition proportions in order to test
for collinearity among the independent variables of a regression model and
identifies the sources of collinearity if present.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>colldiag(mod, scale = TRUE, center = FALSE, add.intercept = FALSE)

## S3 method for class 'colldiag'
print(x, dec.places = 3, fuzz = NULL, fuzzchar = ".", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="colldiag_+3A_mod">mod</code></td>
<td>
<p>A model object, such as computed by <code>lm</code> or <code>glm</code>, or a data-frame to be used as predictors in
such a model.</p>
</td></tr>
<tr><td><code id="colldiag_+3A_scale">scale</code></td>
<td>
<p>If <code>FALSE</code>, the data are left unscaled. If <code>TRUE</code>, the data are scaled, typically
to mean 0 and variance 1 using <code><a href="base.html#topic+scale">scale</a></code>.
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="colldiag_+3A_center">center</code></td>
<td>
<p>If TRUE, data are centered. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="colldiag_+3A_add.intercept">add.intercept</code></td>
<td>
<p>if <code>TRUE</code>, an intercept is added. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="colldiag_+3A_x">x</code></td>
<td>
<p>A <code>colldiag</code> object</p>
</td></tr>
<tr><td><code id="colldiag_+3A_dec.places">dec.places</code></td>
<td>
<p>Number of decimal places to use when printing</p>
</td></tr>
<tr><td><code id="colldiag_+3A_fuzz">fuzz</code></td>
<td>
<p>Variance decomposition proportions less than <em>fuzz</em> are printed as <em>fuzzchar</em></p>
</td></tr>
<tr><td><code id="colldiag_+3A_fuzzchar">fuzzchar</code></td>
<td>
<p>Character for small variance decomposition proportion values</p>
</td></tr>
<tr><td><code id="colldiag_+3A_...">...</code></td>
<td>
<p>arguments to be passed on to or from other methods (unused)</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>colldiag</code> is an implementation of the regression collinearity diagnostic procedures found in Belsley, Kuh, and Welsch (1980). These procedures examine the &ldquo;conditioning&rdquo; of the matrix of independent variables.
</p>
<p>It computes the condition indexes of the model matrix. If the largest condition index (the condition number) is
<em>large</em> (Belsley et al suggest 30 or higher), then there may be collinearity problems.
All <em>large</em> condition indexes may be worth investigating.
</p>
<p><code>colldiag</code> also provides further information that may help to identify the source of these problems,
the <em>variance decomposition proportions</em> associated with each condition index.
If a large condition index is associated two or more variables with <em>large</em> variance decomposition proportions,
these variables may be causing collinearity problems.  Belsley et al suggest that a <em>large</em> proportion is
50 percent or more.
</p>
<p>Note that such collinearity diagnostics are often provided by other software
for the model matrix including
the constant term for the intercept (e.g., SAS PROC REG, with the option COLLIN).
However, these are generally useless and misleading unless the intercept has some
real interpretation and the origin of the regressors is contained within the
prediction space, as explained by Fox (1997, p. 351). The default values
for <code>scale</code>, <code>center</code> and <code>add.intercept</code> exclude the constant
term, and correspond to the SAS option COLLINNOINT.
</p>


<h3>Value</h3>

<p>A <code>"colldiag"</code> object, containing:
</p>
<table>
<tr><td><code>condindx</code></td>
<td>
<p>A one-column matrix of condition indexes</p>
</td></tr>
<tr><td><code>pi</code></td>
<td>
<p>A square matrix of variance decomposition proportions. The rows refer to the principal component dimensions,
the columns to the predictor variables.</p>
</td></tr>
</table>
<p><code>print.colldiag</code> prints the condition indexes as the first column of a table with the variance decomposition
proportions beside them. <code>print.colldiag</code> has a <code>fuzz</code> option to suppress printing of small numbers.
If fuzz is used, small values are replaces by a period &ldquo;.&rdquo;. <code>Fuzzchar</code> can be used to specify an alternative character.
</p>


<h3>Note</h3>

<p>Missing data is silently omitted in these calculations
</p>


<h3>Author(s)</h3>

<p>John Hendrickx
</p>


<h3>Source</h3>

<p>These functions were taken from the (now defunct) <code>perturb</code> package by John Hendrickx.
He credits the Stata program <code>coldiag</code> by Joseph Harkness <a href="mailto:joe.harkness@jhu.edu">joe.harkness@jhu.edu</a>, Johns Hopkins University.
</p>


<h3>References</h3>

<p>Belsley, D.A.,  Kuh, E. and Welsch, R. (1980).
<cite>Regression Diagnostics</cite>, New York: John Wiley &amp; Sons.
</p>
<p>Belsley, D.A. (1991).
<cite>Conditioning diagnostics, collinearity and weak data in regression</cite>.
New York: John Wiley &amp; Sons.
</p>
<p>Fox, J. (1997). <cite>Applied Regression Analysis, Linear Models, and Related Methods</cite>.
thousand Oaks, CA: Sage Publications.
</p>
<p>Friendly, M., &amp; Kwan, E. (2009).
Where’s Waldo: Visualizing Collinearity Diagnostics. <em>The American Statistician</em>, <b>63</b>, 56–65.
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+lm">lm</a></code>, <code><a href="base.html#topic+scale">scale</a></code>, <code><a href="base.html#topic+svd">svd</a></code>,
<code>[car]</code><code><a href="car.html#topic+vif">vif</a></code>, <code>[rms]</code><code><a href="rms.html#topic+vif">vif</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(cars)
cars.mod &lt;- lm (mpg ~ cylinder + engine + horse + weight + accel + year,
                data=cars)
car::vif(cars.mod)

# SAS PROC REG / COLLIN option, including the intercept
colldiag(cars.mod, add.intercept = TRUE)

# Default settings: scaled, not centered, no intercept, like SAS PROC REG / COLLINNOINT
colldiag(cars.mod)

(cd &lt;- colldiag(cars.mod, center=TRUE))

# fuzz small values
print(cd, fuzz = 0.5)

# Biomass data
data(biomass)

biomass.mod &lt;- lm (biomass ~ H2S + sal + Eh7 + pH + buf + P + K +
                             Ca + Mg + Na + Mn + Zn + Cu + NH4,
                   data=biomass)
car::vif(biomass.mod)

cd &lt;- colldiag(biomass.mod, center=TRUE)
# simplified display
print(colldiag(biomass.mod, center=TRUE), fuzz=.3)

# None yet
</code></pre>

<hr>
<h2 id='consumption'>Consumption Function Dataset</h2><span id='topic+consumption'></span>

<h3>Description</h3>

<p>Example from pp 149-154 of Belsley (1991), Conditioning Diagnostics
</p>


<h3>Format</h3>

<p>A data frame with 28 observations on the following 5 variables.
</p>

<dl>
<dt>year</dt><dd><p>1947 to 1974</p>
</dd>
<dt>cons</dt><dd><p>total consumption, 1958 dollars</p>
</dd>
<dt>rate</dt><dd><p>the interest rate (Moody's Aaa)</p>
</dd>
<dt>dpi</dt><dd><p>disposable income, 1958 dollars</p>
</dd>
<dt>d_dpi</dt><dd><p>annual change in disposable income</p>
</dd>
</dl>



<h3>References</h3>

<p>Belsley, D.A. (1991).
<cite>Conditioning diagnostics, collinearity and weak data in regression</cite>.
New York: John Wiley &amp; Sons.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(consumption)

ct1 &lt;- with(consumption, c(NA,cons[-length(cons)]))
# compare (5.3)
m1 &lt;- lm(cons ~ ct1 + dpi + rate + d_dpi, data = consumption)
anova(m1)

# compare exhibit 5.11
with(consumption, cor(cbind(ct1, dpi, rate, d_dpi), use="complete.obs"))
# compare exhibit 5.12
cd&lt;-colldiag(m1)
cd
print(cd,fuzz=.3)


</code></pre>

<hr>
<h2 id='make.patterns'>Construct collection of pattern specifications for tableplot</h2><span id='topic+make.patterns'></span>

<h3>Description</h3>

<p>Construct collection of pattern specifications for tableplot
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make.patterns(
  n = NULL,
  shape = 0,
  shape.col = "black",
  shape.lty = 1,
  cell.fill = "white",
  back.fill = "white",
  label = 0,
  label.size = 0.7,
  ref.col = "gray80",
  ref.grid = FALSE,
  scale.max = 1,
  as.data.frame = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make.patterns_+3A_n">n</code></td>
<td>
<p>Number of patterns</p>
</td></tr>
<tr><td><code id="make.patterns_+3A_shape">shape</code></td>
<td>
<p>Shape(s) used to encode the numerical value of <code>cell</code>.
Any of <code>0="circle", 1="diamond", 2="square"</code>. Recycled to match the number of values
in the cell.</p>
</td></tr>
<tr><td><code id="make.patterns_+3A_shape.col">shape.col</code></td>
<td>
<p>Outline color(s) for the shape(s)</p>
</td></tr>
<tr><td><code id="make.patterns_+3A_shape.lty">shape.lty</code></td>
<td>
<p>Outline line type(s) for the shape(s)</p>
</td></tr>
<tr><td><code id="make.patterns_+3A_cell.fill">cell.fill</code></td>
<td>
<p>inside color of |smallest| shape in a cell</p>
</td></tr>
<tr><td><code id="make.patterns_+3A_back.fill">back.fill</code></td>
<td>
<p>background color of cell</p>
</td></tr>
<tr><td><code id="make.patterns_+3A_label">label</code></td>
<td>
<p>how many cell values will be labeled in the cell; max is 4</p>
</td></tr>
<tr><td><code id="make.patterns_+3A_label.size">label.size</code></td>
<td>
<p>size of cell label(s)</p>
</td></tr>
<tr><td><code id="make.patterns_+3A_ref.col">ref.col</code></td>
<td>
<p>color of reference lines</p>
</td></tr>
<tr><td><code id="make.patterns_+3A_ref.grid">ref.grid</code></td>
<td>
<p>whether to draw ref lines in the cells or not</p>
</td></tr>
<tr><td><code id="make.patterns_+3A_scale.max">scale.max</code></td>
<td>
<p>scale values to this maximum</p>
</td></tr>
<tr><td><code id="make.patterns_+3A_as.data.frame">as.data.frame</code></td>
<td>
<p>whether to return a data.frame or a list.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns either a data.frame of a list. If a data.frame, the pattern specifications appear as columns
</p>


<h3>Examples</h3>

<pre><code class='language-R'># None
</code></pre>

<hr>
<h2 id='tableplot'>Tableplot: A Semi-graphic Display of a Table</h2><span id='topic+tableplot'></span><span id='topic+tableplot.default'></span>

<h3>Description</h3>

<p>A tableplot (Kwan, 2008) is
designed as a semi-graphic display in the form of a table with numeric values, but supplemented
by symbols with size proportional to cell value(s), and with other visual attributes
(shape, color fill, background fill, etc.) that can be used to encode other information
essential to direct visual understanding.  Three-way arrays, where the last dimension
corresponds to levels of a factor for which the first two dimensions are to be compared
are handled by superimposing symbols.
</p>
<p>The specifications for each cell are given by the <code>types</code> argument, whose elements refer
to the attributes specified in <code>patterns.</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tableplot(values, ...)

## Default S3 method:
tableplot(
  values,
  types,
  patterns = list(list(0, "black", 1, "white", "white", 0, 0.5, "grey80", FALSE, 1)),
  title = "Tableplot",
  side.label = "row",
  top.label = "col",
  table.label = TRUE,
  label.size = 1,
  side.rot = 0,
  gap = 2,
  v.parts = 0,
  h.parts = 0,
  cor.matrix = FALSE,
  var.names = "var",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tableplot_+3A_values">values</code></td>
<td>
<p>A matrix or 3-dimensional array of values to be displayed in a tableplot</p>
</td></tr>
<tr><td><code id="tableplot_+3A_...">...</code></td>
<td>
<p>Arguments passed down to <code>tableplot.default</code></p>
</td></tr>
<tr><td><code id="tableplot_+3A_types">types</code></td>
<td>
<p>Matrix of specification assignments, of the same size as the first two dimensions
of <code>values</code>. Entries refer to the sub-lists of <code>patterns</code>.
Defaults to a matrix of all 1s, <code>matrix(1, dim(values)[1], dim(values[2]))</code>,
indicating that all cells use the same pattern specification.</p>
</td></tr>
<tr><td><code id="tableplot_+3A_patterns">patterns</code></td>
<td>
<p>List of lists; each list is one specification for the arguments to <code><a href="#topic+cellgram">cellgram</a></code>.</p>
</td></tr>
<tr><td><code id="tableplot_+3A_title">title</code></td>
<td>
<p>Main title</p>
</td></tr>
<tr><td><code id="tableplot_+3A_side.label">side.label</code></td>
<td>
<p>a character vector providing labels for the rows of the tableplot</p>
</td></tr>
<tr><td><code id="tableplot_+3A_top.label">top.label</code></td>
<td>
<p>a character vector providing labels for the columns of the tableplot</p>
</td></tr>
<tr><td><code id="tableplot_+3A_table.label">table.label</code></td>
<td>
<p>Whether to print row/column labels</p>
</td></tr>
<tr><td><code id="tableplot_+3A_label.size">label.size</code></td>
<td>
<p>Character size for labels</p>
</td></tr>
<tr><td><code id="tableplot_+3A_side.rot">side.rot</code></td>
<td>
<p>Degree of rotation (positive for counter-clockwise)</p>
</td></tr>
<tr><td><code id="tableplot_+3A_gap">gap</code></td>
<td>
<p>Width of the gap in each partition, if partitions are requested by <code>v.parts</code>
and/or <code>h.parts</code></p>
</td></tr>
<tr><td><code id="tableplot_+3A_v.parts">v.parts</code></td>
<td>
<p>An integer vector giving the number of columns in two or more partitions of
the table. If provided, sum must equal number of columns.</p>
</td></tr>
<tr><td><code id="tableplot_+3A_h.parts">h.parts</code></td>
<td>
<p>An integer vector giving the number of rows in two or more partitions of
the table. If provided, sum must equal number of rows.</p>
</td></tr>
<tr><td><code id="tableplot_+3A_cor.matrix">cor.matrix</code></td>
<td>
<p>Logical. <code>TRUE</code> for a correlation matrix</p>
</td></tr>
<tr><td><code id="tableplot_+3A_var.names">var.names</code></td>
<td>
<p>a list of variable names</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None. Used for its graphic side effect
</p>


<h3>Note</h3>

<p>The original version of tableplots was in the now-defunct tableplot package
<a href="https://cran.r-project.org/package=tableplot">https://cran.r-project.org/package=tableplot</a>. The current implementation
is a modest re-design focused on its use for collinearity diagnostics, but usable in
more general contexts.
</p>


<h3>Author(s)</h3>

<p>Ernest Kwan and Michael Friendly
</p>


<h3>References</h3>

<p>Kwan, E. (2008).
Improving Factor Analysis in Psychology: Innovations Based on the Null Hypothesis Significance
Testing Controversy. Ph. D. thesis,  York University.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cellgram">cellgram</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(cars)
cars.mod &lt;- lm (mpg ~ cylinder + engine + horse + weight + accel + year,
                data=cars)
car::vif(cars.mod)

(cd &lt;- colldiag(cars.mod, center=TRUE))
tableplot(cd, title = "Tableplot of cars data", cond.max = 30 )

data(baseball, package = "corrgram")

baseball$Years7 &lt;- pmin(baseball$Years,7)

base.mod &lt;- lm(logSal ~ Years7 + Atbatc + Hitsc + Homerc + Runsc + RBIc + Walksc,
               data=baseball)
car::vif(base.mod)

cd &lt;- colldiag(base.mod, center=TRUE)
tableplot(cd)
</code></pre>

<hr>
<h2 id='tableplot.colldig'>Tableplot for Collinearity Diagnostics</h2><span id='topic+tableplot.colldig'></span><span id='topic+tableplot.lm'></span><span id='topic+tableplot.glm'></span><span id='topic+tableplot.colldiag'></span>

<h3>Description</h3>

<p>These methods produce a tableplot of collinearity diagnostics, showing the condition indices and variance
proportions for predictors in a linear or generalized linear regression model. This encodes the
condition indices using <em>squares</em> whose background color is red for condition indices &gt; 10,
green for values &gt; 5 and green otherwise, reflecting danger, warning and OK respectively.
The value of the condition index is encoded within this using a white square proportional to the value
(up to some maximum value, <code>cond.max</code>),
</p>
<p>Variance decomposition proportions are shown by filled <em>circles</em> whose radius is proportional to those values
and are filled (by default) with shades ranging from white through pink to red. Rounded values of those diagnostics
are printed in the cells.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'lm'
tableplot(values, ...)

## S3 method for class 'glm'
tableplot(values, ...)

## S3 method for class 'colldiag'
tableplot(
  values,
  prop.col = c("white", "pink", "red"),
  cond.col = c("#A8F48D", "#DDAB3E", "red"),
  cond.max = 100,
  prop.breaks = c(0, 20, 50, 100),
  cond.breaks = c(0, 5, 10, 1000),
  show.rows = nvar:1,
  title = "",
  patterns,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tableplot.colldig_+3A_values">values</code></td>
<td>
<p>A <code>"colldiag"</code>, <code>"lm"</code> or <code>"glm"</code> object</p>
</td></tr>
<tr><td><code id="tableplot.colldig_+3A_...">...</code></td>
<td>
<p>other arguments, for consistency with generic</p>
</td></tr>
<tr><td><code id="tableplot.colldig_+3A_prop.col">prop.col</code></td>
<td>
<p>A vector of colors used for the variance proportions. The default is <code>c("white", "pink", "red")</code>.</p>
</td></tr>
<tr><td><code id="tableplot.colldig_+3A_cond.col">cond.col</code></td>
<td>
<p>A vector of colors used for the condition indices</p>
</td></tr>
<tr><td><code id="tableplot.colldig_+3A_cond.max">cond.max</code></td>
<td>
<p>Maximum value to scale the white squares for the condition indices</p>
</td></tr>
<tr><td><code id="tableplot.colldig_+3A_prop.breaks">prop.breaks</code></td>
<td>
<p>Scale breaks for the variance proportions</p>
</td></tr>
<tr><td><code id="tableplot.colldig_+3A_cond.breaks">cond.breaks</code></td>
<td>
<p>Scale breaks for the condition indices</p>
</td></tr>
<tr><td><code id="tableplot.colldig_+3A_show.rows">show.rows</code></td>
<td>
<p>Rows of the eigenvalue decompositon of the model matrix to show in the display. The default <code>nvar:1</code>
puts the smallest dimensions at the top of the display.</p>
</td></tr>
<tr><td><code id="tableplot.colldig_+3A_title">title</code></td>
<td>
<p>title used for the resulting graphic</p>
</td></tr>
<tr><td><code id="tableplot.colldig_+3A_patterns">patterns</code></td>
<td>
<p>pattern matrix used for table plot.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None. Used for its graphic side-effect
</p>


<h3>Author(s)</h3>

<p>Michael Friendly
</p>


<h3>References</h3>

<p>Friendly, M., &amp; Kwan, E. (2009).
&quot;Where’s Waldo: Visualizing Collinearity Diagnostics.&quot; <em>The American Statistician</em>, <b>63</b>, 56–65.
Online: <a href="https://www.datavis.ca/papers/viscollin-tast.pdf">https://www.datavis.ca/papers/viscollin-tast.pdf</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># None yet

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
