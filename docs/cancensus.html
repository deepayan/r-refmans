<!DOCTYPE html><html lang="en"><head><title>Help for package cancensus</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {cancensus}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_unique_names_to_region_list'><p>Convenience function for creating unique names from region list</p></a></li>
<li><a href='#as_census_region_list'><p>Convert a (suitably filtered) data frame from</p>
<code>list_census_regions</code> to a list suitable for passing to
<code>get_census</code>.</a></li>
<li><a href='#census_vectors'><p>Return Census variable names and labels as a tidy data frame (Deprecated)</p></a></li>
<li><a href='#child_census_vectors'><p>List all child variables from vector hierarchies given either a list of Census</p>
variables returned by
<code>list_census_vectors</code>, <code>search_census_vectors</code>, <code>find_census_vectors</code>, or a direct string reference to the vector code.</a></li>
<li><a href='#CODES_TABLE'><p>A dataset with code table summaries for census data</p></a></li>
<li><a href='#COV_SKYTRAIN_STATIONS'><p>A dataset City of Vancouver skytrain station locations</p></a></li>
<li><a href='#dataset_attribution'><p>Get attribution for datasets</p></a></li>
<li><a href='#explore_census_regions'><p>Interactively browse Census variables and regions on Censusmapper.ca in a new browser window</p></a></li>
<li><a href='#explore_census_vectors'><p>Interactively browse Census variables and regions on Censusmapper.ca in a new browser window</p></a></li>
<li><a href='#find_census_vectors'><p>Query the CensusMapper API for vectors using exact, semantic, or keyword search</p></a></li>
<li><a href='#get_census'><p>Access to Canadian census data through the CensusMapper API</p></a></li>
<li><a href='#get_census_geometry'><p>Deprecated, use 'get_census' instead</p></a></li>
<li><a href='#get_intersecting_geometries'><p>Get identifiers for census regions intersecting a geometry</p></a></li>
<li><a href='#get_recalled_database'><p>Get metadata for recalled data</p></a></li>
<li><a href='#get_statcan_geo_suite'><p>Read the geosuite data</p></a></li>
<li><a href='#get_statcan_geographic_attributes'><p>Read the Geographic Attributes File</p></a></li>
<li><a href='#get_statcan_geographies'><p>Read the geosuite data</p></a></li>
<li><a href='#get_statcan_geography_relationships'><p>Read the Dissemination Geographies Relationship File</p></a></li>
<li><a href='#get_statcan_wds_data'><p>Query the StatCan WDS for data</p></a></li>
<li><a href='#get_statcan_wds_metadata'><p>Query the StatCan WDS for metadata</p></a></li>
<li><a href='#label_vectors'><p>Return Census variable names and labels as a tidy data frame</p></a></li>
<li><a href='#list_cancensus_cache'><p>List cached files</p></a></li>
<li><a href='#list_census_datasets'><p>Query the CensusMapper API for available datasets.</p></a></li>
<li><a href='#list_census_regions'><p>Query the CensusMapper API for available regions in a given dataset.</p></a></li>
<li><a href='#list_census_vectors'><p>Query the CensusMapper API for available vectors for a given dataset.</p></a></li>
<li><a href='#list_recalled_cached_data'><p>List recalled data stored in local cache</p></a></li>
<li><a href='#parent_census_vectors'><p>List all parent variables from vector hierarchies given either a list of Census</p>
variables returned by
<code>list_census_vectors</code>, <code>search_census_vectors</code>, <code>find_census_vectors</code>, or a direct string reference to the vector code.</a></li>
<li><a href='#remove_from_cancensus_cache'><p>Remove cached files</p></a></li>
<li><a href='#remove_recalled_cached_data'><p>Remove recalled data from local cache</p></a></li>
<li><a href='#search_census_regions'><p>Query the CensusMapper API for regions with names matching a searchterm.</p></a></li>
<li><a href='#search_census_vectors'><p>Query the CensusMapper API for vectors with descriptions matching a search term or phrase (deprecated)</p></a></li>
<li><a href='#set_cancensus_api_key'><p>Set Censusmapper API key</p></a></li>
<li><a href='#set_cancensus_cache_path'><p>Set persistent cancensus cache location</p></a></li>
<li><a href='#show_cancensus_api_key'><p>View saved Censusmapper API key</p></a></li>
<li><a href='#show_cancensus_cache_path'><p>View saved cache directory path</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Access, Retrieve, and Work with Canadian Census Data and
Geography</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5.7</td>
</tr>
<tr>
<td>Description:</td>
<td>Integrated, convenient, and uniform access to Canadian
    Census data and geography retrieved using the 'CensusMapper' API. This package produces analysis-ready 
    tidy data frames and spatial data in multiple formats, as well as convenience functions
    for working with Census variables, variable hierarchies, and region selection. API
    keys are freely available with free registration at <a href="https://censusmapper.ca/api">https://censusmapper.ca/api</a>.
    Census data and boundary geometries are reproduced and distributed on an "as
    is" basis with the permission of Statistics Canada (Statistics Canada 2001; 2006;
    2011; 2016; 2021).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>yes</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>yes</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Imports:</td>
<td>digest (&ge; 0.1), dplyr (&ge; 0.7), httr (&ge; 1.0.0), jsonlite (&ge;
1.0), rlang</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, ggplot2, leaflet, mapdeck, rmarkdown, readr, scales,
sp, sf, geojsonsf, tidyr, lwgeom, xml2</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/mountainMath/cancensus">https://github.com/mountainMath/cancensus</a>,
<a href="https://mountainmath.github.io/cancensus/">https://mountainmath.github.io/cancensus/</a>,
<a href="https://censusmapper.ca/api">https://censusmapper.ca/api</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/mountainMath/cancensus/issues">https://github.com/mountainMath/cancensus/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-09 21:59:12 UTC; jens</td>
</tr>
<tr>
<td>Author:</td>
<td>Jens von Bergmann [aut] (API creator and maintainer),
  Dmitry Shkolnik [aut, cre] (Package maintainer, responsible for
    correspondence),
  Aaron Jacobs [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Dmitry Shkolnik &lt;shkolnikd@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-10 01:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_unique_names_to_region_list'>Convenience function for creating unique names from region list</h2><span id='topic+add_unique_names_to_region_list'></span>

<h3>Description</h3>

<p>Names of municipalities are not always unique, especially at the CSD level. This function
takes as input a subset of a regions list as generated from 'list_census_regions()' and de-duplicates names as
needed by adding the municipal status in parenthesis. If this does not de-duplicate the name then the
geographic identifier will be further added in parenthesis behind that.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_unique_names_to_region_list(region_list)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_unique_names_to_region_list_+3A_region_list">region_list</code></td>
<td>
<p>a subset of a regions list as gotten from 'list_census_regions()'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same list of regions with an extra column 'Name' with de-duplicated names.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# This will return a warning that no match was found, but will suggest similar named regions.
library(dplyr)
list_census_regions("CA21") %&gt;%
  filter(level=="CSD", CMA_UID=="59933") %&gt;%
  add_unique_names_to_region_list()

## End(Not run)
</code></pre>

<hr>
<h2 id='as_census_region_list'>Convert a (suitably filtered) data frame from
<code><a href="#topic+list_census_regions">list_census_regions</a></code> to a list suitable for passing to
<code><a href="#topic+get_census">get_census</a></code>.</h2><span id='topic+as_census_region_list'></span>

<h3>Description</h3>

<p>Convert a (suitably filtered) data frame from
<code><a href="#topic+list_census_regions">list_census_regions</a></code> to a list suitable for passing to
<code><a href="#topic+get_census">get_census</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_census_region_list(tbl)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_census_region_list_+3A_tbl">tbl</code></td>
<td>
<p>A data frame, suitably filtered, as returned by
<code><a href="#topic+list_census_regions">list_census_regions</a></code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(dplyr, warn.conflicts = FALSE)

# Query the CensusMapper API for the total occupied dwellings
# of 20 random Census Subdivisions, in Census 2016.
regions &lt;- list_census_regions("CA16") %&gt;%
  filter(level == "CSD") %&gt;%
  sample_n(20) %&gt;%
  as_census_region_list()

occupied &lt;- get_census("CA16", regions = regions,
                            vectors = c("v_CA16_408"),
                            level = "Regions")

## End(Not run)
</code></pre>

<hr>
<h2 id='census_vectors'>Return Census variable names and labels as a tidy data frame (Deprecated)</h2><span id='topic+census_vectors'></span>

<h3>Description</h3>

<p>Return Census variable names and labels as a tidy data frame (Deprecated)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>census_vectors(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="census_vectors_+3A_x">x</code></td>
<td>
<p>A data frame, <code>sp</code> or <code>sf</code> object returned from
<code>get_census</code> or similar.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with a column <code>variable</code> containing the truncated
variable name, and a column <code>label</code> describing it.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Query census data with truncated labels:
census_data &lt;- get_census(dataset='CA16', regions=list(CMA="59933"),
                          vectors=c("v_CA16_408","v_CA16_409","v_CA16_410"),
                          level='CSD', geo_format = "sf", labels="short")

# Get details for truncated vectors:
census_vectors(census_data)

## End(Not run)
</code></pre>

<hr>
<h2 id='child_census_vectors'>List all child variables from vector hierarchies given either a list of Census
variables returned by
<code>list_census_vectors</code>, <code>search_census_vectors</code>, <code>find_census_vectors</code>, or a direct string reference to the vector code.</h2><span id='topic+child_census_vectors'></span>

<h3>Description</h3>

<p>List all child variables from vector hierarchies given either a list of Census
variables returned by
<code>list_census_vectors</code>, <code>search_census_vectors</code>, <code>find_census_vectors</code>, or a direct string reference to the vector code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>child_census_vectors(
  vector_list,
  leaves_only = FALSE,
  max_level = NA,
  keep_parent = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="child_census_vectors_+3A_vector_list">vector_list</code></td>
<td>
<p>the list of vectors to be used, either a character vector or a filtered tibble
as returned from <code>list_census_vectors</code>.</p>
</td></tr>
<tr><td><code id="child_census_vectors_+3A_leaves_only">leaves_only</code></td>
<td>
<p>boolean flag to indicate if only final leaf vectors should be returned,
i.e. terminal vectors that themselves do not have children.</p>
</td></tr>
<tr><td><code id="child_census_vectors_+3A_max_level">max_level</code></td>
<td>
<p>optional, maximum depth to look for child vectors. Default is <code>NA</code> and will return all
child census vectors.</p>
</td></tr>
<tr><td><code id="child_census_vectors_+3A_keep_parent">keep_parent</code></td>
<td>
<p>optional, also return parent vector in list of results. Default is set to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Query parent vectors directly using vector identifier
child_census_vectors("v_CA16_2510")

## Not run: 

# Example using multiple vectors coerced into a list
child_census_vectors(c("v_CA16_2510","v_CA16_2511","v_CA16_2512"))

# or, equivalently
selected_vectors &lt;- c("v_CA16_2510","v_CA16_2511","v_CA16_2512")
child_census_vectors(selected_vectors)

# Example using dplyr and piped arguments
library(dplyr, warn.conflicts = FALSE)

list_census_vectors("CA16") %&gt;%
  filter(vector == "v_CA16_2510") %&gt;%
  child_census_vectors(TRUE)

# this will return the equivalent of c("v_CA16_2510", child_census_vectors("v_CA16_2510"))
list_census_vectors("CA16") %&gt;%
  filter(vector == "v_CA16_2510") %&gt;%
  child_census_vectors(TRUE, keep_parent = TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='CODES_TABLE'>A dataset with code table summaries for census data</h2><span id='topic+CODES_TABLE'></span>

<h3>Description</h3>

<p>A dataset with code table summaries for census data
</p>


<h3>Author(s)</h3>

<p>derived from StatCan definitions
</p>


<h3>References</h3>

<p><a href="https://www12.statcan.gc.ca/census-recensement/2021/geo/ref/domain-domaine/index2021-eng.cfm?lang=e&amp;id=CSDtype">https://www12.statcan.gc.ca/census-recensement/2021/geo/ref/domain-domaine/index2021-eng.cfm?lang=e&amp;id=CSDtype</a>, <a href="https://www12.statcan.gc.ca/census-recensement/2021/geo/ref/domain-domaine/index2021-eng.cfm?lang=e&amp;id=CDtype">https://www12.statcan.gc.ca/census-recensement/2021/geo/ref/domain-domaine/index2021-eng.cfm?lang=e&amp;id=CDtype</a>
</p>

<hr>
<h2 id='COV_SKYTRAIN_STATIONS'>A dataset City of Vancouver skytrain station locations</h2><span id='topic+COV_SKYTRAIN_STATIONS'></span>

<h3>Description</h3>

<p>A dataset City of Vancouver skytrain station locations
</p>


<h3>Author(s)</h3>

<p>City of Vancouver Open Data
</p>


<h3>References</h3>

<p><a href="https://opendata.vancouver.ca/explore/dataset/rapid-transit-stations/information/">https://opendata.vancouver.ca/explore/dataset/rapid-transit-stations/information/</a>
</p>

<hr>
<h2 id='dataset_attribution'>Get attribution for datasets</h2><span id='topic+dataset_attribution'></span>

<h3>Description</h3>

<p>Get attribution for datasets
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dataset_attribution(datasets)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dataset_attribution_+3A_datasets">datasets</code></td>
<td>
<p>Vector of dataset identifiers</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a string to be used as attribution for the given datasets.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Attribution string for the 2006 and 2016 census datasets
dataset_attribution(c('CA06','CA16'))
</code></pre>

<hr>
<h2 id='explore_census_regions'>Interactively browse Census variables and regions on Censusmapper.ca in a new browser window</h2><span id='topic+explore_census_regions'></span>

<h3>Description</h3>

<p>Finding the right Census variables or regions can be complicated.
<code>explore_census_vectors(dataset)</code> and <code>explore_census_regions(dataset)</code> will open a
new browser page or tab to an interactive Census variable and region exploration and selection
tool on the <a href="https://censusmapper.ca/api">Censusmapper.ca website</a>. Interactive
tools available for the CA16, CA11, CA06, and CA01 Census datasets and geographies.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>explore_census_regions(dataset = "CA16")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="explore_census_regions_+3A_dataset">dataset</code></td>
<td>
<p>The dataset to query for available vectors, e.g. <code>'CA16'</code>.
Interactive tools available for the CA16, CA11, CA06, and CA01 Census datasets and
geographies.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

explore_census_vectors(dataset = "CA16")

explore_census_regions(dataset = "CA11")


## End(Not run)
</code></pre>

<hr>
<h2 id='explore_census_vectors'>Interactively browse Census variables and regions on Censusmapper.ca in a new browser window</h2><span id='topic+explore_census_vectors'></span>

<h3>Description</h3>

<p>Finding the right Census variables or regions can be complicated.
<code>explore_census_vectors(dataset)</code> and <code>explore_census_regions(dataset)</code> will open a
new browser page or tab to an interactive Census variable and region exploration and selection
tool on the <a href="https://censusmapper.ca/api">Censusmapper.ca website</a>. Interactive
tools available for the CA16, CA11, CA06, and CA01 Census datasets and geographies.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>explore_census_vectors(dataset = "CA16")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="explore_census_vectors_+3A_dataset">dataset</code></td>
<td>
<p>The dataset to query for available vectors, e.g. <code>'CA16'</code>.
Interactive tools available for the CA16, CA11, CA06, and CA01 Census datasets and
geographies.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

explore_census_vectors(dataset = "CA16")

explore_census_regions(dataset = "CA11")


## End(Not run)
</code></pre>

<hr>
<h2 id='find_census_vectors'>Query the CensusMapper API for vectors using exact, semantic, or keyword search</h2><span id='topic+find_census_vectors'></span>

<h3>Description</h3>

<p>Query the available list of Census vectors based on their label and return
details including vector code. Default search behaviour expects an exact match, but
keyword or semantic searches can be used instead by setting <code>query_type='keyword'</code> or
<code>query_type = 'semantic'</code> instead. Keyword search is useful when looking to explore
Census vectors based on broad themes like &quot;income&quot; or &quot;language&quot;. Keyword search separates
the query into unigrams and returns Census vectors with matching words, ranked by incidence
of matches. Semantic search is designed for more precise searches while allowing room for error
for spelling or phrasing, as well as for finding closely related vector matches. Semantic search
separates the query into n-grams and relies on string distance measurement using a generalized
Levenshtein distance approach.
</p>
<p>Some census vectors return population counts segmented by <code>Female</code> and <code>Male</code> populations, in
addition to a total aggregate. By default, query matches will return matches for the <code>Total</code>
aggregation, but can optionally return only the <code>Female</code> or <code>Male</code> aggregations by adding
<code>type = 'female'</code> or <code>type = 'male'</code> as a parameter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_census_vectors(query, dataset, type = "all", query_type = "exact", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="find_census_vectors_+3A_query">query</code></td>
<td>
<p>The term or phrase to search for e.g. <code>'Oji-cree'</code>.
Search queries are case insensitive.</p>
</td></tr>
<tr><td><code id="find_census_vectors_+3A_dataset">dataset</code></td>
<td>
<p>The dataset to query for available vectors, e.g. <code>'CA16'</code>.
To see a list of available datasets: <code>list_census_datasets()</code></p>
</td></tr>
<tr><td><code id="find_census_vectors_+3A_type">type</code></td>
<td>
<p>One of <code>'all'</code>, <code>'total'</code>, <code>'male'</code> or <code>'female'</code>.
If specified, only return aggregations of specified 'type'. By default, only
the <code>'total'</code> aggregation will be returned.</p>
</td></tr>
<tr><td><code id="find_census_vectors_+3A_query_type">query_type</code></td>
<td>
<p>One of <code>exact</code>, <code>'semantic'</code> or <code>'keyword'</code>.
By default, assumes exact string matching, but the alternatives may be better
options in some cases. See description section for more details on query types.</p>
</td></tr>
<tr><td><code id="find_census_vectors_+3A_...">...</code></td>
<td>
<p>Other arguments passed to internal functions.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>find_census_vectors('Oji-cree', dataset = 'CA16', type = 'total', query_type = 'exact')

find_census_vectors('commuting duration', dataset = 'CA11', type = 'female', query_type = 'keyword')

find_census_vectors('after tax income', dataset = 'CA16', type = 'total', query_type = 'semantic')

## Not run: 
# This incorrect spelling will return a warning that no match was found,
# but will suggest trying semantic or keyword search.
find_census_vectors('Ojibwey', dataset = 'CA16', type = 'total')

# This will find near matches as well
find_census_vectors('Ojibwey', dataset = 'CA16', type = 'total', query_type = "semantic")

find_census_vectors('commute duration', dataset = 'CA16', type = 'female', query_type = 'keyword')

find_census_vectors('commute duration', dataset = 'CA11', type = 'all', query_type = 'keyword')

find_census_vectors('ukrainian origin', dataset = 'CA16', type = 'total', query_type = 'keyword')


## End(Not run)
</code></pre>

<hr>
<h2 id='get_census'>Access to Canadian census data through the CensusMapper API</h2><span id='topic+get_census'></span>

<h3>Description</h3>

<p>This function allows convenient access to Canadian census data and boundary
files through the CensusMapper API. An API key is required to retrieve data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_census(
  dataset,
  regions,
  level = NA,
  vectors = c(),
  geo_format = NA,
  resolution = "simplified",
  labels = "detailed",
  use_cache = TRUE,
  quiet = FALSE,
  api_key = Sys.getenv("CM_API_KEY")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_census_+3A_dataset">dataset</code></td>
<td>
<p>A CensusMapper dataset identifier.</p>
</td></tr>
<tr><td><code id="get_census_+3A_regions">regions</code></td>
<td>
<p>A named list of census regions to retrieve. Names must be valid census aggregation levels.</p>
</td></tr>
<tr><td><code id="get_census_+3A_level">level</code></td>
<td>
<p>The census aggregation level to retrieve, defaults to <code>"Regions"</code>. One of <code>"Regions"</code>, <code>"PR"</code>, <code>"CMA"</code>, <code>"CD"</code>, <code>"CSD"</code>, <code>"CT"</code>, <code>"DA"</code>, <code>"EA"</code> (for 1996), or <code>"DB"</code> (for 2001-2016).</p>
</td></tr>
<tr><td><code id="get_census_+3A_vectors">vectors</code></td>
<td>
<p>An R vector containing the CensusMapper variable names of the census variables to download. If no vectors are specified only geographic data will get downloaded.</p>
</td></tr>
<tr><td><code id="get_census_+3A_geo_format">geo_format</code></td>
<td>
<p>By default is set to <code>NA</code> and appends no geographic information. To include geographic information with census data, specify one of either <code>"sf"</code> to return an <code><a href="sf.html#topic+sf">sf</a></code> object (requires the <code>sf</code> package) or <code>"sp"</code> to return a <code><a href="sp.html#topic+SpatialPolygonsDataFrame-class">SpatialPolygonsDataFrame-class</a></code> object (requires the <code>rgdal</code> package). If user requests geo-spatial data and neither package is available, a context menu will prompt to install the <code>sf</code> package.</p>
</td></tr>
<tr><td><code id="get_census_+3A_resolution">resolution</code></td>
<td>
<p>Resolution of the geographic data. By default simplified geometries will be download. For lower level geometries like DB or DA this will be very close to the high resolution data.
Simplification generally increases as the geographic aggregation level increases.
If high resolution geometries are required
then this option can be set to 'high'. By default this setting is set to <code>'simplified'</code>.</p>
</td></tr>
<tr><td><code id="get_census_+3A_labels">labels</code></td>
<td>
<p>Set to &quot;detailed&quot; by default, but truncated Census variable names can be selected by setting labels = &quot;short&quot;. Use <code>label_vectors(...)</code> to return variable label information in detail.</p>
</td></tr>
<tr><td><code id="get_census_+3A_use_cache">use_cache</code></td>
<td>
<p>If set to TRUE (the default) data will be read from the local cache if available.</p>
</td></tr>
<tr><td><code id="get_census_+3A_quiet">quiet</code></td>
<td>
<p>When TRUE, suppress messages and warnings.</p>
</td></tr>
<tr><td><code id="get_census_+3A_api_key">api_key</code></td>
<td>
<p>An API key for the CensusMapper API. Defaults to <code>options()</code> and then the <code>CM_API_KEY</code> environment variable.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For help selecting regions and vectors, see <code><a href="#topic+list_census_regions">list_census_regions</a></code>
and <code><a href="#topic+list_census_vectors">list_census_vectors</a></code>, or check out the interactive selection
tool at <a href="https://censusmapper.ca/api">https://censusmapper.ca/api</a> by calling <code>explore_census_vectors()</code>
</p>


<h3>Source</h3>

<p>Census data and boundary geographies are reproduced and distributed on
an &quot;as is&quot; basis with the permission of Statistics Canada (Statistics Canada 1996; 2001; 2006; 2011; 2016).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Query the API for data on dwellings in Vancouver, at the census subdivision
# level:
## Not run: 
census_data &lt;- get_census(dataset='CA16', regions=list(CMA="59933"),
                          vectors=c("v_CA16_408","v_CA16_409","v_CA16_410"),
                          level='CSD')

# Query the API for data on dwellings in Vancouver, at the census subdivision
# level, and return the associated geography files in \code{sf} format:
census_data &lt;- get_census(dataset='CA16', regions=list(CMA="59933"),
                          vectors=c("v_CA16_408","v_CA16_409","v_CA16_410"),
                          level='CSD', geo_format = "sf")

# Make the same query, but this time drop descriptive vector names:
census_data &lt;- get_census(dataset='CA16', regions=list(CMA="59933"),
                          vectors=c("v_CA16_408","v_CA16_409","v_CA16_410"),
                          level='CSD', geo_format = "sf", labels="short")

# Get details for truncated vectors:
label_vectors(census_data)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_census_geometry'>Deprecated, use 'get_census' instead</h2><span id='topic+get_census_geometry'></span>

<h3>Description</h3>

<p>This function will be removed in future versions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_census_geometry(dataset, regions, level = NA, geo_format = "sf", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_census_geometry_+3A_dataset">dataset</code></td>
<td>
<p>A CensusMapper dataset identifier.</p>
</td></tr>
<tr><td><code id="get_census_geometry_+3A_regions">regions</code></td>
<td>
<p>A named list of census regions to retrieve. Names must be valid census aggregation levels.</p>
</td></tr>
<tr><td><code id="get_census_geometry_+3A_level">level</code></td>
<td>
<p>The census aggregation level to retrieve, defaults to <code>"Regions"</code>. One of <code>"Regions"</code>, <code>"PR"</code>, <code>"CMA"</code>, <code>"CD"</code>, <code>"CSD"</code>, <code>"CT"</code> or <code>"DA"</code>.</p>
</td></tr>
<tr><td><code id="get_census_geometry_+3A_geo_format">geo_format</code></td>
<td>
<p>By default is set to <code>NA</code> and appends no geographic information. To include geographic information with census data, specify one of either <code>"sf"</code> to return an <code><a href="sf.html#topic+sf">sf</a></code> object (requires the <code>sf</code> package) or <code>"sp"</code> to return a <code><a href="sp.html#topic+SpatialPolygonsDataFrame-class">SpatialPolygonsDataFrame-class</a></code> object (requires the <code>rgdal</code> package).</p>
</td></tr>
<tr><td><code id="get_census_geometry_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code>get_census</code>.</p>
</td></tr>
</table>


<h3>Source</h3>

<p>Census data and boundary geographies are reproduced and distributed on
an &quot;as is&quot; basis with the permission of Statistics Canada (Statistics Canada
2006; 2011; 2016).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Query the API for data geographies in Vancouver, at the census subdivision
# level:
## Not run: 
# Query the API for geographies in Vancouver, at the census subdivision
# level, and return the associated geography files in \code{sf} format:
census_data &lt;- get_census(dataset='CA16', regions=list(CMA="59933"),
                          level='CSD', geo_format = "sf")

## End(Not run)
</code></pre>

<hr>
<h2 id='get_intersecting_geometries'>Get identifiers for census regions intersecting a geometry</h2><span id='topic+get_intersecting_geometries'></span>

<h3>Description</h3>

<p>This function returns a list of regions that intersect a given geometry input. This list of regions can be used
directly to query census when one is interested in census data for a particular geographic region that does
not coincide with defined census geometries. The returned value can be used as the <code>regions</code>
parameter in <a href="#topic+get_census">get_census</a> to get corresponding census geographies and variables that cover the give geometry.
Input spatial objects can be any <code>sf</code> or <code>sfc</code> class objects such as <code>POINT</code>, <code>MULTIPOINT</code> or <code>POLYGON</code>.
</p>
<p>This function comes with CensusMapper API limits
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_intersecting_geometries(
  dataset,
  level,
  geometry,
  simplified = FALSE,
  use_cache = TRUE,
  quiet = FALSE,
  api_key = Sys.getenv("CM_API_KEY")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_intersecting_geometries_+3A_dataset">dataset</code></td>
<td>
<p>A CensusMapper dataset identifier.</p>
</td></tr>
<tr><td><code id="get_intersecting_geometries_+3A_level">level</code></td>
<td>
<p>The census aggregation level to retrieve. One of <code>"Regions"</code>, <code>"PR"</code>, <code>"CMA"</code>, <code>"CD"</code>, <code>"CSD"</code>, <code>"CT"</code>, <code>"DA"</code>, <code>"EA"</code> (for 1996 census), or <code>"DB"</code> (for 2001-2016 censuses)..</p>
</td></tr>
<tr><td><code id="get_intersecting_geometries_+3A_geometry">geometry</code></td>
<td>
<p>A valid <code>sf</code> or <code>sfc</code> class object. As long as the geometry is valid, any projection is accepted. Objects will be reprojected as server-side intersections use lat/lon projection.</p>
</td></tr>
<tr><td><code id="get_intersecting_geometries_+3A_simplified">simplified</code></td>
<td>
<p>If <code>TRUE</code> will return a region list compatible with <a href="#topic+get_census">get_census</a>, otherwise will return a character vector of matching region ids.</p>
</td></tr>
<tr><td><code id="get_intersecting_geometries_+3A_use_cache">use_cache</code></td>
<td>
<p>If set to <code>TRUE</code> (the default) data will be read from the local cache if available.</p>
</td></tr>
<tr><td><code id="get_intersecting_geometries_+3A_quiet">quiet</code></td>
<td>
<p>When TRUE, suppress messages and warnings.</p>
</td></tr>
<tr><td><code id="get_intersecting_geometries_+3A_api_key">api_key</code></td>
<td>
<p>An API key for the CensusMapper API. Defaults to <code>options()</code> and then the <code>CM_API_KEY</code> environment variable.</p>
</td></tr>
</table>


<h3>Source</h3>

<p>Census data and boundary geographies are reproduced and distributed on
an &quot;as is&quot; basis with the permission of Statistics Canada (Statistics Canada
1996; 2001; 2006; 2011; 2016).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# Example using a POINT-class object from a pair of lat/lon coordinates
point_geo &lt;- sf::st_sfc(sf::st_point(c(-123.25149, 49.27026)), crs=4326)
regions &lt;- get_intersecting_geometries(dataset = 'CA16', level = 'CT', geometry = point_geo)
census_data &lt;- get_census(dataset='CA16', regions=regions,
                          vectors=c("v_CA16_408","v_CA16_409","v_CA16_410"),
                          level='CT')

# Example using a POLYGON-class object from a bounding box with four coordinates
poly_geo &lt;- sf::st_as_sfc(sf::st_bbox(c(ymin = 49.25, ymax = 49.30,
                          xmin = -123.25, xmax = -123.30)), crs = 4326)
regions &lt;- get_intersecting_geometries(dataset = 'CA16', level = 'CT', geometry = poly_geo)
census_data &lt;- get_census(dataset='CA16', regions=regions,
                         vectors=c("v_CA16_408","v_CA16_409","v_CA16_410"), level='CT')


## End(Not run)
</code></pre>

<hr>
<h2 id='get_recalled_database'>Get metadata for recalled data</h2><span id='topic+get_recalled_database'></span>

<h3>Description</h3>

<p>Grabs recall data from server if needed and returns list of recalled data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_recalled_database(refresh = FALSE, warn_only_once = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_recalled_database_+3A_refresh">refresh</code></td>
<td>
<p>Will force refresh of recalled database</p>
</td></tr>
<tr><td><code id="get_recalled_database_+3A_warn_only_once">warn_only_once</code></td>
<td>
<p>Will only warn on first run, 'FALSE' by default</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tibble with rows describing recalled data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
get_recalled_database()

## End(Not run)
</code></pre>

<hr>
<h2 id='get_statcan_geo_suite'>Read the geosuite data</h2><span id='topic+get_statcan_geo_suite'></span>

<h3>Description</h3>

<p>Reads the geosuite data for the given level and census year. Data gets cached after first download if the
cancensus cache path has been set. For older
years 'get_statcan_geographic_attributes()' can fill in most of the information
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_statcan_geo_suite(level, census_year = "2021", refresh = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_statcan_geo_suite_+3A_level">level</code></td>
<td>
<p>geographic level to return the data for, valid choices are
&quot;DB&quot;, &quot;DA&quot;, &quot;ADA&quot;, &quot;CT&quot;, &quot;CSD&quot;, &quot;CMA&quot;, &quot;CD&quot;, &quot;PR&quot;, &quot;FED&quot;, &quot;DPL&quot;, &quot;ER&quot;, &quot;PN&quot;, &quot;POPCTR&quot;</p>
</td></tr>
<tr><td><code id="get_statcan_geo_suite_+3A_census_year">census_year</code></td>
<td>
<p>census year to get the data for, right now only 2021 is supported</p>
</td></tr>
<tr><td><code id="get_statcan_geo_suite_+3A_refresh">refresh</code></td>
<td>
<p>(logical) refresh the cache if true</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tibble with the geosuite data
</p>


<h3>Examples</h3>

<pre><code class='language-R'># list add the cached census data
## Not run: 
get_statcan_geo_suite("DA","2021")

## End(Not run)
</code></pre>

<hr>
<h2 id='get_statcan_geographic_attributes'>Read the Geographic Attributes File</h2><span id='topic+get_statcan_geographic_attributes'></span>

<h3>Description</h3>

<p>Reads the Geographies Attributes File for the given census year. The table contains
the information on how all the geographic levels are related for each area, and population, dwelling and household counts.
Data gets cached after first download if the
cancensus cache path has been set. A reference guide is available
at https://www150.statcan.gc.ca/n1/en/catalogue/92-151-G2021001
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_statcan_geographic_attributes(census_year = "2021", refresh = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_statcan_geographic_attributes_+3A_census_year">census_year</code></td>
<td>
<p>census year to get the data for, right now only 2006, 2011, 2016, 2021 are supported</p>
</td></tr>
<tr><td><code id="get_statcan_geographic_attributes_+3A_refresh">refresh</code></td>
<td>
<p>(logical) refresh the cache if true</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tibble with the relationship data
</p>


<h3>Examples</h3>

<pre><code class='language-R'># list add the cached census data
## Not run: 
get_statcan_geographic_attributes("2021")

## End(Not run)
</code></pre>

<hr>
<h2 id='get_statcan_geographies'>Read the geosuite data</h2><span id='topic+get_statcan_geographies'></span>

<h3>Description</h3>

<p>Reads the original unprocessed geographic boundary files from Statistics Canada
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_statcan_geographies(
  census_year,
  level,
  type = "cartographic",
  cache_path = NULL,
  timeout = 1000,
  refresh = FALSE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_statcan_geographies_+3A_census_year">census_year</code></td>
<td>
<p>census year to get the data for, right now only 2021 is supported</p>
</td></tr>
<tr><td><code id="get_statcan_geographies_+3A_level">level</code></td>
<td>
<p>geographic level to return the data for, valid choices are
&quot;PR&quot;,&quot;CD&quot;,&quot;CMACA&quot;,&quot;CSD&quot;,&quot;CT&quot;,&quot;ADA&quot;,&quot;DA&quot;,&quot;ER&quot;,&quot;FED&quot;,&quot;DPL&quot;,&quot;POPCNTR&quot;, &quot;FSA&quot;</p>
</td></tr>
<tr><td><code id="get_statcan_geographies_+3A_type">type</code></td>
<td>
<p>type of geographic data, valid choices area &quot;cartographic&quot; or &quot;digital&quot;</p>
</td></tr>
<tr><td><code id="get_statcan_geographies_+3A_cache_path">cache_path</code></td>
<td>
<p>optional path to cache the data. If the cancensus cache path is set the geographic data gets
cached in the &quot;geographies&quot; subdirectory of the cancensus cache path.</p>
</td></tr>
<tr><td><code id="get_statcan_geographies_+3A_timeout">timeout</code></td>
<td>
<p>optional timeout parameter, adjust as needed if the data download times out when using slow connections</p>
</td></tr>
<tr><td><code id="get_statcan_geographies_+3A_refresh">refresh</code></td>
<td>
<p>(logical) refresh the cache if true</p>
</td></tr>
<tr><td><code id="get_statcan_geographies_+3A_quiet">quiet</code></td>
<td>
<p>(logical) suppress messages if 'TRUE'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a spatial dataframe with the geographic data
</p>


<h3>Examples</h3>

<pre><code class='language-R'># get the digital geographic boundaries for provinces and territories
## Not run: 
get_statcan_geographies(census_year="2021",level="PR",type="digital")

## End(Not run)
</code></pre>

<hr>
<h2 id='get_statcan_geography_relationships'>Read the Dissemination Geographies Relationship File</h2><span id='topic+get_statcan_geography_relationships'></span>

<h3>Description</h3>

<p>Reads the Dissemination Geographies Relationship File for the given census year. The table contains
the information on how all the geographic levels are related for each area. Data gets cached after first download if the
cancensus cache path has been set. A reference guide is available
at https://www150.statcan.gc.ca/n1/en/catalogue/982600032021001
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_statcan_geography_relationships(census_year = "2021", refresh = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_statcan_geography_relationships_+3A_census_year">census_year</code></td>
<td>
<p>census year to get the data for, right now only 2021 is supported, for older
years 'get_statcan_geographic_attributes()' can fill in most of the information</p>
</td></tr>
<tr><td><code id="get_statcan_geography_relationships_+3A_refresh">refresh</code></td>
<td>
<p>(logical) refresh the cache if true</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tibble with the relationship data
</p>


<h3>Examples</h3>

<pre><code class='language-R'># list add the cached census data
## Not run: 
get_statcan_geography_relationships("2021")

## End(Not run)
</code></pre>

<hr>
<h2 id='get_statcan_wds_data'>Query the StatCan WDS for data</h2><span id='topic+get_statcan_wds_data'></span>

<h3>Description</h3>

<p>Get official census data from Statistics Canada for a given set of DGUIDs. Only available for the 2021 census. The
downloaded data gets enriched by geographic and characteristic names based on metadata obtained via 'get_statcan_wds_metadata()'.
Data is cached for the duration of the R session.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_statcan_wds_data(
  DGUIDs,
  members = NULL,
  version = NULL,
  gender = "All",
  language = "en",
  refresh = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_statcan_wds_data_+3A_dguids">DGUIDs</code></td>
<td>
<p>census year to get the data for, right now only 2021 is supported. Valid DGUIDs for a given geographic
level can be queried via 'get_statcan_wds_metadata()'.</p>
</td></tr>
<tr><td><code id="get_statcan_wds_data_+3A_members">members</code></td>
<td>
<p>list of Member IOs to download data for. By default all characteristics are downloaded. Valid
Member IDs and their descriptions can be queried via the 'get_statcan_wds_metadata()' call.</p>
</td></tr>
<tr><td><code id="get_statcan_wds_data_+3A_version">version</code></td>
<td>
<p>optionally specify a version of the data to download. For example, for FED level data, version 1.3 will
access the 2013 represenation order, whereas version 2.0 will access the 2023 representation order. By default the latest
available version is accessed.</p>
</td></tr>
<tr><td><code id="get_statcan_wds_data_+3A_gender">gender</code></td>
<td>
<p>optionally query data for only one gender. By default this queries data for all genders, possible
values are &quot;Total&quot;, &quot;Male&quot;, &quot;Female&quot; to only query total data, or for males only or for females only.</p>
</td></tr>
<tr><td><code id="get_statcan_wds_data_+3A_language">language</code></td>
<td>
<p>specify language for geography and characteristic names that get added, valid choices are &quot;en&quot; and &quot;fr&quot;</p>
</td></tr>
<tr><td><code id="get_statcan_wds_data_+3A_refresh">refresh</code></td>
<td>
<p>default is 'FALSE' will refresh the temporary cache if 'TRUE'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tibble with the enriched census data
</p>


<h3>Examples</h3>

<pre><code class='language-R'># get data for federal electoral district 2013A000459021
## Not run: 
get_statcan_wds_data(DGUIDs="2013A000459021",level="FED")

## End(Not run)
</code></pre>

<hr>
<h2 id='get_statcan_wds_metadata'>Query the StatCan WDS for metadata</h2><span id='topic+get_statcan_wds_metadata'></span>

<h3>Description</h3>

<p>Get official metadata information from Statistics Canada for a given geographic level. Only available for the 2021 census.
Data is cached for the duration of the R session.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_statcan_wds_metadata(census_year, level, version = NULL, refresh = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_statcan_wds_metadata_+3A_census_year">census_year</code></td>
<td>
<p>census year to get the data for, right now only 2021 is supported</p>
</td></tr>
<tr><td><code id="get_statcan_wds_metadata_+3A_level">level</code></td>
<td>
<p>geographic level to return the data for, valid choices are
&quot;PR&quot;,&quot;CD&quot;,&quot;CMACA&quot;,&quot;CSD&quot;,&quot;CT&quot;,&quot;ADA&quot;,&quot;DA&quot;,&quot;ER&quot;,&quot;FED&quot;,&quot;DPL&quot;,&quot;POPCNTR&quot;, &quot;FSA&quot;</p>
</td></tr>
<tr><td><code id="get_statcan_wds_metadata_+3A_version">version</code></td>
<td>
<p>optionally specify a version of the data to download. For example, for FED level data, version 1.3 will
access the 2013 represenation order, whereas version 2.0 will access the 2023 representation order. By default the latest
available version is accessed.</p>
</td></tr>
<tr><td><code id="get_statcan_wds_metadata_+3A_refresh">refresh</code></td>
<td>
<p>default is 'FALSE' will refresh the temporary cache if 'TRUE'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tibble with the metadata
</p>


<h3>Examples</h3>

<pre><code class='language-R'># get metadata for federal electoral districts
## Not run: 
get_statcan_wds_metadata(census_year="2021",level="FED")

## End(Not run)
</code></pre>

<hr>
<h2 id='label_vectors'>Return Census variable names and labels as a tidy data frame</h2><span id='topic+label_vectors'></span>

<h3>Description</h3>

<p>Return Census variable names and labels as a tidy data frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>label_vectors(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="label_vectors_+3A_x">x</code></td>
<td>
<p>A data frame, <code>sp</code> or <code>sf</code> object returned from
<code>get_census</code> or similar.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with a column <code>variable</code> containing the truncated
variable name, and a column <code>label</code> describing it.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Query census data with truncated labels:
label_data &lt;- get_census(dataset='CA16', regions=list(CMA="59933"),
                          vectors=c("v_CA16_408","v_CA16_409","v_CA16_410"),
                          level='CSD', geo_format = "sf", labels="short")

# Get details for truncated vectors:
label_vectors(label_data)

## End(Not run)
</code></pre>

<hr>
<h2 id='list_cancensus_cache'>List cached files</h2><span id='topic+list_cancensus_cache'></span>

<h3>Description</h3>

<p>Lists all cached data and metadata if available
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_cancensus_cache()
</code></pre>


<h3>Value</h3>

<p>tibble with metadata on cached data
</p>


<h3>Examples</h3>

<pre><code class='language-R'># list add the cached census data
list_cancensus_cache()

</code></pre>

<hr>
<h2 id='list_census_datasets'>Query the CensusMapper API for available datasets.</h2><span id='topic+list_census_datasets'></span>

<h3>Description</h3>

<p>Query the CensusMapper API for available datasets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_census_datasets(use_cache = TRUE, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="list_census_datasets_+3A_use_cache">use_cache</code></td>
<td>
<p>If set to TRUE (the default), data will be read from a temporary local cache for the
duration of the R session, if
available. If set to FALSE, query the API for the data, and
refresh the temporary cache with the result.</p>
</td></tr>
<tr><td><code id="list_census_datasets_+3A_quiet">quiet</code></td>
<td>
<p>When TRUE, suppress messages and warnings.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame with a column <code>dataset</code> containing the code for the
dataset, a column <code>description</code> describing it, a <code>geo_dataset</code> column
identifying the geography dataset the data is based on, a <code>attribution</code> column
with an attribution string, a <code>reference</code> column with a reference identifier, and
a <code>reference_url</code> column with a link to reference materials.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# List available datasets in CensusMapper
list_census_datasets()
</code></pre>

<hr>
<h2 id='list_census_regions'>Query the CensusMapper API for available regions in a given dataset.</h2><span id='topic+list_census_regions'></span>

<h3>Description</h3>

<p>Query the CensusMapper API for available regions in a given dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_census_regions(dataset, use_cache = TRUE, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="list_census_regions_+3A_dataset">dataset</code></td>
<td>
<p>The dataset to query for available regions, e.g.
<code>"CA16"</code>.</p>
</td></tr>
<tr><td><code id="list_census_regions_+3A_use_cache">use_cache</code></td>
<td>
<p>If set to TRUE (the default), data will be read from a local cache
that is maintained for the duration of the R session, if
available. If set to FALSE, query the API for the data, and
refresh the local cache with the result.</p>
</td></tr>
<tr><td><code id="list_census_regions_+3A_quiet">quiet</code></td>
<td>
<p>When TRUE, suppress messages and warnings.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame with the following columns:
</p>

<dl>
<dt><code>region</code></dt><dd><p>The region identifier.</p>
</dd>
<dt><code>name</code></dt><dd><p>The name of that region.</p>
</dd>
<dt><code>level</code></dt><dd><p>The census aggregation level of that region.</p>
</dd>
<dt><code>pop</code></dt><dd><p>The population of that region.</p>
</dd>
<dt><code>municipal_status</code></dt><dd><p>Additional identifiers to distinguish the
municipal status of census subdivisions.</p>
</dd>
<dt><code>CMA_UID</code></dt><dd><p>The identifier for the Census Metropolitan Area the region is in (if any).</p>
</dd>
<dt><code>CD_UID</code></dt><dd><p>The identifier for the Census District the region is in (if any).</p>
</dd>
<dt><code>PR_UID</code></dt><dd><p>The identifier for the Province the region is in (if unique).</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
list_census_regions('CA16')

## End(Not run)
</code></pre>

<hr>
<h2 id='list_census_vectors'>Query the CensusMapper API for available vectors for a given dataset.</h2><span id='topic+list_census_vectors'></span>

<h3>Description</h3>

<p>Query the CensusMapper API for available vectors for a given dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_census_vectors(dataset, use_cache = TRUE, quiet = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="list_census_vectors_+3A_dataset">dataset</code></td>
<td>
<p>The dataset to query for available vectors, e.g.
<code>"CA16"</code>.</p>
</td></tr>
<tr><td><code id="list_census_vectors_+3A_use_cache">use_cache</code></td>
<td>
<p>If set to TRUE (the default), data will be read from a local cache
that is maintained for the duration of the R session, if
available. If set to FALSE, query the API for the data, and
refresh the local cache with the result.</p>
</td></tr>
<tr><td><code id="list_census_vectors_+3A_quiet">quiet</code></td>
<td>
<p>When FALSE, shows messages and warnings. Set to TRUE by default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame detailing the available Census vectors (i.e. variables) for a given Census
dataset. This data frame has columns <code>vector</code> containing the short code for the
variable, <code>type</code> describing whether it's a female, male, or total aggregate, <code>label</code>
indicating the name of the variable, <code>units</code> indicating whether the value represents a
numeric integer, percentage, dollar figure, or ratio, <code>parent_vector</code> to show hierarchical
relationship, <code>aggregation</code> indicating whether the value is additive or a transformation,
and a column <code>details</code> with a detailed description of the variable generated by traversing
all labels within its hierarchical structure.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# List all vectors for a given Census dataset in CensusMapper
list_census_vectors('CA16')

## End(Not run)
</code></pre>

<hr>
<h2 id='list_recalled_cached_data'>List recalled data stored in local cache</h2><span id='topic+list_recalled_cached_data'></span>

<h3>Description</h3>

<p>Checks the local cached database for recalled data and lists all recalled cached entries
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_recalled_cached_data(
  cached_data = list_cancensus_cache(),
  warn_only_once = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="list_recalled_cached_data_+3A_cached_data">cached_data</code></td>
<td>
<p>List of locally cached data to check for recall, default is 'list_cancensus_cache()' in which case
it will get checked against all locally cached data</p>
</td></tr>
<tr><td><code id="list_recalled_cached_data_+3A_warn_only_once">warn_only_once</code></td>
<td>
<p>Will only warn on first run during each session, 'FALSE' by default</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tibble with rows describing locally cached recalled data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
list_recalled_cached_data()

## End(Not run)
</code></pre>

<hr>
<h2 id='parent_census_vectors'>List all parent variables from vector hierarchies given either a list of Census
variables returned by
<code>list_census_vectors</code>, <code>search_census_vectors</code>, <code>find_census_vectors</code>, or a direct string reference to the vector code.</h2><span id='topic+parent_census_vectors'></span>

<h3>Description</h3>

<p>List all parent variables from vector hierarchies given either a list of Census
variables returned by
<code>list_census_vectors</code>, <code>search_census_vectors</code>, <code>find_census_vectors</code>, or a direct string reference to the vector code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parent_census_vectors(vector_list)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="parent_census_vectors_+3A_vector_list">vector_list</code></td>
<td>
<p>The list of vectors to be used, either a character vector or a filtered tibble
as returned from <code>list_census_vectors</code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Query parent vectors directly using vector identifier
parent_census_vectors("v_CA16_2519")
## Not run: 
# Example using multiple vectors coerced into a list
parent_census_vectors(c("v_CA16_2519","v_CA16_2520","v_CA16_2521"))

# or, equivalently
selected_vectors &lt;- c("v_CA16_2519","v_CA16_2520","v_CA16_2521")
parent_census_vectors(selected_vectors)

# Example using dplyr and piped arguments
library(dplyr, warn.conflicts = FALSE)

list_census_vectors("CA16") %&gt;%
  filter(vector == "v_CA16_2519") %&gt;%
  parent_census_vectors()

## End(Not run)
</code></pre>

<hr>
<h2 id='remove_from_cancensus_cache'>Remove cached files</h2><span id='topic+remove_from_cancensus_cache'></span>

<h3>Description</h3>

<p>Remove cached data for paths given
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove_from_cancensus_cache(paths)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="remove_from_cancensus_cache_+3A_paths">paths</code></td>
<td>
<p>list of paths to remove, as returned by the path column in 'list_cancensus_cache'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>freed-up disk space
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# remove the first cached dataset
cache_data &lt;- list_cancensus_cache()

remove_from_cancensus_cache(cache_data$path[1])

## End(Not run)
</code></pre>

<hr>
<h2 id='remove_recalled_cached_data'>Remove recalled data from local cache</h2><span id='topic+remove_recalled_cached_data'></span>

<h3>Description</h3>

<p>Checks the local cached database for recalled data and removes cached data that has been recalled
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove_recalled_cached_data()
</code></pre>


<h3>Value</h3>

<p>Storage size of removed locally cached data that got freed up in number of bytes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
remove_recalled_cached_data()

## End(Not run)
</code></pre>

<hr>
<h2 id='search_census_regions'>Query the CensusMapper API for regions with names matching a searchterm.</h2><span id='topic+search_census_regions'></span>

<h3>Description</h3>

<p>Runs a query against the CensusMapper API to retrieve region data with
names matching specific queries. Users can optionally specify the target geography level
(e.g. <code>level = 'CMA'</code>, <code>level = 'CSD'</code>, etc.). Alternatively, calling
<code>explore_census_vectors()</code> will launch the interactive region selection tool on
the CensusMapper site in a new web page or tab.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>search_census_regions(searchterm, dataset, level = NA, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="search_census_regions_+3A_searchterm">searchterm</code></td>
<td>
<p>The term to search for e.g. <code>"Victoria"</code>.
Search terms are case insensitive. If unable to find a given search term,
this function will suggest the correct spelling to use when possible.</p>
</td></tr>
<tr><td><code id="search_census_regions_+3A_dataset">dataset</code></td>
<td>
<p>The dataset to query for available regions, e.g.
<code>"CA16"</code>.</p>
</td></tr>
<tr><td><code id="search_census_regions_+3A_level">level</code></td>
<td>
<p>One of <code>NA</code>, <code>'C'</code>, <code>'PR'</code>, <code>'CMA'</code>, <code>'CD'</code>, or <code>'CSD'</code>.
If specified, only return variables of specified 'level'.</p>
</td></tr>
<tr><td><code id="search_census_regions_+3A_...">...</code></td>
<td>
<p>Further arguments passed on to <code><a href="#topic+list_census_regions">list_census_regions</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A census region list of the same format as 'list_census_regions()' containing the matches.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# This will return a warning that no match was found, but will suggest similar named regions.
search_census_regions('Victorea', 'CA16')

# This will limit region results to only include CMA level regions
search_census_regions('Victoria', 'CA16', level = "CMA")

## End(Not run)
</code></pre>

<hr>
<h2 id='search_census_vectors'>Query the CensusMapper API for vectors with descriptions matching a search term or phrase (deprecated)</h2><span id='topic+search_census_vectors'></span>

<h3>Description</h3>

<p>Query the CensusMapper API for vectors with descriptions matching a search term or phrase (deprecated)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>search_census_vectors(searchterm, dataset, type = NA, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="search_census_vectors_+3A_searchterm">searchterm</code></td>
<td>
<p>The term or phrase to search for e.g. <code>"Ojibway"</code>.
Search terms are case insensitive. If unable to find a given string,
this function will suggest similarly named objects.</p>
</td></tr>
<tr><td><code id="search_census_vectors_+3A_dataset">dataset</code></td>
<td>
<p>The dataset to query for available vectors, e.g.
<code>"CA16"</code>.</p>
</td></tr>
<tr><td><code id="search_census_vectors_+3A_type">type</code></td>
<td>
<p>One of <code>NA</code>, <code>'Total'</code>, <code>'Male'</code> or <code>'Female'</code>.
If specified, only return variables of specified 'type'.</p>
</td></tr>
<tr><td><code id="search_census_vectors_+3A_...">...</code></td>
<td>
<p>Further arguments passed on to <code><a href="#topic+list_census_vectors">list_census_vectors</a></code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>search_census_vectors('Ojibway', 'CA16')
## Not run: 
# This will return a warning that no match was found, but will suggest similar terms.
search_census_vectors('Ojibwe', 'CA16', 'Total')

## End(Not run)
</code></pre>

<hr>
<h2 id='set_cancensus_api_key'>Set Censusmapper API key</h2><span id='topic+set_cancensus_api_key'></span>

<h3>Description</h3>

<p>Cancensus requires a free Censusmapper API key to retrieve data. This function helps set the key for either the duration of the session (default) or permanently for use across sessions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_cancensus_api_key(key, overwrite = FALSE, install = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_cancensus_api_key_+3A_key">key</code></td>
<td>
<p>a Censusmapper API key. For more information on keys see the <a href="https://mountainmath.github.io/cancensus/index.html#api-key">API key section</a></p>
</td></tr>
<tr><td><code id="set_cancensus_api_key_+3A_overwrite">overwrite</code></td>
<td>
<p>Option to overwrite any existing Censusmapper keys already stored locally.</p>
</td></tr>
<tr><td><code id="set_cancensus_api_key_+3A_install">install</code></td>
<td>
<p>Option to install permanently for use across sessions.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
set_cancensus_api_key("YOUR_CM_API_KEY")

# This will set the key permanently until overwritten again
set_cancensus_api_key("YOUR_CM_API_KEY", install = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='set_cancensus_cache_path'>Set persistent cancensus cache location</h2><span id='topic+set_cancensus_cache_path'></span>

<h3>Description</h3>

<p>Cancensus provides session caching for retrieved data to increase speeds and reduce API usage. This function will create a persistent cache across sessions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_cancensus_cache_path(cache_path, overwrite = FALSE, install = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_cancensus_cache_path_+3A_cache_path">cache_path</code></td>
<td>
<p>a local directory to use for saving cached data</p>
</td></tr>
<tr><td><code id="set_cancensus_cache_path_+3A_overwrite">overwrite</code></td>
<td>
<p>Option to overwrite any existing cache path already stored locally.</p>
</td></tr>
<tr><td><code id="set_cancensus_cache_path_+3A_install">install</code></td>
<td>
<p>Option to install permanently for use across sessions.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
set_cancensus_cache_path("~/cancensus_cache")

# This will set the cache path permanently until overwritten again
set_cancensus_cache_path("~/cancensus_cache", install = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='show_cancensus_api_key'>View saved Censusmapper API key</h2><span id='topic+show_cancensus_api_key'></span>

<h3>Description</h3>

<p>View saved API key'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_cancensus_api_key()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>show_cancensus_api_key()
</code></pre>

<hr>
<h2 id='show_cancensus_cache_path'>View saved cache directory path</h2><span id='topic+show_cancensus_cache_path'></span>

<h3>Description</h3>

<p>View saved cache path'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_cancensus_cache_path()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>show_cancensus_cache_path()
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
