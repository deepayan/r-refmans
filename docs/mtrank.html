<!DOCTYPE html><html lang="en"><head><title>Help for package mtrank</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mtrank}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#mtrank-package'><p>mtrank: Brief overview</p></a></li>
<li><a href='#antidepressants'><p>Network meta-analysis for major depressive disorder</p></a></li>
<li><a href='#diabetes'><p>Network meta-analysis studying the incidence of diabetes</p></a></li>
<li><a href='#forest.mtrank'><p>Forest plot of ability estimates produced with <code>mtrank</code></p></a></li>
<li><a href='#forest.tcc'><p>Forest plot showing study-specific preferences or ties according to</p>
treatment choice criterion</a></li>
<li><a href='#mtrank'><p>Estimate the treatment hierarchy in network meta-analysis using a</p>
probabilistic ranking model</a></li>
<li><a href='#paired_pref'><p>Calculate pairwise probabilities for <code>mtrank</code> object</p></a></li>
<li><a href='#pp2long'><p>Auxiliary function to transform data from paired-preference to</p>
long-arm format</a></li>
<li><a href='#tcc'><p>Transform meta-analysis data from long or wide arm-based format into</p>
paired-preference format</a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Ranking using Probabilistic Models and Treatment Choice Criteria</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1-1</td>
</tr>
<tr>
<td>Date:</td>
<td>2025-02-26</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0), meta (&ge; 8.0-2), netmeta (&ge; 3.0-2)</td>
</tr>
<tr>
<td>Imports:</td>
<td>PlackettLuce, dplyr, magrittr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown, knitr</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Theodoros Evrenoglou &lt;theodoros.evrenoglou@uniklinik-freiburg.de&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/TEvrenoglou/mtrank">https://github.com/TEvrenoglou/mtrank</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Implementation of a novel frequentist approach to produce clinically relevant treatment hierarchies in network meta-analysis. The method is based on treatment choice criteria (TCC) and probabilistic ranking models, as described by Evrenoglou et al. (2024) &lt;<a href="https://doi.org/10.48550%2FarXiv.2406.10612">doi:10.48550/arXiv.2406.10612</a>&gt;. The TCC are defined using a rule based on the minimal clinically important difference. Using the defined TCC, the study-level data (i.e., treatment effects and standard errors) are first transformed into a preference format, indicating either a treatment preference (e.g., treatment A &gt; treatment B) or a tie (treatment A = treatment B). The preference data are then synthesized using a probabilistic ranking model, which estimates the latent ability parameter of each treatment and produces the final treatment hierarchy. This parameter represents each treatment’s ability to outperform all the other competing treatments in the network. Consequently, larger ability estimates indicate higher positions in the ranking list.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-26 10:55:06 UTC; sc</td>
</tr>
<tr>
<td>Author:</td>
<td>Theodoros Evrenoglou
    <a href="https://orcid.org/0000-0003-3336-8058"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Guido Schwarzer <a href="https://orcid.org/0000-0001-6214-9087"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-02-26 11:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='mtrank-package'>mtrank: Brief overview</h2><span id='topic+mtrank-package'></span>

<h3>Description</h3>

<p>R package <b>mtrank</b> enables the production of clinically relevant
treatment hierarchies in network meta-analysis using a novel frequentist
approach based on treatment choice criteria (TCC) and probabilistic
ranking models, as described by Evrenoglou et al. (2024). The TCC are defined
using a rule based on the minimal clinically important difference. Using the
defined TCC, the study-level data (i.e., treatment effects and standard
errors) are first transformed into a preference format, indicating either a
treatment preference (e.g., treatment A &gt; treatment B) or a tie (treatment A
= treatment B). The preference data are then synthesized using a
probabilistic ranking model, which estimates the latent ability parameter
of each treatment and produces the final treatment hierarchy. This parameter
represents each treatment’s ability to outperform all the other competing
treatments in the network. Consequently, larger ability estimates indicate
higher positions in the ranking list.
</p>


<h3>Details</h3>

<p>The R package <b>mtrank</b> provides the following functions:
</p>

<ul>
<li><p> Function <code><a href="#topic+tcc">tcc</a></code> defines the TCC and transforms the
study-specific relative treatment effects into a preference format.
</p>
</li>
<li><p> Function <code><a href="#topic+mtrank">mtrank</a></code> synthesizes the output of the
<code><a href="#topic+tcc">tcc</a></code> function and estimates the final treatment ability.
</p>
</li>
<li><p> Forest plots are created either for the results of the
TCC (<code><a href="#topic+forest.tcc">forest.tcc</a></code>) or the final ability estimates
(<code><a href="#topic+forest.mtrank">forest.mtrank</a></code>).
</p>
</li>
<li><p> Function <code><a href="#topic+paired_pref">paired_pref</a></code> uses the ability estimates
obtained from <code><a href="#topic+mtrank">mtrank</a></code> to calculate pairwise probabilities
that any treatment 'A' can be better, equal, or worse than any other
treatment 'B' in the network.
</p>
</li></ul>

<p>Type <code>help(package = "mtrank")</code> for a listing of R functions
available in <b>mtrank</b>.
</p>
<p>Type <code>citation("mtrank")</code> on how to cite <b>mtrank</b>
in publications.
</p>
<p>To report problems and bugs, please send an email to Theodoros
Evrenoglou &lt;theodoros.evrenoglou@uniklinik-freiburg.de&gt;.
</p>
<p>The development version of <b>mtrank</b> is available on GitHub
<a href="https://github.com/TEvrenoglou/mtrank">https://github.com/TEvrenoglou/mtrank</a>.
</p>


<h3>Author(s)</h3>

<p>Theodoros Evrenoglou &lt;theodoros.evrenoglou@uniklinik-freiburg.de&gt;,
Guido Schwarzer &lt;guido.schwarzer@uniklinik-freiburg.de&gt;
</p>


<h3>References</h3>

<p>Evrenoglou T, Nikolakopoulou A, Schwarzer G, Rücker G, Chaimani A (2024):
Producing treatment hierarchies in network meta-analysis using probabilistic
models and treatment-choice criteria.
<a href="https://arxiv.org/abs/2406.10612">https://arxiv.org/abs/2406.10612</a>
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/TEvrenoglou/mtrank">https://github.com/TEvrenoglou/mtrank</a>
</p>
</li></ul>


<hr>
<h2 id='antidepressants'>Network meta-analysis for major depressive disorder</h2><span id='topic+antidepressants'></span>

<h3>Description</h3>

<p>Network meta-analysis comparing antidepressants in patients with major
depressive disorder.
</p>


<h3>Format</h3>

<p>A data frame with the following columns:
</p>

<table>
<tr>
 <td style="text-align: right;">
<b><em>studyid</em></b></td><td style="text-align: left;"> study id </td>
</tr>
<tr>
 <td style="text-align: right;">
<b><em>drug_name</em></b></td><td style="text-align: left;"> antidepressant name </td>
</tr>
<tr>
 <td style="text-align: right;">
<b><em>ntotal</em></b></td><td style="text-align: left;"> number of randomized patients in treatment arm </td>
</tr>
<tr>
 <td style="text-align: right;">
<b><em>responders</em></b></td><td style="text-align: left;"> number of responders
</td>
</tr>

</table>



<h3>Source</h3>

<p>Cipriani A, Furukawa T, Salanti G, Chaimani A, et al. (2018):
Comparative efficacy and acceptability of 21 antidepressant drugs 
for the acute treatment of adults with major depressive 
disorder: a systematic review and network meta-analysis
<em>Lancet</em>,
<b>391</b>, 1357&ndash;1366
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mtrank">mtrank</a></code>, <code><a href="#topic+tcc">tcc</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(antidepressants)
#
ranks &lt;- tcc(treat = drug_name, studlab = studyid,
  event = responders, n = ntotal, data = antidepressants,
  mcid = 1.25, sm = "OR", small.values = "undesirable")
# Visualize treatment choice criteron for treatment "escitalopram"  
forest(ranks, treat = "escitalopram")
# Fit the model
fit &lt;- mtrank(ranks)
# Visualize the results
forest(fit)
# Calculate pairwise probabilities
paired_pref(fit, type = "better",
  treat1 = "bupropion", treat2 = "escitalopram")



# Same results using pairwise object as input to tcc()
# (and running a network meta-analysis)
#
pw &lt;- pairwise(treat = drug_name, studlab = studyid,
  event = responders, n = ntotal, data = antidepressants,
  sm = "OR")
#
netmeta(pw)
#
ranks2 &lt;- tcc(pw, mcid = 1.25, small.values = "undesirable")
#
fit2 &lt;- mtrank(ranks2)
#
paired_pref(fit2, type = "better",
  treat1 = "bupropion", treat2 = "escitalopram")

</code></pre>

<hr>
<h2 id='diabetes'>Network meta-analysis studying the incidence of diabetes</h2><span id='topic+diabetes'></span>

<h3>Description</h3>

<p>Network meta-analysis comparing six antihypertensive drugs against the
incidence of diabetes.
</p>


<h3>Format</h3>

<p>A data frame with the following columns:
</p>

<table>
<tr>
 <td style="text-align: right;">
<b><em>study</em></b></td><td style="text-align: left;"> study label </td>
</tr>
<tr>
 <td style="text-align: right;">
<b><em>id</em></b></td><td style="text-align: left;"> study id </td>
</tr>
<tr>
 <td style="text-align: right;">
<b><em>t</em></b></td><td style="text-align: left;"> treatment label </td>
</tr>
<tr>
 <td style="text-align: right;">
<b><em>r</em></b></td><td style="text-align: left;"> number of events </td>
</tr>
<tr>
 <td style="text-align: right;">
<b><em>n</em></b></td><td style="text-align: left;"> group sample size </td>
</tr>
<tr>
 <td style="text-align: right;">
<b><em>rob</em></b></td><td style="text-align: left;"> risk of bias assessment
</td>
</tr>

</table>



<h3>Source</h3>

<p>Elliott W, Meyer P (2007):
Incident diabetes in clinical trials of antihypertensive drugs:
a network meta-analysis
<em>Lancet</em>,
<b>369</b>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mtrank">mtrank</a></code>, <code><a href="#topic+tcc">tcc</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(diabetes)
#
ranks &lt;- tcc(treat = t, studlab = study, event = r, n = n, data = diabetes,
  mcid = 1.20, sm = "OR", small.values = "desirable")
#
forest(ranks, treat = "ARB")
</code></pre>

<hr>
<h2 id='forest.mtrank'>Forest plot of ability estimates produced with <code><a href="#topic+mtrank">mtrank</a></code></h2><span id='topic+forest.mtrank'></span>

<h3>Description</h3>

<p>This function produces a forest plot that visualizes the ability estimates
calculated with <code><a href="#topic+mtrank">mtrank</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mtrank'
forest(
  x,
  sorting = "ability",
  backtransf = FALSE,
  xlab = "",
  leftcols = "studlab",
  leftlabs = "Treatment",
  rightcols = c("effect", "ci"),
  rightlabs = c(paste0(if (!backtransf) "log-", "Abilities"), NA),
  label.left = "Favors average treatment",
  label.right = "Favors treatment",
  header.line = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="forest.mtrank_+3A_x">x</code></td>
<td>
<p>An object of class <code><a href="#topic+mtrank">mtrank</a></code>.</p>
</td></tr>
<tr><td><code id="forest.mtrank_+3A_sorting">sorting</code></td>
<td>
<p>An argument specifying the criterion to sort the ability
estimates in the forest plot (see Details).</p>
</td></tr>
<tr><td><code id="forest.mtrank_+3A_backtransf">backtransf</code></td>
<td>
<p>A logical argument specifying whether to show log-ability
estimates (<code>FALSE</code>, default) or ability estimates on the natural
scale (<code>TRUE</code>).</p>
</td></tr>
<tr><td><code id="forest.mtrank_+3A_xlab">xlab</code></td>
<td>
<p>A label for the x-axis.</p>
</td></tr>
<tr><td><code id="forest.mtrank_+3A_leftcols">leftcols</code></td>
<td>
<p>A character vector specifying columns
to be printed on the left side of the forest plot
(see <code><a href="meta.html#topic+forest.meta">forest.meta</a></code>).</p>
</td></tr>
<tr><td><code id="forest.mtrank_+3A_leftlabs">leftlabs</code></td>
<td>
<p>A character vector specifying labels for
columns on left side of the forest plot.</p>
</td></tr>
<tr><td><code id="forest.mtrank_+3A_rightcols">rightcols</code></td>
<td>
<p>A character vector specifying columns
to be printed on the right side of the forest plot
(see <code><a href="meta.html#topic+forest.meta">forest.meta</a></code>).</p>
</td></tr>
<tr><td><code id="forest.mtrank_+3A_rightlabs">rightlabs</code></td>
<td>
<p>A character vector specifying labels for
columns on right side of the forest plot.</p>
</td></tr>
<tr><td><code id="forest.mtrank_+3A_label.left">label.left</code></td>
<td>
<p>Graph label on left side of null effect.</p>
</td></tr>
<tr><td><code id="forest.mtrank_+3A_label.right">label.right</code></td>
<td>
<p>Graph label on right side of null effect.</p>
</td></tr>
<tr><td><code id="forest.mtrank_+3A_header.line">header.line</code></td>
<td>
<p>A logical value indicating whether to print a
header line or a character string (&quot;both&quot;, &quot;below&quot;, &quot;&quot;).</p>
</td></tr>
<tr><td><code id="forest.mtrank_+3A_...">...</code></td>
<td>
<p>Additional arguments (passed on to
<code><a href="meta.html#topic+forest.meta">forest.meta</a></code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function produces a forest plot and visualizes the ability estimates
obtained from <code><a href="#topic+mtrank">mtrank</a></code>. The order of the estimates in the
forest plot (argument <code>sorting</code>) can be one of the following:
</p>

<ul>
<li><p> &quot;ability&quot;: sort by descending ability estimates (default),
</p>
</li>
<li><p> &quot;se&quot;: sort by descending precision, i.e., increasing standard errors,
</p>
</li>
<li><p> &quot;none&quot;: use order from data set.
</p>
</li></ul>



<h3>Value</h3>

<p>A forest plot is plotted in the active graphics device.
</p>


<h3>References</h3>

<p>Evrenoglou T, Nikolakopoulou A, Schwarzer G, Rücker G, Chaimani A (2024):
Producing treatment hierarchies in network meta-analysis using probabilistic
models and treatment-choice criteria.
<a href="https://arxiv.org/abs/2406.10612">https://arxiv.org/abs/2406.10612</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(antidepressants)
#
ranks &lt;- tcc(treat = drug_name, studlab = studyid,
  event = responders, n = ntotal, data = antidepressants,
  mcid = 1.25, sm = "OR", small.values = "undesirable")
#
fit &lt;- mtrank(ranks)

forest(fit, treat = "escitalopram")

</code></pre>

<hr>
<h2 id='forest.tcc'>Forest plot showing study-specific preferences or ties according to
treatment choice criterion</h2><span id='topic+forest.tcc'></span>

<h3>Description</h3>

<p>This function produces a forest plot for all (or selected) study
specific comparisons and visualizes the treatment preference or ties
which are defined from the treatment choice criterion in <code><a href="#topic+tcc">tcc</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'tcc'
forest(
  x,
  treat = NULL,
  backtransf = FALSE,
  leftcols = "studlab",
  leftlabs = NULL,
  rightcols = c("effect", "ci"),
  lty.equi = gs("lty.equi"),
  col.equi = gs("col.equi"),
  fill.equi = gs("fill.equi"),
  fill.lower.equi = fill.equi,
  fill.upper.equi = rev(fill.equi),
  header.line = TRUE,
  col.subgroup = "black",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="forest.tcc_+3A_x">x</code></td>
<td>
<p>An object of class <code><a href="#topic+tcc">tcc</a></code>.</p>
</td></tr>
<tr><td><code id="forest.tcc_+3A_treat">treat</code></td>
<td>
<p>A treatment of interest. If specified it returns a forest plot
for all study specific effects related to <code>treat</code>. If NULL (default),
it generates a forest plot for all study-specific effects in the network.</p>
</td></tr>
<tr><td><code id="forest.tcc_+3A_backtransf">backtransf</code></td>
<td>
<p>A logical indicating whether results should be
back transformed. If <code>backtransf = TRUE</code> (default), results for
<code>sm = "OR"</code> are printed as odds ratios rather than log odds ratios,
for example.</p>
</td></tr>
<tr><td><code id="forest.tcc_+3A_leftcols">leftcols</code></td>
<td>
<p>A character vector specifying columns
to be printed on the left side of the forest plot
(see <code><a href="meta.html#topic+forest.meta">forest.meta</a></code>).</p>
</td></tr>
<tr><td><code id="forest.tcc_+3A_leftlabs">leftlabs</code></td>
<td>
<p>A character vector specifying labels for
columns on left side of the forest plot.</p>
</td></tr>
<tr><td><code id="forest.tcc_+3A_rightcols">rightcols</code></td>
<td>
<p>A character vector specifying columns
to be printed on the right side of the forest plot
(see <code><a href="meta.html#topic+forest.meta">forest.meta</a></code>).</p>
</td></tr>
<tr><td><code id="forest.tcc_+3A_lty.equi">lty.equi</code></td>
<td>
<p>Line type (limits of equivalence).</p>
</td></tr>
<tr><td><code id="forest.tcc_+3A_col.equi">col.equi</code></td>
<td>
<p>Line colour (limits of equivalence).</p>
</td></tr>
<tr><td><code id="forest.tcc_+3A_fill.equi">fill.equi</code></td>
<td>
<p>Colour(s) for area between limits of equivalence
or more general limits.</p>
</td></tr>
<tr><td><code id="forest.tcc_+3A_fill.lower.equi">fill.lower.equi</code></td>
<td>
<p>Colour of area between lower limit(s) and
reference value. Can be equal to the number of lower limits or
the number of limits plus 1 (in this case the the region between
minimum and smallest limit is also filled).</p>
</td></tr>
<tr><td><code id="forest.tcc_+3A_fill.upper.equi">fill.upper.equi</code></td>
<td>
<p>Colour of area between reference value and
upper limit(s). Can be equal to the number of upper limits or the
number of limits plus 1 (in this case the region between largest
limit and maximum is also filled).</p>
</td></tr>
<tr><td><code id="forest.tcc_+3A_header.line">header.line</code></td>
<td>
<p>A logical value indicating whether to print a
header line or a character string (&quot;both&quot;, &quot;below&quot;, &quot;&quot;).</p>
</td></tr>
<tr><td><code id="forest.tcc_+3A_col.subgroup">col.subgroup</code></td>
<td>
<p>The colour to print information on subgroups, i.e.,
pairwise comparisons.</p>
</td></tr>
<tr><td><code id="forest.tcc_+3A_...">...</code></td>
<td>
<p>Additional arguments (passed on to
<code><a href="meta.html#topic+forest.meta">forest.meta</a></code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function produces forest plots for the study specific treatment effects
in the network. The color indicates whether treatment effects show
a preference (red color) or tie (black color). Additionally, the respective
range of equivalence defined at the function
<code><a href="#topic+tcc">tcc</a></code> is visualized for the forest plot.
</p>
<p>Argument <code>treat</code> is optional. By default ( <code>treat = NULL</code>),
all study-specific treatment effects in the network are shown. If specified,
only study-specific treatment effects related to the specified <code>treat</code>
are shown which is useful in busy networks with many direct comparisons.
</p>


<h3>Value</h3>

<p>A forest plot is plotted in the active graphics device.
</p>


<h3>References</h3>

<p>Evrenoglou T, Nikolakopoulou A, Schwarzer G, Rücker G, Chaimani A (2024):
Producing treatment hierarchies in network meta-analysis using probabilistic
models and treatment-choice criteria.
<a href="https://arxiv.org/abs/2406.10612">https://arxiv.org/abs/2406.10612</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(diabetes)
#
ranks &lt;- tcc(treat = t, studlab = study, event = r, n = n, data = diabetes,
  mcid = 1.20, sm = "OR", small.values = "desirable")
#
forest(ranks)
forest(ranks, treat = "ARB")

</code></pre>

<hr>
<h2 id='mtrank'>Estimate the treatment hierarchy in network meta-analysis using a
probabilistic ranking model</h2><span id='topic+mtrank'></span><span id='topic+print.mtrank'></span>

<h3>Description</h3>

<p>This function fits the Bradley-Terry ranking model and produces a treatment
hierarchy based on the method described by Evrenoglou et al. (2024) for
network meta-analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mtrank(x, reference.group = NULL, level = x$level)

## S3 method for class 'mtrank'
print(
  x,
  sorting = "ability",
  backtransf = FALSE,
  digits = gs("digits"),
  digits.prop = gs("digits.prop"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mtrank_+3A_x">x</code></td>
<td>
<p>An object of class <code><a href="#topic+tcc">tcc</a></code> or <code><a href="#topic+mtrank">mtrank</a></code>
(print function).</p>
</td></tr>
<tr><td><code id="mtrank_+3A_reference.group">reference.group</code></td>
<td>
<p>An argument specifying the reference group. If set to
NULL (default), ability estimates of all treatments will be calculated.
If some treatment is set as the reference group, relative abilities of all
treatments versus the specified reference treatment will be calculated.</p>
</td></tr>
<tr><td><code id="mtrank_+3A_level">level</code></td>
<td>
<p>The level used to calculate confidence intervals for ability
estimates.</p>
</td></tr>
<tr><td><code id="mtrank_+3A_sorting">sorting</code></td>
<td>
<p>An argument specifying the criterion to sort the ability
estimates in the printout (see Details).</p>
</td></tr>
<tr><td><code id="mtrank_+3A_backtransf">backtransf</code></td>
<td>
<p>A logical argument specifying whether to show log-ability
estimates (<code>FALSE</code>, default) or on the natural scale (<code>TRUE</code>).</p>
</td></tr>
<tr><td><code id="mtrank_+3A_digits">digits</code></td>
<td>
<p>Minimal number of significant digits for ability estimates,
see <code>print.default</code>.</p>
</td></tr>
<tr><td><code id="mtrank_+3A_digits.prop">digits.prop</code></td>
<td>
<p>Minimal number of significant digits for proportions,
see <code>print.default</code>.</p>
</td></tr>
<tr><td><code id="mtrank_+3A_...">...</code></td>
<td>
<p>Additional arguments (passed on to <code><a href="base.html#topic+prmatrix">prmatrix</a></code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used to fit a Bradley-Terry model to the paired-preference
data generated from the treatment choice criterion constructed by the
<code><a href="#topic+tcc">tcc</a></code> function. This function estimates the ability of
each treatment in the network and the respective standard errors and
confidence intervals using the maximum likelihood approach. To retain
identifiability, the maximization of the log-likelihood takes place subject
to the constrain that the ability estimates sum to 1. Then, the maximum
likelihood estimates (MLEs) are calculated iteratively.
Note that the final estimates of the ability parameters are not necessarily
needed to sum to 1 as after the first iteration of the algorithm the ability
estimates are not normalized. However, by normalizing the final ability
estimates to sum up to 1 these can be interpreted as &quot;the probability that
each treatment is having the highest ability&quot;.
</p>
<p>Finally, a parameter &quot;v&quot; controlling the prevalence of ties in the network
is also estimated. Although the estimated values of this parameter do
not have a direct interpretation they are useful for estimating pairwise 
probabilities (see <code><a href="#topic+paired_pref">paired_pref</a></code>).
</p>
<p>If argument <code>reference.group</code> is not NULL, a reference treatment
group is specified. Mathematically, this means that the maximization problem
is now identifiable, subject to the condition that the ability of this
treatment is 0. Then, the resulting MLEs are the relative abilities of all
treatments in the network versus the specified reference treatment group.
Note that the estimates of the parameter &quot;v&quot; and the normalized probabilities
do not depend on the value for argument <code>reference.group</code>.
</p>


<h3>Value</h3>


<ul>
<li><p> A data frame containing the resulting log-ability estimates, their
standard errors and their confidence intervals.
</p>
</li>
<li><p> The estimate of the tie prevalence parameter v.
</p>
</li>
<li><p> The normalized ability estimates for each treatment. 
</p>
</li></ul>



<h3>References</h3>

<p>Evrenoglou T, Nikolakopoulou A, Schwarzer G, Rücker G, Chaimani A (2024):
Producing treatment hierarchies in network meta-analysis using probabilistic
models and treatment-choice criteria.
<a href="https://arxiv.org/abs/2406.10612">https://arxiv.org/abs/2406.10612</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(antidepressants)

ranks &lt;- tcc(treat = drug_name, studlab = studyid,
  event = responders, n = ntotal, data = antidepressants,
  mcid = 1.25, sm = "OR", small.values = "undesirable")
#
fit1 &lt;- mtrank(ranks)
#
# Print log-ability estimates
fit1
#
# Print ability estimates
print(fit1, backtransf = TRUE)
# Visualize results 
 forest(fit1)

# Repeat using a 'pairwise' object
pw &lt;- pairwise(treat = drug_name, studlab = studyid,
  event = responders, n = ntotal, data = antidepressants,
  sm = "OR")
  
ranks2 &lt;- tcc(pw, mcid = 1.25, small.values = "undesirable")
#
fit2 &lt;- mtrank(ranks2) 
  
# Print log-ability estimates
fit2
# Print ability estimates
print(fit2, backtransf = TRUE)
# Visualize results 
 forest(fit2)
 
</code></pre>

<hr>
<h2 id='paired_pref'>Calculate pairwise probabilities for <code><a href="#topic+mtrank">mtrank</a></code> object</h2><span id='topic+paired_pref'></span><span id='topic+print.paired_pref'></span>

<h3>Description</h3>

<p>This function uses the estimates of ability and tie prevalence parameters
from a <code><a href="#topic+mtrank">mtrank</a></code> object and calculates pairwise probabilities
about the preference or the tie between two treatments based on equations (7)
and (8) in Evrenoglou et al. (2024).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>paired_pref(x, treat1, treat2, type)

## S3 method for class 'paired_pref'
print(x, type = attr(x, "type"), digits = 4, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="paired_pref_+3A_x">x</code></td>
<td>
<p>An object of class <code><a href="#topic+mtrank">mtrank</a></code>.</p>
</td></tr>
<tr><td><code id="paired_pref_+3A_treat1">treat1</code></td>
<td>
<p>The first treatment considered in the treatment comparison.</p>
</td></tr>
<tr><td><code id="paired_pref_+3A_treat2">treat2</code></td>
<td>
<p>The second treatment considered in the treatment comparison.</p>
</td></tr>
<tr><td><code id="paired_pref_+3A_type">type</code></td>
<td>
<p>A character vector specifying the probability of interest.
Either &quot;better&quot;, &quot;tie&quot;, &quot;worse&quot;, or &quot;all&quot; (can be abbreviated).</p>
</td></tr>
<tr><td><code id="paired_pref_+3A_digits">digits</code></td>
<td>
<p>Minimal number of significant digits for proportions,
see <code>print.default</code>.</p>
</td></tr>
<tr><td><code id="paired_pref_+3A_...">...</code></td>
<td>
<p>Additional arguments (passed on to <code><a href="base.html#topic+prmatrix">prmatrix</a></code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Pairwise probabilities between any two treatments in the network can be
calculated using the ability estimates obtained from <code><a href="#topic+mtrank">mtrank</a></code>
and equations (7) and (8) in Evrenoglou et al. (2024). The probabilities
are calculated in the direction <code>treat1</code> vs <code>treat2</code>. The available
probability types are
</p>

<ul>
<li><p> &quot;better&quot;: probability that <code>treat1</code> is better than <code>treat2</code>,
</p>
</li>
<li><p> &quot;tie&quot;: probability that <code>treat1</code> is equal to <code>treat2</code>,
</p>
</li>
<li><p> &quot;worse&quot;: probability that <code>treat1</code> is worse than <code>treat2</code>,
</p>
</li>
<li><p> &quot;all&quot;: all three probabilities.
</p>
</li></ul>

<p>Please note that all the arguments of this function are mandatory.
</p>


<h3>Value</h3>

<p>The probability (or probabilities) of interest for the comparison
<code>treat1</code> vs <code>treat2</code> based on the argument <code>type</code>.
</p>


<h3>References</h3>

<p>Evrenoglou T, Nikolakopoulou A, Schwarzer G, Rücker G, Chaimani A (2024):
Producing treatment hierarchies in network meta-analysis using probabilistic
models and treatment-choice criteria.
<a href="https://arxiv.org/abs/2406.10612">https://arxiv.org/abs/2406.10612</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(antidepressants)
#
ranks &lt;- tcc(treat = drug_name, studlab = studyid,
  event = responders, n = ntotal, data = antidepressants,
  mcid = 1.25, sm = "OR", small.values = "undesirable")
#
fit &lt;- mtrank(ranks)
#
paired_pref(fit, type = c("better", "worse"),
  treat1 = "bupropion", treat2 = "escitalopram")
#
paired_pref(fit, type = c("better", "worse"),
  treat1 = "escitalopram", treat2 = "bupropion")
#
paired_pref(fit, type = "all",
  treat1 = c("bupropion", "escitalopram"),
  treat2 = c("escitalopram", "bupropion"))

</code></pre>

<hr>
<h2 id='pp2long'>Auxiliary function to transform data from paired-preference to
long-arm format</h2><span id='topic+pp2long'></span>

<h3>Description</h3>

<p>Auxiliary function to transform data from paired-preference to
long-arm format
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pp2long(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pp2long_+3A_x">x</code></td>
<td>
<p>An object of class &quot;ppdata&quot; (part of <code><a href="#topic+tcc">tcc</a></code> object).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data set in long-arm format that can be used as input to
<code><a href="PlackettLuce.html#topic+rankings">rankings</a></code>.
</p>


<h3>Author(s)</h3>

<p>Guido Schwarzer <a href="mailto:guido.schwarzer@uniklinik-freiburg.de">guido.schwarzer@uniklinik-freiburg.de</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+tcc">tcc</a></code>, <code><a href="PlackettLuce.html#topic+rankings">rankings</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(diabetes)
#
ranks &lt;- tcc(treat = t, studlab = study, event = r, n = n, data = diabetes,
  mcid = 1.20, sm = "OR", small.values = "desirable")
#
pdat &lt;- ranks$ppdata
#
ldat &lt;- pp2long(pdat)
head(ldat)

library("PlackettLuce")
ungrouped.preferences &lt;-
  rankings(ldat, id = "id", item = "treat", rank = "rank")
grouped.preferences &lt;-
  as.rankings(ungrouped.preferences,
              index = as.numeric(as.factor(pdat$studlab)))
#
fit &lt;- PlackettLuce(grouped.preferences)
#
coef(summary(fit, ref = ranks$reference.group))[, 1]
# Results stored in mtrank()
mtrank(ranks)$estimates$log_ability

</code></pre>

<hr>
<h2 id='tcc'>Transform meta-analysis data from long or wide arm-based format into
paired-preference format</h2><span id='topic+tcc'></span><span id='topic+print.tcc'></span>

<h3>Description</h3>

<p>This function transforms data that are given in wide or long
arm-based format (e.g. input format for WinBUGS or JAGS) to a
paired-preference format needed as input to <code><a href="#topic+mtrank">mtrank</a></code>.
The function can transform data with binary and continuous arm-based to
preference-based format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tcc(
  treat,
  event,
  n,
  mean,
  sd,
  data = NULL,
  studlab,
  mcid = NULL,
  lower.equi = NULL,
  upper.equi = NULL,
  small.values = gs("small.values"),
  relax = FALSE,
  level = 0.95,
  sm,
  keepdata = gs("keepdata"),
  ...
)

## S3 method for class 'tcc'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tcc_+3A_treat">treat</code></td>
<td>
<p>Either a <code><a href="meta.html#topic+pairwise">pairwise</a></code> object, or a list or
vector with treatment information for individual treatment arms
(see Details).</p>
</td></tr>
<tr><td><code id="tcc_+3A_event">event</code></td>
<td>
<p>A list or vector with information on number of events
for individual treatment arms (see Details).</p>
</td></tr>
<tr><td><code id="tcc_+3A_n">n</code></td>
<td>
<p>A list or vector with information on number of
observations for individual treatment arms (see Details).</p>
</td></tr>
<tr><td><code id="tcc_+3A_mean">mean</code></td>
<td>
<p>A list vector with estimated means for individual
treatment arms (see Details).</p>
</td></tr>
<tr><td><code id="tcc_+3A_sd">sd</code></td>
<td>
<p>A list or vector with information on the standard
deviation for individual treatment arms (see Details).</p>
</td></tr>
<tr><td><code id="tcc_+3A_data">data</code></td>
<td>
<p>A data frame containing the study information.</p>
</td></tr>
<tr><td><code id="tcc_+3A_studlab">studlab</code></td>
<td>
<p>A vector with study labels.</p>
</td></tr>
<tr><td><code id="tcc_+3A_mcid">mcid</code></td>
<td>
<p>A numeric vector specifying the minimal clinically important
value (see Details).</p>
</td></tr>
<tr><td><code id="tcc_+3A_lower.equi">lower.equi</code></td>
<td>
<p>A numeric value specifying the lower limit of the range of
equivalence (see Details).</p>
</td></tr>
<tr><td><code id="tcc_+3A_upper.equi">upper.equi</code></td>
<td>
<p>A numeric value specifying the upper limit of the range of
equivalence (see Details).</p>
</td></tr>
<tr><td><code id="tcc_+3A_small.values">small.values</code></td>
<td>
<p>A character string specifying whether small 
treatment effects indicate a beneficial (<code>"desirable"</code>) or
harmful (<code>"undesirable"</code>) effect.</p>
</td></tr>
<tr><td><code id="tcc_+3A_relax">relax</code></td>
<td>
<p>A logical optional argument. If TRUE it 'relaxes' the tcc 
to only consider the bounds of ROE when specifying 'wins' and ties. 
The default FALSE uses the criterion described by Evrenoglou et al. (2024)
and considers also the statistical significance on top of the ROE bounds
(see Details).</p>
</td></tr>
<tr><td><code id="tcc_+3A_level">level</code></td>
<td>
<p>The level used to calculate confidence intervals for
log-abilities.</p>
</td></tr>
<tr><td><code id="tcc_+3A_sm">sm</code></td>
<td>
<p>The effect measure of interest (see Details).</p>
</td></tr>
<tr><td><code id="tcc_+3A_keepdata">keepdata</code></td>
<td>
<p>A logical indicating whether original data should be kept in
tcc object.</p>
</td></tr>
<tr><td><code id="tcc_+3A_...">...</code></td>
<td>
<p>Additional arguments (passed on to
<code><a href="meta.html#topic+pairwise">pairwise</a></code>).</p>
</td></tr>
<tr><td><code id="tcc_+3A_x">x</code></td>
<td>
<p>An object of class <code><a href="#topic+tcc">tcc</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>R function <code><a href="#topic+mtrank">mtrank</a></code> expects data in a <b>paired-preference</b>
format, where for each study-specific pairwise comparison in the network a
treatment preference or tie is indicated. For example, for the
study-specific comparison between treatments <em>A</em> and <em>B</em> the
potential outcomes are:
</p>

<ul>
<li> <p><em>A</em> &gt; <em>B</em>
</p>
</li>
<li> <p><em>A</em> &lt; <em>B</em>
</p>
</li>
<li> <p><em>A</em> = <em>B</em>
</p>
</li></ul>

<p>The data transformation takes place based on the study-specific treatment
effects and the treatment choice criterion. R function
<code><a href="meta.html#topic+pairwise">pairwise</a></code> is called internally to calculate the
study-specific treatment effect estimates and standard errors. This ensures
that data given in either 'long' or 'wide' arm-based format will be suitably
used to calculate the study-specific treatment effect estimates and standard
errors while ensuring that a network of multi-arm studies gets an
equivalent representation as a network of two-arm studies. It is also
possible to provide a <code><a href="meta.html#topic+pairwise">pairwise</a></code> as the main input.
In this case, inputs for the arguments <code>event</code>, <code>n</code>, <code>mean</code>,
<code>sd</code>, <code>data</code>, <code>studlab</code>, or <code>keepdata</code> are ignored.
</p>
<p>This function implements treatment choice criteria based on the method
by Evrenoglou et al. (2024). Namely, a range of equivalence (ROE) can be
specified by
</p>

<ul>
<li><p> argument <code>mcid</code>. Then the limits of the ROE
will be defined based on the values (i) <code>mcid</code>, <code>1/mcid</code> for
ratio measures and (ii) <code>mcid</code> and <code>-mcid</code> for difference
measures.
</p>
</li>
<li><p> arguments <code>lower.equi</code> and <code>upper.equi</code>.
These arguments allow the users to define their own limits of the ROE,
given the restriction that the lower limit will always be smaller than the
upper limit.
</p>
</li></ul>

<p>Note that when the argument <code>mcid</code> is specified, the arguments
<code>lower.equi</code> and <code>upper.equi</code> are ignored.
Either only the <code>mcid</code> or both of the <code>lower.equi</code> and
<code>upper.equi</code> must be specified for the proper
definition of the ROE.
</p>
<p>After setting the ROE, each study-specific treatment effect will be
categorised as a treatment preference or a tie. The argument <code>relax</code>
controls the amount of conservatism of the treatment choice criterion.
If set to <code>FALSE</code> (default), the treatment choice criterion is
equivalent to the one described by Evrenoglou et al. (2024). In this case,
study-specific treatment effects need to be both statistically and clinically
significant to indicate a treatment preference. If set to <code>TRUE</code>, the
criterion is relaxed and the study-specific treatment effects need to be only
clinically significant to indicate a treatment preference. 
</p>
<p>This function can transform data with binary and continuous outcomes.
Depending on the outcome, the following arguments are mandatory:
</p>

<ul>
<li><p> treat, event, n (for binary outcomes);
</p>
</li>
<li><p> treat, n, mean, sd (for continuous outcomes).
</p>
</li></ul>

<p>Finally, the argument <code>sm</code> is used to define the effect measure of
interest for transforming the data into paired-preference format;
see <code><a href="meta.html#topic+metabin">metabin</a></code> and <code><a href="meta.html#topic+metacont">metacont</a></code> for a
list of available effect measures.
</p>


<h3>Value</h3>


<ul>
<li><p> The initial data in a paired-preference format.
</p>
</li>
<li><p> The correspondence between the initial study names
(passed in the argument studlab) and the index name of the
paired-preference format data.
</p>
</li></ul>



<h3>References</h3>

<p>Evrenoglou T, Nikolakopoulou A, Schwarzer G, Rücker G, Chaimani A (2024):
Producing treatment hierarchies in network meta-analysis using probabilistic
models and treatment-choice criteria.
<a href="https://arxiv.org/abs/2406.10612">https://arxiv.org/abs/2406.10612</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(diabetes)
#
ranks &lt;- tcc(treat = t, studlab = study, event = r, n = n, data = diabetes,
  mcid = 1.20, sm = "OR", small.values = "desirable")
#
forest(ranks, treat = "ARB")

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
