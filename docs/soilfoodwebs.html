<!DOCTYPE html><html><head><title>Help for package soilfoodwebs</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {soilfoodwebs}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#Aijfcn'><p>A function to calculate the nitrogen surplus or deficit each species gets from consuming another species</p></a></li>
<li><a href='#Andres2016'><p>The soil food webs published for grazed and ungrazed plots in the Shortgrass Steppe long-term research station.</p></a></li>
<li><a href='#build_foodweb'><p>A function to compile the food web from simple data inputs</p></a></li>
<li><a href='#calc_smin'><p>Calculate the strength of stability as smin.</p></a></li>
<li><a href='#calculate_inputs'><p>A function to calculate the inputs and outputs at equilibrium and print them for the user.</p></a></li>
<li><a href='#calculate_smin'><p>Function used inside the calc_smin function</p></a></li>
<li><a href='#can_mutfeed'><p>A function that identifies cannibalism and mutual feeding</p></a></li>
<li><a href='#checkcomm'><p>A function check the community for errors before it is used in calculations.</p></a></li>
<li><a href='#checkeqm'><p>Check the carbon flux equilibrium output by comana.</p></a></li>
<li><a href='#Cijfcn'><p>A utility function to calculate the consumption rate of each species on all prey assuming a type I functional response.</p></a></li>
<li><a href='#CNsim'><p>A function to simulate the dynamics over time wrapping getPARAMS and foodwebode</p></a></li>
<li><a href='#comana'><p>A function to calculate carbon and nitrogen fluxes in the food web.</p></a></li>
<li><a href='#comtrosp'><p>A function to combine trophic species.</p></a></li>
<li><a href='#correct_diet'><p>A function to correct the diet of trophic species.</p></a></li>
<li><a href='#correction_function'><p>A function to correct stoichiometry dynamically</p></a></li>
<li><a href='#corrstoich'><p>Correct stoichiometry</p></a></li>
<li><a href='#decompexpt'><p>Decomposition rates and effect of individual organisms</p></a></li>
<li><a href='#deRuiter1994'><p>The soil food webs published for conventional (CON) and integrated (INT) management at Lovinkhoeve experimental farm.</p></a></li>
<li><a href='#foodwebode'><p>A function to simulation the food webs away from equilibrium.</p></a></li>
<li><a href='#getPARAMS'><p>A function to get the parameters for a food web model.</p></a></li>
<li><a href='#Holtkamp2011'><p>The soil food webs published along a chronosequence in the Netherlands.</p></a></li>
<li><a href='#Hunt1987'><p>The soil food web published for CPER</p></a></li>
<li><a href='#intro_comm'><p>A baseline community for examples</p></a></li>
<li><a href='#Jacobsindex'><p>Calculate Jacob's index.</p></a></li>
<li><a href='#Koltz2018'><p>The soil food web published for an Arctic Tundra site</p></a></li>
<li><a href='#newnode'><p>Add node to the community</p></a></li>
<li><a href='#parameter_uncertainty'><p>Parameter uncertainty returns community with new parameters drawn from a distribution of choice</p></a></li>
<li><a href='#productionadj'><p>A function to fix production efficiency.</p></a></li>
<li><a href='#removenodes'><p>Remove nodes from community.</p></a></li>
<li><a href='#renamenode'><p>Rename a node in a  community.</p></a></li>
<li><a href='#RESCALE'><p>A function to rescale a vector.</p></a></li>
<li><a href='#stability'><p>Calculates the stability of the food web</p></a></li>
<li><a href='#stability2'><p>A function to run the stability analysis using the numerical simulation of the Jacobain matrix.</p></a></li>
<li><a href='#TLcheddar'><p>Calculates the trophic level for each tropospecies</p></a></li>
<li><a href='#TLsort'><p>Sorts the trophic levels from lowest to highest</p></a></li>
<li><a href='#whomineralizes'><p>Direct and indirect contributions to mineralizations</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Soil Food Web Analysis</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.2</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Robert Buchkowski &lt;robert.buchkowski@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Analyzing soil food webs or any food web measured at equilibrium. The package
  calculates carbon and nitrogen fluxes and stability properties using methods
  described by Hunt et al. (1987) &lt;<a href="https://doi.org/10.1007%2FBF00260580">doi:10.1007/BF00260580</a>&gt;, de Ruiter et al. 
  (1995) &lt;<a href="https://doi.org/10.1126%2Fscience.269.5228.1257">doi:10.1126/science.269.5228.1257</a>&gt;, Holtkamp et al. (2011)
  &lt;<a href="https://doi.org/10.1016%2Fj.soilbio.2010.10.004">doi:10.1016/j.soilbio.2010.10.004</a>&gt;, and Buchkowski and Lindo (2021) 
  &lt;<a href="https://doi.org/10.1111%2F1365-2435.13706">doi:10.1111/1365-2435.13706</a>&gt;. The package can also manipulate the structure 
  of the food web as well as simulate food webs away from equilibrium and run 
  decomposition experiments.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Imports:</td>
<td>stringr (&ge; 1.4.0), diagram (&ge; 1.6.5), graphics (&ge; 4.1.0),
quadprog (&ge; 1.5-8), lpSolve (&ge; 5.6.15), rootSolve (&ge;
1.8.2.2), deSolve (&ge; 1.28)</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown, knitr, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-05-09 00:13:32 UTC; rober</td>
</tr>
<tr>
<td>Author:</td>
<td>Robert Buchkowski [aut, cre, cph],
  ZoÃ« Lindo [aut],
  Carlos Barreto [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-05-09 16:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='Aijfcn'>A function to calculate the nitrogen surplus or deficit each species gets from consuming another species</h2><span id='topic+Aijfcn'></span>

<h3>Description</h3>

<p>A function to calculate the nitrogen surplus or deficit each species gets from consuming another species
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Aijfcn(usin)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Aijfcn_+3A_usin">usin</code></td>
<td>
<p>The community on which nitrogen calculations are made.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A matrix of nitrogen surpluses or deficits.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>Aijfcn(intro_comm)
</code></pre>

<hr>
<h2 id='Andres2016'>The soil food webs published for grazed and ungrazed plots in the Shortgrass Steppe long-term research station.</h2><span id='topic+Andres2016'></span>

<h3>Description</h3>

<p>The community contains 21 nodes in bacterial, fungal, and root energy channels.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Andres2016
</code></pre>


<h3>Format</h3>

<p>A list of six communities each with a feeding matrix and properties dataframe. NOTE: You must select one of the communities from the list to use the package functions. For example: comana(Andres2016$GA) carries out calculations for the GA plot.
</p>

<dl>
<dt>GA</dt><dd><p>The grazed plot A.</p>
</dd>
<dt>UGA</dt><dd><p>The ungrazed plot A.</p>
</dd>
<dt>GB</dt><dd><p>The grazed plot B.</p>
</dd>
<dt>UGB</dt><dd><p>The ungrazed plot B.</p>
</dd>
<dt>GC</dt><dd><p>The grazed plot C.</p>
</dd>
<dt>UGC</dt><dd><p>The ungrazed plot C.</p>
</dd>
<dt>imat</dt><dd><p>Within the community: The feeding matrix. Rows eat columns.</p>
</dd>
<dt>prop</dt><dd><p>Within the community: The properties data frame containing node names (ID), assimilation efficiency (a), production efficiency(p), C:N ratio (CN), biomass (B), death rate (d), proportion of death cycled back to a detrital pool (DetritusRecycling), Booleans stating whether the node is detritus, plant, and can immobilize nitrogen, and a list of mutual predators. Biomass is in kilograms of carbon per hectare and turnover/death rate is in years.</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://doi.org/10.1016/j.soilbio.2016.02.014">doi:10.1016/j.soilbio.2016.02.014</a>
</p>

<hr>
<h2 id='build_foodweb'>A function to compile the food web from simple data inputs</h2><span id='topic+build_foodweb'></span>

<h3>Description</h3>

<p>A function to compile the food web from simple data inputs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_foodweb(feeding, properties)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="build_foodweb_+3A_feeding">feeding</code></td>
<td>
<p>A data frame listing the feeding relationships in the food web. Only needs to contain the nodes that have prey items along with their names. Three columns in this data frame must be: Predator, Prey, and Preference. The Predator column is the name of the predator, the Prey column is the name of the prey, and the Preference is the preference that the predator has for that prey item after correcting for abundance. Preference values are relative, so for each predator the preference value can be any number and all that matters is its proportion of the total of all preference values given to that predator. Preference is meaningless if a predator only has one prey item. A good default value is 1 for everything if you don't want to set preferences beyond prey abundance.</p>
</td></tr>
<tr><td><code id="build_foodweb_+3A_properties">properties</code></td>
<td>
<p>A data frame listing the properties or parameters in the food web. Must contain the names of all of the nodes in the food web. This data frame must contain: ID, d,a,p,B, CN, Detritusrecycling, isDetritus, isPlant, and canIMM.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A community that is compatible with the functions of soilfoodwebs. This is a list with the feeding matrix imat first and the properties prop second.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Creating a simple three node community:

# Create a data frame of feeding relationships:
feedinglist = data.frame(
Predator = c("Pred", "Pred"),
Prey = c("Prey1", "Prey2"),
Preference = c(1,1.2))

# Create a data frame of properties for each species:
properties = data.frame(ID = c("Pred", "Prey1", "Prey2"), # Name
d = c(1,3,0.5), # Death rate
a = c(0.61,0.65,0.45), # Assimilation efficiency
p = c(0.5,0.4,0.3), # Production efficiency for carbon
B = c(0.1,8,5), # Biomass
CN = c(4.5,4.8,5), # Carbon to nitrogen ratio
DetritusRecycling = c(0,0,0), # proportion of detritus recycling
isDetritus = c(0,0,0), # Boolean: Is this pool detritus?
isPlant = c(0,0,0), # Boolean: Is this pool a plant?
canIMM = c(0,0,0)) # Boolean: Can the pool immobilize inorganic nitrogen?

# Build the food web:
build_foodweb(feedinglist, properties)
</code></pre>

<hr>
<h2 id='calc_smin'>Calculate the strength of stability as smin.</h2><span id='topic+calc_smin'></span>

<h3>Description</h3>

<p>Calculate the strength of stability as smin.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_smin(usin)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calc_smin_+3A_usin">usin</code></td>
<td>
<p>The community for which to calculate smin</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calculates the value of smin in each web using the metric used by Moore and de Ruiter.
</p>


<h3>Value</h3>

<p>The values of smin.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Calculate the minimum values of s for the introduction community.
calc_smin(intro_comm)
</code></pre>

<hr>
<h2 id='calculate_inputs'>A function to calculate the inputs and outputs at equilibrium and print them for the user.</h2><span id='topic+calculate_inputs'></span>

<h3>Description</h3>

<p>A function to calculate the inputs and outputs at equilibrium and print them for the user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculate_inputs(
  usin,
  DIETLIMTS = NA,
  diet_correct = TRUE,
  Conly = FALSE,
  verbose = TRUE,
  toround = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calculate_inputs_+3A_usin">usin</code></td>
<td>
<p>The community you want to simulate.</p>
</td></tr>
<tr><td><code id="calculate_inputs_+3A_dietlimts">DIETLIMTS</code></td>
<td>
<p>The diet limits matrix for the stoichiometry correction (proportion of diet)?</p>
</td></tr>
<tr><td><code id="calculate_inputs_+3A_diet_correct">diet_correct</code></td>
<td>
<p>Boolean: Does the organism correct it's diet?</p>
</td></tr>
<tr><td><code id="calculate_inputs_+3A_conly">Conly</code></td>
<td>
<p>Boolean: Is the model meant for carbon only?</p>
</td></tr>
<tr><td><code id="calculate_inputs_+3A_verbose">verbose</code></td>
<td>
<p>Boolean: Do you want to print the summary in the Console?</p>
</td></tr>
<tr><td><code id="calculate_inputs_+3A_toround">toround</code></td>
<td>
<p>Boolean: Should the answer be rounded?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of inputs and mineralization rates.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Calculate the inputs and outputs of a community. Prints a summary by default and saves a list.
calculate_inputs(intro_comm)
</code></pre>

<hr>
<h2 id='calculate_smin'>Function used inside the calc_smin function</h2><span id='topic+calculate_smin'></span>

<h3>Description</h3>

<p>Function used inside the calc_smin function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculate_smin(SMIN = 1, usin, isSQR = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calculate_smin_+3A_smin">SMIN</code></td>
<td>
<p>The value of smin.</p>
</td></tr>
<tr><td><code id="calculate_smin_+3A_usin">usin</code></td>
<td>
<p>The community used in the calculation</p>
</td></tr>
<tr><td><code id="calculate_smin_+3A_issqr">isSQR</code></td>
<td>
<p>Boolean: Should the rmax value be squared?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The value of rmax for the community and given SMIN
</p>

<hr>
<h2 id='can_mutfeed'>A function that identifies cannibalism and mutual feeding</h2><span id='topic+can_mutfeed'></span>

<h3>Description</h3>

<p>A function that identifies cannibalism and mutual feeding
</p>


<h3>Usage</h3>

<pre><code class='language-R'>can_mutfeed(usin)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="can_mutfeed_+3A_usin">usin</code></td>
<td>
<p>The community in which to identify cannibalism and mutual feeding</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The community with mutual feeding added to the properties database.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>intro_comm_mod = intro_comm
intro_comm_mod$imat["Predator", "Predator"] = 1
can_mutfeed(intro_comm_mod)
</code></pre>

<hr>
<h2 id='checkcomm'>A function check the community for errors before it is used in calculations.</h2><span id='topic+checkcomm'></span>

<h3>Description</h3>

<p>A function check the community for errors before it is used in calculations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkcomm(usin, shuffleTL = FALSE, rmzeros = TRUE, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkcomm_+3A_usin">usin</code></td>
<td>
<p>The community to check.</p>
</td></tr>
<tr><td><code id="checkcomm_+3A_shuffletl">shuffleTL</code></td>
<td>
<p>A Boolean stating whether the community should be sorted.</p>
</td></tr>
<tr><td><code id="checkcomm_+3A_rmzeros">rmzeros</code></td>
<td>
<p>A Boolean determining whether trophic species with zero biomass should be removed from the community.</p>
</td></tr>
<tr><td><code id="checkcomm_+3A_verbose">verbose</code></td>
<td>
<p>A Boolean. Do you want to see all the warnings?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The checked community.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>checkcomm(intro_comm)
</code></pre>

<hr>
<h2 id='checkeqm'>Check the carbon flux equilibrium output by comana.</h2><span id='topic+checkeqm'></span>

<h3>Description</h3>

<p>Check the carbon flux equilibrium output by comana.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkeqm(cares, eqmtolerance = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkeqm_+3A_cares">cares</code></td>
<td>
<p>The output from comana.</p>
</td></tr>
<tr><td><code id="checkeqm_+3A_eqmtolerance">eqmtolerance</code></td>
<td>
<p>A value used to set the equilibrium tolerance for the food web verification. If NA, the default value used by the function all.equal is used, which is approximately 1.5e-8.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean: Is the community at equilibrium with inputs to the first trophic level?
</p>


<h3>Examples</h3>

<pre><code class='language-R'>checkeqm(comana(intro_comm))
</code></pre>

<hr>
<h2 id='Cijfcn'>A utility function to calculate the consumption rate of each species on all prey assuming a type I functional response.</h2><span id='topic+Cijfcn'></span>

<h3>Description</h3>

<p>A utility function to calculate the consumption rate of each species on all prey assuming a type I functional response.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Cijfcn(usin, shuffleTL = FALSE, rmzeros = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Cijfcn_+3A_usin">usin</code></td>
<td>
<p>The community on which feeding rate calculations are made.</p>
</td></tr>
<tr><td><code id="Cijfcn_+3A_shuffletl">shuffleTL</code></td>
<td>
<p>A Boolean stating whether the community should be sorted before consumption rates are calculated.</p>
</td></tr>
<tr><td><code id="Cijfcn_+3A_rmzeros">rmzeros</code></td>
<td>
<p>A Boolean determining whether trophic species with zero biomass should be removed from the community.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A matrix of consumption rates with units set by the the biomass input units in biomass and time.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>Cijfcn(intro_comm)
</code></pre>

<hr>
<h2 id='CNsim'>A function to simulate the dynamics over time wrapping getPARAMS and foodwebode</h2><span id='topic+CNsim'></span>

<h3>Description</h3>

<p>A function to simulate the dynamics over time wrapping getPARAMS and foodwebode
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CNsim(
  usin,
  DIETLIMTS = NA,
  diet_correct = TRUE,
  Conly = FALSE,
  userdefinedinputs = NA,
  start_mod = NA,
  TIMES = 1:100,
  keepallnitrogen = TRUE,
  has_inorganic_nitrogen = FALSE,
  densitydependence = NA,
  inorganic_nitrogen_properties = list(INN = NA, q = NA, eqmN = NA),
  DETEXPT = NA,
  DETEXPTSTART = NA,
  rtn_only_state = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="CNsim_+3A_usin">usin</code></td>
<td>
<p>The community you want to simulate.</p>
</td></tr>
<tr><td><code id="CNsim_+3A_dietlimts">DIETLIMTS</code></td>
<td>
<p>The diet limits matrix for the stoichiometry correction (proportion of diet)?</p>
</td></tr>
<tr><td><code id="CNsim_+3A_diet_correct">diet_correct</code></td>
<td>
<p>Boolean: Does the organism correct it's diet?</p>
</td></tr>
<tr><td><code id="CNsim_+3A_conly">Conly</code></td>
<td>
<p>Boolean: Is the model meant for carbon only?</p>
</td></tr>
<tr><td><code id="CNsim_+3A_userdefinedinputs">userdefinedinputs</code></td>
<td>
<p>Do you want to input a user defined vector of input functions? If NA the input values that keep the system at equilibrium are calculated. If not, put in a vector of input rates for each node.</p>
</td></tr>
<tr><td><code id="CNsim_+3A_start_mod">start_mod</code></td>
<td>
<p>A vector of modifications to the starting conditions, which default to the biomass vector in the community. This vector is multiplied by the biomass vector.</p>
</td></tr>
<tr><td><code id="CNsim_+3A_times">TIMES</code></td>
<td>
<p>The vector of times that you want to run the model. Defaults to 1 to 100 by 1.</p>
</td></tr>
<tr><td><code id="CNsim_+3A_keepallnitrogen">keepallnitrogen</code></td>
<td>
<p>Boolean: Keep all the nitrogen pools in the model output? Will be set to FALSE if you are running a stability analysis using the function stability2().</p>
</td></tr>
<tr><td><code id="CNsim_+3A_has_inorganic_nitrogen">has_inorganic_nitrogen</code></td>
<td>
<p>Boolean: Is there an inorganic nitrogen pool?</p>
</td></tr>
<tr><td><code id="CNsim_+3A_densitydependence">densitydependence</code></td>
<td>
<p>Which nodes have density dependence? NA default means none of them do. Should be a vector of 0 (no DD) and 1 (DD) for each node.</p>
</td></tr>
<tr><td><code id="CNsim_+3A_inorganic_nitrogen_properties">inorganic_nitrogen_properties</code></td>
<td>
<p>A list of state variables for the inorganic nitrogen pool (INN = inputs, q = per capita loss of N, eqmN = equilibrium N). Must include a value for two of the three variables and has the final one as NA.</p>
</td></tr>
<tr><td><code id="CNsim_+3A_detexpt">DETEXPT</code></td>
<td>
<p>The pool that should be used for the detritus experiment by name or position in the vector usin$prop$ID.</p>
</td></tr>
<tr><td><code id="CNsim_+3A_detexptstart">DETEXPTSTART</code></td>
<td>
<p>The start of the detritus experiment. Defaults to 100.</p>
</td></tr>
<tr><td><code id="CNsim_+3A_rtn_only_state">rtn_only_state</code></td>
<td>
<p>Boolean: Do you want to only return the model state variables? If FALSE then the consumption rates and production efficiency at each time step are also returned.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A function that simulates the food web over the user defined times. If you do not modify the starting state using start_mod or add a detritus experiment using DETEXPT, then the result will just be a flat line if the food web is stable.
</p>


<h3>Value</h3>

<p>The output of the simulation.
</p>


<h3>See Also</h3>

<p>The function uses <code><a href="#topic+getPARAMS">getPARAMS</a></code> and <code><a href="#topic+foodwebode">foodwebode</a></code> to simulate the community.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Basic example with a 5% reduction in predator biomass:
CNsim(intro_comm, start_mod = c(0.95, 1,1,1,1,1,1))

# Simulate a decomposition experiment:
CNsim(intro_comm, DETEXPT = c("Detritus1"), DETEXPTSTART = 100)

</code></pre>

<hr>
<h2 id='comana'>A function to calculate carbon and nitrogen fluxes in the food web.</h2><span id='topic+comana'></span>

<h3>Description</h3>

<p>A function to calculate carbon and nitrogen fluxes in the food web.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>comana(
  usin,
  mkplot = FALSE,
  whattoplot = c("web", "Nmin", "Cmin"),
  showCN = FALSE,
  BOX.SIZE = 0.1,
  BOX.PROP = 0.3,
  BOX.CEX = 1,
  PLOT.CEX = 1,
  edgepos = c(0.1, 0.9),
  TCK = 0.05,
  shuffleTL = FALSE,
  prettynames = NA,
  fwdlwdcust = NULL,
  arrowlog = FALSE,
  arrowsizerange = c(0.1, 30),
  rmzeros = TRUE,
  eqmtolerance = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="comana_+3A_usin">usin</code></td>
<td>
<p>The community that you are analyzing: contains a matrix of interactions and a data frame of properties in a list.</p>
</td></tr>
<tr><td><code id="comana_+3A_mkplot">mkplot</code></td>
<td>
<p>Boolean: Should the plots be output?</p>
</td></tr>
<tr><td><code id="comana_+3A_whattoplot">whattoplot</code></td>
<td>
<p>A vector of what to plot. Food web typology (web), nitrogen mineralization (Nmin), and/or carbon mineralization (Cmin).</p>
</td></tr>
<tr><td><code id="comana_+3A_showcn">showCN</code></td>
<td>
<p>Boolean: # Should the food web show the C:N ratio of each trophic species next to it's name in the food web plot?</p>
</td></tr>
<tr><td><code id="comana_+3A_box.size">BOX.SIZE</code></td>
<td>
<p>Size of boxes in the food web plot</p>
</td></tr>
<tr><td><code id="comana_+3A_box.prop">BOX.PROP</code></td>
<td>
<p>Proportion of box length and width in the food web plot</p>
</td></tr>
<tr><td><code id="comana_+3A_box.cex">BOX.CEX</code></td>
<td>
<p>Size of box text in the food web plot</p>
</td></tr>
<tr><td><code id="comana_+3A_plot.cex">PLOT.CEX</code></td>
<td>
<p>Size of plot</p>
</td></tr>
<tr><td><code id="comana_+3A_edgepos">edgepos</code></td>
<td>
<p>Where to put the far left and far right boxes for trophic species in the food web plot (range = 0, 1).</p>
</td></tr>
<tr><td><code id="comana_+3A_tck">TCK</code></td>
<td>
<p>The size of the ticks on the C.min and N.min plots.</p>
</td></tr>
<tr><td><code id="comana_+3A_shuffletl">shuffleTL</code></td>
<td>
<p>A Boolean stating whether the community should be sorted.</p>
</td></tr>
<tr><td><code id="comana_+3A_prettynames">prettynames</code></td>
<td>
<p>Alternative names in order for the food web plot trophic species. Cannot be used if showCN = T.</p>
</td></tr>
<tr><td><code id="comana_+3A_fwdlwdcust">fwdlwdcust</code></td>
<td>
<p># A matrix of arrow line widths, same dimensions at the food web for plot customization.</p>
</td></tr>
<tr><td><code id="comana_+3A_arrowlog">arrowlog</code></td>
<td>
<p>Boolean: Should relative arrow widths in the food web plot be on a log scale?</p>
</td></tr>
<tr><td><code id="comana_+3A_arrowsizerange">arrowsizerange</code></td>
<td>
<p>The range of arrow sizes in the food web plot.</p>
</td></tr>
<tr><td><code id="comana_+3A_rmzeros">rmzeros</code></td>
<td>
<p>A Boolean determining whether trophic species with zero biomass should be removed from the community before analysis.</p>
</td></tr>
<tr><td><code id="comana_+3A_eqmtolerance">eqmtolerance</code></td>
<td>
<p>A value used to set the equilibrium tolerance for the food web verification. If NA, the default value used by the function all.equal is used, which is approximately 1.5e-8.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of consumption rates, carbon mineralization, nitrogen mineralization, carbon and nitrogen consumption rates, and the modified community if zeros where removed or sorting occurred.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>comana(intro_comm)
</code></pre>

<hr>
<h2 id='comtrosp'>A function to combine trophic species.</h2><span id='topic+comtrosp'></span>

<h3>Description</h3>

<p>A function to combine trophic species.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>comtrosp(
  usin,
  selected = NA,
  deleteCOMBOcannibal = FALSE,
  allFEEDING1 = FALSE,
  newname = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="comtrosp_+3A_usin">usin</code></td>
<td>
<p>The community were you are combining trophic species</p>
</td></tr>
<tr><td><code id="comtrosp_+3A_selected">selected</code></td>
<td>
<p>Select trophic species to combine, which ones do you want to combine (vector of names)? If left as NA, the two most similar trophic species are combined. Similarity is determined by shared feeding relationships.</p>
</td></tr>
<tr><td><code id="comtrosp_+3A_deletecombocannibal">deleteCOMBOcannibal</code></td>
<td>
<p>Boolean: Do you want to delete the cannibalism that may have been created by combining two trophic species (TRUE) or leave it in the model (FALSE)?</p>
</td></tr>
<tr><td><code id="comtrosp_+3A_allfeeding1">allFEEDING1</code></td>
<td>
<p>Boolean: Do you want to return all feeding preferences to 1 (TRUE), or would you like to set the feeding preferences of the newly combined trophic species as the biomass-weighted average of the old ones (FALSE)?</p>
</td></tr>
<tr><td><code id="comtrosp_+3A_newname">newname</code></td>
<td>
<p>The name you want to use for the combined trophic species. Default replaces combines the names of the original trophic species divided by &quot;/&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function combines trophic species by merging them in both the community matrix (imat) and the properties database (prop). The user can select the two or more trophic species to be combined using the selected option. If this is left as the default (NA), then the two most similar trophic species are combined by comparing their feeding relationships.
</p>


<h3>Value</h3>

<p>The new community with the seltf or most similar trophic species combined.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Combine two trophic species that are the most similar.
comtrosp(intro_comm)

# Combine two selected trophic species.
comtrosp(intro_comm, selected = c("Orib1", "Predator"))

# Combine two selected trophic species
# Remove the cannibalism that is created
# Rescale all feeding preferences to 1.
comtrosp(intro_comm,
selected = c("Orib1", "Predator"),
deleteCOMBOcannibal = TRUE,
allFEEDING1 = TRUE)
</code></pre>

<hr>
<h2 id='correct_diet'>A function to correct the diet of trophic species.</h2><span id='topic+correct_diet'></span>

<h3>Description</h3>

<p>A function to correct the diet of trophic species.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>correct_diet(usin, dietlimits = c(NA))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="correct_diet_+3A_usin">usin</code></td>
<td>
<p>The input community in which to fix the diets.</p>
</td></tr>
<tr><td><code id="correct_diet_+3A_dietlimits">dietlimits</code></td>
<td>
<p># A matrix the same size as imat that gives the diet limits as a proportion of the total diet. All values must be between 0 and 1. Leaving it as NA sets the limits of all diet items to 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified community with new diet preferences.
</p>

<hr>
<h2 id='correction_function'>A function to correct stoichiometry dynamically</h2><span id='topic+correction_function'></span>

<h3>Description</h3>

<p>A function to correct stoichiometry dynamically
</p>


<h3>Usage</h3>

<pre><code class='language-R'>correction_function(
  biomasses,
  cij,
  CN,
  p,
  a,
  canIMM,
  dietlimits,
  diet_correct = TRUE,
  Conly = FALSE,
  Immobilizationlimit = Inf
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="correction_function_+3A_biomasses">biomasses</code></td>
<td>
<p>A vector of biomasses.</p>
</td></tr>
<tr><td><code id="correction_function_+3A_cij">cij</code></td>
<td>
<p>The consumption matrix from Cijfcn</p>
</td></tr>
<tr><td><code id="correction_function_+3A_cn">CN</code></td>
<td>
<p>A vector of C:N ratios.</p>
</td></tr>
<tr><td><code id="correction_function_+3A_p">p</code></td>
<td>
<p>A vector of production efficiency.</p>
</td></tr>
<tr><td><code id="correction_function_+3A_a">a</code></td>
<td>
<p>A vector of assimilation efficiency.</p>
</td></tr>
<tr><td><code id="correction_function_+3A_canimm">canIMM</code></td>
<td>
<p>A Boolean vector of whether the nodes can immobilize nitrogen.</p>
</td></tr>
<tr><td><code id="correction_function_+3A_dietlimits">dietlimits</code></td>
<td>
<p>The diet limits matrix for the stoichiometry correction (proportion of diet)?</p>
</td></tr>
<tr><td><code id="correction_function_+3A_diet_correct">diet_correct</code></td>
<td>
<p>Boolean: Does the organism correct it's diet?</p>
</td></tr>
<tr><td><code id="correction_function_+3A_conly">Conly</code></td>
<td>
<p>Boolean: Is the model meant for carbon only?</p>
</td></tr>
<tr><td><code id="correction_function_+3A_immobilizationlimit">Immobilizationlimit</code></td>
<td>
<p>This is the limit of the amount of nitrogen the food web can immobilize nitrogen (NOT PLANTS). This will impact the calculations of inorganic nitrogen dynamics.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function takes inputs from the ODE and outputs corrected consumption rates.
The key difference from 'corrstoich' is that the prey DO NOT correct their feeding rates to compensate for higher consumption from the predators, so the system can leave equilibrium if a diet shift occurs.
</p>


<h3>Value</h3>

<p>Returns the consumption rates (FMAT) and production efficiencies (p).
</p>

<hr>
<h2 id='corrstoich'>Correct stoichiometry</h2><span id='topic+corrstoich'></span>

<h3>Description</h3>

<p>Correct stoichiometry
</p>


<h3>Usage</h3>

<pre><code class='language-R'>corrstoich(
  usin,
  forceProd = FALSE,
  dietlimits = c(NA),
  Immobilizationlimit = Inf
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="corrstoich_+3A_usin">usin</code></td>
<td>
<p># Community in which to correct stoichiometry.</p>
</td></tr>
<tr><td><code id="corrstoich_+3A_forceprod">forceProd</code></td>
<td>
<p>Boolean: Should we force organisms to only change their production efficiency and not their diet?</p>
</td></tr>
<tr><td><code id="corrstoich_+3A_dietlimits">dietlimits</code></td>
<td>
<p>A matrix the same size as imat that gives the diet limits as a proportion of the total diet. All values must be between 0 and 1. Leaving it as NA sets the limits of all diet items to 1.</p>
</td></tr>
<tr><td><code id="corrstoich_+3A_immobilizationlimit">Immobilizationlimit</code></td>
<td>
<p>Set a limit for the maximum rate of immobilization of inorganic nitrogen for the food web per time step.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A function that corrects trophic species production efficiency and/or diet composition to balance carbon and nitrogen demands.
</p>


<h3>Value</h3>

<p>The modified community with new production efficiencies and diets.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>corrstoich(intro_comm)
# To force the correction to modify production efficiency only.

corrstoich(intro_comm, forceProd = TRUE)

# Set limits on the composition of the animal diet
DL = intro_comm$imat # copy over the feeding matrix to use for the diet limits.
# Oribatid 1 can only have up to 20% of its diet from each fungal species
DL["Orib1",] = c(0,0,0,0.2,0.2,1,1)
# Oribatid 2 can only have up to 10% of its diet from fungi 1
DL["Orib2",] = c(0,0,0,0.1,1,1,1)

# Run them with the limits:
corrstoich(intro_comm, dietlimits = DL)
</code></pre>

<hr>
<h2 id='decompexpt'>Decomposition rates and effect of individual organisms</h2><span id='topic+decompexpt'></span>

<h3>Description</h3>

<p>Decomposition rates and effect of individual organisms
</p>


<h3>Usage</h3>

<pre><code class='language-R'>decompexpt(usin, selected = NULL, overtime = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="decompexpt_+3A_usin">usin</code></td>
<td>
<p>The community in which we want to calculate decomposition rates.</p>
</td></tr>
<tr><td><code id="decompexpt_+3A_selected">selected</code></td>
<td>
<p>A vector of the species names for which you want to calculate direct and indirect effects on decomposition. Default NULL means all species in the food web. Useful for cases where removing certain species breaks the food web structure.</p>
</td></tr>
<tr><td><code id="decompexpt_+3A_overtime">overtime</code></td>
<td>
<p>Do you want to return a decomposition trajectory overtime with and without all species? If so, set this to the number of time steps you want to see.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The output list indicates the baseline decomposition rate (k; basedecomp) and then a table showing the effect on decomposition rates when the direct and indirect effects of individual trophic species are removed (decompeffects). Removing direct effects means setting consumption of that species to zero, while indirect effects occur when the community is recalculated without that species before calculating the decompostion rate (k). A positive number means the species increases decomposition. The column ID contains the node having the ffect, while DetritusID indicates the detritus pool whose rate is being reported.
Direct effects are calculated as the decomposition rate in the full community minus decomposition rate without the species consumption of detritus, divided by the decomposition rate in the full community.
Indirect effects are calculated as the difference in decomposition rate of the full community minus decomposition rate without the species and minus, divided by the decomposition rate with the species and minus the direct effect. A negative value here means that removing the species reduces decomposition more than any direct consumption effects it has on detritus.
If 'overtime' is a number, a table of the proportion of detritus over time is returned with and without all species. Column &quot;Original&quot; is the original community, while all successive columns show the removal of each trophic species.
</p>


<h3>Value</h3>

<p>A list. The first item is the basic decomposition constants. The second is a table of decomposition constants for each detritus pool. The third only runs if asked for by 'overtime' and is the predicted trajectory.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Basic example for the introductory community:
decompexpt(intro_comm)
</code></pre>

<hr>
<h2 id='deRuiter1994'>The soil food webs published for conventional (CON) and integrated (INT) management at Lovinkhoeve experimental farm.</h2><span id='topic+deRuiter1994'></span>

<h3>Description</h3>

<p>The community contains 18 nodes in bacterial and fungal energy channels.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deRuiter1994
</code></pre>


<h3>Format</h3>

<p>A list of four communities each with a feeding matrix and properties dataframe. NOTE: You must select one of the communities from the list to use the package functions. For example: comana(deRuiter1994$INT) carries out calculations for the integrated field.
</p>

<dl>
<dt>INT</dt><dd><p>The field with integrated management, 0 to 10-cm.</p>
</dd>
<dt>INT10</dt><dd><p>The field with integrated management, 10 to 25-cm.</p>
</dd>
<dt>CON</dt><dd><p>The field with conventional management, 0 to 10-cm.</p>
</dd>
<dt>CON10</dt><dd><p>The field with conventional management, 10 to 25-cm.</p>
</dd>
<dt>imat</dt><dd><p>Within the community: The feeding matrix. Rows eat columns.</p>
</dd>
<dt>prop</dt><dd><p>Within the community: The properties data frame containing node names (ID), assimilation efficiency (a), production efficiency(p), C:N ratio (CN), biomass (B), death rate (d), proportion of death cycled back to a detrital pool (DetritusRecycling), Booleans stating whether the node is detritus, plant, and can immobilize nitrogen, and a list of mutual predators. Biomass is in kilograms of carbon per hectare in the depth range noted above and turnover/death rate is in years.</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://doi.org/10.1016/0167-8809%2894%2990044-2">doi:10.1016/0167-8809(94)90044-2</a>
</p>

<hr>
<h2 id='foodwebode'>A function to simulation the food webs away from equilibrium.</h2><span id='topic+foodwebode'></span>

<h3>Description</h3>

<p>A function to simulation the food webs away from equilibrium.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>foodwebode(t, y, pars)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="foodwebode_+3A_t">t</code></td>
<td>
<p>The ODE time.</p>
</td></tr>
<tr><td><code id="foodwebode_+3A_y">y</code></td>
<td>
<p>The ODE simulation start.</p>
</td></tr>
<tr><td><code id="foodwebode_+3A_pars">pars</code></td>
<td>
<p>The ODE parameters.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The food web model ode for simulating the model over time: requires <code>y</code> inputs and <code>pars</code> parameters from the <code><a href="#topic+getPARAMS">getPARAMS</a></code> function. The function can handle a detritus decomposition experiment as set up by either <code><a href="#topic+getPARAMS">getPARAMS</a></code> or <code><a href="#topic+CNsim">CNsim</a></code>. The only pools with nitrogen values are the detritus, because all others have fixed C:N ratios.
</p>


<h3>Value</h3>

<p>The changes in each node biomass along with parameters and mineralization rates.
</p>


<h3>See Also</h3>

<p>Use this function inside <code><a href="#topic+CNsim">CNsim</a></code>, <code><a href="#topic+stability2">stability2</a></code>, and <code><a href="#topic+calculate_inputs">calculate_inputs</a></code>. See the documentation for these functions.
</p>

<hr>
<h2 id='getPARAMS'>A function to get the parameters for a food web model.</h2><span id='topic+getPARAMS'></span>

<h3>Description</h3>

<p>A function to get the parameters for a food web model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getPARAMS(
  usin,
  DIETLIMTS = NA,
  diet_correct = TRUE,
  Conly = FALSE,
  userdefinedinputs = NA,
  returnCNmin = FALSE,
  has_inorganic_nitrogen = FALSE,
  densitydependence = NA,
  inorganic_nitrogen_properties = list(INN = NA, q = NA, eqmN = NA),
  verbose = TRUE,
  Immbolizationlimit = Inf
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getPARAMS_+3A_usin">usin</code></td>
<td>
<p>The community you want to simulate.</p>
</td></tr>
<tr><td><code id="getPARAMS_+3A_dietlimts">DIETLIMTS</code></td>
<td>
<p>The diet limits matrix for the stoichiometry correction (proportion of diet)?</p>
</td></tr>
<tr><td><code id="getPARAMS_+3A_diet_correct">diet_correct</code></td>
<td>
<p>Boolean: Does the organism correct it's diet?</p>
</td></tr>
<tr><td><code id="getPARAMS_+3A_conly">Conly</code></td>
<td>
<p>Boolean: Is the model meant for carbon only?</p>
</td></tr>
<tr><td><code id="getPARAMS_+3A_userdefinedinputs">userdefinedinputs</code></td>
<td>
<p>Do you want to input a user defined vector of input functions? If NA the input values that keep the system at equilibrium are calculated. If not, put in a vector of input rates for each node.</p>
</td></tr>
<tr><td><code id="getPARAMS_+3A_returncnmin">returnCNmin</code></td>
<td>
<p>Boolean: Do you want to add Cmin and Nmin to the list of the results? Used internally in the package in <code><a href="#topic+calculate_inputs">calculate_inputs</a></code>.</p>
</td></tr>
<tr><td><code id="getPARAMS_+3A_has_inorganic_nitrogen">has_inorganic_nitrogen</code></td>
<td>
<p>Boolean: Is there an inorganic nitrogen pool?</p>
</td></tr>
<tr><td><code id="getPARAMS_+3A_densitydependence">densitydependence</code></td>
<td>
<p>Which nodes have density dependence? NA default means none of them do. Should be a vector of 0 (no DD) and 1 (DD) for each node.</p>
</td></tr>
<tr><td><code id="getPARAMS_+3A_inorganic_nitrogen_properties">inorganic_nitrogen_properties</code></td>
<td>
<p>A list of state variables for the inorganic nitrogen pool (INN = inputs, q = per capita loss of N, eqmN = equilibrium N). Must include a value for two of the three variables and has the final one as NA.</p>
</td></tr>
<tr><td><code id="getPARAMS_+3A_verbose">verbose</code></td>
<td>
<p>Boolean: Do you want extra warnings updates?</p>
</td></tr>
<tr><td><code id="getPARAMS_+3A_immbolizationlimit">Immbolizationlimit</code></td>
<td>
<p>This is the limit of the amount of nitrogen the food web can immobilize nitrogen (NOT PLANTS). This will impact the calculations of inorganic nitrogen dynamics.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A function to get the parameters of a food web model for simulation purposes. It does not correct stoichiometry, so the user must do this beforehand if they want.
</p>


<h3>Value</h3>

<p>A list with two elements: (1) a vector of parameters to run the model away from equilibrium and (2) a vector of starting biomasses.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+CNsim">CNsim</a></code>, <code><a href="#topic+stability2">stability2</a></code>, and <code><a href="#topic+calculate_inputs">calculate_inputs</a></code> for the application of the function and use of it's options.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Basic call.
getPARAMS(intro_comm)
</code></pre>

<hr>
<h2 id='Holtkamp2011'>The soil food webs published along a chronosequence in the Netherlands.</h2><span id='topic+Holtkamp2011'></span>

<h3>Description</h3>

<p>The community contains 21 nodes in bacterial, fungal, and root energy channels.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Holtkamp2011
</code></pre>


<h3>Format</h3>

<p>A list of four communities each with a feeding matrix and properties dataframe. NOTE: You must select one of the communities from the list to use the package functions. For example: comana(Holtkamp2011$Young) carries out calculations for the Young field.
</p>

<dl>
<dt>Young</dt><dd><p>The Young field.</p>
</dd>
<dt>Mid</dt><dd><p>The mid-aged field.</p>
</dd>
<dt>Old</dt><dd><p>The old field.</p>
</dd>
<dt>Heathland</dt><dd><p>The heathland.</p>
</dd>
<dt>imat</dt><dd><p>Within the community: The feeding matrix. Rows eat columns.</p>
</dd>
<dt>prop</dt><dd><p>Within the community: The properties data frame containing node names (ID), assimilation efficiency (a), production efficiency(p), C:N ratio (CN), biomass (B), death rate (d), proportion of death cycled back to a detrital pool (DetritusRecycling), Booleans stating whether the node is detritus, plant, and can immobilize nitrogen, and a list of mutual predators. Biomass is in kilograms of carbon per hectare to 10-cm depth and turnover/death rate is in years.</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://doi.org/10.1016/j.soilbio.2010.10.004">doi:10.1016/j.soilbio.2010.10.004</a>
</p>

<hr>
<h2 id='Hunt1987'>The soil food web published for CPER</h2><span id='topic+Hunt1987'></span>

<h3>Description</h3>

<p>The community contains 17 nodes in bacterial, fungal, and root energy channels.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Hunt1987
</code></pre>


<h3>Format</h3>

<p>A community with a feeding matrix and properties dataframe:
</p>

<dl>
<dt>imat</dt><dd><p>The feeding matrix. Rows eat columns.</p>
</dd>
<dt>prop</dt><dd><p>The properties data frame containing node names (ID), assimilation efficiency (a), production efficiency(p), C:N ratio (CN), biomass (B), death rate (d), proportion of death cycled back to a detrital pool (DetritusRecycling), Booleans stating whether the node is detritus, plant, and can immobilize nitrogen, and a list of mutual predators. Biomass is in kilograms of carbon per hectare and turnover/death rate is in years.</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://doi.org/10.1007/BF00260580">doi:10.1007/BF00260580</a>
</p>

<hr>
<h2 id='intro_comm'>A baseline community for examples</h2><span id='topic+intro_comm'></span>

<h3>Description</h3>

<p>The community contains seven nodes generally meant to represent oribatid mites feeding on microorganisms and detritus.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>intro_comm
</code></pre>


<h3>Format</h3>

<p>A community with a feeding matrix and properties dataframe:
</p>

<dl>
<dt>imat</dt><dd><p>The feeding matrix. Rows eat columns.</p>
</dd>
<dt>prop</dt><dd><p>The properties data frame containing node names (ID), assimilation efficiency (a), production efficiency(p), C:N ratio (CN), biomass (B), death rate (d), proportion of death cycled back to a detrital pool (DetritusRecycling), Booleans stating whether the node is detritus, plant, and can immobilize nitrogen, and a list of mutual predators.</p>
</dd>
</dl>



<h3>Source</h3>

<p>Example not based on real empirical data.
</p>

<hr>
<h2 id='Jacobsindex'>Calculate Jacob's index.</h2><span id='topic+Jacobsindex'></span>

<h3>Description</h3>

<p>Calculate Jacob's index.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Jacobsindex(usin)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Jacobsindex_+3A_usin">usin</code></td>
<td>
<p>The community for which to calculate Jacob's index</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Jacob's index is calculated for all predators with more than one prey item. A value of -1 indicates maximum avoidance, 0 indicates no preference, and 1 indicates maximum preference. This index is a more user friendly output than the values in imat, which can be difficult to interpret.
</p>


<h3>Value</h3>

<p>A data frame with columns for predator, prey, and the value of Jacob's index.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Calculate the minimum values of s for the introduction community.
Jacobsindex(intro_comm)
</code></pre>

<hr>
<h2 id='Koltz2018'>The soil food web published for an Arctic Tundra site</h2><span id='topic+Koltz2018'></span>

<h3>Description</h3>

<p>The community contains 41 nodes in bacterial, fungal, and root energy channels. One node has zero biomass and is removed by the check_comm() function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Koltz2018
</code></pre>


<h3>Format</h3>

<p>A community with a feeding matrix and properties dataframe:
</p>

<dl>
<dt>imat</dt><dd><p>The feeding matrix. Rows eat columns.</p>
</dd>
<dt>prop</dt><dd><p>The properties data frame containing node names (ID), assimilation efficiency (a), production efficiency(p), C:N ratio (CN), biomass (B), death rate (d), proportion of death cycled back to a detrital pool (DetritusRecycling), Booleans stating whether the node is detritus, plant, and can immobilize nitrogen, and a list of mutual predators. Biomass is in milligrams of carbon per square meter and turnover/death rate is in years.</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://doi.org/10.1007/s00300-017-2201-5">doi:10.1007/s00300-017-2201-5</a>
</p>

<hr>
<h2 id='newnode'>Add node to the community</h2><span id='topic+newnode'></span>

<h3>Description</h3>

<p>Add node to the community
</p>


<h3>Usage</h3>

<pre><code class='language-R'>newnode(COMM, newname, prey = NA, predator = NA, newprops)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="newnode_+3A_comm">COMM</code></td>
<td>
<p>The community to which to add nodes.</p>
</td></tr>
<tr><td><code id="newnode_+3A_newname">newname</code></td>
<td>
<p>The new node ID.</p>
</td></tr>
<tr><td><code id="newnode_+3A_prey">prey</code></td>
<td>
<p>A vector of prey preferences with names.</p>
</td></tr>
<tr><td><code id="newnode_+3A_predator">predator</code></td>
<td>
<p>A vector of predators and their preferences with name.</p>
</td></tr>
<tr><td><code id="newnode_+3A_newprops">newprops</code></td>
<td>
<p>A vector of the new properties with the appropriate names.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The community with the new node.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+removenodes">removenodes</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Add a node to the introductory community:
newnode(intro_comm, "NewNode",
prey = c(Detritus1 = 1),
predator = c(Predator = 2, Orib1 = 0.1),
newprops = c(d = 1, a = 0.1, p = 0.1,
B = 10, CN = 10, DetritusRecycling = 0,
isDetritus = 0, isPlant = 0, canIMM = 0))
</code></pre>

<hr>
<h2 id='parameter_uncertainty'>Parameter uncertainty returns community with new parameters drawn from a distribution of choice</h2><span id='topic+parameter_uncertainty'></span>

<h3>Description</h3>

<p>Parameter uncertainty returns community with new parameters drawn from a distribution of choice
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parameter_uncertainty(
  usin,
  parameters = c("B"),
  replacetiny = 1e-06,
  distribution = "gamma",
  errormeasure = 0.2,
  errortype = "CV",
  fcntorun = "comana",
  replicates = 100,
  returnprops = FALSE,
  returnresults = TRUE,
  rejectnegconsump = TRUE,
  correctstoich = TRUE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parameter_uncertainty_+3A_usin">usin</code></td>
<td>
<p>The community in which we want to calculate mineralization rates.</p>
</td></tr>
<tr><td><code id="parameter_uncertainty_+3A_parameters">parameters</code></td>
<td>
<p>A vector of parameters you want to vary.</p>
</td></tr>
<tr><td><code id="parameter_uncertainty_+3A_replacetiny">replacetiny</code></td>
<td>
<p>A number. All parameter draws less than this value are replaced with it to avoid numerical errors in the calculations. Set to zero if you want all values to be left as drawn. Default is 0.000001.</p>
</td></tr>
<tr><td><code id="parameter_uncertainty_+3A_distribution">distribution</code></td>
<td>
<p>A single string or matrix for the distribution from which to draw the parameters. If it is a matrix is has rownames of web nodes matching usin and column names matching parameters. The acceptable options are gamma, normal, uniform.</p>
</td></tr>
<tr><td><code id="parameter_uncertainty_+3A_errormeasure">errormeasure</code></td>
<td>
<p>A single value or matrix following the format of distribution recording the error. Value depends on errortype.</p>
</td></tr>
<tr><td><code id="parameter_uncertainty_+3A_errortype">errortype</code></td>
<td>
<p>A single value or matrix following the format of distribution recording the error type. This can be &quot;CV&quot; for coefficient of variation, &quot;Variance&quot; for the variance, and &quot;Min&quot; for the minimum value. The latter can only be used when the distribution is uniform.</p>
</td></tr>
<tr><td><code id="parameter_uncertainty_+3A_fcntorun">fcntorun</code></td>
<td>
<p>The function you want to run on the resulting communities and the result you want to return. Current options are comana, whomineralizes, CNsim, decompexpt. You can also include any of the outputs of comana or decompexpt to automatically subset the results to the vector of interest. For example, Cmin only returns carbon mineralization.</p>
</td></tr>
<tr><td><code id="parameter_uncertainty_+3A_replicates">replicates</code></td>
<td>
<p>The number of replicate communities you want to create and analyze.</p>
</td></tr>
<tr><td><code id="parameter_uncertainty_+3A_returnprops">returnprops</code></td>
<td>
<p>Boolean. Do you want to return the communities with parameter values or just the results of the function? Only used if returnresults is TRUE.</p>
</td></tr>
<tr><td><code id="parameter_uncertainty_+3A_returnresults">returnresults</code></td>
<td>
<p>Boolean. Do you want to return the results of the function? If this is FALSE, the fcntorun is ignored and a list of communities with parameter draws is returned.</p>
</td></tr>
<tr><td><code id="parameter_uncertainty_+3A_rejectnegconsump">rejectnegconsump</code></td>
<td>
<p>Boolean. Should the draws reject communities with negative consumption rates?</p>
</td></tr>
<tr><td><code id="parameter_uncertainty_+3A_correctstoich">correctstoich</code></td>
<td>
<p>Boolean. Do you want to correct the stoichiometry of the community before running the fcntorun? This does NOT correct the community stoichiometry returned in communitylist, so the user can see the original result without the correction applied.</p>
</td></tr>
<tr><td><code id="parameter_uncertainty_+3A_verbose">verbose</code></td>
<td>
<p>Boolean. Do you want warning messages about the functionality?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The results are always in a list. If returnprops = T, then the top lay is a list of length 2 with resultslist and communitylist attributes, otherwise only resultslist is returned. The communitylist has the communities with parameter draws in order. The resultslist has the results of the function indicated in fcntorun.
</p>


<h3>Value</h3>

<p>A list of the results. See details.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Basic example for the introductory community:
parameter_uncertainty(intro_comm)
</code></pre>

<hr>
<h2 id='productionadj'>A function to fix production efficiency.</h2><span id='topic+productionadj'></span>

<h3>Description</h3>

<p>A function to fix production efficiency.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>productionadj(usin, immobilizationlimit = Inf)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="productionadj_+3A_usin">usin</code></td>
<td>
<p>The input community to fix the production efficiency.</p>
</td></tr>
<tr><td><code id="productionadj_+3A_immobilizationlimit">immobilizationlimit</code></td>
<td>
<p>Set a limit for the maximum rate of immobilization of inorganic nitrogen for the food web per time step.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified community with new production efficiency.
</p>

<hr>
<h2 id='removenodes'>Remove nodes from community.</h2><span id='topic+removenodes'></span>

<h3>Description</h3>

<p>Remove nodes from community.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removenodes(COMM, toremove)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removenodes_+3A_comm">COMM</code></td>
<td>
<p>The community from which to remove nodes.</p>
</td></tr>
<tr><td><code id="removenodes_+3A_toremove">toremove</code></td>
<td>
<p>A vector of nodes to remove using their names.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The community without the removed nodes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>removenodes(intro_comm, c("Predator"))
</code></pre>

<hr>
<h2 id='renamenode'>Rename a node in a  community.</h2><span id='topic+renamenode'></span>

<h3>Description</h3>

<p>Rename a node in a  community.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>renamenode(COMM, oldname, newname)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="renamenode_+3A_comm">COMM</code></td>
<td>
<p>The community from which to remove nodes.</p>
</td></tr>
<tr><td><code id="renamenode_+3A_oldname">oldname</code></td>
<td>
<p>The node's old name</p>
</td></tr>
<tr><td><code id="renamenode_+3A_newname">newname</code></td>
<td>
<p>The node's new name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The community with the new name.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>renamenode(intro_comm, oldname = "Predator", newname = "NewPredator")
</code></pre>

<hr>
<h2 id='RESCALE'>A function to rescale a vector.</h2><span id='topic+RESCALE'></span>

<h3>Description</h3>

<p>A function to rescale a vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RESCALE(invec, a = 0, b = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="RESCALE_+3A_invec">invec</code></td>
<td>
<p>The vector to re-scale.</p>
</td></tr>
<tr><td><code id="RESCALE_+3A_a">a</code></td>
<td>
<p>The lower limit of the new scale.</p>
</td></tr>
<tr><td><code id="RESCALE_+3A_b">b</code></td>
<td>
<p>The upper limit of the new scale.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The scaled vector.
</p>

<hr>
<h2 id='stability'>Calculates the stability of the food web</h2><span id='topic+stability'></span>

<h3>Description</h3>

<p>Calculates the stability of the food web
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stability(
  usin,
  correctstoich = TRUE,
  forceProd = FALSE,
  smin = 1,
  method = "Jacobian"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stability_+3A_usin">usin</code></td>
<td>
<p>The community to calculate stability.</p>
</td></tr>
<tr><td><code id="stability_+3A_correctstoich">correctstoich</code></td>
<td>
<p>Boolean: Should stability be calculated after the stoichiometry is corrected with corrstoich?</p>
</td></tr>
<tr><td><code id="stability_+3A_forceprod">forceProd</code></td>
<td>
<p>Boolean: Should production efficiency be the only way to correct stoichiometry?</p>
</td></tr>
<tr><td><code id="stability_+3A_smin">smin</code></td>
<td>
<p>The value of smin in the Moorecobian.</p>
</td></tr>
<tr><td><code id="stability_+3A_method">method</code></td>
<td>
<p>One of two options: Jacobian or Moorecobian. The later uses the value of smin and adds density-dependence to the calculation at the strength of smin.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the Jacobian (or Moorecobian), eigenvalues, and the maximum eignvalue as a list.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+calc_smin">calc_smin</a></code> for the full use of the Moorecobian and <code><a href="#topic+stability2">stability2</a></code> for the estimation of stability using the functions from <code><a href="rootSolve.html#topic+jacobian.full">jacobian.full</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Basic stability calculation
stability(intro_comm)
</code></pre>

<hr>
<h2 id='stability2'>A function to run the stability analysis using the numerical simulation of the Jacobain matrix.</h2><span id='topic+stability2'></span>

<h3>Description</h3>

<p>A function to run the stability analysis using the numerical simulation of the Jacobain matrix.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stability2(
  usin,
  DIETLIMTS = NA,
  diet_correct = TRUE,
  Conly = FALSE,
  userdefinedinputs = NA,
  has_inorganic_nitrogen = FALSE,
  inorganic_nitrogen_properties = list(INN = NA, q = NA, eqmN = NA),
  forstabilityonly = TRUE,
  densitydependence = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stability2_+3A_usin">usin</code></td>
<td>
<p>The community for which to calculate stability.</p>
</td></tr>
<tr><td><code id="stability2_+3A_dietlimts">DIETLIMTS</code></td>
<td>
<p>The diet limits matrix for the stoichiometry correction (proportion of diet)?</p>
</td></tr>
<tr><td><code id="stability2_+3A_diet_correct">diet_correct</code></td>
<td>
<p>Boolean: Does the organism correct it's diet?</p>
</td></tr>
<tr><td><code id="stability2_+3A_conly">Conly</code></td>
<td>
<p>Boolean: Is the model meant for carbon only?</p>
</td></tr>
<tr><td><code id="stability2_+3A_userdefinedinputs">userdefinedinputs</code></td>
<td>
<p>Do you want to input a user defined vector of input functions? If NA the input values that keep the system at equilibrium are calculated. If not, put in a vector of input rates for each node.</p>
</td></tr>
<tr><td><code id="stability2_+3A_has_inorganic_nitrogen">has_inorganic_nitrogen</code></td>
<td>
<p>Boolean: Is there an inorganic nitrogen pool?</p>
</td></tr>
<tr><td><code id="stability2_+3A_inorganic_nitrogen_properties">inorganic_nitrogen_properties</code></td>
<td>
<p>A list of state variables for the inorganic nitrogen pool (INN = inputs, q = per capita loss of N, eqmN = equilibrium N). Must include a value for two of the three variables and has the final one as NA.</p>
</td></tr>
<tr><td><code id="stability2_+3A_forstabilityonly">forstabilityonly</code></td>
<td>
<p>Boolean: Do you only want to check the stability of the carbon equations and inorganic nitrogen? If FALSE then changes in detritus nitrogen are also included.</p>
</td></tr>
<tr><td><code id="stability2_+3A_densitydependence">densitydependence</code></td>
<td>
<p>Which nodes have density dependence? NA default means none of them do. Should be a vector of 0 (no DD) and 1 (DD) for each node.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The stability as defined by the Jacobian is estimated using the ordinary differential equations. Consequenlty, the parameters are retrieved using <code><a href="#topic+getPARAMS">getPARAMS</a></code> and then added to the function <code><a href="rootSolve.html#topic+jacobian.full">jacobian.full</a></code> using the ODE defined by <code><a href="#topic+foodwebode">foodwebode</a></code> This stability function allows the user to define density-dependence by node as present or absent. If you want to apply a uniform level of density-dependence use the function 'stability' and choose the option Moorecobain.
</p>


<h3>Value</h3>

<p>The stability calculated by the Jacobian as a list of the Jacobian, eigenvalues, and the maximum eigenvalue.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getPARAMS">getPARAMS</a></code> and <code><a href="#topic+foodwebode">foodwebode</a></code> for functions which are called internally and <code><a href="rootSolve.html#topic+jacobian.full">jacobian.full</a></code> for the method used.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Basic stability calculation:
stability2(intro_comm)

# Stability calculation with density-dependence for the animals:
stability2(intro_comm, densitydependence = c(1, 1, 1, 0, 0, 0, 0))
</code></pre>

<hr>
<h2 id='TLcheddar'>Calculates the trophic level for each tropospecies</h2><span id='topic+TLcheddar'></span>

<h3>Description</h3>

<p>Calculates the trophic level for each tropospecies
</p>


<h3>Usage</h3>

<pre><code class='language-R'>TLcheddar(W)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="TLcheddar_+3A_w">W</code></td>
<td>
<p>A matrix of trophic species. Rows eat columns.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is a subset of code provided in the package Cheddar written by Lawrence Hudson, Dan Reuman and Rob Emerson. It is licensed under a BSD_2_clause, the text of which is provided as a comment in the function code. The original package can be found on CRAN or at https://github.com/quicklizard99/cheddar/
</p>


<h3>Value</h3>

<p>A vector of trophic level assignments. The base of the food chain is 0.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>TLcheddar(intro_comm$imat)
</code></pre>

<hr>
<h2 id='TLsort'>Sorts the trophic levels from lowest to highest</h2><span id='topic+TLsort'></span>

<h3>Description</h3>

<p>Sorts the trophic levels from lowest to highest
</p>


<h3>Usage</h3>

<pre><code class='language-R'>TLsort(usin)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="TLsort_+3A_usin">usin</code></td>
<td>
<p>The community to be sorted.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The community returned after sorting
</p>


<h3>Examples</h3>

<pre><code class='language-R'>TLsort(intro_comm)
</code></pre>

<hr>
<h2 id='whomineralizes'>Direct and indirect contributions to mineralizations</h2><span id='topic+whomineralizes'></span>

<h3>Description</h3>

<p>Direct and indirect contributions to mineralizations
</p>


<h3>Usage</h3>

<pre><code class='language-R'>whomineralizes(usin, selected = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="whomineralizes_+3A_usin">usin</code></td>
<td>
<p>The community in which we want to calculate mineralization rates.</p>
</td></tr>
<tr><td><code id="whomineralizes_+3A_selected">selected</code></td>
<td>
<p>A vector of names for which you want to calculate the direct and indirect effects. Default NULL means all of them. Useful for excluding nodes whose removal breaks the community (i.e., basal nodes)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The results are labeled as follows with direct contributions calculated from the full food web and indirect contributions calculated from the food web without that node. Indirect contributions do not include the direct contribution (i.e., it is subtracted).
</p>

<dl>
<dt>DirectC</dt><dd><p>The direct contribution to carbon mineralization.</p>
</dd>
<dt>DirectN</dt><dd><p>The direct contribution to nitrogen mineralization.</p>
</dd>
<dt>IndirectC</dt><dd><p>The indirect contribution to carbon mineralization.</p>
</dd>
<dt>IndirectN</dt><dd><p>The indirect contribution to nitrogen mineralization.</p>
</dd>
</dl>

<p>The indirect contributions are calculated as the total mineralization of the community with the trophic species minus the trophic species direct mineralization minus the total mineralization without the trophic species all divided by the total mineralizaiton with the trophic species.
</p>


<h3>Value</h3>

<p>A table of node effects on mineralization rates.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Basic example for the introductory community:
whomineralizes(intro_comm)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
