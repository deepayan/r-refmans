<!DOCTYPE html><html><head><title>Help for package dformula</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {dformula}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add'><p>Add variables</p></a></li>
<li><a href='#population_data'><p>World population</p></a></li>
<li><a href='#remove'><p>Remove a subset</p></a></li>
<li><a href='#rename'><p>Rename variables</p></a></li>
<li><a href='#select'><p>Select a subset</p></a></li>
<li><a href='#transform'><p>Transform varibles</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-12-01</td>
</tr>
<tr>
<td>Title:</td>
<td>Data Manipulation using Formula</td>
</tr>
<tr>
<td>Description:</td>
<td>A tool for manipulating data using the generic formula. A single formula allows to easily add, replace and remove variables before running the analysis. </td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>utils, stats, formula.tools(&ge; 1.7.1)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/serafinialessio/dformula">https://github.com/serafinialessio/dformula</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/serafinialessio/dformula/issues">https://github.com/serafinialessio/dformula/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-12-01 09:29:09 UTC; alessioserafini</td>
</tr>
<tr>
<td>Author:</td>
<td>Alessio Serafini <a href="https://orcid.org/0000-0002-8579-5695"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Alessio Serafini &lt;srf.alessio@gmail.com&gt;</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-12-01 10:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='add'>Add variables</h2><span id='topic+add'></span>

<h3>Description</h3>

<p>Add new variables by mutating the input variables using a formula.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add(from, formula, as = NULL,
    position = c("right", "left"),
    na.remove = FALSE, logic_convert = TRUE,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_+3A_from">from</code></td>
<td>
<p>a data.frame object with variables</p>
</td></tr>
<tr><td><code id="add_+3A_formula">formula</code></td>
<td>
<p>a formula indicating the operation to create new varibles. Look at the detail section for explanantion.</p>
</td></tr>
<tr><td><code id="add_+3A_as">as</code></td>
<td>
<p>a character vector with names of new variables.</p>
</td></tr>
<tr><td><code id="add_+3A_position">position</code></td>
<td>
<p>if the new varaibles are positioned at the begining (<code>right</code>) or at the left (<code>left</code>) of the data in input.</p>
</td></tr>
<tr><td><code id="add_+3A_na.remove">na.remove</code></td>
<td>
<p>a logical value indicating whether NA values should be removed.</p>
</td></tr>
<tr><td><code id="add_+3A_logic_convert">logic_convert</code></td>
<td>
<p>logical value indicating if the new logical varaible are convertet to <code>0</code> or <code>1</code></p>
</td></tr>
<tr><td><code id="add_+3A_...">...</code></td>
<td>
<p>further arguments</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The formula is composed of two part:
</p>
<p><code> ~ new_variables</code>
</p>
<p>the right-hand are the new varaible to add starting from the existing varaibles, using the <code>I()</code> function.
</p>
<p>For example:
</p>
<p><code> ~ I(log(column_names1)) + I(column_names2/100)</code>
</p>
<p>the <code>column_names1</code> and <code>log(column_names1)</code> are added to the data.
</p>
<p>If <code>na.remove</code> is set ti <code>TRUE</code>, new variables are created, added to the dataset in input and then the observation with missing are removed.
</p>


<h3>Value</h3>

<p>Returns a data.frame object with the original and the new varaibles.
</p>


<h3>Author(s)</h3>

<p>Alessio Serafini</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("airquality")
dt &lt;- airquality

head(add(from = dt, formula =   ~ log(Ozone)))
head(add(from = dt, formula =   ~ log(Ozone) +  log(Wind)))
head(add(from = dt, formula =   ~ log(Ozone), as = "Ozone_1"))


head(add(from = dt, formula =  Ozone + Wind ~ log()))
head(add(from = dt, formula =  ~ log()))
head(add(from = dt, formula =  .~ log(), position = "left"))

head(add(from = dt, formula =  .~ log(), na.remove = TRUE))

head(add(from = dt, formula =   ~ I((Ozone&gt;5))))
head(add(from = dt, formula =   ~ I((Ozone&gt;5)), logic_convert = FALSE ))

head(add(from = dt, formula = Ozone + Wind ~ C(Ozone-Ozone)))
head(add(from = dt, formula =  ~ C(log(Ozone))))
head(add(from = dt, formula =  ~ C(5)))
head(add(from = dt, formula = Ozone + Wind ~ C(Ozone-Ozone)))
head(add(from = dt, formula =  Ozone + Wind ~ C(log(Ozone))))



foo &lt;- function(x, a = 100){return(x-x + a)}

head(add(from = dt, formula =  Ozone + Month~ I(foo(a = 100))))
head(add(from = dt, formula =  Ozone + Month~ foo()))
head(add(from = dt, formula =  ~ I(foo(Ozone, a = 100))))

</code></pre>

<hr>
<h2 id='population_data'>World population</h2><span id='topic+population_data'></span>

<h3>Description</h3>

<p>World population and countries are</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("population_data")</code></pre>


<h3>Format</h3>

<p>A data frame with 159 observations on the following 3 variables.
</p>

<dl>
<dt><code>Country</code></dt><dd><p>a character vector with countries names</p>
</dd>
<dt><code>Population</code></dt><dd><p>a numeric vector with population</p>
</dd>
<dt><code>Area</code></dt><dd><p>a numeric vector with area of the counties</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://www.worldometers.info">https://www.worldometers.info</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(population_data)
str(population_data)
</code></pre>

<hr>
<h2 id='remove'>Remove a subset</h2><span id='topic+remove'></span>

<h3>Description</h3>

<p>Selects the row and the varaibles to remove by specifing a condition using a formula.</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove(from, formula = .~., na.remove = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="remove_+3A_from">from</code></td>
<td>
<p>a data.frame object with variables</p>
</td></tr>
<tr><td><code id="remove_+3A_formula">formula</code></td>
<td>
<p>a formula indicating the operation to create new varibles. Look at the detail section for explanantion.</p>
</td></tr>
<tr><td><code id="remove_+3A_na.remove">na.remove</code></td>
<td>
<p>a logical value indicating whether NA values should be removed.</p>
</td></tr>
<tr><td><code id="remove_+3A_...">...</code></td>
<td>
<p>further arguments</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The formula is composed of two part:
</p>
<p><code>column_names ~ rows_conditions</code>
</p>
<p>the left-hand side are the names of the column to remove, and the right-hand the operation to remove the rows, using the <code>I()</code> function.
</p>
<p>For example:
</p>
<p><code>column_names1 + column_names2 ~ I(column_names1 == "a") + I(column_names2 &gt; 4)</code>
</p>
<p>first the row are selected to be removed if the observation in the <code>column_names1</code> are equal to <code>a</code> and if the observation in the <code>column_names2</code> are biggers than <code>4</code>, then the <code>column_names1</code> and <code>column_names2</code> are removed and the other varaibles are returned.
</p>
<p>If <code>na.remove</code> is set to <code>TRUE</code>, after the subsetting the observations with missing are removed.
</p>


<h3>Value</h3>

<p>Returns a data.frame object without the selected elements.
</p>


<h3>Author(s)</h3>

<p>Alessio Serafini</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("airquality")
dt &lt;- airquality

head(remove(from = dt, formula = .~ I(Ozone &gt; 10)))
head(remove(from = dt, formula = .~ I(Ozone &gt; 10), na.remove = TRUE))
head(remove(from = dt, formula = Ozone ~ .))

head(remove(from = dt, formula = Ozone~ I(Ozone &gt; 10)))
head(remove(from = dt, formula = Ozone + Wind~ I(Ozone &gt; 10)))

head(remove(from = dt, formula = Ozone + . ~ I(Ozone &gt; 10)))
head(remove(from = dt, formula = Ozone + NULL ~ I(Ozone &gt; 10)))


</code></pre>

<hr>
<h2 id='rename'>Rename variables</h2><span id='topic+rename'></span>

<h3>Description</h3>

<p>Rename variables using formulas</p>


<h3>Usage</h3>

<pre><code class='language-R'>rename(from, formula, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rename_+3A_from">from</code></td>
<td>
<p>a data.frame object with variables</p>
</td></tr>
<tr><td><code id="rename_+3A_formula">formula</code></td>
<td>
<p>a formula indicating the operation to create new varibles. Look at the detail section for explanantion.</p>
</td></tr>
<tr><td><code id="rename_+3A_...">...</code></td>
<td>
<p>further arguments</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The formula is composed of two part:
</p>
<p><code>column_names ~ new_variables_name</code>
</p>
<p>the left-hand side select the columns to change the names, and the right-hand the new names of the selected columns
</p>
<p>For example:
</p>
<p><code>column_names1 + column_names2 ~ new_variables_name1 + new_variables_name2</code>
</p>
<p>the name of the column <code>1</code> and the name of the column <code>2</code> are changed in  <code>new_variables_name1</code> and <code>new_variables_name2</code>
</p>


<h3>Value</h3>

<p>The original data.frame with changed column names
</p>


<h3>Author(s)</h3>

<p>Alessio Serafini</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("airquality")
dt &lt;- airquality

head(rename(from = dt, Ozone ~ Ozone1))
head(rename(from = dt, Ozone + Wind ~ Ozone_new + Wind_new))
</code></pre>

<hr>
<h2 id='select'>Select a subset</h2><span id='topic+select'></span>

<h3>Description</h3>

<p>Selects the row and the varaibles by specifing a condition using a formula.</p>


<h3>Usage</h3>

<pre><code class='language-R'>select(from, formula = .~., as = NULL, na.remove = FALSE, na.return = FALSE,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="select_+3A_from">from</code></td>
<td>
<p>a data.frame object with variables</p>
</td></tr>
<tr><td><code id="select_+3A_formula">formula</code></td>
<td>
<p>a formula indicating the operation to create new varibles. Look at the detail section for explanantion</p>
</td></tr>
<tr><td><code id="select_+3A_as">as</code></td>
<td>
<p>a character vector with names of new variables.</p>
</td></tr>
<tr><td><code id="select_+3A_na.remove">na.remove</code></td>
<td>
<p>a logical value indicating whether NA values should be removed</p>
</td></tr>
<tr><td><code id="select_+3A_na.return">na.return</code></td>
<td>
<p>a logical value indicating whether only the observation with NA values should be shown</p>
</td></tr>
<tr><td><code id="select_+3A_...">...</code></td>
<td>
<p>further arguments</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The formula is composed of two part:
</p>
<p><code>column_names ~ row_conditions</code>
</p>
<p>the left-hand side are the names of the column to select, and the right-hand the operations to select the rows, using the <code>I()</code> function.
</p>
<p>For example:
</p>
<p><code>column_names1 + column_names2 ~ I(column_names1 == "a") + I(column_names2 &gt; 4)</code>
</p>
<p>first the rows are selected if the observation in the <code>column_names1</code> are equal to <code>a</code> and if the observation in the <code>column_names2</code> are biggers than <code>4</code>, then the <code>column_names1</code> and <code>column_names2</code> are returned.
</p>
<p>If <code>na.remove</code> is set to <code>TRUE</code>, after the subsetting the observations with missing are removed.
</p>


<h3>Value</h3>

<p>Returns a data.frame object containing the selected elements.
</p>


<h3>Author(s)</h3>

<p>Alessio Serafini</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("airquality")
dt &lt;- airquality

## Selects columns and filter rows

select(from = dt, formula = .~ I(Ozone &gt; 10 &amp; Wind &gt; 10))
select(from = dt, formula = Ozone ~ I(Wind &gt; 10))
select(from = dt, formula = Ozone + Wind~ I(Ozone &gt; 10))

## All rows and filter columns

select(from = dt, formula = Ozone ~ .)
select(from = dt, formula = Ozone + Wind ~ NULL)




</code></pre>

<hr>
<h2 id='transform'>Transform varibles</h2><span id='topic+transform'></span>

<h3>Description</h3>

<p>Mutate input variables  using a formula.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform(from, formula, as = NULL,
          na.remove = FALSE, logic_convert = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="transform_+3A_from">from</code></td>
<td>
<p>a data.frame object with variables</p>
</td></tr>
<tr><td><code id="transform_+3A_formula">formula</code></td>
<td>
<p>a formula indicating the operation to create new varibles. Look at the detail section for explanantion.</p>
</td></tr>
<tr><td><code id="transform_+3A_as">as</code></td>
<td>
<p>a character vector with names of new variables.</p>
</td></tr>
<tr><td><code id="transform_+3A_na.remove">na.remove</code></td>
<td>
<p>a logical value indicating whether NA values should be removed.</p>
</td></tr>
<tr><td><code id="transform_+3A_logic_convert">logic_convert</code></td>
<td>
<p>logical value indicating if the new logical varaible are converted to <code>0</code> or <code>1</code></p>
</td></tr>
<tr><td><code id="transform_+3A_...">...</code></td>
<td>
<p>further arguments</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The formula is composed of two part:
</p>
<p><code>column_names ~ trasformed_variables</code>
</p>
<p>the left-hand side are the names of the column to transform, and the right-hand the operations applied to the selected columns, using the <code>I()</code> function.
</p>
<p>For example:
</p>
<p><code>column_names1 + column_names2 ~ I(log(column_names1)) + I(column_names2/100)</code>
</p>
<p>the <code>column_names1</code> is mutated in <code>log(column_names1)</code> and <code>column_names2</code> is divided by 100.
</p>
<p>If <code>na.remove</code> is set to <code>TRUE</code>,  variables are mutaded, and then the observation with missing are removed.
</p>


<h3>Value</h3>

<p>Returns the original data.frame object with mutaded varaibles.
</p>


<h3>Author(s)</h3>

<p>Alessio Serafini</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("airquality")
dt &lt;- airquality

head(transform(from = dt, Ozone ~ I(Ozone-Ozone)))
head(transform(from = dt, Ozone ~ log(Ozone)))
head(transform(from = dt, Ozone ~ I(Ozone&gt;5)))
head(transform(from = dt, Ozone ~ I(Ozone&gt;5), logic_convert = TRUE))


head(transform(from = dt,  ~ log()))
head(transform(from = dt, . ~ log()))
head(transform(from = dt, NULL ~ log()))

head(transform(from = dt, Ozone + Day ~ log()))
head(transform(from = dt, Ozone + Day ~ log(Ozone/100) + exp(Day)))
head(transform(from = dt, Ozone ~ log()))

head(transform(from = dt,Ozone + Wind ~ C(log(1))))
head(transform(from = dt,Ozone + Wind ~ log(Ozone) + C(10)))


head(transform(from = dt, Ozone + Wind~ C(log(Ozone))))


foo &lt;- function(x, a = 100){return(x-x + a)}
head(transform(from = dt, Ozone + Wind ~ foo(a = 100)))
head(transform(from = dt, . ~ foo(a = 100)))

head(transform(from = dt, Ozone + Wind ~ log(log(1))))

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
