<!DOCTYPE html><html><head><title>Help for package featurefinder</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {featurefinder}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#addFeatures'><p>addFeatures</p></a></li>
<li><a href='#dat'><p>dat</p></a></li>
<li><a href='#dat0'><p>dat0</p></a></li>
<li><a href='#data'><p>data</p></a></li>
<li><a href='#doAllFactors'><p>doAllFactors</p></a></li>
<li><a href='#expr'><p>expr</p></a></li>
<li><a href='#fileConn'><p>fileConn</p></a></li>
<li><a href='#filename'><p>filename</p></a></li>
<li><a href='#findFeatures'><p>findFeatures</p></a></li>
<li><a href='#futuresdata'><p>futuresdata</p></a></li>
<li><a href='#generateResidualCutoffCode'><p>generateResidualCutoffCode</p></a></li>
<li><a href='#generateTrees'><p>generateTrees</p></a></li>
<li><a href='#getVarAv'><p>getVarAv</p></a></li>
<li><a href='#i'><p>i</p></a></li>
<li><a href='#mainfaclevels'><p>mainfaclevels</p></a></li>
<li><a href='#maxFactorLevels'><p>maxFactorLevels</p></a></li>
<li><a href='#mpgdata'><p>mpgdata</p></a></li>
<li><a href='#names'><p>names</p></a></li>
<li><a href='#parseSplits'><p>parseSplits</p></a></li>
<li><a href='#pathterms'><p>pathterms</p></a></li>
<li><a href='#printResiduals'><p>printResiduals</p></a></li>
<li><a href='#runname'><p>runname</p></a></li>
<li><a href='#saveTree'><p>saveTree</p></a></li>
<li><a href='#splitlist'><p>splitlist</p></a></li>
<li><a href='#t'><p>t</p></a></li>
<li><a href='#tree'><p>tree</p></a></li>
<li><a href='#treeGenerationMinBucket'><p>treeGenerationMinBucket</p></a></li>
<li><a href='#trees'><p>trees</p></a></li>
<li><a href='#treesAll'><p>treesAll</p></a></li>
<li><a href='#treeSummaryMinBucket'><p>treeSummaryMinBucket</p></a></li>
<li><a href='#treeSummaryResidualMagnitudeThreshold'><p>treeSummaryResidualMagnitudeThreshold</p></a></li>
<li><a href='#treeSummaryResidualThreshold'><p>treeSummaryResidualThreshold</p></a></li>
<li><a href='#vars'><p>vars</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Feature Finder</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Finds modelling features through a detailed analysis of model residuals using 'rpart' classification and regression trees. Scans the residuals of a model across subsets of the data to identify areas where the model prediction differs from the actual target variable. S. Chatterjee, A. S. Hadi (2006) &lt;<a href="https://doi.org/10.1002%2F0470055464">doi:10.1002/0470055464</a>&gt;.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.0.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>png, knitr, Metrics, mlr, gbm, randomForest</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Imports:</td>
<td>rpart, rpart.plot, utils, plyr, grDevices</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2018-12-03 03:21:40 UTC; davisri</td>
</tr>
<tr>
<td>Author:</td>
<td>Richard Davis [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Richard Davis &lt;davisconsulting@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2018-12-03 05:20:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='addFeatures'>addFeatures</h2><span id='topic+addFeatures'></span>

<h3>Description</h3>

<p>Use the results of findFeatures to append promising features to a dataframe for further testing
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addFeatures(df, path, prefix)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addFeatures_+3A_df">df</code></td>
<td>
<p>A dataframe</p>
</td></tr>
<tr><td><code id="addFeatures_+3A_path">path</code></td>
<td>
<p>A string</p>
</td></tr>
<tr><td><code id="addFeatures_+3A_prefix">prefix</code></td>
<td>
<p>A list of trees generated by saveTree</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe with extra features appended
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
require(featurefinder)
data(futuresdata)
data=futuresdata
data$SMIfactor=paste("smi",as.matrix(data$SMIfactor),sep="")
n=length(data$DAX)
nn=floor(length(data$DAX)/2)

# Can we predict the relative movement of DAX and SMI?
data$y=data$DAX*0 # initialise the target to 0
data$y[1:(n-1)]=((data$DAX[2:n])-(data$DAX[1:(n-1)]))/
  (data$DAX[1:(n-1)])-(data$SMI[2:n]-(data$SMI[1:(n-1)]))/(data$SMI[1:(n-1)])

# Fit a simple model
thismodel=lm(formula=y ~ .,data=data)
expected=predict(thismodel,data)
actual=data$y
residual=actual-expected
data=cbind(data,expected, actual, residual)

CSVPath=tempdir()
fcsv=paste(CSVPath,"/futuresdata.csv",sep="")
write.csv(data[(nn+1):(length(data$y)),],file=fcsv,row.names=FALSE)
exclusionVars="\"residual\",\"expected\", \"actual\",\"y\""
factorToNumericList=c()

# Now the dataset is prepared, try to find new features
tempDir=findFeatures(outputPath="NoPath", fcsv, exclusionVars,
factorToNumericList,                     
treeGenerationMinBucket=50,
treeSummaryMinBucket=20,
useSubDir=FALSE)  
         
newfeat1=((data$SMIfactor==0) &amp; (data$CAC &lt; 2253) &amp; (data$CAC&lt; 1998) &amp; (data$CAC&gt;=1882)) * 1.0
newfeat2=((data$SMIfactor==1) &amp; (data$SMI &lt; 7837) &amp; (data$SMI &gt;= 7499)) * 1.0
newfeatures=cbind(newfeat1, newfeat2) # create columns for the newly found features
datanew=cbind(data,newfeatures)
thismodel=lm(formula=y ~ .,data=datanew)
expectednew=predict(thismodel,datanew)

requireNamespace("Metrics")
OriginalRMSE = Metrics::rmse(data$y,expected)
NewRMSE = Metrics::rmse(data$y,expectednew)

print(paste("OriginalRMSE = ",OriginalRMSE))
print(paste("NewRMSE = ",NewRMSE))

# Append new features to a dataframe automatically
dataWithNewFeatures = addFeatures(df=data, path=tempDir, prefix="auto_")
head(df)
</code></pre>

<hr>
<h2 id='dat'>dat</h2><span id='topic+dat'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>A data frame with 234 rows and 11 variables</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(dat)
head(dat)
</code></pre>

<hr>
<h2 id='dat0'>dat0</h2><span id='topic+dat0'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>A data frame with 234 rows and 11 variables</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(dat0)
head(dat0)
</code></pre>

<hr>
<h2 id='data'>data</h2><span id='topic+data'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>A data frame with 234 rows and 11 variables</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(data)
head(data)
</code></pre>

<hr>
<h2 id='doAllFactors'>doAllFactors</h2><span id='topic+doAllFactors'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>A boolean to indicate whether to scan over all categorical factor partitions.</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(doAllFactors)
head(doAllFactors)
</code></pre>

<hr>
<h2 id='expr'>expr</h2><span id='topic+expr'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>A string describing the formula defining a leaf node.</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(expr)
head(expr)
</code></pre>

<hr>
<h2 id='fileConn'>fileConn</h2><span id='topic+fileConn'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>A text output object.</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(fileConn)
head(fileConn)
</code></pre>

<hr>
<h2 id='filename'>filename</h2><span id='topic+filename'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>A filename for output.</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(filename)
head(filename)
</code></pre>

<hr>
<h2 id='findFeatures'>findFeatures</h2><span id='topic+findFeatures'></span>

<h3>Description</h3>

<p>Perform analysis of residuals grouped by factor to identify features which explain the target variable
</p>


<h3>Usage</h3>

<pre><code class='language-R'>findFeatures(outputPath = "NoPath", fcsv, exclusionVars, factorToNumericList,
  treeGenerationMinBucket = 20, treeSummaryMinBucket = 50,
  treeSummaryResidualThreshold = 0,
  treeSummaryResidualMagnitudeThreshold = 0, doAllFactors = TRUE,
  maxFactorLevels = 20, useSubDir = TRUE, tempDirFolderName = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="findFeatures_+3A_outputpath">outputPath</code></td>
<td>
<p>A string containing the location of the input csv file. Results are also stored in this location. Set to &quot;NoPath&quot; to use tempdir() or leave blank</p>
</td></tr>
<tr><td><code id="findFeatures_+3A_fcsv">fcsv</code></td>
<td>
<p>A string containing the name of a csv file</p>
</td></tr>
<tr><td><code id="findFeatures_+3A_exclusionvars">exclusionVars</code></td>
<td>
<p>A string consisting of a list of variable names with double quotes around each variable</p>
</td></tr>
<tr><td><code id="findFeatures_+3A_factortonumericlist">factorToNumericList</code></td>
<td>
<p>A list of variable names as strings</p>
</td></tr>
<tr><td><code id="findFeatures_+3A_treegenerationminbucket">treeGenerationMinBucket</code></td>
<td>
<p>Desired minimum number of data points per leaf (default 20)</p>
</td></tr>
<tr><td><code id="findFeatures_+3A_treesummaryminbucket">treeSummaryMinBucket</code></td>
<td>
<p>Minimum number of data points in each leaf for the summary (default 50)</p>
</td></tr>
<tr><td><code id="findFeatures_+3A_treesummaryresidualthreshold">treeSummaryResidualThreshold</code></td>
<td>
<p>Minimum residual in the summary (default 0 for positive residuals)</p>
</td></tr>
<tr><td><code id="findFeatures_+3A_treesummaryresidualmagnitudethreshold">treeSummaryResidualMagnitudeThreshold</code></td>
<td>
<p>Minimum residual magnitude in the summary (default 0 i.e. no restriction)</p>
</td></tr>
<tr><td><code id="findFeatures_+3A_doallfactors">doAllFactors</code></td>
<td>
<p>Flag to indicate whether to analyse the levels of all factor variables (default TRUE)</p>
</td></tr>
<tr><td><code id="findFeatures_+3A_maxfactorlevels">maxFactorLevels</code></td>
<td>
<p>Maximum number of levels per factor before it is converted to numeric (default 20)</p>
</td></tr>
<tr><td><code id="findFeatures_+3A_usesubdir">useSubDir</code></td>
<td>
<p>Flag to specify whether the partition trees should be saved in the current directory or a subdirectory</p>
</td></tr>
<tr><td><code id="findFeatures_+3A_tempdirfoldername">tempDirFolderName</code></td>
<td>
<p>specify a subfolder name if writing multiple scans to the temporary directory</p>
</td></tr>
</table>


<h3>Value</h3>

<p>outputPath returns the location of the output for reference in addFeatures and for any other purpose. Saves residual CART trees and associated highlighted residuals for each to the path provided.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
require(featurefinder)
data(futuresdata)
data=futuresdata
data$SMIfactor=paste("smi",as.matrix(data$SMIfactor),sep="")
n=length(data$DAX)
nn=floor(length(data$DAX)/2)

# Can we predict the relative movement of DAX and SMI?
data$y=data$DAX*0 # initialise the target to 0
data$y[1:(n-1)]=((data$DAX[2:n])-(data$DAX[1:(n-1)]))/
  (data$DAX[1:(n-1)])-(data$SMI[2:n]-(data$SMI[1:(n-1)]))/(data$SMI[1:(n-1)])

# Fit a simple model
thismodel=lm(formula=y ~ .,data=data)
expected=predict(thismodel,data)
actual=data$y
residual=actual-expected
data=cbind(data,expected, actual, residual)

CSVPath=tempdir()
fcsv=paste(CSVPath,"/futuresdata.csv",sep="")
write.csv(data[(nn+1):(length(data$y)),],file=fcsv,row.names=FALSE)
exclusionVars="\"residual\",\"expected\", \"actual\",\"y\""
factorToNumericList=c()

# Now the dataset is prepared, try to find new features
findFeatures(outputPath="NoPath", fcsv, exclusionVars,factorToNumericList,                     
         treeGenerationMinBucket=50,
         treeSummaryMinBucket=20,
         useSubDir=FALSE)  
         
newfeat1=((data$SMIfactor==0) &amp; (data$CAC &lt; 2253) &amp; (data$CAC&lt; 1998) &amp; (data$CAC&gt;=1882)) * 1.0
newfeat2=((data$SMIfactor==1) &amp; (data$SMI &lt; 7837) &amp; (data$SMI &gt;= 7499)) * 1.0
newfeatures=cbind(newfeat1, newfeat2) # create columns for the newly found features
datanew=cbind(data,newfeatures)
thismodel=lm(formula=y ~ .,data=datanew)
expectednew=predict(thismodel,datanew)

requireNamespace("Metrics")
OriginalRMSE = Metrics::rmse(data$y,expected)
NewRMSE = Metrics::rmse(data$y,expectednew)

print(paste("OriginalRMSE = ",OriginalRMSE))
print(paste("NewRMSE = ",NewRMSE))
</code></pre>

<hr>
<h2 id='futuresdata'>futuresdata</h2><span id='topic+futuresdata'></span>

<h3>Description</h3>

<p>Sample futures data based on dataset EuStockMarkets in the datasets package.
</p>


<h3>Format</h3>

<p>A data frame with 1860 rows and 4 variables</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="stat.ethz.ch/R-manual/R-devel/library/datasets/html/00Index.html">stat.ethz.ch/R-manual/R-devel/library/datasets/html/00Index.html</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(futuresdata)
head(futuresdata)
</code></pre>

<hr>
<h2 id='generateResidualCutoffCode'>generateResidualCutoffCode</h2><span id='topic+generateResidualCutoffCode'></span>

<h3>Description</h3>

<p>For each tree print a summary of the significant residuals as specified by the user
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generateResidualCutoffCode(data, filename, trees, names, runname, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generateResidualCutoffCode_+3A_data">data</code></td>
<td>
<p>A dataframe</p>
</td></tr>
<tr><td><code id="generateResidualCutoffCode_+3A_filename">filename</code></td>
<td>
<p>A string</p>
</td></tr>
<tr><td><code id="generateResidualCutoffCode_+3A_trees">trees</code></td>
<td>
<p>A list of trees generated by saveTree</p>
</td></tr>
<tr><td><code id="generateResidualCutoffCode_+3A_names">names</code></td>
<td>
<p>A list of level names</p>
</td></tr>
<tr><td><code id="generateResidualCutoffCode_+3A_runname">runname</code></td>
<td>
<p>A string corresponding to the name of the factor variable being analysed</p>
</td></tr>
<tr><td><code id="generateResidualCutoffCode_+3A_...">...</code></td>
<td>
<p>and parameters to be passed through</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of residuals for each tree provided.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
require(featurefinder)
data(examples)
generateResidualCutoffCode(data=dat0,"treesAll.txt",treesAll,mainfaclevels, runname,
  treeGenerationMinBucket=treeGenerationMinBucket,
  treeSummaryMinBucket=treeSummaryMinBucket,
  treeSummaryResidualThreshold=treeSummaryResidualThreshold,
  treeSummaryResidualMagnitudeThreshold=treeSummaryResidualMagnitudeThreshold,
  doAllFactors=doAllFactors,
  maxFactorLevels=maxFactorLevels)
</code></pre>

<hr>
<h2 id='generateTrees'>generateTrees</h2><span id='topic+generateTrees'></span>

<h3>Description</h3>

<p>Generate a residual tree for each level of factor mainfac
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generateTrees(data, vars, expr, outputPath, runname, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generateTrees_+3A_data">data</code></td>
<td>
<p>A dataframe</p>
</td></tr>
<tr><td><code id="generateTrees_+3A_vars">vars</code></td>
<td>
<p>A list of candidate predictors</p>
</td></tr>
<tr><td><code id="generateTrees_+3A_expr">expr</code></td>
<td>
<p>A expression to be modelled by the RPART tree</p>
</td></tr>
<tr><td><code id="generateTrees_+3A_outputpath">outputPath</code></td>
<td>
<p>The output directory</p>
</td></tr>
<tr><td><code id="generateTrees_+3A_runname">runname</code></td>
<td>
<p>A string corresponding to the name of the variable being modelled</p>
</td></tr>
<tr><td><code id="generateTrees_+3A_...">...</code></td>
<td>
<p>and parameters to be passed through</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of residual trees for each level of the mainfac factor provided
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
require(featurefinder)
data(examples)
treesThisvar=generateTrees(data=dat0,vars,expr,outputPath=tempdir(),runname,
  treeGenerationMinBucket=treeGenerationMinBucket,
  treeSummaryMinBucket=treeSummaryMinBucket,
  treeSummaryResidualThreshold=treeSummaryResidualThreshold,
  treeSummaryResidualMagnitudeThreshold=treeSummaryResidualMagnitudeThreshold,
  doAllFactors=doAllFactors,
  maxFactorLevels=maxFactorLevels)
</code></pre>

<hr>
<h2 id='getVarAv'>getVarAv</h2><span id='topic+getVarAv'></span>

<h3>Description</h3>

<p>This function generates a residual tree on a subset of the data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getVarAv(dd, varAv, varString)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getVarAv_+3A_dd">dd</code></td>
<td>
<p>A dataframe</p>
</td></tr>
<tr><td><code id="getVarAv_+3A_varav">varAv</code></td>
<td>
<p>A string corresponding to the numeric field to be averaged within each leaf node</p>
</td></tr>
<tr><td><code id="getVarAv_+3A_varstring">varString</code></td>
<td>
<p>A string</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An average of the numeric variable varString in the segment
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
require(featurefinder)
data(examples)
av=getVarAv(dat,"expected",pathterms)
</code></pre>

<hr>
<h2 id='i'>i</h2><span id='topic+i'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>An index variable used in examples.</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(i)
head(i)
</code></pre>

<hr>
<h2 id='mainfaclevels'>mainfaclevels</h2><span id='topic+mainfaclevels'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>Levels of the main or current factor being scanned.</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(mainfaclevels)
head(mainfaclevels)
</code></pre>

<hr>
<h2 id='maxFactorLevels'>maxFactorLevels</h2><span id='topic+maxFactorLevels'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>Maximum allowable number of factor levels before the variable is converted to numeric.</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(maxFactorLevels)
head(maxFactorLevels)
</code></pre>

<hr>
<h2 id='mpgdata'>mpgdata</h2><span id='topic+mpgdata'></span>

<h3>Description</h3>

<p>Sample car data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>A data frame with 234 rows and 11 variables</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(mpgdata)
head(mpgdata)
</code></pre>

<hr>
<h2 id='names'>names</h2><span id='topic+names'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>A list of variable names used in examples.</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(names)
head(names)
</code></pre>

<hr>
<h2 id='parseSplits'>parseSplits</h2><span id='topic+parseSplits'></span>

<h3>Description</h3>

<p>Extract information relating to the paths and volume of data in the leaves of the tree
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parseSplits(thistree)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parseSplits_+3A_thistree">thistree</code></td>
<td>
<p>A tree</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of parsed splits.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
require(featurefinder)
data(examples)
parseSplits(treesAll[[1]][[2]])
</code></pre>

<hr>
<h2 id='pathterms'>pathterms</h2><span id='topic+pathterms'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>A string defining a leaf node formula.</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(pathterms)
head(pathterms)
</code></pre>

<hr>
<h2 id='printResiduals'>printResiduals</h2><span id='topic+printResiduals'></span>

<h3>Description</h3>

<p>This function generates a residual tree on a subset of the data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>printResiduals(fileConn, all, dat, runname, levelname,
  treeSummaryResidualThreshold, treeSummaryMinBucket,
  treeSummaryResidualMagnitudeThreshold, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="printResiduals_+3A_fileconn">fileConn</code></td>
<td>
<p>A file connection</p>
</td></tr>
<tr><td><code id="printResiduals_+3A_all">all</code></td>
<td>
<p>A dataframe</p>
</td></tr>
<tr><td><code id="printResiduals_+3A_dat">dat</code></td>
<td>
<p>The dataset</p>
</td></tr>
<tr><td><code id="printResiduals_+3A_runname">runname</code></td>
<td>
<p>A string corresponding to the name of the factor being analysed</p>
</td></tr>
<tr><td><code id="printResiduals_+3A_levelname">levelname</code></td>
<td>
<p>A string corresponding to the factor level being analysed</p>
</td></tr>
<tr><td><code id="printResiduals_+3A_treesummaryresidualthreshold">treeSummaryResidualThreshold</code></td>
<td>
<p>The minimum residual threshold</p>
</td></tr>
<tr><td><code id="printResiduals_+3A_treesummaryminbucket">treeSummaryMinBucket</code></td>
<td>
<p>The minumum volume per leaf</p>
</td></tr>
<tr><td><code id="printResiduals_+3A_treesummaryresidualmagnitudethreshold">treeSummaryResidualMagnitudeThreshold</code></td>
<td>
<p>Minimun residual magnitude</p>
</td></tr>
<tr><td><code id="printResiduals_+3A_...">...</code></td>
<td>
<p>and parameters to be passed through</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Residuals are printed and also saved in a simplified format.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
require(featurefinder)
data(examples)
printResiduals(fileConn,splitlist[t][[1]],dat, runname, names[t],
  treeSummaryResidualThreshold,treeSummaryMinBucket,
  treeSummaryResidualMagnitudeThreshold)
</code></pre>

<hr>
<h2 id='runname'>runname</h2><span id='topic+runname'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>A string corresponding to the name of the variable being modelled</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(runname)
head(runname)
</code></pre>

<hr>
<h2 id='saveTree'>saveTree</h2><span id='topic+saveTree'></span>

<h3>Description</h3>

<p>Generate a residual tree on a subset of the data specified by the factor level mainfaclev (main factor level)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saveTree(data, vars, expr, i, outputPath, varname, mainfaclev,
  treeGenerationMinBucket, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="saveTree_+3A_data">data</code></td>
<td>
<p>A dataframe containing the residual and some predictors</p>
</td></tr>
<tr><td><code id="saveTree_+3A_vars">vars</code></td>
<td>
<p>A list of candidate predictors</p>
</td></tr>
<tr><td><code id="saveTree_+3A_expr">expr</code></td>
<td>
<p>A expression to be modelled by the RPART tree</p>
</td></tr>
<tr><td><code id="saveTree_+3A_i">i</code></td>
<td>
<p>An integer corresponding to the factor level</p>
</td></tr>
<tr><td><code id="saveTree_+3A_outputpath">outputPath</code></td>
<td>
<p>The output directory</p>
</td></tr>
<tr><td><code id="saveTree_+3A_varname">varname</code></td>
<td>
<p>A string corresponding to the name of the factor variable being analysed</p>
</td></tr>
<tr><td><code id="saveTree_+3A_mainfaclev">mainfaclev</code></td>
<td>
<p>A level of the mainfac factor</p>
</td></tr>
<tr><td><code id="saveTree_+3A_treegenerationminbucket">treeGenerationMinBucket</code></td>
<td>
<p>Minimum size for tree generation</p>
</td></tr>
<tr><td><code id="saveTree_+3A_...">...</code></td>
<td>
<p>and parameters to be passed through</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tree object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
require(featurefinder)
data(examples)
fit1=saveTree(data,vars,expr,i,outputPath=tempdir(),runname,mainfaclevels[1],
     treeGenerationMinBucket)
</code></pre>

<hr>
<h2 id='splitlist'>splitlist</h2><span id='topic+splitlist'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>Sample list of node split formulae.</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(splitlist)
head(splitlist)
</code></pre>

<hr>
<h2 id='t'>t</h2><span id='topic+t'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>A sample tree.</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(t)
head(t)
</code></pre>

<hr>
<h2 id='tree'>tree</h2><span id='topic+tree'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>A sample tree object.</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(tree)
head(tree)
</code></pre>

<hr>
<h2 id='treeGenerationMinBucket'>treeGenerationMinBucket</h2><span id='topic+treeGenerationMinBucket'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>Minimum number of data points per leaf allowed in tree generation.</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(treeGenerationMinBucket)
head(treeGenerationMinBucket)
</code></pre>

<hr>
<h2 id='trees'>trees</h2><span id='topic+trees'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>Sample tree set.</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(trees)
head(trees)
</code></pre>

<hr>
<h2 id='treesAll'>treesAll</h2><span id='topic+treesAll'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>Full dataset tree example.</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(treesAll)
head(treesAll)
</code></pre>

<hr>
<h2 id='treeSummaryMinBucket'>treeSummaryMinBucket</h2><span id='topic+treeSummaryMinBucket'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>Minimum number of data points per leaf allowed in tree summary.</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(treeSummaryMinBucket)
head(treeSummaryMinBucket)
</code></pre>

<hr>
<h2 id='treeSummaryResidualMagnitudeThreshold'>treeSummaryResidualMagnitudeThreshold</h2><span id='topic+treeSummaryResidualMagnitudeThreshold'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>Minimum allowed residual magnitude in leaf summary generation.</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(treeSummaryResidualMagnitudeThreshold)
head(treeSummaryResidualMagnitudeThreshold)
</code></pre>

<hr>
<h2 id='treeSummaryResidualThreshold'>treeSummaryResidualThreshold</h2><span id='topic+treeSummaryResidualThreshold'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>Minimum allowed residual value in leaf summary generation.</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(treeSummaryResidualThreshold)
head(treeSummaryResidualThreshold)
</code></pre>

<hr>
<h2 id='vars'>vars</h2><span id='topic+vars'></span>

<h3>Description</h3>

<p>Sample data based on dataset mpg in the ggplot2 package
</p>


<h3>Format</h3>

<p>List of predictor variables.</p>


<h3>Author(s)</h3>

<p>Richard Davis <a href="mailto:richard.davis@cba.com.au">richard.davis@cba.com.au</a>
</p>


<h3>Source</h3>

<p><a href="ggplot2.org">ggplot2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(vars)
head(vars)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
