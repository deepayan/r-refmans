<!DOCTYPE html><html><head><title>Help for package shinyaframe</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {shinyaframe}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#aDataScene'><p>A-Frame Scene with R data</p></a></li>
<li><a href='#aDataScene-shiny'><p>Shiny bindings for aDataScene</p></a></li>
<li><a href='#aframetags'><p>A-Frame Custom Elements</p></a></li>
<li><a href='#shinyaframe'><p>WebVR Data Visualizations</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>'WebVR' Data Visualizations with 'RStudio Shiny' and 'Mozilla
A-Frame'</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Make R data available in Web-based virtual reality experiences
  for immersive, cross-platform data visualizations. Includes the 'gg-aframe'
  JavaScript package for a Grammar of Graphics declarative HTML syntax to create
  3-dimensional data visualizations with 'Mozilla A-Frame' <a href="https://aframe.io">https://aframe.io</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/AGPL-3">AGPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>shiny, htmlwidgets, htmltools</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>5.0.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, scales, dplyr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2017-11-24 17:30:32 UTC; vrbox</td>
</tr>
<tr>
<td>Author:</td>
<td>William Murphy [cre, aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>William Murphy &lt;william.murphy.rd@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2017-11-26 15:29:43 UTC</td>
</tr>
</table>
<hr>
<h2 id='aDataScene'>A-Frame Scene with R data</h2><span id='topic+aDataScene'></span>

<h3>Description</h3>

<p>Create an HTML widget to sync R data with an A-Frame
scene via the data-binding A-Frame component.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aDataScene(data, elementId = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="aDataScene_+3A_data">data</code></td>
<td>
<p>A data frame or a list of vectors, matrices, and/or data frames</p>
</td></tr>
<tr><td><code id="aDataScene_+3A_elementid">elementId</code></td>
<td>
<p>Optionally define the output HTML element <code>id</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Data will be synced to the <code>data-binding</code> system from the
<a href="https://www.npmjs.com/package/gg-aframe">gg-aframe</a> JavaScript
library for A-Frame. Data can be bound to automatically update components
in the scene with the <code>data-binding</code> A-Frame component. Repeat
calls (e.g. within a Shiny reactive expression) will update the
<code>data-binding</code> store and refresh bound components with the new data.
</p>
<p>If <code>data</code> is a data frame, each variable will be available, by name,
as a JavaScript Array in the scene data store (i.e. long form).
If it is a list, each list item will be available, by name, as a
JavaScript Array in the scene data store. Data frames within the list
will be available as an array of Objects, with each object
representing a row from the data frame (i.e. wide form).
</p>
<p>To send multiple data frames in long form, combine them with
<code>c</code>, and each column will be available by name
in the A-Frame <code>data-binding</code> system. To send multiple
data frames in wide form, combine them as named items in
a <code>list</code>, and each data frame will be available as an array of
objects (rows) under the name used.
</p>
<p>Note: <code>aDataScene</code> is only compatible for use in Shiny
apps viewed with a modern Web browser and internet connection.
WebVR data visualizations are not available in Rmd documents, R Notebooks,
or the RStudio Viewer at this time.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+renderADataScene">renderADataScene</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
library(scales)

# Execute within a renderADataScene call in a Shiny server
iris %&gt;%
  # scale positional data to (0,1)
  mutate_if(is.numeric, rescale) %&gt;%
  # make data available in JavaScript
  aDataScene()

</code></pre>

<hr>
<h2 id='aDataScene-shiny'>Shiny bindings for aDataScene</h2><span id='topic+aDataScene-shiny'></span><span id='topic+aDataSceneOutput'></span><span id='topic+renderADataScene'></span>

<h3>Description</h3>

<p>Output and render functions for using aDataScene within Shiny
applications.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aDataSceneOutput(outputId, ..., skipDependencies = FALSE)

renderADataScene(expr, env = parent.frame(), quoted = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="aDataScene-shiny_+3A_outputid">outputId</code></td>
<td>
<p>output variable to read from</p>
</td></tr>
<tr><td><code id="aDataScene-shiny_+3A_...">...</code></td>
<td>
<p>Attributes, A-Frame components, and/or child elements for
output in HTML.</p>
</td></tr>
<tr><td><code id="aDataScene-shiny_+3A_skipdependencies">skipDependencies</code></td>
<td>
<p>Option to omit packaged A-Frame JavaScript
libraries. See details.</p>
</td></tr>
<tr><td><code id="aDataScene-shiny_+3A_expr">expr</code></td>
<td>
<p>An expression that returns a call to <code>aDataScene</code></p>
</td></tr>
<tr><td><code id="aDataScene-shiny_+3A_env">env</code></td>
<td>
<p>The environment in which to evaluate <code>expr</code>.</p>
</td></tr>
<tr><td><code id="aDataScene-shiny_+3A_quoted">quoted</code></td>
<td>
<p>Is <code>expr</code> a quoted expression (with <code>quote()</code>)? This
is useful if you want to save an expression in a variable.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A-Frame v0.7.1, gg-aframe v0.2.3, and
aframe-environment-component v1.0.0 come packaged with
shinyaframe. To use different versions, set <code>skipDependencies</code>
to <code>TRUE</code> and source the libraries directly (for
example with <code><a href="htmltools.html#topic+includeScript">includeScript</a></code> or
<code><a href="htmltools.html#topic+tag">tag</a></code>).
</p>


<h3>See Also</h3>

<p><a href="https://github.com/wmurphyrd/gg-aframe#readme">'gg-aframe' syntax documentation</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Simple 3D scatterplot.
# See package vignette for additional asethetics, guides, and legends
if (interactive()) {
  library(dplyr)
  library(shiny)
  library(scales)
  shinyApp(
    ui = fluidPage(
      aDataSceneOutput(
        outputId = "mydatascene",
        # gg-aframe plot syntax
        atags$entity(
          plot = "", position = "0 1.6 -1.38", rotation = "0 45 0",
          atags$entity(
            `layer-point` = "", `mod-oscillate` = "",
            `data-binding__sepal.length`="target: layer-point.x",
            `data-binding__sepal.width`="target: layer-point.y",
            `data-binding__petal.length`="target: layer-point.z",
            # add 4th positional by animating y position between two mappings
            `data-binding__petal.width`="target: mod-oscillate.y",
            `data-binding__species`="target: layer-point.shape"
          )
        )
      )
    ),
    server = function(input, output, session) {
      output$mydatascene &lt;- renderADataScene({
        names(iris) &lt;- tolower(names(iris))
        iris %&gt;%
          # scale positional data
          mutate_if(is.numeric, rescale) %&gt;%
          aDataScene()
      })
    }
  )
}

</code></pre>

<hr>
<h2 id='aframetags'>A-Frame Custom Elements</h2><span id='topic+aframeAssets'></span><span id='topic+aframeBox'></span><span id='topic+aframeEntity'></span><span id='topic+aframeMixin'></span><span id='topic+aframePrimitive'></span><span id='topic+aframeScene'></span><span id='topic+aframeSphere'></span><span id='topic+aframetags'></span><span id='topic+atags'></span>

<h3>Description</h3>

<p>Functions to output A-Frame's custom HTML elements
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aframeScene(...)

aframeAssets(...)

aframeMixin(...)

aframeEntity(...)

aframeSphere(...)

aframeBox(...)

aframePrimitive(primitive = "entity", ...)

atags
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="aframetags_+3A_...">...</code></td>
<td>
<p>Attributes, components, and/or child elements</p>
</td></tr>
<tr><td><code id="aframetags_+3A_primitive">primitive</code></td>
<td>
<p>Primitive name (excluding the &quot;a-&quot;)</p>
</td></tr>
</table>


<h3>Format</h3>

<p>The <code>atags</code> list contains all of these
tag functions for convenient access.</p>


<h3>Details</h3>

<p>These functions are just simple wrappers for
<code><a href="htmltools.html#topic+tag">tag</a></code> to output common A-Frame custom elements.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>aframeScene</code>: Top level scene entity
</p>
</li>
<li> <p><code>aframeAssets</code>: Specify assets for pre-loading
</p>
</li>
<li> <p><code>aframeMixin</code>: Reusable component specifications
</p>
</li>
<li> <p><code>aframeEntity</code>: Generic entity
</p>
</li>
<li> <p><code>aframeSphere</code>: Sphere primitive
</p>
</li>
<li> <p><code>aframeBox</code>: Box primitive
</p>
</li>
<li> <p><code>aframePrimitive</code>: All other primitives
</p>
</li></ul>


<h3>See Also</h3>

<p><a href="https://aframe.io">A-Frame Documentation</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Construct A-Frame HTML syntax for a 3D scene with a red box and blue sky
atags$scene(
  atags$box(color = "red", position = "0 0.5 -3"),
  atags$other("sky", color = "#89b6ff")
)

</code></pre>

<hr>
<h2 id='shinyaframe'>WebVR Data Visualizations</h2><span id='topic+shinyaframe'></span><span id='topic+shinyaframe-package'></span>

<h3>Description</h3>

<p>Make R data available in Web-based virtual reality experiences
for immersive, cross-platform data visualizations. Includes the 'gg-aframe'
JavaScript package for a Grammar of Graphics declarative HTML syntax to
create 3-dimensional visualizations.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example Shiny app from package vignette
if (interactive()) {
  library(shiny)
  library(dplyr)
  library(scales)
  library(shinyaframe)

  shinyApp(
    ui = fluidPage(
      aDataSceneOutput(
        # attributes and child elements provided as arguments
        # server output variable name
        outputId = "mydatascene",
        # add backdrop
        environment = "",
        # gg-aframe plot syntax
        atags$entity(
          # an empty string sets attributes with no additional properties
          plot = "",
          # sizable scale option uses polyhedra scaled for equivalent volumes
          `scale-shape` = "sizable",
          position = "0 1.6 -1.38",
          atags$entity(
            `layer-point` = "",
            `data-binding__sepal.length`="target: layer-point.x",
            `data-binding__sepal.width`="target: layer-point.y",
            `data-binding__petal.length`="target: layer-point.z",
            `data-binding__species`="target: layer-point.shape",
            `data-binding__petal.width.size`="target: layer-point.size",
            `data-binding__species.color`="target: layer-point.color"
          ),
          atags$entity(
            `guide-axis` = "axis: x",
            `data-binding__xbreaks` = "target: guide-axis.breaks",
            `data-binding__xlabels` = "target: guide-axis.labels",
            `data-binding__xtitle` = "target: guide-axis.title"
          ),
          atags$entity(
            `guide-axis` = "axis: y",
            `data-binding__ybreaks` = "target: guide-axis.breaks",
            `data-binding__ylabels` = "target: guide-axis.labels",
            `data-binding__ytitle` = "target: guide-axis.title"
          ),
          atags$entity(
            `guide-axis` = "axis: z",
            `data-binding__zbreaks` = "target: guide-axis.breaks",
            `data-binding__zlabels` = "target: guide-axis.labels",
            `data-binding__ztitle` = "target: guide-axis.title"
          ),
          atags$entity(
            `guide-legend` = "aesthetic: shape",
            `data-binding__shapetitle` = "target: guide-legend.title"
          ),
          atags$entity(
            `guide-legend` = "aesthetic: size",
            `data-binding__sizebreaks` = "target: guide-legend.breaks",
            `data-binding__sizelabels` = "target: guide-legend.labels",
            `data-binding__sizetitle` = "target: guide-legend.title"
          ),
          atags$entity(
            `guide-legend` = "aesthetic: color",
            `data-binding__colorbreaks` = "target: guide-legend.breaks",
            `data-binding__colorlabels` = "target: guide-legend.labels",
            `data-binding__colortitle` = "target: guide-legend.title"
          ),
          # animate the plot rotation
          atags$other('animation', attribute = "rotation",
                      from = "0 45 0", to = "0 405 0",
                      dur = "10000", `repeat` = "indefinite")
        )
      )
    ),
    server = function(input, output, session) {
      output$mydatascene &lt;- renderADataScene({
        names(iris) &lt;- tolower(names(iris))
        # Margin in (0,1) scale keeps polyhedra from sticking out of plot area
        positional_to &lt;- c(0.01, 0.99)
        # convert to #RRGGBB color
        color_scale = setNames(rainbow(3, 0.75, 0.5, alpha = NULL),
                               unique(iris$species))
        iris %&gt;%
          # scale positional data
          mutate_if(is.numeric, rescale, to = positional_to) %&gt;%
          # scale size data to relative percentage, using cube root to correct
          # for radius-&gt;volume perception bias
          mutate(petal.width.size = rescale(petal.width^(1/3), to = c(0.5, 2)),
                 species.color = color_scale[species]) -&gt;
          iris_scaled

        # provide guide info
        make_guide &lt;- function (var, aes, breaks = c(0.01, 0.5, 0.99)) {
          guide = list()
          domain = range(iris[[var]])
          guide[[paste0(aes, "breaks")]] &lt;- breaks
          guide[[paste0(aes, "labels")]] &lt;- c(domain[1],
                                              round(mean(domain), 2),
                                              domain[2])
          guide[[paste0(aes, "title")]] &lt;- var
          guide
        }
        Map(make_guide,
            var = c("sepal.length", "sepal.width", "petal.length"),
            aes = c("x", "y", "z")) %&gt;%
          # repeat radius adjustment in the guide
          c(list(make_guide("petal.width", "size", c(0.5, 1.25, 2)^(1/3)))) %&gt;%
          Reduce(f = c) -&gt;
          guides
        guides$shapetitle = "species"
        guides$colortitle = "species"
        guides$colorbreaks = color_scale
        guides$colorlabels = names(color_scale)

        # convert data frame to list and combine with guides list
        aDataScene(c(iris_scaled, guides))
      })
    }
  )
}
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
