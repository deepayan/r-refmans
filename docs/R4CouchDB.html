<!DOCTYPE html><html><head><title>Help for package R4CouchDB</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {R4CouchDB}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#cdbAddAttachment'><p>Add attachments</p></a></li>
<li><a href='#cdbAddDoc'><p>Generates a new document</p></a></li>
<li><a href='#cdbAddDocS'><p>This function adds multiple database documents with one request</p></a></li>
<li><a href='#cdbDeleteDoc'><p>Deletes a document from a database</p></a></li>
<li><a href='#cdbGetConfig'><p>Request couchdb config</p></a></li>
<li><a href='#cdbGetDoc'><p>Get a doc from CouchDB</p></a></li>
<li><a href='#cdbGetList'><p>Receive list results from CouchDB</p></a></li>
<li><a href='#cdbGetShow'><p>Receive show results from CouchDB</p></a></li>
<li><a href='#cdbGetUuid'><p>Function for request one id</p></a></li>
<li><a href='#cdbGetUuidS'><p>Function for request some ids</p></a></li>
<li><a href='#cdbGetView'><p>Receive view results from CouchDB</p></a></li>
<li><a href='#cdbIni'><p>Ini function</p></a></li>
<li><a href='#cdbListDB'><p>Returns all databases on the server</p></a></li>
<li><a href='#cdbMakeDB'><p>Creates a new database</p></a></li>
<li><a href='#cdbRemoveDB'><p>Function to remove a database</p></a></li>
<li><a href='#cdbUpdateDoc'><p>This function updates an existing doc</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>A R Convenience Layer for CouchDB 2.0</td>
</tr>
<tr>
<td>Version:</td>
<td>0.7.5</td>
</tr>
<tr>
<td>Date:</td>
<td>2017-02-25</td>
</tr>
<tr>
<td>Author:</td>
<td>Thomas Bock</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/wactbprot/R4CouchDB">https://github.com/wactbprot/R4CouchDB</a></td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Thomas Bock &lt;thsteinbock@web.de&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a collection of functions for basic
    database and document management operations such as add, get, list access
    or delete. Every cdbFunction() gets and returns a list() containing the
    connection setup. Such a list can be generated by cdbIni().</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.7.0), bitops, RCurl (&ge; 1.95), RJSONIO (&ge; 1.3)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>roxygen2 (&ge; 4.0), testthat (&ge; 0.8)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2017-03-01 11:56:58 UTC; bock04</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2017-03-01 19:05:42</td>
</tr>
</table>
<hr>
<h2 id='cdbAddAttachment'>Add attachments</h2><span id='topic+cdbAddAttachment'></span>

<h3>Description</h3>

<p>This function adds attachments to a database document that already
exists.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cdbAddAttachment(cdb)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cdbAddAttachment_+3A_cdb">cdb</code></td>
<td>
<p>The list <code>cdb</code> has to contain
<code>cdb$fileName</code>,<code>cdb$serverName</code>, <code>cdb$DBName</code> and a
<code>cdb$id</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function uses the  <code>RCurl</code>- function
<code>guessMIMEType()</code> to do exactly this: guessing the mime type of
<code>cdb$fileName</code>.
</p>
<p>If the switch <code>cdb$attachmentsWithPath</code> is set to <code>TRUE</code>
the attachment is saved with the path. This behavior is default
since version 0.2.5 of R4CouchDB
</p>


<h3>Value</h3>

<table>
<tr><td><code>cdb</code></td>
<td>
<p>The result is stored in <code>cdb$res</code> </p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>wactbprot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ccc            &lt;- cdbIni(DBName="r4couch_db")
ccc$dataList   &lt;- list(normalDistRand =  rnorm(20))
ccc            &lt;- cdbAddDoc(ccc)
# make a 3d plot (stolen from ?persp)
x              &lt;- seq(-10, 10, length= 30)
y              &lt;- x
f              &lt;- function(x,y) {r &lt;- sqrt(x^2+y^2); 10 * sin(r)/r }
z              &lt;- outer(x, y, f)

z[is.na(z)]    &lt;- 1
op             &lt;- par(bg = "black")
ccc$fileName   &lt;- "3dplot.pdf"

pdf(ccc$fileName)
persp(x, y, z,
      theta = 30,
      phi = 30,
      expand = 0.5,
      col = "lightblue")
dev.off()
# add the plot as attachment to the database
# it workes over  ccc$fileName
ccc            &lt;- cdbAddAttachment(ccc)

## End(Not run)
</code></pre>

<hr>
<h2 id='cdbAddDoc'>Generates a new document</h2><span id='topic+cdbAddDoc'></span>

<h3>Description</h3>

<p>This function adds a new document to an already existing database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cdbAddDoc(cdb)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cdbAddDoc_+3A_cdb">cdb</code></td>
<td>
<p>The list <code>cdb</code> only has to contain a <code>cdb$dataList</code>
which is not an empty <code>list()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is called addDoc (which means add a new document). Therefore
the <code>cdb$id</code> is requested using <code>cdbGetUuid()</code> for every document
to add if no <code>cdb$id</code> is provided. If a <code>cdb$id</code> is provided the
function fails when a document with the given id already exists. In this
case one should use <code>cdbUpdateDoc()</code>. Since version v0.6 the function
writes the <code>_rev</code> and <code>_id</code> key to the top level of
<code>cdb$dataList</code>.
</p>


<h3>Value</h3>

<table>
<tr><td><code>cdb</code></td>
<td>
<p>The couchdb response is stored in <code>cdb$res</code> </p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>wactbprot
</p>


<h3>See Also</h3>

<p><code>cdbGetDoc()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ccc               &lt;- cdbIni()
# I assume a database at localhost:5984 already exists
ccc$DBName        &lt;- "r4couchdb_db"
ccc$dataList      &lt;- list(normalDistRand =  rnorm(20))
ccc               &lt;- cdbAddDoc(ccc)


## End(Not run)
</code></pre>

<hr>
<h2 id='cdbAddDocS'>This function adds multiple database documents with one request</h2><span id='topic+cdbAddDocS'></span>

<h3>Description</h3>

<p>This is done via the _bulk_docs API provided by
an already existing database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cdbAddDocS(cdb)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cdbAddDocS_+3A_cdb">cdb</code></td>
<td>
<p><code>cdb$dataList</code> has to be a list of lists,
<code>cdb$DBName</code>, <code>cdb$serverName</code> is needed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The _bulk_docs endpoint requires that <code>cdb$dataList</code> resolves
to an json array. This is reached with e.g.
<code>cdb$dataList &lt;- list(list(...),list(...),...)</code>.
Furthermore, _bulk_docs requires the documents to be wrapped in a key
named <code>docs:[...]</code>; this is done by <code>cdbAddDocS()</code> if
<code>cdb$dataList</code> is a list of lists. The user dont need to care.
</p>
<p>At the moment the resulting <code>_rev</code> and  <code>_id</code> will be not
written back to the <code>cdb$dataList</code>. This means that a second
call of  <code>cdbAddDocS()</code> generates new Documents.
</p>


<h3>Value</h3>

<table>
<tr><td><code>cdb</code></td>
<td>
<p>The couchdb response is stored in <code>cdb$res</code> </p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>parisni, wactbprot
</p>


<h3>See Also</h3>

<p><code>cdbAddDoc()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ccc               &lt;- cdbIni()
# I assume a database at localhost:5984 already exists
ccc$DBName        &lt;- "r4couchdb_db"
docs &lt;- list()
for(i in 1:10){
 docs[[i]] &lt;- list(normalDistRand =  rnorm(20))
}
# docs is noe a list of 10 lists
ccc$dataList &lt;- docs
# generating 10 database documents
cccAddDocS(ccc)$res

## End(Not run)
</code></pre>

<hr>
<h2 id='cdbDeleteDoc'>Deletes a document from a database</h2><span id='topic+cdbDeleteDoc'></span>

<h3>Description</h3>

<p>With a given <code>cdb$id</code> this function sends a http <code>"DELETE"</code>
request to the url <code>.../cdb$id?rev=cdb$rev</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cdbDeleteDoc(cdb)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cdbDeleteDoc_+3A_cdb">cdb</code></td>
<td>
<p>Beside <code>cdb$serverName</code>, <code>cdb$port</code> and
<code>cdb$DBName</code> the <code>cdb$id</code> must be given. R errors are reported in
<code>cdb$errors</code></p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>cdb</code></td>
<td>
<p>The result of the delete request is stored in
<code>cdb$res</code>(whatever this means).  </p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>wactbprot
</p>


<h3>See Also</h3>

<p><code>cdbAddDoc()</code>
</p>

<hr>
<h2 id='cdbGetConfig'>Request couchdb config</h2><span id='topic+cdbGetConfig'></span>

<h3>Description</h3>

<p>Function provides access to the <code>_config</code> api end point.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cdbGetConfig(cdb)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cdbGetConfig_+3A_cdb">cdb</code></td>
<td>
<p>Only the connection settings <code>cdb$port</code> and
<code>cdb$serverName</code> is needed.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>cdb</code></td>
<td>
<p>The result of the request is stored in <code>cdb$res</code> after
converting the answer into a list using <code>fromJSON()</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>wactbprot
</p>


<h3>See Also</h3>

<p><code>cdbMakeDB</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdbGetConfig(cdbIni())$res

## End(Not run)
</code></pre>

<hr>
<h2 id='cdbGetDoc'>Get a doc from CouchDB</h2><span id='topic+cdbGetDoc'></span>

<h3>Description</h3>

<p>With a given <code>cdb$id</code> this function requests the document.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cdbGetDoc(cdb)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cdbGetDoc_+3A_cdb">cdb</code></td>
<td>
<p>Beside <code>cdb$serverName</code>, <code>cdb$port</code> and
<code>cdb$DBName</code> the <code>cdb$id</code> must be given. R errors are reported
</p>
<p>in cdb$errors</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>cdb</code></td>
<td>
<p>The result of the request is stored in <code>cdb$res</code> after
converting the answer into a list using <code>fromJSON()</code>. If a list entry
needed in <code>cdb</code> is not provided <code>cdb$error</code> gives some
information.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>wactbprot
</p>


<h3>See Also</h3>

<p><code>cdbAddDoc()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ccc               &lt;- cdbIni()
ccc$newDBName     &lt;- "r4couchdb_db"
ccc$dataList      &lt;- list(normalDistRand =  rnorm(20))
ccc               &lt;- cdbAddDoc(ccc)
cdbGetDoc(ccc)$res

## End(Not run)
</code></pre>

<hr>
<h2 id='cdbGetList'>Receive list results from CouchDB</h2><span id='topic+cdbGetList'></span>

<h3>Description</h3>

<p>The function provides accesses to CouchDB lists.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cdbGetList(cdb)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cdbGetList_+3A_cdb">cdb</code></td>
<td>
<p>Beside the connection details (<code>cdb$port</code>,<code>cdb$DBName</code>
...) the <code>cdb$design</code> <code>cdb$view</code> and <code>cdb$list</code> is needed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Query params e.g. <code>"reduce=false"</code> or <code>"group_level=1"</code> can be
provided in <code>cdb$queryParam</code> By now multible params must be given in
one string e.g.  <code>"a=b&amp;c=d&amp;e=f"</code>.
</p>


<h3>Value</h3>

<table>
<tr><td><code>cdb</code></td>
<td>
<p>The result of the request is stored in cdb$res after converting
the json answer into a list using <code>cdb$fromJSON()</code>.
If a needed cdb (design, list,
view, ...) entry was not provided cdb$error says something about the R side.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>wactbprot
</p>

<hr>
<h2 id='cdbGetShow'>Receive show results from CouchDB</h2><span id='topic+cdbGetShow'></span>

<h3>Description</h3>

<p>The function provides accesses to CouchDB shows.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cdbGetShow(cdb)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cdbGetShow_+3A_cdb">cdb</code></td>
<td>
<p>Beside the connection details (<code>cdb$port</code>, <code>cdb$DBName</code>
...) the <code>cdb$design</code> and <code>cdb$show</code> is needed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Query params e.g. <code>"format=json"</code>  can be
provided in <code>cdb$queryParam</code>. Multible params must be given in
one string e.g.  <code>"a=b&amp;c=d&amp;e=f"</code>.
</p>


<h3>Value</h3>

<table>
<tr><td><code>cdb</code></td>
<td>
<p>The result of the request is stored in cdb$res after converting
the json answer into a list using <code>cdb$fromJSON()</code>. If a needed cdb
entry was not provided <code>cdb$error</code> provides information.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>wactbprot
</p>

<hr>
<h2 id='cdbGetUuid'>Function for request one id</h2><span id='topic+cdbGetUuid'></span>

<h3>Description</h3>

<p>Function returns a 128bit uuid requested from CouchDB
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cdbGetUuid(cdb)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cdbGetUuid_+3A_cdb">cdb</code></td>
<td>
<p>Only the connection settings <code>cdb$port</code> and
<code>cdb$serverName</code> is needed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Simple CouchDB API end point to http://serverName:port/_uuids.
</p>


<h3>Value</h3>

<table>
<tr><td><code>cdb</code></td>
<td>
<p>The result of the request is stored in <code>cdb$id</code> after
converting the answer into a list using <code>fromJSON()</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>wactbprot
</p>


<h3>See Also</h3>

<p><code>cdbMakeDB</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdbGetUuid(cdbIni())$res

## End(Not run)
</code></pre>

<hr>
<h2 id='cdbGetUuidS'>Function for request some ids</h2><span id='topic+cdbGetUuidS'></span>

<h3>Description</h3>

<p>Function returns a 128bit uuid requested from CouchDB
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cdbGetUuidS(cdb)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cdbGetUuidS_+3A_cdb">cdb</code></td>
<td>
<p>Only the connection settings <code>cdb$port</code>,
<code>cdb$serverName</code> and <code>cdb$count</code> is needed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>CouchDB API provides the url http://serverName:port/_uuids for those clients
who aren't able to create those ids. The number N
of ids received from a CouchDB can be set by <code>cdb$count &lt;- N</code>
since version 0.6.  The function writes to cdb$res (in opposite to
<code>cdbGetUuid()</code> whitch writes to <code>cdb$id</code>)
</p>


<h3>Value</h3>

<table>
<tr><td><code>cdb</code></td>
<td>
<p>The result of the request is stored in <code>cdb$res</code> after
converting the answer into a list using <code>fromJSON()</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>wactbprot
</p>


<h3>See Also</h3>

<p><code>cdbMakeDB</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ccc            &lt;- cdbIni()
ccc$count      &lt;- 100
cdbGetUuidS(ccc)$res

## End(Not run)
</code></pre>

<hr>
<h2 id='cdbGetView'>Receive view results from CouchDB</h2><span id='topic+cdbGetView'></span>

<h3>Description</h3>

<p>The function provides accesses to CouchDB views.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cdbGetView(cdb)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cdbGetView_+3A_cdb">cdb</code></td>
<td>
<p>Beside the connection details (<code>cdb$port</code>,<code>cdb$DAName</code>
...) the <code>cdb$design</code> and <code>cdb$view</code> is needed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Query params e.g. <code>"reduce=false"</code> or <code>"group_level=1"</code> can be
provided in <code>cdb$queryParam</code>
</p>


<h3>Value</h3>

<table>
<tr><td><code>cdb</code></td>
<td>
<p>The result of the request is stored in cdb$res after converting
the json answer into a list using fromJSON(). If a needed cdb list entry was
not provided cdb$error says something about the R side
</p>
</td></tr>
</table>


<h3>Note</h3>

<p>For the moment only one <code>cdb$queryParam</code> is possible. In the
future maybe Duncans <code>RJavaScript</code> package can be used to generate
views without leaving R.
</p>


<h3>Author(s)</h3>

<p>wactbprot
</p>

<hr>
<h2 id='cdbIni'>Ini function</h2><span id='topic+cdbIni'></span>

<h3>Description</h3>

<p>Function returns a list with some default settings and often used functions
such as <code>cdb$baseUrl</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cdbIni(serverName="localhost",
port="5984",
prot = "http",
DBName="",
uname = "",
pwd = "",
newDBName = "",
removeDBName = "",
id  = "",
fileName = "",
design = "",
view = "",
list = "",
show = "",
queryParam = "",
encSub = "?",
count = 10,
dataList = list(),
attachmentsWithPath=TRUE,
digits = 7)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cdbIni_+3A_servername">serverName</code></td>
<td>
<p>server name</p>
</td></tr>
<tr><td><code id="cdbIni_+3A_port">port</code></td>
<td>
<p>port</p>
</td></tr>
<tr><td><code id="cdbIni_+3A_prot">prot</code></td>
<td>
<p>name of the protocol default is http</p>
</td></tr>
<tr><td><code id="cdbIni_+3A_dbname">DBName</code></td>
<td>
<p>name of database</p>
</td></tr>
<tr><td><code id="cdbIni_+3A_uname">uname</code></td>
<td>
<p>name of the user</p>
</td></tr>
<tr><td><code id="cdbIni_+3A_pwd">pwd</code></td>
<td>
<p>password</p>
</td></tr>
<tr><td><code id="cdbIni_+3A_newdbname">newDBName</code></td>
<td>
<p>name of the database for cdbMakeDB()</p>
</td></tr>
<tr><td><code id="cdbIni_+3A_removedbname">removeDBName</code></td>
<td>
<p>name of the database to remove with cdbRemoveDB()</p>
</td></tr>
<tr><td><code id="cdbIni_+3A_id">id</code></td>
<td>
<p>the document id to get, put, post or delete</p>
</td></tr>
<tr><td><code id="cdbIni_+3A_filename">fileName</code></td>
<td>
<p>for use in cdbAddAttachment</p>
</td></tr>
<tr><td><code id="cdbIni_+3A_design">design</code></td>
<td>
<p>the name of the design used when asking a view or list</p>
</td></tr>
<tr><td><code id="cdbIni_+3A_view">view</code></td>
<td>
<p>the name of a view to query</p>
</td></tr>
<tr><td><code id="cdbIni_+3A_list">list</code></td>
<td>
<p>the name of a list to query</p>
</td></tr>
<tr><td><code id="cdbIni_+3A_show">show</code></td>
<td>
<p>the name of a show to query</p>
</td></tr>
<tr><td><code id="cdbIni_+3A_queryparam">queryParam</code></td>
<td>
<p>additional query params</p>
</td></tr>
<tr><td><code id="cdbIni_+3A_encsub">encSub</code></td>
<td>
<p>a character which is used as a replacement for chars who can not be converted by iconv</p>
</td></tr>
<tr><td><code id="cdbIni_+3A_count">count</code></td>
<td>
<p>how many uuids should be returned by cdbGetUuidS()</p>
</td></tr>
<tr><td><code id="cdbIni_+3A_datalist">dataList</code></td>
<td>
<p>a list containing data to post or update</p>
</td></tr>
<tr><td><code id="cdbIni_+3A_attachmentswithpath">attachmentsWithPath</code></td>
<td>
<p>effects the result of the function cdbAddAttachment in the way the variable is named</p>
</td></tr>
<tr><td><code id="cdbIni_+3A_digits">digits</code></td>
<td>
<p>digits kept at toJSON conversion</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The list: <code> cdb &lt;- list(serverName = "localhost", ... )</code> is returned if
the packages <code>library(RCurl)</code> and <code>library(RJSONIO)</code> are
successfully loaded.
</p>


<h3>Value</h3>

<table>
<tr><td><code>cdb</code></td>
<td>
<p>The R4CouchDB (method) chain(ing) list </p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>wactbprot, parisni
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ccc &lt;- cdbIni(digits=13,
              DBName="r4couch_db",
              attachmentsWithPath=FALSE,
              dataList=list(normalDistRand =  rnorm(20)))

## End(Not run)
</code></pre>

<hr>
<h2 id='cdbListDB'>Returns all databases on the server</h2><span id='topic+cdbListDB'></span>

<h3>Description</h3>

<p>Gives a list of all databases available at <code>cdb$serverName</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cdbListDB(cdb)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cdbListDB_+3A_cdb">cdb</code></td>
<td>
<p>Only the connection settings <code>cdb$port</code> and
<code>cdb$serverName</code> is needed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function uses the <code>_all_dbs</code>  API end point .
</p>


<h3>Value</h3>

<table>
<tr><td><code>cdb</code></td>
<td>
<p>The result of the request is stored in cdb$res after converting
the json answer into a list using <code>cdb$fromJSON()</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>wactbprot
</p>


<h3>See Also</h3>

<p><code>cdbMakeDB</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cdbListDB(cdbIni())$res

## End(Not run)
</code></pre>

<hr>
<h2 id='cdbMakeDB'>Creates a new database</h2><span id='topic+cdbMakeDB'></span>

<h3>Description</h3>

<p>The name of the new database is taken from <code>cdb$newDBName</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cdbMakeDB(cdb)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cdbMakeDB_+3A_cdb">cdb</code></td>
<td>
<p>The <code>cdb</code> have to provide <code>cdb$serverName</code>,
<code>cdb$port</code> and <code>cdb$newDBName</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The work is done by <code>getURL()</code> from Duncans RCurl package.
</p>
<p>After creating the new database the function makes the shortcut
<code>cdb$DBName &lt;- cdb$newDBName</code> so that further operations happen on the
new created database. Finaly <code>cdb$newDBName &lt;- ""</code>.
</p>


<h3>Value</h3>

<table>
<tr><td><code>cdb</code></td>
<td>
<p>The CouchDB answer is stored in <code>cdb$res</code>. Any
problems on the R side are reported in <code>cdb$error</code> </p>
</td></tr>
</table>


<h3>Note</h3>

<p>The convention for database naming should be implemented.
</p>


<h3>Author(s)</h3>

<p>wactbprot
</p>


<h3>See Also</h3>

<p><code>cdbUpdateDoc</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ccc               &lt;- cdbIni()
ccc$newDBName     &lt;- "r4couchdb_db"
ccc               &lt;- cdbMakeDB(ccc)
ccc$res
ccc$removeDBName  &lt;- ccc$DBName
cdbRemoveDB(ccc)$res

## End(Not run)
</code></pre>

<hr>
<h2 id='cdbRemoveDB'>Function to remove a database</h2><span id='topic+cdbRemoveDB'></span>

<h3>Description</h3>

<p>Removing a database means sending a http- &quot;DELETE&quot;- request to
<code>http://cdb$serverName:cdb$port/ ...</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cdbRemoveDB(cdb)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cdbRemoveDB_+3A_cdb">cdb</code></td>
<td>
<p>The <code>cdb</code> has to provide <code>cdb$serverName</code>,
<code>cdb$port</code> and <code>cdb$DBName</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>In <code>cdb</code> a entry <code>cdb$delDBName</code> should be provided for more
explicit deleting respectively more secure removing.
</p>


<h3>Value</h3>

<table>
<tr><td><code>cdb</code></td>
<td>
<p>The CouchDB answer is stored in <code>cdb$res</code>. Any
problems on the R side are reportet in <code>cdb$error</code> </p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>wactbprot
</p>


<h3>See Also</h3>

<p><code>cdbMakeDB</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ccc               &lt;- cdbIni()
ccc$newDBName     &lt;- "r4couchdb_db"
ccc               &lt;- cdbMakeDB(ccc)
ccc$res
ccc$removeDBName  &lt;- ccc$DBName
cdbRemoveDB(ccc)$res

## End(Not run)
</code></pre>

<hr>
<h2 id='cdbUpdateDoc'>This function updates an existing doc</h2><span id='topic+cdbUpdateDoc'></span>

<h3>Description</h3>

<p>This essentially means that a
revision, corresponding to the '_id' has to be provided. If no '_rev' is
given in the <code>cdb</code> list the function gets the doc from the db
and takes the rev number for the update
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cdbUpdateDoc(cdb)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cdbUpdateDoc_+3A_cdb">cdb</code></td>
<td>
<p>the cdb connection configuration list must contain the
<code>cdb$serverName</code>, <code>cdb$port</code>, <code>cdb$DBName</code> and <code>cdb$id</code>.
The data which updates the data stored in the doc is provided in
<code>cdb$dataList</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Updating a doc at couchdb means executing a http &quot;PUT&quot; request. The
<code>cdb</code> list must contain the <code>cdb$serverName</code>, <code>cdb$port</code>,
<code>cdb$DBName</code>, <code>cdb$id</code>. Since v0.6 the revision of the document
should exist at the intended place: <code>cdb$dataList$'_rev'</code>.
</p>
<p><code>getURL()</code> with <code>customrequest = "PUT"</code> does the work.  If a
needed <code>cdb$</code> list entry is not provided <code>cdb$error</code> maybe says
something about the R side.
</p>


<h3>Value</h3>

<table>
<tr><td><code>cdb</code></td>
<td>
<p>The response of the request is stored in <code>cdb$res</code>
after converting the answer by means of <code>fromJSON()</code>. The revision
provided by the respons is used for updating the <code>cdb$dataList$'_rev'</code>.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>wactbprot
</p>


<h3>See Also</h3>

<p><code>cdbInit()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ccc               &lt;- cdbIni()
# I assume a database at localhost:5984 already exists
ccc$DBName        &lt;- "r4couchdb_db"
ccc$dataList      &lt;- list(normalDistRand =  rnorm(20))
ccc               &lt;- cdbAddDoc(ccc)

ccc$dataList$Date &lt;- date()
ccc               &lt;- cdbUpdateDoc(ccc)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
