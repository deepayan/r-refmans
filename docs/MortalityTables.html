<!DOCTYPE html><html><head><title>Help for package MortalityTables</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {MortalityTables}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#MortalityTables-package'><p>Provide life table classes for life insurance purposes</p></a></li>
<li><a href='#ages'><p>Return the defined ages of the life table</p></a></li>
<li><a href='#ageShift'><p>Return the age shift of the age-shifted life table given the birth year</p></a></li>
<li><a href='#baseTable'><p>Return the base table of the life table</p></a></li>
<li><a href='#baseYear'><p>Return the base year of the life table</p></a></li>
<li><a href='#calculateImprovements'><p>Calculate the improvement factors for the given birth-year and the</p>
<code>mortalityTable.improvementFactors</code> object</a></li>
<li><a href='#commutationNumbers'><p>Calculate the commutation numbers for the given parameters, using the mortality table and an interest rate</p></a></li>
<li><a href='#deathProbabilities'><p>Return the (cohort) death probabilities of the life table given the birth year (if needed)</p></a></li>
<li><a href='#deathProbabilitiesIndividual'><p>Return a matrix of the persons' individual death probabilities of a joint-life</p>
table (instance of <code>mortalityTable.jointLives</code>)</a></li>
<li><a href='#fillAges'><p>Fill the given probabilities with NA to match the desired age range.</p></a></li>
<li><a href='#fitExpExtrapolation'><p>Fit an exponential function exp(-A*(x-x0)) to the last value (f(100) and f'(100) need to coincide):</p></a></li>
<li><a href='#generateAgeShift'><p>Generate data.frame containing age shifts for each birth year</p></a></li>
<li><a href='#getCohortTable'><p>Return the cohort life table as a <code>mortalityTable.period</code> object</p></a></li>
<li><a href='#getOmega'><p>Return the maximum age of the life table</p></a></li>
<li><a href='#getPeriodTable'><p>Return the period life table as a <code>mortalityTable.period</code> object</p></a></li>
<li><a href='#lifeTable'><p>Return the lifetable object (package lifecontingencies) for the cohort life table</p></a></li>
<li><a href='#makeQxDataFrame'><p>Converts one or multiple mortality table objects to a data frame that can be</p>
plotted by <code>plotMortalityTables</code> or <code>plotMortalityTableComparisons</code></a></li>
<li><a href='#mortalityComparisonTable'><p>Calculate relative mortalities for age bands and birth years</p></a></li>
<li><a href='#mortalityImprovement'><p>Return the mortality trend (yearly log-death-probability improvement) of the given period or the given generation.</p></a></li>
<li><a href='#mortalityTable-class'><p>Class mortalityTable</p></a></li>
<li><a href='#mortalityTable.ageShift-class'><p>Class mortalityTable.ageShift - Cohort life tables generated by age-shift</p></a></li>
<li><a href='#mortalityTable.deMoivre-class'><p>Class mortalityTable.deMoivre - Mortality table with de Moivre's law</p></a></li>
<li><a href='#mortalityTable.improvementFactors-class'><p>Class mortalityTable.improvementFactors - Cohort life table with improvement</p>
factors</a></li>
<li><a href='#mortalityTable.jointLives-class'><p>Class mortalityTable.jointLives - Life table for multiple joint lives</p></a></li>
<li><a href='#mortalityTable.MakehamGompertz-class'><p>Class mortalityTable.MakehamGompertz - Mortality table with Makeham-Gompertz's law</p></a></li>
<li><a href='#mortalityTable.mixed-class'><p>Class mortalityTable.mixed - Life table as a mix of two life tables</p></a></li>
<li><a href='#mortalityTable.NA'><p>Empty mortality table indicating NA</p></a></li>
<li><a href='#mortalityTable.observed-class'><p>Class mortalityTable.observed - Life table from actual observations</p></a></li>
<li><a href='#mortalityTable.once'><p>Generate a (deterministic) mortality table with only one probability set to 1 (for the given age)</p></a></li>
<li><a href='#mortalityTable.onceAndFuture'><p>Generate a (deterministic) mortality table with all probabilities starting at a given age set to 1</p></a></li>
<li><a href='#mortalityTable.period-class'><p>Class mortalityTable.period - Period life tables</p></a></li>
<li><a href='#mortalityTable.trendProjection-class'><p>Class mortalityTable.trendProjection - Cohort mortality table with age-specific trend</p></a></li>
<li><a href='#mortalityTable.Weibull-class'><p>Class mortalityTable.Weibull - Mortality table with Weibull's law</p></a></li>
<li><a href='#mortalityTable.zeroes'><p>Generate a mortality table with all probabilities set to zero.</p></a></li>
<li><a href='#mortalityTables.list'><p>List all available sets of life tables provided by the MortalityTables-package package</p>
An existing life table can then be loaded with mortalityTables.load.</a></li>
<li><a href='#mortalityTables.load'><p>Load a named set of mortality tables provided by the MortalityTables package</p></a></li>
<li><a href='#mT.cleanup'><p>Remove all non-essential data (raw data, etc.) from a mortalityTable object</p></a></li>
<li><a href='#mT.extrapolateProbsExp'><p>Extrapolate base table of a mortalityTable using an exponential function</p></a></li>
<li><a href='#mT.extrapolateTrendExp'><p>Extrapolate a mortality trend exponentially</p></a></li>
<li><a href='#mT.fillAges'><p>Restrict/expand a mortalityTable to certain ages</p></a></li>
<li><a href='#mT.fitExtrapolationLaw'><p>Fit interpolation law to a mortality table and extrapolate</p></a></li>
<li><a href='#mT.round'><p>Round all components of a mortality table to the given number of digits</p></a></li>
<li><a href='#mT.scaleProbs'><p>Scale all probabilities of the given <code>mortalityTable</code> object(s) by the given factor</p></a></li>
<li><a href='#mT.setDimInfo'><p>Set additional information (year, description, type of risk, sex, etc.) for the mortality table.</p></a></li>
<li><a href='#mT.setName'><p>Sets a new name for the given mortality table or the list/table/array of mortalityTables</p></a></li>
<li><a href='#mT.setTrend'><p>Set/Add a trend vector for the probabilities of the given <code>mortalityTable</code> object(s). Returns a <code>mortalityTable.trendProjection</code> object</p></a></li>
<li><a href='#mT.switchover'><p>Switch over mortalities from one table to another at a given age</p></a></li>
<li><a href='#mT.translate'><p>Translate base table of a cohort mortality table to a different observation year</p></a></li>
<li><a href='#pensionTable-class'><p>Class pensionTable</p></a></li>
<li><a href='#pensionTables.list'><p>List all available sets of pension tables provided by the MortalityTables-package package</p>
An existing pension table can then be loaded with pensionTables.load.</a></li>
<li><a href='#pensionTables.load'><p>Load a named set of pension tables provided by the MortalityTables package</p></a></li>
<li><a href='#periodDeathProbabilities'><p>Return the (period) death probabilities of the life table for a given</p>
observation year</a></li>
<li><a href='#periodDeathProbabilitiesIndividual'><p>Return a matrix of the persons' individual period death probabilities of a</p>
joint-life table (instance of <code>mortalityTable.jointLives</code>)</a></li>
<li><a href='#periodTransitionProbabilities'><p>Return all period transition probabilities of the pension table</p></a></li>
<li><a href='#plot.mortalityTable'><p>Plot multiple mortality tables (life tables) in one plot</p></a></li>
<li><a href='#plotMortalityTableComparisons'><p>Plot multiple mortality tables (life tables) in one plot, relative to a given reference table</p></a></li>
<li><a href='#plotMortalityTables'><p>Plot multiple mortality tables (life tables) in one plot</p></a></li>
<li><a href='#plotMortalityTrend'><p>Plot the trends of multiple mortality tables (life tables) in one chart</p></a></li>
<li><a href='#PopulationData.AT2017'><p>Austrian population count (exposure) and deaths in 2017</p></a></li>
<li><a href='#pT.calculateTotalMortality'><p>Calculate the total mortality of the pension table</p></a></li>
<li><a href='#pT.getSubTable'><p>Extract a sub-table from a pensionTable</p></a></li>
<li><a href='#pT.setDimInfo'><p>Set additional information (year, description, type of risk, sex, etc.) for the pension table.</p></a></li>
<li><a href='#setLoading'><p>Return a copy of the table with an additional loading added</p></a></li>
<li><a href='#setModification'><p>Return a copy of the table with the given modification function added</p></a></li>
<li><a href='#transitionProbabilities'><p>Return all transition probabilities of the pension table (generational probabilities)</p></a></li>
<li><a href='#undampenTrend'><p>Return a <code>mortalityTable.trendProjection</code> object with the trend damping removed.</p></a></li>
<li><a href='#whittaker.mortalityTable'><p>Smooth a life table using the Whittaker-Henderson method, intepolation possibly missing values</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Version:</td>
<td>2.0.5</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-10-27</td>
</tr>
<tr>
<td>Title:</td>
<td>A Framework for Various Types of Mortality / Life Tables</td>
</tr>
<tr>
<td>Author:</td>
<td>Reinhold Kainhofer [aut, cre, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Reinhold Kainhofer &lt;reinhold@kainhofer.com&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://gitlab.open-tools.net/R/r-mortality-tables">https://gitlab.open-tools.net/R/r-mortality-tables</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://gitlab.open-tools.net/R/r-mortality-tables/-/issues">https://gitlab.open-tools.net/R/r-mortality-tables/-/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Depends:</td>
<td>ggplot2, R (&ge; 3.5)</td>
</tr>
<tr>
<td>Imports:</td>
<td>methods, scales, utils, pracma</td>
</tr>
<tr>
<td>Enhances:</td>
<td>MortalityLaws, lifecontingencies</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, tidyverse, reshape2, rmarkdown</td>
</tr>
<tr>
<td>Description:</td>
<td>Classes to implement, analyze and plot cohort life tables
    for actuarial calculations. Birth-year dependent cohort mortality
    tables using a yearly trend to extrapolate from a base year are implemented,
    as well as period life table, cohort life tables using an age shift, and
    merged life tables. Additionally, several data sets from various countries 
    are included to provide widely-used tables out of the box.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Collate:</td>
<td>'DocumentData.R' 'mortalityTable.R' 'mortalityTable.period.R'
'mortalityTable.ageShift.R' 'ageShift.R'
'mortalityTable.joined.R' 'mortalityTable.mixed.R' 'ages.R'
'baseTable.R' 'baseYear.R' 'fillAges.R' 'pensionTable.R'
'commutationNumbers.R' 'mortalityTable.improvementFactors.R'
'mortalityTable.trendProjection.R' 'deathProbabilities.R'
'getCohortTable.R' 'getOmega.R' 'getPeriodTable.R'
'lifeTable.R' 'makeQxDataFrame.R' 'mortalityComparisonTable.R'
'mortalityImprovement.R' 'mortalityTable.MakehamGompertz.R'
'mortalityTable.Weibull.R' 'mortalityTable.deMoivre.R'
'periodDeathProbabilities.R' 'mortalityTable.jointLives.R'
'utilityFunctions.R' 'mortalityTable.observed.R'
'mortalityTables.list.R' 'mortalityTables.load.R'
'plot.mortalityTable.R' 'plotMortalityTableComparisons.R'
'plotMortalityTables.R' 'plotMortalityTrend.R' 'setLoading.R'
'setModification.R' 'undampenTrend.R'
'whittaker.mortalityTable.R'</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-10-27 08:13:42 UTC; 036134</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-10-27 22:40:18 UTC</td>
</tr>
</table>
<hr>
<h2 id='MortalityTables-package'>Provide life table classes for life insurance purposes</h2><span id='topic+MortalityTables'></span><span id='topic+MortalityTables-package'></span>

<h3>Description</h3>

<p>Classes to implement, analyze and plot cohort life tables for actuarial calculations. Birth-year dependent cohort mortality tables using a yearly trend to extrapolate from a base year are implemented, as well as period life table, cohort life tables using an age shift, and merged life tables. Additionally, several data sets from various countries are included to provide widely-used tables out of the box.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Reinhold Kainhofer <a href="mailto:reinhold@kainhofer.com">reinhold@kainhofer.com</a> [copyright holder]
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://gitlab.open-tools.net/R/r-mortality-tables">https://gitlab.open-tools.net/R/r-mortality-tables</a>
</p>
</li>
<li><p> Report bugs at <a href="https://gitlab.open-tools.net/R/r-mortality-tables/-/issues">https://gitlab.open-tools.net/R/r-mortality-tables/-/issues</a>
</p>
</li></ul>


<hr>
<h2 id='ages'>Return the defined ages of the life table</h2><span id='topic+ages'></span><span id='topic+ages+2CmortalityTable.period-method'></span><span id='topic+ages+2CmortalityTable.mixed-method'></span><span id='topic+ages+2CmortalityTable.jointLives-method'></span><span id='topic+ages+2CmortalityTable.observed-method'></span>

<h3>Description</h3>

<p>Return the defined ages of the life table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ages(object, ...)

## S4 method for signature 'mortalityTable.period'
ages(object, ...)

## S4 method for signature 'mortalityTable.mixed'
ages(object, ...)

## S4 method for signature 'mortalityTable.jointLives'
ages(object, ...)

## S4 method for signature 'mortalityTable.observed'
ages(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ages_+3A_object">object</code></td>
<td>
<p>A life table object (instance of a <code><a href="#topic+mortalityTable-class">mortalityTable</a></code> class)</p>
</td></tr>
<tr><td><code id="ages_+3A_...">...</code></td>
<td>
<p>Currently unused</p>
</td></tr>
</table>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>ages(mortalityTable.period)</code>: Return the defined ages of the period life table
</p>
</li>
<li> <p><code>ages(mortalityTable.mixed)</code>: Return the defined ages of the mixed life table
</p>
</li>
<li> <p><code>ages(mortalityTable.jointLives)</code>: Return the defined ages of the joint lives mortality table (returns the ages of the first table used for joint lives)
</p>
</li>
<li> <p><code>ages(mortalityTable.observed)</code>: Return the defined ages of the observed life table
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities")
ages(AVOe2005R.male)
ages(AVOe1996R.male)

mortalityTables.load("Austria_Census")
ages(mort.AT.census.2011.male)

</code></pre>

<hr>
<h2 id='ageShift'>Return the age shift of the age-shifted life table given the birth year</h2><span id='topic+ageShift'></span><span id='topic+ageShift+2CmortalityTable-method'></span><span id='topic+ageShift+2CmortalityTable.ageShift-method'></span>

<h3>Description</h3>

<p>Return the age shift of the age-shifted life table given the birth year
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ageShift(object, YOB = 1975, ...)

## S4 method for signature 'mortalityTable'
ageShift(object, YOB = 1975, ...)

## S4 method for signature 'mortalityTable.ageShift'
ageShift(object, YOB = 1975, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ageShift_+3A_object">object</code></td>
<td>
<p>The life table object (class inherited from mortalityTable)</p>
</td></tr>
<tr><td><code id="ageShift_+3A_yob">YOB</code></td>
<td>
<p>The birth year for which the age shift should be determined.</p>
</td></tr>
<tr><td><code id="ageShift_+3A_...">...</code></td>
<td>
<p>Other parameters (currently unused)</p>
</td></tr>
</table>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>ageShift(mortalityTable)</code>: Age shifts apply only to mortalityTagle.ageShift, so
all other tables return NA.
</p>
</li>
<li> <p><code>ageShift(mortalityTable.ageShift)</code>: Return the age shift of the age-shifted life table
given the birth year
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities")
ageShift(AVOe2005R.male.av, YOB=1910)
ageShift(AVOe2005R.male.av, YOB=1955)
ageShift(AVOe2005R.male.av, YOB=2010)
# A table with trend does NOT have any age shift, so NA is returned:
ageShift(AVOe2005R.male, YOB=1910)

</code></pre>

<hr>
<h2 id='baseTable'>Return the base table of the life table</h2><span id='topic+baseTable'></span><span id='topic+baseTable+2CmortalityTable-method'></span><span id='topic+baseTable+2CmortalityTable.period-method'></span><span id='topic+baseTable+2CmortalityTable.jointLives-method'></span>

<h3>Description</h3>

<p>Return the base table of the life table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>baseTable(object, ...)

## S4 method for signature 'mortalityTable'
baseTable(object, ...)

## S4 method for signature 'mortalityTable.period'
baseTable(object, ...)

## S4 method for signature 'mortalityTable.jointLives'
baseTable(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="baseTable_+3A_object">object</code></td>
<td>
<p>The life table object (class inherited from mortalityTable)</p>
</td></tr>
<tr><td><code id="baseTable_+3A_...">...</code></td>
<td>
<p>Other parameters (currently unused)</p>
</td></tr>
</table>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>baseTable(mortalityTable)</code>: Return the base table of the life table
</p>
</li>
<li> <p><code>baseTable(mortalityTable.period)</code>: Return the base table of the life table
</p>
</li>
<li> <p><code>baseTable(mortalityTable.jointLives)</code>: Return the base table of the joint lives mortality table (returns the base table of the first table used for joint lives)
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities")
baseTable(AVOe2005R.male)

</code></pre>

<hr>
<h2 id='baseYear'>Return the base year of the life table</h2><span id='topic+baseYear'></span><span id='topic+baseYear+2CmortalityTable-method'></span><span id='topic+baseYear+2CmortalityTable.mixed-method'></span><span id='topic+baseYear+2CmortalityTable.jointLives-method'></span>

<h3>Description</h3>

<p>Return the base year of the life table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>baseYear(object, ...)

## S4 method for signature 'mortalityTable'
baseYear(object, ...)

## S4 method for signature 'mortalityTable.mixed'
baseYear(object, ...)

## S4 method for signature 'mortalityTable.jointLives'
baseYear(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="baseYear_+3A_object">object</code></td>
<td>
<p>The life table object (class inherited from mortalityTable)</p>
</td></tr>
<tr><td><code id="baseYear_+3A_...">...</code></td>
<td>
<p>Other parameters (currently unused)</p>
</td></tr>
</table>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>baseYear(mortalityTable)</code>: Return the base year of the life table
</p>
</li>
<li> <p><code>baseYear(mortalityTable.mixed)</code>: Return the base year of the life table
</p>
</li>
<li> <p><code>baseYear(mortalityTable.jointLives)</code>: Return the base year of the life table
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities")
baseYear(AVOe2005R.male)

</code></pre>

<hr>
<h2 id='calculateImprovements'>Calculate the improvement factors for the given birth-year and the
<code><a href="#topic+mortalityTable.improvementFactors-class">mortalityTable.improvementFactors</a></code> object</h2><span id='topic+calculateImprovements'></span><span id='topic+calculateImprovements+2CmortalityTable.improvementFactors-method'></span>

<h3>Description</h3>

<p>Calculate the improvement factors for the given birth-year and the
<code><a href="#topic+mortalityTable.improvementFactors-class">mortalityTable.improvementFactors</a></code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculateImprovements(object, ...)

## S4 method for signature 'mortalityTable.improvementFactors'
calculateImprovements(object, ..., Period = NULL, YOB = 1982)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calculateImprovements_+3A_object">object</code></td>
<td>
<p>A pension table object (instance of a <code><a href="#topic+mortalityTable.improvementFactors-class">mortalityTable.improvementFactors</a></code> class)</p>
</td></tr>
<tr><td><code id="calculateImprovements_+3A_...">...</code></td>
<td>
<p>Currently unused</p>
</td></tr>
<tr><td><code id="calculateImprovements_+3A_period">Period</code></td>
<td>
<p>Observation period (either <code>Period</code> or <code>YOB</code> should be given)</p>
</td></tr>
<tr><td><code id="calculateImprovements_+3A_yob">YOB</code></td>
<td>
<p>Year of birth (either <code>Period</code> or <code>YOB</code> should be given)</p>
</td></tr>
</table>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>calculateImprovements(mortalityTable.improvementFactors)</code>: Calculate the total mortality improvement
factors relative to the base year for the given birth-year and the
<code><a href="#topic+mortalityTable.improvementFactors-class">mortalityTable.improvementFactors</a></code> object
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>pensionTables.load("USA_PensionPlan_RP2014")
calculateImprovements(RP2014.male@qx, YOB = 2017)

</code></pre>

<hr>
<h2 id='commutationNumbers'>Calculate the commutation numbers for the given parameters, using the mortality table and an interest rate</h2><span id='topic+commutationNumbers'></span><span id='topic+commutationNumbers+2CmortalityTable-method'></span><span id='topic+commutationNumbers+2Cnumeric-method'></span><span id='topic+commutationNumbers+2CpensionTable-method'></span>

<h3>Description</h3>

<p>Calculate the commutation numbers for the given parameters, using the mortality table and an interest rate
</p>


<h3>Usage</h3>

<pre><code class='language-R'>commutationNumbers(object, ..., ages = NULL, i = 0.03)

## S4 method for signature 'mortalityTable'
commutationNumbers(object, ..., ages = NULL, i = 0.03)

## S4 method for signature 'numeric'
commutationNumbers(object, ages, i = 0.03)

## S4 method for signature 'pensionTable'
commutationNumbers(object, ..., ages = NULL, i = 0.03)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="commutationNumbers_+3A_object">object</code></td>
<td>
<p>The life table object (class inherited from mortalityTable)</p>
</td></tr>
<tr><td><code id="commutationNumbers_+3A_...">...</code></td>
<td>
<p>Other parameters to be passed to the deathProbabilities call (e.g. YOB)</p>
</td></tr>
<tr><td><code id="commutationNumbers_+3A_ages">ages</code></td>
<td>
<p>Vector of ages for which the probabilities should be extracted and commutation numbers calculates</p>
</td></tr>
<tr><td><code id="commutationNumbers_+3A_i">i</code></td>
<td>
<p>Interest rate used for the calculation of the commutation numbers</p>
</td></tr>
</table>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>commutationNumbers(mortalityTable)</code>: Calculate the commutation numbers for the given
parameters, using the mortality table and an interest rate
</p>
</li>
<li> <p><code>commutationNumbers(numeric)</code>: Calculate the commutation numbers for the given
death probabilities (passed as a numeric vector with argument
name &quot;object&quot;), ages and an interest rate
Return value is a list of data frames
</p>
</li>
<li> <p><code>commutationNumbers(pensionTable)</code>: Calculate the commutation numbers for the given
parameters, using the pension table and an interest rate
Return value is a list of data frames
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities")
commutationNumbers(AVOe2005R.male, i = 0.03, YOB = 1975)

</code></pre>

<hr>
<h2 id='deathProbabilities'>Return the (cohort) death probabilities of the life table given the birth year (if needed)</h2><span id='topic+deathProbabilities'></span><span id='topic+deathProbabilities+2CmortalityTable.period-method'></span><span id='topic+deathProbabilities+2CmortalityTable.ageShift-method'></span><span id='topic+deathProbabilities+2CmortalityTable.trendProjection-method'></span><span id='topic+deathProbabilities+2CmortalityTable.improvementFactors-method'></span><span id='topic+deathProbabilities+2CmortalityTable.mixed-method'></span><span id='topic+deathProbabilities+2CmortalityTable.jointLives-method'></span><span id='topic+deathProbabilities+2CmortalityTable.observed-method'></span>

<h3>Description</h3>

<p>Return the (cohort) death probabilities of the life table given the birth year (if needed)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deathProbabilities(object, ..., ages = NULL, YOB = 1975)

## S4 method for signature 'mortalityTable.period'
deathProbabilities(object, ..., ages = NULL, YOB = 1975)

## S4 method for signature 'mortalityTable.ageShift'
deathProbabilities(object, ..., ages = NULL, YOB = 1975)

## S4 method for signature 'mortalityTable.trendProjection'
deathProbabilities(object, ..., ages = NULL, YOB = 1975)

## S4 method for signature 'mortalityTable.improvementFactors'
deathProbabilities(object, ..., ages = NULL, YOB = 1975)

## S4 method for signature 'mortalityTable.mixed'
deathProbabilities(object, ..., ages = NULL, YOB = 1975)

## S4 method for signature 'mortalityTable.jointLives'
deathProbabilities(object, ..., ageDifferences = c(), ages = NULL, YOB = 1975)

## S4 method for signature 'mortalityTable.observed'
deathProbabilities(object, ..., ages = NULL, YOB = 1975)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deathProbabilities_+3A_object">object</code></td>
<td>
<p>The life table object (class inherited from mortalityTable)</p>
</td></tr>
<tr><td><code id="deathProbabilities_+3A_...">...</code></td>
<td>
<p>Other parameters (currently unused)</p>
</td></tr>
<tr><td><code id="deathProbabilities_+3A_ages">ages</code></td>
<td>
<p>Desired age range (if NULL, the probabilities of the age range provided by the table will be returned), missing ages will be filled with NA</p>
</td></tr>
<tr><td><code id="deathProbabilities_+3A_yob">YOB</code></td>
<td>
<p>The birth year for which the death probabilities should be calculated</p>
</td></tr>
<tr><td><code id="deathProbabilities_+3A_agedifferences">ageDifferences</code></td>
<td>
<p>A vector of age differences of all joint lives.</p>
</td></tr>
</table>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>deathProbabilities(mortalityTable.period)</code>: Return the (cohort) death probabilities of the
life table given the birth year (if needed)
</p>
</li>
<li> <p><code>deathProbabilities(mortalityTable.ageShift)</code>: Return the (cohort) death probabilities of the
life table given the birth year (if needed)
</p>
</li>
<li> <p><code>deathProbabilities(mortalityTable.trendProjection)</code>: Return the (cohort) death probabilities of the
life table given the birth year (if needed)
</p>
</li>
<li> <p><code>deathProbabilities(mortalityTable.improvementFactors)</code>: Return the (cohort) death probabilities of the
life table given the birth year (if needed)
</p>
</li>
<li> <p><code>deathProbabilities(mortalityTable.mixed)</code>: Return the (cohort) death probabilities of the
life table given the birth year (if needed)
</p>
</li>
<li> <p><code>deathProbabilities(mortalityTable.jointLives)</code>: Return the (cohort) death probabilities of the
life table given the birth year (if needed)
</p>
</li>
<li> <p><code>deathProbabilities(mortalityTable.observed)</code>: Return the (cohort) death probabilities of the
life table given the birth year (if needed)
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities")
deathProbabilities(AVOe2005R.male, YOB = 1975)
deathProbabilities(AVOe2005R.male, YOB = 2017)

mortalityTables.load("Germany_Census")
table.JL = mortalityTable.jointLives(
    name = "ADSt 24/26 auf verbundene Leben",
    table = mort.DE.census.1924.26.male
)
deathProbabilities(table.JL, YOB = 1977, ageDifferences = c(1, 5, -5, 16))
deathProbabilities(table.JL, YOB = 1977, ageDifferences = c(0))
deathProbabilities(table.JL, YOB = 1977, ageDifferences = c(1, 5, 16))

</code></pre>

<hr>
<h2 id='deathProbabilitiesIndividual'>Return a matrix of the persons' individual death probabilities of a joint-life
table (instance of <code><a href="#topic+mortalityTable.jointLives">mortalityTable.jointLives</a></code>)</h2><span id='topic+deathProbabilitiesIndividual'></span>

<h3>Description</h3>

<p>Return a matrix of the persons' individual death probabilities of a joint-life
table (instance of <code><a href="#topic+mortalityTable.jointLives">mortalityTable.jointLives</a></code>)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deathProbabilitiesIndividual(tables, YOB, ageDifferences)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deathProbabilitiesIndividual_+3A_tables">tables</code></td>
<td>
<p>List of life table objects (object inherited from
<code><a href="#topic+mortalityTable">mortalityTable</a></code>)</p>
</td></tr>
<tr><td><code id="deathProbabilitiesIndividual_+3A_yob">YOB</code></td>
<td>
<p>The birth year for the first person</p>
</td></tr>
<tr><td><code id="deathProbabilitiesIndividual_+3A_agedifferences">ageDifferences</code></td>
<td>
<p>The age differences to the first person</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Germany_Census")
deathProbabilitiesIndividual(list(mort.DE.census.1924.26.male), 1977, c(0, 0))
deathProbabilitiesIndividual(list(mort.DE.census.1924.26.male), 1977, c(0, -5, 13))

</code></pre>

<hr>
<h2 id='fillAges'>Fill the given probabilities with NA to match the desired age range.</h2><span id='topic+fillAges'></span>

<h3>Description</h3>

<p>Fill the given probabilities with NA to match the desired age range.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fillAges(probs = c(), givenAges = c(), neededAges = NULL, fill = NA_real_)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fillAges_+3A_probs">probs</code></td>
<td>
<p>Numeric vector</p>
</td></tr>
<tr><td><code id="fillAges_+3A_givenages">givenAges</code></td>
<td>
<p>ages assigned to the given vector</p>
</td></tr>
<tr><td><code id="fillAges_+3A_neededages">neededAges</code></td>
<td>
<p>desired age range for output</p>
</td></tr>
<tr><td><code id="fillAges_+3A_fill">fill</code></td>
<td>
<p>If set, missing values will be replaced with this value. Default is to fill with NA.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Ages 20-70 have linearly increasing death probabilities. Fill with 0 for the whole age range 0-120
fillAges(probs = c(0:50/50), givenAges = 20:70, neededAges = 0:120, fill = 0)

</code></pre>

<hr>
<h2 id='fitExpExtrapolation'>Fit an exponential function exp(-A*(x-x0)) to the last value (f(100) and f'(100) need to coincide):</h2><span id='topic+fitExpExtrapolation'></span>

<h3>Description</h3>

<p>Fit an exponential function exp(-A*(x-x0)) to the last value (f(100) and f'(100) need to coincide):
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fitExpExtrapolation(data, idx, up = TRUE, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fitExpExtrapolation_+3A_data">data</code></td>
<td>
<p>data.frame to which an exponential function should be fit</p>
</td></tr>
<tr><td><code id="fitExpExtrapolation_+3A_idx">idx</code></td>
<td>
<p>Index of the position of the fit</p>
</td></tr>
<tr><td><code id="fitExpExtrapolation_+3A_up">up</code></td>
<td>
<p>Whether the fit is forward- or backward-facing</p>
</td></tr>
<tr><td><code id="fitExpExtrapolation_+3A_verbose">verbose</code></td>
<td>
<p>Whether to include data about the fit in the output</p>
</td></tr>
</table>

<hr>
<h2 id='generateAgeShift'>Generate data.frame containing age shifts for each birth year</h2><span id='topic+generateAgeShift'></span>

<h3>Description</h3>

<p>Generate a dataframe suitable to be passed to the mortalityTable.ageShift
class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generateAgeShift(initial = 0, YOBs = c(1900, 2100), step = -1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generateAgeShift_+3A_initial">initial</code></td>
<td>
<p>Age shift for the first birth year given in the <code>YOBs</code> vector</p>
</td></tr>
<tr><td><code id="generateAgeShift_+3A_yobs">YOBs</code></td>
<td>
<p>Vector of birth years in which the age shift changes by <code>step</code>. The last entry gives the first birth year that does not have any shift defined any more.</p>
</td></tr>
<tr><td><code id="generateAgeShift_+3A_step">step</code></td>
<td>
<p>How much the age shift changes in each year given in the <code>YOBs</code> vector</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>generateAgeShift(initial = 1, YOBs = c(1922, 1944, 1958, 1973, 1989, 2006, 2023, 2041, 2056))

</code></pre>

<hr>
<h2 id='getCohortTable'>Return the cohort life table as a <code>mortalityTable.period</code> object</h2><span id='topic+getCohortTable'></span><span id='topic+getCohortTable+2CmortalityTable-method'></span>

<h3>Description</h3>

<p>Return the cohort life table as a <code>mortalityTable.period</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getCohortTable(object, YOB, ...)

## S4 method for signature 'mortalityTable'
getCohortTable(object, YOB, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getCohortTable_+3A_object">object</code></td>
<td>
<p>The life table object (class inherited from mortalityTable)</p>
</td></tr>
<tr><td><code id="getCohortTable_+3A_yob">YOB</code></td>
<td>
<p>The birth year for which the life table should be calculated</p>
</td></tr>
<tr><td><code id="getCohortTable_+3A_...">...</code></td>
<td>
<p>Other parameters (currently unused)</p>
</td></tr>
</table>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>getCohortTable(mortalityTable)</code>: Return the cohort life table as a
<code>mortalityTable.period</code> object
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities")
tb75 = getCohortTable(AVOe2005R.male, YOB = 1975)
# The tb75 is a fixed table with no trend any more
plot(AVOe2005R.male, tb75, Period = 2017)

</code></pre>

<hr>
<h2 id='getOmega'>Return the maximum age of the life table</h2><span id='topic+getOmega'></span><span id='topic+getOmega+2CmortalityTable.period-method'></span><span id='topic+getOmega+2CmortalityTable.mixed-method'></span><span id='topic+getOmega+2CmortalityTable.jointLives-method'></span><span id='topic+getOmega+2CmortalityTable.observed-method'></span>

<h3>Description</h3>

<p>Return the maximum age of the life table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getOmega(object)

## S4 method for signature 'mortalityTable.period'
getOmega(object)

## S4 method for signature 'mortalityTable.mixed'
getOmega(object)

## S4 method for signature 'mortalityTable.jointLives'
getOmega(object)

## S4 method for signature 'mortalityTable.observed'
getOmega(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getOmega_+3A_object">object</code></td>
<td>
<p>A life table object (instance of a <code>mortalityTable</code> class)</p>
</td></tr>
</table>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>getOmega(mortalityTable.period)</code>: Return the maximum age of the period life table
</p>
</li>
<li> <p><code>getOmega(mortalityTable.mixed)</code>: Return the maximum age of the mixed life table
</p>
</li>
<li> <p><code>getOmega(mortalityTable.jointLives)</code>: Return the maximum age of the joint lives mortality table (returns the maximum age of the first table used for joint lives, as the ages of the joint lives are now known to the function)
</p>
</li>
<li> <p><code>getOmega(mortalityTable.observed)</code>: Return the maximum age of the life table
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities")
getOmega(AVOe2005R.male)
getOmega(mortalityTable.deMoivre(omega = 100))

</code></pre>

<hr>
<h2 id='getPeriodTable'>Return the period life table as a <code>mortalityTable.period</code> object</h2><span id='topic+getPeriodTable'></span><span id='topic+getPeriodTable+2CmortalityTable-method'></span>

<h3>Description</h3>

<p>Return the period life table as a <code>mortalityTable.period</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getPeriodTable(object, Period, ...)

## S4 method for signature 'mortalityTable'
getPeriodTable(object, Period, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getPeriodTable_+3A_object">object</code></td>
<td>
<p>The life table object (class inherited from mortalityTable)</p>
</td></tr>
<tr><td><code id="getPeriodTable_+3A_period">Period</code></td>
<td>
<p>The observation year, for which the death probabilities should
be determined. If missing, the base year of the table is used.</p>
</td></tr>
<tr><td><code id="getPeriodTable_+3A_...">...</code></td>
<td>
<p>Other parameters (currently unused)</p>
</td></tr>
</table>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>getPeriodTable(mortalityTable)</code>: Return the period life table as a
<code>mortalityTable.period</code> object
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities")
tb17 = getPeriodTable(AVOe2005R.male, Period = 2017)
# The tb17 is a fixed table with no trend any more
plot(AVOe2005R.male, tb17, YOB = 1975)

</code></pre>

<hr>
<h2 id='lifeTable'>Return the lifetable object (package lifecontingencies) for the cohort life table</h2><span id='topic+lifeTable'></span><span id='topic+lifeTable+2CmortalityTable-method'></span><span id='topic+lifeTable+2Carray-method'></span><span id='topic+lifeTable+2Clist-method'></span><span id='topic+lifeTable+2CNULL-method'></span>

<h3>Description</h3>

<p>Return the lifetable object (package lifecontingencies) for the cohort life table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lifeTable(object, ...)

## S4 method for signature 'mortalityTable'
lifeTable(object, ...)

## S4 method for signature 'array'
lifeTable(object, ...)

## S4 method for signature 'list'
lifeTable(object, ...)

## S4 method for signature ''NULL''
lifeTable(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lifeTable_+3A_object">object</code></td>
<td>
<p>The life table object (class inherited from mortalityTable)</p>
</td></tr>
<tr><td><code id="lifeTable_+3A_...">...</code></td>
<td>
<p>Parameters to be passed to the <code>deathProbabilities</code> method
of the life table</p>
</td></tr>
</table>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>lifeTable(mortalityTable)</code>: Return the lifetable object (package lifecontingencies)
for the cohort life table
</p>
</li>
<li> <p><code>lifeTable(array)</code>: Return the lifetable object (package lifecontingencies) from the mortalityTable objects stored in the array
</p>
</li>
<li> <p><code>lifeTable(list)</code>: Return the lifetable object (package lifecontingencies)  from the mortalityTable objects stored in the list
</p>
</li>
<li> <p><code>lifeTable(`NULL`)</code>: Empty dummy function to handle unassigned variables
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>if (requireNamespace("lifecontingencies", quietly = TRUE)) {
library("lifecontingencies")
mortalityTables.load("Austria_Annuities")
lifeTable(AVOe2005R.male, YOB = 2017)
axn(lifeTable(AVOe2005R.male, YOB = 1975), x = 65, i = 0.03)
axn(lifeTable(AVOe2005R.male, YOB = 2017), x = 65, i = 0.03)
}
</code></pre>

<hr>
<h2 id='makeQxDataFrame'>Converts one or multiple mortality table objects to a data frame that can be
plotted by <code>plotMortalityTables</code> or <code>plotMortalityTableComparisons</code></h2><span id='topic+makeQxDataFrame'></span>

<h3>Description</h3>

<p>It is not required to call this function manually, <code>plotMortalityTables</code>
will automatically do it if object derived from class <code>mortalityTable</code>
are passed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeQxDataFrame(..., YOB = 1972, Period = NA, reference = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeQxDataFrame_+3A_...">...</code></td>
<td>
<p>Life tables (objects of classes derived from <code>mortalityTable</code>)</p>
</td></tr>
<tr><td><code id="makeQxDataFrame_+3A_yob">YOB</code></td>
<td>
<p>desired year of birth to be plotted as cohort life table (default: 1972)</p>
</td></tr>
<tr><td><code id="makeQxDataFrame_+3A_period">Period</code></td>
<td>
<p>desired observation year to be plotted (default: NA). If both
<code>YOB</code> and <code>Period</code> are given, a period comparison is generated.</p>
</td></tr>
<tr><td><code id="makeQxDataFrame_+3A_reference">reference</code></td>
<td>
<p>Reference life table, used to show relative death
probabilities (i.e. the q_x for all ages are divided by the
corresponding probabilities of the reference table)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities")
makeQxDataFrame(AVOe2005R.male, AVOe2005R.female, YOB = 1975)

</code></pre>

<hr>
<h2 id='mortalityComparisonTable'>Calculate relative mortalities for age bands and birth years</h2><span id='topic+mortalityComparisonTable'></span>

<h3>Description</h3>

<p>Calculate relative mortalities for age bands and birth years
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mortalityComparisonTable(table1, table2, years, ages, binsize = 5, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mortalityComparisonTable_+3A_table1">table1</code>, <code id="mortalityComparisonTable_+3A_table2">table2</code></td>
<td>
<p>The <code><a href="#topic+mortalityTable">mortalityTable</a></code> objects to compare (mortalities of <code>table1</code> relative to <code>table2</code>)</p>
</td></tr>
<tr><td><code id="mortalityComparisonTable_+3A_years">years</code></td>
<td>
<p>Vector of birth years to include in the comparisons.</p>
</td></tr>
<tr><td><code id="mortalityComparisonTable_+3A_ages">ages</code></td>
<td>
<p>Vector of ages to include in the comparisons</p>
</td></tr>
<tr><td><code id="mortalityComparisonTable_+3A_binsize">binsize</code></td>
<td>
<p>How many ages to combine into one age band</p>
</td></tr>
<tr><td><code id="mortalityComparisonTable_+3A_...">...</code></td>
<td>
<p>Other parameters (currently unused)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities")
# Compare mortality of Austrian male and female annuitants born 1930 to 2030
mortalityComparisonTable(
    AVOe2005R.male, AVOe2005R.female,
    years = seq(1930, 2030, by = 10),
    ages = 0:119)

# Compare the two Austrian male annuity tables AVOe 2005-R and AVOe 1996-R,
# combining ages 10-19, 20-29, etc.
mortalityComparisonTable(
    AVOe2005R.male, AVOe1996R.male,
    years = seq(1930, 2030, by = 10),
    ages = 0:109, binsize=10)


</code></pre>

<hr>
<h2 id='mortalityImprovement'>Return the mortality trend (yearly log-death-probability improvement) of the given period or the given generation.</h2><span id='topic+mortalityImprovement'></span><span id='topic+mortalityImprovement+2CmortalityTable-method'></span>

<h3>Description</h3>

<p>Return the mortality trend (yearly log-death-probability improvement) of the given period or the given generation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mortalityImprovement(object, ..., Period = NULL, YOB = 1975)

## S4 method for signature 'mortalityTable'
mortalityImprovement(object, ..., Period = NULL, YOB = 1975)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mortalityImprovement_+3A_object">object</code></td>
<td>
<p>The life table object (class inherited from mortalityTable)</p>
</td></tr>
<tr><td><code id="mortalityImprovement_+3A_...">...</code></td>
<td>
<p>Other parameters (currently unused)</p>
</td></tr>
<tr><td><code id="mortalityImprovement_+3A_period">Period</code></td>
<td>
<p>The observation year for which the mortality improvement should
be calculated. If both YOB and Period are given, YOB is ignored.</p>
</td></tr>
<tr><td><code id="mortalityImprovement_+3A_yob">YOB</code></td>
<td>
<p>The birth year for which the mortality improvement should be calculated</p>
</td></tr>
</table>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>mortalityImprovement(mortalityTable)</code>: Return the yearly log-mortality improvement of the
life table given the birth or observation year
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities")
# AVOe 2005R includes a trend decline by default, compare the exact table
# with the table without decline:
mortalityImprovement(AVOe2005R.male, Period = 2017)
mortalityImprovement(AVOe2005R.male.nodamping, Period = 2017)

</code></pre>

<hr>
<h2 id='mortalityTable-class'>Class mortalityTable</h2><span id='topic+mortalityTable-class'></span><span id='topic+mortalityTable'></span>

<h3>Description</h3>

<p>Class <code>mortalityTable</code> is the (virtual) base class for all mortality
tables. It contains the name and some general values applying to all
types of tables, but does not contain any data itself. Use a child class
to create actual mortality tables.
</p>


<h3>Slots</h3>


<dl>
<dt><code>name</code></dt><dd><p>The human-readable name of the mortality table</p>
</dd>
<dt><code>baseYear</code></dt><dd><p>The base year of the mortality table (e.g. for tables with trend projection)</p>
</dd>
<dt><code>modification</code></dt><dd><p>A function that will be called with the final death probabilities
to give the user a way to modify the final probabilities</p>
</dd>
<dt><code>loading</code></dt><dd><p>Additional security loading on the resulting table (single numeric
value, e.g. 0.05 adds 5% security margin to the probabilities)</p>
</dd>
<dt><code>data</code></dt><dd><p>Placeholder list to make it possible to store any kind of data
associated with the object inside the object (e.g. the underlying
data used to derive the death probabilities, parameters for adjustment, etc.)</p>
</dd>
</dl>

<hr>
<h2 id='mortalityTable.ageShift-class'>Class mortalityTable.ageShift - Cohort life tables generated by age-shift</h2><span id='topic+mortalityTable.ageShift-class'></span><span id='topic+mortalityTable.ageShift'></span>

<h3>Description</h3>

<p>A cohort life table, obtained by age-shifting from a given base table (death probabilities
</p>


<h3>Slots</h3>


<dl>
<dt><code>ageShifts</code></dt><dd><p>A <code>data.frame</code> with columns <code>YOB</code> and <code>shifts</code> giving the age shifts for each birth year</p>
</dd>
</dl>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities_AVOe2005R")
tb = mortalityTable.ageShift(
    ages = ages(AVOe2005R.male),
    deathProbs = deathProbabilities(AVOe2005R.male, YOB = 1992),
    ageShifts = generateAgeShift(1, c(1962, 1985, 2000, 2015, 2040, 2070)))
# The cohort tables for different birth years are just the base probabilities with modified ages
plot(getCohortTable(tb, YOB = 1963), getCohortTable(tb, YOB = 2017))

</code></pre>

<hr>
<h2 id='mortalityTable.deMoivre-class'>Class mortalityTable.deMoivre - Mortality table with de Moivre's law</h2><span id='topic+mortalityTable.deMoivre-class'></span><span id='topic+mortalityTable.deMoivre'></span>

<h3>Description</h3>

<p>A period life table with maximum age omega dn the time of death identically
distributed on the interval [0, omega]. The only required slot is the maximum
age <code>omega</code>, all probabilities are calculated from it.
Optionally, a name and loading can be passed (inherited from
<code><a href="#topic+mortalityTable">mortalityTable</a></code>).
</p>


<h3>Slots</h3>


<dl>
<dt><code>omega</code></dt><dd><p>Maximum age</p>
</dd>
</dl>


<h3>Examples</h3>

<pre><code class='language-R'>mm = mortalityTable.deMoivre(100)
plot(mm,
     mortalityTable.deMoivre(90),
     mortalityTable.deMoivre(50))

</code></pre>

<hr>
<h2 id='mortalityTable.improvementFactors-class'>Class mortalityTable.improvementFactors - Cohort life table with improvement
factors</h2><span id='topic+mortalityTable.improvementFactors-class'></span><span id='topic+mortalityTable.improvementFactors'></span>

<h3>Description</h3>

<p>A cohort life table, obtained by an improvment factor projection
from a given base table (PODs for a given observation year).
</p>


<h3>Slots</h3>


<dl>
<dt><code>baseYear</code></dt><dd><p>The base year for the improvements (<code>baseTable</code>
describes the death probabilities in this year)</p>
</dd>
<dt><code>improvement</code></dt><dd><p>Yearly improvement factors per age</p>
</dd>
</dl>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities_AVOe2005R")
# AVOe 2005R base table with yearly improvements of 3% for age 0, linearly
# decreasing to 0% for age 120.
tb = mortalityTable.improvementFactors(
    ages = ages(AVOe2005R.male),
    deathProbs = periodDeathProbabilities(AVOe2005R.male, Period = 2002),
    baseYear = 2002,
    improvement = 0.03 * (1 - ages(AVOe2005R.male)/121),
    name = "AVOe 2005R base with linearly falling improvements (DEMO)"
)
# Yearly trend is declining:
plotMortalityTrend(tb, AVOe2005R.male, Period = 2017, title = "Mortality Trend")
# The cohort tables for different birth years:
plot(getCohortTable(tb, YOB = 1963), getCohortTable(tb, YOB = 2017))

</code></pre>

<hr>
<h2 id='mortalityTable.jointLives-class'>Class mortalityTable.jointLives - Life table for multiple joint lives</h2><span id='topic+mortalityTable.jointLives-class'></span><span id='topic+mortalityTable.jointLives'></span>

<h3>Description</h3>

<p>A cohort life table obtained by calculating joint death probabilities for
multiple lives, each possibly using a different mortality table.
</p>


<h3>Slots</h3>


<dl>
<dt><code>table</code></dt><dd><p>The <code>mortalityTable</code> object for all lives (vector if different tables should be used for the different persons)</p>
</dd>
</dl>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Germany_Census")
table.JL = mortalityTable.jointLives(
    name = "ADSt 24/26 auf verbundene Leben",
    table = mort.DE.census.1924.26.male
)
deathProbabilities(table.JL, YOB = 1977, ageDifferences = c(1, 5, -5, 16))
deathProbabilities(table.JL, YOB = 1977, ageDifferences = c(0))
deathProbabilities(table.JL, YOB = 1977, ageDifferences = c(1, 5, 16))

</code></pre>

<hr>
<h2 id='mortalityTable.MakehamGompertz-class'>Class mortalityTable.MakehamGompertz - Mortality table with Makeham-Gompertz's law</h2><span id='topic+mortalityTable.MakehamGompertz-class'></span><span id='topic+mortalityTable.MakehamGompertz'></span>

<h3>Description</h3>

<p>A period life table following Makeham and Gompertz's law of a mortality rate
<code class="reqn">\mu</code> increasing exponentially with age <code class="reqn">x</code> (<code class="reqn">\mu_{x+t} = A + B c^{(x+t)}</code>).
The only required slots are the parameters <code class="reqn">A</code>, <code class="reqn">B</code> and <code class="reqn">c</code>, all probabilities
are calculated from them, for technical reasons a maximum age of 120 is
technically assumed.  Optionally, a name and loading can be passed
(inherited from <code><a href="#topic+mortalityTable">mortalityTable</a></code>).
</p>


<h3>Slots</h3>


<dl>
<dt><code>A</code></dt><dd><p>Parameter A of the Makeham-Gompertz distribution</p>
</dd>
<dt><code>B</code></dt><dd><p>Parameter B of the Makeham-Gompertz distribution</p>
</dd>
<dt><code>c</code></dt><dd><p>Parameter c of the Makeham-Gompertz distribution</p>
</dd>
<dt><code>omega</code></dt><dd><p>Maximum age (default: 150)</p>
</dd>
</dl>


<h3>Examples</h3>

<pre><code class='language-R'># A Gompertz mortality, roughtly approximating the Austrian annuitants 2017
gmp = mortalityTable.MakehamGompertz(A = 0, B = 0.00001, c = 1.11)
mortalityTables.load("Austria_Annuities_AVOe2005R")
plot(gmp, AVOe2005R.male, Period=2017)

# A Makeham-Gompertz mortality, approximating the Austrian annuitants 2017
mg = mortalityTable.MakehamGompertz(A = 0.0002, B = 0.00001, c = 1.11)
plot(mg, gmp, AVOe2005R.male, Period=2017)

</code></pre>

<hr>
<h2 id='mortalityTable.mixed-class'>Class mortalityTable.mixed - Life table as a mix of two life tables</h2><span id='topic+mortalityTable.mixed-class'></span><span id='topic+mortalityTable.mixed'></span>

<h3>Description</h3>

<p>A cohort life table obtained by mixing two life tables with the given weights.
Typically, when only gender-specific tables are available, unisex tables
are generated by mixing the two gender-specific tables for males and for
females with a pre-defined, constant proportion (e.g. 60:30 or 40:60,
depending on the portfolio and on the security margins).
</p>


<h3>Slots</h3>


<dl>
<dt><code>table1</code></dt><dd><p>The first <code>mortalityTable</code></p>
</dd>
<dt><code>table2</code></dt><dd><p>The second <code>mortalityTable</code></p>
</dd>
<dt><code>weight1</code></dt><dd><p>The weight of the first mortality table</p>
</dd>
<dt><code>weight2</code></dt><dd><p>The weight of the second mortality table</p>
</dd>
<dt><code>loading</code></dt><dd><p>Additional security loading</p>
</dd>
</dl>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities_AVOe2005R")
# Generate a unisex table with mixing relation 60:40 from male + female tables
AVOe2005R.myUnisex = mortalityTable.mixed(
    table1 = AVOe2005R.male, table2 = AVOe2005R.female,
    weight1 = 0.6, weight2 = 0.4,
    name = "My custom AVOe 2005R unisex (60:40)")
plot(AVOe2005R.myUnisex, AVOe2005R.male, AVOe2005R.female, Period = 2017)
</code></pre>

<hr>
<h2 id='mortalityTable.NA'>Empty mortality table indicating NA</h2><span id='topic+mortalityTable.NA'></span>

<h3>Description</h3>

<p>Empty mortality table indicating NA
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mortalityTable.NA
</code></pre>


<h3>Format</h3>

<p>An object of class <code>mortalityTable.period</code> of length 1.
</p>

<hr>
<h2 id='mortalityTable.observed-class'>Class mortalityTable.observed - Life table from actual observations</h2><span id='topic+mortalityTable.observed-class'></span><span id='topic+mortalityTable.observed'></span>

<h3>Description</h3>

<p>A cohort life table described by actual observations (data frame of PODs
per year and age)
</p>


<h3>Slots</h3>


<dl>
<dt><code>deathProbs</code></dt><dd><p>The observed death probabilities (age-specific probability of dying within one year)</p>
</dd>
<dt><code>years</code></dt><dd><p>The observation years</p>
</dd>
<dt><code>ages</code></dt><dd><p>The observation ages</p>
</dd>
</dl>

<hr>
<h2 id='mortalityTable.once'>Generate a (deterministic) mortality table with only one probability set to 1 (for the given age)</h2><span id='topic+mortalityTable.once'></span>

<h3>Description</h3>

<p>Generate a (deterministic) mortality table with only one probability set to 1 (for the given age)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mortalityTable.once(
  transitionAge,
  name = "Deterministic mortality table",
  ages = 0:99
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mortalityTable.once_+3A_transitionage">transitionAge</code></td>
<td>
<p>The age where the deterministic transition occurs</p>
</td></tr>
<tr><td><code id="mortalityTable.once_+3A_name">name</code></td>
<td>
<p>The name of the table</p>
</td></tr>
<tr><td><code id="mortalityTable.once_+3A_ages">ages</code></td>
<td>
<p>The ages of the table</p>
</td></tr>
</table>

<hr>
<h2 id='mortalityTable.onceAndFuture'>Generate a (deterministic) mortality table with all probabilities starting at a given age set to 1</h2><span id='topic+mortalityTable.onceAndFuture'></span>

<h3>Description</h3>

<p>Generate a (deterministic) mortality table with all probabilities starting at a given age set to 1
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mortalityTable.onceAndFuture(
  transitionAge,
  name = "Deterministic mortality table",
  ages = 0:99
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mortalityTable.onceAndFuture_+3A_transitionage">transitionAge</code></td>
<td>
<p>The age where the deterministic transition occurs</p>
</td></tr>
<tr><td><code id="mortalityTable.onceAndFuture_+3A_name">name</code></td>
<td>
<p>The name of the table</p>
</td></tr>
<tr><td><code id="mortalityTable.onceAndFuture_+3A_ages">ages</code></td>
<td>
<p>The ages of the table</p>
</td></tr>
</table>

<hr>
<h2 id='mortalityTable.period-class'>Class mortalityTable.period - Period life tables</h2><span id='topic+mortalityTable.period-class'></span><span id='topic+mortalityTable.period'></span>

<h3>Description</h3>

<p>A period life table, giving death probabilities for each age, up to
maximum age <code>omega</code>. The <code>baseYear</code> slot can be used to hold
information about the period.
</p>


<h3>Slots</h3>


<dl>
<dt><code>ages</code></dt><dd><p>The ages corresponding to the entries of the deathProbs</p>
</dd>
<dt><code>deathProbs</code></dt><dd><p>The one-year death probabilities for the ages</p>
</dd>
<dt><code>exposures</code></dt><dd><p>(Optional) exposured used to determine death probabilities
(can be used as weights for smoothing, for variances, etc.)</p>
</dd>
</dl>


<h3>Examples</h3>

<pre><code class='language-R'>linTable = mortalityTable.period(name="linear mortality", ages = 0:50, deathProbs = 0:50/50)
constTable = mortalityTable.period(name="const. mortality", ages = 0:50,
                                   deathProbs = c(rep(0.1, 50), 1))
plot(linTable, constTable, title="Comparison of linear and constand death probabilities")

# A sample observation table with exposures and raw probabilities
obsTable = mortalityTable.period(
    name = "trivial observed table",
    ages = 0:15,
    deathProbs = c(
        0.0072, 0.00212, 0.00081, 0.0005, 0.0013,
        0.001, 0.00122, 0.00142, 0.007, 0.0043,
        0.0058, 0.0067, 0.0082, 0.0091, 0.0075, 0.01),
    exposures = c(
        150, 222, 350, 362, 542,
        682, 1022, 1053, 1103, 1037,
        968, 736, 822, 701, 653, 438))
plot(obsTable, title = "Observed death probabilities")

</code></pre>

<hr>
<h2 id='mortalityTable.trendProjection-class'>Class mortalityTable.trendProjection - Cohort mortality table with age-specific trend</h2><span id='topic+mortalityTable.trendProjection-class'></span><span id='topic+mortalityTable.trendProjection'></span>

<h3>Description</h3>

<p>A cohort mortality table, obtained by a trend projection from a given base table
(PODs for a given observation year). Typically, the trend is obtained by
the Lee-Carter method or some other trend estimation.
The dampingFunction can be used to modify the cumulative years (e.g. G(tau+x)
instead of tau+x)
If trend2 is given, the G(tau+x) gives the weight of the first trend,
1-G(tau+x) the weight of the second trend
</p>


<h3>Slots</h3>


<dl>
<dt><code>baseYear</code></dt><dd><p>The base year of the trend projection (<code>baseTable</code>
describes the death probabilities in this year)</p>
</dd>
<dt><code>trend</code></dt><dd><p>The yearly improvements of the log-death probabilities (per age)</p>
</dd>
<dt><code>dampingFunction</code></dt><dd><p>A possible damping of the trend. This is a function
<code>damping(delta_years)</code> that gets a vector of years
from the baseYear and should return the dampened values.</p>
</dd>
<dt><code>trend2</code></dt><dd><p>The alternate trend. If given, the damping function
interpolates between <code>trend</code> and <code>trend2</code>, otherwise
the dumping function simply modifies the coefficients of
<code>trend</code>.</p>
</dd>
</dl>


<h3>Examples</h3>

<pre><code class='language-R'>obsTable = mortalityTable.trendProjection(
    name = "Const. table with trend",
    baseYear = 2018,
    ages = 0:15,
    deathProbs = rep(0.02, 16),
    trend = c(
         0.045, 0.04, 0.03, 0.04, 0.042, 0.041, 0.038, 0.035,
         0.032, 0.031, 0.028, 0.020, 0.015, 0.01, 0.005, 0))
# In 2018 the flat mortality can be seen
plotMortalityTables(obsTable, Period = 2018, title = "Period death probabilities 2018")
# In 2038, the age-specific trend affected the probabilities differently for 20 years:
plotMortalityTables(obsTable, Period = 2038, title = "Period death probabilities 2038")
# Consequently, a person born 2018 will also not have constand death probabilities
plotMortalityTables(obsTable, YOB = 2018, title = "Cohort death probabilities, YOB 2018")

plotMortalityTables(
    lapply(2018:2033, function(y) getCohortTable(obsTable, YOB = y)),
    title = "Cohort tables for different YOBs", legend.position = c(0.99, 0.01))
plotMortalityTables(
   lapply(2018:2033, function(y) getPeriodTable(obsTable, Period = y)),
   title = "Period tables for different years", legend.position = c(0.99, 0.01))


</code></pre>

<hr>
<h2 id='mortalityTable.Weibull-class'>Class mortalityTable.Weibull - Mortality table with Weibull's law</h2><span id='topic+mortalityTable.Weibull-class'></span><span id='topic+mortalityTable.Weibull'></span>

<h3>Description</h3>

<p>A period life table following Weibulls's law of a mortality rate
<code class="reqn">\mu</code> increasing as a power of <code class="reqn">t</code>: </p>
<p style="text-align: center;"><code class="reqn">\mu_{x+t} = k * (x+t)^n</code>
</p>

<p>The only required slots are the parameters <code class="reqn">k&gt;0</code> and <code class="reqn">n&gt;0</code>, all probabilities
are calculated from them, for technical reasons a maximum age of 150 is
technically assumed.  Optionally, a name and loading can be passed
(inherited from <code><a href="#topic+mortalityTable">mortalityTable</a></code>).
</p>


<h3>Slots</h3>


<dl>
<dt><code>k</code></dt><dd><p>Parameter k of the Weibull distribution</p>
</dd>
<dt><code>n</code></dt><dd><p>Parameter n of the Weibull distribution</p>
</dd>
<dt><code>omega</code></dt><dd><p>Maximum age (default: 120)</p>
</dd>
</dl>


<h3>Examples</h3>

<pre><code class='language-R'># A Weibull mortality
wbl = mortalityTable.Weibull(k = 0.0000000001, n = 4.8)
mortalityTables.load("Austria_Annuities_AVOe2005R")
plot(wbl, AVOe2005R.male, Period=2017, ylim = c(0.00005, 1))

</code></pre>

<hr>
<h2 id='mortalityTable.zeroes'>Generate a mortality table with all probabilities set to zero.</h2><span id='topic+mortalityTable.zeroes'></span>

<h3>Description</h3>

<p>Generate a mortality table with all probabilities set to zero.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mortalityTable.zeroes(name = "Zero mortality table", ages = 0:99)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mortalityTable.zeroes_+3A_name">name</code></td>
<td>
<p>The name of the table</p>
</td></tr>
<tr><td><code id="mortalityTable.zeroes_+3A_ages">ages</code></td>
<td>
<p>The ages of the table</p>
</td></tr>
</table>

<hr>
<h2 id='mortalityTables.list'>List all available sets of life tables provided by the <a href="#topic+MortalityTables-package">MortalityTables-package</a> package
An existing life table can then be loaded with <a href="#topic+mortalityTables.load">mortalityTables.load</a>.</h2><span id='topic+mortalityTables.list'></span>

<h3>Description</h3>

<p>List all available sets of life tables provided by the <a href="#topic+MortalityTables-package">MortalityTables-package</a> package
An existing life table can then be loaded with <a href="#topic+mortalityTables.load">mortalityTables.load</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mortalityTables.list(
  pattern = "*",
  package = c("^MortalityTables", "^PensionTables"),
  prefix = "MortalityTables"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mortalityTables.list_+3A_pattern">pattern</code></td>
<td>
<p>Restrict the results only to life table sets that match the pattern with wildcards (default: &quot;*&quot; to show all sets)</p>
</td></tr>
<tr><td><code id="mortalityTables.list_+3A_package">package</code></td>
<td>
<p>The package that contains the desired dataset in its <code>extdata/</code>
directory. Defaults to the &quot;MortalityTables&quot; package.
Multiple packages can be given as a vector, even using regular expressions.</p>
</td></tr>
<tr><td><code id="mortalityTables.list_+3A_prefix">prefix</code></td>
<td>
<p>The file prefix, defaults to MortalityTables. Can be overridden to list other types of files, like &quot;PensionTables&quot;</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.list()
mortalityTables.list("Austria_*")
mortalityTables.list("*Annuities")
mortalityTables.list(package = c("MyCustomPackage"))

</code></pre>

<hr>
<h2 id='mortalityTables.load'>Load a named set of mortality tables provided by the <a href="#topic+MortalityTables">MortalityTables</a> package</h2><span id='topic+mortalityTables.load'></span>

<h3>Description</h3>

<p>Load a named set of mortality tables provided by the <a href="#topic+MortalityTables">MortalityTables</a> package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mortalityTables.load(
  dataset,
  package = c("^MortalityTables", "^PensionTables"),
  prefix = "MortalityTables"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mortalityTables.load_+3A_dataset">dataset</code></td>
<td>
<p>The set(s) of life tables to be loaded. A list of all available
data sets is provided by the function <code><a href="#topic+mortalityTables.list">mortalityTables.list</a></code>.
Wildcards (*) are allowed to match and load multiple datasets.</p>
</td></tr>
<tr><td><code id="mortalityTables.load_+3A_package">package</code></td>
<td>
<p>The package that contains the dataset in its <code>extdata/</code>
directory. Defaults to all packages starting with names that
start with &quot;MortalityTables&quot; or &quot;PensionTables&quot;.
Multiple packages can be given as a vector, even using regular expressions.
This package is not automatically loaded. If a provided
dataset needs its proving package loaded, it can do so explicitly.</p>
</td></tr>
<tr><td><code id="mortalityTables.load_+3A_prefix">prefix</code></td>
<td>
<p>The prefix for the data sets (default is &quot;MortalityTables&quot;).</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.list()
mortalityTables.load("Austria_Annuities_*")
mortalityTables.load("Austria_Annuities_AVOe2005R")
mortalityTables.load("*Annuities")
## Not run: mortalityTables.load("MyCustomTable", package = c("MyCustomPackage"))

</code></pre>

<hr>
<h2 id='mT.cleanup'>Remove all non-essential data (raw data, etc.) from a mortalityTable object</h2><span id='topic+mT.cleanup'></span><span id='topic+mT.cleanup+2CmortalityTable-method'></span><span id='topic+mT.cleanup+2CmortalityTable.period-method'></span><span id='topic+mT.cleanup+2CmortalityTable.trendProjection-method'></span><span id='topic+mT.cleanup+2Carray-method'></span><span id='topic+mT.cleanup+2Clist-method'></span><span id='topic+mT.cleanup+2CpensionTable-method'></span><span id='topic+mT.cleanup+2CmortalityTable.observed-method'></span>

<h3>Description</h3>

<p>The function mt.cleanup removes all non-essential data from a given mortalityTable
object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mT.cleanup(object)

## S4 method for signature 'mortalityTable'
mT.cleanup(object)

## S4 method for signature 'mortalityTable.period'
mT.cleanup(object)

## S4 method for signature 'mortalityTable.trendProjection'
mT.cleanup(object)

## S4 method for signature 'array'
mT.cleanup(object)

## S4 method for signature 'list'
mT.cleanup(object)

## S4 method for signature 'pensionTable'
mT.cleanup(object)

## S4 method for signature 'mortalityTable.observed'
mT.cleanup(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mT.cleanup_+3A_object">object</code></td>
<td>
<p>The mortalityTable object to be cleaned.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Mortality tables are often generated from raw data, that is smoothed, extrapolated,
etc. The mortalityTable class and its implementations can internally store the
raw probabilities and the intermediate results and parameters. This method
removes those information. All essential information (base table, ages,
trend functions, etc.) are preserved.
</p>
<p>Removed information includes:
* all elements of the <code>object@data</code> list, except for <code>dim</code>
* exposures
* names of named age, deathProbs and trend vectors
</p>
<p>For mortality tables with other mortalityTable components (like pension tables
or mixed tables), all components are cleaned.
</p>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>mT.cleanup(mortalityTable)</code>: Clean up and remove all non-essential data from the mortalityTable object
</p>
</li>
<li> <p><code>mT.cleanup(mortalityTable.period)</code>: Clean up and remove all non-essential data from the mortalityTable.period object
</p>
</li>
<li> <p><code>mT.cleanup(mortalityTable.trendProjection)</code>: Clean up and remove all non-essential data from the mortalityTable.trendProjection object
</p>
</li>
<li> <p><code>mT.cleanup(array)</code>: Clean up and remove all non-essential data from the mortalityTable objects stored in the array
</p>
</li>
<li> <p><code>mT.cleanup(list)</code>: Clean up and remove all non-essential data from the mortalityTable objects stored in the list
</p>
</li>
<li> <p><code>mT.cleanup(pensionTable)</code>: Clean up and remove all non-essential data from the mortalityTable objects stored in the array
</p>
</li>
<li> <p><code>mT.cleanup(mortalityTable.observed)</code>: Clean up the internal data of the mortality table
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Census")
# Whittaker-Henderson smoothing stores the raw input and the weights in the
# \code{data} slot of the table:
AT.smoothed = whittaker.mortalityTable(mort.AT.census.2011.male)
AT.smoothed@data$rawProbs
AT.smoothed@data$whittaker

# cleaning up the table removes those non-essential information again:
AT.smoothed.clean = mT.cleanup(AT.smoothed)
AT.smoothed.clean@data$rawProbs
AT.smoothed.clean@data$whittaker

</code></pre>

<hr>
<h2 id='mT.extrapolateProbsExp'>Extrapolate base table of a mortalityTable using an exponential function</h2><span id='topic+mT.extrapolateProbsExp'></span>

<h3>Description</h3>

<p>Extrapolate the base table of a <code>mortalityTable</code> object using an exponential
function (i.e. the death probabilities decreases towards 0 exponentially).
While death probabilities trending towards 0 for old ages is not realistic for
overall deaths, it can be useful to model causes of death that vanish in older age.
It is, however, most useful to extrapolate an observed base table to low ages
(e.g. for an insurance portfolio with practically no persons aged below 16). A
decline towards 0 for low ages makes sense in this case.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mT.extrapolateProbsExp(table, age, up = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mT.extrapolateProbsExp_+3A_table">table</code></td>
<td>
<p>A life table object (instance of a <code>mortalityTable</code> class)
or a list, table or array of mortalityTable objects</p>
</td></tr>
<tr><td><code id="mT.extrapolateProbsExp_+3A_age">age</code></td>
<td>
<p>Index (typically age) of the position of the fit</p>
</td></tr>
<tr><td><code id="mT.extrapolateProbsExp_+3A_up">up</code></td>
<td>
<p>Whether the fit is forward- or backward-facing (i.e. to old or young ages)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function needs only one age, from which the extrapolation using an exponential
function is applied. the strength of the exponential function is derived from the death probability at that age.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Census")
# use the Austrian population mortalities for ages 18-95 and exponentially
# extrapolate them to lower ages
AT11.lowAgesExp = mT.extrapolateProbsExp(mort.AT.census.2011.male, 18, up = FALSE)
plotMortalityTables(mT.setName(AT11.lowAgesExp, "Ages below 16 are extrapolated exponentially"),
                    mort.AT.census.2011.male)
</code></pre>

<hr>
<h2 id='mT.extrapolateTrendExp'>Extrapolate a mortality trend exponentially</h2><span id='topic+mT.extrapolateTrendExp'></span>

<h3>Description</h3>

<p>Extrapolate a mortality trend in a <code>mortalityTable</code> object using an exponential function (i.e. the trend decreases towards 0 exponentially).
This is mainly used to extrapolate an observed age-specific trend to very old ages.
Existing trend function values above (or below, respectively) the <code>idx</code> are overwritten.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mT.extrapolateTrendExp(table, idx, up = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mT.extrapolateTrendExp_+3A_table">table</code></td>
<td>
<p>A life table object (instance of a <code>mortalityTable</code> class) or a list, table or array of mortalityTable objects</p>
</td></tr>
<tr><td><code id="mT.extrapolateTrendExp_+3A_idx">idx</code></td>
<td>
<p>Index (typically age) of the position of the fit</p>
</td></tr>
<tr><td><code id="mT.extrapolateTrendExp_+3A_up">up</code></td>
<td>
<p>Whether the fit is forward- or backward-facing (i.e. to old or young ages)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities_AVOe2005R")
# extrapolate the trend exponentially from age 95 instead (overwriting the existing trend)
avoe2005exp = mT.extrapolateTrendExp(AVOe2005R.male, 95)
plotMortalityTrend(mT.setName(avoe2005exp, "AVÖ 2005R with trend extrapolated from age 85 up"),
                   AVOe2005R.male, Period = 2020, ages = 60:120)
</code></pre>

<hr>
<h2 id='mT.fillAges'>Restrict/expand a mortalityTable to certain ages</h2><span id='topic+mT.fillAges'></span>

<h3>Description</h3>

<p>Restrict the given <code>mortalityTable</code> object(s) to given ages, potentially filling with NA values to ensure they cover the full desired age range
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mT.fillAges(table, neededAges, fill = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mT.fillAges_+3A_table">table</code></td>
<td>
<p>A life table object (instance of a <code>mortalityTable</code> class) or a list, table or array of mortalityTable objects</p>
</td></tr>
<tr><td><code id="mT.fillAges_+3A_neededages">neededAges</code></td>
<td>
<p>The vector of ages the returned objects should cover (even if the values are 0 or NA)</p>
</td></tr>
<tr><td><code id="mT.fillAges_+3A_fill">fill</code></td>
<td>
<p>The value to use for all ages for which the original table(s) do not have any information</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities")
# return a table with only ages 100-130, where ages above 120 (not defined
# in the original table) are filled with qx=1:
mT.fillAges(AVOe2005R.male, neededAges = 100:130, fill = 1)

</code></pre>

<hr>
<h2 id='mT.fitExtrapolationLaw'>Fit interpolation law to a mortality table and extrapolate</h2><span id='topic+mT.fitExtrapolationLaw'></span>

<h3>Description</h3>

<p>Fit an extrapolation law (from the <code>MortalityLaws</code> Package to the base
table of the mortality table and use it for extrapolation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mT.fitExtrapolationLaw(
  table,
  method = "LF2",
  law = "HP",
  fit = 75:99,
  extrapolate = 80:120,
  fadeIn = 80:90,
  fadeOut = NULL,
  raw = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mT.fitExtrapolationLaw_+3A_table">table</code></td>
<td>
<p>A life table object (instance of a <code>mortalityTable</code> class) or a list, table or array of mortalityTable objects</p>
</td></tr>
<tr><td><code id="mT.fitExtrapolationLaw_+3A_method">method</code></td>
<td>
<p>The fitting method (passed on to [MortalityLaw])</p>
</td></tr>
<tr><td><code id="mT.fitExtrapolationLaw_+3A_law">law</code></td>
<td>
<p>The mortality law fitted to the data(passed on to [MortalityLaw])</p>
</td></tr>
<tr><td><code id="mT.fitExtrapolationLaw_+3A_fit">fit</code></td>
<td>
<p>Age range to use for the fit</p>
</td></tr>
<tr><td><code id="mT.fitExtrapolationLaw_+3A_extrapolate">extrapolate</code></td>
<td>
<p>Desired age range of the extrapolation (i.e. only those
ages will be extrapolated and added to the base table)</p>
</td></tr>
<tr><td><code id="mT.fitExtrapolationLaw_+3A_fadein">fadeIn</code></td>
<td>
<p>age range to linearly fade in from the existing base table's values to the extrapolated</p>
</td></tr>
<tr><td><code id="mT.fitExtrapolationLaw_+3A_fadeout">fadeOut</code></td>
<td>
<p>age range to linearly fade out from the extrapolated base table's values to the existing</p>
</td></tr>
<tr><td><code id="mT.fitExtrapolationLaw_+3A_raw">raw</code></td>
<td>
<p>(optional) raw data to use for fitting. If not given, the raw
probabilities of the table (stored in <code>table@data$rawProbs</code>)
or the table's base table (<code>table@deathProbs</code>) is used by default.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The fit is done using the <code>MortalityLaws::MortalityLaw</code> function, with the ages, death counts, exposures and death rates taken from the <code>table</code> mortality table object. The law and the fitting method can be given in the <code>mT.fitExtrapolationLaw</code> with
the law and the fitting method
</p>
<p>The age range <code>fit</code> is used to fit the law, while extrapolation is
applied only to ages given in parameter <code>extrapolate</code>. As fitting
does usually not result a smooth transition, a linear fade in or fade out
range can also be provided.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Census")
# use Austrian population mortalities for ages 18-95 and exponentially
# extrapolate them to lower ages
AT11.lowAges = mT.fitExtrapolationLaw(mort.AT.census.2011.male, law = "opperman",
                                      fit = 5:15, extrapolate = 0:15,
                                      fadeIn = NULL, fadeOut = 5:15)
AT11.oldAges = mT.fitExtrapolationLaw(mort.AT.census.2011.male, law = "HP",
                                      fit = 75:90, extrapolate = 75:120)
plotMortalityTables(mT.setName(AT11.lowAges, "Low ages fitted (ages 5-15 used)"),
                    mT.setName(AT11.oldAges, "old ages fitted (ages 75-90 used)"),
                    mort.AT.census.2011.male)
</code></pre>

<hr>
<h2 id='mT.round'>Round all components of a mortality table to the given number of digits</h2><span id='topic+mT.round'></span><span id='topic+mT.round+2CmortalityTable-method'></span><span id='topic+mT.round+2CmortalityTable.period-method'></span><span id='topic+mT.round+2CmortalityTable.trendProjection-method'></span><span id='topic+mT.round+2CmortalityTable.improvementFactors-method'></span><span id='topic+mT.round+2Carray-method'></span><span id='topic+mT.round+2Clist-method'></span><span id='topic+mT.round+2CpensionTable-method'></span><span id='topic+mT.round+2CmortalityTable.observed-method'></span>

<h3>Description</h3>

<p>The function mt.round rounds all components (base table, potentially also
trend functions or yearly improvement factors) to the given number of
numerical digits. For pensionTable objects, the function is applied to all components
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mT.round(object, digits = 8)

## S4 method for signature 'mortalityTable'
mT.round(object, digits = 8)

## S4 method for signature 'mortalityTable.period'
mT.round(object, digits = 8)

## S4 method for signature 'mortalityTable.trendProjection'
mT.round(object, digits = 8)

## S4 method for signature 'mortalityTable.improvementFactors'
mT.round(object, digits = 8)

## S4 method for signature 'array'
mT.round(object, digits = 8)

## S4 method for signature 'list'
mT.round(object, digits = 8)

## S4 method for signature 'pensionTable'
mT.round(object, digits = 8)

## S4 method for signature 'mortalityTable.observed'
mT.round(object, digits = 8)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mT.round_+3A_object">object</code></td>
<td>
<p>The mortalityTable object to be rounded (or a list / array of mortalityTable object)</p>
</td></tr>
<tr><td><code id="mT.round_+3A_digits">digits</code></td>
<td>
<p>the desired number of significant digits to round to</p>
</td></tr>
</table>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>mT.round(mortalityTable)</code>: Round the given mortalityTable to a given number of digits
</p>
</li>
<li> <p><code>mT.round(mortalityTable.period)</code>: Round the given period mortality table to a given number of digits (base table and loadings)
</p>
</li>
<li> <p><code>mT.round(mortalityTable.trendProjection)</code>: Round the given mortalityTable with trend projection to a given number of digits (base table, loadings and trend(s))
</p>
</li>
<li> <p><code>mT.round(mortalityTable.improvementFactors)</code>: Round the given mortalityTable with improvement factors to a given number of digits (base table, loadings and improvement factors)
</p>
</li>
<li> <p><code>mT.round(array)</code>: Round the mortalityTables stored in an array to a given number of digits
</p>
</li>
<li> <p><code>mT.round(list)</code>: Round the mortalityTables stored in a list to a given number of digits
</p>
</li>
<li> <p><code>mT.round(pensionTable)</code>: Round all components of a pensionTable to a given number of digits
</p>
</li>
<li> <p><code>mT.round(mortalityTable.observed)</code>: Return the life table with the values rounded to the given number of digits
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Census")
AT.rounded1 = mT.round(mort.AT.census.2011.male, 1)
AT.rounded2 = mT.round(mort.AT.census.2011.male, 2)
AT.rounded3 = mT.round(mort.AT.census.2011.male, 3)
plotMortalityTables(mort.AT.census.2001.male,
                    mT.setName(AT.rounded1, "rounded to 1 digit"),
                    mT.setName(AT.rounded3, "rounded to 3 digits"))

</code></pre>

<hr>
<h2 id='mT.scaleProbs'>Scale all probabilities of the given <code>mortalityTable</code> object(s) by the given factor</h2><span id='topic+mT.scaleProbs'></span>

<h3>Description</h3>

<p>Scale all probabilities of the given <code>mortalityTable</code> object(s) by the given factor
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mT.scaleProbs(table, factor = 1, name.postfix = "scaled", name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mT.scaleProbs_+3A_table">table</code></td>
<td>
<p>A life table object (instance of a <code>mortalityTable</code> class) or a list, table or array of mortalityTable objects</p>
</td></tr>
<tr><td><code id="mT.scaleProbs_+3A_factor">factor</code></td>
<td>
<p>Scaling factor for the probabilities (1.0 means unchanged)</p>
</td></tr>
<tr><td><code id="mT.scaleProbs_+3A_name.postfix">name.postfix</code></td>
<td>
<p>String to append to the original name of the table</p>
</td></tr>
<tr><td><code id="mT.scaleProbs_+3A_name">name</code></td>
<td>
<p>New name, overwriting the existing name of the table (takes precedence over <code>name.postfix</code>)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities")
mT.scaleProbs(AVOe2005R.male, 1.5) # Add 50% to all death probabilities of the table

</code></pre>

<hr>
<h2 id='mT.setDimInfo'>Set additional information (year, description, type of risk, sex, etc.) for the mortality table.</h2><span id='topic+mT.setDimInfo'></span>

<h3>Description</h3>

<p>A mortalityTable can store additional information to be used e.g. as additional
dimensions in ggplot calls. Typically, these information include sex, base
population, observation year, type of data (raw, smoothed), country, type of
risk, etc. These additional dimensions are stored in the <code>tbl@data</code> list
and will be used by plotMortalityTables and similar functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mT.setDimInfo(tbl, ..., append = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mT.setDimInfo_+3A_tbl">tbl</code></td>
<td>
<p>The <code>mortalityTable</code> object to assign dimensional information</p>
</td></tr>
<tr><td><code id="mT.setDimInfo_+3A_...">...</code></td>
<td>
<p>The dimensional information as named arguments. All names except tbl and append are allowed.</p>
</td></tr>
<tr><td><code id="mT.setDimInfo_+3A_append">append</code></td>
<td>
<p>Whether to append to existing dimensional data (append=TRUE) or
completely replace existing information (append=FALSE)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Census")
mortalityTables.load("Austria_Annuities")
# The annuity tables use the population mortality as starting point. Set either
# population or anuuitants as dimensional info and use that dimension in a ggplot
# Most pre-defined tables already have the most important dimensions (like sex) stored.
at01.m = mT.setDimInfo(mort.AT.census.2001.male, population = "Population")
at01.f = mT.setDimInfo(mort.AT.census.2001.female, population = "Population")
av05r.m = mT.setDimInfo(AVOe2005R.male, population = "Annuitants")
plotMortalityTables(at01.m, at01.f, av05r.m) + aes(linetype = population, color = sex)
</code></pre>

<hr>
<h2 id='mT.setName'>Sets a new name for the given mortality table or the list/table/array of mortalityTables</h2><span id='topic+mT.setName'></span>

<h3>Description</h3>

<p>Sets a new name for the given mortality table or the list/table/array of mortalityTables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mT.setName(table, name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mT.setName_+3A_table">table</code></td>
<td>
<p>A life table object (instance of a <code>mortalityTable</code> class) or a list, table or array of mortalityTable objects</p>
</td></tr>
<tr><td><code id="mT.setName_+3A_name">name</code></td>
<td>
<p>New name for the table.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities")
mT.setName(AVOe2005R.male, name = "Austrian male Annuity table 2005-R")

</code></pre>

<hr>
<h2 id='mT.setTrend'>Set/Add a trend vector for the probabilities of the given <code>mortalityTable</code> object(s). Returns a <code>mortalityTable.trendProjection</code> object</h2><span id='topic+mT.setTrend'></span><span id='topic+mT.addTrend'></span>

<h3>Description</h3>

<p>Set/Add a trend vector for the probabilities of the given <code>mortalityTable</code> object(s). Returns a <code>mortalityTable.trendProjection</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mT.setTrend(
  table,
  trend,
  trendages = NULL,
  baseYear = NULL,
  dampingFunction = identity
)

mT.addTrend(
  table,
  trend,
  trendages = NULL,
  baseYear = NULL,
  dampingFunction = identity
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mT.setTrend_+3A_table">table</code></td>
<td>
<p>A life table object (instance of a <code>mortalityTable</code> class) or a list, table or array of mortalityTable objects</p>
</td></tr>
<tr><td><code id="mT.setTrend_+3A_trend">trend</code></td>
<td>
<p>Trend vector to be applied to the mortality table</p>
</td></tr>
<tr><td><code id="mT.setTrend_+3A_trendages">trendages</code></td>
<td>
<p>Ages corresponding to the values of the <code>trend</code> vector</p>
</td></tr>
<tr><td><code id="mT.setTrend_+3A_baseyear">baseYear</code></td>
<td>
<p>Base year for the trend projection (passed on to <code>mortalityTable.trendProjection</code>)</p>
</td></tr>
<tr><td><code id="mT.setTrend_+3A_dampingfunction">dampingFunction</code></td>
<td>
<p>Trend damping (passed on to <code>mortalityTable.trendProjection</code>)</p>
</td></tr>
</table>


<h3>Functions</h3>


<ul>
<li> <p><code>mT.addTrend()</code>: Add a trend to the mortality table (returns a mortalityTable.trendProjection obect)
</p>
</li></ul>

<hr>
<h2 id='mT.switchover'>Switch over mortalities from one table to another at a given age</h2><span id='topic+mT.switchover'></span>

<h3>Description</h3>

<p>This function modifies a <code>mortalityTable</code> by switching moralities at a given
age to the mortalities of a second table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mT.switchover(table, to, at, weights = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mT.switchover_+3A_table">table</code></td>
<td>
<p>The <code>mortalityTable</code> to modify (transition the probabilities to the secondary table)</p>
</td></tr>
<tr><td><code id="mT.switchover_+3A_to">to</code></td>
<td>
<p>The secondary <code>mortalityTable</code> containing the target probabilities</p>
</td></tr>
<tr><td><code id="mT.switchover_+3A_at">at</code></td>
<td>
<p>The age at which to switch over to the secondary table (if <code>weights</code> are given, the <code>at</code> argument is ignored).</p>
</td></tr>
<tr><td><code id="mT.switchover_+3A_weights">weights</code></td>
<td>
<p>(optional) transition weights for transitioning the probabilities from the primary to the secondary table (as a linear combination).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function <code>mT.switchover</code> modifies the given <code>mortalityTable</code>
and replaces the mortalities starting from a given age by the mortalities
of a second table. By default, the transition from the original table to the
secondary table is a simple 0/1-switch at the given age <code>at</code>. This is done
internally by using <code>weights= (age &gt;= at)</code>.
</p>
<p>By giving custom weights, one can also implement a smooth transition to the
secondary table. The weights are used as simple factors of a linear combination
of the two tables.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Census")
mort.AT.switchover = mT.switchover(mort.AT.census.2011.male, mort.AT.census.2011.female, 60)
plotMortalityTables(mort.AT.census.2011.male,
                    mT.setName(mort.AT.switchover, "Switched to female at age 60"))

# A smooth switchover is possible with custom weights
mort.AT.switchover.smooth = mT.switchover(mort.AT.census.2011.male, mort.AT.census.2011.female,
    weights = c(rep(0, 55), 0:20/20, rep(1, 25)))
plotMortalityTables(mort.AT.census.2011.male,
    mT.setName(mort.AT.switchover.smooth, "Switched to female smoothly at ages 55-75"))

</code></pre>

<hr>
<h2 id='mT.translate'>Translate base table of a cohort mortality table to a different observation year</h2><span id='topic+mT.translate'></span>

<h3>Description</h3>

<p>Translate the base table of a cohort life table to a different observation period,
using the existing base table and the trend functions. This only has an effect on
cohort life tables (e.g. objects of class <code>mortalityTable.trendProjection</code>).
For all other life tables (period life tables, observed, etc.), this function has no effect.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mT.translate(table, baseYear, name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mT.translate_+3A_table">table</code></td>
<td>
<p>A life table object (instance of a <code>mortalityTable</code> class)
or a list, table or array of mortalityTable objects</p>
</td></tr>
<tr><td><code id="mT.translate_+3A_baseyear">baseYear</code></td>
<td>
<p>Target base year. The underlying period life table of the
cohort life table is translated to the desired target base
year by applying the trend factors of the table, resulting
in a consistent shift of the internal representation without
changing the resulting probabilities.</p>
</td></tr>
<tr><td><code id="mT.translate_+3A_name">name</code></td>
<td>
<p>(optional) new name for the mortality table</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function also does not modify the resulting death probabilities of the life table
object, it just reparameterizes the internal representation of a life table
with trend projection factors.
</p>
<p>This functionality is often needed when publisheing life thables. Typically,
the table is derived from a certain observation period, so the resulting base
table describes the middle of the observation period. Projetion into the future
is then done using trend projection factors starting from that base table.
On the other hand, for the published table it is often desired to tabulate
not the middle of the observation period, but rather the current year as base
year for the extrapolation.
For the resulting period or cohort death probabilities, it is irrelevant, which
base year is used, as long as the shift to another base year (which includes
translating the base mortalities of the base year) is done consistenly with the
trend functions. The function <code>mT.translate</code> ensures this.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities_AVOe2005R")
# The AVOe2005R.male.nodamping has 2001 as the base year. Move its base year
# to 2020 without modifying cohort probabilities
avoe05r.shifted = mT.translate(AVOe2005R.male.nodamping, 2020, "AVÖ 2005-R, translated to 2020")
plotMortalityTables(
    getPeriodTable(AVOe2005R.male.nodamping),
    getPeriodTable(avoe05r.shifted),
    title = "Base tables of the AVÖ 2005R a translated version to 2020")
# Even though the base tables are shifted, the resulting probabilities are
# unchanged (except for numeric artefacts)
abs(periodDeathProbabilities(AVOe2005R.male.nodamping, Period = 2050) -
    periodDeathProbabilities(avoe05r.shifted, Period = 2050)) &lt; 0.00000001
abs(deathProbabilities(AVOe2005R.male.nodamping, YOB = 2050) -
    deathProbabilities(avoe05r.shifted, YOB = 2050)) &lt; 0.00000001
</code></pre>

<hr>
<h2 id='pensionTable-class'>Class pensionTable</h2><span id='topic+pensionTable-class'></span><span id='topic+pensionTable'></span>

<h3>Description</h3>

<p>Class <code>pensionTable</code> is the (virtual) base class for all pensions
tables. It contains the name and some general values applying to all
types of tables. In particular, it holds individual tables for each of the
transition probabilities. Possible states are:
</p>

<ul>
<li><p> active: healty, no pension, typically paying some kin of premium
</p>
</li>
<li><p> incapacity: disablity pension, in most cases permanent, not working, early pension
</p>
</li>
<li><p> retirement: old age pension, usually starting with a fixed age
</p>
</li>
<li><p> dead </p>

<ul>
<li><p> Widow/widower pension
</p>
</li></ul>

</li></ul>

<p>Correspondingly, the following transition probabilities can be given:</p>

<dl>
<dt>qxaa</dt><dd><p>death probability of actives (active -&gt; dead)</p>
</dd>
<dt>ix</dt><dd><p>invalidity probability (active -&gt; incapacity)</p>
</dd>
<dt>qix</dt><dd><p>death probability of invalid (invalid -&gt; dead)</p>
</dd>
<dt>rx</dt><dd><p>reactivation probability (incapacity -&gt; active)</p>
</dd>
<dt>apx</dt><dd><p>retirement probability (active -&gt; retirement), typically 1 for a fixed age</p>
</dd>
<dt>qpx</dt><dd><p>death probability of retired (retired -&gt; dead)</p>
</dd>
<dt>hx</dt><dd><p>probability of a widow at moment of death (dead -&gt; widow), y(x) age difference</p>
</dd>
<dt>qxw</dt><dd><p>death probability of widows/widowers</p>
</dd>
<dt>qgx</dt><dd><p>death probability of total group (irrespective of state)</p>
</dd>
<dt>invalids.retire</dt><dd><p>Flag to indicate whether invalid persons retire
like active (one death probability for all retirees) or whether
they stay invalid until death with death probabilities specific to
invalids.</p>
</dd>
</dl>



<h3>Slots</h3>


<dl>
<dt><code>qx</code></dt><dd><p>Death probability table of actives (derived from mortalityTable)</p>
</dd>
<dt><code>ix</code></dt><dd><p>Invalidity probability of actives (derived from mortalityTable)</p>
</dd>
<dt><code>qix</code></dt><dd><p>Death probability table of invalids (derived from mortalityTable)</p>
</dd>
<dt><code>rx</code></dt><dd><p>Reactivation probability of invalids (derived from mortalityTable)</p>
</dd>
<dt><code>apx</code></dt><dd><p>Retirement probability of actives (derived from mortalityTable)</p>
</dd>
<dt><code>qpx</code></dt><dd><p>Death probability of old age pensioners (derived from mortalityTable)</p>
</dd>
<dt><code>hx</code></dt><dd><p>Probability of a widow at the moment of death (derived from mortalityTable)</p>
</dd>
<dt><code>qwy</code></dt><dd><p>Death probability of widow(er)s (derived from mortality Table)</p>
</dd>
<dt><code>yx</code></dt><dd><p>Age difference of the widow to the deceased</p>
</dd>
<dt><code>qgx</code></dt><dd><p>Death probability of whole group (derived from mortalityTable), irrespective of state</p>
</dd>
<dt><code>invalids.retire</code></dt><dd><p>Whether invalids retire like actives or stay invalid until death</p>
</dd>
<dt><code>probs.arrange</code></dt><dd><p>A function that takes the individual transition probabilities of all the components and creates one object (a data.frame or a list) that will be returned by the method <code>transitionProbabilities</code>. The default arranges all tables without further modification. However, some pension tables (like the german Heubeck table) require the total mortality to be recalculated from the individual mortalities of actives and disabled. In this case, the function assigned to this slot will also calculate that total probability.</p>
</dd>
</dl>

<hr>
<h2 id='pensionTables.list'>List all available sets of pension tables provided by the <a href="#topic+MortalityTables-package">MortalityTables-package</a> package
An existing pension table can then be loaded with <a href="#topic+pensionTables.load">pensionTables.load</a>.</h2><span id='topic+pensionTables.list'></span>

<h3>Description</h3>

<p>List all available sets of pension tables provided by the <a href="#topic+MortalityTables-package">MortalityTables-package</a> package
An existing pension table can then be loaded with <a href="#topic+pensionTables.load">pensionTables.load</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pensionTables.list(
  pattern = "*",
  package = c("^MortalityTables", "^PensionTables")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pensionTables.list_+3A_pattern">pattern</code></td>
<td>
<p>Restrict the results only to pension table sets that match the pattern with wildcards (default: &quot;*&quot; to show all sets)</p>
</td></tr>
<tr><td><code id="pensionTables.list_+3A_package">package</code></td>
<td>
<p>The package that contains the desired dataset in its <code>extdata/</code>
directory. Defaults to the &quot;MortalityTables&quot; package.
Multiple packages can be given as a vector, even using regular expressions.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>pensionTables.list()
pensionTables.list("USA_*")
pensionTables.list(package = c("MyCustomPackage"))

</code></pre>

<hr>
<h2 id='pensionTables.load'>Load a named set of pension tables provided by the <a href="#topic+MortalityTables">MortalityTables</a> package</h2><span id='topic+pensionTables.load'></span>

<h3>Description</h3>

<p>Load a named set of pension tables provided by the <a href="#topic+MortalityTables">MortalityTables</a> package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pensionTables.load(dataset, package = c("^MortalityTables", "^PensionTables"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pensionTables.load_+3A_dataset">dataset</code></td>
<td>
<p>The set of lifpensione tables to be loaded. A list of all available
data sets is provided by the function <code><a href="#topic+pensionTables.list">pensionTables.list</a></code>.
Wildcards (*) are allowed to match and load multiple datasets.</p>
</td></tr>
<tr><td><code id="pensionTables.load_+3A_package">package</code></td>
<td>
<p>The package that contains the dataset in its <code>extdata/</code>
directory. Defaults to all packages starting with names that
start with &quot;MortalityTables&quot; or &quot;PensionTables&quot;.
Multiple packages can be given as a vector, even using regular expressions.
</p>
<p>pensionTables.list()
pensionTables.load(&quot;*&quot;)
pensionTables.load(&quot;USA_PensionPlan_RP2014&quot;)</p>
</td></tr>
</table>

<hr>
<h2 id='periodDeathProbabilities'>Return the (period) death probabilities of the life table for a given
observation year</h2><span id='topic+periodDeathProbabilities'></span><span id='topic+periodDeathProbabilities+2CmortalityTable.period-method'></span><span id='topic+periodDeathProbabilities+2CmortalityTable.ageShift-method'></span><span id='topic+periodDeathProbabilities+2CmortalityTable.trendProjection-method'></span><span id='topic+periodDeathProbabilities+2CmortalityTable.improvementFactors-method'></span><span id='topic+periodDeathProbabilities+2CmortalityTable.mixed-method'></span><span id='topic+periodDeathProbabilities+2CmortalityTable.jointLives-method'></span><span id='topic+periodDeathProbabilities+2CmortalityTable.observed-method'></span>

<h3>Description</h3>

<p>Return the (period) death probabilities of the life table for a given
observation year
</p>


<h3>Usage</h3>

<pre><code class='language-R'>periodDeathProbabilities(object, ..., ages = NULL, Period = 1975)

## S4 method for signature 'mortalityTable.period'
periodDeathProbabilities(object, ..., ages = NULL, Period = 1975)

## S4 method for signature 'mortalityTable.ageShift'
periodDeathProbabilities(object, ..., ages = NULL, Period = 1975)

## S4 method for signature 'mortalityTable.trendProjection'
periodDeathProbabilities(object, ..., ages = NULL, Period = 1975)

## S4 method for signature 'mortalityTable.improvementFactors'
periodDeathProbabilities(object, ..., ages = NULL, Period = 1975)

## S4 method for signature 'mortalityTable.mixed'
periodDeathProbabilities(object, ..., ages = NULL, Period = 1975)

## S4 method for signature 'mortalityTable.jointLives'
periodDeathProbabilities(
  object,
  ...,
  ageDifferences = c(),
  ages = NULL,
  Period = 1975
)

## S4 method for signature 'mortalityTable.observed'
periodDeathProbabilities(object, ..., ages = NULL, Period = 1975)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="periodDeathProbabilities_+3A_object">object</code></td>
<td>
<p>The life table object (class inherited from mortalityTable)</p>
</td></tr>
<tr><td><code id="periodDeathProbabilities_+3A_...">...</code></td>
<td>
<p>Other parameters (currently unused)</p>
</td></tr>
<tr><td><code id="periodDeathProbabilities_+3A_ages">ages</code></td>
<td>
<p>Desired age range (if NULL, the probabilities of the age range provided by the table will be returned), missing ages will be filled with NA</p>
</td></tr>
<tr><td><code id="periodDeathProbabilities_+3A_period">Period</code></td>
<td>
<p>The observation year for which the period death probabilities should be determined</p>
</td></tr>
<tr><td><code id="periodDeathProbabilities_+3A_agedifferences">ageDifferences</code></td>
<td>
<p>A vector of age differences of all joint lives.</p>
</td></tr>
</table>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>periodDeathProbabilities(mortalityTable.period)</code>: Return the (period) death probabilities
of the life table for a given observation year
</p>
</li>
<li> <p><code>periodDeathProbabilities(mortalityTable.ageShift)</code>: Return the (period) death probabilities
of the life table for a given observation year
</p>
</li>
<li> <p><code>periodDeathProbabilities(mortalityTable.trendProjection)</code>: Return the (period) death probabilities
of the life table for a given observation year
</p>
</li>
<li> <p><code>periodDeathProbabilities(mortalityTable.improvementFactors)</code>: Return the (period) death probabilities
of the life table for a given observation year
</p>
</li>
<li> <p><code>periodDeathProbabilities(mortalityTable.mixed)</code>: Return the (period) death probabilities
of the life table for a given observation year
</p>
</li>
<li> <p><code>periodDeathProbabilities(mortalityTable.jointLives)</code>: Return the (period) death probabilities
of the joint lives mortality table for a given observation year
</p>
</li>
<li> <p><code>periodDeathProbabilities(mortalityTable.observed)</code>: Return the (period) death probabilities
of the life table for a given observation year
If the observed mortality table does not provide data
for the desired period, the period closest to the
'Period' argument will be used and a warning printed.
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities")
periodDeathProbabilities(AVOe2005R.male, Period = 1975)
periodDeathProbabilities(AVOe2005R.male, Period = 2017)

mortalityTables.load("Germany_Census")
table.JL = mortalityTable.jointLives(
    name = "ADSt 24/26 auf verbundene Leben",
    table = mort.DE.census.1924.26.male
)
periodDeathProbabilities(table.JL, Period = 2017, ageDifferences = c(1, 5, -5, 16))
periodDeathProbabilities(table.JL, Period = 2017, ageDifferences = c(0))
periodDeathProbabilities(table.JL, Period = 2017, ageDifferences = c(1, 5, 16))

</code></pre>

<hr>
<h2 id='periodDeathProbabilitiesIndividual'>Return a matrix of the persons' individual period death probabilities of a
joint-life table (instance of <code><a href="#topic+mortalityTable.jointLives">mortalityTable.jointLives</a></code>)</h2><span id='topic+periodDeathProbabilitiesIndividual'></span>

<h3>Description</h3>

<p>Return a matrix of the persons' individual period death probabilities of a
joint-life table (instance of <code><a href="#topic+mortalityTable.jointLives">mortalityTable.jointLives</a></code>)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>periodDeathProbabilitiesIndividual(tables, period, ageDifferences)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="periodDeathProbabilitiesIndividual_+3A_tables">tables</code></td>
<td>
<p>List of life table objects (object inherited from
<code><a href="#topic+mortalityTable">mortalityTable</a></code>)</p>
</td></tr>
<tr><td><code id="periodDeathProbabilitiesIndividual_+3A_period">period</code></td>
<td>
<p>The observation period</p>
</td></tr>
<tr><td><code id="periodDeathProbabilitiesIndividual_+3A_agedifferences">ageDifferences</code></td>
<td>
<p>The age differences to the first person</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Germany_Census")
periodDeathProbabilitiesIndividual(list(mort.DE.census.1924.26.male), 1977, c(0, 0))
periodDeathProbabilitiesIndividual(list(mort.DE.census.1924.26.male), 1977, c(0, -5, 13))

</code></pre>

<hr>
<h2 id='periodTransitionProbabilities'>Return all period transition probabilities of the pension table</h2><span id='topic+periodTransitionProbabilities'></span><span id='topic+periodTransitionProbabilities+2CpensionTable-method'></span>

<h3>Description</h3>

<p>Return all period transition probabilities of the pension table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>periodTransitionProbabilities(object, ...)

## S4 method for signature 'pensionTable'
periodTransitionProbabilities(
  object,
  Period = 2017,
  ...,
  ages = NULL,
  OverallMortality = FALSE,
  retirement = NULL,
  invalids.retire = object@invalids.retire,
  as.data.frame = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="periodTransitionProbabilities_+3A_object">object</code></td>
<td>
<p>A pension table object (instance of a <code><a href="#topic+pensionTable-class">pensionTable</a></code> class)</p>
</td></tr>
<tr><td><code id="periodTransitionProbabilities_+3A_...">...</code></td>
<td>
<p>Currently unused</p>
</td></tr>
<tr><td><code id="periodTransitionProbabilities_+3A_period">Period</code></td>
<td>
<p>Observation year</p>
</td></tr>
<tr><td><code id="periodTransitionProbabilities_+3A_ages">ages</code></td>
<td>
<p>Desired age range (if NULL, the probabilities of the age range provided by the table will be returned), missing ages will be filled with NA</p>
</td></tr>
<tr><td><code id="periodTransitionProbabilities_+3A_overallmortality">OverallMortality</code></td>
<td>
<p>Whether the overall mortality should be returned for actives, or the active mortality</p>
</td></tr>
<tr><td><code id="periodTransitionProbabilities_+3A_retirement">retirement</code></td>
<td>
<p>Override the retirement transition probabilities of the pension table. Possible values are:</p>

<ul>
<li><p> Single age (describing a deterministric retirement at the given age)
</p>
</li>
<li><p> mortalityTable object: transition probabilities for retirement
</p>
</li></ul>
</td></tr>
<tr><td><code id="periodTransitionProbabilities_+3A_invalids.retire">invalids.retire</code></td>
<td>
<p>Override the <code><a href="#topic+pensionTable-class">pensionTable</a></code>'s
<code>invalids.retire</code> flag, which indicates whether
invalids retire like actives (i.e. same death
probabilities after retirement) or stay invalid until
death.</p>
</td></tr>
<tr><td><code id="periodTransitionProbabilities_+3A_as.data.frame">as.data.frame</code></td>
<td>
<p>Whether the return value should be a data.frame or an array containing transition matrices</p>
</td></tr>
</table>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>periodTransitionProbabilities(pensionTable)</code>: Return all transition probabilities of the pension table for the period Period
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>pensionTables.load("USA_PensionPlans")
# transitionProbabilities internally calls periodTransitionProbabilities
# if a Period is given:
transitionProbabilities(RP2014.male, Period = 1955)
periodTransitionProbabilities(RP2014.male, Period = 1955)
periodTransitionProbabilities(RP2014.male, Period = 2025)

</code></pre>

<hr>
<h2 id='plot.mortalityTable'>Plot multiple mortality tables (life tables) in one plot</h2><span id='topic+plot.mortalityTable'></span>

<h3>Description</h3>

<p><code>plot.mortalityTable</code> displays multiple life tables (objects of child
classes of <code>mortalityTable</code>) in one plot, with a legend showing the
names of the tables. If the argument <code>reference</code> not given, all
mortality rates are plotted on a log-linear scale for comparison. If the
argument <code>reference</code> is given and is a valid life table, then all
death probabilities are scaled by the given reference table and the y-axis
shows the death rates as percentage of the reference table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mortalityTable'
plot(x, ..., reference = NULL, trend = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.mortalityTable_+3A_x">x</code></td>
<td>
<p>First life table to be plotted. Must be a <code>mortalityTable</code>
object for the dispatcher to call this function</p>
</td></tr>
<tr><td><code id="plot.mortalityTable_+3A_...">...</code></td>
<td>
<p>Additional life tables to be plotted (<code>mortalityTable</code>
objects) as well as any of the following parameters (which are
passed on to <code><a href="#topic+plotMortalityTables">plotMortalityTables</a></code> or
<code><a href="#topic+plotMortalityTableComparisons">plotMortalityTableComparisons</a></code>):
</p>

<dl>
<dt><code>xlim,ylim</code></dt><dd><p>Axes limitatation (as a
two-element vectors)</p>
</dd>
<dt><code>xlab,ylab</code></dt><dd><p>Axes labels (default for
x-axis: &quot;Alter&quot;, default for y-axis:
&quot;Sterbewahrscheinlichkeit q_x&quot;)</p>
</dd>
<dt><code>title</code></dt><dd><p>The plot title</p>
</dd>
<dt><code>legend.position</code></dt><dd><p>The position of
the legend (default is <code>c(0.9,0.1)</code>)</p>
</dd>
<dt><code>legend.key.width</code></dt><dd><p>The keywith of the
lines in the  legend (default is
<code>unit(25,"mm")</code>)</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="plot.mortalityTable_+3A_reference">reference</code></td>
<td>
<p>The reference table that determines the 100% values.
If not given, the absolute mortality values are
compared and plotted on a log-linear scale.</p>
</td></tr>
<tr><td><code id="plot.mortalityTable_+3A_trend">trend</code></td>
<td>
<p>If set to <code>TRUE</code>, the function <code><a href="#topic+plotMortalityTrend">plotMortalityTrend</a></code>
is used to plot the trends of the given tables.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+plotMortalityTables">plotMortalityTables</a></code> and <code><a href="#topic+plotMortalityTableComparisons">plotMortalityTableComparisons</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load the Austrian census data
mortalityTables.load("Austria_Census")

# Plot some select census tables in a log-linear plot
plot(mort.AT.census.1869.male, mort.AT.census.1869.female,
     mort.AT.census.1971.male, mort.AT.census.1971.female,
     mort.AT.census.2011.male, mort.AT.census.2011.female,
     title="Austrian census tables",
     ylab=expression(q[x]), xlab="Age",
     xlim=c(0,90),
     legend.position=c(0.95,0.05))

# Compare some census tables with the mortality of 2011 Austrian males
plot(mort.AT.census.1869.male, mort.AT.census.1869.female,
     mort.AT.census.1971.male, mort.AT.census.1971.female,
     mort.AT.census.2011.male, mort.AT.census.2011.female,
     title="Austrian Census tables, relative to 2011 males",
     reference=mort.AT.census.2011.male)

</code></pre>

<hr>
<h2 id='plotMortalityTableComparisons'>Plot multiple mortality tables (life tables) in one plot, relative to a given reference table</h2><span id='topic+plotMortalityTableComparisons'></span>

<h3>Description</h3>

<p><code>plotMortalityTableComparisons</code> prints multiple life tables (objects of child classes of <code>mortalityTable</code>) in one plot and scales each by the given reference table, so that the relative mortality can be easily seen. A legend is added showing the names of the tables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotMortalityTableComparisons(
  data,
  ...,
  aes = NULL,
  ages = NULL,
  xlim = NULL,
  ylim = NULL,
  xlab = NULL,
  ylab = NULL,
  title = "",
  legend.position = c(0.9, 0.1),
  legend.justification = c(1, 0),
  legend.title = "Sterbetafel",
  legend.key.width = unit(25, "mm"),
  reference = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotMortalityTableComparisons_+3A_data">data</code></td>
<td>
<p>First life table to be plotted. Either a <code>data.frame</code> generated by <code>makeQxDataFrame</code> or a <code>mortalityTable</code> object</p>
</td></tr>
<tr><td><code id="plotMortalityTableComparisons_+3A_...">...</code></td>
<td>
<p>Additional life tables to be plotted (if <code>data</code> is a <code>mortalityTable</code> object)</p>
</td></tr>
<tr><td><code id="plotMortalityTableComparisons_+3A_aes">aes</code></td>
<td>
<p>Optional aesthetics to append or override the default. The default aesthetics will always be applied first and provide defaults for x, y and color. This argument can be used to override the defaults or append other aesthetics.</p>
</td></tr>
<tr><td><code id="plotMortalityTableComparisons_+3A_ages">ages</code></td>
<td>
<p>Plot only the given ages</p>
</td></tr>
<tr><td><code id="plotMortalityTableComparisons_+3A_xlim">xlim</code></td>
<td>
<p>X-axis limitatation (as a two-element vector)</p>
</td></tr>
<tr><td><code id="plotMortalityTableComparisons_+3A_ylim">ylim</code></td>
<td>
<p>Y-axis limitatation (as a two-element vector)</p>
</td></tr>
<tr><td><code id="plotMortalityTableComparisons_+3A_xlab">xlab</code></td>
<td>
<p>X-axis label (default: &quot;Alter&quot;)</p>
</td></tr>
<tr><td><code id="plotMortalityTableComparisons_+3A_ylab">ylab</code></td>
<td>
<p>Y-axis label (default: &quot;Sterbewahrscheinlichkeit q_x relativ zu ....&quot;)</p>
</td></tr>
<tr><td><code id="plotMortalityTableComparisons_+3A_title">title</code></td>
<td>
<p>The plot title</p>
</td></tr>
<tr><td><code id="plotMortalityTableComparisons_+3A_legend.position">legend.position</code></td>
<td>
<p>The position of the legend (default is <code>c(0.9,0.1)</code>)</p>
</td></tr>
<tr><td><code id="plotMortalityTableComparisons_+3A_legend.justification">legend.justification</code></td>
<td>
<p>The justification of the legend (default is <code>c(1,)</code>)</p>
</td></tr>
<tr><td><code id="plotMortalityTableComparisons_+3A_legend.title">legend.title</code></td>
<td>
<p>Title of the legend (<code>NULL</code> to hide)</p>
</td></tr>
<tr><td><code id="plotMortalityTableComparisons_+3A_legend.key.width">legend.key.width</code></td>
<td>
<p>The keywith of the lines in the  legend (default is <code>unit(25,"mm")</code>)</p>
</td></tr>
<tr><td><code id="plotMortalityTableComparisons_+3A_reference">reference</code></td>
<td>
<p>The reference table that determines the 100% values. If not given, the first argument of <code>data</code> is used as reference table.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Load the Austrian census data
mortalityTables.load("Austria_Census")

# Compare some census tables with the mortality of 2011 Austrian males
# plot with the reference argument is the same as calling plotMortalityTableComparisons
plot(mort.AT.census.1869.male, mort.AT.census.1869.female,
     mort.AT.census.1971.male, mort.AT.census.1971.female,
     mort.AT.census.2011.male, mort.AT.census.2011.female,
     title = "Austrian Census tables, relative to 1971 males",
     reference = mort.AT.census.1971.male)
plotMortalityTableComparisons(mort.AT.census.1869.male, mort.AT.census.1869.female,
     mort.AT.census.1971.male, mort.AT.census.1971.female,
     mort.AT.census.2011.male, mort.AT.census.2011.female,
     title = "Austrian Census tables, relative to 1971 males",
     reference = mort.AT.census.1971.male)

</code></pre>

<hr>
<h2 id='plotMortalityTables'>Plot multiple mortality tables (life tables) in one plot</h2><span id='topic+plotMortalityTables'></span>

<h3>Description</h3>

<p><code>plotMortalityTables</code> prints multiple life tables (objects of child classes of <code>mortalityTable</code>) in one log-linear plot, with a legend showing the names of the tables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotMortalityTables(
  data,
  ...,
  aes = NULL,
  ages = NULL,
  legend.title = "Sterbetafel",
  xlim = NULL,
  ylim = NULL,
  xlab = NULL,
  ylab = NULL,
  title = "",
  legend.position = c(0.9, 0.1),
  legend.justification = c(1, 0),
  legend.key.width = unit(25, "mm"),
  log = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotMortalityTables_+3A_data">data</code></td>
<td>
<p>First life table to be plotted. Either a <code>data.frame</code> generated by <code>makeQxDataFrame</code> or a <code>mortalityTable</code> object</p>
</td></tr>
<tr><td><code id="plotMortalityTables_+3A_...">...</code></td>
<td>
<p>Additional life tables to be plotted (if <code>data</code> is a <code>mortalityTable</code> object)</p>
</td></tr>
<tr><td><code id="plotMortalityTables_+3A_aes">aes</code></td>
<td>
<p>Optional aesthetics to append or override the default. The default aesthetics will always be applied first and provide defaults for x, y and color. This argument can be used to override the defaults or append other aesthetics.</p>
</td></tr>
<tr><td><code id="plotMortalityTables_+3A_ages">ages</code></td>
<td>
<p>Plot only the given ages</p>
</td></tr>
<tr><td><code id="plotMortalityTables_+3A_legend.title">legend.title</code></td>
<td>
<p>Title of the legend (<code>NULL</code> to hide)</p>
</td></tr>
<tr><td><code id="plotMortalityTables_+3A_xlim">xlim</code></td>
<td>
<p>X-axis limitatation (as a two-element vector)</p>
</td></tr>
<tr><td><code id="plotMortalityTables_+3A_ylim">ylim</code></td>
<td>
<p>Y-axis limitatation (as a two-element vector)</p>
</td></tr>
<tr><td><code id="plotMortalityTables_+3A_xlab">xlab</code></td>
<td>
<p>X-axis label (default: &quot;Alter&quot;)</p>
</td></tr>
<tr><td><code id="plotMortalityTables_+3A_ylab">ylab</code></td>
<td>
<p>Y-axis label (default: &quot;Sterbewahrscheinlichkeit q_x relativ zu ....&quot;)</p>
</td></tr>
<tr><td><code id="plotMortalityTables_+3A_title">title</code></td>
<td>
<p>The plot title</p>
</td></tr>
<tr><td><code id="plotMortalityTables_+3A_legend.position">legend.position</code></td>
<td>
<p>The position of the legend (default is <code>c(0.9,0.1)</code>)</p>
</td></tr>
<tr><td><code id="plotMortalityTables_+3A_legend.justification">legend.justification</code></td>
<td>
<p>The justification of the legend (default is <code>c(1,)</code>)</p>
</td></tr>
<tr><td><code id="plotMortalityTables_+3A_legend.key.width">legend.key.width</code></td>
<td>
<p>The keywith of the lines in the  legend (default is <code>unit(25,"mm")</code>)</p>
</td></tr>
<tr><td><code id="plotMortalityTables_+3A_log">log</code></td>
<td>
<p>Display y axes in logarithmic scale (default: TRUE)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Load the Austrian census data
mortalityTables.load("Austria_Annuities")
mortalityTables.load("Austria_Census")

# Plot some select census tables in a log-linear plot (plot called
# with mortalityTable objects is equla to calling plotMortalitytTables directly)
plot(mort.AT.census.1869.male, mort.AT.census.1869.female,
     mort.AT.census.1971.male, mort.AT.census.1971.female,
     mort.AT.census.2011.male, mort.AT.census.2011.female,
     title="Austrian census tables",
     ylab=expression(q[x]), xlab="Age",
     xlim=c(0,90),
     legend.position=c(0.95,0.05))

# To compare period or cohort life tables, use the YOB and Period arguments:
plot(AVOe2005R.male, AVOe2005R.female, AVOe1996R.male, AVOe1996R.female,
    Period = 2018, title = "Austrian Annuity Tables, Period 2018")
plot(AVOe2005R.male, AVOe2005R.female, AVOe1996R.male, AVOe1996R.female,
    YOB = 2000, title = "Austrian Annuity Tables for cohort YOB=2000")

</code></pre>

<hr>
<h2 id='plotMortalityTrend'>Plot the trends of multiple mortality tables (life tables) in one chart</h2><span id='topic+plotMortalityTrend'></span>

<h3>Description</h3>

<p><code>plotMortalityTrend</code> prints the trends of multiple life tables (objects
of child classes of <code>mortalityTable</code>) in one plot, with a legend showing
the names of the tables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotMortalityTrend(
  data,
  ...,
  aes = NULL,
  ages = NULL,
  xlim = NULL,
  ylim = NULL,
  xlab = NULL,
  ylab = NULL,
  title = "",
  legend.position = c(0.9, 0.9),
  legend.justification = c(1, 1),
  legend.title = "Sterbetafel",
  legend.key.width = unit(25, "mm")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotMortalityTrend_+3A_data">data</code></td>
<td>
<p>First life table to be plotted. Either a <code>data.frame</code> generated by <code>makeQxDataFrame</code> or a <code>mortalityTable</code> object</p>
</td></tr>
<tr><td><code id="plotMortalityTrend_+3A_...">...</code></td>
<td>
<p>Additional life tables to be plotted (if <code>data</code> is a <code>mortalityTable</code> object)</p>
</td></tr>
<tr><td><code id="plotMortalityTrend_+3A_aes">aes</code></td>
<td>
<p>Optional aesthetics to append or override the default. The default aesthetics will always be applied first and provide defaults for x, y and color. This argument can be used to override the defaults or append other aesthetics.</p>
</td></tr>
<tr><td><code id="plotMortalityTrend_+3A_ages">ages</code></td>
<td>
<p>Plot only the given ages</p>
</td></tr>
<tr><td><code id="plotMortalityTrend_+3A_xlim">xlim</code></td>
<td>
<p>X-axis limitatation (as a two-element vector)</p>
</td></tr>
<tr><td><code id="plotMortalityTrend_+3A_ylim">ylim</code></td>
<td>
<p>Y-axis limitatation (as a two-element vector)</p>
</td></tr>
<tr><td><code id="plotMortalityTrend_+3A_xlab">xlab</code></td>
<td>
<p>X-axis label (default: &quot;Alter&quot;)</p>
</td></tr>
<tr><td><code id="plotMortalityTrend_+3A_ylab">ylab</code></td>
<td>
<p>Y-axis label (default: &quot;Sterbewahrscheinlichkeit q_x relativ zu ....&quot;)</p>
</td></tr>
<tr><td><code id="plotMortalityTrend_+3A_title">title</code></td>
<td>
<p>The plot title</p>
</td></tr>
<tr><td><code id="plotMortalityTrend_+3A_legend.position">legend.position</code></td>
<td>
<p>The position of the legend (default is <code>c(0.9,0.1)</code>)</p>
</td></tr>
<tr><td><code id="plotMortalityTrend_+3A_legend.justification">legend.justification</code></td>
<td>
<p>The justification of the legend (default is <code>c(1,)</code>)</p>
</td></tr>
<tr><td><code id="plotMortalityTrend_+3A_legend.title">legend.title</code></td>
<td>
<p>Title of the legend (<code>NULL</code> to hide)</p>
</td></tr>
<tr><td><code id="plotMortalityTrend_+3A_legend.key.width">legend.key.width</code></td>
<td>
<p>The keywith of the lines in the  legend (default is <code>unit(25,"mm")</code>)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Load the Austrian aunnity data
mortalityTables.load("Austria_Annuities")

# Compare the trends of these tables
plotMortalityTrend(AVOe2005R.male, AVOe2005R.female, AVOe1996R.male, AVOe1996R.female,
    Period = 2002, title = "Trends of Austrian Annuity Tables")
# For tables with a non-constant trend, the Period and YOB can be used to compare
# the age-specific trends that apply to the death probabilities during a given
# period or for a given birth year
plotMortalityTrend(AVOe2005R.male, AVOe2005R.female, AVOe1996R.male, AVOe1996R.female,
    YOB = 1950, title = "Trends of Austrian Annuity Tables for cohort YOB=1950")
plotMortalityTrend(AVOe2005R.male, AVOe2005R.female, AVOe1996R.male, AVOe1996R.female,
    YOB = 2000, title = "Trends of Austrian Annuity Tables for cohort YOB=2000")
plotMortalityTrend(AVOe2005R.male, AVOe2005R.female, AVOe1996R.male, AVOe1996R.female,
   Period = 1999, title = "Trends of Austrian Annuity Tables for Period 2002")
plotMortalityTrend(AVOe2005R.male, AVOe2005R.female, AVOe1996R.male, AVOe1996R.female,
   Period = 2030, title = "Trends of Austrian Annuity Tables for Period 2030")
#' @import scales
</code></pre>

<hr>
<h2 id='PopulationData.AT2017'>Austrian population count (exposure) and deaths in 2017</h2><span id='topic+PopulationData.AT2017'></span>

<h3>Description</h3>

<p>This data.frame hold the official population counts (in terms of exposure)
as well as the death counts for Austria during the calendar year 2017.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(PopulationData.AT2017)
</code></pre>


<h3>Format</h3>

<p>A data frame holding female, male and total exposures as well as death
counts, indexed by age.
</p>


<h3>Details</h3>

<p>The data was downloaded from <a href="https://www.mortality.org/">https://www.mortality.org/</a>, where is was
submitted by Statistik Austria.
</p>


<h3>Source</h3>

<p><a href="https://www.mortality.org/">https://www.mortality.org/</a>, <a href="https://www.statistik.at/">https://www.statistik.at/</a>
</p>

<hr>
<h2 id='pT.calculateTotalMortality'>Calculate the total mortality of the pension table</h2><span id='topic+pT.calculateTotalMortality'></span><span id='topic+pT.recalculateTotalMortality'></span>

<h3>Description</h3>

<p>The function <code>pT.calculateTotalMortality</code> calculates the overall mortality from the mortality of actives and disabled
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pT.calculateTotalMortality(object, ...)

pT.recalculateTotalMortality(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pT.calculateTotalMortality_+3A_object">object</code></td>
<td>
<p>a <code>pensionTable</code> object</p>
</td></tr>
<tr><td><code id="pT.calculateTotalMortality_+3A_...">...</code></td>
<td>
<p>(unused)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Since a pension tables describes mortalities of actives and of disabled separately,
the overall mortality is a function of these two. The function <code>pT.calculateTortalMortality</code>
calculates this overall mortality in a way that is consistent with the
individual transition probabilities of the pension table.
</p>
<p>In particular, the pension table describes the mortalities of the individual
sub-populations of actives, disabled and old-age pensioners. The overall
mortality is the mortality that results when one discards the additional information
about the state and just observes deaths. Internally, the overall mortality
is calculated by starting from 10,000 actives and applying the transition dynamics
of the pension table to the sub-populations.
</p>
<p>For a detailled description, see e.g. the documentation of the Austrian pension
table AVÖ 2018-P or the German Heubeck Table DAV 2005-G.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>pT.recalculateTotalMortality()</code>: Calculate the total mortality of a
pension table and assign it to the <code>qgx</code> slot of that table.
</p>
</li></ul>


<h3>References</h3>

<p>R. Kainhofer, J. Hirz, A. Schubert. AVÖ 2018-P: Rechnungsgrundlagen für die Pensionsversicherung. Dokumentation der Pensionstafel. AVÖ-Arbeitskreis Rechnungsgrundlagen, 2008. <a href="https://avoe.at/rechnungsgrundlagen/pensionskassen/">https://avoe.at/rechnungsgrundlagen/pensionskassen/</a>
</p>

<hr>
<h2 id='pT.getSubTable'>Extract a sub-table from a pensionTable</h2><span id='topic+pT.getSubTable'></span>

<h3>Description</h3>

<p>This function <code>pT.getSubTable</code> allows access to the individual components
of a pension table. In contrast to a &quot;normal&quot; mortalityTable, which describes
probablilities for only mortality or a single population, a pension table
describes transition probabilities for other states, too:
</p>

<ul>
<li><p> active population (i.e. not disabled, not retired)
</p>
</li>
<li><p> disabled population (occupational disability)
</p>
</li>
<li><p> old-age pensioners
</p>
</li>
<li><p> widows/widowers
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>pT.getSubTable(table, subtable = "qx")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pT.getSubTable_+3A_table">table</code></td>
<td>
<p>a <code>pensionTable</code> object</p>
</td></tr>
<tr><td><code id="pT.getSubTable_+3A_subtable">subtable</code></td>
<td>
<p>the key describing the desired subtable (see above for the full list)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The corresponding transition probabilities are:
</p>

<dl>
<dt>qx</dt><dd><p>mortality $q^a_x$ of actives (probability of death)</p>
</dd>
<dt>ix</dt><dd><p>morbidity $i_x$ of actives (probability occupational disability)</p>
</dd>
<dt>qix</dt><dd><p>mortality $q^i_x$ of disabled (probability of death)</p>
</dd>
<dt>rx</dt><dd><p>reactivation $r_x$ of invalids (probability of becoming active again)</p>
</dd>
<dt>qpx</dt><dd><p>mortality $q^p_x$ of old-age pensioners</p>
</dd>
<dt>qgx</dt><dd><p>mortality $q^g_x$ of the whole population (including actives and disabled)</p>
</dd>
<dt>hx</dt><dd><p>probability $h_x$ of leaving a widow/widower when dying at age $x$</p>
</dd>
<dt>yx</dt><dd><p>average age $y(x)$ of surviving widow/widower when dying at age $x$</p>
</dd>
<dt>qwx</dt><dd><p>mortality $q^w_x$ of widows</p>
</dd>
</dl>

<p>The function <code>pT.getSubTable</code> extracts a single transition probability
from the pension table, using the keys given above. The returned object is
also a <code>mortalityTable</code> object.
</p>

<hr>
<h2 id='pT.setDimInfo'>Set additional information (year, description, type of risk, sex, etc.) for the pension table.</h2><span id='topic+pT.setDimInfo'></span>

<h3>Description</h3>

<p>A mortalityTable can store additional information to be used e.g. as additional
dimensions in ggplot calls. Typically, these information include sex, base
population, observation year, type of data (raw, smoothed), country, type of
risk, etc. These additional dimensions are stored in the <code>tbl@data</code> list
and will be used by plotMortalityTables and similar functions.
<code>pT.setDimInfo</code> works just like <code>mT.setDimInfo</code>, except that it sets
the information for all sub-tables of the pension table at the same time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pT.setDimInfo(tbl, ..., append = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pT.setDimInfo_+3A_tbl">tbl</code></td>
<td>
<p>The <code>pensionTable</code> object to assign dimensional information</p>
</td></tr>
<tr><td><code id="pT.setDimInfo_+3A_...">...</code></td>
<td>
<p>The dimensional information as named arguments. All names except tbl and append are allowed.</p>
</td></tr>
<tr><td><code id="pT.setDimInfo_+3A_append">append</code></td>
<td>
<p>Whether to append to existing dimensional data (append=TRUE) or
completely replace existing information (append=FALSE)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># For examples, please see the \code{mT.setDimInfo} function.
</code></pre>

<hr>
<h2 id='setLoading'>Return a copy of the table with an additional loading added</h2><span id='topic+setLoading'></span><span id='topic+setLoading+2CmortalityTable-method'></span>

<h3>Description</h3>

<p>Return a copy of the table with an additional loading added
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setLoading(object, loading = 0)

## S4 method for signature 'mortalityTable'
setLoading(object, loading = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setLoading_+3A_object">object</code></td>
<td>
<p>A life table object (instance of a <code>mortalityTable</code> class)</p>
</td></tr>
<tr><td><code id="setLoading_+3A_loading">loading</code></td>
<td>
<p>The additional (security) loading to be added to the table.</p>
</td></tr>
</table>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>setLoading(mortalityTable)</code>: Return the life table with the given loading set
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Census")
# Austrian census mortality 2011 reduced by 30%
setLoading(mort.AT.census.2011.male, loading = -0.3)

</code></pre>

<hr>
<h2 id='setModification'>Return a copy of the table with the given modification function added</h2><span id='topic+setModification'></span><span id='topic+setModification+2CmortalityTable-method'></span>

<h3>Description</h3>

<p>Return a copy of the table with the given modification function added
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setModification(object, modification = 0)

## S4 method for signature 'mortalityTable'
setModification(object, modification = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setModification_+3A_object">object</code></td>
<td>
<p>A life table object (instance of a <code>mortalityTable</code> class)</p>
</td></tr>
<tr><td><code id="setModification_+3A_modification">modification</code></td>
<td>
<p>The postprocessing modification function (for example, so enforce a lower bound).</p>
</td></tr>
</table>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>setModification(mortalityTable)</code>: Return the life table with the given modification set
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Census")
# Austrian census mortality 2011, with a lower floor of 0.1% death probability
at11.mod1perm = setModification(mort.AT.census.2011.male,
    modification = function(qx) {pmax(qx, 0.001)})
at11.mod1perm@name = paste(at11.mod1perm@name, "at least 0.1%")
# Austrian census mortality 2011, modified with 40% selection for ages
# below 60, vanishing linearly to age 80
at11.modSelection = setModification(mort.AT.census.2011.male,
    modification = function(qx) {
        qx * c(rep(0.6, 60), 0.6 + 0.4 * (0:20)/20, rep(1, length(qx)-81))
    })
at11.modSelection@name = paste(at11.modSelection@name, " 40% selection below 60")

plot(mort.AT.census.2011.male, at11.mod1perm, at11.modSelection,
    title = "Austrian census mortality with modifications", legend.position = c(0.99, 0.01))


</code></pre>

<hr>
<h2 id='transitionProbabilities'>Return all transition probabilities of the pension table (generational probabilities)</h2><span id='topic+transitionProbabilities'></span><span id='topic+transitionProbabilities+2CpensionTable-method'></span>

<h3>Description</h3>

<p>Return all transition probabilities of the pension table (generational probabilities)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transitionProbabilities(object, ...)

## S4 method for signature 'pensionTable'
transitionProbabilities(
  object,
  YOB = 1982,
  ...,
  ages = NULL,
  OverallMortality = FALSE,
  Period = NULL,
  retirement = NULL,
  invalids.retire = object@invalids.retire,
  as.data.frame = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="transitionProbabilities_+3A_object">object</code></td>
<td>
<p>A pension table object (instance of a <code><a href="#topic+pensionTable-class">pensionTable</a></code> class)</p>
</td></tr>
<tr><td><code id="transitionProbabilities_+3A_...">...</code></td>
<td>
<p>Currently unused</p>
</td></tr>
<tr><td><code id="transitionProbabilities_+3A_yob">YOB</code></td>
<td>
<p>Year of birth</p>
</td></tr>
<tr><td><code id="transitionProbabilities_+3A_ages">ages</code></td>
<td>
<p>Desired age range (if NULL, the probabilities of the age range provided by the table will be returned), missing ages will be filled with NA</p>
</td></tr>
<tr><td><code id="transitionProbabilities_+3A_overallmortality">OverallMortality</code></td>
<td>
<p>Whether the overall mortality should be returned for actives, or the active mortality</p>
</td></tr>
<tr><td><code id="transitionProbabilities_+3A_period">Period</code></td>
<td>
<p>Observation year to calculate period transition probabilities.
If given, this arguments overrides the <code>YOB</code> parameter
and this function returns period transition probabilities.
If this argument is not given or is null, then this function
returns generational transition probabilities.</p>
</td></tr>
<tr><td><code id="transitionProbabilities_+3A_retirement">retirement</code></td>
<td>
<p>Override the retirement transition probabilities of the
pension table. Possible values are:</p>

<ul>
<li><p> Single age (describing a deterministric retirement at the given age)
</p>
</li>
<li><p> mortalityTable object: transition probabilities for retirement
</p>
</li></ul>
</td></tr>
<tr><td><code id="transitionProbabilities_+3A_invalids.retire">invalids.retire</code></td>
<td>
<p>Override the <code><a href="#topic+pensionTable-class">pensionTable</a></code>'s
<code>invalids.retire</code> flag, which indicates whether
invalids retire like actives (i.e. same death
probabilities after retirement) or stay invalid until
death.</p>
</td></tr>
<tr><td><code id="transitionProbabilities_+3A_as.data.frame">as.data.frame</code></td>
<td>
<p>Whether the return value should be a data.frame or an
array containing transition matrices</p>
</td></tr>
</table>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>transitionProbabilities(pensionTable)</code>: Return all transition probabilities of the pension table for the generation YOB
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>pensionTables.load("USA_PensionPlans")
transitionProbabilities(RP2014.male, YOB = 1962)
transitionProbabilities(RP2014.male, Period = 1955)
transitionProbabilities(RP2014.male, Period = 2025)

</code></pre>

<hr>
<h2 id='undampenTrend'>Return a <code>mortalityTable.trendProjection</code> object with the trend damping removed.</h2><span id='topic+undampenTrend'></span><span id='topic+undampenTrend+2CmortalityTable.trendProjection-method'></span>

<h3>Description</h3>

<p>Return a <code>mortalityTable.trendProjection</code> object with the trend damping removed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>undampenTrend(object)

## S4 method for signature 'mortalityTable.trendProjection'
undampenTrend(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="undampenTrend_+3A_object">object</code></td>
<td>
<p>The life table object (class inherited from mortalityTable)</p>
</td></tr>
</table>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>undampenTrend(mortalityTable.trendProjection)</code>: Return a <code>mortalityTable.trendProjection</code>
object with the trend damping removed.
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>mortalityTables.load("Austria_Annuities")
AVOe2005R.male.undamped = undampenTrend(AVOe2005R.male)
AVOe2005R.male.undamped@name = paste(AVOe2005R.male.undamped@name, "no trend dampening")

plot(AVOe2005R.male, AVOe2005R.male.undamped,
    title = "AVOe 2005R with trend dampening and without", YOB = 2000)

</code></pre>

<hr>
<h2 id='whittaker.mortalityTable'>Smooth a life table using the Whittaker-Henderson method, intepolation possibly missing values</h2><span id='topic+whittaker.mortalityTable'></span>

<h3>Description</h3>

<p><code>whittaker.mortalityTable</code> uses the Whittaker-Henderson graduation method
to smooth a table of raw observed death probabilities, optionally using the
exposures stored in the table as weights (if no exposures are given, equal
weights are applied). The weights (either explicitly given, implicitly taken
from the exposures or implicit equal weights) will be normalized to sum 1.
The parameter lambda indicates the importance of smootheness. A lower value of lambda
will put more emphasis on reproducing the observation as good as possible at the cost of
less smoothness. In turn, a higher value of lambda will force the smoothed result to be
as smooth as possible with possibly larger deviation from the input data.
All ages with a death probability of <code>NA</code> will be
interpolated in the Whittaker-Henderson method (see e.g. Lowrie)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>whittaker.mortalityTable(
  table,
  lambda = 10,
  d = 2,
  name.postfix = ", smoothed",
  ...,
  weights = NULL,
  log = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="whittaker.mortalityTable_+3A_table">table</code></td>
<td>
<p>Mortality table to be graduated. Must be an instance of a
<code>mortalityTable</code>-derived class.</p>
</td></tr>
<tr><td><code id="whittaker.mortalityTable_+3A_lambda">lambda</code></td>
<td>
<p>Smoothing parameter (default 10)</p>
</td></tr>
<tr><td><code id="whittaker.mortalityTable_+3A_d">d</code></td>
<td>
<p>order of differences (default 2)</p>
</td></tr>
<tr><td><code id="whittaker.mortalityTable_+3A_name.postfix">name.postfix</code></td>
<td>
<p>Postfix appended to the name of the graduated table</p>
</td></tr>
<tr><td><code id="whittaker.mortalityTable_+3A_...">...</code></td>
<td>
<p>additional arguments (currently unused)</p>
</td></tr>
<tr><td><code id="whittaker.mortalityTable_+3A_weights">weights</code></td>
<td>
<p>Vector of weights used for graduation. Entries with weight 0
will be interpolated. If not given, the exposures of the table
or equal weights are used. Weight 0 for a certain age indicates
that the observation will not be used for smoothing at all,
and will rather be interpolated from the smoothing of all other values.</p>
</td></tr>
<tr><td><code id="whittaker.mortalityTable_+3A_log">log</code></td>
<td>
<p>Whether the smoothing should be applied to the logarithms of the
table values or the values itself</p>
</td></tr>
</table>


<h3>References</h3>

<p>Walter B. Lowrie: An Extension of the Whittaker-Henderson Method of Graduation, Transactions of Society of Actuaries, 1982, Vol. 34, pp. 329&ndash;372
</p>


<h3>See Also</h3>

<p><code><a href="pracma.html#topic+whittaker">whittaker</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># A sample observation table with exposures and raw probabilities
obsTable = mortalityTable.period(
    name = "trivial observed table",
    ages = 0:15,
    deathProbs = c(
        0.0072, 0.00212, 0.00081, 0.0005, 0.0013,
        0.001, 0.00122, 0.00142, 0.007, 0.0043,
        0.0058, 0.0067, 0.0082, 0.0091, 0.0075, 0.01),
    exposures = c(
        150, 222, 350, 362, 542,
        682, 1022, 1053, 1103, 1037,
        968, 736, 822, 701, 653, 438))

# Effect of the different parameters
obsTable.smooth = whittaker.mortalityTable(obsTable,
    lambda = 1/10, d = 2, name.postfix = " smoothed (d=2, lambda=1/10)")
obsTable.smooth1 = whittaker.mortalityTable(obsTable,
    lambda = 1, d = 2, name.postfix = " smoothed (d=2, lambda=1)")
obsTable.smooth2 = whittaker.mortalityTable(obsTable,
    lambda = 1/10, d = 3, name.postfix = " smoothed (d=3, lambda=1/10)")
plot(obsTable, obsTable.smooth, obsTable.smooth1, obsTable.smooth2,
    title = "Observed death probabilities")

# Missing values are interpolated from the Whittaker Henderson
obsTable.missing = obsTable
obsTable.missing@deathProbs[c(6,10,11,12)] = NA_real_
obsTable.interpolated = whittaker.mortalityTable(obsTable,
    lambda = 1/10, d = 2, name.postfix = " missing values interpolated")
plot(obsTable.missing, obsTable.interpolated,
    title = "Missing values are automatically interpolated") + geom_point(size = 3)


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
