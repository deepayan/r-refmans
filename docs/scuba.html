<!DOCTYPE html><html><head><title>Help for package scuba</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {scuba}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#scuba-package'><p>The Scuba Package</p></a></li>
<li><a href='#air'><p>Air</p></a></li>
<li><a href='#ascent'><p>Ascent Rate or Time</p></a></li>
<li><a href='#baron'>
<p>Real Scuba Dive Profile</p></a></li>
<li><a href='#bestdoubledive'>
<p>Find the Best Double Dive To Given Depths</p></a></li>
<li><a href='#Bookspan'><p>Tissue data from Bookspan's book</p></a></li>
<li><a href='#BuehlmannL16A'><p>Decompression model ZH-L16A</p></a></li>
<li><a href='#chop.dive'><p>Extract Part of a Dive Profile</p></a></li>
<li><a href='#deco.ceiling'>
<p>Decompression Ceiling for a Diver</p></a></li>
<li><a href='#deepmine'>
<p>Extremely Deep Decompression Dive</p></a></li>
<li><a href='#depths.dive'><p>Depths at each waypoint of a dive</p></a></li>
<li><a href='#descent'><p>Descent Rate or Time</p></a></li>
<li><a href='#dive'><p>Define a Dive Profile</p></a></li>
<li><a href='#durations.dive'><p>Durations of time between each waypoint of a dive</p></a></li>
<li><a href='#ead'><p>Equivalent Air Depth</p></a></li>
<li><a href='#END'><p>Equivalent Air Depth</p></a></li>
<li><a href='#haldane'><p>Tissue Saturation by Haldane Model</p></a></li>
<li><a href='#hm'><p>Haldane Type Model</p></a></li>
<li><a href='#is.nitrox'><p>Recognise a Nitrox Gas</p></a></li>
<li><a href='#maxmix'><p>Optimal Nitrox Mixture For Given Depth</p></a></li>
<li><a href='#Mmix'>
<p>Compute M-values for a Mixture of Inert Gases</p></a></li>
<li><a href='#mod'><p>Maximum Operating Depth</p></a></li>
<li><a href='#ndl'><p>No-Decompression Limit</p></a></li>
<li><a href='#nitrox'><p>Nitrox Mixture</p></a></li>
<li><a href='#oxtox'><p>Pulmonary Oxygen Toxicity</p></a></li>
<li><a href='#param'><p>Extract parameters from Haldane model</p></a></li>
<li><a href='#pedro'>
<p>Real Scuba Dive Profiles</p></a></li>
<li><a href='#pickmodel'><p>Standard Decompression Models</p></a></li>
<li><a href='#plot.dive'><p>Plot a Dive Profile</p></a></li>
<li><a href='#ppO2'><p>Oxygen Partial Pressures</p></a></li>
<li><a href='#print.dive'><p>Print a Dive Profile</p></a></li>
<li><a href='#saturated.state'><p>Saturated Tissue State</p></a></li>
<li><a href='#scuba-internal'><p>Internal scuba functions</p></a></li>
<li><a href='#scuba.constants'><p>Constants for Use in Scuba Package</p></a></li>
<li><a href='#scuba.disclaimer'>
<p>Disclaimer for Scuba Library</p></a></li>
<li><a href='#showstates'><p>Interactive Display of Diver Saturation</p></a></li>
<li><a href='#tanklist'><p>Extract or Change the Breathing Gas Tanks in a Dive</p></a></li>
<li><a href='#times.dive'><p>Elapsed times at each waypoint of a dive</p></a></li>
<li><a href='#trimix'><p>Trimix Gas</p></a></li>
<li><a href='#whichtank'><p>Which Tanks are Used during a Dive</p></a></li>
<li><a href='#Workman65'><p>Decompression model of Workman 1965</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>1.11-1</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-10-18</td>
</tr>
<tr>
<td>Title:</td>
<td>Diving Calculations and Decompression Models</td>
</tr>
<tr>
<td>Author:</td>
<td>Adrian Baddeley [aut, cre],
  Vittorio Broglio [ctb, dtc],
  Pedro Antonio Neves [ctb, dtc],
  Andrew Bassom [ctb],
  Peter Buzzacott [ctb],
  Aren Leishman [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Adrian Baddeley &lt;Adrian.Baddeley@curtin.edu.au&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>utils, graphics, stats</td>
</tr>
<tr>
<td>Description:</td>
<td>Code for describing and manipulating scuba diving profiles 
	(depth-time curves) and decompression models, 
        for calculating the predictions of decompression models,
	for calculating maximum no-decompression time and decompression tables,
	and for performing mixed gas calculations. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-10-18 09:59:43 UTC; adrian</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-10-18 10:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='scuba-package'>The Scuba Package</h2><span id='topic+scuba-package'></span><span id='topic+scuba'></span>

<h3>Description</h3>

<p>This is a summary of the features of 
<code>scuba</code>, a package in <code>R</code>
that performs theoretical calculations
about scuba diving &mdash; dive profiles,
decompression models, gas toxicity and so on.
</p>


<h3>Details</h3>

<p><code>scuba</code> is a package for performing
calculations in the theory of scuba diving.
The package supports
</p>

<ul>
<li><p> creation, manipulation and plotting of dive profiles
</p>
</li>
<li><p> gas diffusion models 
</p>
</li>
<li><p> decompression calculations
</p>
</li>
<li><p> gas toxicity calculations.
</p>
</li></ul>

<p>The <code>scuba</code> package is intended only
for use in research and education about the mathematical
and statistical basis of decompression theory. It is emphatically
not designed for actual use in scuba diving and related activities.
See the detailed disclaimer in <code><a href="#topic+scuba.disclaimer">scuba.disclaimer</a></code>.
</p>
<p>Following is a summary of the main features of the package.
For a more detailed explanation, with illustrations, see
the vignette <em>Introduction to the Scuba package</em> which
accompanies the package. 
</p>


<h3>Dive profiles</h3>

<p>A <em>dive profile</em> gives the diver's depth as a function of elapsed
time during a scuba dive. The command <code><a href="#topic+dive">dive</a></code> creates an
object representing a dive profile.
</p>
<p>A dive profile is piecewise linear: it is a series of <em>stages</em>
that join successive <em>waypoints</em>. Each waypoint is specified
by the depth and elapsed time when it is reached. The stage between
two waypoints is either a sojourn at a fixed depth, or an ascent or
descent at a constant rate.
</p>
<p>The function <code><a href="#topic+dive">dive</a></code> interprets its arguments
as a sequence of actions or events occurring during the dive.
If an argument is a vector of length 2, it is interpreted
as <code>c(depth,time)</code> specifying the depth and duration
of a stage of the dive. If the argument is a single number,
it is interpreted as a depth, meaning that the diver ascends or
descends to this depth.
</p>
<p>For example, the command
<code>d &lt;- dive(c(18, 45))</code> specifies a dive to 18 metres
for 45 minutes. The command <code>d &lt;- dive(c(18, 45), c(5,3))</code>
specifies a dive to 18 metres for 45 minutes followed by a safety stop
at 5 metres for 3 minutes. Multilevel dives with any number of stages
are specified in the same way. A dive object may include
periods spent at the surface (depth zero) and may therefore represent
a succession of dives separated by surface intervals. For example,
<code>d &lt;- dive(c(30,15),c(9,1),c(5,5),c(0,60),c(12,60),c(5,5))</code>
represents two dives (with safety stops)
separated by a one-hour surface interval.
</p>
<p>The resulting object <code>d</code> is an object of class <code>"dive"</code>.
It can be plotted as a conventional dive profile graph by executing
the command <code>plot(d)</code>. It can be printed as a table of depths and times
by typing its name <code>d</code>, or by executing
<code>print(d,seconds=FALSE)</code> to print times to the nearest minute.
A summary of the dive (with such information as the average depth,
maximum depth and the main stages of the dive) can be printed
by typing <code>summary(d)</code>.
</p>
<p>By default, the function <code><a href="#topic+dive">dive</a></code> fills in some details
about the dive. It assumes that the diver breathes compressed air;
the dive starts and ends at the surface
(depth zero); the diver descends 
at the default descent rate of 30 metres per minute; and the diver
ascends at the default ascent rate of 18 metres per minute.
These defaults can be changed by giving extra arguments to the
function <code><a href="#topic+dive">dive</a></code>.
</p>
<p>Dive profiles can also be modified after they are created: see below.
</p>


<h3>Real Dive Profiles</h3>

<p>Dive profiles may also be uploaded from your dive computer
and studied in the <span class="pkg">scuba</span> package. First convert the
uploaded profile data to a <code>data.frame</code> with two columns,
the first column containing the elapsed time and the second column
containing the depth (in metres) recorded at each time. The elapsed
times can be either a vector of character strings
in minutes-and-seconds format
<code>mm:ss</code> or hours-minutes seconds <code>hh:mm:ss</code>,
or a vector of integer times measured in <em>seconds</em>
of elapsed time, or an object of class <code><a href="base.html#topic+difftime">difftime</a></code>
containing the elapsed times in any time unit. Then pass this data
frame as an argument to the function <code><a href="#topic+dive">dive</a></code>.
</p>
<p>An example of such a data frame, uploaded from a dive computer,
is provided in the <code><a href="#topic+baron">baron</a></code> dataset supplied with the
package. See the help file for
<code><a href="#topic+baron">baron</a></code> for an example of how to convert a data frame
to a <code>"dive"</code> object.
</p>
<p>The package also provides 12 real dive profiles that have already been
converted to <code>"dive"</code> objects.
See the help files for <code><a href="#topic+pedro">pedro</a></code> and <code><a href="#topic+deepmine">deepmine</a></code>.
</p>


<h3>Decompression Calculations</h3>

<p>The <span class="pkg">scuba</span> package performs the mathematical calculations of
decompression theory:
</p>

<ul>
<li><p> the theoretical No Decompression Limit (maximum duration of a
no-decompression dive to a specified depth) can be computed by
<code><a href="#topic+ndl">ndl</a>(depth)</code>
</p>
</li>
<li><p> the quantity of nitrogen dissolved in the diver's body
after a dive <code>d</code> can be computed by <code><a href="#topic+haldane">haldane</a>(d)</code>
</p>
</li>
<li><p> the quantity of nitrogen dissolved in the diver's body
at each instant <b>during</b> a dive <code>d</code> can be computed by
<code><a href="#topic+haldane">haldane</a>(d, progressive=TRUE)</code>
or plotted interactively by <code><a href="#topic+showstates">showstates</a>(d)</code>.
</p>
</li></ul>

<p>These calculations are based on the classical theory of
decompression originated by Haldane (Boycott et al, 1908).
The diver's body is idealised
as a set of independent compartments, each connected directly to the
breathing gas, and governed by classical (exponential) diffusion.
</p>
<p>The model parameters (the number of compartments, their diffusion
rates, and the maximum tolerated nitrogen tension in each compartment)
may be chosen by the user.
By default, the model parameters are taken from the DSAT model
which is the basis of the PADI Recreational Dive Planner.
Alternatively, the user can choose from a variety of standard compartment
models using the command <code><a href="#topic+pickmodel">pickmodel</a></code>, or
construct a new model using <code><a href="#topic+hm">hm</a></code>.
</p>
<p>No-decompression limits (the maximum duration of a no-decompression
dive to a given depth) can be calculated using the function
<code><a href="#topic+ndl">ndl</a></code>. For example <code>ndl(30)</code> gives the 
theoretical NDL for a dive to 30 metres,
predicted by the DSAT model. To use the classical US Navy model instead,
type <code>ndl(30, model="USN")</code> or <code>ndl(30, model=pickmodel("USN"))</code>.
</p>
<p>The &lsquo;best&rsquo;
double no-decompression dive to given depths <code>d1</code> and <code>d2</code>
can be calculated by <code><a href="#topic+bestdoubledive">bestdoubledive</a></code> according to
the algorithm of Baddeley and Bassom (2012).
</p>
<p>The nitrogen tension (the quantity of dissolved nitrogen,
in atmospheres absolute) in the diver's body after 
a dive, can be calculated using the function
<code><a href="#topic+haldane">haldane</a></code>. If <code>d</code> is a dive object
then <code>haldane(d)</code> returns a data frame containing the
nitrogen tissue tensions (ata) at the end of the dive,
in each of the 8 tissue compartments
of the DSAT model. 
To use the US Navy model instead,
type <code>haldane(d, "USN")</code> or <code>haldane(d, pickmodel("USN"))</code>.
</p>
<p>To compute the nitrogen tissue tensions at each waypoint during the
dive, use <code><a href="#topic+haldane">haldane</a>(d, progressive=TRUE)</code>.
</p>
<p>To visualise the nitrogen tissue tensions during the dive,
use the interactive function <code><a href="#topic+showstates">showstates</a></code>.
This plots the dive and waits for you to click on
a position in the graph. The tissue tensions at that
instant are displayed as a bar plot.
</p>
<p>The total oxygen toxicity incurred during a dive can be computed
by <code><a href="#topic+oxtox">oxtox</a></code>.
</p>
<p>Oxygen partial pressure at each stage of a dive is computed
by <code><a href="#topic+ppO2">ppO2</a></code>.
</p>
<p>Bubble theory calculations are not yet implemented.
</p>


<h3>Nitrox and trimix</h3>

<p>A <b>breathing gas</b> is represented by an object of class <code>"gas"</code>.
The object <code>air</code> is a representation of compressed air
(21% oxygen, 79% nitrogen) as an object of this class.
(Don't reassign another value to this object!!!)
</p>
<p>Nitrox mixtures (mixtures of oxygen and nitrogen) can be
represented using the function <code><a href="#topic+nitrox">nitrox</a></code>.
For example, EAN 32 is represented by <code>nitrox(0.32)</code>.
</p>
<p>Trimix (a mixture of oxygen, nitrogen and helium) can also be
represented, using the command <code><a href="#topic+trimix">trimix</a></code>.
For example, Trimix 15/50
(containing 15% oxygen, 50% helium and 35% nitrogen)
is represented by <code>trimix(0.15, 0.5)</code>.
</p>
<p>There are methods for <code>print</code> and <code>summary</code>
for gas objects.
</p>
<p>Decompression calculations (<code><a href="#topic+haldane">haldane</a></code>,
<code><a href="#topic+ndl">ndl</a></code>, <code><a href="#topic+showstates">showstates</a></code>)
also work with nitrox and trimix.
</p>
<p>Decompression calculations with trimix require a Haldane model
that includes parameters for Helium diffusion.
Use <code>pickmodel("Z")</code> to select the Buehlmann ZH-L16A model,
or <code><a href="#topic+hm">hm</a></code> to create a new model that includes
Helium diffusion.
</p>
<p>Standard nitrox calculations are also available, for example
</p>

<table>
<tr>
 <td style="text-align: left;">
    <code><a href="#topic+ead">ead</a></code> </td><td style="text-align: left;">
    equivalent air depth</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code><a href="#topic+mod">mod</a></code> </td><td style="text-align: left;">
    maximum operating depth</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code><a href="#topic+maxmix">maxmix</a></code> </td><td style="text-align: left;">
    richest nitrox mix for a given depth
  </td>
</tr>

</table>

<p>The total oxygen toxicity incurred during a nitrox or trimix dive
can be computed by <code><a href="#topic+oxtox">oxtox</a></code>.
Oxygen partial pressure at each stage of a dive is computed
by <code><a href="#topic+ppO2">ppO2</a></code>.
</p>


<h3>Diving on different gases</h3>

<p>Every <code>"dive"</code> object contains information
about the breathing gas or gases used in the dive.
This information is determined when the <code>"dive"</code> object is
created (by the function <code><a href="#topic+dive">dive</a></code>). The default
breathing gas is air.
</p>
<p>The function <code><a href="#topic+dive">dive</a></code> interprets its arguments
as a sequence of actions or events occurring during the dive.
If an argument is a vector of length 2, it is interpreted
as <code>c(depth,time)</code> specifying the depth and duration
of a stage of the dive. If the argument is a single number,
it is interpreted as a depth, meaning that the diver ascends or
descends to this depth.
</p>
<p>Each argument to <code><a href="#topic+dive">dive</a></code> may also be a &quot;gas&quot; object,
like <code>nitrox(0.32)</code>, 
which means that the diver switches to this gas.
</p>
<p>So, for example,
<code>dive(nitrox(0.32), c(30,20))</code>
means a dive to 30 metres for 20 minutes conducted on EAN 32
(Nitrox 0.32) from start to finish.
The command
<code>dive(c(30,20), 5, nitrox(0.36), c(5,3))</code> means
a dive on air to 30 metres for 20 minutes, ascending to 5 metres
while breathing air, then switching to EAN 36 for a safety stop
at 5 metres for 3 minutes.
</p>
<p>Alternatively you can use the argument <code>tanklist</code> to
specify a list of tanks of breathing gas (with optional names
like <code>"travel"</code> and <code>"deco"</code>) and change between tanks at different
stages of the dive using an argument of the form <code>tank=number</code>
or <code>tank=name</code>. The tank list of a dive object can be extracted
using <code><a href="#topic+tanklist">tanklist</a></code> and modified using
<code><a href="#topic+tanklist">tanklist</a>&lt;-</code>.
</p>


<h3>Manipulating dive profiles</h3>

<p>Dive profiles can also be manipulated after they are created.
This allows you, for example, to modify the deepest portion
of a dive (diving to a deeper depth or for a longer duration),
to abort a dive prematurely, to cut-and-paste several dives together,
or to consider the tissue saturation incurred by a particular
segment of a dive.
</p>
<p>The commands <code><a href="#topic+depths.dive">depths.dive</a></code> and <code><a href="#topic+times.dive">times.dive</a></code>
extract the depths and elapsed times at each waypoint during the dive.
The depths can be modified using <code><a href="#topic+depths.dive+3C-">depths.dive&lt;-</a></code>. For
example <code>d &lt;- dive(c(30,20))</code> creates a dive to 30 metres for 20
minutes, starting and finishing at the surface;
to change the depth to 35 metres, type <code>depths.dive(d)[2:3] &lt;- 35</code>.
Similarly the elapsed times can be modified using
<code><a href="#topic+times.dive+3C-">times.dive&lt;-</a></code>. It may be more convenient to use the
functions <code><a href="#topic+durations.dive">durations.dive</a></code> and
<code><a href="#topic+durations.dive+3C-">durations.dive&lt;-</a></code> which give the duration of each stage
(the time between two successive waypoints). 
For example <code>durations.dive(d)[2] &lt;- 25</code> would mean that the
diver now spends 25 minutes at the bottom instead of 20 minutes.
</p>
<p>To extract only part of a dive profile, use <code><a href="#topic+chop.dive">chop.dive</a></code>.
</p>
<p>To paste together two dive profiles or fragments of dive profiles,
simply give them as arguments to <code><a href="#topic+dive">dive</a></code>.
</p>


<h3>Changing the breathing gases</h3>

<p>A dive object has a <em>tank list</em> which is a list of the
tanks of breathing gas that were used (or were available to be used)
during the dive. The function <code><a href="#topic+tanklist">tanklist</a></code> returns
this list, and the function <code><a href="#topic+tanklist">tanklist</a>&lt;-</code> changes the list.
</p>
<p>For example,
<code>d &lt;- dive(c(30,20), c(5,5))</code> is a dive conducted using air.
To modify it to a dive that used nitrox EANx 32, simply type
<code>tanklist(d) &lt;- list(nitrox(0.32))</code>.
Again <code>d &lt;- dive(air, c(30,40), 6, nitrox(0.5), c(6,3), c(3,3))</code> is a
dive conducted using air (tank 1) for the deep section and EANx 50
(tank 2) for the decompression stops at 6 metres and 3 metres.
To change the contents of tank 1 to EANx 32, type
<code>tanklist(d) &lt;- list(nitrox(0.32), nitrox(0.5))</code> or
just <code>tanklist(d)[[1]] &lt;- nitrox(0.32)</code>. 
To associate a name which
each tank, give names to the entries in the tank list, for example
<code>tanklist(d) &lt;- list(deep=nitrox(0.32), deco=nitrox(0.5))</code>
or just assign <code>names(tanklist(d)) &lt;- c("deep", "deco")</code>.
</p>
<p>The <em>selection</em> of tanks,
i.e. which tank is actually used at each stage of the
dive, is specified by the function <code><a href="#topic+whichtank">whichtank</a></code>.
The command <code>whichtank(d)</code>
returns a vector of integers or character strings,
identifying which tank in the tank list is in use at each
waypoint during the dive. That is, <code>whichtank(d)[i]</code> is the tank
in use at the <code>i</code>th waypoint during the dive.
The vector <code>whichtank(d)</code> has the same length as the vectors
<code>depths.dive(d)</code> and <code>times.dive(d)</code>.
</p>
<p>To change the selection of tanks at each stage during the dive,
use the function <code><a href="#topic+whichtank">whichtank</a>&lt;-</code>. For example,
<code>d &lt;- dive(air, c(30,40), 6, nitrox(0.5), c(6,3), c(3,3))</code> is a
dive conducted using air (tank 1) for the deep section and EANx 50
(tank 2) for the
decompression stops at 6 metres and 3 metres. To change this
so that the deco gas is only used at the 3-metre stop, type
<code>whichtank(d) &lt;- ifelse(depths.dive(d) &lt; 3, 1, 2)</code>.
Alternatively <code>whichtank(d)[depths.dive(d) &gt; 3] &lt;- 1</code>
would select tank 1 for all parts of the dive deeper than 3 metres.
These manipulations are usually easier to understand if the tanks
have names. For example typing
<code>names(tanklist(d)) &lt;- c("deep", "deco")</code> we could then
type <code>whichtank(d) &lt;- ifelse(depths.dive(d) &lt; 3, "deep", "deco")</code>
or <code>whichtank(d)[depths.dive(d) &gt; 3] &lt;- "deep"</code>.
</p>


<h3>Licence</h3>

<p>This library and its documentation are usable under the terms of the &quot;GNU 
General Public License&quot;, a copy of which is distributed with the package.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>
with contributions from Vittorio Broglio
and Pedro Antonio Neves.
</p>


<h3>References</h3>

<p>Baddeley, A. (2013) <em>Introduction to the scuba package</em>.
Vignette accompanying this package.
</p>
<p>Baddeley, A. and Bassom, A.P. (2011)
Classical theory of decompression and the design of scuba diving tables.
<em>The Mathematical Scientist</em> <b>36</b>, 75-88.
</p>
<p>Bookspan, J. (1995) Diving physiology in plain English.
Undersea and Hyperbaric Medicine Society, Kensington, Maryland (USA).
ISBN 0-930406-13-3.
</p>
<p>Boycott, A.E. Damant, G.C.C. and Haldane, J.S. (1908)
The prevention of compressed air illness.
<em>Journal of Hygiene</em> (London) <b>8</b>, 342&ndash;443.
</p>
<p>Brubakk, A.O. and Neuman, T.S. (eds.) (2003)
Bennett and Elliott's Physiology and Medicine of Diving.
5th Edition. Saunders. ISBN 0-7020-2571-2
</p>
<p>Buehlmann, A.A. (1983)
<em>Dekompression - Dekompressionskrankheit</em>.
Springer-Verlag.
</p>
<p>Buehlmann, A.A., Voellm, E.B. and Nussberger, P. (2002)
<em>Tauchmedizin</em>. 5e Auflage. Springer-Verlag.
</p>
<p>Tikvisis, P. and Gerth, W.A. (2003)
Decompression Theory. 
In Brubakk and Neuman (2003), Chapter 10.1, pages 419-454.
</p>
<p>Wienke, B.R. (1994)
<em>Basic diving physics and applications</em>.
Best Publishing Co.
</p>
<p>Workman, R.D. (1965) Calculation of decompression schedules
for nitrogen-oxygen and helium-oxygen dives.
Research Report 6-65. US Navy Experimental Diving Unit.
Washington DC. 
</p>

<hr>
<h2 id='air'>Air</h2><span id='topic+air'></span><span id='topic+is.air'></span>

<h3>Description</h3>

<p>A dataset representing air as a breathing gas,
and a function which tests whether a gas is air.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  air
  is.air(g)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="air_+3A_g">g</code></td>
<td>

<p>An object of class <code>"gas"</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An object of class <code>"gas"</code> represents a breathing gas.
Such objects are required for various calculations in the
<code>scuba</code> library.
</p>
<p>The dataset <code>air</code> represents compressed air (21% oxygen,
79% nitrogen) as a breathing gas. It is equivalent to
<code>nitrox(0.21)</code>.
</p>
<p>The function <code>is.air</code> expects its argument <code>g</code>
to be a gas object. It returns <code>TRUE</code> if 
<code>g</code> is equivalent to air, and <code>FALSE</code> otherwise.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+nitrox">nitrox</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  v &lt;- air
  is.air(v)
  v &lt;- nitrox(0.21)
  is.air(v)
  # both are TRUE
</code></pre>

<hr>
<h2 id='ascent'>Ascent Rate or Time</h2><span id='topic+ascent'></span>

<h3>Description</h3>

<p>Specify an Ascent Rate or Ascent Time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'> ascent(speed=NULL, time=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ascent_+3A_speed">speed</code></td>
<td>

<p>Ascent rate in metres per minute.
Incompatible with <code>time</code>.
</p>
</td></tr>
<tr><td><code id="ascent_+3A_time">time</code></td>
<td>

<p>Total ascent time in minutes.
Incompatible with <code>speed</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An object of class <code>"rate"</code> represents a diver's
rate of ascent or descent, or the total time taken to
ascend or descend. Such objects are useful in describing
dives, especially in the function <code><a href="#topic+dive">dive</a></code>.
</p>
<p>The value returned by <code>ascent</code> represents an ascent rate
or ascent time. Exactly one of the arguments <code>speed</code> and
<code>time</code> should be given. If <code>speed</code> is given, this specifies
a fixed rate of ascent, in metres per minute. If <code>time</code> is given,
this specifies a fixed total time of ascent, in minutes.
</p>


<h3>Value</h3>

<p>An object of class <code>"rate"</code> representing
the ascent rate or ascent time.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+dive">dive</a></code>,
<code><a href="#topic+descent">descent</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  # Ascend at 18 metres/minute
  ascent(18)
  # Ascend in exactly 3 minutes
  ascent(time=3)
</code></pre>

<hr>
<h2 id='baron'>
Real Scuba Dive Profile 
</h2><span id='topic+baron'></span>

<h3>Description</h3>

<p>Contains the dive profile data for a scuba dive
on the <em>Baron Gautsch</em> wreck, uploaded from
a dive computer. 
</p>


<h3>Format</h3>

<p>A data frame with the following columns:
</p>

<table>
<tr>
 <td style="text-align: left;">
    <code>time</code> </td><td style="text-align: left;"> character </td><td style="text-align: left;"> elapsed time (minutes:seconds) </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>depth</code> </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> depth (metres) </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>temp</code> </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> temperature (C) </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>bar</code> </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> breathing gas pressure (bar) </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>RBT</code> </td><td style="text-align: left;"> integer </td><td style="text-align: left;"> residual bottom time (min) </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>WL</code> </td><td style="text-align: left;"> integer </td><td style="text-align: left;"> workload 
  </td>
</tr>

</table>



<h3>Details</h3>

<p>This dataset contains the dive profile data for a real scuba dive
uploaded from a dive computer. It gives the
depth, water temperature, breathing gas cylinder pressure,
calculated residual bottom time, and calculated workload,
recorded every 4 seconds throughout the dive.
</p>
<p>The dive site was the wreck of the vessel <em>Baron Gautsch</em> in Croatia.
The dive, to a maximum depth of 40 metres,
with total dive time of 40 minutes,
was conducted on nitrox (EAN 30) by Vittorio Broglio.
</p>
<p>The examples show how to convert the depth-time data to a <code><a href="#topic+dive">dive</a></code>
object.
</p>


<h3>Source</h3>

<p>Vittorio Broglio
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  data(baron)
  b &lt;- dive(nitrox(0.30), baron[,1:2])
</code></pre>

<hr>
<h2 id='bestdoubledive'>
Find the Best Double Dive To Given Depths
</h2><span id='topic+bestdoubledive'></span>

<h3>Description</h3>

<p>For two no-decompression dives,
to depths <code>d1</code> and <code>d2</code> metres respectively,
separated by a given time interval, find the
optimal durations of the two dives.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bestdoubledive(d1, d2, surface = 30, verbose = FALSE, model = "D", asdive=TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bestdoubledive_+3A_d1">d1</code></td>
<td>

<p>Depth of first dive in metres.
</p>
</td></tr>
<tr><td><code id="bestdoubledive_+3A_d2">d2</code></td>
<td>

<p>Depth of second dive in metres.
</p>
</td></tr>
<tr><td><code id="bestdoubledive_+3A_surface">surface</code></td>
<td>

<p>Length of surface interval between dives, in minutes.
</p>
</td></tr>
<tr><td><code id="bestdoubledive_+3A_verbose">verbose</code></td>
<td>

<p>Logical. If <code>TRUE</code>, print lots of extra information,
and return extra information. If <code>FALSE</code> (the default),
just return the optimal dive.
</p>
</td></tr>
<tr><td><code id="bestdoubledive_+3A_model">model</code></td>
<td>

<p>The decompression model. Either
a character string, containing the name of a decompression model
recognised by <code><a href="#topic+pickmodel">pickmodel</a></code>, or 
an object of class <code>"hm"</code>
(created by <code><a href="#topic+hm">hm</a></code>)
representing a decompression model.
Defaults to the DSAT model.
</p>
</td></tr>
<tr><td><code id="bestdoubledive_+3A_asdive">asdive</code></td>
<td>

<p>Logical. If <code>TRUE</code> (the default),
the data for the optimal dive are converted into a dive object
(object of class <code>"dive"</code>). If <code>FALSE</code>, the data are
returned as a data frame.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This command implements the algorithm described by
Baddeley and Bassom (2012) which calculates the &lsquo;best&rsquo;
double dive to two given depths
separated by a given surface interval,
without exceeding the no-decompression limits.
</p>
<p>Consider a no-decompression dive to depth <code class="reqn">d_1</code> metres
for <code class="reqn">t_1</code> minutes, followed by a surface interval of <code class="reqn">s</code>
minutes, followed by a no-decompression dive to depth <code class="reqn">d_2</code>
for <code class="reqn">t_2</code> minutes. 
The &lsquo;best&rsquo; double dive is defined by Baddeley and Bassom (2012)
as the one which maximises the integral of depth
<code class="reqn">\Phi = t_1 d_1 + t_2 d_2</code>.
</p>


<h3>Value</h3>

<p>By default (when <code>verbose=FALSE</code> and <code>asdive=TRUE</code>)
the result is a dive object (object of class <code>"dive"</code>).
</p>
<p>Otherwise, the result is a data frame with
columns <code>t1</code> and <code>t2</code> containing the
dive durations in minutes, <code>phi</code> containing the value of
<code class="reqn">\Phi</code>, and <code>case</code> specifying which of the cases
specified in Baddeley and Bassom (2012) provided the optimum.
If <code>verbose=FALSE</code> this data frame has only one
row, giving the best double dive. If <code>verbose=TRUE</code> then the
data frame has several rows giving the candidates for optimal dive
in each case of the algorithm. 
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>References</h3>

<p>Baddeley, A. and Bassom, A.P. (2011)
Classical theory of decompression and the design of scuba diving tables.
<em>The Mathematical Scientist</em> <b>36</b>, 75-88.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pickmodel">pickmodel</a></code>, 
<code><a href="#topic+hm">hm</a></code>, 
<code><a href="#topic+ndl">ndl</a></code>, 
<code><a href="#topic+haldane">haldane</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   d &lt;- bestdoubledive(40, 12, 15)
   plot(d)
   # Table 3 in Baddeley and Bassom (2012)
   bestdoubledive(40, 12, 15, verbose=TRUE)
   # Brief description of optimal dive
   summary(bestdoubledive(40, 12, 15))
   # Data for optimal dive
   bestdoubledive(40, 12, 15, asdive=FALSE)
</code></pre>

<hr>
<h2 id='Bookspan'>Tissue data from Bookspan's book</h2><span id='topic+Bookspan'></span>

<h3>Description</h3>

<p>Data for several decompression models
of Haldane type, giving the tissue halftimes for Nitrogen
and the M-values (maximum tolerated partial pressure of Nitrogen
for surfacing).
</p>


<h3>Format</h3>

<p>The dataset <code>Bookspan</code> is a list with the following entries:
</p>

<dl>
<dt>Halftimes</dt><dd><p>Halftimes data. A list with entries 
</p>

<table>
<tr>
 <td style="text-align: left;">
	<code>Haldane</code> </td><td style="text-align: left;"> halftimes for Haldane's original model </td>
</tr>
<tr>
 <td style="text-align: left;">
	<code>USN</code> </td><td style="text-align: left;"> halftimes for US Navy original model </td>
</tr>
<tr>
 <td style="text-align: left;">
	<code>DSAT</code> </td><td style="text-align: left;"> halftimes for DSAT model </td>
</tr>
<tr>
 <td style="text-align: left;">
	<code>OrcaEdge</code> </td><td style="text-align: left;"> halftimes for OrcaEdge computer </td>
</tr>
<tr>
 <td style="text-align: left;">
	<code>MicroBrain</code> </td><td style="text-align: left;"> halftimes for MicroBrain computer </td>
</tr>
<tr>
 <td style="text-align: left;">
	<code>ZHL12</code> </td><td style="text-align: left;"> halftimes for ZH-L12 model
      </td>
</tr>

</table>

</dd>
<dt>Mvalues.ata</dt><dd><p>surfacing M-values in ata (atmospheres absolute).
A list with entries
</p>

<table>
<tr>
 <td style="text-align: left;">
	<code>Haldane</code> </td><td style="text-align: left;"> M-values for Haldane's original model </td>
</tr>
<tr>
 <td style="text-align: left;">
	<code>USN</code> </td><td style="text-align: left;"> M-values for US Navy original model </td>
</tr>
<tr>
 <td style="text-align: left;">
	<code>DSAT</code> </td><td style="text-align: left;"> M-values for DSAT model
      </td>
</tr>

</table>

</dd>
<dt>Mvalues.fsw</dt><dd><p>surfacing M-values in fsw (feet of seawater).
A list with the same structure as <code>Mvalues.fsw</code>.
</p>
</dd>
</dl>



<h3>Details</h3>

<p>Bookspan (1995) tabulates the parameters of several different
decompression models of the classical Haldane type.
The basic parameters for such a model are
</p>

<dl>
<dt>halftimes:</dt><dd><p>the Nitrogen diffusion halftime (in minutes)
for each tissue in the model</p>
</dd>
<dt>M-values:</dt><dd><p>the maximum partial pressure of Nitrogen
in each tissue which would be tolerated without symptoms
at an ambient pressure of 1 atmosphere (the &ldquo;surfacing
M-value&rdquo;).
</p>
</dd>
</dl>

<p>The data tabulated in Bookspan (1995, page 16) purportedly give the halftimes
for Haldane's original model, the original US Navy model,
the DSAT model (basis of PADI repetitive dive planner),
the OrcaEdge, MicroBrain and Aladin dive computers,
and the Buehlmann ZH-L12 model.
</p>
<p>The data tabulated in Bookspan (1995, page 23) give the corresponding
M-values (in fsw) for the US Navy and DSAT models only.
</p>
<p>These parameters are all contained in the dataset <code>Bookspan</code>.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>Source</h3>

<p>Bookspan (1995), page 16 (halftime data) and page 23 (M-values).
</p>


<h3>References</h3>

<p>Bookspan, J. (1995) Diving physiology in plain English.
Undersea and Hyperbaric Medicine Society, Kensington, Maryland (USA).
ISBN 0-930406-13-3.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   data(Bookspan)
   Bookspan$Halftimes$DSAT
</code></pre>

<hr>
<h2 id='BuehlmannL16A'>Decompression model ZH-L16A</h2><span id='topic+BuehlmannL16A'></span>

<h3>Description</h3>

<p>The parameters of the decompression model ZH-L16A
developed by Buehlmann.
</p>


<h3>Format</h3>

<p>A data frame giving the following parameters for each compartment:
</p>

<table>
<tr>
 <td style="text-align: left;">
    <code>id</code> </td><td style="text-align: left;"> compartment name (1, 1b, 2, ..., 16) </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>halftime</code> </td><td style="text-align: left;"> Nitrogen halftime (minutes) </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>a</code> </td><td style="text-align: left;"> parameter <code class="reqn">a</code> in <code>ata</code> (atmospheres absolute) </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>b</code> </td><td style="text-align: left;"> parameter <code class="reqn">b</code> (dimensionless)
  </td>
</tr>

</table>



<h3>Details</h3>

<p>This dataset contains the <em>tissue parameters</em> of the
decompression model ZH-L16A.
</p>
<p>Buehlmann's decompression model ZH-L16A is a pure
diffusion (Haldane-type) model consisting of 17 tissue compartments.
Nitrogen in the breathing gas diffuses in and out of each compartment
at a rate governed by the halftime for that compartment.
The maximum tolerable nitrogen tension in a compartment,
when the ambient pressure is <code class="reqn">P</code> atmospheres absolute,
is
</p>
<p style="text-align: center;"><code class="reqn">P_{\mbox{tol}} = a + \frac{P}{b}</code>
</p>

<p>where <code class="reqn">a</code> and <code class="reqn">b</code> are values intrinsic to the tissue.
Thus, for a no-decompression dive at sea level, the nitrogen tension
in each compartment must not exceed the value <code class="reqn">a + 1/b</code> for
that compartment.
</p>
<p>The dataset <code>BuehlmannL16A</code> is a table giving the values of
<code class="reqn">a</code> and <code class="reqn">b</code> for each of the 17 tissue compartments.
</p>


<h3>Decompression calculations</h3>

<p>The dataset <code>BuehlmannL16A</code> is just a table of numbers.
It cannot be used directly for decompression calculations,
because the <span class="pkg">scuba</span> package does not recognise it
as a decompression model (object of class <code>"hm"</code>).
</p>
<p>To perform decompression calculations with the ZH-L16A model,
use the functions <code><a href="#topic+haldane">haldane</a></code> or <code><a href="#topic+showstates">showstates</a></code>
with the argument <code>model="ZH-L16A"</code> (or just <code>model="Z"</code>).
</p>
<p>To convert a table of
<code class="reqn">a</code> and <code class="reqn">b</code> values, such as the table above,
into an object of class <code>"hm"</code> representing a decompression model,
first calculate the M-values <code>M0 = a + 1/b</code> and <code>dM = 1/b</code>,
and then pass the values <code>M0</code>, <code>dM</code> to the function
<code><a href="#topic+hm">hm</a></code>.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>Source</h3>

<p>Buehlmann et al (2003), Table 25, page 158.
</p>


<h3>References</h3>

<p>Buehlmann, A.B., Voellm, E.B. and Nussberger, P. (2002)
Tauchmedizin. 5th edition. Springer-Verlag, Berlin.
ISBN 3-540-42979-4.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Workman65">Workman65</a></code>
</p>

<hr>
<h2 id='chop.dive'>Extract Part of a Dive Profile</h2><span id='topic+chop.dive'></span>

<h3>Description</h3>

<p>Extracts only part of a dive profile.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>chop.dive(d, t0=0, t1=max(times.dive(d)))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="chop.dive_+3A_d">d</code></td>
<td>
<p>The dive. An object of class <code>"dive"</code>.</p>
</td></tr>
<tr><td><code id="chop.dive_+3A_t0">t0</code>, <code id="chop.dive_+3A_t1">t1</code></td>
<td>
<p>Elapsed times (in minutes) of the
start and end of the period which should be extracted.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The argument <code>d</code> should be an object of class <code>"dive"</code>
representing a dive profile.
</p>
<p>This command extracts the part of the dive
profile that starts at time <code>t0</code> minutes and ends at
time <code>t1</code> minutes, and returns it as
an object of class <code>"dive"</code>. The clock is adjusted so that the
new dive profile starts at time <code>0</code> and ends at time <code>t1-t0</code>.
</p>
<p>Note that the resulting dive profile does not start and end at the surface:
the dive profile is
simply chopped off at elapsed time <code>t1</code>. If you want the dive
to start and end at the surface, execute <code>dive(chop.dive(d, t0, t1))</code>.
</p>


<h3>Value</h3>

<p>An object of class <code>"dive"</code> starting 
at time <code>0</code> and ending at time <code>t1-t0</code>. 
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+dive">dive</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   d &lt;- dive(c(30,20), c(5,5))
   # fragment of dive up to 10 minutes
   chop.dive(d, 0, 10)
   # dive aborted at 10 minutes
   dive(chop.dive(d, 0, 10))
</code></pre>

<hr>
<h2 id='deco.ceiling'>
Decompression Ceiling for a Diver
</h2><span id='topic+deco.ceiling'></span>

<h3>Description</h3>

<p>Given the state of a diver's tissues,
find the diver's decompression ceiling depth (minimum permissible depth)
or decompression ceiling pressure (minimum permissible ambient
pressure).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deco.ceiling(state, model, what = c("depth", "pressure"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deco.ceiling_+3A_state">state</code></td>
<td>

<p>Diver's tissue saturations. See Details.
</p>
</td></tr>
<tr><td><code id="deco.ceiling_+3A_model">model</code></td>
<td>

<p>Haldane type decompression model (object of class <code>"hm"</code>)
or one of the standard model names recognised by <code><a href="#topic+pickmodel">pickmodel</a></code>.
</p>
</td></tr>
<tr><td><code id="deco.ceiling_+3A_what">what</code></td>
<td>

<p>What to calculate. See Details.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Given the current state of a diver's tissues,
this command calculates the diver's decompression ceiling:
the shallowest depth (or lowest ambient pressure) to which it is safe to
ascend.
</p>
<p>The argument <code>state</code> gives the diver's current state
or the diver's progressive state during a dive.
It has typically been calculated using <code><a href="#topic+haldane">haldane</a></code>.
It should be either:
</p>

<ul>
<li>
<p>A numeric vector giving the diver's current nitrogen tensions
for each tissue. 
The length of the vector matches the number of tissues in
the <code>model</code>.
</p>
</li>
<li>
<p>A matrix giving the diver's current nitrogen and (if present)
helium tensions for each tissue. The rows of the matrix correspond to
tissues in the model. The first column (or the column labelled
<code>"N2"</code>) contains the nitrogen tensions, and if present, the second
column (or column labelled <code>"He"</code>) contains the helium
tensions.
</p>
</li>
<li>
<p>A three-dimensional array giving the progressive states of
the diver over time. The first index corresponds to time.
The second index corresponds to tissues in the model. The third
coordinate corresponds to inert gases <code>"N2"</code> and <code>"He"</code>.
</p>
</li></ul>

<p>Entries in the vector, matrix or array <code>state</code> are pressures
in atmospheres absolute (ata).
</p>
<p>The minimum tolerated ambient pressure <code>Pamb.tol</code> is calculated
using the equivalent of Buehlmann's formula (Buehlmann et al, 1995,
section 6.5, page 117). If <code>what="pressure"</code>, this minimum
tolerated ambient pressure is returned (negative pressures are reset
to zero). If <code>what="depth"</code> this pressure is converted to
diving depth in metres assuming that the surface pressure is 1 ata
(negative depths are reset to zero).
</p>


<h3>Value</h3>

<p>A numeric vector, matrix or array of the same type as <code>state</code>
and with the same dimensions as <code>state</code>,
giving the decompression ceiling for each tissue,
each inert gas, and each time point as given.
If <code>what="pressure"</code> the entries in the result are pressures
in ata. If <code>what="depth"</code> the entries are depths in metres.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>References</h3>

<p>Buehlmann, A.B., Voellm, E.B. and Nussberger, P. (2002)
Tauchmedizin. 5th edition. Springer-Verlag, Berlin.
ISBN 3-540-42979-4.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+hm">hm</a></code> for decompression models.
</p>
<p><code><a href="#topic+haldane">haldane</a></code> to calculate tissue tensions
during or after a dive.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   # diver state after saturation diving on EANx30 at 20 metres
   s &lt;- saturated.state("Z", 20, nitrox(0.30))

   # decompression ceiling for each compartment
   depthceiling &lt;- deco.ceiling(s, "Z")
   round(depthceiling, 2)
   round(max(depthceiling), 2)
   # decompress at 8 metres or deeper

   # flying-after-diving with cabin pressure 0.8 ata
   pressureceiling &lt;- deco.ceiling(s, "Z", "pressure")
   round(pressureceiling, 2)
   any(pressureceiling &gt; 0.8)
   # immediate flying-after-diving is not safe
</code></pre>

<hr>
<h2 id='deepmine'>
Extremely Deep Decompression Dive
</h2><span id='topic+deepmine'></span>

<h3>Description</h3>

<p>Contains the dive profile for a long,
extremely deep, decompression dive, using mixed gases,
in a flooded mine.
</p>


<h3>Format</h3>

<p>An object of class <code>"dive"</code>.
</p>


<h3>Details</h3>

<p>This dataset contains the dive profile data for an
extreme dive in a flooded mine.
</p>
<p>This was a dive to 110 metres for 7 minutes, followed by
147 minutes of staged decompression, including 40 minutes in
a dry habitat at 4 metres. 
Five different mixed gases (trimix and nitrox) were breathed.
</p>
<p>The diver suffered decompression sickness after this dive.
An analysis of the dive profile was presented by Buzzacott et al (2013).
</p>
<p>The dataset is an object of class <code>"dive"</code>
containing the dive profile.
It can be plotted and printed (using <code><a href="#topic+plot.dive">plot.dive</a></code>
and <code><a href="#topic+print.dive">print.dive</a></code>). The nitrogen saturation can be
computed using <code><a href="#topic+haldane">haldane</a></code> and the
cumulative oxygen toxicity using <code><a href="#topic+oxtox">oxtox</a></code>.
</p>


<h3>Source</h3>

<p>Peter Buzzacott.
</p>


<h3>References</h3>

<p>Buzzacott, P., Papadopoulou, V., Baddeley, A., Petri, N. and Lind,
F. (2013)
Exceptional diving exposure with deep stops and DCS (case study).
Conference Poster, European Underwater and Baromedical Society/
South Pacific Underwater Medicine Society/ Southern African
Underwater and Hyperbaric Medicine Association,
Tricontinental Scientific Meeting on Diving
and Hyperbaric Medicine, La Reunion, September 23-28, 2013.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  data(deepmine)
  plot(deepmine, legendpos="right")
</code></pre>

<hr>
<h2 id='depths.dive'>Depths at each waypoint of a dive</h2><span id='topic+depths.dive'></span><span id='topic+depths.dive+3C-'></span>

<h3>Description</h3>

<p>Extracts, or alters, the depth at each waypoint during a dive.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>depths.dive(d)
depths.dive(d) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="depths.dive_+3A_d">d</code></td>
<td>
<p>A dive (object of class <code>"dive"</code>).</p>
</td></tr>
<tr><td><code id="depths.dive_+3A_value">value</code></td>
<td>
<p>A numeric vector containing depths in metres.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An object of class <code>"dive"</code> represents a scuba dive profile. It is
created by the function <code><a href="#topic+dive">dive</a></code>. A dive is defined as a
series of waypoints occurring at specified depths and times. The
depth at each waypoint is returned by <code>depths.dive</code>. The
assignment <code>depths.dive(d) &lt;- value</code> alters these depths,
provided the new vector <code>value</code> has the same length as the old one.
</p>


<h3>Value</h3>

<p><code>depths.dive</code> returns a numeric vector containing the
depths at each waypoint, in metres.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+times.dive">times.dive</a></code>,
<code><a href="#topic+durations.dive">durations.dive</a></code>,
<code><a href="#topic+dive">dive</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   d &lt;- dive(c(30,20), c(5,5))
   d
   depths.dive(d)
   # what if we had dived to 35 metres?
   depths.dive(d)[2:3] &lt;- 35
   d
</code></pre>

<hr>
<h2 id='descent'>Descent Rate or Time</h2><span id='topic+descent'></span>

<h3>Description</h3>

<p>Specify an Descent Rate or Descent Time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'> descent(speed=NULL, time=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="descent_+3A_speed">speed</code></td>
<td>

<p>Descent rate in metres per minute.
Incompatible with <code>time</code>.
</p>
</td></tr>
<tr><td><code id="descent_+3A_time">time</code></td>
<td>

<p>Total descent time in minutes.
Incompatible with <code>speed</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An object of class <code>"rate"</code> represents a diver's
rate of ascent or descent, or the total time taken to
ascend or descend. Such objects are useful in describing
dives, especially in the function <code><a href="#topic+dive">dive</a></code>.
</p>
<p>The value returned by <code>descent</code> represents a descent rate
or descent time. Exactly one of the arguments <code>speed</code> and
<code>time</code> should be given. If <code>speed</code> is given, this specifies
a fixed rate of descent, in metres per minute. If <code>time</code> is given,
this specifies a fixed total time of descent, in minutes.
</p>


<h3>Value</h3>

<p>An object of class <code>"rate"</code> representing
the descent rate or descent time.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+dive">dive</a></code>,
<code><a href="#topic+descent">descent</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  # Descend at 30 metres/minute
  descent(30)
  # Descend in exactly 3 minutes
  descent(time=3)
</code></pre>

<hr>
<h2 id='dive'>Define a Dive Profile</h2><span id='topic+dive'></span>

<h3>Description</h3>

<p>Define a dive profile.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  dive(..., begin=0, end=0, tanklist=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dive_+3A_...">...</code></td>
<td>

<p>Any number of arguments, specifying a sequence of events
that make up the dive. The arguments may specify depths,
time spent at each depth, ascent or descent rates,
and gas switches. See Details.
</p>
</td></tr>
<tr><td><code id="dive_+3A_begin">begin</code>, <code id="dive_+3A_end">end</code></td>
<td>

<p>The depths at the start and finish of the dive (normally zero
indicating that the dive starts and finishes at the surface)
or <code>NA</code>.
</p>
</td></tr>
<tr><td><code id="dive_+3A_tanklist">tanklist</code></td>
<td>

<p>Optional list of the gases contained in each tank,
for a dive with multiple tanks.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function creates 
an object of class <code>"dive"</code> which represents a scuba dive.
The dive profile is assumed to be piecewise linear, that is,
the graph of depth against time is a broken straight line. 
Dives are assumed to start and finish at the surface.
</p>
<p>The arguments <code>...</code> specify a succession of events
that make up the dive. Each argument can be
</p>

<dl>
<dt>a vector of length 2</dt><dd>
<p>interpreted as <code>c(depth, duration)</code>
where <code>depth</code> gives the depth in metres
and <code>duration</code> the length of stay at this depth, in minutes.
</p>
</dd>
<dt>a single number</dt><dd>
<p>interpreted as a waypoint depth in metres. 
The diver will ascend or descend to this depth, at the
current default rate of ascent or descent.
</p>
</dd>
<dt>an object of class <code>"gas"</code></dt><dd>
<p>specifying a breathing gas. Such objects are
created by the functions <code><a href="#topic+nitrox">nitrox</a></code> and <code><a href="#topic+trimix">trimix</a></code>.
The diver switches to this gas.
</p>
</dd>
<dt>an argument of the form <code>tank=n</code></dt><dd><p>specifying
a switch to another tank or cylinder of breathing gas.
This is available only when the tanks used in the dive
have been specified by the argument <code>tanklist</code>.
The value <code>n</code> should be a valid index for this list
(either a serial number in the tank list or a character string
matching one of the names in the tank list).
</p>
</dd>
<dt>an ascent/descent rate object</dt><dd>
<p>created by the functions <code><a href="#topic+ascent">ascent</a></code> or
<code><a href="#topic+descent">descent</a></code>. This resets the default
rate of ascent or descent.
</p>
</dd>
<dt>a data frame with 2 columns</dt><dd>
<p>containing a dive profile, usually uploaded from a dive computer. The
first column should contain the <em>elapsed</em> times, and the second
column contains the depths (in metres) measured at these times.
The column of elapsed times can be either a character vector
containing times in minutes-and-seconds format <code>mm:ss</code>,
or an integer vector containing elapsed times in <b>seconds</b>,
or a vector of class <code><a href="base.html#topic+difftime">difftime</a></code>
representing elapsed times in any time unit.
In this case you probably want to set the arguments
<code>begin=NA</code> and <code>end=NA</code>.
</p>
</dd>
<dt>an object of class <code>"dive"</code></dt><dd>
<p>representing a dive profile. This allows the user to paste
dive profiles together.
</p>
</dd>
</dl>

<p>Dives are assumed to start and finish at the surface. This can be changed
by specifying values for <code>begin</code> and <code>end</code>. See the
section on Start and End of Dive.
</p>
<p>Initially the descent rate is set to 30 metres per minute,
the ascent rate is 18 metres per minute, and the breathing gas is
air. These settings may be changed during the dive
by the <code>...</code> arguments.
</p>
<p>A dive object may include
periods spent at the surface (depth zero) and may therefore represent
a succession of dives separated by surface intervals. 
</p>
<p>Once an object of class <code>"dive"</code> has been created,
it can be plotted and printed (using <code><a href="#topic+plot.dive">plot.dive</a></code>
and <code><a href="#topic+print.dive">print.dive</a></code>). The nitrogen saturation can be
computed using <code><a href="#topic+haldane">haldane</a></code> and the
cumulative oxygen toxicity using <code><a href="#topic+oxtox">oxtox</a></code>.
</p>


<h3>Value</h3>

<p>An object of class <code>"dive"</code> describing the dive profile
and the breathing gases used.
</p>


<h3>Start and End of Dive</h3>

<p>To make it easy to specify simple dive profiles,
the algorithm fills in some information.
If the diving depths specified in the arguments <code>...</code> do not
start at the surface (depth zero), then by default, the algorithm
assumes that the dive did start at the surface, and it
adds an extra dive segment at the beginning of the dive.
The diver is assumed to descend from the surface, at the standard
descent rate, to the first depth specified.
Thus <code>dive(c(10,25))</code> means that the diver will first descend
from the surface to 10 metres at a rate of 30 metres per minute,
remain there for 25 minutes, then ascend to the surface
at a rate of 18 metres per minute.
</p>
<p>To change this behaviour, set a different value for the argument <code>begin</code>.
If the dive really started at a nonzero depth, e.g. a dry habitat at 3 metres,
set <code>begin=3</code>. If one of the arguments <code>...</code> is a
data frame uploaded from a dive computer, then set <code>begin=NA</code>,
so that that the dive will start at the first depth
specified in this data frame.
</p>
<p>Similarly, if the last depth specified by the arguments <code>...</code>
is a depth below the surface (depth greater than zero), then by
default the diver is assumed to ascend from this last depth to
the surface, at the standard ascent rate. To suppress this altogether,
set <code>end=NA</code>. To specify a different final depth for the dive,
set a different value for <code>end</code>.
</p>


<h3>Modifying a dive object</h3>

<p>The depths and elapsed times at each waypoint during the dive
can be extracted and changed using <code><a href="#topic+depths.dive">depths.dive</a></code>
and <code><a href="#topic+times.dive">times.dive</a></code>. 
</p>
<p>Dives can be cut into pieces using <code><a href="#topic+chop.dive">chop.dive</a></code>
and pasted together using <code>dive</code>.
</p>
<p>It is possible to alter the <em>breathing gases</em> used in a dive <code>d</code>,
yielding a new dive object. 
This makes it possible to study the effect of conducting the same
dive profile with different breathing gases.
You can change the specification of the breathing gas (or gases) by
<code><a href="#topic+tanklist">tanklist</a>(d) &lt;- value</code>.
In a multiple-tank dive you can change the periods when each tank was used,
by <code><a href="#topic+whichtank">whichtank</a>(d) &lt;- value</code>.
</p>


<h3>Warnings</h3>

<p>Not suitable for representing altitude dives. 
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+nitrox">nitrox</a></code>,
<code><a href="#topic+ascent">ascent</a></code>,
<code><a href="#topic+descent">descent</a></code>,
<code><a href="#topic+haldane">haldane</a></code>,
<code><a href="#topic+plot.dive">plot.dive</a></code>,
<code><a href="#topic+times.dive">times.dive</a></code>,
<code><a href="#topic+durations.dive">durations.dive</a></code>,
<code><a href="#topic+depths.dive">depths.dive</a></code>,
<code><a href="#topic+chop.dive">chop.dive</a></code>,
<code><a href="#topic+tanklist">tanklist</a></code>,
<code><a href="#topic+whichtank">whichtank</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  # Dive to 25 m for 20 min followed by safety stop at 5 metres for 3 min
  d &lt;- dive(c(25,20),c(5,3))
  plot(d)

  # Bounce dive to 20 metres
  d &lt;- dive(20)

  # Two dives separated by a one-hour surface interval
  d &lt;- dive(c(30,15),c(9,2),c(5,5),c(0,60),c(12,60),c(5,5))

  # ASCENT RATES
  # Ascent rate 18 m/min below 9 metres, 6m/min above 9 metres
  d &lt;- dive(c(30, 12), ascent(18), 9, ascent(6), c(5,3))

  # UPLOADED DIVE PROFILE
  data(baron)
  pro &lt;- baron[, 1:2]
  d &lt;- dive(pro)
  d &lt;- dive(pro, begin=NA, end=NA)
  plot(d)

  # GAS USE
  # 30-metre dive on Nitrox 32
  d &lt;- dive(nitrox(0.32), c(30,20), c(5,5))

  # GAS SWITCHING
  # Dive to 18 m for 30 min on air,
  # switch to Nitrox 36, ascend to 5 metres, safety stop
  d &lt;- dive(c(18, 30), nitrox(0.36), c(5,3))
  # Same as above, but ascend to 5 m on air, then switch gas
  d &lt;- dive(c(18, 30), 5, nitrox(0.36), c(5,3))

  # SWITCHING TO SPECIFIC TANKS
  d &lt;- dive(tanklist=list(main=air, deco=nitrox(0.50)),
            tank="main", c(30, 20), 5, tank="deco", c(5,10))

  # Descend to 5 metres on pure oxygen, switch to Trimix,
  # descend to 30 metres, remain 40 minutes, ascend to 6 metres,
  # switch to pure oxygen, ascend to 5 metres, decompress 10 minutes,
  # surface and continue breathing pure oxygen for 10 minutes

  d &lt;- dive(tanklist=list(travel=trimix(0.15, 0.5), deco=nitrox(1)),
            tank="deco", 5, tank="travel", c(30,40), 6, tank="deco",
            c(5,10), c(0,10))

</code></pre>

<hr>
<h2 id='durations.dive'>Durations of time between each waypoint of a dive</h2><span id='topic+durations.dive'></span><span id='topic+durations.dive+3C-'></span>

<h3>Description</h3>

<p>Extracts, or alters, the durations of each interval
between waypoints during a dive.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>durations.dive(d)
durations.dive(d) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="durations.dive_+3A_d">d</code></td>
<td>
<p>A dive (object of class <code>"dive"</code>).</p>
</td></tr>
<tr><td><code id="durations.dive_+3A_value">value</code></td>
<td>
<p>A numeric vector containing durations in minutes.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An object of class <code>"dive"</code> represents a scuba dive. It is
created by the function <code><a href="#topic+dive">dive</a></code>. A dive is defined as a
series of waypoints occurring at specified depths and times.
</p>
<p>The duration of the time interval between each successive pair of
waypoints is returned by <code>durations.dive</code>. The
assignment <code>durations.dive(d) &lt;- value</code> alters these durations,
provided the new vector <code>value</code> has the same length as the old one.
</p>


<h3>Value</h3>

<p><code>durations.dive</code> returns a numeric vector containing the
durations of intervals between each waypoint, in minutes.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+depths.dive">depths.dive</a></code>,
<code><a href="#topic+times.dive">times.dive</a></code>,
<code><a href="#topic+dive">dive</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   d &lt;- dive(c(30,20), c(5,5))
   d
   durations.dive(d)
   # what if we stayed at the bottom for 25 minutes instead of 20?
   durations.dive(d)[2] &lt;- 25
   d
</code></pre>

<hr>
<h2 id='ead'>Equivalent Air Depth</h2><span id='topic+ead'></span><span id='topic+eadtable'></span>

<h3>Description</h3>

<p>Computes the Equivalent Air Depth for a Nitrox mixture at
given depths.
</p>


<h3>Usage</h3>

<pre><code class='language-R'> ead(depth, g)
 eadtable(g, ppO2max=1.4)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ead_+3A_depth">depth</code></td>
<td>

<p>depth of dive, in metres.
</p>
</td></tr>
<tr><td><code id="ead_+3A_g">g</code></td>
<td>

<p>The breathing gas. An object of class <code>"gas"</code>
or a number specifying the fraction (between 0 and 1) of oxygen in the
nitrox mixture. 
</p>
</td></tr>
<tr><td><code id="ead_+3A_ppo2max">ppO2max</code></td>
<td>

<p>maximum permitted partial pressure of oxygen
in ata.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Applies the standard formula for equivalent air depth.
</p>


<h3>Value</h3>

<p>For <code>ead</code>, the Equivalent Air Depth in metres for each
value of <code>depth</code>;
for <code>eadtable</code>, a data frame containing depths and Equivalent
Air Depth values, for a range of depths up to the maximum permitted
by <code>ppO2max</code>.
</p>


<h3>Warnings</h3>

<p>This function does not check whether the breathing gas would be safe
(it could be hypoxic or toxic at the depth in question).
</p>
<p><code>ead</code> returns negative values for sufficiently shallow depths.
In <code>eadtable</code> these values are blank.
</p>
<p>Not applicable to altitude dives. Not applicable to
gas mixtures other than nitrox (oxygen-nitrogen mixtures).
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+mod">mod</a></code>,
<code><a href="#topic+maxmix">maxmix</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  # Nitrox I (32% oxygen) at 20 metres
  ead(20, 0.32)
  # Nitrox I table of EAD's
  eadtable(0.32)
  # Nitrox II (36% oxygen) at a range of depths
  ead(10:25, 0.36)
</code></pre>

<hr>
<h2 id='END'>Equivalent Air Depth</h2><span id='topic+END'></span>

<h3>Description</h3>

<p>Computes the Equivalent Narcotic Depth for a Trimix mixture at
given depth.
</p>


<h3>Usage</h3>

<pre><code class='language-R'> END(depth, g)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="END_+3A_depth">depth</code></td>
<td>

<p>depth of dive, in metres.
A numeric value or a vector of values.
</p>
</td></tr>
<tr><td><code id="END_+3A_g">g</code></td>
<td>

<p>The breathing gas. An object of class <code>"gas"</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Applies the standard formula for equivalent narcotic depth:
the depth at which compressed air would have the same
partial pressure of narcotic gases as the specified gas <code>g</code>
at the specified <code>depth</code>
(assuming that both Nitrogen and Oxygen are narcotic). 
</p>


<h3>Value</h3>

<p>Numeric value or vector giving the Equivalent Narcotic Depth
in metres for each value of <code>depth</code>.
</p>


<h3>Warnings</h3>

<p>This function does not check whether the breathing gas would be safe
(it could be hypoxic or toxic at the depth in question).
It is not applicable to altitude dives. 
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+ead">ead</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  # Trimix 18/50
  #            (18% oxygen, 50% helium) 
  END(30, trimix(0.18, 0.5))
</code></pre>

<hr>
<h2 id='haldane'>Tissue Saturation by Haldane Model</h2><span id='topic+haldane'></span>

<h3>Description</h3>

<p>Computes a diver's tissue saturation 
during and after a dive, as predicted by a Haldane model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  haldane(d,
	 model=pickmodel("DSAT"),
	 prevstate=NULL,
         progressive=FALSE,
         relative=FALSE,
         deco=FALSE,
         derived=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="haldane_+3A_d">d</code></td>
<td>

<p>The dive profile. An object of class <code><a href="#topic+dive">dive</a></code>. 
</p>
</td></tr>
<tr><td><code id="haldane_+3A_model">model</code></td>
<td>

<p>The decompression model. An object of class <code>"hm"</code>.
Defaults to the DSAT (PADI) model.
</p>
</td></tr>
<tr><td><code id="haldane_+3A_prevstate">prevstate</code></td>
<td>

<p>Optional. Initial state of the diver.
A data frame containing the tissue saturations 
for each tissue compartment in the model, at the start of the dive.
Defaults to the state of a diver with no previous dive history.
</p>
</td></tr>
<tr><td><code id="haldane_+3A_progressive">progressive</code></td>
<td>

<p>Logical flag. If <code>TRUE</code>, the tissue saturations are computed
at every time point during the dive. If <code>FALSE</code> (the default),
only the final tissue saturation at the end of the dive is computed.
</p>
</td></tr>
<tr><td><code id="haldane_+3A_relative">relative</code></td>
<td>

<p>Logical flag indicating whether to compute relative tissue
saturations. If <code>FALSE</code> (the default),
tissue saturations are expressed as absolute pressures in
atmospheres absolute (ata). If <code>TRUE</code>, the tissue saturation for each
compartment is expressed as a fraction of the surfacing M-value
for the compartment. (Alternatively if <code>deco=TRUE</code> then tissue
saturation is expressed as a fraction of the M-value at current depth.)
</p>
</td></tr>
<tr><td><code id="haldane_+3A_deco">deco</code></td>
<td>

<p>Logical flag indicating whether to calculate relative saturations
for a decompression dive.
If <code>deco=FALSE</code>, then relative tissue saturations
are computed by dividing the absolute tissue saturation by the
surfacing M-value, as appropriate for a no-decompression dive.
If <code>deco=TRUE</code>, then relative tissue saturations are computed
by dividing the absolute tissue saturation by the M-value at the
current depth, as appropriate for a decompression dive.
This argument applies only when <code>relative=TRUE</code>.
</p>
</td></tr>
<tr><td><code id="haldane_+3A_derived">derived</code></td>
<td>

<p>Logical flag indicating whether to calculate additional quantities
such as the decompression ceiling.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This command computes a diver's nitrogen saturation 
during and after a dive, as predicted by a Haldane model
(Boycott et al, 1908).
</p>
<p>A Haldane-type decompression model describes the diver's body
as a set of independent compartments
connected directly to the breathing gas and governed by classical
diffusion.
</p>
<p>Henry's Law is applied 
to predict the on- and off-gassing of inert gas
in each tissue (compartment) of the model.
The resulting differential equations are solved analytically
(the solution is often called the &lsquo;Schreiner equation&rsquo; in
the decompression literature).
</p>
<p>The argument <code>prevstate</code> represents the tissue saturation of the
diver at the start of the dive. It should be a data frame, with one row for
each compartment of the decompression model, and one column for each
inert gas (<code>N2</code> and/or <code>He</code>) in the model. Such data frames
are usually generated by <code><a href="#topic+saturated.state">saturated.state</a></code> or
<code>haldane</code>.
</p>
<p>If <code>progressive=FALSE</code>, the diver's tissue saturation
at the end of the dive is calculated.
</p>
<p>If <code>progressive=TRUE</code>,
the tissue saturations are calculated at each 
waypoint during the dive. The corresponding times
(extracted by <code><a href="#topic+times.dive">times.dive</a>(d)</code>)
are <em>not equally spaced</em> over time.
</p>
<p>If <code>derived=TRUE</code> then additional quantities are
computed including the washout (the difference
between the current tissue tension of inert gas
and the partial pressure of inert gas in the breathing gas),
the decompression ceiling depth (minimum tolerable diving depth)
and decompression ceiling pressure (minimum tolerable
ambient pressure). These quantities are returned as an <code>attribute</code>
of the result: <code>attr(result, "derived")</code>.
This is a list containing the components
<code>Dceiling</code> (depth ceiling), 
<code>Pceiling</code> (pressure ceiling)
and <code>washout</code> (washout), each of which
is a vector, matrix or array of the same format as the result.
</p>
<p>To compute the tissue saturation
at an arbitrary instant of time during the dive, <code>tim</code>, use
<code>haldane(chop.dive(d, 0, tim))</code>. To view the tissue saturation
at arbitrary instants of time using interactive graphics,
use <code><a href="#topic+showstates">showstates</a></code>.
</p>


<h3>Value</h3>

<p>If <code>relative=FALSE</code> and <code>progressive=FALSE</code>, a data frame giving
the diver's inert gas saturation state at the end of the
dive. Each row of the data frame corresponds to a tissue compartment.
The column <code>N2</code> gives the nitrogen tension (in atmospheres absolute) of
each compartment. The column <code>He</code>, if present, gives the
Helium tension (in atmospheres absolute) in each compartment.
</p>
<p>If <code>relative=FALSE</code> and <code>progressive=TRUE</code>,
a three-dimensional array giving
the diver's inert gas saturation state at each time point during the
dive. The first dimension of the array corresponds to successive time points
during the dive (the times can be extracted by
<code><a href="#topic+times.dive">times.dive</a></code>).
The second dimension corresponds to the tissue compartments.
The third dimension corresponds to the inert gases
(<code>N2</code> and/or <code>He</code>).
The entries are gas tensions (in atmospheres absolute).
</p>
<p>If <code>relative=TRUE</code> and <code>progressive=FALSE</code>, a vector
giving the diver's relative saturation of inert gas at the end of the
dive. Entries in the vector correspond to tissue compartments.
The entries are relative gas tensions, that is,
the total inert gas (Nitrogen plus Helium) tissue saturation
divided by the appropriate M-value for that compartment: either
the surfacing M-value (if <code>deco=FALSE</code>) or the
M-value at current depth (if <code>deco=TRUE</code>).
</p>
<p>If <code>relative=TRUE</code> and <code>progressive=TRUE</code>,
a matrix giving the diver's relative saturation
at each time point during the
dive. Rows of the array correspond to successive time points
during the dive. Columns correspond to the tissue compartments.
The entries are relative gas tensions, that is,
the total inert gas (Nitrogen plus Helium) tissue saturation
divided by the appropriate M-value for that compartment: either
the surfacing M-value (if <code>deco=FALSE</code>) or the
M-value at current depth (if <code>deco=TRUE</code>).
</p>
<p>If <code>derived=TRUE</code> then additional quantities are
returned as an <code>attribute</code>
of the result. This is extracted by: <code>attr(result, "derived")</code>.
It is a list containing the components
<code>Dceiling</code> (depth ceiling), 
<code>Pceiling</code> (pressure ceiling)
and <code>washout</code> (washout), each of which
is a vector, matrix or array of the same format as the result.
</p>


<h3>Warnings</h3>

<p>Not applicable to altitude dives. Not suitable for dive planning.
</p>
<p>No constraints of any kind are checked. In particular
it is not guaranteed that the model accepts the dive profile
as a no-decompression dive.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>References</h3>

<p>Bookspan, J. (1995) Diving physiology in plain English.
Undersea and Hyperbaric Medicine Society, Kensington, Maryland (USA).
ISBN 0-930406-13-3.
</p>
<p>Boycott, A.E. Damant, G.C.C. and Haldane, J.B. (1908)
The prevention of compressed air illness.
<em>Journal of Hygiene</em> (London) <b>8</b>, 342&ndash;443.
</p>
<p>Brubakk, A.O. and Neuman, T.S. (eds.) (2003)
Bennett and Elliott's Physiology and Medicine of Diving.
5th Edition. Saunders. ISBN 0-7020-2571-2
</p>
<p>Buehlmann, A.A. (1983)
<em>Dekompression - Dekompressionskrankheit</em>.
Springer-Verlag.
</p>
<p>Buehlmann, A.A., Voellm, E.B. and Nussberger, P. (2002)
<em>Tauchmedizin</em>. 5e Auflage. Springer-Verlag.
</p>
<p>Tikvisis, P. and Gerth, W.A. (2003)
Decompression Theory. 
In Brubakk and Neuman (2003), Chapter 10.1, pages 419-454.
</p>
<p>Wienke, B.R. (1994)
<em>Basic diving physics and applications</em>.
Best Publishing Co.
</p>
<p>Workman, R.D. (1965) Calculation of decompression schedules
for nitrogen-oxygen and helium-oxygen dives.
Research Report 6-65. US Navy Experimental Diving Unit.
Washington DC. 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dive">dive</a></code>,
<code><a href="#topic+oxtox">oxtox</a></code>,
<code><a href="#topic+pickmodel">pickmodel</a></code>,
<code><a href="#topic+showstates">showstates</a></code>,
<code><a href="#topic+Mmix">Mmix</a></code>,
<code><a href="#topic+M0mix">M0mix</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  # First dive to 25 m for 20 min with safety stop
  d1 &lt;- dive(c(25,20),c(5,5))
  # Evaluate saturation according to DSAT model
  s1 &lt;- haldane(d1)
  s1
  # Look at saturation (in ata)
  barplot(s1$N2, ylab="Saturation (ata)")
  # Look at relative saturation
  M0 &lt;- param(pickmodel("D"), "N2", "M0")
  barplot(100 * s1$N2/M0, ylab="Saturation (percent)")

  # Evaluate saturation after 2 hour surface interval
  s2 &lt;- haldane(dive(c(0,120)), prevstate=s1)
  # Then after another dive to 18 m for 30 min with safety stop
  s3 &lt;- haldane(dive(c(18, 30),c(5,3)), prevstate=s2)
  # Assess effect of breathing 80% oxygen at safety stop
  s3o &lt;- haldane(dive(c(18, 30),5, nitrox(0.8), c(5,3)), prevstate=s2)

  # Inspect saturation during dive d1 at time 10 minutes
  s10 &lt;- haldane(chop.dive(d1, 0, 10))

  # Progressive saturation during dive
  # A real dive
  plot(deepmine, col=1, key.gases="none")
  # compute saturations during dive
  hmine &lt;- haldane(deepmine, model="Z", progressive=TRUE)
  # show N2 saturations during dive
  # Image plot
  image(x=times.dive(deepmine), y=1:17, z=hmine[,,"N2"],
      xlab="Time (min)", ylab="Compartment", axes=FALSE)
  axis(1)
  axis(2, at=1:17, labels=dimnames(hmine)[[2]])
  # Perspective plot
  persp(x=times.dive(deepmine), y=1:17, z=hmine[,,"N2"],
      xlab="Time (min)", ylab="Compartment", zlab="Saturation (atm)",
      col="green3", shade=0.6, border=NA,
      theta=20, phi=30, ltheta=120, lphi=20)
       
  #....  Derived quantities .....
  hmine &lt;- haldane(deepmine, model="Z", progressive=TRUE, derived=TRUE)
  der &lt;- attr(hmine, "derived")
  names(der)

  # Decompression ceiling depth (time x compartment x gas)
  dcd &lt;- der$Dceiling
  # Overall decompression ceiling at each time point
  dc &lt;- apply(dcd, 1, max)

  # plot dive with deco ceiling
  plot(deepmine, key.gases="none", col=1)
  lines(times.dive(deepmine), -dc, lty=3, lwd=2)
  legend(100, -60, lty=c(1,3), lwd=2,
      legend=c("dive profile", "deco ceiling"))

  # Nitrogen washout for tissue 1b (positive values indicate off-gassing)
  plot(times.dive(deepmine), der$washout[,"1b", "N2"],
        type="l", xlab="Time (min)", ylab="Washout")
</code></pre>

<hr>
<h2 id='hm'>Haldane Type Model</h2><span id='topic+hm'></span>

<h3>Description</h3>

<p>Creates a Haldane-type decompression model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  hm(HalfT, M0=NULL, dM=NULL, ...,
               N2 = list(HalfT=HalfT, M0=M0, dM=dM),
               He = NULL,
               title="user-defined model",
               cnames=NULL,
               mixrule=NULL) 
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hm_+3A_halft">HalfT</code></td>
<td>

<p>Vector of nitrogen halftimes (in minutes) for each compartment.
</p>
</td></tr>
<tr><td><code id="hm_+3A_m0">M0</code></td>
<td>

<p>Optional vector of surfacing M-values (in ata) of nitrogen
for each compartment.
</p>
</td></tr>
<tr><td><code id="hm_+3A_dm">dM</code></td>
<td>

<p>Optional vector of gradients for M-values (dimensionless)
for each nitrogen compartment.
</p>
</td></tr>
<tr><td><code id="hm_+3A_...">...</code></td>
<td>
<p>Ignored.</p>
</td></tr>
<tr><td><code id="hm_+3A_n2">N2</code></td>
<td>

<p>An alternative way of specifying all the data for
Nitrogen. A list with elements labelled
<code>"HalfT"</code>, <code>"M0"</code> and <code>"dM"</code> giving the
halftimes, surfacing M-values, and M-value gradients
for each compartment. 
</p>
</td></tr>
<tr><td><code id="hm_+3A_he">He</code></td>
<td>

<p>Data for Helium, if available.
A list with elements labelled
<code>"HalfT"</code>, <code>"M0"</code> and <code>"dM"</code> giving the
Helium halftimes, surfacing M-values, and M-value gradients
for each compartment.
</p>
</td></tr>
<tr><td><code id="hm_+3A_title">title</code></td>
<td>

<p>Optional name of model. A character string.
</p>
</td></tr>
<tr><td><code id="hm_+3A_cnames">cnames</code></td>
<td>

<p>Optional names of compartments. A vector of character strings.
</p>
</td></tr>
<tr><td><code id="hm_+3A_mixrule">mixrule</code></td>
<td>

<p>Mixing rule for M-values.
Either <code>"N2"</code>, <code>"interpolate"</code>, or <code>NULL</code>
(representing a sensible default). 
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function creates an object of class <code>"hm"</code>,
which represents a Haldane-type decompression model.
Objects of this class are needed by the commands <code><a href="#topic+ndl">ndl</a></code>,
<code><a href="#topic+haldane">haldane</a></code> and others.
</p>
<p>A Haldane-type decompression model describes the diver's body
as a set of independent compartments
connected directly to the breathing gas and governed by classical
diffusion.
</p>
<p>The argument <code>halfT</code> specifies the half-times of the 
nitrogen compartments, in minutes. The length of <code>halfT</code> implicitly
determines the number of nitrogen compartments.
</p>
<p>The argument <code>M0</code>, if present, specifies the surfacing M-values
for the nitrogen compartments. These are the maximum values of
nitrogen tissue tension that are tolerated at the surface.
These values are required in order to plan a no-decompression dive.
</p>
<p>The argument <code>dM</code>, if present, specifies the rate of increase
in nitrogen M-values with pressure. The maximum nitrogen tissue
tension  tolerated at a pressure P atmospheres is <code>M0 + (P-1) * dM</code>.
These values are required in order to plan a decompression dive.
</p>
<p>Optionally the model may also allow calculation with Helium diffusion.
In that case, the argument <code>He</code> should be a list, with
components <code>halfT</code>, <code>M0</code> and <code>dM</code>, specifying the
Helium halftimes, maximum surfacing Helium tensions, and
Helium gradients, respectively.
</p>
<p>If Helium parameters are included, so that diving with
<em>trimix</em> (Oxygen/Nitrogen/Helium mixture) is permitted,
then the model must also specify a rule for combining the
parameters for Helium and Nitrogen to obtain the parameters
for any trimix gas. This rule is specified by the argument <code>mixrule</code>.
Current options are:
</p>

<dl>
<dt><code>"N2"</code></dt><dd>
<p>Ignore the Helium parameters; pretend that Helium is Nitrogen.
Combine Nitrogen and Helium into a single inert gas,
and take the parameters <code>M0</code>, <code>dM</code> for this gas
to be the parameters <code>M0</code>, <code>dM</code> for Nitrogen.
</p>
</dd>
<dt><code>"interpolate"</code></dt><dd>
<p>Apply Buehlmann's (1983, 2002) interpolation rule. Convert the
parameters <code>M0</code>, <code>dM</code> to the Buehlmann parameters
<code>a = M0 - dM</code> and <code>b = 1/dM</code>. For a mixture of
Nitrogen and Helium, calculate the <code>a,b</code> values by
linear interpolation between the values for Nitrogen and Helium
according to the gas fractions. Then convert from <code>a,b</code>
back to <code>M0, dM</code>.
</p>
</dd>
</dl>

<p>The default is <code>mixrule="interpolate"</code> whenever the Helium
parameters are specified.
</p>
<p>Note that this mixture calculation applies only to the saturation
parameters <code>M0</code>, <code>dM</code> which tell us whether a dive is
staying within the no-decompression limits. This mixture calculation
does not affect the Haldane calculations of the gas tensions in the
diver's body.
</p>
<p>The class <code>"hm"</code> has methods for <code>print</code> and
<code>as.data.frame</code>.
</p>


<h3>Value</h3>

<p>An object of class <code>"hm"</code>, representing the decompression model.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>References</h3>

<p>Bookspan, J. (1995) Diving physiology in plain English.
Undersea and Hyperbaric Medicine Society, Kensington, Maryland (USA).
ISBN 0-930406-13-3.
</p>
<p>Boycott, A.E. Damant, G.C.C. and Haldane, J.B. (1908)
The prevention of compressed air illness.
<em>Journal of Hygiene</em> (London) <b>8</b>, 342&ndash;443.
</p>
<p>Brubakk, A.O. and Neuman, T.S. (eds.) (2003)
Bennett and Elliott's Physiology and Medicine of Diving.
5th Edition. Saunders. ISBN 0-7020-2571-2
</p>
<p>Buehlmann, A.A. (1983)
<em>Dekompression - Dekompressionskrankheit</em>.
Springer-Verlag.
</p>
<p>Buehlmann, A.A., Voellm, E.B. and Nussberger, P. (2002)
<em>Tauchmedizin</em>. 5e Auflage. Springer-Verlag.
</p>
<p>Tikvisis, P. and Gerth, W.A. (2003)
Decompression Theory. 
In Brubakk and Neuman (2003), Chapter 10.1, pages 419-454.
</p>
<p>Wienke, B.R. (1994)
<em>Basic diving physics and applications</em>.
Best Publishing Co.
</p>
<p>Workman, R.D. (1965) Calculation of decompression schedules
for nitrogen-oxygen and helium-oxygen dives.
Research Report 6-65. US Navy Experimental Diving Unit.
Washington DC. 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pickmodel">pickmodel</a></code> for some standard models of Haldane type;
<code><a href="#topic+ndl">ndl</a></code>,
<code><a href="#topic+haldane">haldane</a></code>,
<code><a href="#topic+showstates">showstates</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  hm(c(10,20,60), rep(2 * 0.79, 3))
  hm(c(10,20,60), rep(2 * 0.79, 3), rep(2 * 0.79, 3))
  hm(c(10,20,60), rep(2 * 0.79, 3), rep(2 * 0.79, 3),
     He=list(HalfT=c(5,10,30), M0=c(1,1,1), dM=c(1,1,1)))
</code></pre>

<hr>
<h2 id='is.nitrox'>Recognise a Nitrox Gas</h2><span id='topic+is.nitrox'></span>

<h3>Description</h3>

<p>Determines whether a given gas is nitrox.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  is.nitrox(g)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.nitrox_+3A_g">g</code></td>
<td>

<p>An object of class <code>"gas"</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An object of class <code>"gas"</code> represents a breathing gas.
Such objects are required for various calculations in the
<code>scuba</code> library.
</p>
<p>The function <code>is.nitrox</code> expects its argument <code>g</code>
to be a gas object. It returns <code>TRUE</code> if 
<code>g</code> is a nitrox gas (a mixture of oxygen and nitrogen),
and <code>FALSE</code> otherwise.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+nitrox">nitrox</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  v &lt;- nitrox(0.50)
  is.nitrox(v)
  is.nitrox(air)
</code></pre>

<hr>
<h2 id='maxmix'>Optimal Nitrox Mixture For Given Depth</h2><span id='topic+maxmix'></span>

<h3>Description</h3>

<p>Computes the optimal nitrox mixture for a
given maximum depth. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'> maxmix(depth, ppO2max=1.4)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="maxmix_+3A_depth">depth</code></td>
<td>

<p>the maximum depth, in metres
</p>
</td></tr>
<tr><td><code id="maxmix_+3A_ppo2max">ppO2max</code></td>
<td>

<p>maximum permitted partial pressure of oxygen
in atmospheres absolute
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Computes the maximum fraction of oxygen in a nitrox mixture
subject to the constraint that the partial pressure of oxygen
does not exceed <code>ppO2max</code> atmospheres. 
</p>


<h3>Value</h3>

<p>The optimal nitrox mixture. An object of class <code>"gas"</code>.
</p>


<h3>Warnings</h3>

<p>Not applicable to altitude dives. Not applicable to
gas mixtures other than nitrox (oxygen-nitrogen mixtures).
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+mod">mod</a></code>,
<code><a href="#topic+ead">ead</a></code>,
<code><a href="#topic+eadtable">eadtable</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  # 30 metres
  maxmix(30)
</code></pre>

<hr>
<h2 id='Mmix'>
Compute M-values for a Mixture of Inert Gases
</h2><span id='topic+Mmix'></span><span id='topic+M0mix'></span>

<h3>Description</h3>

<p>Computes the maximum tolerated inert gas tension at depth
(M-value) or at the surface (surfacing M-value, <code>M0</code>)
for a given gas.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  M0mix(model, fN2, fHe, mixrule=NULL)

  Mmix(model, depth, fN2, fHe, mixrule=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Mmix_+3A_model">model</code></td>
<td>

<p>The decompression model.
Either an object of class <code>"hm"</code> (see <code><a href="#topic+hm">hm</a></code>)
or a character string giving the name of one of the
existing models (see <code><a href="#topic+pickmodel">pickmodel</a></code>).
</p>
</td></tr>
<tr><td><code id="Mmix_+3A_depth">depth</code></td>
<td>

<p>Numeric value or numeric vector giving the depth or depths
in metres of seawater.
</p>
</td></tr>
<tr><td><code id="Mmix_+3A_fn2">fN2</code></td>
<td>

<p>Fraction of nitrogen in the breathing gas.
Number between 0 and 1.
Alternatively this can be a <code>gas</code> object,
and the values of <code>fN2,fHe</code> will be extracted from it.
</p>
</td></tr>
<tr><td><code id="Mmix_+3A_fhe">fHe</code></td>
<td>

<p>Fraction of helium in the breathing gas.
Number between 0 and 1.
</p>
</td></tr>
<tr><td><code id="Mmix_+3A_mixrule">mixrule</code></td>
<td>

<p>Optional string specifying the mixture rule:
either <code>"N2"</code> or <code>"interpolate"</code>.
See Details.
If this argument is absent, the mixture rule
is taken from the <code>model</code>. If this argument is present,
it overrides the mixture rule in <code>model</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>M0mix</code> computes the maximum tolerated inert gas tension,
in each tissue compartment, for a diver returning to the surface
(known as the surfacing M-value <code>M0</code>). This is used for
planning no-decompression dives.
</p>
<p><code>Mmix</code> computes the maximum tolerated inert gas tension,
in each tissue compartment, for a diver at a specified depth,
called the M-value. This is used for planning decompression dives.
</p>
<p>A Haldane-type decompression model only specifies
these M-values for a single inert gas (i.e. only nitrogen
or only helium). When the breathing gas is trimix,
the inert gas is a mixture of nitrogen and helium, and 
the M-values for nitrogen and helium must somehow be combined
to obtain M-values relevant to the mixed gas. 
</p>
<p>The rule for combining the M-values is specified
by the argument <code>mixrule</code>. Current options are:
</p>

<dl>
<dt><code>"N2"</code></dt><dd>
<p>Ignore the Helium parameters; pretend that Helium is Nitrogen.
Combine Nitrogen and Helium into a single inert gas,
and take the parameters <code>M0</code>, <code>dM</code> for this gas
to be the parameters <code>M0</code>, <code>dM</code> for Nitrogen.
</p>
</dd>
<dt><code>"interpolate"</code></dt><dd>
<p>Apply Buehlmann's (1983, 2002) interpolation rule. Convert the
parameters <code>M0</code>, <code>dM</code> to the Buehlmann parameters
<code>a = M0 - dM</code> and <code>b = 1/dM</code>. For a mixture of
Nitrogen and Helium, calculate the <code>a,b</code> values by
linear interpolation between the values for Nitrogen and Helium
according to the gas fractions. Then convert from <code>a,b</code>
back to <code>M0, dM</code>.
</p>
</dd>
</dl>

<p>If the argument <code>mixrule</code> is missing or <code>NULL</code>, then the
default mixture rule is taken from the <code>model</code>
(since every Haldane model has a mixture rule,
as explained in <code><a href="#topic+hm">hm</a></code>).
</p>


<h3>Value</h3>

<p>A matrix, with one column for each compartment in the model,
and one row for each entry of <code>fN2</code> (and <code>fHe</code> and
<code>depth</code>).
Entries in the matrix are M-values in atmospheres absolute (ata).
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+hm">hm</a></code>, 
<code><a href="#topic+pickmodel">pickmodel</a></code> for specifying models.
</p>
<p><code><a href="#topic+haldane">haldane</a></code> for computing tissue saturations.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  # Trimix 18/50, surfacing M-values
  M0mix("Z", trimix(0.18, 0.5))

  # Trimix 18/50, M-values at 0, 10, 20 metres
  Mmix("Z", c(0,10,20), trimix(0.18, 0.5))
</code></pre>

<hr>
<h2 id='mod'>Maximum Operating Depth</h2><span id='topic+mod'></span>

<h3>Description</h3>

<p>Computes the Maximum Operating Depth for a given
gas mixture.
</p>


<h3>Usage</h3>

<pre><code class='language-R'> mod(g, ppO2max=1.4)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mod_+3A_g">g</code></td>
<td>

<p>Breathing gas. An object of class <code>"gas"</code> or a number
giving the fraction (between 0 and 1) of oxygen in a
nitrox mixture. 
</p>
</td></tr>
<tr><td><code id="mod_+3A_ppo2max">ppO2max</code></td>
<td>

<p>maximum permitted partial pressure of oxygen
in atmospheres absolute
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Computes the maximum depth at which the
partial pressure of oxygen does not exceed <code>ppO2max</code>.
</p>


<h3>Value</h3>

<p>The maximum operating depth for this gas.
</p>


<h3>Warnings</h3>

<p>Not applicable to altitude dives. Does not check whether the
gas would be hypoxic at the surface.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+ead">ead</a></code>,
<code><a href="#topic+eadtable">eadtable</a></code>,
<code><a href="#topic+maxmix">maxmix</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  # Nitrox I (32% oxygen) 
  mod(0.32)
  # Nitrox II (36% oxygen) 
  mod(nitrox(0.36))
  # Trimix 15/50
  mod(trimix(0.15, 0.5))
</code></pre>

<hr>
<h2 id='ndl'>No-Decompression Limit</h2><span id='topic+ndl'></span>

<h3>Description</h3>

<p>Compute the No-Decompression Limit (NDL) for a dive 
to a specified depth, under a Haldane-type
decompression model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ndl(depth, g=air, prevstate=NULL, model = "DSAT")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ndl_+3A_depth">depth</code></td>
<td>

<p>Depth (in metres) for which the NDL should be computed.
A single number or a numeric vector.
</p>
</td></tr>
<tr><td><code id="ndl_+3A_g">g</code></td>
<td>

<p>Breathing gas for the dive. An object of class <code>"gas"</code>.
</p>
</td></tr>
<tr><td><code id="ndl_+3A_prevstate">prevstate</code></td>
<td>

<p>Optional. Initial state of the diver.
A data frame containing the tissue saturations 
for each tissue compartment in the model, at the start of the dive.
Defaults to the state of a diver with no previous dive history.
</p>
</td></tr>
<tr><td><code id="ndl_+3A_model">model</code></td>
<td>

<p>The decompression model. Either an object of class <code>"hm"</code>,
or a character string giving the name of one of the standard
Haldane-type models. Options are <code>"DSAT"</code>,
<code>"USN"</code>, <code>"Workman"</code> and <code>"ZH-L16A"</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The No-Decompression Limit (NDL) for a given depth <code class="reqn">d</code> is the
maximum duration of a No-Decompression dive to depth <code class="reqn">d</code>.
</p>
<p>A No-Decompression dive is one which can (theoretically) be aborted
at any time without requiring staged decompression.
Equivalently, in a No-Decompression Dive, the Nitrogen saturation
in each of the diver's tissue
compartments never exceeds the maximum Nitrogen saturation
tolerated at sea level
(known as the surfacing M-value for that compartment).
</p>
<p>This algorithm computes the NDL for a dive to the given depth,
or for several possible alternative dives to the given depths,
based on the specified decompression
model. The NDL is determined by the halftimes and the surfacing
M-values for all the compartments in the model.
</p>
<p>If the breathing gas <code>g</code> contains Helium, then <code>model</code>
must include compartments for Helium. Similar calculations apply in
this case.
</p>
<p>The argument <code>prevstate</code> represents the tissue saturation of the
diver at the start of the dive. It should be a data frame, with one row for
each compartment of the decompression model, and one column for each
inert gas (<code>N2</code> and/or <code>He</code>). Such data frames
are usually generated by <code><a href="#topic+saturated.state">saturated.state</a></code> or
<code><a href="#topic+haldane">haldane</a></code>.
</p>


<h3>Value</h3>

<p>Numeric vector, of the same length as <code>depth</code>,
giving the No-Decompression Limit in minutes for each depth.
Infinite values are possible.
</p>
<p>The value also has an attribute called <code>"controlling"</code> which
identifies the controlling tissue (the tissue for which the M-value
is reached).
</p>


<h3>Warning</h3>

<p><b>This is not intended for use as a scuba diving table!</b>
The NDL calculated here is not the same as the NDL indicated in any
published scuba diving table. For example,
the NDL calculated by this algorithm
using the halftimes and M-values of the DSAT model,
may be longer than the NDL published in the DSAT Recreational Dive Planner.
Infinite values of NDL may be returned in some cases.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+scuba.disclaimer">scuba.disclaimer</a></code>,
<code><a href="#topic+haldane">haldane</a></code>,
<code><a href="#topic+showstates">showstates</a></code>,
<code><a href="#topic+saturated.state">saturated.state</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  # NDL for a dive to 15 metres
  ndl(15)

  # NDL for a dive to 24 metres on EANx 32
  ndl(15, g=nitrox(0.32))

  # NDL for a dive to 60 metres on Trimix 15/50 under ZH-L16A model
  ndl(70, g=trimix(0.15, 0.5), model="Z")

  # NDL for a repetitive dive on air to 15 metres, following an 
  # 18-minute air dive to 30 metres and half-hour surface interval
  firstdive &lt;- dive(c(30,18), c(5,3), c(0,30))
  ndl(15, prevstate=haldane(firstdive))
</code></pre>

<hr>
<h2 id='nitrox'>Nitrox Mixture</h2><span id='topic+nitrox'></span>

<h3>Description</h3>

<p>Create a Nitrox gas mixture.
</p>


<h3>Usage</h3>

<pre><code class='language-R'> nitrox(fO2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nitrox_+3A_fo2">fO2</code></td>
<td>

<p>Fraction (between 0 and 1) of oxygen in the
nitrox mixture. 
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An object of class <code>"gas"</code> represents a breathing gas.
Such objects are required for various calculations in the
<code>scuba</code> library.
</p>
<p>The value returned by <code>nitrox</code> represents Nitrox
(oxygen-nitrogen mixture) with the fraction of oxygen
specified by the argument <code>fO2</code>.
</p>
<p>For the standard Nitrox calculations, see <code><a href="#topic+ead">ead</a></code>
and <code><a href="#topic+mod">mod</a></code>.
To determine whether a gas is nitrox, use <code><a href="#topic+is.nitrox">is.nitrox</a></code>.
</p>
<p>There are methods for <code>print</code> and <code>summary</code>
for objects of class <code>"gas"</code>.
</p>


<h3>Value</h3>

<p>An object of class <code>"gas"</code> representing
Nitrox with the specified fraction of oxygen.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+dive">dive</a></code>,
<code><a href="#topic+ead">ead</a></code>,
<code><a href="#topic+mod">mod</a></code>,
<code><a href="#topic+air">air</a></code>,
<code><a href="#topic+is.nitrox">is.nitrox</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  # Nitrox I (32% oxygen) 
  nitrox(0.32)
  # Nitrox II (36% oxygen)
  nitrox(0.36)
  #
  g &lt;- nitrox(0.50)
  is.nitrox(g)
</code></pre>

<hr>
<h2 id='oxtox'>Pulmonary Oxygen Toxicity</h2><span id='topic+oxtox'></span>

<h3>Description</h3>

<p>Computes pulmonary oxygen toxicity dose for a given
dive profile and breathing gas.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  oxtox(d, progressive=FALSE, warn=TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="oxtox_+3A_d">d</code></td>
<td>

<p>The dive profile. An object of class <code>"dive"</code>.
</p>
</td></tr>
<tr><td><code id="oxtox_+3A_progressive">progressive</code></td>
<td>

<p>Logical flag. If <code>FALSE</code>, the total oxygen toxicity from the
dive is calculated. If <code>TRUE</code>, the cumulative oxygen toxicity
at each time point during the dive is calculated.
</p>
</td></tr>
<tr><td><code id="oxtox_+3A_warn">warn</code></td>
<td>

<p>Logical flag indicating whether to issue a warning
if the partial pressure of oxygen exceeds
a threshold (1.4, 1.5 or 1.6 ata).
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Computes the total dose of pulmonary oxygen toxicity
from the given dive profile, by
</p>
<p style="text-align: center;"><code class="reqn">
    \int_0^T \left( \frac{\mbox{ppO}_2 - 0.5}{0.5} \right)^{0.83} \; dt
  </code>
</p>

<p>The maximum tolerable dose per day is usually reckoned as 1500
OTU. Allowing 650 OTU for recompression therapy implies a working
maximum of 850 OTU per day. 
</p>


<h3>Value</h3>

<p>If <code>progressive=FALSE</code>, a single numeric value,
the total pulmonary oxygen toxicity dose in OTU.
</p>
<p>If <code>progressive=TRUE</code>, a numeric vector containing the 
cumulative pulmonary oxygen toxicity dose in OTU at each
time point during the dive. The corresponding time points can be
extracted by <code><a href="#topic+times.dive">times.dive</a></code>.
</p>


<h3>Warnings</h3>

<p>Not applicable to altitude dives. 
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>References</h3>

<p>Bookspan, J. (1995) Diving physiology in plain English.
Undersea and Hyperbaric Medicine Society, Kensington, Maryland (USA).
ISBN 0-930406-13-3.
</p>
<p>Brubakk, A.O. and Neuman, T.S. (eds.) (2003)
Bennett and Elliott's Physiology and Medicine of Diving.
5th Edition. Saunders. ISBN 0-7020-2571-2
</p>
<p>Buehlmann, A.A., Voellm, E.B. and Nussberger, P. (2002)
<em>Tauchmedizin</em>. 5e Auflage. Springer-Verlag.
</p>
<p>Wienke, B.R. (1994)
<em>Basic diving physics and applications</em>.
Best Publishing Co.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ppO2">ppO2</a></code>,
<code><a href="#topic+ead">ead</a></code>,  <code><a href="#topic+eadtable">eadtable</a></code>,
<code><a href="#topic+mod">mod</a></code>,
<code><a href="#topic+maxmix">maxmix</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  # Nitrox II (36% oxygen) at 30 metres for 27 minutes
  d &lt;- dive(nitrox(0.36), c(30,27))
  oxtox(d)

  # Same as above, followed by safety stop on 100% oxygen 
  d &lt;- dive(nitrox(0.36), c(30,27),5, nitrox(1), c(5,5))
  oxtox(d)
</code></pre>

<hr>
<h2 id='param'>Extract parameters from Haldane model</h2><span id='topic+param'></span>

<h3>Description</h3>

<p>Extracts the tissue compartment parameters from a Haldane type
decompression model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  param(model, species = "N2", what = "HalfT")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="param_+3A_model">model</code></td>
<td>

<p>The decompression model. An object of class <code>"hm"</code>.
</p>
</td></tr>
<tr><td><code id="param_+3A_species">species</code></td>
<td>

<p>Character string.
The inert gas for which parameters are required:
<code>"N2"</code> for nitrogen or <code>"He"</code> for helium.
</p>
</td></tr>
<tr><td><code id="param_+3A_what">what</code></td>
<td>

<p>Character string.
The parameter required: <code>"HalfT"</code> for half-times,
<code>"M0"</code> for surfacing M-values, or
<code>"dM"</code> for slopes of M-values.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This command extracts the tissue compartment parameters
from a Haldane-type decompression model.
</p>
<p>The argument <code>model</code> should be an object of class <code>"hm"</code>
(created by <code><a href="#topic+hm">hm</a></code> or obtained using
<code><a href="#topic+pickmodel">pickmodel</a></code>).
</p>
<p>See <code><a href="#topic+hm">hm</a></code> for explanation of the parameters.
</p>


<h3>Value</h3>

<p>A vector containing the values of the specified parameter for
each tissue compartment. If the model does not contain this data,
<code>NULL</code> is returned.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+hm">hm</a></code>, 
<code><a href="#topic+pickmodel">pickmodel</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   # halftimes for the DSAT model
   param(pickmodel("DSAT"), "N2", "HalfT")
</code></pre>

<hr>
<h2 id='pedro'>
Real Scuba Dive Profiles
</h2><span id='topic+pedro'></span><span id='topic+pedro902'></span><span id='topic+pedro903'></span><span id='topic+pedro904'></span><span id='topic+pedro922'></span><span id='topic+pedro943'></span><span id='topic+pedro944'></span><span id='topic+pedro945'></span><span id='topic+pedro946'></span><span id='topic+pedro948'></span><span id='topic+pedro949'></span><span id='topic+pedro950'></span>

<h3>Description</h3>

<p>Dive profiles for 11 different scuba dives.
</p>


<h3>Format</h3>

<p>Each of the datasets <code>pedro902</code>, 
<code>pedro903</code>, etc, is an object of class <code>"dive"</code>.
</p>


<h3>Details</h3>

<p>The command <code>data(pedro)</code>
gives access to 11 datasets named
<code>pedro902</code>, 
<code>pedro903</code>, 
<code>pedro904</code>, 
<code>pedro922</code>, 
<code>pedro943</code>, 
<code>pedro944</code>, 
<code>pedro945</code>, 
<code>pedro946</code>, 
<code>pedro948</code>, 
<code>pedro949</code> and
<code>pedro950</code>. These are the dive profiles for 11 real scuba dives,
uploaded from a dive computer.
</p>
<p>Each of the datasets is an object of class <code>"dive"</code>
containing the dive profile for one dive. 
It can be plotted and printed (using <code><a href="#topic+plot.dive">plot.dive</a></code>
and <code><a href="#topic+print.dive">print.dive</a></code>). The nitrogen saturation can be
computed using <code><a href="#topic+haldane">haldane</a></code> and the
cumulative oxygen toxicity using <code><a href="#topic+oxtox">oxtox</a></code>.
</p>
<p>The dives were conducted by Pedro Antonio Neves. Details are
as follows:
</p>

<table>
<tr>
 <td style="text-align: left;">
    <em>Dive</em> </td><td style="text-align: left;"> <em>Max depth</em> </td><td style="text-align: left;"> <em>Gases</em> </td><td style="text-align: left;"> <em>Type</em>
    </td><td style="text-align: left;"> <em>Location</em>
    </td>
</tr>
<tr>
 <td style="text-align: left;">
    902 </td><td style="text-align: left;"> 19 m </td><td style="text-align: left;"> EAN 32 </td><td style="text-align: left;"> single </td><td style="text-align: left;"> Armacao de Pera, Portugal</td>
</tr>
<tr>
 <td style="text-align: left;">
    903 </td><td style="text-align: left;"> 27 m </td><td style="text-align: left;"> EAN 32 </td><td style="text-align: left;"> single </td><td style="text-align: left;"> Farilhoes, Portugal</td>
</tr>
<tr>
 <td style="text-align: left;">
    904 </td><td style="text-align: left;"> 30 m </td><td style="text-align: left;"> EAN 32 </td><td style="text-align: left;"> single </td><td style="text-align: left;"> Berlenga, Portugal</td>
</tr>
<tr>
 <td style="text-align: left;">
    922 </td><td style="text-align: left;"> 15 m </td><td style="text-align: left;"> EAN 32 </td><td style="text-align: left;"> multiple </td><td style="text-align: left;"> Sines, Portugal</td>
</tr>
<tr>
 <td style="text-align: left;">
    943 </td><td style="text-align: left;"> 21 m </td><td style="text-align: left;"> EAN 32 </td><td style="text-align: left;"> single </td><td style="text-align: left;"> Armacao de Pera, Portugal</td>
</tr>
<tr>
 <td style="text-align: left;">
    944 </td><td style="text-align: left;"> 19 m </td><td style="text-align: left;"> EAN 32 </td><td style="text-align: left;"> single </td><td style="text-align: left;"> Armacao de Pera, Portugal</td>
</tr>
<tr>
 <td style="text-align: left;">
    945 </td><td style="text-align: left;"> 22 m </td><td style="text-align: left;"> EAN 32 </td><td style="text-align: left;"> single </td><td style="text-align: left;"> Armacao de Pera, Portugal</td>
</tr>
<tr>
 <td style="text-align: left;">
    946 </td><td style="text-align: left;"> 20 m </td><td style="text-align: left;"> EAN 32 </td><td style="text-align: left;"> single </td><td style="text-align: left;"> Armacao de Pera, Portugal</td>
</tr>
<tr>
 <td style="text-align: left;">
    949 </td><td style="text-align: left;"> 16 m </td><td style="text-align: left;"> EAN 32 </td><td style="text-align: left;"> single </td><td style="text-align: left;"> Finisterra,Galicia,Spain</td>
</tr>
<tr>
 <td style="text-align: left;">
    950 </td><td style="text-align: left;"> 40 m </td><td style="text-align: left;"> EAN 50, Trimix </td><td style="text-align: left;"> single </td><td style="text-align: left;"> Finisterra,Galicia,Spain
  </td>
</tr>

</table>

<p>All dives were conducted on Nitrox 32, except <code>pedro950</code> which was
conducted using Trimix 18/45 and Nitrox 50.
All dive profiles consist of a single descent and ascent,
except for <code>pedro922</code> which consists of 5 short bounce dives separated
by short surface intervals. 
</p>


<h3>Source</h3>

<p>Pedro Antonio Neves
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   data(pedro)
   summary(pedro950)
   plot(pedro950)
</code></pre>

<hr>
<h2 id='pickmodel'>Standard Decompression Models</h2><span id='topic+pickmodel'></span>

<h3>Description</h3>

<p>Selects one of a list of standard Haldane-type
decompression models, identified by the name of the model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pickmodel(model)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pickmodel_+3A_model">model</code></td>
<td>
<p>The name of the model. A character string.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A Haldane-type decompression model describes the diver's body
as a set of independent compartments connected directly to the
breathing gas and governed by classical diffusion. 
</p>
<p>This function is a convenient way to select one of the
commonly used decompression models of Haldane type.
</p>
<p>The argument <code>model</code> is partially matched to
one of the following:
</p>

<dl>
<dt>&quot;Haldane&quot;</dt><dd>
<p>The original Haldane (1908) model
with 5 compartments.
</p>
</dd>
<dt>&quot;USN&quot;</dt><dd>
<p>The first model used by the US Navy,
with 6 compartments.
</p>
</dd>
<dt>&quot;DSAT&quot;</dt><dd>
<p>The DSAT model, with 8 compartments,
underlying the PADI recreational
dive planner tables.
</p>
</dd>
<dt>&quot;Workman65&quot;</dt><dd>
<p>The model of Workman (1965) with 9 compartments.
</p>
</dd>
<dt>&quot;ZH-L16A&quot;</dt><dd>
<p>The &lsquo;theoretical&rsquo; model ZH-L16A of Buehlmann
with 17 compartments.
</p>
</dd>
</dl>

<p>The result is an object (of class <code>"hm"</code>)
in the format required for use by commands such as
<code><a href="#topic+haldane">haldane</a></code>, <code><a href="#topic+ndl">ndl</a></code> and <code><a href="#topic+showstates">showstates</a></code>.
</p>
<p>The data for the USN and Haldane models are taken from
Wienke (1994), page 127 ff. The DSAT model is
taken from   Bookspan (1995), pp 16 and 23.
The Workman 65 model is taken from
Tikvisis and Gerth (2003), Table 10.1.1, page 440.
The ZH-L16A parameters
were taken from Buehlmann et al (2002) Table 25, page 158.
</p>


<h3>Value</h3>

<p>An object of class <code>"hm"</code> representing a Haldane-type
decompression model.
</p>


<h3>Note</h3>

<p>If the argument <code>model</code> is missing, then the list of available
options for <code>model</code> is printed.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>References</h3>

<p>Bookspan, J. (1995) Diving physiology in plain English.
Undersea and Hyperbaric Medicine Society, Kensington, Maryland (USA).
ISBN 0-930406-13-3.
</p>
<p>Boycott, A.E. Damant, G.C.C. and Haldane, J.B. (1908)
The prevention of compressed air illness.
<em>Journal of Hygiene</em> (London) <b>8</b>, 342&ndash;443.
</p>
<p>Brubakk, A.O. and Neuman, T.S. (eds.) (2003)
Bennett and Elliott's Physiology and Medicine of Diving.
5th Edition. Saunders. ISBN 0-7020-2571-2
</p>
<p>Buehlmann, A.A. (1983)
<em>Dekompression - Dekompressionskrankheit</em>.
Springer-Verlag.
</p>
<p>Buehlmann, A.A., Voellm, E.B. and Nussberger, P. (2002)
<em>Tauchmedizin</em>. 5e Auflage. Springer-Verlag.
</p>
<p>Tikvisis, P. and Gerth, W.A. (2003)
Decompression Theory. 
In Brubakk and Neuman (2003), Chapter 10.1, pages 419-454.
</p>
<p>Wienke, B.R. (1994)
<em>Basic diving physics and applications</em>.
Best Publishing Co.
</p>
<p>Workman, R.D. (1965) Calculation of decompression schedules
for nitrogen-oxygen and helium-oxygen dives.
Research Report 6-65. US Navy Experimental Diving Unit.
Washington DC. 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ndl">ndl</a></code>,
<code><a href="#topic+haldane">haldane</a></code>,
<code><a href="#topic+showstates">showstates</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   pickmodel("Z")
   ndl(30, model=pickmodel("Z"))
</code></pre>

<hr>
<h2 id='plot.dive'>Plot a Dive Profile</h2><span id='topic+plot.dive'></span>

<h3>Description</h3>

<p>Plot a dive profile.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  ## S3 method for class 'dive'
plot(x, ..., main=deparse(substitute(x)),
                        key.gases=c("text", "legend", "none"),
                        text.cex=1,
                        text.verticals=TRUE,
                        col.gases=1:length(tanklist(x)),
                        legendpos=c("top","bottom", "left", "right",
                        "topleft", "topright", "bottomleft", "bottomright",
                        "center"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.dive_+3A_x">x</code></td>
<td>

<p>The dive profile. An object of class <code>"dive"</code>
created by <code><a href="#topic+dive">dive</a></code>. 
</p>
</td></tr>
<tr><td><code id="plot.dive_+3A_...">...</code></td>
<td>

<p>Arguments passed to <code><a href="graphics.html#topic+plot.default">plot.default</a></code>.
</p>
</td></tr>
<tr><td><code id="plot.dive_+3A_main">main</code></td>
<td>

<p>Overall label for plot. 
</p>
</td></tr>
<tr><td><code id="plot.dive_+3A_key.gases">key.gases</code></td>
<td>

<p>String indicating whether the plot should be annotated with labels
indicating what gas is breathed, and how to do the annotation.
</p>
</td></tr>
<tr><td><code id="plot.dive_+3A_text.cex">text.cex</code></td>
<td>

<p>Numeric value controlling the size of text when <code>key.gases="text"</code>.
</p>
</td></tr>
<tr><td><code id="plot.dive_+3A_text.verticals">text.verticals</code></td>
<td>

<p>Logical flag indicating whether the plot should
indicate what gas is breathed during ascent and descent
between stages, as well as during the main stages of the dive.
</p>
</td></tr>
<tr><td><code id="plot.dive_+3A_col.gases">col.gases</code></td>
<td>

<p>Colours to be used to represent each of the breathing gases
used in the dive. Either a numeric vector of colour codes,
or a vector of character strings identifying colours.
</p>
</td></tr>
<tr><td><code id="plot.dive_+3A_legendpos">legendpos</code></td>
<td>

<p>Character string determining the position of the
legend, when <code>key.gases="legend"</code>. Default is <code>"top"</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A representation of the dive profile is plotted.
</p>


<h3>Value</h3>

<p>NULL.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+dive">dive</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  # Dive to 25 m for 20 min with safety stop
  d1 &lt;- dive(c(25,20),c(5,5))
  # plot it
  plot.dive(d1)
  # Dive to 18 m for 30 min with safety stop, on Nitrox EANx 36
  d3 &lt;- dive(nitrox(0.36), c(18,30), c(5,3))
  plot.dive(d3)
  # Real dive profile
  data(baron)
  d4 &lt;- dive(nitrox(0.30), baron[, 1:2])
  plot(d4, main="Baron Gautsch dive")
</code></pre>

<hr>
<h2 id='ppO2'>Oxygen Partial Pressures</h2><span id='topic+ppO2'></span>

<h3>Description</h3>

<p>Computes the partial pressure of oxygen at each stage during a dive.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  ppO2(d)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ppO2_+3A_d">d</code></td>
<td>

<p>The dive profile. An object of class <code>"dive"</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function computes the partial pressure of oxygen at each stage of the
dive profile. The result is a data frame with two columns: <code>time</code>
giving the elapsed time, and <code>ppO2</code> giving the partial pressure
of oxygen (in atmospheres) in the current breathing gas at the current depth.
</p>


<h3>Value</h3>

<p>A data frame with columns <code>time</code> and <code>ppO2</code>.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+oxtox">oxtox</a></code>,  <code><a href="#topic+ead">ead</a></code>,
<code><a href="#topic+mod">mod</a></code>,
<code><a href="#topic+maxmix">maxmix</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  data(pedro)
  plot(ppO2(pedro902), type="l")
</code></pre>

<hr>
<h2 id='print.dive'>Print a Dive Profile</h2><span id='topic+print.dive'></span>

<h3>Description</h3>

<p>Print a dive profile.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  ## S3 method for class 'dive'
print(x, ..., seconds=TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.dive_+3A_x">x</code></td>
<td>

<p>The dive profile. An object of class <code>"dive"</code>
created by <code><a href="#topic+dive">dive</a></code>. 
</p>
</td></tr>
<tr><td><code id="print.dive_+3A_...">...</code></td>
<td>

<p>Arguments passed to <code><a href="base.html#topic+print.default">print.default</a></code>.
</p>
</td></tr>
<tr><td><code id="print.dive_+3A_seconds">seconds</code></td>
<td>

<p>Flag indicating whether to print elapsed time to the
nearest second (if <code>TRUE</code>) or to the nearest minute (if <code>FALSE</code>).
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A representation of the dive profile is printed.
</p>


<h3>Value</h3>

<p>NULL.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+dive">dive</a></code>,
<code><a href="#topic+plot.dive">plot.dive</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  # Dive to 25 m for 20 min with safety stop
  dive(c(25,20),c(5,5))
  # Dive to 18 m for 30 min with safety stop, on Nitrox EANx 36
  dive(nitrox(0.36), c(18,30), c(5,3))
</code></pre>

<hr>
<h2 id='saturated.state'>Saturated Tissue State</h2><span id='topic+saturated.state'></span>

<h3>Description</h3>

<p>Computes the amount of inert gas in each compartment of a diver
who has reached equilibrium with the breathing gas
at the specified depth.
The default is a fresh diver with no diving history.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saturated.state(model="D", depth = 0, g = air)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="saturated.state_+3A_model">model</code></td>
<td>

<p>The decompression model. An object of class <code>"hm"</code>.
Defaults to the DSAT (PADI) model.
</p>
</td></tr>
<tr><td><code id="saturated.state_+3A_depth">depth</code></td>
<td>

<p>The diving depth at which saturation is achieved.
A single number.
</p>
</td></tr>
<tr><td><code id="saturated.state_+3A_g">g</code></td>
<td>

<p>The breathing gas. An object of class <code>"gas"</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A Haldane-type decompression model describes the diver's body
as a set of independent compartments
connected directly to the breathing gas and governed by classical
diffusion.
</p>
<p>This command computes the amount of inert gas in each compartment of a diver
who has reached equilibrium with the breathing gas
at the specified depth. 
</p>
<p>The default is a fresh diver (in equilibrium with air at the surface
at sea level).
</p>


<h3>Value</h3>

<p>A data frame, with one row for each compartment of the model,
and one column for each inert gas in the model (<code>N2</code> and/or
<code>He</code>). Entries in the data frame are tissue tensions in ata.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+hm">hm</a></code>,
<code><a href="#topic+haldane">haldane</a></code>,
<code><a href="#topic+nitrox">nitrox</a></code>,
<code><a href="#topic+trimix">trimix</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  fresh &lt;- saturated.state()
  deep  &lt;- saturated.state("ZH", 80, trimix(0.15, 0.5))
</code></pre>

<hr>
<h2 id='scuba-internal'>Internal scuba functions</h2><span id='topic+allspecies'></span><span id='topic+as.character.gas'></span><span id='topic+as.data.frame.hm'></span><span id='topic+capable'></span><span id='topic+conform'></span><span id='topic+dive.segment'></span><span id='topic+is.dive'></span><span id='topic+is.gas'></span><span id='topic+is.rate'></span><span id='topic+gasnames'></span><span id='topic+print.gas'></span><span id='topic+print.hm'></span><span id='topic+print.rate'></span><span id='topic+print.summary.dive'></span><span id='topic+print.summary.gas'></span><span id='topic+print.summary.hm'></span><span id='topic+rate'></span><span id='topic+reconcile.df'></span><span id='topic+resolve.defaults'></span><span id='topic+summary.dive'></span><span id='topic+summary.gas'></span><span id='topic+summary.hm'></span><span id='topic+timetaken'></span>

<h3>Description</h3>

<p>Internal scuba functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>allspecies(d, inert)
## S3 method for class 'gas'
as.character(x, ...)
## S3 method for class 'hm'
as.data.frame(x, ...)
capable(model, g, what)
conform(state, model)
dive.segment(d, i)
is.dive(x)
is.gas(x)
is.rate(x)
gasnames(fO2, fN2=1-fO2, fHe=1 - fO2 - fN2, ..., full=FALSE)
## S3 method for class 'gas'
print(x, ...)
## S3 method for class 'hm'
print(x, ...)
## S3 method for class 'rate'
print(x, ...)
## S3 method for class 'summary.dive'
print(x, ...)
## S3 method for class 'summary.gas'
print(x, ...)
## S3 method for class 'summary.hm'
print(x, ...)
rate(speed, time, up)
reconcile.df(df, tanks)
resolve.defaults(...)
## S3 method for class 'dive'
summary(object, ...)
## S3 method for class 'gas'
summary(object, ...)
## S3 method for class 'hm'
summary(object, ...)
timetaken(start, finish, uprate, downrate)
</code></pre>


<h3>Details</h3>

<p>Not yet documented.
</p>

<hr>
<h2 id='scuba.constants'>Constants for Use in Scuba Package</h2><span id='topic+scuba.constants'></span>

<h3>Description</h3>

<p>A list of various useful physical constants
needed in calculations in the scuba package.
</p>


<h3>Format</h3>

<p><code>scuba.constants</code> is a list containing the following entries:
</p>

<table>
<tr>
 <td style="text-align: left;">
    <code>fsw.per.atm</code> </td><td style="text-align: left;"> factor to convert atm (atmospheres absolute) </td>
</tr>
<tr>
 <td style="text-align: left;">
                       </td><td style="text-align: left;"> to fsw (feet of seawater) </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>fO2air</code> </td><td style="text-align: left;"> the fraction of oxygen in dry air at 25 C</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>fN2air</code> </td><td style="text-align: left;"> the fraction of <em>nitrogen plus argon</em>
    in dry air at 25 C
  </td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>

<hr>
<h2 id='scuba.disclaimer'>
Disclaimer for Scuba Library
</h2><span id='topic+scuba.disclaimer'></span>

<h3>Description</h3>

<p>This page contains important warnings.
</p>


<h3>Details</h3>

<p>The <code>scuba</code> software library is intended
for use in research and education about the mathematical
and statistical basis of decompression theory. It is
not designed for actual use in scuba diving and related activities.
It is emphatically not suitable for use in actual diving.
</p>
<p>Scuba diving is a dangerous activity with inherent risks of
death and serious injury. No-one should attempt scuba diving
without professional training, certification, supervision and
regular medical assessment.
</p>
<p>It is also dangerous for trained scuba divers to exceed the
limitations of their training. Diving at altitudes above sea level,
and breathing mixed gases other than air, carry increased risk and
additional types of risk. Divers should seek additional, professional
training and certification for such activities. 
</p>
<p>This software is not suitable for use in actual scuba diving.
The software will yield numerical results for any diving activity,
without giving any warning if the activity would be dangerous or fatal.
Each function in the <code>scuba</code> library calculates
the predictions of one theoretical model (a law of physics,
a decompression model or another empirical relationship).
In doing so, it does not take account of safety restrictions,
other physical laws, or other important information.
</p>
<p>The software is provided for academic interest only.
It should not be used to generate diving tables or protocols
related to diving. No output from this software should be misconstrued as
a diving table. Only persons qualified to supervise diving
activities or qualified in hyperbaric medicine should attempt to
design diving tables. Although existing published diving tables are
based on theoretical models, such tables have been extensively
field-tested and modified before approval. Existing tables are more
conservative than the models from which they were originally derived.
</p>
<p>The author does not warrant that the software is correct
in any sense whatsoever. Even if correctly computed,
the predictions of a theoretical physical model may not be correct
predictions. 
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>

<hr>
<h2 id='showstates'>Interactive Display of Diver Saturation</h2><span id='topic+showstates'></span>

<h3>Description</h3>

<p>Plots a dive profile and interactively displays the diver's nitrogen
saturation state at any intermediate stage indicated by the mouse.
</p>


<h3>Usage</h3>

<pre><code class='language-R'> showstates(d, model="DSAT", relative=TRUE, deco=FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="showstates_+3A_d">d</code></td>
<td>

<p>The dive. An object of class <code>"dive"</code>.
</p>
</td></tr>
<tr><td><code id="showstates_+3A_model">model</code></td>
<td>

<p>The decompression model. Either an object of class <code>"hm"</code>
or a character string identifying a model.
</p>
</td></tr>
<tr><td><code id="showstates_+3A_relative">relative</code></td>
<td>

<p>Logical flag indicating whether to compute relative tissue
saturations. If <code>FALSE</code>, tissue saturations are expressed
as absolute pressures in atmospheres absolute (ata).
If <code>TRUE</code> (the default),
the tissue saturation for each
compartment is expressed as a fraction of the surfacing M-value
for the compartment. (Alternatively if <code>deco=TRUE</code> then tissue
saturation is expressed as a fraction of the M-value at current depth.)
</p>
</td></tr>
<tr><td><code id="showstates_+3A_deco">deco</code></td>
<td>

<p>Logical flag indicating whether to calculate relative saturations
for a decompression dive.
If <code>deco=FALSE</code>, then relative tissue saturations
are computed by dividing the absolute tissue saturation by the
surfacing M-value, as appropriate for a no-decompression dive.
If <code>deco=TRUE</code>, then relative tissue saturations are computed
by dividing the absolute tissue saturation by the M-value at the
current depth, as appropriate for a decompression dive.
This argument applies only when <code>relative=TRUE</code>.
</p>
</td></tr>
<tr><td><code id="showstates_+3A_...">...</code></td>
<td>

<p>Arguments passed to <code><a href="#topic+plot.dive">plot.dive</a></code> to control the plot
of the dive profile.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An object of class <code>"dive"</code> represents a scuba dive.
It is created by the command <code><a href="#topic+dive">dive</a></code>.
</p>
<p>This function plots the dive using <code><a href="#topic+plot.dive">plot.dive</a></code>
then waits for the user to click on the plot. This click selects
a time during the dive. The algorithm computes the nitrogen tensions
in the tissues at the indicated time, using <code><a href="#topic+haldane">haldane</a></code>,
and plots them as a bar graph. The cumulative oxygen toxicity is also
computed using <code><a href="#topic+oxtox">oxtox</a></code>.
</p>
<p>Note that (by default)
the bar graph shows the <em>relative</em> nitrogen tensions in each
compartment, that is, the tissue nitrogen tension divided by the
&quot;surfacing M-value&quot; (tissue maximum nitrogen tension for a
no-decompression dive at sea level). 
</p>
<p>The argument <code>model</code> determines the decompression model.
It should be either an object of class <code>"hm"</code> (created by
<code><a href="#topic+hm">hm</a></code>) or a character string matching one of the
options in <code><a href="#topic+pickmodel">pickmodel</a></code>.
</p>


<h3>Value</h3>

<p>The vector of absolute nitrogen tensions (in ata) in the most recently clicked
stage.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+dive">dive</a></code>,
<code><a href="#topic+haldane">haldane</a></code>,
<code><a href="#topic+oxtox">oxtox</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  ## Not run: 
    showstates(dive(c(30,20), c(5,3)), "ZH")
  
## End(Not run)
</code></pre>

<hr>
<h2 id='tanklist'>Extract or Change the Breathing Gas Tanks in a Dive</h2><span id='topic+tanklist'></span><span id='topic+tanklist+3C-'></span>

<h3>Description</h3>

<p>Extracts or modifies the list of breathing gases
in a dive object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tanklist(d)
tanklist(d) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tanklist_+3A_d">d</code></td>
<td>
<p>The dive (an object of class <code>"dive"</code>).</p>
</td></tr>
<tr><td><code id="tanklist_+3A_value">value</code></td>
<td>
<p>The new tank list. A list, whose entries are gases
(objects of class <code>"gas"</code>)
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An object of class <code>"dive"</code> represents a scuba dive,
including information about depth, time and gas breathed at each
stage of the dive. These objects are created by the function
<code><a href="#topic+dive">dive</a></code>.
</p>
<p>The tank list of a dive object is a list of the tanks of breathing gas
that were used (or available to be used) during the dive.
The function <code>tanklist</code> returns this list.
</p>
<p>If a new value is assigned to the tank list of a dive <code>d</code>,
then <code>d</code> is changed. The new dive <code>d</code> is conducted
to the same depths and times as the old <code>d</code>, but with different
gases. 
</p>


<h3>Value</h3>

<p>The value of <code>tanklist(d)</code> is a list whose elements are
gases (objects of class <code>"gas"</code>). 
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+dive">dive</a></code>,
<code><a href="#topic+nitrox">nitrox</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   d &lt;- dive(air, c(30,4), 5, nitrox(0.5), c(5,10))
   d
   tanklist(d)
   tanklist(d) &lt;- list(air, nitrox(0.8))
   d
   tanklist(d) &lt;- list(travel=air, deco=nitrox(0.8))
   d
</code></pre>

<hr>
<h2 id='times.dive'>Elapsed times at each waypoint of a dive</h2><span id='topic+times.dive'></span><span id='topic+times.dive+3C-'></span>

<h3>Description</h3>

<p>Extracts, or alters, the elapsed time at each waypoint during a dive.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>times.dive(d)
times.dive(d) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="times.dive_+3A_d">d</code></td>
<td>
<p>A dive (object of class <code>"dive"</code>).</p>
</td></tr>
<tr><td><code id="times.dive_+3A_value">value</code></td>
<td>
<p>A numeric vector containing elapsed times in minutes.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An object of class <code>"dive"</code> represents a scuba dive. It is
created by the function <code><a href="#topic+dive">dive</a></code>. A dive is defined as a
series of waypoints occurring at specified depths and times. The
elapsed time at each waypoint is returned by <code>times.dive</code>. The
assignment <code>times.dive(d) &lt;- value</code> alters these elapsed times,
provided the new vector <code>value</code> has the same length as the old one.
</p>


<h3>Value</h3>

<p><code>times.dive</code> returns a numeric vector containing the elapsed
times at each waypoint, in minutes.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+depths.dive">depths.dive</a></code>,
<code><a href="#topic+durations.dive">durations.dive</a></code>,
<code><a href="#topic+dive">dive</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   d &lt;- dive(c(30,20), c(5,5))
   d
   times.dive(d)
   # stretch time by 10 percent
   times.dive(d) &lt;- 1.1 * times.dive(d)
   d
</code></pre>

<hr>
<h2 id='trimix'>Trimix Gas</h2><span id='topic+trimix'></span>

<h3>Description</h3>

<p>Create a Trimix gas.
</p>


<h3>Usage</h3>

<pre><code class='language-R'> trimix(fO2, fHe, fN2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trimix_+3A_fo2">fO2</code>, <code id="trimix_+3A_fhe">fHe</code>, <code id="trimix_+3A_fn2">fN2</code></td>
<td>

<p>Fractions (between 0 and 1) of oxygen, helium and nitrogen,
respectively, in the trimix gas. 
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An object of class <code>"gas"</code> represents a breathing gas.
Such objects are required for various calculations in the
<code>scuba</code> library.
</p>
<p>The value returned by <code>trimix</code> represents Trimix
(oxygen-nitrogen-helium mixture) with the fractions of oxygen,
nitrogen and helium specified by the arguments <code>fO2</code>, <code>fN2</code>,
<code>fHe</code> respectively. These fractions should sum to 1.
</p>
<p>If only two of the gas fractions are given, the
missing fraction will be calculated so that the three values sum to 1.
</p>
<p>There are methods for <code>print</code> and <code>summary</code>
for objects of class <code>"gas"</code>.
</p>


<h3>Value</h3>

<p>An object of class <code>"gas"</code> representing
Trimix with the specified composition.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+nitrox">nitrox</a></code>,
<code><a href="#topic+air">air</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  # Trimix 18/50
  #            (18% oxygen, 50% helium) 
  trimix(0.18, 0.5)
</code></pre>

<hr>
<h2 id='whichtank'>Which Tanks are Used during a Dive</h2><span id='topic+whichtank'></span><span id='topic+whichtank+3C-'></span>

<h3>Description</h3>

<p>Determine which tank of breathing gas is used
at each time point during a dive.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>whichtank(d)
whichtank(d) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="whichtank_+3A_d">d</code></td>
<td>
<p>The dive (an object of class <code>"dive"</code>).</p>
</td></tr>
<tr><td><code id="whichtank_+3A_value">value</code></td>
<td>

<p>Vector of integers or character strings identifying
which tank of breathing gas is used at each time point.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An object of class <code>"dive"</code> represents a scuba dive,
including information about depth, time and gas breathed at each
stage of the dive. These objects are created by the function
<code><a href="#topic+dive">dive</a></code>.
</p>
<p>A dive object has a <em>tank list</em> which is a list of the
tanks of breathing gas that were used (or were available to be used)
during the dive. The function <code><a href="#topic+tanklist">tanklist</a></code> returns
this list.
</p>
<p>The selection of tanks, i.e. which tank is actually used at each stage of the
dive, is specified by <code>whichtank</code>. The command <code>whichtank(d)</code>
returns a vector of integers or character strings,
identifying which tank in the tank list is in use at each
waypoint during the dive. That is, <code>whichtank(d)[i]</code> is the tank
in use at the <code>i</code>th waypoint during the dive. 
</p>
<p>The command <code>whichtank(d) &lt;- value</code> will change the selection of
tanks used at each stage during the dive. Here <code>value</code> should be
a vector of integers or character strings identifying tanks in the
tank list, and the length of <code>value</code> should be 
equal to the length of the vectors <code>depths.dive(d)</code> and
<code>depths.dive(d)</code>.
</p>
<p>A common use of <code>whichtank</code> is to specify that a particular
gas should be used only in a particular range of depths. This is done
by applying <code>ifelse</code> to <code><a href="#topic+depths.dive">depths.dive</a></code> as shown
in the Examples.
</p>


<h3>Value</h3>

<p>The value of <code>whichtank(d)</code> is a vector of integers or
character strings.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+dive">dive</a></code>,
<code><a href="#topic+tanklist">tanklist</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   # tanks are numbered
   d &lt;- dive(air, c(30,40), 6, nitrox(0.5), c(6,3), c(3,3))
   d
   tanklist(d)
   whichtank(d)
   # change choice of tank at 6 metre deco stop
   # The Hard Way:
   whichtank(d) &lt;- c(1,1,1,1,1,2,2,2)
   d

   # The Snazzy Way:
   # if shallower than 3 metres, then tank 2, else tank 1
   whichtank(d) &lt;- ifelse(depths.dive(d) &lt;= 3, 2, 1)
   d

   # tanks with names
   dd &lt;- dive(tanklist=list(travel=trimix(0.18, 0.5), deco=nitrox(0.8)),
             tank="travel", c(30,40), c(20, 10), 9, tank="deco",
             c(9,10), c(6,5), c(3,5))
   dd
   # if shallower than 6 metres, then deco gas, else travel gas
   whichtank(dd) &lt;- ifelse(depths.dive(dd) &lt;= 6, "deco", "travel")
   dd
</code></pre>

<hr>
<h2 id='Workman65'>Decompression model of Workman 1965</h2><span id='topic+Workman65'></span>

<h3>Description</h3>

<p>The parameters of the decompression model
due to Workman, 1965.
</p>


<h3>Format</h3>

<p>A data frame giving the following parameters for each compartment:
</p>

<table>
<tr>
 <td style="text-align: left;">
    <code>halftime</code> </td><td style="text-align: left;"> Nitrogen halftime (minutes) </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>M0</code> </td><td style="text-align: left;"> surfacing M-value parameter <code class="reqn">M_0</code> in msw (metres of seawater) </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>A</code> </td><td style="text-align: left;"> slope parameter <code class="reqn">A</code> (dimensionless)
  </td>
</tr>

</table>



<h3>Details</h3>

<p>The decompression model developed for the US Navy by Workman (1965)
is a pure diffusion (Haldane-type) model consisting of 9 tissue compartments.
Nitrogen in the breathing gas diffuses in and out of each compartment
at a rate governed by the halftime for that compartment.
The maximum tolerable nitrogen tension in a compartment,
when the diver is at depth <code class="reqn">D</code> msw (metres of sea water), is
<code class="reqn">M = M_0 + A \times D</code>
msw, where <code class="reqn">M_0</code> and <code class="reqn">A</code> are values intrinsic to the tissue.
The value <code class="reqn">M_0</code> is called the &lsquo;surfacing M-value&rsquo;
since it is the maximum nitrogen tension that is allowed
in each compartment during a no-decompression dive at sea level.
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>Source</h3>

<p>Tikvisis and Gerth (2003), Table 10.1.1, page 440.
</p>


<h3>References</h3>

<p>Brubakk, A.O. and Neuman, T.S. (eds.) (2003)
Bennett and Elliott's Physiology and Medicine of Diving.
5th Edition. Saunders. ISBN 0-7020-2571-2
</p>
<p>Tikvisis, P. and Gerth, W.A. (2003)
Decompression Theory. 
In Brubakk and Neuman (2003), Chapter 10.1, pages 419-454.
</p>
<p>Workman, R.D. (1965) Calculation of decompression schedules
for nitrogen-oxygen and helium-oxygen dives.
Research Report 6-65. US Navy Experimental Diving Unit.
Washington DC. 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+BuehlmannL16A">BuehlmannL16A</a></code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
