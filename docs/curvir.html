<!DOCTYPE html><html><head><title>Help for package curvir</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {curvir}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#curve'><p>Reserve demand curve</p></a></li>
<li><a href='#curveopt'><p>Optimise curve parameters</p></a></li>
<li><a href='#curvepred'><p>Reserve demand curve predicted values</p></a></li>
<li><a href='#curvir'><p>curvir:Reserve demand curve modelling toolbox</p></a></li>
<li><a href='#curvir-package'><p>curvir: Specify Reserve Demand Curves</p></a></li>
<li><a href='#cvfit'><p>Automatically select curve type and explanatory variables</p></a></li>
<li><a href='#cvfitplot'><p>Plot output of cvfit to facilitate comparison</p></a></li>
<li><a href='#cvnpcurve'><p>Cross-validated errors for non-parametric curve</p></a></li>
<li><a href='#ecb'><p>ECB excess reserve data</p></a></li>
<li><a href='#invcurve'><p>Calculate the inverse curve prediction</p></a></li>
<li><a href='#npcurve'><p>Reserve demand non-parametric curve</p></a></li>
<li><a href='#plot.curvir'><p>Plot method for curvir reserve demand models</p></a></li>
<li><a href='#predict.curvir'><p>Predict method for curvir reserve demand models</p></a></li>
<li><a href='#varselect'><p>Automatically select explanatory variables for a curve type</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Specify Reserve Demand Curves</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Nikolaos Kourentzes &lt;nikolaos@kourentzes.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Automatic specification and estimation of reserve demand curves for central bank operations. The package can help to choose the best demand curve and identify additional explanatory variables. Various plot and predict options are included. For more details, see Chen et al. (2023) <a href="https://www.imf.org/en/Publications/WP/Issues/2023/09/01/Modeling-the-Reserve-Demand-to-Facilitate-Central-Bank-Operations-538754">https://www.imf.org/en/Publications/WP/Issues/2023/09/01/Modeling-the-Reserve-Demand-to-Facilitate-Central-Bank-Operations-538754</a>. </td>
</tr>
<tr>
<td>Imports:</td>
<td>RColorBrewer, abind, cvTools, pbapply, pso, mgcv, qgam,
quantregForest, randomForest</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-24 13:53:07 UTC; Nikos</td>
</tr>
<tr>
<td>Author:</td>
<td>Nikolaos Kourentzes [aut, cre],
  Zhuohui Chen [aut],
  Romain Veyrune [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-24 17:00:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='curve'>Reserve demand curve</h2><span id='topic+curve'></span>

<h3>Description</h3>

<p>Fits the reserve demand curve between excess reserves and normalised rates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>curve(x, y, type = "logistic", dummy = NULL, q = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="curve_+3A_x">x</code></td>
<td>
<p>A matrix of explanatory variables. Excess reserve must be the first input.Additional regressor follow (optional).</p>
</td></tr>
<tr><td><code id="curve_+3A_y">y</code></td>
<td>
<p>A vector of normalised interest rates.</p>
</td></tr>
<tr><td><code id="curve_+3A_type">type</code></td>
<td>
<p>The type of the reserve demand curve. This can be any of <code>logistic</code>, <code>redLogistic</code>, <code>fixLogistic</code>, <code>doubleExp</code>, <code>exponential</code>, <code>fixExponential</code>, <code>arctan</code>, <code>linear</code>. See details in <code><a href="#topic+curve">curve</a></code></p>
</td></tr>
<tr><td><code id="curve_+3A_dummy">dummy</code></td>
<td>
<p>Optional input to signify a regime change (vertical shifts in the curve). Must be a vector of equal length to the rows of <code>x</code>. If not needed use <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="curve_+3A_q">q</code></td>
<td>
<p>Target interval. This is a scalar below 1, for example 0.9 is the 90% interval. If <code>NULL</code> then no quantiles are estimated.</p>
</td></tr>
<tr><td><code id="curve_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to optimiser <code><a href="#topic+curveopt">curveopt</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For a description of the parametric curves, see the provided reference. Below we list their functions:
</p>

<ul>
<li> <p><code>logisitc</code> (Logistic) </p>
<p style="text-align: center;"><code class="reqn">r_i = \alpha + \kappa / (1 - \beta e^{g(\bm{C}_i)}) + \varepsilon_i</code>
</p>

</li>
<li> <p><code>redLogistic</code> (Reduced logistic) </p>
<p style="text-align: center;"><code class="reqn">r_i = \alpha + 1 / (1 - \beta e^{g(\bm{C}_i)}) + \varepsilon_i</code>
</p>

</li>
<li> <p><code>fixLogistic</code> (Fixed logistic) </p>
<p style="text-align: center;"><code class="reqn">r_i = \alpha + 1 / (1 - e^{g(\bm{C}_i)}) + \varepsilon_i</code>
</p>

</li>
<li> <p><code>doubleExp</code> (Double exponential) </p>
<p style="text-align: center;"><code class="reqn">r_i = \alpha + \beta e^{\rho e^{g(\bm{C}_i)}} + \varepsilon_i</code>
</p>

</li>
<li> <p><code>exponential</code> (Exponential) </p>
<p style="text-align: center;"><code class="reqn">r_i = \alpha + \beta e^{g(\bm{C}_i)} + \varepsilon_i</code>
</p>

</li>
<li> <p><code>fixExponential</code> (Fixed exponential) </p>
<p style="text-align: center;"><code class="reqn">r_i = \beta e^{g(\bm{C}_i)} + \varepsilon_i</code>
</p>

</li>
<li> <p><code>arctan</code> (Arctangent) </p>
<p style="text-align: center;"><code class="reqn">r_i = \alpha + \beta \arctan ( g(\bm{C}_i))  + \varepsilon_i</code>
</p>

</li>
<li> <p><code>linear</code> (Linear) </p>
<p style="text-align: center;"><code class="reqn">r_i = g(\bm{C}_i) + \varepsilon_i</code>
</p>

</li></ul>

<p>And <code class="reqn">g(\bm{C}) = c + \bm{C} w_g</code>, where <code class="reqn">\alpha</code>, <code class="reqn">\beta</code>, <code class="reqn">\kappa</code>, <code class="reqn">\rho</code> are curve parameters,
<code class="reqn">c</code> is a constant togglable by <code>constant</code>, <code class="reqn">\bm{C}</code> are the regressors including the excess reserves. <code class="reqn">w_g</code> their coefficients, and finally <code class="reqn">\varepsilon_i</code> is the error term of the curve.
</p>


<h3>Value</h3>

<p>Returns a model of class <code>curvir</code>. This includes
</p>

<ul>
<li> <p><code>type</code> the type of the curve.
</p>
</li>
<li> <p><code>constant</code> a logical indicating the use of a constant.
</p>
</li>
<li> <p><code>w</code> a list including: <code>mean</code> the curve parameters for the mean of the curve, <code>upper</code> and <code>lower</code> the parameters for the curve at the upper and lower intervals.
</p>
</li>
<li> <p><code>data</code> a list including the <code>y</code>, <code>x</code>, and <code>dummy</code> used for the fitting of the curve.
</p>
</li>
<li> <p><code>mse</code> the MSE from the fitting of the curve (the mean only).
</p>
</li>
<li> <p><code>q</code> the interval used in the fitting of the curve.
</p>
</li></ul>



<h3>Note</h3>

<p>An additional column for the constant is automatically generated, unless requested otherwise.
</p>


<h3>Author(s)</h3>

<p>Nikolaos Kourentzes, <a href="mailto:nikolaos@kourentzes.com">nikolaos@kourentzes.com</a>
</p>


<h3>References</h3>

<p>Chen, Z., Kourentzes, N., &amp; Veyrune, R. (2023). <a href="https://www.imf.org/en/Publications/WP/Issues/2023/09/01/Modeling-the-Reserve-Demand-to-Facilitate-Central-Bank-Operations-538754">Modeling the Reserve Demand to Facilitate Central Bank Operations.</a> IMF Working Papers, 2023(179).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+predict.curvir">predict.curvir</a></code>, <code><a href="#topic+plot.curvir">plot.curvir</a></code>, and <code><a href="#topic+curveopt">curveopt</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

  # Use ECB example data
  rate &lt;- ecb$rate
  x &lt;- ecb$x[,1,drop=FALSE]
  curve(x,rate)

  # An arctangent curve
  curve(x,rate,type="arctan")
 

</code></pre>

<hr>
<h2 id='curveopt'>Optimise curve parameters</h2><span id='topic+curveopt'></span>

<h3>Description</h3>

<p>Finds optimal curve parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>curveopt(
  x,
  y,
  type = "logistic",
  constant = c(TRUE, FALSE),
  reps = 3,
  sign = NULL,
  q = NULL,
  winit = NULL,
  yhat = NULL,
  wsel = c("select", "combine"),
  dummy = NULL,
  sameSign = c(TRUE, FALSE)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="curveopt_+3A_x">x</code></td>
<td>
<p>A matrix of explanatory variables. Excess reserve must be the first input.Additional regressor follow (optional).</p>
</td></tr>
<tr><td><code id="curveopt_+3A_y">y</code></td>
<td>
<p>A vector of normalised interest rates.</p>
</td></tr>
<tr><td><code id="curveopt_+3A_type">type</code></td>
<td>
<p>The type of the reserve demand curve. This can be any of <code>logistic</code>, <code>redLogistic</code>, <code>fixLogistic</code>, <code>doubleExp</code>, <code>exponential</code>, <code>fixExponential</code>, <code>arctan</code>, <code>linear</code>. See details in <code><a href="#topic+curve">curve</a></code></p>
</td></tr>
<tr><td><code id="curveopt_+3A_constant">constant</code></td>
<td>
<p>A logical (<code>TRUE</code> or <code>FALSE</code>) whether to include a constant or not.</p>
</td></tr>
<tr><td><code id="curveopt_+3A_reps">reps</code></td>
<td>
<p>Number of repetitions for the particle swarm optimisation.</p>
</td></tr>
<tr><td><code id="curveopt_+3A_sign">sign</code></td>
<td>
<p>A vector of equal length to the number of additional regressors in <code>x</code> (excluding the constant (if used) and the excess reserves) of positive and negative values (any) that will be used to obtain signs to restrict the values of the estimated parameters. Use <code>NULL</code> for no restrictions.</p>
</td></tr>
<tr><td><code id="curveopt_+3A_q">q</code></td>
<td>
<p>The desired quantile to optimise for. Use <code>NULL</code> to get the conditional expectation.</p>
</td></tr>
<tr><td><code id="curveopt_+3A_winit">winit</code></td>
<td>
<p>A vector of initial values for the optimisation. This will also carry over to sign restrictions if <code>sameSign==TRUE</code>.</p>
</td></tr>
<tr><td><code id="curveopt_+3A_yhat">yhat</code></td>
<td>
<p>Useful when estimating quantiles. Supply here the predicted values for the conditional expectation to add restrictions for the quantiles to not cross the conditional expectation. Use <code>NULL</code> to not add any restrictions.</p>
</td></tr>
<tr><td><code id="curveopt_+3A_wsel">wsel</code></td>
<td>
<p>Use the minimum error set of parameters (<code>select</code>) or the combination of the pool parameters using the heuristic in Kourentzes et al., (2019) (<code>combine</code>).</p>
</td></tr>
<tr><td><code id="curveopt_+3A_dummy">dummy</code></td>
<td>
<p>Optional input to signify a regime change (vertical shifts in the curve). Must be a vector of equal length to the rows of <code>x</code>. If not needed use <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="curveopt_+3A_samesign">sameSign</code></td>
<td>
<p>Used if <code>winit != NULL</code> to take any sign restrictions from <code>winit</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list of
</p>

<ul>
<li> <p><code>w</code> The optimal parameters
</p>
</li>
<li> <p><code>mse</code> The Mean Squared Error of the fitted curve.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nikolaos Kourentzes, <a href="mailto:nikolaos@kourentzes.com">nikolaos@kourentzes.com</a>
</p>


<h3>References</h3>


<ul>
<li><p> Chen, Z., Kourentzes, N., &amp; Veyrune, R. (2023). <a href="https://www.imf.org/en/Publications/WP/Issues/2023/09/01/Modeling-the-Reserve-Demand-to-Facilitate-Central-Bank-Operations-538754">Modeling the Reserve Demand to Facilitate Central Bank Operations.</a> IMF Working Papers, 2023(179).
</p>
</li>
<li><p> Kourentzes, N., Barrow, D., &amp; Petropoulos, F. (2019). Another look at forecast selection and combination: Evidence from forecast pooling. International Journal of Production Economics, 209, 226-235.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+curve">curve</a></code>, and <code><a href="#topic+curvepred">curvepred</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

  # Use ECB example data
  rate &lt;- ecb$rate
  x &lt;- ecb$x[,1,drop=FALSE]
  curveopt(x,rate)


</code></pre>

<hr>
<h2 id='curvepred'>Reserve demand curve predicted values</h2><span id='topic+curvepred'></span>

<h3>Description</h3>

<p>Provides the predicted values for the reserve demand curve of choice. For general use prefer the
predict() function, which handles the constant internally.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>curvepred(x, w, type = "logistic", dummy = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="curvepred_+3A_x">x</code></td>
<td>
<p>A matrix with the inputs. If there is a constant in the estimated curve, then the first column in <code>x</code> should be the constant. Next column should be the excess reserves. Additional regressor follow (optional).</p>
</td></tr>
<tr><td><code id="curvepred_+3A_w">w</code></td>
<td>
<p>The vector of weights for the desired curve. Estimated using the <code><a href="#topic+curveopt">curveopt</a></code> function.</p>
</td></tr>
<tr><td><code id="curvepred_+3A_type">type</code></td>
<td>
<p>The type of the reserve demand curve. This can be any of <code>logistic</code>, <code>redLogistic</code>, <code>fixLogistic</code>, <code>doubleExp</code>, <code>exponential</code>, <code>fixExponential</code>, <code>arctan</code>, <code>linear</code>. See details in <code><a href="#topic+curve">curve</a></code></p>
</td></tr>
<tr><td><code id="curvepred_+3A_dummy">dummy</code></td>
<td>
<p>Optional input to signify a regime change (vertical shifts in the curve). Must be a vector of equal length to the rows of <code>x</code>. If not needed use <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For a description of the parametric curves, see the provided reference. Below we list their functions:
</p>

<ul>
<li> <p><code>logisitc</code> (Logistic) </p>
<p style="text-align: center;"><code class="reqn">r_i = \alpha + \kappa / (1 - \beta e^{g(\bm{C}_i)}) + \varepsilon_i</code>
</p>

</li>
<li> <p><code>redLogistic</code> (Reduced logistic) </p>
<p style="text-align: center;"><code class="reqn">r_i = \alpha + 1 / (1 - \beta e^{g(\bm{C}_i)}) + \varepsilon_i</code>
</p>

</li>
<li> <p><code>fixLogistic</code> (Fixed logistic) </p>
<p style="text-align: center;"><code class="reqn">r_i = \alpha + 1 / (1 - e^{g(\bm{C}_i)}) + \varepsilon_i</code>
</p>

</li>
<li> <p><code>doubleExp</code> (Double exponential) </p>
<p style="text-align: center;"><code class="reqn">r_i = \alpha + \beta e^{\rho e^{g(\bm{C}_i)}} + \varepsilon_i</code>
</p>

</li>
<li> <p><code>exponential</code> (Exponential) </p>
<p style="text-align: center;"><code class="reqn">r_i = \alpha + \beta e^{g(\bm{C}_i)} + \varepsilon_i</code>
</p>

</li>
<li> <p><code>fixExponential</code> (Fixed exponential) </p>
<p style="text-align: center;"><code class="reqn">r_i = \beta e^{g(\bm{C}_i)} + \varepsilon_i</code>
</p>

</li>
<li> <p><code>arctan</code> (Arctangent) </p>
<p style="text-align: center;"><code class="reqn">r_i = \alpha + \beta \arctan ( g(\bm{C}_i))  + \varepsilon_i</code>
</p>

</li>
<li> <p><code>linear</code> (Linear) </p>
<p style="text-align: center;"><code class="reqn">r_i = g(\bm{C}_i) + \varepsilon_i</code>
</p>

</li></ul>

<p>And <code class="reqn">g(\bm{C}) = c + \bm{C} w_g</code>, where <code class="reqn">\alpha</code>, <code class="reqn">\beta</code>, <code class="reqn">\kappa</code>, <code class="reqn">\rho</code> are curve parameters,
<code class="reqn">c</code> is a constant togglable by <code>constant</code>, <code class="reqn">\bm{C}</code> are the regressors including the excess reserves. <code class="reqn">w_g</code> their coefficients, and finally <code class="reqn">\varepsilon_i</code> is the error term of the curve.
</p>


<h3>Value</h3>

<p>Returns a vector of the predicted values.
</p>


<h3>Author(s)</h3>

<p>Nikolaos Kourentzes, <a href="mailto:nikolaos@kourentzes.com">nikolaos@kourentzes.com</a>
</p>


<h3>References</h3>

<p>Chen, Z., Kourentzes, N., &amp; Veyrune, R. (2023). <a href="https://www.imf.org/en/Publications/WP/Issues/2023/09/01/Modeling-the-Reserve-Demand-to-Facilitate-Central-Bank-Operations-538754">Modeling the Reserve Demand to Facilitate Central Bank Operations.</a> IMF Working Papers, 2023(179).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+curve">curve</a></code>, and <code><a href="#topic+curveopt">curveopt</a></code>.
</p>

<hr>
<h2 id='curvir'>curvir:Reserve demand curve modelling toolbox</h2><span id='topic+curvir'></span>

<h3>Description</h3>

<p>The <span class="pkg">curvir</span> package provides tools for building reserve demand curves for central bank operations.
</p>


<h3>Parametric curve modelling</h3>


<ul>
<li> <p><code><a href="#topic+curve">curve</a></code> - fit a parametric curve
</p>
</li>
<li> <p><code><a href="#topic+curveopt">curveopt</a></code> - optimise curve parameters (called through <code><a href="#topic+curve">curve</a></code>)
</p>
</li>
<li> <p><code><a href="#topic+curvepred">curvepred</a></code> - predict curve values (called through <code><a href="stats.html#topic+predict">predict</a></code>)
</p>
</li>
<li> <p><code><a href="#topic+invcurve">invcurve</a></code> - produce predictions from the inverse curve
</p>
</li></ul>



<h3>Non-parametric curve modelling</h3>


<ul>
<li> <p><code><a href="#topic+npcurve">npcurve</a></code> - fit a non-parametric curve
</p>
</li></ul>



<h3>Curve specification</h3>


<ul>
<li> <p><code><a href="#topic+cvfit">cvfit</a></code> - Joint automatic specification of curve type and regressors
</p>
</li>
<li> <p><code><a href="#topic+varselect">varselect</a></code> - Automatic specification of regressors
</p>
</li>
<li> <p><code><a href="#topic+cvnpcurve">cvnpcurve</a></code> - Provide cross-validated errors for non-paramteric curves
</p>
</li>
<li> <p><code><a href="#topic+cvfitplot">cvfitplot</a></code> - Summary plot for <code><a href="#topic+cvfit">cvfit</a></code> and <code><a href="#topic+cvnpcurve">cvnpcurve</a></code>
</p>
</li></ul>



<h3>General</h3>


<ul>
<li> <p><code><a href="stats.html#topic+predict">predict</a></code>  Predict parametric and non-parametric curves
</p>
</li>
<li> <p><code><a href="graphics.html#topic+plot">plot</a></code>  Plot parametric and non-parametric curves
</p>
</li></ul>



<h3>Data</h3>


<ul>
<li> <p><code><a href="#topic+ecb">ecb</a></code> ECB dataset from Chen et al. (2023)
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nikolaos Kourentzes, <a href="mailto:nikolaos@kourentzes.com">nikolaos@kourentzes.com</a>, Zhuohui Chen, <a href="mailto:zchen4@imf.org">zchen4@imf.org</a>, Romain R. Veyrune.
</p>


<h3>References</h3>

<p>Chen, Z., Kourentzes, N., &amp; Veyrune, R. (2023). <a href="https://www.imf.org/en/Publications/WP/Issues/2023/09/01/Modeling-the-Reserve-Demand-to-Facilitate-Central-Bank-Operations-538754">Modeling the Reserve Demand to Facilitate Central Bank Operations.</a> IMF Working Papers, 2023(179).
</p>

<hr>
<h2 id='curvir-package'>curvir: Specify Reserve Demand Curves</h2><span id='topic+curvir-package'></span><span id='topic+_PACKAGE'></span>

<h3>Description</h3>

<p>Automatic specification and estimation of reserve demand curves for central bank operations. The package can help to choose the best demand curve and identify additional explanatory variables. Various plot and predict options are included. For more details, see Chen et al. (2023) <a href="https://www.imf.org/en/Publications/WP/Issues/2023/09/01/Modeling-the-Reserve-Demand-to-Facilitate-Central-Bank-Operations-538754">https://www.imf.org/en/Publications/WP/Issues/2023/09/01/Modeling-the-Reserve-Demand-to-Facilitate-Central-Bank-Operations-538754</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Nikolaos Kourentzes <a href="mailto:nikolaos@kourentzes.com">nikolaos@kourentzes.com</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Zhuohui Chen <a href="mailto:zchen4@imf.org">zchen4@imf.org</a>
</p>
</li>
<li><p> Romain Veyrune
</p>
</li></ul>


<hr>
<h2 id='cvfit'>Automatically select curve type and explanatory variables</h2><span id='topic+cvfit'></span>

<h3>Description</h3>

<p>Using cross-validation automatically select explanatory variables jointly with curve type.
When running <code>cvfit</code> there is no need to use <code><a href="#topic+varselect">varselect</a></code> separately.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cvfit(
  x,
  y,
  folds = 10,
  constant = c(TRUE, FALSE),
  sign = NULL,
  reps = 3,
  parallel = c(FALSE, TRUE),
  usepbapply = c(FALSE, TRUE),
  alltype = c("logistic", "redLogistic", "doubleExp", "exponential", "arctan", "linear"),
  search = c("backward", "forward"),
  wsel = c("select", "combine"),
  dummy = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cvfit_+3A_x">x</code></td>
<td>
<p>A matrix of explanatory variables. Excess reserve must be the first input.Additional regressor follow (optional).</p>
</td></tr>
<tr><td><code id="cvfit_+3A_y">y</code></td>
<td>
<p>A vector of normalised interest rates.</p>
</td></tr>
<tr><td><code id="cvfit_+3A_folds">folds</code></td>
<td>
<p>Folds to use for cross-validation.</p>
</td></tr>
<tr><td><code id="cvfit_+3A_constant">constant</code></td>
<td>
<p>A logical (<code>TRUE</code> or <code>FALSE</code>) whether to include a constant or not.</p>
</td></tr>
<tr><td><code id="cvfit_+3A_sign">sign</code></td>
<td>
<p>A vector of equal length to the number of additional regressors in <code>x</code> (excluding the constant (if used) and the excess reserves) of positive and negative values (any) that will be used to obtain signs to restrict the values of the estimated parameters. Use <code>NULL</code> for no restrictions.</p>
</td></tr>
<tr><td><code id="cvfit_+3A_reps">reps</code></td>
<td>
<p>Number of repetitions for the particle swarm optimisation.</p>
</td></tr>
<tr><td><code id="cvfit_+3A_parallel">parallel</code></td>
<td>
<p>Initialise and use parallel processing for the cross-validation. Note that the maximum number of cores that will be used is equal to the alternative types of curves that are evaluated (<code>alltype</code>).</p>
</td></tr>
<tr><td><code id="cvfit_+3A_usepbapply">usepbapply</code></td>
<td>
<p>A logical to indicate whether to use pbapply to report on the parallel calculation progress. Note that pbapply does not support load balancing.</p>
</td></tr>
<tr><td><code id="cvfit_+3A_alltype">alltype</code></td>
<td>
<p>A vector of the curve types to consider in the selection process.</p>
</td></tr>
<tr><td><code id="cvfit_+3A_search">search</code></td>
<td>
<p>Search strategy for variable inclusion. With <code>forward</code> the model starts from no explanatory variables, and evaluates potential additions. With <code>backward</code> the model starts with all variables and evaluates for potential exclusions.</p>
</td></tr>
<tr><td><code id="cvfit_+3A_wsel">wsel</code></td>
<td>
<p>Use the minimum error set of parameters (<code>select</code>) or the combination of the pool parameters using the heuristic in Kourentzes et al., (2019) (<code>combine</code>).</p>
</td></tr>
<tr><td><code id="cvfit_+3A_dummy">dummy</code></td>
<td>
<p>Optional input to signify a regime change (vertical shifts in the curve). Must be a vector of equal length to the rows of <code>x</code>. If not needed use <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list with the recommended variable selection choice:
</p>

<ul>
<li> <p><code>type</code> the type of selected curve.
</p>
</li>
<li> <p><code>keep</code> a logical vector with which variables to keep.
</p>
</li>
<li> <p><code>varRes</code> the result from <code><a href="#topic+varselect">varselect</a></code> for each evaluated curve type.
</p>
</li>
<li> <p><code>cvIndex</code> a matrix detailing how the sample was split for the cross-validation. First column is the fold number and second column is the index of the observation.
</p>
</li></ul>

<p>Use <code><a href="#topic+cvfitplot">cvfitplot</a></code> to visualise the output.
</p>


<h3>Author(s)</h3>

<p>Nikolaos Kourentzes, <a href="mailto:nikolaos@kourentzes.com">nikolaos@kourentzes.com</a>
</p>


<h3>References</h3>

<p>Chen, Z., Kourentzes, N., &amp; Veyrune, R. (2023). <a href="https://www.imf.org/en/Publications/WP/Issues/2023/09/01/Modeling-the-Reserve-Demand-to-Facilitate-Central-Bank-Operations-538754">Modeling the Reserve Demand to Facilitate Central Bank Operations.</a> IMF Working Papers, 2023(179).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cvfitplot">cvfitplot</a></code>, <code><a href="#topic+curve">curve</a></code>, and <code><a href="#topic+varselect">varselect</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  # Use ECB example data
  rate &lt;- ecb$rate
  x &lt;- ecb$x[,1:3,drop=FALSE]
  cvKeep &lt;- cvfit(x,rate,folds=5,alltype=c("logistic","arctan"),parallel=TRUE)
  # Print result
  print(cvKeep)
  # Fit curve with the selected variables
  curve(x[,cvKeep$keep,drop=FALSE],rate,type=cvKeep$type)


</code></pre>

<hr>
<h2 id='cvfitplot'>Plot output of cvfit to facilitate comparison</h2><span id='topic+cvfitplot'></span>

<h3>Description</h3>

<p>Plot summarised error of different curves specification from <code><a href="#topic+cvfit">cvfit</a></code>.
Assuming normal errors, plot the mean cross-validated error and the 95
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cvfitplot(cvKeep, xlock = c("mean", "median"), cvRF = NULL, cvSP = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cvfitplot_+3A_cvkeep">cvKeep</code></td>
<td>
<p>The output of <code><a href="#topic+cvfit">cvfit</a></code>.</p>
</td></tr>
<tr><td><code id="cvfitplot_+3A_xlock">xlock</code></td>
<td>
<p>Focus horizontal axis on <code>mean</code> or <code>median</code>, The latter provides a narrower range, facilitating comparison when there are outliers.</p>
</td></tr>
<tr><td><code id="cvfitplot_+3A_cvrf">cvRF</code></td>
<td>
<p>Include cross-validation results from random forecast non-parametric curves. Obtain these from <code><a href="#topic+cvnpcurve">cvnpcurve</a></code> with <code>type="rforest"</code>. Use <code>NULL</code> to ignore.</p>
</td></tr>
<tr><td><code id="cvfitplot_+3A_cvsp">cvSP</code></td>
<td>
<p>Include cross-validation results from spline regression non-parametric curves. Obtain these from <code><a href="#topic+cvnpcurve">cvnpcurve</a></code> with <code>type="spline"</code>. Use <code>NULL</code> to ignore.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No returned value. Produces a summary plot of cross-validated errors.
</p>


<h3>Author(s)</h3>

<p>Nikolaos Kourentzes, <a href="mailto:nikolaos@kourentzes.com">nikolaos@kourentzes.com</a>
</p>


<h3>References</h3>

<p>Chen, Z., Kourentzes, N., &amp; Veyrune, R. (2023). <a href="https://www.imf.org/en/Publications/WP/Issues/2023/09/01/Modeling-the-Reserve-Demand-to-Facilitate-Central-Bank-Operations-538754">Modeling the Reserve Demand to Facilitate Central Bank Operations.</a> IMF Working Papers, 2023(179).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cvfit">cvfit</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  # Use ECB example data
  rate &lt;- ecb$rate
  x &lt;- ecb$x[,1:3,drop=FALSE]
  cvKeep &lt;- cvfit(x,rate,folds=5,alltype=c("logistic","arctan"),parallel=TRUE)
  cvfitplot(cvKeep)
  # Add results from non-parameteric curves
  cvRF &lt;- cvnpcurve(x,rate,cvKeep$cvIndex)
  cvSP &lt;- cvnpcurve(x,rate,cvKeep$cvIndex,type="spline")
  cvfitplot(cvKeep,cvRF=cvRF,cvSP=cvSP)


</code></pre>

<hr>
<h2 id='cvnpcurve'>Cross-validated errors for non-parametric curve</h2><span id='topic+cvnpcurve'></span>

<h3>Description</h3>

<p>Obtain cross-validated errors for a non-parametric curve with given sample splits.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cvnpcurve(x, y, cvIndex, type = "rforest", dummy = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cvnpcurve_+3A_x">x</code></td>
<td>
<p>A matrix of explanatory variables. Excess reserve must be the first input.Additional regressor follow (optional).</p>
</td></tr>
<tr><td><code id="cvnpcurve_+3A_y">y</code></td>
<td>
<p>A vector of normalised interest rates.</p>
</td></tr>
<tr><td><code id="cvnpcurve_+3A_cvindex">cvIndex</code></td>
<td>
<p>A matrix detailing how the sample was split for the cross-validation. Output from <code><a href="#topic+cvfit">cvfit</a></code>.</p>
</td></tr>
<tr><td><code id="cvnpcurve_+3A_type">type</code></td>
<td>
<p>The type of the reserve demand curve. This can be any of <code>rforecast</code> for random forecast or <code>spline</code> for spline regression.</p>
</td></tr>
<tr><td><code id="cvnpcurve_+3A_dummy">dummy</code></td>
<td>
<p>Optional input to signify a regime change (vertical shifts in the curve). Must be a vector of equal length to the rows of <code>x</code>. If not needed use <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns summary cross-validated errors, comparable with the output from  <code><a href="#topic+cvfit">cvfit</a></code>.
</p>


<h3>Author(s)</h3>

<p>Nikolaos Kourentzes, <a href="mailto:nikolaos@kourentzes.com">nikolaos@kourentzes.com</a>
</p>


<h3>References</h3>

<p>Chen, Z., Kourentzes, N., &amp; Veyrune, R. (2023). <a href="https://www.imf.org/en/Publications/WP/Issues/2023/09/01/Modeling-the-Reserve-Demand-to-Facilitate-Central-Bank-Operations-538754">Modeling the Reserve Demand to Facilitate Central Bank Operations.</a> IMF Working Papers, 2023(179).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cvfit">cvfit</a></code>, and <code><a href="#topic+cvfitplot">cvfitplot</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  # Use ECB example data
  rate &lt;- ecb$rate
  x &lt;- ecb$x[,1:3,drop=FALSE]
  cvKeep &lt;- cvfit(x,rate,folds=5,alltype=c("logistic","arctan"),parallel=TRUE)
  # Get non-parametric curve cross-validated errors
  cvRF &lt;- cvnpcurve(x,rate,cvKeep$cvIndex)
  cvSP &lt;- cvnpcurve(x,rate,cvKeep$cvIndex,type="spline")


</code></pre>

<hr>
<h2 id='ecb'>ECB excess reserve data</h2><span id='topic+ecb'></span>

<h3>Description</h3>

<p>The short-term interest rate used for the European Central Bank (ECB) is the volume-weighted Euro Overnight Index Average (EONIA) rate.
Various explanatory variables are provided, as listed in the Chen et al. (2023).
Data are collected from 1999 to 2019, resulting in 239 maintenance periods where all data is available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ecb
</code></pre>


<h3>Format</h3>

<p><code>ecb</code> a list containing
</p>

<ul>
<li> <p><code>rate</code> the normalised EONIA rate.
</p>
</li>
<li> <p><code>x</code> a matrix including the ECB excess reserves and various regressors.
</p>
</li></ul>



<h3>References</h3>

<p>Chen, Z., Kourentzes, N., &amp; Veyrune, R. (2023). <a href="https://www.imf.org/en/Publications/WP/Issues/2023/09/01/Modeling-the-Reserve-Demand-to-Facilitate-Central-Bank-Operations-538754">Modeling the Reserve Demand to Facilitate Central Bank Operations.</a> IMF Working Papers, 2023(179).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plot(ecb$x[,1],ecb$rate,xlab="Excess Reserves",ylab="Rate")

</code></pre>

<hr>
<h2 id='invcurve'>Calculate the inverse curve prediction</h2><span id='topic+invcurve'></span>

<h3>Description</h3>

<p>Calculate the predicted reserves given some rate, i.e., calculate the prediction of the inverse curve.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>invcurve(
  object,
  ynew = NULL,
  xnew = NULL,
  dummynew = NULL,
  warn = c(TRUE, FALSE)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="invcurve_+3A_object">object</code></td>
<td>
<p>A model fit with <code><a href="#topic+curve">curve</a></code>.</p>
</td></tr>
<tr><td><code id="invcurve_+3A_ynew">ynew</code></td>
<td>
<p>The input rate. If <code>NULL</code> this corresponds to the values from <code>predict(object)</code>.</p>
</td></tr>
<tr><td><code id="invcurve_+3A_xnew">xnew</code></td>
<td>
<p>The values for the additional regressors that were used in the curve fit. Must be a matrix, ordered (columns) as they were input in the fitting of the curve. The constant is dealt with automatically. Do not input the excess reserves. If <code>NULL</code> this is picked up from the data used to fit the curve.</p>
</td></tr>
<tr><td><code id="invcurve_+3A_dummynew">dummynew</code></td>
<td>
<p>The values for the indicator, if one was used in the fitting of the curve. If <code>NULL</code> then the data used in the fitting of the model are used.</p>
</td></tr>
<tr><td><code id="invcurve_+3A_warn">warn</code></td>
<td>
<p>A logical (<code>TRUE</code> or <code>FALSE</code>) to issue a warning if the resulting values are more than 10% away from the min-max of the excess reserves used to estimate the curve.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a vector of values of the predicted reserves
</p>


<h3>Author(s)</h3>

<p>Nikolaos Kourentzes, <a href="mailto:nikolaos@kourentzes.com">nikolaos@kourentzes.com</a>
</p>


<h3>References</h3>

<p>Chen, Z., Kourentzes, N., &amp; Veyrune, R. (2023). <a href="https://www.imf.org/en/Publications/WP/Issues/2023/09/01/Modeling-the-Reserve-Demand-to-Facilitate-Central-Bank-Operations-538754">Modeling the Reserve Demand to Facilitate Central Bank Operations.</a> IMF Working Papers, 2023(179).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+curve">curve</a></code>, and <code><a href="stats.html#topic+predict">predict</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

  # Use ECB example data
  rate &lt;- ecb$rate
  x &lt;- ecb$x[,1,drop=FALSE]
  fit &lt;- curve(x,rate,type="logistic")
  invcurve(fit)

  # Use a different input rate
  invcurve(fit,ynew=0.1)


</code></pre>

<hr>
<h2 id='npcurve'>Reserve demand non-parametric curve</h2><span id='topic+npcurve'></span>

<h3>Description</h3>

<p>Fits a non-parametric reserve demand curve between excess reserves and normalised rates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>npcurve(x, y, type = c("rforest", "spline"), dummy = NULL, q = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="npcurve_+3A_x">x</code></td>
<td>
<p>A matrix of explanatory variables. Excess reserve must be the first input.Additional regressor follow (optional).</p>
</td></tr>
<tr><td><code id="npcurve_+3A_y">y</code></td>
<td>
<p>A vector of normalised interest rates.</p>
</td></tr>
<tr><td><code id="npcurve_+3A_type">type</code></td>
<td>
<p>The type of the reserve demand curve. This can be any of <code>rforecast</code> for random forecast or <code>spline</code> for spline regression.</p>
</td></tr>
<tr><td><code id="npcurve_+3A_dummy">dummy</code></td>
<td>
<p>Optional input to signify a regime change (vertical shifts in the curve). Must be a vector of equal length to the rows of <code>x</code>. If not needed use <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="npcurve_+3A_q">q</code></td>
<td>
<p>Target interval. This is a scalar below 1, for example 0.9 is the 90% interval. If <code>NULL</code> then no quantiles are estimated.</p>
</td></tr>
<tr><td><code id="npcurve_+3A_...">...</code></td>
<td>
<p>Additional arguments (unused).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a model of class <code>npcurvir</code>. This includes
</p>

<ul>
<li> <p><code>type</code> the type of the curve.
</p>
</li>
<li> <p><code>fit</code> the non-parametric model for the mean.
</p>
</li>
<li> <p><code>fitQ</code> The non-parametric model for the quantiles.
</p>
</li>
<li> <p><code>data</code> a list including the <code>y</code>, <code>x</code>, and <code>dummy</code> used for the fitting of the curve.
</p>
</li>
<li> <p><code>q</code> the interval used in the fitting of the curve.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nikolaos Kourentzes, <a href="mailto:nikolaos@kourentzes.com">nikolaos@kourentzes.com</a>
</p>


<h3>References</h3>

<p>Chen, Z., Kourentzes, N., &amp; Veyrune, R. (2023). <a href="https://www.imf.org/en/Publications/WP/Issues/2023/09/01/Modeling-the-Reserve-Demand-to-Facilitate-Central-Bank-Operations-538754">Modeling the Reserve Demand to Facilitate Central Bank Operations.</a> IMF Working Papers, 2023(179).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+predict.npcurvir">predict.npcurvir</a></code>, and <code><a href="#topic+plot.npcurvir">plot.npcurvir</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Use ECB example data
rate &lt;- ecb$rate
x &lt;- ecb$x[,1,drop=FALSE]
npcurve(x,rate)

</code></pre>

<hr>
<h2 id='plot.curvir'>Plot method for curvir reserve demand models</h2><span id='topic+plot.curvir'></span><span id='topic+plot.npcurvir'></span>

<h3>Description</h3>

<p>Plot a reserve demand curve estimated using <code><a href="#topic+curve">curve</a></code>.
</p>
<p>Plot a non-parametric reserve demand curve estimated using <code><a href="#topic+npcurve">npcurve</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'curvir'
plot(
  x,
  ploty = c(FALSE, TRUE),
  plotq = c(TRUE, FALSE),
  usemean = c(FALSE, TRUE),
  prcmp = c(FALSE, TRUE),
  useline = c(FALSE, TRUE),
  main = NULL,
  pch = 20,
  ...
)

## S3 method for class 'npcurvir'
plot(
  x,
  ploty = c(FALSE, TRUE),
  plotq = c(TRUE, FALSE),
  usemean = c(FALSE, TRUE),
  prcmp = c(FALSE, TRUE),
  useline = c(FALSE, TRUE),
  main = NULL,
  pch = 20,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.curvir_+3A_x">x</code></td>
<td>
<p>A model fit with <code><a href="#topic+curve">curve</a></code>.</p>
</td></tr>
<tr><td><code id="plot.curvir_+3A_ploty">ploty</code></td>
<td>
<p>Logical (<code>TRUE</code> or <code>FALSE</code>) to plot data used for fitting or not.</p>
</td></tr>
<tr><td><code id="plot.curvir_+3A_plotq">plotq</code></td>
<td>
<p>Logical (<code>TRUE</code> or <code>FALSE</code>) to plot intervals.</p>
</td></tr>
<tr><td><code id="plot.curvir_+3A_usemean">usemean</code></td>
<td>
<p>Logical (<code>TRUE</code> or <code>FALSE</code>) to replace all explanatory variables (except from excess reserves) with their mean. It cannot be used if a <code>dummy</code> is used in the fitting of the curve.</p>
</td></tr>
<tr><td><code id="plot.curvir_+3A_prcmp">prcmp</code></td>
<td>
<p>Logical (<code>TRUE</code> or <code>FALSE</code>) to use principal components to project all variables into two dimensions. Requires <code>usemean == FALSE</code>. This may be useful when multiple explanatory variables are used.</p>
</td></tr>
<tr><td><code id="plot.curvir_+3A_useline">useline</code></td>
<td>
<p>Logical (<code>TRUE</code> or <code>FALSE</code>) to force line plots when <code>usemean == FALSE</code> or <code>prcomp == FALSE</code> and there are many explanatory variables.</p>
</td></tr>
<tr><td><code id="plot.curvir_+3A_main">main</code></td>
<td>
<p>Use to overide the default plot title.</p>
</td></tr>
<tr><td><code id="plot.curvir_+3A_pch">pch</code></td>
<td>
<p>Use to overide the dafault marker type for points.</p>
</td></tr>
<tr><td><code id="plot.curvir_+3A_...">...</code></td>
<td>
<p>Additional inputs (currently unused).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No returned value. Produces a plot of the estimated curve.
</p>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>plot(curvir)</code>: Plot parametric curves
</p>
</li>
<li> <p><code>plot(npcurvir)</code>: Plot non-parametric curves
</p>
</li></ul>


<h3>Author(s)</h3>

<p>Nikolaos Kourentzes, <a href="mailto:nikolaos@kourentzes.com">nikolaos@kourentzes.com</a>
</p>


<h3>References</h3>

<p>Chen, Z., Kourentzes, N., &amp; Veyrune, R. (2023). <a href="https://www.imf.org/en/Publications/WP/Issues/2023/09/01/Modeling-the-Reserve-Demand-to-Facilitate-Central-Bank-Operations-538754">Modeling the Reserve Demand to Facilitate Central Bank Operations.</a> IMF Working Papers, 2023(179).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+curve">curve</a></code>.
</p>
<p><code><a href="#topic+npcurve">npcurve</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

  # Use ECB example data
  rate &lt;- ecb$rate
  x &lt;- ecb$x[,1,drop=FALSE]
  fit &lt;- curve(x,rate)
  plot(fit)


# Use ECB example data
rate &lt;- ecb$rate
x &lt;- ecb$x[,1,drop=FALSE]
fit &lt;- npcurve(x,rate)
plot(fit)

</code></pre>

<hr>
<h2 id='predict.curvir'>Predict method for curvir reserve demand models</h2><span id='topic+predict.curvir'></span><span id='topic+predict.npcurvir'></span>

<h3>Description</h3>

<p>Predicted values based on curvir model object
</p>
<p>Predicted values based on npcurvir model object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'curvir'
predict(object, newdata = NULL, newdummy = NULL, ...)

## S3 method for class 'npcurvir'
predict(object, newdata = NULL, newdummy = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict.curvir_+3A_object">object</code></td>
<td>
<p>A model fit with <code><a href="#topic+npcurve">npcurve</a></code>.</p>
</td></tr>
<tr><td><code id="predict.curvir_+3A_newdata">newdata</code></td>
<td>
<p>New input data organised as the x matrix in <code><a href="#topic+curve">curve</a></code>. If <code>NULL</code> then the data used to fit the model is re-used.</p>
</td></tr>
<tr><td><code id="predict.curvir_+3A_newdummy">newdummy</code></td>
<td>
<p>New input dummy organised as the dummy vector in <code><a href="#topic+curve">curve</a></code>. If <code>NULL</code> then the dummy used to fit the model is re-used.</p>
</td></tr>
<tr><td><code id="predict.curvir_+3A_...">...</code></td>
<td>
<p>Further arguments (unused)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a matrix of predicted values. If the model has estimates for intervals then it will provide upper and lower intervals.
</p>
<p>Returns a matrix of predicted values. If the model has estimates for intervals then it will provide upper and lower intervals.
</p>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>predict(curvir)</code>: Predicted values for parametric curves
</p>
</li>
<li> <p><code>predict(npcurvir)</code>: Predicted values for non-parametric curves
</p>
</li></ul>


<h3>Author(s)</h3>

<p>Nikolaos Kourentzes, <a href="mailto:nikolaos@kourentzes.com">nikolaos@kourentzes.com</a>
</p>


<h3>References</h3>

<p>Chen, Z., Kourentzes, N., &amp; Veyrune, R. (2023). <a href="https://www.imf.org/en/Publications/WP/Issues/2023/09/01/Modeling-the-Reserve-Demand-to-Facilitate-Central-Bank-Operations-538754">Modeling the Reserve Demand to Facilitate Central Bank Operations.</a> IMF Working Papers, 2023(179).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+curve">curve</a></code>.
</p>
<p><code><a href="#topic+npcurve">npcurve</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

  # Use ECB example data
  rate &lt;- ecb$rate
  x &lt;- ecb$x[,1,drop=FALSE]
  fit &lt;- curve(x,rate)
  predict(fit)

  # An example with new data
  predict(fit,newdata=tail(x))
 

# Use ECB example data
rate &lt;- ecb$rate
x &lt;- ecb$x[,1,drop=FALSE]
fit &lt;- npcurve(x,rate)
predict(fit)

</code></pre>

<hr>
<h2 id='varselect'>Automatically select explanatory variables for a curve type</h2><span id='topic+varselect'></span>

<h3>Description</h3>

<p>Using cross-validation automatically select explanatory variables for a reserve
demand curve type.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>varselect(
  x,
  y,
  type = "logistic",
  folds = 10,
  constant = c(TRUE, FALSE),
  sign = NULL,
  reps = 3,
  search = c("backward", "forward"),
  wsel = c("select", "combine"),
  dummy = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="varselect_+3A_x">x</code></td>
<td>
<p>A matrix of explanatory variables. Excess reserve must be the first input.Additional regressor follow (optional).</p>
</td></tr>
<tr><td><code id="varselect_+3A_y">y</code></td>
<td>
<p>A vector of normalised interest rates.</p>
</td></tr>
<tr><td><code id="varselect_+3A_type">type</code></td>
<td>
<p>The type of the reserve demand curve. This can be any of <code>logistic</code>, <code>redLogistic</code>, <code>fixLogistic</code>, <code>doubleExp</code>, <code>exponential</code>, <code>fixExponential</code>, <code>arctan</code>, <code>linear</code>. See details in <code><a href="#topic+curve">curve</a></code></p>
</td></tr>
<tr><td><code id="varselect_+3A_folds">folds</code></td>
<td>
<p>Folds to use for cross-validation.</p>
</td></tr>
<tr><td><code id="varselect_+3A_constant">constant</code></td>
<td>
<p>A logical (<code>TRUE</code> or <code>FALSE</code>) whether to include a constant or not.</p>
</td></tr>
<tr><td><code id="varselect_+3A_sign">sign</code></td>
<td>
<p>A vector of equal length to the number of additional regressors in <code>x</code> (excluding the constant (if used) and the excess reserves) of positive and negative values (any) that will be used to obtain signs to restrict the values of the estimated parameters. Use <code>NULL</code> for no restrictions.</p>
</td></tr>
<tr><td><code id="varselect_+3A_reps">reps</code></td>
<td>
<p>Number of repetitions for the particle swarm optimisation.</p>
</td></tr>
<tr><td><code id="varselect_+3A_search">search</code></td>
<td>
<p>Search strategy for variable inclusion. With <code>forward</code> the model starts from no explanatory variables, and evaluates potential additions. With <code>backward</code> the model starts with all variables and evaluates for potential exclusions.</p>
</td></tr>
<tr><td><code id="varselect_+3A_wsel">wsel</code></td>
<td>
<p>Use the minimum error set of parameters (<code>select</code>) or the combination of the pool parameters using the heuristic in Kourentzes et al., (2019) (<code>combine</code>).</p>
</td></tr>
<tr><td><code id="varselect_+3A_dummy">dummy</code></td>
<td>
<p>Optional input to signify a regime change (vertical shifts in the curve). Must be a vector of equal length to the rows of <code>x</code>. If not needed use <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list with the recommended variable selection choice:
</p>

<ul>
<li> <p><code>keep</code> a logical vector with which variables to keep.
</p>
</li>
<li> <p><code>errors</code> statistics of the cross-validated MSE error.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nikolaos Kourentzes, <a href="mailto:nikolaos@kourentzes.com">nikolaos@kourentzes.com</a>
</p>


<h3>References</h3>

<p>Chen, Z., Kourentzes, N., &amp; Veyrune, R. (2023). <a href="https://www.imf.org/en/Publications/WP/Issues/2023/09/01/Modeling-the-Reserve-Demand-to-Facilitate-Central-Bank-Operations-538754">Modeling the Reserve Demand to Facilitate Central Bank Operations.</a> IMF Working Papers, 2023(179).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+curve">curve</a></code>, and <code><a href="#topic+cvfit">cvfit</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  # Use ECB example data
  rate &lt;- ecb$rate
  x &lt;- ecb$x[,1:3,drop=FALSE]
  varKeep &lt;- varselect(x,rate,folds=5)
  # Print result
  print(varKeep)
  # Fit curve with the selected variables
  curve(x[,varKeep$keep,drop=FALSE],rate)


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
