<!DOCTYPE html><html><head><title>Help for package EpiSignalDetection</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {EpiSignalDetection}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#aggAtlasExport'><p>Aggregate filtered final Atlas export</p></a></li>
<li><a href='#AlgoParam'><p>List of datasets containing the Farrington Flexible and GLRNB default parameters by time unit</p></a></li>
<li><a href='#algoSD'><p>Build algo object</p></a></li>
<li><a href='#cleanAtlasExport'><p>Clean the Atlas export dataframe</p></a></li>
<li><a href='#filterAtlasExport'><p>Filter clean Atlas export</p></a></li>
<li><a href='#importAtlasExport'><p>Import ECDC Atlas export file (csv)</p></a></li>
<li><a href='#plotSD'><p>Plot the Signal Detection time series</p></a></li>
<li><a href='#runEpiSDApp'><p>Run the EpiSignalDectection 'shiny' application</p></a></li>
<li><a href='#runEpiSDReport'><p>Run the EpiSignalDetection report (HTML markdown)</p></a></li>
<li><a href='#SignalData'><p>Dataset for Signal Detection Analysis, reported cases, 1999-2018 (ECDC Atlas export)</p></a></li>
<li><a href='#stsSD'><p>Build sts object</p></a></li>
<li><a href='#studyPeriod'><p>Compute the study period</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Signal Detection Analysis</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-10-27</td>
</tr>
<tr>
<td>Description:</td>
<td>Exploring time series for signal detection. It is specifically designed
    to detect possible outbreaks using infectious disease surveillance data
    at the European Union / European Economic Area or country level.
    Automatic detection tools used are presented in the paper
    "Monitoring count time series in R: aberration detection in public health surveillance",
    by Salmon (2016) &lt;<a href="https://doi.org/10.18637%2Fjss.v070.i10">doi:10.18637/jss.v070.i10</a>&gt;.
    The package includes:
    - Signal Detection tool, an interactive 'shiny' application
      in which the user can import external data and perform basic signal detection analyses;
    - An automated report in HTML format, presenting the results of the time series analysis in tables and graphs.
      This report can also be stratified by population characteristics (see 'Population' variable).
    This project was funded by the European Centre for Disease Prevention and Control.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://joinup.ec.europa.eu/software/page/eupl">EUPL</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, graphics, ISOweek, rmarkdown, shiny, surveillance,
utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>DT, ggplot2, knitr (&ge; 1.20), pander</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>pandoc (&gt;= 1.12.3)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/EU-ECDC/EpiSignalDetection">https://github.com/EU-ECDC/EpiSignalDetection</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-10-27 16:20:04 UTC; LMC</td>
</tr>
<tr>
<td>Author:</td>
<td>Lore Merdrignac [aut, ctr, cre] (Author of the package and original
    code),
  Joana Gomes Dias [aut, fnd] (Project manager),
  Esther Kissling [aut, ctr],
  Tommi Karki [aut, fnd],
  Margot Einoder-Moreno [ctb, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Lore Merdrignac &lt;l.merdrignac@epiconcept.fr&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-11-30 15:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='aggAtlasExport'>Aggregate filtered final Atlas export</h2><span id='topic+aggAtlasExport'></span>

<h3>Description</h3>

<p>Aggregate filtered final Atlas export
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aggAtlasExport(x, input)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="aggAtlasExport_+3A_x">x</code></td>
<td>
<p>dataframe</p>
</td></tr>
<tr><td><code id="aggAtlasExport_+3A_input">input</code></td>
<td>
<p>list of parameters as defined in the Signal Detection Application (see <code><a href="#topic+runEpiSDApp">runEpiSDApp</a></code>)
</p>
<p>(i.e.  <code>list(disease, country, indicator, stratification, unit, daterange, algo, testingperiod)</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>dataframe aggregated by geographical level and time unit
</p>


<h3>See Also</h3>

<p><code><a href="#topic+filterAtlasExport">filterAtlasExport</a></code> <code><a href="#topic+SignalData">SignalData</a></code> <code><a href="#topic+stsSD">stsSD</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#-- Setting the parameters to run the report for
input &lt;- list(
disease = "Salmonellosis",
country = "EU-EEA - complete series",
indicator = "Reported cases",
stratification = "Confirmed cases",
unit = "Month",
daterange = c("2010-01-01", "2016-12-31"),
algo = "FarringtonFlexible",
testingperiod = 5
)

#-- Example dataset
dataset &lt;- EpiSignalDetection::SignalData

#-- Filtering on declared input parameters
dataset &lt;- filterAtlasExport(dataset, input)

#-- Aggregating the data by geographical level and time point
dataset &lt;- aggAtlasExport(dataset, input)

</code></pre>

<hr>
<h2 id='AlgoParam'>List of datasets containing the Farrington Flexible and GLRNB default parameters by time unit</h2><span id='topic+AlgoParam'></span>

<h3>Description</h3>

<p>A list including two datasets containing the parameters used for Farrington Flexible and for GLRNB
for each time unit available in the Signal Detection tool
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AlgoParam
</code></pre>


<h3>Format</h3>

<p>A list of 2 dataframes: one with 2 rows and 9 variables and GRLNB with 2 rows and 8 variables
</p>

<ol>
<li> <p><strong>Default parameters for FarringtonFlexible algorithm</strong>
</p>

<dl>
<dt>timeunit</dt><dd><p>Time units available in the signal detection tool i.e. week, month</p>
</dd>
<dt>w</dt><dd><p>Window's half-size, i.e. number of weeks to include before and after the current week in each year
(w=2 for weeks, w=1 for months)</p>
</dd>
<dt>reweight</dt><dd><p>Logical specifying whether to reweight past outbreaks or not
(TRUE for both weeks and months, past outbreaks are always reweighted)</p>
</dd>
<dt>trend</dt><dd><p>Logical specifying whether a trend should be included and kept
in case the conditions in the Farrington et. al. paper are met.
(TRUE for both weeks and months, a trend is always fit)</p>
</dd>
<dt>weightsThreshold</dt><dd><p>Numeric defining the threshold for reweighting past outbreaks
using the Anscombe residuals
(2.85 for both weeks and months, as advised in the improved method)</p>
</dd>
<dt>glmWarnings</dt><dd><p>Logical specifying whether to print warnings from the call to glm
(TRUE for both weeks and months)</p>
</dd>
<dt>pThresholdTrend</dt><dd><p>Numeric defining the threshold for deciding whether to keep trend in the model
(0.05 for both weeks and months)</p>
</dd>
<dt>limit54_1</dt><dd><p>Integer, the number of cases defining a threshold for minimum alarm,
no alarm is sounded if fewer than 'limit54_1' cases were reported in the past 'limit54_2' weeks/months</p>
</dd>
<dt>limit54_2</dt><dd><p>Integer, the number of periods defining a threshold for minimum alarm,
no alarm is sounded if fewer than 'limit54_1' cases were reported in the past 'limit54_2' weeks/months</p>
</dd>
</dl>

</li>
<li> <p><strong>Default parameters for GLRNB algorithm</strong>
</p>

<dl>
<dt>timeunit</dt><dd><p>Time units available in the signal detection tool i.e. week, month</p>
</dd>
<dt>mu0</dt><dd><p>A vector of in-control values of the mean of the Poisson / negative binomial distribution
with the same length as range
- NULL for both weeks and months</p>
</dd>
<dt>theta</dt><dd><p>Numeric, the pre-specified value for k or lambda is used in a recursive LR scheme
- log(1.2) for both weeks and months corresponding to a 20 percent increase in the mean</p>
</dd>
<dt>alpha</dt><dd><p>Numeric, the dispersion parameter of the negative binomial distribution.
If alpha=NULL the parameter is calculated as part of the in-control estimation
- alpha=NULL for both weeks and months</p>
</dd>
<dt>cARL</dt><dd><p>Numeric, the threshold in the GLR test, i.e. c_gamma - cARL=0.25 for both weeks and months</p>
</dd>
<dt>Mtilde</dt><dd><p>Integer, the number of observations needed before we have a full rank
- Mtilde=1 for both weeks and months</p>
</dd>
<dt>M</dt><dd><p>Integer defining the number of time instances back in time in the window-limited approach.
To always look back until the first observation use M=-1. M=1 for both weeks and months</p>
</dd>
<dt>Change</dt><dd><p>Character string specifying the type of the alternative.
Currently the two choices are intercept and epi
- Change=intercept for both weeks and months</p>
</dd>
</dl>

</li></ol>



<h3>See Also</h3>

<p><code>surveillance::farringtonFlexible</code> <code>surveillance::glrnb</code>
</p>

<hr>
<h2 id='algoSD'>Build algo object</h2><span id='topic+algoSD'></span>

<h3>Description</h3>

<p>Build algo object from an sts object class
using either FarringtonFlexible or GLRNB surveillance algorithm
</p>


<h3>Usage</h3>

<pre><code class='language-R'>algoSD(x.sts, algo = "FarringtonFlexible", timeUnit = "Month", testingPeriod = 5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="algoSD_+3A_x.sts">x.sts</code></td>
<td>
<p>sts class object (see <code><a href="#topic+stsSD">stsSD</a></code> output)</p>
</td></tr>
<tr><td><code id="algoSD_+3A_algo">algo</code></td>
<td>
<p>character string containing the name of the algorithm to use.
Options are &quot;FarringtonFlexible&quot; (default) or &quot;GLRNB&quot;.</p>
</td></tr>
<tr><td><code id="algoSD_+3A_timeunit">timeUnit</code></td>
<td>
<p>character string for the time unit of the time series. Options are &quot;Week&quot; or &quot;Month&quot;.</p>
</td></tr>
<tr><td><code id="algoSD_+3A_testingperiod">testingPeriod</code></td>
<td>
<p>numeric: number of time units (months, weeks) back in time to test the algorithm on
(to detect outbreaks in)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>sts
</p>


<h3>See Also</h3>

<p><code><a href="#topic+stsSD">stsSD</a></code> <code><a href="#topic+plotSD">plotSD</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#-- Setting the parameters to run the report for
input &lt;- list(
disease = "Salmonellosis",
country = "EU-EEA - complete series",
indicator = "Reported cases",
stratification = "Confirmed cases",
unit = "Month",
daterange = c("2010-01-01", "2016-12-31"),
algo = "FarringtonFlexible",
testingperiod = 5
)

#-- Example dataset
dataset &lt;- EpiSignalDetection::SignalData

#-- Filtering on declared input parameters
dataset &lt;- filterAtlasExport(dataset, input)

#-- Aggregating the data by geographical level and time point
dataset &lt;- aggAtlasExport(dataset, input)

#-- Bulding the corresponding sts object
dataset.sts &lt;- stsSD(observedCases = dataset$NumValue,
                     studyPeriod = dataset$StudyPeriod,
                     timeUnit = input$unit,
                     startYM = c(as.numeric(format(as.Date(input$daterange[1], "%Y-%m-%d"), "%Y")),
                                 as.numeric(format(as.Date(input$daterange[1], "%Y-%m-%d"), "%m"))))

#-- Building the corresponding algo object
dataset.algo &lt;- algoSD(dataset.sts,
                       algo = input$algo,
                       timeUnit = input$unit,
                       testingPeriod =
                       input$testingperiod)

</code></pre>

<hr>
<h2 id='cleanAtlasExport'>Clean the Atlas export dataframe</h2><span id='topic+cleanAtlasExport'></span>

<h3>Description</h3>

<p>Clean the Atlas data export dataframe before signal detection analysis <br />
(see <code><a href="#topic+importAtlasExport">importAtlasExport</a></code> and online ECDC Atlas:
<a href="http://atlas.ecdc.europa.eu/public/index.aspx">http://atlas.ecdc.europa.eu/public/index.aspx</a>) <br />
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cleanAtlasExport(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cleanAtlasExport_+3A_x">x</code></td>
<td>
<p>dataframe, usually the ouput of the import function <code>importAtlasExport(x)</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function will: <br />
</p>

<ul>
<li><p> Filter only on case based indicators i.e. 'Reported Cases&quot;
</p>
</li>
<li><p> Create four additional time variables to ease the analysis: <br />
TimeUnit ('Year', 'Month', 'Week'), <br />
TimeYear (xxxx), <br />
TimeMonth (xx) <br />
TimeWeek(xx)
</p>
</li>
<li><p> Keep only variables of interest i.e. &quot;HealthTopic&quot;, &quot;Population&quot;, &quot;Time&quot;, &quot;RegionName&quot;, &quot;NumValue&quot;
</p>
</li></ul>



<h3>Value</h3>

<p>dataframe
</p>


<h3>See Also</h3>

<p><code><a href="#topic+importAtlasExport">importAtlasExport</a></code> <code><a href="#topic+filterAtlasExport">filterAtlasExport</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dataset &lt;- cleanAtlasExport( importAtlasExport(x = 'ECDC_surveillance_data_Anthrax.csv') )

## End(Not run)


</code></pre>

<hr>
<h2 id='filterAtlasExport'>Filter clean Atlas export</h2><span id='topic+filterAtlasExport'></span>

<h3>Description</h3>

<p>Filter clean Atlas export according to input parameters
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filterAtlasExport(x, input, stratified)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filterAtlasExport_+3A_x">x</code></td>
<td>
<p>dataframe, clean Atlas export (see <code><a href="#topic+cleanAtlasExport">cleanAtlasExport</a></code>)</p>
</td></tr>
<tr><td><code id="filterAtlasExport_+3A_input">input</code></td>
<td>
<p>list of parameters as defined in the Signal Detection Application (see <code><a href="#topic+runEpiSDApp">runEpiSDApp</a></code>)
</p>
<p>(i.e.  <code>list(disease, country, indicator, stratification, unit, daterange, algo, testingperiod)</code>)</p>
</td></tr>
<tr><td><code id="filterAtlasExport_+3A_stratified">stratified</code></td>
<td>
<p>a logical value indicating whether the report
should be stratified by <code>Population</code> variable or not (default <code>FALSE</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>dataframe filtered on the selected parameters (input list)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cleanAtlasExport">cleanAtlasExport</a></code> <code><a href="#topic+aggAtlasExport">aggAtlasExport</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#-- Setting the parameters to run the report for
input &lt;- list(
disease = "Salmonellosis",
country = "EU-EEA - complete series",
indicator = "Reported cases",
stratification = "Confirmed cases",
unit = "Month",
daterange = c("2010-01-01", "2016-12-31"),
algo = "FarringtonFlexible",
testingperiod = 5
)

#-- Example dataset
dataset &lt;- EpiSignalDetection::SignalData

#-- Filtering on declared input parameters
dataset &lt;- filterAtlasExport(dataset, input, stratified = FALSE)

</code></pre>

<hr>
<h2 id='importAtlasExport'>Import ECDC Atlas export file (csv)</h2><span id='topic+importAtlasExport'></span>

<h3>Description</h3>

<p>Import ECDC Atlas csv export file <br />
(exported from the online ECDC Atlas:
<a href="http://atlas.ecdc.europa.eu/public/index.aspx">http://atlas.ecdc.europa.eu/public/index.aspx</a>) <br />
e.g. &quot;ECDC_surveillance_data_Anthrax.csv&quot; <br />
</p>


<h3>Usage</h3>

<pre><code class='language-R'>importAtlasExport(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="importAtlasExport_+3A_x">x</code></td>
<td>
<p>file name of a csv file, export from the ECDC Atlas
</p>
<p>(e.g. <code>x = 'ECDC_surveillance_data_Anthrax.csv'</code>)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function will interpret missing reports '-' as NA values
</p>


<h3>Value</h3>

<p>dataframe
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cleanAtlasExport">cleanAtlasExport</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dataset &lt;- importAtlasExport(x = 'ECDC_surveillance_data_Anthrax.csv')

## End(Not run)


</code></pre>

<hr>
<h2 id='plotSD'>Plot the Signal Detection time series</h2><span id='topic+plotSD'></span>

<h3>Description</h3>

<p>Plot the Signal Detection time series including historical data, alarm detection period and alarms
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotSD(x, input, subRegionName, x.sts, x.algo)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotSD_+3A_x">x</code></td>
<td>
<p>dataframe (default <code><a href="#topic+SignalData">SignalData</a></code>)</p>
</td></tr>
<tr><td><code id="plotSD_+3A_input">input</code></td>
<td>
<p>list of parameters as defined in the Signal Detection Application (see <code><a href="#topic+runEpiSDApp">runEpiSDApp</a></code>)
</p>
<p>(i.e.  <code>list(disease, country, indicator, stratification, unit, daterange, algo, testingperiod)</code>)</p>
</td></tr>
<tr><td><code id="plotSD_+3A_subregionname">subRegionName</code></td>
<td>
<p>character string, region label to use in the plot, if different than <code>input$RegionName</code> (optional)</p>
</td></tr>
<tr><td><code id="plotSD_+3A_x.sts">x.sts</code></td>
<td>
<p>sts object (optional), see <code><a href="#topic+stsSD">stsSD</a></code>)</p>
</td></tr>
<tr><td><code id="plotSD_+3A_x.algo">x.algo</code></td>
<td>
<p>algo object (optional), see <code><a href="#topic+algoSD">algoSD</a></code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>plot
</p>


<h3>See Also</h3>

<p><code><a href="#topic+SignalData">SignalData</a></code> <code><a href="#topic+runEpiSDApp">runEpiSDApp</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#-- Setting the parameters to run the report for
input &lt;- list(
disease = "Salmonellosis",
country = "EU-EEA - complete series",
indicator = "Reported cases",
stratification = "Confirmed cases",
unit = "Month",
daterange = c("2010-01-01", "2016-12-31"),
algo = "FarringtonFlexible",
testingperiod = 5
)

#-- Plotting the signal detection output
plotSD(input = input)

</code></pre>

<hr>
<h2 id='runEpiSDApp'>Run the EpiSignalDectection 'shiny' application</h2><span id='topic+runEpiSDApp'></span>

<h3>Description</h3>

<p>Run the 'shiny' interactive application for signal detection analysis
using ECDC Atlas export data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>runEpiSDApp()
</code></pre>


<h3>Details</h3>

<p>Datasets to use in the tool:
</p>

<ul>
<li><p> Default dataset included in the application
(Salmonellosis 2007-2016 or Measles 1999-2018 data);
</p>
</li>
<li><p> External dataset using the &quot;Browse&quot; button in the application:
</p>

<ul>
<li><p>  &ndash;&gt; An export (csv format) from the ECDC Surveillance Atlas of Infectious Diseases:
<a href="http://atlas.ecdc.europa.eu/public/index.aspx">http://atlas.ecdc.europa.eu/public/index.aspx</a>.
</p>
<p>On the ECDC &quot;Surveillance Atlas of Infectious Diseases&quot; web site:
</p>

<ul>
<li><p>1- Choose the disease/health topic to analyse
</p>
</li>
<li><p>2- Export the data (csv) using the default settings
</p>
</li>
<li><p>3- Import the csv in the application
</p>
</li>
<li><p>4- You can now explore the disease time series for signal detection...
</p>
</li></ul>

</li>
<li><p> &ndash;&gt; Any dataset specified as described in the package vignette.
</p>
</li></ul>

</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# --- Run the 'shiny' app
# --- (NB: please open the app in an external browser
# --- in order to facilitate its use)
runEpiSDApp()

## End(Not run)

</code></pre>

<hr>
<h2 id='runEpiSDReport'>Run the EpiSignalDetection report (HTML markdown)</h2><span id='topic+runEpiSDReport'></span>

<h3>Description</h3>

<p>Function to render the markdown report of alarms in HTML format for ECDC Signal Detection Report
</p>


<h3>Usage</h3>

<pre><code class='language-R'>runEpiSDReport(input, stratified, outputfile, run_pandoc = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="runEpiSDReport_+3A_input">input</code></td>
<td>
<p>list of parameters as defined in the Signal Detection Application (see <code><a href="#topic+runEpiSDApp">runEpiSDApp</a></code>)
</p>
<p>(i.e.  <code>list(disease, country, indicator, stratification, unit, daterange, algo, testingperiod)</code>)
</p>
<p>(see also default parameters in
<code>system.file("SignalDetectionReport_HTML", "SignalDetectionReport.Rmd", package = "EpiSignalDetection")</code>)</p>
</td></tr>
<tr><td><code id="runEpiSDReport_+3A_stratified">stratified</code></td>
<td>
<p>a logical value indicating whether the report
should be stratified by <code>Population</code> variable or not (default <code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="runEpiSDReport_+3A_outputfile">outputfile</code></td>
<td>
<p>output file name (e.g. <code>'C:/R/report.html'</code>)
</p>
<p>(default value is a temporary folder - <code>file.path(tempdir(), "SignalDectectionReport.html")</code>)</p>
</td></tr>
<tr><td><code id="runEpiSDReport_+3A_run_pandoc">run_pandoc</code></td>
<td>
<p>An option for whether to run pandoc to convert Markdown
output.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Datasets to use in the report:
</p>

<ul>
<li><p> Default dataset included in the package
(Salmonellosis 2007-2016 or Measles 1999-2018 data) (i.e.  <code>input$file = NULL</code>);
</p>
</li>
<li><p> External dataset:
</p>

<ul>
<li><p>  &ndash;&gt; An export (csv format) from the ECDC Surveillance Atlas of Infectious Diseases:
<a href="http://atlas.ecdc.europa.eu/public/index.aspx">http://atlas.ecdc.europa.eu/public/index.aspx</a>.
</p>
<p>On the ECDC &quot;Surveillance Atlas of Infectious Diseases&quot; web site:
</p>

<ul>
<li><p>1- Choose the disease/health topic to analyse
</p>
</li>
<li><p>2- Export the data (csv) using the default settings
</p>
</li>
<li><p>3- Specify the location of this external dataset in the input
argument of the runEpiSDReport() function
(e.g.  <code>input &lt;- list(file = list(datapath = "C:/Users/Downloads/ECDC_surveillance_data_Pertussis.csv"),
      disease = "Pertussis", country = "Greece", indicator = "Reported cases",
      stratification = "All cases", unit = "Month", daterange = c("2011-12-01", "2016-12-01"),
      algo = "FarringtonFlexible", testingperiod = 3))</code>
</p>
</li>
<li><p>4- You can now render the re markdown report...
(e.g.  <code>runEpiSDReport(input = input)</code>)
</p>
</li></ul>

</li>
<li><p> &ndash;&gt; Any dataset specified as described in the package vignette.
</p>
</li></ul>

</li></ul>



<h3>Value</h3>

<p>An HTML report.
When <code>run_pandoc = TRUE</code>, the compiled document is written into
the output file, and the path of the output file is returned. When
<code>run_pandoc = FALSE</code>, the path of the Markdown output file, with
attributes <code>knit_meta</code> (the <span class="pkg">knitr</span> meta data collected from code
chunks) and <code>intermediates</code> (the intermediate files/directories
generated by <code>render()</code>)
</p>


<h3>See Also</h3>

<p>Default dataset used in the report <code><a href="#topic+SignalData">SignalData</a></code>
</p>
<p>Signal Detection Application <code><a href="#topic+runEpiSDApp">runEpiSDApp</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
#-- Running the report as a standalone function
runEpiSDReport()    #Definition of each input parameter
                     #is done one by one through the R console

#---&gt; OR

#-- First setting the parameters to run the report for
input &lt;- list(
disease = "Salmonellosis",
country = "Portugal",
indicator = "Reported cases",
stratification = "Confirmed cases",
unit = "Month",
daterange = c("2011-01-01", "2016-12-31"),
algo = "FarringtonFlexible",
testingperiod = 6
)

#-- Second running the report based on the EpiSignalDetection::SignalData dataset
#-- and store it in a temporary folder
runEpiSDReport(input = input)

#-- Running the report based on the EpiSignalDetection::SignalData dataset
#-- and store the HTML output 'test.html' in the folder 'C:/R/'
runEpiSDReport(input = input, outputfile = "C:/R/test.html")

#-- Running the report based on external data
input &lt;- list(
file = list(datapath = "C:/Users/Downloads/ECDC_surveillance_data_Pertussis.csv"),
disease = "Pertussis",
country = "Greece",
indicator = "Reported cases",
stratification = "All cases",
unit = "Month",
daterange = c("2011-12-01", "2016-12-01"),
algo = "FarringtonFlexible",
testingperiod = 3
)

runEpiSDReport(input = input, stratified = TRUE)

## End(Not run)


</code></pre>

<hr>
<h2 id='SignalData'>Dataset for Signal Detection Analysis, reported cases, 1999-2018 (ECDC Atlas export)</h2><span id='topic+SignalData'></span>

<h3>Description</h3>

<p>A dataset containing an export from the ECDC Atlas for salmonellosis and measles data.
This export is cleaned and ready for Signal Detection Analysis (see. cleanAtlasExport() )
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SignalData
</code></pre>


<h3>Format</h3>

<p>A data frame with 80,834 rows and 11 variables:
</p>

<dl>
<dt>HealthTopic</dt><dd><p>Disease name e.g. Salmonellosis or Measles</p>
</dd>
<dt>Population</dt><dd><p>Population characteristics e.g. All cases, Confirmed cases, Serotype AGONA,
Serotype BAREILLY etc.</p>
</dd>
<dt>Indicator</dt><dd><p>Indicator e.g. Hospitalised cases, Reported cases, Number of deaths, etc.</p>
</dd>
<dt>Time</dt><dd><p>Time variable including both yearly data from 1999 to 2017, and monthly data from 1999-01 to 2018-02</p>
</dd>
<dt>RegionName</dt><dd><p>Geographical level including country names e.g. Austria, Belgium, Bulgaria, etc.</p>
</dd>
<dt>NumValue</dt><dd><p>Number of cases</p>
</dd>
<dt>TimeUnit</dt><dd><p>Time unit corresponding to the format of the date in the 'Time' variable  e.g. Year or Month</p>
</dd>
<dt>TimeYear</dt><dd><p>Year of the date available in the 'Time' variable, regardless of the date format
i.e. 1999 to 2018</p>
</dd>
<dt>TimeMonth</dt><dd><p>Month of the date available in the 'Time' variable, regardless of the date format i.e. 1 to 12</p>
</dd>
<dt>TimeWeek</dt><dd><p>Week of the date available in the 'Time' variable, regardless of the date format
i.e. NA since this dataset does not include any weekly data</p>
</dd>
<dt>TimeDate</dt><dd><p>Approximated date corresponding to the date available in the 'Time' variable  (daily format)</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="http://atlas.ecdc.europa.eu/public/index.aspx">http://atlas.ecdc.europa.eu/public/index.aspx</a>
</p>

<hr>
<h2 id='stsSD'>Build sts object</h2><span id='topic+stsSD'></span>

<h3>Description</h3>

<p>Build sts surveillance object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stsSD(observedCases, studyPeriod, timeUnit = "Month", startYM = c(2000, 1) )
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stsSD_+3A_observedcases">observedCases</code></td>
<td>
<p>numeric vector of the number of cases by time unit (y axis of the time series)</p>
</td></tr>
<tr><td><code id="stsSD_+3A_studyperiod">studyPeriod</code></td>
<td>
<p>vector of dates of length(obeservedCases) (x axis of the time series)</p>
</td></tr>
<tr><td><code id="stsSD_+3A_timeunit">timeUnit</code></td>
<td>
<p>character string for the time unit of the time series. Options are Week or Month.</p>
</td></tr>
<tr><td><code id="stsSD_+3A_startym">startYM</code></td>
<td>
<p>numeric vector including Year and Month of start of the historical data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>sts
</p>


<h3>See Also</h3>

<p><code><a href="#topic+aggAtlasExport">aggAtlasExport</a></code> <code><a href="#topic+algoSD">algoSD</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#-- Setting the parameters to run the report for
input &lt;- list(
disease = "Salmonellosis",
country = "EU-EEA - complete series",
indicator = "Reported cases",
stratification = "Confirmed cases",
unit = "Month",
daterange = c("2010-01-01", "2016-12-31"),
algo = "FarringtonFlexible",
testingperiod = 5
)

#-- Example dataset
dataset &lt;- EpiSignalDetection::SignalData

#-- Filtering on declared input parameters
dataset &lt;- filterAtlasExport(dataset, input)

#-- Aggregating the data by geographical level and time point
dataset &lt;- aggAtlasExport(dataset, input)

#-- Bulding the corresponding sts object
dataset.sts &lt;- stsSD(observedCases = dataset$NumValue,
                     studyPeriod = dataset$StudyPeriod,
                     timeUnit = input$unit,
                     startYM = c(as.numeric(format(as.Date(input$daterange[1], "%Y-%m-%d"), "%Y")),
                                 as.numeric(format(as.Date(input$daterange[1], "%Y-%m-%d"), "%m"))))

</code></pre>

<hr>
<h2 id='studyPeriod'>Compute the study period</h2><span id='topic+studyPeriod'></span>

<h3>Description</h3>

<p>Compute a dataframe including two types of dates corresponding
to the study period defined in the list of parameters <code>input</code> <br />
(i.e. <code>StudyPeriod</code> = approximated daily date; <code>Time</code> = exact date in the format according to the time unit parameter)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>studyPeriod(input)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="studyPeriod_+3A_input">input</code></td>
<td>
<p>list of parameters as defined in the Signal Detection Application (see <code><a href="#topic+runEpiSDApp">runEpiSDApp</a></code>)
</p>
<p>(i.e.  <code>list(disease, country, indicator, stratification, unit, daterange, algo, testingperiod)</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Dataframe including the complete time series with no gaps:
</p>
<table>
<tr><td><code>StudyPeriod</code></td>
<td>
<p>approximated daily date e.g. <code>2010-01-01</code></p>
</td></tr>
<tr><td><code>Time</code></td>
<td>
<p>exact date in the format according to the time unit parameter e.g. <code>2010-01</code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>#-- Setting the parameters to run the report for
input &lt;- list(
disease = "Salmonellosis",
country = "EU-EEA - complete series",
indicator = "Reported cases",
stratification = "Confirmed cases",
unit = "Month",
daterange = c("2010-01-01", "2016-12-31"),
algo = "FarringtonFlexible",
testingperiod = 5
)

StudyPeriod &lt;- studyPeriod(input)
head(StudyPeriod)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
