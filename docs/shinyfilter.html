<!DOCTYPE html><html><head><title>Help for package shinyfilter</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {shinyfilter}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#define_filters'><p>Define the set of interdependent filters</p></a></li>
<li><a href='#event'><p>Get JavaScript code for filters' selectizeInput onchange event</p></a></li>
<li><a href='#update_filters'><p>Update the filter options in each filter when the selection</p>
in any of the filters changes</a></li>
<li><a href='#update_tooltips'><p>Update the tooltips/popovers based on the currently available filter</p>
options</a></li>
<li><a href='#use_tooltips'><p>Add tooltip functionality to the app</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Use Interdependent Filters on Table Columns in Shiny Apps</td>
</tr>
<tr>
<td>Description:</td>
<td>Allows to connect 'selectizeInputs' widgets as filters to a 'reactable' table. 
  As known from spreadsheet applications, column filters are interdependent, so each 
  filter only shows the values that are really available at the moment based on 
  the current selection in other filters. Filter values currently not available 
  (and also those being available) can be shown via popovers or tooltips.</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Joachim Zuckarelli &lt;joachim@zuckarelli.de&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>shiny, reactable, shinyBS, shinyjs, stringr</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jsugarelli/shinyfilter/issues">https://github.com/jsugarelli/shinyfilter/issues</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/jsugarelli/shinyfilter/">https://github.com/jsugarelli/shinyfilter/</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-05-10 19:19:39 UTC; zucka</td>
</tr>
<tr>
<td>Author:</td>
<td>Joachim Zuckarelli
    <a href="https://orcid.org/0000-0002-9280-3016"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre]</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-05-10 20:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='define_filters'>Define the set of interdependent filters</h2><span id='topic+define_filters'></span>

<h3>Description</h3>

<p>Installs the filters and binds them to the <code>reactable</code>
widget and the dataframe presented in the <code>reactable</code>.
</p>
<p><code>define_filters()</code> needs to be called in the server function of any
shiny app using <code>shinyfilter</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>define_filters(input, react_id, filters, data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="define_filters_+3A_input">input</code></td>
<td>
<p>The input object provided as an argument to the server function.</p>
</td></tr>
<tr><td><code id="define_filters_+3A_react_id">react_id</code></td>
<td>
<p>Object ID/input slot of the <code>reactable</code> which the
filters will be linked to.</p>
</td></tr>
<tr><td><code id="define_filters_+3A_filters">filters</code></td>
<td>
<p>A named character vector with the column names of the
dataframe that will be filtered. The <em>names</em> of the vector elements
are the object IDs/input slots of the respective <code>selectizeInput()</code>
widgets used as filters.</p>
</td></tr>
<tr><td><code id="define_filters_+3A_data">data</code></td>
<td>
<p>The (unfiltered) dataframe presented in the <code>reactable</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For a full example of a shiny app using <code>shinyfilter</code> please
call up the help for <code><a href="#topic+update_filters">update_filters</a>()</code>. See the
<code>README.md</code> file or the GitHub repo on
<a href="https://github.com/jsugarelli/shinyfilter">https://github.com/jsugarelli/shinyfilter</a>
for a comprehensive <code>shinyfilter</code> tutorial.
</p>


<h3>Value</h3>

<p>No return value.
</p>

<hr>
<h2 id='event'>Get JavaScript code for filters' selectizeInput onchange event</h2><span id='topic+event'></span>

<h3>Description</h3>

<p>Helper function to create the JavaScript event handler code for
the <code>selectizeInput</code> filters of a shiny app using <code>shinyfilters</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>event(name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="event_+3A_name">name</code></td>
<td>
<p>Name of the event/input variable set by the <code>selectizeInput</code>
filters whenever the selection changes. Can be handled in a call of
<code>observeEvent()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Processing the <code>onChange</code> event of the <code>selectizeInput</code>
widgets that serve as the filters is necessary so that filters all the
other <code>shinyfilter</code> filters bound to the same <code>reactable</code> can be
updated accordingly and show the currently available filter options. All
<code>selectizeInput</code> should have exactly the same event handler.
</p>
<p>You can of course create the JavaScript code for the <code>onChange</code> event
handler function yourself, especially if you want to trigger additional
operations in JavaScript whenever an <code>onChange</code> event occurs.
<code>event()</code> function is just intended as a shortcut to save time and
effort.
</p>
<p>For a full example of a shiny app using <code>shinyfilter</code> please call up
the help for <code><a href="#topic+update_filters">update_filters</a>()</code>. See the <code>README.md</code> file
or the GitHub repo on
<a href="https://github.com/jsugarelli/shinyfilter">https://github.com/jsugarelli/shinyfilter</a>
for a comprehensive <code>shinyfilter</code> tutorial.
</p>


<h3>Value</h3>

<p>JavaScript code for the <code>onChange</code> event.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>event("myEvent")

</code></pre>

<hr>
<h2 id='update_filters'>Update the filter options in each filter when the selection
in any of the filters changes</h2><span id='topic+update_filters'></span>

<h3>Description</h3>

<p>Updates all filters linked to a <code>reactable</code>. As
<code>shinyfilter</code> filters are interdependent, <code>update_filters()</code>
makes sure that each filter (<code>selectizeInput</code> widget) only shows the
filter options currently available, given the selection in all other
filters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_filters(input, session, react_id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_filters_+3A_input">input</code></td>
<td>
<p>The input object provided as an argument to the server function.</p>
</td></tr>
<tr><td><code id="update_filters_+3A_session">session</code></td>
<td>
<p>The session variable provided as an argument to the server
function.</p>
</td></tr>
<tr><td><code id="update_filters_+3A_react_id">react_id</code></td>
<td>
<p>The output variable/ID of the <code>reactable</code> for which
filters will be updated.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See below for a full example of a shiny app using
<code>shinyfilter</code>. See the <code>README.md</code> file or the GitHub repo on
<a href="https://github.com/jsugarelli/shinyfilter">https://github.com/jsugarelli/shinyfilter</a>
for a comprehensive <code>shinyfilter</code> tutorial.
</p>


<h3>Value</h3>

<p>The filtered dataframe to be presented in the <code>reactable</code>
widget. Ideally, this is captured in a reactive value so that the
<code>reactable</code> updates automatically.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()) {
  library(shiny)
  library(reactable)
  library(shinyfilter)

  cars_csv &lt;- system.file("cars.csv", package="shinyfilter")

  cars &lt;- read.csv(cars_csv, stringsAsFactors = FALSE, header = TRUE, encoding = "UTF-8")

  app = shinyApp(
    ui &lt;- fluidPage(
      titlePanel("Cars Database"),
      sidebarLayout(
        sidebarPanel(
          width = 2,

          selectizeInput(inputId = "sel_manufacturer", label = "Manufacturer",
                         multiple = TRUE, options = list(onChange = event("ev_click")),
                         choices = sort(unique(cars$manufacturer))),

          selectizeInput(inputId = "sel_year", label = "Year",
                         multiple = TRUE, options = list(onChange = event("ev_click")),
                         choices = sort(unique(cars$year))),

          selectizeInput(inputId = "sel_fuel", label = "Fuel",
                         multiple = TRUE, options = list(onChange = event("ev_click")),
                         choices = sort(unique(cars$fuel))),

          selectizeInput(inputId = "sel_condition", label = "Condition",
                         multiple = TRUE, options = list(onChange = event("ev_click")),
                         choices = sort(unique(cars$condition))),

          selectizeInput(inputId = "sel_size", label = "Size",
                         multiple = TRUE, options = list(onChange = event("ev_click")),
                         choices = sort(unique(cars$size))),

          selectizeInput(inputId = "sel_transmission", label = "Transmission",
                         multiple = TRUE, options = list(onChange = event("ev_click")),
                         choices = sort(unique(cars$transmission))),

          selectizeInput(inputId = "sel_color", label = "Color",
                         multiple = TRUE, options = list(onChange = event("ev_click")),
                         choices = sort(unique(cars$paint_color))),

          selectizeInput(inputId = "sel_type", label = "Type",
                         multiple = TRUE, options = list(onChange = event("ev_click")),
                         choices = sort(unique(cars$type))),
          use_tooltips(background = "#'  1B3F8C", foreground = "#'  FFFFFF")
        ),
        mainPanel(
          reactableOutput(outputId = "tbl_cars")
        )
      )
    ),


    server = function(input, output, session) {

      r &lt;- reactiveValues(mycars = cars)

      define_filters(input,
                     "tbl_cars",
                     c(sel_manufacturer = "manufacturer",
                       sel_year = "year",
                       sel_fuel = "fuel",
                       sel_condition = "condition",
                       sel_size = "size",
                       sel_transmission = "transmission",
                       sel_color = "paint_color",
                       sel_type = "type"),
                     cars)


      observeEvent(input$ev_click, {
        r$mycars &lt;- update_filters(input, session, "tbl_cars")
        update_tooltips("tbl_cars",
                        session,
                        tooltip = TRUE,
                        title_avail = "Available is:",
                        title_nonavail = "Currently not available is:",
                        popover_title = "My filters",
                        max_avail = 10,
                        max_nonavail = 10)
      })


      output$tbl_cars &lt;- renderReactable({
        reactable(data = r$mycars,
                  filterable = TRUE,
                  rownames = FALSE,
                  selection = "multiple",
                  showPageSizeOptions = TRUE,
                  paginationType = "jump",
                  showSortable = TRUE,
                  highlight = TRUE,
                  resizable = TRUE,
                  rowStyle = list(cursor = "pointer"),
                  onClick = "select"
        )
      })

    }
   )

   runApp(app)
 }

</code></pre>

<hr>
<h2 id='update_tooltips'>Update the tooltips/popovers based on the currently available filter
options</h2><span id='topic+update_tooltips'></span>

<h3>Description</h3>

<p>Updates all tooltips or popovers for <code>shinyfilter</code> filter
<code>selectizeInput</code> widgets. Tooltips/popovers can be used to show the
currently unavailable filter options, i.e. the filter options that are not
available at the moment because of the dataframe presented in the
<code>reactable</code> is filtered by the choices made in the other filters. It
is also possible to list the available filter options as well.
</p>
<p>If you want to use tooltips/popovers, you need to call
<code><a href="#topic+use_tooltips">use_tooltips</a>()</code> from within the UI definition of your shiny
app.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_tooltips(
  react_id,
  session,
  tooltip = TRUE,
  show_avail = TRUE,
  title_avail = "Available values:",
  title_nonavail = "Currently not available filters:",
  popover_title = "Filter options",
  max_avail = NULL,
  max_nonavail = max_avail,
  more_avail = "... (# more)",
  more_nonavail = "... (# more)",
  placement = "top"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_tooltips_+3A_react_id">react_id</code></td>
<td>
<p>The output variable/ID of the <code>reactable</code> to which the
filters are linked.</p>
</td></tr>
<tr><td><code id="update_tooltips_+3A_session">session</code></td>
<td>
<p>The session variable provided as an argument to the server
function.</p>
</td></tr>
<tr><td><code id="update_tooltips_+3A_tooltip">tooltip</code></td>
<td>
<p>If <code>TRUE</code>, tooltips will be shown. If <code>FALSE</code>,
popovers will be shown.</p>
</td></tr>
<tr><td><code id="update_tooltips_+3A_show_avail">show_avail</code></td>
<td>
<p>If <code>TRUE</code> not only the unavailable filter options will
be listed in the tooltips/popovers, but the unavailable ones as well.</p>
</td></tr>
<tr><td><code id="update_tooltips_+3A_title_avail">title_avail</code></td>
<td>
<p>Header text for the list of available filter options.</p>
</td></tr>
<tr><td><code id="update_tooltips_+3A_title_nonavail">title_nonavail</code></td>
<td>
<p>Header text for the list of unavailable filter options.</p>
</td></tr>
<tr><td><code id="update_tooltips_+3A_popover_title">popover_title</code></td>
<td>
<p>Title text for the popover window. Only relevant when
<code>tooltips = FALSE</code>.</p>
</td></tr>
<tr><td><code id="update_tooltips_+3A_max_avail">max_avail</code></td>
<td>
<p>Maximum number of available filter options shown. Use the
<code>more_avail</code> argument to determine what is shown if the number of
available filter options exceeds <code>max_avail</code>.</p>
</td></tr>
<tr><td><code id="update_tooltips_+3A_max_nonavail">max_nonavail</code></td>
<td>
<p>Maximum number of non-available filter options shown. Use
the <code>more_nonavail</code> argument to determine what is shown if the number
of non-available filter options exceeds <code>max_nonavail</code>.</p>
</td></tr>
<tr><td><code id="update_tooltips_+3A_more_avail">more_avail</code></td>
<td>
<p>Text to be shown if <code>show_avail = TRUE</code> and the number
of available filter options exceeds <code>max_avail</code>. In this case, only
the first <code>max_avail</code> filter options are shown followed by
<code>more_avail</code>. In <code>more_avail</code> you can use <code>#</code> as a
placeholder for the number of filter options exceeding <code>max_avail</code>.</p>
</td></tr>
<tr><td><code id="update_tooltips_+3A_more_nonavail">more_nonavail</code></td>
<td>
<p>Text to be shown if the number of available filter
options exceeds <code>max_nonavail</code>. In this case, only the first
<code>max_nonavail</code> filter options are shown followed by
<code>more_nonavail</code>. In <code>more_nonavail</code> you can use <code>#</code> as a
placeholder for the number of filter options exceeding <code>max_nonavail</code>.</p>
</td></tr>
<tr><td><code id="update_tooltips_+3A_placement">placement</code></td>
<td>
<p>Defines where the tooltip/popover is placed relative to the
filter (i.e. <code>selectizeInput</code> widget) it belongs to. Can be either
<code>"top"</code>, <code>"bottom"</code>, <code>"left"</code> or <code>"right"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For a full example of a shiny app using <code>shinyfilter</code> please
call up the help for <code><a href="#topic+update_filters">update_filters</a>()</code>. See the
<code>README.md</code> file or the GitHub repo on
<a href="https://github.com/jsugarelli/shinyfilter">https://github.com/jsugarelli/shinyfilter</a>
for a comprehensive <code>shinyfilter</code> tutorial.
</p>
<p><b>Tip</b>: If your tooltips/popovers do not show up, attach the
<code>shinyBS</code> package directly in your Shiny app by adding
<code>library(shinyBS)</code> to your code. The <code>shinyBS</code> package is used to
create the tooltips and popovers.
</p>


<h3>Value</h3>

<p>No return value.
</p>

<hr>
<h2 id='use_tooltips'>Add tooltip functionality to the app</h2><span id='topic+use_tooltips'></span>

<h3>Description</h3>

<p>Prepares the application for the use of tooltips or popovers to
show the (un)available filter options. <code>use_tooltips()</code> needs to be
called from within the UI definition of your shiny app. See
<code><a href="#topic+update_tooltips">update_tooltips</a>()</code> for how to create the actual tooltips or
popovers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>use_tooltips(
  background = "#000000",
  foreground = "#FFFFFF",
  textalign = "left",
  fontsize = "100%",
  opacity = 0.8
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="use_tooltips_+3A_background">background</code></td>
<td>
<p>Background color of the tooltips/popovers the in CSS hex
format.</p>
</td></tr>
<tr><td><code id="use_tooltips_+3A_foreground">foreground</code></td>
<td>
<p>Font color of the tooltips/popovers the in CSS hex format.</p>
</td></tr>
<tr><td><code id="use_tooltips_+3A_textalign">textalign</code></td>
<td>
<p>Alignment of the text in the tooltips/popovers; either
<code>"left"</code>, <code>"right"</code>, <code>"center"</code> or <code>"justify"</code>.</p>
</td></tr>
<tr><td><code id="use_tooltips_+3A_fontsize">fontsize</code></td>
<td>
<p>Font size of the tooltips/popovers.</p>
</td></tr>
<tr><td><code id="use_tooltips_+3A_opacity">opacity</code></td>
<td>
<p>Opacity of the tooltips/popovers.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For a full example of a shiny app using <code>shinyfilter</code> please
call up the help for <code><a href="#topic+update_filters">update_filters</a>()</code>. See the
<code>README.md</code> file or the GitHub repo on
<a href="https://github.com/jsugarelli/shinyfilter">https://github.com/jsugarelli/shinyfilter</a>
for a comprehensive <code>shinyfilter</code> tutorial.
</p>


<h3>Value</h3>

<p>No return value.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
