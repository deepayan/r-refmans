<!DOCTYPE html><html lang="en"><head><title>Help for package RMM</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {RMM}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#Arrival'><p>Estimating total arrivals and the number of no purchase.</p></a></li>
<li><a href='#Choice_Set'><p>Collects a choice set exposed to individuals.</p></a></li>
<li><a href='#ESTF'><p>Estimating model parameters.</p></a></li>
<li><a href='#ESTF_bp'><p>Estimating model parameters.</p></a></li>
<li><a href='#ESTF_gamma'><p>Estimating model parameter gamma(no-purchase utility).</p></a></li>
<li><a href='#Hotel_Long'><p>Data from a Major Hotel Chain</p></a></li>
<li><a href='#Hotel_Wide'><p>Data from a Major Hotel Chain</p></a></li>
<li><a href='#iloglike'><p>The log-likelihood value for each individual and each alternative.</p></a></li>
<li><a href='#iU'><p>Calculating a value of score function with respect to parameter gamma for each individual and each alternative.</p></a></li>
<li><a href='#loglike'><p>Calculating the log-likelihood function.</p></a></li>
<li><a href='#predict.rmm'><p>Predict method for Revenue Management Model Fits</p></a></li>
<li><a href='#rmm'><p>Fitting Revenue Management Models</p></a></li>
<li><a href='#rmm_reshape'><p>Reshape Long-Format Data</p></a></li>
<li><a href='#Sandwich'><p>Calculating standard error of estimate.</p></a></li>
<li><a href='#U'><p>Calculating a value of score function with respect to parameter gamma.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Revenue Management Modeling</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-04-29</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Chul Kim &lt;statkim7578@yonsei.ac.kr&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>The RMM  fits Revenue Management Models using the RDE(Robust Demand Estimation) method introduced in the paper by &lt;<a href="https://doi.org/10.2139%2Fssrn.3598259">doi:10.2139/ssrn.3598259</a>&gt;, one of the customer choice-based Revenue Management Model. Furthermore, it is possible to select a multinomial model as well as a conditional logit model as a model of RDE.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2.0)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>tibble, magrittr, rlang, dplyr, numDeriv, Rcpp</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-05-06 12:03:59 UTC; chulkim</td>
</tr>
<tr>
<td>Author:</td>
<td>Chul Kim [aut, cre],
  Sanghoon Cho [aut],
  Jongho Im [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-05-09 11:30:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='Arrival'>Estimating total arrivals and the number of no purchase.</h2><span id='topic+Arrival'></span>

<h3>Description</h3>

<p>Estimating total arrivals and the number of no purchase. Internal function that users should not call directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Arrival(
  CCB,
  Attr,
  Choice_Set_List,
  Alts_Same_Choice_Set,
  Is_Purchase,
  Base_Prod,
  Num_Prod,
  Num_Attr
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Arrival_+3A_ccb">CCB</code></td>
<td>
<p>numeric vector, estimated model parameters(gamma and eta).</p>
</td></tr>
<tr><td><code id="Arrival_+3A_attr">Attr</code></td>
<td>
<p>list, a set of data frame in which alternative specific variables.</p>
</td></tr>
<tr><td><code id="Arrival_+3A_choice_set_list">Choice_Set_List</code></td>
<td>
<p>list, product code included for each choice set.</p>
</td></tr>
<tr><td><code id="Arrival_+3A_alts_same_choice_set">Alts_Same_Choice_Set</code></td>
<td>
<p>list, for internal calculation, a list of data exposed to the same choice set.</p>
</td></tr>
<tr><td><code id="Arrival_+3A_is_purchase">Is_Purchase</code></td>
<td>
<p>list, for internal calculation, list of customers who are
exposed to the same choice set who purchased the product. If purchased 1, otherwise 0.</p>
</td></tr>
<tr><td><code id="Arrival_+3A_base_prod">Base_Prod</code></td>
<td>
<p>numeric, the baseline product number</p>
</td></tr>
<tr><td><code id="Arrival_+3A_num_prod">Num_Prod</code></td>
<td>
<p>numeric, the number of all products in observed data.</p>
</td></tr>
<tr><td><code id="Arrival_+3A_num_attr">Num_Attr</code></td>
<td>
<p>numeric, the number of attributes in observed data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The estimated value of total arrivals and the number of no purchase.
</p>

<hr>
<h2 id='Choice_Set'>Collects a choice set exposed to individuals.</h2><span id='topic+Choice_Set'></span>

<h3>Description</h3>

<p>Collects a choice set exposed to individuals. Internal function that users should not call directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Choice_Set(df, num_id, uniq_id, idvar)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Choice_Set_+3A_df">df</code></td>
<td>
<p>a long format tibble.</p>
</td></tr>
<tr><td><code id="Choice_Set_+3A_num_id">num_id</code></td>
<td>
<p>Number of unique Booking_IDs appearing in transaction data</p>
</td></tr>
<tr><td><code id="Choice_Set_+3A_uniq_id">uniq_id</code></td>
<td>
<p>Unique Booking_ID in transaction data.</p>
</td></tr>
<tr><td><code id="Choice_Set_+3A_idvar">idvar</code></td>
<td>
<p>Variable name representing customer id (Booking_ID).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list containing the values required for calculation within the <code><a href="#topic+rmm_reshape">rmm_reshape</a></code> function.
</p>

<hr>
<h2 id='ESTF'>Estimating model parameters.</h2><span id='topic+ESTF'></span>

<h3>Description</h3>

<p>Estimating model parameters except gamma(no-purchase utility). Internal function that users should not call directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ESTF(Alts_Same_Choice_Set, Choice_Set_List, Num_Prod, Num_Attr, Is_Purchase)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ESTF_+3A_alts_same_choice_set">Alts_Same_Choice_Set</code></td>
<td>
<p>list, for internal calculation, a list of data exposed to the same choice set.</p>
</td></tr>
<tr><td><code id="ESTF_+3A_choice_set_list">Choice_Set_List</code></td>
<td>
<p>list, product code included for each choice set.</p>
</td></tr>
<tr><td><code id="ESTF_+3A_num_prod">Num_Prod</code></td>
<td>
<p>numeric, the number of all products in observed data.</p>
</td></tr>
<tr><td><code id="ESTF_+3A_num_attr">Num_Attr</code></td>
<td>
<p>numeric, the number of attributes in observed data.</p>
</td></tr>
<tr><td><code id="ESTF_+3A_is_purchase">Is_Purchase</code></td>
<td>
<p>list, for internal calculation, list of customers who are
exposed to the same choice set who purchased the product. If purchased 1, otherwise 0.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The estimated value of parameters except gamma(no-purchase utility).
</p>

<hr>
<h2 id='ESTF_bp'>Estimating model parameters.</h2><span id='topic+ESTF_bp'></span>

<h3>Description</h3>

<p>Estimating model parameters except gamma(no-purchase utility) when a particular baseline_product is specified. Internal function that users should not call directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ESTF_bp(
  Base_Prod = 1,
  Choice_Set_List,
  Alts_Same_Choice_Set,
  Num_Prod,
  Num_Attr,
  Is_Purchase
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ESTF_bp_+3A_base_prod">Base_Prod</code></td>
<td>
<p>numeric, the baseline product number</p>
</td></tr>
<tr><td><code id="ESTF_bp_+3A_choice_set_list">Choice_Set_List</code></td>
<td>
<p>list, product code included for each choice set.</p>
</td></tr>
<tr><td><code id="ESTF_bp_+3A_alts_same_choice_set">Alts_Same_Choice_Set</code></td>
<td>
<p>list, for internal calculation, a list of data exposed to the same choice set.</p>
</td></tr>
<tr><td><code id="ESTF_bp_+3A_num_prod">Num_Prod</code></td>
<td>
<p>numeric, the number of all products in observed data.</p>
</td></tr>
<tr><td><code id="ESTF_bp_+3A_num_attr">Num_Attr</code></td>
<td>
<p>numeric, the number of attributes in observed data.</p>
</td></tr>
<tr><td><code id="ESTF_bp_+3A_is_purchase">Is_Purchase</code></td>
<td>
<p>list, for internal calculation, list of customers who are
exposed to the same choice set who purchased the product. If purchased 1, otherwise 0.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The estimated value of parameters except gamma(no-purchase utility) when a particular baseline_product is specified.
</p>

<hr>
<h2 id='ESTF_gamma'>Estimating model parameter gamma(no-purchase utility).</h2><span id='topic+ESTF_gamma'></span>

<h3>Description</h3>

<p>Estimating model parameter gamma(no-purchase utility) given estimated model parameters. Internal function that users should not call directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ESTF_gamma(
  eta_wo_k,
  Attr,
  Choice_Set_List,
  Alts_Same_Choice_Set,
  Is_Purchase,
  Base_Prod,
  Num_Prod,
  Num_Attr,
  cond
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ESTF_gamma_+3A_attr">Attr</code></td>
<td>
<p>list, a set of data frame in which alternative specific variables.</p>
</td></tr>
<tr><td><code id="ESTF_gamma_+3A_choice_set_list">Choice_Set_List</code></td>
<td>
<p>list, product code included for each choice set.</p>
</td></tr>
<tr><td><code id="ESTF_gamma_+3A_alts_same_choice_set">Alts_Same_Choice_Set</code></td>
<td>
<p>list, for internal calculation, a list of data exposed to the same choice set.</p>
</td></tr>
<tr><td><code id="ESTF_gamma_+3A_is_purchase">Is_Purchase</code></td>
<td>
<p>list, for internal calculation, list of customers who are
exposed to the same choice set who purchased the product. If purchased 1, otherwise 0.</p>
</td></tr>
<tr><td><code id="ESTF_gamma_+3A_base_prod">Base_Prod</code></td>
<td>
<p>numeric, the baseline product number</p>
</td></tr>
<tr><td><code id="ESTF_gamma_+3A_num_prod">Num_Prod</code></td>
<td>
<p>numeric, the number of all products in observed data.</p>
</td></tr>
<tr><td><code id="ESTF_gamma_+3A_num_attr">Num_Attr</code></td>
<td>
<p>numeric, the number of attributes in observed data.</p>
</td></tr>
<tr><td><code id="ESTF_gamma_+3A_cond">cond</code></td>
<td>
<p>numeric, the value associated with prop, which is the argument of the <code><a href="#topic+rmm">rmm</a></code> function. (1-prop)/prop.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The estimated value of parameters except gamma(no-purchase utility).
</p>

<hr>
<h2 id='Hotel_Long'>Data from a Major Hotel Chain</h2><span id='topic+Hotel_Long'></span>

<h3>Description</h3>

<p>'<code>Hotel_Long</code>', a 'Long format', is a preprocessing data of the publicly available 'Hotel 1' data introduced in Bodea et al. (2009).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Hotel_Long
</code></pre>


<h3>Format</h3>

<p>'<code>Hotel_Long</code>': A data frame with 8,318 rows and 11 variables:
</p>

<dl>
<dt>Booking_ID</dt><dd><p>ID associated with a booking. Begins at one for each hotel property.</p>
</dd>
<dt>Purchase</dt><dd><p>Indicator variable equal to one if the product identified by product ID is purchased, zero otherwise.</p>
</dd>
<dt>Room_Type</dt><dd><p>Code describing the room type associated with the product ID.</p>
</dd>
<dt>Price</dt><dd><p>The average nightly rate the customer pays in USD (e.g., $199.99).
Note that the average nightly rate will not match the rate of any available product rates
if an upsell occurs at time of check-in, if the customer requests a specific
discount rate at time of check-in, etc.</p>
</dd>
<dt>Party_Size</dt><dd><p>Number of adults and children associated with the booking.</p>
</dd>
<dt>Membership_Status</dt><dd><p>Status in rewards program (0—not a member, 1—basic, 2—elevated, 3—premium).</p>
</dd>
<dt>VIP_Membership_Status</dt><dd><p>Membership status of a VIP rewards program member (0—not a VIP, 1—basic VIP, 2—premium VIP member).</p>
</dd>
<dt>Booking_Date</dt><dd><p>Date the booking was created (e.g., 20070303 = March 3, 2007).</p>
</dd>
<dt>Check_In_Date</dt><dd><p>Check-in date (e.g., 20070307 = March 7, 2007).</p>
</dd>
<dt>Check_Out_Date</dt><dd><p>Check-out date (e.g., 20070310 = March 10, 2007).</p>
</dd>
<dt>Length_of_Stay</dt><dd><p>Length of stay/number of nights (e.g., three).</p>
</dd>
</dl>



<h3>Details</h3>

<p>'Hotel 1' data contains information on the available alternatives, i.e.,
choice sets and the associated prices at the time of each customer’s booking decision.
We preprocessed 'Hotel 1' data and provide it in two types of
data format, '<code>Hotel_Long</code>' and '<code>Hotel_Wide</code>'.
</p>
<p>The following are the preprocessing of 'Hotel 1' data.
</p>
<p>1. Customers' booking transactions that had only one room type available
in their choice set were removed as our methods require at least
two different products in each choice set.
</p>
<p>2. Duplicate records was removed.
</p>
<p>3. Choice sets with less than 30 observations, representing rare case were removed.
</p>


<h3>Source</h3>

<p><a href="doi:10.1287/msom.1080.0231">doi:10.1287/msom.1080.0231</a>
</p>

<hr>
<h2 id='Hotel_Wide'>Data from a Major Hotel Chain</h2><span id='topic+Hotel_Wide'></span>

<h3>Description</h3>

<p>'<code>Hotel_Wide</code>', a 'Wide format', is a preprocessing data of the publicly available 'Hotel 1' data introduced in Bodea et al. (2009).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Hotel_Wide
</code></pre>


<h3>Format</h3>

<p>'<code>Hotel_Wide</code>': A data frame with 1,100 rows and 22 variables:
</p>

<dl>
<dt>Booking_ID</dt><dd><p>ID associated with a booking. Begins at one for each hotel property.</p>
</dd>
<dt>Party_Size</dt><dd><p>Number of adults and children associated with the booking.</p>
</dd>
<dt>Membership_Status</dt><dd><p>Status in rewards program (0—not a member, 1—basic, 2—elevated, 3—premium).</p>
</dd>
<dt>VIP_Membership_Status</dt><dd><p>Membership status of a VIP rewards program member (0—not a VIP, 1—basic VIP, 2—premium VIP member).</p>
</dd>
<dt>Booking_Date</dt><dd><p>Date the booking was created (e.g., 20070303 = March 3, 2007).</p>
</dd>
<dt>Check_In_Date</dt><dd><p>Check-in date (e.g., 20070307 = March 7, 2007).</p>
</dd>
<dt>Check_Out_Date</dt><dd><p>Check-out date (e.g., 20070310 = March 10, 2007).</p>
</dd>
<dt>Length_of_Stay</dt><dd><p>Length of stay/number of nights (e.g., three).</p>
</dd>
<dt>Room_Type</dt><dd><p>Code describing the room type associated with the product ID.</p>
</dd>
<dt>Purchased_Prod_Code</dt><dd><p>Unique number of products associated with room type.</p>
</dd>
<dt>Exposed_Choice_Set</dt><dd><p>Choice set exposed to individual</p>
</dd>
<dt>Exposed_Choice_Set_Code</dt><dd><p>Unique number of choice sets associated with Exposed_Choice_Set</p>
</dd>
<dt>Price_1 ~ Price_10</dt><dd><p>The average nightly rate the customer pays in USD (e.g., $199.99).
Note that the average nightly rate will not match the rate of any available product rates
if an upsell occurs at time of check-in, if the customer requests a specific
discount rate at time of check-in, etc.</p>
</dd>
</dl>



<h3>Details</h3>

<p>'Hotel 1' data contains information on the available alternatives, i.e.,
choice sets and the associated prices at the time of each customer’s booking decision.
We preprocessed 'Hotel 1' data and provide it in two types of
data format, '<code>Hotel_Long</code>' and '<code>Hotel_Wide</code>'.
</p>
<p>The following are the preprocessing of 'Hotel 1' data.
</p>
<p>1. Customers' booking transactions that had only one room type available
in their choice set were removed as our methods require at least
two different products in each choice set.
</p>
<p>2. Duplicate records was removed.
</p>
<p>3. Choice sets with less than 30 observations, representing rare case were removed.
</p>


<h3>Source</h3>

<p><a href="doi:10.1287/msom.1080.0231">doi:10.1287/msom.1080.0231</a>
</p>

<hr>
<h2 id='iloglike'>The log-likelihood value for each individual and each alternative.</h2><span id='topic+iloglike'></span>

<h3>Description</h3>

<p>For function that calculating standard error of estimate. Internal function that users should not call directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>iloglike(
  eta,
  Choice_Set_List,
  Choice_Set_Code,
  Base_Prod,
  Num_Prod,
  Num_Attr,
  Alts_Same_Choice_Set,
  Is_Purchase
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="iloglike_+3A_eta">eta</code></td>
<td>
<p>numeric vector, the model parameters to be estimated</p>
</td></tr>
<tr><td><code id="iloglike_+3A_choice_set_list">Choice_Set_List</code></td>
<td>
<p>list, product code included for each choice set.</p>
</td></tr>
<tr><td><code id="iloglike_+3A_choice_set_code">Choice_Set_Code</code></td>
<td>
<p>numeric, choice set code Number specified for calculating log-likelihood.</p>
</td></tr>
<tr><td><code id="iloglike_+3A_base_prod">Base_Prod</code></td>
<td>
<p>numeric, the baseline product number</p>
</td></tr>
<tr><td><code id="iloglike_+3A_num_prod">Num_Prod</code></td>
<td>
<p>numeric, the number of all products in observed data.</p>
</td></tr>
<tr><td><code id="iloglike_+3A_num_attr">Num_Attr</code></td>
<td>
<p>numeric, the number of attributes in observed data.</p>
</td></tr>
<tr><td><code id="iloglike_+3A_alts_same_choice_set">Alts_Same_Choice_Set</code></td>
<td>
<p>list, for internal calculation, a list of data exposed to the same choice set.</p>
</td></tr>
<tr><td><code id="iloglike_+3A_is_purchase">Is_Purchase</code></td>
<td>
<p>list, for internal calculation, list of customers who are
exposed to the same choice set who purchased the product. If purchased 1, otherwise 0.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The log-likelihood value for each individual and each alternative.
</p>

<hr>
<h2 id='iU'>Calculating a value of score function with respect to parameter gamma for each individual and each alternative.</h2><span id='topic+iU'></span>

<h3>Description</h3>

<p>Calculating a value of score function with respect to parameter gamma for each individual and each alternative. Internal function that users should not call directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>iU(
  eta_wo_k,
  gamma,
  Attr,
  Choice_Set_List,
  Alts_Same_Choice_Set,
  Is_Purchase,
  Base_Prod,
  Num_Prod,
  Num_Attr,
  cond
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="iU_+3A_eta_wo_k">eta_wo_k</code></td>
<td>
<p>numeric, estimated model parameters normalized for baseline product.</p>
</td></tr>
<tr><td><code id="iU_+3A_gamma">gamma</code></td>
<td>
<p>numeric, estimated gamma(no-purchase utility).</p>
</td></tr>
<tr><td><code id="iU_+3A_attr">Attr</code></td>
<td>
<p>list, a set of data frame in which alternative specific variables.</p>
</td></tr>
<tr><td><code id="iU_+3A_choice_set_list">Choice_Set_List</code></td>
<td>
<p>list, product code included for each choice set.</p>
</td></tr>
<tr><td><code id="iU_+3A_alts_same_choice_set">Alts_Same_Choice_Set</code></td>
<td>
<p>list, for internal calculation, a list of data exposed to the same choice set.</p>
</td></tr>
<tr><td><code id="iU_+3A_is_purchase">Is_Purchase</code></td>
<td>
<p>list, for internal calculation, list of customers who are
exposed to the same choice set who purchased the product. If purchased 1, otherwise 0.</p>
</td></tr>
<tr><td><code id="iU_+3A_base_prod">Base_Prod</code></td>
<td>
<p>numeric, the baseline product number</p>
</td></tr>
<tr><td><code id="iU_+3A_num_prod">Num_Prod</code></td>
<td>
<p>numeric, the number of all products in observed data.</p>
</td></tr>
<tr><td><code id="iU_+3A_num_attr">Num_Attr</code></td>
<td>
<p>numeric, the number of attributes in observed data.</p>
</td></tr>
<tr><td><code id="iU_+3A_cond">cond</code></td>
<td>
<p>numeric, the value associated with prop, which is the argument of the <code><a href="#topic+rmm">rmm</a></code> function. (1-prop)/prop.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a value of score function with respect to parameter gamma for each individual and each alternative.
</p>

<hr>
<h2 id='loglike'>Calculating the log-likelihood function.</h2><span id='topic+loglike'></span>

<h3>Description</h3>

<p>Calculating model's log-likelihood function. Internal function that users should not call directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loglike(
  eta,
  Choice_Set_List,
  Choice_Set_Code,
  Base_Prod,
  Num_Prod,
  Num_Attr,
  Alts_Same_Choice_Set,
  Is_Purchase
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="loglike_+3A_eta">eta</code></td>
<td>
<p>numeric vector, the model parameters to be estimated</p>
</td></tr>
<tr><td><code id="loglike_+3A_choice_set_list">Choice_Set_List</code></td>
<td>
<p>list, product code included for each choice set.</p>
</td></tr>
<tr><td><code id="loglike_+3A_choice_set_code">Choice_Set_Code</code></td>
<td>
<p>numeric, choice set code Number specified for calculating log-likelihood.</p>
</td></tr>
<tr><td><code id="loglike_+3A_base_prod">Base_Prod</code></td>
<td>
<p>numeric, the baseline product number</p>
</td></tr>
<tr><td><code id="loglike_+3A_num_prod">Num_Prod</code></td>
<td>
<p>numeric, the number of all products in observed data.</p>
</td></tr>
<tr><td><code id="loglike_+3A_num_attr">Num_Attr</code></td>
<td>
<p>numeric, the number of attributes in observed data.</p>
</td></tr>
<tr><td><code id="loglike_+3A_alts_same_choice_set">Alts_Same_Choice_Set</code></td>
<td>
<p>list, for internal calculation, a list of data exposed to the same choice set.</p>
</td></tr>
<tr><td><code id="loglike_+3A_is_purchase">Is_Purchase</code></td>
<td>
<p>list, for internal calculation, list of customers who are
exposed to the same choice set who purchased the product. If purchased 1, otherwise 0.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The value of log-likelihood.
</p>

<hr>
<h2 id='predict.rmm'>Predict method for Revenue Management Model Fits</h2><span id='topic+predict.rmm'></span>

<h3>Description</h3>

<p>Predicted values based on RMM object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rmm'
predict(object, newdata, Rem_Choice_Set, Choice_Set_Code, fixed = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict.rmm_+3A_object">object</code></td>
<td>
<p>Object of class inheriting from &quot;<code>rmm</code>&quot;</p>
</td></tr>
<tr><td><code id="predict.rmm_+3A_newdata">newdata</code></td>
<td>
<p>A data frame in which to look for variables with which to predict.</p>
</td></tr>
<tr><td><code id="predict.rmm_+3A_rem_choice_set">Rem_Choice_Set</code></td>
<td>
<p>List of choice sets remaining in the data.</p>
</td></tr>
<tr><td><code id="predict.rmm_+3A_choice_set_code">Choice_Set_Code</code></td>
<td>
<p>Specifies the choice set of <code>newdata</code>.</p>
</td></tr>
<tr><td><code id="predict.rmm_+3A_fixed">fixed</code></td>
<td>
<p>If fixed=TRUE, the alternative with the highest prediction probability is determined as decision.
Otherwise (fixed=FALSE), one of the alternatives is determined
in proportion to the predictive probability.</p>
</td></tr>
<tr><td><code id="predict.rmm_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>preict.rmm</code> produces a list of predictions, which contains decisions and probabilities.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(Hotel_Long)

# Before using the rmm function, the user must first use the rmm_shape function.
rst_reshape &lt;-  rmm_reshape(data=Hotel_Long, idvar="Booking_ID",
     alts="Room_Type", asv="Price", resp="Purchase", min_obs=30)

# Fitting a model
rst_rmm &lt;- rmm(rst_reshape, prop=0.7, model="cl")

# Predictions
Rem_Choice_Set &lt;- rst_reshape$Rem_Choice_Set

newdata1 &lt;- data.frame(Price_1=c(232, 122, 524), Price_3=c(152, 531, 221),
                       Price_4=c(163, 743, 192), Price_5=c(132, 535, 325),
                       Price_7=c(136, 276, 673), Price_8=c(387, 153, 454),
                       Price_9=c(262, 163, 326), Price_10=c(421, 573, 472))

predict(rst_rmm, newdata=newdata1, Rem_Choice_Set=Rem_Choice_Set,
        Choice_Set_Code=3, fixed=TRUE)


newdata2 &lt;- data.frame(Price_1=c(521, 321, 101, 234, 743),
                       Price_5=c(677, 412, 98, 321, 382),
                       Price_8=c(232, 384, 330, 590, 280))

predict(rst_rmm, newdata=newdata2, Rem_Choice_Set=Rem_Choice_Set,
        Choice_Set_Code=7, fixed=FALSE)

</code></pre>

<hr>
<h2 id='rmm'>Fitting Revenue Management Models</h2><span id='topic+rmm'></span>

<h3>Description</h3>

<p><code><a href="#topic+rmm">rmm</a></code> is used to fit Revenue Management Models. Users can specify
cl (conditional logit model) and ml (multinomial logit model) as RMM model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rmm(rmm_data, prop = 0.7, model = "cl")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rmm_+3A_rmm_data">rmm_data</code></td>
<td>
<p>an object of class &quot;rmm_data&quot;, a output of <code><a href="#topic+rmm_reshape">rmm_reshape</a></code> function.</p>
</td></tr>
<tr><td><code id="rmm_+3A_prop">prop</code></td>
<td>
<p>numeric, user assumed market share.</p>
</td></tr>
<tr><td><code id="rmm_+3A_model">model</code></td>
<td>
<p>character, specify fitting method (&quot;cl&quot; or &quot;ml&quot;). &quot;cl&quot; (default) refers to the Conditional Logit Model, and &quot;ml&quot; refers to the Multinomial Logit Model.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="#topic+rmm">rmm</a></code> returns an object of class inheriting from &quot;rmm&quot;.
</p>


<h3>See Also</h3>

<p><code>rmm</code> fits the model with the RDE method introduced in <a href="doi:10.2139/ssrn.3598259">doi:10.2139/ssrn.3598259</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(Hotel_Long)

# Before using the rmm function, the user must first use the rmm_shape function.
rst_reshape &lt;- rmm_reshape(data=Hotel_Long, idvar="Booking_ID", alts="Room_Type",
                           asv="Price", resp="Purchase", min_obs=30)

# Fitting a model
rst_rmm &lt;- rmm(rst_reshape, prop=0.7, model="cl")
print(rst_rmm)

</code></pre>

<hr>
<h2 id='rmm_reshape'>Reshape Long-Format Data</h2><span id='topic+rmm_reshape'></span>

<h3>Description</h3>

<p>This function reshapes a 'Long-Format' data (with the repeated measurements in separate rows) to 'Wide-Format' data  (with repeated measurements in separate columns of the same row).
The reshaped 'wide-format' data is an S3 class called 'rmm_data' and contains information for fitting the model with the <code><a href="#topic+rmm">rmm</a></code> function.
Users who want to use the rmm function must first use the rmm_reshape function. The <code><a href="#topic+rmm">rmm</a></code> function receives only S3 class 'rmm_data' as input.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rmm_reshape(data, idvar, resp, alts, asv, min_obs)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rmm_reshape_+3A_data">data</code></td>
<td>
<p>data frame, a 'Long-Format' transaction data.</p>
</td></tr>
<tr><td><code id="rmm_reshape_+3A_idvar">idvar</code></td>
<td>
<p>character, variable name representing each individual's id in the transaction data.</p>
</td></tr>
<tr><td><code id="rmm_reshape_+3A_resp">resp</code></td>
<td>
<p>character, variable name representing result of a individual choice.</p>
</td></tr>
<tr><td><code id="rmm_reshape_+3A_alts">alts</code></td>
<td>
<p>character vector, variable names representing a alternatives.</p>
</td></tr>
<tr><td><code id="rmm_reshape_+3A_asv">asv</code></td>
<td>
<p>character vector, variable names representing a alternative specific variables.</p>
</td></tr>
<tr><td><code id="rmm_reshape_+3A_min_obs">min_obs</code></td>
<td>
<p>numeric, specify the minimum observation for each choice set in the transaction data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The 'Wide-Format' data and various information required for the <code><a href="#topic+rmm">rmm</a></code> function.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rmm">rmm</a></code> for estimating parameters.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(Hotel_Long)

rst_reshape &lt;- rmm_reshape(data=Hotel_Long, idvar="Booking_ID",
resp="Purchase", alts="Room_Type", asv="Price", min_obs=30)

class(rst_reshape)  # "rmm_data"
ls(rst_reshape)     # "Alts_Code_Desc" "ASV" "asv_name" "data_wide"
                    # "Rem_Choice_Set"     "Removed_Choice_Set"

rst_reshape$data_wide  # reshaped data

</code></pre>

<hr>
<h2 id='Sandwich'>Calculating standard error of estimate.</h2><span id='topic+Sandwich'></span>

<h3>Description</h3>

<p>Calculating statndard error of model parameters and gamma(no-purchase utility). Internal function that users should not call directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Sandwich(
  eta_wo_k,
  gamma,
  Attr,
  Choice_Set_List,
  Alts_Same_Choice_Set,
  Is_Purchase,
  Base_Prod,
  Num_Prod,
  Num_Attr,
  H,
  cond
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Sandwich_+3A_eta_wo_k">eta_wo_k</code></td>
<td>
<p>numeric, estimated model parameters normalized for baseline product.</p>
</td></tr>
<tr><td><code id="Sandwich_+3A_gamma">gamma</code></td>
<td>
<p>numeric, estimated gamma(no-purchase utility).</p>
</td></tr>
<tr><td><code id="Sandwich_+3A_attr">Attr</code></td>
<td>
<p>list, a set of data frame in which alternative specific variables.</p>
</td></tr>
<tr><td><code id="Sandwich_+3A_choice_set_list">Choice_Set_List</code></td>
<td>
<p>list, product code included for each choice set.</p>
</td></tr>
<tr><td><code id="Sandwich_+3A_alts_same_choice_set">Alts_Same_Choice_Set</code></td>
<td>
<p>list, for internal calculation, a list of data exposed to the same choice set.</p>
</td></tr>
<tr><td><code id="Sandwich_+3A_is_purchase">Is_Purchase</code></td>
<td>
<p>list, for internal calculation, list of customers who are
exposed to the same choice set who purchased the product. If purchased 1, otherwise 0.</p>
</td></tr>
<tr><td><code id="Sandwich_+3A_base_prod">Base_Prod</code></td>
<td>
<p>numeric, the baseline product number</p>
</td></tr>
<tr><td><code id="Sandwich_+3A_num_prod">Num_Prod</code></td>
<td>
<p>numeric, the number of all products in observed data.</p>
</td></tr>
<tr><td><code id="Sandwich_+3A_num_attr">Num_Attr</code></td>
<td>
<p>numeric, the number of attributes in observed data.</p>
</td></tr>
<tr><td><code id="Sandwich_+3A_h">H</code></td>
<td>
<p>matrix, a hessian matrix of the log-likelihood function.</p>
</td></tr>
<tr><td><code id="Sandwich_+3A_cond">cond</code></td>
<td>
<p>numeric, the value associated with prop, which is the argument of the <code><a href="#topic+rmm">rmm</a></code> function. (1-prop)/prop.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a value of standard error of estimate.
</p>

<hr>
<h2 id='U'>Calculating a value of score function with respect to parameter gamma.</h2><span id='topic+U'></span>

<h3>Description</h3>

<p>Calculating a value of score function with respect to parameter gamma. Internal function that users should not call directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>U(
  eta_wo_k,
  gamma,
  Attr,
  Choice_Set_List,
  Alts_Same_Choice_Set,
  Is_Purchase,
  Base_Prod,
  Num_Prod,
  Num_Attr,
  cond
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="U_+3A_eta_wo_k">eta_wo_k</code></td>
<td>
<p>numeric, estimated model parameters normalized for baseline product.</p>
</td></tr>
<tr><td><code id="U_+3A_gamma">gamma</code></td>
<td>
<p>numeric, estimated gamma(no-purchase utility).</p>
</td></tr>
<tr><td><code id="U_+3A_attr">Attr</code></td>
<td>
<p>list, a set of data frame in which alternative specific variables.</p>
</td></tr>
<tr><td><code id="U_+3A_choice_set_list">Choice_Set_List</code></td>
<td>
<p>list, product code included for each choice set.</p>
</td></tr>
<tr><td><code id="U_+3A_alts_same_choice_set">Alts_Same_Choice_Set</code></td>
<td>
<p>list, for internal calculation, a list of data exposed to the same choice set.</p>
</td></tr>
<tr><td><code id="U_+3A_is_purchase">Is_Purchase</code></td>
<td>
<p>list, for internal calculation, list of customers who are
exposed to the same choice set who purchased the product. If purchased 1, otherwise 0.</p>
</td></tr>
<tr><td><code id="U_+3A_base_prod">Base_Prod</code></td>
<td>
<p>numeric, the baseline product number</p>
</td></tr>
<tr><td><code id="U_+3A_num_prod">Num_Prod</code></td>
<td>
<p>numeric, the number of all products in observed data.</p>
</td></tr>
<tr><td><code id="U_+3A_num_attr">Num_Attr</code></td>
<td>
<p>numeric, the number of attributes in observed data.</p>
</td></tr>
<tr><td><code id="U_+3A_cond">cond</code></td>
<td>
<p>numeric, the value associated with prop, which is the argument of the <code><a href="#topic+rmm">rmm</a></code> function. (1-prop)/prop.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a value of score function with respect to parameter gamma.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
