<!DOCTYPE html><html lang="en"><head><title>Help for package gifti</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {gifti}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#convert_binary_datatype'><p>Convert Binary Data Type</p></a></li>
<li><a href='#convert_endian'><p>Convert Endian from GIFTI</p></a></li>
<li><a href='#convert_intent'><p>Convert Intent</p></a></li>
<li><a href='#create_data_matrix'><p>Create Data Matrix with ordering respected</p></a></li>
<li><a href='#data_array_attributes'><p>Data Array Attributes</p></a></li>
<li><a href='#data_decoder'><p>Array Data Decoder</p></a></li>
<li><a href='#data_encoder'><p>Array Data Encoder</p></a></li>
<li><a href='#decompress_gii'><p>Decompress Gzipped GIFTI (with extension .gz)</p></a></li>
<li><a href='#download_gifti_data'><p>Download GIFTI Test Data</p></a></li>
<li><a href='#gifti_list'><p>Convert GIFTI to List</p></a></li>
<li><a href='#gifti_map_value'><p>Map Values to Triangles from GIFTI</p></a></li>
<li><a href='#have_gifti_test_data'><p>Check Presence of GIFTI Test Data</p></a></li>
<li><a href='#is.gifti'><p>Test if GIFTI</p></a></li>
<li><a href='#readgii'><p>Read GIFTI File</p></a></li>
<li><a href='#surf_triangles'><p>Make Triangles from GIfTI Image</p></a></li>
<li><a href='#writegii'><p>Write .gii xml from &quot;gifti&quot; object</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Reads in 'Neuroimaging' 'GIFTI' Files with Geometry Information</td>
</tr>
<tr>
<td>Version:</td>
<td>0.8.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-11-10</td>
</tr>
<tr>
<td>Author:</td>
<td>John Muschelli</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>John Muschelli &lt;muschellij2@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions to read in the geometry format under the 
    'Neuroimaging' 'Informatics' Technology Initiative ('NIfTI'), called 
    'GIFTI' <a href="https://www.nitrc.org/projects/gifti/">https://www.nitrc.org/projects/gifti/</a>. 
    These files contain surfaces of brain imaging data.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>xml2 (&ge; 1.1.1), base64enc, R.utils, tools, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rgl, grDevices, testthat, knitr, rmarkdown, covr</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/muschellij2/gifti/issues">https://github.com/muschellij2/gifti/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-11-11 03:45:54 UTC; johnmuschelli</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-11-11 22:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='convert_binary_datatype'>Convert Binary Data Type</h2><span id='topic+convert_binary_datatype'></span>

<h3>Description</h3>

<p>Converts a data type to the size and <code>what</code> for
<code><a href="base.html#topic+readBin">readBin</a></code>, necessary for <code>Base64Binary</code> and
<code>GZipBase64Binary</code> formats
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_binary_datatype(
  datatype = c("NIFTI_TYPE_UINT8", "NIFTI_TYPE_INT32", "NIFTI_TYPE_UINT32",
    "NIFTI_TYPE_FLOAT32")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="convert_binary_datatype_+3A_datatype">datatype</code></td>
<td>
<p>data type from GIFTI image</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of length 2: with elements of size and what
</p>


<h3>Examples</h3>

<pre><code class='language-R'>convert_binary_datatype()
convert_binary_datatype('NIFTI_TYPE_INT32')
testthat::expect_error(convert_binary_datatype('NIFTI_TYPE_BLAH'))
</code></pre>

<hr>
<h2 id='convert_endian'>Convert Endian from GIFTI</h2><span id='topic+convert_endian'></span>

<h3>Description</h3>

<p>Converts Endian format from GIFTI
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_endian(endian)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="convert_endian_+3A_endian">endian</code></td>
<td>
<p>character passed from GIFTI XML</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character string
</p>

<hr>
<h2 id='convert_intent'>Convert Intent</h2><span id='topic+convert_intent'></span>

<h3>Description</h3>

<p>Converts the <code>intent</code> field from a GIFTI image
to a more standard naming
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_intent(intent)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="convert_intent_+3A_intent">intent</code></td>
<td>
<p>(character) string of intent type</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string
</p>

<hr>
<h2 id='create_data_matrix'>Create Data Matrix with ordering respected</h2><span id='topic+create_data_matrix'></span>

<h3>Description</h3>

<p>Create Data Matrix with ordering respected
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_data_matrix(
  data,
  dims,
  ordering = c("RowMajorOrder", "ColumnMajorOrder")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_data_matrix_+3A_data">data</code></td>
<td>
<p>Data output from <code><a href="#topic+data_decoder">data_decoder</a></code></p>
</td></tr>
<tr><td><code id="create_data_matrix_+3A_dims">dims</code></td>
<td>
<p>Dimensions of output</p>
</td></tr>
<tr><td><code id="create_data_matrix_+3A_ordering">ordering</code></td>
<td>
<p>Ordering of the data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Matrix of Values
</p>

<hr>
<h2 id='data_array_attributes'>Data Array Attributes</h2><span id='topic+data_array_attributes'></span>

<h3>Description</h3>

<p>Parses a list of XML data to get the attributes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_array_attributes(darray)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="data_array_attributes_+3A_darray">darray</code></td>
<td>
<p>List of <code>xml_nodes</code> from GIFTI data array</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data.frame</code> of attributes
</p>

<hr>
<h2 id='data_decoder'>Array Data Decoder</h2><span id='topic+data_decoder'></span>

<h3>Description</h3>

<p>Decodes values from a GIFTI image
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_decoder(
  values,
  encoding = c("ASCII", "Base64Binary", "GZipBase64Binary", "ExternalFileBinary"),
  datatype = NULL,
  endian = c("little", "big", "LittleEndian", "BigEndian"),
  ext_filename = NULL,
  n = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="data_decoder_+3A_values">values</code></td>
<td>
<p>text from XML of GIFTI image</p>
</td></tr>
<tr><td><code id="data_decoder_+3A_encoding">encoding</code></td>
<td>
<p>encoding of GIFTI values</p>
</td></tr>
<tr><td><code id="data_decoder_+3A_datatype">datatype</code></td>
<td>
<p>Passed to <code><a href="#topic+convert_binary_datatype">convert_binary_datatype</a></code></p>
</td></tr>
<tr><td><code id="data_decoder_+3A_endian">endian</code></td>
<td>
<p>Endian to pass in <code><a href="base.html#topic+readBin">readBin</a></code></p>
</td></tr>
<tr><td><code id="data_decoder_+3A_ext_filename">ext_filename</code></td>
<td>
<p>if <code>encoding = "ExternalFileBinary"</code>, then
this is the external filename</p>
</td></tr>
<tr><td><code id="data_decoder_+3A_n">n</code></td>
<td>
<p>number of values to read.  Relevant if
<code>encoding = "ExternalFileBinary"</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of values
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (have_gifti_test_data(outdir = NULL)) {
   gii_files = download_gifti_data(outdir = NULL)
   L = gifti_list(gii_files[1])
   orig = L$DataArray$Data[[1]]
   encoding = attributes(L$DataArray)$Encoding
   datatype = attributes(L$DataArray)$DataType
   endian = attributes(L$DataArray)$Endian
   vals =  data_decoder(orig, encoding = encoding,
   datatype = datatype, endian = endian)
   enc = data_encoder(vals, encoding = encoding,
   datatype = datatype, endian = endian)
   enc == orig
}
</code></pre>

<hr>
<h2 id='data_encoder'>Array Data Encoder</h2><span id='topic+data_encoder'></span>

<h3>Description</h3>

<p>Encodes values for a GIFTI image
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_encoder(
  values,
  encoding = c("ASCII", "Base64Binary", "GZipBase64Binary"),
  datatype = NULL,
  endian = c("little", "big", "LittleEndian", "BigEndian")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="data_encoder_+3A_values">values</code></td>
<td>
<p>values to be encoded</p>
</td></tr>
<tr><td><code id="data_encoder_+3A_encoding">encoding</code></td>
<td>
<p>encoding of GIFTI values</p>
</td></tr>
<tr><td><code id="data_encoder_+3A_datatype">datatype</code></td>
<td>
<p>Passed to <code><a href="#topic+convert_binary_datatype">convert_binary_datatype</a></code></p>
</td></tr>
<tr><td><code id="data_encoder_+3A_endian">endian</code></td>
<td>
<p>Endian to pass in <code><a href="base.html#topic+readBin">readBin</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Single character vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (have_gifti_test_data(outdir = NULL)) {
   gii_files = download_gifti_data(outdir = NULL)
   L = gifti_list(gii_files[1])
   orig = L$DataArray$Data[[1]]
   encoding = attributes(L$DataArray)$Encoding
   datatype = attributes(L$DataArray)$DataType
   endian = attributes(L$DataArray)$Endian
   vals =  data_decoder(orig, encoding = encoding,
   datatype = datatype, endian = endian)
   enc = data_encoder(vals, encoding = encoding,
   datatype = datatype, endian = endian)
   enc == orig
}
</code></pre>

<hr>
<h2 id='decompress_gii'>Decompress Gzipped GIFTI (with extension .gz)</h2><span id='topic+decompress_gii'></span>

<h3>Description</h3>

<p>If a GIFTI file is compressed, as in .gii.gz, this will decompress
the file.  This has nothing to do with the encoding WITHIN the file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>decompress_gii(file)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="decompress_gii_+3A_file">file</code></td>
<td>
<p>file name of GIFTI file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Filename of decompressed GIFTI
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (have_gifti_test_data(outdir = NULL)) {
   gii_files = download_gifti_data(outdir = NULL)
   outfile = decompress_gii(gii_files[1])
   print(outfile)
}
</code></pre>

<hr>
<h2 id='download_gifti_data'>Download GIFTI Test Data</h2><span id='topic+download_gifti_data'></span>

<h3>Description</h3>

<p>Downloads GIFTI test data from
<a href="https://www.nitrc.org/frs/download.php/411/BV_GIFTI_1.3.tar.gz">https://www.nitrc.org/frs/download.php/411/BV_GIFTI_1.3.tar.gz</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_gifti_data(
  outdir = system.file(package = "gifti"),
  overwrite = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_gifti_data_+3A_outdir">outdir</code></td>
<td>
<p>Output directory for test file directory</p>
</td></tr>
<tr><td><code id="download_gifti_data_+3A_overwrite">overwrite</code></td>
<td>
<p>Should files be overwritten if already exist?</p>
</td></tr>
<tr><td><code id="download_gifti_data_+3A_...">...</code></td>
<td>
<p>additional arguments to <code><a href="utils.html#topic+download.file">download.file</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of file names
</p>

<hr>
<h2 id='gifti_list'>Convert GIFTI to List</h2><span id='topic+gifti_list'></span>

<h3>Description</h3>

<p>Reads in a GIFTI file and coerces it to a list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gifti_list(file)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gifti_list_+3A_file">file</code></td>
<td>
<p>file name of GIFTI file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of elements
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (have_gifti_test_data(outdir = NULL)) {
   gii_files = download_gifti_data(outdir = NULL)
   L = gifti_list(gii_files[1])
   orig = L$DataArray$Data[[1]]
   encoding = attributes(L$DataArray)$Encoding
   datatype = attributes(L$DataArray)$DataType
   endian = attributes(L$DataArray)$Endian
   vals =  data_decoder(orig, encoding = encoding,
   datatype = datatype, endian = endian)
   enc = data_encoder(vals, encoding = encoding,
   datatype = datatype, endian = endian)
   enc == orig
}
</code></pre>

<hr>
<h2 id='gifti_map_value'>Map Values to Triangles from GIFTI</h2><span id='topic+gifti_map_value'></span>

<h3>Description</h3>

<p>Takes values and maps them to the correct triangles in
space.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gifti_map_value(
  pointset,
  triangle,
  values,
  indices = seq(nrow(pointset)),
  add_one = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gifti_map_value_+3A_pointset">pointset</code></td>
<td>
<p>pointset from GIFTI</p>
</td></tr>
<tr><td><code id="gifti_map_value_+3A_triangle">triangle</code></td>
<td>
<p>triangles from GIFTI</p>
</td></tr>
<tr><td><code id="gifti_map_value_+3A_values">values</code></td>
<td>
<p>Values to map to the triangles.  Same length as indices</p>
</td></tr>
<tr><td><code id="gifti_map_value_+3A_indices">indices</code></td>
<td>
<p>indices to place the values, must be in the range of 1 and
the number of rows of <code>pointset</code></p>
</td></tr>
<tr><td><code id="gifti_map_value_+3A_add_one">add_one</code></td>
<td>
<p>Should <code>1</code> be added to the indices for the triangle?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of coordinates (in triangles) and the corresponding value
mapped to those triangles
</p>

<hr>
<h2 id='have_gifti_test_data'>Check Presence of GIFTI Test Data</h2><span id='topic+have_gifti_test_data'></span>

<h3>Description</h3>

<p>Checks if GIFTI test data is downloaded
</p>


<h3>Usage</h3>

<pre><code class='language-R'>have_gifti_test_data(outdir = system.file(package = "gifti"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="have_gifti_test_data_+3A_outdir">outdir</code></td>
<td>
<p>Output directory for test file directory</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical indicator
</p>


<h3>Examples</h3>

<pre><code class='language-R'>have_gifti_test_data(outdir = NULL)
</code></pre>

<hr>
<h2 id='is.gifti'>Test if GIFTI</h2><span id='topic+is.gifti'></span><span id='topic+is_gifti'></span>

<h3>Description</h3>

<p>Simple wrapper to determine if class is GIFTI
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.gifti(x)

is_gifti(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is.gifti_+3A_x">x</code></td>
<td>
<p>object to test</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical if <code>x</code> is GIFTI
</p>

<hr>
<h2 id='readgii'>Read GIFTI File</h2><span id='topic+readgii'></span><span id='topic+readGIfTI'></span><span id='topic+read_gifti'></span>

<h3>Description</h3>

<p>Reads a GIFTI File and parses the output
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readgii(file)

readGIfTI(file)

read_gifti(file)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readgii_+3A_file">file</code></td>
<td>
<p>Name of file to read</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of values
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (have_gifti_test_data(outdir = NULL)) {
   gii_files = download_gifti_data(outdir = NULL)
   gii_list = lapply(gii_files, readgii)
   surf_files = grep("white[.]surf[.]gii", gii_files, value = TRUE)
   surfs = lapply(surf_files, surf_triangles)

   col_file = grep("white[.]shape[.]gii", gii_files, value = TRUE)
   cdata = readgii(col_file)
   cdata = cdata$data$shape
   mypal = grDevices::colorRampPalette(colors = c("blue", "black", "red"))
   n = 4
   breaks = quantile(cdata)
    ints = cut(cdata, include.lowest = TRUE, breaks = breaks)
    ints = as.integer(ints)
    stopifnot(!any(is.na(ints)))
    cols = mypal(n)[ints]
    cols = cols[surfs[[1]]$triangle]
}
## Not run: 
if (have_gifti_test_data(outdir = NULL)) {

 if (requireNamespace("rgl", quietly = TRUE)) {
    rgl::rgl.open()
    rgl::rgl.triangles(surfs[[1]]$pointset, color = cols)
    rgl::play3d(rgl::spin3d(), duration = 5)
 }
}

## End(Not run)

</code></pre>

<hr>
<h2 id='surf_triangles'>Make Triangles from GIfTI Image</h2><span id='topic+surf_triangles'></span>

<h3>Description</h3>

<p>Creates Triangles for plotting in RGL from a GIfTI image
</p>


<h3>Usage</h3>

<pre><code class='language-R'>surf_triangles(file)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="surf_triangles_+3A_file">file</code></td>
<td>
<p>File name of GIfTI image, usually <code>surf.gii</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of values corresponding to the <code>data</code> element from
<code><a href="#topic+readgii">readgii</a></code>
</p>

<hr>
<h2 id='writegii'>Write .gii xml from &quot;gifti&quot; object</h2><span id='topic+writegii'></span><span id='topic+writeGIfTI'></span><span id='topic+write_gifti'></span>

<h3>Description</h3>

<p>Writes a &quot;gifti&quot; object to a GIFTI file (ends in *.gii).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>writegii(gii, out_file, use_parsed_transformations = FALSE)

writeGIfTI(gii, out_file, use_parsed_transformations = FALSE)

write_gifti(gii, out_file, use_parsed_transformations = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="writegii_+3A_gii">gii</code></td>
<td>
<p>The &quot;gifti&quot; object</p>
</td></tr>
<tr><td><code id="writegii_+3A_out_file">out_file</code></td>
<td>
<p>Where to write the new GIFTI file</p>
</td></tr>
<tr><td><code id="writegii_+3A_use_parsed_transformations">use_parsed_transformations</code></td>
<td>
<p>Should the <code>$parsed_transformations</code>
be written instead of the <code>transformations</code>? Use if the XML pointers
in <code>transformations</code> might be invalid. Default: <code>FALSE</code></p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
