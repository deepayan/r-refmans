<!DOCTYPE html><html lang="en-US"><head><title>Help for package NHSDataDictionaRy</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {NHSDataDictionaRy}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#left_xl'><p>left_xl function</p>
This function replicates the LEFT function in Excel and is utilised for left trimming
of character strings</a></li>
<li><a href='#len_xl'><p>len_xl function</p></a></li>
<li><a href='#linkScrapeR'><p>linkScrapeR</p></a></li>
<li><a href='#mid_xl'><p>mid_xl function</p></a></li>
<li><a href='#nhs_data_elements'><p>NHS data elements method</p></a></li>
<li><a href='#nhs_table_findeR'><p>nhs_table_findeR function</p></a></li>
<li><a href='#openSafely_listR'><p>openSafely_listR function</p></a></li>
<li><a href='#right_xl'><p>right_xl function</p></a></li>
<li><a href='#scrapeR'><p>ScrapeR - scrape web information with scrapeR</p></a></li>
<li><a href='#tableR'><p>tableR function</p></a></li>
<li><a href='#xpathTextR'><p>xpathTextR function</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>NHS Data Dictionary Toolset for NHS Lookups</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.5</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Gary Hutson &lt;hutsons-hacks@outlook.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Providing a common set of simplified web scraping tools for working with the NHS Data Dictionary <a href="https://datadictionary.nhs.uk/data_elements_overview.html">https://datadictionary.nhs.uk/data_elements_overview.html</a>.
    The intended usage is to access the data elements section of the NHS Data Dictionary to access key lookups.
    The benefits of having it in this package are that the lookups are the live lookups on the website and will not need to be maintained.
    This package was commissioned by the NHS-R community <a href="https://nhsrcommunity.com/">https://nhsrcommunity.com/</a> to provide this consistency of lookups.
    The OpenSafely lookups have now been added <a href="https://www.opencodelists.org/docs/">https://www.opencodelists.org/docs/</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>false</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>xml2, dplyr, magrittr, rvest, stringr, purrr, tibble, httr</td>
</tr>
<tr>
<td>Collate:</td>
<td>'left_xl.R' 'len_xl.R' 'linkScrapeR.R' 'mid_xl.R'
'nhs_data_elements.R' 'scrapeR.R' 'tableR.R'
'nhs_table_findeR.R' 'right_xl.R' 'openSafely_listR.R'
'xpathTextR.R'</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, spelling</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-07-09 11:38:08 UTC; garyh</td>
</tr>
<tr>
<td>Author:</td>
<td>Gary Hutson <a href="https://orcid.org/0000-0003-3534-6143"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Calum Polwart [aut],
  Tom Jemmett <a href="https://orcid.org/0000-0002-6943-2990"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-07-09 13:10:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='left_xl'>left_xl function
This function replicates the LEFT function in Excel and is utilised for left trimming
of character strings</h2><span id='topic+left_xl'></span>

<h3>Description</h3>

<p>left_xl function
This function replicates the LEFT function in Excel and is utilised for left trimming
of character strings
</p>


<h3>Usage</h3>

<pre><code class='language-R'>left_xl(text, num_char = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="left_xl_+3A_text">text</code></td>
<td>
<p>The text you want to LEFT trim</p>
</td></tr>
<tr><td><code id="left_xl_+3A_num_char">num_char</code></td>
<td>
<p>The number of characters your want to trim by</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Trims the text entered by the number of character parameter and returns the trimmed string
</p>


<h3>Examples</h3>

<pre><code class='language-R'>left_xl(text= "This is some example text", num_char = 4)

</code></pre>

<hr>
<h2 id='len_xl'>len_xl function</h2><span id='topic+len_xl'></span>

<h3>Description</h3>

<p>This function replicates the LEN function in Excel and is utilised for finding the length of character strings.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>len_xl(text, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="len_xl_+3A_text">text</code></td>
<td>
<p>The text you want to calculate the length</p>
</td></tr>
<tr><td><code id="len_xl_+3A_...">...</code></td>
<td>
<p>Function forwarding to work with the base nchar method</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer value calculating the length of the text passed
</p>


<h3>Examples</h3>

<pre><code class='language-R'>len_xl("Guess the length of me!")


</code></pre>

<hr>
<h2 id='linkScrapeR'>linkScrapeR</h2><span id='topic+linkScrapeR'></span>

<h3>Description</h3>

<p>This is used to scrape all hyperlinks from a specific web page.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>linkScrapeR(url, SSL_needed = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="linkScrapeR_+3A_url">url</code></td>
<td>
<p>The website URL to detect active anchor hyperlink tags and extract them into a tibble</p>
</td></tr>
<tr><td><code id="linkScrapeR_+3A_ssl_needed">SSL_needed</code></td>
<td>
<p>Default - FALSE - Boolean to indicate whether to need a SSL certificate</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Once the links have been scraped they will be outputted into a tibble for exploration.
</p>
<p>This can be used on any website to pull back the hyperlink content of a web page.
</p>


<h3>Value</h3>

<p>A tibble (class data.frame) with all active hyperlinks on the website for the URL (uniform resource locator) passed to the function.
</p>

<ul>
<li><p> result - the extracted html table from url and xpath passed
</p>
</li>
<li><p> link_name - the name of the link
</p>
</li>
<li><p> url - the full url of the active href tag from HTML
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>linkScrapeR("https://www.datadictionary.nhs.uk/", FALSE)
</code></pre>

<hr>
<h2 id='mid_xl'>mid_xl function</h2><span id='topic+mid_xl'></span>

<h3>Description</h3>

<p>This function replicates the MID function in Excel and is utilised for left trimming
of character strings.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mid_xl(text, start_num = 1, num_char = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mid_xl_+3A_text">text</code></td>
<td>
<p>The text you want to MID trim</p>
</td></tr>
<tr><td><code id="mid_xl_+3A_start_num">start_num</code></td>
<td>
<p>The start number to start the trim. This needs to be numeric.</p>
</td></tr>
<tr><td><code id="mid_xl_+3A_num_char">num_char</code></td>
<td>
<p>The number of characters your want to trim by. This field needs to be numeric.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This has been included as a convenience function for working with text and string data.
</p>


<h3>Value</h3>

<p>The extracted text between the start_num and the num_char to produce a sub string result.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mid_xl(text= "This is some example text", start_num = 6, num_char = 10)


mid_xl(text= "This is some example text", start_num = 6, num_char = 10)


</code></pre>

<hr>
<h2 id='nhs_data_elements'>NHS data elements method</h2><span id='topic+nhs_data_elements'></span>

<h3>Description</h3>

<p>Searches all the data elements in the data element index of the NHS data dictionary and returns the links.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nhs_data_elements()
</code></pre>


<h3>Details</h3>

<p>This function has no input parameters and returns the
</p>


<h3>Value</h3>

<p>A tibble (class data frame) with the results of scraping the NHS Data Dictionary website for the data elements look ups, if no return this will produce an appropriate informational message.
</p>

<ul>
<li><p> link_name - the name of the scraped link. This relates to the actual name of the data element from the NHS Data Dictionary.
</p>
</li>
<li><p> url - the url passed to the parameter
</p>
</li>
<li><p> full_url - the full url of where the data element is on the NHS Data Dictionary website
</p>
</li>
<li><p> xpath_nat_code - utilises the element in the website and appends the link_short - to pull back only national codes from the dictionary site. NOTE: not all of the returns will have national code tables.
</p>
</li>
<li><p> xpath_default_codes - pulls back the data dictionary default codes - these can be then used with the national codes
</p>
</li>
<li><p> xpath_also_known - pulls back the data dictionary elements alias table - this will be available for all data elements
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>nhs_data_lookup &lt;- nhs_data_elements()
head(nhs_data_lookup, 10)
</code></pre>

<hr>
<h2 id='nhs_table_findeR'>nhs_table_findeR function</h2><span id='topic+nhs_table_findeR'></span>

<h3>Description</h3>

<p>This function uses the <code><a href="#topic+tableR">tableR</a></code> parent function to return a table of elements, specifically from the NHS Data Dictionary
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nhs_table_findeR(data_element_name, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nhs_table_findeR_+3A_data_element_name">data_element_name</code></td>
<td>
<p>The data element name from NHS Data Dictionation i.e. ACCOMMODATION STATUS CODE</p>
</td></tr>
<tr><td><code id="nhs_table_findeR_+3A_...">...</code></td>
<td>
<p>Function forwarding to parent function to pass additional arguments to function (e.g. title, add_zero_prefix)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble (class data.frame) output from the results of the web scrape
</p>

<ul>
<li><p> result - the extracted national HTML code table from the element page of the NHS Data Dictionary
</p>
</li>
<li><p> DictType - defaults to Not Specified if nothing passed, however allows for custom dictionary / data frame tags to be created
</p>
</li>
<li><p> DttmExtracted - a date and time stamp
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>#Returns a tibble from tableR parent function
nhs_table_findeR("ACCOMMODATION STATUS CODE", title="ACCOM_STATUS")
nhs_table_findeR("accommodation status code") #Changes case to match

</code></pre>

<hr>
<h2 id='openSafely_listR'>openSafely_listR function</h2><span id='topic+openSafely_listR'></span>

<h3>Description</h3>

<p>This function uses the <code><a href="#topic+tableR">tableR</a></code> parent function to return a table of elements, specifically from the OpenSafely Code List
<a href="https://www.opencodelists.org/">https://www.opencodelists.org/</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>openSafely_listR(list_name, version = "", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="openSafely_listR_+3A_list_name">list_name</code></td>
<td>
<p>The code list ID from <a href="https://www.opencodelists.org/">https://www.opencodelists.org/</a> for which to return the National table of elements, for example
&quot;opensafely/ace-inhibitor-medications&quot;</p>
</td></tr>
<tr><td><code id="openSafely_listR_+3A_version">version</code></td>
<td>
<p>The version of the code list if not the most recent</p>
</td></tr>
<tr><td><code id="openSafely_listR_+3A_...">...</code></td>
<td>
<p>Function forwarding to parent function to pass additional arguments to function (e.g. title, add_zero_prefix)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble (class data.frame) output from the results of the web scrape
</p>

<ul>
<li><p> type - the OpenSafely type
</p>
</li>
<li><p> id - the id for the OpenSafely element
</p>
</li>
<li><p> bnf_code - British National Formulary - NICE guidelines code
</p>
</li>
<li><p> nm - medicine type, dosage and manufacturer
</p>
</li>
<li><p> Dict_type - title specified for dictionary
</p>
</li>
<li><p> DttmExtracted - the date and time the code set was extracted
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>openSafely_listR("opensafely/ace-inhibitor-medications")
#Pull back current list
openSafely_listR("opensafely/ace-inhibitor-medications", "2020-05-19")
#Pull back list with date

</code></pre>

<hr>
<h2 id='right_xl'>right_xl function</h2><span id='topic+right_xl'></span>

<h3>Description</h3>

<p>This function replicates the RIGHT function in Excel and is utilised for right trimming
of character strings.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>right_xl(text, num_char = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="right_xl_+3A_text">text</code></td>
<td>
<p>The text you want to RIGHT trim</p>
</td></tr>
<tr><td><code id="right_xl_+3A_num_char">num_char</code></td>
<td>
<p>The number of characters your want to trim by. This field needs to be numeric.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This has been included as a convenience function for working with text and string data.
</p>


<h3>Value</h3>

<p>The trimmed string from the text parameter and trimming by the number of characters num_char passed to the parameter.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>right_xl(text= "This is some example text", num_char = 10)


right_xl(text= "This is some example text", num_char = 10)


</code></pre>

<hr>
<h2 id='scrapeR'>ScrapeR - scrape web information with scrapeR</h2><span id='topic+scrapeR'></span>

<h3>Description</h3>

<p>Takes the url and xpath and scrapes HTML table elements from a website.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scrapeR(url, xpath, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="scrapeR_+3A_url">url</code></td>
<td>
<p>Website address to connect to</p>
</td></tr>
<tr><td><code id="scrapeR_+3A_xpath">xpath</code></td>
<td>
<p>Xpath obtained through inspecting the individual HTML elements</p>
</td></tr>
<tr><td><code id="scrapeR_+3A_...">...</code></td>
<td>
<p>Function to pass additional function forwarding options</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is specifically designed to work with HTML tables and x path links through to direct HTML elements.
The function is versatile and can be used on any URL where an xpath can be obtained through the URL and HTML inspection process.
</p>


<h3>Value</h3>

<p>Returns the results of the scraping operation and the relevant fields from the html table - the xpath should make reference to an html table, otherwise an error is returned advising the user to check the xpath and url are correct.
</p>

<hr>
<h2 id='tableR'>tableR function</h2><span id='topic+tableR'></span>

<h3>Description</h3>

<p>This function uses the scapeR parent function to return a table of elements
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tableR(url, xpath, title = "Not Specified", add_zero_prefix = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tableR_+3A_url">url</code></td>
<td>
<p>The URL of the website to scrape the table element from</p>
</td></tr>
<tr><td><code id="tableR_+3A_xpath">xpath</code></td>
<td>
<p>The unique xpath of the HTML element to be scraped</p>
</td></tr>
<tr><td><code id="tableR_+3A_title">title</code></td>
<td>
<p>Unique name for the relevant HTML table that has been scraped</p>
</td></tr>
<tr><td><code id="tableR_+3A_add_zero_prefix">add_zero_prefix</code></td>
<td>
<p>Adds zero prefixes to certain codes that get converted by native functions</p>
</td></tr>
<tr><td><code id="tableR_+3A_...">...</code></td>
<td>
<p>Function forwarding to parent function to pass additional arguments to function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble (class data.frame) output from the results of the web scrape
</p>

<ul>
<li><p> result - the extracted html table from url and xpath passed
</p>
</li>
<li><p> DictType - defaults to Not Specified if nothing passed, however allows for custom dictionary / data frame tags to be created
</p>
</li>
<li><p> DttmExtracted - a date and time stamp
</p>
</li></ul>


<hr>
<h2 id='xpathTextR'>xpathTextR function</h2><span id='topic+xpathTextR'></span>

<h3>Description</h3>

<p>Returns xpath text from websites and can be used to access specific HTML nodes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xpathTextR(url, xpath, ssl_needed = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xpathTextR_+3A_url">url</code></td>
<td>
<p>The link for the website</p>
</td></tr>
<tr><td><code id="xpathTextR_+3A_xpath">xpath</code></td>
<td>
<p>The xpath string derived by using the Inspect functionality in a web browser.</p>
</td></tr>
<tr><td><code id="xpathTextR_+3A_ssl_needed">ssl_needed</code></td>
<td>
<p>Default - FALSE - Boolean to indicate whether to need a SSL certificate</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the results of scraping the specific xpath element
</p>

<ul>
<li><p> result - the extracted text from the website element that has been scraped
</p>
</li>
<li><p> website_passed - a copy of the input url for the website
</p>
</li>
<li><p> html_node_result - returns the extracted html node result
</p>
</li>
<li><p> datetime_access - returns a timestamp of when the results of the scraping operation have been completed
</p>
</li>
<li><p> person_accessed - retrieves the system environment stored username and domain - this is concatenated together to form a mixed charatcer string
</p>
</li></ul>


</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
