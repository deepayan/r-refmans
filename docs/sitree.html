<!DOCTYPE html><html lang="en"><head><title>Help for package sitree</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {sitree}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#calculate.development.class'>
<p>Calculate Development Class of the Stand</p></a></li>
<li><a href='#dbhi.BN2009'>
<p>DBH Increment Function by Bollandsas and Naesset (2009)</p></a></li>
<li><a href='#dead.trees.growth'>
<p>Growth of Dead Trees</p></a></li>
<li><a href='#fl'><p>Plot Data</p></a></li>
<li><a href='#fn.vars.required'>
<p>Finds Variables Required on Functions</p></a></li>
<li><a href='#grow.dbhinc.hgtinc'>
<p>Growth and Height Increment Function Wrapper</p></a></li>
<li><a href='#height.korf'>
<p>Simple height function</p></a></li>
<li><a href='#management.prob'>
<p>Final felling and thinning functions for Norwegian forest</p></a></li>
<li><a href='#mng.tree.removal'>
<p>Function to remove trees</p></a></li>
<li><a href='#mort.B2007'>
<p>Mortality Function by Bollandsas (2007)</p></a></li>
<li><a href='#picea.abies.vol'>
<p>Volumes for Norwegian species</p></a></li>
<li><a href='#prep.common.vars.fun'>
<p>Function to Calculate Common Variables</p></a></li>
<li><a href='#QMD.cm.f'>
<p>Quadratic Mean Diameter</p></a></li>
<li><a href='#recover.last.measurement'>
<p>Recover dbh and height at time of death</p></a></li>
<li><a href='#recover.state'>
<p>Recovers the State</p></a></li>
<li><a href='#recr.BBG2008'>
<p>Recruitment function following BBG2008</p></a></li>
<li><a href='#sitree'>
<p>Individual Tree Simulator</p></a></li>
<li><a href='#sitree.summary'>
<p>Summary plots</p></a></li>
<li><a href='#sitree2dataframe'>
<p>sitree2data.frame and sitree2dataframe.all</p></a></li>
<li><a href='#sp.classification'>
<p>Species classifcation</p></a></li>
<li><a href='#stand.west.st'><p>Stand and plot characteritics for stand.west.tr</p></a></li>
<li><a href='#stand.west.tr'>
<p>A whole stand dataset</p></a></li>
<li><a href='#toBindLists'>
<p>Binding lists</p></a></li>
<li><a href='#tr'>
<p>Individual Tree Data</p></a></li>
<li><a href='#trList-class'><p>Class <code>"trList"</code></p></a></li>
<li><a href='#trListDead-class'><p>Class <code>"trListDead"</code></p></a></li>
<li><a href='#volume.norway'>
<p>Tree volume for Norwegian conditions</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>0.1-15</td>
</tr>
<tr>
<td>Date:</td>
<td>2025-03-14</td>
</tr>
<tr>
<td>Title:</td>
<td>Single Tree Simulator</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ignacio Sevillano &lt;ignacio.sevillano@nibio.no&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0), ggplot2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown, knitr</td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table, methods</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Description:</td>
<td>Framework to build an individual tree simulator.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>LazyData:</td>
<td>yes</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-03-14 15:21:49 UTC; ign</td>
</tr>
<tr>
<td>Author:</td>
<td>Clara Anton Fernandez
    <a href="https://orcid.org/0000-0001-5545-3320"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Ignacio Sevillano <a href="https://orcid.org/0000-0002-7784-643X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-03-17 10:30:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='calculate.development.class'>
Calculate Development Class of the Stand
</h2><span id='topic+calculate.development.class'></span>

<h3>Description</h3>

<p>Calculates the development class of the stand according to the Norwegian National
Forest Inventory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculate.development.class(SI.spp, SI.m, stand.age.years)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calculate.development.class_+3A_si.spp">SI.spp</code></td>
<td>

<p>Species for which the SI is calculated (1 = spruce, 2 = pine, 3 = deciduous).
</p>
</td></tr>
<tr><td><code id="calculate.development.class_+3A_si.m">SI.m</code></td>
<td>

<p>Site index (SI) in m.
</p>
</td></tr>
<tr><td><code id="calculate.development.class_+3A_stand.age.years">stand.age.years</code></td>
<td>

<p>Age of the stand in years.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Development classes 1 (regeneration) to 5 (mature).
</p>


<h3>Value</h3>

<p>It returns a vector with the development class of the stands (values 1 to 5).
</p>


<h3>Author(s)</h3>

<p>Clara Anton Fernandez <a href="mailto:caf@nibio.no">caf@nibio.no</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>calculate.development.class (SI.spp = c(1, 1, 2),
   SI.m = c(23,11,11),
   stand.age.years = c(120, 80, 40)) 

</code></pre>

<hr>
<h2 id='dbhi.BN2009'>
DBH Increment Function by Bollandsas and Naesset (2009)
</h2><span id='topic+dbhi.BN2009'></span>

<h3>Description</h3>

<p>Implementation of the diameter at breast height function published by Bollandsås and Næsset (2009).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dbhi.BN2009(tr, fl, common.vars, this.period, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dbhi.BN2009_+3A_tr">tr</code></td>
<td>

<p>A <em>trList</em> class object.
</p>
</td></tr>
<tr><td><code id="dbhi.BN2009_+3A_fl">fl</code></td>
<td>

<p>A list describing the plot data.
</p>
</td></tr>
<tr><td><code id="dbhi.BN2009_+3A_common.vars">common.vars</code></td>
<td>

<p>A list with at least variables <em>QMD.cm</em>, <em>i.stand</em>,
and <em>SBA.m2.ha</em>.
</p>
</td></tr>
<tr><td><code id="dbhi.BN2009_+3A_this.period">this.period</code></td>
<td>

<p>The period for which to calculate DBH increment.
</p>
</td></tr>
<tr><td><code id="dbhi.BN2009_+3A_...">...</code></td>
<td>

<p>Ignored
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector with DBH increments in mm for all trees in <em>tr</em>.
</p>


<h3>Author(s)</h3>

<p>Clara Anton Fernandez <a href="mailto:caf@nibio.no">caf@nibio.no</a>
</p>


<h3>References</h3>

<p>Bollandsås, O. M and Næsset, E. (2009). Weibull Models for Single-Tree
Increment of Norway Spruce, Scots Pine, Birch and Other Broadleaves in Norway. <em>Scandinavian Journal of Forest Research</em> <strong>24</strong> (1): 54.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>foo.matrix &lt;-  matrix(0, nrow = length(tr$dbh), ncol = (5 +1))
colnames(foo.matrix) &lt;- paste("t", 0:5, sep = "")
foo.dbh &lt;- foo.height &lt;- foo.matrix
foo.dbh[,1] &lt;- tr$dbh
foo.height[,1] &lt;- tr$height

trl &lt;- list(
  plot.id  = tr$plot.id,
  treeid    = tr$treeid,
  dbh.mm    = foo.dbh,
  height.dm = foo.height,
  yrs.sim   = rep(0, nrow(tr)),
  tree.sp   = factor(tr$tree.sp)
)
tr.i &lt;- trList$new(data = trl, nperiods = as.integer(5))

common.vars &lt;-  prep.common.vars.fun(
  tr = tr.i,
  fl = fl,
  i.period       = 0,
  this.period    = "t0",
  common.vars    = "NULL",
  vars.required  = c("QMD.cm", "i.stand"),
  period.length = 5
)
 
dbhi.BN2009(tr.i, fl, common.vars$res , this.period = "t0",
            species.spruce = c(1, 2, 3),
            species.pine =  c(10, 11, 20, 21, 29),
            species.harw =  c(30, 31))
</code></pre>

<hr>
<h2 id='dead.trees.growth'>
Growth of Dead Trees
</h2><span id='topic+dead.trees.growth'></span>

<h3>Description</h3>

<p>A very simple function to estimate the growth of dead trees between the
last measurement and their death. Dead trees are assumed to die in the
middle of the period. The growth before the death of the tree is assumed
to be half of the growth for the whole period, both in terms of DBH and height.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dead.trees.growth(dt, growth, mort, this.period)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dead.trees.growth_+3A_dt">dt</code></td>
<td>

<p>A list of trees with at least two elements: <var>dbh.mm</var> and <var>height.dm</var>.
</p>
</td></tr>
<tr><td><code id="dead.trees.growth_+3A_growth">growth</code></td>
<td>

<p>A data frame with columns <var>dbh.inc.mm</var> and <var>hgt.inc.dm</var>.
</p>
</td></tr>
<tr><td><code id="dead.trees.growth_+3A_mort">mort</code></td>
<td>

<p>A TRUE/FALSE vector with the predicted mortality for each living tree in
this period.
</p>
</td></tr>
<tr><td><code id="dead.trees.growth_+3A_this.period">this.period</code></td>
<td>

<p>The period where the dead trees were last seen alive (last measured DBH).
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame of same length as <em>dt</em> with two elements
</p>
<table role = "presentation">
<tr><td><code>dbh.mm</code></td>
<td>
<p>DBH in mm</p>
</td></tr>
<tr><td><code>height.dm</code></td>
<td>
<p>Height in dm</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Clara Anton Fernandez <a href="mailto:caf@nibio.no">caf@nibio.no</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dead.trees.growth(
  dt = list(dbh.mm = data.frame   (t0 = c(75, 90, 25, 24)),
            height.dm = data.frame(t0 = c(190, 210, 110, 90))),
  growth = data.frame(dbh.inc.mm = c(7, 9, 2, 1),
                      hgt.inc.dm = c(11, 12, 8, 10)),
  this.period = "t0"
) 

</code></pre>

<hr>
<h2 id='fl'>Plot Data</h2><span id='topic+fl'></span>

<h3>Description</h3>

<p>Plot data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(fl)</code></pre>


<h3>Format</h3>

<p>The list contains the following elements
</p>

<dl>
<dt>plot.id</dt><dd><p>unique ID for each stand that corresponds to plot.id
in the <em>tr</em> dataset</p>
</dd>
<dt>SI.m</dt><dd><p>Site index in m</p>
</dd>
<dt>SI.spp</dt><dd><p>Species code for which SI.m is measured</p>
</dd>
<dt>prop.plot</dt><dd><p>Proportion of the plot covered by this stand
(0-full plot, 2-20%, 3-30%, 4-40%, ..., 8-80%)</p>
</dd>
<dt>ha2plot</dt><dd><p>multiplier to convert from &quot;per ha&quot; to &quot;per plot&quot;,
e.g. basal area per ha to basal area per plot</p>
</dd>
<dt>tree2ha</dt><dd><p>multiplier to convert numbers &quot;per tree&quot; to &quot;per ha&quot;,
e.g. basal area per tree to basal area per ha</p>
</dd>
<dt>soil.depth. 1234</dt><dd><p>soil depth 1(shallow)-4(deep)</p>
</dd>
<dt>land.use</dt><dd><p>land use classification</p>
</dd>
<dt>land.type</dt><dd><p>land type classification</p>
</dd>
<dt>veg.type</dt><dd><p>vegetation type</p>
</dd>
<dt>subplot.size.m2</dt><dd><p>size of the subplot correponding to the stand
in square meters</p>
</dd>
<dt>plot.size.m2</dt><dd><p>Plot size in square meters</p>
</dd>
<dt>kom</dt><dd><p>Municipality code</p>
</dd>
<dt>region</dt><dd><p>region where the plot lies</p>
</dd>
<dt>skidding.distance.100m</dt><dd><p>skidding distance in 100m</p>
</dd>
<dt>slope.per</dt><dd><p>slope in percentatge</p>
</dd>
<dt>lat.det</dt><dd><p>latitude in degrees</p>
</dd>
<dt>alt.m</dt><dd><p>altitude in meters</p>
</dd>
<dt>utm.s33.ov.m</dt><dd><p>UTM E-W coordinates of the plot</p>
</dd>
<dt>utm.s33.snv.m</dt><dd><p>UTM S-N coordinates of the plot</p>
</dd>
<dt>stand.age.years</dt><dd><p>data frame with stand age in years, only the
first column, t0, is filled up</p>
</dd>
<dt>management</dt><dd><p>data frame will management codes for each period</p>
</dd>
</dl>



<h3>Source</h3>

<p>This dataset is derived from the Norwegian National Forest Inventory
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(fl)
str(fl) 
</code></pre>

<hr>
<h2 id='fn.vars.required'>
Finds Variables Required on Functions
</h2><span id='topic+fn.vars.required'></span>

<h3>Description</h3>

<p>Tries to find the variables to be calculated through the parameters of
the functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fn.vars.required(my.functions, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fn.vars.required_+3A_my.functions">my.functions</code></td>
<td>
<p>A list of functions to be used during the simulation</p>
</td></tr> 
<tr><td><code id="fn.vars.required_+3A_...">...</code></td>
<td>
<p>Use this to add any funciton that might not be included
in my.functions</p>
</td></tr>
</table>


<h3>Value</h3>

<p>It returns a vector with the name of the potential variables required.
</p>


<h3>Author(s)</h3>

<p>Clara Anton Fernandez <a href="mailto:caf@nibio.no">caf@nibio.no</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fn.vars.required (my.functions = list(
                             fn.growth     = "grow.dbhinc.hgtinc",
                             fn.dbh.inc    = "dbhi.BN2009",
                             fn.hgt.inc    = "height.korf", 
                             fn.mort       = "mort.B2007",
                             fn.recr       = "recr.BBG2008",
                             fn.management = "management.prob",
                             fn.tree.removal = "mng.tree.removal",
                             fn.modif      = NULL, 
                             fn.prep.common.vars = "prep.common.vars.fun"
                           ),
                      "BBG2008")

</code></pre>

<hr>
<h2 id='grow.dbhinc.hgtinc'>
Growth and Height Increment Function Wrapper
</h2><span id='topic+grow.dbhinc.hgtinc'></span>

<h3>Description</h3>

<p>A growth and height increment function wrapper that can be used with or
without a height increment function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grow.dbhinc.hgtinc(tr, fl, common.vars, this.period, functions, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="grow.dbhinc.hgtinc_+3A_tr">tr</code></td>
<td>
<p>A <em>trList</em> class object.</p>
</td></tr>
<tr><td><code id="grow.dbhinc.hgtinc_+3A_fl">fl</code></td>
<td>
<p>A list describing the plot data.</p>
</td></tr>
<tr><td><code id="grow.dbhinc.hgtinc_+3A_common.vars">common.vars</code></td>
<td>
<p>A list with at least variables spp (species classification in categories: spruce, pine, birch and other), and SBA.m2.ha.</p>
</td></tr>
<tr><td><code id="grow.dbhinc.hgtinc_+3A_this.period">this.period</code></td>
<td>

<p>The period for which to calculate growth.</p>
</td></tr>
<tr><td><code id="grow.dbhinc.hgtinc_+3A_functions">functions</code></td>
<td>
<p>A list defining the functions to be used in sitree.</p>
</td></tr>
<tr><td><code id="grow.dbhinc.hgtinc_+3A_...">...</code></td>
<td>
<p>Further arguments to be passed to DBH increment and height increment functions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A growth function should calculate both dbh and height increment. This
function calls two functions, defined in <em>functions</em> as <em>fn.dbh.inc</em> and <em>fn.hgt.in</em>c to  estimate those.
</p>


<h3>Value</h3>

<p>Returns a data frame with two elements dbh.inc.mm (DBH increment in
mm), hgt.inc.dm (Height increment in dm)-
</p>


<h3>Author(s)</h3>

<p>Clara Anton Fernandez <a href="mailto:caf@nibio.no">caf@nibio.no</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>foo.matrix &lt;-  matrix(0, nrow = length(tr$dbh), ncol = (5 +1))
colnames(foo.matrix) &lt;- paste("t", 0:5, sep = "")
foo.dbh &lt;- foo.height &lt;- foo.matrix
foo.dbh[,1] &lt;- tr$dbh
foo.height[,1] &lt;- tr$height

trl &lt;- list(
  plot.id  = tr$plot.id,
  treeid    = tr$treeid,
  dbh.mm    = foo.dbh,
  height.dm = foo.height,
  yrs.sim   = rep(0, nrow(tr)),
  tree.sp   = factor(tr$tree.sp)
)
tr.i &lt;- trList$new(data = trl, nperiods = as.integer(5))

common.vars &lt;-  prep.common.vars.fun(
  tr = tr.i,
  fl = fl,
  i.period       = 0,
  this.period    = "t0",
  common.vars    = "NULL",
  vars.required  = c("spp", "SBA.m2.ha", "QMD.cm"),
  period.length = 5,
  species.spruce = c(1, 2, 3),
  species.pine = c(10, 11, 20, 21, 29),
  species.harw = c(30, 31)
)


grow.dbhinc.hgtinc (tr = tr.i,
                    fl = fl,
                    common.vars = common.vars$res,
                    this.period = "t0",
                    functions = list(
                        fn.growth     = 'grow.dbhinc.hgtinc',
                        fn.mort       = 'mort.B2007',
                        fn.recr       = 'recr.BBG2008',
                        fn.management = 'management.prob',
                        fn.tree.removal = 'mng.tree.removal',
                        fn.modif      = NULL, #'ext.modif.fun',
                        fn.prep.common.vars = 'prep.common.vars.fun'
                    ),
		    fn.dbh.inc = "dbhi.BN2009",
                    fn.hgt.inc =  "height.korf", 
                    species.spruce = c(1, 2, 3),
                    species.pine =  c(10, 11, 20, 21, 29),
                    species.harw =  c(30, 31)
                    )

</code></pre>

<hr>
<h2 id='height.korf'>
Simple height function
</h2><span id='topic+height.korf'></span>

<h3>Description</h3>

<p>A simple tree height function based on tree species, and DBH. It returns the
difference between the height at the current period (this.period) and
the next period.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>height.korf(common.vars, this.period, tr,  dbh.inc.mm, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="height.korf_+3A_common.vars">common.vars</code></td>
<td>

<p>A list with at least an element named 'spp' with the species group composition.
</p>
</td></tr>
<tr><td><code id="height.korf_+3A_this.period">this.period</code></td>
<td>

<p>The period for which to calculate the height of the trees.
</p>
</td></tr>
<tr><td><code id="height.korf_+3A_tr">tr</code></td>
<td>

<p>A <em>trList</em>.
</p>
</td></tr>  
<tr><td><code id="height.korf_+3A_dbh.inc.mm">dbh.inc.mm</code></td>
<td>

<p>A vector with the projected dbh increment.
</p>
</td></tr>
<tr><td><code id="height.korf_+3A_...">...</code></td>
<td>

<p>Currently not used
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector with tree heights increments in dm.
</p>


<h3>Author(s)</h3>

<p>Clara Anton Fernandez <a href="mailto:caf@nibio.no">caf@nibio.no</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>foo.matrix &lt;-  matrix(0, nrow = length(tr$dbh), ncol = (5 +1))
colnames(foo.matrix) &lt;- paste("t", 0:5, sep = "")
foo.dbh &lt;- foo.height &lt;- foo.matrix
foo.dbh[,1] &lt;- tr$dbh
foo.height[,1] &lt;- tr$height

trl &lt;- list(
  plot.id  = tr$plot.id,
  treeid    = tr$treeid,
  dbh.mm    = foo.dbh,
  height.dm = foo.height,
  yrs.sim   = rep(0, nrow(tr)),
  tree.sp   = factor(tr$tree.sp)
)
tr.i &lt;- trList$new(data = trl, nperiods = as.integer(5))

common.vars &lt;-  prep.common.vars.fun(
  tr = tr.i,
  fl = fl,
  this.period    = "t0",
  i.period       = 0,
  common.vars    = "NULL",
  mng.options    = NA,
  vars.required  = c("spp"),
  period.length = 5
)
height.korf(common.vars = common.vars$res, this.period = 't0', 
    tr.i, fl, dbh.inc.mm = runif(nrow(tr.i$data$dbh.mm), 5, 80)) 
</code></pre>

<hr>
<h2 id='management.prob'>
Final felling and thinning functions for Norwegian forest
</h2><span id='topic+harv.prob'></span><span id='topic+management.prob'></span><span id='topic+thin.prob'></span>

<h3>Description</h3>

<p>Estimates de probability of a stand to be harvested or thinning
following Anton-Fernandez et al. (20012).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>management.prob(tr, fl, fun.final.felling = "harv.prob",
fun.thinning = "thin.prob", common.vars, this.period, next.period, ...)

harv.prob(region, skidding.distance.100m, AgeTo5, vuprha.m3.ha,
slope.per, SI.m, SI.spp)

thin.prob(region, skidding.distance.100m, AgeTo5, vuprha.m3.ha, slope.per, SI.m, SI.spp)


</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="management.prob_+3A_tr">tr</code></td>
<td>

<p>A <em>trList</em> class object.
</p>
</td></tr>
<tr><td><code id="management.prob_+3A_fl">fl</code></td>
<td>

<p>A list describing the plot data.
</p>
</td></tr>
<tr><td><code id="management.prob_+3A_fun.final.felling">fun.final.felling</code></td>
<td>

<p>Function to use to calculate final felling.
</p>
</td></tr>
<tr><td><code id="management.prob_+3A_fun.thinning">fun.thinning</code></td>
<td>

<p>Function to use to calculate thinning.
</p>
</td></tr>
<tr><td><code id="management.prob_+3A_common.vars">common.vars</code></td>
<td>

<p>A list with at least variables dev.class and vuprha.m3.ha.
</p>
</td></tr>
<tr><td><code id="management.prob_+3A_this.period">this.period</code></td>
<td>

<p>The period for which to calculate final felling and thinning probability.
</p>
</td></tr>
<tr><td><code id="management.prob_+3A_next.period">next.period</code></td>
<td>

<p>The next period to the one for which final felling and thinning probability are to be calculated.
</p>
</td></tr>
<tr><td><code id="management.prob_+3A_...">...</code></td>
<td>

<p>Further arguments
</p>
</td></tr>
<tr><td><code id="management.prob_+3A_region">region</code></td>
<td>

<p>A vector containing the region in Norway where every plot is situated.
</p>
</td></tr>
<tr><td><code id="management.prob_+3A_skidding.distance.100m">skidding.distance.100m</code></td>
<td>

<p>A vector containing skidding for each plot. 
</p>
</td></tr>
<tr><td><code id="management.prob_+3A_ageto5">AgeTo5</code></td>
<td>

<p>A vector containing number of years to development class 5 for each plot.
</p>
</td></tr>
<tr><td><code id="management.prob_+3A_vuprha.m3.ha">vuprha.m3.ha</code></td>
<td>

<p>Volume per ha in cubic meters per ha for each plot.
</p>
</td></tr>
<tr><td><code id="management.prob_+3A_slope.per">slope.per</code></td>
<td>

<p>Slope, in percentatge, for each plot.
</p>
</td></tr>
<tr><td><code id="management.prob_+3A_si.m">SI.m</code></td>
<td>

<p>Site index (SI) in m.
</p>
</td></tr>
<tr><td><code id="management.prob_+3A_si.spp">SI.spp</code></td>
<td>

<p>Species for which the SI is calculated (1 = spruce, 2 = pine, 3 = deciduous).
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>It returns a list with one element: 
</p>
<table role = "presentation">
<tr><td><code>mng</code></td>
<td>
<p>a vector with the management to apply to each plot.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Clara Anton Fernandez <a href="mailto:caf@nibio.no">caf@nibio.no</a>
</p>


<h3>References</h3>

<p>Antón-Fernández, C. and Astrup, R. 2012 Empirical harvest models and
their use in regional business-as-usual scenarios of timber supply  and carbon stock development. <em>Scandinavian Journal of Forest Research</em>, <em>27</em>, 4, 379&ndash;392.</p>


<h3>Examples</h3>

<pre><code class='language-R'>foo.matrix &lt;-  matrix(0, nrow = length(tr$dbh), ncol = (5 +1))
colnames(foo.matrix) &lt;- paste("t", 0:5, sep = "")
foo.dbh &lt;- foo.height &lt;- foo.matrix
foo.dbh[,1] &lt;- tr$dbh
foo.height[,1] &lt;- tr$height

trl &lt;- list(
  plot.id  = tr$plot.id,
  treeid    = tr$treeid,
  dbh.mm    = foo.dbh,
  height.dm = foo.height,
  yrs.sim   = rep(0, nrow(tr)),
  tree.sp   = factor(tr$tree.sp)
)
tr.i &lt;- trList$new(data = trl, nperiods = as.integer(5))

common.vars &lt;-  prep.common.vars.fun(
  tr = tr.i,
  fl = fl,
  i.period       = 0,
  this.period    = "t0",
  common.vars    = "NULL",
  vars.required  = c("spp", "SBA.m2.ha", "QMD.cm", "vuprha.m3.ha", "AgeTo5"),
  period.length = 5
)
fl$management &lt;- data.frame(matrix(NA, ncol = tr.i$nperiods,
                                   nrow = nrow(tr.i$data$dbh.mm)))
names(fl$management) &lt;- paste0("t", 1:tr.i$nperiods)

management.prob(tr.i,
                fl,
                fun.final.felling = "harv.prob",
                fun.thinning = "thin.prob",
                common.vars = common.vars$res,
                this.period = "t0",
                next.period = "t1")

harv.prob(region = fl$region[1:3],
          skidding.distance.100m = fl$skidding.distance.100[1:3],
          AgeTo5 = c(50, 20, 15),
          vuprha.m3.ha = common.vars$res$vuprha.m3.ha[1:3],
          slope.per = fl$slope.per[1:3],
          SI.m = fl$SI.m[1:3],
          SI.spp = fl$SI.spp[1:3])

thin.prob(region = fl$region[1:3],
          skidding.distance.100m = fl$skidding.distance.100[1:3],
          AgeTo5 = c(50, 20, 15),
          vuprha.m3.ha = common.vars$res$vuprha.m3.ha[1:3],
          slope.per = fl$slope.per[1:3],
          SI.m = fl$SI.m[1:3],
          SI.spp = fl$SI.spp[1:3]
)

</code></pre>

<hr>
<h2 id='mng.tree.removal'>
Function to remove trees
</h2><span id='topic+mng.tree.removal'></span>

<h3>Description</h3>

<p>Define how trees are going to be removed in plots with some sort of
management that involves removal (e.g final felling, thinning).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mng.tree.removal(tr, fl, common.vars, this.period, next.period, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mng.tree.removal_+3A_tr">tr</code></td>
<td>

<p>A <em>trList</em> class object.
</p>
</td></tr>
<tr><td><code id="mng.tree.removal_+3A_fl">fl</code></td>
<td>

<p>A list describing the plot data.
</p>
</td></tr>
<tr><td><code id="mng.tree.removal_+3A_common.vars">common.vars</code></td>
<td>

<p>A list with at least variable <em>vol.wo.tr.m3.ha</em>
</p>
</td></tr>
<tr><td><code id="mng.tree.removal_+3A_this.period">this.period</code></td>
<td>

<p>The period for which to calculate final felling and thinning probability.
</p>
</td></tr>
<tr><td><code id="mng.tree.removal_+3A_next.period">next.period</code></td>
<td>

<p>The next period to the one for which final felling and thinning probability are to be calculated.
</p>
</td></tr>
<tr><td><code id="mng.tree.removal_+3A_...">...</code></td>
<td>

<p>A list containing at least an element named per.vol.harv, that should
contain the percentatge of volume removed within each plot/stand.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a TRUE/FALSE vector of length equal to the number of trees in <em>tr</em>.
</p>


<h3>Author(s)</h3>

<p>Clara Anton Fernandez <a href="mailto:caf@nibio.no">caf@nibio.no</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>foo.matrix &lt;-  matrix(0, nrow = length(tr$dbh), ncol = (5 +1))
colnames(foo.matrix) &lt;- paste("t", 0:5, sep = "")
foo.dbh &lt;- foo.height &lt;- foo.matrix
foo.dbh[,1] &lt;- tr$dbh
foo.height[,1] &lt;- tr$height

trl &lt;- list(
  plot.id  = tr$plot.id,
  treeid    = tr$treeid,
  dbh.mm    = foo.dbh,
  height.dm = foo.height,
  yrs.sim   = rep(0, nrow(tr)),
  tree.sp   = factor(tr$tree.sp)
)
tr.i &lt;- trList$new(data = trl, nperiods = as.integer(5))

common.vars &lt;-  prep.common.vars.fun(
  tr = tr.i,
  fl = fl,
  i.period       = 0,
  this.period    = "t0",
  common.vars    = "NULL",
  vars.required  = c("vol.wo.tr.m3.ha", "vuprha.m3.h"),
  period.length = 5,
  species.spruce = c(1, 2, 3),
  species.pine = c(10, 11, 20, 21, 29),
  species.harw = c(30, 31)
)

fl$management &lt;- data.frame(matrix(NA, ncol = tr.i$nperiods,
                                   nrow = length(fl$plot.id)))
names(fl$management) &lt;- paste0("t", 1:tr.i$nperiods)

management &lt;- management.prob(tr.i,
                fl,
                fun.final.felling = "harv.prob",
                fun.thinning = "thin.prob",
                common.vars = common.vars$res,
                this.period = "t0",
                next.period = "t1")
fl$management[, "t1"] &lt;- management$management
remove.tree &lt;- mng.tree.removal(tr = tr.i,
                                fl = fl,
                                common.vars = common.vars$res,
                                this.period = "t0",
                                next.period = "t1",
                                per.vol.harv =  0.83 )
sum(remove.tree)
</code></pre>

<hr>
<h2 id='mort.B2007'>
Mortality Function by Bollandsas (2007)
</h2><span id='topic+mort.B2007'></span>

<h3>Description</h3>

<p>Implementation of the individual tree mortality function published by Bollandsås (2007) doi:10.1080/02827580802477875 .
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mort.B2007(tr, fl, common.vars, this.period, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mort.B2007_+3A_tr">tr</code></td>
<td>

<p>A <em>trList</em> class object.
</p>
</td></tr>
<tr><td><code id="mort.B2007_+3A_fl">fl</code></td>
<td>

<p>A list describing the plot data.
</p>
</td></tr>
<tr><td><code id="mort.B2007_+3A_common.vars">common.vars</code></td>
<td>

<p>A list with at least variables spp (species classification in
categories: spruce, pine, birch and other), and SBA.m2.ha.
</p>
</td></tr>
<tr><td><code id="mort.B2007_+3A_this.period">this.period</code></td>
<td>

<p>The period for which to calculate mortality.
</p>
</td></tr>
<tr><td><code id="mort.B2007_+3A_...">...</code></td>
<td>

<p>Ignored.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A TRUE/FALSE vector for all trees in <em>tr</em>.
</p>


<h3>Author(s)</h3>

<p>Clara Anton Fernandez <a href="mailto:caf@nibio.no">caf@nibio.no</a>
</p>


<h3>References</h3>

<p>Bollandsås O. Uneven-aged Forestry in Norway: Inventory and Management Models. [Ås, Norway]: Norwegian University of Life Sciences, Department of Ecology and Natural Resource Management; 2007. 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>foo.matrix &lt;-  matrix(0, nrow = length(tr$dbh), ncol = (5 +1))
colnames(foo.matrix) &lt;- paste("t", 0:5, sep = "")
foo.dbh &lt;- foo.height &lt;- foo.matrix
foo.dbh[,1] &lt;- tr$dbh
foo.height[,1] &lt;- tr$height

trl &lt;- list(
  plot.id  = tr$plot.id,
  treeid    = tr$treeid,
  dbh.mm    = foo.dbh,
  height.dm = foo.height,
  yrs.sim   = rep(0, nrow(tr)),
  tree.sp   = factor(tr$tree.sp)
)
tr.i &lt;- trList$new(data = trl, nperiods = as.integer(5))

common.vars &lt;-  prep.common.vars.fun(
  tr = tr.i,
  fl = fl,
  this.period    = "t0",
  i.period       = 0,
  common.vars    = "NULL",
  mng.options    = NA,
  vars.required  = c("spp", "SBA.m2.ha"),
  period.length = 5
)
dead.trees &lt;- mort.B2007(tr.i, fl, common.vars$res, this.period = 't0')
sum(dead.trees)

</code></pre>

<hr>
<h2 id='picea.abies.vol'>
Volumes for Norwegian species
</h2><span id='topic+picea.abies.vol'></span><span id='topic+picea.abies.volV'></span><span id='topic+pinus.sylvestris.vol'></span><span id='topic+pinus.sylvestris.volV'></span><span id='topic+sitka.vol'></span><span id='topic+harw.nor.vol'></span>

<h3>Description</h3>

<p>These functions calculate tree volume with or without bark for the main
species in Norway, that is, Norway spruce, Scots pine, Sitka spruce,
birch, and
... following Braastad (1966), Brantseg (1967), and Vestjordet (1967).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>picea.abies.vol(dbh, trh, bark, units)
picea.abies.volV(dbh, trh, bark, units)
pinus.sylvestris.vol(dbh, trh, bark, units)
pinus.sylvestris.volV(dbh, trh, bark, units)
sitka.vol(dbh, trh, bark, units)
harw.nor.vol(tsl, dbh, trh, bark, units)

</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="picea.abies.vol_+3A_dbh">dbh</code></td>
<td>

<p>A vector with diameters at breast height in mm with bark.
</p>
</td></tr>
<tr><td><code id="picea.abies.vol_+3A_trh">trh</code></td>
<td>

<p>A vector with tree heights in cm.
</p>
</td></tr>
<tr><td><code id="picea.abies.vol_+3A_bark">bark</code></td>
<td>

<p>If tree volume should be calculated with bark, &quot;mb&quot;, or wihtout bark, &quot;ub&quot;.
</p>
</td></tr>
<tr><td><code id="picea.abies.vol_+3A_units">units</code></td>
<td>

<p>&quot;l&quot; in liters, &quot;c&quot; in cubic centimeters.
</p>
</td></tr>
<tr><td><code id="picea.abies.vol_+3A_tsl">tsl</code></td>
<td>

<p>Tree species  30 (), 31(), 32 (), 40(), 41(), 50(), NA. This only affects
the calculations of diameter without bark.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns tree volume in the selected units.
</p>


<h3>References</h3>

<p>Braastad, H. 1966. Volumtabeller for bjoerk [Volume tables for birch]. Meddelelser fra Det norske Skogforsøksvesen 21: 23–78.
Brantseg, A. 1967. Furu sønnafjells. Kubering av staaende skog. Funksjoner og tabeller [Volume functions and tables for Scots pine. South Norway]. Meddelelser fra Det norske Skogforsøksvesen 22: 695–739.
Vestjordet, E. 1967. Funksjoner og tabeller for kubering av staaende gran [Functions and tables for volume of standing trees. Norway spruce]. Meddelelser fra Det norske Skogforsøksvesen 22. Ås, Norway: Norwegian Forest and Landscape Institute.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>harw.nor.vol(tsl = c(30,31), dbh = c(45, 25), trh = c(120, 80), bark = "ub", units = "l")
</code></pre>

<hr>
<h2 id='prep.common.vars.fun'>
Function to Calculate Common Variables
</h2><span id='topic+prep.common.vars.fun'></span>

<h3>Description</h3>

<p>A function to calculate common variables needed to estimate growth,
death, etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prep.common.vars.fun(tr, fl, i.period, this.period, common.vars, vars.required,
period.length, n.periods, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prep.common.vars.fun_+3A_tr">tr</code></td>
<td>

<p>A <em>trList</em> class object.
</p>
</td></tr>
<tr><td><code id="prep.common.vars.fun_+3A_fl">fl</code></td>
<td>

<p>A list describing the plot data.
</p>
</td></tr>
<tr><td><code id="prep.common.vars.fun_+3A_i.period">i.period</code></td>
<td>

<p>The number of period (from 0 to nperiods) for which to calculate the
comon variables.
</p>
</td></tr>
<tr><td><code id="prep.common.vars.fun_+3A_this.period">this.period</code></td>
<td>

<p>The period for which to calculate the common variables.
</p>
</td></tr>
<tr><td><code id="prep.common.vars.fun_+3A_common.vars">common.vars</code></td>
<td>

<p>A list with existing common variables.
</p>
</td></tr>
<tr><td><code id="prep.common.vars.fun_+3A_vars.required">vars.required</code></td>
<td>

<p>Variables to be calculated.
</p>
</td></tr>
<tr><td><code id="prep.common.vars.fun_+3A_period.length">period.length</code></td>
<td>

<p>Length of the periods, in years.
</p>
</td></tr>
<tr><td><code id="prep.common.vars.fun_+3A_n.periods">n.periods</code></td>
<td>

<p>Number of periods.
</p>
</td></tr>
<tr><td><code id="prep.common.vars.fun_+3A_...">...</code></td>
<td>

<p>Further arguments, data, etc.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is an example of a prep.common.vars file. A prep.common.vars
(prepare common variables) is needed for the simulation. It is in this
file that additional variables needed for the particular functions used
in the simulation are calculated. For example, to calculate quadratic mean diameter, basal area, or volume.
</p>


<h3>Value</h3>

<p>A list
</p>
<table role = "presentation">
<tr><td><code>res</code></td>
<td>
<p>A list with the common variables.</p>
</td></tr>
<tr><td><code>fl</code></td>
<td>
<p>Updated <em>fl</em></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Clara Anton Fernandez <a href="mailto:caf@nibio.no">caf@nibio.no</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>foo.matrix &lt;-  matrix(0, nrow = length(tr$dbh), ncol = (5 +1))
colnames(foo.matrix) &lt;- paste("t", 0:5, sep = "")
foo.dbh &lt;- foo.height &lt;- foo.matrix
foo.dbh[,1] &lt;- tr$dbh
foo.height[,1] &lt;- tr$height

trl &lt;- list(
  plot.id  = tr$plot.id,
  treeid    = tr$treeid,
  dbh.mm    = foo.dbh,
  height.dm = foo.height,
  yrs.sim   = rep(0, nrow(tr)),
  tree.sp   = factor(tr$tree.sp)
)
tr.i &lt;- trList$new(data = trl, nperiods = as.integer(5))

common.vars &lt;-  prep.common.vars.fun(
  tr = tr.i,
  fl = fl,
  i.period       = 0,
  this.period    = "t0",
  common.vars    = "NULL",
  vars.required  = c("vol.wo.tr.m3.ha", "vuprha.m3.h"),
  period.length = 5
)
str(common.vars)
</code></pre>

<hr>
<h2 id='QMD.cm.f'>
Quadratic Mean Diameter
</h2><span id='topic+QMD.cm.f'></span>

<h3>Description</h3>

<p>Calculates quadratic mean diameter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>QMD.cm.f(x.mm)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="QMD.cm.f_+3A_x.mm">x.mm</code></td>
<td>

<p>DBH in mm.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It ignores not finite values like NA, and calculates the QMD for the
rest of the trees.
</p>


<h3>Value</h3>

<p>The QMD in cm of x.mm.
</p>


<h3>Author(s)</h3>

<p>Clara Anton Fernandez <a href="mailto:caf@nibio.no">caf@nibio.no</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>QMD.cm.f(50)
QMD.cm.f(c(51, NA))
QMD.cm.f(c(51, 42, 120, 57))
</code></pre>

<hr>
<h2 id='recover.last.measurement'>
Recover dbh and height at time of death
</h2><span id='topic+recover.last.measurement'></span>

<h3>Description</h3>

<p>Removes all dbh and height data that corresponds to the live of the
tree, and adds the dbh and height at time of death to the dbh.mm and
height.dm in the <em>data</em> field.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recover.last.measurement(tr.list.dead)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="recover.last.measurement_+3A_tr.list.dead">tr.list.dead</code></td>
<td>

<p>a trListDead object
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It removes all dbh and height data from the <em>data</em> field, adds the
dbh and height at time of death, and converts any potential NAs created
in the process to 0.
</p>


<h3>Value</h3>

<p>It returns the same object (a trListDead object) with all data on dbh
and height removed. For each tree there is only one observation of dbh and
height in the  <em>data</em> field, the estimated dbh and height at time
of death.
</p>


<h3>Author(s)</h3>

<p>Clara Anton Fernandez <a href="mailto:caf@nibio.no">caf@nibio.no</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(2017)
res &lt;- sitree (tree.df   = tr,
                stand.df  = fl,
                functions = list(
                    fn.growth     = 'grow.dbhinc.hgtinc',
                    fn.mort       = 'mort.B2007',
                    fn.recr       = 'recr.BBG2008',
                    fn.management = 'management.prob',
                    fn.tree.removal = 'mng.tree.removal',
                    fn.modif      = NULL, #'ext.modif.fun',
                    fn.prep.common.vars = 'prep.common.vars.fun'
                ),
                n.periods = 5,
                period.length = 5,
                mng.options = NA,
                print.comments = FALSE,
		fn.dbh.inc = "dbhi.BN2009",
                fn.hgt.inc =  "height.korf", 
                species.spruce = c(1, 2, 3),
                species.pine = c(10, 11, 20, 21, 29),
                species.harw = c(30, 31),
                fun.final.felling = "harv.prob",
                fun.thinning      = "thin.prob",
                'BN2009',
                'BBG2008', 'SBA.m2.ha', 'spp','pr.spru.ba', 'QMD.cm',
                per.vol.harv = 0.83
                )
dead &lt;- recover.last.measurement(res$dead)
str(dead)
removed &lt;- recover.last.measurement(res$removed)
str(removed)
</code></pre>

<hr>
<h2 id='recover.state'>
Recovers the State
</h2><span id='topic+recover.state'></span>

<h3>Description</h3>

<p>It adds dead and removed trees to <em>tr</em>. This is an internal
function that should not be run, in general, by a regular user. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recover.state(tr, dead.trees, removed.trees)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="recover.state_+3A_tr">tr</code></td>
<td>

<p>A <em>trList</em> class object.
</p>
</td></tr>
<tr><td><code id="recover.state_+3A_dead.trees">dead.trees</code></td>
<td>

<p>A <em>trListDead</em> class object.
</p>
</td></tr>
<tr><td><code id="recover.state_+3A_removed.trees">removed.trees</code></td>
<td>

<p>A <em>trListDead</em> class object.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In order to make calculations easier and lighter memory wise, at each
cycle (period) of the simulation all removed (harvested) and dead trees
are removed from <em>tr</em>, which only keeps alive trees at the current
period. Once the simulation is finished recover.state returns all dead
and removed trees to the last <em>tr</em>, so <em>sitree</em> can return a
full list, including all trees alive at any point during the simulation, of trees.
</p>


<h3>Value</h3>

<p>A <em>trList</em> class object.
</p>


<h3>Author(s)</h3>

<p>Clara Anton Fernandez <a href="mailto:caf@nibio.no">caf@nibio.no</a>
</p>

<hr>
<h2 id='recr.BBG2008'>
Recruitment function following BBG2008
</h2><span id='topic+recr.BBG2008'></span><span id='topic+BBG2008'></span>

<h3>Description</h3>

<p>It creates a list of new trees based on the functions from BBG2008, Bollandsås et al. (2008) doi:10.1080/02827580801995315 . BBG2008 functions estimates recruitment on a plot based on
stand basal area, SI, and pine, spruce, birch, and other broadleaved
species abundance. The implementation of this function is stochastic,
not deterministic. So, if run several times without setting a seed, the
results will vary. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recr.BBG2008(tr, fl, common.vars, i.period, this.period, next.period, ...)
BBG2008 (SBA.m2.ha, SI.m, pr.spru.ba, pr.pine.ba, pr.birch.ba, 
    pr.other.ba) 
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="recr.BBG2008_+3A_tr">tr</code></td>
<td>

<p>A trList object
</p>
</td></tr>
<tr><td><code id="recr.BBG2008_+3A_fl">fl</code></td>
<td>

<p>A list describing the plot information
</p>
</td></tr>
<tr><td><code id="recr.BBG2008_+3A_common.vars">common.vars</code></td>
<td>

<p>A list with at least 3 elements: a vector named SBA.m2.ha, stand basal
area in m2; a data frame named pr.spp.ba, with the percentatge of
basal area by species with column names spru, pine, birch, and other,
and a vector named i.tree with the stands corresponding to each tree.
</p>
</td></tr>
<tr><td><code id="recr.BBG2008_+3A_i.period">i.period</code></td>
<td>

<p>The number of period (from 0 to nperiods) for which to calculate recruitment.
</p>
</td></tr>
<tr><td><code id="recr.BBG2008_+3A_this.period">this.period</code></td>
<td>

<p>Period to use to estimate next period recruitment.
</p>
</td></tr>
<tr><td><code id="recr.BBG2008_+3A_next.period">next.period</code></td>
<td>

<p>Period for which to calculate recruitment.
</p>
</td></tr>
<tr><td><code id="recr.BBG2008_+3A_sba.m2.ha">SBA.m2.ha</code></td>
<td>

<p>Stand basal area in m2 per ha.
</p>
</td></tr>
<tr><td><code id="recr.BBG2008_+3A_si.m">SI.m</code></td>
<td>

<p>Site index (SI) in m.
</p>
</td></tr>
<tr><td><code id="recr.BBG2008_+3A_pr.spru.ba">pr.spru.ba</code></td>
<td>

<p>Percentatge of spruce in terms of basal area.
</p>
</td></tr>
<tr><td><code id="recr.BBG2008_+3A_pr.pine.ba">pr.pine.ba</code></td>
<td>

<p>Percentatge of pine in terms of basal area.
</p>
</td></tr>
<tr><td><code id="recr.BBG2008_+3A_pr.birch.ba">pr.birch.ba</code></td>
<td>

<p>Percentatge of birch in terms of basal area.
</p>
</td></tr>
<tr><td><code id="recr.BBG2008_+3A_pr.other.ba">pr.other.ba</code></td>
<td>

<p>Percentatge of other species in terms of basal area.
</p>
</td></tr>
<tr><td><code id="recr.BBG2008_+3A_...">...</code></td>
<td>

<p>Not used.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame with two columns for each of the four species,
one for the probability of positive recruitment (spruce.p, pine.p,
birch.p, other.p), and one for the conditional expected recruitment
(spruce.e, pine.e, birch.e, other.e).
</p>


<h3>Author(s)</h3>

<p>Clara Anton Fernandez <a href="mailto:caf@nibio.no">caf@nibio.no</a>
</p>


<h3>References</h3>

<p>Bollandsås, O. M., Buongiorno, J., and Gobakken T. (2008). Predicting the Growth of Stands of Trees of Mixed Species and Size: A Matrix Model for Norway. <em>Scandinavian Journal of Forest Research</em> <strong>23</strong>(2). 167-178.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>foo.matrix &lt;-  matrix(0, nrow = length(tr$dbh), ncol = (5 +1))
colnames(foo.matrix) &lt;- paste("t", 0:5, sep = "")
foo.dbh &lt;- foo.height &lt;- foo.matrix
foo.dbh[,1] &lt;- tr$dbh
foo.height[,1] &lt;- tr$height

trl &lt;- list(
  plot.id  = tr$plot.id,
  treeid    = tr$treeid,
  dbh.mm    = foo.dbh,
  height.dm = foo.height,
  yrs.sim   = rep(0, nrow(tr)),
  tree.sp   = factor(tr$tree.sp)
)
tr.i &lt;- trList$new(data = trl, nperiods = as.integer(5))

## create a fake dead trees and removed trees.

common.vars &lt;-  prep.common.vars.fun(
  tr = tr.i,
  fl = fl,
  this.period    = "t0",
  i.period       = 0,
  common.vars    = "NULL",
  mng.options    = NA,
  vars.required  = c("spp", "SBA.m2.ha", "pr.spru.ba"),
  period.length = 5,
  species.spruce = c(1, 2, 3),
  species.pine = c(10, 11, 20, 21, 29),
  species.harw = c(30, 31)
)

recr &lt;- recr.BBG2008(tr.i, fl, common.vars$res, i.period = 0, this.period = "t0",
                     next.period = "t1")
str(recr)
bbg &lt;- BBG2008 (common.vars$res$SBA.m2.ha[common.vars$res$i.tree],
                fl$SI.m,
                common.vars$res$pr.spp.ba$spru[common.vars$res$i.tree],
                common.vars$res$pr.spp.ba$pine[common.vars$res$i.tree],
                common.vars$res$pr.spp.ba$birch[common.vars$res$i.tree], 
                common.vars$res$pr.spp.ba$other[common.vars$res$i.tree])
str(bbg)
</code></pre>

<hr>
<h2 id='sitree'>
Individual Tree Simulator
</h2><span id='topic+sitree'></span>

<h3>Description</h3>

<p>Simulates the growth of individual trees in several plots, including
management and keeping record of dead and removed trees. It can also
include the effect of external modifiers such as climate change.
The SiTree package is described in Antón-Fernández, C., &amp; Astrup, R. (2022). https://doi.org/10.1016/j.softx.2021.100925
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sitree(tree.df, stand.df, functions, n.periods = 5, period.length,
mng.options = NA, print.comments = FALSE,..., ext.mod.first = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sitree_+3A_tree.df">tree.df</code></td>
<td>

<p>A data frame with individual tree data. It should include four columns
named 'plot.id' (an ID for the plot/stand that the tree belongs to),
treeid (a unique ID for the tree), dbh (a measure of horizontal
dimension), height (a measure of vertical dimension), tree.sp (tree species)
</p>
</td></tr>
<tr><td><code id="sitree_+3A_stand.df">stand.df</code></td>
<td>

<p>A data frame or list with neccessary data on the stand (e.g. slope, site
index). It should include a 'plot.id' that matches the one in tree.df
and a 'plot.size.m2', the plot size in m2. 'plot.size.m2' is only used
in the summary.sitree function to calculate figures by ha.
</p>
</td></tr>
<tr><td><code id="sitree_+3A_functions">functions</code></td>
<td>

<p>A list describing the basic functions. It should include a minimum of a
function for growth (fn.growth), for diameter (or basal area) increment,
for height increment (height.korf), mortality (fn.mort), recruitment
(fn.recr), management (fn.management), tree removal (fn.tree.removal),
and external modifiers (fn.modif). fn.management, fn.tree.removal, and
fn.modif, can be missing.
</p>
</td></tr>
<tr><td><code id="sitree_+3A_n.periods">n.periods</code></td>
<td>

<p>Number of periods to simulte (numeric).
</p>
</td></tr>
<tr><td><code id="sitree_+3A_period.length">period.length</code></td>
<td>

<p>The length of the periods (e.g. 5 years).
</p>
</td></tr>
<tr><td><code id="sitree_+3A_mng.options">mng.options</code></td>
<td>

<p>Management options and definitions to be passed further.
</p>
</td></tr>
<tr><td><code id="sitree_+3A_print.comments">print.comments</code></td>
<td>

<p>TRUE/FALSE Print comments. It is meant to help debugging new functions.
</p>
</td></tr>
<tr><td><code id="sitree_+3A_...">...</code></td>
<td>

<p>Further arguments to pass to functions used during simulation.
</p>
</td></tr>
<tr><td><code id="sitree_+3A_ext.mod.first">ext.mod.first</code></td>
<td>

<p>If TRUE (default) the external modifier functions will be run before fn.prep.common.vars.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list with all live, dead, removed trees, and some plot
information like stand age in years at each period, and management
applied at each plot at each period.
</p>


<h3>Author(s)</h3>

<p>Clara Anton Fernandez <a href="mailto:caf@nibio.no">caf@nibio.no</a>
</p>


<h3>References</h3>

<p>Antón-Fernández, C., &amp; Astrup, R. (2022). SiTree: A framework to implement single-tree simulators. SoftwareX, 18, 100925. https://doi.org/10.1016/j.softx.2021.100925
</p>


<h3>Examples</h3>

<pre><code class='language-R'>result.sitree &lt;- sitree (tree.df   = tr,
                           stand.df  = fl,
                           functions = list(
                             fn.growth     = 'grow.dbhinc.hgtinc',
                             fn.mort       = 'mort.B2007',
                             fn.recr       = 'recr.BBG2008',
                             fn.management = 'management.prob',
                             fn.tree.removal = 'mng.tree.removal',
                             fn.modif      = NULL, #'ext.modif.fun',
                             fn.prep.common.vars = 'prep.common.vars.fun'
                           ),
                           n.periods = 5,
                           period.length = 5,
                           mng.options = NA,
                           print.comments = FALSE,
                           fn.dbh.inc = "dbhi.BN2009",
                           fn.hgt.inc =  "height.korf", 
                           fun.final.felling = "harv.prob",
                           fun.thinning      = "thin.prob",
                           per.vol.harv = 0.83
                           )
str(result.sitree)
set.seed(2017)
result.sitree &lt;- sitree (tree.df   = stand.west.tr,
                           stand.df  = stand.west.st,
                           functions = list(
                             fn.growth     = 'grow.dbhinc.hgtinc',
                             fn.mort       = 'mort.B2007',
                             fn.recr       = 'recr.BBG2008',
                             fn.management = NULL,
                             fn.tree.removal = NULL,
                             fn.modif      = NULL, 
                             fn.prep.common.vars = 'prep.common.vars.fun'
                           ),
                           n.periods = 20,
                           period.length = 5,
                           mng.options = NA,
                           print.comments = FALSE,
                           fn.dbh.inc = "dbhi.BN2009",
                           fn.hgt.inc =  "height.korf"
                         )

</code></pre>

<hr>
<h2 id='sitree.summary'>
Summary plots
</h2><span id='topic+sitree.summary'></span>

<h3>Description</h3>

<p>It produces 5 summary plots (stand basal area, number of stems, average
height of tallest 10 trees, number of dead trees, and number of harvested trees)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sitree.summary(sitrees.res, plots, by.stand = TRUE, plot = FALSE,
                           plot.all.together = FALSE, with.legend = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sitree.summary_+3A_sitrees.res">sitrees.res</code></td>
<td>

<p>An object result of running sitree().
</p>
</td></tr>
<tr><td><code id="sitree.summary_+3A_plots">plots</code></td>
<td>

<p>Plots to be printed (1: stand basal area, 2: number of stems, 3: average
height of tallest 10 trees, 4: number of dead trees, 5: number of
harvested trees)
</p>
</td></tr>
<tr><td><code id="sitree.summary_+3A_by.stand">by.stand</code></td>
<td>

<p>TRUE/FALSE TRUE prints plot by stand (figures by ha), if FALSE it prints
plots with totals (divides values per ha by 'plot.size' and multiplies
by 10.000 to obtain total values)
</p>
</td></tr>
<tr><td><code id="sitree.summary_+3A_plot">plot</code></td>
<td>

<p>TRUE/FALSE if plots are printed
</p>
</td></tr>
<tr><td><code id="sitree.summary_+3A_plot.all.together">plot.all.together</code></td>
<td>

<p>if TRUE all plots are plotted in a single page
</p>
</td></tr>
<tr><td><code id="sitree.summary_+3A_with.legend">with.legend</code></td>
<td>

<p>if TRUE a legend will be added to the plot when by.stand == TRUE
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>It passes the required plots in a named list. It plot is TRUE it also
prints the required plots.
</p>


<h3>Author(s)</h3>

<p>Clara Anton Fernandez <a href="mailto:caf@nibio.no">caf@nibio.no</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sitree">sitree</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(sitree)
res &lt;- sitree (tree.df   = tr,
               stand.df  = fl,
               functions = list(
                   fn.growth     = 'grow.dbhinc.hgtinc',
                   fn.mort       = 'mort.B2007',
                   fn.recr       = 'recr.BBG2008',
                   fn.management = 'management.prob',
                   fn.tree.removal = 'mng.tree.removal',
                   fn.modif      = NULL, 
                   fn.prep.common.vars = 'prep.common.vars.fun'
               ),
               n.periods = 5,
               period.length = 5,
               mng.options = NA,
               print.comments = FALSE,
               fn.dbh.inc = "dbhi.BN2009",
               fn.hgt.inc =  "height.korf", 
               species.spruce = c(1, 2, 3),
               species.pine = c(10, 11, 20, 21, 29),
               species.harw = c(30, 31),
               fun.final.felling = "harv.prob",
               fun.thinning      = "thin.prob",
               per.vol.harv = 0.83
               )

summary.plots &lt;- sitree.summary(res, plots = 1:6, by.stand = FALSE, plot = TRUE)
</code></pre>

<hr>
<h2 id='sitree2dataframe'>
sitree2data.frame and sitree2dataframe.all
</h2><span id='topic+sitree2dataframe'></span><span id='topic+sitree2dataframe.all'></span>

<h3>Description</h3>

<p>sitree2data.frame converts trList and trListDead class objects to data.frames.
sitree2data.frame converts all output of sitree to a data.frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sitree2dataframe(tr.dt)
sitree2dataframe.all(sitree.res)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sitree2dataframe_+3A_tr.dt">tr.dt</code></td>
<td>

<p>A trList or trListDead object.
</p>
</td></tr>
<tr><td><code id="sitree2dataframe_+3A_sitree.res">sitree.res</code></td>
<td>

<p>An object resulting from running sitree.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>As implemented, it expects to have a 'removed' element on sitree2dataframe.all. For an alternative when the simulation has no harvest see the exaples below.
</p>


<h3>Value</h3>

<p>sitree2dataframe return a data.frame with dbh, height, and species by period.
sitree2dataframe.all returns a list  
</p>
<table role = "presentation">
<tr><td><code>live</code></td>
<td>
<p>A data.frame with dbh, height, and species of the trees alive at each period.</p>
</td></tr>
<tr><td><code>dead</code></td>
<td>
<p>A data.frame with dbh, height, and species of the trees found dead at each period.</p>
</td></tr>
<tr><td><code>removed</code></td>
<td>
<p>A data.frame with dbh, height, and species of the trees removed at each period.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Clara Anton Fernandez
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
n.periods &lt;- 10

# Run a simulation with the example functions
res &lt;- sitree (tree.df   = tr,
               stand.df  = fl,
               functions = list(
                     fn.growth     = 'grow.dbhinc.hgtinc',
                     fn.mort       = 'mort.B2007',
                     fn.recr       = 'recr.BBG2008',
                     fn.management = 'management.prob',
                     fn.tree.removal = 'mng.tree.removal',
                     fn.modif      = NULL, 
                     fn.prep.common.vars = 'prep.common.vars.fun'
                 ),
                 n.periods = n.periods,
                 period.length = 5,
                 mng.options = NA,
                 print.comments = FALSE,
                 fn.dbh.inc = "dbhi.BN2009",
                 fn.hgt.inc =  "height.korf", 
                 species.spruce = c(1, 2, 3),
                 species.pine = c(10, 11, 20, 21, 29),
                 species.harw = c(30, 31),
                 fun.final.felling = "harv.prob",
                 fun.thinning      = "thin.prob",
                 'BN2009',
                 'BBG2008', 'SBA.m2.ha', 'spp','pr.spru.ba', 'QMD.cm',
                 per.vol.harv = 0.83
                 )

dbh.mm &lt;- sitree2dataframe(res$live)
res.dt &lt;- sitree2dataframe.all(res)



## The function is currently defined as


</code></pre>

<hr>
<h2 id='sp.classification'>
Species classifcation
</h2><span id='topic+sp.classification'></span>

<h3>Description</h3>

<p>Classifies the tree species into four species groups
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sp.classification(tree.sp, species.spruce, species.pine, species.harw)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sp.classification_+3A_tree.sp">tree.sp</code></td>
<td>

<p>Tree species code.
</p>
</td></tr>
<tr><td><code id="sp.classification_+3A_species.spruce">species.spruce</code></td>
<td>

<p>A vector with the codes used to define 'spruce' group .
</p>
</td></tr>
<tr><td><code id="sp.classification_+3A_species.pine">species.pine</code></td>
<td>

<p>A vector with the codes used to define 'pine' group .
</p>
</td></tr>
<tr><td><code id="sp.classification_+3A_species.harw">species.harw</code></td>
<td>

<p>A vector with the codes used to define the 'birch' group .
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a vector with the classification of tree.sp into one of these
four groups: spruce, pine, birch, and other. spruce group is defined by
species.spruce, pine group is defined by species.pine, and birch is
defined by species.harw. If a species does not fall within any of these
three groups is classified as 'other'.
</p>


<h3>Author(s)</h3>

<p>Clara Anton Fernandez <a href="mailto:caf@nibio.no">caf@nibio.no</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sp.classification(tr$tree.sp, species.spruce = c(1,15),
                           species.pine = c(2,34),
                           species.harw = c(3,4))
</code></pre>

<hr>
<h2 id='stand.west.st'>Stand and plot characteritics for stand.west.tr</h2><span id='topic+stand.west.st'></span>

<h3>Description</h3>

<p>Dataset with stand and plot data for stand.west.tr
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stand.west.st</code></pre>


<h3>Format</h3>

<p>A data frame with 4 observations on the following 7 variables.
</p>

<dl>
<dt><code>plot.id</code></dt><dd><p>unique ID for each plot</p>
</dd>
<dt><code>SI.m</code></dt><dd><p>site index in meters</p>
</dd>
<dt><code>kom</code></dt><dd><p>municipality code</p>
</dd>
<dt><code>SI.spp</code></dt><dd><p>species for which site index is measured</p>
</dd>
<dt><code>plot.size.m2</code></dt><dd><p>plot size in m2</p>
</dd>
<dt><code>tree2ha</code></dt><dd><p>multiplier to convert values per tree to per hectare</p>
</dd>
<dt><code>lat.deg</code></dt><dd><p>latitude of the plots in degrees</p>
</dd>
<dt><code>subplot.size.m2</code></dt><dd><p>plot size in m2, this is a dummy variable needed for some of the calculations</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>stand.west.st
str(stand.west.st) 
</code></pre>

<hr>
<h2 id='stand.west.tr'>
A whole stand dataset
</h2><span id='topic+stand.west.tr'></span>

<h3>Description</h3>

<p>This dataset describes a whole stand of 1019 m2 and spacing 1.25x1.25m. The stand is divided in 4 plots of approximately 250 m2. All trees are Norway spruce.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stand.west.tr</code></pre>


<h3>Format</h3>

<p>A data frame with 651 observations on the following 5 variables.
</p>

<dl>
<dt><code>dbh</code></dt><dd><p>diameter at breast height in mm</p>
</dd>
<dt><code>height</code></dt><dd><p>tree height in dm</p>
</dd>
<dt><code>plot.id</code></dt><dd><p>a unique ID for each plot</p>
</dd>
<dt><code>treeid</code></dt><dd><p>a unique ID for each tree</p>
</dd>
<dt><code>tree.sp</code></dt><dd><p>tree species, a factor with levels <code>1</code> <code>2</code> <code>3</code> <code>10</code> <code>11</code> <code>20</code> <code>21</code> <code>29</code> <code>30</code> <code>31</code> <code>32</code> <code>40</code> <code>41</code> <code>42</code> <code>43</code> <code>44</code> <code>48</code> <code>49</code> <code>50</code> <code>51</code> <code>52</code> <code>53</code> <code>54</code> <code>55</code> <code>56</code> <code>57</code> <code>58</code> <code>59</code> <code>70</code></p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>stand.west.tr
str(stand.west.tr) 
</code></pre>

<hr>
<h2 id='toBindLists'>
Binding lists
</h2><span id='topic+toBindLists'></span>

<h3>Description</h3>

<p>This function is only used internally to bind vectors, data frames, and lists.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>toBindLists(x, y)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="toBindLists_+3A_x">x</code></td>
<td>

<p>A vector, data frame or list. 
</p>
</td></tr>
<tr><td><code id="toBindLists_+3A_y">y</code></td>
<td>

<p>Object of the same type as x.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>It returns a vector, a data frame or a list depending on <em>x</em>.
</p>


<h3>Author(s)</h3>

<p>Clara Anton Fernandez <a href="mailto:caf@nibio.no">caf@nibio.no</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example of how toBindLists works with data frames
x &lt;- data.frame(1:10, ncol = 2)
names(x) &lt;- c('a', 'b')
y &lt;- data.frame(1:20, ncol = 2)
names(y) &lt;- names(x)
j &lt;- toBindLists(x, y)
j

## with vectors
x &lt;- c(1:3)
y &lt;- (8:15)
j &lt;- toBindLists(x, y)
j

## with lists
x &lt;- data.frame(1:10, ncol = 2)
names(x) &lt;- c('a', 'b')
y &lt;- data.frame(1:20, ncol = 2)
names(y) &lt;- names(x)

x &lt;- list(x = x, y = y)

xx &lt;- data.frame(1:10, ncol = 3)
names(xx) &lt;- c('a', 'b')
yy &lt;- data.frame(1:20, ncol = 3)
names(yy) &lt;- names(xx)

y &lt;- list(xx = xx, yy= yy)

j &lt;- toBindLists(x, y)
j
</code></pre>

<hr>
<h2 id='tr'>
Individual Tree Data
</h2><span id='topic+tr'></span>

<h3>Description</h3>

<p>A data frame with data to create the trList object needed to run <em>sitree</em>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("tr")</code></pre>


<h3>Format</h3>

<p>The data frame contains the following columns
</p>

<dl>
<dt>plot.id</dt><dd><p>unique ID for each stand that corresponds to plot.id
in the <em>fl</em> dataset</p>
</dd>
<dt>treeid</dt><dd><p>unique ID for each tree</p>
</dd>
<dt>dbh</dt><dd><p>dbh in mm</p>
</dd>
<dt>height</dt><dd><p>height of the tree in dm</p>
</dd>
<dt>tree.sp</dt><dd><p>tree species code</p>
</dd>
</dl>



<h3>Source</h3>

<p>This dataset is derived from the Norwegian National Forest Inventory.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(tr)
hist(tr$dbh)
</code></pre>

<hr>
<h2 id='trList-class'>Class <code>"trList"</code></h2><span id='topic+trList-class'></span><span id='topic+trList'></span>

<h3>Description</h3>

<p>Describes the Reference Class <em>trList</em>, which is used to store
data on live trees.
</p>


<h3>Extends</h3>

<p>All reference classes extend and inherit methods from <code>"<a href="methods.html#topic+envRefClass-class">envRefClass</a>"</code>.
</p>


<h3>Fields</h3>


<dl>
<dt><code>data</code>:</dt><dd><p>Object of class <code>list</code> containing the
unique stand ID (plot.id), the tree ID (treeid), and dbh (dbh.mm)
and height (height.dm) for all the periods </p>
</dd>
<dt><code>nperiods</code>:</dt><dd><p>Object of class <code>integer</code> containing
the number of period that should be simulated </p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt><code>extractTrees(i)</code>:</dt><dd><p> Removes trees from the objectd, for
example when trees die or are harvested </p>
</dd>
<dt><code>as.list()</code>:</dt><dd><p>converts this class to a list </p>
</dd>
<dt><code>show()</code>:</dt><dd><p> shows the first 20 trees </p>
</dd>
<dt><code>getTrees(i, j)</code>:</dt><dd><p>get the information for i trees and j
periods without deleting the data  </p>
</dd>
<dt><code>addTrees(value)</code>:</dt><dd><p>adds trees to the object </p>
</dd>
</dl>



<h3>Note</h3>

<p><em>trList</em> objects should not be modified inside any user function. Any
change should be made by the <code>sitree</code> function. Reference class objects
are mutable, they don’t use R’s usual copy-on-modify semantics, but are
modified in place. So, if you want to modify, for example for a
posterior analysis of the results, any <em>trList</em> object I recommend
to make a copy of the object first, using <code>$copy()</code>, e.g. my.tr.list$copy().
</p>


<h3>Author(s)</h3>

<p>Clara Anton Fernandez <a href="mailto:caf@nibio.no">caf@nibio.no</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+trListDead-class">trListDead</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>showClass("trList")
</code></pre>

<hr>
<h2 id='trListDead-class'>Class <code>"trListDead"</code></h2><span id='topic+trListDead-class'></span><span id='topic+trListDead'></span>

<h3>Description</h3>

<p>A Reference Class for dead trees.
</p>


<h3>Extends</h3>

<p>Class <code>"<a href="#topic+trList-class">trList</a>"</code>, directly.
</p>
<p>All reference classes extend and inherit methods from <code>"<a href="methods.html#topic+envRefClass-class">envRefClass</a>"</code>.
</p>


<h3>Fields</h3>


<dl>
<dt><code>data</code>:</dt><dd><p>Object of class <code>list</code> containing the
unique stand ID, the tree ID, and dbh and height for all the
periods. Only data from the periods were the tree was alive is
stored in this field</p>
</dd>
<dt><code>nperiods</code>:</dt><dd><p>Object of class <code>integer</code> containing
the number of period that should be simulated </p>
</dd>
<dt><code>last.measurement</code>:</dt><dd><p>Object of class <code>data.frame</code>
containing tree ID, dbh, height, and period when the tree was &quot;found&quot; dead </p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt><code>last.time.alive()</code>:</dt><dd><p> It estimates when the trees where
last &quot;seen&quot; alive</p>
</dd>
<dt><code>addTrees(value)</code>:</dt><dd><p> It add trees to the trlistDead object </p>
</dd>
<dt><code>remove.next.period(next.period)</code>:</dt><dd><p> It removed the data
from the period when the tree was seen &quot;dead&quot;. The next period is
calculated so the dbh and height at time of death can be estimated </p>
</dd>
</dl>

<p>The following methods are inherited (from the corresponding class):
extractTrees (&quot;trList&quot;), as.list (&quot;trList&quot;), show (&quot;trList&quot;), getTrees (&quot;trList&quot;), addTrees (&quot;trList&quot;)
</p>


<h3>Note</h3>

<p>This class is meant to keep the data of the dead trees in a similar way
as the live trees, but with some extra information such as diameter and height at death.
</p>


<h3>Author(s)</h3>

<p>Clara Anton Fernandez <a href="mailto:caf@nibio.no">caf@nibio.no</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+trList">trList</a></code>, ~~~
</p>


<h3>Examples</h3>

<pre><code class='language-R'>showClass("trListDead")
</code></pre>

<hr>
<h2 id='volume.norway'>
Tree volume for Norwegian conditions
</h2><span id='topic+volume.norway'></span>

<h3>Description</h3>

<p>Calculates tree volume following the equations used in the Norwegian national forest inventory 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>volume.norway(dbh.mm, height.dm, tree.sp, kom, vol.reduksjon = NULL, 
vol.w = TRUE, vol.wo = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="volume.norway_+3A_dbh.mm">dbh.mm</code></td>
<td>

<p>tree dbh in mm
</p>
</td></tr>
<tr><td><code id="volume.norway_+3A_height.dm">height.dm</code></td>
<td>

<p>tree height in dm
</p>
</td></tr>
<tr><td><code id="volume.norway_+3A_tree.sp">tree.sp</code></td>
<td>

<p>tree species following the same codification as the Norwegian NFI
</p>
</td></tr>
<tr><td><code id="volume.norway_+3A_kom">kom</code></td>
<td>

<p>municipality code
</p>
</td></tr>
<tr><td><code id="volume.norway_+3A_vol.reduksjon">vol.reduksjon</code></td>
<td>

<p>volume reduction in 100
</p>
</td></tr>
<tr><td><code id="volume.norway_+3A_vol.w">vol.w</code></td>
<td>

<p>TRUE/FALSE if volume with bark needs to be calculated
</p>
</td></tr>
<tr><td><code id="volume.norway_+3A_vol.wo">vol.wo</code></td>
<td>

<p>TRUE/FALSE if volume without bark needs to be calculated
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>It returns a list with up to two elements:
</p>
<table role = "presentation">
<tr><td><code>vol.w.tr.m3</code></td>
<td>
<p>volume with bark per tree in m3</p>
</td></tr>
<tr><td><code>vol.wo.tr.m3</code></td>
<td>
<p>volume without bark per tree in m3</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>volume.norway(dbh.mm = c(50,70), height.dm = c(17,20), tree.sp = c(1, 10), kom = c(623, 623))

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
