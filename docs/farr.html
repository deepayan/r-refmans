<!DOCTYPE html><html><head><title>Help for package farr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {farr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#aaer_dates'><p>AAER dates from SEC</p></a></li>
<li><a href='#aaer_firm_year'><p>AAERs from Bao et al. (2020)</p></a></li>
<li><a href='#apple_events'><p>Dates for Apple Events</p></a></li>
<li><a href='#auc'><p>Area under curve</p></a></li>
<li><a href='#aus_bank_funds'><p>Australian bank fundamental data</p></a></li>
<li><a href='#aus_bank_rets'><p>Australian bank stock market data</p></a></li>
<li><a href='#aus_banks'><p>Australian banks</p></a></li>
<li><a href='#bloomfield_2021'><p>Firm-years in RDD analysis of Bloomfield (2021)</p></a></li>
<li><a href='#by_tag_year'><p>Tags on StackOverflow</p></a></li>
<li><a href='#camp_attendance'><p>Camp attendance</p></a></li>
<li><a href='#cmsw_2018'><p>Data for CMSW</p></a></li>
<li><a href='#comp'><p>Data on accruals and auditor choice</p></a></li>
<li><a href='#confusion_stats'><p>Confusion statistics.</p></a></li>
<li><a href='#fhk_firm_years'><p>Firm-years for replication of Fang, Huang and Karpoff (2016)</p></a></li>
<li><a href='#fhk_pilot'><p>Treatment indicators for SHO pilot firms</p></a></li>
<li><a href='#form_deciles'><p>Form deciles</p></a></li>
<li><a href='#get_annc_dates'><p>Produce a table mapping announcements to trading dates</p></a></li>
<li><a href='#get_event_cum_rets'><p>Produce a table of cumulative event returns</p></a></li>
<li><a href='#get_event_cum_rets_mth'><p>Produce a table of cumulative event returns using monthly data</p></a></li>
<li><a href='#get_event_dates'><p>Produce a table mapping announcements to trading dates</p></a></li>
<li><a href='#get_event_rets'><p>Produce a table of event returns</p></a></li>
<li><a href='#get_ff_ind'><p>Fetch Fama-French industry grouping.</p></a></li>
<li><a href='#get_got_data'><p>Generate simulated data as described in Gow, Ormazabal and Taylor (2010).</p></a></li>
<li><a href='#get_idd_periods'><p>Period for Inevitable Disclosure Doctrine (IDD)</p></a></li>
<li><a href='#get_me_breakpoints'><p>Create a table of with cut-offs for size portfolios</p></a></li>
<li><a href='#get_size_rets_monthly'><p>Create a table of monthly returns for size portfolios</p></a></li>
<li><a href='#get_test_scores'><p>A function returning data on test_scores.</p></a></li>
<li><a href='#get_trading_dates'><p>Produce a table mapping dates on CRSP to &quot;trading days&quot;</p></a></li>
<li><a href='#gvkey_ciks'><p>GVKEY-CIK links</p></a></li>
<li><a href='#idd_dates'><p>Dates for Inevitable Disclosure Doctrine (IDD)</p></a></li>
<li><a href='#iliev_2010'><p>Data on public float</p></a></li>
<li><a href='#llz_2018'><p>GVKEYs used in Li, Lin and Zhang (2018)</p></a></li>
<li><a href='#load_parquet'><p>Function to load parquet file into database.</p></a></li>
<li><a href='#michels_2017'><p>Data on firms suffering natural disasters</p></a></li>
<li><a href='#ndcg'><p>Calculate metric: NDCG at k</p></a></li>
<li><a href='#pg_to_parquet'><p>Save WRDS table as parquet file.</p></a></li>
<li><a href='#roc'><p>A function returning data for a ROC plot.</p></a></li>
<li><a href='#rus'><p>Random under-sampling function</p></a></li>
<li><a href='#rusboost'><p>RUSBoost for two-class problems</p></a></li>
<li><a href='#sho_r3000'><p>Russell 3000 stocks at time of SEC Reg SHO sample formation.</p></a></li>
<li><a href='#sho_r3000_gvkeys'><p>Russell 3000 sample used by SEC with GVKEYs</p></a></li>
<li><a href='#sho_r3000_sample'><p>Russell 3000 sample used by SEC</p></a></li>
<li><a href='#sho_tickers'><p>Tickers of pilot firms for Reg SHO.</p></a></li>
<li><a href='#state_hq'><p>Data on firm headquarters based on SEC EDGAR filings</p></a></li>
<li><a href='#system_time'><p>Version of <code>system.time()</code> that works with assignment</p></a></li>
<li><a href='#test_scores'><p>Test scores</p></a></li>
<li><a href='#truncate'><p>Truncate a vector.</p></a></li>
<li><a href='#undisclosed_names'><p>Customer names that represent non-disclosures.</p></a></li>
<li><a href='#winsorize'><p>Winsorize a vector.</p></a></li>
<li><a href='#zhang_2007_events'><p>Event dates from Zhang (2007)</p></a></li>
<li><a href='#zhang_2007_windows'><p>Event windows from Zhang (2007)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Data and Code for Financial Accounting Research</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Handy functions and data to support a course book for accounting research. 
    Gow, Ian and Tongqing Ding (2022) 'Accounting Research: An Introductory Course' <a href="https://iangow.github.io/far_book/">https://iangow.github.io/far_book/</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>LazyDataCompression:</td>
<td>xz</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/iangow/farr/issues">https://github.com/iangow/farr/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>dbplyr (&ge; 2.2.0), dplyr, magrittr, rlang, tidyr, tibble,
readr, stringr, DBI, lubridate, rpart</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>RPostgres, duckdb, knitr, rmarkdown, testthat (&ge; 3.0.0),
spelling</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/iangow/farr">https://github.com/iangow/farr</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-29 00:20:17 UTC; igow</td>
</tr>
<tr>
<td>Author:</td>
<td>Ian Gow <a href="https://orcid.org/0000-0002-6243-8409"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ian Gow &lt;iandgow@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-29 02:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='aaer_dates'>AAER dates from SEC</h2><span id='topic+aaer_dates'></span>

<h3>Description</h3>

<p>A data set containing dates and descriptions for AAERs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aaer_dates
</code></pre>


<h3>Format</h3>

<p>A tibble with 2,920 rows and 4 variables:
</p>

<dl>
<dt>aaer_num</dt><dd><p>AAER number</p>
</dd>
<dt>aaer_date</dt><dd><p>Date</p>
</dd>
<dt>aaer_desc</dt><dd><p>Description</p>
</dd>
<dt>year</dt><dd><p>Year of AAER</p>
</dd>
</dl>


<hr>
<h2 id='aaer_firm_year'>AAERs from Bao et al. (2020)</h2><span id='topic+aaer_firm_year'></span>

<h3>Description</h3>

<p>A data set containing AAER firms-years used in Bao et al. (2020).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aaer_firm_year
</code></pre>


<h3>Format</h3>

<p>A tibble with 415 rows and 4 variables:
</p>

<dl>
<dt>p_aaer</dt><dd><p>AAER identifier</p>
</dd>
<dt>gkvey</dt><dd><p>GVKEY (firm identifier)</p>
</dd>
<dt>min_year</dt><dd><p>First affected year</p>
</dd>
<dt>max_year</dt><dd><p>Last affected year</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://doi.org/10.1111/1475-679X.12292">doi:10.1111/1475-679X.12292</a>
</p>

<hr>
<h2 id='apple_events'>Dates for Apple Events</h2><span id='topic+apple_events'></span>

<h3>Description</h3>

<p>A data set containing the dates of Apple media events
since 2005.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apple_events
</code></pre>


<h3>Format</h3>

<p>A tibble with 47 rows and 3 variables:
</p>

<dl>
<dt>event</dt><dd><p>Description of event</p>
</dd>
<dt>event_date</dt><dd><p>First date of event</p>
</dd>
<dt>end_event_date</dt><dd><p>Last date of event</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://en.wikipedia.org/wiki/List_of_Apple_Inc._media_events">https://en.wikipedia.org/wiki/List_of_Apple_Inc._media_events</a>
</p>

<hr>
<h2 id='auc'>Area under curve</h2><span id='topic+auc'></span>

<h3>Description</h3>

<p>A function returning AUC.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>auc(scores, response)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="auc_+3A_scores">scores</code></td>
<td>
<p>Probability that response is true or 1.</p>
</td></tr>
<tr><td><code id="auc_+3A_response">response</code></td>
<td>
<p>Responses coded as logical or 0-or-1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector including AUC
</p>


<h3>Source</h3>

<p><a href="https://blog.mbq.me/augh-roc/">https://blog.mbq.me/augh-roc/</a>
</p>
<p><a href="https://stackoverflow.com/questions/4903092/calculate-auc-in-r">https://stackoverflow.com/questions/4903092/calculate-auc-in-r</a>
</p>

<hr>
<h2 id='aus_bank_funds'>Australian bank fundamental data</h2><span id='topic+aus_bank_funds'></span>

<h3>Description</h3>

<p>A data set containing fundamental financial information for Australian banks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aus_bank_funds
</code></pre>


<h3>Format</h3>

<p>A tibble with 283 rows and 7 variables:
</p>

<dl>
<dt>gvkey</dt><dd><p>GVKEY (firm identifier)</p>
</dd>
<dt>datadate</dt><dd><p>Fiscal year-end</p>
</dd>
<dt>at</dt><dd><p>Total assets</p>
</dd>
<dt>ib</dt><dd><p>Income before extraordinary items</p>
</dd>
<dt>xi</dt><dd><p>Extraordinary items</p>
</dd>
<dt>do</dt><dd><p>Income from discontinued operations</p>
</dd>
</dl>


<hr>
<h2 id='aus_bank_rets'>Australian bank stock market data</h2><span id='topic+aus_bank_rets'></span>

<h3>Description</h3>

<p>A data set containing fundamental financial information for Australian banks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aus_bank_rets
</code></pre>


<h3>Format</h3>

<p>A tibble with 3,047 rows and 4 variables:
</p>

<dl>
<dt>gvkey</dt><dd><p>GVKEY (firm identifier)</p>
</dd>
<dt>datadate</dt><dd><p>Last trading date of month</p>
</dd>
<dt>ret</dt><dd><p>Stock return for month</p>
</dd>
<dt>mkt_cap</dt><dd><p>Market capitalization on datadate</p>
</dd>
</dl>


<hr>
<h2 id='aus_banks'>Australian banks</h2><span id='topic+aus_banks'></span>

<h3>Description</h3>

<p>A data set containing identifying information for 10 Australian banks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aus_banks
</code></pre>


<h3>Format</h3>

<p>A tibble with 10 rows and 3 variables:
</p>

<dl>
<dt>gvkey</dt><dd><p>GVKEY (firm identifier)</p>
</dd>
<dt>ticker</dt><dd><p>Stock exchange ticker</p>
</dd>
<dt>co_name</dt><dd><p>Bank name</p>
</dd>
</dl>


<hr>
<h2 id='bloomfield_2021'>Firm-years in RDD analysis of Bloomfield (2021)</h2><span id='topic+bloomfield_2021'></span>

<h3>Description</h3>

<p>Firm-years in RDD analysis of Bloomfield (2021).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bloomfield_2021
</code></pre>


<h3>Format</h3>

<p>A tibble with 1,855 rows and 2 variables:
</p>

<dl>
<dt>fyear</dt><dd><p>Fiscal year</p>
</dd>
<dt>permco</dt><dd><p>CRSP firm identifier (PERMCO)</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://doi.org/10.1111/1475-679X.12346">doi:10.1111/1475-679X.12346</a>
</p>

<hr>
<h2 id='by_tag_year'>Tags on StackOverflow</h2><span id='topic+by_tag_year'></span>

<h3>Description</h3>

<p>A data set containing data on tagged questions on StackOverflow
</p>


<h3>Usage</h3>

<pre><code class='language-R'>by_tag_year
</code></pre>


<h3>Format</h3>

<p>A tibble with 40,518 rows and 4 variables:
</p>

<dl>
<dt>year</dt><dd><p>Year</p>
</dd>
<dt>tag</dt><dd><p>Tag</p>
</dd>
<dt>number</dt><dd><p>Number of questions with tag during year</p>
</dd>
<dt>year_total</dt><dd><p>Total number of questions with tag during year</p>
</dd>
</dl>


<hr>
<h2 id='camp_attendance'>Camp attendance</h2><span id='topic+camp_attendance'></span>

<h3>Description</h3>

<p>A simulated data set related to camp attendance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>camp_attendance
</code></pre>


<h3>Format</h3>

<p>A tibble with 1,000 rows and 2 variables:
</p>

<dl>
<dt>id</dt><dd><p>Student identifier</p>
</dd>
<dt>camp</dt><dd><p>Indicator for student attendance at camp</p>
</dd>
</dl>


<hr>
<h2 id='cmsw_2018'>Data for CMSW</h2><span id='topic+cmsw_2018'></span>

<h3>Description</h3>

<p>Data on whistleblowers and enforcement actions from Call et al. (2018)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cmsw_2018
</code></pre>


<h3>Format</h3>

<p>A tibble with 1,133 rows and 31 variables:
</p>

<dl>
<dt>recid</dt><dd><p>CMSW record identifier</p>
</dd>
<dt>firmpenalty</dt><dd><p>The total firm civil and criminal monetary penalties assessed against the firm, its parent and subsidiaries consisting of disgorgement, prejudgment interest, civil fines, criminal restitution, and criminal fines in millions of dollars</p>
</dd>
<dt>otherpenalty</dt><dd><p>The total firm civil and criminal monetary penalties assessed against the agent firms and/or respondents (e.g., the audit firm, bankers, suppliers) in connection with the financial misrepresentation of the target firm, in millions of dollars</p>
</dd>
<dt>emppenalty</dt><dd><p>The total civil and criminal penalties assessed against all employees consisting of disgorgement, prejudgment interest, civil fines, criminal restitution, and criminal fines in millions of dollars</p>
</dd>
<dt>empprisonmos</dt><dd><p>Total incarceration consisting of jail, prison, home detention, and halfway house in months imposed upon employee respondents named in the enforcement action</p>
</dd>
<dt>selfdealflag</dt><dd><p>An indicator variable equal to one if the violation includes self-dealing such as embezzlement and theft by respondents and equal to zero otherwise</p>
</dd>
<dt>blckownpct</dt><dd><p>The percentage of blockholder ownership, defined as owners with at least five percent of common shares outstanding from the last 10-K or DEF 14A prior to the first public announcement the firm may be (is) subject to a regulatory enforcement action</p>
</dd>
<dt>initabret</dt><dd><p>The value-weighted market-adjusted return measured at the close of trading on the initial public announcement date that the firm may be (is) subject to a regulatory enforcement action</p>
</dd>
<dt>wbflag</dt><dd><p>An indicator variable equal to one if a whistleblower is associated with the enforcement action and equal to zero otherwise</p>
</dd>
<dt>tousesox</dt><dd><p>Post-SOX action flag</p>
</dd>
<dt>lnvioperiod</dt><dd><p>The natural logarithm of the total time the violation occurred in months as indicated in the regulatory enforcement proceedings</p>
</dd>
<dt>bribeflag</dt><dd><p>An indicator variable equal to one if the enforcement actions includes charges under the Foreign Corrupt Practices Act for bribery of a foreign official and zero otherwise</p>
</dd>
<dt>mobflag</dt><dd><p>An indicator variable equal to one if violation or any of the respondents were associated with a known organized crime family and zero otherwise</p>
</dd>
<dt>deter</dt><dd><p>An indicator variable equal to one if the violation includes an offense for either option backdating, insider trading, or an offense related to an offering, IPO, merger, or reverse merger and equal to zero otherwise</p>
</dd>
<dt>lnempcleveln</dt><dd><p>The natural logarithm of the total number of C-level respondents (e.g. CEO, COO, CFO, CAO, CMO, and CIO) named in the enforcement action</p>
</dd>
<dt>lnuscodecnt</dt><dd><p>The natural logarithm of the total number of unique code sections and rules violated (charges) associated with the enforcement action</p>
</dd>
<dt>viofraudflag</dt><dd><p>n indicator variable equal to one if fraud under 15 USC §§ 77q, 78j(b), or rules promulgated thereunder are included among the charges in the enforcement action</p>
</dd>
<dt>misledflag</dt><dd><p>An indicator variable equal to one if the violation included violations of 17 CFR 240.13b2-2 that prohibits materially false or misleading statement to an accountant in connection with the preparation of financial statements and zero otherwise</p>
</dd>
<dt>audit8flag</dt><dd><p>An indicator variable equal to one if the misreporting firm used a Big N auditor, and equal to zero otherwise</p>
</dd>
<dt>exectermflag</dt><dd><p>An indicator variable equal to one if the firm terminated an executive respondent as a result of the violations and equal to zero otherwise</p>
</dd>
<dt>coopflag</dt><dd><p>An indicator variable equal to one if the firm received credit in the assessment of penalties for cooperation as stated in regulatory enforcement documents during the course of the investigation and equal to zero otherwise</p>
</dd>
<dt>impedeflag</dt><dd><p>An indicator variable equal to one if regulators acknowledged they were deliberately misled and/or charges were included for lying to investigators and equal to zero otherwise</p>
</dd>
<dt>pctinddir</dt><dd><p>The percentage of the firm's directors that are independent from the last 10-K or DEF 14A prior to the first public announcement the firm may be (is) subject to a regulatory enforcement action</p>
</dd>
<dt>recidivist</dt><dd><p>An indicator variable equal to one if the firm was previously the subject of a securities regulatory enforcement action and equal to zero otherwise</p>
</dd>
<dt>lnmktcap</dt><dd><p>The natural logarithm of the market value of equity measured in millions of dollars prior to the first public announcement that the firm may be (is) subject to a regulatory enforcement action</p>
</dd>
<dt>mkt2bk</dt><dd><p>The sum of market value of equity plus total assets minus total debt divided by total assets with market value determined below and total assets and total debt measured at the last fiscal year end prior to the first public announcement the firm may be (is) subject to a regulatory enforcement action</p>
</dd>
<dt>lev</dt><dd><p>Total debt divided by total assets measured at the last fiscal year end prior to the first public announcement the firm may be (is) subject to a regulatory enforcement action</p>
</dd>
<dt>lndistance</dt><dd><p>The natural logarithm of the distance in miles from the location of the firm's headquarters to the offices of the regulator assigned to the geographic area of the firm's headquarter location (closer of the SEC Regional Office or DOJ U.S. District Attorney).</p>
</dd>
<dt>ff12</dt><dd><p>Fama-French industry code (12-industry)</p>
</dd>
<dt>wbsource</dt><dd><p>Whistleblower data source</p>
</dd>
<dt>wbtype</dt><dd><p>Whistleblower type: tipster or nontipster</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://doi.org/10.1111/1475-679X.12177">doi:10.1111/1475-679X.12177</a>
</p>

<hr>
<h2 id='comp'>Data on accruals and auditor choice</h2><span id='topic+comp'></span>

<h3>Description</h3>

<p>A data set containing data about accruals for 2,000 firms.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>comp
</code></pre>


<h3>Format</h3>

<p>A tibble with 16,237 rows and 14 variables:
</p>

<dl>
<dt>gvkey</dt><dd><p>GVKEY (firm identifier)</p>
</dd>
<dt>datadate</dt><dd><p>Fiscal year-end</p>
</dd>
<dt>fyear</dt><dd><p>Fiscal year</p>
</dd>
<dt>big_n</dt><dd><p>Indicator for Big Four auditor</p>
</dd>
<dt>ta</dt><dd><p>Total accruals (scaled by assets)</p>
</dd>
<dt>roa</dt><dd><p>Return on assets</p>
</dd>
<dt>cfo</dt><dd><p>Cash flow from operating activities (scaled by assets)</p>
</dd>
<dt>size</dt><dd><p>Size</p>
</dd>
<dt>lev</dt><dd><p>Leverage</p>
</dd>
<dt>mtb</dt><dd><p>Market-to-book ratio</p>
</dd>
<dt>inv_at</dt><dd><p>1/Total assets</p>
</dd>
<dt>d_sale</dt><dd><p>Change in revenue</p>
</dd>
<dt>d_ar</dt><dd><p>Change in accounts receivable</p>
</dd>
<dt>ppe</dt><dd><p>Property, plant &amp; equipment (scaled by assets)</p>
</dd>
</dl>


<hr>
<h2 id='confusion_stats'>Confusion statistics.</h2><span id='topic+confusion_stats'></span>

<h3>Description</h3>

<p>A function returning sensitivity and precision.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>confusion_stats(scores, response, predicted = NULL, k = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="confusion_stats_+3A_scores">scores</code></td>
<td>
<p>Probability that response is true or 1.</p>
</td></tr>
<tr><td><code id="confusion_stats_+3A_response">response</code></td>
<td>
<p>Responses coded as logical or 0-or-1.</p>
</td></tr>
<tr><td><code id="confusion_stats_+3A_predicted">predicted</code></td>
<td>
<p>Predicted value coded as 0-or-1.</p>
</td></tr>
<tr><td><code id="confusion_stats_+3A_k">k</code></td>
<td>
<p>Percentage to classify as TRUE or 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector including sensitivity and precision
</p>

<hr>
<h2 id='fhk_firm_years'>Firm-years for replication of Fang, Huang and Karpoff (2016)</h2><span id='topic+fhk_firm_years'></span>

<h3>Description</h3>

<p>A data set containing the GVKEYs and
datadates for firm-years used in Fang, Huang and Karpoff (2016).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fhk_firm_years
</code></pre>


<h3>Format</h3>

<p>A tibble with 60,272 rows × 2 variables.
</p>

<dl>
<dt>gvkey</dt><dd><p>GVKEY (firm identifier)</p>
</dd>
<dt>datadate</dt><dd><p>Fiscal year-end</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://doi.org/10.1111/jofi.12369">doi:10.1111/jofi.12369</a>
</p>

<hr>
<h2 id='fhk_pilot'>Treatment indicators for SHO pilot firms</h2><span id='topic+fhk_pilot'></span>

<h3>Description</h3>

<p>A data set containing the tickers, GVKEYs, and
treatment indicator for SHO pilot program.
i
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fhk_pilot
</code></pre>


<h3>Format</h3>

<p>A tibble with 3,030 rows × 4 variables.
</p>

<dl>
<dt>ticker</dt><dd><p>Ticker</p>
</dd>
<dt>gvkey</dt><dd><p>GVKEY (firm identifier)</p>
</dd>
<dt>permno</dt><dd><p>PERMNO (CRSP security identifier)</p>
</dd>
<dt>pilot</dt><dd><p>SHO pilot program treatment indicator</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://doi.org/10.1111/jofi.12369">doi:10.1111/jofi.12369</a>
</p>

<hr>
<h2 id='form_deciles'>Form deciles</h2><span id='topic+form_deciles'></span>

<h3>Description</h3>

<p>Calculate deciles for a variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>form_deciles(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="form_deciles_+3A_x">x</code></td>
<td>
<p>A vector for which deciles are to be calculated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(farr)
library(dplyr, warn.conflicts = FALSE)

df &lt;-
    tibble(x = rnorm(100)) %&gt;%
    mutate(dec_x = form_deciles(x))
df
</code></pre>

<hr>
<h2 id='get_annc_dates'>Produce a table mapping announcements to trading dates</h2><span id='topic+get_annc_dates'></span>

<h3>Description</h3>

<p>Produce a table mapping announcements to trading dates.
See <code>vignette("wrds-conn", package = "farr")</code> for more on using this function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_annc_dates(conn)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_annc_dates_+3A_conn">conn</code></td>
<td>
<p>connection to a PostgreSQL database</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tbl_df
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:
## Not run: 
library(DBI)
library(dplyr, warn.conflicts = FALSE)
library(RPostgres)
pg &lt;- dbConnect(Postgres())
get_annc_dates(pg)

## End(Not run)
## End(Not run)
</code></pre>

<hr>
<h2 id='get_event_cum_rets'>Produce a table of cumulative event returns</h2><span id='topic+get_event_cum_rets'></span>

<h3>Description</h3>

<p>Produce a table of event returns from CRSP.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_event_cum_rets(
  data,
  conn,
  permno = "permno",
  event_date = "event_date",
  win_start = 0,
  win_end = 0,
  end_event_date = NULL,
  suffix = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_event_cum_rets_+3A_data">data</code></td>
<td>
<p>data frame containing data on events</p>
</td></tr>
<tr><td><code id="get_event_cum_rets_+3A_conn">conn</code></td>
<td>
<p>connection to a PostgreSQL database</p>
</td></tr>
<tr><td><code id="get_event_cum_rets_+3A_permno">permno</code></td>
<td>
<p>string representing column containing PERMNOs for events</p>
</td></tr>
<tr><td><code id="get_event_cum_rets_+3A_event_date">event_date</code></td>
<td>
<p>string representing column containing dates for events</p>
</td></tr>
<tr><td><code id="get_event_cum_rets_+3A_win_start">win_start</code></td>
<td>
<p>integer representing start of trading window (e.g., -1)</p>
</td></tr>
<tr><td><code id="get_event_cum_rets_+3A_win_end">win_end</code></td>
<td>
<p>integer representing start of trading window (e.g., 1)</p>
</td></tr>
<tr><td><code id="get_event_cum_rets_+3A_end_event_date">end_event_date</code></td>
<td>
<p>string representing column containing ending dates for
events</p>
</td></tr>
<tr><td><code id="get_event_cum_rets_+3A_suffix">suffix</code></td>
<td>
<p>Text to be appended after &quot;ret&quot; in variable names</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tbl_df
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:
## Not run: 
library(DBI)
library(dplyr, warn.conflicts = FALSE)
library(RPostgres)
pg &lt;- dbConnect(Postgres())
events &lt;- tibble(permno = c(14593L, 10107L),
                 event_date = as.Date(c("2019-01-31", "2019-01-31")))
get_event_cum_rets(events, pg)

## End(Not run)
## End(Not run)
</code></pre>

<hr>
<h2 id='get_event_cum_rets_mth'>Produce a table of cumulative event returns using monthly data</h2><span id='topic+get_event_cum_rets_mth'></span>

<h3>Description</h3>

<p>Produce a table of event returns from CRSP
See <code>vignette("wrds-conn", package = "farr")</code> for more on using this function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_event_cum_rets_mth(
  data,
  conn,
  permno = "permno",
  event_date = "event_date",
  win_start = 0,
  win_end = 0,
  end_event_date = NULL,
  suffix = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_event_cum_rets_mth_+3A_data">data</code></td>
<td>
<p>data frame containing data on events</p>
</td></tr>
<tr><td><code id="get_event_cum_rets_mth_+3A_conn">conn</code></td>
<td>
<p>connection to a PostgreSQL database</p>
</td></tr>
<tr><td><code id="get_event_cum_rets_mth_+3A_permno">permno</code></td>
<td>
<p>string representing column containing PERMNOs for events</p>
</td></tr>
<tr><td><code id="get_event_cum_rets_mth_+3A_event_date">event_date</code></td>
<td>
<p>string representing column containing dates for events</p>
</td></tr>
<tr><td><code id="get_event_cum_rets_mth_+3A_win_start">win_start</code></td>
<td>
<p>integer representing start of trading window (e.g., -1) in
months</p>
</td></tr>
<tr><td><code id="get_event_cum_rets_mth_+3A_win_end">win_end</code></td>
<td>
<p>integer representing start of trading window (e.g., 1) in months</p>
</td></tr>
<tr><td><code id="get_event_cum_rets_mth_+3A_end_event_date">end_event_date</code></td>
<td>
<p>string representing column containing ending dates for
events</p>
</td></tr>
<tr><td><code id="get_event_cum_rets_mth_+3A_suffix">suffix</code></td>
<td>
<p>Text to be appended after &quot;ret&quot; in variable names.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tbl_df
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:
## Not run: 
library(DBI)
library(dplyr, warn.conflicts = FALSE)
library(RPostgres)
pg &lt;- dbConnect(Postgres())
events &lt;- tibble(permno = c(14593L, 10107L),
                 event_date = as.Date(c("2019-01-31", "2019-01-31")))
get_event_cum_rets_mth(events, pg)

## End(Not run)
## End(Not run)
</code></pre>

<hr>
<h2 id='get_event_dates'>Produce a table mapping announcements to trading dates</h2><span id='topic+get_event_dates'></span>

<h3>Description</h3>

<p>Produce a table of event dates for linking with CRSP.
See <code>vignette("wrds-conn", package = "farr")</code> for more on using this function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_event_dates(
  data,
  conn,
  permno = "permno",
  event_date = "event_date",
  win_start = 0,
  win_end = 0,
  end_event_date = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_event_dates_+3A_data">data</code></td>
<td>
<p>data frame containing data on events</p>
</td></tr>
<tr><td><code id="get_event_dates_+3A_conn">conn</code></td>
<td>
<p>connection to a PostgreSQL database</p>
</td></tr>
<tr><td><code id="get_event_dates_+3A_permno">permno</code></td>
<td>
<p>string representing column containing PERMNOs for events</p>
</td></tr>
<tr><td><code id="get_event_dates_+3A_event_date">event_date</code></td>
<td>
<p>string representing column containing dates for events</p>
</td></tr>
<tr><td><code id="get_event_dates_+3A_win_start">win_start</code></td>
<td>
<p>integer representing start of trading window (e.g., -1)</p>
</td></tr>
<tr><td><code id="get_event_dates_+3A_win_end">win_end</code></td>
<td>
<p>integer representing start of trading window (e.g., 1)</p>
</td></tr>
<tr><td><code id="get_event_dates_+3A_end_event_date">end_event_date</code></td>
<td>
<p>string representing column containing ending dates for events</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tbl_df
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:
## Not run: 
library(DBI)
library(dplyr, warn.conflicts = FALSE)
pg &lt;- dbConnect(RPostgres::Postgres())
events &lt;- tibble(permno = c(14593L, 10107L),
                 event_date = as.Date(c("2019-01-31", "2019-01-31")))
get_event_dates(events, pg, win_start = -3, win_end = + 3)

## End(Not run)
## End(Not run)
</code></pre>

<hr>
<h2 id='get_event_rets'>Produce a table of event returns</h2><span id='topic+get_event_rets'></span>

<h3>Description</h3>

<p>Produce a table of event returns from CRSP.
See <code>vignette("wrds-conn", package = "farr")</code> for more on using this function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_event_rets(
  data,
  conn,
  permno = "permno",
  event_date = "event_date",
  win_start = 0,
  win_end = 0,
  end_event_date = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_event_rets_+3A_data">data</code></td>
<td>
<p>data frame containing data on events</p>
</td></tr>
<tr><td><code id="get_event_rets_+3A_conn">conn</code></td>
<td>
<p>connection to a PostgreSQL database</p>
</td></tr>
<tr><td><code id="get_event_rets_+3A_permno">permno</code></td>
<td>
<p>string representing column containing PERMNOs for events</p>
</td></tr>
<tr><td><code id="get_event_rets_+3A_event_date">event_date</code></td>
<td>
<p>string representing column containing dates for events</p>
</td></tr>
<tr><td><code id="get_event_rets_+3A_win_start">win_start</code></td>
<td>
<p>integer representing start of trading window (e.g., -1)</p>
</td></tr>
<tr><td><code id="get_event_rets_+3A_win_end">win_end</code></td>
<td>
<p>integer representing start of trading window (e.g., 1)</p>
</td></tr>
<tr><td><code id="get_event_rets_+3A_end_event_date">end_event_date</code></td>
<td>
<p>string representing column containing ending dates for events</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tbl_df
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:
## Not run: 
library(DBI)
library(dplyr, warn.conflicts = FALSE)
pg &lt;- dbConnect(RPostgres::Postgres())
events &lt;- tibble(permno = c(14593L, 10107L),
                 event_date = as.Date(c("2019-01-31", "2019-01-31")))
get_event_rets(events, pg, win_start = -3, win_end = +3) %&gt;%
  select(permno, event_date, date, ret)

## End(Not run)
## End(Not run)
</code></pre>

<hr>
<h2 id='get_ff_ind'>Fetch Fama-French industry grouping.</h2><span id='topic+get_ff_ind'></span>

<h3>Description</h3>

<p>Fetch Fama-French industry grouping from Ken French's website.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_ff_ind(ind)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_ff_ind_+3A_ind">ind</code></td>
<td>
<p>Fama-French industry grouping (e.g., 11, 48)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tbl_df
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:
get_ff_ind(5)
## End(Not run)
</code></pre>

<hr>
<h2 id='get_got_data'>Generate simulated data as described in Gow, Ormazabal and Taylor (2010).</h2><span id='topic+get_got_data'></span>

<h3>Description</h3>

<p>Function to generate simulated panel data as described in Gow, Ormazabal and
Taylor (2010).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_got_data(N = 400, T = 20, Xvol, Evol, rho_X, rho_E)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_got_data_+3A_n">N</code></td>
<td>
<p>Number of firms</p>
</td></tr>
<tr><td><code id="get_got_data_+3A_t">T</code></td>
<td>
<p>Number of years</p>
</td></tr>
<tr><td><code id="get_got_data_+3A_xvol">Xvol</code></td>
<td>
<p>Cross-sectional correlation of <em>X</em></p>
</td></tr>
<tr><td><code id="get_got_data_+3A_evol">Evol</code></td>
<td>
<p>Cross-sectional correlation of errors</p>
</td></tr>
<tr><td><code id="get_got_data_+3A_rho_x">rho_X</code></td>
<td>
<p>Autocorrelation coefficient for firm-effect portion of <em>X</em></p>
</td></tr>
<tr><td><code id="get_got_data_+3A_rho_e">rho_E</code></td>
<td>
<p>Autocorrelation coefficient for firm-effect portion of epsilon</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tibble
</p>


<h3>Source</h3>

<p><a href="https://www.jstor.org/stable/20744139">https://www.jstor.org/stable/20744139</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(2021)
test &lt;- get_got_data(N = 500, T = 10, Xvol = 0.75,
                     Evol = 0.75, rho_X = 0.5, rho_E = 0.5)
</code></pre>

<hr>
<h2 id='get_idd_periods'>Period for Inevitable Disclosure Doctrine (IDD)</h2><span id='topic+get_idd_periods'></span>

<h3>Description</h3>

<p>Periods defined by precedent-setting legal cases adopting or rejecting the
Inevitable Disclosure Doctrine (IDD) by state.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_idd_periods(min_date, max_date)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_idd_periods_+3A_min_date">min_date</code></td>
<td>
<p>First date of sample period</p>
</td></tr>
<tr><td><code id="get_idd_periods_+3A_max_date">max_date</code></td>
<td>
<p>Last date of sample period</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Three kinds of period by state:
</p>

<ul>
<li><p> Pre-adoption
</p>
</li>
<li><p> Post-adoption
</p>
</li>
<li><p> Post-rejection
</p>
</li></ul>



<h3>Value</h3>

<p>tibble with four columns: state, period_type, start_date, end_date
</p>


<h3>Examples</h3>

<pre><code class='language-R'>idd_periods &lt;- get_idd_periods(min_date = "1994-01-01",
                               max_date = "2010-12-31")
idd_periods
</code></pre>

<hr>
<h2 id='get_me_breakpoints'>Create a table of with cut-offs for size portfolios</h2><span id='topic+get_me_breakpoints'></span>

<h3>Description</h3>

<p>Create a table of with cut-offs for size portfolios
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_me_breakpoints()
</code></pre>


<h3>Value</h3>

<p>tbl_df
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr, warn.conflicts = FALSE)
get_me_breakpoints() %&gt;% filter(month == '2022-04-01')
</code></pre>

<hr>
<h2 id='get_size_rets_monthly'>Create a table of monthly returns for size portfolios</h2><span id='topic+get_size_rets_monthly'></span>

<h3>Description</h3>

<p>Create a table of monthly returns for size portfolios
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_size_rets_monthly()
</code></pre>


<h3>Value</h3>

<p>tbl_df
</p>

<hr>
<h2 id='get_test_scores'>A function returning data on test_scores.</h2><span id='topic+get_test_scores'></span>

<h3>Description</h3>

<p>A function returning simulated data on test_scores.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_test_scores(
  effect_size = 15,
  n_students = 1000L,
  n_grades = 4L,
  include_unobservables = FALSE,
  random_assignment = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_test_scores_+3A_effect_size">effect_size</code></td>
<td>
<p>Effect of attending camp on subsequent test scores</p>
</td></tr>
<tr><td><code id="get_test_scores_+3A_n_students">n_students</code></td>
<td>
<p>Number of students in simulated data set</p>
</td></tr>
<tr><td><code id="get_test_scores_+3A_n_grades">n_grades</code></td>
<td>
<p>Number of grades in simulated data set</p>
</td></tr>
<tr><td><code id="get_test_scores_+3A_include_unobservables">include_unobservables</code></td>
<td>
<p>Include talent in returned data (TRUE or FALSE)</p>
</td></tr>
<tr><td><code id="get_test_scores_+3A_random_assignment">random_assignment</code></td>
<td>
<p>Is assignment to treatment completely random? (TRUE or FALSE)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tbl_df
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(2021)
library(dplyr, warn.conflicts = FALSE)
get_test_scores() %&gt;% head()
</code></pre>

<hr>
<h2 id='get_trading_dates'>Produce a table mapping dates on CRSP to &quot;trading days&quot;</h2><span id='topic+get_trading_dates'></span>

<h3>Description</h3>

<p>Produce a table mapping dates on CRSP to &quot;trading days&quot;.
Returned table has two columns: date, a trading date on CRSP;
td, a sequence of integers ordered by date.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_trading_dates(conn)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_trading_dates_+3A_conn">conn</code></td>
<td>
<p>connection to a PostgreSQL database</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tbl_df
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(DBI)
library(dplyr, warn.conflicts = FALSE)
pg &lt;- dbConnect(RPostgres::Postgres())
get_trading_dates(pg) %&gt;%
  filter(between(date, as.Date("2022-03-18"), as.Date("2022-03-31")))

## End(Not run)
</code></pre>

<hr>
<h2 id='gvkey_ciks'>GVKEY-CIK links</h2><span id='topic+gvkey_ciks'></span>

<h3>Description</h3>

<p>Link table from GVKEYs to CIKs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gvkey_ciks
</code></pre>


<h3>Format</h3>

<p>A tibble with 76,346 rows and 5 variables:
</p>

<dl>
<dt>gvkey</dt><dd><p>GVKEY (Compustat firm identifier)</p>
</dd>
<dt>iid</dt><dd><p>Issue ID</p>
</dd>
<dt>cik</dt><dd><p>CIK (SEC firm identifier)</p>
</dd>
<dt>first_date</dt><dd><p>First link date</p>
</dd>
<dt>last_date</dt><dd><p>Last link date</p>
</dd>
</dl>


<hr>
<h2 id='idd_dates'>Dates for Inevitable Disclosure Doctrine (IDD)</h2><span id='topic+idd_dates'></span>

<h3>Description</h3>

<p>Dates of precedent-setting legal cases adopting or reject the
Inevitable Disclosure Doctrine (IDD) by state.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>idd_dates
</code></pre>


<h3>Format</h3>

<p>A tibble with 24 rows and 3 variables:
</p>

<dl>
<dt>state</dt><dd><p>Two-letter state abbreviation</p>
</dd>
<dt>idd_date</dt><dd><p>Date of precedent-setting legal case</p>
</dd>
<dt>idd_type</dt><dd><p>Either &quot;Adopt&quot; or &quot;Reject&quot;</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://doi.org/10.1016/j.jfineco.2018.02.008">doi:10.1016/j.jfineco.2018.02.008</a>
</p>

<hr>
<h2 id='iliev_2010'>Data on public float</h2><span id='topic+iliev_2010'></span>

<h3>Description</h3>

<p>Data on public float of listed companies from Iliev (2010).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>iliev_2010
</code></pre>


<h3>Format</h3>

<p>A tibble with 7,214 and 9 variables:
</p>

<dl>
<dt>gvkey</dt><dd><p>Compustat firm identifier (GVKEY)</p>
</dd>
<dt>fyear</dt><dd><p>Fiscal year</p>
</dd>
<dt>fdate</dt><dd><p>Date of end of fiscal year</p>
</dd>
<dt>pfdate</dt><dd><p>Date for public float value</p>
</dd>
<dt>pfyear</dt><dd><p>Year for public float value</p>
</dd>
<dt>publicfloat</dt><dd><p>Public float in $ million</p>
</dd>
<dt>mr</dt><dd><p>Indicator for filing of a management report</p>
</dd>
<dt>af</dt><dd><p>Indicator for accelerator filer</p>
</dd>
<dt>cik</dt><dd><p>SEC firm identifier (CIK)</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://doi.org/10.1111/j.1540-6261.2010.01564.x">doi:10.1111/j.1540-6261.2010.01564.x</a>
</p>

<hr>
<h2 id='llz_2018'>GVKEYs used in Li, Lin and Zhang (2018)</h2><span id='topic+llz_2018'></span>

<h3>Description</h3>

<p>GVKEYs used in Li, Lin and Zhang (2018)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>llz_2018
</code></pre>


<h3>Format</h3>

<p>A tibble with 5,830 rows and 1 variable:
</p>

<dl>
<dt>gvkey</dt><dd><p>GVKEY</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://doi.org/10.1111/1475-679X.12187">doi:10.1111/1475-679X.12187</a>
</p>

<hr>
<h2 id='load_parquet'>Function to load parquet file into database.</h2><span id='topic+load_parquet'></span>

<h3>Description</h3>

<p>Function to read data from a parquet file data_dir/schema/table_name.parquet
into a table in the DuckDB database at conn.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_parquet(conn, table, schema = "", data_dir = Sys.getenv("DATA_DIR"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="load_parquet_+3A_conn">conn</code></td>
<td>
<p>DuckDB connection</p>
</td></tr>
<tr><td><code id="load_parquet_+3A_table">table</code></td>
<td>
<p>Name of table to be loaded</p>
</td></tr>
<tr><td><code id="load_parquet_+3A_schema">schema</code></td>
<td>
<p>Database schema for table</p>
</td></tr>
<tr><td><code id="load_parquet_+3A_data_dir">data_dir</code></td>
<td>
<p>Directory for data repository</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Remote data frame in conn
</p>

<hr>
<h2 id='michels_2017'>Data on firms suffering natural disasters</h2><span id='topic+michels_2017'></span>

<h3>Description</h3>

<p>Data on firms suffering natural disasters based on the sample
in Michels (2017).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>michels_2017
</code></pre>


<h3>Format</h3>

<p>A tibble with 423 rows and 12 variables:
</p>

<dl>
<dt>cusip</dt><dd><p>CUSIP supplied by Michels (2017)</p>
</dd>
<dt>eventdate</dt><dd><p>Date of relevant natural disaster supplied by Michels (2017)</p>
</dd>
<dt>cik</dt><dd><p>Matched CIK (SEC firm identifier)</p>
</dd>
<dt>permno</dt><dd><p>Matched PERMNO (CRSP security identifier)</p>
</dd>
<dt>gvkey</dt><dd><p>Matched GVKEY (Compustat firm identifier)</p>
</dd>
<dt>date_filed</dt><dd><p>Date of next filing of type 10-Q, 10-K, 10QSB, 10-K405 after event</p>
</dd>
<dt>form_types</dt><dd><p>List of relevant form types filed on date_filed</p>
</dd>
<dt>next_period_end</dt><dd><p>Next fiscal period-end after event date</p>
</dd>
<dt>next_fqtr</dt><dd><p>Fiscal quarter of next period-end after event date</p>
</dd>
<dt>prev_period_end</dt><dd><p>Last fiscal period-end before event date</p>
</dd>
<dt>prev_fqtr</dt><dd><p>Fiscal quarter of last period-end before event date</p>
</dd>
<dt>recognize</dt><dd><p>Indicator for event being recognized (next_period_end before date_filed)</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://doi.org/10.1111/1475-679X.12128">doi:10.1111/1475-679X.12128</a>
</p>

<hr>
<h2 id='ndcg'>Calculate metric: NDCG at k</h2><span id='topic+ndcg'></span>

<h3>Description</h3>

<p>A function returning NDCG-at-k metric.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ndcg(scores, response, k = 0.01)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ndcg_+3A_scores">scores</code></td>
<td>
<p>Probability that response is true or 1.</p>
</td></tr>
<tr><td><code id="ndcg_+3A_response">response</code></td>
<td>
<p>Responses coded as logical or 0-1.</p>
</td></tr>
<tr><td><code id="ndcg_+3A_k">k</code></td>
<td>
<p>Percentage to classify as TRUE or 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector including sensitivity and precision
</p>

<hr>
<h2 id='pg_to_parquet'>Save WRDS table as parquet file.</h2><span id='topic+pg_to_parquet'></span>

<h3>Description</h3>

<p>Function to get data from a table on the WRDS PostgreSQL server and
save to local parquet file using DuckDB.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pg_to_parquet(table_name, schema, data_dir = Sys.getenv("DATA_DIR"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pg_to_parquet_+3A_table_name">table_name</code></td>
<td>
<p>Name of table on WRDS</p>
</td></tr>
<tr><td><code id="pg_to_parquet_+3A_schema">schema</code></td>
<td>
<p>Database schema for table</p>
</td></tr>
<tr><td><code id="pg_to_parquet_+3A_data_dir">data_dir</code></td>
<td>
<p>Directory for data repository</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Number of rows created
</p>

<hr>
<h2 id='roc'>A function returning data for a ROC plot.</h2><span id='topic+roc'></span>

<h3>Description</h3>

<p>A function returning data for a ROC plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>roc(scores, response)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="roc_+3A_scores">scores</code></td>
<td>
<p>Probability that response is true or 1.</p>
</td></tr>
<tr><td><code id="roc_+3A_response">response</code></td>
<td>
<p>Responses coded as logical or 0-or-1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tbl_df
</p>

<hr>
<h2 id='rus'>Random under-sampling function</h2><span id='topic+rus'></span>

<h3>Description</h3>

<p>Function to create temporary training dataset using distribution implied
by w.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rus(y_train, ir = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rus_+3A_y_train">y_train</code></td>
<td>
<p>df on the target variable.</p>
</td></tr>
<tr><td><code id="rus_+3A_ir">ir</code></td>
<td>
<p>Imbalance ratio. Specifies how many times the under-sampled majority instances are over minority instances.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Following MATLAB, function samples observations of the minority class with
replacement and observations of the majority class without replacement.
</p>


<h3>Value</h3>

<p>vector
</p>

<hr>
<h2 id='rusboost'>RUSBoost for two-class problems</h2><span id='topic+rusboost'></span>

<h3>Description</h3>

<p>RUSBoost for two-class problems
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rusboost(formula, df, size, ir = 1, learn_rate = 1, rus = TRUE, control)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rusboost_+3A_formula">formula</code></td>
<td>
<p>A formula specify predictors and target variable. Target variable should be a factor of 0 and 1. Predictors can be either numerical and categorical.</p>
</td></tr>
<tr><td><code id="rusboost_+3A_df">df</code></td>
<td>
<p>A df frame used for training the model, i.e. training set.</p>
</td></tr>
<tr><td><code id="rusboost_+3A_size">size</code></td>
<td>
<p>Ensemble size, i.e. number of weak learners in the ensemble model</p>
</td></tr>
<tr><td><code id="rusboost_+3A_ir">ir</code></td>
<td>
<p>Imbalance ratio. Specifies how many times the under-sampled majority instances are over minority instances.</p>
</td></tr>
<tr><td><code id="rusboost_+3A_learn_rate">learn_rate</code></td>
<td>
<p>Default of 1.</p>
</td></tr>
<tr><td><code id="rusboost_+3A_rus">rus</code></td>
<td>
<p>TRUE for random undersampling; FALSE for AdaBoost with full sample</p>
</td></tr>
<tr><td><code id="rusboost_+3A_control">control</code></td>
<td>
<p>Control object passed onto rpart function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>rusboost object
</p>

<hr>
<h2 id='sho_r3000'>Russell 3000 stocks at time of SEC Reg SHO sample formation.</h2><span id='topic+sho_r3000'></span>

<h3>Description</h3>

<p>A data set containing the tickers and
company names for Russell 3000 at time SEC created the pilot sample.
Data are created from sample supplied by FHK.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sho_r3000
</code></pre>


<h3>Format</h3>

<p>A tibble with 3000 rows × 2 variables.
</p>

<dl>
<dt>russell_ticker</dt><dd><p>Ticker</p>
</dd>
<dt>russell_name</dt><dd><p>Company name</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://doi.org/10.1111/jofi.12369">doi:10.1111/jofi.12369</a>
</p>

<hr>
<h2 id='sho_r3000_gvkeys'>Russell 3000 sample used by SEC with GVKEYs</h2><span id='topic+sho_r3000_gvkeys'></span>

<h3>Description</h3>

<p>A data set containing the tickers, PERMNOs, GVKEYs, and
treatment assignments for Russell 3000 sample used by SEC.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sho_r3000_gvkeys
</code></pre>


<h3>Format</h3>

<p>A tibble with 2,951 rows × 3 variables.
</p>

<dl>
<dt>ticker</dt><dd><p>Ticker</p>
</dd>
<dt>permno</dt><dd><p>PERMNO (CRSP security identifier)</p>
</dd>
<dt>gvkey</dt><dd><p>GVKEY (Compustat firm identifier)</p>
</dd>
<dt>pilot</dt><dd><p>Indicator for stock being part of Reg SHO pilot program</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://iangow.github.io/far_book/natural-revisited.html#the-sho-pilot-sample">https://iangow.github.io/far_book/natural-revisited.html#the-sho-pilot-sample</a>
</p>

<hr>
<h2 id='sho_r3000_sample'>Russell 3000 sample used by SEC</h2><span id='topic+sho_r3000_sample'></span>

<h3>Description</h3>

<p>A data set containing the tickers, PERMNOs, and
treatment assignments for Russell 3000 sample used by SEC.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sho_r3000_sample
</code></pre>


<h3>Format</h3>

<p>A tibble with 2,954 rows × 3 variables.
</p>

<dl>
<dt>ticker</dt><dd><p>Ticker</p>
</dd>
<dt>permno</dt><dd><p>PERMNO (CRSP security identifier)</p>
</dd>
<dt>pilot</dt><dd><p>Indicator for stock being part of Reg SHO pilot program</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://iangow.github.io/far_book/natural-revisited.html#the-sho-pilot-sample">https://iangow.github.io/far_book/natural-revisited.html#the-sho-pilot-sample</a>
</p>

<hr>
<h2 id='sho_tickers'>Tickers of pilot firms for Reg SHO.</h2><span id='topic+sho_tickers'></span>

<h3>Description</h3>

<p>A data set containing the tickers and
company names for pilot firms from Reg SHO pilot.
Data are scraped from the SEC's own website.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sho_tickers
</code></pre>


<h3>Format</h3>

<p>A tibble with 986 rows × 2 variables.
</p>

<dl>
<dt>ticker</dt><dd><p>Ticker</p>
</dd>
<dt>co_name</dt><dd><p>Company name</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://www.sec.gov/rule-release/34-50104">https://www.sec.gov/rule-release/34-50104</a>
</p>

<hr>
<h2 id='state_hq'>Data on firm headquarters based on SEC EDGAR filings</h2><span id='topic+state_hq'></span>

<h3>Description</h3>

<p>Data on firm headquarters based on SEC EDGAR filings.
Dates related to SEC filing dates. Rather than provide dates for
all filings, data are aggregated into groups of filings by state and
CIK and dates are collapsed into windows over which
all filings for a given CIK were associated with a given state.
For example, CIK 0000037755 has filings with a CA headquarters from
1994-06-02 until 1996-03-25, then filings with an OH headquarters from
1996-05-30 until 1999-04-05, then filings with a CA headquarters from
1999-06-11 onwards.
To ensure continuous coverage over the sample period, it is assumed that
any change in state occurs the day after the last observed filing for
the previous state.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>state_hq
</code></pre>


<h3>Format</h3>

<p>A tibble with 53,133 rows and 4 variables:
</p>

<dl>
<dt>cik</dt><dd><p>SEC's Central Index Key (CIK)</p>
</dd>
<dt>ba_state</dt><dd><p>Two-letter abbreviation of state</p>
</dd>
<dt>min_date</dt><dd><p>Date of first filing with CIK-state combination in a contiguous series of filings</p>
</dd>
<dt>max_date</dt><dd><p>Date of last filing with CIK-state combination in a contiguous series of filings</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://sraf.nd.edu/data/augmented-10-x-header-data/">https://sraf.nd.edu/data/augmented-10-x-header-data/</a>
</p>

<hr>
<h2 id='system_time'>Version of <code>system.time()</code> that works with assignment</h2><span id='topic+system_time'></span>

<h3>Description</h3>

<p>Print CPU (and other) times that <code>expr</code> used, return value of <code>expr</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>system_time(expr)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="system_time_+3A_expr">expr</code></td>
<td>
<p>Valid R expression to be timed, evaluated and returned</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Result of evaluating <code>expr</code>
</p>

<hr>
<h2 id='test_scores'>Test scores</h2><span id='topic+test_scores'></span>

<h3>Description</h3>

<p>A simulated data set of test scores.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test_scores
</code></pre>


<h3>Format</h3>

<p>A tibble with 4,000 rows and 3 variables:
</p>

<dl>
<dt>id</dt><dd><p>Student identifier</p>
</dd>
<dt>grade</dt><dd><p>School grade at time of test</p>
</dd>
<dt>score</dt><dd><p>Test score</p>
</dd>
</dl>


<hr>
<h2 id='truncate'>Truncate a vector.</h2><span id='topic+truncate'></span>

<h3>Description</h3>

<p>Truncate a vector at prob and 1 - prob.
Extreme values are turned in NA values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>truncate(x, prob = 0.01, p_low = prob, p_high = 1 - prob)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="truncate_+3A_x">x</code></td>
<td>
<p>A vector to be winsorized</p>
</td></tr>
<tr><td><code id="truncate_+3A_prob">prob</code></td>
<td>
<p>Level (two-sided) for winsorization (e.g., 0.01 gives 1% and 99%)</p>
</td></tr>
<tr><td><code id="truncate_+3A_p_low">p_low</code></td>
<td>
<p>Optional lower level for winsorization (e.g., 0.01 gives 1%)</p>
</td></tr>
<tr><td><code id="truncate_+3A_p_high">p_high</code></td>
<td>
<p>Optional upper level for winsorization (e.g., 0.99 gives 99%)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>trunced &lt;- truncate(1:100, prob = 0.05)
min(trunced, na.rm = TRUE)
max(trunced, na.rm = TRUE)
</code></pre>

<hr>
<h2 id='undisclosed_names'>Customer names that represent non-disclosures.</h2><span id='topic+undisclosed_names'></span>

<h3>Description</h3>

<p>Data to be combined with data in compsegd.seg_customer to create an
indicator for non-disclosure of customer names.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>undisclosed_names
</code></pre>


<h3>Format</h3>

<p>A tibble with 460 rows and 2 variables:
</p>

<dl>
<dt>cnms</dt><dd><p>Matches field in compsegd.seg_customer (WRDS)</p>
</dd>
<dt>disclosure</dt><dd><p>Indicator that name is not disclosed</p>
</dd>
</dl>


<hr>
<h2 id='winsorize'>Winsorize a vector.</h2><span id='topic+winsorize'></span>

<h3>Description</h3>

<p>Winsorize a vector at prob and 1 - prob.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>winsorize(x, prob = 0.01, p_low = prob, p_high = 1 - prob)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="winsorize_+3A_x">x</code></td>
<td>
<p>A vector to be winsorized</p>
</td></tr>
<tr><td><code id="winsorize_+3A_prob">prob</code></td>
<td>
<p>Level (two-sided) for winsorization (e.g., 0.01 gives 1% and 99%)</p>
</td></tr>
<tr><td><code id="winsorize_+3A_p_low">p_low</code></td>
<td>
<p>Optional lower level for winsorization (e.g., 0.01 gives 1%)</p>
</td></tr>
<tr><td><code id="winsorize_+3A_p_high">p_high</code></td>
<td>
<p>Optional upper level for winsorization (e.g., 0.99 gives 99%)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>winsorized &lt;- winsorize(1:100, prob = 0.05)
min(winsorized, na.rm = TRUE)
max(winsorized, na.rm = TRUE)
</code></pre>

<hr>
<h2 id='zhang_2007_events'>Event dates from Zhang (2007)</h2><span id='topic+zhang_2007_events'></span>

<h3>Description</h3>

<p>A data set containing the event dates used in Zhang (2007).
Data obtained from Panel of Table of Zhang (2007).
If an event spans multiple dates, then a row is
included for each date.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>zhang_2007_events
</code></pre>


<h3>Format</h3>

<p>A tibble with 30 rows × 3 variables.
</p>

<dl>
<dt>event</dt><dd><p>Identifier for the event</p>
</dd>
<dt>date</dt><dd><p>Date of event</p>
</dd>
<dt>event_desc</dt><dd><p>Description of the event</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://doi.org/10.1016/j.jacceco.2007.02.002">doi:10.1016/j.jacceco.2007.02.002</a>
</p>

<hr>
<h2 id='zhang_2007_windows'>Event windows from Zhang (2007)</h2><span id='topic+zhang_2007_windows'></span>

<h3>Description</h3>

<p>A data set containing the event windows used in Zhang (2007).
Data obtained from Panel of Table of Zhang (2007).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>zhang_2007_windows
</code></pre>


<h3>Format</h3>

<p>A tibble with 17 rows × 3 variables.
</p>

<dl>
<dt>event</dt><dd><p>Identifier for the event</p>
</dd>
<dt>beg_date</dt><dd><p>First date of event window</p>
</dd>
<dt>end_date</dt><dd><p>Last date of event window</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://doi.org/10.1016/j.jacceco.2007.02.002">doi:10.1016/j.jacceco.2007.02.002</a>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
