<!DOCTYPE html><html><head><title>Help for package gginnards</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {gginnards}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#delete_layers'><p>Layer manipulation.</p></a></li>
<li><a href='#drop_vars'><p>Explore and manipulate the embedded data.</p></a></li>
<li><a href='#edit_layers'><p>Edit plot layer</p></a></li>
<li><a href='#geom_debug'><p>Geom that prints input data to console.</p></a></li>
<li><a href='#geom_null'><p>A null geom or 'no-op' geom.</p></a></li>
<li><a href='#GeomNull'><p>'ggproto' objects</p></a></li>
<li><a href='#gginnards-package'><p>gginnards: Explore the Innards of 'ggplot2' Objects</p></a></li>
<li><a href='#stat_debug_group'><p>Print to console data received by the compute group function.</p></a></li>
<li><a href='#stat_debug_panel'><p>Print to console data received by the compute panel function.</p></a></li>
<li><a href='#str'><p>Show the structure of a ggplot object.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Explore the Innards of 'ggplot2' Objects</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-05-24</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Pedro J. Aphalo &lt;pedro.aphalo@helsinki.fi&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Extensions to 'ggplot2' providing low-level debug tools: statistics
    and geometries echoing their data argument. Layer manipulation: deletion,
    insertion, extraction and reordering of layers. Deletion of unused variables
    from the data object embedded in "ggplot" objects.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>TRUE</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>TRUE</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0), ggplot2 (&ge; 3.3.1)</td>
</tr>
<tr>
<td>Imports:</td>
<td>utils, methods, rlang (&ge; 0.4.0), stringr (&ge; 1.4.0), magrittr
(&ge; 1.5), tibble (&ge; 2.1.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr (&ge; 1.24), rmarkdown (&ge; 1.14), sf (&ge; 0.9), pryr (&ge;
0.1.4)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://www.r4photobiology.info">https://www.r4photobiology.info</a>,
<a href="https://github.com/aphalo/gginnards">https://github.com/aphalo/gginnards</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/aphalo/gginnards/issues">https://github.com/aphalo/gginnards/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-05-24 19:18:13 UTC; aphalo_2</td>
</tr>
<tr>
<td>Author:</td>
<td>Pedro J. Aphalo <a href="https://orcid.org/0000-0003-3385-972X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-05-24 20:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='delete_layers'>Layer manipulation.</h2><span id='topic+delete_layers'></span><span id='topic+append_layers'></span><span id='topic+move_layers'></span><span id='topic+shift_layers'></span><span id='topic+which_layers'></span><span id='topic+extract_layers'></span><span id='topic+top_layer'></span><span id='topic+bottom_layer'></span><span id='topic+num_layers'></span>

<h3>Description</h3>

<p>Delete, move or append one or more layers in a ggplot object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>delete_layers(x, match_type = NULL, idx = NULL)

append_layers(x, object, position = "top")

move_layers(x, match_type = NULL, position = "top", idx = NULL)

shift_layers(x, match_type = NULL, idx = NULL, shift = 1L)

which_layers(x, match_type = NULL, idx = NULL)

extract_layers(x, match_type = NULL, idx = NULL)

top_layer(x)

bottom_layer(x)

num_layers(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="delete_layers_+3A_x">x</code></td>
<td>
<p>an object of class <code>gg</code> to be operated upon.</p>
</td></tr>
<tr><td><code id="delete_layers_+3A_match_type">match_type</code></td>
<td>
<p>The name of the ggproto object class for the geom(s),
position(s) or stat(s) matching that of the layers to be operated upon.</p>
</td></tr>
<tr><td><code id="delete_layers_+3A_idx">idx</code></td>
<td>
<p>integer vector Index into the list of layers used to select the
layers to be operated upon.</p>
</td></tr>
<tr><td><code id="delete_layers_+3A_object">object</code></td>
<td>
<p>a ggplot layer created by a <code>geom_</code> or <code>stat_</code>
function or a list of such layers or an empty list.</p>
</td></tr>
<tr><td><code id="delete_layers_+3A_position">position</code></td>
<td>
<p>character or interger, the position of the layer immediately
above of which to move or append the moved or appended layers.</p>
</td></tr>
<tr><td><code id="delete_layers_+3A_shift">shift</code></td>
<td>
<p>integer.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions must be used with care as they select all layers
matching the provided geom, position or stat ggproto object class. Layers
added with a stat do use a geom, and vice versa.
</p>
<p>One and only one of <code>match_type</code> and <code>idx</code> must be passed a
non-null argument.
</p>
<p>In plots with several layers, it is possible that more than one layer
matches the class name passed to <code>match_type</code>. It is also possible to
pass a numeric vector with multiple indexes through parameter <code>idx</code>.
In both cases multiple layers will be operated upon, but their relative
positions will remain unchanged.
</p>
<p>If a numeric vector with multiple position indexes is supplied as argument
for <code>position</code>, the topmost position will be used. As indexing in R
starts at 1, passing 0 or <code>"bottom"</code> as argument for <code>position</code>
puts the moved or appended layer(s) behind all other layers (prepends the
layer).
</p>


<h3>Value</h3>

<p>An edited copy of <code>x</code> for <code>delete_layers</code>,
<code>append_layers</code> and <code>move_layers</code>. An integer vector of indexes
giving the positions of the matching layers in the list of layers contained
in <code>x</code> in the case of <code>which_layers</code>.
</p>


<h3>Note</h3>

<p>The functions described here are not expected to be useful in everyday
plotting as one can more easily change the order in which layers are added
to a ggplot. However, if one uses high level methods or functions that
automatically produce a full plot using 'ggplot2' internally, one may need
to add, move or delete layers so as to profit from such canned methods and
retain enough flexibility.
</p>


<h3>References</h3>

<p><a href="https://stackoverflow.com/questions/13407236/remove-a-layer-from-a-ggplot2-chart">https://stackoverflow.com/questions/13407236/remove-a-layer-from-a-ggplot2-chart</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- data.frame(
  gp = factor(rep(letters[1:3], each = 10)),
  y = rnorm(30)
)
p &lt;- ggplot(df, aes(gp, y)) +
       geom_point() +
       stat_summary(fun.data = "mean_se", colour = "red")
p
delete_layers(p, "GeomPoint")
delete_layers(p, "StatSummary")
move_layers(p, "GeomPoint", position = "top")
move_layers(p, "GeomPointrange", position = "bottom")
move_layers(p, "StatSummary", position = "bottom")
move_layers(p, "GeomPointrange", position = 1L)
append_layers(p, geom_line(colour = "orange"), position = "bottom")
append_layers(p, geom_line(colour = "orange"), position = 1L)
extract_layers(p, "GeomPoint")
ggplot(df, aes(gp, y)) + extract_layers(p, "GeomPoint")
which_layers(p, "GeomPoint")
num_layers(p)
top_layer(p)
bottom_layer(p)
num_layers(ggplot())
top_layer(ggplot())
bottom_layer(ggplot())

if (requireNamespace("sf", quietly = TRUE)) {
  nc &lt;- sf::st_read(system.file("shape/nc.shp", package = "sf"), quiet = TRUE)
  nc_3857 &lt;- sf::st_transform(nc, 3857)

  p.sf1 &lt;- ggplot() +
           geom_sf(data = nc)
  p.sf1
  num_layers(p.sf1)
  top_layer(p.sf1)

  append_layers(p.sf1,
                geom_sf(data = nc_3857, colour = "red", fill = NA),
                position = "top")

  p.sf2 &lt;- ggplot() +
           geom_sf(data = nc) +
           geom_sf(data = nc_3857, colour = "red", fill = NA)
  p.sf2
  num_layers(p.sf2)
  top_layer(p.sf2)
  delete_layers(p.sf2, idx = 2L)

  extract_layers(p.sf2, "GeomSf")
  extract_layers(p.sf2, "StatSf")
  extract_layers(p.sf2, idx = 1L)
  p.sf1 + extract_layers(p.sf2, idx = 2L)

  # beware that Coords are not extracted!
  ggplot() + extract_layers(p.sf2, idx = 2L) + coord_sf()
}

</code></pre>

<hr>
<h2 id='drop_vars'>Explore and manipulate the embedded data.</h2><span id='topic+drop_vars'></span><span id='topic+mapped_vars'></span><span id='topic+data_vars'></span><span id='topic+data_attributes'></span>

<h3>Description</h3>

<p>Automatically remove unused variables from the &quot;default&quot; data object embedded
in a <code>gg</code> or <code>ggplot</code> object with <code>drop_vars()</code>. Explore data
variables and their use with <code>mapped_vars()</code>, <code>data_vars()</code> and
<code>data_attributes()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drop_vars(p, keep.vars = character(), guess.vars = TRUE)

mapped_vars(p, invert = FALSE)

data_vars(p)

data_attributes(p)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drop_vars_+3A_p">p</code></td>
<td>
<p>ggplot Plot object with embedded data.</p>
</td></tr>
<tr><td><code id="drop_vars_+3A_keep.vars">keep.vars</code></td>
<td>
<p>character Names of unused variables to be kept.</p>
</td></tr>
<tr><td><code id="drop_vars_+3A_guess.vars">guess.vars</code></td>
<td>
<p>logical Flag indicating whether to find used variables
automatically.</p>
</td></tr>
<tr><td><code id="drop_vars_+3A_invert">invert</code></td>
<td>
<p>logical If TRUE return indices for elements of <code>data</code> that
are not mapped to any aesthetic or facet.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>"ggplot"</code> object that is a copy of <code>p</code> but containing
only a subset of the variables in its default <code>data</code>.
</p>
<p>character vector with names of mapped variables in the default
data object.
</p>
<p>character vector with names of all variables in the default
data object.
</p>
<p>list containing all attributes of the default data object.
</p>


<h3>Warning!</h3>

<p>The current implementation drops variables only from the
default data object. Data objects within layers are not modified.
</p>


<h3>Note</h3>

<p>These functions are under development and not yet thoroughly tested!
They are a demonstration of how one can manipulate the internals of
<code>ggplot</code> objects creayed with 'ggplot2' versions 3.1.0 and later.
These functions may stop working after some future update to the 'ggplot2'
package. Although I will maintain this package for use in some of my other
packages, there is no guarantee that I will be able to achieve this
transparently.
</p>
<p>Obviously, rather than using function <code>drop_vars()</code> after creating the
<code>ggplot</code> object it is usually more efficient to select the variables
of interest and pass a data frame containing only these to the
<code>ggplot()</code> constructor.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)

p &lt;- ggplot(mpg, aes(factor(year), (cty + hwy) / 2)) +
  geom_boxplot() +
  facet_grid(. ~ class)

mapped_vars(p) # those in use
mapped_vars(p, invert = TRUE) # those not used

p.dp &lt;- drop_vars(p) # we drop unused vars

# number of columns in the data member
ncol(p$data)
ncol(p.dp$data)

# which vars are in the data member
data_vars(p)
data_vars(p.dp)

# which variables in data are used in the plot
mapped_vars(p)
mapped_vars(p.dp)

# the plots identical
p
p.dp

# structure and size of p
str(p, max.level = 0)
str(p.dp, max.level = 0) # smaller in size

# structure and size of p["data"]
str(p, components = "data")
str(p.dp, components = "data") # smaller in size

# shape data
if (requireNamespace("sf", quietly = TRUE)) {
  nc &lt;- sf::st_read(system.file("shape/nc.shp", package = "sf"), quiet = TRUE)

  p.sf &lt;- ggplot(data = nc) +
          geom_sf()
  p.sf
  mapped_vars(p.sf)
  drop_vars(p.sf)
}

</code></pre>

<hr>
<h2 id='edit_layers'>Edit plot layer</h2><span id='topic+edit_layers'></span>

<h3>Description</h3>

<p>Delete or move one or more layers in a ggplot object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edit_layers(x, match_type = NULL, position = 0L, idx = NULL, action)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="edit_layers_+3A_x">x</code></td>
<td>
<p>an object of class <code>gg</code> to be operated upon.</p>
</td></tr>
<tr><td><code id="edit_layers_+3A_match_type">match_type</code></td>
<td>
<p>The name of the ggproto object class for the geom(s),
position(s) or stat(s) matching that of the layers to be operated upon.</p>
</td></tr>
<tr><td><code id="edit_layers_+3A_idx">idx</code></td>
<td>
<p>integer vector Index(es) into the list of layers, used to select
the layers to be operated upon.</p>
</td></tr>
<tr><td><code id="edit_layers_+3A_action">action</code></td>
<td>
<p>character One of &quot;delete&quot;, &quot;move&quot;, or &quot;which&quot;.</p>
</td></tr>
</table>

<hr>
<h2 id='geom_debug'>Geom that prints input data to console.</h2><span id='topic+geom_debug'></span><span id='topic+geom_debug_npc'></span>

<h3>Description</h3>

<p>The debug geom is used to print to the console a summary of the data being
received by geoms as input <code>data</code> data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_debug(
  mapping = NULL,
  data = NULL,
  stat = "identity",
  summary.fun = "head",
  summary.fun.args = list(),
  parse = NULL,
  nudge_x = 0,
  nudge_y = 0,
  position = "identity",
  na.rm = FALSE,
  show.legend = FALSE,
  inherit.aes = TRUE,
  ...
)

geom_debug_npc(
  mapping = NULL,
  data = NULL,
  stat = "identity",
  summary.fun = "head",
  summary.fun.args = list(),
  parse = NULL,
  nudge_x = 0,
  nudge_y = 0,
  position = "identity",
  na.rm = FALSE,
  show.legend = FALSE,
  inherit.aes = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="geom_debug_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by
<code><a href="ggplot2.html#topic+aes">aes</a></code> or <code><a href="ggplot2.html#topic+aes_">aes_</a></code>. If specified and
<code>inherit.aes = TRUE</code> (the default), is combined with the default
mapping at the top level of the plot. You only need to supply
<code>mapping</code> if there isn't a mapping defined for the plot.</p>
</td></tr>
<tr><td><code id="geom_debug_+3A_data">data</code></td>
<td>
<p>A data frame. If specified, overrides the default data frame
defined at the top level of the plot.</p>
</td></tr>
<tr><td><code id="geom_debug_+3A_stat">stat</code></td>
<td>
<p>The statistical transformation to use on the data for this layer,
as a string.</p>
</td></tr>
<tr><td><code id="geom_debug_+3A_summary.fun">summary.fun</code></td>
<td>
<p>The name of a function as a character string (or a
function) to be used to summarize the <code>data</code> object received as input
before printing it.</p>
</td></tr>
<tr><td><code id="geom_debug_+3A_summary.fun.args">summary.fun.args</code></td>
<td>
<p>A list of additional arguments
to be passed to <code>summary.fun</code>.</p>
</td></tr>
<tr><td><code id="geom_debug_+3A_parse">parse</code></td>
<td>
<p>Ignored. Helps avoid warnings.</p>
</td></tr>
<tr><td><code id="geom_debug_+3A_nudge_x">nudge_x</code>, <code id="geom_debug_+3A_nudge_y">nudge_y</code></td>
<td>
<p>Horizontal and vertical adjustments to nudge the
starting position. The units for <code>nudge_x</code> and <code>nudge_y</code> are the
same as for the data units on the x-axis and y-axis.</p>
</td></tr>
<tr><td><code id="geom_debug_+3A_position">position</code></td>
<td>
<p>Position adjustment, either as a string, or the result of a
call to a position adjustment function.</p>
</td></tr>
<tr><td><code id="geom_debug_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code> (the default), removes missing values with a
warning.  If <code>TRUE</code> silently removes missing values.</p>
</td></tr>
<tr><td><code id="geom_debug_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped. <code>FALSE</code>
never includes, and <code>TRUE</code> always includes.</p>
</td></tr>
<tr><td><code id="geom_debug_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics, rather
than combining with them. This is most useful for helper functions that
define both data and aesthetics and shouldn't inherit behaviour from the
default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders</a></code>.</p>
</td></tr>
<tr><td><code id="geom_debug_+3A_...">...</code></td>
<td>
<p>other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer</a></code>. There
are three types of arguments you can use here:
</p>
 <ul>
<li><p> Aesthetics: to set an aesthetic to a fixed value, like
<code>color = "red"</code> or <code>size = 3</code>. </p>
</li>
<li><p> Other arguments to the
layer, for example you override the default <code>stat</code> associated with the
layer. </p>
</li>
<li><p> Other arguments passed on to the stat. </p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>It can be useful when debugging the code of statistics or to learn how the
stats and geoms work in 'ggplot2' (&gt;= 2.0.0).
</p>
<p>The intended use of this geometry is to help explore the data as
they are added to a plot layer. It is very unusual in that it does not
produce visible graphic output. It only returns a <code>grid.null()</code> grob
(graphical object) when the plot is rendered. Also, differently to normal
geometries, it passes its <code>data</code> input as argument to the first
parameter of the function passed as argument to <code>summary.fun</code>. The
value returned by this function is then printed to the R console. If
<code>summary.fun = NULL</code>, the whole <code>data</code> object is printed.
</p>
<p>Nudging with <code>nudge_x</code> and <code>nudge_y</code> behave as in
<code><a href="ggplot2.html#topic+geom_text">geom_text</a></code>. Arguments passed to <code>position</code> are
obeyed. So the effects of positions are reflected in the <code>data</code> object
printed or summarized to the R console. The argument passed to <code>parse</code>
is currently ignored.
</p>
<p>Many aesthetics are defined as optional so that they are accepted silently
by <code>geom_debug()</code> and handled by 'ggplot2' as usual.
</p>
<p>If the argument passed to <code>summary.fun()</code> is a character string, the
name will appear in the header of the printout. However, the function
must be available at the time the plot is rendered. If a function is
passed as argument, its definition will be saved as part of the <code>"gg"</code>
object.
</p>


<h3>Value</h3>

<p>The panel function of this geometry always returns a
<code><a href="grid.html#topic+nullGrob">nullGrob</a></code>, the legend is is also set to
<code><a href="grid.html#topic+nullGrob">nullGrob</a></code>. This geometry used for its text printing side
effect.
</p>


<h3>See Also</h3>

<p>To access data, scales and grobs in a built ggplot, see
<code><a href="ggplot2.html#topic+ggplot_build">ggplot_build</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># echo to the R console \code{data} as received by geoms
ggplot(mtcars, aes(cyl, mpg, color = factor(cyl))) +
  geom_point() +
  geom_debug()

ggplot(mtcars, aes(cyl, mpg, color = factor(cyl))) +
  geom_point() +
  geom_debug(summary.fun = "head", summary.fun.args = list(n = 3))

ggplot(mtcars, aes(cyl, mpg, color = factor(cyl))) +
  geom_point() +
  geom_debug(summary.fun = "nrow")

ggplot(mtcars, aes(cyl, mpg, color = factor(cyl))) +
  geom_point() +
  geom_debug(summary.fun = "attributes")

# echo to the R console \code{data} as received by geoms
ggplot(mtcars, aes(cyl, mpg, colour = factor(cyl))) +
  stat_summary(fun.data = "mean_se") +
  stat_summary(fun.data = "mean_se", geom = "debug", summary.fun = NULL)

# shape data is not passed to geometries or statistics
if (requireNamespace("sf", quietly = TRUE)) {
  nc &lt;- sf::st_read(system.file("shape/nc.shp", package = "sf"), quiet = TRUE)

  ggplot(data = nc) +
    geom_sf(color = "darkblue", fill = "white") +
    geom_debug()
}

</code></pre>

<hr>
<h2 id='geom_null'>A null geom or 'no-op' geom.</h2><span id='topic+geom_null'></span>

<h3>Description</h3>

<p>The null geom can be used to silence graphic output from a stat, such as
<code>stat_debug_group()</code> and <code>stat_debug_panel()</code> defined in this same
package. No visible graphical output is returned. An invisible
<code>grid::grid_null()</code> grob is returned instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_null(
  mapping = NULL,
  data = NULL,
  stat = "identity",
  position = "identity",
  na.rm = FALSE,
  show.legend = FALSE,
  inherit.aes = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="geom_null_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by
<code><a href="ggplot2.html#topic+aes">aes</a></code>. If specified and <code>inherit.aes = TRUE</code> (the
default), are combined with the default mapping at the top level of the
plot. You only need to supply <code>mapping</code> if there isn't a mapping
defined for the plot.</p>
</td></tr>
<tr><td><code id="geom_null_+3A_data">data</code></td>
<td>
<p>A data frame. If specified, overrides the default data frame
defined at the top level of the plot.</p>
</td></tr>
<tr><td><code id="geom_null_+3A_stat">stat</code></td>
<td>
<p>The statistical transformation to use on the data for this layer,
as a string.</p>
</td></tr>
<tr><td><code id="geom_null_+3A_position">position</code></td>
<td>
<p>Position adjustment, either as a string, or the result of a
call to a position adjustment function.</p>
</td></tr>
<tr><td><code id="geom_null_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code> (the default), removes missing values with a
warning.  If <code>TRUE</code> silently removes missing values.</p>
</td></tr>
<tr><td><code id="geom_null_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped. <code>FALSE</code>
never includes, and <code>TRUE</code> always includes.</p>
</td></tr>
<tr><td><code id="geom_null_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics, rather
than combining with them. This is most useful for helper functions that
define both data and aesthetics and shouldn't inherit behaviour from the
default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders</a></code>.</p>
</td></tr>
<tr><td><code id="geom_null_+3A_...">...</code></td>
<td>
<p>other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer</a></code>. There
are three types of arguments you can use here:
</p>
 <ul>
<li><p> Aesthetics: to set an aesthetic to a fixed value, like
<code>color = "red"</code> or <code>size = 3</code>. </p>
</li>
<li><p> Other arguments to the
layer, for example you override the default <code>stat</code> associated with the
layer. </p>
</li>
<li><p> Other arguments passed on to the stat.</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>A plot layer instance. Mainly used for the side-effect of printing
to the console the <code>data</code> object.
</p>


<h3>Note</h3>

<p>This geom is very unusual in that it does not produce visible graphic
output. It only returns a <code><a href="grid.html#topic+grid.null">grid.null</a></code> grob (graphical
object). However, it accepts for consistency all the same parameters as
normal geoms, which have no effect on the graphical output, except for
<code>show.legend</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ggplot(mtcars) +
  geom_null()

ggplot(mtcars, aes(cyl, mpg)) +
  geom_null()

# shape data

if (requireNamespace("sf", quietly = TRUE)) {
  nc &lt;- sf::st_read(system.file("shape/nc.shp", package = "sf"), quiet = TRUE)

  ggplot(data = nc) +
    geom_null()
}

</code></pre>

<hr>
<h2 id='GeomNull'>'ggproto' objects</h2><span id='topic+GeomNull'></span><span id='topic+GeomDebug'></span><span id='topic+StatDebugGroup'></span><span id='topic+StatDebugPanel'></span>

<h3>Description</h3>

<p>Internal use only definitions of 'ggproto' objects needed for
geoms and stats.
</p>

<hr>
<h2 id='gginnards-package'>gginnards: Explore the Innards of 'ggplot2' Objects</h2><span id='topic+gginnards'></span><span id='topic+gginnards-package'></span>

<h3>Description</h3>

<p>Extensions to 'ggplot2' providing low-level debug tools: statistics and geometries echoing their data argument. Layer manipulation: deletion, insertion, extraction and reordering of layers. Deletion of unused variables from the data object embedded in &quot;ggplot&quot; objects.
</p>


<h3>Details</h3>

<p>The new facilities for cleanly defining new stats and geoms added to
package 'ggplot2' in version 2.0.0 gave origin to this package. I needed
tools to help me learn how layers work and to debug the extensions to
'ggplot2' that I was developing. I share them through this package in the
hope that they will help other users of 'ggplot2' understand how this
this very popular graphics package works internally. The vignettes provide
examples of how to use these tools both for debugging and learning how
ggplots are stored.
</p>
<p>Extensions provided:
</p>

<ul>
<li><p> &quot;Debug&quot; stats and a &quot;debug&quot; geom that print to the console a summary
of their <code>data</code> input.
</p>
</li>
<li><p> Functions for inspecting and manipulating the list of layers of a
ggplot object.
</p>
</li>
<li><p> Functions for exploring and manipulating the data embedded in
ggplot objects, including dropping unused variables.
</p>
</li></ul>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Pedro J. Aphalo <a href="mailto:pedro.aphalo@helsinki.fi">pedro.aphalo@helsinki.fi</a> (<a href="https://orcid.org/0000-0003-3385-972X">ORCID</a>)
</p>


<h3>References</h3>

<p>Package 'tidyverse' web site at <a href="https://www.tidyverse.org/">https://www.tidyverse.org/</a><br />
Package 'ggplot2' documentation at <a href="https://ggplot2.tidyverse.org/">https://ggplot2.tidyverse.org/</a><br />
Package 'ggplot2' source code at <a href="https://github.com/tidyverse/ggplot2">https://github.com/tidyverse/ggplot2</a>
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://www.r4photobiology.info">https://www.r4photobiology.info</a>
</p>
</li>
<li> <p><a href="https://github.com/aphalo/gginnards">https://github.com/aphalo/gginnards</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/aphalo/gginnards/issues">https://github.com/aphalo/gginnards/issues</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># echo to the R console \code{data} as received by geoms
ggplot(mtcars, aes(cyl, mpg, color = factor(cyl))) +
  geom_point() +
  geom_debug()

# echo to the R console \code{data} as received by geoms
ggplot(mtcars, aes(cyl, mpg, colour = factor(cyl))) +
  stat_summary(fun.data = "mean_se") +
  stat_summary(fun.data = "mean_se", geom = "debug")

# echo to the R console \code{data} received by \code{compute_panel()}
ggplot(mtcars, aes(cyl, mpg, color = factor(cyl))) +
  geom_point() +
  stat_debug_panel()

# echo to the R console \code{data} received by \code{compute_group()}
ggplot(mtcars, aes(cyl, mpg, color = factor(cyl))) +
  geom_point() +
  stat_debug_group()

</code></pre>

<hr>
<h2 id='stat_debug_group'>Print to console data received by the compute group function.</h2><span id='topic+stat_debug_group'></span>

<h3>Description</h3>

<p><code>stat_debug</code> reports all distinct values in <code>group</code>
and <code>PANEL</code>, and <code>nrow</code>, <code>ncol</code> and the names of the columns
or variables, and the class of x and y for each group in a ggplot as passed
to the <code>compute_group</code> function in the <code>ggproto</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stat_debug_group(
  mapping = NULL,
  data = NULL,
  geom = "null",
  summary.fun = "head",
  summary.fun.args = list(),
  geom.summary.fun = NULL,
  geom.summary.fun.args = list(),
  position = "identity",
  na.rm = FALSE,
  show.legend = FALSE,
  inherit.aes = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stat_debug_group_+3A_mapping">mapping</code></td>
<td>
<p>The aesthetic mapping, usually constructed with
<code><a href="ggplot2.html#topic+aes">aes</a></code> or <code><a href="ggplot2.html#topic+aes_">aes_</a></code>. Only needs
to be set at the layer level if you are overriding the plot defaults.</p>
</td></tr>
<tr><td><code id="stat_debug_group_+3A_data">data</code></td>
<td>
<p>A layer specific dataset - only needed if you want to override
the plot defaults.</p>
</td></tr>
<tr><td><code id="stat_debug_group_+3A_geom">geom</code></td>
<td>
<p>The geometric object to use display the data</p>
</td></tr>
<tr><td><code id="stat_debug_group_+3A_summary.fun">summary.fun</code>, <code id="stat_debug_group_+3A_geom.summary.fun">geom.summary.fun</code></td>
<td>
<p>A function used to print the <code>data</code>
object received as input.</p>
</td></tr>
<tr><td><code id="stat_debug_group_+3A_summary.fun.args">summary.fun.args</code>, <code id="stat_debug_group_+3A_geom.summary.fun.args">geom.summary.fun.args</code></td>
<td>
<p>A named list.</p>
</td></tr>
<tr><td><code id="stat_debug_group_+3A_position">position</code></td>
<td>
<p>The position adjustment to use for overlapping points on this
layer</p>
</td></tr>
<tr><td><code id="stat_debug_group_+3A_na.rm">na.rm</code></td>
<td>
<p>a logical value indicating whether NA values should be stripped
before the computation proceeds.</p>
</td></tr>
<tr><td><code id="stat_debug_group_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped. <code>FALSE</code>
never includes, and <code>TRUE</code> always includes.</p>
</td></tr>
<tr><td><code id="stat_debug_group_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics, rather
than combining with them. This is most useful for helper functions that
define both data and aesthetics and shouldn't inherit behaviour from the
default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders</a></code>.</p>
</td></tr>
<tr><td><code id="stat_debug_group_+3A_...">...</code></td>
<td>
<p>other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer</a></code>. This
can include aesthetics whose values you want to set, not map. See
<code><a href="ggplot2.html#topic+layer">layer</a></code> for more details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This stat is meant to be used for the side-effect of printing to the
console the <code>data</code> object received as input by the
<code>compute_grroup()</code> function, or a summary of it. This is the same as
for any other statistics passed the same arguments (including defaults that
may need to be overridden if they differ).
</p>
<p>In principle any geom can be passed as argument to override <code>"null"</code>.
Keep in mind that this stat sets default mappings only for the <em>x</em> and
<em>y</em> aesthetics: <code>geom_debug()</code> and <code>geom_text()</code> are
useful.
</p>


<h3>Value</h3>

<p>A tibble with a summary of the <code>data</code> received, which is not
printed by default using <code>geom_null()</code>. Can be printed by passing
<code>geom = "debug"</code>.
</p>


<h3>Computed variables</h3>

 <dl>
<dt>x</dt><dd><p>x at centre of range</p>
</dd>
<dt>y</dt><dd><p>y at centre of range</p>
</dd> <dt>nrow</dt><dd><p><code>nrow()</code> of <code>data</code>
object</p>
</dd> <dt>ncol</dt><dd><p><code>ncol()</code> of <code>data</code> object</p>
</dd>
<dt>colnames</dt><dd><p><code>colnames()</code> of <code>data</code> object</p>
</dd>
<dt>colclasses</dt><dd><p><code>class()</code> of <code>x</code> and <code>y</code> columns in
<code>data</code> object</p>
</dd> <dt>group</dt><dd><p>all distinct values in group as passed in
<code>data</code> object</p>
</dd> <dt>PANEL</dt><dd><p>all distinct values in PANEL as passed in
<code>data</code> object</p>
</dd> </dl>



<h3>See Also</h3>

<p>Other diagnosis functions: 
<code><a href="#topic+stat_debug_panel">stat_debug_panel</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>my.df &lt;- data.frame(x = rep(1:10, 2),
                    y = rep(c(1,2), c(10,10)) + rnorm(20),
                    group = rep(c("A","B"), c(10,10)))

# by default head() is used to show the top rows of data object
# and geom_null() to silence the data returned by the stat
ggplot(my.df, aes(x,y)) +
  geom_point() +
  stat_debug_group()

# geom_debug prints the data returned by the stat
ggplot(my.df, aes(x,y)) +
  geom_point() +
  stat_debug_group(geom = "debug")

# to print only the the data returned by the stat
# we pass as summary function a function that always returns NULL
ggplot(my.df, aes(x,y)) +
  geom_point() +
  stat_debug_group(geom = "debug",
                   summary.fun = function(x) {NULL})

ggplot(my.df, aes(x,y)) +
  geom_point() +
  stat_debug_group(aes(label = sprintf("nrow = %i, ncol = %i, colnames: %s",
                                       after_stat(nrow),
                                       after_stat(ncol),
                                       after_stat(colnames))),
                   geom = "text")

# here we show all the data object
ggplot(my.df, aes(x,y)) +
  geom_point() +
  stat_debug_group(summary.fun = NULL)

ggplot(my.df, aes(x,y)) +
  geom_point() +
  stat_debug_group(summary.fun = "nrow")

# with grouping
ggplot(my.df, aes(x,y, colour = group)) +
  geom_point() +
  stat_debug_group()

ggplot(my.df, aes(x,y)) +
  geom_point() +
  facet_wrap(~group) +
  stat_debug_group()

# by default head() is used to show the top rows of data object
ggplot(my.df, aes(group,y)) +
  geom_point() +
  stat_debug_group()

</code></pre>

<hr>
<h2 id='stat_debug_panel'>Print to console data received by the compute panel function.</h2><span id='topic+stat_debug_panel'></span>

<h3>Description</h3>

<p><code>stat_debug</code> reports all distinct values in <code>group</code>
and <code>PANEL</code>, and <code>nrow</code>, <code>ncol</code> and the names of the columns
or variables, and the class of x and y for each panel in a ggplot as passed
to the <code>compute_panel</code> function in the <code>ggproto</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stat_debug_panel(
  mapping = NULL,
  data = NULL,
  geom = "null",
  summary.fun = "head",
  summary.fun.args = list(),
  geom.summary.fun = NULL,
  geom.summary.fun.args = list(),
  position = "identity",
  na.rm = FALSE,
  show.legend = FALSE,
  inherit.aes = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stat_debug_panel_+3A_mapping">mapping</code></td>
<td>
<p>The aesthetic mapping, usually constructed with
<code><a href="ggplot2.html#topic+aes">aes</a></code> or <code><a href="ggplot2.html#topic+aes_">aes_</a></code>. Only needs
to be set at the layer level if you are overriding the plot defaults.</p>
</td></tr>
<tr><td><code id="stat_debug_panel_+3A_data">data</code></td>
<td>
<p>A layer specific dataset - only needed if you want to override
the plot defaults.</p>
</td></tr>
<tr><td><code id="stat_debug_panel_+3A_geom">geom</code></td>
<td>
<p>The geometric object to use display the data</p>
</td></tr>
<tr><td><code id="stat_debug_panel_+3A_summary.fun">summary.fun</code>, <code id="stat_debug_panel_+3A_geom.summary.fun">geom.summary.fun</code></td>
<td>
<p>A function used to print the <code>data</code>
object received as input.</p>
</td></tr>
<tr><td><code id="stat_debug_panel_+3A_summary.fun.args">summary.fun.args</code>, <code id="stat_debug_panel_+3A_geom.summary.fun.args">geom.summary.fun.args</code></td>
<td>
<p>A named list.</p>
</td></tr>
<tr><td><code id="stat_debug_panel_+3A_position">position</code></td>
<td>
<p>The position adjustment to use for overlapping points on this
layer</p>
</td></tr>
<tr><td><code id="stat_debug_panel_+3A_na.rm">na.rm</code></td>
<td>
<p>a logical value indicating whether NA values should be stripped
before the computation proceeds.</p>
</td></tr>
<tr><td><code id="stat_debug_panel_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped. <code>FALSE</code>
never includes, and <code>TRUE</code> always includes.</p>
</td></tr>
<tr><td><code id="stat_debug_panel_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics, rather
than combining with them. This is most useful for helper functions that
define both data and aesthetics and shouldn't inherit behaviour from the
default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders</a></code>.</p>
</td></tr>
<tr><td><code id="stat_debug_panel_+3A_...">...</code></td>
<td>
<p>other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer</a></code>. This
can include aesthetics whose values you want to set, not map. See
<code><a href="ggplot2.html#topic+layer">layer</a></code> for more details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This stat is meant to be used for the side-effect of printing to the
console the <code>data</code> object received as input by the
<code>compute_panel()</code> function, or a summary of it. This is the same as
for any other statistics passed the same arguments (including defaults that
may need to be overridden if they differ).
</p>
<p>In principle any geom can be passed as argument to override <code>"null"</code>.
Keep in mind that this stat sets default mappings only for the <em>x</em> and
<em>y</em> aesthetics: <code>geom_debug()</code> and <code>geom_text()</code> are
useful.
</p>


<h3>Value</h3>

<p>A tibble with a summary of the <code>data</code> received, which is not
printed by default using <code>geom_null()</code>. Can be printed by passing
<code>geom = "debug"</code>.
</p>


<h3>Computed variables</h3>


<dl>
<dt>x</dt><dd><p>x at centre of range</p>
</dd>
<dt>y</dt><dd><p>y at centre of range</p>
</dd>
<dt>nrow</dt><dd><p><code>nrow()</code> of <code>data</code> object</p>
</dd>
<dt>ncol</dt><dd><p><code>ncol()</code> of <code>data</code> object</p>
</dd>
<dt>colnames</dt><dd><p><code>colnames()</code> of <code>data</code> object</p>
</dd>
<dt>colclasses</dt><dd><p><code>class()</code> of <code>x</code> and <code>y</code> columns in <code>data</code> object</p>
</dd>
<dt>group</dt><dd><p>all distinct values in group as passed in <code>data</code> object</p>
</dd>
<dt>PANEL</dt><dd><p>all distinct values in PANEL as passed in <code>data</code> object</p>
</dd>
</dl>



<h3>See Also</h3>

<p>Other diagnosis functions: 
<code><a href="#topic+stat_debug_group">stat_debug_group</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>my.df &lt;- data.frame(x = rep(1:10, 2),
                    y = rep(c(1,2), c(10,10)) + rnorm(20),
                    group = rep(c("A","B"), c(10,10)))

# by default head() is used to show the top rows of data object
# and geom_null() to silence the data returned by the stat
ggplot(my.df, aes(x,y)) +
  geom_point() +
  stat_debug_panel()

# geom_debug prints the data returned by the stat
ggplot(my.df, aes(x,y)) +
  geom_point() +
  stat_debug_panel(geom = "debug")

# to print only the the data returned by the stat
# we pass as summary function a function that always returns NULL
ggplot(my.df, aes(x,y)) +
  geom_point() +
  stat_debug_panel(geom = "debug",
                   summary.fun = function(x) {NULL})

ggplot(my.df, aes(x,y)) +
  geom_point() +
  stat_debug_panel(aes(label = sprintf("nrow = %i, ncol = %i, colnames: %s",
                                       after_stat(nrow),
                                       after_stat(ncol),
                                       after_stat(colnames))),
                   geom = "text")

# here we show all the data object
ggplot(my.df, aes(x,y)) +
  geom_point() +
  stat_debug_panel(summary.fun = NULL)

ggplot(my.df, aes(x,y)) +
  geom_point() +
  stat_debug_panel(summary.fun = "nrow")

# with grouping
ggplot(my.df, aes(x,y, colour = group)) +
  geom_point() +
  stat_debug_panel(summary.fun = NULL)

ggplot(my.df, aes(x,y)) +
  geom_point() +
  facet_wrap(~group) +
  stat_debug_panel()

# by default head() is used to show the top rows of data object
ggplot(my.df, aes(group,y)) +
  geom_point() +
  stat_debug_panel()

</code></pre>

<hr>
<h2 id='str'>Show the structure of a ggplot object.</h2><span id='topic+str'></span><span id='topic+str.ggplot'></span>

<h3>Description</h3>

<p>A <code>str()</code> method tailored to objects of class <code>"ggplot"</code>. It adds
to the output the size of the object, and the ability to subset
individual components.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ggplot'
str(
  object,
  ...,
  max.level = 1,
  components = TRUE,
  vec.len = 2,
  list.len = 99,
  give.attr = FALSE,
  comp.str = "$ ",
  nest.lev = 0,
  indent.str = paste(rep.int(" ", max(0, nest.lev + 1)), collapse = ".."),
  size = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="str_+3A_object">object</code></td>
<td>
<p>ggplot Plot object with embedded data.</p>
</td></tr>
<tr><td><code id="str_+3A_...">...</code></td>
<td>
<p>accept additional parameter arguments</p>
</td></tr>
<tr><td><code id="str_+3A_max.level">max.level</code></td>
<td>
<p>integer Maximum depth of recursion (of lists within lists
...) to be printed.</p>
</td></tr>
<tr><td><code id="str_+3A_components">components</code></td>
<td>
<p>Vector of components to print, as indexes into
<code>object</code>.</p>
</td></tr>
<tr><td><code id="str_+3A_vec.len">vec.len</code></td>
<td>
<p>integer Approximate maximum length allowed when showing the
first few values of a vector.</p>
</td></tr>
<tr><td><code id="str_+3A_list.len">list.len</code></td>
<td>
<p>integer Maximum number of components to show of any list that
will be described.</p>
</td></tr>
<tr><td><code id="str_+3A_give.attr">give.attr</code></td>
<td>
<p>logical Flag, determining whether a description of
attributes will be shown.</p>
</td></tr>
<tr><td><code id="str_+3A_comp.str">comp.str</code></td>
<td>
<p>character String to be used for separating list components.</p>
</td></tr>
<tr><td><code id="str_+3A_nest.lev">nest.lev</code></td>
<td>
<p>numeric current nesting level in the recursive calls to
<code>str()</code>.</p>
</td></tr>
<tr><td><code id="str_+3A_indent.str">indent.str</code></td>
<td>
<p>character String used for each level of indentation.</p>
</td></tr>
<tr><td><code id="str_+3A_size">size</code></td>
<td>
<p>logical Flag, should the size of the object in bytes be printed?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A NULL is returned invisibly. While a description of the
structure of <code>p</code> or its components will be printed in outline form as
a &quot;side-effect&quot;, with indentation for each level of recursion, showing the
internal storage mode, class(es) if any, attributes, and first few
elements of each data vector. By default each level of list recursion is
indicated and attributes enclosed in angle brackets.
</p>


<h3>Note</h3>

<p>In the case of objects with a nested structure <code>str()</code> is called
recursively and dispatched according to the class of each nested member.
</p>


<h3>See Also</h3>

<p>A <code><a href="base.html#topic+summary">summary</a></code> method for class <code>ggplot</code> is defined by
package 'ggplot2'. Method <code>summary()</code> provides a more compact
description of <code>"ggplot"</code> objects than method <code>str()</code>. Here we
provide a wrapper on R's <code>str()</code> with different default arguments. A
summary does not directly describe how the different components of an R
object are stored, while the structure does.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- ggplot(mpg, aes(factor(year), (cty + hwy) / 2)) +
  geom_boxplot() +
  geom_point(color = "red") +
  facet_grid(. ~ class) +
  ggtitle("Example plot")

p

# str(p) vs. summary(p)
str(p)
summary(p) # from pacakge 'ggplot2'

# structure of p at 2 levels of nesting
str(p, max.level = 2, size = FALSE)

# top level structure and size of p
str(p, max.level = 0)

# names of ggplot members
names(p)

# structure and size of p["data"]
str(p, max.level = 2, components = "data")

# structure and size of p["layers"]
str(p, max.level = 1, components = "layers")

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
