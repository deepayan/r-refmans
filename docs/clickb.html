<!DOCTYPE html><html><head><title>Help for package clickb</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {clickb}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#clickb-package'><p> Web Data Analysis by Bayesian Mixture of Markov Models</p></a></li>
<li><a href='#fit_mixmar'><p>Bayesian estimation for mixture of Markov models with fixed number of components</p></a></li>
<li><a href='#sim_seq'><p>Simulate data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Web Data Analysis by Bayesian Mixture of Markov Models</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Designed for web usage data analysis, it implements tools to process web sequences and identify web browsing profiles through sequential classification. Sequences' clusters are identified by using a model-based approach, specifically mixture of discrete time first-order Markov models for categorical web sequences. A Bayesian approach is used to estimate model parameters and identify sequences classification as proposed by Fruehwirth-Schnatter and Pamminger (2010) &lt;<a href="https://doi.org/10.1214%2F10-BA606">doi:10.1214/10-BA606</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Imports:</td>
<td>DiscreteWeibull, mclust, MCMCpack, parallel</td>
</tr>
<tr>
<td>Suggests:</td>
<td>seqHMM</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-02-11 14:19:32 UTC; furio</td>
</tr>
<tr>
<td>Author:</td>
<td>Furio Urso [aut, cre],
  Reza Mohammadi [aut],
  Antonino Abbruzzo [aut],
  Maria Francesca Cracolici [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Furio Urso &lt;furio.urso@unipa.it&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-02-13 09:20:10 UTC</td>
</tr>
</table>
<hr>
<h2 id='clickb-package'> Web Data Analysis by Bayesian Mixture of Markov Models </h2><span id='topic+clickb-package'></span><span id='topic+Danon_sim_index'></span><span id='topic+marloglik.contr'></span><span id='topic+numtransitions'></span><span id='topic+rdweibt'></span><span id='topic+splitdatalist'></span>

<h3>Description</h3>

<p>The <code>R</code> package <span class="pkg">clickb</span> is for web sequences analysis and classification.
One way to identify users' activity stages is relying on sequential data analysis, that aims to discover statistically relevant temporal structure 
where the values are delivered in sequences. 
In model-based clustering approach, longitudinal data are analysed and a model is trained to understand the underlying process generating the sequences.
Markov processes assume sequences having a parametric distribution and depend on each sequence elements conditional probability of occurrence while
satisfy the Markov property. In other words, these models allow to analyse patterns taking into account the probabilistic aspect of subjects movements
in the sequence by considering the possible realization of a categorical variable as states of the Markov chain. 
Furthermore, We can use their extension to mixture of first-order Markov models to identify clusters of sequences generated by the same Markov model
representing subpopulations in the data. Each subpopulation has its Markov model so that they may differ for the initial, transition or a combination.
In clickstream data context, these differences mean that sequences belonging to the same cluster describe different browsing behaviour, as they display
different preferences in starting the web path from a specific pages or to what web pages will be accessed in the next steps of the website exploration.
Parameter estimation can be obtained through the Expectation-Maximization algorithm (Baum et al., 1970) as used by Cadez et al. (2003) in clickstream
analysis context. However, we will use a Bayesian approach based on MCMC sampler considering Dirichlet priors for transition matrices rows as proposed by Fruehwirth-Schnatter and Pamminger (2010). 
This approach overcome a limitation of the EM algorithm that may struggle during the M-step if there are no transitions between two states.
The package contains suitable tools to estimate parameters in mixture of first-order time-discrete Markov models for categorical response in a Bayesian 
framework, identifying clusters of sequences under the assumption that number of mixture components is considered fixed. The algorithm is based on Gibbs
sampler moves and at each iteration assign web sequences in the new clusters based on a posterior probability. If simulated data are used or a previous
classification is available, the algorithm compare the original cluster labels and the new ones through the Danon similarity index (Danon et al., 2005).
</p>


<h3>Author(s)</h3>

<p>Furio Urso <a href="mailto:furio.urso@unipa.it">furio.urso@unipa.it</a>, <br /> 
Reza Mohammadi <a href="mailto:a.mohammadi@uva.nl">a.mohammadi@uva.nl</a>, <br />
Antonino Abbruzzo <a href="mailto:antonino.abbruzzo@unipa.it">antonino.abbruzzo@unipa.it</a>, <br />
Maria Francesca Cracolici <a href="mailto:mariafrancesca.cracolici@unipa.it">mariafrancesca.cracolici@unipa.it</a> 
</p>


<h3>References</h3>

<p>Baum LE, Petrie T, Soules G, Weiss N (1970) A maximization technique occurring in the statistical analysis of probabilistic functions of markov chains.
<em>The annals of mathematical statistics</em> <b> 41(1)</b>, 164&ndash;171
</p>
<p>Cadez I, Heckerman D, Meek C, Smyth P, White S (2003) Model-based clustering and visualization of navigation patterns on a web site. <em>Data mining
and knowledge discovery</em> 7(4), 399&ndash;424
</p>
<p>Danon L, Diaz-Guilera A, Duch J, Arenas A (2005) Comparing community structure identification. <em>Journal of statistical mechanics: Theory and
experiment</em> <b> 2005(09)</b>, P09008
</p>
<p>Fruehwirth-Schnatter S, Pamminger C (2010) Model-based clustering of categorical time series. <em>Bayesian Analysis</em> <b>5(2)</b>, 345&ndash;368
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generate a sequential dataset from a mixture of Markov models 
M &lt;- 3    # number of components
K &lt;- 6    # number of states
# define initial and transition probabilities for each component
ini1&lt;-c(0.15,0.4,0.2, 0.15, 0,0.1)
A1&lt;-matrix(c(0,0.45,0.1,0.15,0.15,0.15,
             0.1,0,0.15,0.15,0.1,0.5,
             0.25,0.2,0,0.2,0.15,0.2,
             0.15,0.2,0.05,0,0.4,0.2,
             0.15,0.05,0.45,0.15,0,0.2,
             0.4,0.15,0.2,0.05,0.2,0),byrow=TRUE,nrow=6)

ini2&lt;-c(0.3,0.2,0.25, 0.15, 0, 0.1)
A2&lt;-matrix(c(0,0.8,0,0,0,0.2,
             0.2,0,0.8,0,0,0,
             0,0.2,0,0.8,0,0,
             0,0,0.2,0,0.8,0,
             0,0,0,0.2,0,0.8,
             0.8,0,0,0,0.2,0),byrow=TRUE,nrow=6)

ini3&lt;-c(0.2,0.1,0.2, 0.1, 0, 0.4)
A3&lt;-matrix(c(0,0.1,0,0,0,0.9,
             0.8,0,0.15,0.05,0,0,
             0,0.9,0,0.1,0,0,
             0.05,0.05,0.8,0,0,0.1,
             0,0,0.05,0.9,0,0.05,
             0.05,0.05,0,0,0.9,0),byrow=TRUE,nrow=6)

trans.prob &lt;- list(A1, A2, A3)
ini.prob &lt;- list(ini1, ini2, ini3)

# sizes i.e. number of sequences in each component
N.sim1&lt;-20
N.sim2&lt;-30
N.sim3&lt;-50

clust.size &lt;- list(N.sim1, N.sim2, N.sim3)

T.range &lt;- c(5, 30)  # sequences minimum length and maximum length

data&lt;- sim_seq( M, K, ini.prob, trans.prob, clust.size, T.range)

### Estimate model parameters and identify cluster of sequences

# Set up initial values and hyper parameters (either fixed or random)

iter&lt;-5   # number of iterations for the Gibbs sampler
burn&lt;-0

num.cluster &lt;- 3 # number of components
states &lt;- 6 # number of states

ini.constr&lt;-c(1, 1, 1, 1, 0, 1)           # constrains on initial probabilities
trans.constr&lt;-matrix(c(0,1,1,1,1,1,       # constrains on transition probabilities
             1,0,1,1,1,1, 
             1,1,0,1,1,1, 
             1,1,1,0,1,1, 
             1,1,1,1,0,1, 
             1,1,1,1,1,0),byrow=TRUE,nrow=6) 

# parameters initial values
A.ini &lt;- 1/states*matrix(rep(1, length = (states^2)), 
                         nrow = states, byrow = TRUE, 
                         dimnames = list(as.character(c(1:states))) )
pi.ini &lt;- rep(1/states, length = states)

# Prior distributions' hyperparameters
prior.ini&lt;- prior.transrow &lt;- prior.mixcoef &lt;- 1  

# Run the MCMC to estimate parameters 
MMM_1 &lt;- fit_mixmar(data, iter, burn, num.cluster = num.cluster, states = states,
                     A.ini = A.ini, pi.ini = pi.ini, prior.ini = prior.ini, 
                     prior.transrow = prior.transrow, prior.mixcoef = prior.mixcoef, 
                     ini.constr = ini.constr, trans.constr = trans.constr)
                     
str(MMM_1$pi.list)            #Initial Markov chain probabilities for MCMC
str(MMM_1$A.list)             #Transition Markov chain probabilities for MCMC
str(MMM_1$Sim.index.Danon)    #Danon similarity between two partitions  
str(MMM_1$Sim.index.Rand)     #Rand similarity between two partitions 
MMM_1$Conf.mat                # Confusion matrix between two partitions 

</code></pre>

<hr>
<h2 id='fit_mixmar'>Bayesian estimation for mixture of Markov models with fixed number of components</h2><span id='topic+fit_mixmar'></span>

<h3>Description</h3>

<p>The function use a sampling algorithm for estimating bayesian mixture of Markov models with fixed number of components. If simulated data are used, quality of classification is assessed comparing the original partition of the sequences with the one identified by the algorithm through Danon similarity and adjusted Rand indices. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fit_mixmar(
  data,
  iter = 1000,
  burn = 500,
  num.cluster,
  states,
  A.ini = NULL,
  pi.ini = NULL,
  prior.ini = 1,
  prior.transrow = 1,
  prior.mixcoef = 1,
  ini.constr = NULL,
  trans.constr = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fit_mixmar_+3A_data">data</code></td>
<td>
<p>are dataset containing a variable for categorical observations and an ID variable to identify subjects. No missing values allowed</p>
</td></tr>
<tr><td><code id="fit_mixmar_+3A_iter">iter</code></td>
<td>
<p>is the number of iterations</p>
</td></tr>
<tr><td><code id="fit_mixmar_+3A_burn">burn</code></td>
<td>
<p>is the number of burn-in iterations</p>
</td></tr>
<tr><td><code id="fit_mixmar_+3A_num.cluster">num.cluster</code></td>
<td>
<p>is the number of clusters</p>
</td></tr>
<tr><td><code id="fit_mixmar_+3A_states">states</code></td>
<td>
<p>is the number of states of the Markov chain</p>
</td></tr>
<tr><td><code id="fit_mixmar_+3A_a.ini">A.ini</code></td>
<td>
<p>is the list of initial values for the transition matrices</p>
</td></tr>
<tr><td><code id="fit_mixmar_+3A_pi.ini">pi.ini</code></td>
<td>
<p>is the list of initial values for the initial probability vectors</p>
</td></tr>
<tr><td><code id="fit_mixmar_+3A_prior.ini">prior.ini</code></td>
<td>
<p>is the hyperparameter for the prior distribution of initial probability vector (Dirichlet)</p>
</td></tr>
<tr><td><code id="fit_mixmar_+3A_prior.transrow">prior.transrow</code></td>
<td>
<p>is the hyperparameter for the prior distribution of transition matrices rows (Dirichlet)</p>
</td></tr>
<tr><td><code id="fit_mixmar_+3A_prior.mixcoef">prior.mixcoef</code></td>
<td>
<p>is the hyperparameter for the prior distribution of mixture coefficients (Dirichlet)</p>
</td></tr>
<tr><td><code id="fit_mixmar_+3A_ini.constr">ini.constr</code></td>
<td>
<p>is the vector of zeros and ones indicating constrains in initial probabilities (zero: not possible to start from that state)</p>
</td></tr>
<tr><td><code id="fit_mixmar_+3A_trans.constr">trans.constr</code></td>
<td>
<p>is the matrix of zeros and ones indicating constrains in transition probabilities (zero: transition is not allowed)</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>pi.list</code></td>
<td>
<p>Initial Markov chain probabilities for MCMC</p>
</td></tr>
<tr><td><code>A.list</code></td>
<td>
<p>Transition Markov chain probabilities for MCMC</p>
</td></tr>
<tr><td><code>Sim.index.Danon</code></td>
<td>
<p>Danon similarity between two partitions</p>
</td></tr>
<tr><td><code>Sim.index.Rand</code></td>
<td>
<p>Rand similarity between two partitions</p>
</td></tr>
<tr><td><code>Conf.mat</code></td>
<td>
<p>Confusion matrix between two partitions</p>
</td></tr> 
</table>


<h3>Author(s)</h3>

<p> Furio Urso <a href="mailto:furio.urso@unipa.it">furio.urso@unipa.it</a> </p>


<h3>Examples</h3>

<pre><code class='language-R'>
#Compare model-based clustering with respect to another classification

# Set up initial values and hyper parameters (either fixed or random)

iter&lt;-5   # number of iterations for the Gibbs sampler
burn&lt;-0

num.cluster &lt;- 3 # number of components
states &lt;- 5 # number of states

ini.constr&lt;-c(1, 0, 1, 1, 1)           # constrains on initial probabilities               
trans.constr&lt;-matrix(c(1, 1, 1, 0, 1,  # constrains on transition probabilities                   
             1, 0, 1, 1, 1,                                  
             1, 1, 1, 1, 0,                                 
             0, 1, 1, 1, 1,                                 
             1, 1, 0, 1, 1),byrow=TRUE,nrow=5) 

# parameters initial values
A.ini &lt;- 1/states*matrix(rep(1, length = (states^2)), 
                         nrow = states, byrow = TRUE, 
                         dimnames = list(as.character(c(1:states))) )
pi.ini &lt;- rep(1/states, length = states)

# Prior distributions' hyperparameters
prior.ini&lt;- prior.transrow &lt;- prior.mixcoef &lt;- 1  

# data is the simulated sequential dataset obtained in the sim_seq() example

# Run the MCMC to estimate parameters 
MMM_1 &lt;- fit_mixmar(data, iter, burn, num.cluster = num.cluster, states = states,
                     A.ini = A.ini, pi.ini = pi.ini, prior.ini = prior.ini, 
                     prior.transrow = prior.transrow, prior.mixcoef = prior.mixcoef, 
                     ini.constr = ini.constr, trans.constr = trans.constr)

 
</code></pre>

<hr>
<h2 id='sim_seq'>Simulate data</h2><span id='topic+sim_seq'></span>

<h3>Description</h3>

<p>This function simulate a sequential dataset from a mixture of first-order Markov models generating categorical sequences. The output is a dataframe, columns are &quot;id&quot; to identify a subject/sequence, &quot;y&quot; to identify a categorical observation related to the sequence and &quot;clus&quot; the cluster label.    
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sim_seq(M, K, ini.prob, trans.prob, clust.size, T.range)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sim_seq_+3A_m">M</code></td>
<td>
<p>is the number of components</p>
</td></tr>
<tr><td><code id="sim_seq_+3A_k">K</code></td>
<td>
<p>is the number of Markov model states</p>
</td></tr>
<tr><td><code id="sim_seq_+3A_ini.prob">ini.prob</code></td>
<td>
<p>is a list of initial probability vectors for each component</p>
</td></tr>
<tr><td><code id="sim_seq_+3A_trans.prob">trans.prob</code></td>
<td>
<p>is a list of transition matrices for each component</p>
</td></tr>
<tr><td><code id="sim_seq_+3A_clust.size">clust.size</code></td>
<td>
<p>is a list of components' sizes</p>
</td></tr>
<tr><td><code id="sim_seq_+3A_t.range">T.range</code></td>
<td>
<p>is a vector of two elements: minimum and maximum sequence length</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class data.frame</p>


<h3>Author(s)</h3>

<p> Furio Urso <a href="mailto:furio.urso@unipa.it">furio.urso@unipa.it</a> </p>


<h3>Examples</h3>

<pre><code class='language-R'># Simulate dataset from a mixture of Markov models 
M &lt;- 3    # number of components
K &lt;- 5    # number of states
# define initial and transition probabilities for each component
ini1&lt;-c(0.35, 0, 0.3, 0.2, 0.15) 
A1&lt;-matrix(c(0.15, 0.1, 0.5, 0, 0.25,     
             0.2, 0, 0.1, 0.2, 0.5,       
             0.6, 0.1, 0.1, 0.2, 0,       
             0, 0.45, 0.35, 0.1, 0.1,       
             0.15, 0.25, 0, 0.1, 0.5),byrow=TRUE,nrow=5) 

ini2&lt;-c(0.25, 0, 0.2, 0.25, 0.3)
A2&lt;-matrix(c(0,0.8,0,0,0.2,         
             0.2,0,0.8,0,0,         
             0,0.2,0,0.8,0,         
             0,0,0.2,0,0.8,          
             0.8,0,0,0.2,0),byrow=TRUE,nrow=5) 

ini3&lt;-c(0.3, 0, 0.25, 0.3, 0.15)
A3&lt;-matrix(c(0,0.1,0.2,0,0.7,          
             0.7,0,0.2,0.1,0,         
             0.1,0.8,0,0.1,0,           
             0,0.1,0.7,0,0.2,                
             0.2,0,0,0.8,0),byrow=TRUE,nrow=5) 

trans.prob &lt;- list(A1, A2, A3)
ini.prob &lt;- list(ini1, ini2, ini3)

# sizes i.e. number of sequences in each component
N.sim1&lt;-20
N.sim2&lt;-30
N.sim3&lt;-50

clust.size &lt;- list(N.sim1, N.sim2, N.sim3)

T.range &lt;- c(5, 30)  # sequences minimum length and maximum length

data&lt;- sim_seq( M, K, ini.prob, trans.prob, clust.size, T.range)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
