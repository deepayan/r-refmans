<!DOCTYPE html><html lang="en"><head><title>Help for package OSTE</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {OSTE}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#OSTE-package'>
<p>Optimal Survival Trees Ensembles</p></a></li>
<li><a href='#OSTE'><p>Optimal Survival Tree Ensemble</p></a></li>
<li><a href='#VETERAN'><p>Data on randomized trial of two treatment procedures for lung cancer.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Optimal Survival Trees Ensemble</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-11-07</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Naz Gul &lt;nazgul@awkum.edu.pk&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Function for growing survival trees ensemble ('Naz Gul', 'Nosheen Faiz', 'Dan Brawn', 'Rafal Kulakowski', 'Zardad Khan', and 'Berthold Lausen' (2020) &lt;<a href="https://doi.org/10.48550/arXiv.2005.09043">doi:10.48550/arXiv.2005.09043</a>&gt;) is given. 
             The trees are grown by the method of random survival forest ('Marvin Wright', 'Andreas Ziegler' (2017) &lt;<a href="https://doi.org/10.18637%2Fjss.v077.i01">doi:10.18637/jss.v077.i01</a>&gt;). 
             The survival trees grown are assessed for both individual and collective performances. 
             The ensemble can give promising results on fewer survival trees selected in the final ensemble.</td>
</tr>
<tr>
<td>Imports:</td>
<td>ranger, pec, stats, survival, prodlim</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>License:</td>
<td></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-11-19 06:34:26 UTC; ZKHAN</td>
</tr>
<tr>
<td>Author:</td>
<td>Naz Gul [aut, cre],
  Nosheen Faiz [ctb],
  Zardad Khan [aut],
  Berthold Lausen [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-11-19 14:50:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='OSTE-package'>
Optimal Survival Trees Ensembles</h2><span id='topic+OSTE-package'></span>

<h3>Description</h3>

<p>This package consists of function for growing survival trees ensemble, that are grown by the method of random survival forest. The survival trees grown are assessed for both individual and collective performances. The ensemble can give promising results on fewer survival trees selected based on their individual and collective performance in the final ensemble.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> OSTE</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 1.0</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2021-11-07</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL (&gt;= 3.5.0)</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p> Naz Gul, Nosheen Faiz, Zardad Khan and Berthold Lausen.
</p>
<p>Maintainer: Naz Gul &lt;nazgul@awkum.edu.pk&gt;
</p>


<h3>References</h3>

<p>Gul, N., Faiz, N., Brawn, D., Kulakowski, R., Khan, Z., &amp; Lausen, B. (2020). Optimal survival trees ensemble. arXiv preprint arXiv:2005.09043.
</p>

<hr>
<h2 id='OSTE'>Optimal Survival Tree Ensemble
</h2><span id='topic+OSTE'></span>

<h3>Description</h3>

<p>Optimal survival trees ensemble is the main function of <code>OSTE</code> package that grows a sufficiently large number, <code>t.initial</code>, of  survival trees and selects optimal survival trees from the total trees grown by random survival forest. Number of survival trees in the initial set, <code>t.initial</code>, is chosen by the user. If not chosen, then the default <code>t.initial = 500</code> is used. Based on empirical investigation, <code>t.initial =1000</code> is recommended.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>OSTE(formula = NULL, data, t.initial = NULL, v.size = NULL, mtry = NULL, M = NULL,
minimum.node.size = NULL, always.split.features = NULL, replace = TRUE,
splitting.rule = NULL, info = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="OSTE_+3A_formula">formula</code></td>
<td>
<p> Object of class formula describing the required model to be fitted. Interaction terms are not supported in the current version.
</p>
</td></tr>
<tr><td><code id="OSTE_+3A_data">data</code></td>
<td>
<p>A  <code> nxd </code> matrix or data frame of <code>n</code> observations on <code>d</code> features along with response variables that are described by the <code>formula</code>.
</p>
</td></tr>
<tr><td><code id="OSTE_+3A_t.initial">t.initial</code></td>
<td>
<p> Number of survival trees to be grown initially. If equal to <code>NULL</code> then the defalut of <code>t.initial = 500</code> is taken. A recommended value is <code>t.initial = 1000</code>.
</p>
</td></tr>
<tr><td><code id="OSTE_+3A_v.size">v.size</code></td>
<td>
<p>Portion of data used for validation in the second phase i.e. for assessing survival trees performance in the ensemble. If equal to <code>NULL</code> then the defalut <code>v.size=0.1</code>
</p>
</td></tr>
<tr><td><code id="OSTE_+3A_mtry">mtry</code></td>
<td>
<p>Number of features selected at random at each node of the survival trees for splitting. If equal to <code>NULL</code> then the default <code>sqrt(d)</code> is taken.
</p>
</td></tr>
<tr><td><code id="OSTE_+3A_m">M</code></td>
<td>
<p>Percent of the best <code>t.initial</code> survival trees to be selected on the basis of their performance on out-of-bag observations. For selecting 20% of trees, take <code>M=0.2</code>.
</p>
</td></tr>
<tr><td><code id="OSTE_+3A_minimum.node.size">minimum.node.size</code></td>
<td>
<p>Minimal node size. If equal to <code>NULL</code> then the default <code>minimum.node.size = 3</code> is executed.
</p>
</td></tr>
<tr><td><code id="OSTE_+3A_always.split.features">always.split.features</code></td>
<td>
<p>Vector of variable names if desired to be always selected in addition to the mtry variables tried for splitting.
</p>
</td></tr>
<tr><td><code id="OSTE_+3A_replace">replace</code></td>
<td>
<p>Whether sampling should be done with or without replacement.
</p>
</td></tr>
<tr><td><code id="OSTE_+3A_splitting.rule">splitting.rule</code></td>
<td>
<p>Splitting rule.&quot;<code>logrank</code>&quot;, &quot;<code>C</code>&quot; or &quot;<code>maxstat</code>&quot; are suported with default &quot;<code>logrank</code>&quot;.
</p>
</td></tr>
<tr><td><code id="OSTE_+3A_info">info</code></td>
<td>
<p>If <code>TRUE</code>, displays process status .
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Large values are recommended for <code>t.initial</code> for better performance as possible under the available computational resources. The log-rank test statistic is used as defalut,
A C-index based splitting rule (Schmid et al. 2015) and maximally selected rank statistics  (Wright et al. 2016) are available. The C-index shows better predictive performance in case of high censoring rate, where logrank is best for situations where the data are noisy (Schmid et al. 2015).
</p>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>unique.death.times</code></td>
<td>
<p> Unique death times.</p>
</td></tr>
<tr><td><code>CHF</code></td>
<td>
<p> Estimated cumulative hazard function for each observation.</p>
</td></tr>
<tr><td><code>Survival_Prob</code></td>
<td>
<p> Estimated survival probability for each observation.</p>
</td></tr>
<tr><td><code>trees_selected</code></td>
<td>
<p> Number of trees selected.</p>
</td></tr>
<tr><td><code>mtry</code></td>
<td>
<p> Value of mtry used.</p>
</td></tr>
<tr><td><code>forest</code></td>
<td>
<p> Saved forest for prediction purposes.</p>
</td></tr>
</table>


<h3>Note</h3>

<p> In the case of missing values in any dataset prior action needs to be taken as the fuction can not handle them at the current version. Moreover, the status/delta variable in the data must be code as 0, 1.
</p>


<h3>Author(s)</h3>

<p>Naz Gul, Nosheen Faiz, Zardad Khan and Berthold Lausen.
</p>


<h3>References</h3>

<p> Marvin N. Wright, Andreas Ziegler (2017). ranger: A Fast Implementation of Random
Forests for High Dimensional Data in C++ and R. Journal of Statistical Software,
77(1), 1-17. doi:10.18637/jss.v077.i01
</p>
<p>Terry Therneau, Beth Atkinson and Brian Ripley (2015) rpart: Recursive Partitioning
and Regression Trees. R package version 4.1-10.
https://CRAN.R-project.org/package=rpart
</p>
<p>Ulla B. Mogensen, Hemant Ishwaran, Thomas A. Gerds (2012). Evaluating Random Forests
for Survival Analysis Using Prediction Error Curves. Journal of Statistical Software,
50(11), 1-23. URL http://www.jstatsoft.org/v50/i11/.
</p>
<p>Schmid, M., Wright, M. N. &amp; Ziegler, A. (2016). On the use of Harrell's C for clinical risk
prediction via random survival forests. Expert Syst Appl 63:450-459.
http://dx.doi.org/10.1016/j.eswa.2016.07.018.
</p>
<p>Wright,  M. N.,  Dankowski,  T. &amp; Ziegler,  A. (2017). Unbiased split variable selection for random survival forests using maximally selected rank statistics. Stat Med.
http://dx.doi.org/10.1002/sim.7212.
</p>
<p>Zardad Khan, Asma Gul, Aris Perperoglou, Osama Mahmoud, Werner Adler, Miftahuddin and
Berthold Lausen (2015). OTE: Optimal Trees Ensembles for Regression, Classification
and Class Membership Probability Estimation. R package version 1.0.
https://CRAN.R-project.org/package=OTE
</p>
<p>Gul, N., Faiz, N., Brawn, D., Kulakowski, R., Khan, Z., &amp; Lausen, B. (2020). Optimal survival trees ensemble. arXiv preprint arXiv:2005.09043.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+VETERAN">VETERAN</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#Load the data
data(VETERAN)
library(survival)
library(prodlim)
library(ranger)
library(pec)
#Divide the data into training and test parts



 predictSurvProb.ranger &lt;- function (object, newdata, times, ...) {

    ptemp &lt;- ranger:::predict.ranger(object, data = newdata, importance = "none")$survival
    pos &lt;- sindex(jump.times = object$unique.death.times,
                           eval.times = times)
    p &lt;- cbind(1, ptemp)[, pos + 1, drop = FALSE]
    if (NROW(p) != NROW(newdata) || NCOL(p) != length(times))
      stop(paste("\nPrediction matrix has wrong dimensions:\nRequested newdata x times: ",
                 NROW(dts[trainind,]), " x ", length(1), "\nProvided prediction matrix: ",
                 NROW(p), " x ", NCOL(p), "\n\n", sep = ""))
    p
  }

n &lt;- nrow(VETERAN)
trainind &lt;- sample(1:n,n*0.7)
testind &lt;- (1:n)[-trainind]

# Grow OSTE on the training data

OSTE.fit &lt;- OSTE(Surv(time,status)~.,data=VETERAN[trainind,],t.initial=100)

# Predict on the test data

pred &lt;- ranger:::predict.ranger(OSTE.fit$forest,data=VETERAN[testind,])

# Index various values

pred$survival
pred$survival

#etc.

# To calculate IBS
# Create formula
frm &lt;- as.formula(Surv(time, status) ~ trt + celltype + karno + diagtime + age + prior)

PredError &lt;- pec(object=OSTE.fit$forest, exact==TRUE,
                   formula = frm, cens.model="marginal",
                   data=VETERAN[testind,], verbose=F)
IBS &lt;- crps(object = PredError, times =100, start = PredError$start)[2,1]
IBS
</code></pre>

<hr>
<h2 id='VETERAN'>Data on randomized trial of two treatment procedures for lung cancer.
</h2><span id='topic+VETERAN'></span>

<h3>Description</h3>

<p>The data set consist of a total 137 observations on 8 variables. The variables consist of the type of lung cancer treatment i.e 1 (standard) and 2 (test drug), cell Type, Status, that denotes the status of the patient as 1 (dead) or 0 (alive), survival time in days since the treatment, Diag, the time since diagnosis in months, age in years, the Karnofsky score, therapy that denotes any prior therapy 0 (none), 1 (yes).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("VETERAN")</code></pre>


<h3>Format</h3>

<p>A data frame with 137 observations on the following 8 variables.
</p>

<dl>
<dt><code>trt</code></dt><dd><p> a numeric vector denoting type of lung cancer treatment i.e 1 (standard) and 2 (test drug).</p>
</dd>
<dt><code>celltype</code></dt><dd><p> a factor with levels <code>squamous</code>, <code>smallcell</code>, <code>adeno</code> and <code>large</code>.</p>
</dd>
<dt><code>time</code></dt><dd><p> a numeric vector denoting survival time in days since the treatment.</p>
</dd>
<dt><code>status</code></dt><dd><p> a numeric vector that denotes the status of the patient as 1 (dead) or 0 (alive).</p>
</dd>
<dt><code>karno</code></dt><dd><p> a numeric vector denoting the Karnofsky score.</p>
</dd>
<dt><code>diagtime</code></dt><dd><p> a numeric vector denoting the time since diagnosis in months.</p>
</dd>
<dt><code>age</code></dt><dd><p> age in years.</p>
</dd>
<dt><code>prior</code></dt><dd><p> a numeric vector denoting prior therapy; 0 (none), 1 (yes).</p>
</dd>
</dl>



<h3>References</h3>

<p>Therneau T (2015). A Package for Survival Analysis in S. version 2.38, &lt;URL:
https://CRAN.R-project.org/package=survival&gt;.
</p>
<p>Terry M. Therneau and Patricia M. Grambsch (2000). Modeling Survival Data: Extending the
Cox Model. Springer, New York. ISBN 0-387-98784-3
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#To load the data
data(VETERAN)
# To see the structure
str(VETERAN) 
#etc.
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
