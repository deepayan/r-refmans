<!DOCTYPE html><html><head><title>Help for package animation</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {animation}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ani.options'><p>Set or query animation options</p></a></li>
<li><a href='#ani.pause'><p>Pause for a while and flush the current graphical device</p></a></li>
<li><a href='#ani.record'><p>Record and replay animations</p></a></li>
<li><a href='#ani.start'><p>Generate an HTML animation page</p></a></li>
<li><a href='#animation-package'><p>A Gallery of Animations in Statistics and Utilities to Create Animations</p></a></li>
<li><a href='#bisection.method'><p>Demonstration of the Bisection Method for root-finding on an interval</p></a></li>
<li><a href='#BM.circle'><p>Brownian Motion in a circle</p></a></li>
<li><a href='#boot.iid'><p>Demonstrate bootstrapping for iid data</p></a></li>
<li><a href='#boot.lowess'><p>Bootstrapping with LOWESS</p></a></li>
<li><a href='#brownian.motion'><p>Demonstration of Brownian motion on the 2D plane</p></a></li>
<li><a href='#buffon.needle'><p>Simulation of Buffon's Needle</p></a></li>
<li><a href='#CLELAL09'><p>The NBA game between CLE Cavaliers and LAL Lakers on Dec 25, 2009</p></a></li>
<li><a href='#clt.ani'><p>Demonstration of the Central Limit Theorem</p></a></li>
<li><a href='#conf.int'><p>Demonstration of the concept of confidence intervals</p></a></li>
<li><a href='#cv.ani'><p>Demonstration for the process of cross-validation</p></a></li>
<li><a href='#cv.nfeaturesLDA'><p>Cross-validation to find the optimum number of features (variables) in LDA</p></a></li>
<li><a href='#ecol.death.sim'><p>A simulation of the death of two species with certain probabilities</p></a></li>
<li><a href='#flip.coin'><p>Probability in flipping coins</p></a></li>
<li><a href='#g.brownian.motion'><p>Brownian Motion using Google Visualization API</p></a></li>
<li><a href='#grad.desc'><p>Gradient Descent Algorithm for the 2D case</p></a></li>
<li><a href='#HuSpeech'><p>Word counts of a speech by the Chinese President Hu</p></a></li>
<li><a href='#iatemp'><p>Average yearly temperatures in central Iowa</p></a></li>
<li><a href='#im.convert'><p>A wrapper for the &lsquo;convert&rsquo; utility of ImageMagick or GraphicsMagick</p></a></li>
<li><a href='#kfcv'><p>Sample sizes for k-fold cross-validation</p></a></li>
<li><a href='#kmeans.ani'><p>Demonstration of the k-Means clustering algorithm</p></a></li>
<li><a href='#knn.ani'><p>Demonstration of the k-Nearest Neighbour classification</p></a></li>
<li><a href='#least.squares'><p>Demonstrate the least squares method</p></a></li>
<li><a href='#lln.ani'><p>Demonstration of Law of Large Numbers</p></a></li>
<li><a href='#MC.hitormiss'><p>Hit or Miss Monte Carlo integration</p></a></li>
<li><a href='#MC.samplemean'><p>Sample Mean Monte Carlo integration</p></a></li>
<li><a href='#moving.block'><p>Cycle through an R object and plot each subset of elements</p></a></li>
<li><a href='#mwar.ani'><p>Demonstration for &ldquo;Moving Window Auto-Regression&rdquo;</p></a></li>
<li><a href='#newton.method'><p>Demonstration of the Newton-Raphson method for root-finding</p></a></li>
<li><a href='#ObamaSpeech'><p>Word counts of a speech by the US President Obama</p></a></li>
<li><a href='#pageview'><p>Page views from Sep 21, 2007 to Dec 2, 2007 of Yihui's website</p></a></li>
<li><a href='#pdftk'><p>A wrapper for the PDF toolkit Pdftk</p></a></li>
<li><a href='#pollen'><p>Synthetic dataset about the geometric features of pollen grains</p></a></li>
<li><a href='#price.ani'><p>Demonstrate stock prices in animations</p></a></li>
<li><a href='#qpdf'><p>A wrapper for the PDF toolkit qpdf</p></a></li>
<li><a href='#quincunx'><p>Demonstration of the Quincunx (Bean Machine/Galton Box)</p></a></li>
<li><a href='#Rosling.bubbles'><p>The bubbles animation in Hans Rosling's Talk</p></a></li>
<li><a href='#sample.cluster'><p>Demonstration for the cluster sampling</p></a></li>
<li><a href='#sample.ratio'><p>Demonstrate the ratio estimation in sampling survey</p></a></li>
<li><a href='#sample.simple'><p>Demonstration for simple random sampling without replacement</p></a></li>
<li><a href='#sample.strat'><p>Demonstration for the stratified sampling</p></a></li>
<li><a href='#sample.system'><p>Demonstration for the systematic sampling</p></a></li>
<li><a href='#saveGIF'><p>Convert images to a single animation file (typically GIF) using ImageMagick</p>
or GraphicsMagick</a></li>
<li><a href='#saveHTML'><p>Insert animations into an HTML page</p></a></li>
<li><a href='#saveLatex'><p>Insert animations into a LaTeX document and compile it</p></a></li>
<li><a href='#saveSWF'><p>Convert images to Flash animations</p></a></li>
<li><a href='#saveVideo'><p>Convert a sequence of images to a video by FFmpeg</p></a></li>
<li><a href='#sim.qqnorm'><p>Simulation of QQ plots for the Normal distribution</p></a></li>
<li><a href='#vanke1127'><p>Stock prices of Vanke Co., Ltd on 2009/11/27</p></a></li>
<li><a href='#vi.grid.illusion'><p>Visual illusions: Scintillating grid illusion and Hermann grid illusion</p></a></li>
<li><a href='#vi.lilac.chaser'><p>Visual Illusions: Lilac Chaser</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>A Gallery of Animations in Statistics and Utilities to Create
Animations</td>
</tr>
<tr>
<td>Version:</td>
<td>2.7</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides functions for animations in statistics, covering topics
    in probability theory, mathematical statistics, multivariate statistics,
    non-parametric statistics, sampling survey, linear models, time series,
    computational statistics, data mining and machine learning. These functions
    may be helpful in teaching statistics and data analysis. Also provided in this
    package are a series of functions to save animations to various formats, e.g.
    Flash, 'GIF', HTML pages, 'PDF' and videos. 'PDF' animations can be inserted
    into 'Sweave' / 'knitr' easily.</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>ImageMagick (http://imagemagick.org) or
GraphicsMagick (http://www.graphicsmagick.org) or LyX
(http://www.lyx.org) for saveGIF(); (PDF)LaTeX for saveLatex();
SWF Tools (http://swftools.org) for saveSWF(); FFmpeg
(http://ffmpeg.org) or avconv (https://libav.org/avconv.html)
for saveVideo()</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.14.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>magick</td>
</tr>
<tr>
<td>Suggests:</td>
<td>MASS, class, testit</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://yihui.org/animation/">https://yihui.org/animation/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/yihui/animation/issues">https://github.com/yihui/animation/issues</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>yes</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-10-06 16:17:28 UTC; yihui</td>
</tr>
<tr>
<td>Author:</td>
<td>Yihui Xie [aut, cre],
  Christian Mueller [ctb],
  Lijia Yu [ctb],
  Weicheng Zhu [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Yihui Xie &lt;xie@yihui.name&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-10-07 07:40:28 UTC</td>
</tr>
</table>
<hr>
<h2 id='ani.options'>Set or query animation options</h2><span id='topic+ani.options'></span>

<h3>Description</h3>

<p>There are various parameters that control the behaviour of the animation,
such as time interval, maximum number of animation frames, height and width,
etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ani.options(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ani.options_+3A_...">...</code></td>
<td>
<p>arguments in <code>tag = value</code> form, or a list of tagged values.
The tags usually come from the animation parameters described below, but
they are not restricted to these tags (any tag can be used; this is similar
to <code><a href="base.html#topic+options">options</a></code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>ani.options()</code> returns a list containing the options: when
parameters are set, their former values are returned in an invisible named
list.  Such a list can be passed as an argument to
<code><a href="#topic+ani.options">ani.options</a></code> to restore the parameter values.
</p>
<p><code>ani.options('tag')</code> returns the value of the option <code>'tag'</code>.
</p>
<p><code>ani.options(c('tag1', 'tag2'))</code> or <code>ani.options('tag1', 'tag2')</code>
returns a list containing the corresponding options.
</p>


<h3>Animation options</h3>

<p>The supported animation parameters: </p>

<dl>
<dt>interval</dt><dd><p> a positive number to set the time interval of the
animation (unit in seconds); default to be 1. </p>
</dd>
<dt>nmax</dt><dd><p> maximum number of steps in a loop (e.g. iterations) to create
animation frames. Note: the actual number of frames can be less than this
number, depending on specific animations. Default to be 50.</p>
</dd>
<dt>ani.width, ani.height</dt><dd><p> width and height of image frames (unit in
px); see graphics devices like <code><a href="grDevices.html#topic+png">png</a></code>, <code><a href="grDevices.html#topic+jpeg">jpeg</a></code>, ...;
default to be 480. NB: for different graphics devices, the units of these
values might be different, e.g. PDF devices usually use inches, whereas
bitmap devices often use pixels.</p>
</dd>
<dt>ani.res</dt><dd><p> The nominal resolution in ppi which will be recorded in the bitmap file,
if a positive integer. Also used for units other than the default,
and to convert points to pixels.;
see graphics devices like <code><a href="grDevices.html#topic+png">png</a></code>, <code><a href="grDevices.html#topic+jpeg">jpeg</a></code>.</p>
</dd>
<dt>imgnfmt</dt><dd><p> Customizing image number format in <code><a href="#topic+saveHTML">saveHTML</a></code>,
<code><a href="#topic+saveGIF">saveGIF</a></code>, <code><a href="#topic+saveLatex">saveLatex</a></code> and <code><a href="#topic+saveVideo">saveVideo</a></code>,
<code><a href="#topic+saveSWF">saveSWF</a></code> is not included,
it allows user to define the C-style string format for output image.
</p>
</dd>
<dt>imgdir</dt><dd><p>character: the name of the directory (a relative path) for
images when creating HTML animation pages; default to be <code>'images'</code>.</p>
</dd>
<dt>htmlfile</dt><dd><p>character: name of the target HTML main file (without path
name; basename only; default to be <code>'index.html'</code>)</p>
</dd>
<dt>ani.dev</dt><dd><p>a function or a function name: the graphics device; e.g.
(<code><a href="grDevices.html#topic+png">png</a></code>, <code><a href="grDevices.html#topic+pdf">pdf</a></code>, ...); default to be <code>'png'</code></p>
</dd>
<dt>ani.type</dt><dd><p>character: image format for animation frames, e.g.
<code>png</code>, <code>jpeg</code>, ...; default to be <code>'png'</code>; this will be used
as the file extension of images, so don't forget to change this option as
well when you changed the option <code>ani.dev</code></p>
</dd>
<dt>title, description</dt><dd><p>character: the title and description of the
animation in the HTML page created by <code><a href="#topic+saveHTML">saveHTML</a></code></p>
</dd>
<dt>verbose</dt><dd><p>logical: if <code>TRUE</code>, write a footer part
in the HTML page containing detailed technical information else
the footer of the page will be blank.</p>
</dd>
<dt>loop</dt><dd><p>logical or numeric: Number of times the GIF animation is to
cycle through the image sequence before stopping. By default, this is
set to zero or boolean value TRUE (infinite loop).</p>
</dd>
<dt>autobrowse</dt><dd><p>logical: whether auto-browse the animation page
immediately after it is created? (default to be <code>interactive()</code>)</p>
</dd>
<dt>autoplay</dt><dd><p>logical: whether to autoplay the animation when the HTML
page is loaded (default to be <code>TRUE</code>); only applicable to
<code><a href="#topic+saveHTML">saveHTML</a></code></p>
</dd>
<dt>use.dev</dt><dd><p> whether to use the graphics device specified in
<code>ani.options('ani.dev')</code> (default to be <code>TRUE</code>); if <code>FALSE</code>,
we need to generate image files by our own approaches in the expression
<code>expr</code> (see functions <code><a href="#topic+saveHTML">saveHTML</a></code>, <code><a href="#topic+saveGIF">saveGIF</a></code>,
<code><a href="#topic+saveLatex">saveLatex</a></code> and <code><a href="#topic+saveSWF">saveSWF</a></code>); this can be useful when
the output cannot be captured by standard R graphics devices &ndash; a typical
example is the <span class="pkg">rgl</span> graphics (we can use <code>rgl.snapshot</code> to
capture <span class="pkg">rgl</span> graphics to png files, or <code>rgl.postscript</code> to save
plots as postscript/pdf; see <code>demo('rgl_animation')</code> or
<code>demo('use_Cairo')</code> for examples or the last example below). Note,
however, we do not really have to create the images using R graphics
devices &ndash; see <code>demo('flowers')</code> on how to download images from the
Internet and create an HTML animation page!</p>
</dd>
</dl>



<h3>Hidden options</h3>

<p>There are a couple of &ldquo;hidden&rdquo; options which are
designed to facilitate the usage of some functions but are not initialized
like the above options when the package is loaded, including:
</p>

<dl>
<dt>convert</dt><dd><p>this option will be checked first when calling
<code><a href="#topic+im.convert">im.convert</a></code> (or <code><a href="#topic+saveGIF">saveGIF</a></code>) to see if it contains
the path to &lsquo;<span class="file">convert.exe</span>&rsquo;; we can specify it beforehand to save the
efforts in searching for &lsquo;<span class="file">convert.exe</span>&rsquo; in ImageMagick under Windows.
For example, <code>ani.options(convert = 'c:/program
  files/imagemagick/convert.exe')</code>; note this option also works for Mac and
Linux (see <code>help(im.convert)</code>)</p>
</dd>
<dt>swftools</dt><dd><p>this can help <code><a href="#topic+saveSWF">saveSWF</a></code> save the efforts of
searching for the software package &ldquo;SWF Tools&rdquo; under Windows; e.g. we can
specify <code>ani.options(swftools = 'c:/program files/swftools')</code> in
advance</p>
</dd>
<dt>img.fmt</dt><dd><p>the value of this option can be used to determine the image
filename format when we want to use custom graphics devices to record
images, e.g. in <code><a href="#topic+saveLatex">saveLatex</a></code>, if <code>ani.options('use.dev') ==
  FALSE</code>, then <code>ani.options('img.fmt')</code> will be a string like
<code>'path/to/output/img.name%d.png'</code>, so we can use it to generate file
names in the argument <code>expr</code>; see <code>demo('rgl_animation')</code> for
example or the last example below</p>
</dd>
<dt>qpdf</dt><dd><p>the path of the program <code>qpdf</code>, e.g.
<code>ani.options(qpdf = 'C:/Software/qpdf/bin/qpdf.exe')</code>; <code>qpdf</code>
is mainly used to compress PDF files in this package, and it is a smaller
tool than <code>pdftk</code>. It is recommended over <code>pdftk</code>
especially under Linux, because tests show that <code>pdftk</code> does not
work well under Linux in compressing PDF files, while <code>qpdf</code> is
much better.</p>
</dd>
<dt>pdftk</dt><dd><p>the path of the program <code>Pdftk</code>, e.g.
<code>ani.options(pdftk = 'C:/Software/pdftk.exe')</code> or
<code>ani.options(pdftk = '/home/john/bin/pdftk')</code>; <code>pdftk</code> will be
used to compress the PDF graphics output in the function
<code><a href="#topic+pdftk">pdftk</a></code>; compression will not be tried if this options is
<code>NULL</code>. This option will only affect <code><a href="#topic+saveGIF">saveGIF</a></code>,
<code><a href="#topic+saveLatex">saveLatex</a></code> and <code><a href="#topic+saveSWF">saveSWF</a></code> when
<code>ani.options('ani.type')</code> is <code>'pdf'</code>.</p>
</dd>
<dt>ffmpeg</dt><dd><p>the path of the progam <code>ffmpeg</code>, e.g.
<code>ani.options(ffmpeg = 'C:/Software/ffmpeg/bin/ffmpeg.exe')</code>; FFmpeg is
used to convert a sequence of images to a video. See
<code><a href="#topic+saveVideo">saveVideo</a></code>.</p>
</dd>
</dl>



<h3>Note</h3>

<p>Please note that <code>nmax</code> is not always equal to the number of
animation frames. Sometimes there is more than one frame recorded in a
single step of a loop, for instance, there are 2 frames generated in each
step of <code><a href="#topic+kmeans.ani">kmeans.ani</a></code>, and 4 frames in <code><a href="#topic+knn.ani">knn.ani</a></code>,
etc; whereas for <code><a href="#topic+newton.method">newton.method</a></code>, the number of animation
frames is not definite, because there are other criteria to break the loop.
</p>
<p>This function can be used for almost all the animation functions such as
<code><a href="#topic+brownian.motion">brownian.motion</a></code>, <code><a href="#topic+boot.iid">boot.iid</a></code>,
<code><a href="#topic+buffon.needle">buffon.needle</a></code>, <code><a href="#topic+cv.ani">cv.ani</a></code>, <code><a href="#topic+flip.coin">flip.coin</a></code>,
<code><a href="#topic+kmeans.ani">kmeans.ani</a></code>, <code><a href="#topic+knn.ani">knn.ani</a></code>, etc. Most of the options
here will affect the behaviour of animations of the formats HTML, GIF, SWF
and PDF; on-screen animations are only affected by <code>interval</code> and
<code>nmax</code>.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/ani-options/">https://yihui.org/animation/example/ani-options/</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+options">options</a></code>, <code><a href="grDevices.html#topic+dev.interactive">dev.interactive</a></code>,
<code><a href="#topic+saveHTML">saveHTML</a></code>, <code><a href="#topic+saveGIF">saveGIF</a></code>, <code><a href="#topic+saveLatex">saveLatex</a></code>,
<code><a href="#topic+saveSWF">saveSWF</a></code>, <code><a href="#topic+pdftk">pdftk</a></code>
</p>
<p><a href="https://qpdf.sourceforge.io/">https://qpdf.sourceforge.io/</a>
</p>
<p><a href="https://www.pdflabs.com/docs/pdftk-man-page/">https://www.pdflabs.com/docs/pdftk-man-page/</a>
</p>

<hr>
<h2 id='ani.pause'>Pause for a while and flush the current graphical device</h2><span id='topic+ani.pause'></span>

<h3>Description</h3>

<p>If this function is called in an interactive graphics device, it will pause
for a time interval (by default specified in
<code><a href="#topic+ani.options">ani.options</a>('interval')</code>) and flush the current device;
otherwise it will do nothing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ani.pause(interval = ani.options("interval"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ani.pause_+3A_interval">interval</code></td>
<td>
<p>a time interval to pause (in seconds)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisible <code>NULL</code>.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>See Also</h3>

<p><code><a href="grDevices.html#topic+dev.interactive">dev.interactive</a></code>, <code><a href="base.html#topic+Sys.sleep">Sys.sleep</a></code>,
<code><a href="grDevices.html#topic+dev.flush">dev.flush</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## pause for 2 seconds
oopt = ani.options(interval = 2)

for (i in 1:5) {
    plot(runif(10), ylim = c(0, 1))
    ani.pause()
}

ani.options(oopt)

## see demo('Xmas2', package = 'animation') for another example

</code></pre>

<hr>
<h2 id='ani.record'>Record and replay animations</h2><span id='topic+ani.record'></span><span id='topic+ani.replay'></span>

<h3>Description</h3>

<p>These two functions use <code><a href="grDevices.html#topic+recordPlot">recordPlot</a></code> and <code><a href="grDevices.html#topic+replayPlot">replayPlot</a></code>
to record image frames and replay the animation respectively.
</p>
<p>Replay the animation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ani.record(reset = FALSE, replay.cur = FALSE)

ani.replay(list)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ani.record_+3A_reset">reset</code></td>
<td>
<p>if <code>TRUE</code>, the recording list will be cleared, otherwise
new plots will be appended to the existing list of recorded plots</p>
</td></tr>
<tr><td><code id="ani.record_+3A_replay.cur">replay.cur</code></td>
<td>
<p>whether to replay the current plot (we can set both
<code>reset</code> and <code>replay.cur</code> to <code>TRUE</code> so that low-level
plotting changes can be captured by off-screen graphics devices without
storing all the plots in memory; see Note)</p>
</td></tr>
<tr><td><code id="ani.record_+3A_list">list</code></td>
<td>
<p>a list of recorded plots; if missing, the recorded plots by
<code><a href="#topic+ani.record">ani.record</a></code> will be used</p>
</td></tr>
</table>


<h3>Details</h3>

<p>One difficulty in capturing images in R (base graphics) is that the
off-screen graphics devices cannot capture low-level plotting commands as
<em>new</em> image files &ndash; only high-level plotting commands can produce new
image files; <code><a href="#topic+ani.record">ani.record</a></code> uses <code><a href="grDevices.html#topic+recordPlot">recordPlot</a></code> to record
the plots when any changes are made on the current plot. For a graphical
device to be recordable, you have to call <code>dev.control('enable')</code> before
plotting.
</p>
<p><code><a href="#topic+ani.replay">ani.replay</a></code> can replay the recorded plots as an
animation. Moreover, we can convert the recorded plots to other formats
too, e.g. use <code><a href="#topic+saveHTML">saveHTML</a></code> and friends.
</p>
<p>The recorded plots are stored as a list in <code>.ani.env$.images</code>, which
is the default value to be passed to <code><a href="#topic+ani.replay">ani.replay</a></code>;
<code>.ani.env</code> is an invisible <code><a href="base.html#topic+environment">environment</a></code> created when this
package is loaded, and it will be used to store some commonly used objects
such as animation options (<code><a href="#topic+ani.options">ani.options</a></code>).
</p>


<h3>Value</h3>

<p>Invisible <code>NULL</code>.
</p>


<h3>Note</h3>

<p>Although we can record changes made by low-level plotting commands
using <code><a href="#topic+ani.record">ani.record</a></code>, there is a price to pay &ndash; we need memory
to store the recorded plots, which are usually verg large when the plots
are complicated (e.g. we draw millions of points or polygons in a single
plot). However, we can set <code>replay.cur</code> to force R to produce a new
copy of the current plot, which will be automatically recorded by
off-screen grapihcs devices as <em>new</em> image files. This method has a
limitation: we must open a screen device to assist R to record the plots.
See the last example below. We must be very careful that no other graphics
devices are opened before we use this function.
</p>
<p>If we use base graphics, we should bear in mind that the background colors
of the plots might be transparent, which could lead to problems in HTML
animation pages when we use the <code><a href="grDevices.html#topic+png">png</a></code> device (see the examples
below).
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/ani-record/">https://yihui.org/animation/example/ani-record/</a>
</p>


<h3>See Also</h3>

<p><code><a href="grDevices.html#topic+recordPlot">recordPlot</a></code> and <code><a href="grDevices.html#topic+replayPlot">replayPlot</a></code>;
<code><a href="#topic+ani.pause">ani.pause</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(animation)

n = 20
x = sort(rnorm(n))
y = rnorm(n)
## set up an empty frame, then add points one by one
par(bg = "white")  # ensure the background color is white
plot(x, y, type = "n")

ani.record(reset = TRUE)  # clear history before recording

for (i in 1:n) {
    points(x[i], y[i], pch = 19, cex = 2)
    ani.record()  # record the current frame
}

## now we can replay it, with an appropriate pause between frames
oopts = ani.options(interval = 0.5)
ani.replay()

## or export the animation to an HTML page
saveHTML(ani.replay(), img.name = "record_plot")

## record plots and replay immediately
saveHTML({
    dev.control("enable")  # enable recording
    par(bg = "white")  # ensure the background color is white
    plot(x, y, type = "n")
    for (i in 1:n) {
        points(x[i], y[i], pch = 19, cex = 2)
        ani.record(reset = TRUE, replay.cur = TRUE)  # record the current frame
    }
})

ani.options(oopts)
</code></pre>

<hr>
<h2 id='ani.start'>Generate an HTML animation page</h2><span id='topic+ani.start'></span><span id='topic+ani.stop'></span>

<h3>Description</h3>

<p>These functions are defunct and should not be used any more.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ani.start(...)

ani.stop(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ani.start_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="#topic+ani.options">ani.options</a></code> to set animation
parameters</p>
</td></tr>
</table>

<hr>
<h2 id='animation-package'>A Gallery of Animations in Statistics and Utilities to Create Animations</h2><span id='topic+animation-package'></span><span id='topic+animation'></span>

<h3>Description</h3>

<p>This package contains a variety functions for animations in statistics which
could probably aid in teaching statistics and data analysis; it also has
several utilities to export R animations to other formats.
</p>


<h3>Details</h3>

<p>This package mainly makes use of HTML &amp; JavaScript and R windows graphics
devices (such as <code><a href="grDevices.html#topic+x11">x11</a></code>) to demonstrate animations in statistics;
other kinds of output such as Flash (SWF) or GIF animations or PDF animations
are also available if required software packages have been installed. See
below for details on each type of animation.
</p>


<h3>On-screen Animations</h3>

<p>It's natural and easy to create an animation
in R using the windows graphics device, e.g. in <code>x11()</code> or
<code>windows()</code>. A basic scheme is like the Example 1 (see below).
</p>
<p>On-screen animations do not depend on any third-party software, but the
rendering speed of the windows graphics devices is often slow, so the
animation might not be smooth (especially under Linux and Mac OS).
</p>


<h3>HTML Pages</h3>

<p>The generation of HTML animation pages does not rely on
any third-party software either, and we only need a web browser to watch
the animation. See <code><a href="#topic+saveHTML">saveHTML</a></code>.
</p>
<p>The HTML interface is just like a movie player &ndash; it comes with a series of
buttons to control the animation (play, stop, next, previous, ...).
</p>
<p>This HTML approach is flexible enough to be used even in Rweb, which means
we do not really have to install R to create animations! There is a demo in
<code>system.file('misc', 'Rweb', 'demo.html', package = 'animation')</code>. We
can use <code><a href="#topic+saveHTML">saveHTML</a></code> to create animations directly in Rweb; this
can be helpful when we do not have R or cannot install R.
</p>


<h3>GIF Animations</h3>

<p>If ImageMagick or GraphicsMagick has been installed,
we can use <code><a href="#topic+im.convert">im.convert</a></code> or <code><a href="#topic+gm.convert">gm.convert</a></code> to create a
GIF animation (combining several R plots together), or use
<code><a href="#topic+saveGIF">saveGIF</a></code> to create a GIF animation from an R code chunk.
</p>


<h3>Flash Animations</h3>

<p>If SWF Tools has been installed, we can use
<code><a href="#topic+saveSWF">saveSWF</a></code> to create a Flash animation (again, combining R
plots).
</p>


<h3>PDF Animations</h3>

<p>If LaTeX is present in the system, we can use
<code><a href="#topic+saveLatex">saveLatex</a></code> to insert animations into a PDF document and watch
the animation using the Adobe reader.
</p>
<p>The animation is created by the LaTeX package <code>animate</code>.
</p>


<h3>Video</h3>

<p>The function <code><a href="#topic+saveVideo">saveVideo</a></code> can use FFmpeg to
convert images to various video formats (e.g. &lsquo;<span class="file">mp4</span>&rsquo;, &lsquo;<span class="file">avi</span>&rsquo; and
&lsquo;<span class="file">wmv</span>&rsquo;, etc).
</p>


<h3>Note</h3>

<p>Bug reports and feature requests can be sent to
<a href="https://github.com/yihui/animation/issues">https://github.com/yihui/animation/issues</a>.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/animation-package/">https://yihui.org/animation/example/animation-package/</a>
</p>
<p>The associated website for this package:
<a href="https://yihui.org/animation">https://yihui.org/animation</a>
</p>
<p>Yihui Xie and Xiaoyue Cheng. animation: A package for statistical
animations. <em>R News</em>, <b>8</b>(2):23&ndash;27, October 2008.  URL:
<a href="https://CRAN.R-project.org/doc/Rnews/Rnews_2008-2.pdf">https://CRAN.R-project.org/doc/Rnews/Rnews_2008-2.pdf</a>
</p>
<p>(NB: some functions mentioned in the above article have been slightly
modified; see the help pages for the up-to-date usage.)
</p>
<p>Yihui Xie (2013). animation: An R Package for Creating Animations and
Demonstrating Statistical Methods. <em>Journal of Statistical Software</em>,
<b>53</b>(1), 1-27. URL doi: <a href="https://doi.org/10.18637/jss.v053.i01">10.18637/jss.v053.i01</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+saveHTML">saveHTML</a></code>, <code><a href="#topic+saveGIF">saveGIF</a></code>,
<code><a href="#topic+saveSWF">saveSWF</a></code>, <code><a href="#topic+saveVideo">saveVideo</a></code>, <code><a href="#topic+saveLatex">saveLatex</a></code>
</p>

<hr>
<h2 id='bisection.method'>Demonstration of the Bisection Method for root-finding on an interval</h2><span id='topic+bisection.method'></span>

<h3>Description</h3>

<p>This is a visual demonstration of finding the root of an equation <code class="reqn">f(x) =
0</code> on an interval using the Bisection Method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bisection.method(
  FUN = function(x) x^2 - 4,
  rg = c(-1, 10),
  tol = 0.001,
  interact = FALSE,
  main,
  xlab,
  ylab,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bisection.method_+3A_fun">FUN</code></td>
<td>
<p>the function in the equation to solve (univariate)</p>
</td></tr>
<tr><td><code id="bisection.method_+3A_rg">rg</code></td>
<td>
<p>a vector containing the end-points of the interval to be searched
for the root; in a <code>c(a, b)</code> form</p>
</td></tr>
<tr><td><code id="bisection.method_+3A_tol">tol</code></td>
<td>
<p>the desired accuracy (convergence tolerance)</p>
</td></tr>
<tr><td><code id="bisection.method_+3A_interact">interact</code></td>
<td>
<p>logical; whether choose the end-points by cliking on the
curve (for two times) directly?</p>
</td></tr>
<tr><td><code id="bisection.method_+3A_xlab">xlab</code>, <code id="bisection.method_+3A_ylab">ylab</code>, <code id="bisection.method_+3A_main">main</code></td>
<td>
<p>axis and main titles to be used in the plot</p>
</td></tr>
<tr><td><code id="bisection.method_+3A_...">...</code></td>
<td>
<p>other arguments passed to <code><a href="graphics.html#topic+curve">curve</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Suppose we want to solve the equation <code class="reqn">f(x) = 0</code>. Given two points a and
b such that <code class="reqn">f(a)</code> and <code class="reqn">f(b)</code> have opposite signs, we know by the
intermediate value theorem that <code class="reqn">f</code> must have at least one root in the
interval <code class="reqn">[a, b]</code> as long as <code class="reqn">f</code> is continuous on this interval. The
bisection method divides the interval in two by computing <code class="reqn">c = (a + b) /
2</code>. There are now two possibilities: either <code class="reqn">f(a)</code> and <code class="reqn">f(c)</code> have
opposite signs, or <code class="reqn">f(c)</code> and <code class="reqn">f(b)</code> have opposite signs. The
bisection algorithm is then applied recursively to the sub-interval where the
sign change occurs.
</p>
<p>During the process of searching, the mid-point of subintervals are annotated
in the graph by both texts and blue straight lines, and the end-points are
denoted in dashed red lines. The root of each iteration is also plotted in
the right margin of the graph.
</p>


<h3>Value</h3>

<p>A list containing </p>
<table>
<tr><td><code>root</code></td>
<td>
<p>the root found by the algorithm</p>
</td></tr>
<tr><td><code>value</code></td>
<td>
<p>the value of <code>FUN(root)</code></p>
</td></tr> <tr><td><code>iter</code></td>
<td>
<p>number of
iterations; if it is equal to <code>ani.options('nmax')</code>, it's quite likely
that the root is not reliable because the maximum number of iterations has
been reached</p>
</td></tr>
</table>


<h3>Note</h3>

<p>The maximum number of iterations is specified in
<code>ani.options('nmax')</code>.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/bisection-method/">https://yihui.org/animation/example/bisection-method/</a>
</p>
<p>For more information about Bisection method, please see 
<a href="https://en.wikipedia.org/wiki/Bisection_method">https://en.wikipedia.org/wiki/Bisection_method</a>
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+deriv">deriv</a></code>, <code><a href="stats.html#topic+uniroot">uniroot</a></code>, <code><a href="graphics.html#topic+curve">curve</a></code>
</p>

<hr>
<h2 id='BM.circle'>Brownian Motion in a circle</h2><span id='topic+BM.circle'></span>

<h3>Description</h3>

<p>Several points moving randomly in a circle.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>BM.circle(n = 20, col = rainbow(n), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="BM.circle_+3A_n">n</code></td>
<td>
<p>number of points</p>
</td></tr>
<tr><td><code id="BM.circle_+3A_col">col</code></td>
<td>
<p>colors of points</p>
</td></tr>
<tr><td><code id="BM.circle_+3A_...">...</code></td>
<td>
<p>other parameters passed to <code><a href="graphics.html#topic+points">points</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a solution to the question raised in R-help:
<a href="https://stat.ethz.ch/pipermail/r-help/2008-December/183018.html">https://stat.ethz.ch/pipermail/r-help/2008-December/183018.html</a>.
</p>


<h3>Value</h3>

<p>Invisible <code>NULL</code>.
</p>


<h3>Note</h3>

<p>The maximum number of steps in the motion is specified in
<code>ani.options('nmax')</code>.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/bm-circle/">https://yihui.org/animation/example/bm-circle/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+brownian.motion">brownian.motion</a></code>, <code><a href="stats.html#topic+rnorm">rnorm</a></code>
</p>

<hr>
<h2 id='boot.iid'>Demonstrate bootstrapping for iid data</h2><span id='topic+boot.iid'></span>

<h3>Description</h3>

<p>Use a sunflower scatter plot to illustrate the results of resampling, and a
histogram to show the distribution of the statistic of interest.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>boot.iid(
  x = runif(20),
  statistic = mean,
  m = length(x),
  mat = matrix(1:2, 2),
  widths = rep(1, ncol(mat)),
  heights = rep(1, nrow(mat)),
  col = c("black", "red", "bisque", "red", "gray"),
  cex = c(1.5, 0.8),
  main,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="boot.iid_+3A_x">x</code></td>
<td>
<p>a numerical vector (the original data).</p>
</td></tr>
<tr><td><code id="boot.iid_+3A_statistic">statistic</code></td>
<td>
<p>A function which returns a value of the statistic of
interest when applied to the data x.</p>
</td></tr>
<tr><td><code id="boot.iid_+3A_m">m</code></td>
<td>
<p>the sample size for bootstrapping (<code class="reqn">m</code>-out-of-<code class="reqn">n</code> bootstrap)</p>
</td></tr>
<tr><td><code id="boot.iid_+3A_mat">mat</code>, <code id="boot.iid_+3A_widths">widths</code>, <code id="boot.iid_+3A_heights">heights</code></td>
<td>
<p>arguments passed to <code><a href="graphics.html#topic+layout">layout</a></code> to set the
layout of the two graphs</p>
</td></tr>
<tr><td><code id="boot.iid_+3A_col">col</code></td>
<td>
<p>a character vector of length 5 specifying the colors of: points of
original data, points for the sunflowerplot, rectangles of the histogram,
the density line, and the rug.</p>
</td></tr>
<tr><td><code id="boot.iid_+3A_cex">cex</code></td>
<td>
<p>a numeric vector of length 2: magnification of original data
points and the sunflowerplot points.</p>
</td></tr>
<tr><td><code id="boot.iid_+3A_main">main</code></td>
<td>
<p>a character vector of length 2: the main titles of the two
graphs.</p>
</td></tr>
<tr><td><code id="boot.iid_+3A_...">...</code></td>
<td>
<p>other arguments passed to <code><a href="graphics.html#topic+hist">hist</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is actually a very naive version of bootstrapping but may be useful for
novices. By default, the circles denote the original dataset, while the red
sunflowers (probably) with leaves denote the points being resampled; the
number of leaves just means how many times these points are resampled, as
bootstrap samples <em>with</em> replacement. The x-axis is the sample values,
and y-axis is the indices of sample points.
</p>
<p>The whole process has illustrated the steps of resampling, computing the
statistic and plotting its distribution based on bootstrapping.
</p>


<h3>Value</h3>

<p>A list containing </p>
<table>
<tr><td><code>t0</code></td>
<td>
<p> The observed value of 'statistic'
applied to 'x'.</p>
</td></tr> <tr><td><code>tstar</code></td>
<td>
<p>Bootstrap versions of the 'statistic'.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>The maximum times of resampling is specified in
<code>ani.options('nmax')</code>.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/boot-iid/">https://yihui.org/animation/example/boot-iid/</a>
</p>
<p>There are many references explaining the bootstrap and its
variations.
</p>
<p>Efron, B. and Tibshirani, R. (1993) <em>An Introduction to the
Bootstrap</em>. Chapman &amp; Hall.
</p>


<h3>See Also</h3>

<p><code><a href="graphics.html#topic+sunflowerplot">sunflowerplot</a></code>
</p>

<hr>
<h2 id='boot.lowess'>Bootstrapping with LOWESS</h2><span id='topic+boot.lowess'></span>

<h3>Description</h3>

<p>Sample the original data with replacement and fit LOWESS curves accordingly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>boot.lowess(x, y = NULL, f = 2/3, iter = 3, line.col = "#FF000033", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="boot.lowess_+3A_x">x</code>, <code id="boot.lowess_+3A_y">y</code>, <code id="boot.lowess_+3A_f">f</code>, <code id="boot.lowess_+3A_iter">iter</code></td>
<td>
<p>passed to <code><a href="stats.html#topic+lowess">lowess</a></code></p>
</td></tr>
<tr><td><code id="boot.lowess_+3A_line.col">line.col</code></td>
<td>
<p>the color of the LOWESS lines</p>
</td></tr>
<tr><td><code id="boot.lowess_+3A_...">...</code></td>
<td>
<p>other arguments passed to the scatterplot by <code><a href="graphics.html#topic+plot">plot</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>We keep on resampling the data and finally we will see several bootstrapped
LOWESS curves, which may give us a rough idea about a &ldquo;confidence interval&rdquo;
of the LOWESS fit.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/boot-lowess/">https://yihui.org/animation/example/boot-lowess/</a>
</p>

<hr>
<h2 id='brownian.motion'>Demonstration of Brownian motion on the 2D plane</h2><span id='topic+brownian.motion'></span>

<h3>Description</h3>

<p>Brownian motion, or random walk, can be regarded as the trace of some
cumulative normal random numbers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>brownian.motion(n = 10, xlim = c(-20, 20), ylim = c(-20, 20), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="brownian.motion_+3A_n">n</code></td>
<td>
<p>Number of points in the scatterplot</p>
</td></tr>
<tr><td><code id="brownian.motion_+3A_xlim">xlim</code>, <code id="brownian.motion_+3A_ylim">ylim</code></td>
<td>
<p>Arguments passed to <code><a href="graphics.html#topic+plot.default">plot.default</a></code> to control
the apperance of the scatterplot (title, points, etc), see
<code><a href="graphics.html#topic+points">points</a></code> for details.</p>
</td></tr>
<tr><td><code id="brownian.motion_+3A_...">...</code></td>
<td>
<p>other arguments passed to <code><a href="graphics.html#topic+plot.default">plot.default</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The location of the next step is &ldquo;current location + random Gaussian
numbers&rdquo;, i.e.,
</p>
<p style="text-align: center;"><code class="reqn">x_{k + 1} = x_{k} + rnorm(1)</code>
</p>

<p style="text-align: center;"><code class="reqn">y_{k + 1} = y_{k} + rnorm(1)</code>
</p>

<p>where <em>(x, y)</em> stands for the location of a point.
</p>


<h3>Value</h3>

<p>None (invisible <code>NULL</code>).
</p>


<h3>Note</h3>

<p>The maximum number of steps in the motion is specified in
<code>ani.options('nmax')</code>.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/brownian-motion/">https://yihui.org/animation/example/brownian-motion/</a>
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+rnorm">rnorm</a></code>
</p>

<hr>
<h2 id='buffon.needle'>Simulation of Buffon's Needle</h2><span id='topic+buffon.needle'></span>

<h3>Description</h3>

<p>This function provides a simulation for the problem of Buffon's Needle, which
is one of the oldest problems in the field of geometrical probability.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>buffon.needle(
  l = 0.8,
  d = 1,
  redraw = TRUE,
  mat = matrix(c(1, 3, 2, 3), 2),
  heights = c(3, 2),
  col = c("lightgray", "red", "gray", "red", "blue", "black", "red"),
  expand = 0.4,
  type = "l",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="buffon.needle_+3A_l">l</code></td>
<td>
<p>numerical. length of the needle; shorter than <code>d</code>.</p>
</td></tr>
<tr><td><code id="buffon.needle_+3A_d">d</code></td>
<td>
<p>numerical. distances between lines; it should be longer than
<code>l</code>.</p>
</td></tr>
<tr><td><code id="buffon.needle_+3A_redraw">redraw</code></td>
<td>
<p>logical. redraw former &lsquo;needles&rsquo; or not for each drop.</p>
</td></tr>
<tr><td><code id="buffon.needle_+3A_mat">mat</code>, <code id="buffon.needle_+3A_heights">heights</code></td>
<td>
<p>arguments passed to <code><a href="graphics.html#topic+layout">layout</a></code> to set the layout
of the three graphs.</p>
</td></tr>
<tr><td><code id="buffon.needle_+3A_col">col</code></td>
<td>
<p>a character vector of length 7 specifying the colors of:
background of the area between parallel lines, the needles, the sin curve,
points below / above the sin curve, estimated <code class="reqn">\pi</code> values, and the
true <code class="reqn">\pi</code> value.</p>
</td></tr>
<tr><td><code id="buffon.needle_+3A_expand">expand</code></td>
<td>
<p>a numerical value defining the expanding range of the y-axis
when plotting the estimated <code class="reqn">\pi</code> values: the <code>ylim</code> will be
<code>(1 +/- expand) * pi</code>.</p>
</td></tr>
<tr><td><code id="buffon.needle_+3A_type">type</code></td>
<td>
<p>an argument passed to <code><a href="graphics.html#topic+plot.default">plot</a></code>
when plotting the estimated <code class="reqn">\pi</code> values (default to be lines).</p>
</td></tr>
<tr><td><code id="buffon.needle_+3A_...">...</code></td>
<td>
<p>other arguments passed to
<code><a href="graphics.html#topic+plot.default">plot</a></code> when plotting the values of
estimated <code class="reqn">\pi</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is quite an old problem in probability. For mathematical background,
please refer to <a href="https://en.wikipedia.org/wiki/Buffon's_needle">https://en.wikipedia.org/wiki/Buffon's_needle</a> or
<a href="https://mste.illinois.edu/activity/buffon/">https://mste.illinois.edu/activity/buffon/</a>.
</p>
<p>&lsquo;Needles&rsquo; are denoted by segments on the 2D plane, and dropped randomly to
check whether they cross the parallel lines. Through many times of &lsquo;dropping&rsquo;
needles, the approximate value of <code class="reqn">\pi</code> can be calculated out.
</p>
<p>There are three graphs made in each step: the top-left one is a simulation of
the scenario, the top-right one is to help us understand the connection
between dropping needles and the mathematical method to estimate <code class="reqn">\pi</code>,
and the bottom one is the result for each drop.
</p>


<h3>Value</h3>

<p>The values of estimated <code class="reqn">\pi</code> are returned as a numerical vector
(of length <code>nmax</code>).
</p>


<h3>Note</h3>

<p>Note that <code>redraw</code> has great influence on the speed of the
simulation (animation) if the control argument <code>nmax</code> (in
<code><a href="#topic+ani.options">ani.options</a></code>) is quite large, so you'd better specify it as
<code>FALSE</code> when doing a large amount of simulations.
</p>
<p>The maximum number of drops is specified in <code>ani.options('nmax')</code>.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/buffon-needle/">https://yihui.org/animation/example/buffon-needle/</a>
</p>
<p>Ramaley, J. F. (Oct 1969). Buffon's Noodle Problem. <em>The
American Mathematical Monthly</em> <b>76</b> (8): 916-918.
</p>

<hr>
<h2 id='CLELAL09'>The NBA game between CLE Cavaliers and LAL Lakers on Dec 25, 2009</h2><span id='topic+CLELAL09'></span>

<h3>Description</h3>

<p>Cleveland Cavaliers played against Los Angeles Lakers at Staples Center in LA
on Dec 25, 2009 and won the game by 102:87. This data recorded the locations
of players on the court and the results of the shots.
</p>


<h3>Format</h3>

<p>A data frame with 455 observations on the following 7 variables.
</p>
 <dl>
<dt><code>player</code></dt><dd><p>a character vector: the current player</p>
</dd>
<dt><code>time</code></dt><dd><p>a character vector: the time</p>
</dd> <dt><code>period</code></dt><dd><p>a
numeric vector: the period (1 - 4)</p>
</dd> <dt><code>realx</code></dt><dd><p>a numeric vector:
the x-axis location</p>
</dd> <dt><code>realy</code></dt><dd><p>a numeric vector: the y-axis
location</p>
</dd> <dt><code>result</code></dt><dd><p>a factor with levels <code>made</code> and
<code>missed</code></p>
</dd> <dt><code>team</code></dt><dd><p>a factor with levels <code>CLE</code>,
<code>LAL</code> and <code>OFF</code></p>
</dd> </dl>



<h3>Note</h3>

<p>We view the court with CLE in the left and LAL in the right:
<code>realx</code> is the distance to the left border of CLE's court, and
<code>realy</code> is the distance to the bottom border of the court; notice that
the size of the court is <code class="reqn">94 \times 50</code> (feet).
</p>


<h3>Source</h3>

<p><a href="http://www.basketballgeek.com/data/">http://www.basketballgeek.com/data/</a> (transformed based on the
original data)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## see demo('CLEvsLAL', package = 'animation') for a `replay' of the game
</code></pre>

<hr>
<h2 id='clt.ani'>Demonstration of the Central Limit Theorem</h2><span id='topic+clt.ani'></span>

<h3>Description</h3>

<p>First of all, a number of <code>obs</code> observations are generated from a
certain distribution for each variable <code class="reqn">X_j</code>, <code class="reqn">j = 1, 2, \cdots, n</code>, and <code class="reqn">n = 1, 2, \cdots, nmax</code>, then
the sample means are computed, and at last the density of these sample means
is plotted as the sample size <code class="reqn">n</code> increases (the theoretical limiting
distribution is denoted by the dashed line), besides, the P-values from the
normality test <code><a href="stats.html#topic+shapiro.test">shapiro.test</a></code> are computed for each <code class="reqn">n</code> and
plotted at the same time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clt.ani(
  obs = 300,
  FUN = rexp,
  mean = 1,
  sd = 1,
  col = c("bisque", "red", "blue", "black"),
  mat = matrix(1:2, 2),
  widths = rep(1, ncol(mat)),
  heights = rep(1, nrow(mat)),
  xlim,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clt.ani_+3A_obs">obs</code></td>
<td>
<p>the number of sample means to be generated from the distribution
based on a given sample size <code class="reqn">n</code>; these sample mean values will be used
to create the histogram</p>
</td></tr>
<tr><td><code id="clt.ani_+3A_fun">FUN</code></td>
<td>
<p>the function to generate <code>n</code> random numbers from a certain
distribution</p>
</td></tr>
<tr><td><code id="clt.ani_+3A_mean">mean</code>, <code id="clt.ani_+3A_sd">sd</code></td>
<td>
<p>the expectation and standard deviation of the population
distribution (they will be used to plot the density curve of the
theoretical Normal distribution with mean equal to <code>mean</code> and sd equal
to <code class="reqn">sd/\sqrt{n}</code>; if any of them is <code>NA</code>, the density curve will
be suppressed)</p>
</td></tr>
<tr><td><code id="clt.ani_+3A_col">col</code></td>
<td>
<p>a vector of length 4 specifying the colors of the histogram, the
density curve of the sample mean, the theoretical density cuve and
P-values.</p>
</td></tr>
<tr><td><code id="clt.ani_+3A_mat">mat</code>, <code id="clt.ani_+3A_widths">widths</code>, <code id="clt.ani_+3A_heights">heights</code></td>
<td>
<p>arguments passed to <code><a href="graphics.html#topic+layout">layout</a></code> to set the
layout of the two graphs.</p>
</td></tr>
<tr><td><code id="clt.ani_+3A_xlim">xlim</code></td>
<td>
<p>the x-axis limit for the histogram (it has a default value if not
specified)</p>
</td></tr>
<tr><td><code id="clt.ani_+3A_...">...</code></td>
<td>
<p>other arguments passed to <code><a href="graphics.html#topic+plot.default">plot.default</a></code> to plot the
P-values</p>
</td></tr>
</table>


<h3>Details</h3>

<p>As long as the conditions of the Central Limit Theorem (CLT) are satisfied,
the distribution of the sample mean will be approximate to the Normal
distribution when the sample size <code>n</code> is large enough, no matter what is
the original distribution. The largest sample size is defined by <code>nmax</code>
in <code><a href="#topic+ani.options">ani.options</a></code>.
</p>


<h3>Value</h3>

<p>A data frame of P-values.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/clt-ani/">https://yihui.org/animation/example/clt-ani/</a>
</p>


<h3>See Also</h3>

<p><code><a href="graphics.html#topic+hist">hist</a></code>, <code><a href="stats.html#topic+density">density</a></code>
</p>

<hr>
<h2 id='conf.int'>Demonstration of the concept of confidence intervals</h2><span id='topic+conf.int'></span>

<h3>Description</h3>

<p>This function gives a demonstration of the concept of confidence intervals in
mathematical statistics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>conf.int(level = 0.95, size = 50, cl = c("red", "gray"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="conf.int_+3A_level">level</code></td>
<td>
<p>the confidence level <code class="reqn">(1 - \alpha)</code>, e.g. 0.95</p>
</td></tr>
<tr><td><code id="conf.int_+3A_size">size</code></td>
<td>
<p>the sample size for drawing samples from N(0, 1)</p>
</td></tr>
<tr><td><code id="conf.int_+3A_cl">cl</code></td>
<td>
<p>two different colors to annotate whether the confidence intervals
cover the true mean (<code>cl[1]</code>: no; <code>cl[2]</code>: yes)</p>
</td></tr>
<tr><td><code id="conf.int_+3A_...">...</code></td>
<td>
<p>other arguments passed to <code><a href="graphics.html#topic+plot.default">plot.default</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Keep on drawing samples from the Normal distribution N(0, 1), computing the
intervals based on a given confidence level and plotting them as segments in
a graph. In the end, we may check the coverage rate against the given
confidence level.
</p>
<p>Intervals that cover the true parameter are denoted in color <code>cl[2]</code>,
otherwise in color <code>cl[1]</code>. Each time we draw a sample, we can compute
the corresponding confidence interval. As the process of drawing samples goes
on, there will be a legend indicating the numbers of the two kinds of
intervals respectively and the coverage rate is also denoted in the top-left
of the plot.
</p>
<p>The argument <code>nmax</code> in <code><a href="#topic+ani.options">ani.options</a></code> controls the maximum
times of drawing samples.
</p>


<h3>Value</h3>

<p>A list containing </p>
<table>
<tr><td><code>level</code></td>
<td>
<p>confidence level</p>
</td></tr> <tr><td><code>size</code></td>
<td>
<p>sample
size</p>
</td></tr> <tr><td><code>CI</code></td>
<td>
<p>a matrix of confidence intervals for each sample</p>
</td></tr>
<tr><td><code>CR</code></td>
<td>
<p>coverage rate</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/conf-int/">https://yihui.org/animation/example/conf-int/</a>
</p>
<p>George Casella and Roger L. Berger. <em>Statistical Inference</em>.
Duxbury Press, 2th edition, 2001.
</p>

<hr>
<h2 id='cv.ani'>Demonstration for the process of cross-validation</h2><span id='topic+cv.ani'></span>

<h3>Description</h3>

<p>This function uses rectangles to illustrate the <code class="reqn">k</code> folds and
mark the test set and the training set with different colors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cv.ani(
  x = runif(150),
  k = 10,
  col = c("green", "red", "blue"),
  pch = c(4, 1),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cv.ani_+3A_x">x</code></td>
<td>
<p>a numerical vector which stands for the sample points.</p>
</td></tr>
<tr><td><code id="cv.ani_+3A_k">k</code></td>
<td>
<p>an integer: how many parts should we split the data into?
(comes from the <code class="reqn">k</code>-fold cross-validation.)</p>
</td></tr>
<tr><td><code id="cv.ani_+3A_col">col</code></td>
<td>
<p>a character vector of length 3 specifying the colors
of: the rectangle representing the test set, the points of the
test set, and points of the training set.</p>
</td></tr>
<tr><td><code id="cv.ani_+3A_pch">pch</code></td>
<td>
<p>a numeric vector of length 2 specifying the symbols of
the test set and training set respectively.</p>
</td></tr>
<tr><td><code id="cv.ani_+3A_...">...</code></td>
<td>
<p>other arguments passed to
<code><a href="graphics.html#topic+plot.default">plot.default</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Briefly speaking, the process of cross-validation is just to split
the whole data set into several parts and select one part as the
test set and the rest parts as the training set.
</p>
<p>The computation of sample sizes is base on <code><a href="#topic+kfcv">kfcv</a></code>.
</p>


<h3>Value</h3>

<p>None (invisible <code>NULL</code>).
</p>


<h3>Note</h3>

<p>For the &lsquo;leave-one-out&rsquo; cross-validation, just specify
<code>k</code> as <code>length(x)</code>, then the rectangles will &lsquo;shrink&rsquo;
into single lines.
</p>
<p>The final number of animation frames is the smaller one of
<code>ani.options('nmax')</code> and <code>k</code>.
</p>
<p>This function has nothing to do with specific models used in
cross-validation.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/cv-ani/">https://yihui.org/animation/example/cv-ani/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+kfcv">kfcv</a></code>
</p>

<hr>
<h2 id='cv.nfeaturesLDA'>Cross-validation to find the optimum number of features (variables) in LDA</h2><span id='topic+cv.nfeaturesLDA'></span>

<h3>Description</h3>

<p>This function provids an illustration of the process of finding out the
optimum number of variables using k-fold cross-validation in a linear
discriminant analysis (LDA).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cv.nfeaturesLDA(
  data = matrix(rnorm(600), 60),
  cl = gl(3, 20),
  k = 5,
  cex.rg = c(0.5, 3),
  col.av = c("blue", "red"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cv.nfeaturesLDA_+3A_data">data</code></td>
<td>
<p>a data matrix containg the predictors in columns</p>
</td></tr>
<tr><td><code id="cv.nfeaturesLDA_+3A_cl">cl</code></td>
<td>
<p>a factor indicating the classification of the rows of <code>data</code></p>
</td></tr>
<tr><td><code id="cv.nfeaturesLDA_+3A_k">k</code></td>
<td>
<p>the number of folds</p>
</td></tr>
<tr><td><code id="cv.nfeaturesLDA_+3A_cex.rg">cex.rg</code></td>
<td>
<p>the range of the magnification to be used to the points in the
plot</p>
</td></tr>
<tr><td><code id="cv.nfeaturesLDA_+3A_col.av">col.av</code></td>
<td>
<p>the two colors used to respectively denote rates of correct
predictions in the i-th fold and the average rates for all k folds</p>
</td></tr>
<tr><td><code id="cv.nfeaturesLDA_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="graphics.html#topic+points">points</a></code> to draw the
points which denote the correct rate</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For a classification problem, usually we wish to use as less variables as
possible because of difficulties brought by the high dimension.
</p>
<p>The selection procedure is like this:
</p>

<ul>
<li><p> Split the whole data randomly into <code class="reqn">k</code> folds:
</p>

<ul>
<li><p> For the number of features <code class="reqn">g = 1, 2, \cdots, g_{max}</code>, choose <code class="reqn">g</code> features that have the largest discriminatory
power (measured by the F-statistic in ANOVA):
</p>

<ul>
<li><p> For the fold <code class="reqn">i</code> (<code class="reqn">i = 1, 2, \cdots, k</code>):
</p>

<ul>
<li>
<p>Train a LDA model without the <code class="reqn">i</code>-th fold data, and predict with the
<code class="reqn">i</code>-th fold for a proportion of correct predictions
<code class="reqn">p_{gi}</code>;
</p>
</li></ul>

</li></ul>

</li>
<li><p> Average the <code class="reqn">k</code> proportions to get the correct rate <code class="reqn">p_g</code>;
</p>
</li></ul>

</li>
<li><p> Determine the optimum number of features with the largest <code class="reqn">p</code>.
</p>
</li></ul>

<p>Note that <code class="reqn">g_{max}</code> is set by <code>ani.options('nmax')</code> (i.e. the
maximum number of features we want to choose).
</p>


<h3>Value</h3>

<p>A list containing </p>
<table>
<tr><td><code>accuracy</code></td>
<td>
<p>a matrix in which the element in
the i-th row and j-th column is the rate of correct predictions based on
LDA, i.e. build a LDA model with j variables and predict with data in the
i-th fold (the test set) </p>
</td></tr> <tr><td><code>optimum</code></td>
<td>
<p>the optimum number of features
based on the cross-validation</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Yihui Xie &lt;<a href="https://yihui.org/">https://yihui.org/</a>&gt;
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/cv-nfeatureslda/">https://yihui.org/animation/example/cv-nfeatureslda/</a>
</p>
<p>Maindonald J, Braun J (2007). <em>Data Analysis and Graphics
Using R - An Example-Based Approach</em>. Cambridge University Press, 2nd
edition. pp. 400
</p>


<h3>See Also</h3>

<p><code><a href="#topic+kfcv">kfcv</a></code>, <code><a href="#topic+cv.ani">cv.ani</a></code>, <code><a href="MASS.html#topic+lda">lda</a></code>
</p>

<hr>
<h2 id='ecol.death.sim'>A simulation of the death of two species with certain probabilities</h2><span id='topic+ecol.death.sim'></span>

<h3>Description</h3>

<p>Suppose there are two plant species in a field: A and B. One of them will die
at each time and a new plant will grow in the place where the old plant died;
the species of the new plant depends on the proportions of two species: the
larger the proportion is, the greater the probability for this species to
come up will be.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ecol.death.sim(
  nr = 10,
  nc = 10,
  num.sp = c(50, 50),
  col.sp = c(1, 2),
  pch.sp = c(1, 2),
  col.die = 1,
  pch.die = 4,
  cex = 3,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ecol.death.sim_+3A_nr">nr</code>, <code id="ecol.death.sim_+3A_nc">nc</code></td>
<td>
<p>number of rows and columns of the field (plants grow on a
<code>nr</code> x <code>nc</code> grid)</p>
</td></tr>
<tr><td><code id="ecol.death.sim_+3A_num.sp">num.sp</code></td>
<td>
<p>number of two plants respectively</p>
</td></tr>
<tr><td><code id="ecol.death.sim_+3A_col.sp">col.sp</code>, <code id="ecol.death.sim_+3A_pch.sp">pch.sp</code></td>
<td>
<p>colors and point symbols of the two species respectively</p>
</td></tr>
<tr><td><code id="ecol.death.sim_+3A_col.die">col.die</code>, <code id="ecol.death.sim_+3A_pch.die">pch.die</code>, <code id="ecol.death.sim_+3A_cex">cex</code></td>
<td>
<p>the color, point symbol and magnification to
annotate the plant which dies (symbol default to be an &lsquo;X&rsquo;)</p>
</td></tr>
<tr><td><code id="ecol.death.sim_+3A_...">...</code></td>
<td>
<p>other arguments passed to <code><a href="graphics.html#topic+plot">plot</a></code> to set up the plot</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector (factor) containing 1's and 2's, denoting the plants finally
survived
</p>


<h3>Note</h3>

<p><code>2 * ani.options('nmax')</code> image frames will actually be produced.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>This animation is motivated by a question raised from Jing Jiao,
a student in biology, to show the evolution of two species.
</p>
<p>The original post is in the forum of the &ldquo;Capital of Statistics&rdquo;:
<a href="https://d.cosx.org/d/14093">https://d.cosx.org/d/14093</a> (in Chinese)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
oopt = ani.options(nmax = ifelse(interactive(), 50, 2), interval = 0.3)
par(ann = FALSE, mar = rep(0, 4))
ecol.death.sim()

## large scale simulation
ani.options(nmax = ifelse(interactive(), 1000, 2), interval = 0.02)
ecol.death.sim(col.sp = c(8, 2), pch.sp = c(20, 17))

ani.options(oopt)

</code></pre>

<hr>
<h2 id='flip.coin'>Probability in flipping coins</h2><span id='topic+flip.coin'></span>

<h3>Description</h3>

<p>This function provides a simulation to the process of flipping coins and
computes the frequencies for &lsquo;heads&rsquo; and &lsquo;tails&rsquo;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flip.coin(
  faces = 2,
  prob = NULL,
  border = "white",
  grid = "white",
  col = 1:2,
  type = "p",
  pch = 21,
  bg = "transparent",
  digits = 3
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flip.coin_+3A_faces">faces</code></td>
<td>
<p>an integer or a character vector. See details below.</p>
</td></tr>
<tr><td><code id="flip.coin_+3A_prob">prob</code></td>
<td>
<p>the probability vector of showing each face. If <code>NULL</code>, each
face will be shown in the same probability.</p>
</td></tr>
<tr><td><code id="flip.coin_+3A_border">border</code></td>
<td>
<p>The border style for the rectangles which stand for
probabilities.</p>
</td></tr>
<tr><td><code id="flip.coin_+3A_grid">grid</code></td>
<td>
<p>the color for horizontal grid lines in these rectangles</p>
</td></tr>
<tr><td><code id="flip.coin_+3A_col">col</code></td>
<td>
<p>The colors to annotate different faces of the &lsquo;coin&rsquo;.</p>
</td></tr>
<tr><td><code id="flip.coin_+3A_type">type</code>, <code id="flip.coin_+3A_pch">pch</code>, <code id="flip.coin_+3A_bg">bg</code></td>
<td>
<p>See <code><a href="graphics.html#topic+points">points</a></code>.</p>
</td></tr>
<tr><td><code id="flip.coin_+3A_digits">digits</code></td>
<td>
<p>integer indicating the precision to be used in the annotation
of frequencies in the plot</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>faces</code> is a single integer, say 2, a sequence of integers from 1 to
<code>faces</code> will be used to denote the faces of a coin; otherwise this
character vector just gives the names of each face.
</p>
<p>When the <code class="reqn">i</code>-th face shows up, a colored thin rectangle will be added to
the corresponding place (the <code class="reqn">i</code>-th bar), and there will be corresponding
annotations for the number of tosses and frequencies.
</p>
<p>The special argument <code>grid</code> is for consideration of a too large number
of flipping, in which case if you still draw horizontal lines in these
rectangles, the rectangles will be completely covered by these lines, thus we
should specify it as <code>NA</code>.
</p>
<p>At last the frequency for each face will be computed and shown in the header
of the plot &ndash; this shall be close to <code>prob</code> if
<code>ani.options('nmax')</code> is large enough.
</p>


<h3>Value</h3>

<p>A list containing </p>
<table>
<tr><td><code>freq</code></td>
<td>
<p>A vector of frequencies (simulated
probabilities)</p>
</td></tr> <tr><td><code>nmax</code></td>
<td>
<p>the total number of tosses</p>
</td></tr>
</table>


<h3>Note</h3>

<p>You may change the colors of each face using the argument <code>col</code>
(repeated if shorter than the number of faces).
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/flip-coin/">https://yihui.org/animation/example/flip-coin/</a>
</p>


<h3>See Also</h3>

<p><code><a href="graphics.html#topic+points">points</a></code>, <code><a href="base.html#topic+sample">sample</a></code>
</p>

<hr>
<h2 id='g.brownian.motion'>Brownian Motion using Google Visualization API</h2><span id='topic+g.brownian.motion'></span>

<h3>Description</h3>

<p>We can use R to generate random numbers from the Normal distribution and
write them into an HTML document, then the Google Visualization gadget
&ldquo;motionchart&rdquo; will prepare the animation for us (a Flash animation with
several buttons).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>g.brownian.motion(
  p = 20,
  start = 1900,
  digits = 14,
  file = "index.html",
  width = 800,
  height = 600
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="g.brownian.motion_+3A_p">p</code></td>
<td>
<p>number of points</p>
</td></tr>
<tr><td><code id="g.brownian.motion_+3A_start">start</code></td>
<td>
<p>start &ldquo;year&rdquo;; it has no practical meaning in this animation
but it's the required by the Google gadget</p>
</td></tr>
<tr><td><code id="g.brownian.motion_+3A_digits">digits</code></td>
<td>
<p>the precision to round the numbers</p>
</td></tr>
<tr><td><code id="g.brownian.motion_+3A_file">file</code></td>
<td>
<p>the HTML filename</p>
</td></tr>
<tr><td><code id="g.brownian.motion_+3A_width">width</code>, <code id="g.brownian.motion_+3A_height">height</code></td>
<td>
<p>width and height of the animation</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>NULL</code>. An HTML page will be opened as the side effect.
</p>


<h3>Note</h3>

<p>The number of frames is controlled by <code>ani.options('nmax')</code> as
usual.
</p>
<p>Due to the &ldquo;security settings&rdquo; of Adobe Flash player, you might not be
able to view the generated Flash animation locally, i.e. using an address
like &lsquo;<span class="samp">&#8288;file:///C:/Temp/index.html&#8288;</span>&rsquo;. In this case, you can upload the
HTML file to a web server and use the http address to view the Flash file.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p><a href="https://developers.google.com/chart/?csw=1">https://developers.google.com/chart/?csw=1</a> and
<a href="https://yihui.org/en/2008/11/brownian-motion-using-google-visualization-api-and-r/">https://yihui.org/en/2008/11/brownian-motion-using-google-visualization-api-and-r/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+brownian.motion">brownian.motion</a></code>, <code><a href="#topic+BM.circle">BM.circle</a></code>,
<code><a href="stats.html#topic+rnorm">rnorm</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) g.brownian.motion(15, digits = 2, width = 600, height = 500,
    file = "BM-motion-chart.html")
</code></pre>

<hr>
<h2 id='grad.desc'>Gradient Descent Algorithm for the 2D case</h2><span id='topic+grad.desc'></span>

<h3>Description</h3>

<p>This function provids a visual illustration for the process of minimizing a
real-valued function through Gradient Descent Algorithm.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grad.desc(
  FUN = function(x, y) x^2 + 2 * y^2,
  rg = c(-3, -3, 3, 3),
  init = c(-3, 3),
  gamma = 0.05,
  tol = 0.001,
  gr = NULL,
  len = 50,
  interact = FALSE,
  col.contour = "red",
  col.arrow = "blue",
  main
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="grad.desc_+3A_fun">FUN</code></td>
<td>
<p>a bivariate objective function to be minimized (variable names do
not have to be <code>x</code> and <code>y</code>); if the gradient argument <code>gr</code>
is <code>NULL</code>, <code><a href="stats.html#topic+deriv">deriv</a></code> will be used to calculate the gradient,
in which case we should not put braces around the function body of
<code>FUN</code> (e.g. the default function is <code>function(x, y) x^2 + 2 *
y^2</code>)</p>
</td></tr>
<tr><td><code id="grad.desc_+3A_rg">rg</code></td>
<td>
<p>ranges for independent variables to plot contours; in a <code>c(x0,
y0, x1, y1)</code> form</p>
</td></tr>
<tr><td><code id="grad.desc_+3A_init">init</code></td>
<td>
<p>starting values</p>
</td></tr>
<tr><td><code id="grad.desc_+3A_gamma">gamma</code></td>
<td>
<p>size of a step</p>
</td></tr>
<tr><td><code id="grad.desc_+3A_tol">tol</code></td>
<td>
<p>tolerance to stop the iterations, i.e. the minimum difference
between <code class="reqn">F(x_i)</code> and <code class="reqn">F(x_{i+1})</code></p>
</td></tr>
<tr><td><code id="grad.desc_+3A_gr">gr</code></td>
<td>
<p>the gradient of <code>FUN</code>; it should be a bivariate function to
calculate the gradient (not the negative gradient!) of <code>FUN</code> at a
point <code class="reqn">(x,y)</code>, e.g. <code>function(x, y) 2 * x + 4 * y</code>. If it is
<code>NULL</code>, R will use <code><a href="stats.html#topic+deriv">deriv</a></code> to calculate the gradient</p>
</td></tr>
<tr><td><code id="grad.desc_+3A_len">len</code></td>
<td>
<p>desired length of the independent sequences (to compute z values
for contours)</p>
</td></tr>
<tr><td><code id="grad.desc_+3A_interact">interact</code></td>
<td>
<p>logical; whether choose the starting values by clicking on the
contour plot directly?</p>
</td></tr>
<tr><td><code id="grad.desc_+3A_col.contour">col.contour</code>, <code id="grad.desc_+3A_col.arrow">col.arrow</code></td>
<td>
<p>colors for the contour lines and arrows
respectively (default to be red and blue)</p>
</td></tr>
<tr><td><code id="grad.desc_+3A_main">main</code></td>
<td>
<p>the title of the plot; if missing, it will be derived from
<code>FUN</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Gradient descent is an optimization algorithm. To find a local minimum of a
function using gradient descent, one takes steps proportional to the negative
of the gradient (or the approximate gradient) of the function at the current
point. If instead one takes steps proportional to the gradient, one
approaches a local maximum of that function; the procedure is then known as
gradient ascent.
</p>
<p>The arrows are indicating the result of iterations and the process of
minimization; they will go to a local minimum in the end if the maximum
number of iterations <code>ani.options('nmax')</code> has not been reached.
</p>


<h3>Value</h3>

<p>A list containing </p>
<table>
<tr><td><code>par</code></td>
<td>
<p>the solution for the local minimum</p>
</td></tr>
<tr><td><code>value</code></td>
<td>
<p>the value of the objective function corresponding to
<code>par</code></p>
</td></tr> <tr><td><code>iter</code></td>
<td>
<p>the number of iterations; if it is equal to
<code>ani.options('nmax')</code>, it's quite likely that the solution is not
reliable because the maximum number of iterations has been reached</p>
</td></tr>
<tr><td><code>gradient</code></td>
<td>
<p>the gradient function of the objective function</p>
</td></tr>
<tr><td><code>persp</code></td>
<td>
<p>a function to make the perspective plot of the objective
function; can accept further arguments from <code><a href="graphics.html#topic+persp">persp</a></code> (see the
examples below)</p>
</td></tr>
</table>


<h3>Note</h3>

<p>Please make sure the function <code>FUN</code> provided is differentiable at
<code>init</code>, what's more, it should also be 'differentiable' using
<code><a href="stats.html#topic+deriv">deriv</a></code> if you do not provide the gradient function <code>gr</code>.
</p>
<p>If the arrows cannot reach the local minimum, the maximum number of
iterations <code>nmax</code> in <code><a href="#topic+ani.options">ani.options</a></code> may need to be
increased.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/grad-desc/">https://yihui.org/animation/example/grad-desc/</a>
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+deriv">deriv</a></code>, <code><a href="graphics.html#topic+persp">persp</a></code>, <code><a href="graphics.html#topic+contour">contour</a></code>,
<code><a href="stats.html#topic+optim">optim</a></code>
</p>

<hr>
<h2 id='HuSpeech'>Word counts of a speech by the Chinese President Hu</h2><span id='topic+HuSpeech'></span>

<h3>Description</h3>

<p>This speech came on the 30th anniversary of China's economic reform in 1978.
</p>


<h3>Format</h3>

<p>int [1:75] 119 175 222 204 276 168 257 89 61 288 ...
</p>


<h3>Details</h3>

<p>On Dec 18, 2008, Chinese President Hu gave a speech on the 30th anniversary
of China's economic reform in 1978, and this data has recorded the number of
words used in each paragraph of his speech.
</p>


<h3>Source</h3>

<p>The full text of speech is at
<code style="white-space: pre;">&#8288;http://cpc.people.com.cn/GB/64093/64094/8544901.html&#8288;</code> (you may use
<code style="white-space: pre;">&#8288;web.archive.org&#8288;</code> if this URL is no longer accessible).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## clear pattern: 1/3 short, 1/3 long, 1/3 short again
plot(HuSpeech, type = "b", pch = 20, xlab = "paragraph index", ylab = "word count")
## see ?moving.block for an animation example
</code></pre>

<hr>
<h2 id='iatemp'>Average yearly temperatures in central Iowa</h2><span id='topic+iatemp'></span>

<h3>Description</h3>

<p>Temperatures in central Iowa over 106 years.
</p>


<h3>Format</h3>

<p>Time-Series [1:116] from 1895 to 2010: 32.7 27.8 32.7 30.4 42.6 31.9
34.5 39.8 32.6 39.6 ...
</p>


<h3>Source</h3>

<p><a href="http://www.wrcc.dri.edu/cgi-bin/divplot1_form.pl?1305">http://www.wrcc.dri.edu/cgi-bin/divplot1_form.pl?1305</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plot(iatemp)
</code></pre>

<hr>
<h2 id='im.convert'>A wrapper for the &lsquo;convert&rsquo; utility of ImageMagick or GraphicsMagick</h2><span id='topic+im.convert'></span><span id='topic+gm.convert'></span>

<h3>Description</h3>

<p>The main purpose of these two functions is to create GIF animations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>im.convert(
  files,
  output = "animation.gif",
  convert = c("magick", "convert", "gm convert"),
  cmd.fun = if (.Platform$OS.type == "windows") shell else system,
  extra.opts = "",
  clean = FALSE
)

gm.convert(..., convert = "gm convert")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="im.convert_+3A_files">files</code></td>
<td>
<p>either a character vector of file names, or a single string
containing wildcards (e.g. &lsquo;<span class="file">Rplot*.png</span>&rsquo;)</p>
</td></tr>
<tr><td><code id="im.convert_+3A_output">output</code></td>
<td>
<p>the file name of the output (with proper extensions, e.g.
<code>gif</code>)</p>
</td></tr>
<tr><td><code id="im.convert_+3A_convert">convert</code></td>
<td>
<p>the <code>convert</code> command; it must be <code>'magick'</code>,
<code>'convert'</code> or <code>'gm convert'</code>; and it can be pre-specified as an
option in <code><a href="#topic+ani.options">ani.options</a>('convert')</code>, e.g. (Windows users)
<code>ani.options(convert = 'c:/program
files/imagemagick/convert.exe')</code>, or (Mac users) <code>ani.options(convert
= '/opt/local/bin/convert')</code>; see the Note section for more details</p>
</td></tr>
<tr><td><code id="im.convert_+3A_cmd.fun">cmd.fun</code></td>
<td>
<p>a function to invoke the OS command; by default
<code><a href="base.html#topic+system">system</a></code></p>
</td></tr>
<tr><td><code id="im.convert_+3A_extra.opts">extra.opts</code></td>
<td>
<p>additional options to be passed to <code>convert</code> (or
<code>gm convert</code>)</p>
</td></tr>
<tr><td><code id="im.convert_+3A_clean">clean</code></td>
<td>
<p>logical: delete the input <code>files</code> or not</p>
</td></tr>
<tr><td><code id="im.convert_+3A_...">...</code></td>
<td>
<p>arguments to be passed to <code><a href="#topic+im.convert">im.convert</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function <code>im.convert</code> simply wraps the arguments of the
<code>convert</code> utility of ImageMagick to make it easier to call
ImageMagick in R;
</p>
<p>The function <code>gm.convert</code> is a wrapper for the command
<code>gm convert</code> of GraphicsMagick.
</p>


<h3>Value</h3>

<p>The command for the conversion.
</p>
<p>If <code>ani.options('autobrowse') == TRUE</code>, this function will also try to
open the output automatically.
</p>


<h3>Note</h3>

<p>If <code>files</code> is a character vector, please make sure the order of
filenames is correct! The first animation frame will be <code>files[1]</code>,
the second frame will be <code>files[2]</code>, ...
</p>
<p>Both ImageMagick and GraphicsMagick may have a limit on the number of
images to be converted. It is a known issue that this function can fail
with more than (approximately) 9000 images. The function
<code><a href="#topic+saveVideo">saveVideo</a></code> is a better alternative in such a case.
</p>
<p>Most Windows users do not have read the boring notes below after they have
installed ImageMagick or GraphicsMagick. For the rest of Windows users:
</p>

<dl>
<dt><strong>ImageMagick users</strong></dt><dd><p>Please install ImageMagick from
<a href="http://www.imagemagick.org">http://www.imagemagick.org</a>, and make sure the the path to
<code>convert.exe</code> is in your <code>'PATH'</code> variable, in which case the
command <code>convert</code> can be called without the full path.  Windows
users are often very confused about the ImageMagick and <code>'PATH'</code>
setting, so I'll try to search for ImageMagick in the Registry Hive by
<code>readRegistry('SOFTWARE\ImageMagick\Current')$BinPath</code>, thus you might
not really need to modify your <code>'PATH'</code> variable.
</p>
<p>For Windows users who have installed LyX, I will also try to find the
<code>convert</code> utility in the LyX installation directory, so they do not
really have to install ImageMagick if LyX exists in their system (of
course, the LyX should be installed with ImageMagick).
</p>
<p>Once the <code>convert</code> utility is found, the animation option
<code>'convert'</code> will be set (<code>ani.options(convert =
  'path/to/convert.exe')</code>); this can save time for searching for
<code>convert</code> in the operating system next time.  </p>
</dd>
<dt><strong>GraphicsMagick users</strong></dt><dd><p>During the installation of
GraphicsMagick, you will be asked if you allow it to change the PATH
variable; please do check the option.  </p>
</dd>
</dl>

<p>A reported problem is <code>cmd.fun = shell</code> might not work under Windows
but <code>cmd.fun = system</code> works fine. Try this option in case of
failures.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/im-convert/">https://yihui.org/animation/example/im-convert/</a>
</p>
<p>ImageMagick: <a href="http://www.imagemagick.org/script/convert.php">http://www.imagemagick.org/script/convert.php</a>
</p>
<p>GraphicsMagick: <a href="http://www.graphicsmagick.org">http://www.graphicsmagick.org</a>
</p>


<h3>See Also</h3>

<p>Other utilities: 
<code><a href="#topic+saveGIF">saveGIF</a>()</code>,
<code><a href="#topic+saveHTML">saveHTML</a>()</code>,
<code><a href="#topic+saveLatex">saveLatex</a>()</code>,
<code><a href="#topic+saveSWF">saveSWF</a>()</code>,
<code><a href="#topic+saveVideo">saveVideo</a>()</code>
</p>

<hr>
<h2 id='kfcv'>Sample sizes for k-fold cross-validation</h2><span id='topic+kfcv'></span>

<h3>Description</h3>

<p>Compute sample sizes for <code class="reqn">k</code>-fold cross-validation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kfcv(k, N)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kfcv_+3A_k">k</code></td>
<td>
<p>number of groups.</p>
</td></tr>
<tr><td><code id="kfcv_+3A_n">N</code></td>
<td>
<p>total sample size.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If N/k is an integer, the sample sizes are k &lsquo;N/k&rsquo;s (N/k, N/k, ...),
otherwise the remainder will be allocated to each group as &lsquo;uniformly&rsquo; as
possible, and at last these sample sizes will be permuted randomly.
</p>


<h3>Value</h3>

<p>A vector of length <code>k</code> containing <code class="reqn">k</code> sample sizes.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cv.ani">cv.ani</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## divisible
kfcv(5, 25)

## not divisible
kfcv(10, 77)
</code></pre>

<hr>
<h2 id='kmeans.ani'>Demonstration of the k-Means clustering algorithm</h2><span id='topic+kmeans.ani'></span>

<h3>Description</h3>

<p>This function provides a demo of the k-Means cluster algorithm for data
containing only two variables (columns).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kmeans.ani(
  x = cbind(X1 = runif(50), X2 = runif(50)),
  centers = 3,
  hints = c("Move centers!", "Find cluster?"),
  pch = 1:3,
  col = 1:3
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kmeans.ani_+3A_x">x</code></td>
<td>
<p>A numercal matrix or an object that can be coerced to such a matrix
(such as a numeric vector or a data frame with all numeric columns)
containing <em>only</em> 2 columns.</p>
</td></tr>
<tr><td><code id="kmeans.ani_+3A_centers">centers</code></td>
<td>
<p>Either the number of clusters or a set of initial (distinct)
cluster centres.  If a number, a random set of (distinct) rows in <code>x</code>
is chosen as the initial centres.</p>
</td></tr>
<tr><td><code id="kmeans.ani_+3A_hints">hints</code></td>
<td>
<p>Two text strings indicating the steps of k-means clustering:
move the center or find the cluster membership?</p>
</td></tr>
<tr><td><code id="kmeans.ani_+3A_pch">pch</code>, <code id="kmeans.ani_+3A_col">col</code></td>
<td>
<p>Symbols and colors for different clusters; the length of these
two arguments should be equal to the number of clusters, or they will be
recycled.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The k-Means cluster algorithm may be regarded as a series of iterations of:
finding cluster centers, computing distances between sample points, and
redefining cluster membership.
</p>
<p>The data given by <code>x</code> is clustered by the <code class="reqn">k</code>-means method, which
aims to partition the points into <code class="reqn">k</code> groups such that the sum of squares
from points to the assigned cluster centers is minimized. At the minimum, all
cluster centres are at the mean of their Voronoi sets (the set of data points
which are nearest to the cluster centre).
</p>


<h3>Value</h3>

<p>A list with components </p>
<table>
<tr><td><code>cluster</code></td>
<td>
<p>A vector of integers
indicating the cluster to which each point is allocated.</p>
</td></tr> <tr><td><code>centers</code></td>
<td>
<p>A
matrix of cluster centers.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>This function is only for demonstration purpose. For practical
applications please refer to <code><a href="stats.html#topic+kmeans">kmeans</a></code>.
</p>
<p>Note that <code>ani.options('nmax')</code> is defined as the maximum number of
iterations in such a sense: an iteration includes the process of computing
distances, redefining membership and finding centers. Thus there should be
<code>2 * ani.options('nmax')</code> animation frames in the output if the other
condition for stopping the iteration has not yet been met (i.e. the cluster
membership will not change any longer).
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/kmeans-ani/">https://yihui.org/animation/example/kmeans-ani/</a>
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+kmeans">kmeans</a></code>
</p>

<hr>
<h2 id='knn.ani'>Demonstration of the k-Nearest Neighbour classification</h2><span id='topic+knn.ani'></span>

<h3>Description</h3>

<p>Demonstrate the process of k-Nearest Neighbour classification on the 2D
plane.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>knn.ani(
  train,
  test,
  cl,
  k = 10,
  interact = FALSE,
  tt.col = c("blue", "red"),
  cl.pch = seq_along(unique(cl)),
  dist.lty = 2,
  dist.col = "gray",
  knn.col = "green",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="knn.ani_+3A_train">train</code></td>
<td>
<p>matrix or data frame of training set cases containing only 2
columns</p>
</td></tr>
<tr><td><code id="knn.ani_+3A_test">test</code></td>
<td>
<p>matrix or data frame of test set cases. A vector will be
interpreted as a row vector for a single case. It should also contain only
2 columns. This data set will be <em>ignored</em> if <code>interact = TRUE</code>;
see <code>interact</code> below.</p>
</td></tr>
<tr><td><code id="knn.ani_+3A_cl">cl</code></td>
<td>
<p>factor of true classifications of training set</p>
</td></tr>
<tr><td><code id="knn.ani_+3A_k">k</code></td>
<td>
<p>number of neighbours considered.</p>
</td></tr>
<tr><td><code id="knn.ani_+3A_interact">interact</code></td>
<td>
<p>logical. If <code>TRUE</code>, the user will have to choose a test
set for himself using mouse click on the screen; otherwise compute kNN
classification based on argument <code>test</code>.</p>
</td></tr>
<tr><td><code id="knn.ani_+3A_tt.col">tt.col</code></td>
<td>
<p>a vector of length 2 specifying the colors for the training
data and test data.</p>
</td></tr>
<tr><td><code id="knn.ani_+3A_cl.pch">cl.pch</code></td>
<td>
<p>a vector specifying symbols for each class</p>
</td></tr>
<tr><td><code id="knn.ani_+3A_dist.lty">dist.lty</code>, <code id="knn.ani_+3A_dist.col">dist.col</code></td>
<td>
<p>the line type and color to annotate the distances</p>
</td></tr>
<tr><td><code id="knn.ani_+3A_knn.col">knn.col</code></td>
<td>
<p>the color to annotate the k-nearest neighbour points using a
polygon</p>
</td></tr>
<tr><td><code id="knn.ani_+3A_...">...</code></td>
<td>
<p>additional arguments to create the empty frame for the animation
(passed to <code><a href="graphics.html#topic+plot.default">plot.default</a></code>)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For each row of the test set, the <code class="reqn">k</code> nearest (in Euclidean distance)
training set vectors are found, and the classification is decided by majority
vote, with ties broken at random. For a single test sample point, the basic
steps are:
</p>
 <ol>
<li><p> locate the test point </p>
</li>
<li><p> compute the distances between
the test point and all points in the training set </p>
</li>
<li><p> find <code class="reqn">k</code> shortest
distances and the corresponding training set points </p>
</li>
<li><p> vote for the result
(find the maximum in the table for the true classifications) </p>
</li></ol>

<p>As there are four steps in an iteration, the total number of animation frames
should be <code>4 * min(nrow(test), ani.options('nmax'))</code> at last.
</p>


<h3>Value</h3>

<p>A vector of class labels for the test set.
</p>


<h3>Note</h3>

<p>There is a special restriction (only two columns) on the training and
test data set just for sake of the convenience for making a scatterplot.
This is only a rough demonstration; for practical applications, please
refer to existing kNN functions such as <code><a href="class.html#topic+knn">knn</a></code> in
<span class="pkg">class</span>, etc.
</p>
<p>If either one of <code>train</code> and <code>test</code> is missing, there'll be
random matrices prepared for them. (It's the same for <code>cl</code>.)
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/knn-ani/">https://yihui.org/animation/example/knn-ani/</a>
</p>
<p>Venables, W. N. and Ripley, B. D. (2002) <em>Modern Applied
Statistics with S</em>. Fourth edition. Springer.
</p>


<h3>See Also</h3>

<p><code><a href="class.html#topic+knn">knn</a></code>
</p>

<hr>
<h2 id='least.squares'>Demonstrate the least squares method</h2><span id='topic+least.squares'></span>

<h3>Description</h3>

<p>This is a simple demonstration of the meaning of least squares in univariate
linear regression.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>least.squares(
  x,
  y,
  n = 15,
  ani.type = c("slope", "intercept"),
  a,
  b,
  a.range,
  b.range,
  ab.col = c("gray", "black"),
  est.pch = 19,
  v.col = "red",
  v.lty = 2,
  rss.pch = 19,
  rss.type = "o",
  mfrow = c(1, 2),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="least.squares_+3A_x">x</code></td>
<td>
<p>a numeric vector: the independent variable</p>
</td></tr>
<tr><td><code id="least.squares_+3A_y">y</code></td>
<td>
<p>a numeric vector: the dependent variable</p>
</td></tr>
<tr><td><code id="least.squares_+3A_n">n</code></td>
<td>
<p>the sample size: when x and y are missing, we use simulated values
of y (<code>x = 1:n</code> and <code>y = a + b * x + rnorm(n)</code>)</p>
</td></tr>
<tr><td><code id="least.squares_+3A_ani.type">ani.type</code></td>
<td>
<p><code>'slope'</code>: the slope is changing with the intercept
fixed; <code>'intercept'</code>: intercept changing and slope fixed</p>
</td></tr>
<tr><td><code id="least.squares_+3A_a">a</code>, <code id="least.squares_+3A_b">b</code></td>
<td>
<p>the fixed intercept and slope; depending on <code>ani.type</code>, we
only need to specify one of them; e.g. when <code>ani.type == 'slope'</code>, we
need to specify the value of <code>a</code></p>
</td></tr>
<tr><td><code id="least.squares_+3A_a.range">a.range</code>, <code id="least.squares_+3A_b.range">b.range</code></td>
<td>
<p>a vector of length 2 to define the range of the
intercept and the slope; only one of them need to be specified; see above</p>
</td></tr>
<tr><td><code id="least.squares_+3A_ab.col">ab.col</code></td>
<td>
<p>the colors of two lines: the real regression line and the
moving line with either intercept or slope changing</p>
</td></tr>
<tr><td><code id="least.squares_+3A_est.pch">est.pch</code></td>
<td>
<p>the point character of the 'estimated' values given <code>x</code></p>
</td></tr>
<tr><td><code id="least.squares_+3A_v.col">v.col</code>, <code id="least.squares_+3A_v.lty">v.lty</code></td>
<td>
<p>the color and line type of the vetical lines which
demonstrate the residuals</p>
</td></tr>
<tr><td><code id="least.squares_+3A_rss.pch">rss.pch</code>, <code id="least.squares_+3A_rss.type">rss.type</code></td>
<td>
<p>the point character and plot type of the residual
plot</p>
</td></tr>
<tr><td><code id="least.squares_+3A_mfrow">mfrow</code></td>
<td>
<p>defines the layout of the graph; see <code><a href="graphics.html#topic+par">par</a></code></p>
</td></tr>
<tr><td><code id="least.squares_+3A_...">...</code></td>
<td>
<p>other parameters passed to <code><a href="graphics.html#topic+plot">plot</a></code> to define the
appearance of the scatterplot</p>
</td></tr>
</table>


<h3>Details</h3>

<p>With either the intercept or the slope changing, the lines will be moving in
the graph and corresponding residuals will be plotted. We can finally see the
best estimate of the intercept and the slope from the residual plot.
</p>


<h3>Value</h3>

<p>The value returned depends on the animation type.
</p>
<p>If it is a slope animation, the value will be a list containing
</p>
<table>
<tr><td><code>lmfit</code></td>
<td>
<p> the estimates of the intercept and slope with
<code><a href="stats.html#topic+lm">lm</a></code> </p>
</td></tr> <tr><td><code>anifit</code></td>
<td>
<p> the estimate of the slope in the
animation </p>
</td></tr></table>
<p> If it is an intercept animation, the second component of the
above list will be the estimate of the intercept.
</p>
<p>Note the estimate will not be precise generally.
</p>


<h3>Note</h3>

<p><code>ani.options('nmax')</code> specifies the maximum number of steps for
the slope or intercept to move.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/least-squares/">https://yihui.org/animation/example/least-squares/</a>
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+lm">lm</a></code>
</p>

<hr>
<h2 id='lln.ani'>Demonstration of Law of Large Numbers</h2><span id='topic+lln.ani'></span>

<h3>Description</h3>

<p>This function plots the sample mean as the sample size grows to check whether
the sample mean approaches to the population mean.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lln.ani(
  FUN = rnorm,
  mu = 0,
  np = 30,
  pch = 20,
  col.poly = "bisque",
  col.mu = "gray",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lln.ani_+3A_fun">FUN</code></td>
<td>
<p>a function to generate random numbers from a certain distribution:
<code>function(n, mu)</code></p>
</td></tr>
<tr><td><code id="lln.ani_+3A_mu">mu</code></td>
<td>
<p>population mean; passed to <code>FUN</code></p>
</td></tr>
<tr><td><code id="lln.ani_+3A_np">np</code></td>
<td>
<p>times for sampling from a distribution (not the sample size!); to
examine the behaviour of the sample mean, we need more times of sampling to
get a series of mean values</p>
</td></tr>
<tr><td><code id="lln.ani_+3A_pch">pch</code></td>
<td>
<p>symbols for points; see Details</p>
</td></tr>
<tr><td><code id="lln.ani_+3A_col.poly">col.poly</code></td>
<td>
<p>the color of the polygon to annotate the range of sample
means</p>
</td></tr>
<tr><td><code id="lln.ani_+3A_col.mu">col.mu</code></td>
<td>
<p>the color of the horizontal line which denotes the population
mean</p>
</td></tr>
<tr><td><code id="lln.ani_+3A_...">...</code></td>
<td>
<p>other arguments passed to <code><a href="graphics.html#topic+points">points</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>np</code> points are plotted to denote the distribution of the sample mean;
we will observe that the range of the sample mean just becomes smaller and
smaller as the sample size increases and ultimately there will be an obvious
trend that the sample mean converges to the population mean <code>mu</code>.
</p>
<p>The parameter <code>nmax</code> in <code><a href="#topic+ani.options">ani.options</a></code> means the maximum
sample size.
</p>


<h3>Value</h3>

<p>None (invisible <code>NULL</code>).
</p>


<h3>Note</h3>

<p>The argument <code>pch</code> will influence the speed of plotting, and for a
very large sample size (say, 300), it is suggested that this argument be
specified as '<code>.</code>'.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/lln-ani/">https://yihui.org/animation/example/lln-ani/</a>
</p>

<hr>
<h2 id='MC.hitormiss'>Hit or Miss Monte Carlo integration</h2><span id='topic+MC.hitormiss'></span>

<h3>Description</h3>

<p>Integrate a function using the Hit-or-Miss Monte Carlo algorithm.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>MC.hitormiss(
  FUN = function(x) x - x^2,
  n = ani.options("nmax"),
  from = 0,
  to = 1,
  col.points = c("black", "red"),
  pch.points = c(20, 4),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="MC.hitormiss_+3A_fun">FUN</code></td>
<td>
<p>the function to be integrated</p>
</td></tr>
<tr><td><code id="MC.hitormiss_+3A_n">n</code></td>
<td>
<p>number of points to be sampled from the Uniform(0, 1) distribution</p>
</td></tr>
<tr><td><code id="MC.hitormiss_+3A_from">from</code>, <code id="MC.hitormiss_+3A_to">to</code></td>
<td>
<p>the limits of integration</p>
</td></tr>
<tr><td><code id="MC.hitormiss_+3A_col.points">col.points</code>, <code id="MC.hitormiss_+3A_pch.points">pch.points</code></td>
<td>
<p>colors and point characters for points which
&ldquo;hit&rdquo; or &ldquo;miss&rdquo; the area under the curve</p>
</td></tr>
<tr><td><code id="MC.hitormiss_+3A_...">...</code></td>
<td>
<p>other arguments passed to <code><a href="graphics.html#topic+points">points</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>We compute the proportion of points hitting the area under the curve, and the
integral can be estimated by the proportion multiplied by the total area of
the rectangle (from xmin to xmax, ymin to ymax).
</p>


<h3>Value</h3>

<p>A list containing </p>
<table>
<tr><td><code>x1</code></td>
<td>
<p> the Uniform random numbers generated on
x-axis</p>
</td></tr> <tr><td><code>x2</code></td>
<td>
<p> the Uniform random numbers generated on y-axis</p>
</td></tr>
<tr><td><code>y</code></td>
<td>
<p> function values evaluated at <code>x1</code> </p>
</td></tr> <tr><td><code>n</code></td>
<td>
<p> number of
points drawn from the Uniform distribtion </p>
</td></tr> <tr><td><code>est</code></td>
<td>
<p> the estimated value
of the integral </p>
</td></tr>
</table>


<h3>Note</h3>

<p>This function is for demonstration purpose only; the integral might be
very inaccurate when <code>n</code> is small.
</p>
<p><code>ani.options('nmax')</code> specifies the maximum number of trials.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/mc-hitormiss/">https://yihui.org/animation/example/mc-hitormiss/</a>
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+integrate">integrate</a></code>, <code><a href="#topic+MC.samplemean">MC.samplemean</a></code>
</p>

<hr>
<h2 id='MC.samplemean'>Sample Mean Monte Carlo integration</h2><span id='topic+MC.samplemean'></span>

<h3>Description</h3>

<p>Integrate a function from 0 to 1 using the Sample Mean Monte Carlo algorithm
</p>


<h3>Usage</h3>

<pre><code class='language-R'>MC.samplemean(
  FUN = function(x) x - x^2,
  n = ani.options("nmax"),
  col.rect = c("gray", "black"),
  adj.x = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="MC.samplemean_+3A_fun">FUN</code></td>
<td>
<p>the function to be integrated</p>
</td></tr>
<tr><td><code id="MC.samplemean_+3A_n">n</code></td>
<td>
<p>number of points to be sampled from the Uniform(0, 1) distribution</p>
</td></tr>
<tr><td><code id="MC.samplemean_+3A_col.rect">col.rect</code></td>
<td>
<p>colors of rectangles (for the past rectangles and the current
one)</p>
</td></tr>
<tr><td><code id="MC.samplemean_+3A_adj.x">adj.x</code></td>
<td>
<p>should the locations of rectangles on the x-axis be adjusted?
If <code>TRUE</code>, the rectangles will be laid side by side and it is
informative for us to assess the total area of the rectangles, otherwise
the rectangles will be laid at their exact locations.</p>
</td></tr>
<tr><td><code id="MC.samplemean_+3A_...">...</code></td>
<td>
<p>other arguments passed to <code><a href="graphics.html#topic+rect">rect</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p><em>Sample Mean Monte Carlo</em> integration can compute
</p>
<p style="text-align: center;"><code class="reqn">I=\int_0^1 f(x) dx</code>
</p>

<p>by drawing random numbers <code class="reqn">x_i</code> from Uniform(0, 1) distribution and
average the values of <code class="reqn">f(x_i)</code>. As <code class="reqn">n</code> goes to infinity, the sample
mean will approach to the expectation of <code class="reqn">f(X)</code> by Law of Large Numbers.
</p>
<p>The height of the <code class="reqn">i</code>-th rectangle in the animation is <code class="reqn">f(x_i)</code> and
the width is <code class="reqn">1/n</code>, so the total area of all the rectangles is <code class="reqn">\sum
f(x_i) 1/n</code>, which is just the sample mean. We can compare the area of
rectangles to the curve to see how close is the area to the real integral.
</p>


<h3>Value</h3>

<p>A list containing </p>
<table>
<tr><td><code>x</code></td>
<td>
<p> the Uniform random numbers </p>
</td></tr> <tr><td><code>y</code></td>
<td>

<p>function values evaluated at <code>x</code> </p>
</td></tr> <tr><td><code>n</code></td>
<td>
<p> number of points drawn
from the Uniform distribtion </p>
</td></tr> <tr><td><code>est</code></td>
<td>
<p> the estimated value of the
integral </p>
</td></tr>
</table>


<h3>Note</h3>

<p>This function is for demonstration purpose only; the integral might be
very inaccurate when <code>n</code> is small.
</p>
<p><code>ani.options('nmax')</code> specifies the maximum number of trials.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/mc-samplemean/">https://yihui.org/animation/example/mc-samplemean/</a>
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+integrate">integrate</a></code>, <code><a href="#topic+MC.hitormiss">MC.hitormiss</a></code>
</p>

<hr>
<h2 id='moving.block'>Cycle through an R object and plot each subset of elements</h2><span id='topic+moving.block'></span>

<h3>Description</h3>

<p>For a long numeric vector or matrix (or data frame), we can plot only a
subset of its elements to take a closer look at its structure. With a moving
&ldquo;block&rdquo; from the beginning to the end of a vector or matrix or any R
objects to which we can apply <code>subset</code>, all elements inside the block
are plotted as a line or scatter plot or any customized plots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moving.block(dat = runif(100), block, FUN, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="moving.block_+3A_dat">dat</code></td>
<td>
<p>a numeric vector or two-column matrix</p>
</td></tr>
<tr><td><code id="moving.block_+3A_block">block</code></td>
<td>
<p>block length (i.e. how many elements are to be plotted in each
step)</p>
</td></tr>
<tr><td><code id="moving.block_+3A_fun">FUN</code></td>
<td>
<p>a plot function to be applied to the subset of data</p>
</td></tr>
<tr><td><code id="moving.block_+3A_...">...</code></td>
<td>
<p>other arguments passed to <code>FUN</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>For a vector, the elments from <code>i + 1</code> to <code>i + block</code> will be
plotted in the i-th step; similarly for a matrix or data frame, a (scatter)
plot will be created from the <code>i + 1</code>-th row to <code>i + block</code>-th row.
</p>
<p>However, this function is not limited to scatter plots or lines &ndash; we can
customize the function <code>FUN</code> as we wish.
</p>


<h3>Value</h3>

<p><code>NULL</code>
</p>


<h3>Note</h3>

<p>There will be <code>ani.options('nmax')</code> image frames created in the
end. Ideally the relationship between <code>ani.options('nmax')</code> and
<code>block</code> should follow this equality: <code>block = length(x) -
  ani.options('nmax') + 1</code> (replace <code>length(x)</code> with <code>nrow(x)</code> when
<code>x</code> is a matrix). The function will compute <code>block</code> according to
the equality by default if no block length is specified.
</p>
<p>The three arguments <code>dat</code>, <code>i</code> and <code>block</code> are passed to
<code>FUN</code> in case we want to customize the plotting function, e.g. we may
want to annonate the x-axis label with <code>i</code>, or we want to compute the
mean value of <code>dat[i + 1:block]</code>, etc. See the examples below to learn
more about how to make use of these three arguments.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/moving-block/">https://yihui.org/animation/example/moving-block/</a>
</p>

<hr>
<h2 id='mwar.ani'>Demonstration for &ldquo;Moving Window Auto-Regression&rdquo;</h2><span id='topic+mwar.ani'></span>

<h3>Description</h3>

<p>This function just fulfills a very naive idea about moving window regression
using rectangles to denote the &ldquo;windows&rdquo; and move them, and the
corresponding AR(1) coefficients as long as rough confidence intervals are
computed for data points inside the &ldquo;windows&rdquo; during the process of moving.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mwar.ani(
  x,
  k = 15,
  conf = 2,
  mat = matrix(1:2, 2),
  widths = rep(1, ncol(mat)),
  heights = rep(1, nrow(mat)),
  lty.rect = 2,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mwar.ani_+3A_x">x</code></td>
<td>
<p>univariate time-series (a single numerical vector); default to be
<code>sin(seq(0, 2 * pi, length = 50)) + rnorm(50, sd = 0.2)</code></p>
</td></tr>
<tr><td><code id="mwar.ani_+3A_k">k</code></td>
<td>
<p>an integer of the window width</p>
</td></tr>
<tr><td><code id="mwar.ani_+3A_conf">conf</code></td>
<td>
<p>a positive number: the confidence intervals are computed as
<code>c(ar1 - conf*s.e., ar1 + conf*s.e.)</code></p>
</td></tr>
<tr><td><code id="mwar.ani_+3A_mat">mat</code>, <code id="mwar.ani_+3A_widths">widths</code>, <code id="mwar.ani_+3A_heights">heights</code></td>
<td>
<p>arguments passed to <code><a href="graphics.html#topic+layout">layout</a></code> to divide
the device into 2 parts</p>
</td></tr>
<tr><td><code id="mwar.ani_+3A_lty.rect">lty.rect</code></td>
<td>
<p>the line type of the rectangles respresenting the moving
&ldquo;windows&rdquo;</p>
</td></tr>
<tr><td><code id="mwar.ani_+3A_...">...</code></td>
<td>
<p>other arguments passed to <code><a href="graphics.html#topic+points">points</a></code> in the bottom
plot (the centers of the arrows)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The AR(1) coefficients are computed by <code><a href="stats.html#topic+arima">arima</a></code>.
</p>


<h3>Value</h3>

<p>A list containing </p>
<table>
<tr><td><code>phi</code></td>
<td>
<p>the AR(1) coefficients</p>
</td></tr> <tr><td><code>L</code></td>
<td>
<p>lower
bound of the confidence interval</p>
</td></tr> <tr><td><code>U</code></td>
<td>
<p>upper bound of the confidence
interval</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/mwar-ani/">https://yihui.org/animation/example/mwar-ani/</a>
</p>
<p>Robert A. Meyer, Jr. Estimating coefficients that change over
time. <em>International Economic Review</em>, 13(3):705-710, 1972.
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+arima">arima</a></code>
</p>

<hr>
<h2 id='newton.method'>Demonstration of the Newton-Raphson method for root-finding</h2><span id='topic+newton.method'></span>

<h3>Description</h3>

<p>This function provides an illustration of the iterations in Newton's method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>newton.method(
  FUN = function(x) x^2 - 4,
  init = 10,
  rg = c(-1, 10),
  tol = 0.001,
  interact = FALSE,
  col.lp = c("blue", "red", "red"),
  main,
  xlab,
  ylab,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="newton.method_+3A_fun">FUN</code></td>
<td>
<p>the function in the equation to solve (univariate), which has to
be defined without braces like the default one (otherwise the derivative
cannot be computed)</p>
</td></tr>
<tr><td><code id="newton.method_+3A_init">init</code></td>
<td>
<p>the starting point</p>
</td></tr>
<tr><td><code id="newton.method_+3A_rg">rg</code></td>
<td>
<p>the range for plotting the curve</p>
</td></tr>
<tr><td><code id="newton.method_+3A_tol">tol</code></td>
<td>
<p>the desired accuracy (convergence tolerance)</p>
</td></tr>
<tr><td><code id="newton.method_+3A_interact">interact</code></td>
<td>
<p>logical; whether choose the starting point by cliking on the
curve (for 1 time) directly?</p>
</td></tr>
<tr><td><code id="newton.method_+3A_col.lp">col.lp</code></td>
<td>
<p>a vector of length 3 specifying the colors of: vertical lines,
tangent lines and points</p>
</td></tr>
<tr><td><code id="newton.method_+3A_main">main</code>, <code id="newton.method_+3A_xlab">xlab</code>, <code id="newton.method_+3A_ylab">ylab</code></td>
<td>
<p>titles of the plot; there are default values for them
(depending on the form of the function <code>FUN</code>)</p>
</td></tr>
<tr><td><code id="newton.method_+3A_...">...</code></td>
<td>
<p>other arguments passed to <code><a href="graphics.html#topic+curve">curve</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Newton's method (also known as the Newton-Raphson method or the
Newton-Fourier method) is an efficient algorithm for finding approximations
to the zeros (or roots) of a real-valued function f(x).
</p>
<p>The iteration goes on in this way:
</p>
<p style="text-align: center;"><code class="reqn">x_{k + 1} = x_{k} - \frac{FUN(x_{k})}{FUN'(x_{k})}</code>
</p>

<p>From the starting value <code class="reqn">x_0</code>, vertical lines and points are plotted to
show the location of the sequence of iteration values <code class="reqn">x_1, x_2,
\ldots</code>; tangent lines are drawn to illustrate the
relationship between successive iterations; the iteration values are in the
right margin of the plot.
</p>


<h3>Value</h3>

<p>A list containing </p>
<table>
<tr><td><code>root</code></td>
<td>
<p>the root found by the algorithm</p>
</td></tr>
<tr><td><code>value</code></td>
<td>
<p>the value of <code>FUN(root)</code></p>
</td></tr> <tr><td><code>iter</code></td>
<td>
<p>number of
iterations; if it is equal to <code>ani.options('nmax')</code>, it's quite likely
that the root is not reliable because the maximum number of iterations has
been reached</p>
</td></tr>
</table>


<h3>Note</h3>

<p>The algorithm might not converge &ndash; it depends on the starting value.
See the examples below.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/newton-method/">https://yihui.org/animation/example/newton-method/</a>
</p>
<p>For more information about Newton's method, please see <a href="https://en.wikipedia.org/wiki/Newton's_method">https://en.wikipedia.org/wiki/Newton's_method</a>
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+optim">optim</a></code>
</p>

<hr>
<h2 id='ObamaSpeech'>Word counts of a speech by the US President Obama</h2><span id='topic+ObamaSpeech'></span>

<h3>Description</h3>

<p>This data recorded the number of words in each paragraph of Barack Obama's
speech in Chicago after winning the presidential election.
</p>


<h3>Format</h3>

<p>int [1:59] 2 45 52 53 11 48 28 15 50 29 ...
</p>


<h3>Source</h3>

<p>The full text of speech is at
<a href="http://web.archive.org/web/20160306143403/http://www.baltimoresun.com/news/nation-world/bal-text1105-story.html">http://web.archive.org/web/20160306143403/http://www.baltimoresun.com/news/nation-world/bal-text1105-story.html</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## pattern: longer paragraph and shorter paragraph
plot(ObamaSpeech, type = "b", pch = 20, xlab = "paragraph index", ylab = "word count")
</code></pre>

<hr>
<h2 id='pageview'>Page views from Sep 21, 2007 to Dec 2, 2007 of Yihui's website</h2><span id='topic+pageview'></span>

<h3>Description</h3>

<p>The data is collected by Awstats for the website <a href="http://yihui.org">http://yihui.org</a>.
</p>


<h3>Format</h3>

<p>A data frame with 73 observations on the following 5 variables.
</p>
 <dl>
<dt>day</dt><dd><p>Date starts from Sep 21, 2007 to Dec 2, 2007.</p>
</dd>
<dt>visits</dt><dd><p>number of visits: a new visit is defined as each new
<em>incoming visitor</em> (viewing or browsing a page) who was not connected
to the site during last <em>60 min</em>.</p>
</dd>  <dt>pages</dt><dd><p>number of times a
<em>page</em> of the site is viewed (sum for all visitors for all visits).
This piece of data differs from &ldquo;files&rdquo; in that it counts only HTML pages
and excludes images and other files.</p>
</dd> <dt>files</dt><dd><p>number of times a
<em>page, image, file</em> of the site is viewed or downloaded by someone.</p>
</dd>
<dt>bandwidth</dt><dd><p>amount of data downloaded by all <em>pages</em>,
<em>images</em> and <em>files</em> within the site (units in MegaBytes).</p>
</dd> </dl>



<h3>Source</h3>

<p><a href="http://yihui.org">http://yihui.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plot(pageview[, 1:2], type = "b", col = "red", main = "Number of Visits in Yihui's Web")
## partial auto-correlation
pacf(pageview$visits)
</code></pre>

<hr>
<h2 id='pdftk'>A wrapper for the PDF toolkit Pdftk</h2><span id='topic+pdftk'></span>

<h3>Description</h3>

<p>If the toolkit Pdftk is available in the system, it will be called to
manipulate the PDF files (especially to compress the PDF files).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pdftk(input, operation = NULL, output, other.opts = "compress dont_ask")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pdftk_+3A_input">input</code></td>
<td>
<p>the path of the input PDF file(s)</p>
</td></tr>
<tr><td><code id="pdftk_+3A_operation">operation</code></td>
<td>
<p>the operation to be done on the input (default to be
<code>NULL</code>)</p>
</td></tr>
<tr><td><code id="pdftk_+3A_output">output</code></td>
<td>
<p>the path of the output (if missing and <code>input</code> is a
scalar, <code>output</code> will be the same as <code>input</code>)</p>
</td></tr>
<tr><td><code id="pdftk_+3A_other.opts">other.opts</code></td>
<td>
<p>other options (default to be <code>'compress dont_ask'</code>,
i.e. compress the PDF files and do not ask the user for any input)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a wrapper to call <code>pdftk</code>. The path of <code>pdftk</code> should
be set via <code><a href="#topic+ani.options">ani.options</a>(pdftk = 'path/to/pdftk')</code>.
</p>
<p>See the reference for detailed usage of <code>pdftk</code>.
</p>


<h3>Value</h3>

<p>if <code>ani.options('pdftk')</code> is non-<code>NULL</code>, then this function
returns the status of the operation (<code>0</code> for success; see
<code><a href="base.html#topic+system">system</a></code>); otherwise a warning will be issued
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/pdftk/">https://yihui.org/animation/example/pdftk/</a>
</p>
<p>pdftk official website <a href="https://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/">https://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/</a>
</p>

<hr>
<h2 id='pollen'>Synthetic dataset about the geometric features of pollen grains</h2><span id='topic+pollen'></span>

<h3>Description</h3>

<p>There are 3848 observations on 5 variables. From the 1986 ASA Data Exposition
dataset, made up by David Coleman of RCA Labs
</p>


<h3>Format</h3>

<p>A data frame with 3848 observations on the following 5 variables.
</p>
 <dl>
<dt>RIDGE</dt><dd><p>a numeric vector</p>
</dd> <dt>NUB</dt><dd><p>a numeric vector</p>
</dd>
<dt>CRACK</dt><dd><p>a numeric vector</p>
</dd> <dt>WEIGHT</dt><dd><p>a numeric vector</p>
</dd>
<dt>DENSITY</dt><dd><p>a numeric vector</p>
</dd> </dl>



<h3>Source</h3>

<p>collected from Statlib Datasets Archive:
<a href="http://lib.stat.cmu.edu/data-expo/">http://lib.stat.cmu.edu/data-expo/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## some dense points in the center?
plot(pollen[, 1:2], pch = 20, col = rgb(0, 0, 0, 0.1))

## see demo('pollen', package = 'animation') for a 3D demo; truth is there!
</code></pre>

<hr>
<h2 id='price.ani'>Demonstrate stock prices in animations</h2><span id='topic+price.ani'></span>

<h3>Description</h3>

<p>This function can display the frequencies of stock prices in a certain time
span with the span changing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>price.ani(
  price,
  time,
  time.begin = min(time),
  span = 15 * 60,
  ...,
  xlab = "price",
  ylab = "frequency",
  xlim,
  ylim,
  main
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="price.ani_+3A_price">price</code></td>
<td>
<p>stock prices</p>
</td></tr>
<tr><td><code id="price.ani_+3A_time">time</code></td>
<td>
<p>time corresponding to prices</p>
</td></tr>
<tr><td><code id="price.ani_+3A_time.begin">time.begin</code></td>
<td>
<p>the time for the animation to begin (default to be the
minimum <code>time</code>)</p>
</td></tr>
<tr><td><code id="price.ani_+3A_span">span</code></td>
<td>
<p>time span (unit in seconds; default to be 15 minutes)</p>
</td></tr>
<tr><td><code id="price.ani_+3A_...">...</code></td>
<td>
<p>other arguments passed to <code><a href="graphics.html#topic+plot">plot</a></code></p>
</td></tr>
<tr><td><code id="price.ani_+3A_xlab">xlab</code>, <code id="price.ani_+3A_ylab">ylab</code>, <code id="price.ani_+3A_xlim">xlim</code>, <code id="price.ani_+3A_ylim">ylim</code>, <code id="price.ani_+3A_main">main</code></td>
<td>
<p>they are passed to <code><a href="graphics.html#topic+plot">plot</a></code> with
reasonable default values</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisible <code>NULL</code>
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/price-ani/">https://yihui.org/animation/example/price-ani/</a>
</p>

<hr>
<h2 id='qpdf'>A wrapper for the PDF toolkit qpdf</h2><span id='topic+qpdf'></span>

<h3>Description</h3>

<p>If the tool qpdf is available in the system, it will be called to manipulate
the PDF files (especially to compress the PDF files).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qpdf(input, output, options = "--stream-data=compress")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="qpdf_+3A_input">input</code></td>
<td>
<p>the path of the input PDF file</p>
</td></tr>
<tr><td><code id="qpdf_+3A_output">output</code></td>
<td>
<p>the path of the output (if missing, <code>output</code> will be the
same as <code>input</code>)</p>
</td></tr>
<tr><td><code id="qpdf_+3A_options">options</code></td>
<td>
<p>options for <code>qpdf</code> (default to be
<code>'--stream-data=compress'</code>, i.e. compress the PDF files)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a wrapper to call <code>qpdf</code>. The path of <code>qpdf</code> should
be set via <code><a href="#topic+ani.options">ani.options</a>(qpdf = 'path/to/qpdf')</code>.
</p>
<p>See the reference for detailed usage of <code>qpdf</code>.
</p>


<h3>Value</h3>

<p>if <code>ani.options('qpdf')</code> is non-<code>NULL</code>, then this function
returns the status of the operation (<code>0</code> for success; see
<code><a href="base.html#topic+system">system</a></code>); otherwise a warning will be issued
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/qpdf/">https://yihui.org/animation/example/qpdf/</a>
</p>
<p>qpdf official website <a href="https://qpdf.sourceforge.io/">https://qpdf.sourceforge.io/</a>
</p>

<hr>
<h2 id='quincunx'>Demonstration of the Quincunx (Bean Machine/Galton Box)</h2><span id='topic+quincunx'></span><span id='topic+quincunx2'></span>

<h3>Description</h3>

<p>Simulates the quincunx with &ldquo;balls&rdquo; (beans) falling through several layers
(denoted by triangles) and the distribution of the final locations at which
the balls hit is denoted by a histogram; <code>quincunx()</code> is shows single
layer, and <code>quincunx2()</code> is a two-stage version of the quincunx.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>quincunx(
  balls = 200,
  layers = 15,
  pch.layers = 2,
  pch.balls = 19,
  col.balls = sample(colors(), balls, TRUE),
  cex.balls = 2
)

quincunx2(
  balls = 200,
  layers = 15,
  pch.layers = 2,
  pch.balls = 19,
  col.balls = sample(colors(), balls, TRUE),
  cex.balls = 2
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="quincunx_+3A_balls">balls</code></td>
<td>
<p>number of balls</p>
</td></tr>
<tr><td><code id="quincunx_+3A_layers">layers</code></td>
<td>
<p>number of layers</p>
</td></tr>
<tr><td><code id="quincunx_+3A_pch.layers">pch.layers</code></td>
<td>
<p>point character of layers; triangles (<code>pch = 2</code>) are
recommended</p>
</td></tr>
<tr><td><code id="quincunx_+3A_pch.balls">pch.balls</code>, <code id="quincunx_+3A_col.balls">col.balls</code>, <code id="quincunx_+3A_cex.balls">cex.balls</code></td>
<td>
<p>point character, colors and
magnification of balls</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The bean machine, also known as the quincunx or Galton box, is a device
invented by Sir Francis Galton to demonstrate the law of error and the normal
distribution.
</p>
<p>When a ball falls through a layer, it can either go to the right or left side
with the probability 0.5. At last the location of all the balls will show us
the bell-shaped distribution.
</p>


<h3>Value</h3>

<p>A named vector: the frequency table for the locations of the balls.
Note the names of the vector are the locations: 1.5, 2.5, ..., layers -
0.5.
</p>


<h3>Note</h3>

<p>The maximum number of animation frames is controlled by
<code>ani.options('nmax')</code> as usual, but it is strongly recommended that
<code>ani.options(nmax = balls + layers -2)</code>, in which case all the balls
will just fall through all the layers and there will be no redundant
animation frames.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie, Lijia Yu, and Keith ORourke
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/quincunx/">https://yihui.org/animation/example/quincunx/</a>
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+rbinom">rbinom</a></code>
</p>

<hr>
<h2 id='Rosling.bubbles'>The bubbles animation in Hans Rosling's Talk</h2><span id='topic+Rosling.bubbles'></span>

<h3>Description</h3>

<p>In Hans Rosling's attractive talk &ldquo;Debunking third-world myths with the best
stats you've ever seen&rdquo;, he used a lot of bubble plots to illustrate trends
behind the data over time. This function gives an imitation of those moving
bubbles, besides, as this function is based on <code><a href="graphics.html#topic+symbols">symbols</a></code>, we can
also make use of other symbols such as squares, rectangles, thermometers,
etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Rosling.bubbles(
  x,
  y,
  data,
  type = c("circles", "squares", "rectangles", "stars", "thermometers", "boxplots"),
  bg,
  xlim = range(x),
  ylim = range(y),
  main = NULL,
  xlab = "x",
  ylab = "y",
  ...,
  grid = TRUE,
  text = 1:ani.options("nmax"),
  text.col = rgb(0, 0, 0, 0.5),
  text.cex = 5
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Rosling.bubbles_+3A_x">x</code>, <code id="Rosling.bubbles_+3A_y">y</code></td>
<td>
<p>the x and y co-ordinates for the centres of the bubbles (symbols).
Default to be 10 uniform random numbers in [0, 1] for each single image
frame (so the length should be 10 * <code>ani.options('nmax')</code>)</p>
</td></tr>
<tr><td><code id="Rosling.bubbles_+3A_type">type</code>, <code id="Rosling.bubbles_+3A_data">data</code></td>
<td>
<p>the type and data for symbols; see <code><a href="graphics.html#topic+symbols">symbols</a></code>.
The default type is <code>circles</code>.</p>
</td></tr>
<tr><td><code id="Rosling.bubbles_+3A_bg">bg</code>, <code id="Rosling.bubbles_+3A_main">main</code>, <code id="Rosling.bubbles_+3A_xlim">xlim</code>, <code id="Rosling.bubbles_+3A_ylim">ylim</code>, <code id="Rosling.bubbles_+3A_xlab">xlab</code>, <code id="Rosling.bubbles_+3A_ylab">ylab</code>, <code id="Rosling.bubbles_+3A_...">...</code></td>
<td>
<p>see <code><a href="graphics.html#topic+symbols">symbols</a></code>. Note that
<code>bg</code> has default values taking semi-transparent colors.</p>
</td></tr>
<tr><td><code id="Rosling.bubbles_+3A_grid">grid</code></td>
<td>
<p>logical; add a grid to the plot?</p>
</td></tr>
<tr><td><code id="Rosling.bubbles_+3A_text">text</code></td>
<td>
<p>a character vector to be added to the plot one by one (e.g. the
year in Rosling's talk)</p>
</td></tr>
<tr><td><code id="Rosling.bubbles_+3A_text.col">text.col</code>, <code id="Rosling.bubbles_+3A_text.cex">text.cex</code></td>
<td>
<p>color and magnification of the background text</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Suppose we have observations of <code class="reqn">n</code> individuals over
<code>ani.options('nmax')</code> years. In this animation, the data of each year
will be shown in the bubbles (symbols) plot; as time goes on, certain trends
will be revealed (like those in Rosling's talk). Please note that the
arrangement of the data for bubbles (symbols) should be a matrix like
<code class="reqn">A_{ijk}</code> in which <code class="reqn">i</code> is the individual id (from 1 to n), <code class="reqn">j</code>
denotes the <code class="reqn">j</code>-th variable (from 1 to p) and <code class="reqn">k</code> indicates the time
from 1 to <code>ani.options('nmax')</code>.
</p>
<p>And the length of <code>x</code> and <code>y</code> should be equal to the number of rows
of this matrix.
</p>


<h3>Value</h3>

<p><code>NULL</code>.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/rosling-bubbles/">https://yihui.org/animation/example/rosling-bubbles/</a>
</p>
<p>TED talk: 
<a href="https://www.ted.com/talks/hans_rosling_the_best_stats_you_ve_ever_seen">https://www.ted.com/talks/hans_rosling_the_best_stats_you_ve_ever_seen</a>
</p>


<h3>See Also</h3>

<p><code><a href="graphics.html#topic+symbols">symbols</a></code>
</p>

<hr>
<h2 id='sample.cluster'>Demonstration for the cluster sampling</h2><span id='topic+sample.cluster'></span>

<h3>Description</h3>

<p>Each rectangle stands for a cluster, and the simple random sampling without
replacement is performed for each cluster. All points in the clusters being
sampled will be drawn out.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sample.cluster(
  pop = ceiling(10 * runif(10, 0.2, 1)),
  size = 3,
  p.col = c("blue", "red"),
  p.cex = c(1, 3),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sample.cluster_+3A_pop">pop</code></td>
<td>
<p>a vector for the size of each cluster in the population.</p>
</td></tr>
<tr><td><code id="sample.cluster_+3A_size">size</code></td>
<td>
<p>the number of clusters to be drawn out.</p>
</td></tr>
<tr><td><code id="sample.cluster_+3A_p.col">p.col</code>, <code id="sample.cluster_+3A_p.cex">p.cex</code></td>
<td>
<p>different colors / magnification rate to annotate the
population and the sample</p>
</td></tr>
<tr><td><code id="sample.cluster_+3A_...">...</code></td>
<td>
<p>other arguments passed to <code><a href="graphics.html#topic+rect">rect</a></code> to annotate the
&ldquo;clusters&rdquo;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None (invisible <code>NULL</code>).
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/sample-cluster/">https://yihui.org/animation/example/sample-cluster/</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+sample">sample</a></code>, <code><a href="#topic+sample.simple">sample.simple</a></code>,
<code><a href="#topic+sample.ratio">sample.ratio</a></code>, <code><a href="#topic+sample.strat">sample.strat</a></code>,
<code><a href="#topic+sample.system">sample.system</a></code>
</p>

<hr>
<h2 id='sample.ratio'>Demonstrate the ratio estimation in sampling survey</h2><span id='topic+sample.ratio'></span>

<h3>Description</h3>

<p>This function demonstrates the advantage of ratio estimation when further
information (ratio) about x and y is available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sample.ratio(
  X = runif(50, 0, 5),
  R = 1,
  Y = R * X + rnorm(X),
  size = length(X)/2,
  p.col = c("blue", "red"),
  p.cex = c(1, 3),
  p.pch = c(20, 21),
  m.col = c("black", "gray"),
  legend.loc = "topleft",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sample.ratio_+3A_x">X</code></td>
<td>
<p>the X variable (ancillary)</p>
</td></tr>
<tr><td><code id="sample.ratio_+3A_r">R</code></td>
<td>
<p>the population ratio Y/X</p>
</td></tr>
<tr><td><code id="sample.ratio_+3A_y">Y</code></td>
<td>
<p>the Y variable (whose mean we what to estimate)</p>
</td></tr>
<tr><td><code id="sample.ratio_+3A_size">size</code></td>
<td>
<p>sample size</p>
</td></tr>
<tr><td><code id="sample.ratio_+3A_p.col">p.col</code>, <code id="sample.ratio_+3A_p.cex">p.cex</code>, <code id="sample.ratio_+3A_p.pch">p.pch</code></td>
<td>
<p>point colors, magnification and symbols for the
population and sample respectively</p>
</td></tr>
<tr><td><code id="sample.ratio_+3A_m.col">m.col</code></td>
<td>
<p>color for the horizontal line to denote the sample mean of Y</p>
</td></tr>
<tr><td><code id="sample.ratio_+3A_legend.loc">legend.loc</code></td>
<td>
<p>legend location: topleft, topright, bottomleft,
bottomright, ... (see <code><a href="graphics.html#topic+legend">legend</a></code>)</p>
</td></tr>
<tr><td><code id="sample.ratio_+3A_...">...</code></td>
<td>
<p>other arguments passed to <code><a href="graphics.html#topic+plot.default">plot.default</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>From this demonstration we can clearly see that the ratio estimation is
generally better than the simple sample average when the ratio <b>R</b>
really exists, otherwise ratio estimation may not help.
</p>


<h3>Value</h3>

<p>A list containing </p>
<table>
<tr><td><code>X</code></td>
<td>
<p>X population</p>
</td></tr> <tr><td><code>Y</code></td>
<td>
<p>Y population</p>
</td></tr>
<tr><td><code>R</code></td>
<td>
<p>population ratio</p>
</td></tr> <tr><td><code>r</code></td>
<td>
<p>ratio calculated from samples</p>
</td></tr>
<tr><td><code>Ybar</code></td>
<td>
<p>population mean of Y</p>
</td></tr> <tr><td><code>ybar.simple</code></td>
<td>
<p>simple sample mean of
Y</p>
</td></tr> <tr><td><code>ybar.ratio</code></td>
<td>
<p>sample mean of Y via ratio estimation</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/sample-ratio/">https://yihui.org/animation/example/sample-ratio/</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+sample">sample</a></code>, <code><a href="#topic+sample.simple">sample.simple</a></code>,
<code><a href="#topic+sample.cluster">sample.cluster</a></code>, <code><a href="#topic+sample.strat">sample.strat</a></code>,
<code><a href="#topic+sample.system">sample.system</a></code>
</p>

<hr>
<h2 id='sample.simple'>Demonstration for simple random sampling without replacement</h2><span id='topic+sample.simple'></span>

<h3>Description</h3>

<p>The whole sample frame is denoted by a matrix (<code>nrow * ncol</code>) in the
plane just for convenience, and the points being sampled are marked out (by
red circles by default). Each member of the population has an equal and known
chance of being selected.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sample.simple(
  nrow = 10,
  ncol = 10,
  size = 15,
  p.col = c("blue", "red"),
  p.cex = c(1, 3)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sample.simple_+3A_nrow">nrow</code></td>
<td>
<p>the desired number of rows of the sample frame.</p>
</td></tr>
<tr><td><code id="sample.simple_+3A_ncol">ncol</code></td>
<td>
<p>the desired number of columns of the sample frame.</p>
</td></tr>
<tr><td><code id="sample.simple_+3A_size">size</code></td>
<td>
<p>the sample size.</p>
</td></tr>
<tr><td><code id="sample.simple_+3A_p.col">p.col</code>, <code id="sample.simple_+3A_p.cex">p.cex</code></td>
<td>
<p>different colors /magnification rate to annotate the
population and the sample</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None (invisible <code>NULL</code>).
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/sample-simple/">https://yihui.org/animation/example/sample-simple/</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+sample">sample</a></code>, <code><a href="#topic+sample.ratio">sample.ratio</a></code>,
<code><a href="#topic+sample.cluster">sample.cluster</a></code>, <code><a href="#topic+sample.strat">sample.strat</a></code>,
<code><a href="#topic+sample.system">sample.system</a></code>
</p>

<hr>
<h2 id='sample.strat'>Demonstration for the stratified sampling</h2><span id='topic+sample.strat'></span>

<h3>Description</h3>

<p>Each rectangle stands for a stratum, and the simple random sampling without
replacement is performed within each stratum. The points being sampled are
marked out (by red circles by default).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sample.strat(
  pop = ceiling(10 * runif(10, 0.5, 1)),
  size = ceiling(pop * runif(length(pop), 0, 0.5)),
  p.col = c("blue", "red"),
  p.cex = c(1, 3),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sample.strat_+3A_pop">pop</code></td>
<td>
<p>a vector for the size of each stratum in the population.</p>
</td></tr>
<tr><td><code id="sample.strat_+3A_size">size</code></td>
<td>
<p>a corresponding vector for the sample size in each stratum
(recycled if necessary).</p>
</td></tr>
<tr><td><code id="sample.strat_+3A_p.col">p.col</code>, <code id="sample.strat_+3A_p.cex">p.cex</code></td>
<td>
<p>different colors /magnification rate to annotate the
population and the sample</p>
</td></tr>
<tr><td><code id="sample.strat_+3A_...">...</code></td>
<td>
<p>other arguments passed to <code><a href="graphics.html#topic+rect">rect</a></code> to annotate the
&ldquo;strata&rdquo;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None (invisible '<code>NULL</code>').
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/sample-strat/">https://yihui.org/animation/example/sample-strat/</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+sample">sample</a></code>, <code><a href="#topic+sample.simple">sample.simple</a></code>,
<code><a href="#topic+sample.cluster">sample.cluster</a></code>, <code><a href="#topic+sample.ratio">sample.ratio</a></code>,
<code><a href="#topic+sample.system">sample.system</a></code>
</p>

<hr>
<h2 id='sample.system'>Demonstration for the systematic sampling</h2><span id='topic+sample.system'></span>

<h3>Description</h3>

<p>The whole sample frame is denoted by a matrix (<code>nrow * ncol</code>) in the
plane, and the sample points with equal intervals are drawn out according to
a random starting point. The points being sampled are marked by red circles.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sample.system(
  nrow = 10,
  ncol = 10,
  size = 15,
  p.col = c("blue", "red"),
  p.cex = c(1, 3)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sample.system_+3A_nrow">nrow</code></td>
<td>
<p>the desired number of rows of the sample frame.</p>
</td></tr>
<tr><td><code id="sample.system_+3A_ncol">ncol</code></td>
<td>
<p>the desired number of columns of the sample frame.</p>
</td></tr>
<tr><td><code id="sample.system_+3A_size">size</code></td>
<td>
<p>the sample size.</p>
</td></tr>
<tr><td><code id="sample.system_+3A_p.col">p.col</code>, <code id="sample.system_+3A_p.cex">p.cex</code></td>
<td>
<p>different colors / magnification rate to annotate the
population and the sample</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None (invisible <code>NULL</code>).
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/sample-system/">https://yihui.org/animation/example/sample-system/</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+sample">sample</a></code>, <code><a href="#topic+sample.simple">sample.simple</a></code>,
<code><a href="#topic+sample.cluster">sample.cluster</a></code>, <code><a href="#topic+sample.ratio">sample.ratio</a></code>,
<code><a href="#topic+sample.strat">sample.strat</a></code>
</p>

<hr>
<h2 id='saveGIF'>Convert images to a single animation file (typically GIF) using ImageMagick
or GraphicsMagick</h2><span id='topic+saveGIF'></span><span id='topic+saveMovie'></span>

<h3>Description</h3>

<p>This function opens a graphical device (specified in
<code>ani.options('ani.dev')</code>) first to generate a sequence of images based
on <code>expr</code>, then makes use of the command <code>convert</code> in
&lsquo;ImageMagick&rsquo; to convert these images to a single animated movie (as a GIF or
MPG file). An alternative software package is GraphicsMagick (use
<code>convert = 'gm convert'</code>), which is smaller than ImageMagick.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saveGIF(
  expr,
  movie.name = "animation.gif",
  img.name = "Rplot",
  convert = "magick",
  cmd.fun,
  clean = TRUE,
  extra.opts = "",
  ...
)

saveMovie(
  expr,
  movie.name = "animation.gif",
  img.name = "Rplot",
  convert = "magick",
  cmd.fun,
  clean = TRUE,
  extra.opts = "",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="saveGIF_+3A_expr">expr</code></td>
<td>
<p>an expression to generate animations; use either the animation
functions (e.g. <code>brownian.motion()</code>) in this package or a custom
expression (e.g. <code>for(i in 1:10) plot(runif(10), ylim = 0:1)</code>).</p>
</td></tr>
<tr><td><code id="saveGIF_+3A_movie.name">movie.name</code></td>
<td>
<p>file name of the movie (with the extension)</p>
</td></tr>
<tr><td><code id="saveGIF_+3A_img.name">img.name</code></td>
<td>
<p>file name of the sequence of images (&lsquo;pure&rsquo; name; without any
format or extension)</p>
</td></tr>
<tr><td><code id="saveGIF_+3A_convert">convert</code></td>
<td>
<p>the command to convert images (default to be <code>convert</code>
(i.e. use ImageMagick), but might be <code>imconvert</code> under some Windows
platforms); can be <code>gm convert</code> in order to use GraphicsMagick; see
the 'Note' section for details</p>
</td></tr>
<tr><td><code id="saveGIF_+3A_cmd.fun">cmd.fun</code></td>
<td>
<p>a function to invoke the OS command; by default
<code><a href="base.html#topic+system">system</a></code></p>
</td></tr>
<tr><td><code id="saveGIF_+3A_clean">clean</code></td>
<td>
<p>whether to delete the individual image frames</p>
</td></tr>
<tr><td><code id="saveGIF_+3A_extra.opts">extra.opts</code></td>
<td>
<p>additional options passed to <code><a href="#topic+im.convert">im.convert</a></code></p>
</td></tr>
<tr><td><code id="saveGIF_+3A_...">...</code></td>
<td>
<p>other arguments passed to <code><a href="#topic+ani.options">ani.options</a></code>, e.g.
<code>ani.height</code> and <code>ani.width</code>, ...</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function calls <code><a href="#topic+im.convert">im.convert</a></code> (or <code><a href="#topic+gm.convert">gm.convert</a></code>,
depending on the argument <code>convert</code>) to convert images to a single
animation.
</p>
<p>The advantage of this function is that it can create a single movie file,
however, there are two problems too: (1) we need a special (free) software
ImageMagick or GraphicsMagick; (2) the speed of the animation will be beyond
our control, as the <code>interval</code> option is fixed. Other approaches in this
package may have greater flexibilities, e.g. the HTML approach (see
<code><a href="#topic+saveHTML">saveHTML</a></code>).
</p>
<p>See <code><a href="#topic+ani.options">ani.options</a></code> for the options that may affect the output,
e.g.  the graphics device (including the height/width specifications), the
file extension of image frames, and the time interval between image frames,
etc.  Note that <code>ani.options('interval')</code> can be a numeric vector!
</p>


<h3>Value</h3>

<p>The command for the conversion (see <code><a href="#topic+im.convert">im.convert</a></code>).
</p>


<h3>Note</h3>

<p>See <code><a href="#topic+im.convert">im.convert</a></code> for details on the configuration of
ImageMagick (typically for Windows users) or GraphicsMagick.
</p>
<p>It is recommended to use <code>ani.pause()</code> to pause between animation
frames in <code>expr</code>, because this function will only pause when called in
a non-interactive graphics device, which can save a lot of time.  See the
demo <code>'Xmas2'</code> for example (<code>demo('Xmas2', package =
  'animation')</code>).
</p>
<p><code><a href="#topic+saveGIF">saveGIF</a></code> has an alias <code><a href="#topic+saveMovie">saveMovie</a></code> (i.e. they are
identical); the latter name is for compatibility to older versions of this
package (&lt; 2.0-2). It is recommended to use <code><a href="#topic+saveGIF">saveGIF</a></code> to avoid
confusions between <code><a href="#topic+saveMovie">saveMovie</a></code> and <code><a href="#topic+saveVideo">saveVideo</a></code>.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/savegif/">https://yihui.org/animation/example/savegif/</a>
</p>
<p>ImageMagick: <a href="http://www.imagemagick.org/script/convert.php">http://www.imagemagick.org/script/convert.php</a>;
</p>
<p>GraphicsMagick: <a href="http://www.graphicsmagick.org">http://www.graphicsmagick.org</a>
</p>


<h3>See Also</h3>

<p>Other utilities: 
<code><a href="#topic+im.convert">im.convert</a>()</code>,
<code><a href="#topic+saveHTML">saveHTML</a>()</code>,
<code><a href="#topic+saveLatex">saveLatex</a>()</code>,
<code><a href="#topic+saveSWF">saveSWF</a>()</code>,
<code><a href="#topic+saveVideo">saveVideo</a>()</code>
</p>

<hr>
<h2 id='saveHTML'>Insert animations into an HTML page</h2><span id='topic+saveHTML'></span>

<h3>Description</h3>

<p>This function first records all the plots in the R expression as bitmap
images, then inserts them into an HTML page and finally creates the animation
using the SciAnimator library.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saveHTML(
  expr,
  img.name = "Rplot",
  global.opts = "",
  single.opts = "",
  navigator = ani.options("nmax") &lt;= 100 &amp;&amp; ani.options("interval") &gt;= 0.05,
  htmlfile = "index.html",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="saveHTML_+3A_expr">expr</code></td>
<td>
<p>an R expression to be evaluated to create a sequence of images</p>
</td></tr>
<tr><td><code id="saveHTML_+3A_img.name">img.name</code></td>
<td>
<p>the filename of the images (the real output will be like
&lsquo;<span class="file">img.name1.png</span>&rsquo;, &lsquo;<span class="file">img.name2.png</span>&rsquo;, ...); this name has to be
different for different animations, since it will be used as the
identifiers for each animation; make it as unique as possible; meanwhile,
the following characters in <code>img.name</code> will be replaced by <code>_</code> to
make it a legal jQuery string:
</p>
<p><code style="white-space: pre;">&#8288;!"#$%&amp;'()*+,./:;?@[\]^`{|}~&#8288;</code></p>
</td></tr>
<tr><td><code id="saveHTML_+3A_global.opts">global.opts</code></td>
<td>
<p>a string: the global options of the animation; e.g. we can
specify the default theme to be blue using
<code style="white-space: pre;">&#8288;$.fn.scianimator.defaults.theme = 'blue';&#8288;</code> note these options must be
legal JavaScript expressions (ended by <code>';'</code>)</p>
</td></tr>
<tr><td><code id="saveHTML_+3A_single.opts">single.opts</code></td>
<td>
<p>the options for each single animation (if there are
multiple ones in one HTML page), e.g. to use the dark theme and text labels
for buttons:
</p>
<p><code style="white-space: pre;">&#8288;'utf8': false, 'theme': 'dark'&#8288;</code>
</p>
<p>or to remove the navigator panel (the navigator can affect the smoothness
of the animation when the playing speed is extremely fast (e.g.
<code>interval</code> less than 0.05 seconds)):
</p>
<p><code style="white-space: pre;">&#8288;'controls': ['first', 'previous', 'play', 'next', 'last', 'loop',
  'speed']&#8288;</code>
</p>
<p>see the reference for a complete list of available options</p>
</td></tr>
<tr><td><code id="saveHTML_+3A_navigator">navigator</code></td>
<td>
<p>whether to show the navigator (like a progress bar); by
default, the navigator is not shown for performance reasons when the number
of images is greater than 100 or the time interval is smaller than 0.05</p>
</td></tr>
<tr><td><code id="saveHTML_+3A_htmlfile">htmlfile</code></td>
<td>
<p>the filename of the HTML file</p>
</td></tr>
<tr><td><code id="saveHTML_+3A_...">...</code></td>
<td>
<p>other arguments to be passed to <code><a href="#topic+ani.options">ani.options</a></code> to
animation options such as the time interval between image frames</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It mainly uses the SciAnimator library, which is based on jQuery. It has a
neat interface (both technically and visually) and is much easier to use or
extend. Moreover, this function allows multiple animations in a single HTML
page &ndash; just use the same HTML filename.
</p>
<p>Optionally the source code and some session information can be added below
the animations for the sake of reproducibility (specified by the option
<code>ani.options('verbose')</code> &ndash; if <code>TRUE</code>, the description, loaded
packages, the code to produce the animation, as well as a part of
<code><a href="utils.html#topic+sessionInfo">sessionInfo</a>()</code> will be written in the bottom of the animation;
the R code will be highlighted using the SyntaxHighlighter library for better
reading experience).
</p>


<h3>Value</h3>

<p>The path of the HTML output.
</p>


<h3>Note</h3>

<p>Microsoft IE might restrict the HTML page from running JavaScript and
try to &ldquo;protect your security&rdquo; when you view the animation page, but this
is not really a security problem.
</p>
<p>When you want to publish the HTML page on the web, you have  to upload the
associated &lsquo;<span class="file">css</span>&rsquo; and &lsquo;<span class="file">js</span>&rsquo; folders with the HTML file as well as
the images.
</p>
<p>For <code><a href="#topic+saveHTML">saveHTML</a></code>, <code>ani.options('description')</code> can be a
character vector, in which case this vector will be pasted into a scalar;
use <code>'\n\n'</code> in the string to separate paragraphs (see the first
example below).
</p>
<p>For the users who do not have R at hand, there is a demo in
<code>system.file('misc', 'Rweb', 'demo.html', package = 'animation')</code> to
show how to create animations online without R being installed locally. It
depends, however, on whether the Rweb service can be provided for public
use in a long period (currently we are using the Rweb at Tama University).
See the last example below.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/savehtml/">https://yihui.org/animation/example/savehtml/</a>
</p>
<p>scianimator official website <a href="https://github.com/brentertz/scianimator">https://github.com/brentertz/scianimator</a>
</p>


<h3>See Also</h3>

<p>Other utilities: 
<code><a href="#topic+im.convert">im.convert</a>()</code>,
<code><a href="#topic+saveGIF">saveGIF</a>()</code>,
<code><a href="#topic+saveLatex">saveLatex</a>()</code>,
<code><a href="#topic+saveSWF">saveSWF</a>()</code>,
<code><a href="#topic+saveVideo">saveVideo</a>()</code>
</p>

<hr>
<h2 id='saveLatex'>Insert animations into a LaTeX document and compile it</h2><span id='topic+saveLatex'></span>

<h3>Description</h3>

<p>Record animation frames and insert them into a LaTeX document with the
<code>animate</code> package. Compile the document if an appropriate LaTeX command
is provided.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saveLatex(
  expr,
  nmax,
  img.name = "Rplot",
  ani.opts,
  centering = TRUE,
  caption = NULL,
  label = NULL,
  pkg.opts = NULL,
  documentclass = "article",
  latex.filename = "animation.tex",
  pdflatex = "pdflatex",
  install.animate = TRUE,
  overwrite = TRUE,
  full.path = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="saveLatex_+3A_expr">expr</code></td>
<td>
<p>an expression to generate animations; use either the animation
functions (e.g. <code>brownian.motion()</code>) in this package or a custom
expression (e.g. <code>for(i in 1:10) plot(runif(10), ylim = 0:1)</code>).</p>
</td></tr>
<tr><td><code id="saveLatex_+3A_nmax">nmax</code></td>
<td>
<p>maximum number of animation frames (if missing and the graphics
device is a bitmap device, this number will be automatically calculated);
note that we do not have to specify <code>nmax</code> when using PDF devices.</p>
</td></tr>
<tr><td><code id="saveLatex_+3A_img.name">img.name</code></td>
<td>
<p>basename of file names of animation frames; see the Note
section for a possible adjustment on <code>img.name</code></p>
</td></tr>
<tr><td><code id="saveLatex_+3A_ani.opts">ani.opts</code></td>
<td>
<p>options to control the behavior of the animation (passed to
the LaTeX macro <code>'\animategraphics'</code>; default to be
<code>'controls,width=\linewidth'</code>)</p>
</td></tr>
<tr><td><code id="saveLatex_+3A_centering">centering</code></td>
<td>
<p>logical: whether to center the graph using the LaTeX
environment <code style="white-space: pre;">&#8288;\begin{center}&#8288;</code> and <code style="white-space: pre;">&#8288;\end{center}&#8288;</code></p>
</td></tr>
<tr><td><code id="saveLatex_+3A_caption">caption</code>, <code id="saveLatex_+3A_label">label</code></td>
<td>
<p>caption and label for the graphics in the figure
environment</p>
</td></tr>
<tr><td><code id="saveLatex_+3A_pkg.opts">pkg.opts</code></td>
<td>
<p>global options for the <code>animate</code> package</p>
</td></tr>
<tr><td><code id="saveLatex_+3A_documentclass">documentclass</code></td>
<td>
<p>LaTeX document class; if <code>NULL</code>, the output will
not be a complete LaTeX document (only the code to generate the PDF
animation will be printed in the console); default to be <code>article</code>,
but we can also provide a complete statement like
<code style="white-space: pre;">&#8288;\documentclass[a5paper]{article}&#8288;</code></p>
</td></tr>
<tr><td><code id="saveLatex_+3A_latex.filename">latex.filename</code></td>
<td>
<p>file name of the LaTeX document; if an empty string
<code>''</code>, the LaTeX code will be printed in the console and hence not
compiled</p>
</td></tr>
<tr><td><code id="saveLatex_+3A_pdflatex">pdflatex</code></td>
<td>
<p>the command for pdfLaTeX (set to <code>NULL</code> to ignore the
compiling)</p>
</td></tr>
<tr><td><code id="saveLatex_+3A_install.animate">install.animate</code></td>
<td>
<p>copy the LaTeX style files &lsquo;<span class="file">animate.sty</span>&rsquo; and
&lsquo;<span class="file">animfp.sty</span>&rsquo;? If you have not installed the LaTeX package
<code>animate</code>, it suffices just to copy these to files.</p>
</td></tr>
<tr><td><code id="saveLatex_+3A_overwrite">overwrite</code></td>
<td>
<p>whether to overwrite the existing image frames</p>
</td></tr>
<tr><td><code id="saveLatex_+3A_full.path">full.path</code></td>
<td>
<p>whether to use the full path (<code>TRUE</code>) or relative path
(<code>FALSE</code>) for the animation frames; usually the relative path
suffices, but sometimes the images and the LaTeX document might not be in
the same directory, so <code>full.path = TRUE</code> could be useful; in the
latter case, remember that you should never use spaces in the filenames or
paths!</p>
</td></tr>
<tr><td><code id="saveLatex_+3A_...">...</code></td>
<td>
<p>other arguments passed to the graphics device
<code>ani.options('ani.dev')</code>, e.g. <code>ani.height</code> and <code>ani.width</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is actually a wrapper to generate a LaTeX document using R. The document
uses the LaTeX package called <code>animate</code> to insert animations into PDF's.
When we pass an R expression to this function, the expression will be
evaluated and recorded by a grahpics device (typically <code><a href="grDevices.html#topic+png">png</a></code> and
<code><a href="grDevices.html#topic+pdf">pdf</a></code>). At last, a LaTeX document will be created and compiled if
an appropriate LaTeX command is provided. And the final PDF output will be
opened with the PDF viewer set in <code>getOption('pdfviewer')</code> if
<code>ani.options('autobrowse') == TRUE</code>.
</p>


<h3>Value</h3>

<p>Invisible <code>NULL</code>
</p>


<h3>Note</h3>

<p>This function will detect if it was called in a Sweave environment &ndash;
if so, <code>img.name</code> will be automatically adjusted to
<code>prefix.string-label</code>, and the LaTeX output will not be a complete
document, but rather a single line like
</p>
<pre>\animategraphics[ani.opts]{1/interval}{img.name}{}{}</pre>
<p>This automatic feature can be useful to Sweave users (but remember to set
the Sweave option <code>results=tex</code>). See <code>demo('Sweave_animation')</code>
for a complete example.
</p>
<p>PDF devices are recommended because of their high quality and usually they
are more friendly to LaTeX, but the size of PDF files is often much larger;
in this case, we may set the option <code>'qpdf'</code> or <code>'pdftk'</code> to
compress the PDF graphics output. To set the PDF device, use
<code>ani.options(ani.dev = 'pdf', ani.type = 'pdf')</code>
</p>
<p>So far animations created by the LaTeX package <span class="pkg">animate</span> can only be
viewed with Acrobat Reader (Windows) or <code>acroread</code> (Linux).  Other
PDF viewers may not support JavaScript (in fact the PDF animation is driven
by JavaScript). Linux users may need to install <code>acroread</code> and set
<code>options(pdfviewer = 'acroread')</code>.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/savelatex/">https://yihui.org/animation/example/savelatex/</a>
</p>
<p>To know more about the <code>animate</code> package, please refer to
<a href="http://www.ctan.org/tex-archive/macros/latex/contrib/animate/">http://www.ctan.org/tex-archive/macros/latex/contrib/animate/</a>. There
are a lot of options can be set in <code>ani.opts</code> and <code>pkg.opts</code>.
</p>


<h3>See Also</h3>

<p>Other utilities: 
<code><a href="#topic+im.convert">im.convert</a>()</code>,
<code><a href="#topic+saveGIF">saveGIF</a>()</code>,
<code><a href="#topic+saveHTML">saveHTML</a>()</code>,
<code><a href="#topic+saveSWF">saveSWF</a>()</code>,
<code><a href="#topic+saveVideo">saveVideo</a>()</code>
</p>

<hr>
<h2 id='saveSWF'>Convert images to Flash animations</h2><span id='topic+saveSWF'></span>

<h3>Description</h3>

<p>This function opens a graphical device first to generate a sequence of images
based on <code>expr</code>, then makes use of the commands in SWFTools
(<code>png2swf</code>, <code>jpeg2swf</code>, <code>pdf2swf</code>) to convert these
images to a single Flash animation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saveSWF(
  expr,
  swf.name = "animation.swf",
  img.name = "Rplot",
  swftools = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="saveSWF_+3A_expr">expr</code></td>
<td>
<p>an expression to generate animations; use either the animation
functions (e.g. <code>brownian.motion()</code>) in this package or a custom
expression (e.g. <code>for(i in 1:10) plot(runif(10), ylim = 0:1)</code>).</p>
</td></tr>
<tr><td><code id="saveSWF_+3A_swf.name">swf.name</code></td>
<td>
<p>file name of the Flash file</p>
</td></tr>
<tr><td><code id="saveSWF_+3A_img.name">img.name</code></td>
<td>
<p>the base file name of the sequence of images (without any
format or extension)</p>
</td></tr>
<tr><td><code id="saveSWF_+3A_swftools">swftools</code></td>
<td>
<p>the path of SWFTools, e.g. &lsquo;<span class="file">C:/swftools</span>&rsquo;. This argument
is to make sure that <code>png2swf</code>, <code>jpeg2swf</code> and <code>pdf2swf</code> can
be executed correctly. If it is <code>NULL</code>, it should be guaranteed that
these commands can be executed without the path; anyway, this function will
try to find SWFTools from Windows registry even if it is not in the PATH
variable.</p>
</td></tr>
<tr><td><code id="saveSWF_+3A_...">...</code></td>
<td>
<p>other arguments passed to <code><a href="#topic+ani.options">ani.options</a></code>, e.g.
<code>ani.height</code> and <code>ani.width</code>, ...</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer indicating failure (-1) or success (0) of the converting
(refer to <code><a href="base.html#topic+system">system</a></code>).
</p>


<h3>Note</h3>

<p>Please download and install the SWFTools before using this function:
<a href="http://www.swftools.org">http://www.swftools.org</a>
</p>
<p>We can also set the path to SWF Tools by <code>ani.options(swftools =
  'path/to/swftools')</code>.
</p>
<p><code>ani.options('ani.type')</code> can only be one of <code>png</code>, <code>pdf</code>
and <code>jpeg</code>.
</p>
<p>Also note that PDF graphics can be compressed using qpdf or Pdftk (if
either one is installed and <code>ani.options('qpdf')</code> or
<code>ani.options('pdftk')</code> has been set); see <code><a href="#topic+qpdf">qpdf</a></code> or
<code><a href="#topic+pdftk">pdftk</a></code>.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/saveswf/">https://yihui.org/animation/example/saveswf/</a>
</p>


<h3>See Also</h3>

<p>Other utilities: 
<code><a href="#topic+im.convert">im.convert</a>()</code>,
<code><a href="#topic+saveGIF">saveGIF</a>()</code>,
<code><a href="#topic+saveHTML">saveHTML</a>()</code>,
<code><a href="#topic+saveLatex">saveLatex</a>()</code>,
<code><a href="#topic+saveVideo">saveVideo</a>()</code>
</p>

<hr>
<h2 id='saveVideo'>Convert a sequence of images to a video by FFmpeg</h2><span id='topic+saveVideo'></span>

<h3>Description</h3>

<p>This function opens a graphics device to record the images produced in the
code <code>expr</code>, then uses FFmpeg to convert these images to a video.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saveVideo(
  expr,
  video.name = "animation.mp4",
  img.name = "Rplot",
  ffmpeg = ani.options("ffmpeg"),
  other.opts = if (grepl("[.]mp4$", video.name)) "-pix_fmt yuv420p",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="saveVideo_+3A_expr">expr</code></td>
<td>
<p>the R code to draw (several) plots</p>
</td></tr>
<tr><td><code id="saveVideo_+3A_video.name">video.name</code></td>
<td>
<p>the file name of the output video (e.g.
&lsquo;<span class="file">animation.mp4</span>&rsquo; or &lsquo;<span class="file">animation.avi</span>&rsquo;)</p>
</td></tr>
<tr><td><code id="saveVideo_+3A_img.name">img.name</code></td>
<td>
<p>the file name of the sequence of images to be generated</p>
</td></tr>
<tr><td><code id="saveVideo_+3A_ffmpeg">ffmpeg</code></td>
<td>
<p>the command to call FFmpeg (e.g.
<code>'C:/Software/ffmpeg/bin/ffmpeg.exe'</code> under Windows or 'avconv' on some linux machines); note the full
path of FFmpeg can be pre-specified in <code><a href="#topic+ani.options">ani.options</a>('ffmpeg')</code></p>
</td></tr>
<tr><td><code id="saveVideo_+3A_other.opts">other.opts</code></td>
<td>
<p>other options to be passed to <code>ffmpeg</code>, e.g. we can
specify the bitrate as <code>other.opts = '-b 400k'</code> (The default <code>"-pix_fmt yuv420p"</code> is a work-around for a bug in some versions of ffmpeg.)</p>
</td></tr>
<tr><td><code id="saveVideo_+3A_...">...</code></td>
<td>
<p>other arguments to be passed to <code><a href="#topic+ani.options">ani.options</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function uses <code><a href="base.html#topic+system">system</a></code> to call FFmpeg to convert the images
to a single video. The command line used in this function is: <code>ffmpeg
-y -r &lt;1/interval&gt; -i &lt;img.name&gt;%d.&lt;ani.type&gt; other.opts video.name</code>
</p>
<p>where <code>interval</code> comes from <code>ani.options('interval')</code>, and
<code>ani.type</code> is from <code>ani.options('ani.type')</code>. For more details on
the numerous options of FFmpeg, please see the reference.
</p>
<p>Some linux systems may use the alternate software 'avconv' instead of 'ffmpeg'.  The package will attempt to determine which command is present and set <code><a href="#topic+ani.options">ani.options</a>('ffmpeg')</code> to an appropriate default value. This can be overridden by passing in the <code>ffmpeg</code> argument.
</p>


<h3>Value</h3>

<p>An integer indicating failure (-1) or success (0) of the converting
(refer to <code><a href="base.html#topic+system">system</a></code>).
</p>


<h3>Note</h3>

<p>There are a lot of possibilities in optimizing the video. My knowledge
on FFmpeg is very limited, hence the default output by this function could
be of low quality or too large. The file &lsquo;<span class="file">presets.xml</span>&rsquo; of WinFF might
be a good guide: <a href="https://code.google.com/archive/p/winff">https://code.google.com/archive/p/winff</a>.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie, based on an inital version by Thomas Julou
<a href="mailto:thomas.julou@gmail.com">thomas.julou@gmail.com</a>
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/savevideo/">https://yihui.org/animation/example/savevideo/</a>
</p>
<p>To know more about ffmpeg, please see <a href="http://ffmpeg.org/documentation.html">http://ffmpeg.org/documentation.html</a>
</p>


<h3>See Also</h3>

<p>Other utilities: 
<code><a href="#topic+im.convert">im.convert</a>()</code>,
<code><a href="#topic+saveGIF">saveGIF</a>()</code>,
<code><a href="#topic+saveHTML">saveHTML</a>()</code>,
<code><a href="#topic+saveLatex">saveLatex</a>()</code>,
<code><a href="#topic+saveSWF">saveSWF</a>()</code>
</p>

<hr>
<h2 id='sim.qqnorm'>Simulation of QQ plots for the Normal distribution</h2><span id='topic+sim.qqnorm'></span>

<h3>Description</h3>

<p>This demo shows the possible QQ plots created by random numbers generated
from a Normal distribution so that users can get a rough idea about how QQ
plots really look like.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sim.qqnorm(n = 20, last.plot = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sim.qqnorm_+3A_n">n</code></td>
<td>
<p>integer: sample size</p>
</td></tr>
<tr><td><code id="sim.qqnorm_+3A_last.plot">last.plot</code></td>
<td>
<p>an expression to be evaluated after the plot is drawn, e.g.
<code>expression(abline(0, 1))</code> to add the diagonal line</p>
</td></tr>
<tr><td><code id="sim.qqnorm_+3A_...">...</code></td>
<td>
<p>other arguments passed to <code><a href="stats.html#topic+qqnorm">qqnorm</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>When the sample size is small, it is hard to get a correct inference about
the distribution of data from a QQ plot. Even if the sample size is large,
usually there are outliers far away from the straight line. Therefore, don't
overinterpret the QQ plots.
</p>


<h3>Value</h3>

<p><code>NULL</code>
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/sim-qqnorm/">https://yihui.org/animation/example/sim-qqnorm/</a>
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+qqnorm">qqnorm</a></code>
</p>

<hr>
<h2 id='vanke1127'>Stock prices of Vanke Co., Ltd on 2009/11/27</h2><span id='topic+vanke1127'></span>

<h3>Description</h3>

<p>This is a sample of stock prices of the Vanke Co., Ltd on 2009/11/27.
</p>


<h3>Format</h3>

<p>A data frame with 2831 observations on the following 2 variables.
</p>
 <dl>
<dt>time</dt><dd><p>POSIXt: the time corresponding to stock prices</p>
</dd>
<dt>price</dt><dd><p>a numeric vector: stock prices</p>
</dd> </dl>



<h3>Source</h3>

<p>This data can be obtained from most stock websites.
</p>

<hr>
<h2 id='vi.grid.illusion'>Visual illusions: Scintillating grid illusion and Hermann grid illusion</h2><span id='topic+vi.grid.illusion'></span>

<h3>Description</h3>

<p>The two most common types of grid illusions are Hermann grid illusions and
Scintillating grid illusions. This function provides illustrations for both
illusions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vi.grid.illusion(
  nrow = 8,
  ncol = 8,
  lwd = 8,
  cex = 3,
  col = "darkgray",
  type = c("s", "h")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vi.grid.illusion_+3A_nrow">nrow</code></td>
<td>
<p>number of rows for the grid</p>
</td></tr>
<tr><td><code id="vi.grid.illusion_+3A_ncol">ncol</code></td>
<td>
<p>number of columns for the grid</p>
</td></tr>
<tr><td><code id="vi.grid.illusion_+3A_lwd">lwd</code></td>
<td>
<p>line width for grid lines</p>
</td></tr>
<tr><td><code id="vi.grid.illusion_+3A_cex">cex</code></td>
<td>
<p>magnification for points in Scintillating grid illusions</p>
</td></tr>
<tr><td><code id="vi.grid.illusion_+3A_col">col</code></td>
<td>
<p>color for grid lines</p>
</td></tr>
<tr><td><code id="vi.grid.illusion_+3A_type">type</code></td>
<td>
<p>type of illusions: <code>'s'</code> for Scintillating grid illusions
and <code>'h'</code> for Hermann grid illusions</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A grid illusion is any kind of grid that deceives a person's vision.
</p>
<p>This is actually a static image; pay attention to the intersections of the
grid and there seems to be some moving points (non-existent in fact).
</p>


<h3>Value</h3>

<p><code>NULL</code>
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>See Also</h3>

<p><code><a href="graphics.html#topic+points">points</a></code>, <code><a href="graphics.html#topic+abline">abline</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## default to be Scintillating grid illusions
vi.grid.illusion()

## set wider lines to see Hermann grid illusions
vi.grid.illusion(type = "h", lwd = 22, nrow = 5, ncol = 5, col = "white")
</code></pre>

<hr>
<h2 id='vi.lilac.chaser'>Visual Illusions: Lilac Chaser</h2><span id='topic+vi.lilac.chaser'></span>

<h3>Description</h3>

<p>Stare at the center cross for a few (say 30) seconds to experience the
phenomena of the illusion.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vi.lilac.chaser(np = 16, col = "magenta", bg = "gray", p.cex = 7, c.cex = 5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vi.lilac.chaser_+3A_np">np</code></td>
<td>
<p>number of points</p>
</td></tr>
<tr><td><code id="vi.lilac.chaser_+3A_col">col</code></td>
<td>
<p>color of points</p>
</td></tr>
<tr><td><code id="vi.lilac.chaser_+3A_bg">bg</code></td>
<td>
<p>background color of the plot</p>
</td></tr>
<tr><td><code id="vi.lilac.chaser_+3A_p.cex">p.cex</code></td>
<td>
<p>magnification of points</p>
</td></tr>
<tr><td><code id="vi.lilac.chaser_+3A_c.cex">c.cex</code></td>
<td>
<p>magnification of the center cross</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Just try it out.
</p>


<h3>Value</h3>

<p><code>NULL</code>
</p>


<h3>Note</h3>

<p>In fact, points in the original version of &lsquo;Lilac Chaser&rsquo; are
<em>blurred</em>, which is not implemented in this function.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Examples at <a href="https://yihui.org/animation/example/vi-lilac.chaser/">https://yihui.org/animation/example/vi-lilac.chaser/</a>
</p>


<h3>See Also</h3>

<p><code><a href="graphics.html#topic+points">points</a></code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
