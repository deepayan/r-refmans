<!DOCTYPE html><html lang="en-US"><head><title>Help for package protolite</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {protolite}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#geobuf'><p>Geobuf</p></a></li>
<li><a href='#mapbox'><p>Mapbox Vector Tiles</p></a></li>
<li><a href='#serialize_pb'><p>Serialize to Protocol Buffers</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Highly Optimized Protocol Buffer Serializers</td>
</tr>
<tr>
<td>Description:</td>
<td>Pure C++ implementations for reading and writing several common data 
    formats based on Google protocol-buffers. Currently supports 'rexp.proto' for 
    serialized R objects, 'geobuf.proto' for binary geojson, and 'mvt.proto' for 
    vector tiles. This package uses the auto-generated C++ code by protobuf-compiler, 
    hence the entire serialization is optimized at compile time. The 'RProtoBuf' 
    package on the other hand uses the protobuf runtime library to provide a general-
    purpose toolkit for reading and writing arbitrary protocol-buffer data in R.</td>
</tr>
<tr>
<td>Version:</td>
<td>2.3.1</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/jeroen/protolite">https://github.com/jeroen/protolite</a>
<a href="https://jeroen.r-universe.dev/protolite">https://jeroen.r-universe.dev/protolite</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jeroen/protolite/issues">https://github.com/jeroen/protolite/issues</a></td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>libprotobuf and protobuf-compiler</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 0.12.12), jsonlite</td>
</tr>
<tr>
<td>Suggests:</td>
<td>spelling, curl, testthat, sf</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-10-03 14:13:06 UTC; jeroen</td>
</tr>
<tr>
<td>Author:</td>
<td>Jeroen Ooms <a href="https://orcid.org/0000-0002-4035-0289"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jeroen Ooms &lt;jeroenooms@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-10-04 11:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='geobuf'>Geobuf</h2><span id='topic+geobuf'></span><span id='topic+read_geobuf'></span><span id='topic+geobuf2json'></span><span id='topic+json2geobuf'></span>

<h3>Description</h3>

<p>The <a href="https://github.com/mapbox/geobuf">geobuf</a> format is an optimized
binary format for storing <code>geojson</code> data with protocol buffers. These
functions are compatible with the <code>geobuf2json</code> and <code>json2geobuf</code>
utilities from the geobuf <a href="https://www.npmjs.com/package/geobuf">npm package</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_geobuf(x, as_data_frame = TRUE)

geobuf2json(x, pretty = FALSE)

json2geobuf(json, decimals = 6)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geobuf_+3A_x">x</code></td>
<td>
<p>file path or raw vector with the serialized <code>geobuf.proto</code> message</p>
</td></tr>
<tr><td><code id="geobuf_+3A_as_data_frame">as_data_frame</code></td>
<td>
<p>simplify geojson data into data frames</p>
</td></tr>
<tr><td><code id="geobuf_+3A_pretty">pretty</code></td>
<td>
<p>indent json, see <a href="jsonlite.html#topic+toJSON">jsonlite::toJSON</a></p>
</td></tr>
<tr><td><code id="geobuf_+3A_json">json</code></td>
<td>
<p>a text string with geojson data</p>
</td></tr>
<tr><td><code id="geobuf_+3A_decimals">decimals</code></td>
<td>
<p>how many decimals (digits behind the dot) to store for numbers</p>
</td></tr>
</table>

<hr>
<h2 id='mapbox'>Mapbox Vector Tiles</h2><span id='topic+mapbox'></span><span id='topic+read_mvt_data'></span><span id='topic+read_mvt_sf'></span>

<h3>Description</h3>

<p>Read Mapbox vector-tile (mvt) files and returns the list of layers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_mvt_data(data, as_latlon = TRUE, zxy = NULL)

read_mvt_sf(data, crs = 4326, zxy = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mapbox_+3A_data">data</code></td>
<td>
<p>url, path or raw vector with the mvt data</p>
</td></tr>
<tr><td><code id="mapbox_+3A_as_latlon">as_latlon</code></td>
<td>
<p>return the data as lat/lon instead of raw EPSG:3857 positions</p>
</td></tr>
<tr><td><code id="mapbox_+3A_zxy">zxy</code></td>
<td>
<p>vector of length 3 with respectively z (zoom), x (column) and y (row).
For file/url in the standard <code style="white-space: pre;">&#8288;../{z}/{x}/{y}.mvt&#8288;</code> format, these are automatically
inferred from the input path.</p>
</td></tr>
<tr><td><code id="mapbox_+3A_crs">crs</code></td>
<td>
<p>desired output coordinate system (passed to <a href="sf.html#topic+st_transform">sf::st_transform</a>).
Note that mvt input is always by definition 3857.</p>
</td></tr>
</table>

<hr>
<h2 id='serialize_pb'>Serialize to Protocol Buffers</h2><span id='topic+serialize_pb'></span><span id='topic+protolite'></span><span id='topic+unserialize_pb'></span>

<h3>Description</h3>

<p>Serializes R objects to a general purpose protobuf message. It uses the same
<a href="https://github.com/jeroen/protolite/blob/master/src/rexp.proto">rexp.proto</a>
descriptor and mapping between R objects and protobuf messages as RHIPE and the
<a href="RProtoBuf.html#topic+serialize_pb">RProtoBuf</a> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>serialize_pb(object, connection = NULL, skip_native = FALSE)

unserialize_pb(msg)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="serialize_pb_+3A_object">object</code></td>
<td>
<p>an R object to serialize</p>
</td></tr>
<tr><td><code id="serialize_pb_+3A_connection">connection</code></td>
<td>
<p>a connection, file, or <code>NULL</code> for a raw vector</p>
</td></tr>
<tr><td><code id="serialize_pb_+3A_skip_native">skip_native</code></td>
<td>
<p>do not serialize 'native' (non-data) R objects. Setting to <code>TRUE</code>
will only serialize <em>data</em> types (numeric, boolean, string, raw, list). The default
behavior is to fall back on base R <code><a href="base.html#topic+serialize">serialize</a></code> for non-data objects.</p>
</td></tr>
<tr><td><code id="serialize_pb_+3A_msg">msg</code></td>
<td>
<p>raw vector with the serialized <code>rexp.proto</code> message</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>serialize_pb</code> and <code>unserialize_pb</code> reimplement the identically
named functions from the <code>RProtoBuf</code> package in pure <code>C++</code>. This makes
the function faster and simpler, but the output should be identical.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Serialize and unserialize an object
buf &lt;- serialize_pb(iris)
out &lt;- unserialize_pb(buf)
stopifnot(identical(iris, out))

## Not run:  #Fully compatible with RProtoBuf
buf &lt;- RProtoBuf::serialize_pb(iris, NULL)
out &lt;- protolite::unserialize_pb(buf)
stopifnot(identical(iris, out))

# Other way around
buf &lt;- protolite::serialize_pb(mtcars, NULL)
out &lt;- RProtoBuf::unserialize_pb(buf)
stopifnot(identical(mtcars, out))

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
