<!DOCTYPE html><html><head><title>Help for package ie2misc</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ie2misc}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%+na%'><p>%+na%</p></a></li>
<li><a href='#adaps'><p>adaps, adaps2, and adapsBATCH</p></a></li>
<li><a href='#dr'><p>Index of agreement (dr)</p></a></li>
<li><a href='#expFileOutput'><p>expFileOutput and expFileOutputBATCH</p></a></li>
<li><a href='#ie2misc'><p>ie2misc: Irucka Embry's miscellaneous USGS functions</p></a></li>
<li><a href='#madstat'><p>Mean-absolute deviation (MAD)</p></a></li>
<li><a href='#mae'><p>Mean-absolute error (MAE)</p></a></li>
<li><a href='#mape'><p>Mean absolute percent error (MAPE)</p></a></li>
<li><a href='#psfFileChange'><p>psfFileChange and psfFileChangeBATCH</p></a></li>
<li><a href='#qw'><p>qw, qw2 and qwBATCH</p></a></li>
<li><a href='#rmse'><p>Root mean square error (RMSE)</p></a></li>
<li><a href='#sat_enthalpy'><p>Saturated Enthalpy (H)</p></a></li>
<li><a href='#vnse'><p>Nash-Sutcliffe model efficiency (NSE)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Irucka Embry's Miscellaneous USGS Functions</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9.1</td>
</tr>
<tr>
<td>Author:</td>
<td>Irucka Embry [aut, cre], Anne Hoos [ctb], and Timothy H. Diehl [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Irucka Embry &lt;iembry@ecoccs.com&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.3.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>readxl (&ge; 1.3.1), openxlsx (&ge; 4.1.4), gWidgets2, stringi,
mgsub, reader, lubridate, tcltk, data.table (&ge; 1.10.2), utils,
tools, assertthat, checkmate</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rando, spelling</td>
</tr>
<tr>
<td>Description:</td>
<td>A collection of Irucka Embry's miscellaneous USGS functions
    (processing .exp and .psf files, statistical error functions,
    "+" dyadic operator for use with NA, creating ADAPS and QW
    spreadsheet files, calculating saturated enthalpy). Irucka created these
    functions while a Cherokee Nation Technology Solutions (CNTS) United States
    Geological Survey (USGS) Contractor and/or USGS employee.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://gitlab.com/iembry/ie2misc">https://gitlab.com/iembry/ie2misc</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://gitlab.com/iembry/ie2misc/-/issues">https://gitlab.com/iembry/ie2misc/-/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://creativecommons.org/publicdomain/zero/1.0/legalcode">CC0</a></td>
</tr>
<tr>
<td>Copyright:</td>
<td>This software is in the public domain because it contains
materials that originally came from the United States
Geological Survey, an agency of the United States Department of
Interior. For more information, see the official USGS copyright
policy at
&lt;https://www.usgs.gov/information-policies-and-instructions/copyrights-and-credits#copyright&gt;</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-19 19:15:00 UTC; xbyri</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-20 07:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+2Bna+25'>%+na%</h2><span id='topic++25+2Bna+25'></span>

<h3>Description</h3>

<p>This function &quot;defines a dyadic operator that will behave differently than
the &quot;+&quot; operator with regards to missing values&quot;. (Quote by 42- in Source
1 below). In this case, add <code>x</code> and <code>y</code> so that <code>NA</code> is ignored
when <code>x</code> is a number and <code>x = NA</code> when <code>x = 0</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>x %+na% y
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B2Bna+2B25_+3A_x">x</code></td>
<td>
<p>numeric vector that does not contain any <code>NA</code> values</p>
</td></tr>
<tr><td><code id="+2B25+2B2Bna+2B25_+3A_y">y</code></td>
<td>
<p>numeric vector which contains at least one <code>NA</code> value</p>
</td></tr>
</table>


<h3>Value</h3>

<p>numeric vector resulting from the <code>sum</code> of <code>x</code> and <code>y</code>
</p>


<h3>Source</h3>


<ol>
<li><p> Using ':=' in data.table to sum the values of two columns in R, ignoring NAs - Stack Overflow answered by 42- on Oct 28 2012. See <a href="https://stackoverflow.com/questions/13106645/using-in-data-table-to-sum-the-values-of-two-columns-in-r-ignoring-nas">https://stackoverflow.com/questions/13106645/using-in-data-table-to-sum-the-values-of-two-columns-in-r-ignoring-nas</a>.
</p>
</li>
<li><p> R - merge unequal regular (15 min intervals) and irregular time series within 10 minutes - Stack Overflow asked by iembry on Jan 12 2015 and edited by iembry on Feb 2 2015. See <a href="https://stackoverflow.com/questions/27911643/r-merge-unequal-regular-15-min-intervals-and-irregular-time-series-within-10">https://stackoverflow.com/questions/27911643/r-merge-unequal-regular-15-min-intervals-and-irregular-time-series-within-10</a>.
</p>
</li>
<li><p> r - How to not run an example using roxygen2? - Stack Overflow answered and edited by samkart on Jul 9 2017. (Also see the additional comments in response to the answer.) See <a href="https://stackoverflow.com/questions/12038160/how-to-not-run-an-example-using-roxygen2">https://stackoverflow.com/questions/12038160/how-to-not-run-an-example-using-roxygen2</a>.
</p>
</li>
<li><p> devtools - Issues in R package after CRAN asked to replace dontrun by dontrun - Stack Overflow answered by Hong Ooi on Sep 1 2020. (Also see the additional comments in response to the answer.) See <a href="https://stackoverflow.com/questions/63693563/issues-in-r-package-after-cran-asked-to-replace-dontrun-by-dontrun">https://stackoverflow.com/questions/63693563/issues-in-r-package-after-cran-asked-to-replace-dontrun-by-dontrun</a>.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>
library("ie2misc")

a &lt;- 1:10
b &lt;- c(98:106, NA)

a %+na% b


## Not run: 
# See Source 3 and Source 4
# Note that if the vector with the NA value(s) is first, then an error
# message will be displayed as now there are checks for both x and y.

a &lt;- 1:10
b &lt;- c(98:106, NA)

try(b %+na% a)

## End(Not run)


a1 &lt;- 1:12
b1 &lt;- c(98:106, rep(NA, 3))

a1 %+na% b1


# using a matrix of the numeric vectors a and b
mat1 &lt;- matrix(data = c(a, b), nrow = length(b), ncol = 2, byrow = FALSE,
        dimnames = list(c(rep("", length(b))), c("a", "b")))
mat1[, 1] %+na% mat1[, 2]


# using a data.frame of the numeric vectors a and b
df1 &lt;- data.frame(a, b)
df1[, 1] %+na% df1[, 2]


library("data.table")

# using a data.table of the numeric vectors a and b

a &lt;- 1:10
b &lt;- c(98:106, NA)

df2 &lt;- data.table(a, b)
df2[, 1, with = FALSE][[1]] %+na% df2[, 2, with = FALSE][[1]]


</code></pre>

<hr>
<h2 id='adaps'>adaps, adaps2, and adapsBATCH</h2><span id='topic+adaps'></span><span id='topic+adapsBATCH'></span><span id='topic+adaps2'></span>

<h3>Description</h3>

<p>adaps, adaps2, and adapsBATCH process raw Automated Data Processing System
(ADAPS) .rdb files from the U.S. Geological Survey (USGS) National Water
Information System (NWIS). For these functions, it is only for continuous
ADAPS data of the following parameters: discharge (00060), FNU turbidity
(63680), and NTRU turbidity (63676 from 63680).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adaps(
  file = tk_choose.files(default = "", caption =
    "Select file(s) to open &amp; hold down Ctrl to choose more than 1 file", multi = TRUE,
    filters = matrix(c("ADAPS file", ".rdb", "ADAPS file", ".RDB"), 4, 2, byrow = TRUE)),
  interactive = TRUE,
  overwrite = TRUE
)

adapsBATCH(
  path = tk_choose.dir(caption = "Select directory with the ADAPS .rdb files"),
  overwrite = TRUE
)

adaps2(file, overwrite = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="adaps_+3A_file">file</code></td>
<td>
<p>Input ADAPS .rdb file(s) to be selected through a file dialog.</p>
</td></tr>
<tr><td><code id="adaps_+3A_interactive">interactive</code></td>
<td>
<p>If interactive is <code>TRUE</code>, then the user will select
the filenames(s) to use for saving with the file dialog. In order to
select more than one file, the user must hold down the Ctrl (Control)
button while mouse clicking the chosen files. If interactive is <code>FALSE</code>,
then the user will select the directory, via the directory dialog, to use
for saving and the original filenames will be used.</p>
</td></tr>
<tr><td><code id="adaps_+3A_overwrite">overwrite</code></td>
<td>
<p>If <code>TRUE</code>, overwrite any existing spreadsheet.</p>
</td></tr>
<tr><td><code id="adaps_+3A_path">path</code></td>
<td>
<p>Directory path of ADAPS .rdb files to be selected through a
directory dialog. The user will be asked where to find the ADAPS .rdb
files &amp; then the user will be asked where to save the ADAPS .xlsx files.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>adaps function opens single or multiple raw ADAPS .rdb file(s) to modify the
format and then exports the file(s) in .xlsx format. This is done for a
single file or multiple files that the user selects with a file dialog.
</p>
<p>adaps2 function opens a single raw ADAPS .rdb file to modify the format and
then exports the file in .xlsx format. This is done for a single file
that the user selects without a file dialog.
</p>
<p>adapsBATCH function opens raw ADAPS .rdb files, from a directory, to modify
the format and then exports the files in .xlsx format. This is done in a
BATCH mode (whole directory of ADAPS .rdb files) using a directory dialog.
</p>
<p>adaps, adaps2, and adapsBATCH functions perform the same processes on the
raw ADAPS .rdb files: 1) Read in the file and remove the 1st 4 or 5 lines
depending on whether NTRU data are present or not, 2) create 4 or 5
columns (depending on whether NTRU data are present or not) based on the
1st 4 or 5 lines, and 3) export the modified file in .xlsx format.
</p>
<p>The following lines are representative of the .rdb format used in the files
that these functions can operate on. Note: ntru may not be present. If so,
then there will only be 3 cases of 16N in the last row. The last row will
be removed in the final spreadsheet.
</p>

<table>
<tr>
 <td style="text-align: center;">
  DATETIME </td><td style="text-align: center;"> ght</td>
</tr>
<tr>
 <td style="text-align: center;">
  cfs</td>
</tr>
<tr>
 <td style="text-align: center;">
  fnu</td>
</tr>
<tr>
 <td style="text-align: center;">
  ntru</td>
</tr>
<tr>
 <td style="text-align: center;">
  19D </td><td style="text-align: center;"> 16N </td><td style="text-align: center;"> 16N </td><td style="text-align: center;"> 16N </td><td style="text-align: center;"> 16N
</td>
</tr>

</table>



<h3>Value</h3>

<p>ADAPS .xlsx file(s)
</p>


<h3>Source</h3>


<ol>
<li><p> r - How can I check if a file is empty? - Stack Overflow answered by Konrad Rudolph and edited by Geekuna Matata on Apr 23 2014. See <a href="https://stackoverflow.com/questions/23254002/how-can-i-check-if-a-file-is-empty">https://stackoverflow.com/questions/23254002/how-can-i-check-if-a-file-is-empty</a>.
</p>
</li>
<li><p> r - Better error message for stopifnot? - Stack Overflow answered by Andrie on Dec 1 2011. See <a href="https://stackoverflow.com/questions/8343509/better-error-message-for-stopifnot">https://stackoverflow.com/questions/8343509/better-error-message-for-stopifnot</a>.
</p>
</li>
<li><p> RDocumentation: TclInterface tcltk. See <a href="https://www.rdocumentation.org/packages/tcltk/versions/3.3.1">https://www.rdocumentation.org/packages/tcltk/versions/3.3.1</a>.
</p>
</li>
<li><p> James Wettenhall &amp; Philippe Grosjean, File Open/Save dialogs in R tcltk, December 01, 2015. See <a href="https://web.archive.org/web/20160521051207/http://www.sciviews.org/recipes/tcltk/TclTk-file-open-save-dialogs/">https://web.archive.org/web/20160521051207/http://www.sciviews.org/recipes/tcltk/TclTk-file-open-save-dialogs/</a>. Retrieved thanks to the Internet Archive: Wayback Machine
</p>
</li>
<li><p> r - read csv files and perform function, then bind together - Stack Overflow answered by bjoseph on Jan 8 2015. See <a href="https://stackoverflow.com/questions/27846715/read-csv-files-and-perform-function-then-bind-together">https://stackoverflow.com/questions/27846715/read-csv-files-and-perform-function-then-bind-together</a>.
</p>
</li>
<li><p> multiple output filenames in R - Stack Overflow asked and edited by Gabelins on Feb 1 2013. See <a href="https://stackoverflow.com/questions/14651594/multiple-output-filenames-in-r">https://stackoverflow.com/questions/14651594/multiple-output-filenames-in-r</a>.
</p>
</li>
<li><p> r - Regex return file name, remove path and file extension - Stack Overflow answered and edited by Ananda Mahto on Feb 25 2013. See <a href="https://stackoverflow.com/questions/15073753/regex-return-file-name-remove-path-and-file-extension/15073919">https://stackoverflow.com/questions/15073753/regex-return-file-name-remove-path-and-file-extension/15073919</a>.
</p>
</li>
<li><p> R help - How to change the default Date format for write.csv function? answered by William Dunlap on Dec 28, 2009. See <a href="https://hypatia.math.ethz.ch/pipermail/r-help/2009-December/416010.html">https://hypatia.math.ethz.ch/pipermail/r-help/2009-December/416010.html</a>.
</p>
</li>
<li><p> RDocumentation: strptime base. See <a href="https://www.rdocumentation.org/packages/base/versions/3.3.1/topics/strptime">https://www.rdocumentation.org/packages/base/versions/3.3.1/topics/strptime</a>.
</p>
</li>
<li><p> convert date and time string to POSIX in R - Stack Overflow commented by cryo111 on Sep 18 2013. See <a href="https://stackoverflow.com/questions/18874400/convert-date-and-time-string-to-posix-in-r/18874863">https://stackoverflow.com/questions/18874400/convert-date-and-time-string-to-posix-in-r/18874863</a>.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

library("ie2misc")
# Example to check the input file format
# Copy and paste the following code into the R console if you
# wish to see the ADAPS .rdb input file format.
# Note the number of lines and the row headings.
file.show(system.file("extdata", "spring_creek_partial.rdb",
  package = "ie2misc"), title = paste("spring_creek_partial.rdb"))
# opens the .rdb file using the default text editor




# Examples to change (an) ADAPS .rdb file(s) interactively and
# non-interactively
adaps2(system.file("extdata", "spring_creek_partial.rdb",
package = "ie2misc"))


adaps() # default where interactive = TRUE
# Follow the file dialog instructions


adaps(interactive = FALSE)
# Follow the file dialog instructions


# Example to change a directory of ADAPS .rdb files
adapsBATCH()
# Follow the file dialog instructions

## End(Not run)


</code></pre>

<hr>
<h2 id='dr'>Index of agreement (dr)</h2><span id='topic+dr'></span>

<h3>Description</h3>

<p>This function computes the &quot;index of agreement (dr)&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dr(predicted, observed, na.rm = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dr_+3A_predicted">predicted</code></td>
<td>
<p>numeric vector that contains the predicted data
points (1st parameter)</p>
</td></tr>
<tr><td><code id="dr_+3A_observed">observed</code></td>
<td>
<p>numeric vector that contains the observed data
points (2nd parameter)</p>
</td></tr>
<tr><td><code id="dr_+3A_na.rm">na.rm</code></td>
<td>
<p>logical vector that determines whether the missing
values should be removed or not.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>dr is expressed as
</p>
<p style="text-align: center;"><code class="reqn">d_{r} = 1 - \frac{\sum \limits_{i=1}^n{\left|P_i - O_i\right|}}{c \sum \limits_{i=1}^n{\left|O_i - \bar{O}\right|}}, \: when \: \sum \limits_{i=1}^n{\left|P_i - O_i\right|} \leq c \: \sum \limits_{i=1}^n{\left|O_i - \bar{O}\right|}</code>
</p>

<p style="text-align: center;"><code class="reqn">d_{r} = \frac{{c \sum \limits_{i=1}^n{\left|O_i - \bar{O}\right|}}}{\sum \limits_{i=1}^n{\left|P_i - O_i\right|}} - 1, \: when \: \sum \limits_{i=1}^n{\left|P_i - O_i\right|} &gt; c \: \sum \limits_{i=1}^n{\left|O_i - \bar{O}\right|}</code>
</p>


<dl>
<dt><em><code class="reqn">d_r</code></em></dt><dd><p>the &quot;index of agreement (dr)&quot;</p>
</dd>
<dt><em>n</em></dt><dd><p>the number of observations</p>
</dd>
<dt><em>P</em></dt><dd><p>the &quot;model estimates or predictions&quot;</p>
</dd>
<dt><em>O</em></dt><dd><p>the &quot;pairwise-matched observations that are judged to
be reliable&quot;</p>
</dd>
<dt><em><code class="reqn">\bar{O}</code></em></dt><dd><p>the &quot;true&quot; mean of the observations</p>
</dd>
</dl>

<p>Note: Both P and O should have the same units.
</p>
<p>The &quot;index of agreement (dr)&quot; is fully discussed in the Willmott reference.
</p>


<h3>Value</h3>

<p>&quot;index of agreement (dr)&quot; as a numeric vector. The default choice
is that any NA values will be kept (na.rm = FALSE). This can be
changed by specifying <code>na.rm = TRUE</code>, such as <code>dr(pre, obs, na.rm = TRUE)</code>.
</p>


<h3>References</h3>

<p>Cort J. Willmott, Scott M. Robeson, and Kenji Matsuura, &quot;A refined index of model performance&quot;, <em>International Journal of Climatology</em>, Volume 32, Issue 13, pages 2088-2094, 15 November 2012, article from ResearchGate: <a href="https://www.researchgate.net/publication/235961403_A_refined_index_of_model_performance">https://www.researchgate.net/publication/235961403_A_refined_index_of_model_performance</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mape">mape</a></code> for mean absolute percent error (MAPE), <code><a href="#topic+mae">mae</a></code> for
mean-absolute error (MAE), <code><a href="#topic+madstat">madstat</a></code> for mean-absolute deviation (MAD), <code><a href="#topic+vnse">vnse</a></code>
for Nash-Sutcliffe model efficiency (NSE), and <code><a href="#topic+rmse">rmse</a></code> for root mean square error (RMSE).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library("ie2misc")

obs &lt;- 1:10 # observed
pre &lt;- 2:11 # predicted
dr(pre, obs)


library("rando")

set_n(100) # makes the example reproducible
obs1 &lt;- r_norm(.seed = 400) # observed
pre1 &lt;- r_norm(.seed = 500) # predicted


# using the vectors pre1 and obs1
dr(pre1, obs1)


# using a matrix of the numeric vectors pre1 and obs1
mat1 &lt;- matrix(data = c(obs1, pre1), nrow = length(pre1), ncol = 2,
byrow = FALSE, dimnames = list(c(rep("", length(pre1))),
c("Predicted", "Observed")))
dr(mat1[, 2], mat1[, 1])

# mat1[, 1] # observed values from column 1 of mat1
# mat1[, 2] # predicted values from column 2 of mat1


# using a data.frame of the numeric vectors pre1 and obs1
df1 &lt;- data.frame(obs1, pre1)
dr(df1[, 2], df1[, 1])

# df1[, 1] # observed values from column 1 of df1
# df1[, 2] # predicted values from column 2 of df1


library("data.table")

# using a data.table of the numeric vectors pre1 and obs1
df2 &lt;- data.table(obs1, pre1)
dr(df2[, 2, with = FALSE][[1]], df2[, 1, with = FALSE][[1]])

# df2[, 1, with = FALSE][[1]] # observed values from column 1 of df2
# df2[, 2, with = FALSE][[1]] # predicted values from column 2 of df2


</code></pre>

<hr>
<h2 id='expFileOutput'>expFileOutput and expFileOutputBATCH</h2><span id='topic+expFileOutput'></span><span id='topic+expFileOutputBATCH'></span>

<h3>Description</h3>

<p>expFileOutput and expFileOutputBATCH process raw .exp files generated by the
USGS PeakFQ program (<a href="http://water.usgs.gov/software/PeakFQ/">http://water.usgs.gov/software/PeakFQ/</a>). The .exp
output file from running PeakFQ is a shortened version of the longer
narrative .prt file, more suitable for tabulating the model results than the
.prt file; however, the information must be changed to a fixed field format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expFileOutput(
  file = tk_choose.files(default = "", caption =
    "Select file(s) to open &amp; hold down Ctrl to choose more than 1 file", multi = TRUE,
    filters = matrix(c("Text file", ".exp", "Text file", ".EXP"), 4, 2, byrow = TRUE)),
  output = c("csv", "xlsx", "both"),
  overwrite = TRUE
)

expFileOutputBATCH(
  path = tk_choose.dir(caption = "Select the directory with the .exp files"),
  output = c("csv", "xlsx", "both"),
  overwrite = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="expFileOutput_+3A_file">file</code></td>
<td>
<p>Input .exp file(s), using a file dialog, to obtain 1) the
goodness-of-fit and trend results &amp; 2) the exceedance probability values.</p>
</td></tr>
<tr><td><code id="expFileOutput_+3A_output">output</code></td>
<td>
<p>The exported format for each set of results (options are .csv,
.xlsx, and both file types).</p>
</td></tr>
<tr><td><code id="expFileOutput_+3A_overwrite">overwrite</code></td>
<td>
<p>logical vector that determines whether the existing
should be overwritten or not.</p>
</td></tr>
<tr><td><code id="expFileOutput_+3A_path">path</code></td>
<td>
<p>Directory path of .exp files, to be selected through a directory
dialog, to obtain 1) the goodness-of-fit and trend results &amp; 2) the
exceedance probability values. The user will be asked where to find the
.exp files &amp; then the user will be asked where to save the results files.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>expFileOutput converts the user-selected .exp file to 1) a tab-delimited
.csv file for a single station with the goodness-of-fit and trend results
(all station information exists in a single row) and 2) a tab-delimited .csv
file for a single station with the exceedance probability values on each row.
For the .xlsx file, tab 1 contains the goodness-of-fit and trend results and
tab 2 contains the exceedance probability values.
</p>
<p>expFileOutputBATCH converts the user-selected directory of .exp files into
1) a tab-delimited .csv file as a single table, with one record for each
station, with the goodness-of-fit and trend results and 2) a tab-delimited
.csv file as a single table, with a set of records for each station, with the
exceedance probability values on each row. For the .xlsx file, tab 1
contains the goodness-of-fit and trend results and tab 2 contains the
exceedance probability values.
</p>
<p>In the Examples section, there is R code for the user to view the example
.exp file.
</p>


<h3>Value</h3>

<p>.csv, .xlsx, or both file types with 1) the goodness-of-fit and
trend results &amp; 2) the exceedance probability values for individual sites
in separate files. Currently, in the BATCH mode, all stations in the given
directory are combined in a single data.frame with both 1) and 2).
</p>


<h3>Author(s)</h3>

<p>Irucka Embry, Anne Hoos
</p>


<h3>Source</h3>


<ol>
<li><p> r - How can I check if a file is empty? - Stack Overflow answered by Konrad Rudolph and edited by Geekuna Matata on Apr 23 2014. See <a href="https://stackoverflow.com/questions/23254002/how-can-i-check-if-a-file-is-empty">https://stackoverflow.com/questions/23254002/how-can-i-check-if-a-file-is-empty</a>.
</p>
</li>
<li><p> r - Better error message for stopifnot? - Stack Overflow answered by Andrie on Dec 1 2011. See <a href="https://stackoverflow.com/questions/8343509/better-error-message-for-stopifnot">https://stackoverflow.com/questions/8343509/better-error-message-for-stopifnot</a>.
</p>
</li>
<li><p> RDocumentation: TclInterface tcltk. See <a href="https://www.rdocumentation.org/packages/tcltk/versions/3.3.1">https://www.rdocumentation.org/packages/tcltk/versions/3.3.1</a>.
</p>
</li>
<li><p> James Wettenhall &amp; Philippe Grosjean, File Open/Save dialogs in R tcltk, December 01, 2015. See <a href="https://web.archive.org/web/20160521051207/http://www.sciviews.org/recipes/tcltk/TclTk-file-open-save-dialogs/">https://web.archive.org/web/20160521051207/http://www.sciviews.org/recipes/tcltk/TclTk-file-open-save-dialogs/</a>. Retrieved thanks to the Internet Archive: Wayback Machine
</p>
</li>
<li><p> r - read csv files and perform function, then bind together - Stack Overflow answered by bjoseph on Jan 8 2015. See <a href="https://stackoverflow.com/questions/27846715/read-csv-files-and-perform-function-then-bind-together">https://stackoverflow.com/questions/27846715/read-csv-files-and-perform-function-then-bind-together</a>.
</p>
</li>
<li><p> r - Convert column classes in data.table - Stack Overflow answered by Matt Dowle on Dec 27 2013. See <a href="https://stackoverflow.com/questions/7813578/convert-column-classes-in-data-table">https://stackoverflow.com/questions/7813578/convert-column-classes-in-data-table</a>.
</p>
</li>
<li><p> r - Transpose rows to columns and remove only NAs in resulting columns - Stack Overflow answered by David Arenburg on April 22, 2014. See <a href="https://stackoverflow.com/questions/23225977/transpose-rows-to-columns-and-remove-only-nas-in-resulting-columns">https://stackoverflow.com/questions/23225977/transpose-rows-to-columns-and-remove-only-nas-in-resulting-columns</a>.
</p>
</li>
<li><p> r - Add a Column to a Dataframe From a List of Values - Stack Overflow answered by Matthew Plourde on Jun 21 2012. See <a href="https://stackoverflow.com/questions/11130037/add-a-column-to-a-dataframe-from-a-list-of-values/11130178">https://stackoverflow.com/questions/11130037/add-a-column-to-a-dataframe-from-a-list-of-values/11130178</a>.
</p>
</li>
<li><p> r - Why does is.vector() return TRUE for list? - Stack Overflow answered by Andrie on May 17 2011. See <a href="https://stackoverflow.com/questions/6032772/why-does-is-vector-return-true-for-list/6032909">https://stackoverflow.com/questions/6032772/why-does-is-vector-return-true-for-list/6032909</a>.
</p>
</li>
<li><p> warnings - How do I get rid of the NOTE's generated by R CMD check when using for example ddply in my package? - Stack Overflow answered by shadow on Mar 4 2015 and edited by shadow on Mar 5 2015. See <a href="https://stackoverflow.com/questions/28851812/how-do-i-get-rid-of-the-notes-generated-by-r-cmd-check-when-using-for-example-d">https://stackoverflow.com/questions/28851812/how-do-i-get-rid-of-the-notes-generated-by-r-cmd-check-when-using-for-example-d</a>.
</p>
</li>
<li><p> multiple output filenames in R - Stack Overflow asked and edited by Gabelins on Feb 1 2013. See <a href="https://stackoverflow.com/questions/14651594/multiple-output-filenames-in-r">https://stackoverflow.com/questions/14651594/multiple-output-filenames-in-r</a>.
</p>
</li>
<li><p> r - Regex return file name, remove path and file extension - Stack Overflow answered and edited by Ananda Mahto on Feb 25 20134. See <a href="https://stackoverflow.com/questions/15073753/regex-return-file-name-remove-path-and-file-extension/15073919">https://stackoverflow.com/questions/15073753/regex-return-file-name-remove-path-and-file-extension/15073919</a>.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# Example to check the input file format
library("ie2misc")

# Copy and paste the following code into the R console if you
# wish to see the .exp input file format.
# Note the number of lines and the row headings.
file.show(system.file("extdata", "01110000_PEAK_WATSTORE.EXP",
  package = "ie2misc"), title = paste("01110000_PEAK_WATSTORE.EXP"))
# opens the .exp file using the default text editor or within RStudio


# Examples to show you different output cases
expFileOutput(output = "csv") # returns .csv files
# Follow the file dialog instructions

expFileOutput(output = "xlsx") # returns .xlsx files
# Follow the file dialog instructions

expFileOutput(output = "both") # returns .csv and .xlsx files
# Follow the file dialog instructions




# Examples to show you different output cases (BATCH)
expFileOutputBATCH(output = "csv") # returns .csv files
# Follow the file dialog instructions

expFileOutputBATCH(output = "xlsx") # returns .xlsx files
# Follow the file dialog instructions

expFileOutputBATCH(output = "both") # returns .csv and .xlsx files
# Follow the file dialog instructions

## End(Not run)

</code></pre>

<hr>
<h2 id='ie2misc'>ie2misc: Irucka Embry's miscellaneous USGS functions</h2><span id='topic+ie2misc'></span><span id='topic+ie2misc-package'></span>

<h3>Description</h3>

<p>ie2misc provides many functions that will be useful to people within the
USGS, while other functions will be useful for others. Functions are
included for statistical errors (RMSE, NSE, dr, MAPE, MAE, MAD),
processing .exp and .psf files, a &quot;+&quot; dyadic operator for use with NA,
and making it easier to view USGS ADAPS and QW files within a spreadsheet
application.
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://gitlab.com/iembry/ie2misc">https://gitlab.com/iembry/ie2misc</a>
</p>
</li>
<li><p> Report bugs at <a href="https://gitlab.com/iembry/ie2misc/-/issues">https://gitlab.com/iembry/ie2misc/-/issues</a>
</p>
</li></ul>


<hr>
<h2 id='madstat'>Mean-absolute deviation (MAD)</h2><span id='topic+madstat'></span>

<h3>Description</h3>

<p>This function computes the mean-absolute deviation (MAD) &ndash; &quot;the average of
the magnitudes of the errors or deviations.&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>madstat(observed, na.rm = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="madstat_+3A_observed">observed</code></td>
<td>
<p>numeric vector, matrix, data.frame, or data.table
that contains the observed data points.</p>
</td></tr>
<tr><td><code id="madstat_+3A_na.rm">na.rm</code></td>
<td>
<p>logical vector that determines whether the missing
values should be removed or not.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>MAD is expressed as
</p>
<p style="text-align: center;"><code class="reqn">n^{-1} \sum \limits_{i=1}^n{ \left| O_i - \bar{O} \right|}</code>
</p>


<dl>
<dt><em>n</em></dt><dd><p>the number of observations</p>
</dd>
<dt><em>O</em></dt><dd><p>the &quot;pairwise-matched observations that are judged to
be reliable&quot;</p>
</dd>
<dt><em><code class="reqn">\bar{O}</code></em></dt><dd><p>the &quot;true&quot; mean of the observations</p>
</dd>
</dl>

<p>Reference 1 fully discusses MAD, while Reference 2 provides the formula
used to calculate the MAD.
</p>


<h3>Value</h3>

<p>mean-absolute deviation (MAD) as a numeric <code><a href="base.html#topic+vector">vector</a></code> or a named
numeric vector if using a named object (<code><a href="base.html#topic+matrix">matrix</a></code>, <code><a href="base.html#topic+data.frame">data.frame</a></code>,
or <code><a href="data.table.html#topic+data.table">data.table</a></code>). MAD has the same units as the observed values. The default choice is that any NA values
will be kept (<code>na.rm = FALSE</code>). This can be changed by specifying <code>na.rm = TRUE</code>, such as 
<code>madstat(obs, na.rm = TRUE)</code>.
</p>


<h3>References</h3>


<ol>
<li><p> Cort J. Willmott, Kenji Matsuura, and Scott M. Robeson, &quot;Ambiguities inherent in sums-of-squares-based error statistics&quot;, <em>Atmospheric Environment</em>, vol. 43, no. 3, pp. 749-752, 2009, <a href="https://www.sciencedirect.com/science/article/pii/S1352231008009564">https://www.sciencedirect.com/science/article/pii/S1352231008009564</a>.
</p>
</li>
<li><p> Cort J. Willmott, Scott M. Robeson, and Kenji Matsuura, &quot;Short Communication: A refined index of model performance&quot;, <em>International Journal of Climatology</em>, Volume 32, Issue 13, pages 2088-2094, 15 November 2012, article from ResearchGate: <a href="https://www.researchgate.net/publication/235961403_A_refined_index_of_model_performance">https://www.researchgate.net/publication/235961403_A_refined_index_of_model_performance</a>.
</p>
</li>
<li><p> Nathabandu T. Kottegoda and Renzo Rosso, <em>Statistics, Probability, and Reliability for Civil and Environmental Engineers</em>, New York City, New York: The McGraw-Hill Companies, Inc., 1997, page 15.
</p>
</li></ol>



<h3>See Also</h3>

<p><code><a href="stats.html#topic+mad">mad</a></code> for median absolute deviation (MAD)
</p>
<p><code><a href="#topic+mape">mape</a></code> for mean absolute percent error (MAPE), <code><a href="#topic+mae">mae</a></code> for
mean-absolute error (MAE), <code><a href="#topic+dr">dr</a></code> for &quot;index of agreement (dr)&quot;, <code><a href="#topic+vnse">vnse</a></code>
for Nash-Sutcliffe model efficiency (NSE), and <code><a href="#topic+rmse">rmse</a></code> for
root mean square error (RMSE).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library("ie2misc")

# Example 1.18 from Kottegoda (page 15)
obs &lt;- c(50, 56, 42, 53, 49) # annual rainfall in cm
madstat(obs)


library("rando")

set_n(100) # makes the example reproducible
obs1 &lt;- r_norm(.seed = 300) # observed


# using the numeric vector obs1
madstat(obs1)


# using a matrix of the numeric vector obs1
mat1 &lt;- matrix(data = obs1, nrow = length(obs1), ncol = 1, byrow = FALSE,
        dimnames = list(c(rep("", length(obs1))), "Observed"))
madstat(mat1)


# using a data.frame of the numeric vector obs1
df1 &lt;- data.frame(obs1)
madstat(df1)



library("data.table")

# using a data.table of the numeric vector obs1
df2 &lt;- data.table(obs1)
madstat(df2)


</code></pre>

<hr>
<h2 id='mae'>Mean-absolute error (MAE)</h2><span id='topic+mae'></span>

<h3>Description</h3>

<p>This function computes the mean-absolute error (MAE).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mae(predicted, observed, na.rm = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mae_+3A_predicted">predicted</code></td>
<td>
<p>numeric vector that contains the model predicted
data points (1st parameter)</p>
</td></tr>
<tr><td><code id="mae_+3A_observed">observed</code></td>
<td>
<p>numeric vector that contains the observed data
points (2nd parameter)</p>
</td></tr>
<tr><td><code id="mae_+3A_na.rm">na.rm</code></td>
<td>
<p>logical vector that determines whether the missing
values should be removed or not.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>(MAE) is expressed as
</p>
<p style="text-align: center;"><code class="reqn">n^{-1} \sum \limits_{i=1}^n{ \left| P_i - O_i \right|}</code>
</p>


<dl>
<dt><em>n</em></dt><dd><p>the number of observations</p>
</dd>
<dt><em>P</em></dt><dd><p>the &quot;model estimates or predictions&quot;</p>
</dd>
<dt><em>O</em></dt><dd><p>the &quot;thought-to-be reliable and pairwise matched
observations&quot;</p>
</dd>
</dl>

<p>MAE is fully discussed in the Willmott reference, including a
comparison to root mean square error (RMSE).
</p>


<h3>Value</h3>

<p>mean-absolute error (MAE) as a numeric vector using the same
units as the given variables. The default choice is that any NA values
will be kept (<code>na.rm = FALSE</code>). This can be changed by
specifying <code>na.rm = TRUE</code>, such as <code>mae(pre, obs, na.rm = TRUE)</code>.
</p>


<h3>References</h3>

<p>Cort J. Willmott and Kenji Matsuura, &quot;Advantages of the mean-absolute error (MAE) over the root mean square error (RMSE) in assessing average model performance&quot;, <em>Climate Research</em>, Vol. 30: 79-82, 2005, <a href="https://web.archive.org/web/20230119121852/climate.geog.udel.edu/~climate/publication_html/Pdf/WM_CR_05.pdf">https://web.archive.org/web/20230119121852/climate.geog.udel.edu/~climate/publication_html/Pdf/WM_CR_05.pdf</a>. Retrieved thanks to the Internet Archive: Wayback Machine
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mape">mape</a></code> for mean absolute percent error (MAPE), <code><a href="#topic+madstat">madstat</a></code> for
mean-absolute deviation (MAD), <code><a href="#topic+dr">dr</a></code> for &quot;index of agreement (dr)&quot;, <code><a href="#topic+vnse">vnse</a></code>
for Nash-Sutcliffe model efficiency (NSE), and <code><a href="#topic+rmse">rmse</a></code> for
root mean square error (RMSE).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library("ie2misc")

obs &lt;- 1:10 # observed
pre &lt;- 2:11 # predicted
mae(pre, obs)


library("rando")

set_n(100) # makes the example reproducible
obs1 &lt;- r_norm(.seed = 103) # observed
pre1 &lt;- r_norm(.seed = 102) # predicted


# using the vectors pre1 and obs1
mae(pre1, obs1)


# using a matrix of the numeric vectors pre1 and obs1
mat1 &lt;- matrix(data = c(obs1, pre1), nrow = length(pre1), ncol = 2,
   byrow = FALSE, dimnames = list(c(rep("", length(pre1))),
   c("Predicted", "Observed")))
mae(mat1[, 2], mat1[, 1])

# mat1[, 1] # observed values from column 1 of mat1
# mat1[, 2] # predicted values from column 2 of mat1


# using a data.frame of the numeric vectors pre1 and obs1
df1 &lt;- data.frame(obs1, pre1)
mae(df1[, 2], df1[, 1])

# df1[, 1] # observed values from column 1 of df1
# df1[, 2] # predicted values from column 2 of df1


library("data.table")

# using a data.table of the numeric vectors pre1 and obs1
df2 &lt;- data.table(obs1, pre1)
mae(df2[, 2, with = FALSE][[1]], df2[, 1, with = FALSE][[1]])

# df2[, 1, with = FALSE][[1]] # observed values from column 1 of df2
# df2[, 2, with = FALSE][[1]] # predicted values from column 2 of df2


</code></pre>

<hr>
<h2 id='mape'>Mean absolute percent error (MAPE)</h2><span id='topic+mape'></span>

<h3>Description</h3>

<p>This function computes the mean absolute percent error (MAPE).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mape(predicted, observed, na.rm = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mape_+3A_predicted">predicted</code></td>
<td>
<p>numeric vector that contains the predicted data
points (1st parameter)</p>
</td></tr>
<tr><td><code id="mape_+3A_observed">observed</code></td>
<td>
<p>numeric vector that contains the observed data
points (2nd parameter)</p>
</td></tr>
<tr><td><code id="mape_+3A_na.rm">na.rm</code></td>
<td>
<p>logical vector that determines whether the missing
values should be removed or not.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>MAPE is expressed as
</p>
<p style="text-align: center;"><code class="reqn">\frac{1}{n} \sum \limits_{i=1}^n{ 100 \frac{\left| X_i - Y_i \right|} {X_i}}</code>
</p>


<dl>
<dt><em>n</em></dt><dd><p>the number of observations</p>
</dd>
<dt><em>X</em></dt><dd><p>the observations</p>
</dd>
<dt><em>Y</em></dt><dd><p>the predictions</p>
</dd>
</dl>

<p>Below are some points to remember about MAPE from the Ji reference:
</p>

<ol>
<li><p> MAPE is &quot;a measure to validate forecast models&quot;,
</p>
</li>
<li><p> MAPE is &quot;a standardized value and is independent of the unit of
the measurement&quot;,
</p>
</li>
<li><p> MAPE is &quot;meaningful only if all <code class="reqn">X_i</code> values are positive&quot;,
</p>
</li>
<li><p> MAPE is &quot;unstable when <code class="reqn">X_i</code> values are near zero&quot;, and
</p>
</li>
<li><p> &quot;If X and Y are interchanged, the MAPE will result in a
different value.&quot;
</p>
</li></ol>



<h3>Value</h3>

<p>mean absolute percent error (MAPE) as a numeric vector. The default
choice is that any NA values will be kept (<code>na.rm = FALSE</code>). This can be
changed by specifying <code>na.rm = TRUE</code>, such as <code>mape(pre, obs, na.rm = TRUE)</code>.
</p>


<h3>References</h3>

<p>Lei Ji and Kevin Gallo, &quot;An Agreement Coefficient for Image Comparison&quot;, <em>Photogrammetric Engineering &amp; Remote Sensing</em>, Vol. 72, No. 7, July 2006, p. 823-8335, <a href="https://www.ingentaconnect.com/content/asprs/pers/2006/00000072/00000007/art00006">https://www.ingentaconnect.com/content/asprs/pers/2006/00000072/00000007/art00006</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mae">mae</a></code> for mean-absolute error (MAE), <code><a href="#topic+madstat">madstat</a></code> for
mean-absolute deviation (MAD), <code><a href="#topic+dr">dr</a></code> for &quot;index of agreement (dr)&quot;, <code><a href="#topic+vnse">vnse</a></code>
for Nash-Sutcliffe model efficiency (NSE), and <code><a href="#topic+rmse">rmse</a></code> for
root mean square error (RMSE).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library("ie2misc")

obs &lt;- 1:10 # observed
pre &lt;- 2:11 # predicted
mape(pre, obs)


library("rando")

set_n(100) # makes the example reproducible
obs1 &lt;- r_norm(.seed = 109) # observed
pre1 &lt;- r_norm(.seed = 124) # predicted


# using the vectors pre1 and obs1
mape(pre1, obs1)


# using a matrix of the numeric vectors pre1 and obs1
mat1 &lt;- matrix(data = c(obs1, pre1), nrow = length(pre1), ncol = 2,
        byrow = FALSE, dimnames = list(c(rep("", length(pre1))),
        c("Predicted", "Observed")))
mape(mat1[, 2], mat1[, 1])

# mat1[, 1] # observed values from column 1 of mat1
# mat1[, 2] # predicted values from column 2 of mat1


# using a data.frame of the numeric vectors pre1 and obs1
df1 &lt;- data.frame(obs1, pre1)
mape(df1[, 2], df1[, 1])

# df1[, 1] # observed values from column 1 of df1
# df1[, 2] # predicted values from column 2 of df1


library("data.table")

# using a data.table of the numeric vectors pre1 and obs1
df2 &lt;- data.table(obs1, pre1)
mape(df2[, 2, with = FALSE][[1]], df2[, 1, with = FALSE][[1]])

# df2[, 1, with = FALSE][[1]] # observed values from column 1 of df2
# df2[, 2, with = FALSE][[1]] # predicted values from column 2 of df2



</code></pre>

<hr>
<h2 id='psfFileChange'>psfFileChange and psfFileChangeBATCH</h2><span id='topic+psfFileChange'></span><span id='topic+psfFileChangeBATCH'></span>

<h3>Description</h3>

<p>The .psf file is a script file that records the specifications used to run
the USGS PeakFQ program (<a href="http://water.usgs.gov/software/PeakFQ/">http://water.usgs.gov/software/PeakFQ/</a>) for
a station. psfFileChange and psfFileChangeBATCH modify the original .psf
settings.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>psfFileChange(
  file = tk_choose.files(default = "", caption =
    "Select file(s) to open &amp; hold down Ctrl to choose more than 1 file", multi = TRUE,
    filters = matrix(c("Text file", ".psf", "Text file", ".PSF"), 4, 2, byrow = TRUE)),
  interactive = TRUE
)

psfFileChangeBATCH(
  path = tk_choose.dir(caption = "Select the directory with the .psf files")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="psfFileChange_+3A_file">file</code></td>
<td>
<p>Input .psf file(s) to change specific SkewSE, GenSkew, and
SkewOpt information to be selected through a file dialog.</p>
</td></tr>
<tr><td><code id="psfFileChange_+3A_interactive">interactive</code></td>
<td>
<p>If interactive is TRUE, then the user will select the
filenames(s) to use for saving with the file dialog. In order to select
more than one file, the user must hold down the Ctrl (Control) button
while mouse clicking the chosen files. If interactive is <code>FALSE</code>, then
the user will select the directory, via the directory dialog, to use for
saving and the original filenames will be used.</p>
</td></tr>
<tr><td><code id="psfFileChange_+3A_path">path</code></td>
<td>
<p>Directory path of .psf files, to be selected through a
directory dialog, to change specific SkewSE, GenSkew, and SkewOpt
information. The user will be asked where to find the .psf files
&amp; then the user will be asked where to save the revised .psf files.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>psfFileChange searches for a character vector of patterns (SkewSE,
GenSkew, and SkewOpt) in single or multiple .psf file(s) to replace. If
the patterns are missing, then the patterns are added to the file(s).
This is done for a single file or multiple files that the user selects.
Although these changes are currently pre-determined, future versions may
allow the user to change particular settings (for example, how
outliers are handled).
</p>
<p>psfFileChangeBATCH searches for a character vector of patterns
(SkewSE, GenSkew, and SkewOpt) in a directory of .psf files to replace. If
the patterns are missing, then the patterns are added to the files. This
is done in a BATCH mode (whole directory of .psf files). Although these
changes are currently pre-determined, future versions may allow the
user to change particular settings (for example, how outliers are handled).
</p>


<h3>Value</h3>

<p>Revised .psf text file(s)
</p>


<h3>Author(s)</h3>

<p>Irucka Embry, Anne Hoos
</p>


<h3>Source</h3>


<ol>
<li><p> r - How can I check if a file is empty? - Stack Overflow answered by Konrad Rudolph and edited by Geekuna Matata on Apr 23 2014. See <a href="https://stackoverflow.com/questions/23254002/how-can-i-check-if-a-file-is-empty">https://stackoverflow.com/questions/23254002/how-can-i-check-if-a-file-is-empty</a>.
</p>
</li>
<li><p> r - Better error message for stopifnot? - Stack Overflow answered by Andrie on Dec 1 2011. See <a href="https://stackoverflow.com/questions/8343509/better-error-message-for-stopifnot">https://stackoverflow.com/questions/8343509/better-error-message-for-stopifnot</a>.
</p>
</li>
<li><p> RDocumentation: TclInterface tcltk. See <a href="https://www.rdocumentation.org/packages/tcltk/versions/3.3.1">https://www.rdocumentation.org/packages/tcltk/versions/3.3.1</a>.
</p>
</li>
<li><p> James Wettenhall &amp; Philippe Grosjean, File Open/Save dialogs in R tcltk, December 01, 2015. See <a href="https://web.archive.org/web/20160521051207/http://www.sciviews.org/recipes/tcltk/TclTk-file-open-save-dialogs/">https://web.archive.org/web/20160521051207/http://www.sciviews.org/recipes/tcltk/TclTk-file-open-save-dialogs/</a>. Retrieved thanks to the Internet Archive: Wayback Machine
</p>
</li>
<li><p> Replacing nth line in a text file in R - Stack Overflow answered by Spacedman on Aug 1 2012. See <a href="https://stackoverflow.com/questions/11756353/replacing-nth-line-in-a-text-file-in-r">https://stackoverflow.com/questions/11756353/replacing-nth-line-in-a-text-file-in-r</a>.
</p>
</li>
<li><p> r - read csv files and perform function, then bind together - Stack Overflow answered by bjoseph on Jan 8 2015. See <a href="https://stackoverflow.com/questions/27846715/read-csv-files-and-perform-function-then-bind-together">https://stackoverflow.com/questions/27846715/read-csv-files-and-perform-function-then-bind-together</a>.
</p>
</li>
<li><p> multiple output filenames in R - Stack Overflow asked and edited by Gabelins on Feb 1 2013. See <a href="https://stackoverflow.com/questions/14651594/multiple-output-filenames-in-r">https://stackoverflow.com/questions/14651594/multiple-output-filenames-in-r</a>.
</p>
</li>
<li><p> r - Regex return file name, remove path and file extension - Stack Overflow answered and edited by Ananda Mahto on Feb 25 20134. See <a href="https://stackoverflow.com/questions/15073753/regex-return-file-name-remove-path-and-file-extension/15073919">https://stackoverflow.com/questions/15073753/regex-return-file-name-remove-path-and-file-extension/15073919</a>.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Examples to change (a) .psf file(s) interactively and non-interactively

library("ie2misc")

psfFileChange() # default where interactive = TRUE
# Follow the file dialog instructions


# These are the rows that have been added or changed as a result of this function:

# SkewSE 0.361804179633127
# GenSkew 0.0104293904
# SkewOpt Weighted



psfFileChange(interactive = FALSE)
# Follow the file dialog instructions

# These are the rows that have been added or changed as a result of this function:

# SkewSE 0.361804179633127
# GenSkew 0.0104293904
# SkewOpt Weighted



psfFileChangeBATCH() # Follow the file dialog instructions


# These are the rows that have been added or changed as a result of this function:

# SkewSE 0.361804179633127
# GenSkew 0.0104293904
# SkewOpt Weighted

## End(Not run)


</code></pre>

<hr>
<h2 id='qw'>qw, qw2 and qwBATCH</h2><span id='topic+qw'></span><span id='topic+qwBATCH'></span><span id='topic+qw2'></span>

<h3>Description</h3>

<p>qw, qw2 and qwBATCH process raw QW files. The QW files can contain &quot;selected
water-quality data for stations in the U.S. Geological Survey (USGS)
National Water Information System (NWIS) water-quality database. The data
you have secured from the USGS NWISWeb database may include data that have
not received Director's approval and as such are provisional and subject
to revision.&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qw(
  file = tk_choose.files(default = "", caption =
    "Select file(s) to open &amp; hold down Ctrl to choose more than 1 file", multi = TRUE,
    filters = matrix(c("QW file", "*", "QW file", ".rdb", "QW file", ".RDB"), 6, 2, byrow
    = TRUE)),
  interactive = TRUE,
  overwrite = TRUE
)

qwBATCH(
  path = tk_choose.dir(caption = "Select directory with the QW files"),
  pattern = "*.rdb",
  overwrite = TRUE
)

qw2(file, overwrite = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="qw_+3A_file">file</code></td>
<td>
<p>Input QW file(s) to be selected through a file dialog.</p>
</td></tr>
<tr><td><code id="qw_+3A_interactive">interactive</code></td>
<td>
<p>If interactive is <code>TRUE</code>, then the user will select the
filenames(s) to use for saving with the file dialog. In order to select
more than one file, the user must hold down the Ctrl (Control) button
while mouse clicking the chosen files. If interactive is <code>FALSE</code>, then
the user will select the directory, via the directory dialog, to use for
saving and the original filenames will be used.</p>
</td></tr>
<tr><td><code id="qw_+3A_overwrite">overwrite</code></td>
<td>
<p>If <code>TRUE</code>, overwrite any existing spreadsheet.</p>
</td></tr>
<tr><td><code id="qw_+3A_path">path</code></td>
<td>
<p>Directory path of QW files to be selected through a directory
dialog. The user will be asked where to find the QW files &amp; then the
user will be asked where to save the QW .xlsx files.</p>
</td></tr>
<tr><td><code id="qw_+3A_pattern">pattern</code></td>
<td>
<p>The default pattern is <code>.rdb</code> (the filename has the .rdb
extension). This pattern can be changed by <code>qwBATCH(pattern = "pattern")</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>qw function opens a single or multiple raw, QW file(s) to modify the format
and then exports the file(s) in .xlsx format. This is done for a single
file or multiple files that the user selects with a file dialog.
</p>
<p>qw2 function opens a single QW file to modify the format and then exports
the file in .xlsx format. This is done for a single file that the user
selects without a file dialog.
</p>
<p>qwBATCH function opens raw QW files, from a directory, to modify the format
and then exports the files in .xlsx format.  This is done in a BATCH mode
(whole directory of QW files) using a directory dialog.
</p>
<p>qw, qw2 and qwBATCH functions perform the same processes on the raw QW
files: 1) remove the first row, 2) create a single column with the Date
and Time rather than 2 separate Date and Time columns (if needed), and 3)
exports the QW file as a spreadsheet with three sheets (sheet1 corrects
the timezones for Daylight Savings Times, sheet2 includes everything
except for the meta data, and sheet3 provides the meta data from the top
of the file). The supported US timezones are the following: Eastern,
Central, Mountain, Pacific, Alaska, Hawai'i, and Atlantic (Puerto Rico
and US Virgin Islands).
</p>


<h3>Value</h3>

<p>QW .xlsx file(s).
</p>


<h3>Source</h3>


<ol>
<li><p> r - How can I check if a file is empty? - Stack Overflow answered by Konrad Rudolph and edited by Geekuna Matata on Apr 23 2014. See <a href="https://stackoverflow.com/questions/23254002/how-can-i-check-if-a-file-is-empty">https://stackoverflow.com/questions/23254002/how-can-i-check-if-a-file-is-empty</a>.
</p>
</li>
<li><p> r - Better error message for stopifnot? - Stack Overflow answered by Andrie on Dec 1 2011. See <a href="https://stackoverflow.com/questions/8343509/better-error-message-for-stopifnot">https://stackoverflow.com/questions/8343509/better-error-message-for-stopifnot</a>.
</p>
</li>
<li><p> RDocumentation: TclInterface tcltk. See <a href="https://www.rdocumentation.org/packages/tcltk/versions/3.3.1">https://www.rdocumentation.org/packages/tcltk/versions/3.3.1</a>.
</p>
</li>
<li><p> James Wettenhall &amp; Philippe Grosjean, File Open/Save dialogs in R tcltk, December 01, 2015. See <a href="https://web.archive.org/web/20160521051207/http://www.sciviews.org/recipes/tcltk/TclTk-file-open-save-dialogs/">https://web.archive.org/web/20160521051207/http://www.sciviews.org/recipes/tcltk/TclTk-file-open-save-dialogs/</a>. Retrieved thanks to the Internet Archive: Wayback Machine
</p>
</li>
<li><p> r - read csv files and perform function, then bind together - Stack Overflow answered by bjoseph on Jan 8 2015. See <a href="https://stackoverflow.com/questions/27846715/read-csv-files-and-perform-function-then-bind-together">https://stackoverflow.com/questions/27846715/read-csv-files-and-perform-function-then-bind-together</a>.
</p>
</li>
<li><p> r - Convert column classes in data.table - Stack Overflow answered by Matt Dowle on Dec 27 2013. See <a href="https://stackoverflow.com/questions/7813578/convert-column-classes-in-data-table">https://stackoverflow.com/questions/7813578/convert-column-classes-in-data-table</a>.
</p>
</li>
<li><p> Does column exist and how to rearrange columns in R data frame - Stack Overflow answered and edited by Peter McMahan on Aug 2 2009. See <a href="https://stackoverflow.com/questions/1177919/does-column-exist-and-how-to-rearrange-columns-in-r-data-frame">https://stackoverflow.com/questions/1177919/does-column-exist-and-how-to-rearrange-columns-in-r-data-frame</a>.
</p>
</li>
<li><p> time - Dealing with timestamps in R - Stack Overflow answered by Dirk Eddelbuettel on Dec 26 2009. See <a href="https://stackoverflow.com/questions/1962278/dealing-with-timestamps-in-r/1962336">https://stackoverflow.com/questions/1962278/dealing-with-timestamps-in-r/1962336</a>.
</p>
</li>
<li><p> R help - How to change the default Date format for write.csv function? answered by William Dunlap on Dec 28, 2009. See <a href="https://hypatia.math.ethz.ch/pipermail/r-help/2009-December/416010.html">https://hypatia.math.ethz.ch/pipermail/r-help/2009-December/416010.html</a>.
</p>
</li>
<li><p> RDocumentation: strptime base. See <a href="https://www.rdocumentation.org/packages/base/versions/3.3.1/topics/strptime">https://www.rdocumentation.org/packages/base/versions/3.3.1/topics/strptime</a>.
</p>
</li>
<li><p> National Water Information System: Help System Time Zone Codes. See <a href="https://help.waterdata.usgs.gov/code/tz_query?fmt=html">https://help.waterdata.usgs.gov/code/tz_query?fmt=html</a>.
</p>
</li>
<li><p> multiple output filenames in R - Stack Overflow asked and edited by Gabelins on Feb 1 2013. See <a href="https://stackoverflow.com/questions/14651594/multiple-output-filenames-in-r">https://stackoverflow.com/questions/14651594/multiple-output-filenames-in-r</a>.
</p>
</li>
<li><p> r - Regex return file name, remove path and file extension - Stack Overflow answered and edited by Ananda Mahto on Feb 25 2013. See <a href="https://stackoverflow.com/questions/15073753/regex-return-file-name-remove-path-and-file-extension/15073919">https://stackoverflow.com/questions/15073753/regex-return-file-name-remove-path-and-file-extension/15073919</a>.
</p>
</li>
<li><p> warnings - How do I get rid of the NOTE's generated by R CMD check when using for example ddply in my package? - Stack Overflow answered by shadow on Mar 4 2015 and edited by shadow on Mar 5 2015. See <a href="https://stackoverflow.com/questions/28851812/how-do-i-get-rid-of-the-notes-generated-by-r-cmd-check-when-using-for-example-d">https://stackoverflow.com/questions/28851812/how-do-i-get-rid-of-the-notes-generated-by-r-cmd-check-when-using-for-example-d</a>.
</p>
</li>
<li><p> trinker/qdapRegex - dictionary_maintenance.R. See <a href="https://github.com/trinker/qdapRegex/blob/master/inst/dictionary_maintenance.R">https://github.com/trinker/qdapRegex/blob/master/inst/dictionary_maintenance.R</a>.
</p>
</li>
<li><p> excel - Interconverting POSIXct and numeric in R - Stack Overflow by LauraS on May 6 2016. See <a href="https://stackoverflow.com/questions/37078772/interconverting-posixct-and-numeric-in-r">https://stackoverflow.com/questions/37078772/interconverting-posixct-and-numeric-in-r</a>.
</p>
</li>
<li><p> convert date and time string to POSIX in R - Stack Overflow commented by cryo111 on Sep 18 2013. See <a href="https://stackoverflow.com/questions/18874400/convert-date-and-time-string-to-posix-in-r/18874863">https://stackoverflow.com/questions/18874400/convert-date-and-time-string-to-posix-in-r/18874863</a>.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library("ie2misc")
# Examples to change (an) QW file(s) interactively and non-interactively
file1 &lt;- "https://waterdata.usgs.gov/nwis/dv?cb_00060=on&amp;format=rdb&amp;site_no=03584500"
file2 &lt;- "&amp;period=&amp;begin_date=1904-07-01&amp;end_date=2016-06-22"
file3 &lt;- paste0(file1, file2) # used to truncate the file name
qw2(file3)
# USGS 03584500 ELK RIVER NEAR PROSPECT, TN
# Discharge, cubic feet per second (Mean)



qw() # default where interactive = TRUE
# Follow the file dialog instructions


qw(interactive = FALSE)
# Follow the file dialog instructions


# Example to change QW files in batch mode
qwBATCH()
# Follow the file dialog instructions

## End(Not run)



</code></pre>

<hr>
<h2 id='rmse'>Root mean square error (RMSE)</h2><span id='topic+rmse'></span>

<h3>Description</h3>

<p>This function computes the root mean square error (RMSE).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rmse(predicted, observed, na.rm = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rmse_+3A_predicted">predicted</code></td>
<td>
<p>numeric vector that contains the predicted data
points (1st parameter)</p>
</td></tr>
<tr><td><code id="rmse_+3A_observed">observed</code></td>
<td>
<p>numeric vector that contains the observed data
points (2nd parameter)</p>
</td></tr>
<tr><td><code id="rmse_+3A_na.rm">na.rm</code></td>
<td>
<p>logical vector that determines whether the missing
values should be removed or not.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>RMSE is expressed as
</p>
<p style="text-align: center;"><code class="reqn">\sqrt{n^{-1} \sum \limits_{i=1}^n{ \left| P_i - O_i \right|^2}}</code>
</p>


<dl>
<dt><em>n</em></dt><dd><p>the number of observations</p>
</dd>
<dt><em>P</em></dt><dd><p>the &quot;model estimates or predictions&quot;</p>
</dd>
<dt><em>O</em></dt><dd><p>the &quot;thought-to-be reliable and pairwise matched
observations&quot;</p>
</dd>
</dl>

<p>RMSE is fully discussed in the Willmott reference, including a comparison
to mean-absolute error (MAE).
</p>


<h3>Value</h3>

<p>mean absolute percent error (RMSE) as a numeric vector. The default
choice is that any NA values will be kept (<code>na.rm = FALSE</code>). This can be
changed by specifying <code>na.rm = TRUE</code>, such as <code>rmse(pre, obs, na.rm = TRUE)</code>.
</p>


<h3>References</h3>

<p>Cort J. Willmott and Kenji Matsuura, &quot;Advantages of the mean-absolute error (MAE) over the root mean square error (RMSE) in assessing average model performance&quot;, <em>Climate Research</em>, Vol. 30: 79-82, 2005, <a href="https://web.archive.org/web/20230119121852/climate.geog.udel.edu/~climate/publication_html/Pdf/WM_CR_05.pdf">https://web.archive.org/web/20230119121852/climate.geog.udel.edu/~climate/publication_html/Pdf/WM_CR_05.pdf</a>. Retrieved thanks to the Internet Archive: Wayback Machine
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mape">mape</a></code> for mean absolute percent error (MAPE), <code><a href="#topic+mae">mae</a></code> for
mean-absolute error (MAE), <code><a href="#topic+madstat">madstat</a></code> for mean-absolute deviation (MAD), <code><a href="#topic+dr">dr</a></code>
for &quot;index of agreement (dr)&quot;, and <code><a href="#topic+vnse">vnse</a></code> for
Nash-Sutcliffe model efficiency (NSE).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("ie2misc")

obs &lt;- 1:10 # observed
pre &lt;- 2:11 # predicted
rmse(pre, obs)


library("rando")

set_n(100) # makes the example reproducible
obs1 &lt;- r_norm(.seed = 209) # observed
pre1 &lt;- r_norm(.seed = 224) # predicted


# using the vectors pre1 and obs1
rmse(pre1, obs1)


# using a matrix of the numeric vectors pre1 and obs1
mat1 &lt;- matrix(data = c(obs1, pre1), nrow = length(pre1), ncol = 2,
  byrow = FALSE, dimnames = list(c(rep("", length(pre1))),
  c("Predicted", "Observed")))
rmse(mat1[, 2], mat1[, 1])

# mat1[, 1] # observed values from column 1 of mat1
# mat1[, 2] # predicted values from column 2 of mat1


# using a data.frame of the numeric vectors pre1 and obs1
df1 &lt;- data.frame(obs1, pre1)
rmse(df1[, 2], df1[, 1])

# df1[, 1] # observed values from column 1 of df1
# df1[, 2] # predicted values from column 2 of df1


library("data.table")

# using a data.table of the numeric vectors pre1 and obs1
df2 &lt;- data.table(obs1, pre1)
rmse(df2[, 2, with = FALSE][[1]], df2[, 1, with = FALSE][[1]])

# df2[, 1, with = FALSE][[1]] # observed values from column 1 of df2
# df2[, 2, with = FALSE][[1]] # predicted values from column 2 of df2



</code></pre>

<hr>
<h2 id='sat_enthalpy'>Saturated Enthalpy (H)</h2><span id='topic+sat_enthalpy'></span><span id='topic+sat_enthalpy2'></span>

<h3>Description</h3>

<p>sat_enthalpy and sat_enthalpy2 solve for the saturated enthalpy (H) given an
elevation in feet and a range of temperature values (degrees F).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sat_enthalpy(
  file = tk_choose.files(default = "", caption = "Select file to open", multi = FALSE,
    filters = matrix(c("Comma-separated value file", ".csv", "MS Excel spreadsheet",
    ".xlsx", "MS Excel 97-2003 spreadsheet", ".xls"), 6, 2, byrow = TRUE)),
  sheet = 1,
  overwrite = TRUE,
  output = c("console", "csv", "xlsx")
)

sat_enthalpy2(
  file = NULL,
  sheet = 1,
  elevation = NULL,
  tbegin = NULL,
  tend = NULL,
  tincrement = NULL,
  overwrite = TRUE,
  output = c("console", "csv", "xlsx")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sat_enthalpy_+3A_file">file</code></td>
<td>
<p>Input file (.xls, .xlsx, or .csv)</p>
</td></tr>
<tr><td><code id="sat_enthalpy_+3A_sheet">sheet</code></td>
<td>
<p>Sheet number or sheet name for the input file (default is
sheet 1)</p>
</td></tr>
<tr><td><code id="sat_enthalpy_+3A_overwrite">overwrite</code></td>
<td>
<p>If <code>TRUE</code>, overwrite any existing spreadsheet.</p>
</td></tr>
<tr><td><code id="sat_enthalpy_+3A_output">output</code></td>
<td>
<p>The output format of the resulting data.table
(console, .csv, or .xlsx)</p>
</td></tr>
<tr><td><code id="sat_enthalpy_+3A_elevation">elevation</code></td>
<td>
<p>numeric vector that contains the location elevation in feet</p>
</td></tr>
<tr><td><code id="sat_enthalpy_+3A_tbegin">tbegin</code></td>
<td>
<p>numeric vector that contains the beginning temperature in
degrees F</p>
</td></tr>
<tr><td><code id="sat_enthalpy_+3A_tend">tend</code></td>
<td>
<p>numeric vector that contains the ending temperature in
degrees F</p>
</td></tr>
<tr><td><code id="sat_enthalpy_+3A_tincrement">tincrement</code></td>
<td>
<p>numeric vector that contains the temperature increment in
degrees F</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The sat_enthalpy function provides a file dialog for the user to choose the
selected file.
</p>
<p>The sat_enthalpy2 function either allows the user to provide the elevation
and temperature values without a file or allows the user to provide a file
without using a file dialog.
</p>
<p>H is expressed as
</p>
<p style="text-align: center;"><code class="reqn">H = \left(0.24 \times T\right) + \left[W \times \left(1061 + 0.444 \times T\right)\right]</code>
</p>


<dl>
<dt><em>H</em></dt><dd><p>enthalpy (Btu/lb)</p>
</dd>
<dt><em>T</em></dt><dd><p>dry-bulb temperature (degrees F)</p>
</dd>
<dt><em>W</em></dt><dd><p>specific humidity (lbwater / lbdry air)</p>
</dd>
</dl>

<p>where W or SH (Specific Humidity) is expressed as
</p>
<p style="text-align: center;"><code class="reqn">W = \left(0.622 \times E\right)/\left(Mb - \left(0.378 \times E\right)\right)</code>
</p>


<dl>
<dt><em>W</em></dt><dd><p>W or SH &ndash; Specific Humidity (kg/kg)</p>
</dd>
<dt><em>E</em></dt><dd><p>Vapor pressure in saturated air at this temperature (millibars)</p>
</dd>
<dt><em>Mb</em></dt><dd><p>Pressure (millibars)</p>
</dd>
</dl>



<h3>Value</h3>

<p>data.table with the output parameters displayed on the console or as
a spreadsheet
</p>


<h3>Author(s)</h3>

<p>Irucka Embry [R version], Timothy H. Diehl [Microsoft Excel(R) spreadsheet]
</p>


<h3>Source</h3>


<ol>
<li><p> r - Better error message for stopifnot? - Stack Overflow answered by Andrie on Dec 1 2011. See <a href="https://stackoverflow.com/questions/8343509/better-error-message-for-stopifnot">https://stackoverflow.com/questions/8343509/better-error-message-for-stopifnot</a>.
</p>
</li>
<li><p> How to check file extensions in R - Stack Overflow answered by lebatsnok on May 17 2014. See <a href="https://stackoverflow.com/questions/23713284/how-to-check-file-extensions-in-r">https://stackoverflow.com/questions/23713284/how-to-check-file-extensions-in-r</a>.
</p>
</li>
<li><p> RDocumentation: TclInterface tcltk. See <a href="https://www.rdocumentation.org/packages/tcltk/versions/3.3.1">https://www.rdocumentation.org/packages/tcltk/versions/3.3.1</a>.
</p>
</li>
<li><p> James Wettenhall &amp; Philippe Grosjean, File Open/Save dialogs in R tcltk, December 01, 2015. See <a href="https://web.archive.org/web/20160521051207/http://www.sciviews.org/recipes/tcltk/TclTk-file-open-save-dialogs/">https://web.archive.org/web/20160521051207/http://www.sciviews.org/recipes/tcltk/TclTk-file-open-save-dialogs/</a>. Retrieved thanks to the Internet Archive: Wayback Machine
</p>
</li>
<li><p> multiple output filenames in R - Stack Overflow asked and edited by Gabelins on Feb 1 2013. See <a href="https://stackoverflow.com/questions/14651594/multiple-output-filenames-in-r">https://stackoverflow.com/questions/14651594/multiple-output-filenames-in-r</a>.
</p>
</li>
<li><p> r - Regex return file name, remove path and file extension - Stack Overflow answered and edited by Ananda Mahto on Feb 25 20134. See <a href="https://stackoverflow.com/questions/15073753/regex-return-file-name-remove-path-and-file-extension/15073919">https://stackoverflow.com/questions/15073753/regex-return-file-name-remove-path-and-file-extension/15073919</a>.
</p>
</li></ol>



<h3>References</h3>


<ol>
<li><p> &quot;Andrew Revering's List of Meteorological Formulas&quot;, <a href="https://web.archive.org/web/20131222174626/https://aprweather.com/pages/calc.htm">https://web.archive.org/web/20131222174626/https://aprweather.com/pages/calc.htm</a>. Retrieved thanks to the Internet Archive: Wayback Machine
</p>
</li>
<li><p> Functional Testing and Design Guides, <em>Functional Testing Guide: from the Fundamentals to the Field</em>, &quot;Sidebar 3: How to Calculate Enthalpy&quot;, <a href="https://web.archive.org/web/20150216015428/https://www.ftguide.org/ftg/IntegratedOperation/IOC-Sidebars-1-3/IOC-SB3-How-To-Calculate-Enthalpy.htm">https://web.archive.org/web/20150216015428/https://www.ftguide.org/ftg/IntegratedOperation/IOC-Sidebars-1-3/IOC-SB3-How-To-Calculate-Enthalpy.htm</a>. Retrieved thanks to the Internet Archive: Wayback Machine
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
library("ie2misc")
# Example to check the input file format

# Copy and paste the following code into the R console if you
# wish to see the input file format.
library("openxlsx")
openXL(system.file("extdata", "Saturated_Enthalpy_Example_Input.xlsx",
package = "ie2misc"))
  # opens the workbook using the default spreadsheet application



# Examples to show different use cases

sat_enthalpy(output = "csv")
# The sheet number is 1 (default) and the output is csv


sat_enthalpy2(system.file("extdata", "Saturated_Enthalpy_Example_Input.xlsx"
, package = "ie2misc"), output = "xlsx")
# The sheet number is 1 (default) and the output is xlsx


sat_enthalpy2(system.file("extdata", "Saturated_Enthalpy_Example_Input.csv",
package = "ie2misc"), output = "console")
# The sheet number is 1 (default) and the output is the console


sat_enthalpy2(elevation = 1200, tbegin = 32, tend = 180,
tincrement = 0.01, output = "csv")
# elevation = 1200 feet, tbegin = 32 degrees F, tend = 180 degrees F,
# tincrement = 0.01 degrees F

## End(Not run)


</code></pre>

<hr>
<h2 id='vnse'>Nash-Sutcliffe model efficiency (NSE)</h2><span id='topic+vnse'></span>

<h3>Description</h3>

<p>This function computes the Nash-Sutcliffe model efficiency (NSE) or
&quot;Nash and Sutcliffe’s coefficient of efficiency (E)&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vnse(predicted, observed, na.rm = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vnse_+3A_predicted">predicted</code></td>
<td>
<p>numeric vector that contains the model predicted
data points (1st parameter)</p>
</td></tr>
<tr><td><code id="vnse_+3A_observed">observed</code></td>
<td>
<p>numeric vector that contains the observed data
points (2nd parameter)</p>
</td></tr>
<tr><td><code id="vnse_+3A_na.rm">na.rm</code></td>
<td>
<p>logical vector that determines whether the missing
values should be removed or not.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>NSE or E is expressed as
</p>
<p style="text-align: center;"><code class="reqn">E = 1 - \frac{\sum \limits_{i=1}^n{\left(P_i - O_i\right)^2}}{\sum \limits_{i=1}^n{\left(O_i - \bar{O}\right)^2}}</code>
</p>


<dl>
<dt><em>E</em></dt><dd><p>&quot;Nash and Sutcliffe’s coefficient of efficiency (E)&quot;</p>
</dd>
<dt><em>n</em></dt><dd><p>the number of observations</p>
</dd>
<dt><em>P</em></dt><dd><p>the &quot;model estimates or predictions&quot;</p>
</dd>
<dt><em>O</em></dt><dd><p>the &quot;pairwise-matched observations that are judged to
be reliable&quot;</p>
</dd>
<dt><em><code class="reqn">\bar{O}</code></em></dt><dd><p>the &quot;true&quot; mean of the observations</p>
</dd>
</dl>

<p>Note: Both P and O should have the same units.
</p>
<p>&quot;Nash and Sutcliffe’s coefficient of efficiency (E)&quot; and other
&quot;dimensionless measures of average error&quot; are fully discussed in the
Willmott reference.
</p>


<h3>Value</h3>

<p>Nash-Sutcliffe model efficiency (NSE) as a numeric vector. The
default choice is that any NA values will be kept (<code>na.rm = FALSE</code>). This can
be changed by specifying <code>na.rm = TRUE</code>, such as <code>vnse(pre, obs, na.rm = TRUE)</code>.
</p>


<h3>References</h3>

<p>Cort J. Willmott, Scott M. Robeson, and Kenji Matsuura, &quot;A refined index of model performance&quot;, <em>International Journal of Climatology</em>, Volume 32, Issue 13, pages 2088-2094, 15 November 2012, article from ResearchGate: <a href="https://www.researchgate.net/publication/235961403_A_refined_index_of_model_performance">https://www.researchgate.net/publication/235961403_A_refined_index_of_model_performance</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mape">mape</a></code> for mean absolute percent error (MAPE), <code><a href="#topic+mae">mae</a></code> for
mean-absolute error (MAE), <code><a href="#topic+madstat">madstat</a></code> for mean-absolute deviation (MAD), <code><a href="#topic+dr">dr</a></code>
for &quot;index of agreement (dr)&quot;, and <code><a href="#topic+rmse">rmse</a></code> for root mean square error (RMSE).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library("ie2misc")

obs &lt;- 1:10 # observed
pre &lt;- 2:11 # predicted
vnse(pre, obs)


library("rando")

set_n(100) # makes the example reproducible
obs1 &lt;- r_norm(.seed = 609) # observed
pre1 &lt;- r_norm(.seed = 624) # predicted


# using the vectors pre1 and obs1
vnse(pre1, obs1)


# using a matrix of the numeric vectors pre1 and obs1
mat1 &lt;- matrix(data = c(obs1, pre1), nrow = length(pre1), ncol = 2,
   byrow = FALSE, dimnames = list(c(rep("", length(pre1))),
   c("Predicted", "Observed")))
vnse(mat1[, 2], mat1[, 1])

# mat1[, 1] # observed values from column 1 of mat1
# mat1[, 2] # predicted values from column 2 of mat1


# using a data.frame of the numeric vectors pre1 and obs1
df1 &lt;- data.frame(obs1, pre1)
vnse(df1[, 2], df1[, 1])

# df1[, 1] # observed values from column 1 of df1
# df1[, 2] # predicted values from column 2 of df1


library("data.table")

# using a data.table of the numeric vectors pre1 and obs1
df2 &lt;- data.table(obs1, pre1)
vnse(df2[, 2, with = FALSE][[1]], df2[, 1, with = FALSE][[1]])

# df2[, 1, with = FALSE][[1]] # observed values from column 1 of df2
# df2[, 2, with = FALSE][[1]] # predicted values from column 2 of df2





</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
