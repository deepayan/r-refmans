<!DOCTYPE html><html lang="en"><head><title>Help for package czso</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {czso}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#czso-package'><p>czso: Use Open Data from the Czech Statistical Office in R</p></a></li>
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#czso_filter_catalogue'><p>Filter the catalogue using a set of keywords</p></a></li>
<li><a href='#czso_get_catalogue'><p>Get catalogue of open CZSO datasets</p></a></li>
<li><a href='#czso_get_codelist'><p>Get CZSO codelist (registry / číselník)</p></a></li>
<li><a href='#czso_get_dataset_doc'><p>Get documentation for CZSO dataset</p></a></li>
<li><a href='#czso_get_dataset_metadata'><p>Get dataset metadata</p></a></li>
<li><a href='#czso_get_table'><p>Retrieve and read dataset from CZSO</p></a></li>
<li><a href='#czso_get_table_schema'><p>Get CZSO table schema</p></a></li>
<li><a href='#monterey'><p>{czso} on MacOS Monterey</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Use Open Data from the Czech Statistical Office in R</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Get programmatic access to the open data provided by the
    Czech Statistical Office (CZSO, <a href="https://czso.cz">https://czso.cz</a>).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/petrbouchal/czso">https://github.com/petrbouchal/czso</a>, <a href="https://petrbouchal.xyz/czso/">https://petrbouchal.xyz/czso/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/petrbouchal/czso/issues">https://github.com/petrbouchal/czso/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, curl (&ge; 4.3), dplyr (&ge; 0.8.3), httr (&ge; 1.4.1),
jsonlite (&ge; 1.6), lifecycle, magrittr, readr (&ge; 1.3.1), rlang
(&ge; 0.4.4), stringi, tibble (&ge; 2.1.3), tools (&ge; 3.6.0), utils
(&ge; 3.6.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>RdMacros:</td>
<td>lifecycle</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-07-20 23:11:47 UTC; petr</td>
</tr>
<tr>
<td>Author:</td>
<td>Petr Bouchal <a href="https://orcid.org/0000-0002-0471-716X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Jindra Lacko [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Petr Bouchal &lt;pbouchal@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-07-20 23:30:01 UTC</td>
</tr>
</table>
<hr>
<h2 id='czso-package'>czso: Use Open Data from the Czech Statistical Office in R</h2><span id='topic+czso'></span><span id='topic+czso-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Get programmatic access to the open data provided by the Czech Statistical Office (CZSO, <a href="https://czso.cz">https://czso.cz</a>).
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Petr Bouchal <a href="mailto:pbouchal@gmail.com">pbouchal@gmail.com</a> (<a href="https://orcid.org/0000-0002-0471-716X">ORCID</a>)
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Jindra Lacko [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/petrbouchal/czso">https://github.com/petrbouchal/czso</a>
</p>
</li>
<li> <p><a href="https://petrbouchal.xyz/czso/">https://petrbouchal.xyz/czso/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/petrbouchal/czso/issues">https://github.com/petrbouchal/czso/issues</a>
</p>
</li></ul>


<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>

<hr>
<h2 id='czso_filter_catalogue'>Filter the catalogue using a set of keywords</h2><span id='topic+czso_filter_catalogue'></span>

<h3>Description</h3>

<p>Filter the catalogue using a set of keywords
</p>


<h3>Usage</h3>

<pre><code class='language-R'>czso_filter_catalogue(catalogue, search_terms)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="czso_filter_catalogue_+3A_catalogue">catalogue</code></td>
<td>
<p>a catalogue as returned by <code>czso_get_catalogue()</code></p>
</td></tr>
<tr><td><code id="czso_filter_catalogue_+3A_search_terms">search_terms</code></td>
<td>
<p>#' A regex pattern (incl. plain text), or a vector of regex patterns, to filter the catalogue by.
A case-insensitive filter is performed on the title, description and keywords.
The search returns only catalogue entries where all the patterns are matched anywhere within the title, description or keywords.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with the filtered catalogue.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ctlg &lt;- czso_get_catalogue()
czso_filter_catalogue(ctlg, search_terms = c("kraj", "me?zd"))
czso_filter_catalogue(ctlg, search_terms = c("úmrt", "orp"))
czso_filter_catalogue(ctlg, search_terms = c("kraj", "vazba", "orp"))
czso_filter_catalogue(ctlg, search_terms = c("ISCO", "číselník"))
czso_filter_catalogue(ctlg, search_terms = c("zaměstnání", "číselník"))
</code></pre>

<hr>
<h2 id='czso_get_catalogue'>Get catalogue of open CZSO datasets</h2><span id='topic+czso_get_catalogue'></span>

<h3>Description</h3>

<p>Retrieves a list of all CZSO's open datasets available from the Czech Open data catalogue.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>czso_get_catalogue(search_terms = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="czso_get_catalogue_+3A_search_terms">search_terms</code></td>
<td>
<p>a regex pattern, or a vector of regex patterns, to filter the catalogue by.
A case-insensitive filter is performed on the title, description and keywords.
The search returns only catalogue entries where all the patterns are matched anywhere within the title, description or keywords.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Pass the string in the <code>dataset_id</code> column to <code>get_czso_table()</code>. <code>dataset_iri</code>
is the unique identifier of the dataset in the national catalogue and also the URL
containing all metadata for the dataset.
</p>


<h3>Value</h3>

<p>a data frame with details on all CZSO datasets available in the Czech National Open Data Catalogue.
The columns are fairly well described by their names, except:
</p>

<ul>
<li><p> some columns contain IRIs instead of human readable text; still you can deduce the content from the IRI.
</p>
</li>
<li><p> the <code>spatial</code> columns contains an IRI ending in the pattern <code>{unit_type}</code>/<code>{unit_code}</code>.
The unit_type denotes what unit the data covers (scope/domain not granularity) and the second identifies the unit covered.
The unit_type will usually be <code>"stat"</code> for &quot;state&quot; and the unit_code will be 1.
The unit_type can also be <code>"KR"</code> for region or <code>"OB"</code> for municipality, or <code>"OK"</code> for district.
In that case, the unit_code will be a code of that unit.
</p>
</li>
<li> <p><code>page</code> points to the documentation, i.e. methodology notes for the dataset.
</p>
</li></ul>



<h3>See Also</h3>

<p>Other Core workflow: 
<code><a href="#topic+czso_get_codelist">czso_get_codelist</a>()</code>,
<code><a href="#topic+czso_get_table">czso_get_table</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
czso_get_catalogue()
czso_get_catalogue(search_terms = c("kraj", "me?zd"))

</code></pre>

<hr>
<h2 id='czso_get_codelist'>Get CZSO codelist (registry / číselník)</h2><span id='topic+czso_get_codelist'></span>

<h3>Description</h3>

<p>Downloads codelist (registry table) and returns it in a tibble.
Codelists are canonical lists of entities, their names and IDs. See Details.
Codelists are included in catalogue which can be retrieved using <code>czso_get_catalogue()</code>.
Their IDs start with <code>"cis"</code> followed by a two- to three-digit number.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>czso_get_codelist(
  codelist_id,
  language = c("cs", "en"),
  dest_dir = NULL,
  resource_num = NULL,
  force_redownload = F
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="czso_get_codelist_+3A_codelist_id">codelist_id</code></td>
<td>
<p>character or numeric of length 1 or 2; ID of codelist to download. See Details.</p>
</td></tr>
<tr><td><code id="czso_get_codelist_+3A_language">language</code></td>
<td>
<p>language, either &quot;cs&quot; (the default) or &quot;en&quot;, which is available for some codelists.</p>
</td></tr>
<tr><td><code id="czso_get_codelist_+3A_dest_dir">dest_dir</code></td>
<td>
<p>character. Directory in which downloaded files will be stored.
If left unset, will use the <code>czso.dest_dir</code> option if the option is set, and <code>tempdir()</code> otherwise. Will be created if it does not exist.</p>
</td></tr>
<tr><td><code id="czso_get_codelist_+3A_resource_num">resource_num</code></td>
<td>
<p>integer, order of resource. Only override if you need a different format.</p>
</td></tr>
<tr><td><code id="czso_get_codelist_+3A_force_redownload">force_redownload</code></td>
<td>
<p>whether to download even if a cached local file is available.</p>
</td></tr>
</table>


<h3>Details</h3>



<h4>Codelists</h4>

<p>Codelists are canonical registries of entities:
things, statistical areas and aggregates, concepts, categorisations.
A codelist typically contains IDs and names of all the entities fitting into
a certain category.
</p>
<p>The most commonly used codelists are geographical, e.g. lists of regions or
municipalities.
</p>
<p>In the world of the CZSO, each codelist has a numeric ID of two to four digits.
You can pass this number to the function (even as a string), or you can pass the dataset ID found
in the catalogue; the latter will have the form of e.g. <code>"cisNN"</code>.
</p>


<h5>Relationships between codelists (&quot;vazba mezi číselníky&quot;)</h5>

<p>The CZSO data store also holds tables describing relations between codelists.
This is especially useful for spatial hierarchies (e.g. which towns belong to which region), or for converting
between categorisations (e.g. two different sets of IDs for regions.)
</p>
<p>You can pass a vector of two IDs (numeric or character) and if the relational
table for these two exists, it will be returned. (If it does not work,
try flipping them around). The equivalent dataset ID, as found in the catalogue,
is <code>"cisXXvazYY"</code>.
</p>




<h4>Columns in output</h4>

<p>For single-codelist files, see below for the most commonly included columns.
For relational tables, you will see each column twice, each time with a suffix of 1 or 2.
</p>

<ul>
<li><p> AKRCIS: codelist abbreviation
</p>
</li>
<li><p> KODCIS: codelist ID
</p>
</li>
<li><p> CHODNOTA: entity ID
</p>
</li>
<li><p> TEXT: entity name
</p>
</li>
<li><p> ZKRTEXT: entity name abbreviated
</p>
</li>
<li><p> ADMPLOD: valid from
</p>
</li>
<li><p> ADMNEPO: invalid after
</p>
</li>
<li><p> KOD_RUIAN: for geographical entites, RUIAN code (different master registry run by the geodesists)
</p>
</li>
<li><p> CZNUTS: for geographical entities, NUTS code
</p>
</li></ul>




<h3>Value</h3>

<p>a <a href="tibble.html#topic+tibble-package">tibble</a> All columns except dates kept as character.
See Details for the columns.
</p>


<h3>See Also</h3>

<p>Other Core workflow: 
<code><a href="#topic+czso_get_catalogue">czso_get_catalogue</a>()</code>,
<code><a href="#topic+czso_get_table">czso_get_table</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
czso_get_codelist("cis100")

# equivalent
czso_get_codelist(100)

# get a table of relations between two codelists
czso_get_codelist(c(100, 43))

# equivalent
czso_get_codelist("cis100vaz43")

</code></pre>

<hr>
<h2 id='czso_get_dataset_doc'>Get documentation for CZSO dataset</h2><span id='topic+czso_get_dataset_doc'></span>

<h3>Description</h3>

<p>Retrieves the URL/downloads the file containing the documentation of the dataset, in the required format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>czso_get_dataset_doc(
  dataset_id,
  action = c("return", "open", "download"),
  destfile = NULL,
  format = c("html", "pdf", "word")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="czso_get_dataset_doc_+3A_dataset_id">dataset_id</code></td>
<td>
<p>Dataset ID</p>
</td></tr>
<tr><td><code id="czso_get_dataset_doc_+3A_action">action</code></td>
<td>
<p>Whether to <code>return</code> URL (the default), <code>download</code> the file, or <code>open</code> the URL in the default web browser.</p>
</td></tr>
<tr><td><code id="czso_get_dataset_doc_+3A_destfile">destfile</code></td>
<td>
<p>Where to save the file. Only used if if <code>action = download</code>.</p>
</td></tr>
<tr><td><code id="czso_get_dataset_doc_+3A_format">format</code></td>
<td>
<p>What file format to access: <code>html</code> (the default), <code>pdf</code>, or <code>word</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The document to which this functions provides access contains methodological
background on the specified dataset and is identified by the <code>schema</code> field
in the list returned by <code>czso_get_dataset_metadata()</code>.
</p>


<h3>Value</h3>

<p>if <code>action = download</code>, the path to the downloaded file; file URL otherwise.
</p>


<h3>See Also</h3>

<p>Other Additional tools: 
<code><a href="#topic+czso_get_dataset_metadata">czso_get_dataset_metadata</a>()</code>,
<code><a href="#topic+czso_get_table_schema">czso_get_table_schema</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
czso_get_dataset_doc("110080")

</code></pre>

<hr>
<h2 id='czso_get_dataset_metadata'>Get dataset metadata</h2><span id='topic+czso_get_dataset_metadata'></span>

<h3>Description</h3>

<p>Get metadata from CZSO API, which can be somewhat more detailed/readable than
what is provided in the dataset's entry in the output of <code>czso_get_dataset()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>czso_get_dataset_metadata(dataset_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="czso_get_dataset_metadata_+3A_dataset_id">dataset_id</code></td>
<td>
<p>Dataset ID</p>
</td></tr>
</table>


<h3>Details</h3>

<p>As far as I can tell there is no way to get the metadata in English, though
some key datasets, such as codelists, do have English-language documentation.
See <code>czso_get_table()</code> for how to access English-language codelists (registers).
</p>


<h3>Value</h3>

<p>a list with elements named in English, where the names are mostly self-explanatory.
So are the contents where these are dates; title, description, notes and tags only exist in Czech as far as I know.
Some fields merit explanation:
</p>

<ul>
<li> <p><code>resources</code>: a list of files available to download in this dataset
</p>
</li>
<li> <p><code>frequency</code>: see https://project-open-data.cio.gov/iso8601_guidance/ for a key
</p>
</li>
<li> <p><code>ruian_type</code>: what type of spatial unit the data covers (spatial domain/extent/scope, not granularity).
<code>ST</code> means &quot;state&quot; (this is almost always the case), <code>"KR"</code> means region (kraj),
<code>"OK"</code> district (okres), <code>"OB"</code> municipality (obec);
<code>"RS"</code> cohesion region (region soudržnosti, larger than region)
</p>
</li>
<li> <p><code>ruian_code</code>: the code of the unit the data covers as per the RUIAN taxonomy
</p>
</li>
<li> <p><code>schema</code> points to documentation while <code>describedBy</code> points to the technical schema in JSON or XML.
</p>
</li></ul>



<h3>See Also</h3>

<p>Other Additional tools: 
<code><a href="#topic+czso_get_dataset_doc">czso_get_dataset_doc</a>()</code>,
<code><a href="#topic+czso_get_table_schema">czso_get_table_schema</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
czso_get_dataset_metadata("110080")

</code></pre>

<hr>
<h2 id='czso_get_table'>Retrieve and read dataset from CZSO</h2><span id='topic+czso_get_table'></span>

<h3>Description</h3>

<p>Downloads and reads dataset identified by <code>dataset_id</code>.
Unzips if necessary, but only loads CSV files, otherwise returns the path to the downloaded file.
Converts types of columns where known, e.g. value columns to numeric.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>czso_get_table(
  dataset_id,
  dest_dir = NULL,
  force_redownload = FALSE,
  resource_num = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="czso_get_table_+3A_dataset_id">dataset_id</code></td>
<td>
<p>a character. Found in the czso_id column of data frame returned by <code>get_catalogue()</code>.</p>
</td></tr>
<tr><td><code id="czso_get_table_+3A_dest_dir">dest_dir</code></td>
<td>
<p>character. Directory in which downloaded files will be stored.
If left unset, will use the <code>czso.dest_dir</code> option if the option is set, and <code>tempdir()</code> otherwise. Will be created if it does not exist.</p>
</td></tr>
<tr><td><code id="czso_get_table_+3A_force_redownload">force_redownload</code></td>
<td>
<p>integer. Whether to redownload data source file even if already cached. Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="czso_get_table_+3A_resource_num">resource_num</code></td>
<td>
<p>integer. Order of resource in resource list for the given dataset. Defaults to 1, the normal value for CZSO datasets.</p>
</td></tr>
</table>


<h3>Details</h3>



<h4>Structure of the output tibble</h4>

<p>CZSO provides its open data as tidy data, so each row only contains one value
in the <code>hodnota</code> column and the remaining columns give details on how
that value is defined. See &quot;Included columns&quot; below on how these work.
</p>



<h4>Data types</h4>

<p>The schema of the dataset is not yet used, so some columns may be mistyped and are by default returned as character vectors.
</p>



<h4>Included columns</h4>

<p>The range of columns present in the output varies from one dataset to another,
so the package does not attempt to provide English-language names for
the known subset, as that would result in a jumble of Czenglish.
</p>
<p>Instead, here is a guide to some of the common column names you will encounter:
</p>

<ul>
<li> <p><code>idhod</code>: a unique ID of the value in the CZSO database. This does not allow
you to link to any other (meta)data as far as I know, but it does provide unique
identification should you need it.
</p>
</li>
<li> <p><code>hodnota</code>: the value.
</p>
</li>
<li> <p><code>stapro_kod</code>: code of the statistic/indicator/variable as listed.
in the SMS UKAZ register (https://www.czso.cz/csu/czso/statistical-variables-indicators);
this one has Czech-English documentation - access this by clicking the UK flag top right.
You can also get a data table with the definitions, if you search for <code>"statistické proměnné"</code> in
the <code>title</code> field of the catalogue. Last I checked, the ID of this table was <code>"990124-17"</code>.
</p>
</li>
<li> <p><code>rok</code> denotes year as YYYY.
</p>
</li>
<li> <p><code>ctvrtleti</code> denotes quarter if available.
</p>
</li></ul>

<p>Other metadata will come in the form <code style="white-space: pre;">&#8288;{variable}_[txt|cis|kod]&#8288;</code>. The <code style="white-space: pre;">&#8288;_txt&#8288;</code>
column holds the Czech text name for the category. The <code style="white-space: pre;">&#8288;_cis&#8288;</code> column holds the
ID of the codelist (register) you need to decode the code in <code style="white-space: pre;">&#8288;_kod&#8288;</code>.
The English codelists are at http://apl.czso.cz/iSMS/en/cislist.jsp,
Czech ones at http://apl.czso.cz/iSMS/cs/cislist.jsp.
You can find the Czech-language codelists in the catalogue retrieved with
<code>czso_get_catalogue()</code>, where their IDs begin with <code>"cis"</code> followed by the number; the English ones can also be retrieved from
the link above using a permalink URL.
</p>
<p>More conveniently, you can use the <code>czso_get_codelist()</code> function to retrieve the codelist.
</p>
<p>Units are denoted in a separate column.
</p>
<p>A helper on common breakdowns with their associated columns:
</p>

<ul>
<li> <p><code>uzemi</code>: territory
</p>
</li>
<li> <p><code>vek</code>: age
</p>
</li>
<li> <p><code>pohlavi</code>: gender
</p>
</li></ul>

<p><code>NA</code>s in &quot;breakdown&quot; columns (e.g. gender or age) denote the total.
</p>



<h3>Value</h3>

<p>a <a href="tibble.html#topic+tibble-package">tibble</a>, or vector of file paths if file is not CSV or if
there are multiple files in the dataset.
See Details on the columns contained in the tibble
</p>


<h3>Note</h3>

<p>Do not use this for harvesting datasets from CZSO en masse.
</p>


<h3>See Also</h3>

<p>Other Core workflow: 
<code><a href="#topic+czso_get_catalogue">czso_get_catalogue</a>()</code>,
<code><a href="#topic+czso_get_codelist">czso_get_codelist</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
czso_get_table("110080")

</code></pre>

<hr>
<h2 id='czso_get_table_schema'>Get CZSO table schema</h2><span id='topic+czso_get_table_schema'></span>

<h3>Description</h3>

<p>Retrieves and parses the schema for the table identified by dataset_id and resource_num.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>czso_get_table_schema(dataset_id, resource_num = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="czso_get_table_schema_+3A_dataset_id">dataset_id</code></td>
<td>
<p>Dataset ID</p>
</td></tr>
<tr><td><code id="czso_get_table_schema_+3A_resource_num">resource_num</code></td>
<td>
<p>Resource number, typically 1 in CZSO (the default)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently only handles JSON schema files for CSV files.
If the schema is a different format, an error is returned pointing the user to the URL of the file.
</p>


<h3>Value</h3>

<p>a tibble with a description of the table columns, with the following items:
</p>

<ul>
<li> <p><code>name</code>: the column name.
</p>
</li>
<li> <p><code>titles</code>: usually the duplicate of <code>name</code>
</p>
</li>
<li> <p><code>dc:description</code>: a Czech-language description of the column
</p>
</li>
<li> <p><code>required</code>: whether the column is required
</p>
</li>
<li> <p><code>datatatype</code>: the data type of the column; either &quot;number&quot; or &quot;string&quot;
</p>
</li></ul>



<h3>See Also</h3>

<p>Other Additional tools: 
<code><a href="#topic+czso_get_dataset_doc">czso_get_dataset_doc</a>()</code>,
<code><a href="#topic+czso_get_dataset_metadata">czso_get_dataset_metadata</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
czso_get_table_schema("110080")

</code></pre>

<hr>
<h2 id='monterey'>{czso} on MacOS Monterey</h2><span id='topic+monterey'></span>

<h3>Description</h3>

<p>Explanation of how and why extra setup steps are needed to use {czso} on MacOS Monterey
</p>


<h3>Details</h3>

<p>Some early versions of MacOS Monterey ship with an old version of Libre SSL. This causes an otherwise rare bug where'
the certificates on CZSO servers cannot be decrypted, so R cannot communicate with the server. Because R relies on the
default system SSL library, this in fact affects even curl on the system command line.
</p>
<p>The solution in R is to put
</p>
<p><code>CURL_SSL_BACKEND=SecureTransport</code> into .Renviron. (Don't forget to add a newline if this is the last line in the file).
Setting this anywhere after R startup may not work, hence the .Renviron solution is recommended.
</p>
<p>You can also put this in your system environent e.g. by setting the system variable in the .profile file.
</p>
<p>The issue no longer exists on MacOS Monterey 12.3 Beta, so presumably will also not exist on Monterey 12.3.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
