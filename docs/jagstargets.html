<!DOCTYPE html><html lang="en-US"><head><title>Help for package jagstargets</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {jagstargets}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#jagstargets-package'><p>jagstargets: Targets for JAGS Workflows</p></a></li>
<li><a href='#tar_jags'><p>One MCMC per model with multiple outputs</p></a></li>
<li><a href='#tar_jags_df'><p>Select a strategic piece of <code>R2jags</code> output.</p></a></li>
<li><a href='#tar_jags_example_data'><p>Simulate example JAGS data.</p></a></li>
<li><a href='#tar_jags_example_file'><p>Write an example JAGS model file.</p></a></li>
<li><a href='#tar_jags_rep'><p>Tidy output from multiple MCMCs per model.</p></a></li>
<li><a href='#tar_jags_rep_data_batch'><p>Generate a batch of data</p></a></li>
<li><a href='#tar_jags_rep_dic'><p>Tidy DIC output from multiple MCMCs per model</p></a></li>
<li><a href='#tar_jags_rep_draws'><p>Tidy posterior draws from multiple MCMCs per model</p></a></li>
<li><a href='#tar_jags_rep_run'><p>Run a batch of iterations for a jags model</p>
and return only strategic output.</a></li>
<li><a href='#tar_jags_rep_summary'><p>Tidy posterior summaries from multiple MCMCs per model</p></a></li>
<li><a href='#tar_jags_run'><p>Run a JAGS model and return the whole output object.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Targets for JAGS Pipelines</td>
</tr>
<tr>
<td>Description:</td>
<td>Bayesian data analysis usually incurs long runtimes
  and cumbersome custom code.
  A pipeline toolkit tailored to Bayesian statisticians,
  the 'jagstargets' R package is leverages
  'targets' and 'R2jags' to ease this burden.
  'jagstargets' makes it super easy to set up scalable
  JAGS pipelines that automatically parallelize the computation
  and skip expensive steps when the results are already up to date.
  Minimal custom code is required, and there is no need to manually
  configure branching, so usage is much easier than 'targets' alone.
  For the underlying methodology, please refer
  to the documentation of 'targets' &lt;<a href="https://doi.org/10.21105%2Fjoss.02959">doi:10.21105/joss.02959</a>&gt; and 'JAGS'
  (Plummer 2003) <a href="https://www.r-project.org/conferences/DSC-2003/Proceedings/Plummer.pdf">https://www.r-project.org/conferences/DSC-2003/Proceedings/Plummer.pdf</a>.</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.2</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://docs.ropensci.org/jagstargets/">https://docs.ropensci.org/jagstargets/</a>,
<a href="https://github.com/ropensci/jagstargets">https://github.com/ropensci/jagstargets</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/jagstargets/issues">https://github.com/ropensci/jagstargets/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>coda (&ge; 0.19.4), fst (&ge; 0.9.2), posterior (&ge; 1.0.1), purrr
(&ge; 0.3.4), qs2, R2jags (&ge; 0.6.1), rjags (&ge; 4.10), rlang (&ge;
0.4.10), secretbase (&ge; 0.4.0), stats, targets (&ge; 1.6.0),
tarchetypes (&ge; 0.8.0), tibble (&ge; 3.0.1), tidyselect, tools,
utils, withr (&ge; 2.1.2),</td>
</tr>
<tr>
<td>Suggests:</td>
<td>dplyr (&ge; 1.0.2), fs (&ge; 1.5.0), knitr (&ge; 1.30), qs (&ge;
0.23.2), R.utils (&ge; 2.10.1), rmarkdown (&ge; 2.3), testthat (&ge;
3.0.0), tidyr (&ge; 1.1.2), visNetwork (&ge; 2.0.9)</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>JAGS 4.x.y (https://mcmc-jags.sourceforge.net)</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-11-18 14:11:44 UTC; C240390</td>
</tr>
<tr>
<td>Author:</td>
<td>William Michael Landau
    <a href="https://orcid.org/0000-0003-1878-3253"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  David Lawrence Miller [rev],
  Eli Lilly and Company [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>William Michael Landau &lt;will.landau.oss@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-11-18 14:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='jagstargets-package'>jagstargets: Targets for JAGS Workflows</h2><span id='topic+jagstargets-package'></span><span id='topic+jagstargets'></span>

<h3>Description</h3>

<p>Bayesian data analysis usually incurs long runtimes
and cumbersome custom code. A pipeline toolkit tailored to
Bayesian statisticians, the <code>jagstargets</code> R package leverages
<code>targets</code> and <code>R2jags</code> to ease this burden.
<code>jagstargets</code> makes it super easy to set up scalable
JAGS pipelines that automatically parallelize the computation
and skip expensive steps when the results are already up to date.
Minimal custom code is required, and there is no need to manually
configure branching, so usage is much easier than <code>targets</code> alone.
</p>


<h3>See Also</h3>

<p><a href="https://docs.ropensci.org/jagstargets/">https://docs.ropensci.org/jagstargets/</a>, <code><a href="#topic+tar_jags">tar_jags()</a></code>
</p>

<hr>
<h2 id='tar_jags'>One MCMC per model with multiple outputs</h2><span id='topic+tar_jags'></span>

<h3>Description</h3>

<p>Targets to run a JAGS model once with MCMC
and save multiple outputs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tar_jags(
  name,
  jags_files,
  parameters.to.save,
  data = list(),
  summaries = list(),
  summary_args = list(),
  n.cluster = 1,
  n.chains = 3,
  n.iter = 2000,
  n.burnin = as.integer(n.iter/2),
  n.thin = 1,
  jags.module = c("glm", "dic"),
  inits = NULL,
  RNGname = c("Wichmann-Hill", "Marsaglia-Multicarry", "Super-Duper", "Mersenne-Twister"),
  jags.seed = 1,
  stdout = NULL,
  stderr = NULL,
  progress.bar = "text",
  refresh = 0,
  draws = TRUE,
  summary = TRUE,
  dic = TRUE,
  tidy_eval = targets::tar_option_get("tidy_eval"),
  packages = targets::tar_option_get("packages"),
  library = targets::tar_option_get("library"),
  format = "qs",
  format_df = "fst_tbl",
  repository = targets::tar_option_get("repository"),
  error = targets::tar_option_get("error"),
  memory = targets::tar_option_get("memory"),
  garbage_collection = targets::tar_option_get("garbage_collection"),
  deployment = targets::tar_option_get("deployment"),
  priority = targets::tar_option_get("priority"),
  resources = targets::tar_option_get("resources"),
  storage = targets::tar_option_get("storage"),
  retrieval = targets::tar_option_get("retrieval"),
  cue = targets::tar_option_get("cue"),
  description = targets::tar_option_get("description")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tar_jags_+3A_name">name</code></td>
<td>
<p>Symbol, base name for the collection of targets.
Serves as a prefix for target names.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_jags_files">jags_files</code></td>
<td>
<p>Character vector of JAGS model files. If you
supply multiple files, each model will run on the one shared dataset
generated by the code in <code>data</code>. If you supply an unnamed vector,
<code>tools::file_path_sans_ext(basename(jags_files))</code> will be used
as target name suffixes. If <code>jags_files</code> is a named vector,
the suffixed will come from <code>names(jags_files)</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_parameters.to.save">parameters.to.save</code></td>
<td>
<p>Model parameters to save, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_data">data</code></td>
<td>
<p>Code to generate the <code>data</code> list for the JAGS model.
Optionally include a <code>.join_data</code> element to join parts of the data
to correspondingly named parameters in the summary output.
See the vignettes for details.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_summaries">summaries</code></td>
<td>
<p>List of summary functions passed to <code>...</code> in
<code>posterior::summarize_draws()</code> through <code style="white-space: pre;">&#8288;$summary()&#8288;</code>
on the <code>CmdStanFit</code> object.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_summary_args">summary_args</code></td>
<td>
<p>List of summary function arguments passed to
<code>.args</code> in <code>posterior::summarize_draws()</code> through <code style="white-space: pre;">&#8288;$summary()&#8288;</code>
on the <code>CmdStanFit</code> object.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_n.cluster">n.cluster</code></td>
<td>
<p>Number of parallel processes, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_n.chains">n.chains</code></td>
<td>
<p>Number of MCMC chains, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_n.iter">n.iter</code></td>
<td>
<p>Number if iterations (including warmup), passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_n.burnin">n.burnin</code></td>
<td>
<p>Number of warmup iterations, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_n.thin">n.thin</code></td>
<td>
<p>Thinning interval, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_jags.module">jags.module</code></td>
<td>
<p>Character vector of JAGS modules to load, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_inits">inits</code></td>
<td>
<p>Initial values of model parameters, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_rngname">RNGname</code></td>
<td>
<p>Choice of random number generator, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_jags.seed">jags.seed</code></td>
<td>
<p>Seeds to apply to JAGS, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_stdout">stdout</code></td>
<td>
<p>Character of length 1, file path to write the stdout stream
of the model when it runs. Set to <code>NULL</code> to print to the console.
Set to <code>R.utils::nullfile()</code> to suppress stdout.
Does not apply to messages, warnings, or errors.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_stderr">stderr</code></td>
<td>
<p>Character of length 1, file path to write the stderr stream
of the model when it runs. Set to <code>NULL</code> to print to the console.
Set to <code>R.utils::nullfile()</code> to suppress stderr.
Does not apply to messages, warnings, or errors.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_progress.bar">progress.bar</code></td>
<td>
<p>Type of progress bar, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_refresh">refresh</code></td>
<td>
<p>Frequency for refreshing the progress bar, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_draws">draws</code></td>
<td>
<p>Logical, whether to create a target for posterior draws.
Saves draws as a compressed <code>posterior::as_draws_df()</code> <code>tibble</code>.
Convenient, but duplicates storage.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_summary">summary</code></td>
<td>
<p>Logical, whether to create a target to store a small
data frame of posterior summary statistics and convergence diagnostics.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_dic">dic</code></td>
<td>
<p>Logical, whether to create a target with deviance
information criterion (DIC) results.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_tidy_eval">tidy_eval</code></td>
<td>
<p>Logical, whether to enable tidy evaluation
when interpreting <code>command</code> and <code>pattern</code>. If <code>TRUE</code>, you can use the
&quot;bang-bang&quot; operator <code style="white-space: pre;">&#8288;!!&#8288;</code> to programmatically insert
the values of global objects.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_packages">packages</code></td>
<td>
<p>Character vector of packages to load right before
the target runs or the output data is reloaded for
downstream targets. Use <code>tar_option_set()</code> to set packages
globally for all subsequent targets you define.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_library">library</code></td>
<td>
<p>Character vector of library paths to try
when loading <code>packages</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_format">format</code></td>
<td>
<p>Character of length 1, storage format of the non-data-frame
targets such as the JAGS data and any JAGS fit objects.
Please choose an all=purpose
format such as <code>"qs"</code> or <code>"aws_qs"</code> rather than a file format like
<code>"file"</code> or a data frame format like <code>"parquet"</code>. For more on storage
formats, see the help file of <code>targets::tar_target()</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_format_df">format_df</code></td>
<td>
<p>Character of length 1, storage format of the data frame
targets such as posterior draws. We recommend efficient data frame formats
such as <code>"feather"</code> or <code>"aws_parquet"</code>. For more on storage formats,
see the help file of <code>targets::tar_target()</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_repository">repository</code></td>
<td>
<p>Character of length 1, remote repository for target
storage. Choices:
</p>

<ul>
<li> <p><code>"local"</code>: file system of the local machine.
</p>
</li>
<li> <p><code>"aws"</code>: Amazon Web Services (AWS) S3 bucket. Can be configured
with a non-AWS S3 bucket using the <code>endpoint</code> argument of
<code><a href="targets.html#topic+tar_resources_aws">tar_resources_aws()</a></code>, but versioning capabilities may be lost
in doing so.
See the cloud storage section of
<a href="https://books.ropensci.org/targets/data.html">https://books.ropensci.org/targets/data.html</a>
for details for instructions.
</p>
</li>
<li> <p><code>"gcp"</code>: Google Cloud Platform storage bucket.
See the cloud storage section of
<a href="https://books.ropensci.org/targets/data.html">https://books.ropensci.org/targets/data.html</a>
for details for instructions.
</p>
</li>
<li><p> A character string from <code><a href="targets.html#topic+tar_repository_cas">tar_repository_cas()</a></code> for content-addressable
storage.
</p>
</li></ul>

<p>Note: if <code>repository</code> is not <code>"local"</code> and <code>format</code> is <code>"file"</code>
then the target should create a single output file.
That output file is uploaded to the cloud and tracked for changes
where it exists in the cloud. The local file is deleted after
the target runs.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_error">error</code></td>
<td>
<p>Character of length 1, what to do if the target
stops and throws an error. Options:
</p>

<ul>
<li> <p><code>"stop"</code>: the whole pipeline stops and throws an error.
</p>
</li>
<li> <p><code>"continue"</code>: the whole pipeline keeps going.
</p>
</li>
<li> <p><code>"null"</code>: The errored target continues and returns <code>NULL</code>.
The data hash is deliberately wrong so the target is not
up to date for the next run of the pipeline. In addition,
as of version 1.8.0.9011, a value of <code>NULL</code> is given
to upstream dependencies with <code>error = "null"</code> if loading fails.
</p>
</li>
<li> <p><code>"abridge"</code>: any currently running targets keep running,
but no new targets launch after that.
</p>
</li>
<li> <p><code>"trim"</code>: all currently running targets stay running. A queued
target is allowed to start if:
</p>

<ol>
<li><p> It is not downstream of the error, and
</p>
</li>
<li><p> It is not a sibling branch from the same <code><a href="targets.html#topic+tar_target">tar_target()</a></code> call
(if the error happened in a dynamic branch).
</p>
</li></ol>

<p>The idea is to avoid starting any new work that the immediate error
impacts. <code>error = "trim"</code> is just like <code>error = "abridge"</code>,
but it allows potentially healthy regions of the dependency graph
to begin running.
(Visit <a href="https://books.ropensci.org/targets/debugging.html">https://books.ropensci.org/targets/debugging.html</a>
to learn how to debug targets using saved workspaces.)
</p>
</li></ul>
</td></tr>
<tr><td><code id="tar_jags_+3A_memory">memory</code></td>
<td>
<p>Character of length 1, memory strategy. Possible values:
</p>

<ul>
<li> <p><code>"auto"</code>: new in <code>targets</code> version 1.8.0.9011, <code>memory = "auto"</code>
is equivalent to <code>memory = "transient"</code> for dynamic branching
(a non-null <code>pattern</code> argument) and <code>memory = "persistent"</code>
for targets that do not use dynamic branching.
</p>
</li>
<li> <p><code>"persistent"</code>: the target stays in memory
until the end of the pipeline (unless <code>storage</code> is <code>"worker"</code>,
in which case <code>targets</code> unloads the value from memory
right after storing it in order to avoid sending
copious data over a network).
</p>
</li>
<li> <p><code>"transient"</code>: the target gets unloaded
after every new target completes.
Either way, the target gets automatically loaded into memory
whenever another target needs the value.
</p>
</li></ul>

<p>For cloud-based dynamic files
(e.g. <code>format = "file"</code> with <code>repository = "aws"</code>),
the <code>memory</code> option applies to the
temporary local copy of the file:
<code>"persistent"</code> means it remains until the end of the pipeline
and is then deleted,
and <code>"transient"</code> means it gets deleted as soon as possible.
The former conserves bandwidth,
and the latter conserves local storage.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_garbage_collection">garbage_collection</code></td>
<td>
<p>Logical: <code>TRUE</code> to run <code>base::gc()</code>
just before the target runs,
<code>FALSE</code> to omit garbage collection.
In the case of high-performance computing,
<code>gc()</code> runs both locally and on the parallel worker.
All this garbage collection is skipped if the actual target
is skipped in the pipeline.
Non-logical values of <code>garbage_collection</code> are converted to <code>TRUE</code> or
<code>FALSE</code> using <code>isTRUE()</code>. In other words, non-logical values are
converted <code>FALSE</code>. For example, <code>garbage_collection = 2</code>
is equivalent to <code>garbage_collection = FALSE</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_deployment">deployment</code></td>
<td>
<p>Character of length 1. If <code>deployment</code> is
<code>"main"</code>, then the target will run on the central controlling R process.
Otherwise, if <code>deployment</code> is <code>"worker"</code> and you set up the pipeline
with distributed/parallel computing, then
the target runs on a parallel worker. For more on distributed/parallel
computing in <code>targets</code>, please visit
<a href="https://books.ropensci.org/targets/crew.html">https://books.ropensci.org/targets/crew.html</a>.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_priority">priority</code></td>
<td>
<p>Numeric of length 1 between 0 and 1. Controls which
targets get deployed first when multiple competing targets are ready
simultaneously. Targets with priorities closer to 1 get dispatched earlier
(and polled earlier in <code><a href="targets.html#topic+tar_make_future">tar_make_future()</a></code>).</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_resources">resources</code></td>
<td>
<p>Object returned by <code>tar_resources()</code>
with optional settings for high-performance computing
functionality, alternative data storage formats,
and other optional capabilities of <code>targets</code>.
See <code>tar_resources()</code> for details.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_storage">storage</code></td>
<td>
<p>Character string to control when the output of the target
is saved to storage. Only relevant when using <code>targets</code>
with parallel workers (<a href="https://books.ropensci.org/targets/crew.html">https://books.ropensci.org/targets/crew.html</a>).
Must be one of the following values:
</p>

<ul>
<li> <p><code>"main"</code>: the target's return value is sent back to the
host machine and saved/uploaded locally.
</p>
</li>
<li> <p><code>"worker"</code>: the worker saves/uploads the value.
</p>
</li>
<li> <p><code>"none"</code>: <code>targets</code> makes no attempt to save the result
of the target to storage in the location where <code>targets</code>
expects it to be. Saving to storage is the responsibility
of the user. Use with caution.
</p>
</li></ul>
</td></tr>
<tr><td><code id="tar_jags_+3A_retrieval">retrieval</code></td>
<td>
<p>Character string to control when the current target
loads its dependencies into memory before running.
(Here, a &quot;dependency&quot; is another target upstream that the current one
depends on.) Only relevant when using <code>targets</code>
with parallel workers (<a href="https://books.ropensci.org/targets/crew.html">https://books.ropensci.org/targets/crew.html</a>).
Must be one of the following values:
</p>

<ul>
<li> <p><code>"main"</code>: the target's dependencies are loaded on the host machine
and sent to the worker before the target runs.
</p>
</li>
<li> <p><code>"worker"</code>: the worker loads the target's dependencies.
</p>
</li>
<li> <p><code>"none"</code>: <code>targets</code> makes no attempt to load its
dependencies. With <code>retrieval = "none"</code>, loading dependencies
is the responsibility of the user. Use with caution.
</p>
</li></ul>
</td></tr>
<tr><td><code id="tar_jags_+3A_cue">cue</code></td>
<td>
<p>An optional object from <code>tar_cue()</code> to customize the
rules that decide whether the target is up to date.</p>
</td></tr>
<tr><td><code id="tar_jags_+3A_description">description</code></td>
<td>
<p>Character of length 1, a custom free-form human-readable
text description of the target. Descriptions appear as target labels
in functions like <code><a href="targets.html#topic+tar_manifest">tar_manifest()</a></code> and <code><a href="targets.html#topic+tar_visnetwork">tar_visnetwork()</a></code>,
and they let you select subsets of targets for the <code>names</code> argument of
functions like <code><a href="targets.html#topic+tar_make">tar_make()</a></code>. For example,
<code>tar_manifest(names = tar_described_as(starts_with("survival model")))</code>
lists all the targets whose descriptions start with the character
string <code>"survival model"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The MCMC targets use <code>R2jags::jags()</code> if <code>n.cluster</code> is <code>1</code> and
<code>R2jags::jags.parallel()</code> otherwise. Most arguments to <code>tar_jags()</code>
are forwarded to these functions.
</p>


<h3>Value</h3>

<p><code>tar_jags()</code> returns list of target objects.
See the &quot;Target objects&quot; section for
background.
The target names use the <code>name</code> argument as a prefix, and the individual
elements of <code>jags_files</code> appear in the suffixes where applicable.
As an example, the specific target objects returned by
<code>tar_jags(name = x, jags_files = "y.jags", ...)</code> returns a list
of <code>targets::tar_target()</code> objects:
</p>

<ul>
<li> <p><code>x_file_y</code>: reproducibly track the JAGS model file. Returns
a character vector of length 1 with the path to the JAGS
model file.
</p>
</li>
<li> <p><code>x_lines_y</code>: read the contents of the JAGS model file
for safe transport to parallel workers.
Returns a character vector of lines in the model file.
</p>
</li>
<li> <p><code>x_data</code>: run the R expression in the <code>data</code> argument to produce
a JAGS dataset for the model. Returns a JAGS data list.
</p>
</li>
<li> <p><code>x_mcmc_y</code>: run MCMC on the model and dataset.
Returns an <code>rjags</code> object from <code>R2jags</code> with all the MCMC results.
</p>
</li>
<li> <p><code>x_draws_y</code>: extract posterior samples from <code>x_mcmc_y</code>.
Returns a tidy data frame of MCMC draws. Omitted if <code>draws = FALSE</code>.
</p>
</li>
<li> <p><code>x_summary_y</code>: extract posterior summaries from <code>x_mcmc_y</code>.
Returns a tidy data frame of MCMC draws.
Omitted if <code>summary = FALSE</code>.
</p>
</li>
<li> <p><code>x_dic</code>: extract deviance information criterion (DIC) info
from <code>x_mcmc_y</code>. Returns a tidy data frame of DIC info.
Omitted if <code>dic = FALSE</code>.
</p>
</li></ul>



<h3>Target objects</h3>

<p>Most <code>stantargets</code> functions are target factories,
which means they return target objects
or lists of target objects.
Target objects represent skippable steps of the analysis pipeline
as described at <a href="https://books.ropensci.org/targets/">https://books.ropensci.org/targets/</a>.
Please read the walkthrough at
<a href="https://books.ropensci.org/targets/walkthrough.html">https://books.ropensci.org/targets/walkthrough.html</a>
to understand the role of target objects in analysis pipelines.
</p>
<p>For developers,
<a href="https://wlandau.github.io/targetopia/contributing.html#target-factories">https://wlandau.github.io/targetopia/contributing.html#target-factories</a>
explains target factories (functions like this one which generate targets)
and the design specification at
<a href="https://books.ropensci.org/targets-design/">https://books.ropensci.org/targets-design/</a>
details the structure and composition of target objects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (identical(Sys.getenv("TAR_JAGS_EXAMPLES"), "true")) {
targets::tar_dir({ # tar_dir() runs code from a temporary directory.
targets::tar_script({
library(jagstargets)
# Do not use a temp file for a real project
# or else your targets will always rerun.
tmp &lt;- tempfile(pattern = "", fileext = ".jags")
tar_jags_example_file(tmp)
list(
  tar_jags(
    your_model,
    jags_files = tmp,
    data = tar_jags_example_data(),
    parameters.to.save = "beta",
    stdout = R.utils::nullfile(),
    stderr = R.utils::nullfile()
  )
)
}, ask = FALSE)
targets::tar_make()
})
}
</code></pre>

<hr>
<h2 id='tar_jags_df'>Select a strategic piece of <code>R2jags</code> output.</h2><span id='topic+tar_jags_df'></span>

<h3>Description</h3>

<p>Not a user-side function. Do not call directly.
Exported for infrastructure reasons only.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tar_jags_df(
  fit,
  data,
  output = c("draws", "summary", "dic"),
  variables = NULL,
  summaries = NULL,
  summary_args = NULL,
  transform = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tar_jags_df_+3A_fit">fit</code></td>
<td>
<p><code>R2jags</code> object.</p>
</td></tr>
<tr><td><code id="tar_jags_df_+3A_data">data</code></td>
<td>
<p>A list, the original JAGS dataset.</p>
</td></tr>
<tr><td><code id="tar_jags_df_+3A_output">output</code></td>
<td>
<p>Character of length 1 denoting the type of output <code>tibble</code>
to return: <code>"draws"</code> for MCMC samples (which could take up a lot of space)
<code>"summary"</code> for lightweight posterior summary statistics,
and <code>"dic"</code> for the overall deviance information criterion
and effective number of parameters.</p>
</td></tr>
<tr><td><code id="tar_jags_df_+3A_variables">variables</code></td>
<td>
<p>Character vector of model parameter names.
The output posterior summaries are restricted to these variables.</p>
</td></tr>
<tr><td><code id="tar_jags_df_+3A_summaries">summaries</code></td>
<td>
<p>List of summary functions passed to <code>...</code> in
<code>posterior::summarize_draws()</code> through <code style="white-space: pre;">&#8288;$summary()&#8288;</code>
on the <code>CmdStanFit</code> object.</p>
</td></tr>
<tr><td><code id="tar_jags_df_+3A_summary_args">summary_args</code></td>
<td>
<p>List of summary function arguments passed to
<code>.args</code> in <code>posterior::summarize_draws()</code> through <code style="white-space: pre;">&#8288;$summary()&#8288;</code>
on the <code>CmdStanFit</code> object.</p>
</td></tr>
<tr><td><code id="tar_jags_df_+3A_transform">transform</code></td>
<td>
<p>Symbol or <code>NULL</code>, name of a function that accepts
arguments <code>data</code> and <code>draws</code> and returns a data frame. Here,
<code>data</code> is the JAGS data list supplied to the model, and <code>draws</code>
is a data frame with one column per model parameter and one row
per posterior sample. Any arguments other than <code>data</code> and <code>draws</code>
must have valid default values because <code>jagstargets</code> will not
populate them. See the simulation-based calibration discussion
thread at <a href="https://github.com/ropensci/jagstargets/discussions/31">https://github.com/ropensci/jagstargets/discussions/31</a>
for an example.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of <code>R2jags</code> output. Depends on the <code>output</code> argument.
</p>

<hr>
<h2 id='tar_jags_example_data'>Simulate example JAGS data.</h2><span id='topic+tar_jags_example_data'></span>

<h3>Description</h3>

<p>An example dataset compatible with the model file
from <code><a href="#topic+tar_jags_example_file">tar_jags_example_file()</a></code>. The output has a <code>.join_data</code>
element so the true value of <code>beta</code> from the simulation
is automatically appended to the <code>beta</code> rows of the
summary output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tar_jags_example_data(n = 10L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tar_jags_example_data_+3A_n">n</code></td>
<td>
<p>Integer of length 1, number of data points.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>A list with the following elements:
</p>

<ul>
<li> <p><code>n</code>: integer, number of data points.
</p>
</li>
<li> <p><code>x</code>: numeric, covariate vector.
</p>
</li>
<li> <p><code>y</code>: numeric, response variable.
</p>
</li>
<li> <p><code>true_beta</code>: numeric of length 1, value of the regression
coefficient <code>beta</code> used in simulation.
</p>
</li>
<li> <p><code>.join_data</code>: a list of simulated values to be appended
to as a <code>.join_data</code> column in the output of
targets generated by functions such as
<code><a href="#topic+tar_jags_rep_summary">tar_jags_rep_summary()</a></code>. Contains the
regression coefficient <code>beta</code> (numeric of length 1)
and prior predictive data <code>y</code> (numeric vector).
</p>
</li></ul>



<h3>Details</h3>

<p>The <code>tar_jags_example_data()</code> function draws a JAGS
dataset from the prior predictive distribution of the
model from <code><a href="#topic+tar_jags_example_file">tar_jags_example_file()</a></code>. First, the
regression coefficient <code>beta</code> is drawn from its standard
normal prior, and the covariate <code>x</code> is computed.
Then, conditional on the <code>beta</code> draws and the covariate,
the response vector <code>y</code> is drawn from its
Normal(<code>x * beta</code>, 1) likelihood.
</p>


<h3>Value</h3>

<p>List, dataset compatible with the model file from
<code><a href="#topic+tar_jags_example_file">tar_jags_example_file()</a></code>. The output has a <code>.join_data</code>
element so the true value of <code>beta</code> from the simulation
is automatically appended to the <code>beta</code> rows of the
summary output.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tar_jags_example_data()
</code></pre>

<hr>
<h2 id='tar_jags_example_file'>Write an example JAGS model file.</h2><span id='topic+tar_jags_example_file'></span>

<h3>Description</h3>

<p>Overwrites the file at <code>path</code> with a built-in example
JAGS model file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tar_jags_example_file(path = tempfile(pattern = "", fileext = ".jags"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tar_jags_example_file_+3A_path">path</code></td>
<td>
<p>Character of length 1, file path to write the model file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>NULL</code> (invisibly).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>path &lt;- tempfile(pattern = "", fileext = ".jags")
tar_jags_example_file(path = path)
writeLines(readLines(path))
</code></pre>

<hr>
<h2 id='tar_jags_rep'>Tidy output from multiple MCMCs per model.</h2><span id='topic+tar_jags_rep'></span>

<h3>Description</h3>

<p>Internal function. Users should not invoke directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tar_jags_rep(
  name,
  jags_files,
  parameters.to.save,
  data = quote(list()),
  batches = 1L,
  reps = 1L,
  output = c("summary", "draws", "dic"),
  variables = NULL,
  summaries = NULL,
  summary_args = NULL,
  transform = NULL,
  combine = TRUE,
  n.cluster = 1,
  n.chains = 3,
  n.iter = 2000,
  n.burnin = as.integer(n.iter/2),
  n.thin = 1,
  jags.module = c("glm", "dic"),
  inits = NULL,
  RNGname = c("Wichmann-Hill", "Marsaglia-Multicarry", "Super-Duper", "Mersenne-Twister"),
  jags.seed = NULL,
  stdout = NULL,
  stderr = NULL,
  progress.bar = "text",
  refresh = 0,
  tidy_eval = targets::tar_option_get("tidy_eval"),
  packages = targets::tar_option_get("packages"),
  library = targets::tar_option_get("library"),
  format = "qs",
  format_df = "fst_tbl",
  repository = targets::tar_option_get("repository"),
  error = targets::tar_option_get("error"),
  memory = targets::tar_option_get("memory"),
  garbage_collection = targets::tar_option_get("garbage_collection"),
  deployment = targets::tar_option_get("deployment"),
  priority = targets::tar_option_get("priority"),
  resources = targets::tar_option_get("resources"),
  storage = targets::tar_option_get("storage"),
  retrieval = targets::tar_option_get("retrieval"),
  cue = targets::tar_option_get("cue"),
  description = targets::tar_option_get("description")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tar_jags_rep_+3A_name">name</code></td>
<td>
<p>Symbol, base name for the collection of targets.
Serves as a prefix for target names.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_jags_files">jags_files</code></td>
<td>
<p>Character vector of JAGS model files. If you
supply multiple files, each model will run on the one shared dataset
generated by the code in <code>data</code>. If you supply an unnamed vector,
<code>tools::file_path_sans_ext(basename(jags_files))</code> will be used
as target name suffixes. If <code>jags_files</code> is a named vector,
the suffixed will come from <code>names(jags_files)</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_parameters.to.save">parameters.to.save</code></td>
<td>
<p>Model parameters to save, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_data">data</code></td>
<td>
<p>Code to generate the <code>data</code> list for the JAGS model.
Optionally include a <code>.join_data</code> element to join parts of the data
to correspondingly named parameters in the summary output.
See the vignettes for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_batches">batches</code></td>
<td>
<p>Number of batches. Each batch runs a model <code>reps</code> times.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_reps">reps</code></td>
<td>
<p>Number of replications per batch. Ideally, each rep
should produce its own random dataset using the code
supplied to <code>data</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_output">output</code></td>
<td>
<p>Character of length 1 denoting the type of output <code>tibble</code>
to return: <code>"draws"</code> for MCMC samples (which could take up a lot of space)
<code>"summary"</code> for lightweight posterior summary statistics,
and <code>"dic"</code> for the overall deviance information criterion
and effective number of parameters.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_variables">variables</code></td>
<td>
<p>Character vector of model parameter names.
The output posterior summaries are restricted to these variables.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_summaries">summaries</code></td>
<td>
<p>List of summary functions passed to <code>...</code> in
<code>posterior::summarize_draws()</code> through <code style="white-space: pre;">&#8288;$summary()&#8288;</code>
on the <code>CmdStanFit</code> object.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_summary_args">summary_args</code></td>
<td>
<p>List of summary function arguments passed to
<code>.args</code> in <code>posterior::summarize_draws()</code> through <code style="white-space: pre;">&#8288;$summary()&#8288;</code>
on the <code>CmdStanFit</code> object.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_transform">transform</code></td>
<td>
<p>Symbol or <code>NULL</code>, name of a function that accepts
arguments <code>data</code> and <code>draws</code> and returns a data frame. Here,
<code>data</code> is the JAGS data list supplied to the model, and <code>draws</code>
is a data frame with one column per model parameter and one row
per posterior sample. Any arguments other than <code>data</code> and <code>draws</code>
must have valid default values because <code>jagstargets</code> will not
populate them. See the simulation-based calibration discussion
thread at <a href="https://github.com/ropensci/jagstargets/discussions/31">https://github.com/ropensci/jagstargets/discussions/31</a>
for an example.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_combine">combine</code></td>
<td>
<p>Logical, whether to create a target to
combine all the model results
into a single data frame downstream. Convenient, but
duplicates data.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_n.cluster">n.cluster</code></td>
<td>
<p>Number of parallel processes, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_n.chains">n.chains</code></td>
<td>
<p>Number of MCMC chains, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_n.iter">n.iter</code></td>
<td>
<p>Number if iterations (including warmup), passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_n.burnin">n.burnin</code></td>
<td>
<p>Number of warmup iterations, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_n.thin">n.thin</code></td>
<td>
<p>Thinning interval, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_jags.module">jags.module</code></td>
<td>
<p>Character vector of JAGS modules to load, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_inits">inits</code></td>
<td>
<p>Initial values of model parameters, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_rngname">RNGname</code></td>
<td>
<p>Choice of random number generator, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_jags.seed">jags.seed</code></td>
<td>
<p>The <code>jags.seed</code> argument of the <code style="white-space: pre;">&#8288;tar_jags_rep*()&#8288;</code>
functions is deprecated. See the &quot;Seeds&quot; section for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_stdout">stdout</code></td>
<td>
<p>Character of length 1, file path to write the stdout stream
of the model when it runs. Set to <code>NULL</code> to print to the console.
Set to <code>R.utils::nullfile()</code> to suppress stdout.
Does not apply to messages, warnings, or errors.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_stderr">stderr</code></td>
<td>
<p>Character of length 1, file path to write the stderr stream
of the model when it runs. Set to <code>NULL</code> to print to the console.
Set to <code>R.utils::nullfile()</code> to suppress stderr.
Does not apply to messages, warnings, or errors.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_progress.bar">progress.bar</code></td>
<td>
<p>Type of progress bar, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_refresh">refresh</code></td>
<td>
<p>Frequency for refreshing the progress bar, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_tidy_eval">tidy_eval</code></td>
<td>
<p>Logical, whether to enable tidy evaluation
when interpreting <code>command</code> and <code>pattern</code>. If <code>TRUE</code>, you can use the
&quot;bang-bang&quot; operator <code style="white-space: pre;">&#8288;!!&#8288;</code> to programmatically insert
the values of global objects.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_packages">packages</code></td>
<td>
<p>Character vector of packages to load right before
the target runs or the output data is reloaded for
downstream targets. Use <code>tar_option_set()</code> to set packages
globally for all subsequent targets you define.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_library">library</code></td>
<td>
<p>Character vector of library paths to try
when loading <code>packages</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_format">format</code></td>
<td>
<p>Character of length 1, storage format of the data frames
of posterior summaries and other data frames returned by targets.
We recommend efficient data frame formats
such as <code>"feather"</code> or <code>"aws_parquet"</code>. For more on storage formats,
see the help file of <code>targets::tar_target()</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_format_df">format_df</code></td>
<td>
<p>Character of length 1, storage format of the data frame
targets such as posterior draws. We recommend efficient data frame formats
such as <code>"feather"</code> or <code>"aws_parquet"</code>. For more on storage formats,
see the help file of <code>targets::tar_target()</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_repository">repository</code></td>
<td>
<p>Character of length 1, remote repository for target
storage. Choices:
</p>

<ul>
<li> <p><code>"local"</code>: file system of the local machine.
</p>
</li>
<li> <p><code>"aws"</code>: Amazon Web Services (AWS) S3 bucket. Can be configured
with a non-AWS S3 bucket using the <code>endpoint</code> argument of
<code><a href="targets.html#topic+tar_resources_aws">tar_resources_aws()</a></code>, but versioning capabilities may be lost
in doing so.
See the cloud storage section of
<a href="https://books.ropensci.org/targets/data.html">https://books.ropensci.org/targets/data.html</a>
for details for instructions.
</p>
</li>
<li> <p><code>"gcp"</code>: Google Cloud Platform storage bucket.
See the cloud storage section of
<a href="https://books.ropensci.org/targets/data.html">https://books.ropensci.org/targets/data.html</a>
for details for instructions.
</p>
</li>
<li><p> A character string from <code><a href="targets.html#topic+tar_repository_cas">tar_repository_cas()</a></code> for content-addressable
storage.
</p>
</li></ul>

<p>Note: if <code>repository</code> is not <code>"local"</code> and <code>format</code> is <code>"file"</code>
then the target should create a single output file.
That output file is uploaded to the cloud and tracked for changes
where it exists in the cloud. The local file is deleted after
the target runs.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_error">error</code></td>
<td>
<p>Character of length 1, what to do if the target
stops and throws an error. Options:
</p>

<ul>
<li> <p><code>"stop"</code>: the whole pipeline stops and throws an error.
</p>
</li>
<li> <p><code>"continue"</code>: the whole pipeline keeps going.
</p>
</li>
<li> <p><code>"null"</code>: The errored target continues and returns <code>NULL</code>.
The data hash is deliberately wrong so the target is not
up to date for the next run of the pipeline. In addition,
as of version 1.8.0.9011, a value of <code>NULL</code> is given
to upstream dependencies with <code>error = "null"</code> if loading fails.
</p>
</li>
<li> <p><code>"abridge"</code>: any currently running targets keep running,
but no new targets launch after that.
</p>
</li>
<li> <p><code>"trim"</code>: all currently running targets stay running. A queued
target is allowed to start if:
</p>

<ol>
<li><p> It is not downstream of the error, and
</p>
</li>
<li><p> It is not a sibling branch from the same <code><a href="targets.html#topic+tar_target">tar_target()</a></code> call
(if the error happened in a dynamic branch).
</p>
</li></ol>

<p>The idea is to avoid starting any new work that the immediate error
impacts. <code>error = "trim"</code> is just like <code>error = "abridge"</code>,
but it allows potentially healthy regions of the dependency graph
to begin running.
(Visit <a href="https://books.ropensci.org/targets/debugging.html">https://books.ropensci.org/targets/debugging.html</a>
to learn how to debug targets using saved workspaces.)
</p>
</li></ul>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_memory">memory</code></td>
<td>
<p>Character of length 1, memory strategy. Possible values:
</p>

<ul>
<li> <p><code>"auto"</code>: new in <code>targets</code> version 1.8.0.9011, <code>memory = "auto"</code>
is equivalent to <code>memory = "transient"</code> for dynamic branching
(a non-null <code>pattern</code> argument) and <code>memory = "persistent"</code>
for targets that do not use dynamic branching.
</p>
</li>
<li> <p><code>"persistent"</code>: the target stays in memory
until the end of the pipeline (unless <code>storage</code> is <code>"worker"</code>,
in which case <code>targets</code> unloads the value from memory
right after storing it in order to avoid sending
copious data over a network).
</p>
</li>
<li> <p><code>"transient"</code>: the target gets unloaded
after every new target completes.
Either way, the target gets automatically loaded into memory
whenever another target needs the value.
</p>
</li></ul>

<p>For cloud-based dynamic files
(e.g. <code>format = "file"</code> with <code>repository = "aws"</code>),
the <code>memory</code> option applies to the
temporary local copy of the file:
<code>"persistent"</code> means it remains until the end of the pipeline
and is then deleted,
and <code>"transient"</code> means it gets deleted as soon as possible.
The former conserves bandwidth,
and the latter conserves local storage.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_garbage_collection">garbage_collection</code></td>
<td>
<p>Logical: <code>TRUE</code> to run <code>base::gc()</code>
just before the target runs,
<code>FALSE</code> to omit garbage collection.
In the case of high-performance computing,
<code>gc()</code> runs both locally and on the parallel worker.
All this garbage collection is skipped if the actual target
is skipped in the pipeline.
Non-logical values of <code>garbage_collection</code> are converted to <code>TRUE</code> or
<code>FALSE</code> using <code>isTRUE()</code>. In other words, non-logical values are
converted <code>FALSE</code>. For example, <code>garbage_collection = 2</code>
is equivalent to <code>garbage_collection = FALSE</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_deployment">deployment</code></td>
<td>
<p>Character of length 1. If <code>deployment</code> is
<code>"main"</code>, then the target will run on the central controlling R process.
Otherwise, if <code>deployment</code> is <code>"worker"</code> and you set up the pipeline
with distributed/parallel computing, then
the target runs on a parallel worker. For more on distributed/parallel
computing in <code>targets</code>, please visit
<a href="https://books.ropensci.org/targets/crew.html">https://books.ropensci.org/targets/crew.html</a>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_priority">priority</code></td>
<td>
<p>Numeric of length 1 between 0 and 1. Controls which
targets get deployed first when multiple competing targets are ready
simultaneously. Targets with priorities closer to 1 get dispatched earlier
(and polled earlier in <code><a href="targets.html#topic+tar_make_future">tar_make_future()</a></code>).</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_resources">resources</code></td>
<td>
<p>Object returned by <code>tar_resources()</code>
with optional settings for high-performance computing
functionality, alternative data storage formats,
and other optional capabilities of <code>targets</code>.
See <code>tar_resources()</code> for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_storage">storage</code></td>
<td>
<p>Character string to control when the output of the target
is saved to storage. Only relevant when using <code>targets</code>
with parallel workers (<a href="https://books.ropensci.org/targets/crew.html">https://books.ropensci.org/targets/crew.html</a>).
Must be one of the following values:
</p>

<ul>
<li> <p><code>"main"</code>: the target's return value is sent back to the
host machine and saved/uploaded locally.
</p>
</li>
<li> <p><code>"worker"</code>: the worker saves/uploads the value.
</p>
</li>
<li> <p><code>"none"</code>: <code>targets</code> makes no attempt to save the result
of the target to storage in the location where <code>targets</code>
expects it to be. Saving to storage is the responsibility
of the user. Use with caution.
</p>
</li></ul>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_retrieval">retrieval</code></td>
<td>
<p>Character string to control when the current target
loads its dependencies into memory before running.
(Here, a &quot;dependency&quot; is another target upstream that the current one
depends on.) Only relevant when using <code>targets</code>
with parallel workers (<a href="https://books.ropensci.org/targets/crew.html">https://books.ropensci.org/targets/crew.html</a>).
Must be one of the following values:
</p>

<ul>
<li> <p><code>"main"</code>: the target's dependencies are loaded on the host machine
and sent to the worker before the target runs.
</p>
</li>
<li> <p><code>"worker"</code>: the worker loads the target's dependencies.
</p>
</li>
<li> <p><code>"none"</code>: <code>targets</code> makes no attempt to load its
dependencies. With <code>retrieval = "none"</code>, loading dependencies
is the responsibility of the user. Use with caution.
</p>
</li></ul>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_cue">cue</code></td>
<td>
<p>An optional object from <code>tar_cue()</code> to customize the
rules that decide whether the target is up to date.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_+3A_description">description</code></td>
<td>
<p>Character of length 1, a custom free-form human-readable
text description of the target. Descriptions appear as target labels
in functions like <code><a href="targets.html#topic+tar_manifest">tar_manifest()</a></code> and <code><a href="targets.html#topic+tar_visnetwork">tar_visnetwork()</a></code>,
and they let you select subsets of targets for the <code>names</code> argument of
functions like <code><a href="targets.html#topic+tar_make">tar_make()</a></code>. For example,
<code>tar_manifest(names = tar_described_as(starts_with("survival model")))</code>
lists all the targets whose descriptions start with the character
string <code>"survival model"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>tar_jags_rep(name = x, jags_files = "y.jags")</code>
returns a list of <code>targets::tar_target()</code> objects:
</p>

<ul>
<li> <p><code>x_file_y</code>: reproducibly track the jags model file.
</p>
</li>
<li> <p><code>x_lines_y</code>: contents of the jags model file.
</p>
</li>
<li> <p><code>x_data</code>: dynamic branching target with simulated datasets.
</p>
</li>
<li> <p><code>x_y</code>: dynamic branching target with tidy data frames of MCMC summaries.
</p>
</li>
<li> <p><code>x</code>: combine all the model-specific summary targets into
a single data frame with columns to distinguish among the models.
Suppressed if <code>combine</code> is <code>FALSE</code>.
</p>
</li></ul>



<h3>Seeds</h3>

<p>Rep-specific random number generator seeds for the data and models
are automatically set based on the batch, rep,
parent target name, and <code>tar_option_get("seed")</code>. This ensures
the rep-specific seeds do not change when you change the batching
configuration (e.g. 40 batches of 10 reps each vs 20 batches of 20
reps each). Each data seed is in the <code>.seed</code> list element of the output,
and each JAGS seed is in the .seed column of each JAGS model output.
</p>

<hr>
<h2 id='tar_jags_rep_data_batch'>Generate a batch of data</h2><span id='topic+tar_jags_rep_data_batch'></span>

<h3>Description</h3>

<p>Not a user-side function. Do not invoke directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tar_jags_rep_data_batch(reps, batch, command)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tar_jags_rep_data_batch_+3A_reps">reps</code></td>
<td>
<p>Positive integer of length 1, number of reps to run.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_data_batch_+3A_batch">batch</code></td>
<td>
<p>Positive integer of length 1, index of the current batch.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_data_batch_+3A_command">command</code></td>
<td>
<p>R code to run to generate one dataset.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of JAGS datasets containing data and dataset IDs.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (identical(Sys.getenv("TAR_JAGS_EXAMPLES"), "true")) {
tar_jags_rep_data_batch(2, 1, tar_jags_example_data())
}
</code></pre>

<hr>
<h2 id='tar_jags_rep_dic'>Tidy DIC output from multiple MCMCs per model</h2><span id='topic+tar_jags_rep_dic'></span>

<h3>Description</h3>

<p>Run multiple MCMCs on simulated datasets
and return DIC and the effective number of parameters
for each run.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tar_jags_rep_dic(
  name,
  jags_files,
  parameters.to.save,
  data = list(),
  batches = 1L,
  reps = 1L,
  combine = TRUE,
  n.cluster = 1,
  n.chains = 3,
  n.iter = 2000,
  n.burnin = as.integer(n.iter/2),
  n.thin = 1,
  jags.module = c("glm", "dic"),
  inits = NULL,
  RNGname = c("Wichmann-Hill", "Marsaglia-Multicarry", "Super-Duper", "Mersenne-Twister"),
  jags.seed = NULL,
  stdout = NULL,
  stderr = NULL,
  progress.bar = "text",
  refresh = 0,
  tidy_eval = targets::tar_option_get("tidy_eval"),
  packages = targets::tar_option_get("packages"),
  library = targets::tar_option_get("library"),
  format = "qs",
  format_df = "fst_tbl",
  repository = targets::tar_option_get("repository"),
  error = targets::tar_option_get("error"),
  memory = targets::tar_option_get("memory"),
  garbage_collection = targets::tar_option_get("garbage_collection"),
  deployment = targets::tar_option_get("deployment"),
  priority = targets::tar_option_get("priority"),
  resources = targets::tar_option_get("resources"),
  storage = targets::tar_option_get("storage"),
  retrieval = targets::tar_option_get("retrieval"),
  cue = targets::tar_option_get("cue"),
  description = targets::tar_option_get("description")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tar_jags_rep_dic_+3A_name">name</code></td>
<td>
<p>Symbol, base name for the collection of targets.
Serves as a prefix for target names.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_jags_files">jags_files</code></td>
<td>
<p>Character vector of JAGS model files. If you
supply multiple files, each model will run on the one shared dataset
generated by the code in <code>data</code>. If you supply an unnamed vector,
<code>tools::file_path_sans_ext(basename(jags_files))</code> will be used
as target name suffixes. If <code>jags_files</code> is a named vector,
the suffixed will come from <code>names(jags_files)</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_parameters.to.save">parameters.to.save</code></td>
<td>
<p>Model parameters to save, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_data">data</code></td>
<td>
<p>Code to generate the <code>data</code> list for the JAGS model.
Optionally include a <code>.join_data</code> element to join parts of the data
to correspondingly named parameters in the summary output.
See the vignettes for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_batches">batches</code></td>
<td>
<p>Number of batches. Each batch runs a model <code>reps</code> times.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_reps">reps</code></td>
<td>
<p>Number of replications per batch. Ideally, each rep
should produce its own random dataset using the code
supplied to <code>data</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_combine">combine</code></td>
<td>
<p>Logical, whether to create a target to
combine all the model results
into a single data frame downstream. Convenient, but
duplicates data.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_n.cluster">n.cluster</code></td>
<td>
<p>Number of parallel processes, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_n.chains">n.chains</code></td>
<td>
<p>Number of MCMC chains, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_n.iter">n.iter</code></td>
<td>
<p>Number if iterations (including warmup), passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_n.burnin">n.burnin</code></td>
<td>
<p>Number of warmup iterations, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_n.thin">n.thin</code></td>
<td>
<p>Thinning interval, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_jags.module">jags.module</code></td>
<td>
<p>Character vector of JAGS modules to load, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_inits">inits</code></td>
<td>
<p>Initial values of model parameters, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_rngname">RNGname</code></td>
<td>
<p>Choice of random number generator, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_jags.seed">jags.seed</code></td>
<td>
<p>The <code>jags.seed</code> argument of the <code style="white-space: pre;">&#8288;tar_jags_rep*()&#8288;</code>
functions is deprecated. See the &quot;Seeds&quot; section for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_stdout">stdout</code></td>
<td>
<p>Character of length 1, file path to write the stdout stream
of the model when it runs. Set to <code>NULL</code> to print to the console.
Set to <code>R.utils::nullfile()</code> to suppress stdout.
Does not apply to messages, warnings, or errors.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_stderr">stderr</code></td>
<td>
<p>Character of length 1, file path to write the stderr stream
of the model when it runs. Set to <code>NULL</code> to print to the console.
Set to <code>R.utils::nullfile()</code> to suppress stderr.
Does not apply to messages, warnings, or errors.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_progress.bar">progress.bar</code></td>
<td>
<p>Type of progress bar, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_refresh">refresh</code></td>
<td>
<p>Frequency for refreshing the progress bar, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_tidy_eval">tidy_eval</code></td>
<td>
<p>Logical, whether to enable tidy evaluation
when interpreting <code>command</code> and <code>pattern</code>. If <code>TRUE</code>, you can use the
&quot;bang-bang&quot; operator <code style="white-space: pre;">&#8288;!!&#8288;</code> to programmatically insert
the values of global objects.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_packages">packages</code></td>
<td>
<p>Character vector of packages to load right before
the target runs or the output data is reloaded for
downstream targets. Use <code>tar_option_set()</code> to set packages
globally for all subsequent targets you define.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_library">library</code></td>
<td>
<p>Character vector of library paths to try
when loading <code>packages</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_format">format</code></td>
<td>
<p>Character of length 1, storage format of the data frames
of posterior summaries and other data frames returned by targets.
We recommend efficient data frame formats
such as <code>"feather"</code> or <code>"aws_parquet"</code>. For more on storage formats,
see the help file of <code>targets::tar_target()</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_format_df">format_df</code></td>
<td>
<p>Character of length 1, storage format of the data frame
targets such as posterior draws. We recommend efficient data frame formats
such as <code>"feather"</code> or <code>"aws_parquet"</code>. For more on storage formats,
see the help file of <code>targets::tar_target()</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_repository">repository</code></td>
<td>
<p>Character of length 1, remote repository for target
storage. Choices:
</p>

<ul>
<li> <p><code>"local"</code>: file system of the local machine.
</p>
</li>
<li> <p><code>"aws"</code>: Amazon Web Services (AWS) S3 bucket. Can be configured
with a non-AWS S3 bucket using the <code>endpoint</code> argument of
<code><a href="targets.html#topic+tar_resources_aws">tar_resources_aws()</a></code>, but versioning capabilities may be lost
in doing so.
See the cloud storage section of
<a href="https://books.ropensci.org/targets/data.html">https://books.ropensci.org/targets/data.html</a>
for details for instructions.
</p>
</li>
<li> <p><code>"gcp"</code>: Google Cloud Platform storage bucket.
See the cloud storage section of
<a href="https://books.ropensci.org/targets/data.html">https://books.ropensci.org/targets/data.html</a>
for details for instructions.
</p>
</li>
<li><p> A character string from <code><a href="targets.html#topic+tar_repository_cas">tar_repository_cas()</a></code> for content-addressable
storage.
</p>
</li></ul>

<p>Note: if <code>repository</code> is not <code>"local"</code> and <code>format</code> is <code>"file"</code>
then the target should create a single output file.
That output file is uploaded to the cloud and tracked for changes
where it exists in the cloud. The local file is deleted after
the target runs.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_error">error</code></td>
<td>
<p>Character of length 1, what to do if the target
stops and throws an error. Options:
</p>

<ul>
<li> <p><code>"stop"</code>: the whole pipeline stops and throws an error.
</p>
</li>
<li> <p><code>"continue"</code>: the whole pipeline keeps going.
</p>
</li>
<li> <p><code>"null"</code>: The errored target continues and returns <code>NULL</code>.
The data hash is deliberately wrong so the target is not
up to date for the next run of the pipeline. In addition,
as of version 1.8.0.9011, a value of <code>NULL</code> is given
to upstream dependencies with <code>error = "null"</code> if loading fails.
</p>
</li>
<li> <p><code>"abridge"</code>: any currently running targets keep running,
but no new targets launch after that.
</p>
</li>
<li> <p><code>"trim"</code>: all currently running targets stay running. A queued
target is allowed to start if:
</p>

<ol>
<li><p> It is not downstream of the error, and
</p>
</li>
<li><p> It is not a sibling branch from the same <code><a href="targets.html#topic+tar_target">tar_target()</a></code> call
(if the error happened in a dynamic branch).
</p>
</li></ol>

<p>The idea is to avoid starting any new work that the immediate error
impacts. <code>error = "trim"</code> is just like <code>error = "abridge"</code>,
but it allows potentially healthy regions of the dependency graph
to begin running.
(Visit <a href="https://books.ropensci.org/targets/debugging.html">https://books.ropensci.org/targets/debugging.html</a>
to learn how to debug targets using saved workspaces.)
</p>
</li></ul>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_memory">memory</code></td>
<td>
<p>Character of length 1, memory strategy. Possible values:
</p>

<ul>
<li> <p><code>"auto"</code>: new in <code>targets</code> version 1.8.0.9011, <code>memory = "auto"</code>
is equivalent to <code>memory = "transient"</code> for dynamic branching
(a non-null <code>pattern</code> argument) and <code>memory = "persistent"</code>
for targets that do not use dynamic branching.
</p>
</li>
<li> <p><code>"persistent"</code>: the target stays in memory
until the end of the pipeline (unless <code>storage</code> is <code>"worker"</code>,
in which case <code>targets</code> unloads the value from memory
right after storing it in order to avoid sending
copious data over a network).
</p>
</li>
<li> <p><code>"transient"</code>: the target gets unloaded
after every new target completes.
Either way, the target gets automatically loaded into memory
whenever another target needs the value.
</p>
</li></ul>

<p>For cloud-based dynamic files
(e.g. <code>format = "file"</code> with <code>repository = "aws"</code>),
the <code>memory</code> option applies to the
temporary local copy of the file:
<code>"persistent"</code> means it remains until the end of the pipeline
and is then deleted,
and <code>"transient"</code> means it gets deleted as soon as possible.
The former conserves bandwidth,
and the latter conserves local storage.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_garbage_collection">garbage_collection</code></td>
<td>
<p>Logical: <code>TRUE</code> to run <code>base::gc()</code>
just before the target runs,
<code>FALSE</code> to omit garbage collection.
In the case of high-performance computing,
<code>gc()</code> runs both locally and on the parallel worker.
All this garbage collection is skipped if the actual target
is skipped in the pipeline.
Non-logical values of <code>garbage_collection</code> are converted to <code>TRUE</code> or
<code>FALSE</code> using <code>isTRUE()</code>. In other words, non-logical values are
converted <code>FALSE</code>. For example, <code>garbage_collection = 2</code>
is equivalent to <code>garbage_collection = FALSE</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_deployment">deployment</code></td>
<td>
<p>Character of length 1. If <code>deployment</code> is
<code>"main"</code>, then the target will run on the central controlling R process.
Otherwise, if <code>deployment</code> is <code>"worker"</code> and you set up the pipeline
with distributed/parallel computing, then
the target runs on a parallel worker. For more on distributed/parallel
computing in <code>targets</code>, please visit
<a href="https://books.ropensci.org/targets/crew.html">https://books.ropensci.org/targets/crew.html</a>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_priority">priority</code></td>
<td>
<p>Numeric of length 1 between 0 and 1. Controls which
targets get deployed first when multiple competing targets are ready
simultaneously. Targets with priorities closer to 1 get dispatched earlier
(and polled earlier in <code><a href="targets.html#topic+tar_make_future">tar_make_future()</a></code>).</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_resources">resources</code></td>
<td>
<p>Object returned by <code>tar_resources()</code>
with optional settings for high-performance computing
functionality, alternative data storage formats,
and other optional capabilities of <code>targets</code>.
See <code>tar_resources()</code> for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_storage">storage</code></td>
<td>
<p>Character string to control when the output of the target
is saved to storage. Only relevant when using <code>targets</code>
with parallel workers (<a href="https://books.ropensci.org/targets/crew.html">https://books.ropensci.org/targets/crew.html</a>).
Must be one of the following values:
</p>

<ul>
<li> <p><code>"main"</code>: the target's return value is sent back to the
host machine and saved/uploaded locally.
</p>
</li>
<li> <p><code>"worker"</code>: the worker saves/uploads the value.
</p>
</li>
<li> <p><code>"none"</code>: <code>targets</code> makes no attempt to save the result
of the target to storage in the location where <code>targets</code>
expects it to be. Saving to storage is the responsibility
of the user. Use with caution.
</p>
</li></ul>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_retrieval">retrieval</code></td>
<td>
<p>Character string to control when the current target
loads its dependencies into memory before running.
(Here, a &quot;dependency&quot; is another target upstream that the current one
depends on.) Only relevant when using <code>targets</code>
with parallel workers (<a href="https://books.ropensci.org/targets/crew.html">https://books.ropensci.org/targets/crew.html</a>).
Must be one of the following values:
</p>

<ul>
<li> <p><code>"main"</code>: the target's dependencies are loaded on the host machine
and sent to the worker before the target runs.
</p>
</li>
<li> <p><code>"worker"</code>: the worker loads the target's dependencies.
</p>
</li>
<li> <p><code>"none"</code>: <code>targets</code> makes no attempt to load its
dependencies. With <code>retrieval = "none"</code>, loading dependencies
is the responsibility of the user. Use with caution.
</p>
</li></ul>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_cue">cue</code></td>
<td>
<p>An optional object from <code>tar_cue()</code> to customize the
rules that decide whether the target is up to date.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_dic_+3A_description">description</code></td>
<td>
<p>Character of length 1, a custom free-form human-readable
text description of the target. Descriptions appear as target labels
in functions like <code><a href="targets.html#topic+tar_manifest">tar_manifest()</a></code> and <code><a href="targets.html#topic+tar_visnetwork">tar_visnetwork()</a></code>,
and they let you select subsets of targets for the <code>names</code> argument of
functions like <code><a href="targets.html#topic+tar_make">tar_make()</a></code>. For example,
<code>tar_manifest(names = tar_described_as(starts_with("survival model")))</code>
lists all the targets whose descriptions start with the character
string <code>"survival model"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The MCMC targets use <code>R2jags::jags()</code> if <code>n.cluster</code> is <code>1</code> and
<code>R2jags::jags.parallel()</code> otherwise. Most arguments to <code>tar_jags()</code>
are forwarded to these functions.
</p>


<h3>Value</h3>

<p><code>tar_jags_rep_dic()</code> returns list of target objects.
See the &quot;Target objects&quot; section for
background.
The target names use the <code>name</code> argument as a prefix, and the individual
elements of <code>jags_files</code> appear in the suffixes where applicable.
As an example, the specific target objects returned by
<code>tar_jags_rep_dic(name = x, jags_files = "y.jags")</code>
are as follows.
</p>

<ul>
<li> <p><code>x_file_y</code>: reproducibly track the JAGS model file. Returns
a character vector of length 1 with the path to the JAGS
model file.
</p>
</li>
<li> <p><code>x_lines_y</code>: read the contents of the JAGS model file
for safe transport to parallel workers.
Returns a character vector of lines in the model file.
</p>
</li>
<li> <p><code>x_data</code>: use dynamic branching to generate multiple JAGS
datasets from the R expression in the <code>data</code> argument.
Each dynamic branch returns a batch of JAGS data lists.
</p>
</li>
<li> <p><code>x_y</code>: run JAGS on each dataset from <code>x_data</code>.
Each dynamic branch returns a tidy data frame of DIC
results for each batch of data.
</p>
</li>
<li> <p><code>x</code>: combine all the batches from <code>x_y</code> into a non-dynamic target.
Suppressed if <code>combine</code> is <code>FALSE</code>.
Returns a long tidy data frame with all DIC info
from all the branches of <code>x_y</code>.
</p>
</li></ul>



<h3>Seeds</h3>

<p>Rep-specific random number generator seeds for the data and models
are automatically set based on the batch, rep,
parent target name, and <code>tar_option_get("seed")</code>. This ensures
the rep-specific seeds do not change when you change the batching
configuration (e.g. 40 batches of 10 reps each vs 20 batches of 20
reps each). Each data seed is in the <code>.seed</code> list element of the output,
and each JAGS seed is in the .seed column of each JAGS model output.
</p>


<h3>Target objects</h3>

<p>Most <code>stantargets</code> functions are target factories,
which means they return target objects
or lists of target objects.
Target objects represent skippable steps of the analysis pipeline
as described at <a href="https://books.ropensci.org/targets/">https://books.ropensci.org/targets/</a>.
Please read the walkthrough at
<a href="https://books.ropensci.org/targets/walkthrough.html">https://books.ropensci.org/targets/walkthrough.html</a>
to understand the role of target objects in analysis pipelines.
</p>
<p>For developers,
<a href="https://wlandau.github.io/targetopia/contributing.html#target-factories">https://wlandau.github.io/targetopia/contributing.html#target-factories</a>
explains target factories (functions like this one which generate targets)
and the design specification at
<a href="https://books.ropensci.org/targets-design/">https://books.ropensci.org/targets-design/</a>
details the structure and composition of target objects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (identical(Sys.getenv("TAR_JAGS_EXAMPLES"), "true")) {
targets::tar_dir({ # tar_dir() runs code from a temporary directory.
targets::tar_script({
library(jagstargets)
# Do not use a temp file for a real project
# or else your targets will always rerun.
tmp &lt;- tempfile(pattern = "", fileext = ".jags")
tar_jags_example_file(tmp)
list(
  tar_jags_rep_dic(
    your_model,
    jags_files = tmp,
    data = tar_jags_example_data(),
    parameters.to.save = "beta",
    batches = 2,
    reps = 2,
    stdout = R.utils::nullfile(),
    stderr = R.utils::nullfile()
  )
)
}, ask = FALSE)
targets::tar_make()
})
}
</code></pre>

<hr>
<h2 id='tar_jags_rep_draws'>Tidy posterior draws from multiple MCMCs per model</h2><span id='topic+tar_jags_rep_draws'></span>

<h3>Description</h3>

<p>Run multiple MCMCs on simulated datasets
and return posterior samples and the effective number of parameters
for each run.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tar_jags_rep_draws(
  name,
  jags_files,
  parameters.to.save,
  data = list(),
  batches = 1L,
  reps = 1L,
  transform = NULL,
  combine = FALSE,
  n.cluster = 1,
  n.chains = 3,
  n.iter = 2000,
  n.burnin = as.integer(n.iter/2),
  n.thin = 1,
  jags.module = c("glm", "dic"),
  inits = NULL,
  RNGname = c("Wichmann-Hill", "Marsaglia-Multicarry", "Super-Duper", "Mersenne-Twister"),
  jags.seed = NULL,
  stdout = NULL,
  stderr = NULL,
  progress.bar = "text",
  refresh = 0,
  tidy_eval = targets::tar_option_get("tidy_eval"),
  packages = targets::tar_option_get("packages"),
  library = targets::tar_option_get("library"),
  format = "qs",
  format_df = "fst_tbl",
  repository = targets::tar_option_get("repository"),
  error = targets::tar_option_get("error"),
  memory = "transient",
  garbage_collection = targets::tar_option_get("garbage_collection"),
  deployment = targets::tar_option_get("deployment"),
  priority = targets::tar_option_get("priority"),
  resources = targets::tar_option_get("resources"),
  storage = targets::tar_option_get("storage"),
  retrieval = targets::tar_option_get("retrieval"),
  cue = targets::tar_option_get("cue"),
  description = targets::tar_option_get("description")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tar_jags_rep_draws_+3A_name">name</code></td>
<td>
<p>Symbol, base name for the collection of targets.
Serves as a prefix for target names.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_jags_files">jags_files</code></td>
<td>
<p>Character vector of JAGS model files. If you
supply multiple files, each model will run on the one shared dataset
generated by the code in <code>data</code>. If you supply an unnamed vector,
<code>tools::file_path_sans_ext(basename(jags_files))</code> will be used
as target name suffixes. If <code>jags_files</code> is a named vector,
the suffixed will come from <code>names(jags_files)</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_parameters.to.save">parameters.to.save</code></td>
<td>
<p>Model parameters to save, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_data">data</code></td>
<td>
<p>Code to generate the <code>data</code> list for the JAGS model.
Optionally include a <code>.join_data</code> element to join parts of the data
to correspondingly named parameters in the summary output.
See the vignettes for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_batches">batches</code></td>
<td>
<p>Number of batches. Each batch runs a model <code>reps</code> times.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_reps">reps</code></td>
<td>
<p>Number of replications per batch. Ideally, each rep
should produce its own random dataset using the code
supplied to <code>data</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_transform">transform</code></td>
<td>
<p>Symbol or <code>NULL</code>, name of a function that accepts
arguments <code>data</code> and <code>draws</code> and returns a data frame. Here,
<code>data</code> is the JAGS data list supplied to the model, and <code>draws</code>
is a data frame with one column per model parameter and one row
per posterior sample. Any arguments other than <code>data</code> and <code>draws</code>
must have valid default values because <code>jagstargets</code> will not
populate them. See the simulation-based calibration discussion
thread at <a href="https://github.com/ropensci/jagstargets/discussions/31">https://github.com/ropensci/jagstargets/discussions/31</a>
for an example.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_combine">combine</code></td>
<td>
<p>Logical, whether to create a target to
combine all the model results
into a single data frame downstream. Convenient, but
duplicates data.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_n.cluster">n.cluster</code></td>
<td>
<p>Number of parallel processes, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_n.chains">n.chains</code></td>
<td>
<p>Number of MCMC chains, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_n.iter">n.iter</code></td>
<td>
<p>Number if iterations (including warmup), passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_n.burnin">n.burnin</code></td>
<td>
<p>Number of warmup iterations, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_n.thin">n.thin</code></td>
<td>
<p>Thinning interval, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_jags.module">jags.module</code></td>
<td>
<p>Character vector of JAGS modules to load, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_inits">inits</code></td>
<td>
<p>Initial values of model parameters, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_rngname">RNGname</code></td>
<td>
<p>Choice of random number generator, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_jags.seed">jags.seed</code></td>
<td>
<p>The <code>jags.seed</code> argument of the <code style="white-space: pre;">&#8288;tar_jags_rep*()&#8288;</code>
functions is deprecated. See the &quot;Seeds&quot; section for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_stdout">stdout</code></td>
<td>
<p>Character of length 1, file path to write the stdout stream
of the model when it runs. Set to <code>NULL</code> to print to the console.
Set to <code>R.utils::nullfile()</code> to suppress stdout.
Does not apply to messages, warnings, or errors.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_stderr">stderr</code></td>
<td>
<p>Character of length 1, file path to write the stderr stream
of the model when it runs. Set to <code>NULL</code> to print to the console.
Set to <code>R.utils::nullfile()</code> to suppress stderr.
Does not apply to messages, warnings, or errors.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_progress.bar">progress.bar</code></td>
<td>
<p>Type of progress bar, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_refresh">refresh</code></td>
<td>
<p>Frequency for refreshing the progress bar, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_tidy_eval">tidy_eval</code></td>
<td>
<p>Logical, whether to enable tidy evaluation
when interpreting <code>command</code> and <code>pattern</code>. If <code>TRUE</code>, you can use the
&quot;bang-bang&quot; operator <code style="white-space: pre;">&#8288;!!&#8288;</code> to programmatically insert
the values of global objects.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_packages">packages</code></td>
<td>
<p>Character vector of packages to load right before
the target runs or the output data is reloaded for
downstream targets. Use <code>tar_option_set()</code> to set packages
globally for all subsequent targets you define.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_library">library</code></td>
<td>
<p>Character vector of library paths to try
when loading <code>packages</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_format">format</code></td>
<td>
<p>Character of length 1, storage format of the data frames
of posterior summaries and other data frames returned by targets.
We recommend efficient data frame formats
such as <code>"feather"</code> or <code>"aws_parquet"</code>. For more on storage formats,
see the help file of <code>targets::tar_target()</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_format_df">format_df</code></td>
<td>
<p>Character of length 1, storage format of the data frame
targets such as posterior draws. We recommend efficient data frame formats
such as <code>"feather"</code> or <code>"aws_parquet"</code>. For more on storage formats,
see the help file of <code>targets::tar_target()</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_repository">repository</code></td>
<td>
<p>Character of length 1, remote repository for target
storage. Choices:
</p>

<ul>
<li> <p><code>"local"</code>: file system of the local machine.
</p>
</li>
<li> <p><code>"aws"</code>: Amazon Web Services (AWS) S3 bucket. Can be configured
with a non-AWS S3 bucket using the <code>endpoint</code> argument of
<code><a href="targets.html#topic+tar_resources_aws">tar_resources_aws()</a></code>, but versioning capabilities may be lost
in doing so.
See the cloud storage section of
<a href="https://books.ropensci.org/targets/data.html">https://books.ropensci.org/targets/data.html</a>
for details for instructions.
</p>
</li>
<li> <p><code>"gcp"</code>: Google Cloud Platform storage bucket.
See the cloud storage section of
<a href="https://books.ropensci.org/targets/data.html">https://books.ropensci.org/targets/data.html</a>
for details for instructions.
</p>
</li>
<li><p> A character string from <code><a href="targets.html#topic+tar_repository_cas">tar_repository_cas()</a></code> for content-addressable
storage.
</p>
</li></ul>

<p>Note: if <code>repository</code> is not <code>"local"</code> and <code>format</code> is <code>"file"</code>
then the target should create a single output file.
That output file is uploaded to the cloud and tracked for changes
where it exists in the cloud. The local file is deleted after
the target runs.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_error">error</code></td>
<td>
<p>Character of length 1, what to do if the target
stops and throws an error. Options:
</p>

<ul>
<li> <p><code>"stop"</code>: the whole pipeline stops and throws an error.
</p>
</li>
<li> <p><code>"continue"</code>: the whole pipeline keeps going.
</p>
</li>
<li> <p><code>"null"</code>: The errored target continues and returns <code>NULL</code>.
The data hash is deliberately wrong so the target is not
up to date for the next run of the pipeline. In addition,
as of version 1.8.0.9011, a value of <code>NULL</code> is given
to upstream dependencies with <code>error = "null"</code> if loading fails.
</p>
</li>
<li> <p><code>"abridge"</code>: any currently running targets keep running,
but no new targets launch after that.
</p>
</li>
<li> <p><code>"trim"</code>: all currently running targets stay running. A queued
target is allowed to start if:
</p>

<ol>
<li><p> It is not downstream of the error, and
</p>
</li>
<li><p> It is not a sibling branch from the same <code><a href="targets.html#topic+tar_target">tar_target()</a></code> call
(if the error happened in a dynamic branch).
</p>
</li></ol>

<p>The idea is to avoid starting any new work that the immediate error
impacts. <code>error = "trim"</code> is just like <code>error = "abridge"</code>,
but it allows potentially healthy regions of the dependency graph
to begin running.
(Visit <a href="https://books.ropensci.org/targets/debugging.html">https://books.ropensci.org/targets/debugging.html</a>
to learn how to debug targets using saved workspaces.)
</p>
</li></ul>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_memory">memory</code></td>
<td>
<p>Character of length 1, memory strategy. Possible values:
</p>

<ul>
<li> <p><code>"auto"</code>: new in <code>targets</code> version 1.8.0.9011, <code>memory = "auto"</code>
is equivalent to <code>memory = "transient"</code> for dynamic branching
(a non-null <code>pattern</code> argument) and <code>memory = "persistent"</code>
for targets that do not use dynamic branching.
</p>
</li>
<li> <p><code>"persistent"</code>: the target stays in memory
until the end of the pipeline (unless <code>storage</code> is <code>"worker"</code>,
in which case <code>targets</code> unloads the value from memory
right after storing it in order to avoid sending
copious data over a network).
</p>
</li>
<li> <p><code>"transient"</code>: the target gets unloaded
after every new target completes.
Either way, the target gets automatically loaded into memory
whenever another target needs the value.
</p>
</li></ul>

<p>For cloud-based dynamic files
(e.g. <code>format = "file"</code> with <code>repository = "aws"</code>),
the <code>memory</code> option applies to the
temporary local copy of the file:
<code>"persistent"</code> means it remains until the end of the pipeline
and is then deleted,
and <code>"transient"</code> means it gets deleted as soon as possible.
The former conserves bandwidth,
and the latter conserves local storage.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_garbage_collection">garbage_collection</code></td>
<td>
<p>Logical: <code>TRUE</code> to run <code>base::gc()</code>
just before the target runs,
<code>FALSE</code> to omit garbage collection.
In the case of high-performance computing,
<code>gc()</code> runs both locally and on the parallel worker.
All this garbage collection is skipped if the actual target
is skipped in the pipeline.
Non-logical values of <code>garbage_collection</code> are converted to <code>TRUE</code> or
<code>FALSE</code> using <code>isTRUE()</code>. In other words, non-logical values are
converted <code>FALSE</code>. For example, <code>garbage_collection = 2</code>
is equivalent to <code>garbage_collection = FALSE</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_deployment">deployment</code></td>
<td>
<p>Character of length 1. If <code>deployment</code> is
<code>"main"</code>, then the target will run on the central controlling R process.
Otherwise, if <code>deployment</code> is <code>"worker"</code> and you set up the pipeline
with distributed/parallel computing, then
the target runs on a parallel worker. For more on distributed/parallel
computing in <code>targets</code>, please visit
<a href="https://books.ropensci.org/targets/crew.html">https://books.ropensci.org/targets/crew.html</a>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_priority">priority</code></td>
<td>
<p>Numeric of length 1 between 0 and 1. Controls which
targets get deployed first when multiple competing targets are ready
simultaneously. Targets with priorities closer to 1 get dispatched earlier
(and polled earlier in <code><a href="targets.html#topic+tar_make_future">tar_make_future()</a></code>).</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_resources">resources</code></td>
<td>
<p>Object returned by <code>tar_resources()</code>
with optional settings for high-performance computing
functionality, alternative data storage formats,
and other optional capabilities of <code>targets</code>.
See <code>tar_resources()</code> for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_storage">storage</code></td>
<td>
<p>Character string to control when the output of the target
is saved to storage. Only relevant when using <code>targets</code>
with parallel workers (<a href="https://books.ropensci.org/targets/crew.html">https://books.ropensci.org/targets/crew.html</a>).
Must be one of the following values:
</p>

<ul>
<li> <p><code>"main"</code>: the target's return value is sent back to the
host machine and saved/uploaded locally.
</p>
</li>
<li> <p><code>"worker"</code>: the worker saves/uploads the value.
</p>
</li>
<li> <p><code>"none"</code>: <code>targets</code> makes no attempt to save the result
of the target to storage in the location where <code>targets</code>
expects it to be. Saving to storage is the responsibility
of the user. Use with caution.
</p>
</li></ul>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_retrieval">retrieval</code></td>
<td>
<p>Character string to control when the current target
loads its dependencies into memory before running.
(Here, a &quot;dependency&quot; is another target upstream that the current one
depends on.) Only relevant when using <code>targets</code>
with parallel workers (<a href="https://books.ropensci.org/targets/crew.html">https://books.ropensci.org/targets/crew.html</a>).
Must be one of the following values:
</p>

<ul>
<li> <p><code>"main"</code>: the target's dependencies are loaded on the host machine
and sent to the worker before the target runs.
</p>
</li>
<li> <p><code>"worker"</code>: the worker loads the target's dependencies.
</p>
</li>
<li> <p><code>"none"</code>: <code>targets</code> makes no attempt to load its
dependencies. With <code>retrieval = "none"</code>, loading dependencies
is the responsibility of the user. Use with caution.
</p>
</li></ul>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_cue">cue</code></td>
<td>
<p>An optional object from <code>tar_cue()</code> to customize the
rules that decide whether the target is up to date.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_draws_+3A_description">description</code></td>
<td>
<p>Character of length 1, a custom free-form human-readable
text description of the target. Descriptions appear as target labels
in functions like <code><a href="targets.html#topic+tar_manifest">tar_manifest()</a></code> and <code><a href="targets.html#topic+tar_visnetwork">tar_visnetwork()</a></code>,
and they let you select subsets of targets for the <code>names</code> argument of
functions like <code><a href="targets.html#topic+tar_make">tar_make()</a></code>. For example,
<code>tar_manifest(names = tar_described_as(starts_with("survival model")))</code>
lists all the targets whose descriptions start with the character
string <code>"survival model"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The MCMC targets use <code>R2jags::jags()</code> if <code>n.cluster</code> is <code>1</code> and
<code>R2jags::jags.parallel()</code> otherwise. Most arguments to <code>tar_jags()</code>
are forwarded to these functions.
</p>


<h3>Value</h3>

<p><code>tar_jags_rep_draws()</code> returns list of target objects.
See the &quot;Target objects&quot; section for
background.
The target names use the <code>name</code> argument as a prefix, and the individual
elements of <code>jags_files</code> appear in the suffixes where applicable.
As an example, the specific target objects returned by
<code>tar_jags_rep_dic(name = x, jags_files = "y.jags")</code>
are as follows.
</p>

<ul>
<li> <p><code>x_file_y</code>: reproducibly track the JAGS model file. Returns
a character vector of length 1 with the path to the JAGS
model file.
</p>
</li>
<li> <p><code>x_lines_y</code>: read the contents of the JAGS model file
for safe transport to parallel workers.
Returns a character vector of lines in the model file.
</p>
</li>
<li> <p><code>x_data</code>: use dynamic branching to generate multiple JAGS
datasets from the R expression in the <code>data</code> argument.
Each dynamic branch returns a batch of JAGS data lists.
</p>
</li>
<li> <p><code>x_y</code>: run JAGS on each dataset from <code>x_data</code>.
Each dynamic branch returns a tidy data frame of draws
for each batch of data.
</p>
</li>
<li> <p><code>x</code>: combine all the batches from <code>x_y</code> into a non-dynamic target.
Suppressed if <code>combine</code> is <code>FALSE</code>.
Returns a long tidy data frame with all draws
from all the branches of <code>x_y</code>.
</p>
</li></ul>



<h3>Seeds</h3>

<p>Rep-specific random number generator seeds for the data and models
are automatically set based on the batch, rep,
parent target name, and <code>tar_option_get("seed")</code>. This ensures
the rep-specific seeds do not change when you change the batching
configuration (e.g. 40 batches of 10 reps each vs 20 batches of 20
reps each). Each data seed is in the <code>.seed</code> list element of the output,
and each JAGS seed is in the .seed column of each JAGS model output.
</p>


<h3>Target objects</h3>

<p>Most <code>stantargets</code> functions are target factories,
which means they return target objects
or lists of target objects.
Target objects represent skippable steps of the analysis pipeline
as described at <a href="https://books.ropensci.org/targets/">https://books.ropensci.org/targets/</a>.
Please read the walkthrough at
<a href="https://books.ropensci.org/targets/walkthrough.html">https://books.ropensci.org/targets/walkthrough.html</a>
to understand the role of target objects in analysis pipelines.
</p>
<p>For developers,
<a href="https://wlandau.github.io/targetopia/contributing.html#target-factories">https://wlandau.github.io/targetopia/contributing.html#target-factories</a>
explains target factories (functions like this one which generate targets)
and the design specification at
<a href="https://books.ropensci.org/targets-design/">https://books.ropensci.org/targets-design/</a>
details the structure and composition of target objects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (identical(Sys.getenv("TAR_JAGS_EXAMPLES"), "true")) {
targets::tar_dir({ # tar_dir() runs code from a temporary directory.
targets::tar_script({
library(jagstargets)
# Do not use a temp file for a real project
# or else your targets will always rerun.
tmp &lt;- tempfile(pattern = "", fileext = ".jags")
tar_jags_example_file(tmp)
list(
  tar_jags_rep_draws(
    your_model,
    jags_files = tmp,
    data = tar_jags_example_data(),
    parameters.to.save = "beta",
    batches = 2,
    reps = 2,
    stdout = R.utils::nullfile(),
    stderr = R.utils::nullfile()
  )
)
}, ask = FALSE)
targets::tar_make()
})
}
</code></pre>

<hr>
<h2 id='tar_jags_rep_run'>Run a batch of iterations for a jags model
and return only strategic output.</h2><span id='topic+tar_jags_rep_run'></span>

<h3>Description</h3>

<p>Not a user-side function. Do not invoke directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tar_jags_rep_run(
  jags_lines,
  jags_name,
  jags_file,
  parameters.to.save,
  data,
  variables = NULL,
  summaries = NULL,
  summary_args = NULL,
  transform = NULL,
  reps,
  output,
  n.cluster = n.cluster,
  n.chains = n.chains,
  n.iter = n.iter,
  n.burnin = n.burnin,
  n.thin = n.thin,
  jags.module = jags.module,
  inits = inits,
  RNGname = RNGname,
  stdout = stdout,
  stderr = stderr,
  progress.bar = progress.bar,
  refresh = refresh
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tar_jags_rep_run_+3A_jags_lines">jags_lines</code></td>
<td>
<p>Character vector of lines from a JAGS file.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_run_+3A_jags_name">jags_name</code></td>
<td>
<p>Friendly suffix of the jags model target.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_run_+3A_jags_file">jags_file</code></td>
<td>
<p>Original path to the input jags file.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_run_+3A_parameters.to.save">parameters.to.save</code></td>
<td>
<p>Model parameters to save, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_run_+3A_data">data</code></td>
<td>
<p>A list, the original JAGS dataset.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_run_+3A_variables">variables</code></td>
<td>
<p>Character vector of model parameter names.
The output posterior summaries are restricted to these variables.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_run_+3A_summaries">summaries</code></td>
<td>
<p>List of summary functions passed to <code>...</code> in
<code>posterior::summarize_draws()</code> through <code style="white-space: pre;">&#8288;$summary()&#8288;</code>
on the <code>CmdStanFit</code> object.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_run_+3A_summary_args">summary_args</code></td>
<td>
<p>List of summary function arguments passed to
<code>.args</code> in <code>posterior::summarize_draws()</code> through <code style="white-space: pre;">&#8288;$summary()&#8288;</code>
on the <code>CmdStanFit</code> object.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_run_+3A_transform">transform</code></td>
<td>
<p>Symbol or <code>NULL</code>, name of a function that accepts
arguments <code>data</code> and <code>draws</code> and returns a data frame. Here,
<code>data</code> is the JAGS data list supplied to the model, and <code>draws</code>
is a data frame with one column per model parameter and one row
per posterior sample. Any arguments other than <code>data</code> and <code>draws</code>
must have valid default values because <code>jagstargets</code> will not
populate them. See the simulation-based calibration discussion
thread at <a href="https://github.com/ropensci/jagstargets/discussions/31">https://github.com/ropensci/jagstargets/discussions/31</a>
for an example.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_run_+3A_output">output</code></td>
<td>
<p>Character of length 1 denoting the type of output <code>tibble</code>
to return: <code>"draws"</code> for MCMC samples (which could take up a lot of space)
<code>"summary"</code> for lightweight posterior summary statistics,
and <code>"dic"</code> for the overall deviance information criterion
and effective number of parameters.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_run_+3A_n.cluster">n.cluster</code></td>
<td>
<p>Number of parallel processes, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_run_+3A_n.chains">n.chains</code></td>
<td>
<p>Number of MCMC chains, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_run_+3A_n.iter">n.iter</code></td>
<td>
<p>Number if iterations (including warmup), passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_run_+3A_n.burnin">n.burnin</code></td>
<td>
<p>Number of warmup iterations, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_run_+3A_n.thin">n.thin</code></td>
<td>
<p>Thinning interval, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_run_+3A_jags.module">jags.module</code></td>
<td>
<p>Character vector of JAGS modules to load, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_run_+3A_inits">inits</code></td>
<td>
<p>Initial values of model parameters, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_run_+3A_rngname">RNGname</code></td>
<td>
<p>Choice of random number generator, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_run_+3A_stdout">stdout</code></td>
<td>
<p>Character of length 1, file path to write the stdout stream
of the model when it runs. Set to <code>NULL</code> to print to the console.
Set to <code>R.utils::nullfile()</code> to suppress stdout.
Does not apply to messages, warnings, or errors.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_run_+3A_stderr">stderr</code></td>
<td>
<p>Character of length 1, file path to write the stderr stream
of the model when it runs. Set to <code>NULL</code> to print to the console.
Set to <code>R.utils::nullfile()</code> to suppress stderr.
Does not apply to messages, warnings, or errors.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_run_+3A_progress.bar">progress.bar</code></td>
<td>
<p>Type of progress bar, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_run_+3A_refresh">refresh</code></td>
<td>
<p>Frequency for refreshing the progress bar, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of posterior summaries.
</p>

<hr>
<h2 id='tar_jags_rep_summary'>Tidy posterior summaries from multiple MCMCs per model</h2><span id='topic+tar_jags_rep_summary'></span>

<h3>Description</h3>

<p>Run multiple MCMCs on simulated datasets
and return posterior summaries and the effective number of parameters
for each run.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tar_jags_rep_summary(
  name,
  jags_files,
  parameters.to.save,
  data = list(),
  variables = NULL,
  summaries = NULL,
  summary_args = NULL,
  batches = 1L,
  reps = 1L,
  combine = TRUE,
  n.cluster = 1,
  n.chains = 3,
  n.iter = 2000,
  n.burnin = as.integer(n.iter/2),
  n.thin = 1,
  jags.module = c("glm", "dic"),
  inits = NULL,
  RNGname = c("Wichmann-Hill", "Marsaglia-Multicarry", "Super-Duper", "Mersenne-Twister"),
  jags.seed = NULL,
  stdout = NULL,
  stderr = NULL,
  progress.bar = "text",
  refresh = 0,
  tidy_eval = targets::tar_option_get("tidy_eval"),
  packages = targets::tar_option_get("packages"),
  library = targets::tar_option_get("library"),
  format = "qs",
  format_df = "fst_tbl",
  repository = targets::tar_option_get("repository"),
  error = targets::tar_option_get("error"),
  memory = "transient",
  garbage_collection = targets::tar_option_get("garbage_collection"),
  deployment = targets::tar_option_get("deployment"),
  priority = targets::tar_option_get("priority"),
  resources = targets::tar_option_get("resources"),
  storage = targets::tar_option_get("storage"),
  retrieval = targets::tar_option_get("retrieval"),
  cue = targets::tar_option_get("cue"),
  description = targets::tar_option_get("description")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tar_jags_rep_summary_+3A_name">name</code></td>
<td>
<p>Symbol, base name for the collection of targets.
Serves as a prefix for target names.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_jags_files">jags_files</code></td>
<td>
<p>Character vector of JAGS model files. If you
supply multiple files, each model will run on the one shared dataset
generated by the code in <code>data</code>. If you supply an unnamed vector,
<code>tools::file_path_sans_ext(basename(jags_files))</code> will be used
as target name suffixes. If <code>jags_files</code> is a named vector,
the suffixed will come from <code>names(jags_files)</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_parameters.to.save">parameters.to.save</code></td>
<td>
<p>Model parameters to save, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_data">data</code></td>
<td>
<p>Code to generate the <code>data</code> list for the JAGS model.
Optionally include a <code>.join_data</code> element to join parts of the data
to correspondingly named parameters in the summary output.
See the vignettes for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_variables">variables</code></td>
<td>
<p>Character vector of model parameter names.
The output posterior summaries are restricted to these variables.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_summaries">summaries</code></td>
<td>
<p>List of summary functions passed to <code>...</code> in
<code>posterior::summarize_draws()</code> through <code style="white-space: pre;">&#8288;$summary()&#8288;</code>
on the <code>CmdStanFit</code> object.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_summary_args">summary_args</code></td>
<td>
<p>List of summary function arguments passed to
<code>.args</code> in <code>posterior::summarize_draws()</code> through <code style="white-space: pre;">&#8288;$summary()&#8288;</code>
on the <code>CmdStanFit</code> object.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_batches">batches</code></td>
<td>
<p>Number of batches. Each batch runs a model <code>reps</code> times.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_reps">reps</code></td>
<td>
<p>Number of replications per batch. Ideally, each rep
should produce its own random dataset using the code
supplied to <code>data</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_combine">combine</code></td>
<td>
<p>Logical, whether to create a target to
combine all the model results
into a single data frame downstream. Convenient, but
duplicates data.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_n.cluster">n.cluster</code></td>
<td>
<p>Number of parallel processes, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_n.chains">n.chains</code></td>
<td>
<p>Number of MCMC chains, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_n.iter">n.iter</code></td>
<td>
<p>Number if iterations (including warmup), passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_n.burnin">n.burnin</code></td>
<td>
<p>Number of warmup iterations, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_n.thin">n.thin</code></td>
<td>
<p>Thinning interval, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_jags.module">jags.module</code></td>
<td>
<p>Character vector of JAGS modules to load, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_inits">inits</code></td>
<td>
<p>Initial values of model parameters, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_rngname">RNGname</code></td>
<td>
<p>Choice of random number generator, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_jags.seed">jags.seed</code></td>
<td>
<p>The <code>jags.seed</code> argument of the <code style="white-space: pre;">&#8288;tar_jags_rep*()&#8288;</code>
functions is deprecated. See the &quot;Seeds&quot; section for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_stdout">stdout</code></td>
<td>
<p>Character of length 1, file path to write the stdout stream
of the model when it runs. Set to <code>NULL</code> to print to the console.
Set to <code>R.utils::nullfile()</code> to suppress stdout.
Does not apply to messages, warnings, or errors.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_stderr">stderr</code></td>
<td>
<p>Character of length 1, file path to write the stderr stream
of the model when it runs. Set to <code>NULL</code> to print to the console.
Set to <code>R.utils::nullfile()</code> to suppress stderr.
Does not apply to messages, warnings, or errors.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_progress.bar">progress.bar</code></td>
<td>
<p>Type of progress bar, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_refresh">refresh</code></td>
<td>
<p>Frequency for refreshing the progress bar, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_tidy_eval">tidy_eval</code></td>
<td>
<p>Logical, whether to enable tidy evaluation
when interpreting <code>command</code> and <code>pattern</code>. If <code>TRUE</code>, you can use the
&quot;bang-bang&quot; operator <code style="white-space: pre;">&#8288;!!&#8288;</code> to programmatically insert
the values of global objects.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_packages">packages</code></td>
<td>
<p>Character vector of packages to load right before
the target runs or the output data is reloaded for
downstream targets. Use <code>tar_option_set()</code> to set packages
globally for all subsequent targets you define.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_library">library</code></td>
<td>
<p>Character vector of library paths to try
when loading <code>packages</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_format">format</code></td>
<td>
<p>Character of length 1, storage format of the data frames
of posterior summaries and other data frames returned by targets.
We recommend efficient data frame formats
such as <code>"feather"</code> or <code>"aws_parquet"</code>. For more on storage formats,
see the help file of <code>targets::tar_target()</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_format_df">format_df</code></td>
<td>
<p>Character of length 1, storage format of the data frame
targets such as posterior draws. We recommend efficient data frame formats
such as <code>"feather"</code> or <code>"aws_parquet"</code>. For more on storage formats,
see the help file of <code>targets::tar_target()</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_repository">repository</code></td>
<td>
<p>Character of length 1, remote repository for target
storage. Choices:
</p>

<ul>
<li> <p><code>"local"</code>: file system of the local machine.
</p>
</li>
<li> <p><code>"aws"</code>: Amazon Web Services (AWS) S3 bucket. Can be configured
with a non-AWS S3 bucket using the <code>endpoint</code> argument of
<code><a href="targets.html#topic+tar_resources_aws">tar_resources_aws()</a></code>, but versioning capabilities may be lost
in doing so.
See the cloud storage section of
<a href="https://books.ropensci.org/targets/data.html">https://books.ropensci.org/targets/data.html</a>
for details for instructions.
</p>
</li>
<li> <p><code>"gcp"</code>: Google Cloud Platform storage bucket.
See the cloud storage section of
<a href="https://books.ropensci.org/targets/data.html">https://books.ropensci.org/targets/data.html</a>
for details for instructions.
</p>
</li>
<li><p> A character string from <code><a href="targets.html#topic+tar_repository_cas">tar_repository_cas()</a></code> for content-addressable
storage.
</p>
</li></ul>

<p>Note: if <code>repository</code> is not <code>"local"</code> and <code>format</code> is <code>"file"</code>
then the target should create a single output file.
That output file is uploaded to the cloud and tracked for changes
where it exists in the cloud. The local file is deleted after
the target runs.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_error">error</code></td>
<td>
<p>Character of length 1, what to do if the target
stops and throws an error. Options:
</p>

<ul>
<li> <p><code>"stop"</code>: the whole pipeline stops and throws an error.
</p>
</li>
<li> <p><code>"continue"</code>: the whole pipeline keeps going.
</p>
</li>
<li> <p><code>"null"</code>: The errored target continues and returns <code>NULL</code>.
The data hash is deliberately wrong so the target is not
up to date for the next run of the pipeline. In addition,
as of version 1.8.0.9011, a value of <code>NULL</code> is given
to upstream dependencies with <code>error = "null"</code> if loading fails.
</p>
</li>
<li> <p><code>"abridge"</code>: any currently running targets keep running,
but no new targets launch after that.
</p>
</li>
<li> <p><code>"trim"</code>: all currently running targets stay running. A queued
target is allowed to start if:
</p>

<ol>
<li><p> It is not downstream of the error, and
</p>
</li>
<li><p> It is not a sibling branch from the same <code><a href="targets.html#topic+tar_target">tar_target()</a></code> call
(if the error happened in a dynamic branch).
</p>
</li></ol>

<p>The idea is to avoid starting any new work that the immediate error
impacts. <code>error = "trim"</code> is just like <code>error = "abridge"</code>,
but it allows potentially healthy regions of the dependency graph
to begin running.
(Visit <a href="https://books.ropensci.org/targets/debugging.html">https://books.ropensci.org/targets/debugging.html</a>
to learn how to debug targets using saved workspaces.)
</p>
</li></ul>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_memory">memory</code></td>
<td>
<p>Character of length 1, memory strategy. Possible values:
</p>

<ul>
<li> <p><code>"auto"</code>: new in <code>targets</code> version 1.8.0.9011, <code>memory = "auto"</code>
is equivalent to <code>memory = "transient"</code> for dynamic branching
(a non-null <code>pattern</code> argument) and <code>memory = "persistent"</code>
for targets that do not use dynamic branching.
</p>
</li>
<li> <p><code>"persistent"</code>: the target stays in memory
until the end of the pipeline (unless <code>storage</code> is <code>"worker"</code>,
in which case <code>targets</code> unloads the value from memory
right after storing it in order to avoid sending
copious data over a network).
</p>
</li>
<li> <p><code>"transient"</code>: the target gets unloaded
after every new target completes.
Either way, the target gets automatically loaded into memory
whenever another target needs the value.
</p>
</li></ul>

<p>For cloud-based dynamic files
(e.g. <code>format = "file"</code> with <code>repository = "aws"</code>),
the <code>memory</code> option applies to the
temporary local copy of the file:
<code>"persistent"</code> means it remains until the end of the pipeline
and is then deleted,
and <code>"transient"</code> means it gets deleted as soon as possible.
The former conserves bandwidth,
and the latter conserves local storage.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_garbage_collection">garbage_collection</code></td>
<td>
<p>Logical: <code>TRUE</code> to run <code>base::gc()</code>
just before the target runs,
<code>FALSE</code> to omit garbage collection.
In the case of high-performance computing,
<code>gc()</code> runs both locally and on the parallel worker.
All this garbage collection is skipped if the actual target
is skipped in the pipeline.
Non-logical values of <code>garbage_collection</code> are converted to <code>TRUE</code> or
<code>FALSE</code> using <code>isTRUE()</code>. In other words, non-logical values are
converted <code>FALSE</code>. For example, <code>garbage_collection = 2</code>
is equivalent to <code>garbage_collection = FALSE</code>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_deployment">deployment</code></td>
<td>
<p>Character of length 1. If <code>deployment</code> is
<code>"main"</code>, then the target will run on the central controlling R process.
Otherwise, if <code>deployment</code> is <code>"worker"</code> and you set up the pipeline
with distributed/parallel computing, then
the target runs on a parallel worker. For more on distributed/parallel
computing in <code>targets</code>, please visit
<a href="https://books.ropensci.org/targets/crew.html">https://books.ropensci.org/targets/crew.html</a>.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_priority">priority</code></td>
<td>
<p>Numeric of length 1 between 0 and 1. Controls which
targets get deployed first when multiple competing targets are ready
simultaneously. Targets with priorities closer to 1 get dispatched earlier
(and polled earlier in <code><a href="targets.html#topic+tar_make_future">tar_make_future()</a></code>).</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_resources">resources</code></td>
<td>
<p>Object returned by <code>tar_resources()</code>
with optional settings for high-performance computing
functionality, alternative data storage formats,
and other optional capabilities of <code>targets</code>.
See <code>tar_resources()</code> for details.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_storage">storage</code></td>
<td>
<p>Character string to control when the output of the target
is saved to storage. Only relevant when using <code>targets</code>
with parallel workers (<a href="https://books.ropensci.org/targets/crew.html">https://books.ropensci.org/targets/crew.html</a>).
Must be one of the following values:
</p>

<ul>
<li> <p><code>"main"</code>: the target's return value is sent back to the
host machine and saved/uploaded locally.
</p>
</li>
<li> <p><code>"worker"</code>: the worker saves/uploads the value.
</p>
</li>
<li> <p><code>"none"</code>: <code>targets</code> makes no attempt to save the result
of the target to storage in the location where <code>targets</code>
expects it to be. Saving to storage is the responsibility
of the user. Use with caution.
</p>
</li></ul>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_retrieval">retrieval</code></td>
<td>
<p>Character string to control when the current target
loads its dependencies into memory before running.
(Here, a &quot;dependency&quot; is another target upstream that the current one
depends on.) Only relevant when using <code>targets</code>
with parallel workers (<a href="https://books.ropensci.org/targets/crew.html">https://books.ropensci.org/targets/crew.html</a>).
Must be one of the following values:
</p>

<ul>
<li> <p><code>"main"</code>: the target's dependencies are loaded on the host machine
and sent to the worker before the target runs.
</p>
</li>
<li> <p><code>"worker"</code>: the worker loads the target's dependencies.
</p>
</li>
<li> <p><code>"none"</code>: <code>targets</code> makes no attempt to load its
dependencies. With <code>retrieval = "none"</code>, loading dependencies
is the responsibility of the user. Use with caution.
</p>
</li></ul>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_cue">cue</code></td>
<td>
<p>An optional object from <code>tar_cue()</code> to customize the
rules that decide whether the target is up to date.</p>
</td></tr>
<tr><td><code id="tar_jags_rep_summary_+3A_description">description</code></td>
<td>
<p>Character of length 1, a custom free-form human-readable
text description of the target. Descriptions appear as target labels
in functions like <code><a href="targets.html#topic+tar_manifest">tar_manifest()</a></code> and <code><a href="targets.html#topic+tar_visnetwork">tar_visnetwork()</a></code>,
and they let you select subsets of targets for the <code>names</code> argument of
functions like <code><a href="targets.html#topic+tar_make">tar_make()</a></code>. For example,
<code>tar_manifest(names = tar_described_as(starts_with("survival model")))</code>
lists all the targets whose descriptions start with the character
string <code>"survival model"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The MCMC targets use <code>R2jags::jags()</code> if <code>n.cluster</code> is <code>1</code> and
<code>R2jags::jags.parallel()</code> otherwise. Most arguments to <code>tar_jags()</code>
are forwarded to these functions.
</p>


<h3>Value</h3>

<p><code>tar_jags_rep_summary()</code> returns list of target objects.
See the &quot;Target objects&quot; section for
background.
The target names use the <code>name</code> argument as a prefix, and the individual
elements of <code>jags_files</code> appear in the suffixes where applicable.
As an example, the specific target objects returned by
<code>tar_jags_rep_dic(name = x, jags_files = "y.jags")</code>
are as follows.
</p>

<ul>
<li> <p><code>x_file_y</code>: reproducibly track the JAGS model file. Returns
a character vector of length 1 with the path to the JAGS
model file.
</p>
</li>
<li> <p><code>x_lines_y</code>: read the contents of the JAGS model file
for safe transport to parallel workers.
Returns a character vector of lines in the model file.
</p>
</li>
<li> <p><code>x_data</code>: use dynamic branching to generate multiple JAGS
datasets from the R expression in the <code>data</code> argument.
Each dynamic branch returns a batch of JAGS data lists.
</p>
</li>
<li> <p><code>x_y</code>: run JAGS on each dataset from <code>x_data</code>.
Each dynamic branch returns a tidy data frame of summaries
for each batch of data.
</p>
</li>
<li> <p><code>x</code>: combine all the batches from <code>x_y</code> into a non-dynamic target.
Suppressed if <code>combine</code> is <code>FALSE</code>.
Returns a long tidy data frame with all summaries
from all the branches of <code>x_y</code>.
</p>
</li></ul>



<h3>Seeds</h3>

<p>Rep-specific random number generator seeds for the data and models
are automatically set based on the batch, rep,
parent target name, and <code>tar_option_get("seed")</code>. This ensures
the rep-specific seeds do not change when you change the batching
configuration (e.g. 40 batches of 10 reps each vs 20 batches of 20
reps each). Each data seed is in the <code>.seed</code> list element of the output,
and each JAGS seed is in the .seed column of each JAGS model output.
</p>


<h3>Target objects</h3>

<p>Most <code>stantargets</code> functions are target factories,
which means they return target objects
or lists of target objects.
Target objects represent skippable steps of the analysis pipeline
as described at <a href="https://books.ropensci.org/targets/">https://books.ropensci.org/targets/</a>.
Please read the walkthrough at
<a href="https://books.ropensci.org/targets/walkthrough.html">https://books.ropensci.org/targets/walkthrough.html</a>
to understand the role of target objects in analysis pipelines.
</p>
<p>For developers,
<a href="https://wlandau.github.io/targetopia/contributing.html#target-factories">https://wlandau.github.io/targetopia/contributing.html#target-factories</a>
explains target factories (functions like this one which generate targets)
and the design specification at
<a href="https://books.ropensci.org/targets-design/">https://books.ropensci.org/targets-design/</a>
details the structure and composition of target objects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (identical(Sys.getenv("TAR_JAGS_EXAMPLES"), "true")) {
targets::tar_dir({ # tar_dir() runs code from a temporary directory.
targets::tar_script({
library(jagstargets)
# Do not use a temp file for a real project
# or else your targets will always rerun.
tmp &lt;- tempfile(pattern = "", fileext = ".jags")
tar_jags_example_file(tmp)
list(
  tar_jags_rep_summary(
    your_model,
    jags_files = tmp,
    data = tar_jags_example_data(),
    parameters.to.save = "beta",
    batches = 2,
    reps = 2,
    stdout = R.utils::nullfile(),
    stderr = R.utils::nullfile()
  )
)
}, ask = FALSE)
targets::tar_make()
})
}
</code></pre>

<hr>
<h2 id='tar_jags_run'>Run a JAGS model and return the whole output object.</h2><span id='topic+tar_jags_run'></span>

<h3>Description</h3>

<p>Not a user-side function. Do not invoke directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tar_jags_run(
  jags_lines,
  parameters.to.save,
  data,
  inits,
  n.cluster,
  n.chains,
  n.iter,
  n.burnin,
  n.thin,
  jags.module,
  RNGname,
  jags.seed,
  stdout,
  stderr,
  progress.bar,
  refresh
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tar_jags_run_+3A_jags_lines">jags_lines</code></td>
<td>
<p>Character vector of lines from a JAGS model file.</p>
</td></tr>
<tr><td><code id="tar_jags_run_+3A_parameters.to.save">parameters.to.save</code></td>
<td>
<p>Model parameters to save, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_run_+3A_inits">inits</code></td>
<td>
<p>Initial values of model parameters, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_run_+3A_n.cluster">n.cluster</code></td>
<td>
<p>Number of parallel processes, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_run_+3A_n.chains">n.chains</code></td>
<td>
<p>Number of MCMC chains, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_run_+3A_n.iter">n.iter</code></td>
<td>
<p>Number if iterations (including warmup), passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_run_+3A_n.burnin">n.burnin</code></td>
<td>
<p>Number of warmup iterations, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_run_+3A_n.thin">n.thin</code></td>
<td>
<p>Thinning interval, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_run_+3A_jags.module">jags.module</code></td>
<td>
<p>Character vector of JAGS modules to load, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_run_+3A_rngname">RNGname</code></td>
<td>
<p>Choice of random number generator, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_run_+3A_jags.seed">jags.seed</code></td>
<td>
<p>Seeds to apply to JAGS, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_run_+3A_stdout">stdout</code></td>
<td>
<p>Character of length 1, file path to write the stdout stream
of the model when it runs. Set to <code>NULL</code> to print to the console.
Set to <code>R.utils::nullfile()</code> to suppress stdout.
Does not apply to messages, warnings, or errors.</p>
</td></tr>
<tr><td><code id="tar_jags_run_+3A_stderr">stderr</code></td>
<td>
<p>Character of length 1, file path to write the stderr stream
of the model when it runs. Set to <code>NULL</code> to print to the console.
Set to <code>R.utils::nullfile()</code> to suppress stderr.
Does not apply to messages, warnings, or errors.</p>
</td></tr>
<tr><td><code id="tar_jags_run_+3A_progress.bar">progress.bar</code></td>
<td>
<p>Type of progress bar, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
<tr><td><code id="tar_jags_run_+3A_refresh">refresh</code></td>
<td>
<p>Frequency for refreshing the progress bar, passed to
<code>R2jags::jags()</code> or <code>R2jags::jags.parallel()</code>.
See the argument documentation of the
<code>R2jags::jags()</code> and <code>R2jags::jags.parallel()</code> help files for details.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>R2jags</code> output object.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
