<!DOCTYPE html><html lang="en"><head><title>Help for package rdwd</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rdwd}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#rdwd'><p>Handle Climate Data from DWD (German Weather Service)</p></a></li>
<li><a href='#addBorders'><p>add country and Bundesland borders to a map</p></a></li>
<li><a href='#app'><p>Launch interactive weather analysis app</p></a></li>
<li><a href='#checkIndex'><p>check indexes</p></a></li>
<li><a href='#checkSuggestedPackage'><p>check suggested package for availability</p></a></li>
<li><a href='#createIndex'><p>Create file and meta index of the DWD CDC FTP Server</p></a></li>
<li><a href='#dataDWD'><p>Download data from the DWD CDC FTP Server</p></a></li>
<li><a href='#dirDWD'><p>directory management for rdwd</p></a></li>
<li><a href='#dwdbase'><p>DWD FTP Server base URL</p></a></li>
<li><a href='#dwdparams'><p>DWD parameter explanations</p></a></li>
<li><a href='#fileType'><p>determine DWD file type</p></a></li>
<li><a href='#findID'><p>find DWD weather station ID from name</p></a></li>
<li><a href='#index'><p>Indexes of files and metadata on the DWD CDC FTP server</p></a></li>
<li><a href='#indexFTP'><p>Create a recursive index of an FTP Server</p></a></li>
<li><a href='#lldist'><p>distance between lat-long coordinates</p></a></li>
<li><a href='#locdir'><p>local data directory</p></a></li>
<li><a href='#metaInfo'><p>Information for a station ID on the DWD CDC FTP server</p></a></li>
<li><a href='#nearbyStations'><p>Find DWD stations close to given coordinates</p></a></li>
<li><a href='#newColumnNames'><p>Enhance readDWD column names</p></a></li>
<li><a href='#plotDWD'><p>Quickly plot time series</p></a></li>
<li><a href='#plotRadar'><p>plot radar products on a pretty map</p></a></li>
<li><a href='#projectRasterDWD'><p>project DWD raster data</p></a></li>
<li><a href='#rdwdquiet'><p>global quiet option for rdwd</p></a></li>
<li><a href='#readDWD'><p>Process data from the DWD CDC FTP Server</p></a></li>
<li><a href='#readDWD.asc'><p>read dwd gridded radolan asc data</p></a></li>
<li><a href='#readDWD.binary'><p>read dwd gridded radolan binary data</p></a></li>
<li><a href='#readDWD.data'><p>read regular dwd data</p></a></li>
<li><a href='#readDWD.deriv'><p>read derived dwd data</p></a></li>
<li><a href='#readDWD.grib2'><p>read nwp forecast data</p></a></li>
<li><a href='#readDWD.meta'><p>read dwd metadata (Beschreibung*.txt files)</p></a></li>
<li><a href='#readDWD.multia'><p>read multi_annual dwd data</p></a></li>
<li><a href='#readDWD.nc'><p>read dwd netcdf data</p></a></li>
<li><a href='#readDWD.pdf'><p>open pdf data</p></a></li>
<li><a href='#readDWD.radar'><p>read dwd gridded radolan radar data</p></a></li>
<li><a href='#readDWD.raster'><p>read dwd gridded raster data</p></a></li>
<li><a href='#readDWD.rklim'><p>read dwd gridded radklim binary data</p></a></li>
<li><a href='#readDWD.stand'><p>read subdaily/standard_format dwd data</p></a></li>
<li><a href='#readMeta'><p>Process data from the DWD CDC FTP Server</p></a></li>
<li><a href='#readVars'><p>Process data from the DWD CDC FTP Server</p></a></li>
<li><a href='#release_questions'><p>Reminders when using devtools::release</p></a></li>
<li><a href='#rowDisplay'><p>Create leaflet map popup from data.frame rows</p></a></li>
<li><a href='#runLocalTests'><p>run local tests of rdwd</p></a></li>
<li><a href='#selectDWD'><p>Select data from the DWD CDC FTP Server</p></a></li>
<li><a href='#updateIndexes'><p>update rdwd indexes</p></a></li>
<li><a href='#updateRdwd'><p>Update rdwd development version</p></a></li>
<li><a href='#validFileTypes'><p>valid fileType values</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Select and Download Climate Data from 'DWD' (German Weather
Service)</td>
</tr>
<tr>
<td>Version:</td>
<td>1.8.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-06-17</td>
</tr>
<tr>
<td>Depends:</td>
<td>R(&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>berryFunctions (&ge; 1.21.11), pbapply</td>
</tr>
<tr>
<td>Suggests:</td>
<td>RCurl, leaflet, knitr, rmarkdown, testthat, roxygen2,
devtools, remotes, bit64, data.table, OSMscale, R.utils, ncdf4,
readr, dwdradar, XML, terra, stars, shiny, gsheet</td>
</tr>
<tr>
<td>Author:</td>
<td>Berry Boessenkool</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Berry Boessenkool &lt;berry-b@gmx.de&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Handle climate data from the 'DWD' ('Deutscher Wetterdienst', see 
             <a href="https://www.dwd.de/EN/climate_environment/cdc/cdc_node_en.html">https://www.dwd.de/EN/climate_environment/cdc/cdc_node_en.html</a> for more information).
             Choose observational time series from meteorological stations with 'selectDWD()'.
             Find raster data from radar and interpolation according to <a href="https://bookdown.org/brry/rdwd/raster-data.html">https://bookdown.org/brry/rdwd/raster-data.html</a>.
             Download (multiple) data sets with progress bars and no re-downloads through 'dataDWD()'.
             Read both tabular observational data and binary gridded datasets with 'readDWD()'.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/brry/rdwd">https://github.com/brry/rdwd</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/brry/rdwd/issues">https://github.com/brry/rdwd/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-06-17 09:06:42 UTC; berry</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-06-17 09:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='rdwd'>Handle Climate Data from DWD (German Weather Service)</h2><span id='topic+rdwd'></span><span id='topic+rdwd-package'></span>

<h3>Description</h3>


<ul>
<li><p> find, select, download + read data from the German weather service DWD<br />
</p>
</li>
<li><p> vectorized, progress bars, no re-downloads<br />
</p>
</li>
<li><p> index of files + meta data<br />
</p>
</li>
<li><p> observational time series from 6k meteorological recording stations (2.5k active)<br />
-&gt; rain, temperature, wind, sunshine, pressure, cloudiness, humidity, snow, ...<br />
</p>
</li>
<li><p> gridded raster data from radar + interpolation<br />
</p>
</li>
<li><p> european data stock slowly growing<br />
For an introduction to the package, see <a href="https://bookdown.org/brry/rdwd">https://bookdown.org/brry/rdwd</a>.<br />
</p>
</li></ul>



<h3>Searchability Terms</h3>

<p>Weather Data Germany download with R, Climate Data Germany<br />
Deutscher Wetterdienst R Daten download Klimastationen<br />
DWD Daten mit R runterladen, Wetter und Klimadaten in R
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>
</p>


<h3>See Also</h3>

<p>related weather data processing references at <a href="https://bookdown.org/brry/rdwd/see-also.html">https://bookdown.org/brry/rdwd/see-also.html</a>
</p>

<hr>
<h2 id='addBorders'>add country and Bundesland borders to a map</h2><span id='topic+addBorders'></span>

<h3>Description</h3>

<p>add country and Bundesland borders to a map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addBorders(de = "grey80", eu = "black", add = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addBorders_+3A_de">de</code></td>
<td>
<p>Color for Bundeslaender lines. NA to suppress. DEFAULT: &quot;grey80&quot;</p>
</td></tr>
<tr><td><code id="addBorders_+3A_eu">eu</code></td>
<td>
<p>Color for countries lines. NA to suppress. DEFAULT: &quot;black&quot;</p>
</td></tr>
<tr><td><code id="addBorders_+3A_add">add</code></td>
<td>
<p>Logical: add to existing plot? DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="addBorders_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="terra.html#topic+plot">terra::plot()</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<div class="sourceCode"><pre># Use the SpatVectors directly with:
DEU &lt;- terra::vect(system.file("extdata/DEU.gpkg", package="rdwd"))
EUR &lt;- terra::vect(system.file("extdata/EUR.gpkg", package="rdwd"))

# Obtained with the code:
url &lt;- "https://gisco-services.ec.europa.eu/distribution/v2/nuts/shp/NUTS_RG_03M_2021_4326_LEVL_1.shp.zip"
tf &lt;- tempfile(fileext=".zip")
download.file(url, tf) # 0.9 MB # in 2023-06 error 'Transferred a partial file'
unzip(tf, exdir="misc/vign") ; rm(url, tf)

DEU &lt;- terra::vect("misc/vign/NUTS_RG_03M_2021_4326_LEVL_1.shp")
library(terra) # for bracket method
DEU &lt;- DEU[DEU$CNTR_CODE=="DE","NUTS_NAME"]
terra::writeVector(DEU, "inst/extdata/DEU.gpkg", overwrite=TRUE)

url &lt;- "https://gisco-services.ec.europa.eu/distribution/v2/nuts/shp/NUTS_RG_03M_2021_4326_LEVL_0.shp.zip"
tf &lt;- tempfile(fileext=".zip")
download.file(url, tf) # 0.7 MB # in 2023-06 error 'Transferred a partial file'
unzip(tf, exdir="misc/vign") ; rm(url, tf)

EUR &lt;- terra::vect("misc/vign/NUTS_RG_03M_2021_4326_LEVL_0.shp")
EUR &lt;- terra::crop(EUR, c(-11,25, 40,60))
EUR &lt;- EUR[,"NUTS_NAME"]
terra::writeVector(EUR, "inst/extdata/EUR.gpkg", overwrite=TRUE)
</pre></div>


<h3>Value</h3>

<p>invisible list with DEU and EUR
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Aug 2019, June 2023
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plotRadar">plotRadar</a></code>, <a href="https://bookdown.org/brry/rdwd/raster-data.html">website raster chapter</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(requireNamespace("terra", quietly=TRUE)){
plot(1, xlim=c(2,16), ylim=c(47,55))
addBorders()
addBorders(add=FALSE)
plot(1, xlim=c(2,16), ylim=c(47,55))
addBorders(de="orange", eu=NA)
}

</code></pre>

<hr>
<h2 id='app'>Launch interactive weather analysis app</h2><span id='topic+app'></span>

<h3>Description</h3>

<p>Launch interactive analysis of weather period comparison
for different RDWD stations.
The R session is blocked during usage, close the app to re-enable
console usage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>app(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="app_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code><a href="shiny.html#topic+runApp">shiny::runApp()</a></code></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, July 2018 + April 2023
</p>


<h3>See Also</h3>

<p><code><a href="shiny.html#topic+runApp">shiny::runApp()</a></code>, <a href="#topic+rdwd">rdwd</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># app()
</code></pre>

<hr>
<h2 id='checkIndex'>check indexes</h2><span id='topic+checkIndex'></span>

<h3>Description</h3>

<p>check indexes. Mainly for internal usage in <code><a href="#topic+createIndex">createIndex()</a></code>.
Not exported, so call it as rdwd:::checkIndex() if you want to
run tests yourself. Further test suggestions are welcome!
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkIndex(
  findex = NULL,
  mindex = NULL,
  gindex = NULL,
  excludefp = TRUE,
  fast = FALSE,
  warn = !quiet,
  logfile = berryFunctions::packagePath(file = "misc/ExampleTests/warnings.txt"),
  quiet = rdwdquiet()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="checkIndex_+3A_findex">findex</code></td>
<td>
<p><code><a href="#topic+fileIndex">fileIndex</a></code>. DEFAULT: NULL</p>
</td></tr>
<tr><td><code id="checkIndex_+3A_mindex">mindex</code></td>
<td>
<p><code><a href="#topic+metaIndex">metaIndex</a></code>. DEFAULT: NULL</p>
</td></tr>
<tr><td><code id="checkIndex_+3A_gindex">gindex</code></td>
<td>
<p><code><a href="#topic+geoIndex">geoIndex</a></code>.  DEFAULT: NULL</p>
</td></tr>
<tr><td><code id="checkIndex_+3A_excludefp">excludefp</code></td>
<td>
<p>Exclude false positives from geoIndex coordinate check results?
DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="checkIndex_+3A_fast">fast</code></td>
<td>
<p>Exclude the 3-minute location per ID check? DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="checkIndex_+3A_warn">warn</code></td>
<td>
<p>Warn about issues? DEFAULT: <code>!quiet</code> (TRUE)</p>
</td></tr>
<tr><td><code id="checkIndex_+3A_logfile">logfile</code></td>
<td>
<p>File to copy log to, appended to existing content. NULL to suppress.
DEFAULT: &quot;misc/ExampleTests/warnings.txt&quot;</p>
</td></tr>
<tr><td><code id="checkIndex_+3A_quiet">quiet</code></td>
<td>
<p>Logical: Suppress progress messages?
DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Charstring with issues (if any) to be printed with <code><a href="base.html#topic+cat">cat()</a></code>.
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, May 2019
</p>


<h3>See Also</h3>

<p><code><a href="#topic+createIndex">createIndex</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(fileIndex) ; data(metaIndex) ; data(geoIndex)
# ci &lt;- rdwd:::checkIndex(findex=fileIndex, mindex=metaIndex, gindex=geoIndex)
# cat(ci)
</code></pre>

<hr>
<h2 id='checkSuggestedPackage'>check suggested package for availability</h2><span id='topic+checkSuggestedPackage'></span>

<h3>Description</h3>

<p>check suggested package for availability,
yielding an instructive error message if not
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkSuggestedPackage(package, functionname)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="checkSuggestedPackage_+3A_package">package</code></td>
<td>
<p>Charstring: package to be checked for loadability</p>
</td></tr>
<tr><td><code id="checkSuggestedPackage_+3A_functionname">functionname</code></td>
<td>
<p>Charstring: function name to be used in the message</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisible success logical value from <code><a href="base.html#topic+requireNamespace">requireNamespace()</a></code>
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Aug 2019
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+requireNamespace">requireNamespace()</a></code>
</p>

<hr>
<h2 id='createIndex'>Create file and meta index of the DWD CDC FTP Server</h2><span id='topic+createIndex'></span>

<h3>Description</h3>

<p>This is mainly an internal function.
Create data.frames out of the vector index returned by <code><a href="#topic+indexFTP">indexFTP()</a></code>.
For <code><a href="#topic+fileIndex">fileIndex</a></code> (the first output element) <code>createIndex</code>
tries to obtain res, var, per, file, id, start and end from the paths.
If <code>meta=TRUE</code>, <code><a href="#topic+metaIndex">metaIndex</a></code> and <code><a href="#topic+geoIndex">geoIndex</a></code> are also
created. They combine all Beschreibung files into a single data.frame.<br />
If you create your own index as suggested in selectDWD (argument <code>findex</code>),
you can read the produced file as shown in the example section.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createIndex(
  paths,
  base = dwdbase,
  dir = "DWDdata",
  fname = "fileIndex.txt",
  meta = FALSE,
  metadir = "meta",
  mname = "metaIndex.txt",
  gname = "geoIndex.txt",
  overwrite = FALSE,
  checkwarn = TRUE,
  checklog = tempfile(),
  quiet = rdwdquiet(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="createIndex_+3A_paths">paths</code></td>
<td>
<p>Char: vector of DWD paths returned by <code><a href="#topic+indexFTP">indexFTP()</a></code> called
with the same <code>base</code> value as this function</p>
</td></tr>
<tr><td><code id="createIndex_+3A_base">base</code></td>
<td>
<p>Main directory of DWD ftp server, defaulting to observed climatic records.
DEFAULT: <code><a href="#topic+dwdbase">dwdbase</a></code></p>
</td></tr>
<tr><td><code id="createIndex_+3A_dir">dir</code></td>
<td>
<p>Char: writeable directory name where to save the main output(s).
Created if not existent. DEFAULT: &quot;DWDdata&quot; at current <code><a href="base.html#topic+getwd">getwd()</a></code></p>
</td></tr>
<tr><td><code id="createIndex_+3A_fname">fname</code></td>
<td>
<p>Char: Name of file in <code>dir</code> in which to write <code><a href="#topic+fileIndex">fileIndex</a></code>.
Use <code>fname=""</code> to suppress writing. DEFAULT: &quot;fileIndex.txt&quot;</p>
</td></tr>
<tr><td><code id="createIndex_+3A_meta">meta</code></td>
<td>
<p>Logical: should metaIndex also be created from fileIndex?
Uses <code><a href="#topic+dataDWD">dataDWD()</a></code> to download files if not present.
DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="createIndex_+3A_metadir">metadir</code></td>
<td>
<p>Char: Directory (subfolder of <code>dir</code>) where original
description files are downloaded to if meta=TRUE. Passed to
<code><a href="#topic+dataDWD">dataDWD()</a></code>. &quot;&quot; to write in <code>dir</code>. DEFAULT: &quot;meta&quot;</p>
</td></tr>
<tr><td><code id="createIndex_+3A_mname">mname</code></td>
<td>
<p>Char: Name of file in <code>dir</code> (not <code>metadir</code>) in which to
write <code><a href="#topic+metaIndex">metaIndex</a></code>.
Use <code>mname=""</code> to suppress writing. DEFAULT: &quot;metaIndex.txt&quot;</p>
</td></tr>
<tr><td><code id="createIndex_+3A_gname">gname</code></td>
<td>
<p>Filename for <code><a href="#topic+geoIndex">geoIndex</a></code>. DEFAULT: &quot;geoIndex.txt&quot;</p>
</td></tr>
<tr><td><code id="createIndex_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical: Overwrite existing <code>fname / mname / gname</code> files?
If not, &quot;_n&quot; is added to the filenames, see
<code><a href="berryFunctions.html#topic+newFilename">berryFunctions::newFilename()</a></code>.
DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="createIndex_+3A_checkwarn">checkwarn</code></td>
<td>
<p>Logical: warn about <code><a href="#topic+checkIndex">checkIndex()</a></code> issues? DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="createIndex_+3A_checklog">checklog</code></td>
<td>
<p>Logfile for <code><a href="#topic+checkIndex">checkIndex()</a></code>. DEFAULT: <code><a href="base.html#topic+tempfile">tempfile()</a></code></p>
</td></tr>
<tr><td><code id="createIndex_+3A_quiet">quiet</code></td>
<td>
<p>Logical: Suppress messages about progress and filenames?
DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="createIndex_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="#topic+dataDWD">dataDWD()</a></code> for the meta part.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisible data.frame (or if meta=TRUE, list with two data.frames)
with a number of columns inferred from the paths. Each is also written to disc.
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Oct-Nov 2016, June 2017
</p>


<h3>See Also</h3>

<p><code><a href="#topic+indexFTP">indexFTP()</a></code>, <code><a href="#topic+updateIndexes">updateIndexes()</a></code>, <code><a href="#topic+index">index</a></code>, <code><a href="#topic+selectDWD">selectDWD()</a></code>,
<a href="https://bookdown.org/brry/rdwd/fileindex.html">website index chapter</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:  # Not tested with R CMD check because of file writing
link &lt;- "daily/kl/historical/tageswerte_KL_00699_19490101_19580630_hist.zip"
ind &lt;- createIndex(link, dir=tempdir())
ind
# res  var        per  id    start          end ismeta
# daily kl historical 699 1949-01-01 1958-06-30 FALSE
link2 &lt;- "daily/kl/historical/KL_Tageswerte_Beschreibung_Stationen.txt"
link3 &lt;- "daily/kl/recent/KL_Tageswerte_Beschreibung_Stationen.txt"
ind2 &lt;- createIndex(c(link,link2,link3), dir=tempdir(), meta=TRUE, checkwarn=FALSE)
lapply(ind2, head)
link4 &lt;- "1_minute/precipitation/meta_data/Meta_Daten_ein_min_rr_00755.zip"
ind &lt;- createIndex(link4, dir=tempdir())
ind

## End(Not run)

</code></pre>

<hr>
<h2 id='dataDWD'>Download data from the DWD CDC FTP Server</h2><span id='topic+dataDWD'></span>

<h3>Description</h3>

<p>Get climate data from the German Weather Service (DWD) FTP-server.
The desired dataset is downloaded into <code>dir</code>.
If <code>read=TRUE</code>, it is also read and processed.<br />
<code>dataDWD</code> handles vectors of URLs,
displays progress bars (if the package <code>pbapply</code> is available)
and by default does not re-download data already in <code>dir</code>
(but see argument <code>force</code> to update files).<br />
To solve &quot;errors in download.file: cannot open URL&quot;, see
<a href="https://bookdown.org/brry/rdwd/fileindex.html">https://bookdown.org/brry/rdwd/fileindex.html</a>.<br />
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dataDWD(
  url,
  base = dwdbase,
  joinbf = FALSE,
  dir = locdir(),
  force = FALSE,
  overwrite = !isFALSE(force),
  read = TRUE,
  dbin = TRUE,
  method = getOption("download.file.method"),
  dfargs = NULL,
  sleep = 0,
  progbar = !quiet,
  browse = FALSE,
  ntrunc = 2,
  file = NULL,
  quiet = rdwdquiet(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dataDWD_+3A_url">url</code></td>
<td>
<p>Char (vector): complete file URL(s) (including base and filename.zip)
as returned by <code><a href="#topic+selectDWD">selectDWD()</a></code>. Can be a vector with several FTP URLs.</p>
</td></tr>
<tr><td><code id="dataDWD_+3A_base">base</code></td>
<td>
<p>Single char: base URL that will be removed from output file names.
DEFAULT: <code><a href="#topic+dwdbase">dwdbase</a></code></p>
</td></tr>
<tr><td><code id="dataDWD_+3A_joinbf">joinbf</code></td>
<td>
<p>Logical: paste <code>base</code> and <code style="white-space: pre;">&#8288;file url&#8288;</code> together?
Needed mostly for data at <code><a href="#topic+gridbase">gridbase</a></code>.
DEFAULT: FALSE (selectDWD returns complete URLs already)</p>
</td></tr>
<tr><td><code id="dataDWD_+3A_dir">dir</code></td>
<td>
<p>Char: Writeable directory name where to save the downloaded file.
Created if not existent. DEFAULT: <code><a href="#topic+locdir">locdir()</a></code></p>
</td></tr>
<tr><td><code id="dataDWD_+3A_force">force</code></td>
<td>
<p>Logical (vector): always download, even if the file already exists in <code>dir</code>?
Use NA to force re-downloading files older than 24 hours.
Use a numerical value to force after that amount of hours.
Use something like <code>c(Inf, 24)</code> or <code>force=c(24*365, 6)</code>, for per=&quot;hr&quot;.
Note: if <code>force</code> is not FALSE, the <code>overwrite</code> default is TRUE.
DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="dataDWD_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical (vector): if force=TRUE, overwrite the existing file
rather than append &quot;_1&quot;/&quot;_2&quot; etc to the filename?
DEFAULT: <code>!isFALSE(force)</code>, i.e. true when <code>force</code> is specified.</p>
</td></tr>
<tr><td><code id="dataDWD_+3A_read">read</code></td>
<td>
<p>Logical: read the file(s) with <code><a href="#topic+readDWD">readDWD()</a></code>? If FALSE,
only download is performed and the filename(s) returned. DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="dataDWD_+3A_dbin">dbin</code></td>
<td>
<p>Logical: Download binary file, i.e. add <code>mode="wb"</code> to the
<code><a href="utils.html#topic+download.file">download.file()</a></code> call?
See <a href="https://bookdown.org/brry/rdwd/raster-data.html#binary-file-errors">Website</a>
for details.
DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="dataDWD_+3A_method">method</code></td>
<td>
<p><a href="utils.html#topic+download.file">download.file</a> <code>method</code>. Introduced in version 1.5.25 (2022-05-12)
as triggered by <a href="https://github.com/brry/rdwd/issues/34">https://github.com/brry/rdwd/issues/34</a>.
DEFAULT: <code>getOption("download.file.method")</code></p>
</td></tr>
<tr><td><code id="dataDWD_+3A_dfargs">dfargs</code></td>
<td>
<p>Named list of additional arguments passed to <code><a href="utils.html#topic+download.file">download.file()</a></code>
Note that mode=&quot;wb&quot; is already passed if <code>dbin=TRUE</code></p>
</td></tr>
<tr><td><code id="dataDWD_+3A_sleep">sleep</code></td>
<td>
<p>Number. If not 0, a random number of seconds between 0 and
<code>sleep</code> is passed to <code><a href="base.html#topic+Sys.sleep">Sys.sleep()</a></code> after each download
to avoid getting kicked off the FTP-Server,
see note in <code><a href="#topic+indexFTP">indexFTP()</a></code>. DEFAULT: 0</p>
</td></tr>
<tr><td><code id="dataDWD_+3A_progbar">progbar</code></td>
<td>
<p>Logical: present a progress bar with estimated remaining time?
If missing and length(file)==1, progbar is internally set to FALSE.
Only works if the R package <code>pbapply</code> is available. DEFAULT: TRUE (!quiet)</p>
</td></tr>
<tr><td><code id="dataDWD_+3A_browse">browse</code></td>
<td>
<p>Logical: open repository via <code><a href="utils.html#topic+browseURL">browseURL()</a></code> and
return URL folder path? If TRUE, no data is downloaded.
If file has several values, only unique folders will be opened.
DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="dataDWD_+3A_ntrunc">ntrunc</code></td>
<td>
<p>Single integer: number of filenames printed in messages
before they get truncated with message &quot;(and xx more)&quot;. DEFAULT: 2</p>
</td></tr>
<tr><td><code id="dataDWD_+3A_file">file</code></td>
<td>
<p>Deprecated since rdwd version 1.3.34, 2020-07-28.</p>
</td></tr>
<tr><td><code id="dataDWD_+3A_quiet">quiet</code></td>
<td>
<p>Logical: suppress message about directory / filenames?
DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="dataDWD_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="#topic+readDWD">readDWD()</a></code>,
like <code>fread</code>, <code>varnames</code>, <code>hr</code>, etc.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Presuming downloading and processing were successful:
if <code>read=TRUE</code>, the desired dataset
(as returned by <code><a href="#topic+readDWD">readDWD()</a></code>),
otherwise the filename as saved on disc
(may have &quot;_n&quot; appended in name, see <code><a href="berryFunctions.html#topic+newFilename">newFilename()</a></code>).<br />
If length(file)&gt;1, the output is a list of outputs / vector of filenames.<br />
The output is always invisible.
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Jun-Oct 2016
</p>


<h3>See Also</h3>

<p><code><a href="#topic+selectDWD">selectDWD()</a></code>. <code><a href="#topic+readDWD">readDWD()</a></code>, <code><a href="utils.html#topic+download.file">download.file()</a></code>.<br />
<a href="https://bookdown.org/brry/rdwd">https://bookdown.org/brry/rdwd</a><br />
Helpful for plotting: <code><a href="berryFunctions.html#topic+monthAxis">berryFunctions::monthAxis()</a></code>,
see also <code><a href="berryFunctions.html#topic+climateGraph">berryFunctions::climateGraph()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:  ## requires internet connection
# find FTP files for a given station name and file path:
link &lt;- selectDWD("Fuerstenzell", res="hourly", var="wind", per="recent")
# download file:
fname &lt;- dataDWD(link, dir=locdir(), read=FALSE) ; fname
# dir="DWDdata" is the default directory to store files
# unless force=TRUE, already obtained files will not be downloaded again

# read and plot file:
wind &lt;- readDWD(fname, varnames=TRUE) ; head(wind)
metafiles &lt;- readMeta(fname)          ; str(metafiles, max.level=1)
column_names &lt;- readVars(fname)       ; head(column_names)

plot(wind$MESS_DATUM, wind$F, main="DWD hourly wind Fuerstenzell", col="blue",
     xaxt="n", las=1, type="l", xlab="Date", ylab="Hourly Wind speed  [m/s]")
berryFunctions::monthAxis(1)


# current and historical files, keep historical in the overlap time period:
link &lt;- selectDWD("Potsdam", res="daily", var="kl", per="hr"); link
potsdam &lt;- dataDWD(link, dir=locdir(), hr=4)
plot(TMK~MESS_DATUM, data=tail(potsdam,1500), type="l")


# With many files (&gt;&gt;50), use sleep to avoid getting kicked off the FTP server
#links &lt;- selectDWD(res="daily", var="solar")
#sol &lt;- dataDWD(links, sleep=20) # random waiting time after download (0 to 20 secs)

# Real life examples can be found in the use cases section of the vignette:
# browseURL("https://bookdown.org/brry/rdwd")

## End(Not run)

</code></pre>

<hr>
<h2 id='dirDWD'>directory management for rdwd</h2><span id='topic+dirDWD'></span>

<h3>Description</h3>

<p>Manage directories with useful messages in the rdwd package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dirDWD(dir = "DWDdata", quiet = rdwdquiet())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dirDWD_+3A_dir">dir</code></td>
<td>
<p>Char for dirDWD: writeable directory name. Created if not existent.
DEFAULT: &quot;DWDdata&quot; at current <code><a href="base.html#topic+getwd">getwd()</a></code></p>
</td></tr>
<tr><td><code id="dirDWD_+3A_quiet">quiet</code></td>
<td>
<p>Logical: Suppress messages about creating dir? DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>dirDWD invisibly returns the prior working directory as per <code><a href="base.html#topic+setwd">setwd()</a></code>.
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Oct 2016
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dataDWD">dataDWD()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># see source code of dataDWD and metaDWD

</code></pre>

<hr>
<h2 id='dwdbase'>DWD FTP Server base URL</h2><span id='topic+dwdbase'></span><span id='topic+gridbase'></span>

<h3>Description</h3>

<p>base URLs to the DWD FTP Server<br /><br />
<strong><code>dwdbase</code></strong>: observed climatic records at ftp:// variant of<br />
<a href="https://opendata.dwd.de/climate_environment/CDC/observations_germany/climate/">https://opendata.dwd.de/climate_environment/CDC/observations_germany/climate/</a><br />
See <a href="https://bookdown.org/brry/rdwd/available-datasets.html">overview of available datasets</a>
and <a href="https://bookdown.org/brry/rdwd/station-selection.html">usage suggestions</a>.<br /><br /><br />
<strong><code>gridbase</code></strong>: spatially interpolated gridded data at ftp:// variant of<br />
<a href="https://opendata.dwd.de/climate_environment/CDC/grids_germany/">https://opendata.dwd.de/climate_environment/CDC/grids_germany/</a><br />
See <a href="https://bookdown.org/brry/rdwd/raster-data.html">usage suggestions</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dwdbase
</code></pre>


<h3>Format</h3>

<p>An object of class <code>character</code> of length 1.
</p>

<hr>
<h2 id='dwdparams'>DWD parameter explanations</h2><span id='topic+dwdparams'></span>

<h3>Description</h3>

<p>Short German parameter explanations for the DWD abbreviations
on the CDC FTP server.<br />
These are manually created by me and might need to be expanded if the DWD adds
more abbreviations.<br />
<code><a href="#topic+readVars">readVars()</a></code> maps them to the variable abbreviations in the
<code>"Metadaten_Parameter.*txt"</code> file in any given zip folder
and will warn about missing entries.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dwdparams
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 176 rows and 2 columns.
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Jun 2018
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readVars">readVars()</a></code>, <code><a href="#topic+readDWD">readDWD()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>head(dwdparams)

</code></pre>

<hr>
<h2 id='fileType'>determine DWD file type</h2><span id='topic+fileType'></span>

<h3>Description</h3>

<p>determine which subfunction to call in <code><a href="#topic+readDWD">readDWD()</a></code> from the file extension (ext).<br /><br />
The first block is for <strong>observational data</strong> (<a href="https://bookdown.org/brry/rdwd/available-datasets.html">overview</a>),
the second for  <strong>gridded data</strong> (<a href="https://bookdown.org/brry/rdwd/raster-data.html">overview</a>).<br />
Click on the <code>type</code> for the subfunction documentation, e.g. <a href="#topic+readDWD.data">data</a> for <code><a href="#topic+readDWD.data">readDWD.data()</a></code>.</p>

<table>
<tr>
 <td style="text-align: left;">
   <strong>type</strong> </td><td style="text-align: left;"> <strong>ext</strong> </td><td style="text-align: left;"> <strong>notes</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <a href="#topic+readDWD.data">data</a> </td><td style="text-align: left;"> .zip </td><td style="text-align: left;"> For regular data at <code><a href="#topic+dwdbase">dwdbase</a></code>. </td>
</tr>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <a href="#topic+readDWD.meta">meta</a> </td><td style="text-align: left;"> .txt </td><td style="text-align: left;"> For Beschreibung.txt files. For zip files containing station meta information, see <code><a href="#topic+readMeta">readMeta()</a></code>. </td>
</tr>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <a href="#topic+readDWD.multia">multia</a> </td><td style="text-align: left;"> [SO] </td><td style="text-align: left;"> [SO]: <code>file</code> ends with "Standort.txt" or contains multi_annual. Overrides <code>meta</code>. </td>
</tr>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <a href="#topic+readDWD.stand">stand</a> </td><td style="text-align: left;"> [SF] </td><td style="text-align: left;"> [SF]: <code>file</code> contains "standard_format". For subdaily/standard_format files. </td>
</tr>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <a href="#topic+readDWD.deriv">data</a> </td><td style="text-align: left;"> .txt.gz </td><td style="text-align: left;"> For data at /CDC/derived_germany/. </td>
</tr>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <a href="#topic+readDWD.pdf">pdf</a> </td><td style="text-align: left;"> .pdf </td><td style="text-align: left;"> only opens <code>file</code> in default viewer. </td>
</tr>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   ------- </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <a href="#topic+readDWD.radar">radar</a> </td><td style="text-align: left;"> .gz </td><td style="text-align: left;"> For when the <code>file</code> contains a single binary file. </td>
</tr>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <a href="#topic+readDWD.binary">binary</a> </td><td style="text-align: left;"> .tar.gz </td><td style="text-align: left;"> The common radolan format, as far as I can tell. </td>
</tr>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <a href="#topic+readDWD.raster">raster</a> </td><td style="text-align: left;"> .asc.gz </td><td style="text-align: left;"> E.g. for seasonal data at <code><a href="#topic+gridbase">gridbase</a></code>. </td>
</tr>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <a href="#topic+readDWD.nc">nc</a> </td><td style="text-align: left;"> .nc.gz </td><td style="text-align: left;"> For netcdf files. </td>
</tr>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <a href="#topic+readDWD.asc">asc</a> </td><td style="text-align: left;"> .tar </td><td style="text-align: left;"> For a <code>file</code> containing asc files. </td>
</tr>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <a href="#topic+readDWD.rklim">rklim</a> </td><td style="text-align: left;"> YW*.tar </td><td style="text-align: left;"> For a <code>file</code> containing bin files. </td>
</tr>
<tr>
 <td style="text-align: left;">
    </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   <a href="#topic+readDWD.grib2">grib2</a> </td><td style="text-align: left;"> .grib2.bz2 </td><td style="text-align: left;"> For an nwp forecast <code>file</code>. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Usage</h3>

<pre><code class='language-R'>fileType(file)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fileType_+3A_file">file</code></td>
<td>
<p>Filename(s) with extension.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character (vector)
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Jul 2020
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDWD">readDWD()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ft &lt;- read.table(header=TRUE, stringsAsFactors=FALSE, text="
type    filename
data    daily_kl_recent_tageswerte_KL_03987_akt.zip
meta    daily_kl_recent_KL_Tageswerte_Beschreibung_Stationen.txt
multia  multi_annual_mean_81-10_Temperatur_1981-2010_aktStandort.txt
multia  multi_annual_mean_81-10_Temperatur_1981-2010.txt
stand   subdaily_standard_format_kl_10381_00_akt.txt
deriv   derived_germany_soil_daily_historical_3987.txt.gz
pdf     DESCRIPTION_obsgermany_climate_monthly_kl_historical_en.pdf

radar   radolan_recent_bin_raa01-rw_10000-1802020250-dwd---bin.gz
binary  daily_radolan_historical_bin_2017_SF201712.tar.gz
raster  16_DJF_grids_germany_seasonal_air_temp_mean_188216.asc.gz
nc      daily_Project_TRY_humidity_RH_199509_daymean.nc.gz
asc     radolan_historical_asc_2018_RW-201809.tar
rklim   5_minutes_radolan_reproc_2017_002_bin_2020_YW2017.002_202006.tar
grib2   ftp_weather_nwp_cosmo-d2_005_T_2M.grib2.bz2
")
fileType(ft$filename)

stopifnot(fileType(ft$filename)==ft$type)
berryFunctions::is.error(fileType("random_stuff.odt"), force=TRUE)

stopifnot(validFileTypes %in% ft$type)
stopifnot(ft$type %in% validFileTypes)

</code></pre>

<hr>
<h2 id='findID'>find DWD weather station ID from name</h2><span id='topic+findID'></span>

<h3>Description</h3>

<p>Identify DWD weather station ID from station name
</p>


<h3>Usage</h3>

<pre><code class='language-R'>findID(
  name = "",
  exactmatch = TRUE,
  mindex = metaIndex,
  failempty = FALSE,
  quiet = rdwdquiet()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="findID_+3A_name">name</code></td>
<td>
<p>Char: station name(s) that will be matched in <code>mindex</code> to obtain
<strong>id</strong>. DEFAULT: &quot;&quot;</p>
</td></tr>
<tr><td><code id="findID_+3A_exactmatch">exactmatch</code></td>
<td>
<p>Logical: Should <code>name</code> match an entry in <code>mindex</code>
exactly (be <code><a href="base.html#topic++3D+3D">==</a></code>)?
If FALSE, <code>name</code> may be a part of <code>mindex$Stationsname</code>,
as checked with <code><a href="base.html#topic+grepl">grepl()</a></code>. This is useful e.g. to get
all stations starting with a name (e.g. 42 IDs for Berlin).
DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="findID_+3A_mindex">mindex</code></td>
<td>
<p>Single object: Index used to select <code>id</code> if <code>name</code>
is given. DEFAULT: <code><a href="#topic+metaIndex">metaIndex</a></code></p>
</td></tr>
<tr><td><code id="findID_+3A_failempty">failempty</code></td>
<td>
<p>Logical: fail if no matching names are found
(instead of returning NA with a warning)?
With the latter, <code><a href="#topic+selectDWD">selectDWD()</a></code> returns all files at a <code>res/var/per</code> folder.
This may be especially unwanted with <code>per="hr"</code>.
DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="findID_+3A_quiet">quiet</code></td>
<td>
<p>Logical: suppress length warnings? DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character string (vector) with ID(s)
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Oct-Nov 2016
</p>


<h3>See Also</h3>

<p>used in <code><a href="#topic+selectDWD">selectDWD()</a></code>, <code><a href="#topic+metaInfo">metaInfo()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Give weather station name (must be existing in metaIndex):
findID("Potsdam")
findID("potsDam") # capitalization is ignored
# all names containing "Hamburg":
findID("Hamburg", exactmatch=FALSE)
findID("Potsdam", exactmatch=FALSE)

# vectorized:
findID(c("Potsdam","Berlin-Buch"))

# German Umlauts are changed to ue, ae, oe, ss
findID("Muenchen", FALSE)
berryFunctions::convertUmlaut("M?nchen") # use this to convert umlauts in lists

</code></pre>

<hr>
<h2 id='index'>Indexes of files and metadata on the DWD CDC FTP server</h2><span id='topic+index'></span><span id='topic+fileIndex'></span><span id='topic+metaIndex'></span><span id='topic+geoIndex'></span><span id='topic+gridIndex'></span><span id='topic+formatIndex'></span>

<h3>Description</h3>

<p>Created with <code><a href="#topic+indexFTP">indexFTP()</a></code> and <code><a href="#topic+createIndex">createIndex()</a></code> used in <code><a href="#topic+updateIndexes">updateIndexes()</a></code>.<br />
In functions, you can access them with <code>rdwd:::fileIndex</code> etc.<br />
<strong>fileIndex</strong>: A data.frame with the filenames (and derived information)
at the default <code>base</code> value <code><a href="#topic+dwdbase">dwdbase</a></code>.<br />
<strong>metaIndex</strong>: A data.frame with the contents of all the station description files
(..._Beschreibung_Stationen.txt) under <code><a href="#topic+dwdbase">dwdbase</a></code>.<br />
<strong>geoIndex</strong>: <code>metaIndex</code> distilled to geographic locations.<br />
<strong>gridIndex</strong>: Vector of file paths at <code><a href="#topic+gridbase">gridbase</a></code>.<br />
<strong>formatIndex</strong>: (modified) table from
<a href="https://opendata.dwd.de/climate_environment/CDC/observations_germany/climate/subdaily/standard_format/formate_kl.html">https://opendata.dwd.de/climate_environment/CDC/observations_germany/climate/subdaily/standard_format/formate_kl.html</a><br />
</p>


<h3>Format</h3>

<p><strong>fileIndex</strong>: data.frame with character strings. ca 260k rows x 8 columns:<br />
<code>res</code>, <code>var</code>, <code>per</code> (see <code><a href="#topic+selectDWD">selectDWD()</a></code>),
station <code>id</code>, time series <code>start</code> and <code>end</code>, and
<code>ismeta</code> information, all according to <code>path</code>.<br />
<strong>metaIndex</strong>: data.frame with ca 97k rows for 12 columns:<br />
<code style="white-space: pre;">&#8288;Stations_id, von_datum, bis_datum, Stationshoehe, geoBreite, geoLaenge, Stationsname, Bundesland, res, var, per, hasfile&#8288;</code> <br />
<strong>geoIndex</strong>: data.frame with ca 6k rows for 11 columns:<br />
<code style="white-space: pre;">&#8288;id, name, state, lat, lon, ele, nfiles, nonpublic, recentfile, display, col&#8288;</code><br />
<strong>gridIndex</strong>: Vector with ca 50k file paths at <code><a href="#topic+gridbase">gridbase</a></code><br />
<strong>formatIndex</strong>: data.frame with 140 rows for 12 columns:<br />
<code style="white-space: pre;">&#8288;Ke_Ind, Kennung, Label, Beschreibung, Einheit, Code-Tabellen, Zusatzinfo, Typ, Pos, Erlaubt, Fehlk, dividebyten&#8288;</code><br />
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, June-Nov 2016, June 2017, Oct 2019
</p>


<h3>Source</h3>

<p>Deutscher WetterDienst / Climate Data Center  FTP Server
</p>


<h3>See Also</h3>

<p><code><a href="#topic+createIndex">createIndex()</a></code>, <code><a href="#topic+indexFTP">indexFTP()</a></code>, <code><a href="#topic+selectDWD">selectDWD()</a></code>,
<code><a href="#topic+findID">findID()</a></code>, <code><a href="#topic+metaInfo">metaInfo()</a></code>,
<a href="https://bookdown.org/brry/rdwd/fileindex.html">website index chapter</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(fileIndex)
data(metaIndex)
data(geoIndex)
head(fileIndex)
head(metaIndex)
head(geoIndex)

# in functions, you can use head(rdwd:::fileIndex) etc, but I don't export them
# because Hadley says 'Never @export a data set' in
# browseURL("http://r-pkgs.had.co.nz/data.html#data-data")

# To use a custom index, see
# browseURL("https://bookdown.org/brry/rdwd/fileindex.html")

</code></pre>

<hr>
<h2 id='indexFTP'>Create a recursive index of an FTP Server</h2><span id='topic+indexFTP'></span>

<h3>Description</h3>

<p>Create a list of all the files (in all subfolders) of an FTP server.
Defaults to the German Weather Service (DWD, Deutscher WetterDienst) OpenData server at
<a href="https://opendata.dwd.de/climate_environment/CDC/observations_germany/climate/">https://opendata.dwd.de/climate_environment/CDC/observations_germany/climate/</a>.<br />
The R package <code>RCurl</code> must be available to do this.<br /><br />
It's not suggested to run this for all folders, as it can take quite some time
and you may get kicked off the FTP-Server. This package contains an index
of the climatic observations at weather stations (<code><a href="#topic+fileIndex">fileIndex</a></code>)
and gridded datasets (<code><a href="#topic+gridIndex">gridIndex</a></code>).
If they are out of date, please let me know!<br /><br />
<strong>Getting banned from the FTP Server</strong><br />
Normally, this shouldn't happen anymore: since Version 0.10.10 (2018-11-26),
a single RCurl handle is used for all FTP requests and since version 1.0.17 (2019-05-14),
the file tree provided by the DWD is used to obtain all folders first,
eliminating the recursive calls.<br />
There's a provision if the FTP server detects bot requests and denies access.
If <code><a href="RCurl.html#topic+getURL">RCurl::getURL()</a></code> fails, there will still be an output
which you can pass in a second run via <code>folder</code> to extract the remaining dirs.
You might need to wait a bit and set <code>sleep</code> to a higher value in that case.
Here's an example:<br />
</p>
<div class="sourceCode"><pre>gridindex &lt;- indexFTP("", gridbase)
gridindex &lt;- indexFTP(gridindex, gridbase, sleep=15)
</pre></div>
<p>Of course, with a higher sleep value, the execution will take longer!
</p>


<h3>Usage</h3>

<pre><code class='language-R'>indexFTP(
  folder = "currentfindex",
  base = dwdbase,
  is.file.if.has.dot = TRUE,
  exclude.latest.bin = TRUE,
  fast = TRUE,
  sleep = 0,
  dir = "DWDdata",
  filename = folder[1],
  overwrite = FALSE,
  quiet = rdwdquiet(),
  progbar = !quiet,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="indexFTP_+3A_folder">folder</code></td>
<td>
<p>Folder(s) to be indexed recursively, e.g. &quot;/hourly/wind/&quot;.
Leading slashes will be removed.
Use <code>folder=""</code> to search at the location of <code>base</code> itself.
If <code>folder</code> is &quot;currentfindex&quot; (the default) and <code>base</code>
is the default, <code>folder</code> is changed to all observational
folders listed in the current tree file at
<a href="https://opendata.dwd.de/weather/tree.html">https://opendata.dwd.de/weather/tree.html</a>. With &quot;currentgindex&quot;
and <code>gridbase</code>, the grid folders in the tree are used.
DEFAULT: &quot;currentfindex&quot;</p>
</td></tr>
<tr><td><code id="indexFTP_+3A_base">base</code></td>
<td>
<p>Main directory of FTP server. Trailing slashes will be removed.
DEFAULT: <code><a href="#topic+dwdbase">dwdbase</a></code></p>
</td></tr>
<tr><td><code id="indexFTP_+3A_is.file.if.has.dot">is.file.if.has.dot</code></td>
<td>
<p>Logical: if some of the input paths contain a dot,
treat those as files, i.e. do not try to read those as if they
were a folder. Only set this to FALSE if you know what you're doing.
DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="indexFTP_+3A_exclude.latest.bin">exclude.latest.bin</code></td>
<td>
<p>Exclude latest file at opendata.dwd.de/weather/radar/radolan?
RCurl::getURL indicates this is a pointer to the last regularly named file.
DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="indexFTP_+3A_fast">fast</code></td>
<td>
<p>Read tree file with <code><a href="data.table.html#topic+fread">data.table::fread()</a></code>
(1 sec) instead of <code><a href="base.html#topic+readLines">readLines()</a></code> (10 secs)?
DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="indexFTP_+3A_sleep">sleep</code></td>
<td>
<p>If not 0, a random number of seconds between 0 and <code>sleep</code>
is passed to <code><a href="base.html#topic+Sys.sleep">Sys.sleep()</a></code> after each read folder
to avoid getting kicked off the FTP-Server, see note above. DEFAULT: 0</p>
</td></tr>
<tr><td><code id="indexFTP_+3A_dir">dir</code></td>
<td>
<p>Writeable directory name where to save the downloaded file.
Created if not existent.
DEFAULT: &quot;DWDdata&quot; at current <code><a href="base.html#topic+getwd">getwd()</a></code></p>
</td></tr>
<tr><td><code id="indexFTP_+3A_filename">filename</code></td>
<td>
<p>Character: Part of output filename. &quot;INDEX_of_DWD_&quot; is prepended,
&quot;/&quot; replaced with &quot;_&quot;, &quot;.txt&quot; appended. DEFAULT: folder[1]</p>
</td></tr>
<tr><td><code id="indexFTP_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical: Overwrite existing file? If not, &quot;_n&quot; is added to the
filename, see <code><a href="berryFunctions.html#topic+newFilename">berryFunctions::newFilename()</a></code>.
DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="indexFTP_+3A_quiet">quiet</code></td>
<td>
<p>Suppress progbars and message about directory/files?
DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="indexFTP_+3A_progbar">progbar</code></td>
<td>
<p>Logical: present a progress bar in each level? DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="indexFTP_+3A_verbose">verbose</code></td>
<td>
<p>Logical: write a lot of messages from <code><a href="RCurl.html#topic+getURL">RCurl::getURL()</a></code>?
DEFAULT: FALSE (usually, you dont need all the curl information)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector with file paths
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Oct 2016
</p>


<h3>See Also</h3>

<p><code><a href="#topic+createIndex">createIndex()</a></code>, <code><a href="#topic+updateIndexes">updateIndexes()</a></code>,
<a href="https://bookdown.org/brry/rdwd/fileindex.html">website index chapter</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:  ## Needs internet connection
sol &lt;- indexFTP(folder="/daily/solar", dir=tempdir())
head(sol)

# mon &lt;- indexFTP(folder="/monthly/kl", dir=tempdir(), verbose=TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='lldist'>distance between lat-long coordinates</h2><span id='topic+lldist'></span><span id='topic+maxlldist'></span>

<h3>Description</h3>

<p>Great-circle distance between points at lat-long coordinates.
Mostly a copy of OSMscale::earthDist Version 0.5.3 (2017-04-19).
<a href="https://github.com/brry/OSMscale/blob/master/R/earthDist.R#L57-L102">https://github.com/brry/OSMscale/blob/master/R/earthDist.R#L57-L102</a>.
Copied manually to avoid dependency hell.
Does not check coordinates. Not exported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lldist(lat, long, data, r = 6371, i = 1L)

maxlldist(lat, long, data, r = 6371, fun = max, each = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="lldist_+3A_lat">lat</code>, <code id="lldist_+3A_long">long</code></td>
<td>
<p>Latitude (North/South) and longitude (East/West) coordinates in decimal degrees</p>
</td></tr>
<tr><td><code id="lldist_+3A_data">data</code></td>
<td>
<p>Optional: data.frame with the columns <code>lat</code> and <code>long</code></p>
</td></tr>
<tr><td><code id="lldist_+3A_r">r</code></td>
<td>
<p>radius of the earth. Could be given in miles. DEFAULT: 6371 (km)</p>
</td></tr>
<tr><td><code id="lldist_+3A_i">i</code></td>
<td>
<p>Integer: Index element against which all coordinate pairs
are computed. DEFAULT: 1</p>
</td></tr>
<tr><td><code id="lldist_+3A_fun">fun</code></td>
<td>
<p>Function to be applied. DEFAULT: <code><a href="base.html#topic+max">max()</a></code></p>
</td></tr>
<tr><td><code id="lldist_+3A_each">each</code></td>
<td>
<p>Logical: give max dist to all other points for each point separately?
If FALSE, will return the maximum of the complete distance matrix,
as if <code>max(maxlldist(y,x))</code>. For examples, see
<a href="https://github.com/brry/OSMscale/blob/master/R/maxEarthDist.R#L14-L33">OSMscale::maxEarthDist</a>
DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="lldist_+3A_...">...</code></td>
<td>
<p>Further arguments passed to fun, like na.rm=TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector with distance(s) in km (or units of <code>r</code>, if <code>r</code> is changed)
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Aug 2016 + Jan 2017.
Angle formula from Diercke Weltatlas 1996, Page 245
</p>

<hr>
<h2 id='locdir'>local data directory</h2><span id='topic+locdir'></span>

<h3>Description</h3>

<p>This can be used to set a directory for DWD data across projects,
thus avoiding multiple downloads of the same file.<br />
Set the default for all subsequent calls with <code>options(rdwdlocdir="YOUR/PATH")</code>.<br />
Currently, the <code><a href="#topic+dataDWD">dataDWD()</a></code> <code>dir</code> defaults to a project specific folder at <a href="base.html#topic+getwd">getwd</a>.
In the future, this may change to <code>locdir()</code>.<br />
<code>locdir()</code> is used especially for the website, local tests and examples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>locdir(dir = getOption("rdwdlocdir"), file = NULL, quiet = rdwdquiet())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="locdir_+3A_dir">dir</code></td>
<td>
<p>Path to data directory.
If <code>dir</code> does not exist, <code><a href="base.html#topic+tempdir">tempdir()</a></code> is used instead
(with a warning, unless <code>quiet=TRUE</code>).
If <code>dir</code> is NULL, locdir tries &quot;C:/DWDdata&quot;, then &quot;~/DWDdata&quot;.<br />
<code>dir</code> can also be set with
<code>options(rdwdlocdir="YOUR/PATH")</code> thanks to the
DEFAULT: <a href="base.html#topic+getOption">getOption</a><code>("rdwdlocdir")</code></p>
</td></tr>
<tr><td><code id="locdir_+3A_file">file</code></td>
<td>
<p>Optional: path(s) at <code>dir</code>. DEFAULT: NULL</p>
</td></tr>
<tr><td><code id="locdir_+3A_quiet">quiet</code></td>
<td>
<p>Logical: suppress tempdir warning?
DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>charstring (directory)
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Apr 2019, Jun 2021
</p>


<h3>See Also</h3>

<p><code><a href="#topic+runLocalTests">runLocalTests()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>locdir()
oldopt &lt;- options(rdwdlocdir="~")
locdir()
stopifnot(locdir() == path.expand("~"))
options(oldopt) ; rm(oldopt)

</code></pre>

<hr>
<h2 id='metaInfo'>Information for a station ID on the DWD CDC FTP server</h2><span id='topic+metaInfo'></span>

<h3>Description</h3>

<p>Information for a station ID on the DWD CDC FTP server
</p>


<h3>Usage</h3>

<pre><code class='language-R'>metaInfo(id, mindex = metaIndex, hasfileonly = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="metaInfo_+3A_id">id</code></td>
<td>
<p>Station ID (integer number or convertible to one)</p>
</td></tr>
<tr><td><code id="metaInfo_+3A_mindex">mindex</code></td>
<td>
<p>Index dataframe with metadata. DEFAULT: <code><a href="#topic+metaIndex">metaIndex</a></code></p>
</td></tr>
<tr><td><code id="metaInfo_+3A_hasfileonly">hasfileonly</code></td>
<td>
<p>Logical: Only show entries that have files? DEFAULT: TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisible data.frame. Also <code><a href="base.html#topic+print">print</a>s</code> the output nicely formatted.
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Nov 2016
</p>


<h3>See Also</h3>

<p><code><a href="#topic+metaIndex">metaIndex</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>metaInfo(2849)

</code></pre>

<hr>
<h2 id='nearbyStations'>Find DWD stations close to given coordinates</h2><span id='topic+nearbyStations'></span>

<h3>Description</h3>

<p>Select DWD stations within a given radius around a set of coordinates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nearbyStations(
  lat,
  lon,
  radius,
  res = NA,
  var = NA,
  per = NA,
  mindate = NA,
  hasfileonly = TRUE,
  statname = "nearbyStations target location",
  quiet = rdwdquiet(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nearbyStations_+3A_lat">lat</code></td>
<td>
<p>Coordinates y component [degrees N/S, range 47:55]</p>
</td></tr>
<tr><td><code id="nearbyStations_+3A_lon">lon</code></td>
<td>
<p>Coordinates x component [degrees E/W, range 6:15]</p>
</td></tr>
<tr><td><code id="nearbyStations_+3A_radius">radius</code></td>
<td>
<p>Maximum distance [km] within which stations will be selected</p>
</td></tr>
<tr><td><code id="nearbyStations_+3A_res">res</code>, <code id="nearbyStations_+3A_var">var</code>, <code id="nearbyStations_+3A_per">per</code></td>
<td>
<p>Restrictions for dataset type as documented in
<code><a href="#topic+selectDWD">selectDWD()</a></code>. Each can be a vector of entries.
DEFAULTS: NA (ignored)</p>
</td></tr>
<tr><td><code id="nearbyStations_+3A_mindate">mindate</code></td>
<td>
<p>Minimum dataset ending date (as per metadata). DEFAULT: NA</p>
</td></tr>
<tr><td><code id="nearbyStations_+3A_hasfileonly">hasfileonly</code></td>
<td>
<p>Logical: only return entries for which there is an
open-access file available? DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="nearbyStations_+3A_statname">statname</code></td>
<td>
<p>Character: name for target location. DEFAULT:
&quot;nearbyStations target location&quot;</p>
</td></tr>
<tr><td><code id="nearbyStations_+3A_quiet">quiet</code></td>
<td>
<p>Logical: suppress progress messages? DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="nearbyStations_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="#topic+selectDWD">selectDWD()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="#topic+metaIndex">metaIndex</a></code> subset with additional columns &quot;dist&quot; and &quot;url&quot;
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Mar 2017
</p>


<h3>See Also</h3>

<p><code><a href="#topic+selectDWD">selectDWD()</a></code>, <code><a href="#topic+metaIndex">metaIndex</a></code>,
<a href="https://bookdown.org/brry/rdwd/use-case-plot-all-rainfall-values-around-a-given-point.html">website use case with nearbyStations</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
m &lt;- nearbyStations(49.211784, 9.812475, radius=30,
    res=c("daily","hourly"), var= c("precipitation","more_precip","kl") ,
    mindate=as.Date("2016-05-30"), statname="Braunsbach catchment center")
# View(m)

# for a continued example of this, see the vignette in chapter
# use case: plot all rainfall values around a given point
# browseURL("https://bookdown.org/brry/rdwd")

</code></pre>

<hr>
<h2 id='newColumnNames'>Enhance readDWD column names</h2><span id='topic+newColumnNames'></span>

<h3>Description</h3>

<p>Add short German parameter descriptions to the DWD abbreviations.
This uses <code><a href="#topic+dwdparams">dwdparams()</a></code> to create column names like
&quot;TT_TU.Lufttemperatur&quot; and &quot;RSK.Niederschlagshoehe.&quot;
Column names not in the abbreviation list will be left untouched.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>newColumnNames(dataframe, variables = dwdparams, separator = ".")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="newColumnNames_+3A_dataframe">dataframe</code></td>
<td>
<p>Dataframe as returned by <code><a href="#topic+readDWD.data">readDWD.data()</a></code></p>
</td></tr>
<tr><td><code id="newColumnNames_+3A_variables">variables</code></td>
<td>
<p>Dataframe as returned by <code><a href="#topic+readVars">readVars()</a></code> for a
single file. Rownames must be variable abbreviations.
There must be a &quot;Kurz&quot; column.
DEFAULT: <code><a href="#topic+dwdparams">dwdparams</a></code></p>
</td></tr>
<tr><td><code id="newColumnNames_+3A_separator">separator</code></td>
<td>
<p>Separator between abbreviation and long name. DEFAULT: &quot;.&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The <code>dataframe</code> with new column names
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Apr 2019
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dwdparams">dwdparams</a></code>, <code><a href="#topic+readVars">readVars()</a></code>,  <code><a href="#topic+readDWD">readDWD()</a></code> argument <code>varnames</code>, <code><a href="#topic+newColumnNames">newColumnNames()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># mainly for internal usage

</code></pre>

<hr>
<h2 id='plotDWD'>Quickly plot time series</h2><span id='topic+plotDWD'></span>

<h3>Description</h3>

<p>plot rdwd time series from data.frames
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotDWD(
  x,
  cn,
  monthaxis = TRUE,
  line0 = FALSE,
  xlab = "",
  ylab = cn,
  main = "",
  type = "l",
  lwd = 3,
  col = "blue",
  las = 1,
  mar = c(2.6, 3.1, 2.5, 0.5),
  mgp = c(1.9, 0.7, 0),
  keeppar = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotDWD_+3A_x">x</code></td>
<td>
<p>Data.frame, e.g. from <a href="#topic+readDWD.data">readDWD.data</a></p>
</td></tr>
<tr><td><code id="plotDWD_+3A_cn">cn</code></td>
<td>
<p>Column name (charstring)</p>
</td></tr>
<tr><td><code id="plotDWD_+3A_monthaxis">monthaxis</code></td>
<td>
<p>Draw nice axis? DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="plotDWD_+3A_line0">line0</code></td>
<td>
<p>Draw horizontal line at 0? DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="plotDWD_+3A_xlab">xlab</code></td>
<td>
<p>X axis label. DEFAULT: &quot;&quot;</p>
</td></tr>
<tr><td><code id="plotDWD_+3A_ylab">ylab</code></td>
<td>
<p>Y axis label. DEFAULT: cn</p>
</td></tr>
<tr><td><code id="plotDWD_+3A_main">main</code></td>
<td>
<p>Plot title. DEFAULT: &quot;&quot;</p>
</td></tr>
<tr><td><code id="plotDWD_+3A_type">type</code></td>
<td>
<p><a href="graphics.html#topic+plot.default">graphics::plot</a> type. DEFAULT: &quot;l&quot;</p>
</td></tr>
<tr><td><code id="plotDWD_+3A_lwd">lwd</code></td>
<td>
<p>Line width. DEFAULT: 3</p>
</td></tr>
<tr><td><code id="plotDWD_+3A_col">col</code></td>
<td>
<p>Line color. DEFAULT: &quot;blue&quot;</p>
</td></tr>
<tr><td><code id="plotDWD_+3A_las">las</code></td>
<td>
<p>Label axis style. DEFAULT: 1 (all upright)</p>
</td></tr>
<tr><td><code id="plotDWD_+3A_mar">mar</code></td>
<td>
<p>Plot margins. DEFAULT: c(2.6, 3.1, 2.5, 0.5)</p>
</td></tr>
<tr><td><code id="plotDWD_+3A_mgp">mgp</code></td>
<td>
<p>Margin placement. DEFAULT: c(1.9, 0.7, 0)</p>
</td></tr>
<tr><td><code id="plotDWD_+3A_keeppar">keeppar</code></td>
<td>
<p>Keep <code style="white-space: pre;">&#8288;las, mar and mgp&#8288;</code> as set with <a href="graphics.html#topic+par">par</a>,
so later points are added in the right location?
DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="plotDWD_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <a href="graphics.html#topic+plot.default">graphics::plot</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Sep 2021
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDWD">readDWD()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>link &lt;- selectDWD("Potsdam", res="daily", var="kl", per="r")
clim &lt;- dataDWD(link, dir=locdir(), varnames=TRUE)
plotDWD(clim, "TMK.Lufttemperatur", line0=TRUE, main="Potsdam")

</code></pre>

<hr>
<h2 id='plotRadar'>plot radar products on a pretty map</h2><span id='topic+plotRadar'></span>

<h3>Description</h3>

<p>Convenience function to plot radar products on a pretty map.
Creates a separate plot for each layer, a selection is possible.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotRadar(
  x,
  layer = NULL,
  main = names(x),
  land = "gray80",
  sea = "cadetblue1",
  de = "grey80",
  eu = "black",
  col = berryFunctions::seqPal(),
  xlim = NULL,
  ylim = NULL,
  zlim = NULL,
  axes = TRUE,
  las = 1,
  mar = c(2.5, 3.5, 2.5, 5),
  keeppar = TRUE,
  project = TRUE,
  proj = "radolan",
  extent = "radolan",
  adjust05 = FALSE,
  targetproj = "ll",
  quiet = rdwdquiet(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotRadar_+3A_x">x</code></td>
<td>
<p>terra raster oject, e.g. 'dat' element of object returned by <code><a href="#topic+readDWD">readDWD()</a></code>.</p>
</td></tr>
<tr><td><code id="plotRadar_+3A_layer">layer</code></td>
<td>
<p>Optional: selected layer(s) to be plotted. DEFAULT: NULL</p>
</td></tr>
<tr><td><code id="plotRadar_+3A_main">main</code></td>
<td>
<p>Graph title(s). Use &quot;&quot; to suppress.
DEFAULT: names(x)</p>
</td></tr>
<tr><td><code id="plotRadar_+3A_land">land</code></td>
<td>
<p>Color of land areas in the map. DEFAULT: &quot;gray80&quot;</p>
</td></tr>
<tr><td><code id="plotRadar_+3A_sea">sea</code></td>
<td>
<p>Color of sea areas in the map. DEFAULT: &quot;cadetblue1&quot;</p>
</td></tr>
<tr><td><code id="plotRadar_+3A_de">de</code></td>
<td>
<p>Color of Deutschland Bundesland borders. DEFAULT: &quot;grey80&quot;</p>
</td></tr>
<tr><td><code id="plotRadar_+3A_eu">eu</code></td>
<td>
<p>Color of Europe country borders . DEFAULT: &quot;black&quot;</p>
</td></tr>
<tr><td><code id="plotRadar_+3A_col">col</code></td>
<td>
<p>Color palette for the data itself.
DEFAULT: <code><a href="berryFunctions.html#topic+seqPal">berryFunctions::seqPal()</a></code></p>
</td></tr>
<tr><td><code id="plotRadar_+3A_xlim">xlim</code></td>
<td>
<p>xlim. DEFAULT: NULL, i.e. taken from x extent (after reprojection if <code>project=TRUE</code>)</p>
</td></tr>
<tr><td><code id="plotRadar_+3A_ylim">ylim</code></td>
<td>
<p>ylim. DEFAULT: NULL, i.e. taken from y extent (after reprojection if <code>project=TRUE</code>)</p>
</td></tr>
<tr><td><code id="plotRadar_+3A_zlim">zlim</code></td>
<td>
<p>zlim. 3 Options: two-number vector,
<code>zlim="ind"</code> for individual zlim per layer,
or NULL for <code>range</code> of selected layer(s).
DEFAULT: NULL</p>
</td></tr>
<tr><td><code id="plotRadar_+3A_axes">axes</code></td>
<td>
<p>Draw axes? DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="plotRadar_+3A_las">las</code></td>
<td>
<p>LabelAxisStyle for axes. DEFAULT: 1 (all upright)</p>
</td></tr>
<tr><td><code id="plotRadar_+3A_mar">mar</code></td>
<td>
<p>Vector with plot margins. DEFAULT: c(2.5, 3.5, 2.5, 5)</p>
</td></tr>
<tr><td><code id="plotRadar_+3A_keeppar">keeppar</code></td>
<td>
<p>Logical: keep the margins set with par, so later points etc are
added in the right location?
DEFAULT: TRUE, opposite to <code>sf::plot</code> with reset=TRUE, see
<a href="https://github.com/cran/sf/blob/master/R/plot.R">https://github.com/cran/sf/blob/master/R/plot.R</a></p>
</td></tr>
<tr><td><code id="plotRadar_+3A_project">project</code></td>
<td>
<p>Project the data before plotting? Not needed if
<code><a href="#topic+projectRasterDWD">projectRasterDWD()</a></code> has already been called. DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="plotRadar_+3A_proj">proj</code></td>
<td>
<p>current projection, see <code><a href="#topic+projectRasterDWD">projectRasterDWD()</a></code>,
used only if <code>project=TRUE</code>. DEFAULT: &quot;radolan&quot;</p>
</td></tr>
<tr><td><code id="plotRadar_+3A_extent">extent</code></td>
<td>
<p>current extent, see <code><a href="#topic+projectRasterDWD">projectRasterDWD()</a></code>,
used only if <code>project=TRUE</code>. DEFAULT: &quot;radolan&quot;</p>
</td></tr>
<tr><td><code id="plotRadar_+3A_adjust05">adjust05</code></td>
<td>
<p>Logical: Adjust extent by 0.5m to match edges? DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="plotRadar_+3A_targetproj">targetproj</code></td>
<td>
<p>target projection, see <code><a href="#topic+projectRasterDWD">projectRasterDWD()</a></code>,
used only if <code>project=TRUE</code>. DEFAULT: &quot;ll&quot;</p>
</td></tr>
<tr><td><code id="plotRadar_+3A_quiet">quiet</code></td>
<td>
<p>suppress progress messages? DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="plotRadar_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="terra.html#topic+plot">terra::plot()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>terra object, (re)projected (if <code>project=TRUE</code>).
If <code>length(layer)==1</code>, only that selected layer is returned.
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Feb 2020, June 2023
</p>


<h3>See Also</h3>

<p><code><a href="#topic+projectRasterDWD">projectRasterDWD()</a></code>, <code><a href="#topic+addBorders">addBorders()</a></code>, <code><a href="#topic+readDWD">readDWD()</a></code>,
<a href="https://bookdown.org/brry/rdwd/raster-data.html">website raster chapter</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See https://bookdown.org/brry/rdwd/raster-data.html
## Not run:  ## Excluded from CRAN checks: requires internet connection
link &lt;- "seasonal/air_temperature_mean/16_DJF/grids_germany_seasonal_air_temp_mean_188216.asc.gz"
rad &lt;- dataDWD(link, base=gridbase, joinbf=TRUE)
radp &lt;- plotRadar(rad, proj="seasonal", extent=NULL, main="plotRadar ex")
plotRadar(radp, ylim=c(52,54), project=FALSE)

# plotRadar equivalent, map only country borders:
radpm &lt;- projectRasterDWD(rad[[1]], proj="seasonal", extent=NULL)
terra::plot(radpm)
addBorders()

# several layers
url &lt;- "daily/Project_TRY/pressure/PRED_199606_daymean.nc.gz"  #  5 MB
nc &lt;- dataDWD(url, base=gridbase, joinbf=TRUE)

ncp3 &lt;- plotRadar(nc, main=paste(terra::longnames(nc), terra::time(nc)), layer=1:3,
                  col=terrain.colors(100), proj="nc", extent="nc")
plotRadar(ncp3, layer=3:4, project=FALSE) # still has all layers
plotRadar(ncp3, layer=4:5, project=FALSE, zlim="ind") # individual zlims per layer
plotRadar(ncp3, layer=1, project=FALSE, zlim=c(1016,1020))

ncp1 &lt;- plotRadar(nc, layer=1, proj="nc", extent="nc") # much faster projection
# no longer has layers 2-4:
berryFunctions::is.error(plotRadar(ncp1, layer=1:4, project=FALSE), TRUE, TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='projectRasterDWD'>project DWD raster data</h2><span id='topic+projectRasterDWD'></span>

<h3>Description</h3>

<p>Set projection and extent for DWD raster data. Optionally (and
per default) also reprojects to latlon data.<br /><br />
<strong>WARNING:</strong> reprojection to latlon changes values slightly. For the
tested RX product, this change is significant, see:
<a href="https://github.com/brry/rdwd/blob/master/misc/ExampleTests/Radartests.pdf">https://github.com/brry/rdwd/blob/master/misc/ExampleTests/Radartests.pdf</a><br />
In terra::plot, <strong>use range=zlim with the original range</strong> if needed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>projectRasterDWD(
  r,
  proj = "radolan",
  extent = "radolan",
  adjust05 = FALSE,
  targetproj = "ll",
  threads = TRUE,
  quiet = rdwdquiet()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="projectRasterDWD_+3A_r">r</code></td>
<td>
<p>terra raster object</p>
</td></tr>
<tr><td><code id="projectRasterDWD_+3A_proj">proj</code></td>
<td>
<p>Current projection to be given to <code>r</code>. Can be<br />
- a <code><a href="terra.html#topic+crs">terra::crs()</a></code> input,<br />
- NULL to not set proj+extent (but still consider <code>targetproj</code>),<br />
- or a special charstring for internal defaults, namely:
&quot;radolan&quot; (readDWD.binary + .asc + .radar), &quot;seasonal&quot; (.raster) or &quot;nc&quot;  (.nc).<br />
DEFAULT: &quot;radolan&quot;</p>
</td></tr>
<tr><td><code id="projectRasterDWD_+3A_extent">extent</code></td>
<td>
<p>Current <code><a href="terra.html#topic+ext">terra::ext()</a></code> extent to be given to <code>r</code>.
Ignored if <code>proj=NULL</code>. Can be NULL to be ignored, an extent object,
a vector with 4 numbers, or &quot;radolan&quot; / &quot;rw&quot; / &quot;seasonal&quot; / &quot;nc&quot; with internal defaults.
DEFAULT: &quot;radolan&quot;</p>
</td></tr>
<tr><td><code id="projectRasterDWD_+3A_adjust05">adjust05</code></td>
<td>
<p>Logical: Adjust extent by 0.5m to match edges? DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="projectRasterDWD_+3A_targetproj">targetproj</code></td>
<td>
<p><code>r</code> is reprojected to this <code><a href="terra.html#topic+crs">terra::crs()</a></code>.
Use NULL to not reproject (i.e. only set proj and extent).
DEFAULT: &quot;ll&quot; with internal default for lat-lon.</p>
</td></tr>
<tr><td><code id="projectRasterDWD_+3A_threads">threads</code></td>
<td>
<p>Use multiple CPU threads for <code><a href="terra.html#topic+project">terra::project()</a></code>?
DEFAULT: TRUE (opposite from terra::project)</p>
</td></tr>
<tr><td><code id="projectRasterDWD_+3A_quiet">quiet</code></td>
<td>
<p>Logical: suppress progress messages? DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The internal defaults are extracted from the Kompositformatbeschreibung at
<a href="https://www.dwd.de/DE/leistungen/radolan/radolan.html">https://www.dwd.de/DE/leistungen/radolan/radolan.html</a>, as provided
2019-04 by Antonia Hengst.<br /> The nc extent was obtained by projecting
Germanys bbox to EPSG 3034 (specified in the DWD documentation). Using that
as a starting point, I then refined the extent to a visual match, see
<a href="https://github.com/brry/rdwd/blob/master/misc/developmentNotes.R">developmentNotes.R</a><br /><br />
</p>


<h3>Value</h3>

<p>terra raster object with projection and extent, invisible
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, May 2019, June 2023
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plotRadar">plotRadar()</a></code><br />
<code style="white-space: pre;">&#8288;terra::&#8288;</code><code><a href="terra.html#topic+crs">crs</a></code> / <code><a href="terra.html#topic+ext">ext</a></code> / <code><a href="terra.html#topic+project">project</a></code><br />
<code>readDWD.</code><code><a href="#topic+readDWD.binary">binary</a></code> / <code><a href="#topic+readDWD.raster">raster</a></code> /
<code><a href="#topic+readDWD.asc">asc</a></code> / <code><a href="#topic+readDWD.radar">radar</a></code> / <code><a href="#topic+readDWD.nc">nc</a></code><br />
<a href="https://bookdown.org/brry/rdwd/raster-data.html">website raster chapter</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># To be used after readDWD.binary etc
</code></pre>

<hr>
<h2 id='rdwdquiet'>global quiet option for rdwd</h2><span id='topic+rdwdquiet'></span>

<h3>Description</h3>

<p>global quiet option. The default <code>rdwdquiet()</code> is <code>FALSE</code>.<br />
Just write the following in your code and all subsequent calls will be quiet:<br />
<code>options(rdwdquiet=TRUE)</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rdwdquiet()
</code></pre>

<hr>
<h2 id='readDWD'>Process data from the DWD CDC FTP Server</h2><span id='topic+readDWD'></span>

<h3>Description</h3>

<p>Read climate data that was downloaded with <code><a href="#topic+dataDWD">dataDWD()</a></code>.
The data is unzipped and subsequently, the file(s) are read, processed and
returned as a data.frame / terra raster object.<br /><br />
For observational data, new users are advised to set <code>varnames=TRUE</code>
to obtain more informative column names.<br /><br />
<code>readDWD</code> will call internal (but documented) subfunctions depending on the
argument <code>type</code>, see the overview in <code><a href="#topic+fileType">fileType()</a></code>.<br /><br />
Not all arguments to <code>readDWD</code> are used for all subfunctions, e.g.
<code>fread</code> is used only by <code><a href="#topic+readDWD.data">readDWD.data</a></code>, while <code>dividebyten</code>
is used in <code><a href="#topic+readDWD.raster">readDWD.raster</a></code> and <code><a href="#topic+readDWD.asc">readDWD.asc</a></code>.<br /><br />
<code>file</code> can be a vector with several filenames. Most other arguments can
also be a vector and will be recycled to the length of <code>file</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readDWD(
  file,
  type = fileType(file),
  varnames = FALSE,
  fread = NA,
  format = NA,
  tz = "GMT",
  hr = 0,
  dividebyten = TRUE,
  var = "",
  progbar = !quiet,
  quiet = rdwdquiet(),
  quietread = quiet,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readDWD_+3A_file">file</code></td>
<td>
<p>Char (vector): name(s) of the file(s) downloaded with
<code><a href="#topic+dataDWD">dataDWD()</a></code>,
e.g. &quot;~/DWDdata/tageswerte_KL_02575_akt.zip&quot; or
&quot;~/DWDdata/RR_Stundenwerte_Beschreibung_Stationen.txt&quot;</p>
</td></tr>
<tr><td><code id="readDWD_+3A_type">type</code></td>
<td>
<p>Character (vector) determining which subfunction to call.
DEFAULT:  <code><a href="#topic+fileType">fileType</a></code><code>(file)</code>.</p>
</td></tr>
<tr><td><code id="readDWD_+3A_varnames">varnames</code></td>
<td>
<p>Logical (vector): Expand column names?
Only used in <code><a href="#topic+readDWD.data">readDWD.data()</a></code>.
DEFAULT: FALSE (for backward compatibility)</p>
</td></tr>
<tr><td><code id="readDWD_+3A_fread">fread</code></td>
<td>
<p>Logical (vector): read fast? Used in <code><a href="#topic+readDWD.data">readDWD.data()</a></code>.
DEFAULT: NA</p>
</td></tr>
<tr><td><code id="readDWD_+3A_format">format</code>, <code id="readDWD_+3A_tz">tz</code></td>
<td>
<p>Format and time zone of time stamps, see <code><a href="#topic+readDWD.data">readDWD.data()</a></code></p>
</td></tr>
<tr><td><code id="readDWD_+3A_hr">hr</code></td>
<td>
<p>Integer code to merge historical and recent file.
Used here, but documented in detail in <code><a href="#topic+readDWD.data">readDWD.data()</a></code>.
DEFAULT: 0 (ignore argument)</p>
</td></tr>
<tr><td><code id="readDWD_+3A_dividebyten">dividebyten</code></td>
<td>
<p>Logical (vector): Divide the values in raster files by ten?
That way, [1/10 mm] gets transformed to [mm] units.
Used in <code><a href="#topic+readDWD.radar">readDWD.radar()</a></code>, <code><a href="#topic+readDWD.raster">readDWD.raster()</a></code> and <code><a href="#topic+readDWD.asc">readDWD.asc()</a></code>.
DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="readDWD_+3A_var">var</code></td>
<td>
<p>var for <code><a href="#topic+readDWD.nc">readDWD.nc()</a></code>. DEFAULT: &quot;&quot;</p>
</td></tr>
<tr><td><code id="readDWD_+3A_progbar">progbar</code></td>
<td>
<p>Logical: present a progress bar with estimated remaining time?
If missing and length(file)==1, progbar is internally set to FALSE,
unless binary files are to be read.
DEFAULT: !quiet</p>
</td></tr>
<tr><td><code id="readDWD_+3A_quiet">quiet</code></td>
<td>
<p>Logical: suppress messages? DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="readDWD_+3A_quietread">quietread</code></td>
<td>
<p>Logical: suppress message like
&quot;Reading 1 file with readDWD.data() and fread=TRUE ...&quot;.
DEFAULT: <code>quiet</code></p>
</td></tr>
<tr><td><code id="readDWD_+3A_...">...</code></td>
<td>
<p>Further arguments passed to the internal <code style="white-space: pre;">&#8288;readDWD.*&#8288;</code>
subfunctions (see <code><a href="#topic+fileType">fileType</a></code>) and from those to the
underlying actual reading functions</p>
</td></tr>
</table>


<h3>Value</h3>

<p>For observational data, an invisible data.frame of the desired dataset,
or a named list of data.frames if length(file) &gt; 1.<br />
For gridded data, terra raster objects.
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Jul-Oct 2016, Winter 2018/19
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dataDWD">dataDWD()</a></code>, <code><a href="#topic+readVars">readVars()</a></code>, <code><a href="#topic+readMeta">readMeta()</a></code>, <code><a href="#topic+selectDWD">selectDWD()</a></code>, <code><a href="#topic+fileType">fileType()</a></code><br />
<a href="https://bookdown.org/brry/rdwd">https://bookdown.org/brry/rdwd</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># see dataDWD and readDWD.* subfunctions

</code></pre>

<hr>
<h2 id='readDWD.asc'>read dwd gridded radolan asc data</h2><span id='topic+readDWD.asc'></span>

<h3>Description</h3>

<p>read grid-interpolated radolan asc data.
Intended to be called via <code><a href="#topic+readDWD">readDWD()</a></code>.<br />
All layers (following <code>selection</code> if given) in all .tar.gz files are
combined into a terra raster with <code><a href="terra.html#topic+rast">terra::rast()</a></code>.<br />
To project the data, use <code><a href="#topic+projectRasterDWD">projectRasterDWD()</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readDWD.asc(
  file,
  exdir = NULL,
  dividebyten = TRUE,
  selection = NULL,
  quiet = rdwdquiet(),
  progbar = !quiet,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readDWD.asc_+3A_file">file</code></td>
<td>
<p>Name of file on harddrive, like e.g.
DWDdata/grids_germany/hourly/radolan/historical/asc/
2018_RW-201809.tar.
Must have been downloaded with <code>mode="wb"</code>!</p>
</td></tr>
<tr><td><code id="readDWD.asc_+3A_exdir">exdir</code></td>
<td>
<p>Directory to unzip into. Unpacked files existing therein
will not be untarred again, saving up to 15 secs per file.
DEFAULT: NULL (subfolder of <code><a href="base.html#topic+tempdir">tempdir()</a></code>)</p>
</td></tr>
<tr><td><code id="readDWD.asc_+3A_dividebyten">dividebyten</code></td>
<td>
<p>Divide numerical values by 10? See <a href="#topic+readDWD">readDWD</a>.
If dividebyten=FALSE and exdir left at NULL (tempdir), save
the result on disc with <code><a href="terra.html#topic+writeRaster">terra::writeRaster()</a></code>.
Accessing out-of-memory raster objects won't work if
exdir is removed! -&gt; Error in .local(.Object, ...)
DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="readDWD.asc_+3A_selection">selection</code></td>
<td>
<p>Optionally read only a subset of the ~24*31=744 files.
Called as <code>f[selection]</code>. DEFAULT: NULL (ignored)</p>
</td></tr>
<tr><td><code id="readDWD.asc_+3A_quiet">quiet</code></td>
<td>
<p>Suppress progress messages?
DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="readDWD.asc_+3A_progbar">progbar</code></td>
<td>
<p>Show progress bars? <code><a href="#topic+readDWD">readDWD()</a></code> will
keep progbar=TRUE for asc files, even if length(file)==1.
DEFAULT: !quiet, i.e. TRUE</p>
</td></tr>
<tr><td><code id="readDWD.asc_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="terra.html#topic+rast">terra::rast()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, April 2019
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDWD">readDWD()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:  # Excluded from CRAN checks, but run in localtests
# File selection and download:
radbase &lt;- paste0(gridbase,"/hourly/radolan/historical/asc/")
radfile &lt;- "2018/RW-201809.tar" # 25 MB to download
file &lt;- dataDWD(radfile, base=radbase, joinbf=TRUE, read=FALSE)
#asc &lt;- readDWD(file) # 4 GB in mem. ~ 20 secs unzip, 10 secs read, 2 min divide
asc &lt;- readDWD(file, selection=1:5, dividebyten=TRUE)
plotRadar(asc[[1]], main=names(asc)[1])

viddir &lt;- paste0(tempdir(),"/RadolanVideo")
dir.create(viddir)
png(paste0(viddir,"/Radolan_%03d.png"), width=7, height=5, units="in", res=300)
plotRadar(asc, layer=1:3, main=names(asc)) # 3 secs per layer
dev.off()
berryFunctions::openFile(paste0(viddir,"/Radolan_001.png"))

# Time series of a given point in space:
plot(unlist(asc[800,800,]), type="l", xlab="Time [hours]")

# if dividebyten=FALSE, terra stores things out of memory in the exdir.
# by default, this is in tempdir, hence you would need to save asc manually:
# terra::writeRaster(asc, tempfile(fileext="/RW2018-09.gpkg"), overwrite=TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='readDWD.binary'>read dwd gridded radolan binary data</h2><span id='topic+readDWD.binary'></span>

<h3>Description</h3>

<p>read gridded radolan binary data.
Intended to be called via <code><a href="#topic+readDWD">readDWD()</a></code>.<br />
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readDWD.binary(
  file,
  exdir = sub(".tar.gz$", "", file),
  toraster = TRUE,
  quiet = rdwdquiet(),
  progbar = !quiet,
  selection = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readDWD.binary_+3A_file">file</code></td>
<td>
<p>Name of file on harddrive, like e.g.
DWDdata/daily_radolan_historical_bin_2017_SF201712.tar.gz</p>
</td></tr>
<tr><td><code id="readDWD.binary_+3A_exdir">exdir</code></td>
<td>
<p>Directory to unzip into. If existing, only the needed files
will be unpacked with <code><a href="utils.html#topic+untar">untar()</a></code>. Note that exdir
size will be around 1.1 GB. exdir can contain other files,
these will be ignored for the actual reading with
<code><a href="dwdradar.html#topic+readRadarFile">dwdradar::readRadarFile()</a></code>.
DEFAULT exdir: sub(&quot;.tar.gz$&quot;, &quot;&quot;, file)</p>
</td></tr>
<tr><td><code id="readDWD.binary_+3A_toraster">toraster</code></td>
<td>
<p>Logical: convert output (list of matrixes + meta informations)
to a list with dat (<code><a href="terra.html#topic+rast">terra::rast</a></code>) +
meta (list from the first subfile, but with vector of dates)?
DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="readDWD.binary_+3A_quiet">quiet</code></td>
<td>
<p>Suppress progress messages?
DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="readDWD.binary_+3A_progbar">progbar</code></td>
<td>
<p>Show progress bars? <code><a href="#topic+readDWD">readDWD()</a></code> will
keep progbar=TRUE for binary files, even if length(file)==1.
DEFAULT: !quiet, i.e. TRUE</p>
</td></tr>
<tr><td><code id="readDWD.binary_+3A_selection">selection</code></td>
<td>
<p>Optionally read only a subset of the ~24*31=744 files.
Called as <code>f[selection]</code>. DEFAULT: NULL (ignored)</p>
</td></tr>
<tr><td><code id="readDWD.binary_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="dwdradar.html#topic+readRadarFile">dwdradar::readRadarFile()</a></code>,
i.e. <code>na</code> and <code>clutter</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>list depending on argument <code>toraster</code>, see there for details
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Dec 2018.
Significant input for the underlying <code><a href="dwdradar.html#topic+readRadarFile">dwdradar::readRadarFile()</a></code> came
from Henning Rust &amp; Christoph Ritschel at FU Berlin.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDWD">readDWD()</a></code>, especially <code><a href="#topic+readDWD.radar">readDWD.radar()</a></code><br />
<a href="https://wradlib.org">https://wradlib.org</a> for much more extensive radar analysis in Python<br />
Kompositformatbeschreibung at <a href="https://www.dwd.de/DE/leistungen/radolan/radolan.html">https://www.dwd.de/DE/leistungen/radolan/radolan.html</a>
for format description
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:  # Excluded from CRAN checks, but run in localtests

# SF file as example: ----

SF_link &lt;- "/daily/radolan/historical/bin/2017/SF201712.tar.gz"
SF_file &lt;- dataDWD(url=SF_link, base=gridbase, joinbf=TRUE,   # 204 MB
                     dir=locdir(), read=FALSE)
# exdir radardir set to speed up my tests:
SF_exdir &lt;- "C:/Users/berry/Desktop/DWDbinarySF"
if(!file.exists(SF_exdir)) SF_exdir &lt;- tempdir()
# no need to read all 24*31=744 files, so setting selection:
SF_rad &lt;- readDWD(SF_file, selection=1:10, exdir=SF_exdir) #with toraster=TRUE
if(length(SF_rad)!=2) stop("length(SF_rad) should be 2, but is ", length(SF_rad))

SF_radp &lt;- plotRadar(SF_rad$dat, layer=1:3, main=SF_rad$meta$date)
plotRadar(SF_radp, layer=1, project=FALSE)

# RW file as example: ----

RW_link &lt;- "hourly/radolan/reproc/2017_002/bin/2017/RW2017.002_201712.tar.gz"
RW_file &lt;- dataDWD(url=RW_link, base=gridbase, joinbf=TRUE,   # 25 MB
                  dir=locdir(), read=FALSE)
RW_exdir &lt;- "C:/Users/berry/Desktop/DWDbinaryRW"
if(!file.exists(RW_exdir)) RW_exdir &lt;- tempdir()
RW_rad &lt;- readDWD(RW_file, selection=1:10, exdir=RW_exdir)
RW_radp &lt;- plotRadar(RW_rad$dat[[1]], main=RW_rad$meta$date[1], extent="rw")

# ToDo: why are values + patterns not the same?

# list of all Files: ----
data(gridIndex)
head(grep("historical", gridIndex, value=TRUE))

## End(Not run)
</code></pre>

<hr>
<h2 id='readDWD.data'>read regular dwd data</h2><span id='topic+readDWD.data'></span>

<h3>Description</h3>

<p>Read regular dwd data.
Intended to be called via <code><a href="#topic+readDWD">readDWD()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readDWD.data(
  file,
  fread = FALSE,
  varnames = FALSE,
  format = NA,
  tz = "GMT",
  hr = 0,
  quiet = rdwdquiet(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readDWD.data_+3A_file">file</code></td>
<td>
<p>Name of file on harddrive, like e.g.
DWDdata/daily_kl_recent_tageswerte_KL_03987_akt.zip</p>
</td></tr>
<tr><td><code id="readDWD.data_+3A_fread">fread</code></td>
<td>
<p>Logical: read faster with <a href="data.table.html#topic+fread">data.table::fread</a>?
When reading many large historical files, speedup is significant.
When called from <code><a href="#topic+readDWD">readDWD()</a></code>, <code>fread=NA</code> can also be used, which means
TRUE if R package <code>data.table</code> and system command <code>unzip</code> are available.
Hint for Windows users: <code>unzip</code> comes with Rtools.
See <a href="https://bookdown.org/brry/rdwd/fread.html">https://bookdown.org/brry/rdwd/fread.html</a>
DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="readDWD.data_+3A_varnames">varnames</code></td>
<td>
<p>Logical (vector): add a short description to the DWD variable
abbreviations in the column names?
E.g. change <code style="white-space: pre;">&#8288;FX,TNK&#8288;</code> to <code style="white-space: pre;">&#8288;FX.Windspitze,TNK.Lufttemperatur_Min&#8288;</code>,
see <code><a href="#topic+newColumnNames">newColumnNames()</a></code>.
DEFAULT: FALSE (for backwards compatibility)</p>
</td></tr>
<tr><td><code id="readDWD.data_+3A_format">format</code></td>
<td>
<p>Char (vector): Format passed to <code><a href="base.html#topic+as.POSIXct">as.POSIXct()</a></code> (see <code><a href="base.html#topic+strptime">strptime()</a></code>)
to convert the date/time column to POSIX time format.<br />
If NULL, no conversion is performed (date stays a factor).
If NA, <code>readDWD</code> tries to find a suitable format based
on the number of characters. DEFAULT: NA</p>
</td></tr>
<tr><td><code id="readDWD.data_+3A_tz">tz</code></td>
<td>
<p>Char (vector): time zone for <code><a href="base.html#topic+as.POSIXct">as.POSIXct()</a></code>.
&quot;&quot; is the current time zone, and &quot;GMT&quot; is UTC (Universal Time,
Coordinated). DEFAULT: &quot;GMT&quot;</p>
</td></tr>
<tr><td><code id="readDWD.data_+3A_hr">hr</code></td>
<td>
<p>Integer code to automatically merge historical and recent datasets.
If set, <code>readDWD</code> returns a data.frame instead of a list.
If multiple historical files are present,
the longest date range (per file name) is used.
This is not actually used in <code>readDWD.data</code>, but in <code><a href="#topic+readDWD">readDWD()</a></code>.<br />
0 (default): ignore this argument<br />
1: sort by hr (if given) + merge<br />
2: also remove duplicated dates from recent<br />
3: also remove columns QN3,QN4,eor<br />
4: also remove column STATIONS_ID<br />
DEFAULT: 0</p>
</td></tr>
<tr><td><code id="readDWD.data_+3A_quiet">quiet</code></td>
<td>
<p>Suppress empty file warnings?
DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="readDWD.data_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="utils.html#topic+read.table">read.table()</a></code> or <code><a href="data.table.html#topic+fread">data.table::fread()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDWD">readDWD()</a></code>, Examples in <code><a href="#topic+dataDWD">dataDWD()</a></code>
</p>

<hr>
<h2 id='readDWD.deriv'>read derived dwd data</h2><span id='topic+readDWD.deriv'></span>

<h3>Description</h3>

<p>Read dwd data from /CDC/derived_germany/.
Intended to be called via <code><a href="#topic+readDWD">readDWD()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readDWD.deriv(file, gargs = NULL, todate = TRUE, quiet = rdwdquiet(), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readDWD.deriv_+3A_file">file</code></td>
<td>
<p>Name of file on harddrive, like e.g.
DWDdata/soil_daily_historical_derived_germany_soil_daily_historical_3987.txt.gz</p>
</td></tr>
<tr><td><code id="readDWD.deriv_+3A_gargs">gargs</code></td>
<td>
<p>If fread=FALSE: Named list of arguments passed to
<code><a href="R.utils.html#topic+compressFile">R.utils::gunzip()</a></code>, see <code><a href="#topic+readDWD.raster">readDWD.raster()</a></code>. DEFAULT: NULL</p>
</td></tr>
<tr><td><code id="readDWD.deriv_+3A_todate">todate</code></td>
<td>
<p>Logical: Convert char column 'Datum' or 'Monat' with <code><a href="base.html#topic+as.Date">as.Date()</a></code>?
The format is currently hard-coded. Monthly data gets mapped to yyyy-mm-15
DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="readDWD.deriv_+3A_quiet">quiet</code></td>
<td>
<p>Ignored.
DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="readDWD.deriv_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="utils.html#topic+read.table">read.table()</a></code> or <code><a href="data.table.html#topic+fread">data.table::fread()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDWD">readDWD()</a></code>, https://bookdown.org/brry/rdwd/use-case-derived-data.html
</p>

<hr>
<h2 id='readDWD.grib2'>read nwp forecast data</h2><span id='topic+readDWD.grib2'></span>

<h3>Description</h3>

<p>read gridded numerical weather prediction data.
Intended to be called via <code><a href="#topic+readDWD">readDWD()</a></code>.<br />
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readDWD.grib2(file, pack = "terra", bargs = NULL, quiet = rdwdquiet(), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readDWD.grib2_+3A_file">file</code></td>
<td>
<p>Name of file on harddrive, like e.g.
cosmo-d2_germany_regular-lat-lon_single-level_2021010100_005_T_2M.grib2.bz2</p>
</td></tr>
<tr><td><code id="readDWD.grib2_+3A_pack">pack</code></td>
<td>
<p>Char: package used for reading.
One of &quot;terra&quot; or &quot;stars&quot;.
&quot;rgdal&quot; (for the deprecated cosmo-d2 data) is no longer available,
see <a href="https://github.com/brry/rdwd/issues/28">issue</a>.
DEFAULT: &quot;terra&quot;</p>
</td></tr>
<tr><td><code id="readDWD.grib2_+3A_bargs">bargs</code></td>
<td>
<p>Named list of arguments passed to
<code><a href="R.utils.html#topic+compressFile">R.utils::bunzip2()</a></code>, see <code>gargs</code> in <code><a href="#topic+readDWD.raster">readDWD.raster()</a></code>. DEFAULT: NULL</p>
</td></tr>
<tr><td><code id="readDWD.grib2_+3A_quiet">quiet</code></td>
<td>
<p>Silence readGDAL completely, including warnings on
discarded ellps / datum.
DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="readDWD.grib2_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="terra.html#topic+rast">terra::rast()</a></code> or
<code><a href="stars.html#topic+read_stars">stars::read_stars()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>terra or stars object, depending on <code>pack</code>
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Jan 2021.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDWD">readDWD()</a></code><br />
<a href="https://www.dwd.de/EN/ourservices/nwp_forecast_data/nwp_forecast_data.html">https://www.dwd.de/EN/ourservices/nwp_forecast_data/nwp_forecast_data.html</a><br />
<a href="https://www.dwd.de/EN/aboutus/it/functions/Teasergroup/grib.html">https://www.dwd.de/EN/aboutus/it/functions/Teasergroup/grib.html</a><br />
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:  # Excluded from CRAN checks, but run in localtests
nwp_t2m_base &lt;- "ftp://opendata.dwd.de/weather/nwp/icon-d2/grib/15/soiltyp"
nwp_urls &lt;- indexFTP("", base=nwp_t2m_base, dir=tempdir())
# for p instead of soiltyp, icosahedral_model-level files fail with GDAL errors,
# see https://github.com/brry/rdwd/issues/28
# regular-lat-lon_pressure-level files work with pack="terra" or "stars"

nwp_file &lt;- dataDWD(tail(nwp_urls,1), base=nwp_t2m_base, dir=tempdir(), 
                    joinbf=TRUE, dbin=TRUE, read=FALSE)
nwp_data &lt;- readDWD(nwp_file)
terra::plot(nwp_data)
addBorders() # the projection seems to be perfectly good :)

# index of GRIB files
if(FALSE){ # indexing takes about 6 minutes!
grib_base &lt;- "ftp://opendata.dwd.de/weather/nwp/icon-d2/grib"
grib_files &lt;- indexFTP("", base=grib_base, dir=tempdir())
for(f in unique(substr(grib_files, 1,3))) print(grib_files[which(substr(grib_files, 1,3)==f)[1]])
View(data.frame(grep("regular",grib_files, value=TRUE)))
}

## End(Not run)
</code></pre>

<hr>
<h2 id='readDWD.meta'>read dwd metadata (Beschreibung*.txt files)</h2><span id='topic+readDWD.meta'></span>

<h3>Description</h3>

<p>read dwd metadata (Beschreibung*.txt files).
Intended to be called via <code><a href="#topic+readDWD">readDWD()</a></code>.<br />
Column widths for <code><a href="utils.html#topic+read.fwf">read.fwf()</a></code> are computed internally.<br />
if(any(meta)), <code><a href="#topic+readDWD">readDWD()</a></code> tries to set the locale to German
(to handle Umlaute correctly). It is hence not recommended to call
<code>rdwd:::readDWD.meta</code> directly on a file!<br />
Names can later be changed to ascii with
<code><a href="berryFunctions.html#topic+convertUmlaut">berryFunctions::convertUmlaut()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readDWD.meta(file, quiet = rdwdquiet(), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readDWD.meta_+3A_file">file</code></td>
<td>
<p>Name of file on harddrive, like e.g.
DWDdata/daily_kl_recent_KL_Tageswerte_Beschreibung_Stationen.txt</p>
</td></tr>
<tr><td><code id="readDWD.meta_+3A_quiet">quiet</code></td>
<td>
<p>Ignored.
DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="readDWD.meta_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="utils.html#topic+read.fwf">read.fwf()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDWD">readDWD()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:  # Excluded from CRAN checks, but run in localtests

link &lt;- selectDWD(res="daily", var="kl", per="r", meta=TRUE)
link &lt;- link[!grepl("mn4", link)] # for mn4 file May 2022
link &lt;- grep(".txt$", link, value=TRUE)
if(length(link)!=1) stop("length of link should be 1, but is ", length(link),
                ":\n", berryFunctions::truncMessage(link,prefix="",sep="\n"))

file &lt;- dataDWD(link, dir=locdir(), read=FALSE)
meta &lt;- readDWD(file)
head(meta)

cnm &lt;- colnames(meta)
if(length(cnm)!=8) stop("number of columns should be 8, but is ", length(cnm),
                        ":\n", toString(cnm))

## End(Not run)
</code></pre>

<hr>
<h2 id='readDWD.multia'>read multi_annual dwd data</h2><span id='topic+readDWD.multia'></span>

<h3>Description</h3>

<p>read multi_annual dwd data.
Intended to be called via <code><a href="#topic+readDWD">readDWD()</a></code>.<br />
All other observational data at <code><a href="#topic+dwdbase">dwdbase</a></code> can be read
with <code><a href="#topic+readDWD.data">readDWD.data()</a></code>, except for the multi_annual and
subdaily/standard_format data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readDWD.multia(
  file,
  fileEncoding = "latin1",
  comment.char = "\032",
  quiet = rdwdquiet(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readDWD.multia_+3A_file">file</code></td>
<td>
<p>Name of file on harddrive, like e.g.
DWDdata/multi_annual_mean_81-10_Temperatur_1981-2010_aktStandort.txt or
DWDdata/multi_annual_mean_81-10_Temperatur_1981-2010_Stationsliste_aktStandort.txt</p>
</td></tr>
<tr><td><code id="readDWD.multia_+3A_fileencoding">fileEncoding</code></td>
<td>
<p><code><a href="utils.html#topic+read.table">read.table()</a></code> file encoding.
DEFAULT: &quot;latin1&quot;</p>
</td></tr>
<tr><td><code id="readDWD.multia_+3A_comment.char">comment.char</code></td>
<td>
<p><code><a href="utils.html#topic+read.table">read.table()</a></code> comment character.
DEFAULT: &quot;\032&quot; (needed 2019-04 to ignore the binary
control character at the end of multi_annual files)</p>
</td></tr>
<tr><td><code id="readDWD.multia_+3A_quiet">quiet</code></td>
<td>
<p>Ignored.
DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="readDWD.multia_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="utils.html#topic+read.table">read.table()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Feb 2019
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDWD">readDWD()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:  # Excluded from CRAN checks, but run in localtests

# Temperature aggregates (2019-04 the 9th file, 2022-05 the 8th):
durl &lt;- selectDWD(res="multi_annual", per="mean_81-10")[8]
murl &lt;- selectDWD(res="multi_annual", per="mean_81-10", meta=TRUE)[8]
ma_temp &lt;- dataDWD(durl, fileEncoding="")
ma_meta &lt;- dataDWD(murl, fileEncoding="")

head(ma_temp)
head(ma_meta)

ma &lt;- merge(ma_meta, ma_temp, all=TRUE)
berryFunctions::linReg(ma$Stationshoehe, ma$Jahr, main="annual average ~ elevation")
op &lt;- par(mfrow=c(3,4), mar=c(0.1,2,2,0), mgp=c(3,0.6,0))
for(m in colnames(ma)[8:19])
  {
  berryFunctions::linReg(ma$Stationshoehe, ma[,m], xaxt="n", xlab="", ylab="", main=m)
  abline(h=0)
  }
par(op)

par(bg=8)
berryFunctions::colPoints(ma$geogr..Laenge, ma$geogr..Breite, ma$Jahr, add=F, asp=1.4)

DEU &lt;- terra::vect(system.file("extdata/DEU.gpkg", package="rdwd"))
pdf("MultiAnn.pdf", width=8, height=10)
par(bg="grey90")
for(m in colnames(ma)[8:19])
  {
  terra::plot(DEU, border="grey40")
  berryFunctions::colPoints(ma[-262,]$geogr..Laenge, ma[-262,]$geogr..Breite, ma[-262,m],
                            asp=1.4, # Range=range(ma[-262,8:19]),
                            col=berryFunctions::divPal(200, rev=TRUE), zlab=m, add=T)
  }
dev.off()
berryFunctions::openFile("MultiAnn.pdf")

## End(Not run)
</code></pre>

<hr>
<h2 id='readDWD.nc'>read dwd netcdf data</h2><span id='topic+readDWD.nc'></span>

<h3>Description</h3>

<p>Read netcdf data.
Intended to be called via <code><a href="#topic+readDWD">readDWD()</a></code>.<br />
Note that <code>R.utils</code> and <code>ncdf4</code> must be installed to unzip and read the .nc.gz files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readDWD.nc(
  file,
  gargs = NULL,
  var = "",
  toraster = TRUE,
  quiet = rdwdquiet(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readDWD.nc_+3A_file">file</code></td>
<td>
<p>Name of file on harddrive, like e.g.
DWDdata/grids_germany/daily/Project_TRY/humidity/RH_199509_daymean.nc.gz</p>
</td></tr>
<tr><td><code id="readDWD.nc_+3A_gargs">gargs</code></td>
<td>
<p>Named list of arguments passed to
<code><a href="R.utils.html#topic+compressFile">R.utils::gunzip()</a></code>, see <code><a href="#topic+readDWD.raster">readDWD.raster()</a></code>. DEFAULT: NULL</p>
</td></tr>
<tr><td><code id="readDWD.nc_+3A_var">var</code></td>
<td>
<p>if toraster=FALSE: Charstring with name of variable to be read with
<code><a href="ncdf4.html#topic+ncvar_get">ncdf4::ncvar_get()</a></code>. If not available,
an interactive selection is presented.
DEFAULT: &quot;&quot; (last variable)</p>
</td></tr>
<tr><td><code id="readDWD.nc_+3A_toraster">toraster</code></td>
<td>
<p>Read file with <code><a href="terra.html#topic+rast">terra::rast()</a></code>?
All further arguments will be ignored. Specify e.g. <code>var</code>
through ... as <code>varname</code>. DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="readDWD.nc_+3A_quiet">quiet</code></td>
<td>
<p>Logical: Suppress time conversion failure warning?
DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="readDWD.nc_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="terra.html#topic+rast">terra::rast()</a></code> or <code><a href="ncdf4.html#topic+nc_open">ncdf4::nc_open()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="terra.html#topic+rast">terra::rast()</a></code> object. Alternatively,
if toraster=FALSE, a list with time, lat, lon, var, varname, file and cdf.
<strong>cdf</strong> is the output of <code><a href="ncdf4.html#topic+nc_open">ncdf4::nc_open()</a></code>.
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Aug 2019
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDWD">readDWD()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:  # Excluded from CRAN checks, but run in localtests

library(berryFunctions) # for seqPal and colPointsLegend

url &lt;- "daily/Project_TRY/pressure/PRED_199606_daymean.nc.gz"  #  5 MB
url &lt;- "daily/Project_TRY/humidity/RH_199509_daymean.nc.gz"    # 25 MB
file &lt;- dataDWD(url, base=gridbase, joinbf=TRUE, dir=locdir(), read=FALSE)
nc &lt;- readDWD(file)
ncp &lt;- plotRadar(nc, main=paste(terra::longnames(nc), terra::time(nc)), layer=1:3,
                 col=seqPal(), proj="nc", extent="nc")

str(terra::values(nc[[1]])) # obtain actual values into memory

terra::plot(nc[[1]]) # axes 0:938 / 0:720, the number of grid cells
terra::plot(ncp[[1]])# properly projected, per default onto latlon

rng &lt;- range(terra::global(nc[[1:6]], "range", na.rm=TRUE))
terra::plot(nc, col=seqPal(), zlim=rng, maxnl=6)

# Array instead of terra rast:
nc &lt;- readDWD(file, toraster=FALSE)
image(nc$var[,,1], col=seqPal(), asp=1.1)
colPointsLegend(nc$var[,,1], title=paste(nc$varname, nc$time[1]))

# interactive selection of variable:
# nc &lt;- readDWD(file, toraster=FALSE, var="-") # commented out to not block automated tests
str(nc$var)

## End(Not run)
</code></pre>

<hr>
<h2 id='readDWD.pdf'>open pdf data</h2><span id='topic+readDWD.pdf'></span>

<h3>Description</h3>

<p>open pdf file. This leads to less failures in the new <code>meta=TRUE</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readDWD.pdf(file, quiet = rdwdquiet(), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readDWD.pdf_+3A_file">file</code></td>
<td>
<p>Name of file on harddrive, like e.g.
monthly_kl_historical_DESCRIPTION_obsgermany_climate_monthly_kl_historical_en.pdf</p>
</td></tr>
<tr><td><code id="readDWD.pdf_+3A_quiet">quiet</code></td>
<td>
<p>Ignored. DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="readDWD.pdf_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="berryFunctions.html#topic+openFile">berryFunctions::openFile()</a></code> and from there to <code><a href="base.html#topic+system2">system2()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="berryFunctions.html#topic+openFile">berryFunctions::openFile()</a></code> output
</p>


<h3>system in <code><a href="#topic+selectDWD">selectDWD()</a></code>.<br /></h3>

<p>Intended to be called via <code><a href="#topic+readDWD">readDWD()</a></code>.<br />
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, May 2022.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDWD">readDWD()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:  # Excluded from CRAN checks, but run in localtests
link &lt;- selectDWD(res="hourly", var="sun", per="r", meta=TRUE)[2]
file &lt;- dataDWD(link, dir=locdir(), read=FALSE)
readDWD(file)

## End(Not run)
</code></pre>

<hr>
<h2 id='readDWD.radar'>read dwd gridded radolan radar data</h2><span id='topic+readDWD.radar'></span>

<h3>Description</h3>

<p>read gridded radolan radar data.
Intended to be called via <code><a href="#topic+readDWD">readDWD()</a></code>.<br />
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readDWD.radar(
  file,
  gargs = NULL,
  toraster = TRUE,
  dividebyten = TRUE,
  quiet = rdwdquiet(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readDWD.radar_+3A_file">file</code></td>
<td>
<p>Name of file on harddrive, like e.g.
DWDdata/hourly/radolan/recent/bin/
raa01-rw_10000-1802020250-dwd&mdash;bin.gz</p>
</td></tr>
<tr><td><code id="readDWD.radar_+3A_gargs">gargs</code></td>
<td>
<p>Named list of arguments passed to
<code><a href="R.utils.html#topic+compressFile">R.utils::gunzip()</a></code>, see <code><a href="#topic+readDWD.raster">readDWD.raster()</a></code>. DEFAULT: NULL</p>
</td></tr>
<tr><td><code id="readDWD.radar_+3A_toraster">toraster</code></td>
<td>
<p>Logical: convert output (list of matrixes + meta informations)
to a list with data (<code><a href="terra.html#topic+rast">terra::rast</a></code>) +
meta (list from the first subfile, but with vector of dates)?
DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="readDWD.radar_+3A_dividebyten">dividebyten</code></td>
<td>
<p>Logical: Divide the numerical values by 10? See <a href="#topic+readDWD">readDWD</a>.
toraster???  DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="readDWD.radar_+3A_quiet">quiet</code></td>
<td>
<p>Ignored.
DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="readDWD.radar_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="dwdradar.html#topic+readRadarFile">dwdradar::readRadarFile()</a></code>,
i.e. <code>na</code> and <code>clutter</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisible list with <code>dat</code> (matrix or raster, depending on <code>toraster</code>)
and <code>meta</code> (list with elements from header)
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Aug 2019.
Significant input for the underlying <code><a href="dwdradar.html#topic+readRadarFile">dwdradar::readRadarFile()</a></code> came
from Henning Rust &amp; Christoph Ritschel at FU Berlin.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDWD">readDWD()</a></code>, especially <code><a href="#topic+readDWD.binary">readDWD.binary()</a></code><br />
<a href="https://wradlib.org">https://wradlib.org</a> for much more extensive radar analysis in Python<br />
Kompositformatbeschreibung at <a href="https://www.dwd.de/DE/leistungen/radolan/radolan.html">https://www.dwd.de/DE/leistungen/radolan/radolan.html</a>
for format description
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:  # Excluded from CRAN checks, but run in localtests
# recent radar files
rrf &lt;- indexFTP("hourly/radolan/recent/bin", base=gridbase, dir=tempdir())
lrf &lt;- dataDWD(rrf[773], base=gridbase, joinbf=TRUE, dir=tempdir(), read=FALSE)
r &lt;- readDWD(lrf)
plotRadar(r$dat, main=paste("mm in 24 hours preceding", r$meta$date))

## End(Not run)
</code></pre>

<hr>
<h2 id='readDWD.raster'>read dwd gridded raster data</h2><span id='topic+readDWD.raster'></span>

<h3>Description</h3>

<p>Read gridded raster data.
Intended to be called via <code><a href="#topic+readDWD">readDWD()</a></code>.<br />
Note that <code>R.utils</code> must be installed to unzip the .asc.gz files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readDWD.raster(file, gargs = NULL, dividebyten, quiet = rdwdquiet(), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readDWD.raster_+3A_file">file</code></td>
<td>
<p>Name of file on harddrive, like e.g.
DWDdata/grids_germany/seasonal/air_temperature_mean/
16_DJF_grids_germany_seasonal_air_temp_mean_188216.asc.gz</p>
</td></tr>
<tr><td><code id="readDWD.raster_+3A_gargs">gargs</code></td>
<td>
<p>Named list of arguments passed to <code><a href="R.utils.html#topic+compressFile">R.utils::gunzip()</a></code>.
The internal defaults are: <code>remove=FALSE</code> (recommended to
keep this so <code>file</code> does not get deleted) and <code>skip=TRUE</code>
(which reads previously unzipped files as is).
If <code>file</code> has changed, use <code>gargs=list(temporary=TRUE)</code>.
The <code>gunzip</code> default <code>destname</code> means that the
unzipped file is stored at the same path as <code>file</code>.
DEFAULT gargs: NULL</p>
</td></tr>
<tr><td><code id="readDWD.raster_+3A_dividebyten">dividebyten</code></td>
<td>
<p>Logical: Divide the numerical values by 10? See <a href="#topic+readDWD">readDWD</a>.
DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="readDWD.raster_+3A_quiet">quiet</code></td>
<td>
<p>Ignored.
DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="readDWD.raster_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="terra.html#topic+rast">terra::rast()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="terra.html#topic+rast">terra::rast</a></code> object
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Dec 2018
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDWD">readDWD()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:  # Excluded from CRAN checks, but run in localtests

rasterbase &lt;- paste0(gridbase,"/seasonal/air_temperature_mean")
ftp.files &lt;- indexFTP("/16_DJF", base=rasterbase, dir=tempdir())
localfiles &lt;- dataDWD(ftp.files[1:2], base=rasterbase, joinbf=TRUE,
                      dir=locdir(), read=FALSE)
rf &lt;- readDWD(localfiles[1])
rf &lt;- readDWD(localfiles[1]) # runs faster at second time due to skip=TRUE
terra::plot(rf)

plotRadar(rf, proj="seasonal", extent=NULL)

testthat::expect_equal(c(terra::minmax(rf)), c(-8.2,4.4))
rf10 &lt;- readDWD(localfiles[1], dividebyten=FALSE)
terra::plot(rf10)
testthat::expect_equal(c(terra::minmax(rf10*1)), c(-82,44))

## End(Not run)
</code></pre>

<hr>
<h2 id='readDWD.rklim'>read dwd gridded radklim binary data</h2><span id='topic+readDWD.rklim'></span>

<h3>Description</h3>

<p>read gridded radklim binary data.
Intended to be called via <code><a href="#topic+readDWD">readDWD()</a></code>.<br />
Note: needs dwdradar &gt;= 0.2.6 (2021-08-08)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readDWD.rklim(
  file,
  exdir = NULL,
  unpacked = NULL,
  selection = NULL,
  toraster = TRUE,
  quiet = rdwdquiet(),
  progbar = !quiet,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readDWD.rklim_+3A_file">file</code></td>
<td>
<p>Name of file on harddrive, like e.g.
DWDdata/5_minutes_radolan_reproc_2017_002_bin_2020_YW2017.002_202006.tar</p>
</td></tr>
<tr><td><code id="readDWD.rklim_+3A_exdir">exdir</code></td>
<td>
<p>Directory to unzip into. If existing, only the needed files
will be unpacked with <code><a href="utils.html#topic+untar">untar()</a></code>. Note that exdir
size will be around 17 GB for 5-minute files.
If <code>unpacked=FALSE</code>, exdir can contain other files
that will be ignored for the actual reading.
DEFAULT: basename(file) at tempdir</p>
</td></tr>
<tr><td><code id="readDWD.rklim_+3A_unpacked">unpacked</code></td>
<td>
<p>Manually indicate whether .tar.gz files within .tar file
have already been unpacked before.
DEFAULT: NULL: checks if 'yw.*&ndash;bin' file(s) are present</p>
</td></tr>
<tr><td><code id="readDWD.rklim_+3A_selection">selection</code></td>
<td>
<p>Optionally read only a subset of the ~ 12 x 24 x 30/31 = 8640 files.
Called as <code>f[selection]</code>. DEFAULT: NULL (ignored)</p>
</td></tr>
<tr><td><code id="readDWD.rklim_+3A_toraster">toraster</code></td>
<td>
<p>Logical: convert to <a href="terra.html#topic+rast">terra::rast</a>? see <a href="#topic+readDWD.binary">readDWD.binary</a>
DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="readDWD.rklim_+3A_quiet">quiet</code></td>
<td>
<p>Suppress progress messages?
DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="readDWD.rklim_+3A_progbar">progbar</code></td>
<td>
<p>Show progress bars?
DEFAULT: !quiet, i.e. TRUE</p>
</td></tr>
<tr><td><code id="readDWD.rklim_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="dwdradar.html#topic+readRadarFile">dwdradar::readRadarFile()</a></code>,
i.e. <code>na</code> and <code>clutter</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>list depending on argument <code>toraster</code>, see there for details
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Aug 2021.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDWD.binary">readDWD.binary()</a></code>, radar locations from <a href="https://www.dwd.de/DE/leistungen/radarklimatologie/radklim_kompositformat_1_0.pdf?__blob=publicationFile&amp;v=1">https://www.dwd.de/DE/leistungen/radarklimatologie/radklim_kompositformat_1_0.pdf?__blob=publicationFile&amp;v=1</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:  # Excluded from CRAN checks, but run in localtests
yw_link &lt;- "/5_minutes/radolan/reproc/2017_002/bin/2022/YW2017.002_202203.tar"
# 202006 has untar error on Mac, 2023-04, maybe due to incomplete download
yw_file &lt;- dataDWD(url=yw_link, base=gridbase, joinbf=TRUE, read=FALSE) # 207 MB
x &lt;- readDWD(yw_file, selection=3641:3644)
# 00:30 for tar files, 01:40 for unpacking. 
# If you need a preselection argument, let me know.
terra::plot(x$dat)
plotRadar(x$dat[[1]], extent="rw") # better extent below

f &lt;- system.file("tests//raa01-yw2017.002_10000-2006131525-dwd---bin", package="dwdradar")
# https://stackoverflow.com/a/72207233/1587132 on how to install with tests folder
if(!file.exists(f)){
# Clone from https://github.com/brry/dwdradar:
f &lt;- locdir(file="binary_testfile")
download.file(paste0("https://github.com/brry/dwdradar/raw/master/tests/",
                     "raa01-yw2017.002_10000-2006131525-dwd---bin"), f, mode="wb")
}
x &lt;- dwdradar::readRadarFile(f)
x$dat &lt;- terra::rast(x$dat)
terra::plot(x$dat)
plotRadar(x$dat, extent=c(-360, 380, -4730 ,-3690))

radloc &lt;- read.table(header=T, sep=",", text="
ND, NM, NS  ,   ED, EM, ES
53, 33, 50.4,   06, 44, 53.9
51, 07, 26.5,   13, 45, 48.5
51, 24, 18.5,   06, 57, 49.8
47, 52, 21.3,   08, 00, 24.6
54, 10, 23.2,   12, 06, 25.3
52, 28, 40.3,   13, 23, 13.0
54, 00, 15.8,   10, 02, 48.7
51, 07, 28.7,   13, 46, 07.1
49, 32, 26.4,   12, 24, 10.0
53, 20, 19.4,   07, 01, 25.5
51, 24, 20.2,   06, 58, 01.6
47, 52, 25.0,   08, 00, 13.0
51, 20, 06.0,   08, 51, 09.0
51, 18, 40.3,   08, 48, 07.2
50, 03, 06.0,   08, 34, 05.0
50, 01, 20.8,   08, 33, 30.7
53, 37, 16.5,   09, 59, 47.6
52, 27, 47.0,   09, 41, 53.9
52, 27, 36.2,   09, 41, 40.2
48, 10, 28.9,   12, 06, 06.3
48, 02, 31.7,   10, 13, 09.2
48, 20, 10.9,   11, 36, 42.1
50, 30, 00.4,   11, 08, 06.2
50, 06, 34.7,   06, 32, 53.9
49, 59, 05.1,   08, 42, 46.6
52, 38, 55.2,   13, 51, 29.6
54, 10, 32.4,   12, 03, 29.1
48, 35, 07.0,   09, 46, 58.0
52, 09, 36.3,   11, 10, 33.9")
radloc$x &lt;- radloc$ED + radloc$EM/60 + radloc$ES/3600
radloc$y &lt;- radloc$ND + radloc$NM/60 + radloc$NS/3600
for(i in 1:29) berryFunctions::circle(radloc$x[i], radloc$y[i], 0.9)

## End(Not run)
</code></pre>

<hr>
<h2 id='readDWD.stand'>read subdaily/standard_format dwd data</h2><span id='topic+readDWD.stand'></span>

<h3>Description</h3>

<p>read subdaily/standard_format dwd data.
Intended to be called via <code><a href="#topic+readDWD">readDWD()</a></code>.<br />
All other observational data at <code><a href="#topic+dwdbase">dwdbase</a></code> can be read
with <code><a href="#topic+readDWD.data">readDWD.data()</a></code>, except for the multi_annual and
subdaily/standard_format data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readDWD.stand(
  file,
  fast = TRUE,
  fileEncoding = "latin1",
  formIndex = formatIndex,
  quiet = rdwdquiet(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readDWD.stand_+3A_file">file</code></td>
<td>
<p>Name of file on harddrive, like e.g.
DWDdata/subdaily_standard_format_kl_10381_00_akt.txt or
DWDdata/subdaily_standard_format_kl_10381_bis_1999.txt.gz</p>
</td></tr>
<tr><td><code id="readDWD.stand_+3A_fast">fast</code></td>
<td>
<p>Logical: use <code><a href="readr.html#topic+read_fwf">readr::read_fwf()</a></code> instead of <code><a href="utils.html#topic+read.fwf">read.fwf()</a></code>?
Takes 0.1 instead of 20 seconds but requires package to be installed.
if fast=TRUE, <code>fileEncoding</code> is ignored.
DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="readDWD.stand_+3A_fileencoding">fileEncoding</code></td>
<td>
<p><code><a href="utils.html#topic+read.table">read.table()</a></code> file encoding.
DEFAULT: &quot;latin1&quot; (potentially needed on Linux,
optional but not hurting on windows)</p>
</td></tr>
<tr><td><code id="readDWD.stand_+3A_formindex">formIndex</code></td>
<td>
<p>Single object: Index used to select column widts and NA values.
To use a current / custom index, see the source code of
<code><a href="#topic+updateIndexes">updateIndexes()</a></code> at
<a href="https://github.com/brry/rdwd/blob/master/R/updateIndexes.R">https://github.com/brry/rdwd/blob/master/R/updateIndexes.R</a>.
DEFAULT: <code><a href="#topic+formatIndex">formatIndex</a></code></p>
</td></tr>
<tr><td><code id="readDWD.stand_+3A_quiet">quiet</code></td>
<td>
<p>Ignored.
DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="readDWD.stand_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="utils.html#topic+read.fwf">read.fwf()</a></code> or <code><a href="readr.html#topic+read_fwf">readr::read_fwf()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame with column names as per <code><a href="#topic+formatIndex">formatIndex</a></code>.
&quot;Q&quot;-columns have &quot;_parameter&quot; appended to their name. A &quot;Date&quot; column has been added.
NA-indicators have been processed into NAs.
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Oct 2019
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDWD">readDWD()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:  # Excluded from CRAN checks, but run in localtests

link &lt;- selectDWD(res="subdaily", var="standard_format", per="r")
link &lt;- link[grepl("10381", link, fixed=TRUE)]
# Not ID, according to meta data, hence no longer in column id (2023-04).
file &lt;- dataDWD(link, dir=locdir(), read=FALSE)
sf &lt;- readDWD(file)

sf2 &lt;- readDWD(file, fast=FALSE) # 20 secs!
stopifnot(all.equal(sf, sf2))

plot(sf$Date, sf$SHK, type="l")

# Plot all columns:
if(FALSE){ # not run in any automated testing
tmp &lt;- tempfile(fileext=".pdf")
char2fact &lt;- function(x)
 {
 if(all(is.na(x))) return(rep(-9, len=length(x)))
 if(!is.numeric(x)) as.factor(x) else x
 }
pdf(tmp, width=9)
par(mfrow=c(2,1),mar=c(2,3,2,0.1), mgp=c(3,0.7,0), las=1)
for(i in 3:ncol(sf)-1) plot(sf$Date, char2fact(sf[,i]), type="l", main=colnames(sf)[i], ylab="")
dev.off()
berryFunctions::openFile(tmp)
}

## End(Not run)
</code></pre>

<hr>
<h2 id='readMeta'>Process data from the DWD CDC FTP Server</h2><span id='topic+readMeta'></span>

<h3>Description</h3>

<p>Read climate meta info textfiles in zip folders downloaded with <code><a href="#topic+dataDWD">dataDWD()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readMeta(file, progbar = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readMeta_+3A_file">file</code></td>
<td>
<p>Char (vector): name(s) of the zip file(s) downloaded with <code><a href="#topic+dataDWD">dataDWD()</a></code>,
e.g. &quot;~/DWDdata/tageswerte_KL_02575_akt.zip&quot;</p>
</td></tr>
<tr><td><code id="readMeta_+3A_progbar">progbar</code></td>
<td>
<p>Logical: present a progress bar with estimated remaining time?
If missing and length(file)==1, progbar is internally set to FALSE.
DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="readMeta_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="utils.html#topic+read.table">read.table()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisible named list of data.frames; or a list of lists, if length(file)&gt;1.
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, 2016 + March 2019
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dataDWD">dataDWD()</a></code>, <code><a href="#topic+readVars">readVars()</a></code>, <code><a href="#topic+readDWD">readDWD()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># see dataDWD

</code></pre>

<hr>
<h2 id='readVars'>Process data from the DWD CDC FTP Server</h2><span id='topic+readVars'></span>

<h3>Description</h3>

<p>Read climate variables (column meta data) from zip folders downloaded with
<code><a href="#topic+dataDWD">dataDWD()</a></code>.
The metadata file <code>"Metadaten_Parameter.*txt"</code> in the zip folder <code>file</code>
is read, processed and returned as a data.frame.<br />
<code>file</code> can be a vector with several filenames.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readVars(file, params = dwdparams, quiet = rdwdquiet(), progbar = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readVars_+3A_file">file</code></td>
<td>
<p>Char (vector): name(s) of the file(s) downloaded with <code><a href="#topic+dataDWD">dataDWD()</a></code>,
e.g. &quot;~/DWDdata/tageswerte_KL_02575_akt.zip&quot;</p>
</td></tr>
<tr><td><code id="readVars_+3A_params">params</code></td>
<td>
<p>data.frame: Parameter explanations. DEFAULT: <code><a href="#topic+dwdparams">dwdparams</a></code></p>
</td></tr>
<tr><td><code id="readVars_+3A_quiet">quiet</code></td>
<td>
<p>Suppress message about non-abbreviated parameters?
DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="readVars_+3A_progbar">progbar</code></td>
<td>
<p>Logical: present a progress bar with estimated remaining time?
If missing and length(file)==1, progbar is internally set to FALSE.
DEFAULT: TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame of the desired dataset,
or a named list of data.frames if length(file) &gt; 1.
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Jun 2018
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dataDWD">dataDWD()</a></code>, <code><a href="#topic+readDWD">readDWD()</a></code>, <code><a href="#topic+dwdparams">dwdparams</a></code>, <code><a href="#topic+newColumnNames">newColumnNames()</a></code><br />
<code><a href="#topic+readMeta">readMeta()</a></code> for complete  <code>Metadaten_Parameter</code> file.<br />
<a href="https://bookdown.org/brry/rdwd/use-case-get-all-hourly-rainfall-data-20142016.html#read-the-data">website use case</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># see dataDWD

</code></pre>

<hr>
<h2 id='release_questions'>Reminders when using devtools::release</h2><span id='topic+release_questions'></span>

<h3>Description</h3>

<p>Reminders when using devtools::release.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>release_questions()
</code></pre>

<hr>
<h2 id='rowDisplay'>Create leaflet map popup from data.frame rows</h2><span id='topic+rowDisplay'></span>

<h3>Description</h3>

<p>Create display character string for leaflet map popup from data.frame rows.
This function is not exported, as it is only internally useful.
A generic version is available in <code><a href="berryFunctions.html#topic+popleaf">berryFunctions::popleaf()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rowDisplay(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rowDisplay_+3A_x">x</code></td>
<td>
<p>data.frame with colnames</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of character strings, one for each row in x.
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Feb 2017
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geoIndex">geoIndex</a></code>
</p>

<hr>
<h2 id='runLocalTests'>run local tests of rdwd</h2><span id='topic+runLocalTests'></span>

<h3>Description</h3>

<p>Run <code>rdwd</code> tests on local machine. Due to time-intensive
data downloads, these tests are not run automatically on CRAN.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>runLocalTests(
  dir_data = locdir(),
  dir_exmpl = berryFunctions::packagePath(file = "misc/ExampleTests"),
  start = 1,
  quiet = rdwdquiet()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="runLocalTests_+3A_dir_data">dir_data</code></td>
<td>
<p>Reusable data location. Preferably not under version control.
DEFAULT: <code><a href="#topic+locdir">locdir()</a></code></p>
</td></tr>
<tr><td><code id="runLocalTests_+3A_dir_exmpl">dir_exmpl</code></td>
<td>
<p>Reusable example location. DEFAULT: local directory</p>
</td></tr>
<tr><td><code id="runLocalTests_+3A_start">start</code></td>
<td>
<p>Number to start tests at, helpful for partially successful runs.
DEFAULT: 1</p>
</td></tr>
<tr><td><code id="runLocalTests_+3A_quiet">quiet</code></td>
<td>
<p>Suppress progress messages? DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Time taken to run tests in minutes
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Apr-Oct 2019
</p>


<h3>See Also</h3>

<p><code><a href="#topic+locdir">locdir()</a></code>
</p>

<hr>
<h2 id='selectDWD'>Select data from the DWD CDC FTP Server</h2><span id='topic+selectDWD'></span>

<h3>Description</h3>

<p>Select data files for downloading with <code><a href="#topic+dataDWD">dataDWD()</a></code>.<br />
The available <code>res/var/per</code> folders with datasets are listed
<a href="https://bookdown.org/brry/rdwd/available-datasets.html">online</a>.<br />
Set <code style="white-space: pre;">&#8288;res="", var="", per=""&#8288;</code> to avoid the default interactive selection.<br />
The arguments <code>name/id</code> and <code>res/var/per</code> can be vectors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>selectDWD(
  name = "",
  res = NA,
  var = NA,
  per = NA,
  expand = TRUE,
  id = findID(name, exactmatch = exactmatch, mindex = mindex, quiet = quiet, failempty =
    failempty),
  exactmatch = TRUE,
  mindex = metaIndex,
  failempty = TRUE,
  findex = fileIndex,
  current = FALSE,
  base = dwdbase,
  meta = FALSE,
  quiet = rdwdquiet(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="selectDWD_+3A_name">name</code></td>
<td>
<p>Char: station name(s) passed to <code><a href="#topic+findID">findID()</a></code>, along with
<code>exactmatch</code>, <code>mindex</code> and <code>failempty</code>.
All 3 arguments are ignored if <code>id</code> is given.
DEFAULT: &quot;&quot; (all stations at <code>res/var/per</code>)</p>
</td></tr>
<tr><td><code id="selectDWD_+3A_res">res</code></td>
<td>
<p>Char: temporal <strong>res</strong>olution at <code>base</code>, e.g.
<code style="white-space: pre;">&#8288;"hourly","daily","monthly"&#8288;</code>.
See section 'Description' above and <code><a href="#topic+fileIndex">fileIndex</a></code>.
Use <code>res=""</code> for matching options from all resolutions.
DEFAULT: NA for interactive selection</p>
</td></tr>
<tr><td><code id="selectDWD_+3A_var">var</code></td>
<td>
<p>Char: weather <strong>var</strong>iable of interest, e.g.
<code style="white-space: pre;">&#8288;"air_temperature", "cloudiness", "precipitation", "solar", "kl"&#8288;</code>.
See section 'Description' above and <code><a href="#topic+fileIndex">fileIndex</a></code>.
DEFAULT: NA for interactive selection</p>
</td></tr>
<tr><td><code id="selectDWD_+3A_per">per</code></td>
<td>
<p>Char: desired time <strong>per</strong>iod, e.g.
&quot;recent&quot; (up to date records from the last 1.5 years) or
&quot;historical&quot; (long time series).
Can be abbreviated. To get both datasets, use <code>per="hr"</code>.
DEFAULT: NA for interactive selection</p>
</td></tr>
<tr><td><code id="selectDWD_+3A_expand">expand</code></td>
<td>
<p>Logical: get all possible <code>res/var/per</code> combinations?
Set to FALSE if you want only the given combinations.
If FALSE, they cannot be NA or &quot;&quot;.
DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="selectDWD_+3A_id">id</code></td>
<td>
<p>Char/Number: station ID with or without leading zeros, e.g. &quot;00614&quot; or 614.
Is internally converted to an integer.
Use NA (the default from <code>findID</code>) to get all data at <code>res/var/per</code>.
DEFAULT: <code><a href="#topic+findID">findID</a></code><code style="white-space: pre;">&#8288;(name, exaxtmatch, mindex, failempty)&#8288;</code></p>
</td></tr>
<tr><td><code id="selectDWD_+3A_exactmatch">exactmatch</code></td>
<td>
<p>Logical passed to <code><a href="#topic+findID">findID()</a></code>: match <code>name</code>
with <code><a href="base.html#topic++3D+3D">==</a></code>)? Else with <code><a href="base.html#topic+grepl">grepl()</a></code>. DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="selectDWD_+3A_mindex">mindex</code></td>
<td>
<p>Single object: Index with metadata passed to <code><a href="#topic+findID">findID()</a></code>.
DEFAULT: <code><a href="#topic+metaIndex">metaIndex</a></code></p>
</td></tr>
<tr><td><code id="selectDWD_+3A_failempty">failempty</code></td>
<td>
<p>Fail if no matching station is found in <code><a href="#topic+findID">findID()</a></code>?
Avoid downloading all files. DEFAULT: TRUE</p>
</td></tr>
<tr><td><code id="selectDWD_+3A_findex">findex</code></td>
<td>
<p>Single object: Index used to select filename, as returned by
<code><a href="#topic+createIndex">createIndex()</a></code>.To use a current / custom index, see <code>current</code> and
<a href="https://bookdown.org/brry/rdwd/fileindex.html">https://bookdown.org/brry/rdwd/fileindex.html</a>.
DEFAULT: <code><a href="#topic+fileIndex">fileIndex</a></code></p>
</td></tr>
<tr><td><code id="selectDWD_+3A_current">current</code></td>
<td>
<p>Single logical when <code>res/var/per</code> is given: instead of
<code>findex</code>, use a list of the currently available files at
base/res/var/per? This will call <code><a href="#topic+indexFTP">indexFTP()</a></code>, thus
requires availability of the <code>RCurl</code> package.
See <a href="https://bookdown.org/brry/rdwd/fileindex.html">https://bookdown.org/brry/rdwd/fileindex.html</a>.
DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="selectDWD_+3A_base">base</code></td>
<td>
<p>Single char: main directory of DWD ftp server.
Must be the same <code>base</code> used to create <code>findex</code>.
DEFAULT: <code><a href="#topic+dwdbase">dwdbase</a></code></p>
</td></tr>
<tr><td><code id="selectDWD_+3A_meta">meta</code></td>
<td>
<p>Logical: select Beschreibung file from <code>ismeta</code> entries in <code>findex</code>?
See <code><a href="#topic+metaIndex">metaIndex</a></code> for a compilation of all Beschreibung files.
See the 'Examples' section for handling pdf and txt files.
DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="selectDWD_+3A_quiet">quiet</code></td>
<td>
<p>Suppress id length warnings? DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="selectDWD_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="#topic+indexFTP">indexFTP()</a></code> if <code>current=TRUE</code>,
except folder and base.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character string with file path and name(s) in the format
&quot;base/res/var/per/filename.zip&quot;
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Oct 2016, rewritten May 2022
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dataDWD">dataDWD()</a></code>, <code><a href="#topic+metaIndex">metaIndex</a></code>,
<a href="https://bookdown.org/brry/rdwd/station-selection.html#by-name">website station selection chapter</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Give weather station name (must exist in metaIndex):
selectDWD("Potsdam", res="daily", var="kl", per="historical")

# all files for all stations matching "Koeln":
tail(selectDWD("Koeln", res="", var="", per="", exactmatch=FALSE)) # 686 files
findID("Koeln", FALSE)

## Not run:  # Excluded from CRAN checks to save time

# selectDWD("Potsdam") # interactive selection of res/var/per

# directly give station ID:
selectDWD(id="00386", res="daily", var="kl", per="historical")
selectDWD(id=537, "", "", "", "") # 8 files

# period can be abbreviated:
selectDWD(id="5419", res="daily", var="kl", per="h")

# selectDWD is vectorizable!
# since version 1.5.28 (2022-05-12) outer product, not elementwise comparison:
selectDWD("Freiburg", res="daily", var="kl", per="rh")
selectDWD("Freiburg", res=c("daily","monthly"), var="kl", per="r")
selectDWD("Freiburg", res=c("daily","monthly"), var="kl", per="hr")
# get old behaviour (needed e.g. in nearbyStations):
ids &lt;- c(3761,3761, 3603)
# all combinations:
selectDWD(id=ids, res="daily", var="kl", per=c("h","r","r")) # 4
# only given combinations:
selectDWD(id=ids, res="daily", var="kl", per=c("h","r","r"), expand=FALSE) # 3

# all files in all paths matching id:
head( selectDWD(id=c(1050, 386), res="",var="",per="") ) # 277 files
# all files in a given path (if ID is empty):
head(  selectDWD(id="", res="daily", var="kl", per="recent")   ) # 585 files

selectDWD(id=386, res="monthly", var="kl", per="h")

# Meta  data - Description and Beschreibung txt/pdf files.:
# manually select .txt (not pdf) files for automated opening with readDWD.
link &lt;- selectDWD(res="monthly", var="kl", per="h", meta=TRUE) # omit ID/Name!
link
link2 &lt;- grep("\\.txt$", link, value=TRUE)   ;   link2
m &lt;- dataDWD(link2, dir=locdir())
head(m)
# 
# Open PDF files with your system's default Viewer:
dataDWD(link[1], dir=locdir())

## End(Not run)

</code></pre>

<hr>
<h2 id='updateIndexes'>update rdwd indexes</h2><span id='topic+updateIndexes'></span>

<h3>Description</h3>

<p>This is meant to be called with getwd at the
rdwd package source code directory to update the indexes with one single call.<br />
To use custom or current indexes, see <a href="https://bookdown.org/brry/rdwd/fileindex.html">https://bookdown.org/brry/rdwd/fileindex.html</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>updateIndexes(dwdlocal = FALSE, grdlocal = FALSE, metaforce = NA)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="updateIndexes_+3A_dwdlocal">dwdlocal</code></td>
<td>
<p>Read &quot;DWDdata/INDEX_of_DWD_.txt&quot; instead of calling
<code><a href="#topic+indexFTP">indexFTP()</a></code>? DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="updateIndexes_+3A_grdlocal">grdlocal</code></td>
<td>
<p>Read &quot;DWDdata/INDEX_of_DWD_grids.txt&quot; instead of calling
<code><a href="#topic+indexFTP">indexFTP()</a></code>? DEFAULT: FALSE</p>
</td></tr>
<tr><td><code id="updateIndexes_+3A_metaforce">metaforce</code></td>
<td>
<p><code><a href="#topic+dataDWD">dataDWD()</a></code> <code>force</code> argument for BESCHREIBUNG files.
DEFAULT: NA (re-download if older than 24 hours)</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="#topic+checkIndex">checkIndex()</a></code> results
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Oct 2019
</p>


<h3>See Also</h3>

<p><code><a href="#topic+createIndex">createIndex()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># number of files at dwdbase
#  25'757 (2017-03-14)
# 218'593 (2018-03-25)
# 228'830 (2018-11-26)
# 240'737 (2019-02-19)
# 242'584 (2019-03-11)
# 266'860 (2019-05-15)
# 254'446 (2019-05-30)
# 255'252 (2019-07-31)
# 254'925 (2019-09-17)
# 254'943 (2019-10-26)
# 266'841 (2020-03-16)
# 265'712 (2020-04-10)
# 265'712 (2020-04-24)
# 266'106 (2020-06-01)
# 266'216 (2020-07-06)
# 266'216 (2020-07-28)
# 267'175 (2020-09-21)
# 269'561 (2020-12-03)
# 286'306 (2021-04-02)
# 286'189 (2021-04-08)
# 285'246 (2021-04-23)
# 285'972 (2021-06-02)
# 321'477 (2022-04-07)
# 477'236 (2022-04-28) # 5_minutes files added
# 482'907 (2022-04-29)
# 497'190 (2022-05-13)
# 576'768 (2023-04-06) # lots of duplicate historical files in transition period
# 577'160 (2023-04-12)
# 571'667 (2023-04-14)
# 572'583 (2023-05-10)
# 574'397 (2023-06-16)

# gridbase
#  49'247 (2019-05-26)
#  49'402 (2019-05-30)
#  54'314 (2019-07-31)
#  56'759 (2019-09-17)
#  58'656 (2019-10-26)
#  30'320 (2020-03-16)
#  31'787 (2020-04-10)
#  32'478 (2020-04-24)
#  34'203 (2020-06-01)
#  35'953 (2020-07-06)
#  37'038 (2020-07-28)
#  39'791 (2020-09-21)
#  43'435 (2020-12-03)
#  31'698 (2021-04-02)
#  32'015 (2021-04-08)
#  32'736 (2021-04-23)
#  34'708 (2021-06-02)
#  34'854 (2022-04-07)
#  35'874 (2022-04-28)
#  35'937 (2022-04-29)
#  36'630 (2022-05-13)
#  36'059 (2023-04-06)
#  36'356 (2023-04-12)
#  36'454 (2023-04-14)
#  37'763 (2023-05-10)
#  39'670 (2023-06-16)

</code></pre>

<hr>
<h2 id='updateRdwd'>Update rdwd development version</h2><span id='topic+updateRdwd'></span>

<h3>Description</h3>

<p>Update rdwd to the latest development version on github, if necessary.
If the version number or date is larger on github,
<code><a href="remotes.html#topic+install_github">remotes::install_github()</a></code> will be called.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>updateRdwd(
  pack = "rdwd",
  user = "brry",
  vignette = NA,
  quiet = rdwdquiet(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="updateRdwd_+3A_pack">pack</code></td>
<td>
<p>Name of (already installed) package. DEFAULT: &quot;rdwd&quot;</p>
</td></tr>
<tr><td><code id="updateRdwd_+3A_user">user</code></td>
<td>
<p>Github username. repo will then be user/pack. DEFAULT: &quot;brry&quot;</p>
</td></tr>
<tr><td><code id="updateRdwd_+3A_vignette">vignette</code></td>
<td>
<p>build_vignettes in <code><a href="remotes.html#topic+install_github">remotes::install_github()</a></code>?
DEFAULT: NA (changed to TRUE if rmarkdown and knitr are available)</p>
</td></tr>
<tr><td><code id="updateRdwd_+3A_quiet">quiet</code></td>
<td>
<p>Suppress version messages and <code>remotes::install</code> output?
DEFAULT: FALSE through <code><a href="#topic+rdwdquiet">rdwdquiet()</a></code></p>
</td></tr>
<tr><td><code id="updateRdwd_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="remotes.html#topic+install_github">remotes::install_github()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame with version information
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Nov 2019
</p>


<h3>See Also</h3>

<p><code><a href="remotes.html#topic+install_github">remotes::install_github()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># updateRdwd()

</code></pre>

<hr>
<h2 id='validFileTypes'>valid fileType values</h2><span id='topic+validFileTypes'></span>

<h3>Description</h3>

<p>fileType values that have a reading subfunction <code>readDWD.ftype()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validFileTypes
</code></pre>


<h3>Format</h3>

<p>An object of class <code>character</code> of length 13.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
