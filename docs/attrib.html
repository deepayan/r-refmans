<!DOCTYPE html><html lang="en"><head><title>Help for package attrib</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {attrib}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#data_fake_county'><p>Fake data for mortality in Norway</p></a></li>
<li><a href='#data_fake_nation'><p>Fake data for mortality in Norway nationally</p></a></li>
<li><a href='#est_attrib'><p>Estimates simulations of expected responses</p></a></li>
<li><a href='#fit_attrib'><p>Data fit</p></a></li>
<li><a href='#sim'><p>Generates simulations of expected mortality by simulating the model coefficients.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Attributable Burden of Disease</td>
</tr>
<tr>
<td>Version:</td>
<td>2021.1.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides functions for estimating the attributable burden of disease due to risk factors. The posterior simulation is performed using arm::sim as described in Gelman, Hill (2012) &lt;<a href="https://doi.org/10.1017%2FCBO9780511790942">doi:10.1017/CBO9780511790942</a>&gt; and the attributable burden method is based on Nielsen, Krause, Molbak &lt;<a href="https://doi.org/10.1111%2Firv.12564">doi:10.1111/irv.12564</a>&gt;.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table, magrittr, glue, pbs, dlnm, lubridate, mvmeta,
tsModel, stats, lme4, arm, tibble, stringr, ggplot2, utils,
progress</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-03-29 04:00:29 UTC; rstudio</td>
</tr>
<tr>
<td>Author:</td>
<td>Richard Aubrey White
    <a href="https://orcid.org/0000-0002-6747-1726"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Aurora Hofman <a href="https://orcid.org/0000-0001-6543-5134"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Folkehelseinstituttet [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Richard Aubrey White &lt;hello@rwhite.no&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-03-30 09:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='data_fake_county'>Fake data for mortality in Norway</h2><span id='topic+data_fake_county'></span>

<h3>Description</h3>

<p>Fake data for mortality in Norway
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_fake_county
</code></pre>


<h3>Format</h3>


<dl>
<dt>location_code</dt><dd><p>Location code of the Norwegian municipalities</p>
</dd>
<dt>week</dt><dd><p>Week</p>
</dd>
<dt>season</dt><dd><p>Season used for influenza like illnesses</p>
</dd>
<dt>yrwk</dt><dd><p>Year and week</p>
</dd>
<dt>x</dt><dd><p>Number of weeks from the start of the season</p>
</dd>
<dt>pop</dt><dd><p>Population size</p>
</dd>
<dt>pr100_ili</dt><dd><p>Per hundred ILI, percentage of consultations diagnosed as influenza like illnesses</p>
</dd>
<dt>pr100_ili_lag_1</dt><dd><p>pr100_ili_lag_1</p>
</dd>
<dt>temperature</dt><dd><p> temperature</p>
</dd>
<dt>temperature_high</dt><dd><p>temperature_high</p>
</dd>
<dt>deaths</dt><dd><p>deaths</p>
</dd>
</dl>


<hr>
<h2 id='data_fake_nation'>Fake data for mortality in Norway nationally</h2><span id='topic+data_fake_nation'></span>

<h3>Description</h3>

<p>Fake data for mortality in Norway nationally
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_fake_nation
</code></pre>


<h3>Format</h3>


<dl>
<dt>location_code</dt><dd><p>Location code</p>
</dd>
<dt>week</dt><dd><p>Week</p>
</dd>
<dt>season</dt><dd><p>Season used for influenza like illnesses</p>
</dd>
<dt>yrwk</dt><dd><p>Year and week</p>
</dd>
<dt>x</dt><dd><p>Number of weeks from the start of the season</p>
</dd>
<dt>pop</dt><dd><p>Population size</p>
</dd>
<dt>pr100_ili</dt><dd><p>Per hundred ILI, percentage of consultations diagnosed as influenza like illnesses</p>
</dd>
<dt>pr100_ili_lag_1</dt><dd><p>pr100_ili_lag_1</p>
</dd>
<dt>temperature</dt><dd><p> temperature</p>
</dd>
<dt>temperature_high</dt><dd><p>temperature_high</p>
</dd>
<dt>deaths</dt><dd><p>deaths</p>
</dd>
</dl>


<hr>
<h2 id='est_attrib'>Estimates simulations of expected responses</h2><span id='topic+est_attrib'></span>

<h3>Description</h3>

<p>For each exposure the dataset is copied and the original value replaced by the reference value.
Then the sim function is used to generate 500 simulations of expected responses for each row.
Finally the dataset is transformed to obtain expected response for original and reference values
of the given exposures for each original row of the dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>est_attrib(fit, data, exposures, n_sim = 500)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="est_attrib_+3A_fit">fit</code></td>
<td>
<p>A model fit constructed by fit_attrib</p>
</td></tr>
<tr><td><code id="est_attrib_+3A_data">data</code></td>
<td>
<p>The observed data</p>
</td></tr>
<tr><td><code id="est_attrib_+3A_exposures">exposures</code></td>
<td>
<p>The exposures that will get reference expected mortalities</p>
</td></tr>
<tr><td><code id="est_attrib_+3A_n_sim">n_sim</code></td>
<td>
<p>Number of simulations
</p>
<p>For more details see the help vignette:
<code>vignette("intro", package="attrib")</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The burden method is based on Nielsen, Krause, Molbak &lt;doi:10.1111/irv.12564&gt;.
</p>
<p>For more details see the help vignette:
<code>vignette("intro", package="attrib")</code>
</p>


<h3>Value</h3>

<p>Dataset with expected responses for all simulations including expected responses given the exposure reference values
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
response &lt;- "deaths"
fixef &lt;- "pr100_ili_lag_1 + sin(2 * pi * (week - 1) / 52) + cos(2 * pi * (week - 1) / 52)"
ranef &lt;- " (pr100_ili_lag_1| season)"
offset &lt;- "log(pop)"

data &lt;- attrib::data_fake_nation

fit &lt;- fit_attrib(data = data, response = response, fixef = fixef, ranef = ranef, offset = offset)
exposures &lt;- c(pr100_ili_lag_1 = 0)
n_sim &lt;- 5
new_data &lt;- est_attrib(fit, data, exposures, n_sim)
new_data[]

</code></pre>

<hr>
<h2 id='fit_attrib'>Data fit</h2><span id='topic+fit_attrib'></span>

<h3>Description</h3>

<p>Data fit using glmer from lme4 with family poisson to fit the dataset with the given formula.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fit_attrib(data, response, fixef, ranef, offset = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fit_attrib_+3A_data">data</code></td>
<td>
<p>The observed data to be fitted.</p>
</td></tr>
<tr><td><code id="fit_attrib_+3A_response">response</code></td>
<td>
<p>The response</p>
</td></tr>
<tr><td><code id="fit_attrib_+3A_fixef">fixef</code></td>
<td>
<p>The fixed effects</p>
</td></tr>
<tr><td><code id="fit_attrib_+3A_ranef">ranef</code></td>
<td>
<p>The random effects</p>
</td></tr>
<tr><td><code id="fit_attrib_+3A_offset">offset</code></td>
<td>
<p>The offsets.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The model fit of the data with additional attributes offset, response and fit_fix.
Offset and response are the same as in the input and fit_fix is the linear model of the fix effects.
</p>
<p>For more details see the help vignette:
<code>vignette("intro", package="attrib")</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
response &lt;- "deaths"

fixef &lt;- "pr100_ili_lag_1 + sin(2 * pi * (week - 1) / 52) + cos(2 * pi * (week - 1) / 52)"
ranef &lt;- " (pr100_ili_lag_1| season)"
offset &lt;- "log(pop)"

data &lt;- attrib::data_fake_nation


fit_attrib(data = data, response = response, fixef = fixef, ranef = ranef, offset = offset)
</code></pre>

<hr>
<h2 id='sim'>Generates simulations of expected mortality by simulating the model coefficients.</h2><span id='topic+sim'></span>

<h3>Description</h3>

<p>With the given fit from fit_attrib the function sim, from package arm as described in Gelman, Hill (2012) &lt;doi:10.1017/CBO9780511790942&gt;, is used to generate 500 simulations
of all the coefficients, from there respective posterior distributions.
This is then used to compute the expected response for all simulations and rows in the input dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sim(fit, data, n_sim)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sim_+3A_fit">fit</code></td>
<td>
<p>A model fit created by fit_attrib</p>
</td></tr>
<tr><td><code id="sim_+3A_data">data</code></td>
<td>
<p>The data with either observed values or reference values.</p>
</td></tr>
<tr><td><code id="sim_+3A_n_sim">n_sim</code></td>
<td>
<p>Number of simulations</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>vignette("intro", package="attrib")</code>
</p>


<h3>Value</h3>

<p>A dataset with 500 simulations of the expected response for each row in the original dataset.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
response &lt;- "deaths"
fixef &lt;- "pr100_ili_lag_1 + sin(2 * pi * (week - 1) / 52) + cos(2 * pi * (week - 1) / 52)"
ranef &lt;- " (pr100_ili_lag_1| season)"
offset &lt;- "log(pop)"

data &lt;- attrib::data_fake_nation

fit &lt;- fit_attrib(data = data, response = response, fixef = fixef, ranef = ranef, offset = offset)

n_sim &lt;- 5
sim(fit, data, n_sim)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
