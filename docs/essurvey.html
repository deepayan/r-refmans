<!DOCTYPE html><html><head><title>Help for package essurvey</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {essurvey}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#essurvey-package'><p>essurvey: Download Data from the European Social Survey on the Fly</p></a></li>
<li><a href='#import_country'><p>Download integrated rounds separately for countries from the European Social</p>
Survey</a></li>
<li><a href='#import_rounds'><p>Download integrated rounds from the European Social Survey</p></a></li>
<li><a href='#import_sddf_country'><p>Download SDDF data by round for countries from the European Social Survey</p></a></li>
<li><a href='#recode_missings'><p>Recode pre-defined missing values as NA</p></a></li>
<li><a href='#set_email'><p>Save your ESS email as an environment variable</p></a></li>
<li><a href='#show_countries'><p>Return available countries in the European Social Survey</p></a></li>
<li><a href='#show_country_rounds'><p>Return available rounds for a country in the European Social Survey</p></a></li>
<li><a href='#show_rounds'><p>Return available rounds in the European Social Survey</p></a></li>
<li><a href='#show_rounds_country'><p>Return countries that participated in <strong>all</strong> of the specified rounds.</p></a></li>
<li><a href='#show_sddf_cntrounds'><p>Return available SDDF rounds for a country in the European Social Survey</p></a></li>
<li><a href='#show_theme_rounds'><p>Return available rounds for a theme in the European Social Survey</p></a></li>
<li><a href='#show_themes'><p>Return available themes in the European Social Survey</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Download Data from the European Social Survey on the Fly</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.8</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-01-09</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/essurvey/issues">https://github.com/ropensci/essurvey/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Download data from the European Social Survey directly from their website <a href="http://www.europeansocialsurvey.org/">http://www.europeansocialsurvey.org/</a>. There are two families of functions that allow you to download and interactively check all countries and rounds available.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://docs.ropensci.org/essurvey/">https://docs.ropensci.org/essurvey/</a>,
<a href="https://github.com/ropensci/essurvey">https://github.com/ropensci/essurvey</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>xml2, httr, haven (&ge; 2.1.0), rvest, tibble, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>foreign, testthat (&ge; 2.1.0), knitr, rmarkdown, covr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-01-09 08:25:36 UTC; cimentadaj</td>
</tr>
<tr>
<td>Author:</td>
<td>Jorge Cimentada [aut, cre],
  Thomas Leeper [rev] (Thomas reviewed the package for rOpensci,see
    https://github.com/ropensci/software-review/issues/201),
  Nujcharee Haswell [rev] (Nujcharee reviewed the package for rOpensci,
    see https://github.com/ropensci/software-review/issues/201),
  Jorge Lopez [ctb],
  François Briatte [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jorge Cimentada &lt;cimentadaj@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-01-09 08:42:40 UTC</td>
</tr>
</table>
<hr>
<h2 id='essurvey-package'>essurvey: Download Data from the European Social Survey on the Fly</h2><span id='topic+essurvey'></span><span id='topic+essurvey-package'></span>

<h3>Description</h3>

<p>Download data from the European Social Survey directly from their website &lt;http://www.europeansocialsurvey.org/&gt;. There are two families of functions that allow you to download and interactively check all countries and rounds available.
</p>


<h3>Details</h3>

<p>Note that this package is for downloading data from the ESS survey.
For analyzing the data, the user should consider the weights and sampling
design of each country/round combination as well as sampling between rounds.
For some examples, check out the work of Anthony Damico and Daniel Oberski 
<a href="http://asdfree.com/european-social-survey-ess.html">here</a>. For detailed
examples on how to explore/download data using this package, visit the package website
at <a href="https://docs.ropensci.org/essurvey/">https://docs.ropensci.org/essurvey/</a>
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Jorge Cimentada <a href="mailto:cimentadaj@gmail.com">cimentadaj@gmail.com</a>
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Thomas Leeper (Thomas reviewed the package for rOpensci,see https://github.com/ropensci/software-review/issues/201) [reviewer]
</p>
</li>
<li><p> Nujcharee Haswell (Nujcharee reviewed the package for rOpensci, see https://github.com/ropensci/software-review/issues/201) [reviewer]
</p>
</li>
<li><p> Jorge Lopez <a href="mailto:jorge@loperez.com">jorge@loperez.com</a> [contributor]
</p>
</li>
<li><p> François Briatte <a href="mailto:f.briatte@gmail.com">f.briatte@gmail.com</a> [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://docs.ropensci.org/essurvey/">https://docs.ropensci.org/essurvey/</a>
</p>
</li>
<li> <p><a href="https://github.com/ropensci/essurvey">https://github.com/ropensci/essurvey</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ropensci/essurvey/issues">https://github.com/ropensci/essurvey/issues</a>
</p>
</li></ul>


<hr>
<h2 id='import_country'>Download integrated rounds separately for countries from the European Social
Survey</h2><span id='topic+import_country'></span><span id='topic+import_all_cntrounds'></span><span id='topic+download_country'></span>

<h3>Description</h3>

<p>Download integrated rounds separately for countries from the European Social
Survey
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_country(country, rounds, ess_email = NULL, format = NULL)

import_all_cntrounds(country, ess_email = NULL, format = NULL)

download_country(
  country,
  rounds,
  ess_email = NULL,
  output_dir = getwd(),
  format = "stata"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="import_country_+3A_country">country</code></td>
<td>
<p>a character of length 1 with the full name of the country. 
Use <code><a href="#topic+show_countries">show_countries</a></code> for a list of available countries.</p>
</td></tr>
<tr><td><code id="import_country_+3A_rounds">rounds</code></td>
<td>
<p>a numeric vector with the rounds to download. See <code><a href="#topic+show_rounds">show_rounds</a></code>
for all available rounds.</p>
</td></tr>
<tr><td><code id="import_country_+3A_ess_email">ess_email</code></td>
<td>
<p>a character vector with your email, such as &quot;your_email@email.com&quot;.
If you haven't registered in the ESS website, create an account at 
<a href="http://www.europeansocialsurvey.org/user/new">http://www.europeansocialsurvey.org/user/new</a>. A preferred method is to login
through <code><a href="#topic+set_email">set_email</a></code>.</p>
</td></tr>
<tr><td><code id="import_country_+3A_format">format</code></td>
<td>
<p>the format from which to download the data. By default it is NULL for <code>import_*</code> functions and tries to read 'stata', 'spss' and 'sas' in the specific order. This can be useful if some countries don't have a particular format available.  Alternatively, the user can specify the format which can either be 'stata', 'spss' or 'sas'. For the <code>download_*</code> functions it is set to 'stata' because the format should be specified before the downloading. When using <code>import_country</code> the data will be downloaded and read in the <code>format</code> specified. For <code>download_country</code>, the data is downloaded from the specified <code>format</code> (only 'spss' and 'stata' supported, see details).</p>
</td></tr>
<tr><td><code id="import_country_+3A_output_dir">output_dir</code></td>
<td>
<p>a character vector with the output directory in case you want to
only download the files using <code>download_country</code>. Defaults to your working
directory. This will be interpreted as a <strong>directory</strong> and not a path with
a file name.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Use <code>import_country</code> to download specified rounds for a given country and
import them to R.
<code>import_all_cntrounds</code> will download all rounds for a given country by default
and <code>download_country</code> will download rounds and save them in a specified
<code>format</code> in the supplied directory.
</p>
<p>The <code>format</code> argument from <code>import_country</code> should not matter to the user
because the data is read into R either way. However, different formats might have
different handling of the encoding of some questions. This option was preserved
so that the user
can switch between formats if any encoding errors are found in the data. For more
details see the discussion <a href="https://github.com/ropensci/essurvey/issues/11">here</a>.
For this particular argument, 'sas' is not supported because the data formats have
changed between ESS waves and separate formats require different functions to be
read. To preserve parsimony and format errors between waves, the user should use
'spss' or 'stata'.
</p>


<h3>Value</h3>

<p>for <code>import_country</code> if <code>length(rounds)</code> is 1, it returns a tibble
with the latest version of that round. Otherwise it returns a list of <code>length(rounds)</code>
containing the latest version of each round. For <code>download_country</code>, if 
<code>output_dir</code> is a valid directory, it returns the saved directories invisibly
and saves all the rounds in the chosen <code>format</code> in <code>output_dir</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

set_email("your_email@email.com")

# Get first three rounds for Denmark
dk_three &lt;- import_country("Denmark", 1:3)

# Only download the files, this will return nothing

temp_dir &lt;- tempdir()

download_country(
 "Turkey",
 rounds = c(2, 4),
 output_dir = temp_dir
)

# By default, download_country downloads 'stata' files but
# you can also download 'spss' or 'sas' files.

download_country(
 "Turkey",
 rounds = c(2, 4),
 output_dir = temp_dir,
 format = 'spss'
)

# If email is not registered at ESS website, error will arise
uk_one &lt;- import_country("United Kingdom", 5, "wrong_email@email.com")
# Error in authenticate(ess_email) : 
# The email address you provided is not associated with any registered user.
# Create an account at http://www.europeansocialsurvey.org/user/new

# If selected rounds don't exist, error will arise

czech_two &lt;- import_country("Czech Republic", c(1, 22))

# Error in country_url(country, rounds) : 
# Only rounds ESS1, ESS2, ESS4, ESS5, ESS6, ESS7, ESS8 available
# for Czech Republic

## End(Not run)

</code></pre>

<hr>
<h2 id='import_rounds'>Download integrated rounds from the European Social Survey</h2><span id='topic+import_rounds'></span><span id='topic+import_all_rounds'></span><span id='topic+download_rounds'></span>

<h3>Description</h3>

<p>Download integrated rounds from the European Social Survey
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_rounds(rounds, ess_email = NULL, format = NULL)

import_all_rounds(ess_email = NULL, format = NULL)

download_rounds(
  rounds,
  ess_email = NULL,
  output_dir = getwd(),
  format = "stata"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="import_rounds_+3A_rounds">rounds</code></td>
<td>
<p>a numeric vector with the rounds to download. See <code><a href="#topic+show_rounds">show_rounds</a></code>
for all available rounds.</p>
</td></tr>
<tr><td><code id="import_rounds_+3A_ess_email">ess_email</code></td>
<td>
<p>a character vector with your email, such as &quot;your_email@email.com&quot;.
If you haven't registered in the ESS website, create an account at
<a href="http://www.europeansocialsurvey.org/user/new">http://www.europeansocialsurvey.org/user/new</a>. A preferred method is to login
through <code><a href="#topic+set_email">set_email</a></code>.</p>
</td></tr>
<tr><td><code id="import_rounds_+3A_format">format</code></td>
<td>
<p>the format from which to download the data. By default it is NULL for <code>import_*</code> functions and tries to read 'stata', 'spss' and 'sas' in the specific order. This can be useful if some countries don't have a particular format available.  Alternatively, the user can specify the format which can either be 'stata', 'spss' or 'sas'. For the <code>download_*</code> functions it is set to 'stata' because the format should be specified before downloading. When using <code>import_country</code> the data will be downloaded and read in the <code>format</code> specified. For <code>download_country</code>, the data is downloaded from the specified <code>format</code> (only 'spss' and 'stata' supported, see details).</p>
</td></tr>
<tr><td><code id="import_rounds_+3A_output_dir">output_dir</code></td>
<td>
<p>a character vector with the output directory in case you want to only download the files using
the <code>download_rounds</code>. Defaults to your working directory. This will be interpreted as
a <strong>directory</strong> and not a path with a file name.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Use <code>import_rounds</code> to download specified rounds and import them to R.
<code>import_all_rounds</code> will download all rounds by default and <code>download_rounds</code>
will download rounds and save them in a specified <code>format</code> in the supplied
directory.
</p>
<p>The <code>format</code> argument from <code>import_rounds</code> should not matter to the user
because the data is read into R either way. However, different formats might have
different handling of the encoding of some questions. This option was preserved
so that the user
can switch between formats if any encoding errors are found in the data. For more
details see the discussion <a href="https://github.com/ropensci/essurvey/issues/11">here</a>.
For this particular argument in, 'sas' is not supported because the data formats have
changed between ESS waves and separate formats require different functions to be
read. To preserve parsimony and format errors between waves, the user should use
'spss' or 'stata'.
</p>


<h3>Value</h3>

<p>for <code>import_rounds</code> if <code>length(rounds)</code> is 1, it returns a tibble
with the latest version of that round. Otherwise it returns a list of <code>length(rounds)</code>
containing the latest version of each round. For <code>download_rounds</code>, if
<code>output_dir</code> is a valid directory, it returns the saved directories invisibly
and saves all the rounds in the chosen <code>format</code> in <code>output_dir</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

set_email("your_email@email.com")

# Get first three rounds
three_rounds &lt;- import_rounds(1:3)

temp_dir &lt;- tempdir()

# Only download the files to output_dir, this will return nothing.
download_rounds(
 rounds = 1:3,
 output_dir = temp_dir,
)

# By default, download_rounds saves a 'stata' file. You can
# also download 'spss' and 'sas' files.

download_rounds(
 rounds = 1:3,
 output_dir = temp_dir,
 format = 'spss'
)

# If rounds are repeated, will download only unique ones
two_rounds &lt;- import_rounds(c(1, 1))

# If email is not registered at ESS website, error will arise
two_rounds &lt;- import_rounds(c(1, 2), "wrong_email@email.com")

# Error in authenticate(ess_email) :
# The email address you provided is not associated with any registered user.
# Create an account at https://www.europeansocialsurvey.org/user/new

# If selected rounds don't exist, error will arise

two_rounds &lt;- import_rounds(c(1, 22))
# Error in round_url(rounds) :
# ESS round 22 is not a available. Check show_rounds()

## End(Not run)

</code></pre>

<hr>
<h2 id='import_sddf_country'>Download SDDF data by round for countries from the European Social Survey</h2><span id='topic+import_sddf_country'></span><span id='topic+import_all_sddf_cntrounds'></span><span id='topic+download_sddf_country'></span>

<h3>Description</h3>

<p>Download SDDF data by round for countries from the European Social Survey
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_sddf_country(country, rounds, ess_email = NULL, format = NULL)

import_all_sddf_cntrounds(country, ess_email = NULL, format = NULL)

download_sddf_country(
  country,
  rounds,
  ess_email = NULL,
  output_dir = getwd(),
  format = "stata"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="import_sddf_country_+3A_country">country</code></td>
<td>
<p>a character of length 1 with the full name of the country.
Use <code><a href="#topic+show_countries">show_countries</a></code> for a list of available countries.</p>
</td></tr>
<tr><td><code id="import_sddf_country_+3A_rounds">rounds</code></td>
<td>
<p>a numeric vector with the rounds to download. See <code><a href="#topic+show_sddf_cntrounds">show_sddf_cntrounds</a></code>
for all available rounds for any given country.</p>
</td></tr>
<tr><td><code id="import_sddf_country_+3A_ess_email">ess_email</code></td>
<td>
<p>a character vector with your email, such as &quot;your_email@email.com&quot;.
If you haven't registered in the ESS website, create an account at
<a href="http://www.europeansocialsurvey.org/user/new">http://www.europeansocialsurvey.org/user/new</a>. A preferred method is to login
through <code><a href="#topic+set_email">set_email</a></code>.</p>
</td></tr>
<tr><td><code id="import_sddf_country_+3A_format">format</code></td>
<td>
<p>the format from which to download the data. By default it is NULL for <code>import_*</code> functions and tries to read 'stata', 'spss' and 'sas' in the specific order. This can be useful if some countries don't have a particular format available.  Alternatively, the user can specify the format which can either be 'stata', 'spss' or 'sas'.
For the <code>download_*</code> functions it is set to 'stata' because the format should be
specified before downloading. Setting it to <code>NULL</code> will iterate over 'stata',
'spss' and 'sas' and download the first that is available. When using <code>import_country</code>
the data will be downloaded and read in the <code>format</code> specified. For <code>download_country</code>,
the data is downloaded from the specified <code>format</code> (only 'spss' and 'stata' supported,
see details).</p>
</td></tr>
<tr><td><code id="import_sddf_country_+3A_output_dir">output_dir</code></td>
<td>
<p>a character vector with the output directory in case you want to
only download the files using <code>download_sddf_country</code>. Defaults to your working
directory. This will be interpreted as a <strong>directory</strong> and not a path with
a file name.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>SDDF data (Sample Design Data Files) are data sets that contain additional columns with the
sample design and weights for a given country in a given round. These additional columns are
required to perform any complex weighted analysis of the ESS data. Users interested in using this data
should read the description of SDDF files <a href="http://www.europeansocialsurvey.org/methodology/ess_methodology/sampling.html">here</a>
and should read <a href="http://www.europeansocialsurvey.org/data/download_sample_data.html">here</a> for the
sampling design of the country of analysis for that specific round.
</p>
<p>Use <code>import_sddf_country</code> to download the SDDF data by country into R.
<code>import_all_sddf_cntrounds</code> will download all available SDDF data for a given country by
default and <code>download_sddf_country</code> will download SDDF data and save them in a specified
<code>format</code> in the supplied directory.
</p>
<p>The <code>format</code> argument from <code>import_country</code> should not matter to the user
because the data is read into R either way. However, different formats might have
different handling of the encoding of some questions. This option was preserved
so that the user can switch between formats if any encoding errors are found in the data. For more
details see the discussion <a href="https://github.com/ropensci/essurvey/issues/11">here</a>.
</p>
<p>Additionally, given that the SDDF data is not very complete, some countries do not have SDDF data
in Stata or SPSS formats. For that reason, the <code>format</code> argument is not used in <code>import_sddf_country</code>.
Internally, <code>Stata</code> is chosen over <code>SPSS</code> and <code>SPSS</code> over <code>SAS</code> in that
order of preference.
</p>
<p>For this particular argument, 'sas' is not supported because the data formats have
changed between ESS waves and separate formats require different functions to be
read. To preserve parsimony and format errors between waves, the user should use
'stata' or 'spss'.
</p>
<p>Starting from round 7 (including), the ESS switched the layout of SDDF data.
Before the rounds, SDDF data was published separately by wave-country
combination. From round 7 onwards, all SDDF data is released as a single
integrated file with all countries combined for that given round. <code>import_sddf_country</code>
takes care of this nuance by reading the data and filtering the chosen
country automatically. <code>download_sddf_country</code> downloads the raw file but also
reads the data into memory to subset the specific country requested. This
process should be transparent to the user but beware that reading/writing the data might delete
some of it's properties such as dropping the labels or label attribute.
</p>


<h3>Value</h3>

<p>for <code>import_sddf_country</code> if <code>length(rounds)</code> is 1, it returns a tibble with
the latest version of that round. Otherwise it returns a list of <code>length(rounds)</code>
containing the latest version of each round. For <code>download_sddf_country</code>, if
<code>output_dir</code> is a valid directory, it returns the saved directories invisibly and saves
all the rounds in the chosen <code>format</code> in <code>output_dir</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

set_email("your_email@email.com")

sp_three &lt;- import_sddf_country("Spain", 5:6)

show_sddf_cntrounds("Spain")

# Only download the files, this will return nothing

temp_dir &lt;- tempdir()

download_sddf_country(
 "Spain",
 rounds = 5:6,
 output_dir = temp_dir
)

# By default, download_sddf_country downloads 'stata' files but
# you can also download 'spss' or 'sas' files.

download_sddf_country(
 "Spain",
 rounds = 1:8,
 output_dir = temp_dir,
 format = 'spss'
)


## End(Not run)

</code></pre>

<hr>
<h2 id='recode_missings'>Recode pre-defined missing values as NA</h2><span id='topic+recode_missings'></span><span id='topic+recode_numeric_missing'></span><span id='topic+recode_strings_missing'></span>

<h3>Description</h3>

<p>This function is not needed any more, please see the details section.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recode_missings(ess_data, missing_codes)

recode_numeric_missing(x, missing_codes)

recode_strings_missing(y, missing_codes)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="recode_missings_+3A_ess_data">ess_data</code></td>
<td>
<p>data frame or <code><a href="tibble.html#topic+tibble">tibble</a></code> with data from the
European Social Survey. This data frame should come either
from <code><a href="#topic+import_rounds">import_rounds</a></code>, <code><a href="#topic+import_country">import_country</a></code> or read with
<code><a href="haven.html#topic+read_dta">read_dta</a></code> or <code><a href="haven.html#topic+read_spss">read_spss</a></code>. This is the case because it
identifies missing values using <code><a href="haven.html#topic+labelled">labelled</a></code> classes.</p>
</td></tr>
<tr><td><code id="recode_missings_+3A_missing_codes">missing_codes</code></td>
<td>
<p>a character vector with values 'Not applicable',
'Refusal', 'Don't Know', 'No answer' or 'Not available'. By default
all values are chosen. Note that the wording is case sensitive.</p>
</td></tr>
<tr><td><code id="recode_missings_+3A_x">x</code></td>
<td>
<p>a <code><a href="haven.html#topic+labelled">labelled</a></code> numeric</p>
</td></tr>
<tr><td><code id="recode_missings_+3A_y">y</code></td>
<td>
<p>a character vector</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Data from the European Social Survey is always accompanied by a script
that recodes the categories 'Not applicable', 'Refusal', 'Don't Know',
'No answer' and 'Not available' to missing. This function recodes
these categories to NA
</p>
<p>The European Social Survey now provides these values recoded automatically
in Stata data files. These missing categories are now read as missing values
by <code><a href="haven.html#topic+read_dta">read_dta</a></code>, reading the missing categories correctly from Stata.For an example on how these values are coded, see <a href="https://github.com/ropensci/essurvey/issues/35">here</a>.
</p>
<p>Old details:
</p>
<p>When downloading data directly from the European Social Survey's website,
the downloaded .zip file contains a script that recodes some categories
as missings in Stata and SPSS formats. 
</p>
<p>For recoding numeric variables <code>recode_numeric_missings</code>
uses the labels provided by the <code><a href="haven.html#topic+labelled">labelled</a></code>
class to delete the labels matched in <code>missing_codes</code>. For the
character variables matching is done with the underlying number assigned to
each category, namely 6, 7, 8, 9 and 9 for 'Not applicable', Refusal',
'Don't Know', No answer' and 'Not available'.
</p>
<p>The functions are a direct translation of the Stata script that comes
along when downloading one of the rounds. The Stata script is the same
for all rounds and all countries, meaning that these functions work
for all rounds.
</p>


<h3>Value</h3>

<p>The same data frame or <code><a href="tibble.html#topic+tibble">tibble</a></code> but with values 'Not applicable',
'Refusal', 'Don't Know', 'No answer' and 'Not available' recoded
as NA.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
seven &lt;- import_rounds(7, your_email)

attr(seven$tvtot, "labels")
mean(seven$tvtot, na.rm = TRUE)

names(table(seven$lnghom1))
# First three are actually missing values

seven_recoded &lt;- recode_missings(seven)

attr(seven_recoded$tvtot, "labels")
# All missings have been removed
mean(seven_recoded$tvtot, na.rm = TRUE)

names(table(seven_recoded$lnghom1))
# All missings have been removed

# If you want to operate on specific variables
# you can use other recode_*_missing 

seven$tvtot &lt;- recode_numeric_missing(seven$tvtot)

# Recode only 'Don't know' and 'No answer' to missing
seven$tvpol &lt;- recode_numeric_missing(seven$tvpol, c("Don't know", "No answer"))


# The same can be done with recode_strings_missing

## End(Not run)

</code></pre>

<hr>
<h2 id='set_email'>Save your ESS email as an environment variable</h2><span id='topic+set_email'></span>

<h3>Description</h3>

<p>Save your ESS email as an environment variable
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_email(ess_email)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_email_+3A_ess_email">ess_email</code></td>
<td>
<p>a character string with your registered email.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>You should only run <code>set_email()</code> once and every <code>import_</code> and <code>download_</code> function
should work fine. Make sure your email is registered at
<a href="http://www.europeansocialsurvey.org/">http://www.europeansocialsurvey.org/</a> before setting the email.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
set_email("my_registered@email.com")

import_rounds(1)

## End(Not run)

</code></pre>

<hr>
<h2 id='show_countries'>Return available countries in the European Social Survey</h2><span id='topic+show_countries'></span>

<h3>Description</h3>

<p>Return available countries in the European Social Survey
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_countries()
</code></pre>


<h3>Value</h3>

<p>character vector with available countries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
show_countries()

## End(Not run)


</code></pre>

<hr>
<h2 id='show_country_rounds'>Return available rounds for a country in the European Social Survey</h2><span id='topic+show_country_rounds'></span>

<h3>Description</h3>

<p>Return available rounds for a country in the European Social Survey
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_country_rounds(country)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show_country_rounds_+3A_country">country</code></td>
<td>
<p>A character of length 1 with the full name of the country.
Use <code><a href="#topic+show_countries">show_countries</a></code>for a list of available countries.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>numeric vector with available rounds for <code>country</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

show_country_rounds("Spain")

show_country_rounds("Turkey")


## End(Not run)

</code></pre>

<hr>
<h2 id='show_rounds'>Return available rounds in the European Social Survey</h2><span id='topic+show_rounds'></span>

<h3>Description</h3>

<p>Return available rounds in the European Social Survey
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_rounds()
</code></pre>


<h3>Value</h3>

<p>numeric vector with available rounds
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
show_rounds()

## End(Not run)


</code></pre>

<hr>
<h2 id='show_rounds_country'>Return countries that participated in <strong>all</strong> of the specified rounds.</h2><span id='topic+show_rounds_country'></span>

<h3>Description</h3>

<p>Return countries that participated in <strong>all</strong> of the specified rounds.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_rounds_country(rounds, participate = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show_rounds_country_+3A_rounds">rounds</code></td>
<td>
<p>A numeric vector specifying the rounds from which to return the countries.
Use <code><a href="#topic+show_rounds">show_rounds</a></code>for a list of available rounds.</p>
</td></tr>
<tr><td><code id="show_rounds_country_+3A_participate">participate</code></td>
<td>
<p>A logical that controls whether to show participating countries in that/those
rounds or countries that didn't participate. Set to <code>TRUE</code> by default.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>show_rounds_country</code> returns the countries that participated in
<strong>all</strong> of the specified rounds. That is, <code>show_rounds_country(1:2)</code>
will return countries that participated both in round 1 and round 2. Conversely,
if <code>participate = FALSE</code> it will return the countries that did not
participate in <strong>both</strong> round 1 and round 2.
</p>


<h3>Value</h3>

<p>A character vector with the country names
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

# Return countries that participated in round 2

show_rounds_country(2)

# Return countries that participated in all rounds

show_rounds_country(1:8)

# Return countries that didn't participate in the first three rounds

show_rounds_country(1:3, participate = FALSE)


## End(Not run)
</code></pre>

<hr>
<h2 id='show_sddf_cntrounds'>Return available SDDF rounds for a country in the European Social Survey</h2><span id='topic+show_sddf_cntrounds'></span>

<h3>Description</h3>

<p>Return available SDDF rounds for a country in the European Social Survey
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_sddf_cntrounds(country, ess_email = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show_sddf_cntrounds_+3A_country">country</code></td>
<td>
<p>A character of length 1 with the full name of the country.
Use <code><a href="#topic+show_countries">show_countries</a></code> for a list of available countries.</p>
</td></tr>
<tr><td><code id="show_sddf_cntrounds_+3A_ess_email">ess_email</code></td>
<td>
<p>a character vector with your email, such as &quot;your_email@email.com&quot;.
If you haven't registered in the ESS website, create an account at 
<a href="http://www.europeansocialsurvey.org/user/new">http://www.europeansocialsurvey.org/user/new</a>. A preferred method is to login
through <code><a href="#topic+set_email">set_email</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>SDDF data are the equivalent weight data used to analyze the European Social Survey
properly. For more information, see the details section of <code><a href="#topic+import_sddf_country">import_sddf_country</a></code>.
As an exception to the <code>show_*</code> family of functions, <code>show_sddf rounds</code>
needs your ESS email to check which rounds are available. Be sure to add it
with <code><a href="#topic+set_email">set_email</a></code>.
</p>


<h3>Value</h3>

<p>numeric vector with available rounds for <code>country</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
set_email("your_email@email.com")

show_sddf_cntrounds("Spain")

## End(Not run)

</code></pre>

<hr>
<h2 id='show_theme_rounds'>Return available rounds for a theme in the European Social Survey</h2><span id='topic+show_theme_rounds'></span>

<h3>Description</h3>

<p>This function returns the available rounds for any theme from
<code><a href="#topic+show_themes">show_themes</a></code>. However, contrary to <code><a href="#topic+show_country_rounds">show_country_rounds</a></code>
themes can not be downloaded as separate datasets. This and the 
<code><a href="#topic+show_themes">show_themes</a></code> function serve purely for informative purposes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_theme_rounds(theme)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show_theme_rounds_+3A_theme">theme</code></td>
<td>
<p>A character of length 1 with the full name of the theme.
Use <code><a href="#topic+show_themes">show_themes</a></code>for a list of available themes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>numeric vector with available rounds for <code>country</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
chosen_theme &lt;- show_themes()[3]

# In which rounds was the topic of 'Democracy' asked?
show_theme_rounds(chosen_theme)

# And politics?
show_theme_rounds("Politics")


## End(Not run)

</code></pre>

<hr>
<h2 id='show_themes'>Return available themes in the European Social Survey</h2><span id='topic+show_themes'></span>

<h3>Description</h3>

<p>This function returns the available themes in the European Social Survey.
However, contrary to <code><a href="#topic+show_countries">show_countries</a></code> and <code><a href="#topic+show_country_rounds">show_country_rounds</a></code>,
themes can not be downloaded as separate datasets. This and
<code><a href="#topic+show_theme_rounds">show_theme_rounds</a></code> serve purely for informative purposes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_themes()
</code></pre>


<h3>Value</h3>

<p>character vector with available themes
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
show_themes()

## End(Not run)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
