<!DOCTYPE html><html><head><title>Help for package libr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {libr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#[.dsarray'><p>Indexer for Data Step Array</p></a></li>
<li><a href='#datastep'><p>Step through data row-by-row</p></a></li>
<li><a href='#delete'><p>Removes an observation from a datastep</p></a></li>
<li><a href='#dictionary'><p>Create a Data Dictionary</p></a></li>
<li><a href='#dsarray'><p>Create a Data Step Array</p></a></li>
<li><a href='#dsattr'><p>Assign Datastep Variable Attributes</p></a></li>
<li><a href='#import_spec'><p>Create an Import Specification</p></a></li>
<li><a href='#is.lib'><p>Class test for a data library</p></a></li>
<li><a href='#length.dsarray'><p>Length function for dsarray class</p></a></li>
<li><a href='#lib_add'><p>Add Data to a Data Library</p></a></li>
<li><a href='#lib_copy'><p>Copy a Data Library</p></a></li>
<li><a href='#lib_delete'><p>Delete a Data Library</p></a></li>
<li><a href='#lib_export'><p>Export a Data Library</p></a></li>
<li><a href='#lib_info'><p>Get Information about a Data Library</p></a></li>
<li><a href='#lib_load'><p>Load a Library into the Workspace</p></a></li>
<li><a href='#lib_path'><p>Get the Path for a Data Library</p></a></li>
<li><a href='#lib_remove'><p>Remove Data from a Data Library</p></a></li>
<li><a href='#lib_replace'><p>Replace Data in a Data Library</p></a></li>
<li><a href='#lib_size'><p>Get the Size of a Data Library</p></a></li>
<li><a href='#lib_sync'><p>Synchronize Loaded Library</p></a></li>
<li><a href='#lib_unload'><p>Unload a Library from the Workspace</p></a></li>
<li><a href='#lib_write'><p>Write a Data Library to the File System</p></a></li>
<li><a href='#libname'><p>Create a data library</p></a></li>
<li><a href='#libr'><p>Libnames, Data Dictionaries and Data Steps</p></a></li>
<li><a href='#output'><p>Outputs an observation from a datastep</p></a></li>
<li><a href='#print.lib'><p>Print a data library</p></a></li>
<li><a href='#print.specs'><p>Print import specifications</p></a></li>
<li><a href='#read.specs'><p>Read import specs from the file system</p></a></li>
<li><a href='#specs'><p>Create an Import Spec Collection</p></a></li>
<li><a href='#write.specs'><p>Write import specs to the file system</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Libraries, Data Dictionaries, and a Data Step for R</td>
</tr>
<tr>
<td>Version:</td>
<td>1.3.1</td>
</tr>
<tr>
<td>Author:</td>
<td>David J. Bosak</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>David Bosak &lt;dbosak01@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Contains a set of functions to create data libraries,
    generate data dictionaries, and simulate a data step.
    The libname() function will load a directory of data into 
    a library in one line of code.  The dictionary() function
    will generate data dictionaries for individual
    data frames or an entire library.  And the datestep() function
    will perform row-by-row data processing.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://creativecommons.org/publicdomain/zero/1.0/legalcode">CC0</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://libr.r-sassy.org">https://libr.r-sassy.org</a>, <a href="https://github.com/dbosak01/libr">https://github.com/dbosak01/libr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/dbosak01/libr/issues">https://github.com/dbosak01/libr/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0), common (&ge; 1.1.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown, foreign, magrittr, utils, logr,
covr, fmtr</td>
</tr>
<tr>
<td>Imports:</td>
<td>readr, readxl, haven, openxlsx, crayon, dplyr, tibble, tools,
Rcpp, data.table</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-07 15:10:52 UTC; dbosa</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-07 15:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+5B.dsarray'>Indexer for Data Step Array</h2><span id='topic++5B.dsarray'></span>

<h3>Description</h3>

<p>A custom indexer for the Datastep Array.  The indexer will
return a value for all columns or a specified column. To 
access all columns, leave the indexer empty. Otherwise, specify the
the column name(s) or number(s) to return data for.  The indexer will
always act upon the current row in the datastep.  
For additional details, see the <code><a href="#topic+dsarray">dsarray</a></code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'dsarray'
x[i = NULL]
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B5B.dsarray_+3A_x">x</code></td>
<td>
<p>The <code><a href="#topic+dsarray">dsarray</a></code> object.</p>
</td></tr>
<tr><td><code id="+2B5B.dsarray_+3A_i">i</code></td>
<td>
<p>The index of the datastep array item to return a value for.
This index can be a column name or position in the array. It can also
be a vector of column names or positions.  If no index
is supplied, a vector of all array values will be returned.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The value of the specified column for the current row in the 
datastep.  If no index is supplied, a vector of all column values will
be returned.
</p>


<h3>See Also</h3>

<p>Other datastep: 
<code><a href="#topic+datastep">datastep</a>()</code>,
<code><a href="#topic+delete">delete</a>()</code>,
<code><a href="#topic+dsarray">dsarray</a>()</code>,
<code><a href="#topic+dsattr">dsattr</a>()</code>,
<code><a href="#topic+length.dsarray">length.dsarray</a>()</code>,
<code><a href="#topic+output">output</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(libr)

# Create AirPassengers Data Frame
df &lt;- as.data.frame(t(matrix(AirPassengers, 12, 
                    dimnames = list(month.abb, seq(1949, 1960)))), 
                    stringsAsFactors = FALSE)

# Use datastep array to get sums by quarter
# Examine different ways of referencing data inside datastep
dat &lt;- datastep(df,
                keep = c("Q1", "Q2", "Q3", "Q4", "Tot"),
                arrays = list(months = dsarray(names(df))),
                {
                
                   # Reference by column name
                   Q1 &lt;- Jan + Feb + Mar
                   
                   # Reference by array positions
                   Q2 &lt;- sum(months[4:6])
                   
                   # Reference by array names
                   Q3 &lt;- sum(months[c("Jul", "Aug", "Sep")])
                   
                   # Reference by row position
                   Q4 &lt;- rw$Oct + rw[["Nov"]] + rw[[12]]
                   
                   # Empty indexer returns all column values in array
                   Tot &lt;- sum(months[])
                  
                })

dat
#        Q1   Q2   Q3   Q4  Tot
# 1949  362  385  432  341 1520
# 1950  382  409  498  387 1676
# 1951  473  513  582  474 2042
# 1952  544  582  681  557 2364
# 1953  628  707  773  592 2700
# 1954  627  725  854  661 2867
# 1955  742  854 1023  789 3408
# 1956  878 1005 1173  883 3939
# 1957  972 1125 1336  988 4421
# 1958 1020 1146 1400 1006 4572
# 1959 1108 1288 1570 1174 5140
# 1960 1227 1468 1736 1283 5714
</code></pre>

<hr>
<h2 id='datastep'>Step through data row-by-row</h2><span id='topic+datastep'></span>

<h3>Description</h3>

<p>The <code>datastep</code> function allows you to perform
row-wise conditional processing on a data frame, data table, or tibble. 
The function
contains parameters to drop, keep, or rename variables, perform
by-group processing, and perform row-wise or column-wise calculations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datastep(
  data,
  steps,
  keep = NULL,
  drop = NULL,
  rename = NULL,
  by = NULL,
  calculate = NULL,
  retain = NULL,
  attrib = NULL,
  arrays = NULL,
  sort_check = TRUE,
  format = NULL,
  label = NULL,
  where = NULL,
  set = NULL,
  merge = NULL,
  merge_by = NULL,
  merge_in = NULL,
  log = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datastep_+3A_data">data</code></td>
<td>
<p>The data to step through.</p>
</td></tr>
<tr><td><code id="datastep_+3A_steps">steps</code></td>
<td>
<p>The operations to perform on the data.  This parameter is 
specified as a set of R statements contained within 
curly braces. If no steps are desired, pass empty curly braces.</p>
</td></tr>
<tr><td><code id="datastep_+3A_keep">keep</code></td>
<td>
<p>A vector of quoted variable names to keep in the output
data set. By default, all variables are kept.</p>
</td></tr>
<tr><td><code id="datastep_+3A_drop">drop</code></td>
<td>
<p>A vector of quoted variable names to drop from the output
data set. By default, no variables are dropped.</p>
</td></tr>
<tr><td><code id="datastep_+3A_rename">rename</code></td>
<td>
<p>A named vector of quoted variables to rename.  The current
variable name should be on the left hand side of the name/value pair,
and the new variable name should be on the right.  The rename operation
is performed after the data step, the keep, and the drop.  Therefore, 
the data steps should use the input variable name.  By default, all variables
retain their original names.</p>
</td></tr>
<tr><td><code id="datastep_+3A_by">by</code></td>
<td>
<p>A vector of quoted variable names to use for by-group processing.
This parameter will activate the <code>first.</code> and <code>last.</code> automatic
variables, that indicate the first or last rows in a group.  These 
automatic variables are useful for conditional processing on groups.
The function will also create first and last automatic variables for each
variable specified in the by group.</p>
</td></tr>
<tr><td><code id="datastep_+3A_calculate">calculate</code></td>
<td>
<p>Steps to set up calculated variables.
Calculated variables are commonly generated with summary functions such as
<code>mean</code>, <code>median</code>, <code>min</code>, <code>max</code>, etc.  It is more 
efficient to set up calculated variables with the calculate parameter and then 
use those variables in the data step, rather than perform the summary
function inside the data step.  The calculate block will be executed 
immediately before the data step.</p>
</td></tr>
<tr><td><code id="datastep_+3A_retain">retain</code></td>
<td>
<p>A list of variable names and initial values 
to retain.  Retained variables will begin the data step with the initial
value.  Then for each iteration of the data step, the variable will
be populated with the ending value from the previous step.  The retain
functionality allows you to perform cumulative operations or decisions
based on the value of the previous iteration of the data step.  Initial 
values should be of the expected data type for the column.  For example, 
for a numeric column set the initial value to a zero, and for a
character column, set the initial value to an empty string, i.e.
<code>retain = list(col1 = 0, col2 = "")</code>.  There is no default initial 
value for a variable.  You must supply an initial value for each retained
variable.</p>
</td></tr>
<tr><td><code id="datastep_+3A_attrib">attrib</code></td>
<td>
<p>A named list of attributes.  The list can be either
<code><a href="#topic+dsattr">dsattr</a></code> objects or single default values.  The <code>dsattr</code>
object allows you to set more attributes on each column.  The 
single default value is convenient if you simply want to create a variable.
By default, variables will be created on the fly with no attributes.</p>
</td></tr>
<tr><td><code id="datastep_+3A_arrays">arrays</code></td>
<td>
<p>A named list of <code><a href="#topic+dsarray">dsarray</a></code> objects. The 
<code>dsarray</code> is a list of columns which you can 
iterate over inside the data step.  You can iterate over a <code>dsarray</code>
either with a <code>for</code> loop, or with a vectorized function. 
The default value of the <code>arrays</code> parameter is NULL, meaning
no arrays are defined.</p>
</td></tr>
<tr><td><code id="datastep_+3A_sort_check">sort_check</code></td>
<td>
<p>Checks to see if the input data is sorted according to
the <code>by</code> variable parameter.  The sort check will give an error
if the input data is not sorted according to the <code>by</code> variable.
The check is turned on if the value of 
<code>sort_check</code> is TRUE, and turned off if FALSE.  The default value
is TRUE.  Turn the sort check off if you want to perform by-group 
processing on unsorted data, or data that is not sorted according
to the by-group.</p>
</td></tr>
<tr><td><code id="datastep_+3A_format">format</code></td>
<td>
<p>A named list of formats to assign to the data
frame.  Formats will be assigned both before and after the datastep.</p>
</td></tr>
<tr><td><code id="datastep_+3A_label">label</code></td>
<td>
<p>A named list of labels to assign to the output data frame.</p>
</td></tr>
<tr><td><code id="datastep_+3A_where">where</code></td>
<td>
<p>An expression to filter the output dataset.  The where
clause will be applied prior to any drop, keep, or rename statement.
Use the <code>expression</code> function to assign the where clause.</p>
</td></tr>
<tr><td><code id="datastep_+3A_set">set</code></td>
<td>
<p>A dataset or list of datasets to append to the input 
data frame.  The set operation will occur at the beginning of the datastep,
prior to the execution of any steps.  The columns in the set datasets
do not have to match.  Where there are no matching columns, the missing
values will be filled with NA.</p>
</td></tr>
<tr><td><code id="datastep_+3A_merge">merge</code></td>
<td>
<p>A dataset or list of datasets to merge with the input
data.  The merge operation will occur at the beginning of the datastep,
prior to the execution of any steps.  When the <code>merge</code> operation is 
requested, the <code>merge_by</code> parameter will be used to indicate which variable(s)
to merge by. If no <code>merge_by</code> is specified, the merge dataset columns will 
simply be appended to the right of the input dataset.</p>
</td></tr>
<tr><td><code id="datastep_+3A_merge_by">merge_by</code></td>
<td>
<p>If the <code>merge</code> parameter is set, the <code>merge_by</code> 
parameter will be used to identify the variable(s) to merge by. If merge 
variables are the same on both datasets, the names may be passed as a simple 
quoted vector. If the variable names are different, pass the variables 
to merge on as a named vector.  For example, <code>c("ITEMID" = "ITEMCODE")</code>
would specify that the join should occur on the &quot;ITEMID&quot; from the 
dataset specified in the <code>data</code> parameter, and the &quot;ITEMCODE&quot;
variable from the dataset specified on the <code>merge</code> parameter.</p>
</td></tr>
<tr><td><code id="datastep_+3A_merge_in">merge_in</code></td>
<td>
<p>A vector of column names to be used to hold the merge flags.
The number of names should correspond to the number of 
datasets being merged. The
merge flags will be populated with 0 or 1 values to indicate whether the record
came from the corresponding table. Use the <code>where</code> parameter, 
<code>delete</code> function, or <code>output</code> function to filter desired results.</p>
</td></tr>
<tr><td><code id="datastep_+3A_log">log</code></td>
<td>
<p>Whether or not to log the datastep.  Default is TRUE.  This 
parameter is used internally.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Two parameters on the <code>datastep</code> function are required: 
<strong>data</strong> and <strong>steps</strong>.  The <strong>data</strong> parameter is
the input data to the data step.  The <strong>steps</strong> parameter contains
the code statements you want to apply to the data. The <strong>steps</strong>
should be wrapped in curly braces.  When running, the data step
will loop through the input data row-by-row, and execute the steps for 
each row.  Variables inside the data step can be accessed using 
non-standard evaluation (meaning they  do not have to be quoted).
</p>
<p>Note that the data step is pipe-friendly.  It can be used within 
a <strong>dplyr</strong> pipeline.  The data step allows you to perform
deeply nested and complex conditionals within the pipeline.  The data
step is also very readable compared to other pipeline conditionals.
</p>


<h3>Value</h3>

<p>The processed data frame, tibble, or data table.
</p>


<h3>Automatic Variables</h3>

<p>The <code>datastep</code> function provides five automatic variables. These 
variables are generated for every data step, and can 
be accessed at any point within the data step: 
</p>

<ul>
<li><p><strong>data</strong>: Represents the entire input data frame.
</p>
</li>
<li><p><strong>rw</strong>: Represents the current row.
</p>
</li>
<li><p><strong>n.</strong>: Contains the row number.
</p>
</li>
<li><p><strong>first.</strong>: Indicates the beginning of a by-group.
</p>
</li>
<li><p><strong>last.</strong>: Indicates the end of a by-group.
</p>
</li></ul>

<p>Automatic variables will be dropped from the data frame at the end
of the data step.  If you wish to keep the automatic variable values,
assign the automatic variable to a new variable and keep that variable.
</p>
<p>If there are multiple by group variables, the <code>first.</code> and <code>last.</code> 
automatic variables indicates a either/or combination of all by variables.  
In addition,
<code>first.X</code> and <code>last.X</code> automatic variables will be created for 
each variable, where &quot;X&quot; represents the name of the specified variable.
As always, these names are case-sensitive.
</p>


<h3>Column Attributes</h3>

<p>To set attributes for a column on your data, use the <code>attrib</code>
parameter.  Example attributes include 'label', 'description', 
and 'format'.  These types of attributes are set using a named list and a 
<code><a href="#topic+dsattr">dsattr</a></code> object. The name of the list item
is the column name you want to set attributes on. 
The value of the list item is the <code>dsattr</code> object.
For a complete list of available attributes, 
see the <code><a href="#topic+dsattr">dsattr</a></code> documentation.
</p>
<p>It should be mentioned  that the <code>dsattr</code> object is not required.  
You can also set attributes with a name and a default value.  
The default value can be any valid data value, such as a number or string.
</p>
<p>The label and format attributes may also be set with the 'label' and 
'format' parameters. These parameters accept a named list with the 
labels or formats, and will be assigned to the output data frame.
</p>


<h3>Optional Parameters</h3>

<p>Optional parameters on the <code>datastep</code> allow you to shape 
the output dataset or enhance the operation of the <code>datastep</code>.  Some
parameters are classified as input parameters, and others as output 
parameters.  Input parameters modify the data before the data step
operations takes place.  Output parameters operate on the data
after the data step.
</p>
<p>The <code>keep</code>, <code>drop</code>, and <code>rename</code> parameters
are output parameters.  These parameters will be applied after the
data step statements are executed.  Therefore, within the data step, 
refer to variables using the input variable name. New variables may 
be created on the fly, just by assigning a value to the new
variable name.
</p>
<p>The <code>keep</code>, <code>drop</code>, and <code>rename</code> parameters require 
quoted variable names, as the variables may not yet exist at the 
time they are passed into the function.  Within a data step or 
calculate block, however, 
variable names do not need to be quoted. 
</p>
<p>The <code>calculate</code> parameter is used to perform vectorized functions
on the data prior to executing the data step.  For example, you 
may want to determine a mean for a variable in the <code>calculate</code>
block, and then make decisions on that mean in the data step block. 
</p>
<p>The <code>retain</code> parameter allows you to access the prior row value.
At the start of the data step, the retained variable is seeded with the 
initial value. For each subsequent step, the variable is seeded with the
value of the prior step/row.  This functionality allows you to increment 
values or perform cumulative operations.
</p>
<p><code>calculate</code> and <code>retain</code> are both input parameters.
</p>


<h3>Set and Merge Operations</h3>

<p>The <code>datastep</code> function allows you to join one or more input datasets 
into a single output dataset.  There are two operations in this regard:
&quot;set&quot; and &quot;merge&quot;.  A set operation stacks the datasets vertically, one
on top of another. The merge operation joins the datasets horizontally,
left and right.  
</p>
<p>The <code>datastep</code> set and merge operations are unusually flexible compared
to other join functions in R. The set operation does not require the same 
number of columns in each dataset.  Likewise, the merge operation does
not require the same number of rows.  In both cases, where there is no
corresponding column or row, the function will fill in with NA values.
</p>
<p>The merge operation can perform both inner and outer joins.  By default, 
the merge performs a full outer join.  If you wish to limit the operation
to an inner join, use the &quot;merge_in&quot; parameter to set up variables with 
which you can filter the desired rows.  The &quot;merge_in&quot; variables will
be populated with 1 or 0 values, which indicate whether or not the 
dataset contained that row.  Once these variables are populated, you
can easily limit the results using a <code>where</code> expression, or the 
<code>delete</code> or <code>output</code> functions from inside the datastep.
</p>


<h3>Data Step Arrays</h3>

<p>There are times you may want to iterate over columns in your data step.  Such 
iteration is particularly useful when you have a wide dataset,
and wish to perform the same operation on several columns.
For instance, you may want to calculate the mean for 10 different
variables on your dataset.
</p>
<p>The <code>arrays</code> parameter allows you to iterate across columns.  
This parameter accepts a named list of 
<code><a href="#topic+dsarray">dsarray</a></code> objects.  The <code>dsarray</code> is essentially
a list of columns.  You can use a <code>for</code> loop to iterate over the
<code>dsarray</code>, and also send it into a vectorized function.  Data 
step arrays allow to you to perform row-wise calculations. 
For instance, you can calculate 
a sum or mean by row for the variables in your array.
</p>


<h3>Output Column Order</h3>

<p>By default, the data step will retain the column order of any variables that
already exist on the input data set. New variables created 
in a data step will be appended to the right of existing variables.  
Yet these new variables can sometimes appear in an order that is 
unexpected or undesirable.  
</p>
<p>There are two ways to control the order of output columns:
the <code>keep</code> parameter and the <code>attrib</code> parameter.
</p>
<p>Columns names included on the 
<code>keep</code> parameter will appear in the order indicated on the keep
vector.  This ordering mechanism is appropriate when you have a small
number of columns and can easily pass the entire keep list.
</p>
<p>To control the order of new variables only, use the <code>attrib</code> parameter.
New variables for which attributes are defined will appear in the 
order indicated on the <code>attrib</code> list.  The <code>attrib</code> list
is useful when you are adding a relatively small number of columns to 
an existing data set, and don't want to pass all the column names. 
</p>
<p>Remember
that you can supply an attribute list with default values only,
such as <code>attrib = list(column1 = 0, column2 = "")</code>.  This style of 
attribute definition is convenient if you are only trying to control
the order of columns.
</p>
<p>If the above two mechanisms to control column order are not sufficient,
use the data frame subset operators or column ordering functions 
provided by other packages.
</p>


<h3>Datastep Performance</h3>

<p>The <code>datastep</code> is intended to be used on small and medium-sized 
datasets.  It is not recommended for large datasets.
If your dataset is greater than one million rows, you should consider
other techniques for processing your data.  While there is no 
built-in restriction on the number of rows, performance of the
<code>datastep</code> can become unacceptable with a large number of rows.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+libname">libname</a></code> function to create a data library, and
the <code><a href="#topic+dictionary">dictionary</a></code> function to create a data dictionary.
</p>
<p>Other datastep: 
<code><a href="#topic++5B.dsarray">[.dsarray</a>()</code>,
<code><a href="#topic+delete">delete</a>()</code>,
<code><a href="#topic+dsarray">dsarray</a>()</code>,
<code><a href="#topic+dsattr">dsattr</a>()</code>,
<code><a href="#topic+length.dsarray">length.dsarray</a>()</code>,
<code><a href="#topic+output">output</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example #1: Simple Data Step
df &lt;- datastep(mtcars[1:10,], 
               keep = c("mpg", "cyl", "disp", "mpgcat", "recdt", "is8cyl"), {
                 
  if (mpg &gt;= 20) 
    mpgcat &lt;- "High"
  else 
    mpgcat &lt;- "Low"
                 
  recdt &lt;- as.Date("1974-06-10")
                 
  if (cyl == 8)
    is8cyl &lt;- TRUE
  else 
    is8cyl &lt;- FALSE
                 
})

df
#                    mpg cyl  disp mpgcat      recdt
# Mazda RX4         21.0   6 160.0   High 1974-06-10
# Mazda RX4 Wag     21.0   6 160.0   High 1974-06-10
# Datsun 710        22.8   4 108.0   High 1974-06-10
# Hornet 4 Drive    21.4   6 258.0   High 1974-06-10
# Hornet Sportabout 18.7   8 360.0    Low 1974-06-10
# Valiant           18.1   6 225.0    Low 1974-06-10
# Duster 360        14.3   8 360.0    Low 1974-06-10
# Merc 240D         24.4   4 146.7   High 1974-06-10
# Merc 230          22.8   4 140.8   High 1974-06-10
# Merc 280          19.2   6 167.6    Low 1974-06-10

# Example #2: By-group Processing
df &lt;- datastep(mtcars[1:10,], 
               keep = c("mpg", "cyl", "gear", "grp"), 
               by = c("gear"), sort_check = FALSE, {
                 
  if (first.)
    grp &lt;- "Start"
  else if (last.)
    grp &lt;- "End"
  else 
    grp &lt;- "-"
                 
})

df
#                    mpg cyl gear   grp
# Mazda RX4         21.0   6    4 Start
# Mazda RX4 Wag     21.0   6    4     -
# Datsun 710        22.8   4    4   End
# Hornet 4 Drive    21.4   6    3 Start
# Hornet Sportabout 18.7   8    3     -
# Valiant           18.1   6    3     -
# Duster 360        14.3   8    3   End
# Merc 240D         24.4   4    4 Start
# Merc 230          22.8   4    4     -
# Merc 280          19.2   6    4   End 

# Example #3: Calculate Block
df &lt;- datastep(mtcars, 
               keep = c("mpg", "cyl", "mean_mpg", "mpgcat"), 
               calculate = { mean_mpg = mean(mpg) }, {
                 
  if (mpg &gt;= mean_mpg)
    mpgcat &lt;- "High"
  else 
    mpgcat &lt;- "Low"
                 
})

df[1:10,]
#                    mpg cyl mean_mpg mpgcat
# Mazda RX4         21.0   6 20.09062   High
# Mazda RX4 Wag     21.0   6 20.09062   High
# Datsun 710        22.8   4 20.09062   High
# Hornet 4 Drive    21.4   6 20.09062   High
# Hornet Sportabout 18.7   8 20.09062    Low
# Valiant           18.1   6 20.09062    Low
# Duster 360        14.3   8 20.09062    Low
# Merc 240D         24.4   4 20.09062   High
# Merc 230          22.8   4 20.09062   High
# Merc 280          19.2   6 20.09062    Low

# Example #4: Data pipeline
library(dplyr)
library(magrittr)

# Add datastep to dplyr pipeline
df &lt;- mtcars %&gt;% 
  select(mpg, cyl, gear) %&gt;% 
  mutate(mean_mpg = mean(mpg)) %&gt;% 
  datastep({
    
    if (mpg &gt;= mean_mpg)
      mpgcat &lt;- "High"
    else 
      mpgcat &lt;- "Low"
    
  }) %&gt;% 
  filter(row_number() &lt;= 10)

df
#     mpg cyl gear mean_mpg mpgcat
# 1  21.0   6    4 20.09062   High
# 2  21.0   6    4 20.09062   High
# 3  22.8   4    4 20.09062   High
# 4  21.4   6    3 20.09062   High
# 5  18.7   8    3 20.09062    Low
# 6  18.1   6    3 20.09062    Low
# 7  14.3   8    3 20.09062    Low
# 8  24.4   4    4 20.09062   High
# 9  22.8   4    4 20.09062   High
# 10 19.2   6    4 20.09062    Low

# Example #5: Drop, Retain and Rename
df &lt;- datastep(mtcars[1:10, ], 
               drop = c("disp", "hp", "drat", "qsec", 
                        "vs", "am", "gear", "carb"), 
               retain = list(cumwt = 0 ),
               rename = c(mpg = "MPG", cyl = "Cylinders", wt = "Wgt", 
                          cumwt = "Cumulative Wgt"), {
                 
  cumwt &lt;- cumwt + wt
                 
})

df
#                    MPG Cylinders   Wgt Cumulative Wgt
# Mazda RX4         21.0         6 2.620          2.620
# Mazda RX4 Wag     21.0         6 2.875          5.495
# Datsun 710        22.8         4 2.320          7.815
# Hornet 4 Drive    21.4         6 3.215         11.030
# Hornet Sportabout 18.7         8 3.440         14.470
# Valiant           18.1         6 3.460         17.930
# Duster 360        14.3         8 3.570         21.500
# Merc 240D         24.4         4 3.190         24.690
# Merc 230          22.8         4 3.150         27.840
# Merc 280          19.2         6 3.440         31.280

# Example #6: Attributes and Arrays

# Create sample data
dat &lt;- read.table(header = TRUE, text = '
   Year  Q1   Q2  Q3  Q4
   2000 125  137 152 140
   2001 132  145 138  87
   2002 101  104 115 121')
 
# Use attrib list to control column order and add labels
# Use array to calculate row sums and means, and get best quarter
df &lt;- datastep(dat,
               attrib = list(Tot = dsattr(0, label = "Year Total"),
                             Avg = dsattr(0, label = "Year Average"),
                             Best = dsattr(0, label = "Best Quarter")),
               arrays = list(qtrs = dsarray("Q1", "Q2", "Q3", "Q4")),
               drop = "q",
               steps = {
               
                 # Empty brackets return all array values
                 Tot &lt;- sum(qtrs[])
                 Avg &lt;- mean(qtrs[])
                 
                 # Iterate to find best quarter
                 for (q in qtrs) {
                   if (qtrs[q] == max(qtrs[]))
                     Best &lt;- q
                 }
               })
               
df
#   Year  Q1  Q2  Q3  Q4 Tot    Avg Best
# 1 2000 125 137 152 140 554 138.50   Q3
# 2 2001 132 145 138  87 502 125.50   Q2
# 3 2002 101 104 115 121 441 110.25   Q4

dictionary(df)
#   A tibble: 8 x 10
#   Name  Column Class     Label        Description Format Width Justify  Rows   NAs
#   &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;        &lt;chr&gt;       &lt;lgl&gt;  &lt;int&gt; &lt;chr&gt;   &lt;int&gt; &lt;int&gt;
# 1 df    Year   integer   NA           NA          NA        NA NA          3     0
# 2 df    Q1     integer   NA           NA          NA        NA NA          3     0
# 3 df    Q2     integer   NA           NA          NA        NA NA          3     0
# 4 df    Q3     integer   NA           NA          NA        NA NA          3     0
# 5 df    Q4     integer   NA           NA          NA        NA NA          3     0
# 6 df    Tot    integer   Year Total   NA          NA        NA NA          3     0
# 7 df    Avg    numeric   Year Average NA          NA        NA NA          3     0
# 8 df    Best   character Best Quarter NA          NA         2 NA          3     0

# Example #7: Set and Merge Operations

# Create sample data
grp1 &lt;- read.table(header = TRUE, text = '
  GROUP  NAME
  G01  Group1
  G02  Group2
', stringsAsFactors = FALSE)

grp2 &lt;- read.table(header = TRUE, text = '
  GROUP  NAME
  G03  Group3
  G04  Group4
', stringsAsFactors = FALSE)
  
dat &lt;- read.table(header = TRUE, text = '
  ID AGE SEX GROUP
  A01 58 F    G01
  A02 20 M    G02
  A03 47 F    G05
  A04 11 M    G03
  A05 23 F    G01
', stringsAsFactors = FALSE)

# Set operation
grps &lt;- datastep(grp1, set = grp2, {})
grps
#   GROUP   NAME
# 1   G01 Group1
# 2   G02 Group2
# 3   G03 Group3
# 4   G04 Group4

# Merge operation - Outer Join
res &lt;- datastep(dat, merge = grps, 
                merge_by = "GROUP", 
                merge_in = c("inA", "inB"), {})
                
# View results
res
#     ID AGE  SEX GROUP   NAME inA inB
# 1  A01  58    F   G01 Group1   1   1
# 2  A05  23    F   G01 Group1   1   1
# 3  A02  20    M   G02 Group2   1   1
# 4  A04  11    M   G03 Group3   1   1
# 5  A03  47    F   G05   &lt;NA&gt;   1   0
# 6 &lt;NA&gt;  NA &lt;NA&gt;   G04 Group4   0   1

# Merge operation - Inner Join
res &lt;- datastep(dat, merge = grps, 
                merge_by = "GROUP", 
                merge_in = c("inA", "inB"), 
                where = expression(inA &amp; inB), {})
                
# View results
res
#     ID AGE  SEX GROUP   NAME inA inB
# 1  A01  58    F   G01 Group1   1   1
# 2  A05  23    F   G01 Group1   1   1
# 3  A02  20    M   G02 Group2   1   1
# 4  A04  11    M   G03 Group3   1   1
</code></pre>

<hr>
<h2 id='delete'>Removes an observation from a datastep</h2><span id='topic+delete'></span>

<h3>Description</h3>

<p>The <code>delete</code> function will remove an observation
from the output of a datastep.  The function takes no parameters.  To use 
the function, simply call it on the rows you want to delete.  Typically
it is called within a conditional.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>delete()
</code></pre>


<h3>Value</h3>

<p>Observation is marked with a delete flag.  No return value.
</p>


<h3>See Also</h3>

<p>Other datastep: 
<code><a href="#topic++5B.dsarray">[.dsarray</a>()</code>,
<code><a href="#topic+datastep">datastep</a>()</code>,
<code><a href="#topic+dsarray">dsarray</a>()</code>,
<code><a href="#topic+dsattr">dsattr</a>()</code>,
<code><a href="#topic+length.dsarray">length.dsarray</a>()</code>,
<code><a href="#topic+output">output</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#' # Remove all cars that are not 4 cylinder
df &lt;- datastep(mtcars, 
               keep = c("mpg", "cyl", "disp"), {
                 
  if (cyl != 4)
    delete()
                 
})

df
#     mpg cyl  disp
# 1  22.8   4 108.0
# 2  24.4   4 146.7
# 3  22.8   4 140.8
# 4  32.4   4  78.7
# 5  30.4   4  75.7
# 6  33.9   4  71.1
# 7  21.5   4 120.1
# 8  27.3   4  79.0
# 9  26.0   4 120.3
# 10 30.4   4  95.1
# 11 21.4   4 121.0
</code></pre>

<hr>
<h2 id='dictionary'>Create a Data Dictionary</h2><span id='topic+dictionary'></span>

<h3>Description</h3>

<p>A function to create a data dictionary for a data frame,
a tibble, or a data library.  The function will generate a tibble of 
information about the data.  The tibble will contain the following columns:
</p>

<ul>
<li><p><strong>Name:</strong> The name of the data object.
</p>
</li>
<li><p><strong>Column:</strong> The name of the column.
</p>
</li>
<li><p><strong>Class:</strong> The class of the column.
</p>
</li>
<li><p><strong>Label:</strong> The value of the label attribute.
</p>
</li>
<li><p><strong>Description:</strong> A description applied to this column.
</p>
</li>
<li><p><strong>Format:</strong> The value of the format attribute.
</p>
</li>
<li><p><strong>Width:</strong> The value of the width attribute if any have been
assigned.
</p>
</li>
<li><p><strong>Justify:</strong> The justification or alignment attribute value.
</p>
</li>
<li><p><strong>Rows:</strong> The number of data rows.
</p>
</li>
<li><p><strong>NAs:</strong> The number of NA values in this column.
</p>
</li>
<li><p><strong>MaxChar:</strong> The maximum character length of the
values in this column with no padding.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>dictionary(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dictionary_+3A_x">x</code></td>
<td>
<p>The input library, data frame, or tibble.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+libname">libname</a></code> to create a data library.  Also 
see the <code><a href="#topic+dsattr">dsattr</a></code> function to set attributes for your 
dataset from within a <code><a href="#topic+datastep">datastep</a></code>.  To render attributes, 
see the <strong>fmtr</strong> package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create temp directory
tmp &lt;- tempdir()

# Create library
libname(dat, tmp)

# Add data to the library
lib_add(dat, beaver1)
lib_add(dat, iris)

# Examine the dictionary for the library
dictionary(dat)
# A tibble: 9 x 10
#   Name    Column       Class   Label Description Format Width Justify  Rows   NAs MaxChar
#   &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;   &lt;lgl&gt; &lt;lgl&gt;       &lt;lgl&gt;  &lt;lgl&gt; &lt;lgl&gt;   &lt;int&gt; &lt;int&gt;   &lt;int&gt;
# 1 beaver1 day          numeric NA    NA          NA     NA    NA        114     0       3
# 2 beaver1 time         numeric NA    NA          NA     NA    NA        114     0       4
# 3 beaver1 temp         numeric NA    NA          NA     NA    NA        114     0       5
# 4 beaver1 activ        numeric NA    NA          NA     NA    NA        114     0       1
# 5 iris    Sepal.Length numeric NA    NA          NA     NA    NA        150     0       3
# 6 iris    Sepal.Width  numeric NA    NA          NA     NA    NA        150     0       3
# 7 iris    Petal.Length numeric NA    NA          NA     NA    NA        150     0       3
# 8 iris    Petal.Width  numeric NA    NA          NA     NA    NA        150     0       3
# 9 iris    Species      factor  NA    NA          NA     NA    NA        150     0      10

# Clean up
lib_delete(dat)
</code></pre>

<hr>
<h2 id='dsarray'>Create a Data Step Array</h2><span id='topic+dsarray'></span>

<h3>Description</h3>

<p>A data step array is an object that allows you to iterate
across a set of columns inside a <code><a href="#topic+datastep">datastep</a></code>.  This structure is
useful when you need to perform the same or similar operations on many columns.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dsarray(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dsarray_+3A_...">...</code></td>
<td>
<p>Column names to include as part of the datastep array.  The 
names can be provided as quoted strings or a vector of strings.
If names are provided as quoted strings, separate the strings with commas 
(i.e. <code>dsarray("col1", "col2", "col3")</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The datastep array has an indexer that allows you to access a particular
column value.  The indexer can be used within a for loop to iterate over
the array. In this manner, you can place a set of conditions inside
the for loop and run the same conditional logic on all the columns 
in the array. 
</p>
<p>You can also use the datastep array with an empty indexer in vectorized 
functions like <code><a href="base.html#topic+sum">sum</a></code>, <code><a href="base.html#topic+mean">mean</a></code>, 
and <code><a href="base.html#topic+max">max</a></code>.  The empty indexer will return all the 
values in the array for the current row.
</p>


<h3>Value</h3>

<p>The datastep array object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+libname">libname</a></code> to create a data library, and
<code><a href="#topic+dictionary">dictionary</a></code> for generating a data dictionary
</p>
<p>Other datastep: 
<code><a href="#topic++5B.dsarray">[.dsarray</a>()</code>,
<code><a href="#topic+datastep">datastep</a>()</code>,
<code><a href="#topic+delete">delete</a>()</code>,
<code><a href="#topic+dsattr">dsattr</a>()</code>,
<code><a href="#topic+length.dsarray">length.dsarray</a>()</code>,
<code><a href="#topic+output">output</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(libr)

# Create AirPassengers Data Frame
df &lt;- as.data.frame(t(matrix(AirPassengers, 12, 
                    dimnames = list(month.abb, seq(1949, 1960)))),
                    stringsAsFactors = FALSE)

# Use datastep array to get year tot, mean, and top month
dat &lt;- datastep(df,
                arrays = list(months = dsarray(names(df))),
                attrib = list(Tot = 0, Mean = 0, Top = ""),
                drop = "mth",
                {
                
                  Tot &lt;- sum(months[])
                  Mean &lt;- mean(months[])
                
                  for (mth in months) {
                    if (months[mth] == max(months[])) {
                      Top &lt;- mth
                    }
                  }
                  
                })

dat
#      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec  Tot     Mean Top
# 1949 112 118 132 129 121 135 148 148 136 119 104 118 1520 126.6667 Aug
# 1950 115 126 141 135 125 149 170 170 158 133 114 140 1676 139.6667 Aug
# 1951 145 150 178 163 172 178 199 199 184 162 146 166 2042 170.1667 Aug
# 1952 171 180 193 181 183 218 230 242 209 191 172 194 2364 197.0000 Aug
# 1953 196 196 236 235 229 243 264 272 237 211 180 201 2700 225.0000 Aug
# 1954 204 188 235 227 234 264 302 293 259 229 203 229 2867 238.9167 Jul
# 1955 242 233 267 269 270 315 364 347 312 274 237 278 3408 284.0000 Jul
# 1956 284 277 317 313 318 374 413 405 355 306 271 306 3939 328.2500 Jul
# 1957 315 301 356 348 355 422 465 467 404 347 305 336 4421 368.4167 Aug
# 1958 340 318 362 348 363 435 491 505 404 359 310 337 4572 381.0000 Aug
# 1959 360 342 406 396 420 472 548 559 463 407 362 405 5140 428.3333 Aug
# 1960 417 391 419 461 472 535 622 606 508 461 390 432 5714 476.1667 Jul
</code></pre>

<hr>
<h2 id='dsattr'>Assign Datastep Variable Attributes</h2><span id='topic+dsattr'></span>

<h3>Description</h3>

<p>An object to assign attributes
to a column in a <code><a href="#topic+datastep">datastep</a></code>.  The parameters allow you
to set the following attributes: 'class', 'label', 'description', 'width', 
'justify', and 'format'.  Any other desired attributes can be set 
with <code>...</code>.
</p>
<p>The attributes available in the <code>dsattr</code> class are closely aligned
with those available on the <code><a href="#topic+dictionary">dictionary</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dsattr(
  default = NA,
  label = NULL,
  description = NULL,
  width = NULL,
  format = NULL,
  justify = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dsattr_+3A_default">default</code></td>
<td>
<p>The default value of the column.  The default value can
be any valid data value. Typical default 
values might be an empty string (&quot;&quot;) or a zero (0).  If no
default value is specified, the column will be defaulted to NA.</p>
</td></tr>
<tr><td><code id="dsattr_+3A_label">label</code></td>
<td>
<p>The label to associate with this column.  Accepts
any string value. The label will appear as a column header on some 
data viewers and reporting packages.</p>
</td></tr>
<tr><td><code id="dsattr_+3A_description">description</code></td>
<td>
<p>A description for this column.  Accepts any string
value.  The description is intended to be a longer explanation of the 
purpose or source of the variable.</p>
</td></tr>
<tr><td><code id="dsattr_+3A_width">width</code></td>
<td>
<p>The desired width for the column in number of characters.</p>
</td></tr>
<tr><td><code id="dsattr_+3A_format">format</code></td>
<td>
<p>The format associated with this column.  See the 
<strong>fmtr</strong> package for more information about formatting.</p>
</td></tr>
<tr><td><code id="dsattr_+3A_justify">justify</code></td>
<td>
<p>The desired justification for the column.  This parameter
is normally used only for fixed-width, character columns.  Valid values
are 'left', 'right', 'center', and 'centre'.</p>
</td></tr>
<tr><td><code id="dsattr_+3A_...">...</code></td>
<td>
<p>Any other attributes you wish to assign to this column. Pass
these additional attributes as a name/value pair.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The data step attributes object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dictionary">dictionary</a></code> function to observe the attributes
associated with a dataset.  Also see the <code>fdata</code> 
function in the <strong>fmtr</strong>
package for more information on formatting and rendering data frames.
</p>
<p>Other datastep: 
<code><a href="#topic++5B.dsarray">[.dsarray</a>()</code>,
<code><a href="#topic+datastep">datastep</a>()</code>,
<code><a href="#topic+delete">delete</a>()</code>,
<code><a href="#topic+dsarray">dsarray</a>()</code>,
<code><a href="#topic+length.dsarray">length.dsarray</a>()</code>,
<code><a href="#topic+output">output</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(libr)

# Create small sample dataframe
dat &lt;- mtcars[1:10, c("mpg", "cyl")]

# Perform datastep and assign attributes
dat1 &lt;- datastep(dat, 
                 attrib = list(mpg = dsattr(label = "Miles Per Gallon"),
                               cyl = dsattr(label = "Cylinders"),
                               mpgcat = dsattr(label = "Fuel Efficiency")),
                {
                
                  if (mpg &gt;= 20) 
                    mpgcat = "High"
                  else 
                    mpgcat = "Low"
                
                })

# Print results                 
dat1
#                    mpg cyl mpgcat
# Mazda RX4         21.0   6   High
# Mazda RX4 Wag     21.0   6   High
# Datsun 710        22.8   4   High
# Hornet 4 Drive    21.4   6   High
# Hornet Sportabout 18.7   8    Low
# Valiant           18.1   6    Low
# Duster 360        14.3   8    Low
# Merc 240D         24.4   4   High
# Merc 230          22.8   4   High
# Merc 280          19.2   6    Low
                
# Examine label attributes
attr(dat1$mpg, "label") 
# [1] "Miles Per Gallon"

attr(dat1$cyl, "label") 
# [1] "Cylinders"

attr(dat1$mpgcat, "label")
# [1] "Fuel Efficiency"

# See labels in viewer 
# View(dat1)
</code></pre>

<hr>
<h2 id='import_spec'>Create an Import Specification</h2><span id='topic+import_spec'></span>

<h3>Description</h3>

<p>A function to create the import specifications for a 
particular data file.  This information can be used on the 
<code><a href="#topic+libname">libname</a></code> function to correctly assign the data types for 
columns on imported data. The import specifications are defined as 
name/value pairs, where the name is the column name and the value is the
data type indicator.  Available data type indicators are 
'guess', 'logical', 'character', 'integer', 'numeric',
'date', 'datetime', and 'time'.  See the <code><a href="#topic+specs">specs</a></code> function
for an example of using import specs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_spec(..., na = NULL, trim_ws = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="import_spec_+3A_...">...</code></td>
<td>
<p>Named pairs of column names and column data types.
Available types are: 'guess', 'logical', 'character', 'integer', 'numeric',
'date', 'datetime', and 'time'.  The date/time data types accept an optional
input format.  To supply the input format, append it after the data type
following an equals sign, e.g.: 'date=%d%B%Y' or 
'datetime=%d%m%Y %H:%M:%S'. Default is NULL, meaning no column 
types are specified, and the function should make its best 
guess for each column.</p>
</td></tr>
<tr><td><code id="import_spec_+3A_na">na</code></td>
<td>
<p>A vector of values to be treated as NA.  For example, the 
vector <code>c('', ' ')</code> will cause empty strings and single blanks to 
be converted to NA values. Default is NULL, meaning the value of the 
<code>na</code> parameter will be taken from the <code><a href="#topic+specs">specs</a></code> function.
Any value supplied on the <code>import_spec</code> function will override the 
value from the <code>specs</code> function.</p>
</td></tr>
<tr><td><code id="import_spec_+3A_trim_ws">trim_ws</code></td>
<td>
<p>Whether or not to trim white space from the input data values.
The default is NULL, meaning the value of the <code>trim_ws</code> parameter
will be taken from the <code><a href="#topic+specs">specs</a></code> function.  Any value supplied 
on the <code>import_spec</code> function will override the value from the 
<code>specs</code> function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The import specification object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+libname">libname</a></code> to create a data library, and 
<code><a href="#topic+specs">specs</a></code> for an example using import specs.
</p>
<p>Other specs: 
<code><a href="#topic+print.specs">print.specs</a>()</code>,
<code><a href="#topic+read.specs">read.specs</a>()</code>,
<code><a href="#topic+specs">specs</a>()</code>,
<code><a href="#topic+write.specs">write.specs</a>()</code>
</p>

<hr>
<h2 id='is.lib'>Class test for a data library</h2><span id='topic+is.lib'></span>

<h3>Description</h3>

<p>This function tests whether an object is a data library.  The
data library has a class of &quot;lib&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.lib(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.lib_+3A_x">x</code></td>
<td>
<p>The object to test.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE or FALSE, depending on whether or not the object is a 
data library.
</p>


<h3>See Also</h3>

<p>Other lib: 
<code><a href="#topic+lib_add">lib_add</a>()</code>,
<code><a href="#topic+lib_copy">lib_copy</a>()</code>,
<code><a href="#topic+lib_delete">lib_delete</a>()</code>,
<code><a href="#topic+lib_export">lib_export</a>()</code>,
<code><a href="#topic+lib_info">lib_info</a>()</code>,
<code><a href="#topic+lib_load">lib_load</a>()</code>,
<code><a href="#topic+lib_path">lib_path</a>()</code>,
<code><a href="#topic+lib_remove">lib_remove</a>()</code>,
<code><a href="#topic+lib_replace">lib_replace</a>()</code>,
<code><a href="#topic+lib_size">lib_size</a>()</code>,
<code><a href="#topic+lib_sync">lib_sync</a>()</code>,
<code><a href="#topic+lib_unload">lib_unload</a>()</code>,
<code><a href="#topic+lib_write">lib_write</a>()</code>,
<code><a href="#topic+libname">libname</a>()</code>,
<code><a href="#topic+print.lib">print.lib</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create format catalog
libname(dat, tempdir()) 
           
# Test for "lib" class
is.lib(dat) 
# [1] TRUE

is.lib(list())
# [1] FALSE

# Clean up
lib_delete(dat)
</code></pre>

<hr>
<h2 id='length.dsarray'>Length function for dsarray class</h2><span id='topic+length.dsarray'></span>

<h3>Description</h3>

<p>A length function for the data step array <code><a href="#topic+dsarray">dsarray</a></code>.
The length function can by used either inside or outside the data step.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'dsarray'
length(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="length.dsarray_+3A_x">x</code></td>
<td>
<p>The <code><a href="#topic+dsarray">dsarray</a></code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The number of items in the specified <code><a href="#topic+dsarray">dsarray</a></code>.
</p>


<h3>See Also</h3>

<p>Other datastep: 
<code><a href="#topic++5B.dsarray">[.dsarray</a>()</code>,
<code><a href="#topic+datastep">datastep</a>()</code>,
<code><a href="#topic+delete">delete</a>()</code>,
<code><a href="#topic+dsarray">dsarray</a>()</code>,
<code><a href="#topic+dsattr">dsattr</a>()</code>,
<code><a href="#topic+output">output</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Define datastep array
carr &lt;- dsarray(names(mtcars))

length(carr)
# 11
</code></pre>

<hr>
<h2 id='lib_add'>Add Data to a Data Library</h2><span id='topic+lib_add'></span>

<h3>Description</h3>

<p>The <code><a href="#topic+lib_add">lib_add</a></code> function adds a data frame
or tibble to an existing data library.  The function will both add the data
to the library list, and immediately write the data to the library
directory location. The data will be written to disk
in the file format associated with the library engine. 
If the library is loaded, the function will also 
add the data to the workspace environment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lib_add(x, ..., name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lib_add_+3A_x">x</code></td>
<td>
<p>The library to add data to.</p>
</td></tr>
<tr><td><code id="lib_add_+3A_...">...</code></td>
<td>
<p>The data frame(s) to add to the library.  If more than one,
separate with commas.</p>
</td></tr>
<tr><td><code id="lib_add_+3A_name">name</code></td>
<td>
<p>The reference name to use for the data.  By default,
the name will be the variable name.  To assign a name different
from the variable name, assign a quoted name to this parameter.  If more
than one data set is being appended, assign a vector of quoted names.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other lib: 
<code><a href="#topic+is.lib">is.lib</a>()</code>,
<code><a href="#topic+lib_copy">lib_copy</a>()</code>,
<code><a href="#topic+lib_delete">lib_delete</a>()</code>,
<code><a href="#topic+lib_export">lib_export</a>()</code>,
<code><a href="#topic+lib_info">lib_info</a>()</code>,
<code><a href="#topic+lib_load">lib_load</a>()</code>,
<code><a href="#topic+lib_path">lib_path</a>()</code>,
<code><a href="#topic+lib_remove">lib_remove</a>()</code>,
<code><a href="#topic+lib_replace">lib_replace</a>()</code>,
<code><a href="#topic+lib_size">lib_size</a>()</code>,
<code><a href="#topic+lib_sync">lib_sync</a>()</code>,
<code><a href="#topic+lib_unload">lib_unload</a>()</code>,
<code><a href="#topic+lib_write">lib_write</a>()</code>,
<code><a href="#topic+libname">libname</a>()</code>,
<code><a href="#topic+print.lib">print.lib</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#' # Create temp directory
tmp &lt;- tempdir()

# Create library
libname(dat, tmp)
# # library 'dat': 0 items
# - attributes: rds not loaded
# - path: C:\Users\User\AppData\Local\Temp\RtmpCSJ6Gc
# NULL

# Add data to the library
lib_add(dat, mtcars, beaver1, iris)
# library 'dat': 3 items
# - attributes: not loaded
# - path: C:\Users\User\AppData\Local\Temp\RtmpCSJ6Gc
# - items:
#      Name Extension Rows Cols   Size        LastModified
# 1  mtcars       rds   32   11 7.5 Kb 2020-11-05 19:32:00
# 2 beaver1       rds  114    4 5.1 Kb 2020-11-05 19:32:04
# 3    iris       rds  150    5 7.5 Kb 2020-11-05 19:32:08

# Clean up
lib_delete(dat)
</code></pre>

<hr>
<h2 id='lib_copy'>Copy a Data Library</h2><span id='topic+lib_copy'></span>

<h3>Description</h3>

<p>The <code>lib_copy</code> function copies a data library.  The 
function accepts a library and a destination path.  If the destination 
path does not exist, the function will attempt to create it.  
</p>
<p>Note that
the copy will result in the current data in memory written to the new
destination directory.  If the library is loaded into the workspace, 
the workspace version will be considered the most current version, and
that is the version that will be copied.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lib_copy(x, nm, directory_path, standard_eval = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lib_copy_+3A_x">x</code></td>
<td>
<p>The library to copy.</p>
</td></tr>
<tr><td><code id="lib_copy_+3A_nm">nm</code></td>
<td>
<p>The variable name to hold the new library.
The parameter will assume non-standard
(unquoted) evaluation unless the <code>standard_eval</code> parameter is set
to TRUE.</p>
</td></tr>
<tr><td><code id="lib_copy_+3A_directory_path">directory_path</code></td>
<td>
<p>The path to copy the library to.</p>
</td></tr>
<tr><td><code id="lib_copy_+3A_standard_eval">standard_eval</code></td>
<td>
<p>A TRUE or FALSE value which indicates whether to 
use standard (quoted) or non-standard (unquoted) evaluation on the 
<code>nm</code> parameter. Default is FALSE.  Use this parameter if you want to 
pass the target library name in a variable.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The new library.
</p>


<h3>See Also</h3>

<p>Other lib: 
<code><a href="#topic+is.lib">is.lib</a>()</code>,
<code><a href="#topic+lib_add">lib_add</a>()</code>,
<code><a href="#topic+lib_delete">lib_delete</a>()</code>,
<code><a href="#topic+lib_export">lib_export</a>()</code>,
<code><a href="#topic+lib_info">lib_info</a>()</code>,
<code><a href="#topic+lib_load">lib_load</a>()</code>,
<code><a href="#topic+lib_path">lib_path</a>()</code>,
<code><a href="#topic+lib_remove">lib_remove</a>()</code>,
<code><a href="#topic+lib_replace">lib_replace</a>()</code>,
<code><a href="#topic+lib_size">lib_size</a>()</code>,
<code><a href="#topic+lib_sync">lib_sync</a>()</code>,
<code><a href="#topic+lib_unload">lib_unload</a>()</code>,
<code><a href="#topic+lib_write">lib_write</a>()</code>,
<code><a href="#topic+libname">libname</a>()</code>,
<code><a href="#topic+print.lib">print.lib</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create temp directory
tmp &lt;- tempdir()

# Create library
libname(dat1, tmp)

# Add dat to library
lib_add(dat1, mtcars, iris)

# Copy dat1 to dat2
lib_copy(dat1, dat2, file.path(tmp, "copy"))
# library 'dat2': 2 items
# - attributes: not loaded
# - path: C:\Users\User\AppData\Local\Temp\RtmpCSJ6Gc/copy
# - items:
#     Name Extension Rows Cols   Size        LastModified
# 1 mtcars       rds   32   11 7.5 Kb 2020-11-05 21:14:54
# 2   iris       rds  150    5 7.5 Kb 2020-11-05 21:14:54

# Clean up
lib_delete(dat1)
lib_delete(dat2)
</code></pre>

<hr>
<h2 id='lib_delete'>Delete a Data Library</h2><span id='topic+lib_delete'></span>

<h3>Description</h3>

<p>The <code>lib_delete</code> function deletes a data library from
the file system and from memory.  All data files associated with the library
and the specified engine will be deleted.
If other files exist in the library directory, they will not be affected
by the delete operation.  
</p>
<p>The directory that contains the data will also
not be affected by the delete operation.  To delete the data directory, 
use the <code><a href="base.html#topic+unlink">unlink</a></code> function or other packaged functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lib_delete(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lib_delete_+3A_x">x</code></td>
<td>
<p>The data library to delete.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other lib: 
<code><a href="#topic+is.lib">is.lib</a>()</code>,
<code><a href="#topic+lib_add">lib_add</a>()</code>,
<code><a href="#topic+lib_copy">lib_copy</a>()</code>,
<code><a href="#topic+lib_export">lib_export</a>()</code>,
<code><a href="#topic+lib_info">lib_info</a>()</code>,
<code><a href="#topic+lib_load">lib_load</a>()</code>,
<code><a href="#topic+lib_path">lib_path</a>()</code>,
<code><a href="#topic+lib_remove">lib_remove</a>()</code>,
<code><a href="#topic+lib_replace">lib_replace</a>()</code>,
<code><a href="#topic+lib_size">lib_size</a>()</code>,
<code><a href="#topic+lib_sync">lib_sync</a>()</code>,
<code><a href="#topic+lib_unload">lib_unload</a>()</code>,
<code><a href="#topic+lib_write">lib_write</a>()</code>,
<code><a href="#topic+libname">libname</a>()</code>,
<code><a href="#topic+print.lib">print.lib</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create temp directory
tmp &lt;- tempdir()

# Create library
libname(dat, tmp)

# Add data to library
lib_add(dat, mtcars)
lib_add(dat, iris)

# Load library
lib_load(dat)

# Examine workspace
ls()
# [1] "dat" "dat.iris" "dat.mtcars" "tmp"

# Examine library
dat
# library 'dat': 2 items
# - attributes: not loaded
# - path: C:\Users\User\AppData\Local\Temp\RtmpCSJ6Gc
# - items:
#     Name Extension Rows Cols   Size        LastModified
# 1 mtcars       rds   32   11 7.5 Kb 2020-11-05 21:18:17
# 2   iris       rds  150    5 7.5 Kb 2020-11-05 21:18:17

# Delete library
lib_delete(dat)

#' # Examine workspace again
ls()
# [1] "tmp"
</code></pre>

<hr>
<h2 id='lib_export'>Export a Data Library</h2><span id='topic+lib_export'></span>

<h3>Description</h3>

<p>The <code>lib_export</code> function exports a data library to
another library with a different directory and file format.  The 
function accepts a library to export, the new library name,
a destination path, and an engine name.  
If the destination 
path does not exist, the function will attempt to create it.  
</p>
<p>Note that
the export will result in the current data in memory written to the new
destination directory.  If the library is loaded into the workspace, 
the workspace version will be considered the most current version, and
that is the version that will be exported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lib_export(x, nm, directory_path, engine, filter = NULL, standard_eval = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lib_export_+3A_x">x</code></td>
<td>
<p>The library to export.</p>
</td></tr>
<tr><td><code id="lib_export_+3A_nm">nm</code></td>
<td>
<p>The variable name to hold the new library.
The parameter will assume non-standard
(unquoted) evaluation unless the <code>standard_eval</code> parameter is set
to TRUE.</p>
</td></tr>
<tr><td><code id="lib_export_+3A_directory_path">directory_path</code></td>
<td>
<p>The path to export the library to.</p>
</td></tr>
<tr><td><code id="lib_export_+3A_engine">engine</code></td>
<td>
<p>The name of the engine to use for the exported data.
The engine name corresponds to the standard file extension 
of the data file type. Valid values are 'rds', 'Rdata', 'rda', 'sas7bdat', 
'xpt', 'xls', 'xlsx', 'dbf', and 'csv'.</p>
</td></tr>
<tr><td><code id="lib_export_+3A_filter">filter</code></td>
<td>
<p>A filter string to limit which datasets are exported. 
The filter parameter accepts wildcards.</p>
</td></tr>
<tr><td><code id="lib_export_+3A_standard_eval">standard_eval</code></td>
<td>
<p>A TRUE or FALSE value which indicates whether to 
use standard (quoted) or non-standard (unquoted) evaluation on the 
<code>nm</code> parameter. Default is FALSE.  Use this parameter if you want to 
pass the target library name in a variable.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The newly exported library.
</p>


<h3>See Also</h3>

<p>Other lib: 
<code><a href="#topic+is.lib">is.lib</a>()</code>,
<code><a href="#topic+lib_add">lib_add</a>()</code>,
<code><a href="#topic+lib_copy">lib_copy</a>()</code>,
<code><a href="#topic+lib_delete">lib_delete</a>()</code>,
<code><a href="#topic+lib_info">lib_info</a>()</code>,
<code><a href="#topic+lib_load">lib_load</a>()</code>,
<code><a href="#topic+lib_path">lib_path</a>()</code>,
<code><a href="#topic+lib_remove">lib_remove</a>()</code>,
<code><a href="#topic+lib_replace">lib_replace</a>()</code>,
<code><a href="#topic+lib_size">lib_size</a>()</code>,
<code><a href="#topic+lib_sync">lib_sync</a>()</code>,
<code><a href="#topic+lib_unload">lib_unload</a>()</code>,
<code><a href="#topic+lib_write">lib_write</a>()</code>,
<code><a href="#topic+libname">libname</a>()</code>,
<code><a href="#topic+print.lib">print.lib</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create temp directory
tmp &lt;- tempdir()

# Create library
libname(dat1, tmp)

# Add dat to library
lib_add(dat1, mtcars, iris)

# Export dat1 to dat2
lib_export(dat1, dat2, file.path(tmp, "export"), "rdata")
# library 'dat2': 2 items
# - attributes: rdata not loaded
# - path: C:\Users\User\AppData\Local\Temp\Rtmp0Sq3kt/export
# - items:
#     Name Extension Rows Cols   Size        LastModified
# 1 mtcars     rdata   32   11 8.1 Kb 2022-06-23 00:10:52
# 2   iris     rdata  150    5 8.1 Kb 2022-06-23 00:10:52

# Clean up
lib_delete(dat1)
lib_delete(dat2)
</code></pre>

<hr>
<h2 id='lib_info'>Get Information about a Data Library</h2><span id='topic+lib_info'></span>

<h3>Description</h3>

<p>The <code>lib_info</code> function returns a data frame of information
about each item in the data library.  That information includes the item
name, file extension, number of rows, number of columns, size in bytes, 
and the last modified date.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lib_info(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lib_info_+3A_x">x</code></td>
<td>
<p>The data library.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of information about the library.
</p>


<h3>See Also</h3>

<p>Other lib: 
<code><a href="#topic+is.lib">is.lib</a>()</code>,
<code><a href="#topic+lib_add">lib_add</a>()</code>,
<code><a href="#topic+lib_copy">lib_copy</a>()</code>,
<code><a href="#topic+lib_delete">lib_delete</a>()</code>,
<code><a href="#topic+lib_export">lib_export</a>()</code>,
<code><a href="#topic+lib_load">lib_load</a>()</code>,
<code><a href="#topic+lib_path">lib_path</a>()</code>,
<code><a href="#topic+lib_remove">lib_remove</a>()</code>,
<code><a href="#topic+lib_replace">lib_replace</a>()</code>,
<code><a href="#topic+lib_size">lib_size</a>()</code>,
<code><a href="#topic+lib_sync">lib_sync</a>()</code>,
<code><a href="#topic+lib_unload">lib_unload</a>()</code>,
<code><a href="#topic+lib_write">lib_write</a>()</code>,
<code><a href="#topic+libname">libname</a>()</code>,
<code><a href="#topic+print.lib">print.lib</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create temp directory
tmp &lt;- tempdir()

# Create data library
libname(dat, tmp)

# Add data to library
lib_add(dat, trees, rock, beaver1)

# Get library information
info &lt;- lib_info(dat)

# Examine info
info
#      Name Extension Rows Cols   Size        LastModified
# 1 beaver1       rds  114    4 5.3 Kb 2020-11-05 21:27:57
# 2   rocks       rds   48    4 3.1 Kb 2020-11-05 21:27:56
# 3   trees       rds   31    3 2.4 Kb 2020-11-05 21:27:56

# Clean up
lib_delete(dat)
</code></pre>

<hr>
<h2 id='lib_load'>Load a Library into the Workspace</h2><span id='topic+lib_load'></span>

<h3>Description</h3>

<p>The <code>lib_load</code> function loads a data library into
an environment. The environment used is associated with the library at 
the time it is created with the <code><a href="#topic+libname">libname</a></code> function.  
When the <code>lib_load</code> function is called, the data frames/tibbles 
will be loaded with &lt;library&gt;.&lt;data set&gt; syntax.  Loading the data frames
into the environment makes them easy to access and use in your program.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lib_load(x, filter = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lib_load_+3A_x">x</code></td>
<td>
<p>The data library to load.</p>
</td></tr>
<tr><td><code id="lib_load_+3A_filter">filter</code></td>
<td>
<p>One or more quoted strings to use as filters for the
data names to load into the workspace. For more than one filter string, 
pass them as a vector of strings. The filter string can be a full or 
partial name.  If using a partial name, use a wild-card character (*) 
to identify the missing portion. The match will be case-insensitive.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The loaded data library.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+lib_unload">lib_unload</a></code> to unload the library.
</p>
<p>Other lib: 
<code><a href="#topic+is.lib">is.lib</a>()</code>,
<code><a href="#topic+lib_add">lib_add</a>()</code>,
<code><a href="#topic+lib_copy">lib_copy</a>()</code>,
<code><a href="#topic+lib_delete">lib_delete</a>()</code>,
<code><a href="#topic+lib_export">lib_export</a>()</code>,
<code><a href="#topic+lib_info">lib_info</a>()</code>,
<code><a href="#topic+lib_path">lib_path</a>()</code>,
<code><a href="#topic+lib_remove">lib_remove</a>()</code>,
<code><a href="#topic+lib_replace">lib_replace</a>()</code>,
<code><a href="#topic+lib_size">lib_size</a>()</code>,
<code><a href="#topic+lib_sync">lib_sync</a>()</code>,
<code><a href="#topic+lib_unload">lib_unload</a>()</code>,
<code><a href="#topic+lib_write">lib_write</a>()</code>,
<code><a href="#topic+libname">libname</a>()</code>,
<code><a href="#topic+print.lib">print.lib</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create temp directory
tmp &lt;- tempdir()

# Save some data to temp directory for illustration purposes
saveRDS(iris, file.path(tmp, "iris.rds"))
saveRDS(ToothGrowth, file.path(tmp, "ToothGrowth.rds"))
saveRDS(PlantGrowth, file.path(tmp, "PlantGrowth.rds"))

# Create library
libname(dat, tmp)

# Load library into workspace
lib_load(dat)

# Examine workspace
ls()
# [1] "dat" "dat.iris" "dat.PlantGrowth" "dat.ToothGrowth" "tmp"

# Use some data
summary(dat.PlantGrowth)
summary(dat.ToothGrowth)

# Unload library
lib_unload(dat)

# Examine workspace again
ls()
# [1] "dat" "tmp"

# Clean up
lib_delete(dat)
</code></pre>

<hr>
<h2 id='lib_path'>Get the Path for a Data Library</h2><span id='topic+lib_path'></span>

<h3>Description</h3>

<p>The <code>lib_path</code> function returns the current path of the 
the library as a string.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lib_path(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lib_path_+3A_x">x</code></td>
<td>
<p>The data library.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The path of the data library as a single string.
</p>


<h3>See Also</h3>

<p>Other lib: 
<code><a href="#topic+is.lib">is.lib</a>()</code>,
<code><a href="#topic+lib_add">lib_add</a>()</code>,
<code><a href="#topic+lib_copy">lib_copy</a>()</code>,
<code><a href="#topic+lib_delete">lib_delete</a>()</code>,
<code><a href="#topic+lib_export">lib_export</a>()</code>,
<code><a href="#topic+lib_info">lib_info</a>()</code>,
<code><a href="#topic+lib_load">lib_load</a>()</code>,
<code><a href="#topic+lib_remove">lib_remove</a>()</code>,
<code><a href="#topic+lib_replace">lib_replace</a>()</code>,
<code><a href="#topic+lib_size">lib_size</a>()</code>,
<code><a href="#topic+lib_sync">lib_sync</a>()</code>,
<code><a href="#topic+lib_unload">lib_unload</a>()</code>,
<code><a href="#topic+lib_write">lib_write</a>()</code>,
<code><a href="#topic+libname">libname</a>()</code>,
<code><a href="#topic+print.lib">print.lib</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create temp directory
tmp &lt;- tempdir()

# Create library
libname(dat, tmp)

# Examine library path
lib_path(dat)
# [1] "C:\Users\User\AppData\Local\Temp\RtmpCSJ6Gc"

# Clean up
lib_delete(dat)
</code></pre>

<hr>
<h2 id='lib_remove'>Remove Data from a Data Library</h2><span id='topic+lib_remove'></span>

<h3>Description</h3>

<p>The <code>lib_remove</code> function removes an item from the 
data library, and deletes the source file for that data.  If the library
is loaded, it will also remove that item from the workspace environment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lib_remove(x, name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lib_remove_+3A_x">x</code></td>
<td>
<p>The data library.</p>
</td></tr>
<tr><td><code id="lib_remove_+3A_name">name</code></td>
<td>
<p>The quoted name of the item to remove from the data library. 
For more than one name, pass a vector of quoted names.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The library with the requested item removed.
</p>


<h3>See Also</h3>

<p>Other lib: 
<code><a href="#topic+is.lib">is.lib</a>()</code>,
<code><a href="#topic+lib_add">lib_add</a>()</code>,
<code><a href="#topic+lib_copy">lib_copy</a>()</code>,
<code><a href="#topic+lib_delete">lib_delete</a>()</code>,
<code><a href="#topic+lib_export">lib_export</a>()</code>,
<code><a href="#topic+lib_info">lib_info</a>()</code>,
<code><a href="#topic+lib_load">lib_load</a>()</code>,
<code><a href="#topic+lib_path">lib_path</a>()</code>,
<code><a href="#topic+lib_replace">lib_replace</a>()</code>,
<code><a href="#topic+lib_size">lib_size</a>()</code>,
<code><a href="#topic+lib_sync">lib_sync</a>()</code>,
<code><a href="#topic+lib_unload">lib_unload</a>()</code>,
<code><a href="#topic+lib_write">lib_write</a>()</code>,
<code><a href="#topic+libname">libname</a>()</code>,
<code><a href="#topic+print.lib">print.lib</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create temp directory
tmp &lt;- tempdir()

# Create library
libname(dat, tmp)

# Add data to the library
lib_add(dat, mtcars, beaver1, iris)
# library 'dat': 3 items
# - attributes: not loaded
# - path: C:\Users\User\AppData\Local\Temp\RtmpCSJ6Gc
# - items:
#      Name Extension Rows Cols   Size        LastModified
# 1  mtcars       rds   32   11 7.5 Kb 2020-11-05 19:32:00
# 2 beaver1       rds  114    4 5.1 Kb 2020-11-05 19:32:04
# 3    iris       rds  150    5 7.5 Kb 2020-11-05 19:32:08

# Remove items from the library
lib_remove(dat, c("beaver1", "iris"))
# library 'dat': 1 items
# - attributes: not loaded
# - path: C:\Users\User\AppData\Local\Temp\RtmpCSJ6Gc
# - items:
#     Name Extension Rows Cols   Size        LastModified
# 1 mtcars       rds   32   11 7.5 Kb 2020-11-05 19:32:40

# Clean up
lib_delete(dat)
</code></pre>

<hr>
<h2 id='lib_replace'>Replace Data in a Data Library</h2><span id='topic+lib_replace'></span>

<h3>Description</h3>

<p>The <code><a href="#topic+lib_replace">lib_replace</a></code> function replaces a data frame
in an existing data library.  The function will replace the data
in the library list, the data in the workspace (if loaded), 
and immediately write the new data to the library
directory location.  The data will be written in the file format
associated with the library engine.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lib_replace(x, ..., name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lib_replace_+3A_x">x</code></td>
<td>
<p>The library to replace data in.</p>
</td></tr>
<tr><td><code id="lib_replace_+3A_...">...</code></td>
<td>
<p>The data frame(s) to replace.  If you wish to replace more than
one data set, separate with commas.</p>
</td></tr>
<tr><td><code id="lib_replace_+3A_name">name</code></td>
<td>
<p>The reference name to use for the data.  By default,
the name will be the variable name.  To assign a name different
from the variable name, assign a quoted name to this parameter.  If more
than one data set is being replaced, assign a vector of quoted names.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other lib: 
<code><a href="#topic+is.lib">is.lib</a>()</code>,
<code><a href="#topic+lib_add">lib_add</a>()</code>,
<code><a href="#topic+lib_copy">lib_copy</a>()</code>,
<code><a href="#topic+lib_delete">lib_delete</a>()</code>,
<code><a href="#topic+lib_export">lib_export</a>()</code>,
<code><a href="#topic+lib_info">lib_info</a>()</code>,
<code><a href="#topic+lib_load">lib_load</a>()</code>,
<code><a href="#topic+lib_path">lib_path</a>()</code>,
<code><a href="#topic+lib_remove">lib_remove</a>()</code>,
<code><a href="#topic+lib_size">lib_size</a>()</code>,
<code><a href="#topic+lib_sync">lib_sync</a>()</code>,
<code><a href="#topic+lib_unload">lib_unload</a>()</code>,
<code><a href="#topic+lib_write">lib_write</a>()</code>,
<code><a href="#topic+libname">libname</a>()</code>,
<code><a href="#topic+print.lib">print.lib</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#' # Create temp directory
tmp &lt;- tempdir()

# Create library
libname(dat, tmp)

# Add data to the library
lib_add(dat, mtcars)
# library 'dat': 3 items
# - attributes: not loaded
# - path: C:\Users\User\AppData\Local\Temp\RtmpCSJ6Gc
# - items:
#      Name Extension Rows Cols   Size        LastModified
# 1  mtcars       rds   32   11 7.5 Kb 2020-11-05 19:32:00

# Replace data with a subset
lib_replace(dat, mtcars[1:10, 1:5], name = "mtcars")
# library 'dat': 3 items
# - attributes: not loaded
# - path: C:\Users\User\AppData\Local\Temp\RtmpCSJ6Gc
# - items:
#      Name Extension Rows Cols   Size        LastModified
# 1  mtcars       rds   10    5 7.5 Kb 2020-11-05 19:33:00

# Clean up
lib_delete(dat)
</code></pre>

<hr>
<h2 id='lib_size'>Get the Size of a Data Library</h2><span id='topic+lib_size'></span>

<h3>Description</h3>

<p>The <code>lib_size</code> function returns the number of bytes used
by the data library, as stored on disk.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lib_size(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lib_size_+3A_x">x</code></td>
<td>
<p>The data library.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The size of the data library in bytes as stored on the file system.
</p>


<h3>See Also</h3>

<p>Other lib: 
<code><a href="#topic+is.lib">is.lib</a>()</code>,
<code><a href="#topic+lib_add">lib_add</a>()</code>,
<code><a href="#topic+lib_copy">lib_copy</a>()</code>,
<code><a href="#topic+lib_delete">lib_delete</a>()</code>,
<code><a href="#topic+lib_export">lib_export</a>()</code>,
<code><a href="#topic+lib_info">lib_info</a>()</code>,
<code><a href="#topic+lib_load">lib_load</a>()</code>,
<code><a href="#topic+lib_path">lib_path</a>()</code>,
<code><a href="#topic+lib_remove">lib_remove</a>()</code>,
<code><a href="#topic+lib_replace">lib_replace</a>()</code>,
<code><a href="#topic+lib_sync">lib_sync</a>()</code>,
<code><a href="#topic+lib_unload">lib_unload</a>()</code>,
<code><a href="#topic+lib_write">lib_write</a>()</code>,
<code><a href="#topic+libname">libname</a>()</code>,
<code><a href="#topic+print.lib">print.lib</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create temp directory
tmp &lt;- tempdir()

# Create library
libname(dat, tmp)

# Add some data to library
lib_add(dat, mtcars)
lib_add(dat, iris)

# Check size of library
lib_size(dat)
# [1] 9757

# Clean up
lib_delete(dat)
</code></pre>

<hr>
<h2 id='lib_sync'>Synchronize Loaded Library</h2><span id='topic+lib_sync'></span>

<h3>Description</h3>

<p>The <code>lib_sync</code> function synchronizes the data
loaded into the working environment with the data stored 
in the library list.  Synchronization is necessary only
for libraries that have been loaded into the working environment.
The function
copies data from the working environment to the library
list, overwriting any data in the list. The function is useful when 
you want to update the library list, but are not yet ready to 
unload the data from working memory.  
</p>
<p>Note that the <code>lib_sync</code> function does not 
write any data to disk. Also note that the <code>lib_sync</code> function will
not automatically remove any variables from the library list that 
have been removed from the workspace.  To remove items from the library
list, use the <code><a href="#topic+lib_remove">lib_remove</a></code> function.  To write data to 
disk, use the <code><a href="#topic+lib_write">lib_write</a></code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lib_sync(x, name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lib_sync_+3A_x">x</code></td>
<td>
<p>The data library to synchronize.</p>
</td></tr>
<tr><td><code id="lib_sync_+3A_name">name</code></td>
<td>
<p>The name of the library to sync if not the variable
name. Used internally.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The synchronized data library.
</p>


<h3>See Also</h3>

<p>Other lib: 
<code><a href="#topic+is.lib">is.lib</a>()</code>,
<code><a href="#topic+lib_add">lib_add</a>()</code>,
<code><a href="#topic+lib_copy">lib_copy</a>()</code>,
<code><a href="#topic+lib_delete">lib_delete</a>()</code>,
<code><a href="#topic+lib_export">lib_export</a>()</code>,
<code><a href="#topic+lib_info">lib_info</a>()</code>,
<code><a href="#topic+lib_load">lib_load</a>()</code>,
<code><a href="#topic+lib_path">lib_path</a>()</code>,
<code><a href="#topic+lib_remove">lib_remove</a>()</code>,
<code><a href="#topic+lib_replace">lib_replace</a>()</code>,
<code><a href="#topic+lib_size">lib_size</a>()</code>,
<code><a href="#topic+lib_unload">lib_unload</a>()</code>,
<code><a href="#topic+lib_write">lib_write</a>()</code>,
<code><a href="#topic+libname">libname</a>()</code>,
<code><a href="#topic+print.lib">print.lib</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create temp directory
tmp &lt;- tempdir()

# Create library
libname(dat, tmp)
# library 'dat': 0 items
# - attributes: not loaded
# - path: C:\Users\User\AppData\Local\Temp\RtmpCSJ6Gc
# NULL

# Load the library 
lib_load(dat)

# Add data to the workspace
dat.mtcars &lt;- mtcars
dat.beaver1 &lt;- beaver1
dat.iris &lt;- iris

# Sync the library
lib_sync(dat)
# library 'dat': 3 items
# - attributes: loaded
# - path: C:\Users\User\AppData\Local\Temp\RtmpCSJ6Gc
# - items:
#      Name Extension Rows Cols   Size LastModified
# 1 beaver1        NA  114    4 4.6 Kb         &lt;NA&gt;
# 2    iris        NA  150    5 7.1 Kb         &lt;NA&gt;
# 3  mtcars        NA   32   11   7 Kb         &lt;NA&gt;

# Clean up
lib_delete(dat)
</code></pre>

<hr>
<h2 id='lib_unload'>Unload a Library from the Workspace</h2><span id='topic+lib_unload'></span>

<h3>Description</h3>

<p>The <code>lib_unload</code> function unloads a data library from
the workspace environment.  The unload function does not delete the data 
or remove the library.  It simply removes the data frames from working 
memory.  By default, the <code>lib_unload</code> function will also synchronize the 
data in working memory with the data stored in the library list, as these
two instances can become out of sync if you change the data in working memory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lib_unload(x, sync = TRUE, name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lib_unload_+3A_x">x</code></td>
<td>
<p>The data library to unload.</p>
</td></tr>
<tr><td><code id="lib_unload_+3A_sync">sync</code></td>
<td>
<p>Whether to sync the workspace with the library list before
it is unloaded.  Default is TRUE. If you want to unload the workspace 
without saving the workspace data, set this parameter to FALSE.</p>
</td></tr>
<tr><td><code id="lib_unload_+3A_name">name</code></td>
<td>
<p>The name of the library to unload, if the name is different
than the variable name.  Used internally.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The unloaded data library.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+lib_load">lib_load</a></code> to load the library.
</p>
<p>Other lib: 
<code><a href="#topic+is.lib">is.lib</a>()</code>,
<code><a href="#topic+lib_add">lib_add</a>()</code>,
<code><a href="#topic+lib_copy">lib_copy</a>()</code>,
<code><a href="#topic+lib_delete">lib_delete</a>()</code>,
<code><a href="#topic+lib_export">lib_export</a>()</code>,
<code><a href="#topic+lib_info">lib_info</a>()</code>,
<code><a href="#topic+lib_load">lib_load</a>()</code>,
<code><a href="#topic+lib_path">lib_path</a>()</code>,
<code><a href="#topic+lib_remove">lib_remove</a>()</code>,
<code><a href="#topic+lib_replace">lib_replace</a>()</code>,
<code><a href="#topic+lib_size">lib_size</a>()</code>,
<code><a href="#topic+lib_sync">lib_sync</a>()</code>,
<code><a href="#topic+lib_write">lib_write</a>()</code>,
<code><a href="#topic+libname">libname</a>()</code>,
<code><a href="#topic+print.lib">print.lib</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create temp directory
tmp &lt;- tempdir()

# Create library
libname(dat, tmp)

# Add data to library
lib_add(dat, iris, ToothGrowth, PlantGrowth)

# Load library into workspace
lib_load(dat)

# Examine workspace
ls()
# [1] "dat" "dat.iris" "dat.PlantGrowth" "dat.ToothGrowth" "tmp"

# Use some data
summary(dat.PlantGrowth)
summary(dat.ToothGrowth)

# Unload library
lib_unload(dat)

# Examine workspace again
ls()
# [1] "dat" "tmp"

# Clean up
lib_delete(dat)
</code></pre>

<hr>
<h2 id='lib_write'>Write a Data Library to the File System</h2><span id='topic+lib_write'></span>

<h3>Description</h3>

<p>The <code>lib_write</code> function writes the data library
to the file system.  The library will be written to the 
directory for which it was defined, and each data frame will be written
in the format associated with the library data engine.  See the 
<code><a href="#topic+libname">libname</a></code> function for further elaboration on the types
of engines available, and the assumptions/limitations of each.  
</p>
<p>By default, the <code>lib_write</code> function will not write data that has 
not changed.  Prior to writing a file, <code>lib_write</code> will compare the 
data in memory to the data on disk.  If there are differences in the data,
the function will overwrite the version on disk.  To override the default
behavior, use the <code>force</code> option to force <code>lib_write</code> to write
every data file to disk.
</p>
<p>Note that writing sas7bdat files to disk is not supported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lib_write(x, force = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lib_write_+3A_x">x</code></td>
<td>
<p>The data library to write.</p>
</td></tr>
<tr><td><code id="lib_write_+3A_force">force</code></td>
<td>
<p>Force writing each data file to disk, even if it has not 
changed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The saved data library.
</p>


<h3>See Also</h3>

<p>Other lib: 
<code><a href="#topic+is.lib">is.lib</a>()</code>,
<code><a href="#topic+lib_add">lib_add</a>()</code>,
<code><a href="#topic+lib_copy">lib_copy</a>()</code>,
<code><a href="#topic+lib_delete">lib_delete</a>()</code>,
<code><a href="#topic+lib_export">lib_export</a>()</code>,
<code><a href="#topic+lib_info">lib_info</a>()</code>,
<code><a href="#topic+lib_load">lib_load</a>()</code>,
<code><a href="#topic+lib_path">lib_path</a>()</code>,
<code><a href="#topic+lib_remove">lib_remove</a>()</code>,
<code><a href="#topic+lib_replace">lib_replace</a>()</code>,
<code><a href="#topic+lib_size">lib_size</a>()</code>,
<code><a href="#topic+lib_sync">lib_sync</a>()</code>,
<code><a href="#topic+lib_unload">lib_unload</a>()</code>,
<code><a href="#topic+libname">libname</a>()</code>,
<code><a href="#topic+print.lib">print.lib</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create temp directory
tmp &lt;- tempdir()

# Create library
libname(dat, tmp)
# # library 'dat': 0 items
# - attributes: rds not loaded
# - path: C:\Users\User\AppData\Local\Temp\RtmpCSJ6Gc
# NULL

# Load the empty library 
lib_load(dat)

# Add data to the library
dat.mtcars &lt;- mtcars
dat.beaver1 &lt;- beaver1
dat.iris &lt;- iris

# Unload the library
lib_unload(dat)
# library 'dat': 3 items
# - attributes: rds not loaded
# - path: C:\Users\User\AppData\Local\Temp\RtmpCSJ6Gc
# - items:
#      Name Extension Rows Cols   Size LastModified
# 1 beaver1        NA  114    4 4.6 Kb         &lt;NA&gt;
# 2    iris        NA  150    5 7.1 Kb         &lt;NA&gt;
# 3  mtcars        NA   32   11   7 Kb         &lt;NA&gt;

# Write the library to the file system
lib_write(dat)
# library 'dat': 3 items
#- attributes: not loaded
#- path: C:\Users\User\AppData\Local\Temp\RtmpCSJ6Gc
#- items:
#     Name Extension Rows Cols   Size        LastModified
#1 beaver1       rds  114    4 4.8 Kb 2020-11-05 20:47:16
#2    iris       rds  150    5 7.3 Kb 2020-11-05 20:47:16
#3  mtcars       rds   32   11 7.3 Kb 2020-11-05 20:47:16

# Clean up
lib_delete(dat)
</code></pre>

<hr>
<h2 id='libname'>Create a data library</h2><span id='topic+libname'></span>

<h3>Description</h3>

<p>A data library is a collection of data sets. The purpose of 
the data library is to combine related data sets, and provides the opportunity
to manipulate all of them as a single object. A data library is created using 
the <code>libname</code> function. The <code>libname</code> function allows you to 
load an entire directory of data into memory in one step.  The <strong>libr</strong>
package contains additional functions to add and remove data from the library, 
copy the library, and write any changed data to the file system.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>libname(
  name,
  directory_path,
  engine = "rds",
  read_only = FALSE,
  env = parent.frame(),
  import_specs = NULL,
  filter = NULL,
  standard_eval = FALSE,
  quiet = FALSE,
  log = TRUE,
  where = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="libname_+3A_name">name</code></td>
<td>
<p>The unquoted name of the library to create.  The library name will 
be created as a variable in the environment specified on the <code>env</code>
parameter.  The default environment is the parent frame. If you want
to pass the library name as a quoted string or a variable, 
set the <code>standard_eval</code> parameter to TRUE to turn off the
non-standard evaluation.</p>
</td></tr>
<tr><td><code id="libname_+3A_directory_path">directory_path</code></td>
<td>
<p>A directory path to associate with the library.  If 
the directory contains data files of the type specified on the 
<code>engine</code> parameter, they will be imported into the library list.  If
the directory does not contains data sets of the appropriate type, 
it will be created as an empty library. If the directory does not exist, 
it will be created by the <code>libname</code> function.</p>
</td></tr>
<tr><td><code id="libname_+3A_engine">engine</code></td>
<td>
<p>The engine to associate with the library.  The specified 
engine will be used to import and export data.  The engine name 
corresponds to the standard file extension of the data file type. The
default engine is 'rds'.
Valid values are 'rds', 'Rdata', 'rda', 'sas7bdat', 'xpt', 'xls', 'xlsx', 
'dbf', and 'csv'.</p>
</td></tr>
<tr><td><code id="libname_+3A_read_only">read_only</code></td>
<td>
<p>Whether the library should be created as read-only.
Default is FALSE.  If TRUE, the user will be restricted from
appending, removing, or writing any data from memory to the file system.</p>
</td></tr>
<tr><td><code id="libname_+3A_env">env</code></td>
<td>
<p>The environment to use for the libname. 
Default is <code>parent.frame()</code>.  When working inside a function, the 
<code>parent.frame()</code> will refer to the local function scope.  When
working outside a function, the <code>parent.frame()</code> will be the
global environment. If the <code>env</code> parameter is set to a custom 
environment, the custom environment will be used for all subsequent 
operations with that libname.</p>
</td></tr>
<tr><td><code id="libname_+3A_import_specs">import_specs</code></td>
<td>
<p>A collection of import specifications, 
defined using the <code><a href="#topic+specs">specs</a></code> function.
The import specs should be named according to the file names in 
the library directory. See the <code><a href="#topic+specs">specs</a></code> function for additional
information.</p>
</td></tr>
<tr><td><code id="libname_+3A_filter">filter</code></td>
<td>
<p>One or more quoted strings to use as filters for the incoming 
file names. For more than one filter string, pass them as a vector of
strings. The filter string can be a full or partial file name, without
extension.  If using a partial file name, use a wild-card character (*) 
to identify the missing portion. The match will be case-insensitive.</p>
</td></tr>
<tr><td><code id="libname_+3A_standard_eval">standard_eval</code></td>
<td>
<p>A TRUE or FALSE value which indicates whether to 
use standard (quoted) or non-standard (unquoted) evaluation on the library
<code>name</code> parameter. Use standard evaluation when you want to pass
the library name with a variable.  Default is FALSE.</p>
</td></tr>
<tr><td><code id="libname_+3A_quiet">quiet</code></td>
<td>
<p>When TRUE, minimizes output to the console when loading 
files.  Default is FALSE.</p>
</td></tr>
<tr><td><code id="libname_+3A_log">log</code></td>
<td>
<p>Whether to log the libname operation.  Default is TRUE. This
parameter is used internally.</p>
</td></tr>
<tr><td><code id="libname_+3A_where">where</code></td>
<td>
<p>An expression used to subset all datasets in the library.
The where clause will be executed when the library is created.  Use the 
Base R <code><a href="base.html#topic+expression">expression</a></code> function to define the subset.  If a where clause
is supplied, the library will be opened read-only.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For most projects, a data file does not exist in isolation.  There are sets of 
related files of the same file type.  The aim of the <code>libname</code> function
is to take advantage of this fact, and give you an easy way to manage
the entire set.
</p>
<p>The <code>libname</code> function points to a directory of data files, and associates
a name with that set of data.  The name refers to an object of class 'lib', 
which at its heart is a named list.  When the <code>libname</code> function 
executes, it will load all the data in the directory into the list, and assign
the file name (without extension) as the list item name. Data can be accessed
using list syntax, or loaded directly into the local environment using the 
<code><a href="#topic+lib_load">lib_load</a></code> function.
</p>
<p>The <code>libname</code> function provides several data engines to read
data of different types.  For example, there is an engine for Excel 
files, and another engine for SAS datasets.  The engines are identified
by the extension of the file type they handle.  The available engines are 
'rds', 'RData', 'rda', 'csv', 'xlsx', 'xls', 'sas7bdat', 'xpt', and 'dbf'.
Once an engine has been assigned to a library, all other read/write 
operations will be performed by that engine.  
</p>
<p>The data engines largely hide file import details from you.  
The purpose of the <code>libname</code> function is to make it easy to 
import a set of related data files that follow standard conventions.  
The function assumes that the 
data has file extensions that match the file type, and then makes further
assumptions based on each type of file.  As a result, there are very few 
import options on the <code>libname</code> function.  If your data does not
follow standard conventions, it is recommended that you import your 
data using a package that gives you more control over import options.
</p>


<h3>Value</h3>

<p>The library object, with all data files loaded into the library
list.  Items in the list will be named according the the file name,
minus the file extension.
</p>


<h3>Data Engines</h3>

<p>The <code>libname</code> function currently provides seven different engines for 
seven different types of data files.
Here is a complete list of available engines and some commentary about each:
</p>

<ul>
<li><p><strong>rds</strong>: For R data sets.  This engine is the default.  Because
detailed data type and attribute information can be stored inside the rds
file, the rds engine is the most reliable and easiest to use.
</p>
</li>
<li><p><strong>Rdata</strong> and <strong>rda</strong>: Older R data storage formats.  
Like the 'rds' engine,
these storage types retain column attributes and data types.
</p>
</li>
<li><p><strong>csv</strong>: For comma separated value files.  This engine assumes
that the first row has column names, and that strings containing commas are 
quoted.  Blank values and the string 'NA' will be interpreted as NA.
Because data type information is not stored in csv files, the 
csv engine will attempt to guess the data types based on the available data.
For most columns, the csv engine is able to guess accurately. Where
it fails most commonly is with date and time columns. For csv date and time
columns, it is therefore recommended to assign an import spec that tells
the engine how to read the date or time. See the <code><a href="#topic+specs">specs</a></code>
documentation for additional details.
</p>
</li>
<li><p><strong>xlsx</strong>: For Excel files produced with the current version 
of Excel.  Excel provides more data type information than csv, but it 
is not as accurate as rds.  Therefore, you may also need to provide 
import specifications with Excel files. Also note that currently 
the xlsx import engine will only import the first sheet of an Excel workbook.  
If you need to import a sheet that is not the first sheet, use a 
different package to import the data.
</p>
</li>
<li><p><strong>xls</strong>: An Excel file format used between 1997 and 2003, and 
still used in some organizations. As with xlsx, this file format provides more 
information than csv, but is not entirely reliable. Therefore, you may need 
to provide import specifications to the xls engine. Also note that the xls
engine can read, but not write xls files.  Any xls files read with the
xls engine will be written as an xlsx file. Like the xlsx engine, the xls
engine can only read the first sheet of a workbook.
</p>
</li>
<li><p><strong>sas7bdat</strong>: Handles SAS datasets. SAS datasets provide better
type information than either csv or Excel.  In most cases, you will not 
need to define import specifications for SAS datasets.  The sas7bdat engine
interprets empty strings, single blanks, and a single dot (&quot;.&quot;) as missing
values. While the import of SAS datasets is fairly reliable, sas7bdat files 
cannot be written or exported with the sas7bdat engine.
In these cases, it is recommended to export to another file format, such
as csv or dbf, and then import into SAS.
</p>
</li>
<li><p><strong>xpt</strong>: The SAS transport file engine.  Transport format is 
a platform independent file format.  Similar to SAS datasets, it 
provides data type information.  In most cases, you will not need to 
define import specifications.  The xpt engine also interprets empty strings, 
single blanks, and a single dot (&quot;.&quot;) as missing values.
</p>
</li>
<li><p><strong>dbf</strong>: The DBASE file format engine.  The DBASE engine
was added to the <strong>libr</strong> package because many types of software can
read and write in DBASE format reliably.  Therefore it is a useful 
file format for interchange between software systems.  The DBASE file 
format contains type information.
</p>
</li></ul>



<h3>File Filters</h3>

<p>If you wish to import only a portion of your data files into a library, 
you may accomplish it with the <code>filter</code> parameter.  The filter 
parameter allows you to pass a vector of strings corresponding to the 
names of the files you want to import.  The function allows a 
wild-card (*) for partial matching.  For example, <code>"te*"</code> means any
file name that that begins with a &quot;te&quot;, and <code>"*st"</code> means any file name
that ends with an &quot;st&quot;.
</p>


<h3>Import Specifications</h3>

<p>In most cases, it is not necessary to specify the data types for incoming
columns in your data.  Either the file format will preserve the appropriate
data type information, or the assigned engine will guess correctly.  
</p>
<p>However, in some cases it will be necessary to control the column data types.
For these cases, use the  
<code>import_specs</code> parameter.  The <code>import_specs</code> parameter allows you
to specify the data types by data set and column name. All the data type
specifications are contained within a <code>specs</code> collection, and the 
specifications for a particular data set are defined by an 
<code>import_spec</code> function. See the <code><a href="#topic+specs">specs</a></code> and 
<code><a href="#topic+import_spec">import_spec</a></code> documentation for further information
and examples of defining an import spec.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+specs">specs</a></code> to define import specifications, 
<code><a href="#topic+dictionary">dictionary</a></code> to view the data dictionary for a library,
and <code><a href="#topic+datastep">datastep</a></code> to perform a data step.
</p>
<p>Other lib: 
<code><a href="#topic+is.lib">is.lib</a>()</code>,
<code><a href="#topic+lib_add">lib_add</a>()</code>,
<code><a href="#topic+lib_copy">lib_copy</a>()</code>,
<code><a href="#topic+lib_delete">lib_delete</a>()</code>,
<code><a href="#topic+lib_export">lib_export</a>()</code>,
<code><a href="#topic+lib_info">lib_info</a>()</code>,
<code><a href="#topic+lib_load">lib_load</a>()</code>,
<code><a href="#topic+lib_path">lib_path</a>()</code>,
<code><a href="#topic+lib_remove">lib_remove</a>()</code>,
<code><a href="#topic+lib_replace">lib_replace</a>()</code>,
<code><a href="#topic+lib_size">lib_size</a>()</code>,
<code><a href="#topic+lib_sync">lib_sync</a>()</code>,
<code><a href="#topic+lib_unload">lib_unload</a>()</code>,
<code><a href="#topic+lib_write">lib_write</a>()</code>,
<code><a href="#topic+print.lib">print.lib</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create temp directory
tmp &lt;- tempdir()

# Save some data to temp directory
# for illustration purposes
saveRDS(trees, file.path(tmp, "trees.rds"))
saveRDS(rock, file.path(tmp, "rocks.rds"))
saveRDS(beaver1, file.path(tmp, "beaver1.rds"))

# Create data library
libname(dat, tmp)
# # library 'dat': 3 items
# - attributes: rds not loaded
# - path: C:\Users\User\AppData\Local\Temp\RtmpklJcfl
# - items:
#      Name Extension Rows Cols   Size        LastModified
# 1 beaver1       rds  114    4 5.9 Kb 2020-12-06 15:21:30
# 2   rocks       rds   48    4 3.6 Kb 2020-12-06 15:21:30
# 3   trees       rds   31    3 2.9 Kb 2020-12-06 15:21:30

# Print dictionary for library
dictionary(dat)
# A tibble: 11 x 10
#    Name    Column Class   Label Description Format Width Justify  Rows   NAs
#    &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;       &lt;lgl&gt;  &lt;lgl&gt; &lt;chr&gt;   &lt;int&gt; &lt;int&gt;
#  1 beaver1 day    numeric NA    NA          NA     NA    NA        114     0
#  2 beaver1 time   numeric NA    NA          NA     NA    NA        114     0
#  3 beaver1 temp   numeric NA    NA          NA     NA    NA        114     0
#  4 beaver1 activ  numeric NA    NA          NA     NA    NA        114     0
#  5 rocks   area   integer NA    NA          NA     NA    NA         48     0
#  6 rocks   peri   numeric NA    NA          NA     NA    NA         48     0
#  7 rocks   shape  numeric NA    NA          NA     NA    NA         48     0
#  8 rocks   perm   numeric NA    NA          NA     NA    NA         48     0
#  9 trees   Girth  numeric NA    NA          NA     NA    NA         31     0
# 10 trees   Height numeric NA    NA          NA     NA    NA         31     0
# 11 trees   Volume numeric NA    NA          NA     NA    NA         31     0

# Load library into workspace 
lib_load(dat)

# Print summaries for each data frame
# Note that once loaded into the workspace, 
# data can be accessed using two-level syntax.
summary(dat.rocks)
summary(dat.trees)
summary(dat.beaver1)

#Unload from workspace
lib_unload(dat)

# Clean up
lib_delete(dat)
</code></pre>

<hr>
<h2 id='libr'>Libnames, Data Dictionaries and Data Steps</h2><span id='topic+libr'></span><span id='topic+libr-package'></span>

<h3>Description</h3>

<p>The <strong>libr</strong> package brings the concepts of data libraries, data 
dictionaries, and data steps to R.  A data library is an object used to define 
and manage
an entire directory of data files.  A data dictionary is a data frame full
of information about a data library, data frame, or tibble.  And a data step
allows row-by-row processing of data.
</p>
<p>The functions contained in the <strong>libr</strong> package are as follows:
</p>

<ul>
<li><p><code><a href="#topic+libname">libname</a></code>: Creates a data library
</p>
</li>
<li><p><code><a href="#topic+dictionary">dictionary</a></code>: Creates a data dictionary
</p>
</li>
<li><p><code><a href="#topic+datastep">datastep</a></code>: Perform row-by-row processing of data
</p>
</li>
<li><p><code><a href="#topic+lib_load">lib_load</a></code>: Loads a library into the workspace
</p>
</li>
<li><p><code><a href="#topic+lib_unload">lib_unload</a></code>: Unloads a library from the workspace
</p>
</li>
<li><p><code><a href="#topic+lib_sync">lib_sync</a></code>: Synchronizes the workspace with the library 
list
</p>
</li>
<li><p><code><a href="#topic+lib_write">lib_write</a></code>: Writes library data to the file system
</p>
</li>
<li><p><code><a href="#topic+lib_add">lib_add</a></code>: Adds data to a library
</p>
</li>
<li><p><code><a href="#topic+lib_replace">lib_replace</a></code>: Replaces data in a library
</p>
</li>
<li><p><code><a href="#topic+lib_remove">lib_remove</a></code>: Removes data from a library
</p>
</li>
<li><p><code><a href="#topic+lib_copy">lib_copy</a></code>: Copies a data library
</p>
</li>
<li><p><code><a href="#topic+lib_delete">lib_delete</a></code>: Deletes a data library
</p>
</li>
<li><p><code><a href="#topic+lib_info">lib_info</a></code>: Returns a data frame of information about the 
library
</p>
</li>
<li><p><code><a href="#topic+lib_path">lib_path</a></code>: Returns the path of a data library
</p>
</li>
<li><p><code><a href="#topic+lib_size">lib_size</a></code>: Returns the size of the data library in bytes
</p>
</li>
<li><p><code><a href="#topic+import_spec">import_spec</a></code>: Defines an import spec for a specific file
</p>
</li>
<li><p><code><a href="#topic+specs">specs</a></code>: Contains all the import specs for a library
</p>
</li></ul>

<p>Note that the <strong>libr</strong> package is intended to be used with small and 
medium-sized data sets.  It is not recommended for big data, as big data
requires very careful control over which data is or is not loaded into memory.
The <strong>libr</strong> package, on the other hand, tends to load all data into memory 
indiscriminately.
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://libr.r-sassy.org">https://libr.r-sassy.org</a>
</p>
</li>
<li> <p><a href="https://github.com/dbosak01/libr">https://github.com/dbosak01/libr</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/dbosak01/libr/issues">https://github.com/dbosak01/libr/issues</a>
</p>
</li></ul>


<hr>
<h2 id='output'>Outputs an observation from a datastep</h2><span id='topic+output'></span>

<h3>Description</h3>

<p>The <code>output</code> function will output an observation
from a datastep.  The function takes no parameters.  To use 
the function, simply call it on the rows you want to output.  Typically
it is called within a conditional.  The output function is interesting
in that you can output multiple rows for the same input observation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>output()
</code></pre>


<h3>Value</h3>

<p>Observation is marked with a output flag.  No return value.
</p>


<h3>See Also</h3>

<p>Other datastep: 
<code><a href="#topic++5B.dsarray">[.dsarray</a>()</code>,
<code><a href="#topic+datastep">datastep</a>()</code>,
<code><a href="#topic+delete">delete</a>()</code>,
<code><a href="#topic+dsarray">dsarray</a>()</code>,
<code><a href="#topic+dsattr">dsattr</a>()</code>,
<code><a href="#topic+length.dsarray">length.dsarray</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#' # Example 1: Output all cars that are 4 cylinder 
df &lt;- datastep(mtcars, 
               keep = c("mpg", "cyl", "disp"), {
                 
  if (cyl == 4)
    output()
                 
})

df
#     mpg cyl  disp
# 1  22.8   4 108.0
# 2  24.4   4 146.7
# 3  22.8   4 140.8
# 4  32.4   4  78.7
# 5  30.4   4  75.7
# 6  33.9   4  71.1
# 7  21.5   4 120.1
# 8  27.3   4  79.0
# 9  26.0   4 120.3
# 10 30.4   4  95.1
# 11 21.4   4 121.0

# Example 2: Output two rows for each 6 cylinder car

# Prepare sample data
dat &lt;- data.frame(name = rownames(mtcars), mtcars, stringsAsFactors = FALSE)

# Perform datastep
df &lt;- datastep(dat, 
               keep = c("name", "mpg", "cyl", "disp", "seq"), {
                 
  if (cyl == 6) {
    seq &lt;- 1
    output()
    seq &lt;- 2
    output()
  }
                 
})

df
#              name  mpg cyl  disp seq
# 1       Mazda RX4 21.0   6 160.0   1
# 2       Mazda RX4 21.0   6 160.0   2
# 3   Mazda RX4 Wag 21.0   6 160.0   1
# 4   Mazda RX4 Wag 21.0   6 160.0   2
# 5  Hornet 4 Drive 21.4   6 258.0   1
# 6  Hornet 4 Drive 21.4   6 258.0   2
# 7         Valiant 18.1   6 225.0   1
# 8         Valiant 18.1   6 225.0   2
# 9        Merc 280 19.2   6 167.6   1
# 10       Merc 280 19.2   6 167.6   2
# 11      Merc 280C 17.8   6 167.6   1
# 12      Merc 280C 17.8   6 167.6   2
# 13   Ferrari Dino 19.7   6 145.0   1
# 14   Ferrari Dino 19.7   6 145.0   2

# Example 3: Create data frame using output() functions
df &lt;- datastep(data.frame(), {

  # Row 1
  COL1 &lt;- 1
  COL2 &lt;- "One"
  output()
  
  # Row 2
  COL1 &lt;- 2
  COL2 &lt;- "Two"
  output()

})

df
#   COL1 COL2
# 1    1  One
# 2    2  Two
</code></pre>

<hr>
<h2 id='print.lib'>Print a data library</h2><span id='topic+print.lib'></span>

<h3>Description</h3>

<p>A class-specific instance of the <code>print</code> function for 
data libraries.  The function prints the library in a summary manner.  
Use <code>verbose = TRUE</code> to print the library as a list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'lib'
print(x, ..., verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.lib_+3A_x">x</code></td>
<td>
<p>The library to print.</p>
</td></tr>
<tr><td><code id="print.lib_+3A_...">...</code></td>
<td>
<p>Any follow-on parameters.</p>
</td></tr>
<tr><td><code id="print.lib_+3A_verbose">verbose</code></td>
<td>
<p>Whether or not to print the library in verbose style.
By default, the parameter is FALSE, meaning to print in summary style.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The object, invisibly.
</p>


<h3>See Also</h3>

<p>Other lib: 
<code><a href="#topic+is.lib">is.lib</a>()</code>,
<code><a href="#topic+lib_add">lib_add</a>()</code>,
<code><a href="#topic+lib_copy">lib_copy</a>()</code>,
<code><a href="#topic+lib_delete">lib_delete</a>()</code>,
<code><a href="#topic+lib_export">lib_export</a>()</code>,
<code><a href="#topic+lib_info">lib_info</a>()</code>,
<code><a href="#topic+lib_load">lib_load</a>()</code>,
<code><a href="#topic+lib_path">lib_path</a>()</code>,
<code><a href="#topic+lib_remove">lib_remove</a>()</code>,
<code><a href="#topic+lib_replace">lib_replace</a>()</code>,
<code><a href="#topic+lib_size">lib_size</a>()</code>,
<code><a href="#topic+lib_sync">lib_sync</a>()</code>,
<code><a href="#topic+lib_unload">lib_unload</a>()</code>,
<code><a href="#topic+lib_write">lib_write</a>()</code>,
<code><a href="#topic+libname">libname</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create temp directory
tmp &lt;- tempdir()

# Create data library
libname(dat, tmp)

# Add data to library
lib_add(dat, iris, ToothGrowth, PlantGrowth)

# Print library summary 
print(dat)
# library 'dat': 3 items
# - attributes: not loaded
# - path: C:\Users\User\AppData\Local\Temp\RtmpCSJ6Gc
# - items:
#          Name Extension Rows Cols   Size        LastModified
# 1        iris       rds  150    5 7.8 Kb 2020-11-05 22:26:59
# 2 PlantGrowth       rds   30    2 2.5 Kb 2020-11-05 22:26:59
# 3 ToothGrowth       rds   60    3 3.4 Kb 2020-11-05 22:26:59

# Clean up
lib_delete(dat)
</code></pre>

<hr>
<h2 id='print.specs'>Print import specifications</h2><span id='topic+print.specs'></span>

<h3>Description</h3>

<p>A function to print the import specification collection.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'specs'
print(x, ..., verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.specs_+3A_x">x</code></td>
<td>
<p>The specifications to print.</p>
</td></tr>
<tr><td><code id="print.specs_+3A_...">...</code></td>
<td>
<p>Any follow-on parameters to the print function.</p>
</td></tr>
<tr><td><code id="print.specs_+3A_verbose">verbose</code></td>
<td>
<p>Whether or not to print the specifications in verbose style.
By default, the parameter is FALSE, meaning to print in summary style.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The specification object, invisibly.
</p>


<h3>See Also</h3>

<p>Other specs: 
<code><a href="#topic+import_spec">import_spec</a>()</code>,
<code><a href="#topic+read.specs">read.specs</a>()</code>,
<code><a href="#topic+specs">specs</a>()</code>,
<code><a href="#topic+write.specs">write.specs</a>()</code>
</p>

<hr>
<h2 id='read.specs'>Read import specs from the file system</h2><span id='topic+read.specs'></span>

<h3>Description</h3>

<p>A function to read import specifications from the file system.
The function accepts a full or relative path to the spec file, and returns
the specs as an object.  If the <code>file_path</code> parameter is passed
as a directory name, the function will search for a file with a '.specs'
extension and read it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.specs(file_path = getwd())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read.specs_+3A_file_path">file_path</code></td>
<td>
<p>The full or relative path to the file system.  Default is
the current working directory. If the <code>file_path</code> is a file name that 
does not contain the '.specs' file extension, the function will add the
extension.  If the <code>file_path</code> contains a directory name, 
the function will search the directory for a file with an extension 
of '.specs'.  If more than one file with an extension of '.specs' is founds, 
the function will generate an error.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The specifications object.
</p>


<h3>See Also</h3>

<p>Other specs: 
<code><a href="#topic+import_spec">import_spec</a>()</code>,
<code><a href="#topic+print.specs">print.specs</a>()</code>,
<code><a href="#topic+specs">specs</a>()</code>,
<code><a href="#topic+write.specs">write.specs</a>()</code>
</p>

<hr>
<h2 id='specs'>Create an Import Spec Collection</h2><span id='topic+specs'></span>

<h3>Description</h3>

<p>A function to capture a set of import specifications for a 
directory of data files.  These specs can be used on the 
<code><a href="#topic+libname">libname</a></code> function to correctly assign the data types for 
imported data files. The 
import engines will guess at the data types for any columns that
are not explicitly defined in the import specifications. Import
specifications are defined with the <code><a href="#topic+import_spec">import_spec</a></code> function.
The import spec syntax is the same for all data engines.
</p>
<p>Note that the <code>na</code> and <code>trim_ws</code> parameters on the <code>specs</code> 
function will be applied globally to all files in the library.  
These global settings can be overridden on the <code><a href="#topic+import_spec">import_spec</a></code> 
for any particular data file. 
</p>
<p>Also note that the <code>specs</code> collection is defined as an object 
so it can be stored and reused.
See the <code><a href="#topic+write.specs">write.specs</a></code> and <code><a href="#topic+read.specs">read.specs</a></code> functions
for additional information on saving specs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>specs(..., na = c("", "NA"), trim_ws = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="specs_+3A_...">...</code></td>
<td>
<p>Named input specs.  The name should correspond to the file name,
without the file extension.
The spec is defined as an <code>import_spec</code> object.  See the 
<code><a href="#topic+import_spec">import_spec</a></code> function for additional information on 
parameters for that object.</p>
</td></tr>
<tr><td><code id="specs_+3A_na">na</code></td>
<td>
<p>A vector of values to be treated as NA.  For example, the 
vector <code>c('', ' ')</code> will cause empty strings and single blanks to 
be converted to NA values. For most file types, 
empty strings and the string 'NA' <code>('', 'NA')</code> are considered NA.  
For SAS datasets and transport files, a single blank and a single dot 
<code>c(" ", ".")</code> are considered NA. The value of the 
<code>na</code> parameter on the <code>specs</code> function can be overridden
by the <code>na</code> parameter on the <code>import_spec</code> function.</p>
</td></tr>
<tr><td><code id="specs_+3A_trim_ws">trim_ws</code></td>
<td>
<p>Whether or not to trim white space from the input data values.
Valid values are TRUE, and FALSE.  Default is TRUE.  The value of the 
<code>trim_ws</code> parameter on the <code>specs</code> function can be overridden
by the <code>trim_ws</code> parameter on the <code>import_spec</code> function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The import specifications object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+libname">libname</a></code> to create a data library, 
<code><a href="#topic+dictionary">dictionary</a></code> for generating a data dictionary, and 
<code><a href="#topic+import_spec">import_spec</a></code> for additional information on defining an 
import spec.
</p>
<p>Other specs: 
<code><a href="#topic+import_spec">import_spec</a>()</code>,
<code><a href="#topic+print.specs">print.specs</a>()</code>,
<code><a href="#topic+read.specs">read.specs</a>()</code>,
<code><a href="#topic+write.specs">write.specs</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(readr)

# Create temp path
tmp &lt;- file.path(tempdir(), "mtcars.csv")

# Create data for illustration purposes
df &lt;- data.frame(vehicle = rownames(mtcars), mtcars[c("mpg", "cyl", "disp")],
                 stringsAsFactors = FALSE)

# Kill rownames
rownames(df) &lt;- NULL

# Add some columns
df &lt;- datastep(df[1:10, ], {

        recdt &lt;- "10JUN1974"

        if (mpg &gt;= 20)
          mpgcat &lt;- "High"
        else 
          mpgcat &lt;- "Low"
      
        if (cyl == 8)
          cyl8 &lt;- TRUE
  })
  
df
#              vehicle  mpg cyl  disp     recdt mpgcat cyl8
# 1          Mazda RX4 21.0   6 160.0 10JUN1974   High   NA
# 2      Mazda RX4 Wag 21.0   6 160.0 10JUN1974   High   NA
# 3         Datsun 710 22.8   4 108.0 10JUN1974   High   NA
# 4     Hornet 4 Drive 21.4   6 258.0 10JUN1974   High   NA
# 5  Hornet Sportabout 18.7   8 360.0 10JUN1974    Low TRUE
# 6            Valiant 18.1   6 225.0 10JUN1974    Low   NA
# 7         Duster 360 14.3   8 360.0 10JUN1974    Low TRUE
# 8          Merc 240D 24.4   4 146.7 10JUN1974   High   NA
# 9           Merc 230 22.8   4 140.8 10JUN1974   High   NA
# 10          Merc 280 19.2   6 167.6 10JUN1974    Low   NA

# Save to temp directory for this example
write_csv(df, tmp)

## Start Example ##

# Define import spec
spcs &lt;- specs(mtcars = import_spec(vehicle = "character",
                                   cyl = "integer",
                                   recdt = "date=%d%b%Y",
                                   mpgcat = "guess",
                                   cyl8 = "logical"))
                                   
# Create library
libname(dat, tempdir(), "csv", import_specs = spcs)
# $mtcars
# library 'dat': 1 items
# - attributes: csv not loaded
# - path: C:\Users\User\AppData\Local\Temp\RtmpqAMV6L
# - items:
#     Name Extension Rows Cols   Size        LastModified
# 1 mtcars       csv   10    7 9.3 Kb 2020-11-29 09:47:52

# View data types
dictionary(dat)
# # A tibble: 7 x 10
#   Name   Column  Class     Label Description Format Width Justify  Rows   NAs
#   &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;       &lt;lgl&gt;  &lt;int&gt; &lt;chr&gt;   &lt;int&gt; &lt;int&gt;
# 1 mtcars vehicle character NA    NA          NA        17 NA         10     0
# 2 mtcars mpg     numeric   NA    NA          NA        NA NA         10     0
# 3 mtcars cyl     integer   NA    NA          NA        NA NA         10     0
# 4 mtcars disp    numeric   NA    NA          NA        NA NA         10     0
# 5 mtcars mpgcat  character NA    NA          NA         4 NA         10     0
# 6 mtcars recdt   Date      NA    NA          NA        NA NA         10     0
# 7 mtcars cyl8    logical   NA    NA          NA        NA NA         10     8

# Clean up
lib_delete(dat)
</code></pre>

<hr>
<h2 id='write.specs'>Write import specs to the file system</h2><span id='topic+write.specs'></span>

<h3>Description</h3>

<p>A function to write import specifications to the file system.
The function accepts a specifications object and a full or relative
path.  The function returns the full file path.  This function is 
useful so that you can define import specifications once, and reuse them
in multiple programs or across multiple teams.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write.specs(x, dir_path = getwd(), file_name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write.specs_+3A_x">x</code></td>
<td>
<p>A specifications object of class 'specs'.</p>
</td></tr>
<tr><td><code id="write.specs_+3A_dir_path">dir_path</code></td>
<td>
<p>A full or relative path to save the specs. Default is the 
current working directory.</p>
</td></tr>
<tr><td><code id="write.specs_+3A_file_name">file_name</code></td>
<td>
<p>The file name to save to specs, without a file extension.
The file extension will be added automatically.  If no file name is 
supplied, the function will use the variable name as the file name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The full file path.
</p>


<h3>See Also</h3>

<p>Other specs: 
<code><a href="#topic+import_spec">import_spec</a>()</code>,
<code><a href="#topic+print.specs">print.specs</a>()</code>,
<code><a href="#topic+read.specs">read.specs</a>()</code>,
<code><a href="#topic+specs">specs</a>()</code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
