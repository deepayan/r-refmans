<!DOCTYPE html><html><head><title>Help for package ncdf4.helpers</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ncdf4.helpers}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#get.cluster.worker.subsets'><p>Get subsets to be distributed to workers</p></a></li>
<li><a href='#get.f.step.size'><p>Get step size for data</p></a></li>
<li><a href='#get.split.filename.cmip5'><p>Splits up a CMIP5 filename</p></a></li>
<li><a href='#nc.conform.data'><p>Conform data to dimension order and structure of output</p></a></li>
<li><a href='#nc.copy.atts'><p>Copy attributes from one variable in one file to another file</p></a></li>
<li><a href='#nc.get.climatology.bounds.var.list'><p>Get a list of names of climatology bounds variables</p></a></li>
<li><a href='#nc.get.compress.dims'><p>Get X and Y dimension variables for reduced (compressed) grids</p></a></li>
<li><a href='#nc.get.coordinate.axes'><p>Get a list of dimension variables and axes for a variable's coordinate variable</p></a></li>
<li><a href='#nc.get.dim.axes'><p>Get dimension axes</p></a></li>
<li><a href='#nc.get.dim.axes.from.names'><p>Infer dimension axes from names of dimensions</p></a></li>
<li><a href='#nc.get.dim.bounds.var.list'><p>Get a list of names of dimension bounds variables.</p></a></li>
<li><a href='#nc.get.dim.for.axis'><p>Get dimension corresponding to a given axis</p></a></li>
<li><a href='#nc.get.dim.names'><p>Get a list of names of dimensions</p></a></li>
<li><a href='#nc.get.proj4.string'><p>Gets the proj4 string for a file</p></a></li>
<li><a href='#nc.get.time.multiplier'><p>Gets conversion factor for time scale given units</p></a></li>
<li><a href='#nc.get.time.series'><p>Returns time axis data as PCICt for a file</p></a></li>
<li><a href='#nc.get.var.subset.by.axes'><p>Gets a data subset in the place described by the named list of axes</p></a></li>
<li><a href='#nc.get.variable.list'><p>Get a list of names of data variables</p></a></li>
<li><a href='#nc.is.regular.dimension'><p>Determine if a dimension is regular</p></a></li>
<li><a href='#nc.make.time.bounds'><p>Creates time bounds for a time series</p></a></li>
<li><a href='#nc.put.var.subset.by.axes'><p>Puts a data subset in the place described by the named list of axes</p></a></li>
<li><a href='#ncdf4.helpers'><p>ncdf4.helpers: helper functions for NetCDF files.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>0.3-6</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-10-12</td>
</tr>
<tr>
<td>Title:</td>
<td>Helper Functions for Use with the 'ncdf4' Package</td>
</tr>
<tr>
<td>Author:</td>
<td>David Bronaugh &lt;bronaugh@uvic.ca&gt; for the Pacific Climate Impacts
    Consortium (PCIC)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Lee Zeman &lt;lzeman@uvic.ca&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.12.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>ncdf4, PCICt, abind</td>
</tr>
<tr>
<td>Suggests:</td>
<td>proj4, testthat</td>
</tr>
<tr>
<td>Description:</td>
<td>Contains a collection of helper functions for dealing with 
    'NetCDF' files <a href="https://www.unidata.ucar.edu/software/netcdf/">https://www.unidata.ucar.edu/software/netcdf/</a> 
    opened using 'ncdf4', particularly 'NetCDF' files that conform to the
    Climate and Forecast (CF) Metadata Conventions 
    <a href="http://cfconventions.org/Data/cf-conventions/cf-conventions-1.7/cf-conventions.html">http://cfconventions.org/Data/cf-conventions/cf-conventions-1.7/cf-conventions.html</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/LGPL-2.1">LGPL-2.1</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://www.r-project.org">https://www.r-project.org</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/pacificclimate/ncdf4.helpers/issues">https://github.com/pacificclimate/ncdf4.helpers/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-10-12 19:31:11 UTC; lzeman</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-10-15 10:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='get.cluster.worker.subsets'>Get subsets to be distributed to workers</h2><span id='topic+get.cluster.worker.subsets'></span>

<h3>Description</h3>

<p>Get subsets to be distributed to workers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.cluster.worker.subsets(
  num.vals,
  dim.size,
  dim.axes,
  axis.to.split.on,
  min.num.chunks = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get.cluster.worker.subsets_+3A_num.vals">num.vals</code></td>
<td>
<p>The maximum number of values to process at once.</p>
</td></tr>
<tr><td><code id="get.cluster.worker.subsets_+3A_dim.size">dim.size</code></td>
<td>
<p>The sizes of the dimensions of the data to be processed.</p>
</td></tr>
<tr><td><code id="get.cluster.worker.subsets_+3A_dim.axes">dim.axes</code></td>
<td>
<p>The axes of the data, as returned by <code>nc.get.dim.axes</code>.</p>
</td></tr>
<tr><td><code id="get.cluster.worker.subsets_+3A_axis.to.split.on">axis.to.split.on</code></td>
<td>
<p>The axis (X, Y, T, etc) to split the data on.</p>
</td></tr>
<tr><td><code id="get.cluster.worker.subsets_+3A_min.num.chunks">min.num.chunks</code></td>
<td>
<p>The minimum number of chunks to generate, even if the chunks are considerably smaller than <code>num.vals</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Given a desired number of values (<code>num.vals</code>), the sizes of the dimensions (<code>dim.size</code>), the corresponding axes (<code>dim.axes</code>), the desired axis to split on (<code>axis.to.split.on</code>), and optionally the minimum number of chunks to return (<code>min.num.chunks</code>), returns a list of lists of subsets appropriate to be passed to <code>nc.put.var.subsets.by.axes</code> or <code>nc.get.var.subsets.by.axes</code>.
</p>
<p>This functionality is useful when you want to keep memory consumption down but want to maximize the amount read in at one time to make the best use of available I/O bandwidth.
</p>


<h3>Value</h3>

<p>A list of lists describing subsets in a suitable form to be passed to <code>nc.put.var.subsets.by.axes</code> or <code>nc.get.var.subsets.by.axes</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Get a subset from an example
subsets &lt;- get.cluster.worker.subsets(1E7, c(128, 64, 50000),
                                      c(lon="X", lat="Y", time="T"), "Y")

</code></pre>

<hr>
<h2 id='get.f.step.size'>Get step size for data</h2><span id='topic+get.f.step.size'></span>

<h3>Description</h3>

<p>Get step size for data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.f.step.size(d, f)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get.f.step.size_+3A_d">d</code></td>
<td>
<p>The data to have the step size determined</p>
</td></tr>
<tr><td><code id="get.f.step.size_+3A_f">f</code></td>
<td>
<p>The function to aggregate the step size</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Gets the step size for data, aggregated by the supplied function. This is useful when you want to know the mean timestep size, median, minimum, range, etc for the purposes of classifying data by time resolution.
</p>


<h3>Value</h3>

<p>The step size
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- c(1, 2, 3, 4, 5, 7)
## Will be 2
max.step.size &lt;- get.f.step.size(dat, max)
## Will be 1
min.step.size &lt;- get.f.step.size(dat, min)

</code></pre>

<hr>
<h2 id='get.split.filename.cmip5'>Splits up a CMIP5 filename</h2><span id='topic+get.split.filename.cmip5'></span>

<h3>Description</h3>

<p>Splits up a CMIP5 filename into its component parts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.split.filename.cmip5(cmip5.file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get.split.filename.cmip5_+3A_cmip5.file">cmip5.file</code></td>
<td>
<p>The filename to be split.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>As the CMIP5 conventions define the format of filenames, quite a bit of data can be extracted from the filename alone. This function makes that process easier by splitting up the given CMIP5 filename, returning a named vector consisting of the variable, time resolution, model, emissions scenario, run, time range, and time start and end.
</p>


<h3>Value</h3>

<p>A vector containing the variable (var), time resolution (tres), model (model), emissions scenario (emissions), run (run), time range (trange), time start (tstart) and time end (tend) for the file.
</p>


<h3>References</h3>

<p><a href="https://pcmdi.llnl.gov/mips/cmip5/docs/CMIP5_output_metadata_requirements.pdf?id=28">https://pcmdi.llnl.gov/mips/cmip5/docs/CMIP5_output_metadata_requirements.pdf?id=28</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Split up filename into component bits
split.bits &lt;- get.split.filename.cmip5(
                "pr/pr_day_MRI-CGCM3_historical_r1i1p1_18500101-20051231.nc")

</code></pre>

<hr>
<h2 id='nc.conform.data'>Conform data to dimension order and structure of output</h2><span id='topic+nc.conform.data'></span>

<h3>Description</h3>

<p>Conform data to dimension order and structure of output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nc.conform.data(
  f.input,
  f.output,
  v.input,
  v.output,
  dat.input,
  allow.dim.subsets = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nc.conform.data_+3A_f.input">f.input</code></td>
<td>
<p>The input file (an object of class <code>ncdf4</code>)</p>
</td></tr>
<tr><td><code id="nc.conform.data_+3A_f.output">f.output</code></td>
<td>
<p>The output file (an object of class <code>ncdf4</code>)</p>
</td></tr>
<tr><td><code id="nc.conform.data_+3A_v.input">v.input</code></td>
<td>
<p>The input variable (a string naming a variable in a file or an object of class <code>ncvar4</code>).</p>
</td></tr>
<tr><td><code id="nc.conform.data_+3A_v.output">v.output</code></td>
<td>
<p>The output variable (a string naming a variable in a file or an object of class <code>ncvar4</code>).</p>
</td></tr>
<tr><td><code id="nc.conform.data_+3A_dat.input">dat.input</code></td>
<td>
<p>The input data to be reordered to match the output file's ordering.</p>
</td></tr>
<tr><td><code id="nc.conform.data_+3A_allow.dim.subsets">allow.dim.subsets</code></td>
<td>
<p>Whether to allow the conforming process to subset the data.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Sometimes files come in in different latitude (up is north, up is south), longitude (0 to 360 vs -180 to 180), and temporal schemes. The purpose of this function is to make data from one scheme comparable to data from another. It takes a given input file, variable, and slab of data and permutes the data such that the dimension order and the index order matches the order in the output file and variable.
</p>


<h3>Value</h3>

<p>The data permuted to match the output file's ordering and optionally clipped to the extent of the output.
</p>


<h3>Note</h3>

<p>This function currently isn't useful for conforming subsets of output data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Get data from one file and conform it to the dimension order of another.
## Not run: 
f1 &lt;- nc_open("pr.nc")
f2 &lt;- nc_open("pr2.nc", write=TRUE)
dat &lt;- nc.get.var.subset.by.axes(f1, "pr")
new.dat &lt;- nc.conform.data(f2, f1, "pr", "pr", dat)
nc_close(f1)
nc_close(f2)

## End(Not run)

</code></pre>

<hr>
<h2 id='nc.copy.atts'>Copy attributes from one variable in one file to another file</h2><span id='topic+nc.copy.atts'></span>

<h3>Description</h3>

<p>Copy attributes from one variable in one file to another file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nc.copy.atts(
  f.src,
  v.src,
  f.dest,
  v.dest,
  exception.list = NULL,
  rename.mapping = NULL,
  definemode = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nc.copy.atts_+3A_f.src">f.src</code></td>
<td>
<p>The source file (an object of class <code>ncdf4</code>)</p>
</td></tr>
<tr><td><code id="nc.copy.atts_+3A_v.src">v.src</code></td>
<td>
<p>The source variable: a string naming a variable in a file or an object of class <code>ncvar4</code>.</p>
</td></tr>
<tr><td><code id="nc.copy.atts_+3A_f.dest">f.dest</code></td>
<td>
<p>The destination file (an object of class <code>ncdf4</code>)</p>
</td></tr>
<tr><td><code id="nc.copy.atts_+3A_v.dest">v.dest</code></td>
<td>
<p>The destination variable: a string naming a variable in a file or an object of class <code>ncvar4</code>.</p>
</td></tr>
<tr><td><code id="nc.copy.atts_+3A_exception.list">exception.list</code></td>
<td>
<p>A vector containing names of variables not to be copied.</p>
</td></tr>
<tr><td><code id="nc.copy.atts_+3A_rename.mapping">rename.mapping</code></td>
<td>
<p>A vector containing named values mapping source to destination names.</p>
</td></tr>
<tr><td><code id="nc.copy.atts_+3A_definemode">definemode</code></td>
<td>
<p>Whether the file is already in define mode.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function copies attributes from a variable in one file to a variable in another file. If the source or destination variable is 0, then attributes are copied from/to the NetCDF file's global attributes.
</p>
<p>If desired, some attributes can be left out using <code>exception.list</code>, a vector of names of attributes to be excluded.
</p>
<p>Attributes can also be renamed at the destination using <code>rename.mapping</code>, a named vector of strings in which the name of the attribute to be renamed is the name, and the attribute's new name is the value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Copy attributes from one variable to another; but don't copy units or
## standard_name, and copy long_name as old_long_name.
## Not run: 
f1 &lt;- nc_open("pr.nc")
f2 &lt;- nc_open("pr2.nc")
nc.copy.atts(f1, "pr", f2, "pr", c("units", "standard_name"),
             c(long_name="old_long_name"))
dim.axes &lt;- nc.get.dim.axes.from.names(f, "pr")
nc_close(f1)
nc_close(f2)

## End(Not run)

</code></pre>

<hr>
<h2 id='nc.get.climatology.bounds.var.list'>Get a list of names of climatology bounds variables</h2><span id='topic+nc.get.climatology.bounds.var.list'></span>

<h3>Description</h3>

<p>Get a list of names of climatology bounds variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nc.get.climatology.bounds.var.list(f)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nc.get.climatology.bounds.var.list_+3A_f">f</code></td>
<td>
<p>The file (an object of class <code>ncdf4</code>)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The CF metadata convention defines a <code>climatology</code> attribute which can be applied to a time axis to indicate that the data is climatological in nature; the value of this attribute is the name of another variable in the file which defines the bounds of each climatological time period. This function returns the names of any climatology bounds variables found in a file.
</p>


<h3>Value</h3>

<p>A character vector naming all of the climatology bounds variables found.
</p>


<h3>References</h3>

<p><a href="http://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#climatological-statistics">http://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#climatological-statistics</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Get list of climatology bounds variables
## Not run: 
f &lt;- nc_open("pr.nc")
clim.bounds &lt;- nc.get.climatology.bounds.var.list(f)
nc_close(f)

## End(Not run)

</code></pre>

<hr>
<h2 id='nc.get.compress.dims'>Get X and Y dimension variables for reduced (compressed) grids</h2><span id='topic+nc.get.compress.dims'></span>

<h3>Description</h3>

<p>Get X and Y dimension variables for reduced (compressed) grids.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nc.get.compress.dims(f, v)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nc.get.compress.dims_+3A_f">f</code></td>
<td>
<p>The file (an object of class <code>ncdf4</code>)</p>
</td></tr>
<tr><td><code id="nc.get.compress.dims_+3A_v">v</code></td>
<td>
<p>The name of a variable</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The CF metadata convention defines a method for implementing reduced grids (grids missing pieces of themselves); they call this compression by gathering. This function retrieves the X and Y dimensions for reduced (compressed) grids, returning a list containing the X and Y dimensions.
</p>


<h3>Value</h3>

<p>A list consisting of two members of class <code>ncdim4</code>: x.dim for the X axis, and y.dim for the Y axis.
</p>


<h3>References</h3>

<p><a href="http://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#reduced-horizontal-grid">http://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#reduced-horizontal-grid</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Get compress dimensions from file.
## Not run: 
f &lt;- nc_open("pr.nc")
compress.dims &lt;- nc.get.compress.dims(f, "pr")
nc_close(f)

## End(Not run)

</code></pre>

<hr>
<h2 id='nc.get.coordinate.axes'>Get a list of dimension variables and axes for a variable's coordinate variable</h2><span id='topic+nc.get.coordinate.axes'></span>

<h3>Description</h3>

<p>Get a list of dimension variables and axes for a variable's coordinate variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nc.get.coordinate.axes(f, v)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nc.get.coordinate.axes_+3A_f">f</code></td>
<td>
<p>The file (an object of class <code>ncdf4</code>)</p>
</td></tr>
<tr><td><code id="nc.get.coordinate.axes_+3A_v">v</code></td>
<td>
<p>The name of a variable</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The CF metadata standard defines a convention for definining 2-dimensional variables to accompany pairs of dimension variables. Usually these are latitude and longitude variables, and accompany projected grids. This function returns a named list of axes, the names of which are the associated dimension variables.
</p>


<h3>Value</h3>

<p>A named character vector containing axes, the names of which are the corresponding dimension variables.
</p>


<h3>References</h3>

<p><a href="http://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#_two_dimensional_latitude_longitude_coordinate_variables">http://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#_two_dimensional_latitude_longitude_coordinate_variables</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Get coordinate axes from file.
## Not run: 
f &lt;- nc_open("pr.nc")
coord.axes &lt;- nc.get.coordinate.axes(f, "pr")
nc_close(f)

## End(Not run)

</code></pre>

<hr>
<h2 id='nc.get.dim.axes'>Get dimension axes</h2><span id='topic+nc.get.dim.axes'></span>

<h3>Description</h3>

<p>Get dimension axes for the given variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nc.get.dim.axes(f, v, dim.names)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nc.get.dim.axes_+3A_f">f</code></td>
<td>
<p>The file (an object of class <code>ncdf4</code>)</p>
</td></tr>
<tr><td><code id="nc.get.dim.axes_+3A_v">v</code></td>
<td>
<p>The name of a variable</p>
</td></tr>
<tr><td><code id="nc.get.dim.axes_+3A_dim.names">dim.names</code></td>
<td>
<p>Optionally, dimension names (to avoid looking them up repeatedly)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function returns the dimension axes for a given variable as a named character vector; the names are the names of the corresponding dimensions. If no variable is supplied, the function will return data for all dimensions found in the file.
</p>
<p>Axes are X, Y, Z (depth, plev, etc), T (time), and S (space, for reduced grids).
</p>
<p>This routine will attempt to infer axes for dimensions if no 'axis' attribute is found on a dimension variable, using the nc.get.dim.axes.from.names function.
</p>


<h3>Value</h3>

<p>A named character vector mapping dimension names to axes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Get dimension axes from file.
## Not run: 
f &lt;- nc_open("pr.nc")
## Get dim axes for a specified variable
dim.axes &lt;- nc.get.dim.axes(f, "pr")
## Get all dim axes in file
dim.axes &lt;- nc.get.dim.axes(f)
nc_close(f)

## End(Not run)

</code></pre>

<hr>
<h2 id='nc.get.dim.axes.from.names'>Infer dimension axes from names of dimensions</h2><span id='topic+nc.get.dim.axes.from.names'></span>

<h3>Description</h3>

<p>Infer dimension axes from names of dimensions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nc.get.dim.axes.from.names(f, v, dim.names)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nc.get.dim.axes.from.names_+3A_f">f</code></td>
<td>
<p>The file (an object of class <code>ncdf4</code>)</p>
</td></tr>
<tr><td><code id="nc.get.dim.axes.from.names_+3A_v">v</code></td>
<td>
<p>The name of a variable</p>
</td></tr>
<tr><td><code id="nc.get.dim.axes.from.names_+3A_dim.names">dim.names</code></td>
<td>
<p>Optionally, dimension names (to avoid looking them up repeatedly)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function makes educated guesses as to what axes dimensions may apply to in the case of files with poor metadata.
</p>


<h3>Value</h3>

<p>A named character vector mapping dimension names to axes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Get dimension axes from file by inferring them from dimension names
## Not run: 
f &lt;- nc_open("pr.nc")
dim.axes &lt;- nc.get.dim.axes.from.names(f, "pr")
nc_close(f)

## End(Not run)

</code></pre>

<hr>
<h2 id='nc.get.dim.bounds.var.list'>Get a list of names of dimension bounds variables.</h2><span id='topic+nc.get.dim.bounds.var.list'></span>

<h3>Description</h3>

<p>Get a list of names of dimension bounds variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nc.get.dim.bounds.var.list(f, v = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nc.get.dim.bounds.var.list_+3A_f">f</code></td>
<td>
<p>The file (an object of class <code>ncdf4</code>).</p>
</td></tr>
<tr><td><code id="nc.get.dim.bounds.var.list_+3A_v">v</code></td>
<td>
<p>The name of the variable (a string).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Many dimension variables are not single points, but in fact represent a range along the axis. This is expressed by associated dimension bounds variables. This function returns the names of any dimension bounds variables found in a file.
</p>


<h3>Value</h3>

<p>A character vector naming all of the dimension bounds variables found.
</p>


<h3>References</h3>

<p><a href="http://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#cell-boundaries">http://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#cell-boundaries</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Get list of dimension bound variables
## Not run: 
f &lt;- nc_open("pr.nc")
dim.bounds.var.list &lt;- nc.get.dim.bounds.var.list(f)
nc_close(f)

## End(Not run)

</code></pre>

<hr>
<h2 id='nc.get.dim.for.axis'>Get dimension corresponding to a given axis</h2><span id='topic+nc.get.dim.for.axis'></span>

<h3>Description</h3>

<p>Get dimension corresponding to a given axis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nc.get.dim.for.axis(f, v, axis)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nc.get.dim.for.axis_+3A_f">f</code></td>
<td>
<p>The file (an object of class <code>ncdf4</code>)</p>
</td></tr>
<tr><td><code id="nc.get.dim.for.axis_+3A_v">v</code></td>
<td>
<p>The source variable: a string naming a variable in a file or an object of class <code>ncvar4</code>.</p>
</td></tr>
<tr><td><code id="nc.get.dim.for.axis_+3A_axis">axis</code></td>
<td>
<p>The axis to retrieve the dimension for: a string consisting of either X, Y, Z, T, or S.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function returns the dimension (of class 'ncdim4') corresponding to the specified axis (X, Y, Z, T, or S).
</p>


<h3>Value</h3>

<p>An object of class <code>ncdim4</code> if a dimension is found for the specified axis; <code>NA</code> otherwise.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Get dimension for X axis
## Not run: 
f &lt;- nc_open("pr.nc")
x.axis.dim &lt;- nc.get.dim.axes.from.names(f, "pr", "X")
nc_close(f)

## End(Not run)

</code></pre>

<hr>
<h2 id='nc.get.dim.names'>Get a list of names of dimensions</h2><span id='topic+nc.get.dim.names'></span>

<h3>Description</h3>

<p>Get a list of names of dimensions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nc.get.dim.names(f, v)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nc.get.dim.names_+3A_f">f</code></td>
<td>
<p>The file (an object of class <code>ncdf4</code>)</p>
</td></tr>
<tr><td><code id="nc.get.dim.names_+3A_v">v</code></td>
<td>
<p>Optionally, a variable</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function returns the names of dimensions in a file or, if <code>v</code> is also supplied, attached to a particular variable.
</p>


<h3>Value</h3>

<p>A character vector naming the dimensions found.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Get dimension names
## Not run: 
f &lt;- nc_open("pr.nc")
dim.names &lt;- nc.get.dim.names(f, "pr")
nc_close(f)

## End(Not run)

</code></pre>

<hr>
<h2 id='nc.get.proj4.string'>Gets the proj4 string for a file</h2><span id='topic+nc.get.proj4.string'></span>

<h3>Description</h3>

<p>Gets the proj4 string for a file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nc.get.proj4.string(f, v)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nc.get.proj4.string_+3A_f">f</code></td>
<td>
<p>The file (an object of class <code>ncdf4</code>)</p>
</td></tr>
<tr><td><code id="nc.get.proj4.string_+3A_v">v</code></td>
<td>
<p>The name of a variable</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Most NetCDF files are stored without any projection information as a lat-long grid. However, some files &ndash; particularly those from RCMs &ndash; are on a projected grid. This function returns a proj4 string, suitable for use with the 'proj4' library, which can be used to perform forward and inverse projections.
</p>
<p>Given a file and a variable, this function returns the proj4 string for the given file should be. If no projection data is found, it returns an empty string. It currently supports Lambert Conformal Conic, Transverse Mercator, Polar Sterographic, and Rotated Pole projections, plus the latitude_longitude pseudo-projection.
</p>


<h3>Value</h3>

<p>A string containing the proj4 string, or NULL if a translator is not available for the given projection.
</p>


<h3>References</h3>

<p><a href="http://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#grid-mappings-and-projections">http://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#grid-mappings-and-projections</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Get the proj4 string for a hypothetical file.
## Not run: 
f &lt;- nc_open("pr.nc")
proj4.string &lt;- nc.get.proj4.string(f, "pr")
nc_close(f)

## End(Not run)

</code></pre>

<hr>
<h2 id='nc.get.time.multiplier'>Gets conversion factor for time scale given units</h2><span id='topic+nc.get.time.multiplier'></span>

<h3>Description</h3>

<p>Gets conversion factor for time scale given units.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nc.get.time.multiplier(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nc.get.time.multiplier_+3A_x">x</code></td>
<td>
<p>The time scale</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function returns a conversion factor from the supplied time scale (days, hours, minutes, months) to seconds. This can be used to convert to/from &quot;(days or hours) since X&quot; style dates.
</p>


<h3>Value</h3>

<p>A numeric conversion factor to convert to seconds.
</p>


<h3>Note</h3>

<p>The conversion factor for months is approximate.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Will return 3600
mul &lt;- nc.get.time.multiplier("hours")

</code></pre>

<hr>
<h2 id='nc.get.time.series'>Returns time axis data as PCICt for a file</h2><span id='topic+nc.get.time.series'></span>

<h3>Description</h3>

<p>Returns time axis data as PCICt for a file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nc.get.time.series(
  f,
  v,
  time.dim.name,
  correct.for.gregorian.julian = FALSE,
  return.bounds = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nc.get.time.series_+3A_f">f</code></td>
<td>
<p>The file (an object of class <code>ncdf4</code>)</p>
</td></tr>
<tr><td><code id="nc.get.time.series_+3A_v">v</code></td>
<td>
<p>Optionally, the variable to look for a time dimension on.</p>
</td></tr>
<tr><td><code id="nc.get.time.series_+3A_time.dim.name">time.dim.name</code></td>
<td>
<p>Optionally, the time dimension name.</p>
</td></tr>
<tr><td><code id="nc.get.time.series_+3A_correct.for.gregorian.julian">correct.for.gregorian.julian</code></td>
<td>
<p>Specific workaround for Gregorian-Julian calendar transitions in non-proleptic Gregorian calendars</p>
</td></tr>
<tr><td><code id="nc.get.time.series_+3A_return.bounds">return.bounds</code></td>
<td>
<p>Whether to return the time bounds as an additional attribute</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Retrieving time data from a NetCDF file in an intelligible format is a non-trivial problem. The <code>PCICt</code> package solves part of this problem by allowing for 365- and 360-day calendars. This function complements it by returns time data for a file as <code>PCICt</code>, doing all necessary conversions.
</p>


<h3>Value</h3>

<p>A vector of PCICt objects, optionally with bounds
</p>


<h3>Note</h3>

<p>If the file was opened with <code>readunlim=FALSE</code>, it will read in the time values from the file; otherwise, it will retrieve the time values from the <code>ncdf4</code> class' data structures.
</p>


<h3>References</h3>

<p><a href="http://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#time-coordinate">http://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#time-coordinate</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Get time series from file
## Not run: 
f &lt;- nc_open("pr.nc")
ts &lt;- nc.get.time.series(f)
nc_close(f)

## End(Not run)

</code></pre>

<hr>
<h2 id='nc.get.var.subset.by.axes'>Gets a data subset in the place described by the named list of axes</h2><span id='topic+nc.get.var.subset.by.axes'></span>

<h3>Description</h3>

<p>Gets a data subset in the place described by the named list of axes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nc.get.var.subset.by.axes(f, v, axis.indices, axes.map = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nc.get.var.subset.by.axes_+3A_f">f</code></td>
<td>
<p>An object of class <code>ncdf4</code> which represents a NetCDF file.</p>
</td></tr>
<tr><td><code id="nc.get.var.subset.by.axes_+3A_v">v</code></td>
<td>
<p>A string naming a variable in a file or an object of class <code>ncvar4</code>.</p>
</td></tr>
<tr><td><code id="nc.get.var.subset.by.axes_+3A_axis.indices">axis.indices</code></td>
<td>
<p>A list consisting of zero or more vectors of indices, named by which axis they refer to (X, Y, T, etc).</p>
</td></tr>
<tr><td><code id="nc.get.var.subset.by.axes_+3A_axes.map">axes.map</code></td>
<td>
<p>An optional vector mapping axes to NetCDF dimensions. If not supplied, it will be generated from the file.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function will read data from the specified file (<code>f</code>) and variable (<code>v</code>) at the location specified by <code>axis.indices</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ncdf4.helpers-package">ncdf4.helpers-package</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Get a subset of the data.
## Not run: 
f &lt;- nc_open("pr.nc")
dat &lt;- nc.get.var.subset.by.axes(f1, "pr", list(X=1:4, Y=c(1, 3, 5)))
nc_close(f)

## End(Not run)

</code></pre>

<hr>
<h2 id='nc.get.variable.list'>Get a list of names of data variables</h2><span id='topic+nc.get.variable.list'></span>

<h3>Description</h3>

<p>Get a list of names of data variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nc.get.variable.list(f, min.dims = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nc.get.variable.list_+3A_f">f</code></td>
<td>
<p>The file (an object of class <code>ncdf4</code>)</p>
</td></tr>
<tr><td><code id="nc.get.variable.list_+3A_min.dims">min.dims</code></td>
<td>
<p>The minimum number of dimensions a variable must have to be included.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function returns the names of any data variables found in the file &ndash; that is, variables which are NOT dimension variables, dimension bounds variables, climatology bounds variables, coordinate variables, or grid mapping variables.
</p>
<p>Optionally, one may require that the variables have a minimum number of dimensions; this can eliminate unwanted variables left in files.
</p>


<h3>Value</h3>

<p>A character vector naming all of the data variables found.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Get dimension axes from file by inferring them from dimension names
## Not run: 
f &lt;- nc_open("pr.nc")
var.list &lt;- nc.get.variable.list(f)
nc_close(f)

## End(Not run)

</code></pre>

<hr>
<h2 id='nc.is.regular.dimension'>Determine if a dimension is regular</h2><span id='topic+nc.is.regular.dimension'></span>

<h3>Description</h3>

<p>Determine if a dimension is regular (evenly spaced).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nc.is.regular.dimension(d, tolerance = 1e-06)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nc.is.regular.dimension_+3A_d">d</code></td>
<td>
<p>The data to be tested</p>
</td></tr>
<tr><td><code id="nc.is.regular.dimension_+3A_tolerance">tolerance</code></td>
<td>
<p>The tolerance for variation in step size, as a fraction of the step size.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Not all dimensions or data are regular (evenly spaced). This function will, given data and optionally a tolerance level, determine if the dimension is regular or not.
</p>


<h3>Value</h3>

<p>TRUE if the data is regular; FALSE if not.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- c(1, 2, 3, 4, 5, 6, 7)
## TRUE
nc.is.regular.dimension(dat)

dat[7] &lt;- 7.001
## FALSE
nc.is.regular.dimension(dat)

</code></pre>

<hr>
<h2 id='nc.make.time.bounds'>Creates time bounds for a time series</h2><span id='topic+nc.make.time.bounds'></span>

<h3>Description</h3>

<p>Creates time bounds for a time series.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nc.make.time.bounds(ts, unit = c("year", "month"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nc.make.time.bounds_+3A_ts">ts</code></td>
<td>
<p>The time values, of type <code>PCICt</code></p>
</td></tr>
<tr><td><code id="nc.make.time.bounds_+3A_unit">unit</code></td>
<td>
<p>The units to be used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When aggregating data along the time axis, it is occasionally useful to be able to generate bounds for that data. This function will, given a time series of PCICt, returns a set of bounds for that time series based the supplied units.
</p>


<h3>Value</h3>

<p>2-dimensional bounds array for the time values with dimensions [length(ts), 2].
</p>


<h3>References</h3>

<p><a href="http://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#climatological-statistics">http://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#climatological-statistics</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(PCICt)
ts &lt;- as.PCICt(c("1961-01-15", "1961-02-15", "1961-03-15"), cal="360")
ts.bounds &lt;- nc.make.time.bounds(ts, unit="month")

</code></pre>

<hr>
<h2 id='nc.put.var.subset.by.axes'>Puts a data subset in the place described by the named list of axes</h2><span id='topic+nc.put.var.subset.by.axes'></span>

<h3>Description</h3>

<p>Puts a data subset in the place described by the named list of axes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nc.put.var.subset.by.axes(
  f,
  v,
  dat,
  axis.indices,
  axes.map = NULL,
  input.axes = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nc.put.var.subset.by.axes_+3A_f">f</code></td>
<td>
<p>An object of class <code>ncdf4</code> which represents a NetCDF file.</p>
</td></tr>
<tr><td><code id="nc.put.var.subset.by.axes_+3A_v">v</code></td>
<td>
<p>A string naming a variable in a file or an object of class <code>ncvar4</code>.</p>
</td></tr>
<tr><td><code id="nc.put.var.subset.by.axes_+3A_dat">dat</code></td>
<td>
<p>The data to put in the file.</p>
</td></tr>
<tr><td><code id="nc.put.var.subset.by.axes_+3A_axis.indices">axis.indices</code></td>
<td>
<p>A list consisting of zero or more vectors of indices, named by which axis they refer to (X, Y, T, etc).</p>
</td></tr>
<tr><td><code id="nc.put.var.subset.by.axes_+3A_axes.map">axes.map</code></td>
<td>
<p>An optional vector mapping axes to NetCDF dimensions. If not supplied, it will be generated from the file.</p>
</td></tr>
<tr><td><code id="nc.put.var.subset.by.axes_+3A_input.axes">input.axes</code></td>
<td>
<p>An optional vector containing the input axis map. If supplied, it will be used to permute the data from the axis order in the input data, to the axis order in the output data.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function will write data (<code>dat</code>) out to the specified file (<code>f</code>) and variable (<code>v</code>) at the location specified by <code>axis.indices</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ncdf4.helpers-package">ncdf4.helpers-package</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Copy a subset of the data from one location to another.
## Not run: 
f &lt;- nc_open("pr.nc")
dat &lt;- nc.get.var.subset.by.axes(f1, "pr", list(X=1:4, Y=c(1, 3, 5)))
nc.put.var.subset.by.axes(f1, "pr", dat, list(X=5:8, Y=1:3))
nc_close(f)

## End(Not run)

</code></pre>

<hr>
<h2 id='ncdf4.helpers'>ncdf4.helpers: helper functions for NetCDF files.</h2><span id='topic+ncdf4.helpers'></span><span id='topic+ncdf4.helpers-package'></span>

<h3>Description</h3>

<p>This package provides a number of helper functions for NetCDF files opened using the <code>ncdf4</code> package.
</p>


<h3>Details</h3>

<p>Dealing with NetCDF format data is unnecessarily difficult. The <code>ncdf4</code> package does a good job of making many lower-level operations easier. The <code>ncdf4.helpers</code> package aims to build higher-level functions upon the foundation of <code>ncdf4</code>.
</p>
<p>One concept central to much of the package is the idea of indexing, and dealing with data, by axis rather than by indices or by specific dimension names. The axes used are:
</p>

<ul>
<li><p> X (the horizontal axis)
</p>
</li>
<li><p> Y (the vertical axis)
</p>
</li>
<li><p> Z (the pressure / depth axis)
</p>
</li>
<li><p> S (the reduced spatial grid axis)
</p>
</li>
<li><p> T (the time axis)
</p>
</li></ul>

<p>Indexing by axis avoids the pitfalls of using data in forms other than (X, Y, Z, T), such as (T, X, Y). Avoiding using dimension names directly avoids problems when using projected data. 
</p>
<p>The functions in the package can be broken down into the following categories:
</p>

<ol>
<li><p> Functions which get, put, and transform data: <code><a href="#topic+nc.put.var.subset.by.axes">nc.put.var.subset.by.axes</a></code>, <code><a href="#topic+nc.get.var.subset.by.axes">nc.get.var.subset.by.axes</a></code>, <code><a href="#topic+nc.conform.data">nc.conform.data</a></code>
</p>
</li>
<li><p> Functions which deal with identifying axes, variables, and types of dimensions: <code><a href="#topic+nc.get.variable.list">nc.get.variable.list</a></code>, <code><a href="#topic+nc.get.dim.axes">nc.get.dim.axes</a></code>, <code><a href="#topic+nc.get.dim.for.axis">nc.get.dim.for.axis</a></code>, <code><a href="#topic+nc.get.dim.bounds.var.list">nc.get.dim.bounds.var.list</a></code>, <code><a href="#topic+nc.get.dim.names">nc.get.dim.names</a></code>, <code><a href="#topic+nc.get.dim.axes.from.names">nc.get.dim.axes.from.names</a></code>, <code><a href="#topic+nc.get.coordinate.axes">nc.get.coordinate.axes</a></code>, <code><a href="#topic+nc.get.compress.dims">nc.get.compress.dims</a></code>, <code><a href="#topic+nc.is.regular.dimension">nc.is.regular.dimension</a></code>.
</p>
</li>
<li><p> Functions which deal with getting, classifying, and using time information: <code><a href="#topic+nc.get.time.series">nc.get.time.series</a></code>, <code><a href="#topic+nc.make.time.bounds">nc.make.time.bounds</a></code>, <code><a href="#topic+nc.get.time.multiplier">nc.get.time.multiplier</a></code>.
</p>
</li>
<li><p> Functions which make sense of projection information: <code><a href="#topic+nc.get.proj4.string">nc.get.proj4.string</a></code>.
</p>
</li>
<li><p> Functions to ease chunked processing of data in parallel: <code><a href="#topic+get.cluster.worker.subsets">get.cluster.worker.subsets</a></code>.
</p>
</li>
<li><p> Functions to ease dealing with CMIP5 data: <code><a href="#topic+get.split.filename.cmip5">get.split.filename.cmip5</a></code>.
</p>
</li>
<li><p> Utility functions: <code><a href="#topic+get.f.step.size">get.f.step.size</a></code>.
</p>
</li></ol>



<h3>References</h3>

<p><a href="http://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html">http://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html</a>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
