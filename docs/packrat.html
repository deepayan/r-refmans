<!DOCTYPE html><html lang="en"><head><title>Help for package packrat</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {packrat}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#packrat-package'><p>Packrat: Reproducible dependency management</p></a></li>
<li><a href='#.snapshotImpl'><p>Internal Snapshot Implementation</p></a></li>
<li><a href='#appDependencies'><p>Detect Application Dependencies</p></a></li>
<li><a href='#bundle'><p>Bundle a Packrat Project</p></a></li>
<li><a href='#clean'><p>Remove Packages from the Library</p></a></li>
<li><a href='#disable'><p>Disable the use of Packrat in a Project</p></a></li>
<li><a href='#init'><p>Initialize Packrat on a new or existing <span class="rlang"><b>R</b></span> project</p></a></li>
<li><a href='#install'><p>Install a local development package.</p></a></li>
<li><a href='#install_local'><p>Install a Package from a Local Repository</p></a></li>
<li><a href='#lockfile-metadata'><p>Get / Set packrat lockfile metadata</p></a></li>
<li><a href='#packify'><p>Automatically Enter Packrat Mode on Startup</p></a></li>
<li><a href='#packrat-external'><p>Managing External Libraries</p></a></li>
<li><a href='#packrat-mode'><p>Packrat Mode</p></a></li>
<li><a href='#packrat-options'><p>Get/set packrat project options</p></a></li>
<li><a href='#packrat-resources'><p>Paths to Packrat Resources</p></a></li>
<li><a href='#repos_create'><p>Create a Local, CRAN-like Repository</p></a></li>
<li><a href='#repos_upload'><p>Upload a Package to a Local CRAN-like Repository</p></a></li>
<li><a href='#repository-management'><p>Add a Repository</p></a></li>
<li><a href='#restore'><p>Apply the most recent snapshot to the library</p></a></li>
<li><a href='#search_path'><p>Get Packages on the Search Path</p></a></li>
<li><a href='#snapshot'><p>Capture and store the packages and versions in use</p></a></li>
<li><a href='#status'><p>Show differences between the last snapshot and the library</p></a></li>
<li><a href='#unbundle'><p>Unbundle a Packrat Project</p></a></li>
<li><a href='#unused_packages'><p>Find Unused Packages in a Project</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>A Dependency Management System for Projects and their R Package
Dependencies</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Manage the R packages your project depends on in an isolated,
    portable, and reproducible way.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/rstudio/packrat">https://github.com/rstudio/packrat</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/rstudio/packrat/issues">https://github.com/rstudio/packrat/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>tools, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>devtools, httr, knitr, mockery, rmarkdown, testthat (&ge;
3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-05 11:45:33 UTC; aron</td>
</tr>
<tr>
<td>Author:</td>
<td>Aron Atkins [aut, cre],
  Toph Allen [aut],
  Kevin Ushey [aut],
  Jonathan McPherson [aut],
  Joe Cheng [aut],
  JJ Allaire [aut],
  Posit Software, PBC [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Aron Atkins &lt;aron@posit.co&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-05 13:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='packrat-package'>Packrat: Reproducible dependency management</h2><span id='topic+packrat'></span><span id='topic+packrat-package'></span>

<h3>Description</h3>

<p>Packrat is a tool for managing the <span class="rlang"><b>R</b></span> packages your project depends on in
an isolated, portable, and reproducible way.
</p>


<h3>Details</h3>

<p>Use packrat to make your <span class="rlang"><b>R</b></span> projects more:
</p>

<ul>
<li> <p><strong>Isolated</strong>: Installing a new or updated package for one project
won't break your other projects, and vice versa. That's because packrat gives
each project its own private package library.
</p>
</li>
<li> <p><strong>Portable</strong>: Easily transport your projects from one computer to
another, even across different platforms. Packrat makes it easy to install the
packages your project depends on.
</p>
</li>
<li> <p><strong>Reproducible</strong>: Packrat records the exact package versions you
depend on, and ensures those exact versions are the ones that get installed
wherever you go.
</p>
</li></ul>

<p>Use <code><a href="#topic+init">init</a></code> to create a new packrat project,
<code><a href="#topic+snapshot">snapshot</a></code> to record changes to your project's library, and
<code><a href="#topic+restore">restore</a></code> to recreate your library the way it was the last time you
(or anyone!) took a snapshot.
</p>
<p>Using these simple functions and sharing packrat's files lets you collaborate
in a shared, consistent environment with others as your project grows and
changes, and provides an easy way to share your results when you're done.
</p>


<h3>Anatomy of a packrat project</h3>

<p>A packrat project contains a few extra files and directories. The
<code><a href="#topic+init">init</a></code> function creates these files for you, if they don't
already exist.
</p>

<dl>
<dt><code>packrat/lib/</code></dt><dd><p>Private package library for this project.</p>
</dd>
<dt><code>packrat/src/</code></dt><dd><p>Source packages of all the dependencies that
packrat has been made aware of.</p>
</dd>
<dt><code>packrat/packrat.lock</code></dt><dd><p>Lists the precise package versions that were used
to satisfy dependencies, including dependencies of dependencies. (This file
should never be edited by hand!)</p>
</dd>
<dt><code>.Rprofile</code></dt><dd><p>Directs <span class="rlang"><b>R</b></span> to use the private package
library (when it is started from the project directory).</p>
</dd>
</dl>



<h3>Using packrat with version control</h3>

<p>Packrat is designed to work hand in hand with Git, Subversion, or any other
version control system. Be sure to check in the <code>.Rprofile</code>,
<code>packrat.lock</code> files, and everything under
<code>packrat/src/</code>. You can tell your VCS to ignore <code>packrat/lib/</code> (or
feel free to check it in if you don't mind taking up some extra space in your
repository).
</p>


<h3>Author(s)</h3>

<p>Posit Software, PBC
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/rstudio/packrat">https://github.com/rstudio/packrat</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/rstudio/packrat/issues">https://github.com/rstudio/packrat/issues</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Create a new packrat project from an existing directory of \R code
init()

# Install a package and take a snapshot of the new state of the library
install.packages("TTR")
snapshot()

# Accidentally remove a package and restore to add it back
remove.packages("TTR")
restore()

## End(Not run)

</code></pre>

<hr>
<h2 id='.snapshotImpl'>Internal Snapshot Implementation</h2><span id='topic+.snapshotImpl'></span>

<h3>Description</h3>

<p>This is the internal implementation for <code><a href="#topic+snapshot">snapshot</a></code>. Most users
should prefer calling <code><a href="#topic+snapshot">snapshot</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.snapshotImpl(
  project,
  available = NULL,
  lib.loc = libDir(project),
  dry.run = FALSE,
  ignore.stale = FALSE,
  prompt = interactive(),
  auto.snapshot = FALSE,
  verbose = TRUE,
  fallback.ok = FALSE,
  snapshot.sources = TRUE,
  implicit.packrat.dependency = TRUE,
  infer.dependencies = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".snapshotImpl_+3A_project">project</code></td>
<td>
<p>The project directory. Defaults to current working
directory.</p>
</td></tr>
<tr><td><code id=".snapshotImpl_+3A_available">available</code></td>
<td>
<p>A database of available packages.</p>
</td></tr>
<tr><td><code id=".snapshotImpl_+3A_lib.loc">lib.loc</code></td>
<td>
<p>The library to snapshot. Defaults to the private library
associated with the given directory.</p>
</td></tr>
<tr><td><code id=".snapshotImpl_+3A_dry.run">dry.run</code></td>
<td>
<p>Computes the changes to your packrat state that would be made
if a snapshot were performed, and prints them to the console.</p>
</td></tr>
<tr><td><code id=".snapshotImpl_+3A_ignore.stale">ignore.stale</code></td>
<td>
<p>Stale packages are packages that are different from the
last snapshot, but were installed by packrat. Typically, packages become
stale when a new snapshot is available, but you haven't applied it yet with
<code><a href="#topic+restore">restore</a></code>. By default, packrat will prevent you from taking a
snapshot when you have stale packages to prevent you from losing changes
from the unapplied snapshot. If your intent is to overwrite the last
snapshot without applying it, use <code>ignore.stale = TRUE</code> to skip this
check.</p>
</td></tr>
<tr><td><code id=".snapshotImpl_+3A_prompt">prompt</code></td>
<td>
<p><code>TRUE</code> to prompt before performing snapshotting package
changes that might be unintended; <code>FALSE</code> to perform these operations
without confirmation. Potentially unintended changes include snapshotting
packages at an older version than the last snapshot, or missing despite
being present in the last snapshot.</p>
</td></tr>
<tr><td><code id=".snapshotImpl_+3A_auto.snapshot">auto.snapshot</code></td>
<td>
<p>Internal use &ndash; should be set to <code>TRUE</code> when this
is an automatic snapshot.</p>
</td></tr>
<tr><td><code id=".snapshotImpl_+3A_verbose">verbose</code></td>
<td>
<p>Print output to the console while <code>snapshot</code>-ing?</p>
</td></tr>
<tr><td><code id=".snapshotImpl_+3A_fallback.ok">fallback.ok</code></td>
<td>
<p>Fall back to the latest CRAN version of a package if the
locally installed version is unavailable?</p>
</td></tr>
<tr><td><code id=".snapshotImpl_+3A_snapshot.sources">snapshot.sources</code></td>
<td>
<p>Download the tarball associated with a particular
package?</p>
</td></tr>
<tr><td><code id=".snapshotImpl_+3A_implicit.packrat.dependency">implicit.packrat.dependency</code></td>
<td>
<p>Include <code>packrat</code> as an implicit
dependency of this project, if not otherwise discovered? This should be
<code>FALSE</code> only if you can guarantee that <code>packrat</code> will be available
via other means when attempting to load this project.</p>
</td></tr>
<tr><td><code id=".snapshotImpl_+3A_infer.dependencies">infer.dependencies</code></td>
<td>
<p>If <code>TRUE</code>, infer package dependencies by
examining the <span class="rlang"><b>R</b></span> code.</p>
</td></tr>
</table>

<hr>
<h2 id='appDependencies'>Detect Application Dependencies</h2><span id='topic+appDependencies'></span>

<h3>Description</h3>

<p>Recursively detect all package dependencies for an application. This function
parses all <span class="rlang"><b>R</b></span> files in the application directory to determine what packages
the application depends directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>appDependencies(
  project = NULL,
  available.packages = NULL,
  fields = opts$snapshot.fields(),
  implicit.packrat.dependency = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="appDependencies_+3A_project">project</code></td>
<td>
<p>Directory containing application. Defaults to current working
directory.</p>
</td></tr>
<tr><td><code id="appDependencies_+3A_implicit.packrat.dependency">implicit.packrat.dependency</code></td>
<td>
<p>Include <code>packrat</code> as an implicit
dependency of this project, if not otherwise discovered? This should be
<code>FALSE</code> only if you can guarantee that <code>packrat</code> will be available
via other means when attempting to load this project.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Only direct dependencies are detected (i.e. no recursion is done to find the
dependencies of the dependencies).
</p>
<p>Dependencies are determined by parsing application source code and
looking for calls to <code>library</code>, <code>require</code>, <code>::</code>, and
<code>:::</code>.
</p>


<h3>Value</h3>

<p>Returns a list of the names of the packages on which R code in the
application depends.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

# dependencies for the app in the current working dir
appDependencies()

# dependencies for an app in another directory
appDependencies("~/projects/shiny/app1")


## End(Not run)
</code></pre>

<hr>
<h2 id='bundle'>Bundle a Packrat Project</h2><span id='topic+bundle'></span>

<h3>Description</h3>

<p>Bundle a packrat project, for easy sharing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bundle(
  project = NULL,
  file = NULL,
  include.src = TRUE,
  include.lib = FALSE,
  include.bundles = TRUE,
  include.vcs.history = FALSE,
  overwrite = FALSE,
  omit.cran.src = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bundle_+3A_project">project</code></td>
<td>
<p>The project directory. Defaults to the currently activate
project. By default, the current project active under <code>packratMode</code>
is checked.</p>
</td></tr>
<tr><td><code id="bundle_+3A_file">file</code></td>
<td>
<p>The path to write the bundle. By default, we write
the bundle to <code>packrat/bundles/&lt;project&gt;-&lt;date&gt;.tar.gz</code>, with
<code>&lt;date&gt;</code> as returned by <code>Sys.date()</code>.</p>
</td></tr>
<tr><td><code id="bundle_+3A_include.src">include.src</code></td>
<td>
<p>Include the packrat sources?</p>
</td></tr>
<tr><td><code id="bundle_+3A_include.lib">include.lib</code></td>
<td>
<p>Include the packrat private library?</p>
</td></tr>
<tr><td><code id="bundle_+3A_include.bundles">include.bundles</code></td>
<td>
<p>Include other packrat bundle tarballs
(as in <code>packrat/bundles/</code>)?</p>
</td></tr>
<tr><td><code id="bundle_+3A_include.vcs.history">include.vcs.history</code></td>
<td>
<p>Include version control history (ie, <code>.git/</code>
or <code>.svn/</code> folders)?</p>
</td></tr>
<tr><td><code id="bundle_+3A_overwrite">overwrite</code></td>
<td>
<p>Boolean; overwrite the file at <code>file</code> if it already exists?</p>
</td></tr>
<tr><td><code id="bundle_+3A_omit.cran.src">omit.cran.src</code></td>
<td>
<p>Boolean; when <code>TRUE</code>, packages whose sources can
be retrieved from CRAN are excluded from the bundle.</p>
</td></tr>
<tr><td><code id="bundle_+3A_...">...</code></td>
<td>
<p>Optional arguments passed to <code><a href="utils.html#topic+tar">tar</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The project is bundled as a gzipped tarball (<code>.tar.gz</code>), which can
be unbundled either with <code>packrat::<a href="#topic+unbundle">unbundle</a></code> (which
restores the project as well), <span class="rlang"><b>R</b></span>'s own <code>utils::<a href="utils.html#topic+untar">untar</a></code>, or
through most system <code>tar</code> implementations.
</p>
<p>The tar binary is selected using the same heuristic as <code><a href="#topic+restore">restore</a></code>.
</p>


<h3>Value</h3>

<p>The path (invisibly) to the bundled project.
</p>

<hr>
<h2 id='clean'>Remove Packages from the Library</h2><span id='topic+clean'></span>

<h3>Description</h3>

<p>Remove packages from the given library.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean(
  packages = NULL,
  project = NULL,
  lib.loc = libDir(project),
  dry.run = FALSE,
  force = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clean_+3A_packages">packages</code></td>
<td>
<p>A set of package names to remove from the project. When
<code>NULL</code>, <code><a href="#topic+unused_packages">unused_packages</a></code> is used to find packages
unused in the project.</p>
</td></tr>
<tr><td><code id="clean_+3A_project">project</code></td>
<td>
<p>The project directory. Defaults to current working
directory.</p>
</td></tr>
<tr><td><code id="clean_+3A_lib.loc">lib.loc</code></td>
<td>
<p>The library to clean. Defaults to the private package library
associated with the project directory.</p>
</td></tr>
<tr><td><code id="clean_+3A_dry.run">dry.run</code></td>
<td>
<p>Perform a dry run, returning records on which packages would
have been moved by the current clean action.</p>
</td></tr>
<tr><td><code id="clean_+3A_force">force</code></td>
<td>
<p>Force package removal, even if they are still in use within the project?</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Get unused package records
unused_packages()

# Clean all unused packages
clean()

# Clean specific packages
clean("foo")


## End(Not run)
</code></pre>

<hr>
<h2 id='disable'>Disable the use of Packrat in a Project</h2><span id='topic+disable'></span>

<h3>Description</h3>

<p>Disable packrat within a project, reverting to the use of standard user
package libraries.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>disable(project = NULL, restart = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="disable_+3A_project">project</code></td>
<td>
<p>The directory in which packrat will be disabled (defaults to
the current working directory)</p>
</td></tr>
<tr><td><code id="disable_+3A_restart">restart</code></td>
<td>
<p>If <code>TRUE</code>, restart the R session after disabling packrat.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>Disabling packrat for a project removes the packrat initialization code
from the .Rprofile file, resulting in the use of standard user package
libraries. Note that the <code>packrat</code> directory is not deleted, but remains
unused.
</p>
<p>To re-enable the use of packrat for a project you can call the
<code><a href="#topic+init">init</a></code> function.
</p>
<p>The <code>restart</code> parameter will only result in a restart of R when the R
environment packrat is running within makes available a restart function via
<code>getOption("restart")</code>.
</p>

<hr>
<h2 id='init'>Initialize Packrat on a new or existing <span class="rlang"><b>R</b></span> project</h2><span id='topic+init'></span>

<h3>Description</h3>

<p>Given a project directory, makes a new packrat project in the directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>init(
  project = ".",
  options = NULL,
  enter = TRUE,
  restart = enter,
  infer.dependencies = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="init_+3A_project">project</code></td>
<td>
<p>The directory that contains the <span class="rlang"><b>R</b></span> project.</p>
</td></tr>
<tr><td><code id="init_+3A_options">options</code></td>
<td>
<p>An <span class="rlang"><b>R</b></span> <code>list</code> of options, as specified in
<code><a href="#topic+packrat-options">packrat-options</a></code>.</p>
</td></tr>
<tr><td><code id="init_+3A_enter">enter</code></td>
<td>
<p>Boolean, enter packrat mode for this project after finishing a init?</p>
</td></tr>
<tr><td><code id="init_+3A_restart">restart</code></td>
<td>
<p>If <code>TRUE</code>, restart the R session after init.</p>
</td></tr>
<tr><td><code id="init_+3A_infer.dependencies">infer.dependencies</code></td>
<td>
<p>If <code>TRUE</code>, infer package dependencies by
examining the <span class="rlang"><b>R</b></span> code.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>init</code> works as follows:
</p>

<ol>
<li><p> Application dependencies are computed by examining the <span class="rlang"><b>R</b></span> code
throughout the project for <code>library</code> and <code>require</code> calls. You can
opt out of this behavior by setting <code>infer.dependencies</code> to
<code>FALSE</code>.
</p>
</li>
<li><p> A snapshot is taken of the version of each package currently used by
the project as described in <code><a href="#topic+snapshot">snapshot</a></code>, and each package's
sources are downloaded.
</p>
</li>
<li><p> A private library is created in the directory.
</p>
</li>
<li><p> The snapshot is applied to the directory as described in
<code><a href="#topic+restore">restore</a></code>. </p>
</li></ol>
<p> When <code>init</code> is finished, all the packages
on which the project depends are installed in a new, private library located
inside the project directory.
</p>
<p><strong>You must restart your <span class="rlang"><b>R</b></span> session in the given project directory after
running <code>init</code> in order for the changes to take effect!</strong>
</p>
<p>When <span class="rlang"><b>R</b></span> is started in the directory, it will use the new, private library.
Calls to <code><a href="base.html#topic+require">require</a></code> and <code><a href="base.html#topic+library">library</a></code> will load packages
from the private library (except for 'base' or 'recommended' <span class="rlang"><b>R</b></span> packages,
which are found in the system library), and functions such as <code><a href="utils.html#topic+install.packages">install.packages</a></code>
will modify that private library. You can sync this private library with
packrat using <code><a href="#topic+snapshot">snapshot</a></code> and <code><a href="#topic+restore">restore</a></code>.
</p>


<h3>Note</h3>

<p>The <code>restart</code> parameter will only result in a restart of R when the
R environment packrat is running within makes available a restart function
via <code>getOption("restart")</code>.
</p>


<h3>See Also</h3>

<p><a href="#topic+packrat">packrat</a> for a description of the files created by
<code>init</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

## initialize a project using a local repository of packages
packrat::init(options = list(local.repos = "~/projects/R"))


## End(Not run)
</code></pre>

<hr>
<h2 id='install'>Install a local development package.</h2><span id='topic+install'></span>

<h3>Description</h3>

<p>Uses <code>R CMD INSTALL</code> to install the package. Will also try to install
dependencies of the package from CRAN, if they're not already installed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>install(
  pkg = ".",
  reload = TRUE,
  quick = FALSE,
  local = TRUE,
  args = getOption("devtools.install.args"),
  quiet = FALSE,
  dependencies = NA,
  build_vignettes = !quick,
  keep_source = getOption("keep.source.pkgs")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="install_+3A_pkg">pkg</code></td>
<td>
<p>package description, can be path or package name.</p>
</td></tr>
<tr><td><code id="install_+3A_reload">reload</code></td>
<td>
<p>if <code>TRUE</code> (the default), will automatically reload the
package after installing.</p>
</td></tr>
<tr><td><code id="install_+3A_quick">quick</code></td>
<td>
<p>if <code>TRUE</code> skips docs, multiple-architectures,
demos, and vignettes, to make installation as fast as possible.</p>
</td></tr>
<tr><td><code id="install_+3A_local">local</code></td>
<td>
<p>if <code>FALSE</code> <code><a href="utils.html#topic+build">build</a></code>s the package first:
this ensures that the installation is completely clean, and prevents any
binary artefacts (like &lsquo;<span class="file">.o</span>&rsquo;, <code>.so</code>) from appearing in your local
package directory, but is considerably slower, because every compile has
to start from scratch.</p>
</td></tr>
<tr><td><code id="install_+3A_args">args</code></td>
<td>
<p>An optional character vector of additional command line
arguments to be passed to <code>R CMD install</code>. This defaults to the
value of the option <code>"devtools.install.args"</code>.</p>
</td></tr>
<tr><td><code id="install_+3A_quiet">quiet</code></td>
<td>
<p>if <code>TRUE</code> suppresses output from this function.</p>
</td></tr>
<tr><td><code id="install_+3A_dependencies">dependencies</code></td>
<td>
<p><code>logical</code> indicating to also install uninstalled
packages which this <code>pkg</code> depends on/links to/suggests. See
argument <code>dependencies</code> of <code><a href="utils.html#topic+install.packages">install.packages</a></code>.</p>
</td></tr>
<tr><td><code id="install_+3A_build_vignettes">build_vignettes</code></td>
<td>
<p>if <code>TRUE</code>, will build vignettes. Normally it is
<code>build</code> that's responsible for creating vignettes; this argument makes
sure vignettes are built even if a build never happens (i.e. because
<code>local = TRUE</code>.</p>
</td></tr>
<tr><td><code id="install_+3A_keep_source">keep_source</code></td>
<td>
<p>If <code>TRUE</code> will keep the srcrefs from an installed
package. This is useful for debugging (especially inside of RStudio).
It defaults to the option <code>"keep.source.pkgs"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default, installation takes place using the current package directory.
If you have compiled code, this means that artefacts of compilation will be
created in the <code>src/</code> directory. If you want to avoid this, you can
use <code>local = FALSE</code> to first build a package bundle and then install
it from a temporary directory. This is slower, but keeps the source
directory pristine.
</p>
<p>If the package is loaded, it will be reloaded after installation.
</p>

<hr>
<h2 id='install_local'>Install a Package from a Local Repository</h2><span id='topic+install_local'></span>

<h3>Description</h3>

<p>This function can be used to install a package from a local 'repository'; i.e.,
a directory containing package tarballs and sources.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>install_local(pkgs, ..., lib = .libPaths()[1], repos = get_opts("local.repos"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="install_local_+3A_pkgs">pkgs</code></td>
<td>
<p>A character vector of package names.</p>
</td></tr>
<tr><td><code id="install_local_+3A_...">...</code></td>
<td>
<p>Optional arguments passed to <code><a href="#topic+install">install</a></code>.</p>
</td></tr>
<tr><td><code id="install_local_+3A_lib">lib</code></td>
<td>
<p>The library in which the package should be installed.</p>
</td></tr>
<tr><td><code id="install_local_+3A_repos">repos</code></td>
<td>
<p>The local repositories to search for the package names specified.</p>
</td></tr>
</table>

<hr>
<h2 id='lockfile-metadata'>Get / Set packrat lockfile metadata</h2><span id='topic+lockfile-metadata'></span><span id='topic+set_lockfile_metadata'></span><span id='topic+get_lockfile_metadata'></span>

<h3>Description</h3>

<p>Get and set metadata in the current packrat-managed project lockfile <code>packrat.lock</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_lockfile_metadata(repos = NULL, r_version = NULL, project = NULL)

get_lockfile_metadata(metadata = NULL, simplify = TRUE, project = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="lockfile-metadata_+3A_repos">repos</code></td>
<td>
<p>A named character vector of the form <code>c(&lt;repoName&gt; = "&lt;pathToRepo&gt;")</code>.</p>
</td></tr>
<tr><td><code id="lockfile-metadata_+3A_r_version">r_version</code></td>
<td>
<p>A length-one character vector with suitable numeric version
string. See <code><a href="base.html#topic+package_version">package_version</a></code>.</p>
</td></tr>
<tr><td><code id="lockfile-metadata_+3A_project">project</code></td>
<td>
<p>The project directory. When in packrat mode, defaults to the current project;
otherwise, defaults to the current working directory.</p>
</td></tr>
<tr><td><code id="lockfile-metadata_+3A_metadata">metadata</code></td>
<td>
<p>The lockfile field name(s) to draw from.</p>
</td></tr>
<tr><td><code id="lockfile-metadata_+3A_simplify">simplify</code></td>
<td>
<p>Boolean; if <code>TRUE</code> the returned metadata will be un-listed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Project's <code>packrat.lock</code> contains some metadata before packages
dependencies informations. The project's lockfile is created and updated
programmatically by <code><a href="#topic+snapshot">snapshot</a></code>. However it could be necessary sometimes to
modify manually some of those values. For example, it could be useful to set another repository
CRAN url when deploying to a offline environnement.
</p>


<h3>available metadata </h3>


<ul>
<li> <p><code>r_version</code>: R version the project depends on
</p>
</li>
<li> <p><code>repos</code>: Name of repos and their url recorded packages can be
retrieve from. Only url is recommended to change if need. Name of repos is
used in package records and must be identical
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# changes repos url
repos &lt;- old_repos &lt;- get_lockfile_metadata("repos")
repos
repos["CRAN"] &lt;- "https://cran.r-project.org/"
set_lockfile_metadata(repos = repos)
get_lockfile_metadata("repos")
# setting back old state
# set_lockfile_metadata(repos = old_repos)

# changes R version
rver &lt;- old_rver &lt;- get_lockfile_metadata("r_version")
rver
rver &lt;- "3.4.1"
set_lockfile_metadata(r_version = rver)
get_lockfile_metadata("r_version")
# Setting back old state
# set_lockfile_metadata(r_version = old_rver)

## End(Not run)
</code></pre>

<hr>
<h2 id='packify'>Automatically Enter Packrat Mode on Startup</h2><span id='topic+packify'></span>

<h3>Description</h3>

<p>Install/augment the <code>.Rprofile</code> in a project, so that all <span class="rlang"><b>R</b></span> sessions
started in this directory enter <code>packrat mode</code>, and use the local
project library.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>packify(project = NULL, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="packify_+3A_project">project</code></td>
<td>
<p>The directory in which to install the <code>.Rprofile</code> file.</p>
</td></tr>
<tr><td><code id="packify_+3A_quiet">quiet</code></td>
<td>
<p>Be chatty?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It is not normally necessary to call <code>packify</code> directly; these files are
normally installed by <code><a href="#topic+init">init</a></code>. <code>packify</code> can be used to
restore the files if they are missing (for instance, if they were not added to
source control, or were accidentally removed).
</p>
<p>You'll need to restart <span class="rlang"><b>R</b></span> in the specified directory after running
<code>packify</code> in order to start using the private package library.
</p>

<hr>
<h2 id='packrat-external'>Managing External Libraries</h2><span id='topic+packrat-external'></span><span id='topic+with_extlib'></span><span id='topic+extlib'></span><span id='topic+user_lib'></span><span id='topic+packrat_lib'></span>

<h3>Description</h3>

<p>These functions provide a mechanism for (temporarily) using packages outside
of the packrat private library. The packages are searched within the 'default'
libraries; that is, the libraries that would be available upon launching a new
<span class="rlang"><b>R</b></span> session.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>with_extlib(packages = NULL, expr, envir = parent.frame())

extlib(packages)

user_lib()

packrat_lib()
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="packrat-external_+3A_packages">packages</code></td>
<td>
<p>An optional set of package names (as a character
vector) to load for the duration of evaluation of <code>expr</code>.
Whether <code>packages</code> is provided or <code>NULL</code> (the
default), <code>expr</code> is evaluated in an environment where the
external library path is in place, not the local (packrat)
library path.</p>
</td></tr>
<tr><td><code id="packrat-external_+3A_expr">expr</code></td>
<td>
<p>An <span class="rlang"><b>R</b></span> expression.</p>
</td></tr>
<tr><td><code id="packrat-external_+3A_envir">envir</code></td>
<td>
<p>An environment in which the expression is evaluated.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
with_extlib("lattice", xyplot(1 ~ 1))
with_extlib(expr = packageVersion("lattice"))
# since devtools requires roxygen2 &gt;= 5.0.0 for this step, this
# should fail unless roxygen2 is available in the packrat lib.loc
with_extlib("devtools", load_all("path/to/project"))
# this method will work given roxygen2 is installed in the
# non-packrat lib.loc with devtools
with_extlib(expr = devtools::load_all("path/to/project"))

## End(Not run)
</code></pre>

<hr>
<h2 id='packrat-mode'>Packrat Mode</h2><span id='topic+packrat-mode'></span><span id='topic+packrat_mode'></span><span id='topic+on'></span><span id='topic+off'></span>

<h3>Description</h3>

<p>Use these functions to switch <code>packrat</code> mode on and off. When within
<code>packrat</code> mode, the <span class="rlang"><b>R</b></span> session will use the private library generated
for the current project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>packrat_mode(
  on = NULL,
  project = NULL,
  auto.snapshot = get_opts("auto.snapshot"),
  clean.search.path = FALSE
)

on(
  project = NULL,
  auto.snapshot = get_opts("auto.snapshot"),
  clean.search.path = TRUE,
  print.banner = TRUE
)

off(project = NULL, print.banner = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="packrat-mode_+3A_on">on</code></td>
<td>
<p>Turn packrat mode on (<code>TRUE</code>) or off (<code>FALSE</code>). If omitted, packrat mode
will be toggled.</p>
</td></tr>
<tr><td><code id="packrat-mode_+3A_project">project</code></td>
<td>
<p>The directory in which packrat mode is launched &ndash; this is
where local libraries will be used and updated.</p>
</td></tr>
<tr><td><code id="packrat-mode_+3A_auto.snapshot">auto.snapshot</code></td>
<td>
<p>Perform automatic, asynchronous snapshots?</p>
</td></tr>
<tr><td><code id="packrat-mode_+3A_clean.search.path">clean.search.path</code></td>
<td>
<p>Detach and unload any packages loaded from non-system
libraries before entering packrat mode?</p>
</td></tr>
<tr><td><code id="packrat-mode_+3A_print.banner">print.banner</code></td>
<td>
<p>Print the packrat banner when entering / exiting packrat mode?
The packrat banner informs you of the new packrat mode state, as well as the library
path in use.</p>
</td></tr>
</table>

<hr>
<h2 id='packrat-options'>Get/set packrat project options</h2><span id='topic+packrat-options'></span><span id='topic+get_opts'></span><span id='topic+set_opts'></span><span id='topic+opts'></span>

<h3>Description</h3>

<p>Get and set options for the current packrat-managed project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_opts(options = NULL, simplify = TRUE, project = NULL)

set_opts(..., project = NULL, persist = TRUE)

opts
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="packrat-options_+3A_options">options</code></td>
<td>
<p>A character vector of valid option names.</p>
</td></tr>
<tr><td><code id="packrat-options_+3A_simplify">simplify</code></td>
<td>
<p>Boolean; <code>unlist</code> the returned options? Useful for when retrieving
a single option.</p>
</td></tr>
<tr><td><code id="packrat-options_+3A_project">project</code></td>
<td>
<p>The project directory. When in packrat mode, defaults to the current project;
otherwise, defaults to the current working directory.</p>
</td></tr>
<tr><td><code id="packrat-options_+3A_...">...</code></td>
<td>
<p>Entries of the form <code>key = value</code>, used for setting packrat project options.</p>
</td></tr>
<tr><td><code id="packrat-options_+3A_persist">persist</code></td>
<td>
<p>Boolean; persist these options for future sessions?</p>
</td></tr>
</table>


<h3>Valid Options</h3>


<ul>
<li> <p><code>auto.snapshot</code>: Perform automatic, asynchronous snapshots when running interactively?
(logical; defaults to <code>FALSE</code>)
</p>
</li>
<li> <p><code>use.cache</code>:
Install packages into a global cache, which is then shared across projects? The
directory to use is read through <code>Sys.getenv("R_PACKRAT_CACHE_DIR")</code>.
Windows support is currently experimental.
(logical; defaults to <code>FALSE</code>)
</p>
</li>
<li> <p><code>print.banner.on.startup</code>:
Print the banner on startup? Can be one of <code>TRUE</code> (always print),
<code>FALSE</code> (never print), and <code>'auto'</code> (do the right thing)
(defaults to <code>"auto"</code>)
</p>
</li>
<li> <p><code>vcs.ignore.lib</code>:
If TRUE, version control configuration is modified to ignore packrat private libraries.
(logical; defaults to <code>TRUE</code>)
</p>
</li>
<li> <p><code>vcs.ignore.src</code>:
If TRUE, version control configuration is modified to ignore packrat private sources.
(logical; defaults to <code>FALSE</code>)
</p>
</li>
<li> <p><code>external.packages</code>:
Packages which should be loaded from the user library. This can be useful for
very large packages which you don't want duplicated across multiple projects,
e.g. BioConductor annotation packages, or for package development scenarios
wherein you want to use e.g. <code>devtools</code> and <code>roxygen2</code> for package
development, but do not want your package to depend on these packages.
(character; defaults to <code>Sys.getenv("R_PACKRAT_EXTERNAL_PACKAGES")</code>)
</p>
</li>
<li> <p><code>local.repos</code>:
Ad-hoc local 'repositories'; i.e., directories containing package sources within
sub-directories.
(character; empty by default)
</p>
</li>
<li> <p><code>load.external.packages.on.startup</code>:
Load any packages specified within <code>external.packages</code> on startup?
(logical; defaults to <code>TRUE</code>)
</p>
</li>
<li> <p><code>ignored.packages</code>:
Prevent packrat from tracking certain packages. Dependencies of these packages
will also not be tracked (unless these packages are encountered as dependencies
in a separate context from the ignored package).
(character; empty by default)
</p>
</li>
<li> <p><code>ignored.directories</code>:
Prevent packrat from looking for dependencies inside certain directories of your
workspace. For example, if you have set your &quot;local.repos&quot; to be inside your local
workspace so that you can track custom packages as git submodules.
Each item should be the relative path to a directory in the workspace, e.g. &quot;data&quot;,
&quot;lib/gitsubmodule&quot;. Note that packrat already ignores any &quot;invisible&quot; files and
directories, such as those whose names start with a &quot;.&quot; character.
(character; empty by default)
</p>
</li>
<li> <p><code>quiet.package.installation</code>:
Emit output during package installation?
(logical; defaults to <code>TRUE</code>)
</p>
</li>
<li> <p><code>snapshot.recommended.packages</code>:
Should 'recommended' packages discovered in the system library be
snapshotted? See the <code>Priority</code> field of <code>available.packages()</code>
for more information &ndash; 'recommended' packages are those normally bundled
with CRAN releases of R on OS X and Windows, but new releases are also
available on the CRAN server.
(logical; defaults to <code>FALSE</code>)
</p>
</li>
<li> <p><code>snapshot.fields</code>:
What fields of a package's DESCRIPTION file should be used when discovering
dependencies?
(character, defaults to <code>c("Imports", "Depends", "LinkingTo")</code>)
</p>
</li>
<li> <p><code>symlink.system.packages</code>:
Symlink base <span class="rlang"><b>R</b></span> packages into a private <code>packrat/lib-R</code> directory?
This is done to further encapsulate the project from user packages that
have been installed into the <span class="rlang"><b>R</b></span> system library.
(boolean, defaults to <code>TRUE</code>)
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## use 'devtools' and 'knitr' from the user library
packrat::set_opts(external.packages = c("devtools", "knitr"))

## set local repository
packrat::set_opts(local.repos = c("~/projects/R"))

## get the set of 'external packages'
packrat::opts$external.packages()

## set the external packages
packrat::opts$external.packages(c("devtools", "knitr"))

## End(Not run)
</code></pre>

<hr>
<h2 id='packrat-resources'>Paths to Packrat Resources</h2><span id='topic+packrat-resources'></span><span id='topic+project_dir'></span><span id='topic+src_dir'></span><span id='topic+lib_dir'></span><span id='topic+bundles_dir'></span>

<h3>Description</h3>

<p>These functions provide a mechanism for retrieving the paths to
Packrat resource directories. Each of these directories can be
overridden by setting either an environment variable, or an <span class="rlang"><b>R</b></span>
option.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>project_dir(project = NULL)

src_dir(project = NULL)

lib_dir(project = NULL)

bundles_dir(project = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="packrat-resources_+3A_project">project</code></td>
<td>
<p>The project directory.</p>
</td></tr>
</table>


<h3>Project Directory</h3>

<p><code>project_dir()</code> is special &ndash; the <code>R_PACKRAT_PROJECT_DIR</code>
environment variable is set and unset by <code><a href="#topic+on">on</a></code> and
<code><a href="#topic+off">off</a></code>, respectively, and generally should not be
overridden by the user.
</p>


<h3>Directory Resolution</h3>

<p>The following table shows the order in which resource directories
are discovered (from left to right). The first non-empty result is
used.
</p>

<table>
<tr>
 <td style="text-align: left;">
<strong>API</strong>         </td><td style="text-align: left;"> <strong>Environment Variable</strong> </td><td style="text-align: left;"> <strong>R Option</strong>          </td><td style="text-align: left;"> <strong>Default Value</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>project_dir()</code> </td><td style="text-align: left;"> <code>R_PACKRAT_PROJECT_DIR</code>  </td><td style="text-align: left;"> <code>packrat.project.dir</code> </td><td style="text-align: left;"> <code>getwd()</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>src_dir()</code>     </td><td style="text-align: left;"> <code>R_PACKRAT_SRC_DIR</code>      </td><td style="text-align: left;"> <code>packrat.src.dir</code>     </td><td style="text-align: left;"> <code>"packrat/src"</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>lib_dir()</code>     </td><td style="text-align: left;"> <code>R_PACKRAT_LIB_DIR</code>      </td><td style="text-align: left;"> <code>packrat.lib.dir</code>     </td><td style="text-align: left;"> <code>"packrat/lib"</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>bundles_dir()</code> </td><td style="text-align: left;"> <code>R_PACKRAT_BUNDLES_DIR</code>  </td><td style="text-align: left;"> <code>packrat.bundles.dir</code> </td><td style="text-align: left;"> <code>"packrat/bundles"</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<em>(none)</em>        </td><td style="text-align: left;"> <code>R_PACKRAT_LIB_R_DIR</code>    </td><td style="text-align: left;"> <code>packrat.lib-r.dir</code>   </td><td style="text-align: left;"> <code>"packrat/lib-R"</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<em>(none)</em>        </td><td style="text-align: left;"> <code>R_PACKRAT_LIB_EXT_DIR</code>  </td><td style="text-align: left;"> <code>packrat.lib-ext.dir</code> </td><td style="text-align: left;"> <code>"packrat/lib-ext"</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>


<hr>
<h2 id='repos_create'>Create a Local, CRAN-like Repository</h2><span id='topic+repos_create'></span>

<h3>Description</h3>

<p>Generate a local CRAN-like repository which can be
used to store and distribute <span class="rlang"><b>R</b></span> packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repos_create(path, name = basename(path), add = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repos_create_+3A_path">path</code></td>
<td>
<p>Path to a local CRAN-like repository.</p>
</td></tr>
<tr><td><code id="repos_create_+3A_name">name</code></td>
<td>
<p>The name to assign to the repository. Defaults to the
directory name in which the reopsitory is created.</p>
</td></tr>
<tr><td><code id="repos_create_+3A_add">add</code></td>
<td>
<p>Add this new repository to the current set of repositories?</p>
</td></tr>
</table>

<hr>
<h2 id='repos_upload'>Upload a Package to a Local CRAN-like Repository</h2><span id='topic+repos_upload'></span>

<h3>Description</h3>

<p>Upload a Package to a Local CRAN-like Repository
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repos_upload(package, to, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repos_upload_+3A_package">package</code></td>
<td>
<p>Path to a package tarball. The tarball should be
created by <code>R CMD build</code>; alternatively, it can be the path
to a folder containing the source code for a package (which
will then be built with <code>R CMD build</code>) and then uploaded
to the local repository.</p>
</td></tr>
<tr><td><code id="repos_upload_+3A_to">to</code></td>
<td>
<p>The name of the CRAN-like repository. It (currently) must
be a local (on-disk) CRAN repository.</p>
</td></tr>
<tr><td><code id="repos_upload_+3A_...">...</code></td>
<td>
<p>Optional arguments passed to <code>R CMD build</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='repository-management'>Add a Repository</h2><span id='topic+repository-management'></span><span id='topic+repos_add'></span><span id='topic+repos_add_local'></span><span id='topic+repos_set'></span><span id='topic+repos_set_local'></span><span id='topic+repos_remove'></span><span id='topic+repos_list'></span>

<h3>Description</h3>

<p>Add a repository to the set of currently available repositories. This is
effectively an easier-to-use wrapper over interacting with the
<code>"repos"</code> option, which is otherwise set with <code>options(repos = ...)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repos_add(..., overwrite = FALSE)

repos_add_local(..., overwrite = FALSE)

repos_set(...)

repos_set_local(...)

repos_remove(names)

repos_list()
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repository-management_+3A_...">...</code></td>
<td>
<p>Named arguments of the form <code>&lt;repoName&gt; = &lt;pathToRepo&gt;</code>.</p>
</td></tr>
<tr><td><code id="repository-management_+3A_overwrite">overwrite</code></td>
<td>
<p>Boolean; overwrite if a repository with the given name
already exists?</p>
</td></tr>
<tr><td><code id="repository-management_+3A_names">names</code></td>
<td>
<p>The names of repositories (as exist in e.g.
<code>names(getOption("repos"))</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>repos_add_local</code> is used for adding file-based repositories; that is,
CRAN repositories that live locally on disk and not on the internet / local network.
</p>

<hr>
<h2 id='restore'>Apply the most recent snapshot to the library</h2><span id='topic+restore'></span>

<h3>Description</h3>

<p>Applies the most recent snapshot to the project's private library.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>restore(
  project = NULL,
  overwrite.dirty = FALSE,
  prompt = interactive(),
  dry.run = FALSE,
  restart = !dry.run
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="restore_+3A_project">project</code></td>
<td>
<p>The project directory. When in packrat mode, if this is
<code>NULL</code>, then the directory associated with the current packrat project
is used. Otherwise, the project directory specified is used.</p>
</td></tr>
<tr><td><code id="restore_+3A_overwrite.dirty">overwrite.dirty</code></td>
<td>
<p>A dirty package is one that has been changed since the
last snapshot or restore. Packrat will leave these alone by default. If you
want to guarantee that <code>restore</code> will put you in the exact state
represented by the snapshot being applied, use <code>overwrite.dirty =
TRUE</code>.</p>
</td></tr>
<tr><td><code id="restore_+3A_prompt">prompt</code></td>
<td>
<p><code>TRUE</code> to prompt before performing potentially destructive
changes (package removals or downgrades); <code>FALSE</code> to perform these
operations without confirmation.</p>
</td></tr>
<tr><td><code id="restore_+3A_dry.run">dry.run</code></td>
<td>
<p>If <code>TRUE</code>, compute the changes to your packrat state that
would be made if a restore was performed, without actually executing them.</p>
</td></tr>
<tr><td><code id="restore_+3A_restart">restart</code></td>
<td>
<p>If <code>TRUE</code>, restart the R session after restoring.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>restore</code> works by adding, removing, and changing packages so that the
set of installed packages and their versions matches the snapshot exactly.
</p>
<p>There are three common use cases for <code>restore</code>:
</p>

<ul>
<li> <p><strong>Hydrate</strong>: Use <code>restore</code> after copying a project to a new machine
to populate the library on that machine.
</p>
</li>
<li> <p><strong>Sync</strong>: Use <code>restore</code> to apply library changes made by a
collaborator to your own library. (In general, you want to run <code>restore</code>
whenever you pick up a change to <code>packrat.lock</code>)
</p>
</li>
<li> <p><strong>Rollback</strong>: Use <code>restore</code> to undo accidental changes made
to the library since the last snapshot.
</p>
</li></ul>

<p><code>restore</code> cannot make changes to packages that are currently loaded. If
changes are necessary to currently loaded packages, you will need to restart
<span class="rlang"><b>R</b></span> to apply the changes (<code>restore</code> will let you know when this is
necessary). It is recommended that you do this as soon as possible, because
any library changes made between running <code>restore</code> and restarting <span class="rlang"><b>R</b></span>
will be lost.
</p>


<h3>Note</h3>

<p><code>restore</code> can be destructive; it will remove packages that were
not in the snapshot, and it will replace newer packages with older versions
if that's what the snapshot indicates. <code>restore</code> will warn you before
attempting to remove or downgrade a package (if <code>prompt</code> is
<code>TRUE</code>), but will always perform upgrades and new installations
without prompting.
</p>
<p><code>restore</code> works only on the private package library created by
packrat; if you have other libraries on your path, they will be unaffected.
</p>
<p>The <code>restart</code> parameter will only result in a restart of R when the R
environment packrat is running within makes available a restart function
via <code>getOption("restart")</code>.
</p>
<p>To install packages hosted in private repositories on GitHub, GitLab, and
Bitbucket, you must either set the option
<code>packrat.authenticated.downloads.use.renv</code> to <code>TRUE</code> and ensure
that <code>curl</code> is available on your system, or ensure that the
<code>httr</code> package is available in your R library.
</p>
<p>In addition, you must make credentials for your provider available in the
appropriate environment variable(s): <code>GITHUB_PAT</code>, <code>GITLAB_PAT</code>,
and/or <code>BITBUCKET_USERNAME</code> and <code>BITBUCKET_PASSWORD</code>. These
environment variables are hidden from package installation subprocesses.
</p>
<p>Packrat does not support installation from enterprise instances of GitHub,
GitLab, or Bitbucket.
</p>
<p>Packrat selects a <code>tar</code> binary with the following heuristic: If a
<code>TAR</code> environment variable exists, Packrat will use that. Otherwise,
it will either look for a <code>tar</code> binary on the <code>PATH</code> on Unix, or
look for the system <code>tar</code> on Windows. If no binary is found in those
locations, it will use R's internal <code>tar</code> implementation, which may
cause errors with long filenames.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+snapshot">snapshot</a></code>, the command that creates the snapshots
applied with <code>restore</code>.
</p>
<p><code><a href="#topic+status">status</a></code> to view the differences between the most recent
snapshot and the library.
</p>

<hr>
<h2 id='search_path'>Get Packages on the Search Path</h2><span id='topic+search_path'></span>

<h3>Description</h3>

<p>Retrieve the packages on the search path, as well as the
associated library location.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>search_path()
</code></pre>

<hr>
<h2 id='snapshot'>Capture and store the packages and versions in use</h2><span id='topic+snapshot'></span>

<h3>Description</h3>

<p>Finds the packages in use in the project, and stores a list
of those packages, their sources, and their current versions in packrat.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>snapshot(
  project = NULL,
  available = NULL,
  lib.loc = libDir(project),
  ignore.stale = FALSE,
  dry.run = FALSE,
  prompt = interactive(),
  snapshot.sources = TRUE,
  infer.dependencies = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="snapshot_+3A_project">project</code></td>
<td>
<p>The project directory. Defaults to current working
directory.</p>
</td></tr>
<tr><td><code id="snapshot_+3A_available">available</code></td>
<td>
<p>A database of available packages.</p>
</td></tr>
<tr><td><code id="snapshot_+3A_lib.loc">lib.loc</code></td>
<td>
<p>The library to snapshot. Defaults to the private library
associated with the given directory.</p>
</td></tr>
<tr><td><code id="snapshot_+3A_ignore.stale">ignore.stale</code></td>
<td>
<p>Stale packages are packages that are different from the
last snapshot, but were installed by packrat. Typically, packages become
stale when a new snapshot is available, but you haven't applied it yet with
<code><a href="#topic+restore">restore</a></code>. By default, packrat will prevent you from taking a
snapshot when you have stale packages to prevent you from losing changes
from the unapplied snapshot. If your intent is to overwrite the last
snapshot without applying it, use <code>ignore.stale = TRUE</code> to skip this
check.</p>
</td></tr>
<tr><td><code id="snapshot_+3A_dry.run">dry.run</code></td>
<td>
<p>Computes the changes to your packrat state that would be made
if a snapshot were performed, and prints them to the console.</p>
</td></tr>
<tr><td><code id="snapshot_+3A_prompt">prompt</code></td>
<td>
<p><code>TRUE</code> to prompt before performing snapshotting package
changes that might be unintended; <code>FALSE</code> to perform these operations
without confirmation. Potentially unintended changes include snapshotting
packages at an older version than the last snapshot, or missing despite
being present in the last snapshot.</p>
</td></tr>
<tr><td><code id="snapshot_+3A_snapshot.sources">snapshot.sources</code></td>
<td>
<p>Boolean; should package sources be downloaded during
snapshot?</p>
</td></tr>
<tr><td><code id="snapshot_+3A_infer.dependencies">infer.dependencies</code></td>
<td>
<p>If <code>TRUE</code>, infer package dependencies by
examining <span class="rlang"><b>R</b></span> code used within the project. This included the <span class="rlang"><b>R</b></span> code
contained within <code>.R</code> files, as well as other multi-mode documents
(e.g. <code>.Rmd</code>).</p>
</td></tr>
</table>


<h3>Note</h3>

<p><code>snapshot</code> modifies the project's <code>packrat.lock</code> file, and
the sources stored in the project's <code>packrat/src</code> directory. If you
are working with a version control system, your collaborators can sync the
changes to these files and then use <code><a href="#topic+restore">restore</a></code> to apply your
snapshot.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+restore">restore</a></code> to apply a snapshot.
<code><a href="#topic+status">status</a></code> to view the differences between the most recent snapshot
and the library.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Take a snapshot of the current project
snapshot()

# See what changes would be included in a snapshot
snapshot(dry.run = TRUE)


## End(Not run)
</code></pre>

<hr>
<h2 id='status'>Show differences between the last snapshot and the library</h2><span id='topic+status'></span>

<h3>Description</h3>

<p>Shows the differences between the project's packrat dependencies, its private
package library, and its R scripts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>status(project = NULL, lib.loc = libDir(project), quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="status_+3A_project">project</code></td>
<td>
<p>The directory that contains the R project.</p>
</td></tr>
<tr><td><code id="status_+3A_lib.loc">lib.loc</code></td>
<td>
<p>The library to examine. Defaults to the private library
associated with the project directory.</p>
</td></tr>
<tr><td><code id="status_+3A_quiet">quiet</code></td>
<td>
<p>Print detailed information about the packrat status to the console?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These differences are created when you use the normal R package management
commands like <code><a href="utils.html#topic+install.packages">install.packages</a></code>, <code><a href="utils.html#topic+update.packages">update.packages</a></code>,
and <code><a href="utils.html#topic+remove.packages">remove.packages</a></code>. To bring these differences into packrat, you
can use <code><a href="#topic+snapshot">snapshot</a></code>.
</p>
<p>Differences can also arise if one of your collaborators adds or removes
packages from the packrat dependencies. In this case, you simply need to tell
packrat to update your private package library using <code><a href="#topic+restore">restore</a></code>.
</p>


<h3>Value</h3>

<p>Either <code>NULL</code> if a <code>packrat</code> project has not yet been
initialized, or a (invisibly) a <code>data.frame</code> with components:
</p>
<table role = "presentation">
<tr><td><code>package</code></td>
<td>
<p>The package name,</p>
</td></tr>
<tr><td><code>packrat.version</code></td>
<td>
<p>The package version used in the last snapshot,</p>
</td></tr>
<tr><td><code>packrat.source</code></td>
<td>
<p>The location from which the package was obtained,</p>
</td></tr>
<tr><td><code>library.version</code></td>
<td>
<p>The package version available in the local library,</p>
</td></tr>
<tr><td><code>currently.used</code></td>
<td>
<p>Whether the package is used in any of the R code in the current project.</p>
</td></tr>
</table>

<hr>
<h2 id='unbundle'>Unbundle a Packrat Project</h2><span id='topic+unbundle'></span>

<h3>Description</h3>

<p>Unbundle a previously <code><a href="#topic+bundle">bundle</a></code>d project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unbundle(bundle, where, ..., restore = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="unbundle_+3A_bundle">bundle</code></td>
<td>
<p>Path to the bundled file.</p>
</td></tr>
<tr><td><code id="unbundle_+3A_where">where</code></td>
<td>
<p>The directory where we will unbundle the project.</p>
</td></tr>
<tr><td><code id="unbundle_+3A_...">...</code></td>
<td>
<p>Optional arguments passed to <code><a href="utils.html#topic+tar">tar</a></code>.</p>
</td></tr>
<tr><td><code id="unbundle_+3A_restore">restore</code></td>
<td>
<p>Boolean; should we <code><a href="#topic+restore">restore</a></code> the library
after <code>unbundle</code>-ing the project?</p>
</td></tr>
</table>

<hr>
<h2 id='unused_packages'>Find Unused Packages in a Project</h2><span id='topic+unused_packages'></span>

<h3>Description</h3>

<p>Unused packages are those still contained within your project library, but
are unused in your project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unused_packages(project = NULL, lib.loc = libDir(project))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="unused_packages_+3A_project">project</code></td>
<td>
<p>The project directory.</p>
</td></tr>
<tr><td><code id="unused_packages_+3A_lib.loc">lib.loc</code></td>
<td>
<p>The library to check.</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
