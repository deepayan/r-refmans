<!DOCTYPE html><html><head><title>Help for package monitOS</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {monitOS}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#app_server'><p>Shiny app server</p></a></li>
<li><a href='#app_ui'><p>Shiny app UI</p></a></li>
<li><a href='#bounds'><p>Bounds</p></a></li>
<li><a href='#calc_posterior'><p>Function which calculates for k=1, ..., K, Pr(log-HR &gt;= lhr_null | theta.hat.k = lhr_con.k)</p>
i.e. the posterior probability the true OS log-hr exceeds the minimum unacceptable
OS log-HR given the estimate of the log-hr at analysis k equals lhr_con.k (i.e. the estimate
is equal to the stage k 'continuation threshold').</a></li>
<li><a href='#calc_predictive'><p>Title&quot;</p></a></li>
<li><a href='#meeting_probs'><p>Probabilities of meeting positivity threshold under target HR</p></a></li>
<li><a href='#run_app'><p>monitOS app</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Monitoring Overall Survival in Pivotal Trials in Indolent
Cancers</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://opensource.nibr.com/monitOS/">https://opensource.nibr.com/monitOS/</a></td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.5</td>
</tr>
<tr>
<td>Description:</td>
<td>These guidelines are meant to provide a pragmatic, yet rigorous, help to drug developers and decision makers, since they are shaped by three fundamental ingredients: the clinically determined margin of detriment on OS that is unacceptably high (delta null); the benefit on OS that is plausible given the mechanism of action of the novel intervention (delta alt); and the quantity of information (i.e. survival events) it is feasible to accrue given the clinical and drug development setting. The proposed guidelines facilitate transparent discussions between stakeholders focusing on the risks of erroneous decisions and what might be an acceptable trade-off between power and the false positive error rate. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Thibaud Coroller &lt;thibaud.coroller@novartis.com&gt;</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, glue, shiny, shinydashboard,</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), covr, knitr, rmarkdown, pkgdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-21 19:07:41 UTC; corolth1</td>
</tr>
<tr>
<td>Author:</td>
<td>Thomas Fleming [ctb],
  Lisa Hampson [aut],
  Bharani Bharani-Dharan [ctb],
  Frank Bretz [ctb],
  Arunava Chakravartty [ctb],
  Thibaud Coroller [aut, cre],
  Evanthia Koukouli [aut],
  Janet Wittes [ctb],
  Nigel Yateman [ctb],
  Emmanuel Zuber [ctb],
  Novartis Pharma AG [cph]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-21 19:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='app_server'>Shiny app server</h2><span id='topic+app_server'></span>

<h3>Description</h3>

<p>Shiny app server
</p>


<h3>Usage</h3>

<pre><code class='language-R'>app_server(input, output, session)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="app_server_+3A_input">input</code></td>
<td>
<p>generic shiny var</p>
</td></tr>
<tr><td><code id="app_server_+3A_output">output</code></td>
<td>
<p>generic shiny var</p>
</td></tr>
<tr><td><code id="app_server_+3A_session">session</code></td>
<td>
<p>generic shiny var</p>
</td></tr>
</table>

<hr>
<h2 id='app_ui'>Shiny app UI</h2><span id='topic+app_ui'></span>

<h3>Description</h3>

<p>Shiny app UI
</p>


<h3>Usage</h3>

<pre><code class='language-R'>app_ui(request)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="app_ui_+3A_request">request</code></td>
<td>
<p>generic shiny var</p>
</td></tr>
</table>

<hr>
<h2 id='bounds'>Bounds</h2><span id='topic+bounds'></span>

<h3>Description</h3>

<p>OS monitoring guidelines as proposed in manuscript &quot;Monitoring Overall Survival in Pivotal Trials in Indolent Cancers&quot;.
Calculate thresholds for positivity that can be used at an analysis to judge whether emerging
evidence about the effect of treatment on OS is concerning or not. The threshold for positivity at any given analysis
is the value below which the observed hazard ratio must be in order to provide sufficient reassurance that the effect
on OS does not reach the selected unacceptable level of detriment (the margin hr_null).
Terminology follows the manuscript &quot;Monitoring Overall Survival in Pivotal Trials in Indolent Cancers&quot;, publication submitted
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bounds(
  events,
  power_int = 0.9,
  falsepos = 0.025,
  hr_null = 1.3,
  hr_alt = 0.9,
  rand_ratio = 1,
  hr_marg_benefit = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bounds_+3A_events">events</code></td>
<td>
<p>Vector. Target number of deaths at each analysis</p>
</td></tr>
<tr><td><code id="bounds_+3A_power_int">power_int</code></td>
<td>
<p>Scalar. Marginal power required at the Primary Analysis when true hazard ratio (HR) is hr_alt.</p>
</td></tr>
<tr><td><code id="bounds_+3A_falsepos">falsepos</code></td>
<td>
<p>Scalar. Marginal one-sided false positive error rate we are prepared to tolerate at the Final Analysis. Determines the  positivity threshold at Final Analysis</p>
</td></tr>
<tr><td><code id="bounds_+3A_hr_null">hr_null</code></td>
<td>
<p>Scalar. The unacceptably large detrimental effect of treatment on OS we want to rule out (on HR scale)</p>
</td></tr>
<tr><td><code id="bounds_+3A_hr_alt">hr_alt</code></td>
<td>
<p>Scalar. Plausible clinically relevant beneficial effect of treatment on OS (on HR scale)</p>
</td></tr>
<tr><td><code id="bounds_+3A_rand_ratio">rand_ratio</code></td>
<td>
<p>Integer. If patients are randomized k:1 between experimental intervention and control, rand_ratio should be inputted as k.
Example: if patients are randomized 1:1 between experimental and control, k=1. If patients are randomized 2:1 between experimental and control, k=2.</p>
</td></tr>
<tr><td><code id="bounds_+3A_hr_marg_benefit">hr_marg_benefit</code></td>
<td>
<p>Scalar. We may be uncertain about what a plausible beneficial effect of treatment on OS is. User can enter a second plausible OS benefit (on HR scale)
and function will evaluate the probability we meet the positivity threshold at each analysis under this HR. This second OS benefit will usually be closer to 1 than hr_alt.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Monitoring guidelines assume that the hazard ratio (HR) can adequately summarize the size of the benefits and harms of the experimental
intervention vs control on overall survival (OS). Furthermore, guidelines assume that an OS HR &lt; 1 is consistent with a beneficial effect of the
intervention on OS (and smaller OS HRs &lt;1 indicate increased efficacy).
</p>


<h3>Value</h3>

<p>List that contains:
</p>

<ul>
<li> <p><code>lhr_null</code>: Scalar, unacceptable OS log-HR,
</p>
</li>
<li> <p><code>lhr_alt</code>: Scalar, plausible clinically relevant log-HR,
</p>
</li>
<li> <p><code>lhr_pos</code>: Scalar, positivity thresholds for log-HR estimates,
</p>
</li>
<li> <p><code>summary</code>: Dataframe, which contains:
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;OS HR threshold for positivity&#8288;</code>,
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;One sided false positive error rate&#8288;</code>,
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;Level of 2 sided CI needed to rule out hr_null&#8288;</code>,
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;Probability of meeting positivity threshold under hr_alt&#8288;</code>,
</p>
</li>
<li> <p><code>Positivity_Thres_Posterior</code>: Pr(true OS HR &gt;= minimum unacceptable OS HR | current data),
</p>
</li>
<li> <p><code>Positivity_Thres_PredProb</code>: Pr(OS HR estimate at Final Analysis &lt;= Final Analysis positivity threshold | current data)
</p>
</li></ul>

</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># Example 01: OS monitoring guideline retrospectively applied to Motivating Example 1
# with delta null = 1.3, delta alt = 0.80, gamma_FA = 0.025 and  beta_PA = 0.10.
bounds(
  events = c(60, 89, 110, 131, 178),
  power_int = 0.9, # beta_PA
  falsepos = 0.025, # gamma_FA
  hr_null = 1.3, # delta_null
  hr_alt = 0.8, # delta_alt
  rand_ratio = 1, # rand_ratio
  hr_marg_benefit = NULL
)
# Example 02: OS monitoring guideline applied to Motivating Example 2
# with delta null = 4/3, delta alt = 0.7, gamma_FA = 0.20 and beta_PA = 0.1.
bounds(
  events = c(60, 89, 110, 131, 178),
  power_int = 0.9, # beta_PA
  falsepos = 0.025, # gamma_FA
  hr_null = 1.3, # delta_null
  hr_alt = 0.8, # delta_alt
  rand_ratio = 1, # rand_ratio
  hr_marg_benefit = 0.95
)
</code></pre>

<hr>
<h2 id='calc_posterior'>Function which calculates for k=1, ..., K, Pr(log-HR &gt;= lhr_null | theta.hat.k = lhr_con.k)
i.e. the posterior probability the true OS log-hr exceeds the minimum unacceptable
OS log-HR given the estimate of the log-hr at analysis k equals lhr_con.k (i.e. the estimate
is equal to the stage k 'continuation threshold').</h2><span id='topic+calc_posterior'></span>

<h3>Description</h3>

<p>Function which calculates for k=1, ..., K, Pr(log-HR &gt;= lhr_null | theta.hat.k = lhr_con.k)
i.e. the posterior probability the true OS log-hr exceeds the minimum unacceptable
OS log-HR given the estimate of the log-hr at analysis k equals lhr_con.k (i.e. the estimate
is equal to the stage k 'continuation threshold').
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_posterior(lhr_con, lhr_null, events)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calc_posterior_+3A_lhr_con">lhr_con</code></td>
<td>
<p>vector of length K (# number of looks at OS data) containing 'continuation' thresholds on log-HR scale</p>
</td></tr>
<tr><td><code id="calc_posterior_+3A_lhr_null">lhr_null</code></td>
<td>
<p>scalar - minumum unacceptable OS log-HR</p>
</td></tr>
<tr><td><code id="calc_posterior_+3A_events">events</code></td>
<td>
<p>vector length K - number of OS events at each look at the data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of length K - continuation thresholds expressed on posterior probability scale
</p>

<hr>
<h2 id='calc_predictive'>Title&quot;</h2><span id='topic+calc_predictive'></span>

<h3>Description</h3>

<p>Calculates the posterior predictive probability of 'ruling out' lhr_null at final OS analysis
given current estimate of OS log-HR is lhr_cont_k, for k=1, ..., K-1
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_predictive(lhr_con, events)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calc_predictive_+3A_lhr_con">lhr_con</code></td>
<td>
<p>vector of length K (# number of looks at OS data) containing 'continuation' thresholds on log-HR scale</p>
</td></tr>
<tr><td><code id="calc_predictive_+3A_events">events</code></td>
<td>
<p>vector length K - number of OS events at each look at the data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of length K-1: continuation thresholds at analyses k=1, ..., K-1 expressed on scale of
posterior predictive probability of ruling out lhr_null at final OS analysis
</p>

<hr>
<h2 id='meeting_probs'>Probabilities of meeting positivity threshold under target HR</h2><span id='topic+meeting_probs'></span>

<h3>Description</h3>

<p>Probabilities of meeting positivity threshold under target HR
</p>


<h3>Usage</h3>

<pre><code class='language-R'>meeting_probs(summary, lhr_pos, lhr_target = 1, rand_ratio = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="meeting_probs_+3A_summary">summary</code></td>
<td>
<p>DataFrame. Summary dataframe from bounds.R</p>
</td></tr>
<tr><td><code id="meeting_probs_+3A_lhr_pos">lhr_pos</code></td>
<td>
<p>List. Log HRs for positive threshold</p>
</td></tr>
<tr><td><code id="meeting_probs_+3A_lhr_target">lhr_target</code></td>
<td>
<p>Scalar. Target log HR to calculate the probability of meeting positivity thresholds</p>
</td></tr>
<tr><td><code id="meeting_probs_+3A_rand_ratio">rand_ratio</code></td>
<td>
<p>Integer. If patients are randomized k:1 between experimental intervention and control, rand_ratio should be inputted as k.
Example: if patients are randomized 1:1 between experimental and control, k=1. If patients are randomized 2:1 between experimental and control, k=2.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Array. Probabilities of meeting positivity threshold under target HR
</p>

<hr>
<h2 id='run_app'>monitOS app</h2><span id='topic+run_app'></span>

<h3>Description</h3>

<p>Runs the shiny app to guide user choice adequate settings to calculate
the positivity thresholds to monitor overall survival (OS)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_app()
</code></pre>


<h3>Value</h3>

<p>No return value, runs shiny app
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
