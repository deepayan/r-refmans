<!DOCTYPE html><html lang="en"><head><title>Help for package Cubist</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {Cubist}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#cubist.default'><p>Fit a Cubist model</p></a></li>
<li><a href='#cubistControl'><p>Various parameters that control aspects of the Cubist fit.</p></a></li>
<li><a href='#dotplot.cubist'><p>Visualization of Cubist Rules and Equations</p></a></li>
<li><a href='#exportCubistFiles'><p>Export Cubist Information To the File System</p></a></li>
<li><a href='#predict.cubist'><p>Predict method for cubist fits</p></a></li>
<li><a href='#QuinlanAttributes'><p>Convert Data to Text Format</p></a></li>
<li><a href='#summary.cubist'><p>Summarizing Cubist Fits</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Rule- And Instance-Based Regression Modeling</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.4</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Max Kuhn &lt;mxkuhn@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Regression modeling using rules with added instance-based
    corrections.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://topepo.github.io/Cubist/">https://topepo.github.io/Cubist/</a>, <a href="https://github.com/topepo/Cubist">https://github.com/topepo/Cubist</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/topepo/Cubist/issues">https://github.com/topepo/Cubist/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>lattice</td>
</tr>
<tr>
<td>Imports:</td>
<td>reshape2, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, dplyr (&ge; 0.7.4), knitr, mlbench, modeldata, rlang,
rmarkdown, rules, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Biarch:</td>
<td>true</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>pkgdown, caret, tidymodels, rules</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-07-02 01:23:50 UTC; max</td>
</tr>
<tr>
<td>Author:</td>
<td>Max Kuhn [aut, cre],
  Steve Weston [ctb],
  Chris Keefer [ctb],
  Nathan Coulter [ctb],
  Ross Quinlan [aut] (Author of imported C code),
  Rulequest Research Pty Ltd. [cph] (Copyright holder of imported C code)</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-07-02 02:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='cubist.default'>Fit a Cubist model</h2><span id='topic+cubist.default'></span><span id='topic+cubist'></span>

<h3>Description</h3>

<p>This function fits the rule-based model described in Quinlan
(1992) (aka M5) with additional corrections based on nearest
neighbors in the training set, as described in Quinlan (1993a).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Default S3 method:
cubist(x, y, committees = 1, control = cubistControl(), weights = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cubist.default_+3A_x">x</code></td>
<td>
<p>a matrix or data frame of predictor variables. Missing
data are allowed but (at this time) only numeric, character and
factor values are allowed. Must have column names.</p>
</td></tr>
<tr><td><code id="cubist.default_+3A_y">y</code></td>
<td>
<p>a numeric vector of outcome</p>
</td></tr>
<tr><td><code id="cubist.default_+3A_committees">committees</code></td>
<td>
<p>an integer: how many committee models (e.g..
boosting iterations) should be used?</p>
</td></tr>
<tr><td><code id="cubist.default_+3A_control">control</code></td>
<td>
<p>options that control details of the <code>cubist</code>
algorithm. See <code><a href="#topic+cubistControl">cubistControl()</a></code></p>
</td></tr>
<tr><td><code id="cubist.default_+3A_weights">weights</code></td>
<td>
<p>an optional vector of case weights (the same
length as <code>y</code>) for how much each instance should contribute to
the model fit. From the RuleQuest website: &quot;The relative
weight assigned to each case is its value of this attribute
divided by the average value; if the value is undefined, not
applicable, or is less than or equal to zero, the case's
relative weight is set to 1.&quot;</p>
</td></tr>
<tr><td><code id="cubist.default_+3A_...">...</code></td>
<td>
<p>optional arguments to pass (not currently used)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Cubist is a prediction-oriented regression model that combines
the ideas in Quinlan (1992) and Quinlan (1993).
</p>
<p>Although it initially creates a tree structure, it collapses
each path through the tree into a rule. A regression model is
fit for each rule based on the data subset defined by the rules.
The set of rules are pruned or possibly combined. and the
candidate variables for the linear regression models are the
predictors that were used in the parts of the rule that were
pruned away. This part of the algorithm is consistent with the
&quot;M5&quot; or Model Tree approach.
</p>
<p>Cubist generalizes this model to add boosting (when
<code>committees &gt; 1</code>) and instance based corrections (see
<code><a href="#topic+predict.cubist">predict.cubist()</a></code>). The number of instances is set at
prediction time by the user and is not needed for model
building.
</p>
<p>This function links R to the GPL version of the C code given on
the RuleQuest website.
</p>
<p>The RuleQuest code differentiates missing values from values
that are not applicable. Currently, this packages does not make
such a distinction (all values are treated as missing). This
will produce slightly different results.
</p>
<p>To tune the cubist model over the number of committees and
neighbors, the <code><a href="caret.html#topic+train">caret::train()</a></code> function in the <code>caret</code> package
has bindings to find appropriate settings of these parameters.
</p>


<h3>Value</h3>

<p>an object of class <code>cubist</code> with elements:
</p>
<table role = "presentation">
<tr><td><code>data</code>, <code>names</code>, <code>model</code></td>
<td>
<p>character strings that correspond to
their counterparts for the command-line program available from
RuleQuest</p>
</td></tr>
<tr><td><code>output</code></td>
<td>
<p>basic cubist output captured from the C code,
including the rules, their terminal models and variable usage
statistics</p>
</td></tr>
<tr><td><code>control</code></td>
<td>
<p>a list of control parameters passed in by the
user</p>
</td></tr>
<tr><td><code>composite</code>, <code>neighbors</code>, <code>committees</code></td>
<td>
<p>mirrors of the values to
these arguments that were passed in by the user</p>
</td></tr>
<tr><td><code>dims</code></td>
<td>
<p>the output if <code>dim(x)</code></p>
</td></tr>
<tr><td><code>splits</code></td>
<td>
<p>information about the variables and values used in
the rule conditions</p>
</td></tr>
<tr><td><code>call</code></td>
<td>
<p>the function call</p>
</td></tr>
<tr><td><code>coefs</code></td>
<td>
<p>a data frame of regression coefficients for each
rule within each committee</p>
</td></tr>
<tr><td><code>vars</code></td>
<td>
<p>a list with elements <code>all</code> and <code>used</code> listing the
predictors passed into the function and used by any rule or
model</p>
</td></tr>
<tr><td><code>fitted.values</code></td>
<td>
<p>a numeric vector of predictions on the
training set.</p>
</td></tr>
<tr><td><code>usage</code></td>
<td>
<p>a data frame with the percent of models where each
variable was used. See <code><a href="#topic+summary.cubist">summary.cubist()</a></code> for a discussion.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>R code by Max Kuhn, original C sources by R Quinlan and
modifications be Steve Weston
</p>


<h3>References</h3>

<p>Quinlan. Learning with continuous classes.
Proceedings of the 5th Australian Joint Conference On Artificial
Intelligence (1992) pp. 343-348
</p>
<p>Quinlan. Combining instance-based and model-based learning.
Proceedings of the Tenth International Conference on Machine
Learning (1993a) pp. 236-243
</p>
<p>Quinlan. <strong>C4.5: Programs For Machine Learning</strong> (1993b)
Morgan Kaufmann Publishers Inc. San Francisco, CA
</p>
<p>Wang and Witten. Inducing model trees for continuous classes.
Proceedings of the Ninth European Conference on Machine Learning
(1997) pp. 128-137
</p>
<p><a href="http://rulequest.com/cubist-info.html">http://rulequest.com/cubist-info.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cubistControl">cubistControl()</a></code>, <code><a href="#topic+predict.cubist">predict.cubist()</a></code>,
<code><a href="#topic+summary.cubist">summary.cubist()</a></code>, <code><a href="#topic+dotplot.cubist">dotplot.cubist()</a></code>, <code><a href="caret.html#topic+train">caret::train()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(mlbench)
data(BostonHousing)

## 1 committee, so just an M5 fit:
mod1 &lt;- cubist(x = BostonHousing[, -14], y = BostonHousing$medv)
mod1

## Now with 10 committees
mod2 &lt;- cubist(x = BostonHousing[, -14], y = BostonHousing$medv, committees = 10)
mod2

</code></pre>

<hr>
<h2 id='cubistControl'>Various parameters that control aspects of the Cubist fit.</h2><span id='topic+cubistControl'></span>

<h3>Description</h3>

<p>Most of these values are discussed at length in
<a href="http://rulequest.com/cubist-unix.html">http://rulequest.com/cubist-unix.html</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cubistControl(
  unbiased = FALSE,
  rules = 100,
  extrapolation = 100,
  sample = 0,
  seed = sample.int(4096, size = 1) - 1L,
  label = "outcome"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cubistControl_+3A_unbiased">unbiased</code></td>
<td>
<p>a logical: should unbiased rules be used?</p>
</td></tr>
<tr><td><code id="cubistControl_+3A_rules">rules</code></td>
<td>
<p>an integer (or <code>NA</code>): define an explicit limit to
the number of rules used (<code>NA</code> let's Cubist decide).</p>
</td></tr>
<tr><td><code id="cubistControl_+3A_extrapolation">extrapolation</code></td>
<td>
<p>a number between 0 and 100: since Cubist
uses linear models, predictions can be outside of the outside of
the range seen the training set. This parameter controls how
much rule predictions are adjusted to be consistent with the
training set.</p>
</td></tr>
<tr><td><code id="cubistControl_+3A_sample">sample</code></td>
<td>
<p>a number between 0 and 99.9: this is the
percentage of the data set to be randomly selected for model
building (not for out-of-bag type evaluation).</p>
</td></tr>
<tr><td><code id="cubistControl_+3A_seed">seed</code></td>
<td>
<p>an integer for the random seed (in the C code)</p>
</td></tr>
<tr><td><code id="cubistControl_+3A_label">label</code></td>
<td>
<p>a label for the outcome (when printing rules)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the options.
</p>


<h3>Author(s)</h3>

<p>Max Kuhn
</p>


<h3>References</h3>

<p>Quinlan. Learning with continuous classes.
Proceedings of the 5th Australian Joint Conference On Artificial
Intelligence (1992) pp. 343-348
</p>
<p>Quinlan. Combining instance-based and model-based learning.
Proceedings of the Tenth International Conference on Machine
Learning (1993) pp. 236-243
</p>
<p>Quinlan. <strong>C4.5: Programs For Machine Learning</strong> (1993)
Morgan Kaufmann Publishers Inc. San Francisco, CA
</p>
<p><a href="http://rulequest.com/cubist-info.html">http://rulequest.com/cubist-info.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cubist">cubist()</a></code>, <code><a href="#topic+predict.cubist">predict.cubist()</a></code>, <code><a href="#topic+summary.cubist">summary.cubist()</a></code>,
<code><a href="#topic+predict.cubist">predict.cubist()</a></code>, <code><a href="#topic+dotplot.cubist">dotplot.cubist()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
cubistControl()

</code></pre>

<hr>
<h2 id='dotplot.cubist'>Visualization of Cubist Rules and Equations</h2><span id='topic+dotplot.cubist'></span>

<h3>Description</h3>

<p>Lattice dotplots of the rule conditions or the linear model
coefficients produced by <code><a href="#topic+cubist">cubist()</a></code> objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'cubist'
dotplot(x, data = NULL, what = "splits", committee = NULL, rule = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dotplot.cubist_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+cubist">cubist()</a></code> object</p>
</td></tr>
<tr><td><code id="dotplot.cubist_+3A_data">data</code></td>
<td>
<p>not currently used (here for lattice compatibility)</p>
</td></tr>
<tr><td><code id="dotplot.cubist_+3A_what">what</code></td>
<td>
<p>either &quot;splits&quot; or &quot;coefs&quot;</p>
</td></tr>
<tr><td><code id="dotplot.cubist_+3A_committee">committee</code></td>
<td>
<p>which committees to plot</p>
</td></tr>
<tr><td><code id="dotplot.cubist_+3A_rule">rule</code></td>
<td>
<p>which rules to plot</p>
</td></tr>
<tr><td><code id="dotplot.cubist_+3A_...">...</code></td>
<td>
<p>options to pass to <code><a href="lattice.html#topic+xyplot">lattice::dotplot()</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>For the splits, a panel is created for each predictor. The
x-axis is the range of the predictor scaled to be between zero
and one and the y-axis has a line for each rule (within each
committee). Areas are colored as based on their region. For
example, if one rule has <code>var1 &lt; 10</code>, the linear for this rule
would be colored. If another rule had the complementary region
of <code>var1 &lt;= 10</code>, it would be on another line and shaded a
different color.
</p>
<p>For the coefficient plot, another dotplot is made. The layout
is the same except the the x-axis is in the original units and
has a dot if the rule used that variable in a linear model.
</p>


<h3>Value</h3>

<p>a <code><a href="lattice.html#topic+xyplot">lattice::dotplot()</a></code> object
</p>


<h3>Author(s)</h3>

<p>R code by Max Kuhn, original C sources by R Quinlan and
modifications be Steve Weston
</p>


<h3>References</h3>

<p>Quinlan. Learning with continuous classes.
Proceedings of the 5th Australian Joint Conference On Artificial
Intelligence (1992) pp. 343-348
</p>
<p>Quinlan. Combining instance-based and model-based learning.
Proceedings of the Tenth International Conference on Machine
Learning (1993) pp. 236-243
</p>
<p>Quinlan. <strong>C4.5: Programs For Machine Learning</strong> (1993)
Morgan Kaufmann Publishers Inc. San Francisco, CA
</p>
<p><a href="http://rulequest.com/cubist-info.html">http://rulequest.com/cubist-info.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cubist">cubist()</a></code>, <code><a href="#topic+cubistControl">cubistControl()</a></code>,
<code><a href="#topic+predict.cubist">predict.cubist()</a></code>, <code><a href="#topic+summary.cubist">summary.cubist()</a></code>,
<code><a href="#topic+predict.cubist">predict.cubist()</a></code>, <code><a href="lattice.html#topic+xyplot">lattice::dotplot()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(mlbench)
data(BostonHousing)

## 1 committee and no instance-based correction, so just an M5 fit:
mod1 &lt;- cubist(x = BostonHousing[, -14], y = BostonHousing$medv)
dotplot(mod1, what = "splits")
dotplot(mod1, what = "coefs")

## Now with 10 committees
mod2 &lt;- cubist(x = BostonHousing[, -14], 
               y = BostonHousing$medv, 
               committees = 10)
dotplot(mod2, scales = list(y = list(cex = .25)))
dotplot(mod2, what = "coefs", 
        between = list(x = 1, y = 1),
        scales = list(x = list(relation = "free"), 
                      y = list(cex = .25)))

</code></pre>

<hr>
<h2 id='exportCubistFiles'>Export Cubist Information To the File System</h2><span id='topic+exportCubistFiles'></span>

<h3>Description</h3>

<p>For a fitted cubist object, text files consistent with the
RuleQuest command-line version can be exported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportCubistFiles(x, neighbors = 0, path = getwd(), prefix = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="exportCubistFiles_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+cubist">cubist()</a></code> object</p>
</td></tr>
<tr><td><code id="exportCubistFiles_+3A_neighbors">neighbors</code></td>
<td>
<p>how many, if any, neighbors should be used to
correct the model predictions</p>
</td></tr>
<tr><td><code id="exportCubistFiles_+3A_path">path</code></td>
<td>
<p>the path to put the files</p>
</td></tr>
<tr><td><code id="exportCubistFiles_+3A_prefix">prefix</code></td>
<td>
<p>a prefix (or &quot;filestem&quot;) for creating files</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Using the RuleQuest specifications, <code>model</code>, <code>names</code> and <code>data</code>
files are created for use with the command-line version of the
program.
</p>


<h3>Value</h3>

<p>No value is returned. Three files are written out.
</p>


<h3>Author(s)</h3>

<p>Max Kuhn
</p>


<h3>References</h3>

<p>Quinlan. Learning with continuous classes.
Proceedings of the 5th Australian Joint Conference On Artificial
Intelligence (1992) pp. 343-348
</p>
<p>Quinlan. Combining instance-based and model-based learning.
Proceedings of the Tenth International Conference on Machine
Learning (1993) pp. 236-243
</p>
<p>Quinlan. <strong>C4.5: Programs For Machine Learning</strong> (1993)
Morgan Kaufmann Publishers Inc. San Francisco, CA
</p>
<p><a href="http://rulequest.com/cubist-info.html">http://rulequest.com/cubist-info.html</a>
</p>


<h3>See Also</h3>

<p><a href="#topic+cubistControl">cubist()</a>,
<code><a href="#topic+predict.cubist">predict.cubist()</a></code>, <code><a href="#topic+summary.cubist">summary.cubist()</a></code>,
<code><a href="#topic+predict.cubist">predict.cubist()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(mlbench)
data(BostonHousing)

mod1 &lt;- cubist(x = BostonHousing[, -14], y = BostonHousing$medv)
exportCubistFiles(mod1, neighbors = 8, path = tempdir(), prefix = "BostonHousing")


</code></pre>

<hr>
<h2 id='predict.cubist'>Predict method for cubist fits</h2><span id='topic+predict.cubist'></span>

<h3>Description</h3>

<p>Prediction using the parametric model are calculated using the
method of Quinlan (1992). If <code>neighbors</code> is greater than zero,
these predictions are adjusted by training set instances nearby
using the approach of Quinlan (1993).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'cubist'
predict(object, newdata = NULL, neighbors = 0, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict.cubist_+3A_object">object</code></td>
<td>
<p>an object of class <code>cubist</code></p>
</td></tr>
<tr><td><code id="predict.cubist_+3A_newdata">newdata</code></td>
<td>
<p>a data frame of predictors (in the same order as
the original training data). Must have column names.</p>
</td></tr>
<tr><td><code id="predict.cubist_+3A_neighbors">neighbors</code></td>
<td>
<p>an integer from 0 to 9: how many instances to
use to correct the rule-based prediction?</p>
</td></tr>
<tr><td><code id="predict.cubist_+3A_...">...</code></td>
<td>
<p>other options to pass through the function (not
currently used)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that the predictions can fail for various reasons.
For example, as shown in the examples, if the model uses a
qualitative predictor and the prediction data has a new level
of that predictor, the function will throw an error.
</p>


<h3>Value</h3>

<p>a numeric vector is returned
</p>


<h3>Author(s)</h3>

<p>R code by Max Kuhn, original C sources by R Quinlan and
modifications be Steve Weston
</p>


<h3>References</h3>

<p>Quinlan. Learning with continuous classes.
Proceedings of the 5th Australian Joint Conference On Artificial
Intelligence (1992) pp. 343-348
</p>
<p>Quinlan. Combining instance-based and model-based learning.
Proceedings of the Tenth International Conference on Machine
Learning (1993) pp. 236-243
</p>
<p>Quinlan. <strong>C4.5: Programs For Machine Learning</strong> (1993)
Morgan Kaufmann Publishers Inc. San Francisco, CA
</p>
<p><a href="http://rulequest.com/cubist-info.html">http://rulequest.com/cubist-info.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cubist">cubist()</a></code>, <code><a href="#topic+cubistControl">cubistControl()</a></code>, <code><a href="#topic+summary.cubist">summary.cubist()</a></code>,
<code><a href="#topic+predict.cubist">predict.cubist()</a></code>, <code><a href="#topic+dotplot.cubist">dotplot.cubist()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(mlbench)
data(BostonHousing)

## 1 committee and no instance-based correction, so just an M5 fit:
mod1 &lt;- cubist(x = BostonHousing[, -14], y = BostonHousing$medv)
predict(mod1, BostonHousing[1:4, -14])

## now add instances
predict(mod1, BostonHousing[1:4, -14], neighbors = 5)

# Example error
iris_test &lt;- iris
iris_test$Species &lt;- as.character(iris_test$Species)

mod &lt;- cubist(x = iris_test[1:99, 2:5],
              y = iris_test$Sepal.Length[1:99])

# predict(mod, iris_test[100:151, 2:5])
# Error:
# *** line 2 of `undefined.cases':
# bad value of 'virginica' for attribute 'Species'
</code></pre>

<hr>
<h2 id='QuinlanAttributes'>Convert Data to Text Format</h2><span id='topic+QuinlanAttributes'></span><span id='topic+QuinlanAttributes.numeric'></span><span id='topic+QuinlanAttributes.factor'></span><span id='topic+QuinlanAttributes.character'></span><span id='topic+QuinlanAttributes.ordered'></span><span id='topic+QuinlanAttributes.Date'></span><span id='topic+QuinlanAttributes.POSIXct'></span><span id='topic+QuinlanAttributes.matrix'></span><span id='topic+QuinlanAttributes.data.frame'></span><span id='topic+makeDataFile'></span><span id='topic+makeNamesFile'></span>

<h3>Description</h3>

<p>This class converts different types of data to a format
required for <a href="http://www.rulequest.com/cubist-unix.html"><code>Cubist</code></a>
and <a href="http://www.rulequest.com/see5-unix.html"><code style="white-space: pre;">&#8288;C5,0&#8288;</code></a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>QuinlanAttributes(object, ...)

## S3 method for class 'numeric'
QuinlanAttributes(object, ...)

## S3 method for class 'factor'
QuinlanAttributes(object, ...)

## S3 method for class 'character'
QuinlanAttributes(object, ...)

## S3 method for class 'ordered'
QuinlanAttributes(object, ...)

## S3 method for class 'Date'
QuinlanAttributes(object, ...)

## S3 method for class 'POSIXct'
QuinlanAttributes(object, ...)

## S3 method for class 'matrix'
QuinlanAttributes(object, ...)

## S3 method for class 'data.frame'
QuinlanAttributes(object, ...)

makeDataFile(x, y, w = NULL)

makeNamesFile(x, y, w = NULL, label = "outcome", comments = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="QuinlanAttributes_+3A_object">object</code></td>
<td>
<p>An object to translate to the format expected by
the Quinlan C code.</p>
</td></tr>
<tr><td><code id="QuinlanAttributes_+3A_x">x</code></td>
<td>
<p>A data frame or matrix or predictors</p>
</td></tr>
<tr><td><code id="QuinlanAttributes_+3A_y">y</code></td>
<td>
<p>A vector of outcomes</p>
</td></tr>
<tr><td><code id="QuinlanAttributes_+3A_w">w</code></td>
<td>
<p>A numeric vector of case weights or <code>NULL</code></p>
</td></tr>
<tr><td><code id="QuinlanAttributes_+3A_label">label</code></td>
<td>
<p>A string required by the C code as the file name</p>
</td></tr>
<tr><td><code id="QuinlanAttributes_+3A_comments">comments</code></td>
<td>
<p>A logical; should info about the call be
printed in the string?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A textual representation of the data.
</p>

<hr>
<h2 id='summary.cubist'>Summarizing Cubist Fits</h2><span id='topic+summary.cubist'></span>

<h3>Description</h3>

<p>This function echoes the output of the RuleQuest C code,
including the rules, the resulting linear models as well as the
variable usage summaries.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'cubist'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.cubist_+3A_object">object</code></td>
<td>
<p>a <code><a href="#topic+cubist">cubist()</a></code> object</p>
</td></tr>
<tr><td><code id="summary.cubist_+3A_...">...</code></td>
<td>
<p>other options (not currently used)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Cubist output contains variable usage statistics. It gives
the percentage of times where each variable was used in a
condition and/or a linear model. Note that this output will
probably be inconsistent with the rules shown above. At each
split of the tree, Cubist saves a linear model (after feature
selection) that is allowed to have terms for each variable used
in the current split or any split above it. Quinlan (1992)
discusses a smoothing algorithm where each model prediction is a
linear combination of the parent and child model along the tree.
As such, the final prediction is a function of all the linear
models from the initial node to the terminal node. The
percentages shown in the Cubist output reflects all the models
involved in prediction (as opposed to the terminal models shown
in the output).
</p>


<h3>Value</h3>

<p>an object of class <code>summary.cubist</code> with elements
</p>
<table role = "presentation">
<tr><td><code>output</code></td>
<td>
<p>a text string of the output</p>
</td></tr>
<tr><td><code>call</code></td>
<td>
<p>the original call to <code><a href="#topic+cubist">cubist()</a></code></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>R code by Max Kuhn, original C sources by R Quinlan and
modifications be Steve Weston
</p>


<h3>References</h3>

<p>Quinlan. Learning with continuous classes.
Proceedings of the 5th Australian Joint Conference On Artificial
Intelligence (1992) pp. 343-348
</p>
<p>Quinlan. Combining instance-based and model-based learning.
Proceedings of the Tenth International Conference on Machine
Learning (1993) pp. 236-243
</p>
<p>Quinlan. <strong>C4.5: Programs For Machine Learning</strong> (1993)
Morgan Kaufmann Publishers Inc. San Francisco, CA
</p>
<p><a href="http://rulequest.com/cubist-info.html">http://rulequest.com/cubist-info.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cubist">cubist()</a></code>, <code><a href="#topic+cubistControl">cubistControl()</a></code>, <code><a href="#topic+predict.cubist">predict.cubist()</a></code>,
<code><a href="#topic+dotplot.cubist">dotplot.cubist()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(mlbench)
data(BostonHousing)

## 1 committee and no instance-based correction, so just an M5 fit:
mod1 &lt;- cubist(x = BostonHousing[, -14], y = BostonHousing$medv)
summary(mod1)

## example output:

## Cubist [Release 2.07 GPL Edition]  Sun Apr 10 17:36:56 2011
## ---------------------------------
##
##     Target attribute `outcome'
##
## Read 506 cases (14 attributes) from undefined.data
##
## Model:
##
##   Rule 1: [101 cases, mean 13.84, range 5 to 27.5, est err 1.98]
##
##     if
##     nox &gt; 0.668
##     then
##     outcome = -1.11 + 2.93 dis + 21.4 nox - 0.33 lstat + 0.008 b
##               - 0.13 ptratio - 0.02 crim - 0.003 age + 0.1 rm
##
##   Rule 2: [203 cases, mean 19.42, range 7 to 31, est err 2.10]
##
##     if
##     nox &lt;= 0.668
##     lstat &gt; 9.59
##     then
##     outcome = 23.57 + 3.1 rm - 0.81 dis - 0.71 ptratio - 0.048 age
##               - 0.15 lstat + 0.01 b - 0.0041 tax - 5.2 nox + 0.05 crim
##               + 0.02 rad
##
##   Rule 3: [43 cases, mean 24.00, range 11.9 to 50, est err 2.56]
##
##     if
##     rm &lt;= 6.226
##     lstat &lt;= 9.59
##     then
##     outcome = 1.18 + 3.83 crim + 4.3 rm - 0.06 age - 0.11 lstat - 0.003 tax
##               - 0.09 dis - 0.08 ptratio
##
##   Rule 4: [163 cases, mean 31.46, range 16.5 to 50, est err 2.78]
##
##     if
##     rm &gt; 6.226
##     lstat &lt;= 9.59
##     then
##     outcome = -4.71 + 2.22 crim + 9.2 rm - 0.83 lstat - 0.0182 tax
##               - 0.72 ptratio - 0.71 dis - 0.04 age + 0.03 rad - 1.7 nox
##               + 0.008 zn
##
##
## Evaluation on training data (506 cases):
##
##     Average  |error|               2.07
##     Relative |error|               0.31
##     Correlation coefficient        0.94
##
##
##     Attribute usage:
##       Conds  Model
##
##        80%   100%    lstat
##        60%    92%    nox
##        40%   100%    rm
##              100%    crim
##              100%    age
##              100%    dis
##              100%    ptratio
##               80%    tax
##               72%    rad
##               60%    b
##               32%    zn
##
##
## Time: 0.0 secs


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
