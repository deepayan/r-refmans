<!DOCTYPE html><html><head><title>Help for package MassWateR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {MassWateR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#anlzMWRdate'><p>Analyze trends by date in results file</p></a></li>
<li><a href='#anlzMWRmap'><p>Analyze results with maps</p></a></li>
<li><a href='#anlzMWRoutlier'><p>Analyze outliers in results file</p></a></li>
<li><a href='#anlzMWRoutlierall'><p>Analyze outliers in results file for all parameters</p></a></li>
<li><a href='#anlzMWRseason'><p>Analyze seasonal trends in results file</p></a></li>
<li><a href='#anlzMWRsite'><p>Analyze data by sites in results file</p></a></li>
<li><a href='#checkMWRacc'><p>Check data quality objective accuracy data</p></a></li>
<li><a href='#checkMWRfrecom'><p>Check data quality objective frequency and completeness data</p></a></li>
<li><a href='#checkMWRresults'><p>Check water quality monitoring results</p></a></li>
<li><a href='#checkMWRsites'><p>Check site metadata file</p></a></li>
<li><a href='#checkMWRwqx'><p>Check water quality exchange (wqx) metadata input</p></a></li>
<li><a href='#formMWRacc'><p>Format data quality objective accuracy data</p></a></li>
<li><a href='#formMWRfrecom'><p>Format data quality objective frequency and completeness data</p></a></li>
<li><a href='#formMWRresults'><p>Format water quality monitoring results</p></a></li>
<li><a href='#formMWRwqx'><p>Format WQX metadata input</p></a></li>
<li><a href='#paramsMWR'><p>Master parameter list and units for Characteristic Name column in results data</p></a></li>
<li><a href='#qcMWRacc'><p>Run quality control accuracy checks for water quality monitoring results</p></a></li>
<li><a href='#qcMWRcom'><p>Run quality control completeness checks for water quality monitoring results</p></a></li>
<li><a href='#qcMWRfre'><p>Run quality control frequency checks for water quality monitoring results</p></a></li>
<li><a href='#qcMWRreview'><p>Create the quality control review report</p></a></li>
<li><a href='#readMWRacc'><p>Read data quality objectives for accuracy from an external file</p></a></li>
<li><a href='#readMWRfrecom'><p>Read data quality objectives for frequency and completeness from an external file</p></a></li>
<li><a href='#readMWRresults'><p>Read water quality monitoring results from an external file</p></a></li>
<li><a href='#readMWRresultsview'><p>Create summary spreadsheet of the water quality monitoring results</p></a></li>
<li><a href='#readMWRsites'><p>Read site metadata from an external file</p></a></li>
<li><a href='#readMWRwqx'><p>Read water quality exchange (wqx) metadata input from an external file</p></a></li>
<li><a href='#tabMWRacc'><p>Create a formatted table of quality control accuracy checks</p></a></li>
<li><a href='#tabMWRcom'><p>Create a formatted table of quality control completeness checks</p></a></li>
<li><a href='#tabMWRfre'><p>Create a formatted table of quality control frequency checks</p></a></li>
<li><a href='#tabMWRwqx'><p>Create and save tables in a single workbook for WQX upload</p></a></li>
<li><a href='#thresholdMWR'><p>Master thresholds list for analysis of results data</p></a></li>
<li><a href='#utilMWRfilter'><p>Filter results data by parameter, date range, site, result attributes, and/or location group</p></a></li>
<li><a href='#utilMWRfiltersurface'><p>Filter results data to surface measurements</p></a></li>
<li><a href='#utilMWRfre'><p>Prep results data for frequency checks</p></a></li>
<li><a href='#utilMWRhttpgrace'><p>Load external file from remote source, fail gracefully</p></a></li>
<li><a href='#utilMWRinput'><p>Utility function to import data as paths or data frames</p></a></li>
<li><a href='#utilMWRinputcheck'><p>Check if required inputs are present for a function</p></a></li>
<li><a href='#utilMWRlimits'><p>Fill results data as BDL or AQL with appropriate values</p></a></li>
<li><a href='#utilMWRoutlier'><p>Identify outliers in a numeric vector</p></a></li>
<li><a href='#utilMWRsumfun'><p>Verify summary function</p></a></li>
<li><a href='#utilMWRsummary'><p>Summarize a results data frame by a grouping variable</p></a></li>
<li><a href='#utilMWRthresh'><p>Get threshold lines from thresholdMWR</p></a></li>
<li><a href='#utilMWRtitle'><p>Format the title for analyze functions</p></a></li>
<li><a href='#utilMWRvaluerange'><p>Check if incomplete range in <code>Value Range</code> column</p></a></li>
<li><a href='#utilMWRyscale'><p>Get logical value for y axis scaling</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Quality Control and Analysis of Massachusetts Water Quality Data</td>
</tr>
<tr>
<td>Version:</td>
<td>2.1.4</td>
</tr>
<tr>
<td>Description:</td>
<td>Methods for quality control and exploratory analysis of surface 
  water quality data collected in Massachusetts, USA.  Functions are developed 
  to facilitate data formatting for the Water Quality Exchange Network 
  <a href="https://www.epa.gov/waterdata/water-quality-data-upload-wqx">https://www.epa.gov/waterdata/water-quality-data-upload-wqx</a> and reporting 
  of data quality objectives to state agencies. Quality control methods are 
  from Massachusetts Department of Environmental Protection (2020) 
  <a href="https://www.mass.gov/orgs/massachusetts-department-of-environmental-protection">https://www.mass.gov/orgs/massachusetts-department-of-environmental-protection</a>.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>Imports:</td>
<td>curl, dplyr, flextable, ggplot2, ggrepel, ggspatial, httr,
lubridate, prettymapr, raster, RColorBrewer, rmarkdown, readxl,
sf, tidyr, tibble, units, writexl</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://creativecommons.org/publicdomain/zero/1.0/legalcode">CC0</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>URL:</td>
<td>&lt;<a href="https://github.com/massbays-tech/MassWateR&amp;gt;">https://github.com/massbays-tech/MassWateR&gt;</a>,
&lt;<a href="https://massbays-tech.github.io/MassWateR/&amp;gt;">https://massbays-tech.github.io/MassWateR/&gt;</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/massbays-tech/MassWateR/issues">https://github.com/massbays-tech/MassWateR/issues</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>LazyDataCompression:</td>
<td>xz</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, knitr, patchwork, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-19 14:21:22 UTC; mbeck</td>
</tr>
<tr>
<td>Author:</td>
<td>Marcus Beck <a href="https://orcid.org/0000-0002-4996-0059"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Jill Carr [aut],
  Ben Wetherill <a href="https://orcid.org/0000-0002-8791-4256"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Marcus Beck &lt;mbeck@tbep.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-19 15:20:07 UTC</td>
</tr>
</table>
<hr>
<h2 id='anlzMWRdate'>Analyze trends by date in results file</h2><span id='topic+anlzMWRdate'></span>

<h3>Description</h3>

<p>Analyze trends by date in results file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>anlzMWRdate(
  res = NULL,
  param,
  acc = NULL,
  sit = NULL,
  fset = NULL,
  thresh,
  group = c("site", "locgroup", "all"),
  threshlab = NULL,
  threshcol = "tan",
  site = NULL,
  resultatt = NULL,
  locgroup = NULL,
  dtrng = NULL,
  ptsize = 2,
  repel = FALSE,
  labsize = 3,
  expand = c(0.05, 0.1),
  confint = FALSE,
  palcol = "Set2",
  yscl = "auto",
  sumfun = yscl,
  colleg = FALSE,
  ttlsize = 1.2,
  runchk = TRUE,
  warn = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="anlzMWRdate_+3A_res">res</code></td>
<td>
<p>character string of path to the results file or <code>data.frame</code> for results returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code></p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_param">param</code></td>
<td>
<p>character string of the parameter to plot, must conform to entries in the <code>"Simple Parameter"</code> column of <code><a href="#topic+paramsMWR">paramsMWR</a></code></p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_acc">acc</code></td>
<td>
<p>character string of path to the data quality objectives file for accuracy or <code>data.frame</code> returned by <code><a href="#topic+readMWRacc">readMWRacc</a></code></p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_sit">sit</code></td>
<td>
<p>optional character string of path to the site metadata file or <code>data.frame</code> of site metadata returned by <code><a href="#topic+readMWRsites">readMWRsites</a></code>, required if <code>locgroup</code> is not <code>NULL</code></p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_fset">fset</code></td>
<td>
<p>optional list of inputs with elements named <code>res</code>, <code>acc</code>, <code>frecom</code>, <code>sit</code>, or <code>wqx</code> overrides the other arguments</p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_thresh">thresh</code></td>
<td>
<p>character indicating if relevant freshwater or marine threshold lines are included, one of <code>"fresh"</code>, <code>"marine"</code>, or <code>"none"</code>, or a single numeric value to override the values included with the package</p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_group">group</code></td>
<td>
<p>character indicating whether the results are grouped by site (default), combined across location groups, or combined across sites, see details</p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_threshlab">threshlab</code></td>
<td>
<p>optional character string indicating legend label for the threshold, required only if <code>thresh</code> is numeric</p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_threshcol">threshcol</code></td>
<td>
<p>character indicating color of threshold lines if available</p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_site">site</code></td>
<td>
<p>character string of sites to include, default all</p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_resultatt">resultatt</code></td>
<td>
<p>character string of result attributes to plot, default all</p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_locgroup">locgroup</code></td>
<td>
<p>character string of location groups to plot from the <code>"Location Group"</code> column in the site metadata file, optional and only if <code>sit</code> is not <code>NULL</code></p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_dtrng">dtrng</code></td>
<td>
<p>character string of length two for the date ranges as YYYY-MM-DD, default all</p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_ptsize">ptsize</code></td>
<td>
<p>numeric indicating size of the points</p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_repel">repel</code></td>
<td>
<p>logical indicating if overlapping site labels are offset, default <code>FALSE</code></p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_labsize">labsize</code></td>
<td>
<p>numeric indicating font size for the site labels, only if <code>group = "site"</code> or <code>group = "locgroup"</code></p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_expand">expand</code></td>
<td>
<p>numeric of length two indicating expansion proportions on the x-axis to include labels outside of the plot range if <code>repel = F</code> and <code>group = "site"</code> or <code>group = "locgroup"</code></p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_confint">confint</code></td>
<td>
<p>logical indicating if confidence intervals are shown, only applies if data are summarized using <code>group</code> as <code>"locgroup"</code> or <code>"all"</code></p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_palcol">palcol</code></td>
<td>
<p>character string indicating the color palette for points and lines from <a href="https://r-graph-gallery.com/38-rcolorbrewers-palettes.html">RColorBrewer</a>, see details</p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_yscl">yscl</code></td>
<td>
<p>character indicating one of <code>"auto"</code> (default), <code>"log"</code>, or <code>"linear"</code>, see details</p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_sumfun">sumfun</code></td>
<td>
<p>character indicating one of <code>"auto"</code>, <code>"mean"</code>, <code>"geomean"</code>, <code>"median"</code>, <code>"min"</code>, or <code>"max"</code>, see details</p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_colleg">colleg</code></td>
<td>
<p>logical indicating if a color legend for sites or location groups is included if <code>group = "site"</code> or <code>group = "locgroup"</code></p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_ttlsize">ttlsize</code></td>
<td>
<p>numeric value indicating font size of the title relative to other text in the plot</p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_runchk">runchk</code></td>
<td>
<p>logical to run data checks with <code><a href="#topic+checkMWRresults">checkMWRresults</a></code> or <code><a href="#topic+checkMWRacc">checkMWRacc</a></code>, applies only if <code>res</code> or <code>acc</code> are file paths</p>
</td></tr>
<tr><td><code id="anlzMWRdate_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Results are shown for the selected parameter as continuous line plots over time. Specifying <code>group = "site"</code> plot a separate line for each site.  Specifying <code>group = "locgroup"</code> will summarize results across sites in the <code>locgroup</code> argument based on the value passed to <code>sumfun</code> or <code>yscl</code> if no value is passed to <code>sumfun</code>.  The site metadata file must be passed to the <code>`sit`</code> argument to use this option.  Specifying <code>group = "all"</code> will summarize results across sites for each date based on the value passed to <code>sumfun</code> or <code>yscl</code> if no value is passed to <code>sumfun</code>. Summarized results will include confidence intervals if <code>confint = TRUE</code> and they can be calculated (i.e., more than one point is used in the summary and data are summarized using <code>group</code> as <code>"locgroup"</code> or <code>"all"</code>).
</p>
<p>Threshold lines applicable to marine or freshwater environments can be included in the plot by using the <code>thresh</code> argument.  These thresholds are specific to each parameter and can be found in the <code><a href="#topic+thresholdMWR">thresholdMWR</a></code> file.  Threshold lines are plotted only for those parameters with entries in <code><a href="#topic+thresholdMWR">thresholdMWR</a></code> and only if the value in <code>`Result Unit`</code> matches those in <code><a href="#topic+thresholdMWR">thresholdMWR</a></code>. The threshold lines can be suppressed by setting <code>thresh = 'none'</code>. A user-supplied numeric value can also be used for the <code>thresh</code> argument to override the default values. An appropriate label must also be supplied to <code>threshlab</code> if <code>thresh</code> is numeric.
</p>
<p>Any acceptable color palette for from <a href="https://r-graph-gallery.com/38-rcolorbrewers-palettes.html">RColorBrewer</a> for the points and lines can be used for <code>palcol</code>, which is passed to the <code>palette</code> argument in <code><a href="ggplot2.html#topic+scale_color_brewer">scale_color_brewer</a></code>. These could include any of the qualitative color palettes, e.g., <code>"Set1"</code>, <code>"Set2"</code>, etc.  The continuous and diverging palettes will also work, but may return color scales for points and lines that are difficult to distinguish.  The <code>palcol</code> argument does not apply if <code>group = "all"</code>.
</p>
<p>The y-axis scaling as arithmetic (linear) or logarithmic can be set with the <code>yscl</code> argument.  If <code>yscl = "auto"</code> (default), the scaling is  determined automatically from the data quality objective file for accuracy, i.e., parameters with &quot;log&quot; in any of the columns are plotted on log10-scale, otherwise arithmetic. Setting <code>yscl = "linear"</code> or <code>yscl = "log"</code> will set the axis as linear or log10-scale, respectively, regardless of the information in the data quality objective file for accuracy.
</p>
<p>Similarly, the data will be summarized appropriately for <code>group</code> (only applies if <code>group</code> is not site) based on the value passed to <code>sumfun</code>.  The default if no value is provided to <code>sumfun</code> is to use the appropriate summary based on the value provided to <code>yscl</code>.  If <code>yscl = "auto"</code> (default), then <code>sumfun = "auto"</code>, and the mean or geometric mean is used for the summary based on information in the data quality objective file for accuracy. Using <code>yscl = "linear"</code> or <code>yscl = "log"</code> will default to the mean or geometric mean summary if no value is provided to <code>sumfun</code>.  Any other appropriate value passed to <code>sumfun</code> will override the value passed to <code>yscl</code>.  Valid summary functions for <code>sumfun</code> include <code>"auto"</code>, <code>"mean"</code>, <code>"geomean"</code>, <code>"median"</code>, <code>"min"</code>, or <code>"max"</code>).
</p>
<p>Any entries in <code>resdat</code> in the <code>"Result Value"</code> column as <code>"BDL"</code> or <code>"AQL"</code> are replaced with appropriate values in the <code>"Quantitation Limit"</code> column, if present, otherwise the <code>"MDL"</code> or <code>"UQL"</code> columns from the data quality objectives file for accuracy are used.  Values as <code>"BDL"</code> use one half of the appropriate limit.
</p>


<h3>Value</h3>

<p>A <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code> object that can be further modified.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># results data path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# results data
resdat &lt;- readMWRresults(respth)

# accuracy path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', 
     package = 'MassWateR')

# accuracy data
accdat &lt;- readMWRacc(accpth)

# site data path
sitpth &lt;- system.file('extdata/ExampleSites.xlsx', package = 'MassWateR')

# site data
sitdat &lt;- readMWRsites(sitpth)

# select sites
anlzMWRdate(res = resdat, param = 'DO', acc = accdat, group = 'site', thresh = 'fresh',
     site = c("ABT-026", "ABT-077"))
</code></pre>

<hr>
<h2 id='anlzMWRmap'>Analyze results with maps</h2><span id='topic+anlzMWRmap'></span>

<h3>Description</h3>

<p>Analyze results with maps
</p>


<h3>Usage</h3>

<pre><code class='language-R'>anlzMWRmap(
  res = NULL,
  param,
  acc = NULL,
  sit = NULL,
  fset = NULL,
  site = NULL,
  resultatt = NULL,
  locgroup = NULL,
  dtrng = NULL,
  ptsize = 4,
  repel = TRUE,
  labsize = 3,
  palcol = "Greens",
  palcolrev = FALSE,
  sumfun = "auto",
  crs = 4326,
  zoom = 11,
  addwater = "medium",
  watercol = "lightblue",
  maptype = NULL,
  buffdist = 2,
  scaledist = "km",
  northloc = "tl",
  scaleloc = "br",
  latlon = TRUE,
  ttlsize = 1.2,
  runchk = TRUE,
  warn = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="anlzMWRmap_+3A_res">res</code></td>
<td>
<p>character string of path to the results file or <code>data.frame</code> for results returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code></p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_param">param</code></td>
<td>
<p>character string of the parameter to plot, must conform to entries in the <code>"Simple Parameter"</code> column of <code><a href="#topic+paramsMWR">paramsMWR</a></code></p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_acc">acc</code></td>
<td>
<p>character string of path to the data quality objectives file for accuracy or <code>data.frame</code> returned by <code><a href="#topic+readMWRacc">readMWRacc</a></code></p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_sit">sit</code></td>
<td>
<p>character string of path to the site metadata file or <code>data.frame</code> of site metadata returned by <code><a href="#topic+readMWRsites">readMWRsites</a></code></p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_fset">fset</code></td>
<td>
<p>optional list of inputs with elements named <code>res</code>, <code>acc</code>, <code>frecom</code>, <code>sit</code>, or <code>wqx</code> overrides the other arguments</p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_site">site</code></td>
<td>
<p>character string of sites to include, default all</p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_resultatt">resultatt</code></td>
<td>
<p>character string of result attributes to plot, default all</p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_locgroup">locgroup</code></td>
<td>
<p>character string of location groups to plot from the <code>"Location Group"</code> column in the site metadata file, default all</p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_dtrng">dtrng</code></td>
<td>
<p>character string of length two for the date ranges as YYYY-MM-DD, default all</p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_ptsize">ptsize</code></td>
<td>
<p>numeric for size of the points, use a negative value to omit the points</p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_repel">repel</code></td>
<td>
<p>logical indicating if overlapping site labels are offset</p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_labsize">labsize</code></td>
<td>
<p>numeric for size of the site labels</p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_palcol">palcol</code></td>
<td>
<p>character string indicating the color palette to be used from <a href="https://r-graph-gallery.com/38-rcolorbrewers-palettes.html">RColorBrewer</a>, see details</p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_palcolrev">palcolrev</code></td>
<td>
<p>logical indicating if color palette in <code>palcol</code> is reversed</p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_sumfun">sumfun</code></td>
<td>
<p>character indicating one of <code>"auto"</code> (default), <code>"mean"</code>, <code>"geomean"</code>, <code>"median"</code>, <code>"min"</code>, or <code>"max"</code>, see details</p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_crs">crs</code></td>
<td>
<p>numeric as a four-digit EPSG number for the coordinate reference system, see details</p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_zoom">zoom</code></td>
<td>
<p>numeric indicating resolution of the base map, see details</p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_addwater">addwater</code></td>
<td>
<p>character string as <code>"low"</code>, <code>"medium"</code> (default), <code>"high"</code>, or <code>NULL</code> (to suppress) to include water features with varying detail from the National Hydrography dataset, see details</p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_watercol">watercol</code></td>
<td>
<p>character string of color for water objects if <code>addwater</code> is not <code>NULL</code></p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_maptype">maptype</code></td>
<td>
<p>character string as <code>"cartolight"</code>, <code>"cartodark"</code>, <code>"osm"</code>, <code>"hotstyle"</code>, or <code>NULL</code> (to suppress, default) indicating the basemap type, see details</p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_buffdist">buffdist</code></td>
<td>
<p>numeric for buffer around the bounding box for the selected sites in kilometers, see details</p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_scaledist">scaledist</code></td>
<td>
<p>character string indicating distance unit for the scale bar, <code>"km"</code> or <code>"mi"</code></p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_northloc">northloc</code></td>
<td>
<p>character string indicating location of the north arrow, see details</p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_scaleloc">scaleloc</code></td>
<td>
<p>character string indicating location of the scale bar, see details</p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_latlon">latlon</code></td>
<td>
<p>logical to include latitude and longitude labels on the plot, default <code>TRUE</code></p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_ttlsize">ttlsize</code></td>
<td>
<p>numeric value indicating font size of the title relative to other text in the plot</p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_runchk">runchk</code></td>
<td>
<p>logical to run data checks with <code><a href="#topic+checkMWRresults">checkMWRresults</a></code>, <code><a href="#topic+checkMWRacc">checkMWRacc</a></code>, or <code><a href="#topic+checkMWRsites">checkMWRsites</a></code>, applies only if <code>res</code>, <code>acc</code>, or <code>sit</code> are file paths</p>
</td></tr>
<tr><td><code id="anlzMWRmap_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function creates a map of summarized results for a selected parameter at each monitoring site.  By default, all dates for the parameter are averaged. Options to filter by site, date range, and result attribute are provided.  Only sites with spatial information in the site metadata file are plotted and a warning is returned for those that do not have this information. The site labels are also plotted next to each point.  The labels can be suppressed by setting <code>labsize = NULL</code>.
</p>
<p>Any acceptable color palette from <a href="https://r-graph-gallery.com/38-rcolorbrewers-palettes.html">RColorBrewer</a> can be used for <code>palcol</code>, which is passed to the <code>palette</code> argument in <code><a href="ggplot2.html#topic+scale_fill_distiller">scale_fill_distiller</a></code>. These could include any of the sequential color palettes, e.g., <code>"Greens"</code>, <code>"Blues"</code>, etc.  The diverging and qualitative palettes will also work, but may return uninterpretable color scales. The palette can be reversed by setting <code>palcolrev = TRUE</code>.
</p>
<p>The default value for <code>crs</code> is EPSG 4326 for the WGS 84 projection in decimal degrees.  The <code>crs</code> argument is passed to <code><a href="sf.html#topic+st_as_sf">st_as_sf</a></code> and any acceptable CRS appropriate for the data can be used.
</p>
<p>The results shown on the map represent the parameter summary for each site within the date range provided by <code>dtrng</code>.  If <code>sumfun = "auto"</code> (default), the mean is used where the distribution is determined automatically from the data quality objective file for accuracy, i.e., parameters with &quot;log&quot; in any of the columns are summarized with the geometric mean, otherwise arithmetic. Any other valid summary function will be applied if passed to <code>sumfun</code> (<code>"mean"</code>, <code>"geomean"</code>, <code>"median"</code>, <code>"min"</code>, <code>"max"</code>), regardless of the information in the data quality objective file for accuracy.
</p>
<p>Using <code>addwater = "medium"</code> (default) will include lines and polygons of natural water bodies defined using the National Hydrography Dataset (NHD). The level of detail can be changed to low or high using <code>addwater = "low"</code> or <code>addwater = "high"</code>, respectively.  Use <code>addwater = NULL</code> to not show any water features.
</p>
<p>A base map can be plotted using the <code>maptype</code> argument and is obtained from the <code><a href="ggspatial.html#topic+annotation_map_tile">annotation_map_tile</a></code> function of ggspatial.  The <code>zoom</code> value specifies the resolution of the map.  Use higher values to download map tiles with greater resolution, although this increases the download time.  The <code>maptype</code> argument describes the type of base map to download. Acceptable options include <code>"cartolight"</code>, <code>"cartodark"</code>, <code>"osm"</code>, or <code>"hotstyle"</code>. Use <code>maptype = NULL</code> to suppress the base map.
</p>
<p>The area around the summarized points can be increased or decreased using the <code>buffdist</code> argument.  This creates a buffered area around the bounding box for the points, where the units are kilometers.
</p>
<p>A north arrow and scale bar are also placed on the map as defined by the <code>northloc</code> and <code>scaleloc</code> arguments.  The placement for both can be chosen as <code>"tl"</code>, <code>"tr"</code>, <code>"bl"</code>, or <code>"br"</code> for top-left, top-right, bottom-left, or bottom-right respectively.  Setting either of the arguments to <code>NULL</code> will suppress the placement on the map.
</p>


<h3>Value</h3>

<p>A <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code> object that can be further modified.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># results data path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# results data
resdat &lt;- readMWRresults(respth)

# accuracy path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', package = 'MassWateR')

# accuracy data
accdat &lt;- readMWRacc(accpth)

# site data path
sitpth &lt;- system.file('extdata/ExampleSites.xlsx', package = 'MassWateR')

# site data
sitdat &lt;- readMWRsites(sitpth)


# map with NHD water bodies
anlzMWRmap(res = resdat, param = 'DO', acc = accdat, sit = sitdat, addwater = 'medium')

</code></pre>

<hr>
<h2 id='anlzMWRoutlier'>Analyze outliers in results file</h2><span id='topic+anlzMWRoutlier'></span>

<h3>Description</h3>

<p>Analyze outliers in results file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>anlzMWRoutlier(
  res = NULL,
  param,
  acc = NULL,
  fset = NULL,
  type = c("box", "jitterbox", "jitter"),
  group,
  dtrng = NULL,
  repel = TRUE,
  outliers = FALSE,
  labsize = 3,
  fill = "lightgrey",
  alpha = 0.8,
  width = 0.8,
  yscl = "auto",
  ttlsize = 1.2,
  runchk = TRUE,
  warn = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="anlzMWRoutlier_+3A_res">res</code></td>
<td>
<p>character string of path to the results file or <code>data.frame</code> for results returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code></p>
</td></tr>
<tr><td><code id="anlzMWRoutlier_+3A_param">param</code></td>
<td>
<p>character string of the parameter to plot, must conform to entries in the <code>"Simple Parameter"</code> column of <code><a href="#topic+paramsMWR">paramsMWR</a></code></p>
</td></tr>
<tr><td><code id="anlzMWRoutlier_+3A_acc">acc</code></td>
<td>
<p>character string of path to the data quality objectives file for accuracy or <code>data.frame</code> returned by <code><a href="#topic+readMWRacc">readMWRacc</a></code></p>
</td></tr>
<tr><td><code id="anlzMWRoutlier_+3A_fset">fset</code></td>
<td>
<p>optional list of inputs with elements named <code>res</code>, <code>acc</code>, <code>frecom</code>, <code>sit</code>, or <code>wqx</code> overrides the other arguments</p>
</td></tr>
<tr><td><code id="anlzMWRoutlier_+3A_type">type</code></td>
<td>
<p>character indicating <code>"box"</code>, <code>"jitterbox"</code>, or <code>"jitter"</code>, see details</p>
</td></tr>
<tr><td><code id="anlzMWRoutlier_+3A_group">group</code></td>
<td>
<p>character indicating whether the summaries are grouped by month, site, or week of year</p>
</td></tr>
<tr><td><code id="anlzMWRoutlier_+3A_dtrng">dtrng</code></td>
<td>
<p>character string of length two for the date ranges as YYYY-MM-DD, optional</p>
</td></tr>
<tr><td><code id="anlzMWRoutlier_+3A_repel">repel</code></td>
<td>
<p>logical indicating if overlapping outlier labels are offset</p>
</td></tr>
<tr><td><code id="anlzMWRoutlier_+3A_outliers">outliers</code></td>
<td>
<p>logical indicating if outliers are returned to the console instead of plotting</p>
</td></tr>
<tr><td><code id="anlzMWRoutlier_+3A_labsize">labsize</code></td>
<td>
<p>numeric indicating font size for the outlier labels</p>
</td></tr>
<tr><td><code id="anlzMWRoutlier_+3A_fill">fill</code></td>
<td>
<p>numeric indicating fill color for boxplots</p>
</td></tr>
<tr><td><code id="anlzMWRoutlier_+3A_alpha">alpha</code></td>
<td>
<p>numeric from 0 to 1 indicating transparency of fill color</p>
</td></tr>
<tr><td><code id="anlzMWRoutlier_+3A_width">width</code></td>
<td>
<p>numeric for width of boxplots</p>
</td></tr>
<tr><td><code id="anlzMWRoutlier_+3A_yscl">yscl</code></td>
<td>
<p>character indicating one of <code>"auto"</code> (default), <code>"log"</code>, or <code>"linear"</code>, see details</p>
</td></tr>
<tr><td><code id="anlzMWRoutlier_+3A_ttlsize">ttlsize</code></td>
<td>
<p>numeric value indicating font size of the title relative to other text in the plot</p>
</td></tr>
<tr><td><code id="anlzMWRoutlier_+3A_runchk">runchk</code></td>
<td>
<p>logical to run data checks with <code><a href="#topic+checkMWRresults">checkMWRresults</a></code> or <code><a href="#topic+checkMWRacc">checkMWRacc</a></code>, applies only if <code>res</code> or <code>acc</code> are file paths</p>
</td></tr>
<tr><td><code id="anlzMWRoutlier_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Outliers are defined following the standard <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code> definition as 1.5 times the inter-quartile range of each boxplot.  The data frame returned if <code>outliers = TRUE</code> may vary based on the boxplot groupings defined by <code>group</code>.
</p>
<p>Specifying <code>type = "box"</code> (default) will produce standard boxplots.  Specifying <code>type = "jitterbox"</code> will produce boxplots with non-outlier observations jittered on top.  Specifying <code>type = "jitter"</code> will suppress the boxplots and show only the jittered points and the outliers.
</p>
<p>Specifying <code>group = "week"</code> will group the samples by week of year using an integer specifying the week.  Note that there can be no common month/day indicating the start of the week between years and an integer is the only way to compare summaries if the results data span multiple years.
</p>
<p>The y-axis scaling as arithmetic (linear) or logarithmic can be set with the <code>yscl</code> argument.  If <code>yscl = "auto"</code> (default), the scaling is  determined automatically from the data quality objective file for accuracy, i.e., parameters with &quot;log&quot; in any of the columns are plotted on log10-scale, otherwise arithmetic. Setting <code>yscl = "linear"</code> or <code>yscl = "log"</code> will set the axis as linear or log10-scale, respectively, regardless of the information in the data quality objective file for accuracy.
</p>
<p>Any entries in <code>resdat</code> in the <code>"Result Value"</code> column as <code>"BDL"</code> or <code>"AQL"</code> are replaced with appropriate values in the <code>"Quantitation Limit"</code> column, if present, otherwise the <code>"MDL"</code> or <code>"UQL"</code> columns from the data quality objectives file for accuracy are used.  Values as <code>"BDL"</code> use one half of the appropriate limit.
</p>


<h3>Value</h3>

<p>A <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code> object that can be further modified if <code>outliers = FALSE</code>, otherwise a data frame of outliers is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># results data path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# results data
resdat &lt;- readMWRresults(respth)

# accuracy path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', 
     package = 'MassWateR')

# accuracy data
accdat &lt;- readMWRacc(accpth)

# outliers by month
anlzMWRoutlier(res = resdat, param = 'DO', acc = accdat, group = 'month')

# outliers by site
anlzMWRoutlier(res = resdat, param = 'DO', acc = accdat, group = 'site')

# outliers by site, May through July 2021 only
anlzMWRoutlier(res = resdat, param = 'DO', acc = accdat, group = 'site', 
     dtrng = c('2022-05-01', '2022-07-31'))

# outliers by month, type as jitterbox
anlzMWRoutlier(res = resdat, param = 'DO', acc = accdat, group = 'month', type = 'jitterbox')

# outliers by month, type as jitter
anlzMWRoutlier(res = resdat, param = 'DO', acc = accdat, group = 'month', type = 'jitter')

# data frame output
anlzMWRoutlier(res = resdat, param = 'DO', acc = accdat, group = 'month', outliers = TRUE)

</code></pre>

<hr>
<h2 id='anlzMWRoutlierall'>Analyze outliers in results file for all parameters</h2><span id='topic+anlzMWRoutlierall'></span>

<h3>Description</h3>

<p>Analyze outliers in results file for all parameters
</p>


<h3>Usage</h3>

<pre><code class='language-R'>anlzMWRoutlierall(
  res = NULL,
  acc = NULL,
  fset = NULL,
  fig_height = 4,
  fig_width = 8,
  format = c("word", "png"),
  output_dir,
  output_file = NULL,
  type = c("box", "jitterbox", "jitter"),
  group,
  dtrng = NULL,
  repel = TRUE,
  outliers = FALSE,
  labsize = 3,
  fill = "lightgrey",
  alpha = 0.8,
  width = 0.8,
  yscl = "auto",
  ttlsize = 1.2,
  runchk = TRUE,
  warn = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="anlzMWRoutlierall_+3A_res">res</code></td>
<td>
<p>character string of path to the results file or <code>data.frame</code> for results returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code></p>
</td></tr>
<tr><td><code id="anlzMWRoutlierall_+3A_acc">acc</code></td>
<td>
<p>character string of path to the data quality objectives file for accuracy or <code>data.frame</code> returned by <code><a href="#topic+readMWRacc">readMWRacc</a></code></p>
</td></tr>
<tr><td><code id="anlzMWRoutlierall_+3A_fset">fset</code></td>
<td>
<p>optional list of inputs with elements named <code>res</code>, <code>acc</code>, <code>frecom</code>, <code>sit</code>, or <code>wqx</code> overrides the other arguments</p>
</td></tr>
<tr><td><code id="anlzMWRoutlierall_+3A_fig_height">fig_height</code></td>
<td>
<p>numeric for plot heights in inches</p>
</td></tr>
<tr><td><code id="anlzMWRoutlierall_+3A_fig_width">fig_width</code></td>
<td>
<p>numeric for plot width in inches</p>
</td></tr>
<tr><td><code id="anlzMWRoutlierall_+3A_format">format</code></td>
<td>
<p>character string indicating if results are placed in a word file or as separate png files in <code>output_dir</code></p>
</td></tr>
<tr><td><code id="anlzMWRoutlierall_+3A_output_dir">output_dir</code></td>
<td>
<p>character string of the output directory for the results</p>
</td></tr>
<tr><td><code id="anlzMWRoutlierall_+3A_output_file">output_file</code></td>
<td>
<p>optional character string for the file name if <code>format = "word"</code></p>
</td></tr>
<tr><td><code id="anlzMWRoutlierall_+3A_type">type</code></td>
<td>
<p>character indicating <code>"box"</code>, <code>"jitterbox"</code>, or <code>"jitter"</code>, see details</p>
</td></tr>
<tr><td><code id="anlzMWRoutlierall_+3A_group">group</code></td>
<td>
<p>character indicating whether the summaries are grouped by month, site, or week of year</p>
</td></tr>
<tr><td><code id="anlzMWRoutlierall_+3A_dtrng">dtrng</code></td>
<td>
<p>character string of length two for the date ranges as YYYY-MM-DD, optional</p>
</td></tr>
<tr><td><code id="anlzMWRoutlierall_+3A_repel">repel</code></td>
<td>
<p>logical indicating if overlapping outlier labels are offset</p>
</td></tr>
<tr><td><code id="anlzMWRoutlierall_+3A_outliers">outliers</code></td>
<td>
<p>logical indicating if outliers are returned to the console instead of plotting</p>
</td></tr>
<tr><td><code id="anlzMWRoutlierall_+3A_labsize">labsize</code></td>
<td>
<p>numeric indicating font size for the outlier labels</p>
</td></tr>
<tr><td><code id="anlzMWRoutlierall_+3A_fill">fill</code></td>
<td>
<p>numeric indicating fill color for boxplots</p>
</td></tr>
<tr><td><code id="anlzMWRoutlierall_+3A_alpha">alpha</code></td>
<td>
<p>numeric from 0 to 1 indicating transparency of fill color</p>
</td></tr>
<tr><td><code id="anlzMWRoutlierall_+3A_width">width</code></td>
<td>
<p>numeric for width of boxplots</p>
</td></tr>
<tr><td><code id="anlzMWRoutlierall_+3A_yscl">yscl</code></td>
<td>
<p>character indicating one of <code>"auto"</code> (default), <code>"log"</code>, or <code>"linear"</code>, see details</p>
</td></tr>
<tr><td><code id="anlzMWRoutlierall_+3A_ttlsize">ttlsize</code></td>
<td>
<p>numeric value indicating font size of the title relative to other text in the plot</p>
</td></tr>
<tr><td><code id="anlzMWRoutlierall_+3A_runchk">runchk</code></td>
<td>
<p>logical to run data checks with <code><a href="#topic+checkMWRresults">checkMWRresults</a></code> or <code><a href="#topic+checkMWRacc">checkMWRacc</a></code>, applies only if <code>res</code> or <code>acc</code> are file paths</p>
</td></tr>
<tr><td><code id="anlzMWRoutlierall_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is a wrapper to <code><a href="#topic+anlzMWRoutlier">anlzMWRoutlier</a></code> to create plots for all parameters with appropriate data in the water quality monitoring results
</p>


<h3>Value</h3>

<p>A word document named <code>outlierall.docx</code> (or name passed to <code>output_file</code>) if <code>format = "word"</code> or separate png files for each parameter if <code>format = "png"</code> will be saved in the directory specified by <code>output_dir</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># results data path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# results data
resdat &lt;- readMWRresults(respth)

# accuracy path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', 
     package = 'MassWateR')

# accuracy data
accdat &lt;- readMWRacc(accpth)


# create word output
anlzMWRoutlierall(resdat, accdat, group = 'month', format = 'word', output_dir = tempdir())

# create png output
anlzMWRoutlierall(resdat, accdat, group = 'month', format = 'png', output_dir = tempdir())

</code></pre>

<hr>
<h2 id='anlzMWRseason'>Analyze seasonal trends in results file</h2><span id='topic+anlzMWRseason'></span>

<h3>Description</h3>

<p>Analyze seasonal trends in results file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>anlzMWRseason(
  res = NULL,
  param,
  acc = NULL,
  sit = NULL,
  fset = NULL,
  thresh,
  group = c("month", "week"),
  type = c("box", "jitterbox", "bar", "jitterbar", "jitter"),
  threshlab = NULL,
  threshcol = "tan",
  site = NULL,
  resultatt = NULL,
  locgroup = NULL,
  dtrng = NULL,
  confint = FALSE,
  fill = "lightblue",
  alpha = 0.8,
  width = 0.8,
  yscl = "auto",
  sumfun = yscl,
  ttlsize = 1.2,
  runchk = TRUE,
  warn = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="anlzMWRseason_+3A_res">res</code></td>
<td>
<p>character string of path to the results file or <code>data.frame</code> for results returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code></p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_param">param</code></td>
<td>
<p>character string of the parameter to plot, must conform to entries in the <code>"Simple Parameter"</code> column of <code><a href="#topic+paramsMWR">paramsMWR</a></code></p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_acc">acc</code></td>
<td>
<p>character string of path to the data quality objectives file for accuracy or <code>data.frame</code> returned by <code><a href="#topic+readMWRacc">readMWRacc</a></code></p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_sit">sit</code></td>
<td>
<p>optional character string of path to the site metadata file or <code>data.frame</code> of site metadata returned by <code><a href="#topic+readMWRsites">readMWRsites</a></code>, required if <code>locgroup</code> is not <code>NULL</code></p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_fset">fset</code></td>
<td>
<p>optional list of inputs with elements named <code>res</code>, <code>acc</code>, <code>frecom</code>, <code>sit</code>, or <code>wqx</code> overrides the other arguments</p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_thresh">thresh</code></td>
<td>
<p>character indicating if relevant freshwater or marine threshold lines are included, one of <code>"fresh"</code>, <code>"marine"</code>, or <code>"none"</code>, or a single numeric value to override the values included with the package</p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_group">group</code></td>
<td>
<p>character indicating whether the summaries are grouped by month (default) or week of year</p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_type">type</code></td>
<td>
<p>character indicating <code>"box"</code>, <code>"jitterbox"</code>, <code>"bar"</code>, <code>"jitterbar"</code> or <code>"jitter"</code>, see details</p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_threshlab">threshlab</code></td>
<td>
<p>optional character string indicating legend label for the threshold, required only if <code>thresh</code> is numeric</p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_threshcol">threshcol</code></td>
<td>
<p>character indicating color of threshold lines if available</p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_site">site</code></td>
<td>
<p>character string of sites to include, default all</p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_resultatt">resultatt</code></td>
<td>
<p>character string of result attributes to plot, default all</p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_locgroup">locgroup</code></td>
<td>
<p>character string of location groups to plot from the <code>"Location Group"</code> column in the site metadata file, optional and only if <code>sit</code> is not <code>NULL</code></p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_dtrng">dtrng</code></td>
<td>
<p>character string of length two for the date ranges as YYYY-MM-DD, default all</p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_confint">confint</code></td>
<td>
<p>logical indicating if confidence intervals are shown, only applies if <code>type = "bar"</code></p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_fill">fill</code></td>
<td>
<p>numeric indicating fill color for boxplots or barplots</p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_alpha">alpha</code></td>
<td>
<p>numeric from 0 to 1 indicating transparency of fill color</p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_width">width</code></td>
<td>
<p>numeric for width of boxplots or barplots</p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_yscl">yscl</code></td>
<td>
<p>character indicating one of <code>"auto"</code> (default), <code>"log"</code>, or <code>"linear"</code>, see details</p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_sumfun">sumfun</code></td>
<td>
<p>character indicating one of <code>"auto"</code>, <code>"mean"</code>, <code>"geomean"</code>, <code>"median"</code>, <code>"min"</code>, or <code>"max"</code>, see details</p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_ttlsize">ttlsize</code></td>
<td>
<p>numeric value indicating font size of the title relative to other text in the plot</p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_runchk">runchk</code></td>
<td>
<p>logical to run data checks with <code><a href="#topic+checkMWRresults">checkMWRresults</a></code> or <code><a href="#topic+checkMWRacc">checkMWRacc</a></code>, applies only if <code>res</code> or <code>acc</code> are file paths</p>
</td></tr>
<tr><td><code id="anlzMWRseason_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Summaries of a parameter are shown as boxplots if <code>type = "box"</code> or as barplots if <code>type = "bar"</code>.  Points can be jittered over the boxplots by setting <code>type = "jitterbox"</code> or jittered over the barplots by setting <code>type = "jitterbar"</code>.  Setting <code>type = "jitter"</code> will show only the jittered points.  For <code>type = "bar"</code> or <code>type = "jitterbar"</code>, 95% confidence intervals can also be shown if <code>confint = TRUE</code> and they can be estimated (i.e., more than one result value per bar and <code>sumfun</code> is <code>"auto"</code>, <code>"mean"</code>, or <code>"geomean"</code>).
</p>
<p>Specifying <code>group = "week"</code> will group the samples by week of year using an integer specifying the week.  Note that there can be no common month/day indicating the start of the week between years and an integer is the only way to compare summaries if the results data span multiple years.
</p>
<p>Threshold lines applicable to marine or freshwater environments can be included in the plot by using the <code>thresh</code> argument.  These thresholds are specific to each parameter and can be found in the <code><a href="#topic+thresholdMWR">thresholdMWR</a></code> file.  Threshold lines are plotted only for those parameters with entries in <code><a href="#topic+thresholdMWR">thresholdMWR</a></code> and only if the value in <code>`Result Unit`</code> matches those in <code><a href="#topic+thresholdMWR">thresholdMWR</a></code>. The threshold lines can be suppressed by setting <code>thresh = 'none'</code>. A user-supplied numeric value can also be used for the <code>thresh</code> argument to override the default values. An appropriate label must also be supplied to <code>threshlab</code> if <code>thresh</code> is numeric.
</p>
<p>The y-axis scaling as arithmetic (linear) or logarithmic can be set with the <code>yscl</code> argument.  If <code>yscl = "auto"</code> (default), the scaling is  determined automatically from the data quality objective file for accuracy, i.e., parameters with &quot;log&quot; in any of the columns are plotted on log10-scale, otherwise arithmetic. Setting <code>yscl = "linear"</code> or <code>yscl = "log"</code> will set the axis as linear or log10-scale, respectively, regardless of the information in the data quality objective file for accuracy.
</p>
<p>Similarly, the data will be summarized if <code>type</code> is <code>"bar"</code> or <code>"jitterbar"</code> based on the value passed to <code>sumfun</code>.  The default if no value is provided to <code>sumfun</code> is to use the appropriate summary based on the value provided to <code>yscl</code>.  If <code>yscl = "auto"</code> (default), then <code>sumfun = "auto"</code>, and the mean or geometric mean is used for the summary based on information in the data quality objective file for accuracy. Using <code>yscl = "linear"</code> or <code>yscl = "log"</code> will default to the mean or geometric mean summary if no value is provided to <code>sumfun</code>.  Any other appropriate value passed to <code>sumfun</code> will override the value passed to <code>yscl</code>.  Valid summary functions for <code>sumfun</code> include <code>"auto"</code>, <code>"mean"</code>, <code>"geomean"</code>, <code>"median"</code>, <code>"min"</code>, or <code>"max"</code>).
</p>
<p>Any entries in <code>resdat</code> in the <code>"Result Value"</code> column as <code>"BDL"</code> or <code>"AQL"</code> are replaced with appropriate values in the <code>"Quantitation Limit"</code> column, if present, otherwise the <code>"MDL"</code> or <code>"UQL"</code> columns from the data quality objectives file for accuracy are used.  Values as <code>"BDL"</code> use one half of the appropriate limit.
</p>


<h3>Value</h3>

<p>A <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code> object that can be further modified.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># results data path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# results data
resdat &lt;- readMWRresults(respth)

# accuracy path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', 
     package = 'MassWateR')

# accuracy data
accdat &lt;- readMWRacc(accpth)

# site data path
sitpth &lt;- system.file('extdata/ExampleSites.xlsx', package = 'MassWateR')

# site data
sitdat &lt;- readMWRsites(sitpth)

# seasonal trends by month, boxplot
anlzMWRseason(res = resdat, param = 'DO', acc = accdat, thresh = 'fresh', group = 'month', 
     type = 'box')

# seasonal trends by week, boxplot
anlzMWRseason(res = resdat, param = 'DO', acc = accdat, thresh = 'fresh', group = 'week', 
     type = 'box')

# seasonal trends by month, May to July only
anlzMWRseason(res = resdat, param = 'DO', acc = accdat, thresh = 'fresh', group = 'month', 
     type = 'bar', dtrng = c('2022-05-01', '2022-07-31'))
     
# seasonal trends by month, barplot
anlzMWRseason(res = resdat, param = 'DO', acc = accdat, thresh = 'fresh', group = 'month', 
     type = 'bar')

# seasonal trends by week, barplot
anlzMWRseason(res = resdat, param = 'DO', acc = accdat, thresh = 'fresh', group = 'week', 
     type = 'bar')
     
# seasonal trends by location group, requires sitdat
anlzMWRseason(res = resdat, param = 'DO', acc = accdat, sit = sitdat, thresh = 'fresh', 
     group = 'month', type = 'box', locgroup = 'Assabet')
</code></pre>

<hr>
<h2 id='anlzMWRsite'>Analyze data by sites in results file</h2><span id='topic+anlzMWRsite'></span>

<h3>Description</h3>

<p>Analyze data by sites in results file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>anlzMWRsite(
  res = NULL,
  param,
  acc = NULL,
  sit = NULL,
  fset = NULL,
  type = c("box", "jitterbox", "bar", "jitterbar", "jitter"),
  thresh,
  threshlab = NULL,
  threshcol = "tan",
  site = NULL,
  resultatt = NULL,
  locgroup = NULL,
  dtrng = NULL,
  confint = FALSE,
  fill = "lightgreen",
  alpha = 0.8,
  width = 0.8,
  yscl = "auto",
  sumfun = yscl,
  byresultatt = FALSE,
  ttlsize = 1.2,
  runchk = TRUE,
  warn = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="anlzMWRsite_+3A_res">res</code></td>
<td>
<p>character string of path to the results file or <code>data.frame</code> for results returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code></p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_param">param</code></td>
<td>
<p>character string of the parameter to plot, must conform to entries in the <code>"Simple Parameter"</code> column of <code><a href="#topic+paramsMWR">paramsMWR</a></code></p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_acc">acc</code></td>
<td>
<p>character string of path to the data quality objectives file for accuracy or <code>data.frame</code> returned by <code><a href="#topic+readMWRacc">readMWRacc</a></code></p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_sit">sit</code></td>
<td>
<p>optional character string of path to the site metadata file or <code>data.frame</code> of site metadata returned by <code><a href="#topic+readMWRsites">readMWRsites</a></code>, required if <code>locgroup</code> is not <code>NULL</code></p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_fset">fset</code></td>
<td>
<p>optional list of inputs with elements named <code>res</code>, <code>acc</code>, <code>frecom</code>, <code>sit</code>, or <code>wqx</code> overrides the other arguments</p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_type">type</code></td>
<td>
<p>character indicating <code>"box"</code>, <code>"jitterbox"</code>, <code>"bar"</code>, <code>"jitterbar"</code> or <code>"jitter"</code>, see details</p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_thresh">thresh</code></td>
<td>
<p>character indicating if relevant freshwater or marine threshold lines are included, one of <code>"fresh"</code>, <code>"marine"</code>, or <code>"none"</code>, or a single numeric value to override the values included with the package</p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_threshlab">threshlab</code></td>
<td>
<p>optional character string indicating legend label for the threshold, required only if <code>thresh</code> is numeric</p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_threshcol">threshcol</code></td>
<td>
<p>character indicating color of threshold lines if available</p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_site">site</code></td>
<td>
<p>character string of sites to include, default all</p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_resultatt">resultatt</code></td>
<td>
<p>character string of result attributes to plot, default all</p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_locgroup">locgroup</code></td>
<td>
<p>character string of location groups to plot from the <code>"Location Group"</code> column in the site metadata file, optional and only if <code>sit</code> is not <code>NULL</code></p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_dtrng">dtrng</code></td>
<td>
<p>character string of length two for the date ranges as YYYY-MM-DD, default all</p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_confint">confint</code></td>
<td>
<p>logical indicating if confidence intervals are shown, only applies if <code>type</code> is <code>"bar"</code> or <code>"jitterbar"</code></p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_fill">fill</code></td>
<td>
<p>numeric indicating fill color for boxplots or barplots</p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_alpha">alpha</code></td>
<td>
<p>numeric from 0 to 1 indicating transparency of fill color</p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_width">width</code></td>
<td>
<p>numeric for width of boxplots or barplots</p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_yscl">yscl</code></td>
<td>
<p>character indicating one of <code>"auto"</code> (default), <code>"log"</code>, or <code>"linear"</code>, see details</p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_sumfun">sumfun</code></td>
<td>
<p>character indicating one of <code>"auto"</code>, <code>"mean"</code>, <code>"geomean"</code>, <code>"median"</code>, <code>"min"</code>, or <code>"max"</code>, see details</p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_byresultatt">byresultatt</code></td>
<td>
<p>logical indicating if the plot has sites grouped separately by result attributes, see details</p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_ttlsize">ttlsize</code></td>
<td>
<p>numeric value indicating font size of the title relative to other text in the plot</p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_runchk">runchk</code></td>
<td>
<p>logical to run data checks with <code><a href="#topic+checkMWRresults">checkMWRresults</a></code> or <code><a href="#topic+checkMWRacc">checkMWRacc</a></code>, applies only if <code>res</code> or <code>acc</code> are file paths</p>
</td></tr>
<tr><td><code id="anlzMWRsite_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Summaries of a parameter for each site are shown as boxplots if <code>type = "box"</code> or as barplots if <code>type = "bar"</code>.  Points can be jittered over the boxplots by setting <code>type = "jitterbox"</code> or jittered over the barplots by setting <code>type = "jitterbar"</code>.  Setting <code>type = "jitter"</code> will show only the jittered points.  For <code>type = "bar"</code> or <code>type = "jitterbar"</code>, 95% confidence intervals can also be shown if <code>confint = TRUE</code> and they can be estimated (i.e., more than one result value per bar and <code>sumfun</code> is <code>"auto"</code>, <code>"mean"</code>, or <code>"geomean"</code>).
</p>
<p>Threshold lines applicable to marine or freshwater environments can be included in the plot by using the <code>thresh</code> argument.  These thresholds are specific to each parameter and can be found in the <code><a href="#topic+thresholdMWR">thresholdMWR</a></code> file.  Threshold lines are plotted only for those parameters with entries in <code><a href="#topic+thresholdMWR">thresholdMWR</a></code> and only if the value in <code>`Result Unit`</code> matches those in <code><a href="#topic+thresholdMWR">thresholdMWR</a></code>. The threshold lines can be suppressed by setting <code>thresh = 'none'</code>. A user-supplied numeric value can also be used for the <code>thresh</code> argument to override the default values. An appropriate label must also be supplied to <code>threshlab</code> if <code>thresh</code> is numeric.
</p>
<p>The y-axis scaling as arithmetic (linear) or logarithmic can be set with the <code>yscl</code> argument.  If <code>yscl = "auto"</code> (default), the scaling is  determined automatically from the data quality objective file for accuracy, i.e., parameters with &quot;log&quot; in any of the columns are plotted on log10-scale, otherwise arithmetic. Setting <code>yscl = "linear"</code> or <code>yscl = "log"</code> will set the axis as linear or log10-scale, respectively, regardless of the information in the data quality objective file for accuracy.
</p>
<p>Similarly, the data will be summarized if <code>type</code> is <code>"bar"</code> or <code>"jitterbar"</code> based on the value passed to <code>sumfun</code>.  The default if no value is provided to <code>sumfun</code> is to use the appropriate summary based on the value provided to <code>yscl</code>.  If <code>yscl = "auto"</code> (default), then <code>sumfun = "auto"</code>, and the mean or geometric mean is used for the summary based on information in the data quality objective file for accuracy. Using <code>yscl = "linear"</code> or <code>yscl = "log"</code> will default to the mean or geometric mean summary if no value is provided to <code>sumfun</code>.  Any other appropriate value passed to <code>sumfun</code> will override the value passed to <code>yscl</code>.  Valid summary functions for <code>sumfun</code> include <code>"auto"</code>, <code>"mean"</code>, <code>"geomean"</code>, <code>"median"</code>, <code>"min"</code>, or <code>"max"</code>).
</p>
<p>Any entries in <code>resdat</code> in the <code>"Result Value"</code> column as <code>"BDL"</code> or <code>"AQL"</code> are replaced with appropriate values in the <code>"Quantitation Limit"</code> column, if present, otherwise the <code>"MDL"</code> or <code>"UQL"</code> columns from the data quality objectives file for accuracy are used.  Values as <code>"BDL"</code> use one half of the appropriate limit.
</p>
<p>The <code>byresultatt</code> argument can be used to group sites separately by result attributes.  For example, sites with E. coli samples can be grouped by <code>"Dry"</code> or <code>"Wet"</code> conditions if present in the <code>"Result Attribute"</code> column.   Filtering by sites first using the <code>site</code> argument is advised to reduce the amount of data that are plotted. The grouping can be filtered further by passing appropriate values in the <code>"Result Attribute"</code> column to the <code>resultatt</code> argument. Note that specifying result attributes with <code>resultatt</code> and setting <code>byresultatt = FALSE</code> will filter the plot data by the result attributes but will not plot the results separately.
</p>


<h3>Value</h3>

<p>A <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code> object that can be further modified.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># results data path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# results data
resdat &lt;- readMWRresults(respth)

# accuracy path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', 
     package = 'MassWateR')

# accuracy data
accdat &lt;- readMWRacc(accpth)

# site data path
sitpth &lt;- system.file('extdata/ExampleSites.xlsx', package = 'MassWateR')

# site data
sitdat &lt;- readMWRsites(sitpth)

# site trends, boxplot
anlzMWRsite(res = resdat, param = 'DO', acc = accdat, type = 'box', thresh = 'fresh')

# site trends, barplot
anlzMWRsite(res = resdat, param = 'DO', acc = accdat, type = 'bar', thresh = 'fresh')

# site trends, May to July only
anlzMWRsite(res = resdat, param = 'DO', acc = accdat, type = 'box', thresh = 'fresh',
     dtrng = c('2022-05-01', '2022-07-31'))
     
# grouping by result attribute
anlzMWRsite(res = resdat, param = 'DO', acc = accdat, type = 'box', thresh = 'fresh',
     site = c('ABT-062', 'ABT-077'), byresultatt = TRUE)
     
# site trends by location group, requires sitdat
anlzMWRsite(res = resdat, param = 'DO', acc = accdat, sit = sitdat, type = 'box', 
     thresh = 'fresh', locgroup = 'Assabet')
     
</code></pre>

<hr>
<h2 id='checkMWRacc'>Check data quality objective accuracy data</h2><span id='topic+checkMWRacc'></span>

<h3>Description</h3>

<p>Check data quality objective accuracy data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkMWRacc(accdat, warn = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkMWRacc_+3A_accdat">accdat</code></td>
<td>
<p>input data frame</p>
</td></tr>
<tr><td><code id="checkMWRacc_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used internally within <code><a href="#topic+readMWRacc">readMWRacc</a></code> to run several checks on the input data for completeness and conformance to WQX requirements
</p>
<p>The following checks are made:
</p>

<ul>
<li><p> Column name spelling: Should be the following: Parameter, uom, MDL, UQL, Value Range, Field Duplicate, Lab Duplicate, Field Blank, Lab Blank, Spike/Check Accuracy
</p>
</li>
<li><p> Columns present: All columns from the previous check should be present
</p>
</li>
<li><p> Column types: All columns should be characters/text, except for MDL and UQL
</p>
</li>
<li> <p><code>Value Range</code> column na check: The character string <code>"na"</code> should not be in the <code>Value Range</code> column, <code>"all"</code> should be used if the entire range applies
</p>
</li>
<li><p> Unrecognized characters: Fields describing accuracy checks should not include symbols or text other than <code class="reqn">&lt;=</code>, <code class="reqn">\leq</code>, <code class="reqn">&lt;</code>, <code class="reqn">&gt;=</code>, <code class="reqn">\geq</code>, <code class="reqn">&gt;</code>, <code class="reqn">\pm</code>, <code>"%"</code>, <code>"BDL"</code>, <code>"AQL"</code>, <code>"log"</code>, or <code>"all"</code>
</p>
</li>
<li><p> Overlap in <code>Value Range</code> column: Entries in <code>Value Range</code> should not overlap for a parameter (excludes ascending ranges)
</p>
</li>
<li><p> Gap in <code>Value Range</code> column: Entries in <code>Value Range</code> should not include a gap for a parameter, warning only
</p>
</li>
<li><p> Parameter: Should match parameter names in the <code>Simple Parameter</code> or <code>WQX Parameter</code> columns of the <code><a href="#topic+paramsMWR">paramsMWR</a></code> data
</p>
</li>
<li><p> Units: No missing entries in units (<code>uom</code>), except pH which can be blank
</p>
</li>
<li><p> Single unit: Each unique <code>Parameter</code> should have only one type for the units (<code>uom</code>)
</p>
</li>
<li><p> Correct units: Each unique <code>Parameter</code> should have an entry in the units (<code>uom</code>) that matches one of the acceptable values in the <code>Units of measure</code> column of the <code><a href="#topic+paramsMWR">paramsMWR</a></code> data
</p>
</li>
<li><p> Empty columns: Columns with all missing or NA values will return a warning
</p>
</li></ul>



<h3>Value</h3>

<p><code>accdat</code> is returned as is if no errors are found, otherwise an informative error message is returned prompting the user to make the required correction to the raw data before proceeding.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># accuracy path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', 
     package = 'MassWateR')

# accuracy data with no checks
accdat &lt;- readxl::read_excel(accpth, na = c('NA', ''), col_types = 'text')
accdat &lt;- dplyr::mutate(accdat, dplyr::across(-c(`Value Range`), ~ dplyr::na_if(.x, 'na'))) 
      
checkMWRacc(accdat)
</code></pre>

<hr>
<h2 id='checkMWRfrecom'>Check data quality objective frequency and completeness data</h2><span id='topic+checkMWRfrecom'></span>

<h3>Description</h3>

<p>Check data quality objective frequency and completeness data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkMWRfrecom(frecomdat, warn = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkMWRfrecom_+3A_frecomdat">frecomdat</code></td>
<td>
<p>input data frame</p>
</td></tr>
<tr><td><code id="checkMWRfrecom_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used internally within <code><a href="#topic+readMWRfrecom">readMWRfrecom</a></code> to run several checks on the input data for frequency and completeness and conformance to WQX requirements
</p>
<p>The following checks are made:
</p>

<ul>
<li><p> Column name spelling: Should be the following: Parameter, Field Duplicate, Lab Duplicate, Field Blank, Lab Blank, Spike/Check Accuracy, % Completeness
</p>
</li>
<li><p> Columns present: All columns from the previous check should be present
</p>
</li>
<li><p> Non-numeric values: Values entered in columns other than the first should be numeric
</p>
</li>
<li><p> Values outside of 0 - 100: Values entered in columns other than the first should not be outside of 0 and 100
</p>
</li>
<li><p> Parameter: Should match parameter names in the <code>Simple Parameter</code> or <code>WQX Parameter</code> columns of the <code><a href="#topic+paramsMWR">paramsMWR</a></code> data
</p>
</li>
<li><p> Empty columns: Columns with all missing or NA values will return a warning
</p>
</li></ul>



<h3>Value</h3>

<p><code>frecomdat</code> is returned as is if no errors are found, otherwise an informative error message is returned prompting the user to make the required correction to the raw data before proceeding.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

frecompth &lt;- system.file('extdata/ExampleDQOFrequencyCompleteness.xlsx', 
     package = 'MassWateR')

frecomdat &lt;- suppressMessages(readxl::read_excel(frecompth, 
      skip = 1, na = c('NA', 'na', ''), 
      col_types = c('text', 'numeric', 'numeric', 'numeric', 'numeric', 'numeric', 'numeric')
    )) %&gt;% 
    rename(`% Completeness` = `...7`)
    
checkMWRfrecom(frecomdat)
</code></pre>

<hr>
<h2 id='checkMWRresults'>Check water quality monitoring results</h2><span id='topic+checkMWRresults'></span>

<h3>Description</h3>

<p>Check water quality monitoring results
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkMWRresults(resdat, warn = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkMWRresults_+3A_resdat">resdat</code></td>
<td>
<p>input data frame for results</p>
</td></tr>
<tr><td><code id="checkMWRresults_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used internally within <code><a href="#topic+readMWRresults">readMWRresults</a></code> to run several checks on the input data for completeness and conformance to WQX requirements.
</p>
<p>The following checks are made:
</p>

<ul>
<li><p> Column name spelling: Should be the following: Monitoring Location ID, Activity Type, Activity Start Date, Activity Start Time, Activity Depth/Height Measure, Activity Depth/Height Unit, Activity Relative Depth Name, Characteristic Name, Result Value, Result Unit, Quantitation Limit, QC Reference Value, Result Measure Qualifier, Result Attribute, Sample Collection Method ID, Project ID, Local Record ID, Result Comment
</p>
</li>
<li><p> Columns present: All columns from the previous check should be present
</p>
</li>
<li><p> Activity Type: Should be one of Field Msr/Obs, Sample-Routine, Quality Control Sample-Field Blank, Quality Control Sample-Lab Blank, Quality Control Sample-Lab Duplicate, Quality Control Sample-Lab Spike, Quality Control-Calibration Check, Quality Control-Meter Lab Duplicate, Quality Control-Meter Lab Blank
</p>
</li>
<li><p> Date formats: Should be mm/dd/yyyy and parsed correctly on import
</p>
</li>
<li><p> Depth data present: Depth data should be included in Activity Depth/Height Measure or Activity Relative Depth Name for all rows where Activity Type is Field Msr/Obs or Sample-Routine
</p>
</li>
<li><p> Non-numeric Activity Depth/Height Measure: All depth values should be numbers, excluding missing values
</p>
</li>
<li><p> Activity Depth/Height Unit: All entries should be <code>ft</code>, <code>m</code>, or blank
</p>
</li>
<li><p> Activity Relative Depth Name: Should be either Surface, Bottom, Midwater, Near Bottom, or blank (warning only)
</p>
</li>
<li><p> Activity Depth/Height Measure out of range: All depth values should be less than or equal to 1 meter / 3.3 feet or entered as Surface in the Activity Relative Depth Name column (warning only)
</p>
</li>
<li><p> Characteristic Name: Should match parameter names in the <code>Simple Parameter</code> or <code>WQX Parameter</code> columns of the <code><a href="#topic+paramsMWR">paramsMWR</a></code> data (warning only)
</p>
</li>
<li><p> Result Value: Should be a numeric value or a text value as AQL or BDL
</p>
</li>
<li><p> QC Reference Value: Should be a numeric value or a text value as AQL or BDL
</p>
</li>
<li><p> Result Unit: No missing entries in <code>Result Unit</code>, except pH which can be blank
</p>
</li>
<li><p> Single Result Unit: Each unique parameter in <code>Characteristic Name</code> should have only one entry in <code>Result Unit</code> (excludes entries for lab spikes reported as <code>%</code> or <code>% recovery</code>)
</p>
</li>
<li><p> Correct Result Unit: Each unique parameter in <code>Characteristic Name</code> should have an entry in <code>Result Unit</code> that matches one of the acceptable values in the <code>Units of measure</code> column of the <code><a href="#topic+paramsMWR">paramsMWR</a></code> data (excludes entries for lab spikes reported as <code>%</code> or <code>% recovery</code>)
</p>
</li></ul>



<h3>Value</h3>

<p><code>resdat</code> is returned as is if no errors are found, otherwise an informative error message is returned prompting the user to make the required correction to the raw data before proceeding. Checks with warnings can be fixed at the discretion of the user before proceeding.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

resdat &lt;- suppressWarnings(readxl::read_excel(respth, na = c('NA', 'na', ''), guess_max = Inf)) %&gt;% 
  dplyr::mutate_if(function(x) !lubridate::is.POSIXct(x), as.character)
             
checkMWRresults(resdat)
</code></pre>

<hr>
<h2 id='checkMWRsites'>Check site metadata file</h2><span id='topic+checkMWRsites'></span>

<h3>Description</h3>

<p>Check site metadata file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkMWRsites(sitdat)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkMWRsites_+3A_sitdat">sitdat</code></td>
<td>
<p>input data frame</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used internally within <code><a href="#topic+readMWRsites">readMWRsites</a></code> to run several checks on the input data for completeness and conformance to WQX requirements
</p>
<p>The following checks are made:
</p>

<ul>
<li><p> Column name spelling: Should be the following: Monitoring Location ID, Monitoring Location Name, Monitoring Location Latitude, Monitoring Location Longitude, Location Group
</p>
</li>
<li><p> Columns present: All columns from the previous check should be present
</p>
</li>
<li><p> Missing longitude or latitude: No missing entries in Monitoring Location Latitude or Monitoring Location Longitude
</p>
</li>
<li><p> Non-numeric latitude values: Values entered in Monitoring Location Latitude must be numeric
</p>
</li>
<li><p> Non-numeric longitude values: Values entered in Monitoring Location Longitude must be numeric
</p>
</li>
<li><p> Positive longitude values: Values in Monitoring Location Longitude must be negative
</p>
</li>
<li><p> Missing Location ID: No missing entries for Monitoring Location ID
</p>
</li></ul>



<h3>Value</h3>

<p><code>sitdat</code> is returned as is if no errors are found, otherwise an informative error message is returned prompting the user to make the required correction to the raw data before proceeding.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

sitpth &lt;- system.file('extdata/ExampleSites.xlsx', package = 'MassWateR')

sitdat &lt;- readxl::read_excel(sitpth, na = c('NA', 'na', ''))
    
checkMWRsites(sitdat)
</code></pre>

<hr>
<h2 id='checkMWRwqx'>Check water quality exchange (wqx) metadata input</h2><span id='topic+checkMWRwqx'></span>

<h3>Description</h3>

<p>Check water quality exchange (wqx) metadata input
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkMWRwqx(wqxdat, warn = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkMWRwqx_+3A_wqxdat">wqxdat</code></td>
<td>
<p>input data frame</p>
</td></tr>
<tr><td><code id="checkMWRwqx_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used internally within <code><a href="#topic+readMWRwqx">readMWRwqx</a></code> to run several checks on the input data for conformance with downstream functions
</p>
<p>The following checks are made:
</p>

<ul>
<li><p> Column name spelling: Should be the following: Parameter, Sampling Method Context, Method Speciation, Result Sample Fraction, Analytical Method, Analytical Method Context
</p>
</li>
<li><p> Columns present: All columns from the previous check should be present
</p>
</li>
<li><p> Unique parameters: Values in <code>Parameter</code> should be unique (no duplicates)
</p>
</li>
<li><p> Parameter: Should match parameter names in the <code>Simple Parameter</code> or <code>WQX Parameter</code> columns of the <code><a href="#topic+paramsMWR">paramsMWR</a></code> data (warning only)
</p>
</li></ul>



<h3>Value</h3>

<p><code>wqxdat</code> is returned as is if no errors are found, otherwise an informative error message is returned prompting the user to make the required correction to the raw data before proceeding. Checks with warnings can be fixed at the discretion of the user before proceeding.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

wqxpth &lt;- system.file('extdata/ExampleWQX.xlsx', package = 'MassWateR')

wqxdat &lt;- readxl::read_excel(wqxpth, na = c('NA', 'na', ''), col_types = 'text')
    
checkMWRwqx(wqxdat)
</code></pre>

<hr>
<h2 id='formMWRacc'>Format data quality objective accuracy data</h2><span id='topic+formMWRacc'></span>

<h3>Description</h3>

<p>Format data quality objective accuracy data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>formMWRacc(accdat)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="formMWRacc_+3A_accdat">accdat</code></td>
<td>
<p>input data fram</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used internally within <code><a href="#topic+readMWRacc">readMWRacc</a></code> to format the input data for downstream analysis.  The formatting includes:
</p>

<ul>
<li><p> Minor formatting for units: For conformance to WQX, e.g., ppt is changed to ppth, s.u. is changed to NA in <code>uom</code>
</p>
</li>
<li><p> Convert Parameter: All parameters are converted to <code>Simple Parameter</code> in <code><a href="#topic+paramsMWR">paramsMWR</a></code> as needed
</p>
</li>
<li><p> Remove unicode: Remove or replace unicode characters with those that can be used in logical expressions in <code><a href="#topic+qcMWRacc">qcMWRacc</a></code>, e.g., replace <code class="reqn">\geq</code> with <code class="reqn">&gt;=</code>
</p>
</li>
<li><p> Convert limits to numeric: Convert <code>MDL</code> and <code>UQL</code> columns to numeric
</p>
</li></ul>



<h3>Value</h3>

<p>A formatted data frame of the data quality objectives file for accuracy
</p>


<h3>Examples</h3>

<pre><code class='language-R'>accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', package = 'MassWateR')

accdat &lt;- readxl::read_excel(accpth, na = c('NA', ''))
accdat &lt;- dplyr::mutate(accdat, dplyr::across(-c(`Value Range`), ~ dplyr::na_if(.x, 'na')))

formMWRacc(accdat)
</code></pre>

<hr>
<h2 id='formMWRfrecom'>Format data quality objective frequency and completeness data</h2><span id='topic+formMWRfrecom'></span>

<h3>Description</h3>

<p>Format data quality objective frequency and completeness data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>formMWRfrecom(frecomdat)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="formMWRfrecom_+3A_frecomdat">frecomdat</code></td>
<td>
<p>input data frame</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used internally within <code><a href="#topic+readMWRfrecom">readMWRfrecom</a></code> to format the input data for downstream analysis.  The formatting includes:
</p>

<ul>
<li><p> Convert Parameter: All parameters are converted to <code>Simple Parameter</code> in <code><a href="#topic+paramsMWR">paramsMWR</a></code> as needed
</p>
</li></ul>



<h3>Value</h3>

<p>A formatted data frame of the data quality objectives file for frequency and completeness
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

frecompth &lt;- system.file('extdata/ExampleDQOFrequencyCompleteness.xlsx', 
     package = 'MassWateR')

frecomdat &lt;- suppressMessages(readxl::read_excel(frecompth, 
      skip = 1, na = c('NA', 'na', ''), 
      col_types = c('text', 'numeric', 'numeric', 'numeric', 'numeric', 'numeric', 'numeric')
    )) %&gt;% 
    rename(`% Completeness` = `...7`)
    
formMWRfrecom(frecomdat)
</code></pre>

<hr>
<h2 id='formMWRresults'>Format water quality monitoring results</h2><span id='topic+formMWRresults'></span>

<h3>Description</h3>

<p>Format water quality monitoring results
</p>


<h3>Usage</h3>

<pre><code class='language-R'>formMWRresults(resdat, tzone = "America/Jamaica")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="formMWRresults_+3A_resdat">resdat</code></td>
<td>
<p>input data frame for results</p>
</td></tr>
<tr><td><code id="formMWRresults_+3A_tzone">tzone</code></td>
<td>
<p>character string for time zone</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used internally within <code><a href="#topic+readMWRresults">readMWRresults</a></code> to format the input data for downstream analysis.  The formatting includes:
</p>

<ul>
<li><p> Fix date and time inputs: Activity Start Date is converted to YYYY-MM-DD as a date object, Actvity Start Time is convered to HH:MM as a character to fix artifacts from Excel import
</p>
</li>
<li><p> Minor formatting for Result Unit: For conformance to WQX, e.g., ppt is changed to ppth, s.u. is changed to NA
</p>
</li>
<li><p> Convert characteristic names: All parameters in <code>Characteristic Name</code> are converted to <code>Simple Parameter</code> in <code><a href="#topic+paramsMWR">paramsMWR</a></code> as needed
</p>
</li></ul>



<h3>Value</h3>

<p>A formatted data frame of the water quality monitoring results file
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

resdat &lt;- suppressWarnings(readxl::read_excel(respth, na = c('NA', 'na', ''), guess_max = Inf)) %&gt;% 
  dplyr::mutate_if(function(x) !lubridate::is.POSIXct(x), as.character)
  
formMWRresults(resdat)
</code></pre>

<hr>
<h2 id='formMWRwqx'>Format WQX metadata input</h2><span id='topic+formMWRwqx'></span>

<h3>Description</h3>

<p>Format WQX metadata input
</p>


<h3>Usage</h3>

<pre><code class='language-R'>formMWRwqx(wqxdat)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="formMWRwqx_+3A_wqxdat">wqxdat</code></td>
<td>
<p>input data frame for wqx metadata</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used internally within <code><a href="#topic+readMWRwqx">readMWRwqx</a></code> to format the input data for downstream analysis.  The formatting includes:
</p>

<ul>
<li><p> Convert characteristic names: All parameters in <code>Characteristic Name</code> are converted to <code>Simple Parameter</code> in <code><a href="#topic+paramsMWR">paramsMWR</a></code> as needed
</p>
</li></ul>



<h3>Value</h3>

<p>A formatted data frame of the WQX metadata file
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

wqxpth &lt;- system.file('extdata/ExampleWQX.xlsx', package = 'MassWateR')

wqxdat &lt;- suppressWarnings(readxl::read_excel(wqxpth, na = c('NA', 'na', ''), col_types = 'text'))
  
formMWRwqx(wqxdat)
</code></pre>

<hr>
<h2 id='paramsMWR'>Master parameter list and units for Characteristic Name column in results data</h2><span id='topic+paramsMWR'></span>

<h3>Description</h3>

<p>Master parameter list and units for Characteristic Name column in results data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>paramsMWR
</code></pre>


<h3>Format</h3>

<p>A <code>data.frame</code>
</p>


<h3>Details</h3>

<p>This information is used to verify the correct format of input data and for formatting output data for upload to WQX.  A column showing the corresponding WQX names is also included.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>paramsMWR
</code></pre>

<hr>
<h2 id='qcMWRacc'>Run quality control accuracy checks for water quality monitoring results</h2><span id='topic+qcMWRacc'></span>

<h3>Description</h3>

<p>Run quality control accuracy checks for water quality monitoring results
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qcMWRacc(
  res = NULL,
  acc = NULL,
  frecom = NULL,
  fset = NULL,
  runchk = TRUE,
  warn = TRUE,
  accchk = c("Field Blanks", "Lab Blanks", "Field Duplicates", "Lab Duplicates",
    "Lab Spikes / Instrument Checks"),
  suffix = "%"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="qcMWRacc_+3A_res">res</code></td>
<td>
<p>character string of path to the results file or <code>data.frame</code> for results returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code></p>
</td></tr>
<tr><td><code id="qcMWRacc_+3A_acc">acc</code></td>
<td>
<p>character string of path to the data quality objectives file for accuracy or <code>data.frame</code> returned by <code><a href="#topic+readMWRacc">readMWRacc</a></code></p>
</td></tr>
<tr><td><code id="qcMWRacc_+3A_frecom">frecom</code></td>
<td>
<p>character string of path to the data quality objectives file for frequency and completeness or <code>data.frame</code> returned by <code><a href="#topic+readMWRfrecom">readMWRfrecom</a></code></p>
</td></tr>
<tr><td><code id="qcMWRacc_+3A_fset">fset</code></td>
<td>
<p>optional list of inputs with elements named <code>res</code>, <code>acc</code>, <code>frecom</code>, <code>sit</code>, or <code>wqx</code> overrides the other arguments</p>
</td></tr>
<tr><td><code id="qcMWRacc_+3A_runchk">runchk</code></td>
<td>
<p>logical to run data checks with <code><a href="#topic+checkMWRresults">checkMWRresults</a></code> and <code><a href="#topic+checkMWRacc">checkMWRacc</a></code>, applies only if <code>res</code> or <code>acc</code> are file paths</p>
</td></tr>
<tr><td><code id="qcMWRacc_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
<tr><td><code id="qcMWRacc_+3A_accchk">accchk</code></td>
<td>
<p>character string indicating which accuracy check to return, one to any of <code>"Field Blanks"</code>, <code>"Lab Blanks"</code>, <code>"Field Duplicates"</code>, <code>"Lab Duplicates"</code>, or <code>"Lab Spikes / Instrument Checks"</code></p>
</td></tr>
<tr><td><code id="qcMWRacc_+3A_suffix">suffix</code></td>
<td>
<p>character string indicating suffix to append to percentage values</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function can be used with inputs as paths to the relevant files or as data frames returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code> and <code><a href="#topic+readMWRacc">readMWRacc</a></code>.  For the former, the full suite of data checks can be evaluated with <code>runkchk = T</code> (default) or suppressed with <code>runchk = F</code>.  In the latter case, downstream analyses may not work if data are formatted incorrectly. For convenience, a named list with the input arguments as paths or data frames can be passed to the <code>fset</code> argument instead. See the help file for <code><a href="#topic+utilMWRinput">utilMWRinput</a></code>.
</p>
<p>Note that accuracy is only evaluated on parameters in the <code>Parameter</code> column in the data quality objectives accuracy file.  A warning is returned if there are parameters in <code>Parameter</code> in the accuracy file that are not in <code>Characteristic Name</code> in the results file.
</p>
<p>Similarly, parameters in the results file in the <code>Characteristic Name</code> column that are not found in the data quality objectives accuracy file are not evaluated.  A warning is returned if there are parameters in <code>Characteristic Name</code> in the results file that are not in <code>Parameter</code> in the accuracy file.
</p>
<p>The data quality objectives file for frequency and completeness is used to screen parameters in the results file for inclusion in the accuracy tables.  Parameters with empty values in the frequency and completeness table are not returned.
</p>


<h3>Value</h3>

<p>The output shows the accuracy checks from the input files returned as a list, with each element of the list corresponding to a specific accuracy check specified with <code>accchk</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>##
# using file paths

# results path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# accuracy path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', package = 'MassWateR')

# frequency and completeness path
frecompth &lt;- system.file('extdata/ExampleDQOFrequencyCompleteness.xlsx', 
     package = 'MassWateR')

qcMWRacc(res = respth, acc = accpth, frecom = frecompth)

</code></pre>

<hr>
<h2 id='qcMWRcom'>Run quality control completeness checks for water quality monitoring results</h2><span id='topic+qcMWRcom'></span>

<h3>Description</h3>

<p>Run quality control completeness checks for water quality monitoring results
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qcMWRcom(res = NULL, frecom = NULL, fset = NULL, runchk = TRUE, warn = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="qcMWRcom_+3A_res">res</code></td>
<td>
<p>character string of path to the results file or <code>data.frame</code> for results returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code></p>
</td></tr>
<tr><td><code id="qcMWRcom_+3A_frecom">frecom</code></td>
<td>
<p>character string of path to the data quality objectives file for frequency and completeness or <code>data.frame</code> returned by <code><a href="#topic+readMWRfrecom">readMWRfrecom</a></code></p>
</td></tr>
<tr><td><code id="qcMWRcom_+3A_fset">fset</code></td>
<td>
<p>optional list of inputs with elements named <code>res</code>, <code>acc</code>, <code>frecom</code>, <code>sit</code>, or <code>wqx</code> overrides the other arguments</p>
</td></tr>
<tr><td><code id="qcMWRcom_+3A_runchk">runchk</code></td>
<td>
<p>logical to run data checks with <code><a href="#topic+checkMWRresults">checkMWRresults</a></code> and <code><a href="#topic+checkMWRfrecom">checkMWRfrecom</a></code>, applies only if <code>res</code> or <code>frecom</code> are file paths</p>
</td></tr>
<tr><td><code id="qcMWRcom_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function can be used with inputs as paths to the relevant files or as data frames returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code> and <code><a href="#topic+readMWRfrecom">readMWRfrecom</a></code>.  For the former, the full suite of data checks can be evaluated with <code>runkchk = T</code> (default) or suppressed with <code>runchk = F</code>.  In the latter case, downstream analyses may not work if data are formatted incorrectly. For convenience, a named list with the input arguments as paths or data frames can be passed to the <code>fset</code> argument instead. See the help file for <code><a href="#topic+utilMWRinput">utilMWRinput</a></code>.
</p>
<p>Note that frequency is only evaluated on parameters in the <code>Parameter</code> column in the data quality objectives frequency and completeness file.  A warning is returned if there are parameters in <code>Parameter</code> in the frequency and completeness file that are not in <code>Characteristic Name</code> in the results file.
</p>
<p>Similarly, parameters in the results file in the <code>Characteristic Name</code> column that are not found in the data quality objectives frequency and completeness file are not evaluated.  A warning is returned if there are parameters in <code>Characteristic Name</code> in the results file that are not in <code>Parameter</code> in the frequency and completeness file.
</p>


<h3>Value</h3>

<p>The output shows the completeness checks from the combined files.  Each row applies to a completeness check for a parameter. The <code>datarec</code> and <code>qualrec</code> columns show the number of data records and qualified records, respectively. The <code>datarec</code> column specifically shows only records not for quality control by excluding those as duplicates, blanks, or spikes in the count. The <code>standard</code> column shows the relevant percentage required for the quality control check from the quality control objectives file, the <code>complete</code> column shows the calculated completeness taken from the input data, and the <code>met</code> column shows if the standard was met by comparing if <code>complete</code> is greater than or equal to <code>standard</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>##
# using file paths

# results path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# frequency and completeness path
frecompth &lt;- system.file('extdata/ExampleDQOFrequencyCompleteness.xlsx', 
     package = 'MassWateR')

qcMWRcom(res = respth, frecom = frecompth)

##
# using data frames

# results data
resdat &lt;- readMWRresults(respth)

# frequency and completeness data
frecomdat &lt;- readMWRfrecom(frecompth)

qcMWRcom(res = resdat, frecom = frecomdat)

</code></pre>

<hr>
<h2 id='qcMWRfre'>Run quality control frequency checks for water quality monitoring results</h2><span id='topic+qcMWRfre'></span>

<h3>Description</h3>

<p>Run quality control frequency checks for water quality monitoring results
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qcMWRfre(
  res = NULL,
  acc = NULL,
  frecom = NULL,
  fset = NULL,
  runchk = TRUE,
  warn = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="qcMWRfre_+3A_res">res</code></td>
<td>
<p>character string of path to the results file or <code>data.frame</code> for results returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code></p>
</td></tr>
<tr><td><code id="qcMWRfre_+3A_acc">acc</code></td>
<td>
<p>character string of path to the data quality objectives file for accuracy or <code>data.frame</code> returned by <code><a href="#topic+readMWRacc">readMWRacc</a></code></p>
</td></tr>
<tr><td><code id="qcMWRfre_+3A_frecom">frecom</code></td>
<td>
<p>character string of path to the data quality objectives file for frequency and completeness or <code>data.frame</code> returned by <code><a href="#topic+readMWRfrecom">readMWRfrecom</a></code></p>
</td></tr>
<tr><td><code id="qcMWRfre_+3A_fset">fset</code></td>
<td>
<p>optional list of inputs with elements named <code>res</code>, <code>acc</code>, <code>frecom</code>, <code>sit</code>, or <code>wqx</code> overrides the other arguments</p>
</td></tr>
<tr><td><code id="qcMWRfre_+3A_runchk">runchk</code></td>
<td>
<p>logical to run data checks with <code><a href="#topic+checkMWRresults">checkMWRresults</a></code> and <code><a href="#topic+checkMWRfrecom">checkMWRfrecom</a></code>, applies only if <code>res</code> or <code>frecom</code> are file paths</p>
</td></tr>
<tr><td><code id="qcMWRfre_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function can be used with inputs as paths to the relevant files or as data frames returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code>, <code><a href="#topic+readMWRacc">readMWRacc</a></code>, and <code><a href="#topic+readMWRfrecom">readMWRfrecom</a></code>.  For the former, the full suite of data checks can be evaluated with <code>runkchk = T</code> (default) or suppressed with <code>runchk = F</code>.  In the latter case, downstream analyses may not work if data are formatted incorrectly. For convenience, a named list with the input arguments as paths or data frames can be passed to the <code>fset</code> argument instead. See the help file for <code><a href="#topic+utilMWRinput">utilMWRinput</a></code>.
</p>
<p>Note that frequency is only evaluated on parameters in the <code>Parameter</code> column in the data quality objectives frequency and completeness file.  A warning is returned if there are parameters in <code>Parameter</code> in the frequency and completeness file that are not in <code>Characteristic Name</code> in the results file.
</p>
<p>Similarly, parameters in the results file in the <code>Characteristic Name</code> column that are not found in the data quality objectives frequency and completeness file are not evaluated.  A warning is returned if there are parameters in <code>Characteristic Name</code> in the results file that are not in <code>Parameter</code> in the frequency and completeness file.
</p>


<h3>Value</h3>

<p>The output shows the frequency checks from the input files.  Each row applies to a frequency check for a parameter. The <code>Parameter</code> column shows the parameter, the <code>obs</code> column shows the total records that apply to regular activity types, the <code>check</code> column shows the relevant activity type for each frequency check, the <code>count</code> column shows the number of records that apply to a check, the <code>standard</code> column shows the relevant percentage required for the quality control check from the quality control objectives file, and the <code>met</code> column shows if the standard was met by comparing if <code>percent</code> is greater than or equal to <code>standard</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>##
# using file paths

# results path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# dqo accuracy data path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', package = 'MassWateR')

# frequency and completeness path
frecompth &lt;- system.file('extdata/ExampleDQOFrequencyCompleteness.xlsx', 
     package = 'MassWateR')

qcMWRfre(res = respth, acc = accpth, frecom = frecompth)

##
# using data frames

# results data
resdat &lt;- readMWRresults(respth)

# accuracy data
accdat &lt;- readMWRacc(accpth)

# frequency and completeness data
frecomdat &lt;- readMWRfrecom(frecompth)

qcMWRfre(res = resdat, acc = accdat, frecom = frecomdat)
</code></pre>

<hr>
<h2 id='qcMWRreview'>Create the quality control review report</h2><span id='topic+qcMWRreview'></span>

<h3>Description</h3>

<p>Create the quality control review report
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qcMWRreview(
  res = NULL,
  acc = NULL,
  frecom = NULL,
  fset = NULL,
  output_dir,
  output_file = NULL,
  rawdata = TRUE,
  dqofontsize = 7.5,
  tabfontsize = 9,
  padding = 0,
  warn = TRUE,
  runchk = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="qcMWRreview_+3A_res">res</code></td>
<td>
<p>character string of path to the results file or <code>data.frame</code> for results returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code></p>
</td></tr>
<tr><td><code id="qcMWRreview_+3A_acc">acc</code></td>
<td>
<p>character string of path to the data quality objectives file for accuracy or <code>data.frame</code> returned by <code><a href="#topic+readMWRacc">readMWRacc</a></code></p>
</td></tr>
<tr><td><code id="qcMWRreview_+3A_frecom">frecom</code></td>
<td>
<p>character string of path to the data quality objectives file for frequency and completeness or <code>data.frame</code> returned by <code><a href="#topic+readMWRfrecom">readMWRfrecom</a></code></p>
</td></tr>
<tr><td><code id="qcMWRreview_+3A_fset">fset</code></td>
<td>
<p>optional list of inputs with elements named <code>res</code>, <code>acc</code>, <code>frecom</code>, <code>sit</code>, or <code>wqx</code> overrides the other arguments</p>
</td></tr>
<tr><td><code id="qcMWRreview_+3A_output_dir">output_dir</code></td>
<td>
<p>character string of the output directory for the rendered file</p>
</td></tr>
<tr><td><code id="qcMWRreview_+3A_output_file">output_file</code></td>
<td>
<p>optional character string for the file name</p>
</td></tr>
<tr><td><code id="qcMWRreview_+3A_rawdata">rawdata</code></td>
<td>
<p>logical to include quality control accuracy summaries for raw data, e.g., field blanks, etc.</p>
</td></tr>
<tr><td><code id="qcMWRreview_+3A_dqofontsize">dqofontsize</code></td>
<td>
<p>numeric for font size in the data quality objective tables in the first page of the review</p>
</td></tr>
<tr><td><code id="qcMWRreview_+3A_tabfontsize">tabfontsize</code></td>
<td>
<p>numeric for font size in the review tables</p>
</td></tr>
<tr><td><code id="qcMWRreview_+3A_padding">padding</code></td>
<td>
<p>numeric for row padding for table output</p>
</td></tr>
<tr><td><code id="qcMWRreview_+3A_warn">warn</code></td>
<td>
<p>logical indicating if warnings from the table functions are included in the file output</p>
</td></tr>
<tr><td><code id="qcMWRreview_+3A_runchk">runchk</code></td>
<td>
<p>logical to run data checks with <code><a href="#topic+checkMWRresults">checkMWRresults</a></code>, <code><a href="#topic+checkMWRacc">checkMWRacc</a></code>, <code><a href="#topic+checkMWRfrecom">checkMWRfrecom</a></code>, applies only if <code>res</code>, <code>acc</code>, or <code>frecom</code> are file paths</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function compiles a review report as a Word document for all quality control checks included in the MassWateR package.  The report shows several tables, including the data quality objectives files for accuracy, frequency, and completeness, summary results for all accuracy checks, summary results for all frequency checks, summary results for all completeness checks, and individual results for all accuracy checks.  The report uses the individual table functions (which can be used separately) to return the results, which include <code><a href="#topic+tabMWRacc">tabMWRacc</a></code>, <code><a href="#topic+tabMWRfre">tabMWRfre</a></code>, and <code><a href="#topic+tabMWRcom">tabMWRcom</a></code>.  The help files for each of these functions can be consulted for a more detailed explanation of the quality control checks.
</p>
<p>The workflow for using this function is to import the required data (results and data quality objective files) and to fix any errors noted on import prior to creating the review report.  Additional warnings that may be of interest as returned by the individual table functions can be returned in the console by setting <code>warn = TRUE</code>.
</p>
<p>Optional arguments that can be changed as needed include specifying the file name with <code>output_file</code>, suppressing the raw data summaries at the end of the report with <code>rawdata = FALSE</code>, and changing the table font sizes (<code>dqofontsize</code> for the data quality objectives on the first page, <code>tabfontsize</code> for the remainder).
</p>
<p>The function can be used with inputs as paths to the relevant files or as data frames returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code>, <code><a href="#topic+readMWRacc">readMWRacc</a></code>, and <code><a href="#topic+readMWRfrecom">readMWRfrecom</a></code>.  For the former, the full suite of data checks can be evaluated with <code>runkchk = T</code> (default) or suppressed with <code>runchk = F</code>, as explained in the relevant help files.  In the latter case, downstream analyses may not work if data are formatted incorrectly. For convenience, a named list with the input arguments as paths or data frames can be passed to the <code>fset</code> argument instead. See the help file for <code><a href="#topic+utilMWRinput">utilMWRinput</a></code>.
</p>


<h3>Value</h3>

<p>A compiled review report named <code>qcreview.docx</code> (or name passed to <code>output_file</code>) will be saved in the directory specified by <code>output_dir</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># results data path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# dqo accuracy data path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', package = 'MassWateR')

# dqo completeness data path
frecompth &lt;- system.file('extdata/ExampleDQOFrequencyCompleteness.xlsx', package = 'MassWateR')

# results data
resdat &lt;- readMWRresults(respth)

# accuracy data
accdat &lt;- readMWRacc(accpth)

# frequency and completeness data
frecomdat &lt;- readMWRfrecom(frecompth)


# create report
qcMWRreview(res = resdat, acc = accdat, frecom = frecomdat, output_dir = tempdir())

</code></pre>

<hr>
<h2 id='readMWRacc'>Read data quality objectives for accuracy from an external file</h2><span id='topic+readMWRacc'></span>

<h3>Description</h3>

<p>Read data quality objectives for accuracy from an external file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readMWRacc(accpth, runchk = TRUE, warn = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readMWRacc_+3A_accpth">accpth</code></td>
<td>
<p>character string of path to the data quality objectives file for accuracy</p>
</td></tr>
<tr><td><code id="readMWRacc_+3A_runchk">runchk</code></td>
<td>
<p>logical to run data checks with <code><a href="#topic+checkMWRacc">checkMWRacc</a></code></p>
</td></tr>
<tr><td><code id="readMWRacc_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Data are imported with <code><a href="readxl.html#topic+read_excel">read_excel</a></code> and checked with <code><a href="#topic+checkMWRacc">checkMWRacc</a></code>.
</p>


<h3>Value</h3>

<p>A formatted data frame of data quality objectives for completeness that can be used for downstream analysis
</p>


<h3>Examples</h3>

<pre><code class='language-R'>accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', package = 'MassWateR')

accdat &lt;- readMWRacc(accpth)
head(accdat)
</code></pre>

<hr>
<h2 id='readMWRfrecom'>Read data quality objectives for frequency and completeness from an external file</h2><span id='topic+readMWRfrecom'></span>

<h3>Description</h3>

<p>Read data quality objectives for frequency and completeness from an external file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readMWRfrecom(frecompth, runchk = TRUE, warn = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readMWRfrecom_+3A_frecompth">frecompth</code></td>
<td>
<p>character string of path to the data quality objectives file for frequency and completeness</p>
</td></tr>
<tr><td><code id="readMWRfrecom_+3A_runchk">runchk</code></td>
<td>
<p>logical to run data checks with <code><a href="#topic+checkMWRfrecom">checkMWRfrecom</a></code></p>
</td></tr>
<tr><td><code id="readMWRfrecom_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Data are imported with <code><a href="readxl.html#topic+read_excel">read_excel</a></code> and checked with <code><a href="#topic+checkMWRfrecom">checkMWRfrecom</a></code>.
</p>


<h3>Value</h3>

<p>A formatted data frame of data quality objectives for frequency and completeness that can be used for downstream analysis
</p>


<h3>Examples</h3>

<pre><code class='language-R'>frecompth &lt;- system.file('extdata/ExampleDQOFrequencyCompleteness.xlsx', 
     package = 'MassWateR')

frecomdat &lt;- readMWRfrecom(frecompth)
head(frecomdat)
</code></pre>

<hr>
<h2 id='readMWRresults'>Read water quality monitoring results from an external file</h2><span id='topic+readMWRresults'></span>

<h3>Description</h3>

<p>Read water quality monitoring results from an external file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readMWRresults(respth, runchk = TRUE, warn = TRUE, tzone = "America/Jamaica")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readMWRresults_+3A_respth">respth</code></td>
<td>
<p>character string of path to the results file</p>
</td></tr>
<tr><td><code id="readMWRresults_+3A_runchk">runchk</code></td>
<td>
<p>logical to run data checks with <code><a href="#topic+checkMWRresults">checkMWRresults</a></code></p>
</td></tr>
<tr><td><code id="readMWRresults_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
<tr><td><code id="readMWRresults_+3A_tzone">tzone</code></td>
<td>
<p>character string for time zone, passed to <code><a href="#topic+formMWRresults">formMWRresults</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Date are imported with <code><a href="readxl.html#topic+read_excel">read_excel</a></code>, checked with <code><a href="#topic+checkMWRresults">checkMWRresults</a></code>, and formatted with <code><a href="#topic+formMWRresults">formMWRresults</a></code>.
</p>


<h3>Value</h3>

<p>A formatted water quality monitoring results data frame that can be used for downstream analysis
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readMWRresultsview">readMWRresultsview</a></code> for troubleshooting import checks
</p>


<h3>Examples</h3>

<pre><code class='language-R'>respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

resdat &lt;- readMWRresults(respth)
head(resdat)
</code></pre>

<hr>
<h2 id='readMWRresultsview'>Create summary spreadsheet of the water quality monitoring results</h2><span id='topic+readMWRresultsview'></span>

<h3>Description</h3>

<p>Create summary spreadsheet of unique values for each column in the water quality results file to check for data mistakes prior to running the <code><a href="#topic+readMWRresults">readMWRresults</a></code> function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readMWRresultsview(
  respth,
  columns = NULL,
  output_dir,
  output_file = NULL,
  maxlen = 8
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readMWRresultsview_+3A_respth">respth</code></td>
<td>
<p>character string of path to the results file</p>
</td></tr>
<tr><td><code id="readMWRresultsview_+3A_columns">columns</code></td>
<td>
<p>character string indicating which columns to view, defaults to all</p>
</td></tr>
<tr><td><code id="readMWRresultsview_+3A_output_dir">output_dir</code></td>
<td>
<p>character string of the output directory for the rendered file</p>
</td></tr>
<tr><td><code id="readMWRresultsview_+3A_output_file">output_file</code></td>
<td>
<p>optional character string for the name of the .csv file output, must include the file extension</p>
</td></tr>
<tr><td><code id="readMWRresultsview_+3A_maxlen">maxlen</code></td>
<td>
<p>numeric to truncate numeric values to the specified length</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Acceptable options for the <code>columns</code> argument include any of the column names in the results file. The default setting (<code>NULL</code>) will show every column in the results file.
</p>
<p>The output of this function can be useful to troubleshoot the checks when importing the water quality monitoring result file with <code>readMWRresults</code> (see <a href="https://massbays-tech.github.io/MassWateR/articles/MassWateR.html#data-import-and-checks">https://massbays-tech.github.io/MassWateR/articles/MassWateR.html#data-import-and-checks</a>).
</p>


<h3>Value</h3>

<p>Creates a spreadsheet at the location specified by <code>output_dir</code>. Each column shows the unique values.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# all columns
readMWRresultsview(respth, output_dir = tempdir())

# parameters and units
readMWRresultsview(respth, columns = c('Characteristic Name', 'Result Unit'),
   output_dir = tempdir())
</code></pre>

<hr>
<h2 id='readMWRsites'>Read site metadata from an external file</h2><span id='topic+readMWRsites'></span>

<h3>Description</h3>

<p>Read site metadata from an external file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readMWRsites(sitpth, runchk = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readMWRsites_+3A_sitpth">sitpth</code></td>
<td>
<p>character string of path to the site metadata file</p>
</td></tr>
<tr><td><code id="readMWRsites_+3A_runchk">runchk</code></td>
<td>
<p>logical to run data checks with <code><a href="#topic+checkMWRsites">checkMWRsites</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Data are imported with <code><a href="readxl.html#topic+read_excel">read_excel</a></code> and checked with <code><a href="#topic+checkMWRsites">checkMWRsites</a></code>.
</p>


<h3>Value</h3>

<p>A formatted data frame of site metadata that can be used for downstream analysis
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sitpth &lt;- system.file('extdata/ExampleSites.xlsx', package = 'MassWateR')

sitdat &lt;- readMWRsites(sitpth)
head(sitdat)
</code></pre>

<hr>
<h2 id='readMWRwqx'>Read water quality exchange (wqx) metadata input from an external file</h2><span id='topic+readMWRwqx'></span>

<h3>Description</h3>

<p>Read water quality exchange (wqx) metadata input from an external file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readMWRwqx(wqxpth, runchk = TRUE, warn = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readMWRwqx_+3A_wqxpth">wqxpth</code></td>
<td>
<p>character string of path to the wqx metadata file</p>
</td></tr>
<tr><td><code id="readMWRwqx_+3A_runchk">runchk</code></td>
<td>
<p>logical to run data checks with <code><a href="#topic+checkMWRwqx">checkMWRwqx</a></code></p>
</td></tr>
<tr><td><code id="readMWRwqx_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Date are imported with <code><a href="readxl.html#topic+read_excel">read_excel</a></code>, checked with <code><a href="#topic+checkMWRwqx">checkMWRwqx</a></code>.
</p>


<h3>Value</h3>

<p>A formatted data frame that can be used for downstream analysis
</p>


<h3>Examples</h3>

<pre><code class='language-R'>wqxpth &lt;- system.file('extdata/ExampleWQX.xlsx', package = 'MassWateR')

wqxdat &lt;- readMWRwqx(wqxpth)
head(wqxdat)
</code></pre>

<hr>
<h2 id='tabMWRacc'>Create a formatted table of quality control accuracy checks</h2><span id='topic+tabMWRacc'></span>

<h3>Description</h3>

<p>Create a formatted table of quality control accuracy checks
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tabMWRacc(
  res = NULL,
  acc = NULL,
  frecom = NULL,
  fset = NULL,
  runchk = TRUE,
  warn = TRUE,
  accchk = c("Field Blanks", "Lab Blanks", "Field Duplicates", "Lab Duplicates",
    "Lab Spikes / Instrument Checks"),
  type = c("individual", "summary", "percent"),
  pass_col = "#57C4AD",
  fail_col = "#DB4325",
  suffix = "%",
  caption = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tabMWRacc_+3A_res">res</code></td>
<td>
<p>character string of path to the results file or <code>data.frame</code> for results returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code></p>
</td></tr>
<tr><td><code id="tabMWRacc_+3A_acc">acc</code></td>
<td>
<p>character string of path to the data quality objectives file for accuracy or <code>data.frame</code> returned by <code><a href="#topic+readMWRacc">readMWRacc</a></code></p>
</td></tr>
<tr><td><code id="tabMWRacc_+3A_frecom">frecom</code></td>
<td>
<p>character string of path to the data quality objectives file for frequency and completeness or <code>data.frame</code> returned by <code><a href="#topic+readMWRfrecom">readMWRfrecom</a></code>, applies only if <code>type = "summary"</code> or <code>type = "percent"</code></p>
</td></tr>
<tr><td><code id="tabMWRacc_+3A_fset">fset</code></td>
<td>
<p>optional list of inputs with elements named <code>res</code>, <code>acc</code>, <code>frecom</code>, <code>sit</code>, or <code>wqx</code> overrides the other arguments</p>
</td></tr>
<tr><td><code id="tabMWRacc_+3A_runchk">runchk</code></td>
<td>
<p>logical to run data checks with <code><a href="#topic+checkMWRresults">checkMWRresults</a></code> and <code><a href="#topic+checkMWRacc">checkMWRacc</a></code>, applies only if <code>res</code> or <code>acc</code> are file paths</p>
</td></tr>
<tr><td><code id="tabMWRacc_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
<tr><td><code id="tabMWRacc_+3A_accchk">accchk</code></td>
<td>
<p>character string indicating which accuracy check to return, one to any of <code>"Field Blanks"</code>, <code>"Lab Blanks"</code>, <code>"Field Duplicates"</code>, <code>"Lab Duplicates"</code>, or <code>"Lab Spikes / Instrument Checks"</code></p>
</td></tr>
<tr><td><code id="tabMWRacc_+3A_type">type</code></td>
<td>
<p>character string indicating <code>individual</code>, <code>summary</code> or <code>percent</code> tabular output, see details</p>
</td></tr>
<tr><td><code id="tabMWRacc_+3A_pass_col">pass_col</code></td>
<td>
<p>character string (as hex code) for the cell color of checks that pass, applies only if <code>type = 'percent'</code></p>
</td></tr>
<tr><td><code id="tabMWRacc_+3A_fail_col">fail_col</code></td>
<td>
<p>character string (as hex code) for the cell color of checks that fail, applies only if <code>type = 'percent'</code></p>
</td></tr>
<tr><td><code id="tabMWRacc_+3A_suffix">suffix</code></td>
<td>
<p>character string indicating suffix to append to percentage values</p>
</td></tr>
<tr><td><code id="tabMWRacc_+3A_caption">caption</code></td>
<td>
<p>logical to include a caption from <code>accchk</code>, only applies if <code>type = "individual"</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function can be used with inputs as paths to the relevant files or as data frames returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code> and <code><a href="#topic+readMWRacc">readMWRacc</a></code>.  For the former, the full suite of data checks can be evaluated with <code>runkchk = T</code> (default) or suppressed with <code>runchk = F</code>, as explained in the relevant help files.  In the latter case, downstream analyses may not work if data are formatted incorrectly. For convenience, a named list with the input arguments as paths or data frames can be passed to the <code>fset</code> argument instead. See the help file for <code><a href="#topic+utilMWRinput">utilMWRinput</a></code>.
</p>
<p>Also note that accuracy is only evaluated on parameters that are shared between the results file and data quality objectives file for accuracy.  A warning is returned for parameters that do not match between the files. This warning can be suppressed by setting <code>warn = FALSE</code>.
</p>
<p>The function can return three types of tables as specified with the <code>type</code> argument: <code>"individual"</code>, <code>"summary"</code>, or <code>"percent"</code>.  The individual tables are specific to each type of accuracy check for each parameter (e.g., field blanks, lab blanks, etc.).  The summary table summarizes all accuracy checks by the number of checks and how many hit/misses are returned for each across all parameters.  The percent table is similar to the summary table, but showing only percentages with appropriate color-coding for hit/misses. The data quality objectives file for frequency and completeness is required if <code>type = "summary"</code> or <code>type = "percent"</code>.
</p>
<p>For <code>type = "individual"</code>, the quality control tables for accuracy are retrieved by specifying the check with the <code>accchk</code> argument.  The <code>accchk</code> argument can be used to specify one of the following values to retrieve the relevant tables: <code>"Field Blanks"</code>, <code>"Lab Blanks"</code>, <code>"Field Duplicates"</code>, <code>"Lab Duplicates"</code>, or <code>"Lab Spikes / Instrument Checks"</code>.
</p>
<p>For <code>type = "summary"</code>, the function summarizes all accuracy checks by counting the number of quality control checks, number of misses, and percent acceptance for each parameter. All accuracy checks are used and the <code>accchk</code> argument does not apply.
</p>
<p>For <code>type = "percent"</code>, the function returns a similar table as for the summary option, except only the percentage of checks that pass for each parameter are shown in wide format. Cells are color-coded based on the percentage of checks that have passed using the percent thresholds from the <code>% Completeness</code> column of the data quality objectives file for frequency and completeness. Parameters without an entry for <code>% Completeness</code> are not color-coded and an appropriate warning is returned. All accuracy checks are used and the <code>accchk</code> argument does not apply.
</p>
<p>Inputs for the results and data quality objectives for accuracy are processed internally with <code><a href="#topic+qcMWRacc">qcMWRacc</a></code> and the same arguments are accepted for this function, in addition to others listed above.
</p>


<h3>Value</h3>

<p>A <code><a href="flextable.html#topic+flextable">flextable</a></code> object with formatted results.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
##
# using file paths

# results path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# accuracy path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', 
     package = 'MassWateR')

# frequency and completeness path
frecompth &lt;- system.file('extdata/ExampleDQOFrequencyCompleteness.xlsx', 
     package = 'MassWateR')

# table as individual
tabMWRacc(res = respth, acc = accpth, frecom = frecompth, type = 'individual', 
     accchk = 'Field Blanks')
</code></pre>

<hr>
<h2 id='tabMWRcom'>Create a formatted table of quality control completeness checks</h2><span id='topic+tabMWRcom'></span>

<h3>Description</h3>

<p>Create a formatted table of quality control completeness checks
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tabMWRcom(
  res = NULL,
  frecom = NULL,
  fset = NULL,
  runchk = TRUE,
  warn = TRUE,
  pass_col = "#57C4AD",
  fail_col = "#DB4325",
  digits = 0,
  suffix = "%",
  parameterwd = 1.15,
  noteswd = 3
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tabMWRcom_+3A_res">res</code></td>
<td>
<p>character string of path to the results file or <code>data.frame</code> for results returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code></p>
</td></tr>
<tr><td><code id="tabMWRcom_+3A_frecom">frecom</code></td>
<td>
<p>character string of path to the data quality objectives file for frequency and completeness or <code>data.frame</code> returned by <code><a href="#topic+readMWRfrecom">readMWRfrecom</a></code></p>
</td></tr>
<tr><td><code id="tabMWRcom_+3A_fset">fset</code></td>
<td>
<p>optional list of inputs with elements named <code>res</code>, <code>acc</code>, <code>frecom</code>, <code>sit</code>, or <code>wqx</code> overrides the other arguments</p>
</td></tr>
<tr><td><code id="tabMWRcom_+3A_runchk">runchk</code></td>
<td>
<p>logical to run data checks with <code><a href="#topic+checkMWRresults">checkMWRresults</a></code> and <code><a href="#topic+checkMWRfrecom">checkMWRfrecom</a></code>, applies only if <code>res</code> or <code>frecom</code> are file paths</p>
</td></tr>
<tr><td><code id="tabMWRcom_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
<tr><td><code id="tabMWRcom_+3A_pass_col">pass_col</code></td>
<td>
<p>character string (as hex code) for the cell color of checks that pass</p>
</td></tr>
<tr><td><code id="tabMWRcom_+3A_fail_col">fail_col</code></td>
<td>
<p>character string (as hex code) for the cell color of checks that fail</p>
</td></tr>
<tr><td><code id="tabMWRcom_+3A_digits">digits</code></td>
<td>
<p>numeric indicating number of significant digits to report for percentages</p>
</td></tr>
<tr><td><code id="tabMWRcom_+3A_suffix">suffix</code></td>
<td>
<p>character string indicating suffix to append to percentage values</p>
</td></tr>
<tr><td><code id="tabMWRcom_+3A_parameterwd">parameterwd</code></td>
<td>
<p>numeric indicating width of the parameter column</p>
</td></tr>
<tr><td><code id="tabMWRcom_+3A_noteswd">noteswd</code></td>
<td>
<p>numeric indicating width of notes column</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function can be used with inputs as paths to the relevant files or as data frames returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code> and <code><a href="#topic+readMWRfrecom">readMWRfrecom</a></code>.  For the former, the full suite of data checks can be evaluated with <code>runkchk = T</code> (default) or suppressed with <code>runchk = F</code>, as explained in the relevant help files.  In the latter case, downstream analyses may not work if data are formatted incorrectly. For convenience, a named list with the input arguments as paths or data frames can be passed to the <code>fset</code> argument instead. See the help file for <code><a href="#topic+utilMWRinput">utilMWRinput</a></code>.
</p>
<p>Also note that completeness is only evaluated on parameters that are shared between the results file and data quality objectives file for frequency and completeness. A warning is returned for parameters that do not match between the files. This warning can be suppressed by setting <code>warn = FALSE</code>.
</p>
<p>A summary table showing the number of data records, number of qualified records, and percent completeness is created.  The <code>% Completeness</code> column shows cells as green or red if the required percentage of observations for completeness are present as specified in the data quality objectives file.  The <code>Hit/ Miss</code> column shows similar information but in text format, i.e., <code>MISS</code> is shown if the quality control standard for completeness is not met.
</p>
<p>Inputs for the results and data quality objectives for frequency and completeness are processed internally with <code><a href="#topic+qcMWRcom">qcMWRcom</a></code> and the same arguments are accepted for this function, in addition to others listed above.
</p>


<h3>Value</h3>

<p>A <code><a href="flextable.html#topic+flextable">flextable</a></code> object with formatted results showing summary counts for all completeness checks for each parameter.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>##
# using file paths

# results path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# frequency and completeness path
frecompth &lt;- system.file('extdata/ExampleDQOFrequencyCompleteness.xlsx', 
     package = 'MassWateR')

tabMWRcom(res = respth, frecom = frecompth)

##
# using data frames

# results data
resdat &lt;- readMWRresults(respth)

# frequency and completeness data
frecomdat &lt;- readMWRfrecom(frecompth)

tabMWRcom(res = resdat, frecom = frecomdat)

</code></pre>

<hr>
<h2 id='tabMWRfre'>Create a formatted table of quality control frequency checks</h2><span id='topic+tabMWRfre'></span>

<h3>Description</h3>

<p>Create a formatted table of quality control frequency checks
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tabMWRfre(
  res = NULL,
  acc = NULL,
  frecom = NULL,
  fset = NULL,
  runchk = TRUE,
  warn = TRUE,
  type = c("summary", "percent"),
  pass_col = "#57C4AD",
  fail_col = "#DB4325",
  digits = 0,
  suffix = "%"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tabMWRfre_+3A_res">res</code></td>
<td>
<p>character string of path to the results file or <code>data.frame</code> for results returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code></p>
</td></tr>
<tr><td><code id="tabMWRfre_+3A_acc">acc</code></td>
<td>
<p>character string of path to the data quality objectives file for accuracy or <code>data.frame</code> returned by <code><a href="#topic+readMWRacc">readMWRacc</a></code></p>
</td></tr>
<tr><td><code id="tabMWRfre_+3A_frecom">frecom</code></td>
<td>
<p>character string of path to the data quality objectives file for frequency and completeness or <code>data.frame</code> returned by <code><a href="#topic+readMWRfrecom">readMWRfrecom</a></code></p>
</td></tr>
<tr><td><code id="tabMWRfre_+3A_fset">fset</code></td>
<td>
<p>optional list of inputs with elements named <code>res</code>, <code>acc</code>, <code>frecom</code>, <code>sit</code>, or <code>wqx</code> overrides the other arguments</p>
</td></tr>
<tr><td><code id="tabMWRfre_+3A_runchk">runchk</code></td>
<td>
<p>logical to run data checks with <code><a href="#topic+checkMWRresults">checkMWRresults</a></code> and <code><a href="#topic+checkMWRfrecom">checkMWRfrecom</a></code>, applies only if <code>res</code> or <code>frecom</code> are file paths</p>
</td></tr>
<tr><td><code id="tabMWRfre_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
<tr><td><code id="tabMWRfre_+3A_type">type</code></td>
<td>
<p>character string indicating <code>summary</code> or <code>percent</code> tabular output, see datails</p>
</td></tr>
<tr><td><code id="tabMWRfre_+3A_pass_col">pass_col</code></td>
<td>
<p>character string (as hex code) for the cell color of checks that pass, applies only if <code>type = 'percent'</code></p>
</td></tr>
<tr><td><code id="tabMWRfre_+3A_fail_col">fail_col</code></td>
<td>
<p>character string (as hex code) for the cell color of checks that fail, applies only if <code>type = 'percent'</code></p>
</td></tr>
<tr><td><code id="tabMWRfre_+3A_digits">digits</code></td>
<td>
<p>numeric indicating number of significant digits to report for percentages</p>
</td></tr>
<tr><td><code id="tabMWRfre_+3A_suffix">suffix</code></td>
<td>
<p>character string indicating suffix to append to percentage values</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function can be used with inputs as paths to the relevant files or as data frames returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code>, <code><a href="#topic+readMWRacc">readMWRacc</a></code>, and <code><a href="#topic+readMWRfrecom">readMWRfrecom</a></code>.  For the former, the full suite of data checks can be evaluated with <code>runkchk = T</code> (default) or suppressed with <code>runchk = F</code>, as explained in the relevant help files.  In the latter case, downstream analyses may not work if data are formatted incorrectly. For convenience, a named list with the input arguments as paths or data frames can be passed to the <code>fset</code> argument instead. See the help file for <code><a href="#topic+utilMWRinput">utilMWRinput</a></code>.
</p>
<p>Also note that completeness is only evaluated on parameters that are shared between the results file and data quality objectives file for frequency and completeness.  A warning is returned for parameters that do not match between the files. This warning can be suppressed by setting <code>warn = FALSE</code>.
</p>
<p>The quality control tables for frequency show the number of records that apply to a given check (e.g., Lab Blank, Field Blank, etc.) relative to the number of &quot;regular&quot; data records (e.g., field samples or measures) for each parameter.  A summary of all frequency checks for each parameter is provided if <code>type = "summary"</code> or a color-coded table showing similar information as percentages for each parameter is provided if <code>type = "percent"</code>.
</p>
<p>Inputs for the results and data quality objectives for accuracy and frequency and completeness are processed internally with <code><a href="#topic+qcMWRcom">qcMWRcom</a></code> and the same arguments are accepted for this function, in addition to others listed above.
</p>


<h3>Value</h3>

<p>A <code><a href="flextable.html#topic+flextable">flextable</a></code> object with formatted results.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
##
# using file paths

# results path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# dqo accuracy data path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', package = 'MassWateR')

# frequency and completeness path
frecompth &lt;- system.file('extdata/ExampleDQOFrequencyCompleteness.xlsx', 
     package = 'MassWateR')

# table as summary
tabMWRfre(res = respth, acc = accpth, frecom = frecompth, type = 'summary')

# table as percent
tabMWRfre(res = respth, acc = accpth, frecom = frecompth, type = 'percent')

##
# using data frames

# results data
resdat &lt;- readMWRresults(respth)

# accuracy data
accdat &lt;- readMWRacc(accpth)

# frequency and completeness data
frecomdat &lt;- readMWRfrecom(frecompth)

# table as summary
tabMWRfre(res = resdat, acc = accdat, frecom = frecomdat, type = 'summary')

# table as percent
tabMWRfre(res = resdat, acc = accdat, frecom = frecomdat, type = 'percent')
</code></pre>

<hr>
<h2 id='tabMWRwqx'>Create and save tables in a single workbook for WQX upload</h2><span id='topic+tabMWRwqx'></span>

<h3>Description</h3>

<p>Create and save tables in a single workbook for WQX upload
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tabMWRwqx(
  res = NULL,
  acc = NULL,
  sit = NULL,
  wqx = NULL,
  fset = NULL,
  output_dir,
  output_file = NULL,
  warn = TRUE,
  runchk = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tabMWRwqx_+3A_res">res</code></td>
<td>
<p>character string of path to the results file or <code>data.frame</code> for results returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code></p>
</td></tr>
<tr><td><code id="tabMWRwqx_+3A_acc">acc</code></td>
<td>
<p>character string of path to the data quality objectives file for accuracy or <code>data.frame</code> returned by <code><a href="#topic+readMWRacc">readMWRacc</a></code></p>
</td></tr>
<tr><td><code id="tabMWRwqx_+3A_sit">sit</code></td>
<td>
<p>character string of path to the site metadata file or <code>data.frame</code> for site metadata returned by <code><a href="#topic+readMWRsites">readMWRsites</a></code></p>
</td></tr>
<tr><td><code id="tabMWRwqx_+3A_wqx">wqx</code></td>
<td>
<p>character string of path to the wqx metadata file or <code>data.frame</code> for wqx metadata returned by <code><a href="#topic+readMWRwqx">readMWRwqx</a></code></p>
</td></tr>
<tr><td><code id="tabMWRwqx_+3A_fset">fset</code></td>
<td>
<p>optional list of inputs with elements named <code>res</code>, <code>acc</code>, <code>frecom</code>, <code>sit</code>, or <code>wqx</code> overrides the other arguments</p>
</td></tr>
<tr><td><code id="tabMWRwqx_+3A_output_dir">output_dir</code></td>
<td>
<p>character string of the output directory for the results</p>
</td></tr>
<tr><td><code id="tabMWRwqx_+3A_output_file">output_file</code></td>
<td>
<p>optional character string for the file name, must include .xlsx suffix</p>
</td></tr>
<tr><td><code id="tabMWRwqx_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
<tr><td><code id="tabMWRwqx_+3A_runchk">runchk</code></td>
<td>
<p>logical to run data checks with <code><a href="#topic+checkMWRresults">checkMWRresults</a></code>, <code><a href="#topic+checkMWRacc">checkMWRacc</a></code>, <code><a href="#topic+checkMWRsites">checkMWRsites</a></code>, <code><a href="#topic+checkMWRwqx">checkMWRwqx</a></code>, applies only if <code>res</code>, <code>acc</code>, <code>sit</code>, or <code>wqx</code> are file paths</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function will export a single Excel workbook with three sheets, named &quot;Project&quot;, &quot;Locations&quot;, and &quot;Results&quot;. The output is populated with as much content as possible based on information in the input files.  The remainder of the information not included in the output will need to be manually entered before uploading the data to WQX.  All required columns are present, but individual rows will need to be verified for completeness.  It is the responsibility of the user to verify this information is complete and correct before uploading the data.
</p>
<p>The workflow for using this function is to import the required data (results, data quality objectives file for accuracy, site metadata, and wqx metadata) and to fix any errors noted on import prior to creating the output. The function can be used with inputs as paths to the relevant files or as data frames returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code>, <code><a href="#topic+readMWRacc">readMWRacc</a></code>, <code><a href="#topic+readMWRsites">readMWRsites</a></code>, and <code><a href="#topic+readMWRwqx">readMWRwqx</a></code>.  For the former, the full suite of data checks can be evaluated with <code>runkchk = T</code> (default) or suppressed with <code>runchk = F</code>, as explained in the relevant help files.  In the latter case, downstream analyses may not work if data are formatted incorrectly. For convenience, a named list with the input arguments as paths or data frames can be passed to the <code>fset</code> argument instead. See the help file for <code><a href="#topic+utilMWRinput">utilMWRinput</a></code>.
</p>
<p>The name of the output file can also be changed using the <code>output_file</code> argument, the default being <code>wqxtab.xlsx</code>.  Warnings can also be turned off or on (default) using the <code>warn</code> argument.  This returns any warnings when data are imported and only applies if the file inputs are paths.
</p>


<h3>Value</h3>

<p>An Excel workbook named <code>wqxtab.xlsx</code> (or name passed to <code>output_file</code>) will be saved in the directory specified by <code>output_dir</code>. The workbook will include three sheets names &quot;Projects&quot;, &quot;Locations&quot;, and &quot;Results&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># results data path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# dqo accuracy data path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', package = 'MassWateR')

# site data path
sitpth &lt;- system.file('extdata/ExampleSites.xlsx', package = 'MassWateR')

# wqx data path
wqxpth &lt;- system.file('extdata/ExampleWQX.xlsx', package = 'MassWateR')

# results data
resdat &lt;- readMWRresults(respth)

# accuracy data
accdat &lt;- readMWRacc(accpth)

# site data
sitdat &lt;- readMWRsites(sitpth)

# wqx data
wqxdat &lt;- readMWRwqx(wqxpth)

# create workbook
tabMWRwqx(res = resdat, acc = accdat, sit = sitdat, wqx = wqxdat, output_dir = tempdir())
</code></pre>

<hr>
<h2 id='thresholdMWR'>Master thresholds list for analysis of results data</h2><span id='topic+thresholdMWR'></span>

<h3>Description</h3>

<p>Master thresholds list for analysis of results data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>thresholdMWR
</code></pre>


<h3>Format</h3>

<p>A <code>data.frame</code> of 28 rows and 10 columns
</p>


<h3>Details</h3>

<p>This file includes appropriate threshold values of water quality parameters for marine and freshwater environments based on state standards or typical ranges in Massachusetts.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>thresholdMWR
</code></pre>

<hr>
<h2 id='utilMWRfilter'>Filter results data by parameter, date range, site, result attributes, and/or location group</h2><span id='topic+utilMWRfilter'></span>

<h3>Description</h3>

<p>Filter results data by parameter, date range, site, result attributes, and/or location group
</p>


<h3>Usage</h3>

<pre><code class='language-R'>utilMWRfilter(
  resdat,
  sitdat = NULL,
  param,
  dtrng = NULL,
  site = NULL,
  resultatt = NULL,
  locgroup = NULL,
  alllocgroup = FALSE,
  allresultatt = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="utilMWRfilter_+3A_resdat">resdat</code></td>
<td>
<p>results data as returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code></p>
</td></tr>
<tr><td><code id="utilMWRfilter_+3A_sitdat">sitdat</code></td>
<td>
<p>site metadata file as returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code></p>
</td></tr>
<tr><td><code id="utilMWRfilter_+3A_param">param</code></td>
<td>
<p>character string to filter results by a parameter in <code>"Characteristic Name"</code></p>
</td></tr>
<tr><td><code id="utilMWRfilter_+3A_dtrng">dtrng</code></td>
<td>
<p>character string of length two for the date ranges as YYYY-MM-DD</p>
</td></tr>
<tr><td><code id="utilMWRfilter_+3A_site">site</code></td>
<td>
<p>character string of sites to include, default all</p>
</td></tr>
<tr><td><code id="utilMWRfilter_+3A_resultatt">resultatt</code></td>
<td>
<p>character string of result attributes to include, default all</p>
</td></tr>
<tr><td><code id="utilMWRfilter_+3A_locgroup">locgroup</code></td>
<td>
<p>character string of location groups to include from the <code>"Location Group"</code> column in the site metadata file</p>
</td></tr>
<tr><td><code id="utilMWRfilter_+3A_alllocgroup">alllocgroup</code></td>
<td>
<p>logical indicating if results data are filtered by all location groups in <code>"Location Group"</code> in the site metadata file if <code>locgroup = NULL</code>, used only in <code><a href="#topic+anlzMWRdate">anlzMWRdate</a></code></p>
</td></tr>
<tr><td><code id="utilMWRfilter_+3A_allresultatt">allresultatt</code></td>
<td>
<p>logical indicating if results data are filtered by all result attributes if <code>resultatt = NULL</code>, used only in <code><a href="#topic+anlzMWRsite">anlzMWRsite</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>resdat</code> filtered by <code>param</code>, <code>dtrng</code>, <code>site</code>, <code>resultatt</code>, and/or <code>locgroup</code>, otherwise <code>resdat</code> filtered only by <code>param</code> if other arguments are <code>NULL</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># results file path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# results data
resdat &lt;- readMWRresults(respth)

# site data path
sitpth &lt;- system.file('extdata/ExampleSites.xlsx', package = 'MassWateR')

# site data
sitdat &lt;- readMWRsites(sitpth)

# filter by parameter, date range
utilMWRfilter(resdat, param = 'DO', dtrng = c('2022-06-01', '2022-06-30'))

# filter by parameter, site
utilMWRfilter(resdat, param = 'DO', site = c('ABT-026', 'ABT-062', 'ABT-077'))

# filter by parameter, result attribute
utilMWRfilter(resdat, param = 'DO', resultatt = 'DRY')

# filter by parameter, location group, date range
utilMWRfilter(resdat, param = 'DO', sitdat = sitdat, 
     locgroup = 'Assabet', dtrng = c('2022-06-01', '2022-06-30'))
</code></pre>

<hr>
<h2 id='utilMWRfiltersurface'>Filter results data to surface measurements</h2><span id='topic+utilMWRfiltersurface'></span>

<h3>Description</h3>

<p>Filter results data to surface measurements
</p>


<h3>Usage</h3>

<pre><code class='language-R'>utilMWRfiltersurface(resdat)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="utilMWRfiltersurface_+3A_resdat">resdat</code></td>
<td>
<p>results data as returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used internally for all analysis functions
</p>


<h3>Value</h3>

<p><code>resdat</code> filtered by <code>Activity Depth/Height Measure</code> less than or equal to 1 meter or 3.3 feet or <code>Activity Relative Depth Name</code> as <code>"Surface"</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># results file path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# results data
resdat &lt;- readMWRresults(respth)

# filter surface data
utilMWRfiltersurface(resdat)
</code></pre>

<hr>
<h2 id='utilMWRfre'>Prep results data for frequency checks</h2><span id='topic+utilMWRfre'></span>

<h3>Description</h3>

<p>Prep results data for frequency checks
</p>


<h3>Usage</h3>

<pre><code class='language-R'>utilMWRfre(resdat, param, accdat, warn = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="utilMWRfre_+3A_resdat">resdat</code></td>
<td>
<p>results data as returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code></p>
</td></tr>
<tr><td><code id="utilMWRfre_+3A_param">param</code></td>
<td>
<p>character string to filter results and check if a parameter in the <code>"Characteristic Name"</code> column in the results file is also found in the data quality objectives file for accuracy, see details</p>
</td></tr>
<tr><td><code id="utilMWRfre_+3A_accdat">accdat</code></td>
<td>
<p><code>data.frame</code> for data quality objectives file for accuracy as returned by <code><a href="#topic+readMWRacc">readMWRacc</a></code></p>
</td></tr>
<tr><td><code id="utilMWRfre_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is similar to <code>utilMWRlimits</code> with some additional processing appropriate for creating the frequency table in <code>tabMWRfree</code>.  The <code>param</code> argument is used to identify the appropriate <code>"MDL"</code> or <code>"UQL"</code> values in the data quality objectives file for accuracy.  A warning is returned to the console if the accuracy file does not contain the appropriate information for the parameter.  Results will be filtered by <code>param</code> regardless of any warning.
</p>


<h3>Value</h3>

<p><code>resdat</code> filtered by <code>param</code> with any entries in <code>"Result Value"</code> as <code>"BDL"</code> or <code>"AQL"</code> replaced with appropriate values in the <code>"Quantitation Limit"</code> column, if present, otherwise the <code>"MDL"</code> or <code>"UQL"</code> columns from the data quality objectives file for accuracy are used.  Values as <code>"BDL"</code> use one half of the appropriate limit. Values not in the <code>"Value Range"</code> column of the accuracy file are removed from the output.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># results file path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# results data
resdat &lt;- readMWRresults(respth)

# accuracy path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', 
     package = 'MassWateR')

# accuracy data
accdat &lt;- readMWRacc(accpth)

# apply to total phosphorus
utilMWRfre(resdat, accdat, param = 'TP')

# apply to E.coli
utilMWRfre(resdat, accdat, param = 'E.coli')
</code></pre>

<hr>
<h2 id='utilMWRhttpgrace'>Load external file from remote source, fail gracefully</h2><span id='topic+utilMWRhttpgrace'></span>

<h3>Description</h3>

<p>Load external file from remote source, fail gracefully
</p>


<h3>Usage</h3>

<pre><code class='language-R'>utilMWRhttpgrace(remote_file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="utilMWRhttpgrace_+3A_remote_file">remote_file</code></td>
<td>
<p>URL of the external file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The external file as an RData object
</p>


<h3>Examples</h3>

<pre><code class='language-R'># fails gracefully
utilMWRhttpgrace('http://httpbin.org/status/404')

# imports data or fails gracefully
fl &lt;- 'https://github.com/massbays-tech/MassWateRdata/raw/main/data/streamsMWR.RData'
utilMWRhttpgrace(fl)

</code></pre>

<hr>
<h2 id='utilMWRinput'>Utility function to import data as paths or data frames</h2><span id='topic+utilMWRinput'></span>

<h3>Description</h3>

<p>Utility function to import data as paths or data frames
</p>


<h3>Usage</h3>

<pre><code class='language-R'>utilMWRinput(
  res = NULL,
  acc = NULL,
  frecom = NULL,
  sit = NULL,
  wqx = NULL,
  fset = NULL,
  runchk = TRUE,
  warn = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="utilMWRinput_+3A_res">res</code></td>
<td>
<p>character string of path to the results file or <code>data.frame</code> for results returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code></p>
</td></tr>
<tr><td><code id="utilMWRinput_+3A_acc">acc</code></td>
<td>
<p>character string of path to the data quality objectives file for accuracy or <code>data.frame</code> returned by <code><a href="#topic+readMWRacc">readMWRacc</a></code></p>
</td></tr>
<tr><td><code id="utilMWRinput_+3A_frecom">frecom</code></td>
<td>
<p>character string of path to the data quality objectives file for frequency and completeness or <code>data.frame</code> returned by <code><a href="#topic+readMWRfrecom">readMWRfrecom</a></code></p>
</td></tr>
<tr><td><code id="utilMWRinput_+3A_sit">sit</code></td>
<td>
<p>character string of path to the site metadata file or <code>data.frame</code> for site metadata returned by <code><a href="#topic+readMWRsites">readMWRsites</a></code></p>
</td></tr>
<tr><td><code id="utilMWRinput_+3A_wqx">wqx</code></td>
<td>
<p>character string of path to the wqx metadata file or <code>data.frame</code> for wqx metadata returned by <code><a href="#topic+readMWRwqx">readMWRwqx</a></code></p>
</td></tr>
<tr><td><code id="utilMWRinput_+3A_fset">fset</code></td>
<td>
<p>optional list of inputs with elements named <code>res</code>, <code>acc</code>, <code>frecom</code>, <code>sit</code>, or <code>wqx</code>, overrides the other arguments, see details</p>
</td></tr>
<tr><td><code id="utilMWRinput_+3A_runchk">runchk</code></td>
<td>
<p>logical to run data checks with <code><a href="#topic+checkMWRresults">checkMWRresults</a></code>, <code><a href="#topic+checkMWRacc">checkMWRacc</a></code>, <code><a href="#topic+checkMWRfrecom">checkMWRfrecom</a></code>, <code><a href="#topic+checkMWRsites">checkMWRsites</a></code>, or <code><a href="#topic+checkMWRwqx">checkMWRwqx</a></code>, applies only if <code>res</code>, <code>acc</code>, <code>frecom</code>, <code>sit</code>, or <code>wqx</code> are file paths</p>
</td></tr>
<tr><td><code id="utilMWRinput_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function is used internally by others to import data from paths to the relevant files or as data frames returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code>, <code><a href="#topic+readMWRacc">readMWRacc</a></code>, <code><a href="#topic+readMWRfrecom">readMWRfrecom</a></code>, <code><a href="#topic+readMWRsites">readMWRsites</a></code>, or <code><a href="#topic+readMWRwqx">readMWRwqx</a></code>.  For the former, the full suite of data checks can be evaluated with <code>runkchk = T</code> (default) or suppressed with <code>runchk = F</code>.
</p>
<p>The <code>fset</code> argument can used in place of the preceding arguments. The argument accepts a list with named elements as <code>res</code>, <code>acc</code>, <code>frecom</code>, <code>sit</code>, or <code>wqx</code>, where the elements are either character strings of the path or data frames to the corresponding inputs. Missing elements will be interpreted as <code>NULL</code> values.  This argument is provided as convenience to apply a single list as input versus separate inputs for each argument.
</p>
<p>Any of the arguments for the data files can be <code>NULL</code>, used as a convenience for downstream functions that do not require all.
</p>


<h3>Value</h3>

<p>A five element list with the imported results, data quality objective files, site metadata, and wqx metadata, named <code>"resdat"</code>, <code>"accdat"</code>, <code>"frecomdat"</code>, <code>"sitdat"</code>, and <code>"wqxdat"</code>, respectively.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>##
# using file paths

# results path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# accuracy path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', package = 'MassWateR')

# frequency and completeness path
frecompth &lt;- system.file('extdata/ExampleDQOFrequencyCompleteness.xlsx', 
     package = 'MassWateR')

# site path
sitpth &lt;- system.file('extdata/ExampleSites.xlsx', package = 'MassWateR')

# wqx path
wqxpth &lt;- system.file('extdata/ExampleWQX.xlsx', package = 'MassWateR')

inp &lt;- utilMWRinput(res = respth, acc = accpth, frecom = frecompth, sit = sitpth, wqx = wqxpth)
inp$resdat
inp$accdat
inp$frecomdat
inp$sitdat
inp$wqxdat

##
# using data frames

# results data
resdat &lt;- readMWRresults(respth)

# accuracy data
accdat &lt;- readMWRacc(accpth)

# frequency and completeness data
frecomdat &lt;- readMWRfrecom(frecompth)

# site data
sitdat &lt;- readMWRsites(sitpth)

# wqx data
wqxdat &lt;- readMWRwqx(wqxpth)

inp &lt;- utilMWRinput(res = resdat, acc = accdat, frecom = frecomdat, sit = sitdat, wqx = wqxpth)
inp$resdat
inp$accdat
inp$frecomdat
inp$sitdat
inp$wqxdat

##
# using fset as list input

# input with paths to files
fset &lt;- list(
  res = respth, 
  acc = accpth, 
  frecom = frecompth,
  sit = sitpth, 
  wqx = wqxpth
)
utilMWRinput(fset = fset)
</code></pre>

<hr>
<h2 id='utilMWRinputcheck'>Check if required inputs are present for a function</h2><span id='topic+utilMWRinputcheck'></span>

<h3>Description</h3>

<p>Check if required inputs are present for a function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>utilMWRinputcheck(inputs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="utilMWRinputcheck_+3A_inputs">inputs</code></td>
<td>
<p>list of arguments passed from the parent function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>NULL if all inputs are present, otherwise an error message indicating which inputs are missing
</p>


<h3>Examples</h3>

<pre><code class='language-R'>inputchk &lt;- formals(tabMWRcom)
inputchk$res &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')
inputchk$frecom &lt;- system.file('extdata/ExampleDQOFrequencyCompleteness.xlsx', 
  package = 'MassWateR')

utilMWRinputcheck(inputchk)
</code></pre>

<hr>
<h2 id='utilMWRlimits'>Fill results data as BDL or AQL with appropriate values</h2><span id='topic+utilMWRlimits'></span>

<h3>Description</h3>

<p>Fill results data as BDL or AQL with appropriate values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>utilMWRlimits(resdat, param, accdat, warn = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="utilMWRlimits_+3A_resdat">resdat</code></td>
<td>
<p>results data as returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code></p>
</td></tr>
<tr><td><code id="utilMWRlimits_+3A_param">param</code></td>
<td>
<p>character string to filter results and check if a parameter in the <code>"Characteristic Name"</code> column in the results file is also found in the data quality objectives file for accuracy, see details</p>
</td></tr>
<tr><td><code id="utilMWRlimits_+3A_accdat">accdat</code></td>
<td>
<p><code>data.frame</code> for data quality objectives file for accuracy as returned by <code><a href="#topic+readMWRacc">readMWRacc</a></code></p>
</td></tr>
<tr><td><code id="utilMWRlimits_+3A_warn">warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>param</code> argument is used to identify the appropriate <code>"MDL"</code> or <code>"UQL"</code> values in the data quality objectives file for accuracy.  A warning is returned to the console if the accuracy file does not contain the appropriate information for the parameter.  Results will be filtered by <code>param</code> regardless of any warning.
</p>


<h3>Value</h3>

<p><code>resdat</code> filtered by <code>param</code> with any entries in <code>"Result Value"</code> as <code>"BDL"</code> or <code>"AQL"</code> replaced with appropriate values in the <code>"Quantitation Limit"</code> column, if present, otherwise the <code>"MDL"</code> or <code>"UQL"</code> columns from the data quality objectives file for accuracy are used.  Values as <code>"BDL"</code> use one half of the appropriate limit. Output only includes rows with the activity type as <code>"Field Msr/Obs"</code> or <code>"Sample-Routine"</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># results file path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# results data
resdat &lt;- readMWRresults(respth)

# accuracy path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', 
     package = 'MassWateR')

# accuracy data
accdat &lt;- readMWRacc(accpth)

# apply to total phosphorus
utilMWRlimits(resdat, accdat, param = 'TP')

# apply to E.coli
utilMWRlimits(resdat, accdat, param = 'E.coli')
</code></pre>

<hr>
<h2 id='utilMWRoutlier'>Identify outliers in a numeric vector</h2><span id='topic+utilMWRoutlier'></span>

<h3>Description</h3>

<p>Identify outliers in a numeric vector
</p>


<h3>Usage</h3>

<pre><code class='language-R'>utilMWRoutlier(x, logscl)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="utilMWRoutlier_+3A_x">x</code></td>
<td>
<p>numeric vector of any length</p>
</td></tr>
<tr><td><code id="utilMWRoutlier_+3A_logscl">logscl</code></td>
<td>
<p>logical to indicate if vector should be log10-transformed first</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Outliers are identified as 1.5 times the interquartile range
</p>


<h3>Value</h3>

<p>A logical vector equal in length to <code>x</code> indicating <code>TRUE</code> for outliers or <code>FALSE</code> for within normal range
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- rnorm(20)
utilMWRoutlier(x, logscl = FALSE)
</code></pre>

<hr>
<h2 id='utilMWRsumfun'>Verify summary function</h2><span id='topic+utilMWRsumfun'></span>

<h3>Description</h3>

<p>Verify summary function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>utilMWRsumfun(accdat, param, sumfun = "auto")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="utilMWRsumfun_+3A_accdat">accdat</code></td>
<td>
<p><code>data.frame</code> for data quality objectives file for accuracy as returned by <code><a href="#topic+readMWRacc">readMWRacc</a></code></p>
</td></tr>
<tr><td><code id="utilMWRsumfun_+3A_param">param</code></td>
<td>
<p>character string for the parameter to evaluate as provided in the <code>"Parameter"</code> column of <code>"accdat"</code></p>
</td></tr>
<tr><td><code id="utilMWRsumfun_+3A_sumfun">sumfun</code></td>
<td>
<p>character indicating one of <code>"auto"</code> (default), <code>"mean"</code>, <code>"geomean"</code>, <code>"median"</code>, <code>"min"</code>, or <code>"max"</code>, see details</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function verifies appropriate summary functions are passed from <code>sumfun</code>. The mean or geometric mean output is used for <code>sumfun = "auto"</code> based on information in the data quality objective file for accuracy, i.e., parameters with &quot;log&quot; in any of the columns are summarized with the geometric mean, otherwise arithmetic. Using <code>"mean"</code> or <code>"geomean"</code> for <code>sumfun</code> will apply the appropriate function regardless of information in the data quality objective file for accuracy.
</p>


<h3>Value</h3>

<p>Character indicating the appropriate summary function based on the value passed to <code>sumfun</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># accuracy path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', 
     package = 'MassWateR')

# accuracy data
accdat &lt;- readMWRacc(accpth)

# geomean auto
utilMWRsumfun(accdat, param = 'E.coli')

# mean force
utilMWRsumfun(accdat, param = 'E.coli', sumfun = 'mean')

# mean auto
utilMWRsumfun(accdat, param = 'DO')

# geomean force
utilMWRsumfun(accdat, param = 'DO', sumfun = 'geomean')
</code></pre>

<hr>
<h2 id='utilMWRsummary'>Summarize a results data frame by a grouping variable</h2><span id='topic+utilMWRsummary'></span>

<h3>Description</h3>

<p>Summarize a results data frame by a grouping variable
</p>


<h3>Usage</h3>

<pre><code class='language-R'>utilMWRsummary(dat, accdat, param, sumfun = "auto", confint)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="utilMWRsummary_+3A_dat">dat</code></td>
<td>
<p>input data frame</p>
</td></tr>
<tr><td><code id="utilMWRsummary_+3A_accdat">accdat</code></td>
<td>
<p><code>data.frame</code> for data quality objectives file for accuracy as returned by <code><a href="#topic+readMWRacc">readMWRacc</a></code></p>
</td></tr>
<tr><td><code id="utilMWRsummary_+3A_param">param</code></td>
<td>
<p>character string for the parameter to evaluate as provided in the <code>"Parameter"</code> column of <code>"accdat"</code></p>
</td></tr>
<tr><td><code id="utilMWRsummary_+3A_sumfun">sumfun</code></td>
<td>
<p>character indicating one of <code>"auto"</code> (default), <code>"mean"</code>, <code>"geomean"</code>, <code>"median"</code>, <code>"min"</code>, or <code>"max"</code>, see details</p>
</td></tr>
<tr><td><code id="utilMWRsummary_+3A_confint">confint</code></td>
<td>
<p>logical if user expects a confidence interval to be returned with the summary</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function summarizes a results data frame by an existing grouping variable using the function supplied to <code>sumfun</code>. The mean or geometric mean is used for <code>sumfun = "auto"</code> based on information in the data quality objective file for accuracy, i.e., parameters with &quot;log&quot; in any of the columns are summarized with the geometric mean, otherwise arithmetic. Using <code>"mean"</code> or <code>"geomean"</code> for <code>sumfun</code> will apply the appropriate function regardless of information in the data quality objective file for accuracy.
</p>


<h3>Value</h3>

<p>A summarized data frame, a warning will be returned if the confidence interval cannot be estimated and <code>confint = TRUE</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

# results data path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# results data
resdat &lt;- readMWRresults(respth)

# accuracy path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', 
     package = 'MassWateR')

# accuracy data
accdat &lt;- readMWRacc(accpth)

# fill BDL, AQL
resdat &lt;- utilMWRlimits(resdat = resdat, accdat = accdat, param = "DO")

dat &lt;- resdat %&gt;% 
  group_by(`Monitoring Location ID`)
 
# summarize sites by mean 
utilMWRsummary(dat, accdat, param = 'DO', sumfun = 'auto', confint = TRUE)

# summarize sites by minimum
utilMWRsummary(dat, accdat, param = 'DO', sumfun = 'min', confint = FALSE)
</code></pre>

<hr>
<h2 id='utilMWRthresh'>Get threshold lines from thresholdMWR</h2><span id='topic+utilMWRthresh'></span>

<h3>Description</h3>

<p>Get threshold lines from thresholdMWR
</p>


<h3>Usage</h3>

<pre><code class='language-R'>utilMWRthresh(resdat, param, thresh, threshlab = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="utilMWRthresh_+3A_resdat">resdat</code></td>
<td>
<p>results data as returned by <code><a href="#topic+readMWRresults">readMWRresults</a></code></p>
</td></tr>
<tr><td><code id="utilMWRthresh_+3A_param">param</code></td>
<td>
<p>character string to first filter results by a parameter in <code>"Characteristic Name"</code></p>
</td></tr>
<tr><td><code id="utilMWRthresh_+3A_thresh">thresh</code></td>
<td>
<p>character indicating if relevant freshwater or marine threshold lines are included, one of <code>"fresh"</code>, <code>"marine"</code>, or <code>"none"</code>, or a single numeric value to override the values included with the package</p>
</td></tr>
<tr><td><code id="utilMWRthresh_+3A_threshlab">threshlab</code></td>
<td>
<p>optional character string indicating legend label for the threshold, required only if <code>thresh</code> is numeric</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>thresh</code> is not numeric and thresholds are available for <code>param</code>, a <code>data.frame</code> of relevant marine or freshwater thresholds, otherwise <code>NULL</code>.  If <code>thresh</code> is numeric, a <code>data.frame</code> of the threshold with the appropriate label from <code>threshlabel</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># results file path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# results data
resdat &lt;- readMWRresults(respth)

# get threshold lines
utilMWRthresh(resdat = resdat, param = 'E.coli', thresh = 'fresh')

# user-defined numeric threshold line
utilMWRthresh(resdat = resdat, param = 'TP', thresh = 5, threshlab = 'My threshold')
</code></pre>

<hr>
<h2 id='utilMWRtitle'>Format the title for analyze functions</h2><span id='topic+utilMWRtitle'></span>

<h3>Description</h3>

<p>Format the title for analyze functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>utilMWRtitle(
  param,
  accdat = NULL,
  sumfun = NULL,
  site = NULL,
  dtrng = NULL,
  resultatt = NULL,
  locgroup = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="utilMWRtitle_+3A_param">param</code></td>
<td>
<p>character string of the parameter to plot</p>
</td></tr>
<tr><td><code id="utilMWRtitle_+3A_accdat">accdat</code></td>
<td>
<p>optional <code>data.frame</code> for data quality objectives file for accuracy as returned by <code><a href="#topic+readMWRacc">readMWRacc</a></code></p>
</td></tr>
<tr><td><code id="utilMWRtitle_+3A_sumfun">sumfun</code></td>
<td>
<p>optional character indicating one of <code>"auto"</code>, <code>"mean"</code>, <code>"geomean"</code>, <code>"median"</code>, <code>"min"</code>, or <code>"max"</code></p>
</td></tr>
<tr><td><code id="utilMWRtitle_+3A_site">site</code></td>
<td>
<p>character string of sites to include</p>
</td></tr>
<tr><td><code id="utilMWRtitle_+3A_dtrng">dtrng</code></td>
<td>
<p>character string of length two for the date ranges as YYYY-MM-DD</p>
</td></tr>
<tr><td><code id="utilMWRtitle_+3A_resultatt">resultatt</code></td>
<td>
<p>character string of result attributes to plot</p>
</td></tr>
<tr><td><code id="utilMWRtitle_+3A_locgroup">locgroup</code></td>
<td>
<p>character string of location groups to plot from the <code>"Location Group"</code> column in the site metadata file</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All arguments are optional except <code>param</code>, appropriate text strings are appended to the <code>param</code> argument for all other optional arguments indicating the level of filtering used in the plot and data summary if appropriate
</p>


<h3>Value</h3>

<p>A formatted character string used for the title in analysis plots
</p>


<h3>Examples</h3>

<pre><code class='language-R'># no filters
utilMWRtitle(param = 'DO')

# filter by date only
utilMWRtitle(param = 'DO', dtrng = c('2021-05-01', '2021-07-31'))

# filter by all
utilMWRtitle(param = 'DO', site = 'test', dtrng = c('2021-05-01', '2021-07-31'), 
     resultatt = 'test', locgroup = 'test')
     
# title using summary 
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', package = 'MassWateR')
accdat &lt;- readMWRacc(accpth, runchk = FALSE)
utilMWRtitle(param = 'DO', accdat = accdat, sumfun = 'auto', site = 'test', 
     dtrng = c('2021-05-01', '2021-07-31'), resultatt = 'test', locgroup = 'test')
</code></pre>

<hr>
<h2 id='utilMWRvaluerange'>Check if incomplete range in <code>Value Range</code> column</h2><span id='topic+utilMWRvaluerange'></span>

<h3>Description</h3>

<p>Check if incomplete range in <code>Value Range</code> column
</p>


<h3>Usage</h3>

<pre><code class='language-R'>utilMWRvaluerange(accdat)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="utilMWRvaluerange_+3A_accdat">accdat</code></td>
<td>
<p><code>data.frame</code> for data quality objectives file for accuracy as returned by <code><a href="#topic+readMWRacc">readMWRacc</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function evaluates if an incomplete or overlapping range is present in the <code>Value Range</code> column of the data quality objectives file for accuracy
</p>


<h3>Value</h3>

<p>A named vector of <code>"gap"</code>, <code>"nogap"</code>, or <code>"overlap"</code> indicating if a gap is present, no gap is present, or an overlap is present in the ranges provided by the value range for each parameter.  The names correspond to the parameters.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># accuracy path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', 
     package = 'MassWateR')

# accuracy data with no checks
accdat &lt;- readxl::read_excel(accpth, na = c('NA', ''), col_types = 'text')
accdat &lt;- dplyr::mutate(accdat, dplyr::across(-c(`Value Range`), ~ dplyr::na_if(.x, 'na'))) 

utilMWRvaluerange(accdat)
</code></pre>

<hr>
<h2 id='utilMWRyscale'>Get logical value for y axis scaling</h2><span id='topic+utilMWRyscale'></span>

<h3>Description</h3>

<p>Get logical value for y axis scaling
</p>


<h3>Usage</h3>

<pre><code class='language-R'>utilMWRyscale(accdat, param, yscl = "auto")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="utilMWRyscale_+3A_accdat">accdat</code></td>
<td>
<p><code>data.frame</code> for data quality objectives file for accuracy as returned by <code><a href="#topic+readMWRacc">readMWRacc</a></code></p>
</td></tr>
<tr><td><code id="utilMWRyscale_+3A_param">param</code></td>
<td>
<p>character string for the parameter to evaluate as provided in the <code>"Parameter"</code> column of <code>"accdat"</code></p>
</td></tr>
<tr><td><code id="utilMWRyscale_+3A_yscl">yscl</code></td>
<td>
<p>character indicating one of <code>"auto"</code> (default), <code>"log"</code>, or <code>"linear"</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical value indicating <code>TRUE</code> for log10-scale, <code>FALSE</code> for arithmetic (linear)
</p>


<h3>Examples</h3>

<pre><code class='language-R'># accuracy path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', 
     package = 'MassWateR')

# accuracy data
accdat &lt;- readMWRacc(accpth)

# log auto
utilMWRyscale(accdat, param = 'E.coli')

# linear force
utilMWRyscale(accdat, param = 'E.coli', yscl = 'linear')

# linear auto
utilMWRyscale(accdat, param = 'DO')

# log force
utilMWRyscale(accdat, param = 'DO', yscl = 'log')
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
