<!DOCTYPE html><html><head><title>Help for package formatBibtex</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {formatBibtex}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#format_bibtex_entry'><p>Format BibTeX Entries in An Opinionated Way</p></a></li>
<li><a href='#format_string'><p>Format a Character Vector</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Format BibTeX Entries and Files</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Format BibTeX entries and files in an opinionated way.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>bibtex</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/wenjie2wang/formatBibtex">https://github.com/wenjie2wang/formatBibtex</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/wenjie2wang/formatBibtex/issues">https://github.com/wenjie2wang/formatBibtex/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-02-03 01:20:11 UTC; wenjie</td>
</tr>
<tr>
<td>Author:</td>
<td>Wenjie Wang <a href="https://orcid.org/0000-0003-0363-3180"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Wenjie Wang &lt;wang@wwenjie.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-02-03 20:22:30 UTC</td>
</tr>
</table>
<hr>
<h2 id='format_bibtex_entry'>Format BibTeX Entries in An Opinionated Way</h2><span id='topic+format_bibtex_entry'></span><span id='topic+format_bibtex_file'></span>

<h3>Description</h3>

<p>This function tries to format the given BibTeX entries so that
</p>

<ul>
<li><p> The &ldquo;title&rdquo; field is written in the title case with
exceptations such as common prepositions with four or fewer letters.
Special words such as &ldquo;Bayesian&rdquo; and &ldquo;Markov&rdquo; are protected
by curly braces from case changing by BibTeX sytle.
</p>
</li>
<li><p> The &ldquo;author&rdquo; field follows a consistent fashion: &ldquo;family
name, given name&rdquo;.  A period will be added to single letter acronym.
</p>
</li>
<li><p> The &ldquo;journal&rdquo; field (if any) is written in the title case.
</p>
</li>
<li><p> The &ldquo;pages&rdquo; field should use &ldquo;&ndash;&rdquo; instead of &ldquo;-&rdquo;
between pages.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>format_bibtex_entry(
  entry,
  fields = c("title", "author", "journal", "pages"),
  protected_words = getOption("formatBibtex.protected_words"),
  ...
)

format_bibtex_file(
  bibtex_file,
  output_file = bibtex_file,
  backup = (output_file == bibtex_file),
  dry_run = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format_bibtex_entry_+3A_entry">entry</code></td>
<td>
<p>A <code>bibentry</code> object (created by <code>utils::bibentry</code>)
representing BibTeX entries.</p>
</td></tr>
<tr><td><code id="format_bibtex_entry_+3A_fields">fields</code></td>
<td>
<p>A character vector specifying the fields to format.  The
available options are <code>"title"</code>, <code>"author"</code>, <code>"journal"</code>,
and <code>"pages"</code>.  Multiple choices can be specified.</p>
</td></tr>
<tr><td><code id="format_bibtex_entry_+3A_protected_words">protected_words</code></td>
<td>
<p>Optional words that needs protection by curly braces
from cases changing by BibTeX style.</p>
</td></tr>
<tr><td><code id="format_bibtex_entry_+3A_...">...</code></td>
<td>
<p>Other arguments passed to <code>format_bibtex_entry</code>.</p>
</td></tr>
<tr><td><code id="format_bibtex_entry_+3A_bibtex_file">bibtex_file</code></td>
<td>
<p>A character string presenting the BibTeX file that needs
formatting.</p>
</td></tr>
<tr><td><code id="format_bibtex_entry_+3A_output_file">output_file</code></td>
<td>
<p>A character string presenting the output BibTeX file.  By
default, the input BibTeX file will be overwritten with a backup file.</p>
</td></tr>
<tr><td><code id="format_bibtex_entry_+3A_backup">backup</code></td>
<td>
<p>A logical value.  If <code>TRUE</code>, a backup file will be
created to check and tweak the formatting options.</p>
</td></tr>
<tr><td><code id="format_bibtex_entry_+3A_dry_run">dry_run</code></td>
<td>
<p>A logical value.  If <code>TRUE</code>, the formatted BibTeX
entries will be returned without actually (over)writing a BibTeX file to
the disk.  The default value is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When <code>emacs</code> is available in the system, the function
<code>format_bibtex_file()</code> will perform additional formatting with the help
of the commands <code>bibtex-reformat</code> and <code>bibtex-sort-buffer</code>.
</p>


<h3>Value</h3>

<p>A <code>bibentry</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(formatBibtex)

## example BibTeX file that needs formatting
example_bib &lt;- system.file("examples/example.bib", package = "formatBibtex")
print(readLines(example_bib), quote = FALSE)

## needs the package bibtex
has_bibtex &lt;- requireNamespace("bibtex", quietly = TRUE)

## example of format_bibtex_entry()
if (has_bibtex) {
    bib &lt;- bibtex::read.bib(example_bib)
    ## check the default words that need protection by curly braces
    (default_words &lt;- getOption("formatBibtex.protected_words"))
    format_bibtex_entry(bib, protected_words = c(default_words, "SMEM"))
}

## example of format_bibtex_file()
if (has_bibtex) {
    output_file &lt;- tempfile(fileext = ".bib")
    format_bibtex_file(example_bib,
                       output_file = output_file,
                       protected_words = c(default_words, "SMEM"))
    print(readLines(output_file), quote = FALSE)
}
</code></pre>

<hr>
<h2 id='format_string'>Format a Character Vector</h2><span id='topic+format_string'></span>

<h3>Description</h3>

<p>This function formats a character vector by following APA (American
Psychological Assoication) style.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_string(
  x,
  style = c("title", "sentence"),
  str2ws = "_",
  str4split = " |-",
  strict = TRUE,
  arguments = list(),
  protect_curly_braces = FALSE,
  lowercase_words = getOption("formatBibtex.lowercase_words"),
  protected_words = getOption("formatBibtex.protected_words"),
  punctuation = getOption("formatBibtex.punctuation"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format_string_+3A_x">x</code></td>
<td>
<p>A character vector that needs formatting.</p>
</td></tr>
<tr><td><code id="format_string_+3A_style">style</code></td>
<td>
<p>A character string for specifying case style. <code>"title"</code>
for title case or <code>"sentence"</code> for sentence case.</p>
</td></tr>
<tr><td><code id="format_string_+3A_str2ws">str2ws</code></td>
<td>
<p>Character expression that would be replaced with white space.
By default, underscores will be replaced with white spaces.</p>
</td></tr>
<tr><td><code id="format_string_+3A_str4split">str4split</code></td>
<td>
<p>Character expression that would be used to split the string
into individual words.</p>
</td></tr>
<tr><td><code id="format_string_+3A_strict">strict</code></td>
<td>
<p>A logical value specifying whether to lower the cases for
letters after the first letter.  The default value is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="format_string_+3A_arguments">arguments</code></td>
<td>
<p>An optional argument list for specifying more details when
replacing specified characters with whitespaces by using
<code><a href="base.html#topic+gsub">gsub</a></code>.</p>
</td></tr>
<tr><td><code id="format_string_+3A_protect_curly_braces">protect_curly_braces</code></td>
<td>
<p>A logical vector of length one indicating if
curly braces represent a block that needs protection.  This argument is
mainly intended to format BibTeX entries.</p>
</td></tr>
<tr><td><code id="format_string_+3A_lowercase_words">lowercase_words</code></td>
<td>
<p>Some words that should be almost always be lowercase.</p>
</td></tr>
<tr><td><code id="format_string_+3A_protected_words">protected_words</code></td>
<td>
<p>Some words that should be kept in original case and
should be not be convert to lowercase or uppercase.</p>
</td></tr>
<tr><td><code id="format_string_+3A_punctuation">punctuation</code></td>
<td>
<p>A character expression that should be considered as
punctuation and should not be considered as a part of the protected
words.  The function would remove these punctuation before checking
whether the words need protecting.</p>
</td></tr>
<tr><td><code id="format_string_+3A_...">...</code></td>
<td>
<p>Other arguments that are not used now.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The available style options are title case and sentence case.  The first
word of the string and the first word after colon will be always
capitalized.  For title case (default), the function would capitalize each
word with a few exceptions, such as short conjunctions and prepositions.
For sentence case, the function would not capitalize a word unless it
starts a string, come after a colon, or is a proper noun.  We may specify
some words that need protection from any kind of case conversion.
</p>
<p>The function would also replace possible splitting characters, such as
underscores with white spaces.  Empty strings (<code>""</code> or <code>''</code>),
<code>NA</code>, <code>character(0)</code>, and <code>NULL</code> are allowed and returned as
they were.
</p>


<h3>Value</h3>

<p>A character vector of the same length as the input.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(formatBibtex)

## simple examples
foo &lt;- c("iT IS_A_sIMPLe_ExamplE.", "let'S_do soMe_tesTs!")
format_string(foo, style = "title")
format_string(foo, style = "sentence")

## protect some words from formatting
## check out the built-in
(default_protected_words &lt;- getOption("formatBibtex.protected_words"))

## e.g., protect ABCD from being converted to lowercase
bar &lt;- c("on_the_convergence properties of the ABCD_algorithm",
         "teSt: tHe cluster is Running MCMC!")
format_string(bar, style = "sentence",
              protected_words = c(default_protected_words, "ABCD"))

## more tricky examples: protected words contain `str4split`
foo &lt;- c("nineteenth- and twentieth-century writers",
         "well-differentiated cells with arXiv e-prints")
format_string(foo, str4split = "-| ",
              protected_words = c("arXiv", "e-prints"))

## trivial examples
format_string(NULL)
format_string(character(0))
format_string(character(3))
format_string(c(NA, "", "hello world!"))
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
