<!DOCTYPE html><html lang="en"><head><title>Help for package implicitExpansion</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {implicitExpansion}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#implicitExpansion-package'><p>Implicit Expansion</p></a></li>
<li><a href='#+25m+2B+25'><p>Binary Operators with Implicit Expansion</p></a></li>
<li><a href='#as.mRowVector'><p>Row and Column Vectors</p></a></li>
<li><a href='#expandArray'><p>Expand an Array to a Given Dimension</p></a></li>
<li><a href='#expandedDim'><p>Implied Dimension of a set of Arrays</p></a></li>
<li><a href='#mmapply'><p>Apply a Function to Multiple Arrays with Implicit Expansion</p></a></li>
<li><a href='#mZeros'><p>Array Creation</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Title:</td>
<td>Array Operations for Arrays of Mismatching Sizes</td>
</tr>
<tr>
<td>Description:</td>
<td>Support for implicit expansion of arrays in operations involving
    arrays of mismatching sizes. This pattern is known as "broadcasting" in
    'Python' and  "implicit expansion" in 'Matlab' and is explained for example in
    the article "Array programming with NumPy" by C. R. Harris et al. (2020)
    &lt;<a href="https://doi.org/10.1038%2Fs41586-020-2649-2">doi:10.1038/s41586-020-2649-2</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ManuelHentschel/implicitExpansion">https://github.com/ManuelHentschel/implicitExpansion</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-10-02 22:39:06 UTC; Manuel</td>
</tr>
<tr>
<td>Author:</td>
<td>Manuel Hentschel [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Manuel Hentschel &lt;Manuel.Hentschel@unige.ch&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-10-02 23:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='implicitExpansion-package'>Implicit Expansion</h2><span id='topic+implicitExpansion-package'></span>

<h3>Description</h3>

<p>This package implements a feature known as &quot;Broadcasting&quot; in Python
(see e.g. <a href="https://numpy.org/doc/stable/user/basics.broadcasting.html">here</a>)
and as &quot;Implicit Expansion&quot; in Matlab
(see e.g. <a href="https://ch.mathworks.com/help/matlab/matlab_prog/compatible-array-sizes-for-basic-operations.html">here</a>).
In operations involving multiple arguments of type <a href="base.html#topic+array">array</a>
(or <a href="base.html#topic+vector">vector</a>, <a href="base.html#topic+matrix">matrix</a>, <a href="base.html#topic+list">list</a>) with mismatching dimensions, any argument is
repeated along its dimensions of size (exactly) 1, as often as necessary to
match the other argument(s).
</p>


<h3>Details</h3>

<p>Below are some examples that illustrate possible operations using implicit expansion.
For detailed explanations of the behavior, see the corresponding docs for
<a href="https://numpy.org/doc/stable/user/basics.broadcasting.html">Python</a>
and
<a href="https://ch.mathworks.com/help/matlab/matlab_prog/compatible-array-sizes-for-basic-operations.html">Matlab</a>.
</p>
<p>Dimensions of size 0 are ok, as long as all other arrays are also
of size 0 or 1 in that dimension.
</p>
<p>All arguments to an operation with implicit expansion are coerced to arrays
first.
</p>
<p>Currently, all arguments to an operation with implicit expansion are expanded
to the full size of the output first, resulting in bad performance for very large arrays.
</p>
<p>The package <code>rray</code> (
<a href="https://github.com/r-lib/rray">on GitHub</a>,
<a href="https://rray.r-lib.org/">documentation</a>,
currently archived on <a href="https://CRAN.R-project.org/package=rray">CRAN</a>
) provides similar functionality as part of complete a remodeling of the array object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mmapply">mmapply</a></code>, <code><a href="#topic+BinaryOperators">BinaryOperators</a></code>, <code><a href="#topic+expandArray">expandArray</a></code>, <code><a href="#topic+expandedDim">expandedDim</a></code>, <code><a href="#topic+ArrayCreation">ArrayCreation</a></code>, <code><a href="#topic+RowAndColumnVectors">RowAndColumnVectors</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- c(1,2,3)
y &lt;- t(c(4,5))
x %m+% y
mmapply(sum, x, x, t(x))

m &lt;- matrix(3*(1:12)^2, 3, 4)
cm &lt;- t(colMeans(m))
m %m-% cm

summaries &lt;- list(Max = max, Min = min, avg = mean)
data &lt;- list(a = 1:5, b = 2:3, c = 20:12)
formatStrings &lt;- array(c('%.1f', '%.3f'), c(1,1,2))
mmapply(function(f, d, s) sprintf(s, f(d)), summaries, t(data), formatStrings)

</code></pre>

<hr>
<h2 id='+25m+2B+25'>Binary Operators with Implicit Expansion</h2><span id='topic++25m+2B+25'></span><span id='topic+BinaryOperators'></span><span id='topic++25m-+25'></span><span id='topic++25m+2A+25'></span><span id='topic++25m+2F+25'></span><span id='topic++25m+5E+25'></span><span id='topic++25m+3D+3D+25'></span><span id='topic++25m+21+3D+25'></span><span id='topic++25m+3E+25'></span><span id='topic++25m+3C+25'></span><span id='topic++25m+3E+3D+25'></span><span id='topic++25m+3C+3D+25'></span><span id='topic++25m+7C+25'></span><span id='topic++25m+26+25'></span>

<h3>Description</h3>

<p>Modified versions of binary operators that support implicit expansion.
Arguments are passed to <code><a href="#topic+mmapply">mmapply()</a></code> with the corresponding element-wise binary operator.
For instance, <code>x %m+% y</code> is equivalent to <code>mmapply('+', x, y)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>x %m+% y

x %m-% y

x %m*% y

x %m/% y

x %m^% y

x %m==% y

x %m!=% y

x %m&gt;% y

x %m&lt;% y

x %m&gt;=% y

x %m&lt;=% y

x %m|% y

x %m&amp;% y
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25m+2B2B+2B25_+3A_x">x</code>, <code id="+2B25m+2B2B+2B25_+3A_y">y</code></td>
<td>
<p>Arrays or objects that can be coerced to arrays using <code><a href="base.html#topic+as.array">as.array()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of <code>mmapply('XXX', x, y)</code>,
with <code>XXX</code> replaced by the corresponding element-wise binary operator.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mmapply">mmapply</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- c(1,2,3)
y &lt;- t(c(4,5))
x %m+% y

m &lt;- matrix(3*(1:12)^2, 3, 4)
cm &lt;- t(colMeans(m))
m %m-% cm

(1:3) %m&gt;=% t(3:1)

</code></pre>

<hr>
<h2 id='as.mRowVector'>Row and Column Vectors</h2><span id='topic+as.mRowVector'></span><span id='topic+RowAndColumnVectors'></span><span id='topic+as.mColVector'></span>

<h3>Description</h3>

<p>These functions coerce an object to a 2-dimensional <code><a href="base.html#topic+array">array</a></code> in the shape of a
row or column vector, i.e. an array with dimensions <code>c(1,d)</code> or <code>c(d,1)</code>
respectively, where <code>d=length(x)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.mRowVector(x, USE.NAMES = TRUE)

as.mColVector(x, USE.NAMES = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as.mRowVector_+3A_x">x</code></td>
<td>
<p>An object that can be passed to <code><a href="base.html#topic+array">array()</a></code>.</p>
</td></tr>
<tr><td><code id="as.mRowVector_+3A_use.names">USE.NAMES</code></td>
<td>
<p>If <code>TRUE</code> and <code>x</code> has only one non-singular dimension, its names are preserved.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A row or column vector with the data from <code>x</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- c(a=1, b=2, c=3)
as.mColVector(x)

y &lt;- matrix(1:12, 3, 4)
as.mRowVector(y)

</code></pre>

<hr>
<h2 id='expandArray'>Expand an Array to a Given Dimension</h2><span id='topic+expandArray'></span>

<h3>Description</h3>

<p>Expand an array to a given dimension by repeating its entries in the directions
where the array has dimension one.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expandArray(x, dy)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="expandArray_+3A_x">x</code></td>
<td>
<p>An object that is coerced to array.</p>
</td></tr>
<tr><td><code id="expandArray_+3A_dy">dy</code></td>
<td>
<p>The dimensions it is to be expanded to.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Throws an error if the array and dimensions are not compatible.
</p>


<h3>Value</h3>

<p>An array that consists of the entries in <code>x</code>, with dimension <code>dy</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+expandedDim">expandedDim</a></code>, <code><a href="#topic+mmapply">mmapply</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- 1:3
expandArray(x, c(3,4))

</code></pre>

<hr>
<h2 id='expandedDim'>Implied Dimension of a set of Arrays</h2><span id='topic+expandedDim'></span>

<h3>Description</h3>

<p>Get the dimension implied by a set of arrays as used in implicit expansion.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expandedDim(..., arrays = list(), allowRecycling = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="expandedDim_+3A_...">...</code></td>
<td>
<p>Objects that are coerced to arrays.</p>
</td></tr>
<tr><td><code id="expandedDim_+3A_arrays">arrays</code></td>
<td>
<p>A list of objects that are coerced to arrays.</p>
</td></tr>
<tr><td><code id="expandedDim_+3A_allowrecycling">allowRecycling</code></td>
<td>
<p>Whether to allow recycling of elements in each dimension.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Both the arrays in <code>...</code> and <code>arrays</code> are considered by concatenating them with <code>c(list(...), arrays)</code>.
Throws an error if the arrays are not compatible.
</p>


<h3>Value</h3>

<p>A numberical vector containing the expanded dimension implied by the arrays.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+expandArray">expandArray</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- 1:3
y &lt;- t(4:5)
z &lt;- array(0, c(1,1,6))
expandedDim(x, y, z)

</code></pre>

<hr>
<h2 id='mmapply'>Apply a Function to Multiple Arrays with Implicit Expansion</h2><span id='topic+mmapply'></span>

<h3>Description</h3>

<p>Similar function to <code><a href="base.html#topic+mapply">mapply</a></code> with support for implicit expansion.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mmapply(
  FUN,
  ...,
  MoreArgs = list(),
  SIMPLIFY = TRUE,
  USE.NAMES = TRUE,
  ALLOW.RECYCLING = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mmapply_+3A_fun">FUN</code></td>
<td>
<p>Function to apply to each combination of arguments. Found via <code><a href="base.html#topic+match.fun">match.fun</a></code>.</p>
</td></tr>
<tr><td><code id="mmapply_+3A_...">...</code></td>
<td>
<p>Objects that are coerced to arrays, expanded using implicit expansion, and then vectorized over.</p>
</td></tr>
<tr><td><code id="mmapply_+3A_moreargs">MoreArgs</code></td>
<td>
<p>Pass arguments in a list instead of <code>...</code></p>
</td></tr>
<tr><td><code id="mmapply_+3A_simplify">SIMPLIFY</code></td>
<td>
<p>If <code>TRUE</code>, the resulting list array is simplified to an atomic array if possible.</p>
</td></tr>
<tr><td><code id="mmapply_+3A_use.names">USE.NAMES</code></td>
<td>
<p>If <code>TRUE</code>, the dimensions are named using the names of input arguments of matching size.</p>
</td></tr>
<tr><td><code id="mmapply_+3A_allow.recycling">ALLOW.RECYCLING</code></td>
<td>
<p>Whether to allow recycling of elements in each dimension.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Most arguments are handled in a similar fashion to <code><a href="base.html#topic+mapply">mapply</a></code> with some key differences:
</p>

<ul>
<li><p> Entries of <code>MoreArgs</code> are treated the same as the ones in <code>...</code>, i.e.
<code>mmapply(...)</code> is the same as <code>mmapply(MoreArgs = list(...))</code>.
Additional arguments to FUN can be passed here or in <code>...</code>, either as they are
(if they are atomic), or as a <code>list()</code> of length one.
</p>
</li>
<li> <p><code>SIMPLIFY</code> only simplifies a list array to an atomic array, nothing else.
</p>
</li>
<li> <p><code>USE.NAMES</code> uses names from all arguments, but never uses an argument itself as names.
</p>
</li></ul>

<p>If <code>ALLOW.RECYCLING</code> is set to <code>TRUE</code>, all arrays of any size are compatible.
</p>


<h3>Value</h3>

<p>An array containing the result of <code>FUN</code> for each combination of entries from <code>...</code> after implicit expansion.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+expandArray">expandArray</a></code>, <code><a href="#topic+expandedDim">expandedDim</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>summaries &lt;- list(Max = max, Min = min, avg = mean)
data &lt;- list(a = 1:5, b = 2:3, c = 20:12)
formatStrings &lt;- array(c('%.1f', '%.3f'), c(1,1,2))
mmapply(function(f, d, s) sprintf(s, f(d)), summaries, t(data), formatStrings)

</code></pre>

<hr>
<h2 id='mZeros'>Array Creation</h2><span id='topic+mZeros'></span><span id='topic+ArrayCreation'></span><span id='topic+mOnes'></span><span id='topic+mTRUE'></span><span id='topic+mFALSE'></span><span id='topic+mNULL'></span>

<h3>Description</h3>

<p>Convenience functions that create an array full of identical entries.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mZeros(...)

mOnes(...)

mTRUE(...)

mFALSE(...)

mNULL(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mZeros_+3A_...">...</code></td>
<td>
<p>Numbers or numeric vectors, passed to <code><a href="base.html#topic+c">c()</a></code> and then used as <code>dim</code>
argument in a call to <code><a href="base.html#topic+array">array()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of <code>array(XXX, c(...))</code>, where XXX is <code>0</code>, <code>1</code>, <code><a href="base.html#topic+TRUE">TRUE</a></code>, <code><a href="base.html#topic+FALSE">FALSE</a></code>, or <code><a href="base.html#topic+list">list()</a></code>, respectively.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mZeros(2, 3)

mOnes(c(1, 2, 3))

mTRUE(c(1, 3), 2)

mFALSE(5)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
