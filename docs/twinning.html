<!DOCTYPE html><html><head><title>Help for package twinning</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {twinning}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#energy'><p>Energy distance computation</p></a></li>
<li><a href='#multiplet'><p>Partition datasets into multiple statistcally similar disjoint sets</p></a></li>
<li><a href='#twin'><p>Partition datasets into statistcally similar twin sets</p></a></li>
<li><a href='#twinning-package'><p>Data Twinning</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Data Twinning</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-01-26</td>
</tr>
<tr>
<td>Description:</td>
<td>An efficient algorithm for data twinning. This work is supported by U.S. National Science 
	Foundation grants DMREF-1921873 and CMMI-1921646.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 1.0.4)</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-01-27 13:35:29 UTC; akhil</td>
</tr>
<tr>
<td>Author:</td>
<td>Akhil Vakayil [aut, cre],
  Roshan Joseph [aut, ths]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Akhil Vakayil &lt;akhilv@gatech.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-01-28 08:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='energy'>Energy distance computation</h2><span id='topic+energy'></span>

<h3>Description</h3>

<p><code>energy()</code> computes the energy distance (Székely and Rizzo, 2013)  between a given dataset and a set of points in same dimensions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>energy(data, points)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="energy_+3A_data">data</code></td>
<td>
<p>The dataset including both the predictors and response(s). A numeric matrix is expected. If the dataset has factor columns, the user is expected to convert them to numeric using a coding method.</p>
</td></tr>
<tr><td><code id="energy_+3A_points">points</code></td>
<td>
<p>The set of points for which the energy distance with respect to <code>data</code> is to be computed. A numeric matrix is expected.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Smaller the energy distance, the more statistically similar the set of points is to the given dataset. The minimizer of energy distance is known as support points (Mak and Joseph, 2018), which is the basis of the twinning method. Computing energy distance between <code>data</code> and <code>points</code> involves Euclidean distance calculations among the rows of <code>data</code>, among the rows of <code>points</code>, and between the rows of <code>data</code> and <code>points</code>. Since, <code>data</code> serves as the reference, the distance calculations among the rows of <code>data</code> are ignored for efficiency. Before computing the energy distance, the columns of <code>data</code> are scaled to zero mean and unit standard deviation. The mean and standard deviation of the columns of <code>data</code> are used to scale the respective columns in <code>points</code>.
</p>


<h3>Value</h3>

<p>Energy distance.
</p>


<h3>References</h3>

<p>Vakayil, A., &amp; Joseph, V. R. (2022). Data Twinning. Statistical Analysis and Data Mining: The ASA Data Science Journal, to appear. arXiv preprint arXiv:2110.02927.
</p>
<p>Székely, G. J., &amp; Rizzo, M. L. (2013). Energy statistics: A class of statistics based on distances. Journal of statistical planning and inference, 143(8), 1249-1272.
</p>
<p>Mak, S. &amp; Joseph, V. R. (2018). Support Points. Annals of Statistics, 46, 2562-2592.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Energy distance between a dataset and a random sample
X = rnorm(n=100, mean=0, sd=1)
Y = rnorm(n=100, mean=X^2, sd=1)
data = cbind(X, Y)
energy(data, data[sample(100, 20), ])

</code></pre>

<hr>
<h2 id='multiplet'>Partition datasets into multiple statistcally similar disjoint sets</h2><span id='topic+multiplet'></span>

<h3>Description</h3>

<p><code>multiplet()</code> extends <code><a href="#topic+twin">twin</a>()</code> to partition datasets into multiple statistically similar disjoint sets, termed as <em>multiplets</em>, under the three different strategies described in Vakayil and Joseph (2022).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multiplet(data, k, strategy = 1, format_data = TRUE, leaf_size = 8)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="multiplet_+3A_data">data</code></td>
<td>
<p>The dataset including both the predictors and response(s); should not contain missing values, and only numeric and/or factor column(s) are allowed.</p>
</td></tr>
<tr><td><code id="multiplet_+3A_k">k</code></td>
<td>
<p>The desired number of multiplets.</p>
</td></tr>
<tr><td><code id="multiplet_+3A_strategy">strategy</code></td>
<td>
<p>An integer either 1, 2, or 3 referring to the three strategies for generating multiplets. Strategy 2 perfroms best, but requires <code>k</code> to be a power of 2. Strategy 3 is computatioanlly inexpensive, but performs worse than strategies 1 and 2.</p>
</td></tr>
<tr><td><code id="multiplet_+3A_format_data">format_data</code></td>
<td>
<p>If set to <code>TRUE</code>, constant columns in <code>data</code> are removed, factor columns are converted to numerical using Helmert coding, and then the columns are scaled to zero mean and unit standard deviation. If set to <code>FALSE</code>, the user is expected to perform data pre-processing.</p>
</td></tr>
<tr><td><code id="multiplet_+3A_leaf_size">leaf_size</code></td>
<td>
<p>Maximum number of elements in the leaf-nodes of the <em>kd</em>-tree.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with the multiplet id, ranging from 1 to <code>k</code>, for each row in <code>data</code>.
</p>


<h3>References</h3>

<p>Vakayil, A., &amp; Joseph, V. R. (2022). Data Twinning. Statistical Analysis and Data Mining: The ASA Data Science Journal, to appear. arXiv preprint arXiv:2110.02927.
</p>
<p>Blanco, J. L. &amp; Rai, P. K. (2014). nanoflann: a C++ header-only fork of FLANN, a library for nearest neighbor (NN) with kd-trees. https://github.com/jlblancoc/nanoflann.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## 1. Generating 10 multiplets of a numeric dataset
X = rnorm(n=100, mean=0, sd=1)
Y = rnorm(n=100, mean=X^2, sd=1)
data = cbind(X, Y)
multiplet_idx = multiplet(data, k=10) 
multiplet_1 = data[which(multiplet_idx == 1), ]
multiplet_10 = data[which(multiplet_idx == 10), ]

## 2. Generating 4 multiplets of the iris dataset using strategy 2
multiplet_idx = multiplet(iris, k=4, strategy=2)
multiplet_1 = iris[which(multiplet_idx == 1), ]
multiplet_4 = iris[which(multiplet_idx == 4), ]

</code></pre>

<hr>
<h2 id='twin'>Partition datasets into statistcally similar twin sets</h2><span id='topic+twin'></span>

<h3>Description</h3>

<p><code>twin()</code> implements the twinning algorithm presented in Vakayil and Joseph (2022). A partition of the dataset is returned, such that the resulting two disjoint sets, termed as <em>twins</em>, are distributed similar to each other, as well as the whole dataset. Such a partition is an optimal training-testing split (Joseph and Vakayil, 2021) for training and testing statistical and machine learning models, and is model-independent. The statistical similarity also allows one to treat either of the twins as a compression (lossy) of the dataset for tractable model building on Big Data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>twin(data, r, u1 = NULL, format_data = TRUE, leaf_size = 8)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="twin_+3A_data">data</code></td>
<td>
<p>The dataset including both the predictors and response(s); should not contain missing values, and only numeric and/or factor column(s) are allowed.</p>
</td></tr>
<tr><td><code id="twin_+3A_r">r</code></td>
<td>
<p>An integer representing the inverse of the splitting ratio, e.g., for an 80-20 partition, <code>r = 1 / 0.2 = 5</code>.</p>
</td></tr>
<tr><td><code id="twin_+3A_u1">u1</code></td>
<td>
<p>Index of the data point from where twinning starts; if not provided, twinning starts from a random point in the dataset. Fixing <code>u1</code> makes twinning deterministic, i.e., the same twins are returned.</p>
</td></tr>
<tr><td><code id="twin_+3A_format_data">format_data</code></td>
<td>
<p>If set to <code>TRUE</code>, constant columns in <code>data</code> are removed, factor columns are converted to numerical using Helmert coding, and then the columns are scaled to zero mean and unit standard deviation. If set to <code>FALSE</code>, the user is expected to perform data pre-processing.</p>
</td></tr>
<tr><td><code id="twin_+3A_leaf_size">leaf_size</code></td>
<td>
<p>Maximum number of elements in the leaf-nodes of the <em>kd</em>-tree.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The twinning algorithm requires nearest neighbor queries that are performed using a <em>kd</em>-tree. The <em>kd</em>-tree implementation in the <code>nanoflann</code> (Blanco and Rai, 2014) C++ library is used.
</p>


<h3>Value</h3>

<p>Indices of the smaller twin.
</p>


<h3>References</h3>

<p>Vakayil, A., &amp; Joseph, V. R. (2022). Data Twinning. Statistical Analysis and Data Mining: The ASA Data Science Journal, to appear. arXiv preprint arXiv:2110.02927.
</p>
<p>Joseph, V. R., &amp; Vakayil, A. (2021). SPlit: An Optimal Method for Data Splitting. Technometrics, 1-11. doi:10.1080/00401706.2021.1921037.
</p>
<p>Blanco, J. L. &amp; Rai, P. K. (2014). nanoflann: a C++ header-only fork of FLANN, a library for nearest neighbor (NN) with kd-trees. https://github.com/jlblancoc/nanoflann.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## 1. An 80-20 partition of a numeric dataset
X = rnorm(n=100, mean=0, sd=1)
Y = rnorm(n=100, mean=X^2, sd=1)
data = cbind(X, Y)
twin1_indices = twin(data, r=5) 
twin1 = data[twin1_indices, ]
twin2 = data[-twin1_indices, ]
plot(data, main="Smaller Twin")
points(twin1, col="green", cex=2)

## 2. An 80-20 split of the iris dataset
twin1_indices = twin(iris, r=5)
twin1 = iris[twin1_indices, ]
twin2 = iris[-twin1_indices, ]

</code></pre>

<hr>
<h2 id='twinning-package'>Data Twinning</h2><span id='topic+twinning-package'></span>

<h3>Description</h3>

<p>An efficient implementation of the twinning algorithm proposed in Vakayil and Joseph (2022) for partitioning a dataset into statistically similar twin sets. It is orders of magnitude faster than the SPlit algorithm proposed in Joseph and Vakayil (2021) for splitting a dataset into training and testing sets, and the support points algorithm of Mak and Joseph (2018) for subsampling from Big Data.
</p>


<h3>Details</h3>

<p>The package provides functions <code><a href="#topic+twin">twin</a>()</code>, <code><a href="#topic+multiplet">multiplet</a>()</code>, and <code><a href="#topic+energy">energy</a>()</code>. <code>twin()</code> partitions datasets into statistically similar disjoint sets, termed as <em>twins</em>. The twins themselves are statistically similar to the original dataset (Vakayil and Joseph, 2022). Such a partition can be employed for optimal training and testing of statistical and machine learning models (Joseph and Vakayil, 2021). The twins can be of unequal size; for tractable model building on large datasets, the smaller twin can serve as a compressed (lossy) version of the original dataset. <code>multiplet()</code> is an extension of <code>twin()</code> to generate multiple disjoint partitions that can be used for <em>k</em>-fold cross validation, or with divide-and-conquer procedures. <code>energy()</code> computes the energy distance (Székely and Rizzo, 2013) between a given dataset and a set of points, which is the metric minimized by twinning. 
</p>


<h3>Author(s)</h3>

<p>Akhil Vakayil, V. Roshan Joseph
</p>
<p>Maintainer: Akhil Vakayil &lt;akhilv@gatech.edu&gt;
</p>


<h3>References</h3>

<p>Vakayil, A., &amp; Joseph, V. R. (2022). Data Twinning. Statistical Analysis and Data Mining: The ASA Data Science Journal, to appear. arXiv preprint arXiv:2110.02927.
</p>
<p>Joseph, V. R., &amp; Vakayil, A. (2021). SPlit: An Optimal Method for Data Splitting. Technometrics, 1-11. doi:10.1080/00401706.2021.1921037.
</p>
<p>Mak, S. &amp; Joseph, V. R. (2018). Support Points. Annals of Statistics, 46, 2562-2592.
</p>
<p>Székely, G. J., &amp; Rizzo, M. L. (2013). Energy statistics: A class of statistics based on distances. Journal of statistical planning and inference, 143(8), 1249-1272.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
