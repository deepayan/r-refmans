<!DOCTYPE html><html><head><title>Help for package ustfd</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ustfd}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#endpoint_exists'><p>Tests if an endpoint is known</p></a></li>
<li><a href='#filter-syntax'><p>Request filtered API results</p></a></li>
<li><a href='#ustfd_all_pages'><p>Retrieve multiple pages of Fiscal Data API in a single call</p></a></li>
<li><a href='#ustfd_datasets'><p>Return a table of supported and known datasets</p></a></li>
<li><a href='#ustfd_json_response'><p>Process JSON Response of a Successful API Query</p></a></li>
<li><a href='#ustfd_query'><p>Form a Query</p></a></li>
<li><a href='#ustfd_request'><p>Retrieve Data From the U.S. Bureau Of the Fiscal Service API</p></a></li>
<li><a href='#ustfd_response_meta_object'><p>Extract Metadata From Parsed API Response</p></a></li>
<li><a href='#ustfd_response_payload'><p>Extract Payload as Table From Parsed API Response</p></a></li>
<li><a href='#ustfd_simple'><p>Retrieve Fiscal Data API in a single call</p></a></li>
<li><a href='#ustfd_table_columns'><p>Return a table of known fields for known endpoints</p></a></li>
<li><a href='#ustfd_tables'><p>Return a table of supported and known tables including the API endpoints</p>
for the specified dataset(s). See <code>ustfd_datasets()</code> for known datasets.</a></li>
<li><a href='#ustfd_url'><p>Generate URL To Access US Treasury Fiscal Data API</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>API Client for US Treasury Fiscal Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.4</td>
</tr>
<tr>
<td>Description:</td>
<td>Make requests from the US Treasury Fiscal Data API endpoints.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/groditi/ustfd">https://github.com/groditi/ustfd</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/groditi/ustfd/issues">https://github.com/groditi/ustfd/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, glue (&ge; 1.3.1), httr, lubridate (&ge; 1.9.2), purrr (&ge;
1.0.0), readr, rlang (&ge; 1.0.0), tibble, stringr, snakecase (&ge;
0.11.0)</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), jsonlite</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-28 01:28:47 UTC; guill</td>
</tr>
<tr>
<td>Author:</td>
<td>Guillermo Roditi Dominguez
    <a href="https://orcid.org/0000-0002-7127-8742"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Guillermo Roditi Dominguez &lt;guillermo@newriverinvestments.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-28 14:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='endpoint_exists'>Tests if an endpoint is known</h2><span id='topic+endpoint_exists'></span>

<h3>Description</h3>

<p>See <code><a href="#topic+ustfd_tables">ustfd_tables()</a></code> for known endpoints.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>endpoint_exists(endpoint)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="endpoint_exists_+3A_endpoint">endpoint</code></td>
<td>
<p>character vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>logical matching input size
</p>


<h3>See Also</h3>

<p>Other ustfd_user: 
<code><a href="#topic+ustfd_all_pages">ustfd_all_pages</a>()</code>,
<code><a href="#topic+ustfd_datasets">ustfd_datasets</a>()</code>,
<code><a href="#topic+ustfd_query">ustfd_query</a>()</code>,
<code><a href="#topic+ustfd_simple">ustfd_simple</a>()</code>,
<code><a href="#topic+ustfd_table_columns">ustfd_table_columns</a>()</code>,
<code><a href="#topic+ustfd_tables">ustfd_tables</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ustfd)
endpoint_exists('v2/accounting/od/debt_to_penny')

</code></pre>

<hr>
<h2 id='filter-syntax'>Request filtered API results</h2><span id='topic+filter-syntax'></span>

<h3>Description</h3>

<p>Fiscal Data API allows for the filtering of results on the server side,
leading to a smaller payload. The combinations of fields and operators
supported are not currently defined, so it is suggested you test the desired
combinations before relying on them.
</p>


<h3>Syntax</h3>

<p>A filter should be a named list of key-value pairs where the name corresponds
to the field that should be filtered and the value is a character vector or a
list where the name of an item corresponds to the operator and the value
corresponds to the operand. One field may have more than one filter.
</p>


<h3>Operators</h3>


<ul>
<li> <p><code>&gt;</code>, <code>&lt;</code>  Greater-than and lesser-than
</p>
</li>
<li> <p><code>&gt;=</code>, <code>&lt;=</code>  Greater-/lesser-than or equal-to
</p>
</li>
<li> <p><code>=</code>  Equal to
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;in&#8288;</code>  Subset-of
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 #records with a record_date no older than 10 days ago
 list(record_date = c('&gt;=' = lubridate::today()-10))

 #records with a record_date between two dates
 list(
   record_date = c('&gt;=' = '2022-01-01'),
   record_date = c('&lt;=' = '2022-12-31')
 )

 #records with a specific record_date
 list(record_date = c('=' = lubridate::today()-2))

 #records where record_date is any of a set of specific dates
 list(
   record_date = list('in' = c('2022-06-13','2022-06-15','2022-06-17')
 )

## End(Not run)

</code></pre>

<hr>
<h2 id='ustfd_all_pages'>Retrieve multiple pages of Fiscal Data API in a single call</h2><span id='topic+ustfd_all_pages'></span>

<h3>Description</h3>

<p><code>ustfd_all_pages()</code> is similar to <code>ustfd_simple()</code> with the difference that,
for requests that generate multiple pages of results, it will request all
pages and merge them into a single result.
</p>
<p>While care has been taken to optimize <code>ustfd_all_pages()</code>, for requests
spanning more than 10 pages you should consider breaking up the call further
if memory use is a concern, especially if you are writing the results to disk
or a database with atomic transactions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ustfd_all_pages(
  endpoint,
  filter = NULL,
  fields = NULL,
  sort = NULL,
  page_size = 10000L,
  slowly = FALSE,
  pause = 0.25,
  quiet = TRUE,
  user_agent = "http://github.com/groditi/ustfd"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ustfd_all_pages_+3A_endpoint">endpoint</code></td>
<td>
<p>required string representing an API endpoint</p>
</td></tr>
<tr><td><code id="ustfd_all_pages_+3A_filter">filter</code></td>
<td>
<p>optional list used to subset the data. See <a href="#topic+filter-syntax">filter-syntax</a> for
more information.</p>
</td></tr>
<tr><td><code id="ustfd_all_pages_+3A_fields">fields</code></td>
<td>
<p>optional character vector of the fields to be retrieved</p>
</td></tr>
<tr><td><code id="ustfd_all_pages_+3A_sort">sort</code></td>
<td>
<p>optional string or character vector. Ordering defaults to
ascending, to specify descending order precede the field name with '-'</p>
</td></tr>
<tr><td><code id="ustfd_all_pages_+3A_page_size">page_size</code></td>
<td>
<p>optional integer for pagination</p>
</td></tr>
<tr><td><code id="ustfd_all_pages_+3A_slowly">slowly</code></td>
<td>
<p>pause between http requests when set to <code>TRUE</code></p>
</td></tr>
<tr><td><code id="ustfd_all_pages_+3A_pause">pause</code></td>
<td>
<p>length, in seconds, to pause</p>
</td></tr>
<tr><td><code id="ustfd_all_pages_+3A_quiet">quiet</code></td>
<td>
<p>when set to <code>FALSE</code> updates will be output via a message</p>
</td></tr>
<tr><td><code id="ustfd_all_pages_+3A_user_agent">user_agent</code></td>
<td>
<p>string, optional</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list containing the following items
</p>

<ul>
<li> <p><code>meta</code> - the metadata returned by the API
</p>
</li>
<li> <p><code>data</code> - the payload returned by the API in table form.
See <code><a href="#topic+ustfd_response_payload">ustfd_response_payload()</a></code>
</p>
</li></ul>



<h3>See Also</h3>

<p>Other ustfd_user: 
<code><a href="#topic+endpoint_exists">endpoint_exists</a>()</code>,
<code><a href="#topic+ustfd_datasets">ustfd_datasets</a>()</code>,
<code><a href="#topic+ustfd_query">ustfd_query</a>()</code>,
<code><a href="#topic+ustfd_simple">ustfd_simple</a>()</code>,
<code><a href="#topic+ustfd_table_columns">ustfd_table_columns</a>()</code>,
<code><a href="#topic+ustfd_tables">ustfd_tables</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(ustfd)

exchange_rates &lt;- ustfd_all_pages(
  'v1/accounting/od/rates_of_exchange',
   fields = c(
    'country_currency_desc', 'exchange_rate','record_date','effective_date'
   ),
   filter = list(
     record_date = c('&gt;=' = '2020-01-01'),
     country_currency_desc = list('in' = c('Canada-Dollar','Mexico-Peso'))
   )
)

## End(Not run)
</code></pre>

<hr>
<h2 id='ustfd_datasets'>Return a table of supported and known datasets</h2><span id='topic+ustfd_datasets'></span>

<h3>Description</h3>

<p><code>ustfd_datasets</code> provides details about 34 known datasets for Fiscal Data.
A data frame with 34 rows and the following 7 columns:
</p>

<ul>
<li> <p><code>dataset</code> - ID of the source dataset (natural key)
</p>
</li>
<li> <p><code>name</code> - name of the source dataset
</p>
</li>
<li> <p><code>summary_text</code> - description of the data set and the data it covers
</p>
</li>
<li> <p><code>earliest_date</code> - the date of the earliest record available for this table
</p>
</li>
<li> <p><code>data_start_year</code> - first year in the data set
</p>
</li>
<li> <p><code>update_frequency</code> - &quot;Daily&quot;, &quot;Monthly&quot;, &quot;Quarterly&quot;, &quot;Semi-Annually&quot;,
&quot;Annually&quot;, &quot;As Needed&quot;, &quot;Daily (Discontinued)&quot;, &quot;Monthly (Discontinued)&quot;
</p>
</li>
<li> <p><code>notes_and_known_limitations</code> - notes about
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>ustfd_datasets()
</code></pre>


<h3>Value</h3>

<p>tibble
</p>


<h3>Source</h3>

<p><a href="https://fiscaldata.treasury.gov/api-documentation/#list-of-endpoints">https://fiscaldata.treasury.gov/api-documentation/#list-of-endpoints</a>
</p>


<h3>See Also</h3>

<p>Other ustfd_user: 
<code><a href="#topic+endpoint_exists">endpoint_exists</a>()</code>,
<code><a href="#topic+ustfd_all_pages">ustfd_all_pages</a>()</code>,
<code><a href="#topic+ustfd_query">ustfd_query</a>()</code>,
<code><a href="#topic+ustfd_simple">ustfd_simple</a>()</code>,
<code><a href="#topic+ustfd_table_columns">ustfd_table_columns</a>()</code>,
<code><a href="#topic+ustfd_tables">ustfd_tables</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ustfd)
ustfd_datasets()



</code></pre>

<hr>
<h2 id='ustfd_json_response'>Process JSON Response of a Successful API Query</h2><span id='topic+ustfd_json_response'></span>

<h3>Description</h3>

<p><code>ustfd_json_response()</code>  will process the response to a successful request
from Fiscal Data API and translate a JSON object into a R data structure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ustfd_json_response(response, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ustfd_json_response_+3A_response">response</code></td>
<td>
<p>an httr response returned by <code><a href="#topic+ustfd_request">ustfd_request()</a></code></p>
</td></tr>
<tr><td><code id="ustfd_json_response_+3A_...">...</code></td>
<td>
<p>additional arguments passed to <code>httr::content</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list
</p>


<h3>See Also</h3>

<p>Other ustfd_low_level: 
<code><a href="#topic+ustfd_request">ustfd_request</a>()</code>,
<code><a href="#topic+ustfd_response_meta_object">ustfd_response_meta_object</a>()</code>,
<code><a href="#topic+ustfd_response_payload">ustfd_response_payload</a>()</code>,
<code><a href="#topic+ustfd_url">ustfd_url</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(ustfd)
query &lt;- ustfd_query('v1/accounting/dts/dts_table_2', sort =c('-record_date'))
response &lt;- ustfd_request(query)
payload_table &lt;- ustfd_response_payload(response)
payload_meta &lt;- ustfd_response_meta_object(response)

## End(Not run)
</code></pre>

<hr>
<h2 id='ustfd_query'>Form a Query</h2><span id='topic+ustfd_query'></span>

<h3>Description</h3>

<p><code>ustfd_query()</code> will verify the endpoint is valid and return a list suitable
for passing to <code><a href="#topic+ustfd_url">ustfd_url()</a></code> and <code><a href="#topic+ustfd_request">ustfd_request()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ustfd_query(
  endpoint,
  filter = NULL,
  fields = NULL,
  sort = NULL,
  page_size = NULL,
  page_number = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ustfd_query_+3A_endpoint">endpoint</code></td>
<td>
<p>required string representing an API endpoint</p>
</td></tr>
<tr><td><code id="ustfd_query_+3A_filter">filter</code></td>
<td>
<p>optional list used to subset the data. See <a href="#topic+filter-syntax">filter-syntax</a> for
more information.</p>
</td></tr>
<tr><td><code id="ustfd_query_+3A_fields">fields</code></td>
<td>
<p>optional character vector of the fields to be retrieved</p>
</td></tr>
<tr><td><code id="ustfd_query_+3A_sort">sort</code></td>
<td>
<p>optional string or character vector. Ordering defaults to
ascending, to specify descending order precede the field name with '-'</p>
</td></tr>
<tr><td><code id="ustfd_query_+3A_page_size">page_size</code></td>
<td>
<p>optional integer for pagination</p>
</td></tr>
<tr><td><code id="ustfd_query_+3A_page_number">page_number</code></td>
<td>
<p>optional integer for pagination</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list
</p>


<h3>See Also</h3>

<p>Other ustfd_user: 
<code><a href="#topic+endpoint_exists">endpoint_exists</a>()</code>,
<code><a href="#topic+ustfd_all_pages">ustfd_all_pages</a>()</code>,
<code><a href="#topic+ustfd_datasets">ustfd_datasets</a>()</code>,
<code><a href="#topic+ustfd_simple">ustfd_simple</a>()</code>,
<code><a href="#topic+ustfd_table_columns">ustfd_table_columns</a>()</code>,
<code><a href="#topic+ustfd_tables">ustfd_tables</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(ustfd)
ustfd_query(
  'v2/accounting/od/utf_qtr_yields',
   filter = list(record_date = c('&gt;=' = lubridate::today()-10))
)
ustfd_query(
  'v2/accounting/od/utf_qtr_yields',
   filter = list(record_date = list('in' = c('2020-03-15','2020-03-16','2020-03-17')))
)
ustfd_query(
  'v2/accounting/od/utf_qtr_yields',
   filter = list(record_date = c('=' = '2020-03-15'))
)



</code></pre>

<hr>
<h2 id='ustfd_request'>Retrieve Data From the U.S. Bureau Of the Fiscal Service API</h2><span id='topic+ustfd_request'></span>

<h3>Description</h3>

<p><code>ustfd_request()</code>  will execute queries against the Fiscal Data API. Queries
can generated using <code><a href="#topic+ustfd_query">ustfd_query()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ustfd_request(
  query,
  user_agent = "http://github.com/groditi/ustfd",
  process_response = ustfd_json_response,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ustfd_request_+3A_query">query</code></td>
<td>
<p>list generated by one of the query generating functions</p>
</td></tr>
<tr><td><code id="ustfd_request_+3A_user_agent">user_agent</code></td>
<td>
<p>string, optional</p>
</td></tr>
<tr><td><code id="ustfd_request_+3A_process_response">process_response</code></td>
<td>
<p>function, optional. processes the <code>httr</code> response
object. Defaults to <code><a href="#topic+ustfd_json_response">ustfd_json_response()</a></code> which will return the JSON
payload parsed into a list</p>
</td></tr>
<tr><td><code id="ustfd_request_+3A_...">...</code></td>
<td>
<p>further arguments will be passed to <code>process_response</code> when called</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a httr response object
</p>


<h3>See Also</h3>

<p>Other ustfd_low_level: 
<code><a href="#topic+ustfd_json_response">ustfd_json_response</a>()</code>,
<code><a href="#topic+ustfd_response_meta_object">ustfd_response_meta_object</a>()</code>,
<code><a href="#topic+ustfd_response_payload">ustfd_response_payload</a>()</code>,
<code><a href="#topic+ustfd_url">ustfd_url</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(ustfd)
query &lt;- ustfd_query('v1/accounting/dts/dts_table_2', sort =c('-record_date'))
response &lt;- ustfd_request(query)
payload_table &lt;- ustfd_response_payload(response)
payload_meta &lt;- ustfd_response_meta_object(response)

## End(Not run)
</code></pre>

<hr>
<h2 id='ustfd_response_meta_object'>Extract Metadata From Parsed API Response</h2><span id='topic+ustfd_response_meta_object'></span>

<h3>Description</h3>

<p><code>ustfd_response_meta_object()</code>  will return the meta object included in a
successful API response. The meta object is a list with the following items:
</p>

<ul>
<li> <p><code>count</code> - the number of records in the response
</p>
</li>
<li> <p><code>labels</code> - a named list of labels for each field
</p>
</li>
<li> <p><code>dataTypes</code> - a named list describing the data type for each field
</p>
</li>
<li> <p><code>dataFormats</code> - a named list describing the data format for each field
</p>
</li>
<li> <p><code>total-count</code> - the total number of records matching the query
</p>
</li>
<li> <p><code>total-pages</code> - the total number of pages of records matching the query
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>ustfd_response_meta_object(response)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ustfd_response_meta_object_+3A_response">response</code></td>
<td>
<p>a parsed response returned by <code><a href="#topic+ustfd_json_response">ustfd_json_response()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list
</p>


<h3>See Also</h3>

<p>Other ustfd_low_level: 
<code><a href="#topic+ustfd_json_response">ustfd_json_response</a>()</code>,
<code><a href="#topic+ustfd_request">ustfd_request</a>()</code>,
<code><a href="#topic+ustfd_response_payload">ustfd_response_payload</a>()</code>,
<code><a href="#topic+ustfd_url">ustfd_url</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(ustfd)
query &lt;- ustfd_query('v1/accounting/dts/dts_table_2', sort =c('-record_date'))
response &lt;- ustfd_request(query)
payload_table &lt;- ustfd_response_payload(response)
payload_meta &lt;- ustfd_response_meta_object(response)

## End(Not run)
</code></pre>

<hr>
<h2 id='ustfd_response_payload'>Extract Payload as Table From Parsed API Response</h2><span id='topic+ustfd_response_payload'></span>

<h3>Description</h3>

<p><code>ustfd_response_payload()</code> will return the results of the query in tabular
format in the form of a tibble with one column for each field returned and
one row for every record returned in the same order they were returned.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ustfd_response_payload(response)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ustfd_response_payload_+3A_response">response</code></td>
<td>
<p>a parsed response returned by <code><a href="#topic+ustfd_json_response">ustfd_json_response()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a tibble
</p>


<h3>See Also</h3>

<p>Other ustfd_low_level: 
<code><a href="#topic+ustfd_json_response">ustfd_json_response</a>()</code>,
<code><a href="#topic+ustfd_request">ustfd_request</a>()</code>,
<code><a href="#topic+ustfd_response_meta_object">ustfd_response_meta_object</a>()</code>,
<code><a href="#topic+ustfd_url">ustfd_url</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(ustfd)
query &lt;- ustfd_query('v1/accounting/dts/dts_table_2', sort =c('-record_date'))
response &lt;- ustfd_request(query)
payload_table &lt;- ustfd_response_payload(response)
payload_meta &lt;- ustfd_response_meta_object(response)

## End(Not run)

</code></pre>

<hr>
<h2 id='ustfd_simple'>Retrieve Fiscal Data API in a single call</h2><span id='topic+ustfd_simple'></span>

<h3>Description</h3>

<p><code>ustfd_simple()</code> aggregates the workflow for retrieving data from the API
into a single call.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ustfd_simple(
  endpoint,
  filter = NULL,
  fields = NULL,
  sort = NULL,
  page_size = NULL,
  page_number = NULL,
  user_agent = "http://github.com/groditi/ustfd"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ustfd_simple_+3A_endpoint">endpoint</code></td>
<td>
<p>required string representing an API endpoint</p>
</td></tr>
<tr><td><code id="ustfd_simple_+3A_filter">filter</code></td>
<td>
<p>optional list used to subset the data. See <a href="#topic+filter-syntax">filter-syntax</a> for
more information.</p>
</td></tr>
<tr><td><code id="ustfd_simple_+3A_fields">fields</code></td>
<td>
<p>optional character vector of the fields to be retrieved</p>
</td></tr>
<tr><td><code id="ustfd_simple_+3A_sort">sort</code></td>
<td>
<p>optional string or character vector. Ordering defaults to
ascending, to specify descending order precede the field name with '-'</p>
</td></tr>
<tr><td><code id="ustfd_simple_+3A_page_size">page_size</code></td>
<td>
<p>optional integer for pagination</p>
</td></tr>
<tr><td><code id="ustfd_simple_+3A_page_number">page_number</code></td>
<td>
<p>optional integer for pagination</p>
</td></tr>
<tr><td><code id="ustfd_simple_+3A_user_agent">user_agent</code></td>
<td>
<p>optional string</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list containing the following items
</p>

<ul>
<li> <p><code>meta</code> - the metadata returned by the API
</p>
</li>
<li> <p><code>data</code> - the payload returned by the API in table form.
See <code><a href="#topic+ustfd_response_payload">ustfd_response_payload()</a></code>
</p>
</li></ul>



<h3>See Also</h3>

<p>Other ustfd_user: 
<code><a href="#topic+endpoint_exists">endpoint_exists</a>()</code>,
<code><a href="#topic+ustfd_all_pages">ustfd_all_pages</a>()</code>,
<code><a href="#topic+ustfd_datasets">ustfd_datasets</a>()</code>,
<code><a href="#topic+ustfd_query">ustfd_query</a>()</code>,
<code><a href="#topic+ustfd_table_columns">ustfd_table_columns</a>()</code>,
<code><a href="#topic+ustfd_tables">ustfd_tables</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(ustfd)

exchange_rates &lt;- ustfd_simple(
  'v1/accounting/od/rates_of_exchange',
   fields = c(
    'country_currency_desc', 'exchange_rate','record_date','effective_date'
   ),
   filter = list(
     record_date = c('&gt;=' = '2020-01-01'),
     country_currency_desc = list('in' = c('Canada-Dollar','Mexico-Peso'))
   )
)

## End(Not run)
</code></pre>

<hr>
<h2 id='ustfd_table_columns'>Return a table of known fields for known endpoints</h2><span id='topic+ustfd_table_columns'></span>

<h3>Description</h3>

<p><code>ustfd_table_columns</code> returns the column dictionaries for the specified endpoint(s).
See <code><a href="#topic+ustfd_tables">ustfd_tables()</a></code> for known endpoints.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ustfd_table_columns(endpoints = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ustfd_table_columns_+3A_endpoints">endpoints</code></td>
<td>
<p>one or more strings representing a valid endpoint</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The format of a dictionary is a tibble with one row for every
table column and the following columns:
</p>

<ul>
<li> <p><code>endpoint</code> - the ID of the table this column belongs to
</p>
</li>
<li> <p><code>colum_name</code> - the field name recognizable to the API interface
</p>
</li>
<li> <p><code>data_type</code> - one of: &quot;DATE&quot;, &quot;STRING&quot;, &quot;CURRENCY&quot;, &quot;NUMBER&quot;,
&quot;PERCENTAGE&quot;, &quot;YEAR&quot;, &quot;QUARTER&quot;, &quot;MONTH&quot;, &quot;DAY&quot;
</p>
</li>
<li> <p><code>pretty_name</code> - a descriptive label
</p>
</li>
<li> <p><code>definition</code> -  definition of the colmn's value
</p>
</li>
<li> <p><code>is_required</code> - logical value
</p>
</li></ul>



<h3>Value</h3>

<p>tibble
</p>


<h3>Source</h3>

<p><a href="https://fiscaldata.treasury.gov/api-documentation/#fields-by-endpoint">https://fiscaldata.treasury.gov/api-documentation/#fields-by-endpoint</a>
</p>


<h3>See Also</h3>

<p>Other ustfd_user: 
<code><a href="#topic+endpoint_exists">endpoint_exists</a>()</code>,
<code><a href="#topic+ustfd_all_pages">ustfd_all_pages</a>()</code>,
<code><a href="#topic+ustfd_datasets">ustfd_datasets</a>()</code>,
<code><a href="#topic+ustfd_query">ustfd_query</a>()</code>,
<code><a href="#topic+ustfd_simple">ustfd_simple</a>()</code>,
<code><a href="#topic+ustfd_tables">ustfd_tables</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ustfd)
ustfd_table_columns(ustfd_tables(ustfd_datasets()$dataset[2])$endpoint)



</code></pre>

<hr>
<h2 id='ustfd_tables'>Return a table of supported and known tables including the API endpoints
for the specified dataset(s). See <code><a href="#topic+ustfd_datasets">ustfd_datasets()</a></code> for known datasets.</h2><span id='topic+ustfd_tables'></span>

<h3>Description</h3>

<p><code>ustfd_tables</code> provides details about 85 known endpoints for Fiscal Data.
A data frame with 85 rows and the following 9 columns:
</p>

<ul>
<li> <p><code>dataset</code> - ID of the source dataset
</p>
</li>
<li> <p><code>endpoint</code> - the table's API endpoint (natural key)
</p>
</li>
<li> <p><code>table_name</code> - Name of the table within the data set
</p>
</li>
<li> <p><code>table_description</code> - a description for the data in the endpoint
</p>
</li>
<li> <p><code>row_definition</code> - a description of what each row in the table describes
</p>
</li>
<li> <p><code>path_name</code> - API path name
</p>
</li>
<li> <p><code>date_column</code> - the name of the table column that holds the record's date
</p>
</li>
<li> <p><code>earliest_date</code> - the date of the earliest record available for this table
</p>
</li>
<li> <p><code>update_frequency</code> - &quot;Daily&quot;, &quot;Monthly&quot;, &quot;Quarterly&quot;, &quot;Semi-Annually&quot;,
&quot;Annually&quot;, &quot;As Needed&quot;, &quot;Daily (Discontinued)&quot;, &quot;Monthly (Discontinued)&quot;
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>ustfd_tables(datasets = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ustfd_tables_+3A_datasets">datasets</code></td>
<td>
<p>one or more strings representing a valid dataset ID. If
present, only endpoints belonging to matching datasets will be returned</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tibble
</p>


<h3>Source</h3>

<p><a href="https://fiscaldata.treasury.gov/api-documentation/#list-of-endpoints">https://fiscaldata.treasury.gov/api-documentation/#list-of-endpoints</a>
</p>


<h3>See Also</h3>

<p>Other ustfd_user: 
<code><a href="#topic+endpoint_exists">endpoint_exists</a>()</code>,
<code><a href="#topic+ustfd_all_pages">ustfd_all_pages</a>()</code>,
<code><a href="#topic+ustfd_datasets">ustfd_datasets</a>()</code>,
<code><a href="#topic+ustfd_query">ustfd_query</a>()</code>,
<code><a href="#topic+ustfd_simple">ustfd_simple</a>()</code>,
<code><a href="#topic+ustfd_table_columns">ustfd_table_columns</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ustfd)
ustfd_tables(ustfd_datasets()$dataset[2])$endpoint



</code></pre>

<hr>
<h2 id='ustfd_url'>Generate URL To Access US Treasury Fiscal Data API</h2><span id='topic+ustfd_url'></span>

<h3>Description</h3>

<p><code>ustfd_url()</code> will generate a URL suitable for querying the Fiscal Data API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ustfd_url(query)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ustfd_url_+3A_query">query</code></td>
<td>
<p>required list</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a httr url object
</p>


<h3>See Also</h3>

<p>Other ustfd_low_level: 
<code><a href="#topic+ustfd_json_response">ustfd_json_response</a>()</code>,
<code><a href="#topic+ustfd_request">ustfd_request</a>()</code>,
<code><a href="#topic+ustfd_response_meta_object">ustfd_response_meta_object</a>()</code>,
<code><a href="#topic+ustfd_response_payload">ustfd_response_payload</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(ustfd)
ustfd_url(ustfd_query('/v1/accounting/dts/dts_table_4'))


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
