<!DOCTYPE html><html><head><title>Help for package attempt</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {attempt}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#attempt'><p>Attempt</p></a></li>
<li><a href='#attempt-package'><p>attempt package</p></a></li>
<li><a href='#discretly'><p>discretly</p></a></li>
<li><a href='#if_all'><p>Test for all, any or none</p></a></li>
<li><a href='#if_then'><p>If this, then that</p></a></li>
<li><a href='#is_try_error'><p>Is the element of class &quot;try-error&quot;?</p></a></li>
<li><a href='#on_error'><p>Add a function to be run on error</p></a></li>
<li><a href='#silent_attempt'><p>Silently attempt</p></a></li>
<li><a href='#silently'><p>Silently</p></a></li>
<li><a href='#stop_if'><p>Warn if</p></a></li>
<li><a href='#surely'><p>surely</p></a></li>
<li><a href='#try_catch'><p>Try Catch</p></a></li>
<li><a href='#with_message'><p>Manipulate messages and warnings</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Tools for Defensive Programming</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Tools for defensive programming, inspired by 'purrr' mappers and 
    based on 'rlang'.'attempt' extends and facilitates defensive programming by 
    providing a consistent grammar, and provides a set of easy to use functions 
    for common tests and conditions. 'attempt' only depends on 'rlang', and 
    focuses on speed, so it can be easily integrated in other functions and 
    used in data analysis. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ColinFay/attempt">https://github.com/ColinFay/attempt</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown, curl</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Imports:</td>
<td>rlang</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-05-03 20:24:38 UTC; colin</td>
</tr>
<tr>
<td>Author:</td>
<td>Colin Fay <a href="https://orcid.org/0000-0001-7343-1846"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Colin Fay &lt;contact@colinfay.me&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-05-03 20:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='attempt'>Attempt</h2><span id='topic+attempt'></span>

<h3>Description</h3>

<p>A wrapper around base try that allows you to set a custom message when an error/warning occurs.
<code>attempt</code> returns the value if there is no error nor message.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>attempt(expr, msg = NULL, verbose = FALSE, silent = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="attempt_+3A_expr">expr</code></td>
<td>
<p>the expression to be evaluated</p>
</td></tr>
<tr><td><code id="attempt_+3A_msg">msg</code></td>
<td>
<p>the message to return if an error occurs</p>
</td></tr>
<tr><td><code id="attempt_+3A_verbose">verbose</code></td>
<td>
<p>wether or not to return to expression producing the error</p>
</td></tr>
<tr><td><code id="attempt_+3A_silent">silent</code></td>
<td>
<p>wether or not the error should be kept under silence</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
attempt(log("a"), msg = "Nop !")

## End(Not run)
</code></pre>

<hr>
<h2 id='attempt-package'>attempt package</h2><span id='topic+attempt-package'></span>

<h3>Description</h3>

<p>Tools for defensive programming in R.
'attempt' extends and facilitates defensive programming by providing a consistent grammar, and
provides a set of easy to use functions for common tests and conditions. 'attempt' only depends
on <code>rlang</code> &amp; <code>withr</code>, and focuses on speed, so it can be easily integrated in other functions and used
in data analysis.
</p>


<h3>Author(s)</h3>

<p>colin &lt;contact@colinfay.me&gt;
</p>

<hr>
<h2 id='discretly'>discretly</h2><span id='topic+discretly'></span><span id='topic+discreetly'></span>

<h3>Description</h3>

<p>Prevent a funtion from printing message or warning
</p>


<h3>Usage</h3>

<pre><code class='language-R'>discretly(.f)

discreetly(.f)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="discretly_+3A_.f">.f</code></td>
<td>
<p>the function to wrap</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an error if any, a warning if any, the result if any
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
discrete_mat &lt;- discretly(matrix)
discrete_mat(1:3, 2)

## End(Not run)
</code></pre>

<hr>
<h2 id='if_all'>Test for all, any or none</h2><span id='topic+if_all'></span><span id='topic+if_any'></span><span id='topic+if_none'></span>

<h3>Description</h3>

<p>Test for all, any or none
</p>


<h3>Usage</h3>

<pre><code class='language-R'>if_all(.l, .p = isTRUE, .f)

if_any(.l, .p = isTRUE, .f)

if_none(.l, .p = isTRUE, .f)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="if_all_+3A_.l">.l</code></td>
<td>
<p>the list to test.</p>
</td></tr>
<tr><td><code id="if_all_+3A_.p">.p</code></td>
<td>
<p>the predicate for testing. Defaut is <code>isTRUE</code>.</p>
</td></tr>
<tr><td><code id="if_all_+3A_.f">.f</code></td>
<td>
<p>a mapper or a function run if .p(.x) is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If .p(.x) is TRUE, .f() is run.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if_all(1:10, ~ .x &lt; 11, ~ return(letters[1:10]))
if_any(1:10, is.numeric, ~ return(letters[1:10]))
if_none(1:10, is.numeric, ~ return(letters[1:10]))
</code></pre>

<hr>
<h2 id='if_then'>If this, then that</h2><span id='topic+if_then'></span><span id='topic+if_not'></span><span id='topic+if_else'></span>

<h3>Description</h3>

<p>If this, then that
</p>


<h3>Usage</h3>

<pre><code class='language-R'>if_then(.x, .p = isTRUE, .f)

if_not(.x, .p = isTRUE, .f)

if_else(.x, .p = isTRUE, .f, .else)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="if_then_+3A_.x">.x</code></td>
<td>
<p>the object to test. If <code>NULL</code> (the default), only .p is evaluated.</p>
</td></tr>
<tr><td><code id="if_then_+3A_.p">.p</code></td>
<td>
<p>the predicate for testing. Defaut is <code>isTRUE</code>.</p>
</td></tr>
<tr><td><code id="if_then_+3A_.f">.f</code></td>
<td>
<p>a mapper or a function run if .p(.x) is TRUE</p>
</td></tr>
<tr><td><code id="if_then_+3A_.else">.else</code></td>
<td>
<p>a mapper or a function run if .p(.x) is not TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Depending on wether or not .p(.x) is TRUE, .f() or .else() is run.
</p>


<h3>Note</h3>

<p>If you want these function to return a value,
you need to wrap these values into a mapper / a function. E.g, to return
a vector, you'll need to write <code>if_then(1, is.numeric, ~ "Yay")</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>a &lt;- if_then(1, is.numeric, ~ "Yay")
a &lt;- if_not(1, is.character, ~ "Yay")
a &lt;- if_else(.x = TRUE, .f = ~ "Yay", .else = ~ "Nay")
</code></pre>

<hr>
<h2 id='is_try_error'>Is the element of class &quot;try-error&quot;?</h2><span id='topic+is_try_error'></span>

<h3>Description</h3>

<p>Is the element of class &quot;try-error&quot;?
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_try_error(.x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_try_error_+3A_.x">.x</code></td>
<td>
<p>the object to test</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- attempt(log("a"), silent = TRUE)
is_try_error(x)

</code></pre>

<hr>
<h2 id='on_error'>Add a function to be run on error</h2><span id='topic+on_error'></span>

<h3>Description</h3>

<p>This function behaves as 'on.exit()', but is run on error, and supports mappers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>on_error(f)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="on_error_+3A_f">f</code></td>
<td>
<p>a function to call on error</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A local error handler.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
y &lt;- function(num){
  on_error(~ write( Sys.time(), "error_log.txt", append = TRUE) )
  log(num)
}

</code></pre>

<hr>
<h2 id='silent_attempt'>Silently attempt</h2><span id='topic+silent_attempt'></span>

<h3>Description</h3>

<p>A wrapper around silently and attempt
</p>


<h3>Usage</h3>

<pre><code class='language-R'>silent_attempt(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="silent_attempt_+3A_...">...</code></td>
<td>
<p>the expression to evaluate</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an error if any, a warning if any.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
silent_attempt(warn("nop!"))

## End(Not run)
</code></pre>

<hr>
<h2 id='silently'>Silently</h2><span id='topic+silently'></span>

<h3>Description</h3>

<p>silently returns a new function that will returns an error or a warning if any,
or else returns nothing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>silently(.f)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="silently_+3A_.f">.f</code></td>
<td>
<p>the function to silence</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an error if any, a warning if any. The result is never returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
silent_log &lt;- silently(log)
silent_log(1)
silent_log("a")

## End(Not run)
</code></pre>

<hr>
<h2 id='stop_if'>Warn if</h2><span id='topic+stop_if'></span><span id='topic+stop_if_any'></span><span id='topic+stop_if_all'></span><span id='topic+stop_if_none'></span><span id='topic+stop_if_not'></span><span id='topic+warn_if'></span><span id='topic+warn_if_any'></span><span id='topic+warn_if_all'></span><span id='topic+warn_if_none'></span><span id='topic+warn_if_not'></span><span id='topic+message_if'></span><span id='topic+message_if_any'></span><span id='topic+message_if_all'></span><span id='topic+message_if_none'></span><span id='topic+message_if_not'></span>

<h3>Description</h3>

<p>Friendlier messaging functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stop_if(.x, .p = isTRUE, msg = NULL)

stop_if_any(.l, .p = isTRUE, msg = NULL)

stop_if_all(.l, .p = isTRUE, msg = NULL)

stop_if_none(.l, .p = isTRUE, msg = NULL)

stop_if_not(.x, .p = isTRUE, msg = NULL)

warn_if(.x, .p = isTRUE, msg = NULL)

warn_if_any(.l, .p = isTRUE, msg = NULL)

warn_if_all(.l, .p = isTRUE, msg = NULL)

warn_if_none(.l, .p = isTRUE, msg = NULL)

warn_if_not(.x, .p = isTRUE, msg = NULL)

message_if(.x = NULL, .p = isTRUE, msg = NULL)

message_if_any(.l, .p = isTRUE, msg = NULL)

message_if_all(.l, .p = isTRUE, msg = NULL)

message_if_none(.l, .p = isTRUE, msg = NULL)

message_if_not(.x, .p = isTRUE, msg = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stop_if_+3A_.x">.x</code></td>
<td>
<p>the element to evaluate. It can be a predicate function (i.e a function returning TRUE).</p>
</td></tr>
<tr><td><code id="stop_if_+3A_.p">.p</code></td>
<td>
<p>the predicate with the condition to test on <code>.x</code> or <code>.l</code>. Default is <code>isTRUE</code>.</p>
</td></tr>
<tr><td><code id="stop_if_+3A_msg">msg</code></td>
<td>
<p>the message to return. If NULL (default), the built-in message is printed.</p>
</td></tr>
<tr><td><code id="stop_if_+3A_.l">.l</code></td>
<td>
<p>the list of elements to evaluate</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
x &lt;- 12
stop_if(x, ~ .x &gt; 13)
stop_if_not(x, is.character)

a  &lt;- "this is not numeric"
warn_if(a,  is.character )
warn_if_not(a, is.numeric )
b  &lt;- 20
warn_if(b ,  ~ . &gt; 10 ,
         msg = "Wow, that's a lot of b")
c &lt;- "a"
message_if(c, is.character,
         msg = "You entered a character element")

## End(Not run)
</code></pre>

<hr>
<h2 id='surely'>surely</h2><span id='topic+surely'></span>

<h3>Description</h3>

<p>Wrap a function in a try
</p>


<h3>Usage</h3>

<pre><code class='language-R'>surely(.f)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="surely_+3A_.f">.f</code></td>
<td>
<p>the function to wrap</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an error if any, a warning if any, the result if any
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
sure_log &lt;- surely(log)
sure_log(1)
sure_log("a")

## End(Not run)
</code></pre>

<hr>
<h2 id='try_catch'>Try Catch</h2><span id='topic+try_catch'></span><span id='topic+try_catch_df'></span><span id='topic+map_try_catch'></span><span id='topic+map_try_catch_df'></span>

<h3>Description</h3>

<p>Friendlier try catch functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>try_catch(expr, .e = NULL, .w = NULL, .f = NULL)

try_catch_df(expr)

map_try_catch(l, fun, .e = NULL, .w = NULL, .f = NULL)

map_try_catch_df(l, fun)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="try_catch_+3A_expr">expr</code></td>
<td>
<p>for simple try catch, the expression to be evaluated</p>
</td></tr>
<tr><td><code id="try_catch_+3A_.e">.e</code></td>
<td>
<p>a one side formula or a function evaluated when an error occurs</p>
</td></tr>
<tr><td><code id="try_catch_+3A_.w">.w</code></td>
<td>
<p>a one side formula or a function evaluated when a warning occurs</p>
</td></tr>
<tr><td><code id="try_catch_+3A_.f">.f</code></td>
<td>
<p>a one side formula or an expression evaluated before returning or exiting</p>
</td></tr>
<tr><td><code id="try_catch_+3A_l">l</code></td>
<td>
<p>for map_* function, a list of arguments</p>
</td></tr>
<tr><td><code id="try_catch_+3A_fun">fun</code></td>
<td>
<p>for map_* function, a function to try with the list <code>l</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>try_catch handles errors and warnings the way you specify. try_catch_df
returns a tibble with the call, the error message if any, the warning message if
any, and the value of the evaluated expression.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
try_catch(log("a"), .e = ~ paste0("There was an error: ", .x))
try_catch(log(1), .f = ~ print("finally"))
try_catch(log(1), .f = function() print("finally"))

## End(Not run)
</code></pre>

<hr>
<h2 id='with_message'>Manipulate messages and warnings</h2><span id='topic+with_message'></span><span id='topic+with_warning'></span><span id='topic+without_message'></span><span id='topic+without_warning'></span>

<h3>Description</h3>

<p><code>with_message</code> and <code>with_warning</code> add a warning or a message to a function.
<code>without_message</code> and <code>without_warning</code> turn the warning and message off.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>with_message(.f, msg)

with_warning(.f, msg)

without_message(.f)

without_warning(.f)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="with_message_+3A_.f">.f</code></td>
<td>
<p>the function to wrap</p>
</td></tr>
<tr><td><code id="with_message_+3A_msg">msg</code></td>
<td>
<p>the message to print</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a function
</p>


<h3>Examples</h3>

<pre><code class='language-R'>msg_as_num &lt;- with_message(as.numeric, msg = "Numeric conversion")
warn_as_num &lt;- with_warning(as.numeric, msg = "Numeric conversion")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
