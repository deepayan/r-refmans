<!DOCTYPE html><html><head><title>Help for package ARPALData</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ARPALData}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ARPALData'><p>ARPALData Package</p></a></li>
<li><a href='#ARPALdf_Summary'><p>Summary statistics for a data frame of class 'ARPALdf'</p></a></li>
<li><a href='#ARPALdf_Summary_map'><p>Generate a map of summary statistics for a given ARPALdf data.frame</p></a></li>
<li><a href='#get_ARPA_Lombardia_AQ_data'><p>Download air quality data from ARPA Lombardia website</p></a></li>
<li><a href='#get_ARPA_Lombardia_AQ_municipal_data'><p>Download air quality data at manucipal from ARPA Lombardia website</p></a></li>
<li><a href='#get_ARPA_Lombardia_AQ_municipal_registry'><p>Download metadata (registry) on air quality monitoring stations at municipal level from ARPA Lombardia website</p></a></li>
<li><a href='#get_ARPA_Lombardia_AQ_registry'><p>Download metadata (registry) on air quality monitoring stations from ARPA Lombardia website</p></a></li>
<li><a href='#get_ARPA_Lombardia_W_data'><p>Download weather/meteorological data from ARPA Lombardia website</p></a></li>
<li><a href='#get_ARPA_Lombardia_W_registry'><p>Download metadata (registry) on weather monitoring stations from ARPA Lombardia website</p></a></li>
<li><a href='#get_ARPA_Lombardia_zoning'><p>Download ARPA Lombardia zoning geometries</p></a></li>
<li><a href='#get_Lombardia_geospatial'><p>Download geospatial data of Lombardy from Eurostat</p></a></li>
<li><a href='#is_ARPALdf'><p>Check if a given object belongs to class 'ARPALdf'</p></a></li>
<li><a href='#is_ARPALdf_AQ'><p>Check if a given object belongs to class 'ARPALdf_AQ'</p></a></li>
<li><a href='#is_ARPALdf_AQ_mun'><p>Check if a given object belongs to class 'ARPALdf_AQ_mun'</p></a></li>
<li><a href='#is_ARPALdf_W'><p>Check if a given object belongs to class 'ARPALdf_W'</p></a></li>
<li><a href='#map_Lombardia_stations'><p>Generate a map of the selected stations</p></a></li>
<li><a href='#registry_KNN_dist'><p>Identifies the K-nearest-neighbors (stations) to all the monitoring sites included in a given ARPALdf</p>
registry data.frame. The neighbors are identified computing the Euclidean distance among the sites'
coordinates.</a></li>
<li><a href='#Time_aggregate'><p>Aggregate any ARPALdf object (with higher temporal frequency) to hourly, daily, weekly, monthly and yearly</p>
temporal frequencies.</a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Retrieving and Analyzing Air Quality and Weather Data from ARPA
Lombardia</td>
</tr>
<tr>
<td>Version:</td>
<td>1.5.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Contains functions for retrieving, managing and analysing air quality and weather data from Regione Lombardia open database (<a href="https://www.dati.lombardia.it/">https://www.dati.lombardia.it/</a>).
    Data are collected by ARPA Lombardia (Lombardia Environmental Protection Agency), Italy, through its ground monitoring network.
    See the webpage <a href="https://www.arpalombardia.it/">https://www.arpalombardia.it/</a> for further information on ARPA Lombardia's activities and history.
    Data quality (e.g. missing values, exported values, graphical mapping) has been checked involving members of the ARPA Lombardia's office for air quality control.
    The package makes available observations since 1989 (for weather) and 1968 (for air quality) and are updated with daily frequency by the regional agency.
    Full description of the package can be retrieved in the companion paper Maranzano \&amp; Algieri (2024), "ARPALData: an R package for retrieving and analyzing air quality 
    and weather data from ARPA Lombardia (Italy)", Environmental and Ecological Statistics, &lt;<a href="https://doi.org/10.1007%2Fs10651-024-00599-6">doi:10.1007/s10651-024-00599-6</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Imports:</td>
<td>tidyselect,dplyr,utils,lubridate,rlang,readr,stringr,tm,tidyr,purrr,eurostat,sf,ggplot2,tibble,aweek,curl,archive,future,future.apply</td>
</tr>
<tr>
<td>Suggests:</td>
<td>tidyverse, RSocrata, knitr, rmarkdown</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-16 15:51:26 UTC; paulm</td>
</tr>
<tr>
<td>Author:</td>
<td>Paolo Maranzano <a href="https://orcid.org/0000-0002-9228-2759"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph],
  Andrea Algieri [aut, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Paolo Maranzano &lt;pmaranzano.ricercastatistica@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-17 00:00:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='ARPALData'>ARPALData Package</h2><span id='topic+ARPALData-package'></span><span id='topic+ARPALData'></span>

<h3>Description</h3>

<p>Contains functions for downloading and managing air quality and weather data from Regione Lombardia open database.
Data are collected by ARPA Lombardia (Lombardia Environmental Protection Agency), Italy.
</p>


<h3>Author(s)</h3>

<p>Paolo Maranzano <a href="mailto:pmaranzano.ricercastatistica@gmail.com">pmaranzano.ricercastatistica@gmail.com</a>
</p>

<hr>
<h2 id='ARPALdf_Summary'>Summary statistics for a data frame of class 'ARPALdf'</h2><span id='topic+ARPALdf_Summary'></span>

<h3>Description</h3>

<p>'ARPALdf_Summary' returns many descriptive statistics summaring the data contained in a data frame
of class ARPALdf. Statistics are calculated at overall level (full sample), by station ID and by year.
For each variable are reported the basic positioning indices (min, max, mean, median, quantile) and
variability indices (range, standard deviation). Other reported statistics are the Pearson's linear correlation
by station and some graphical representation of the distribution (kernel density plot, histogram, boxplot).
In addition, the function returns useful data-quality information, such as gap length statistics (i.e. number of
missing observations for each variable by station and by year) and outlier detection tools
(e.g., Hampel filter and boxplot rule)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ARPALdf_Summary(
  Data,
  by_IDStat = TRUE,
  by_Year = TRUE,
  gap_length = TRUE,
  correlation = TRUE,
  histogram = FALSE,
  density = FALSE,
  outlier = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ARPALdf_Summary_+3A_data">Data</code></td>
<td>
<p>Dataset of class 'ARPALdf' containing the data to be summarised.</p>
</td></tr>
<tr><td><code id="ARPALdf_Summary_+3A_by_idstat">by_IDStat</code></td>
<td>
<p>Logic value (TRUE or FALSE). Use TRUE (default) to compute summary statistics by Station ID.</p>
</td></tr>
<tr><td><code id="ARPALdf_Summary_+3A_by_year">by_Year</code></td>
<td>
<p>Logic value (TRUE or FALSE). Use TRUE (default) to compute summary statistics by year.</p>
</td></tr>
<tr><td><code id="ARPALdf_Summary_+3A_gap_length">gap_length</code></td>
<td>
<p>Logic value (TRUE or FALSE). Use TRUE (default) to compute summary statistics for the gap length of each variable.</p>
</td></tr>
<tr><td><code id="ARPALdf_Summary_+3A_correlation">correlation</code></td>
<td>
<p>Logic value (TRUE or FALSE). Use TRUE (default) to compute linear correlation of available variables.</p>
</td></tr>
<tr><td><code id="ARPALdf_Summary_+3A_histogram">histogram</code></td>
<td>
<p>Logic value (TRUE or FALSE). Use TRUE to plot the histogram of each variable. Default is FALSE.</p>
</td></tr>
<tr><td><code id="ARPALdf_Summary_+3A_density">density</code></td>
<td>
<p>Logic value (TRUE or FALSE). Use TRUE to plot the kernel density plot of each variable. Default is FALSE.</p>
</td></tr>
<tr><td><code id="ARPALdf_Summary_+3A_outlier">outlier</code></td>
<td>
<p>Logic value (TRUE or FALSE). Use TRUE to analyse extreme values of each variable
(boxplot and Hampel filter). Default is FALSE.</p>
</td></tr>
<tr><td><code id="ARPALdf_Summary_+3A_verbose">verbose</code></td>
<td>
<p>Logic value (TRUE or FALSE). Toggle warnings and messages. If 'verbose = TRUE' (default) the function
prints on the screen some messages describing the progress of the tasks. If 'verbose = FALSE' any message about
the progression is suppressed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of data.frames containing summary descriptive statistics for a data frame of class 'ARPALdf'.
Summary statistics are computed for the overall sample (Descr), by Station ID (Descr_by_IDStat) and by
year (Descr_by_Year). Available statistics are: number of NAs, 
number of negative values, minimum, mean, maximum and standard deviation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Download daily air quality data from all the stations for year 2020
if (require("RSocrata")) {
  d &lt;- get_ARPA_Lombardia_AQ_data(ID_station = NULL, Date_begin = "2020-01-01",
            Date_end = "2020-12-31", Frequency = "daily")
 }
## Summarising observed data
sum_stats &lt;- ARPALdf_Summary(Data = d)


</code></pre>

<hr>
<h2 id='ARPALdf_Summary_map'>Generate a map of summary statistics for a given ARPALdf data.frame</h2><span id='topic+ARPALdf_Summary_map'></span>

<h3>Description</h3>

<p>'ARPALdf_Summary_map' represents on a map (polygon of Lombardy) the data contained in a data frame
of class 'ARPALdf' containing the values or the descriptive statistics by station. Data can be either
a ARPALdf of observed data (from 'get_ARPA_Lombardia_xxx' commands) and an ARPALdf obtained as summary descriptive
statistic (from 'ARPALdf_Summary' command).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ARPALdf_Summary_map(
  Data,
  Title_main,
  Title_legend = "Variable",
  Variable,
  prov_line_type = 1,
  prov_line_size = 1,
  col_scale = c("#00FF00", "#FFFF00", "#FF0000"),
  val_midpoint = NULL,
  xlab = "Longitude",
  ylab = "Latitude"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ARPALdf_Summary_map_+3A_data">Data</code></td>
<td>
<p>Dataset of class 'ARPALdf' containing the values or the descriptive statistics to plot on the map.
Data can be either a ARPALdf of observed data (from 'get_ARPA_Lombardia_xxx' commands) and an ARPALdf obtained
as summary descriptive statistic (from 'ARPALdf_Summary' command).</p>
</td></tr>
<tr><td><code id="ARPALdf_Summary_map_+3A_title_main">Title_main</code></td>
<td>
<p>Title of the plot.</p>
</td></tr>
<tr><td><code id="ARPALdf_Summary_map_+3A_title_legend">Title_legend</code></td>
<td>
<p>Title fo the legend</p>
</td></tr>
<tr><td><code id="ARPALdf_Summary_map_+3A_variable">Variable</code></td>
<td>
<p>Summary variable to represent</p>
</td></tr>
<tr><td><code id="ARPALdf_Summary_map_+3A_prov_line_type">prov_line_type</code></td>
<td>
<p>Linetype for Lombardy provinces. Default is 1.</p>
</td></tr>
<tr><td><code id="ARPALdf_Summary_map_+3A_prov_line_size">prov_line_size</code></td>
<td>
<p>Size of the line for Lombardy provinces. Default is 1.</p>
</td></tr>
<tr><td><code id="ARPALdf_Summary_map_+3A_col_scale">col_scale</code></td>
<td>
<p>Vector indicating the minimum, the middle and the average point colors.
Default is c(&quot;green&quot;,&quot;yellow&quot;,&quot;red&quot;).</p>
</td></tr>
<tr><td><code id="ARPALdf_Summary_map_+3A_val_midpoint">val_midpoint</code></td>
<td>
<p>Numeric. Value associated to the middle-point scale color.
Default is NULL (midpoint is set equal to the average of the variable to represent).</p>
</td></tr>
<tr><td><code id="ARPALdf_Summary_map_+3A_xlab">xlab</code></td>
<td>
<p>x-axis label. Default is 'Longitude'.</p>
</td></tr>
<tr><td><code id="ARPALdf_Summary_map_+3A_ylab">ylab</code></td>
<td>
<p>y-axis label. Default is 'Latitude'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A map of selected stations across the Lombardy region
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Download daily air quality data from all the stations for year 2020
if (require("RSocrata")) {
    d &lt;- get_ARPA_Lombardia_AQ_data(ID_station = NULL, Date_begin = "2020-01-01",
              Date_end = "2020-12-31", Frequency = "daily")
}
## Summarising observed data
s &lt;- ARPALdf_Summary(Data = d)
## Mapping of the average NO2 in 2020 at several stations
ARPALdf_Summary_map(Data = s$Descr_by_IDStat$Mean_by_stat,
        Title_main = "Mean NO2 by station in 2020", Variable = "NO2")


</code></pre>

<hr>
<h2 id='get_ARPA_Lombardia_AQ_data'>Download air quality data from ARPA Lombardia website</h2><span id='topic+get_ARPA_Lombardia_AQ_data'></span>

<h3>Description</h3>

<p>'get_ARPA_Lombardia_AQ_data' returns observed air quality measurements collected by
ARPA Lombardia ground detection system for Lombardy region in Northern Italy.
Available airborne pollutant concentrations are: NO2, NOx, PM10, PM2.5, Ozone, Arsenic, Benzene,
Benzo-a-pirene, Ammonia, Sulfur Dioxide, Black Carbon, CO, Nikel, Cadmium and Lead.
Data are available from 1968 and are updated up to the current date (2023).
For more information about the municipal data visit the section 'Monitoraggio aria' at the webpage:
https://www.dati.lombardia.it/stories/s/auv9-c2sj
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_ARPA_Lombardia_AQ_data(
  ID_station = NULL,
  Date_begin = "2022-01-01",
  Date_end = "2022-12-31",
  Frequency = "hourly",
  Var_vec = NULL,
  Fns_vec = NULL,
  by_sensor = FALSE,
  verbose = TRUE,
  parallel = FALSE,
  parworkers = NULL,
  parfuturetype = "multisession"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_ARPA_Lombardia_AQ_data_+3A_id_station">ID_station</code></td>
<td>
<p>Numeric value. ID of the station to consider. Using ID_station = NULL, all the available
stations are selected. Default is ID_station = NULL.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_AQ_data_+3A_date_begin">Date_begin</code></td>
<td>
<p>Character vector of the first date-time to download. Format can be either &quot;YYYY-MM-DD&quot; or &quot;YYYY-MM-DD hh:mm:ss&quot;. Default is Date_begin = &quot;2022-01-01&quot;.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_AQ_data_+3A_date_end">Date_end</code></td>
<td>
<p>Character vector of the last date-time to download. Format can be either &quot;YYYY-MM-DD&quot; or &quot;YYYY-MM-DD hh:mm:ss&quot;. Default is Date_end = &quot;2022-12-31&quot;.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_AQ_data_+3A_frequency">Frequency</code></td>
<td>
<p>Temporal aggregation frequency. It can be &quot;hourly&quot;, &quot;daily&quot;, &quot;weekly&quot;, &quot;monthly&quot; or &quot;yearly&quot;.
Default is Frequency = &quot;hourly&quot;.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_AQ_data_+3A_var_vec">Var_vec</code></td>
<td>
<p>Character vector of variables to aggregate. If NULL (default) all the variables are averaged.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_AQ_data_+3A_fns_vec">Fns_vec</code></td>
<td>
<p>Character vector of aggregation function to apply to the selected variables.
Available functions are mean, median, min, max, sum, qPP (PP-th percentile), sd, var,
vc (variability coefficient), skew (skewness) and kurt (kurtosis).</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_AQ_data_+3A_by_sensor">by_sensor</code></td>
<td>
<p>Logic value (TRUE or FALSE). If 'by_sensor = TRUE', the function returns the observed concentrations
by sensor code, while if 'by_sensor = FALSE' (default) it returns the observed concentrations by station.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_AQ_data_+3A_verbose">verbose</code></td>
<td>
<p>Logic value (TRUE or FALSE). Toggle warnings and messages. If 'verbose = TRUE' (default) the function
prints on the screen some messages describing the progress of the tasks. If 'verbose = FALSE' any message about
the progression is suppressed.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_AQ_data_+3A_parallel">parallel</code></td>
<td>
<p>Logic value (TRUE or FALSE). If 'parallel = FALSE' (default), data downloading is performed using a sequential/serial approach and additional parameters 'parworkers' and 'parfuturetype' are ignored.
When 'parallel = TRUE', data downloading is performed using parallel computing through the Futureverse setting.
More detailed information about parallel computing in the Futureverse can be found at the following webpages:
https://future.futureverse.org/ and https://cran.r-project.org/web/packages/future.apply/vignettes/future.apply-1-overview.html</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_AQ_data_+3A_parworkers">parworkers</code></td>
<td>
<p>Numeric integer value. If 'parallel = TRUE' (parallel mode active), the user can declare the number of parallel workers to be activated using 'parworkers = integer number'. By default ('parworkers = NULL'), the number of active workers is half of the available local cores.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_AQ_data_+3A_parfuturetype">parfuturetype</code></td>
<td>
<p>Character vector. If 'parallel = TRUE' (parallel mode active), the user can declare the parallel strategy to be used according to the Futureverse syntax through 'parfuturetype'. By default, the 'multisession' (background R sessions on local machine) is used. In alternative, the 'multicore' (forked R processes on local machine. Not supported by Windows and RStudio) setting can be used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of class 'data.frame' and 'ARPALdf'. The object is fully compatible with Tidyverse.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Download hourly air quality data for 2022 at station 501.
if (require("RSocrata")) {
    get_ARPA_Lombardia_AQ_data(ID_station=501, Date_begin = "2022-01-01",
        Date_end = "2022-12-31", Frequency="hourly", parallel = TRUE)
}
## Download (parallel) monthly data for NOx and NO2 observed between May and
## August 2021 for all the stations active on the network. For NOx is computed
## the 25th percentile, while for NO2 is computed the maximum concentration observed.
if (require("RSocrata")) {
    get_ARPA_Lombardia_AQ_data(ID_station=NULL,Date_begin = "2022-05-01",
        Date_end = "2022-08-31", Frequency="monthly",Var_vec=c("NOx","NO2"),
        Fns_vec=c("q25","max"), parallel = TRUE)
}
## Download hourly air quality data by sensor for January 2023 at station 501.
if (require("RSocrata")) {
    get_ARPA_Lombardia_AQ_data(ID_station=501,Date_begin = "2023-01-01 00:00:00",
        Date_end = "2023-01-31 23:00:00", by_sensor = TRUE)
}


</code></pre>

<hr>
<h2 id='get_ARPA_Lombardia_AQ_municipal_data'>Download air quality data at manucipal from ARPA Lombardia website</h2><span id='topic+get_ARPA_Lombardia_AQ_municipal_data'></span>

<h3>Description</h3>

<p>'get_ARPA_Lombardia_AQ_municipal_data' returns the air quality levels at municipal level estimated by
ARPA Lombardia using a physico-chemical model which simulates air quality based on weather and geo-physical
variables. For each municipality of Lombardy, ARPA estimates the average (NO2_mean) and maximum daily (NO2_max_day)
level of NO2, the daily maximum (Ozone_max_day) and the 8-hours moving window maximum (Ozone_max_8h) of Ozone
and the average levels of PM10 (PM10_mean) and PM2.5 (PM2.5_mean).
Data are available from 2011 and are updated up to the current date.
For more information about the municipal data visit the section 'Stime comunali dell'aria' at the webpage:
https://www.dati.lombardia.it/stories/s/auv9-c2sj
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_ARPA_Lombardia_AQ_municipal_data(
  ID_station = NULL,
  Date_begin = "2021-01-01",
  Date_end = "2022-12-31",
  Frequency = "daily",
  Var_vec = NULL,
  Fns_vec = NULL,
  by_sensor = FALSE,
  verbose = TRUE,
  parallel = FALSE,
  parworkers = NULL,
  parfuturetype = "multisession"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_ARPA_Lombardia_AQ_municipal_data_+3A_id_station">ID_station</code></td>
<td>
<p>Numeric value. ID of the station to consider. Using ID_station = NULL, all the available
stations are selected. Default is ID_station = NULL.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_AQ_municipal_data_+3A_date_begin">Date_begin</code></td>
<td>
<p>Character vector of the first date-time to download. Format can be either &quot;YYYY-MM-DD&quot; or &quot;YYYY-MM-DD hh:mm:ss&quot;. Default is Date_begin = &quot;2022-01-01&quot;.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_AQ_municipal_data_+3A_date_end">Date_end</code></td>
<td>
<p>Character vector of the last date-time to download. Format can be either &quot;YYYY-MM-DD&quot; or &quot;YYYY-MM-DD hh:mm:ss&quot;. Default is Date_end = &quot;2022-12-31&quot;.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_AQ_municipal_data_+3A_frequency">Frequency</code></td>
<td>
<p>Temporal aggregation frequency. It can be &quot;daily&quot;, &quot;weekly&quot;, &quot;monthly&quot; or &quot;yearly&quot;.
Default is Frequency = &quot;daily&quot;.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_AQ_municipal_data_+3A_var_vec">Var_vec</code></td>
<td>
<p>Character vector of variables to aggregate. If NULL (default) all the variables are averaged.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_AQ_municipal_data_+3A_fns_vec">Fns_vec</code></td>
<td>
<p>Character vector of aggregation function to apply to the selected variables.
Available functions are mean, median, min, max, sum, qPP (PP-th percentile), sd, var,
vc (variability coefficient), skew (skewness) and kurt (kurtosis).</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_AQ_municipal_data_+3A_by_sensor">by_sensor</code></td>
<td>
<p>Logic value (TRUE or FALSE). If 'by_sensor = TRUE', the function returns the observed concentrations by sensor code, while
if 'by_sensor = FALSE' (default) it returns the observed concentrations by station.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_AQ_municipal_data_+3A_verbose">verbose</code></td>
<td>
<p>Logic value (TRUE or FALSE). Toggle warnings and messages. If 'verbose = TRUE' (default) the function
prints on the screen some messages describing the progress of the tasks. If 'verbose = FALSE' any message about
the progression is suppressed.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_AQ_municipal_data_+3A_parallel">parallel</code></td>
<td>
<p>Logic value (TRUE or FALSE). If 'parallel = FALSE' (default), data downloading is performed using a sequential/serial approach and additional parameters 'parworkers' and 'parfuturetype' are ignored.
When 'parallel = TRUE', data downloading is performed using parallel computing through the Futureverse setting.
More detailed information about parallel computing in the Futureverse can be found at the following webpages:
https://future.futureverse.org/ and https://cran.r-project.org/web/packages/future.apply/vignettes/future.apply-1-overview.html</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_AQ_municipal_data_+3A_parworkers">parworkers</code></td>
<td>
<p>Numeric integer value. If 'parallel = TRUE' (parallel mode active), the user can declare the number of parallel workers to be activated using 'parworkers = integer number'. By default ('parworkers = NULL'), the number of active workers is half of the available local cores.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_AQ_municipal_data_+3A_parfuturetype">parfuturetype</code></td>
<td>
<p>Character vector. If 'parallel = TRUE' (parallel mode active), the user can declare the parallel strategy to be used according to the Futureverse syntax through 'parfuturetype'. By default, the 'multisession' (background R sessions on local machine) is used. In alternative, the 'multicore' (forked R processes on local machine. Not supported by Windows and RStudio) setting can be used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>More detailed description.
</p>


<h3>Value</h3>

<p>A data frame of class 'data.frame' and 'ARPALdf'. The object is fully compatible with Tidyverse.
The column 'NameStation' identifies the name of each municipality. The column 'IDStation' is an ID code
(assigned from ARPA) uniquely identifying each municipality.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Download daily concentrations at municipal levels observed in 2020
## for all the municipalities in Lombardy
if (require("RSocrata")) {
    get_ARPA_Lombardia_AQ_municipal_data(ID_station=NULL,Date_begin = "2020-01-01",
          Date_end = "2020-12-31", Frequency="daily")
}
## Download monthly concentrations of NO2 (average and maximum) observed in 2021
## at city number 100451.
if (require("RSocrata")) {
    get_ARPA_Lombardia_AQ_municipal_data(ID_station=100451,Date_begin = "2021-01-01",
          Date_end = "2021-12-31", Frequency="monthly",Var_vec=c("NO2_mean","NO2_mean"),
          Fns_vec=c("mean","max"))
}
## Download daily concentrations observed in March and April 2022 at city number 100451.
## Data are reported by sensor.
if (require("RSocrata")) {
    get_ARPA_Lombardia_AQ_municipal_data(ID_station=100451, Date_begin = "2022-03-01",
          Date_end = "2022-04-30", by_sensor = TRUE)
}


</code></pre>

<hr>
<h2 id='get_ARPA_Lombardia_AQ_municipal_registry'>Download metadata (registry) on air quality monitoring stations at municipal level from ARPA Lombardia website</h2><span id='topic+get_ARPA_Lombardia_AQ_municipal_registry'></span>

<h3>Description</h3>

<p>'get_ARPA_Lombardia_AQ_municipal_registry' returns the registry (list) of all the air quality sensors
owned by ARPA Lombardia for each municipality of Lombardy. The information reported are: ID of each sensor and
station, starting date and ending date. The column 'NameStation' identifies the name of each municipality.
The column 'IDStation' is an ID code (assigned from ARPA) uniquely identifying each municipality.
For more information about the municipal data visit the section 'Stime comunali sull'aria' at the webpage:
https://www.dati.lombardia.it/stories/s/auv9-c2sj
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_ARPA_Lombardia_AQ_municipal_registry()
</code></pre>


<h3>Value</h3>

<p>A data frame of class 'data.frame' and 'ARPALdf'. The object is fully compatible with Tidyverse.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_ARPA_Lombardia_AQ_municipal_registry()

</code></pre>

<hr>
<h2 id='get_ARPA_Lombardia_AQ_registry'>Download metadata (registry) on air quality monitoring stations from ARPA Lombardia website</h2><span id='topic+get_ARPA_Lombardia_AQ_registry'></span>

<h3>Description</h3>

<p>'get_ARPA_Lombardia_AQ_registry' returns the registry (list) of all the air quality sensors
and stations belonging to the ARPA Lombardia network. The information reported are: ID of each sensor and
station, geo-location (coordinates in degrees), altitude (mt), starting date and ending date.
The column 'NameStation' identifies the name of each station, while 'IDStation' is an ID code (assigned
from ARPA) uniquely identifying each station.
For more information about the municipal data visit the section 'Monitoraggio aria' at the webpage:
https://www.dati.lombardia.it/stories/s/auv9-c2sj
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_ARPA_Lombardia_AQ_registry()
</code></pre>


<h3>Value</h3>

<p>A data frame of class 'data.frame' and 'ARPALdf'. The object is fully compatible with Tidyverse.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_ARPA_Lombardia_AQ_registry()

</code></pre>

<hr>
<h2 id='get_ARPA_Lombardia_W_data'>Download weather/meteorological data from ARPA Lombardia website</h2><span id='topic+get_ARPA_Lombardia_W_data'></span>

<h3>Description</h3>

<p>'get_ARPA_Lombardia_W_data' returns observed air weather measurements collected by
ARPA Lombardia ground detection system for Lombardy region in Northern Italy.
Available meteorological variables are: temperature (Celsius degrees), rainfall (mm), wind speed (m/s),
wind direction (degrees), relative humidity (
Data are available from 1989 and are updated up to the current date.
For more information about the municipal data visit the section 'Monitoraggio aria' at the webpage:
https://www.dati.lombardia.it/stories/s/auv9-c2sj
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_ARPA_Lombardia_W_data(
  ID_station = NULL,
  Date_begin = "2021-01-01",
  Date_end = "2022-12-31",
  Frequency = "10mins",
  Var_vec = NULL,
  Fns_vec = NULL,
  by_sensor = FALSE,
  verbose = TRUE,
  parallel = FALSE,
  parworkers = NULL,
  parfuturetype = "multisession"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_ARPA_Lombardia_W_data_+3A_id_station">ID_station</code></td>
<td>
<p>Numeric value. ID of the station to consider. Using ID_station = NULL, all the available
stations are selected. Default is ID_station = NULL.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_W_data_+3A_date_begin">Date_begin</code></td>
<td>
<p>Character vector of the first date-time to download. Format can be either &quot;YYYY-MM-DD&quot; or &quot;YYYY-MM-DD hh:mm:ss&quot;. Default is Date_begin = &quot;2022-01-01&quot;.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_W_data_+3A_date_end">Date_end</code></td>
<td>
<p>Character vector of the last date-time to download. Format can be either &quot;YYYY-MM-DD&quot; or &quot;YYYY-MM-DD hh:mm:ss&quot;. Default is Date_end = &quot;2022-12-31&quot;.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_W_data_+3A_frequency">Frequency</code></td>
<td>
<p>Temporal aggregation frequency. It can be &quot;10mins&quot;, &quot;hourly&quot;, &quot;daily&quot;, &quot;weekly&quot;,
&quot;monthly&quot;. Default is Frequency = &quot;10mins&quot;</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_W_data_+3A_var_vec">Var_vec</code></td>
<td>
<p>Character vector of variables to aggregate. If NULL (default) all the variables are averaged,
except for 'Temperature' and 'Snow_height', which are cumulated.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_W_data_+3A_fns_vec">Fns_vec</code></td>
<td>
<p>Character vector of aggregation function to apply to the selected variables.
Available functions are mean, median, min, max, sum, qPP (PP-th percentile), sd, var,
vc (variability coefficient), skew (skewness) and kurt (kurtosis). Attention: for Wind Speed and
Wind Speed Gust only mean, min and max are available; for Wind Direction and Wind Direction Gust
only mean is available.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_W_data_+3A_by_sensor">by_sensor</code></td>
<td>
<p>Logic value (TRUE or FALSE). If 'by_sensor = TRUE', the function returns the observed concentrations
by sensor code, while if 'by_sensor = FALSE' (default) it returns the observed concentrations by station.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_W_data_+3A_verbose">verbose</code></td>
<td>
<p>Logic value (TRUE or FALSE). Toggle warnings and messages. If 'verbose = TRUE' (default) the function
prints on the screen some messages describing the progress of the tasks. If 'verbose = FALSE' any message about
the progression is suppressed.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_W_data_+3A_parallel">parallel</code></td>
<td>
<p>Logic value (TRUE or FALSE). If 'parallel = FALSE' (default), data downloading is performed using a sequential/serial approach and additional parameters 'parworkers' and 'parfuturetype' are ignored.
When 'parallel = TRUE', data downloading is performed using parallel computing through the Futureverse setting.
More detailed information about parallel computing in the Futureverse can be found at the following webpages:
https://future.futureverse.org/ and https://cran.r-project.org/web/packages/future.apply/vignettes/future.apply-1-overview.html</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_W_data_+3A_parworkers">parworkers</code></td>
<td>
<p>Numeric integer value. If 'parallel = TRUE' (parallel mode active), the user can declare the number of parallel workers to be activated using 'parworkers = integer number'. By default ('parworkers = NULL'), the number of active workers is half of the available local cores.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_W_data_+3A_parfuturetype">parfuturetype</code></td>
<td>
<p>Character vector. If 'parallel = TRUE' (parallel mode active), the user can declare the parallel strategy to be used according to the Futureverse syntax through 'parfuturetype'. By default, the 'multisession' (background R sessions on local machine) is used. In alternative, the 'multicore' (forked R processes on local machine. Not supported by Windows and RStudio) setting can be used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>More detailed description.
</p>


<h3>Value</h3>

<p>A data frame of class 'data.frame' and 'ARPALdf'. The object is fully compatible with Tidyverse.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Download all the (10 minutes frequency) weather measurements at station 100
## between August 2021 and December 2022.
if (require("RSocrata")) {
    get_ARPA_Lombardia_W_data(ID_station = 100, Date_begin = "2021-08-01",
          Date_end = "2022-12-31", Frequency = "10mins")
}
## Download all the (daily frequency) weather measurements at station 1974 during 2022
if (require("RSocrata")) {
    get_ARPA_Lombardia_W_data(ID_station = 1974, Date_begin = "2022-01-01",
          Date_end = "2022-12-31", Frequency = "daily")
}


</code></pre>

<hr>
<h2 id='get_ARPA_Lombardia_W_registry'>Download metadata (registry) on weather monitoring stations from ARPA Lombardia website</h2><span id='topic+get_ARPA_Lombardia_W_registry'></span>

<h3>Description</h3>

<p>'get_ARPA_Lombardia_W_registry' returns the registry (list) of all the weather sensors
and stations belonging to the ARPA Lombardia network. The information reported are: ID of each sensor and
station, geo-location (coordinates in degrees), altitude (mt), starting date and ending date.
The column 'NameStation' identifies the name of each station, while 'IDStation' is an ID code (assigned
from ARPA) uniquely identifying each station.
For more information about the municipal data visit the section 'Meteo' at the webpages:
https://www.dati.lombardia.it/stories/s/auv9-c2sj and
https://www.dati.lombardia.it/Ambiente/Stazioni-Meteorologiche/nf78-nj6b
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_ARPA_Lombardia_W_registry()
</code></pre>


<h3>Value</h3>

<p>A data frame of class 'data.frame' and 'ARPALdf'. The object is fully compatible with Tidyverse.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_ARPA_Lombardia_W_registry()


</code></pre>

<hr>
<h2 id='get_ARPA_Lombardia_zoning'>Download ARPA Lombardia zoning geometries</h2><span id='topic+get_ARPA_Lombardia_zoning'></span>

<h3>Description</h3>

<p>'get_ARPA_Lombardia_zoning' returns the geometries (polygonal shape file) and a map of
the ARPA zoning of Lombardy. The zoning reflects the main orographic characteristics of the territory.
Lombardy region is classified into seven type of areas: large urbanized areas, urbanized areas in rural
contexts, rural areas, mountainous areas and valley bottom.
For more information about the municipal data visit the section 'Zonizzazione ARPA Lombardia' at the webpages
https://www.arpalombardia.it/temi-ambientali/aria/rete-di-rilevamento/classificazione-zone/ and
https://www.arpalombardia.it/temi-ambientali/aria/mappa-della-zonizzazione/
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_ARPA_Lombardia_zoning(
  plot_map = TRUE,
  title = "ARPA Lombardia zoning",
  line_type = 1,
  line_size = 1,
  xlab = "Longitude",
  ylab = "Latitude"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_ARPA_Lombardia_zoning_+3A_plot_map">plot_map</code></td>
<td>
<p>Logic value (FALSE or TRUE). If plot_map = TRUE, the ARPA Lombardia zoning is represented
on a map, if plot_mat = FALSE only the geometry (polygon shapefile) is stored in the output.
Default is plot_map = TRUE.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_zoning_+3A_title">title</code></td>
<td>
<p>Title of the plot. Deafult is 'ARPA Lombardia zoning'</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_zoning_+3A_line_type">line_type</code></td>
<td>
<p>Linetype for the zones' borders. Default is 1.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_zoning_+3A_line_size">line_size</code></td>
<td>
<p>Size of the line for the zones. Default is 1.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_zoning_+3A_xlab">xlab</code></td>
<td>
<p>x-axis label. Default is 'Longitude'.</p>
</td></tr>
<tr><td><code id="get_ARPA_Lombardia_zoning_+3A_ylab">ylab</code></td>
<td>
<p>y-axis label. Default is 'Latitude'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns an object of class 'sf' containing the polygon borders of the seven zones used by
ARPA Lombardia to classify the regional territory. If plot_map = 1, it also returns a map of the zoning.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>zones &lt;- get_ARPA_Lombardia_zoning(plot_map = TRUE)

</code></pre>

<hr>
<h2 id='get_Lombardia_geospatial'>Download geospatial data of Lombardy from Eurostat</h2><span id='topic+get_Lombardia_geospatial'></span>

<h3>Description</h3>

<p>'get_Lombardia_geospatial' returns the polygonal (shape file) object containing the geometries
of Lombardy. Shapefile are available at different NUTS levels (https://ec.europa.eu/eurostat/web/nuts/background):
'LAU' for the shapefile of municipalities of Lombardy, 'NUTS3' for the shapefile of provinces of Lombardy
and 'NUTS2' for the shapefile of Lombardy.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_Lombardia_geospatial(NUTS_level = "LAU")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_Lombardia_geospatial_+3A_nuts_level">NUTS_level</code></td>
<td>
<p>NUTS level required: use &quot;NUTS2&quot; for regional geometries, &quot;NUTS3&quot; for provincial geometries,
or &quot;LAU&quot; for municipal geometries. Default NUTS_level = &quot;LAU&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of class 'data.frame', &quot;sf&quot; and 'ARPALdf'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
shape &lt;- get_Lombardia_geospatial(NUTS_level = "LAU")


</code></pre>

<hr>
<h2 id='is_ARPALdf'>Check if a given object belongs to class 'ARPALdf'</h2><span id='topic+is_ARPALdf'></span>

<h3>Description</h3>

<p>'is_ARPALdf' checks if the input object belongs to the class 'ARPALdf'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_ARPALdf(Data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_ARPALdf_+3A_data">Data</code></td>
<td>
<p>Object to check if the class of a dataframe is 'ARPALdf', i.e. ARPAL dataframe.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns 'True' if the object is of class 'ARPALdf' and it returns 'False' if the
object isn't of class 'ARPALdf'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>d &lt;- get_ARPA_Lombardia_AQ_registry()
is_ARPALdf(d)

</code></pre>

<hr>
<h2 id='is_ARPALdf_AQ'>Check if a given object belongs to class 'ARPALdf_AQ'</h2><span id='topic+is_ARPALdf_AQ'></span>

<h3>Description</h3>

<p>'is_ARPALdf_AQ' checks if the input object belongs to the class 'ARPALdf_AQ'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_ARPALdf_AQ(Data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_ARPALdf_AQ_+3A_data">Data</code></td>
<td>
<p>Object to check if the class of a dataframe is 'ARPALdf_AQ', i.e. ARPAL
dataframe for air quality data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns 'True' if the object is of class 'ARPALdf_AQ' and it returns 'False' if the
object isn't of class 'ARPALdf_AQ'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>d &lt;- get_ARPA_Lombardia_AQ_registry()
is_ARPALdf_AQ(d)

</code></pre>

<hr>
<h2 id='is_ARPALdf_AQ_mun'>Check if a given object belongs to class 'ARPALdf_AQ_mun'</h2><span id='topic+is_ARPALdf_AQ_mun'></span>

<h3>Description</h3>

<p>'is_ARPALdf_AQ_mun' checks if the input object belongs to the class 'ARPALdf_AQ_mun'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_ARPALdf_AQ_mun(Data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_ARPALdf_AQ_mun_+3A_data">Data</code></td>
<td>
<p>Object to check if the class of a dataframe is 'ARPALdf_AQ_mun', i.e. ARPAL
dataframe for air quality data at municipal level (See 'get_ARPA_Lombardia_AQ_municipal_data'.
command).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns 'True' if the object is of class 'ARPALdf_AQ_mun' and it returns
'False' if the object isn't of class 'ARPALdf_AQ_mun'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>d &lt;- get_ARPA_Lombardia_AQ_registry()
is_ARPALdf_AQ_mun(d)

</code></pre>

<hr>
<h2 id='is_ARPALdf_W'>Check if a given object belongs to class 'ARPALdf_W'</h2><span id='topic+is_ARPALdf_W'></span>

<h3>Description</h3>

<p>'is_ARPALdf_W' checks if the input object belongs to the class 'ARPALdf_W'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_ARPALdf_W(Data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_ARPALdf_W_+3A_data">Data</code></td>
<td>
<p>Object to check if the class of a dataframe is 'ARPALdf_W', i.e. ARPAL
dataframe for weather data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns 'True' if the object is of class 'ARPALdf_W' and it returns 'False' if the
object isn't of class 'ARPALdf_W'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>d &lt;- get_ARPA_Lombardia_W_registry()
is_ARPALdf_W(d)

</code></pre>

<hr>
<h2 id='map_Lombardia_stations'>Generate a map of the selected stations</h2><span id='topic+map_Lombardia_stations'></span>

<h3>Description</h3>

<p>'get_ARPA_Lombardia_AQ_data' represents on a map (geometries/polygon of Lombardy) the location of
the stations contained in a data frame of class 'ARPALdf'. Data can be either a ARPALdf of observed data
(from 'get_ARPA_Lombardia_xxx' commands) and an ARPALdf obtained as registry
(from 'get_ARPA_Lombardia_xxx_registry' command).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>map_Lombardia_stations(
  data,
  title = "Map of ARPA stations in Lombardy",
  prov_line_type = 1,
  prov_line_size = 1,
  col_points = "blue",
  xlab = "Longitude",
  ylab = "Latitude"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="map_Lombardia_stations_+3A_data">data</code></td>
<td>
<p>Dataset of class 'ARPALdf' containing the stations to plot on the map. It can be either a
ARPALdf of observed data (from 'get_ARPA_Lombardia_xxx' commands) and an ARPALdf obtained as registry
(from 'get_ARPA_Lombardia_xxx_registry' command).</p>
</td></tr>
<tr><td><code id="map_Lombardia_stations_+3A_title">title</code></td>
<td>
<p>Title of the plot. Deafult is 'Map of ARPA stations in Lombardy'</p>
</td></tr>
<tr><td><code id="map_Lombardia_stations_+3A_prov_line_type">prov_line_type</code></td>
<td>
<p>Linetype for Lombardy provinces. Default is 1.</p>
</td></tr>
<tr><td><code id="map_Lombardia_stations_+3A_prov_line_size">prov_line_size</code></td>
<td>
<p>Size of the line for Lombardy provinces. Default is 1.</p>
</td></tr>
<tr><td><code id="map_Lombardia_stations_+3A_col_points">col_points</code></td>
<td>
<p>Color of the points. Default is 'blue'.</p>
</td></tr>
<tr><td><code id="map_Lombardia_stations_+3A_xlab">xlab</code></td>
<td>
<p>x-axis label. Default is 'Longitude'.</p>
</td></tr>
<tr><td><code id="map_Lombardia_stations_+3A_ylab">ylab</code></td>
<td>
<p>y-axis label. Default is 'Latitude'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A map of selected stations across the Lombardy region
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Map network from a dataset of measurements
if (require("RSocrata")) {
  # Download daily concentrations observed at all the stations in 2020.
  d &lt;- get_ARPA_Lombardia_AQ_data(ID_station = NULL, Date_begin = "2020-01-01",
                                  Date_end = "2020-12-31", Frequency = "daily")
  # Map the stations included in 'd'
  map_Lombardia_stations(data = d, title = "Air quality stations in Lombardy")
}
## Map network from a registry dataset
if (require("RSocrata")) {
  # Download registry for all the AQ stations in 2020.
  r &lt;- get_ARPA_Lombardia_AQ_registry()
  # Map the stations included in 'r'
  map_Lombardia_stations(data = r, title = "Air quality stations in Lombardy")
}


</code></pre>

<hr>
<h2 id='registry_KNN_dist'>Identifies the K-nearest-neighbors (stations) to all the monitoring sites included in a given ARPALdf
registry data.frame. The neighbors are identified computing the Euclidean distance among the sites'
coordinates.</h2><span id='topic+registry_KNN_dist'></span>

<h3>Description</h3>

<p>For each element included in reg_X, it identifies the k-nearest neighbors locations
(among those included in reg_Y) according to an Euclidean distance metric. reg_X and reg_Y
must be two 'ARPALdf' objects obtained using get_ARPA_Lombardia_xxx_registry'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>registry_KNN_dist(reg_X, reg_Y, k = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="registry_KNN_dist_+3A_reg_x">reg_X</code></td>
<td>
<p>Dataset of class 'ARPALdf' containing the stations list obtained as registry
(from 'get_ARPA_Lombardia_xxx_registry' command). The object must contain the following
colums: 'IDStation','NameStation','Longitude' and 'Latitude'.</p>
</td></tr>
<tr><td><code id="registry_KNN_dist_+3A_reg_y">reg_Y</code></td>
<td>
<p>Dataset of class 'ARPALdf' containing the stations list obtained as registry
(from 'get_ARPA_Lombardia_xxx_registry' command). The object must contain the following
colums: 'IDStation','NameStation','Longitude' and 'Latitude'.</p>
</td></tr>
<tr><td><code id="registry_KNN_dist_+3A_k">k</code></td>
<td>
<p>Integer value. Represents the number of neighbors the user wants to identify.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame object having the same length of reg_X. For each row (stations in reg_X)
it contains the name and the IDStation code for the k-nearest neighbors.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (require("tidyverse")) {
    regAQ &lt;- get_ARPA_Lombardia_AQ_registry()
    regAQ &lt;- regAQ %&gt;% filter(Pollutant %in% c("PM10","Ammonia"))
    regW &lt;- get_ARPA_Lombardia_W_registry()
    registry_KNN_dist(regAQ,regW,k=2)
}

</code></pre>

<hr>
<h2 id='Time_aggregate'>Aggregate any ARPALdf object (with higher temporal frequency) to hourly, daily, weekly, monthly and yearly
temporal frequencies.</h2><span id='topic+Time_aggregate'></span>

<h3>Description</h3>

<p>Starting from an ARPALdf object with high frequency (e.g., 10mins or hourly), 'Time_aggregate'
aggregates the dataset to lower temporal frequencies (e.g., hourly, daily, weekly, monthly and yearly) by station.
The output is an ARPALdf object with observations having hourly, daily, weekly, monthly or yearly frequency.
The function can be applied only to ARPALdf objects.
User can indicate specific variables to aggregate and an aggregation function among
mean, median, sum (cumulated), min, max, quantiles, and variability metrics for each variable.
It is possible to specify different aggregation functions on the same variable
by repeating the name of the variable in 'Var_vec' and specifying the functions in 'Fns_vec'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Time_aggregate(Dataset, Frequency, Var_vec = NULL, Fns_vec = NULL, verbose = T)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Time_aggregate_+3A_dataset">Dataset</code></td>
<td>
<p>ARPALdf dataframe to aggregate.</p>
</td></tr>
<tr><td><code id="Time_aggregate_+3A_frequency">Frequency</code></td>
<td>
<p>Temporal aggregation frequency. It can be &quot;hourly&quot;, &quot;daily&quot;, &quot;weekly&quot;,
&quot;monthly&quot; or &quot;yearly.</p>
</td></tr>
<tr><td><code id="Time_aggregate_+3A_var_vec">Var_vec</code></td>
<td>
<p>Vector of variables to aggregate. If NULL (default) all the variables are averaged,
expect for 'Temperature' and 'Snow_height' which are summed.</p>
</td></tr>
<tr><td><code id="Time_aggregate_+3A_fns_vec">Fns_vec</code></td>
<td>
<p>Vector of aggregation functions to apply to the selected variables. Available functions
are 'mean', 'median', 'min', 'max', 'sum', 'qPP' (PP-th percentile), 'sd', 'var', 'vc' (variability coefficient),
'skew' (skewness) and 'kurt' (kurtosis). Attention: for Wind Speed and Wind Speed Gust only mean, min
and max are available; for Wind Direction and Wind Direction Gust only mean is available.</p>
</td></tr>
<tr><td><code id="Time_aggregate_+3A_verbose">verbose</code></td>
<td>
<p>Logic value (TRUE or FALSE). Toggle warnings and messages. If 'verbose=T' (default) the function
prints on the screen some messages describing the progress of the tasks. If 'verbose=F' any message about
the progression is suppressed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Download hourly observed concentrations during 2020 for station 501 (Milano - Via Marche).
if (require("RSocrata")) {
    data &lt;- get_ARPA_Lombardia_AQ_data(ID_station=501, Date_begin = "2020-01-01",
                                       Date_end = "2020-12-31", Frequency="hourly")
}
## Aggregate all the data to daily frequency
Time_aggregate(Dataset=data,Frequency="daily",Var_vec=NULL,Fns_vec=NULL)
## Aggregate NO2 to weekly maximum concentrations and NOx to weekly minimum concentrations.
Time_aggregate(Dataset=data,Frequency="weekly",Var_vec=c("NO2","NOx"),Fns_vec=c("max","min"))


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
