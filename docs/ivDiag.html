<!DOCTYPE html><html lang="en"><head><title>Help for package ivDiag</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ivDiag}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ivDiag-package'><p>IV Estimation and Diagnostics</p></a></li>
<li><a href='#AR_test'><p>Anderson Rubin Test</p></a></li>
<li><a href='#eff_F'><p>Effective F</p></a></li>
<li><a href='#gsz'><p>Data from GSZ (2016)</p></a></li>
<li><a href='#gsz_south'><p>Data from GSZ (2016): Subsample</p></a></li>
<li><a href='#ivDiag'><p>Omnibus Function for IV Estimation and Diagnostics</p></a></li>
<li><a href='#ltz'><p>Local-to-Zero Test</p></a></li>
<li><a href='#plot_coef'><p>Plot OLS and IV Coefficents</p></a></li>
<li><a href='#plot_ltz'><p>Visualizing Local-to-Zero Adjustment</p></a></li>
<li><a href='#rueda'><p>Data from Rueda (2017)</p></a></li>
<li><a href='#tF'><p>Valid t-Ratio Procedure</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Estimation and Diagnostic Tools for Instrumental Variables
Designs</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.6</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-09-16</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Yiqing Xu &lt;yiqingxu@stanford.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Estimation and diagnostic tools for instrumental variables designs, which implements the guidelines proposed in Lal et al. (2023) &lt;<a href="https://doi.org/10.48550/arXiv.2303.11399">doi:10.48550/arXiv.2303.11399</a>&gt;, including bootstrapped confidence intervals, effective F-statistic, Anderson-Rubin test, valid-t ratio test, and local-to-zero tests. </td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://yiqingxu.org/packages/ivDiag/">https://yiqingxu.org/packages/ivDiag/</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>foreach, future, doParallel, lfe, fixest, ggplot2, ggfortify,
wCorr, haven, glue, patchwork, testthat</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-17 05:27:46 UTC; yiqingxu</td>
</tr>
<tr>
<td>Author:</td>
<td>Apoorva Lal <a href="https://orcid.org/0000-0002-3697-614X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Yiqing Xu <a href="https://orcid.org/0000-0003-2041-6671"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-17 06:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='ivDiag-package'>IV Estimation and Diagnostics</h2><span id='topic+ivDiag-package'></span>

<h3>Description</h3>

<p>Conducts various estimation and diagnostic procedure for instrumental variable designs in one shot.</p>


<h3>Details</h3>

<p>Provides estimation and diagnostic tools for instrumental variables designs, which implements the guidelines proposed in Lal et al. (2023) &lt;arXiv:2303.11399&gt;, including bootstrapped confidence intervals, effective F-statistic, Anderson-Rubin test, valid-t ratio test, and local-to-zero tests.
</p>
<p>See <code><a href="#topic+ivDiag">ivDiag</a></code> for details.
</p>


<h3>Author(s)</h3>

<p>Apoorva Lal; Yiqing Xu
</p>


<h3>References</h3>

<p>Lal, Apoorva, Mackenzie William Lockhart, Yiqing Xu, and Ziwen Zu. 2023. &quot;How Much Should We Trust Instrumental Variable Estimates in Political Science? Practical Advice Based on 67 Replicated Studies.&quot; Available at: <a href="https://yiqingxu.org/papers/english/2021_iv/LLXZ.pdf">https://yiqingxu.org/papers/english/2021_iv/LLXZ.pdf</a>
</p>

<hr>
<h2 id='AR_test'>Anderson Rubin Test</h2><span id='topic+AR_test'></span>

<h3>Description</h3>

<p>Performs the Anderson Rubin test, which is robust to weak instruments.</p>


<h3>Usage</h3>

<pre><code class='language-R'>AR_test(data, Y, D, Z, controls, FE = NULL, cl = NULL, weights = NULL, 
  prec = 4, CI = TRUE, alpha = 0.05, parallel = NULL, cores = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="AR_test_+3A_data">data</code></td>
<td>
<p>name of a dataframe.</p>
</td></tr>
<tr><td><code id="AR_test_+3A_y">Y</code></td>
<td>
<p>a string indicating the outcome variable.</p>
</td></tr>
<tr><td><code id="AR_test_+3A_d">D</code></td>
<td>
<p>a string indicating the treatment variable.</p>
</td></tr>
<tr><td><code id="AR_test_+3A_z">Z</code></td>
<td>
<p>a vector of strings indicating the instrumental variables.</p>
</td></tr>
<tr><td><code id="AR_test_+3A_controls">controls</code></td>
<td>
<p>a vector of strings indicating the control variables.</p>
</td></tr>
<tr><td><code id="AR_test_+3A_fe">FE</code></td>
<td>
<p>a vector of strings indicating the fixed effects variables.</p>
</td></tr>
<tr><td><code id="AR_test_+3A_cl">cl</code></td>
<td>
<p>a string indicating the clustering variable.</p>
</td></tr>
<tr><td><code id="AR_test_+3A_weights">weights</code></td>
<td>
<p>a string indicating the variable that stores weights.</p>
</td></tr>
<tr><td><code id="AR_test_+3A_ci">CI</code></td>
<td>
<p>a logical flag controlling whether to calcualte the confidence interval using the inversion method.</p>
</td></tr>
<tr><td><code id="AR_test_+3A_prec">prec</code></td>
<td>
<p>precision of results (4 by default).</p>
</td></tr>
<tr><td><code id="AR_test_+3A_alpha">alpha</code></td>
<td>
<p>level of statitical significance; the default is 0.05.</p>
</td></tr>
<tr><td><code id="AR_test_+3A_parallel">parallel</code></td>
<td>
<p>a logical flag controlling parallel computing.</p>
</td></tr>
<tr><td><code id="AR_test_+3A_cores">cores</code></td>
<td>
<p>setting the number of cores.</p>
</td></tr>
</table>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>Fstat</code></td>
<td>
<p>F statistic, degrees of freedoms, and p-value.</p>
</td></tr>
<tr><td><code>ci.print</code></td>
<td>
<p>Confidence interval via intervsion (printed version).</p>
</td></tr>
<tr><td><code>ci</code></td>
<td>
<p>Confidence interval via intervsion (numeric version).</p>
</td></tr>
<tr><td><code>bounded</code></td>
<td>
<p>If the confidence interval is bounded.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Chernozhukov, Victor, and Christian Hansen. 2008. &quot;The Reduced Form: A Simple Approach to Inference with Weak Instruments.&quot; Economics Letters 100 (1): 68–71.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ivDiag">ivDiag</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ivDiag)
AR.out &lt;- AR_test(data = rueda, Y = "e_vote_buying", D = "lm_pob_mesa", 
    Z = "lz_pob_mesa_f", controls = c("lpopulation", "lpotencial"),
    cl = "muni_code", CI = FALSE)
library(testthat)    
test_that("Check AR results", {
  expect_equal(as.numeric(AR.out$Fstat[1]), 48.4768)
})
</code></pre>

<hr>
<h2 id='eff_F'>Effective F</h2><span id='topic+eff_F'></span>

<h3>Description</h3>

<p>Computes the effective F statistic.</p>


<h3>Usage</h3>

<pre><code class='language-R'>eff_F(data, Y, D, Z, controls = NULL, FE = NULL, cl = NULL, 
  weights = NULL, prec = 4)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="eff_F_+3A_data">data</code></td>
<td>
<p>name of a dataframe.</p>
</td></tr>
<tr><td><code id="eff_F_+3A_y">Y</code></td>
<td>
<p>a string indicating the outcome variable.</p>
</td></tr>
<tr><td><code id="eff_F_+3A_d">D</code></td>
<td>
<p>a string indicating the treatment variable.</p>
</td></tr>
<tr><td><code id="eff_F_+3A_z">Z</code></td>
<td>
<p>a vector of strings indicating the instrumental variables.</p>
</td></tr>
<tr><td><code id="eff_F_+3A_controls">controls</code></td>
<td>
<p>a vector of strings indicating the control variables.</p>
</td></tr>
<tr><td><code id="eff_F_+3A_fe">FE</code></td>
<td>
<p>a vector of strings indicating the fixed effects variables.</p>
</td></tr>
<tr><td><code id="eff_F_+3A_cl">cl</code></td>
<td>
<p>a string indicating the clustering variable.</p>
</td></tr>
<tr><td><code id="eff_F_+3A_weights">weights</code></td>
<td>
<p>a string indicating the variable that stores weights.</p>
</td></tr>
<tr><td><code id="eff_F_+3A_prec">prec</code></td>
<td>
<p>precision of results (4 by default).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the effective F statistic. 
</p>


<h3>References</h3>

<p>Olea, José Luis Montiel, and Carolin Pflueger. 2013. &quot;A Robust Test for Weak Instruments.&quot;&quot; Journal of Business &amp; Economic Statistics 31 (3): 358–69.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ivDiag">ivDiag</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>effF &lt;- eff_F(data = rueda, Y = "e_vote_buying", D = "lm_pob_mesa", 
    Z = "lz_pob_mesa_f", controls = c("lpopulation", "lpotencial"), 
    cl = "muni_code")
library(testthat)
test_that("Check effective F", {
  expect_equal(floor(as.numeric(effF)), 8598)
})
</code></pre>

<hr>
<h2 id='gsz'>Data from GSZ (2016)</h2><span id='topic+gsz'></span>

<h3>Description</h3>

<p>Data from Guiso, Sapienza, and Zingales (2016)</p>


<h3>Format</h3>

<p>A data frame with 5357 rows and 11 columns.
</p>


<h3>Details</h3>

<p>The authors revisit Putnam, Leonardi, and Nanetti (1992)’s celebrated conjecture that Italian cities that achieved self-government in the Middle Ages have higher modern-day levels of social capital. More specifically, they study the effects of free city-state status on social capital as measured by the number of nonprofit organizations and organ donations per capita, and a measure of whether students cheat in mathematics. We focus on the first outcome, the number of nonprofit organizations.
</p>


<h3>References</h3>

<p>Guiso, Luigi, Paola Sapienza, and Luigi Zingales. 2016. &quot;Long-Term Persistence.&quot; Journal of the European Economic Association 14 (6): 1401&ndash;36.
</p>

<hr>
<h2 id='gsz_south'>Data from GSZ (2016): Subsample</h2><span id='topic+gsz_south'></span>

<h3>Description</h3>

<p>Data from Guiso, Sapienza, and Zingales (2016); southern Italian cities
</p>


<h3>Format</h3>

<p>A data frame with 2175 rows and 11 columns.
</p>


<h3>Details</h3>

<p>The authors revisit Putnam, Leonardi, and Nanetti (1992)’s celebrated conjecture that Italian cities that achieved self-government in the Middle Ages have higher modern-day levels of social capital. More specifically, they study the effects of free city-state status on social capital as measured by the number of nonprofit organizations and organ donations per capita, and a measure of whether students cheat in mathematics. We focus on the first outcome, the number of nonprofit organizations. 
</p>
<p>This dataset is a subsample of southern Italian cities, which is used as a zero-first-stage sample.
</p>


<h3>References</h3>

<p>Guiso, Luigi, Paola Sapienza, and Luigi Zingales. 2016. &quot;Long-Term Persistence.&quot; Journal of the European Economic Association 14 (6): 1401&ndash;36.
</p>

<hr>
<h2 id='ivDiag'>Omnibus Function for IV Estimation and Diagnostics</h2><span id='topic+ivDiag'></span>

<h3>Description</h3>

<p>Conducts various estimation and diagnostic procedure for instrumental variable designs in one shot.</p>


<h3>Usage</h3>

<pre><code class='language-R'>ivDiag(data, Y, D, Z, controls = NULL, FE = NULL, cl = NULL, weights = NULL,
  bootstrap = TRUE, run.AR = TRUE,
  nboots = 1000, parallel = TRUE, cores = NULL, 
  seed = 94305, prec = 4, debug = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ivDiag_+3A_data">data</code></td>
<td>
<p>name of a dataframe.</p>
</td></tr>
<tr><td><code id="ivDiag_+3A_y">Y</code></td>
<td>
<p>a string indicating the outcome variable.</p>
</td></tr>
<tr><td><code id="ivDiag_+3A_d">D</code></td>
<td>
<p>a string indicating the treatment variable.</p>
</td></tr>
<tr><td><code id="ivDiag_+3A_z">Z</code></td>
<td>
<p>a vector of strings indicating the instrumental variables.</p>
</td></tr>
<tr><td><code id="ivDiag_+3A_controls">controls</code></td>
<td>
<p>a vector of strings indicating the control variables.</p>
</td></tr>
<tr><td><code id="ivDiag_+3A_fe">FE</code></td>
<td>
<p>a vector of strings indicating the fixed effects variables.</p>
</td></tr>
<tr><td><code id="ivDiag_+3A_cl">cl</code></td>
<td>
<p>a string indicating the clustering variable.</p>
</td></tr>
<tr><td><code id="ivDiag_+3A_weights">weights</code></td>
<td>
<p>a string indicating the variable that stores weights.</p>
</td></tr>
<tr><td><code id="ivDiag_+3A_bootstrap">bootstrap</code></td>
<td>
<p>whether to turn on bootstrap (TRUE by default).</p>
</td></tr>
<tr><td><code id="ivDiag_+3A_run.ar">run.AR</code></td>
<td>
<p>whether to run AR test (TRUE by default).</p>
</td></tr>  
<tr><td><code id="ivDiag_+3A_nboots">nboots</code></td>
<td>
<p>a numeric value indicating the number of bootstrap runs.</p>
</td></tr>
<tr><td><code id="ivDiag_+3A_parallel">parallel</code></td>
<td>
<p>a logical flag controlling parallel computing.</p>
</td></tr>
<tr><td><code id="ivDiag_+3A_cores">cores</code></td>
<td>
<p>setting the number of cores.</p>
</td></tr>
<tr><td><code id="ivDiag_+3A_prec">prec</code></td>
<td>
<p>precision of CI in string (4 by default).</p>
</td></tr>
<tr><td><code id="ivDiag_+3A_seed">seed</code></td>
<td>
<p>setting seed.</p>
</td></tr>
<tr><td><code id="ivDiag_+3A_debug">debug</code></td>
<td>
<p>for debugging purposes.</p>
</td></tr>
</table>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>est_ols</code></td>
<td>
<p>results from an OLS regression.</p>
</td></tr>
<tr><td><code>est_2sls</code></td>
<td>
<p>results from a 2SLS regression.</p>
</td></tr>
<tr><td><code>AR</code></td>
<td>
<p>results from an Anderson-Rubin test</p>
</td></tr>
<tr><td><code>F_stat</code></td>
<td>
<p>various F statistics.</p>
</td></tr>
<tr><td><code>rho</code></td>
<td>
<p>Pearson correlation coefficient between the treatment and predicted treatment from the first stage regression (all covariates are partialled out).</p>
</td></tr>
<tr><td><code>tF</code></td>
<td>
<p>results from the tF procedure based on Lee et al. (2022)</p>
</td></tr>
<tr><td><code>est_rf</code></td>
<td>
<p>results from the first stage regression.</p>
</td></tr>
<tr><td><code>est_fs</code></td>
<td>
<p>results from the reduced form regression.</p>
</td></tr>
<tr><td><code>p_iv</code></td>
<td>
<p>the number of instruments.</p>
</td></tr>
<tr><td><code>N</code></td>
<td>
<p>the number of observations.</p>
</td></tr>
<tr><td><code>N_cl</code></td>
<td>
<p> the number of clusters.</p>
</td></tr>
<tr><td><code>df</code></td>
<td>
<p>the degree of freedom left from the 2SLS regression</p>
</td></tr>
<tr><td><code>nvalues</code></td>
<td>
<p>the unique values the outcome Y, the treatment D, and each instrument in Z in the 2SLS regression.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Apoorva Lal; Yiqing Xu
</p>


<h3>References</h3>

<p>Lal, Apoorva, Mackenzie William Lockhart, Yiqing Xu, and Ziwen Zu. 2023. &quot;How Much Should We Trust Instrumental Variable Estimates in Political Science? Practical Advice Based on 67 Replicated Studies.&quot; Available at: <a href="https://yiqingxu.org/papers/english/2021_iv/LLXZ.pdf">https://yiqingxu.org/papers/english/2021_iv/LLXZ.pdf</a>
</p>
<p>Lee, David S, Justin McCrary, Marcelo J Moreira, and Jack Porter. 2022. &quot;Valid t-Ratio Inference for IV.&quot; American Economic Review 112 (10): 3260–90.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot_coef">plot_coef</a></code>
<code><a href="#topic+eff_F">eff_F</a></code>
<code><a href="#topic+AR_test">AR_test</a></code>
<code><a href="#topic+tF">tF</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ivDiag)
g &lt;- ivDiag(data = rueda, Y = "e_vote_buying", D = "lm_pob_mesa", 
    Z = "lz_pob_mesa_f", controls = c("lpopulation", "lpotencial"), 
    cl = "muni_code", bootstrap = FALSE, run.AR = FALSE)
plot_coef(g)
library(testthat)    
test_that("Check ivDiag output", {
  expect_equal(as.numeric(g$est_2sls[1,1]), -0.9835)
})
</code></pre>

<hr>
<h2 id='ltz'>Local-to-Zero Test</h2><span id='topic+ltz'></span>

<h3>Description</h3>

<p>Estimates Local-to-Zero IV coefficients and SEs for a single instrument.</p>


<h3>Usage</h3>

<pre><code class='language-R'>ltz(data, Y, D, Z, controls, FE = NULL, cl = NULL, weights = NULL, prior, prec = 4)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ltz_+3A_data">data</code></td>
<td>
<p>name of a dataframe.</p>
</td></tr>
<tr><td><code id="ltz_+3A_y">Y</code></td>
<td>
<p>a string indicating the outcome variable.</p>
</td></tr>
<tr><td><code id="ltz_+3A_d">D</code></td>
<td>
<p>a string indicating the treatment variable.</p>
</td></tr>
<tr><td><code id="ltz_+3A_z">Z</code></td>
<td>
<p>a vector of strings indicating the instrumental variables.</p>
</td></tr>
<tr><td><code id="ltz_+3A_controls">controls</code></td>
<td>
<p>a vector of strings indicating the control variables.</p>
</td></tr>
<tr><td><code id="ltz_+3A_fe">FE</code></td>
<td>
<p>a vector of strings indicating the fixed effects variables.</p>
</td></tr>
<tr><td><code id="ltz_+3A_cl">cl</code></td>
<td>
<p>a string indicating the clustering variable.</p>
</td></tr>
<tr><td><code id="ltz_+3A_weights">weights</code></td>
<td>
<p>a string indicating the variable that stores weights.</p>
</td></tr>
<tr><td><code id="ltz_+3A_prior">prior</code></td>
<td>
<p>prior mean and standard deviation of the direct effect of instrument on outcome.</p>
</td></tr>
<tr><td><code id="ltz_+3A_prec">prec</code></td>
<td>
<p>precision of results (4 by default).</p>
</td></tr>
</table>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>iv</code></td>
<td>
<p>results from a 2SLS regression.</p>
</td></tr>
<tr><td><code>ltz</code></td>
<td>
<p>results after local-to-zerio adjustment.</p>
</td></tr>
<tr><td><code>prior</code></td>
<td>
<p>prior mean and standard deviation</p>
</td></tr>  
</table>


<h3>References</h3>

<p>Conley, Timothy G, Christian B Hansen, and Peter E Rossi. 2012. &quot;Plausibly Exogenous.&quot; Review of Economics and Statistics 94 (1): 260–72.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot_coef">plot_coef</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ivDiag)
controls &lt;- c('altitudine', 'escursione', 'costal', 'nearsea', 'population', 
    'pop2', 'gini_land', 'gini_income')
ltz_out &lt;- ltz(data = gsz, Y = "totassoc_p", D = "libero_comune_allnord", 
    Z = "bishopcity", controls = controls, weights = "population", 
    prior = c(0.178, 0.137))
plot_ltz(ltz_out)    
    
library(testthat)    
test_that("Check local-to-zero adjustment", {
  expect_equal(as.numeric(ltz_out$ltz[1]), 3.6088)
})
</code></pre>

<hr>
<h2 id='plot_coef'>Plot OLS and IV Coefficents</h2><span id='topic+plot_coef'></span>

<h3>Description</h3>

<p>Visualise point estimates and confidence intervals of OLS and IV estimates.</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_coef(out, 
  ols.methods = c("analy","bootc","boott"),
  iv.methods = c("analy","bootc","boott","ar","tf"),
  main = NULL, ylab = "Coefficient", grid = TRUE,
  stats = TRUE, ylim = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_coef_+3A_out">out</code></td>
<td>
<p>output from <code>ivDiag::ivDiag</code>.</p>
</td></tr>
<tr><td><code id="plot_coef_+3A_ols.methods">ols.methods</code></td>
<td>
<p>a vector specifying the inferential methods for OLS to be shown. The default is <code>c("analy","bootc","boott")</code>.</p>
</td></tr>
<tr><td><code id="plot_coef_+3A_iv.methods">iv.methods</code></td>
<td>
<p>a vector specifying inferential methods for 2SLS to be shown. The default is <code>c("analy","bootc","boott","ar","tf")</code>.</p>
</td></tr>
<tr><td><code id="plot_coef_+3A_main">main</code></td>
<td>
<p>a string specifying the title of the plot.</p>
</td></tr>
<tr><td><code id="plot_coef_+3A_ylab">ylab</code></td>
<td>
<p>a string specifying ylab of the plot.</p>
</td></tr>
<tr><td><code id="plot_coef_+3A_grid">grid</code></td>
<td>
<p>a logical flag indicating whether to show the grids.</p>
</td></tr>
<tr><td><code id="plot_coef_+3A_stats">stats</code></td>
<td>
<p>a logical flag indicating  whether to show the statistics, including the effective F, the number of observations, and the number of clusters (if applicable).</p>
</td></tr>
<tr><td><code id="plot_coef_+3A_ylim">ylim</code></td>
<td>
<p>a two-element vector specifying the range of the y-axis.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A base R plot object.</p>


<h3>See Also</h3>

<p><code><a href="#topic+ivDiag">ivDiag</a></code>
</p>

<hr>
<h2 id='plot_ltz'>Visualizing Local-to-Zero Adjustment</h2><span id='topic+plot_ltz'></span>

<h3>Description</h3>

<p>Visualise approximate sampling distributions for scalar IV coefficient with local-to-zero adjustment.</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_ltz(out = NULL, iv_est = NULL, ltz_est = NULL, prior = NULL, xlim = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_ltz_+3A_out">out</code></td>
<td>
<p>output from <code>ivDiag::ltz</code>.</p>
</td></tr>
<tr><td><code id="plot_ltz_+3A_iv_est">iv_est</code></td>
<td>
<p>a two-element vector of IV estimate and standard error.</p>
</td></tr>
<tr><td><code id="plot_ltz_+3A_ltz_est">ltz_est</code></td>
<td>
<p>a two-element vector of local-to-zero estimate and standard error.</p>
</td></tr>
<tr><td><code id="plot_ltz_+3A_prior">prior</code></td>
<td>
<p>a two-element vector of prior mean and standard deviation.</p>
</td></tr>
<tr><td><code id="plot_ltz_+3A_xlim">xlim</code></td>
<td>
<p>a two-element vector specifying the range of the x-axis.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot2 object.</p>


<h3>References</h3>

<p>Conley, Timothy G, Christian B Hansen, and Peter E Rossi. 2012. &quot;Plausibly Exogenous.&quot; Review of Economics and Statistics 94 (1): 260–72.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ltz">ltz</a></code>
</p>

<hr>
<h2 id='rueda'>Data from Rueda (2017)</h2><span id='topic+rueda'></span>

<h3>Description</h3>

<p>Data from Rueda (2017) AJPS.
</p>


<h3>Format</h3>

<p>A data frame with 4352 rows and 6 columns.
</p>


<h3>Details</h3>

<p>Rueda (2017) studies the persistence of vote buying in developing democracies despite the use of secret ballots and argues that brokers condition future payments on published electoral results to enforce these transactions and that this is effective only when the results of small voting groups are available. The study examines the relationship between polling station size and vote buying using three different measures of the incidence of vote buying, two at the municipality level and one at the individual level.
</p>
<p>The size of the polling station, predicted by the rules limiting the number of voters per polling station, is used as an instrument of the actual polling place size. The institutional rule predicts sharp reductions in the size of the average polling station of a municipality every time the number of registered voters reaches a multiple of the maximum number of voters allowed to vote in a polling station. Such sharp reductions are used as a source of exogenous variation in polling place size to estimate the causal effect of this variable on vote buying.
</p>


<h3>References</h3>

<p>Rueda, Miguel R. 2017. &quot;Small Aggregates, Big Manipulation: Vote Buying Enforcement and Collective Monitoring.&quot; American Journal of Political Science 61 (1): 163&ndash;177.
</p>

<hr>
<h2 id='tF'>Valid t-Ratio Procedure</h2><span id='topic+tF'></span>

<h3>Description</h3>

<p>Performs the valid t-ratio procedure.</p>


<h3>Usage</h3>

<pre><code class='language-R'>tF(coef, se, Fstat, prec = 4)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tF_+3A_coef">coef</code></td>
<td>
<p>a 2SLS coefficient.</p>
</td></tr>
<tr><td><code id="tF_+3A_se">se</code></td>
<td>
<p>a standard error estimate for the estimated 2SLS coefficient.</p>
</td></tr>
<tr><td><code id="tF_+3A_fstat">Fstat</code></td>
<td>
<p>a first-stage partial F statistic.</p>
</td></tr>
<tr><td><code id="tF_+3A_prec">prec</code></td>
<td>
<p>precision of results (4 by default).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Results from a valid t-ratio test given the first-stage F statistic.
</p>


<h3>References</h3>

<p>Lee, David S, Justin McCrary, Marcelo J Moreira, and Jack Porter. 2022. &quot;Valid t-Ratio Inference for IV.&quot; American Economic Review 112 (10): 3260–90.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tf.out &lt;- tF(coef = -0.9835, se = 0.1540, Fstat = 8598)
library(testthat)
test_that("Check tF cF", {
  expect_equal(as.numeric(tf.out[2]), 1.96)
})
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
