<!DOCTYPE html><html lang="en"><head><title>Help for package AutoAds</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {AutoAds}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#adstats'>
<p>All metrics</p></a></li>
<li><a href='#CPC'>
<p>Cost per Click</p></a></li>
<li><a href='#CPMv'>
<p>Cost per thousand viewable impressions</p></a></li>
<li><a href='#CTR'>
<p>Clickthrough rate</p></a></li>
<li><a href='#eCPM'>
<p>Effective cost per thousand impressions</p></a></li>
<li><a href='#fill_rate'>
<p>Fill Rate/Show Rate</p></a></li>
<li><a href='#plot_trend_and_forecast'>
<p>Plot with trend and forecast</p></a></li>
<li><a href='#view_percent'>
<p>Percentage of views</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Advertisement Metrics Calculation</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Calculations of the most common metrics of automated advertisement and plotting of them with trend and forecast. Calculations and description of metrics is taken from different RTB platforms support documentation. Plotting and forecasting is based on packages 'forecast', described in Rob J Hyndman and George Athanasopoulos (2021) "Forecasting: Principles and Practice" <a href="https://otexts.com/fpp3/">https://otexts.com/fpp3/</a> and Rob J Hyndman et al "Documentation for 'forecast'" (2003) <a href="https://pkg.robjhyndman.com/forecast/">https://pkg.robjhyndman.com/forecast/</a>, and 'ggplot2', described in Hadley Wickham et al "Documentation for 'ggplot2'" (2015) <a href="https://ggplot2.tidyverse.org/">https://ggplot2.tidyverse.org/</a>, and Hadley Wickham, Danielle Navarro, and Thomas Lin Pedersen (2015) "ggplot2: Elegant Graphics for Data Analysis" <a href="https://ggplot2-book.org/">https://ggplot2-book.org/</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>forecast, ggplot2, rlang</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-07-08 11:44:28 UTC; moki</td>
</tr>
<tr>
<td>Author:</td>
<td>Ivan Nemtsev [aut, cre, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ivan Nemtsev &lt;nemtsev.v@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-07-08 17:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='adstats'>
All metrics
</h2><span id='topic+adstats'></span>

<h3>Description</h3>

<p>A combination of functions view_percent, eCPM, CPMv, CTR, and fill_rate in one.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adstats(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="adstats_+3A_data">data</code></td>
<td>
<p>A dataset downloaded from excel file, has to be assigned to 'data' and include columns 'Requests', 'Impressions', 'Revenue', 'Viewable', and 'Clicks'.</p>
</td></tr>
</table>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>view_percent</code></td>
<td>
<p>A percentage of viewable impressions among the total number of impressions.</p>
</td></tr>
<tr><td><code>eCPM</code></td>
<td>
<p>Cost per thousand impressions of an ad, shown in the currency the original file had for 'Revenue'.</p>
</td></tr>
<tr><td><code>CPMv</code></td>
<td>
<p>Cost per thousand viewable impressions of an ad, shown in the currency the original file had for 'Revenue'.</p>
</td></tr>
<tr><td><code>CTR</code></td>
<td>
<p>A ratio of clicks to impressions.</p>
</td></tr>
<tr><td><code>fill_rate</code></td>
<td>
<p>A ratio of impressions to requests as a percentage.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>Dataset downloaded from excel file, has to be assigned to 'data' and include columns 'Requests', 'Impressions', 'Revenue', 'Viewable', and 'Clicks'.
</p>


<h3>Author(s)</h3>

<p>Ivan Nemtsev
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## The function is currently defined as
adstats &lt;- function(data){
  data$ViewablePercent &lt;- view_percent(data)
  data$eCPM &lt;- eCPM(data)
  data$CPMv &lt;- CPMv(data)
  data$CTR &lt;- CTR(data)
  data$FillRate &lt;- fill_rate(data)
}

## Example of use:
data &lt;- data.frame(
  Date = c("2022-07-01", "2022-07-02", "2022-07-03", "2022-07-29", "2022-07-30", "2022-07-31"),
  Block = c("1_234", "1_234", "1_234", "1_235", "1_235", "1_235"),
  Requests = c(372234, 268816, 291224, 1928854, 1928290, 786539),
  Impressions = c(18537, 12432, 13764, 2839269, 2682648, 1114773),
  Revenue = c(13.5, 9.13, 8.85, 1669.0, 1654.0, 739.0),
  Clicks = c(1167, 720, 856, 214451, 196657, 93178),
  Viewable = c(13320, 8214, 9768, 2446884, 2243865, 1063158)
)
data &lt;- adstats(data)
  </code></pre>

<hr>
<h2 id='CPC'>
Cost per Click
</h2><span id='topic+CPC'></span>

<h3>Description</h3>

<p>A ratio showing how much actual clicks on the ad cost.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CPC(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CPC_+3A_data">data</code></td>
<td>

<p>Dataset downloaded from excel file, has to be assigned to 'data' and include columns 'Clicks' and 'Revenue'.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ratio of revenue to clicks - a cost of one click.
</p>


<h3>Note</h3>

<p>Dataset has to be named 'data' and include columns 'Clicks' and 'Revenue'.
</p>


<h3>Author(s)</h3>

<p>Ivan Nemtsev
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## The function is currently defined as
CPC &lt;- function(data){
  x &lt;- data$Clicks
  y &lt;- data$Revenue
  round(
    y/x,
    digits=2)
}

## Example of use:
data &lt;- data.frame(
  Date = c("2022-07-01", "2022-07-02", "2022-07-03", "2022-07-29", "2022-07-30", "2022-07-31"),
  Block = c("1_234", "1_234", "1_234", "1_235", "1_235", "1_235"),
  Requests = c(372234, 268816, 291224, 1928854, 1928290, 786539),
  Impressions = c(18537, 12432, 13764, 2839269, 2682648, 1114773),
  Revenue = c(13.5, 9.13, 8.85, 1669.0, 1654.0, 739.0),
  Clicks = c(1167, 720, 856, 214451, 196657, 93178),
  Viewable = c(13320, 8214, 9768, 2446884, 2243865, 1063158)
)
data$CPC &lt;- CPC(data)
  </code></pre>

<hr>
<h2 id='CPMv'>
Cost per thousand viewable impressions
</h2><span id='topic+CPMv'></span>

<h3>Description</h3>

<p>Calculating CPMv based on Viewable Impressions and Revenue data. The dataset has to be named 'data' and include columns 'Viewable' and 'Revenue'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CPMv(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CPMv_+3A_data">data</code></td>
<td>

<p>Dataset downloaded from excel file, has to be assigned to 'data' and include columns 'Viewable' and 'Revenue'.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Cost per thousand viewable impressions of an ad, shown in the currency the original file had for 'Revenue'.
</p>


<h3>Note</h3>

<p>Dataset has to be named 'data' and include columns 'Viewable' and 'Revenue'.
</p>


<h3>Author(s)</h3>

<p>Ivan Nemtsev
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## The function is currently defined as
CPMv &lt;- function(data){
  x &lt;- data$Viewable
  y &lt;- data$Revenue
  round(
    y/x*1000,
    digits=2)
}

## Example of use:
data &lt;- data.frame(
  Date = c("2022-07-01", "2022-07-02", "2022-07-03", "2022-07-29", "2022-07-30", "2022-07-31"),
  Block = c("1_234", "1_234", "1_234", "1_235", "1_235", "1_235"),
  Requests = c(372234, 268816, 291224, 1928854, 1928290, 786539),
  Impressions = c(18537, 12432, 13764, 2839269, 2682648, 1114773),
  Revenue = c(13.5, 9.13, 8.85, 1669.0, 1654.0, 739.0),
  Clicks = c(1167, 720, 856, 214451, 196657, 93178),
  Viewable = c(13320, 8214, 9768, 2446884, 2243865, 1063158)
)
data$CPMv &lt;- CPMv(data)
  </code></pre>

<hr>
<h2 id='CTR'>
Clickthrough rate
</h2><span id='topic+CTR'></span>

<h3>Description</h3>

<p>A ratio showing how often people who see your ad end up clicking on it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CTR(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CTR_+3A_data">data</code></td>
<td>

<p>Dataset downloaded from excel file, has to be assigned to 'data' and include columns 'Impressions' and 'Clicks'.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ratio of clicks to impressions.
</p>


<h3>Note</h3>

<p>Dataset has to be named 'data' and include columns 'Impressions' and 'Clicks'.
</p>


<h3>Author(s)</h3>

<p>Ivan Nemtsev
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## The function is currently defined as
CTR &lt;- function(data){
  x &lt;- data$Impressions
  y &lt;- data$Clicks
  round(
    y/x,
    digits=2)
}

## Example of use:
data &lt;- data.frame(
  Date = c("2022-07-01", "2022-07-02", "2022-07-03", "2022-07-29", "2022-07-30", "2022-07-31"),
  Block = c("1_234", "1_234", "1_234", "1_235", "1_235", "1_235"),
  Requests = c(372234, 268816, 291224, 1928854, 1928290, 786539),
  Impressions = c(18537, 12432, 13764, 2839269, 2682648, 1114773),
  Revenue = c(13.5, 9.13, 8.85, 1669.0, 1654.0, 739.0),
  Clicks = c(1167, 720, 856, 214451, 196657, 93178),
  Viewable = c(13320, 8214, 9768, 2446884, 2243865, 1063158)
)
data$CTR &lt;- CTR(data)
  </code></pre>

<hr>
<h2 id='eCPM'>
Effective cost per thousand impressions
</h2><span id='topic+eCPM'></span>

<h3>Description</h3>

<p>Calculating eCPM based on Impressions and Revenue data. The dataset has to be named 'data' and include columns 'Impressions' and 'Revenue'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eCPM(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="eCPM_+3A_data">data</code></td>
<td>

<p>Dataset downloaded from excel file, has to be assigned to 'data' and include columns 'Impressions' and 'Revenue'.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Cost per thousand impressions of an ad, shown in the currency the original file had for 'Revenue'.
</p>


<h3>Note</h3>

<p>Dataset has to be named 'data' and include columns 'Impressions' and 'Revenue'.
</p>


<h3>Author(s)</h3>

<p>Ivan Nemtsev
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## The function is currently defined as
eCPM &lt;- function(data){
  x &lt;- data$Impressions
  y &lt;- data$Revenue
  round(
    y/x*1000,
    digits=2)
}

## Example of use:
data &lt;- data.frame(
  Date = c("2022-07-01", "2022-07-02", "2022-07-03", "2022-07-29", "2022-07-30", "2022-07-31"),
  Block = c("1_234", "1_234", "1_234", "1_235", "1_235", "1_235"),
  Requests = c(372234, 268816, 291224, 1928854, 1928290, 786539),
  Impressions = c(18537, 12432, 13764, 2839269, 2682648, 1114773),
  Revenue = c(13.5, 9.13, 8.85, 1669.0, 1654.0, 739.0),
  Clicks = c(1167, 720, 856, 214451, 196657, 93178),
  Viewable = c(13320, 8214, 9768, 2446884, 2243865, 1063158)
)
data$eCPM &lt;- eCPM(data)
  </code></pre>

<hr>
<h2 id='fill_rate'>
Fill Rate/Show Rate
</h2><span id='topic+fill_rate'></span><span id='topic+show_rate'></span>

<h3>Description</h3>

<p>A percentage of returned ads that were displayed in the app to the user out of all requested ones.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fill_rate(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fill_rate_+3A_data">data</code></td>
<td>

<p>Dataset downloaded from excel file, has to be assigned to 'data' and include columns 'Requests' and 'Impressions'.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ratio of impressions to requests as a percentage.
</p>


<h3>Note</h3>

<p>Dataset has to be named 'data' and include columns 'Requests' and 'Impressions'.
</p>


<h3>Author(s)</h3>

<p>Ivan Nemtsev
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## The function is currently defined as
fill_rate &lt;- function(data){
  x &lt;- data$Requests
  y &lt;- data$Impressions
  round(
    y/x*100,
    digits=2)
}

## Example of use:
data &lt;- data.frame(
  Date = c("2022-07-01", "2022-07-02", "2022-07-03", "2022-07-29", "2022-07-30", "2022-07-31"),
  Block = c("1_234", "1_234", "1_234", "1_235", "1_235", "1_235"),
  Requests = c(372234, 268816, 291224, 1928854, 1928290, 786539),
  Impressions = c(18537, 12432, 13764, 2839269, 2682648, 1114773),
  Revenue = c(13.5, 9.13, 8.85, 1669.0, 1654.0, 739.0),
  Clicks = c(1167, 720, 856, 214451, 196657, 93178),
  Viewable = c(13320, 8214, 9768, 2446884, 2243865, 1063158)
)
data$FillRate &lt;- fill_rate(data)
  </code></pre>

<hr>
<h2 id='plot_trend_and_forecast'>
Plot with trend and forecast
</h2><span id='topic+plot_trend_and_forecast'></span>

<h3>Description</h3>

<p>Plotting metrics of the dataset with trend and forecast, splitting them by groups of different ad blocks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_trend_and_forecast(data, x_col, y_col, group_col)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_trend_and_forecast_+3A_data">data</code></td>
<td>

<p>Dataset downloaded from excel file, has to be assigned to 'data' and include columns 'Date', 'Block', and at least one with the data needed to plot ('Requests', 'Impressions', 'Revenue', 'Viewable', 'Clicks').
</p>
</td></tr>
<tr><td><code id="plot_trend_and_forecast_+3A_x_col">x_col</code></td>
<td>

<p>Column of the dataset 'data' with the data required for the x-axis of the plot. Preferrably 'Date'.
</p>
</td></tr>
<tr><td><code id="plot_trend_and_forecast_+3A_y_col">y_col</code></td>
<td>

<p>Column of the dataset 'data' with the data required for the y-axis of the plot. Preferrably the one with the data needed to plot ('Requests', 'Impressions', 'Revenue', 'Viewable', 'Clicks').
</p>
</td></tr>
<tr><td><code id="plot_trend_and_forecast_+3A_group_col">group_col</code></td>
<td>

<p>Column of the dataset 'data' with the data required for grouping the data. Preferrably 'Block'.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plot of the chosen data with trend and forecast.
</p>


<h3>Note</h3>

<p>This function also requires packages 'ggplot2', and 'forecast'.
Dataset downloaded from excel file, has to be assigned to 'data' and include columns 'Date', 'Block', and at least one with the data needed to plot ('Requests', 'Impressions', 'Revenue', 'Viewable', 'Clicks').
</p>


<h3>Author(s)</h3>

<p>Ivan Nemtsev
</p>


<h3>References</h3>

<p>Hyndman, R. J., &amp; Athanasopoulos, G. (2018). &quot;Forecasting: Principles and Practice&quot; - <a href="https://otexts.com/fpp3/">https://otexts.com/fpp3/</a>
Documentation for 'forecast' - <a href="https://pkg.robjhyndman.com/forecast/">https://pkg.robjhyndman.com/forecast/</a>
Documentation for 'ggplot2' - <a href="https://ggplot2.tidyverse.org/">https://ggplot2.tidyverse.org/</a>
Wickham, H. (2016). &quot;ggplot2: Elegant Graphics for Data Analysis&quot; - <a href="https://ggplot2-book.org/">https://ggplot2-book.org/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## The function is currently defined as
plot_trend_and_forecast &lt;- function(data, x_col, y_col, group_col) {
  data$Date &lt;- as.Date(data$Date)
  data_groups &lt;- split(data, data[[group_col]])
  for (group in names(data_groups)) {
    group_data &lt;- data_groups[[group]]
    time_series &lt;- ts(group_data[[y_col]], frequency = 1, start = min(group_data[[x_col]]))
    arima_model &lt;- auto.arima(time_series)
    forecast &lt;- forecast(arima_model, h = 6)
    forecast_dates &lt;- seq(max(group_data[[x_col]]) + 1,
    to = max(group_data[[x_col]]) + length(forecast$mean),
    by = "day")
    forecast_data &lt;- data.frame(Date = forecast_dates, Forecast = forecast$mean)
    print(ggplot() +
            geom_line(data = group_data, aes(x = !!rlang::sym(x_col), y = !!rlang::sym(y_col))) +
            geom_line(data = forecast_data, aes(x = Date, y = Forecast), color = "blue") +
            geom_ribbon(data = forecast_data, aes(x = Date, ymin = forecast$lower[, 2],
            ymax = forecast$upper[, 2]), fill = "blue", alpha = 0.2) +
            labs(x = x_col, y = y_col, title = group) +
            theme_minimal())
  }
}

## Example of use:
data &lt;- data.frame(
  Date = c("2022-07-01", "2022-07-02", "2022-07-03", "2022-07-29", "2022-07-30", "2022-07-31"),
  Block = c("1_234", "1_234", "1_234", "1_235", "1_235", "1_235"),
  Requests = c(372234, 268816, 291224, 1928854, 1928290, 786539),
  Impressions = c(18537, 12432, 13764, 2839269, 2682648, 1114773),
  Revenue = c(13.5, 9.13, 8.85, 1669.0, 1654.0, 739.0),
  Clicks = c(1167, 720, 856, 214451, 196657, 93178),
  Viewable = c(13320, 8214, 9768, 2446884, 2243865, 1063158)
)
plot_trend_and_forecast(data, "Date", "Impressions", "Block")
#Any value instead of Impressions can be here
  </code></pre>

<hr>
<h2 id='view_percent'>
Percentage of views
</h2><span id='topic+view_percent'></span>

<h3>Description</h3>

<p>A ratio of viewable impressions to all impressions, shown as a percent.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>view_percent(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="view_percent_+3A_data">data</code></td>
<td>

<p>Dataset downloaded from excel file, has to be assigned to 'data' and include columns 'Impressions' and 'Viewable'.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A percentage of viewable impressions among the total number of impressions.
</p>


<h3>Note</h3>

<p>Dataset has to be named 'data' and include columns 'Impressions' and 'Viewable'.
</p>


<h3>Author(s)</h3>

<p>Ivan Nemtsev
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## The function is currently defined as
view_percent &lt;- function(data){
  x &lt;- data$Impressions
  y &lt;- data$Viewable
  round(
    y/x*100,
  digits=2)
}

## Example of use:
data &lt;- data.frame(
  Date = c("2022-07-01", "2022-07-02", "2022-07-03", "2022-07-29", "2022-07-30", "2022-07-31"),
  Block = c("1_234", "1_234", "1_234", "1_235", "1_235", "1_235"),
  Requests = c(372234, 268816, 291224, 1928854, 1928290, 786539),
  Impressions = c(18537, 12432, 13764, 2839269, 2682648, 1114773),
  Revenue = c(13.5, 9.13, 8.85, 1669.0, 1654.0, 739.0),
  Clicks = c(1167, 720, 856, 214451, 196657, 93178),
  Viewable = c(13320, 8214, 9768, 2446884, 2243865, 1063158)
)
data$ViewablePercent &lt;- view_percent(data)
  </code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
