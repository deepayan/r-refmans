<!DOCTYPE html><html lang="en"><head><title>Help for package PredTest</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {PredTest}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#adjusted_example'><p>Adjusted Example Dataset</p></a></li>
<li><a href='#create_difference_vector'><p>Create a Difference Vector</p></a></li>
<li><a href='#filter_by_group_var'><p>Filter by Group Variable</p></a></li>
<li><a href='#filter_by_time_var'><p>Filter by Time Variable</p></a></li>
<li><a href='#get_results_vector'><p>Get Results Vector</p></a></li>
<li><a href='#group_cog_data'><p>Group Cognitive Data</p></a></li>
<li><a href='#group_data_example'><p>Group Data Example</p></a></li>
<li><a href='#pre_post_data_example'><p>Pre-Post Data Example</p></a></li>
<li><a href='#pre_post_fit'><p>Pre-Post Fitness Data</p></a></li>
<li><a href='#pred_adjusted'><p>Adjusted Predictions Based on Group Comparisons</p></a></li>
<li><a href='#pred_results'><p>Predictive Results Wrapper Function</p></a></li>
<li><a href='#pred_test'><p>Predictive Test Function</p></a></li>
<li><a href='#pred_weights'><p>Calculate Predictive Weights</p></a></li>
<li><a href='#solve_p0_score_ci'><p>Calculate the Adjusted Proportion Estimate and Confidence Interval</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Preparing Data For, and Calculating the Prediction Test</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Global hypothesis tests combine information across multiple endpoints to test a single hypothesis. The prediction test is a recently proposed global hypothesis test with good performance for small sample sizes and many endpoints of interest. The test is also flexible in the types and combinations of expected results across the individual endpoints. This package provides functions for data processing and calculation of the prediction test.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>devtools, ggplot2, kableExtra, knitr, rmarkdown, testthat (&ge;
3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-09-13 21:00:53 UTC; richardvargas</td>
</tr>
<tr>
<td>Author:</td>
<td>Richard Vargas <a href="https://orcid.org/0009-0008-4977-8776"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Neal Montgomery <a href="https://orcid.org/0000-0002-1423-0590"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Neal Montgomery &lt;rmontgomery@kumc.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-09-16 09:00:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='adjusted_example'>Adjusted Example Dataset</h2><span id='topic+adjusted_example'></span>

<h3>Description</h3>

<p>A simulated dataset demonstrating group differences in three variables. This dataset includes two groups and one covariate, <code>sex</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adjusted_example
</code></pre>


<h3>Format</h3>

<p>A data frame with 20 rows and 5 variables:
</p>

<dl>
<dt>group</dt><dd><p>A binary factor indicating group membership: <code>0</code> for control and <code>1</code> for treatment.</p>
</dd>
<dt>sex</dt><dd><p>A binary factor indicating sex: <code>0</code> for male and <code>1</code> for female.</p>
</dd>
<dt>v1</dt><dd><p>A numeric vector representing the first variable.</p>
</dd>
<dt>v2</dt><dd><p>A numeric vector representing the second variable.</p>
</dd>
<dt>v3</dt><dd><p>A numeric vector representing the third variable.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data(adjusted_example)
head(adjusted_example)
</code></pre>

<hr>
<h2 id='create_difference_vector'>Create a Difference Vector</h2><span id='topic+create_difference_vector'></span>

<h3>Description</h3>

<p>This function calculates the difference between two groups of data based on a specified location measure (median or mean).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_difference_vector(grp_1_data, grp_2_data, location = "median")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_difference_vector_+3A_grp_1_data">grp_1_data</code></td>
<td>
<p>A data frame where all columns are numeric, representing the first group of data.</p>
</td></tr>
<tr><td><code id="create_difference_vector_+3A_grp_2_data">grp_2_data</code></td>
<td>
<p>A data frame where all columns are numeric, representing the second group of data.</p>
</td></tr>
<tr><td><code id="create_difference_vector_+3A_location">location</code></td>
<td>
<p>A string specifying the location measure to use for calculating differences. Must be either 'median' or 'mean'.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function checks if the specified location measure is valid ('median' or 'mean'). It also checks if both groups of data are numeric and if they have the same size and column variables. Based on the location measure, it calculates the differences and returns them as a numeric vector.
</p>


<h3>Value</h3>

<p>A numeric vector representing the differences between the second group's location measure and the first group's location measure for each column.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df_1 &lt;- data.frame(v1 = c(1, 2, 100),v2 = c(4, 5, 6))
df_2 &lt;- data.frame(v1 = c(7, 6, 5),v2 = c(4, 3, 2))

create_difference_vector(df_2, df_1, 'median')
create_difference_vector(df_2, df_1, 'mean')

</code></pre>

<hr>
<h2 id='filter_by_group_var'>Filter by Group Variable</h2><span id='topic+filter_by_group_var'></span>

<h3>Description</h3>

<p>This function takes a data frame with two groups and splits them by a group identifier and specified column variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_by_group_var(df, grp_var, grp_1, grp_2, vars)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filter_by_group_var_+3A_df">df</code></td>
<td>
<p>A data frame which must have a column to identify two different groups.</p>
</td></tr>
<tr><td><code id="filter_by_group_var_+3A_grp_var">grp_var</code></td>
<td>
<p>The column with the two groups, e.g., 'Treatment'.</p>
</td></tr>
<tr><td><code id="filter_by_group_var_+3A_grp_1">grp_1</code></td>
<td>
<p>The first group identifier in the <code>grp_var</code> column, e.g., 'control'.</p>
</td></tr>
<tr><td><code id="filter_by_group_var_+3A_grp_2">grp_2</code></td>
<td>
<p>The second group identifier in the <code>grp_var</code> column, e.g., 'drug_a'.</p>
</td></tr>
<tr><td><code id="filter_by_group_var_+3A_vars">vars</code></td>
<td>
<p>The column variables the researcher is interested in. The researcher can subset the columns instead of using all potential column variables.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function checks if the input data frame, group variable,
and column variables are valid. It ensures that the specified groups exist
within the group variable column. The function then filters the data for each
group and returns a list containing the filtered data frames.
</p>


<h3>Value</h3>

<p>A list of two data frames that are subsets of the original
data frame, separated by their group status.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("group_data_example")

# Use the function to filter by group
result &lt;- filter_by_group_var(df=group_data_example, grp_var="group",
grp_1 ='placebo',grp_2 ='drug',vars=c("v1", "v2"))
print(result$group_1)
print(result$group_2)

</code></pre>

<hr>
<h2 id='filter_by_time_var'>Filter by Time Variable</h2><span id='topic+filter_by_time_var'></span>

<h3>Description</h3>

<p>This function creates two groups based on their ID and separates them by a time variable.
Each ID will be present in each subset exactly once. The subsets will contain the same variables specified by the user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_by_time_var(df, id, time_var, pre, post, vars)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filter_by_time_var_+3A_df">df</code></td>
<td>
<p>A data frame which must have a column to identify two different groups by ID.</p>
</td></tr>
<tr><td><code id="filter_by_time_var_+3A_id">id</code></td>
<td>
<p>The column variable that will contain all of the IDs that show up twice in the data set.</p>
</td></tr>
<tr><td><code id="filter_by_time_var_+3A_time_var">time_var</code></td>
<td>
<p>The column variable that designates the time of the data, e.g., it may be a 0 if
data was collected on the first day of treatment and a 6 if data is collected six days later.</p>
</td></tr>
<tr><td><code id="filter_by_time_var_+3A_pre">pre</code></td>
<td>
<p>The value in the <code>time_var</code> column that indicates the 'pre' time point.</p>
</td></tr>
<tr><td><code id="filter_by_time_var_+3A_post">post</code></td>
<td>
<p>The value in the <code>time_var</code> column that indicates the 'post' time point.</p>
</td></tr>
<tr><td><code id="filter_by_time_var_+3A_vars">vars</code></td>
<td>
<p>The column variables the researcher is interested in. The researcher can subset the
columns instead of using all potential column variables.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function checks if the input data frame, ID, time variable, and column
variablesare valid. It ensures that the specified pre and post values exist within the
time variable column. The function then filters the data for each time point, orders the
IDs, and returns a list containing the filtered data frames.
</p>


<h3>Value</h3>

<p>A list of two data frames that are subsets of the original data frame, separated
by their <code>time_var</code> status. The data frames will have the same size in rows.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("pre_post_data_example")

# Use the function to filter by time variable
result &lt;- filter_by_time_var(pre_post_data_example, id = "ID",
time_var = "time", pre = 0, post = 12, vars = c("v1", "v2"))
print(result$pre)
print(result$post)

</code></pre>

<hr>
<h2 id='get_results_vector'>Get Results Vector</h2><span id='topic+get_results_vector'></span>

<h3>Description</h3>

<p>This function receives user input on the hypothesis of the experiment results
and informs the user if the hypotheses were correct. It can handle hypotheses
of 'increase', 'decrease', or 'different', and performs appropriate
statistical tests.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_results_vector(
  hypothesis,
  differences,
  diff_method = "wilcoxon",
  grp_a = NULL,
  grp_b = NULL,
  phi_0 = 0.5
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_results_vector_+3A_hypothesis">hypothesis</code></td>
<td>
<p>A string or a vector of strings where the string or all
elements of the vector are in the set of {'decrease', 'increase', 'different'}.
If itâ€™s a string, it will be converted to a vector of the same length as
<code>differences</code> with all elements being the valid string.</p>
</td></tr>
<tr><td><code id="get_results_vector_+3A_differences">differences</code></td>
<td>
<p>A numeric vector representing the differences between
two groups.</p>
</td></tr>
<tr><td><code id="get_results_vector_+3A_diff_method">diff_method</code></td>
<td>
<p>A string specifying the method to use for testing
'different' hypotheses. Valid options are 'wilcoxon' or 't'.
Defaults to 'wilcoxon'.</p>
</td></tr>
<tr><td><code id="get_results_vector_+3A_grp_a">grp_a</code></td>
<td>
<p>A data frame representing the first group for testing 'different'
hypotheses. This argument is only needed if 'different' is part of the hypothesis.</p>
</td></tr>
<tr><td><code id="get_results_vector_+3A_grp_b">grp_b</code></td>
<td>
<p>A data frame representing the second group for testing 'different'
hypotheses. This argument is only needed if 'different' is part of the hypothesis.</p>
</td></tr>
<tr><td><code id="get_results_vector_+3A_phi_0">phi_0</code></td>
<td>
<p>A numeric value on the interval (0, 1) representing the decision rule
threshold for the p-value. Defaults to 0.5.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function checks if the input hypotheses are valid, and performs the
necessary statistical tests to determine if the hypotheses were correct. It
handles 'increase' and 'decrease' hypotheses by comparing differences, and
'different' hypotheses by performing either a Wilcoxon signed-rank test
or a paired t-test.
</p>


<h3>Value</h3>

<p>A numeric vector of 0s and 1s. If the hypothesis was incorrect, a 0 is
returned. If the hypothesis was correct, a 1 is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df_1 &lt;- data.frame(v1 = c(1, 2, -100), v2 = c(40, 5, 6))
df_2 &lt;- data.frame(v1 = c(7, 6, 5), v2 = c(4, 3, 2))

differences &lt;- create_difference_vector(df_2, df_1)

# using singular increase
get_results_vector(hypothesis = 'increase', differences = differences)

# using 'different' hypothesis and a pre post scenario
get_results_vector(hypothesis = c('increase', 'different'),
differences = differences, grp_a = df_1, grp_b = df_2, phi_0 = 0.05)
</code></pre>

<hr>
<h2 id='group_cog_data'>Group Cognitive Data</h2><span id='topic+group_cog_data'></span>

<h3>Description</h3>

<p>A dataset representing cognitive scores for control and treatment groups, with various cognitive and demographic variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>group_cog_data
</code></pre>


<h3>Format</h3>

<p>A data frame with 20 rows and 20 variables:
</p>

<dl>
<dt>group.factor</dt><dd><p>A factor indicating group membership: <code>Control</code> or <code>ESKD</code> (End-Stage Kidney Disease).</p>
</dd>
<dt>mean_suv</dt><dd><p>A numeric vector representing the mean SUV (Standard Uptake Value).</p>
</dd>
<dt>blind_moca_uncorrected</dt><dd><p>A numeric vector representing uncorrected MOCA (Montreal Cognitive Assessment) scores.</p>
</dd>
<dt>craft_verbatim</dt><dd><p>A numeric vector representing scores on the Craft Verbatim memory test.</p>
</dd>
<dt>craft_delay_verbatim</dt><dd><p>A numeric vector representing delayed scores on the Craft Verbatim memory test.</p>
</dd>
<dt>number_span_forward</dt><dd><p>A numeric vector representing forward number span scores.</p>
</dd>
<dt>number_span_backward</dt><dd><p>A numeric vector representing backward number span scores.</p>
</dd>
<dt>fluency_f_words_correct</dt><dd><p>A numeric vector representing the number of correct F words in a verbal fluency test.</p>
</dd>
<dt>oral_trail_part_a</dt><dd><p>A numeric vector representing scores on the oral trail making test part A.</p>
</dd>
<dt>oral_trail_part_b</dt><dd><p>A numeric vector representing scores on the oral trail making test part B.</p>
</dd>
<dt>fluency_animals</dt><dd><p>A numeric vector representing the number of animal names listed in a verbal fluency test.</p>
</dd>
<dt>fluency_vegetables</dt><dd><p>A numeric vector representing the number of vegetable names listed in a verbal fluency test.</p>
</dd>
<dt>verbal_naming_no_cue</dt><dd><p>A numeric vector representing scores on a verbal naming test without cues.</p>
</dd>
<dt>age</dt><dd><p>A numeric vector representing the age of each subject.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data(group_cog_data)
head(group_cog_data)
</code></pre>

<hr>
<h2 id='group_data_example'>Group Data Example</h2><span id='topic+group_data_example'></span>

<h3>Description</h3>

<p>A simulated dataset showing group differences across four variables. The dataset is divided into two groups: <code>placebo</code> and <code>drug</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>group_data_example
</code></pre>


<h3>Format</h3>

<p>A data frame with 30 rows and 5 variables:
</p>

<dl>
<dt>group</dt><dd><p>A factor indicating group membership: <code>placebo</code> or <code>drug</code>.</p>
</dd>
<dt>v1</dt><dd><p>A numeric vector representing the first variable.</p>
</dd>
<dt>v2</dt><dd><p>A numeric vector representing the second variable.</p>
</dd>
<dt>v3</dt><dd><p>A numeric vector representing the third variable.</p>
</dd>
<dt>v4</dt><dd><p>A numeric vector representing the fourth variable.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data(group_data_example)
head(group_data_example)
</code></pre>

<hr>
<h2 id='pre_post_data_example'>Pre-Post Data Example</h2><span id='topic+pre_post_data_example'></span>

<h3>Description</h3>

<p>A simulated dataset showing measurements before and after an intervention. Each subject has multiple measurements over time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pre_post_data_example
</code></pre>


<h3>Format</h3>

<p>A data frame with 30 rows and 6 variables:
</p>

<dl>
<dt>ID</dt><dd><p>A unique identifier for each subject.</p>
</dd>
<dt>time</dt><dd><p>A numeric variable indicating time points, <code>0</code> for pre-intervention and <code>12</code> for post-intervention.</p>
</dd>
<dt>v1</dt><dd><p>A numeric vector representing the first variable.</p>
</dd>
<dt>v2</dt><dd><p>A numeric vector representing the second variable.</p>
</dd>
<dt>v3</dt><dd><p>A numeric vector representing the third variable.</p>
</dd>
<dt>v4</dt><dd><p>A numeric vector representing the fourth variable.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data(pre_post_data_example)
head(pre_post_data_example)
</code></pre>

<hr>
<h2 id='pre_post_fit'>Pre-Post Fitness Data</h2><span id='topic+pre_post_fit'></span>

<h3>Description</h3>

<p>A dataset showing physical and cognitive performance measures before and after a fitness intervention.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pre_post_fit
</code></pre>


<h3>Format</h3>

<p>A data frame with 20 rows and 12 variables:
</p>

<dl>
<dt>ID</dt><dd><p>A unique identifier for each subject.</p>
</dd>
<dt>Time</dt><dd><p>A numeric variable indicating time points, <code>0</code> for pre-intervention and <code>1</code> for post-intervention.</p>
</dd>
<dt>Sex</dt><dd><p>A numeric variable indicating sex: <code>0</code> for male and <code>1</code> for female.</p>
</dd>
<dt>Age</dt><dd><p>A numeric variable representing the age of each subject.</p>
</dd>
<dt>COPM_p</dt><dd><p>A numeric vector representing performance scores on the Canadian Occupational Performance Measure (COPM).</p>
</dd>
<dt>COPM_s</dt><dd><p>A numeric vector representing satisfaction scores on the COPM.</p>
</dd>
<dt>A1_work</dt><dd><p>A numeric vector representing work capacity scores at time A1.</p>
</dd>
<dt>A2_work</dt><dd><p>A numeric vector representing work capacity scores at time A2.</p>
</dd>
<dt>Grip_dom</dt><dd><p>A numeric vector representing grip strength of the dominant hand.</p>
</dd>
<dt>Grip_ndom</dt><dd><p>A numeric vector representing grip strength of the non-dominant hand.</p>
</dd>
<dt>Flex_right</dt><dd><p>A numeric vector representing right arm flexibility.</p>
</dd>
<dt>Flex_left</dt><dd><p>A numeric vector representing left arm flexibility.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data(pre_post_fit)
head(pre_post_fit)
</code></pre>

<hr>
<h2 id='pred_adjusted'>Adjusted Predictions Based on Group Comparisons</h2><span id='topic+pred_adjusted'></span>

<h3>Description</h3>

<p>This function calculates adjusted predictions for variables of
interest, taking into account covariates and group comparisons. It then returns
whether the results align with the hypothesized direction of effects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pred_adjusted(dataset, hypothesis, vars, covariates, group, ref)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pred_adjusted_+3A_dataset">dataset</code></td>
<td>
<p>A data frame containing the data to be analyzed.</p>
</td></tr>
<tr><td><code id="pred_adjusted_+3A_hypothesis">hypothesis</code></td>
<td>
<p>A string or vector of strings containing either 'increase'
or 'decrease', indicating the expected direction of the effect.</p>
</td></tr>
<tr><td><code id="pred_adjusted_+3A_vars">vars</code></td>
<td>
<p>A vector of variable names in the dataset that are the outcomes
of interest. These must be numeric columns.</p>
</td></tr>
<tr><td><code id="pred_adjusted_+3A_covariates">covariates</code></td>
<td>
<p>A vector of covariates to include in the model. These must
be numeric columns in the dataset.</p>
</td></tr>
<tr><td><code id="pred_adjusted_+3A_group">group</code></td>
<td>
<p>The name of the grouping variable in the dataset. This must be
a column in the dataset and should not overlap with <code>vars</code> or <code>covariates</code>.</p>
</td></tr>
<tr><td><code id="pred_adjusted_+3A_ref">ref</code></td>
<td>
<p>The reference category within the group variable. This must be a
value present in the group column.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with two elements:
</p>

<dl>
<dt>results</dt><dd><p>A vector indicating whether each hypothesis was correct
(1 for correct, 0 for incorrect).</p>
</dd>
<dt>weights</dt><dd><p>A vector of weights corresponding to each variable in <code>vars</code>,
calculated from the correlation matrix.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data("group_cog_data")
data("adjusted_example")

# simple example
pred_adjusted(adjusted_example, c("decrease", "increase"),
c('v1', 'v2'), 'sex', "group", 0)

# simulated example
pred_adjusted(dataset = group_cog_data, hypothesis = "decrease",
vars = c('craft_verbatim', 'fluency_f_words_correct'),
covariates = c('number_span_forward', 'number_span_backward'),
group = "group.factor", ref = "Control")

</code></pre>

<hr>
<h2 id='pred_results'>Predictive Results Wrapper Function</h2><span id='topic+pred_results'></span>

<h3>Description</h3>

<p>This function is a wrapper that conditionally handles filtering by group or
time, calculates the difference vector, and evaluates hypotheses to return a
list of results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pred_results(
  dataset,
  id = NULL,
  vars,
  type = "group",
  hypothesis,
  gtvar,
  grp_a,
  grp_b,
  location = "median",
  diff_method = "wilcoxon",
  phi_0 = 0.5
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pred_results_+3A_dataset">dataset</code></td>
<td>
<p>A data frame for research.</p>
</td></tr>
<tr><td><code id="pred_results_+3A_id">id</code></td>
<td>
<p>The column that identifies unique subjects. This should be <code>NULL</code>
if <code>type</code> is 'group' and should not be <code>NULL</code> if <code>type</code> is 'prepost'.</p>
</td></tr>
<tr><td><code id="pred_results_+3A_vars">vars</code></td>
<td>
<p>The column variables of interest.</p>
</td></tr>
<tr><td><code id="pred_results_+3A_type">type</code></td>
<td>
<p>The type of study. Valid values are 'group' for group-based data
and 'prepost' for pre-post data. Defaults to 'group'.</p>
</td></tr>
<tr><td><code id="pred_results_+3A_hypothesis">hypothesis</code></td>
<td>
<p>A vector or string of valid hypotheses: 'increase', 'decrease',
or 'different'.</p>
</td></tr>
<tr><td><code id="pred_results_+3A_gtvar">gtvar</code></td>
<td>
<p>The column of interest to divide the groups (e.g., time or treatment).</p>
</td></tr>
<tr><td><code id="pred_results_+3A_grp_a">grp_a</code></td>
<td>
<p>The first subset of interest within the <code>gtvar</code> column
(e.g., 'pre' or 'control').</p>
</td></tr>
<tr><td><code id="pred_results_+3A_grp_b">grp_b</code></td>
<td>
<p>The second subset of interest within the <code>gtvar</code> column
(e.g., 'post' or 'treatment').</p>
</td></tr>
<tr><td><code id="pred_results_+3A_location">location</code></td>
<td>
<p>The measure of central tendency to use for the difference
calculation. Valid options are 'median' or 'mean'. Defaults to 'median'.</p>
</td></tr>
<tr><td><code id="pred_results_+3A_diff_method">diff_method</code></td>
<td>
<p>The method to use for testing 'different' hypotheses. Valid
options are 'wilcoxon' or 't'. Defaults to 'wilcoxon'.</p>
</td></tr>
<tr><td><code id="pred_results_+3A_phi_0">phi_0</code></td>
<td>
<p>The decision rule threshold for the p-value. If p-value &lt; phi_0,
then there's sufficient evidence for a success for a difference. Defaults to 0.50.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function performs error handling to ensure appropriate input values and
types. It then filters the data based on the study type, calculates the difference vector,
and evaluates the hypotheses using the specified method.
</p>


<h3>Value</h3>

<p>A list containing:
</p>

<dl>
<dt>results</dt><dd><p>A vector of 0s and 1s indicating whether each hypothesis was correct.</p>
</dd>
<dt>differences</dt><dd><p>A vector of the differences between groups.</p>
</dd>
<dt>variables</dt><dd><p>The column variables used in the analysis.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data("group_data_example")
data("group_cog_data")
data("pre_post_data_example")
data("pre_post_fit")

# simple group analysis
pred_results(dataset=group_data_example, vars=c('v1', 'v2'),
hypothesis=c("increase", "different"), gtvar="group", grp_a="placebo", grp_b="drug")

# simple prepost analysis
pred_results(dataset=pre_post_data_example, id="ID", vars=c('v1', 'v2', 'v3'),
type="prepost", hypothesis="increase", gtvar="time", grp_a=0, grp_b=12)

# simulated group analysis
pred_results(dataset=group_cog_data, vars=c('blind_moca_uncorrected', 'craft_verbatim'),
type="group", hypothesis="decrease", gtvar="group.factor", grp_a="Control", grp_b="ESKD")

# simulated prepost analysis
pred_results(dataset=pre_post_fit, id="ID", vars=c('Flex_right', 'Flex_left'),
type="prepost", hypothesis="increase", gtvar="Time", grp_a=0, grp_b=1)
</code></pre>

<hr>
<h2 id='pred_test'>Predictive Test Function</h2><span id='topic+pred_test'></span>

<h3>Description</h3>

<p>This function performs statistical tests to determine the predictive power of a results set weighted by a corresponding vector of weights. It offers various methods to conduct the test, allowing flexibility depending on the data characteristics and analysis requirements.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pred_test(
  weights_vector,
  results_vector,
  test_type = "exact",
  phi_0 = 0.5,
  sims = 5000
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pred_test_+3A_weights_vector">weights_vector</code></td>
<td>
<p>A numeric vector where each element represents the weight for a corresponding result in the results vector. Each value must be on the interval <code class="reqn">[1/m, 1]</code>, where <code class="reqn">m = 1/length(weights_vector)</code>.</p>
</td></tr>
<tr><td><code id="pred_test_+3A_results_vector">results_vector</code></td>
<td>
<p>A numeric vector of test results where each element is in the set {0, 1}, representing the binary outcome of each prediction.</p>
</td></tr>
<tr><td><code id="pred_test_+3A_test_type">test_type</code></td>
<td>
<p>A character string specifying the type of statistical test to perform. The valid options are 'exact', 'approx', or 'bootstrap'.</p>
</td></tr>
<tr><td><code id="pred_test_+3A_phi_0">phi_0</code></td>
<td>
<p>A numeric value on the interval (0, 1) representing the null hypothesis value against which the test results are compared.</p>
</td></tr>
<tr><td><code id="pred_test_+3A_sims">sims</code></td>
<td>
<p>A natural number that specifies the number of simulations to perform when the bootstrap method is chosen. This parameter allows control over the robustness of the bootstrap approximation.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function performs error handling to ensure appropriate input values and types. It then calculates the test statistic and evaluates the p-value based on the specified test type.
</p>


<h3>Value</h3>

<p>A list containing:
</p>

<dl>
<dt>num_correctly_predicted</dt><dd><p>The number of results correctly predicted as per the specified criteria.</p>
</dd>
<dt>p_value</dt><dd><p>The p-value resulting from the test, indicating the probability of observing the test results under the null hypothesis.</p>
</dd>
<dt>test_stat</dt><dd><p>The test statistic calculated based on the weights and results.</p>
</dd>
<dt>p0</dt><dd><p>The estimated proportion derived from the weights and results.</p>
</dd>
<dt>ci</dt><dd><p>A confidence interval for the estimated proportion derived from the weights and results using the Wilson score method.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'># Example weights and results vectors
weights_vector &lt;- c(1/3, 0.5, 1)
results_vector &lt;- c(0, 1, 1)

# Exact test
result_exact &lt;- pred_test(weights_vector, results_vector, test_type = 'exact')
result_exact

# Approximate test
result_approx &lt;- pred_test(weights_vector, results_vector, test_type = 'approx')
result_approx

# Bootstrap test
result_bootstrap &lt;- pred_test(weights_vector, results_vector, test_type = 'bootstrap')
result_bootstrap

</code></pre>

<hr>
<h2 id='pred_weights'>Calculate Predictive Weights</h2><span id='topic+pred_weights'></span>

<h3>Description</h3>

<p>This function calculates predictive weights by computing the inverse square sum of a
correlation matrix derived from the specified variables. In 'group' analysis, it
directly uses the variables for correlation. In 'prepost' analysis, it calculates
the difference between two time points before correlation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pred_weights(
  dataset,
  vars,
  gtvar,
  type = "group",
  id = NULL,
  pre = NULL,
  post = NULL,
  corr_method = "pearson"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pred_weights_+3A_dataset">dataset</code></td>
<td>
<p>A data frame containing the dataset to be analyzed.</p>
</td></tr>
<tr><td><code id="pred_weights_+3A_vars">vars</code></td>
<td>
<p>A vector of strings specifying the names of the variables to be used
in the correlation analysis.</p>
</td></tr>
<tr><td><code id="pred_weights_+3A_gtvar">gtvar</code></td>
<td>
<p>The name of the categorical variable used to identify groups in
'prepost' type analysis.</p>
</td></tr>
<tr><td><code id="pred_weights_+3A_type">type</code></td>
<td>
<p>The type of analysis. Valid values are 'group' for group-based
correlation analysis or 'prepost' for pre-post analysis. Defaults to 'group'.</p>
</td></tr>
<tr><td><code id="pred_weights_+3A_id">id</code></td>
<td>
<p>The variable in the dataset that uniquely identifies subjects in a
'prepost' analysis. This should not be <code>NULL</code> if <code>type</code> is 'prepost'.</p>
</td></tr>
<tr><td><code id="pred_weights_+3A_pre">pre</code></td>
<td>
<p>Specifies the baseline time point for 'prepost' analysis.</p>
</td></tr>
<tr><td><code id="pred_weights_+3A_post">post</code></td>
<td>
<p>Specifies the follow-up time point for 'prepost' analysis.</p>
</td></tr>
<tr><td><code id="pred_weights_+3A_corr_method">corr_method</code></td>
<td>
<p>The method of correlation. Valid options are 'pearson',
'kendall', or 'spearman'. Defaults to 'pearson'.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function performs error handling to ensure appropriate input
values and types. It calculates the correlation matrix for the specified
variables and then computes the predictive weights as the inverse square
sum of the correlation matrix.
</p>


<h3>Value</h3>

<p>A numeric vector of predictive weights for each variable analyzed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("group_data_example")
data("group_cog_data")
data("pre_post_data_example")
data("pre_post_fit")

# end points for variables
grp_endpts &lt;- c(
    "mean_suv","blind_moca_uncorrected","craft_verbatim","craft_delay_verbatim",
    "number_span_forward","number_span_backward","fluency_f_words_correct",
    "oral_trail_part_a","oral_trail_part_b","fluency_animals","fluency_vegetables",
    "verbal_naming_no_cue"
    )
prepost_endpts &lt;- c(
    "COPM_p", "COPM_s", "A1_work", "A2_work", "Grip_dom",
    "Grip_ndom",  "Flex_right", "Flex_left"
    )
# simple group
pred_weights(dataset=group_data_example, vars=c('v1', 'v2'), gtvar='group')
# simple prepost
pred_weights(dataset=pre_post_data_example, vars=c('v1','v2','v3'),
gtvar='time', id='ID', pre=0,post=12)
# simulated group
pred_weights(dataset=group_cog_data, vars=grp_endpts, gtvar="group.factor",
type="group",corr_method="pearson")
# simulated prepost
pred_weights(dataset=pre_post_fit, id="ID", vars=prepost_endpts,
gtvar="Time", type="prepost",pre=0, post=1, corr_method="pearson")


</code></pre>

<hr>
<h2 id='solve_p0_score_ci'>Calculate the Adjusted Proportion Estimate and Confidence Interval</h2><span id='topic+solve_p0_score_ci'></span>

<h3>Description</h3>

<p>This function calculates the adjusted proportion estimate (p0) and the confidence interval for a given proportion estimate (p_hat) and sample size (n) using the score method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>solve_p0_score_ci(p_hat, n, z = 1.96)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="solve_p0_score_ci_+3A_p_hat">p_hat</code></td>
<td>
<p>Numeric value. The proportion estimate. Must be between 0 and 1.</p>
</td></tr>
<tr><td><code id="solve_p0_score_ci_+3A_n">n</code></td>
<td>
<p>Numeric value. The sample size. Must be a positive integer.</p>
</td></tr>
<tr><td><code id="solve_p0_score_ci_+3A_z">z</code></td>
<td>
<p>Numeric value. The z-score for the desired confidence level. Default is 1.96 (approximately 95% confidence interval).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with two elements:
</p>
<table role = "presentation">
<tr><td><code>p0</code></td>
<td>
<p>The adjusted proportion estimate.</p>
</td></tr>
<tr><td><code>confidence_interval</code></td>
<td>
<p>A numeric vector of length 2 containing the lower and upper bounds of the confidence interval.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>solve_p0_score_ci(p_hat = 9/10, n = 10)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
