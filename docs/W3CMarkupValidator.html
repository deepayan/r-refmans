<!DOCTYPE html><html lang="en"><head><title>Help for package W3CMarkupValidator</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {W3CMarkupValidator}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#inspect'><p>Inspect <span class="rlang"><b>R</b></span> objects</p></a></li>
<li><a href='#w3c_markup_validate'><p>Validate Markup of Web Documents using W3C Markup Validation</p>
Services</a></li>
<li><a href='#w3c_markup_validate_baseurl'><p>URL of W3C Markup Validation Service</p></a></li>
<li><a href='#w3c_markup_validate_db'><p>Collections of W3C Markup Validation Results</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>0.1-7</td>
</tr>
<tr>
<td>Title:</td>
<td>R Interface to W3C Markup Validation Services</td>
</tr>
<tr>
<td>Description:</td>
<td>
  R interface to a W3C Markup Validation service.
  See <a href="https://validator.w3.org/">https://validator.w3.org/</a> for more information.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>curl, utils, xml2</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-02-06 19:33:49 UTC; hornik</td>
</tr>
<tr>
<td>Author:</td>
<td>Kurt Hornik <a href="https://orcid.org/0000-0003-4198-9911"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Kurt Hornik &lt;Kurt.Hornik@R-project.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-02-06 19:35:46 UTC</td>
</tr>
</table>
<hr>
<h2 id='inspect'>Inspect <span class="rlang"><b>R</b></span> objects</h2><span id='topic+inspect'></span><span id='topic+inspect.w3c_markup_validate'></span><span id='topic+inspect.w3c_markup_validate_db'></span>

<h3>Description</h3>

<p>Display <span class="rlang"><b>R</b></span> objects in a convenient and informative way.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inspect(x, ...)
## S3 method for class 'w3c_markup_validate'
inspect(x, details = TRUE, ...)
## S3 method for class 'w3c_markup_validate_db'
inspect(x, details = TRUE, full = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="inspect_+3A_x">x</code></td>
<td>
<p>an <span class="rlang"><b>R</b></span> object for the generic; objects inheriting from the
respective classes for the methods.</p>
</td></tr>
<tr><td><code id="inspect_+3A_details">details</code></td>
<td>
<p>a logical recycled to length two indicating whether to
display detailed information on errors and warnings, respectively,
or a character vector with elements partially matching
&lsquo;error&rsquo; or &lsquo;warning&rsquo;.</p>
</td></tr>
<tr><td><code id="inspect_+3A_full">full</code></td>
<td>
<p>a logical indicating whether to provide information about
validation results with no errors or warnings.</p>
</td></tr>
<tr><td><code id="inspect_+3A_...">...</code></td>
<td>
<p>arguments to be passed to and from methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>inspect()</code> is a generic function.
</p>
<p>The methods for objects inheriting from <code>"w3c_markup_validate"</code>
or <code>"w3c_markup_validate_db"</code> (single results of markup
validation using <code><a href="#topic+w3c_markup_validate">w3c_markup_validate</a></code>, or collections of
such results) conveniently summarize the problems found by the
validation service as collections of tables with columns giving the
line, column and a description of the problem.
</p>

<hr>
<h2 id='w3c_markup_validate'>Validate Markup of Web Documents using W3C Markup Validation
Services</h2><span id='topic+w3c_markup_validate'></span>

<h3>Description</h3>

<p>Check the markup validity of web documents in <abbr><span class="acronym">HTML</span></abbr>,
<abbr><span class="acronym">XHTML</span></abbr>, etc., using a W3C Markup Validation service.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>w3c_markup_validate(baseurl = w3c_markup_validate_baseurl(),
                    uri = NULL, file = NULL, string = NULL,
                    opts = list())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="w3c_markup_validate_+3A_baseurl">baseurl</code></td>
<td>
<p>a character string giving the URL of the W3C Markup
Validation service to employ.</p>
</td></tr>
<tr><td><code id="w3c_markup_validate_+3A_uri">uri</code></td>
<td>
<p>a character string giving the URI to validate.</p>
</td></tr>
<tr><td><code id="w3c_markup_validate_+3A_file">file</code></td>
<td>
<p>a character string giving the path of a file to validate.</p>
</td></tr>
<tr><td><code id="w3c_markup_validate_+3A_string">string</code></td>
<td>
<p>a character string with the markup to validate.</p>
</td></tr>
<tr><td><code id="w3c_markup_validate_+3A_opts">opts</code></td>
<td>
<p>a named list or <code><a href="RCurl.html#topic+curlOptions">curlOptions</a></code> object
with options to use for accessing the validation service via
<code><a href="RCurl.html#topic+getURL">getURL</a></code> (in case <code>uri</code> is given) or
<code><a href="RCurl.html#topic+postForm">postForm</a></code> (in case <code>file</code> or <code>string</code>
are given).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Exactly one of <code>uri</code>, <code>file</code> or <code>string</code> must be given.
</p>
<p>Validation is then performed by using the W3C Markup Validation
service at the given <abbr><span class="acronym">URL</span></abbr>, using the (still declared
&ldquo;experimental&rdquo;) SOAP 1.2 API of such a service (see
<a href="https://validator.w3.org/docs/api.html">https://validator.w3.org/docs/api.html</a> for more information).
</p>
<p>If a SOAP validation response could be obtained,
<code>w3c_markup_validate()</code> returns the information in the response
organized into an object of class <code>"w3c_markup_validate"</code>, which
is a list with the following elements:
</p>

<dl>
<dt><code>valid</code></dt><dd><p>a logical indicating the validity of the web
document checked (TRUE iff there were no errors)</p>
</dd>
<dt><code>errorcount</code></dt><dd><p>an integer giving the number of errors
found.</p>
</dd>
<dt><code>errors</code></dt><dd><p>a data frame with variables &lsquo;line&rsquo;,
&lsquo;col&rsquo;, &lsquo;message&rsquo;, &lsquo;messageid&rsquo;,
&lsquo;explanation&rsquo; and &lsquo;source&rsquo; with the obvious
meanings, or <code>NULL</code>.</p>
</dd>
<dt><code>warningcount</code></dt><dd><p>an integer giving the number of warnings
found.</p>
</dd>
<dt><code>warnings</code></dt><dd><p>a data frame with variables as for
<code>errors</code>, or <code>NULL</code>.</p>
</dd>
</dl>

<p>This class has methods for <code><a href="base.html#topic+print">print</a></code> for compactly
summarizing the results, an <code><a href="#topic+inspect">inspect</a></code> method for inspecting
details, and an <code><a href="base.html#topic+as.data.frame">as.data.frame</a></code> method for collapsing the
errors and warnings into a &ldquo;flat&rdquo; data frame useful for further
analyses.
</p>


<h3>Note</h3>

<p>The validation service provided by the W3C used by default for
validation is a shared and free resource, and the W3C asks (see
<a href="https://validator.w3.org/docs/api.html">https://validator.w3.org/docs/api.html</a>) for considerate use and
possibly installing a local instance of the validation service: 
excessive use of the service will be blocked.  In fact, it seems that
since May 2015 W3C blocks access to the SOAP API, so one needs to use
a different (local) validation service.
</p>
<p>On Debian-based systems, a local instance can conveniently be
installed via the system command
<code>apt-get install w3c-markup-validator</code>
and following the instructions for providing the validator as a web
service.
</p>
<p>One can use the environment variable
<span class="env">W3C_MARKUP_VALIDATOR_BASEURL</span> to specify the service to be
employed by default.  E.g., one can set this to
<code>"http://localhost/w3c-validator/check"</code>
for Debian-based systems as discussed above.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+w3c_markup_validate_baseurl">w3c_markup_validate_baseurl</a></code> for getting and setting the
<abbr><span class="acronym">URL</span></abbr> of the validation service.
</p>
<p><code><a href="#topic+w3c_markup_validate_db">w3c_markup_validate_db</a></code> for combining and analyzing
collections of single validation results.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not much to show with this as it should validate ok
## (provided that the validation service is accessible):
tryCatch(w3c_markup_validate(uri = "https://CRAN.R-project.org"),
         error = identity)
</code></pre>

<hr>
<h2 id='w3c_markup_validate_baseurl'>URL of W3C Markup Validation Service</h2><span id='topic+w3c_markup_validate_baseurl'></span>

<h3>Description</h3>

<p>Get or set the <abbr><span class="acronym">URL</span></abbr> of the W3C Markup Validation service to
employ.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>w3c_markup_validate_baseurl(new)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="w3c_markup_validate_baseurl_+3A_new">new</code></td>
<td>
<p>a character string with the <abbr><span class="acronym">URL</span></abbr> of the the W3C
Markup Validation service to employ, or <code>NULL</code> indicating to
use the W3C service as specified by the environment variable
<span class="env">W3C_MARKUP_VALIDATOR_BASEURL</span>, or if this is unset, 
at <a href="https://validator.w3.org/check">https://validator.w3.org/check</a>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If no argument is given, the current <abbr><span class="acronym">URL</span></abbr> is returned.
Otherwise, the <abbr><span class="acronym">URL</span></abbr> is set to the given one or (if <code>new</code>
is <code>NULL</code>) the default one.
</p>

<hr>
<h2 id='w3c_markup_validate_db'>Collections of W3C Markup Validation Results</h2><span id='topic+w3c_markup_validate_db'></span><span id='topic+w3c_markup_validate_files'></span><span id='topic+w3c_markup_validate_uris'></span>

<h3>Description</h3>

<p>Create and manipulate collections of W3C markup validation results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>w3c_markup_validate_db(x, names = NULL)

w3c_markup_validate_files(files, baseurl = w3c_markup_validate_baseurl(),
                          opts = list())                    
w3c_markup_validate_uris(uris, baseurl = w3c_markup_validate_baseurl(),
                         opts = list())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="w3c_markup_validate_db_+3A_x">x</code></td>
<td>
<p>a list of <code><a href="#topic+w3c_markup_validate">w3c_markup_validate</a></code> results.</p>
</td></tr>
<tr><td><code id="w3c_markup_validate_db_+3A_names">names</code></td>
<td>
<p>a character vector of names for the elements in
<code>x</code>, or <code>NULL</code> (default), indicating to use the names of
<code>x</code> or to auto-generate names if these are <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="w3c_markup_validate_db_+3A_files">files</code></td>
<td>
<p>a character vector giving the names of files to validate.</p>
</td></tr>
<tr><td><code id="w3c_markup_validate_db_+3A_uris">uris</code></td>
<td>
<p>a character vector giving <abbr><span class="acronym">URI</span></abbr>s to validate.</p>
</td></tr>
<tr><td><code id="w3c_markup_validate_db_+3A_baseurl">baseurl</code></td>
<td>
<p>a character string giving the <abbr><span class="acronym">URL</span></abbr> of the W3C Markup
Validation service to employ.</p>
</td></tr>
<tr><td><code id="w3c_markup_validate_db_+3A_opts">opts</code></td>
<td>
<p>see <code><a href="#topic+w3c_markup_validate">w3c_markup_validate</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>w3c_markup_validate_db()</code> creates a db (data base) of
<code><a href="#topic+w3c_markup_validate">w3c_markup_validate</a></code> results as a list of these results
with class <code>"w3c_markup_validate_db"</code>.  This class has methods
for <code><a href="base.html#topic+print">print</a></code> and <code><a href="base.html#topic+c">c</a></code> for compactly summarizing
and combining results, an <code><a href="#topic+inspect">inspect</a></code> method for inspecting
details, and an <code><a href="base.html#topic+as.data.frame">as.data.frame</a></code> method for collapsing the
errors and warnings into a &ldquo;flat&rdquo; data frame useful for further
analyses.
</p>
<p><code>w3c_markup_validate_files()</code> and
<code>w3c_markup_validate_uris()</code> validate the markup in the given
files or URIs, with results combined into such results db objects.
For files or URIs for which validation failed (which can happen for
example when these contain characters invalid in SGML), the
corresponding error condition objects are gathered into the
<code>"failures"</code> attribute of the results db returned.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+w3c_markup_validate_baseurl">w3c_markup_validate_baseurl</a></code> for getting and setting the
<abbr><span class="acronym">URL</span></abbr> of the validation service.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Test files provided with this package:
dir &lt;- system.file("examples", package = "W3CMarkupValidator")
files &lt;- Sys.glob(file.path(dir, "*.html"))
if(!grepl("^http://validator.w3.org",
          w3c_markup_validate_baseurl())) {
    ## Validate.
    results &lt;- w3c_markup_validate_files(files)
    results
    ## In case of failures, inspect the error messages:
    lapply(attr(results, "failures"), conditionMessage)
    ## Inspect validation results:
    inspect(results)
    inspect(results, full = TRUE)
    ## Turn results into a data frame:
    df &lt;- as.data.frame(results)
    ## Tabulate error messages:
    table(substring(df$message, 1L, 60L))
    ## Inspect a particular set of error messages:
    df[df$message == "element \"font\" undefined", ]
    ## (Note that explanations are in HTML ...)
    ## Conveniently view the full records (modulo HTML markup):
    write.dcf(df)
}
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
