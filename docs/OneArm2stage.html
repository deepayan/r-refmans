<!DOCTYPE html><html lang="en"><head><title>Help for package OneArm2stage</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {OneArm2stage}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#FitDat'><p>Fit Historical Survival Data Assuming the Failure Time Follows a</p>
Weibull Distribution</a></li>
<li><a href='#GenDat_KJ'><p>Generate Survival Data with unrestricted Follow-Up</p></a></li>
<li><a href='#GenDat_rKJ'><p>Generate Survival Data with Restricted Follow-Up</p></a></li>
<li><a href='#LRT'><p>Conduct the Interim or Final Analysis Using the One-Sample Log-Rank</p>
Test for Two-Stage TTE Trials</a></li>
<li><a href='#phase2.TTE'><p>Two-Stage Designs with TTE Outcomes Using the One-Sample Log-Rank</p>
Test</a></li>
<li><a href='#Sim'><p>Calculate Empirical Power by Simulation for Two-Stage Designs Using</p>
One-Sample Log-Rank Test</a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Phase II Single-Arm Two-Stage Designs with Time-to-Event
Outcomes</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Two-stage design for single-arm phase II 
		trials with time-to-event endpoints (e.g., clinical trials on 
		immunotherapies among cancer patients) can be calculated using this package. 
		Two notable advantages of the package: 1) It provides flexible choices from 
		three design methods (optimal, minmax, and admissible), and 2) the power of
		the design is more accurately calculated using the exact variance in the
		one-sample log-rank test. The package can be used for 1) planning the sample
		sizes and other design parameters, and 2) conducting the interim and final
		analyses for the Go/No-go decisions. More details about the design method
		can be found in: Wu, J, Chen L, Wei J, Weiss H, Chauhan A. (2020).
		&lt;<a href="https://doi.org/10.1002%2Fpst.1983">doi:10.1002/pst.1983</a>&gt;.</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>survival, utils, flexsurv, IPDfromKM</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-10-09 21:14:24 UTC; xyuan86</td>
</tr>
<tr>
<td>Author:</td>
<td>Xiaomeng Yuan [aut, cre],
  Haitao Pan [aut],
  Jianrong Wu [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Xiaomeng Yuan &lt;xiaomeng.yuan@stjude.org&gt;</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-10-09 22:30:11 UTC</td>
</tr>
</table>
<hr>
<h2 id='FitDat'>Fit Historical Survival Data Assuming the Failure Time Follows a
Weibull Distribution</h2><span id='topic+FitDat'></span>

<h3>Description</h3>

<p>The function fits parametric models for the time-to-event data with the
underlying distribution of the failure time assumed to be Weibull.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>FitDat(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="FitDat_+3A_data">data</code></td>
<td>
<p>a historical survival data sample, has to contain two variables
'Time' and 'Cens': <br />
<em>Time</em>, the time under observation during trial for each
patient.<br />
<em>Cens</em>, the status indicator of patients (event = 1,
censored = 0).</p>
</td></tr>
</table>


<h3>Value</h3>

<p><em>fit.Weibull</em> the fitted model assuming a Weibull distribution.
<br />
<em>AIC</em> the AIC value from the fitted model. <br />
<em>parameter.estimates</em> the estimated parameters from the fitted
model.
</p>


<h3>References</h3>

<p>Wang, M., Rule, S., Zinzani, P. L., Goy, A., Casasnovas, O., Smith, S. D.,..., Robak, T. (2018).
Acalabrutinib in relapsed or refractory mantle cell lymphoma (ACE-LY-004):
a single-arm, multicentre, phase 2 trial. The Lancet, 391(10121), 659â€“667.
https://doi.org/10.1016/s0140-6736(17)33108-2
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(IPDfromKM)
# a sample dataset that we already extracted from Wang et al, 2018.
df&lt;- read.csv(system.file("extdata", "df.csv", package = "OneArm2stage"))

# risk time points
trisk &lt;- c(0,2,4,6,8,10,12,14,16,18,20,22,24)

# number of patients at risk at each risk time point
nrisk.radio &lt;- c(124,120,115,110,107,104,103,95,46,18,11,8,0)

# Preprocess the raw coordinates into an proper format for reconstruct IPD
pre_radio &lt;- preprocess(dat=df, trisk=trisk,
                     nrisk=nrisk.radio,totalpts=NULL,maxy=100)

#Reconstruct IPD
est_radio &lt;- getIPD(prep=pre_radio,armID=0,tot.events=NULL)

# shift the IPD data into the proper format for 'FitDat()'
ipd &lt;- est_radio$IPD
dat3 &lt;- as.data.frame(cbind(rep(0, nrow(ipd)),ipd$time, ipd$status))
colnames(dat3) &lt;- c("Entry", "Time", "Cens")

# use FitDat function to fit the historical dat
modelSelect &lt;- FitDat(dat3)
modelSelect$AIC
# Weibull
# 301.7776

# check the estimated parameters from the modeling results
modelSelect$parameter.estimates
# $Weibull
# shape     scale
# 0.1133671 3.9939753

</code></pre>

<hr>
<h2 id='GenDat_KJ'>Generate Survival Data with unrestricted Follow-Up</h2><span id='topic+GenDat_KJ'></span>

<h3>Description</h3>

<p>Generate survival data with restricted follow-up Using Weibull Distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GenDat_KJ(shape, S_fixed, x_fixed, rate, tf, t1, n, seed)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="GenDat_KJ_+3A_shape">shape</code></td>
<td>
<p>shape parameter for WB distributions.</p>
</td></tr>
<tr><td><code id="GenDat_KJ_+3A_s_fixed">S_fixed</code></td>
<td>
<p>survival probability at the fixed time point x_fixed.</p>
</td></tr>
<tr><td><code id="GenDat_KJ_+3A_x_fixed">x_fixed</code></td>
<td>
<p>a fixed time point where the survival probability is known.</p>
</td></tr>
<tr><td><code id="GenDat_KJ_+3A_rate">rate</code></td>
<td>
<p>a constant accrual rate.</p>
</td></tr>
<tr><td><code id="GenDat_KJ_+3A_tf">tf</code></td>
<td>
<p>the follow-up time.</p>
</td></tr>
<tr><td><code id="GenDat_KJ_+3A_t1">t1</code></td>
<td>
<p>the interim analysis time.</p>
</td></tr>
<tr><td><code id="GenDat_KJ_+3A_n">n</code></td>
<td>
<p>sample size.</p>
</td></tr>
<tr><td><code id="GenDat_KJ_+3A_seed">seed</code></td>
<td>
<p>seed used for the random sample generation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Two dataframes: data (the full data for final analysis) and data_t1 (the data for interim analysis), both containing the following 4 variables:<br />
<em>Entry</em> time when each patient enters the trial, assumed to be uniform from 0 to ta with ta as the time when enrollment ends.<br />
<em>time</em> the time under observation during entire trial (in data) or before t1 (in data_t1) for each patient.<br />
<em>status</em> the status indicator of patients (event = 1, censored = 0), which can be different between data and data_t1.<br />
<em>Total</em> the sum of <em>Entry</em> and <em>time</em>.
</p>

<hr>
<h2 id='GenDat_rKJ'>Generate Survival Data with Restricted Follow-Up</h2><span id='topic+GenDat_rKJ'></span>

<h3>Description</h3>

<p>Generate survival data with restricted follow-up from Weibull distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GenDat_rKJ(shape, S_fixed, x_fixed, rate, t1, x, n, seed)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="GenDat_rKJ_+3A_shape">shape</code></td>
<td>
<p>shape parameter for WB distribution.</p>
</td></tr>
<tr><td><code id="GenDat_rKJ_+3A_s_fixed">S_fixed</code></td>
<td>
<p>survival probability at the fixed time point x_fixed.</p>
</td></tr>
<tr><td><code id="GenDat_rKJ_+3A_x_fixed">x_fixed</code></td>
<td>
<p>a fixed time point where the survival probability is known.</p>
</td></tr>
<tr><td><code id="GenDat_rKJ_+3A_rate">rate</code></td>
<td>
<p>a constant accrual rate.</p>
</td></tr>
<tr><td><code id="GenDat_rKJ_+3A_t1">t1</code></td>
<td>
<p>the time when interim analysis happens.</p>
</td></tr>
<tr><td><code id="GenDat_rKJ_+3A_x">x</code></td>
<td>
<p>the restricted follow-up time period, during which patients are monitored.</p>
</td></tr>
<tr><td><code id="GenDat_rKJ_+3A_n">n</code></td>
<td>
<p>sample size.</p>
</td></tr>
<tr><td><code id="GenDat_rKJ_+3A_seed">seed</code></td>
<td>
<p>seed used for the random sample generation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Two dataframes: data (the full data for final analysis) and data_t1 (the data for interim analysis), both containing the following 4 variables:<br />
<em>Entry</em> time when each patient enters the trial, assumed to be uniform from 0 to ta with ta as the time when enrollment ends.<br />
<em>time</em> the time under observation during entire trial (in data) or before t1 (in data_t1) for each patient.<br />
<em>status</em> the status indicator of patients (event = 1, censored = 0), which can be different between data and data_t1.<br />
<em>Total</em> the sum of <em>Entry</em> and <em>time</em>.
</p>

<hr>
<h2 id='LRT'>Conduct the Interim or Final Analysis Using the One-Sample Log-Rank
Test for Two-Stage TTE Trials</h2><span id='topic+LRT'></span>

<h3>Description</h3>

<p>Performs the one-sample log-rank test (OSLR) for the time-to-event data from
two-stage Phase II clinical trials assuming the failure time follows a
Weibull distribution. This can be used for designs with either unrestricted
or restricted follow-up .
</p>


<h3>Usage</h3>

<pre><code class='language-R'>LRT(shape, S0, x0, data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="LRT_+3A_shape">shape</code></td>
<td>
<p>shape parameter for the Weibull distribution.</p>
</td></tr>
<tr><td><code id="LRT_+3A_s0">S0</code></td>
<td>
<p>the survival probability at a fixed time point x0 under the null
hypothesis.</p>
</td></tr>
<tr><td><code id="LRT_+3A_x0">x0</code></td>
<td>
<p>a fixed time point when the survival probability is S0 under null.</p>
</td></tr>
<tr><td><code id="LRT_+3A_data">data</code></td>
<td>
<p>the time-to-event data for either the interim or final analysis
from a two-stage survival trial, contains 2 variables:<br />
<em>time</em> the time period under observation before the time of
interim analysis (for interim analysis) or during entire trial
(for final analysis) for each patient.<br />
<em>status</em> the status indicator of patients (event = 1,
censored  = 0).</p>
</td></tr>
</table>


<h3>Value</h3>

<p><em>z</em> the OSLR test statistic for the interim or final analysis,
depending on data used.<br />
<em>O</em> the observed number of events.<br />
<em>E</em> the expected number of events.
</p>


<h3>References</h3>

<p>Wu, J, Chen L, Wei J, Weiss H, Chauhan A. (2020). Two-stage phase II survival trial design. Pharmaceutical Statistics. 2020;19:214-229. https://doi.org/10.1002/pst.1983
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat&lt;- read.csv(system.file("extdata", "kj1_final.csv", package = "OneArm2stage"))
LRT(shape=1, S0=0.62, x0=2, data=dat)
# O       E       Z
# 18.0000 16.3598 -0.4055
</code></pre>

<hr>
<h2 id='phase2.TTE'>Two-Stage Designs with TTE Outcomes Using the One-Sample Log-Rank
Test</h2><span id='topic+phase2.TTE'></span>

<h3>Description</h3>

<p>phase2.TTE() provides the clinical trial design solutions for two-stage
trials with time-to-event outcomes based on the one-sample log-rank (OSLR)
test. It calculates the design parameters (e.g., t1, n1, n, c1, c) using
optimal, minmax and admissible methods.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>phase2.TTE(
  shape,
  S0,
  x0,
  hr,
  tf,
  rate,
  alpha,
  beta,
  prStop = 0,
  q_value = 0.5,
  dfc1 = 0.001,
  dfc2 = 0.001,
  dfc3 = 0.001,
  maxEn = 10000,
  range = 1,
  t1_p1 = 0.2,
  t1_p2 = 1.2,
  c1_p = 0.25,
  nbpt_p = 11,
  pascote_p = 1.26,
  restricted = 0
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="phase2.TTE_+3A_shape">shape</code></td>
<td>
<p>shape parameter for the baseline hazard function assuming
that the failure time follows a Weibull distribution.</p>
</td></tr>
<tr><td><code id="phase2.TTE_+3A_s0">S0</code></td>
<td>
<p>survival probability at the fixed time point x0 under the null
hypothesis (i.e, H0).</p>
</td></tr>
<tr><td><code id="phase2.TTE_+3A_x0">x0</code></td>
<td>
<p>a fixed time point where the survival probability is S0 under
the null.</p>
</td></tr>
<tr><td><code id="phase2.TTE_+3A_hr">hr</code></td>
<td>
<p>hazard ratio, hr &lt; 1. s1=s0^hr, where s1 is the survival
probability under the alternative hypothesis (i.e., HA) and s0 is that
under H0.</p>
</td></tr>
<tr><td><code id="phase2.TTE_+3A_tf">tf</code></td>
<td>
<p>the follow-up time (restricted or unrestricted), the time period
from the entry of the last patient to the end of the trial.</p>
</td></tr>
<tr><td><code id="phase2.TTE_+3A_rate">rate</code></td>
<td>
<p>a constant accrual rate. Please consider use a reasonable rate
value. If the rate is too small, the function might throw an error.</p>
</td></tr>
<tr><td><code id="phase2.TTE_+3A_alpha">alpha</code></td>
<td>
<p>type I error.</p>
</td></tr>
<tr><td><code id="phase2.TTE_+3A_beta">beta</code></td>
<td>
<p>type II error.</p>
</td></tr>
<tr><td><code id="phase2.TTE_+3A_prstop">prStop</code></td>
<td>
<p>the lower limit of the early stopping probability under H0,
with default=0.</p>
</td></tr>
<tr><td><code id="phase2.TTE_+3A_q_value">q_value</code></td>
<td>
<p>the relative importance between the maximum sample size (n)
and the expected sample size under H0 (ES) when deriving the design
based on the admissible method. The default is 0.5 and the range is
(0, 1). The smaller q_value is, the more importance is given to ES. The
greater it is, the more importance is given to n.</p>
</td></tr>
<tr><td><code id="phase2.TTE_+3A_dfc1">dfc1</code></td>
<td>
<p>the value defines the stopping criterion of the optimization
process in the minmax method with smaller values lead to more iterations,
default=0.001. Change is not recommended.</p>
</td></tr>
<tr><td><code id="phase2.TTE_+3A_dfc2">dfc2</code></td>
<td>
<p>the value defines the stopping criterion of the optimization
process in the optimal method, smaller values lead to more iterations,
default=0.001. Change is not recommended.</p>
</td></tr>
<tr><td><code id="phase2.TTE_+3A_dfc3">dfc3</code></td>
<td>
<p>the value defines the stopping criterion of the optimization
process in the admissible method, smaller values lead to more iterations,
default=0.001. Change is not recommended.</p>
</td></tr>
<tr><td><code id="phase2.TTE_+3A_maxen">maxEn</code></td>
<td>
<p>the maximum of the expected sample size under null, default=
10000. Change is not recommended.</p>
</td></tr>
<tr><td><code id="phase2.TTE_+3A_range">range</code></td>
<td>
<p>the value defines how far the parameters can deviate from the
last iteration in the computation of the second-stage design parameters,
default=1. Change is not recommended.</p>
</td></tr>
<tr><td><code id="phase2.TTE_+3A_t1_p1">t1_p1</code></td>
<td>
<p>this value defines the lower limit of the possible range of t1
depending on the single-stage accrual time, default=0.2. Change is not
recommended.</p>
</td></tr>
<tr><td><code id="phase2.TTE_+3A_t1_p2">t1_p2</code></td>
<td>
<p>this value defines the upper limit of the possible range of t1
depending on the single-stage accrual time, default=0.2. Change is not
recommended.</p>
</td></tr>
<tr><td><code id="phase2.TTE_+3A_c1_p">c1_p</code></td>
<td>
<p>this value defines the initial center in the possible range of
c1, default=0.25. Change is not recommended.</p>
</td></tr>
<tr><td><code id="phase2.TTE_+3A_nbpt_p">nbpt_p</code></td>
<td>
<p>this value defines the initial number of points checked
within possible ranges for n, t1 and c1, default=11. Change is not
recommended.</p>
</td></tr>
<tr><td><code id="phase2.TTE_+3A_pascote_p">pascote_p</code></td>
<td>
<p>this value defines how fast the possible ranges of the
two-stage design parameters shrink on each iteration, default=1.26. Change
is not recommended.</p>
</td></tr>
<tr><td><code id="phase2.TTE_+3A_restricted">restricted</code></td>
<td>
<p>whether using restricted (1) or unrestricted (0)
follow-up, default = 0.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns a list that includes <b>Single_stage</b>,
<b>Two_stage_Optimal</b>, <b>Two_stage_minmax</b>, and
<b>Two_stage_Admissible</b>, etc.
</p>
<p><b>Single_stage</b> contains the design parameters for the
single-stage design:
</p>

<ul>
<li> <p><em>nsignle</em> the required sample size for the
single-stage design.<br />
</p>
</li>
<li> <p><em>tasingle</em> the estimated accrual time for the single-stage
design.<br />
</p>
</li>
<li> <p><em>csingle</em> the critical value for the
single-stage design.<br />
</p>
</li></ul>

<p><b>Two_stage_Optimal</b> contains the design parameters for the
two-stage design based on the optimal method (i.e., minimizing ES):<br />
</p>

<ul>
<li> <p><em>n1</em> and <em>n</em> required sample sizes in the two-stage
design by the interim and final stage, respectively.<br />
</p>
</li>
<li> <p><em>c1</em> and <em>c</em> critical values in the two-stage
design for interim and final analysis, respectively.<br />
</p>
</li>
<li> <p><em>t1</em> the interim analysis time in the two-stage design.<br />
</p>
</li>
<li> <p><em>MTSL</em> the maximum total study length (the sum of the accrual
time and the follow-up time).<br />
</p>
</li>
<li> <p><em>ES</em> the expected sample size under null in the two-stage
design.<br />
</p>
</li>
<li> <p><em>PS</em> the probability of early stopping under null in the
two-stage design.
</p>
</li></ul>

<p><b>Two_stage_minmax</b> contains the design parameters for the two-
stage design based on the minmax method (i.e., minimizing the total sample
size, n), including the same parameters as for the optimal method.
</p>
<p><b>Two_stage_Admissible</b> contains the design parameters for the
two-stage design based on the admissible method (i.e., a &quot;compromise&quot;
between the optimal and the minmax method), including the same parameters
as for the optimal method, as well as:<br />
</p>

<ul>
<li> <p><em>Rho</em> The expected loss. Between the total sample size n
derived from the minmax and the optimal method, the admissible
method calculates a design for each possible value of n. The design
with the lowest Rho value (i.e., first row in the output) is the
recommended design based on the admissible method with the
specified q-value.<br />
</p>
</li></ul>

<p><b>Other outputs</b>:<br />
</p>

<ul>
<li> <p><em>param</em> The input values to the arguments.<br />
</p>
</li>
<li> <p><em>difn_opSg</em> The difference in n between the single-stage
design and the optimal two-stage designs.<br />
</p>
</li>
<li> <p><em>difn_opminmax</em> The difference in n between the optimal
and the minmax two-stage designs.<br />
</p>
</li>
<li> <p><em>minmax.err</em> 0 or 1. If minmax.err=1, optimization
for the minmax method is incomplete.<br />
</p>
</li>
<li> <p><em>optimal.err</em> 0 or 1. If optimal.err=1, optimization for
the optimal method is incomplete.<br />
</p>
</li>
<li> <p><em>admiss.err</em> 0 or 1. If admiss.err=1, optimization for
a given n value in the admissible method is incomplete.<br />
</p>
</li>
<li> <p><em>admiss.null1</em> 0 or 1. If admiss.null1=1, the
admissible result is unavailable due to incomplete optimization
with either the minmax or the optimal method.<br />
</p>
</li>
<li> <p><em>admiss.null2</em> 0 or 1. If admiss.null2=1, the
admissible result is unavailable as either the minmax or the
optimal result is unavailable.<br />
</p>
</li>
<li> <p><em>admiss.null3</em> 0 or 1. If admiss.null3=1, the admissible
result is unavailable as n in the minmax result and n in the
optimal result are equal.
</p>
</li></ul>



<h3>References</h3>

<p>Wu, J, Chen L, Wei J, Weiss H, Chauhan A. (2020). Two-stage phase II survival trial design. Pharmaceutical Statistics. 2020;19:214-229. https://doi.org/10.1002/pst.1983
</p>


<h3>Examples</h3>

<pre><code class='language-R'># 1. An example when q_value=0.1, i.e, more importance is given to ES.
# phase2.TTE(shape=0.5, S0=0.6, x0=3, hr=0.5, tf=1, rate=5,
# 					 alpha=0.05, beta=0.15, q_value=0.1, prStop=0, restricted=0)
# $param
#   shape  S0  hr alpha beta rate x0 tf q_value prStop restricted
# 1   0.5 0.6 0.5  0.05 0.15    5  3  1     0.1      0          0
#
# $Single_stage
#   nsingle tasingle  csingle
# 1      45        9 1.644854
#
# $Two_stage_Optimal
#   n1     c1  n      c     t1 MTSL    ES     PS
# 1 29 0.1389 48 1.6159 5.7421 10.6 37.29 0.5552
#
# $Two_stage_minmax
#   n1     c1  n      c     t1 MTSL      ES     PS
# 1 34 0.1151 45 1.6391 6.7952   10 38.9831 0.5458
#
# $Two_stage_Admissible
#      n1      c1  n      c     t1 MTSL      ES     PS      Rho
# 123  29  0.0705 47 1.6232 5.7261 10.4 37.2993 0.5281 38.26937
# 285  28  0.0792 48 1.6171 5.5663 10.6 37.2790 0.5316 38.35110
# 1701 31  0.0733 46 1.6293 6.0191 10.2 37.5828 0.5292 38.42452
# 170  33 -0.0405 45 1.6391 6.4245 10.0 38.7692 0.4839 39.39228
#
# $difn_opSg
# [1] 3
#
# $difn_opminmax
# [1] 3
#
# $minmax.err
# [1] 0
#
# $optimal.err
# [1] 0
#
# $admiss.err
# [1] 0
#
# $admiss.null1
# [1] 0
#
# $admiss.null2
# [1] 0
#
# $admiss.null3
# [1] 0

# 2. An example when q_value=0.75, i.e., more importance is given to n.
# phase2.TTE(shape=0.5, S0=0.6, x0=3, hr=0.5, tf=1, rate=5,
# alpha=0.05, beta=0.15, q_value=0.75, prStop=0, restricted=0)
# $param
#   shape  S0  hr alpha beta rate x0 tf q_value prStop restricted
# 1   0.5 0.6 0.5  0.05 0.15    5  3  1    0.75      0          0
#
# $Single_stage
#   nsingle tasingle  csingle
# 1      45        9 1.644854
#
# $Two_stage_Optimal
#   n1     c1  n      c     t1 MTSL    ES     PS
# 1 29 0.1389 48 1.6159 5.7421 10.6 37.29 0.5552
#
# $Two_stage_minmax
#   n1     c1  n      c     t1 MTSL      ES     PS
# 1 34 0.1151 45 1.6391 6.7952   10 38.9831 0.5458
#
# $Two_stage_Admissible
#      n1      c1  n      c     t1 MTSL      ES     PS      Rho
# 170  33 -0.0405 45 1.6391 6.4245 10.0 38.7692 0.4839 43.44230
# 1701 31  0.0733 46 1.6293 6.0191 10.2 37.5828 0.5292 43.89570
# 123  29  0.0705 47 1.6232 5.7261 10.4 37.2993 0.5281 44.57483
# 285  28  0.0792 48 1.6171 5.5663 10.6 37.2790 0.5316 45.31975
#
# $difn_opSg
# [1] 3
#
# $difn_opminmax
# [1] 3
#
# $minmax.err
# [1] 0
#
# $optimal.err
# [1] 0
#
# $admiss.err
# [1] 0
#
# $admiss.null1
# [1] 0
#
# $admiss.null2
# [1] 0
#
# $admiss.null3
# [1] 0
</code></pre>

<hr>
<h2 id='Sim'>Calculate Empirical Power by Simulation for Two-Stage Designs Using
One-Sample Log-Rank Test</h2><span id='topic+Sim'></span>

<h3>Description</h3>

<p>Sim() can be used to calculate the empirical power and type-I error by
simulation given the design parameters obtained from the two-stage
designs using phase2.TTE().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Sim(
  shape,
  S0,
  S1,
  x0,
  tf,
  rate,
  t1,
  c1,
  c,
  n1,
  n,
  N,
  restricted = 0,
  seed = 123
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Sim_+3A_shape">shape</code></td>
<td>
<p>shape parameter of the baseline hazard function assuming
Weibull distribution.</p>
</td></tr>
<tr><td><code id="Sim_+3A_s0">S0</code></td>
<td>
<p>survival probability at a fixed time point x0 under the null
hypothesis.</p>
</td></tr>
<tr><td><code id="Sim_+3A_s1">S1</code></td>
<td>
<p>survival probability at a fixed time point x0 under the
alternative hypothesis.</p>
</td></tr>
<tr><td><code id="Sim_+3A_x0">x0</code></td>
<td>
<p>a fixed time point where the survival probabilities are known for
both null and alternative hypotheses.</p>
</td></tr>
<tr><td><code id="Sim_+3A_tf">tf</code></td>
<td>
<p>the follow-up time, the time period from the entry of the last
patient to the end of the trial.</p>
</td></tr>
<tr><td><code id="Sim_+3A_rate">rate</code></td>
<td>
<p>a constant accrual rate.</p>
</td></tr>
<tr><td><code id="Sim_+3A_t1">t1</code></td>
<td>
<p>the interim analysis time as given by the two-stage design.</p>
</td></tr>
<tr><td><code id="Sim_+3A_c1">c1</code></td>
<td>
<p>the critical value for the interim analysis as given by the
two-stage design.</p>
</td></tr>
<tr><td><code id="Sim_+3A_c">c</code></td>
<td>
<p>the critical value for the final analysis as given by the two-stage
design.</p>
</td></tr>
<tr><td><code id="Sim_+3A_n1">n1</code></td>
<td>
<p>the required sample size for the interim analysis as given by the
two-stage design.</p>
</td></tr>
<tr><td><code id="Sim_+3A_n">n</code></td>
<td>
<p>the required total sample size for the entire trial as given by the
two-stage design.</p>
</td></tr>
<tr><td><code id="Sim_+3A_n">N</code></td>
<td>
<p>number of trials in the simulation.</p>
</td></tr>
<tr><td><code id="Sim_+3A_restricted">restricted</code></td>
<td>
<p>if restricted = 0 (default value), unrestricted follow-up
is used. If restricted = 1 or any other values, restricted follow-up is used.</p>
</td></tr>
<tr><td><code id="Sim_+3A_seed">seed</code></td>
<td>
<p>seed for random number generation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a numeric value that is either the empirical power (when S1=S0^hr)
or the type I-error (when S1=S0).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># calculate empirical power and type I error given design parameters
Sim(shape=1, S0=0.62, S1=0.62^(0.467), x0=2, tf=2, rate=5, t1=3.0593,
    c1=-0.302, c=1.6135, n1=16, n=26, N=10000, seed=5868)
# empirical power
# 0.813

Sim(shape=1, S0=0.62, S1=0.62, x0=2, tf=2, rate=5, t1=3.0593,
    c1=-0.302, c=1.6135, n1=16, n=26, N=10000, seed=5868)
# empirical type-I error
# 0.037
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
