<!DOCTYPE html><html lang="en"><head><title>Help for package adimpro</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {adimpro}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#adimpro'><p> I/O Functions</p></a></li>
<li><a href='#adimpro.options'><p>Set parameters for graphical display</p></a></li>
<li><a href='#adjust.image'><p> Image Processing</p></a></li>
<li><a href='#awsimage'><p>Propagation-Separation approach for smoothing of 2D images</p></a></li>
<li><a href='#awsraw'><p> Smoothing and demosaicing of RAW images</p></a></li>
<li><a href='#clip.image'><p> Create an image by clipping</p></a></li>
<li><a href='#colorspace'><p> Color Space Conversion</p></a></li>
<li><a href='#combine'><p>Pixelwise operations on a pair of images</p></a></li>
<li><a href='#develop.raw'><p> Create a color image from RAW image data.</p></a></li>
<li><a href='#edges'><p> Image Processing</p></a></li>
<li><a href='#extract.image'><p>Extract image data from adimpro object</p></a></li>
<li><a href='#extract.info'><p> Extract EXIF information and additional characteristics from an</p>
object of class &quot;adimpro&quot;.</a></li>
<li><a href='#extract.ni'><p> extract information about effective size of neighborhoods</p></a></li>
<li><a href='#imganiso2D'><p> create an image that visualizes anisotropy</p></a></li>
<li><a href='#mask.create'><p>Create a mask for use within function awsimage</p></a></li>
<li><a href='#plot.adimpro'><p> I/O functions</p></a></li>
<li><a href='#rimage'>
<p>Slighty enhanced image function.</p></a></li>
<li><a href='#rotate.image'><p> Image Processing</p></a></li>
<li><a href='#segment'><p> Segmentation by AWS</p></a></li>
<li><a href='#show.image'><p> I/O functions</p></a></li>
<li><a href='#shrink.image'><p> Image Processing</p></a></li>
<li><a href='#summary.adimpro'><p> I/O functions</p></a></li>
<li><a href='#write.image'><p> I/O Functions</p></a></li>
<li><a href='#write.raw'><p> Write image RAW data as greyvalue png image</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>0.9.7.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-09-24</td>
</tr>
<tr>
<td>Title:</td>
<td>Adaptive Smoothing of Digital Images</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Karsten Tabelow &lt;tabelow@wias-berlin.de&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>awsMethods (&ge; 1.1-1), grDevices, methods</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>Image Magick (for reading non PPM format), dcraw
(for reading RAW images).</td>
</tr>
<tr>
<td>Description:</td>
<td>Implements tools for manipulation of digital
             		images and the Propagation Separation approach
             		by Polzehl and Spokoiny (2006) &lt;<a href="https://doi.org/10.1007%2Fs00440-005-0464-1">doi:10.1007/s00440-005-0464-1</a>&gt;
                        for smoothing digital images, see Polzehl and Tabelow (2007)
                        &lt;<a href="https://doi.org/10.18637%2Fjss.v019.i01">doi:10.18637/jss.v019.i01</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Copyright:</td>
<td>This package is Copyright (C) 2006-2024 Weierstrass
Institute for Applied Analysis and Stochastics.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://www.wias-berlin.de/software/imaging/">https://www.wias-berlin.de/software/imaging/</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-09-25 08:10:33 UTC; tabelow</td>
</tr>
<tr>
<td>Author:</td>
<td>Karsten Tabelow [aut, cre],
  Joerg Polzehl [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-09-25 11:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='adimpro'> I/O Functions </h2><span id='topic+read.raw'></span><span id='topic+read.image'></span><span id='topic+make.image'></span>

<h3>Description</h3>

<p>Create image objects of class &quot;adimpro&quot; from arrays, RAW-format files
and other image formats.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.raw(filename, type="PPM",
         wb="CAMERA",cspace="Adobe",interp="Bilinear",maxrange=TRUE,
         rm.ppm=TRUE, compress=TRUE)
read.image(filename, compress=TRUE)
make.image(x,compress=TRUE, gammatype="None", whitep = "D65", 
         cspace="Adobe", scale="Original",xmode="RGB")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="adimpro_+3A_filename">filename</code></td>
<td>
<p> file name </p>
</td></tr>
<tr><td><code id="adimpro_+3A_x">x</code></td>
<td>
<p> Array or matrix containing RGB or greyscale values in the
range (0,1) or (0,65535). </p>
</td></tr>
<tr><td><code id="adimpro_+3A_type">type</code></td>
<td>
<p> option settings for dcraw. default &quot;PPM&quot;. <code>type="png"</code> allows to read greyvalue png images as RAW-data (used as internal solution to
store RAW information) </p>
</td></tr>
<tr><td><code id="adimpro_+3A_wb">wb</code></td>
<td>
<p> white balance. default &quot;CAMERA&quot;</p>
</td></tr>
<tr><td><code id="adimpro_+3A_cspace">cspace</code></td>
<td>
<p> defines the output color space, default &quot;sRGB&quot; (sRGB D65), alternatives are 
&quot;RAW&quot; (Camera specific), &quot;Adobe&quot;
(Adobe 1998 D65), &quot;wGamut&quot; (Wide Gamut  D65), &quot;kodak&quot; (Kodak ProPhoto D65)
and &quot;XYZ&quot;, see manpages of dcraw.</p>
</td></tr>
<tr><td><code id="adimpro_+3A_interp">interp</code></td>
<td>
<p> defines the interpolation method, default &quot;Bilinear&quot;, Alternatives are
&quot;VNG&quot;, &quot;AHD&quot;, &quot;FourC&quot; (Four color interpolation) and &quot;Halfsize&quot;, see manpages of dcraw. 
&quot;VNG&quot; seems to provide the smallest spatial correlations.</p>
</td></tr>
<tr><td><code id="adimpro_+3A_maxrange">maxrange</code></td>
<td>
<p>If TRUE increase range of values to maximum.</p>
</td></tr>
<tr><td><code id="adimpro_+3A_rm.ppm">rm.ppm</code></td>
<td>
<p> remove intermediate tmp file? default <code>TRUE</code></p>
</td></tr>
<tr><td><code id="adimpro_+3A_gammatype">gammatype</code></td>
<td>
<p> character, determines the type of gamma correction within the image.
&quot;ITU&quot; stands for ITU-R BT.709-3 as e.g. used by <code>dcraw</code>. Alternatives recognized
within the package are &quot;None&quot;, &quot;sRGB&quot; and &quot;CIE&quot; (CIE L*). Please specify if you know
that your image is not gamma corrected using ITU-R BT.709-3.</p>
</td></tr>
<tr><td><code id="adimpro_+3A_whitep">whitep</code></td>
<td>
<p>White point in <code>xyY</code> space. Can be given as one of (character)
<code>c("A","B","C","E","D50","D55","D65","D75","F2","F7","F11")</code> or as a two element numeric
vector of chromatic <code>xy</code> coordinates. <code>"D65"</code> corresponds to the default white point of <code>"sRGB"</code> and <code>"Adobe"</code> RGB-spaces. </p>
</td></tr>
<tr><td><code id="adimpro_+3A_compress">compress</code></td>
<td>
<p> logical, determines if image data are stored in raw-format. </p>
</td></tr>
<tr><td><code id="adimpro_+3A_scale">scale</code></td>
<td>
<p><code>"Original"</code> scales to <code>(0,max(img$img))</code> if 
<code>min(img$img)&lt;0</code>, otherwise keeps the original scale.
<code>"Maxcontrast"</code> scales each channel to maximum contrast</p>
</td></tr>
<tr><td><code id="adimpro_+3A_xmode">xmode</code></td>
<td>
<p><code>xmode</code> determines how to interpret the values in <code>x</code> if <code>length(dim(x))==3</code>.
Implemented are <code>xmode="RGB"</code> (default) and <code>xmode="HSI"</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>If ImageMagick is available on the system, <code>read.image</code> reads any of
the following image file formats: c(&quot;tif&quot;, &quot;tiff&quot;, &quot;pgm&quot;, &quot;ppm&quot;,
&quot;png&quot;, &quot;pnm&quot;, &quot;gif&quot;, &quot;jpg&quot;, &quot;jpeg&quot;) converts it into a temporary &quot;pgm&quot; or
&quot;ppm&quot; file. This file is removed after reading the image.  
If ImageMagick is not available  only &quot;pgm&quot;, &quot;ppm&quot; and &quot;pnm&quot; formats
can be processed.
</p>
<p>If dcraw is available on the system, <code>read.raw</code> reads many RAW
formats. <code>type</code> sets options to dcraw: &quot;PPM&quot; sets &quot;-4&quot;, &quot;RAW&quot; sets &quot;-4
-d&quot;, &quot;HALFSIZE&quot; sets &quot;-h&quot;, &quot;INFO&quot; sets &quot;-i -v&quot;. <code>wb</code> indicates,
which white balance should be used: &quot;NONE&quot;, &quot;AUTO&quot;, &quot;CAMERA&quot;.
</p>
<p>Functions <code><a href="#topic+read.raw">read.raw</a>(file,type="RAW")</code> and <code><a href="#topic+read.image">read.image</a>(file)</code> provide identical results on png-mages. If the result is a color, greyvalued
or RAW image depends on the contend of the comment associated with the png-image.
</p>
<p><code>make.image</code> converts an appropriate 2 or 3 dimensional array to
an image object of class &quot;adimpro&quot;.
</p>


<h3>Value</h3>

<p>object of class &quot;adimpro&quot; containing the image. The object has the following components:
</p>
<table role = "presentation">
<tr><td><code>img</code></td>
<td>
<p> array containing the color values in the color space specified by <code>value$type</code>.</p>
</td></tr>
<tr><td><code>type</code></td>
<td>
<p> the color space.</p>
</td></tr>
<tr><td><code>depth</code></td>
<td>
<p> color depth, here &quot;16bit&quot;.</p>
</td></tr>
<tr><td><code>dim</code></td>
<td>
<p> vector of length 2 containing the number of pixel in horizontal and vertival direction.</p>
</td></tr>
<tr><td><code>file</code></td>
<td>
<p> the argument <code>file</code> identifying the image.</p>
</td></tr>
<tr><td><code>cspace</code></td>
<td>
<p> the type of rgb space used, as specified by <code>cspace</code>.</p>
</td></tr>
<tr><td><code>interp</code></td>
<td>
<p> interpolation applied by dcraw, as specified by <code>interp</code>.</p>
</td></tr>
<tr><td><code>gamma</code></td>
<td>
<p> has a gamma correction been applied, here FALSE for <code>read.raw</code> and TRUE for <code>read.image</code> </p>
</td></tr>
<tr><td><code>gammatype</code></td>
<td>
<p> type of gamma correction <code>read.image.</code></p>
</td></tr>
<tr><td><code>wb</code></td>
<td>
<p> type of white balance, as specified by <code>wb</code>.</p>
</td></tr>
<tr><td><code>compressed</code></td>
<td>
<p> image data are stored as raw-vector (TRUE) or array of integers (FALSE).</p>
</td></tr>
</table>


<h3>Note</h3>

<p> The function <code>read.raw</code> requires dcraw to be installed.</p>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a> </p>


<h3>See Also</h3>

 <p><code><a href="#topic+read.image">read.image</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: demo(io)
</code></pre>

<hr>
<h2 id='adimpro.options'>Set parameters for graphical display</h2><span id='topic+adimpro.options'></span>

<h3>Description</h3>

<p>On systems capabale of X11 the function sets the X11-type
(preferably &quot;Xlib&quot;). It also sets a default size for graphical displays
opended by functions from the package. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adimpro.options(xsize = NULL, ysize = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="adimpro.options_+3A_xsize">xsize</code></td>
<td>
<p> display width in pt </p>
</td></tr>
<tr><td><code id="adimpro.options_+3A_ysize">ysize</code></td>
<td>
<p> display height in pt </p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function assignes the specified values to as a list to the variable name
&quot;.adimpro&quot;. This variable is, if it exists, evaluated by several other functions.
</p>
<p>On some systems the default <code>X11.options()$type</code> &rdquo;cairo&rdquo; leads to significant slower 
image display. You may try to use <code>X11.options(type=''Xlib'')</code> instead. To automatically 
choose this option set the system environment variable <code>R_X11type</code> (<code>setenv R_X11type Xlib</code> 
or <code>export R_X11type=Xlib</code>) before loading the package.
</p>


<h3>Value</h3>

<p> returns <code>invisible(NULL)</code> </p>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a> </p>

<hr>
<h2 id='adjust.image'> Image Processing </h2><span id='topic+adjust.image'></span>

<h3>Description</h3>

<p> Color space transformations, change of white balance and exposure,
gamma correction and histogram equalization.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adjust.image(img, gammatype=NULL, cspace = NULL, whitep = NULL, 
                 temp = NULL, black=0, exposure = 1, kind = "Bradford", 
                 alg = 1, compress= TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="adjust.image_+3A_img">img</code></td>
<td>
<p> image object, class&quot;adimpro&quot;. </p>
</td></tr>
<tr><td><code id="adjust.image_+3A_gammatype">gammatype</code></td>
<td>
<p> character, determines the type of gamma correction within the image.
&quot;ITU&quot; stands for ITU-R BT.709-3 as e.g. used by <code>dcraw</code>. Alternatives recognized
within the package are &quot;None&quot;, &quot;sRGB&quot; and &quot;CIE&quot; (CIE L*). <code>NULL</code> keeps the actual setting.
<code>gammatype="histogram"</code> forces histogram equalization based on the corresponding greyvalue image.</p>
</td></tr>
<tr><td><code id="adjust.image_+3A_cspace">cspace</code></td>
<td>
<p> defines the output color space, default &quot;sRGB&quot; (sRGB D65), alternatives are 
&quot;Adobe&quot; (Adobe 1998 D65), &quot;wGamut&quot; (Wide Gamut  D65), &quot;kodak&quot; (Kodak ProPhoto D65)
&quot;xyz&quot;, &quot;yuv&quot;, &quot;yiq&quot; and &quot;hsi&quot;. <code>NULL</code> keeps the actual setting.</p>
</td></tr>
<tr><td><code id="adjust.image_+3A_whitep">whitep</code></td>
<td>
<p>White point in <code>xyY</code> space. Can be given as one of (character)
<code>c("A","B","C","E","D50","D55","D65","D75","F2","F7","F11")</code> or as a two element numeric
vector of chromatic <code>xy</code> coordinates. <code>"D65"</code> corresponds to the default white point of <code>"sRGB"</code> and <code>"Adobe"</code> RGB-spaces. <code>NULL</code> keeps the actual setting.</p>
</td></tr>
<tr><td><code id="adjust.image_+3A_temp">temp</code></td>
<td>
<p>Color temperature. Can be used to specify chromatic <code>xy</code> coordinates of the
whitepoint. Only used if <code>is.null(whitep)</code>. </p>
</td></tr>
<tr><td><code id="adjust.image_+3A_black">black</code></td>
<td>
<p>Adjustment for black color. Color values with luminance &lt;= black will be assigned to
black in RGB. Adjustment ist done in xyY space.</p>
</td></tr>
<tr><td><code id="adjust.image_+3A_exposure">exposure</code></td>
<td>
<p>Multiplicative factor for all color channels (in xyz or rgb spaces). Applied
in linear color space, i.e. if the image is gamma corrected the gamma correction is reversed first. </p>
</td></tr>
<tr><td><code id="adjust.image_+3A_kind">kind</code></td>
<td>
<p>Algorithm for chromatic adaptation. Alternatives are <code>"Bradford"</code>, <code>"VonKries"</code> and <code>"XYZscaling"</code></p>
</td></tr>
<tr><td><code id="adjust.image_+3A_alg">alg</code></td>
<td>
<p> determines the approximation for the gamma correction. Select 1 for fastest 
computation and 3 for maximum accuracy, or 2 for a compromise. </p>
</td></tr>
<tr><td><code id="adjust.image_+3A_compress">compress</code></td>
<td>
<p> logical, determines if image data are stored in raw-format. </p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function adjusts color channels and applies gamma correction (if applicable).
</p>
<p>If <code>color.par$red</code> or <code>color.par$blue</code> or <code>color.par$brightness</code> differ from 1.0 the
corresponding channels are multiplied with the provided
values. Saturated values are set to 1.
</p>
<p>If <code>img$gamma==FALSE</code>, perform gamma correction with
<code>color.par$ga</code> and <code>color.par$bp</code>. <code>alg</code> chooses between three different
computing algorithms (approximations) with increasing computation time
and precision (<code>alg</code> is 1,2, or 3).
</p>


<h3>Value</h3>

<p>Adjusted image object of class &quot;adimpro&quot;.
</p>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a></p>


<h3>See Also</h3>

 <p><code><a href="#topic+show.image">show.image</a></code>, <code><a href="#topic+write.image">write.image</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: demo(color)
</code></pre>

<hr>
<h2 id='awsimage'>Propagation-Separation approach for smoothing of 2D images</h2><span id='topic+awsimage'></span><span id='topic+awspimage'></span><span id='topic+awsaniso'></span>

<h3>Description</h3>

<p>This functions implement the Propagation-Separation approach 
(local constant and local polynomial model) for smoothing images.
Function <code>awsaniso</code> uses anisotropic location weights. This is done by evaluating local gradient estimates obtained from the actual estimated color values. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>awsimage(object, hmax=4, aws=TRUE, varmodel=NULL, ladjust=1.25,
         mask=NULL, xind = NULL, yind = NULL,
         wghts=c(1,1,1,1), scorr=TRUE,
         lkern="Plateau", plateau=NULL, homogen=TRUE, earlystop=TRUE,
         demo=FALSE, graph=FALSE,
         max.pixel=4.e2, clip = FALSE, compress=TRUE)
awspimage(object, hmax=12, aws=TRUE, degree=1, varmodel = NULL,
          ladjust=1.0, xind = NULL, yind = NULL, 
          wghts=c(1,1,1,1), scorr= TRUE,
          lkern="Plateau", plateau=NULL, homogen=TRUE, earlystop=TRUE,
          demo=FALSE, graph=FALSE, 
          max.pixel= 4.e2, clip = FALSE, compress=TRUE)
awsaniso(object, hmax = 4, g = 3, rho = 0, aws = TRUE, varmodel = NULL,
          ladjust = 1, xind = NULL, yind = NULL, wghts = c(1, 1, 1, 1), 
          scorr = TRUE, lkern = "Triangle", demo = FALSE, graph = FALSE,
          satexp = 0.25, max.pixel = 400, clip = FALSE, compress = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="awsimage_+3A_object">object</code></td>
<td>
<p>Image object, class &quot;adimpro&quot;, as from
<code>read.image</code>, <code>read.raw</code>, or <code>make.image</code>.</p>
</td></tr>
<tr><td><code id="awsimage_+3A_hmax">hmax</code></td>
<td>
<p> Maximum bandwidth to use in the iteration procedure.</p>
</td></tr>
<tr><td><code id="awsimage_+3A_g">g</code></td>
<td>
<p> Bandwidth for anisotropic smoothing gradient estimates,
preferably <code class="reqn">g \ge 3</code> for images with line type texture and small 
<code class="reqn">g \approx 1</code> for improving edges between homogeneous regions (function <code>awsaniso</code> only).</p>
</td></tr>
<tr><td><code id="awsimage_+3A_rho">rho</code></td>
<td>
<p> Regularization parameter for anisotropic smoothing gradient estimates,
preferably <code class="reqn">\rho = 0</code> for images with line type texture and large 
<code class="reqn">\rho \approx 3</code> for improving edges between homogeneous regions. (function <code>awsaniso</code> only)</p>
</td></tr>
<tr><td><code id="awsimage_+3A_aws">aws</code></td>
<td>
<p> (logical). If <code>TRUE</code> the propagation - separation
(PS) approach from Polzehl and Spokoiny (2006) is used.
<code>aws=FALSE</code> turns off the statistical penalty resulting in a
nonadaptive kernel estimate using a kernel with bandwidth <code>hmax</code>.</p>
</td></tr>
<tr><td><code id="awsimage_+3A_degree">degree</code></td>
<td>
<p> Degree of the local polynomial model for
<code>awspimage</code>. 0, 1, or 2 only.</p>
</td></tr>
<tr><td><code id="awsimage_+3A_varmodel">varmodel</code></td>
<td>
 <p><code>varmodel</code> specifies how variances are to be
estimated. This can be a homogeneous variance estimate
(<code>varmodel="None"</code>) assuming uncorrelated errors (both spatial
and between channels). Alternatives are an adaptive homogeneous or linear 
(function of the mean) variance estimate that depends on estimated
correlations and on residuals from the last iteration step. 
The default <code>varmodel=NULL</code> corresponds to
<code>varmodel == "Linear"</code> if <code>img$gamma==FALSE</code> and
<code>varmodel == "Constant"</code> otherwise.</p>
</td></tr>
<tr><td><code id="awsimage_+3A_ladjust">ladjust</code></td>
<td>
<p> adjustment factor for lambda (&gt;=1). Default values for
lambda are selected for Gaussian distributions and default settings of 
parameters <code>lkern</code> and <code>plateau</code>. Skewed or heavy
tailed distributions may require slightly larger values for lambda
to meet the propagation condition. <code>ladjust</code> allows to increase
lambda in such situations. </p>
</td></tr>
<tr><td><code id="awsimage_+3A_mask">mask</code></td>
<td>
<p> logical array of the same size as the image or
<code>NULL</code> (default). Smoothing is restricted to the smallest rectangle
including all pixel where <code>mask==TRUE</code> and restricts
computations to these pixel. This need not be a
connected area (Typical usage: smooth all bright regions)!
Only used if <code>is.null(xind)</code> <code>&amp;&amp;</code>
<code>is.null(yind)</code>. Inactive if 
<code>mask==NULL</code>. Can only be used if <code>varmodel="None"</code>. </p>
</td></tr>
<tr><td><code id="awsimage_+3A_xind">xind</code>, <code id="awsimage_+3A_yind">yind</code></td>
<td>
<p>Restrict smoothing to rectangular area defined by pixel
indices <code>xind,yind</code> in x- and y-direction. Full range
if <code>NULL</code> (default).</p>
</td></tr>
<tr><td><code id="awsimage_+3A_wghts">wghts</code></td>
<td>
<p> allows to weight the information from
different (up to 4) color channels. The weights are used in the
statistical penalty of the PS-procedure. Note that lambda-values are selected for <code>wghts==c(1,1,1,1)</code>,
please use parameter <code>ladjust</code> to set an appropriate value.</p>
</td></tr>
<tr><td><code id="awsimage_+3A_scorr">scorr</code></td>
<td>
<p> (logical). Specifies whether  spatial correlation is to be
estimated. Defaults to <code>TRUE</code>.  Is set to <code>FALSE</code> if
<code>mask</code> is not <code>NULL</code>. </p>
</td></tr>
<tr><td><code id="awsimage_+3A_lkern">lkern</code></td>
<td>
<p> Specifies the location kernel. Defaults to
&quot;Triangle&quot;, other choices are &quot;Quadratic&quot;, &quot;Cubic&quot; and &quot;Uniform&quot;.
The use of &quot;Triangle&quot; corresponds to the Epanechnicov kernel 
nonparametric kernel regression. </p>
</td></tr>
<tr><td><code id="awsimage_+3A_plateau">plateau</code></td>
<td>
<p>Extension of the plateau in the statistical kernel. Can take
values from (0,1), defaults to <code>0.25</code>. </p>
</td></tr>
<tr><td><code id="awsimage_+3A_homogen">homogen</code></td>
<td>
<p>If TRUE the algorithm determines, in each design point i, a circle of maximum radius,
such that the statistical penalty <code>s_{ij}</code> for all points j within the
circle is less than the value specified in <code>plateau</code>. In subsequent 
iteration steps the statistical penalty  for such points is set to zero. 
This is only used if <code>plateau&gt;0</code>. This results in more stable intermediate estimates and in a smoother reconstruction. <code>homogen=TRUE</code>
leads to increased memory requirements.</p>
</td></tr>
<tr><td><code id="awsimage_+3A_earlystop">earlystop</code></td>
<td>
<p>If TRUE the algorithm determines, in each design point i, a circle of minimal radius,
such that the circle includes all point j with positive weights <code>w_{ij}</code>.
if this radius is considerably smaller than the actual bandwidth then the
estimate in point i is fixed. This should considarably reduce computing time 
in case of large <code>hmax</code>.<code>earlystop=TRUE</code>
slightly increases memory requirements. </p>
</td></tr>
<tr><td><code id="awsimage_+3A_demo">demo</code></td>
<td>
<p> (logical). If <code>demo=TRUE</code> the function pauses after each
iteration. Defaults to <code>FALSE</code>.  </p>
</td></tr>
<tr><td><code id="awsimage_+3A_graph">graph</code></td>
<td>
<p> (logical). If  <code>graph=TRUE</code> intermediate results are
illustrated after each iteration step. Defaults to <code>FALSE</code>. </p>
</td></tr>
<tr><td><code id="awsimage_+3A_max.pixel">max.pixel</code></td>
<td>
<p> Maximum dimension of images for display
if <code>graph=TRUE</code>. If the true dimension is larger, the 
images are downscaled for display. See also <code><a href="#topic+show.image">show.image</a></code>.</p>
</td></tr>
<tr><td><code id="awsimage_+3A_satexp">satexp</code></td>
<td>
<p>exponent used for scaling saturation in anisotropy visualization (function <code>awsaniso</code> only)</p>
</td></tr>
<tr><td><code id="awsimage_+3A_clip">clip</code></td>
<td>
<p> (logical). If <code>TRUE</code> a clipping region is selected, see
<code><a href="#topic+clip.image">clip.image</a></code>, using the information contained in
<code>xind</code> or <code>yind</code>. If both are <code>NULL</code> a clipping
region can be defined by left mouse clicks. The image <code>object</code>
is reduced to the clipping region before smoothing.</p>
</td></tr>
<tr><td><code id="awsimage_+3A_compress">compress</code></td>
<td>
<p> logical, determines if image data are stored in raw-format. </p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function implements the Propagation-Separation (PS) approach to 
nonparametric smoothing (formerly introduced as Adaptive Weights Smoothing) 
for varying coefficient likelihood (awsimage) and local polynomial
(awspimage) models for greyscale and color images. 
</p>
<p>The distribution of grey (color) values is considered to be
Gaussian. Noise can be colored.
</p>
<p>The numerical complexity of the procedure is mainly determined by
<code>hmax</code>. The number of iterations is <code>2*log(hmax)/log(1.25)</code>.
Comlexity in each iteration step is <code>Const*hakt*n</code> with <code>hakt</code>
being the actual bandwith in the iteration step and <code>n</code> the number of pixels. 
<code>hmax</code> determines the maximal possible variance reduction.
</p>
<p>All other parameters of the approach only depend on the specified
values for <code>skern/lkern</code> and are therefore set internally to
meaningful default values.
</p>
<p>For a detailed description of the procedure see references below.
</p>
<p>The script used to control the values of parameter <code>lambda</code> is stored in
directory inst/adjust.
</p>


<h3>Value</h3>

<p> Object of class <code>"adimpro"</code>
</p>
<table role = "presentation">
<tr><td><code>img</code></td>
<td>
<p>Contains the reconstructed image. </p>
</td></tr>
<tr><td><code>ni</code></td>
<td>
<p>Contains the sum of weights, i.e. <code>trace(W_i)</code>, in all grid points <code>i</code>.</p>
</td></tr>
<tr><td><code>ni0</code></td>
<td>
<p>Contains the maximum sum of weights for an nonadaptive kernel estimate with the same bandwidth.</p>
</td></tr>
<tr><td><code>hmax</code></td>
<td>
<p>Bandwidth used in the last iteration.</p>
</td></tr>
<tr><td><code>call</code></td>
<td>
<p>The arguments of the function call.</p>
</td></tr>
<tr><td><code>varcoef</code></td>
<td>
<p>Estimated coefficients in the variance model for the
color channels, if <code>varmodel</code> is &quot;Constant&quot; or &quot;Linear&quot;. </p>
</td></tr>
<tr><td><code>wghts</code></td>
<td>
<p>The weights used for the color channels.</p>
</td></tr>
<tr><td><code>scorr</code></td>
<td>
<p>Estimated spatial correlations for each channel, if <code>scorr=TRUE</code> </p>
</td></tr>
<tr><td><code>chcorr</code></td>
<td>
<p>Estimated correlations between
color channels, if <code>scorr=TRUE</code> </p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a></p>


<h3>References</h3>

<p>Polzehl and Spokoiny (2006). Propagation-Separation Approach for Local
Likelihood Estimation. Probability Theory and Related Fields. 3 (135)
335 - 362.
</p>
<p>Polzehl and Spokoiny (2005). Structural adaptive smoothing
adaptive smoothing by
Propagation-Separation-methods. WIAS-Preprint No. 1068.
</p>
<p>Polzehl, J. and Tabelow, K. (2007). Adaptive smoothing of digital
images, Journal of Statistical Software 19 (1). 
</p>


<h3>See Also</h3>

 <p><code><a href="#topic+read.image">read.image</a></code>, <code><a href="#topic+read.raw">read.raw</a></code>, <code><a href="#topic+make.image">make.image</a></code>, <code><a href="#topic+show.image">show.image</a></code>, <code><a href="#topic+clip.image">clip.image</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: demo(awsimage)
</code></pre>

<hr>
<h2 id='awsraw'> Smoothing and demosaicing of RAW images </h2><span id='topic+awsraw'></span>

<h3>Description</h3>

<p>The function integrates smoothing and demosaicing of RAW image data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>awsraw(object, hmax = 4, aws = TRUE, wb = c(1, 1, 1), cspace = "Adobe", 
       ladjust = 1, maxrange=TRUE, lkern = "Triangle", graph = FALSE, 
       max.pixel = 400, compress = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="awsraw_+3A_object">object</code></td>
<td>
<p> an object of class <code>adimpro</code> containing the RAW image data. 
See <code><a href="#topic+read.raw">read.raw</a></code> for creating such objects.  </p>
</td></tr>
<tr><td><code id="awsraw_+3A_hmax">hmax</code></td>
<td>
<p> maximal bandwidth to use in the smoothing algorithm.</p>
</td></tr>
<tr><td><code id="awsraw_+3A_aws">aws</code></td>
<td>
<p> use adaptive weights if <code>aws==TRUE</code>.</p>
</td></tr>
<tr><td><code id="awsraw_+3A_wb">wb</code></td>
<td>
<p> Vector containing factors for the three color chanels, allows to change the white balance. </p>
</td></tr>
<tr><td><code id="awsraw_+3A_cspace">cspace</code></td>
<td>
<p> Color space of the result,  </p>
</td></tr>
<tr><td><code id="awsraw_+3A_ladjust">ladjust</code></td>
<td>
<p> Factor for the critical value <code class="reqn">\lambda</code>. Defaults to <code>1</code>, smaller values 
increase sensitivity but may result in isolated noisy pixel. Values larger than <code>1</code> give smoother up to cartoon
like results.</p>
</td></tr>
<tr><td><code id="awsraw_+3A_maxrange">maxrange</code></td>
<td>
<p>If TRUE increase range of values to maximum.</p>
</td></tr>
<tr><td><code id="awsraw_+3A_lkern">lkern</code></td>
<td>
<p> Specifies the location kernel. Defaults to
&quot;Triangle&quot;, other choices are &quot;Quadratic&quot;, &quot;Cubic&quot; and &quot;Uniform&quot;.
The use of &quot;Triangle&quot; corresponds to the Epanechnicov kernel 
nonparametric kernel regression. </p>
</td></tr>
<tr><td><code id="awsraw_+3A_graph">graph</code></td>
<td>
<p> (logical). If  <code>graph=TRUE</code> intermediate results are
illustrated after each iteration step. Defaults to <code>FALSE</code>. </p>
</td></tr>
<tr><td><code id="awsraw_+3A_max.pixel">max.pixel</code></td>
<td>
<p> Maximum dimension of images for display
if <code>graph=TRUE</code>. If the true dimension is larger, the 
images are downscaled for display. See also <code><a href="#topic+show.image">show.image</a></code>.</p>
</td></tr>
<tr><td><code id="awsraw_+3A_compress">compress</code></td>
<td>
<p> logical, determines if image data are stored in raw-format. </p>
</td></tr>
</table>


<h3>Details</h3>

<p>Adaptive smoothing is performed on the original RAW data, restricting positive weights to
pixel corresponding to the same color channel. Noise is assumed to have a variance 
depending linearly on the mean. Weights are determined by weigthed distances between 
color vectors. These color vectors are obtained by demosaicing that is applied to the smoothed
RAW data after each iteration of the smoothing algorithm. The demosaicing algorithm is 
a 3D generalized median, see <code>method="Median4"</code> in function <code><a href="#topic+develop.raw">develop.raw</a></code>.
</p>


<h3>Value</h3>

<p>Object of class <code>"adimpro"</code>
</p>
<table role = "presentation">
<tr><td><code>img</code></td>
<td>
<p>Contains the reconstructed image. </p>
</td></tr>
<tr><td><code>ni</code></td>
<td>
<p>Contains the sum of weights, i.e. <code>trace(W_i)</code>, in all grid points <code>i</code>.</p>
</td></tr>
<tr><td><code>ni0</code></td>
<td>
<p>Contains the maximum sum of weights for an nonadaptive kernel estimate with the same bandwidth.</p>
</td></tr>
<tr><td><code>hmax</code></td>
<td>
<p>Bandwidth used in the last iteration.</p>
</td></tr>
<tr><td><code>call</code></td>
<td>
<p>The arguments of the function call.</p>
</td></tr>
<tr><td><code>varcoef</code></td>
<td>
<p>Estimated coefficients in the linear variance model for the
color channels.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a></p>


<h3>References</h3>

<p>   Polzehl, J. and Tabelow, K. (2007). Adaptive smoothing of digital
images, Journal of Statistical Software 19 (1). </p>


<h3>See Also</h3>

 <p><code><a href="#topic+read.raw">read.raw</a></code>,<code><a href="#topic+awsimage">awsimage</a></code>, <code><a href="#topic+make.image">make.image</a></code>, <code><a href="#topic+show.image">show.image</a></code>, <code><a href="#topic+clip.image">clip.image</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: demo(raw)
</code></pre>

<hr>
<h2 id='clip.image'> Create an image by clipping </h2><span id='topic+clip.image'></span>

<h3>Description</h3>

<p>The function allows to define a clipping region by arguments <code>xind</code> and <code>yind</code>
or interactively by mouseclicks. A new image is created by cutting out 
the clipping region.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clip.image(img, xind = NULL, yind = NULL, compress=NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clip.image_+3A_img">img</code></td>
<td>
<p> Object of class &quot;adimpro&quot; as created by
<code><a href="#topic+read.image">read.image</a></code>, <code><a href="#topic+read.raw">read.raw</a></code>
or <code><a href="#topic+make.image">make.image</a></code>. </p>
</td></tr>
<tr><td><code id="clip.image_+3A_xind">xind</code></td>
<td>
 <p><code>xind</code> defines the horizontal extension of the clipping region.  </p>
</td></tr>
<tr><td><code id="clip.image_+3A_yind">yind</code></td>
<td>
 <p><code>yind</code> defines the vertical extension of the clipping region. </p>
</td></tr>
<tr><td><code id="clip.image_+3A_compress">compress</code></td>
<td>
<p>image data are stored as raw-vector (TRUE) or array of integers (FALSE). <code>compress=NULL</code> 
keeps the format used in img. </p>
</td></tr>
<tr><td><code id="clip.image_+3A_...">...</code></td>
<td>
<p> additional arguments to <code><a href="#topic+show.image">show.image</a></code> can be
passed here. </p>
</td></tr>
</table>


<h3>Details</h3>

<p>If both <code>xind==NULL</code> and <code>yind==NULL</code>, <code><a href="#topic+show.image">show.image</a></code> is called and the clipping region
can be set by two left mouse clicks to opposite corners. 
</p>


<h3>Value</h3>

<p> An object of class &quot;adimpro&quot;. </p>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a></p>


<h3>See Also</h3>

 <p><code><a href="#topic+read.image">read.image</a></code>, <code><a href="#topic+read.raw">read.raw</a></code>, <code><a href="#topic+make.image">make.image</a></code>, <code><a href="#topic+awsimage">awsimage</a></code>, <code><a href="#topic+awspimage">awspimage</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: demo(manipulate)
</code></pre>

<hr>
<h2 id='colorspace'> Color Space Conversion </h2><span id='topic+rgb2grey'></span><span id='topic+rgb2hsi'></span><span id='topic+rgb2yuv'></span><span id='topic+rgb2yiq'></span><span id='topic+rgb2xyz'></span><span id='topic+hsi2rgb'></span><span id='topic+yuv2rgb'></span><span id='topic+yiq2rgb'></span><span id='topic+xyz2rgb'></span>

<h3>Description</h3>

<p>Color space conversion functions for RGB, YUV, YIQ, XYZ, and HSI.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rgb2grey(obj, compress=TRUE)
rgb2hsi(obj)
hsi2rgb(obj, cspace = "Adobe", compress=TRUE)
rgb2yuv(obj)
yuv2rgb(obj, cspace = "Adobe", compress=TRUE)
rgb2yiq(obj)
yiq2rgb(obj, cspace = "Adobe", compress=TRUE)
rgb2xyz(obj)
xyz2rgb(obj, cspace = "Adobe", black= 0, exposure=1, compress=TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="colorspace_+3A_obj">obj</code></td>
<td>
<p>an object of class &quot;adimpro&quot;, <code>obj$type</code> should coincide with 
the first three letters of the function name, that is <code>obj$img</code> containes 
color values in the corresponding color space.</p>
</td></tr>
<tr><td><code id="colorspace_+3A_cspace">cspace</code></td>
<td>
<p>Target color space, one of <code>c("sRGB","Adobe","wGamut","kodak","xyz")</code>.
For function <code>xyz2rgb</code> also <code>c("yuv","yiq")</code> are implemented.</p>
</td></tr>
<tr><td><code id="colorspace_+3A_exposure">exposure</code></td>
<td>
<p>Multiplicative factor for all color channels (in xyz or rgb spaces). Applied
in linear color space, i.e. if the image is gamma corrected the gamma correction is reversed first. </p>
</td></tr>
<tr><td><code id="colorspace_+3A_black">black</code></td>
<td>
<p>Adjustment for black color. Color values with luminance &lt;= black will be assigned to
black in RGB.</p>
</td></tr>
<tr><td><code id="colorspace_+3A_compress">compress</code></td>
<td>
<p> logical, determines if image data are returned in raw-format. </p>
</td></tr>
</table>


<h3>Details</h3>

<p>The functions convert an image <code>obj</code> from one color space into
another. 
</p>
<p><code>rgb2grey</code> converts from RGB to GREYSCALE.
</p>
<p><code>rgb2hsi</code> and <code>hsi2rgb</code> convert from RGB to HSI and vice
versa.
</p>
<p><code>rgb2yuv</code> and <code>yuv2rgb</code> convert from RGB to YUV and vice
versa.
</p>
<p><code>rgb2yiq</code> and <code>yiq2rgb</code> convert from RGB to YIQ and vice
versa.
</p>
<p><code>rgb2xyz</code> and <code>xyz2rgb</code> convert from RGB to CIE XYZ and vice
versa.
</p>
<p>Conversion to <code>XYZ</code>, <code>YIQ</code>, <code>YUV</code> and <code>HSI</code>
involves an inverse gamma correction if required.
</p>


<h3>Value</h3>

<p>an object of class &quot;adimpro&quot;, with <code>value$type</code> specifying the color space
(last three letters of the function name or 'greyscale' for <code>rgb2grey</code>)
and <code>value$img</code> containing the color values. 
</p>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a></p>


<h3>References</h3>

<p>Gonzalez, R.C., and Woods, R.E. (2002). Digital Image
Processing. Prentice Hall. 
</p>
<p>Polzehl, J., and Tabelow, K. (2007). Adaptive smoothing of digital
images, Journal of Statistical Software 19 (1). 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: demo(color)
</code></pre>

<hr>
<h2 id='combine'>Pixelwise operations on a pair of images</h2><span id='topic+combine'></span>

<h3>Description</h3>

<p>The function allows to perform pixelwise operations, specified by a
supplied function, on a pair of images. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>combine(img1, img2, fun = "+", rescale = TRUE, compress = TRUE, gammatype = "None",
        whitep = "D65", cspace = "Adobe", xmode = "RGB", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="combine_+3A_img1">img1</code></td>
<td>
<p> image, object of class adimpro </p>
</td></tr>
<tr><td><code id="combine_+3A_img2">img2</code></td>
<td>
<p> image, object of class adimpro, need to have the same dimension as img1 </p>
</td></tr>
<tr><td><code id="combine_+3A_fun">fun</code></td>
<td>
<p> A function or primitive of two (or more) arguments
specifying the operation. The first argument corresponds to 
grey/color-values in img1, the second to img2. Auxiliary parameters can passed throug <code>"..."</code> </p>
</td></tr>
<tr><td><code id="combine_+3A_rescale">rescale</code></td>
<td>
<p> logical: if TRUE the resulting image is rescaled
to fit into the range of possible grey/color-values, if FALSE
values outside the range are truncated. </p>
</td></tr>
<tr><td><code id="combine_+3A_compress">compress</code></td>
<td>
<p> logical, determines if image data are stored in raw-format. </p>
</td></tr>
<tr><td><code id="combine_+3A_gammatype">gammatype</code></td>
<td>
<p> character, determines the type of gamma correction within the image.
&quot;ITU&quot; stands for ITU-R BT.709-3 as e.g. used by <code>dcraw</code>. Alternatives recognized
within the package are &quot;None&quot;, &quot;sRGB&quot; and &quot;CIE&quot; (CIE L*). Please specify if you know
that your image is not gamma corrected using ITU-R BT.709-3.</p>
</td></tr>
<tr><td><code id="combine_+3A_whitep">whitep</code></td>
<td>
<p>White point in <code>xyY</code> space. Can be given as one of (character)
<code>c("A","B","C","E","D50","D55","D65","D75","F2","F7","F11")</code> or as a two element numeric
vector of chromatic <code>xy</code> coordinates. <code>"D65"</code> corresponds to the default white point of <code>"sRGB"</code> and <code>"Adobe"</code> RGB-spaces. </p>
</td></tr>
<tr><td><code id="combine_+3A_cspace">cspace</code></td>
<td>
<p> defines the output color space, default &quot;sRGB&quot; (sRGB D65), alternatives are 
&quot;RAW&quot; (Camera specific), &quot;Adobe&quot;
(Adobe 1998 D65), &quot;wGamut&quot; (Wide Gamut  D65), &quot;kodak&quot; (Kodak ProPhoto D65)
and &quot;XYZ&quot;, see manpages of dcraw.</p>
</td></tr>
<tr><td><code id="combine_+3A_xmode">xmode</code></td>
<td>
<p><code>xmode</code> determines how to interpret the values in <code>x</code> if <code>length(dim(x))==3</code>.
Implemented are <code>xmode="RGB"</code> (default) and <code>xmode="HSI"</code></p>
</td></tr>
<tr><td><code id="combine_+3A_...">...</code></td>
<td>
<p> additional parameters for function <code>fun</code> </p>
</td></tr>
</table>


<h3>Details</h3>

<p>There are two mayor applications for this function. First it allows to add noise to an image by first creating an image that contains the noise  and then adding this image using <code>fun="+"</code>. Second it offers a way to replace parts of an image, see examples.
</p>


<h3>Value</h3>

<p>object of class &quot;adimpro&quot; containing the image. The object has the following components:
</p>
<table role = "presentation">
<tr><td><code>img</code></td>
<td>
<p> array containing the color values in the color space specified by <code>value$type</code>.</p>
</td></tr>
<tr><td><code>type</code></td>
<td>
<p> the color space.</p>
</td></tr>
<tr><td><code>depth</code></td>
<td>
<p> color depth, here &quot;16bit&quot;.</p>
</td></tr>
<tr><td><code>dim</code></td>
<td>
<p> vector of length 2 containing the number of pixel in horizontal and vertival direction.</p>
</td></tr>
<tr><td><code>file</code></td>
<td>
<p> the argument <code>file</code> identifying the image.</p>
</td></tr>
<tr><td><code>cspace</code></td>
<td>
<p> the type of rgb space used, as specified by <code>cspace</code>.</p>
</td></tr>
<tr><td><code>interp</code></td>
<td>
<p> interpolation applied by dcraw, as specified by <code>interp</code>.</p>
</td></tr>
<tr><td><code>gamma</code></td>
<td>
<p> has a gamma correction been applied, here FALSE for <code>read.raw</code> and TRUE for <code>read.image</code></p>
</td></tr>
<tr><td><code>gammatype</code></td>
<td>
<p> type of gamma correction <code>read.image.</code></p>
</td></tr>
<tr><td><code>wb</code></td>
<td>
<p> type of white balance, as specified by <code>wb</code>.</p>
</td></tr>
<tr><td><code>compressed</code></td>
<td>
<p> image data are stored as raw-vector (TRUE) or array of integers (FALSE).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a> </p>


<h3>See Also</h3>

 <p><code><a href="#topic+make.image">make.image</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: demo(combine)
</code></pre>

<hr>
<h2 id='develop.raw'> Create a color image from RAW image data. </h2><span id='topic+develop.raw'></span>

<h3>Description</h3>

<p>The function generates a color image from RAW image data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>develop.raw(object, method = "BILINEAR", wb = c(1, 1, 1), maxrange= TRUE, compress = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="develop.raw_+3A_object">object</code></td>
<td>
<p> An object of class <code>"adimpro"</code> containing RAW image data, e.g. created by function <code><a href="#topic+read.raw">read.raw</a></code>. Such an object is characterized by <code>object$type=="RAW"</code>. </p>
</td></tr>
<tr><td><code id="develop.raw_+3A_method">method</code></td>
<td>
<p> Method to fill missing color values. Currently implemented are <code>method="HALF"</code> (reduce image size by factor of 2),
<code>method="FULL"</code> (use color from neighbor within (2x2) Bayer mask)),
<code>method="BILINEAR"</code> (bilinear interpolation), <code>method="Median4"</code> and <code>method="Median16"</code>, the latter two being based on L1-MM over shifted Bayer masks. <code>method="Median16"</code> delivers much smoother results, but is considerably slower then the other methods. </p>
</td></tr>
<tr><td><code id="develop.raw_+3A_wb">wb</code></td>
<td>
<p> numerical vector of length 3 containing multiplicative factors for the three color channels. </p>
</td></tr>
<tr><td><code id="develop.raw_+3A_maxrange">maxrange</code></td>
<td>
<p>If TRUE increase range of values to maximum.</p>
</td></tr>
<tr><td><code id="develop.raw_+3A_compress">compress</code></td>
<td>
<p> logical, determines if image data are stored as <code>raw</code>.</p>
</td></tr> 
</table>


<h3>Details</h3>

<p>RAW image data usually contain only one color value at each pixel,
with colors arranged in a so called Bayer mask. Converting RAW images into color images requires to fill the missing entries in the color
channels. 
</p>


<h3>Value</h3>

<p>object of class &quot;adimpro&quot; containing the image.
</p>


<h3>Note</h3>

<p> The function requires dcraw to be installed.</p>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a> </p>


<h3>See Also</h3>

 <p><code><a href="#topic+read.image">read.image</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: demo(io)
## Not run: demo(raw)
</code></pre>

<hr>
<h2 id='edges'> Image Processing </h2><span id='topic+edges'></span>

<h3>Description</h3>

<p>Edge detection using Laplacian, Sobel, or Robert Cross filter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edges(img, type = "Laplacian", ltype=1, abs=FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="edges_+3A_img">img</code></td>
<td>
<p> an object of class &quot;adimpro&quot;. </p>
</td></tr>
<tr><td><code id="edges_+3A_type">type</code></td>
<td>
<p> type of edges detection filter. &quot;Laplacian&quot; (default), &quot;Sobel&quot; , or &quot;Robertcross&quot;. </p>
</td></tr>
<tr><td><code id="edges_+3A_ltype">ltype</code></td>
<td>
<p> type of laplacian filter. 1,2,3, or 4 </p>
</td></tr>
<tr><td><code id="edges_+3A_abs">abs</code></td>
<td>
<p> take absolute values of results. This has only an effect for 
<code>tyoe="Laplacian"</code> </p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function applies the  Laplacian, Sobel, or Robert Cross filter to
the input image <code>img</code>. The filter is applied to each color channel separately. <code>ltype</code> determines
the different matrices for Laplacian filter used in the
literature. <code>ltype == 1</code> will use:
</p>
<p><code>conv &lt;- matrix(c(-1,-1,-1,-1,-1,
    -1,-1,-1,-1,-1,
    -1,-1,24,-1,-1,
    -1,-1,-1,-1,-1,
    -1,-1,-1,-1,-1),5,5)</code>
</p>
<p><code>ltype == 2</code> will use:
</p>
<p><code>conv &lt;- matrix(c(0,-1,0,-1,4,-1,0,-1,0), 3, 3)</code>
</p>
<p><code>ltype == 3</code> will use:
</p>
<p><code>conv &lt;- matrix(c(-1,-1,-1,-1,8,-1,-1,-1,-1), 3, 3)</code>
</p>
<p><code>ltype == 4</code> (default) will use:
</p>
<p><code>conv &lt;- matrix(c(1,-2,1,-2,4,-2,1,-2,1), 3, 3)</code>  
</p>


<h3>Value</h3>

<p>Array containing the values for the edge detector in each pixel and 
color channel.
</p>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a> </p>


<h3>References</h3>

<p>Gonzalez, R.C., and Woods, R.E. (2002). Digital Image
Processing. Prentice Hall. 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: demo(manipulate)
## Not run: demo(awspimage)
</code></pre>

<hr>
<h2 id='extract.image'>Extract image data from adimpro object</h2><span id='topic+extract.image'></span>

<h3>Description</h3>

<p>Extract image data from adimpro object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract.image(object)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="extract.image_+3A_object">object</code></td>
<td>
<p> adimpro object </p>
</td></tr>
</table>


<h3>Value</h3>

<p>array or matrix of image data
</p>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a></p>


<h3>See Also</h3>

  <p><code><a href="#topic+make.image">make.image</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: demo(io)
## Not run: demo(manipulate)
</code></pre>

<hr>
<h2 id='extract.info'> Extract EXIF information and additional characteristics from an 
object of class &quot;adimpro&quot;. </h2><span id='topic+extract.info'></span>

<h3>Description</h3>

<p>Extract EXIF information and additional characteristics from an 
object of class &quot;adimpro&quot;. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract.info(object, what = "Bayer")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="extract.info_+3A_object">object</code></td>
<td>
<p> an object of class &quot;adimpro&quot; or a character string that
was written as a comment by functions <code><a href="#topic+write.image">write.image</a></code> or 
<code><a href="#topic+write.raw">write.raw</a></code>. </p>
</td></tr>
<tr><td><code id="extract.info_+3A_what">what</code></td>
<td>
<p> A character string specifying which information is to be extracted. Currently implemented are <code>"Bayer"</code> (Bayer mask), <code>"Daymulti"</code> (Daylight multiplyers), <code>"Cammulti"</code> (camera multipliers), <code>"Camera"</code> (camera model), <code>"Isize"</code> (Image size), <code>"Osize"</code> (image output size), <code>"File"</code> (source filename), <code>"Interpolation"</code>(Interpolation used to convert RAW to RGB), <code>"Gammatype"</code> (type of gamma correction), <code>"WhiteBalance"</code> (white balance), <code>"WhitePoint"</code> (white point), <code>"Type"</code> (image type), <code>"xind"</code> (horizontal subindex  used by function <code><a href="#topic+clip.image">clip.image</a></code>) and <code>"yind"</code> (vertical subindex  used by function <code><a href="#topic+clip.image">clip.image</a></code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is mainly used to access and manipulate information when reading or developing images. A more comprehensive overview is provided by function <code><a href="base.html#topic+summary">summary</a></code>.
</p>


<h3>Value</h3>

<p>A character string or integer vector depending on the argument <code>"what"</code>.
</p>


<h3>Note</h3>

<p> ImageMagick has to be installed on the system to write &quot;tif&quot;, &quot;tiff&quot;,
&quot;png&quot;, &quot;gif&quot;, &quot;jpg&quot; or &quot;jpeg&quot; files.</p>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a></p>


<h3>See Also</h3>

 <p><code><a href="#topic+read.raw">read.raw</a></code>, <code><a href="#topic+read.image">read.image</a></code>, <code><a href="#topic+develop.raw">develop.raw</a></code>, <code><a href="base.html#topic+summary">summary</a></code> </p>

<hr>
<h2 id='extract.ni'> extract information about effective size of neighborhoods</h2><span id='topic+extract.ni'></span>

<h3>Description</h3>

<p>The function allows to extract information about the effective
size of neighborhoods used in each pixel from objects 
generated by <code><a href="#topic+awsimage">awsimage</a></code> or <code><a href="#topic+awspimage">awspimage</a></code>. 
The result is converted into a greyscale image. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract.ni(object, gammatype = "ITU", compress = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="extract.ni_+3A_object">object</code></td>
<td>
<p> object returned from <code><a href="#topic+awsimage">awsimage</a></code> or <code><a href="#topic+awspimage">awspimage</a></code>. </p>
</td></tr>
<tr><td><code id="extract.ni_+3A_gammatype">gammatype</code></td>
<td>
<p>character, determines the type of gamma correction within the image.
&quot;ITU&quot; stands for ITU-R BT.709-3 as e.g. used by <code>dcraw</code>. Alternatives recognized
within the package are &quot;None&quot;, &quot;sRGB&quot; and &quot;CIE&quot; (CIE L*).  </p>
</td></tr>
<tr><td><code id="extract.ni_+3A_compress">compress</code></td>
<td>
<p> logical, if <code>TRUE</code> the returned image will be compressed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p> an object of class &quot;adimpro&quot;. 
</p>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a></p>


<h3>See Also</h3>

 <p><code><a href="#topic+awsimage">awsimage</a></code>, <code><a href="#topic+awspimage">awspimage</a></code>, <code><a href="#topic+show.image">show.image</a></code>, <code><a href="#topic+write.image">write.image</a></code> </p>

<hr>
<h2 id='imganiso2D'> create an image that visualizes anisotropy</h2><span id='topic+imganiso2D'></span>

<h3>Description</h3>

<p>The function creates an object of class <code>adimpro</code> that
visualizes anisotropy information  using the HSI color space for 
main direction of anisotropy (H), <code>maximum eigenvalue^satexp</code> (S)
and log(excentricity) (I).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>imganiso2D(x, satexp = 0.25, g=3, rho=0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="imganiso2D_+3A_x">x</code></td>
<td>
<p> a field of 2D tensors (Dimension <code>c(3,n1,n2)</code>) or an object of class <code>"adimpro"</code>.  </p>
</td></tr>
<tr><td><code id="imganiso2D_+3A_satexp">satexp</code></td>
<td>
<p> exponent for maximum eigenvalue in saturation channel. Determines the contrast in this channel.</p>
</td></tr>
<tr><td><code id="imganiso2D_+3A_g">g</code></td>
<td>
<p> Bandwidth for anisotropic smoothing gradient estimates,
preferably <code class="reqn">g \ge 3</code> for images with line type texture and small 
<code class="reqn">g \approx 1</code> for improving edges between homogeneous regions. </p>
</td></tr>
<tr><td><code id="imganiso2D_+3A_rho">rho</code></td>
<td>
<p> Regularization parameter for anisotropic smoothing gradient estimates,
preferably <code class="reqn">\rho = 0</code> for images with line type texture and large 
<code class="reqn">\rho \approx 3*variance</code> for improving edges between homogeneous regions. </p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object (image) of class <code>adimpro</code>.
</p>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a></p>


<h3>References</h3>

<p>Polzehl, J. and Tabelow, K. (2007). Adaptive smoothing of digital
images, Journal of Statistical Software 19 (1). 
</p>


<h3>See Also</h3>

 <p><code><a href="#topic+awsaniso">awsaniso</a></code>,<code><a href="#topic+read.image">read.image</a></code>, <code><a href="#topic+read.raw">read.raw</a></code>, <code><a href="#topic+make.image">make.image</a></code>, <code><a href="#topic+show.image">show.image</a></code>, <code><a href="#topic+clip.image">clip.image</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: demo(awsimage)
## Not run: demo(manipulate)
</code></pre>

<hr>
<h2 id='mask.create'>Create a mask for use within function awsimage</h2><span id='topic+mask.create'></span>

<h3>Description</h3>

<p> Select part of image according to greyscale (or color) value.</p>


<h3>Usage</h3>

<pre><code class='language-R'>mask.create(img,
            range1 = c(0, 1), range2 = c(0, 1), range3 = c(0, 1),
            locate = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mask.create_+3A_img">img</code></td>
<td>
<p> Image object of class &quot;adimpro&quot;, usually the result
returned from <code>read.image</code>, <code>read.raw</code>, or <code>make.image</code>.  </p>
</td></tr>
<tr><td><code id="mask.create_+3A_range1">range1</code></td>
<td>
<p> Range of gray values or values in the
first color channel. <code>mask</code> is set to <code>FALSE</code> for all
pixel with values outside this range. Defaults to <code>c(0,1)</code>.  </p>
</td></tr>
<tr><td><code id="mask.create_+3A_range2">range2</code></td>
<td>
<p> Range of  values in the second color
channel. <code>mask</code> is set to <code>FALSE</code> for all pixel with
values outside this range. Defaults to <code>c(0,1)</code>.  </p>
</td></tr>
<tr><td><code id="mask.create_+3A_range3">range3</code></td>
<td>
<p> Range of  values in the third color
channel. <code>mask</code> is set to <code>FALSE</code> for all pixel with
values outside this range. Defaults to <code>c(0,1)</code>.  </p>
</td></tr>
<tr><td><code id="mask.create_+3A_locate">locate</code></td>
<td>
<p> (logical). If <code>TRUE</code> (default), the image is displayed and
two opposite corners of a rectangular region can be selected using the
mouse (call of <code>locator(2)</code>). </p>
</td></tr>
</table>


<h3>Details</h3>

<p> Function to create a mask. The returned object <code>mask</code> can
be used to restrict computations in function <code><a href="#topic+awsimage">awsimage</a></code> to
a region characterized by <code>mask==TRUE</code>.
</p>


<h3>Value</h3>

<p>logical matrix of image dimension. 
</p>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a></p>


<h3>References</h3>

<p> Polzehl, J., and Tabelow, K. (2007). Adaptive smoothing of
digital images, Journal of Statistical Software 19 (1). 
</p>


<h3>See Also</h3>

 <p><code><a href="#topic+awsimage">awsimage</a></code>  </p>

<hr>
<h2 id='plot.adimpro'> I/O functions </h2><span id='topic+plot.adimpro'></span>

<h3>Description</h3>

<p>Visualize image data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'adimpro'
plot(x, new=FALSE, gammatype = NULL, cspace = NULL,
                 whitep = NULL, temp = NULL, black = 0, exposure = 1,...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.adimpro_+3A_x">x</code></td>
<td>
<p>image object of class &quot;adimpro&quot; </p>
</td></tr>
<tr><td><code id="plot.adimpro_+3A_new">new</code></td>
<td>
<p> should new X11() be opened? default <code>FALSE</code></p>
</td></tr>
<tr><td><code id="plot.adimpro_+3A_gammatype">gammatype</code></td>
<td>
<p> character, determines the type of gamma correction within the image.
&quot;ITU&quot; stands for ITU-R BT.709-3 as e.g. used by <code>dcraw</code>. Alternatives recognized
within the package are &quot;None&quot;, &quot;sRGB&quot; and &quot;CIE&quot; (CIE L*). <code>NULL</code> keeps the actual setting.
<code>gammatype="histogram"</code> forces histogram equalization based on the corresponding greyvalue image.</p>
</td></tr>
<tr><td><code id="plot.adimpro_+3A_cspace">cspace</code></td>
<td>
<p> defines the output color space, default &quot;sRGB&quot; (sRGB D65), alternatives are 
&quot;Adobe&quot; (Adobe 1998 D65), &quot;wGamut&quot; (Wide Gamut  D65), &quot;kodak&quot; (Kodak ProPhoto D65)
&quot;xyz&quot;, &quot;yuv&quot;, &quot;yiq&quot; and &quot;hsi&quot;. <code>NULL</code> keeps the actual setting.</p>
</td></tr>
<tr><td><code id="plot.adimpro_+3A_whitep">whitep</code></td>
<td>
<p>White point in <code>xyY</code> space. Can be given as one of (character)
<code>c("A","B","C","E","D50","D55","D65","D75","F2","F7","F11")</code> or as a two element numeric
vector of chromatic <code>xy</code> coordinates. <code>"D65"</code> corresponds to the default white point of <code>"sRGB"</code> and <code>"Adobe"</code> RGB-spaces. <code>NULL</code> keeps the actual setting.</p>
</td></tr>
<tr><td><code id="plot.adimpro_+3A_temp">temp</code></td>
<td>
<p>Color temperature. Can be used to specify chromatic <code>xy</code> coordinates of the
whitepoint. Only used if <code>is.null(whitep)</code>. </p>
</td></tr>
<tr><td><code id="plot.adimpro_+3A_black">black</code></td>
<td>
<p>Adjustment for black color. Color values with luminance &lt;= black will be assigned to
black in RGB. Adjustment ist done in xyY space.</p>
</td></tr>
<tr><td><code id="plot.adimpro_+3A_exposure">exposure</code></td>
<td>
<p>Multiplicative factor for all color channels (in xyz or rgb spaces). Applied
in linear color space, i.e. if the image is gamma corrected the gamma correction is reversed first. </p>
</td></tr>
<tr><td><code id="plot.adimpro_+3A_...">...</code></td>
<td>
<p> not used </p>
</td></tr>
</table>


<h3>Details</h3>

<p>This functions shows information on the image. This includes
histograms of color values in each channel of the specified (<code>x$type</code>) color space, a thumbnail (in &quot;sRGB&quot;
with gamma correction <code>gammatype</code> if specified and <code>gammatype="ITU"</code> elsewhere),
some information on the image and, if x was produced by <code>awsimage</code>,
an image illustrating the local adaptation.
</p>


<h3>Value</h3>

<p>nothing is returned.
</p>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a></p>


<h3>See Also</h3>

 <p><code><a href="#topic+summary.adimpro">summary.adimpro</a></code>, <code><a href="#topic+adjust.image">adjust.image</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: demo(color)
</code></pre>

<hr>
<h2 id='rimage'>
Slighty enhanced image function.
</h2><span id='topic+rimage'></span><span id='topic+rimage.options'></span>

<h3>Description</h3>

<p>The function builds upon function from package graphics, but allows to change some of
it's defaults. These changes can be made through <code>rimage.options</code>
for subsequent calls of <code>rimage</code> or by direct specification in <code>...</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rimage(x = seq(0, 1, length.out = nrow(z)), y = seq(0, 1, length.out = ncol(z)), z, ...)
rimage.options(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rimage_+3A_x">x</code>, <code id="rimage_+3A_y">y</code></td>
<td>

<p>locations of grid lines at which the values in 'z' are
measured.  These must be finite, non-missing and in
(strictly) ascending order.  By default, equally spaced
values from 0 to 1 are used. If 'x' is a 'list', its
components 'x$x' and 'x$y' are used for 'x' and 'y',
respectively. If the list has component 'z' this is used for
'z'. (Same as for function image)
</p>
</td></tr>
<tr><td><code id="rimage_+3A_z">z</code></td>
<td>

<p>a numeric or logical matrix containing the values to be
plotted ('NA's are allowed).  Note that 'x' can be used
instead of 'z' for convenience. (Same as for function image)
</p>
</td></tr>
<tr><td><code id="rimage_+3A_...">...</code></td>
<td>

<p>The following arguments can be supplied to both <code>rimage</code> and <code>rimage.options</code>:
</p>

<ul>
<li><p> zquantiles - numeric(2): quantiles of image intensity values to be usd to determine
,zlim as <code>zlim &lt;- quantile(z, zquantiles)</code>. not used if zlim is supplied directly.
default <code>c(0,1)</code>.
</p>
</li>
<li><p> up - color for intensity values larger than <code>zlim[2]</code>, default &rdquo;white&rdquo;.
</p>
</li>
<li><p> low - color for intensity values smaller than <code>zlim[1]</code>, default &rdquo;black&rdquo;.
</p>
</li>
<li><p> NAcolor - color for intensity NA values, default 0 (transparent).
</p>
</li>
<li><p> col - color scheme for values in the range of <code>zlim</code>, default <code>grey(0:255/255)</code>.
</p>
</li>
<li><p> asp - aspect ratio, default TRUE.
</p>
</li>
<li><p> xlab - name for x-axis, default &rdquo;x&rdquo;
</p>
</li>
<li><p> ylab - name for y-axis, default &rdquo;y&rdquo;
</p>
</li>
<li><p> xaxt - axis type for x-axis, default &rdquo;s&rdquo;, see <a href="graphics.html#topic+par">par</a>.
</p>
</li>
<li><p> yaxt - axis type for y-axis, default &rdquo;s&rdquo;, see <a href="graphics.html#topic+par">par</a>.
</p>
</li>
<li><p> bty - type of box to draw, default &rdquo;o&rdquo;, see <a href="graphics.html#topic+par">par</a>.
</p>
</li>
<li><p> swapx - swap x axis, default FALSE
</p>
</li>
<li><p> swapy - swap y axis, default FALSE
</p>
</li></ul>

<p>Additionally all parameters that can be passed to function <code>image</code> via
<code>...</code> can be used with function <code>rimage</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function exists just for convenience to be used if sequences of
images are to be plotted using the same settings / style. Function
<code>rimage.options</code> uses an hidden object <code>.rimage</code> within an
evironment <code>.adimproOpts</code> in the space of package adimpro to store
the options.
</p>


<h3>Value</h3>

<p>Both functions return <code>invisible(NULL)</code>.
</p>


<h3>Author(s)</h3>

<p>Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a></p>


<h3>See Also</h3>

<p><code><a href="graphics.html#topic+image">image</a></code>, <code><a href="graphics.html#topic+par">par</a></code>
</p>

<hr>
<h2 id='rotate.image'> Image Processing </h2><span id='topic+rotate.image'></span>

<h3>Description</h3>

<p>Rotate an image by 0, 90, 180 or 270 degrees.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rotate.image(img, angle = 90, compress=NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rotate.image_+3A_img">img</code></td>
<td>
<p> image data, that is an object of class &quot;adimpro&quot;. </p>
</td></tr>
<tr><td><code id="rotate.image_+3A_angle">angle</code></td>
<td>
<p> 0, 90, 180 or 270 degrees </p>
</td></tr>
<tr><td><code id="rotate.image_+3A_compress">compress</code></td>
<td>
<p> store result as compressed image if <code>compress=TRUE</code>. <code>compress=NULL</code>
uses the same format as the original object. </p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function rotates the image <code>img</code> by 0, 90, 180 or 270
degrees. Any other value for <code>degree</code> will cause an exception.
The returned object contains an additional component <code>rotate</code> 
determining the rotation.
</p>


<h3>Value</h3>

<p>An object of class &quot;adimpro&quot; containing the rotated image.
</p>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a></p>


<h3>See Also</h3>

 <p><code><a href="#topic+show.image">show.image</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: demo(manipulate)
</code></pre>

<hr>
<h2 id='segment'> Segmentation by AWS</h2><span id='topic+segment'></span>

<h3>Description</h3>

<p>The function allows to segment an image into two or three level sets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>segment(object, level=0.5, delta = 0, thresh = 3, fov = NULL, channel = 0, 
        hmax = 4, aws = TRUE, varmodel = NULL, ladjust = 1.25, xind = NULL, 
        yind = NULL, wghts = c(0.299, 0.587, 0.114, 0), scorr = TRUE, 
        lkern = "Triangle", plateau = NULL, homogen = TRUE, 
        earlystop = TRUE, demo = FALSE, select = FALSE, sext = 1.4, 
        connected = FALSE, graph = FALSE, max.pixel = 400, compress = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="segment_+3A_object">object</code></td>
<td>
<p>Image object, class &quot;adimpro&quot;, as from
<code>read.image</code>, <code>read.raw</code>, or <code>make.image</code>.</p>
</td></tr>
<tr><td><code id="segment_+3A_level">level</code></td>
<td>
<p> center of gray/color-values of the second segment, will not be used if <code>select=TRUE</code>. May be specified such that either 
<code>level-delta</code> and <code>level+delta</code> are within the interval (0,1) or such that they are within the interval (0,65535) (2 Byte integers).</p>
</td></tr>
<tr><td><code id="segment_+3A_delta">delta</code></td>
<td>
<p> half width of gray/color-values of the second segment, nay be increased if <code>select=TRUE</code>. May be specified such that either 
<code>level-delta</code> and <code>level+delta</code> are within the interval (0,1) or such that they are within the interval (0,65535) (2 Byte integers).</p>
</td></tr>
<tr><td><code id="segment_+3A_thresh">thresh</code></td>
<td>
<p> Critical value for final assignment to segment 1 or 3 , should be specified as a quantile of the standard Gaussian distribution.</p>
</td></tr>
<tr><td><code id="segment_+3A_fov">fov</code></td>
<td>
<p> size of field of view in pixel </p>
</td></tr>
<tr><td><code id="segment_+3A_channel">channel</code></td>
<td>
<p> specifies which information to use for segmentation. 
0: use grey valued image obtained from color images, 1-3: use the specified color channel.  </p>
</td></tr>
<tr><td><code id="segment_+3A_hmax">hmax</code></td>
<td>
<p> Maximum bandwidth to use in the iteration procedure.</p>
</td></tr>
<tr><td><code id="segment_+3A_aws">aws</code></td>
<td>
<p> (logical). If <code>TRUE</code> the propagation - separation
(PS) approach from Polzehl and Spokoiny (2006) is used.
<code>aws=FALSE</code> turns off the statistical penalty resulting in a
nonadaptive kernel estimate using a kernel with bandwidth <code>hmax</code>.</p>
</td></tr>
<tr><td><code id="segment_+3A_varmodel">varmodel</code></td>
<td>
 <p><code>varmodel</code> specifies how variances are to be
estimated. This can be a homogeneous variance estimate
(<code>varmodel="None"</code>) assuming uncorrelated errors (both spatial
and between channels). Alternatives are an adaptive homogeneous or linear 
(function of the mean) variance estimate that depends on estimated
correlations and on residuals from the last iteration step. 
The default <code>varmodel=NULL</code> corresponds to
<code>varmodel == "Linear"</code> if <code>img$gamma==FALSE</code> and
<code>varmodel == "Constant"</code> otherwise.</p>
</td></tr>
<tr><td><code id="segment_+3A_ladjust">ladjust</code></td>
<td>
<p> adjustment factor for lambda (&gt;=1). Default values for
lambda are selected for Gaussian distributions. Skewed or heavy
tailed distributions may require slightly larger values for lambda
to meet the propagation condition. <code>ladjust</code> allows to increase
lambda in such situations. </p>
</td></tr>
<tr><td><code id="segment_+3A_xind">xind</code>, <code id="segment_+3A_yind">yind</code></td>
<td>
<p>Restrict smoothing to rectangular area defined by pixel
indices <code>xind,yind</code> in x- and y-direction. Full range
if <code>NULL</code> (default).</p>
</td></tr>
<tr><td><code id="segment_+3A_wghts">wghts</code></td>
<td>
<p> allows to weight the information from
different (up to 4) color channels. The weights are used in the
statistical penalty of the PS-procedure. </p>
</td></tr>
<tr><td><code id="segment_+3A_scorr">scorr</code></td>
<td>
<p> (logical). Specifies whether  spatial correlation is to be
estimated. Defaults to <code>TRUE</code>.  Is set to <code>FALSE</code> if
<code>mask</code> is not <code>NULL</code>. </p>
</td></tr>
<tr><td><code id="segment_+3A_lkern">lkern</code></td>
<td>
<p> Specifies the location kernel. Defaults to
&quot;Triangle&quot;, other choices are &quot;Quadratic&quot;, &quot;Cubic&quot; and &quot;Uniform&quot;.
The use of &quot;Triangle&quot; corresponds to the Epanechnicov kernel 
nonparametric kernel regression. </p>
</td></tr>
<tr><td><code id="segment_+3A_plateau">plateau</code></td>
<td>
<p>Extension of the plateau in the statistical kernel. Can take
values from (0,1), defaults to <code>0.25</code>. </p>
</td></tr>
<tr><td><code id="segment_+3A_homogen">homogen</code></td>
<td>
<p>If TRUE the algorithm determines, in each design point i, a circle of maximum radius,
such that the statistical penalty <code>s_{ij}</code> for all points j within the
circle is less than the value specified in <code>plateau</code>. In subsequent 
iteration steps the statistical penalty  for such points is set to zero. 
This is only used if <code>plateau&gt;0</code>. This results in more stable intermediate estimates and in a smoother reconstruction. <code>homogen=TRUE</code>
leads to increased memory requirements.</p>
</td></tr>
<tr><td><code id="segment_+3A_earlystop">earlystop</code></td>
<td>
<p>If TRUE the algorithm determines, in each design point i, a circle of minimal radius,
such that the circle includes all point j with positive weights <code>w_{ij}</code>.
if this radius is considerably smaller than the actual bandwidth then the
estimate in point i is fixed. This should considarably reduce computing time 
in case of large <code>hmax</code>.<code>earlystop=TRUE</code>
slightly increases memory requirements. </p>
</td></tr>
<tr><td><code id="segment_+3A_demo">demo</code></td>
<td>
<p> (logical). If <code>demo=TRUE</code> the function pauses after each
iteration. Defaults to <code>FALSE</code>.  </p>
</td></tr>
<tr><td><code id="segment_+3A_select">select</code></td>
<td>
<p> if TRUE a homogeneous rectangular region can be specified interactively. A value of <code>level</code> is the generated 
as the median of values within the selected region.</p>
</td></tr>
<tr><td><code id="segment_+3A_sext">sext</code></td>
<td>
<p> if <code>select==TRUE</code> the value of delta is increased by 
<code>sext</code> times the standard deviation (estimated by IQR) of the values in the selected region.</p>
</td></tr>
<tr><td><code id="segment_+3A_connected">connected</code></td>
<td>
<p> if TRUE the set of pixel within the same segment connected to the specified pixel is extracted. </p>
</td></tr>
<tr><td><code id="segment_+3A_graph">graph</code></td>
<td>
<p> (logical). If  <code>graph=TRUE</code> intermediate results are
illustrated after each iteration step. Defaults to <code>FALSE</code>. </p>
</td></tr>
<tr><td><code id="segment_+3A_max.pixel">max.pixel</code></td>
<td>
<p> Maximum dimension of images for display
if <code>graph=TRUE</code>. If the true dimension is larger, the 
images are downscaled for display. See also <code><a href="#topic+show.image">show.image</a></code>.</p>
</td></tr>
<tr><td><code id="segment_+3A_compress">compress</code></td>
<td>
<p> logical, determines if image data are stored in raw-format. </p>
</td></tr>
</table>


<h3>Details</h3>

<p>The image is segmented into three parts by performing multiscale tests 
of the hypotheses H1
<code>value &gt;= level - delta</code> and H2 <code>value &lt;= level + delta</code>.
Pixel where the first hypotesis is rejected are classified as <code>-1</code> (segment 1)
while rejection of H2 results in classification  <code>1</code> (segment 3).
Pixel where neither H1 or H2 are rejected ar assigned to a value <code>0</code> (segment 2). Critical values for the tests are adjusted for smoothness at the different scales inspected in the iteration process using results from multiscale testing,
see e.g. Duembgen and Spokoiny (2001). Critical values also depend on the 
size of the region of interest specified in parameter <code>fov</code>.
</p>
<p>Within segment 2 structural adaptive smoothing is performed while if a pair of pixel belongs to segment 1 or segment 3 the corresponding weight will be nonadaptive. 
</p>
<p>If <code>connected==TRUE</code> pixel in segment 2 <code>0</code> are reassigned to a value <code>2</code> if they belong to a maximal connected subset of segment2 that contains the center of the specified homogeneous set.
</p>


<h3>Value</h3>

<p> Object of class <code>"adimpro"</code> with 
</p>
<table role = "presentation">
<tr><td><code>img</code></td>
<td>
<p>containing a greyvalued image with 3 or 4 levels corresponding to the identified segments.</p>
</td></tr>
</table>
<p>and additional list elements
</p>
<table role = "presentation">
<tr><td><code>hsegm</code></td>
<td>
<p> containing the maximal bandwidth used</p>
</td></tr> 
<tr><td><code>level</code></td>
<td>
<p> the value of parameter <code>level</code> used</p>
</td></tr>
<tr><td><code>delta</code></td>
<td>
<p> the value of parameter <code>delta</code> used</p>
</td></tr>
<tr><td><code>thresh</code></td>
<td>
<p> the value of parameter <code>thresh</code> used</p>
</td></tr>
</table>


<h3>Note</h3>

<p> This function is still experimental and may be changes considerably in future.</p>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a></p>


<h3>References</h3>

 
<p>Duembgen, L. and Spokoiny, V. (2001). Multiscale testing of qualitative hypoteses. Ann. Stat. 29, 124&ndash;152.
</p>
<p>Polzehl, J. and Spokoiny, V. (2006). Propagation-Separation Approach for Local
Likelihood Estimation. Probability Theory and Related Fields. 3 (135)
335 - 362.
</p>


<h3>See Also</h3>

 <p><code><a href="#topic+read.image">read.image</a></code>, <code><a href="#topic+read.raw">read.raw</a></code>, <code><a href="#topic+make.image">make.image</a></code>, <code><a href="#topic+show.image">show.image</a></code>, <code><a href="#topic+clip.image">clip.image</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: demo(segment)
</code></pre>

<hr>
<h2 id='show.image'> I/O functions </h2><span id='topic+show.image'></span>

<h3>Description</h3>

<p>Display an image on the screen.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show.image(img, max.x = 1000, max.y = 1000, gammatype = "ITU", 
           whitep = NULL, temp = NULL, cspace = "sRGB", black=0, exposure = 1, 
           channel=NULL, new = FALSE,  ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="show.image_+3A_img">img</code></td>
<td>
<p> image data, an object of class &quot;adimpro&quot;.</p>
</td></tr>
<tr><td><code id="show.image_+3A_max.x">max.x</code></td>
<td>
<p> maximum value of pixels in x dimension to be displayed. </p>
</td></tr>
<tr><td><code id="show.image_+3A_max.y">max.y</code></td>
<td>
<p> maximum value of pixels in y dimension to be displayed. </p>
</td></tr>
<tr><td><code id="show.image_+3A_gammatype">gammatype</code></td>
<td>
<p> character, determines the type of gamma correction within the image.
&quot;ITU&quot; stands for ITU-R BT.709-3 as e.g. used by <code>dcraw</code>. Alternatives recognized
within the package are &quot;None&quot;, &quot;sRGB&quot; and &quot;CIE&quot; (CIE L*). 
<code>gammatype="histogram"</code> forces histogram equalization based on the corresponding greyvalue image.</p>
</td></tr>
<tr><td><code id="show.image_+3A_cspace">cspace</code></td>
<td>
<p> defines the output color space, default &quot;sRGB&quot; (sRGB D65), alternatives are 
&quot;Adobe&quot; (Adobe 1998 D65), &quot;wGamut&quot; (Wide Gamut  D65), &quot;kodak&quot; (Kodak ProPhoto D65)
&quot;xyz&quot;, &quot;yuv&quot;, &quot;yiq&quot; and &quot;hsi&quot;. <code>NULL</code> keeps the actual setting. If <code>color.space%in%c("hsi","yuv","yiq","xyz")</code> the individual channels are rescaled to provide maximum 
contrast. Information from the three channels is coded as &quot;red&quot;, &quot;green&quot; and &quot;blue&quot; providing a 
miscolored image in these cases. Individual channels can be displayed as greyvalue images by
specifying the <code>channel</code> argument. 
<code>color.space="greyvalue"</code> provides a greyvalue image.</p>
</td></tr>
<tr><td><code id="show.image_+3A_whitep">whitep</code></td>
<td>
<p>White point in <code>xyY</code> space. Can be given as one of (character)
<code>c("A","B","C","E","D50","D55","D65","D75","F2","F7","F11")</code> or as a two element numeric
vector of chromatic <code>xy</code> coordinates. <code>"D65"</code> corresponds to the default white point of <code>"sRGB"</code> and <code>"Adobe"</code> RGB-spaces. <code>NULL</code> keeps the actual setting.</p>
</td></tr>
<tr><td><code id="show.image_+3A_temp">temp</code></td>
<td>
<p>Color temperature. Can be used to specify chromatic <code>xy</code> coordinates of the
whitepoint. Only used if <code>is.null(whitep)</code>. </p>
</td></tr>
<tr><td><code id="show.image_+3A_black">black</code></td>
<td>
<p>Adjustment for black color. Color values with luminance &lt;= black will be assigned to
black in RGB. Adjustment ist done in xyY space.</p>
</td></tr>
<tr><td><code id="show.image_+3A_exposure">exposure</code></td>
<td>
<p>Multiplicative factor for all color channels (in xyz or rgb spaces). Applied
in linear color space, i.e. if the image is gamma corrected the gamma correction is reversed first. </p>
</td></tr>
<tr><td><code id="show.image_+3A_channel">channel</code></td>
<td>
<p> allows to select a color channel (1: red, 2: green, 3: blue in case of &quot;rgb&quot;) for display.</p>
</td></tr>
<tr><td><code id="show.image_+3A_new">new</code></td>
<td>
<p> should new X11() be opened? default <code>FALSE</code></p>
</td></tr>
<tr><td><code id="show.image_+3A_...">...</code></td>
<td>
<p> additional arguments to <code><a href="graphics.html#topic+image">image</a></code> can be
passed here. </p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function displayes greyscale and color images
on the screen. If the actual dimension of the
image exceeds <code>max.x</code> or <code>max.y</code> the image is shrinked by
displaying only part of the pixels (every second/third/... such that
the resulting dimension is smaller than <code>max.x</code> or <code>max.y</code>)
</p>


<h3>Value</h3>

<p>Nothing is returned
</p>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a></p>


<h3>See Also</h3>

 <p><code><a href="#topic+read.image">read.image</a></code>, <code><a href="#topic+write.image">write.image</a></code>, <code><a href="#topic+adjust.image">adjust.image</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: demo(io)
</code></pre>

<hr>
<h2 id='shrink.image'> Image Processing </h2><span id='topic+shrink.image'></span>

<h3>Description</h3>

<p>Shrink resolution of an image
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shrink.image(img, method = "median",
             xt = img$dim[1], yt = img$dim[2], ratio = TRUE,
             compress=TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="shrink.image_+3A_img">img</code></td>
<td>
<p> image data, an object of class &quot;adimpro&quot;. </p>
</td></tr>
<tr><td><code id="shrink.image_+3A_method">method</code></td>
<td>
<p> method to be used to shrink the image. &quot;median&quot; (default),
&quot;mean&quot;, or &quot;nearest&quot;. &quot;median&quot; is supposed to give best results. For a considerably faster result use &quot;nearest&quot;. </p>
</td></tr>
<tr><td><code id="shrink.image_+3A_xt">xt</code></td>
<td>
<p> target x-dimension </p>
</td></tr>
<tr><td><code id="shrink.image_+3A_yt">yt</code></td>
<td>
<p> target y-dimension </p>
</td></tr>
<tr><td><code id="shrink.image_+3A_ratio">ratio</code></td>
<td>
<p> logical. preserve x-y ratio? default: <code>TRUE</code> </p>
</td></tr>
<tr><td><code id="shrink.image_+3A_compress">compress</code></td>
<td>
<p> logical, determines if image data are stored in raw-format. </p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function shrinkes the resolution of the image such that the x-y
dimension of the resulting image is smaller than the original one.
<code>xt</code> and <code>yt</code> give the target dimension
of the image. If <code>ratio == TRUE</code> (default) the ratio between x- and
y-dimension is preserved.
</p>
<p><code>method</code> &quot;nearest&quot; selects a pixel nearest to the new coordinates.
<code>method</code> &quot;mean&quot; defines the color of a pixel as the mean of 
all pixel identified with the new coordinate.
<code>method</code> &quot;median&quot; set the color of a pixel as color of an 
L1-generalized median of all pixel identified with the new coordinate.
</p>


<h3>Value</h3>

<p>shrinked image
</p>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a> </p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: demo(manipulate)
</code></pre>

<hr>
<h2 id='summary.adimpro'> I/O functions </h2><span id='topic+summary.adimpro'></span>

<h3>Description</h3>

<p>'summary' method for class '&quot;adimpro&quot;'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'adimpro'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.adimpro_+3A_object">object</code></td>
<td>
<p> an object of class <code>adimpro</code>, usually, a result of a call to
<code>read.raw</code>, or <code>read.image</code>. </p>
</td></tr>
<tr><td><code id="summary.adimpro_+3A_...">...</code></td>
<td>
<p> further arguments passed to or from other methods. </p>
</td></tr>
</table>


<h3>Details</h3>

<p>The method tries to print information on the image, like image dimension,
color space, value range, etc.
</p>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: demo(io)
## Not run: demo(manipulate)
</code></pre>

<hr>
<h2 id='write.image'> I/O Functions </h2><span id='topic+write.image'></span>

<h3>Description</h3>

<p>Write an image file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write.image(img, file = "tmp.ppm", max.x=NULL, max.y=NULL, depth = NULL, gammatype="ITU", 
        whitep = NULL, temp = NULL, cspace = NULL, black = 0, exposure = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write.image_+3A_img">img</code></td>
<td>
<p> image data, an object of class &quot;adimpro&quot;. </p>
</td></tr>
<tr><td><code id="write.image_+3A_file">file</code></td>
<td>
<p> file name, the extension determines the image file format. </p>
</td></tr>
<tr><td><code id="write.image_+3A_max.x">max.x</code></td>
<td>
<p> maximum value of pixels in x dimension. </p>
</td></tr>
<tr><td><code id="write.image_+3A_max.y">max.y</code></td>
<td>
<p> maximum value of pixels in y dimension. </p>
</td></tr>
<tr><td><code id="write.image_+3A_depth">depth</code></td>
<td>
<p> color depth, either 8 or 16 (bit)! The value
is reset to 8 if the specified image file format does not allow for 16 Bit encoding. </p>
</td></tr>
<tr><td><code id="write.image_+3A_gammatype">gammatype</code></td>
<td>
<p> character, determines the type of gamma correction within the image.
&quot;ITU&quot; stands for ITU-R BT.709-3 as e.g. used by <code>dcraw</code>. Alternatives recognized
within the package are &quot;None&quot;, &quot;sRGB&quot; and &quot;CIE&quot; (CIE L*). <code>NULL</code> keeps the actual setting.
<code>gammatype="histogram"</code> forces histogram equalization based on the corresponding greyvalue image.</p>
</td></tr>
<tr><td><code id="write.image_+3A_cspace">cspace</code></td>
<td>
<p> defines the output color space, default is <code>img$cspace</code> can be set to &quot;sRGB&quot;, &quot;Adobe&quot; (Adobe 1998), &quot;wGamut&quot; (Wide Gamut), &quot;kodak&quot; (Kodak ProPhoto)
&quot;xyz&quot;, &quot;yuv&quot;, &quot;yiq&quot; and &quot;hsi&quot;</p>
</td></tr>
<tr><td><code id="write.image_+3A_whitep">whitep</code></td>
<td>
<p>White point in <code>xyY</code> space. Can be given as one of (character)
<code>c("A","B","C","E","D50","D55","D65","D75","F2","F7","F11")</code> or as a two element numeric
vector of chromatic <code>xy</code> coordinates. <code>"D65"</code> corresponds to the default white point of <code>"sRGB"</code> and <code>"Adobe"</code> RGB-spaces. <code>NULL</code> keeps the actual setting.</p>
</td></tr>
<tr><td><code id="write.image_+3A_temp">temp</code></td>
<td>
<p>Color temperature. Can be used to specify chromatic <code>xy</code> coordinates of the
whitepoint. Only used if <code>is.null(whitep)</code>. </p>
</td></tr>
<tr><td><code id="write.image_+3A_black">black</code></td>
<td>
<p>Adjustment for black color. Color values with luminance &lt;= black will be assigned to
black in RGB. Adjustment ist done in xyY space.</p>
</td></tr>
<tr><td><code id="write.image_+3A_exposure">exposure</code></td>
<td>
<p>Multiplicative factor for all color channels (in xyz or rgb spaces). Applied
in linear color space, i.e. if the image is gamma corrected the gamma correction is reversed first. </p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function writes the image data in <code>img</code> to the file
<code>file</code>. Color depth <code>depth</code> is used for writing, but if
image has a component &quot;depth&quot;, this argument will be ignored. Note: Not
all target formats support 16bit coding. The target format is
determined from the file extension, and should be one of the many that
ImageMagick supports.
</p>
<p>Note that write image by default  applies a gamma correction with <code>gammatype="ITU"</code>.
This provides a good standard for display on a screen. For printing 
<code>cspace="Adobe"</code> should be prefered. Images that are intended for further editing should preferably be saved in an image format that allows for
16Bit depth (tiff, png) using either  <code>cspace="Adobe"</code>,  <code>cspace="wGamut"</code> or <code>cspace="kodak"</code> and preferably no gamma
correction to prevent from additional loss of information.
</p>


<h3>Value</h3>

<p>Nothing is returned.</p>


<h3>Note</h3>

<p> ImageMagick has to be installed on the system to write &quot;tif&quot;, &quot;tiff&quot;,
&quot;png&quot;, &quot;gif&quot;, &quot;jpg&quot; or &quot;jpeg&quot; files.</p>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a></p>


<h3>See Also</h3>

 <p><code><a href="#topic+read.image">read.image</a></code>, <code><a href="#topic+adjust.image">adjust.image</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: demo(io)
</code></pre>

<hr>
<h2 id='write.raw'> Write image RAW data as greyvalue png image </h2><span id='topic+write.raw'></span>

<h3>Description</h3>

<p>Image RAW data is saved as a 16-Bit greyvalue png image.
EXIF information contained in the original RAW image is stored as 
a comment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write.raw(img, filename = "tmp.png")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write.raw_+3A_img">img</code></td>
<td>
<p> object of class <code>"adimpro"</code> containing 
image RAW data (<code>img$type=="RAW"</code>.) </p>
</td></tr>
<tr><td><code id="write.raw_+3A_filename">filename</code></td>
<td>
<p> Name of the resulting png-image. If filename does
not include an extension &quot;.png&quot; the extension &quot;.png&quot; is added.   </p>
</td></tr>
</table>


<h3>Details</h3>

<p> EXIF information contained in the original RAW image as well 
as other available information in object <code>img</code> are added as a 
comment to the resulting png-image. This comment is evaluated when the
image is read by functions <code><a href="#topic+read.raw">read.raw</a></code> or <code><a href="#topic+read.image">read.image</a></code> 
</p>


<h3>Value</h3>

<p>Nothing is returned.</p>


<h3>Note</h3>

<p> ImageMagick has to be installed on the system to write 
&quot;png&quot; files.</p>


<h3>Author(s)</h3>

<p> Karsten Tabelow <a href="mailto:tabelow@wias-berlin.de">tabelow@wias-berlin.de</a> and Joerg Polzehl <a href="mailto:polzehl@wias-berlin.de">polzehl@wias-berlin.de</a></p>


<h3>See Also</h3>

 <p><code><a href="#topic+read.raw">read.raw</a></code>, <code><a href="#topic+develop.raw">develop.raw</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: demo(raw)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
