<!DOCTYPE html><html lang="en"><head><title>Help for package gms</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {gms}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#gms-package'><p>gms: 'GAMS' Modularization Support Package</p></a></li>
<li><a href='#check_config'><p>Check config</p></a></li>
<li><a href='#checkAppearance'><p>checkAppearance</p></a></li>
<li><a href='#checkDescription'><p>checkDescription</p></a></li>
<li><a href='#checkNoTabs'><p>checkNoTabs</p></a></li>
<li><a href='#checkSwitchAppearance'><p>checkSwitchAppearance</p></a></li>
<li><a href='#chooseFromList'><p>chooseFromList</p></a></li>
<li><a href='#codeCheck'><p>codeCheck</p></a></li>
<li><a href='#codeExtract'><p>codeExtract</p></a></li>
<li><a href='#convert.modularGAMS'><p>convert.modularGAMS</p></a></li>
<li><a href='#copy_input'><p>copy_input</p></a></li>
<li><a href='#delete_olddata'><p>delete_olddata</p></a></li>
<li><a href='#download_distribute'><p>Download and unpack compressed data from repositories</p></a></li>
<li><a href='#download_unpack'><p>Download and unpack compressed data from repositories</p></a></li>
<li><a href='#fulldataOutput'><p>fulldataOutput</p></a></li>
<li><a href='#GAMScodeFilter'><p>GAMScodeFilter</p></a></li>
<li><a href='#get_info'><p>get_info</p></a></li>
<li><a href='#getfiledestinations'><p>getfiledestinations</p></a></li>
<li><a href='#getLine'><p>getLine</p></a></li>
<li><a href='#getModules'><p>getModules</p></a></li>
<li><a href='#interfaceplot'><p>interfaceplot</p></a></li>
<li><a href='#is.modularGAMS'><p>is.modularGAMS</p></a></li>
<li><a href='#loadConfig'><p>Load Config</p></a></li>
<li><a href='#model_dependencies'><p>Function to detect R package dependencies</p></a></li>
<li><a href='#model_lock'><p>Model lock/unlock</p></a></li>
<li><a href='#module.skeleton'><p>Create a Module skeleton</p></a></li>
<li><a href='#modules_interfaceplot'><p>modules_interfaceplot</p></a></li>
<li><a href='#path'><p>path</p></a></li>
<li><a href='#publish_data'><p>Publish data in a repository</p></a></li>
<li><a href='#read_yaml_header'><p>read_yaml_header</p></a></li>
<li><a href='#readDeclarations'><p>readDeclarations</p></a></li>
<li><a href='#readDefaultConfig'><p>readDefaultConfig</p></a></li>
<li><a href='#readFileOrVector'><p>readFileOrVector</p></a></li>
<li><a href='#readParameterValues'><p>readParameterValues</p></a></li>
<li><a href='#readSetglobals'><p>readSetglobals</p></a></li>
<li><a href='#readSettings'><p>readSettings</p></a></li>
<li><a href='#replace_in_file'><p>Replace in File</p></a></li>
<li><a href='#saveConfig'><p>Save Config</p></a></li>
<li><a href='#selectScript'><p>selectScript</p></a></li>
<li><a href='#setScenario'><p>setScenario</p></a></li>
<li><a href='#settingsCheck'><p>settingsCheck</p></a></li>
<li><a href='#singleGAMSfile'><p>Merge GAMS code into single file</p></a></li>
<li><a href='#tardir'><p>Create tgz archive from directory</p></a></li>
<li><a href='#update_fulldataOutput'><p>update_fulldataOutput</p></a></li>
<li><a href='#update_modules_embedding'><p>Update Modules Embedding in GAMS code</p></a></li>
<li><a href='#updateInterfaceMapping'><p>updateInterfaceMapping</p></a></li>
<li><a href='#writeSets'><p>writeSets</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>'GAMS' Modularization Support Package</td>
</tr>
<tr>
<td>Version:</td>
<td>0.31.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-06-27</td>
</tr>
<tr>
<td>Description:</td>
<td>A collection of tools to create, use and maintain modularized model code written in the modeling 
    language 'GAMS' (<a href="https://www.gams.com/">https://www.gams.com/</a>). Out-of-the-box 'GAMS' does not come with support for modularized
    model code. This package provides the tools necessary to convert a standard 'GAMS' model to a modularized one
    by introducing a modularized code structure together with a naming convention which emulates local
    environments. In addition, this package provides tools to monitor the compliance of the model code with
    modular coding guidelines.</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, rlang, stringr, withr, yaml, filelock, stats</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, curl, magclass, qgraph, testthat, callr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/pik-piam/gms">https://github.com/pik-piam/gms</a>,
<a href="https://doi.org/10.5281/zenodo.4390032">https://doi.org/10.5281/zenodo.4390032</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/pik-piam/gms/issues">https://github.com/pik-piam/gms/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/BSD-2-Clause">BSD_2_clause</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Config/Keywords:</td>
<td>tool</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-06-28 11:09:32 UTC; dietrich</td>
</tr>
<tr>
<td>Author:</td>
<td>Jan Philipp Dietrich
    <a href="https://orcid.org/0000-0002-4309-6431"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre]
    (affiliation: Potsdam Institute for Climate Impact Research),
  David Klein [aut] (affiliation: Potsdam Institute for Climate Impact
    Research),
  Anastasis Giannousakis [aut],
  Felicitas Beier [aut] (affiliation: Potsdam Institute for Climate
    Impact Research),
  Johannes Koch [aut] (affiliation: Potsdam Institute for Climate Impact
    Research),
  Lavinia Baumstark [aut] (affiliation: Potsdam Institute for Climate
    Impact Research),
  Mika Pflüger [aut],
  Oliver Richters [aut] (affiliation: Potsdam Institute for Climate
    Impact Research)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jan Philipp Dietrich &lt;dietrich@pik-potsdam.de&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-06-29 06:50:10 UTC</td>
</tr>
</table>
<hr>
<h2 id='gms-package'>gms: 'GAMS' Modularization Support Package</h2><span id='topic+gms'></span><span id='topic+gms-package'></span>

<h3>Description</h3>

<p>A collection of tools to create, use and maintain modularized model code written in the modeling language 'GAMS' (<a href="https://www.gams.com/">https://www.gams.com/</a>). Out-of-the-box 'GAMS' does not come with support for modularized model code. This package provides the tools necessary to convert a standard 'GAMS' model to a modularized one by introducing a modularized code structure together with a naming convention which emulates local environments. In addition, this package provides tools to monitor the compliance of the model code with modular coding guidelines.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Jan Philipp Dietrich <a href="mailto:dietrich@pik-potsdam.de">dietrich@pik-potsdam.de</a> (<a href="https://orcid.org/0000-0002-4309-6431">ORCID</a>) (Potsdam Institute for Climate Impact Research)
</p>
<p>Authors:
</p>

<ul>
<li><p> David Klein (Potsdam Institute for Climate Impact Research)
</p>
</li>
<li><p> Anastasis Giannousakis
</p>
</li>
<li><p> Felicitas Beier (Potsdam Institute for Climate Impact Research)
</p>
</li>
<li><p> Johannes Koch (Potsdam Institute for Climate Impact Research)
</p>
</li>
<li><p> Lavinia Baumstark (Potsdam Institute for Climate Impact Research)
</p>
</li>
<li><p> Mika Pflüger
</p>
</li>
<li><p> Oliver Richters (Potsdam Institute for Climate Impact Research)
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/pik-piam/gms">https://github.com/pik-piam/gms</a>
</p>
</li>
<li> <p>doi: <a href="https://doi.org/10.5281/zenodo.4390032">10.5281/zenodo.4390032</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/pik-piam/gms/issues">https://github.com/pik-piam/gms/issues</a>
</p>
</li></ul>


<hr>
<h2 id='check_config'>Check config</h2><span id='topic+check_config'></span>

<h3>Description</h3>

<p>Checks a model configuration file for consistency by comparing it to a
reference config file and the given module structure of the model. The
function will throw out an error if settings are missing in the config which
exist in the reference config, of if settings are set in the config which do
not exist in the reference config file or if a realization is chosen for a
module which does not exist, not allowed setting combinations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_config(
  icfg,
  reference_file = "config/default.cfg",
  modulepath = "modules/",
  settings_config = NULL,
  extras = NULL,
  saveCheck = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_config_+3A_icfg">icfg</code></td>
<td>
<p>Input config which should be checked for consistency (either as
the config itself or as a file path linking to the config)</p>
</td></tr>
<tr><td><code id="check_config_+3A_reference_file">reference_file</code></td>
<td>
<p>Reference config which is having the right format
(either as the config itself or as a file path linking to the config)</p>
</td></tr>
<tr><td><code id="check_config_+3A_modulepath">modulepath</code></td>
<td>
<p>The path where the modules are stored. If set to NULL the
corresponding module check is deactivated.</p>
</td></tr>
<tr><td><code id="check_config_+3A_settings_config">settings_config</code></td>
<td>
<p>path where the table of possible setting combinations
is stored, if NULL it is ignored</p>
</td></tr>
<tr><td><code id="check_config_+3A_extras">extras</code></td>
<td>
<p>vector of setting names that are allowed to appear in the input config
even if they are missing in the reference config. That can be useful to allow for
additional settings/information which does not necessarily have to exist</p>
</td></tr>
<tr><td><code id="check_config_+3A_savecheck">saveCheck</code></td>
<td>
<p>additional check which makes sure that saving and loading it to/from
YAML format does not change its contents</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The checked config as a config list ready for further usage.
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, Lavinia Baumstark
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getModules">getModules</a></code>
</p>

<hr>
<h2 id='checkAppearance'>checkAppearance</h2><span id='topic+checkAppearance'></span>

<h3>Description</h3>

<p>Checks for all declared objects in which parts of the model they appear and
calculates the type of each object (core object, interface object, module
object of module xy,...)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkAppearance(x, capitalExclusionList = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="checkAppearance_+3A_x">x</code></td>
<td>
<p>A code list as returned by <code><a href="#topic+codeExtract">codeExtract</a></code></p>
</td></tr>
<tr><td><code id="checkAppearance_+3A_capitalexclusionlist">capitalExclusionList</code></td>
<td>
<p>A vector of names that should be ignored when
checking for unified capitalization of variables</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with four elements: appearance, setappearance, type and
warnings. Appearance is a matrix containing values which indicate whether an
object appears in a part of the code or not (e.g. indicates whether &quot;vm_example&quot;
appears in realization &quot;on&quot; of module &quot;test&quot; or not.). 0 means that it does not appear,
1 means that it appears in the code and 2 means that it appears in the
not_used.txt. setappearance contains the same information but for sets instead of other
objects. Type is a vector containing the type of each object (exluding sets). And warnings
contains a list of warnings created during that process.
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>,<code><a href="#topic+readDeclarations">readDeclarations</a></code>
</p>

<hr>
<h2 id='checkDescription'>checkDescription</h2><span id='topic+checkDescription'></span>

<h3>Description</h3>

<p>Checks whether all Declarations of a GAMS code come with a Description,
throws out a warning in case of a missing description.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkDescription(x, w = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="checkDescription_+3A_x">x</code></td>
<td>
<p>GAMS declarations matrix as returned by</p>
</td></tr>
<tr><td><code id="checkDescription_+3A_w">w</code></td>
<td>
<p>a vector of warnings the warnings should be added to
<code><a href="#topic+readDeclarations">readDeclarations</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of warnings
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>
</p>

<hr>
<h2 id='checkNoTabs'>checkNoTabs</h2><span id='topic+checkNoTabs'></span>

<h3>Description</h3>

<p>Check all files (also in subdirectories) matching the given pattern for tabs.
Will throw an error with a list of files where tabs were found if any.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkNoTabs(pattern, exclude = NULL, excludeFolders = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="checkNoTabs_+3A_pattern">pattern</code></td>
<td>
<p>A regular expression. Only files matching this pattern will be checked for tabs.</p>
</td></tr>
<tr><td><code id="checkNoTabs_+3A_exclude">exclude</code></td>
<td>
<p>A regular expression. Files matching this pattern will never be checked.</p>
</td></tr>
<tr><td><code id="checkNoTabs_+3A_excludefolders">excludeFolders</code></td>
<td>
<p>Paths to folders that should not be checked.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly, the list of files that were checked.
</p>


<h3>Author(s)</h3>

<p>Pascal Sauer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
gms::checkNoTabs(pattern = "\\.(R|Rprofile|gms|cfg|bib)$",
                 excludeFolders = c("output", "renv", ".git"))
gms::checkNoTabs(utils::glob2rx("*.R"))

## End(Not run)
</code></pre>

<hr>
<h2 id='checkSwitchAppearance'>checkSwitchAppearance</h2><span id='topic+checkSwitchAppearance'></span>

<h3>Description</h3>

<p>Checks for all declared switches in which parts of the model they appear and
calculates the type of each object (core object, interface object, module
object of module xy,...)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkSwitchAppearance(code)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="checkSwitchAppearance_+3A_code">code</code></td>
<td>
<p>Model code returned by <code><a href="#topic+codeExtract">codeExtract</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with three elements: switches, appearance and type. Switches
is a vector containing all switches. The names of the vector contain the
information where the switch is set. Appearance is a matrix containing
values which indicate whether an object appears in a part of the code or not
(e.g. indicates whether &quot;vm_example&quot; appears in realization &quot;on&quot; of module
&quot;test&quot; or not.). 0 means that it does not appear, 1 means that it appears in
the code and 2 means that it appears in the not_used.txt. Type is a vector
containing the type of each object.
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>,<code><a href="#topic+readDeclarations">readDeclarations</a></code>,<code><a href="#topic+codeExtract">codeExtract</a></code>,<code><a href="#topic+checkAppearance">checkAppearance</a></code>
</p>

<hr>
<h2 id='chooseFromList'>chooseFromList</h2><span id='topic+chooseFromList'></span>

<h3>Description</h3>

<p>Allows the user to select single or multiple items from a list.
Entries can be selected based on individual choice, groups, regex or all.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>chooseFromList(
  theList,
  type = "items",
  userinfo = NULL,
  addAllPattern = TRUE,
  returnBoolean = FALSE,
  multiple = TRUE,
  userinput = FALSE,
  errormessage = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="chooseFromList_+3A_thelist">theList</code></td>
<td>
<p>list or character vector to be selected from, names can specify groups</p>
</td></tr>
<tr><td><code id="chooseFromList_+3A_type">type</code></td>
<td>
<p>string in plural shown to user to understand what they have to choose</p>
</td></tr>
<tr><td><code id="chooseFromList_+3A_userinfo">userinfo</code></td>
<td>
<p>string printed to the user before choosing</p>
</td></tr>
<tr><td><code id="chooseFromList_+3A_addallpattern">addAllPattern</code></td>
<td>
<p>boolean whether 'all' and 'Search by pattern' options are added</p>
</td></tr>
<tr><td><code id="chooseFromList_+3A_returnboolean">returnBoolean</code></td>
<td>
<p>TRUE: returns array with dimension of theList with FALSE and TRUE,
which erases the order in which entries were selected
FALSE: returns selected entries of theList, conserving the order
in which entries were selected</p>
</td></tr>
<tr><td><code id="chooseFromList_+3A_multiple">multiple</code></td>
<td>
<p>TRUE: allows to select multiple entries. FALSE: no</p>
</td></tr>
<tr><td><code id="chooseFromList_+3A_userinput">userinput</code></td>
<td>
<p>string provided by the user. If not supplied, user is asked (mainly for testing)</p>
</td></tr>
<tr><td><code id="chooseFromList_+3A_errormessage">errormessage</code></td>
<td>
<p>string used internally to tell the user before retrying that a selection does not make sense</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list or character vector, either a boolean with same length as theList or only the selected items.
</p>


<h3>Author(s)</h3>

<p>Oliver Richters
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
 ## Not run: 
    chooseFromList(
      theList = c(Letter = "A", Letter = "B", Number = "1", Number = "2"),
      type = "characters",
      userinfo = "Please don't select B, it hurts.",
      returnBoolean = FALSE,
      multiple = TRUE)
  
## End(Not run)

</code></pre>

<hr>
<h2 id='codeCheck'>codeCheck</h2><span id='topic+codeCheck'></span>

<h3>Description</h3>

<p>Checks GAMS code for consistency. Throws out warnings if something is wrong
in the code and returns a list containing the interfaces of each module of
the code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>codeCheck(
  path = ".",
  modulepath = "modules",
  core_files = c("core/*.gms", "main.gms"),
  returnDebug = FALSE,
  interactive = FALSE,
  test_switches = TRUE,
  strict = FALSE,
  details = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="codeCheck_+3A_path">path</code></td>
<td>
<p>path of the main folder of the model</p>
</td></tr>
<tr><td><code id="codeCheck_+3A_modulepath">modulepath</code></td>
<td>
<p>path to the module folder relative to &quot;path&quot;</p>
</td></tr>
<tr><td><code id="codeCheck_+3A_core_files">core_files</code></td>
<td>
<p>list of files that belong to the core (wildcard expansion is supported)</p>
</td></tr>
<tr><td><code id="codeCheck_+3A_returndebug">returnDebug</code></td>
<td>
<p>If TRUE additional information will be returned useful for
debugging the codeCheck function</p>
</td></tr>
<tr><td><code id="codeCheck_+3A_interactive">interactive</code></td>
<td>
<p>activates an interactive developer mode in which some of
the warnings can be fixed interactively.</p>
</td></tr>
<tr><td><code id="codeCheck_+3A_test_switches">test_switches</code></td>
<td>
<p>(boolean) Should realization switches in model core be tested for completeness?
Usually set to TRUE but should be set to FALSE for standalone models only using a subset of
existing modules</p>
</td></tr>
<tr><td><code id="codeCheck_+3A_strict">strict</code></td>
<td>
<p>(boolean) test strictness. If set to TRUE warnings from codeCheck will stop calculations
at the end of the analysis. Useful to enforce clean code.</p>
</td></tr>
<tr><td><code id="codeCheck_+3A_details">details</code></td>
<td>
<p>(boolean) If activated the function will return more detailed output. Besides interface information
it will provide a table containing all declarations in the code, an appearance table listing the appearance of all
objects in the code and information about the existing modules. The format is
list(interfaceInfo,declarations,appearance,modulesInfo). This setting will be ignored
when returnDebug is set to TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Additional settings can be provided via a yaml file &quot;.codeCheck&quot; in the main
folder of the model. Currently supported settings are:
- capitalExclusionList: a list of names that should be ignored when checking
for unified capitalization of variables
</p>


<h3>Value</h3>

<p>A list of all modules containing the interfaces for each module. Or more detailed output if either
<code>details</code> or <code>returnDebug</code> is set to TRUE.
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeExtract">codeExtract</a></code>,<code><a href="#topic+readDeclarations">readDeclarations</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># check code consistency of dummy model
codeCheck(system.file("dummymodel", package = "gms"))

</code></pre>

<hr>
<h2 id='codeExtract'>codeExtract</h2><span id='topic+codeExtract'></span>

<h3>Description</h3>

<p>Returns aggregated and cleaned GAMS code together with declaration matrix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>codeExtract(codeFiles, name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="codeExtract_+3A_codefiles">codeFiles</code></td>
<td>
<p>A vector of file names of GAMS code files.</p>
</td></tr>
<tr><td><code id="codeExtract_+3A_name">name</code></td>
<td>
<p>A name indicating what collection of code files this is (e.g.
module name)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with two elements: code and declarations. Code contains the
cleaned up gams code and declarations contains the declarations matrix as
returned by <code><a href="#topic+readDeclarations">readDeclarations</a></code>
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>,<code><a href="#topic+readDeclarations">readDeclarations</a></code>
</p>

<hr>
<h2 id='convert.modularGAMS'>convert.modularGAMS</h2><span id='topic+convert.modularGAMS'></span>

<h3>Description</h3>

<p>Converts modular GAMS code from an older modular definition to the newest one
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert.modularGAMS(path = ".", modulepath = "modules/")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="convert.modularGAMS_+3A_path">path</code></td>
<td>
<p>path to the main folder of the model</p>
</td></tr>
<tr><td><code id="convert.modularGAMS_+3A_modulepath">modulepath</code></td>
<td>
<p>Module path within the model (relative to the model main
folder)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>
</p>

<hr>
<h2 id='copy_input'>copy_input</h2><span id='topic+copy_input'></span>

<h3>Description</h3>

<p>Function to copy input files to their destination folders
</p>


<h3>Usage</h3>

<pre><code class='language-R'>copy_input(x, sourcepath, suffix = NULL, move = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="copy_input_+3A_x">x</code></td>
<td>
<p>Filepath or data frame containing the mapping of files to be deleted</p>
</td></tr>
<tr><td><code id="copy_input_+3A_sourcepath">sourcepath</code></td>
<td>
<p>Path to folder containing all input files</p>
</td></tr>
<tr><td><code id="copy_input_+3A_suffix">suffix</code></td>
<td>
<p>suffix that might be part of input names that should be deleted</p>
</td></tr>
<tr><td><code id="copy_input_+3A_move">move</code></td>
<td>
<p>If TRUE files will be moved instead of copied (default=FALSE)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, David Klein
</p>

<hr>
<h2 id='delete_olddata'>delete_olddata</h2><span id='topic+delete_olddata'></span>

<h3>Description</h3>

<p>Delete data provided in mapping
</p>


<h3>Usage</h3>

<pre><code class='language-R'>delete_olddata(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="delete_olddata_+3A_x">x</code></td>
<td>
<p>Filepath or data frame containing the mapping of files to be deleted</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, David Klein
</p>

<hr>
<h2 id='download_distribute'>Download and unpack compressed data from repositories</h2><span id='topic+download_distribute'></span>

<h3>Description</h3>

<p>Downloads a list of tgz files from a list of repos and unpacks them
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_distribute(
  files,
  repositories = list(`/p/projects/rd3mod/inputdata/output` = NULL),
  modelfolder = ".",
  additionalDelete = NULL,
  debug = FALSE,
  stopOnMissing = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_distribute_+3A_files">files</code></td>
<td>
<p>a vector of files containing input data, if a file is no .tgz it will be downloaded and not unpacked</p>
</td></tr>
<tr><td><code id="download_distribute_+3A_repositories">repositories</code></td>
<td>
<p>a list of repositories (please pay attention to the list format!) in which the files
should be searched for. Files will be searched in all repositories until found, always starting with the
first repository in the list. The argument must have the format of a named list with the url of the repository
as name and a corresponding list of options such as username or password to access the repository as value. If
no options are required the value has to be NULL. (e.g.
list(&quot;ftp://my_pw_protected_server.de/data&quot;=list(user=&quot;me&quot;,password=12345), &quot;http://free_server.de/dat&quot;=NULL))</p>
</td></tr>
<tr><td><code id="download_distribute_+3A_modelfolder">modelfolder</code></td>
<td>
<p>main model folder</p>
</td></tr>
<tr><td><code id="download_distribute_+3A_additionaldelete">additionalDelete</code></td>
<td>
<p>information which additional data should be deleted before new data are downloaded and distributed</p>
</td></tr>
<tr><td><code id="download_distribute_+3A_debug">debug</code></td>
<td>
<p>switch for debug mode with additional diagnostic information</p>
</td></tr>
<tr><td><code id="download_distribute_+3A_stoponmissing">stopOnMissing</code></td>
<td>
<p>Boolean passed along to <code><a href="#topic+download_unpack">download_unpack()</a></code> to stop if
any file in <code>files</code> could not be downloaded.  Off (<code>FALSE</code>) by default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Information about the download process in form of a data.frame with data sets as row names and repositories
(where it was downloaded from) and corresponding md5sum as columns
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, Lavinia Baumstark
</p>

<hr>
<h2 id='download_unpack'>Download and unpack compressed data from repositories</h2><span id='topic+download_unpack'></span>

<h3>Description</h3>

<p>Downloads a list of tgz files from a list of repos and unpacks them. If a file is no .tgz-file it will
be only downloaded.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_unpack(
  input,
  targetdir = "input",
  repositories = NULL,
  debug = FALSE,
  unpack = TRUE,
  stopOnMissing = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_unpack_+3A_input">input</code></td>
<td>
<p>a vector of files to be downloaded or a cfg list with settings to be used (e.g. containing
cfg$input, cfg$repositories). Settings in the config list will be overwritten by other arguments of
this function if they are not set to NULL</p>
</td></tr>
<tr><td><code id="download_unpack_+3A_targetdir">targetdir</code></td>
<td>
<p>directory the files should be downloaded and extracted to</p>
</td></tr>
<tr><td><code id="download_unpack_+3A_repositories">repositories</code></td>
<td>
<p>a list of repositories (please pay attention to the list format!) in which the files
should be searched for. Files will be searched in all repositories until found, always starting with the
first repository in the list. The argument must have the format of a named list with the url of the repository
as name and a corresponding list of options such as username or password to access the repository as value. If
no options are required the value has to be NULL. (e.g.
list(&quot;ftp://my_pw_protected_server.de/data&quot;=list(user=&quot;me&quot;,password=12345), &quot;http://free_server.de/dat&quot;=NULL))</p>
</td></tr>
<tr><td><code id="download_unpack_+3A_debug">debug</code></td>
<td>
<p>switch for debug mode with additional diagnostic information</p>
</td></tr>
<tr><td><code id="download_unpack_+3A_unpack">unpack</code></td>
<td>
<p>if switched off the source files are purley downloaded</p>
</td></tr>
<tr><td><code id="download_unpack_+3A_stoponmissing">stopOnMissing</code></td>
<td>
<p>Boolean indicating whether to stop if any file in
<code>files</code> could not be downloaded.  Off (<code>FALSE</code>) by default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Information about the download process in form of a data.frame with data sets as row names and repositories
(where it was downloaded from) and corresponding md5sum as columns
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>

<hr>
<h2 id='fulldataOutput'>fulldataOutput</h2><span id='topic+fulldataOutput'></span>

<h3>Description</h3>

<p>Creates GAMS code which stores automatically the levels, bounds and
marginals of all equations and variables in time depending parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fulldataOutput(
  declarations_file = "declarations.gms",
  definitions_file = "postsolve.gms",
  warn = TRUE,
  types = c("level", "marginal"),
  ignore = "_dummy$",
  loopset = "t"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fulldataOutput_+3A_declarations_file">declarations_file</code></td>
<td>
<p>A GAMS file containing declarations. The function
will read declarations from here and add own declarations in an R
environment as used by <code><a href="#topic+replace_in_file">replace_in_file</a></code> (used subject = OUTPUT
DECLARATIONS)</p>
</td></tr>
<tr><td><code id="fulldataOutput_+3A_definitions_file">definitions_file</code></td>
<td>
<p>A GAMS file which is executed after the solve
statement but within the time step loop. Also here code will be added using
<code><a href="#topic+replace_in_file">replace_in_file</a></code> with subject OUTPUT DEFINITIONS</p>
</td></tr>
<tr><td><code id="fulldataOutput_+3A_warn">warn</code></td>
<td>
<p>Decides whether a warning should be thrown out, if the
declarations file does not exist.</p>
</td></tr>
<tr><td><code id="fulldataOutput_+3A_types">types</code></td>
<td>
<p>Types of outputs that should be written to gdx file. Available
types are level, marginal, upper and lower.</p>
</td></tr>
<tr><td><code id="fulldataOutput_+3A_ignore">ignore</code></td>
<td>
<p>regular expression pattern for variables/equations which
should be ignored by fulldataOutput</p>
</td></tr>
<tr><td><code id="fulldataOutput_+3A_loopset">loopset</code></td>
<td>
<p>Set over which loop runs</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, Felicitas Beier
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDeclarations">readDeclarations</a></code>,<code><a href="#topic+replace_in_file">replace_in_file</a></code>
</p>

<hr>
<h2 id='GAMScodeFilter'>GAMScodeFilter</h2><span id='topic+GAMScodeFilter'></span>

<h3>Description</h3>

<p>Cleans GAMS code supplied from empty lines and comments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GAMScodeFilter(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="GAMScodeFilter_+3A_x">x</code></td>
<td>
<p>A vector with lines of GAMS code (as you get by reading the code
with readLines)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The cleaned GAMS code
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDeclarations">readDeclarations</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
GAMScodeFilter(c("","*comment","a=12;","","b=13;"))

</code></pre>

<hr>
<h2 id='get_info'>get_info</h2><span id='topic+get_info'></span>

<h3>Description</h3>

<p>Function to extract information from info.txt
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_info(file, grep_expression, sep, pattern = "", replacement = "")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_info_+3A_file">file</code></td>
<td>
<p>path to info.txt (including info.txt)</p>
</td></tr>
<tr><td><code id="get_info_+3A_grep_expression">grep_expression</code></td>
<td>
<p>String before the information that should be extracted</p>
</td></tr>
<tr><td><code id="get_info_+3A_sep">sep</code></td>
<td>
<p>Separator between grep_expression and information</p>
</td></tr>
<tr><td><code id="get_info_+3A_pattern">pattern</code></td>
<td>
<p>Optional pattern to be replaced (default pattern = &quot;&quot;)</p>
</td></tr>
<tr><td><code id="get_info_+3A_replacement">replacement</code></td>
<td>
<p>Optional replacement (default replacement = &quot;&quot;)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, David Klein
</p>

<hr>
<h2 id='getfiledestinations'>getfiledestinations</h2><span id='topic+getfiledestinations'></span>

<h3>Description</h3>

<p>Create file2destination mapping based on information from the model, ignoring
top-level directories listed in <code>.gitignore</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getfiledestinations(path = ".", ignoreFolders = "renv")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getfiledestinations_+3A_path">path</code></td>
<td>
<p>main model folder</p>
</td></tr>
<tr><td><code id="getfiledestinations_+3A_ignorefolders">ignoreFolders</code></td>
<td>
<p>folders to be ignored by the function, additionally to
directories listed in <code>.gitignore</code> (by default only &quot;renv&quot;).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, David Klein
</p>

<hr>
<h2 id='getLine'>getLine</h2><span id='topic+getLine'></span>

<h3>Description</h3>

<p>Get one line of user input regardless of whether running interactively or not (via Rscript).
(base::readline does not wait for user input when running via Rscript.)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getLine()
</code></pre>


<h3>Value</h3>

<p>The user input as a string.
</p>

<hr>
<h2 id='getModules'>getModules</h2><span id='topic+getModules'></span>

<h3>Description</h3>

<p>Extract module information of a GAMS model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getModules(modulepath)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getModules_+3A_modulepath">modulepath</code></td>
<td>
<p>The path where the modules are stored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A matrix containing the different modules with name, corresponding
module number and corresponding realizations
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>
</p>

<hr>
<h2 id='interfaceplot'>interfaceplot</h2><span id='topic+interfaceplot'></span>

<h3>Description</h3>

<p>Creates an interface plot of a modular model using
<code><a href="qgraph.html#topic+qgraph">qgraph</a></code> and returns the interface information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>interfaceplot(
  x = ".",
  modules_to_include = NULL,
  modules_to_exclude = NULL,
  links_to_include = NULL,
  links_to_exclude = NULL,
  items_to_include = NULL,
  items_to_exclude = NULL,
  items_to_display = NULL,
  default_groups = list(default1 = list(name = "core", nodes = "core", color = "black",
    shape = "rectangle"), default2 = list(name = "modules", nodes = NULL, color =
    "#6c9ebf", shape = "ellipse")),
  highlight_groups = NULL,
  max_length_node_names = NULL,
  add_nodeName_legend = FALSE,
  max_num_edge_labels = NULL,
  max_num_nodes_for_edge_labels = 30,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="interfaceplot_+3A_x">x</code></td>
<td>
<p>Either an interface list as returned by
<code><a href="#topic+codeCheck">codeCheck</a></code> or the path to the main folder of the
model.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_modules_to_include">modules_to_include</code></td>
<td>
<p>NULL (default value) or a vector of strings with
names of modules to include, e.g. c(&quot;core&quot;, &quot;macro&quot;). If NULL all modules
are included.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_modules_to_exclude">modules_to_exclude</code></td>
<td>
<p>NULL (default value) or a vector of strings with
names of modules to exclude, e.g. c(&quot;core&quot;). If NULL no modules are
excluded.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_links_to_include">links_to_include</code></td>
<td>
<p>NULL (default value) or list of lists with attributes
&quot;to&quot; and &quot;from&quot;, that each take a vector of module names, e.g.
list(list(to=&quot;macro&quot;, from=&quot;core&quot;)). If NULL all links are included.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_links_to_exclude">links_to_exclude</code></td>
<td>
<p>NULL (default value) or list of lists with attributes
&quot;to&quot; and &quot;from&quot;, that each take a vector of module names, e.g.
list(list(to=&quot;macro&quot;, from=&quot;core&quot;)). If NULL no links are excluded.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_items_to_include">items_to_include</code></td>
<td>
<p>NULL (default value) or a vector of strings with
names of items to include, e.g. c(&quot;vm_cesIO&quot;, &quot;pm_pvp&quot;). Regex patterns can
also be passed, e.g. c(&quot;(v|p)m_.*&quot;). If NULL all items are included.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_items_to_exclude">items_to_exclude</code></td>
<td>
<p>NULL (default value) or a vector of strings with
names of items to exclude, e.g. c(&quot;vm_cesIO&quot;, &quot;pm_pvp&quot;). Regex patterns can
also be passed, e.g. c(&quot;sm_.*&quot;). If NULL no items are excluded.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_items_to_display">items_to_display</code></td>
<td>
<p>NULL (default value) or a vector of strings with
names of items to display, e.g. c(&quot;vm_cesIO&quot;, &quot;pm_pvp&quot;). Regex patterns can
also be passed, e.g. c(.m\ S+). If NULL no items are displayed.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_default_groups">default_groups</code></td>
<td>
<p>List of lists with default group definitions. Defines
the default formatting of the interface plot. By default, there are two
groups, see usage, a &quot;core&quot; group made up of only the &quot;core&quot; module and a
&quot;modules&quot; group made up of all the rest. If a &quot;core&quot; module doesn't exist,
then that group is simply ignored.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_highlight_groups">highlight_groups</code></td>
<td>
<p>NULL (default value) or a list of lists with
highlight-group definitions. By defining highligh groups,
additional/specalized formatting can be applied to select modules. A group
is defined by a list with the following attributes: </p>
 <ul>
<li><p> name: a
string with the group name. Will appear in legend. </p>
</li>
<li><p> nodes: a vector of
strings with module names. </p>
</li>
<li><p> shape: a string with a valid qgraph shape.
</p>
</li>
<li><p> color: a string with a valid qgraph color. </p>
</li>
<li><p> edges_to_highlight:
</p>
<ul>
<li><p> NULL = no edges are colored </p>
</li>
<li><p> &quot;all&quot; = edges starting
from and ending at the highlight group's nodes are colored </p>
</li>
<li><p> &quot;incoming&quot;
= edges ending at the highlight group's nodes are colored </p>
</li>
<li><p> &quot;outgoing&quot;
= edges starting from the highlight group's nodes are colored </p>
</li>
<li>
<p>&quot;within&quot; = only edges that departed from the highlight group's nodes and
end at them as well are colored</p>
</li></ul>
 </li>
<li><p> edges_to_ignore: </p>
<ul>
<li><p> NULL
= no edges are ignored </p>
</li>
<li><p> &quot;outside&quot; edges that neither start from or end
at any of the group's nodes are ignored </p>
</li>
<li><p> &quot;incoming&quot; edges that do not
depart from one of the group's nodes are ignored </p>
</li>
<li><p> &quot;outgoing&quot; edges
that do not arrive at one of the group's nodes are ignored </p>
</li>
<li>
<p>&quot;outgoing_to_no_return&quot; edges that departing from nodes outside of the
group and not ending at nodes within the group are ignored </p>
</li></ul>
</li></ul>
<p> An example:
<code>list(list(name = "highlight", nodes = "welfare", color = "#ff8f00",
shape = "ellipse", edges_to_highlight = "outgoing", edges_to_ignore =
"outside"))</code>.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_max_length_node_names">max_length_node_names</code></td>
<td>
<p>NULL (default value) or an integer n giving the
maximum number of characters allowed in the node names. If not NULL, node
names are truncated after n characters, e.g. n=3: &quot;example&quot; -&gt; &quot;exa.&quot;.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_add_nodename_legend">add_nodeName_legend</code></td>
<td>
<p>Logical (default FALSE) to add node names in
legend, structured by group.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_max_num_edge_labels">max_num_edge_labels</code></td>
<td>
<p>NULL (default value), an integer or the string
&quot;adjust&quot;. If NULL, all edge lables are displayed. If given an integer n, a
maximum of n edge labels are shown.  If set to &quot;adjust&quot;, the number of edge
labels displayed decreases with the number of nodes.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_max_num_nodes_for_edge_labels">max_num_nodes_for_edge_labels</code></td>
<td>
<p>Integer, (default value = 30). The
maximum number of nodes after which no edge labels are displayed.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_...">...</code></td>
<td>
<p>Optional arguments to <code><a href="qgraph.html#topic+qgraph">qgraph</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>What modules (=nodes), links (=edges) and items (=what is passed along the
edges) are taken into account when creating the plot can be fine-tuned with
the &quot;_include&quot;, &quot;_exclude&quot; arguments.
</p>
<p>The &quot;default&quot;- and &quot;highlight_groups&quot; arguments control the formatting (and
also the composition through &quot;highlight_group$edges_to_ignore&quot;). Groups in
qqgraph are a way of clustering nodes together. The default formatting of the
plot is defined with the &quot;default_groups&quot; argument. On top of that additional
groups can be defined with the &quot;highlight_groups&quot; argument.
</p>
<p>The rest of the arguments are pretty self-explanatory. Just remember that
<code><a href="qgraph.html#topic+qgraph">qgraph</a></code> arguments can be passed on as well! Useful ones
include: fade=T/F, legend=T/F, legend.cex (size of the legend font), GLratio
(graph/legend size ratio, edge.label.cex (size of the edge label font)).
</p>


<h3>Value</h3>

<p>A tibble with the edge list and interface items.
</p>


<h3>Author(s)</h3>

<p>Johannes Koch
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>,<code><a href="qgraph.html#topic+qgraph">qgraph</a></code>
</p>

<hr>
<h2 id='is.modularGAMS'>is.modularGAMS</h2><span id='topic+is.modularGAMS'></span>

<h3>Description</h3>

<p>Checks whether a folder seems to contain modular GAMS code or not.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.modularGAMS(path = ".", version = FALSE, modulepath = "modules/")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is.modularGAMS_+3A_path">path</code></td>
<td>
<p>path to the main folder of the model</p>
</td></tr>
<tr><td><code id="is.modularGAMS_+3A_version">version</code></td>
<td>
<p>if TRUE returns the version of the modular structure or FALSE, 
otherwise returns a boolean indicating whether it is modular or not.</p>
</td></tr>
<tr><td><code id="is.modularGAMS_+3A_modulepath">modulepath</code></td>
<td>
<p>Module path within the model (relative to the model main
folder)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is.modularGAMS(system.file("dummymodel",package="gms"))

</code></pre>

<hr>
<h2 id='loadConfig'>Load Config</h2><span id='topic+loadConfig'></span>

<h3>Description</h3>

<p>Load config in YAML format as written via
<code><a href="#topic+saveConfig">saveConfig</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadConfig(cfg)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="loadConfig_+3A_cfg">cfg</code></td>
<td>
<p>Either a character string naming a file which containes the config
or a character string containing the config as YAML code.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To read in the default configuration (stored as R list in default.cfg or in a gams file), use
<code><a href="#topic+readDefaultConfig">readDefaultConfig</a></code> instead.
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+saveConfig">saveConfig</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cfg &lt;- list(input = c(data1 = "blub.tgz", data2 = "bla.tgz"), mode = "default")
yml &lt;- saveConfig(cfg)
loadConfig(yml)
</code></pre>

<hr>
<h2 id='model_dependencies'>Function to detect R package dependencies</h2><span id='topic+model_dependencies'></span>

<h3>Description</h3>

<p>This function analyzes a model folder and all subfolders and searches
for library and require statements.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>model_dependencies(mainfolder = ".")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="model_dependencies_+3A_mainfolder">mainfolder</code></td>
<td>
<p>main folder of the model to be analyzed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of dependencies sorted by appearances
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>

<hr>
<h2 id='model_lock'>Model lock/unlock</h2><span id='topic+model_lock'></span><span id='topic+model_unlock'></span><span id='topic+is_model_locked'></span>

<h3>Description</h3>

<p>Lock the model to coordinate multiple processes accessing the model.
This is necessary if you change files within the model and have to
avoid that another process reads from your half-written changes in
the mean time.
model_lock creates an exclusive lock on the given file and returns
a lock id. When the lock id is handed to model_unlock the lock is
dropped again, and another process can take the lock. The lock
is also dropped when the lock id goes out of scope and is garbage
collected in R or when the R process terminates or crashes. However,
it is good practice to explicitly call model_unlock when you don't
need the lock anymore.
If you want to check for informational purposes if the model is
currently locked by another process, you can use the is_model_locked()
function.
Note however that you should never use is_model_locked() to coordinate
access to the model folder. The return value of is_model_locked() is
only a snapshot at the time when the function is run.
Note additionally that is_model_locked() checks if the model is
locked by another process. If you currently hold the lock of the model
yourself, it will return FALSE.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>model_lock(folder = ".", file = ".lock", timeout1 = 12, timeout2 = NULL,
check_interval = NULL, oncluster = NULL)
model_unlock(id, folder = NULL, file = NULL, oncluster = NULL)
is_model_locked(folder = ".", file = ".lock")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="model_lock_+3A_folder">folder</code></td>
<td>
<p>path to the model folder</p>
</td></tr>
<tr><td><code id="model_lock_+3A_file">file</code></td>
<td>
<p>file name of the lock file. Don't use the lock file for anything
else (i.e. don't read or write or open the lock file).</p>
</td></tr>
<tr><td><code id="model_lock_+3A_timeout1">timeout1</code></td>
<td>
<p>Time in hours to wait for other processes to free the lock
before giving up and exiting with an error.</p>
</td></tr>
<tr><td><code id="model_lock_+3A_timeout2">timeout2</code></td>
<td>
<p>deprecated setting which will be ignored.</p>
</td></tr>
<tr><td><code id="model_lock_+3A_check_interval">check_interval</code></td>
<td>
<p>deprecated setting which will be ignored.</p>
</td></tr>
<tr><td><code id="model_lock_+3A_oncluster">oncluster</code></td>
<td>
<p>deprecated setting which will be ignored.</p>
</td></tr>
<tr><td><code id="model_lock_+3A_id">id</code></td>
<td>
<p>lock id as returned by model_lock.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>model_lock returns the lock id which is needed
to identify the lock in model_unlock.
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, David Klein, Mika Pflüger
</p>


<h3>See Also</h3>

<p><code><a href="#topic+check_config">check_config</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#lock folder
id &lt;- model_lock(tempdir())

#unlock folder
model_unlock(id)
</code></pre>

<hr>
<h2 id='module.skeleton'>Create a Module skeleton</h2><span id='topic+module.skeleton'></span>

<h3>Description</h3>

<p>This function creates you a module skeleton which you can use to easily
create your own modules.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>module.skeleton(
  number,
  name,
  types,
  modelpath = ".",
  modulepath = "modules/",
  includefile = "modules/include.gms",
  version = is.modularGAMS(modelpath, version = TRUE)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="module.skeleton_+3A_number">number</code></td>
<td>
<p>Number of your module, typically something between 0-99. Sorts
the execution of your modules. Please use a number which is not used, yet.</p>
</td></tr>
<tr><td><code id="module.skeleton_+3A_name">name</code></td>
<td>
<p>Name of your module (please choose a short name). If you want to
extend an existing module (add a new realisation) use the name of the
existing one.</p>
</td></tr>
<tr><td><code id="module.skeleton_+3A_types">types</code></td>
<td>
<p>Vector of names for the different module types (e.g. &quot;on&quot; or
&quot;off&quot;). If you want to extend an existing module (add a new realisation),
put here the additional type(s)</p>
</td></tr>
<tr><td><code id="module.skeleton_+3A_modelpath">modelpath</code></td>
<td>
<p>Path of the MAgPIE version that should be updated (main
folder).</p>
</td></tr>
<tr><td><code id="module.skeleton_+3A_modulepath">modulepath</code></td>
<td>
<p>Module path within MAgPIE (relative to the MAgPIE main
folder)</p>
</td></tr>
<tr><td><code id="module.skeleton_+3A_includefile">includefile</code></td>
<td>
<p>Name and location of the file which includes all modules
(relative to main folder)</p>
</td></tr>
<tr><td><code id="module.skeleton_+3A_version">version</code></td>
<td>
<p>version of the modular GAMS code structure (1 or 2)</p>
</td></tr>
</table>


<h3>Note</h3>

<p>Module phases are automatically detected checking the main code of the
model, but not checking code in modules. If you want to use additional
phases which are only included within a module, you need to specify them
manually by adding a comment into your gams code indicating that there is an
additional phase. The syntax is &quot;* !add_phase!: &lt;phase&gt;&quot;, e.g. &quot;*
!add_phase!: new_phase&quot;
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>Examples</h3>

<pre><code class='language-R'># copy dummymodel to temporary directory and add new module "bla"
file.copy(system.file("dummymodel",package="gms"),tempdir(), recursive = TRUE)
model   &lt;- paste0(tempdir(),"/dummymodel")
module.skeleton(number="03", name="bla", types=c("on","off"), modelpath=model)

</code></pre>

<hr>
<h2 id='modules_interfaceplot'>modules_interfaceplot</h2><span id='topic+modules_interfaceplot'></span>

<h3>Description</h3>

<p>Function that applies <code><a href="#topic+interfaceplot">interfaceplot</a></code> for a whole model and
all its modules.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modules_interfaceplot(
  x = ".",
  modulepath = "modules",
  filetype = "png",
  targetfolder = NULL,
  writetable = TRUE,
  includeCore = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="modules_interfaceplot_+3A_x">x</code></td>
<td>
<p>Either the object returned by <code><a href="#topic+codeCheck">codeCheck</a></code> or the path to
the main folder of the model.</p>
</td></tr>
<tr><td><code id="modules_interfaceplot_+3A_modulepath">modulepath</code></td>
<td>
<p>Path to the modules folder</p>
</td></tr>
<tr><td><code id="modules_interfaceplot_+3A_filetype">filetype</code></td>
<td>
<p>Filetype that should be used (e.g. &quot;png&quot; or &quot;pdf&quot;)</p>
</td></tr>
<tr><td><code id="modules_interfaceplot_+3A_targetfolder">targetfolder</code></td>
<td>
<p>Folder outputs should be written to. If set to NULL
outputs will be added to corresponding module folders</p>
</td></tr>
<tr><td><code id="modules_interfaceplot_+3A_writetable">writetable</code></td>
<td>
<p>Logical deciding whether a csv containing the interfaces
should be written as well.</p>
</td></tr>
<tr><td><code id="modules_interfaceplot_+3A_includecore">includeCore</code></td>
<td>
<p>Logical to create plot for core or not, default FALSE.</p>
</td></tr>
<tr><td><code id="modules_interfaceplot_+3A_...">...</code></td>
<td>
<p>Optional arguments to <code><a href="#topic+interfaceplot">interfaceplot</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with interface tables for each module
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>,<code><a href="#topic+interfaceplot">interfaceplot</a></code>
</p>

<hr>
<h2 id='path'>path</h2><span id='topic+path'></span>

<h3>Description</h3>

<p>Small function to build a consistent path-string based on folder, filename
and filetype. The function makes sure that slashes and the dot for the file
ending are set correctly (you can supply your folder name either with or
without a tailing slash in it. It does not matter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>path(..., ftype = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="path_+3A_...">...</code></td>
<td>
<p>the folders and the file name that should be pasted to a
file/folder path</p>
</td></tr>
<tr><td><code id="path_+3A_ftype">ftype</code></td>
<td>
<p>file type</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A string containing the path combined of folder, filename and
filetype
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>

<hr>
<h2 id='publish_data'>Publish data in a repository</h2><span id='topic+publish_data'></span>

<h3>Description</h3>

<p>Downloads a list of tgz files from a list of repos, merge them and publish it on another server
</p>


<h3>Usage</h3>

<pre><code class='language-R'>publish_data(
  input,
  name = NULL,
  target = Sys.getenv("PUBLISH_DATA_TARGET", unset = "."),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="publish_data_+3A_input">input</code></td>
<td>
<p>a vector of files to be downloaded or a cfg list with settings to be used (e.g. containing
cfg$input, cfg$repositories). Settings in the config list will be overwritten by other arguments of
this function if they are not set to NULL</p>
</td></tr>
<tr><td><code id="publish_data_+3A_name">name</code></td>
<td>
<p>name of the data to be published (will be used in as file name). If no name is given (default) source
files will be published as is (separate tgz files with original name).</p>
</td></tr>
<tr><td><code id="publish_data_+3A_target">target</code></td>
<td>
<p>target the data should be published in (format user@server:/folder/path) If a target vector, or targets
separated by &quot;|&quot; are provided the user will be asked interactively where the file should be written to.
By default it will look for target information in the environment variable PUBLISH_DATA_TARGET</p>
</td></tr>
<tr><td><code id="publish_data_+3A_...">...</code></td>
<td>
<p>further options provided to <code><a href="#topic+download_unpack">download_unpack</a></code></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+download_unpack">download_unpack</a></code>,<code><a href="#topic+tardir">tardir</a></code>
</p>

<hr>
<h2 id='read_yaml_header'>read_yaml_header</h2><span id='topic+read_yaml_header'></span>

<h3>Description</h3>

<p>Reads header written in yaml format from a file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_yaml_header(file, n = 20)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_yaml_header_+3A_file">file</code></td>
<td>
<p>path to the file which contains the YAML header</p>
</td></tr>
<tr><td><code id="read_yaml_header_+3A_n">n</code></td>
<td>
<p>Number of lines to be read (header must be part of these lines in order to be read)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the read in information
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>

<hr>
<h2 id='readDeclarations'>readDeclarations</h2><span id='topic+readDeclarations'></span>

<h3>Description</h3>

<p>Reads all declarations given in a GAMS code and returns them.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readDeclarations(
  file,
  unlist = TRUE,
  types = c("scalar", "(positive |)variable", "parameter", "table", "equation", "set")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readDeclarations_+3A_file">file</code></td>
<td>
<p>A gams file or a vector containing GAMS code.</p>
</td></tr>
<tr><td><code id="readDeclarations_+3A_unlist">unlist</code></td>
<td>
<p>A logical indicating whether the output should be returned as
a list separated by object type or a matrix.</p>
</td></tr>
<tr><td><code id="readDeclarations_+3A_types">types</code></td>
<td>
<p>of declarations to be read.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Either a list of declared objects or a matrix containing object
name, the sets the object depends on and the description.
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>
</p>

<hr>
<h2 id='readDefaultConfig'>readDefaultConfig</h2><span id='topic+readDefaultConfig'></span>

<h3>Description</h3>

<p>Reads the default configuration of the model. Uses default.cfg or main.cfg as the source as appropriate.
To read a configuration from YAML format, use <code><a href="#topic+loadConfig">loadConfig</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readDefaultConfig(path)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readDefaultConfig_+3A_path">path</code></td>
<td>
<p>path of the main folder of the model</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of parameter values and their names.
</p>


<h3>Author(s)</h3>

<p>Mika Pflüger
</p>


<h3>See Also</h3>

<p><code><a href="#topic+loadConfig">loadConfig</a></code>
</p>

<hr>
<h2 id='readFileOrVector'>readFileOrVector</h2><span id='topic+readFileOrVector'></span>

<h3>Description</h3>

<p>Input: a file name or a character vector. Output: a character vector of the contents of the file, or
the character vector unchanged.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readFileOrVector(file)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readFileOrVector_+3A_file">file</code></td>
<td>
<p>A file name or a character vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of the inputs of the file.
</p>


<h3>Author(s)</h3>

<p>Mika Pflüger
</p>

<hr>
<h2 id='readParameterValues'>readParameterValues</h2><span id='topic+readParameterValues'></span>

<h3>Description</h3>

<p>Read values of given parameters from a given GAMS code section.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readParameterValues(code, parameters)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readParameterValues_+3A_code">code</code></td>
<td>
<p>A vector with GAMS code.</p>
</td></tr>
<tr><td><code id="readParameterValues_+3A_parameters">parameters</code></td>
<td>
<p>A vector with GAMS parameter names</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The GAMS code section should contain statements of the form
parameter = value;
for all the given parameters.
</p>


<h3>Value</h3>

<p>A vector of values the parameters are set to with parameter names as
names.
</p>


<h3>Author(s)</h3>

<p>Mika Pflüger
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDeclarations">readDeclarations</a></code>
</p>

<hr>
<h2 id='readSetglobals'>readSetglobals</h2><span id='topic+readSetglobals'></span>

<h3>Description</h3>

<p>Reads all setglobals given in a GAMS code and returns them.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readSetglobals(file)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readSetglobals_+3A_file">file</code></td>
<td>
<p>A gams file or a vector containing GAMS code.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of values the setglobal variables are set to with setglobal
variables as names.
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDeclarations">readDeclarations</a></code>
</p>

<hr>
<h2 id='readSettings'>readSettings</h2><span id='topic+readSettings'></span>

<h3>Description</h3>

<p>Reads all settings (parameters, globals, and their respective values)
in the given GAMS code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readSettings(file)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readSettings_+3A_file">file</code></td>
<td>
<p>A gams file or a vector containing GAMS code.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of parameter values and their names.
</p>


<h3>Author(s)</h3>

<p>Mika Pflüger
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDeclarations">readDeclarations</a></code>
</p>

<hr>
<h2 id='replace_in_file'>Replace in File</h2><span id='topic+replace_in_file'></span>

<h3>Description</h3>

<p>Function to replace a marked paragaph in a text file. Paragraph has to be
marked in the text file with an initial &quot;##### R SECTION START (SUBJECT)
#####&quot; and &quot;##### R SECTION END (SUBJECT) #####&quot; as ending. The number of #
symbols can be chosen by the user, but there has to be at least one at the
beginning and one at the end. Furthermore it is allowed to add further
symbols at the beginning or the end of the line. &quot;SUBJECT&quot; is chosen by the
user and is used for identification, if a text file has more than one R
section.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>replace_in_file(
  file,
  content,
  subject = "CODE",
  add = FALSE,
  addfile = FALSE,
  comment = "*"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="replace_in_file_+3A_file">file</code></td>
<td>
<p>a connection object or a character string describing the file,
that should be manipulated.</p>
</td></tr>
<tr><td><code id="replace_in_file_+3A_content">content</code></td>
<td>
<p>the content that should be used as replacement stored as a
vector of strings. Each vector component will be written as a line.</p>
</td></tr>
<tr><td><code id="replace_in_file_+3A_subject">subject</code></td>
<td>
<p>A string used for identification of a paragraph.</p>
</td></tr>
<tr><td><code id="replace_in_file_+3A_add">add</code></td>
<td>
<p>Determines behavior when marking is missing in the code.
add=FALSE will throw out an error, if the marking is missing, add=&quot;top&quot; will
add the markings automatically at the beginning of the file, add=&quot;bottom&quot; or
add=TRUE will do the same but at the end of the file.</p>
</td></tr>
<tr><td><code id="replace_in_file_+3A_addfile">addfile</code></td>
<td>
<p>Determines the behavior when the file does not exist. If
addfile=TRUE, file will be created when missing.</p>
</td></tr>
<tr><td><code id="replace_in_file_+3A_comment">comment</code></td>
<td>
<p>Symbol which is used to indicate a comment in the language
the file is written that should be manipulated. Only relevant if add or
addfile are used.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>

<hr>
<h2 id='saveConfig'>Save Config</h2><span id='topic+saveConfig'></span>

<h3>Description</h3>

<p>Saves config in YAML format so that it can be read in again via
<code><a href="#topic+loadConfig">loadConfig</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saveConfig(cfg, file = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="saveConfig_+3A_cfg">cfg</code></td>
<td>
<p>Input config which should be saved</p>
</td></tr>
<tr><td><code id="saveConfig_+3A_file">file</code></td>
<td>
<p>A character string naming a file. If set to NULL the YAML output
will be returned by the function.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+loadConfig">loadConfig</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cfg &lt;- list(input = c(data1 = "blub.tgz", data2 = "bla.tgz"), mode = "default")
saveConfig(cfg)
</code></pre>

<hr>
<h2 id='selectScript'>selectScript</h2><span id='topic+selectScript'></span>

<h3>Description</h3>

<p>Functions which allows for interactive selection of scripts/files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>selectScript(folder = ".", ending = "R")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="selectScript_+3A_folder">folder</code></td>
<td>
<p>Folder in which the files/scripts are located which should
be selected from.</p>
</td></tr>
<tr><td><code id="selectScript_+3A_ending">ending</code></td>
<td>
<p>File ending of the files to be selected (without dot)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of paths to files selected by the user
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>

<hr>
<h2 id='setScenario'>setScenario</h2><span id='topic+setScenario'></span>

<h3>Description</h3>

<p>setScenario is adapting a given config to a predefined scenario, meaning
that all settings which are fixed for the given scenario are written to the
config. Settings not defined by the scenario remain unchanged.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setScenario(cfg, scenario, scenario_config = "config/scenario_config.csv")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="setScenario_+3A_cfg">cfg</code></td>
<td>
<p>Input config which should be adapted to the given scenario</p>
</td></tr>
<tr><td><code id="setScenario_+3A_scenario">scenario</code></td>
<td>
<p>name of scenario (e.g. &quot;SSP2&quot;). Can also be a vector of
scenarios. In this case scenario settings are applied in the given order</p>
</td></tr>
<tr><td><code id="setScenario_+3A_scenario_config">scenario_config</code></td>
<td>
<p>The path where the scenario config table is stored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated config as a config list ready for further usage.
</p>


<h3>Note</h3>

<p>The scenario config table is a table which contains as columns the
different scenarios and as rows the different settings. Empty entries for a
given scenario-setting combination indicate that this setting is not defined
by the scenario and should not be changed by set Scenario!
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, Anastasis Giannousakis
</p>


<h3>See Also</h3>

<p><code><a href="#topic+check_config">check_config</a></code>,<code><a href="#topic+getModules">getModules</a></code>
</p>

<hr>
<h2 id='settingsCheck'>settingsCheck</h2><span id='topic+settingsCheck'></span>

<h3>Description</h3>

<p>Checks GAMS setglobals in code for consistency. Creates a warning if a
setglobal command for an existing module is missing or a module is set to a
realization which does not exist.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>settingsCheck(path = ".", modulepath = "modules", fileName = "main.gms")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="settingsCheck_+3A_path">path</code></td>
<td>
<p>path of the main folder of the model</p>
</td></tr>
<tr><td><code id="settingsCheck_+3A_modulepath">modulepath</code></td>
<td>
<p>path to the module folder relative to &quot;path&quot;</p>
</td></tr>
<tr><td><code id="settingsCheck_+3A_filename">fileName</code></td>
<td>
<p>name of the file containing setglobals, relative to &quot;path&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing is returned.
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>
</p>

<hr>
<h2 id='singleGAMSfile'>Merge GAMS code into single file</h2><span id='topic+singleGAMSfile'></span>

<h3>Description</h3>

<p>This function merges GAMS code which is distributed over severals files into
a single GAMS file. Optionally, it also embeds R scripts into the single GAMS
file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>singleGAMSfile(
  modelpath = ".",
  mainfile = "main.gms",
  output = "full.gms",
  embedRScripts = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="singleGAMSfile_+3A_modelpath">modelpath</code></td>
<td>
<p>The path where the model is stored</p>
</td></tr>
<tr><td><code id="singleGAMSfile_+3A_mainfile">mainfile</code></td>
<td>
<p>The path to the main gams file (relative to the model path)</p>
</td></tr>
<tr><td><code id="singleGAMSfile_+3A_output">output</code></td>
<td>
<p>Name of the single output GAMS file.</p>
</td></tr>
<tr><td><code id="singleGAMSfile_+3A_embedrscripts">embedRScripts</code></td>
<td>
<p>If TRUE, R scripts called by GAMS via Execute are also embedded. Default FALSE</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, Anastasis Giannousakis
</p>


<h3>Examples</h3>

<pre><code class='language-R'># copy dummymodel create single gms file out of it
file.copy(system.file("dummymodel", package = "gms"), tempdir(), recursive = TRUE)
model      &lt;- paste0(tempdir(), "/dummymodel")
singlefile &lt;- paste0(tempdir(), "/full.gms")
singleGAMSfile(modelpath = model, output = singlefile)

</code></pre>

<hr>
<h2 id='tardir'>Create tgz archive from directory</h2><span id='topic+tardir'></span>

<h3>Description</h3>

<p>Creates a tgz from all files in a directory
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tardir(dir = ".", tarfile = "data.tgz")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tardir_+3A_dir">dir</code></td>
<td>
<p>directory from which the tar file should be generated</p>
</td></tr>
<tr><td><code id="tardir_+3A_tarfile">tarfile</code></td>
<td>
<p>name of the archive the data should be written to (tgz file)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>Examples</h3>

<pre><code class='language-R'># copy dummymodel to temporary directory and compress it
file.copy(system.file("dummymodel",package="gms"),tempdir(), recursive = TRUE)
model   &lt;- paste0(tempdir(),"/dummymodel")
archive &lt;- paste0(tempdir(),"/dummymodel.tgz")
tardir(model,archive)

</code></pre>

<hr>
<h2 id='update_fulldataOutput'>update_fulldataOutput</h2><span id='topic+update_fulldataOutput'></span>

<h3>Description</h3>

<p>Creates GAMS code which stores automatically the levels and marginals of all
equations and variables in time depending parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_fulldataOutput(
  modelpath = ".",
  modulepath = "modules",
  corepath = "core",
  loopset = "t"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="update_fulldataOutput_+3A_modelpath">modelpath</code></td>
<td>
<p>Path of the Model version that should be updated (main
folder).</p>
</td></tr>
<tr><td><code id="update_fulldataOutput_+3A_modulepath">modulepath</code></td>
<td>
<p>Module path within the model (relative to the model main
folder)</p>
</td></tr>
<tr><td><code id="update_fulldataOutput_+3A_corepath">corepath</code></td>
<td>
<p>Core path within the model (relative to the model main
folder)</p>
</td></tr>
<tr><td><code id="update_fulldataOutput_+3A_loopset">loopset</code></td>
<td>
<p>Set over which loop runs</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, Felicitas Beier
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fulldataOutput">fulldataOutput</a></code>,<code><a href="#topic+replace_in_file">replace_in_file</a></code>
</p>

<hr>
<h2 id='update_modules_embedding'>Update Modules Embedding in GAMS code</h2><span id='topic+update_modules_embedding'></span>

<h3>Description</h3>

<p>A function that updates in the GAMS code all include commands which are
related to Modules. The function automatically checks which modules exist
and which files in these modules exist and creates the corresponding include
commands in GAMS
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_modules_embedding(
  modelpath = ".",
  modulepath = "modules/",
  includefile = "modules/include.gms",
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="update_modules_embedding_+3A_modelpath">modelpath</code></td>
<td>
<p>Path to the model that should be updated (main
folder).</p>
</td></tr>
<tr><td><code id="update_modules_embedding_+3A_modulepath">modulepath</code></td>
<td>
<p>Module path within the model (relative to the model main
folder)</p>
</td></tr>
<tr><td><code id="update_modules_embedding_+3A_includefile">includefile</code></td>
<td>
<p>Name and location of the file which includes all modules
(relative to main folder)</p>
</td></tr>
<tr><td><code id="update_modules_embedding_+3A_verbose">verbose</code></td>
<td>
<p>Defines whether additional information should be printed or
not.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>Module phases are automatically detected checking the main code of the
model, but not checking code in modules. If you want to use additional
phases which are only included within a module, you need to specify them
manually by adding a comment into your gams code indicating that there is an
additional phase. The syntax is &quot;* !add_phase!: &lt;phase&gt;&quot;, e.g. &quot;*
!add_phase!: new_phase&quot;
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>Examples</h3>

<pre><code class='language-R'># copy dummymodel to temporary directory and update module embedding
file.copy(system.file("dummymodel", package="gms"), tempdir(), recursive = TRUE)
model   &lt;- paste0(tempdir(),"/dummymodel")
update_modules_embedding(model)

</code></pre>

<hr>
<h2 id='updateInterfaceMapping'>updateInterfaceMapping</h2><span id='topic+updateInterfaceMapping'></span>

<h3>Description</h3>

<p>Function to update the mapping between interfaces and their origin modules.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>updateInterfaceMapping(path = ".", modulepath = "modules")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="updateInterfaceMapping_+3A_path">path</code></td>
<td>
<p>path of the main folder of the model</p>
</td></tr>
<tr><td><code id="updateInterfaceMapping_+3A_modulepath">modulepath</code></td>
<td>
<p>path to the module folder relative to &quot;path&quot;</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>
</p>

<hr>
<h2 id='writeSets'>writeSets</h2><span id='topic+writeSets'></span>

<h3>Description</h3>

<p>Function to write a set declaration in GAMS syntax given either a
a character vector or a data.frame (latter to represent a mapping set)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>writeSets(sets, file = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="writeSets_+3A_sets">sets</code></td>
<td>
<p>a list of sets where every set is another list consisting of 
three entries: name (set name as character), desc (set description as 
character) and items (set elements, either as character vector or data.frame)</p>
</td></tr>
<tr><td><code id="writeSets_+3A_file">file</code></td>
<td>
<p>Name of the file the set declarations should be written to. If
NULL the result will just be returned by the function. The file must exist
and contain a line of the form &quot;##### R SECTION START (SETS) #####&quot;
followed by a line of the form ##### R SECTION END (SETS) ##### to indicate
the part of the file that should be replaced with the set declaration!</p>
</td></tr>
</table>


<h3>Value</h3>

<p>set declaration in GAMS syntax
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, Florian Humpenöder
</p>


<h3>Examples</h3>

<pre><code class='language-R'>countries &lt;- c("DEU", "FRA", "ENG", "ITA", "NLD", "POL")
map &lt;- data.frame(region = rep(c("REG1","REG2"), 3), countries = countries)
sets &lt;- list(list(name  = "countries", 
                  desc  = "list of countries", 
                  items = countries),
             list(name = "country2region",
                  desc = "mapping between countries and regions",
                  items = map))
 cat(writeSets(sets), sep="\n")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
