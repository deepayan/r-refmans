<!DOCTYPE html><html><head><title>Help for package gms</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {gms}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#check_config'><p>Check config</p></a></li>
<li><a href='#checkAppearance'><p>checkAppearance</p></a></li>
<li><a href='#checkDescription'><p>checkDescription</p></a></li>
<li><a href='#checkSwitchAppearance'><p>checkSwitchAppearance</p></a></li>
<li><a href='#codeCheck'><p>codeCheck</p></a></li>
<li><a href='#codeExtract'><p>codeExtract</p></a></li>
<li><a href='#convert.modularGAMS'><p>convert.modularGAMS</p></a></li>
<li><a href='#copy_input'><p>copy_input</p></a></li>
<li><a href='#delete_olddata'><p>delete_olddata</p></a></li>
<li><a href='#download_distribute'><p>Download and unpack compressed data from repositories</p></a></li>
<li><a href='#download_unpack'><p>Download and unpack compressed data from repositories</p></a></li>
<li><a href='#fulldataOutput'><p>fulldataOutput</p></a></li>
<li><a href='#GAMScodeFilter'><p>GAMScodeFilter</p></a></li>
<li><a href='#get_info'><p>get_info</p></a></li>
<li><a href='#getfiledestinations'><p>getfiledestinations</p></a></li>
<li><a href='#getModules'><p>getModules</p></a></li>
<li><a href='#interfaceplot'><p>interfaceplot</p></a></li>
<li><a href='#is.modularGAMS'><p>is.modularGAMS</p></a></li>
<li><a href='#model_dependencies'><p>Function to detect R package dependencies</p></a></li>
<li><a href='#model_lock'><p>Model lock/unlock</p></a></li>
<li><a href='#module.skeleton'><p>Create a Module skeleton</p></a></li>
<li><a href='#modules_interfaceplot'><p>modules_interfaceplot</p></a></li>
<li><a href='#path'><p>path</p></a></li>
<li><a href='#publish_data'><p>Publish data in a repository</p></a></li>
<li><a href='#read_yaml_header'><p>read_yaml_header</p></a></li>
<li><a href='#readDeclarations'><p>readDeclarations</p></a></li>
<li><a href='#readSetglobals'><p>readSetglobals</p></a></li>
<li><a href='#replace_in_file'><p>Replace in File</p></a></li>
<li><a href='#selectScript'><p>selectScript</p></a></li>
<li><a href='#setScenario'><p>setScenario</p></a></li>
<li><a href='#settingsCheck'><p>settingsCheck</p></a></li>
<li><a href='#singleGAMSfile'><p>Merge GAMS code into single file</p></a></li>
<li><a href='#tardir'><p>Creative tgz archive from directory</p></a></li>
<li><a href='#update_fulldataOutput'><p>update_fulldataOutput</p></a></li>
<li><a href='#update_modules_embedding'><p>Update Modules Embedding in GAMS code</p></a></li>
<li><a href='#updateInterfaceMapping'><p>updateInterfaceMapping</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>'GAMS' Modularization Support Package</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-06-17</td>
</tr>
<tr>
<td>Description:</td>
<td>A collection of tools to create, use and maintain modularized model code written in the modeling 
    language 'GAMS' (<a href="https://www.gams.com/">https://www.gams.com/</a>). Out-of-the-box 'GAMS' does not come with support for modularized
    model code. This package provides the tools necessary to convert a standard 'GAMS' model to a modularized one
    by introducing a modularized code structure together with a naming convention which emulates local
    environments. In addition, this package provides tools to monitor the compliance of the model code with
    modular coding guidelines.</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, rlang, stringr, yaml</td>
</tr>
<tr>
<td>Suggests:</td>
<td>curl, magclass, qgraph, testthat</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/pik-piam/gms">https://github.com/pik-piam/gms</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/pik-piam/gms/issues">https://github.com/pik-piam/gms/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/BSD-2-Clause">BSD_2_clause</a> + file LICENSE</td>
</tr>
<tr>
<td>LazyData:</td>
<td>no</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-07-01 13:52:26 UTC; dietrich</td>
</tr>
<tr>
<td>Author:</td>
<td>Jan Philipp Dietrich [aut, cre],
  David Klein [aut],
  Anastasis Giannousakis [aut],
  Felicitas Beier [aut],
  Johannes Koch [aut],
  Lavinia Baumstark [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jan Philipp Dietrich &lt;dietrich@pik-potsdam.de&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-07-01 15:00:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='check_config'>Check config</h2><span id='topic+check_config'></span>

<h3>Description</h3>

<p>Checks a model configuration file for consistency by comparing it to a
reference config file and the given module structure of the model. The
function will throw out an error if settings are missing in the config which
exist in the reference config, of if settings are set in the config which do
not exist in the reference config file or if a realization is chosen for a
module which does not exist, not allowed setting combinations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_config(
  icfg,
  reference_file = "config/default.cfg",
  modulepath = "modules/",
  settings_config = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_config_+3A_icfg">icfg</code></td>
<td>
<p>Input config which should be checked for consistency (either as
the config itself or as a file path linking to the config)</p>
</td></tr>
<tr><td><code id="check_config_+3A_reference_file">reference_file</code></td>
<td>
<p>Reference config which is having the right format
(either as the config itself or as a file path linking to the config)</p>
</td></tr>
<tr><td><code id="check_config_+3A_modulepath">modulepath</code></td>
<td>
<p>The path where the modules are stored. If set to NULL the
corresponding module check is deactivated.</p>
</td></tr>
<tr><td><code id="check_config_+3A_settings_config">settings_config</code></td>
<td>
<p>path where the table of possible setting combinations
is stored, if NULL it is ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The checked config as a config list ready for further usage.
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, Lavinia Baumstark
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getModules">getModules</a></code>
</p>

<hr>
<h2 id='checkAppearance'>checkAppearance</h2><span id='topic+checkAppearance'></span>

<h3>Description</h3>

<p>Checks for all declared objects in which parts of the model they appear and
calculates the type of each object (core object, interface object, module
object of module xy,...)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkAppearance(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkAppearance_+3A_x">x</code></td>
<td>
<p>A code list as returned by <code><a href="#topic+codeExtract">codeExtract</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with four elements: appearance, setappearance, type and
warnings. Appearance is a matrix containing values which indicate whether an 
object appears in a part of the code or not (e.g. indicates whether &quot;vm_example&quot; 
appears in realization &quot;on&quot; of module &quot;test&quot; or not.). 0 means that it does not appear,
1 means that it appears in the code and 2 means that it appears in the
not_used.txt. setappearance contains the same information but for sets instead of other
objects. Type is a vector containing the type of each object (exluding sets). And warnings
contains a list of warnings created during that process.
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>,<code><a href="#topic+readDeclarations">readDeclarations</a></code>
</p>

<hr>
<h2 id='checkDescription'>checkDescription</h2><span id='topic+checkDescription'></span>

<h3>Description</h3>

<p>Checks whether all Declarations of a GAMS code come with a Description,
throws out a warning in case of a missing description.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkDescription(x, w = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkDescription_+3A_x">x</code></td>
<td>
<p>GAMS declarations matrix as returned by</p>
</td></tr>
<tr><td><code id="checkDescription_+3A_w">w</code></td>
<td>
<p>a vector of warnings the warnings should be added to
<code><a href="#topic+readDeclarations">readDeclarations</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of warnings
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>
</p>

<hr>
<h2 id='checkSwitchAppearance'>checkSwitchAppearance</h2><span id='topic+checkSwitchAppearance'></span>

<h3>Description</h3>

<p>Checks for all declared switches in which parts of the model they appear and
calculates the type of each object (core object, interface object, module
object of module xy,...)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkSwitchAppearance(code)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkSwitchAppearance_+3A_code">code</code></td>
<td>
<p>Model code returned by <code><a href="#topic+codeExtract">codeExtract</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with three elements: switches, appearance and type. Switches
is a vector containing all switches. The names of the vector contain the
information where the switch is set. Appearance is a matrix containing
values which indicate whether an object appears in a part of the code or not
(e.g. indicates whether &quot;vm_example&quot; appears in realization &quot;on&quot; of module
&quot;test&quot; or not.). 0 means that it does not appear, 1 means that it appears in
the code and 2 means that it appears in the not_used.txt. Type is a vector
containing the type of each object.
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>,<code><a href="#topic+readDeclarations">readDeclarations</a></code>,<code><a href="#topic+codeExtract">codeExtract</a></code>,<code><a href="#topic+checkAppearance">checkAppearance</a></code>
</p>

<hr>
<h2 id='codeCheck'>codeCheck</h2><span id='topic+codeCheck'></span>

<h3>Description</h3>

<p>Checks GAMS code for consistency. Throws out warnings if something is wrong
in the code and returns a list containing the interfaces of each module of
the code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>codeCheck(
  path = ".",
  modulepath = "modules",
  core_files = c("core/*.gms", "main.gms"),
  debug = FALSE,
  interactive = FALSE,
  test_switches = TRUE,
  strict = FALSE,
  details = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="codeCheck_+3A_path">path</code></td>
<td>
<p>path of the main folder of the model</p>
</td></tr>
<tr><td><code id="codeCheck_+3A_modulepath">modulepath</code></td>
<td>
<p>path to the module folder relative to &quot;path&quot;</p>
</td></tr>
<tr><td><code id="codeCheck_+3A_core_files">core_files</code></td>
<td>
<p>list of files that belong to the core (wildcard expansion is supported)</p>
</td></tr>
<tr><td><code id="codeCheck_+3A_debug">debug</code></td>
<td>
<p>If TRUE additional information will be returned usefule for
debugging the codeCheck function</p>
</td></tr>
<tr><td><code id="codeCheck_+3A_interactive">interactive</code></td>
<td>
<p>activates an interactive developer mode in which some of
the warnings can be fixed interactively.</p>
</td></tr>
<tr><td><code id="codeCheck_+3A_test_switches">test_switches</code></td>
<td>
<p>(boolean) Should realization switches in model core be tested for completness?
Usually set to TRUE but should be set to FALSE for standalone models only using a subset of
existing modules</p>
</td></tr>
<tr><td><code id="codeCheck_+3A_strict">strict</code></td>
<td>
<p>(boolean) test strictness. If set to TRUE warnings from codeCheck will stop calculations
at the end of the analysis. Useful to enforce clean code.</p>
</td></tr>
<tr><td><code id="codeCheck_+3A_details">details</code></td>
<td>
<p>(boolean) If activated the function will return more detailed output. Besides interface information
it will provide a table containing all declarations in the code, an appearance table listing the appearance of all
objects in the code and information about the existing modules. The format is 
list(interfaceInfo,declarations,appearance,modulesInfo). This setting will be ignored
when debug is set to TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of all modules containing the interfaces for each module. Or more detailed output if either
<code>details</code> or <code>debug</code> is set to TRUE.
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeExtract">codeExtract</a></code>,<code><a href="#topic+readDeclarations">readDeclarations</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># check code consistency of dummy model
codeCheck(system.file("dummymodel",package="gms"))

</code></pre>

<hr>
<h2 id='codeExtract'>codeExtract</h2><span id='topic+codeExtract'></span>

<h3>Description</h3>

<p>Returns aggregated and cleaned GAMS code together with declaration matrix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>codeExtract(codeFiles, name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="codeExtract_+3A_codefiles">codeFiles</code></td>
<td>
<p>A vector of file names of GAMS code files.</p>
</td></tr>
<tr><td><code id="codeExtract_+3A_name">name</code></td>
<td>
<p>A name indicating what collection of code files this is (e.g.
module name)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with two elements: code and declarations. Code contains the
cleaned up gams code and declarations contains the declarations matrix as
returned by <code><a href="#topic+readDeclarations">readDeclarations</a></code>
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>,<code><a href="#topic+readDeclarations">readDeclarations</a></code>
</p>

<hr>
<h2 id='convert.modularGAMS'>convert.modularGAMS</h2><span id='topic+convert.modularGAMS'></span>

<h3>Description</h3>

<p>Converts modular GAMS code from an older modular definition to the newest one
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert.modularGAMS(path = ".", modulepath = "modules/")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="convert.modularGAMS_+3A_path">path</code></td>
<td>
<p>path to the main folder of the model</p>
</td></tr>
<tr><td><code id="convert.modularGAMS_+3A_modulepath">modulepath</code></td>
<td>
<p>Module path within the model (relative to the model main
folder)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>
</p>

<hr>
<h2 id='copy_input'>copy_input</h2><span id='topic+copy_input'></span>

<h3>Description</h3>

<p>Function to copy input files to their destination folders
</p>


<h3>Usage</h3>

<pre><code class='language-R'>copy_input(x, sourcepath, suffix = NULL, move = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="copy_input_+3A_x">x</code></td>
<td>
<p>Filepath or data frame containing the mapping of files to be deleted</p>
</td></tr>
<tr><td><code id="copy_input_+3A_sourcepath">sourcepath</code></td>
<td>
<p>Path to folder containing all input files</p>
</td></tr>
<tr><td><code id="copy_input_+3A_suffix">suffix</code></td>
<td>
<p>suffix that might be part of input names that should be deleted</p>
</td></tr>
<tr><td><code id="copy_input_+3A_move">move</code></td>
<td>
<p>If TRUE files will be moved instead of copied (default=FALSE)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, David Klein
</p>

<hr>
<h2 id='delete_olddata'>delete_olddata</h2><span id='topic+delete_olddata'></span>

<h3>Description</h3>

<p>Delete data provided in mapping
</p>


<h3>Usage</h3>

<pre><code class='language-R'>delete_olddata(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="delete_olddata_+3A_x">x</code></td>
<td>
<p>Filepath or data frame containing the mapping of files to be deleted</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, David Klein
</p>

<hr>
<h2 id='download_distribute'>Download and unpack compressed data from repositories</h2><span id='topic+download_distribute'></span>

<h3>Description</h3>

<p>Downloads a list of tgz files from a list of repos and unpacks them
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_distribute(
  files,
  repositories = list(`/p/projects/rd3mod/inputdata/output` = NULL),
  modelfolder = ".",
  additionalDelete = NULL,
  debug = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="download_distribute_+3A_files">files</code></td>
<td>
<p>a vector of files containing input data</p>
</td></tr>
<tr><td><code id="download_distribute_+3A_repositories">repositories</code></td>
<td>
<p>a list of repositories (please pay attention to the list format!) in which the files 
should be searched for. Files will be searched in all repositories until found, always starting with the 
first repository in the list. The argument must have the format of a named list with the url of the repository
as name and a corresponding list of options such as username or password to access the repository as value. If
no options are required the value has to be NULL. (e.g. 
list(&quot;ftp://my_pw_protected_server.de/data&quot;=list(user=&quot;me&quot;,password=12345), &quot;http://free_server.de/dat&quot;=NULL))</p>
</td></tr>
<tr><td><code id="download_distribute_+3A_modelfolder">modelfolder</code></td>
<td>
<p>main model folder</p>
</td></tr>
<tr><td><code id="download_distribute_+3A_additionaldelete">additionalDelete</code></td>
<td>
<p>information which additonal data should be deleted before new data are downloaded and distributed</p>
</td></tr>
<tr><td><code id="download_distribute_+3A_debug">debug</code></td>
<td>
<p>switch for debug mode with additional diagnostic information</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Information about the download process in form of a data.frame with data sets as row names and repositories
(where it was downloaded from) and corresponding md5sum as columns
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, Lavinia Baumstark
</p>

<hr>
<h2 id='download_unpack'>Download and unpack compressed data from repositories</h2><span id='topic+download_unpack'></span>

<h3>Description</h3>

<p>Downloads a list of tgz files from a list of repos and unpacks them
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_unpack(
  input,
  targetdir = "input",
  repositories = NULL,
  debug = FALSE,
  unpack = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="download_unpack_+3A_input">input</code></td>
<td>
<p>a vector of files to be downloaded or a cfg list with settings to be used (e.g. containing
cfg$input, cfg$repositories). Settings in the config list will be overwritten by other arguments of
this function if they are not set to NULL</p>
</td></tr>
<tr><td><code id="download_unpack_+3A_targetdir">targetdir</code></td>
<td>
<p>directory the files should be downloaded and extracted to</p>
</td></tr>
<tr><td><code id="download_unpack_+3A_repositories">repositories</code></td>
<td>
<p>a list of repositories (please pay attention to the list format!) in which the files 
should be searched for. Files will be searched in all repositories until found, always starting with the 
first repository in the list. The argument must have the format of a named list with the url of the repository
as name and a corresponding list of options such as username or password to access the repository as value. If
no options are required the value has to be NULL. (e.g. 
list(&quot;ftp://my_pw_protected_server.de/data&quot;=list(user=&quot;me&quot;,password=12345), &quot;http://free_server.de/dat&quot;=NULL))</p>
</td></tr>
<tr><td><code id="download_unpack_+3A_debug">debug</code></td>
<td>
<p>switch for debug mode with additional diagnostic information</p>
</td></tr>
<tr><td><code id="download_unpack_+3A_unpack">unpack</code></td>
<td>
<p>if switched off the source files are purley downloaded</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Information about the download process in form of a data.frame with data sets as row names and repositories
(where it was downloaded from) and corresponding md5sum as columns
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>

<hr>
<h2 id='fulldataOutput'>fulldataOutput</h2><span id='topic+fulldataOutput'></span>

<h3>Description</h3>

<p>Creates GAMS code which stores automatically the levels, bounds and
marginals of all equations and variables in time depending parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fulldataOutput(
  declarations_file = "declarations.gms",
  definitions_file = "postsolve.gms",
  warn = TRUE,
  types = c("level", "marginal"),
  ignore = "_dummy$",
  loopset = "t"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fulldataOutput_+3A_declarations_file">declarations_file</code></td>
<td>
<p>A GAMS file containing declarations. The function
will read declarations from here and add own declarations in an R
environment as used by <code><a href="#topic+replace_in_file">replace_in_file</a></code> (used subject = OUTPUT
DECLARATIONS)</p>
</td></tr>
<tr><td><code id="fulldataOutput_+3A_definitions_file">definitions_file</code></td>
<td>
<p>A GAMS file which is executed after the solve
statement but within the time step loop. Also here code will be added using
<code><a href="#topic+replace_in_file">replace_in_file</a></code> with subject OUTPUT DEFINITIONS</p>
</td></tr>
<tr><td><code id="fulldataOutput_+3A_warn">warn</code></td>
<td>
<p>Decides whether a warning should be thrown out, if the
declarations file does not exist.</p>
</td></tr>
<tr><td><code id="fulldataOutput_+3A_types">types</code></td>
<td>
<p>Types of outputs that should be written to gdx file. Available
types are level, marginal, upper and lower.</p>
</td></tr>
<tr><td><code id="fulldataOutput_+3A_ignore">ignore</code></td>
<td>
<p>regular expression pattern for variables/equations which
should be ignored by fulldataOutput</p>
</td></tr>
<tr><td><code id="fulldataOutput_+3A_loopset">loopset</code></td>
<td>
<p>Set over which loop runs</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, Felicitas Beier
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDeclarations">readDeclarations</a></code>,<code><a href="#topic+replace_in_file">replace_in_file</a></code>
</p>

<hr>
<h2 id='GAMScodeFilter'>GAMScodeFilter</h2><span id='topic+GAMScodeFilter'></span>

<h3>Description</h3>

<p>Cleans GAMS code supplied from empty lines and comments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GAMScodeFilter(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="GAMScodeFilter_+3A_x">x</code></td>
<td>
<p>A vector with lines of GAMS code (as you get by reading the code
with readLines)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The cleaned GAMS code
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDeclarations">readDeclarations</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
GAMScodeFilter(c("","*comment","a=12;","","b=13;"))

</code></pre>

<hr>
<h2 id='get_info'>get_info</h2><span id='topic+get_info'></span>

<h3>Description</h3>

<p>Function to extract information from info.txt
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_info(file, grep_expression, sep, pattern = "", replacement = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_info_+3A_file">file</code></td>
<td>
<p>path to info.txt (including info.txt)</p>
</td></tr>
<tr><td><code id="get_info_+3A_grep_expression">grep_expression</code></td>
<td>
<p>String before the information that should be extracted</p>
</td></tr>
<tr><td><code id="get_info_+3A_sep">sep</code></td>
<td>
<p>Separator between grep_expression and information</p>
</td></tr>
<tr><td><code id="get_info_+3A_pattern">pattern</code></td>
<td>
<p>Optional pattern to be replaced (default pattern = &quot;&quot;)</p>
</td></tr>
<tr><td><code id="get_info_+3A_replacement">replacement</code></td>
<td>
<p>Optional replacement (default replacement = &quot;&quot;)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, David Klein
</p>

<hr>
<h2 id='getfiledestinations'>getfiledestinations</h2><span id='topic+getfiledestinations'></span>

<h3>Description</h3>

<p>Create file2destination mapping based on information from the model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getfiledestinations()
</code></pre>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, David Klein
</p>

<hr>
<h2 id='getModules'>getModules</h2><span id='topic+getModules'></span>

<h3>Description</h3>

<p>Extract module information of a GAMS model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getModules(modulepath)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getModules_+3A_modulepath">modulepath</code></td>
<td>
<p>The path where the modules are stored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A matrix containing the different modules with name, corresponding
module number and corresponding realizations
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>
</p>

<hr>
<h2 id='interfaceplot'>interfaceplot</h2><span id='topic+interfaceplot'></span>

<h3>Description</h3>

<p>Creates an interface plot of a modular model using
<code><a href="qgraph.html#topic+qgraph">qgraph</a></code> and returns the interface information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>interfaceplot(
  x = ".",
  modules_to_include = NULL,
  modules_to_exclude = NULL,
  links_to_include = NULL,
  links_to_exclude = NULL,
  items_to_include = NULL,
  items_to_exclude = NULL,
  items_to_display = NULL,
  default_groups = list(default1 = list(name = "core", nodes = "core", color = "black",
    shape = "rectangle"), default2 = list(name = "modules", nodes = NULL, color =
    "#6c9ebf", shape = "ellipse")),
  highlight_groups = NULL,
  max_length_node_names = NULL,
  add_nodeName_legend = FALSE,
  max_num_edge_labels = NULL,
  max_num_nodes_for_edge_labels = 30,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="interfaceplot_+3A_x">x</code></td>
<td>
<p>Either an interface list as returned by
<code><a href="#topic+codeCheck">codeCheck</a></code> or the path to the main folder of the
model.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_modules_to_include">modules_to_include</code></td>
<td>
<p>NULL (default value) or a vector of strings with
names of modules to include, e.g. c(&quot;core&quot;, &quot;macro&quot;). If NULL all modules
are included.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_modules_to_exclude">modules_to_exclude</code></td>
<td>
<p>NULL (default value) or a vector of strings with
names of modules to exclude, e.g. c(&quot;core&quot;). If NULL no modules are
excluded.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_links_to_include">links_to_include</code></td>
<td>
<p>NULL (default value) or list of lists with attributes
&quot;to&quot; and &quot;from&quot;, that each take a vector of module names, e.g.
list(list(to=&quot;macro&quot;, from=&quot;core&quot;)). If NULL all links are included.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_links_to_exclude">links_to_exclude</code></td>
<td>
<p>NULL (default value) or list of lists with attributes
&quot;to&quot; and &quot;from&quot;, that each take a vector of module names, e.g.
list(list(to=&quot;macro&quot;, from=&quot;core&quot;)). If NULL no links are excluded.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_items_to_include">items_to_include</code></td>
<td>
<p>NULL (default value) or a vector of strings with
names of items to include, e.g. c(&quot;vm_cesIO&quot;, &quot;pm_pvp&quot;). Regex patterns can
also be passed, e.g. c(&quot;(v|p)m_.*&quot;). If NULL all items are included.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_items_to_exclude">items_to_exclude</code></td>
<td>
<p>NULL (default value) or a vector of strings with
names of items to exclude, e.g. c(&quot;vm_cesIO&quot;, &quot;pm_pvp&quot;). Regex patterns can
also be passed, e.g. c(&quot;sm_.*&quot;). If NULL no items are excluded.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_items_to_display">items_to_display</code></td>
<td>
<p>NULL (default value) or a vector of strings with
names of items to display, e.g. c(&quot;vm_cesIO&quot;, &quot;pm_pvp&quot;). Regex patterns can
also be passed, e.g. c(.m\ S+). If NULL no items are displayed.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_default_groups">default_groups</code></td>
<td>
<p>List of lists with default group definitions. Defines
the default formatting of the interface plot. By default, there are two
groups, see usage, a &quot;core&quot; group made up of only the &quot;core&quot; module and a
&quot;modules&quot; group made up of all the rest. If a &quot;core&quot; module doesn't exist,
then that group is simply ignored.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_highlight_groups">highlight_groups</code></td>
<td>
<p>NULL (default value) or a list of lists with
highlight-group definitions. By defining highligh groups,
additional/specalized formatting can be applied to select modules. A group
is defined by a list with the following attributes: </p>
 <ul>
<li><p> name: a
string with the group name. Will appear in legend. </p>
</li>
<li><p> nodes: a vector of
strings with module names. </p>
</li>
<li><p> shape: a string with a valid qgraph shape.
</p>
</li>
<li><p> color: a string with a valid qgraph color. </p>
</li>
<li><p> edges_to_highlight:
</p>
<ul>
<li><p> NULL = no edges are colored </p>
</li>
<li><p> &quot;all&quot; = edges starting
from and ending at the highlight group's nodes are colored </p>
</li>
<li><p> &quot;incoming&quot;
= edges ending at the highlight group's nodes are colored </p>
</li>
<li><p> &quot;outgoing&quot;
= edges starting from the highlight group's nodes are colored </p>
</li>
<li>
<p>&quot;within&quot; = only edges that departed from the highlight group's nodes and
end at them as well are colored</p>
</li></ul>
 </li>
<li><p> edges_to_ignore: </p>
<ul>
<li><p> NULL
= no edges are ignored </p>
</li>
<li><p> &quot;outside&quot; edges that neither start from or end
at any of the group's nodes are ignored </p>
</li>
<li><p> &quot;incoming&quot; edges that do not
depart from one of the group's nodes are ignored </p>
</li>
<li><p> &quot;outgoing&quot; edges
that do not arrive at one of the group's nodes are ignored </p>
</li>
<li>
<p>&quot;outgoing_to_no_return&quot; edges that departing from nodes outside of the
group and not ending at nodes within the group are ignored </p>
</li></ul>
</li></ul>
<p> An example:
<code>list(list(name = "highlight", nodes = "welfare", color = "#ff8f00",
shape = "ellipse", edges_to_highlight = "outgoing", edges_to_ignore =
"outside"))</code>.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_max_length_node_names">max_length_node_names</code></td>
<td>
<p>NULL (default value) or an integer n giving the
maximum number of characters allowed in the node names. If not NULL, node
names are truncated after n characters, e.g. n=3: &quot;example&quot; -&gt; &quot;exa.&quot;.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_add_nodename_legend">add_nodeName_legend</code></td>
<td>
<p>Logical (default FALSE) to add node names in
legend, structured by group.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_max_num_edge_labels">max_num_edge_labels</code></td>
<td>
<p>NULL (default value), an integer or the string
&quot;adjust&quot;. If NULL, all edge lables are displayed. If given an integer n, a
maximum of n edge labels are shown.  If set to &quot;adjust&quot;, the number of edge
labels displayed decreases with the number of nodes.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_max_num_nodes_for_edge_labels">max_num_nodes_for_edge_labels</code></td>
<td>
<p>Integer, (default value = 30). The
maximum number of nodes after which no edge labels are displayed.</p>
</td></tr>
<tr><td><code id="interfaceplot_+3A_...">...</code></td>
<td>
<p>Optional arguments to <code><a href="qgraph.html#topic+qgraph">qgraph</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>What modules (=nodes), links (=edges) and items (=what is passed along the
edges) are taken into account when creating the plot can be fine-tuned with
the &quot;_include&quot;, &quot;_exclude&quot; arguments.
</p>
<p>The &quot;default&quot;- and &quot;highlight_groups&quot; arguments control the formatting (and
also the composition through &quot;highlight_group$edges_to_ignore&quot;). Groups in
qqgraph are a way of clustering nodes together. The default formatting of the
plot is defined with the &quot;default_groups&quot; argument. On top of that additional
groups can be defined with the &quot;highlight_groups&quot; argument.
</p>
<p>The rest of the arguments are pretty self-explanatory. Just remember that
<code><a href="qgraph.html#topic+qgraph">qgraph</a></code> arguments can be passed on as well! Useful ones
include: fade=T/F, legend=T/F, legend.cex (size of the legend font), GLratio
(graph/legend size ratio, edge.label.cex (size of the edge label font)).
</p>


<h3>Value</h3>

<p>A tibble with the edge list and interface items.
</p>


<h3>Author(s)</h3>

<p>Johannes Koch
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>,<code><a href="qgraph.html#topic+qgraph">qgraph</a></code>
</p>

<hr>
<h2 id='is.modularGAMS'>is.modularGAMS</h2><span id='topic+is.modularGAMS'></span>

<h3>Description</h3>

<p>Checks whether a folder seems to contain modular GAMS code or not.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.modularGAMS(path = ".", version = FALSE, modulepath = "modules/")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.modularGAMS_+3A_path">path</code></td>
<td>
<p>path to the main folder of the model</p>
</td></tr>
<tr><td><code id="is.modularGAMS_+3A_version">version</code></td>
<td>
<p>if TRUE returns the version of the modular structure or FALSE, 
otherwise returns a boolean indicating whether it is modular or not.</p>
</td></tr>
<tr><td><code id="is.modularGAMS_+3A_modulepath">modulepath</code></td>
<td>
<p>Module path within the model (relative to the model main
folder)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is.modularGAMS(system.file("dummymodel",package="gms"))

</code></pre>

<hr>
<h2 id='model_dependencies'>Function to detect R package dependencies</h2><span id='topic+model_dependencies'></span>

<h3>Description</h3>

<p>This function analyzes a model folder and all subfolders and searches
for library and require statements.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>model_dependencies(mainfolder = ".")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="model_dependencies_+3A_mainfolder">mainfolder</code></td>
<td>
<p>main folder of the model to be analyzed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of dependencies sorted by appearances
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>

<hr>
<h2 id='model_lock'>Model lock/unlock</h2><span id='topic+model_lock'></span><span id='topic+model_unlock'></span>

<h3>Description</h3>

<p>Functions that indicate whether a model folder is currently locked by
another process or not. This helps to prevent unintended interactions
between processes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>model_lock(folder=".", file=".lock", timeout1=NULL, timeout2=NULL,
check_interval=1, oncluster=TRUE)
model_unlock(id,folder=".",file=".lock",oncluster=TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="model_lock_+3A_folder">folder</code></td>
<td>
<p>model folder</p>
</td></tr>
<tr><td><code id="model_lock_+3A_file">file</code></td>
<td>
<p>file name of the lock file containing the process queue</p>
</td></tr>
<tr><td><code id="model_lock_+3A_timeout1">timeout1</code></td>
<td>
<p>Time in hours the top process in the queue is allowed to run
before the current process is stopped.</p>
</td></tr>
<tr><td><code id="model_lock_+3A_timeout2">timeout2</code></td>
<td>
<p>Time in hours the processed is allowed to wait in the queue
before it is stopped</p>
</td></tr>
<tr><td><code id="model_lock_+3A_check_interval">check_interval</code></td>
<td>
<p>Time in seconds between checking the current position
in the queue.</p>
</td></tr>
<tr><td><code id="model_lock_+3A_oncluster">oncluster</code></td>
<td>
<p>a logical indicating whether the script is run on cluster
or not. On windows a lock file is created, which does not prevent
simulatneous access to the model. On the cluster the system command 'mkdir'
is used to prevent simultaneous access. This atomicity of check-and-create
is ensured at the operating system kernel level.</p>
</td></tr>
<tr><td><code id="model_lock_+3A_id">id</code></td>
<td>
<p>process id as returned by model_lock.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>model_lock returns the process id which is needed (only on Windows)
to identify the process in model_unlock.
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, David Klein
</p>


<h3>See Also</h3>

<p><code><a href="#topic+check_config">check_config</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#lock folder
id &lt;- model_lock(tempdir())

#unlock folder
model_unlock(id,tempdir())
</code></pre>

<hr>
<h2 id='module.skeleton'>Create a Module skeleton</h2><span id='topic+module.skeleton'></span>

<h3>Description</h3>

<p>This function creates you a module skeleton which you can use to easily
create your own modules.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>module.skeleton(
  number,
  name,
  types,
  modelpath = ".",
  modulepath = "modules/",
  includefile = "modules/include.gms",
  version = is.modularGAMS(modelpath, version = TRUE)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="module.skeleton_+3A_number">number</code></td>
<td>
<p>Number of your module, typically something between 0-99. Sorts
the execution of your modules. Please use a number which is not used, yet.</p>
</td></tr>
<tr><td><code id="module.skeleton_+3A_name">name</code></td>
<td>
<p>Name of your module (please choose a short name). If you want to
extend an existing module (add a new realisation) use the name of the
existing one.</p>
</td></tr>
<tr><td><code id="module.skeleton_+3A_types">types</code></td>
<td>
<p>Vector of names for the different module types (e.g. &quot;on&quot; or
&quot;off&quot;). If you want to extend an existing module (add a new realisation),
put here the additional type(s)</p>
</td></tr>
<tr><td><code id="module.skeleton_+3A_modelpath">modelpath</code></td>
<td>
<p>Path of the MAgPIE version that should be updated (main
folder).</p>
</td></tr>
<tr><td><code id="module.skeleton_+3A_modulepath">modulepath</code></td>
<td>
<p>Module path within MAgPIE (relative to the MAgPIE main
folder)</p>
</td></tr>
<tr><td><code id="module.skeleton_+3A_includefile">includefile</code></td>
<td>
<p>Name and location of the file which includes all modules
(relative to main folder)</p>
</td></tr>
<tr><td><code id="module.skeleton_+3A_version">version</code></td>
<td>
<p>version of the modular GAMS code structure (1 or 2)</p>
</td></tr>
</table>


<h3>Note</h3>

<p>Module phases are automatically detected checking the main code of the
model, but not checking code in modules. If you want to use additional
phases which are only included within a module, you need to specify them
manually by adding a comment into your gams code indicating that there is an
additional phase. The syntax is &quot;* !add_phase!: &lt;phase&gt;&quot;, e.g. &quot;*
!add_phase!: new_phase&quot;
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>Examples</h3>

<pre><code class='language-R'># copy dummymodel to temporary directory and add new module "bla"
file.copy(system.file("dummymodel",package="gms"),tempdir(), recursive = TRUE)
model   &lt;- paste0(tempdir(),"/dummymodel")
module.skeleton(number="03", name="bla", types=c("on","off"), modelpath=model)

</code></pre>

<hr>
<h2 id='modules_interfaceplot'>modules_interfaceplot</h2><span id='topic+modules_interfaceplot'></span>

<h3>Description</h3>

<p>Function that applies <code><a href="#topic+interfaceplot">interfaceplot</a></code> for a whole model and
all its modules.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modules_interfaceplot(
  x = ".",
  modulepath = "modules",
  filetype = "png",
  targetfolder = NULL,
  writetable = TRUE,
  includeCore = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modules_interfaceplot_+3A_x">x</code></td>
<td>
<p>Either the object returned by <code><a href="#topic+codeCheck">codeCheck</a></code> or the path to
the main folder of the model.</p>
</td></tr>
<tr><td><code id="modules_interfaceplot_+3A_modulepath">modulepath</code></td>
<td>
<p>Path to the modules folder</p>
</td></tr>
<tr><td><code id="modules_interfaceplot_+3A_filetype">filetype</code></td>
<td>
<p>Filetype that should be used (e.g. &quot;png&quot; or &quot;pdf&quot;)</p>
</td></tr>
<tr><td><code id="modules_interfaceplot_+3A_targetfolder">targetfolder</code></td>
<td>
<p>Folder outputs should be written to. If set to NULL
outputs will be added to corresponding module folders</p>
</td></tr>
<tr><td><code id="modules_interfaceplot_+3A_writetable">writetable</code></td>
<td>
<p>Logical deciding whether a csv containing the interfaces
should be written as well.</p>
</td></tr>
<tr><td><code id="modules_interfaceplot_+3A_includecore">includeCore</code></td>
<td>
<p>Logical to create plot for core or not, default FALSE.</p>
</td></tr>
<tr><td><code id="modules_interfaceplot_+3A_...">...</code></td>
<td>
<p>Optional arguments to <code><a href="#topic+interfaceplot">interfaceplot</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with interface tables for each module
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>,<code><a href="#topic+interfaceplot">interfaceplot</a></code>
</p>

<hr>
<h2 id='path'>path</h2><span id='topic+path'></span>

<h3>Description</h3>

<p>Small function to build a consistent path-string based on folder, filename
and filetype. The function makes sure that slashes and the dot for the file
ending are set correctly (you can supply your folder name either with or
without a tailing slash in it. It does not matter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>path(..., ftype = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="path_+3A_...">...</code></td>
<td>
<p>the folders and the file name that should be pasted to a
file/folder path</p>
</td></tr>
<tr><td><code id="path_+3A_ftype">ftype</code></td>
<td>
<p>file type</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A string containing the path combined of folder, filename and
filetype
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>

<hr>
<h2 id='publish_data'>Publish data in a repository</h2><span id='topic+publish_data'></span>

<h3>Description</h3>

<p>Downloads a list of tgz files from a list of repos, merge them and publish it on another server
</p>


<h3>Usage</h3>

<pre><code class='language-R'>publish_data(
  input,
  name = NULL,
  target = Sys.getenv("PUBLISH_DATA_TARGET", unset = "."),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="publish_data_+3A_input">input</code></td>
<td>
<p>a vector of files to be downloaded or a cfg list with settings to be used (e.g. containing
cfg$input, cfg$repositories). Settings in the config list will be overwritten by other arguments of
this function if they are not set to NULL</p>
</td></tr>
<tr><td><code id="publish_data_+3A_name">name</code></td>
<td>
<p>name of the data to be published (will be used in as file name). If no name is given (default) source
files will be published as is (separate tgz files with original name).</p>
</td></tr>
<tr><td><code id="publish_data_+3A_target">target</code></td>
<td>
<p>target the data should be published in (format user@server:/folder/path) If a target vector, or targets 
separated by &quot;|&quot; are provided the user will be asked interactively where the file should be written to. 
By default it will look for target information in the environment variable PUBLISH_DATA_TARGET</p>
</td></tr>
<tr><td><code id="publish_data_+3A_...">...</code></td>
<td>
<p>further options provided to <code><a href="#topic+download_unpack">download_unpack</a></code></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+download_unpack">download_unpack</a></code>,<code><a href="#topic+tardir">tardir</a></code>
</p>

<hr>
<h2 id='read_yaml_header'>read_yaml_header</h2><span id='topic+read_yaml_header'></span>

<h3>Description</h3>

<p>Reads header written in yaml format from a file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_yaml_header(file, n = 20)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_yaml_header_+3A_file">file</code></td>
<td>
<p>path to the file which contains the YAML header</p>
</td></tr>
<tr><td><code id="read_yaml_header_+3A_n">n</code></td>
<td>
<p>Number of lines to be read (header must be part of these lines in order to be read)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the read in information
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>

<hr>
<h2 id='readDeclarations'>readDeclarations</h2><span id='topic+readDeclarations'></span>

<h3>Description</h3>

<p>Reads all declarations given in a GAMS code and returns them.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readDeclarations(
  file,
  unlist = TRUE,
  types = c("scalar", "(positive |)variable", "parameter", "table", "equation", "set")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readDeclarations_+3A_file">file</code></td>
<td>
<p>A gams file or a vector containing GAMS code.</p>
</td></tr>
<tr><td><code id="readDeclarations_+3A_unlist">unlist</code></td>
<td>
<p>A logical indicating whether the output should be returned as
a list separated by object type or a matrix.</p>
</td></tr>
<tr><td><code id="readDeclarations_+3A_types">types</code></td>
<td>
<p>of declarations to be read.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Either a list of declared objects or a matrix containing object
name, the sets the object depends on and the description.
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>
</p>

<hr>
<h2 id='readSetglobals'>readSetglobals</h2><span id='topic+readSetglobals'></span>

<h3>Description</h3>

<p>Reads all setglobals given in a GAMS code and returns them.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readSetglobals(file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readSetglobals_+3A_file">file</code></td>
<td>
<p>A gams file or a vector containing GAMS code.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of values the setglobal variables are set to with setglobal
variables as names.
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDeclarations">readDeclarations</a></code>
</p>

<hr>
<h2 id='replace_in_file'>Replace in File</h2><span id='topic+replace_in_file'></span>

<h3>Description</h3>

<p>Function to replace a marked paragaph in a text file. Paragraph has to be
marked in the text file with an initial &quot;##### R SECTION START (SUBJECT)
#####&quot; and &quot;##### R SECTION END (SUBJECT) #####&quot; as ending. The number of \#
symbols can be chosen by the user, but there has to be at least one at the
beginning and one at the end. Furthermore it is allowed to add further
symbols at the beginning or the end of the line. &quot;SUBJECT&quot; is chosen by the
user and is used for identification, if a text file has more than one R
section.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>replace_in_file(
  file,
  content,
  subject = "CODE",
  add = FALSE,
  addfile = FALSE,
  comment = "*"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="replace_in_file_+3A_file">file</code></td>
<td>
<p>a connection object or a character string describing the file,
that should be manipulated.</p>
</td></tr>
<tr><td><code id="replace_in_file_+3A_content">content</code></td>
<td>
<p>the content that should be used as replacement stored as a
vector of strings. Each vector component will be written as a line.</p>
</td></tr>
<tr><td><code id="replace_in_file_+3A_subject">subject</code></td>
<td>
<p>A string used for identification of a paragraph.</p>
</td></tr>
<tr><td><code id="replace_in_file_+3A_add">add</code></td>
<td>
<p>Determines behavior when marking is missing in the code.
add=FALSE will throw out an error, if the marking is missing, add=&quot;top&quot; will
add the markings automatically at the beginning of the file, add=&quot;bottom&quot; or
add=TRUE will do the same but at the end of the file.</p>
</td></tr>
<tr><td><code id="replace_in_file_+3A_addfile">addfile</code></td>
<td>
<p>Determines the behavior when the file does not exist. If
addfile=TRUE, file will be created when missing.</p>
</td></tr>
<tr><td><code id="replace_in_file_+3A_comment">comment</code></td>
<td>
<p>Symbol which is used to indicate a comment in the language
the file is written that should be manipulated. Only relevant if add or
addfile are used.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>

<hr>
<h2 id='selectScript'>selectScript</h2><span id='topic+selectScript'></span>

<h3>Description</h3>

<p>Functions which allows for interactive selection of scripts/files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>selectScript(folder = ".", ending = "R")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="selectScript_+3A_folder">folder</code></td>
<td>
<p>Folder in which the files/scripts are located which should 
be selected from.</p>
</td></tr>
<tr><td><code id="selectScript_+3A_ending">ending</code></td>
<td>
<p>File ending of the files to be selected (without dot)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of paths to files selected by the user
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>

<hr>
<h2 id='setScenario'>setScenario</h2><span id='topic+setScenario'></span>

<h3>Description</h3>

<p>setScenario is adapting a given config to a predefined scenario, meaning
that all settings which are fixed for the given scenario are written to the
config. Settings not defined by the scenario remain unchanged.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setScenario(cfg, scenario, scenario_config = "config/scenario_config.csv")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setScenario_+3A_cfg">cfg</code></td>
<td>
<p>Input config which should be adapted to the given scenario</p>
</td></tr>
<tr><td><code id="setScenario_+3A_scenario">scenario</code></td>
<td>
<p>name of scenario (e.g. &quot;SSP2&quot;). Can also be a vector of
scenarios. In this case scenario settings are applied in the given order</p>
</td></tr>
<tr><td><code id="setScenario_+3A_scenario_config">scenario_config</code></td>
<td>
<p>The path where the scenario config table is stored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated config as a config list ready for further usage.
</p>


<h3>Note</h3>

<p>The scenario config table is a table which contains as columns the
different scenarios and as rows the different settings. Empty entries for a
given scenario-setting combination indicate that this setting is not defined
by the scenario and should not be changed by set Scenario!
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, Anastasis Giannousakis
</p>


<h3>See Also</h3>

<p><code><a href="#topic+check_config">check_config</a></code>,<code><a href="#topic+getModules">getModules</a></code>
</p>

<hr>
<h2 id='settingsCheck'>settingsCheck</h2><span id='topic+settingsCheck'></span>

<h3>Description</h3>

<p>Checks GAMS setglobals in code for consistency. Creates a warning if a
setglobal command for an existing module is missing or a module is set to a
realization which does not exist.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>settingsCheck(path = ".", modulepath = "modules")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="settingsCheck_+3A_path">path</code></td>
<td>
<p>path of the main folder of the model</p>
</td></tr>
<tr><td><code id="settingsCheck_+3A_modulepath">modulepath</code></td>
<td>
<p>path to the module folder relative to &quot;path&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing is returned.
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>
</p>

<hr>
<h2 id='singleGAMSfile'>Merge GAMS code into single file</h2><span id='topic+singleGAMSfile'></span>

<h3>Description</h3>

<p>This function merges GAMS code which is distributed over severals files into
a single GAMS file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>singleGAMSfile(modelpath = ".", mainfile = "main.gms", output = "full.gms")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="singleGAMSfile_+3A_modelpath">modelpath</code></td>
<td>
<p>The path where the model is stored</p>
</td></tr>
<tr><td><code id="singleGAMSfile_+3A_mainfile">mainfile</code></td>
<td>
<p>The path to the main gams file (relative to the model path)</p>
</td></tr>
<tr><td><code id="singleGAMSfile_+3A_output">output</code></td>
<td>
<p>Name of the single output GAMS file.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, Anastasis Giannousakis
</p>


<h3>Examples</h3>

<pre><code class='language-R'># copy dummymodel create single gms file out of it
file.copy(system.file("dummymodel",package="gms"),tempdir(), recursive = TRUE)
model      &lt;- paste0(tempdir(),"/dummymodel")
singlefile &lt;- paste0(tempdir(),"/full.gms")
singleGAMSfile(modelpath=model, output=singlefile)

</code></pre>

<hr>
<h2 id='tardir'>Creative tgz archive from directory</h2><span id='topic+tardir'></span>

<h3>Description</h3>

<p>Creates a tgz from all files in a directory
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tardir(dir = ".", tarfile = "data.tgz")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tardir_+3A_dir">dir</code></td>
<td>
<p>directory from which the tar file should be generated</p>
</td></tr>
<tr><td><code id="tardir_+3A_tarfile">tarfile</code></td>
<td>
<p>name of the archive the data should be written to (tgz file)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>Examples</h3>

<pre><code class='language-R'># copy dummymodel to temporary directory and compress it
file.copy(system.file("dummymodel",package="gms"),tempdir(), recursive = TRUE)
model   &lt;- paste0(tempdir(),"/dummymodel")
archive &lt;- paste0(tempdir(),"/dummymodel.tgz")
tardir(model,archive)

</code></pre>

<hr>
<h2 id='update_fulldataOutput'>update_fulldataOutput</h2><span id='topic+update_fulldataOutput'></span>

<h3>Description</h3>

<p>Creates GAMS code which stores automatically the levels and marginals of all
equations and variables in time depending parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_fulldataOutput(
  modelpath = ".",
  modulepath = "modules",
  corepath = "core",
  loopset = "t"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_fulldataOutput_+3A_modelpath">modelpath</code></td>
<td>
<p>Path of the Model version that should be updated (main
folder).</p>
</td></tr>
<tr><td><code id="update_fulldataOutput_+3A_modulepath">modulepath</code></td>
<td>
<p>Module path within the model (relative to the model main
folder)</p>
</td></tr>
<tr><td><code id="update_fulldataOutput_+3A_corepath">corepath</code></td>
<td>
<p>Core path within the model (relative to the model main
folder)</p>
</td></tr>
<tr><td><code id="update_fulldataOutput_+3A_loopset">loopset</code></td>
<td>
<p>Set over which loop runs</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich, Felicitas Beier
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fulldataOutput">fulldataOutput</a></code>,<code><a href="#topic+replace_in_file">replace_in_file</a></code>
</p>

<hr>
<h2 id='update_modules_embedding'>Update Modules Embedding in GAMS code</h2><span id='topic+update_modules_embedding'></span>

<h3>Description</h3>

<p>A function that updates in the GAMS code all include commands which are
related to Modules. The function automatically checks which modules exist
and which files in these modules exist and creates the corresponding include
commands in GAMS
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_modules_embedding(
  modelpath = ".",
  modulepath = "modules/",
  includefile = "modules/include.gms",
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_modules_embedding_+3A_modelpath">modelpath</code></td>
<td>
<p>Path to the model that should be updated (main
folder).</p>
</td></tr>
<tr><td><code id="update_modules_embedding_+3A_modulepath">modulepath</code></td>
<td>
<p>Module path within the model (relative to the model main
folder)</p>
</td></tr>
<tr><td><code id="update_modules_embedding_+3A_includefile">includefile</code></td>
<td>
<p>Name and location of the file which includes all modules
(relative to main folder)</p>
</td></tr>
<tr><td><code id="update_modules_embedding_+3A_verbose">verbose</code></td>
<td>
<p>Defines whether additional information should be printed or
not.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>Module phases are automatically detected checking the main code of the
model, but not checking code in modules. If you want to use additional
phases which are only included within a module, you need to specify them
manually by adding a comment into your gams code indicating that there is an
additional phase. The syntax is &quot;* !add_phase!: &lt;phase&gt;&quot;, e.g. &quot;*
!add_phase!: new_phase&quot;
</p>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>Examples</h3>

<pre><code class='language-R'># copy dummymodel to temporary directory and update module embedding
file.copy(system.file("dummymodel",package="gms"),tempdir(), recursive = TRUE)
model   &lt;- paste0(tempdir(),"/dummymodel")
update_modules_embedding(model)

</code></pre>

<hr>
<h2 id='updateInterfaceMapping'>updateInterfaceMapping</h2><span id='topic+updateInterfaceMapping'></span>

<h3>Description</h3>

<p>Function to update the mapping between interfaces and their origin modules.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>updateInterfaceMapping(path = ".", modulepath = "modules")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="updateInterfaceMapping_+3A_path">path</code></td>
<td>
<p>path of the main folder of the model</p>
</td></tr>
<tr><td><code id="updateInterfaceMapping_+3A_modulepath">modulepath</code></td>
<td>
<p>path to the module folder relative to &quot;path&quot;</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Philipp Dietrich
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codeCheck">codeCheck</a></code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
