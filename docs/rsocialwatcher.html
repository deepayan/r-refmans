<!DOCTYPE html><html><head><title>Help for package rsocialwatcher</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rsocialwatcher}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#get_fb_parameter_ids'><p>Get Facebook Parameter IDs</p></a></li>
<li><a href='#get_fb_suggested_radius'><p>Get Suggested Radius</p></a></li>
<li><a href='#get_location_coords'><p>Get Coordinates/Geometries for Valid Location Keys</p></a></li>
<li><a href='#map_param'><p>Map Parameters within <code>query_fb_marketing_api()</code></p>
Groups input into a <code>map_param</code> object. When a <code>map_param</code> object is entered as a parameter in <code>query_fb_marketing_api()</code>, <code>query_fb_marketing_api()</code> makes a separate API query for each item within <code>map_param</code>. A <code>map_param</code> object is structured as a list, where the <code>map_param</code> class triggers the <code>query_fb_marketing_api</code> function to make a separate API query for each item in the list.</a></li>
<li><a href='#map_param_vec'><p>Map Parameters over Vector</p>
Converts a vector into a <code>map_param</code> object. When a <code>map_param</code> object is entered as a parameter in <code>query_fb_marketing_api()</code>, <code>query_fb_marketing_api()</code> makes a separate API query for each item within <code>map_param</code> (ie, for each item in the original vector entered into <code>map_param</code>). A <code>map_param</code> object is structured as a list, where the <code>map_param</code> class triggers the <code>query_fb_marketing_api</code> function to make a separate API query for each item in the list.</a></li>
<li><a href='#query_fb_marketing_api'><p>Query 'Facebook Marketing' API</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>'Facebook Marketing API' Social Watcher</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Facilitates querying data from the â€˜Facebook Marketing API', particularly for social science research <a href="https://developers.facebook.com/docs/marketing-apis/">https://developers.facebook.com/docs/marketing-apis/</a>. Data from the 'Facebook Marketing API' has been used for a variety of social science applications, such as for poverty estimation (Marty and Duhaut (2024) &lt;<a href="https://doi.org/10.1038%2Fs41598-023-49564-6">doi:10.1038/s41598-023-49564-6</a>&gt;), disease surveillance (Araujo et al. (2017) &lt;<a href="https://doi.org/10.48550%2FarXiv.1705.04045">doi:10.48550/arXiv.1705.04045</a>&gt;), and measuring migration (Alexander, Polimis, and Zagheni (2020) &lt;<a href="https://doi.org/10.1007%2Fs11113-020-09599-3">doi:10.1007/s11113-020-09599-3</a>&gt;). The package facilitates querying the number of Facebook daily/monthly active users for multiple location types (e.g., from around a specific coordinate to an administrative region) and for a number of attribute types (e.g., interests, behaviors, education level, etc). The package supports making complex queries within one API call and making multiple API calls across different locations and/or parameters.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://worldbank.github.io/rsocialwatcher/">https://worldbank.github.io/rsocialwatcher/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/worldbank/rsocialwatcher/issues">https://github.com/worldbank/rsocialwatcher/issues</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, lubridate, jsonlite, httr, curl, stringr,
splitstackshape, sf, purrr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-05-06 17:03:32 UTC; robmarty</td>
</tr>
<tr>
<td>Author:</td>
<td>Robert Marty <a href="https://orcid.org/0000-0002-3164-3813"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Robert Marty &lt;rmarty@worldbank.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-05-06 18:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='get_fb_parameter_ids'>Get Facebook Parameter IDs</h2><span id='topic+get_fb_parameter_ids'></span>

<h3>Description</h3>

<p>This function returns dataframes of Facebook parameters and their associated
IDs for different categories of information. Categories include behaviors,
interests, locales, job titles, education major, and location
(e.g., country, city, zip code, etc). The returned dataframe contains ids
that can be used in the query_fb_marketing_api function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_fb_parameter_ids(
  type,
  version,
  token,
  q = NULL,
  country_code = NULL,
  region_id = NULL,
  key = NULL,
  limit = NULL,
  add_location_coords = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_fb_parameter_ids_+3A_type">type</code></td>
<td>
<p>Type of data. Either: &quot;behaviors&quot;, &quot;demographics&quot;, &quot;interests&quot;, &quot;income&quot;, &quot;industries&quot;, &quot;life_events&quot;, &quot;family_statuses&quot;, &quot;work_positions&quot;, &quot;work_employers&quot;, &quot;education_statuses&quot;, &quot;relationship_statuses&quot;, &quot;education_majors&quot;, &quot;locales&quot;, &quot;country&quot;, &quot;country_group&quot;, &quot;region&quot;, &quot;large_geo_area&quot;, &quot;medium_geo_area&quot;, &quot;small_geo_area&quot;, &quot;city&quot;, &quot;subcity&quot;, &quot;neighborhood&quot;, &quot;zip&quot;, &quot;geo_market&quot;, &quot;electoral_district&quot;, &quot;zip&quot;</p>
</td></tr>
<tr><td><code id="get_fb_parameter_ids_+3A_version">version</code></td>
<td>
<p>'Facebook Marketing' API version; for example, &quot;v19.0&quot;</p>
</td></tr>
<tr><td><code id="get_fb_parameter_ids_+3A_token">token</code></td>
<td>
<p>'Facebook Marketing' API token</p>
</td></tr>
<tr><td><code id="get_fb_parameter_ids_+3A_q">q</code></td>
<td>
<p>Query string to limit search. For example, when searching job titles, setting <code>q="data"</code> will return jobs with &quot;data&quot; in the name, such as &quot;data science.&quot;</p>
</td></tr>
<tr><td><code id="get_fb_parameter_ids_+3A_country_code">country_code</code></td>
<td>
<p>When searching locations, limit the search to a specific country; for example, only search for cities within a specific country.</p>
</td></tr>
<tr><td><code id="get_fb_parameter_ids_+3A_region_id">region_id</code></td>
<td>
<p>When searching locations, limit the search to a specific region; for example, only search for cities within a specific region.</p>
</td></tr>
<tr><td><code id="get_fb_parameter_ids_+3A_key">key</code></td>
<td>
<p>When searching locations, limit the search to a specific location key; for example, only search for neighborhood within a specific city.</p>
</td></tr>
<tr><td><code id="get_fb_parameter_ids_+3A_limit">limit</code></td>
<td>
<p>Number of parameter IDs to search for.</p>
</td></tr>
<tr><td><code id="get_fb_parameter_ids_+3A_add_location_coords">add_location_coords</code></td>
<td>
<p>When querying location IDs (eg, when <code style="white-space: pre;">&#8288;type = "city&#8288;</code>), add location coordinates&mdash;which will add the latitude and longitude, as well as the geometry when available. (Default: <code>FALSE</code>)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For additional information, see: https://developers.facebook.com/docs/marketing-api/audiences/reference/targeting-search/
</p>


<h3>Value</h3>

<p>Dataframe with parameter IDs and descriptions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

#### Define version and token
VERSION = "enter-version"
TOKEN = "enter-token"

#### Query parameter IDs
get_fb_parameter_ids(type = "interests", version = VERSION, token = TOKEN)
get_fb_parameter_ids(type = "behaviors", version = VERSION, token = TOKEN)
get_fb_parameter_ids(type = "education_majors", q = "Computer", version = VERSION, token = TOKEN)
get_fb_parameter_ids(type = "education_schools", q = "Washington", version = VERSION, token = TOKEN)
get_fb_parameter_ids(type = "education_statuses", version = VERSION, token = TOKEN)
get_fb_parameter_ids(type = "family_statuses", version = VERSION, token = TOKEN)
get_fb_parameter_ids(type = "income", version = VERSION, token = TOKEN)
get_fb_parameter_ids(type = "industries", version = VERSION, token = TOKEN)
get_fb_parameter_ids(type = "work_positions", q = "Data", version = VERSION, token = TOKEN)
get_fb_parameter_ids(type = "work_employers", q = "World Bank", version = VERSION, token = TOKEN)
get_fb_parameter_ids(type = "relationship_statuses", version = VERSION, token = TOKEN)
get_fb_parameter_ids(type = "life_events", version = VERSION, token = TOKEN)

#### Location IDs
get_fb_parameter_ids(type = "country", version = VERSION, token = TOKEN)
get_fb_parameter_ids(type = "region", country_code = "US", version = VERSION, token = TOKEN)
get_fb_parameter_ids(type         = "medium_geo_area", 
                     country_code = "US", 
                     q            = "Henrico", 
                     version      = VERSION, 
                     token        = TOKEN)


## End(Not run)
</code></pre>

<hr>
<h2 id='get_fb_suggested_radius'>Get Suggested Radius</h2><span id='topic+get_fb_suggested_radius'></span>

<h3>Description</h3>

<p>When targeting around a specific location, returns a suggested radius to reach enough people
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_fb_suggested_radius(location, distance_unit = "kilometer", version, token)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_fb_suggested_radius_+3A_location">location</code></td>
<td>
<p>Vector of latitude and longitude (<code>c(lat, lon)</code>).</p>
</td></tr>
<tr><td><code id="get_fb_suggested_radius_+3A_distance_unit">distance_unit</code></td>
<td>
<p>Either <code>"kilometer"</code> or &quot;<code>mile</code>&quot;; defaults to &quot;<code>kilometer</code>&quot;</p>
</td></tr>
<tr><td><code id="get_fb_suggested_radius_+3A_version">version</code></td>
<td>
<p>'Facebook Marketing' API version; for example, &quot;v19.0&quot;</p>
</td></tr>
<tr><td><code id="get_fb_suggested_radius_+3A_token">token</code></td>
<td>
<p>'Facebook Marketing' API token</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For more information, see the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/targeting-search/#radius">Facebook documentation here</a>
</p>


<h3>Value</h3>

<p>Dataframe with suggested radius and distance unit
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
get_fb_suggested_radius(location = c(38.89831, -77.03658),
                        version  = "v14.0",
                        token    = "TOKEN-HERE")

## End(Not run)
</code></pre>

<hr>
<h2 id='get_location_coords'>Get Coordinates/Geometries for Valid Location Keys</h2><span id='topic+get_location_coords'></span>

<h3>Description</h3>

<p>Get Coordinates/Geometries for Valid Location Keys
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_location_coords(
  location_unit_type,
  location_keys,
  version,
  token,
  large_query_chunk_size = 10,
  large_query_pause = 0,
  limit = NULL,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_location_coords_+3A_location_unit_type">location_unit_type</code></td>
<td>
<p>Either <code>"coordinates"</code> (for buffer around single point) or type of geographic location, including: <code>"countries"</code>, <code>"regions"</code>, <code>"cities"</code>, <code>"zips"</code>, <code>"places"</code>, <code>"geo_markets"</code>, <code>"electoral_district"</code>, or <code>"country_groups"</code>. See the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/basic-targeting#location">Basic Targetting</a> documentation for more information.</p>
</td></tr>
<tr><td><code id="get_location_coords_+3A_location_keys">location_keys</code></td>
<td>
<p>Key associated with location. Use the <code>get_fb_parameter_ids</code> function to get location keys; see <a href="https://worldbank.github.io/rsocialwatcher/articles/rsocialwatcher-vignette.html#location-ids">here</a> for examples.</p>
</td></tr>
<tr><td><code id="get_location_coords_+3A_version">version</code></td>
<td>
<p>API version. e.g., &quot;v19.0&quot;</p>
</td></tr>
<tr><td><code id="get_location_coords_+3A_token">token</code></td>
<td>
<p>Facebook API token</p>
</td></tr>
<tr><td><code id="get_location_coords_+3A_large_query_chunk_size">large_query_chunk_size</code></td>
<td>
<p>The function will first try to query all locations using one API call. If too many locations are requested, the function will query in chunks. By default, the function will query 10 locations at a time. (Default: 10).</p>
</td></tr>
<tr><td><code id="get_location_coords_+3A_large_query_pause">large_query_pause</code></td>
<td>
<p>The function will first try to query all locations using one API call. If too many locations are requested, the function will query in chunks. After each query, the <code>large_query_pause</code> can be set to &gt; 0 to sleep for <code>large_query_pause</code> seconds in order to not make too many API calls too quickly. (Default: 0).</p>
</td></tr>
<tr><td><code id="get_location_coords_+3A_limit">limit</code></td>
<td>
<p>Number of parameter IDs to search for.</p>
</td></tr>
<tr><td><code id="get_location_coords_+3A_verbose">verbose</code></td>
<td>
<p>If the function needs to make multiple queries to obtain location information for all location keys, print progress. (Default: <code>TRUE</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Spatial features dataframe
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
#### Define version, creation act, and token
VERSION = "enter-version"
TOKEN = "enter-token"

#### Grab locations
loc_sf &lt;- get_location_coords(location_type = "countries",
                                 location_keys = c("US", "MX", "CA"),
                                 version = VERSION,
                                 token = TOKEN)


## End(Not run)
</code></pre>

<hr>
<h2 id='map_param'>Map Parameters within <code>query_fb_marketing_api()</code>
Groups input into a <code>map_param</code> object. When a <code>map_param</code> object is entered as a parameter in <code>query_fb_marketing_api()</code>, <code>query_fb_marketing_api()</code> makes a separate API query for each item within <code>map_param</code>. A <code>map_param</code> object is structured as a list, where the <code>map_param</code> class triggers the <code>query_fb_marketing_api</code> function to make a separate API query for each item in the list.</h2><span id='topic+map_param'></span>

<h3>Description</h3>

<p>Map Parameters within <code>query_fb_marketing_api()</code>
Groups input into a <code>map_param</code> object. When a <code>map_param</code> object is entered as a parameter in <code>query_fb_marketing_api()</code>, <code>query_fb_marketing_api()</code> makes a separate API query for each item within <code>map_param</code>. A <code>map_param</code> object is structured as a list, where the <code>map_param</code> class triggers the <code>query_fb_marketing_api</code> function to make a separate API query for each item in the list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>map_param(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="map_param_+3A_...">...</code></td>
<td>
<p>Vector or list</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class <code>map_param</code> to be used as input to the <code>query_fb_marketing_api()</code> function to make multiple API queries.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Make 3 queries:
# 1. Number of males and females MAU/DAU
# 2. Number of male MAU/DAU
# 3. Number of female MAU/DAU
query_fb_marketing_api(
  location_unit_type = "countries",
  location_keys      = "US",
  gender             = map_param(c(1,2), 1, 2),
  version            = VERSION, 
  creation_act       = CREATION_ACT, 
  token              = TOKEN)

## End(Not run)
</code></pre>

<hr>
<h2 id='map_param_vec'>Map Parameters over Vector
Converts a vector into a <code>map_param</code> object. When a <code>map_param</code> object is entered as a parameter in <code>query_fb_marketing_api()</code>, <code>query_fb_marketing_api()</code> makes a separate API query for each item within <code>map_param</code> (ie, for each item in the original vector entered into <code>map_param</code>). A <code>map_param</code> object is structured as a list, where the <code>map_param</code> class triggers the <code>query_fb_marketing_api</code> function to make a separate API query for each item in the list.</h2><span id='topic+map_param_vec'></span>

<h3>Description</h3>

<p>Map Parameters over Vector
Converts a vector into a <code>map_param</code> object. When a <code>map_param</code> object is entered as a parameter in <code>query_fb_marketing_api()</code>, <code>query_fb_marketing_api()</code> makes a separate API query for each item within <code>map_param</code> (ie, for each item in the original vector entered into <code>map_param</code>). A <code>map_param</code> object is structured as a list, where the <code>map_param</code> class triggers the <code>query_fb_marketing_api</code> function to make a separate API query for each item in the list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>map_param_vec(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="map_param_vec_+3A_...">...</code></td>
<td>
<p>Vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class <code>map_param</code> to be used as input to the <code>query_fb_marketing_api()</code> function to make multiple API queries.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Make 2 queries:
# 1. Number of male MAU/DAU
# 2. Number of female MAU/DAU
query_fb_marketing_api(
  location_unit_type = "countries",
  location_keys      = "US",
  gender             = map_param_vec(1:2),
  version            = VERSION, 
  creation_act       = CREATION_ACT, 
  token              = TOKEN)

## End(Not run)
</code></pre>

<hr>
<h2 id='query_fb_marketing_api'>Query 'Facebook Marketing' API</h2><span id='topic+query_fb_marketing_api'></span>

<h3>Description</h3>

<p>Query 'Facebook Marketing' API
</p>


<h3>Usage</h3>

<pre><code class='language-R'>query_fb_marketing_api(
  location_unit_type,
  lat_lon = NULL,
  radius = NULL,
  radius_unit = NULL,
  location_keys = NULL,
  location_types = c("home", "recent"),
  locales = NULL,
  interests = NULL,
  behaviors = NULL,
  college_years = NULL,
  education_majors = NULL,
  education_schools = NULL,
  education_statuses = NULL,
  family_statuses = NULL,
  income = NULL,
  industries = NULL,
  life_events = NULL,
  relationship_statuses = NULL,
  work_positions = NULL,
  work_employers = NULL,
  excl_interests = NULL,
  excl_behaviors = NULL,
  excl_college_years = NULL,
  excl_education_majors = NULL,
  excl_education_schools = NULL,
  excl_education_statuses = NULL,
  excl_family_statuses = NULL,
  excl_income = NULL,
  excl_industries = NULL,
  excl_life_events = NULL,
  excl_relationship_statuses = NULL,
  excl_work_positions = NULL,
  excl_work_employers = NULL,
  user_os = NULL,
  wireless_carrier = NULL,
  gender = c(1, 2),
  age_min = 18,
  age_max = 65,
  flex_target = NULL,
  version,
  creation_act,
  token,
  sleep_time = 0.1,
  show_result = FALSE,
  verbose = TRUE,
  add_query = FALSE,
  add_query_hide_credentials = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="query_fb_marketing_api_+3A_location_unit_type">location_unit_type</code></td>
<td>
<p>Either <code>"coordinates"</code> (for buffer around single point) or type of geographic location, including: <code>"countries"</code>, <code>"regions"</code>, <code>"cities"</code>, <code>"zips"</code>, <code>"places"</code>, <code>"geo_markets"</code>, <code>"electoral_district"</code>, or <code>"country_groups"</code>. See the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/basic-targeting#location">Basic Targetting</a> documentation for more information.
</p>


<h4>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</h4>

<p><strong>If location_unit_type is &quot;coordinates&quot;</strong>
</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_lat_lon">lat_lon</code></td>
<td>
<p>Coordinates, c(lat, lon). For example, <code>c(38.90, -77.01)</code></p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_radius">radius</code></td>
<td>
<p>Radius around coordinate</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_radius_unit">radius_unit</code></td>
<td>
<p>Unit for radius; either <code>"kilometer"</code> or <code>"mile"</code>
</p>


<h4>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</h4>

<p><strong>If location_unit_type is not &quot;coordinates&quot;</strong>
</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_location_keys">location_keys</code></td>
<td>
<p>Key associated with location. Use the <code>get_fb_parameter_ids</code> function to get location keys; see <a href="https://worldbank.github.io/rsocialwatcher/articles/rsocialwatcher-vignette.html#location-ids">here</a> for examples.
</p>


<h4>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</h4>

<p><strong>Other location parameters</strong>
</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_location_types">location_types</code></td>
<td>
<p>Either: (1) <code>"home"</code> (people whose stated location in Facebook profile &quot;current city&quot; is in an area, valided by IP), (2) <code>"recent"</code> (people whose recent location is in the selected area, determined by mobile device data), (3) <code>"travel_in"</code> (people whose most recent location is in selected area and more than 100 miles from stated current city), (4) <code>c("home", "recent")</code> (for people in either category)</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_locales">locales</code></td>
<td>
<p>Locales ID. For more information on locales, see the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/advanced-targeting#additional">Advanced Targeting Documentation</a>
</p>


<h4>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</h4>

<p><strong>Parameters:</strong>
</p>

<ul>
<li><p> Within parameters, vectors (<code>c()</code>) specify OR conditions and lists (<code>list()</code>) specify AND conditions. For example, <code>interests = c(6003349442621, 6003139266461)</code> will target users who are interested in either entertainment OR movies, while <code>interests = list(6003349442621, 6003139266461)</code> will target users who are interested in either entertainment AND movies.
</p>
</li>
<li><p> Across parameters, AND conditions are used. For example, if enter <code>interests = 6003349442621</code> and <code>behaviors = 6008297697383</code> are specified, the function will query Facebook users interested in entertainment AND are frequent travelers.
</p>
</li>
<li><p> Or conditions across parameters can be specified using the <code>flex_target</code> argument; see <a href="https://worldbank.github.io/rsocialwatcher/articles/rsocialwatcher-vignette.html#query_data_ids_andor_flex">package documentation</a> for examples.
</p>
</li></ul>

</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_interests">interests</code></td>
<td>
<p>Interest IDs. For example, <code>interests = c(6003349442621, 6003139266461)</code> will target users who are interested in either entertainment or movies. Use <code>get_fb_parameter_ids(type = "interests", ...)</code> to get dataframe with IDs and descriptions. For more information, see the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/basic-targeting#interests">Basic Targeting Documentation</a>.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_behaviors">behaviors</code></td>
<td>
<p>Behavior IDs. For example, <code>behaviors = c(6002714895372, 6008297697383)</code> will target users who are either frequent travelers or returned from travels 2 weeks ago. Use <code>get_fb_parameter_ids(type = "behaviors", ...)</code> to get dataframe with IDs and descriptions. For more information, see the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/basic-targeting#behaviors">Basic Targeting Documentation</a>.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_college_years">college_years</code></td>
<td>
<p>College graduation years. For example, <code>college_years = c(2014, 2015)</code> will target users who graduated college in 2014 or 2015. For more information, see the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/advanced-targeting#education_and_workplace">Advanced Targeting Documentation</a>.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_education_majors">education_majors</code></td>
<td>
<p>Education major IDs. For example, <code>education_majors = 123</code> will target users who majored in computer science. Use <code>get_fb_parameter_ids(type = "education_majors", q = "Computer", ...)</code> to get dataframe with IDs and descriptions. For more information, see the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/advanced-targeting#education_and_workplace">Advanced Targeting Documentation</a>.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_education_schools">education_schools</code></td>
<td>
<p>School IDs. For example, <code>education_schools = 105930651606</code> will taget users at/who graduated from Harvard University. Use <code>get_fb_parameter_ids(type = "education_schools", q = "Harvard", ...)</code> to get dataframe with IDs and descriptions. For more information, see the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/advanced-targeting#education_and_workplace">Advanced Targeting Documentation</a>.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_education_statuses">education_statuses</code></td>
<td>
<p>Education status IDs. For example, <code>education_statuses = c(9,10)</code> will yeild those who report to have either a Master degree or professional degree. Use <code>get_fb_parameter_ids(type = "education_statuses", ...)</code> to get dataframe with IDs and descriptions. For more information, see the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/advanced-targeting#education_and_workplace">Advanced Targeting Documentation</a>.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_family_statuses">family_statuses</code></td>
<td>
<p>Family status IDs. For example, <code>family_statuses = c(6023080302983, 6023005681983)</code> targets users who are parents with preteens or parents with teenagers. Use <code>get_fb_parameter_ids(type = "family_statuses")</code> to get dataframe with IDs and descriptions. For more information, see the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/advanced-targeting#demographic">Advanced Targeting Documentation</a>.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_income">income</code></td>
<td>
<p>Income IDs. For example, <code>income = c(6107813553183, 6107813554583)</code> targets users with a household income in the top 10%-25% or 25%-50% of ZIP codes (US). Use <code>get_fb_parameter_ids(type = "income")</code> to get dataframe with IDs and descriptions. For more information, see the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/advanced-targeting#demographic">Advanced Targeting Documentation</a>.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_industries">industries</code></td>
<td>
<p>Industries IDs. For example, <code>industries = c(6008888980183, 6008888972183)</code> targets users who work in sales or legal services. Use <code>get_fb_parameter_ids(type = "industries")</code> to get dataframe with IDs and descriptions. For more information, see the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/advanced-targeting#demographic">Advanced Targeting Documentation</a>.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_life_events">life_events</code></td>
<td>
<p>Life event IDs. For example, <code>life_events = c(6005149512172, 6005149512172)</code> targets users who recently moved or are in a new job. Use <code>get_fb_parameter_ids(type = "life_events")</code> to get dataframe with IDs and descriptions. For more information, see the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/advanced-targeting#demographic">Advanced Targeting Documentation</a>.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_relationship_statuses">relationship_statuses</code></td>
<td>
<p>Relationship status IDs. For example, <code>relationship_statuses = c(3,4)</code> targets those who are married or engaged. Use <code>get_fb_parameter_ids(type = "relationship_statuses")</code> to get dataframe with IDs and descriptions. For more information, see the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/advanced-targeting#demographic">Advanced Targeting Documentation</a>.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_work_positions">work_positions</code></td>
<td>
<p>Work position IDs. For example, <code>work_positions = 105763692790962</code> will target users who indicate they are contractors. Use <code>get_fb_parameter_ids(type = "work_positions", ...)</code> to get dataframe with IDs and descriptions. For more information, see the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/advanced-targeting#education_and_workplace">Advanced Targeting Documentation</a>.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_work_employers">work_employers</code></td>
<td>
<p>Work employer IDs. For example, <code>work_employers = 50431654</code> will target users who work for Microsoft. Use <code>get_fb_parameter_ids(type = "work_employers", ...)</code> to get dataframe with IDs and descriptions. For more information, see the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/advanced-targeting#education_and_workplace">Advanced Targeting Documentation</a>.
</p>


<h4>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</h4>

<p><strong>Exlcude Facebook users from query by select parameters</strong>
</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_excl_interests">excl_interests</code></td>
<td>
<p>Interest IDs to exclude.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_excl_behaviors">excl_behaviors</code></td>
<td>
<p>Behavior IDs to exclude.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_excl_college_years">excl_college_years</code></td>
<td>
<p>Colleage year IDs to exclude.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_excl_education_majors">excl_education_majors</code></td>
<td>
<p>Education major IDs to exclude.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_excl_education_schools">excl_education_schools</code></td>
<td>
<p>Education school IDs to exclude.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_excl_education_statuses">excl_education_statuses</code></td>
<td>
<p>Education status IDs to exclude.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_excl_family_statuses">excl_family_statuses</code></td>
<td>
<p>Family status IDs to exclude.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_excl_income">excl_income</code></td>
<td>
<p>Income IDs to exclude.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_excl_industries">excl_industries</code></td>
<td>
<p>Industry IDs to exclude.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_excl_life_events">excl_life_events</code></td>
<td>
<p>Life event IDs to exclude.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_excl_relationship_statuses">excl_relationship_statuses</code></td>
<td>
<p>Relationship status IDs to exclude.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_excl_work_positions">excl_work_positions</code></td>
<td>
<p>Work position IDs to exclude.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_excl_work_employers">excl_work_employers</code></td>
<td>
<p>Work employer IDs to exclude.
</p>


<h4>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</h4>

<p><strong>Non-Flexible parameters:</strong>
</p>

<ul>
<li><p> Across parameters, AND conditions are used. For example, if <code>gender = 1</code> and <code>age_min = 30</code>, queries users that are male AND are over 30 years old.
</p>
</li>
<li><p> These parameters <em>cannot</em> be specified in <code>flex_targeting</code>
</p>
</li>
<li><p> Within parameters, vectors (<code>c()</code>) specify OR conditions. AND conditions cannot be specified within these parameters.
</p>
</li></ul>

</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_user_os">user_os</code></td>
<td>
<p>User operating systems. For example, <code style="white-space: pre;">&#8288;user_os = ('iOS', 'Android')&#8288;</code> targets those that use either an iOS or Android OS; <code>user_os = c("Android_ver_4.2_and_above")</code> targets those using Android version 4.2 and above; and <code>user_os = c("iOS_ver_8.0_to_9.0")</code> targets those using iOS version 8.0 to 9.0. Different versions can be specified. For more information, see the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/advanced-targeting#demographic">Advanced Targeting Documentation</a>.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_wireless_carrier">wireless_carrier</code></td>
<td>
<p>Wireless carrier. If set to <code>Wifi</code>, then targets those connecting via a Wifi network. For more information, see the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/advanced-targeting#demographic">Advanced Targeting Documentation</a>.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_gender">gender</code></td>
<td>
<p>Genders to target; 1 targets males and 2 targets females. Default is both. See <code>gender</code> in the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/basic-targeting#demographics">Basic Targeting Documentation</a>.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_age_min">age_min</code></td>
<td>
<p>Minimum age. Default is 18. See <code>age_min</code> in the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/basic-targeting#demographics">Basic Targeting Documentation</a>.</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_age_max">age_max</code></td>
<td>
<p>Maximum age. Default is 65. See <code>age_max</code> in the <a href="https://developers.facebook.com/docs/marketing-api/audiences/reference/basic-targeting#demographics">Basic Targeting Documentation</a>.
</p>


<h4>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</h4>

<p><strong>Flex targeting parameters</strong>
</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_flex_target">flex_target</code></td>
<td>
<p>Flexible targeting allows for more complicated parameter specifications. For example, specifying OR conditions across parameter types (eg, behaviors, interests, etc). For information on how to use flexible targeting, see <a href="https://worldbank.github.io/rsocialwatcher/articles/rsocialwatcher-vignette.html#across-parameter-types-flexible-targetting">the documentation here</a>.
</p>


<h4>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</h4>

<p><strong>Parameters for credentials</strong>
</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_version">version</code></td>
<td>
<p>API version. e.g., &quot;v19.0&quot;</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_creation_act">creation_act</code></td>
<td>
<p>Facebook creation act</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_token">token</code></td>
<td>
<p>Facebook API token
</p>


<h4>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</h4>

<p><strong>Scraping parameters</strong>
</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_sleep_time">sleep_time</code></td>
<td>
<p>How much time (in seconds) to pause between each query (default: <code>0.1</code>).</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_show_result">show_result</code></td>
<td>
<p>After each query, whether to print the number of monthly active users (default: <code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_verbose">verbose</code></td>
<td>
<p>Display messages that indicate the function is pausing before making additional queries. Pausing can result from API key rate limits or no internet (default: <code>TRUE</code>).
</p>


<h4>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</h4>

<p><strong>Return query text</strong>
</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_add_query">add_query</code></td>
<td>
<p>If <code>TRUE</code>, add query text as variable in returned dataframe</p>
</td></tr>
<tr><td><code id="query_fb_marketing_api_+3A_add_query_hide_credentials">add_query_hide_credentials</code></td>
<td>
<p>If <code>TRUE</code> (and <code>add_query</code> is <code>TRUE</code>), hide the <code>creation_act</code> and <code>token</code> from the query text returned in the dataframe</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Dataframe that includes (1) daily and monthly active users and (2) parameter values
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_fb_parameter_ids">get_fb_parameter_ids()</a></code> To get IDs and descriptions for behaviors, demographics, interests, and locales. For additional details on how to use the package, see <a href="https://worldbank.github.io/rsocialwatcher/articles/rsocialwatcher-vignette.html">the documentation here</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
#### Define version, creation act, and token
VERSION = "enter-version"
CREATION_ACT = "creation_act"
TOKEN = "enter-token"

#### Query data
## All Facebook users in US
query_fb_marketing_api(
location_unit_type = "countries",
location_keys      = "US",
version            = VERSION, 
creation_act       = CREATION_ACT, 
token              = TOKEN)

## All Facebook users in US with interest in concernts
concert_id &lt;- get_fb_parameter_ids(type = "interests", version = VERSION, token = TOKEN) %&gt;% 
  filter(name == "Concerts (music event)") %&gt;%
  pull(id) 

query_fb_marketing_api(
  location_unit_type = "countries",
  location_keys      = "US",
  interests          = concert_id,
  version            = VERSION, 
  creation_act       = CREATION_ACT, 
  token              = TOKEN)



## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
