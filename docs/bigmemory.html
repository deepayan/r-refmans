<!DOCTYPE html><html><head><title>Help for package bigmemory</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {bigmemory}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#as.big.matrix-methods'><p>Create a &ldquo;big.matrix&rdquo; from a matrix or vector.</p></a></li>
<li><a href='#as.matrix,big.matrix-method'><p>Convert to base R matrix</p></a></li>
<li><a href='#big.matrix'><p>The core &quot;big.matrix&quot; operations.</p></a></li>
<li><a href='#big.matrix-class'><p>Class &quot;big.matrix&quot;</p></a></li>
<li><a href='#big.matrix.descriptor-class'><p>Class &quot;big.matrix.descriptor&quot;</p></a></li>
<li><a href='#bigmemory-package'><p>Manage massive matrices with shared memory and memory-mapped files.</p></a></li>
<li><a href='#deepcopy'><p>Produces a physical copy of a &ldquo;big.matrix&rdquo;</p></a></li>
<li><a href='#describe,big.matrix-method'><p>The basic &ldquo;big.matrix&rdquo; operations for sharing and re-attaching.</p></a></li>
<li><a href='#dim,big.matrix-method'><p>Dimensions of a big.matrix object</p></a></li>
<li><a href='#dimnames,big.matrix-method'><p>Dimnames of a big.matrix Object</p></a></li>
<li><a href='#Extract,big.matrix'><p>Extract or Replace</p></a></li>
<li><a href='#flush'><p>Updating a big.matrix filebacking.</p></a></li>
<li><a href='#GetMatrixSize'><p>big.matrix size</p></a></li>
<li><a href='#head,big.matrix-method'><p>Return First or Last Part of a big.matrix Object</p></a></li>
<li><a href='#is.float'><p>Check if Float</p></a></li>
<li><a href='#is.float,numeric-method'><p>Is Float?</p></a></li>
<li><a href='#is.sub.big.matrix'><p>Submatrix support</p></a></li>
<li><a href='#length,big.matrix-method'><p>Length of a big.matrix object</p></a></li>
<li><a href='#morder'><p>Ordering and Permuting functions for <code style="white-space: pre;">&#8288;big.matrix'' and  &#8288;</code>matrix&rdquo; objects</p></a></li>
<li><a href='#mwhich'><p>Expanded &ldquo;which&rdquo;-like functionality.</p></a></li>
<li><a href='#mwhich-methods'><p>Expanded &ldquo;which&rdquo;-like functionality.</p></a></li>
<li><a href='#ncol,big.matrix-method'><p>The Number of Rows/Columns of a big.matrix</p></a></li>
<li><a href='#print,big.matrix-method'><p>Print Values</p></a></li>
<li><a href='#typeof,big.matrix-method'><p>The Type of a big.matrix Object</p></a></li>
<li><a href='#write.big.matrix'><p>File interface for a &ldquo;big.matrix&rdquo;</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>4.6.4</td>
</tr>
<tr>
<td>Title:</td>
<td>Manage Massive Matrices with Shared Memory and Memory-Mapped
Files</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.0),</td>
</tr>
<tr>
<td>Imports:</td>
<td>bigmemory.sri, methods, utils, Rcpp, uuid (&ge; 1.0-2)</td>
</tr>
<tr>
<td>Enhances:</td>
<td>biganalytics, bigtabulate</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>BH, uuid (&ge; 1.0-2), Rcpp</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Description:</td>
<td>Create, store, access, and manipulate massive matrices.
    Matrices are allocated to shared memory and may use memory-mapped
    files.  Packages 'biganalytics', 'bigtabulate', 'synchronicity', and
    'bigalgebra' provide advanced functionality.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/LGPL-3">LGPL-3</a> | <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/kaneplusplus/bigmemory">https://github.com/kaneplusplus/bigmemory</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/kaneplusplus/bigmemory/issues">https://github.com/kaneplusplus/bigmemory/issues</a></td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, remotes</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-09 17:18:13 UTC; mike</td>
</tr>
<tr>
<td>Author:</td>
<td>Michael J. Kane <a href="https://orcid.org/0000-0003-1899-6662"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  John W. Emerson [aut],
  Peter Haverty [aut],
  Charles Determan [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Michael J. Kane &lt;bigmemoryauthors@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-09 20:20:08 UTC</td>
</tr>
</table>
<hr>
<h2 id='as.big.matrix-methods'>Create a &ldquo;big.matrix&rdquo; from a matrix or vector.</h2><span id='topic+as.big.matrix-methods'></span><span id='topic+as.big.matrix+2Cmatrix-method'></span><span id='topic+as.big.matrix+2Cvector-method'></span><span id='topic+as.big.matrix+2Cdata.frame-method'></span>

<h3>Description</h3>

<p>Create a <code><a href="#topic+big.matrix">big.matrix</a></code> from a <code>matrix</code> or <code>vector</code>
or <code><a href="base.html#topic+data.frame">data.frame</a></code>;
a <code>vector</code> will result in a <code><a href="#topic+big.matrix">big.matrix</a></code> with one column.
A data frame will have character vectors converted to factors, and then
all factors converted to numeric factor levels.  All labels or character
values will be lost.
</p>


<h3>Methods</h3>


<dl>
<dt><code>signature(x = "matrix")</code></dt><dd><p> ... </p>
</dd>
<dt><code>signature(x = "vector")</code></dt><dd><p> ... </p>
</dd>
<dt><code>signature(x = "data.frame")</code></dt><dd><p> ... </p>
</dd>
</dl>


<hr>
<h2 id='as.matrix+2Cbig.matrix-method'>Convert to base R matrix</h2><span id='topic+as.matrix+2Cbig.matrix-method'></span>

<h3>Description</h3>

<p>Extract values from a <code>big.matrix</code> object
and convert to a base R matrix object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'big.matrix'
as.matrix(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.matrix+2B2Cbig.matrix-method_+3A_x">x</code></td>
<td>
<p>A big.matrix object</p>
</td></tr>
</table>

<hr>
<h2 id='big.matrix'>The core &quot;big.matrix&quot; operations.</h2><span id='topic+big.matrix'></span><span id='topic+filebacked.big.matrix'></span><span id='topic+as.big.matrix'></span><span id='topic+is.big.matrix'></span><span id='topic+is.big.matrix+2Cbig.matrix-method'></span><span id='topic+is.big.matrix+2CANY-method'></span><span id='topic+is.separated'></span><span id='topic+is.separated+2Cbig.matrix-method'></span><span id='topic+is.filebacked'></span><span id='topic+is.filebacked+2Cbig.matrix-method'></span><span id='topic+shared.name'></span><span id='topic+shared.name+2Cbig.matrix-method'></span><span id='topic+file.name'></span><span id='topic+file.name+2Cbig.matrix-method'></span><span id='topic+dir.name'></span><span id='topic+dir.name+2Cbig.matrix-method'></span><span id='topic+is.shared'></span><span id='topic+is.shared+2Cbig.matrix-method'></span><span id='topic+is.readonly'></span><span id='topic+is.readonly+2Cbig.matrix-method'></span><span id='topic+is.nil'></span>

<h3>Description</h3>

<p>Create a <code>big.matrix</code> (or check to see if an object
is a <code>big.matrix</code>, or create a <code>big.matrix</code> from a
<code><a href="base.html#topic+matrix">matrix</a></code>, and so on).  The <code>big.matrix</code> may be file-backed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>big.matrix(
  nrow,
  ncol,
  type = options()$bigmemory.default.type,
  init = NULL,
  dimnames = NULL,
  separated = FALSE,
  backingfile = NULL,
  backingpath = NULL,
  descriptorfile = NULL,
  binarydescriptor = FALSE,
  shared = options()$bigmemory.default.shared
)

filebacked.big.matrix(
  nrow,
  ncol,
  type = options()$bigmemory.default.type,
  init = NULL,
  dimnames = NULL,
  separated = FALSE,
  backingfile = NULL,
  backingpath = NULL,
  descriptorfile = NULL,
  binarydescriptor = FALSE
)

as.big.matrix(
  x,
  type = NULL,
  separated = FALSE,
  backingfile = NULL,
  backingpath = NULL,
  descriptorfile = NULL,
  binarydescriptor = FALSE,
  shared = options()$bigmemory.default.shared
)

is.big.matrix(x)

## S4 method for signature 'big.matrix'
is.big.matrix(x)

## S4 method for signature 'ANY'
is.big.matrix(x)

is.separated(x)

## S4 method for signature 'big.matrix'
is.separated(x)

is.filebacked(x)

## S4 method for signature 'big.matrix'
is.filebacked(x)

shared.name(x)

## S4 method for signature 'big.matrix'
shared.name(x)

file.name(x)

## S4 method for signature 'big.matrix'
file.name(x)

dir.name(x)

## S4 method for signature 'big.matrix'
dir.name(x)

is.shared(x)

## S4 method for signature 'big.matrix'
is.shared(x)

is.readonly(x)

## S4 method for signature 'big.matrix'
is.readonly(x)

is.nil(address)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="big.matrix_+3A_nrow">nrow</code></td>
<td>
<p>number of rows.</p>
</td></tr>
<tr><td><code id="big.matrix_+3A_ncol">ncol</code></td>
<td>
<p>number of columns.</p>
</td></tr>
<tr><td><code id="big.matrix_+3A_type">type</code></td>
<td>
<p>the type of the atomic element
(<code>options()$bigmemory.default.type</code> by default &ndash; <code>"double"</code> &ndash;
but can be changed by the user to <code>"integer"</code>, <code>"short"</code>, or
<code>"char"</code>).</p>
</td></tr>
<tr><td><code id="big.matrix_+3A_init">init</code></td>
<td>
<p>a scalar value for initializing the matrix (<code>NULL</code> by
default to avoid unnecessary time spent doing the initializing).</p>
</td></tr>
<tr><td><code id="big.matrix_+3A_dimnames">dimnames</code></td>
<td>
<p>a list of the row and column names; use with caution
for large objects.</p>
</td></tr>
<tr><td><code id="big.matrix_+3A_separated">separated</code></td>
<td>
<p>use separated column organization of the data;
see details.</p>
</td></tr>
<tr><td><code id="big.matrix_+3A_backingfile">backingfile</code></td>
<td>
<p>the root name for the file(s) for the cache of <code>x</code>.</p>
</td></tr>
<tr><td><code id="big.matrix_+3A_backingpath">backingpath</code></td>
<td>
<p>the path to the directory containing the file
backing cache.</p>
</td></tr>
<tr><td><code id="big.matrix_+3A_descriptorfile">descriptorfile</code></td>
<td>
<p>the name of the file to hold the backingfile
description, for subsequent use with <code><a href="#topic+attach.big.matrix">attach.big.matrix</a></code>;
if <code>NULL</code>, the <code>backingfile</code> is used as the root part of the
descriptor file name.  The descriptor file is placed in the same directory
as the backing files.</p>
</td></tr>
<tr><td><code id="big.matrix_+3A_binarydescriptor">binarydescriptor</code></td>
<td>
<p>the flag to specify if the binary RDS format
should be used for the backingfile description, for subsequent use with
<code><a href="#topic+attach.big.matrix">attach.big.matrix</a></code>; if <code>NULL</code> of <code>FALSE</code>, the
<code>dput()</code> file format is used.</p>
</td></tr>
<tr><td><code id="big.matrix_+3A_shared">shared</code></td>
<td>
<p><code>TRUE</code> by default, and always <code>TRUE</code> if the
<code>big.matrix</code> is file-backed.  For a non-filebacked <code>big.matrix</code>,
<code>shared=FALSE</code> uses non-shared memory, which can be more stable for
large (say, &gt;50% of RAM) objects.  Shared memory allocation can sometimes
fail in such cases due to exhausted shared-memory resources in the system.</p>
</td></tr>
<tr><td><code id="big.matrix_+3A_x">x</code></td>
<td>
<p>a <code>matrix</code>, <code>vector</code>, or <code>data.frame</code> for
<code>as.big.matrix</code>; if a vector, a one-column<br /> <code>big.matrix</code> is
created by <code>as.big.matrix</code>; if a <code>data.frame</code>, see details.
For the <code>is.*</code> functions, <code>x</code> is likely a <code>big.matrix</code>.</p>
</td></tr>
<tr><td><code id="big.matrix_+3A_address">address</code></td>
<td>
<p>an <code>externalptr</code>, so <code>is.nil(x@address)</code> might
be a sensible thing to want to check, but it's pretty obscure.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A <code>big.matrix</code> consists of an object in <span class="rlang"><b>R</b></span> that does nothing
more than point to the data structure implemented in <abbr><span class="acronym">C++</span></abbr>.  The
object acts much like a traditional <span class="rlang"><b>R</b></span> matrix, but helps protect the user
from many inadvertent memory-consuming pitfalls of traditional <span class="rlang"><b>R</b></span> matrices
and data frames.
</p>
<p>There are two <code>big.matrix</code> types which manage
data in different ways.  A standard, shared <code>big.matrix</code> is constrained
to available <abbr><span class="acronym">RAM</span></abbr>, and may be shared across separate <span class="rlang"><b>R</b></span> processes.
A file-backed <code>big.matrix</code> may exceed available <abbr><span class="acronym">RAM</span></abbr> by
using hard drive space, and may also be shared across processes.  The
atomic types of these matrices may be <code>double</code>, <code>integer</code>,
<code>short</code>, or <code>char</code> (8, 4, 2, and 1 bytes, respectively).
</p>
<p>If <code>x</code> is a <code>big.matrix</code>, then <code>x[1:5,]</code> is returned as an R
<code>matrix</code> containing the first five rows of <code>x</code>.  If <code>x</code> is of
type <code>double</code>, then the result will be <code>numeric</code>; otherwise, the
result will be an <code>integer</code> <span class="rlang"><b>R</b></span> matrix.  The expression <code>x</code> alone
will display information about the <span class="rlang"><b>R</b></span> object (e.g. the external pointer)
rather than evaluating the matrix itself (the user should try <code>x[,]</code>
with extreme caution, recognizing that a huge <span class="rlang"><b>R</b></span> <code>matrix</code> will
be created).
</p>
<p>If <code>x</code> has a huge number of rows and/or columns, then the use of
<code>rownames</code> and/or <code>colnames</code> will be extremely memory-intensive
and should be avoided.  If <code>x</code> has a huge number of columns and
<code>separated=TRUE</code> is used (this isn't typically recommended),
the user might want to store the transpose as there is overhead of a
pointer for each column in the matrix. If <code>separated</code> is <code>TRUE</code>,
then the memory is allocated into separate vectors for each column.
Use this option with caution if you have a large number of columns, as
shared-memory segments are limited by OS and hardware combinations. If
<code>separated</code> is <code>FALSE</code>, the matrix is stored in traditional
column-major format. The function <code>is.separated()</code> returns the
separation type of the <code>big.matrix</code>.
</p>
<p>When a <code>big.matrix</code>, <code>x</code>, is passed as an argument
to a function, it is essentially providing call-by-reference rather than
call-by-value behavior.  If the function modifies any of the values of
<code>x</code>, the changes are not limited in scope to a local copy within the
function. This introduces the possibility of side-effects, in contrast to
standard <span class="rlang"><b>R</b></span> behavior.
</p>
<p>A file-backed <code>big.matrix</code> may exceed available <abbr><span class="acronym">RAM</span></abbr> in size
by using a file cache (or possibly multiple file caches, if
<code>separated=TRUE</code>). This can incur a substantial performance penalty for
such large matrices, but less of a penalty than most other approaches for
handling such large objects. A side-effect of creating a file-backed object
is not only the file-backing(s), but a descriptor file (in the same
directory) that is needed for subsequent attachments (see
<code><a href="#topic+attach.big.matrix">attach.big.matrix</a></code>).
</p>
<p>Note that we do not allow setting or changing the <code>dimnames</code> attributes
by default; such changes would not be reflected in the descriptor objects or
in shared memory.  To override this, set
<code>options(bigmemory.allow.dimnames=TRUE)</code>.
</p>
<p>It should also be noted that a user can create an &ldquo;anonymous&rdquo; file-backed
<code>big.matrix</code> by specifying &quot;&quot; as the <code>filebacking</code> argument.
In this case, the backing resides in the temporary directory and a
descriptor file is not created.  These should be used with caution since
even anonymous backings use disk space which could eventually fill the
hard drive.  Anonymous backings are removed either manually, by a
user, or automatically, when the operating system deems it appropriate.
</p>
<p>Finally, note that <code>as.big.matrix</code> can coerce data frames.  It does
this by making any character columns into factors, and then making all
factors numeric before forming the <code>big.matrix</code>.  Level labels are
not preserved and must be managed by the user if desired.
</p>


<h3>Value</h3>

<p>A <code>big.matrix</code> is returned (for <code>big.matrix</code> and
<code>filebacked.big.matrix</code>, and<br /> <code>as.big.matrix</code>),
and <code>TRUE</code> or <code>FALSE</code> for <code>is.big.matrix</code> and the
other functions.
</p>


<h3>Author(s)</h3>

<p>John W. Emerson and Michael J. Kane
<a href="mailto:bigmemoryauthors@gmail.com">bigmemoryauthors@gmail.com</a>
</p>


<h3>References</h3>

<p>The Bigmemory Project: <a href="http://www.bigmemory.org/">http://www.bigmemory.org/</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bigmemory">bigmemory</a></code>, and perhaps the class documentation of
<code><a href="#topic+big.matrix-class">big.matrix</a></code>; <code><a href="#topic+attach.big.matrix">attach.big.matrix</a></code> and
<code><a href="#topic+describe">describe</a></code>.  Sister packages <span class="pkg">biganalytics</span>, <span class="pkg">bigtabulate</span>,
<span class="pkg">synchronicity</span>, and <span class="pkg">bigalgebra</span> provide advanced functionality.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- big.matrix(10, 2, type='integer', init=-5)
options(bigmemory.allow.dimnames=TRUE)
colnames(x) &lt;- c("alpha", "beta")
is.big.matrix(x)
dim(x)
colnames(x)
rownames(x)
x[,]
x[1:8,1] &lt;- 11:18
colnames(x) &lt;- NULL
x[,]

# The following shared memory example is quite silly, as you wouldn't
# likely do this in a single R session.  But if zdescription were
# passed to another R session via SNOW, foreach, or even by a
# simple file read/write, then the attach.big.matrix() within the
# second R process would give access to the same object in memory.
# Please see the package vignette for real examples.

z &lt;- big.matrix(3, 3, type='integer', init=3)
z[,]
dim(z)
z[1,1] &lt;- 2
z[,]
zdescription &lt;- describe(z)
zdescription
y &lt;- attach.big.matrix(zdescription)
y[,]
y
z
y[1,1] &lt;- -100
y[,]
z[,]
</code></pre>

<hr>
<h2 id='big.matrix-class'>Class &quot;big.matrix&quot;</h2><span id='topic+big.matrix-class'></span>

<h3>Description</h3>

<p>The <code>big.matrix</code> class is designed for matrices with
elements of type <code>double</code>, <code>integer</code>, <code>short</code>, or <code>char</code>.
A <code>big.matrix</code> acts much like a traditional <span class="rlang"><b>R</b></span> matrix, but helps protect
the user from many inadvertent memory-consuming pitfalls of traditional <span class="rlang"><b>R</b></span>
matrices and data frames.  The objects are allocated to shared memory,
and if file-backing is used they may exceed virtual memory in size.  Sadly,
32-bit operating system constraints &ndash; largely Windows and some MacOS versions
&ndash;will be a limiting factor with file-backed matrices; 64-bit operating
systems are recommended.
</p>


<h3>Objects from the Class</h3>

<p>Unlike many <span class="rlang"><b>R</b></span> objects, objects should not be created by calls of the form
<code>new("big.matrix", ...)</code>.  The functions <code>big.matrix()</code>
and <code>filebacked.big.matrix()</code> are intended for the user.
</p>


<h3>Slots</h3>

<dl>
<dt><code>address</code>:</dt><dd><p>Object of class <code>"externalptr"</code>
points to the memory location of the <abbr><span class="acronym">C++</span></abbr> data structure.</p>
</dd></dl>



<h3>Methods</h3>


<p>As you would expect:
</p>
<dl>
<dt>[&lt;-</dt><dd><p><code>signature(x = "big.matrix", i = "ANY", j = "ANY")</code>: ... </p>
</dd>
<dt>[&lt;-</dt><dd><p><code>signature(x = "big.matrix", i = "ANY", j = "missing")</code>: ... </p>
</dd>
<dt>[&lt;-</dt><dd><p><code>signature(x = "big.matrix", i = "missing", j = "ANY")</code>: ... </p>
</dd>
<dt>[&lt;-</dt><dd><p><code>signature(x = "big.matrix", i = "missing", j = "missing")</code>: ... </p>
</dd>
<dt>[&lt;-</dt><dd><p><code>signature(x = "big.matrix", i = "matrix", j = "missing")</code>: ... </p>
</dd>
<dt>[</dt><dd><p><code>signature(x = "big.matrix", i = "ANY", j = "ANY", drop = "missing")</code>: ... </p>
</dd>
<dt>[</dt><dd><p><code>signature(x = "big.matrix", i = "ANY", j = "ANY", drop = "logical")</code>: ... </p>
</dd>
<dt>[</dt><dd><p><code>signature(x = "big.matrix", i = "ANY", j = "missing", drop = "missing")</code>: ... </p>
</dd>
<dt>[</dt><dd><p><code>signature(x = "big.matrix", i = "ANY", j = "missing", drop = "logical")</code>: ... </p>
</dd>
<dt>[</dt><dd><p><code>signature(x = "big.matrix", i = "matrix", j = "missing", drop = "logical")</code>: ... </p>
</dd>
<dt>[</dt><dd><p><code>signature(x = "big.matrix", i = "missing", j = "ANY", drop = "missing")</code>: ... </p>
</dd>
<dt>[</dt><dd><p><code>signature(x = "big.matrix", i = "missing", j = "ANY", drop = "logical")</code>: ... </p>
</dd>
<dt>[</dt><dd><p><code>signature(x = "big.matrix", i = "missing", j = "missing", drop = "missing")</code>: ... </p>
</dd>
<dt>[</dt><dd><p><code>signature(x = "big.matrix", i = "missing", j = "missing", drop = "logical")</code>: ... </p>
</dd>
</dl>
<p>The following are probably more interesting:
</p>
<dl>
<dt>describe</dt><dd><p><code>signature(x = "big.matrix")</code>: provide necessary and
sufficient information for the sharing or re-attaching of the object. </p>
</dd>
<dt>dim</dt><dd><p><code>signature(x = "big.matrix")</code>: returns the dimension of the
<code>big.matrix</code>. </p>
</dd>
<dt>length</dt><dd><p><code>signature(x = "big.matrix")</code>: returns the product of the
dimensions of the <code>big.matrix</code>. </p>
</dd>
<dt>dimnames&lt;-</dt><dd><p><code>signature(x = "big.matrix", value = "list")</code>: set
the row and column names, prohibited by default (see <code><a href="#topic+bigmemory">bigmemory</a></code>
to override). </p>
</dd>
<dt>dimnames</dt><dd><p><code>signature(x = "big.matrix")</code>: get the row and column
names. </p>
</dd>
<dt>head</dt><dd><p><code>signature(x = "big.matrix")</code>: get the first 6 (or
<code>n</code>) rows. </p>
</dd>
<dt>as.matrix</dt><dd><p><code>signature(x = "big.matrix")</code>: coerce a
<code>big.matrix</code> to a <code>matrix</code>. </p>
</dd>
<dt>is.big.matrix</dt><dd><p><code>signature(x = "big.matrix")</code>: return <code>TRUE</code>
if it's a <code>big.matrix</code>. </p>
</dd>
<dt>is.filebacked</dt><dd><p><code>signature(x = "big.matrix")</code>: return <code>TRUE</code>
if there is a file-backing. </p>
</dd>
<dt>is.separated</dt><dd><p><code>signature(x = "big.matrix") </code>: return <code>TRUE</code>
if the <code>big.matrix</code> is organized as a separated column vectors.</p>
</dd>
<dt>is.sub.big.matrix</dt><dd><p><code>signature(x = "big.matrix")</code>: return
<code>TRUE</code> if this is a sub-matrix of a <code>big.matrix</code>. </p>
</dd>
<dt>ncol</dt><dd><p><code>signature(x = "big.matrix")</code>: returns the number of
columns.  </p>
</dd>
<dt>nrow</dt><dd><p><code>signature(x = "big.matrix")</code>: returns the number of rows. </p>
</dd>
<dt>print</dt><dd><p><code>signature(x = "big.matrix")</code>: a traditional <code>print()</code>
is intentionally disabled, and returns <code>head(x)</code> unless
<code>options()$bm.print.warning==FALSE</code>; in this case, <code>print(x[,])</code>
is the result, which could be very big! </p>
</dd>
<dt>sub.big.matrix</dt><dd><p><code>signature(x = "big.matrix")</code>: for
contiguous submatrices. </p>
</dd>
<dt>tail</dt><dd><p><code>signature(x = "big.matrix")</code>: returns the last 6 (or
<code>n</code>) rows. </p>
</dd>
<dt>typeof</dt><dd><p><code>signature(x = "big.matrix")</code>: return the type of the
atomic elements of the <code>big.matrix</code>.</p>
</dd>
<dt>write.big.matrix</dt><dd><p><code>signature(bigMat = "big.matrix", 
fileName = "character")</code>: produce an ASCII file from the <code>big.matrix</code>.</p>
</dd>
<dt>apply</dt><dd><p><code>signature(x = "big.matrix")</code>: <code>apply()</code> where
<code>MARGIN</code> may only be 1 or 2, but otherwise conforming to what you
would expect from <code>apply()</code>.</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Michael J. Kane and John W. Emerson
<a href="mailto:bigmemoryauthors@gmail.com">bigmemoryauthors@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+big.matrix">big.matrix</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>showClass("big.matrix")
</code></pre>

<hr>
<h2 id='big.matrix.descriptor-class'>Class &quot;big.matrix.descriptor&quot;</h2><span id='topic+big.matrix.descriptor-class'></span><span id='topic+attach.resource+2Ccharacter-method'></span><span id='topic+attach.resource+2Cbig.matrix.descriptor-method'></span>

<h3>Description</h3>

<p>An object of this class contains necessary and sufficient information
to &ldquo;attach&rdquo; a shared or filebacked <code><a href="#topic+big.matrix">big.matrix</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'character'
attach.resource(obj, ...)

## S4 method for signature 'big.matrix.descriptor'
attach.resource(obj, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="big.matrix.descriptor-class_+3A_obj">obj</code></td>
<td>
<p>The filename of the descriptor for a filebacked matrix,
assumed to be in the directory specified</p>
</td></tr>
<tr><td><code id="big.matrix.descriptor-class_+3A_...">...</code></td>
<td>
<p>possibly <code>path</code> which gives the path where the descriptor
and/or filebacking can be found.</p>
</td></tr>
</table>


<h3>Objects from the Class</h3>

<p>Objects should not be created by calls of the form <code>new("big.matrix.descriptor", ...)</code>,
but should use the <code><a href="#topic+describe">describe</a></code> function.
</p>


<h3>Slots</h3>


<dl>
<dt><code>description</code>:</dt><dd><p>Object of class <code>"list"</code>; details omitted.</p>
</dd>
</dl>



<h3>Extends</h3>

<p>Class <code>"descriptor"</code>, directly.
</p>


<h3>Methods</h3>


<dl>
<dt>attach.resource</dt><dd><p><code>signature(obj = "big.matrix.descriptor")</code>: ... </p>
</dd>
<dt>sub.big.matrix</dt><dd><p><code>signature(x = "big.matrix.descriptor")</code>: ... </p>
</dd>
</dl>



<h3>Note</h3>

<p>We provide <code>attach.resource</code> for convenience, but expect most users
will prefer <code><a href="#topic+attach.big.matrix">attach.big.matrix</a></code>.
</p>


<h3>Author(s)</h3>

<p>John W. Emerson and Michael J. Kane
</p>


<h3>References</h3>

<p>Other types of descriptors are defined in package <span class="pkg">synchronicity</span>.
</p>


<h3>See Also</h3>

<p>See also <code><a href="#topic+attach.big.matrix">attach.big.matrix</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>showClass("big.matrix.descriptor")
</code></pre>

<hr>
<h2 id='bigmemory-package'>Manage massive matrices with shared memory and memory-mapped files.</h2><span id='topic+bigmemory-package'></span><span id='topic+bigmemory'></span>

<h3>Description</h3>

<p>Create, store, access, and manipulate massive matrices.  Matrices are, by
default, allocated to shared memory and may use memory-mapped files.
Packages <span class="pkg">biganalytics</span>, <span class="pkg">synchronicity</span>, <span class="pkg">bigalgebra</span>, and
<span class="pkg">bigtabulate</span> provide advanced functionality.  Access to and
manipulation of a <code><a href="#topic+big.matrix">big.matrix</a></code> object is exposed in an S4
class whose interface is similar to that of a <code><a href="base.html#topic+matrix">matrix</a></code>.  Use of
these packages in parallel environments can provide substantial speed and
memory efficiencies.  <span class="pkg">bigmemory</span> also provides a <abbr><span class="acronym">C++</span></abbr>
framework for the development of new tools that can work both with
<code>big.matrix</code> and native <code>matrix</code> objects.
</p>


<h3>Details</h3>

<p>Index of functions/methods (grouped in a friendly way): </p>
<pre>
big.matrix, filebacked.big.matrix, as.big.matrix

is.big.matrix, is.separated, is.filebacked

describe, attach.big.matrix, attach.resource

sub.big.matrix, is.sub.big.matrix

dim, dimnames, nrow, ncol, print, head, tail, typeof, length

read.big.matrix, write.big.matrix

mwhich

morder, mpermute

deepcopy

flush </pre>
<p>Multi-gigabyte data sets challenge and frustrate users, even on
well-equipped hardware. Use of <abbr><span class="acronym">C/C++</span></abbr> can provide efficiencies, but
is cumbersome for interactive data analysis and lacks the flexibility and
power of 's rich statistical programming environment.  The package
<span class="pkg">bigmemory</span> and associated packages <span class="pkg">biganalytics</span>,
<span class="pkg">synchronicity</span>, <span class="pkg">bigtabulate</span>, and <span class="pkg">bigalgebra</span> bridge
this gap, implementing massive matrices and supporting their manipulation
and exploration. The data
structures may be allocated to shared memory, allowing separate processes on
the same computer to share access to a single copy of the data set.  The
data structures may also be file-backed, allowing users to easily manage and
analyze data sets larger than available RAM and share them across nodes of a
cluster. These features of the Bigmemory Project open the door for powerful
and memory-efficient parallel analyses and data mining of massive data sets.
</p>
<p>This project (<span class="pkg">bigmemory</span> and its sister packages) is still actively
developed, although the design and current features can be viewed as
&quot;stable.&quot;  Please feel free to email us with any questions:
bigmemoryauthors@gmail.com.
</p>


<h3>Memory considerations</h3>

<p>For obvious reasons memory that the <code>big.matrix</code> uses is managed outside
the R memory pool available to the garbage collector and the memory occupied
by the <code>big.matrix</code> is not visible to the R.
This has subtle implications:
</p>

<ul>
<li><p> Memory usage is not visible via general R functions (e.g. the <code>gc()</code> function)
</p>
</li>
<li><p> Garbage collector is mislead by the very small memory footprint of the <code>big.matrix</code>
object (which acts merely as a pointer to the external memory structure), which can result
in much less eagerness to garbage-collect the unused <code>big.memory</code> objects.
After removing a last reference to a big <code>big.matrix</code>, user should manually run
<code>gc()</code> to reclaim the memory.
</p>
</li>
<li><p> Attaching the description of already finalized <code>big.matrix</code> and accessing this object
will result in undefined behavior, which simply means it will crash the current R session
with no hope of saving the data in it. To prevent R from de-allocating (finalizing) the
matrices, user should keep at least one <code>big.memory</code> object somewhere in R memory in at
least one R session on the current machine.
</p>
</li>
<li><p> Abruptly closed R (using e.g. task manager) will not have a chance to finalize the
<code>big.matrix</code> objects, which will result in a memory leak, as the <code>big.matrices</code>
will remain in the memory (perhaps under obfuscated names) with no easy way to reconnect R to them.
</p>
</li></ul>



<h3>Note</h3>

<p>Various options are available.
<code>options(bigmemory.typecast.warning)</code> can be set to avoid annoying
warnings that might occur if, for example, you assign objects (typically
type double) to char, short, or integer <code><a href="#topic+big.matrix">big.matrix</a></code> objects.
<code>options(bigmemory.print.warning)</code> protects against extracting and
printing a massive matrix (which would involve the creation of a second
massive copy of the matrix). <code>options(bigmemory.allow.dimnames)</code> by
default prevents the setting of <code>dimnames</code> attributes, because they
aren't allocated to shared memory and changes will not be visible across
processes. <code>options(bigmemory.default.type)</code> is <code>"double"</code> be
default (a change in default behavior as of 4.1.1) but may be changed by the
user.
</p>
<p>Note that you can't simply use a <code>big.matrix</code> with many (most) existing
functions (e.g. <code><a href="stats.html#topic+lm">lm</a></code>, <code><a href="stats.html#topic+kmeans">kmeans</a></code>).  One nice exception
is <code><a href="base.html#topic+split">split</a></code>, because this function only accesses subsets of the
matrix.
</p>


<h3>Author(s)</h3>

<p>Michael J. Kane, John W. Emerson, Peter Haverty, and Charles Determan Jr.
</p>
<p>Maintainers: Michael J. Kane bigmemoryauthors@gmail.com
</p>


<h3>See Also</h3>

<p>For example, <code><a href="#topic+big.matrix">big.matrix</a></code>, <code><a href="#topic+mwhich">mwhich</a></code>,
<code><a href="#topic+read.big.matrix">read.big.matrix</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Our examples are all trivial in size, rather than burning huge amounts
# of memory.

x &lt;- big.matrix(5, 2, type="integer", init=0,
                dimnames=list(NULL, c("alpha", "beta")))
x
x[1:2,]
x[,1] &lt;- 1:5
x[,"alpha"]
colnames(x)
options(bigmemory.allow.dimnames=TRUE)
colnames(x) &lt;- NULL
x[,]


</code></pre>

<hr>
<h2 id='deepcopy'>Produces a physical copy of a &ldquo;big.matrix&rdquo;</h2><span id='topic+deepcopy'></span>

<h3>Description</h3>

<p>This is needed to make a duplicate of a <code>big.matrix</code>, with the new copy
optionally filebacked.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deepcopy(
  x,
  cols = NULL,
  rows = NULL,
  y = NULL,
  type = NULL,
  separated = NULL,
  backingfile = NULL,
  backingpath = NULL,
  descriptorfile = NULL,
  binarydescriptor = FALSE,
  shared = options()$bigmemory.default.shared
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deepcopy_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+big.matrix">big.matrix</a></code>.</p>
</td></tr>
<tr><td><code id="deepcopy_+3A_cols">cols</code></td>
<td>
<p>possible subset of columns for the deepcopy; could be numeric,
named, or logical.</p>
</td></tr>
<tr><td><code id="deepcopy_+3A_rows">rows</code></td>
<td>
<p>possible subset of rows for the deepcopy; could be numeric,
named, or logical.</p>
</td></tr>
<tr><td><code id="deepcopy_+3A_y">y</code></td>
<td>
<p>optional destination object (<code>matrix</code> or <code>big.matrix</code>);
if not specified, a <code>big.matrix</code> will be created.</p>
</td></tr>
<tr><td><code id="deepcopy_+3A_type">type</code></td>
<td>
<p>preferably specified, <code>"integer"</code> for example.</p>
</td></tr>
<tr><td><code id="deepcopy_+3A_separated">separated</code></td>
<td>
<p>use separated column organization of the data instead of
column-major organization; use with caution if the number of columns is
large.</p>
</td></tr>
<tr><td><code id="deepcopy_+3A_backingfile">backingfile</code></td>
<td>
<p>the root name for the file(s) for the cache of <code>x</code>.</p>
</td></tr>
<tr><td><code id="deepcopy_+3A_backingpath">backingpath</code></td>
<td>
<p>the path to the directory containing the file-backing
cache.</p>
</td></tr>
<tr><td><code id="deepcopy_+3A_descriptorfile">descriptorfile</code></td>
<td>
<p>we recommend specifying this for file-backing.</p>
</td></tr>
<tr><td><code id="deepcopy_+3A_binarydescriptor">binarydescriptor</code></td>
<td>
<p>the flag to specify if the binary RDS format should
be used for the backingfile description, for subsequent use with
<code><a href="#topic+attach.big.matrix">attach.big.matrix</a></code>; if <code>NULL</code> of <code>FALSE</code>, the
<code>dput()</code> file format is used.</p>
</td></tr>
<tr><td><code id="deepcopy_+3A_shared">shared</code></td>
<td>
<p><code>TRUE</code> by default, and always <code>TRUE</code> if the
<code>big.matrix</code> is file-backed.  For a non-filebacked <code>big.matrix</code>,
<code>shared=FALSE</code> uses non-shared memory, which can be more stable for
large (say, &gt;50\
fail in such cases due to exhausted shared-memory resources in the system.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is needed to make a duplicate of a <code><a href="#topic+big.matrix">big.matrix</a></code>, because
traditional syntax would only copy the object (the pointer to the
<code><a href="#topic+big.matrix">big.matrix</a></code> rather than the <code><a href="#topic+big.matrix">big.matrix</a></code> itself).
It can also make a copy of only a subset of columns.
</p>


<h3>Value</h3>

<p>a <code><a href="#topic+big.matrix">big.matrix</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+big.matrix">big.matrix</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.big.matrix(matrix(1:30, 10, 3))
y &lt;- deepcopy(x, -1)    # Don't include the first column.
x
y
head(x)
head(y)
</code></pre>

<hr>
<h2 id='describe+2Cbig.matrix-method'>The basic &ldquo;big.matrix&rdquo; operations for sharing and re-attaching.</h2><span id='topic+describe+2Cbig.matrix-method'></span><span id='topic+attach.big.matrix'></span><span id='topic+describe'></span><span id='topic+attach.resource'></span>

<h3>Description</h3>

<p>The <code>describe</code> function returns the information needed by
<code>attach.big.matrix</code> to reference a shared or file-backed
<code>big.matrix</code> object.
The <code>attach.big.matrix</code> and <code>attach.resource</code> functions create a
new <code>big.matrix</code> object based on the descriptor information referencing
previously allocated shared-memory or file-backed matrices.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'big.matrix'
describe(x)

attach.big.matrix(obj, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="describe+2B2Cbig.matrix-method_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+big.matrix">big.matrix</a></code> object</p>
</td></tr>
<tr><td><code id="describe+2B2Cbig.matrix-method_+3A_obj">obj</code></td>
<td>
<p>an object as returned by <code>describe()</code> or, optionally,
the filename of the descriptor for a filebacked matrix, assumed to be in
the directory specified by the <code>path</code> (if one is provided)</p>
</td></tr>
<tr><td><code id="describe+2B2Cbig.matrix-method_+3A_...">...</code></td>
<td>
<p>possibly <code>path</code> which gives the path where the descriptor
and/or filebacking can be found</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>describe</code> function returns a list of the information needed to
attach to a <code>big.matrix</code> object.
A descriptor file is automatically created when a new filebacked
<code>big.matrix</code> is created.
</p>


<h3>Value</h3>

<p><code>describe</code> returns a list of of the information needed to attach to
a <code>big.matrix</code> object.
</p>
<p><code>attach.big.matrix</code> return a new instance of type <code>big.matrix</code>
corresponding to a shared-memory or file-backed <code>big.matrix</code>.
</p>


<h3>Author(s)</h3>

<p>Michael J. Kane and John W. Emerson
<a href="mailto:bigmemoryauthors@gmail.com">bigmemoryauthors@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bigmemory">bigmemory</a></code>, <code><a href="#topic+big.matrix">big.matrix</a></code>, or the class
documentation <code><a href="#topic+big.matrix-class">big.matrix</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># The example is quite silly, as you wouldn't likely do this in a
# single R session.  But if zdescription were passed to another R session
# via SNOW, foreach, or even by a simple file read/write,
# then the attach of the second R process would give access to the
# same object in memory.  Please see the package vignette for real examples.

z &lt;- big.matrix(3, 3, type='integer', init=3)
z[,]
dim(z)
z[1,1] &lt;- 2
z[,]
zdescription &lt;- describe(z)
zdescription
y &lt;- attach.big.matrix(zdescription)
y[,]
y
z
zz &lt;- attach.resource(zdescription)
zz[1,1] &lt;- -100
y[,]
z[,]
</code></pre>

<hr>
<h2 id='dim+2Cbig.matrix-method'>Dimensions of a big.matrix object</h2><span id='topic+dim+2Cbig.matrix-method'></span>

<h3>Description</h3>

<p>Retrieve the dimensions of a <code>big.matrix</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'big.matrix'
dim(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dim+2B2Cbig.matrix-method_+3A_x">x</code></td>
<td>
<p>A <code>big.matrix</code> object</p>
</td></tr>
</table>

<hr>
<h2 id='dimnames+2Cbig.matrix-method'>Dimnames of a big.matrix Object</h2><span id='topic+dimnames+2Cbig.matrix-method'></span><span id='topic+dimnames+3C-+2Cbig.matrix+2Clist-method'></span>

<h3>Description</h3>

<p>Retrieve or set the dimnames of an object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'big.matrix'
dimnames(x)

## S4 replacement method for signature 'big.matrix,list'
dimnames(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dimnames+2B2Cbig.matrix-method_+3A_x">x</code></td>
<td>
<p>A big.matrix object</p>
</td></tr>
<tr><td><code id="dimnames+2B2Cbig.matrix-method_+3A_value">value</code></td>
<td>
<p>A possible value for <code>dimnames(x)</code></p>
</td></tr>
</table>

<hr>
<h2 id='Extract+2Cbig.matrix'>Extract or Replace</h2><span id='topic+Extract+2Cbig.matrix'></span><span id='topic++5B+2Cbig.matrix+2CANY+2CANY+2Cmissing-method'></span><span id='topic++5B+3C-+2Cbig.matrix+2CANY+2CANY+2CANY-method'></span><span id='topic++5B+2Cbig.matrix+2CANY+2CANY+2Clogical-method'></span><span id='topic++5B+2Cbig.matrix+2Cmissing+2CANY+2Cmissing-method'></span><span id='topic++5B+2Cbig.matrix+2Cmissing+2CANY+2Clogical-method'></span><span id='topic++5B+2Cbig.matrix+2CANY+2Cmissing+2Cmissing-method'></span><span id='topic++5B+2Cbig.matrix+2CANY+2Cmissing+2Clogical-method'></span><span id='topic++5B+2Cbig.matrix+2Cmissing+2Cmissing+2Cmissing-method'></span><span id='topic++5B+2Cbig.matrix+2Cmissing+2Cmissing+2Clogical-method'></span><span id='topic++5B+2Cbig.matrix+2Cmatrix+2Cmissing+2Cmissing-method'></span><span id='topic++5B+3C-+2Cbig.matrix+2Cnumeric+2Cnumeric+2CANY-method'></span><span id='topic++5B+3C-+2Cbig.matrix+2Cnumeric+2Clogical+2CANY-method'></span><span id='topic++5B+3C-+2Cbig.matrix+2Clogical+2Cnumeric+2CANY-method'></span><span id='topic++5B+3C-+2Cbig.matrix+2Clogical+2Clogical+2CANY-method'></span><span id='topic++5B+3C-+2Cbig.matrix+2Clogical+2Ccharacter+2CANY-method'></span><span id='topic++5B+3C-+2Cbig.matrix+2Cnumeric+2Ccharacter+2CANY-method'></span><span id='topic++5B+3C-+2Cbig.matrix+2Cmissing+2Cmissing+2CANY-method'></span><span id='topic++5B+3C-+2Cbig.matrix+2Cmissing+2Cnumeric+2CANY-method'></span><span id='topic++5B+3C-+2Cbig.matrix+2Cmissing+2Clogical+2CANY-method'></span><span id='topic++5B+3C-+2Cbig.matrix+2Cnumeric+2Cmissing+2Cnumeric-method'></span><span id='topic++5B+3C-+2Cbig.matrix+2Clogical+2Cmissing+2Cnumeric-method'></span><span id='topic++5B+3C-+2Cbig.matrix+2Cnumeric+2Cmissing+2Cmatrix-method'></span><span id='topic++5B+3C-+2Cbig.matrix+2Clogical+2Cmissing+2Cmatrix-method'></span><span id='topic++5B+3C-+2Cbig.matrix+2Ccharacter+2Ccharacter+2CANY-method'></span><span id='topic++5B+3C-+2Cbig.matrix+2Cmissing+2Ccharacter+2CANY-method'></span><span id='topic++5B+3C-+2Cbig.matrix+2Ccharacter+2Cmissing+2CANY-method'></span><span id='topic++5B+3C-+2Cbig.matrix+2Cmissing+2Cmissing+2Cnumeric-method'></span><span id='topic++5B+3C-+2Cbig.matrix+2Cmatrix+2Cmissing+2Cnumeric-method'></span>

<h3>Description</h3>

<p>Extract or replace big.matrix elements
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'big.matrix,ANY,ANY,missing'
x[i, j, drop]

## S4 method for signature 'big.matrix,ANY,ANY,logical'
x[i, j, drop]

## S4 method for signature 'big.matrix,missing,ANY,missing'
x[i, j, drop]

## S4 method for signature 'big.matrix,missing,ANY,logical'
x[i, j, drop]

## S4 method for signature 'big.matrix,ANY,missing,missing'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'big.matrix,ANY,missing,logical'
x[i, j, drop]

## S4 method for signature 'big.matrix,missing,missing,missing'
x[i, j, drop]

## S4 method for signature 'big.matrix,missing,missing,logical'
x[i, j, drop]

## S4 method for signature 'big.matrix,matrix,missing,missing'
x[i, j, drop]

## S4 replacement method for signature 'big.matrix,numeric,numeric,ANY'
x[i, j] &lt;- value

## S4 replacement method for signature 'big.matrix,numeric,logical,ANY'
x[i, j] &lt;- value

## S4 replacement method for signature 'big.matrix,logical,numeric,ANY'
x[i, j] &lt;- value

## S4 replacement method for signature 'big.matrix,logical,logical,ANY'
x[i, j] &lt;- value

## S4 replacement method for signature 'big.matrix,logical,character,ANY'
x[i, j] &lt;- value

## S4 replacement method for signature 'big.matrix,numeric,character,ANY'
x[i, j] &lt;- value

## S4 replacement method for signature 'big.matrix,missing,missing,ANY'
x[i, j] &lt;- value

## S4 replacement method for signature 'big.matrix,missing,numeric,ANY'
x[i, j] &lt;- value

## S4 replacement method for signature 'big.matrix,missing,logical,ANY'
x[i, j] &lt;- value

## S4 replacement method for signature 'big.matrix,numeric,missing,numeric'
x[i, j, ...] &lt;- value

## S4 replacement method for signature 'big.matrix,logical,missing,numeric'
x[i, j, ...] &lt;- value

## S4 replacement method for signature 'big.matrix,numeric,missing,matrix'
x[i, j, ...] &lt;- value

## S4 replacement method for signature 'big.matrix,logical,missing,matrix'
x[i, j, ...] &lt;- value

## S4 replacement method for signature 'big.matrix,character,character,ANY'
x[i, j] &lt;- value

## S4 replacement method for signature 'big.matrix,missing,character,ANY'
x[j] &lt;- value

## S4 replacement method for signature 'big.matrix,character,missing,ANY'
x[i] &lt;- value

## S4 replacement method for signature 'big.matrix,missing,missing,numeric'
x[i, j] &lt;- value

## S4 replacement method for signature 'big.matrix,matrix,missing,numeric'
x[i, j] &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Extract+2B2Cbig.matrix_+3A_x">x</code></td>
<td>
<p>A <code>big.matrix object</code></p>
</td></tr>
<tr><td><code id="Extract+2B2Cbig.matrix_+3A_i">i</code></td>
<td>
<p>Indices specifying the rows</p>
</td></tr>
<tr><td><code id="Extract+2B2Cbig.matrix_+3A_j">j</code></td>
<td>
<p>Indices specifying the columns</p>
</td></tr>
<tr><td><code id="Extract+2B2Cbig.matrix_+3A_drop">drop</code></td>
<td>
<p>Logical indication if reduce to minimum dimensions</p>
</td></tr>
<tr><td><code id="Extract+2B2Cbig.matrix_+3A_...">...</code></td>
<td>
<p>Additional arguments</p>
</td></tr>
<tr><td><code id="Extract+2B2Cbig.matrix_+3A_value">value</code></td>
<td>
<p>typically an array-like R object of similar class</p>
</td></tr>
</table>

<hr>
<h2 id='flush'>Updating a big.matrix filebacking.</h2><span id='topic+flush'></span><span id='topic+flush+2Cbig.matrix-method'></span>

<h3>Description</h3>

<p>For a file-backed <code>big.matrix</code> object, <code>flush()</code> forces
any modified information to be written to the file-backing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flush(con)

## S4 method for signature 'big.matrix'
flush(con)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flush_+3A_con">con</code></td>
<td>
<p>filebacked <code><a href="#topic+big.matrix">big.matrix</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function flushes any modified data (in <abbr><span class="acronym">RAM</span></abbr>) of a file-backed
<code>big.matrix</code> to disk.  This may be useful for
improving performance in cases where allowing the operating system to decide
on flushing creates a bottleneck (likely near the threshold of available <abbr><span class="acronym">RAM</span></abbr>).
</p>


<h3>Value</h3>

<p><code>TRUE</code> or <code>FALSE</code> (invisible), indicating whether or not the flush was successful.
</p>


<h3>Author(s)</h3>

<p>John W. Emerson and Michael J. Kane
</p>


<h3>Examples</h3>

<pre><code class='language-R'>temp_dir = tempdir()
if (!dir.exists(temp_dir)) dir.create(temp_dir)
x &lt;- big.matrix(nrow=3, ncol=3, backingfile='flushtest.bin',
                descriptorfile='flushtest.desc', backingpath=temp_dir,
                type='integer')
x[1,1] &lt;- 0
flush(x)
</code></pre>

<hr>
<h2 id='GetMatrixSize'>big.matrix size</h2><span id='topic+GetMatrixSize'></span>

<h3>Description</h3>

<p>Returns the size of the created matrix in bytes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GetMatrixSize(bigMat)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="GetMatrixSize_+3A_bigmat">bigMat</code></td>
<td>
<p>a <code>big.matrix</code> object</p>
</td></tr>
</table>

<hr>
<h2 id='head+2Cbig.matrix-method'>Return First or Last Part of a big.matrix Object</h2><span id='topic+head+2Cbig.matrix-method'></span><span id='topic+tail+2Cbig.matrix-method'></span>

<h3>Description</h3>

<p>Returns the first or last parts of a <code>big.matrix</code>
object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'big.matrix'
head(x, n = 6)

## S4 method for signature 'big.matrix'
tail(x, n = 6)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="head+2B2Cbig.matrix-method_+3A_x">x</code></td>
<td>
<p>A big.matrix object</p>
</td></tr>
<tr><td><code id="head+2B2Cbig.matrix-method_+3A_n">n</code></td>
<td>
<p>A single integer for the number of rows to return</p>
</td></tr>
</table>

<hr>
<h2 id='is.float'>Check if Float</h2><span id='topic+is.float'></span>

<h3>Description</h3>

<p>Check to see if the elements of a big.matrix object are floats.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.float(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.float_+3A_x">x</code></td>
<td>
<p>An object to be evaluated if float</p>
</td></tr>
</table>

<hr>
<h2 id='is.float+2Cnumeric-method'>Is Float?</h2><span id='topic+is.float+2Cnumeric-method'></span>

<h3>Description</h3>

<p>Check if R numeric value has float flag
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'numeric'
is.float(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.float+2B2Cnumeric-method_+3A_x">x</code></td>
<td>
<p>A numeric value</p>
</td></tr>
</table>

<hr>
<h2 id='is.sub.big.matrix'>Submatrix support</h2><span id='topic+is.sub.big.matrix'></span><span id='topic+is.sub.big.matrix+2Cbig.matrix-method'></span><span id='topic+sub.big.matrix'></span><span id='topic+sub.big.matrix+2Cbig.matrix-method'></span><span id='topic+sub.big.matrix+2Cbig.matrix.descriptor-method'></span>

<h3>Description</h3>

<p>This doesn't create a copy, it just provides a new version of the class
which provides behavior for a contiguous submatrix of the big.matrix.
Non-contiguous submatrices are not supported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.sub.big.matrix(x)

## S4 method for signature 'big.matrix'
is.sub.big.matrix(x)

sub.big.matrix(
  x,
  firstRow = 1,
  lastRow = NULL,
  firstCol = 1,
  lastCol = NULL,
  backingpath = NULL
)

## S4 method for signature 'big.matrix'
sub.big.matrix(
  x,
  firstRow = 1,
  lastRow = NULL,
  firstCol = 1,
  lastCol = NULL,
  backingpath = NULL
)

## S4 method for signature 'big.matrix.descriptor'
sub.big.matrix(
  x,
  firstRow = 1,
  lastRow = NULL,
  firstCol = 1,
  lastCol = NULL,
  backingpath = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.sub.big.matrix_+3A_x">x</code></td>
<td>
<p>A descriptor object</p>
</td></tr>
<tr><td><code id="is.sub.big.matrix_+3A_firstrow">firstRow</code></td>
<td>
<p>the first row of the submatrix</p>
</td></tr>
<tr><td><code id="is.sub.big.matrix_+3A_lastrow">lastRow</code></td>
<td>
<p>the last row of the submatrix if not NULL</p>
</td></tr>
<tr><td><code id="is.sub.big.matrix_+3A_firstcol">firstCol</code></td>
<td>
<p>the first column of the submatrix</p>
</td></tr>
<tr><td><code id="is.sub.big.matrix_+3A_lastcol">lastCol</code></td>
<td>
<p>of the submatrix if not NULL</p>
</td></tr>
<tr><td><code id="is.sub.big.matrix_+3A_backingpath">backingpath</code></td>
<td>
<p>required path to the filebacked object, if applicable</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>sub.big.matrix</code> function allows a user to create a <code>big.matrix</code>
object that references a contiguous set of columns and rows of another
<code>big.matrix</code> object.
</p>
<p>The <code>is.sub.big.matrix</code> function returns <code>TRUE</code> if the specified
argument is a <code>sub.big.matrix</code> object and return <code>FALSE</code>
otherwise.
</p>


<h3>Value</h3>

<p>A <code><a href="#topic+big.matrix">big.matrix</a></code> which is actually a submatrix of a larger <code>big.matrix</code>.
It is not a physical copy.  Only contiguous blocks may form a submatrix.
</p>


<h3>Author(s)</h3>

<p>John W. Emerson and Michael J. Kane
</p>


<h3>See Also</h3>

<p><code><a href="#topic+big.matrix">big.matrix</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- big.matrix(10, 5, init=0, type="double")
x[,] &lt;- 1:50
y &lt;- sub.big.matrix(x, 2, 9, 2, 3)
y[,]
y[1,1] &lt;- -99
x[,]
rm(x)
</code></pre>

<hr>
<h2 id='length+2Cbig.matrix-method'>Length of a big.matrix object</h2><span id='topic+length+2Cbig.matrix-method'></span>

<h3>Description</h3>

<p>Get the length of a <code>big.matrix</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'big.matrix'
length(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="length+2B2Cbig.matrix-method_+3A_x">x</code></td>
<td>
<p>A <code>big.matrix</code> object</p>
</td></tr>
</table>

<hr>
<h2 id='morder'>Ordering and Permuting functions for <code style="white-space: pre;">&#8288;big.matrix'' and  &#8288;</code>matrix&rdquo; objects</h2><span id='topic+morder'></span><span id='topic+morderCols'></span><span id='topic+mpermute'></span><span id='topic+mpermuteCols'></span>

<h3>Description</h3>

<p>The <code>morder</code> function returns a permutation of row
indices which can be used to rearrange an object according to the values
in the specified columns (a multi-column ordering).
The <code>mpermute</code> function actually reorders the rows of a
<code>big.matrix</code> or <code>matrix</code> based on
an order vector or a desired ordering on a set of columns.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>morder(x, cols, na.last = TRUE, decreasing = FALSE)

morderCols(x, rows, na.last = TRUE, decreasing = FALSE)

mpermute(x, order = NULL, cols = NULL, allow.duplicates = FALSE, ...)

mpermuteCols(x, order = NULL, rows = NULL, allow.duplicates = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="morder_+3A_x">x</code></td>
<td>
<p>A <code>big.matrix</code> or <code>matrix</code> object with numeric values.</p>
</td></tr>
<tr><td><code id="morder_+3A_cols">cols</code></td>
<td>
<p>The columns of <code>x</code> to get the ordering for or reorder on</p>
</td></tr>
<tr><td><code id="morder_+3A_na.last">na.last</code></td>
<td>
<p>for controlling the treatment of <code>NA</code>s. If
<code>TRUE</code>, missing values in the data are put last; if <code>FALSE</code>,
they are put first; if <code>NA</code>, they are removed.</p>
</td></tr>
<tr><td><code id="morder_+3A_decreasing">decreasing</code></td>
<td>
<p>logical. Should the sort order be increasing or
decreasing?</p>
</td></tr>
<tr><td><code id="morder_+3A_rows">rows</code></td>
<td>
<p>The rows of <code>x</code> to get the ordering for or reorder on</p>
</td></tr>
<tr><td><code id="morder_+3A_order">order</code></td>
<td>
<p>A vector specifying the reordering of rows, i.e. the
result of a call to <code>order</code> or <code>morder</code>.</p>
</td></tr>
<tr><td><code id="morder_+3A_allow.duplicates">allow.duplicates</code></td>
<td>
<p>ff <code>TRUE</code>, allows a row to be duplicated in
the resulting <code>big.matrix</code> or <code>matrix</code> (i.e. in this case,
<code>order</code> would not need to be a permutation of <code>1:nrow(x)</code>).</p>
</td></tr>
<tr><td><code id="morder_+3A_...">...</code></td>
<td>
<p>optional parameters to pass to <code>morder</code> when <code>cols</code>
is specified instead of just using <code>order</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>morder</code> function behaves similar to <code>order</code>,
returning a permutation of <code>1:nrow(x)</code> which rearranges objects
according to the values in the specified columns. However, <code>morder</code>
takes a <code>big.matrix</code> or an <span class="rlang"><b>R</b></span> <code>matrix</code> (with numeric type) and
a set of columns (<code>cols</code>) with which to determine the ordering;
<code>morder</code> does not incur the same memory overhead required by
<code>order</code>, and runs more quickly.
</p>
<p>The <code>mpermute</code> function changes the row ordering of a <code>big.matrix</code>
or <code>matrix</code> based on a vector <code>order</code> or an ordering based
on a set of columns specified by <code>cols</code>.  It should be noted that
this function has side-effects, that is <code>x</code> is changed when this
function is called.
</p>


<h3>Value</h3>

<p><code>morder</code> returns an ordering vector.
<code>mpermute</code> returns nothing but does change the contents of <code>x</code>.
This type of a side-effect is generally frowned upon in <span class="rlang"><b>R</b></span>, but we &ldquo;break&rdquo;
the rules here to avoid memory overhead and improve performance.
</p>


<h3>Author(s)</h3>

<p>Michael J. Kane <a href="mailto:bigmemoryauthors@gmail.com">bigmemoryauthors@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+order">order</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>m = matrix(as.double(as.matrix(iris)), nrow=nrow(iris))
morder(m, 1)
order(m[,1])

m[order(m[,1]), 2]
mpermute(m, cols=1)
m[,2]
</code></pre>

<hr>
<h2 id='mwhich'>Expanded &ldquo;which&rdquo;-like functionality.</h2><span id='topic+mwhich'></span>

<h3>Description</h3>

<p>Implements <code><a href="base.html#topic+which">which</a></code>-like functionality for a <code><a href="#topic+big.matrix">big.matrix</a></code>,
with additional options for efficient comparisons (executed in <abbr><span class="acronym">C++</span></abbr>);
also works for regular numeric matrices without the memory overhead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mwhich(x, cols, vals, comps, op = "AND")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mwhich_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+big.matrix">big.matrix</a></code> (or a numeric matrix; see below).</p>
</td></tr>
<tr><td><code id="mwhich_+3A_cols">cols</code></td>
<td>
<p>a vector of column indices or names.</p>
</td></tr>
<tr><td><code id="mwhich_+3A_vals">vals</code></td>
<td>
<p>a list (one component for each of <code>cols</code>) of vectors of
length 1 or 2; length 1 is used to test equality (or inequality), while
vectors of length 2 are used for checking values in the range (<code>-Inf</code>
and <code>Inf</code> are allowed). If a scalar or vector of length 2 is provided
instead of a list, it will be replicated <code>length(cols)</code> times.</p>
</td></tr>
<tr><td><code id="mwhich_+3A_comps">comps</code></td>
<td>
<p>a list of operators (one component for each of <code>cols</code>),
including <code>'eq'</code>, <code>'neq'</code>, <code>'le'</code>, <code>'lt'</code>, <code>'ge'</code>
and <code>'gt'</code>.  If a single operator, it will be replicated
<code>length(cols)</code> times.</p>
</td></tr>
<tr><td><code id="mwhich_+3A_op">op</code></td>
<td>
<p>the comparison operator for combining the results of the
individual tests, either <code>'AND'</code> or <code>'OR'</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To improve performance and avoid the creation of massive temporary vectors
in <span class="rlang"><b>R</b></span> when doing comparisons, <code>mwhich()</code> efficiently executes
column-by-column comparisons of values to the specified values or ranges,
and then returns the row indices satisfying the comparison specified by the
<code>op</code> operator.  More advanced comparisons are then possible
(and memory-efficient) in <span class="rlang"><b>R</b></span> by doing set operations (<code><a href="base.html#topic+union">union</a></code>
and <code><a href="base.html#topic+intersect">intersect</a></code>, for example) on the results of multiple
<code>mwhich()</code> calls.
</p>
<p>Note that <code>NA</code> is a valid argument in conjunction with <code>'eq'</code> or
<code>'neq'</code>, replacing traditional <code>is.na()</code> calls.
And both <code>-Inf</code> and <code>Inf</code> can be used for one-sided inequalities.
</p>
<p>If <code>mwhich()</code> is used with a regular numeric <span class="rlang"><b>R</b></span> <code>matrix</code>, we
access the data directly and thus incur no memory overhead.  Interested
developers might want to look at our code for this case, which uses a handy
pointer trick (accessor) in <abbr><span class="acronym">C++</span></abbr>.
</p>


<h3>Value</h3>

<p>a vector of row indices satisfying the criteria.
</p>


<h3>Author(s)</h3>

<p>John W. Emerson <a href="mailto:bigmemoryauthors@gmail.com">bigmemoryauthors@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+big.matrix">big.matrix</a></code>, <code><a href="base.html#topic+which">which</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.big.matrix(matrix(1:30, 10, 3))
options(bigmemory.allow.dimnames=TRUE)
colnames(x) &lt;- c("A", "B", "C")
x[,]
x[mwhich(x, 1:2, list(c(2,3), c(11,17)),
         list(c('ge','le'), c('gt', 'lt')), 'OR'),]

x[mwhich(x, c("A","B"), list(c(2,3), c(11,17)), 
         list(c('ge','le'), c('gt', 'lt')), 'AND'),]

# These should produce the same answer with a regular matrix:
y &lt;- matrix(1:30, 10, 3)
y[mwhich(y, 1:2, list(c(2,3), c(11,17)),
         list(c('ge','le'), c('gt', 'lt')), 'OR'),]

y[mwhich(y, -3, list(c(2,3), c(11,17)),
         list(c('ge','le'), c('gt', 'lt')), 'AND'),]


x[1,1] &lt;- NA
mwhich(x, 1:2, NA, 'eq', 'OR')
mwhich(x, 1:2, NA, 'neq', 'AND')

# Column 1 equal to 4 and/or column 2 less than or equal to 16:
mwhich(x, 1:2, list(4, 16), list('eq', 'le'), 'OR')
mwhich(x, 1:2, list(4, 16), list('eq', 'le'), 'AND')

# Column 2 less than or equal to 15:
mwhich(x, 2, 15, 'le')

# No NAs in either column, and column 2 strictly less than 15:
mwhich(x, c(1:2,2), list(NA, NA, 15), list('neq', 'neq', 'lt'), 'AND')

x &lt;- big.matrix(4, 2, init=1, type="double")
x[1,1] &lt;- Inf
mwhich(x, 1, Inf, 'eq')
mwhich(x, 1, 1, 'gt')
mwhich(x, 1, 1, 'le')
</code></pre>

<hr>
<h2 id='mwhich-methods'>Expanded &ldquo;which&rdquo;-like functionality.</h2><span id='topic+mwhich-methods'></span><span id='topic+mwhich+2Cbig.matrix+2CANY+2CANY+2CANY+2Ccharacter-method'></span><span id='topic+mwhich+2Cbig.matrix+2CANY+2CANY+2CANY+2Cmissing-method'></span><span id='topic+mwhich+2Cmatrix+2CANY+2CANY+2CANY+2Ccharacter-method'></span><span id='topic+mwhich+2Cmatrix+2CANY+2CANY+2CANY+2Cmissing-method'></span>

<h3>Description</h3>

<p>Implements <code><a href="base.html#topic+which">which</a></code>-like functionality for a
<code><a href="#topic+big.matrix">big.matrix</a></code>, with additional options for efficient comparisons
(executed in <abbr><span class="acronym">C++</span></abbr>); also works for regular numeric matrices without
the memory overhead.
test
</p>


<h3>Methods</h3>


<dl>
<dt>signature(x = &quot;big.matrix=&quot;, cols
= &quot;ANY&quot;, vals = &quot;ANY&quot;,&quot;, &quot; comps = &quot;ANY&quot;, op = &quot;character&quot;)</dt><dd>
<p>... </p>
</dd>
<dt>signature(x = &quot;big.matrix&quot;, cols = &quot;ANY&quot;, vals =
&quot;ANY&quot;,&quot;, &quot; comps = &quot;ANY&quot;, op = &quot;missing&quot;)</dt><dd><p> ... </p>
</dd>
<dt>signature(x = &quot;matrix&quot;, cols = &quot;ANY&quot;, vals = &quot;ANY&quot;,&quot;, &quot;
comps = &quot;ANY&quot;, op = &quot;character&quot;)</dt><dd><p> ... </p>
</dd>
<dt>signature(x = &quot;matrix&quot;, cols = &quot;ANY&quot;, vals = &quot;ANY&quot;,&quot;,
&quot; comps = &quot;ANY&quot;, op = &quot;missing&quot;)</dt><dd><p> ... </p>
</dd> </dl>



<h3>See Also</h3>

<p><code><a href="#topic+big.matrix">big.matrix</a></code>, <code><a href="base.html#topic+which">which</a></code>, <code><a href="#topic+mwhich">mwhich</a></code>
</p>

<hr>
<h2 id='ncol+2Cbig.matrix-method'>The Number of Rows/Columns of a big.matrix</h2><span id='topic+ncol+2Cbig.matrix-method'></span><span id='topic+nrow+2Cbig.matrix-method'></span>

<h3>Description</h3>

<p><code>nrow</code> and <code>ncol</code> return the number of
rows or columns present in a <code>big.matrix</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'big.matrix'
ncol(x)

## S4 method for signature 'big.matrix'
nrow(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ncol+2B2Cbig.matrix-method_+3A_x">x</code></td>
<td>
<p>A big.matrix object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer of length 1
</p>

<hr>
<h2 id='print+2Cbig.matrix-method'>Print Values</h2><span id='topic+print+2Cbig.matrix-method'></span>

<h3>Description</h3>

<p><code>print</code> will print out the elements within
a <code>big.matrix</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'big.matrix'
print(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print+2B2Cbig.matrix-method_+3A_x">x</code></td>
<td>
<p>A <code>big.matrix</code> object</p>
</td></tr>
</table>


<h3>Note</h3>

<p>By default, this will only return the <code>head</code> of a big.matrix
to prevent console overflow.  If you turn off the bigmemory.print.warning
option then it will convert to a base R matrix and print all elements.
</p>

<hr>
<h2 id='typeof+2Cbig.matrix-method'>The Type of a big.matrix Object</h2><span id='topic+typeof+2Cbig.matrix-method'></span>

<h3>Description</h3>

<p><code>typeof</code> returns the storage type of a
<code>big.matrix</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'big.matrix'
typeof(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="typeof+2B2Cbig.matrix-method_+3A_x">x</code></td>
<td>
<p>A <code>big.matrix</code> object</p>
</td></tr>
</table>

<hr>
<h2 id='write.big.matrix'>File interface for a &ldquo;big.matrix&rdquo;</h2><span id='topic+write.big.matrix'></span><span id='topic+write.big.matrix+2Cbig.matrix+2Ccharacter-method'></span><span id='topic+read.big.matrix'></span><span id='topic+read.big.matrix+2Ccharacter-method'></span>

<h3>Description</h3>

<p>Create a <code><a href="#topic+big.matrix">big.matrix</a></code> by reading from a
suitably-formatted ASCII file, or
write the contents of a <code><a href="#topic+big.matrix">big.matrix</a></code> to a file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write.big.matrix(x, filename, row.names = FALSE, col.names = FALSE, sep = ",")

## S4 method for signature 'big.matrix,character'
write.big.matrix(x, filename, row.names = FALSE, col.names = FALSE, sep = ",")

read.big.matrix(
  filename,
  sep = ",",
  header = FALSE,
  col.names = NULL,
  row.names = NULL,
  has.row.names = FALSE,
  ignore.row.names = FALSE,
  type = NA,
  skip = 0,
  separated = FALSE,
  backingfile = NULL,
  backingpath = NULL,
  descriptorfile = NULL,
  binarydescriptor = FALSE,
  extraCols = NULL,
  shared = options()$bigmemory.default.shared
)

## S4 method for signature 'character'
read.big.matrix(
  filename,
  sep = ",",
  header = FALSE,
  col.names = NULL,
  row.names = NULL,
  has.row.names = FALSE,
  ignore.row.names = FALSE,
  type = NA,
  skip = 0,
  separated = FALSE,
  backingfile = NULL,
  backingpath = NULL,
  descriptorfile = NULL,
  binarydescriptor = FALSE,
  extraCols = NULL,
  shared = options()$bigmemory.default.shared
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write.big.matrix_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+big.matrix">big.matrix</a></code>.</p>
</td></tr>
<tr><td><code id="write.big.matrix_+3A_filename">filename</code></td>
<td>
<p>the name of an input/output file.</p>
</td></tr>
<tr><td><code id="write.big.matrix_+3A_row.names">row.names</code></td>
<td>
<p>a vector of names, use them even if row names appear to
exist in the file.</p>
</td></tr>
<tr><td><code id="write.big.matrix_+3A_col.names">col.names</code></td>
<td>
<p>a vector of names, use them even if column names exist
in the file.</p>
</td></tr>
<tr><td><code id="write.big.matrix_+3A_sep">sep</code></td>
<td>
<p>a field delimiter.</p>
</td></tr>
<tr><td><code id="write.big.matrix_+3A_header">header</code></td>
<td>
<p>if <code>TRUE</code>, the first line (after a possible skip)
should contain column names.</p>
</td></tr>
<tr><td><code id="write.big.matrix_+3A_has.row.names">has.row.names</code></td>
<td>
<p>if <code>TRUE</code>, then the first column contains row
names.</p>
</td></tr>
<tr><td><code id="write.big.matrix_+3A_ignore.row.names">ignore.row.names</code></td>
<td>
<p>if <code>TRUE</code> when <code>has.row.names==TRUE</code>,
the row names will be ignored.</p>
</td></tr>
<tr><td><code id="write.big.matrix_+3A_type">type</code></td>
<td>
<p>preferably specified, <code>"integer"</code> for example.</p>
</td></tr>
<tr><td><code id="write.big.matrix_+3A_skip">skip</code></td>
<td>
<p>number of lines to skip at the head of the file.</p>
</td></tr>
<tr><td><code id="write.big.matrix_+3A_separated">separated</code></td>
<td>
<p>use separated column organization of the data instead of
column-major organization.</p>
</td></tr>
<tr><td><code id="write.big.matrix_+3A_backingfile">backingfile</code></td>
<td>
<p>the root name for the file(s) for the cache of <code>x</code>.</p>
</td></tr>
<tr><td><code id="write.big.matrix_+3A_backingpath">backingpath</code></td>
<td>
<p>the path to the directory containing the file backing
cache.</p>
</td></tr>
<tr><td><code id="write.big.matrix_+3A_descriptorfile">descriptorfile</code></td>
<td>
<p>the file to be used for the description of the
filebacked matrix.</p>
</td></tr>
<tr><td><code id="write.big.matrix_+3A_binarydescriptor">binarydescriptor</code></td>
<td>
<p>the flag to specify if the binary RDS format should
be used for the backingfile description, for subsequent use with
<code><a href="#topic+attach.big.matrix">attach.big.matrix</a></code>; if <code>NULL</code> of <code>FALSE</code>, the
<code>dput()</code> file format is used.</p>
</td></tr>
<tr><td><code id="write.big.matrix_+3A_extracols">extraCols</code></td>
<td>
<p>the optional number of extra columns to be appended to the
matrix for future use.</p>
</td></tr>
<tr><td><code id="write.big.matrix_+3A_shared">shared</code></td>
<td>
<p>if <code>TRUE</code>, the resulting <code>big.matrix</code> can be shared
across processes.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Files must contain only one atomic type
(all <code>integer</code>, for example).  You, the user, should know whether
your file has row and/or column names, and various combinations of options
should be helpful in obtaining the desired behavior.
</p>
<p>When reading from a file, if <code>type</code> is not specified we try to
make a reasonable guess for you without
making any guarantees at this point.
Unless you have really large integer values, we recommend
you consider <code>"short"</code>.  If you have something that is essentially
categorical, you might even be able use <code>"char"</code>, with huge memory
savings for large data sets.
</p>
<p>Any non-numeric entry will be ignored and replaced with <code>NA</code>,
so reading something that traditionally would be a <code>data.frame</code>
won't cause an error.  A warning is issued.
</p>
<p>Wishlist: we'd like to provide an option to ignore specified columns while
doing reads.
Or perhaps to specify columns targeted for factor or character conversion
to numeric values.  Would you use such features?  Email us and let us know!
</p>


<h3>Value</h3>

<p>a <code><a href="#topic+big.matrix">big.matrix</a></code> object is returned by <code>read.big.matrix</code>,
while <code>write.big.matrix</code> creates an output file (a path could be part
of <code>filename</code>).
</p>


<h3>Author(s)</h3>

<p>John W. Emerson and Michael J. Kane
<a href="mailto:bigmemoryauthors@gmail.com">bigmemoryauthors@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+big.matrix">big.matrix</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Without specifying the type, this big.matrix x will hold integers.

x &lt;- as.big.matrix(matrix(1:10, 5, 2))
x[2,2] &lt;- NA
x[,]
temp_dir = tempdir()
if (!dir.exists(temp_dir)) dir.create(temp_dir)
write.big.matrix(x, file.path(temp_dir, "foo.txt"))

# Just for fun, I'll read it back in as character (1-byte integers):
y &lt;- read.big.matrix(file.path(temp_dir, "foo.txt"), type="char")
y[,]

# Other examples:
w &lt;- as.big.matrix(matrix(1:10, 5, 2), type='double')
w[1,2] &lt;- NA
w[2,2] &lt;- -Inf
w[3,2] &lt;- Inf
w[4,2] &lt;- NaN
w[,]
write.big.matrix(w, file.path(temp_dir, "bar.txt"))
w &lt;- read.big.matrix(file.path(temp_dir, "bar.txt"), type="double")
w[,]
w &lt;- read.big.matrix(file.path(temp_dir, "bar.txt"), type="short")
w[,]

# Another example using row names (which we don't like).
x &lt;- as.big.matrix(as.matrix(iris), type='double')
rownames(x) &lt;- as.character(1:nrow(x))
head(x)
write.big.matrix(x, file.path(temp_dir, 'IrisData.txt'), col.names=TRUE, 
                 row.names=TRUE)
y &lt;- read.big.matrix(file.path(temp_dir, "IrisData.txt"), header=TRUE, 
                     has.row.names=TRUE)
head(y)

# The following would fail with a dimension mismatch:
if (FALSE) y &lt;- read.big.matrix(file.path(temp_dir, "IrisData.txt"), 
                                header=TRUE)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
