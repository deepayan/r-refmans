<!DOCTYPE html><html lang="en"><head><title>Help for package CatastRo</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {CatastRo}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#CatastRo-package'><p>CatastRo: Interface to the API 'Sede Electronica Del Catastro'</p></a></li>
<li><a href='#catr_atom_get_address'><p>ATOM INSPIRE: Download all the addresses of a municipality</p></a></li>
<li><a href='#catr_atom_get_address_db_all'><p>ATOM INSPIRE: Reference database for ATOM addresses</p></a></li>
<li><a href='#catr_atom_get_buildings'><p>ATOM INSPIRE: Download all the buildings of a municipality</p></a></li>
<li><a href='#catr_atom_get_buildings_db_all'><p>ATOM INSPIRE: Reference database for ATOM buildings</p></a></li>
<li><a href='#catr_atom_get_parcels'><p>ATOM INSPIRE: Download all the cadastral parcels of a municipality</p></a></li>
<li><a href='#catr_atom_get_parcels_db_all'><p>ATOM INSPIRE: Reference database for ATOM cadastral parcels</p></a></li>
<li><a href='#catr_atom_search_munic'><p>ATOM INSPIRE: Search for municipality codes</p></a></li>
<li><a href='#catr_clear_cache'><p>Clear your <a href="https://CRAN.R-project.org/package=CatastRo"><span class="pkg">CatastRo</span></a> cache dir</p></a></li>
<li><a href='#catr_get_code_from_coords'><p>Get the cadastral municipality code from coordinates</p></a></li>
<li><a href='#catr_ovc_get_cod_munic'><p>OVCCallejero: Extract the code of a municipality</p></a></li>
<li><a href='#catr_ovc_get_cod_provinces'><p>OVCCallejero: Extract a list of provinces with their codes</p></a></li>
<li><a href='#catr_ovc_get_cpmrc'><p>OVCCoordenadas: Geocode a cadastral reference</p></a></li>
<li><a href='#catr_ovc_get_rccoor'><p>OVCCoordenadas: Reverse geocode a cadastral reference</p></a></li>
<li><a href='#catr_ovc_get_rccoor_distancia'><p>OVCCoordenadas: Reverse geocode cadastral references on a region</p></a></li>
<li><a href='#catr_set_cache_dir'><p>Set your <a href="https://CRAN.R-project.org/package=CatastRo"><span class="pkg">CatastRo</span></a> cache dir</p></a></li>
<li><a href='#catr_srs_values'><p>Reference SRS codes for <a href="https://CRAN.R-project.org/package=CatastRo"><span class="pkg">CatastRo</span></a> APIs</p></a></li>
<li><a href='#catr_wfs_get_address_bbox'><p>WFS INSPIRE: Download addresses</p></a></li>
<li><a href='#catr_wfs_get_buildings_bbox'><p>WFS INSPIRE: Download buildings</p></a></li>
<li><a href='#catr_wfs_get_parcels_bbox'><p>WFS INSPIRE: Download cadastral parcels</p></a></li>
<li><a href='#catr_wms_get_layer'><p>WMS INSPIRE: Download map images</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Interface to the API 'Sede Electronica Del Catastro'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Access public spatial data available under the 'INSPIRE'
    directive. Tools for downloading references and addresses of
    properties, as well as map images.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://ropenspain.github.io/CatastRo/">https://ropenspain.github.io/CatastRo/</a>,
<a href="https://github.com/rOpenSpain/CatastRo">https://github.com/rOpenSpain/CatastRo</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/rOpenSpain/CatastRo/issues">https://github.com/rOpenSpain/CatastRo/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, httr2 (&ge; 1.0.0), mapSpain (&ge; 0.7.0), rappdirs (&ge;
0.3.0), sf (&ge; 1.0.0), stringi, terra, tibble, xml2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>ggplot2, knitr, png, rmarkdown, slippymath, testthat (&ge;
3.0.0), tidyterra</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>ropenspain/rostemplate, devtools, sessioninfo,
remotes, sfheaders, rapidjsonr, jsonify, geometries</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/testthat/parallel:</td>
<td>true</td>
</tr>
<tr>
<td>Copyright:</td>
<td>© Dirección General del Catastro
&lt;https://www.catastro.meh.es/&gt;</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-06-01 09:21:32 UTC; diego</td>
</tr>
<tr>
<td>Author:</td>
<td>Ángel Delgado Panadero
    <a href="https://orcid.org/0000-0002-8189-9251"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cph],
  Iñaki Ucar <a href="https://orcid.org/0000-0001-6403-5550"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Diego Hernangómez <a href="https://orcid.org/0000-0001-8457-4658"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Diego Hernangómez &lt;diego.hernangomezherrero@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-06-02 10:42:48 UTC</td>
</tr>
</table>
<hr>
<h2 id='CatastRo-package'>CatastRo: Interface to the API 'Sede Electronica Del Catastro'</h2><span id='topic+CatastRo'></span><span id='topic+CatastRo-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Access public spatial data available under the 'INSPIRE' directive. Tools for downloading references and addresses of properties, as well as map images.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Diego Hernangómez <a href="mailto:diego.hernangomezherrero@gmail.com">diego.hernangomezherrero@gmail.com</a> (<a href="https://orcid.org/0000-0001-8457-4658">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Ángel Delgado Panadero <a href="mailto:delgadopanadero@gmail.com">delgadopanadero@gmail.com</a> (<a href="https://orcid.org/0000-0002-8189-9251">ORCID</a>) [copyright holder]
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Iñaki Ucar (<a href="https://orcid.org/0000-0001-6403-5550">ORCID</a>) [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://ropenspain.github.io/CatastRo/">https://ropenspain.github.io/CatastRo/</a>
</p>
</li>
<li> <p><a href="https://github.com/rOpenSpain/CatastRo">https://github.com/rOpenSpain/CatastRo</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/rOpenSpain/CatastRo/issues">https://github.com/rOpenSpain/CatastRo/issues</a>
</p>
</li></ul>


<hr>
<h2 id='catr_atom_get_address'>ATOM INSPIRE: Download all the addresses of a municipality</h2><span id='topic+catr_atom_get_address'></span>

<h3>Description</h3>

<p>Get the spatial data of all the addresses belonging to a single municipality
using the INSPIRE ATOM service. Additionally, the function also returns the
corresponding street information on the fields with the prefix <code style="white-space: pre;">&#8288;tfname_*&#8288;</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catr_atom_get_address(
  munic,
  to = NULL,
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catr_atom_get_address_+3A_munic">munic</code></td>
<td>
<p>Municipality to extract, It can be a part of a string or the
cadastral code. See <code><a href="#topic+catr_atom_search_munic">catr_atom_search_munic()</a></code> for getting the cadastral
codes.</p>
</td></tr>
<tr><td><code id="catr_atom_get_address_+3A_to">to</code></td>
<td>
<p>Optional parameter for defining the Territorial Office to which
<code>munic</code> belongs. This parameter is a helper for narrowing the search.</p>
</td></tr>
<tr><td><code id="catr_atom_get_address_+3A_cache">cache</code></td>
<td>
<p>A logical whether to do caching. Default is <code>TRUE</code>. See
<strong>About caching</strong> section on <code><a href="#topic+catr_set_cache_dir">catr_set_cache_dir()</a></code>.</p>
</td></tr>
<tr><td><code id="catr_atom_get_address_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="catr_atom_get_address_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. On <code>NULL</code> value (the default)
the function would store the cached files on the
<code><a href="base.html#topic+tempfile">tempdir</a></code>.</p>
</td></tr>
<tr><td><code id="catr_atom_get_address_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="sf.html#topic+sf">sf</a></code> object.
</p>


<h3>References</h3>

<p><a href="https://www.catastro.minhap.es/webinspire/documentos/inspire-ATOM.pdf">API Documentation</a>.
</p>
<p><a href="https://www.catastro.minhap.es/webinspire/index.html">INSPIRE Services for Cadastral Cartography</a>.
</p>


<h3>See Also</h3>

<p>INSPIRE API functions:
<code><a href="#topic+catr_atom_get_address_db_all">catr_atom_get_address_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings_db_all">catr_atom_get_buildings_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels_db_all">catr_atom_get_parcels_db_all</a>()</code>,
<code><a href="#topic+catr_wfs_get_address_bbox">catr_wfs_get_address_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_buildings_bbox">catr_wfs_get_buildings_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_parcels_bbox">catr_wfs_get_parcels_bbox</a>()</code>,
<code><a href="#topic+catr_wms_get_layer">catr_wms_get_layer</a>()</code>
</p>
<p>Other INSPIRE ATOM services:
<code><a href="#topic+catr_atom_get_address_db_all">catr_atom_get_address_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings_db_all">catr_atom_get_buildings_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels_db_all">catr_atom_get_parcels_db_all</a>()</code>,
<code><a href="#topic+catr_atom_search_munic">catr_atom_search_munic</a>()</code>
</p>
<p>Other addresses: 
<code><a href="#topic+catr_atom_get_address_db_all">catr_atom_get_address_db_all</a>()</code>,
<code><a href="#topic+catr_wfs_get_address_bbox">catr_wfs_get_address_bbox</a>()</code>
</p>
<p>Other spatial: 
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_wfs_get_address_bbox">catr_wfs_get_address_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_buildings_bbox">catr_wfs_get_buildings_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_parcels_bbox">catr_wfs_get_parcels_bbox</a>()</code>,
<code><a href="#topic+catr_wms_get_layer">catr_wms_get_layer</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
s &lt;- catr_atom_get_address("Melque",
  to = "Segovia"
)

library(ggplot2)

ggplot(s) +
  geom_sf(aes(color = specification)) +
  coord_sf(
    xlim = c(376200, 376850),
    ylim = c(4545000, 4546000)
  ) +
  labs(
    title = "Addresses",
    subtitle = "Melque de Cercos, Segovia"
  )


</code></pre>

<hr>
<h2 id='catr_atom_get_address_db_all'>ATOM INSPIRE: Reference database for ATOM addresses</h2><span id='topic+catr_atom_get_address_db_all'></span><span id='topic+catr_atom_get_address_to'></span><span id='topic+catr_atom_get_address_db_to'></span>

<h3>Description</h3>

<p>Create a database containing the urls provided in the INSPIRE ATOM service
of the Spanish Cadastre for extracting Addresses.
</p>

<ul>
<li> <p><code>catr_atom_get_address_db_all()</code> provides a top-level table including
information of all the territorial offices (except Basque Country and
Navarre) listing the municipalities included on each office.
</p>
</li>
<li> <p><code>catr_atom_get_address_db_to()</code> provides a table for the specified
territorial office including information for each of the municipalities
of that office.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>catr_atom_get_address_db_all(
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE
)

catr_atom_get_address_db_to(
  to,
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catr_atom_get_address_db_all_+3A_cache">cache</code></td>
<td>
<p>A logical whether to do caching. Default is <code>TRUE</code>. See
<strong>About caching</strong> section on <code><a href="#topic+catr_set_cache_dir">catr_set_cache_dir()</a></code>.</p>
</td></tr>
<tr><td><code id="catr_atom_get_address_db_all_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="catr_atom_get_address_db_all_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. On <code>NULL</code> value (the default)
the function would store the cached files on the
<code><a href="base.html#topic+tempfile">tempdir</a></code>.</p>
</td></tr>
<tr><td><code id="catr_atom_get_address_db_all_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="catr_atom_get_address_db_all_+3A_to">to</code></td>
<td>
<p>Territorial office. It can be any type of string, the function
would perform a search using <code><a href="base.html#topic+grep">base::grep()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble</a></code> with the information requested.
</p>

<ul>
<li> <p><code>catr_atom_get_address_db_all()</code> includes the following fields:
</p>

<ul>
<li> <p><code>territorial_office</code>: Territorial office, corresponding to each province
of Spain expect Basque Country and Navarre.
</p>
</li>
<li> <p><code>url</code>: ATOM url for the corresponding territorial office.
</p>
</li>
<li> <p><code>munic</code>: Name of the municipality.
</p>
</li>
<li> <p><code>date</code>: Reference date of the data. Note that <strong>the information of
this service is updated twice a year</strong>.
</p>
</li></ul>

</li>
<li> <p><code>catr_atom_get_address_db_to()</code> includes the following fields:
</p>

<ul>
<li> <p><code>munic</code>: Name of the municipality.
</p>
</li>
<li> <p><code>url</code>: url for downloading information of the corresponding municipality.
</p>
</li>
<li> <p><code>date</code>: Reference date of the data. Note that <strong>the information of
this service is updated twice a year</strong>.
</p>
</li></ul>

</li></ul>



<h3>Source</h3>

<p><a href="https://www.catastro.hacienda.gob.es/INSPIRE/Addresses/ES.SDGC.AD.atom.xml">https://www.catastro.hacienda.gob.es/INSPIRE/Addresses/ES.SDGC.AD.atom.xml</a>
</p>


<h3>See Also</h3>

<p>INSPIRE API functions:
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings_db_all">catr_atom_get_buildings_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels_db_all">catr_atom_get_parcels_db_all</a>()</code>,
<code><a href="#topic+catr_wfs_get_address_bbox">catr_wfs_get_address_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_buildings_bbox">catr_wfs_get_buildings_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_parcels_bbox">catr_wfs_get_parcels_bbox</a>()</code>,
<code><a href="#topic+catr_wms_get_layer">catr_wms_get_layer</a>()</code>
</p>
<p>Other INSPIRE ATOM services:
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings_db_all">catr_atom_get_buildings_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels_db_all">catr_atom_get_parcels_db_all</a>()</code>,
<code><a href="#topic+catr_atom_search_munic">catr_atom_search_munic</a>()</code>
</p>
<p>Other addresses: 
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_wfs_get_address_bbox">catr_wfs_get_address_bbox</a>()</code>
</p>
<p>Other databases: 
<code><a href="#topic+catr_atom_get_buildings_db_all">catr_atom_get_buildings_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels_db_all">catr_atom_get_parcels_db_all</a>()</code>,
<code><a href="#topic+catr_atom_search_munic">catr_atom_search_munic</a>()</code>,
<code><a href="#topic+catr_srs_values">catr_srs_values</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
catr_atom_get_address_db_all()

</code></pre>

<hr>
<h2 id='catr_atom_get_buildings'>ATOM INSPIRE: Download all the buildings of a municipality</h2><span id='topic+catr_atom_get_buildings'></span>

<h3>Description</h3>

<p>Get the spatial data of all the buildings belonging to a single municipality
using the INSPIRE ATOM service.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catr_atom_get_buildings(
  munic,
  to = NULL,
  what = c("building", "buildingpart", "other"),
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catr_atom_get_buildings_+3A_munic">munic</code></td>
<td>
<p>Municipality to extract, It can be a part of a string or the
cadastral code. See <code><a href="#topic+catr_atom_search_munic">catr_atom_search_munic()</a></code> for getting the cadastral
codes.</p>
</td></tr>
<tr><td><code id="catr_atom_get_buildings_+3A_to">to</code></td>
<td>
<p>Optional parameter for defining the Territorial Office to which
<code>munic</code> belongs. This parameter is a helper for narrowing the search.</p>
</td></tr>
<tr><td><code id="catr_atom_get_buildings_+3A_what">what</code></td>
<td>
<p>Information to load. It could be:
</p>

<ul>
<li> <p><code>"building"</code> for buildings.
</p>
</li>
<li> <p><code>"buildingpart"</code> for parts of a building.
</p>
</li>
<li> <p><code>"other"</code> for others elements, as swimming pools, etc.
</p>
</li></ul>
</td></tr>
<tr><td><code id="catr_atom_get_buildings_+3A_cache">cache</code></td>
<td>
<p>A logical whether to do caching. Default is <code>TRUE</code>. See
<strong>About caching</strong> section on <code><a href="#topic+catr_set_cache_dir">catr_set_cache_dir()</a></code>.</p>
</td></tr>
<tr><td><code id="catr_atom_get_buildings_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="catr_atom_get_buildings_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. On <code>NULL</code> value (the default)
the function would store the cached files on the
<code><a href="base.html#topic+tempfile">tempdir</a></code>.</p>
</td></tr>
<tr><td><code id="catr_atom_get_buildings_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="sf.html#topic+sf">sf</a></code> object.
</p>


<h3>References</h3>

<p><a href="https://www.catastro.minhap.es/webinspire/documentos/inspire-ATOM.pdf">API Documentation</a>.
</p>
<p><a href="https://www.catastro.minhap.es/webinspire/index.html">INSPIRE Services for Cadastral Cartography</a>.
</p>


<h3>See Also</h3>

<p>INSPIRE API functions:
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_address_db_all">catr_atom_get_address_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings_db_all">catr_atom_get_buildings_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels_db_all">catr_atom_get_parcels_db_all</a>()</code>,
<code><a href="#topic+catr_wfs_get_address_bbox">catr_wfs_get_address_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_buildings_bbox">catr_wfs_get_buildings_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_parcels_bbox">catr_wfs_get_parcels_bbox</a>()</code>,
<code><a href="#topic+catr_wms_get_layer">catr_wms_get_layer</a>()</code>
</p>
<p>Other INSPIRE ATOM services:
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_address_db_all">catr_atom_get_address_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings_db_all">catr_atom_get_buildings_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels_db_all">catr_atom_get_parcels_db_all</a>()</code>,
<code><a href="#topic+catr_atom_search_munic">catr_atom_search_munic</a>()</code>
</p>
<p>Other buildings: 
<code><a href="#topic+catr_atom_get_buildings_db_all">catr_atom_get_buildings_db_all</a>()</code>,
<code><a href="#topic+catr_wfs_get_buildings_bbox">catr_wfs_get_buildings_bbox</a>()</code>
</p>
<p>Other spatial: 
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_wfs_get_address_bbox">catr_wfs_get_address_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_buildings_bbox">catr_wfs_get_buildings_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_parcels_bbox">catr_wfs_get_parcels_bbox</a>()</code>,
<code><a href="#topic+catr_wms_get_layer">catr_wms_get_layer</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
s &lt;- catr_atom_get_buildings("Nava de la Asuncion",
  to = "Segovia",
  what = "building"
)

library(ggplot2)
ggplot(s) +
  geom_sf() +
  coord_sf(
    xlim = c(374500, 375500),
    ylim = c(4556500, 4557500)
  ) +
  labs(
    title = "Buildings",
    subtitle = "Nava de la Asuncion, Segovia"
  )


</code></pre>

<hr>
<h2 id='catr_atom_get_buildings_db_all'>ATOM INSPIRE: Reference database for ATOM buildings</h2><span id='topic+catr_atom_get_buildings_db_all'></span><span id='topic+catr_atom_get_buildings_to'></span><span id='topic+catr_atom_get_buildings_db_to'></span>

<h3>Description</h3>

<p>Create a database containing the urls provided in the INSPIRE ATOM service
of the Spanish Cadastre for extracting buildings.
</p>

<ul>
<li> <p><code>catr_atom_get_buildings_db_all()</code> provides a top-level table including
information of all the territorial offices (except Basque Country and
Navarre) listing the municipalities included on each office.
</p>
</li>
<li> <p><code>catr_atom_get_buildings_db_to()</code> provides a table for the specified
territorial office including information for each of the municipalities
of that office.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>catr_atom_get_buildings_db_all(
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE
)

catr_atom_get_buildings_db_to(
  to,
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catr_atom_get_buildings_db_all_+3A_cache">cache</code></td>
<td>
<p>A logical whether to do caching. Default is <code>TRUE</code>. See
<strong>About caching</strong> section on <code><a href="#topic+catr_set_cache_dir">catr_set_cache_dir()</a></code>.</p>
</td></tr>
<tr><td><code id="catr_atom_get_buildings_db_all_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="catr_atom_get_buildings_db_all_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. On <code>NULL</code> value (the default)
the function would store the cached files on the
<code><a href="base.html#topic+tempfile">tempdir</a></code>.</p>
</td></tr>
<tr><td><code id="catr_atom_get_buildings_db_all_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="catr_atom_get_buildings_db_all_+3A_to">to</code></td>
<td>
<p>Territorial office. It can be any type of string, the function
would perform a search using <code><a href="base.html#topic+grep">base::grep()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble</a></code> with the information requested.
</p>

<ul>
<li> <p><code>catr_atom_get_buildings_db_all()</code> includes the following fields:
</p>

<ul>
<li> <p><code>territorial_office</code>: Territorial office, corresponding to each province
of Spain expect Basque Country and Navarre.
</p>
</li>
<li> <p><code>url</code>: ATOM url for the corresponding territorial office.
</p>
</li>
<li> <p><code>munic</code>: Name of the municipality.
</p>
</li>
<li> <p><code>date</code>: Reference date of the data. Note that <strong>the information of
this service is updated twice a year</strong>.
</p>
</li></ul>

</li>
<li> <p><code>catr_atom_get_buildings_db_to()</code> includes the following fields:
</p>

<ul>
<li> <p><code>munic</code>: Name of the municipality.
</p>
</li>
<li> <p><code>url</code>: url for downloading information of the corresponding municipality.
</p>
</li>
<li> <p><code>date</code>: Reference date of the data. Note that <strong>the information of
this service is updated twice a year</strong>.
</p>
</li></ul>

</li></ul>



<h3>Source</h3>

<p><a href="https://www.catastro.hacienda.gob.es/INSPIRE/buildings/ES.SDGC.BU.atom.xml">https://www.catastro.hacienda.gob.es/INSPIRE/buildings/ES.SDGC.BU.atom.xml</a>
</p>


<h3>See Also</h3>

<p>INSPIRE API functions:
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_address_db_all">catr_atom_get_address_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels_db_all">catr_atom_get_parcels_db_all</a>()</code>,
<code><a href="#topic+catr_wfs_get_address_bbox">catr_wfs_get_address_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_buildings_bbox">catr_wfs_get_buildings_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_parcels_bbox">catr_wfs_get_parcels_bbox</a>()</code>,
<code><a href="#topic+catr_wms_get_layer">catr_wms_get_layer</a>()</code>
</p>
<p>Other INSPIRE ATOM services:
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_address_db_all">catr_atom_get_address_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels_db_all">catr_atom_get_parcels_db_all</a>()</code>,
<code><a href="#topic+catr_atom_search_munic">catr_atom_search_munic</a>()</code>
</p>
<p>Other buildings: 
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_wfs_get_buildings_bbox">catr_wfs_get_buildings_bbox</a>()</code>
</p>
<p>Other databases: 
<code><a href="#topic+catr_atom_get_address_db_all">catr_atom_get_address_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels_db_all">catr_atom_get_parcels_db_all</a>()</code>,
<code><a href="#topic+catr_atom_search_munic">catr_atom_search_munic</a>()</code>,
<code><a href="#topic+catr_srs_values">catr_srs_values</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
catr_atom_get_buildings_db_all()

</code></pre>

<hr>
<h2 id='catr_atom_get_parcels'>ATOM INSPIRE: Download all the cadastral parcels of a municipality</h2><span id='topic+catr_atom_get_parcels'></span>

<h3>Description</h3>

<p>Get the spatial data of all the cadastral parcels belonging to a single
municipality using the INSPIRE ATOM service.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catr_atom_get_parcels(
  munic,
  to = NULL,
  what = "parcel",
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catr_atom_get_parcels_+3A_munic">munic</code></td>
<td>
<p>Municipality to extract, It can be a part of a string or the
cadastral code. See <code><a href="#topic+catr_atom_search_munic">catr_atom_search_munic()</a></code> for getting the cadastral
codes.</p>
</td></tr>
<tr><td><code id="catr_atom_get_parcels_+3A_to">to</code></td>
<td>
<p>Optional parameter for defining the Territorial Office to which
<code>munic</code> belongs. This parameter is a helper for narrowing the search.</p>
</td></tr>
<tr><td><code id="catr_atom_get_parcels_+3A_what">what</code></td>
<td>
<p>Information to load. It could be <code>"parcel"</code> for cadastral parcels
or <code>"zoning"</code> for cadastral zoning.</p>
</td></tr>
<tr><td><code id="catr_atom_get_parcels_+3A_cache">cache</code></td>
<td>
<p>A logical whether to do caching. Default is <code>TRUE</code>. See
<strong>About caching</strong> section on <code><a href="#topic+catr_set_cache_dir">catr_set_cache_dir()</a></code>.</p>
</td></tr>
<tr><td><code id="catr_atom_get_parcels_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="catr_atom_get_parcels_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. On <code>NULL</code> value (the default)
the function would store the cached files on the
<code><a href="base.html#topic+tempfile">tempdir</a></code>.</p>
</td></tr>
<tr><td><code id="catr_atom_get_parcels_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="sf.html#topic+sf">sf</a></code> object.
</p>


<h3>References</h3>

<p><a href="https://www.catastro.minhap.es/webinspire/documentos/inspire-ATOM.pdf">API Documentation</a>.
</p>
<p><a href="https://www.catastro.minhap.es/webinspire/index.html">INSPIRE Services for Cadastral Cartography</a>.
</p>


<h3>See Also</h3>

<p>INSPIRE API functions:
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_address_db_all">catr_atom_get_address_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings_db_all">catr_atom_get_buildings_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels_db_all">catr_atom_get_parcels_db_all</a>()</code>,
<code><a href="#topic+catr_wfs_get_address_bbox">catr_wfs_get_address_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_buildings_bbox">catr_wfs_get_buildings_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_parcels_bbox">catr_wfs_get_parcels_bbox</a>()</code>,
<code><a href="#topic+catr_wms_get_layer">catr_wms_get_layer</a>()</code>
</p>
<p>Other INSPIRE ATOM services:
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_address_db_all">catr_atom_get_address_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings_db_all">catr_atom_get_buildings_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels_db_all">catr_atom_get_parcels_db_all</a>()</code>,
<code><a href="#topic+catr_atom_search_munic">catr_atom_search_munic</a>()</code>
</p>
<p>Other parcels: 
<code><a href="#topic+catr_atom_get_parcels_db_all">catr_atom_get_parcels_db_all</a>()</code>,
<code><a href="#topic+catr_wfs_get_parcels_bbox">catr_wfs_get_parcels_bbox</a>()</code>
</p>
<p>Other spatial: 
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_wfs_get_address_bbox">catr_wfs_get_address_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_buildings_bbox">catr_wfs_get_buildings_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_parcels_bbox">catr_wfs_get_parcels_bbox</a>()</code>,
<code><a href="#topic+catr_wms_get_layer">catr_wms_get_layer</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
s &lt;- catr_atom_get_parcels("Melque",
  to = "Segovia",
  what = "parcel"
)

library(ggplot2)

ggplot(s) +
  geom_sf() +
  labs(
    title = "Cadastral Zoning",
    subtitle = "Melque de Cercos, Segovia"
  )


</code></pre>

<hr>
<h2 id='catr_atom_get_parcels_db_all'>ATOM INSPIRE: Reference database for ATOM cadastral parcels</h2><span id='topic+catr_atom_get_parcels_db_all'></span><span id='topic+catr_atom_get_parcels_to'></span><span id='topic+catr_atom_get_parcels_db_to'></span>

<h3>Description</h3>

<p>Create a database containing the urls provided in the INSPIRE ATOM service
of the Spanish Cadastre for extracting cadastral parcels.
</p>

<ul>
<li> <p><code>catr_atom_get_parcels_db_all()</code> provides a top-level table including
information of all the territorial offices (except Basque Country and
Navarre) listing the municipalities included on each office.
</p>
</li>
<li> <p><code>catr_atom_get_parcels_db_to()</code> provides a table for the specified
territorial office including information for each of the municipalities
of that office.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>catr_atom_get_parcels_db_all(
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE
)

catr_atom_get_parcels_db_to(
  to,
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catr_atom_get_parcels_db_all_+3A_cache">cache</code></td>
<td>
<p>A logical whether to do caching. Default is <code>TRUE</code>. See
<strong>About caching</strong> section on <code><a href="#topic+catr_set_cache_dir">catr_set_cache_dir()</a></code>.</p>
</td></tr>
<tr><td><code id="catr_atom_get_parcels_db_all_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="catr_atom_get_parcels_db_all_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. On <code>NULL</code> value (the default)
the function would store the cached files on the
<code><a href="base.html#topic+tempfile">tempdir</a></code>.</p>
</td></tr>
<tr><td><code id="catr_atom_get_parcels_db_all_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="catr_atom_get_parcels_db_all_+3A_to">to</code></td>
<td>
<p>Territorial office. It can be any type of string, the function
would perform a search using <code><a href="base.html#topic+grep">base::grep()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble</a></code> with the information requested.
</p>

<ul>
<li> <p><code>catr_atom_get_parcels_db_all()</code> includes the following fields:
</p>

<ul>
<li> <p><code>territorial_office</code>: Territorial office, corresponding to each province
of Spain expect Basque Country and Navarre.
</p>
</li>
<li> <p><code>url</code>: ATOM url for the corresponding territorial office.
</p>
</li>
<li> <p><code>munic</code>: Name of the municipality.
</p>
</li>
<li> <p><code>date</code>: Reference date of the data. Note that <strong>the information of
this service is updated twice a year</strong>.
</p>
</li></ul>

</li>
<li> <p><code>catr_atom_get_parcels_db_to()</code> includes the following fields:
</p>

<ul>
<li> <p><code>munic</code>: Name of the municipality.
</p>
</li>
<li> <p><code>url</code>: url for downloading information of the corresponding municipality.
</p>
</li>
<li> <p><code>date</code>: Reference date of the data. Note that <strong>the information of
this service is updated twice a year</strong>.
</p>
</li></ul>

</li></ul>



<h3>Source</h3>

<p><a href="https://www.catastro.hacienda.gob.es/INSPIRE/CadastralParcels/ES.SDGC.CP.atom.xml">https://www.catastro.hacienda.gob.es/INSPIRE/CadastralParcels/ES.SDGC.CP.atom.xml</a>
</p>


<h3>See Also</h3>

<p>INSPIRE API functions:
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_address_db_all">catr_atom_get_address_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings_db_all">catr_atom_get_buildings_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_wfs_get_address_bbox">catr_wfs_get_address_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_buildings_bbox">catr_wfs_get_buildings_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_parcels_bbox">catr_wfs_get_parcels_bbox</a>()</code>,
<code><a href="#topic+catr_wms_get_layer">catr_wms_get_layer</a>()</code>
</p>
<p>Other INSPIRE ATOM services:
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_address_db_all">catr_atom_get_address_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings_db_all">catr_atom_get_buildings_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_atom_search_munic">catr_atom_search_munic</a>()</code>
</p>
<p>Other parcels: 
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_wfs_get_parcels_bbox">catr_wfs_get_parcels_bbox</a>()</code>
</p>
<p>Other databases: 
<code><a href="#topic+catr_atom_get_address_db_all">catr_atom_get_address_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings_db_all">catr_atom_get_buildings_db_all</a>()</code>,
<code><a href="#topic+catr_atom_search_munic">catr_atom_search_munic</a>()</code>,
<code><a href="#topic+catr_srs_values">catr_srs_values</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
catr_atom_get_parcels_db_all()

</code></pre>

<hr>
<h2 id='catr_atom_search_munic'>ATOM INSPIRE: Search for municipality codes</h2><span id='topic+catr_atom_search_munic'></span>

<h3>Description</h3>

<p>Search for a municipality (as a string, part of string or code) and get
the corresponding coding as per the Cadastre.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catr_atom_search_munic(
  munic,
  to = NULL,
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catr_atom_search_munic_+3A_munic">munic</code></td>
<td>
<p>Municipality to extract, It can be a part of a string or the
cadastral code.</p>
</td></tr>
<tr><td><code id="catr_atom_search_munic_+3A_to">to</code></td>
<td>
<p>Optional parameter for defining the Territorial Office to which
<code>munic</code> belongs. This parameter is a helper for narrowing the search.</p>
</td></tr>
<tr><td><code id="catr_atom_search_munic_+3A_cache">cache</code></td>
<td>
<p>A logical whether to do caching. Default is <code>TRUE</code>. See
<strong>About caching</strong> section on <code><a href="#topic+catr_set_cache_dir">catr_set_cache_dir()</a></code>.</p>
</td></tr>
<tr><td><code id="catr_atom_search_munic_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="catr_atom_search_munic_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. On <code>NULL</code> value (the default)
the function would store the cached files on the
<code><a href="base.html#topic+tempfile">tempdir</a></code>.</p>
</td></tr>
<tr><td><code id="catr_atom_search_munic_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble</a></code>.
</p>


<h3>See Also</h3>

<p>Other INSPIRE ATOM services:
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_address_db_all">catr_atom_get_address_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings_db_all">catr_atom_get_buildings_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels_db_all">catr_atom_get_parcels_db_all</a>()</code>
</p>
<p>Other search: 
<code><a href="#topic+catr_get_code_from_coords">catr_get_code_from_coords</a>()</code>,
<code><a href="#topic+catr_ovc_get_cod_munic">catr_ovc_get_cod_munic</a>()</code>,
<code><a href="#topic+catr_ovc_get_cod_provinces">catr_ovc_get_cod_provinces</a>()</code>
</p>
<p>Other databases: 
<code><a href="#topic+catr_atom_get_address_db_all">catr_atom_get_address_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings_db_all">catr_atom_get_buildings_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels_db_all">catr_atom_get_parcels_db_all</a>()</code>,
<code><a href="#topic+catr_srs_values">catr_srs_values</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
catr_atom_search_munic("Mad")

</code></pre>

<hr>
<h2 id='catr_clear_cache'>Clear your <a href="https://CRAN.R-project.org/package=CatastRo"><span class="pkg">CatastRo</span></a> cache dir</h2><span id='topic+catr_clear_cache'></span>

<h3>Description</h3>

<p><strong>Use this function with caution</strong>. This function would clear your cached
data and configuration, specifically:
</p>

<ul>
<li><p> Deletes the <a href="https://CRAN.R-project.org/package=CatastRo"><span class="pkg">CatastRo</span></a> config directory
(<code>rappdirs::user_config_dir("CatastRo", "R")</code>).
</p>
</li>
<li><p> Deletes the <code>cache_dir</code> directory.
</p>
</li>
<li><p> Deletes the values on stored on <code>Sys.getenv("CATASTROESP_CACHE_DIR")</code>.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>catr_clear_cache(config = FALSE, cached_data = TRUE, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catr_clear_cache_+3A_config">config</code></td>
<td>
<p>if <code>TRUE</code>, will delete the configuration folder of
<a href="https://CRAN.R-project.org/package=CatastRo"><span class="pkg">CatastRo</span></a>.</p>
</td></tr>
<tr><td><code id="catr_clear_cache_+3A_cached_data">cached_data</code></td>
<td>
<p>If this is set to <code>TRUE</code>, it will delete your
<code>cache_dir</code> and all its content.</p>
</td></tr>
<tr><td><code id="catr_clear_cache_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is an overkill function that is intended to reset your status
as it you would never have installed and/or used <a href="https://CRAN.R-project.org/package=CatastRo"><span class="pkg">CatastRo</span></a>.
</p>


<h3>Value</h3>

<p>Invisible. This function is called for its side effects.
</p>


<h3>See Also</h3>

<p>Other cache utilities: 
<code><a href="#topic+catr_set_cache_dir">catr_set_cache_dir</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Don't run this! It would modify your current state
## Not run: 
catr_clear_cache(verbose = TRUE)

## End(Not run)

Sys.getenv("CATASTROESP_CACHE_DIR")
</code></pre>

<hr>
<h2 id='catr_get_code_from_coords'>Get the cadastral municipality code from coordinates</h2><span id='topic+catr_get_code_from_coords'></span>

<h3>Description</h3>

<p>This function takes as an input a pair of coordinates of a <code><a href="sf.html#topic+sf">sf</a></code>
object and returns the corresponding municipality code for that coordinates.
</p>
<p>See also <code><a href="mapSpain.html#topic+esp_get_munic">mapSpain::esp_get_munic_siane()</a></code> and <code><a href="#topic+catr_ovc_get_cod_munic">catr_ovc_get_cod_munic()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catr_get_code_from_coords(x, srs, verbose = FALSE, cache_dir = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catr_get_code_from_coords_+3A_x">x</code></td>
<td>
<p>It could be:
</p>

<ul>
<li><p> A pair of coordinates c(x,y).
</p>
</li>
<li><p> A <code><a href="sf.html#topic+sf">sf</a></code> object. See <strong>Details</strong>.
</p>
</li></ul>
</td></tr>
<tr><td><code id="catr_get_code_from_coords_+3A_srs">srs</code></td>
<td>
<p>SRS/CRS to use on the query. To check the admitted values check
<a href="#topic+catr_srs_values">catr_srs_values</a>, specifically the <code>wfs_service</code> column. See <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="catr_get_code_from_coords_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="catr_get_code_from_coords_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. On <code>NULL</code> value (the default)
the function would store the cached files on the
<code><a href="base.html#topic+tempfile">tempdir</a></code>.</p>
</td></tr>
<tr><td><code id="catr_get_code_from_coords_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="mapSpain.html#topic+esp_get_munic">mapSpain::esp_get_munic_siane</a></code>
</p>

<dl>
<dt><code>year</code></dt><dd><p>Release year. See <strong>Details</strong> for years available.</p>
</dd>
</dl>
</td></tr>
</table>


<h3>Details</h3>

<p>When <code>x</code> is a numeric vector, make sure that the <code>srs</code> matches the
coordinate values.
</p>
<p>When <code>x</code> is a <code><a href="sf.html#topic+sf">sf</a></code> object, only the first value would
be used. The function would extract the coordinates using
<code>sf::st_centroid(x, of_largest_polygon = TRUE)</code>.
</p>


<h3>Value</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble</a></code> with the format described in
<code><a href="#topic+catr_ovc_get_cod_munic">catr_ovc_get_cod_munic()</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="mapSpain.html#topic+esp_get_munic">mapSpain::esp_get_munic_siane()</a></code>, <code><a href="sf.html#topic+geos_unary">sf::st_centroid()</a></code>.
</p>
<p>Other search: 
<code><a href="#topic+catr_atom_search_munic">catr_atom_search_munic</a>()</code>,
<code><a href="#topic+catr_ovc_get_cod_munic">catr_ovc_get_cod_munic</a>()</code>,
<code><a href="#topic+catr_ovc_get_cod_provinces">catr_ovc_get_cod_provinces</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Use with coords
catr_get_code_from_coords(c(-16.25462, 28.46824), srs = 4326)

# Use with sf
prov &lt;- mapSpain::esp_get_prov("Caceres")
catr_get_code_from_coords(prov)


</code></pre>

<hr>
<h2 id='catr_ovc_get_cod_munic'>OVCCallejero: Extract the code of a municipality</h2><span id='topic+catr_ovc_get_cod_munic'></span>

<h3>Description</h3>

<p>Implementation of the OVCCallejero service
<a href="https://ovc.catastro.meh.es/ovcservweb/ovcswlocalizacionrc/ovccallejerocodigos.asmx?op=ConsultaMunicipioCodigos">ConsultaMunicipioCodigos</a>.
</p>
<p>Return the names and codes of a municipality. Returns both the codes as per
the Cadastre and as per the INE (National Statistics Institute).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catr_ovc_get_cod_munic(cpro, cmun = NULL, cmun_ine = NULL, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catr_ovc_get_cod_munic_+3A_cpro">cpro</code></td>
<td>
<p>The code of a province, as provided by
<code><a href="#topic+catr_ovc_get_cod_provinces">catr_ovc_get_cod_provinces()</a></code>.</p>
</td></tr>
<tr><td><code id="catr_ovc_get_cod_munic_+3A_cmun">cmun</code></td>
<td>
<p>Code of a municipality, as recorded on the Spanish Cadastre.</p>
</td></tr>
<tr><td><code id="catr_ovc_get_cod_munic_+3A_cmun_ine">cmun_ine</code></td>
<td>
<p>Code of a municipality, as recorded on National Statistics
Institute. See <a href="https://www.ine.es/daco/daco42/codmun/codmun00i.htm">INE: List of municipalities</a></p>
</td></tr>
<tr><td><code id="catr_ovc_get_cod_munic_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Parameter <code>cpro</code> is mandatory. Either <code>cmun</code> or <code>cmun_ine</code> should be
provided.
</p>
<p>On a successful query, the function returns a <code><a href="tibble.html#topic+tibble">tibble</a></code>
with one row including the following columns:
</p>

<ul>
<li> <p><code>munic</code>: Name of the municipality as per the Cadastre.
</p>
</li>
<li> <p><code>catr_to</code>: Cadastral territorial office code.
</p>
</li>
<li> <p><code>catr_munic</code>: Municipality code as recorded on the Cadastre.
</p>
</li>
<li> <p><code>catrcode</code>: Full Cadastral code for the municipality.
</p>
</li>
<li> <p><code>cpro</code>: Province code as per the INE.
</p>
</li>
<li> <p><code>catr_munic</code>: Municipality code as per the INE.
</p>
</li>
<li> <p><code>catrcode</code>: Full INE code for the municipality.
</p>
</li>
<li><p> Rest of fields: Check the API Docs.
</p>
</li></ul>



<h3>Value</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble</a></code>. See <strong>Details</strong>
</p>


<h3>References</h3>

<p><a href="https://ovc.catastro.meh.es/ovcservweb/ovcswlocalizacionrc/ovccallejerocodigos.asmx?op=ConsultaMunicipioCodigos">ConsultaMunicipioCodigos</a>.
</p>


<h3>See Also</h3>

<p><code><a href="mapSpain.html#topic+esp_get_munic">mapSpain::esp_get_munic()</a></code> to get shapes of municipalities,
including the INE code.
</p>
<p>OVCCoordenadas API:
<code><a href="#topic+catr_ovc_get_cod_provinces">catr_ovc_get_cod_provinces</a>()</code>
</p>
<p>Other search: 
<code><a href="#topic+catr_atom_search_munic">catr_atom_search_munic</a>()</code>,
<code><a href="#topic+catr_get_code_from_coords">catr_get_code_from_coords</a>()</code>,
<code><a href="#topic+catr_ovc_get_cod_provinces">catr_ovc_get_cod_provinces</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Get municipality by cadastal code
ab &lt;- catr_ovc_get_cod_munic(2, 900)

ab

# Same query using the INE code

ab2 &lt;- catr_ovc_get_cod_munic(2, cmun_ine = 3)

ab2


</code></pre>

<hr>
<h2 id='catr_ovc_get_cod_provinces'>OVCCallejero: Extract a list of provinces with their codes</h2><span id='topic+catr_ovc_get_cod_provinces'></span>

<h3>Description</h3>

<p>Implementation of the OVCCallejero service
<a href="https://ovc.catastro.meh.es/ovcservweb/ovcswlocalizacionrc/ovccallejerocodigos.asmx?op=ConsultaProvincia">ConsultaProvincia</a>.
</p>
<p>Return a list of the provinces included on the Spanish Cadastre.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catr_ovc_get_cod_provinces(verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catr_ovc_get_cod_provinces_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble</a></code>.
</p>


<h3>References</h3>

<p><a href="https://ovc.catastro.meh.es/ovcservweb/ovcswlocalizacionrc/ovccallejerocodigos.asmx?op=ConsultaProvincia">ConsultaProvincia</a>.
</p>


<h3>See Also</h3>

<p>OVCCoordenadas API:
<code><a href="#topic+catr_ovc_get_cod_munic">catr_ovc_get_cod_munic</a>()</code>
</p>
<p>Other search: 
<code><a href="#topic+catr_atom_search_munic">catr_atom_search_munic</a>()</code>,
<code><a href="#topic+catr_get_code_from_coords">catr_get_code_from_coords</a>()</code>,
<code><a href="#topic+catr_ovc_get_cod_munic">catr_ovc_get_cod_munic</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>


catr_ovc_get_cod_provinces()


</code></pre>

<hr>
<h2 id='catr_ovc_get_cpmrc'>OVCCoordenadas: Geocode a cadastral reference</h2><span id='topic+catr_ovc_get_cpmrc'></span>

<h3>Description</h3>

<p>Implementation of the OVCCoordenadas service
<a href="https://ovc.catastro.meh.es/ovcservweb/ovcswlocalizacionrc/ovccoordenadas.asmx?op=Consulta_CPMRC">Consulta CPMRC</a>.
</p>
<p>Return the coordinates for a specific cadastral reference.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catr_ovc_get_cpmrc(
  rc,
  srs = 4326,
  province = NULL,
  municipality = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catr_ovc_get_cpmrc_+3A_rc">rc</code></td>
<td>
<p>The cadastral reference to be geocoded.</p>
</td></tr>
<tr><td><code id="catr_ovc_get_cpmrc_+3A_srs">srs</code></td>
<td>
<p>SRS/CRS to use on the query. To check the admitted values check
<a href="#topic+catr_srs_values">catr_srs_values</a>, specifically the <code>ovc_service</code> column.</p>
</td></tr>
<tr><td><code id="catr_ovc_get_cpmrc_+3A_province">province</code>, <code id="catr_ovc_get_cpmrc_+3A_municipality">municipality</code></td>
<td>
<p>Optional, used for narrowing the search.</p>
</td></tr>
<tr><td><code id="catr_ovc_get_cpmrc_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When the API does not provide any result, the function returns a
<code><a href="tibble.html#topic+tibble">tibble</a></code> with the input parameters only.
</p>
<p>On a successful query, the function returns a <code><a href="tibble.html#topic+tibble">tibble</a></code>
with one row by cadastral reference, including the following columns:
</p>

<ul>
<li> <p><code>xcoord</code>, <code>ycoord</code>: X and Y coordinates in the specified SRS.
</p>
</li>
<li> <p><code>refcat</code>: Cadastral Reference.
</p>
</li>
<li> <p><code>address</code>: Address as it is recorded on the Cadastre.
</p>
</li>
<li><p> Rest of fields: Check the API Docs.
</p>
</li></ul>



<h3>Value</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble</a></code>. See <strong>Details</strong>
</p>


<h3>References</h3>

<p><a href="https://ovc.catastro.meh.es/ovcservweb/ovcswlocalizacionrc/ovccoordenadas.asmx?op=Consulta_CPMRC">Consulta CPMRC</a>.
</p>


<h3>See Also</h3>

<p><a href="#topic+catr_srs_values">catr_srs_values</a>, <code>vignette("ovcservice", package = "CatastRo")</code>
</p>
<p>OVCCoordenadas API:
<code><a href="#topic+catr_ovc_get_rccoor">catr_ovc_get_rccoor</a>()</code>,
<code><a href="#topic+catr_ovc_get_rccoor_distancia">catr_ovc_get_rccoor_distancia</a>()</code>,
<code><a href="#topic+catr_srs_values">catr_srs_values</a></code>
</p>
<p>Other cadastral references: 
<code><a href="#topic+catr_ovc_get_rccoor">catr_ovc_get_rccoor</a>()</code>,
<code><a href="#topic+catr_ovc_get_rccoor_distancia">catr_ovc_get_rccoor_distancia</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>


# using all the arguments
catr_ovc_get_cpmrc("13077A01800039",
  4230,
  province = "CIUDAD REAL",
  municipality = "SANTA CRUZ DE MUDELA"
)

# only the cadastral reference
catr_ovc_get_cpmrc("9872023VH5797S")


</code></pre>

<hr>
<h2 id='catr_ovc_get_rccoor'>OVCCoordenadas: Reverse geocode a cadastral reference</h2><span id='topic+catr_ovc_get_rccoor'></span>

<h3>Description</h3>

<p>Implementation of the OVCCoordenadas service
<a href="https://ovc.catastro.meh.es/ovcservweb/ovcswlocalizacionrc/ovccoordenadas.asmx?op=Consulta_RCCOOR">Consulta RCCOOR</a>.
</p>
<p>Return the cadastral reference found of a set of specific coordinates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catr_ovc_get_rccoor(lat, lon, srs = 4326, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catr_ovc_get_rccoor_+3A_lat">lat</code></td>
<td>
<p>Latitude to use on the query. It should be specified in the same
in the CRS/SRS <code>specified</code> by <code>srs</code>.</p>
</td></tr>
<tr><td><code id="catr_ovc_get_rccoor_+3A_lon">lon</code></td>
<td>
<p>Longitude to use on the query. It should be specified in the same
in the CRS/SRS <code>specified</code> by <code>srs</code>.</p>
</td></tr>
<tr><td><code id="catr_ovc_get_rccoor_+3A_srs">srs</code></td>
<td>
<p>SRS/CRS to use on the query. To check the admitted values check
<a href="#topic+catr_srs_values">catr_srs_values</a>, specifically the <code>ovc_service</code> column.</p>
</td></tr>
<tr><td><code id="catr_ovc_get_rccoor_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When the API does not provide any result, the function returns a
<code><a href="tibble.html#topic+tibble">tibble</a></code> with the input parameters only.
</p>
<p>On a successful query, the function returns a <code><a href="tibble.html#topic+tibble">tibble</a></code> with
one row by cadastral reference, including the following columns:
</p>

<ul>
<li> <p><code>geo.xcen</code>, <code>geo.ycen</code>, <code>geo.srs</code>: Input parameters of the query.
</p>
</li>
<li> <p><code>refcat</code>: Cadastral Reference.
</p>
</li>
<li> <p><code>address</code>: Address as it is recorded on the Cadastre.
</p>
</li>
<li><p> Rest of fields: Check the API Docs.
</p>
</li></ul>



<h3>Value</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble</a></code>. See <strong>Details</strong>
</p>


<h3>References</h3>

<p><a href="https://ovc.catastro.meh.es/ovcservweb/ovcswlocalizacionrc/ovccoordenadas.asmx?op=Consulta_RCCOOR">Consulta RCCOOR</a>.
</p>


<h3>See Also</h3>

<p><a href="#topic+catr_srs_values">catr_srs_values</a>, <code>vignette("ovcservice", package = "CatastRo")</code>
</p>
<p>OVCCoordenadas API:
<code><a href="#topic+catr_ovc_get_cpmrc">catr_ovc_get_cpmrc</a>()</code>,
<code><a href="#topic+catr_ovc_get_rccoor_distancia">catr_ovc_get_rccoor_distancia</a>()</code>,
<code><a href="#topic+catr_srs_values">catr_srs_values</a></code>
</p>
<p>Other cadastral references: 
<code><a href="#topic+catr_ovc_get_cpmrc">catr_ovc_get_cpmrc</a>()</code>,
<code><a href="#topic+catr_ovc_get_rccoor_distancia">catr_ovc_get_rccoor_distancia</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

catr_ovc_get_rccoor(
  lat = 38.6196566583596,
  lon = -3.45624183836806,
  srs = 4326
)


</code></pre>

<hr>
<h2 id='catr_ovc_get_rccoor_distancia'>OVCCoordenadas: Reverse geocode cadastral references on a region</h2><span id='topic+catr_ovc_get_rccoor_distancia'></span>

<h3>Description</h3>

<p>Implementation of the OVCCoordenadas service
<a href="http://ovc.catastro.meh.es/ovcservweb/ovcswlocalizacionrc/ovccoordenadas.asmx?op=Consulta_RCCOOR_Distancia">Consulta RCCOOR Distancia</a>.
</p>
<p>Return the cadastral reference found on a set of coordinates. If no cadastral
references are found, the API returns a list of the cadastral references
found on an area of 50 square meters around the requested coordinates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catr_ovc_get_rccoor_distancia(lat, lon, srs = 4326, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catr_ovc_get_rccoor_distancia_+3A_lat">lat</code></td>
<td>
<p>Latitude to use on the query. It should be specified in the same
in the CRS/SRS <code>specified</code> by <code>srs</code>.</p>
</td></tr>
<tr><td><code id="catr_ovc_get_rccoor_distancia_+3A_lon">lon</code></td>
<td>
<p>Longitude to use on the query. It should be specified in the same
in the CRS/SRS <code>specified</code> by <code>srs</code>.</p>
</td></tr>
<tr><td><code id="catr_ovc_get_rccoor_distancia_+3A_srs">srs</code></td>
<td>
<p>SRS/CRS to use on the query. To check the admitted values check
<a href="#topic+catr_srs_values">catr_srs_values</a>, specifically the <code>ovc_service</code> column.</p>
</td></tr>
<tr><td><code id="catr_ovc_get_rccoor_distancia_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When the API does not provide any result, the function returns a
<code><a href="tibble.html#topic+tibble">tibble</a></code> with the input parameters only.
</p>
<p>On a successful query, the function returns a <code><a href="tibble.html#topic+tibble">tibble</a></code> with
one row by cadastral reference, including the following columns:
</p>

<ul>
<li> <p><code>geo.xcen</code>, <code>geo.ycen</code>, <code>geo.srs</code>: Input parameters of the query.
</p>
</li>
<li> <p><code>refcat</code>: Cadastral reference.
</p>
</li>
<li> <p><code>address</code>: Address as it is recorded on the Cadastre.
</p>
</li>
<li> <p><code>cmun_ine</code>: Municipality code as registered on the INE (National
Statistics Institute).
</p>
</li>
<li><p> Rest of fields: Check the API Docs.
</p>
</li></ul>



<h3>Value</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble</a></code>. See <strong>Details</strong>
</p>


<h3>References</h3>

<p><a href="http://ovc.catastro.meh.es/ovcservweb/ovcswlocalizacionrc/ovccoordenadas.asmx?op=Consulta_RCCOOR_Distancia">Consulta RCCOOR Distancia</a>.
</p>


<h3>See Also</h3>

<p><a href="#topic+catr_srs_values">catr_srs_values</a>, <code>vignette("ovcservice", package = "CatastRo")</code>
</p>
<p>OVCCoordenadas API:
<code><a href="#topic+catr_ovc_get_cpmrc">catr_ovc_get_cpmrc</a>()</code>,
<code><a href="#topic+catr_ovc_get_rccoor">catr_ovc_get_rccoor</a>()</code>,
<code><a href="#topic+catr_srs_values">catr_srs_values</a></code>
</p>
<p>Other cadastral references: 
<code><a href="#topic+catr_ovc_get_cpmrc">catr_ovc_get_cpmrc</a>()</code>,
<code><a href="#topic+catr_ovc_get_rccoor">catr_ovc_get_rccoor</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

catr_ovc_get_rccoor_distancia(
  lat = 40.963200,
  lon = -5.671420,
  srs = 4326
)


</code></pre>

<hr>
<h2 id='catr_set_cache_dir'>Set your <a href="https://CRAN.R-project.org/package=CatastRo"><span class="pkg">CatastRo</span></a> cache dir</h2><span id='topic+catr_set_cache_dir'></span><span id='topic+catr_detect_cache_dir'></span>

<h3>Description</h3>

<p><code><a href="#topic+catr_set_cache_dir">catr_set_cache_dir()</a></code> will store your <code>cache_dir</code> path on your local machine
and would load it for future sessions.
</p>
<p>Alternatively, you can store the <code>cache_dir</code> manually with the following
options:
</p>

<ul>
<li><p> Run <code>Sys.setenv(CATASTROESP_CACHE_DIR = "cache_dir")</code>. You would need to
run this command on each session (Similar to <code>install = FALSE</code>).
</p>
</li>
<li><p> Write this line on your .Renviron file:
<code>CATASTROESP_CACHE_DIR = "value_for_cache_dir"</code> (same behavior than
<code>install = TRUE</code>). This would store your <code>cache_dir</code> permanently.
</p>
</li></ul>

<p><code><a href="#topic+catr_detect_cache_dir">catr_detect_cache_dir()</a></code> detects and returns the path to your current
<code>cache_dir</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catr_set_cache_dir(
  cache_dir = NULL,
  overwrite = FALSE,
  install = FALSE,
  verbose = TRUE
)

catr_detect_cache_dir(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catr_set_cache_dir_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. On <code>NULL</code> value (the default)
the function would store the cached files on the
<code><a href="base.html#topic+tempfile">tempdir</a></code>.</p>
</td></tr>
<tr><td><code id="catr_set_cache_dir_+3A_overwrite">overwrite</code></td>
<td>
<p>If this is set to <code>TRUE</code>, it will overwrite an existing
<code>CATASTROESP_CACHE_DIR</code> that you already have in local machine.</p>
</td></tr>
<tr><td><code id="catr_set_cache_dir_+3A_install">install</code></td>
<td>
<p>if <code>TRUE</code>, will install the key in your local machine for
use in future sessions.  Defaults to <code>FALSE.</code> If <code>cache_dir</code> is <code>FALSE</code>
this parameter is set to <code>FALSE</code> automatically.</p>
</td></tr>
<tr><td><code id="catr_set_cache_dir_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="catr_set_cache_dir_+3A_...">...</code></td>
<td>
<p>Ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="#topic+catr_set_cache_dir">catr_set_cache_dir()</a></code> is called for its side effects, and returns an
(invisible) character with the path to your <code>cache_dir</code>.
</p>
<p><code><a href="#topic+catr_detect_cache_dir">catr_detect_cache_dir()</a></code> returns the path to the <code>cache_dir</code> used in this
session
</p>


<h3>About caching</h3>

<p>Sometimes cached files may be corrupt. On that case, try re-downloading
the data setting <code>update_cache = TRUE</code>.
</p>
<p>If you experience any problem on download, try to download the
corresponding file by any other method and save it on your
<code>cache_dir</code>. Use the option <code>verbose = TRUE</code> for debugging the API query.
</p>


<h3>See Also</h3>

<p><code><a href="rappdirs.html#topic+user_data_dir">rappdirs::user_config_dir()</a></code>
</p>
<p>Other cache utilities: 
<code><a href="#topic+catr_clear_cache">catr_clear_cache</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Don't run this! It would modify your current state
## Not run: 
catr_set_cache_dir(verbose = TRUE)

## End(Not run)


catr_detect_cache_dir()

</code></pre>

<hr>
<h2 id='catr_srs_values'>Reference SRS codes for <a href="https://CRAN.R-project.org/package=CatastRo"><span class="pkg">CatastRo</span></a> APIs</h2><span id='topic+catr_srs_values'></span>

<h3>Description</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble</a></code> including the valid SRS (also known as CRS)
values that may be used on each API service. The values are provided
as <a href="https://en.wikipedia.org/wiki/EPSG_Geodetic_Parameter_Dataset">EPSG codes</a>.
</p>


<h3>Format</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble</a></code> with 16 rows
and columns:
</p>

<dl>
<dt>SRS</dt><dd><p>Spatial Reference System (CRS) value, identified by the
corresponding
<a href="https://en.wikipedia.org/wiki/EPSG_Geodetic_Parameter_Dataset">EPSG</a>
code.</p>
</dd>
<dt>Description</dt><dd><p>Description of the SRS/EPSG code.</p>
</dd>
<dt>ovc_service</dt><dd><p>Logical. Is this code valid on OVC services?</p>
</dd>
<dt>wfs_service</dt><dd><p>Logical. Is this code valid on INSPIRE WFS services?</p>
</dd>
</dl>



<h3>Details</h3>

<p>Table: Content of <a href="#topic+catr_srs_values">catr_srs_values</a></p>

<table>
<tr>
 <td style="text-align: left;">
   <strong>SRS</strong> </td><td style="text-align: left;"> <strong>Description</strong> </td><td style="text-align: left;"> <strong>ovc_service</strong> </td><td style="text-align: left;"> <strong>wfs_service</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>3785</code> </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;Web Mercator&#8288;</code> </td><td style="text-align: left;"> <code>FALSE</code> </td><td style="text-align: left;"> <code>TRUE</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>3857</code> </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;Web Mercator&#8288;</code> </td><td style="text-align: left;"> <code>FALSE</code> </td><td style="text-align: left;"> <code>TRUE</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>4230</code> </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;Geográficas en ED 50&#8288;</code> </td><td style="text-align: left;"> <code>TRUE</code> </td><td style="text-align: left;"> <code>FALSE</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>4258</code> </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;Geográficas en ETRS89&#8288;</code> </td><td style="text-align: left;"> <code>TRUE</code> </td><td style="text-align: left;"> <code>TRUE</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>4326</code> </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;Geográficas en WGS 80&#8288;</code> </td><td style="text-align: left;"> <code>TRUE</code> </td><td style="text-align: left;"> <code>TRUE</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>23029</code> </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;UTM huso 29N en ED50&#8288;</code> </td><td style="text-align: left;"> <code>TRUE</code> </td><td style="text-align: left;"> <code>FALSE</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>23030</code> </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;UTM huso 30N en ED50&#8288;</code> </td><td style="text-align: left;"> <code>TRUE</code> </td><td style="text-align: left;"> <code>FALSE</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>23031</code> </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;UTM huso 31N en ED50&#8288;</code> </td><td style="text-align: left;"> <code>TRUE</code> </td><td style="text-align: left;"> <code>FALSE</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>25829</code> </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;UTM huso 29N en ETRS89&#8288;</code> </td><td style="text-align: left;"> <code>TRUE</code> </td><td style="text-align: left;"> <code>TRUE</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>25830</code> </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;UTM huso 30N en ETRS89&#8288;</code> </td><td style="text-align: left;"> <code>TRUE</code> </td><td style="text-align: left;"> <code>TRUE</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>25831</code> </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;UTM huso 31N en ETRS89&#8288;</code> </td><td style="text-align: left;"> <code>TRUE</code> </td><td style="text-align: left;"> <code>TRUE</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>32627</code> </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;UTM huso 27N en WGS 84&#8288;</code> </td><td style="text-align: left;"> <code>TRUE</code> </td><td style="text-align: left;"> <code>FALSE</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>32628</code> </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;UTM huso 28N en WGS 84&#8288;</code> </td><td style="text-align: left;"> <code>TRUE</code> </td><td style="text-align: left;"> <code>FALSE</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>32629</code> </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;UTM huso 29N en WGS 84&#8288;</code> </td><td style="text-align: left;"> <code>TRUE</code> </td><td style="text-align: left;"> <code>FALSE</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>32630</code> </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;UTM huso 30N en WGS 84&#8288;</code> </td><td style="text-align: left;"> <code>TRUE</code> </td><td style="text-align: left;"> <code>FALSE</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>32631</code> </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;UTM huso 31N en WGS 84&#8288;</code> </td><td style="text-align: left;"> <code>TRUE</code> </td><td style="text-align: left;"> <code>FALSE</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>References</h3>


<ul>
<li> <p><a href="https://ovc.catastro.meh.es/ovcservweb/ovcswlocalizacionrc/ovccoordenadas.asmx">OVCCoordenadas</a>.
</p>
</li>
<li> <p><a href="https://www.catastro.minhap.es/webinspire/index.html">INSPIRE WFS Service</a>.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="sf.html#topic+st_crs">sf::st_crs()</a></code>.
</p>
<p>Other databases: 
<code><a href="#topic+catr_atom_get_address_db_all">catr_atom_get_address_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings_db_all">catr_atom_get_buildings_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels_db_all">catr_atom_get_parcels_db_all</a>()</code>,
<code><a href="#topic+catr_atom_search_munic">catr_atom_search_munic</a>()</code>
</p>
<p>Other INSPIRE WFS services:
<code><a href="#topic+catr_wfs_get_address_bbox">catr_wfs_get_address_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_buildings_bbox">catr_wfs_get_buildings_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_parcels_bbox">catr_wfs_get_parcels_bbox</a>()</code>
</p>
<p>OVCCoordenadas API:
<code><a href="#topic+catr_ovc_get_cpmrc">catr_ovc_get_cpmrc</a>()</code>,
<code><a href="#topic+catr_ovc_get_rccoor">catr_ovc_get_rccoor</a>()</code>,
<code><a href="#topic+catr_ovc_get_rccoor_distancia">catr_ovc_get_rccoor_distancia</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("catr_srs_values")

# OVC valid codes
library(dplyr)

catr_srs_values %&gt;% filter(ovc_service == TRUE)

# WFS valid codes

catr_srs_values %&gt;% filter(wfs_service == TRUE)

# Use with sf::st_crs()

catr_srs_values %&gt;%
  filter(wfs_service == TRUE &amp; ovc_service == TRUE) %&gt;%
  print() %&gt;%
  # First value
  slice_head(n = 1) %&gt;%
  pull(SRS) %&gt;%
  # As crs
  sf::st_crs(.)
</code></pre>

<hr>
<h2 id='catr_wfs_get_address_bbox'>WFS INSPIRE: Download addresses</h2><span id='topic+catr_wfs_get_address_bbox'></span><span id='topic+catr_wfs_get_address_codvia'></span><span id='topic+catr_wfs_get_address_rc'></span><span id='topic+catr_wfs_get_address_postalcode'></span>

<h3>Description</h3>

<p>Get the spatial data of addresses The WFS Service allows to perform
several types of queries:
</p>

<ul>
<li><p> By bounding box: Implemented on <code>catr_wfs_get_address_bbox()</code>.
Extract objects included on the bounding box provided. See <strong>Details</strong>.
</p>
</li></ul>


<ul>
<li><p> By street code: Implemented on <code>catr_wfs_get_address_codvia()</code>. Extract
objects of specific addresses.
</p>
</li></ul>


<ul>
<li><p> By cadastral reference: Implemented on <code>catr_wfs_get_address_rc()</code>. Extract
objects of specific cadastral references
</p>
</li></ul>


<ul>
<li><p> By postal codes: Implemented on <code>catr_wfs_get_address_postalcode()</code>.
Extract objects of specific cadastral references
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>catr_wfs_get_address_bbox(x, srs, verbose = FALSE)

catr_wfs_get_address_codvia(codvia, del, mun, srs = NULL, verbose = FALSE)

catr_wfs_get_address_rc(rc, srs = NULL, verbose = FALSE)

catr_wfs_get_address_postalcode(postalcode, srs = NULL, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catr_wfs_get_address_bbox_+3A_x">x</code></td>
<td>
<p>See <strong>Details</strong>. It could be:
</p>

<ul>
<li><p> A numeric vector of length 4 with the coordinates that defines
the bounding box: <code>c(xmin, ymin, xmax, ymax)</code>
</p>
</li>
<li><p> A <code>sf/sfc</code> object, as provided by the <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> package.
</p>
</li></ul>
</td></tr>
<tr><td><code id="catr_wfs_get_address_bbox_+3A_srs">srs</code></td>
<td>
<p>SRS/CRS to use on the query. To check the admitted values check
<a href="#topic+catr_srs_values">catr_srs_values</a>, specifically the <code>wfs_service</code> column. See <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="catr_wfs_get_address_bbox_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="catr_wfs_get_address_bbox_+3A_codvia">codvia</code></td>
<td>
<p>Cadastral street code.</p>
</td></tr>
<tr><td><code id="catr_wfs_get_address_bbox_+3A_del">del</code></td>
<td>
<p>Cadastral office code.</p>
</td></tr>
<tr><td><code id="catr_wfs_get_address_bbox_+3A_mun">mun</code></td>
<td>
<p>Cadastral municipality code.</p>
</td></tr>
<tr><td><code id="catr_wfs_get_address_bbox_+3A_rc">rc</code></td>
<td>
<p>The cadastral reference to be extracted.</p>
</td></tr>
<tr><td><code id="catr_wfs_get_address_bbox_+3A_postalcode">postalcode</code></td>
<td>
<p>Postal code.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When <code>x</code> is a numeric vector, make sure that the <code>srs</code> matches the
coordinate values. Additionally, when the <code>srs</code> correspond to a geographic
reference system (4326, 4258), the function queries the bounding box on
<a href="https://epsg.io/3857">EPSG:3857</a> - Web Mercator, to overcome
a potential bug on the API side.
</p>
<p>When <code>x</code> is a <code><a href="sf.html#topic+sf">sf</a></code> object, the value <code>srs</code> is ignored. In
this case, the bounding box of the <code><a href="sf.html#topic+sf">sf</a></code> object would be
used for the query (see <code><a href="sf.html#topic+st_bbox">sf::st_bbox()</a></code>). The query is performed using
<a href="https://epsg.io/3857">EPSG:3857</a> (Web Mercator). The result is provided
always in the SRS of the <code><a href="sf.html#topic+sf">sf</a></code> object provided as input.
</p>


<h3>Value</h3>

<p>A <code><a href="sf.html#topic+sf">sf</a></code> object.
</p>


<h3>API Limits</h3>

<p>The API service is limited to a bounding box of 4km2 and a maximum of 5.000
elements.
</p>


<h3>References</h3>

<p><a href="https://www.catastro.minhap.es/webinspire/documentos/inspire-ad-WFS.pdf">API Documentation</a>.
</p>
<p><a href="https://www.catastro.minhap.es/webinspire/index.html">INSPIRE Services for Cadastral Cartography</a>.
</p>


<h3>See Also</h3>

<p><code><a href="sf.html#topic+st_bbox">sf::st_bbox()</a></code>
</p>
<p>INSPIRE API functions:
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_address_db_all">catr_atom_get_address_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings_db_all">catr_atom_get_buildings_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels_db_all">catr_atom_get_parcels_db_all</a>()</code>,
<code><a href="#topic+catr_wfs_get_buildings_bbox">catr_wfs_get_buildings_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_parcels_bbox">catr_wfs_get_parcels_bbox</a>()</code>,
<code><a href="#topic+catr_wms_get_layer">catr_wms_get_layer</a>()</code>
</p>
<p>Other INSPIRE WFS services:
<code><a href="#topic+catr_srs_values">catr_srs_values</a></code>,
<code><a href="#topic+catr_wfs_get_buildings_bbox">catr_wfs_get_buildings_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_parcels_bbox">catr_wfs_get_parcels_bbox</a>()</code>
</p>
<p>Other addresses: 
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_address_db_all">catr_atom_get_address_db_all</a>()</code>
</p>
<p>Other spatial: 
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_wfs_get_buildings_bbox">catr_wfs_get_buildings_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_parcels_bbox">catr_wfs_get_parcels_bbox</a>()</code>,
<code><a href="#topic+catr_wms_get_layer">catr_wms_get_layer</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

ad &lt;- catr_wfs_get_address_bbox(
  c(
    233673, 4015968, 233761, 4016008
  ),
  srs = 25830
)

library(ggplot2)

ggplot(ad) +
  geom_sf()


</code></pre>

<hr>
<h2 id='catr_wfs_get_buildings_bbox'>WFS INSPIRE: Download buildings</h2><span id='topic+catr_wfs_get_buildings_bbox'></span><span id='topic+catr_wfs_get_buildings_rc'></span>

<h3>Description</h3>

<p>Get the spatial data of buildings. The WFS Service allows to perform
two types of queries:
</p>

<ul>
<li><p> By bounding box: Implemented on <code>catr_wfs_get_buildings_bbox()</code>.
Extract objects included on the bounding box provided. See <strong>Details</strong>.
</p>
</li></ul>


<ul>
<li><p> By cadastral reference: Implemented on <code>catr_wfs_get_buildings_rc()</code>.
Extract objects of specific cadastral references.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>catr_wfs_get_buildings_bbox(x, what = "building", srs, verbose = FALSE)

catr_wfs_get_buildings_rc(rc, what = "building", srs = NULL, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catr_wfs_get_buildings_bbox_+3A_x">x</code></td>
<td>
<p>See <strong>Details</strong>. It could be:
</p>

<ul>
<li><p> A numeric vector of length 4 with the coordinates that defines
the bounding box: <code>c(xmin, ymin, xmax, ymax)</code>
</p>
</li>
<li><p> A <code>sf/sfc</code> object, as provided by the <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> package.
</p>
</li></ul>
</td></tr>
<tr><td><code id="catr_wfs_get_buildings_bbox_+3A_what">what</code></td>
<td>
<p>Information to load. It could be:
</p>

<ul>
<li> <p><code>"building"</code> for buildings.
</p>
</li>
<li> <p><code>"buildingpart"</code> for parts of a building.
</p>
</li>
<li> <p><code>"other"</code> for others elements, as swimming pools, etc.
</p>
</li></ul>
</td></tr>
<tr><td><code id="catr_wfs_get_buildings_bbox_+3A_srs">srs</code></td>
<td>
<p>SRS/CRS to use on the query. To check the admitted values check
<a href="#topic+catr_srs_values">catr_srs_values</a>, specifically the <code>wfs_service</code> column. See <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="catr_wfs_get_buildings_bbox_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="catr_wfs_get_buildings_bbox_+3A_rc">rc</code></td>
<td>
<p>The cadastral reference to be extracted.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When <code>x</code> is a numeric vector, make sure that the <code>srs</code> matches the
coordinate values. Additionally, when the <code>srs</code> correspond to a geographic
reference system (4326, 4258), the function queries the bounding box on
<a href="https://epsg.io/3857">EPSG:3857</a> - Web Mercator, to overcome
a potential bug on the API side. The result is provided always in the SRS
provided in <code>srs</code>.
</p>
<p>When <code>x</code> is a <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> object, the value <code>srs</code> is ignored. The query is
performed using <a href="https://epsg.io/3857">EPSG:3857</a> (Web Mercator) and the
spatial object is projected back to the SRS of the initial object.
</p>


<h3>Value</h3>

<p>A <code><a href="sf.html#topic+sf">sf</a></code> object.
</p>


<h3>API Limits</h3>

<p>The API service is limited to a bounding box of 4km2 and a maximum of 5.000
elements.
</p>


<h3>References</h3>

<p><a href="https://www.catastro.minhap.es/webinspire/documentos/inspire-ad-WFS.pdf">API Documentation</a>.
</p>
<p><a href="https://www.catastro.minhap.es/webinspire/index.html">INSPIRE Services for Cadastral Cartography</a>.
</p>


<h3>See Also</h3>

<p><code><a href="sf.html#topic+st_bbox">sf::st_bbox()</a></code>
</p>
<p>INSPIRE API functions:
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_address_db_all">catr_atom_get_address_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings_db_all">catr_atom_get_buildings_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels_db_all">catr_atom_get_parcels_db_all</a>()</code>,
<code><a href="#topic+catr_wfs_get_address_bbox">catr_wfs_get_address_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_parcels_bbox">catr_wfs_get_parcels_bbox</a>()</code>,
<code><a href="#topic+catr_wms_get_layer">catr_wms_get_layer</a>()</code>
</p>
<p>Other INSPIRE WFS services:
<code><a href="#topic+catr_srs_values">catr_srs_values</a></code>,
<code><a href="#topic+catr_wfs_get_address_bbox">catr_wfs_get_address_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_parcels_bbox">catr_wfs_get_parcels_bbox</a>()</code>
</p>
<p>Other buildings: 
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings_db_all">catr_atom_get_buildings_db_all</a>()</code>
</p>
<p>Other spatial: 
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_wfs_get_address_bbox">catr_wfs_get_address_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_parcels_bbox">catr_wfs_get_parcels_bbox</a>()</code>,
<code><a href="#topic+catr_wms_get_layer">catr_wms_get_layer</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Using bbox
building &lt;- catr_wfs_get_buildings_bbox(
  c(
    376550,
    4545424,
    376600,
    4545474
  ),
  srs = 25830
)
library(ggplot2)
ggplot(building) +
  geom_sf() +
  labs(title = "Search using bbox")

# Using rc
rc &lt;- catr_wfs_get_buildings_rc("6656601UL7465N")
library(ggplot2)
ggplot(rc) +
  geom_sf() +
  labs(title = "Search using rc")


</code></pre>

<hr>
<h2 id='catr_wfs_get_parcels_bbox'>WFS INSPIRE: Download cadastral parcels</h2><span id='topic+catr_wfs_get_parcels_bbox'></span><span id='topic+catr_wfs_get_parcels_zoning'></span><span id='topic+catr_wfs_get_parcels_parcel'></span><span id='topic+catr_wfs_get_parcels_neigh_parcel'></span><span id='topic+catr_wfs_get_parcels_parcel_zoning'></span>

<h3>Description</h3>

<p>Get the spatial data of cadastral parcels and zones. The WFS Service allows
to perform several types of queries:
</p>

<ul>
<li><p> By bounding box: Implemented on <code>catr_wfs_get_parcels_bbox()</code>. Extract
objects included on the bounding box provided. See <strong>Details</strong>.
</p>
</li></ul>


<ul>
<li><p> By zoning: Implemented on <code>catr_wfs_get_parcels_zoning()</code>. Extract
objects of a specific cadastral zone.
</p>
</li></ul>


<ul>
<li><p> By cadastral parcel: Implemented on <code>catr_wfs_get_parcels_parcel()</code>.
Extract cadastral parcels of a specific cadastral reference.
</p>
</li></ul>


<ul>
<li><p> Neighbor cadastral parcels: Implemented on
<code>catr_wfs_get_parcels_neigh_parcel()</code>. Extract neighbor cadastral parcels
of a specific cadastral reference.
</p>
</li></ul>


<ul>
<li><p> Cadastral parcels by zoning: Implemented on
<code>catr_wfs_get_parcels_parcel_zoning()</code>. Extract cadastral parcels of a
specific cadastral zone.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>catr_wfs_get_parcels_bbox(x, what = "parcel", srs, verbose = FALSE)

catr_wfs_get_parcels_zoning(cod_zona, srs = NULL, verbose = FALSE)

catr_wfs_get_parcels_parcel(rc, srs = NULL, verbose = FALSE)

catr_wfs_get_parcels_neigh_parcel(rc, srs = NULL, verbose = FALSE)

catr_wfs_get_parcels_parcel_zoning(cod_zona, srs = NULL, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catr_wfs_get_parcels_bbox_+3A_x">x</code></td>
<td>
<p>See <strong>Details</strong>. It could be:
</p>

<ul>
<li><p> A numeric vector of length 4 with the coordinates that defines
the bounding box: <code>c(xmin, ymin, xmax, ymax)</code>
</p>
</li>
<li><p> A <code>sf/sfc</code> object, as provided by the <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> package.
</p>
</li></ul>
</td></tr>
<tr><td><code id="catr_wfs_get_parcels_bbox_+3A_what">what</code></td>
<td>
<p>Information to load. It could be <code>"parcel"</code> for cadastral parcels
or <code>"zoning"</code> for cadastral zoning.</p>
</td></tr>
<tr><td><code id="catr_wfs_get_parcels_bbox_+3A_srs">srs</code></td>
<td>
<p>SRS/CRS to use on the query. To check the admitted values check
<a href="#topic+catr_srs_values">catr_srs_values</a>, specifically the <code>wfs_service</code> column. See <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="catr_wfs_get_parcels_bbox_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="catr_wfs_get_parcels_bbox_+3A_cod_zona">cod_zona</code></td>
<td>
<p>Cadastral zone code.</p>
</td></tr>
<tr><td><code id="catr_wfs_get_parcels_bbox_+3A_rc">rc</code></td>
<td>
<p>The cadastral reference to be extracted.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When <code>x</code> is a numeric vector, make sure that the <code>srs</code> matches the
coordinate values. Additionally, when the <code>srs</code> correspond to a geographic
reference system (4326, 4258), the function queries the bounding box on
<a href="https://epsg.io/3857">EPSG:3857</a> - Web Mercator, to overcome
a potential bug on the API side. The result is provided always in the SRS
provided in <code>srs</code>.
</p>
<p>When <code>x</code> is a <code><a href="sf.html#topic+sf">sf</a></code> object, the value <code>srs</code> is ignored. The
query is performed using <a href="https://epsg.io/3857">EPSG:3857</a> (Web Mercator)
and the spatial object is projected back to the SRS of the initial object.
</p>


<h3>Value</h3>

<p>A <code><a href="sf.html#topic+sf">sf</a></code> object.
</p>


<h3>API Limits</h3>

<p>The API service is limited to the following constrains:
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;"parcel&#8288;</code>: Bounding box of 1km2 and a maximum of 500. elements.
</p>
</li>
<li> <p><code>"zoning"</code>: Bounding box of 25km2 and a maximum of 500 elements.
</p>
</li></ul>



<h3>References</h3>

<p><a href="https://www.catastro.minhap.es/webinspire/documentos/inspire-ad-WFS.pdf">API Documentation</a>.
</p>
<p><a href="https://www.catastro.minhap.es/webinspire/index.html">INSPIRE Services for Cadastral Cartography</a>.
</p>


<h3>See Also</h3>

<p><code><a href="sf.html#topic+st_bbox">sf::st_bbox()</a></code>
</p>
<p>INSPIRE API functions:
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_address_db_all">catr_atom_get_address_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings_db_all">catr_atom_get_buildings_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels_db_all">catr_atom_get_parcels_db_all</a>()</code>,
<code><a href="#topic+catr_wfs_get_address_bbox">catr_wfs_get_address_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_buildings_bbox">catr_wfs_get_buildings_bbox</a>()</code>,
<code><a href="#topic+catr_wms_get_layer">catr_wms_get_layer</a>()</code>
</p>
<p>Other INSPIRE WFS services:
<code><a href="#topic+catr_srs_values">catr_srs_values</a></code>,
<code><a href="#topic+catr_wfs_get_address_bbox">catr_wfs_get_address_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_buildings_bbox">catr_wfs_get_buildings_bbox</a>()</code>
</p>
<p>Other parcels: 
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels_db_all">catr_atom_get_parcels_db_all</a>()</code>
</p>
<p>Other spatial: 
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_wfs_get_address_bbox">catr_wfs_get_address_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_buildings_bbox">catr_wfs_get_buildings_bbox</a>()</code>,
<code><a href="#topic+catr_wms_get_layer">catr_wms_get_layer</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

cp &lt;- catr_wfs_get_parcels_bbox(
  c(
    233673, 4015968, 233761, 4016008
  ),
  srs = 25830
)

library(ggplot2)

ggplot(cp) +
  geom_sf()


</code></pre>

<hr>
<h2 id='catr_wms_get_layer'>WMS INSPIRE: Download map images</h2><span id='topic+catr_wms_get_layer'></span>

<h3>Description</h3>

<p>Get geotagged images from the Spanish Cadastre. This function is a wrapper of
<code><a href="mapSpain.html#topic+esp_getTiles">mapSpain::esp_getTiles()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catr_wms_get_layer(
  x,
  srs,
  what = c("building", "buildingpart", "parcel", "zoning", "address", "admboundary",
    "admunit"),
  styles = "default",
  update_cache = FALSE,
  cache_dir = NULL,
  verbose = FALSE,
  crop = FALSE,
  options = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catr_wms_get_layer_+3A_x">x</code></td>
<td>
<p>See <strong>Details</strong>. It could be:
</p>

<ul>
<li><p> A numeric vector of length 4 with the coordinates that defines
the bounding box: <code>c(xmin, ymin, xmax, ymax)</code>
</p>
</li>
<li><p> A <code>sf/sfc</code> object, as provided by the <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> package.
</p>
</li></ul>
</td></tr>
<tr><td><code id="catr_wms_get_layer_+3A_srs">srs</code></td>
<td>
<p>SRS/CRS to use on the query. To check the admitted values check
<a href="#topic+catr_srs_values">catr_srs_values</a>, specifically the <code>wfs_service</code> column. See <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="catr_wms_get_layer_+3A_what">what</code></td>
<td>
<p>Layer to be extracted, see <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="catr_wms_get_layer_+3A_styles">styles</code></td>
<td>
<p>Style of the WMS layer. See <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="catr_wms_get_layer_+3A_update_cache">update_cache</code></td>
<td>
<p>A logical whether to update cache. Default is <code>FALSE</code>.
When set to <code>TRUE</code> it would force a fresh download of the source file.</p>
</td></tr>
<tr><td><code id="catr_wms_get_layer_+3A_cache_dir">cache_dir</code></td>
<td>
<p>A path to a cache directory. On <code>NULL</code> value (the default)
the function would store the cached files on the
<code><a href="base.html#topic+tempfile">tempdir</a></code>.</p>
</td></tr>
<tr><td><code id="catr_wms_get_layer_+3A_verbose">verbose</code></td>
<td>
<p>Logical, displays information. Useful for debugging,
default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="catr_wms_get_layer_+3A_crop">crop</code></td>
<td>
<p><code>TRUE</code> if results should be cropped to the specified <code>x</code> extent,
<code>FALSE</code> otherwise. If <code>x</code> is an <a href="https://CRAN.R-project.org/package=sf"><span class="pkg">sf</span></a> object with one <code>POINT</code>, crop
is set to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="catr_wms_get_layer_+3A_options">options</code></td>
<td>
<p>A named list containing additional options to pass to the
query.</p>
</td></tr>
<tr><td><code id="catr_wms_get_layer_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="mapSpain.html#topic+esp_getTiles">mapSpain::esp_getTiles</a></code>
</p>

<dl>
<dt><code>res</code></dt><dd><p>Resolution (in pixels) of the final tile. Only valid for WMS.</p>
</dd>
<dt><code>bbox_expand</code></dt><dd><p>A numeric value that indicates the expansion percentage
of the bounding box of <code>x</code>.</p>
</dd>
<dt><code>transparent</code></dt><dd><p>Logical. Provides transparent background, if supported.
Depends on the selected provider on <code>type</code>.</p>
</dd>
<dt><code>mask</code></dt><dd><p><code>TRUE</code> if the result should be masked to <code>x</code>.</p>
</dd>
</dl>
</td></tr>
</table>


<h3>Details</h3>

<p>When <code>x</code> is a numeric vector, make sure that the <code>srs</code> matches the
coordinate values. When <code>x</code> is a <code><a href="sf.html#topic+sf">sf</a></code> object, the value
<code>srs</code> is ignored.
</p>
<p>The query is performed using <a href="https://epsg.io/3857">EPSG:3857</a> (Web Mercator)
and the tile is projected back to the SRS of <code>x</code>. In
case that the tile looks deformed, try either providing <code>x</code> or specify the
SRS of the requested tile via the <code>srs</code> parameter, that ideally would need
to match the SRS of <code>x</code>. See <strong>Examples</strong>.
</p>


<h3>Value</h3>

<p>A <code><a href="terra.html#topic+rast">SpatRaster</a></code> is returned, with 3 (RGB) or 4 (RGBA) layers,
see <code><a href="terra.html#topic+RGB">terra::RGB()</a></code>.
</p>


<h3>Layers</h3>

<p>The parameter <code>what</code> defines the layer to be extracted. The equivalence with
the
<a href="https://www.catastro.minhap.es/webinspire/documentos/inspire-WMS.pdf">API Docs</a>
equivalence is:
</p>

<ul>
<li> <p><code>"parcel"</code>: CP.CadastralParcel
</p>
</li>
<li> <p><code>"zoning"</code>: CP.CadastralZoning
</p>
</li>
<li> <p><code>"building"</code>: BU.Building
</p>
</li>
<li> <p><code>"buildingpart"</code>: BU.BuildingPart
</p>
</li>
<li> <p><code>"address"</code>: AD.Address
</p>
</li>
<li> <p><code>"admboundary"</code>: AU.AdministrativeBoundary
</p>
</li>
<li> <p><code>"admunit"</code>: AU.AdministrativeUnit
</p>
</li></ul>



<h3>Styles</h3>

<p>The WMS service provide different styles on each layer (<code>what</code> parameter).
Some of the styles available are:
</p>

<ul>
<li> <p><code>"parcel"</code>: styles : <code>"BoundariesOnly"</code>, <code>"ReferencePointOnly"</code>,
<code>"ELFCadastre"</code>.
</p>
</li>
<li> <p><code>"zoning"</code>: styles : <code>"BoundariesOnly"</code>, <code>"ELFCadastre"</code>.
</p>
</li>
<li> <p><code>"building"</code>, <code>"buildingpart"</code>: <code>"ELFCadastre"</code>
</p>
</li>
<li> <p><code>"address"</code>: <code>"Number.ELFCadastre"</code>
</p>
</li>
<li> <p><code>"admboundary"</code>, <code>"admunit"</code>: <code>"ELFCadastre"</code>
</p>
</li></ul>

<p>Check the <a href="https://www.catastro.minhap.es/webinspire/documentos/inspire-WMS.pdf">API Docs</a>
for more information.
</p>


<h3>References</h3>

<p><a href="https://www.catastro.minhap.es/webinspire/documentos/inspire-WMS.pdf">API Documentation</a>.
</p>
<p><a href="https://www.catastro.minhap.es/webinspire/index.html">INSPIRE Services for Cadastral Cartography</a>.
</p>


<h3>See Also</h3>

<p><code><a href="mapSpain.html#topic+esp_getTiles">mapSpain::esp_getTiles()</a></code> and <code><a href="terra.html#topic+RGB">terra::RGB()</a></code>. For plotting see
<code><a href="terra.html#topic+plotRGB">terra::plotRGB()</a></code> and <code><a href="tidyterra.html#topic+geom_spatraster_rgb">tidyterra::geom_spatraster_rgb()</a></code>.
</p>
<p>INSPIRE API functions:
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_address_db_all">catr_atom_get_address_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings_db_all">catr_atom_get_buildings_db_all</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels_db_all">catr_atom_get_parcels_db_all</a>()</code>,
<code><a href="#topic+catr_wfs_get_address_bbox">catr_wfs_get_address_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_buildings_bbox">catr_wfs_get_buildings_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_parcels_bbox">catr_wfs_get_parcels_bbox</a>()</code>
</p>
<p>Other spatial: 
<code><a href="#topic+catr_atom_get_address">catr_atom_get_address</a>()</code>,
<code><a href="#topic+catr_atom_get_buildings">catr_atom_get_buildings</a>()</code>,
<code><a href="#topic+catr_atom_get_parcels">catr_atom_get_parcels</a>()</code>,
<code><a href="#topic+catr_wfs_get_address_bbox">catr_wfs_get_address_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_buildings_bbox">catr_wfs_get_buildings_bbox</a>()</code>,
<code><a href="#topic+catr_wfs_get_parcels_bbox">catr_wfs_get_parcels_bbox</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>


# With a bbox

pict &lt;- catr_wms_get_layer(
  c(222500, 4019500, 223700, 4020700),
  srs = 25830,
  what = "parcel"
)

library(mapSpain)
library(ggplot2)
library(tidyterra)

ggplot() +
  geom_spatraster_rgb(data = pict)


# With a spatial object

parcels &lt;- catr_wfs_get_parcels_neigh_parcel("3662303TF3136B", srs = 25830)


# Use styles

parcels_img &lt;- catr_wms_get_layer(parcels,
  what = "buildingpart",
  srs = 25830, # As parcels object
  bbox_expand = 0.3,
  styles = "ELFCadastre"
)


ggplot() +
  geom_sf(data = parcels, fill = "blue", alpha = 0.5) +
  geom_spatraster_rgb(data = parcels_img)


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
