<!DOCTYPE html><html lang="en"><head><title>Help for package DataCombine</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {DataCombine}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#CasesTable'><p>Create reports cases after listwise deletion of missing values for</p>
time-series cross-sectional data.</a></li>
<li><a href='#change'><p>Calculate the changes (absolute, percent, and proportion) changes from a</p>
specified lag, including within groups</a></li>
<li><a href='#CountSpell'><p>Count spells, including for grouped data</p></a></li>
<li><a href='#dMerge'><p>Merges 2 data frames and report/drop/keeps only duplicates.</p></a></li>
<li><a href='#DropNA'><p>Drop rows from a data frame with missing values on a given variable(s).</p></a></li>
<li><a href='#FillDown'><p>Fills in missing (NA) values with the previous non-missing value</p></a></li>
<li><a href='#FillIn'><p>A function for filling in missing values of a variable from one data frame</p>
with the values from another variable.</a></li>
<li><a href='#FindDups'><p>Find duplicated values in a data frame and subset it to either include or</p>
not include them.</a></li>
<li><a href='#FindReplace'><p>Replace multiple patterns found in a character string column of a data frame</p></a></li>
<li><a href='#grepl.sub'><p>Subset a data frame if a specified pattern is found in a character string</p></a></li>
<li><a href='#InsertRow'><p>Inserts a new row into a data frame</p></a></li>
<li><a href='#MoveFront'><p>Move variables to the front of a data frame.</p></a></li>
<li><a href='#NaVar'><p>Create new variable(s) indicating if there are missing values in other</p>
variable(s)</a></li>
<li><a href='#PercChange'><p>Calculate the percentage change from a specified lag, including within groups</p></a></li>
<li><a href='#rmExcept'><p>Remove all objects from a workspace except those specified by the user.</p></a></li>
<li><a href='#shift'><p>A function for creating lag and lead variables.</p></a></li>
<li><a href='#shiftMA'><p>Internal function for slideMA</p></a></li>
<li><a href='#slide'><p>A function for creating lag and lead variables, including for time-series</p>
cross-sectional data.</a></li>
<li><a href='#slideMA'><p>Create a moving average for a period before or after each time point for a</p>
given variable</a></li>
<li><a href='#SpreadDummy'><p>Spread a dummy variable (1's and 0') over a specified time period and for</p>
specified groups</a></li>
<li><a href='#StartEnd'><p>Find the starting and ending time points of a spell</p></a></li>
<li><a href='#TimeExpand'><p>Expands a data set so that it includes an observation for each time point in</p>
a sequence. Works with grouped data.</a></li>
<li><a href='#TimeFill'><p>Creates a continuous Unit-Time-Dummy data frame from a data frame with Unit-Start-End times</p></a></li>
<li><a href='#VarDrop'><p>Drop one or more variables from a data frame.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Tools for Easily Combining and Cleaning Data Sets</td>
</tr>
<tr>
<td>Description:</td>
<td>Tools for combining and cleaning data sets, particularly
    with grouped and time series data.</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.21</td>
</tr>
<tr>
<td>Date:</td>
<td>2016-04-13</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://CRAN.R-project.org/package=DataCombine">http://CRAN.R-project.org/package=DataCombine</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/christophergandrud/DataCombine/issues">https://github.com/christophergandrud/DataCombine/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.2)</td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table, dplyr (&ge; 0.4)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>devtools, testthat</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>5.0.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2016-04-13 15:16:38 UTC; christophergandrud</td>
</tr>
<tr>
<td>Author:</td>
<td>Christopher Gandrud [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Christopher Gandrud &lt;christopher.gandrud@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2016-04-13 17:59:09</td>
</tr>
</table>
<hr>
<h2 id='CasesTable'>Create reports cases after listwise deletion of missing values for 
time-series cross-sectional data.</h2><span id='topic+CasesTable'></span>

<h3>Description</h3>

<p>Create reports cases after listwise deletion of missing values for 
time-series cross-sectional data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CasesTable(data, GroupVar, TimeVar, Vars)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CasesTable_+3A_data">data</code></td>
<td>
<p>a data frame with the full sample.</p>
</td></tr>
<tr><td><code id="CasesTable_+3A_groupvar">GroupVar</code></td>
<td>
<p>a character string specifying the variable in <code>data</code> 
which contains the group IDs.</p>
</td></tr>
<tr><td><code id="CasesTable_+3A_timevar">TimeVar</code></td>
<td>
<p>an optional character string specifying the variable in 
<code>data</code> which contains the time variable.</p>
</td></tr>
<tr><td><code id="CasesTable_+3A_vars">Vars</code></td>
<td>
<p>a character vector with variables names from <code>data</code>
for which you would like to listwise delete observations with missing values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>TimeVar</code> is specified then a data frame is returned with 
three colums. One identifying the <code>GroupVar</code> and two others specifying 
each unique value of <code>GroupVar</code>'s first and last observation time 
post-listwise deletion of missing values. 
</p>
<p>If <code>TimeVar</code> is not specified, then a vector of unique <code>GroupVar</code>
post-listwise deletion of missing values is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create dummy data
ID &lt;- rep(1:4, 4)
time &lt;- rep(2000:2003, 4)
a &lt;- rep(c(1:3, NA), 4)
b &lt;- rep(c(1, NA, 3:4), 4)
Data &lt;- data.frame(ID, time, a, b)

# Find cases that have not been listwise deleted
CasesTable(Data, GroupVar = 'ID')
CasesTable(Data, GroupVar = 'ID', Vars = 'a')
CasesTable(Data, GroupVar = 'ID', TimeVar = 'time', Vars = 'a')


</code></pre>

<hr>
<h2 id='change'>Calculate the changes (absolute, percent, and proportion) changes from a
specified lag, including within groups</h2><span id='topic+change'></span>

<h3>Description</h3>

<p>Calculate the changes (absolute, percent, and proportion) changes from a
specified lag, including within groups
</p>


<h3>Usage</h3>

<pre><code class='language-R'>change(data, Var, GroupVar, TimeVar, NewVar, slideBy = -1, type = "percent",
  ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="change_+3A_data">data</code></td>
<td>
<p>a data frame object.</p>
</td></tr>
<tr><td><code id="change_+3A_var">Var</code></td>
<td>
<p>a character string naming the variable you would like to find the
percentage change for.</p>
</td></tr>
<tr><td><code id="change_+3A_groupvar">GroupVar</code></td>
<td>
<p>a character string naming the variable grouping the units
within which the percentage change will be found for (i.e. countries in a
time series). If <code>GroupVar</code> is missing then the entire data frame is
treated as one unit.</p>
</td></tr>
<tr><td><code id="change_+3A_timevar">TimeVar</code></td>
<td>
<p>optional character string naming the time variable. If
specified then the data is ordered by Var-TimeVar before finding the change.</p>
</td></tr>
<tr><td><code id="change_+3A_newvar">NewVar</code></td>
<td>
<p>a character string specifying the name for the new variable to
place the percentage change in.</p>
</td></tr>
<tr><td><code id="change_+3A_slideby">slideBy</code></td>
<td>
<p>numeric value specifying how many rows (time units) to make
the percentage change comparison for. Positive values shift the data up&ndash;lead
the data.</p>
</td></tr>
<tr><td><code id="change_+3A_type">type</code></td>
<td>
<p>character string set at <code>absolute</code>, <code>percent</code> for
percentages, or <code>proportion</code> to find proportions.</p>
</td></tr>
<tr><td><code id="change_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="#topic+slide">slide</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Finds the absolute, percentage, or proportion change for over a
given time period either within groups of data or the whole data frame.
Important: the data must be in time order and, if groups are used,
group-time order.
</p>


<h3>Value</h3>

<p>a data frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create fake data frame
A &lt;- c(1, 1, 1, 1, 1, 2, 2, 2, 2, 2)
B &lt;- c(1:10)
Data &lt;- data.frame(A, B)

# Find percentage change from two periods before
Out &lt;- change(Data, Var = 'B',
         type = 'proportion',
         NewVar = 'PercentChange',
         slideBy = -2)

Out
</code></pre>

<hr>
<h2 id='CountSpell'>Count spells, including for grouped data</h2><span id='topic+CountSpell'></span>

<h3>Description</h3>

<p><code>CountSpell</code> is a function that returns a variable counting the spell
number for an observation. Works with grouped data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CountSpell(data, TimeVar, SpellVar, GroupVar, NewVar, SpellValue)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CountSpell_+3A_data">data</code></td>
<td>
<p>a data frame object.</p>
</td></tr>
<tr><td><code id="CountSpell_+3A_timevar">TimeVar</code></td>
<td>
<p>a character string naming the time variable.</p>
</td></tr>
<tr><td><code id="CountSpell_+3A_spellvar">SpellVar</code></td>
<td>
<p>a character string naming the variable with information on
when each spell starts.</p>
</td></tr>
<tr><td><code id="CountSpell_+3A_groupvar">GroupVar</code></td>
<td>
<p>a character string naming the variable grouping the units
experiencing the spells.</p>
</td></tr>
<tr><td><code id="CountSpell_+3A_newvar">NewVar</code></td>
<td>
<p>NewVar a character string naming the new variable to place the
spell counts in.</p>
</td></tr>
<tr><td><code id="CountSpell_+3A_spellvalue">SpellValue</code></td>
<td>
<p>a value indicating when a unit is in a spell. Must match
the class of the <code>SpellVar</code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Create fake data
ID &lt;- sort(rep(seq(1:4), 5))
Time &lt;- rep(1:20)
Dummy &lt;-  c(1, sample(c(0, 1), size = 19, replace = TRUE))
Data &lt;- data.frame(ID, Time, Dummy)

# Find spell for whole data frame
DataSpell1 &lt;- CountSpell(Data, TimeVar = 'Time', SpellVar = 'Dummy',
                         SpellValue = 1)

head(DataSpell1)

# Find spell for each ID group
DataSpell2 &lt;- CountSpell(Data, TimeVar = 'Time', SpellVar = 'Dummy',
                         GroupVar = 'ID', SpellValue = 1)

head(DataSpell2)

</code></pre>

<hr>
<h2 id='dMerge'>Merges 2 data frames and report/drop/keeps only duplicates.</h2><span id='topic+dMerge'></span>

<h3>Description</h3>

<p><code>dMerge</code> merges 2 data frames and reports/drops/keeps only duplicates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dMerge(data1, data2, by, Var, dropDups = TRUE, dupsOut = FALSE,
  fromLast = FALSE, all = FALSE, all.x = all, all.y = all,
  sort = TRUE, suffixes = c(".x", ".y"), incomparables = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dMerge_+3A_data1">data1</code></td>
<td>
<p>a data frame. The first data frame to merge.</p>
</td></tr>
<tr><td><code id="dMerge_+3A_data2">data2</code></td>
<td>
<p>a data frame. The second data frame to merge.</p>
</td></tr>
<tr><td><code id="dMerge_+3A_by">by</code></td>
<td>
<p>specifications of the columns used for merging.</p>
</td></tr>
<tr><td><code id="dMerge_+3A_var">Var</code></td>
<td>
<p>depricated.</p>
</td></tr>
<tr><td><code id="dMerge_+3A_dropdups">dropDups</code></td>
<td>
<p>logical. Whether or not to drop duplicated rows based on
<code>Var</code>. If <code>dropDups = FALSE</code> then it gives a count of the
duplicated rows.</p>
</td></tr>
<tr><td><code id="dMerge_+3A_dupsout">dupsOut</code></td>
<td>
<p>logical. If <code>TRUE</code> then a data frame only containing
duplicated values is returned and <code>dropDups</code> is ignored.</p>
</td></tr>
<tr><td><code id="dMerge_+3A_fromlast">fromLast</code></td>
<td>
<p>logical indicating if duplication should be considered from
the reverse side. Only relevant if <code>dropDups = TRUE</code>.</p>
</td></tr>
<tr><td><code id="dMerge_+3A_all">all</code></td>
<td>
<p>logical; all = L is shorthand for <code>all.x = L</code> and
<code>all.y = L</code>, where <code>L</code> is either <code>TRUE</code> or <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="dMerge_+3A_all.x">all.x</code></td>
<td>
<p>logical; if TRUE, then extra rows will be added to the output,
one for each row in x that has no matching row in y. These rows will have
<code>NA</code>s in those columns that are usually filled with values from y. The
default is #' <code>FALSE</code>, so that only rows with data from both x and y are
included in the output.</p>
</td></tr>
<tr><td><code id="dMerge_+3A_all.y">all.y</code></td>
<td>
<p>logical; analogous to <code>all.x</code>.</p>
</td></tr>
<tr><td><code id="dMerge_+3A_sort">sort</code></td>
<td>
<p>logical. Should the result be sorted on the by columns?</p>
</td></tr>
<tr><td><code id="dMerge_+3A_suffixes">suffixes</code></td>
<td>
<p>a character vector of length 2 specifying the suffixes to be
used for making unique the names of columns in the result which not used for
merging (appearing in by etc).</p>
</td></tr>
<tr><td><code id="dMerge_+3A_incomparables">incomparables</code></td>
<td>
<p>values which cannot be matched. See <code><a href="base.html#topic+match">match</a></code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="base.html#topic+duplicated">duplicated</a></code>, <code><a href="base.html#topic+merge">merge</a></code>
</p>

<hr>
<h2 id='DropNA'>Drop rows from a data frame with missing values on a given variable(s).</h2><span id='topic+DropNA'></span>

<h3>Description</h3>

<p><code>DropNA</code> drops rows from a data frame when they have missing (<code>NA</code>)
values on a given variable(s).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DropNA(data, Var, message = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="DropNA_+3A_data">data</code></td>
<td>
<p>a data frame object.</p>
</td></tr>
<tr><td><code id="DropNA_+3A_var">Var</code></td>
<td>
<p>a character vector naming the variables you would like to have
only non-missing (<code>NA</code>) values. If not specified, then all <code>NA</code>s
will be dropped from the data frame.</p>
</td></tr>
<tr><td><code id="DropNA_+3A_message">message</code></td>
<td>
<p>logical. Whether or not to give you a message about the number
of rows that are dropped.</p>
</td></tr>
</table>


<h3>Source</h3>

<p>Partially based on Stack Overflow answer written by donshikin:
<a href="http://stackoverflow.com/questions/4862178/remove-rows-with-nas-in-data-frame">http://stackoverflow.com/questions/4862178/remove-rows-with-nas-in-data-frame</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create data frame
a &lt;- c(1:4, NA)
b &lt;- c(1, NA, 3:5)
ABData &lt;- data.frame(a, b)

# Remove missing values from column a
ASubData &lt;- DropNA(ABData, Var = "a", message = FALSE)

# Remove missing values in columns a and b
ABSubData &lt;- DropNA(ABData, Var = c("a", "b"))

# Remove missing values in all columns of ABDatat
AllSubData &lt;- DropNA(ABData)

</code></pre>

<hr>
<h2 id='FillDown'>Fills in missing (NA) values with the previous non-missing value</h2><span id='topic+FillDown'></span>

<h3>Description</h3>

<p>Fills in missing (NA) values with the previous non-missing value
</p>


<h3>Usage</h3>

<pre><code class='language-R'>FillDown(data, Var)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="FillDown_+3A_data">data</code></td>
<td>
<p>a data frame. Optional as you can simply specify a vector with
<code>Var</code>,</p>
</td></tr>
<tr><td><code id="FillDown_+3A_var">Var</code></td>
<td>
<p>the variable in <code>data</code> or a vector you would like to fill 
down missing (<code>NA</code>) values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create fake data
id &lt;- c('Algeria', NA, NA, NA, 'Mexico', NA, NA)
score &lt;- rnorm(7)
Data &lt;- data.frame(id, score)

# FillDown id
DataOut &lt;- FillDown(Data, 'id')

## Not run: 
# Use group_by and mutate from dplyr to FillDown grouped data, e.g.:
Example &lt;- Example %&gt;% group_by(grouping) %&gt;% 
             mutate(NewFilled = FillDown(Var = VarToFill))

## End(Not run)
</code></pre>

<hr>
<h2 id='FillIn'>A function for filling in missing values of a variable from one data frame
with the values from another variable.</h2><span id='topic+FillIn'></span>

<h3>Description</h3>

<p><code>FillIn</code> uses values of a variable from one data set to fill in missing
values in another.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>FillIn(D1, D2, Var1, Var2, KeyVar = c("iso2c", "year"),
  allow.cartesian = FALSE, KeepD2Vars = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="FillIn_+3A_d1">D1</code></td>
<td>
<p>the data frame with the variable you would like to fill in.</p>
</td></tr>
<tr><td><code id="FillIn_+3A_d2">D2</code></td>
<td>
<p>the data frame with the variable you would like to use to fill in
<code>D1</code>.</p>
</td></tr>
<tr><td><code id="FillIn_+3A_var1">Var1</code></td>
<td>
<p>a character string of the name of the variable in <code>D1</code> you
want to fill in.</p>
</td></tr>
<tr><td><code id="FillIn_+3A_var2">Var2</code></td>
<td>
<p>an optional character string of variable name in <code>D2</code> that
you would like to use to fill in. Note: must be of the same class as
<code>Var1</code>.</p>
</td></tr>
<tr><td><code id="FillIn_+3A_keyvar">KeyVar</code></td>
<td>
<p>a character vector of variable names that are shared by
<code>D1</code> and <code>D2</code> that can be used to join the data frames.</p>
</td></tr>
<tr><td><code id="FillIn_+3A_allow.cartesian">allow.cartesian</code></td>
<td>
<p>logical. See the <code>data.table</code>
documentation for more details.</p>
</td></tr>
<tr><td><code id="FillIn_+3A_keepd2vars">KeepD2Vars</code></td>
<td>
<p>logical, indicating whether or not to keep the variables
from D2 in the output data frame. The default is <code>KeepD2Vars = FALSE</code>.
Hint: avoid having variables in your <code>D2</code> data frame that share names
with variables in <code>D1</code> other than the <code>KeyVar</code>s</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Create data set with missing values
naDF &lt;- data.frame(a = sample(c(1,2), 100, rep = TRUE),
                   b = sample(c(3,4), 100, rep = TRUE),
                   fNA = sample(c(100, 200, 300, 400, NA), 100, rep = TRUE))

# Created full data set
fillDF &lt;- data.frame(a = c(1, 2, 1, 2),
                     b = c(3, 3, 4, 4),
                     j = c(5, 5, 5, 5),
                     fFull = c(100, 200, 300, 400))

# Fill in missing f's from naDF with values from fillDF
FilledInData &lt;- FillIn(naDF, fillDF, Var1 = "fNA",
                       Var2 = "fFull", KeyVar = c("a", "b"))

</code></pre>

<hr>
<h2 id='FindDups'>Find duplicated values in a data frame and subset it to either include or
not include them.</h2><span id='topic+FindDups'></span>

<h3>Description</h3>

<p>Find duplicated values in a data frame and subset it to either include or
not include them.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>FindDups(data, Vars, NotDups = FALSE, test = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="FindDups_+3A_data">data</code></td>
<td>
<p>a data frame to select the duplicated values from.</p>
</td></tr>
<tr><td><code id="FindDups_+3A_vars">Vars</code></td>
<td>
<p>character vector of variables in <code>data</code> to find duplicated
values on.</p>
</td></tr>
<tr><td><code id="FindDups_+3A_notdups">NotDups</code></td>
<td>
<p>logical. If <code>TRUE</code> then a data frame without duplicated
values is returned.</p>
</td></tr>
<tr><td><code id="FindDups_+3A_test">test</code></td>
<td>
<p>logical. If <code>TRUE</code> then the function will return an error
if there are duplicated values.</p>
</td></tr>
<tr><td><code id="FindDups_+3A_...">...</code></td>
<td>
<p>arguments to pass to <code><a href="base.html#topic+duplicated">duplicated</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame, unless <code>test = TRUE</code> and there are duplicates.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>Data &lt;- data.frame(ID = c(1, 1, 2, 2), Value = c(1, 2, 3, 4))

FindDups(Data, Vars = 'ID')

</code></pre>

<hr>
<h2 id='FindReplace'>Replace multiple patterns found in a character string column of a data frame</h2><span id='topic+FindReplace'></span>

<h3>Description</h3>

<p><code>FindReplace</code> allows you to find and replace multiple character string
patterns in a data frame's column.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>FindReplace(data, Var, replaceData, from = "from", to = "to",
  exact = TRUE, vector = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="FindReplace_+3A_data">data</code></td>
<td>
<p>data frame with the column you would like to replace string
patterns.</p>
</td></tr>
<tr><td><code id="FindReplace_+3A_var">Var</code></td>
<td>
<p>character string naming the column you would like to replace
string patterns. The column must be of class <code>character</code> or
<code>factor</code>.</p>
</td></tr>
<tr><td><code id="FindReplace_+3A_replacedata">replaceData</code></td>
<td>
<p>a data frame with at least two columns. One contains the
patterns to replace and the other contains their replacement. Note: the
pattern and its replacement must be in the same row.</p>
</td></tr>
<tr><td><code id="FindReplace_+3A_from">from</code></td>
<td>
<p>character string naming the column with the patterns you would
like to replace.</p>
</td></tr>
<tr><td><code id="FindReplace_+3A_to">to</code></td>
<td>
<p>character string naming the column with the the pattern
replacements.</p>
</td></tr>
<tr><td><code id="FindReplace_+3A_exact">exact</code></td>
<td>
<p>logical. Indicates whether to only replace exact pattern matches
(<code>TRUE</code>) or not (<code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="FindReplace_+3A_vector">vector</code></td>
<td>
<p>logical. If <code>TRUE</code> then the replacement is returned as a
single vector. If <code>FALSE</code> then the whole data frame is returned.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Create original data
ABData &lt;- data.frame(a = c("London, UK", "Oxford, UK", "Berlin, DE",
                     "Hamburg, DE", "Oslo, NO"),
                     b = c(8, 0.1, 3, 2, 1))

# Create replacements data frame
Replaces &lt;- data.frame(from = c("UK", "DE"), to = c("England", "Germany"))

# Replace patterns and return full data frame
ABNewDF &lt;- FindReplace(data = ABData, Var = "a", replaceData = Replaces,
                     from = "from", to = "to", exact = FALSE)

# Replace patterns and return the Var as a vector
ABNewVector &lt;- FindReplace(data = ABData, Var = "a", replaceData = Replaces,
                     from = "from", to = "to", vector = TRUE)

</code></pre>

<hr>
<h2 id='grepl.sub'>Subset a data frame if a specified pattern is found in a character string</h2><span id='topic+grepl.sub'></span>

<h3>Description</h3>

<p>Subset a data frame if a specified pattern is found in a character string
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grepl.sub(data, pattern, Var, keep.found = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="grepl.sub_+3A_data">data</code></td>
<td>
<p>data frame.</p>
</td></tr>
<tr><td><code id="grepl.sub_+3A_pattern">pattern</code></td>
<td>
<p>character vector containing a regular expression to be matched
in the given character vector.</p>
</td></tr>
<tr><td><code id="grepl.sub_+3A_var">Var</code></td>
<td>
<p>character vector of the variables that the pattern should be
found in.</p>
</td></tr>
<tr><td><code id="grepl.sub_+3A_keep.found">keep.found</code></td>
<td>
<p>logical. whether or not to keep observations where the
pattern is found (<code>TRUE</code>) or not found (<code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="grepl.sub_+3A_...">...</code></td>
<td>
<p>arguments to pass to <code><a href="base.html#topic+grepl">grepl</a></code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Create data frame
ABData &lt;- data.frame(a = c("London, UK", "Oxford, UK", "Berlin, DE",
                    "Hamburg, DE", "Oslo, NO"),
                    b = c(8, 0.1, 3, 2, 1))

# Keep only data from Germany (DE)
ABGermany &lt;- grepl.sub(data = ABData, pattern = "DE", Var = "a")

</code></pre>

<hr>
<h2 id='InsertRow'>Inserts a new row into a data frame</h2><span id='topic+InsertRow'></span>

<h3>Description</h3>

<p>Inserts a new row into a data frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>InsertRow(data, NewRow, RowNum = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="InsertRow_+3A_data">data</code></td>
<td>
<p>a data frame to insert the new row into.</p>
</td></tr>
<tr><td><code id="InsertRow_+3A_newrow">NewRow</code></td>
<td>
<p>a vector whose length is the same as the number of columns in
<code>data</code>.</p>
</td></tr>
<tr><td><code id="InsertRow_+3A_rownum">RowNum</code></td>
<td>
<p>numeric indicating which row to insert the new row as. If not
specified then the new row is added to the end using a vanilla
<code><a href="base.html#topic+rbind">rbind</a></code> call.</p>
</td></tr>
</table>


<h3>Source</h3>

<p>The function largely implements:
<a href="http://stackoverflow.com/a/11562428">http://stackoverflow.com/a/11562428</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create dummy data
A &lt;- B &lt;- C &lt;- D &lt;- sample(1:20, size = 20, replace = TRUE)
Data &lt;- data.frame(A, B, C, D)

# Create new row
New &lt;- rep(1000, 4)

# Insert into 4th row
Data &lt;- InsertRow(Data, NewRow = New, RowNum = 4)

</code></pre>

<hr>
<h2 id='MoveFront'>Move variables to the front of a data frame.</h2><span id='topic+MoveFront'></span>

<h3>Description</h3>

<p><code>MoveFront</code> moves variables to the front of a data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>MoveFront(data, Var, exact = TRUE, ignore.case = NULL, fixed = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="MoveFront_+3A_data">data</code></td>
<td>
<p>a data frame object containing the variable you want to move.</p>
</td></tr>
<tr><td><code id="MoveFront_+3A_var">Var</code></td>
<td>
<p>a character vector naming the variables you would like to move to
the front of the data frame. The order of the variables should match the
order you want them to have in the data frame, i.e. the first variable in the
vector will be the first variable in the data frame.</p>
</td></tr>
<tr><td><code id="MoveFront_+3A_exact">exact</code></td>
<td>
<p>logical. If <code>TRUE</code> (the default), only exact variable names
are matched.</p>
</td></tr>
<tr><td><code id="MoveFront_+3A_ignore.case">ignore.case</code></td>
<td>
<p>logical. If <code>FALSE</code>, the variable name matching is
case sensitive and if <code>TRUE</code>, case is ignored during matching. Only
available when <code>exact = FALSE</code>.</p>
</td></tr>
<tr><td><code id="MoveFront_+3A_fixed">fixed</code></td>
<td>
<p>logical. If <code>TRUE</code>, pattern is a string to be matched as
is. Overrides all conflicting arguments. Only available when
<code>exact = FALSE</code>.</p>
</td></tr>
</table>


<h3>Source</h3>

<p>Based primarily on a Stack Overflow answer written by rcs: <a href="http://stackoverflow.com/questions/3369959/moving-columns-within-a-data-frame-without-retyping">http://stackoverflow.com/questions/3369959/moving-columns-within-a-data-frame-without-retyping</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create fake data
A &lt;- B &lt;- C &lt;- 1:50
OldOrder &lt;- data.frame(A, B, C)

# Move C to front
NewOrder1 &lt;- MoveFront(OldOrder, "C")
names(NewOrder1)

# Move B and A to the front
NewOrder2 &lt;- MoveFront(OldOrder, c("B", "A"))
names(NewOrder2)

## Non-exact matching (example from Felix Hass)
 # Create fake data
 df &lt;- data.frame(dummy = c(1,0), Name = c("Angola", "Chad"),
                 DyadName = c("Government of Angola - UNITA",
                 "Government of Chad - FNT"),
                 Year = c("2002", "1992"))

 df &lt;- MoveFront(df, c("Name", "Year"), exact = FALSE)

 names(df)

 df &lt;- MoveFront(df, c("Name", "Year"), exact = TRUE)

 names(df)

</code></pre>

<hr>
<h2 id='NaVar'>Create new variable(s) indicating if there are missing values in other
variable(s)</h2><span id='topic+NaVar'></span>

<h3>Description</h3>

<p>Create new variable(s) indicating if there are missing values in other
variable(s)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>NaVar(data, Var, Stub = "Miss_", reverse = FALSE, message = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="NaVar_+3A_data">data</code></td>
<td>
<p>a data frame object.</p>
</td></tr>
<tr><td><code id="NaVar_+3A_var">Var</code></td>
<td>
<p>a character vector naming the variable(s) within which you would
like to identify missing values.</p>
</td></tr>
<tr><td><code id="NaVar_+3A_stub">Stub</code></td>
<td>
<p>a character string indicating the stub you would like to append
to the new variables' name(s).</p>
</td></tr>
<tr><td><code id="NaVar_+3A_reverse">reverse</code></td>
<td>
<p>logical. If <code>reverse = FALSE</code> then missing values are
coded as <code>1</code> and non-missing values are coded as <code>0</code>. If
<code>reverse = TRUE</code> then missing values are coded as <code>0</code> and
non-missing values are coded as <code>1</code>.</p>
</td></tr>
<tr><td><code id="NaVar_+3A_message">message</code></td>
<td>
<p>logical. Whether or not to give you a message about the names
of the new variables that are created.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Create data frame
a &lt;- c(1, 2, 3, 4, NA)
b &lt;- c( 1, NA, 3, 4, 5)
ABData &lt;- data.frame(a, b)

# Create varibles indicating missing values in columns a and b
ABData1 &lt;- NaVar(ABData, Var = c('a', 'b'))

# Create varible indicating missing values in columns a with reversed dummy
ABData2 &lt;- NaVar(ABData, Var = 'a', reverse = TRUE, message = FALSE)

</code></pre>

<hr>
<h2 id='PercChange'>Calculate the percentage change from a specified lag, including within groups</h2><span id='topic+PercChange'></span>

<h3>Description</h3>

<p>Calculate the percentage change from a specified lag, including within groups
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PercChange(data, Var, GroupVar, NewVar, slideBy = -1, type = "percent", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PercChange_+3A_data">data</code></td>
<td>
<p>a data frame object.</p>
</td></tr>
<tr><td><code id="PercChange_+3A_var">Var</code></td>
<td>
<p>a character string naming the variable you would like to find the
percentage change for.</p>
</td></tr>
<tr><td><code id="PercChange_+3A_groupvar">GroupVar</code></td>
<td>
<p>a character string naming the variable grouping the units
within which the percentage change will be found for (i.e. countries in a
time series). If <code>GroupVar</code> is missing then the entire data frame is
treated as one unit.</p>
</td></tr>
<tr><td><code id="PercChange_+3A_newvar">NewVar</code></td>
<td>
<p>a character string specifying the name for the new variable to
place the percentage change in.</p>
</td></tr>
<tr><td><code id="PercChange_+3A_slideby">slideBy</code></td>
<td>
<p>numeric value specifying how many rows (time units) to make
the percentage change comparison for. Positive values shift the data up&ndash;lead
the data.</p>
</td></tr>
<tr><td><code id="PercChange_+3A_type">type</code></td>
<td>
<p>character string set at either <code>percent</code> for percentages or
<code>proportion</code> to find proportions.</p>
</td></tr>
<tr><td><code id="PercChange_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="#topic+slide">slide</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Finds the percentage or proportion change for over a given time
period either within groups of data or the whole data frame. Important: the
data must be in time order and, if groups are used, group-time order.
</p>


<h3>Value</h3>

<p>a data frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create fake data frame
A &lt;- c(1, 1, 1, 1, 1, 2, 2, 2, 2, 2)
B &lt;- c(1:10)
Data &lt;- data.frame(A, B)

# Find percentage change from two periods before
Out &lt;- PercChange(Data, Var = 'B',
         type = 'proportion',
         NewVar = 'PercentChange',
         slideBy = -2)

Out
</code></pre>

<hr>
<h2 id='rmExcept'>Remove all objects from a workspace except those specified by the user.</h2><span id='topic+rmExcept'></span>

<h3>Description</h3>

<p><code>rmExcept</code> removes all objects from a workspace except those specified
by the user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rmExcept(keepers, envir = globalenv(), message = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rmExcept_+3A_keepers">keepers</code></td>
<td>
<p>a character vector of the names of object you would like to
keep in your workspace.</p>
</td></tr>
<tr><td><code id="rmExcept_+3A_envir">envir</code></td>
<td>
<p>the <code><a href="base.html#topic+environment">environment</a></code> to remove objects from. The
default is the global environment (i.e. <code><a href="base.html#topic+globalenv">globalenv</a></code>).</p>
</td></tr>
<tr><td><code id="rmExcept_+3A_message">message</code></td>
<td>
<p>logical, whether or not to return a message informing the user
of which objects were removed.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Create objects
A &lt;- 1; B &lt;- 2; C &lt;- 3

# Remove all objects except for A
rmExcept("A")

# Show workspace
ls()

</code></pre>

<hr>
<h2 id='shift'>A function for creating lag and lead variables.</h2><span id='topic+shift'></span>

<h3>Description</h3>

<p>The function shifts a vector up or down to create lag or lead
variables.
Note: your data needs to be sorted by date. The date should be ascending
(i.e. increasing as it moves down the rows).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shift(VarVect, shiftBy, reminder = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="shift_+3A_varvect">VarVect</code></td>
<td>
<p>a vector you would like to shift (create lag or lead).</p>
</td></tr>
<tr><td><code id="shift_+3A_shiftby">shiftBy</code></td>
<td>
<p>numeric value specifying how many rows (time units) to shift
the data by. Negative values shift the data down&ndash;lag the data. Positive
values shift the data up&ndash;lead the data.</p>
</td></tr>
<tr><td><code id="shift_+3A_reminder">reminder</code></td>
<td>
<p>logical. Whether or not to remind you to order your data by
the <code>GroupVar</code> and time variable before running <code>shift</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>shift</code> a function for creating lag and lead variables, including for
time-series cross-sectional data.
</p>


<h3>Value</h3>

<p>a vector
</p>


<h3>Source</h3>

<p>Largely based on TszKin Julian's <code>shift</code> function:
<a href="http://ctszkin.com/2012/03/11/generating-a-laglead-variables/">http://ctszkin.com/2012/03/11/generating-a-laglead-variables/</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+slide">slide</a></code>
</p>

<hr>
<h2 id='shiftMA'>Internal function for slideMA</h2><span id='topic+shiftMA'></span>

<h3>Description</h3>

<p>Internal function for slideMA
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shiftMA(x, shiftBy, Abs, reminder)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="shiftMA_+3A_x">x</code></td>
<td>
<p>vector</p>
</td></tr>
<tr><td><code id="shiftMA_+3A_shiftby">shiftBy</code></td>
<td>
<p>numeric</p>
</td></tr>
<tr><td><code id="shiftMA_+3A_abs">Abs</code></td>
<td>
<p>numeric</p>
</td></tr>
<tr><td><code id="shiftMA_+3A_reminder">reminder</code></td>
<td>
<p>logical</p>
</td></tr>
</table>

<hr>
<h2 id='slide'>A function for creating lag and lead variables, including for time-series
cross-sectional data.</h2><span id='topic+slide'></span>

<h3>Description</h3>

<p>The function slides a column up or down to create lag or lead
variables. If <code>GroupVar</code> is specified it will slide <code>Var</code> for each
group. This is important for time-series cross-section data. The slid data is
placed in a new variable in the original data frame.
Note: your data needs to be sorted by date. The date should be ascending
(i.e. increasing as it moves down the rows). Also, the time difference
between rows should be constant, e.g. days, months, years.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>slide(data, Var, TimeVar, GroupVar, NewVar, slideBy = -1,
  keepInvalid = FALSE, reminder = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="slide_+3A_data">data</code></td>
<td>
<p>a data frame object.</p>
</td></tr>
<tr><td><code id="slide_+3A_var">Var</code></td>
<td>
<p>a character string naming the variable you would like to slide
(create lag or lead).</p>
</td></tr>
<tr><td><code id="slide_+3A_timevar">TimeVar</code></td>
<td>
<p>optional character string naming the time variable. If
specified then the data is ordered by Var-TimeVar before sliding.</p>
</td></tr>
<tr><td><code id="slide_+3A_groupvar">GroupVar</code></td>
<td>
<p>a character string naming the variable grouping the units
within which <code>Var</code> will be slid. If <code>GroupVar</code> is missing then the
whole variable is slid up or down. This is similar to <code><a href="#topic+shift">shift</a></code>,
though <code>shift</code> returns the slid data to a new vector rather than the
original data frame.</p>
</td></tr>
<tr><td><code id="slide_+3A_newvar">NewVar</code></td>
<td>
<p>a character string specifying the name for the new variable to
place the slid data in.</p>
</td></tr>
<tr><td><code id="slide_+3A_slideby">slideBy</code></td>
<td>
<p>numeric value specifying how many rows (time units) to shift
the data by. Negative values slide the data down&ndash;lag the data. Positive
values shift the data up&ndash;lead the data.</p>
</td></tr>
<tr><td><code id="slide_+3A_keepinvalid">keepInvalid</code></td>
<td>
<p>logical. Whether or not to keep observations for groups for
which no valid lag/lead can be created due to an insufficient number of time
period observations. If <code>TRUE</code> then these groups are returned to the
bottom of the data frame and <code>NA</code> is given for their new lag/lead
variable value.</p>
</td></tr>
<tr><td><code id="slide_+3A_reminder">reminder</code></td>
<td>
<p>logical. Whether or not to remind you to order your data by
the <code>GroupVar</code> and time variable before running <code>slide</code>, plus other
messages.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>slide</code> a function for creating lag and lead variables, including for
time-series cross-sectional data.
</p>


<h3>Value</h3>

<p>a data frame
</p>


<h3>Source</h3>

<p>Partially based on TszKin Julian's <code>shift</code> function:
<a href="http://ctszkin.com/2012/03/11/generating-a-laglead-variables/">http://ctszkin.com/2012/03/11/generating-a-laglead-variables/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+shift">shift</a></code>, <code>dplyr</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create dummy data
A &lt;- B &lt;- C &lt;- sample(1:20, size = 20, replace = TRUE)
ID &lt;- sort(rep(seq(1:4), 5))
Data &lt;- data.frame(ID, A, B, C)

# Lead the variable by two time units
DataSlid1 &lt;- slide(Data, Var = 'A', NewVar = 'ALead', slideBy = 2)

# Lag the variable one time unit by ID group
DataSlid2 &lt;- slide(data = Data, Var = 'B', GroupVar = 'ID',
                NewVar = 'BLag', slideBy = -1)

# Lag the variable one time unit by ID group, with invalid lags
Data &lt;- Data[1:16, ]

DataSlid3 &lt;- slide(data = Data, Var = 'B', GroupVar = 'ID',
                 NewVar = 'BLag', slideBy = -2, keepInvalid = TRUE)

</code></pre>

<hr>
<h2 id='slideMA'>Create a moving average for a period before or after each time point for a
given variable</h2><span id='topic+slideMA'></span>

<h3>Description</h3>

<p>Create a moving average for a period before or after each time point for a
given variable
</p>


<h3>Usage</h3>

<pre><code class='language-R'>slideMA(data, Var, GroupVar, periodBound = -3, offset = 1, NewVar,
  reminder = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="slideMA_+3A_data">data</code></td>
<td>
<p>a data frame object.</p>
</td></tr>
<tr><td><code id="slideMA_+3A_var">Var</code></td>
<td>
<p>a character string naming the variable you would like to create
the lag/lead moving averages from.</p>
</td></tr>
<tr><td><code id="slideMA_+3A_groupvar">GroupVar</code></td>
<td>
<p>a character string naming the variable grouping the units
within which <code>Var</code> will be turned into slid moving averages. If
<code>GroupVar</code> is missing then the whole variable is slid up or down and
moving averages will be created. This is similar to <code><a href="#topic+shift">shift</a></code>,
though <code>shift</code> returns the slid data to a new vector rather than the
original data frame.</p>
</td></tr>
<tr><td><code id="slideMA_+3A_periodbound">periodBound</code></td>
<td>
<p>integer. The time point for the outer bound of the time
period over which to create the moving averages. The default is <code>-3</code>,
i.e. the moving average period begins three time points before a given time
point. Can also be positive for leading moving averages.</p>
</td></tr>
<tr><td><code id="slideMA_+3A_offset">offset</code></td>
<td>
<p>integer. How many time increments away from a given time point
to begin the moving average time period. The default is <code>1</code>. Effectively
controls how wide the moving average window is in the other direction of
<code>periodBound</code>. Note: must be positive.</p>
</td></tr>
<tr><td><code id="slideMA_+3A_newvar">NewVar</code></td>
<td>
<p>a character string specifying the name for the new variable to
place the slid data in.</p>
</td></tr>
<tr><td><code id="slideMA_+3A_reminder">reminder</code></td>
<td>
<p>logical. Whether or not to remind you to order your data by
the <code>GroupVar</code> and time variable before running <code>slideMA</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>slideMA</code> is designed to give you more control over the window
for creating the moving average. Think of the <code>periodBound</code> and
<code>offset</code> arguments working together. If for example,
<code>periodBound = -3</code> and <code>offset = 1</code> then the variable of interest
will be lagged by 2 then a moving average window of three time increments
around the lagged variable is found.
</p>


<h3>Value</h3>

<p>a data frame
</p>


<h3>See Also</h3>

<p><code><a href="#topic+shift">shift</a></code>, <code><a href="#topic+slide">slide</a></code>, <code>dplyr</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> # Create dummy data
 A &lt;- B &lt;- C &lt;- sample(1:20, size = 20, replace = TRUE)
 ID &lt;- sort(rep(seq(1:4), 5))
 Data &lt;- data.frame(ID, A, B, C)

 # Lead the variable by two time units
 DataSlidMA1 &lt;- slideMA(Data, Var = 'A', NewVar = 'ALead_MA',
                 periodBound = 3)

 # Lag the variable one time unit by ID group
 DataSlidMA2 &lt;- slideMA(data = Data, Var = 'B', GroupVar = 'ID',
                NewVar = 'BLag_MA', periodBound = -3, offset = 2)

</code></pre>

<hr>
<h2 id='SpreadDummy'>Spread a dummy variable (1's and 0') over a specified time period and for
specified groups</h2><span id='topic+SpreadDummy'></span>

<h3>Description</h3>

<p>Spread a dummy variable (1's and 0') over a specified time period and for
specified groups
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SpreadDummy(data, Var, GroupVar, NewVar, spreadBy = -2, reminder = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="SpreadDummy_+3A_data">data</code></td>
<td>
<p>a data frame object.</p>
</td></tr>
<tr><td><code id="SpreadDummy_+3A_var">Var</code></td>
<td>
<p>a character string naming the numeric dummy variable with values
0 and 1 that you would like to spread. Can be either spread as a lag or lead.</p>
</td></tr>
<tr><td><code id="SpreadDummy_+3A_groupvar">GroupVar</code></td>
<td>
<p>a character string naming the variable grouping the units
within which <code>Var</code> will be spread If <code>GroupVar</code> is missing then the
whole variable is spread up or down. This is similar to <code><a href="#topic+shift">shift</a></code>,
though <code>shift</code> slides the data and returns it to a new vector rather
than the original data frame.</p>
</td></tr>
<tr><td><code id="SpreadDummy_+3A_newvar">NewVar</code></td>
<td>
<p>a character string specifying the name for the new variable to
place the spread dummy data in.</p>
</td></tr>
<tr><td><code id="SpreadDummy_+3A_spreadby">spreadBy</code></td>
<td>
<p>numeric value specifying how many rows (time units) to spread
the data over. Negative values spread the data down&ndash;lag the data. Positive
values spread the data up&ndash;lead the data.</p>
</td></tr>
<tr><td><code id="SpreadDummy_+3A_reminder">reminder</code></td>
<td>
<p>logical. Whether or not to remind you to order your data by
the <code>GroupVar</code> and time variable before running <code>SpreadDummy</code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+slide">slide</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create dummy data
ID &lt;- sort(rep(seq(1:4), 5))
NotVar &lt;- rep(1:5, 4)
Dummy &lt;-  sample(c(0, 1), size = 20, replace = TRUE)
Data &lt;- data.frame(ID, NotVar, Dummy)

# Spread
DataSpread1 &lt;- SpreadDummy(data = Data, Var = 'Dummy',
                           spreadBy = 2, reminder = FALSE)

DataSpread2 &lt;- SpreadDummy(data = Data, Var = 'Dummy', GroupVar = 'ID',
                           spreadBy = -2)

</code></pre>

<hr>
<h2 id='StartEnd'>Find the starting and ending time points of a spell</h2><span id='topic+StartEnd'></span>

<h3>Description</h3>

<p><code>StartEnd</code> finds the starting and ending time points of a spell,
including for time-series cross-sectional data. Note: your data needs to be
sorted by date. The date should be ascending (i.e. increasing as it moves
down the rows).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>StartEnd(data, SpellVar, GroupVar, SpellValue, OnlyStart = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="StartEnd_+3A_data">data</code></td>
<td>
<p>a data frame object.</p>
</td></tr>
<tr><td><code id="StartEnd_+3A_spellvar">SpellVar</code></td>
<td>
<p>a character string naming the variable with information on
when each spell starts.</p>
</td></tr>
<tr><td><code id="StartEnd_+3A_groupvar">GroupVar</code></td>
<td>
<p>a character string naming the variable grouping the units
experiencing the spells. If <code>GroupVar</code> is missing then .</p>
</td></tr>
<tr><td><code id="StartEnd_+3A_spellvalue">SpellValue</code></td>
<td>
<p>a value indicating when a unit is in a spell. If
<code>SpellValue</code> is missing then any change in <code>Var</code>'s value will be
treated as the start/end of a spell. Must specify if <code>OnlyStart = TRUE</code>.</p>
</td></tr>
<tr><td><code id="StartEnd_+3A_onlystart">OnlyStart</code></td>
<td>
<p>logical for whether or not to only add a new
<code>Spell_Start</code> variable. Please see the details.</p>
</td></tr>
<tr><td><code id="StartEnd_+3A_...">...</code></td>
<td>
<p>Aguments to pass to <code><a href="#topic+slide">slide</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame. If <code>OnlyStart = FALSE</code> then two new variables are
returned:
</p>

<ul>
<li><p>Spell_Start: The time period year of a given spell.
</p>
</li>
<li><p>Spell_End: The end time period of a given spell.
</p>
</li></ul>

<p>If <code>OnlyStart = TRUE</code> then only <code>Spell_Start</code> is added.
This variable includes both <code>1</code>'s for the start of a new spell and for
the start of a 'gap spell', i.e. a spell after <code>Spell_End</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+slide">slide</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create fake data
ID &lt;- sort(rep(seq(1:4), 5))
Time &lt;- rep(1:5, 4)
Dummy &lt;-  c(1, sample(c(0, 1), size = 19, replace = TRUE))
Data &lt;- data.frame(ID, Time, Dummy)

# Find start/end of spells denoted by Dummy = 1
DataSpell &lt;- StartEnd(Data, SpellVar = 'Dummy', GroupVar = 'ID',
                     TimeVar = 'Time', SpellValue = 1)

head(DataSpell)

</code></pre>

<hr>
<h2 id='TimeExpand'>Expands a data set so that it includes an observation for each time point in
a sequence. Works with grouped data.</h2><span id='topic+TimeExpand'></span>

<h3>Description</h3>

<p>Expands a data set so that it includes an observation for each time point in
a sequence. Works with grouped data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>TimeExpand(data, GroupVar, TimeVar, begin, end, by = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="TimeExpand_+3A_data">data</code></td>
<td>
<p>a data frame.</p>
</td></tr>
<tr><td><code id="TimeExpand_+3A_groupvar">GroupVar</code></td>
<td>
<p>the variable in <code>data</code> that signifies the group
variable.</p>
</td></tr>
<tr><td><code id="TimeExpand_+3A_timevar">TimeVar</code></td>
<td>
<p>the variable in <code>data</code> that signifies the time variable.
The sequence will be expanded between its minimum and maximum value if 
<code>begin</code> and <code>end</code> are not specified.</p>
</td></tr>
<tr><td><code id="TimeExpand_+3A_begin">begin</code></td>
<td>
<p>numeric of length 1. Specifies beginning time point. 
Only relevant if <code>end</code> is specified.</p>
</td></tr>
<tr><td><code id="TimeExpand_+3A_end">end</code></td>
<td>
<p>numeric of length 1. Specifies ending time point. 
Only relevant if <code>begin</code> is specified.</p>
</td></tr>
<tr><td><code id="TimeExpand_+3A_by">by</code></td>
<td>
<p>numeric or character string specifying the steps in the
<code>TimeVar</code> sequence. Can use <code>"month"</code>, <code>"year"</code> etc for
POSIXt data.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>Data &lt;- data.frame(country = c("Cambodia", "Camnodia", "Japan", "Japan"),
                   year = c(1990, 2001, 1994, 2012))

ExpandedData &lt;- TimeExpand(Data, GroupVar = 'country', TimeVar = 'year')

</code></pre>

<hr>
<h2 id='TimeFill'>Creates a continuous Unit-Time-Dummy data frame from a data frame with Unit-Start-End times</h2><span id='topic+TimeFill'></span>

<h3>Description</h3>

<p>Creates a continuous Unit-Time-Dummy data frame from a data frame with Unit-Start-End times
</p>


<h3>Usage</h3>

<pre><code class='language-R'>TimeFill(data, GroupVar, StartVar, EndVar, NewVar = "TimeFilled",
  NewTimeVar = "Time", KeepStartStop = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="TimeFill_+3A_data">data</code></td>
<td>
<p>a data frame with a Group, Start, and End variables.</p>
</td></tr>
<tr><td><code id="TimeFill_+3A_groupvar">GroupVar</code></td>
<td>
<p>a character string naming the variable grouping the units within which the new dummy variable will be found.</p>
</td></tr>
<tr><td><code id="TimeFill_+3A_startvar">StartVar</code></td>
<td>
<p>a character string indicating the variable with the starting times of some series.</p>
</td></tr>
<tr><td><code id="TimeFill_+3A_endvar">EndVar</code></td>
<td>
<p>a character string indicating the variable with the ending times of some series.</p>
</td></tr>
<tr><td><code id="TimeFill_+3A_newvar">NewVar</code></td>
<td>
<p>a character string specifying the name of the new dummy variable for the series. The default is <code>TimeFilled</code>.</p>
</td></tr>
<tr><td><code id="TimeFill_+3A_newtimevar">NewTimeVar</code></td>
<td>
<p>a character string specifying the name of the new time variable. The default is <code>Time</code>.</p>
</td></tr>
<tr><td><code id="TimeFill_+3A_keepstartstop">KeepStartStop</code></td>
<td>
<p>logical indicating whether or not to keep the <code>StartVar</code> and <code>EndVar</code> variables in the output data frame.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame with at least three columns, with the <code>GroupVar</code>, <code>NewTimeVar</code>, and a new dummy variable with the name specified by <code>NewVar</code>. This variable is <code>1</code> for every time increment between and including <code>StartVar</code> and <code>EndVar</code>. It is <code>0</code> otherwise.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create fake data

Country = c('Panama', 'Korea', 'Korea', 'Germany', 'Finland')
Start = c(1995, 1980, 2004, 2000, 2012)
End = c(1995, 2001, 2010, 2002, 2014)

Data &lt;- data.frame(Country, Start, End)

# TimeFill
FilledData &lt;- TimeFill(Data, GroupVar = 'Country',
                 StartVar = 'Start', EndVar = 'End')

# Show selection from TimeFill-ed data
FilledData[90:100, ]

</code></pre>

<hr>
<h2 id='VarDrop'>Drop one or more variables from a data frame.</h2><span id='topic+VarDrop'></span>

<h3>Description</h3>

<p><code>VarDrop</code> drops one or more variables from a data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>VarDrop(data, Var)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="VarDrop_+3A_data">data</code></td>
<td>
<p>a data frame.</p>
</td></tr>
<tr><td><code id="VarDrop_+3A_var">Var</code></td>
<td>
<p>character vector containing the names of the variables to drop.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Create dummy data
a &lt;- c(1, 2, 3, 4, NA)
b &lt;- c( 1, NA, 3, 4, 5)
c &lt;- c(1:5)
d &lt;- c(1:5)
ABCData &lt;- data.frame(a, b, c, d)

# Drop a and b
DroppedData &lt;- VarDrop(ABCData, c('b', 'c'))

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
