<!DOCTYPE html><html lang="en"><head><title>Help for package keyATM</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {keyATM}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#keyATM-package'><p>Keyword Assisted Topic Models</p></a></li>
<li><a href='#by_strata_DocTopic'><p>Estimate document-topic distribution by strata (for covariate models)</p></a></li>
<li><a href='#by_strata_TopicWord'><p>Estimate subsetted topic-word distribution</p></a></li>
<li><a href='#calc_PGtheta_R'><p>Calculate the probability for Polya-Gamma Covariate Model</p></a></li>
<li><a href='#covariates_get'><p>Return covariates used in the iteration</p></a></li>
<li><a href='#covariates_info'><p>Show covariates information</p></a></li>
<li><a href='#keyATM'><p>keyATM main function</p></a></li>
<li><a href='#keyATM_data_bills'><p>Bills data</p></a></li>
<li><a href='#keyATM_fit_base'><p>Run the Collapsed Gibbs sampler for the keyATM Base</p></a></li>
<li><a href='#keyATM_fit_cov'><p>Run the Collapsed Gibbs sampler for the keyATM covariates (Dir-Multi)</p></a></li>
<li><a href='#keyATM_fit_covPG'><p>Run the Collapsed Gibbs sampler for the keyATM covariates (Polya-Gamma)</p></a></li>
<li><a href='#keyATM_fit_HMM'><p>Run the Collapsed Gibbs sampler for the keyATM Dynamic</p></a></li>
<li><a href='#keyATM_fit_LDA'><p>Run the Collapsed Gibbs sampler for weighted LDA</p></a></li>
<li><a href='#keyATM_fit_LDAcov'><p>Run the Collapsed Gibbs sampler for weighted LDA with covariates</p></a></li>
<li><a href='#keyATM_fit_LDAHMM'><p>Run the Collapsed Gibbs sampler for the weighted LDA with HMM model</p></a></li>
<li><a href='#keyATM_initialize'><p>Initialize a keyATM model</p></a></li>
<li><a href='#keyATM_output'><p>Create an output object</p></a></li>
<li><a href='#keyATM_read'><p>Read texts</p></a></li>
<li><a href='#keyATMvb'><p>keyATM with Collapsed Variational Bayes</p></a></li>
<li><a href='#keyATMvb_call'><p>Run the Variational Bayes for the keyATM models</p></a></li>
<li><a href='#keyATMvb_fit'><p>Fit a keyATM model with Collapsed Variational Bayes</p></a></li>
<li><a href='#make_wsz_cpp'><p>Initialize assignments</p></a></li>
<li><a href='#multiPGreg'><p>Run multinomial regression with Polya-Gamma augmentation</p></a></li>
<li><a href='#plot_alpha'><p>Show a diagnosis plot of alpha</p></a></li>
<li><a href='#plot_modelfit'><p>Show a diagnosis plot of log-likelihood and perplexity</p></a></li>
<li><a href='#plot_pi'><p>Show a diagnosis plot of pi</p></a></li>
<li><a href='#plot_timetrend'><p>Plot time trend</p></a></li>
<li><a href='#plot_topicprop'><p>Show the expected proportion of the corpus belonging to each topic</p></a></li>
<li><a href='#plot.strata_doctopic'><p>Plot document-topic distribution by strata (for covariate models)</p></a></li>
<li><a href='#predict.keyATM_output'><p>Predict topic proportions for the covariate keyATM</p></a></li>
<li><a href='#read_dfm_cpp'><p>Read files from the quanteda dfm (this is the same as dgCMatrix)</p></a></li>
<li><a href='#read_keywords'><p>Convert a quanteda dictionary to keywords</p></a></li>
<li><a href='#save_fig'><p>Save a figure</p></a></li>
<li><a href='#semantic_coherence'><p>Semantic Coherence: Mimno et al. (2011)</p></a></li>
<li><a href='#top_docs'><p>Show the top documents for each topic</p></a></li>
<li><a href='#top_topics'><p>Show the top topics for each document</p></a></li>
<li><a href='#top_words'><p>Show the top words for each topic</p></a></li>
<li><a href='#values_fig'><p>Get values used to create a figure</p></a></li>
<li><a href='#visualize_keywords'><p>Visualize keywords</p></a></li>
<li><a href='#weightedLDA'><p>Weighted LDA main function</p></a></li>
<li><a href='#word_in_doc'><p>Checking if a word is in a document</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>0.5.2</td>
</tr>
<tr>
<td>Title:</td>
<td>Keyword Assisted Topic Models</td>
</tr>
<tr>
<td>Description:</td>
<td>Fits keyword assisted topic models (keyATM) using collapsed Gibbs samplers. The keyATM combines the latent dirichlet allocation (LDA) models with a small number of keywords selected by researchers in order to improve the interpretability and topic classification of the LDA. The keyATM can also incorporate covariates and directly model time trends. The keyATM is proposed in Eshima, Imai, and Sasaki (2024) &lt;<a href="https://doi.org/10.1111%2Fajps.12779">doi:10.1111/ajps.12779</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 1.0.7), cli (&ge; 3.6.1), dplyr (&ge; 1.1.0), fastmap,
future.apply, fs (&ge; 1.6.0), ggplot2 (&ge; 3.4.0), ggrepel,
magrittr, Matrix, matrixNormal (&ge; 0.1.0), MASS, pgdraw, purrr
(&ge; 1.0.0), quanteda (&ge; 3.3.0), rlang (&ge; 1.1.0), stringr,
tibble, tidyr (&ge; 1.0.0), tidyselect (&ge; 1.2.0)</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, RcppEigen, cli</td>
</tr>
<tr>
<td>Suggests:</td>
<td>readtext, stats, testthat (&ge; 3.1.5)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://keyatm.github.io/keyATM/">https://keyatm.github.io/keyATM/</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/keyATM/keyATM/issues">https://github.com/keyATM/keyATM/issues</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>C++17</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-04-24 11:20:17 UTC; shusei</td>
</tr>
<tr>
<td>Author:</td>
<td>Shusei Eshima <a href="https://orcid.org/0000-0003-3613-4046"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Tomoya Sasaki [aut],
  Kosuke Imai [aut],
  Chung-hong Chan <a href="https://orcid.org/0000-0002-6232-7530"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Romain François <a href="https://orcid.org/0000-0002-2444-4226"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  William Lowe [ctb],
  Seo-young Silvia Kim
    <a href="https://orcid.org/0000-0002-8801-9210"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Shusei Eshima &lt;shuseieshima@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-04-24 14:50:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='keyATM-package'>Keyword Assisted Topic Models</h2><span id='topic+keyATM-package'></span>

<h3>Description</h3>

<p>The implementation of keyATM models.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Shusei Eshima <a href="mailto:shuseieshima@gmail.com">shuseieshima@gmail.com</a> (<a href="https://orcid.org/0000-0003-3613-4046">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Tomoya Sasaki <a href="mailto:tomoyas@mit.edu">tomoyas@mit.edu</a>
</p>
</li>
<li><p> Kosuke Imai <a href="mailto:imai@harvard.edu">imai@harvard.edu</a>
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Chung-hong Chan <a href="mailto:chainsawtiney@gmail.com">chainsawtiney@gmail.com</a> (<a href="https://orcid.org/0000-0002-6232-7530">ORCID</a>) [contributor]
</p>
</li>
<li><p> Romain François (<a href="https://orcid.org/0000-0002-2444-4226">ORCID</a>) [contributor]
</p>
</li>
<li><p> William Lowe <a href="mailto:wlowe@princeton.edu">wlowe@princeton.edu</a> [contributor]
</p>
</li>
<li><p> Seo-young Silvia Kim <a href="mailto:sy.silvia.kim@gmail.com">sy.silvia.kim@gmail.com</a> (<a href="https://orcid.org/0000-0002-8801-9210">ORCID</a>) [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://keyatm.github.io/keyATM/">https://keyatm.github.io/keyATM/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/keyATM/keyATM/issues">https://github.com/keyATM/keyATM/issues</a>
</p>
</li></ul>


<hr>
<h2 id='by_strata_DocTopic'>Estimate document-topic distribution by strata (for covariate models)</h2><span id='topic+by_strata_DocTopic'></span>

<h3>Description</h3>

<p>Estimate document-topic distribution by strata (for covariate models)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>by_strata_DocTopic(x, by_var, labels, by_values = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="by_strata_DocTopic_+3A_x">x</code></td>
<td>
<p>the output from the covariate keyATM model (see <code><a href="#topic+keyATM">keyATM()</a></code>).</p>
</td></tr>
<tr><td><code id="by_strata_DocTopic_+3A_by_var">by_var</code></td>
<td>
<p>character. The name of the variable to use.</p>
</td></tr>
<tr><td><code id="by_strata_DocTopic_+3A_labels">labels</code></td>
<td>
<p>character. The labels for the values specified in <code>by_var</code> (ascending order).</p>
</td></tr>
<tr><td><code id="by_strata_DocTopic_+3A_by_values">by_values</code></td>
<td>
<p>numeric. Specific values for <code>by_var</code>, ordered from small to large. If it is not specified, all values in <code>by_var</code> will be used.</p>
</td></tr>
<tr><td><code id="by_strata_DocTopic_+3A_...">...</code></td>
<td>
<p>other arguments passed on to the <code><a href="#topic+predict.keyATM_output">predict.keyATM_output()</a></code> function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>strata_topicword object (a list).
</p>

<hr>
<h2 id='by_strata_TopicWord'>Estimate subsetted topic-word distribution</h2><span id='topic+by_strata_TopicWord'></span>

<h3>Description</h3>

<p>Estimate subsetted topic-word distribution
</p>


<h3>Usage</h3>

<pre><code class='language-R'>by_strata_TopicWord(x, keyATM_docs, by)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="by_strata_TopicWord_+3A_x">x</code></td>
<td>
<p>the output from a keyATM model (see <code><a href="#topic+keyATM">keyATM()</a></code>).</p>
</td></tr>
<tr><td><code id="by_strata_TopicWord_+3A_keyatm_docs">keyATM_docs</code></td>
<td>
<p>an object generated by <code><a href="#topic+keyATM_read">keyATM_read()</a></code>.</p>
</td></tr>
<tr><td><code id="by_strata_TopicWord_+3A_by">by</code></td>
<td>
<p>a vector whose length is the number of documents.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>strata_topicword object (a list).
</p>

<hr>
<h2 id='calc_PGtheta_R'>Calculate the probability for Polya-Gamma Covariate Model</h2><span id='topic+calc_PGtheta_R'></span>

<h3>Description</h3>

<p>Same as utils::calc_PGtheta, but this is for calling from R
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_PGtheta_R(theta_tilda, theta, num_doc, num_topics)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calc_PGtheta_R_+3A_theta_tilda">theta_tilda</code></td>
<td>
<p>Parameters</p>
</td></tr>
<tr><td><code id="calc_PGtheta_R_+3A_theta">theta</code></td>
<td>
<p>Parameters</p>
</td></tr>
<tr><td><code id="calc_PGtheta_R_+3A_num_doc">num_doc</code></td>
<td>
<p>Number of documents</p>
</td></tr>
<tr><td><code id="calc_PGtheta_R_+3A_num_topics">num_topics</code></td>
<td>
<p>Number of topics</p>
</td></tr>
</table>

<hr>
<h2 id='covariates_get'>Return covariates used in the iteration</h2><span id='topic+covariates_get'></span>

<h3>Description</h3>

<p>Return covariates used in the iteration
</p>


<h3>Usage</h3>

<pre><code class='language-R'>covariates_get(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="covariates_get_+3A_x">x</code></td>
<td>
<p>the output from the covariate keyATM model (see <code><a href="#topic+keyATM">keyATM()</a></code>)</p>
</td></tr>
</table>

<hr>
<h2 id='covariates_info'>Show covariates information</h2><span id='topic+covariates_info'></span>

<h3>Description</h3>

<p>Show covariates information
</p>


<h3>Usage</h3>

<pre><code class='language-R'>covariates_info(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="covariates_info_+3A_x">x</code></td>
<td>
<p>the output from the covariate keyATM model (see <code><a href="#topic+keyATM">keyATM()</a></code>).</p>
</td></tr>
</table>

<hr>
<h2 id='keyATM'>keyATM main function</h2><span id='topic+keyATM'></span>

<h3>Description</h3>

<p>Fit keyATM models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>keyATM(
  docs,
  model,
  no_keyword_topics,
  keywords = list(),
  model_settings = list(),
  priors = list(),
  options = list(),
  keep = c()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="keyATM_+3A_docs">docs</code></td>
<td>
<p>texts read via <code><a href="#topic+keyATM_read">keyATM_read()</a></code>.</p>
</td></tr>
<tr><td><code id="keyATM_+3A_model">model</code></td>
<td>
<p>keyATM model: <code>base</code>, <code>covariates</code>, and <code>dynamic</code>.</p>
</td></tr>
<tr><td><code id="keyATM_+3A_no_keyword_topics">no_keyword_topics</code></td>
<td>
<p>the number of regular topics.</p>
</td></tr>
<tr><td><code id="keyATM_+3A_keywords">keywords</code></td>
<td>
<p>a list of keywords.</p>
</td></tr>
<tr><td><code id="keyATM_+3A_model_settings">model_settings</code></td>
<td>
<p>a list of model specific settings (details are in the online documentation).</p>
</td></tr>
<tr><td><code id="keyATM_+3A_priors">priors</code></td>
<td>
<p>a list of priors of parameters.</p>
</td></tr>
<tr><td><code id="keyATM_+3A_options">options</code></td>
<td>
<p>a list of options </p>

<ul>
<li> <p><strong>seed</strong>: A numeric value for random seed. If it is not provided, the package randomly selects a seed.
</p>
</li>
<li> <p><strong>iterations</strong>: An integer. Number of iterations. Default is <code>1500</code>.
</p>
</li>
<li> <p><strong>verbose</strong>: If <code>TRUE</code>, it prints loglikelihood and perplexity. Default is <code>FALSE</code>.
</p>
</li>
<li> <p><strong>llk_per</strong>: An integer. If the value is <code>j</code> <strong>keyATM</strong> stores loglikelihood and perplexity every <code class="reqn">j</code> iteration. Default value is <code>10</code> per iterations
</p>
</li>
<li> <p><strong>use_weights</strong>: If <code>TRUE</code> use weight. Default is <code>TRUE</code>.
</p>
</li>
<li> <p><strong>weights_type</strong>: There are four types of weights. Weights based on the information theory (<code>information-theory</code>) and inverse frequency (<code>inv-freq</code>) and normalized versions of them (<code>information-theory-normalized</code> and <code>inv-freq-normalized</code>). Default is <code>information-theory</code>.
</p>
</li>
<li> <p><strong>prune</strong>: If <code>TRUE</code> rume keywords that do not appear in the corpus. Default is <code>TRUE</code>.
</p>
</li>
<li> <p><strong>store_theta</strong>: If <code>TRUE</code> or <code>1</code>, it stores <code class="reqn">\theta</code> (document-topic distribution) for the iteration specified by thinning. Default is <code>FALSE</code> (same as <code>0</code>).
</p>
</li>
<li> <p><strong>store_pi</strong>: If <code>TRUE</code> or <code>1</code>, it stores <code class="reqn">\pi</code> (the probability of using keyword topic word distribution) for the iteration specified by thinning. Default is <code>FALSE</code> (same as <code>0</code>).
</p>
</li>
<li> <p><strong>thinning</strong>: An integer. If the value is <code>j</code> <strong>keyATM</strong> stores following parameters every <code>j</code> iteration. The default is <code>5</code>. </p>

<ul>
<li> <p><em>theta</em>: For all models. If <code>store_theta</code> is <code>TRUE</code> document-level topic assignment is stored (sufficient statistics to calculate document-topic distributions <code>theta</code>).
</p>
</li>
<li> <p><em>alpha</em>: For the base and dynamic models. In the base model alpha is shared across all documents whereas each state has different alpha in the dynamic model.
</p>
</li>
<li> <p><em>lambda</em>: coefficients in the covariate model.
</p>
</li>
<li> <p><em>R</em>: For the dynamic model. The state each document belongs to.
</p>
</li>
<li> <p><em>P</em>: For the dynamic model. The state transition probability.
</p>
</li></ul>

</li>
<li> <p><strong>parallel_init</strong>: Parallelize processes to speed up initialization. Default is <code>FALSE</code>. Please <code>plan()</code> before use this feature.
</p>
</li>
<li> <p><strong>resume</strong>: The resume argument is used to save and load the intermediate results of the keyATM fitting process, allowing you to resume the fitting from a previous state. The default value is <code>NULL</code> (do not resume).
</p>
</li></ul>
</td></tr>
<tr><td><code id="keyATM_+3A_keep">keep</code></td>
<td>
<p>a vector of the names of elements you want to keep in output.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>keyATM_output</code> object containing:
</p>

<dl>
<dt>keyword_k</dt><dd><p>number of keyword topics</p>
</dd>
<dt>no_keyword_topics</dt><dd><p>number of no-keyword topics</p>
</dd>
<dt>V</dt><dd><p>number of terms (number of unique words)</p>
</dd>
<dt>N</dt><dd><p>number of documents</p>
</dd>
<dt>model</dt><dd><p>the name of the model</p>
</dd>
<dt>theta</dt><dd><p>topic proportions for each document (document-topic distribution)</p>
</dd>
<dt>phi</dt><dd><p>topic specific word generation probabilities (topic-word distribution)</p>
</dd>
<dt>topic_counts</dt><dd><p>number of tokens assigned to each topic</p>
</dd>
<dt>word_counts</dt><dd><p>number of times each word type appears</p>
</dd>
<dt>doc_lens</dt><dd><p>length of each document in tokens</p>
</dd>
<dt>vocab</dt><dd><p>words in the vocabulary (a vector of unique words)</p>
</dd>
<dt>priors</dt><dd><p>priors</p>
</dd>
<dt>options</dt><dd><p>options</p>
</dd>
<dt>keywords_raw</dt><dd><p>specified keywords</p>
</dd>
<dt>model_fit</dt><dd><p>perplexity and log-likelihood</p>
</dd>
<dt>pi</dt><dd><p>estimated <code class="reqn">\pi</code> (the probability of using keyword topic word distribution) for the last iteration</p>
</dd>
<dt>values_iter</dt><dd><p>values stored during iterations</p>
</dd>
<dt>kept_values</dt><dd><p>outputs you specified to store in <code>keep</code> option</p>
</dd>
<dt>information</dt><dd><p>information about the fitting</p>
</dd>
</dl>



<h3>See Also</h3>

<p><a href="https://keyatm.github.io/keyATM/articles/pkgdown_files/Options.html">https://keyatm.github.io/keyATM/articles/pkgdown_files/Options.html</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  library(keyATM)
  library(quanteda)
  data(keyATM_data_bills)
  bills_keywords &lt;- keyATM_data_bills$keywords
  bills_dfm &lt;- keyATM_data_bills$doc_dfm  # quanteda dfm object
  keyATM_docs &lt;- keyATM_read(bills_dfm)

  # keyATM Base
  out &lt;- keyATM(docs = keyATM_docs, model = "base",
                no_keyword_topics = 5, keywords = bills_keywords)

  # Visit our website for full examples: https://keyatm.github.io/keyATM/

## End(Not run)

</code></pre>

<hr>
<h2 id='keyATM_data_bills'>Bills data</h2><span id='topic+keyATM_data_bills'></span>

<h3>Description</h3>

<p>Bills data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>keyATM_data_bills
</code></pre>


<h3>Format</h3>

<p>A list with following objects:
</p>

<dl>
<dt>doc_dfm</dt><dd><p>A <code>quanteda</code> dfm object of 140 documents. The text data is a part of the Congressional Bills scraped from CONGRESS.GOV.</p>
</dd>
<dt>cov</dt><dd><p>An integer vector which takes one if the Republican proposed the bill.</p>
</dd>
<dt>keywords</dt><dd><p>A list of length 4 which contains keywords for four selected topics.</p>
</dd>
<dt>time_index</dt><dd><p>An integer vector indicating the session number of each bill.</p>
</dd>
<dt>labels</dt><dd><p>An integer vector indicating 40 labels.</p>
</dd>
<dt>labels_all</dt><dd><p>An integer vector indicating all labels.</p>
</dd>
</dl>



<h3>Source</h3>

<p>CONGRESS.GOV
</p>

<hr>
<h2 id='keyATM_fit_base'>Run the Collapsed Gibbs sampler for the keyATM Base</h2><span id='topic+keyATM_fit_base'></span>

<h3>Description</h3>

<p>Run the Collapsed Gibbs sampler for the keyATM Base
</p>


<h3>Usage</h3>

<pre><code class='language-R'>keyATM_fit_base(model, resume = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="keyATM_fit_base_+3A_model">model</code></td>
<td>
<p>A initialized model</p>
</td></tr>
<tr><td><code id="keyATM_fit_base_+3A_resume">resume</code></td>
<td>
<p>resume or not</p>
</td></tr>
</table>

<hr>
<h2 id='keyATM_fit_cov'>Run the Collapsed Gibbs sampler for the keyATM covariates (Dir-Multi)</h2><span id='topic+keyATM_fit_cov'></span>

<h3>Description</h3>

<p>Run the Collapsed Gibbs sampler for the keyATM covariates (Dir-Multi)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>keyATM_fit_cov(model, resume = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="keyATM_fit_cov_+3A_model">model</code></td>
<td>
<p>A initialized model</p>
</td></tr>
<tr><td><code id="keyATM_fit_cov_+3A_resume">resume</code></td>
<td>
<p>resume or not</p>
</td></tr>
</table>

<hr>
<h2 id='keyATM_fit_covPG'>Run the Collapsed Gibbs sampler for the keyATM covariates (Polya-Gamma)</h2><span id='topic+keyATM_fit_covPG'></span>

<h3>Description</h3>

<p>Run the Collapsed Gibbs sampler for the keyATM covariates (Polya-Gamma)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>keyATM_fit_covPG(model, resume = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="keyATM_fit_covPG_+3A_model">model</code></td>
<td>
<p>A initialized model</p>
</td></tr>
<tr><td><code id="keyATM_fit_covPG_+3A_resume">resume</code></td>
<td>
<p>resume or not</p>
</td></tr>
</table>

<hr>
<h2 id='keyATM_fit_HMM'>Run the Collapsed Gibbs sampler for the keyATM Dynamic</h2><span id='topic+keyATM_fit_HMM'></span>

<h3>Description</h3>

<p>Run the Collapsed Gibbs sampler for the keyATM Dynamic
</p>


<h3>Usage</h3>

<pre><code class='language-R'>keyATM_fit_HMM(model, resume = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="keyATM_fit_HMM_+3A_model">model</code></td>
<td>
<p>A initialized model</p>
</td></tr>
<tr><td><code id="keyATM_fit_HMM_+3A_resume">resume</code></td>
<td>
<p>resume or not</p>
</td></tr>
</table>

<hr>
<h2 id='keyATM_fit_LDA'>Run the Collapsed Gibbs sampler for weighted LDA</h2><span id='topic+keyATM_fit_LDA'></span>

<h3>Description</h3>

<p>Run the Collapsed Gibbs sampler for weighted LDA
</p>


<h3>Usage</h3>

<pre><code class='language-R'>keyATM_fit_LDA(model, resume = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="keyATM_fit_LDA_+3A_model">model</code></td>
<td>
<p>A initialized model</p>
</td></tr>
<tr><td><code id="keyATM_fit_LDA_+3A_resume">resume</code></td>
<td>
<p>resume or not</p>
</td></tr>
</table>

<hr>
<h2 id='keyATM_fit_LDAcov'>Run the Collapsed Gibbs sampler for weighted LDA with covariates</h2><span id='topic+keyATM_fit_LDAcov'></span>

<h3>Description</h3>

<p>Run the Collapsed Gibbs sampler for weighted LDA with covariates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>keyATM_fit_LDAcov(model, resume = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="keyATM_fit_LDAcov_+3A_model">model</code></td>
<td>
<p>A initialized model</p>
</td></tr>
<tr><td><code id="keyATM_fit_LDAcov_+3A_resume">resume</code></td>
<td>
<p>resume or not</p>
</td></tr>
</table>

<hr>
<h2 id='keyATM_fit_LDAHMM'>Run the Collapsed Gibbs sampler for the weighted LDA with HMM model</h2><span id='topic+keyATM_fit_LDAHMM'></span>

<h3>Description</h3>

<p>Run the Collapsed Gibbs sampler for the weighted LDA with HMM model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>keyATM_fit_LDAHMM(model, resume = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="keyATM_fit_LDAHMM_+3A_model">model</code></td>
<td>
<p>A initialized model</p>
</td></tr>
<tr><td><code id="keyATM_fit_LDAHMM_+3A_resume">resume</code></td>
<td>
<p>resume or not</p>
</td></tr>
</table>

<hr>
<h2 id='keyATM_initialize'>Initialize a keyATM model</h2><span id='topic+keyATM_initialize'></span>

<h3>Description</h3>

<p>keyATM_initialize is wrapped by keyATM() and weightedLDA()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>keyATM_initialize(
  docs,
  model,
  no_keyword_topics,
  keywords = list(),
  model_settings = list(),
  priors = list(),
  options = list()
)
</code></pre>

<hr>
<h2 id='keyATM_output'>Create an output object</h2><span id='topic+keyATM_output'></span>

<h3>Description</h3>

<p>Create an output object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>keyATM_output(model, keep, used_iter)
</code></pre>

<hr>
<h2 id='keyATM_read'>Read texts</h2><span id='topic+keyATM_read'></span>

<h3>Description</h3>

<p>Read texts and create a <code>keyATM_docs</code> object, which is a list of texts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>keyATM_read(
  texts,
  encoding = "UTF-8",
  check = TRUE,
  keep_docnames = FALSE,
  split = 0
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="keyATM_read_+3A_texts">texts</code></td>
<td>
<p>input. keyATM takes a quanteda dfm (dgCMatrix), data.frame, <span class="pkg">tibble</span> tbl_df, or a vector of file paths.</p>
</td></tr>
<tr><td><code id="keyATM_read_+3A_encoding">encoding</code></td>
<td>
<p>character. Only used when <code>texts</code> is a vector of file paths. Default is <code>UTF-8</code>.</p>
</td></tr>
<tr><td><code id="keyATM_read_+3A_check">check</code></td>
<td>
<p>logical. If <code>TRUE</code>, check whether there is anything wrong with the structure of texts. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="keyATM_read_+3A_keep_docnames">keep_docnames</code></td>
<td>
<p>logical. If <code>TRUE</code>, it keeps the document names in a quanteda dfm. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="keyATM_read_+3A_split">split</code></td>
<td>
<p>numeric. This option works only with a quanteda dfm. It creates a two subset of the dfm by randomly splitting each document (i.e., the total number of documents is the same between two subsets). This option specifies the split proportion. Default is <code>0</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a keyATM_docs object. The first element is a list whose elements are split texts. The length of the list equals to the number of documents.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 # Use quanteda dfm
 keyATM_docs &lt;- keyATM_read(texts = quanteda_dfm)

 # Use data.frame or tibble (texts should be stored in a column named `text`)
 keyATM_docs &lt;- keyATM_read(texts = data_frame_object)
 keyATM_docs &lt;- keyATM_read(texts = tibble_object)

 # Use a vector that stores full paths to the text files
 files &lt;- list.files(doc_folder, pattern = "*.txt", full.names = TRUE)
 keyATM_docs &lt;- keyATM_read(texts = files)


## End(Not run)
</code></pre>

<hr>
<h2 id='keyATMvb'>keyATM with Collapsed Variational Bayes</h2><span id='topic+keyATMvb'></span>

<h3>Description</h3>

<p><strong>Experimental feature:</strong> Fit keyATM base with Collapsed Variational Bayes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>keyATMvb(
  docs,
  model,
  no_keyword_topics,
  keywords = list(),
  model_settings = list(),
  vb_options = list(),
  priors = list(),
  options = list(),
  keep = list()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="keyATMvb_+3A_docs">docs</code></td>
<td>
<p>texts read via <code><a href="#topic+keyATM_read">keyATM_read()</a></code></p>
</td></tr>
<tr><td><code id="keyATMvb_+3A_model">model</code></td>
<td>
<p>keyATM model: <code>base</code>, <code>covariates</code>, and <code>dynamic</code></p>
</td></tr>
<tr><td><code id="keyATMvb_+3A_no_keyword_topics">no_keyword_topics</code></td>
<td>
<p>the number of regular topics</p>
</td></tr>
<tr><td><code id="keyATMvb_+3A_keywords">keywords</code></td>
<td>
<p>a list of keywords</p>
</td></tr>
<tr><td><code id="keyATMvb_+3A_model_settings">model_settings</code></td>
<td>
<p>a list of model specific settings (details are in the online documentation)</p>
</td></tr>
<tr><td><code id="keyATMvb_+3A_vb_options">vb_options</code></td>
<td>
<p>a list of settings for Variational Bayes </p>

<ul>
<li> <p><strong>convtol</strong>: the default is <code>1e-4</code>
</p>
</li>
<li> <p><strong>init</strong>: <code>mcmc</code> (default) or <code>random</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="keyATMvb_+3A_priors">priors</code></td>
<td>
<p>a list of priors of parameters</p>
</td></tr>
<tr><td><code id="keyATMvb_+3A_options">options</code></td>
<td>
<p>a list of options same as <code><a href="#topic+keyATM">keyATM()</a></code>. Options are used when initialization method is <code>mcmc</code>.</p>
</td></tr>
<tr><td><code id="keyATMvb_+3A_keep">keep</code></td>
<td>
<p>a vector of the names of elements you want to keep in output</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>keyATM_output</code> object
</p>


<h3>See Also</h3>

<p><a href="https://keyatm.github.io/keyATM/articles/pkgdown_files/keyATMvb.html">https://keyatm.github.io/keyATM/articles/pkgdown_files/keyATMvb.html</a>
</p>

<hr>
<h2 id='keyATMvb_call'>Run the Variational Bayes for the keyATM models</h2><span id='topic+keyATMvb_call'></span>

<h3>Description</h3>

<p>Run the Variational Bayes for the keyATM models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>keyATMvb_call(model)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="keyATMvb_call_+3A_model">model</code></td>
<td>
<p>A model</p>
</td></tr>
</table>

<hr>
<h2 id='keyATMvb_fit'>Fit a keyATM model with Collapsed Variational Bayes</h2><span id='topic+keyATMvb_fit'></span>

<h3>Description</h3>

<p>Fit a keyATM model with Collapsed Variational Bayes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>keyATMvb_fit(
  docs,
  model,
  no_keyword_topics,
  keywords = list(),
  model_settings = list(),
  vb_options = list(),
  priors = list(),
  options = list()
)
</code></pre>

<hr>
<h2 id='make_wsz_cpp'>Initialize assignments</h2><span id='topic+make_wsz_cpp'></span>

<h3>Description</h3>

<p>Initialize assignments
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_wsz_cpp(docs_, info_, initialized_)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_wsz_cpp_+3A_docs_">docs_</code></td>
<td>
<p>Documents</p>
</td></tr>
<tr><td><code id="make_wsz_cpp_+3A_info_">info_</code></td>
<td>
<p>Various information</p>
</td></tr>
<tr><td><code id="make_wsz_cpp_+3A_initialized_">initialized_</code></td>
<td>
<p>Store initialized objects (W, S and Z)</p>
</td></tr>
</table>

<hr>
<h2 id='multiPGreg'>Run multinomial regression with Polya-Gamma augmentation</h2><span id='topic+multiPGreg'></span>

<h3>Description</h3>

<p>Run multinomial regression with Polya-Gamma augmentation. There is no need to call this function directly. The keyATM Covariate internally uses this.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multiPGreg(Y, X, num_topics, PG_params, iter = 1, store_lambda = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="multiPGreg_+3A_y">Y</code></td>
<td>
<p>Outcomes.</p>
</td></tr>
<tr><td><code id="multiPGreg_+3A_x">X</code></td>
<td>
<p>Covariates.</p>
</td></tr>
<tr><td><code id="multiPGreg_+3A_num_topics">num_topics</code></td>
<td>
<p>Number of topics.</p>
</td></tr>
<tr><td><code id="multiPGreg_+3A_pg_params">PG_params</code></td>
<td>
<p>Parameters used in this function.</p>
</td></tr>
<tr><td><code id="multiPGreg_+3A_iter">iter</code></td>
<td>
<p>The default is <code>1</code>.</p>
</td></tr>
<tr><td><code id="multiPGreg_+3A_store_lambda">store_lambda</code></td>
<td>
<p>The default is <code>0</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='plot_alpha'>Show a diagnosis plot of alpha</h2><span id='topic+plot_alpha'></span>

<h3>Description</h3>

<p>Show a diagnosis plot of alpha
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_alpha(x, start = 0, show_topic = NULL, scales = "fixed")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_alpha_+3A_x">x</code></td>
<td>
<p>the output from a keyATM model (see <code><a href="#topic+keyATM">keyATM()</a></code>).</p>
</td></tr>
<tr><td><code id="plot_alpha_+3A_start">start</code></td>
<td>
<p>integer. The start of slice iteration. Default is <code>0</code>.</p>
</td></tr>
<tr><td><code id="plot_alpha_+3A_show_topic">show_topic</code></td>
<td>
<p>a vector to specify topic indexes to show. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="plot_alpha_+3A_scales">scales</code></td>
<td>
<p>character. Control the scale of y-axis (the parameter in <a href="ggplot2.html#topic+facet_wrap">ggplot2::facet_wrap()</a>): <code>free</code> adjusts y-axis for parameters. Default is <code>fixed</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>keyATM_fig object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+save_fig">save_fig()</a></code>
</p>

<hr>
<h2 id='plot_modelfit'>Show a diagnosis plot of log-likelihood and perplexity</h2><span id='topic+plot_modelfit'></span>

<h3>Description</h3>

<p>Show a diagnosis plot of log-likelihood and perplexity
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_modelfit(x, start = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_modelfit_+3A_x">x</code></td>
<td>
<p>the output from a keyATM model (see <code><a href="#topic+keyATM">keyATM()</a></code>).</p>
</td></tr>
<tr><td><code id="plot_modelfit_+3A_start">start</code></td>
<td>
<p>integer. The starting value of iteration to use in plot. Default is <code>1</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>keyATM_fig object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+save_fig">save_fig()</a></code>
</p>

<hr>
<h2 id='plot_pi'>Show a diagnosis plot of pi</h2><span id='topic+plot_pi'></span>

<h3>Description</h3>

<p>Show a diagnosis plot of pi
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_pi(
  x,
  show_topic = NULL,
  start = 0,
  ci = 0.9,
  method = c("hdi", "eti"),
  point = c("mean", "median")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_pi_+3A_x">x</code></td>
<td>
<p>the output from a keyATM model (see <code><a href="#topic+keyATM">keyATM()</a></code>).</p>
</td></tr>
<tr><td><code id="plot_pi_+3A_show_topic">show_topic</code></td>
<td>
<p>an integer or a vector. Indicate topics to visualize. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="plot_pi_+3A_start">start</code></td>
<td>
<p>integer. The starting value of iteration to use in the plot. Default is <code>0</code>.</p>
</td></tr>
<tr><td><code id="plot_pi_+3A_ci">ci</code></td>
<td>
<p>value of the credible interval (between 0 and 1) to be estimated. Default is <code>0.9</code> (90%). This is an option when calculating credible intervals (you need to set <code>store_pi = TRUE</code> in <code><a href="#topic+keyATM">keyATM()</a></code>).</p>
</td></tr>
<tr><td><code id="plot_pi_+3A_method">method</code></td>
<td>
<p>method for computing the credible interval. The Highest Density Interval (<code>hdi</code>, default) or Equal-tailed Interval (<code>eti</code>). This is an option when calculating credible intervals (you need to set <code>store_pi = TRUE</code> in <code><a href="#topic+keyATM">keyATM()</a></code>).</p>
</td></tr>
<tr><td><code id="plot_pi_+3A_point">point</code></td>
<td>
<p>method for computing the point estimate. <code>mean</code> (default) or <code>median</code>. This is an option when calculating credible intervals (you need to set <code>store_pi = TRUE</code> in <code><a href="#topic+keyATM">keyATM()</a></code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>keyATM_fig object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+save_fig">save_fig()</a></code>
</p>

<hr>
<h2 id='plot_timetrend'>Plot time trend</h2><span id='topic+plot_timetrend'></span>

<h3>Description</h3>

<p>Plot time trend
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_timetrend(
  x,
  show_topic = NULL,
  time_index_label = NULL,
  ci = 0.9,
  method = c("hdi", "eti"),
  point = c("mean", "median"),
  xlab = "Time",
  scales = "fixed",
  show_point = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_timetrend_+3A_x">x</code></td>
<td>
<p>the output from the dynamic keyATM model (see <code><a href="#topic+keyATM">keyATM()</a></code>).</p>
</td></tr>
<tr><td><code id="plot_timetrend_+3A_show_topic">show_topic</code></td>
<td>
<p>an integer or a vector. Indicate topics to visualize. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="plot_timetrend_+3A_time_index_label">time_index_label</code></td>
<td>
<p>a vector. The label for time index. The length should be equal to the number of documents (time index provided to <code><a href="#topic+keyATM">keyATM()</a></code>).</p>
</td></tr>
<tr><td><code id="plot_timetrend_+3A_ci">ci</code></td>
<td>
<p>value of the credible interval (between 0 and 1) to be estimated. Default is <code>0.9</code> (90%). This is an option when calculating credible intervals (you need to set <code>store_theta = TRUE</code> in <code><a href="#topic+keyATM">keyATM()</a></code>).</p>
</td></tr>
<tr><td><code id="plot_timetrend_+3A_method">method</code></td>
<td>
<p>method for computing the credible interval. The Highest Density Interval (<code>hdi</code>, default) or Equal-tailed Interval (<code>eti</code>). This is an option when calculating credible intervals (you need to set <code>store_theta = TRUE</code> in <code><a href="#topic+keyATM">keyATM()</a></code>).</p>
</td></tr>
<tr><td><code id="plot_timetrend_+3A_point">point</code></td>
<td>
<p>method for computing the point estimate. <code>mean</code> (default) or <code>median</code>. This is an option when calculating credible intervals (you need to set <code>store_theta = TRUE</code> in <code><a href="#topic+keyATM">keyATM()</a></code>).</p>
</td></tr>
<tr><td><code id="plot_timetrend_+3A_xlab">xlab</code></td>
<td>
<p>a character.</p>
</td></tr>
<tr><td><code id="plot_timetrend_+3A_scales">scales</code></td>
<td>
<p>character. Control the scale of y-axis (the parameter in <a href="ggplot2.html#topic+facet_wrap">ggplot2::facet_wrap()</a>): <code>free</code> adjusts y-axis for parameters. Default is <code>fixed</code>.</p>
</td></tr>
<tr><td><code id="plot_timetrend_+3A_show_point">show_point</code></td>
<td>
<p>logical. The default is <code>TRUE</code>. This is an option when calculating credible intervals.</p>
</td></tr>
<tr><td><code id="plot_timetrend_+3A_...">...</code></td>
<td>
<p>additional arguments not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>keyATM_fig object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+save_fig">save_fig()</a></code>
</p>

<hr>
<h2 id='plot_topicprop'>Show the expected proportion of the corpus belonging to each topic</h2><span id='topic+plot_topicprop'></span>

<h3>Description</h3>

<p>Show the expected proportion of the corpus belonging to each topic
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_topicprop(
  x,
  n = 3,
  show_topic = NULL,
  show_topwords = TRUE,
  label_topic = NULL,
  order = c("proportion", "topicid"),
  xmax = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_topicprop_+3A_x">x</code></td>
<td>
<p>the output from a keyATM model (see <code><a href="#topic+keyATM">keyATM()</a></code>).</p>
</td></tr>
<tr><td><code id="plot_topicprop_+3A_n">n</code></td>
<td>
<p>The number of top words to show. Default is <code>3</code>.</p>
</td></tr>
<tr><td><code id="plot_topicprop_+3A_show_topic">show_topic</code></td>
<td>
<p>an integer or a vector. Indicate topics to visualize. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="plot_topicprop_+3A_show_topwords">show_topwords</code></td>
<td>
<p>logical. Show topwords. The default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="plot_topicprop_+3A_label_topic">label_topic</code></td>
<td>
<p>a character vector. The name of the topics in the plot.</p>
</td></tr>
<tr><td><code id="plot_topicprop_+3A_order">order</code></td>
<td>
<p>The order of topics.</p>
</td></tr>
<tr><td><code id="plot_topicprop_+3A_xmax">xmax</code></td>
<td>
<p>a numeric. Indicate the max value on the x axis</p>
</td></tr>
</table>


<h3>Value</h3>

<p>keyATM_fig object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+save_fig">save_fig()</a></code>
</p>

<hr>
<h2 id='plot.strata_doctopic'>Plot document-topic distribution by strata (for covariate models)</h2><span id='topic+plot.strata_doctopic'></span>

<h3>Description</h3>

<p>Plot document-topic distribution by strata (for covariate models)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'strata_doctopic'
plot(
  x,
  show_topic = NULL,
  var_name = NULL,
  by = c("topic", "covariate"),
  ci = 0.9,
  method = c("hdi", "eti"),
  point = c("mean", "median"),
  width = 0.1,
  show_point = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.strata_doctopic_+3A_x">x</code></td>
<td>
<p>a strata_doctopic object (see <code><a href="#topic+by_strata_DocTopic">by_strata_DocTopic()</a></code>).</p>
</td></tr>
<tr><td><code id="plot.strata_doctopic_+3A_show_topic">show_topic</code></td>
<td>
<p>a vector or an integer. Indicate topics to visualize.</p>
</td></tr>
<tr><td><code id="plot.strata_doctopic_+3A_var_name">var_name</code></td>
<td>
<p>the name of the variable in the plot.</p>
</td></tr>
<tr><td><code id="plot.strata_doctopic_+3A_by">by</code></td>
<td>
<p><code>topic</code> or <code>covariate</code>. Default is by <code>topic</code>.</p>
</td></tr>
<tr><td><code id="plot.strata_doctopic_+3A_ci">ci</code></td>
<td>
<p>value of the credible interval (between 0 and 1) to be estimated. Default is <code>0.9</code> (90%).</p>
</td></tr>
<tr><td><code id="plot.strata_doctopic_+3A_method">method</code></td>
<td>
<p>method for computing the credible interval. The Highest Density Interval (<code>hdi</code>, default) or Equal-tailed Interval (<code>eti</code>).</p>
</td></tr>
<tr><td><code id="plot.strata_doctopic_+3A_point">point</code></td>
<td>
<p>method for computing the point estimate. <code>mean</code> (default) or <code>median</code>.</p>
</td></tr>
<tr><td><code id="plot.strata_doctopic_+3A_width">width</code></td>
<td>
<p>numeric. Width of the error bars.</p>
</td></tr>
<tr><td><code id="plot.strata_doctopic_+3A_show_point">show_point</code></td>
<td>
<p>logical. Show point estimates. The default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="plot.strata_doctopic_+3A_...">...</code></td>
<td>
<p>additional arguments not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>keyATM_fig object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+save_fig">save_fig()</a></code>, <code><a href="#topic+by_strata_DocTopic">by_strata_DocTopic()</a></code>
</p>

<hr>
<h2 id='predict.keyATM_output'>Predict topic proportions for the covariate keyATM</h2><span id='topic+predict.keyATM_output'></span>

<h3>Description</h3>

<p>Predict topic proportions for the covariate keyATM
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'keyATM_output'
predict(
  object,
  newdata,
  transform = FALSE,
  burn_in = NULL,
  parallel = TRUE,
  posterior_mean = TRUE,
  ci = 0.9,
  method = c("hdi", "eti"),
  point = c("mean", "median"),
  label = NULL,
  raw_values = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict.keyATM_output_+3A_object">object</code></td>
<td>
<p>the keyATM_output object for the covariate model.</p>
</td></tr>
<tr><td><code id="predict.keyATM_output_+3A_newdata">newdata</code></td>
<td>
<p>New observations which should be predicted.</p>
</td></tr>
<tr><td><code id="predict.keyATM_output_+3A_transform">transform</code></td>
<td>
<p>Transorm and standardize the <code>newdata</code> with the same formula and option as <code>model_settings</code> used in <code><a href="#topic+keyATM">keyATM()</a></code>.</p>
</td></tr>
<tr><td><code id="predict.keyATM_output_+3A_burn_in">burn_in</code></td>
<td>
<p>integer. Burn-in period. If not specified, it is the half of samples. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="predict.keyATM_output_+3A_parallel">parallel</code></td>
<td>
<p>logical. If <code>TRUE</code>, parallelization for speeding up. Default is <code>TRUE</code>. Please <code>plan()</code> before use this function.</p>
</td></tr>
<tr><td><code id="predict.keyATM_output_+3A_posterior_mean">posterior_mean</code></td>
<td>
<p>logical. If <code>TRUE</code>, the quantity of interest to estimate is the posterior mean. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="predict.keyATM_output_+3A_ci">ci</code></td>
<td>
<p>value of the credible interval (between 0 and 1) to be estimated. Default is <code>0.9</code> (90%).</p>
</td></tr>
<tr><td><code id="predict.keyATM_output_+3A_method">method</code></td>
<td>
<p>method for computing the credible interval. The Highest Density Interval (<code>hdi</code>, default) or Equal-tailed Interval (<code>eti</code>).</p>
</td></tr>
<tr><td><code id="predict.keyATM_output_+3A_point">point</code></td>
<td>
<p>method for computing the point estimate. <code>mean</code> (default) or <code>median</code>.</p>
</td></tr>
<tr><td><code id="predict.keyATM_output_+3A_label">label</code></td>
<td>
<p>a character. Add a <code>label</code> column to the output. The default is <code>NULL</code> (do not add it).</p>
</td></tr>
<tr><td><code id="predict.keyATM_output_+3A_raw_values">raw_values</code></td>
<td>
<p>a logical. Returns raw values. The default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="predict.keyATM_output_+3A_...">...</code></td>
<td>
<p>additional arguments not used.</p>
</td></tr>
</table>

<hr>
<h2 id='read_dfm_cpp'>Read files from the quanteda dfm (this is the same as dgCMatrix)</h2><span id='topic+read_dfm_cpp'></span>

<h3>Description</h3>

<p>Read files from the quanteda dfm (this is the same as dgCMatrix)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_dfm_cpp(dfm, W_read, vocab, split)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_dfm_cpp_+3A_dfm">dfm</code></td>
<td>
<p>a dfm input (sparse Matrix)</p>
</td></tr>
<tr><td><code id="read_dfm_cpp_+3A_w_read">W_read</code></td>
<td>
<p>an object to return</p>
</td></tr>
<tr><td><code id="read_dfm_cpp_+3A_vocab">vocab</code></td>
<td>
<p>a vector of vocabulary</p>
</td></tr>
<tr><td><code id="read_dfm_cpp_+3A_split">split</code></td>
<td>
<p>split proportion</p>
</td></tr>
</table>

<hr>
<h2 id='read_keywords'>Convert a quanteda dictionary to keywords</h2><span id='topic+read_keywords'></span>

<h3>Description</h3>

<p>This function converts or reads a dictionary object from quanteda to a named list. &quot;Glob&quot;-style wildcard expressions (e.g. politic*) are resolved based on the available terms in your texts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_keywords(file = NULL, docs = NULL, dictionary = NULL, split = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_keywords_+3A_file">file</code></td>
<td>
<p>file identifier for a foreign dictionary, e.g. path to a dictionary in YAML or LIWC format</p>
</td></tr>
<tr><td><code id="read_keywords_+3A_docs">docs</code></td>
<td>
<p>texts read via <code><a href="#topic+keyATM_read">keyATM_read()</a></code></p>
</td></tr>
<tr><td><code id="read_keywords_+3A_dictionary">dictionary</code></td>
<td>
<p>a quanteda dictionary object, ignore if file is not NULL</p>
</td></tr>
<tr><td><code id="read_keywords_+3A_split">split</code></td>
<td>
<p>boolean, if multi-word terms be seperated, e.g. &quot;air force&quot; splits into &quot;air&quot; and &quot;force&quot;.</p>
</td></tr>
<tr><td><code id="read_keywords_+3A_...">...</code></td>
<td>
<p>additional parameters for <code><a href="quanteda.html#topic+dictionary">quanteda::dictionary()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a named list which can be used as keywords for e.g. <code><a href="#topic+keyATM">keyATM()</a></code>
</p>


<h3>See Also</h3>

<p><code>dictionary</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  library(keyATM)
  library(quanteda)
  ## using the moral foundation dictionary example from quanteda
  dictfile &lt;- tempfile()
  download.file("http://bit.ly/37cV95h", dictfile)
  data(keyATM_data_bills)
  bills_dfm &lt;- keyATM_data_bills$doc_dfm
  keyATM_docs &lt;- keyATM_read(bills_dfm)
  read_keywords(file = dictfile, docs = keyATM_docs, format = "LIWC")

## End(Not run)
</code></pre>

<hr>
<h2 id='save_fig'>Save a figure</h2><span id='topic+save_fig'></span>

<h3>Description</h3>

<p>Save a figure
</p>


<h3>Usage</h3>

<pre><code class='language-R'>save_fig(x, filename, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="save_fig_+3A_x">x</code></td>
<td>
<p>the keyATM_fig object.</p>
</td></tr>
<tr><td><code id="save_fig_+3A_filename">filename</code></td>
<td>
<p>file name to create on disk.</p>
</td></tr>
<tr><td><code id="save_fig_+3A_...">...</code></td>
<td>
<p>other arguments passed on to the <a href="ggplot2.html#topic+ggsave">ggplot2::ggsave()</a> function.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+visualize_keywords">visualize_keywords()</a></code>, <code><a href="#topic+plot_alpha">plot_alpha()</a></code>, <code><a href="#topic+plot_modelfit">plot_modelfit()</a></code>, <code><a href="#topic+plot_pi">plot_pi()</a></code>, <code><a href="#topic+plot_timetrend">plot_timetrend()</a></code>, <code><a href="#topic+plot_topicprop">plot_topicprop()</a></code>, <code><a href="#topic+by_strata_DocTopic">by_strata_DocTopic()</a></code>, <code><a href="#topic+values_fig">values_fig()</a></code>
</p>

<hr>
<h2 id='semantic_coherence'>Semantic Coherence: Mimno et al. (2011)</h2><span id='topic+semantic_coherence'></span>

<h3>Description</h3>

<p>Mimno, David et al. 2011. “Optimizing Semantic Coherence in Topic Models.”
In Proceedings of the 2011 Conference on Empirical Methods in Natural
Language Processing, Edinburgh, Scotland, UK.: Association for Computational
Linguistics, 262–72. https://aclanthology.org/D11-1024.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>semantic_coherence(x, docs, n = 10)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="semantic_coherence_+3A_x">x</code></td>
<td>
<p>the output from a keyATM model (see <code><a href="#topic+keyATM">keyATM()</a></code>).</p>
</td></tr>
<tr><td><code id="semantic_coherence_+3A_docs">docs</code></td>
<td>
<p>texts read via <code><a href="#topic+keyATM_read">keyATM_read()</a></code>.</p>
</td></tr>
<tr><td><code id="semantic_coherence_+3A_n">n</code></td>
<td>
<p>integer. The number terms to visualize. Default is <code>10</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Equation 1 of Mimno et al. 2011 adopted to keyATM.
</p>


<h3>Value</h3>

<p>A vector of topic coherence metric calculated by each topic.
</p>

<hr>
<h2 id='top_docs'>Show the top documents for each topic</h2><span id='topic+top_docs'></span>

<h3>Description</h3>

<p>Show the top documents for each topic
</p>


<h3>Usage</h3>

<pre><code class='language-R'>top_docs(x, n = 10)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="top_docs_+3A_x">x</code></td>
<td>
<p>the output from a keyATM model (see <code><a href="#topic+keyATM">keyATM()</a></code>).</p>
</td></tr>
<tr><td><code id="top_docs_+3A_n">n</code></td>
<td>
<p>How many documents to show. Default is <code>10</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An n x k table of the top n documents for each topic, each number is a document index.
</p>

<hr>
<h2 id='top_topics'>Show the top topics for each document</h2><span id='topic+top_topics'></span>

<h3>Description</h3>

<p>Show the top topics for each document
</p>


<h3>Usage</h3>

<pre><code class='language-R'>top_topics(x, n = 2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="top_topics_+3A_x">x</code></td>
<td>
<p>the output from a keyATM model (see <code><a href="#topic+keyATM">keyATM()</a></code>).</p>
</td></tr>
<tr><td><code id="top_topics_+3A_n">n</code></td>
<td>
<p>integer. The number of topics to show. Default is <code>2</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An n x k table of the top n topics in each document.
</p>

<hr>
<h2 id='top_words'>Show the top words for each topic</h2><span id='topic+top_words'></span>

<h3>Description</h3>

<p>If <code>show_keyword</code> is <code>TRUE</code> then words in their keyword topics
are suffixed with a check mark. Words from another keyword topic
are labeled with the name of that category.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>top_words(x, n = 10, measure = c("probability", "lift"), show_keyword = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="top_words_+3A_x">x</code></td>
<td>
<p>the output (see <code><a href="#topic+keyATM">keyATM()</a></code> and <code><a href="#topic+by_strata_TopicWord">by_strata_TopicWord()</a></code>).</p>
</td></tr>
<tr><td><code id="top_words_+3A_n">n</code></td>
<td>
<p>integer. The number terms to visualize. Default is <code>10</code>.</p>
</td></tr>
<tr><td><code id="top_words_+3A_measure">measure</code></td>
<td>
<p>character. The way to sort the terms: <code>probability</code> (default) or <code>lift</code>.</p>
</td></tr>
<tr><td><code id="top_words_+3A_show_keyword">show_keyword</code></td>
<td>
<p>logical. If <code>TRUE</code>, mark keywords. Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An n x k table of the top n words in each topic
</p>

<hr>
<h2 id='values_fig'>Get values used to create a figure</h2><span id='topic+values_fig'></span>

<h3>Description</h3>

<p>Get values used to create a figure
</p>


<h3>Usage</h3>

<pre><code class='language-R'>values_fig(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="values_fig_+3A_x">x</code></td>
<td>
<p>the keyATM_fig object.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+save_fig">save_fig()</a></code>, <code><a href="#topic+visualize_keywords">visualize_keywords()</a></code>, <code><a href="#topic+plot_alpha">plot_alpha()</a></code>, <code><a href="#topic+plot_modelfit">plot_modelfit()</a></code>, <code><a href="#topic+plot_pi">plot_pi()</a></code>, <code><a href="#topic+plot_timetrend">plot_timetrend()</a></code>, <code><a href="#topic+plot_topicprop">plot_topicprop()</a></code>, <code><a href="#topic+by_strata_DocTopic">by_strata_DocTopic()</a></code>
</p>

<hr>
<h2 id='visualize_keywords'>Visualize keywords</h2><span id='topic+visualize_keywords'></span>

<h3>Description</h3>

<p>Visualize the proportion of keywords in the documents.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>visualize_keywords(docs, keywords, prune = TRUE, label_size = 3.2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="visualize_keywords_+3A_docs">docs</code></td>
<td>
<p>a keyATM_docs object, generated by <code>keyATM_read()</code> function</p>
</td></tr>
<tr><td><code id="visualize_keywords_+3A_keywords">keywords</code></td>
<td>
<p>a list of keywords</p>
</td></tr>
<tr><td><code id="visualize_keywords_+3A_prune">prune</code></td>
<td>
<p>logical. If <code>TRUE</code>, prune keywords that do not appear in <code>docs</code>. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="visualize_keywords_+3A_label_size">label_size</code></td>
<td>
<p>the size of keyword labels in the output plot. Default is <code>3.2</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>keyATM_fig object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+save_fig">save_fig()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 # Prepare a keyATM_docs object
 keyATM_docs &lt;- keyATM_read(input)

 # Keywords are in a list
 keywords &lt;- list(Education = c("education", "child", "student"),
                  Health    = c("public", "health", "program"))

 # Visualize keywords
 keyATM_viz &lt;- visualize_keywords(keyATM_docs, keywords)

 # View a figure
 keyATM_viz

 # Save a figure
 save_fig(keyATM_viz, filename)

## End(Not run)
</code></pre>

<hr>
<h2 id='weightedLDA'>Weighted LDA main function</h2><span id='topic+weightedLDA'></span>

<h3>Description</h3>

<p>Fit weighted LDA models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weightedLDA(
  docs,
  model,
  number_of_topics,
  model_settings = list(),
  priors = list(),
  options = list(),
  keep = c()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="weightedLDA_+3A_docs">docs</code></td>
<td>
<p>texts read via <code><a href="#topic+keyATM_read">keyATM_read()</a></code>.</p>
</td></tr>
<tr><td><code id="weightedLDA_+3A_model">model</code></td>
<td>
<p>Weighted LDA model: <code>base</code>, <code>covariates</code>, and <code>dynamic</code>.</p>
</td></tr>
<tr><td><code id="weightedLDA_+3A_number_of_topics">number_of_topics</code></td>
<td>
<p>the number of regular topics.</p>
</td></tr>
<tr><td><code id="weightedLDA_+3A_model_settings">model_settings</code></td>
<td>
<p>a list of model specific settings (details are in the online documentation).</p>
</td></tr>
<tr><td><code id="weightedLDA_+3A_priors">priors</code></td>
<td>
<p>a list of priors of parameters.</p>
</td></tr>
<tr><td><code id="weightedLDA_+3A_options">options</code></td>
<td>
<p>a list of options (details are in the documentation of <code><a href="#topic+keyATM">keyATM()</a></code>).</p>
</td></tr>
<tr><td><code id="weightedLDA_+3A_keep">keep</code></td>
<td>
<p>a vector of the names of elements you want to keep in output.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>keyATM_output</code> object containing:
</p>

<dl>
<dt>V</dt><dd><p>number of terms (number of unique words)</p>
</dd>
<dt>N</dt><dd><p>number of documents</p>
</dd>
<dt>model</dt><dd><p>the name of the model</p>
</dd>
<dt>theta</dt><dd><p>topic proportions for each document (document-topic distribution)</p>
</dd>
<dt>phi</dt><dd><p>topic specific word generation probabilities (topic-word distribution)</p>
</dd>
<dt>topic_counts</dt><dd><p>number of tokens assigned to each topic</p>
</dd>
<dt>word_counts</dt><dd><p>number of times each word type appears</p>
</dd>
<dt>doc_lens</dt><dd><p>length of each document in tokens</p>
</dd>
<dt>vocab</dt><dd><p>words in the vocabulary (a vector of unique words)</p>
</dd>
<dt>priors</dt><dd><p>priors</p>
</dd>
<dt>options</dt><dd><p>options</p>
</dd>
<dt>keywords_raw</dt><dd><p><code>NULL</code> for LDA models</p>
</dd>
<dt>model_fit</dt><dd><p>perplexity and log-likelihood</p>
</dd>
<dt>pi</dt><dd><p>estimated pi for the last iteration (<code>NULL</code> for LDA models)</p>
</dd>
<dt>values_iter</dt><dd><p>values stored during iterations</p>
</dd>
<dt>number_of_topics</dt><dd><p>number of topics</p>
</dd>
<dt>kept_values</dt><dd><p>outputs you specified to store in <code>keep</code> option</p>
</dd>
<dt>information</dt><dd><p>information about the fitting</p>
</dd>
</dl>



<h3>See Also</h3>

<p><a href="https://keyatm.github.io/keyATM/articles/pkgdown_files/Options.html">https://keyatm.github.io/keyATM/articles/pkgdown_files/Options.html</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  library(keyATM)
  library(quanteda)
  data(keyATM_data_bills)
  bills_dfm &lt;- keyATM_data_bills$doc_dfm  # quanteda dfm object
  keyATM_docs &lt;- keyATM_read(bills_dfm)

  # Weighted LDA
  out &lt;- weightedLDA(docs = keyATM_docs, model = "base",
                     number_of_topics = 5)

  # Visit our website for full examples: https://keyatm.github.io/keyATM/

## End(Not run)

</code></pre>

<hr>
<h2 id='word_in_doc'>Checking if a word is in a document</h2><span id='topic+word_in_doc'></span>

<h3>Description</h3>

<p>Checking if a word is in a document
</p>


<h3>Usage</h3>

<pre><code class='language-R'>word_in_doc(doc, word)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="word_in_doc_+3A_doc">doc</code></td>
<td>
<p>a vector</p>
</td></tr>
<tr><td><code id="word_in_doc_+3A_word">word</code></td>
<td>
<p>a word to check</p>
</td></tr>
</table>


<h3>Value</h3>

<p>bool
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
