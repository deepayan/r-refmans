<!DOCTYPE html><html><head><title>Help for package VisitorCounts</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {VisitorCounts}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#auto_decompose'><p>Automatic Decomposition Function</p></a></li>
<li><a href='#check_arguments'><p>Check Arguments</p></a></li>
<li><a href='#decompose_proxy'><p>Decompose Popularity Proxy</p></a></li>
<li><a href='#estimate_lag'><p>Estimate Lag Function</p></a></li>
<li><a href='#estimate_parameters'><p>Estimate Parameters for Visitation Model</p></a></li>
<li><a href='#fit_model'><p>Fit Model</p></a></li>
<li><a href='#flickr_userdays'><p>Popularity of Flickr, in User-Days</p></a></li>
<li><a href='#forest_visitation'><p>National Forest Visitation Photo-User-Days Data.</p></a></li>
<li><a href='#generate_proxy_trend_forecasts'><p>Generate Proxy Trend Forecasts</p></a></li>
<li><a href='#imputation'><p>Imputation</p></a></li>
<li><a href='#label_visitation_forecast'><p>labeled_visitation_forecast Class</p></a></li>
<li><a href='#new_decomposition'><p>&quot;decomposition&quot; Constructor Function</p></a></li>
<li><a href='#new_visitation_forecast'><p>visitation_forecast Class</p></a></li>
<li><a href='#new_visitation_forecast_ensemble'><p>visitation_forecast_ensemble Class</p></a></li>
<li><a href='#new_visitation_model'><p>&quot;visitation_model&quot; Constructor Function</p></a></li>
<li><a href='#park_visitation'><p>National Park Visitation Counts and Associated Photo-User-Days Data.</p></a></li>
<li><a href='#plot.decomposition'><p>Decomposition Plot Methods</p></a></li>
<li><a href='#plot.visitation_forecast'><p>visitation_forecast Plot Methods</p></a></li>
<li><a href='#plot.visitation_forecast_ensemble'><p>visitation_forecast_ensemble Plot Methods</p></a></li>
<li><a href='#plot.visitation_model'><p>visitation_model Plot Methods</p></a></li>
<li><a href='#predict.decomposition'><p>Predict Decomposition</p></a></li>
<li><a href='#predict.visitation_model'><p>Predict Visitation Model</p></a></li>
<li><a href='#prediction_warning'><p>Notify User prediction warning on constant is 0</p></a></li>
<li><a href='#print.decomposition'><p>Decomposition Summary Method</p></a></li>
<li><a href='#print.visitation_forecast'><p>visitation_forecast Summary Method</p></a></li>
<li><a href='#print.visitation_model'><p>visitation_model Summary Method</p></a></li>
<li><a href='#summary.decomposition'><p>Decomposition Summary Method</p></a></li>
<li><a href='#summary.visitation_forecast'><p>visitation_forecast Summary Method</p></a></li>
<li><a href='#summary.visitation_model'><p>visitation_model Summary Method</p></a></li>
<li><a href='#trim_training_data'><p>trim training data</p></a></li>
<li><a href='#visitation_model'><p>Visitation Model</p></a></li>
<li><a href='#yearsToMonths'><p>Converting Annual Counts into Monthly Counts</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Modeling and Forecasting Visitor Counts Using Social Media</td>
</tr>
<tr>
<td>Version:</td>
<td>2.0.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-3-24</td>
</tr>
<tr>
<td>Author:</td>
<td>Robert Bowen [aut, cre],
  Russell Goebel [aut],
  Beth Ann Brackett [ctb],
  Kimihiro Noguchi [aut],
  Dylan Way [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Robert Bowen &lt;robertbowen.bham@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Performs modeling and forecasting of park visitor counts
	using social media data and (partial) on-site visitor counts.
	Specifically, the model is built based on an automatic decomposition
	of the trend and seasonal components of the social media-based park visitor counts,
	from which short-term forecasts of the visitor counts and percent changes
	in the visitor counts can be made. A reference for the underlying model that 'VisitorCounts' uses can be found at 
    'Russell Goebel', Austin Schmaltz, 'Beth Ann Brackett', Spencer A. Wood, 'Kimihiro Noguchi' (2023) &lt;<a href="https://doi.org/10.1002%2Ffor.2965">doi:10.1002/for.2965</a>&gt; .</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rssa, methods, ggplot2,</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, spelling, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-25 04:37:32 UTC; given</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-25 05:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='auto_decompose'>Automatic Decomposition Function</h2><span id='topic+auto_decompose'></span>

<h3>Description</h3>

<p>Automatically decomposes a time series using singular spectrum analysis. See package <a href="Rssa.html#topic+Rssa">Rssa</a> for details on singular spectrum analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>auto_decompose(
  time_series,
  suspected_periods = c(12, 6, 4, 3),
  proportion_of_variance_type = c("leave_out_first", "total"),
  max_proportion_of_variance = 0.995,
  log_ratio_cutoff = 0.2,
  window_length = "auto",
  num_trend_components = 2
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="auto_decompose_+3A_time_series">time_series</code></td>
<td>
<p>A vector which stores the time series of interest in the log scale.</p>
</td></tr>
<tr><td><code id="auto_decompose_+3A_suspected_periods">suspected_periods</code></td>
<td>
<p>A vector which stores the suspected periods in the descending order of importance. The default option is c(12,6,4,3), corresponding to 12, 6, 4, and 3 months.</p>
</td></tr>
<tr><td><code id="auto_decompose_+3A_proportion_of_variance_type">proportion_of_variance_type</code></td>
<td>
<p>A character string specifying the option for choosing the maximum number of eigenvalues based on the proportion of total variance explained. If &quot;leave_out_first&quot; is chosen, then the contribution made by the first eigenvector is ignored; otherwise, if &quot;total&quot; is chosen, then the contribution made by all the eigenvectors is considered.</p>
</td></tr>
<tr><td><code id="auto_decompose_+3A_max_proportion_of_variance">max_proportion_of_variance</code></td>
<td>
<p>A numeric specifying the proportion of total variance explained using the method specified in proportion_of_variance_type. The default option is 0.995.</p>
</td></tr>
<tr><td><code id="auto_decompose_+3A_log_ratio_cutoff">log_ratio_cutoff</code></td>
<td>
<p>A numeric specifying the threshold for the deviation between the estimated period and candidate periods in suspected_periods. The default option is 0.2, which means that, if the absolute log ratio between the estimated and candidate period is within 0.2 (approximately a 20% difference), then the estimated period is deemed equal to the candidate period.</p>
</td></tr>
<tr><td><code id="auto_decompose_+3A_window_length">window_length</code></td>
<td>
<p>A character string or positive integer specifying the window length for the SSA estimation. If &quot;auto&quot; is chosen, then the algorithm automatically selects the window length by taking a multiple of 12 which does not exceed half the length of time_series. The default option is &quot;auto&quot;.</p>
</td></tr>
<tr><td><code id="auto_decompose_+3A_num_trend_components">num_trend_components</code></td>
<td>
<p>A positive integer specifying the number of eigenvectors to be chosen for describing the trend in SSA. The default option is 2.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>reconstruction</code></td>
<td>
<p>A list containing important information about the reconstructed time series. In particular, it contains the reconstructed main trend component, overall trend component, seasonal component for each period specified in suspected_periods, and overall seasonal component.</p>
</td></tr>
<tr><td><code>grouping</code></td>
<td>
<p>A matrix containing information about the locations of the eigenvalue groups for each period in suspected_periods and trend component. The locations are indicated by '1'.</p>
</td></tr>
<tr><td><code>window_length</code></td>
<td>
<p>A numeric indicating the window length.</p>
</td></tr>
<tr><td><code>ts_ssa</code></td>
<td>
<p>An ssa object storing the singular spectrum analysis decomposition.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>data("park_visitation")

### Decompose national parks service visitor counts and flickr photo user-days

# parameters ---------------------------------------------
suspected_periods &lt;- c(12,6,4,3)
proportion_of_variance_type = "leave_out_first"
max_proportion_of_variance &lt;- 0.995
log_ratio_cutoff &lt;- 0.2

# load data ----------------------------------------------

park &lt;- "YELL" #for Yellowstone National Park

nps_ts &lt;- ts(park_visitation[park_visitation$park == park,]$nps, start = 2005, freq = 12)
nps_ts &lt;- log(nps_ts)

pud_ts &lt;- ts(park_visitation[park_visitation$park == park,]$pud, start = 2005, freq = 12)
pud_ts &lt;- log(pud_ts)

# decompose time series and plot decompositions -----------
decomp_pud &lt;- auto_decompose(pud_ts,
                                     suspected_periods,
                                     proportion_of_variance_type = proportion_of_variance_type,
                                     max_proportion_of_variance,
                                     log_ratio_cutoff)
plot(decomp_pud)

decomp_nps &lt;- auto_decompose(nps_ts,suspected_periods,
                                       proportion_of_variance_type = proportion_of_variance_type,
                                     max_proportion_of_variance,log_ratio_cutoff)

plot(decomp_nps)

</code></pre>

<hr>
<h2 id='check_arguments'>Check Arguments</h2><span id='topic+check_arguments'></span>

<h3>Description</h3>

<p>Check arguments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_arguments(
  popularity_proxy,
  onsite_usage,
  constant,
  omit_trend,
  trend,
  ref_series,
  is_input_logged,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_arguments_+3A_popularity_proxy">popularity_proxy</code></td>
<td>
<p>A vector which stores a time series which may be used as a proxy for the monthly popularity of social media over time. The length of <code>popularity_proxy</code> must be the same as that of <code>onsite_usage</code>. The default option is NULL, in which case, no proxy needs to be supplied. Note that this vector cannot have a value of 0.</p>
</td></tr>
<tr><td><code id="check_arguments_+3A_onsite_usage">onsite_usage</code></td>
<td>
<p>A vector which stores monthly on-site usage for a particular social media platform and recreational site.</p>
</td></tr>
<tr><td><code id="check_arguments_+3A_constant">constant</code></td>
<td>
<p>A numeric specifying the constant term (beta0) in the model. This constant is understood as the mean log adjusted monthly visitation relative to the base month. The default option is 0, implying that the (logged) <code>onsite_usage</code> does not require any constant shift, which is unusual. If <code>ref_series</code> is supplied, the constant is overwritten by the least squares estimate.</p>
</td></tr>
<tr><td><code id="check_arguments_+3A_omit_trend">omit_trend</code></td>
<td>
<p>This is obsolete and is left only for compatibility. In other words, <code>trend</code> will overwrite any option chosen in <code>omit_trend</code>. If <code>trend</code> is NULL, then <code>trend</code> is overwritten according to <code>omit_trend</code>. It is a Boolean specifying whether or not to consider the trend component to be 0. The default option is TRUE, in which case, the trend component is 0. If it is set to FALSE, then it is estimated using data.</p>
</td></tr>
<tr><td><code id="check_arguments_+3A_trend">trend</code></td>
<td>
<p>A character string specifying how the trend is modeled. Can be any of NULL, &quot;linear&quot;, &quot;none&quot;, and &quot;estimated&quot;, where &quot;none&quot; and &quot;estimated&quot; correspond to <code>omit_trend</code> being TRUE and FALSE, respectively. If NULL, then it follows the value specified in <code>omit_trend</code>.</p>
</td></tr>
<tr><td><code id="check_arguments_+3A_ref_series">ref_series</code></td>
<td>
<p>A numeric vector specifying the original visitation series. The default option is NULL, implying that no such series is available. If such series is available, then its length must be the same as that of <code>onsite_usage</code>.</p>
</td></tr>
<tr><td><code id="check_arguments_+3A_is_input_logged">is_input_logged</code></td>
<td>
<p>A Boolean describing whether the <code>onsite_usage</code>, <code>ref_series</code>, and <code>popularity_proxy</code> are in the log scale. The default option is FALSE, in which case the inputs will be assumed to not be logged and will be logged before making forecasts. Setting it to TRUE will assume the inputs are logged.</p>
</td></tr>
<tr><td><code id="check_arguments_+3A_...">...</code></td>
<td>
<p>Additional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for extra information.
</p>

<hr>
<h2 id='decompose_proxy'>Decompose Popularity Proxy</h2><span id='topic+decompose_proxy'></span>

<h3>Description</h3>

<p>Decomposes the popularity proxy time series into trend and seasonality components.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>decompose_proxy(
  onsite_usage,
  popularity_proxy = NULL,
  suspected_periods = c(12, 6, 4, 3),
  proportion_of_variance_type = c("leave_out_first", "total"),
  max_proportion_of_variance = 0.995,
  log_ratio_cutoff = 0.2,
  window_length = "auto",
  num_trend_components = 2,
  criterion = c("cross-correlation", "MSE", "rank"),
  possible_lags = -36:36,
  leave_off = 6,
  estimated_change = 0,
  order_of_polynomial_approximation = 7,
  order_of_derivative = 1,
  ref_series = NULL,
  constant = 0,
  beta = "estimate",
  slope = 0,
  is_input_logged = FALSE,
  spline = FALSE,
  parameter_estimates = c("separate", "joint"),
  omit_trend = TRUE,
  trend = c("linear", "none", "estimated"),
  onsite_usage_decomposition,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="decompose_proxy_+3A_onsite_usage">onsite_usage</code></td>
<td>
<p>A vector which stores monthly on-site usage for a particular social media platform and recreational site.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_popularity_proxy">popularity_proxy</code></td>
<td>
<p>A vector which stores a time series which may be used as a proxy for the monthly popularity of social media over time. The length of <code>popularity_proxy</code> must be the same as that of <code>onsite_usage</code>. The default option is NULL, in which case, no proxy needs to be supplied. Note that this vector cannot have a value of 0.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_suspected_periods">suspected_periods</code></td>
<td>
<p>A vector which stores the suspected periods in the descending order of importance. The default option is c(12,6,4,3), corresponding to 12, 6, 4, and 3 months if observations are monthly.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_proportion_of_variance_type">proportion_of_variance_type</code></td>
<td>
<p>A character string specifying the option for choosing the maximum number of eigenvalues based on the proportion of total variance explained. If &quot;leave_out_first&quot; is chosen, then the contribution made by the first eigenvector is ignored; otherwise, if &quot;total&quot; is chosen, then the contribution made by all the eigenvectors is considered.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_max_proportion_of_variance">max_proportion_of_variance</code></td>
<td>
<p>A numeric specifying the proportion of total variance explained using the method specified in <code>proportion_of_variance_type</code>. The default option is 0.995.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_log_ratio_cutoff">log_ratio_cutoff</code></td>
<td>
<p>A numeric specifying the threshold for the deviation between the estimated period and candidate periods in suspected_periods. The default option is 0.2, which means that if the absolute log ratio between the estimated and candidate period is within 0.2 (approximately a 20 percent difference), then the estimated period is deemed equal to the candidate period.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_window_length">window_length</code></td>
<td>
<p>A character string or positive integer specifying the window length for the SSA estimation. If &quot;auto&quot; is chosen, then the algorithm automatically selects the window length by taking a multiple of 12 which does not exceed half the length of <code>onsite_usage</code>. The default option is &quot;auto&quot;.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_num_trend_components">num_trend_components</code></td>
<td>
<p>A positive integer specifying the number of eigenvectors to be chosen for describing the trend in SSA. The default option is 2. This is relevant only when <code>trend</code> is &quot;estimated&quot;.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_criterion">criterion</code></td>
<td>
<p>A character string specifying the criterion for estimating the lag in <code>popularity_proxy</code>. If &quot;cross-correlation&quot; is chosen, it chooses the lag that maximizes the correlation coefficient between lagged <code>popularity_proxy</code> and <code>onsite_usage</code>. If &quot;MSE&quot; is chosen, it does so by identifying the lagged <code>popularity_proxy</code> whose derivative is closest to that of <code>onsite_usage</code> by minimizing the mean squared error. If &quot;rank&quot; is chosen, it does so by firstly ranking the square errors of the derivatives and identifying the lag which would minimize the mean rank.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_possible_lags">possible_lags</code></td>
<td>
<p>A numeric vector specifying all the candidate lags for <code>popularity_proxy</code>. The default option is -36:36.  This is relevant only when <code>trend</code> is &quot;estimated&quot;.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_leave_off">leave_off</code></td>
<td>
<p>A positive integer specifying the number of observations to be left off when estimating the lag. The default option is 6. This is relevant only when <code>trend</code> is &quot;estimated&quot;.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_estimated_change">estimated_change</code></td>
<td>
<p>A numeric specifying the estimated change in the visitation trend. The default option is 0, implying no change in the trend.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_order_of_polynomial_approximation">order_of_polynomial_approximation</code></td>
<td>
<p>A numeric specifying the order of the polynomial approximation of the difference between time series used in <code>estimate_lag</code>. The default option is 7, the seventh-degree polynomial. This is relevant only when <code>trend</code> is &quot;estimated&quot;.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_order_of_derivative">order_of_derivative</code></td>
<td>
<p>A numeric specifying the order of derivative for the approximated difference between lagged <code>popularity_proxy</code> and <code>onsite_usage</code>. The default option is 1, the first derivative. This is relevant only when <code>trend</code> is &quot;estimated&quot;.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_ref_series">ref_series</code></td>
<td>
<p>A numeric vector specifying the original visitation series. The default option is NULL, implying that no such series is available. If such series is available, then its length must be the same as that of <code>onsite_usage</code>.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_constant">constant</code></td>
<td>
<p>A numeric specifying the constant term (beta0) in the model. This constant is understood as the mean log adjusted monthly visitation relative to the base month. The default option is 0, implying that the (logged) <code>onsite_usage</code> does not require any constant shift, which is unusual. If <code>ref_series</code> is supplied, the constant is overwritten by the least squares estimate.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_beta">beta</code></td>
<td>
<p>A numeric or a character string specifying the seasonality adjustment factor (beta1). The default option is &quot;estimate&quot;, in which case, it is estimated by using the Fisher's z-transformed lag-12 autocorrelation. Even if an actual value is supplied, if <code>ref_series</code> is supplied, it is overwritten by the least squares estimate.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_slope">slope</code></td>
<td>
<p>A numeric specifying the slope coefficient (beta2) in the model. This constant is applicable only when <code>trend</code> is set to &quot;linear&quot;. The default option is 0, implying that the linear trend is absent.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_is_input_logged">is_input_logged</code></td>
<td>
<p>A Boolean describing whether the <code>onsite_usage</code>, <code>ref_series</code>, and <code>popularity_proxy</code> are in the log scale. The default option is FALSE, in which case the inputs will be assumed to not be logged and will be logged before making forecasts. Setting it to TRUE will assume the inputs are logged.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_spline">spline</code></td>
<td>
<p>A Boolean specifying whether or not to use a smoothing spline for the lag estimation. This is relevant only when <code>trend</code> is &quot;estimated&quot;.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_parameter_estimates">parameter_estimates</code></td>
<td>
<p>A character string specifying how to estimate beta and constant parameters should a reference series be supplied. Both options use least squares estimates, but &quot;separate&quot; indicates that the differenced series should be used to estimate beta separately from the constant, while &quot;joint&quot; indicates to estimate both using non-differenced detrended series.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_omit_trend">omit_trend</code></td>
<td>
<p>This is obsolete and is left only for compatibility. In other words, <code>trend</code> will overwrite any option chosen in <code>omit_trend</code>. If <code>trend</code> is NULL, then <code>trend</code> is overwritten according to <code>omit_trend</code>. It is a Boolean specifying whether or not to consider the trend component to be 0. The default option is TRUE, in which case, the trend component is 0. If it is set to FALSE, then it is estimated using data.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_trend">trend</code></td>
<td>
<p>A character string specifying how the trend is modeled. Can be any of NULL, &quot;linear&quot;, &quot;none&quot;, and &quot;estimated&quot;, where &quot;none&quot; and &quot;estimated&quot; correspond to <code>omit_trend</code> being TRUE and FALSE, respectively. If NULL, then it follows the value specified in <code>omit_trend</code>.</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_onsite_usage_decomposition">onsite_usage_decomposition</code></td>
<td>
<p>A &quot;decomposition&quot; class object containing decomposition data for the onsite usage time series (outputs from 'auto_decompose').</p>
</td></tr>
<tr><td><code id="decompose_proxy_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed onto the smoothing spline (<code>smooth.spline</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>proxy_decomposition</code></td>
<td>
<p>A &quot;decomposition&quot; object representing the automatic decomposition obtained from popularity_proxy (see <code><a href="#topic+auto_decompose">auto_decompose</a></code>).</p>
</td></tr>
<tr><td><code>lagged_proxy_trend_and_forecasts_window</code></td>
<td>
<p>A 'ts' object storing the potentially lagged popularity proxy trend and any forecasts needed due to the lag.</p>
</td></tr>
<tr><td><code>ts_trend_window</code></td>
<td>
<p>A 'ts' object storing the trend component of the onsite social media usage. This trend component is potentially truncated to match available popularity proxy data.</p>
</td></tr>
<tr><td><code>ts_seasonality_window</code></td>
<td>
<p>A 'ts' object storing the seasonality component of the onsite social media usage. This seasonality component is potentially truncated to match available popularity proxy data.</p>
</td></tr>
<tr><td><code>latest_starttime</code></td>
<td>
<p>A 'tsp' attribute of a 'ts' object representing the latest of the two start times of the potentially lagged populairty proxy and the onsite social media usage.</p>
</td></tr>
<tr><td><code>endtime</code></td>
<td>
<p>A 'tsp' attribute of a 'ts' object representing the time of the final onsite usage observation.</p>
</td></tr>
<tr><td><code>forecasts_needed</code></td>
<td>
<p>An integer representing the number of forecasts of popularity_proxy needed to obtain all fitted values. Negative values indicate extra observations which may be useful for predictions.</p>
</td></tr>
<tr><td><code>lag_estimate</code></td>
<td>
<p>A list storing both the MSE-based esitmate and rank-based estimates for the lag.</p>
</td></tr>
</table>

<hr>
<h2 id='estimate_lag'>Estimate Lag Function</h2><span id='topic+estimate_lag'></span>

<h3>Description</h3>

<p>Uses polynomial approximation and derivatives for time series objects to estimate lag between series.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_lag(
  time_series1,
  time_series2,
  possible_lags,
  method = c("cross-correlation", "MSE", "rank"),
  leave_off,
  estimated_change = 0,
  order_of_polynomial_approximation = 7,
  order_of_derivative = 1,
  spline = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="estimate_lag_+3A_time_series1">time_series1</code></td>
<td>
<p>A numeric vector which stores the time series of interest in the log scale.</p>
</td></tr>
<tr><td><code id="estimate_lag_+3A_time_series2">time_series2</code></td>
<td>
<p>A numeric vector which stores the trend proxy time series in the log scale. The length of trend_proxy must be the same as that of time_series1.</p>
</td></tr>
<tr><td><code id="estimate_lag_+3A_possible_lags">possible_lags</code></td>
<td>
<p>A numeric vector specifying all the candidate lags for trend_proxy. The default option is -36:36.</p>
</td></tr>
<tr><td><code id="estimate_lag_+3A_method">method</code></td>
<td>
<p>A character vector specifying the method used to obtain the lag estimate. &quot;polynomial&quot; uses polynomial approximation, while &quot;cross-correlation&quot; uses cross-correlation.</p>
</td></tr>
<tr><td><code id="estimate_lag_+3A_leave_off">leave_off</code></td>
<td>
<p>A positive integer specifying the number of observations to be left off when estimating the lag.</p>
</td></tr>
<tr><td><code id="estimate_lag_+3A_estimated_change">estimated_change</code></td>
<td>
<p>A numeric specifying the estimated change in the visitation trend. The default option is 0, implying no change in the trend.</p>
</td></tr>
<tr><td><code id="estimate_lag_+3A_order_of_polynomial_approximation">order_of_polynomial_approximation</code></td>
<td>
<p>A numeric specifying the order of the polynomial approximation of the difference between time series used in <code>estimate_lag</code>. The default option is 7, the seventh-degree polynomial.</p>
</td></tr>
<tr><td><code id="estimate_lag_+3A_order_of_derivative">order_of_derivative</code></td>
<td>
<p>A numeric specifying the order of derivative for the approximated difference between time_series1 and lagged time_series2. The default option is 1, the first derivative.</p>
</td></tr>
<tr><td><code id="estimate_lag_+3A_spline">spline</code></td>
<td>
<p>A Boolean specifying whether or not to use a smoothing spline for the lag estimation.</p>
</td></tr>
<tr><td><code id="estimate_lag_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed onto the <code>smooth.spline</code> function, if method is &quot;polynomial&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>cc_lag</code></td>
<td>
<p>A numeric indicating the estimated lag with the cross-correlation criterion.</p>
</td></tr>
<tr><td><code>mse_criterion</code></td>
<td>
<p>A numeric indicating the estimated lag with the MSE criterion.</p>
</td></tr>
<tr><td><code>rank_criterion</code></td>
<td>
<p>A numeric indicating the estimate lag with the rank criterion.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Generate dataset with known lag and recover this lag --------------#'

lag &lt;- 3
n &lt;- 156
start_year &lt;- 2005
frequency &lt;- 12
trend_function &lt;- function(x) x^2

x &lt;- seq(-3,3, length.out = n)

y1 &lt;- ts(trend_function(x),start = start_year, freq = frequency)
y2 &lt;- stats::lag(y1, k = lag)


# Recover lag
estimate_lag(y1,y2, possible_lags = -36:36,
             method = "rank",leave_off = 0, spline = FALSE)


</code></pre>

<hr>
<h2 id='estimate_parameters'>Estimate Parameters for Visitation Model</h2><span id='topic+estimate_parameters'></span>

<h3>Description</h3>

<p>Estimate the two parameters (y-intercept and seasonality factor) for the visitation model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_parameters(
  popularity_proxy_decomposition_data = NULL,
  onsite_usage,
  onsite_usage_decomposition,
  omit_trend,
  trend,
  ref_series,
  constant,
  beta,
  slope,
  parameter_estimates,
  is_input_logged,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="estimate_parameters_+3A_popularity_proxy_decomposition_data">popularity_proxy_decomposition_data</code></td>
<td>
<p>A &quot;decomposition&quot; class object containing decomposition data for the popularity proxy time series (outputs from <code><a href="#topic+auto_decompose">auto_decompose</a></code>).</p>
</td></tr>
<tr><td><code id="estimate_parameters_+3A_onsite_usage">onsite_usage</code></td>
<td>
<p>A vector which stores monthly onsite usage for a particular social media platform and recreational site.</p>
</td></tr>
<tr><td><code id="estimate_parameters_+3A_onsite_usage_decomposition">onsite_usage_decomposition</code></td>
<td>
<p>A &quot;decomposition&quot; class object containing decomposition data for the monthly onsite usage time series (outputs from <code><a href="#topic+auto_decompose">auto_decompose</a></code>).</p>
</td></tr>
<tr><td><code id="estimate_parameters_+3A_omit_trend">omit_trend</code></td>
<td>
<p>This is obsolete and is left only for compatibility. In other words, <code>trend</code> will overwrite any option chosen in <code>omit_trend</code>. If <code>trend</code> is NULL, then <code>trend</code> is overwritten according to <code>omit_trend</code>. It is a Boolean specifying whether or not to consider the trend component to be 0. The default option is TRUE, in which case, the trend component is 0. If it is set to FALSE, then it is estimated using data.</p>
</td></tr>
<tr><td><code id="estimate_parameters_+3A_trend">trend</code></td>
<td>
<p>A character string specifying how the trend is modeled. Can be any of NULL, &quot;linear&quot;, &quot;none&quot;, and &quot;estimated&quot;, where &quot;none&quot; and &quot;estimated&quot; correspond to <code>omit_trend</code> being TRUE and FALSE, respectively. If NULL, then it follows the value specified in <code>omit_trend</code>.</p>
</td></tr>
<tr><td><code id="estimate_parameters_+3A_ref_series">ref_series</code></td>
<td>
<p>A numeric vector specifying the original visitation series. The default option is NULL, implying that no such series is available. If such series is available, then its length must be the same as that of <code>onsite_usage</code>.</p>
</td></tr>
<tr><td><code id="estimate_parameters_+3A_constant">constant</code></td>
<td>
<p>A numeric specifying the constant term (beta0) in the model. This constant is understood as the mean log adjusted monthly visitation relative to the base month. The default option is 0, implying that the (logged) <code>onsite_usage</code> does not require any constant shift, which is unusual. If <code>ref_series</code> is supplied, the constant is overwritten by the least squares estimate.</p>
</td></tr>
<tr><td><code id="estimate_parameters_+3A_beta">beta</code></td>
<td>
<p>A numeric or a character string specifying the seasonality adjustment factor (beta1). The default option is &quot;estimate&quot;, in which case, it is estimated by using the Fisher's z-transformed lag-12 autocorrelation. Even if an actual value is supplied, if <code>ref_series</code> is supplied, it is overwritten by the least squares estimate.</p>
</td></tr>
<tr><td><code id="estimate_parameters_+3A_slope">slope</code></td>
<td>
<p>A numeric specifying the slope coefficient (beta2) in the model. This constant is applicable only when <code>trend</code> is set to &quot;linear&quot;. The default option is 0, implying that the linear trend is absent.</p>
</td></tr>
<tr><td><code id="estimate_parameters_+3A_parameter_estimates">parameter_estimates</code></td>
<td>
<p>A character string specifying how to estimate beta and constant parameters should a reference series be supplied. Both options use least squares estimates, but &quot;separate&quot; indicates that the differenced series should be used to estimate beta separately from the constant, while &quot;joint&quot; indicates to estimate both using non-differenced detrended series.</p>
</td></tr>
<tr><td><code id="estimate_parameters_+3A_is_input_logged">is_input_logged</code></td>
<td>
<p>A Boolean describing whether the <code>onsite_usage</code>, <code>ref_series</code>, and <code>popularity_proxy</code> are in the log scale. The default option is FALSE, in which case the inputs will be assumed to not be logged and will be logged before making forecasts. Setting it to TRUE will assume the inputs are logged.</p>
</td></tr>
<tr><td><code id="estimate_parameters_+3A_...">...</code></td>
<td>
<p>Additional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>lagged_proxy_trend_and_forecasts_window</code></td>
<td>
<p>A 'ts' object storing the potentially lagged popularity proxy trend and any forecasts needed due to the lag.</p>
</td></tr>
<tr><td><code>ts_trend_window</code></td>
<td>
<p>A 'ts' object storing the trend component of the onsite social media usage. This trend component is potentially truncated to match available popularity proxy data.</p>
</td></tr>
<tr><td><code>ts_seasonality_window</code></td>
<td>
<p>A 'ts' object storing the seasonality component of the onsite social media usage. This seasonality component is potentially truncated to match available popularity proxy data.</p>
</td></tr>
<tr><td><code>latest_starttime</code></td>
<td>
<p>A 'tsp' attribute of a 'ts' object representing the latest of the two start times of the potentially lagged populairty proxy and the onsite social media usage.</p>
</td></tr>
<tr><td><code>endtime</code></td>
<td>
<p>A 'tsp' attribute of a 'ts' object representing the time of the final onsite usage observation.</p>
</td></tr>
<tr><td><code>beta</code></td>
<td>
<p>A numeric storing the estimated seasonality adjustment factor.</p>
</td></tr>
<tr><td><code>constant</code></td>
<td>
<p>A numeric storing estimated constant term used in the model.</p>
</td></tr>
<tr><td><code>slope</code></td>
<td>
<p>A numeric storing the estimated slope term used in the model. Applicable when the trend parameter is &quot;linear&quot;. Otherwise, NULL is returned.</p>
</td></tr>
</table>

<hr>
<h2 id='fit_model'>Fit Model</h2><span id='topic+fit_model'></span>

<h3>Description</h3>

<p>Fit the visitation model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fit_model(
  parameter_estimates_and_time_series_windows,
  omit_trend,
  trend,
  is_input_logged,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fit_model_+3A_parameter_estimates_and_time_series_windows">parameter_estimates_and_time_series_windows</code></td>
<td>
<p># a list storing the outputs of <code><a href="#topic+estimate_parameters">estimate_parameters</a></code>, including parameter estimates 'constant', 'beta', and 'slope', as well as data pertaining to time series windows.</p>
</td></tr>
<tr><td><code id="fit_model_+3A_omit_trend">omit_trend</code></td>
<td>
<p>This is obsolete and is left only for compatibility. In other words, <code>trend</code> will overwrite any option chosen in <code>omit_trend</code>. If <code>trend</code> is NULL, then <code>trend</code> is overwritten according to <code>omit_trend</code>. It is a Boolean specifying whether or not to consider the trend component to be 0. The default option is TRUE, in which case, the trend component is 0. If it is set to FALSE, then it is estimated using data.</p>
</td></tr>
<tr><td><code id="fit_model_+3A_trend">trend</code></td>
<td>
<p>A character string specifying how the trend is modeled. Can be any of NULL, &quot;linear&quot;, &quot;none&quot;, and &quot;estimated&quot;, where &quot;none&quot; and &quot;estimated&quot; correspond to <code>omit_trend</code> being TRUE and FALSE, respectively. If NULL, then it follows the value specified in <code>omit_trend</code>.</p>
</td></tr>
<tr><td><code id="fit_model_+3A_is_input_logged">is_input_logged</code></td>
<td>
<p>A Boolean describing whether the <code>onsite_usage</code>, <code>ref_series</code>, and <code>popularity_proxy</code> are in the log scale. The default option is FALSE, in which case the inputs will be assumed to not be logged and will be logged before making forecasts. Setting it to TRUE will assume the inputs are logged.</p>
</td></tr>
<tr><td><code id="fit_model_+3A_...">...</code></td>
<td>
<p>Additional arguments</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>visitation_fit</code></td>
<td>
<p>A vector storing fitted values of visitation model.</p>
</td></tr>
</table>

<hr>
<h2 id='flickr_userdays'>Popularity of Flickr, in User-Days</h2><span id='topic+flickr_userdays'></span>

<h3>Description</h3>

<p>A time series representing the popularity of Flickr in the United States, as measured in user-days. Here, user-days count the number of unique users posting on Flickr on a given day.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flickr_userdays
</code></pre>


<h3>Format</h3>

<p>A time series object with 156 observations.
</p>


<h3>Source</h3>

<p>Flickr. (2019). Retrieved October, 2019, from https://flickr.com/
</p>

<hr>
<h2 id='forest_visitation'>National Forest Visitation Photo-User-Days Data.</h2><span id='topic+forest_visitation'></span>

<h3>Description</h3>

<p>A data frame storing monthly visitation counts by National Forest Service (NFS) for 4 popular US national parks and associated Flickr photo-user-days (PUD).
Here, photo-user-days (PUD) count the number of unique users posting a photo on Flickr on a given day from within the boundaries of a given National Forest.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>forest_visitation
</code></pre>


<h3>Format</h3>

<p>A data frame with 995 observations and 4 variables.
</p>

<dl>
<dt>date</dt><dd><p>Date of monthly observation, in year-month-day format.</p>
</dd>
<dt>forest</dt><dd><p>National Forest 3 letter identifier code, except for San Juan County which is labled as SJC.</p>
</dd>
<dt>pud</dt><dd><p>Flickr photo-user-days (PUD). Here, PUD count the number of unique users posting a photo on flickr on a given day from within the boundaries of a given National Forest.</p>
</dd>
<dt>nfs</dt><dd><p>Annual Visitation count for the corresponding forest and year given by the National Forest Service (NFS) and then distributed monthly utilizing the PUD as a proxy.</p>
</dd>
</dl>



<h3>Source</h3>

<p>Flickr (2022). Retrieved August, 2022, from https://flickr.com/
</p>

<hr>
<h2 id='generate_proxy_trend_forecasts'>Generate Proxy Trend Forecasts</h2><span id='topic+generate_proxy_trend_forecasts'></span>

<h3>Description</h3>

<p>Generating proxy trend forecasts from objects of the class &quot;visitation_model&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generate_proxy_trend_forecasts(
  object,
  n_ahead,
  starttime,
  endtime,
  proxy_trend_correction,
  ts_frequency
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generate_proxy_trend_forecasts_+3A_object">object</code></td>
<td>
<p>A visitation model object.</p>
</td></tr>
<tr><td><code id="generate_proxy_trend_forecasts_+3A_n_ahead">n_ahead</code></td>
<td>
<p>The number of desired forecasts.</p>
</td></tr>
<tr><td><code id="generate_proxy_trend_forecasts_+3A_starttime">starttime</code></td>
<td>
<p>The start time of the desired forecasts.</p>
</td></tr>
<tr><td><code id="generate_proxy_trend_forecasts_+3A_endtime">endtime</code></td>
<td>
<p>The end time of the desired forecasts.</p>
</td></tr>
<tr><td><code id="generate_proxy_trend_forecasts_+3A_proxy_trend_correction">proxy_trend_correction</code></td>
<td>
<p>The lag correction needed on the proxy trend.</p>
</td></tr>
<tr><td><code id="generate_proxy_trend_forecasts_+3A_ts_frequency">ts_frequency</code></td>
<td>
<p>Frequency of the time series to forecast.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A time series object storing forecasts for the proxy trend.
</p>

<hr>
<h2 id='imputation'>Imputation</h2><span id='topic+imputation'></span>

<h3>Description</h3>

<p>Imputation by replacing negative infinities with appropriate numbers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>imputation(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="imputation_+3A_x">x</code></td>
<td>
<p>A numeric vector (usually the log visitation counts or photo-user days).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector with the negative infinities replaced with appropriate numbers.
</p>

<hr>
<h2 id='label_visitation_forecast'>labeled_visitation_forecast Class</h2><span id='topic+label_visitation_forecast'></span>

<h3>Description</h3>

<p>Class for visitation_model predictions (for use with predict.visitation_model()).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>label_visitation_forecast(visitation_forecast, label)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="label_visitation_forecast_+3A_visitation_forecast">visitation_forecast</code></td>
<td>
<p>A visitation_forecast object</p>
</td></tr>
<tr><td><code id="label_visitation_forecast_+3A_label">label</code></td>
<td>
<p>A character string of the label of forecast</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class &quot;visitation_forecast_ensemble&quot;.
</p>

<hr>
<h2 id='new_decomposition'>&quot;decomposition&quot; Constructor Function</h2><span id='topic+new_decomposition'></span>

<h3>Description</h3>

<p>Constructs objects of the &quot;decomposition&quot; class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_decomposition(reconstruction_list, grouping_matrix, window_length, ts_ssa)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="new_decomposition_+3A_reconstruction_list">reconstruction_list</code></td>
<td>
<p>A list containing important information about the reconstructed time series. In particular, it contains the reconstructed main trend component, overall trend component, seasonal component for each period specified in suspected_periods, and overall seasonal component.</p>
</td></tr>
<tr><td><code id="new_decomposition_+3A_grouping_matrix">grouping_matrix</code></td>
<td>
<p>A matrix containing information about the locations of the eigenvalue groups for each period in suspected_periods and trend component. The locations are indicated by '1'.</p>
</td></tr>
<tr><td><code id="new_decomposition_+3A_window_length">window_length</code></td>
<td>
<p>A numeric indicating the window length.</p>
</td></tr>
<tr><td><code id="new_decomposition_+3A_ts_ssa">ts_ssa</code></td>
<td>
<p>An object of the class &quot;ssa&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of the class &quot;decomposition&quot;.
</p>

<hr>
<h2 id='new_visitation_forecast'>visitation_forecast Class</h2><span id='topic+new_visitation_forecast'></span>

<h3>Description</h3>

<p>Class for visitation_model predictions (for use with predict.visitation_model()).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_visitation_forecast(
  forecasts,
  logged_forecasts,
  differenced_logged_forecasts,
  differenced_standard_forecasts,
  n_ahead,
  proxy_forecasts,
  onsite_usage_forecasts,
  beta,
  constant,
  slope,
  criterion,
  past_observations,
  lag_estimate
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="new_visitation_forecast_+3A_forecasts">forecasts</code></td>
<td>
<p>A time series of forecasts for the visitation model. the forecasts will be in the standard scale of visitors per month</p>
</td></tr>
<tr><td><code id="new_visitation_forecast_+3A_logged_forecasts">logged_forecasts</code></td>
<td>
<p>A time series of the logged forecasts for the visitation model.</p>
</td></tr>
<tr><td><code id="new_visitation_forecast_+3A_differenced_logged_forecasts">differenced_logged_forecasts</code></td>
<td>
<p>A time series of the differenced logged forecasts  for the visitation model.</p>
</td></tr>
<tr><td><code id="new_visitation_forecast_+3A_differenced_standard_forecasts">differenced_standard_forecasts</code></td>
<td>
<p>A time series of the exponentiated differenced logged forecasts that are for the visitation model.</p>
</td></tr>
<tr><td><code id="new_visitation_forecast_+3A_n_ahead">n_ahead</code></td>
<td>
<p>An integer describing the number of forecasts made.</p>
</td></tr>
<tr><td><code id="new_visitation_forecast_+3A_proxy_forecasts">proxy_forecasts</code></td>
<td>
<p>A time series of forecasts of the popularity proxy series.</p>
</td></tr>
<tr><td><code id="new_visitation_forecast_+3A_onsite_usage_forecasts">onsite_usage_forecasts</code></td>
<td>
<p>A time series of forecasts of the original time series.</p>
</td></tr>
<tr><td><code id="new_visitation_forecast_+3A_beta">beta</code></td>
<td>
<p>A numeric or a character string specifying the seasonality adjustment factor. (beta_1)</p>
</td></tr>
<tr><td><code id="new_visitation_forecast_+3A_constant">constant</code></td>
<td>
<p>A numeric specifying the constant term in the model. This constant is understood as the mean of the trend-adjusted time_series. (beta_0)</p>
</td></tr>
<tr><td><code id="new_visitation_forecast_+3A_slope">slope</code></td>
<td>
<p>A numeric specifying the slope term in the model when a linear trend is assumed. (beta_2)</p>
</td></tr>
<tr><td><code id="new_visitation_forecast_+3A_criterion">criterion</code></td>
<td>
<p>One of &quot;MSE&quot; or &quot;Nonparametric&quot;, to specify the criterion used to select the lag.</p>
</td></tr>
<tr><td><code id="new_visitation_forecast_+3A_past_observations">past_observations</code></td>
<td>
<p>One of &quot;none&quot;, &quot;fitted&quot;, or &quot;ref_series&quot;. If &quot;fitted&quot;, past model fitted values are used. If &quot;ref_series&quot;, the reference series in the visitation model object is used. Note that if difference = TRUE, one of these is needed to forecast the first difference.</p>
</td></tr>
<tr><td><code id="new_visitation_forecast_+3A_lag_estimate">lag_estimate</code></td>
<td>
<p>A numeric value specifying the estimated lag in the visitation model.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class &quot;labeled_visitation_forecast&quot;.
</p>
<p>Object of class &quot;Visitation_forecast&quot;.
</p>

<hr>
<h2 id='new_visitation_forecast_ensemble'>visitation_forecast_ensemble Class</h2><span id='topic+new_visitation_forecast_ensemble'></span>

<h3>Description</h3>

<p>Class for plotting an array of visitation_foreces
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_visitation_forecast_ensemble(visitation_forecasts, labels)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="new_visitation_forecast_ensemble_+3A_visitation_forecasts">visitation_forecasts</code></td>
<td>
<p>An array of  visitation_forecast object</p>
</td></tr>
<tr><td><code id="new_visitation_forecast_ensemble_+3A_labels">labels</code></td>
<td>
<p>An array of  labels associated with visitation_forecast</p>
</td></tr>
</table>

<hr>
<h2 id='new_visitation_model'>&quot;visitation_model&quot; Constructor Function</h2><span id='topic+new_visitation_model'></span>

<h3>Description</h3>

<p>Constructs objects of the &quot;visitation_model&quot; class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_visitation_model(
  visitation_fit,
  differenced_fit,
  beta,
  constant,
  slope,
  lag_estimate,
  proxy_decomposition,
  onsite_usage_decomposition,
  forecasts_needed,
  ref_series,
  criterion,
  omit_trend,
  trend,
  call
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="new_visitation_model_+3A_visitation_fit">visitation_fit</code></td>
<td>
<p>A time series storing the fitted values of the visitation model.</p>
</td></tr>
<tr><td><code id="new_visitation_model_+3A_differenced_fit">differenced_fit</code></td>
<td>
<p>A time series storing the differenced fitted values of the visitation model.</p>
</td></tr>
<tr><td><code id="new_visitation_model_+3A_beta">beta</code></td>
<td>
<p>Seasonality adjustment factor. (beta_1)</p>
</td></tr>
<tr><td><code id="new_visitation_model_+3A_constant">constant</code></td>
<td>
<p>A numeric describing the constant term used in the model. (beta_0)</p>
</td></tr>
<tr><td><code id="new_visitation_model_+3A_slope">slope</code></td>
<td>
<p>A numeric describing the slope term used in the model when trend is set to &quot;linear&quot;. (beta_2)</p>
</td></tr>
<tr><td><code id="new_visitation_model_+3A_lag_estimate">lag_estimate</code></td>
<td>
<p>An integer representing the lag parameter for the model fit.</p>
</td></tr>
<tr><td><code id="new_visitation_model_+3A_proxy_decomposition">proxy_decomposition</code></td>
<td>
<p>A decomposition class object representing the decomposition of a popularity measure (e.g., US Photo-User-Days).</p>
</td></tr>
<tr><td><code id="new_visitation_model_+3A_onsite_usage_decomposition">onsite_usage_decomposition</code></td>
<td>
<p>A decomposition class object representing the decomposition of time series (e.g., park Photo-User-Days).</p>
</td></tr>
<tr><td><code id="new_visitation_model_+3A_forecasts_needed">forecasts_needed</code></td>
<td>
<p>An integer describing how many forecasts for the proxy_decomposition are needed for the fit.</p>
</td></tr>
<tr><td><code id="new_visitation_model_+3A_ref_series">ref_series</code></td>
<td>
<p>A reference time series (or NULL) used in the model fit.</p>
</td></tr>
<tr><td><code id="new_visitation_model_+3A_criterion">criterion</code></td>
<td>
<p>A character string specifying the criterion for estimating the lag in popularity_proxy. If &quot;cross-correlation&quot; is chosen, it chooses the lag that maximizes the correlation coefficient between lagged popularity_proxy and onsite_usage. If &quot;MSE&quot; is chosen, it does so by identifying the lagged popularity_proxy whose derivative is closest to that of onsite_usage by minimizing the mean squared error. If &quot;rank&quot; is chosen, it does so by firstly ranking the square errors of the derivatives and identifying the lag which would minimize the mean rank.</p>
</td></tr>
<tr><td><code id="new_visitation_model_+3A_omit_trend">omit_trend</code></td>
<td>
<p>This is obsolete and is left only for compatibility. A Boolean specifying whether or not to consider the NPS trend to be zero.</p>
</td></tr>
<tr><td><code id="new_visitation_model_+3A_trend">trend</code></td>
<td>
<p>A character string specifying how the trend is modeled. Can be any of NULL, &quot;linear&quot;, &quot;none&quot;, and &quot;estimated&quot;, where &quot;none&quot; and &quot;estimated&quot; correspond to <code>omit_trend</code> being TRUE and FALSE, respectively. If NULL, then it follows the value specified in <code>omit_trend</code>.</p>
</td></tr>
<tr><td><code id="new_visitation_model_+3A_call">call</code></td>
<td>
<p>A call for the visitation model.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of the class &quot;model_forecast&quot;.
</p>

<hr>
<h2 id='park_visitation'>National Park Visitation Counts and Associated Photo-User-Days Data.</h2><span id='topic+park_visitation'></span>

<h3>Description</h3>

<p>A data frame storing monthly visitation counts by National Park Service (NPS) for 20 popular US national parks and associated Flickr photo-user-days (PUD).
Here, photo-user-days (PUD) count the number of unique users posting a photo on Flickr on a given day from within the boundaries of a given National Park.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>park_visitation
</code></pre>


<h3>Format</h3>

<p>A data frame with 3276 rows and 4 variables.
</p>

<dl>
<dt>date</dt><dd><p>Date of monthly observation, in year-month-day format.</p>
</dd>
<dt>park</dt><dd><p>National Park alpha code identifying a National Park.</p>
</dd>
<dt>pud</dt><dd><p>Flickr photo-user-days (PUD). Here, PUD count the number of unique users posting a photo on flickr on a given day from within the boundaries of a given National Park.</p>
</dd>
<dt>nps</dt><dd><p>Visitation count for the corresponding park and month given by the National Park Service (NPS).</p>
</dd>
</dl>



<h3>Source</h3>

<p>National Park Service (2018). National park service visitor use statistics. Retrieved May 10, 2018 from https://irma.nps.gov/Stats/
</p>
<p>Flickr (2019). Retrieved October, 2019, from https://flickr.com/
</p>

<hr>
<h2 id='plot.decomposition'>Decomposition Plot Methods</h2><span id='topic+plot.decomposition'></span>

<h3>Description</h3>

<p>Methods for plotting objects of the class &quot;decomposition&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'decomposition'
plot(x, type = c("full", "period", "classical"), legend = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.decomposition_+3A_x">x</code></td>
<td>
<p>An object of class &quot;decomposition&quot;.</p>
</td></tr>
<tr><td><code id="plot.decomposition_+3A_type">type</code></td>
<td>
<p>A character string. One of &quot;full&quot;,&quot;period&quot;, or &quot;classical&quot;. If &quot;full&quot;, the full reconstruction is plotted. If &quot;period&quot;, the reconstruction of each period is plotted individually. If &quot;classical&quot;, the trend and seasonality are plotted.</p>
</td></tr>
<tr><td><code id="plot.decomposition_+3A_legend">legend</code></td>
<td>
<p>A Boolean specifying whether a legend should be added when type is &quot;full&quot;. The default option is TRUE.</p>
</td></tr>
<tr><td><code id="plot.decomposition_+3A_...">...</code></td>
<td>
<p>Additional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plot of the reconstruction in the &quot;decomposition&quot; class object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("park_visitation")

park &lt;- "YELL"
nps_ts &lt;- ts(park_visitation[park_visitation$park == park,]$nps, start = 2005, frequency = 12)
nps_ts &lt;- log(nps_ts)

pud_ts &lt;- ts(park_visitation[park_visitation$park == park,]$pud, start = 2005, frequency = 12)
pud_ts &lt;- log(pud_ts)
nps_ts &lt;- ts(park_visitation[park_visitation$park == park,]$nps, start = 2005, frequency = 12)
nps_ts &lt;- log(nps_ts)



decomposition_pud &lt;- auto_decompose(pud_ts)
decomposition_nps &lt;- auto_decompose(nps_ts)

plot(decomposition_pud,lwd = 2)
plot(decomposition_pud,type = "period")
plot(decomposition_pud,type = "classical")


plot(decomposition_nps,legend = TRUE)


plot(decomposition_nps,type = "period")
plot(decomposition_nps,type = "classical")

</code></pre>

<hr>
<h2 id='plot.visitation_forecast'>visitation_forecast Plot Methods</h2><span id='topic+plot.visitation_forecast'></span>

<h3>Description</h3>

<p>Methods for plotting objects of the class &quot;visitation_forecast&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'visitation_forecast'
plot(
  x,
  difference = FALSE,
  log_outputs = FALSE,
  actual_visitation = NULL,
  xlab = "Time",
  ylab = "Fitted Value",
  pred_color = "#228B22",
  actual_color = "#FF0000",
  size = 1.5,
  main = "Forecasts for Visitation Model",
  plot_points = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.visitation_forecast_+3A_x">x</code></td>
<td>
<p>An object of class &quot;visitation_forecast&quot;.</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_+3A_difference">difference</code></td>
<td>
<p>A Boolean specifying whether to plot the original fit or differenced series. The default option is FALSE, in which case, the series is not differenced.</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_+3A_log_outputs">log_outputs</code></td>
<td>
<p>A Boolean specifying whether to plot the outputs in standard scale or the logged outputs</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_+3A_actual_visitation">actual_visitation</code></td>
<td>
<p>A time series object representing the actual visitation in the standard scale</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_+3A_xlab">xlab</code></td>
<td>
<p>A String to overwrite the x label of the graph</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_+3A_ylab">ylab</code></td>
<td>
<p>A String to overwrite the y label of the graph</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_+3A_pred_color">pred_color</code></td>
<td>
<p>A String to specify the color of the line for predicted visitation</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_+3A_actual_color">actual_color</code></td>
<td>
<p>A String to specify the color of the line for actual visitation</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_+3A_size">size</code></td>
<td>
<p>A number representing the size of the line to plot.</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_+3A_main">main</code></td>
<td>
<p>A String to overwrite the main label of the graph</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_+3A_plot_points">plot_points</code></td>
<td>
<p>A Boolean specifying whether to plot the individual points of visitation</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_+3A_...">...</code></td>
<td>
<p>Additional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for plotting objects of the class &quot;visitation_forecast&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#' #Example:

data("park_visitation")
data("flickr_userdays")

n_ahead &lt;- 12
park &lt;- "YELL"
pud_ts &lt;- ts(park_visitation[park_visitation$park == park,]$pud, start = 2005, freq = 12)
pud_ts &lt;- log(pud_ts)
trend_proxy &lt;- log(flickr_userdays)

mf &lt;- visitation_model(pud_ts,trend_proxy)
vf &lt;- predict(mf,12, only_new = TRUE)
plot(vf)
</code></pre>

<hr>
<h2 id='plot.visitation_forecast_ensemble'>visitation_forecast_ensemble Plot Methods</h2><span id='topic+plot.visitation_forecast_ensemble'></span>

<h3>Description</h3>

<p>Methods for plotting objects of the class &quot;visitation_forecast_ensemble&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'visitation_forecast_ensemble'
plot(
  x,
  difference = FALSE,
  log_outputs = FALSE,
  plot_cumsum = FALSE,
  plot_percent_change = FALSE,
  actual_visitation = NULL,
  actual_visitation_label = "Actual",
  xlab = "Time",
  ylab = "Fitted Value",
  pred_colors = c("#ff6361", "#58508d", "#bc5090", "#003f5c"),
  actual_color = "#ffa600",
  size = 1.5,
  main = "Forecasts for Visitation Model",
  plot_points = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.visitation_forecast_ensemble_+3A_x">x</code></td>
<td>
<p>An object of class &quot;visitation_forecast_ensemble&quot;.</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_ensemble_+3A_difference">difference</code></td>
<td>
<p>A Boolean specifying whether to plot the original fit or differenced series. The default option is FALSE, in which case, the series is not differenced.</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_ensemble_+3A_log_outputs">log_outputs</code></td>
<td>
<p>A Boolean specifying whether to plot the outputs in standard scale or the logged outputs</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_ensemble_+3A_plot_cumsum">plot_cumsum</code></td>
<td>
<p>A Boolean specifying whether to plot the cumsum of the outputs</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_ensemble_+3A_plot_percent_change">plot_percent_change</code></td>
<td>
<p>A Boolean specifying whether to plot the percent change of the outputs</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_ensemble_+3A_actual_visitation">actual_visitation</code></td>
<td>
<p>A time series object representing the actual visitation in the standard scale</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_ensemble_+3A_actual_visitation_label">actual_visitation_label</code></td>
<td>
<p>A Label for the actual visitation in the legend</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_ensemble_+3A_xlab">xlab</code></td>
<td>
<p>A String to overwrite the x label of the graph</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_ensemble_+3A_ylab">ylab</code></td>
<td>
<p>A String to overwrite the y label of the graph</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_ensemble_+3A_pred_colors">pred_colors</code></td>
<td>
<p>An array of strings specifying the colors for the predicted outputs.</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_ensemble_+3A_actual_color">actual_color</code></td>
<td>
<p>A String to specify the color of the line for actual visitation</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_ensemble_+3A_size">size</code></td>
<td>
<p>A number representing the size of the line to plot.</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_ensemble_+3A_main">main</code></td>
<td>
<p>A String to overwrite the main label of the graph</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_ensemble_+3A_plot_points">plot_points</code></td>
<td>
<p>A Boolean specifying whether to plot the individual points of visitation</p>
</td></tr>
<tr><td><code id="plot.visitation_forecast_ensemble_+3A_...">...</code></td>
<td>
<p>Additional arguments.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>data("park_visitation")
data("flickr_userdays")
YELL_data &lt;- park_visitation[park_visitation$park == "YELL",]
YELL_data

YELL_PUD &lt;- YELL_data$pud #PUD Data
YELL_NPS &lt;- YELL_data$nps #NPS Data

#The YELL data from 2005 through 2016 are used as the training data.
YELL_data[1:144,]$date
YELL_PUD.train &lt;- ts(YELL_PUD[1:144], start = c(2005,1), end = c(2016,12), freq = 12)
YELL_NPS.train &lt;- ts(YELL_NPS[1:144], start = c(2005,1), end = c(2016,12), freq = 12)


YELL_NPS.test &lt;- ts(YELL_NPS[144:length(YELL_NPS)],
                   start = c(2016,12), end = c(2017,12), freq = 12)

#Construct models without linear trend (with or without OSC).
YELL_model.without_trend &lt;- visitation_model(onsite_usage = YELL_PUD.train,
                                             ref_series = YELL_NPS.train,
                                             parameter_estimates = "joint", trend = "none")

YELL_model.without_trend_and_NPS &lt;- visitation_model(onsite_usage = YELL_PUD.train,
                                                     ref_series = NULL)

YELL_pred.without_trend &lt;- predict(YELL_model.without_trend,n_ahead = 12)
YELL_pred.without_trend_and_NPS &lt;- predict(YELL_model.without_trend_and_NPS, n_ahead = 12)
YELL_NPS.test



forecast_ensemble &lt;- new_visitation_forecast_ensemble(list(YELL_pred.without_trend ,
YELL_pred.without_trend_and_NPS), list("Without Trend", "Without Trend and NPS"))

#Plot the forecasts and actual percent changes for 2017.
plot(forecast_ensemble, actual_visitation = YELL_NPS.test,
     ylab = "Percent Change in Monthly Visitation", main = "Forecast vs. 
Actual Monthly Percent Change in Visitation in 2017", plot_percent_change = TRUE)


#Plot the cumulative forecasts and actual cumulative percent changes for 2017.
plot(forecast_ensemble, actual_visitation = YELL_NPS.test,
     ylab = "Cumulative Percent Change in Monthly Visitation", 
main = "Forecast vs. Actual Monthly Percent Change in Visitation in 2017", plot_cumsum = TRUE)
</code></pre>

<hr>
<h2 id='plot.visitation_model'>visitation_model Plot Methods</h2><span id='topic+plot.visitation_model'></span>

<h3>Description</h3>

<p>Methods for plotting objects of the class &quot;decomposition&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'visitation_model'
plot(x, type = c("fitted"), difference = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.visitation_model_+3A_x">x</code></td>
<td>
<p>An object of class &quot;decomposition&quot;.</p>
</td></tr>
<tr><td><code id="plot.visitation_model_+3A_type">type</code></td>
<td>
<p>A character string. One of &quot;full&quot;,&quot;period&quot;, or &quot;classical&quot;. If &quot;full&quot;, the full reconstruction is plotted. If &quot;period&quot;, the reconstruction of each period is plotted individually. If &quot;classical&quot;, the trend and seasonality are plotted.</p>
</td></tr>
<tr><td><code id="plot.visitation_model_+3A_difference">difference</code></td>
<td>
<p>A Boolean specifying whether to plot the original fit or differenced series. The default option is FALSE, in which case, the series is not differenced.</p>
</td></tr>
<tr><td><code id="plot.visitation_model_+3A_...">...</code></td>
<td>
<p>Additional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for plotting objects of the class &quot;decomposition&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

data("park_visitation")
data("flickr_userdays")

park &lt;- "YELL"
pud_ts &lt;- ts(park_visitation[park_visitation$park == park,]$pud, start = 2005, freq = 12)
pud_ts &lt;- log(pud_ts)

nps_ts &lt;- ts(park_visitation[park_visitation$park == park,]$nps, start = 2005, freq = 12)
nps_ts &lt;- log(nps_ts)

nps_decomp &lt;- auto_decompose(nps_ts)

trend_proxy &lt;- log(flickr_userdays)

vm &lt;- visitation_model(pud_ts,trend_proxy,ref_series = nps_ts)
plot(vm)
</code></pre>

<hr>
<h2 id='predict.decomposition'>Predict Decomposition</h2><span id='topic+predict.decomposition'></span>

<h3>Description</h3>

<p>Methods for generating predictions from objects of the class &quot;decomposition&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'decomposition'
predict(object, n_ahead, only_new = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict.decomposition_+3A_object">object</code></td>
<td>
<p>An object of class &quot;decomposition&quot;.</p>
</td></tr>
<tr><td><code id="predict.decomposition_+3A_n_ahead">n_ahead</code></td>
<td>
<p>An integer describing the number of forecasts to make.</p>
</td></tr>
<tr><td><code id="predict.decomposition_+3A_only_new">only_new</code></td>
<td>
<p>A Boolean describing whether or not to include past values.</p>
</td></tr>
<tr><td><code id="predict.decomposition_+3A_...">...</code></td>
<td>
<p>Additional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>forecasts</code></td>
<td>
<p>A vector with overall forecast values.</p>
</td></tr>
<tr><td><code>trend_forecasts</code></td>
<td>
<p>A vector with trend forecast values.</p>
</td></tr>
<tr><td><code>seasonality_forecasts</code></td>
<td>
<p>A vector with seasonality forecast values.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
data("park_visitation")
suspected_periods &lt;- c(12,6,4,3)
proportion_of_variance_type = "leave_out_first"
max_proportion_of_variance &lt;- 0.995
log_ratio_cutoff &lt;- 0.2

park &lt;- "DEVA"

nps_ts &lt;- ts(park_visitation[park_visitation$park == park,]$nps, start = 2005, freq = 12)
nps_ts &lt;- log(nps_ts)

pud_ts &lt;- ts(park_visitation[park_visitation$park == park,]$pud, start = 2005, freq = 12)
pud_ts &lt;- log(pud_ts)

nps_ts &lt;- ts(park_visitation[park_visitation$park == park,]$nps, start = 2005, freq = 12)
nps_ts &lt;- log(nps_ts)

decomp_pud &lt;- auto_decompose(pud_ts,
                                     suspected_periods,
                                     proportion_of_variance_type = proportion_of_variance_type,
                                     max_proportion_of_variance,
                                    log_ratio_cutoff)
n_ahead = 36
pud_predictions &lt;- predict(decomp_pud,n_ahead = n_ahead, only_new = FALSE)



</code></pre>

<hr>
<h2 id='predict.visitation_model'>Predict Visitation Model</h2><span id='topic+predict.visitation_model'></span>

<h3>Description</h3>

<p>Methods for generating predictions from objects of the class &quot;visitation_model&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'visitation_model'
predict(
  object,
  n_ahead,
  only_new = TRUE,
  past_observations = c("fitted", "reference"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict.visitation_model_+3A_object">object</code></td>
<td>
<p>An object of class &quot;visitation_model&quot;.</p>
</td></tr>
<tr><td><code id="predict.visitation_model_+3A_n_ahead">n_ahead</code></td>
<td>
<p>An integer indicating how many observations to forecast.</p>
</td></tr>
<tr><td><code id="predict.visitation_model_+3A_only_new">only_new</code></td>
<td>
<p>A Boolean specifying whether to include only the forecasts (if TRUE) or the full reconstruction (if FALSE). The default option is TRUE.</p>
</td></tr>
<tr><td><code id="predict.visitation_model_+3A_past_observations">past_observations</code></td>
<td>
<p>A character string; one of &quot;fitted&quot; or &quot;reference&quot;. Here, &quot;fitted&quot; uses the fitted values of the visitation model, while &quot;reference&quot; uses values supplied in &lsquo;ref_series&rsquo;.</p>
</td></tr>
<tr><td><code id="predict.visitation_model_+3A_...">...</code></td>
<td>
<p>Additional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A predictions for the automatic decomposition.
</p>
<table>
<tr><td><code>forecasts</code></td>
<td>
<p>A vector with forecast values.</p>
</td></tr>
<tr><td><code>n_ahead</code></td>
<td>
<p>A numeric that shows the number of steps ahead.</p>
</td></tr>
<tr><td><code>proxy_forecasts</code></td>
<td>
<p>A vector for the proxy of trend forecasts.</p>
</td></tr>
<tr><td><code>onsite_usage_forecasts</code></td>
<td>
<p>A vector for the visitation forecasts.</p>
</td></tr>
<tr><td><code>beta</code></td>
<td>
<p>A numeric for the seasonality adjustment factor.</p>
</td></tr>
<tr><td><code>constant</code></td>
<td>
<p>A numeric for the value of the constant in the model.</p>
</td></tr>
<tr><td><code>slope</code></td>
<td>
<p>A numeric for the value of the slope term in the model when trend is set to &quot;linear&quot;.</p>
</td></tr>
<tr><td><code>criterion</code></td>
<td>
<p>A string which specifies the method used to select the appropriate lag. Only applicable if the trend component is part of the forecasts.</p>
</td></tr>
<tr><td><code>past_observations</code></td>
<td>
<p>A vector which specifies the fitted values for the past observations.</p>
</td></tr>
<tr><td><code>lag_estimate</code></td>
<td>
<p>A numeric for the estimated lag. Only applicable if the trend component is part of the forecasts.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
data("park_visitation")
data("flickr_userdays")

n_ahead &lt;- 36
park &lt;- "ROMO"
pud_ts &lt;- ts(park_visitation[park_visitation$park == park,]$pud, start = 2005, frequency = 12)
pud_ts &lt;- log(pud_ts)

nps_ts &lt;- ts(park_visitation[park_visitation$park == park,]$nps, start = 2005, frequency = 12)
nps_ts &lt;- log(nps_ts)
popularity_proxy &lt;- log(flickr_userdays)

vm &lt;- visitation_model(pud_ts,popularity_proxy, ref_series = nps_ts, trend = "linear")
predict_vm &lt;- predict(vm,n_ahead,
                      only_new = FALSE, past_observations = "reference")
plot(predict_vm, )
predict_vm2 &lt;- predict(vm,n_ahead,
                       only_new = FALSE, past_observations = "reference")
plot(predict_vm2)
</code></pre>

<hr>
<h2 id='prediction_warning'>Notify User prediction warning on constant is 0</h2><span id='topic+prediction_warning'></span>

<h3>Description</h3>

<p>Notfy the user of details related to the outputs of the model being potentially inaccurate when constant of model is 0.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prediction_warning(constant)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prediction_warning_+3A_constant">constant</code></td>
<td>
<p>The B_0 parameter of the model.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value
</p>

<hr>
<h2 id='print.decomposition'>Decomposition Summary Method</h2><span id='topic+print.decomposition'></span>

<h3>Description</h3>

<p>S3 method for summarizing objects of the class &quot;decomposition&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'decomposition'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.decomposition_+3A_x">x</code></td>
<td>
<p>An object of class &quot;decomposition&quot;.</p>
</td></tr>
<tr><td><code id="print.decomposition_+3A_...">...</code></td>
<td>
<p>Additional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A &quot;decomposition&quot; class object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> data("park_visitation")

park &lt;- "YELL"
nps_ts &lt;- ts(park_visitation[park_visitation$park == park,]$nps, start = 2005, freq = 12)
nps_ts &lt;- log(nps_ts)

pud_ts &lt;- ts(park_visitation[park_visitation$park == park,]$pud, start = 2005, freq = 12)
pud_ts &lt;- log(pud_ts)
nps_ts &lt;- ts(park_visitation[park_visitation$park == park,]$nps, start = 2005, freq = 12)
nps_ts &lt;- log(nps_ts)


decomposition_pud &lt;- auto_decompose(pud_ts)
decomposition_nps &lt;- auto_decompose(nps_ts)
summary(decomposition_pud)
summary(decomposition_nps)
</code></pre>

<hr>
<h2 id='print.visitation_forecast'>visitation_forecast Summary Method</h2><span id='topic+print.visitation_forecast'></span>

<h3>Description</h3>

<p>Methods for summarizing objects of the class &quot;decomposition&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'visitation_forecast'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.visitation_forecast_+3A_x">x</code></td>
<td>
<p>An object of class &quot;decomposition&quot;.</p>
</td></tr>
<tr><td><code id="print.visitation_forecast_+3A_...">...</code></td>
<td>
<p>Additional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A &quot;decomposition&quot; class object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Example:

data("park_visitation")
data("flickr_userdays")

n_ahead &lt;- 12
park &lt;- "YELL"
pud_ts &lt;- ts(park_visitation[park_visitation$park == park,]$pud, start = 2005, freq = 12)
pud_ts &lt;- log(pud_ts)
trend_proxy &lt;- log(flickr_userdays)

mf &lt;- visitation_model(pud_ts,trend_proxy)
vf &lt;- predict(mf,12, only_new = FALSE)
summary(vf)
</code></pre>

<hr>
<h2 id='print.visitation_model'>visitation_model Summary Method</h2><span id='topic+print.visitation_model'></span>

<h3>Description</h3>

<p>Methods for summarizing objects of the class &quot;decomposition&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'visitation_model'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.visitation_model_+3A_x">x</code></td>
<td>
<p>An object of class &quot;decomposition&quot;.</p>
</td></tr>
<tr><td><code id="print.visitation_model_+3A_...">...</code></td>
<td>
<p>Additional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A &quot;decomposition&quot; class object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Example:

data("park_visitation")
data("flickr_userdays")

n_ahead &lt;- 12
park &lt;- "YELL"
pud_ts &lt;- ts(park_visitation[park_visitation$park == park,]$pud, start = 2005, freq = 12)
pud_ts &lt;- log(pud_ts)
trend_proxy &lt;- log(flickr_userdays)

vm &lt;- visitation_model(pud_ts,trend_proxy)
summary(vm)
</code></pre>

<hr>
<h2 id='summary.decomposition'>Decomposition Summary Method</h2><span id='topic+summary.decomposition'></span>

<h3>Description</h3>

<p>S3 method for summarizing objects of the class &quot;decomposition&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'decomposition'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.decomposition_+3A_object">object</code></td>
<td>
<p>An object of class &quot;decomposition&quot;.</p>
</td></tr>
<tr><td><code id="summary.decomposition_+3A_...">...</code></td>
<td>
<p>Additional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A &quot;decomposition&quot; class object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("park_visitation")

park &lt;- "YELL"
nps_ts &lt;- ts(park_visitation[park_visitation$park == park,]$nps, start = 2005, freq = 12)
nps_ts &lt;- log(nps_ts)

pud_ts &lt;- ts(park_visitation[park_visitation$park == park,]$pud, start = 2005, freq = 12)
pud_ts &lt;- log(pud_ts)
nps_ts &lt;- ts(park_visitation[park_visitation$park == park,]$nps, start = 2005, freq = 12)
nps_ts &lt;- log(nps_ts)#'


decomposition_pud &lt;- auto_decompose(pud_ts)
decomposition_nps &lt;- auto_decompose(nps_ts)
summary(decomposition_pud)
summary(decomposition_nps)
</code></pre>

<hr>
<h2 id='summary.visitation_forecast'>visitation_forecast Summary Method</h2><span id='topic+summary.visitation_forecast'></span>

<h3>Description</h3>

<p>Methods for summarizing objects of the class &quot;decomposition&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'visitation_forecast'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.visitation_forecast_+3A_object">object</code></td>
<td>
<p>An object of class &quot;decomposition&quot;.</p>
</td></tr>
<tr><td><code id="summary.visitation_forecast_+3A_...">...</code></td>
<td>
<p>Additional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A &quot;decomposition&quot; class object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Example:

data("park_visitation")
data("flickr_userdays")

n_ahead &lt;- 12
park &lt;- "YELL"
pud_ts &lt;- ts(park_visitation[park_visitation$park == park,]$pud, start = 2005, freq = 12)
pud_ts &lt;- log(pud_ts)
trend_proxy &lt;- log(flickr_userdays)

mf &lt;- visitation_model(pud_ts,trend_proxy)
vf &lt;- predict(mf,12, only_new = FALSE)
summary(vf)
</code></pre>

<hr>
<h2 id='summary.visitation_model'>visitation_model Summary Method</h2><span id='topic+summary.visitation_model'></span>

<h3>Description</h3>

<p>Methods for summarizing objects of the class &quot;decomposition&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'visitation_model'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.visitation_model_+3A_object">object</code></td>
<td>
<p>An object of class &quot;decomposition&quot;.</p>
</td></tr>
<tr><td><code id="summary.visitation_model_+3A_...">...</code></td>
<td>
<p>Additional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A &quot;decomposition&quot; class object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Example:

data("park_visitation")
data("flickr_userdays")

n_ahead &lt;- 12
park &lt;- "YELL"
pud_ts &lt;- ts(park_visitation[park_visitation$park == park,]$pud, start = 2005, freq = 12)
pud_ts &lt;- log(pud_ts)
trend_proxy &lt;- log(flickr_userdays)

vm &lt;- visitation_model(pud_ts,trend_proxy)
summary(vm)
</code></pre>

<hr>
<h2 id='trim_training_data'>trim training data</h2><span id='topic+trim_training_data'></span>

<h3>Description</h3>

<p>Makes sure that the provided onsite_usage and ref_series have at least 12 counts and overlap.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trim_training_data(onsite_usage = NULL, ref_series = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trim_training_data_+3A_onsite_usage">onsite_usage</code></td>
<td>
<p>A vector which stores monthly on-site usage for a particular social media platform and recreational site.</p>
</td></tr>
<tr><td><code id="trim_training_data_+3A_ref_series">ref_series</code></td>
<td>
<p>A numeric vector specifying the original visitation series. The default option is NULL, implying that no such series is available. If such series is available, then its length must be the same as that of <code>onsite_usage</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of onsite_usage and ref_series that has been trimmed and modified to share same window of time.
</p>

<hr>
<h2 id='visitation_model'>Visitation Model</h2><span id='topic+visitation_model'></span>

<h3>Description</h3>

<p>Fits a time series model that uses social media posts and popularity of the social media to model visitation to recreational sites.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>visitation_model(
  onsite_usage,
  popularity_proxy = NULL,
  suspected_periods = c(12, 6, 4, 3),
  proportion_of_variance_type = c("leave_out_first", "total"),
  max_proportion_of_variance = 0.995,
  log_ratio_cutoff = 0.2,
  window_length = "auto",
  num_trend_components = 2,
  criterion = c("cross-correlation", "MSE", "rank"),
  possible_lags = -36:36,
  leave_off = 6,
  estimated_change = 0,
  order_of_polynomial_approximation = 7,
  order_of_derivative = 1,
  ref_series = NULL,
  constant = 0,
  beta = "estimate",
  slope = 0,
  is_input_logged = FALSE,
  spline = FALSE,
  parameter_estimates = c("joint", "separate"),
  omit_trend = TRUE,
  trend = c("linear", "none", "estimated"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="visitation_model_+3A_onsite_usage">onsite_usage</code></td>
<td>
<p>A vector which stores monthly on-site usage for a particular social media platform and recreational site.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_popularity_proxy">popularity_proxy</code></td>
<td>
<p>A vector which stores a time series which may be used as a proxy for the monthly popularity of social media over time. The length of <code>popularity_proxy</code> must be the same as that of <code>onsite_usage</code>. The default option is NULL, in which case, no proxy needs to be supplied. Note that this vector cannot have a value of 0.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_suspected_periods">suspected_periods</code></td>
<td>
<p>A vector which stores the suspected periods in the descending order of importance. The default option is c(12,6,4,3), corresponding to 12, 6, 4, and 3 months if observations are monthly.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_proportion_of_variance_type">proportion_of_variance_type</code></td>
<td>
<p>A character string specifying the option for choosing the maximum number of eigenvalues based on the proportion of total variance explained. If &quot;leave_out_first&quot; is chosen, then the contribution made by the first eigenvector is ignored; otherwise, if &quot;total&quot; is chosen, then the contribution made by all the eigenvectors is considered.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_max_proportion_of_variance">max_proportion_of_variance</code></td>
<td>
<p>A numeric specifying the proportion of total variance explained using the method specified in <code>proportion_of_variance_type</code>. The default option is 0.995.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_log_ratio_cutoff">log_ratio_cutoff</code></td>
<td>
<p>A numeric specifying the threshold for the deviation between the estimated period and candidate periods in suspected_periods. The default option is 0.2, which means that if the absolute log ratio between the estimated and candidate period is within 0.2 (approximately a 20 percent difference), then the estimated period is deemed equal to the candidate period.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_window_length">window_length</code></td>
<td>
<p>A character string or positive integer specifying the window length for the SSA estimation. If &quot;auto&quot; is chosen, then the algorithm automatically selects the window length by taking a multiple of 12 which does not exceed half the length of <code>onsite_usage</code>. The default option is &quot;auto&quot;.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_num_trend_components">num_trend_components</code></td>
<td>
<p>A positive integer specifying the number of eigenvectors to be chosen for describing the trend in SSA. The default option is 2. This is relevant only when <code>trend</code> is &quot;estimated&quot;.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_criterion">criterion</code></td>
<td>
<p>A character string specifying the criterion for estimating the lag in <code>popularity_proxy</code>. If &quot;cross-correlation&quot; is chosen, it chooses the lag that maximizes the correlation coefficient between lagged <code>popularity_proxy</code> and <code>onsite_usage</code>. If &quot;MSE&quot; is chosen, it does so by identifying the lagged <code>popularity_proxy</code> whose derivative is closest to that of <code>onsite_usage</code> by minimizing the mean squared error. If &quot;rank&quot; is chosen, it does so by firstly ranking the square errors of the derivatives and identifying the lag which would minimize the mean rank.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_possible_lags">possible_lags</code></td>
<td>
<p>A numeric vector specifying all the candidate lags for <code>popularity_proxy</code>. The default option is -36:36.  This is relevant only when <code>trend</code> is &quot;estimated&quot;.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_leave_off">leave_off</code></td>
<td>
<p>A positive integer specifying the number of observations to be left off when estimating the lag. The default option is 6. This is relevant only when <code>trend</code> is &quot;estimated&quot;.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_estimated_change">estimated_change</code></td>
<td>
<p>A numeric specifying the estimated change in the visitation trend. The default option is 0, implying no change in the trend.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_order_of_polynomial_approximation">order_of_polynomial_approximation</code></td>
<td>
<p>A numeric specifying the order of the polynomial approximation of the difference between time series used in <code>estimate_lag</code>. The default option is 7, the seventh-degree polynomial. This is relevant only when <code>trend</code> is &quot;estimated&quot;.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_order_of_derivative">order_of_derivative</code></td>
<td>
<p>A numeric specifying the order of derivative for the approximated difference between lagged <code>popularity_proxy</code> and <code>onsite_usage</code>. The default option is 1, the first derivative. This is relevant only when <code>trend</code> is &quot;estimated&quot;.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_ref_series">ref_series</code></td>
<td>
<p>A numeric vector specifying the original visitation series. The default option is NULL, implying that no such series is available. If such series is available, then its length must be the same as that of <code>onsite_usage</code>.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_constant">constant</code></td>
<td>
<p>A numeric specifying the constant term (beta0) in the model. This constant is understood as the mean log adjusted monthly visitation relative to the base month. The default option is 0, implying that the (logged) <code>onsite_usage</code> does not require any constant shift, which is unusual. If <code>ref_series</code> is supplied, the constant is overwritten by the least squares estimate.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_beta">beta</code></td>
<td>
<p>A numeric or a character string specifying the seasonality adjustment factor (beta1). The default option is &quot;estimate&quot;, in which case, it is estimated by using the Fisher's z-transformed lag-12 autocorrelation. Even if an actual value is supplied, if <code>ref_series</code> is supplied, it is overwritten by the least squares estimate.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_slope">slope</code></td>
<td>
<p>A numeric specifying the slope coefficient (beta2) in the model. This constant is applicable only when <code>trend</code> is set to &quot;linear&quot;. The default option is 0, implying that the linear trend is absent.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_is_input_logged">is_input_logged</code></td>
<td>
<p>A Boolean describing whether the <code>onsite_usage</code>, <code>ref_series</code>, and <code>popularity_proxy</code> are in the log scale. The default option is FALSE, in which case the inputs will be assumed to not be logged and will be logged before making forecasts. Setting it to TRUE will assume the inputs are logged.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_spline">spline</code></td>
<td>
<p>A Boolean specifying whether or not to use a smoothing spline for the lag estimation. This is relevant only when <code>trend</code> is &quot;estimated&quot;.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_parameter_estimates">parameter_estimates</code></td>
<td>
<p>A character string specifying how to estimate beta and constant parameters should a reference series be supplied. Both options use least squares estimates, but &quot;separate&quot; indicates that the differenced series should be used to estimate beta separately from the constant, while &quot;joint&quot; indicates to estimate both using non-differenced detrended series.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_omit_trend">omit_trend</code></td>
<td>
<p>This is obsolete and is left only for compatibility. In other words, <code>trend</code> will overwrite any option chosen in <code>omit_trend</code>. If <code>trend</code> is NULL, then <code>trend</code> is overwritten according to <code>omit_trend</code>. It is a Boolean specifying whether or not to consider the trend component to be 0. The default option is TRUE, in which case, the trend component is 0. If it is set to FALSE, then it is estimated using data.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_trend">trend</code></td>
<td>
<p>A character string specifying how the trend is modeled. Can be any of NULL, &quot;linear&quot;, &quot;none&quot;, and &quot;estimated&quot;, where &quot;none&quot; and &quot;estimated&quot; correspond to <code>omit_trend</code> being TRUE and FALSE, respectively. If NULL, then it follows the value specified in <code>omit_trend</code>.</p>
</td></tr>
<tr><td><code id="visitation_model_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed onto the smoothing spline (<code>smooth.spline</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>visitation_fit</code></td>
<td>
<p>A vector storing fitted values of visitation model.</p>
</td></tr>
<tr><td><code>differenced_fit</code></td>
<td>
<p>A vector storing differenced fitted values of visitation model. (Equal to <code>diff(visitation_fit)</code>.)</p>
</td></tr>
<tr><td><code>constant</code></td>
<td>
<p>A numeric storing estimated constant term used in the model (beta0).</p>
</td></tr>
<tr><td><code>beta</code></td>
<td>
<p>A numeric storing the estimated seasonality adjustment factor (beta1).</p>
</td></tr>
<tr><td><code>slope</code></td>
<td>
<p>A numeric storing estimated slope coefficient term used in the model (beta2).</p>
</td></tr>
<tr><td><code>proxy_decomposition</code></td>
<td>
<p>A &quot;decomposition&quot; object representing the automatic decomposition obtained from <code>popularity_proxy</code> (see <code><a href="#topic+auto_decompose">auto_decompose</a></code>).</p>
</td></tr>
<tr><td><code>time_series_decomposition</code></td>
<td>
<p>A &quot;decomposition&quot; object representing the automatic decomposition obtained from <code>onsite_usage</code> (see <code><a href="#topic+auto_decompose">auto_decompose</a></code>).</p>
</td></tr>
<tr><td><code>forecasts_needed</code></td>
<td>
<p>An integer representing the number of forecasts of <code>popularity_proxy</code> needed to obtain all fitted values. Negative values indicate extra observations which may be useful for predictions.</p>
</td></tr>
<tr><td><code>lag_estimate</code></td>
<td>
<p>A list storing both the MSE-based estimate and rank-based estimates for the lag.</p>
</td></tr>
<tr><td><code>criterion</code></td>
<td>
<p>A string; one of &quot;cross-correlation&quot;, &quot;MSE&quot;, or &quot;rank&quot;, specifying the method used to select the appropriate lag.</p>
</td></tr>
<tr><td><code>ref_series</code></td>
<td>
<p>The reference series, if one was supplied.</p>
</td></tr>
<tr><td><code>omit_trend</code></td>
<td>
<p>Whether or not trend was considered 0 in the model. This is obsolete and is left only for compatibility.</p>
</td></tr>
<tr><td><code>trend</code></td>
<td>
<p>The trend used in the model.</p>
</td></tr>
<tr><td><code>call</code></td>
<td>
<p>The model call.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>See <code><a href="#topic+predict.visitation_model">predict.visitation_model</a></code> for forecast methods, <code><a href="#topic+estimate_lag">estimate_lag</a></code> for details on the lag estimation, and <code><a href="#topic+auto_decompose">auto_decompose</a></code> for details on the automatic decomposition of time series using singular spectrum analysis (SSA). See the package <a href="Rssa.html#topic+Rssa">Rssa</a> for details regarding singular spectrum analysis.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
### load data --------------------

data("park_visitation")
data("flickr_userdays")

park &lt;- "YELL" #Yellowstone National Park
pud_ts &lt;- ts(park_visitation[park_visitation$park == park,]$pud, start = 2005, frequency = 12)
nps_ts &lt;- ts(park_visitation[park_visitation$park == park,]$nps, start = 2005, frequency = 12)


### fit three models ---------------

vm_pud_linear &lt;- visitation_model(onsite_usage = pud_ts,
                                  ref_series = nps_ts,
                                  parameter_estimates = "joint",
                                  trend = "linear")
vm_pud_only &lt;- visitation_model(onsite_usage = pud_ts,
                                popularity_proxy = flickr_userdays,
                                trend = "estimated")
vm_ref_series &lt;- visitation_model(onsite_usage = pud_ts,
                                  popularity_proxy = flickr_userdays,
                                  ref_series = nps_ts,
                                  parameter_estimates = "separate",
                                  possible_lags = -36:36,
                                  trend = "none")


### visualize fit ------------------

plot(vm_pud_linear, ylim = c(-3,3), difference = TRUE)
lines(diff(nps_ts), col = "red")

plot(vm_pud_only, ylim = c(-3,3), difference = TRUE)
lines(diff(nps_ts), col = "red")

plot(vm_ref_series, ylim = c(-3,3), difference = TRUE)
lines(diff(nps_ts), col = "red")


</code></pre>

<hr>
<h2 id='yearsToMonths'>Converting Annual Counts into Monthly Counts</h2><span id='topic+yearsToMonths'></span>

<h3>Description</h3>

<p>Convert annual counts into monthly counts using photo-user-days.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>yearsToMonths(visitation_years, pud)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="yearsToMonths_+3A_visitation_years">visitation_years</code></td>
<td>
<p>A numeric vector with annual visitation counts. If not available, NA should be entered.</p>
</td></tr>
<tr><td><code id="yearsToMonths_+3A_pud">pud</code></td>
<td>
<p>A numeric vector for the monthly photo-user-days corresponding to <code>visitation_years</code>. As such, the length of <code>pud</code> needs to be exactly 12 times as long as <code>visitation_counts</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector with estimated monthly visitation counts based on the annual counts and monthly photo-user-days.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
