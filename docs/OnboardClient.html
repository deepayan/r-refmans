<!DOCTYPE html><html><head><title>Help for package OnboardClient</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {OnboardClient}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#api.access'><p>Access API keys and URL from System Environment</p></a></li>
<li><a href='#api.get'><p>API GET call</p></a></li>
<li><a href='#api.post'><p>API POST call</p></a></li>
<li><a href='#api.setup'><p>Set up Onboard API keys and URL in system environment</p></a></li>
<li><a href='#api.status'><p>Check the status of your connection with the Onboard API</p></a></li>
<li><a href='#get_building_info'><p>Building Info</p></a></li>
<li><a href='#get_buildings'><p>Buildings</p></a></li>
<li><a href='#get_deployments'><p>Deployments</p></a></li>
<li><a href='#get_equip_types'><p>Equipment Types</p></a></li>
<li><a href='#get_equipment_by_ids'><p>Equipment by ID</p></a></li>
<li><a href='#get_metadata'><p>Metadata</p></a></li>
<li><a href='#get_orgs'><p>Organizations</p></a></li>
<li><a href='#get_point_types'><p>Point Types</p></a></li>
<li><a href='#get_points_by_ids'><p>Points by ID</p></a></li>
<li><a href='#get_staged_data'><p>Get Staged Data</p></a></li>
<li><a href='#get_timeseries'><p>Time-Series Data</p></a></li>
<li><a href='#get_timeseries_raw'><p>Raw Time-Series Data</p></a></li>
<li><a href='#get_users'><p>Users</p></a></li>
<li><a href='#OnboardClient-package'><p>OnboardClient: Bindings for the Onboard Data Building Data API</p></a></li>
<li><a href='#PointSelector'><p>PointSelector</p></a></li>
<li><a href='#promote_staged_data'><p>Promote data on Staging Area</p></a></li>
<li><a href='#select_points'><p>Select Points</p></a></li>
<li><a href='#upload_staging'><p>Upload to Staging Area</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Bindings for Onboard Data's Building Data API</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a wrapper for the Onboard Data building data API <a href="https://api.onboarddata.io/swagger">https://api.onboarddata.io/swagger</a>. Along with streamlining access to the API, this package simplifies access to sensor time series data, metadata (sensors, equipment, and buildings), and details about the Onboard data model/ontology.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (&ge; 2)</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table (&ge; 1.14.2), dplyr (&ge; 1.0.10), httr (&ge; 1.4.4),
jsonlite (&ge; 1.8.0), lubridate (&ge; 1.8.0), plyr (&ge; 1.8.7),
rrapply (&ge; 1.2.5), rstudioapi (&ge; 0.14), tibble (&ge; 3.1.8),
tidyr (&ge; 1.2.1), tidyselect (&ge; 1.1.2), stringr (&ge; 1.4.1)</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-10-21 20:50:52 UTC; christopher</td>
</tr>
<tr>
<td>Author:</td>
<td>Pranay Shah [aut],
  Christopher Dudas-Thomas [cre, aut],
  Onboard Data [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Christopher Dudas-Thomas &lt;christopher@onboarddata.io&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-10-29 09:14:31 UTC</td>
</tr>
</table>
<hr>
<h2 id='api.access'>Access API keys and URL from System Environment</h2><span id='topic+api.access'></span>

<h3>Description</h3>

<p>Returns the API url and API key.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>api.access()
</code></pre>


<h3>Value</h3>

<p>A named list of API information, containing elements 'url' and 'key'.
</p>

<hr>
<h2 id='api.get'>API GET call</h2><span id='topic+api.get'></span>

<h3>Description</h3>

<p>Uses http GET call to return an object from the API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>api.get(endpoint)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="api.get_+3A_endpoint">endpoint</code></td>
<td>
<p>A character string containing a valid Onboard API endpoint.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list or data.frame of the API output.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:  whoami &lt;- api.get('whoami') 

</code></pre>

<hr>
<h2 id='api.post'>API POST call</h2><span id='topic+api.post'></span>

<h3>Description</h3>

<p>Uses http POST call to post objects to the API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>api.post(endpoint, json_body, output = "list")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="api.post_+3A_endpoint">endpoint</code></td>
<td>
<p>A character string containing a valid Onboard API endpoint.</p>
</td></tr>
<tr><td><code id="api.post_+3A_json_body">json_body</code></td>
<td>
<p>A JSON payload to give to the POST call.</p>
</td></tr>
<tr><td><code id="api.post_+3A_output">output</code></td>
<td>
<p>A character string, either &quot;list&quot; (default) or &quot;dataframe&quot;, to specify the API output format.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list or data.frame of the API output.
</p>

<hr>
<h2 id='api.setup'>Set up Onboard API keys and URL in system environment</h2><span id='topic+api.setup'></span>

<h3>Description</h3>

<p>Set the Onboard API URL and API keys in the system environment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>api.setup(api_type = "prod")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="api.setup_+3A_api_type">api_type</code></td>
<td>
<p>Provide the API client name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, sets API url and API key in the system environment.
</p>

<hr>
<h2 id='api.status'>Check the status of your connection with the Onboard API</h2><span id='topic+api.status'></span>

<h3>Description</h3>

<p>Provides a status code and message for the API connection.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>api.status()
</code></pre>


<h3>Value</h3>

<p>A character string of the API server status and message.
</p>

<hr>
<h2 id='get_building_info'>Building Info</h2><span id='topic+get_building_info'></span>

<h3>Description</h3>

<p>Retrieves building id(s) and name(s). Assigns each to list variables in the parent environment called &quot;id&quot; and &quot;name&quot;, and prints each list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_building_info(buildings, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_building_info_+3A_buildings">buildings</code></td>
<td>
<p>Integer, character, or vectors of those types, providing building id(s) or name(s). You can provide multiple buildings at once.</p>
</td></tr>
<tr><td><code id="get_building_info_+3A_verbose">verbose</code></td>
<td>
<p>Logical. If TRUE (default), print status messages.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame of building info with two columns, 'id' and 'name'.
</p>

<hr>
<h2 id='get_buildings'>Buildings</h2><span id='topic+get_buildings'></span>

<h3>Description</h3>

<p>Retrieve buildings that you have access to.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_buildings(id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_buildings_+3A_id">id</code></td>
<td>
<p>(Optional) An integer if you want information on a particular entity. Returns all entities unless this argument is provided.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame of all building information.
</p>

<hr>
<h2 id='get_deployments'>Deployments</h2><span id='topic+get_deployments'></span>

<h3>Description</h3>

<p>Get all deployments in your organization.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_deployments(org_id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_deployments_+3A_org_id">org_id</code></td>
<td>
<p>organization id</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame of all deployments.
</p>

<hr>
<h2 id='get_equip_types'>Equipment Types</h2><span id='topic+get_equip_types'></span>

<h3>Description</h3>

<p>Query all equipment types from Onboard's Data Model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_equip_types()
</code></pre>


<h3>Value</h3>

<p>A data.frame containing all equipment types.
</p>

<hr>
<h2 id='get_equipment_by_ids'>Equipment by ID</h2><span id='topic+get_equipment_by_ids'></span>

<h3>Description</h3>

<p>Queries equipment by their ids.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_equipment_by_ids(id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_equipment_by_ids_+3A_id">id</code></td>
<td>
<p>Integer or integer vector, containing one or many equipment ids.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame of the requested equipment, or an empty list if no equipment matches those ids.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
equipment &lt;- get_equipment_by_ids(c(1000,1001))

# If you are using the point selector function:
query &lt;- PointSelector()

query$buildings &lt;- 101
query$equipment_types &lt;- 'ahu'

selection &lt;- select_points(query)

equipment &lt;- get_equipment_by_ids(selection$equipment)

## End(Not run)

</code></pre>

<hr>
<h2 id='get_metadata'>Metadata</h2><span id='topic+get_metadata'></span>

<h3>Description</h3>

<p>Retrieves points and equipment for a given building or selection and outputs a clean metadata data.frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_metadata(buildings, selection, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_metadata_+3A_buildings">buildings</code></td>
<td>
<p>Integer, character, or vectors of those types, providing building id(s) or name(s). You can provide multiple buildings at once.</p>
</td></tr>
<tr><td><code id="get_metadata_+3A_selection">selection</code></td>
<td>
<p>Selection list from point selector.</p>
</td></tr>
<tr><td><code id="get_metadata_+3A_verbose">verbose</code></td>
<td>
<p>Logical. If TRUE (default), print status messages.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame of clean metadata for the requested points.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
metadata &lt;- get_metadata(buildings=c(427,"Laboratory"))

OR

query &lt;- PointSelector()

query$buildings &lt;- 427
query$equipment_types &lt;- 'ahu'
query$point_types &lt;- c('Supply Air Temperature','Supply Air Static Pressure')

selection &lt;- select_points(query)

metadata &lt;- get_metadata(selection)

## End(Not run)

</code></pre>

<hr>
<h2 id='get_orgs'>Organizations</h2><span id='topic+get_orgs'></span>

<h3>Description</h3>

<p>Retrieve Organizations that you have access to.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_orgs(id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_orgs_+3A_id">id</code></td>
<td>
<p>(Optional) An integer if you want information on a particular entity. Returns all entities unless this argument is provided.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame of organization information.
</p>

<hr>
<h2 id='get_point_types'>Point Types</h2><span id='topic+get_point_types'></span>

<h3>Description</h3>

<p>Queries all point types, measurements and their units from Onboard's Data Model and returns a clean output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_point_types()
</code></pre>


<h3>Value</h3>

<p>A data.frame containing all point types.
</p>

<hr>
<h2 id='get_points_by_ids'>Points by ID</h2><span id='topic+get_points_by_ids'></span>

<h3>Description</h3>

<p>Queries data points by their ids.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_points_by_ids(id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_points_by_ids_+3A_id">id</code></td>
<td>
<p>Integer or list of integers. One or many point ids.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame of the requested points, or an empty list if there are no points with those ids.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
points &lt;- get_points_by_ids(c(10000,10001))

# If you are using the point selector function:
query &lt;- PointSelector()

query$buildings &lt;- 101
query$equipment_types &lt;- 'ahu'
query$point_types &lt;- c('Supply Air Temperature','Supply Air Static Pressure')

selection &lt;- select_points(query)

points &lt;- get_points_by_ids(selection$points)

## End(Not run)

</code></pre>

<hr>
<h2 id='get_staged_data'>Get Staged Data</h2><span id='topic+get_staged_data'></span>

<h3>Description</h3>

<p>Gets metadata from the staging area.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_staged_data(building, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_staged_data_+3A_building">building</code></td>
<td>
<p>Character vector or integer corresponding to the building name or id. If you enter multiple building ids or names, only the first entry is considered.</p>
</td></tr>
<tr><td><code id="get_staged_data_+3A_verbose">verbose</code></td>
<td>
<p>Logical. If TRUE (default), prints status and progress messages.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame of metadata from the staging area.
</p>

<hr>
<h2 id='get_timeseries'>Time-Series Data</h2><span id='topic+get_timeseries'></span>

<h3>Description</h3>

<p>Provides clean time-series
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_timeseries(start_time, end_time, point_ids)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_timeseries_+3A_start_time">start_time</code></td>
<td>
<p>Start Time in UTC.</p>
</td></tr>
<tr><td><code id="get_timeseries_+3A_end_time">end_time</code></td>
<td>
<p>End Time in UTC.</p>
</td></tr>
<tr><td><code id="get_timeseries_+3A_point_ids">point_ids</code></td>
<td>
<p>Point IDs for which timeseries data needs to be queried.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A wide data.frame of time-series data, with timestamp and all requested point IDs as columns.
</p>

<hr>
<h2 id='get_timeseries_raw'>Raw Time-Series Data</h2><span id='topic+get_timeseries_raw'></span>

<h3>Description</h3>

<p>Retrieves timeseries data in raw format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_timeseries_raw(start_time, end_time, point_ids)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_timeseries_raw_+3A_start_time">start_time</code></td>
<td>
<p>Start Time in UTC.</p>
</td></tr>
<tr><td><code id="get_timeseries_raw_+3A_end_time">end_time</code></td>
<td>
<p>End Time in UTC.</p>
</td></tr>
<tr><td><code id="get_timeseries_raw_+3A_point_ids">point_ids</code></td>
<td>
<p>Point IDs for which timeseries data needs to be queried.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A long data.frame of time series data, with point id, timestamp, and raw point values as columns.
</p>

<hr>
<h2 id='get_users'>Users</h2><span id='topic+get_users'></span>

<h3>Description</h3>

<p>Retrieve all user info in your organization.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_users(id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_users_+3A_id">id</code></td>
<td>
<p>(Optional) An integer if you want information on a particular entity. Returns all entities unless this argument is provided.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame of all user information.
</p>

<hr>
<h2 id='OnboardClient-package'>OnboardClient: Bindings for the Onboard Data Building Data API</h2><span id='topic+OnboardClient'></span><span id='topic+OnboardClient-package'></span>

<h3>Description</h3>

<p>Provides a wrapper for the Onboard Data building data API <a href="https://api.onboarddata.io/swagger">https://api.onboarddata.io/swagger</a>. Along with streamlining access to the API, this package simplifies access to sensor time series data, metadata (sensors, equipment, and buildings), and details about the Onboard data model/ontology.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Christopher Dudas-Thomas <a href="mailto:christopher@onboarddata.io">christopher@onboarddata.io</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Pranay Shah <a href="mailto:pranay.shah@onboarddata.io">pranay.shah@onboarddata.io</a>
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Onboard Data <a href="mailto:support@onboarddata.io">support@onboarddata.io</a> [copyright holder, funder]
</p>
</li></ul>


<hr>
<h2 id='PointSelector'>PointSelector</h2><span id='topic+PointSelector'></span>

<h3>Description</h3>

<p>A list of parameters to query metadata.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PointSelector()
</code></pre>


<h3>Value</h3>

<p>An empty named list of possible point selection criteria.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
query &lt;- PointSelector()

query$buildings &lt;- 101
query$equipment_types &lt;- 'ahu'
query$point_types &lt;- c('Supply Air Temperature','Supply Air Static Pressure')

## End(Not run)

</code></pre>

<hr>
<h2 id='promote_staged_data'>Promote data on Staging Area</h2><span id='topic+promote_staged_data'></span>

<h3>Description</h3>

<p>Promote valid data on the staging area to the live building.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>promote_staged_data(building, data_to_promote, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="promote_staged_data_+3A_building">building</code></td>
<td>
<p>Character vector or integer corresponding to the building name or id. If you enter multiple building ids or names, only the first entry is considered.</p>
</td></tr>
<tr><td><code id="promote_staged_data_+3A_data_to_promote">data_to_promote</code></td>
<td>
<p>(Optional) If missing, all valid topics are promoted. A data.frame containing columns 'e.equip_id' &amp; 'p.topic'.</p>
</td></tr>
<tr><td><code id="promote_staged_data_+3A_verbose">verbose</code></td>
<td>
<p>Logical. If TRUE (default), prints status and progress messages.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list containing any errors that may have occured during data promotion.
</p>

<hr>
<h2 id='select_points'>Select Points</h2><span id='topic+select_points'></span>

<h3>Description</h3>

<p>Returns a list of ids based on the input query from PointSelector. Uses http POST call to query data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>select_points(query)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="select_points_+3A_query">query</code></td>
<td>
<p>query supplied from PointSelector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list of all the points requested by the query.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
query &lt;- PointSelector()

query$buildings &lt;- 427
query$equipment_types &lt;- 'ahu'
query$point_types &lt;- c('Supply Air Temperature','Supply Air Static Pressure')

selection &lt;- select_points(query)

## End(Not run)

</code></pre>

<hr>
<h2 id='upload_staging'>Upload to Staging Area</h2><span id='topic+upload_staging'></span>

<h3>Description</h3>

<p>Uploads data to the staging area.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>upload_staging(building, data_to_upload, skip_topics = FALSE, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="upload_staging_+3A_building">building</code></td>
<td>
<p>Character vector or integer corresponding to the building name or id. If you enter multiple building ids or names, only the first entry is considered.</p>
</td></tr>
<tr><td><code id="upload_staging_+3A_data_to_upload">data_to_upload</code></td>
<td>
<p>A data.frame to upload to the staging area. Must contain e.equip_id and p.topic columns.</p>
</td></tr>
<tr><td><code id="upload_staging_+3A_skip_topics">skip_topics</code></td>
<td>
<p>Logical. If True, the uploaded topics will be assigned '__SKIP__' equip_id.</p>
</td></tr>
<tr><td><code id="upload_staging_+3A_verbose">verbose</code></td>
<td>
<p>Logical. If TRUE (default), prints status and progress messages.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list containing any errors that may have occured during data upload.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
