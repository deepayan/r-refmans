<!DOCTYPE html><html><head><title>Help for package virtuoso</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {virtuoso}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#virtuoso-package'><p>virtuoso: An R Interface to Virtuoso Using ODBC</p></a></li>
<li><a href='#has_virtuoso'><p>check for Virtuoso</p></a></li>
<li><a href='#vos_configure'><p>Configure Virtuoso Server ini file</p></a></li>
<li><a href='#vos_connect'><p>Connect to a Virtuoso Server over ODBC</p></a></li>
<li><a href='#vos_delete_db'><p>Delete Virtuoso Database</p></a></li>
<li><a href='#vos_destroy_all'><p>Destroy all Virtuoso's directories</p></a></li>
<li><a href='#vos_import'><p>Bulk Import of RDF triples</p></a></li>
<li><a href='#vos_install'><p>Helper method for installing Virtuoso Server</p></a></li>
<li><a href='#vos_kill'><p>Stop (kill) the Virtuoso server</p></a></li>
<li><a href='#vos_list_graphs'><p>List graphs</p></a></li>
<li><a href='#vos_log'><p>Query the server logs</p></a></li>
<li><a href='#vos_odbcinst'><p>Configure the ODBC Driver for Virtuoso</p></a></li>
<li><a href='#vos_process'><p>Return a handle to an existing Virtuoso Process</p></a></li>
<li><a href='#vos_query'><p>Run a SPARQL query</p></a></li>
<li><a href='#vos_set_paths'><p>set Virtuoso paths</p></a></li>
<li><a href='#vos_start'><p>Start a Virtuoso Server</p></a></li>
<li><a href='#vos_status'><p>Query the server status</p></a></li>
<li><a href='#vos_uninstall'><p>Uninstall Virtuoso</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Interface to 'Virtuoso' using 'ODBC'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.8</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides users with a simple and convenient
             mechanism to manage and query a 'Virtuoso' database using the 'DBI' (Data-Base Interface)
             compatible 'ODBC' (Open Database Connectivity) interface.
             'Virtuoso' is a high-performance "universal server," which can act
             as both a relational database, supporting standard Structured Query
             Language ('SQL') queries, while also supporting data following the
             Resource Description Framework ('RDF') model for Linked Data.
             'RDF' data can be queried using 'SPARQL' ('SPARQL' Protocol and 'RDF' Query Language)
             queries, a graph-based query that supports semantic reasoning.
             This allows users to leverage the performance of local or remote 'Virtuoso' servers using
             popular 'R' packages such as 'DBI' and 'dplyr', while also providing a 
             high-performance solution for working with large 'RDF' 'triplestores' from 'R.'
             The package also provides helper routines to install, launch, and manage
             a 'Virtuoso' server locally on 'Mac', 'Windows' and 'Linux' platforms using
             the standard interactive installers from the 'R' command-line.  By 
             automatically handling these setup steps, the package can make using 'Virtuoso'
             considerably faster and easier for a most users to deploy in a local
             environment. Managing the bulk import of triples
             from common serializations with a single intuitive command is another key
             feature of this package.  Bulk import performance can be tens to
             hundreds of times faster than the comparable imports using existing 'R' tools,
             including 'rdflib' and 'redland' packages.  </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ropensci/virtuoso">https://github.com/ropensci/virtuoso</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/virtuoso/issues">https://github.com/ropensci/virtuoso/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>odbc, processx, DBI, utils, ini, rappdirs, curl, fs, digest,
ps</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, nycflights13, testthat, covr, jsonld,
dplyr, spelling</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>virtuoso-opensource (Linux). For Mac &amp; Windows,
this package can automate Virtuoso installation.</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-11-02 16:49:02 UTC; cboettig</td>
</tr>
<tr>
<td>Author:</td>
<td>Carl Boettiger <a href="https://orcid.org/0000-0002-1642-628X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph],
  Bryce Mecum <a href="https://orcid.org/0000-0002-0381-3766"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Carl Boettiger &lt;cboettig@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-11-02 22:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='virtuoso-package'>virtuoso: An R Interface to Virtuoso Using ODBC</h2><span id='topic+virtuoso'></span><span id='topic+virtuoso-package'></span>

<h3>Description</h3>

<p>Virtuoso is a high-performance &quot;universal server,&quot; which can act
as both a relational database (supporting standard SQL queries),
and an Resource Description Framework (RDF) triplestore, supporting
SPARQL queries and semantic reasoning. The <code>virtuoso</code> R package provides
R users with a DBI-compatible connection to the Virtuoso database.
The package also provides helper routines to install, launch, and manage
a Virtuoso server locally on Mac, Windows and Linux platforms using
the standard interactive installers from the R command-line.  By
automatically handling these setup steps, the package can make Virtuoso
considerably faster and easier for a most users to deploy in a local
environment. While this can be used as a normal <code>dplyr</code> backend, Virtuoso
excels when used as a RDF triplestore.  Managing the bulk import of triples
from common serializations with a single intuitive command is another key
feature of the <code>virtuoso</code> R package.  Bulk import performance can be tens to
hundreds of times faster than the comparable imports using existing R tools,
including <code>rdflib</code> and <code>redland</code> packages.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Carl Boettiger <a href="mailto:cboettig@gmail.com">cboettig@gmail.com</a> (<a href="https://orcid.org/0000-0002-1642-628X">ORCID</a>) [copyright holder]
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Bryce Mecum <a href="mailto:brycemecum@gmail.com">brycemecum@gmail.com</a> (<a href="https://orcid.org/0000-0002-0381-3766">ORCID</a>) [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/ropensci/virtuoso">https://github.com/ropensci/virtuoso</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ropensci/virtuoso/issues">https://github.com/ropensci/virtuoso/issues</a>
</p>
</li></ul>


<hr>
<h2 id='has_virtuoso'>check for Virtuoso</h2><span id='topic+has_virtuoso'></span>

<h3>Description</h3>

<p>test if the system has a virtuoso installation on the path
</p>


<h3>Usage</h3>

<pre><code class='language-R'>has_virtuoso()
</code></pre>


<h3>Value</h3>

<p>logical indicating if virtuoso-t binary was found or now.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>has_virtuoso()
</code></pre>

<hr>
<h2 id='vos_configure'>Configure Virtuoso Server ini file</h2><span id='topic+vos_configure'></span>

<h3>Description</h3>

<p>Virtuoso Server configuration is determined by a virtuoso.ini file when
server starts. This file includes both system-specific information from
your install (location of server files, addons, etc) and user-configurable
parameters. This helper function provides a way to create and modify an
appropriate <code>virtuoso.ini</code> file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vos_configure(
  dirs_allowed = getwd(),
  gigs_ram = 2,
  template = find_virtuoso_ini(),
  db_dir = vos_db()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vos_configure_+3A_dirs_allowed">dirs_allowed</code></td>
<td>
<p>Paths (relative or absolute) to directories from which
Virtuoso should have read and write access (e.g. for bulk uploading). Should
be specified as a single comma-separated string.</p>
</td></tr>
<tr><td><code id="vos_configure_+3A_gigs_ram">gigs_ram</code></td>
<td>
<p>Indicate approximately the maximum GB of memory Virtuoso can
have access to.  (Used to set NumberOfBuffers &amp; MaxDirtyBuffers in config.)</p>
</td></tr>
<tr><td><code id="vos_configure_+3A_template">template</code></td>
<td>
<p>Location of an existing virtuoso.ini file which will be used
as a template. By default, <code>vos_configure()</code> will attempt to locate the
appropriate template for your system.</p>
</td></tr>
<tr><td><code id="vos_configure_+3A_db_dir">db_dir</code></td>
<td>
<p>location where <code>virtuoso.ini</code> file should be written.  Other
Virtuoso database log files will also be written here.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Writes the requested <code>virtuoso.ini</code> file to the db_dir specified
and returns the path to this file.
</p>


<h3>References</h3>

<p><a href="http://docs.openlinksw.com/virtuoso/dbadm/">http://docs.openlinksw.com/virtuoso/dbadm/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# can take &gt; 5s to test
## configure with typical defaults:
vos_configure()
## Increase or decrease RAM available to virtuoso:
vos_configure(gigs_ram = 1)

</code></pre>

<hr>
<h2 id='vos_connect'>Connect to a Virtuoso Server over ODBC</h2><span id='topic+vos_connect'></span>

<h3>Description</h3>

<p>Connect to a Virtuoso Server over ODBC
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vos_connect(
  driver = NULL,
  uid = "dba",
  pwd = "dba",
  host = "localhost",
  port = "1111",
  system_odbcinst = find_odbcinst(),
  local_odbcinst = odbcinst_path()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vos_connect_+3A_driver">driver</code></td>
<td>
<p>Name of the Driver line in the ODBC configuration</p>
</td></tr>
<tr><td><code id="vos_connect_+3A_uid">uid</code></td>
<td>
<p>User id. Defaults to &quot;dba&quot;</p>
</td></tr>
<tr><td><code id="vos_connect_+3A_pwd">pwd</code></td>
<td>
<p>Password. Defaults to &quot;dba&quot;</p>
</td></tr>
<tr><td><code id="vos_connect_+3A_host">host</code></td>
<td>
<p>IP address of the Virtuoso Server</p>
</td></tr>
<tr><td><code id="vos_connect_+3A_port">port</code></td>
<td>
<p>Port used by Virtuoso. Defaults to
the Virtuoso standard port, 1111</p>
</td></tr>
<tr><td><code id="vos_connect_+3A_system_odbcinst">system_odbcinst</code></td>
<td>
<p>Path to the system <code>odbcinst.ini</code> file. (Does not
require write access.) Default will attempt to find the file for your system.</p>
</td></tr>
<tr><td><code id="vos_connect_+3A_local_odbcinst">local_odbcinst</code></td>
<td>
<p>Path to the local odbcinst we should use.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Default parameters are appropriate for the automatic installer
provided by the package and for the default settings typically used by
local Virtuoso installers.  Adjust these only if you are connecting to a
remote virtuoso server that is not controlled from the R package.
</p>


<h3>Value</h3>

<p>a DBI connection to the Virtuoso database.  This can
be passed to additional virtuoso functions such as <code><a href="#topic+vos_import">vos_import()</a></code>
or <code><a href="#topic+vos_query">vos_query()</a></code>, and can also be used as a standard DBI or dplyr
database backend.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+vos_install">vos_install()</a></code>, <code><a href="#topic+vos_start">vos_start()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>status &lt;- vos_status()

if(has_virtuoso()){
## start up
vos_start()
con &lt;- vos_connect()
}

</code></pre>

<hr>
<h2 id='vos_delete_db'>Delete Virtuoso Database</h2><span id='topic+vos_delete_db'></span>

<h3>Description</h3>

<p>delete the entire Virtuoso database for a fresh start.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vos_delete_db(ask = is_interactive(), db_dir = vos_db())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vos_delete_db_+3A_ask">ask</code></td>
<td>
<p>ask before deleting?</p>
</td></tr>
<tr><td><code id="vos_delete_db_+3A_db_dir">db_dir</code></td>
<td>
<p>location of the directory to delete</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>

vos_delete_db()

</code></pre>

<hr>
<h2 id='vos_destroy_all'>Destroy all Virtuoso's directories</h2><span id='topic+vos_destroy_all'></span>

<h3>Description</h3>

<p>Provides a clean reset of the system that purges all
data files, config files, cache and log files created
by virtuoso R package. This does not uninstall Virtuoso software
itself, see <code><a href="#topic+vos_uninstall">vos_uninstall()</a></code> to uninstall.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vos_destroy_all(force = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vos_destroy_all_+3A_force">force</code></td>
<td>
<p>should permissions be changed (if possible) to allow deletion?</p>
</td></tr>
</table>


<h3>Value</h3>

<p><a href="base.html#topic+TRUE">TRUE</a> if entirely successful in removing all files,
<a href="base.html#topic+FALSE">FALSE</a> otherwise (invisibly).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

vos_destroy_all()

</code></pre>

<hr>
<h2 id='vos_import'>Bulk Import of RDF triples</h2><span id='topic+vos_import'></span>

<h3>Description</h3>

<p>While triples data can be added one by one over SPARQL queries,
Virtuoso bulk import is by far the fastest way to import large
triplestores in the database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vos_import(
  con,
  files = NULL,
  wd = ".",
  glob = "*",
  graph = "rdflib",
  n_cores = 1L
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vos_import_+3A_con">con</code></td>
<td>
<p>a ODBC connection to Virtuoso, from <code><a href="#topic+vos_connect">vos_connect()</a></code></p>
</td></tr>
<tr><td><code id="vos_import_+3A_files">files</code></td>
<td>
<p>paths to files to be imported</p>
</td></tr>
<tr><td><code id="vos_import_+3A_wd">wd</code></td>
<td>
<p>Alternatively, can specify directory and globbing pattern
to import. Note that in this case, wd must be in (or a subdir of)
the <code>AllowedDirs</code> list of <code>virtuoso.ini</code> file created by
<code><a href="#topic+vos_configure">vos_configure()</a></code>. By default, this includes the working directory
where you called <code><a href="#topic+vos_start">vos_start()</a></code> or <code><a href="#topic+vos_configure">vos_configure()</a></code>.</p>
</td></tr>
<tr><td><code id="vos_import_+3A_glob">glob</code></td>
<td>
<p>A wildcard aka globbing pattern (e.g. '&quot;*.nq&quot;&ldquo;).</p>
</td></tr>
<tr><td><code id="vos_import_+3A_graph">graph</code></td>
<td>
<p>Name (technically URI) for a graph in the database.
Can leave as default. If a graph is already specified by the
import file (e.g. in nquads), that will be used instead.</p>
</td></tr>
<tr><td><code id="vos_import_+3A_n_cores">n_cores</code></td>
<td>
<p>specify the number of available cores for parallel loading.
Particularly useful when importing large numbers of bulk files.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>the bulk importer imports all files matching a pattern
in a given directory.  If given a list of files, these are
temporarily symlinked (or copied on Windows machines) to
the Virtuoso app cache dir in a subdirectory, and the entire
subdirectory is loaded (filtered by the globbing pattern).
If files are not specified, load is called directly on the specified
directory and pattern.  This is particularly useful for loading large
numbers of files.
</p>
<p>Note that Virtuoso recommends breaking large files into multiple smaller ones,
which can improve loading time (particularly if using multiple cores.)
</p>
<p>Virtuoso Bulk Importer recognizes the following file formats:
</p>

<ul>
<li> <p><code>.grdf</code>
</p>
</li>
<li> <p><code>.nq</code>
</p>
</li>
<li> <p><code>.owl</code>
</p>
</li>
<li> <p><code>.nt</code>
</p>
</li>
<li> <p><code>.rdf</code>
</p>
</li>
<li> <p><code>.trig</code>
</p>
</li>
<li> <p><code>.ttl</code>
</p>
</li>
<li> <p><code>.xml</code>
</p>
</li></ul>

<p>Any of these can optionally be gzipped (with a <code>.gz</code> extension).
</p>


<h3>Value</h3>

<p>(Invisibly) returns the status table of the bulk loader,
indicating file loading time or errors.
</p>


<h3>References</h3>

<p><a href="http://vos.openlinksw.com/owiki/wiki/VOS/VirtBulkRDFLoader">http://vos.openlinksw.com/owiki/wiki/VOS/VirtBulkRDFLoader</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
vos_status()


if(has_virtuoso()){
vos_start()
con &lt;- vos_connect()

example &lt;- system.file("extdata", "person.nq", package = "virtuoso")
vos_import(con, example)
}

</code></pre>

<hr>
<h2 id='vos_install'>Helper method for installing Virtuoso Server</h2><span id='topic+vos_install'></span>

<h3>Description</h3>

<p>Installation helper for Mac and Windows machines.  By default,
method will download and launch the official <code>.dmg</code> or <code>.exe</code> installer
for your platform, running the standard drag-n-drop installer or
interactive dialog.  Setting <code>ask = FALSE</code> will allow the installer
to run entirely unsupervised, which is suitable for use in scripts.
Mac users can alternatively opt to install Virtuoso through HomeBrew
by setting <code>use_brew=TRUE</code>. Linux users should simply install the
<code>virtuoso-opensource</code> package (e.g. in debian &amp; ubuntu) using the
package manager or by contacting your system administrator.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vos_install(ask = is_interactive(), use_brew = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vos_install_+3A_ask">ask</code></td>
<td>
<p>Should we ask user for interactive installation?</p>
</td></tr>
<tr><td><code id="vos_install_+3A_use_brew">use_brew</code></td>
<td>
<p>Should we use homebrew to install? (MacOS only)</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+vos_start">vos_start()</a></code>, <code><a href="#topic+vos_uninstall">vos_uninstall()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
vos_install()

</code></pre>

<hr>
<h2 id='vos_kill'>Stop (kill) the Virtuoso server</h2><span id='topic+vos_kill'></span>

<h3>Description</h3>

<p>Kill ends the process started by <code><a href="#topic+vos_start">vos_start()</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vos_kill(p = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vos_kill_+3A_p">p</code></td>
<td>
<p>a process object, returned by
<code><a href="#topic+vos_process">vos_process()</a></code> or  <code><a href="#topic+vos_start">vos_start()</a></code>.
(will be restored from cache if not provided)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>vos_kill simply shuts down the local Virtuoso server,
it does not remove any data stored in the database system.
<code><a href="#topic+vos_kill">vos_kill()</a></code> terminates the process, removing the
process id from the process table.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+vos_start">vos_start()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if(has_virtuoso()){

  vos_start()
  vos_kill()

  }

</code></pre>

<hr>
<h2 id='vos_list_graphs'>List graphs</h2><span id='topic+vos_list_graphs'></span>

<h3>Description</h3>

<p>List graphs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vos_list_graphs(con)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vos_list_graphs_+3A_con">con</code></td>
<td>
<p>a ODBC connection to Virtuoso, from <code><a href="#topic+vos_connect">vos_connect()</a></code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>status &lt;- vos_status()

if(has_virtuoso() &amp; is.null(status)){
vos_start()
con &lt;- vos_connect()
vos_list_graphs(con)

}
</code></pre>

<hr>
<h2 id='vos_log'>Query the server logs</h2><span id='topic+vos_log'></span>

<h3>Description</h3>

<p>Query the server logs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vos_log(p = NA, collapse = NULL, just_errors = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vos_log_+3A_p">p</code></td>
<td>
<p>a process object, returned by
<code><a href="#topic+vos_process">vos_process()</a></code> or  <code><a href="#topic+vos_start">vos_start()</a></code>.
(will be restored from cache if not provided)</p>
</td></tr>
<tr><td><code id="vos_log_+3A_collapse">collapse</code></td>
<td>
<p>an optional character string to separate the
lines in a single character string.</p>
</td></tr>
<tr><td><code id="vos_log_+3A_just_errors">just_errors</code></td>
<td>
<p>logical, default <a href="base.html#topic+FALSE">FALSE</a>. Set to <a href="base.html#topic+TRUE">TRUE</a> to return
just the lines that contain the term &quot;error&quot;, which can be useful
in debugging or validating bulk imports.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Virtuoso logs as a character vector.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+vos_start">vos_start()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(has_virtuoso())
  vos_log()

</code></pre>

<hr>
<h2 id='vos_odbcinst'>Configure the ODBC Driver for Virtuoso</h2><span id='topic+vos_odbcinst'></span>

<h3>Description</h3>

<p>ODBC uses an <code>odbcinst.ini</code> file to point ODBC at the library required
to drive any given database.  This function helps us automatically
locate the driver library on different operating systems and configure
the odbcinst appropriately for each OS.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vos_odbcinst(
  system_odbcinst = find_odbcinst(),
  local_odbcinst = odbcinst_path()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vos_odbcinst_+3A_system_odbcinst">system_odbcinst</code></td>
<td>
<p>Path to the system <code>odbcinst.ini</code> file. (Does not
require write access.) Default will attempt to find the file for your system.</p>
</td></tr>
<tr><td><code id="vos_odbcinst_+3A_local_odbcinst">local_odbcinst</code></td>
<td>
<p>Path to the local odbcinst we should use.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is called automatically by <code><a href="#topic+vos_install">vos_install()</a></code> and thus
does not usually need to be called by the user.  Users can also manually
configure ODBC as outlined in
<a href="https://github.com/r-dbi/odbc#dsn-configuration-files">https://github.com/r-dbi/odbc#dsn-configuration-files</a>.
This is merely a convenience function automating that process on most
systems.
</p>


<h3>Value</h3>

<p>the path to the odbcinst file that is created or modified.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Configures ODBC and returns silently on success.
vos_odbcinst()

## see where the inst file is located:
inst &lt;- vos_odbcinst()
inst

</code></pre>

<hr>
<h2 id='vos_process'>Return a handle to an existing Virtuoso Process</h2><span id='topic+vos_process'></span>

<h3>Description</h3>

<p>Generally a user will not need to access this function directly,
though it may be useful for debugging purposes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vos_process(p = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vos_process_+3A_p">p</code></td>
<td>
<p>a process object, returned by
<code><a href="#topic+vos_process">vos_process()</a></code> or  <code><a href="#topic+vos_start">vos_start()</a></code>.
(will be restored from cache if not provided)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns the <code><a href="processx.html#topic+process">processx::process()</a></code> object cached by <code><a href="#topic+vos_start">vos_start()</a></code>
to control the external Virtuoso sever process from R.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(has_virtuoso())
vos_process()

</code></pre>

<hr>
<h2 id='vos_query'>Run a SPARQL query</h2><span id='topic+vos_query'></span>

<h3>Description</h3>

<p>Run a SPARQL query
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vos_query(con, query)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vos_query_+3A_con">con</code></td>
<td>
<p>a ODBC connection to Virtuoso, from <code><a href="#topic+vos_connect">vos_connect()</a></code></p>
</td></tr>
<tr><td><code id="vos_query_+3A_query">query</code></td>
<td>
<p>a SPARQL query statement</p>
</td></tr>
</table>


<h3>Details</h3>

<p>SPARQL is a graph query language similar in syntax SQL,
but allows the use of variables to walk through graph nodes.
</p>


<h3>Value</h3>

<p>a <code>data.frame</code> containing the results of the query
</p>


<h3>References</h3>


<ul>
<li> <p><a href="https://en.wikipedia.org/wiki/SPARQL">https://en.wikipedia.org/wiki/SPARQL</a>
</p>
</li>
<li> <p><a href="https://docs.ropensci.org/rdflib/articles/rdf_intro.html">https://docs.ropensci.org/rdflib/articles/rdf_intro.html</a>
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+vos_start">vos_start()</a></code>, <code><a href="#topic+vos_connect">vos_connect()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>vos_status()

if(has_virtuoso()){
vos_start()
con &lt;- vos_connect()

# show first 4 triples in the database
DBI::dbGetQuery(con, "SPARQL SELECT * WHERE { ?s ?p ?o } LIMIT 4")
}

</code></pre>

<hr>
<h2 id='vos_set_paths'>set Virtuoso paths</h2><span id='topic+vos_set_paths'></span>

<h3>Description</h3>

<p>Set the location of Virtuoso database, configure files,
cache, and logs to your preferred location.  Set home
to the location of your Virtuoso installation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vos_set_paths(
  db_dir = vos_db(),
  config_dir = vos_config(),
  cache_dir = vos_cache(),
  log_dir = vos_logdir(),
  home = virtuoso_home()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vos_set_paths_+3A_db_dir">db_dir</code></td>
<td>
<p>Location of data in the Virtuoso (tables, triplestore)</p>
</td></tr>
<tr><td><code id="vos_set_paths_+3A_config_dir">config_dir</code></td>
<td>
<p>Location of configuration files for Virtuoso</p>
</td></tr>
<tr><td><code id="vos_set_paths_+3A_cache_dir">cache_dir</code></td>
<td>
<p>Location of cache for bulk importing</p>
</td></tr>
<tr><td><code id="vos_set_paths_+3A_log_dir">log_dir</code></td>
<td>
<p>Location of Virutoso Server logs</p>
</td></tr>
<tr><td><code id="vos_set_paths_+3A_home">home</code></td>
<td>
<p>Location of the Virtuoso installation</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical vector, with elements being true
if setting the corresponding variable succeeded
(invisibly).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(has_virtuoso())
  vos_set_paths()

</code></pre>

<hr>
<h2 id='vos_start'>Start a Virtuoso Server</h2><span id='topic+vos_start'></span>

<h3>Description</h3>

<p>This function will attempt to start a virtuoso server
instance that can be managed completely from R.  This allows
the user to easily start, stop, and access server logs and functions
from the R command line.  This server will be automatically shut
down when R exits or restarts, or can be explicitly controlled using
<code><a href="#topic+vos_kill">vos_kill()</a></code>, <code><a href="#topic+vos_log">vos_log()</a></code>, and <code><a href="#topic+vos_status">vos_status()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vos_start(ini = NULL, wait = 30)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vos_start_+3A_ini">ini</code></td>
<td>
<p>path to a virtuoso.ini configuration file. If not
provided, function will attempt to determine the location of the
default configuration file.</p>
</td></tr>
<tr><td><code id="vos_start_+3A_wait">wait</code></td>
<td>
<p>number of seconds to wait for server to come online</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It can take some time for the server to come up before it is ready to
accept queries.  <code><a href="#topic+vos_start">vos_start()</a></code> will return as soon as the server is active,
which typically takes about 10 seconds on tested systems. <code><a href="#topic+vos_start">vos_start()</a></code> monitors
the Virtuoso logs every one second for a maximum time of <code>wait</code> seconds
(default 30 seconds) to see if the server is ready.  If <code>wait</code> time is exceeded,
<code><a href="#topic+vos_start">vos_start()</a></code> will simply return the current server status.  This does not mean
that starting has failed, it may simply need longer before the server is active.
Use <code><a href="#topic+vos_status">vos_status()</a></code> to continue to monitor the server status manually.
</p>
<p>If no <code>virtuoso.ini</code> configuration file is provided, <code><a href="#topic+vos_start">vos_start()</a></code> will
automatically attempt to configure one.  For more control over this,
use <code><a href="#topic+vos_configure">vos_configure()</a></code>, see examples.
</p>


<h3>Value</h3>

<p>invisibly returns the <code><a href="processx.html#topic+process">processx::process()</a></code> object which can be used
to control the external process from R.  It is not necessary for a user
to store this return object, as <code><a href="#topic+vos_start">vos_start()</a></code> caches the process object so
it can be automatically accessed by other functions without needing to store
and pass the return object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+vos_install">vos_install()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

if(has_virtuoso()){
vos_start()
## or with custom config:
vos_start(vos_configure(gigs_ram = 3))

}

</code></pre>

<hr>
<h2 id='vos_status'>Query the server status</h2><span id='topic+vos_status'></span>

<h3>Description</h3>

<p>Query the server status
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vos_status(p = NA, wait = 10)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vos_status_+3A_p">p</code></td>
<td>
<p>a process object, returned by
<code><a href="#topic+vos_process">vos_process()</a></code> or  <code><a href="#topic+vos_start">vos_start()</a></code>.
(will be restored from cache if not provided)</p>
</td></tr>
<tr><td><code id="vos_status_+3A_wait">wait</code></td>
<td>
<p>number of seconds to wait for server to come online</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note: Use <code><a href="#topic+vos_log">vos_log()</a></code> to see the full log
</p>


<h3>Value</h3>

<p>a character string indicating the state of the server:
</p>

<ul>
<li><p> &quot;not detected&quot; if no process can be found
</p>
</li>
<li><p> &quot;dead&quot; process exists but reports that server is not alive.  Server may fail
to come online due to errors in configuration file. see <code><a href="#topic+vos_configure">vos_configure()</a></code>
</p>
</li>
<li><p> &quot;running&quot; Server is up and accepting queries.
</p>
</li>
<li><p> &quot;sleeping&quot; Server is up and accepting queries.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>if(has_virtuoso())
  vos_status()

</code></pre>

<hr>
<h2 id='vos_uninstall'>Uninstall Virtuoso</h2><span id='topic+vos_uninstall'></span>

<h3>Description</h3>

<p>Automatic uninstaller for Mac OSX and Windows clients.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vos_uninstall()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
vos_uninstall()

## End(Not run)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
