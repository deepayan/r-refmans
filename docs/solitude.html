<!DOCTYPE html><html lang="en"><head><title>Help for package solitude</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {solitude}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#solitude'><p>An Implementation of Isolation Forest</p></a></li>
<li><a href='#is_integerish'><p>Check for a single integer</p></a></li>
<li><a href='#isolationForest'><p>Fit an Isolation Forest</p></a></li>
<li><a href='#terminalNodesDepth'><p>Depth of each terminal node of all trees in a ranger model</p></a></li>
<li><a href='#terminalNodesDepthPerTree'><p>Depth of each terminal node of a single tree in a ranger model</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>An Implementation of Isolation Forest</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Isolation forest is anomaly detection method introduced by the paper Isolation based Anomaly Detection (Liu, Ting and Zhou &lt;<a href="https://doi.org/10.1145%2F2133360.2133363">doi:10.1145/2133360.2133363</a>&gt;).</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/talegari/solitude">https://github.com/talegari/solitude</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/talegari/solitude/issues">https://github.com/talegari/solitude/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>ranger (&ge; 0.11.0), data.table (&ge; 1.11.4), igraph (&ge; 1.2.2),
future.apply (&ge; 0.2.0), R6 (&ge; 2.4.0), lgr (&ge; 0.3.4),</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0),</td>
</tr>
<tr>
<td>Suggests:</td>
<td>tidyverse, uwot, mlbench, rsample</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-07-29 19:14:19 UTC; dattachidambara</td>
</tr>
<tr>
<td>Author:</td>
<td>Komala Sheshachala Srikanth [aut, cre],
  David Zimmermann [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Komala Sheshachala Srikanth &lt;sri.teach@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-07-29 20:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='solitude'>An Implementation of Isolation Forest</h2><span id='topic+solitude'></span><span id='topic+solitude-package'></span>

<h3>Description</h3>

<p>Isolation forest is an anomaly detection method introduced by the paper Isolation based Anomaly Detection (Liu, Ting and Zhou &lt;doi:10.1145/2133360.2133363&gt;)
</p>


<h3>Author(s)</h3>

<p>Srikanth Komala Sheshachala
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/talegari/solitude">https://github.com/talegari/solitude</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/talegari/solitude/issues">https://github.com/talegari/solitude/issues</a>
</p>
</li></ul>


<hr>
<h2 id='is_integerish'>Check for a single integer</h2><span id='topic+is_integerish'></span>

<h3>Description</h3>

<p>for a single integer
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_integerish(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_integerish_+3A_x">x</code></td>
<td>
<p>input</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE or FALSE
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: is_integerish(1)
</code></pre>

<hr>
<h2 id='isolationForest'>Fit an Isolation Forest</h2><span id='topic+isolationForest'></span>

<h3>Description</h3>

<p>'solitude' class implements the isolation forest method
introduced by paper Isolation based Anomaly Detection (Liu, Ting and Zhou
&lt;doi:10.1145/2133360.2133363&gt;). The extremely randomized trees (extratrees)
required to build the isolation forest is grown using
<code><a href="ranger.html#topic+ranger">ranger</a></code> function from <span class="pkg">ranger</span> package.
</p>


<h3>Design</h3>

<p><code>$new()</code> initiates a new 'solitude' object. The
possible arguments are:
</p>

<ul>
<li> <p><code>sample_size</code>: (positive integer, default = 256) Number of
observations in the dataset to used to build a tree in  the forest
</p>
</li>
<li> <p><code>num_trees</code>: (positive integer, default = 100) Number of trees
to be built in the forest
</p>
</li>
<li> <p><code>replace</code>: (boolean, default = FALSE) Whether the sample of
observations should be chosen with replacement when sample_size is less
than the number of observations in the dataset
</p>
</li>
<li> <p><code>seed</code>: (positive integer, default = 101) Random seed for the
forest
</p>
</li>
<li> <p><code>nproc</code>: (NULL or a positive integer, default: NULL, means use
all resources) Number of parallel threads to be used by ranger
</p>
</li>
<li> <p><code>respect_unordered_factors</code>: (string, default: &quot;partition&quot;)See
respect.unordered.factors argument in <code><a href="ranger.html#topic+ranger">ranger</a></code>
</p>
</li>
<li> <p><code>max_depth</code>: (positive number, default:
ceiling(log2(sample_size))) See max.depth argument in
<code><a href="ranger.html#topic+ranger">ranger</a></code>
</p>
</li></ul>

<p><code>$fit()</code> fits a isolation forest for the given dataframe or sparse matrix, computes
depths of terminal nodes of each tree and stores the anomaly scores and
average depth values in <code>$scores</code> object as a data.table
</p>
<p><code>$predict()</code> returns anomaly scores for a new data as a data.table
</p>


<h3>Details</h3>


<ul>
<li><p> Parallelization: <code><a href="ranger.html#topic+ranger">ranger</a></code> is parallelized and by
default uses all the resources. This is supported when nproc is set to
NULL. The process of obtaining depths of terminal nodes (which is excuted
with <code>$fit()</code> is called) may be parallelized separately by setting up
a <span class="pkg">future</span> backend.
</p>
</li></ul>



<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-new"><code>isolationForest$new()</code></a>
</p>
</li>
<li> <p><a href="#method-fit"><code>isolationForest$fit()</code></a>
</p>
</li>
<li> <p><a href="#method-predict"><code>isolationForest$predict()</code></a>
</p>
</li>
<li> <p><a href="#method-clone"><code>isolationForest$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-new"></a>



<h4>Method <code>new()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>isolationForest$new(
  sample_size = 256,
  num_trees = 100,
  replace = FALSE,
  seed = 101,
  nproc = NULL,
  respect_unordered_factors = NULL,
  max_depth = ceiling(log2(sample_size))
)</pre></div>


<hr>
<a id="method-fit"></a>



<h4>Method <code>fit()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>isolationForest$fit(dataset)</pre></div>


<hr>
<a id="method-predict"></a>



<h4>Method <code>predict()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>isolationForest$predict(data)</pre></div>


<hr>
<a id="method-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>isolationForest$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library("solitude")
library("tidyverse")
library("mlbench")

data(PimaIndiansDiabetes)
PimaIndiansDiabetes = as_tibble(PimaIndiansDiabetes)
PimaIndiansDiabetes

splitter   = PimaIndiansDiabetes %&gt;%
  select(-diabetes) %&gt;%
  rsample::initial_split(prop = 0.5)
pima_train = rsample::training(splitter)
pima_test  = rsample::testing(splitter)

iso = isolationForest$new()
iso$fit(pima_train)

scores_train = pima_train %&gt;%
  iso$predict() %&gt;%
  arrange(desc(anomaly_score))

scores_train

umap_train = pima_train %&gt;%
  scale() %&gt;%
  uwot::umap() %&gt;%
  setNames(c("V1", "V2")) %&gt;%
  as_tibble() %&gt;%
  rowid_to_column() %&gt;%
  left_join(scores_train, by = c("rowid" = "id"))

umap_train

umap_train %&gt;%
  ggplot(aes(V1, V2)) +
  geom_point(aes(size = anomaly_score))

scores_test = pima_test %&gt;%
  iso$predict() %&gt;%
  arrange(desc(anomaly_score))

scores_test

## End(Not run)
</code></pre>

<hr>
<h2 id='terminalNodesDepth'>Depth of each terminal node of all trees in a ranger model</h2><span id='topic+terminalNodesDepth'></span>

<h3>Description</h3>

<p>Depth of each terminal node of all trees in a ranger model is
returned as a three column tibble with column names: 'id_tree',
'id_node', 'depth'. Note that root node has the node_id = 0.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>terminalNodesDepth(model)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="terminalNodesDepth_+3A_model">model</code></td>
<td>
<p>A ranger model</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function may be parallelized using a future backend.
</p>


<h3>Value</h3>

<p>A tibble with three columns: 'id_tree', 'id_node', 'depth'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rf = ranger::ranger(Species ~ ., data = iris, num.trees = 100)
terminalNodesDepth(rf)
</code></pre>

<hr>
<h2 id='terminalNodesDepthPerTree'>Depth of each terminal node of a single tree in a ranger model</h2><span id='topic+terminalNodesDepthPerTree'></span>

<h3>Description</h3>

<p>Depth of each terminal node of a single tree in a ranger model.
Note that root node has the id_node = 0.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>terminalNodesDepthPerTree(treelike)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="terminalNodesDepthPerTree_+3A_treelike">treelike</code></td>
<td>
<p>Output of 'ranger::treeInfo'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.table with two columns: id_node and depth
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  rf = ranger::ranger(Species ~ ., data = iris)
  terminalNodesDepthPerTree(ranger::treeInfo(rf, 1))

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
