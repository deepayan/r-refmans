<!DOCTYPE html><html><head><title>Help for package rstatscn</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rstatscn}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#checkHttpStatus'><p>private function for check the http status</p></a></li>
<li><a href='#dataJson2df'><p>private function to convert the returned jason data to a dataframe</p></a></li>
<li><a href='#genDfwds'><p>private function for constructing the query parameter for dfwds</p></a></li>
<li><a href='#milSec'><p>private function for sec</p></a></li>
<li><a href='#statscnDbs'><p>the available dbs</p></a></li>
<li><a href='#statscnQueryData'><p>query data in the statscn db</p></a></li>
<li><a href='#statscnQueryLastN'><p>fetch the lastN data</p></a></li>
<li><a href='#statscnQueryZb'><p>the data categories</p></a></li>
<li><a href='#statscnRegions'><p>the regions in db</p></a></li>
<li><a href='#statscnRowNamePrefix'><p>statscnRowNamePrefix</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>R Interface for China National Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2019-04-25</td>
</tr>
<tr>
<td>Author:</td>
<td>Xuehui YANG</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Xuehui YANG &lt;jianghang@bagualu.net&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>R interface for china national data <a href="http://data.stats.gov.cn/">http://data.stats.gov.cn/</a>, 
    some convenient functions for accessing the national data are provided.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.2)</td>
</tr>
<tr>
<td>Imports:</td>
<td>httr(&ge; 1.0.0), jsonlite(&ge; 0.9.19)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://www.bagualu.net/">http://www.bagualu.net/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="http://www.bagualu.net/wordpress/rstatscn-the-r-interface-for-china-national-data">http://www.bagualu.net/wordpress/rstatscn-the-r-interface-for-china-national-data</a></td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-04-25 05:45:51 UTC; xuyang</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2019-04-25 06:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='checkHttpStatus'>private function for check the http status</h2><span id='topic+checkHttpStatus'></span>

<h3>Description</h3>

<p>private function for check the http status
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkHttpStatus(ret)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkHttpStatus_+3A_ret">ret</code></td>
<td>
<p>the response obj returned by httr package</p>
</td></tr>
</table>


<h3>Value</h3>

<p>return nothing , but if it finds some error , it stop the script
</p>

<hr>
<h2 id='dataJson2df'>private function to convert the returned jason data to a dataframe</h2><span id='topic+dataJson2df'></span>

<h3>Description</h3>

<p>private function to convert the returned jason data to a dataframe
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dataJson2df(rawObj, rowcode, colcode)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dataJson2df_+3A_rawobj">rawObj</code></td>
<td>
<p>the fromJSON output</p>
</td></tr>
<tr><td><code id="dataJson2df_+3A_rowcode">rowcode</code></td>
<td>
<p>rowcode in the data frame</p>
</td></tr>
<tr><td><code id="dataJson2df_+3A_colcode">colcode</code></td>
<td>
<p>colcode in the data frame</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the contructed data frame
</p>

<hr>
<h2 id='genDfwds'>private function for constructing the query parameter for dfwds</h2><span id='topic+genDfwds'></span>

<h3>Description</h3>

<p>private function for constructing the query parameter for dfwds
</p>


<h3>Usage</h3>

<pre><code class='language-R'>genDfwds(wdcode, valuecode)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="genDfwds_+3A_wdcode">wdcode</code></td>
<td>
<p>string value , one of c(&quot;zb&quot;,&quot;sj&quot;,&quot;reg&quot;)</p>
</td></tr>
<tr><td><code id="genDfwds_+3A_valuecode">valuecode</code></td>
<td>
<p>string value ,  following is the table for available valuecode
zb:   the valudecode can be gotten by statscnQueryZb() function 
sj:   the valudecode can be &quot;2014&quot; for nd db,  &quot;2014C&quot; for jd db.
reg:  the valudecode is the region code fetched by statscnRegions(dbcode) function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>return the queyr string for the http request
</p>

<hr>
<h2 id='milSec'>private function for sec</h2><span id='topic+milSec'></span>

<h3>Description</h3>

<p>private function for sec
</p>


<h3>Usage</h3>

<pre><code class='language-R'>milSec()
</code></pre>


<h3>Value</h3>

<p>milsec
</p>

<hr>
<h2 id='statscnDbs'>the available dbs</h2><span id='topic+statscnDbs'></span>

<h3>Description</h3>

<p>the available dbs in the national db
</p>


<h3>Usage</h3>

<pre><code class='language-R'>statscnDbs()
</code></pre>


<h3>Value</h3>

<p>a data frame with 2 columns , one is the dbcode, another is the db description
</p>


<h3>Examples</h3>

<pre><code class='language-R'> statscnDbs()
</code></pre>

<hr>
<h2 id='statscnQueryData'>query data in the statscn db</h2><span id='topic+statscnQueryData'></span>

<h3>Description</h3>

<p>the main function for querying the statscn database, it will retrieve the data from specified db and orginize the data in a data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>statscnQueryData(zb = "A0201", dbcode = "hgnd", rowcode = "zb",
  colcode = "sj", moreWd = list(name = NA, value = NA))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="statscnQueryData_+3A_zb">zb</code></td>
<td>
<p>the zb/category code to be queried</p>
</td></tr>
<tr><td><code id="statscnQueryData_+3A_dbcode">dbcode</code></td>
<td>
<p>the db code for querying</p>
</td></tr>
<tr><td><code id="statscnQueryData_+3A_rowcode">rowcode</code></td>
<td>
<p>rowcode in the returned data frame</p>
</td></tr>
<tr><td><code id="statscnQueryData_+3A_colcode">colcode</code></td>
<td>
<p>colcode in the returned data frame</p>
</td></tr>
<tr><td><code id="statscnQueryData_+3A_morewd">moreWd</code></td>
<td>
<p>more constraint on the data
where the name should be one of c(&quot;reg&quot;,&quot;sj&quot;) , which stand for region and sj/time.
the valuecode for reg should be the region code queried by statscnRegions()
the valuecode for sj should be like '2014' for *nd , '2014C' for *jd , '201405' for *yd.
Be noted that , the moreWd name should be different with either rowcode or colcode</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the data frame you are quering
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
df=statscnQueryData('A0201',dbcode='hgnd')
df=statscnQueryData('A0201',dbcode='fsnd',rowcode='zb',colcode='sj',
                    moreWd=list(name='reg',value='110000'))

## End(Not run)
</code></pre>

<hr>
<h2 id='statscnQueryLastN'>fetch the lastN data</h2><span id='topic+statscnQueryLastN'></span>

<h3>Description</h3>

<p>fetch the lastN data for the latest query, only affect the number of rows in the returned data.
This function can not be used alone , statscnQueryData() has to be called before this function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>statscnQueryLastN(n)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="statscnQueryLastN_+3A_n">n</code></td>
<td>
<p>the number of rows to be fetched</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the last n rows data in the latest query
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
df=statscnQueryData('A0201',dbcode='hgnd')
df2=statscnQueryLastN(20)

## End(Not run)
</code></pre>

<hr>
<h2 id='statscnQueryZb'>the data categories</h2><span id='topic+statscnQueryZb'></span>

<h3>Description</h3>

<p>the sub data categories for the zbid category, dbcode need to be specified, where the dbcode can be fetched by function
statscnDbs(). In the returned data frame, the column 'isParent' shows if each sub category is leap category or not
</p>


<h3>Usage</h3>

<pre><code class='language-R'>statscnQueryZb(zbid = "zb", dbcode = "hgnd")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="statscnQueryZb_+3A_zbid">zbid</code></td>
<td>
<p>the father zb/category id , the root id is 'zb'</p>
</td></tr>
<tr><td><code id="statscnQueryZb_+3A_dbcode">dbcode</code></td>
<td>
<p>which db will be queried</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the data frame with the sub zbs/categories , if the given zbid is not a Parent zb/category, null list is returned
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 statscnQueryZb()
 statscnQueryZb('A01',dbcode="hgnd")

## End(Not run)
</code></pre>

<hr>
<h2 id='statscnRegions'>the regions in db</h2><span id='topic+statscnRegions'></span>

<h3>Description</h3>

<p>the available regions in the specified db, it is used for query the province, city and country code generally
</p>


<h3>Usage</h3>

<pre><code class='language-R'>statscnRegions(dbcode = "fsnd")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="statscnRegions_+3A_dbcode">dbcode</code></td>
<td>
<p>the dbcode should be some province db(fs*) , city db(cs*) or internaltional db(gj*)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the data frame with all the available region codes and names in the db
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 statscnRegions('fsnd')
 statscnRegions('csnd')
 statscnRegions('gjnd')

## End(Not run)
</code></pre>

<hr>
<h2 id='statscnRowNamePrefix'>statscnRowNamePrefix</h2><span id='topic+statscnRowNamePrefix'></span>

<h3>Description</h3>

<p>set the rowName prefix in the dataframe
</p>


<h3>Usage</h3>

<pre><code class='language-R'>statscnRowNamePrefix(p = "nrow")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="statscnRowNamePrefix_+3A_p">p</code></td>
<td>
<p>, how to set the rowname prefix. 
it is 'nrow' by default , and it is the only supported value currently
to unset the row name prefix, call this function with p=NULL</p>
</td></tr>
</table>


<h3>Details</h3>

<p>in case you encounter the following error:
Error in 'row.names&lt;-.data.frame'('*tmp*', value = value) : 
duplicate 'row.names' are not allowed
you need to call this function
</p>


<h3>Value</h3>

<p>no return
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
