<!DOCTYPE html><html><head><title>Help for package fangs</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {fangs}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#compute_expected_loss'><p>Estimate the expected FARO Loss for a Feature Allocation</p></a></li>
<li><a href='#compute_loss'><p>Compute the FARO Loss Between Feature Allocations</p></a></li>
<li><a href='#fangs'><p>Feature Allocation Neighborhood Greedy Search</p></a></li>
<li><a href='#samplesFA'><p>Samples from the Attraction Indian Buffet Distribution</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Feature Allocation Neighborhood Greedy Search Algorithm</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.13</td>
</tr>
<tr>
<td>Description:</td>
<td>A neighborhood-based, greedy search algorithm is performed to estimate a feature allocation by minimizing the expected loss based on posterior samples from the feature allocation distribution. The method is currently under peer review but an earlier draft is available in Dahl, Johnson, and Andros (2022+) &lt;<a href="https://doi.org/10.48550%2FarXiv.2207.13824">doi:10.48550/arXiv.2207.13824</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE | <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/dbdahl/fangs">https://github.com/dbdahl/fangs</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/dbdahl/fangs/issues">https://github.com/dbdahl/fangs/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.2.0)</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>Cargo (Rust's package manager), rustc (&gt;= 1.65)</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-07-17 19:13:23 UTC; dahl</td>
</tr>
<tr>
<td>Author:</td>
<td>David B. Dahl <a href="https://orcid.org/0000-0002-8173-1547"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  R. Jacob Andros <a href="https://orcid.org/0000-0002-1289-385X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Devin J. Johnson <a href="https://orcid.org/0000-0003-2619-6649"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Alex Crichton [cph] (Rust crates: proc-macro2, cfg-if.),
  Andrii Dmytrenko [cph] (Rust crate: lapjv.),
  Brendan Zabarauskas [cph] (Rust crate: approx.),
  David B. Dahl [cph] (Rust crates: roxido, roxido_macro.),
  David Tolnay [cph] (Rust crates: syn, proc-macro2, quote,
    unicode-ident.),
  DutchGhost [cph] (Rust crate: matrixmultiply.),
  Enthought, Inc. [cph] (Rust crate: ndarray.),
  Gilad Naaman [cph] (Rust crate: memoffset.),
  Jim Turner [cph] (Rust crate: ndarray.),
  Josh Stone [cph] (Rust crates: rayon, autocfg, rayon-core.),
  matrixmultiply authors [cph] (Rust crate: matrixmultiply.),
  Melissa O'Neill [cph] (Rust crate: rand_pcg.),
  ndarray developers [cph] (Rust crate: ndarray.),
  Niko Matsakis [cph] (Rust crates: rayon-core, rayon.),
  Paul Dicker [cph] (Rust crate: rand_pcg.),
  PCG Project contributors [cph] (Rust crate: rand_pcg.),
  Ralf Jung [cph] (Rust crate: memoffset.),
  rawpointer developers [cph] (Rust crate: rawpointer.),
  R. Janis Goldschmidt [cph] (Rust crate: matrixmultiply.),
  SciPy Developers [cph] (Rust crate: ndarray.),
  scopeguard developers [cph] (Rust crate: scopeguard.),
  Sean McArthur [cph] (Rust crate: num_cpus.),
  Stefan Lankes [cph] (Rust crate: hermit-abi.),
  The Cranelift Project Developers [cph] (Rust crate: wasi.),
  The Crossbeam Project Developers [cph] (Rust crates: crossbeam-utils,
    crossbeam-epoch, crossbeam-deque, crossbeam-channel.),
  The CryptoCorrosion Contributors [cph] (Rust crates: ppv-lite86,
    rand_chacha.),
  The Go Authors [cph] (Rust crate: crossbeam-channel.),
  The Rand Project Developers [cph] (Rust crates: rand_chacha, getrandom,
    rand_core, rand, rand_pcg.),
  The Rust Project Developers [cph] (Rust crates: quote, rayon,
    crossbeam-channel, rand, num-traits, getrandom, libc, rand_chacha,
    num-complex, num-integer, rand_core, log.),
  Ulrik Sverdrup "bluss" [cph] (Rust crate: scopeguard, matrixmultiply,
    either, rawpointer, itertools, ndarray.),
  Unicode, Inc. [cph] (Rust crate: unicode-ident.)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>David B. Dahl &lt;dahl@stat.byu.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-07-17 19:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='compute_expected_loss'>Estimate the expected FARO Loss for a Feature Allocation</h2><span id='topic+compute_expected_loss'></span>

<h3>Description</h3>

<p>A Monte Carlo estimate of the expected FARO loss is computed for a feature allocation given a set of posterior samples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_expected_loss(samples, Z, a = 1, nCores = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compute_expected_loss_+3A_samples">samples</code></td>
<td>
<p>An object of class &lsquo;list&rsquo; containing posterior samples
from a feature allocation distribution. Each list element encodes one
feature allocation as a binary matrix, with items in the rows and features
in the columns.</p>
</td></tr>
<tr><td><code id="compute_expected_loss_+3A_z">Z</code></td>
<td>
<p>A feature allocation in binary matrix form, with items in
the rows and features in the columns.</p>
</td></tr>
<tr><td><code id="compute_expected_loss_+3A_a">a</code></td>
<td>
<p>A numeric scalar for the cost parameter of generalized Hamming
distance used in FARO loss.  The other cost parameter, <code class="reqn">b</code>, is equal to
<code class="reqn">2 - a</code>.</p>
</td></tr>
<tr><td><code id="compute_expected_loss_+3A_ncores">nCores</code></td>
<td>
<p>The number of CPU cores to use, i.e., the number of
simultaneous calculations at any given time. A value of zero indicates to
use all cores on the system.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The estimated expected FARO loss as a scalar value.
</p>


<h3>References</h3>

<p>D. B. Dahl, D. J. Johnson, R. J. Andros (2023+),
Comparison and Bayesian Estimation of Feature Allocations,
Journal of Computational and Graphical Statistics,
<a href="https://doi.org/10.1080/10618600.2023.2204136">doi:10.1080/10618600.2023.2204136</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(samplesFA)
Z &lt;- matrix(sample(c(0,1), 60, replace=TRUE), byrow=TRUE, nrow=20)
compute_expected_loss(samplesFA, Z)

</code></pre>

<hr>
<h2 id='compute_loss'>Compute the FARO Loss Between Feature Allocations</h2><span id='topic+compute_loss'></span>

<h3>Description</h3>

<p>The FARO loss is computed between two feature allocations, each represented
in binary matrix form.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_loss(Z1, Z2, a = 1, augmented = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compute_loss_+3A_z1">Z1</code></td>
<td>
<p>A feature allocation in binary matrix form, with items in the rows
and features in the columns.</p>
</td></tr>
<tr><td><code id="compute_loss_+3A_z2">Z2</code></td>
<td>
<p>A feature allocation in binary matrix form, with items in the rows
and features in the columns.</p>
</td></tr>
<tr><td><code id="compute_loss_+3A_a">a</code></td>
<td>
<p>A numeric scalar for the cost parameter of generalized Hamming
distance used in FARO loss.  The other cost parameter, <code class="reqn">b</code>, is equal to
<code class="reqn">2 - a</code>.</p>
</td></tr>
<tr><td><code id="compute_loss_+3A_augmented">augmented</code></td>
<td>
<p>If <code>TRUE</code>, the column permutation (used by FARO loss to
compare the feature allocations) is returned for each matrix.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The FARO loss as a scalar value if <code>augmented = FALSE</code>, otherwise, a list
of 3 elements including the loss and the two column permutations.
</p>


<h3>References</h3>

<p>D. B. Dahl, D. J. Johnson, R. J. Andros (2023+),
Comparison and Bayesian Estimation of Feature Allocations,
Journal of Computational and Graphical Statistics,
<a href="https://doi.org/10.1080/10618600.2023.2204136">doi:10.1080/10618600.2023.2204136</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>Z1 &lt;- matrix(c(0,1,1,0,1,1,0,1,1,1,1,1), byrow=TRUE, nrow=6)
Z2 &lt;- matrix(c(0,0,1,0,0,0,0,0,0,0,0,0,1,1,1,0,1,0), byrow=TRUE, nrow=6)
compute_loss(Z1,Z2)
x &lt;- compute_loss(Z1,Z2,a=1,TRUE)
sum(cbind(Z1,0) != Z2)
sum(cbind(Z1,0)[,x$permutation1] != Z2)
sum(cbind(Z1,0) != Z2[,x$permutation2])

</code></pre>

<hr>
<h2 id='fangs'>Feature Allocation Neighborhood Greedy Search</h2><span id='topic+fangs'></span>

<h3>Description</h3>

<p>An implementation of the feature allocation greedy search algorithm is
provided.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fangs(
  samples,
  nInit = 16,
  nSweet = 4,
  nIterations = 0,
  maxSeconds = 60,
  a = 1,
  nCores = 0,
  algorithm = "stochastic",
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fangs_+3A_samples">samples</code></td>
<td>
<p>An object of class &lsquo;list&rsquo; containing posterior samples
from a feature allocation distribution. Each list element encodes one
feature allocation as a binary matrix, with items in the rows and features
in the columns.</p>
</td></tr>
<tr><td><code id="fangs_+3A_ninit">nInit</code></td>
<td>
<p>The number of initial feature allocations to obtain using the
alignment method.  For each initial feature, a baseline feature allocation
is uniformly selected from the list provided in <code>samples</code>. Samples are
aligned to the baseline, proportions are computed for each matrix element,
and the initial feature allocation is obtained by thresholding according to
<code class="reqn">a/2</code>.</p>
</td></tr>
<tr><td><code id="fangs_+3A_nsweet">nSweet</code></td>
<td>
<p>The number of feature allocations among <code>nInit</code> which are
chosen (by lowest expected loss) to be optimized in the sweetening phase.</p>
</td></tr>
<tr><td><code id="fangs_+3A_niterations">nIterations</code></td>
<td>
<p>The number of iterations (i.e., proposed changes) to
consider per initial estimate in the stochastic sweetening phase, although the actual
number may be less due to the <code>maxSeconds</code> argument.  The default
value is <code>0</code>, which sets the number of iterations to the number of
items times the number of columns.</p>
</td></tr>
<tr><td><code id="fangs_+3A_maxseconds">maxSeconds</code></td>
<td>
<p>Stop the search and return the current best estimate once
the elapsed time exceeds this value.</p>
</td></tr>
<tr><td><code id="fangs_+3A_a">a</code></td>
<td>
<p>A numeric scalar for the cost parameter of generalized Hamming
distance used in FARO loss.  The other cost parameter, <code class="reqn">b</code>, is equal to
<code class="reqn">2 - a</code>.</p>
</td></tr>
<tr><td><code id="fangs_+3A_ncores">nCores</code></td>
<td>
<p>The number of CPU cores to use, i.e., the number of
simultaneous calculations at any given time. A value of zero indicates to
use all cores on the system.</p>
</td></tr>
<tr><td><code id="fangs_+3A_algorithm">algorithm</code></td>
<td>
<p>A string indicating the algorithm to use; equal to
&ldquo;stochastic&rdquo;, &ldquo;deterministic&rdquo;, or &ldquo;draws&rdquo;.  The
&ldquo;stochastic&rdquo; algorithm is recommended, although the
&ldquo;deterministic&rdquo; algorithm may provide an improvement at the cost of
time.</p>
</td></tr>
<tr><td><code id="fangs_+3A_quiet">quiet</code></td>
<td>
<p>If <code>TRUE</code>, intermediate status reporting is suppressed.
Otherwise details are provided, especially when
<code>algorithm="stochastic"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the following elements:
</p>

<ul>
<li><p> estimate - The feature allocation point estimate in binary matrix form.
</p>
</li>
<li><p> expectedLoss - The estimated expected FARO loss of the point estimate.
</p>
</li>
<li><p> iteration - The iteration number (out of <code>nIterations</code>) at which the point estimate was found while sweetening.
</p>
</li>
<li><p> nIterations - The number of sweetening iterations performed.
</p>
</li>
<li><p> secondsInitialization - The elapsed time in the initialization phrase.
</p>
</li>
<li><p> secondsSweetening - The elapsed time in the sweetening phrase.
</p>
</li>
<li><p> secondsTotal - The total elapsed time.
</p>
</li>
<li><p> whichSweet - The proposal number (out of <code>nSweet</code>) from which the point estimate was found.
</p>
</li>
<li><p> nInit - The original supplied value of <code>nInit</code>.
</p>
</li>
<li><p> nSweet - The original supplied value of <code>nSweet</code>.
</p>
</li>
<li><p> a - The original supplied value of <code>a</code>.
</p>
</li></ul>



<h3>References</h3>

<p>D. B. Dahl, D. J. Johnson, R. J. Andros (2023+),
Comparison and Bayesian Estimation of Feature Allocations,
Journal of Computational and Graphical Statistics,
<a href="https://doi.org/10.1080/10618600.2023.2204136">doi:10.1080/10618600.2023.2204136</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># To reduce load on CRAN testing servers, limit the number of iterations.
data(samplesFA)
fangs(samplesFA, nIterations=100, nCores=2)

</code></pre>

<hr>
<h2 id='samplesFA'>Samples from the Attraction Indian Buffet Distribution</h2><span id='topic+samplesFA'></span>

<h3>Description</h3>

<p>Samples are provided from a latent feature allocation model using the
Attraction Indian Buffet Distribution (Warr et al., 2022) as a prior
distribution. The purpose of the model was to use pairwise distance
information to identify and predict the presence of Alzheimer's disease in
patients.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(samplesFA)
</code></pre>


<h3>Format</h3>

<p>An object of class &lsquo;list&rsquo; containing 100 posterior samples
from Warr et al. (2022)'s analysis. Each list elements encodes one feature
allocation as a binary matrix, with items in the rows and features
in the columns. These 100 feature allocation samples are a
subset of the original 1000 samples obtained using MCMC in the original
simulation study described by Warr et al. (2022).
</p>


<h3>References</h3>

<p>R. L. Warr, D. B. Dahl, J. M. Meyer, A. Lui (2022),
The Attraction Indian Buffet Distribution, Bayesian Analysis, 17 (3), 931-967,
<a href="https://doi.org/10.1214/21-BA1279">doi:10.1214/21-BA1279</a>.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
