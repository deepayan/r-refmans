<!DOCTYPE html><html lang="en-US"><head><title>Help for package redatamx</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {redatamx}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#redatamx-package'><p>redatamx: R Interface to 'Redatam' Library</p></a></li>
<li><a href='#outputs'><p>Environment for Outputs Tables</p></a></li>
<li><a href='#redatam_close'><p>Close dictionary</p></a></li>
<li><a href='#redatam_create'><p>Create Redatam database</p></a></li>
<li><a href='#redatam_destroy_'><p>Destroy engine</p></a></li>
<li><a href='#redatam_entities'><p>List entities</p></a></li>
<li><a href='#redatam_info'><p>Get extended Redatam API information</p></a></li>
<li><a href='#redatam_init_'><p>Initialize engine</p></a></li>
<li><a href='#redatam_internal_query'><p>Execute a Redatam command from text</p></a></li>
<li><a href='#redatam_internal_run'><p>Execute a Redatam command from file</p></a></li>
<li><a href='#redatam_open'><p>Open dictionary</p></a></li>
<li><a href='#redatam_query'><p>Execute a Redatam command from text</p></a></li>
<li><a href='#redatam_run'><p>Execute a Redatam command from file</p></a></li>
<li><a href='#redatam_save'><p>Save dictionary</p></a></li>
<li><a href='#redatam_variables'><p>List variables for entity</p></a></li>
<li><a href='#redatam_version'><p>Get the Redatam API version</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>R Interface to 'Redatam' Library</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.0</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jaime Salvador &lt;jaime.salvador@ideasybits.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides an API to work with 'Redatam' (see <a href="https://redatam.org">https://redatam.org</a>) 
  databases in both formats: 'RXDB' (new format) and 'DICX' (old format) and running 
  'Redatam' programs written in 'SPC' language. It's a wrapper around 'Redatam' 
  core and provides functions to open/close a database (redatam_open()/redatam_close()), 
  list entities and variables from the database (redatam_entities(), redatam_variables()) 
  and execute a 'SPC' program and gets the results as data frames 
  (redatam_query(), redatam_run()).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>cpp11</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>'Redatam' runtime engine (see https://redatam.org),
The dynamic binary library is downloaded from
&lt;https://redatam-core.s3.us-west-2.amazonaws.com&gt; during the
build step. Currently supported platforms are Windows, Linux
and macOS.</td>
</tr>
<tr>
<td>Copyright:</td>
<td>See COPYRIGHTS for details.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://ideasybits.github.io/redatamx4r/">https://ideasybits.github.io/redatamx4r/</a>,
<a href="https://github.com/ideasybits/redatamx4r/">https://github.com/ideasybits/redatamx4r/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ideasybits/redatamx4r/issues">https://github.com/ideasybits/redatamx4r/issues</a></td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>rmarkdown</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-12-23 02:57:48 UTC; jsalvador2024</td>
</tr>
<tr>
<td>Author:</td>
<td>Jaime Salvador <a href="https://orcid.org/0000-0002-3564-8929"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  CELADE [cph]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-12-23 03:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='redatamx-package'>redatamx: R Interface to 'Redatam' Library</h2><span id='topic+redatamx'></span><span id='topic+redatamx-package'></span>

<h3>Description</h3>

<p>Provides an API to work with 'Redatam' (see <a href="https://redatam.org">https://redatam.org</a>) databases in both formats: 'RXDB' (new format) and 'DICX' (old format) and running 'Redatam' programs written in 'SPC' language. It's a wrapper around 'Redatam' core and provides functions to open/close a database (redatam_open()/redatam_close()), list entities and variables from the database (redatam_entities(), redatam_variables()) and execute a 'SPC' program and gets the results as data frames (redatam_query(), redatam_run()).
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Jaime Salvador <a href="mailto:jaime.salvador@ideasybits.com">jaime.salvador@ideasybits.com</a> (<a href="https://orcid.org/0000-0002-3564-8929">ORCID</a>)
</p>
<p>Other contributors:
</p>

<ul>
<li><p> CELADE [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://ideasybits.github.io/redatamx4r/">https://ideasybits.github.io/redatamx4r/</a>
</p>
</li>
<li> <p><a href="https://github.com/ideasybits/redatamx4r/">https://github.com/ideasybits/redatamx4r/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ideasybits/redatamx4r/issues">https://github.com/ideasybits/redatamx4r/issues</a>
</p>
</li></ul>


<hr>
<h2 id='outputs'>Environment for Outputs Tables</h2><span id='topic+outputs'></span>

<h3>Description</h3>

<p>This environment is created to store the outputs generated by a Redatam program
execution.
The environment contains TABLES (Redatam outputs) generated from FREQ, AREALIST,
MATOP, TABLIST commands.
You can't modify objects contained in this environment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>outputs
</code></pre>


<h3>Format</h3>

<p>An object of class <code>environment</code> of length 0.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dic&lt;-redatam_open("path/to/rxdb")
df&lt;-redatam_query(dic,"tbl1&lt;-freq person.sexo")
# Accessing the tbl1 object from environment
redatamx::outputs$tbl1
# Accessing the output from Global Environment
print(df)

## End(Not run)

</code></pre>

<hr>
<h2 id='redatam_close'>Close dictionary</h2><span id='topic+redatam_close'></span>

<h3>Description</h3>

<p>Close a REDATAM database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redatam_close(dic)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="redatam_close_+3A_dic">dic</code></td>
<td>
<p>Dictionary identifier (returned by redatam_open())</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value.
</p>


<h3>Author(s)</h3>

<p>Jaime Salvador
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dic&lt;-redatam_open("path/to/rxdb")
# run some queries using 'redatam_query' or 'redatam_run'
# close de dictionary
redatam_close(dic);

## End(Not run)
</code></pre>

<hr>
<h2 id='redatam_create'>Create Redatam database</h2><span id='topic+redatam_create'></span>

<h3>Description</h3>

<p>Create a new Redatam database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redatam_create(schema_name, config_name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="redatam_create_+3A_schema_name">schema_name</code></td>
<td>
<p>Dictionary schema in json format</p>
</td></tr>
<tr><td><code id="redatam_create_+3A_config_name">config_name</code></td>
<td>
<p>Configuration in json format</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value.
</p>


<h3>Author(s)</h3>

<p>Jaime Salvador
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
redatam_create("path/to/schema.json","path/to/config.json")

## End(Not run)
</code></pre>

<hr>
<h2 id='redatam_destroy_'>Destroy engine</h2><span id='topic+redatam_destroy_'></span>

<h3>Description</h3>

<p>Destroy the Redatam engine.
This function is automatically called when the package is unloaded.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redatam_destroy_()
</code></pre>


<h3>Value</h3>

<p>No return value.
</p>


<h3>Author(s)</h3>

<p>Jaime Salvador
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
redatam_destroy_();

## End(Not run)
</code></pre>

<hr>
<h2 id='redatam_entities'>List entities</h2><span id='topic+redatam_entities'></span>

<h3>Description</h3>

<p>List the entities in a databse.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redatam_entities(dic)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="redatam_entities_+3A_dic">dic</code></td>
<td>
<p>Dictionary identifier (returned by redatam_open())</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame that contains all the entities in the database.
</p>


<h3>Author(s)</h3>

<p>Jaime Salvador
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dic&lt;-redatam_open("path/to/rxdb")
redatam_entities(dic);

## End(Not run)
</code></pre>

<hr>
<h2 id='redatam_info'>Get extended Redatam API information</h2><span id='topic+redatam_info'></span>

<h3>Description</h3>

<p>Returns extended information about datasources and datasets available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redatam_info()
</code></pre>


<h3>Value</h3>

<p>String with the Redatam extended information.
</p>


<h3>Author(s)</h3>

<p>Jaime Salvador
</p>


<h3>Examples</h3>

<pre><code class='language-R'>redatam_info()
</code></pre>

<hr>
<h2 id='redatam_init_'>Initialize engine</h2><span id='topic+redatam_init_'></span>

<h3>Description</h3>

<p>Initialize the Redatam engine.
This function is automatically called when the package is loaded.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redatam_init_(pachageDir)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="redatam_init__+3A_pachagedir">pachageDir</code></td>
<td>
<p>Relative path to Redatam runtime (dll, so or dynlib)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value.
</p>


<h3>Author(s)</h3>

<p>Jaime Salvador
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
redatam_init_("/engine");

## End(Not run)
</code></pre>

<hr>
<h2 id='redatam_internal_query'>Execute a Redatam command from text</h2><span id='topic+redatam_internal_query'></span>

<h3>Description</h3>

<p>Execute a Redatam command: TABLE or AREALIST.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redatam_internal_query(dic, spc)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="redatam_internal_query_+3A_dic">dic</code></td>
<td>
<p>Dictionary identifier (returned by redatam_open())</p>
</td></tr>
<tr><td><code id="redatam_internal_query_+3A_spc">spc</code></td>
<td>
<p>Program text in SPC format</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Raw dataset with al values: tot, na, mv, values.
</p>


<h3>Author(s)</h3>

<p>Jaime Salvador
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dic&lt;-redatam_open("path/to/rxdb")
df&lt;-redatam_internal_query(dic,"freq person.sexo")

## End(Not run)
</code></pre>

<hr>
<h2 id='redatam_internal_run'>Execute a Redatam command from file</h2><span id='topic+redatam_internal_run'></span>

<h3>Description</h3>

<p>Execute a Redatam command: TABLE or AREALIST.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redatam_internal_run(dic, file_name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="redatam_internal_run_+3A_dic">dic</code></td>
<td>
<p>Dictionary identifier (returned by redatam_open())</p>
</td></tr>
<tr><td><code id="redatam_internal_run_+3A_file_name">file_name</code></td>
<td>
<p>Program file name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Raw dataset with all values: tot, na, mv, values.
</p>


<h3>Author(s)</h3>

<p>Jaime Salvador
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dic&lt;-redatam.open("path/to/rxdb")
df&lt;-redatam.internal_run(dic,"/path/to/program.spc")

## End(Not run)
</code></pre>

<hr>
<h2 id='redatam_open'>Open dictionary</h2><span id='topic+redatam_open'></span>

<h3>Description</h3>

<p>Open a REDATAM database.
This function returns an ID than can be used in functions to query data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redatam_open(dictionary_name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="redatam_open_+3A_dictionary_name">dictionary_name</code></td>
<td>
<p>Dictionary file name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ID than can be used in functions to query data.
</p>


<h3>Author(s)</h3>

<p>Jaime Salvador
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dic&lt;-redatam_open("path/to/rxdb")

## End(Not run)
</code></pre>

<hr>
<h2 id='redatam_query'>Execute a Redatam command from text</h2><span id='topic+redatam_query'></span>

<h3>Description</h3>

<p>Execute a Redatam command: TABLE or AREALIST.
This function removes all the rows that contain total, na or mv values. Additionally, this function removes the &quot;mask&quot; columns.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redatam_query(dic, spc, tot.omit = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="redatam_query_+3A_dic">dic</code></td>
<td>
<p>Dictionary identifier</p>
</td></tr>
<tr><td><code id="redatam_query_+3A_spc">spc</code></td>
<td>
<p>Program text in SPC format</p>
</td></tr>
<tr><td><code id="redatam_query_+3A_tot.omit">tot.omit</code></td>
<td>
<p>Omit rows containing total, na y mv values</p>
</td></tr>
</table>


<h3>Value</h3>


<p>If the program contains more than one table, the method returns the last table (in the SPC program) as a data frame.
All the tables are registered (as data frames) in a custom environment called &lsquo;redatam::outputs&rsquo;.

</p>


<h3>Author(s)</h3>

<p>Jaime Salvador
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dic&lt;-redatam_open("path/to/rxdb")
df&lt;-redatam_query(dic,"freq person.sexo")
print(df)

## End(Not run)
</code></pre>

<hr>
<h2 id='redatam_run'>Execute a Redatam command from file</h2><span id='topic+redatam_run'></span>

<h3>Description</h3>

<p>Execute a Redatam command: TABLE or AREALIST.
This function removes all the rows that contain total, na or mv values. Additionally, this function removes the &quot;mask&quot; columns.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redatam_run(dic, file_name, tot.omit = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="redatam_run_+3A_dic">dic</code></td>
<td>
<p>Dictionary identifier</p>
</td></tr>
<tr><td><code id="redatam_run_+3A_file_name">file_name</code></td>
<td>
<p>Program file name</p>
</td></tr>
<tr><td><code id="redatam_run_+3A_tot.omit">tot.omit</code></td>
<td>
<p>Omit rows containing total, na y mv values</p>
</td></tr>
</table>


<h3>Value</h3>


<p>If the program contains more than one table, the method returns the last table (in the SPC program) as a data frame.
All the tables are registered (as data frames) in a custom environment called &lsquo;redatam::outputs&rsquo;.

</p>


<h3>Author(s)</h3>

<p>Jaime Salvador
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dic&lt;-redatam_open("path/to/rxdb")
df&lt;-redatam_run(dic,"/path/to/nmir_test.spc")
print(df)

## End(Not run)
</code></pre>

<hr>
<h2 id='redatam_save'>Save dictionary</h2><span id='topic+redatam_save'></span>

<h3>Description</h3>

<p>Save a REDATAM database.
This function  can be used to save a dictionary.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redatam_save(dic, name = "")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="redatam_save_+3A_dic">dic</code></td>
<td>
<p>Dictionary identifier (returned by redatam_open())</p>
</td></tr>
<tr><td><code id="redatam_save_+3A_name">name</code></td>
<td>
<p>Dictionary file name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value.
</p>


<h3>Author(s)</h3>

<p>Jaime Salvador
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dic&lt;-redatam_open("path/to/rxdb")
...
redatam_save(dic,"path/to/new/dictionary.rxdb")

## End(Not run)
</code></pre>

<hr>
<h2 id='redatam_variables'>List variables for entity</h2><span id='topic+redatam_variables'></span>

<h3>Description</h3>

<p>List the variables in an entity.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redatam_variables(dic, entity_name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="redatam_variables_+3A_dic">dic</code></td>
<td>
<p>Dictionary identifier (returned by redatam_open())</p>
</td></tr>
<tr><td><code id="redatam_variables_+3A_entity_name">entity_name</code></td>
<td>
<p>Entity's name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame that contains all the variables from the &lsquo;entity_name&rsquo;.
</p>


<h3>Author(s)</h3>

<p>Jaime Salvador
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dic&lt;-redatam_open("path/to/rxdb")
redatam_variables(dic, "person")

## End(Not run)
</code></pre>

<hr>
<h2 id='redatam_version'>Get the Redatam API version</h2><span id='topic+redatam_version'></span>

<h3>Description</h3>

<p>Returns the current version of the native Redatam API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redatam_version()
</code></pre>


<h3>Value</h3>

<p>String with the Redatam Engine version.
</p>


<h3>Author(s)</h3>

<p>Jaime Salvador
</p>


<h3>Examples</h3>

<pre><code class='language-R'>redatam_version()
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
