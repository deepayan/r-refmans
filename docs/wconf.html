<!DOCTYPE html><html><head><title>Help for package wconf</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {wconf}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#wconf-package'><p>wconf: Weighted Confusion Matrix</p></a></li>
<li><a href='#wconfusionmatrix'><p>Weighted confusion matrix</p></a></li>
<li><a href='#weightmatrix'><p>Weight matrix</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Weighted Confusion Matrix</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://www.alexandrumonahov.eu.org/projects">https://www.alexandrumonahov.eu.org/projects</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Allows users to create weighted confusion matrices and accuracy
    metrics that help with the model selection process for classification
    problems, where distance from the correct category is important. The
    package includes several weighting schemes which can be parameterized, as
    well as custom configuration options. Furthermore, users can decide
    whether they wish to positively or negatively affect the accuracy score
    as a result of applying weights to the confusion matrix. 'wconf' integrates
    well with the 'caret' package, but it can also work standalone when
    provided data in matrix form.
    References:
    Kuhn, M. (2008) "Building Perspective Models in R Using the caret Package"
    &lt;<a href="https://doi.org/10.18637%2Fjss.v028.i05">doi:10.18637/jss.v028.i05</a>&gt;
    Monahov, A. (2021) "Model Evaluation with Weighted Threshold Optimization
    (and the mewto R package)" &lt;<a href="https://doi.org/10.2139%2Fssrn.3805911">doi:10.2139/ssrn.3805911</a>&gt;
    Van de Velden, M., Iodice D'Enza, A., Markos, A., Cavicchia, C. (2023)
    "A general framework for implementing distances for categorical variables"
    &lt;<a href="https://doi.org/10.48550/arXiv.2301.02190">doi:10.48550/arXiv.2301.02190</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://creativecommons.org/licenses/by-sa/4.0">CC BY-SA 4.0</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, caret</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-12-11 21:40:25 UTC; Admin</td>
</tr>
<tr>
<td>Author:</td>
<td>Alexandru Monahov <a href="https://orcid.org/0000-0001-6204-9131"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Alexandru Monahov &lt;alexandru.monahov@proton.me&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-12-12 20:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='wconf-package'>wconf: Weighted Confusion Matrix</h2><span id='topic+wconf'></span><span id='topic+wconf-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Allows users to create weighted confusion matrices and accuracy metrics that help with the model selection process for classification problems, where distance from the correct category is important. The package includes several weighting schemes which can be parameterized, as well as custom configuration options. Furthermore, users can decide whether they wish to positively or negatively affect the accuracy score as a result of applying weights to the confusion matrix. 'wconf' integrates well with the 'caret' package, but it can also work standalone when provided data in matrix form. References: Kuhn, M. (2008) &quot;Building Perspective Models in R Using the caret Package&quot; <a href="https://doi.org/10.18637/jss.v028.i05">doi:10.18637/jss.v028.i05</a> Monahov, A. (2021) &quot;Model Evaluation with Weighted Threshold Optimization (and the mewto R package)&quot; <a href="https://doi.org/10.2139/ssrn.3805911">doi:10.2139/ssrn.3805911</a> Van de Velden, M., Iodice D'Enza, A., Markos, A., Cavicchia, C. (2023) &quot;A general framework for implementing distances for categorical variables&quot; <a href="https://arxiv.org/abs/2301.02190v1">arXiv:2301.02190v1</a>.
</p>


<h3>Details</h3>

<p>weightmatrix - configures and visualizes a weight matrix
</p>
<p>wconfusionmatrix - calculates the weighted confusion matrix from a caret
ConfusionMatrix object or a simple matrix, according to one of several
weighting schemas and optionally prints the weighted accuracy score.
</p>


<h3>Author(s)</h3>

<p>Alexandru Monahov
</p>


<h3>Source</h3>

<p>Copyright Alexandru Monahov, 2023. You may use, modify and redistribute
this code, provided that you give credit to the author and make any derivative
work available to the public for free.
</p>


<h3>References</h3>

<p>Kuhn, M. (2008). Building Perspective Models in R Using the caret
Package. Journal of Statistical Software, 28(5), 1-26.
</p>
<p>Monahov, A. (2021). Model Evaluation with Weighted Threshold Optimization
(and the &quot;mewto&quot; R package), Machine Learning eJournal, SSRN.
</p>
<p>Van de Velden, M. et al. (2023). A general framework for implementing
distances for categorical variables. arXiv.
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://www.alexandrumonahov.eu.org/projects">https://www.alexandrumonahov.eu.org/projects</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># Generate sample data
m = matrix(c(70,0,0,10,10,0,5,3,2), ncol = 3, nrow=3)
# Experiment with several weighting schemes to find optimal solution
weightmatrix(n=4, weight.type="arithmetic", plot.weights = TRUE)
weightmatrix(n=4, weight.type="geometric", geometric.multiplier = 0.6)
weightmatrix(n=4, weight.type="geometric", geometric.multiplier = 2)
# Compute the weighted confusion matrix
wconfusionmatrix(m, weight.type = "arithmetic", print.weighted.accuracy = TRUE)

</code></pre>

<hr>
<h2 id='wconfusionmatrix'>Weighted confusion matrix</h2><span id='topic+wconfusionmatrix'></span>

<h3>Description</h3>

<p>This function calculates the weighted confusion matrix from a caret
ConfusionMatrix object or a simple matrix, according to one of several
weighting schemas and optionally prints the weighted accuracy score.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wconfusionmatrix(m, weight.type = "arithmetic",
                        weight.penalty = FALSE,
                        standard.deviation = 2,
                        geometric.multiplier = 2,
                        interval.high=1, interval.low = -1,
                        custom.weights = NA,
                        print.weighted.accuracy = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wconfusionmatrix_+3A_m">m</code></td>
<td>
<p>the caret confusion matrix object or simple matrix.</p>
</td></tr>
<tr><td><code id="wconfusionmatrix_+3A_weight.type">weight.type</code></td>
<td>
<p>the weighting schema to be used. Can be one of:
&quot;arithmetic&quot; - a decreasing arithmetic progression weighting scheme,
&quot;geometric&quot; - a decreasing geometric progression weighting scheme,
&quot;normal&quot; - weights drawn from the right tail of a normal distribution,
&quot;interval&quot; - weights contained on a user-defined interval,
&quot;custom&quot; - custom weight vector defined by the user.</p>
</td></tr>
<tr><td><code id="wconfusionmatrix_+3A_weight.penalty">weight.penalty</code></td>
<td>
<p>determines whether the weights associated with
non-diagonal elements generated by the &quot;normal&quot;, &quot;arithmetic&quot; and &quot;geometric&quot;
weight types are positive or negative values. By default, the value is set to
FALSE, which means that generated weights will be positive values.</p>
</td></tr>
<tr><td><code id="wconfusionmatrix_+3A_standard.deviation">standard.deviation</code></td>
<td>
<p>standard deviation of the normal distribution, if
the normal distribution weighting schema is used.</p>
</td></tr>
<tr><td><code id="wconfusionmatrix_+3A_geometric.multiplier">geometric.multiplier</code></td>
<td>
<p>the multiplier used to construct the geometric
progression series, if the geometric progression weighting scheme is used.</p>
</td></tr>
<tr><td><code id="wconfusionmatrix_+3A_interval.high">interval.high</code></td>
<td>
<p>the upper bound of the weight interval, if the interval
weighting scheme is used.</p>
</td></tr>
<tr><td><code id="wconfusionmatrix_+3A_interval.low">interval.low</code></td>
<td>
<p>the lower bound of the weight interval, if the interval
weighting scheme is used.</p>
</td></tr>
<tr><td><code id="wconfusionmatrix_+3A_custom.weights">custom.weights</code></td>
<td>
<p>the vector of custom weight sto be applied, is the
custom weighting scheme wasd selected. The vector should be equal to &quot;n&quot;, but
can be larger, with excess values being ignored.</p>
</td></tr>
<tr><td><code id="wconfusionmatrix_+3A_print.weighted.accuracy">print.weighted.accuracy</code></td>
<td>
<p>print the weighted accuracy metric, which
represents the sum of all weighted confusion matrix cells divided by the
total number of observations.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The number of categories &quot;n&quot; should be greater or equal to 2.
</p>


<h3>Value</h3>

<p>an nxn weighted confusion matrix
</p>


<h3>Author(s)</h3>

<p>Alexandru Monahov, &lt;https://www.alexandrumonahov.eu.org/&gt;
</p>


<h3>See Also</h3>

<p>[weightmatrix()]
</p>


<h3>Examples</h3>

<pre><code class='language-R'>m = matrix(c(70,0,0,10,10,0,5,3,2), ncol = 3, nrow=3)
wconfusionmatrix(m, weight.type="arithmetic", print.weighted.accuracy = TRUE)
wconfusionmatrix(m, weight.type="geometric", print.weighted.accuracy = TRUE)
wconfusionmatrix(m, weight.type="interval", print.weighted.accuracy = TRUE)
wconfusionmatrix(m, weight.type="normal", print.weighted.accuracy = TRUE)
wconfusionmatrix(m, weight.type= "custom", custom.weights = c(1,0.1,0),
                 print.weighted.accuracy = TRUE)

</code></pre>

<hr>
<h2 id='weightmatrix'>Weight matrix</h2><span id='topic+weightmatrix'></span>

<h3>Description</h3>

<p>This function compiles a weight matrix according to one of several weighting
schemas and allows users to visualize the impact of the weight matrix on each
element of the confusion matrix.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weightmatrix(n, weight.type = "arithmetic", weight.penalty = FALSE,
                    standard.deviation = 2,
                    geometric.multiplier = 2,
                    interval.high=1, interval.low = -1,
                    custom.weights = NA,
                    plot.weights = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="weightmatrix_+3A_n">n</code></td>
<td>
<p>the number of classes contained in the confusion matrix.</p>
</td></tr>
<tr><td><code id="weightmatrix_+3A_weight.type">weight.type</code></td>
<td>
<p>the weighting schema to be used. Can be one of:
&quot;arithmetic&quot; - a decreasing arithmetic progression weighting scheme,
&quot;geometric&quot; - a decreasing geometric progression weighting scheme,
&quot;normal&quot; - weights drawn from the right tail of a normal distribution,
&quot;interval&quot; - weights contained on a user-defined interval,
&quot;custom&quot; - custom weight vector defined by the user.</p>
</td></tr>
<tr><td><code id="weightmatrix_+3A_weight.penalty">weight.penalty</code></td>
<td>
<p>determines whether the weights associated with
non-diagonal elements generated by the &quot;normal&quot;, &quot;arithmetic&quot; and &quot;geometric&quot;
weight types are positive or negative values. By default, the value is set to
FALSE, which means that generated weights will be positive values.</p>
</td></tr>
<tr><td><code id="weightmatrix_+3A_standard.deviation">standard.deviation</code></td>
<td>
<p>standard deviation of the normal distribution, if
the normal distribution weighting schema is used.</p>
</td></tr>
<tr><td><code id="weightmatrix_+3A_geometric.multiplier">geometric.multiplier</code></td>
<td>
<p>the multiplier used to construct the geometric
progression series, if the geometric progression weighting scheme is used.</p>
</td></tr>
<tr><td><code id="weightmatrix_+3A_interval.high">interval.high</code></td>
<td>
<p>the upper bound of the weight interval, if the interval
weighting scheme is used.</p>
</td></tr>
<tr><td><code id="weightmatrix_+3A_interval.low">interval.low</code></td>
<td>
<p>the lower bound of the weight interval, if the interval
weighting scheme is used.</p>
</td></tr>
<tr><td><code id="weightmatrix_+3A_custom.weights">custom.weights</code></td>
<td>
<p>the vector of custom weights to be applied, is the
custom weighting scheme was selected. The vector should be equal to &quot;n&quot;, but
can be larger, with excess values being ignored.</p>
</td></tr>
<tr><td><code id="weightmatrix_+3A_plot.weights">plot.weights</code></td>
<td>
<p>optional setting to enable plotting of weight vector,
corresponding to the first column of the weight matrix</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The number of categories &quot;n&quot; should be greater or equal to 2.
</p>


<h3>Value</h3>

<p>an nxn matrix, containing the weights to be multiplied with the
confusion matrix.
</p>


<h3>Author(s)</h3>

<p>Alexandru Monahov, &lt;https://www.alexandrumonahov.eu.org/&gt;
</p>


<h3>See Also</h3>

<p>[wconfusionmatrix()]
</p>


<h3>Examples</h3>

<pre><code class='language-R'>weightmatrix(n=4, weight.type="arithmetic", plot.weights = TRUE)
weightmatrix(n=4, weight.type="normal", standard.deviation = 1,
                  plot.weights = TRUE)
weightmatrix(n=4, weight.type="interval", interval.high = 1,
                  interval.low = -0.5, plot.weights = TRUE)
weightmatrix(n=4, weight.type="geometric", geometric.multiplier = 0.6)
weightmatrix(n=4, weight.type="custom", custom.weights = c(1,0.2,0.1,0),
                  plot.weights = TRUE)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
