<!DOCTYPE html><html><head><title>Help for package callr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {callr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_hook'><p>Add a user hook to be executed before launching an R subprocess</p></a></li>
<li><a href='#callr-package'><p>Call R from R</p></a></li>
<li><a href='#convert_and_check_my_args'><p>Convert and check function arguments</p></a></li>
<li><a href='#default_repos'><p>Default value for the <code>repos</code> option in callr subprocesses</p></a></li>
<li><a href='#get_result'><p>Read the result object from the output file, or the error</p></a></li>
<li><a href='#new_callr_crash_error'><p>Create an error object</p></a></li>
<li><a href='#r'><p>Evaluate an expression in another R session</p></a></li>
<li><a href='#r_bg'><p>Evaluate an expression in another R session, in the background</p></a></li>
<li><a href='#r_copycat'><p>Run an R process that mimics the current R process</p></a></li>
<li><a href='#r_process'><p>External R Process</p></a></li>
<li><a href='#r_process_options'><p>Create options for an r_process object</p></a></li>
<li><a href='#r_session'><p>External R Session</p></a></li>
<li><a href='#r_session_debug'><p>Interactive debugging of persistent R sessions</p></a></li>
<li><a href='#r_session_options'><p>Create options for an r_session object</p></a></li>
<li><a href='#r_vanilla'><p>Run an R child process, with no configuration</p></a></li>
<li><a href='#rcmd'><p>Run an <code style="white-space: pre;">&#8288;R CMD&#8288;</code> command</p></a></li>
<li><a href='#rcmd_bg'><p>Run an <code style="white-space: pre;">&#8288;R CMD&#8288;</code> command in the background</p></a></li>
<li><a href='#rcmd_copycat'><p>Call and <code style="white-space: pre;">&#8288;R CMD&#8288;</code> command, while mimicking the current R session</p></a></li>
<li><a href='#rcmd_process'><p>External <code style="white-space: pre;">&#8288;R CMD&#8288;</code> Process</p></a></li>
<li><a href='#rcmd_process_options'><p>Create options for an rcmd_process object</p></a></li>
<li><a href='#rcmd_safe_env'><p><code>rcmd_safe_env</code> returns a set of environment variables that are</p>
more appropriate for <code>rcmd_safe()</code>. It is exported to allow manipulating
these variables (e.g. add an extra one), before passing them to the
<code>rcmd()</code> functions.</a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#rscript'><p>Run an R script</p></a></li>
<li><a href='#rscript_process'><p>External <code>Rscript</code> process</p></a></li>
<li><a href='#rscript_process_options'><p>Create options for an rscript_process object</p></a></li>
<li><a href='#supported_archs'><p>Find supported sub-architectures for the current R installation</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Call R from R</td>
</tr>
<tr>
<td>Version:</td>
<td>3.7.6</td>
</tr>
<tr>
<td>Description:</td>
<td>It is sometimes useful to perform a computation in a separate
    R process, without affecting the current R process at all.  This
    packages does exactly that.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://callr.r-lib.org">https://callr.r-lib.org</a>, <a href="https://github.com/r-lib/callr">https://github.com/r-lib/callr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/r-lib/callr/issues">https://github.com/r-lib/callr/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4)</td>
</tr>
<tr>
<td>Imports:</td>
<td>processx (&ge; 3.6.1), R6, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>asciicast (&ge; 2.3.1), cli (&ge; 1.1.0), mockery, ps, rprojroot,
spelling, testthat (&ge; 3.2.0), withr (&ge; 2.3.0)</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>r-lib/asciicast, glue, htmlwidgets, igraph,
tibble, tidyverse/tidytemplate</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1.9000</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-25 12:10:25 UTC; gaborcsardi</td>
</tr>
<tr>
<td>Author:</td>
<td>Gábor Csárdi <a href="https://orcid.org/0000-0001-7098-9676"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph],
  Winston Chang [aut],
  Posit Software, PBC [cph, fnd],
  Ascent Digital Services [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Gábor Csárdi &lt;csardi.gabor@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-25 13:30:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_hook'>Add a user hook to be executed before launching an R subprocess</h2><span id='topic+add_hook'></span>

<h3>Description</h3>

<p>This function allows users of <code>callr</code> to specify functions that get invoked
whenever an R session is launched. The function can modify the environment
variables and command line arguments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_hook(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_hook_+3A_...">...</code></td>
<td>
<p>Named argument specifying a hook function to add, or <code>NULL</code> to
delete the named hook.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The prototype of the hook function is <code style="white-space: pre;">&#8288;function (options)&#8288;</code>, and it is
expected to return the modified <code>options</code>.
</p>


<h3>Value</h3>

<p><code>add_hook</code> is called for its side-effects.
</p>

<hr>
<h2 id='callr-package'>Call R from R</h2><span id='topic+callr'></span><span id='topic+callr-package'></span>

<h3>Description</h3>

<p>It is sometimes useful to perform a computation in a separate
R process, without affecting the current R process at all.  This
packages does exactly that.
</p>


<h3>callr</h3>



<h4>Features</h4>


<ul>
<li><p> Calls an R function, with arguments, in a subprocess.
</p>
</li>
<li><p> Copies function arguments to the subprocess and copies the return value of the function back, seamlessly.
</p>
</li>
<li><p> Copies error objects back from the subprocess, including a stack trace.
</p>
</li>
<li><p> Shows and/or collects the standard output and standard error of the subprocess.
</p>
</li>
<li><p> Supports both one-off and persistent R subprocesses.
</p>
</li>
<li><p> Calls the function synchronously or asynchronously (in the background).
</p>
</li>
<li><p> Can call <code style="white-space: pre;">&#8288;R CMD&#8288;</code> commands, synchronously or asynchronously.
</p>
</li>
<li><p> Can call R scripts, synchronously or asynchronously.
</p>
</li>
<li><p> Provides extensible <code>r_process</code>, <code>rcmd_process</code> and <code>rscript_process</code> R6 classes, based on <code>processx::process</code>.
</p>
</li></ul>




<h4>Installation</h4>

<p>Install the stable version from CRAN:
</p>
<div class="sourceCode r"><pre>install.packages("callr")
</pre></div>
<p>Install the development version from GitHub:
</p>
<div class="sourceCode r"><pre>pak::pak("r-lib/callr")
</pre></div>



<h4>Synchronous, one-off R processes</h4>

<p>Use <code>r()</code> to run an R function in a new R process.
The results are passed back seamlessly:
</p>
<div class="sourceCode r"><pre>callr::r(function() var(iris[, 1:4]))
</pre></div>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000"><pre>
#>              Sepal.Length Sepal.Width Petal.Length Petal.Width                  
#> Sepal.Length    0.6856935  -0.0424340    1.2743154   0.5162707                  
#> Sepal.Width    -0.0424340   0.1899794   -0.3296564  -0.1216394                  
#> Petal.Length    1.2743154  -0.3296564    3.1162779   1.2956094                  
#> Petal.Width     0.5162707  -0.1216394    1.2956094   0.5810063                  
</pre></div>



<h5>Passing arguments</h5>

<p>You can pass arguments to the function by setting <code>args</code> to the list of arguments.
This is often necessary as these arguments are explicitly copied to the child process, whereas the evaluated function cannot refer to variables in the parent.
For example, the following does not work:
</p>
<div class="sourceCode r"><pre>mycars &lt;- cars
callr::r(function() summary(mycars))
</pre></div>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000"><pre>
#> <span style="font-weight: bold;color: #B58900;">Error</span>:                                                                          
#> <span style="color: #B58900;">!</span> in callr subprocess.                                                          
#> <span style="font-weight: bold;">Caused by error</span> in `summary(mycars)`:                                           
#> <span style="color: #B58900;">!</span> object 'mycars' not found                                                     
#> <span style="color: #525252;">Type .Last.error to see the more details.</span>                                       
</pre></div>

<p>But this does:
</p>
<div class="sourceCode r"><pre>mycars &lt;- cars
callr::r(function(x) summary(x), args = list(mycars))
</pre></div>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000"><pre>
#>      speed           dist                                                       
#>  Min.   : 4.0   Min.   :  2.00                                                  
#>  1st Qu.:12.0   1st Qu.: 26.00                                                  
#>  Median :15.0   Median : 36.00                                                  
#>  Mean   :15.4   Mean   : 42.98                                                  
#>  3rd Qu.:19.0   3rd Qu.: 56.00                                                  
#>  Max.   :25.0   Max.   :120.00                                                  
</pre></div>

<p>Note that the arguments will be serialized and saved to a file, so if they are large R objects, it might take a long time for the child process to start up.
</p>



<h5>Using packages</h5>

<p>You can use any R package in the child process, just make sure to refer to it explicitly with the <code>::</code> operator.
For example, the following code creates an <a href="https://github.com/igraph/rigraph">igraph</a> graph in the child, and calculates some metrics of it.
</p>
<div class="sourceCode r"><pre>callr::r(function() { g &lt;- igraph::sample_gnp(1000, 4/1000); igraph::diameter(g) })
</pre></div>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000"><pre>
#> [1] 11                                                                          
</pre></div>




<h5>Error handling</h5>

<p>callr copies errors from the child process back to the main R session:
</p>
<div class="sourceCode r"><pre>callr::r(function() 1 + "A")
</pre></div>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000"><pre>
#> <span style="font-weight: bold;color: #B58900;">Error</span>:                                                                          
#> <span style="color: #B58900;">!</span> in callr subprocess.                                                          
#> <span style="font-weight: bold;">Caused by error</span> in `1 + "A"`:                                                   
#> <span style="color: #B58900;">!</span> non-numeric argument to binary operator                                       
#> <span style="color: #525252;">Type .Last.error to see the more details.</span>                                       
</pre></div>
callr sets the `.Last.error` variable, and after an error you can inspect this for more details about the error, including stack traces both from the main R process and the subprocess.

<div class="sourceCode r"><pre>.Last.error
</pre></div>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000"><pre>
#> <span style="font-weight: bold;color: #B58900;">Error</span>:                                                                          
#> <span style="color: #B58900;">!</span> in callr subprocess.                                                          
#> <span style="font-weight: bold;">Caused by error</span> in `1 + "A"`:                                                   
#> <span style="color: #B58900;">!</span> non-numeric argument to binary operator                                       
#> ---                                                                             
#> Backtrace:                                                                      
#> <span style="color: #525252;">1. </span>callr::<span style="color: #2AA198;">r</span><span style="color: #B58900;">(</span><span style="color: #DC322F;">function</span><span style="color: #268BD2;">()</span> <span style="color: #268BD2;">1</span> <span style="color: #859900;">+</span> <span style="color: #B58900;">"A")</span>                                                 
#> <span style="color: #525252;">2. </span>callr:::<span style="color: #2AA198;">get_result</span><span style="color: #B58900;">(</span>output = out, options<span style="color: #B58900;">)</span>                                    
#> <span style="color: #525252;">3. </span>callr:::<span style="color: #2AA198;">throw</span><span style="color: #B58900;">(</span><span style="color: #2AA198;">callr_remote_error</span><span style="color: #268BD2;">(</span>remerr, output<span style="color: #268BD2;">)</span>, parent = <span style="color: #2AA198;">fix_msg</span><span style="color: #268BD2;">(</span>remerr<span style="color: #2AA198;">[[</span><span style="color: #268BD2;">3</span><span style="color: #2AA198;">]</span>
#> <span style="color: #2AA198;">]</span><span style="color: #268BD2;">)</span><span style="color: #B58900;">)</span>                                                                             
#> ---                                                                             
#> Subprocess backtrace:                                                           
#> <span style="color: #525252;">1. </span>base::.handleSimpleError(function (e) …                                      
#> <span style="color: #525252;">2. </span>global <span style="color: #2AA198;">h</span><span style="color: #B58900;">(</span><span style="color: #2AA198;">simpleError</span><span style="color: #268BD2;">(</span>msg, call<span style="color: #268BD2;">)</span><span style="color: #B58900;">)</span>                                             
</pre></div>

<p>The error objects has two parts.
The first belongs to the main process, and the second belongs to the subprocess.
</p>
<p><code>.Last.error</code> also includes a stack trace, that includes both the main R process and the subprocess:
</p>
<p>The top part of the trace contains the frames in the main process, and the bottom part contains the frames in the subprocess, starting with the anonymous function.
</p>



<h5>Standard output and error</h5>

<p>By default, the standard output and error of the child is lost, but you can request callr to redirect them to files, and then inspect the files in the parent:
</p>
<div class="sourceCode r"><pre>x &lt;- callr::r(function() { print("hello world!"); message("hello again!") },
  stdout = "/tmp/out", stderr = "/tmp/err"
)
readLines("/tmp/out")
</pre></div>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000"><pre>
#> [1] "[1] \"hello world!\""                                                      
</pre></div>

<div class="sourceCode r"><pre>readLines("/tmp/err")
</pre></div>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000"><pre>
#> [1] "hello again!"                                                              
</pre></div>

<p>With the <code>stdout</code> option, the standard output is collected and can be examined once the child process finished.
The <code>show = TRUE</code> options will also show the output of the child, as it is printed, on the console of the parent.
</p>




<h4>Background R processes</h4>

<p><code>r_bg()</code> is similar to <code>r()</code> but it starts the R process in the background.
It returns an <code>r_process</code> R6 object, that provides a rich API:
</p>
<div class="sourceCode r"><pre>rp &lt;- callr::r_bg(function() Sys.sleep(.2))
rp
</pre></div>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000"><pre>
#> PROCESS 'R', running, pid 58242.                                                
</pre></div>

<p>This is a list of all <code>r_process</code> methods:
</p>
<div class="sourceCode r"><pre>ls(rp)
</pre></div>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000"><pre>
#>  [1] "as_ps_handle"          "clone"                 "finalize"                 
#>  [4] "format"                "get_cmdline"           "get_cpu_times"            
#>  [7] "get_error_connection"  "get_error_file"        "get_exe"                  
#> [10] "get_exit_status"       "get_input_connection"  "get_input_file"           
#> [13] "get_memory_info"       "get_name"              "get_output_connection"    
#> [16] "get_output_file"       "get_pid"               "get_poll_connection"      
#> [19] "get_result"            "get_start_time"        "get_status"               
#> [22] "get_username"          "get_wd"                "has_error_connection"     
#> [25] "has_input_connection"  "has_output_connection" "has_poll_connection"      
#> [28] "initialize"            "interrupt"             "is_alive"                 
#> [31] "is_incomplete_error"   "is_incomplete_output"  "is_supervised"            
#> [34] "kill"                  "kill_tree"             "poll_io"                  
#> [37] "print"                 "read_all_error"        "read_all_error_lines"     
#> [40] "read_all_output"       "read_all_output_lines" "read_error"               
#> [43] "read_error_lines"      "read_output"           "read_output_lines"        
#> [46] "resume"                "signal"                "supervise"                
#> [49] "suspend"               "wait"                  "write_input"              
</pre></div>

<p>These include all methods of the <code>processx::process</code> superclass and the new <code>get_result()</code> method, to retrieve the R object returned by the function call.
Some of the handiest methods are:
</p>

<ul>
<li> <p><code>get_exit_status()</code> to query the exit status of a finished process.
</p>
</li>
<li> <p><code>get_result()</code> to collect the return value of the R function call.
</p>
</li>
<li> <p><code>interrupt()</code> to send an interrupt to the process. This is equivalent to a <code>CTRL+C</code> key press, and the R process might ignore it.
</p>
</li>
<li> <p><code>is_alive()</code> to check if the process is alive.
</p>
</li>
<li> <p><code>kill()</code> to terminate the process.
</p>
</li>
<li> <p><code>poll_io()</code> to wait for any standard output, standard error, or the completion of the process, with a timeout.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;read_*()&#8288;</code> to read the standard output or error.
</p>
</li>
<li> <p><code>suspend()</code> and <code>resume()</code> to stop and continue a process.
</p>
</li>
<li> <p><code>wait()</code> to wait for the completion of the process, with a timeout.
</p>
</li></ul>




<h4>Multiple background R processes and <code>poll()</code></h4>

<p>Multiple background R processes are best managed with the <code>processx::poll()</code> function that waits for events (standard output/error or termination) from multiple processes.
It returns as soon as one process has generated an event, or if its timeout has expired.
The timeout is in milliseconds.
</p>
<div class="sourceCode r"><pre>rp1 &lt;- callr::r_bg(function() { Sys.sleep(1/2); "1 done" })
rp2 &lt;- callr::r_bg(function() { Sys.sleep(1/1000); "2 done" })
processx::poll(list(rp1, rp2), 1000)
</pre></div>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000"><pre>
#> [[1]]                                                                           
#>   output    error  process                                                      
#> "silent" "silent" "silent"                                                      
#>                                                                                 
#> [[2]]                                                                           
#>  output   error process                                                         
#> "ready" "ready" "ready"                                                         
#>                                                                                 
</pre></div>

<div class="sourceCode r"><pre>rp2$get_result()
</pre></div>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000"><pre>
#> [1] "2 done"                                                                    
</pre></div>

<div class="sourceCode r"><pre>processx::poll(list(rp1), 1000)
</pre></div>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000"><pre>
#> [[1]]                                                                           
#>   output    error  process                                                      
#> "silent" "silent"  "ready"                                                      
#>                                                                                 
</pre></div>

<div class="sourceCode r"><pre>rp1$get_result()
</pre></div>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000"><pre>
#> [1] "1 done"                                                                    
</pre></div>




<h4>Persistent R sessions</h4>

<p><code>r_session</code> is another <code>processx::process</code> subclass that represents a persistent background R session:
</p>
<div class="sourceCode r"><pre>rs &lt;- callr::r_session$new()
rs
</pre></div>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000"><pre>
#> R SESSION, alive, idle, pid 58288.                                              
</pre></div>

<p><code>r_session$run()</code> is a synchronous call, that works similarly to <code>r()</code>, but uses the persistent session.
<code>r_session$call()</code> starts the function call and returns immediately.
The <code>r_session$poll_process()</code> method or <code>processx::poll()</code> can then be used to wait for the completion or other events from one or more R sessions, R processes or other <code>processx::process</code> objects.
</p>
<p>Once an R session is done with an asynchronous computation, its <code>poll_process()</code> method returns <code>"ready"</code> and the <code>r_session$read()</code> method can read out the result.
</p>
<div class="sourceCode r"><pre>rs &lt;- callr::r_session$new()
rs$run(function() runif(10))
</pre></div>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000"><pre>
#>  [1] 0.8047354 0.8938617 0.7142338 0.8505395 0.3118376 0.7083882 0.9514367      
#>  [8] 0.2536755 0.6727270 0.3359578                                              
</pre></div>

<div class="sourceCode r"><pre>rs$call(function() rnorm(10))
rs
</pre></div>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000"><pre>
#> R SESSION, alive, busy, pid 58294.                                              
</pre></div>

<div class="sourceCode r"><pre>rs$poll_process(2000)
</pre></div>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000"><pre>
#> [1] "ready"                                                                     
</pre></div>

<div class="sourceCode r"><pre>rs$read()
</pre></div>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000"><pre>
#> $code                                                                           
#> [1] 200                                                                         
#>                                                                                 
#> $message                                                                        
#> [1] "done callr-rs-result-e3324ebebc8b"                                         
#>                                                                                 
#> $result                                                                         
#>  [1] -0.60962697 -0.41063130  0.22121432  1.44621900  0.26890394  0.11432756    
#>  [7] -0.53206118  0.47493933  0.02069551  1.37348004                            
#>                                                                                 
#> $stdout                                                                         
#> [1] ""                                                                          
#>                                                                                 
#> $stderr                                                                         
#> [1] ""                                                                          
#>                                                                                 
#> $error                                                                          
#> NULL                                                                            
#>                                                                                 
#> attr(,"class")                                                                  
#> [1] "callr_session_result"                                                      
</pre></div>




<h4>Running <code style="white-space: pre;">&#8288;R CMD&#8288;</code> commands</h4>

<p>The <code>rcmd()</code> function calls an <code style="white-space: pre;">&#8288;R CMD&#8288;</code> command.
For example, you can call <code style="white-space: pre;">&#8288;R CMD INSTALL&#8288;</code>, <code style="white-space: pre;">&#8288;R CMD check&#8288;</code> or <code style="white-space: pre;">&#8288;R CMD config&#8288;</code> this way:
</p>
<div class="sourceCode r"><pre>callr::rcmd("config", "CC")
</pre></div>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000"><pre>
#> $status                                                                         
#> [1] 0                                                                           
#>                                                                                 
#> $stdout                                                                         
#> [1] "clang -arch arm64\n"                                                       
#>                                                                                 
#> $stderr                                                                         
#> [1] ""                                                                          
#>                                                                                 
#> $timeout                                                                        
#> [1] FALSE                                                                       
#>                                                                                 
#> $command                                                                        
#> [1] "/Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/bin/R"        
#> [2] "CMD"                                                                       
#> [3] "config"                                                                    
#> [4] "CC"                                                                        
#>                                                                                 
</pre></div>

<p>This returns a list with three components: the standard output, the standard error, and the exit (status) code of the <code style="white-space: pre;">&#8288;R CMD&#8288;</code> command.
</p>



<h4>Configuration</h4>



<h5>Environment variables</h5>


<ul>
<li> <p><code>CALLR_NO_TEMP_DLLS</code>: If <code>true</code>, then callr does not use a temporary
directory to copy the client DLL files from, in the subprocess. By
default callr copies the DLL file that drives the callr subprocess into
a temporary directory and loads it from there. This is mainly to avoid
locking a DLL file in the package library, on Windows. If this default
causes issues for you, set it to <code>true</code>, and then callr will use the DLL
file from the installed processx package. See also
https://github.com/r-lib/callr/issues/273.
</p>
</li></ul>





<h4>Code of Conduct</h4>

<p>Please note that the callr project is released with a
<a href="https://callr.r-lib.org/CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>.
By contributing to this project, you agree to abide by its terms.
</p>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Gábor Csárdi <a href="mailto:csardi.gabor@gmail.com">csardi.gabor@gmail.com</a> (<a href="https://orcid.org/0000-0001-7098-9676">ORCID</a>) [copyright holder]
</p>
<p>Authors:
</p>

<ul>
<li><p> Winston Chang
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Posit Software, PBC [copyright holder, funder]
</p>
</li>
<li><p> Ascent Digital Services [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://callr.r-lib.org">https://callr.r-lib.org</a>
</p>
</li>
<li> <p><a href="https://github.com/r-lib/callr">https://github.com/r-lib/callr</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/r-lib/callr/issues">https://github.com/r-lib/callr/issues</a>
</p>
</li></ul>


<hr>
<h2 id='convert_and_check_my_args'>Convert and check function arguments</h2><span id='topic+convert_and_check_my_args'></span>

<h3>Description</h3>

<p>This function is used for all variants of <code>r</code> and <code>rcmd</code>. An argument
name is only used to refer to one kind of object, to make this possible.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_and_check_my_args(options)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="convert_and_check_my_args_+3A_options">options</code></td>
<td>
<p>List of options.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The benefit of having a single <code>options</code> object is to avoid passing
around a lot of arguments all the time.
</p>
<p>The benefit of making this object internal (i.e. that the <code>r</code>, etc.
functions have multiple arguments instead of a single <code>options</code> list),
is that documentation and usage is more user friendly (e.g. command-
completion works in the editor.
</p>

<hr>
<h2 id='default_repos'>Default value for the <code>repos</code> option in callr subprocesses</h2><span id='topic+default_repos'></span>

<h3>Description</h3>

<p>callr sets the <code>repos</code> option in subprocesses, to make sure that
a CRAN mirror is set up. This is because the subprocess cannot bring
up the menu of CRAN mirrors for the user to choose from.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_repos()
</code></pre>


<h3>Value</h3>

<p>Named character vector, the default value of the <code>repos</code>
option in callr subprocesses.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>default_repos()
</code></pre>

<hr>
<h2 id='get_result'>Read the result object from the output file, or the error</h2><span id='topic+get_result'></span>

<h3>Description</h3>

<p>Even if an error happens, the output file might still exist,
because <code><a href="base.html#topic+saveRDS">saveRDS()</a></code> creates the file before evaluating its object
argument. So we need to check for the error file to decide
if an error happened.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_result(output, options)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_result_+3A_output">output</code></td>
<td>
<p>List of the output object from <code><a href="#topic+run">run()</a></code> and
the name of the result file to read. For the error file,
<code>.error</code> is appended to this.</p>
</td></tr>
<tr><td><code id="get_result_+3A_options">options</code></td>
<td>
<p>The context, including all parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If no error happened, the result is returned. Otherwise
we handle the error.
</p>

<hr>
<h2 id='new_callr_crash_error'>Create an error object</h2><span id='topic+new_callr_crash_error'></span>

<h3>Description</h3>

<p>There are two kinds of errors, both have class <code>callr_error</code>:
</p>

<ol>
<li><p> the first one is thrown after a timeout: <code>callr_timeout_error</code>.
</p>
</li>
<li><p> the second one is thrown after an R error (in the other session):
<code>callr_status_error</code>.
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>new_callr_crash_error(out, msg = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="new_callr_crash_error_+3A_out">out</code></td>
<td>
<p>The object returned by <code><a href="#topic+run">run()</a></code>.</p>
</td></tr>
<tr><td><code id="new_callr_crash_error_+3A_msg">msg</code></td>
<td>
<p>An extra message to add to the error message.</p>
</td></tr>
</table>

<hr>
<h2 id='r'>Evaluate an expression in another R session</h2><span id='topic+r'></span><span id='topic+r_safe'></span>

<h3>Description</h3>

<p>From <code>callr</code> version 2.0.0, <code>r()</code> is equivalent to <code>r_safe()</code>, and
tries to set up a less error prone execution environment. In particular:
</p>

<ul>
<li><p> Ensures that at least one reasonable CRAN mirror is set up.
</p>
</li>
<li><p> Adds some command line arguments to avoid saving <code>.RData</code> files, etc.
</p>
</li>
<li><p> Ignores the system and user profiles (by default).
</p>
</li>
<li><p> Sets various environment variables: <code>CYGWIN</code> to avoid
warnings about DOS-style paths, <code>R_TESTS</code> to avoid issues
when <code>callr</code> is invoked from unit tests, <code>R_BROWSER</code>
and <code>R_PDFVIEWER</code> to avoid starting a browser or a PDF viewer.
See <code><a href="#topic+rcmd_safe_env">rcmd_safe_env()</a></code>.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>r(
  func,
  args = list(),
  libpath = .libPaths(),
  repos = default_repos(),
  stdout = NULL,
  stderr = NULL,
  poll_connection = TRUE,
  error = getOption("callr.error", "error"),
  cmdargs = c("--slave", "--no-save", "--no-restore"),
  show = FALSE,
  callback = NULL,
  block_callback = NULL,
  spinner = show &amp;&amp; interactive(),
  system_profile = FALSE,
  user_profile = "project",
  env = rcmd_safe_env(),
  timeout = Inf,
  package = FALSE,
  arch = "same",
  ...
)

r_safe(
  func,
  args = list(),
  libpath = .libPaths(),
  repos = default_repos(),
  stdout = NULL,
  stderr = NULL,
  poll_connection = TRUE,
  error = getOption("callr.error", "error"),
  cmdargs = c("--slave", "--no-save", "--no-restore"),
  show = FALSE,
  callback = NULL,
  block_callback = NULL,
  spinner = show &amp;&amp; interactive(),
  system_profile = FALSE,
  user_profile = "project",
  env = rcmd_safe_env(),
  timeout = Inf,
  package = FALSE,
  arch = "same",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="r_+3A_func">func</code></td>
<td>
<p>Function object to call in the new R process.
The function should be self-contained and only refer to
other functions and use variables explicitly from other packages
using the <code>::</code> notation. By default the environment of the function
is set to <code>.GlobalEnv</code> before passing it to the child process.
(See the <code>package</code> option if you want to keep the environment.)
Because of this, it is good practice to create an anonymous
function and pass that to <code>callr</code>, instead of passing
a function object from a (base or other) package. In particular
</p>
<div class="sourceCode"><pre>r(.libPaths)
</pre></div>
<p>does not work, because <code>.libPaths</code> is defined in a special
environment, but
</p>
<div class="sourceCode"><pre>r(function() .libPaths())
</pre></div>
<p>works just fine.</p>
</td></tr>
<tr><td><code id="r_+3A_args">args</code></td>
<td>
<p>Arguments to pass to the function. Must be a list.</p>
</td></tr>
<tr><td><code id="r_+3A_libpath">libpath</code></td>
<td>
<p>The library path.</p>
</td></tr>
<tr><td><code id="r_+3A_repos">repos</code></td>
<td>
<p>The <code>repos</code> option. If <code>NULL</code>, then no
<code>repos</code> option is set. This options is only used if
<code>user_profile</code> or <code>system_profile</code> is set <code>FALSE</code>,
as it is set using the system or the user profile.</p>
</td></tr>
<tr><td><code id="r_+3A_stdout">stdout</code></td>
<td>
<p>The name of the file the standard output of
the child R process will be written to.
If the child process runs with the <code>--slave</code> option (the default),
then the commands are not echoed and will not be shown
in the standard output. Also note that you need to call <code>print()</code>
explicitly to show the output of the command(s).
IF <code>NULL</code> (the default), then standard output is not returned, but
it is recorded and included in the error object if an error happens.</p>
</td></tr>
<tr><td><code id="r_+3A_stderr">stderr</code></td>
<td>
<p>The name of the file the standard error of
the child R process will be written to.
In particular <code>message()</code> sends output to the standard
error. If nothing was sent to the standard error, then this file
will be empty. This argument can be the same file as <code>stdout</code>,
in which case they will be correctly interleaved. If this is the
string <code>"2&gt;&amp;1"</code>, then standard error is redirected to standard output.
IF <code>NULL</code> (the default), then standard output is not returned, but
it is recorded and included in the error object if an error happens.</p>
</td></tr>
<tr><td><code id="r_+3A_poll_connection">poll_connection</code></td>
<td>
<p>Whether to have a control connection to
the process. This is used to transmit messages from the subprocess
to the main process.</p>
</td></tr>
<tr><td><code id="r_+3A_error">error</code></td>
<td>
<p>What to do if the remote process throws an error.
See details below.</p>
</td></tr>
<tr><td><code id="r_+3A_cmdargs">cmdargs</code></td>
<td>
<p>Command line arguments to pass to the R process.
Note that <code>c("-f", rscript)</code> is appended to this, <code>rscript</code>
is the name of the script file to run. This contains a call to the
supplied function and some error handling code.</p>
</td></tr>
<tr><td><code id="r_+3A_show">show</code></td>
<td>
<p>Logical, whether to show the standard output on the screen
while the child process is running. Note that this is independent
of the <code>stdout</code> and <code>stderr</code> arguments. The standard
error is not shown currently.</p>
</td></tr>
<tr><td><code id="r_+3A_callback">callback</code></td>
<td>
<p>A function to call for each line of the standard
output and standard error from the child process. It works together
with the <code>show</code> option; i.e. if <code>show = TRUE</code>, and a
callback is provided, then the output is shown of the screen, and the
callback is also called.</p>
</td></tr>
<tr><td><code id="r_+3A_block_callback">block_callback</code></td>
<td>
<p>A function to call for each block of the standard
output and standard error. This callback is not line oriented, i.e.
multiple lines or half a line can be passed to the callback.</p>
</td></tr>
<tr><td><code id="r_+3A_spinner">spinner</code></td>
<td>
<p>Whether to show a calming spinner on the screen while
the child R session is running. By default it is shown if
<code>show = TRUE</code> and the R session is interactive.</p>
</td></tr>
<tr><td><code id="r_+3A_system_profile">system_profile</code></td>
<td>
<p>Whether to use the system profile file.</p>
</td></tr>
<tr><td><code id="r_+3A_user_profile">user_profile</code></td>
<td>
<p>Whether to use the user's profile file.
If this is <code>"project"</code>, then only the profile from the working
directory is used, but the <code>R_PROFILE_USER</code> environment variable
and the user level profile are not. See also &quot;Security considerations&quot;
below.</p>
</td></tr>
<tr><td><code id="r_+3A_env">env</code></td>
<td>
<p>Environment variables to set for the child process.</p>
</td></tr>
<tr><td><code id="r_+3A_timeout">timeout</code></td>
<td>
<p>Timeout for the function call to finish. It can be a
<a href="base.html#topic+difftime">base::difftime</a> object, or a real number, meaning seconds.
If the process does not finish before the timeout period expires,
then a <code>system_command_timeout_error</code> error is thrown. <code>Inf</code>
means no timeout.</p>
</td></tr>
<tr><td><code id="r_+3A_package">package</code></td>
<td>
<p>Whether to keep the environment of <code>func</code> when passing
it to the other package. Possible values are:
</p>

<ul>
<li> <p><code>FALSE</code>: reset the environment to <code>.GlobalEnv</code>. This is the default.
</p>
</li>
<li> <p><code>TRUE</code>: keep the environment as is.
</p>
</li>
<li> <p><code>pkg</code>: set the environment to the <code>pkg</code> package namespace.
</p>
</li></ul>
</td></tr>
<tr><td><code id="r_+3A_arch">arch</code></td>
<td>
<p>Architecture to use in the child process, for multi-arch
builds of R. By default the same as the main process. See
<code><a href="#topic+supported_archs">supported_archs()</a></code>. If it contains a forward or backward slash
character, then it is taken as the path to the R executable.
Note that on Windows you need the path to <code>Rterm.exe</code>.</p>
</td></tr>
<tr><td><code id="r_+3A_...">...</code></td>
<td>
<p>Extra arguments are passed to <code><a href="processx.html#topic+run">processx::run()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>r()</code> function from before 2.0.0 is called <code><a href="#topic+r_copycat">r_copycat()</a></code> now.
</p>


<h3>Value</h3>

<p>Value of the evaluated expression.
</p>


<h3>Error handling</h3>

<p><code>callr</code> handles errors properly. If the child process throws an
error, then <code>callr</code> throws an error with the same error message
in the main process.
</p>
<p>The <code>error</code> expert argument may be used to specify a different
behavior on error. The following values are possible:
</p>

<ul>
<li> <p><code>error</code> is the default behavior: throw an error in the main process,
with a prefix and the same error message as in the subprocess.
</p>
</li>
<li> <p><code>stack</code> also throws an error in the main process, but the error
is of a special kind, class <code>callr_error</code>, and it contains
both the original error object, and the call stack of the child,
as written out by <code><a href="utils.html#topic+debugger">utils::dump.frames()</a></code>. This is now deprecated,
because the error thrown for <code>"error"</code> has the same information.
</p>
</li>
<li> <p><code>debugger</code> is similar to <code>stack</code>, but in addition
to returning the complete call stack, it also start up a debugger
in the child call stack, via <code><a href="utils.html#topic+debugger">utils::debugger()</a></code>.
</p>
</li></ul>

<p>The default error behavior can be also set using the <code>callr.error</code>
option. This is useful to debug code that uses <code>callr</code>.
</p>
<p>callr uses parent errors, to keep the stacks of the main process and the
subprocess(es) in the same error object.
</p>


<h3>Security considerations</h3>

<p><code>callr</code> makes a copy of the user's <code>.Renviron</code> file and potentially of
the local or user <code>.Rprofile</code>, in the session temporary
directory. Avoid storing sensitive information such as passwords, in
your environment file or your profile, otherwise this information will
get scattered in various files, at least temporarily, until the
subprocess finishes. You can use the keyring package to avoid passwords
in plain files.
</p>


<h3>Transporting objects</h3>

<p><code>func</code> and <code>args</code> are copied to the child process by first serializing them
into a temporary file using <code><a href="base.html#topic+saveRDS">saveRDS()</a></code> and then loading them back into the
child session using <code><a href="base.html#topic+readRDS">readRDS()</a></code>. The same strategy is used to copy the result
of calling <code>func(args)</code> to the main session. Note that some objects, notably
those with <code>externalptr</code> type, won't work as expected after being
saved to a file and loaded back.
</p>
<p>For performance reasons <code>compress=FALSE</code> is used when serializing with
<code><a href="base.html#topic+saveRDS">saveRDS()</a></code>, this can be disabled by setting
<code>options(callr.compress_transport = TRUE)</code>.
</p>


<h3>See Also</h3>

<p>Other callr functions: 
<code><a href="#topic+r_copycat">r_copycat</a>()</code>,
<code><a href="#topic+r_vanilla">r_vanilla</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Workspace is empty
r(function() ls())

# library path is the same by default
r(function() .libPaths())
.libPaths()

</code></pre>

<hr>
<h2 id='r_bg'>Evaluate an expression in another R session, in the background</h2><span id='topic+r_bg'></span>

<h3>Description</h3>

<p>Starts evaluating an R function call in a background R process, and
returns immediately.
Use <code>p$get_result()</code> to collect the result or to throw an error
if the background computation failed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>r_bg(
  func,
  args = list(),
  libpath = .libPaths(),
  repos = default_repos(),
  stdout = "|",
  stderr = "|",
  poll_connection = TRUE,
  error = getOption("callr.error", "error"),
  cmdargs = c("--slave", "--no-save", "--no-restore"),
  system_profile = FALSE,
  user_profile = "project",
  env = rcmd_safe_env(),
  supervise = FALSE,
  package = FALSE,
  arch = "same",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="r_bg_+3A_func">func</code></td>
<td>
<p>Function object to call in the new R process.
The function should be self-contained and only refer to
other functions and use variables explicitly from other packages
using the <code>::</code> notation. By default the environment of the function
is set to <code>.GlobalEnv</code> before passing it to the child process.
(See the <code>package</code> option if you want to keep the environment.)
Because of this, it is good practice to create an anonymous
function and pass that to <code>callr</code>, instead of passing
a function object from a (base or other) package. In particular
</p>
<div class="sourceCode"><pre>r(.libPaths)
</pre></div>
<p>does not work, because <code>.libPaths</code> is defined in a special
environment, but
</p>
<div class="sourceCode"><pre>r(function() .libPaths())
</pre></div>
<p>works just fine.</p>
</td></tr>
<tr><td><code id="r_bg_+3A_args">args</code></td>
<td>
<p>Arguments to pass to the function. Must be a list.</p>
</td></tr>
<tr><td><code id="r_bg_+3A_libpath">libpath</code></td>
<td>
<p>The library path.</p>
</td></tr>
<tr><td><code id="r_bg_+3A_repos">repos</code></td>
<td>
<p>The <code>repos</code> option. If <code>NULL</code>, then no
<code>repos</code> option is set. This options is only used if
<code>user_profile</code> or <code>system_profile</code> is set <code>FALSE</code>,
as it is set using the system or the user profile.</p>
</td></tr>
<tr><td><code id="r_bg_+3A_stdout">stdout</code></td>
<td>
<p>The name of the file the standard output of
the child R process will be written to.
If the child process runs with the <code>--slave</code> option (the default),
then the commands are not echoed and will not be shown
in the standard output. Also note that you need to call <code>print()</code>
explicitly to show the output of the command(s).
IF <code>NULL</code> (the default), then standard output is not returned, but
it is recorded and included in the error object if an error happens.</p>
</td></tr>
<tr><td><code id="r_bg_+3A_stderr">stderr</code></td>
<td>
<p>The name of the file the standard error of
the child R process will be written to.
In particular <code>message()</code> sends output to the standard
error. If nothing was sent to the standard error, then this file
will be empty. This argument can be the same file as <code>stdout</code>,
in which case they will be correctly interleaved. If this is the
string <code>"2&gt;&amp;1"</code>, then standard error is redirected to standard output.
IF <code>NULL</code> (the default), then standard output is not returned, but
it is recorded and included in the error object if an error happens.</p>
</td></tr>
<tr><td><code id="r_bg_+3A_poll_connection">poll_connection</code></td>
<td>
<p>Whether to have a control connection to
the process. This is used to transmit messages from the subprocess
to the main process.</p>
</td></tr>
<tr><td><code id="r_bg_+3A_error">error</code></td>
<td>
<p>What to do if the remote process throws an error.
See details below.</p>
</td></tr>
<tr><td><code id="r_bg_+3A_cmdargs">cmdargs</code></td>
<td>
<p>Command line arguments to pass to the R process.
Note that <code>c("-f", rscript)</code> is appended to this, <code>rscript</code>
is the name of the script file to run. This contains a call to the
supplied function and some error handling code.</p>
</td></tr>
<tr><td><code id="r_bg_+3A_system_profile">system_profile</code></td>
<td>
<p>Whether to use the system profile file.</p>
</td></tr>
<tr><td><code id="r_bg_+3A_user_profile">user_profile</code></td>
<td>
<p>Whether to use the user's profile file.
If this is <code>"project"</code>, then only the profile from the working
directory is used, but the <code>R_PROFILE_USER</code> environment variable
and the user level profile are not. See also &quot;Security considerations&quot;
below.</p>
</td></tr>
<tr><td><code id="r_bg_+3A_env">env</code></td>
<td>
<p>Environment variables to set for the child process.</p>
</td></tr>
<tr><td><code id="r_bg_+3A_supervise">supervise</code></td>
<td>
<p>Whether to register the process with a supervisor. If <code>TRUE</code>,
the supervisor will ensure that the process is killed when the R process
exits.</p>
</td></tr>
<tr><td><code id="r_bg_+3A_package">package</code></td>
<td>
<p>Whether to keep the environment of <code>func</code> when passing
it to the other package. Possible values are:
</p>

<ul>
<li> <p><code>FALSE</code>: reset the environment to <code>.GlobalEnv</code>. This is the default.
</p>
</li>
<li> <p><code>TRUE</code>: keep the environment as is.
</p>
</li>
<li> <p><code>pkg</code>: set the environment to the <code>pkg</code> package namespace.
</p>
</li></ul>
</td></tr>
<tr><td><code id="r_bg_+3A_arch">arch</code></td>
<td>
<p>Architecture to use in the child process, for multi-arch
builds of R. By default the same as the main process. See
<code><a href="#topic+supported_archs">supported_archs()</a></code>. If it contains a forward or backward slash
character, then it is taken as the path to the R executable.
Note that on Windows you need the path to <code>Rterm.exe</code>.</p>
</td></tr>
<tr><td><code id="r_bg_+3A_...">...</code></td>
<td>
<p>Extra arguments are passed to the <a href="processx.html#topic+process">processx::process</a>
constructor.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>r_process</code> object, which inherits from <a href="#topic+process">process</a>,
so all <code>process</code> methods can be called on it, and in addition it also
has a <code>get_result()</code> method to collect the result.
</p>


<h3>Security considerations</h3>

<p><code>callr</code> makes a copy of the user's <code>.Renviron</code> file and potentially of
the local or user <code>.Rprofile</code>, in the session temporary
directory. Avoid storing sensitive information such as passwords, in
your environment file or your profile, otherwise this information will
get scattered in various files, at least temporarily, until the
subprocess finishes. You can use the keyring package to avoid passwords
in plain files.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
rx &lt;- r_bg(function() 1 + 2)

# wait until it is done
rx$wait()
rx$is_alive()
rx$get_result()

</code></pre>

<hr>
<h2 id='r_copycat'>Run an R process that mimics the current R process</h2><span id='topic+r_copycat'></span>

<h3>Description</h3>

<p>Differences to <code><a href="#topic+r">r()</a></code>:
</p>

<ul>
<li><p> No extra repositories are set up.
</p>
</li>
<li><p> The <code>--no-save</code>, <code>--no-restore</code>
command line arguments are not used. (But <code>--slave</code> still is.)
</p>
</li>
<li><p> The system profile and the user profile are loaded.
</p>
</li>
<li><p> No extra environment variables are set up.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>r_copycat(
  func,
  args = list(),
  libpath = .libPaths(),
  repos = getOption("repos"),
  cmdargs = "--slave",
  system_profile = TRUE,
  user_profile = TRUE,
  env = character(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="r_copycat_+3A_func">func</code></td>
<td>
<p>Function object to call in the new R process.
The function should be self-contained and only refer to
other functions and use variables explicitly from other packages
using the <code>::</code> notation. By default the environment of the function
is set to <code>.GlobalEnv</code> before passing it to the child process.
(See the <code>package</code> option if you want to keep the environment.)
Because of this, it is good practice to create an anonymous
function and pass that to <code>callr</code>, instead of passing
a function object from a (base or other) package. In particular
</p>
<div class="sourceCode"><pre>r(.libPaths)
</pre></div>
<p>does not work, because <code>.libPaths</code> is defined in a special
environment, but
</p>
<div class="sourceCode"><pre>r(function() .libPaths())
</pre></div>
<p>works just fine.</p>
</td></tr>
<tr><td><code id="r_copycat_+3A_args">args</code></td>
<td>
<p>Arguments to pass to the function. Must be a list.</p>
</td></tr>
<tr><td><code id="r_copycat_+3A_libpath">libpath</code></td>
<td>
<p>The library path.</p>
</td></tr>
<tr><td><code id="r_copycat_+3A_repos">repos</code></td>
<td>
<p>The <code>repos</code> option. If <code>NULL</code>, then no
<code>repos</code> option is set. This options is only used if
<code>user_profile</code> or <code>system_profile</code> is set <code>FALSE</code>,
as it is set using the system or the user profile.</p>
</td></tr>
<tr><td><code id="r_copycat_+3A_cmdargs">cmdargs</code></td>
<td>
<p>Command line arguments to pass to the R process.
Note that <code>c("-f", rscript)</code> is appended to this, <code>rscript</code>
is the name of the script file to run. This contains a call to the
supplied function and some error handling code.</p>
</td></tr>
<tr><td><code id="r_copycat_+3A_system_profile">system_profile</code></td>
<td>
<p>Whether to use the system profile file.</p>
</td></tr>
<tr><td><code id="r_copycat_+3A_user_profile">user_profile</code></td>
<td>
<p>Whether to use the user's profile file.
If this is <code>"project"</code>, then only the profile from the working
directory is used, but the <code>R_PROFILE_USER</code> environment variable
and the user level profile are not. See also &quot;Security considerations&quot;
below.</p>
</td></tr>
<tr><td><code id="r_copycat_+3A_env">env</code></td>
<td>
<p>Environment variables to set for the child process.</p>
</td></tr>
<tr><td><code id="r_copycat_+3A_...">...</code></td>
<td>
<p>Additional arguments are passed to <code><a href="#topic+r">r()</a></code>.</p>
</td></tr>
</table>


<h3>Security considerations</h3>

<p><code>callr</code> makes a copy of the user's <code>.Renviron</code> file and potentially of
the local or user <code>.Rprofile</code>, in the session temporary
directory. Avoid storing sensitive information such as passwords, in
your environment file or your profile, otherwise this information will
get scattered in various files, at least temporarily, until the
subprocess finishes. You can use the keyring package to avoid passwords
in plain files.
</p>


<h3>See Also</h3>

<p>Other callr functions: 
<code><a href="#topic+r_vanilla">r_vanilla</a>()</code>,
<code><a href="#topic+r">r</a>()</code>
</p>

<hr>
<h2 id='r_process'>External R Process</h2><span id='topic+r_process'></span>

<h3>Description</h3>

<p>An R process that runs in the background. This is an R6 class that
extends the <a href="processx.html#topic+process">processx::process</a> class. The process starts in the
background, evaluates an R function call, and then quits.
</p>


<h3>Super class</h3>

<p><code><a href="processx.html#topic+process">processx::process</a></code> -&gt; <code>r_process</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-r_process-new"><code>r_process$new()</code></a>
</p>
</li>
<li> <p><a href="#method-r_process-get_result"><code>r_process$get_result()</code></a>
</p>
</li>
<li> <p><a href="#method-r_process-finalize"><code>r_process$finalize()</code></a>
</p>
</li>
<li> <p><a href="#method-r_process-clone"><code>r_process$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="as_ps_handle"><a href='../../processx/html/process.html#method-process-as_ps_handle'><code>processx::process$as_ps_handle()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="format"><a href='../../processx/html/process.html#method-process-format'><code>processx::process$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_cmdline"><a href='../../processx/html/process.html#method-process-get_cmdline'><code>processx::process$get_cmdline()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_cpu_times"><a href='../../processx/html/process.html#method-process-get_cpu_times'><code>processx::process$get_cpu_times()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_error_connection"><a href='../../processx/html/process.html#method-process-get_error_connection'><code>processx::process$get_error_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_error_file"><a href='../../processx/html/process.html#method-process-get_error_file'><code>processx::process$get_error_file()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_exe"><a href='../../processx/html/process.html#method-process-get_exe'><code>processx::process$get_exe()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_exit_status"><a href='../../processx/html/process.html#method-process-get_exit_status'><code>processx::process$get_exit_status()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_input_connection"><a href='../../processx/html/process.html#method-process-get_input_connection'><code>processx::process$get_input_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_input_file"><a href='../../processx/html/process.html#method-process-get_input_file'><code>processx::process$get_input_file()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_memory_info"><a href='../../processx/html/process.html#method-process-get_memory_info'><code>processx::process$get_memory_info()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_name"><a href='../../processx/html/process.html#method-process-get_name'><code>processx::process$get_name()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_output_connection"><a href='../../processx/html/process.html#method-process-get_output_connection'><code>processx::process$get_output_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_output_file"><a href='../../processx/html/process.html#method-process-get_output_file'><code>processx::process$get_output_file()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_pid"><a href='../../processx/html/process.html#method-process-get_pid'><code>processx::process$get_pid()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_poll_connection"><a href='../../processx/html/process.html#method-process-get_poll_connection'><code>processx::process$get_poll_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_start_time"><a href='../../processx/html/process.html#method-process-get_start_time'><code>processx::process$get_start_time()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_status"><a href='../../processx/html/process.html#method-process-get_status'><code>processx::process$get_status()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_username"><a href='../../processx/html/process.html#method-process-get_username'><code>processx::process$get_username()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_wd"><a href='../../processx/html/process.html#method-process-get_wd'><code>processx::process$get_wd()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="has_error_connection"><a href='../../processx/html/process.html#method-process-has_error_connection'><code>processx::process$has_error_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="has_input_connection"><a href='../../processx/html/process.html#method-process-has_input_connection'><code>processx::process$has_input_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="has_output_connection"><a href='../../processx/html/process.html#method-process-has_output_connection'><code>processx::process$has_output_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="has_poll_connection"><a href='../../processx/html/process.html#method-process-has_poll_connection'><code>processx::process$has_poll_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="interrupt"><a href='../../processx/html/process.html#method-process-interrupt'><code>processx::process$interrupt()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="is_alive"><a href='../../processx/html/process.html#method-process-is_alive'><code>processx::process$is_alive()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="is_incomplete_error"><a href='../../processx/html/process.html#method-process-is_incomplete_error'><code>processx::process$is_incomplete_error()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="is_incomplete_output"><a href='../../processx/html/process.html#method-process-is_incomplete_output'><code>processx::process$is_incomplete_output()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="is_supervised"><a href='../../processx/html/process.html#method-process-is_supervised'><code>processx::process$is_supervised()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="kill"><a href='../../processx/html/process.html#method-process-kill'><code>processx::process$kill()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="kill_tree"><a href='../../processx/html/process.html#method-process-kill_tree'><code>processx::process$kill_tree()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="poll_io"><a href='../../processx/html/process.html#method-process-poll_io'><code>processx::process$poll_io()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="print"><a href='../../processx/html/process.html#method-process-print'><code>processx::process$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_all_error"><a href='../../processx/html/process.html#method-process-read_all_error'><code>processx::process$read_all_error()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_all_error_lines"><a href='../../processx/html/process.html#method-process-read_all_error_lines'><code>processx::process$read_all_error_lines()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_all_output"><a href='../../processx/html/process.html#method-process-read_all_output'><code>processx::process$read_all_output()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_all_output_lines"><a href='../../processx/html/process.html#method-process-read_all_output_lines'><code>processx::process$read_all_output_lines()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_error"><a href='../../processx/html/process.html#method-process-read_error'><code>processx::process$read_error()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_error_lines"><a href='../../processx/html/process.html#method-process-read_error_lines'><code>processx::process$read_error_lines()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_output"><a href='../../processx/html/process.html#method-process-read_output'><code>processx::process$read_output()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_output_lines"><a href='../../processx/html/process.html#method-process-read_output_lines'><code>processx::process$read_output_lines()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="resume"><a href='../../processx/html/process.html#method-process-resume'><code>processx::process$resume()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="signal"><a href='../../processx/html/process.html#method-process-signal'><code>processx::process$signal()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="supervise"><a href='../../processx/html/process.html#method-process-supervise'><code>processx::process$supervise()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="suspend"><a href='../../processx/html/process.html#method-process-suspend'><code>processx::process$suspend()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="wait"><a href='../../processx/html/process.html#method-process-wait'><code>processx::process$wait()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="write_input"><a href='../../processx/html/process.html#method-process-write_input'><code>processx::process$write_input()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-r_process-new"></a>



<h4>Method <code>new()</code></h4>

<p>Start a new R process in the background.
</p>


<h5>Usage</h5>

<div class="r"><pre>r_process$new(options)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>options</code></dt><dd><p>A list of options created via <code><a href="#topic+r_process_options">r_process_options()</a></code>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A new <code>r_process</code> object.
</p>


<hr>
<a id="method-r_process-get_result"></a>



<h4>Method <code>get_result()</code></h4>

<p>Return the result, an R object, from a finished
background R process. If the process has not finished yet, it throws
an error. (You can use <code>wait()</code> method (see <a href="processx.html#topic+process">processx::process</a>) to
wait for the process to finish, optionally with a timeout.) You can
also use <code><a href="processx.html#topic+poll">processx::poll()</a></code> to wait for the end of the process,
together with other processes or events.
</p>


<h5>Usage</h5>

<div class="r"><pre>r_process$get_result()</pre></div>



<h5>Returns</h5>

<p>The return value of the R expression evaluated in the R
process.
</p>


<hr>
<a id="method-r_process-finalize"></a>



<h4>Method <code>finalize()</code></h4>

<p>Clean up temporary files once an R process has finished and its
handle is garbage collected.
</p>


<h5>Usage</h5>

<div class="r"><pre>r_process$finalize()</pre></div>


<hr>
<a id="method-r_process-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>r_process$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
## List all options and their default values:
r_process_options()

## Start an R process in the background, wait for it, get result
opts &lt;- r_process_options(func = function() 1 + 1)
rp &lt;- r_process$new(opts)
rp$wait()
rp$get_result()

</code></pre>

<hr>
<h2 id='r_process_options'>Create options for an <a href="#topic+r_process">r_process</a> object</h2><span id='topic+r_process_options'></span>

<h3>Description</h3>

<p>Create options for an <a href="#topic+r_process">r_process</a> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>r_process_options(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="r_process_options_+3A_...">...</code></td>
<td>
<p>Options to override, named arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of options.
</p>
<p><code>r_process_options()</code> creates a set of options to initialize a new
object from the <code>r_process</code> class. Its arguments must be named, the
names are used as option names. The options correspond to (some of)
the arguments of the <code><a href="#topic+r">r()</a></code> function. At least the <code>func</code> option must be
specified, this is the R function to run in the background.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## List all options and their default values:
r_process_options()
</code></pre>

<hr>
<h2 id='r_session'>External R Session</h2><span id='topic+r_session'></span>

<h3>Description</h3>

<p>A permanent R session that runs in the background. This is an R6 class
that extends the <a href="processx.html#topic+process">processx::process</a> class.
</p>
<p>The process is started at the creation of the object, and then it can
be used to evaluate R function calls, one at a time.
</p>


<h3>Super class</h3>

<p><code><a href="processx.html#topic+process">processx::process</a></code> -&gt; <code>r_session</code>
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>status</code></dt><dd><p>Status codes returned by <code>read()</code>.</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-r_session-new"><code>r_session$new()</code></a>
</p>
</li>
<li> <p><a href="#method-r_session-run"><code>r_session$run()</code></a>
</p>
</li>
<li> <p><a href="#method-r_session-run_with_output"><code>r_session$run_with_output()</code></a>
</p>
</li>
<li> <p><a href="#method-r_session-call"><code>r_session$call()</code></a>
</p>
</li>
<li> <p><a href="#method-r_session-poll_process"><code>r_session$poll_process()</code></a>
</p>
</li>
<li> <p><a href="#method-r_session-get_state"><code>r_session$get_state()</code></a>
</p>
</li>
<li> <p><a href="#method-r_session-get_running_time"><code>r_session$get_running_time()</code></a>
</p>
</li>
<li> <p><a href="#method-r_session-read"><code>r_session$read()</code></a>
</p>
</li>
<li> <p><a href="#method-r_session-close"><code>r_session$close()</code></a>
</p>
</li>
<li> <p><a href="#method-r_session-traceback"><code>r_session$traceback()</code></a>
</p>
</li>
<li> <p><a href="#method-r_session-debug"><code>r_session$debug()</code></a>
</p>
</li>
<li> <p><a href="#method-r_session-attach"><code>r_session$attach()</code></a>
</p>
</li>
<li> <p><a href="#method-r_session-finalize"><code>r_session$finalize()</code></a>
</p>
</li>
<li> <p><a href="#method-r_session-print"><code>r_session$print()</code></a>
</p>
</li>
<li> <p><a href="#method-r_session-clone"><code>r_session$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="as_ps_handle"><a href='../../processx/html/process.html#method-process-as_ps_handle'><code>processx::process$as_ps_handle()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="format"><a href='../../processx/html/process.html#method-process-format'><code>processx::process$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_cmdline"><a href='../../processx/html/process.html#method-process-get_cmdline'><code>processx::process$get_cmdline()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_cpu_times"><a href='../../processx/html/process.html#method-process-get_cpu_times'><code>processx::process$get_cpu_times()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_error_connection"><a href='../../processx/html/process.html#method-process-get_error_connection'><code>processx::process$get_error_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_error_file"><a href='../../processx/html/process.html#method-process-get_error_file'><code>processx::process$get_error_file()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_exe"><a href='../../processx/html/process.html#method-process-get_exe'><code>processx::process$get_exe()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_exit_status"><a href='../../processx/html/process.html#method-process-get_exit_status'><code>processx::process$get_exit_status()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_input_connection"><a href='../../processx/html/process.html#method-process-get_input_connection'><code>processx::process$get_input_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_input_file"><a href='../../processx/html/process.html#method-process-get_input_file'><code>processx::process$get_input_file()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_memory_info"><a href='../../processx/html/process.html#method-process-get_memory_info'><code>processx::process$get_memory_info()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_name"><a href='../../processx/html/process.html#method-process-get_name'><code>processx::process$get_name()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_output_connection"><a href='../../processx/html/process.html#method-process-get_output_connection'><code>processx::process$get_output_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_output_file"><a href='../../processx/html/process.html#method-process-get_output_file'><code>processx::process$get_output_file()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_pid"><a href='../../processx/html/process.html#method-process-get_pid'><code>processx::process$get_pid()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_poll_connection"><a href='../../processx/html/process.html#method-process-get_poll_connection'><code>processx::process$get_poll_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_result"><a href='../../processx/html/process.html#method-process-get_result'><code>processx::process$get_result()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_start_time"><a href='../../processx/html/process.html#method-process-get_start_time'><code>processx::process$get_start_time()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_status"><a href='../../processx/html/process.html#method-process-get_status'><code>processx::process$get_status()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_username"><a href='../../processx/html/process.html#method-process-get_username'><code>processx::process$get_username()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_wd"><a href='../../processx/html/process.html#method-process-get_wd'><code>processx::process$get_wd()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="has_error_connection"><a href='../../processx/html/process.html#method-process-has_error_connection'><code>processx::process$has_error_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="has_input_connection"><a href='../../processx/html/process.html#method-process-has_input_connection'><code>processx::process$has_input_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="has_output_connection"><a href='../../processx/html/process.html#method-process-has_output_connection'><code>processx::process$has_output_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="has_poll_connection"><a href='../../processx/html/process.html#method-process-has_poll_connection'><code>processx::process$has_poll_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="interrupt"><a href='../../processx/html/process.html#method-process-interrupt'><code>processx::process$interrupt()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="is_alive"><a href='../../processx/html/process.html#method-process-is_alive'><code>processx::process$is_alive()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="is_incomplete_error"><a href='../../processx/html/process.html#method-process-is_incomplete_error'><code>processx::process$is_incomplete_error()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="is_incomplete_output"><a href='../../processx/html/process.html#method-process-is_incomplete_output'><code>processx::process$is_incomplete_output()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="is_supervised"><a href='../../processx/html/process.html#method-process-is_supervised'><code>processx::process$is_supervised()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="kill"><a href='../../processx/html/process.html#method-process-kill'><code>processx::process$kill()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="kill_tree"><a href='../../processx/html/process.html#method-process-kill_tree'><code>processx::process$kill_tree()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="poll_io"><a href='../../processx/html/process.html#method-process-poll_io'><code>processx::process$poll_io()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_all_error"><a href='../../processx/html/process.html#method-process-read_all_error'><code>processx::process$read_all_error()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_all_error_lines"><a href='../../processx/html/process.html#method-process-read_all_error_lines'><code>processx::process$read_all_error_lines()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_all_output"><a href='../../processx/html/process.html#method-process-read_all_output'><code>processx::process$read_all_output()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_all_output_lines"><a href='../../processx/html/process.html#method-process-read_all_output_lines'><code>processx::process$read_all_output_lines()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_error"><a href='../../processx/html/process.html#method-process-read_error'><code>processx::process$read_error()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_error_lines"><a href='../../processx/html/process.html#method-process-read_error_lines'><code>processx::process$read_error_lines()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_output"><a href='../../processx/html/process.html#method-process-read_output'><code>processx::process$read_output()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_output_lines"><a href='../../processx/html/process.html#method-process-read_output_lines'><code>processx::process$read_output_lines()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="resume"><a href='../../processx/html/process.html#method-process-resume'><code>processx::process$resume()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="signal"><a href='../../processx/html/process.html#method-process-signal'><code>processx::process$signal()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="supervise"><a href='../../processx/html/process.html#method-process-supervise'><code>processx::process$supervise()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="suspend"><a href='../../processx/html/process.html#method-process-suspend'><code>processx::process$suspend()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="wait"><a href='../../processx/html/process.html#method-process-wait'><code>processx::process$wait()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="write_input"><a href='../../processx/html/process.html#method-process-write_input'><code>processx::process$write_input()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-r_session-new"></a>



<h4>Method <code>new()</code></h4>

<p>creates a new R background process. It can wait for the process to
start up (<code>wait = TRUE</code>), or return immediately, i.e. before
the process is actually ready to run. In the latter case you may call
the <code>poll_process()</code> method to make sure it is ready.
</p>


<h5>Usage</h5>

<div class="r"><pre>r_session$new(options = r_session_options(), wait = TRUE, wait_timeout = 3000)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>options</code></dt><dd><p>A list of options created via <code><a href="#topic+r_session_options">r_session_options()</a></code>.</p>
</dd>
<dt><code>wait</code></dt><dd><p>Whether to wait for the R process to start and be ready
for running commands.</p>
</dd>
<dt><code>wait_timeout</code></dt><dd><p>Timeout for waiting for the R process to start,
in milliseconds.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>An <code>r_session</code> object.
</p>


<hr>
<a id="method-r_session-run"></a>



<h4>Method <code>run()</code></h4>

<p>Similar to <code><a href="#topic+r">r()</a></code>, but runs the function in a permanent background
R session. It throws an error if the function call generated an
error in the child process.
</p>


<h5>Usage</h5>

<div class="r"><pre>r_session$run(func, args = list(), package = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>func</code></dt><dd><p>Function object to call in the background R process.
Please read the notes for the similar argument of <code><a href="#topic+r">r()</a></code>.</p>
</dd>
<dt><code>args</code></dt><dd><p>Arguments to pass to the function. Must be a list.</p>
</dd>
<dt><code>package</code></dt><dd><p>Whether to keep the environment of <code>func</code> when passing
it to the other package. Possible values are:
</p>

<ul>
<li> <p><code>FALSE</code>: reset the environment to <code>.GlobalEnv</code>. This is the default.
</p>
</li>
<li> <p><code>TRUE</code>: keep the environment as is.
</p>
</li>
<li> <p><code>pkg</code>: set the environment to the <code>pkg</code> package namespace.
</p>
</li></ul>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>The return value of the R expression.
</p>


<hr>
<a id="method-r_session-run_with_output"></a>



<h4>Method <code>run_with_output()</code></h4>

<p>Similar to <code style="white-space: pre;">&#8288;$run()&#8288;</code>, but returns the standard output and error of
the child process as well. It does not throw on errors, but
returns a non-<code>NULL</code> <code>error</code> member in the result list.
</p>


<h5>Usage</h5>

<div class="r"><pre>r_session$run_with_output(func, args = list(), package = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>func</code></dt><dd><p>Function object to call in the background R process.
Please read the notes for the similar argument of <code><a href="#topic+r">r()</a></code>.</p>
</dd>
<dt><code>args</code></dt><dd><p>Arguments to pass to the function. Must be a list.</p>
</dd>
<dt><code>package</code></dt><dd><p>Whether to keep the environment of <code>func</code> when passing
it to the other package. Possible values are:
</p>

<ul>
<li> <p><code>FALSE</code>: reset the environment to <code>.GlobalEnv</code>. This is the default.
</p>
</li>
<li> <p><code>TRUE</code>: keep the environment as is.
</p>
</li>
<li> <p><code>pkg</code>: set the environment to the <code>pkg</code> package namespace.
</p>
</li></ul>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A list with the following entries.
</p>

<ul>
<li> <p><code>result</code>: The value returned by <code>func</code>. On error this is <code>NULL</code>.
</p>
</li>
<li> <p><code>stdout</code>: The standard output of the process while evaluating
</p>
</li>
<li> <p><code>stderr</code>: The standard error of the process while evaluating
the <code>func</code> call.
</p>
</li>
<li> <p><code>error</code>: On error it contains an error object, that contains the
error thrown in the subprocess. Otherwise it is <code>NULL</code>.
</p>
</li>
<li> <p><code>code</code>, <code>message</code>: These fields are used by call internally and
you can ignore them.
</p>
</li></ul>



<hr>
<a id="method-r_session-call"></a>



<h4>Method <code>call()</code></h4>

<p>Starts running a function in the background R session, and
returns immediately. To check if the function is done, call the
<code>poll_process()</code> method.
</p>


<h5>Usage</h5>

<div class="r"><pre>r_session$call(func, args = list(), package = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>func</code></dt><dd><p>Function object to call in the background R process.
Please read the notes for the similar argument of <code><a href="#topic+r">r()</a></code>.</p>
</dd>
<dt><code>args</code></dt><dd><p>Arguments to pass to the function. Must be a list.</p>
</dd>
<dt><code>package</code></dt><dd><p>Whether to keep the environment of <code>func</code> when passing
it to the other package. Possible values are:
</p>

<ul>
<li> <p><code>FALSE</code>: reset the environment to <code>.GlobalEnv</code>. This is the default.
</p>
</li>
<li> <p><code>TRUE</code>: keep the environment as is.
</p>
</li>
<li> <p><code>pkg</code>: set the environment to the <code>pkg</code> package namespace.
</p>
</li></ul>
</dd>
</dl>

</div>


<hr>
<a id="method-r_session-poll_process"></a>



<h4>Method <code>poll_process()</code></h4>

<p>Poll the R session with a timeout. If the session has finished the
computation, it returns with <code>"ready"</code>. If the timeout
is reached, it returns with <code>"timeout"</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>r_session$poll_process(timeout)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>timeout</code></dt><dd><p>Timeout period in milliseconds.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Character string <code>"ready"</code> or <code>"timeout"</code>.
</p>


<hr>
<a id="method-r_session-get_state"></a>



<h4>Method <code>get_state()</code></h4>

<p>Return the state of the R session.
</p>


<h5>Usage</h5>

<div class="r"><pre>r_session$get_state()</pre></div>



<h5>Returns</h5>

<p>Possible values:
</p>

<ul>
<li> <p><code>"starting"</code>: starting up,
</p>
</li>
<li> <p><code>"idle"</code>: ready to compute,
</p>
</li>
<li> <p><code>"busy"</code>: computing right now,
</p>
</li>
<li> <p><code>"finished"</code>: the R process has finished.
</p>
</li></ul>



<hr>
<a id="method-r_session-get_running_time"></a>



<h4>Method <code>get_running_time()</code></h4>

<p>Returns the elapsed time since the R process has started, and the
elapsed time since the current computation has started. The latter
is <code>NA</code> if there is no active computation.
</p>


<h5>Usage</h5>

<div class="r"><pre>r_session$get_running_time()</pre></div>



<h5>Returns</h5>

<p>Named vector of <code>POSIXct</code> objects. The names are <code>"total"</code>
and <code>"current"</code>.
</p>


<hr>
<a id="method-r_session-read"></a>



<h4>Method <code>read()</code></h4>

<p>Reads an event from the child process, if there is one available.
Events might signal that the function call has finished, or they
can be progress report events.
</p>
<p>This is a low level function that you only need to use if you
want to process events (messages) from the R session manually.
</p>


<h5>Usage</h5>

<div class="r"><pre>r_session$read()</pre></div>



<h5>Returns</h5>

<p><code>NULL</code> if no events are available. Otherwise a named list,
which is also a <code>callr_session_result</code> object. The list always has
a <code>code</code> entry which is the type of the event. See also
<code>r_session$public_fields$status</code> for symbolic names of the
event types.
</p>

<ul>
<li> <p><code>200</code>: (<code>DONE</code>) The computation is done, and the event includes
the result, in the same form as for the <code>run()</code> method.
</p>
</li>
<li> <p><code>201</code>: (<code>STARTED</code>) An R session that was in 'starting' state is
ready to go.
</p>
</li>
<li> <p><code>202</code>: (<code>ATTACH_DONE</code>) Used by the <code>attach()</code> method.
</p>
</li>
<li> <p><code>301</code>: (<code>MSG</code>) A message from the subprocess. The message is a
condition object with class <code>callr_message</code>. (It typically has
other classes, e.g. <code>cli_message</code> for output from the cli
package.)
</p>
</li>
<li> <p><code>500</code>: (<code>EXITED</code>) The R session finished cleanly. This means
that the evaluated expression quit R.
</p>
</li>
<li> <p><code>501</code>: (<code>CRASHED</code>) The R session crashed or was killed.
</p>
</li>
<li> <p><code>502</code>: (<code>CLOSED</code>) The R session closed its end of the connection
that callr uses for communication.
</p>
</li></ul>



<hr>
<a id="method-r_session-close"></a>



<h4>Method <code>close()</code></h4>

<p>Terminate the current computation and the R process.
The session object will be in <code>"finished"</code> state after this.
</p>


<h5>Usage</h5>

<div class="r"><pre>r_session$close(grace = 1000)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>grace</code></dt><dd><p>Grace period in milliseconds, to wait for the
subprocess to exit cleanly, after its standard input is closed.
If the process is still running after this period, it will be
killed.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-r_session-traceback"></a>



<h4>Method <code>traceback()</code></h4>

<p>The <code>traceback()</code> method can be used after an error in the R
subprocess. It is equivalent to the <code><a href="base.html#topic+traceback">base::traceback()</a></code> call, in
the subprocess.
</p>
<p>On callr version 3.8.0 and above, you need to set the
<code>callr.traceback</code> option to <code>TRUE</code> (in the main process) to make
the subprocess save the trace on error. This is because saving
the trace can be costly for large objects passed as arguments.
</p>


<h5>Usage</h5>

<div class="r"><pre>r_session$traceback()</pre></div>



<h5>Returns</h5>

<p>The same output as from <code><a href="base.html#topic+traceback">base::traceback()</a></code>
</p>


<hr>
<a id="method-r_session-debug"></a>



<h4>Method <code>debug()</code></h4>

<p>Interactive debugger to inspect the dumped frames in the subprocess,
after an error. See more at <a href="#topic+r_session_debug">r_session_debug</a>.
</p>
<p>On callr version 3.8.0 and above, you need to set the
<code>callr.traceback</code> option to <code>TRUE</code> (in the main process) to make
the subprocess dump frames on error. This is because saving
the frames can be costly for large objects passed as arguments.
</p>


<h5>Usage</h5>

<div class="r"><pre>r_session$debug()</pre></div>


<hr>
<a id="method-r_session-attach"></a>



<h4>Method <code>attach()</code></h4>

<p>Experimental function that provides a REPL
(Read-Eval-Print-Loop) to the subprocess.
</p>


<h5>Usage</h5>

<div class="r"><pre>r_session$attach()</pre></div>


<hr>
<a id="method-r_session-finalize"></a>



<h4>Method <code>finalize()</code></h4>

<p>Finalizer that is called when garbage collecting an <code>r_session</code>
object, to clean up temporary files.
</p>


<h5>Usage</h5>

<div class="r"><pre>r_session$finalize()</pre></div>


<hr>
<a id="method-r_session-print"></a>



<h4>Method <code>print()</code></h4>

<p>Print method for an <code>r_session</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>r_session$print(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>Arguments are not used currently.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-r_session-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>r_session$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
rs &lt;- r_ression$new()

rs$run(function() 1 + 2)

rs$call(function() Sys.sleep(1))
rs$get_state()

rs$poll_process(-1)
rs$get_state()
rs$read()

</code></pre>

<hr>
<h2 id='r_session_debug'>Interactive debugging of persistent R sessions</h2><span id='topic+r_session_debug'></span>

<h3>Description</h3>

<p>The <code>r_session$debug()</code> method is an interactive debugger to inspect
the stack of the background process after an error.
</p>


<h3>Details</h3>

<p>Note that on callr version 3.8.0 and above, you need to set the
<code>callr.traceback</code> option to <code>TRUE</code> (in the main process) to make
the subprocess dump the frames on error. This is because saving
the frames can be costly for large objects passed as arguments.
</p>
<p><code style="white-space: pre;">&#8288;$debug()&#8288;</code> starts a REPL (Read-Eval-Print-Loop), that evaluates R
expressions in the subprocess. It is similar to <code><a href="base.html#topic+browser">browser()</a></code> and
<code><a href="utils.html#topic+debugger">debugger()</a></code> and also has some extra commands:
</p>

<ul>
<li> <p><code>.help</code> prints a short help message.
</p>
</li>
<li> <p><code>.where</code> prints the complete stack trace of the error. (The same as
the <code style="white-space: pre;">&#8288;$traceback()&#8288;</code> method.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;.inspect &lt;n&gt;&#8288;</code> switches the &quot;focus&quot; to frame <code style="white-space: pre;">&#8288;&lt;n&gt;&#8288;</code>. Frame 0 is the
global environment, so <code style="white-space: pre;">&#8288;.inspect 0&#8288;</code> will switch back to that.
</p>
</li></ul>

<p>To exit the debugger, press the usual interrupt key, i.e. <code>CTRL+c</code> or
<code>ESC</code> in some GUIs.
</p>
<p>Here is an example session that uses <code style="white-space: pre;">&#8288;$debug()&#8288;</code> (some output is omitted
for brevity):
</p>
<div class="sourceCode"><pre># ----------------------------------------------------------------------
&gt; rs &lt;- r_session$new()
&gt; rs$run(function() knitr::knit("no-such-file"))
Error in rs_run(self, private, func, args) :
 callr subprocess failed: cannot open the connection

&gt; rs$debug()
Debugging in process 87361, press CTRL+C (ESC) to quit. Commands:
  .where       -- print stack trace
  .inspect &lt;n&gt; -- inspect a frame, 0 resets to .GlobalEnv
  .help        -- print this message
  &lt;cmd&gt;        -- run &lt;cmd&gt; in frame or .GlobalEnv

3: file(con, "r")
2: readLines(input2, encoding = "UTF-8", warn = FALSE)
1: knitr::knit("no-such-file") at #1

RS 87361 &gt; .inspect 1

RS 87361 (frame 1) &gt; ls()
 [1] "encoding"  "envir"     "ext"       "in.file"   "input"     "input.dir"
 [7] "input2"    "ocode"     "oconc"     "oenvir"    "oopts"     "optc"
[13] "optk"      "otangle"   "out.purl"  "output"    "quiet"     "tangle"
[19] "text"

RS 87361 (frame 1) &gt; input
[1] "no-such-file"

RS 87361 (frame 1) &gt; file.exists(input)
[1] FALSE

RS 87361 (frame 1) &gt; # &lt;CTRL + C&gt;
# ----------------------------------------------------------------------
</pre></div>

<hr>
<h2 id='r_session_options'>Create options for an <a href="#topic+r_session">r_session</a> object</h2><span id='topic+r_session_options'></span>

<h3>Description</h3>

<p>Create options for an <a href="#topic+r_session">r_session</a> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>r_session_options(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="r_session_options_+3A_...">...</code></td>
<td>
<p>Options to override, named arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Named list of options.
</p>
<p>The current options are:
</p>

<ul>
<li> <p><code>libpath</code>: Library path for the subprocess. By default the same as the
<em>current</em> library path. I.e. <em>not</em> necessarily the library path of
a fresh R session.)
</p>
</li>
<li> <p><code>repos</code>: <code>repos</code> option for the subprocess. By default the current
value of the main process.
</p>
</li>
<li> <p><code>stdout</code>: Standard output of the sub-process. This can be <code>NULL</code> or
a pipe: <code>"|"</code>. If it is a pipe then the output of the subprocess is
not included in the responses, but you need to poll and read it
manually. This is for experts. Note that this option is not used
for the startup phase that currently always runs with <code>stdout = "|"</code>.
</p>
</li>
<li> <p><code>stderr</code>: Similar to <code>stdout</code>, but for the standard error. Like
<code>stdout</code>, it is not used for the startup phase, which runs with
<code>stderr = "|"</code>.
</p>
</li>
<li> <p><code>error</code>: See 'Error handling' in <code><a href="#topic+r">r()</a></code>.
</p>
</li>
<li> <p><code>cmdargs</code>: See the same argument of <code><a href="#topic+r">r()</a></code>. (Its default might be
different, though.)
</p>
</li>
<li> <p><code>system_profile</code>: See the same argument of <code><a href="#topic+r">r()</a></code>.
</p>
</li>
<li> <p><code>user_profile</code>: See the same argument of <code><a href="#topic+r">r()</a></code>.
</p>
</li>
<li> <p><code>env</code>: See the same argument of <code><a href="#topic+r">r()</a></code>.
</p>
</li>
<li> <p><code>load_hook</code>: <code>NULL</code>, or code (quoted) to run in the sub-process
at start up. (I.e. not for every single <code>run()</code> call.)
</p>
</li>
<li> <p><code>extra</code>: List of extra arguments to pass to <a href="processx.html#topic+process">processx::process</a>.
</p>
</li></ul>

<p>Call <code>r_session_options()</code> to see the default values.
<code>r_session_options()</code> might contain undocumented entries, you cannot
change these.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>r_session_options()
</code></pre>

<hr>
<h2 id='r_vanilla'>Run an R child process, with no configuration</h2><span id='topic+r_vanilla'></span>

<h3>Description</h3>

<p>It tries to mimic a fresh R installation. In particular:
</p>

<ul>
<li><p> No library path setting.
</p>
</li>
<li><p> No CRAN(-like) repository is set.
</p>
</li>
<li><p> The system and user profiles are not run.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>r_vanilla(
  func,
  args = list(),
  libpath = character(),
  repos = c(CRAN = "@CRAN@"),
  cmdargs = "--slave",
  system_profile = FALSE,
  user_profile = FALSE,
  env = character(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="r_vanilla_+3A_func">func</code></td>
<td>
<p>Function object to call in the new R process.
The function should be self-contained and only refer to
other functions and use variables explicitly from other packages
using the <code>::</code> notation. By default the environment of the function
is set to <code>.GlobalEnv</code> before passing it to the child process.
(See the <code>package</code> option if you want to keep the environment.)
Because of this, it is good practice to create an anonymous
function and pass that to <code>callr</code>, instead of passing
a function object from a (base or other) package. In particular
</p>
<div class="sourceCode"><pre>r(.libPaths)
</pre></div>
<p>does not work, because <code>.libPaths</code> is defined in a special
environment, but
</p>
<div class="sourceCode"><pre>r(function() .libPaths())
</pre></div>
<p>works just fine.</p>
</td></tr>
<tr><td><code id="r_vanilla_+3A_args">args</code></td>
<td>
<p>Arguments to pass to the function. Must be a list.</p>
</td></tr>
<tr><td><code id="r_vanilla_+3A_libpath">libpath</code></td>
<td>
<p>The library path.</p>
</td></tr>
<tr><td><code id="r_vanilla_+3A_repos">repos</code></td>
<td>
<p>The <code>repos</code> option. If <code>NULL</code>, then no
<code>repos</code> option is set. This options is only used if
<code>user_profile</code> or <code>system_profile</code> is set <code>FALSE</code>,
as it is set using the system or the user profile.</p>
</td></tr>
<tr><td><code id="r_vanilla_+3A_cmdargs">cmdargs</code></td>
<td>
<p>Command line arguments to pass to the R process.
Note that <code>c("-f", rscript)</code> is appended to this, <code>rscript</code>
is the name of the script file to run. This contains a call to the
supplied function and some error handling code.</p>
</td></tr>
<tr><td><code id="r_vanilla_+3A_system_profile">system_profile</code></td>
<td>
<p>Whether to use the system profile file.</p>
</td></tr>
<tr><td><code id="r_vanilla_+3A_user_profile">user_profile</code></td>
<td>
<p>Whether to use the user's profile file.
If this is <code>"project"</code>, then only the profile from the working
directory is used, but the <code>R_PROFILE_USER</code> environment variable
and the user level profile are not. See also &quot;Security considerations&quot;
below.</p>
</td></tr>
<tr><td><code id="r_vanilla_+3A_env">env</code></td>
<td>
<p>Environment variables to set for the child process.</p>
</td></tr>
<tr><td><code id="r_vanilla_+3A_...">...</code></td>
<td>
<p>Additional arguments are passed to <code><a href="#topic+r">r()</a></code>.</p>
</td></tr>
</table>


<h3>Security considerations</h3>

<p><code>callr</code> makes a copy of the user's <code>.Renviron</code> file and potentially of
the local or user <code>.Rprofile</code>, in the session temporary
directory. Avoid storing sensitive information such as passwords, in
your environment file or your profile, otherwise this information will
get scattered in various files, at least temporarily, until the
subprocess finishes. You can use the keyring package to avoid passwords
in plain files.
</p>


<h3>See Also</h3>

<p>Other callr functions: 
<code><a href="#topic+r_copycat">r_copycat</a>()</code>,
<code><a href="#topic+r">r</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Compare to r()
r(function() .libPaths())
r_vanilla(function() .libPaths())

r(function() getOption("repos"))
r_vanilla(function() getOption("repos"))

</code></pre>

<hr>
<h2 id='rcmd'>Run an <code style="white-space: pre;">&#8288;R CMD&#8288;</code> command</h2><span id='topic+rcmd'></span><span id='topic+rcmd_safe'></span>

<h3>Description</h3>

<p>Run an <code style="white-space: pre;">&#8288;R CMD&#8288;</code> command form within R. This will usually start
another R process, from a shell script.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rcmd(
  cmd,
  cmdargs = character(),
  libpath = .libPaths(),
  repos = default_repos(),
  stdout = NULL,
  stderr = NULL,
  poll_connection = TRUE,
  echo = FALSE,
  show = FALSE,
  callback = NULL,
  block_callback = NULL,
  spinner = show &amp;&amp; interactive(),
  system_profile = FALSE,
  user_profile = "project",
  env = rcmd_safe_env(),
  timeout = Inf,
  wd = ".",
  fail_on_status = FALSE,
  ...
)

rcmd_safe(
  cmd,
  cmdargs = character(),
  libpath = .libPaths(),
  repos = default_repos(),
  stdout = NULL,
  stderr = NULL,
  poll_connection = TRUE,
  echo = FALSE,
  show = FALSE,
  callback = NULL,
  block_callback = NULL,
  spinner = show &amp;&amp; interactive(),
  system_profile = FALSE,
  user_profile = "project",
  env = rcmd_safe_env(),
  timeout = Inf,
  wd = ".",
  fail_on_status = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rcmd_+3A_cmd">cmd</code></td>
<td>
<p>Command to run. See <code>R --help</code> from the command
line for the various commands. In the current version of R (3.2.4)
these are: <code>BATCH</code>, <code>COMPILE</code>, <code>SHLIB</code>, <code>INSTALL</code>, <code>REMOVE</code>, <code>build</code>,
<code>check</code>, <code>LINK</code>, <code>Rprof</code>, <code>Rdconv</code>, <code>Rd2pdf</code>, <code>Rd2txt</code>, <code>Stangle</code>,
<code>Sweave</code>, <code>Rdiff</code>, <code>config</code>, <code>javareconf</code>, <code>rtags</code>.</p>
</td></tr>
<tr><td><code id="rcmd_+3A_cmdargs">cmdargs</code></td>
<td>
<p>Command line arguments.</p>
</td></tr>
<tr><td><code id="rcmd_+3A_libpath">libpath</code></td>
<td>
<p>The library path.</p>
</td></tr>
<tr><td><code id="rcmd_+3A_repos">repos</code></td>
<td>
<p>The <code>repos</code> option. If <code>NULL</code>, then no
<code>repos</code> option is set. This options is only used if
<code>user_profile</code> or <code>system_profile</code> is set <code>FALSE</code>,
as it is set using the system or the user profile.</p>
</td></tr>
<tr><td><code id="rcmd_+3A_stdout">stdout</code></td>
<td>
<p>Optionally a file name to send the standard output to.</p>
</td></tr>
<tr><td><code id="rcmd_+3A_stderr">stderr</code></td>
<td>
<p>Optionally a file name to send the standard error to.
It may be the same as <code>stdout</code>, in which case standard error is
redirected to standard output. It can also be the special string
<code>"2&gt;&amp;1"</code>, in which case standard error will be redirected to standard
output.</p>
</td></tr>
<tr><td><code id="rcmd_+3A_poll_connection">poll_connection</code></td>
<td>
<p>Whether to have a control connection to
the process. This is used to transmit messages from the subprocess
to the parent.</p>
</td></tr>
<tr><td><code id="rcmd_+3A_echo">echo</code></td>
<td>
<p>Whether to echo the complete command run by <code>rcmd</code>.</p>
</td></tr>
<tr><td><code id="rcmd_+3A_show">show</code></td>
<td>
<p>Logical, whether to show the standard output on the screen
while the child process is running. Note that this is independent
of the <code>stdout</code> and <code>stderr</code> arguments. The standard
error is not shown currently.</p>
</td></tr>
<tr><td><code id="rcmd_+3A_callback">callback</code></td>
<td>
<p>A function to call for each line of the standard
output and standard error from the child process. It works together
with the <code>show</code> option; i.e. if <code>show = TRUE</code>, and a
callback is provided, then the output is shown of the screen, and the
callback is also called.</p>
</td></tr>
<tr><td><code id="rcmd_+3A_block_callback">block_callback</code></td>
<td>
<p>A function to call for each block of the standard
output and standard error. This callback is not line oriented, i.e.
multiple lines or half a line can be passed to the callback.</p>
</td></tr>
<tr><td><code id="rcmd_+3A_spinner">spinner</code></td>
<td>
<p>Whether to show a calming spinner on the screen while
the child R session is running. By default it is shown if
<code>show = TRUE</code> and the R session is interactive.</p>
</td></tr>
<tr><td><code id="rcmd_+3A_system_profile">system_profile</code></td>
<td>
<p>Whether to use the system profile file.</p>
</td></tr>
<tr><td><code id="rcmd_+3A_user_profile">user_profile</code></td>
<td>
<p>Whether to use the user's profile file.
If this is <code>"project"</code>, then only the profile from the working
directory is used, but the <code>R_PROFILE_USER</code> environment variable
and the user level profile are not. See also &quot;Security considerations&quot;
below.</p>
</td></tr>
<tr><td><code id="rcmd_+3A_env">env</code></td>
<td>
<p>Environment variables to set for the child process.</p>
</td></tr>
<tr><td><code id="rcmd_+3A_timeout">timeout</code></td>
<td>
<p>Timeout for the function call to finish. It can be a
<a href="base.html#topic+difftime">base::difftime</a> object, or a real number, meaning seconds.
If the process does not finish before the timeout period expires,
then a <code>system_command_timeout_error</code> error is thrown. <code>Inf</code>
means no timeout.</p>
</td></tr>
<tr><td><code id="rcmd_+3A_wd">wd</code></td>
<td>
<p>Working directory to use for running the command. Defaults
to the current working directory.</p>
</td></tr>
<tr><td><code id="rcmd_+3A_fail_on_status">fail_on_status</code></td>
<td>
<p>Whether to throw an R error if the command returns
with a non-zero status code. By default no error is thrown.</p>
</td></tr>
<tr><td><code id="rcmd_+3A_...">...</code></td>
<td>
<p>Extra arguments are passed to <code><a href="processx.html#topic+run">processx::run()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Starting from <code>callr</code> 2.0.0, <code>rcmd()</code> has safer defaults, the same as
the <code>rcmd_safe()</code> default values. Use <code><a href="#topic+rcmd_copycat">rcmd_copycat()</a></code> for the old
defaults.
</p>


<h3>Value</h3>

<p>A list with the command line <code style="white-space: pre;">&#8288;$command&#8288;</code>),
standard output (<code style="white-space: pre;">&#8288;$stdout&#8288;</code>), standard error (<code>stderr</code>),
exit status (<code style="white-space: pre;">&#8288;$status&#8288;</code>) of the external <code style="white-space: pre;">&#8288;R CMD&#8288;</code> command, and
whether a timeout was reached (<code style="white-space: pre;">&#8288;$timeout&#8288;</code>).
</p>


<h3>Security considerations</h3>

<p><code>callr</code> makes a copy of the user's <code>.Renviron</code> file and potentially of
the local or user <code>.Rprofile</code>, in the session temporary
directory. Avoid storing sensitive information such as passwords, in
your environment file or your profile, otherwise this information will
get scattered in various files, at least temporarily, until the
subprocess finishes. You can use the keyring package to avoid passwords
in plain files.
</p>


<h3>See Also</h3>

<p>Other R CMD commands: 
<code><a href="#topic+rcmd_bg">rcmd_bg</a>()</code>,
<code><a href="#topic+rcmd_copycat">rcmd_copycat</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
rcmd("config", "CC")

</code></pre>

<hr>
<h2 id='rcmd_bg'>Run an <code style="white-space: pre;">&#8288;R CMD&#8288;</code> command in the background</h2><span id='topic+rcmd_bg'></span>

<h3>Description</h3>

<p>The child process is started in the background, and the function
return immediately.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rcmd_bg(
  cmd,
  cmdargs = character(),
  libpath = .libPaths(),
  stdout = "|",
  stderr = "|",
  poll_connection = TRUE,
  repos = default_repos(),
  system_profile = FALSE,
  user_profile = "project",
  env = rcmd_safe_env(),
  wd = ".",
  supervise = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rcmd_bg_+3A_cmd">cmd</code></td>
<td>
<p>Command to run. See <code>R --help</code> from the command
line for the various commands. In the current version of R (3.2.4)
these are: <code>BATCH</code>, <code>COMPILE</code>, <code>SHLIB</code>, <code>INSTALL</code>, <code>REMOVE</code>, <code>build</code>,
<code>check</code>, <code>LINK</code>, <code>Rprof</code>, <code>Rdconv</code>, <code>Rd2pdf</code>, <code>Rd2txt</code>, <code>Stangle</code>,
<code>Sweave</code>, <code>Rdiff</code>, <code>config</code>, <code>javareconf</code>, <code>rtags</code>.</p>
</td></tr>
<tr><td><code id="rcmd_bg_+3A_cmdargs">cmdargs</code></td>
<td>
<p>Command line arguments.</p>
</td></tr>
<tr><td><code id="rcmd_bg_+3A_libpath">libpath</code></td>
<td>
<p>The library path.</p>
</td></tr>
<tr><td><code id="rcmd_bg_+3A_stdout">stdout</code></td>
<td>
<p>Optionally a file name to send the standard output to.</p>
</td></tr>
<tr><td><code id="rcmd_bg_+3A_stderr">stderr</code></td>
<td>
<p>Optionally a file name to send the standard error to.
It may be the same as <code>stdout</code>, in which case standard error is
redirected to standard output. It can also be the special string
<code>"2&gt;&amp;1"</code>, in which case standard error will be redirected to standard
output.</p>
</td></tr>
<tr><td><code id="rcmd_bg_+3A_poll_connection">poll_connection</code></td>
<td>
<p>Whether to have a control connection to
the process. This is used to transmit messages from the subprocess
to the parent.</p>
</td></tr>
<tr><td><code id="rcmd_bg_+3A_repos">repos</code></td>
<td>
<p>The <code>repos</code> option. If <code>NULL</code>, then no
<code>repos</code> option is set. This options is only used if
<code>user_profile</code> or <code>system_profile</code> is set <code>FALSE</code>,
as it is set using the system or the user profile.</p>
</td></tr>
<tr><td><code id="rcmd_bg_+3A_system_profile">system_profile</code></td>
<td>
<p>Whether to use the system profile file.</p>
</td></tr>
<tr><td><code id="rcmd_bg_+3A_user_profile">user_profile</code></td>
<td>
<p>Whether to use the user's profile file.
If this is <code>"project"</code>, then only the profile from the working
directory is used, but the <code>R_PROFILE_USER</code> environment variable
and the user level profile are not. See also &quot;Security considerations&quot;
below.</p>
</td></tr>
<tr><td><code id="rcmd_bg_+3A_env">env</code></td>
<td>
<p>Environment variables to set for the child process.</p>
</td></tr>
<tr><td><code id="rcmd_bg_+3A_wd">wd</code></td>
<td>
<p>Working directory to use for running the command. Defaults
to the current working directory.</p>
</td></tr>
<tr><td><code id="rcmd_bg_+3A_supervise">supervise</code></td>
<td>
<p>Whether to register the process with a supervisor. If <code>TRUE</code>,
the supervisor will ensure that the process is killed when the R process
exits.</p>
</td></tr>
<tr><td><code id="rcmd_bg_+3A_...">...</code></td>
<td>
<p>Extra arguments are passed to the <a href="processx.html#topic+process">processx::process</a>
constructor.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>It returns a <a href="#topic+process">process</a> object.
</p>


<h3>Security considerations</h3>

<p><code>callr</code> makes a copy of the user's <code>.Renviron</code> file and potentially of
the local or user <code>.Rprofile</code>, in the session temporary
directory. Avoid storing sensitive information such as passwords, in
your environment file or your profile, otherwise this information will
get scattered in various files, at least temporarily, until the
subprocess finishes. You can use the keyring package to avoid passwords
in plain files.
</p>


<h3>See Also</h3>

<p>Other R CMD commands: 
<code><a href="#topic+rcmd_copycat">rcmd_copycat</a>()</code>,
<code><a href="#topic+rcmd">rcmd</a>()</code>
</p>

<hr>
<h2 id='rcmd_copycat'>Call and <code style="white-space: pre;">&#8288;R CMD&#8288;</code> command, while mimicking the current R session</h2><span id='topic+rcmd_copycat'></span>

<h3>Description</h3>

<p>This function is similar to <code><a href="#topic+rcmd">rcmd()</a></code>, but it has slightly different
defaults:
</p>

<ul>
<li><p> The <code>repos</code> options is unchanged.
</p>
</li>
<li><p> No extra environment variables are defined.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>rcmd_copycat(
  cmd,
  cmdargs = character(),
  libpath = .libPaths(),
  repos = getOption("repos"),
  env = character(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rcmd_copycat_+3A_cmd">cmd</code></td>
<td>
<p>Command to run. See <code>R --help</code> from the command
line for the various commands. In the current version of R (3.2.4)
these are: <code>BATCH</code>, <code>COMPILE</code>, <code>SHLIB</code>, <code>INSTALL</code>, <code>REMOVE</code>, <code>build</code>,
<code>check</code>, <code>LINK</code>, <code>Rprof</code>, <code>Rdconv</code>, <code>Rd2pdf</code>, <code>Rd2txt</code>, <code>Stangle</code>,
<code>Sweave</code>, <code>Rdiff</code>, <code>config</code>, <code>javareconf</code>, <code>rtags</code>.</p>
</td></tr>
<tr><td><code id="rcmd_copycat_+3A_cmdargs">cmdargs</code></td>
<td>
<p>Command line arguments.</p>
</td></tr>
<tr><td><code id="rcmd_copycat_+3A_libpath">libpath</code></td>
<td>
<p>The library path.</p>
</td></tr>
<tr><td><code id="rcmd_copycat_+3A_repos">repos</code></td>
<td>
<p>The <code>repos</code> option. If <code>NULL</code>, then no
<code>repos</code> option is set. This options is only used if
<code>user_profile</code> or <code>system_profile</code> is set <code>FALSE</code>,
as it is set using the system or the user profile.</p>
</td></tr>
<tr><td><code id="rcmd_copycat_+3A_env">env</code></td>
<td>
<p>Environment variables to set for the child process.</p>
</td></tr>
<tr><td><code id="rcmd_copycat_+3A_...">...</code></td>
<td>
<p>Additional arguments are passed to <code><a href="#topic+rcmd">rcmd()</a></code>.</p>
</td></tr>
</table>


<h3>Security considerations</h3>

<p><code>callr</code> makes a copy of the user's <code>.Renviron</code> file and potentially of
the local or user <code>.Rprofile</code>, in the session temporary
directory. Avoid storing sensitive information such as passwords, in
your environment file or your profile, otherwise this information will
get scattered in various files, at least temporarily, until the
subprocess finishes. You can use the keyring package to avoid passwords
in plain files.
</p>


<h3>See Also</h3>

<p>Other R CMD commands: 
<code><a href="#topic+rcmd_bg">rcmd_bg</a>()</code>,
<code><a href="#topic+rcmd">rcmd</a>()</code>
</p>

<hr>
<h2 id='rcmd_process'>External <code style="white-space: pre;">&#8288;R CMD&#8288;</code> Process</h2><span id='topic+rcmd_process'></span>

<h3>Description</h3>

<p>An <code style="white-space: pre;">&#8288;R CMD *&#8288;</code> command that runs in the background. This is an R6 class
that extends the <a href="processx.html#topic+process">processx::process</a> class.
</p>


<h3>Super class</h3>

<p><code><a href="processx.html#topic+process">processx::process</a></code> -&gt; <code>rcmd_process</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-rcmd_process-new"><code>rcmd_process$new()</code></a>
</p>
</li>
<li> <p><a href="#method-rcmd_process-finalize"><code>rcmd_process$finalize()</code></a>
</p>
</li>
<li> <p><a href="#method-rcmd_process-clone"><code>rcmd_process$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="as_ps_handle"><a href='../../processx/html/process.html#method-process-as_ps_handle'><code>processx::process$as_ps_handle()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="format"><a href='../../processx/html/process.html#method-process-format'><code>processx::process$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_cmdline"><a href='../../processx/html/process.html#method-process-get_cmdline'><code>processx::process$get_cmdline()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_cpu_times"><a href='../../processx/html/process.html#method-process-get_cpu_times'><code>processx::process$get_cpu_times()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_error_connection"><a href='../../processx/html/process.html#method-process-get_error_connection'><code>processx::process$get_error_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_error_file"><a href='../../processx/html/process.html#method-process-get_error_file'><code>processx::process$get_error_file()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_exe"><a href='../../processx/html/process.html#method-process-get_exe'><code>processx::process$get_exe()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_exit_status"><a href='../../processx/html/process.html#method-process-get_exit_status'><code>processx::process$get_exit_status()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_input_connection"><a href='../../processx/html/process.html#method-process-get_input_connection'><code>processx::process$get_input_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_input_file"><a href='../../processx/html/process.html#method-process-get_input_file'><code>processx::process$get_input_file()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_memory_info"><a href='../../processx/html/process.html#method-process-get_memory_info'><code>processx::process$get_memory_info()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_name"><a href='../../processx/html/process.html#method-process-get_name'><code>processx::process$get_name()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_output_connection"><a href='../../processx/html/process.html#method-process-get_output_connection'><code>processx::process$get_output_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_output_file"><a href='../../processx/html/process.html#method-process-get_output_file'><code>processx::process$get_output_file()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_pid"><a href='../../processx/html/process.html#method-process-get_pid'><code>processx::process$get_pid()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_poll_connection"><a href='../../processx/html/process.html#method-process-get_poll_connection'><code>processx::process$get_poll_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_result"><a href='../../processx/html/process.html#method-process-get_result'><code>processx::process$get_result()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_start_time"><a href='../../processx/html/process.html#method-process-get_start_time'><code>processx::process$get_start_time()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_status"><a href='../../processx/html/process.html#method-process-get_status'><code>processx::process$get_status()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_username"><a href='../../processx/html/process.html#method-process-get_username'><code>processx::process$get_username()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_wd"><a href='../../processx/html/process.html#method-process-get_wd'><code>processx::process$get_wd()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="has_error_connection"><a href='../../processx/html/process.html#method-process-has_error_connection'><code>processx::process$has_error_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="has_input_connection"><a href='../../processx/html/process.html#method-process-has_input_connection'><code>processx::process$has_input_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="has_output_connection"><a href='../../processx/html/process.html#method-process-has_output_connection'><code>processx::process$has_output_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="has_poll_connection"><a href='../../processx/html/process.html#method-process-has_poll_connection'><code>processx::process$has_poll_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="interrupt"><a href='../../processx/html/process.html#method-process-interrupt'><code>processx::process$interrupt()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="is_alive"><a href='../../processx/html/process.html#method-process-is_alive'><code>processx::process$is_alive()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="is_incomplete_error"><a href='../../processx/html/process.html#method-process-is_incomplete_error'><code>processx::process$is_incomplete_error()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="is_incomplete_output"><a href='../../processx/html/process.html#method-process-is_incomplete_output'><code>processx::process$is_incomplete_output()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="is_supervised"><a href='../../processx/html/process.html#method-process-is_supervised'><code>processx::process$is_supervised()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="kill"><a href='../../processx/html/process.html#method-process-kill'><code>processx::process$kill()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="kill_tree"><a href='../../processx/html/process.html#method-process-kill_tree'><code>processx::process$kill_tree()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="poll_io"><a href='../../processx/html/process.html#method-process-poll_io'><code>processx::process$poll_io()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="print"><a href='../../processx/html/process.html#method-process-print'><code>processx::process$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_all_error"><a href='../../processx/html/process.html#method-process-read_all_error'><code>processx::process$read_all_error()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_all_error_lines"><a href='../../processx/html/process.html#method-process-read_all_error_lines'><code>processx::process$read_all_error_lines()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_all_output"><a href='../../processx/html/process.html#method-process-read_all_output'><code>processx::process$read_all_output()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_all_output_lines"><a href='../../processx/html/process.html#method-process-read_all_output_lines'><code>processx::process$read_all_output_lines()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_error"><a href='../../processx/html/process.html#method-process-read_error'><code>processx::process$read_error()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_error_lines"><a href='../../processx/html/process.html#method-process-read_error_lines'><code>processx::process$read_error_lines()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_output"><a href='../../processx/html/process.html#method-process-read_output'><code>processx::process$read_output()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_output_lines"><a href='../../processx/html/process.html#method-process-read_output_lines'><code>processx::process$read_output_lines()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="resume"><a href='../../processx/html/process.html#method-process-resume'><code>processx::process$resume()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="signal"><a href='../../processx/html/process.html#method-process-signal'><code>processx::process$signal()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="supervise"><a href='../../processx/html/process.html#method-process-supervise'><code>processx::process$supervise()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="suspend"><a href='../../processx/html/process.html#method-process-suspend'><code>processx::process$suspend()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="wait"><a href='../../processx/html/process.html#method-process-wait'><code>processx::process$wait()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="write_input"><a href='../../processx/html/process.html#method-process-write_input'><code>processx::process$write_input()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-rcmd_process-new"></a>



<h4>Method <code>new()</code></h4>

<p>Start an <code style="white-space: pre;">&#8288;R CMD&#8288;</code> process.
</p>


<h5>Usage</h5>

<div class="r"><pre>rcmd_process$new(options)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>options</code></dt><dd><p>A list of options created via
<code><a href="#topic+rcmd_process_options">rcmd_process_options()</a></code>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A new <code>rcmd_process</code> object.
</p>


<hr>
<a id="method-rcmd_process-finalize"></a>



<h4>Method <code>finalize()</code></h4>

<p>Clean up the temporary files created for an <code style="white-space: pre;">&#8288;R CMD&#8288;</code> process.
</p>


<h5>Usage</h5>

<div class="r"><pre>rcmd_process$finalize()</pre></div>


<hr>
<a id="method-rcmd_process-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>rcmd_process$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
options &lt;- rcmd_process_options(cmd = "config", cmdargs = "CC")
rp &lt;- rcmd_process$new(options)
rp$wait()
rp$read_output_lines()

</code></pre>

<hr>
<h2 id='rcmd_process_options'>Create options for an <a href="#topic+rcmd_process">rcmd_process</a> object</h2><span id='topic+rcmd_process_options'></span>

<h3>Description</h3>

<p>Create options for an <a href="#topic+rcmd_process">rcmd_process</a> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rcmd_process_options(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rcmd_process_options_+3A_...">...</code></td>
<td>
<p>Options to override, named arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of options.
</p>
<p><code>rcmd_process_options()</code> creates a set of options to initialize a new
object from the <code>rcmd_process</code> class. Its arguments must be named, the
names are used as option names. The options correspond to (some of)
the arguments of the <code><a href="#topic+rcmd">rcmd()</a></code> function. At least the <code>cmd</code> option must
be specified, to select the <code style="white-space: pre;">&#8288;R CMD&#8288;</code> subcommand to run. Typically
<code>cmdargs</code> is specified as well, to supply more arguments to <code style="white-space: pre;">&#8288;R CMD&#8288;</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## List all options and their default values:
rcmd_process_options()
</code></pre>

<hr>
<h2 id='rcmd_safe_env'><code>rcmd_safe_env</code> returns a set of environment variables that are
more appropriate for <code><a href="#topic+rcmd_safe">rcmd_safe()</a></code>. It is exported to allow manipulating
these variables (e.g. add an extra one), before passing them to the
<code><a href="#topic+rcmd">rcmd()</a></code> functions.</h2><span id='topic+rcmd_safe_env'></span>

<h3>Description</h3>

<p>It currently has the following variables:
</p>

<ul>
<li> <p><code>CYGWIN="nodosfilewarning"</code>: On Windows, do not warn about MS-DOS
style file names.
</p>
</li>
<li> <p><code>R_TESTS=""</code> This variable is set by <code style="white-space: pre;">&#8288;R CMD check&#8288;</code>, and makes the
child R process load a startup file at startup, from the current
working directory, that is assumed to be the <code style="white-space: pre;">&#8288;/test&#8288;</code> directory
of the package being checked. If the current working directory is
changed to something else (as it typically is by <code>testthat</code>, then R
cannot start. Setting it to the empty string ensures that <code>callr</code> can
be used from unit tests.
</p>
</li>
<li> <p><code>R_BROWSER="false"</code>: typically we don't want to start up a browser
from the child R process.
</p>
</li>
<li> <p><code>R_PDFVIEWER="false"</code>: similarly for the PDF viewer.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>rcmd_safe_env()
</code></pre>


<h3>Details</h3>

<p>Note that <code>callr</code> also sets the <code>R_ENVIRON</code>, <code>R_ENVIRON_USER</code>,
<code>R_PROFILE</code> and <code>R_PROFILE_USER</code> environment variables
appropriately, unless these are set by the user in the <code>env</code> argument
of the <code>r</code>, etc. calls.
</p>


<h3>Value</h3>

<p>A named character vector of environment variables.
</p>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+run'></span><span id='topic+process'></span><span id='topic+poll'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>processx</dt><dd><p><code><a href="processx.html#topic+poll">poll</a></code>, <code><a href="processx.html#topic+process">process</a></code>, <code><a href="processx.html#topic+run">run</a></code></p>
</dd>
</dl>

<hr>
<h2 id='rscript'>Run an R script</h2><span id='topic+rscript'></span>

<h3>Description</h3>

<p>It uses the <code>Rscript</code> program corresponding to the current R version,
to run the script. It streams <code>stdout</code> and <code>stderr</code> of the process.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rscript(
  script,
  cmdargs = character(),
  libpath = .libPaths(),
  repos = default_repos(),
  stdout = NULL,
  stderr = NULL,
  poll_connection = TRUE,
  echo = FALSE,
  show = TRUE,
  callback = NULL,
  block_callback = NULL,
  spinner = FALSE,
  system_profile = FALSE,
  user_profile = "project",
  env = rcmd_safe_env(),
  timeout = Inf,
  wd = ".",
  fail_on_status = TRUE,
  color = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rscript_+3A_script">script</code></td>
<td>
<p>Path of the script to run.</p>
</td></tr>
<tr><td><code id="rscript_+3A_cmdargs">cmdargs</code></td>
<td>
<p>Command line arguments.</p>
</td></tr>
<tr><td><code id="rscript_+3A_libpath">libpath</code></td>
<td>
<p>The library path.</p>
</td></tr>
<tr><td><code id="rscript_+3A_repos">repos</code></td>
<td>
<p>The <code>repos</code> option. If <code>NULL</code>, then no
<code>repos</code> option is set. This options is only used if
<code>user_profile</code> or <code>system_profile</code> is set <code>FALSE</code>,
as it is set using the system or the user profile.</p>
</td></tr>
<tr><td><code id="rscript_+3A_stdout">stdout</code></td>
<td>
<p>Optionally a file name to send the standard output to.</p>
</td></tr>
<tr><td><code id="rscript_+3A_stderr">stderr</code></td>
<td>
<p>Optionally a file name to send the standard error to.
It may be the same as <code>stdout</code>, in which case standard error is
redirected to standard output. It can also be the special string
<code>"2&gt;&amp;1"</code>, in which case standard error will be redirected to standard
output.</p>
</td></tr>
<tr><td><code id="rscript_+3A_poll_connection">poll_connection</code></td>
<td>
<p>Whether to have a control connection to
the process. This is used to transmit messages from the subprocess
to the parent.</p>
</td></tr>
<tr><td><code id="rscript_+3A_echo">echo</code></td>
<td>
<p>Whether to echo the complete command run by <code>rcmd</code>.</p>
</td></tr>
<tr><td><code id="rscript_+3A_show">show</code></td>
<td>
<p>Logical, whether to show the standard output on the screen
while the child process is running. Note that this is independent
of the <code>stdout</code> and <code>stderr</code> arguments. The standard
error is not shown currently.</p>
</td></tr>
<tr><td><code id="rscript_+3A_callback">callback</code></td>
<td>
<p>A function to call for each line of the standard
output and standard error from the child process. It works together
with the <code>show</code> option; i.e. if <code>show = TRUE</code>, and a
callback is provided, then the output is shown of the screen, and the
callback is also called.</p>
</td></tr>
<tr><td><code id="rscript_+3A_block_callback">block_callback</code></td>
<td>
<p>A function to call for each block of the standard
output and standard error. This callback is not line oriented, i.e.
multiple lines or half a line can be passed to the callback.</p>
</td></tr>
<tr><td><code id="rscript_+3A_spinner">spinner</code></td>
<td>
<p>Whether to show a calming spinner on the screen while
the child R session is running. By default it is shown if
<code>show = TRUE</code> and the R session is interactive.</p>
</td></tr>
<tr><td><code id="rscript_+3A_system_profile">system_profile</code></td>
<td>
<p>Whether to use the system profile file.</p>
</td></tr>
<tr><td><code id="rscript_+3A_user_profile">user_profile</code></td>
<td>
<p>Whether to use the user's profile file.
If this is <code>"project"</code>, then only the profile from the working
directory is used, but the <code>R_PROFILE_USER</code> environment variable
and the user level profile are not. See also &quot;Security considerations&quot;
below.</p>
</td></tr>
<tr><td><code id="rscript_+3A_env">env</code></td>
<td>
<p>Environment variables to set for the child process.</p>
</td></tr>
<tr><td><code id="rscript_+3A_timeout">timeout</code></td>
<td>
<p>Timeout for the function call to finish. It can be a
<a href="base.html#topic+difftime">base::difftime</a> object, or a real number, meaning seconds.
If the process does not finish before the timeout period expires,
then a <code>system_command_timeout_error</code> error is thrown. <code>Inf</code>
means no timeout.</p>
</td></tr>
<tr><td><code id="rscript_+3A_wd">wd</code></td>
<td>
<p>Working directory to use for running the command. Defaults
to the current working directory.</p>
</td></tr>
<tr><td><code id="rscript_+3A_fail_on_status">fail_on_status</code></td>
<td>
<p>Whether to throw an R error if the command returns
with a non-zero status code. By default no error is thrown.</p>
</td></tr>
<tr><td><code id="rscript_+3A_color">color</code></td>
<td>
<p>Whether to use terminal colors in the child process,
assuming they are active in the parent process.</p>
</td></tr>
<tr><td><code id="rscript_+3A_...">...</code></td>
<td>
<p>Extra arguments are passed to <code><a href="processx.html#topic+run">processx::run()</a></code>.</p>
</td></tr>
</table>


<h3>Security considerations</h3>

<p><code>callr</code> makes a copy of the user's <code>.Renviron</code> file and potentially of
the local or user <code>.Rprofile</code>, in the session temporary
directory. Avoid storing sensitive information such as passwords, in
your environment file or your profile, otherwise this information will
get scattered in various files, at least temporarily, until the
subprocess finishes. You can use the keyring package to avoid passwords
in plain files.
</p>

<hr>
<h2 id='rscript_process'>External <code>Rscript</code> process</h2><span id='topic+rscript_process'></span>

<h3>Description</h3>

<p>An <code style="white-space: pre;">&#8288;Rscript script.R&#8288;</code> command that runs in the background. This is an
R6 class that extends the <a href="processx.html#topic+process">processx::process</a> class.
</p>


<h3>Super class</h3>

<p><code><a href="processx.html#topic+process">processx::process</a></code> -&gt; <code>rscript_process</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-rscript_process-new"><code>rscript_process$new()</code></a>
</p>
</li>
<li> <p><a href="#method-rscript_process-finalize"><code>rscript_process$finalize()</code></a>
</p>
</li>
<li> <p><a href="#method-rscript_process-clone"><code>rscript_process$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="as_ps_handle"><a href='../../processx/html/process.html#method-process-as_ps_handle'><code>processx::process$as_ps_handle()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="format"><a href='../../processx/html/process.html#method-process-format'><code>processx::process$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_cmdline"><a href='../../processx/html/process.html#method-process-get_cmdline'><code>processx::process$get_cmdline()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_cpu_times"><a href='../../processx/html/process.html#method-process-get_cpu_times'><code>processx::process$get_cpu_times()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_error_connection"><a href='../../processx/html/process.html#method-process-get_error_connection'><code>processx::process$get_error_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_error_file"><a href='../../processx/html/process.html#method-process-get_error_file'><code>processx::process$get_error_file()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_exe"><a href='../../processx/html/process.html#method-process-get_exe'><code>processx::process$get_exe()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_exit_status"><a href='../../processx/html/process.html#method-process-get_exit_status'><code>processx::process$get_exit_status()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_input_connection"><a href='../../processx/html/process.html#method-process-get_input_connection'><code>processx::process$get_input_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_input_file"><a href='../../processx/html/process.html#method-process-get_input_file'><code>processx::process$get_input_file()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_memory_info"><a href='../../processx/html/process.html#method-process-get_memory_info'><code>processx::process$get_memory_info()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_name"><a href='../../processx/html/process.html#method-process-get_name'><code>processx::process$get_name()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_output_connection"><a href='../../processx/html/process.html#method-process-get_output_connection'><code>processx::process$get_output_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_output_file"><a href='../../processx/html/process.html#method-process-get_output_file'><code>processx::process$get_output_file()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_pid"><a href='../../processx/html/process.html#method-process-get_pid'><code>processx::process$get_pid()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_poll_connection"><a href='../../processx/html/process.html#method-process-get_poll_connection'><code>processx::process$get_poll_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_result"><a href='../../processx/html/process.html#method-process-get_result'><code>processx::process$get_result()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_start_time"><a href='../../processx/html/process.html#method-process-get_start_time'><code>processx::process$get_start_time()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_status"><a href='../../processx/html/process.html#method-process-get_status'><code>processx::process$get_status()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_username"><a href='../../processx/html/process.html#method-process-get_username'><code>processx::process$get_username()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="get_wd"><a href='../../processx/html/process.html#method-process-get_wd'><code>processx::process$get_wd()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="has_error_connection"><a href='../../processx/html/process.html#method-process-has_error_connection'><code>processx::process$has_error_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="has_input_connection"><a href='../../processx/html/process.html#method-process-has_input_connection'><code>processx::process$has_input_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="has_output_connection"><a href='../../processx/html/process.html#method-process-has_output_connection'><code>processx::process$has_output_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="has_poll_connection"><a href='../../processx/html/process.html#method-process-has_poll_connection'><code>processx::process$has_poll_connection()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="interrupt"><a href='../../processx/html/process.html#method-process-interrupt'><code>processx::process$interrupt()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="is_alive"><a href='../../processx/html/process.html#method-process-is_alive'><code>processx::process$is_alive()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="is_incomplete_error"><a href='../../processx/html/process.html#method-process-is_incomplete_error'><code>processx::process$is_incomplete_error()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="is_incomplete_output"><a href='../../processx/html/process.html#method-process-is_incomplete_output'><code>processx::process$is_incomplete_output()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="is_supervised"><a href='../../processx/html/process.html#method-process-is_supervised'><code>processx::process$is_supervised()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="kill"><a href='../../processx/html/process.html#method-process-kill'><code>processx::process$kill()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="kill_tree"><a href='../../processx/html/process.html#method-process-kill_tree'><code>processx::process$kill_tree()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="poll_io"><a href='../../processx/html/process.html#method-process-poll_io'><code>processx::process$poll_io()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="print"><a href='../../processx/html/process.html#method-process-print'><code>processx::process$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_all_error"><a href='../../processx/html/process.html#method-process-read_all_error'><code>processx::process$read_all_error()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_all_error_lines"><a href='../../processx/html/process.html#method-process-read_all_error_lines'><code>processx::process$read_all_error_lines()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_all_output"><a href='../../processx/html/process.html#method-process-read_all_output'><code>processx::process$read_all_output()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_all_output_lines"><a href='../../processx/html/process.html#method-process-read_all_output_lines'><code>processx::process$read_all_output_lines()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_error"><a href='../../processx/html/process.html#method-process-read_error'><code>processx::process$read_error()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_error_lines"><a href='../../processx/html/process.html#method-process-read_error_lines'><code>processx::process$read_error_lines()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_output"><a href='../../processx/html/process.html#method-process-read_output'><code>processx::process$read_output()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="read_output_lines"><a href='../../processx/html/process.html#method-process-read_output_lines'><code>processx::process$read_output_lines()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="resume"><a href='../../processx/html/process.html#method-process-resume'><code>processx::process$resume()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="signal"><a href='../../processx/html/process.html#method-process-signal'><code>processx::process$signal()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="supervise"><a href='../../processx/html/process.html#method-process-supervise'><code>processx::process$supervise()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="suspend"><a href='../../processx/html/process.html#method-process-suspend'><code>processx::process$suspend()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="wait"><a href='../../processx/html/process.html#method-process-wait'><code>processx::process$wait()</code></a></span></li>
<li><span class="pkg-link" data-pkg="processx" data-topic="process" data-id="write_input"><a href='../../processx/html/process.html#method-process-write_input'><code>processx::process$write_input()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-rscript_process-new"></a>



<h4>Method <code>new()</code></h4>

<p>Create a new <code>Rscript</code> process.
</p>


<h5>Usage</h5>

<div class="r"><pre>rscript_process$new(options)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>options</code></dt><dd><p>A list of options created via
<code><a href="#topic+rscript_process_options">rscript_process_options()</a></code>.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-rscript_process-finalize"></a>



<h4>Method <code>finalize()</code></h4>

<p>Clean up after an <code>Rsctipt</code> process, remove
temporary files.
</p>


<h5>Usage</h5>

<div class="r"><pre>rscript_process$finalize()</pre></div>


<hr>
<a id="method-rscript_process-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>rscript_process$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
options &lt;- rscript_process_options(script = "script.R")
rp &lt;- rscript_process$new(options)
rp$wait()
rp$read_output_lines()

</code></pre>

<hr>
<h2 id='rscript_process_options'>Create options for an <a href="#topic+rscript_process">rscript_process</a> object</h2><span id='topic+rscript_process_options'></span>

<h3>Description</h3>

<p>Create options for an <a href="#topic+rscript_process">rscript_process</a> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rscript_process_options(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rscript_process_options_+3A_...">...</code></td>
<td>
<p>Options to override, named arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of options.
</p>
<p><code>rscript_process_options()</code> creates a set of options to initialize a new
object from the <code>rscript_process</code> class. Its arguments must be named,
the names are used as option names. The options correspond to (some of)
the arguments of the <code><a href="#topic+rscript">rscript()</a></code> function. At least the <code>script</code> option
must be specified, the script file to run.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## List all options and their default values:
rscript_process_options()
</code></pre>

<hr>
<h2 id='supported_archs'>Find supported sub-architectures for the current R installation</h2><span id='topic+supported_archs'></span>

<h3>Description</h3>

<p>This function uses a heuristic, which might fail, so its result
should be taken as a best guess.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>supported_archs()
</code></pre>


<h3>Value</h3>

<p>Character vector of supported architectures. If the
current R build is not a multi-architecture build, then an empty
string scalar is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>supported_archs()
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
