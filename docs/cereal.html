<!DOCTYPE html><html><head><title>Help for package cereal</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {cereal}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#cereal_decode'><p>Convert a JSON-serialized prototype to a vctrs prototype</p></a></li>
<li><a href='#cereal_details'><p>Find needed details for vctrs prototype</p></a></li>
<li><a href='#cereal_encode'><p>Encode a vector as JSON</p></a></li>
<li><a href='#cereal_to_json'><p>Serialize and deserialize the prototype of a data frame to JSON</p></a></li>
<li><a href='#cereal-package'><p>cereal: Serialize 'vctrs' Objects to 'JSON'</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Serialize 'vctrs' Objects to 'JSON'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>The 'vctrs' package provides a concept of vector prototype
    that can be especially useful when deploying models and code.  Serialize 
    these object prototypes to 'JSON' so they can be used to check and coerce 
    data in production systems, and deserialize 'JSON' back to the correct 
    object prototypes.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://r-lib.github.io/cereal/">https://r-lib.github.io/cereal/</a>, <a href="https://github.com/r-lib/cereal/">https://github.com/r-lib/cereal/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/r-lib/cereal/issues">https://github.com/r-lib/cereal/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6)</td>
</tr>
<tr>
<td>Imports:</td>
<td>jsonlite, rlang, tibble, vctrs</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, testthat (&ge; 3.0.0), withr</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>tidyverse/tidytemplate</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-06-08 19:18:13 UTC; juliasilge</td>
</tr>
<tr>
<td>Author:</td>
<td>Julia Silge <a href="https://orcid.org/0000-0002-3671-836X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [cre,
    aut],
  Davis Vaughan [aut],
  Posit Software, PBC [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Julia Silge &lt;julia.silge@posit.co&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-06-09 14:00:26 UTC</td>
</tr>
</table>
<hr>
<h2 id='cereal_decode'>Convert a JSON-serialized prototype to a vctrs prototype</h2><span id='topic+cereal_decode'></span>

<h3>Description</h3>

<p>Create a <code><a href="vctrs.html#topic+vec_ptype">vctrs::vec_ptype()</a></code> from a JSON-serialized prototype created with
<code><a href="#topic+cereal_encode">cereal_encode()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cereal_decode(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cereal_decode_+3A_x">x</code></td>
<td>
<p>An object with class &quot;cereal_*&quot;, such as &quot;cereal_integer&quot; or
&quot;cereal_factor&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of zero length, such as <code><a href="base.html#topic+integer">integer()</a></code> or <code><a href="vctrs.html#topic+new_factor">vctrs::new_factor()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cereal_decode(structure(list(), class = "cereal_integer"))
cereal_decode(structure(list(), class = "cereal_Date"))

</code></pre>

<hr>
<h2 id='cereal_details'>Find needed details for vctrs prototype</h2><span id='topic+cereal_details'></span>

<h3>Description</h3>

<p>Find needed details for vctrs prototype
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cereal_details(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cereal_details_+3A_x">x</code></td>
<td>
<p>A vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cereal_details(factor(letters[1:5], labels = "letter"))
cereal_details(factor(LETTERS[3:1], ordered = TRUE))
cereal_details(as.POSIXct("2023-01-01", tz = "America/New_York"))
</code></pre>

<hr>
<h2 id='cereal_encode'>Encode a vector as JSON</h2><span id='topic+cereal_encode'></span>

<h3>Description</h3>

<p>Create a list encoding the vctrs prototype (metadata) that can be stored
as JSON.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cereal_encode(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cereal_encode_+3A_x">x</code></td>
<td>
<p>A vector</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Use the <code>digits</code> option to specify how many digits after the decimal point
to record in JSON, for example via <code><a href="withr.html#topic+with_options">withr::local_options()</a></code>.
</p>


<h3>Value</h3>

<p>A list that can be converted to JSON with <code><a href="jsonlite.html#topic+fromJSON">jsonlite::toJSON()</a></code>
</p>


<h3>See Also</h3>

<p><code><a href="vctrs.html#topic+vec_ptype">vctrs::vec_ptype()</a></code>, <code><a href="#topic+cereal_decode">cereal_decode()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cereal_encode(1:10)
cereal_encode(Sys.Date())
cereal_encode(sample(letters, 5))
cereal_encode(factor(letters[1:5], labels = "letter"))
cereal_encode(factor(LETTERS[3:1], ordered = TRUE))

## you can encode a ptype as well:
ptype &lt;- vctrs::vec_ptype(factor(LETTERS[3:1], ordered = TRUE))
## but "example" is NULL:
cereal_encode(ptype)

</code></pre>

<hr>
<h2 id='cereal_to_json'>Serialize and deserialize the prototype of a data frame to JSON</h2><span id='topic+cereal_to_json'></span><span id='topic+cereal_from_json'></span>

<h3>Description</h3>

<p>The function <code>cereal_to_json()</code> serializes the
<a href="https://vctrs.r-lib.org/articles/type-size.html#prototype">vctrs prototype</a>
of a data frame to JSON, and the function <code>cereal_from_json()</code> deserializes
from a JSON prototype back to a vctrs prototype.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cereal_to_json(data)

cereal_from_json(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cereal_to_json_+3A_data">data</code></td>
<td>
<p>A data frame</p>
</td></tr>
<tr><td><code id="cereal_to_json_+3A_x">x</code></td>
<td>
<p>A JSON string</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>cereal_to_json()</code> returns a JSON string like <code><a href="jsonlite.html#topic+fromJSON">jsonlite::toJSON()</a></code>,
and <code>cereal_from_json()</code> returns a vctrs ptype, like <code><a href="vctrs.html#topic+vec_ptype">vctrs::vec_ptype()</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cereal_encode">cereal_encode()</a></code>, <code><a href="#topic+cereal_decode">cereal_decode()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
df &lt;- tibble::tibble(
    a = 1,
    b = 2L,
    c = Sys.Date(),
    d = as.POSIXct("2019-01-01", tz = "America/New_York"),
    e = "x",
    f = factor("blue", levels = c("blue", "green", "red")),
    g = ordered("small", levels = c("small", "medium", "large"))
)

json &lt;- cereal_to_json(df)
json

str(cereal_from_json(json))
## same as:
str(vctrs::vec_ptype(df))

</code></pre>

<hr>
<h2 id='cereal-package'>cereal: Serialize 'vctrs' Objects to 'JSON'</h2><span id='topic+cereal'></span><span id='topic+cereal-package'></span>

<h3>Description</h3>

<p>The 'vctrs' package provides a concept of vector prototype that can be especially useful when deploying models and code. Serialize these object prototypes to 'JSON' so they can be used to check and coerce data in production systems, and de-serialize 'JSON' back to the correct object prototypes.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Julia Silge <a href="mailto:julia.silge@posit.co">julia.silge@posit.co</a> (<a href="https://orcid.org/0000-0002-3671-836X">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Davis Vaughan <a href="mailto:davis@posit.co">davis@posit.co</a>
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Posit Software, PBC [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://r-lib.github.io/cereal/">https://r-lib.github.io/cereal/</a>
</p>
</li>
<li> <p><a href="https://github.com/r-lib/cereal/">https://github.com/r-lib/cereal/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/r-lib/cereal/issues">https://github.com/r-lib/cereal/issues</a>
</p>
</li></ul>


</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
