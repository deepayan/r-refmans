<!DOCTYPE html><html lang="en"><head><title>Help for package klassR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {klassR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#apply_klass'><p>Match and convert a classification</p></a></li>
<li><a href='#check_connect'><p>Check connection</p>
Function to check that a connection to data.ssb.no is able to be established</a></li>
<li><a href='#CheckDate'><p>Internal function to check date</p></a></li>
<li><a href='#ConvertTable'><p>Code level convert table (internal function)</p></a></li>
<li><a href='#correspond_list'><p>Correspondence list</p>
Print a list of correspondence tables for a given classification with source and target IDs</a></li>
<li><a href='#count_neighbors'><p>Count the neighbors of a node.</p></a></li>
<li><a href='#find_dates'><p>For a given Klass code, produce a table of dates describing the valid-from</p>
and valid-to dates of all versions of the code</a></li>
<li><a href='#find_name'><p>Find the name of a code valid at a specific date.</p></a></li>
<li><a href='#find_variant_from'><p>Find the variant of a code corresponding to a change *from* a specific code.</p></a></li>
<li><a href='#find_variant_to'><p>Find the variant of a code corresponding to a change *to* a specific code.</p></a></li>
<li><a href='#formattering'><p>Format vector for industry codes</p></a></li>
<li><a href='#formattering_kommune'><p>Format vector for kommune codes</p></a></li>
<li><a href='#formattering_nace'><p>Format vector for industry codes</p></a></li>
<li><a href='#get_family'><p>Identify corresponding family from a classification number</p></a></li>
<li><a href='#get_klass'><p>Fetch Statistics Norway classification data using API</p></a></li>
<li><a href='#get_name'><p>Get the name of a classification version</p></a></li>
<li><a href='#get_variant_name'><p>Get variant name</p>
Internal function for fetching the variant name based on the number</a></li>
<li><a href='#get_version'><p>Get version number of a class given a date</p></a></li>
<li><a href='#GetBaseUrl'><p>Get base address for fetching classifications from</p></a></li>
<li><a href='#GetNums'><p>Get target ID numbers from Url</p></a></li>
<li><a href='#GetUrl'><p>Get json file from Url</p></a></li>
<li><a href='#GetUrl2'><p>Get json file from Url - alternative version</p></a></li>
<li><a href='#is_combined'><p>Given a graph and a node, determine if the node is a result of combinations</p>
of multiple codes.</a></li>
<li><a href='#is_split'><p>Given a graph and a node, determine if the node is a split code.</p></a></li>
<li><a href='#klass_131_1964_graph'><p>Test Graph data for municipalities in 1964</p></a></li>
<li><a href='#klass_131_2020_graph'><p>Test Graph data for municipalities in 2020</p></a></li>
<li><a href='#klass_131_graph'><p>Test Graph data for municipalities in 2024</p></a></li>
<li><a href='#klass_graph'><p>Build a directed graph of code changes based on a Klass classification</p></a></li>
<li><a href='#klass_node'><p>Given a Klass graph, find the node corresponding to a code and (optionally) a</p>
date.</a></li>
<li><a href='#klassdata'><p>Testdata for klassR package</p></a></li>
<li><a href='#levelCheck'><p>Check which level the input data/vector is</p></a></li>
<li><a href='#Levels'><p>Title</p></a></li>
<li><a href='#list_family'><p>Classification family list</p>
Print a list of all families and the number of classifications in each</a></li>
<li><a href='#list_klass'><p>Classification list</p>
Get a full list of all classifications and codelists</a></li>
<li><a href='#MakeChar'><p>Conversion to character</p></a></li>
<li><a href='#MakeUrl'><p>Internal function to create URL address</p></a></li>
<li><a href='#search_klass'><p>Search Klass</p></a></li>
<li><a href='#stop_quietly'><p>Stop quietly function</p>
Stop from a function without an error. Used for stopping when no internet</a></li>
<li><a href='#update_code'><p>Update a code found in a directed graph based on a Klass-classification</p></a></li>
<li><a href='#update_klass'><p>Update multiple Klass codes to a desired date.</p></a></li>
<li><a href='#update_klass_node'><p>Given a node and a graph, find the node at the end of a sequence of changes.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Classifications and Codelists for Statistics Norway</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions to search, retrieve, apply and update classifications 
  and codelists using Statistics Norway's API <a href="https://www.ssb.no/klass">https://www.ssb.no/klass</a> 
  from the system 'KLASS'. Retrieves classifications by date with options 
  to choose language, hierarchical level and formatting.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>tm, httr, jsonlite, igraph (&ge; 2.1.1), methods</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://statisticsnorway.github.io/ssb-klassr/">https://statisticsnorway.github.io/ssb-klassr/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/statisticsnorway/ssb-klassr/issues">https://github.com/statisticsnorway/ssb-klassr/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown, knitr, testthat (&ge; 3.0.0), kableExtra, magrittr,
dplyr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-07 10:17:07 UTC; coo</td>
</tr>
<tr>
<td>Author:</td>
<td>Susie Jentoft [aut, cre],
  Diana-Cristina Iancu [aut],
  Lisa Li [aut],
  Øyvind I. Berntsen [aut],
  Statistics Norway [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Susie Jentoft &lt;susie.jentoft@ssb.no&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-02-07 10:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='apply_klass'>Match and convert a classification</h2><span id='topic+apply_klass'></span><span id='topic+ApplyKlass'></span>

<h3>Description</h3>

<p>Match and convert a classification
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apply_klass(
  x,
  classification,
  date = NULL,
  variant = NULL,
  correspond = NULL,
  language = "nb",
  output_level = NULL,
  output = "name",
  format = TRUE
)

ApplyKlass(
  x,
  klass,
  date = NULL,
  variant = NULL,
  correspond = NULL,
  language = "nb",
  output_level = NULL,
  output = "name",
  format = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="apply_klass_+3A_x">x</code></td>
<td>
<p>Input vector of classification codes. Vector must match &quot;code&quot; column from a call to get_klass().</p>
</td></tr>
<tr><td><code id="apply_klass_+3A_classification">classification</code></td>
<td>
<p>Classification number</p>
</td></tr>
<tr><td><code id="apply_klass_+3A_date">date</code></td>
<td>
<p>String for the required date of the classification. Format must be &quot;yyyy-mm-dd&quot;. For an inverval, provide two dates as a vector. If blank, will default to today's date.</p>
</td></tr>
<tr><td><code id="apply_klass_+3A_variant">variant</code></td>
<td>
<p>The classification variant to fetch (if a variant is wanted).</p>
</td></tr>
<tr><td><code id="apply_klass_+3A_correspond">correspond</code></td>
<td>
<p>ID number for target in correspondence table. For correspondence between two dates within the same classification, use correspond = TRUE.</p>
</td></tr>
<tr><td><code id="apply_klass_+3A_language">language</code></td>
<td>
<p>Default &quot;nb&quot; for Norwegian (Bokmål). Also &quot;nn&quot; (Nynorsk) and &quot;en&quot; (English available for some classifications)</p>
</td></tr>
<tr><td><code id="apply_klass_+3A_output_level">output_level</code></td>
<td>
<p>Desired output level</p>
</td></tr>
<tr><td><code id="apply_klass_+3A_output">output</code></td>
<td>
<p>String describing output. May be &quot;name&quot; (default), &quot;code&quot; or &quot;both&quot;.</p>
</td></tr>
<tr><td><code id="apply_klass_+3A_format">format</code></td>
<td>
<p>Logical for whther to run formatting av input vector x (Default = TRUE), important to check if formatting is in one level.</p>
</td></tr>
<tr><td><code id="apply_klass_+3A_klass">klass</code></td>
<td>
<p>Deprecated; use 'classification' instead.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector or data frame is returned with names and/or code of the desired output level.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(klassdata)
kommune_names &lt;- apply_klass(
  x = klassdata$kommune,
  classification = 131,
  language = "en",
  format = FALSE
)
</code></pre>

<hr>
<h2 id='check_connect'>Check connection
Function to check that a connection to data.ssb.no is able to be established</h2><span id='topic+check_connect'></span>

<h3>Description</h3>

<p>Check connection
Function to check that a connection to data.ssb.no is able to be established
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_connect(url)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_connect_+3A_url">url</code></td>
<td>
<p>String url address for connection to check</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing is returned but a error or warning message is return if no connection is available
</p>

<hr>
<h2 id='CheckDate'>Internal function to check date</h2><span id='topic+CheckDate'></span>

<h3>Description</h3>

<p>Internal function to check date
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CheckDate(date)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CheckDate_+3A_date">date</code></td>
<td>
<p>Date</p>
</td></tr>
</table>

<hr>
<h2 id='ConvertTable'>Code level convert table (internal function)</h2><span id='topic+ConvertTable'></span>

<h3>Description</h3>

<p>Code level convert table (internal function)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ConvertTable(
  klass_data,
  code = "code",
  parentcode = "parentCode",
  level = "level"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ConvertTable_+3A_klass_data">klass_data</code></td>
<td>
<p>Klass data frame to convert</p>
</td></tr>
<tr><td><code id="ConvertTable_+3A_code">code</code></td>
<td>
<p>Name of variable containing code (Default = &quot;code&quot;)</p>
</td></tr>
<tr><td><code id="ConvertTable_+3A_parentcode">parentcode</code></td>
<td>
<p>Name of variable of parent code (Default = &quot;parentCode&quot;)</p>
</td></tr>
<tr><td><code id="ConvertTable_+3A_level">level</code></td>
<td>
<p>Name of variable containing level (Default = &quot;level&quot;)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe
</p>

<hr>
<h2 id='correspond_list'>Correspondence list
Print a list of correspondence tables for a given classification with source and target IDs</h2><span id='topic+correspond_list'></span><span id='topic+CorrespondList'></span>

<h3>Description</h3>

<p>Correspondence list
Print a list of correspondence tables for a given classification with source and target IDs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>correspond_list(classification, date = NULL)

CorrespondList(klass, date = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="correspond_list_+3A_classification">classification</code></td>
<td>
<p>Classification number</p>
</td></tr>
<tr><td><code id="correspond_list_+3A_date">date</code></td>
<td>
<p>Date for classification (format = &quot;YYYY-mm-dd&quot;). Default is current date</p>
</td></tr>
<tr><td><code id="correspond_list_+3A_klass">klass</code></td>
<td>
<p>Deprecated; use 'classification' instead.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame with list of corrsepondence tables, source ID and target ID.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
correspond_list("7")

</code></pre>

<hr>
<h2 id='count_neighbors'>Count the neighbors of a node.</h2><span id='topic+count_neighbors'></span>

<h3>Description</h3>

<p>Count the neighbors of a node.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>count_neighbors(graph, node, mode)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="count_neighbors_+3A_graph">graph</code></td>
<td>
<p>A graph generated by <code><a href="#topic+klass_graph">klass_graph</a></code>.</p>
</td></tr>
<tr><td><code id="count_neighbors_+3A_node">node</code></td>
<td>
<p>A node as returned by <code><a href="#topic+klass_node">klass_node</a></code> or
<code><a href="igraph.html#topic+V">V</a></code>.</p>
</td></tr>
<tr><td><code id="count_neighbors_+3A_mode">mode</code></td>
<td>
<p>Whether to query outgoing (&lsquo;out&rsquo;), incoming
(&lsquo;in&rsquo;) edges, or both types (&lsquo;all&rsquo;). This is
ignored for undirected graphs.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector of length one giving the number of neighbors.
</p>

<hr>
<h2 id='find_dates'>For a given Klass code, produce a table of dates describing the valid-from
and valid-to dates of all versions of the code</h2><span id='topic+find_dates'></span>

<h3>Description</h3>

<p>For a given Klass code, produce a table of dates describing the valid-from
and valid-to dates of all versions of the code
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_dates(code, api_alle, api_endringer)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="find_dates_+3A_code">code</code></td>
<td>
<p>A Klass code</p>
</td></tr>
<tr><td><code id="find_dates_+3A_api_alle">api_alle</code></td>
<td>
<p>A table of all codes in the classification. See example.</p>
</td></tr>
<tr><td><code id="find_dates_+3A_api_endringer">api_endringer</code></td>
<td>
<p>A table of all changes in the classification See
example.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> with number of rows equal to the number of
variants of the combination of code and name, determined by the changes the
code has been involved in. The <code>data.frame</code> has two columns:
</p>

<ul>
<li><p>&quot;validFrom&quot;
</p>
</li>
<li><p>&quot;validTo&quot;
</p>
</li></ul>


<hr>
<h2 id='find_name'>Find the name of a code valid at a specific date.</h2><span id='topic+find_name'></span>

<h3>Description</h3>

<p>Find the name of a code valid at a specific date.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_name(code, validFrom, validTo, api_alle)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="find_name_+3A_code">code</code></td>
<td>
<p>A Klass code</p>
</td></tr>
<tr><td><code id="find_name_+3A_validfrom">validFrom</code></td>
<td>
<p>The date the code is valid from, in <code>YYYY-MM-DD</code> format.</p>
</td></tr>
<tr><td><code id="find_name_+3A_validto">validTo</code></td>
<td>
<p>The date the code is valid to, in <code>YYYY-MM-DD</code> format.</p>
</td></tr>
<tr><td><code id="find_name_+3A_api_alle">api_alle</code></td>
<td>
<p>A table of all codes in the classification. See example.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The name of the code.
</p>

<hr>
<h2 id='find_variant_from'>Find the variant of a code corresponding to a change *from* a specific code.</h2><span id='topic+find_variant_from'></span>

<h3>Description</h3>

<p>Find the variant of a code corresponding to a change *from* a specific code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_variant_from(x, changeOccurred, variants)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="find_variant_from_+3A_x">x</code></td>
<td>
<p>The code that is being changed</p>
</td></tr>
<tr><td><code id="find_variant_from_+3A_changeoccurred">changeOccurred</code></td>
<td>
<p>The date the change occurred</p>
</td></tr>
<tr><td><code id="find_variant_from_+3A_variants">variants</code></td>
<td>
<p>The variants lookup-table.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The variant corresponding to the code <code>x</code> at date
<code>changeOccurred</code>.
</p>


<h3>See Also</h3>

<p>[find_variant_to]
</p>

<hr>
<h2 id='find_variant_to'>Find the variant of a code corresponding to a change *to* a specific code.</h2><span id='topic+find_variant_to'></span>

<h3>Description</h3>

<p>Find the variant of a code corresponding to a change *to* a specific code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_variant_to(x, changeOccurred, variants)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="find_variant_to_+3A_x">x</code></td>
<td>
<p>The code that is being changed</p>
</td></tr>
<tr><td><code id="find_variant_to_+3A_changeoccurred">changeOccurred</code></td>
<td>
<p>The date the change occurred</p>
</td></tr>
<tr><td><code id="find_variant_to_+3A_variants">variants</code></td>
<td>
<p>The variants lookup-table.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The variant corresponding to the code <code>x</code> at date
<code>changeOccurred</code>.
</p>


<h3>See Also</h3>

<p>[find_variant_from()]
</p>

<hr>
<h2 id='formattering'>Format vector for industry codes</h2><span id='topic+formattering'></span>

<h3>Description</h3>

<p>Format vector for industry codes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>formattering(x, classification)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="formattering_+3A_x">x</code></td>
<td>
<p>- vector of character</p>
</td></tr>
<tr><td><code id="formattering_+3A_classification">classification</code></td>
<td>
<p>- classification number</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of character
</p>

<hr>
<h2 id='formattering_kommune'>Format vector for kommune codes</h2><span id='topic+formattering_kommune'></span>

<h3>Description</h3>

<p>Format vector for kommune codes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>formattering_kommune(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="formattering_kommune_+3A_x">x</code></td>
<td>
<p>- vector of character type for kommune codes</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of character
</p>

<hr>
<h2 id='formattering_nace'>Format vector for industry codes</h2><span id='topic+formattering_nace'></span>

<h3>Description</h3>

<p>Format vector for industry codes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>formattering_nace(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="formattering_nace_+3A_x">x</code></td>
<td>
<p>Character vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Formatted charcter vector
</p>

<hr>
<h2 id='get_family'>Identify corresponding family from a classification number</h2><span id='topic+get_family'></span><span id='topic+GetFamily'></span>

<h3>Description</h3>

<p>Identify corresponding family from a classification number
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_family(classification)

GetFamily(klass)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_family_+3A_classification">classification</code></td>
<td>
<p>Classification number</p>
</td></tr>
<tr><td><code id="get_family_+3A_klass">klass</code></td>
<td>
<p>Deprecated; use 'classification' instead.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Family number
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_family(classification = 7)
</code></pre>

<hr>
<h2 id='get_klass'>Fetch Statistics Norway classification data using API</h2><span id='topic+get_klass'></span><span id='topic+GetKlass'></span>

<h3>Description</h3>

<p>Fetch Statistics Norway classification data using API
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_klass(
  classification,
  date = NULL,
  correspond = NULL,
  correspondID = NULL,
  variant = NULL,
  output_level = NULL,
  language = "nb",
  output_style = "normal",
  notes = FALSE,
  quiet = TRUE
)

GetKlass(
  klass,
  date = NULL,
  correspond = NULL,
  correspondID = NULL,
  variant = NULL,
  output_level = NULL,
  language = "nb",
  output_style = "normal",
  notes = FALSE,
  quiet = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_klass_+3A_classification">classification</code></td>
<td>
<p>Number/string of the classification ID/number. (use klass_list() to find this)</p>
</td></tr>
<tr><td><code id="get_klass_+3A_date">date</code></td>
<td>
<p>String for the required date of the classification. Format must be &quot;yyyy-mm-dd&quot;. For an inverval, provide two dates as a vector. If blank, will default to today's date.</p>
</td></tr>
<tr><td><code id="get_klass_+3A_correspond">correspond</code></td>
<td>
<p>Number/string of the target classification for correspondence table (if a correspondence table is requested).</p>
</td></tr>
<tr><td><code id="get_klass_+3A_correspondid">correspondID</code></td>
<td>
<p>ID number of the correspondence table to retrieve. Use as an alternative to correspond.</p>
</td></tr>
<tr><td><code id="get_klass_+3A_variant">variant</code></td>
<td>
<p>The classification variant to fetch (if a variant is wanted).</p>
</td></tr>
<tr><td><code id="get_klass_+3A_output_level">output_level</code></td>
<td>
<p>Number/string specifying the requested hierarchy level (optional).</p>
</td></tr>
<tr><td><code id="get_klass_+3A_language">language</code></td>
<td>
<p>Two letter string for the requested language output. Default is Bokmål (&quot;nb&quot;). Nynorsk (&quot;nn&quot;) and English (&quot;en&quot;) also available for some classification.)</p>
</td></tr>
<tr><td><code id="get_klass_+3A_output_style">output_style</code></td>
<td>
<p>String variable for the output type. Default is &quot;normal&quot;. Specify &quot;wide&quot; for a wide formatted table output.</p>
</td></tr>
<tr><td><code id="get_klass_+3A_notes">notes</code></td>
<td>
<p>Logical for if notes should be returned as a column. Default FALSE</p>
</td></tr>
<tr><td><code id="get_klass_+3A_quiet">quiet</code></td>
<td>
<p>Logical for whether to suppress the printing of the API address. Default TRUE.</p>
</td></tr>
<tr><td><code id="get_klass_+3A_klass">klass</code></td>
<td>
<p>Deprecated; use 'classification' instead.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns a data frame of the specified classification/correspondence table. Output variables include:
code, parentCode, level, and name for standard lists. For correspondence tables variables include:
sourceCode, sourceName, targetCode and targetName. For date correspondence tables variables include:
oldCode, oldName, newCode and newName. For &quot;wide&quot; output, code and name with level suffixes is specified.
For date ranges, validFromInRequestedRange and validToInRequestedRange give the dates for the classification. Variable ChangeOccured gives the
effective date for classification change in classification change tables.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get classification for occupation classifications
head(get_klass(classification = "7"))
# Get classification for occupation classifications in English
head(get_klass(classification = "7", language = "en"))
</code></pre>

<hr>
<h2 id='get_name'>Get the name of a classification version</h2><span id='topic+get_name'></span><span id='topic+GetName'></span>

<h3>Description</h3>

<p>Get the name of a classification version
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_name(version)

GetName(version)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_name_+3A_version">version</code></td>
<td>
<p>Version number</p>
</td></tr>
</table>


<h3>Value</h3>

<p>string or vector of strings with name of version
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_name("33")
</code></pre>

<hr>
<h2 id='get_variant_name'>Get variant name
Internal function for fetching the variant name based on the number</h2><span id='topic+get_variant_name'></span>

<h3>Description</h3>

<p>Get variant name
Internal function for fetching the variant name based on the number
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_variant_name(variant)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_variant_name_+3A_variant">variant</code></td>
<td>
<p>The variant number</p>
</td></tr>
</table>

<hr>
<h2 id='get_version'>Get version number of a class given a date</h2><span id='topic+get_version'></span><span id='topic+GetVersion'></span>

<h3>Description</h3>

<p>Get version number of a class given a date
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_version(classification = NULL, date = NULL, family = NULL, klassNr = FALSE)

GetVersion(klass = NULL, date = NULL, family = NULL, klassNr = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_version_+3A_classification">classification</code></td>
<td>
<p>Classification number</p>
</td></tr>
<tr><td><code id="get_version_+3A_date">date</code></td>
<td>
<p>Date for version to be valid</p>
</td></tr>
<tr><td><code id="get_version_+3A_family">family</code></td>
<td>
<p>Family ID number if a list of version number for all classes is desired</p>
</td></tr>
<tr><td><code id="get_version_+3A_klassnr">klassNr</code></td>
<td>
<p>True/False for whether to output classification numbers. Default = FALSE</p>
</td></tr>
<tr><td><code id="get_version_+3A_klass">klass</code></td>
<td>
<p>Deprecated; use 'classification' instead.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Number, vector or data frame with version numbers and calssification numbers if specified.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_version(7)
</code></pre>

<hr>
<h2 id='GetBaseUrl'>Get base address for fetching classifications from</h2><span id='topic+GetBaseUrl'></span>

<h3>Description</h3>

<p>Get base address for fetching classifications from
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GetBaseUrl()
</code></pre>


<h3>Value</h3>

<p>String with address
</p>

<hr>
<h2 id='GetNums'>Get target ID numbers from Url</h2><span id='topic+GetNums'></span>

<h3>Description</h3>

<p>Get target ID numbers from Url
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GetNums(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="GetNums_+3A_x">x</code></td>
<td>
<p>Url address</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Number
</p>

<hr>
<h2 id='GetUrl'>Get json file from Url</h2><span id='topic+GetUrl'></span>

<h3>Description</h3>

<p>Get json file from Url
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GetUrl(url)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="GetUrl_+3A_url">url</code></td>
<td>
<p>String url address</p>
</td></tr>
</table>


<h3>Value</h3>

<p>text in json format
</p>

<hr>
<h2 id='GetUrl2'>Get json file from Url - alternative version</h2><span id='topic+GetUrl2'></span>

<h3>Description</h3>

<p>Get json file from Url - alternative version
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GetUrl2(url, check = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="GetUrl2_+3A_url">url</code></td>
<td>
<p>String url address</p>
</td></tr>
<tr><td><code id="GetUrl2_+3A_check">check</code></td>
<td>
<p>Logical parameter on whether to check if the url exists</p>
</td></tr>
</table>


<h3>Value</h3>

<p>text in json format
</p>

<hr>
<h2 id='is_combined'>Given a graph and a node, determine if the node is a result of combinations
of multiple codes.</h2><span id='topic+is_combined'></span>

<h3>Description</h3>

<p>Given a graph and a node, determine if the node is a result of combinations
of multiple codes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_combined(graph, node, compare_node = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_combined_+3A_graph">graph</code></td>
<td>
<p>A graph generated by <code><a href="#topic+klass_graph">klass_graph</a></code>.</p>
</td></tr>
<tr><td><code id="is_combined_+3A_node">node</code></td>
<td>
<p>A node as returned by <code><a href="#topic+klass_node">klass_node</a></code> or
<code><a href="igraph.html#topic+V">V</a></code>.</p>
</td></tr>
<tr><td><code id="is_combined_+3A_compare_node">compare_node</code></td>
<td>
<p>Optional. A node to compare <code>node</code> with when
determining whether <code>node</code> is combined. See details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function will attempt to reconcile nodes that have split and
then later merged again when evaluating a node's combinedness.
</p>
<p>If <code>compare_node == NULL</code>, a node is considered to be combined if more
than one node that does not itself have a parent (i.e. codes at the start
of a sequence of changes) contribute to <code>node</code>.
</p>
<p>If <code>compare_node != NULL</code>, a node is considered to be combined if any
node that is not an ancestor of <code>compare_node</code> contributes to
<code>node</code>, i.e. all paths from <code>node</code> to the parents of <code>node</code>
pass through <code>compare_node</code>.
</p>


<h3>Value</h3>

<p><code>TRUE</code> if the node is a combination of two or more nodes,
otherwise <code>FALSE</code>.
</p>

<hr>
<h2 id='is_split'>Given a graph and a node, determine if the node is a split code.</h2><span id='topic+is_split'></span>

<h3>Description</h3>

<p>Given a graph and a node, determine if the node is a split code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_split(graph, node)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_split_+3A_graph">graph</code></td>
<td>
<p>A graph generated by <code><a href="#topic+klass_graph">klass_graph</a></code>.</p>
</td></tr>
<tr><td><code id="is_split_+3A_node">node</code></td>
<td>
<p>A node as returned by <code><a href="#topic+klass_node">klass_node</a></code> or
<code><a href="igraph.html#topic+V">V</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function will attempt to reconcile nodes that have split and
then later merged again. A node is considered to be split if there is more
than one node that does not itself have children (i.e. nodes at the end of
a sequence of changes) that can be reached from <code>node</code>
</p>


<h3>Value</h3>

<p><code>TRUE</code> if the node is split, otherwise <code>FALSE</code>.
</p>

<hr>
<h2 id='klass_131_1964_graph'>Test Graph data for municipalities in 1964</h2><span id='topic+klass_131_1964_graph'></span>

<h3>Description</h3>

<p>A nested list of graph data for using in testing
</p>


<h3>Usage</h3>

<pre><code class='language-R'>klass_131_1964_graph
</code></pre>


<h3>Format</h3>

<p>An object of class <code>igraph</code> of length 2000.
</p>

<hr>
<h2 id='klass_131_2020_graph'>Test Graph data for municipalities in 2020</h2><span id='topic+klass_131_2020_graph'></span>

<h3>Description</h3>

<p>A nested list of graph data for using in testing
</p>


<h3>Usage</h3>

<pre><code class='language-R'>klass_131_2020_graph
</code></pre>


<h3>Format</h3>

<p>An object of class <code>igraph</code> of length 2000.
</p>

<hr>
<h2 id='klass_131_graph'>Test Graph data for municipalities in 2024</h2><span id='topic+klass_131_graph'></span>

<h3>Description</h3>

<p>A nested list of graph data for using in testing
</p>


<h3>Usage</h3>

<pre><code class='language-R'>klass_131_graph
</code></pre>


<h3>Format</h3>

<p>An object of class <code>igraph</code> of length 2000.
</p>

<hr>
<h2 id='klass_graph'>Build a directed graph of code changes based on a Klass classification</h2><span id='topic+klass_graph'></span>

<h3>Description</h3>

<p>Build a directed graph of code changes based on a Klass classification
</p>


<h3>Usage</h3>

<pre><code class='language-R'>klass_graph(classification, date = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="klass_graph_+3A_classification">classification</code></td>
<td>
<p>The ID of the desired classification.</p>
</td></tr>
<tr><td><code id="klass_graph_+3A_date">date</code></td>
<td>
<p>The date which the edges of the graph should be directed towards.
</p>
<p>Defaults to the current year plus one, which ensures the graph is directed
to the most recent codes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>igraph</code> object with the vertexes representing codes, and
edges representing changes between codes. The direction of the edges
represent changes towards the date specified in <code>date</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(klassR)

# Build a graph directed towards the most recent codes
## Not run: 
klass_131 &lt;- klass_graph(131)

## End(Not run)

# Build a graph directed towards valid codes in 2020.
## Not run: 
klass_131_2020 &lt;- klass_graph(131, "2020-01-01")

## End(Not run)

</code></pre>

<hr>
<h2 id='klass_node'>Given a Klass graph, find the node corresponding to a code and (optionally) a
date.</h2><span id='topic+klass_node'></span>

<h3>Description</h3>

<p>Given a Klass graph, find the node corresponding to a code and (optionally) a
date.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>klass_node(graph, x, date = NA)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="klass_node_+3A_graph">graph</code></td>
<td>
<p>A graph generated by <code><a href="#topic+klass_graph">klass_graph</a></code>.</p>
</td></tr>
<tr><td><code id="klass_node_+3A_x">x</code></td>
<td>
<p>The code to search for.</p>
</td></tr>
<tr><td><code id="klass_node_+3A_date">date</code></td>
<td>
<p>Optional. The specific date the supplied code is valid in.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The node in the graph corresponding to the supplied code. If date is
not provided, the node with the most recent code is returned. If date is
provided, the code with date between <code>validFrom</code> and <code>validTo</code> is
returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Build a graph directed towards the most recent codes.
library(klassR)
## Not run: 
klass_131 &lt;- klass_graph(131)

## End(Not run)

# Find the most recent node in the graph representing the code "0101" (Halden,
# valid to 2020.)
## Not run: 
halden_node &lt;- klass_node(klass_131, "0101")

## End(Not run)
</code></pre>

<hr>
<h2 id='klassdata'>Testdata for klassR package</h2><span id='topic+klassdata'></span>

<h3>Description</h3>

<p>A dataset containing variables for testing of Statistics Norways classification API with the klassR package. Some observations are missing or incorrect for testing and demonstrations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>klassdata
</code></pre>


<h3>Format</h3>

<p>A data frame containing 100 rows and 7 variables:
</p>

<dl>
<dt>ID</dt><dd><p>Identification number</p>
</dd>
<dt>sex</dt><dd><p>1/2 variable for sex</p>
</dd>
<dt>education</dt><dd><p>4-digit number for education standard ISCED97 (level and subject area) NUS (klass = 66) 2015.01.01</p>
</dd>
<dt>kommune</dt><dd><p>4-digit code for Norwegian municipality (klass = 131). Based on 2015.01.01</p>
</dd>
<dt>kommune2</dt><dd><p>Numeric variable for Norwegian municipality with dropped leading zero's for testing (klass = 131). Based on 2015.01.01</p>
</dd>
<dt>nace5</dt><dd><p>5-digit code for industry (NACE). Based on 01.01.2015 standard industry codes (klass = 7)</p>
</dd>
<dt>occupation</dt><dd><p>4-digit occupation codes using standard for STYRK-08 (klass = 7) 2015.01.01</p>
</dd>
</dl>


<hr>
<h2 id='levelCheck'>Check which level the input data/vector is</h2><span id='topic+levelCheck'></span>

<h3>Description</h3>

<p>The input level is calculated as the mode (most common) hierarchical
level in the input vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>levelCheck(x, klass_data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="levelCheck_+3A_x">x</code></td>
<td>
<p>- vector of character</p>
</td></tr>
<tr><td><code id="levelCheck_+3A_klass_data">klass_data</code></td>
<td>
<p>- - the right formatting to the classification levels</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The hierarchical level of the input data is returned.
</p>

<hr>
<h2 id='Levels'>Title</h2><span id='topic+Levels'></span>

<h3>Description</h3>

<p>Title
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Levels(input_level, output_level, klass_data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Levels_+3A_input_level">input_level</code></td>
<td>
<p>Classification level from the original dataset.</p>
</td></tr>
<tr><td><code id="Levels_+3A_output_level">output_level</code></td>
<td>
<p>Classification level for which the codes and names are desired by the user.</p>
</td></tr>
<tr><td><code id="Levels_+3A_klass_data">klass_data</code></td>
<td>
<p>Classification file retrieved from KLASS.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame with the input and extra desired classification levels. Includes codes and names for each level.
</p>

<hr>
<h2 id='list_family'>Classification family list
Print a list of all families and the number of classifications in each</h2><span id='topic+list_family'></span><span id='topic+ListFamily'></span>

<h3>Description</h3>

<p>Classification family list
Print a list of all families and the number of classifications in each
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_family(family = NULL, codelists = FALSE, language = "nb")

ListFamily(family = NULL, codelists = FALSE, language = "nb")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="list_family_+3A_family">family</code></td>
<td>
<p>Input family ID number to get a list of classifications in that family</p>
</td></tr>
<tr><td><code id="list_family_+3A_codelists">codelists</code></td>
<td>
<p>True/False for whether to include codelists. Default = FALSE</p>
</td></tr>
<tr><td><code id="list_family_+3A_language">language</code></td>
<td>
<p>Two letter string for the requested language output. Default is Bokmål (&quot;nb&quot;). Nynorsk (&quot;nn&quot;) and English (&quot;en&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>dataset containing a list of families
</p>


<h3>Examples</h3>

<pre><code class='language-R'>list_family(family = 1)
</code></pre>

<hr>
<h2 id='list_klass'>Classification list
Get a full list of all classifications and codelists</h2><span id='topic+list_klass'></span><span id='topic+ListKlass'></span>

<h3>Description</h3>

<p>Classification list
Get a full list of all classifications and codelists
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_klass(codelists = FALSE, language = "nb")

ListKlass(codelists = FALSE, language = "nb")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="list_klass_+3A_codelists">codelists</code></td>
<td>
<p>True/False for whether to include codelists. Default = FALSE</p>
</td></tr>
<tr><td><code id="list_klass_+3A_language">language</code></td>
<td>
<p>Two letter string for the requested language output. Default is Bokmål (&quot;nb&quot;). Nynorsk (&quot;nn&quot;) and English (&quot;en&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame containing a full list of classifications. The data frame includes the classification name, number, family and type.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>head(list_klass(codelists = TRUE))
</code></pre>

<hr>
<h2 id='MakeChar'>Conversion to character</h2><span id='topic+MakeChar'></span>

<h3>Description</h3>

<p>Conversion to character
</p>


<h3>Usage</h3>

<pre><code class='language-R'>MakeChar(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="MakeChar_+3A_x">x</code></td>
<td>
<p>a number or vector of numbers</p>
</td></tr>
</table>


<h3>Value</h3>

<p>x converted to a string or vector of strings.
</p>

<hr>
<h2 id='MakeUrl'>Internal function to create URL address</h2><span id='topic+MakeUrl'></span>

<h3>Description</h3>

<p>Internal function to create URL address
</p>


<h3>Usage</h3>

<pre><code class='language-R'>MakeUrl(
  classification,
  correspond = NULL,
  correspondID = NULL,
  variant_name = NULL,
  type = "vanlig",
  fratil = FALSE,
  date = NULL,
  output_level_coding = NULL,
  language_coding = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="MakeUrl_+3A_classification">classification</code></td>
<td>
<p>Classification number</p>
</td></tr>
<tr><td><code id="MakeUrl_+3A_correspond">correspond</code></td>
<td>
<p>Target number for correspondence table</p>
</td></tr>
<tr><td><code id="MakeUrl_+3A_variant_name">variant_name</code></td>
<td>
<p>The name of the variant of the classification</p>
</td></tr>
<tr><td><code id="MakeUrl_+3A_type">type</code></td>
<td>
<p>String describing type. &quot;vanlig&quot; for normal classification and &quot;kor&quot; for correspondence. Default = &quot;vanlig&quot;</p>
</td></tr>
<tr><td><code id="MakeUrl_+3A_fratil">fratil</code></td>
<td>
<p>True/False for whether a date interval is to be used. Default = False</p>
</td></tr>
<tr><td><code id="MakeUrl_+3A_date">date</code></td>
<td>
<p>Date(s) for classification</p>
</td></tr>
<tr><td><code id="MakeUrl_+3A_output_level_coding">output_level_coding</code></td>
<td>
<p>Coding for output level</p>
</td></tr>
<tr><td><code id="MakeUrl_+3A_language_coding">language_coding</code></td>
<td>
<p>Coding for language</p>
</td></tr>
</table>


<h3>Value</h3>

<p>String url adress
</p>

<hr>
<h2 id='search_klass'>Search Klass</h2><span id='topic+search_klass'></span><span id='topic+SearchKlass'></span>

<h3>Description</h3>

<p>Search Klass
</p>


<h3>Usage</h3>

<pre><code class='language-R'>search_klass(query, codelists = FALSE, size = 20)

SearchKlass(query, codelists = FALSE, size = 20)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="search_klass_+3A_query">query</code></td>
<td>
<p>String with key word to search for</p>
</td></tr>
<tr><td><code id="search_klass_+3A_codelists">codelists</code></td>
<td>
<p>True/False for whether to include codelists. Default = FALSE</p>
</td></tr>
<tr><td><code id="search_klass_+3A_size">size</code></td>
<td>
<p>The number of results to show. Default = 20.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame of possible classifications that match the query
</p>


<h3>Examples</h3>

<pre><code class='language-R'>search_klass("occupation")
</code></pre>

<hr>
<h2 id='stop_quietly'>Stop quietly function
Stop from a function without an error. Used for stopping when no internet</h2><span id='topic+stop_quietly'></span>

<h3>Description</h3>

<p>Stop quietly function
Stop from a function without an error. Used for stopping when no internet
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stop_quietly()
</code></pre>

<hr>
<h2 id='update_code'>Update a code found in a directed graph based on a Klass-classification</h2><span id='topic+update_code'></span>

<h3>Description</h3>

<p>Update a code found in a directed graph based on a Klass-classification
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_code(
  graph,
  code,
  date = NA,
  output = "code",
  combine = TRUE,
  report = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="update_code_+3A_graph">graph</code></td>
<td>
<p>A graph generated by <code><a href="#topic+klass_graph">klass_graph</a></code>.</p>
</td></tr>
<tr><td><code id="update_code_+3A_code">code</code></td>
<td>
<p>A Klass code</p>
</td></tr>
<tr><td><code id="update_code_+3A_date">date</code></td>
<td>
<p>Optional. The specific date the supplied code is valid in.</p>
</td></tr>
<tr><td><code id="update_code_+3A_output">output</code></td>
<td>
<p>Either a character vector, containing one or more of the items
in the list below, or <code>TRUE</code> to include all columns.
</p>

<dl>
<dt><code>"code"</code></dt><dd><p>The Klass code.</p>
</dd>
<dt><code>"name"</code></dt><dd><p>The Klass name.</p>
</dd>
<dt><code>"validFrom"</code></dt><dd><p>The date that the code is valid from.</p>
</dd>
<dt><code>"validTo"</code></dt><dd><p>The date that the code is valid to.</p>
</dd>
<dt><code>"split"</code></dt><dd><p>Logical: Does the code split into two or more codes?</p>
</dd>
<dt><code>"combined"</code></dt><dd><p>Logical: Does two or more codes become this code?</p>
</dd>
<dt><code>"nextCode"</code></dt><dd><p>If <code>split == FALSE</code>, gives the code this code changed into. <code>NA</code> otherwise.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="update_code_+3A_combine">combine</code></td>
<td>
<p><code>TRUE</code> or <code>FALSE</code>. See the return section.</p>
</td></tr>
<tr><td><code id="update_code_+3A_report">report</code></td>
<td>
<p><code>TRUE</code> or <code>FALSE</code>. See the return section.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>report == TRUE</code> and <code>length(output) &gt; 1 | TRUE</code>, the
result will be a <code>data.frame</code> with number of rows equal to the number
of codes in the sequence of changes between the input code and output code.
The columns in the <code>data.frame</code> are specified with <code>output</code>.
</p>
<p>If <code>report == TRUE</code> and <code>length(output) == 1</code>, the result will be
a character vector with length equal to the number of codes in the sequence
of changes between the input code and output code. The contents of the
character vector is specified with <code>output</code>.
</p>
<p>If <code>report == FALSE</code> and <code>length(output) &gt; 1 | TRUE</code> the result
will be a <code>data.frame</code> with one row representing the last code
in the change sequence and columns specified by <code>output</code>. If a code
has been split, the result will be <code>NA</code>. If <code>combine == FALSE</code>
and a code is the result of a combination of codes, the result will be
<code>NA</code>.
</p>
<p>If <code>report == FALSE</code> and <code>length(output) == 1</code>, the result will
be a character vector of length one, containing information about the
updated code specified by <code>output</code>. If a code has been split, the
result will be <code>NA</code>. If <code>combine == FALSE</code> and a code is the
result of a combination of codes, the result will be <code>NA</code>.
</p>


<h3>See Also</h3>

<p>See [update_klass] for updating multiple codes in one function call.
</p>

<hr>
<h2 id='update_klass'>Update multiple Klass codes to a desired date.</h2><span id='topic+update_klass'></span>

<h3>Description</h3>

<p>Update multiple Klass codes to a desired date.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_klass(
  codes,
  dates = NA,
  classification = NULL,
  date = NULL,
  graph = klass_graph(classification, date),
  output = "code",
  report = FALSE,
  combine = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="update_klass_+3A_codes">codes</code></td>
<td>
<p>Codes to be updated.</p>
</td></tr>
<tr><td><code id="update_klass_+3A_dates">dates</code></td>
<td>
<p>Optional. Can be used to specify what date each of the codes was
valid in. Supply a character vector of either length 1 to specify the same
valid date for all codes, or of the same length as <code>codes</code> to specify
valid dates for each code. The character vector(s) should have a format
coercible by <code><a href="base.html#topic+as.Date">as.Date</a></code>, e.g. <code>YYYY-MM-DD</code>. The
function will return an error if a code was not valid at the specified
date.</p>
</td></tr>
<tr><td><code id="update_klass_+3A_classification">classification</code></td>
<td>
<p>The ID of the desired classification.</p>
</td></tr>
<tr><td><code id="update_klass_+3A_date">date</code></td>
<td>
<p>Optional. Can be used to specify the date the codes should be
updated to, e.g. if you have codes that are valid in year <code>T</code>, but
want to change the codes to the corresponding version in year <code>T-1</code>.
If unspecified (the default), the function will update codes to the most
recent version.</p>
</td></tr>
<tr><td><code id="update_klass_+3A_graph">graph</code></td>
<td>
<p>Optional. A graph object generated by <code><a href="#topic+klass_graph">klass_graph</a></code>.
If you're making multiple calls to [update_klass], you can save some time by
generating the graph beforehand and reusing it for each call to
[update_klass] with this parameter. If providing the graph directly, you do
not need to provide the <code>classification</code> and <code>date</code> parameters.</p>
</td></tr>
<tr><td><code id="update_klass_+3A_output">output</code></td>
<td>
<p>Either a character vector, containing one or more of the items
in the list below, or <code>TRUE</code> to include all columns.
</p>

<dl>
<dt><code>"code"</code></dt><dd><p>The Klass code.</p>
</dd>
<dt><code>"name"</code></dt><dd><p>The Klass name.</p>
</dd>
<dt><code>"validFrom"</code></dt><dd><p>The date that the code is valid from.</p>
</dd>
<dt><code>"validTo"</code></dt><dd><p>The date that the code is valid to.</p>
</dd>
<dt><code>"split"</code></dt><dd><p>Logical: Does the code split into two or more codes?</p>
</dd>
<dt><code>"combined"</code></dt><dd><p>Logical: Does two or more codes become this code?</p>
</dd>
<dt><code>"nextCode"</code></dt><dd><p>If <code>split == FALSE</code>, gives the code this code changed into. <code>NA</code> otherwise.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="update_klass_+3A_report">report</code></td>
<td>
<p><code>TRUE</code> or <code>FALSE</code>. See the return section.</p>
</td></tr>
<tr><td><code id="update_klass_+3A_combine">combine</code></td>
<td>
<p><code>TRUE</code> or <code>FALSE</code>. See the return section.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>output = "code"</code>, a vector of length <code>length(codes)</code>
containing either a code if the update is successful or <code>NA</code> if the
code has been split. If <code>combine = FALSE</code>, a code being combined with
another code will also return <code>NA</code>.
</p>
<p>If <code>output == TRUE</code>, a list of length <code>length(codes)</code> containing
<code>data.frame</code>s detailing the codes visited through the node search. The
tables have the following columns.
</p>
<p>&mdash;
</p>
<p>If <code>report == TRUE</code> and <code>length(output) &gt; 1 | TRUE</code>, the result
will be a list of <code>data.frame</code>s with number of rows equal to the
number of codes in the sequence of changes between the input codes and
output codes. The columns in the <code>data.frame</code>s are specified with
<code>output</code>.
</p>
<p>If <code>report == TRUE</code> and <code>length(output) == 1</code>, the result will be
a list of character vectors with length equal to the number of codes in the
sequence of changes between the input code and output code. The contents of
the character vectors is specified with <code>output</code>.
</p>
<p>If <code>report == FALSE</code> and <code>length(output) &gt; 1 | TRUE</code> the result
will be a list of <code>data.frame</code>s with one row representing the last
code in the change sequence and columns specified by <code>output</code>. If a
code has been split, the result will be <code>NA</code>. If <code>combine ==
  FALSE</code> and a code is the result of a combination of codes, the result will
be <code>NA</code>.
</p>
<p>If <code>report == FALSE</code> and <code>length(output) == 1</code>, the result will
be a character vector containing information about the updated codes
specified by <code>output</code>. If a code has been split, the result will be
<code>NA</code>. If <code>combine == FALSE</code> and a code is the result of a
combination of codes, the result will be <code>NA</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(klassR)
codes &lt;- get_klass(131, date = "2020-01-01")[["code"]]

## Not run: 
updated_codes &lt;- update_klass(codes,
  dates = "2020-01-01",
  classification = 131
)

## End(Not run)

</code></pre>

<hr>
<h2 id='update_klass_node'>Given a node and a graph, find the node at the end of a sequence of changes.</h2><span id='topic+update_klass_node'></span>

<h3>Description</h3>

<p>Given a node and a graph, find the node at the end of a sequence of changes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_klass_node(graph, node)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="update_klass_node_+3A_graph">graph</code></td>
<td>
<p>A graph generated by <code><a href="#topic+klass_graph">klass_graph</a></code>.</p>
</td></tr>
<tr><td><code id="update_klass_node_+3A_node">node</code></td>
<td>
<p>A node as returned by <code><a href="#topic+klass_node">klass_node</a></code> or
<code><a href="igraph.html#topic+V">V</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A sequence of vertices, starting with <code>node</code> and ending with the
last visited node.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Build a graph directed towards the most recent codes.
library(klassR)
klass_131 &lt;- klass_graph(131)

# Find the most recent node in the graph representing the code "0101" (Halden,
# valid to 2020.)
halden_node &lt;- klass_node(klass_131, "0101")

# Find the most recent code corresponding to 0101 Halden
halden_node_updated &lt;- update_klass_node(klass_131, halden_node)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
