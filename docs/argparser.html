<!DOCTYPE html><html><head><title>Help for package argparser</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {argparser}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#argparser-package'><p>Command-line argument parser</p></a></li>
<li><a href='#add_argument'><p>Add an argument to a parser.</p></a></li>
<li><a href='#add.argument'><p>Add an argument to a parser.</p></a></li>
<li><a href='#arg_parser'><p>Create an argument parser.</p></a></li>
<li><a href='#arg.parser'><p>Create an argument parser.</p></a></li>
<li><a href='#include'><p>Include R script file</p></a></li>
<li><a href='#parse_args'><p>Parse arguments with a parser.</p></a></li>
<li><a href='#parse.args'><p>Parse arguments with a parser.</p></a></li>
<li><a href='#print.arg.parser'><p>Print the help message for an arg.parser.</p></a></li>
<li><a href='#show_arg_labels'><p>Extract label and help strings from parser.</p></a></li>
<li><a href='#spaces'><p>Space string.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Command-Line Argument Parser</td>
</tr>
<tr>
<td>Version:</td>
<td>0.7.2</td>
</tr>
<tr>
<td>Author:</td>
<td>David J. H. Shih</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>David J. H. Shih &lt;djh.shih@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Cross-platform command-line argument parser written purely in R
    with no external dependencies. It is useful with the Rscript
    front-end and facilitates turning an R script into an executable script.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://bitbucket.org/djhshih/argparser">https://bitbucket.org/djhshih/argparser</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://bitbucket.org/djhshih/argparser/issues">https://bitbucket.org/djhshih/argparser/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>methods</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-04-03 15:42:34 UTC; davids</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-04-04 05:03:14 UTC</td>
</tr>
</table>
<hr>
<h2 id='argparser-package'>Command-line argument parser</h2><span id='topic+argparser'></span><span id='topic+argparser-package'></span>

<h3>Description</h3>

<p><code>argparser</code> provides functions for parsing command-line arguments.
</p>


<h3>Details</h3>

<p>To use the parser,
</p>

<ol>
<li><p> create an <code>arg.parser</code> object with <code><a href="#topic+arg_parser">arg_parser</a></code>;
</p>
</li>
<li><p> add arguments to the parser with <code><a href="#topic+add_argument">add_argument</a></code>;
</p>
</li>
<li><p> call <code><a href="#topic+parse_args">parse_args</a></code> to parse the command line arguments.
</p>
</li></ol>

<p>To execute the script, invoke <code>Rscript</code>.
Alternatively on Linux, insert a shebang on the first line
(<code>#!/usr/bin/env Rscript</code>) and <code>chmod +x</code> the script,
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://bitbucket.org/djhshih/argparser">https://bitbucket.org/djhshih/argparser</a>
</p>
</li>
<li><p> Report bugs at <a href="https://bitbucket.org/djhshih/argparser/issues">https://bitbucket.org/djhshih/argparser/issues</a>
</p>
</li></ul>


<hr>
<h2 id='add_argument'>Add an argument to a parser.</h2><span id='topic+add_argument'></span>

<h3>Description</h3>

<p>This function adds an argument to an <code>arg.parser</code> object and returns 
the modified object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_argument(
  parser,
  arg,
  help,
  default = NULL,
  type = NULL,
  nargs = NULL,
  flag = NULL,
  short = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_argument_+3A_parser">parser</code></td>
<td>
<p>an <code>arg.parser</code> object</p>
</td></tr>
<tr><td><code id="add_argument_+3A_arg">arg</code></td>
<td>
<p>argument name (use no prefix for positional arguments,
<code>--</code> or <code>-</code> prefix for optional arguments or flags)</p>
</td></tr>
<tr><td><code id="add_argument_+3A_help">help</code></td>
<td>
<p>help description for the argument</p>
</td></tr>
<tr><td><code id="add_argument_+3A_default">default</code></td>
<td>
<p>default value for the argument [default: NA]</p>
</td></tr>
<tr><td><code id="add_argument_+3A_type">type</code></td>
<td>
<p>variable type of the argument (which can be inferred from 
<code>default</code>); assumed to be <code>character</code> otherwise.
See details for more information.</p>
</td></tr>
<tr><td><code id="add_argument_+3A_nargs">nargs</code></td>
<td>
<p>number of argument values (which can be inferred from 
<code>default</code>); set to <code>Inf</code> for an indefinite number;
an optional argument with an indefinite number of values may
need to be followed by another optional argument or flag (e.g.
<code>--</code>) to separate the indefinite optional argument from
possible position arguments</p>
</td></tr>
<tr><td><code id="add_argument_+3A_flag">flag</code></td>
<td>
<p>whether argument is a flag (and does not consume a value)
[default: FALSE]; during argument parsing, a flag argument 
is FALSE by default if it is not set</p>
</td></tr>
<tr><td><code id="add_argument_+3A_short">short</code></td>
<td>
<p>short-form for flags and positional arguments;
short-forms can be assigned automatically based on the first
character of the argument name, unless a conflict arises with
an existing short-form; to avoid conflicts, add the argument 
as early as possible</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function supports multiple arguments in a vector. To ensure that the
argument variable type is set correctly, either specify <code>type</code> directly
or supply <code>default</code> argument values as a list. 
Custom types are supported by defining a new class and a S4 method for
<code>coerce</code>, see the examples section.
</p>


<h3>Value</h3>

<p>an <code>arg.parser</code> object with the argument added
</p>


<h3>Note</h3>

<p>Dashes <code>-</code> that occur in the stem of the argument names
(e.g. &ndash;argument-name) will be converted to underscores <code>_</code> 
(e.g. argument_name) in the name of the corresponding variable.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- arg_parser("A text file modifying program")

# Add a positional argument
p &lt;- add_argument(p, "input", help="input file")

# Add an optional argument
p &lt;- add_argument(p, "--output", help="output file", default="output.txt")

# Add a flag
p &lt;- add_argument(p, "--append", help="append to file", flag=TRUE)

# Add multiple arguments together
p &lt;- add_argument(p,
    c("ref", "--date", "--sort"),
    help = c("reference file", "date stamp to use", "sort lines"),
    flag = c(FALSE, FALSE, TRUE))

# Print the help message
print(p)

# Example of custom type, using the example from pythons argparse
setClass("perfectSquare")
setMethod("coerce", c(from = "ANY", to = "perfectSquare"),
    function(from, to) {
      from &lt;- as.numeric(from)
      if (!all.equal(from, as.integer(from))) {
        stop("Type error: ", from, " is not an integer!")
      }
      sqt &lt;- sqrt(from)
      if (sqt != as.integer(sqt)) {
         stop("Type error: ", from, " is not a perfect square!")
      }
      from
    }
)

p2 &lt;- arg_parser("Perfect square checker")
p2 &lt;- add_argument(p2, arg = c("--perfect-square"), 
                   help = "A perfect square integer",
                   type = "perfectSquare")

parse_args(p2, c("--perfect-square", 144))

</code></pre>

<hr>
<h2 id='add.argument'>Add an argument to a parser.</h2><span id='topic+add.argument'></span>

<h3>Description</h3>

<p>This function is deprecated. Use <code>add_argument</code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add.argument(
  parser,
  arg,
  help,
  default = NULL,
  type = NULL,
  flag = NULL,
  short = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add.argument_+3A_parser">parser</code></td>
<td>
<p>an <code>arg.parser</code> object</p>
</td></tr>
<tr><td><code id="add.argument_+3A_arg">arg</code></td>
<td>
<p>argument name (use no prefix for positional arguments,
<code>--</code> or <code>-</code> prefix for optional arguments or flags)</p>
</td></tr>
<tr><td><code id="add.argument_+3A_help">help</code></td>
<td>
<p>help description for the argument</p>
</td></tr>
<tr><td><code id="add.argument_+3A_default">default</code></td>
<td>
<p>default value for the argument [default: NA]</p>
</td></tr>
<tr><td><code id="add.argument_+3A_type">type</code></td>
<td>
<p>variable type of the argument (which can be inferred from 
<code>default</code>), assumed to be <code>character</code> otherwise</p>
</td></tr>
<tr><td><code id="add.argument_+3A_flag">flag</code></td>
<td>
<p>whether argument is a flag (and does not consume a value)
[default: FALSE]</p>
</td></tr>
<tr><td><code id="add.argument_+3A_short">short</code></td>
<td>
<p>short-form for flags and positional arguments;
short-forms can be assigned automatically based on the first
character of the argument name, unless a conflict arises with
an existing short-form; to avoid conflicts, add the argument 
as early as possible</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an <code>arg.parser</code> object with the argument added
</p>

<hr>
<h2 id='arg_parser'>Create an argument parser.</h2><span id='topic+arg_parser'></span>

<h3>Description</h3>

<p>This function creates an <code>arg.parser</code> object. It infers the program 
name from the file name of the invoked script.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>arg_parser(description, name = NULL, hide.opts = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="arg_parser_+3A_description">description</code></td>
<td>
<p>description of the program</p>
</td></tr>
<tr><td><code id="arg_parser_+3A_name">name</code></td>
<td>
<p>name of the program</p>
</td></tr>
<tr><td><code id="arg_parser_+3A_hide.opts">hide.opts</code></td>
<td>
<p>hide the <code>--opts</code> argument</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The argument parser will be created by default with two arguments:
<code>--help</code> and <code>--opts</code>. The latter argument can be used for
loading a list of argument values that are saved in a RDS file.
</p>


<h3>Value</h3>

<p>a new <code>arg.parser</code> object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- arg_parser("A test program")

</code></pre>

<hr>
<h2 id='arg.parser'>Create an argument parser.</h2><span id='topic+arg.parser'></span>

<h3>Description</h3>

<p>This function is deprecated. Use <code>arg_parser</code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>arg.parser(description, name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="arg.parser_+3A_description">description</code></td>
<td>
<p>description of the program</p>
</td></tr>
<tr><td><code id="arg.parser_+3A_name">name</code></td>
<td>
<p>name of the program</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a new <code>arg.parser</code> object
</p>

<hr>
<h2 id='include'>Include R script file</h2><span id='topic+include'></span>

<h3>Description</h3>

<p>Include R script with behaviour similar to C++ <code>#include
"header.h"</code>, by searching in the directory where the 
current script file resides.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>include(file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="include_+3A_file">file</code></td>
<td>
<p>name</p>
</td></tr>
</table>

<hr>
<h2 id='parse_args'>Parse arguments with a parser.</h2><span id='topic+parse_args'></span>

<h3>Description</h3>

<p>This function uses an <code>arg.parser</code> object to parse command line arguments or a
character vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_args(parser, argv = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parse_args_+3A_parser">parser</code></td>
<td>
<p>an <code>arg.parser</code> object</p>
</td></tr>
<tr><td><code id="parse_args_+3A_argv">argv</code></td>
<td>
<p>a character vector to parse (arguments and values should 
already be split by whitespace);
if <code>NULL</code>, values will be obtained from <code>argv</code> if
<code>argv</code> exists in the global scope, or from
<code>commandArgs(trailingOnly=TRUE)</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with argument values
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- arg_parser('pi')
p &lt;- add_argument(p, "--digits",
  help="number of significant digits to print", default=7)

## Not run: 
# If arguments are passed from the command line,
# then we would use the following:
argv &lt;- parse_args(p)

## End(Not run)

# For testing purposes, we can pass a character vector:
argv &lt;- parse_args(p, c("-d", "30"))

# Now, the script runs based on the passed arguments
digits &lt;- if (argv$digits &gt; 22) 22 else argv$digits
print(pi, digits=digits)

## Not run: 
# We can also save an argument list for later use
saveRDS(argv, "arguments.rds")

# To use the saved arguments, use the --opts argument at the command line
#$ ./script.R --opts arguments.rds

## End(Not run) 

</code></pre>

<hr>
<h2 id='parse.args'>Parse arguments with a parser.</h2><span id='topic+parse.args'></span>

<h3>Description</h3>

<p>This function is deprecated. Use <code>parse_args</code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse.args(parser, argv = commandArgs(trailingOnly = TRUE))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parse.args_+3A_parser">parser</code></td>
<td>
<p>an <code>arg.parser</code> object</p>
</td></tr>
<tr><td><code id="parse.args_+3A_argv">argv</code></td>
<td>
<p>a character vector to parse (arguments and values should 
already be split by whitespace)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with argument values
</p>

<hr>
<h2 id='print.arg.parser'>Print the help message for an arg.parser.</h2><span id='topic+print.arg.parser'></span>

<h3>Description</h3>

<p>This function prints the help message.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'arg.parser'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.arg.parser_+3A_x">x</code></td>
<td>
<p>an <code>arg.parser</code> object</p>
</td></tr>
<tr><td><code id="print.arg.parser_+3A_...">...</code></td>
<td>
<p>unused arguments</p>
</td></tr>
</table>


<h3>Details</h3>

<p>At the command line, we would use the <code>--help</code> or <code>-help</code> flag
to print the help message:
<code>$ script --help</code>
</p>

<hr>
<h2 id='show_arg_labels'>Extract label and help strings from parser.</h2><span id='topic+show_arg_labels'></span>

<h3>Description</h3>

<p>Extract label and help strings from parser.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_arg_labels(parser)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show_arg_labels_+3A_parser">parser</code></td>
<td>
<p><code>arg.parser</code> object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list containing a <code>reg.args</code>, <code>flags</code>, and
<code>opt.args</code> list, which each containing a <code>label</code>
string and a <code>help</code> string
</p>

<hr>
<h2 id='spaces'>Space string.</h2><span id='topic+spaces'></span>

<h3>Description</h3>

<p>Space string.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spaces(n)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spaces_+3A_n">n</code></td>
<td>
<p>number of spaces</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character string containing <code>n</code> spaces
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
