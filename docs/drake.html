<!DOCTYPE html><html><head><title>Help for package drake</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {drake}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#drake-package'><p>drake: A pipeline toolkit for reproducible computation at scale.</p></a></li>
<li><a href='#analyses'><p>analyses <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#analysis_wildcard'><p>Show the analysis wildcard</p>
used in <code>plan_summaries()</code>.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#as_drake_filename'><p>as_drake_filename <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#as_file'><p>as_file <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#available_hash_algos'><p>List the available hash algorithms for drake caches.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#backend'><p>backend <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#bind_plans'><p>Row-bind together drake plans</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#build_drake_graph'><p>Function <code>build_drake_graph</code></p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#build_graph'><p>build_graph <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#build_times'><p>See the time it took to build each target.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#built'><p>List all the built targets (non-imports) in the cache.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#cache_namespaces'><p>List all the <code>storr</code> cache namespaces used by drake.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#cache_path'><p>Return the file path where the cache is stored,</p>
if applicable.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#cached'><p>List targets in the cache.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#cached_planned'><p>List targets in both the plan and the cache.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#cached_unplanned'><p>List targets in the cache but not the plan.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#cancel'><p>Cancel a target mid-build <a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></p></a></li>
<li><a href='#cancel_if'><p>Cancel a target mid-build under some condition</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#check'><p>check <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#check_plan'><p>Check a workflow plan data frame for obvious errors.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#clean'><p>Invalidate and deregister targets.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#clean_main_example'><p>Deprecated: clean the main example from <code>drake_example("main")</code></p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#clean_mtcars_example'><p>Clean the mtcars example from <code>drake_example("mtcars")</code></p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#cleaned_namespaces'><p>Auxiliary storr namespaces</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#cmq_build'><p>Build a target using the clustermq backend</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#code_to_function'><p>Turn a script into a function.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#code_to_plan'><p>Turn an R script file or <code>knitr</code> / R Markdown report</p>
into a <code>drake</code> plan.
<a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a></a></li>
<li><a href='#config'><p>config <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#configure_cache'><p>Configure the hash algorithms, etc. of a drake cache.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#dataframes_graph'><p>dataframes_graph <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#dataset_wildcard'><p>Show the dataset wildcard</p>
used in <code>plan_analyses()</code> and <code>plan_summaries()</code>.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#debug_and_run'><p>Run a function in debug mode.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#default_graph_title'><p>Return the default title for graph visualizations</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#soft-deprecated"><img src="../help/figures/lifecycle-soft-deprecated.svg" alt='[Soft-deprecated]' /></a></a></li>
<li><a href='#default_long_hash_algo'><p>Return the default long hash algorithm for <code>make()</code>.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#default_Makefile_args'><p>Default arguments of Makefile parallelism</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#default_Makefile_command'><p>Default Makefile command</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#default_parallelism'><p>Default parallel backend</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#default_recipe_command'><p>Default Makefile recipe command</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#default_short_hash_algo'><p>Return the default short hash algorithm for <code>make()</code>.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#default_system2_args'><p>default_system2_args <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#default_verbose'><p>Default verbosity</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#dependency_profile'><p>States of the dependencies of a target</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#deprecate_wildcard'><p>deprecate_wildcard <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#deps'><p>deps <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#deps_code'><p>List the dependencies of a function or command</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#deps_knitr'><p>Find the drake dependencies of a dynamic knitr report target.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#deps_profile'><p>Find out why a target is out of date.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#deps_profile_impl'><p>Internal function with a drake_config() argument</p></a></li>
<li><a href='#deps_target'><p>List the dependencies of a target</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#deps_target_impl'><p>Internal function with a drake_config() argument</p></a></li>
<li><a href='#deps_targets'><p>See the dependencies of a target</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#diagnose'><p>Get diagnostic metadata on a target.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#do_prework'><p>Do the prework in the <code>prework</code></p>
argument to <code>make()</code>.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#doc_of_function_call'><p>doc_of_function_call <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#drake_batchtools_tmpl_file'><p>Get a template file for execution on a cluster.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#drake_build'><p>Build/process a single target or import.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a></a></li>
<li><a href='#drake_build_impl'><p>Internal function with a drake_config() argument</p></a></li>
<li><a href='#drake_cache'><p>Get the cache of a <code>drake</code> project.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#drake_cache_log'><p>Get the state of the cache.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#drake_cache_log_file'><p>Generate a flat text log file to represent the state of</p>
the cache.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#drake_cancelled'><p>List cancelled targets.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#drake_config'><p>Ending of _drake.R for r_make() and friends</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#drake_debug'><p>Run a single target's command in debug mode.'</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a></a></li>
<li><a href='#drake_deps'><p><code>drake_deps</code> helper</p></a></li>
<li><a href='#drake_deps_ht'><p><code>drake_deps_ht</code> helper</p></a></li>
<li><a href='#drake_done'><p>List done targets.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#drake_envir'><p>Get the environment where drake builds targets</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a></a></li>
<li><a href='#drake_example'><p>Download the files of an example <code>drake</code> project.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#drake_examples'><p>List the names of all the drake examples.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#drake_failed'><p>List failed targets.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#drake_gc'><p>Do garbage collection on the drake cache.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#drake_get_session_info'><p>Session info of the last call to <code>make()</code>.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#drake_ggraph'><p>Visualize the workflow with <code>ggraph</code>/<code>ggplot2</code></p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#drake_ggraph_impl'><p>Internal function with a drake_config() argument</p></a></li>
<li><a href='#drake_graph_info'><p>Prepare the workflow graph for visualization</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#drake_graph_info_impl'><p>Internal function</p></a></li>
<li><a href='#drake_history'><p>History and provenance</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#drake_hpc_template_file'><p>Write a template file for deploying</p>
work to a cluster / job scheduler.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#drake_hpc_template_files'><p>List the available example template files for deploying</p>
work to a cluster / job scheduler.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#drake_meta'><p>Compute the initial pre-build metadata</p>
of a target or import.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#drake_palette'><p>Show drake's color palette.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#drake_plan'><p>Create a drake plan</p>
for the <code>plan</code> argument of <code>make()</code>.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#drake_plan_source'><p>Show the code required to produce a given <code>drake</code> plan</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#drake_progress'><p>Get the build progress of your targets</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#drake_quotes'><p>Put quotes around each element of a character vector.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#drake_running'><p>List running targets.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#drake_script'><p>Write an example <code style="white-space: pre;">&#8288;_drake.R&#8288;</code> script to the current working directory.</p></a></li>
<li><a href='#drake_session'><p>Session info of the last call to <code>make()</code>.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#drake_settings'><p><code>drake_settings</code> helper</p></a></li>
<li><a href='#drake_slice'><p>Take a strategic subset of a dataset.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#drake_strings'><p>Turn valid expressions into character strings.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#drake_tempfile'><p>drake tempfile</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#drake_tip'><p>Output a random tip about drake.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#drake_triggers'><p><code>drake_triggers</code> helper</p></a></li>
<li><a href='#drake_unquote'><p>Remove leading and trailing</p>
escaped quotes from character strings.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#evaluate'><p>evaluate <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#evaluate_plan'><p>Use wildcard templating to create a</p>
workflow plan data frame from a template data frame.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#example_drake'><p>example_drake <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#examples_drake'><p>examples_drake <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#expand'><p>expand <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#expand_plan'><p>Deprecated: create replicates of targets.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#expose_imports'><p>Deprecated: expose package functions and objects for</p>
analysis with drake.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#failed'><p>List failed targets.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#file_in'><p>Declare input files and directories.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#file_out'><p>Declare output files and directories.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#file_store'><p>Show a file's encoded representation in the cache</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#find_cache'><p>Search up the file system for the nearest drake cache.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#find_knitr_doc'><p>find_knitr_doc <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#find_project'><p>Search up the file system</p>
for the nearest root path of a drake project.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#from_plan'><p>from_plan <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#future_build'><p>Task passed to individual futures in the <code>"future"</code> backend</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#gather'><p>gather <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#gather_by'><p>Gather multiple groupings of targets</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#gather_plan'><p>Combine targets</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#get_cache'><p>The default cache of a <code>drake</code> project.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#get_trace'><p>Deprecated, get a trace of a dynamic target's value.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#id_chr'><p>Name of the current target <a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></p></a></li>
<li><a href='#ignore'><p>Ignore code</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#imported'><p>List all the imports in the drake cache.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#in_progress'><p>List the targets in progress</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#is_function_call'><p>is_function_call <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#isolate_example'><p>Isolate the side effects of an example.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#knitr_deps'><p>Dependencies of a knitr report</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#knitr_in'><p>Declare <code>knitr</code>/<code>rmarkdown</code> source files</p>
as dependencies.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#legend_nodes'><p>Create the nodes data frame used in the legend</p>
of the graph visualizations.
<a href="https://lifecycle.r-lib.org/articles/stages.html#soft-deprecated"><img src="../help/figures/lifecycle-soft-deprecated.svg" alt='[Soft-deprecated]' /></a></a></li>
<li><a href='#load_basic_example'><p>load_basic_example <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#load_main_example'><p>Load the main example.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#load_mtcars_example'><p>Load the mtcars example.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#long_hash'><p><code>drake</code> now has just one hash algorithm per cache.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#make'><p>Run your project (build the outdated targets).</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#make_impl'><p>Internal function with a drake_config() argument</p></a></li>
<li><a href='#make_imports'><p>Just process the imports</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#make_targets'><p>Just make the targets</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#make_with_config'><p>Apply make() with a pre-computed config object</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#Makefile_recipe'><p>Default Makefile recipe</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#manage_memory'><p>Manage the in-memory dependencies of a target.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#map_plan'><p>Create a plan that maps a function to a grid of arguments.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#max_useful_jobs'><p>max_useful_jobs <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#migrate_drake_project'><p>migrate_drake_project <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#missed'><p>Report any import objects required by your drake_plan</p>
plan but missing from your workspace or file system.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#missed_impl'><p>Internal function with a drake_config() argument</p></a></li>
<li><a href='#new_cache'><p>Make a new <code>drake</code> cache. <a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></p></a></li>
<li><a href='#new_drake_deps'><p><code>drake_deps</code> constructor</p></a></li>
<li><a href='#new_drake_deps_ht'><p><code>drake_deps_ht</code> constructor</p></a></li>
<li><a href='#new_drake_settings'><p><code>drake_settings</code> constructor</p></a></li>
<li><a href='#new_drake_triggers'><p><code>drake_triggers</code> constructor</p></a></li>
<li><a href='#no_deps'><p>Suppress dependency detection.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#outdated'><p>List the targets that are out of date.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#outdated_impl'><p>Internal function with a drake_config() argument</p></a></li>
<li><a href='#parallel_stages'><p>parallel_stages <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#parallelism_choices'><p>Names of old parallel backends</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#plan'><p>plan <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#plan_analyses'><p>Specialized wildcard for analyses</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#plan_drake'><p>plan_drake <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#plan_summaries'><p>Specialized wildcard for summaries</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#plan_to_code'><p>Turn a <code>drake</code> plan into a plain R script file.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a></a></li>
<li><a href='#plan_to_notebook'><p>Turn a <code>drake</code> plan into an R notebook.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a></a></li>
<li><a href='#plot_graph'><p>plot_graph <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#predict_load_balancing'><p>Predict parallel computing behavior</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#predict_runtime'><p>Predict the elapsed runtime of the next call to <code>make()</code></p>
for non-staged parallel backends.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#predict_runtime_impl'><p>Internal function with a drake_config() argument</p></a></li>
<li><a href='#predict_workers'><p>Predict the load balancing of the next call to <code>make()</code></p>
for non-staged parallel backends.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#predict_workers_impl'><p>Internal function with a drake_config() argument</p></a></li>
<li><a href='#process_import'><p>Process an imported data object</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#progress'><p>Get the build progress of your targets</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#prune_drake_graph'><p>Prune the graph</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#r_make'><p>Launch a drake function in a fresh new R process</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#r_recipe_wildcard'><p>Default Makefile recipe wildcard</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#rate_limiting_times'><p>rate_limiting_times <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#read_config'><p>read_config <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#read_drake_config'><p>Read a config object from the cache</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#read_drake_graph'><p>Read a workflow graph from the cache</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#read_drake_meta'><p>read_drake_meta <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#read_drake_plan'><p>Read the plan from the cache</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#read_drake_seed'><p>Read the pseudo-random number generator seed of the project.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#read_graph'><p>read_graph <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#read_plan'><p>read_plan <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#read_trace'><p>Read a trace of a dynamic target.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#readd'><p>Read and return a drake target/import from the cache.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#recover_cache'><p>Load or create a drake cache</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#recoverable'><p>List the most upstream <em>recoverable</em> outdated targets.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#recoverable_impl'><p>Internal function with a drake_config() argument</p></a></li>
<li><a href='#reduce_by'><p>Reduce multiple groupings of targets</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#reduce_plan'><p>Write commands to reduce several targets down to one.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#render_drake_ggraph'><p>Visualize the workflow with <code>ggplot2</code>/<code>ggraph</code> using</p>
<code>drake_graph_info()</code> output.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#render_drake_graph'><p>Render a visualization using the data frames</p>
generated by <code>drake_graph_info()</code>.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#render_graph'><p>render_graph <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#render_sankey_drake_graph'><p>Render a Sankey diagram from <code>drake_graph_info()</code>.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#render_static_drake_graph'><p>Deprecated: render a <code>ggraph</code>/<code>ggplot2</code> representation</p>
of your drake project.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#render_text_drake_graph'><p>Show a workflow graph as text in your terminal window</p>
using <code>drake_graph_info()</code> output.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#rescue_cache'><p>Try to repair a drake cache that is prone</p>
to throwing <code>storr</code>-related errors.
<a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a></a></li>
<li><a href='#rs_addin_loadd'><p>Loadd target at cursor into global environment</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#rs_addin_r_make'><p>RStudio addin for r_make()</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#rs_addin_r_outdated'><p>RStudio addin for r_outdated()</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#rs_addin_r_vis_drake_graph'><p>RStudio addin for r_vis_drake_graph()</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#running'><p>List running targets.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#sankey_drake_graph'><p>Show a Sankey graph of your drake project.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#sankey_drake_graph_impl'><p>Internal function with a drake_config() argument</p></a></li>
<li><a href='#session'><p>session <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#shell_file'><p>Shell file for Makefile parallelism</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#short_hash'><p><code>drake</code> now only uses one hash algorithm per cache.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#show_source'><p>Show how a target/import was produced.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#static_drake_graph'><p>Deprecated: show a <code>ggraph</code>/<code>ggplot2</code> representation</p>
of your drake project.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#subtargets'><p>List sub-targets <a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></p></a></li>
<li><a href='#summaries'><p>summaries <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#target'><p>Customize a target in <code>drake_plan()</code>.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#target_namespaces'><p>Storr namespaces for targets</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#text_drake_graph'><p>Show a workflow graph as text in your terminal window.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#text_drake_graph_impl'><p>Internal function with a drake_config() argument</p></a></li>
<li><a href='#this_cache'><p>Get the cache at the exact file path specified.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#tracked'><p>List the targets and imports that are reproducibly tracked.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#transform_plan'><p>Transform a plan</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#transformations'><p>Transformations in <code>drake_plan()</code>. <a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></p></a></li>
<li><a href='#trigger'><p>Customize the decision rules for rebuilding targets</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#triggers'><p>List the old drake triggers.</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></a></li>
<li><a href='#type_sum.expr_list'><p>Type summary printing</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a></a></li>
<li><a href='#use_drake'><p>Use drake in a project</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a></a></li>
<li><a href='#vis_drake_graph'><p>Show an interactive visual network representation</p>
of your drake project.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#vis_drake_graph_impl'><p>Internal function with a drake_config() argument</p></a></li>
<li><a href='#walk_code'><p>Static code analysis</p></a></li>
<li><a href='#which_clean'><p>Which targets will <code>clean()</code> invalidate?</p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></a></li>
<li><a href='#workflow'><p>workflow <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
<li><a href='#workplan'><p>workplan <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>A Pipeline Toolkit for Reproducible Computation at Scale</td>
</tr>
<tr>
<td>Version:</td>
<td>7.13.9</td>
</tr>
<tr>
<td>Description:</td>
<td>A general-purpose computational engine for data
  analysis, drake rebuilds intermediate data objects when their
  dependencies change, and it skips work when the results are already up
  to date.  Not every execution starts from scratch, there is native
  support for parallel and distributed computing, and completed projects
  have tangible evidence that they are reproducible.  Extensive
  documentation, from beginner-friendly tutorials to practical examples
  and more, is available at the reference website
  <a href="https://docs.ropensci.org/drake/">https://docs.ropensci.org/drake/</a> and the online manual
  <a href="https://books.ropensci.org/drake/">https://books.ropensci.org/drake/</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ropensci/drake">https://github.com/ropensci/drake</a>,
<a href="https://docs.ropensci.org/drake/">https://docs.ropensci.org/drake/</a>,
<a href="https://books.ropensci.org/drake/">https://books.ropensci.org/drake/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/drake/issues">https://github.com/ropensci/drake/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.3.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>base64url, digest (&ge; 0.6.21), igraph, methods, parallel,
rlang (&ge; 0.2.0), storr (&ge; 1.1.0), tidyselect (&ge; 1.0.0), txtq
(&ge; 0.2.3), utils, vctrs (&ge; 0.2.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>abind, bindr, callr, cli (&ge; 1.1.0), clustermq (&ge; 0.9.1),
crayon, curl (&ge; 2.7), data.table, datasets, disk.frame,
downloader, fst, future (&ge; 1.3.0), ggplot2, ggraph, grDevices,
keras, knitr, lubridate, networkD3, prettycode, progress (&ge;
1.2.2), qs (&ge; 0.20.2), Rcpp, rmarkdown, rstudioapi, stats,
styler (&ge; 1.2.0), testthat (&ge; 2.1.0), tibble, txtplot,
usethis, visNetwork (&ge; 2.0.9), webshot</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-04 14:47:02 UTC; C240390</td>
</tr>
<tr>
<td>Author:</td>
<td>William Michael Landau
    <a href="https://orcid.org/0000-0003-1878-3253"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Alex Axthelm [ctb],
  Jasper Clarkberg [ctb],
  Kirill Mller [ctb],
  Ben Bond-Lamberty <a href="https://orcid.org/0000-0001-9525-4633"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Tristan Mahr <a href="https://orcid.org/0000-0002-8890-5116"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Miles McBain <a href="https://orcid.org/0000-0003-2865-2548"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Noam Ross <a href="https://orcid.org/0000-0002-2136-0000"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Ellis Hughes [ctb],
  Matthew Mark Strasiotto [ctb],
  Ben Marwick [rev],
  Peter Slaughter [rev],
  Eli Lilly and Company [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>William Michael Landau &lt;will.landau.oss@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-04 15:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='drake-package'>drake: A pipeline toolkit for reproducible computation at scale.</h2><span id='topic+drake-package'></span><span id='topic+drake'></span>

<h3>Description</h3>

<p>drake is a pipeline toolkit
(<code style="white-space: pre;">&#8288;https://github.com/pditommaso/awesome-pipeline&#8288;</code>)
and a scalable, R-focused solution for reproducibility
and high-performance computing.
</p>


<h3>Author(s)</h3>

<p>William Michael Landau <a href="mailto:will.landau@gmail.com">will.landau@gmail.com</a>
</p>


<h3>References</h3>

<p><code style="white-space: pre;">&#8288;https://github.com/ropensci/drake&#8288;</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
library(drake)
load_mtcars_example() # Get the code with drake_example("mtcars").
make(my_plan) # Build everything.
plot(my_plan) # fast call to vis_drake_graph()
make(my_plan) # Nothing is done because everything is already up to date.
reg2 = function(d) { # Change one of your functions.
  d$x3 = d$x^3
  lm(y ~ x3, data = d)
}
make(my_plan) # Only the pieces depending on reg2() get rebuilt.
# Write a flat text log file this time.
make(my_plan, cache_log_file = TRUE)
# Read/load from the cache.
readd(small)
loadd(large)
head(large)
}
# Dynamic branching
# Get the mean mpg for each cyl in the mtcars dataset.
plan &lt;- drake_plan(
  raw = mtcars,
  group_index = raw$cyl,
  munged = target(raw[, c("mpg", "cyl")], dynamic = map(raw)),
  mean_mpg_by_cyl = target(
    data.frame(mpg = mean(munged$mpg), cyl = munged$cyl[1]),
    dynamic = group(munged, .by = group_index)
  )
)
make(plan)
readd(mean_mpg_by_cyl)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='analyses'>analyses <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+analyses'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>analyses(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="analyses_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='analysis_wildcard'>Show the analysis wildcard
used in <code><a href="#topic+plan_summaries">plan_summaries()</a></code>.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+analysis_wildcard'></span>

<h3>Description</h3>

<p>Deprecated on 2019-01-12.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>analysis_wildcard()
</code></pre>


<h3>Details</h3>

<p>Used to generate workflow plan data frames.
</p>


<h3>Value</h3>

<p>The analysis wildcard used in <code><a href="#topic+plan_summaries">plan_summaries()</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plan_summaries">plan_summaries()</a></code>
</p>

<hr>
<h2 id='as_drake_filename'>as_drake_filename <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+as_drake_filename'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_drake_filename(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_drake_filename_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='as_file'>as_file <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+as_file'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_file(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_file_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='available_hash_algos'>List the available hash algorithms for drake caches.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+available_hash_algos'></span>

<h3>Description</h3>

<p>Deprecated on 2018-12-12.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>available_hash_algos()
</code></pre>


<h3>Value</h3>

<p>A character vector of names of available hash algorithms.
</p>

<hr>
<h2 id='backend'>backend <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+backend'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>backend(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="backend_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='bind_plans'>Row-bind together drake plans
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+bind_plans'></span>

<h3>Description</h3>

<p>Combine drake plans together in a way that
correctly fills in missing entries.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bind_plans(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bind_plans_+3A_...">...</code></td>
<td>
<p>Workflow plan data frames (see <code><a href="#topic+drake_plan">drake_plan()</a></code>).</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># You might need to refresh your data regularly (see ?triggers).
download_plan &lt;- drake_plan(
  data = target(
    command = download_data(),
    trigger = "always"
  )
)
# But if the data don't change, the analyses don't need to change.
analysis_plan &lt;- drake_plan(
  usage = get_usage_metrics(data),
  topline = scrape_topline_table(data)
)
your_plan &lt;- bind_plans(download_plan, analysis_plan)
your_plan
</code></pre>

<hr>
<h2 id='build_drake_graph'>Function <code>build_drake_graph</code>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+build_drake_graph'></span>

<h3>Description</h3>

<p>Use <code><a href="#topic+drake_config">drake_config()</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_drake_graph(
  plan,
  targets = plan$target,
  envir = parent.frame(),
  verbose = 1L,
  jobs = 1,
  console_log_file = NULL,
  trigger = drake::trigger(),
  cache = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="build_drake_graph_+3A_plan">plan</code></td>
<td>
<p>Workflow plan data frame.
A workflow plan data frame is a data frame
with a <code>target</code> column and a <code>command</code> column.
(See the details in the <code><a href="#topic+drake_plan">drake_plan()</a></code> help file
for descriptions of the optional columns.)
Targets are the objects that drake generates,
and commands are the pieces of R code that produce them.
You can create and track custom files along the way
(see <code><a href="#topic+file_in">file_in()</a></code>, <code><a href="#topic+file_out">file_out()</a></code>, and <code><a href="#topic+knitr_in">knitr_in()</a></code>).
Use the function <code><a href="#topic+drake_plan">drake_plan()</a></code> to generate workflow plan
data frames.</p>
</td></tr>
<tr><td><code id="build_drake_graph_+3A_targets">targets</code></td>
<td>
<p>Character vector, names of targets to build.
Dependencies are built too. You may supply static and/or whole
dynamic targets, but no sub-targets.</p>
</td></tr>
<tr><td><code id="build_drake_graph_+3A_envir">envir</code></td>
<td>
<p>Environment to use. Defaults to the current
workspace, so you should not need to worry about this
most of the time. A deep copy of <code>envir</code> is made,
so you don't need to worry about your workspace being modified
by <code>make</code>. The deep copy inherits from the global environment.
Wherever necessary, objects and functions are imported
from <code>envir</code> and the global environment and
then reproducibly tracked as dependencies.</p>
</td></tr>
<tr><td><code id="build_drake_graph_+3A_verbose">verbose</code></td>
<td>
<p>Integer, control printing to the console/terminal.
</p>

<ul>
<li> <p><code>0</code>: print nothing.
</p>
</li>
<li> <p><code>1</code>: print target-by-target messages as <code><a href="#topic+make">make()</a></code> progresses.
</p>
</li>
<li> <p><code>2</code>: show a progress bar to track how many targets are
done so far.
</p>
</li></ul>
</td></tr>
<tr><td><code id="build_drake_graph_+3A_jobs">jobs</code></td>
<td>
<p>Maximum number of parallel workers for processing the targets.
You can experiment with <code><a href="#topic+predict_runtime">predict_runtime()</a></code>
to help decide on an appropriate number of jobs.
For details, visit
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/time.html&#8288;</code>.</p>
</td></tr>
<tr><td><code id="build_drake_graph_+3A_console_log_file">console_log_file</code></td>
<td>
<p>Deprecated in favor of <code>log_make</code>.</p>
</td></tr>
<tr><td><code id="build_drake_graph_+3A_trigger">trigger</code></td>
<td>
<p>Name of the trigger to apply to all targets.
Ignored if <code>plan</code> has a <code>trigger</code> column.
See <code><a href="#topic+trigger">trigger()</a></code> for details.</p>
</td></tr>
<tr><td><code id="build_drake_graph_+3A_cache">cache</code></td>
<td>
<p>drake cache as created by <code><a href="#topic+new_cache">new_cache()</a></code>.
See also <code><a href="#topic+drake_cache">drake_cache()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Deprecated on 2018-11-02.
</p>


<h3>Value</h3>

<p>An <code>igraph</code> object.
</p>

<hr>
<h2 id='build_graph'>build_graph <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+build_graph'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_graph(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="build_graph_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='build_times'>See the time it took to build each target.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+build_times'></span>

<h3>Description</h3>

<p>Applies to targets in your plan, not imports or files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_times(
  ...,
  path = NULL,
  search = NULL,
  digits = 3,
  cache = drake::drake_cache(path = path),
  targets_only = NULL,
  verbose = NULL,
  jobs = 1,
  type = c("build", "command"),
  list = character(0)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="build_times_+3A_...">...</code></td>
<td>
<p>Targets to load from the cache: as names (symbols) or
character strings. If the <code>tidyselect</code> package is installed,
you can also supply <code>dplyr</code>-style <code>tidyselect</code>
commands such as <code>starts_with()</code>, <code>ends_with()</code>, and <code>one_of()</code>.</p>
</td></tr>
<tr><td><code id="build_times_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="build_times_+3A_search">search</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="build_times_+3A_digits">digits</code></td>
<td>
<p>How many digits to round the times to.</p>
</td></tr>
<tr><td><code id="build_times_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="build_times_+3A_targets_only">targets_only</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="build_times_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
<tr><td><code id="build_times_+3A_jobs">jobs</code></td>
<td>
<p>Number of jobs/workers for parallel processing.</p>
</td></tr>
<tr><td><code id="build_times_+3A_type">type</code></td>
<td>
<p>Type of time you want: either <code>"build"</code>
for the full build time including the time it took to
store the target, or <code>"command"</code> for the time it took
just to run the command.</p>
</td></tr>
<tr><td><code id="build_times_+3A_list">list</code></td>
<td>
<p>Character vector of targets to select.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Times for dynamic targets
(<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/dynamic.html&#8288;</code>)
only reflect the time it takes
to post-process the sub-targets (typically very fast)
and exclude the time it takes to build the sub-targets themselves.
Sub-targets build times are listed individually.
</p>


<h3>Value</h3>

<p>A data frame of times, each from <code><a href="base.html#topic+system.time">system.time()</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+predict_runtime">predict_runtime()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
if (requireNamespace("lubridate")) {
# Show the build times for the mtcars example.
load_mtcars_example() # Get the code with drake_example("mtcars").
make(my_plan) # Build all the targets.
print(build_times()) # Show how long it took to build each target.
}
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='built'>List all the built targets (non-imports) in the cache.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+built'></span>

<h3>Description</h3>

<p>Deprecated on 2019-01-08.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>built(
  path = getwd(),
  search = TRUE,
  cache = drake::get_cache(path = path, search = search, verbose = verbose),
  verbose = 1L,
  jobs = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="built_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="built_+3A_search">search</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="built_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="built_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
<tr><td><code id="built_+3A_jobs">jobs</code></td>
<td>
<p>Number of jobs/workers for parallel processing.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Targets are listed in the workflow plan
data frame (see <code><a href="#topic+drake_plan">drake_plan()</a></code>.
</p>


<h3>Value</h3>

<p>Character vector naming the built targets in the cache.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cached">cached()</a></code>, <code><a href="#topic+loadd">loadd()</a></code>
</p>

<hr>
<h2 id='cache_namespaces'>List all the <code>storr</code> cache namespaces used by drake.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+cache_namespaces'></span>

<h3>Description</h3>

<p>Deprecated on 2019-01-12.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cache_namespaces(default = storr::storr_environment()$default_namespace)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cache_namespaces_+3A_default">default</code></td>
<td>
<p>Name of the default <code>storr</code> namespace.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Ordinary users do not need to worry about this function.
It is just another window into <code>drake</code>'s internals.
</p>


<h3>Value</h3>

<p>A character vector of <code>storr</code> namespaces used for drake.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make">make()</a></code>
</p>

<hr>
<h2 id='cache_path'>Return the file path where the cache is stored,
if applicable.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+cache_path'></span>

<h3>Description</h3>

<p>Deprecated on 2019-01-12.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cache_path(cache = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cache_path_+3A_cache">cache</code></td>
<td>
<p>The cache whose file path you want to know.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently only works with
<code><a href="storr.html#topic+storr_rds">storr::storr_rds()</a></code> file system caches.
</p>


<h3>Value</h3>

<p>File path where the cache is stored.
</p>

<hr>
<h2 id='cached'>List targets in the cache.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+cached'></span>

<h3>Description</h3>

<p>Tip: read/load a cached item with <code><a href="#topic+readd">readd()</a></code>
or <code><a href="#topic+loadd">loadd()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cached(
  ...,
  list = character(0),
  no_imported_objects = FALSE,
  path = NULL,
  search = NULL,
  cache = drake::drake_cache(path = path),
  verbose = NULL,
  namespace = NULL,
  jobs = 1,
  targets_only = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cached_+3A_...">...</code></td>
<td>
<p>Deprecated. Do not use.
Objects to load from the cache, as names (unquoted)
or character strings (quoted). Similar to <code>...</code> in
<code>remove()</code>.</p>
</td></tr>
<tr><td><code id="cached_+3A_list">list</code></td>
<td>
<p>Deprecated. Do not use.
Character vector naming objects to be loaded from the
cache. Similar to the <code>list</code> argument of <code><a href="base.html#topic+remove">remove()</a></code>.</p>
</td></tr>
<tr><td><code id="cached_+3A_no_imported_objects">no_imported_objects</code></td>
<td>
<p>Logical, deprecated. Use
<code>targets_only</code> instead.</p>
</td></tr>
<tr><td><code id="cached_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="cached_+3A_search">search</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="cached_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="cached_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
<tr><td><code id="cached_+3A_namespace">namespace</code></td>
<td>
<p>Character scalar, name of the storr namespace
to use for listing objects.</p>
</td></tr>
<tr><td><code id="cached_+3A_jobs">jobs</code></td>
<td>
<p>Number of jobs/workers for parallel processing.</p>
</td></tr>
<tr><td><code id="cached_+3A_targets_only">targets_only</code></td>
<td>
<p>Logical. If <code>TRUE</code> just list the targets.
If <code>FALSE</code>, list files and imported objects too.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Either a named logical indicating whether the given
targets or cached or a character vector listing all cached
items, depending on whether any targets are specified.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cached_planned">cached_planned()</a></code>, <code><a href="#topic+cached_unplanned">cached_unplanned()</a></code>,
<code><a href="#topic+readd">readd()</a></code>, <code><a href="#topic+loadd">loadd()</a></code>,
<code><a href="#topic+drake_plan">drake_plan()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
if (requireNamespace("lubridate")) {
load_mtcars_example() # Load drake's canonical example.
make(my_plan) # Run the project, build all the targets.
cached()
cached(targets_only = FALSE)
}
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='cached_planned'>List targets in both the plan and the cache.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+cached_planned'></span>

<h3>Description</h3>

<p>Includes dynamic sub-targets as well.
See examples for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cached_planned(
  plan,
  path = NULL,
  cache = drake::drake_cache(path = path),
  namespace = NULL,
  jobs = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cached_planned_+3A_plan">plan</code></td>
<td>
<p>A drake plan.</p>
</td></tr>
<tr><td><code id="cached_planned_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="cached_planned_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="cached_planned_+3A_namespace">namespace</code></td>
<td>
<p>Character scalar, name of the storr namespace
to use for listing objects.</p>
</td></tr>
<tr><td><code id="cached_planned_+3A_jobs">jobs</code></td>
<td>
<p>Number of jobs/workers for parallel processing.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of target and sub-target names.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cached">cached()</a></code>, <a href="#topic+cached_unplanned">cached_unplanned</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("cache_planned() example", {
plan &lt;- drake_plan(w = 1)
make(plan)
cached_planned(plan)
plan &lt;- drake_plan(
  x = seq_len(2),
  y = target(x, dynamic = map(x))
)
cached_planned(plan)
make(plan)
cached_planned(plan)
cached()
})

## End(Not run)
</code></pre>

<hr>
<h2 id='cached_unplanned'>List targets in the cache but not the plan.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+cached_unplanned'></span>

<h3>Description</h3>

<p>Includes dynamic sub-targets as well.
See examples for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cached_unplanned(
  plan,
  path = NULL,
  cache = drake::drake_cache(path = path),
  namespace = NULL,
  jobs = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cached_unplanned_+3A_plan">plan</code></td>
<td>
<p>A drake plan.</p>
</td></tr>
<tr><td><code id="cached_unplanned_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="cached_unplanned_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="cached_unplanned_+3A_namespace">namespace</code></td>
<td>
<p>Character scalar, name of the storr namespace
to use for listing objects.</p>
</td></tr>
<tr><td><code id="cached_unplanned_+3A_jobs">jobs</code></td>
<td>
<p>Number of jobs/workers for parallel processing.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of target and sub-target names.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cached">cached()</a></code>, <a href="#topic+cached_planned">cached_planned</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("cache_unplanned() example", {
plan &lt;- drake_plan(w = 1)
make(plan)
cached_unplanned(plan)
plan &lt;- drake_plan(
  x = seq_len(2),
  y = target(x, dynamic = map(x))
)
cached_unplanned(plan)
make(plan)
cached_unplanned(plan)
# cached_unplanned() helps clean superfluous targets.
cached()
clean(list = cached_unplanned(plan))
cached()
})

## End(Not run)
</code></pre>

<hr>
<h2 id='cancel'>Cancel a target mid-build <a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+cancel'></span>

<h3>Description</h3>

<p>Cancel a target mid-build.
Upon cancellation, <code>drake</code> halts the current target and moves to the
next one. The target's previous value and metadata, if they exist,
remain in the cache.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cancel(allow_missing = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cancel_+3A_allow_missing">allow_missing</code></td>
<td>
<p>Logical. If <code>FALSE</code>, <code>drake</code> will not cancel
the target if it is missing from the cache (or if you removed the
key with <code>clean()</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing.
</p>


<h3>See Also</h3>

<p>cancel_if
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("cancel()", {
f &lt;- function(x) {
  cancel()
  Sys.sleep(2) # Does not run.
}
g &lt;- function(x) f(x)
plan &lt;- drake_plan(y = g(1))
make(plan)
# Does not exist.
# readd(y)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='cancel_if'>Cancel a target mid-build under some condition
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+cancel_if'></span>

<h3>Description</h3>

<p>Cancel a target mid-build if some logical condition is met.
Upon cancellation, <code>drake</code> halts the current target and moves to the
next one. The target's previous value and metadata, if they exist,
remain in the cache.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cancel_if(condition, allow_missing = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cancel_if_+3A_condition">condition</code></td>
<td>
<p>Logical, whether to cancel the target.</p>
</td></tr>
<tr><td><code id="cancel_if_+3A_allow_missing">allow_missing</code></td>
<td>
<p>Logical. If <code>FALSE</code>, <code>drake</code> will not cancel
the target if it is missing from the cache (or if you removed the
key with <code>clean()</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing.
</p>


<h3>See Also</h3>

<p>cancel
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("cancel_if()", {
f &lt;- function(x) {
  cancel_if(x &gt; 1)
  Sys.sleep(2) # Does not run if x &gt; 1.
}
g &lt;- function(x) f(x)
plan &lt;- drake_plan(y = g(2))
make(plan)
# Does not exist.
# readd(y)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='check'>check <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+check'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='check_plan'>Check a workflow plan data frame for obvious errors.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+check_plan'></span>

<h3>Description</h3>

<p>Deprecated on 2019-01-12.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_plan(
  plan = NULL,
  targets = NULL,
  envir = parent.frame(),
  cache = drake::get_cache(verbose = verbose),
  verbose = 1L,
  jobs = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_plan_+3A_plan">plan</code></td>
<td>
<p>Workflow plan data frame, possibly from
<code><a href="#topic+drake_plan">drake_plan()</a></code>.</p>
</td></tr>
<tr><td><code id="check_plan_+3A_targets">targets</code></td>
<td>
<p>Character vector of targets to make.</p>
</td></tr>
<tr><td><code id="check_plan_+3A_envir">envir</code></td>
<td>
<p>Environment containing user-defined functions.</p>
</td></tr>
<tr><td><code id="check_plan_+3A_cache">cache</code></td>
<td>
<p>Optional drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.</p>
</td></tr>
<tr><td><code id="check_plan_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
<tr><td><code id="check_plan_+3A_jobs">jobs</code></td>
<td>
<p>Number of jobs/workers for parallel processing.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Possible obvious errors include circular dependencies and
missing input files.
</p>


<h3>Value</h3>

<p>Invisibly return <code>plan</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>

<hr>
<h2 id='clean'>Invalidate and deregister targets.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+clean'></span>

<h3>Description</h3>

<p>Force targets to be out of date and remove target names
from the data in the cache. Be careful and run <code><a href="#topic+which_clean">which_clean()</a></code> before
<code><a href="#topic+clean">clean()</a></code>. That way, you know beforehand which targets will be
compromised.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean(
  ...,
  list = character(0),
  destroy = FALSE,
  path = NULL,
  search = NULL,
  cache = drake::drake_cache(path = path),
  verbose = NULL,
  jobs = NULL,
  force = FALSE,
  garbage_collection = FALSE,
  purge = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_+3A_...">...</code></td>
<td>
<p>Symbols, individual targets to remove.</p>
</td></tr>
<tr><td><code id="clean_+3A_list">list</code></td>
<td>
<p>Character vector of individual targets to remove.</p>
</td></tr>
<tr><td><code id="clean_+3A_destroy">destroy</code></td>
<td>
<p>Logical, whether to totally remove the drake cache.
If <code>destroy</code> is <code>FALSE</code>, only the targets
from <code>make()</code>
are removed. If <code>TRUE</code>, the whole cache is removed, including
session metadata, etc.</p>
</td></tr>
<tr><td><code id="clean_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="clean_+3A_search">search</code></td>
<td>
<p>Deprecated</p>
</td></tr>
<tr><td><code id="clean_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="clean_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated</p>
</td></tr>
<tr><td><code id="clean_+3A_jobs">jobs</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="clean_+3A_force">force</code></td>
<td>
<p>Logical, whether to try to clean the cache
even though the project may not be back compatible with the
current version of drake.</p>
</td></tr>
<tr><td><code id="clean_+3A_garbage_collection">garbage_collection</code></td>
<td>
<p>Logical, whether to call
<code>cache$gc()</code> to do garbage collection.
If <code>TRUE</code>, cached data with no remaining references
will be removed.
This will slow down <code>clean()</code>, but the cache
could take up far less space afterwards.
See the <code>gc()</code> method for <code>storr</code> caches.</p>
</td></tr>
<tr><td><code id="clean_+3A_purge">purge</code></td>
<td>
<p>Logical, whether to remove objects from
metadata namespaces such as &quot;meta&quot;, &quot;build_times&quot;, and &quot;errors&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default, <code><a href="#topic+clean">clean()</a></code> invalidates <strong>all</strong> targets,
so be careful. <code><a href="#topic+clean">clean()</a></code> always:
</p>

<ol>
<li><p> Forces targets to be out of date so the next <code><a href="#topic+make">make()</a></code>
does not skip them.
</p>
</li>
<li><p> Deregisters targets so <code>loadd(your_target)</code> and <code>readd(your_target)</code>
no longer work.
</p>
</li></ol>

<p>By default, <code>clean()</code> does not actually remove the underlying data.
Even old targets from the distant past are still in the cache
and recoverable via <code>drake_history()</code> and <code>make(recover = TRUE)</code>.
To actually remove target data from the cache, as well as any
<code><a href="#topic+file_out">file_out()</a></code> files from any targets you are currently cleaning,
run <code>clean(garbage_collection = TRUE)</code>.
Garbage collection is slow, but it reduces the storage burden of the cache.
</p>


<h3>Value</h3>

<p>Invisibly return <code>NULL</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+which_clean">which_clean()</a></code>, <code><a href="#topic+drake_gc">drake_gc()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
make(my_plan) # Run the project, build the targets.
# Show all registered targets in the cache.
cached()
# Deregister 'summ_regression1_large' and 'small' in the cache.
clean(summ_regression1_large, small)
# Those objects are no longer registered as targets.
cached()
# Rebuild the invalidated/outdated targets.
make(my_plan)
# Clean everything.
clean()
# But the data objects and files are not actually gone!
file.exists("report.md")
drake_history()
make(my_plan, recover = TRUE)
# You need garbage collection to actually remove the data
# and any file_out() files of any uncleaned targets.
clean(garbage_collection = TRUE)
drake_history()
make(my_plan, recover = TRUE)
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='clean_main_example'>Deprecated: clean the main example from <code>drake_example("main")</code>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+clean_main_example'></span>

<h3>Description</h3>

<p>This function deletes files. Use at your own risk.
Destroys the <code style="white-space: pre;">&#8288;.drake/&#8288;</code> cache and the <code>report.Rmd</code> file
in the current working directory. Your working directory
(<code>getcwd()</code>) must be the folder from which you first ran
<code>load_main_example()</code> and <code>make(my_plan)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_main_example()
</code></pre>


<h3>Details</h3>

<p>Deprecated 2018-12-31.
</p>


<h3>Value</h3>

<p>Nothing.
</p>

<hr>
<h2 id='clean_mtcars_example'>Clean the mtcars example from <code>drake_example("mtcars")</code>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+clean_mtcars_example'></span>

<h3>Description</h3>

<p>This function deletes files. Use at your own risk.
Destroys the <code style="white-space: pre;">&#8288;.drake/&#8288;</code> cache and the <code>report.Rmd</code> file
in the current working directory. Your working directory
(<code>getcwd()</code>) must be the folder from which you first ran
<code>load_mtcars_example()</code> and <code>make(my_plan)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_mtcars_example()
</code></pre>


<h3>Value</h3>

<p>nothing
</p>


<h3>See Also</h3>

<p><code><a href="#topic+load_mtcars_example">load_mtcars_example()</a></code>, <code><a href="#topic+clean">clean()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
# Populate your workspace and write 'report.Rmd'.
load_mtcars_example() # Get the code: drake_example("mtcars")
# Check the dependencies of an imported function.
deps_code(reg1)
# Check the dependencies of commands in the workflow plan.
deps_code(my_plan$command[1])
deps_code(my_plan$command[4])
# Plot the interactive network visualization of the workflow.
outdated(my_plan) # Which targets are out of date?
# Run the workflow to build all the targets in the plan.
make(my_plan)
outdated(my_plan) # Everything should be up to date.
# For the reg2() model on the small dataset,
# the p-value is so small that there may be an association
# between weight and fuel efficiency after all.
readd(coef_regression2_small)
# Clean up the example.
clean_mtcars_example()
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='cleaned_namespaces'>Auxiliary storr namespaces
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+cleaned_namespaces'></span>

<h3>Description</h3>

<p>2019-02-13
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cleaned_namespaces(default = storr::storr_environment()$default_namespace)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cleaned_namespaces_+3A_default">default</code></td>
<td>
<p>Name of the default <code>storr</code> namespace.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of <code>storr</code> namespaces
that are cleaned during <code><a href="#topic+clean">clean()</a></code>.
</p>

<hr>
<h2 id='cmq_build'>Build a target using the clustermq backend
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+cmq_build'></span>

<h3>Description</h3>

<p>For internal use only
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cmq_build(target, meta, deps, spec, config_tmp, config)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cmq_build_+3A_target">target</code></td>
<td>
<p>Target name.</p>
</td></tr>
<tr><td><code id="cmq_build_+3A_meta">meta</code></td>
<td>
<p>List of metadata.</p>
</td></tr>
<tr><td><code id="cmq_build_+3A_deps">deps</code></td>
<td>
<p>Named list of target dependencies.</p>
</td></tr>
<tr><td><code id="cmq_build_+3A_spec">spec</code></td>
<td>
<p>Internal, part of the full <code>config$spec</code>.</p>
</td></tr>
<tr><td><code id="cmq_build_+3A_config_tmp">config_tmp</code></td>
<td>
<p>Internal, extra parts of <code>config</code> that the workers need.</p>
</td></tr>
<tr><td><code id="cmq_build_+3A_config">config</code></td>
<td>
<p>A <code><a href="#topic+drake_config">drake_config()</a></code> list.</p>
</td></tr>
</table>

<hr>
<h2 id='code_to_function'>Turn a script into a function.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+code_to_function'></span>

<h3>Description</h3>

<p><code>code_to_function()</code> is a quick (and very dirty) way to
retrofit drake to an existing script-based project. It parses
individual <code style="white-space: pre;">&#8288;\*.R/\*.RMD&#8288;</code> files into functions so they can be added
into the drake workflow.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>code_to_function(path, envir = parent.frame())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="code_to_function_+3A_path">path</code></td>
<td>
<p>Character vector, path to script.</p>
</td></tr>
<tr><td><code id="code_to_function_+3A_envir">envir</code></td>
<td>
<p>Environment of the created function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Most data science workflows consist of imperative scripts.
<code>drake</code>, on the other hand, assumes you write <em>functions</em>.
<code>code_to_function()</code> allows for pre-existing workflows to incorporate
drake as a workflow management tool seamlessly for cases where
re-factoring is unfeasible. So drake can monitor dependencies, the
targets are passed as arguments of the dependent functions.
</p>


<h3>Value</h3>

<p>A function to be input into the drake plan
</p>


<h3>See Also</h3>

<p><code><a href="#topic+file_in">file_in()</a></code>, <code><a href="#topic+file_out">file_out()</a></code>, <code><a href="#topic+knitr_in">knitr_in()</a></code>, <code><a href="#topic+ignore">ignore()</a></code>, <code><a href="#topic+no_deps">no_deps()</a></code>,
<code><a href="#topic+code_to_plan">code_to_plan()</a></code>, <code><a href="#topic+plan_to_code">plan_to_code()</a></code>, <code><a href="#topic+plan_to_notebook">plan_to_notebook()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("contain side effects", {
if (requireNamespace("ggplot2", quietly = TRUE)) {
# The `code_to_function()` function creates a function that makes it
# available for drake to process as part of the workflow.
# The main purpose is to allow pre-existing workflows to incorporate drake
# into the workflow seamlessly for cases where re-factoring is unfeasible.
#

script1 &lt;- tempfile()
script2 &lt;- tempfile()
script3 &lt;- tempfile()
script4 &lt;- tempfile()

writeLines(c(
  "data &lt;- mtcars",
  "data$make &lt;- do.call('c',",
  "lapply(strsplit(rownames(data), split=\" \"), `[`, 1))",
  "saveRDS(data, \"mtcars_alt.RDS\")"
 ),
  script1
)

writeLines(c(
  "data &lt;- readRDS(\"mtcars_alt.RDS\")",
  "mtcars_lm &lt;- lm(mpg~cyl+disp+vs+gear+make,data=data)",
  "saveRDS(mtcars_lm, \"mtcars_lm.RDS\")"
  ),
  script2
)
writeLines(c(
  "mtcars_lm &lt;- readRDS(\"mtcars_lm.RDS\")",
  "lm_summary &lt;- summary(mtcars_lm)",
  "saveRDS(lm_summary, \"mtcars_lm_summary.RDS\")"
  ),
  script3
)
writeLines(c(
  "data&lt;-readRDS(\"mtcars_alt.RDS\")",
  "gg &lt;- ggplot2::ggplot(data)+",
  "ggplot2::geom_point(ggplot2::aes(",
  "x=disp, y=mpg, shape=as.factor(vs), color=make))",
  "ggplot2::ggsave(\"mtcars_plot.png\", gg)"
 ),
  script4
)


do_munge &lt;- code_to_function(script1)
do_analysis &lt;- code_to_function(script2)
do_summarize &lt;- code_to_function(script3)
do_vis &lt;- code_to_function(script4)

plan &lt;- drake_plan(
  munged   = do_munge(),
  analysis = do_analysis(munged),
  summary  = do_summarize(analysis),
  plot     = do_vis(munged)
 )

plan
# drake knows  "script1" is the first script to be evaluated and ran,
# because it has no dependencies on other code and a dependency of
# `analysis`. See for yourself:

make(plan)

# See the connections that the sourced scripts create:
if (requireNamespace("visNetwork", quietly = TRUE)) {
  vis_drake_graph(plan)
}
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='code_to_plan'>Turn an R script file or <code>knitr</code> / R Markdown report
into a <code>drake</code> plan.
<a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a></h2><span id='topic+code_to_plan'></span>

<h3>Description</h3>

<p><code>code_to_plan()</code>, <code><a href="#topic+plan_to_code">plan_to_code()</a></code>, and
<code><a href="#topic+plan_to_notebook">plan_to_notebook()</a></code> together illustrate the relationships
between <code>drake</code> plans, R scripts, and R Markdown documents.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>code_to_plan(path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="code_to_plan_+3A_path">path</code></td>
<td>
<p>A file path to an R script or <code>knitr</code> report.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This feature is easy to break, so there are some rules
for your code file:
</p>

<ol>
<li><p> Stick to assigning a single expression to a single target at a time.
For multi-line commands, please enclose the whole command
in curly braces.
Conversely, compound assignment is not supported
(e.g. <code>target_1 &lt;- target_2 &lt;- target_3 &lt;- get_data()</code>).
</p>
</li>
<li><p> Once you assign an expression to a variable,
do not modify the variable any more.
The target/command binding should be permanent.
</p>
</li>
<li><p> Keep it simple. Please use the assignment operators rather than
<code>assign()</code> and similar functions.
</p>
</li></ol>



<h3>See Also</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code>, <code><a href="#topic+make">make()</a></code>, <code><a href="#topic+plan_to_code">plan_to_code()</a></code>,
<code><a href="#topic+plan_to_notebook">plan_to_notebook()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plan &lt;- drake_plan(
  raw_data = read_excel(file_in("raw_data.xlsx")),
  data = raw_data,
  hist = create_plot(data),
  fit = lm(Ozone ~ Temp + Wind, data)
)
file &lt;- tempfile()
# Turn the plan into an R script a the given file path.
plan_to_code(plan, file)
# Here is what the script looks like.
cat(readLines(file), sep = "\n")
# Convert back to a drake plan.
code_to_plan(file)
</code></pre>

<hr>
<h2 id='config'>config <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+config'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>config(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="config_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='configure_cache'>Configure the hash algorithms, etc. of a drake cache.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+configure_cache'></span>

<h3>Description</h3>

<p>The purpose of this function is
to prepare the cache to be called from <code><a href="#topic+make">make()</a></code>.
<code>drake</code> only uses a single hash algorithm now,
so we no longer need this configuration step.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>configure_cache(
  cache = drake::get_cache(verbose = verbose),
  short_hash_algo = drake::default_short_hash_algo(cache = cache),
  long_hash_algo = drake::default_long_hash_algo(cache = cache),
  log_progress = FALSE,
  overwrite_hash_algos = FALSE,
  verbose = 1L,
  jobs = 1,
  init_common_values = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="configure_cache_+3A_cache">cache</code></td>
<td>
<p>Cache to configure</p>
</td></tr>
<tr><td><code id="configure_cache_+3A_short_hash_algo">short_hash_algo</code></td>
<td>
<p>Short hash algorithm for drake.
The short algorithm must be among <code><a href="#topic+available_hash_algos">available_hash_algos()</a></code>,
which is just the collection of algorithms available to the <code>algo</code>
argument in <code>digest::digest()</code>.
See <code><a href="#topic+default_short_hash_algo">default_short_hash_algo()</a></code> for more.</p>
</td></tr>
<tr><td><code id="configure_cache_+3A_long_hash_algo">long_hash_algo</code></td>
<td>
<p>Long hash algorithm for drake.
The long algorithm must be among <code><a href="#topic+available_hash_algos">available_hash_algos()</a></code>,
which is just the collection of algorithms available to the <code>algo</code>
argument in <code>digest::digest()</code>.
See <code><a href="#topic+default_long_hash_algo">default_long_hash_algo()</a></code> for more.</p>
</td></tr>
<tr><td><code id="configure_cache_+3A_log_progress">log_progress</code></td>
<td>
<p>Deprecated logical.
Previously toggled whether to clear the recorded
build progress if this cache was used for previous calls to
<code><a href="#topic+make">make()</a></code>.</p>
</td></tr>
<tr><td><code id="configure_cache_+3A_overwrite_hash_algos">overwrite_hash_algos</code></td>
<td>
<p>Logical, whether to try to overwrite
the hash algorithms in the cache with any user-specified ones.</p>
</td></tr>
<tr><td><code id="configure_cache_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
<tr><td><code id="configure_cache_+3A_jobs">jobs</code></td>
<td>
<p>Number of jobs for parallel processing</p>
</td></tr>
<tr><td><code id="configure_cache_+3A_init_common_values">init_common_values</code></td>
<td>
<p>Logical, whether to set the initial <code>drake</code>
version in the cache and other common values.
Not always a thread safe operation, so should only be <code>TRUE</code>
on the main process</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Deprecated on 2018-12-12.
</p>


<h3>Value</h3>

<p>A drake/storr cache.
</p>

<hr>
<h2 id='dataframes_graph'>dataframes_graph <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+dataframes_graph'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dataframes_graph(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dataframes_graph_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='dataset_wildcard'>Show the dataset wildcard
used in <code><a href="#topic+plan_analyses">plan_analyses()</a></code> and <code><a href="#topic+plan_summaries">plan_summaries()</a></code>.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+dataset_wildcard'></span>

<h3>Description</h3>

<p>Deprecated on 2019-01-12.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dataset_wildcard()
</code></pre>


<h3>Details</h3>

<p>Used to generate workflow plan data frames.
</p>


<h3>Value</h3>

<p>The dataset wildcard used in
<code><a href="#topic+plan_analyses">plan_analyses()</a></code> and <code><a href="#topic+plan_summaries">plan_summaries()</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plan_analyses">plan_analyses()</a></code>
</p>

<hr>
<h2 id='debug_and_run'>Run a function in debug mode.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+debug_and_run'></span>

<h3>Description</h3>

<p>Internal function for <code><a href="#topic+drake_debug">drake_debug()</a></code>. Not for general use.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>debug_and_run(f)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="debug_and_run_+3A_f">f</code></td>
<td>
<p>A function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The return value of <code>f</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_debug">drake_debug()</a></code>
</p>

<hr>
<h2 id='default_graph_title'>Return the default title for graph visualizations
<a href="https://lifecycle.r-lib.org/articles/stages.html#soft-deprecated"><img src="../help/figures/lifecycle-soft-deprecated.svg" alt='[Soft-deprecated]' /></a></h2><span id='topic+default_graph_title'></span>

<h3>Description</h3>

<p>For internal use only.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_graph_title()
</code></pre>


<h3>Value</h3>

<p>A character scalar with the default graph title.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>default_graph_title()
</code></pre>

<hr>
<h2 id='default_long_hash_algo'>Return the default long hash algorithm for <code>make()</code>.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+default_long_hash_algo'></span>

<h3>Description</h3>

<p>Deprecated. drake now only uses one hash algorithm per cache.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_long_hash_algo(cache = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="default_long_hash_algo_+3A_cache">cache</code></td>
<td>
<p>Optional drake cache.
When you <code><a href="#topic+configure_cache">configure_cache()</a></code> without
supplying a long hash algorithm,
<code>default_long_hash_algo(cache)</code> is the long
hash algorithm that drake picks for you.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Deprecated on 2018-12-12
</p>


<h3>Value</h3>

<p>A character vector naming a hash algorithm.
</p>

<hr>
<h2 id='default_Makefile_args'>Default arguments of Makefile parallelism
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+default_Makefile_args'></span>

<h3>Description</h3>

<p>2019-01-03
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_Makefile_args(jobs, verbose)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="default_Makefile_args_+3A_jobs">jobs</code></td>
<td>
<p>Number of jobs.</p>
</td></tr>
<tr><td><code id="default_Makefile_args_+3A_verbose">verbose</code></td>
<td>
<p>Integer, control printing to the console/terminal.
</p>

<ul>
<li> <p><code>0</code>: print nothing.
</p>
</li>
<li> <p><code>1</code>: print target-by-target messages as <code><a href="#topic+make">make()</a></code> progresses.
</p>
</li>
<li> <p><code>2</code>: show a progress bar to track how many targets are
done so far.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>args</code> for <code>system2(command, args)</code>
</p>

<hr>
<h2 id='default_Makefile_command'>Default Makefile command
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+default_Makefile_command'></span>

<h3>Description</h3>

<p>2019-01-03
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_Makefile_command()
</code></pre>


<h3>Value</h3>

<p>A character scalar
</p>

<hr>
<h2 id='default_parallelism'>Default parallel backend
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+default_parallelism'></span>

<h3>Description</h3>

<p>2019-01-02
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_parallelism()
</code></pre>


<h3>Value</h3>

<p>character
</p>

<hr>
<h2 id='default_recipe_command'>Default Makefile recipe command
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+default_recipe_command'></span>

<h3>Description</h3>

<p>2019-01-02
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_recipe_command()
</code></pre>


<h3>Value</h3>

<p>A character scalar with the default recipe command.
</p>

<hr>
<h2 id='default_short_hash_algo'>Return the default short hash algorithm for <code>make()</code>.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+default_short_hash_algo'></span>

<h3>Description</h3>

<p>Deprecated. drake now only uses one hash algorithm per cache.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_short_hash_algo(cache = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="default_short_hash_algo_+3A_cache">cache</code></td>
<td>
<p>Optional drake cache.
When you <code><a href="#topic+configure_cache">configure_cache()</a></code> without
supplying a short hash algorithm,
<code>default_short_hash_algo(cache)</code> is the short
hash algorithm that drake picks for you.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Deprecated on 2018-12-12
</p>


<h3>Value</h3>

<p>A character vector naming a hash algorithm.
</p>

<hr>
<h2 id='default_system2_args'>default_system2_args <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+default_system2_args'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_system2_args(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="default_system2_args_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='default_verbose'>Default verbosity
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+default_verbose'></span>

<h3>Description</h3>

<p>Deprecated on 2019-01-01
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_verbose()
</code></pre>


<h3>Value</h3>

<p>1
</p>

<hr>
<h2 id='dependency_profile'>States of the dependencies of a target
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+dependency_profile'></span>

<h3>Description</h3>

<p>Deprecated on 2019-02-14.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dependency_profile(target, config, character_only = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dependency_profile_+3A_target">target</code></td>
<td>
<p>Name of the target.</p>
</td></tr>
<tr><td><code id="dependency_profile_+3A_config">config</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="dependency_profile_+3A_character_only">character_only</code></td>
<td>
<p>Logical, whether to assume <code>target</code>
is a character string rather than a symbol.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of the old hashes and
new hashes of the data frame, along with
an indication of which hashes changed since
the last <code><a href="#topic+make">make()</a></code>.
</p>

<hr>
<h2 id='deprecate_wildcard'>deprecate_wildcard <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+deprecate_wildcard'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deprecate_wildcard(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deprecate_wildcard_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='deps'>deps <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+deps'></span>

<h3>Description</h3>

<p>2019-05-16
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deps(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deps_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='deps_code'>List the dependencies of a function or command
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+deps_code'></span>

<h3>Description</h3>

<p>Functions are assumed to be imported,
and language/text are assumed to be commands in a plan.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deps_code(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deps_code_+3A_x">x</code></td>
<td>
<p>A function, expression, or text.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of the dependencies.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+deps_target">deps_target()</a></code>, <code><a href="#topic+deps_knitr">deps_knitr()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Your workflow likely depends on functions in your workspace.
f &lt;- function(x, y) {
  out &lt;- x + y + g(x)
  saveRDS(out, "out.rds")
}
# Find the dependencies of f. These could be R objects/functions
# in your workspace or packages. Any file names or target names
# will be ignored.
deps_code(f)
# Define a workflow plan data frame that uses your function f().
my_plan &lt;- drake_plan(
  x = 1 + some_object,
  my_target = x + readRDS(file_in("tracked_input_file.rds")),
  return_value = f(x, y, g(z + w))
)
# Get the dependencies of workflow plan commands.
# Here, the dependencies could be R functions/objects from your workspace
# or packages, imported files, or other targets in the workflow plan.
deps_code(my_plan$command[[1]])
deps_code(my_plan$command[[2]])
deps_code(my_plan$command[[3]])
# You can also supply expressions or text.
deps_code(quote(x + y + 123))
deps_code("x + y + 123")
</code></pre>

<hr>
<h2 id='deps_knitr'>Find the drake dependencies of a dynamic knitr report target.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+deps_knitr'></span>

<h3>Description</h3>

<p>Dependencies in <code>knitr</code> reports are marked
by <code><a href="#topic+loadd">loadd()</a></code> and <code><a href="#topic+readd">readd()</a></code> in active code chunks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deps_knitr(path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deps_knitr_+3A_path">path</code></td>
<td>
<p>Encoded file path to the <code>knitr</code>/R Markdown document.
Wrap paths in <code><a href="#topic+file_store">file_store()</a></code> to encode.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of dependencies.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+deps_code">deps_code()</a></code>, <code><a href="#topic+deps_target">deps_target()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
load_mtcars_example() # Get the code with drake_example("mtcars").
deps_knitr("report.Rmd")
})

## End(Not run)
</code></pre>

<hr>
<h2 id='deps_profile'>Find out why a target is out of date.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+deps_profile'></span>

<h3>Description</h3>

<p>The dependency profile can give you
a hint as to why a target is out of date.
It can tell you if
</p>

<ul>
<li><p> the command changed
(<code><a href="#topic+deps_profile">deps_profile()</a></code> reports the <em>hash</em> of the command,
not the command itself)
</p>
</li>
<li><p> at least one input file changed,
</p>
</li>
<li><p> at least one output file changed,
</p>
</li>
<li><p> or a non-file dependency changed. For this last part,
the imports need to be up to date in the cache,
which you can do with <code>outdated()</code> or
<code>make(skip_targets = TRUE)</code>.
</p>
</li>
<li><p> the pseudo-random number generator seed changed.
Unfortunately, <code>deps_profile()</code> does not
currently get more specific than that.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>deps_profile(target, ..., character_only = FALSE, config = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deps_profile_+3A_target">target</code></td>
<td>
<p>Name of the target.</p>
</td></tr>
<tr><td><code id="deps_profile_+3A_...">...</code></td>
<td>
<p>Arguments to <code><a href="#topic+make">make()</a></code>, such as <code>plan</code> and <code>targets</code>.</p>
</td></tr>
<tr><td><code id="deps_profile_+3A_character_only">character_only</code></td>
<td>
<p>Logical, whether to assume <code>target</code>
is a character string rather than a symbol.</p>
</td></tr>
<tr><td><code id="deps_profile_+3A_config">config</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of old and new values for each
of the main triggers, along with
an indication of which values changed since
the last <code><a href="#topic+make">make()</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+diagnose">diagnose()</a></code>,
<code><a href="#topic+deps_code">deps_code()</a></code>, <code><a href="#topic+make">make()</a></code>,
<code><a href="#topic+drake_config">drake_config()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Load drake's canonical example.
make(my_plan) # Run the project, build the targets.
# Get some example dependency profiles of targets.
deps_profile(small, my_plan)
# Change a dependency.
simulate &lt;- function(x) {}
# Update the in-memory imports in the cache
# so deps_profile can detect changes to them.
# Changes to targets are already cached.
make(my_plan, skip_targets = TRUE)
# The dependency hash changed.
deps_profile(small, my_plan)
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='deps_profile_impl'>Internal function with a drake_config() argument</h2><span id='topic+deps_profile_impl'></span>

<h3>Description</h3>

<p>Not a user-side function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deps_profile_impl(target, config, character_only = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deps_profile_impl_+3A_target">target</code></td>
<td>
<p>Name of a target.</p>
</td></tr>
<tr><td><code id="deps_profile_impl_+3A_config">config</code></td>
<td>
<p>A <code><a href="#topic+drake_config">drake_config()</a></code> object.</p>
</td></tr>
<tr><td><code id="deps_profile_impl_+3A_character_only">character_only</code></td>
<td>
<p>Logical, whether to interpret
<code>target</code> as a character (<code>TRUE</code>) or a symbol (<code>FALSE</code>).</p>
</td></tr>
</table>

<hr>
<h2 id='deps_target'>List the dependencies of a target
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+deps_target'></span>

<h3>Description</h3>

<p>Intended for debugging and checking your project.
The dependency structure of the components of your analysis
decides which targets are built and when.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deps_target(target, ..., character_only = FALSE, config = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deps_target_+3A_target">target</code></td>
<td>
<p>A symbol denoting a target name, or if <code>character_only</code>
is TRUE, a character scalar denoting a target name.</p>
</td></tr>
<tr><td><code id="deps_target_+3A_...">...</code></td>
<td>
<p>Arguments to <code><a href="#topic+make">make()</a></code>, such as <code>plan</code> and <code>targets</code>.</p>
</td></tr>
<tr><td><code id="deps_target_+3A_character_only">character_only</code></td>
<td>
<p>Logical, whether to assume target is a character
string rather than a symbol.</p>
</td></tr>
<tr><td><code id="deps_target_+3A_config">config</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the dependencies listed by type
(globals, files, etc).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+deps_code">deps_code()</a></code>, <code><a href="#topic+deps_knitr">deps_knitr()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
load_mtcars_example() # Get the code with drake_example("mtcars").
deps_target(regression1_small, my_plan)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='deps_target_impl'>Internal function with a drake_config() argument</h2><span id='topic+deps_target_impl'></span>

<h3>Description</h3>

<p>Not a user-side function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deps_target_impl(target, config, character_only = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deps_target_impl_+3A_target">target</code></td>
<td>
<p>Name of a target.</p>
</td></tr>
<tr><td><code id="deps_target_impl_+3A_config">config</code></td>
<td>
<p>A <code><a href="#topic+drake_config">drake_config()</a></code> object.</p>
</td></tr>
<tr><td><code id="deps_target_impl_+3A_character_only">character_only</code></td>
<td>
<p>Logical, whether to interpret
<code>target</code> as a character (<code>TRUE</code>) or a symbol (<code>FALSE</code>).</p>
</td></tr>
</table>

<hr>
<h2 id='deps_targets'>See the dependencies of a target
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+deps_targets'></span>

<h3>Description</h3>

<p>Use <code><a href="#topic+deps_target">deps_target()</a></code> (singular) instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deps_targets(targets, config, reverse = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deps_targets_+3A_targets">targets</code></td>
<td>
<p>A character vector of target names.</p>
</td></tr>
<tr><td><code id="deps_targets_+3A_config">config</code></td>
<td>
<p>An output list from <code><a href="#topic+drake_config">drake_config()</a></code></p>
</td></tr>
<tr><td><code id="deps_targets_+3A_reverse">reverse</code></td>
<td>
<p>Logical, whether to compute reverse dependencies
(targets immediately downstream) instead of ordinary dependencies.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Deprecated on 2018-08-30.
</p>


<h3>Value</h3>

<p>Names of dependencies listed by type (object, input file, etc).
</p>

<hr>
<h2 id='diagnose'>Get diagnostic metadata on a target.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+diagnose'></span>

<h3>Description</h3>

<p>Diagnostics include errors, warnings,
messages, runtimes, and other context/metadata from when a
target was built or an import was processed.
If your target's last build succeeded,
then <code>diagnose(your_target)</code> has the most current information
from that build.
But if your target failed, then only
<code>diagnose(your_target)$error</code>,
<code>diagnose(your_target)$warnings</code>,
and <code>diagnose(your_target)$messages</code> correspond to the failure,
and all the other metadata correspond to the last build that completed
without an error.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diagnose(
  target = NULL,
  character_only = FALSE,
  path = NULL,
  search = NULL,
  cache = drake::drake_cache(path = path),
  verbose = 1L
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="diagnose_+3A_target">target</code></td>
<td>
<p>Name of the target of the error to get.
Can be a symbol if <code>character_only</code> is <code>FALSE</code>,
must be a character if <code>character_only</code> is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="diagnose_+3A_character_only">character_only</code></td>
<td>
<p>Logical, whether <code>target</code> should be treated
as a character or a symbol.
Just like <code>character.only</code> in <code><a href="base.html#topic+library">library()</a></code>.</p>
</td></tr>
<tr><td><code id="diagnose_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="diagnose_+3A_search">search</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="diagnose_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="diagnose_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Either a character vector of target names or an object
of class <code>"error"</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_failed">drake_failed()</a></code>, <code><a href="#topic+drake_progress">drake_progress()</a></code>,
<code><a href="#topic+readd">readd()</a></code>, <code><a href="#topic+drake_plan">drake_plan()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
diagnose() # List all the targets with recorded error logs.
# Define a function doomed to failure.
f &lt;- function() {
  stop("unusual error")
}
# Create a workflow plan doomed to failure.
bad_plan &lt;- drake_plan(my_target = f())
# Running the project should generate an error
# when trying to build 'my_target'.
try(make(bad_plan), silent = FALSE)
drake_failed() # List the failed targets from the last make() (my_target).
# List targets that failed at one point or another
# over the course of the project (my_target).
# drake keeps all the error logs.
diagnose()
# Get the error log, an object of class "error".
error &lt;- diagnose(my_target)$error # See also warnings and messages.
str(error) # See what's inside the error log.
error$calls # View the traceback. (See the rlang::trace_back() function).
})

## End(Not run)
</code></pre>

<hr>
<h2 id='do_prework'>Do the prework in the <code>prework</code>
argument to <code><a href="#topic+make">make()</a></code>.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+do_prework'></span>

<h3>Description</h3>

<p>For internal use only.
The only reason this function is exported
is to set up parallel socket (PSOCK) clusters
without too much fuss.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>do_prework(config, verbose_packages)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="do_prework_+3A_config">config</code></td>
<td>
<p>A configured workflow from <code><a href="#topic+drake_config">drake_config()</a></code>.</p>
</td></tr>
<tr><td><code id="do_prework_+3A_verbose_packages">verbose_packages</code></td>
<td>
<p>logical, whether to print
package startup messages</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Inivisibly returns <code>NULL</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
# Create a main internal configuration list with prework.
con &lt;- drake_config(my_plan, prework = c("library(knitr)", "x &lt;- 1"))
# Do the prework. Usually done at the beginning of `make()`,
# and for distributed computing backends like "future_lapply",
# right before each target is built.
do_prework(config = con, verbose_packages = TRUE)
# The `eval` element is the environment where the prework
# and the commands in your workflow plan data frame are executed.
identical(con$eval$x, 1) # Should be TRUE.
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='doc_of_function_call'>doc_of_function_call <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+doc_of_function_call'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>doc_of_function_call(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="doc_of_function_call_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='drake_batchtools_tmpl_file'>Get a template file for execution on a cluster.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+drake_batchtools_tmpl_file'></span>

<h3>Description</h3>

<p>Deprecated. Use <code><a href="#topic+drake_hpc_template_file">drake_hpc_template_file()</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_batchtools_tmpl_file(
  example = drake::drake_hpc_template_files(),
  to = getwd(),
  overwrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_batchtools_tmpl_file_+3A_example">example</code></td>
<td>
<p>Name of template file.</p>
</td></tr>
<tr><td><code id="drake_batchtools_tmpl_file_+3A_to">to</code></td>
<td>
<p>Character vector, where to write the file.</p>
</td></tr>
<tr><td><code id="drake_batchtools_tmpl_file_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical, whether to overwrite an existing file of the
same name.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Deprecated on 2018-06-27.
</p>

<hr>
<h2 id='drake_build'>Build/process a single target or import.
<a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a></h2><span id='topic+drake_build'></span>

<h3>Description</h3>

<p>Not valid for dynamic branching.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_build(
  target,
  ...,
  meta = NULL,
  character_only = FALSE,
  replace = FALSE,
  config = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_build_+3A_target">target</code></td>
<td>
<p>Name of the target.</p>
</td></tr>
<tr><td><code id="drake_build_+3A_...">...</code></td>
<td>
<p>Arguments to <code><a href="#topic+make">make()</a></code>, such as the plan and environment.</p>
</td></tr>
<tr><td><code id="drake_build_+3A_meta">meta</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="drake_build_+3A_character_only">character_only</code></td>
<td>
<p>Logical, whether <code>name</code> should be treated
as a character or a symbol
(just like <code>character.only</code> in <code><a href="base.html#topic+library">library()</a></code>).</p>
</td></tr>
<tr><td><code id="drake_build_+3A_replace">replace</code></td>
<td>
<p>Logical. If <code>FALSE</code>,
items already in your environment
will not be replaced.</p>
</td></tr>
<tr><td><code id="drake_build_+3A_config">config</code></td>
<td>
<p>Deprecated 2019-12-22.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The value of the target right after it is built.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_debug">drake_debug()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
# This example is not really a user-side demonstration.
# It just walks through a dive into the internals.
# Populate your workspace and write 'report.Rmd'.
load_mtcars_example() # Get the code with drake_example("mtcars").
out &lt;- drake_build(small, my_plan)
# Now includes `small`.
cached()
head(readd(small))
# `small` was invisibly returned.
head(out)
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_build_impl'>Internal function with a drake_config() argument</h2><span id='topic+drake_build_impl'></span>

<h3>Description</h3>

<p>Not a user-side function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_build_impl(
  target,
  config = NULL,
  meta = NULL,
  character_only = FALSE,
  replace = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_build_impl_+3A_config">config</code></td>
<td>
<p>A <code><a href="#topic+drake_config">drake_config()</a></code> object.</p>
</td></tr>
</table>

<hr>
<h2 id='drake_cache'>Get the cache of a <code>drake</code> project.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+drake_cache'></span>

<h3>Description</h3>

<p><code><a href="#topic+make">make()</a></code> saves the values of your targets so
you rarely need to think about output files. By default,
the cache is a hidden folder called <code style="white-space: pre;">&#8288;.drake/&#8288;</code>.
You can also supply your own <code>storr</code> cache to the <code>cache</code>
argument of <code>make()</code>. The <code>drake_cache()</code> function retrieves
this cache.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_cache(path = NULL, verbose = NULL, console_log_file = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_cache_+3A_path">path</code></td>
<td>
<p>Character.
Set <code>path</code> to the path of a <code>storr::storr_rds()</code> cache
to retrieve a specific cache generated by <code>storr::storr_rds()</code>
or <code>drake::new_cache()</code>. If the <code>path</code> argument is <code>NULL</code>,
<code>drake_cache()</code> searches up through parent directories
to find a folder called <code style="white-space: pre;">&#8288;.drake/&#8288;</code>.</p>
</td></tr>
<tr><td><code id="drake_cache_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
<tr><td><code id="drake_cache_+3A_console_log_file">console_log_file</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>drake_cache()</code> actually returns a <em>decorated</em> <code>storr</code>,
an object that <em>contains</em> a <code>storr</code> (plus bells and whistles).
To get the <em>actual</em> inner <code>storr</code>, use <code>drake_cache()$storr</code>.
Most methods are delegated to the inner <code>storr</code>.
Some methods and objects are new or overwritten. Here
are the ones relevant to users.
</p>

<ul>
<li> <p><code>history</code>: <code>drake</code>'s history (which powers <code><a href="#topic+drake_history">drake_history()</a></code>)
is a <code>txtq</code>. Access it
with <code>drake_cache()$history</code>.
</p>
</li>
<li> <p><code>import()</code>: The <code>import()</code> method is a function that can import
targets, function dependencies, etc. from one decorated <code>storr</code>
to another. History is not imported. For that, you have to work
with the history <code>txtq</code>s themselves, Arguments to <code>import()</code>:
</p>

<ul>
<li> <p><code>...</code> and <code>list</code>: specify targets to import just like with <code><a href="#topic+loadd">loadd()</a></code>.
Leave these blank to import everything.
</p>
</li>
<li> <p><code>from</code>: the decorated <code>storr</code> from which to import targets.
</p>
</li>
<li> <p><code>jobs</code>: number of local processes for parallel computing.
</p>
</li>
<li> <p><code>gc</code>: <code>TRUE</code> or <code>FALSE</code>, whether to run garbage collection for memory
after importing each target. Recommended, but slow.
</p>
</li></ul>

</li>
<li> <p><code>export()</code>: Same as <code>import()</code>, except the <code>from</code> argument is replaced
by <code>to</code>: the decorated <code>storr</code> where the targets end up.
</p>
</li></ul>



<h3>Value</h3>

<p>A drake/storr cache in a folder called <code style="white-space: pre;">&#8288;.drake/&#8288;</code>,
if available. <code>NULL</code> otherwise.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+new_cache">new_cache()</a></code>, <code><a href="#topic+drake_config">drake_config()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
clean(destroy = TRUE)
# No cache is available.
drake_cache() # NULL
load_mtcars_example() # Get the code with drake_example("mtcars").
make(my_plan) # Run the project, build the targets.
x &lt;- drake_cache() # Now, there is a cache.
y &lt;- storr::storr_rds(".drake") # Nearly equivalent.
# List the objects readable from the cache with readd().
x$list()
# drake_cache() actually returns a *decorated* storr.
# The *real* storr is inside.
drake_cache()$storr
}
# You can import and export targets to and from decorated storrs.
plan1 &lt;- drake_plan(w = "w", x = "x")
plan2 &lt;- drake_plan(a = "a", x = "x2")
cache1 &lt;- new_cache("cache1")
cache2 &lt;- new_cache("cache2")
make(plan1, cache = cache1)
make(plan2, cache = cache2)
cache1$import(cache2, a)
cache1$get("a")
cache1$get("x")
cache1$import(cache2)
cache1$get("x")
# With txtq &gt;= 0.1.6.9002, you can import history from one cache into
# another.
# nolint start
# drake_history(cache = cache1)
# cache1$history$import(cache2$history)
# drake_history(cache = cache1)
# nolint end
})

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_cache_log'>Get the state of the cache.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+drake_cache_log'></span>

<h3>Description</h3>

<p>Get the fingerprints of all the targets in a data frame.
This functionality is like
<code>make(..., cache_log_file = TRUE)</code>,
but separated and more customizable. Hopefully, this functionality
is a step toward better data versioning tools.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_cache_log(
  path = NULL,
  search = NULL,
  cache = drake::drake_cache(path = path),
  verbose = 1L,
  jobs = 1,
  targets_only = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_cache_log_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="drake_cache_log_+3A_search">search</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="drake_cache_log_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="drake_cache_log_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
<tr><td><code id="drake_cache_log_+3A_jobs">jobs</code></td>
<td>
<p>Number of jobs/workers for parallel processing.</p>
</td></tr>
<tr><td><code id="drake_cache_log_+3A_targets_only">targets_only</code></td>
<td>
<p>Logical, whether to output information
only on the targets in your workflow plan data frame.
If <code>targets_only</code> is <code>FALSE</code>, the output will
include the hashes of both targets and imports.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A hash is a fingerprint of an object's value.
Together, the hash keys of all your targets and imports
represent the state of your project.
Use <code>drake_cache_log()</code> to generate a data frame
with the hash keys of all the targets and imports
stored in your cache.
This function is particularly useful if you are
storing your drake project in a version control repository.
The cache has a lot of tiny files, so you should not put it
under version control. Instead, save the output
of <code>drake_cache_log()</code> as a text file after each <code><a href="#topic+make">make()</a></code>,
and put the text file under version control.
That way, you have a changelog of your project's results.
See the examples below for details.
Depending on your project's
history, the targets may be different than the ones
in your workflow plan data frame.
Also, the keys depend on the hash algorithm
of your cache. To define your own hash algorithm,
you can create your own <code>storr</code> cache and give it a hash algorithm
(e.g. <code>storr_rds(hash_algorithm = "murmur32")</code>)
</p>


<h3>Value</h3>

<p>Data frame of the hash keys of the targets and imports
in the cache
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cached">cached()</a></code>, <code><a href="#topic+drake_cache">drake_cache()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
# Load drake's canonical example.
load_mtcars_example() # Get the code with drake_example()
# Run the project, build all the targets.
make(my_plan)
# Get a data frame of all the hash keys.
# If you want a changelog, be sure to do this after every make().
cache_log &lt;- drake_cache_log()
head(cache_log)
# Suppress partial arg match warnings.
suppressWarnings(
  # Save the hash log as a flat text file.
  write.table(
    x = cache_log,
    file = "drake_cache.log",
    quote = FALSE,
    row.names = FALSE
  )
)
# At this point, put drake_cache.log under version control
# (e.g. with 'git add drake_cache.log') alongside your code.
# Now, every time you run your project, your commit history
# of hash_lot.txt is a changelog of the project's results.
# It shows which targets and imports changed on every commit.
# It is extremely difficult to track your results this way
# by putting the raw '.drake/' cache itself under version control.
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_cache_log_file'>Generate a flat text log file to represent the state of
the cache.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+drake_cache_log_file'></span>

<h3>Description</h3>

<p>Deprecated on 2019-03-09.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_cache_log_file(
  file = "drake_cache.log",
  path = getwd(),
  search = TRUE,
  cache = drake::get_cache(path = path, search = search, verbose = verbose),
  verbose = 1L,
  jobs = 1L,
  targets_only = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_cache_log_file_+3A_file">file</code></td>
<td>
<p>character scalar, name of the flat text log file.</p>
</td></tr>
<tr><td><code id="drake_cache_log_file_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="drake_cache_log_file_+3A_search">search</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="drake_cache_log_file_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="drake_cache_log_file_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
<tr><td><code id="drake_cache_log_file_+3A_jobs">jobs</code></td>
<td>
<p>Number of jobs/workers for parallel processing.</p>
</td></tr>
<tr><td><code id="drake_cache_log_file_+3A_targets_only">targets_only</code></td>
<td>
<p>Logical, whether to output information only on the
targets in your workflow plan data frame. If <code>targets_only</code> is <code>FALSE</code>, the
output will include the hashes of both targets and imports.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calling this function to create a log file and later calling
<code>make()</code> makes the log file out of date. Therefore, we recommend using
<code>make()</code> with the <code>cache_log_file</code> argument to create the cache log. This
way ensures that the log is always up to date with <code>make()</code> results.
</p>


<h3>Value</h3>

<p>There is no return value, but a log file is generated.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_cache_log">drake_cache_log()</a></code>, <code><a href="#topic+make">make()</a></code>, <code><a href="#topic+get_cache">get_cache()</a></code>
</p>

<hr>
<h2 id='drake_cancelled'>List cancelled targets.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+drake_cancelled'></span>

<h3>Description</h3>

<p>List the targets that were cancelled in the current or
previous call to <code><a href="#topic+make">make()</a></code> using <code><a href="#topic+cancel">cancel()</a></code> or <code><a href="#topic+cancel_if">cancel_if()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_cancelled(cache = drake::drake_cache(path = path), path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_cancelled_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="drake_cancelled_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of target names.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_running">drake_running()</a></code>, <code><a href="#topic+drake_failed">drake_failed()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("contain side effects", {
plan &lt;- drake_plan(x = 1, y = cancel_if(x &gt; 0))
make(plan)
drake_cancelled()
})

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_config'>Ending of _drake.R for r_make() and friends
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+drake_config'></span>

<h3>Description</h3>

<p>Call this function inside the <code style="white-space: pre;">&#8288;_drake.R&#8288;</code>
script for <code><a href="#topic+r_make">r_make()</a></code> and friends.
All non-deprecated function arguments are the same
between <code><a href="#topic+make">make()</a></code> and <code><a href="#topic+drake_config">drake_config()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_config(
  plan,
  targets = NULL,
  envir = parent.frame(),
  verbose = 1L,
  hook = NULL,
  cache = drake::drake_cache(),
  fetch_cache = NULL,
  parallelism = "loop",
  jobs = 1L,
  jobs_preprocess = 1L,
  packages = rev(.packages()),
  lib_loc = NULL,
  prework = character(0),
  prepend = NULL,
  command = NULL,
  args = NULL,
  recipe_command = NULL,
  timeout = NULL,
  cpu = Inf,
  elapsed = Inf,
  retries = 0,
  force = FALSE,
  log_progress = TRUE,
  graph = NULL,
  trigger = drake::trigger(),
  skip_targets = FALSE,
  skip_imports = FALSE,
  skip_safety_checks = FALSE,
  lazy_load = "eager",
  session_info = NULL,
  cache_log_file = NULL,
  seed = NULL,
  caching = c("main", "master", "worker"),
  keep_going = FALSE,
  session = NULL,
  pruning_strategy = NULL,
  makefile_path = NULL,
  console_log_file = NULL,
  ensure_workers = NULL,
  garbage_collection = FALSE,
  template = list(),
  sleep = function(i) 0.01,
  hasty_build = NULL,
  memory_strategy = "speed",
  spec = NULL,
  layout = NULL,
  lock_envir = TRUE,
  history = TRUE,
  recover = FALSE,
  recoverable = TRUE,
  curl_handles = list(),
  max_expand = NULL,
  log_build_times = TRUE,
  format = NULL,
  lock_cache = TRUE,
  log_make = NULL,
  log_worker = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_config_+3A_plan">plan</code></td>
<td>
<p>Workflow plan data frame.
A workflow plan data frame is a data frame
with a <code>target</code> column and a <code>command</code> column.
(See the details in the <code><a href="#topic+drake_plan">drake_plan()</a></code> help file
for descriptions of the optional columns.)
Targets are the objects that drake generates,
and commands are the pieces of R code that produce them.
You can create and track custom files along the way
(see <code><a href="#topic+file_in">file_in()</a></code>, <code><a href="#topic+file_out">file_out()</a></code>, and <code><a href="#topic+knitr_in">knitr_in()</a></code>).
Use the function <code><a href="#topic+drake_plan">drake_plan()</a></code> to generate workflow plan
data frames.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_targets">targets</code></td>
<td>
<p>Character vector, names of targets to build.
Dependencies are built too. You may supply static and/or whole
dynamic targets, but no sub-targets.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_envir">envir</code></td>
<td>
<p>Environment to use. Defaults to the current
workspace, so you should not need to worry about this
most of the time. A deep copy of <code>envir</code> is made,
so you don't need to worry about your workspace being modified
by <code>make</code>. The deep copy inherits from the global environment.
Wherever necessary, objects and functions are imported
from <code>envir</code> and the global environment and
then reproducibly tracked as dependencies.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_verbose">verbose</code></td>
<td>
<p>Integer, control printing to the console/terminal.
</p>

<ul>
<li> <p><code>0</code>: print nothing.
</p>
</li>
<li> <p><code>1</code>: print target-by-target messages as <code><a href="#topic+make">make()</a></code> progresses.
</p>
</li>
<li> <p><code>2</code>: show a progress bar to track how many targets are
done so far.
</p>
</li></ul>
</td></tr>
<tr><td><code id="drake_config_+3A_hook">hook</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_cache">cache</code></td>
<td>
<p>drake cache as created by <code><a href="#topic+new_cache">new_cache()</a></code>.
See also <code><a href="#topic+drake_cache">drake_cache()</a></code>.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_fetch_cache">fetch_cache</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_parallelism">parallelism</code></td>
<td>
<p>Character scalar, type of parallelism to use.
For detailed explanations, see
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/hpc.html&#8288;</code>.
</p>
<p>You could also supply your own scheduler function
if you want to experiment or aggressively optimize.
The function should take a single <code>config</code> argument
(produced by <code><a href="#topic+drake_config">drake_config()</a></code>). Existing examples
from <code>drake</code>'s internals are the <code style="white-space: pre;">&#8288;backend_*()&#8288;</code> functions:
</p>

<ul>
<li> <p><code>backend_loop()</code>
</p>
</li>
<li> <p><code>backend_clustermq()</code>
</p>
</li>
<li> <p><code>backend_future()</code>
However, this functionality is really a back door
and should not be used for production purposes unless you really
know what you are doing and you are willing to suffer setbacks
whenever <code>drake</code>'s unexported core functions are updated.
</p>
</li></ul>
</td></tr>
<tr><td><code id="drake_config_+3A_jobs">jobs</code></td>
<td>
<p>Maximum number of parallel workers for processing the targets.
You can experiment with <code><a href="#topic+predict_runtime">predict_runtime()</a></code>
to help decide on an appropriate number of jobs.
For details, visit
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/time.html&#8288;</code>.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_jobs_preprocess">jobs_preprocess</code></td>
<td>
<p>Number of parallel jobs for processing the imports
and doing other preprocessing tasks.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_packages">packages</code></td>
<td>
<p>Character vector packages to load, in the order
they should be loaded. Defaults to <code>rev(.packages())</code>, so you
should not usually need to set this manually. Just call
<code><a href="base.html#topic+library">library()</a></code> to load your packages before <code>make()</code>.
However, sometimes packages need to be strictly forced to load
in a certain order, especially if <code>parallelism</code> is
<code>"Makefile"</code>. To do this, do not use <code><a href="base.html#topic+library">library()</a></code>
or <code><a href="base.html#topic+require">require()</a></code> or <code><a href="base.html#topic+loadNamespace">loadNamespace()</a></code> or
<code><a href="base.html#topic+attachNamespace">attachNamespace()</a></code> to load any libraries beforehand.
Just list your packages in the <code>packages</code> argument in the order
you want them to be loaded.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_lib_loc">lib_loc</code></td>
<td>
<p>Character vector, optional.
Same as in <code>library()</code> or <code>require()</code>.
Applies to the <code>packages</code> argument (see above).</p>
</td></tr>
<tr><td><code id="drake_config_+3A_prework">prework</code></td>
<td>
<p>Expression (language object), list of expressions,
or character vector.
Code to run right before targets build.
Called only once if <code>parallelism</code> is <code>"loop"</code>
and once per target otherwise.
This code can be used to set global options, etc.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_prepend">prepend</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_command">command</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_args">args</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_recipe_command">recipe_command</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_timeout">timeout</code></td>
<td>
<p><code>deprecated</code>. Use <code>elapsed</code> and <code>cpu</code> instead.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_cpu">cpu</code></td>
<td>
<p>Same as the <code>cpu</code> argument of <code>setTimeLimit()</code>.
Seconds of cpu time before a target times out.
Assign target-level cpu timeout times with an optional <code>cpu</code>
column in <code>plan</code>.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_elapsed">elapsed</code></td>
<td>
<p>Same as the <code>elapsed</code> argument of <code>setTimeLimit()</code>.
Seconds of elapsed time before a target times out.
Assign target-level elapsed timeout times with an optional <code>elapsed</code>
column in <code>plan</code>.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_retries">retries</code></td>
<td>
<p>Number of retries to execute if the target fails.
Assign target-level retries with an optional <code>retries</code>
column in <code>plan</code>.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_force">force</code></td>
<td>
<p>Logical. If <code>FALSE</code> (default) then <code>drake</code>
imposes checks if the cache was created with an old
and incompatible version of drake.
If there is an incompatibility, <code>make()</code> stops to
give you an opportunity to
downgrade <code>drake</code> to a compatible version
rather than rerun all your targets from scratch.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_log_progress">log_progress</code></td>
<td>
<p>Logical, whether to log the progress
of individual targets as they are being built. Progress logging
creates extra files in the cache (usually the <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder)
and slows down <code>make()</code> a little.
If you need to reduce or limit the number of files in the cache,
call <code>make(log_progress = FALSE, recover = FALSE)</code>.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_graph">graph</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_trigger">trigger</code></td>
<td>
<p>Name of the trigger to apply to all targets.
Ignored if <code>plan</code> has a <code>trigger</code> column.
See <code><a href="#topic+trigger">trigger()</a></code> for details.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_skip_targets">skip_targets</code></td>
<td>
<p>Logical, whether to skip building the targets
in <code>plan</code> and just import objects and files.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_skip_imports">skip_imports</code></td>
<td>
<p>Logical, whether to totally neglect to
process the imports and jump straight to the targets. This can be useful
if your imports are massive and you just want to test your project,
but it is bad practice for reproducible data analysis.
This argument is overridden if you supply your own <code>graph</code> argument.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_skip_safety_checks">skip_safety_checks</code></td>
<td>
<p>Logical, whether to skip the safety checks
on your workflow. Use at your own peril.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_lazy_load">lazy_load</code></td>
<td>
<p>An old feature, currently being questioned.
For the current recommendations on memory management, see
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/memory.html#memory-strategies&#8288;</code>.
The <code>lazy_load</code> argument is either a character vector or a logical.
For dynamic targets, the behavior is always <code>"eager"</code> (see below).
So the <code>lazy_load</code> argument is for static targets only.
Choices for <code>lazy_load</code>:
</p>

<ul>
<li> <p><code>"eager"</code>: no lazy loading. The target is loaded right away
with <code><a href="base.html#topic+assign">assign()</a></code>.
</p>
</li>
<li> <p><code>"promise"</code>: lazy loading with <code><a href="base.html#topic+delayedAssign">delayedAssign()</a></code>
</p>
</li>
<li> <p><code>"bind"</code>: lazy loading with active bindings:
<code>bindr::populate_env()</code>.
</p>
</li>
<li> <p><code>TRUE</code>: same as <code>"promise"</code>.
</p>
</li>
<li> <p><code>FALSE</code>: same as <code>"eager"</code>.
</p>
</li></ul>

<p>If <code>lazy_load</code> is <code>"eager"</code>,
drake prunes the execution environment before each target/stage,
removing all superfluous targets
and then loading any dependencies it will need for building.
In other words, drake prepares the environment in advance
and tries to be memory efficient.
If <code>lazy_load</code> is <code>"bind"</code> or <code>"promise"</code>, drake assigns
promises to load any dependencies at the last minute.
Lazy loading may be more memory efficient in some use cases, but
it may duplicate the loading of dependencies, costing time.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_session_info">session_info</code></td>
<td>
<p>Logical, whether to save the <code>sessionInfo()</code>
to the cache. Defaults to <code>TRUE</code>.
This behavior is recommended for serious <code><a href="#topic+make">make()</a></code>s
for the sake of reproducibility. This argument only exists to
speed up tests. Apparently, <code>sessionInfo()</code> is a bottleneck
for small <code><a href="#topic+make">make()</a></code>s.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_cache_log_file">cache_log_file</code></td>
<td>
<p>Name of the CSV cache log file to write.
If <code>TRUE</code>, the default file name is used (<code>drake_cache.CSV</code>).
If <code>NULL</code>, no file is written.
If activated, this option writes a flat text file
to represent the state of the cache
(fingerprints of all the targets and imports).
If you put the log file under version control, your commit history
will give you an easy representation of how your results change
over time as the rest of your project changes. Hopefully,
this is a step in the right direction for data reproducibility.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_seed">seed</code></td>
<td>
<p>Integer, the root pseudo-random number generator
seed to use for your project.
In <code><a href="#topic+make">make()</a></code>, <code>drake</code> generates a unique
local seed for each target using the global seed
and the target name. That way, different pseudo-random numbers
are generated for different targets, and this pseudo-randomness
is reproducible.
</p>
<p>To ensure reproducibility across different R sessions,
<code>set.seed()</code> and <code>.Random.seed</code> are ignored and have no affect on
<code>drake</code> workflows. Conversely, <code>make()</code> does not usually
change <code>.Random.seed</code>,
even when pseudo-random numbers are generated.
The exception to this last point is
<code>make(parallelism = "clustermq")</code>
because the <code>clustermq</code> package needs to generate random numbers
to set up ports and sockets for ZeroMQ.
</p>
<p>On the first call to <code>make()</code> or <code>drake_config()</code>, <code>drake</code>
uses the random number generator seed from the <code>seed</code> argument.
Here, if the <code>seed</code> is <code>NULL</code> (default), <code>drake</code> uses a <code>seed</code> of <code>0</code>.
On subsequent <code>make()</code>s for existing projects, the project's
cached seed will be used in order to ensure reproducibility.
Thus, the <code>seed</code> argument must either be <code>NULL</code> or the same
seed from the project's cache (usually the <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder).
To reset the random number generator seed for a project,
use <code>clean(destroy = TRUE)</code>.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_caching">caching</code></td>
<td>
<p>Character string, either <code>"main"</code> or <code>"worker"</code>.
</p>

<ul>
<li> <p><code>"main"</code>: Targets are built by remote workers and sent back to
the main process. Then, the main process saves them to the
cache (<code>config$cache</code>, usually a file system <code>storr</code>).
Appropriate if remote workers do not have access to the file system
of the calling R session. Targets are cached one at a time,
which may be slow in some situations.
</p>
</li>
<li> <p><code>"worker"</code>: Remote workers not only build the targets, but also
save them to the cache. Here, caching happens in parallel.
However, remote workers need to have access to the file system
of the calling R session. Transferring target data across
a network can be slow.
</p>
</li></ul>
</td></tr>
<tr><td><code id="drake_config_+3A_keep_going">keep_going</code></td>
<td>
<p>Logical, whether to still keep running <code><a href="#topic+make">make()</a></code>
if targets fail.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_session">session</code></td>
<td>
<p>Deprecated. Has no effect now.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_pruning_strategy">pruning_strategy</code></td>
<td>
<p>Deprecated. See <code>memory_strategy</code>.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_makefile_path">makefile_path</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_console_log_file">console_log_file</code></td>
<td>
<p>Deprecated in favor of <code>log_make</code>.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_ensure_workers">ensure_workers</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_garbage_collection">garbage_collection</code></td>
<td>
<p>Logical, whether to call <code>gc()</code> each time
a target is built during <code><a href="#topic+make">make()</a></code>.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_template">template</code></td>
<td>
<p>A named list of values to fill in the <code>{{ ... }}</code>
placeholders in template files (e.g. from <code><a href="#topic+drake_hpc_template_file">drake_hpc_template_file()</a></code>).
Same as the <code>template</code> argument of <code>clustermq::Q()</code> and
<code>clustermq::workers</code>.
Enabled for <code>clustermq</code> only (<code>make(parallelism = "clustermq")</code>),
not <code>future</code> or <code>batchtools</code> so far.
For more information, see the <code>clustermq</code> package:
<code style="white-space: pre;">&#8288;https://github.com/mschubert/clustermq&#8288;</code>.
Some template placeholders such as <code>{{ job_name }}</code> and <code>{{ n_jobs }}</code>
cannot be set this way.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_sleep">sleep</code></td>
<td>
<p>Optional function on a single numeric argument <code>i</code>.
Default: <code>function(i) 0.01</code>.
</p>
<p>To conserve memory, <code>drake</code> assigns a brand new closure to
<code>sleep</code>, so your custom function should not depend on in-memory data
except from loaded packages.
</p>
<p>For parallel processing, <code>drake</code> uses
a central main process to check what the parallel
workers are doing, and for the affected high-performance
computing workflows, wait for data to arrive over a network.
In between loop iterations, the main process sleeps to avoid throttling.
The <code>sleep</code> argument to <code>make()</code> and <code>drake_config()</code>
allows you to customize how much time the main process spends
sleeping.
</p>
<p>The <code>sleep</code> argument is a function that takes an argument
<code>i</code> and returns a numeric scalar, the number of seconds to
supply to <code>Sys.sleep()</code> after iteration <code>i</code> of checking.
(Here, <code>i</code> starts at 1.)
If the checking loop does something other than sleeping
on iteration <code>i</code>, then <code>i</code> is reset back to 1.
</p>
<p>To sleep for the same amount of time between checks,
you might supply something like <code>function(i) 0.01</code>.
But to avoid consuming too many resources during heavier
and longer workflows, you might use an exponential
back-off: say,
<code>function(i) { 0.1 + 120 * pexp(i - 1, rate = 0.01) }</code>.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_hasty_build">hasty_build</code></td>
<td>
<p>Deprecated</p>
</td></tr>
<tr><td><code id="drake_config_+3A_memory_strategy">memory_strategy</code></td>
<td>
<p>Character scalar, name of the
strategy <code>drake</code> uses to load/unload a target's dependencies in memory.
You can give each target its own memory strategy,
(e.g. <code>drake_plan(x = 1, y = target(f(x), memory_strategy = "lookahead"))</code>)
to override the global memory strategy. Choices:
</p>

<ul>
<li> <p><code>"speed"</code>: Once a target is newly built or loaded in memory,
just keep it there.
This choice maximizes speed and hogs memory.
</p>
</li>
<li> <p><code>"autoclean"</code>: Just before building each new target,
unload everything from memory except the target's direct dependencies.
After a target is built, discard it from memory.
(Set <code>garbage_collection = TRUE</code> to make sure it is really gone.)
This option conserves memory, but it sacrifices speed because
each new target needs to reload
any previously unloaded targets from storage.
</p>
</li>
<li> <p><code>"preclean"</code>: Just before building each new target,
unload everything from memory except the target's direct dependencies.
After a target is built, keep it in memory until <code>drake</code> determines
they can be unloaded.
This option conserves memory, but it sacrifices speed because
each new target needs to reload
any previously unloaded targets from storage.
</p>
</li>
<li> <p><code>"lookahead"</code>: Just before building each new target,
search the dependency graph to find targets that will not be
needed for the rest of the current <code>make()</code> session.
After a target is built, keep it in memory until the next
memory management stage.
In this mode, targets are only in memory if they need to be loaded,
and we avoid superfluous reads from the cache.
However, searching the graph takes time,
and it could even double the computational overhead for large projects.
</p>
</li>
<li> <p><code>"unload"</code>: Just before building each new target,
unload all targets from memory.
After a target is built, <strong>do not</strong> keep it in memory.
This mode aggressively optimizes for both memory and speed,
but in commands and triggers,
you have to manually load any dependencies you need using <code>readd()</code>.
</p>
</li>
<li> <p><code>"none"</code>: Do not manage memory at all.
Do not load or unload anything before building targets.
After a target is built, <strong>do not</strong> keep it in memory.
This mode aggressively optimizes for both memory and speed,
but in commands and triggers,
you have to manually load any dependencies you need using <code>readd()</code>.
</p>
</li></ul>

<p>For even more direct
control over which targets <code>drake</code> keeps in memory, see the
help file examples of <code><a href="#topic+drake_envir">drake_envir()</a></code>.
Also see the <code>garbage_collection</code> argument of <code>make()</code> and
<code>drake_config()</code>.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_spec">spec</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_layout">layout</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_lock_envir">lock_envir</code></td>
<td>
<p>Logical, whether to lock <code>config$envir</code> during <code>make()</code>.
If <code>TRUE</code>, <code>make()</code> quits in error whenever a command in your
<code>drake</code> plan (or <code>prework</code>) tries to add, remove, or modify
non-hidden variables in your environment/workspace/R session.
This is extremely important for ensuring the purity of your functions
and the reproducibility/credibility/trust you can place in your project.
<code>lock_envir</code> will be set to a default of <code>TRUE</code> in <code>drake</code> version
7.0.0 and higher. Namespaces are never locked, e.g.
if <code>envir</code> is <code>getNamespace("packagename")</code>.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_history">history</code></td>
<td>
<p>Logical, whether to record the build history
of your targets. You can also supply a
<code>txtq</code>, which is
how <code>drake</code> records history.
Must be <code>TRUE</code> for <code><a href="#topic+drake_history">drake_history()</a></code> to work later.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_recover">recover</code></td>
<td>
<p>Logical, whether to activate automated data recovery.
The default is <code>FALSE</code> because
</p>

<ol>
<li><p> Automated data recovery is still stable.
</p>
</li>
<li><p> It has reproducibility issues.
Targets recovered from the distant past may have been generated
with earlier versions of R and earlier package environments
that no longer exist.
</p>
</li>
<li><p> It is not always possible, especially when dynamic files
are combined with dynamic branching
(e.g. <code>dynamic = map(stuff)</code> and <code>format = "file"</code> etc.)
since behavior is harder to predict in advance.
</p>
</li></ol>

<p>How it works: if <code>recover</code> is <code>TRUE</code>,
<code>drake</code> tries to salvage old target values from the cache
instead of running commands from the plan.
A target is recoverable if
</p>

<ol>
<li><p> There is an old value somewhere in the cache that
shares the command, dependencies, etc.
of the target about to be built.
</p>
</li>
<li><p> The old value was generated with <code>make(recoverable = TRUE)</code>.
</p>
</li></ol>

<p>If both conditions are met, <code>drake</code> will
</p>

<ol>
<li><p> Assign the most recently-generated admissible data to the target, and
</p>
</li>
<li><p> skip the target's command.
</p>
</li></ol>

<p>Functions <code><a href="#topic+recoverable">recoverable()</a></code> and <code><a href="#topic+r_recoverable">r_recoverable()</a></code> show the most upstream
outdated targets that will be recovered in this way in the next
<code><a href="#topic+make">make()</a></code> or <code><a href="#topic+r_make">r_make()</a></code>.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_recoverable">recoverable</code></td>
<td>
<p>Logical, whether to make target values recoverable
with <code>make(recover = TRUE)</code>.
This requires writing extra files to the cache,
and it prevents old metadata from being removed with garbage collection
(<code>clean(garbage_collection = TRUE)</code>, <code>gc()</code> in <code>storr</code>s).
If you need to limit the cache size or the number of files in the cache,
consider <code>make(recoverable = FALSE, progress = FALSE)</code>.
Recovery is not always possible, especially when dynamic files
are combined with dynamic branching
(e.g. <code>dynamic = map(stuff)</code> and <code>format = "file"</code> etc.)
since behavior is harder to predict in advance.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_curl_handles">curl_handles</code></td>
<td>
<p>A named list of curl handles. Each value is an
object from <code>curl::new_handle()</code>, and each name is a URL
(and should start with &quot;http&quot;, &quot;https&quot;, or &quot;ftp&quot;).
Example:
list(
<code style="white-space: pre;">&#8288;http://httpbin.org/basic-auth&#8288;</code> = curl::new_handle(
username = &quot;user&quot;, password = &quot;passwd&quot;
)
)
Then, if your plan has
<code>file_in("http://httpbin.org/basic-auth/user/passwd")</code>
<code>drake</code> will authenticate using the username and password of the handle
for <code style="white-space: pre;">&#8288;http://httpbin.org/basic-auth/&#8288;</code>.
</p>
<p><code>drake</code> uses partial matching on text to
find the right handle of the <code>file_in()</code> URL, so the name of the handle
could be the complete URL (<code>"http://httpbin.org/basic-auth/user/passwd"</code>)
or a part of the URL (e.g. <code>"http://httpbin.org/"</code> or
<code>"http://httpbin.org/basic-auth/"</code>). If you have multiple handles
whose names match your URL, <code>drake</code> will choose the closest match.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_max_expand">max_expand</code></td>
<td>
<p>Positive integer, optional.
<code>max_expand</code> is the maximum number of targets to generate in each
<code>map()</code>, <code>cross()</code>, or <code>group()</code> dynamic transform.
Useful if you have a massive number of dynamic sub-targets and you want to
work with only the first few sub-targets before scaling up.
Note: the <code>max_expand</code> argument of <code>make()</code> and
<code>drake_config()</code> is for dynamic branching only.
The static branching <code>max_expand</code>
is an argument of <code>drake_plan()</code> and <code>transform_plan()</code>.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_log_build_times">log_build_times</code></td>
<td>
<p>Logical, whether to record build_times for targets.
Mac users may notice a 20% speedup in <code>make()</code>
with <code>build_times = FALSE</code>.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_format">format</code></td>
<td>
<p>Character, an optional custom storage format for targets
without an explicit <code>target(format = ...)</code> in the plan. Details
about formats:
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#special-data-formats-for-targets&#8288;</code> # nolint</p>
</td></tr>
<tr><td><code id="drake_config_+3A_lock_cache">lock_cache</code></td>
<td>
<p>Logical, whether to lock the cache before running <code>make()</code>
etc. It is usually recommended to keep cache locking on.
However, if you interrupt <code>make()</code> before it can clean itself up,
then the cache will stay locked,
and you will need to manually unlock it with
<code>drake::drake_cache("xyz")$unlock()</code>. Repeatedly unlocking the cache
by hand is annoying, and <code>lock_cache = FALSE</code> prevents the cache
from locking in the first place.</p>
</td></tr>
<tr><td><code id="drake_config_+3A_log_make">log_make</code></td>
<td>
<p>Optional character scalar of a file name or
connection object (such as <code>stdout()</code>) to dump maximally verbose
log information for <code><a href="#topic+make">make()</a></code> and other functions (all functions that
accept a <code>config</code> argument, plus <code>drake_config()</code>).
If you choose to use a text file as the console log,
it will persist over multiple function calls
until you delete it manually.
Fields in each row the log file, from left to right:
- The node name (short host name) of the
computer (from <code>Sys.info()["nodename"]</code>).
- The process ID (from <code>Sys.getpid()</code>).
- A timestamp with the date and time (in microseconds).
- A brief description of what <code>drake</code> was doing.<code style="white-space: pre;">&#8288; The fields are separated by pipe symbols (&#8288;</code>&quot;|&quot;').</p>
</td></tr>
<tr><td><code id="drake_config_+3A_log_worker">log_worker</code></td>
<td>
<p>Logical, same as the <code>log_worker</code> argument of
<code>clustermq::workers()</code> and <code>clustermq::Q()</code>. Only relevant
if <code>parallelism</code> is <code>"clustermq"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In <code>drake</code>, <code><a href="#topic+make">make()</a></code> has two stages:
</p>

<ol>
<li><p> Configure a workflow to your environment and plan.
</p>
</li>
<li><p> Build targets.
The <code><a href="#topic+drake_config">drake_config()</a></code> function just does step (1),
which is a common requirement for not only <code><a href="#topic+make">make()</a></code>,
but also utility functions like <code><a href="#topic+vis_drake_graph">vis_drake_graph()</a></code>
and <code><a href="#topic+outdated">outdated()</a></code>. That is why <code><a href="#topic+drake_config">drake_config()</a></code>
is a requirement for the <code style="white-space: pre;">&#8288;_drake.R&#8288;</code> script, which
powers <code><a href="#topic+r_make">r_make()</a></code>, <code><a href="#topic+r_outdated">r_outdated()</a></code>, <code><a href="#topic+r_vis_drake_graph">r_vis_drake_graph()</a></code>, etc.
</p>
</li></ol>



<h3>Value</h3>

<p>A configured <code>drake</code> workflow.
</p>


<h3>Recovery</h3>

<p><code>make(recover = TRUE, recoverable = TRUE)</code>
powers automated data recovery.
The default of <code>recover</code> is <code>FALSE</code> because
targets recovered from the distant past may have been generated
with earlier versions of R and earlier package environments
that no longer exist.
</p>
<p>How it works: if <code>recover</code> is <code>TRUE</code>,
<code>drake</code> tries to salvage old target values from the cache
instead of running commands from the plan.
A target is recoverable if
</p>

<ol>
<li><p> There is an old value somewhere in the cache that
shares the command, dependencies, etc.
of the target about to be built.
</p>
</li>
<li><p> The old value was generated with <code>make(recoverable = TRUE)</code>.
</p>
</li></ol>

<p>If both conditions are met, <code>drake</code> will
</p>

<ol>
<li><p> Assign the most recently-generated admissible data to the target, and
</p>
</li>
<li><p> skip the target's command.
</p>
</li></ol>



<h3>See Also</h3>

<p><code><a href="#topic+make">make()</a></code>, <code><a href="#topic+drake_plan">drake_plan()</a></code>, <code><a href="#topic+vis_drake_graph">vis_drake_graph()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("quarantine side effects", {
if (requireNamespace("knitr", quietly = TRUE)) {
writeLines(
  c(
    "library(drake)",
    "load_mtcars_example()",
    "drake_config(my_plan, targets = c(\"small\", \"large\"))"
  ),
  "_drake.R" # default value of the `source` argument
)
cat(readLines("_drake.R"), sep = "\n")
r_outdated()
r_make()
r_outdated()
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_debug'>Run a single target's command in debug mode.'
<a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a></h2><span id='topic+drake_debug'></span>

<h3>Description</h3>

<p>Not valid for dynamic branching.
<code>drake_debug()</code> loads a target's dependencies
and then runs its command in debug mode (see <code>browser()</code>,
<code>debug()</code>, and <code>debugonce()</code>). This function does not
store the target's value in the cache
(see <code style="white-space: pre;">&#8288;https://github.com/ropensci/drake/issues/587&#8288;</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_debug(
  target = NULL,
  ...,
  character_only = FALSE,
  replace = FALSE,
  verbose = TRUE,
  config = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_debug_+3A_target">target</code></td>
<td>
<p>Name of the target.</p>
</td></tr>
<tr><td><code id="drake_debug_+3A_...">...</code></td>
<td>
<p>Arguments to <code><a href="#topic+make">make()</a></code>, such as the plan and environment.</p>
</td></tr>
<tr><td><code id="drake_debug_+3A_character_only">character_only</code></td>
<td>
<p>Logical, whether <code>name</code> should be treated
as a character or a symbol
(just like <code>character.only</code> in <code><a href="base.html#topic+library">library()</a></code>).</p>
</td></tr>
<tr><td><code id="drake_debug_+3A_replace">replace</code></td>
<td>
<p>Logical. If <code>FALSE</code>,
items already in your environment
will not be replaced.</p>
</td></tr>
<tr><td><code id="drake_debug_+3A_verbose">verbose</code></td>
<td>
<p>Logical, whether to print out the target
you are debugging.</p>
</td></tr>
<tr><td><code id="drake_debug_+3A_config">config</code></td>
<td>
<p>Deprecated 2019-12-22.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The value of the target right after it is built.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_build">drake_build()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
# This example is not really a user-side demonstration.
# It just walks through a dive into the internals.
# Populate your workspace and write 'report.Rmd'.
load_mtcars_example() # Get the code with drake_example("mtcars").
# out &lt;- drake_debug(small, my_plan)
# `small` was invisibly returned.
# head(out)
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_deps'><code>drake_deps</code> helper</h2><span id='topic+drake_deps'></span>

<h3>Description</h3>

<p>Static code analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_deps(expr, exclude = character(0), restrict = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_deps_+3A_expr">expr</code></td>
<td>
<p>An R expression</p>
</td></tr>
<tr><td><code id="drake_deps_+3A_exclude">exclude</code></td>
<td>
<p>Character vector of the names of symbols to exclude
from the code analysis.</p>
</td></tr>
<tr><td><code id="drake_deps_+3A_restrict">restrict</code></td>
<td>
<p>Optional character vector of allowable names of globals.
If <code>NULL</code>, all global symbols are detectable. If a character vector,
only the variables in <code>restrict</code> will count as global variables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>drake_deps</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (FALSE) { # stronger than roxygen dontrun
expr &lt;- quote({
  a &lt;- base::list(1)
  b &lt;- seq_len(10)
  file_out("abc")
  file_in("xyz")
  x &lt;- "123"
  loadd(abc)
  readd(xyz)
})
drake_deps(expr)
}
</code></pre>

<hr>
<h2 id='drake_deps_ht'><code>drake_deps_ht</code> helper</h2><span id='topic+drake_deps_ht'></span>

<h3>Description</h3>

<p>Static code analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_deps_ht(expr, exclude = character(0), restrict = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_deps_ht_+3A_expr">expr</code></td>
<td>
<p>An R expression</p>
</td></tr>
<tr><td><code id="drake_deps_ht_+3A_exclude">exclude</code></td>
<td>
<p>Character vector of the names of symbols to exclude
from the code analysis.</p>
</td></tr>
<tr><td><code id="drake_deps_ht_+3A_restrict">restrict</code></td>
<td>
<p>Optional character vector of allowable names of globals.
If <code>NULL</code>, all global symbols are detectable. If a character vector,
only the variables in <code>restrict</code> will count as global variables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>drake_deps_ht</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (FALSE) { # stronger than roxygen dontrun
expr &lt;- quote({
  a &lt;- base::list(1)
  b &lt;- seq_len(10)
  file_out("abc")
  file_in("xyz")
  x &lt;- "123"
  loadd(abc)
  readd(xyz)
})
drake_deps_ht(expr)
}
</code></pre>

<hr>
<h2 id='drake_done'>List done targets.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+drake_done'></span>

<h3>Description</h3>

<p>List the targets that completed in the current or
previous call to <code><a href="#topic+make">make()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_done(cache = drake::drake_cache(path = path), path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_done_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="drake_done_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of target names.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_running">drake_running()</a></code>, <code><a href="#topic+drake_failed">drake_failed()</a></code>, <code><a href="#topic+drake_cancelled">drake_cancelled()</a></code>,
<code><a href="#topic+drake_progress">drake_progress()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("contain side effects", {
plan &lt;- drake_plan(x = 1, y = x)
make(plan)
drake_done()
})

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_envir'>Get the environment where drake builds targets
<a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a></h2><span id='topic+drake_envir'></span>

<h3>Description</h3>

<p>Call this function inside the commands in your plan
to get the environment where <code>drake</code> builds targets.
Advanced users can use it to strategically remove targets from memory
while <code><a href="#topic+make">make()</a></code> is running.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_envir(which = c("targets", "dynamic", "subtargets", "imports"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_envir_+3A_which">which</code></td>
<td>
<p>Character of length 1, which environment
to select. See the details of this help file.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>drake</code> manages in-memory targets in 4 environments:
one with sub-targets, one with whole dynamic targets, one with
static targets, and one with imported global objects and functions.
This last environment is usually the environment
from which you call <code><a href="#topic+make">make()</a></code>.
Select the appropriate environment for your
use case with the <code>which</code> argument of <code>drake_envir()</code>.
</p>


<h3>Value</h3>

<p>The environment where <code>drake</code> builds targets.
</p>


<h3>Keywords</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code> understands special keyword functions for your commands.
With the exception of <code><a href="#topic+target">target()</a></code>, each one is a proper function
with its own help file.
</p>

<ul>
<li> <p><code><a href="#topic+target">target()</a></code>: give the target more than just a command.
Using <code><a href="#topic+target">target()</a></code>, you can apply a transformation
(examples: <code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>), # nolint
supply a trigger (<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/triggers.html&#8288;</code>), # nolint
or set any number of custom columns.
</p>
</li>
<li> <p><code><a href="#topic+file_in">file_in()</a></code>: declare an input file dependency.
</p>
</li>
<li> <p><code><a href="#topic+file_out">file_out()</a></code>: declare an output file to be produced
when the target is built.
</p>
</li>
<li> <p><code><a href="#topic+knitr_in">knitr_in()</a></code>: declare a <code>knitr</code> file dependency such as an
R Markdown (<code style="white-space: pre;">&#8288;*.Rmd&#8288;</code>) or R LaTeX (<code style="white-space: pre;">&#8288;*.Rnw&#8288;</code>) file.
</p>
</li>
<li> <p><code><a href="#topic+ignore">ignore()</a></code>: force <code>drake</code> to entirely ignore a piece of code:
do not track it for changes and do not analyze it for dependencies.
</p>
</li>
<li> <p><code><a href="#topic+no_deps">no_deps()</a></code>: tell <code>drake</code> to not track the dependencies
of a piece of code. <code>drake</code> still tracks the code itself for changes.
</p>
</li>
<li> <p><code><a href="#topic+id_chr">id_chr()</a></code>: Get the name of the current target.
</p>
</li>
<li> <p><code><a href="#topic+drake_envir">drake_envir()</a></code>: get the environment where drake builds targets.
Intended for advanced custom memory management.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+from_plan">from_plan()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("contain side effects", {
plan &lt;- drake_plan(
  large_data_1 = sample.int(1e4),
  large_data_2 = sample.int(1e4),
  subset = c(large_data_1[seq_len(10)], large_data_2[seq_len(10)]),
  summary = {
    print(ls(envir = parent.env(drake_envir())))
    # We don't need the large_data_* targets in memory anymore.
    rm(large_data_1, large_data_2, envir = drake_envir("targets"))
    print(ls(envir = drake_envir("targets")))
    mean(subset)
  }
)
make(plan, cache = storr::storr_environment(), session_info = FALSE)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_example'>Download the files of an example <code>drake</code> project.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+drake_example'></span>

<h3>Description</h3>

<p>The <code>drake_example()</code> function downloads a
folder from <code style="white-space: pre;">&#8288;https://github.com/wlandau/drake-examples&#8288;</code>.
By default, it creates a new folder with the example name
in your current working directory. After the files are written,
have a look at the enclosed <code>README</code> file.
Other instructions are available in the files at
<code style="white-space: pre;">&#8288;https://github.com/wlandau/drake-examples&#8288;</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_example(
  example = "main",
  to = getwd(),
  destination = NULL,
  overwrite = FALSE,
  quiet = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_example_+3A_example">example</code></td>
<td>
<p>Name of the example.
The possible values are the names of the folders at
<code style="white-space: pre;">&#8288;https://github.com/wlandau/drake-examples&#8288;</code>.</p>
</td></tr>
<tr><td><code id="drake_example_+3A_to">to</code></td>
<td>
<p>Character scalar,
the folder containing the code files for the example.
passed to the <code>exdir</code> argument of <code>utils::unzip()</code>.</p>
</td></tr>
<tr><td><code id="drake_example_+3A_destination">destination</code></td>
<td>
<p>Deprecated; use <code>to</code> instead.</p>
</td></tr>
<tr><td><code id="drake_example_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical, whether to overwrite an existing folder
with the same name as the drake example.</p>
</td></tr>
<tr><td><code id="drake_example_+3A_quiet">quiet</code></td>
<td>
<p>Logical, passed to <code>downloader::download()</code>
and thus <code>utils::download.file()</code>. Whether
to download quietly or print progress.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>NULL</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_examples">drake_examples()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (requireNamespace("downloader")) {
drake_examples() # List all the drake examples.
# Sets up the same example from load_mtcars_example()
drake_example("mtcars")
# Sets up the SLURM example.
drake_example("slurm")
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_examples'>List the names of all the drake examples.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+drake_examples'></span>

<h3>Description</h3>

<p>You can find the code files of the examples at
<code style="white-space: pre;">&#8288;https://github.com/wlandau/drake-examples&#8288;</code>.
The <code>drake_examples()</code> function downloads the list of examples
from <code style="white-space: pre;">&#8288;https://wlandau.github.io/drake-examples/examples.md&#8288;</code>,
so you need an internet connection.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_examples(quiet = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_examples_+3A_quiet">quiet</code></td>
<td>
<p>Logical, passed to <code>downloader::download()</code>
and thus <code>utils::download.file()</code>. Whether
to download quietly or print progress.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Names of all the drake examples.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_example">drake_example()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (requireNamespace("downloader")) {
drake_examples() # List all the drake examples.
# Sets up the example from load_mtcars_example()
drake_example("mtcars")
# Sets up the SLURM example.
drake_example("slurm")
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_failed'>List failed targets.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+drake_failed'></span>

<h3>Description</h3>

<p>List the targets that quit in error during <code><a href="#topic+make">make()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_failed(cache = drake::drake_cache(path = path), path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_failed_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="drake_failed_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of target names.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_done">drake_done()</a></code>, <code><a href="#topic+drake_running">drake_running()</a></code>, <code><a href="#topic+drake_cancelled">drake_cancelled()</a></code>,
<code><a href="#topic+drake_progress">drake_progress()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("contain side effects", {
if (suppressWarnings(require("knitr"))) {
# Build a plan doomed to fail:
bad_plan &lt;- drake_plan(x = function_doesnt_exist())
cache &lt;- storr::storr_environment() # optional
try(
  make(bad_plan, cache = cache, history = FALSE),
  silent = TRUE
) # error
drake_failed(cache = cache) # "x"
e &lt;- diagnose(x, cache = cache) # Retrieve the cached error log of x.
names(e)
e$error
names(e$error)
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_gc'>Do garbage collection on the drake cache.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+drake_gc'></span>

<h3>Description</h3>

<p>Garbage collection removes obsolete target values
from the cache.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_gc(
  path = NULL,
  search = NULL,
  verbose = NULL,
  cache = drake::drake_cache(path = path),
  force = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_gc_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="drake_gc_+3A_search">search</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="drake_gc_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
<tr><td><code id="drake_gc_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="drake_gc_+3A_force">force</code></td>
<td>
<p>Logical, whether to load the cache
despite any back compatibility issues with the
running version of drake.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Caution: garbage collection <em>actually</em> removes data
so it is no longer recoverable with <code><a href="#topic+drake_history">drake_history()</a></code> or
<code>make(recover = TRUE)</code>. You cannot undo this operation.
Use at your own risk.
</p>


<h3>Value</h3>

<p><code>NULL</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+clean">clean()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
make(my_plan) # Run the project, build the targets.
# At this point, check the size of the '.drake/' cache folder.
# Clean without garbage collection.
clean(garbage_collection = FALSE)
# The '.drake/' cache folder is still about the same size.
drake_gc() # Do garbage collection on the cache.
# The '.drake/' cache folder should have gotten much smaller.
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_get_session_info'>Session info of the last call to <code><a href="#topic+make">make()</a></code>.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+drake_get_session_info'></span>

<h3>Description</h3>

<p>By default, session info is saved
during <code><a href="#topic+make">make()</a></code> to ensure reproducibility.
Your loaded packages and their versions are recorded, for example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_get_session_info(
  path = NULL,
  search = NULL,
  cache = drake::drake_cache(path = path),
  verbose = 1L
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_get_session_info_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="drake_get_session_info_+3A_search">search</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="drake_get_session_info_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="drake_get_session_info_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="utils.html#topic+sessionInfo">sessionInfo()</a></code> of the last
call to <code><a href="#topic+make">make()</a></code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+diagnose">diagnose()</a></code>, <code><a href="#topic+cached">cached()</a></code>,
<code><a href="#topic+readd">readd()</a></code>, <code><a href="#topic+drake_plan">drake_plan()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
make(my_plan) # Run the project, build the targets.
drake_get_session_info() # Get the cached sessionInfo() of the last make().
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_ggraph'>Visualize the workflow with <code>ggraph</code>/<code>ggplot2</code>
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+drake_ggraph'></span>

<h3>Description</h3>

<p>This function requires packages <code>ggplot2</code> and <code>ggraph</code>.
Install them with <code>install.packages(c("ggplot2", "ggraph"))</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_ggraph(
  ...,
  build_times = "build",
  digits = 3,
  targets_only = FALSE,
  main = NULL,
  from = NULL,
  mode = c("out", "in", "all"),
  order = NULL,
  subset = NULL,
  make_imports = TRUE,
  from_scratch = FALSE,
  full_legend = FALSE,
  group = NULL,
  clusters = NULL,
  show_output_files = TRUE,
  label_nodes = FALSE,
  transparency = TRUE,
  config = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_ggraph_+3A_...">...</code></td>
<td>
<p>Arguments to <code><a href="#topic+make">make()</a></code>, such as <code>plan</code> and <code>targets</code>.</p>
</td></tr>
<tr><td><code id="drake_ggraph_+3A_build_times">build_times</code></td>
<td>
<p>Character string or logical.
If character, the choices are
1. <code>"build"</code>: runtime of the command plus the time
it take to store the target or import.
2. <code>"command"</code>: just the runtime of the command.
3. <code>"none"</code>: no build times.
If logical, <code>build_times</code> selects whether to show the
times from 'build_times(..., type = &quot;build&quot;)&ldquo; or use
no build times at all. See <code><a href="#topic+build_times">build_times()</a></code> for details.</p>
</td></tr>
<tr><td><code id="drake_ggraph_+3A_digits">digits</code></td>
<td>
<p>Number of digits for rounding the build times</p>
</td></tr>
<tr><td><code id="drake_ggraph_+3A_targets_only">targets_only</code></td>
<td>
<p>Logical,
whether to skip the imports and only include the
targets in the workflow plan.</p>
</td></tr>
<tr><td><code id="drake_ggraph_+3A_main">main</code></td>
<td>
<p>Character string, title of the graph.</p>
</td></tr>
<tr><td><code id="drake_ggraph_+3A_from">from</code></td>
<td>
<p>Optional collection of target/import names.
If <code>from</code> is nonempty,
the graph will restrict itself to
a neighborhood of <code>from</code>.
Control the neighborhood with
<code>mode</code> and <code>order</code>.</p>
</td></tr>
<tr><td><code id="drake_ggraph_+3A_mode">mode</code></td>
<td>
<p>Which direction to branch out in the graph
to create a neighborhood around <code>from</code>.
Use <code>"in"</code> to go upstream,
<code>"out"</code> to go downstream,
and <code>"all"</code> to go both ways and disregard
edge direction altogether.</p>
</td></tr>
<tr><td><code id="drake_ggraph_+3A_order">order</code></td>
<td>
<p>How far to branch out to create
a neighborhood around <code>from</code>. Defaults to
as far as possible. If a target is in the neighborhood, then
so are all of its custom <code><a href="#topic+file_out">file_out()</a></code> files if
<code>show_output_files</code> is <code>TRUE</code>.
That means the actual graph order may be slightly greater than
you might expect, but this ensures consistency
between <code>show_output_files = TRUE</code> and
<code>show_output_files = FALSE</code>.</p>
</td></tr>
<tr><td><code id="drake_ggraph_+3A_subset">subset</code></td>
<td>
<p>Optional character vector.
Subset of targets/imports to display in the graph.
Applied after <code>from</code>, <code>mode</code>, and <code>order</code>.
Be advised: edges are only kept for adjacent nodes in <code>subset</code>.
If you do not select all the intermediate nodes,
edges will drop from the graph.</p>
</td></tr>
<tr><td><code id="drake_ggraph_+3A_make_imports">make_imports</code></td>
<td>
<p>Logical, whether to make the imports first.
Set to <code>FALSE</code> to increase speed and risk using obsolete information.</p>
</td></tr>
<tr><td><code id="drake_ggraph_+3A_from_scratch">from_scratch</code></td>
<td>
<p>Logical, whether to assume all the targets
will be made from scratch on the next <code><a href="#topic+make">make()</a></code>.
Makes all targets outdated, but keeps information about
build progress in previous <code><a href="#topic+make">make()</a></code>s.</p>
</td></tr>
<tr><td><code id="drake_ggraph_+3A_full_legend">full_legend</code></td>
<td>
<p>Logical. If <code>TRUE</code>, all the node types
are printed in the legend. If <code>FALSE</code>, only the
node types used are printed in the legend.</p>
</td></tr>
<tr><td><code id="drake_ggraph_+3A_group">group</code></td>
<td>
<p>Optional character scalar, name of the column used to
group nodes into columns. All the columns names of your original <code>drake</code>
plan are choices. The other choices (such as <code>"status"</code>) are column names
in the <code>nodes</code> . To group nodes into clusters in the graph,
you must also supply the <code>clusters</code> argument.</p>
</td></tr>
<tr><td><code id="drake_ggraph_+3A_clusters">clusters</code></td>
<td>
<p>Optional character vector of values to cluster on.
These values must be elements of the column of the <code>nodes</code> data frame
that you specify in the <code>group</code> argument to <code>drake_graph_info()</code>.</p>
</td></tr>
<tr><td><code id="drake_ggraph_+3A_show_output_files">show_output_files</code></td>
<td>
<p>Logical, whether to include
<code><a href="#topic+file_out">file_out()</a></code> files in the graph.</p>
</td></tr>
<tr><td><code id="drake_ggraph_+3A_label_nodes">label_nodes</code></td>
<td>
<p>Logical, whether to label the nodes.
If <code>FALSE</code>, the graph will not have any text next to the nodes,
which is recommended for large graphs with lots of targets.</p>
</td></tr>
<tr><td><code id="drake_ggraph_+3A_transparency">transparency</code></td>
<td>
<p>Logical, whether to allow transparency in
the rendered graph. Set to <code>FALSE</code> if you get warnings
like &quot;semi-transparency is not supported on this device&quot;.</p>
</td></tr>
<tr><td><code id="drake_ggraph_+3A_config">config</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ggplot2</code> object, which you can modify with more layers,
show with <code>plot()</code>, or save as a file with <code>ggsave()</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+vis_drake_graph">vis_drake_graph()</a></code>, <code><a href="#topic+sankey_drake_graph">sankey_drake_graph()</a></code>,
<code><a href="#topic+render_drake_ggraph">render_drake_ggraph()</a></code>, <code><a href="#topic+text_drake_graph">text_drake_graph()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
load_mtcars_example() # Get the code with drake_example("mtcars").
# Plot the network graph representation of the workflow.
if (requireNamespace("ggraph", quietly = TRUE)) {
  drake_ggraph(my_plan) # Save to a file with `ggplot2::ggsave()`.
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_ggraph_impl'>Internal function with a drake_config() argument</h2><span id='topic+drake_ggraph_impl'></span>

<h3>Description</h3>

<p>Not a user-side function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_ggraph_impl(
  config,
  build_times = "build",
  digits = 3,
  targets_only = FALSE,
  main = NULL,
  from = NULL,
  mode = c("out", "in", "all"),
  order = NULL,
  subset = NULL,
  make_imports = TRUE,
  from_scratch = FALSE,
  full_legend = FALSE,
  group = NULL,
  clusters = NULL,
  show_output_files = TRUE,
  label_nodes = FALSE,
  transparency = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_ggraph_impl_+3A_config">config</code></td>
<td>
<p>A <code><a href="#topic+drake_config">drake_config()</a></code> object.</p>
</td></tr>
<tr><td><code id="drake_ggraph_impl_+3A_make_imports">make_imports</code></td>
<td>
<p>Logical, whether to make the imports first.
Set to <code>FALSE</code> to save some time and risk obsolete output.</p>
</td></tr>
</table>

<hr>
<h2 id='drake_graph_info'>Prepare the workflow graph for visualization
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+drake_graph_info'></span>

<h3>Description</h3>

<p>With the returned data frames,
you can plot your own custom <code>visNetwork</code> graph.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_graph_info(
  ...,
  from = NULL,
  mode = c("out", "in", "all"),
  order = NULL,
  subset = NULL,
  build_times = "build",
  digits = 3,
  targets_only = FALSE,
  font_size = 20,
  from_scratch = FALSE,
  make_imports = TRUE,
  full_legend = FALSE,
  group = NULL,
  clusters = NULL,
  show_output_files = TRUE,
  hover = FALSE,
  on_select_col = NULL,
  config = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_graph_info_+3A_...">...</code></td>
<td>
<p>Arguments to <code><a href="#topic+make">make()</a></code>, such as <code>plan</code> and <code>targets</code>.</p>
</td></tr>
<tr><td><code id="drake_graph_info_+3A_from">from</code></td>
<td>
<p>Optional collection of target/import names.
If <code>from</code> is nonempty,
the graph will restrict itself to
a neighborhood of <code>from</code>.
Control the neighborhood with
<code>mode</code> and <code>order</code>.</p>
</td></tr>
<tr><td><code id="drake_graph_info_+3A_mode">mode</code></td>
<td>
<p>Which direction to branch out in the graph
to create a neighborhood around <code>from</code>.
Use <code>"in"</code> to go upstream,
<code>"out"</code> to go downstream,
and <code>"all"</code> to go both ways and disregard
edge direction altogether.</p>
</td></tr>
<tr><td><code id="drake_graph_info_+3A_order">order</code></td>
<td>
<p>How far to branch out to create
a neighborhood around <code>from</code>. Defaults to
as far as possible. If a target is in the neighborhood, then
so are all of its custom <code><a href="#topic+file_out">file_out()</a></code> files if
<code>show_output_files</code> is <code>TRUE</code>.
That means the actual graph order may be slightly greater than
you might expect, but this ensures consistency
between <code>show_output_files = TRUE</code> and
<code>show_output_files = FALSE</code>.</p>
</td></tr>
<tr><td><code id="drake_graph_info_+3A_subset">subset</code></td>
<td>
<p>Optional character vector.
Subset of targets/imports to display in the graph.
Applied after <code>from</code>, <code>mode</code>, and <code>order</code>.
Be advised: edges are only kept for adjacent nodes in <code>subset</code>.
If you do not select all the intermediate nodes,
edges will drop from the graph.</p>
</td></tr>
<tr><td><code id="drake_graph_info_+3A_build_times">build_times</code></td>
<td>
<p>Character string or logical.
If character, the choices are
1. <code>"build"</code>: runtime of the command plus the time
it take to store the target or import.
2. <code>"command"</code>: just the runtime of the command.
3. <code>"none"</code>: no build times.
If logical, <code>build_times</code> selects whether to show the
times from 'build_times(..., type = &quot;build&quot;)&ldquo; or use
no build times at all. See <code><a href="#topic+build_times">build_times()</a></code> for details.</p>
</td></tr>
<tr><td><code id="drake_graph_info_+3A_digits">digits</code></td>
<td>
<p>Number of digits for rounding the build times</p>
</td></tr>
<tr><td><code id="drake_graph_info_+3A_targets_only">targets_only</code></td>
<td>
<p>Logical,
whether to skip the imports and only include the
targets in the workflow plan.</p>
</td></tr>
<tr><td><code id="drake_graph_info_+3A_font_size">font_size</code></td>
<td>
<p>Numeric, font size of the node labels in the graph</p>
</td></tr>
<tr><td><code id="drake_graph_info_+3A_from_scratch">from_scratch</code></td>
<td>
<p>Logical, whether to assume all the targets
will be made from scratch on the next <code><a href="#topic+make">make()</a></code>.
Makes all targets outdated, but keeps information about
build progress in previous <code><a href="#topic+make">make()</a></code>s.</p>
</td></tr>
<tr><td><code id="drake_graph_info_+3A_make_imports">make_imports</code></td>
<td>
<p>Logical, whether to make the imports first.
Set to <code>FALSE</code> to increase speed and risk using obsolete information.</p>
</td></tr>
<tr><td><code id="drake_graph_info_+3A_full_legend">full_legend</code></td>
<td>
<p>Logical. If <code>TRUE</code>, all the node types
are printed in the legend. If <code>FALSE</code>, only the
node types used are printed in the legend.</p>
</td></tr>
<tr><td><code id="drake_graph_info_+3A_group">group</code></td>
<td>
<p>Optional character scalar, name of the column used to
group nodes into columns. All the columns names of your original <code>drake</code>
plan are choices. The other choices (such as <code>"status"</code>) are column names
in the <code>nodes</code> . To group nodes into clusters in the graph,
you must also supply the <code>clusters</code> argument.</p>
</td></tr>
<tr><td><code id="drake_graph_info_+3A_clusters">clusters</code></td>
<td>
<p>Optional character vector of values to cluster on.
These values must be elements of the column of the <code>nodes</code> data frame
that you specify in the <code>group</code> argument to <code>drake_graph_info()</code>.</p>
</td></tr>
<tr><td><code id="drake_graph_info_+3A_show_output_files">show_output_files</code></td>
<td>
<p>Logical, whether to include
<code><a href="#topic+file_out">file_out()</a></code> files in the graph.</p>
</td></tr>
<tr><td><code id="drake_graph_info_+3A_hover">hover</code></td>
<td>
<p>Logical, whether to show text (file contents,
commands, etc.) when you hover your cursor over a node.</p>
</td></tr>
<tr><td><code id="drake_graph_info_+3A_on_select_col">on_select_col</code></td>
<td>
<p>Optional string corresponding to the column name
in the plan that should provide data for the <code>on_select</code> event.</p>
</td></tr>
<tr><td><code id="drake_graph_info_+3A_config">config</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of three data frames: one for nodes,
one for edges, and one for
the legend nodes. The list also contains the
default title of the graph.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+vis_drake_graph">vis_drake_graph()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (requireNamespace("visNetwork", quietly = TRUE)) {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
vis_drake_graph(my_plan)
# Get a list of data frames representing the nodes, edges,
# and legend nodes of the visNetwork graph from vis_drake_graph().
raw_graph &lt;- drake_graph_info(my_plan)
# Choose a subset of the graph.
smaller_raw_graph &lt;- drake_graph_info(
  my_plan,
  from = c("small", "reg2"),
  mode = "in"
)
# Inspect the raw graph.
str(raw_graph)
# Use the data frames to plot your own custom visNetwork graph.
# For example, you can omit the legend nodes
# and change the direction of the graph.
library(visNetwork)
graph &lt;- visNetwork(nodes = raw_graph$nodes, edges = raw_graph$edges)
visHierarchicalLayout(graph, direction = 'UD')
}
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_graph_info_impl'>Internal function</h2><span id='topic+drake_graph_info_impl'></span>

<h3>Description</h3>

<p>Not a user-side function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_graph_info_impl(
  config,
  from = NULL,
  mode = c("out", "in", "all"),
  order = NULL,
  subset = NULL,
  build_times = "build",
  digits = 3,
  targets_only = FALSE,
  font_size = 20,
  from_scratch = FALSE,
  make_imports = TRUE,
  full_legend = FALSE,
  group = NULL,
  clusters = NULL,
  show_output_files = TRUE,
  hover = FALSE,
  on_select_col = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_graph_info_impl_+3A_config">config</code></td>
<td>
<p>A <code><a href="#topic+drake_config">drake_config()</a></code> object.</p>
</td></tr>
</table>

<hr>
<h2 id='drake_history'>History and provenance
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+drake_history'></span>

<h3>Description</h3>

<p>See the history and provenance of your targets:
what you ran, when you ran it, the function arguments
you used, and how to get old data back.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_history(cache = NULL, history = NULL, analyze = TRUE, verbose = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_history_+3A_cache">cache</code></td>
<td>
<p>drake cache as created by <code><a href="#topic+new_cache">new_cache()</a></code>.
See also <code><a href="#topic+drake_cache">drake_cache()</a></code>.</p>
</td></tr>
<tr><td><code id="drake_history_+3A_history">history</code></td>
<td>
<p>Logical, whether to record the build history
of your targets. You can also supply a
<code>txtq</code>, which is
how <code>drake</code> records history.
Must be <code>TRUE</code> for <code><a href="#topic+drake_history">drake_history()</a></code> to work later.</p>
</td></tr>
<tr><td><code id="drake_history_+3A_analyze">analyze</code></td>
<td>
<p>Logical, whether to analyze <code><a href="#topic+drake_plan">drake_plan()</a></code>
commands for arguments to function calls.
Could be slow because this requires parsing and analyzing
lots of R code.</p>
</td></tr>
<tr><td><code id="drake_history_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code><a href="#topic+drake_history">drake_history()</a></code> returns a data frame with the following columns.
</p>

<ul>
<li> <p><code>target</code>: the name of the target.
</p>
</li>
<li> <p><code>current</code>: logical, whether the row describes the data
actually assigned to the target name in the cache,
e.g. what you get with <code>loadd(target)</code> and <code>readd(target)</code>.
Does <strong>NOT</strong> tell you if the target is up to date.
</p>
</li>
<li> <p><code>built</code>: when the target's value was stored in the cache.
This is the true creation date of the target's value,
not the recovery date from <code>make(recover = TRUE)</code>.
</p>
</li>
<li> <p><code>exists</code>: logical, whether the target's historical value
still exists in the cache. Garbage collection via
(<code>clean(garbage_collection = TRUE)</code> and <code>drake_cache()$gc()</code>)
remove these historical values, but <code>clean()</code> under the default
settings does not.
</p>
</li>
<li> <p><code>hash</code>: fingerprint of the target's historical value in the cache.
If the value still exists, you can read it with
<code>drake_cache()$get_value(hash)</code>.
</p>
</li>
<li> <p><code>command</code>: the <code><a href="#topic+drake_plan">drake_plan()</a></code> command executed to build the target.
</p>
</li>
<li> <p><code>seed</code>: random number generator seed.
</p>
</li>
<li> <p><code>runtime</code>: the time it took to execute the <code><a href="#topic+drake_plan">drake_plan()</a></code> command.
Does not include overhead due to <code>drake</code>'s processing.
</p>
</li></ul>

<p>If <code>analyze</code> is <code>TRUE</code>, various other columns are included to show
the explicitly-named length-1 arguments to function calls in the commands.
See the &quot;Provenance&quot; section for more details.
</p>


<h3>Value</h3>

<p>A data frame of target history.
</p>


<h3>Provenance</h3>

<p>If <code>analyze</code> is <code>TRUE</code>, <code>drake</code>
scans your <code><a href="#topic+drake_plan">drake_plan()</a></code> commands
for function arguments and mentions them in the history.
A function argument shows up if and only if:
1. It has length 1. <br />
2. It is atomic, i.e. a base type: logical, integer,
real, complex, character, or raw. <br />
3. It is explicitly named in the function call,
For example, <code>x</code> is detected as <code>1</code> in
<code>fn(list(x = 1))</code> but not <code>f(list(1))</code>.
The exceptions are <code><a href="#topic+file_out">file_out()</a></code>, <code><a href="#topic+file_in">file_in()</a></code>,
and <code><a href="#topic+knitr_in">knitr_in()</a></code>. For example, <code>filename</code> is detected
as <code>"my_file.csv"</code> in
<code>process_data(filename = file_in("my_file.csv"))</code>.
NB: in <code>process_data(filename = file_in("a", "b"))</code>
<code>filename</code> is not detected because the value must be atomic. <br />
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("contain side-effects", {
if (requireNamespace("knitr", quietly = TRUE)) {
# First, let's iterate on a drake workflow.
load_mtcars_example()
make(my_plan, history = TRUE, verbose = 0L)
# Naturally, we'll make updates to our targets along the way.
reg2 &lt;- function(d) {
  d$x2 &lt;- d$x ^ 3
  lm(y ~ x2, data = d)
}
Sys.sleep(0.01)
make(my_plan, history = TRUE, verbose = 0L)
# The history is a data frame about all the recorded runs of your targets.
out &lt;- drake_history(analyze = TRUE)
print(out)
# Let's use the history to recover the oldest version
# of our regression2_small target.
oldest_reg2_small &lt;- max(which(out$target == "regression2_small"))
hash_oldest_reg2_small &lt;- out[oldest_reg2_small, ]$hash
cache &lt;- drake_cache()
cache$get_value(hash_oldest_reg2_small)
# If you run clean(), drake can still find all the targets.
clean(small)
drake_history()
# But if you run clean() with garbage collection,
# older versions of your targets may be gone.
clean(large, garbage_collection = TRUE)
drake_history()
invisible()
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_hpc_template_file'>Write a template file for deploying
work to a cluster / job scheduler.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+drake_hpc_template_file'></span>

<h3>Description</h3>

<p>See the example files from
<code><a href="#topic+drake_examples">drake_examples()</a></code> and <code><a href="#topic+drake_example">drake_example()</a></code>
for example usage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_hpc_template_file(
  file = drake::drake_hpc_template_files(),
  to = getwd(),
  overwrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_hpc_template_file_+3A_file">file</code></td>
<td>
<p>Name of the template file, including the &quot;tmpl&quot; extension.</p>
</td></tr>
<tr><td><code id="drake_hpc_template_file_+3A_to">to</code></td>
<td>
<p>Character vector, where to write the file.</p>
</td></tr>
<tr><td><code id="drake_hpc_template_file_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical, whether to overwrite an existing file of the
same name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>NULL</code> is returned,
but a batchtools template file is written.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_hpc_template_files">drake_hpc_template_files()</a></code>,
<code><a href="#topic+drake_examples">drake_examples()</a></code>, <code><a href="#topic+drake_example">drake_example()</a></code>,
<code><a href="#topic+shell_file">shell_file()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
plan &lt;- drake_plan(x = rnorm(1e7), y = rnorm(1e7))
# List the available template files.
drake_hpc_template_files()
# Write a SLURM template file.
out &lt;- file.path(tempdir(), "slurm_batchtools.tmpl")
drake_hpc_template_file("slurm_batchtools.tmpl", to = tempdir())
cat(readLines(out), sep = "\n")
# library(future.batchtools) # nolint
# future::plan(batchtools_slurm, template = out) # nolint
# make(plan, parallelism = "future", jobs = 2) # nolint

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_hpc_template_files'>List the available example template files for deploying
work to a cluster / job scheduler.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+drake_hpc_template_files'></span>

<h3>Description</h3>

<p>See the example files from
<code><a href="#topic+drake_examples">drake_examples()</a></code> and <code><a href="#topic+drake_example">drake_example()</a></code>
for example usage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_hpc_template_files()
</code></pre>


<h3>Value</h3>

<p>A character vector of example template files that
you can write with <code><a href="#topic+drake_hpc_template_file">drake_hpc_template_file()</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_hpc_template_file">drake_hpc_template_file()</a></code>,
<code><a href="#topic+drake_examples">drake_examples()</a></code>, <code><a href="#topic+drake_example">drake_example()</a></code>,
<code><a href="#topic+shell_file">shell_file()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
plan &lt;- drake_plan(x = rnorm(1e7), y = rnorm(1e7))
# List the available template files.
drake_hpc_template_files()
# Write a SLURM template file.
out &lt;- file.path(tempdir(), "slurm_batchtools.tmpl")
drake_hpc_template_file("slurm_batchtools.tmpl", to = tempdir())
cat(readLines(out), sep = "\n")
# library(future.batchtools) # nolint
# future::plan(batchtools_slurm, template = out) # nolint
# make(plan, parallelism = "future", jobs = 2) # nolint

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_meta'>Compute the initial pre-build metadata
of a target or import.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+drake_meta'></span>

<h3>Description</h3>

<p>Deprecated on 2019-01-12.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_meta(target, config)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_meta_+3A_target">target</code></td>
<td>
<p>Character scalar, name of the target
to get metadata.</p>
</td></tr>
<tr><td><code id="drake_meta_+3A_config">config</code></td>
<td>
<p>Top-level internal configuration list produced
by <code><a href="#topic+drake_config">drake_config()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The metadata helps determine if the
target is up to date or outdated. The metadata of imports
is used to compute the metadata of targets.
Target metadata is computed with <code>drake_meta()</code>, and then
<code>drake:::store_outputs()</code> completes the metadata
after the target is built.
In other words, the output of <code>drake_meta()</code> corresponds
to the state of the target immediately before <code><a href="#topic+make">make()</a></code>
builds it.
See <code><a href="#topic+diagnose">diagnose()</a></code> to read the final metadata of a target,
including any errors, warnings, and messages in the last build.
</p>


<h3>Value</h3>

<p>A list of metadata on a target. Does not include
the file modification time if the target is a file.
That piece is computed later in <code><a href="#topic+make">make()</a></code> by
<code>drake:::store_outputs()</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+diagnose">diagnose()</a></code>, <code><a href="#topic+deps_profile">deps_profile()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>

<hr>
<h2 id='drake_palette'>Show drake's color palette.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+drake_palette'></span>

<h3>Description</h3>

<p>Deprecated on 2019-01-12.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_palette()
</code></pre>


<h3>Details</h3>

<p>This function is
used in both the console and graph visualizations.
Your console must have the crayon package enabled.
This palette applies to console output
(internal functions <code>console()</code> and
<code>console_many_targets()</code>) and the node colors
in the graph visualizations.
So if you want to contribute improvements to the palette,
please both <code>drake_palette()</code> and
<code>visNetwork::visNetwork(nodes = legend_nodes())</code>
</p>


<h3>Value</h3>

<p>There is a console message,
but the actual return value is <code>NULL</code>.
</p>

<hr>
<h2 id='drake_plan'>Create a drake plan
for the <code>plan</code> argument of <code><a href="#topic+make">make()</a></code>.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+drake_plan'></span>

<h3>Description</h3>

<p>A <code>drake</code> plan is a data frame with columns
<code>"target"</code> and <code>"command"</code>. Each target is an R object
produced in your workflow, and each command is the
R code to produce it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_plan(
  ...,
  list = NULL,
  file_targets = NULL,
  strings_in_dots = NULL,
  tidy_evaluation = NULL,
  transform = TRUE,
  trace = FALSE,
  envir = parent.frame(),
  tidy_eval = TRUE,
  max_expand = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_plan_+3A_...">...</code></td>
<td>
<p>A collection of symbols/targets
with commands assigned to them. See the examples for details.</p>
</td></tr>
<tr><td><code id="drake_plan_+3A_list">list</code></td>
<td>
<p>Deprecated</p>
</td></tr>
<tr><td><code id="drake_plan_+3A_file_targets">file_targets</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="drake_plan_+3A_strings_in_dots">strings_in_dots</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="drake_plan_+3A_tidy_evaluation">tidy_evaluation</code></td>
<td>
<p>Deprecated. Use <code>tidy_eval</code> instead.</p>
</td></tr>
<tr><td><code id="drake_plan_+3A_transform">transform</code></td>
<td>
<p>Logical, whether to transform the plan
into a larger plan with more targets.
Requires the <code>transform</code> field in
<code>target()</code>. See the examples for details.</p>
</td></tr>
<tr><td><code id="drake_plan_+3A_trace">trace</code></td>
<td>
<p>Logical, whether to add columns to show
what happens during target transformations.</p>
</td></tr>
<tr><td><code id="drake_plan_+3A_envir">envir</code></td>
<td>
<p>Environment for tidy evaluation.</p>
</td></tr>
<tr><td><code id="drake_plan_+3A_tidy_eval">tidy_eval</code></td>
<td>
<p>Logical, whether to use tidy evaluation
(e.g. unquoting/<code style="white-space: pre;">&#8288;!!&#8288;</code>) when resolving commands.
Tidy evaluation in transformations is always turned on
regardless of the value you supply to this argument.</p>
</td></tr>
<tr><td><code id="drake_plan_+3A_max_expand">max_expand</code></td>
<td>
<p>Positive integer, optional.
<code>max_expand</code> is the maximum number of targets to generate in each
<code>map()</code>, <code>split()</code>, or <code>cross()</code> transform.
Useful if you have a massive plan and you want to
test and visualize a strategic subset of targets
before scaling up.
Note: the <code>max_expand</code> argument of <code>drake_plan()</code> and
<code>transform_plan()</code> is for static branching only.
The dynamic branching <code>max_expand</code>
is an argument of <code>make()</code> and <code>drake_config()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Besides <code>"target"</code> and <code>"command"</code>, <code><a href="#topic+drake_plan">drake_plan()</a></code>
understands a special set of optional columns. For details, visit
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#special-custom-columns-in-your-plan&#8288;</code> # nolint
</p>


<h3>Value</h3>

<p>A data frame of targets, commands, and optional
custom columns.
</p>


<h3>Columns</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code> creates a special data frame. At minimum, that data frame
must have columns <code>target</code> and <code>command</code> with the target names and the
R code chunks to build them, respectively.
</p>
<p>You can add custom columns yourself, either with <code>target()</code> (e.g.
<code>drake_plan(y = target(f(x), transform = map(c(1, 2)), format = "fst"))</code>)
or by appending columns post-hoc (e.g. <code>plan$col &lt;- vals</code>).
</p>
<p>Some of these custom columns are special. They are optional,
but <code>drake</code> looks for them at various points in the workflow.
</p>

<ul>
<li> <p><code>transform</code>: a call to <code><a href="#topic+map">map()</a></code>, <code><a href="#topic+split">split()</a></code>, <code><a href="#topic+cross">cross()</a></code>, or
<code><a href="#topic+combine">combine()</a></code> to create and manipulate large collections of targets.
Details: (<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>). # nolint
</p>
</li>
<li> <p><code>format</code>: set a storage format to save big targets more efficiently.
See the &quot;Formats&quot; section of this help file for more details.
</p>
</li>
<li> <p><code>trigger</code>: rule to decide whether a target needs to run.
It is recommended that you define this one with <code>target()</code>.
Details: <code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/triggers.html&#8288;</code>.
</p>
</li>
<li> <p><code>hpc</code>: logical values (<code>TRUE</code>/<code>FALSE</code>/<code>NA</code>) whether to send each target
to parallel workers.
Visit <code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/hpc.html#selectivity&#8288;</code>
to learn more.
</p>
</li>
<li> <p><code>resources</code>: target-specific lists of resources for a computing cluster.
See
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/hpc.html#advanced-options&#8288;</code>
for details.
</p>
</li>
<li> <p><code>caching</code>: overrides the <code>caching</code> argument of <code><a href="#topic+make">make()</a></code> for each target
individually. Possible values:
</p>

<ul>
<li><p> &quot;main&quot;: tell the main process to store the target in the cache.
</p>
</li>
<li><p> &quot;worker&quot;: tell the HPC worker to store the target in the cache.
</p>
</li>
<li><p> NA: default to the <code>caching</code> argument of <code><a href="#topic+make">make()</a></code>.
</p>
</li></ul>

</li>
<li> <p><code>elapsed</code> and <code>cpu</code>: number of seconds to wait for the target to build
before timing out (<code>elapsed</code> for elapsed time and <code>cpu</code> for CPU time).
</p>
</li>
<li> <p><code>retries</code>: number of times to retry building a target
in the event of an error.
</p>
</li>
<li> <p><code>seed</code>: an optional pseudo-random number generator (RNG)
seed for each target. <code>drake</code> usually comes up with its own
unique reproducible target-specific seeds using the global seed
(the <code>seed</code> argument to <code><a href="#topic+make">make()</a></code> and <code><a href="#topic+drake_config">drake_config()</a></code>)
and the target names, but you can overwrite these automatic seeds.
<code>NA</code> entries default back to <code>drake</code>'s automatic seeds.
</p>
</li>
<li> <p><code>max_expand</code>: for dynamic branching only. Same as the <code>max_expand</code>
argument of <code><a href="#topic+make">make()</a></code>, but on a target-by-target basis.
Limits the number of sub-targets created for a given target.
</p>
</li></ul>



<h3>Formats</h3>

<p>Specialized target formats increase efficiency and flexibility.
Some allow you to save specialized objects like <code>keras</code> models,
while others increase the speed while conserving storage and memory.
You can declare target-specific formats in the plan
(e.g. <code>drake_plan(x = target(big_data_frame, format = "fst"))</code>)
or supply a global default <code>format</code> for all targets in <code>make()</code>.
Either way, most formats have specialized installation requirements
(e.g. R packages) that are not installed with <code>drake</code> by default.
You will need to install them separately yourself.
Available formats:
</p>

<ul>
<li> <p><code>"file"</code>: Dynamic files. To use this format, simply create
local files and directories yourself and then return
a character vector of paths as the target's value.
Then, <code>drake</code> will watch for changes to those files in
subsequent calls to <code>make()</code>. This is a more flexible
alternative to <code>file_in()</code> and <code>file_out()</code>, and it is
compatible with dynamic branching.
See <code style="white-space: pre;">&#8288;https://github.com/ropensci/drake/pull/1178&#8288;</code> for an example.
</p>
</li>
<li> <p><code>"fst"</code>: save big data frames fast. Requires the <code>fst</code> package.
Note: this format strips non-data-frame attributes such as the
</p>
</li>
<li> <p><code>"fst_tbl"</code>: Like <code>"fst"</code>, but for <code>tibble</code> objects.
Requires the <code>fst</code> and <code>tibble</code> packages.
Strips away non-data-frame non-tibble attributes.
</p>
</li>
<li> <p><code>"fst_dt"</code>: Like <code>"fst"</code> format, but for <code>data.table</code> objects.
Requires the <code>fst</code> and <code>data.table</code> packages.
Strips away non-data-frame non-data-table attributes.
</p>
</li>
<li> <p><code>"diskframe"</code>:
Stores <code>disk.frame</code> objects, which could potentially be
larger than memory. Requires the <code>fst</code> and <code>disk.frame</code> packages.
Coerces objects to <code>disk.frame</code>s.
Note: <code>disk.frame</code> objects get moved to the <code>drake</code> cache
(a subfolder of <code style="white-space: pre;">&#8288;.drake/&#8288;</code> for most workflows).
To ensure this data transfer is fast, it is best to
save your <code>disk.frame</code> objects to the same physical storage
drive as the <code>drake</code> cache,
<code>as.disk.frame(your_dataset, outdir = drake_tempfile())</code>.
</p>
</li>
<li> <p><code>"keras"</code>: save Keras models as HDF5 files.
Requires the <code>keras</code> package.
</p>
</li>
<li> <p><code>"qs"</code>: save any R object that can be properly serialized
with the <code>qs</code> package. Requires the <code>qs</code> package.
Uses <code>qsave()</code> and <code>qread()</code>.
Uses the default settings in <code>qs</code> version 0.20.2.
</p>
</li>
<li> <p><code>"rds"</code>: save any R object that can be properly serialized.
Requires R version &gt;= 3.5.0 due to ALTREP.
Note: the <code>"rds"</code> format uses gzip compression, which is slow.
<code>"qs"</code> is a superior format.
</p>
</li></ul>



<h3>Keywords</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code> understands special keyword functions for your commands.
With the exception of <code><a href="#topic+target">target()</a></code>, each one is a proper function
with its own help file.
</p>

<ul>
<li> <p><code><a href="#topic+target">target()</a></code>: give the target more than just a command.
Using <code><a href="#topic+target">target()</a></code>, you can apply a transformation
(examples: <code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>), # nolint
supply a trigger (<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/triggers.html&#8288;</code>), # nolint
or set any number of custom columns.
</p>
</li>
<li> <p><code><a href="#topic+file_in">file_in()</a></code>: declare an input file dependency.
</p>
</li>
<li> <p><code><a href="#topic+file_out">file_out()</a></code>: declare an output file to be produced
when the target is built.
</p>
</li>
<li> <p><code><a href="#topic+knitr_in">knitr_in()</a></code>: declare a <code>knitr</code> file dependency such as an
R Markdown (<code style="white-space: pre;">&#8288;*.Rmd&#8288;</code>) or R LaTeX (<code style="white-space: pre;">&#8288;*.Rnw&#8288;</code>) file.
</p>
</li>
<li> <p><code><a href="#topic+ignore">ignore()</a></code>: force <code>drake</code> to entirely ignore a piece of code:
do not track it for changes and do not analyze it for dependencies.
</p>
</li>
<li> <p><code><a href="#topic+no_deps">no_deps()</a></code>: tell <code>drake</code> to not track the dependencies
of a piece of code. <code>drake</code> still tracks the code itself for changes.
</p>
</li>
<li> <p><code><a href="#topic+id_chr">id_chr()</a></code>: Get the name of the current target.
</p>
</li>
<li> <p><code><a href="#topic+drake_envir">drake_envir()</a></code>: get the environment where drake builds targets.
Intended for advanced custom memory management.
</p>
</li></ul>



<h3>Transformations</h3>

<p><code>drake</code> has special syntax for generating large plans.
Your code will look something like
<code style="white-space: pre;">&#8288;drake_plan(y = target(f(x), transform = map(x = c(1, 2, 3)))&#8288;</code>
You can read about this interface at
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>. # nolint
</p>


<h3>Static branching</h3>

<p>In static branching, you define batches of targets
based on information you know in advance.
Overall usage looks like
<code style="white-space: pre;">&#8288;drake_plan(&lt;x&gt; = target(&lt;...&gt;, transform = &lt;call&gt;)&#8288;</code>,
where
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;&lt;x&gt;&#8288;</code> is the name of the target or group of targets.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;&lt;...&gt;&#8288;</code> is optional arguments to <code><a href="#topic+target">target()</a></code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;&lt;call&gt;&#8288;</code> is a call to one of the transformation functions.
</p>
</li></ul>

<p>Transformation function usage:
</p>

<ul>
<li> <p><code>map(..., .data, .names, .id, .tag_in, .tag_out)</code>
</p>
</li>
<li> <p><code>split(..., slices, margin = 1L, drop = FALSE, .names, .tag_in, .tag_out)</code> # nolint
</p>
</li>
<li> <p><code>cross(..., .data, .names, .id, .tag_in, .tag_out)</code>
</p>
</li>
<li> <p><code>combine(..., .by, .names, .id, .tag_in, .tag_out)</code>
</p>
</li></ul>



<h3>Dynamic branching</h3>


<ul>
<li> <p><code>map(..., .trace)</code>
</p>
</li>
<li> <p><code>cross(..., .trace)</code>
</p>
</li>
<li> <p><code>group(..., .by, .trace)</code>
</p>
</li></ul>

<p><code>map()</code> and <code>cross()</code> create dynamic sub-targets from the variables
supplied to the dots. As with static branching, the variables
supplied to <code>map()</code> must all have equal length.
<code>group(f(data), .by = x)</code> makes new dynamic
sub-targets from <code>data</code>. Here, <code>data</code> can be either static or dynamic.
If <code>data</code> is dynamic, <code>group()</code> aggregates existing sub-targets.
If <code>data</code> is static, <code>group()</code> splits <code>data</code> into multiple
subsets based on the groupings from <code>.by</code>.
</p>
<p>Differences from static branching:
</p>

<ul>
<li> <p><code>...</code> must contain <em>unnamed</em> symbols with no values supplied,
and they must be the names of targets.
</p>
</li>
<li><p> Arguments <code>.id</code>, <code>.tag_in</code>, and <code>.tag_out</code> no longer apply.
</p>
</li></ul>



<h3>See Also</h3>

<p>make, drake_config, transform_plan, map, split, cross, combine
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("contain side effects", {
# For more examples, visit
# https://books.ropensci.org/drake/plans.html.

# Create drake plans:
mtcars_plan &lt;- drake_plan(
  write.csv(mtcars[, c("mpg", "cyl")], file_out("mtcars.csv")),
  value = read.csv(file_in("mtcars.csv"))
)
if (requireNamespace("visNetwork", quietly = TRUE)) {
  plot(mtcars_plan) # fast simplified call to vis_drake_graph()
}
mtcars_plan
make(mtcars_plan) # Makes `mtcars.csv` and then `value`
head(readd(value))
# You can use knitr inputs too. See the top command below.

load_mtcars_example()
head(my_plan)
if (requireNamespace("knitr", quietly = TRUE)) {
  plot(my_plan)
}
# The `knitr_in("report.Rmd")` tells `drake` to dive into the active
# code chunks to find dependencies.
# There, `drake` sees that `small`, `large`, and `coef_regression2_small`
# are loaded in with calls to `loadd()` and `readd()`.
deps_code("report.Rmd")

# Formats are great for big data: https://github.com/ropensci/drake/pull/977
# Below, each target is 1.6 GB in memory.
# Run make() on this plan to see how much faster fst is!
n &lt;- 1e8
plan &lt;- drake_plan(
  data_fst = target(
    data.frame(x = runif(n), y = runif(n)),
    format = "fst"
  ),
  data_old = data.frame(x = runif(n), y = runif(n))
)

# Use transformations to generate large plans.
# Read more at
# `https://books.ropensci.org/drake/plans.html#create-large-plans-the-easy-way`. # nolint
drake_plan(
  data = target(
    simulate(nrows),
    transform = map(nrows = c(48, 64)),
    custom_column = 123
  ),
  reg = target(
    reg_fun(data),
   transform = cross(reg_fun = c(reg1, reg2), data)
  ),
  summ = target(
    sum_fun(data, reg),
   transform = cross(sum_fun = c(coef, residuals), reg)
  ),
  winners = target(
    min(summ),
    transform = combine(summ, .by = c(data, sum_fun))
  )
)

# Split data among multiple targets.
drake_plan(
  large_data = get_data(),
  slice_analysis = target(
    analyze(large_data),
    transform = split(large_data, slices = 4)
  ),
  results = target(
    rbind(slice_analysis),
    transform = combine(slice_analysis)
  )
)

# Set trace = TRUE to show what happened during the transformation process.
drake_plan(
  data = target(
    simulate(nrows),
    transform = map(nrows = c(48, 64)),
    custom_column = 123
  ),
  reg = target(
    reg_fun(data),
   transform = cross(reg_fun = c(reg1, reg2), data)
  ),
  summ = target(
    sum_fun(data, reg),
   transform = cross(sum_fun = c(coef, residuals), reg)
  ),
  winners = target(
    min(summ),
    transform = combine(summ, .by = c(data, sum_fun))
  ),
  trace = TRUE
)

# You can create your own custom columns too.
# See ?triggers for more on triggers.
drake_plan(
  website_data = target(
    command = download_data("www.your_url.com"),
    trigger = "always",
    custom_column = 5
  ),
  analysis = analyze(website_data)
)

# Tidy evaluation can help generate super large plans.
sms &lt;- rlang::syms(letters) # To sub in character args, skip this.
drake_plan(x = target(f(char), transform = map(char = !!sms)))

# Dynamic branching
# Get the mean mpg for each cyl in the mtcars dataset.
plan &lt;- drake_plan(
  raw = mtcars,
  group_index = raw$cyl,
  munged = target(raw[, c("mpg", "cyl")], dynamic = map(raw)),
  mean_mpg_by_cyl = target(
    data.frame(mpg = mean(munged$mpg), cyl = munged$cyl[1]),
    dynamic = group(munged, .by = group_index)
  )
)
make(plan)
readd(mean_mpg_by_cyl)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_plan_source'>Show the code required to produce a given <code>drake</code> plan
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+drake_plan_source'></span>

<h3>Description</h3>

<p>You supply a plan, and <code><a href="#topic+drake_plan_source">drake_plan_source()</a></code>
supplies code to generate that plan. If you have the
<code>prettycode</code> package,
installed, you also get nice syntax highlighting in the console
when you print it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_plan_source(plan)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_plan_source_+3A_plan">plan</code></td>
<td>
<p>A workflow plan data frame (see <code><a href="#topic+drake_plan">drake_plan()</a></code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character vector of lines of text. This text
is a call to <code><a href="#topic+drake_plan">drake_plan()</a></code> that produces the plan you provide.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plan &lt;- drake::drake_plan(
  small_data = download_data("https://some_website.com"),
  large_data_raw = target(
    command = download_data("https://lots_of_data.com"),
    trigger = trigger(
      change = time_last_modified("https://lots_of_data.com"),
      command = FALSE,
      depend = FALSE
    ),
    timeout = 1e3
  )
)
print(plan)
if (requireNamespace("styler", quietly = TRUE)) {
  source &lt;- drake_plan_source(plan)
  print(source) # Install the prettycode package for syntax highlighting.
  file &lt;- tempfile() # Path to an R script to contain the drake_plan() call.
  writeLines(source, file) # Save the code to an R script.
}
</code></pre>

<hr>
<h2 id='drake_progress'>Get the build progress of your targets
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+drake_progress'></span>

<h3>Description</h3>

<p>Objects that drake imported, built, or attempted
to build are listed as <code>"done"</code> or <code>"running"</code>.
Skipped objects are not listed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_progress(
  ...,
  list = character(0),
  cache = drake::drake_cache(path = path),
  path = NULL,
  progress = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_progress_+3A_...">...</code></td>
<td>
<p>Objects to load from the cache, as names (unquoted)
or character strings (quoted). If the <code>tidyselect</code> package is installed,
you can also supply <code>dplyr</code>-style <code>tidyselect</code>
commands such as <code>starts_with()</code>, <code>ends_with()</code>, and <code>one_of()</code>.</p>
</td></tr>
<tr><td><code id="drake_progress_+3A_list">list</code></td>
<td>
<p>Character vector naming objects to be loaded from the
cache. Similar to the <code>list</code> argument of <code><a href="base.html#topic+remove">remove()</a></code>.</p>
</td></tr>
<tr><td><code id="drake_progress_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="drake_progress_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="drake_progress_+3A_progress">progress</code></td>
<td>
<p>Character vector for filtering the build progress results.
Defaults to <code>NULL</code> (no filtering) to report progress of all objects.
Supported filters are <code>"done"</code>, <code>"running"</code>, and <code>"failed"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The build progress of each target reached by
the current <code><a href="#topic+make">make()</a></code> so far.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+diagnose">diagnose()</a></code>, <code><a href="#topic+drake_get_session_info">drake_get_session_info()</a></code>,
<code><a href="#topic+cached">cached()</a></code>, <code><a href="#topic+readd">readd()</a></code>, <code><a href="#topic+drake_plan">drake_plan()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
make(my_plan) # Run the project, build the targets.
# Watch the changing drake_progress() as make() is running.
drake_progress() # List all the targets reached so far.
drake_progress(small, large) # Just see the progress of some targets.
drake_progress(list = c("small", "large")) # Same as above.
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_quotes'>Put quotes around each element of a character vector.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+drake_quotes'></span>

<h3>Description</h3>

<p>Deprecated on 2019-01-01
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_quotes(x = NULL, single = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_quotes_+3A_x">x</code></td>
<td>
<p>Character vector or object to be coerced to character.</p>
</td></tr>
<tr><td><code id="drake_quotes_+3A_single">single</code></td>
<td>
<p>Add single quotes if <code>TRUE</code>
and double quotes otherwise.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character vector with quotes around it.
</p>

<hr>
<h2 id='drake_running'>List running targets.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+drake_running'></span>

<h3>Description</h3>

<p>List the targets that either
</p>

<ol>
<li><p> Are currently being built during a call to <code><a href="#topic+make">make()</a></code>, or
</p>
</li>
<li><p> Were in progress when <code><a href="#topic+make">make()</a></code> was interrupted.
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>drake_running(cache = drake::drake_cache(path = path), path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_running_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="drake_running_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of target names.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_done">drake_done()</a></code>, <code><a href="#topic+drake_failed">drake_failed()</a></code>, <code><a href="#topic+drake_cancelled">drake_cancelled()</a></code>,
<code><a href="#topic+drake_progress">drake_progress()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
make(my_plan) # Run the project, build the targets.
drake_running() # Everything should be done.
# nolint start
# Run make() in one R session...
# slow_plan &lt;- drake_plan(x = Sys.sleep(2))
# make(slow_plan)
# and see the progress in another session.
# drake_running()
# nolint end
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_script'>Write an example <code style="white-space: pre;">&#8288;_drake.R&#8288;</code> script to the current working directory.</h2><span id='topic+drake_script'></span>

<h3>Description</h3>

<p>A <code style="white-space: pre;">&#8288;_drake.R&#8288;</code> file is required for <code><a href="#topic+r_make">r_make()</a></code> and friends.
See the <code><a href="#topic+r_make">r_make()</a></code> help file for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_script(code = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_script_+3A_code">code</code></td>
<td>
<p>R code to put in <code style="white-space: pre;">&#8288;_drake.R&#8288;</code> in the current working directory.
If <code>NULL</code>, an example script is written.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("contain side-effects", {
drake_script({
  library(drake)
  plan &lt;- drake_plan(x = 1)
  drake_config(plan, lock_cache = FALSE)
})
cat(readLines("_drake.R"), sep = "\n")
r_make()
})

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_session'>Session info of the last call to <code><a href="#topic+make">make()</a></code>.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+drake_session'></span>

<h3>Description</h3>

<p>Deprecated. Use <code><a href="#topic+drake_get_session_info">drake_get_session_info()</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_session(
  path = getwd(),
  search = TRUE,
  cache = drake::get_cache(path = path, search = search, verbose = verbose),
  verbose = 1L
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_session_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="drake_session_+3A_search">search</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="drake_session_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="drake_session_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Deprecated on 2018-12-06.
</p>


<h3>Value</h3>

<p><code><a href="utils.html#topic+sessionInfo">sessionInfo()</a></code> of the last call to <code><a href="#topic+make">make()</a></code>
</p>

<hr>
<h2 id='drake_settings'><code>drake_settings</code> helper</h2><span id='topic+drake_settings'></span>

<h3>Description</h3>

<p>List of class <code>drake_settings</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_settings(
  cache_log_file = NULL,
  curl_handles = list(),
  garbage_collection = FALSE,
  jobs = 1L,
  jobs_preprocess = 1L,
  keep_going = TRUE,
  lazy_load = "eager",
  lib_loc = character(0),
  lock_cache = TRUE,
  lock_envir = TRUE,
  log_build_times = TRUE,
  log_progress = TRUE,
  memory_strategy = "speed",
  parallelism = "loop",
  recover = TRUE,
  recoverable = TRUE,
  seed = 0L,
  session_info = TRUE,
  skip_imports = FALSE,
  skip_safety_checks = FALSE,
  skip_targets = FALSE,
  sleep = function(i) 0.01,
  template = list(),
  log_worker = FALSE
)
</code></pre>


<h3>Value</h3>

<p>A <code>drake_settings</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (FALSE) { # stronger than roxygen dontrun
drake_settings()
}
</code></pre>

<hr>
<h2 id='drake_slice'>Take a strategic subset of a dataset.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+drake_slice'></span>

<h3>Description</h3>

<p><code>drake_slice()</code> is similar to <code>split()</code>.
Both functions partition data into disjoint subsets,
but whereas <code>split()</code> returns <em>all</em> the subsets, <code>drake_slice()</code>
returns just <em>one</em>. In other words, <code>drake_slice(..., index = i)</code>
returns <code>split(...)[[i]]</code>.
Other features:
1. <code>drake_slice()</code> works on vectors, data frames,
matrices, lists, and arbitrary arrays.
2. Like <code>parallel::splitIndices()</code>, <code>drake_slice()</code> tries to
distribute the data uniformly across subsets.
See the examples to learn why splitting is useful in <code>drake</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_slice(data, slices, index, margin = 1L, drop = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_slice_+3A_data">data</code></td>
<td>
<p>A list, vector, data frame, matrix, or arbitrary array.
Anything with a <code>length()</code> or <code>dim()</code>.</p>
</td></tr>
<tr><td><code id="drake_slice_+3A_slices">slices</code></td>
<td>
<p>Integer of length 1, number of slices (i.e. pieces)
of the whole dataset. Remember, <code>drake_slice(index = i)</code> returns
only slice number <code>i</code>.</p>
</td></tr>
<tr><td><code id="drake_slice_+3A_index">index</code></td>
<td>
<p>Integer of length 1, which piece of the partition to return.</p>
</td></tr>
<tr><td><code id="drake_slice_+3A_margin">margin</code></td>
<td>
<p>Integer of length 1, margin over which to split the data.
For example, for a data frame or matrix,
use <code>margin = 1</code> to split over rows and <code>margin = 2</code>
to split over columns. Similar to <code>MARGIN</code> in <code>apply()</code>.</p>
</td></tr>
<tr><td><code id="drake_slice_+3A_drop">drop</code></td>
<td>
<p>Logical, for matrices and arrays.
If <code>TRUE</code>,<code style="white-space: pre;">&#8288; the result is coerced to the lowest possible dimension. See ?&#8288;</code>[' for details.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A subset of <code>data</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Simple usage
x &lt;- matrix(seq_len(20), nrow = 5)
x
drake_slice(x, slices = 3, index = 1)
drake_slice(x, slices = 3, index = 2)
drake_slice(x, slices = 3, index = 3)
drake_slice(x, slices = 3, margin = 2, index = 1)
# In drake, you can split a large dataset over multiple targets.
## Not run: 
isolate_example("contain side effects", {
plan &lt;- drake_plan(
  large_data = mtcars,
  data_split = target(
    drake_slice(large_data, slices = 32, index = i),
    transform = map(i = !!seq_len(32))
  )
)
plan
cache &lt;- storr::storr_environment()
make(plan, cache = cache, session_info = FALSE, verbose = FALSE)
readd(data_split_1L, cache = cache)
readd(data_split_2L, cache = cache)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='drake_strings'>Turn valid expressions into character strings.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+drake_strings'></span>

<h3>Description</h3>

<p>Deprecated on 2019-01-01
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_strings(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_strings_+3A_...">...</code></td>
<td>
<p>Unquoted symbols to turn into character strings.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector.
</p>

<hr>
<h2 id='drake_tempfile'>drake tempfile
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+drake_tempfile'></span>

<h3>Description</h3>

<p>Create the path to a temporary file inside drake's cache.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_tempfile(path = NULL, cache = drake::drake_cache(path = path))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_tempfile_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="drake_tempfile_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is just like the <code>tempfile()</code> function in base R
except that the path points to a special location inside <code>drake</code>'s cache.
This ensures that if the file needs to be copied to
persistent storage in the cache, <code>drake</code> does not need to copy across
physical storage media. Example: the <code>"diskframe"</code> format. See the
&quot;Formats&quot; and &quot;Columns&quot; sections of the <code><a href="#topic+drake_plan">drake_plan()</a></code> help file.
Unless you supply the cache or the path to the cache
(see <code><a href="#topic+drake_cache">drake_cache()</a></code>) <code>drake</code> will assume the cache folder is named
<code style="white-space: pre;">&#8288;.drake/&#8288;</code> and it is located either in your working directory or an
ancestor of your working directory.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_cache">drake_cache()</a></code>, <code><a href="#topic+new_cache">new_cache()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cache &lt;- new_cache(tempfile())
# No need to supply a cache if a .drake/ folder exists.
drake_tempfile(cache = cache)
drake_plan(
  x = target(
    as.disk.frame(large_data, outdir = drake_tempfile()),
    format = "diskframe"
  )
)
</code></pre>

<hr>
<h2 id='drake_tip'>Output a random tip about drake.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+drake_tip'></span>

<h3>Description</h3>

<p>Deprecated on 2019-01-12.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_tip()
</code></pre>


<h3>Details</h3>

<p>Tips are usually related to news and usage.
</p>


<h3>Value</h3>

<p>A character scalar with a tip on how to use drake.
</p>

<hr>
<h2 id='drake_triggers'><code>drake_triggers</code> helper</h2><span id='topic+drake_triggers'></span>

<h3>Description</h3>

<p>Triggers of a target.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_triggers(
  command = TRUE,
  depend = TRUE,
  file = TRUE,
  seed = TRUE,
  format = TRUE,
  condition = FALSE,
  change = NULL,
  mode = c("whitelist", "blacklist", "condition")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_triggers_+3A_command">command</code></td>
<td>
<p>Logical, whether to rebuild the target if the
<code><a href="#topic+drake_plan">drake_plan()</a></code> command changes.</p>
</td></tr>
<tr><td><code id="drake_triggers_+3A_depend">depend</code></td>
<td>
<p>Logical, whether to rebuild if a
non-file dependency changes.</p>
</td></tr>
<tr><td><code id="drake_triggers_+3A_file">file</code></td>
<td>
<p>Logical, whether to rebuild the target
if a <code><a href="#topic+file_in">file_in()</a></code>/<code><a href="#topic+file_out">file_out()</a></code>/<code><a href="#topic+knitr_in">knitr_in()</a></code> file changes.
Also applies to external data tracked with
<code>target(format = "file")</code>.</p>
</td></tr>
<tr><td><code id="drake_triggers_+3A_seed">seed</code></td>
<td>
<p>Logical, whether to rebuild the target
if the seed changes. Only makes a difference if you set
a custom <code>seed</code> column in your <code><a href="#topic+drake_plan">drake_plan()</a></code> at some point
in your workflow.</p>
</td></tr>
<tr><td><code id="drake_triggers_+3A_format">format</code></td>
<td>
<p>Logical, whether to rebuild the target if the
choice of specialized data format changes: for example,
if you use <code>target(format = "qs")</code> one instance and
<code>target(format = "fst")</code> the next. See
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#special-data-formats-for-targets&#8288;</code> # nolint
for details on formats.</p>
</td></tr>
<tr><td><code id="drake_triggers_+3A_condition">condition</code></td>
<td>
<p>R code (expression or language object)
that returns a logical. The target will rebuild
if the code evaluates to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="drake_triggers_+3A_change">change</code></td>
<td>
<p>R code (expression or language object)
that returns any value. The target will rebuild
if that value is different from last time
or not already cached.</p>
</td></tr>
<tr><td><code id="drake_triggers_+3A_mode">mode</code></td>
<td>
<p>A character scalar equal to <code>"whitelist"</code> (default) or
<code>"blacklist"</code> or <code>"condition"</code>. With the <code>mode</code> argument, you can choose
how the <code>condition</code> trigger factors into the decision to build
or skip the target. Here are the options.
</p>

<ul>
<li> <p><code>"whitelist"</code> (default): we <em>rebuild</em> the target whenever <code>condition</code>
evaluates to <code>TRUE</code>. Otherwise, we defer to the other triggers.
This behavior is the same as the decision rule described in the
&quot;Details&quot; section of this help file.
</p>
</li>
<li> <p><code>"blacklist"</code>: we <em>skip</em> the target whenever <code>condition</code> evaluates
to <code>FALSE</code>. Otherwise, we defer to the other triggers.
</p>
</li>
<li> <p><code>"condition"</code>: here, the <code>condition</code> trigger is the only decider,
and we ignore all the other triggers. We <em>rebuild</em> target whenever
<code>condition</code> evaluates to <code>TRUE</code> and <em>skip</em> it whenever <code>condition</code>
evaluates to <code>FALSE</code>.
</p>
</li></ul>
</td></tr>
</table>

<hr>
<h2 id='drake_unquote'>Remove leading and trailing
escaped quotes from character strings.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+drake_unquote'></span>

<h3>Description</h3>

<p>Deprecated on 2019-01-01
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drake_unquote(x = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drake_unquote_+3A_x">x</code></td>
<td>
<p>Character vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character vector without leading
or trailing escaped quotes around
the elements.
</p>

<hr>
<h2 id='evaluate'>evaluate <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+evaluate'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>evaluate(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="evaluate_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='evaluate_plan'>Use wildcard templating to create a
workflow plan data frame from a template data frame.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+evaluate_plan'></span>

<h3>Description</h3>

<p>Deprecated on 2019-05-16. Use <code><a href="#topic+drake_plan">drake_plan()</a></code>
transformations instead. See
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>
for the details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>evaluate_plan(
  plan,
  rules = NULL,
  wildcard = NULL,
  values = NULL,
  expand = TRUE,
  rename = expand,
  trace = FALSE,
  columns = "command",
  sep = "_"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="evaluate_plan_+3A_plan">plan</code></td>
<td>
<p>Workflow plan data frame, similar to one produced by
<code><a href="#topic+drake_plan">drake_plan()</a></code>.</p>
</td></tr>
<tr><td><code id="evaluate_plan_+3A_rules">rules</code></td>
<td>
<p>Named list with wildcards as names and vectors of
replacements
as values. This is a way to evaluate multiple wildcards at once.
When not <code>NULL</code>, <code>rules</code> overrules <code>wildcard</code> and
<code>values</code> if
not <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="evaluate_plan_+3A_wildcard">wildcard</code></td>
<td>
<p>Character scalar denoting a wildcard placeholder.</p>
</td></tr>
<tr><td><code id="evaluate_plan_+3A_values">values</code></td>
<td>
<p>Vector of values to replace the wildcard
in the drake instructions. Will be treated as a character vector.
Must be the same length as <code>plan$command</code> if <code>expand</code> is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="evaluate_plan_+3A_expand">expand</code></td>
<td>
<p>If <code>TRUE</code>, create a new rows in the workflow plan
data frame
if multiple values are assigned to a single wildcard.
If <code>FALSE</code>, each occurrence of the wildcard
is replaced with the next entry in the <code>values</code> vector,
and the values are recycled.</p>
</td></tr>
<tr><td><code id="evaluate_plan_+3A_rename">rename</code></td>
<td>
<p>Logical, whether to rename the targets
based on the values supplied for the wildcards
(based on <code>values</code> or <code>rules</code>).</p>
</td></tr>
<tr><td><code id="evaluate_plan_+3A_trace">trace</code></td>
<td>
<p>Logical, whether to add columns that
trace the wildcard expansion process. These new
columns indicate which targets were evaluated and with which
wildcards.</p>
</td></tr>
<tr><td><code id="evaluate_plan_+3A_columns">columns</code></td>
<td>
<p>Character vector of names of columns
to look for and evaluate the wildcards.</p>
</td></tr>
<tr><td><code id="evaluate_plan_+3A_sep">sep</code></td>
<td>
<p>Character scalar, separator for the names
of the new targets generated. For example, in
<code>evaluate_plan(drake_plan(x = sqrt(y__)), list(y__ = 1:2), sep = ".")</code>,
the names of the new targets are <code>x.1</code> and <code>x.2</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The commands in workflow plan data frames can have
wildcard symbols that can stand for datasets, parameters, function
arguments, etc. These wildcards can be evaluated over a set of
possible values using <code>evaluate_plan()</code>.
</p>
<p>Specify a single wildcard with the <code>wildcard</code>
and <code>values</code> arguments. In each command, the text in
<code>wildcard</code> will be replaced by each value in <code>values</code>
in turn. Specify multiple wildcards with the <code>rules</code> argument,
which overrules <code>wildcard</code> and <code>values</code> if
not <code>NULL</code>. Here, <code>rules</code> should be a list with wildcards
as names and vectors of possible values as list elements.
</p>


<h3>Value</h3>

<p>A workflow plan data frame with the wildcards evaluated.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code>
</p>

<hr>
<h2 id='example_drake'>example_drake <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+example_drake'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>example_drake(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="example_drake_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='examples_drake'>examples_drake <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+examples_drake'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>examples_drake(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="examples_drake_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='expand'>expand <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+expand'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expand(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="expand_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='expand_plan'>Deprecated: create replicates of targets.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+expand_plan'></span>

<h3>Description</h3>

<p>Deprecated on 2019-05-16. Use <code><a href="#topic+drake_plan">drake_plan()</a></code>
transformations instead. See
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>
for the details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expand_plan(plan, values = NULL, rename = TRUE, sep = "_", sanitize = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="expand_plan_+3A_plan">plan</code></td>
<td>
<p>Workflow plan data frame.</p>
</td></tr>
<tr><td><code id="expand_plan_+3A_values">values</code></td>
<td>
<p>Values to expand over. These will be appended to
the names of the new targets.</p>
</td></tr>
<tr><td><code id="expand_plan_+3A_rename">rename</code></td>
<td>
<p>Logical, whether to rename the targets
based on the <code>values</code>. See the examples for a demo.</p>
</td></tr>
<tr><td><code id="expand_plan_+3A_sep">sep</code></td>
<td>
<p>Character scalar, delimiter between the original
target names and the values to append to create the new
target names. Only relevant when <code>rename</code> is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="expand_plan_+3A_sanitize">sanitize</code></td>
<td>
<p>Logical, whether to sanitize the plan.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Duplicates the rows of a workflow plan data frame.
Prefixes are appended to the new target names
so targets still have unique names.
</p>


<h3>Value</h3>

<p>An expanded workflow plan data frame (with replicated targets).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code>
</p>

<hr>
<h2 id='expose_imports'>Deprecated: expose package functions and objects for
analysis with drake.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+expose_imports'></span>

<h3>Description</h3>

<p>Deprecated on 2020-06-24.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expose_imports(
  package,
  character_only = FALSE,
  envir = parent.frame(),
  jobs = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="expose_imports_+3A_package">package</code></td>
<td>
<p>Name of the package, either a symbol or a string,
depending on <code>character_only</code>.</p>
</td></tr>
<tr><td><code id="expose_imports_+3A_character_only">character_only</code></td>
<td>
<p>Logical, whether to interpret <code>package</code>
as a character string or a symbol (quoted vs unquoted).</p>
</td></tr>
<tr><td><code id="expose_imports_+3A_envir">envir</code></td>
<td>
<p>Environment to load the exposed package imports.
You will later pass this <code>envir</code> to <code><a href="#topic+make">make()</a></code>.</p>
</td></tr>
<tr><td><code id="expose_imports_+3A_jobs">jobs</code></td>
<td>
<p>Number of parallel jobs for the parallel processing
of the imports.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Deprecated. This function assigns the objects and functions
from the package environment to the user's environment (usually global)
so <code>drake</code> can watch them for changes. This used to be the standard
way to make <code>drake</code> compatible with workflows implemented as custom
analysis packages. Now, the recommendation is to supply
<code>getNamespace("yourPackage")</code> to the <code>envir</code> argument of <code><a href="#topic+make">make()</a></code>
and friends. Read <code style="white-space: pre;">&#8288;https://github.com/ropensci/drake/issues/1286&#8288;</code>,
especially <code style="white-space: pre;">&#8288;https://github.com/ropensci/drake/issues/1286#issuecomment-649088321&#8288;</code>, # nolint
for details.
</p>


<h3>Value</h3>

<p>The environment that the exposed imports are loaded into.
Defaults to your R workspace.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># nolint start
## Not run: 
isolate_example("contain side effects", {
# Consider a simple plan that depends on the biglm package.
# library(biglm)
plan &lt;- drake_plan(model = biglm(y ~ x, data = huge_dataset))
# Even if you load the biglm package, drake still ignores
# the biglm() function as a dependency. The function is missing
# from the graph:
# vis_drake_graph(plan)
# And if you install an updated version of biglm with a revised
# biglm() function, this will not cause drake::make(plan)
# to rerun the model.
# This is because biglm() is not in your environment.
# ls()
# biglm() exists in its own special package environment,
# which drake does not scan.
# ls("package:biglm")
# To depend on biglm(), use expose_imports(biglm)
# to bring the objects and functions in biglm into
# your own (non-package) environment.
# expose_imports(biglm)
# Now, the biglm() function should be in your environment.
# ls()
# biglm() now appears in the graph.
# vis_drake_graph(plan)
# And subsequent make()s respond to changes to biglm()
# and its dependencies.
})

## End(Not run)
# nolint end
</code></pre>

<hr>
<h2 id='failed'>List failed targets.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+failed'></span>

<h3>Description</h3>

<p>Deprecated on 2020-03-23. Use <code><a href="#topic+drake_failed">drake_failed()</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>failed(
  path = NULL,
  search = NULL,
  cache = drake::drake_cache(path = path),
  verbose = 1L,
  upstream_only = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="failed_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="failed_+3A_search">search</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="failed_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="failed_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
<tr><td><code id="failed_+3A_upstream_only">upstream_only</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of target names.
</p>

<hr>
<h2 id='file_in'>Declare input files and directories.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+file_in'></span>

<h3>Description</h3>

<p><code>file_in()</code> marks individual files
(and whole directories) that your targets depend on.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>file_in(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="file_in_+3A_...">...</code></td>
<td>
<p>Character vector, paths to files and directories. Use
<code>.id_chr</code> to refer to the current target by name. <code>.id_chr</code> is not
limited to use in <code>file_in()</code> and <code>file_out()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of declared input file or directory paths.
</p>


<h3>URLs</h3>

<p>As of <code>drake</code> 7.4.0, <code>file_in()</code> and <code>file_out()</code> have
support for URLs. If the file name begins with
&quot;http://&quot;, &quot;https://&quot;, or &quot;ftp://&quot;, <code><a href="#topic+make">make()</a></code> attempts
to check the ETag to see if the data changed from last time.
If no ETag can be found, <code>drake</code> simply uses the ETag
from last <code><a href="#topic+make">make()</a></code> and registers the file as unchanged
(which prevents your workflow from breaking if you lose
internet access). If your <code>file_in()</code> URLs require
authentication, see the <code>curl_handles</code> argument of
<code>make()</code> and <code>drake_config()</code> to learn how to supply credentials.
</p>


<h3>Keywords</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code> understands special keyword functions for your commands.
With the exception of <code><a href="#topic+target">target()</a></code>, each one is a proper function
with its own help file.
</p>

<ul>
<li> <p><code><a href="#topic+target">target()</a></code>: give the target more than just a command.
Using <code><a href="#topic+target">target()</a></code>, you can apply a transformation
(examples: <code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>), # nolint
supply a trigger (<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/triggers.html&#8288;</code>), # nolint
or set any number of custom columns.
</p>
</li>
<li> <p><code><a href="#topic+file_in">file_in()</a></code>: declare an input file dependency.
</p>
</li>
<li> <p><code><a href="#topic+file_out">file_out()</a></code>: declare an output file to be produced
when the target is built.
</p>
</li>
<li> <p><code><a href="#topic+knitr_in">knitr_in()</a></code>: declare a <code>knitr</code> file dependency such as an
R Markdown (<code style="white-space: pre;">&#8288;*.Rmd&#8288;</code>) or R LaTeX (<code style="white-space: pre;">&#8288;*.Rnw&#8288;</code>) file.
</p>
</li>
<li> <p><code><a href="#topic+ignore">ignore()</a></code>: force <code>drake</code> to entirely ignore a piece of code:
do not track it for changes and do not analyze it for dependencies.
</p>
</li>
<li> <p><code><a href="#topic+no_deps">no_deps()</a></code>: tell <code>drake</code> to not track the dependencies
of a piece of code. <code>drake</code> still tracks the code itself for changes.
</p>
</li>
<li> <p><code><a href="#topic+id_chr">id_chr()</a></code>: Get the name of the current target.
</p>
</li>
<li> <p><code><a href="#topic+drake_envir">drake_envir()</a></code>: get the environment where drake builds targets.
Intended for advanced custom memory management.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+file_out">file_out()</a></code>, <code><a href="#topic+knitr_in">knitr_in()</a></code>, <code><a href="#topic+ignore">ignore()</a></code>, <code><a href="#topic+no_deps">no_deps()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("contain side effects", {
# The `file_out()` and `file_in()` functions
# just takes in strings and returns them.
file_out("summaries.txt")
# Their main purpose is to orchestrate your custom files
# in your workflow plan data frame.
plan &lt;- drake_plan(
  out = write.csv(mtcars, file_out("mtcars.csv")),
  contents = read.csv(file_in("mtcars.csv"))
)
plan
# drake knows "\"mtcars.csv\"" is the first target
# and a dependency of `contents`. See for yourself:

make(plan)
file.exists("mtcars.csv")

# You may use `.id_chr` inside `file_out()` and `file_in()`
# to refer  to the current target. This works inside
# static `map()`, `combine()`, `split()`, and `cross()`.

plan &lt;- drake::drake_plan(
  data = target(
    write.csv(data, file_out(paste0(.id_chr, ".csv"))),
    transform = map(data = c(airquality, mtcars))
  )
)
plan

# You can also work with entire directories this way.
# However, in `file_out("your_directory")`, the directory
# becomes an entire unit. Thus, `file_in("your_directory")`
# is more appropriate for subsequent steps than
# `file_in("your_directory/file_inside.txt")`.
plan &lt;- drake_plan(
  out = {
    dir.create(file_out("dir"))
    write.csv(mtcars, "dir/mtcars.csv")
  },
  contents = read.csv(file.path(file_in("dir"), "mtcars.csv"))
)
plan

make(plan)
file.exists("dir/mtcars.csv")

# See the connections that the file relationships create:
if (requireNamespace("visNetwork", quietly = TRUE)) {
  vis_drake_graph(plan)
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='file_out'>Declare output files and directories.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+file_out'></span>

<h3>Description</h3>

<p><code>file_out()</code> marks individual files
(and whole directories) that your targets create.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>file_out(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="file_out_+3A_...">...</code></td>
<td>
<p>Character vector, paths to files and directories. Use
<code>.id_chr</code> to refer to the current target by name. <code>.id_chr</code> is not
limited to use in <code>file_in()</code> and <code>file_out()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of declared output file or directory paths.
</p>


<h3>Keywords</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code> understands special keyword functions for your commands.
With the exception of <code><a href="#topic+target">target()</a></code>, each one is a proper function
with its own help file.
</p>

<ul>
<li> <p><code><a href="#topic+target">target()</a></code>: give the target more than just a command.
Using <code><a href="#topic+target">target()</a></code>, you can apply a transformation
(examples: <code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>), # nolint
supply a trigger (<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/triggers.html&#8288;</code>), # nolint
or set any number of custom columns.
</p>
</li>
<li> <p><code><a href="#topic+file_in">file_in()</a></code>: declare an input file dependency.
</p>
</li>
<li> <p><code><a href="#topic+file_out">file_out()</a></code>: declare an output file to be produced
when the target is built.
</p>
</li>
<li> <p><code><a href="#topic+knitr_in">knitr_in()</a></code>: declare a <code>knitr</code> file dependency such as an
R Markdown (<code style="white-space: pre;">&#8288;*.Rmd&#8288;</code>) or R LaTeX (<code style="white-space: pre;">&#8288;*.Rnw&#8288;</code>) file.
</p>
</li>
<li> <p><code><a href="#topic+ignore">ignore()</a></code>: force <code>drake</code> to entirely ignore a piece of code:
do not track it for changes and do not analyze it for dependencies.
</p>
</li>
<li> <p><code><a href="#topic+no_deps">no_deps()</a></code>: tell <code>drake</code> to not track the dependencies
of a piece of code. <code>drake</code> still tracks the code itself for changes.
</p>
</li>
<li> <p><code><a href="#topic+id_chr">id_chr()</a></code>: Get the name of the current target.
</p>
</li>
<li> <p><code><a href="#topic+drake_envir">drake_envir()</a></code>: get the environment where drake builds targets.
Intended for advanced custom memory management.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+file_in">file_in()</a></code>, <code><a href="#topic+knitr_in">knitr_in()</a></code>, <code><a href="#topic+ignore">ignore()</a></code>, <code><a href="#topic+no_deps">no_deps()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("contain side effects", {
# The `file_out()` and `file_in()` functions
# just takes in strings and returns them.
file_out("summaries.txt")
# Their main purpose is to orchestrate your custom files
# in your workflow plan data frame.
plan &lt;- drake_plan(
  out = write.csv(mtcars, file_out("mtcars.csv")),
  contents = read.csv(file_in("mtcars.csv"))
)
plan
# drake knows "\"mtcars.csv\"" is the first target
# and a dependency of `contents`. See for yourself:

make(plan)
file.exists("mtcars.csv")

 # You may use `.id_chr` inside `file_out()` and `file_in()`
 # to refer  to the current target. This works inside `map()`,
 # `combine()`, `split()`, and `cross()`.

plan &lt;- drake::drake_plan(
  data = target(
    write.csv(data, file_out(paste0(.id_chr, ".csv"))),
    transform = map(data = c(airquality, mtcars))
  )
)

plan

# You can also work with entire directories this way.
# However, in `file_out("your_directory")`, the directory
# becomes an entire unit. Thus, `file_in("your_directory")`
# is more appropriate for subsequent steps than
# `file_in("your_directory/file_inside.txt")`.
plan &lt;- drake_plan(
  out = {
    dir.create(file_out("dir"))
    write.csv(mtcars, "dir/mtcars.csv")
  },
  contents = read.csv(file.path(file_in("dir"), "mtcars.csv"))
)
plan

make(plan)
file.exists("dir/mtcars.csv")

# See the connections that the file relationships create:
if (requireNamespace("visNetwork", quietly = TRUE)) {
  vis_drake_graph(plan)
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='file_store'>Show a file's encoded representation in the cache
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+file_store'></span>

<h3>Description</h3>

<p>This function simply wraps literal double quotes around
the argument <code>x</code> so <code>drake</code> knows it is the name of a file.
Use when you are calling functions like <code>deps_code()</code>: for example,
<code>deps_code(file_store("report.md"))</code>. See the examples for details.
Internally, <code>drake</code> wraps the names of file targets/imports
inside literal double quotes to avoid confusion between
files and generic R objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>file_store(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="file_store_+3A_x">x</code></td>
<td>
<p>Character string to be turned into a filename
understandable by drake (i.e., a string with literal
single quotes on both ends).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single-quoted character string: i.e., a filename
understandable by drake.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Wraps the string in single quotes.
file_store("my_file.rds") # "'my_file.rds'"
## Not run: 
isolate_example("contain side effects", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
make(my_plan) # Run the workflow to build the targets
list.files() # Should include input "report.Rmd" and output "report.md".
head(readd(small)) # You can use symbols for ordinary objects.
# But if you want to read cached info on files, use `file_store()`.
readd(file_store("report.md"), character_only = TRUE) # File fingerprint.
deps_code(file_store("report.Rmd"))
config &lt;- drake_config(my_plan)
deps_profile(
  file_store("report.Rmd"),
  plan = my_plan,
  character_only = TRUE
)
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='find_cache'>Search up the file system for the nearest drake cache.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+find_cache'></span>

<h3>Description</h3>

<p>Only works if the cache is a file system in a
hidden folder named <code style="white-space: pre;">&#8288;.drake/&#8288;</code> (default).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_cache(path = getwd(), dir = NULL, directory = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="find_cache_+3A_path">path</code></td>
<td>
<p>Starting path for search back for the cache.
Should be a subdirectory of the drake project.</p>
</td></tr>
<tr><td><code id="find_cache_+3A_dir">dir</code></td>
<td>
<p>Character, name of the folder containing the cache.</p>
</td></tr>
<tr><td><code id="find_cache_+3A_directory">directory</code></td>
<td>
<p>Deprecated. Use <code>dir</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>File path of the nearest drake cache or <code>NULL</code>
if no cache is found.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code>, <code><a href="#topic+make">make()</a></code>,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
make(my_plan) # Run the project, build the target.
# Find the file path of the project's cache.
# Search up through parent directories if necessary.
find_cache()
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='find_knitr_doc'>find_knitr_doc <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+find_knitr_doc'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_knitr_doc(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="find_knitr_doc_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='find_project'>Search up the file system
for the nearest root path of a drake project.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+find_project'></span>

<h3>Description</h3>

<p>Deprecated on 2019-01-08.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_project(path = getwd())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="find_project_+3A_path">path</code></td>
<td>
<p>Starting path for search back for the project.
Should be a subdirectory of the drake project.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Only works if the cache is a file system
in a folder named <code>.drake</code> (default).
</p>


<h3>Value</h3>

<p>File path of the nearest drake project or <code>NULL</code>
if no drake project is found.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>

<hr>
<h2 id='from_plan'>from_plan <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+from_plan'></span>

<h3>Description</h3>

<p>The <code>from_plan()</code> function is now defunct
in order to reduce the demands on memory usage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>from_plan(column)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="from_plan_+3A_column">column</code></td>
<td>
<p>Character, name of a column in your <code>drake</code> plan.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>2019-03-28
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_envir">drake_envir()</a></code>
</p>

<hr>
<h2 id='future_build'>Task passed to individual futures in the <code>"future"</code> backend
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+future_build'></span>

<h3>Description</h3>

<p>For internal use only. Only exported to make available
to futures.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>future_build(target, meta, config, spec, config_tmp, protect)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="future_build_+3A_target">target</code></td>
<td>
<p>Name of the target.</p>
</td></tr>
<tr><td><code id="future_build_+3A_meta">meta</code></td>
<td>
<p>A list of metadata.</p>
</td></tr>
<tr><td><code id="future_build_+3A_config">config</code></td>
<td>
<p>A <code><a href="#topic+drake_config">drake_config()</a></code> list.</p>
</td></tr>
<tr><td><code id="future_build_+3A_config_tmp">config_tmp</code></td>
<td>
<p>Internal, parts of <code>config</code> that the workers need.</p>
</td></tr>
<tr><td><code id="future_build_+3A_protect">protect</code></td>
<td>
<p>Names of targets that still need their
dependencies available in memory.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Either the target value or a list of build results.
</p>

<hr>
<h2 id='gather'>gather <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+gather'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gather(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gather_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='gather_by'>Gather multiple groupings of targets
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+gather_by'></span>

<h3>Description</h3>

<p>Deprecated on 2019-05-16. Use <code><a href="#topic+drake_plan">drake_plan()</a></code>
transformations instead. See
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>
for the details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gather_by(
  plan,
  ...,
  prefix = "target",
  gather = "list",
  append = TRUE,
  filter = NULL,
  sep = "_"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gather_by_+3A_plan">plan</code></td>
<td>
<p>Workflow plan data frame of prespecified targets.</p>
</td></tr>
<tr><td><code id="gather_by_+3A_...">...</code></td>
<td>
<p>Symbols, columns of <code>plan</code> to define target groupings.
A <code>gather_plan()</code> call is applied for each grouping.
Groupings with all <code>NA</code>s in the selector variables are ignored.</p>
</td></tr>
<tr><td><code id="gather_by_+3A_prefix">prefix</code></td>
<td>
<p>Character, prefix for naming the new targets.
Suffixes are generated from the values of the columns
specified in <code>...</code>.</p>
</td></tr>
<tr><td><code id="gather_by_+3A_gather">gather</code></td>
<td>
<p>Function used to gather the targets. Should be
one of <code>list(...)</code>, <code>c(...)</code>, <code>rbind(...)</code>, or similar.</p>
</td></tr>
<tr><td><code id="gather_by_+3A_append">append</code></td>
<td>
<p>Logical. If <code>TRUE</code>, the output will include the
original rows in the <code>plan</code> argument.
If <code>FALSE</code>, the output will only include the new
targets and commands.</p>
</td></tr>
<tr><td><code id="gather_by_+3A_filter">filter</code></td>
<td>
<p>An expression like you would pass to <code>dplyr::filter()</code>.
The rows for which <code>filter</code> evaluates to <code>TRUE</code> will be gathered,
and the rest will be excluded from gathering.
Why not just call <code>dplyr::filter()</code> before <code>gather_by()</code>?
Because <code>gather_by(append = TRUE, filter = my_column == "my_value")</code>
gathers on some targets while including all the original targets
in the output. See the examples for a demonstration.</p>
</td></tr>
<tr><td><code id="gather_by_+3A_sep">sep</code></td>
<td>
<p>Character scalar, delimiter for creating the names
of new targets.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Perform several calls to <code>gather_plan()</code>
based on groupings from columns in the plan,
and then row-bind the new targets to the plan.
</p>


<h3>Value</h3>

<p>A workflow plan data frame.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code>
</p>

<hr>
<h2 id='gather_plan'>Combine targets
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+gather_plan'></span>

<h3>Description</h3>

<p>Deprecated on 2019-05-16. Use <code><a href="#topic+drake_plan">drake_plan()</a></code>
transformations instead. See
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>
for the details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gather_plan(plan = NULL, target = "target", gather = "list", append = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gather_plan_+3A_plan">plan</code></td>
<td>
<p>Workflow plan data frame of prespecified targets.</p>
</td></tr>
<tr><td><code id="gather_plan_+3A_target">target</code></td>
<td>
<p>Name of the new aggregated target.</p>
</td></tr>
<tr><td><code id="gather_plan_+3A_gather">gather</code></td>
<td>
<p>Function used to gather the targets. Should be
one of <code>list(...)</code>, <code>c(...)</code>, <code>rbind(...)</code>, or similar.</p>
</td></tr>
<tr><td><code id="gather_plan_+3A_append">append</code></td>
<td>
<p>Logical. If <code>TRUE</code>, the output will include the
original rows in the <code>plan</code> argument.
If <code>FALSE</code>, the output will only include the new
targets and commands.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Creates a new workflow plan to aggregate
existing targets in the supplied plan.
</p>


<h3>Value</h3>

<p>A workflow plan data frame that aggregates multiple
prespecified targets into one additional target downstream.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code>
</p>

<hr>
<h2 id='get_cache'>The default cache of a <code>drake</code> project.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+get_cache'></span>

<h3>Description</h3>

<p>Use <code><a href="#topic+drake_cache">drake_cache()</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_cache(
  path = getwd(),
  search = TRUE,
  verbose = 1L,
  force = FALSE,
  fetch_cache = NULL,
  console_log_file = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_cache_+3A_path">path</code></td>
<td>
<p>Character, either the root file path of a <code>drake</code> project
or a folder containing the root (top-level working directory
where you plan to call <code><a href="#topic+make">make()</a></code>).
If this is too confusing, feel free to just use <code>storr::storr_rds()</code>
to get the cache.
If <code>search = FALSE</code>, <code>path</code> must be the root.
If <code>search = TRUE</code>, you can specify any
subdirectory of the project. Let's say <code>"/home/you/my_project"</code>
is the root. The following are equivalent and correct:
</p>

<ul>
<li> <p><code>get_cache(path = "/home/you/my_project", search = FALSE)</code>
</p>
</li>
<li> <p><code>get_cache(path = "/home/you/my_project", search = TRUE)</code>
</p>
</li>
<li> <p><code>get_cache(path = "/home/you/my_project/subdir/x", search = TRUE)</code>
</p>
</li>
<li> <p><code>get_cache(path = "/home/you/my_project/.drake", search = TRUE)</code>
</p>
</li>
<li> <p><code>get_cache(path = "/home/you/my_project/.drake/keys", search = TRUE)</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="get_cache_+3A_search">search</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="get_cache_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
<tr><td><code id="get_cache_+3A_force">force</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="get_cache_+3A_fetch_cache">fetch_cache</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="get_cache_+3A_console_log_file">console_log_file</code></td>
<td>
<p>Deprecated in favor of <code>log_make</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Deprecated on 2019-05-25.
</p>

<hr>
<h2 id='get_trace'>Deprecated, get a trace of a dynamic target's value.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+get_trace'></span>

<h3>Description</h3>

<p>Deprecated on 2019-12-10. Use <code><a href="#topic+read_trace">read_trace()</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_trace(trace, value)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_trace_+3A_trace">trace</code></td>
<td>
<p>Character, name of the trace
you want to extract. Such trace names are declared
in the <code>.trace</code> argument of <code>map()</code>, <code>cross()</code> or <code>group()</code>..</p>
</td></tr>
<tr><td><code id="get_trace_+3A_value">value</code></td>
<td>
<p>Value of the dynamic target</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The dynamic trace of one target in another:
a vector of values from a grouping variable.
</p>

<hr>
<h2 id='id_chr'>Name of the current target <a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+id_chr'></span>

<h3>Description</h3>

<p><code>id_chr()</code> gives you the name of the current target
while <code><a href="#topic+make">make()</a></code> is running. For static branching in <code><a href="#topic+drake_plan">drake_plan()</a></code>,
use the <code>.id_chr</code> symbol instead. See the examples for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>id_chr()
</code></pre>


<h3>Value</h3>

<p>The name of the current target.
</p>


<h3>Keywords</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code> understands special keyword functions for your commands.
With the exception of <code><a href="#topic+target">target()</a></code>, each one is a proper function
with its own help file.
</p>

<ul>
<li> <p><code><a href="#topic+target">target()</a></code>: give the target more than just a command.
Using <code><a href="#topic+target">target()</a></code>, you can apply a transformation
(examples: <code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>), # nolint
supply a trigger (<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/triggers.html&#8288;</code>), # nolint
or set any number of custom columns.
</p>
</li>
<li> <p><code><a href="#topic+file_in">file_in()</a></code>: declare an input file dependency.
</p>
</li>
<li> <p><code><a href="#topic+file_out">file_out()</a></code>: declare an output file to be produced
when the target is built.
</p>
</li>
<li> <p><code><a href="#topic+knitr_in">knitr_in()</a></code>: declare a <code>knitr</code> file dependency such as an
R Markdown (<code style="white-space: pre;">&#8288;*.Rmd&#8288;</code>) or R LaTeX (<code style="white-space: pre;">&#8288;*.Rnw&#8288;</code>) file.
</p>
</li>
<li> <p><code><a href="#topic+ignore">ignore()</a></code>: force <code>drake</code> to entirely ignore a piece of code:
do not track it for changes and do not analyze it for dependencies.
</p>
</li>
<li> <p><code><a href="#topic+no_deps">no_deps()</a></code>: tell <code>drake</code> to not track the dependencies
of a piece of code. <code>drake</code> still tracks the code itself for changes.
</p>
</li>
<li> <p><code><a href="#topic+id_chr">id_chr()</a></code>: Get the name of the current target.
</p>
</li>
<li> <p><code><a href="#topic+drake_envir">drake_envir()</a></code>: get the environment where drake builds targets.
Intended for advanced custom memory management.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>try(id_chr()) # Do not use outside the plan.
## Not run: 
isolate_example("id_chr()", {
plan &lt;- drake_plan(x = id_chr())
make(plan)
readd(x)
# Dynamic branching
plan &lt;- drake_plan(
  x = seq_len(4),
  y = target(id_chr(), dynamic = map(x))
)
make(plan)
readd(y, subtargets = 1)
# Static branching
plan &lt;- drake_plan(
  y = target(c(x, .id_chr), transform = map(x = !!seq_len(4)))
)
plan
})

## End(Not run)
</code></pre>

<hr>
<h2 id='ignore'>Ignore code
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+ignore'></span>

<h3>Description</h3>

<p>Ignore sections of commands and imported functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ignore(x = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ignore_+3A_x">x</code></td>
<td>
<p>Code to ignore.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In user-defined functions and <code><a href="#topic+drake_plan">drake_plan()</a></code> commands, you can
wrap code chunks in <code>ignore()</code> to
</p>

<ol>
<li><p> Tell <code>drake</code> to not search for dependencies
(targets etc. mentioned in the code) and
</p>
</li>
<li><p> Ignore changes to the code so downstream targets remain up to date.
To enforce (1) without (2), use <code><a href="#topic+no_deps">no_deps()</a></code>.
</p>
</li></ol>



<h3>Value</h3>

<p>The argument.
</p>


<h3>Keywords</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code> understands special keyword functions for your commands.
With the exception of <code><a href="#topic+target">target()</a></code>, each one is a proper function
with its own help file.
</p>

<ul>
<li> <p><code><a href="#topic+target">target()</a></code>: give the target more than just a command.
Using <code><a href="#topic+target">target()</a></code>, you can apply a transformation
(examples: <code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>), # nolint
supply a trigger (<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/triggers.html&#8288;</code>), # nolint
or set any number of custom columns.
</p>
</li>
<li> <p><code><a href="#topic+file_in">file_in()</a></code>: declare an input file dependency.
</p>
</li>
<li> <p><code><a href="#topic+file_out">file_out()</a></code>: declare an output file to be produced
when the target is built.
</p>
</li>
<li> <p><code><a href="#topic+knitr_in">knitr_in()</a></code>: declare a <code>knitr</code> file dependency such as an
R Markdown (<code style="white-space: pre;">&#8288;*.Rmd&#8288;</code>) or R LaTeX (<code style="white-space: pre;">&#8288;*.Rnw&#8288;</code>) file.
</p>
</li>
<li> <p><code><a href="#topic+ignore">ignore()</a></code>: force <code>drake</code> to entirely ignore a piece of code:
do not track it for changes and do not analyze it for dependencies.
</p>
</li>
<li> <p><code><a href="#topic+no_deps">no_deps()</a></code>: tell <code>drake</code> to not track the dependencies
of a piece of code. <code>drake</code> still tracks the code itself for changes.
</p>
</li>
<li> <p><code><a href="#topic+id_chr">id_chr()</a></code>: Get the name of the current target.
</p>
</li>
<li> <p><code><a href="#topic+drake_envir">drake_envir()</a></code>: get the environment where drake builds targets.
Intended for advanced custom memory management.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+file_in">file_in()</a></code>, <code><a href="#topic+file_out">file_out()</a></code>, <code><a href="#topic+knitr_in">knitr_in()</a></code>, <code><a href="#topic+no_deps">no_deps()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Contain side effects", {
# Normally, `drake` reacts to changes in dependencies.
x &lt;- 4
make(plan = drake_plan(y = sqrt(x)))
x &lt;- 5
make(plan = drake_plan(y = sqrt(x)))
make(plan = drake_plan(y = sqrt(4) + x))
# But not with ignore().
make(plan = drake_plan(y = sqrt(4) + ignore(x))) # Builds y.
x &lt;- 6
make(plan = drake_plan(y = sqrt(4) + ignore(x))) # Skips y.
make(plan = drake_plan(y = sqrt(4) + ignore(x + 1))) # Skips y.

# ignore() works with functions and multiline code chunks.
f &lt;- function(x) {
  ignore({
    x &lt;- x + 1
    x &lt;- x + 2
  })
  x # Not ignored.
}
make(plan = drake_plan(y = f(2)))
readd(x)
# Changes the content of the ignore() block:
f &lt;- function(x) {
  ignore({
    x &lt;- x + 1
  })
  x # Not ignored.
}
make(plan = drake_plan(x = f(2)))
readd(x)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='imported'>List all the imports in the drake cache.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+imported'></span>

<h3>Description</h3>

<p>Deprecated on 2019-01-08.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>imported(
  files_only = FALSE,
  path = getwd(),
  search = TRUE,
  cache = drake::get_cache(path = path, search = search, verbose = verbose),
  verbose = 1L,
  jobs = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="imported_+3A_files_only">files_only</code></td>
<td>
<p>Logical, whether to show imported files only
and ignore imported objects. Since all your functions and
all their global variables are imported, the full list of
imported objects could get really cumbersome.</p>
</td></tr>
<tr><td><code id="imported_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="imported_+3A_search">search</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="imported_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="imported_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
<tr><td><code id="imported_+3A_jobs">jobs</code></td>
<td>
<p>Number of jobs/workers for parallel processing.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An import is a non-target object processed
by <code><a href="#topic+make">make()</a></code>. Targets in the workflow
plan data frame (see <code><a href="#topic+drake_config">drake_config()</a></code>
may depend on imports.
</p>


<h3>Value</h3>

<p>Character vector naming the imports in the cache.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cached">cached()</a></code>, <code><a href="#topic+loadd">loadd()</a></code>
</p>

<hr>
<h2 id='in_progress'>List the targets in progress
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+in_progress'></span>

<h3>Description</h3>

<p>Deprecated on 2019-01-13.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>in_progress(
  path = getwd(),
  search = TRUE,
  cache = drake::get_cache(path = path, search = search, verbose = verbose),
  verbose = 1L
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="in_progress_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="in_progress_+3A_search">search</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="in_progress_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="in_progress_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Similar to <code><a href="#topic+progress">progress()</a></code>.
</p>


<h3>Value</h3>

<p>A character vector of target names.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+diagnose">diagnose()</a></code>, <code><a href="#topic+drake_get_session_info">drake_get_session_info()</a></code>,
<code><a href="#topic+cached">cached()</a></code>, <code><a href="#topic+readd">readd()</a></code>, <code><a href="#topic+drake_plan">drake_plan()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>

<hr>
<h2 id='is_function_call'>is_function_call <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+is_function_call'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_function_call(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_function_call_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='isolate_example'>Isolate the side effects of an example.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+isolate_example'></span>

<h3>Description</h3>

<p>Runs code in a temporary directory
in a controlled environment with a controlled
set of options.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>isolate_example(desc, code)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="isolate_example_+3A_desc">desc</code></td>
<td>
<p>Character, description of the example.</p>
</td></tr>
<tr><td><code id="isolate_example_+3A_code">code</code></td>
<td>
<p>Code to run.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing.
</p>

<hr>
<h2 id='knitr_deps'>Dependencies of a knitr report
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+knitr_deps'></span>

<h3>Description</h3>

<p>Deprecated on 2019-02-14
<code>knit("your_report.Rmd")</code> or
<code>knit("your_report.Rmd", quiet = TRUE)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>knitr_deps(target)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="knitr_deps_+3A_target">target</code></td>
<td>
<p>Encoded file path</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame of dependencies
</p>

<hr>
<h2 id='knitr_in'>Declare <code>knitr</code>/<code>rmarkdown</code> source files
as dependencies.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+knitr_in'></span>

<h3>Description</h3>

<p><code>knitr_in()</code> marks individual <code>knitr</code>/R Markdown
reports as dependencies. In <code>drake</code>, these reports are pieces
of the pipeline. R Markdown is a great tool for <em>displaying</em>
precomputed results, but not for running a large workflow
from end to end. These reports should do as little
computation as possible.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>knitr_in(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="knitr_in_+3A_...">...</code></td>
<td>
<p>Character strings. File paths of <code>knitr</code>/<code>rmarkdown</code>
source files supplied to a command in your workflow plan data frame.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Unlike <code><a href="#topic+file_in">file_in()</a></code> and <code><a href="#topic+file_out">file_out()</a></code>, <code>knitr_in()</code>
does not work with entire directories.
</p>


<h3>Value</h3>

<p>A character vector of declared input file paths.
</p>


<h3>Keywords</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code> understands special keyword functions for your commands.
With the exception of <code><a href="#topic+target">target()</a></code>, each one is a proper function
with its own help file.
</p>

<ul>
<li> <p><code><a href="#topic+target">target()</a></code>: give the target more than just a command.
Using <code><a href="#topic+target">target()</a></code>, you can apply a transformation
(examples: <code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>), # nolint
supply a trigger (<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/triggers.html&#8288;</code>), # nolint
or set any number of custom columns.
</p>
</li>
<li> <p><code><a href="#topic+file_in">file_in()</a></code>: declare an input file dependency.
</p>
</li>
<li> <p><code><a href="#topic+file_out">file_out()</a></code>: declare an output file to be produced
when the target is built.
</p>
</li>
<li> <p><code><a href="#topic+knitr_in">knitr_in()</a></code>: declare a <code>knitr</code> file dependency such as an
R Markdown (<code style="white-space: pre;">&#8288;*.Rmd&#8288;</code>) or R LaTeX (<code style="white-space: pre;">&#8288;*.Rnw&#8288;</code>) file.
</p>
</li>
<li> <p><code><a href="#topic+ignore">ignore()</a></code>: force <code>drake</code> to entirely ignore a piece of code:
do not track it for changes and do not analyze it for dependencies.
</p>
</li>
<li> <p><code><a href="#topic+no_deps">no_deps()</a></code>: tell <code>drake</code> to not track the dependencies
of a piece of code. <code>drake</code> still tracks the code itself for changes.
</p>
</li>
<li> <p><code><a href="#topic+id_chr">id_chr()</a></code>: Get the name of the current target.
</p>
</li>
<li> <p><code><a href="#topic+drake_envir">drake_envir()</a></code>: get the environment where drake builds targets.
Intended for advanced custom memory management.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+file_in">file_in()</a></code>, <code><a href="#topic+file_out">file_out()</a></code>, <code><a href="#topic+ignore">ignore()</a></code>, <code><a href="#topic+no_deps">no_deps()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("contain side effects", {
if (requireNamespace("knitr", quietly = TRUE)) {
# `knitr_in()` is like `file_in()`
# except that it analyzes active code chunks in your `knitr`
# source file and detects non-file dependencies.
# That way, updates to the right dependencies trigger rebuilds
# in your report.
# The mtcars example (`drake_example("mtcars")`)
# already has a demonstration

load_mtcars_example()
make(my_plan)

# Now how did drake magically know that
# `small`, `large`, and `coef_regression2_small` were
# dependencies of the output file `report.md`?
# because the command in the workflow plan had
# `knitr_in("report.Rmd")` in it, so drake knew
# to analyze the active code chunks. There, it spotted
# where `small`, `large`, and `coef_regression2_small`
# were read from the cache using calls to `loadd()` and `readd()`.
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='legend_nodes'>Create the nodes data frame used in the legend
of the graph visualizations.
<a href="https://lifecycle.r-lib.org/articles/stages.html#soft-deprecated"><img src="../help/figures/lifecycle-soft-deprecated.svg" alt='[Soft-deprecated]' /></a></h2><span id='topic+legend_nodes'></span>

<h3>Description</h3>

<p>Output a <code>visNetwork</code>-friendly
data frame of nodes. It tells you what
the colors and shapes mean
in the graph visualizations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>legend_nodes(font_size = 20)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="legend_nodes_+3A_font_size">font_size</code></td>
<td>
<p>Font size of the node label text.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of legend nodes for the graph visualizations.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Show the legend nodes used in graph visualizations.
# For example, you may want to inspect the color palette more closely.
if (requireNamespace("visNetwork", quietly = TRUE)) {
# visNetwork::visNetwork(nodes = legend_nodes()) # nolint
}

## End(Not run)
</code></pre>

<hr>
<h2 id='load_basic_example'>load_basic_example <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+load_basic_example'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_basic_example(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="load_basic_example_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='load_main_example'>Load the main example.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+load_main_example'></span>

<h3>Description</h3>

<p>The main example lives at
<code style="white-space: pre;">&#8288;https://github.com/wlandau/drake-examples/tree/main/main&#8288;</code>.
Use <code>drake_example("main")</code> to download its code.
This function also writes/overwrites
the files <code>report.Rmd</code> and <code>raw_data.xlsx</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_main_example(
  envir = parent.frame(),
  report_file = "report.Rmd",
  overwrite = FALSE,
  force = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="load_main_example_+3A_envir">envir</code></td>
<td>
<p>The environment to load the example into.
Defaults to your workspace.
For an insulated workspace,
set <code>envir = new.env(parent = globalenv())</code>.</p>
</td></tr>
<tr><td><code id="load_main_example_+3A_report_file">report_file</code></td>
<td>
<p>Where to write the report file <code>report.Rmd</code>.</p>
</td></tr>
<tr><td><code id="load_main_example_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical, whether to overwrite an
existing file <code>report.Rmd</code></p>
</td></tr>
<tr><td><code id="load_main_example_+3A_force">force</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Deprecated 2018-12-31.
</p>


<h3>Value</h3>

<p>A <code><a href="#topic+drake_config">drake_config()</a></code> configuration list.
</p>

<hr>
<h2 id='load_mtcars_example'>Load the mtcars example.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+load_mtcars_example'></span>

<h3>Description</h3>

<p>Is there an association between
the weight and the fuel efficiency of cars?
To find out, we use the mtcars example from <code>drake_example("mtcars")</code>.
The mtcars dataset itself only has 32 rows,
so we generate two larger bootstrapped datasets
and then analyze them with regression models.
Finally, we summarize the regression models
to see if there is an association.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_mtcars_example(
  envir = parent.frame(),
  report_file = NULL,
  overwrite = FALSE,
  force = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="load_mtcars_example_+3A_envir">envir</code></td>
<td>
<p>The environment to load the example into.
Defaults to your workspace.
For an insulated workspace,
set <code>envir = new.env(parent = globalenv())</code>.</p>
</td></tr>
<tr><td><code id="load_mtcars_example_+3A_report_file">report_file</code></td>
<td>
<p>Where to write the report file. Deprecated.
In a future release, the report file will always be
<code>report.Rmd</code> and will always be written to your
working directory (current default).</p>
</td></tr>
<tr><td><code id="load_mtcars_example_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical, whether to overwrite an
existing file <code>report.Rmd</code>.</p>
</td></tr>
<tr><td><code id="load_mtcars_example_+3A_force">force</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Use <code>drake_example("mtcars")</code> to get the code
for the mtcars example.
This function also writes/overwrites
the file, <code>report.Rmd</code>.
</p>


<h3>Value</h3>

<p>Nothing.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+clean_mtcars_example">clean_mtcars_example()</a></code> <code><a href="#topic+drake_examples">drake_examples()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
# Populate your workspace and write 'report.Rmd'.
load_mtcars_example() # Get the code: drake_example("mtcars")
# Check the dependencies of an imported function.
deps_code(reg1)
# Check the dependencies of commands in the workflow plan.
deps_code(my_plan$command[1])
deps_code(my_plan$command[4])
# Plot the interactive network visualization of the workflow.
outdated(my_plan) # Which targets are out of date?
# Run the workflow to build all the targets in the plan.
make(my_plan)
outdated(my_plan) # Everything should be up to date.
# For the reg2() model on the small dataset,
# the p-value is so small that there may be an association
# between weight and fuel efficiency after all.
readd(coef_regression2_small)
# Clean up the example.
clean_mtcars_example()
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='long_hash'><code>drake</code> now has just one hash algorithm per cache.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+long_hash'></span>

<h3>Description</h3>

<p>Deprecated on 2018-12-12
</p>


<h3>Usage</h3>

<pre><code class='language-R'>long_hash(cache = drake::get_cache(verbose = verbose), verbose = 1L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="long_hash_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="long_hash_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector naming a hash algorithm.
</p>

<hr>
<h2 id='make'>Run your project (build the outdated targets).
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+make'></span>

<h3>Description</h3>

<p>This is the central, most important function
of the drake package. It runs all the steps of your
workflow in the correct order, skipping any work
that is already up to date. Because of how <code>make()</code>
tracks global functions and objects as dependencies of targets,
please restart your R session so the pipeline runs
in a clean reproducible environment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make(
  plan,
  targets = NULL,
  envir = parent.frame(),
  verbose = 1L,
  hook = NULL,
  cache = drake::drake_cache(),
  fetch_cache = NULL,
  parallelism = "loop",
  jobs = 1L,
  jobs_preprocess = 1L,
  packages = rev(.packages()),
  lib_loc = NULL,
  prework = character(0),
  prepend = NULL,
  command = NULL,
  args = NULL,
  recipe_command = NULL,
  log_progress = TRUE,
  skip_targets = FALSE,
  timeout = NULL,
  cpu = Inf,
  elapsed = Inf,
  retries = 0,
  force = FALSE,
  graph = NULL,
  trigger = drake::trigger(),
  skip_imports = FALSE,
  skip_safety_checks = FALSE,
  config = NULL,
  lazy_load = "eager",
  session_info = NULL,
  cache_log_file = NULL,
  seed = NULL,
  caching = "main",
  keep_going = FALSE,
  session = NULL,
  pruning_strategy = NULL,
  makefile_path = NULL,
  console_log_file = NULL,
  ensure_workers = NULL,
  garbage_collection = FALSE,
  template = list(),
  sleep = function(i) 0.01,
  hasty_build = NULL,
  memory_strategy = "speed",
  layout = NULL,
  spec = NULL,
  lock_envir = TRUE,
  history = TRUE,
  recover = FALSE,
  recoverable = TRUE,
  curl_handles = list(),
  max_expand = NULL,
  log_build_times = TRUE,
  format = NULL,
  lock_cache = TRUE,
  log_make = NULL,
  log_worker = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_+3A_plan">plan</code></td>
<td>
<p>Workflow plan data frame.
A workflow plan data frame is a data frame
with a <code>target</code> column and a <code>command</code> column.
(See the details in the <code><a href="#topic+drake_plan">drake_plan()</a></code> help file
for descriptions of the optional columns.)
Targets are the objects that drake generates,
and commands are the pieces of R code that produce them.
You can create and track custom files along the way
(see <code><a href="#topic+file_in">file_in()</a></code>, <code><a href="#topic+file_out">file_out()</a></code>, and <code><a href="#topic+knitr_in">knitr_in()</a></code>).
Use the function <code><a href="#topic+drake_plan">drake_plan()</a></code> to generate workflow plan
data frames.</p>
</td></tr>
<tr><td><code id="make_+3A_targets">targets</code></td>
<td>
<p>Character vector, names of targets to build.
Dependencies are built too. You may supply static and/or whole
dynamic targets, but no sub-targets.</p>
</td></tr>
<tr><td><code id="make_+3A_envir">envir</code></td>
<td>
<p>Environment to use. Defaults to the current
workspace, so you should not need to worry about this
most of the time. A deep copy of <code>envir</code> is made,
so you don't need to worry about your workspace being modified
by <code>make</code>. The deep copy inherits from the global environment.
Wherever necessary, objects and functions are imported
from <code>envir</code> and the global environment and
then reproducibly tracked as dependencies.</p>
</td></tr>
<tr><td><code id="make_+3A_verbose">verbose</code></td>
<td>
<p>Integer, control printing to the console/terminal.
</p>

<ul>
<li> <p><code>0</code>: print nothing.
</p>
</li>
<li> <p><code>1</code>: print target-by-target messages as <code><a href="#topic+make">make()</a></code> progresses.
</p>
</li>
<li> <p><code>2</code>: show a progress bar to track how many targets are
done so far.
</p>
</li></ul>
</td></tr>
<tr><td><code id="make_+3A_hook">hook</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="make_+3A_cache">cache</code></td>
<td>
<p>drake cache as created by <code><a href="#topic+new_cache">new_cache()</a></code>.
See also <code><a href="#topic+drake_cache">drake_cache()</a></code>.</p>
</td></tr>
<tr><td><code id="make_+3A_fetch_cache">fetch_cache</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="make_+3A_parallelism">parallelism</code></td>
<td>
<p>Character scalar, type of parallelism to use.
For detailed explanations, see
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/hpc.html&#8288;</code>.
</p>
<p>You could also supply your own scheduler function
if you want to experiment or aggressively optimize.
The function should take a single <code>config</code> argument
(produced by <code><a href="#topic+drake_config">drake_config()</a></code>). Existing examples
from <code>drake</code>'s internals are the <code style="white-space: pre;">&#8288;backend_*()&#8288;</code> functions:
</p>

<ul>
<li> <p><code>backend_loop()</code>
</p>
</li>
<li> <p><code>backend_clustermq()</code>
</p>
</li>
<li> <p><code>backend_future()</code>
However, this functionality is really a back door
and should not be used for production purposes unless you really
know what you are doing and you are willing to suffer setbacks
whenever <code>drake</code>'s unexported core functions are updated.
</p>
</li></ul>
</td></tr>
<tr><td><code id="make_+3A_jobs">jobs</code></td>
<td>
<p>Maximum number of parallel workers for processing the targets.
You can experiment with <code><a href="#topic+predict_runtime">predict_runtime()</a></code>
to help decide on an appropriate number of jobs.
For details, visit
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/time.html&#8288;</code>.</p>
</td></tr>
<tr><td><code id="make_+3A_jobs_preprocess">jobs_preprocess</code></td>
<td>
<p>Number of parallel jobs for processing the imports
and doing other preprocessing tasks.</p>
</td></tr>
<tr><td><code id="make_+3A_packages">packages</code></td>
<td>
<p>Character vector packages to load, in the order
they should be loaded. Defaults to <code>rev(.packages())</code>, so you
should not usually need to set this manually. Just call
<code><a href="base.html#topic+library">library()</a></code> to load your packages before <code>make()</code>.
However, sometimes packages need to be strictly forced to load
in a certain order, especially if <code>parallelism</code> is
<code>"Makefile"</code>. To do this, do not use <code><a href="base.html#topic+library">library()</a></code>
or <code><a href="base.html#topic+require">require()</a></code> or <code><a href="base.html#topic+loadNamespace">loadNamespace()</a></code> or
<code><a href="base.html#topic+attachNamespace">attachNamespace()</a></code> to load any libraries beforehand.
Just list your packages in the <code>packages</code> argument in the order
you want them to be loaded.</p>
</td></tr>
<tr><td><code id="make_+3A_lib_loc">lib_loc</code></td>
<td>
<p>Character vector, optional.
Same as in <code>library()</code> or <code>require()</code>.
Applies to the <code>packages</code> argument (see above).</p>
</td></tr>
<tr><td><code id="make_+3A_prework">prework</code></td>
<td>
<p>Expression (language object), list of expressions,
or character vector.
Code to run right before targets build.
Called only once if <code>parallelism</code> is <code>"loop"</code>
and once per target otherwise.
This code can be used to set global options, etc.</p>
</td></tr>
<tr><td><code id="make_+3A_prepend">prepend</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="make_+3A_command">command</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="make_+3A_args">args</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="make_+3A_recipe_command">recipe_command</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="make_+3A_log_progress">log_progress</code></td>
<td>
<p>Logical, whether to log the progress
of individual targets as they are being built. Progress logging
creates extra files in the cache (usually the <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder)
and slows down <code>make()</code> a little.
If you need to reduce or limit the number of files in the cache,
call <code>make(log_progress = FALSE, recover = FALSE)</code>.</p>
</td></tr>
<tr><td><code id="make_+3A_skip_targets">skip_targets</code></td>
<td>
<p>Logical, whether to skip building the targets
in <code>plan</code> and just import objects and files.</p>
</td></tr>
<tr><td><code id="make_+3A_timeout">timeout</code></td>
<td>
<p><code>deprecated</code>. Use <code>elapsed</code> and <code>cpu</code> instead.</p>
</td></tr>
<tr><td><code id="make_+3A_cpu">cpu</code></td>
<td>
<p>Same as the <code>cpu</code> argument of <code>setTimeLimit()</code>.
Seconds of cpu time before a target times out.
Assign target-level cpu timeout times with an optional <code>cpu</code>
column in <code>plan</code>.</p>
</td></tr>
<tr><td><code id="make_+3A_elapsed">elapsed</code></td>
<td>
<p>Same as the <code>elapsed</code> argument of <code>setTimeLimit()</code>.
Seconds of elapsed time before a target times out.
Assign target-level elapsed timeout times with an optional <code>elapsed</code>
column in <code>plan</code>.</p>
</td></tr>
<tr><td><code id="make_+3A_retries">retries</code></td>
<td>
<p>Number of retries to execute if the target fails.
Assign target-level retries with an optional <code>retries</code>
column in <code>plan</code>.</p>
</td></tr>
<tr><td><code id="make_+3A_force">force</code></td>
<td>
<p>Logical. If <code>FALSE</code> (default) then <code>drake</code>
imposes checks if the cache was created with an old
and incompatible version of drake.
If there is an incompatibility, <code>make()</code> stops to
give you an opportunity to
downgrade <code>drake</code> to a compatible version
rather than rerun all your targets from scratch.</p>
</td></tr>
<tr><td><code id="make_+3A_graph">graph</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="make_+3A_trigger">trigger</code></td>
<td>
<p>Name of the trigger to apply to all targets.
Ignored if <code>plan</code> has a <code>trigger</code> column.
See <code><a href="#topic+trigger">trigger()</a></code> for details.</p>
</td></tr>
<tr><td><code id="make_+3A_skip_imports">skip_imports</code></td>
<td>
<p>Logical, whether to totally neglect to
process the imports and jump straight to the targets. This can be useful
if your imports are massive and you just want to test your project,
but it is bad practice for reproducible data analysis.
This argument is overridden if you supply your own <code>graph</code> argument.</p>
</td></tr>
<tr><td><code id="make_+3A_skip_safety_checks">skip_safety_checks</code></td>
<td>
<p>Logical, whether to skip the safety checks
on your workflow. Use at your own peril.</p>
</td></tr>
<tr><td><code id="make_+3A_config">config</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="make_+3A_lazy_load">lazy_load</code></td>
<td>
<p>An old feature, currently being questioned.
For the current recommendations on memory management, see
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/memory.html#memory-strategies&#8288;</code>.
The <code>lazy_load</code> argument is either a character vector or a logical.
For dynamic targets, the behavior is always <code>"eager"</code> (see below).
So the <code>lazy_load</code> argument is for static targets only.
Choices for <code>lazy_load</code>:
</p>

<ul>
<li> <p><code>"eager"</code>: no lazy loading. The target is loaded right away
with <code><a href="base.html#topic+assign">assign()</a></code>.
</p>
</li>
<li> <p><code>"promise"</code>: lazy loading with <code><a href="base.html#topic+delayedAssign">delayedAssign()</a></code>
</p>
</li>
<li> <p><code>"bind"</code>: lazy loading with active bindings:
<code>bindr::populate_env()</code>.
</p>
</li>
<li> <p><code>TRUE</code>: same as <code>"promise"</code>.
</p>
</li>
<li> <p><code>FALSE</code>: same as <code>"eager"</code>.
</p>
</li></ul>

<p>If <code>lazy_load</code> is <code>"eager"</code>,
drake prunes the execution environment before each target/stage,
removing all superfluous targets
and then loading any dependencies it will need for building.
In other words, drake prepares the environment in advance
and tries to be memory efficient.
If <code>lazy_load</code> is <code>"bind"</code> or <code>"promise"</code>, drake assigns
promises to load any dependencies at the last minute.
Lazy loading may be more memory efficient in some use cases, but
it may duplicate the loading of dependencies, costing time.</p>
</td></tr>
<tr><td><code id="make_+3A_session_info">session_info</code></td>
<td>
<p>Logical, whether to save the <code>sessionInfo()</code>
to the cache. Defaults to <code>TRUE</code>.
This behavior is recommended for serious <code><a href="#topic+make">make()</a></code>s
for the sake of reproducibility. This argument only exists to
speed up tests. Apparently, <code>sessionInfo()</code> is a bottleneck
for small <code><a href="#topic+make">make()</a></code>s.</p>
</td></tr>
<tr><td><code id="make_+3A_cache_log_file">cache_log_file</code></td>
<td>
<p>Name of the CSV cache log file to write.
If <code>TRUE</code>, the default file name is used (<code>drake_cache.CSV</code>).
If <code>NULL</code>, no file is written.
If activated, this option writes a flat text file
to represent the state of the cache
(fingerprints of all the targets and imports).
If you put the log file under version control, your commit history
will give you an easy representation of how your results change
over time as the rest of your project changes. Hopefully,
this is a step in the right direction for data reproducibility.</p>
</td></tr>
<tr><td><code id="make_+3A_seed">seed</code></td>
<td>
<p>Integer, the root pseudo-random number generator
seed to use for your project.
In <code><a href="#topic+make">make()</a></code>, <code>drake</code> generates a unique
local seed for each target using the global seed
and the target name. That way, different pseudo-random numbers
are generated for different targets, and this pseudo-randomness
is reproducible.
</p>
<p>To ensure reproducibility across different R sessions,
<code>set.seed()</code> and <code>.Random.seed</code> are ignored and have no affect on
<code>drake</code> workflows. Conversely, <code>make()</code> does not usually
change <code>.Random.seed</code>,
even when pseudo-random numbers are generated.
The exception to this last point is
<code>make(parallelism = "clustermq")</code>
because the <code>clustermq</code> package needs to generate random numbers
to set up ports and sockets for ZeroMQ.
</p>
<p>On the first call to <code>make()</code> or <code>drake_config()</code>, <code>drake</code>
uses the random number generator seed from the <code>seed</code> argument.
Here, if the <code>seed</code> is <code>NULL</code> (default), <code>drake</code> uses a <code>seed</code> of <code>0</code>.
On subsequent <code>make()</code>s for existing projects, the project's
cached seed will be used in order to ensure reproducibility.
Thus, the <code>seed</code> argument must either be <code>NULL</code> or the same
seed from the project's cache (usually the <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder).
To reset the random number generator seed for a project,
use <code>clean(destroy = TRUE)</code>.</p>
</td></tr>
<tr><td><code id="make_+3A_caching">caching</code></td>
<td>
<p>Character string, either <code>"main"</code> or <code>"worker"</code>.
</p>

<ul>
<li> <p><code>"main"</code>: Targets are built by remote workers and sent back to
the main process. Then, the main process saves them to the
cache (<code>config$cache</code>, usually a file system <code>storr</code>).
Appropriate if remote workers do not have access to the file system
of the calling R session. Targets are cached one at a time,
which may be slow in some situations.
</p>
</li>
<li> <p><code>"worker"</code>: Remote workers not only build the targets, but also
save them to the cache. Here, caching happens in parallel.
However, remote workers need to have access to the file system
of the calling R session. Transferring target data across
a network can be slow.
</p>
</li></ul>
</td></tr>
<tr><td><code id="make_+3A_keep_going">keep_going</code></td>
<td>
<p>Logical, whether to still keep running <code><a href="#topic+make">make()</a></code>
if targets fail.</p>
</td></tr>
<tr><td><code id="make_+3A_session">session</code></td>
<td>
<p>Deprecated. Has no effect now.</p>
</td></tr>
<tr><td><code id="make_+3A_pruning_strategy">pruning_strategy</code></td>
<td>
<p>Deprecated. See <code>memory_strategy</code>.</p>
</td></tr>
<tr><td><code id="make_+3A_makefile_path">makefile_path</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="make_+3A_console_log_file">console_log_file</code></td>
<td>
<p>Deprecated in favor of <code>log_make</code>.</p>
</td></tr>
<tr><td><code id="make_+3A_ensure_workers">ensure_workers</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="make_+3A_garbage_collection">garbage_collection</code></td>
<td>
<p>Logical, whether to call <code>gc()</code> each time
a target is built during <code><a href="#topic+make">make()</a></code>.</p>
</td></tr>
<tr><td><code id="make_+3A_template">template</code></td>
<td>
<p>A named list of values to fill in the <code>{{ ... }}</code>
placeholders in template files (e.g. from <code><a href="#topic+drake_hpc_template_file">drake_hpc_template_file()</a></code>).
Same as the <code>template</code> argument of <code>clustermq::Q()</code> and
<code>clustermq::workers</code>.
Enabled for <code>clustermq</code> only (<code>make(parallelism = "clustermq")</code>),
not <code>future</code> or <code>batchtools</code> so far.
For more information, see the <code>clustermq</code> package:
<code style="white-space: pre;">&#8288;https://github.com/mschubert/clustermq&#8288;</code>.
Some template placeholders such as <code>{{ job_name }}</code> and <code>{{ n_jobs }}</code>
cannot be set this way.</p>
</td></tr>
<tr><td><code id="make_+3A_sleep">sleep</code></td>
<td>
<p>Optional function on a single numeric argument <code>i</code>.
Default: <code>function(i) 0.01</code>.
</p>
<p>To conserve memory, <code>drake</code> assigns a brand new closure to
<code>sleep</code>, so your custom function should not depend on in-memory data
except from loaded packages.
</p>
<p>For parallel processing, <code>drake</code> uses
a central main process to check what the parallel
workers are doing, and for the affected high-performance
computing workflows, wait for data to arrive over a network.
In between loop iterations, the main process sleeps to avoid throttling.
The <code>sleep</code> argument to <code>make()</code> and <code>drake_config()</code>
allows you to customize how much time the main process spends
sleeping.
</p>
<p>The <code>sleep</code> argument is a function that takes an argument
<code>i</code> and returns a numeric scalar, the number of seconds to
supply to <code>Sys.sleep()</code> after iteration <code>i</code> of checking.
(Here, <code>i</code> starts at 1.)
If the checking loop does something other than sleeping
on iteration <code>i</code>, then <code>i</code> is reset back to 1.
</p>
<p>To sleep for the same amount of time between checks,
you might supply something like <code>function(i) 0.01</code>.
But to avoid consuming too many resources during heavier
and longer workflows, you might use an exponential
back-off: say,
<code>function(i) { 0.1 + 120 * pexp(i - 1, rate = 0.01) }</code>.</p>
</td></tr>
<tr><td><code id="make_+3A_hasty_build">hasty_build</code></td>
<td>
<p>Deprecated</p>
</td></tr>
<tr><td><code id="make_+3A_memory_strategy">memory_strategy</code></td>
<td>
<p>Character scalar, name of the
strategy <code>drake</code> uses to load/unload a target's dependencies in memory.
You can give each target its own memory strategy,
(e.g. <code>drake_plan(x = 1, y = target(f(x), memory_strategy = "lookahead"))</code>)
to override the global memory strategy. Choices:
</p>

<ul>
<li> <p><code>"speed"</code>: Once a target is newly built or loaded in memory,
just keep it there.
This choice maximizes speed and hogs memory.
</p>
</li>
<li> <p><code>"autoclean"</code>: Just before building each new target,
unload everything from memory except the target's direct dependencies.
After a target is built, discard it from memory.
(Set <code>garbage_collection = TRUE</code> to make sure it is really gone.)
This option conserves memory, but it sacrifices speed because
each new target needs to reload
any previously unloaded targets from storage.
</p>
</li>
<li> <p><code>"preclean"</code>: Just before building each new target,
unload everything from memory except the target's direct dependencies.
After a target is built, keep it in memory until <code>drake</code> determines
they can be unloaded.
This option conserves memory, but it sacrifices speed because
each new target needs to reload
any previously unloaded targets from storage.
</p>
</li>
<li> <p><code>"lookahead"</code>: Just before building each new target,
search the dependency graph to find targets that will not be
needed for the rest of the current <code>make()</code> session.
After a target is built, keep it in memory until the next
memory management stage.
In this mode, targets are only in memory if they need to be loaded,
and we avoid superfluous reads from the cache.
However, searching the graph takes time,
and it could even double the computational overhead for large projects.
</p>
</li>
<li> <p><code>"unload"</code>: Just before building each new target,
unload all targets from memory.
After a target is built, <strong>do not</strong> keep it in memory.
This mode aggressively optimizes for both memory and speed,
but in commands and triggers,
you have to manually load any dependencies you need using <code>readd()</code>.
</p>
</li>
<li> <p><code>"none"</code>: Do not manage memory at all.
Do not load or unload anything before building targets.
After a target is built, <strong>do not</strong> keep it in memory.
This mode aggressively optimizes for both memory and speed,
but in commands and triggers,
you have to manually load any dependencies you need using <code>readd()</code>.
</p>
</li></ul>

<p>For even more direct
control over which targets <code>drake</code> keeps in memory, see the
help file examples of <code><a href="#topic+drake_envir">drake_envir()</a></code>.
Also see the <code>garbage_collection</code> argument of <code>make()</code> and
<code>drake_config()</code>.</p>
</td></tr>
<tr><td><code id="make_+3A_layout">layout</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="make_+3A_spec">spec</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="make_+3A_lock_envir">lock_envir</code></td>
<td>
<p>Logical, whether to lock <code>config$envir</code> during <code>make()</code>.
If <code>TRUE</code>, <code>make()</code> quits in error whenever a command in your
<code>drake</code> plan (or <code>prework</code>) tries to add, remove, or modify
non-hidden variables in your environment/workspace/R session.
This is extremely important for ensuring the purity of your functions
and the reproducibility/credibility/trust you can place in your project.
<code>lock_envir</code> will be set to a default of <code>TRUE</code> in <code>drake</code> version
7.0.0 and higher. Namespaces are never locked, e.g.
if <code>envir</code> is <code>getNamespace("packagename")</code>.</p>
</td></tr>
<tr><td><code id="make_+3A_history">history</code></td>
<td>
<p>Logical, whether to record the build history
of your targets. You can also supply a
<code>txtq</code>, which is
how <code>drake</code> records history.
Must be <code>TRUE</code> for <code><a href="#topic+drake_history">drake_history()</a></code> to work later.</p>
</td></tr>
<tr><td><code id="make_+3A_recover">recover</code></td>
<td>
<p>Logical, whether to activate automated data recovery.
The default is <code>FALSE</code> because
</p>

<ol>
<li><p> Automated data recovery is still stable.
</p>
</li>
<li><p> It has reproducibility issues.
Targets recovered from the distant past may have been generated
with earlier versions of R and earlier package environments
that no longer exist.
</p>
</li>
<li><p> It is not always possible, especially when dynamic files
are combined with dynamic branching
(e.g. <code>dynamic = map(stuff)</code> and <code>format = "file"</code> etc.)
since behavior is harder to predict in advance.
</p>
</li></ol>

<p>How it works: if <code>recover</code> is <code>TRUE</code>,
<code>drake</code> tries to salvage old target values from the cache
instead of running commands from the plan.
A target is recoverable if
</p>

<ol>
<li><p> There is an old value somewhere in the cache that
shares the command, dependencies, etc.
of the target about to be built.
</p>
</li>
<li><p> The old value was generated with <code>make(recoverable = TRUE)</code>.
</p>
</li></ol>

<p>If both conditions are met, <code>drake</code> will
</p>

<ol>
<li><p> Assign the most recently-generated admissible data to the target, and
</p>
</li>
<li><p> skip the target's command.
</p>
</li></ol>

<p>Functions <code><a href="#topic+recoverable">recoverable()</a></code> and <code><a href="#topic+r_recoverable">r_recoverable()</a></code> show the most upstream
outdated targets that will be recovered in this way in the next
<code><a href="#topic+make">make()</a></code> or <code><a href="#topic+r_make">r_make()</a></code>.</p>
</td></tr>
<tr><td><code id="make_+3A_recoverable">recoverable</code></td>
<td>
<p>Logical, whether to make target values recoverable
with <code>make(recover = TRUE)</code>.
This requires writing extra files to the cache,
and it prevents old metadata from being removed with garbage collection
(<code>clean(garbage_collection = TRUE)</code>, <code>gc()</code> in <code>storr</code>s).
If you need to limit the cache size or the number of files in the cache,
consider <code>make(recoverable = FALSE, progress = FALSE)</code>.
Recovery is not always possible, especially when dynamic files
are combined with dynamic branching
(e.g. <code>dynamic = map(stuff)</code> and <code>format = "file"</code> etc.)
since behavior is harder to predict in advance.</p>
</td></tr>
<tr><td><code id="make_+3A_curl_handles">curl_handles</code></td>
<td>
<p>A named list of curl handles. Each value is an
object from <code>curl::new_handle()</code>, and each name is a URL
(and should start with &quot;http&quot;, &quot;https&quot;, or &quot;ftp&quot;).
Example:
list(
<code style="white-space: pre;">&#8288;http://httpbin.org/basic-auth&#8288;</code> = curl::new_handle(
username = &quot;user&quot;, password = &quot;passwd&quot;
)
)
Then, if your plan has
<code>file_in("http://httpbin.org/basic-auth/user/passwd")</code>
<code>drake</code> will authenticate using the username and password of the handle
for <code style="white-space: pre;">&#8288;http://httpbin.org/basic-auth/&#8288;</code>.
</p>
<p><code>drake</code> uses partial matching on text to
find the right handle of the <code>file_in()</code> URL, so the name of the handle
could be the complete URL (<code>"http://httpbin.org/basic-auth/user/passwd"</code>)
or a part of the URL (e.g. <code>"http://httpbin.org/"</code> or
<code>"http://httpbin.org/basic-auth/"</code>). If you have multiple handles
whose names match your URL, <code>drake</code> will choose the closest match.</p>
</td></tr>
<tr><td><code id="make_+3A_max_expand">max_expand</code></td>
<td>
<p>Positive integer, optional.
<code>max_expand</code> is the maximum number of targets to generate in each
<code>map()</code>, <code>cross()</code>, or <code>group()</code> dynamic transform.
Useful if you have a massive number of dynamic sub-targets and you want to
work with only the first few sub-targets before scaling up.
Note: the <code>max_expand</code> argument of <code>make()</code> and
<code>drake_config()</code> is for dynamic branching only.
The static branching <code>max_expand</code>
is an argument of <code>drake_plan()</code> and <code>transform_plan()</code>.</p>
</td></tr>
<tr><td><code id="make_+3A_log_build_times">log_build_times</code></td>
<td>
<p>Logical, whether to record build_times for targets.
Mac users may notice a 20% speedup in <code>make()</code>
with <code>build_times = FALSE</code>.</p>
</td></tr>
<tr><td><code id="make_+3A_format">format</code></td>
<td>
<p>Character, an optional custom storage format for targets
without an explicit <code>target(format = ...)</code> in the plan. Details
about formats:
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#special-data-formats-for-targets&#8288;</code> # nolint</p>
</td></tr>
<tr><td><code id="make_+3A_lock_cache">lock_cache</code></td>
<td>
<p>Logical, whether to lock the cache before running <code>make()</code>
etc. It is usually recommended to keep cache locking on.
However, if you interrupt <code>make()</code> before it can clean itself up,
then the cache will stay locked,
and you will need to manually unlock it with
<code>drake::drake_cache("xyz")$unlock()</code>. Repeatedly unlocking the cache
by hand is annoying, and <code>lock_cache = FALSE</code> prevents the cache
from locking in the first place.</p>
</td></tr>
<tr><td><code id="make_+3A_log_make">log_make</code></td>
<td>
<p>Optional character scalar of a file name or
connection object (such as <code>stdout()</code>) to dump maximally verbose
log information for <code><a href="#topic+make">make()</a></code> and other functions (all functions that
accept a <code>config</code> argument, plus <code>drake_config()</code>).
If you choose to use a text file as the console log,
it will persist over multiple function calls
until you delete it manually.
Fields in each row the log file, from left to right:
- The node name (short host name) of the
computer (from <code>Sys.info()["nodename"]</code>).
- The process ID (from <code>Sys.getpid()</code>).
- A timestamp with the date and time (in microseconds).
- A brief description of what <code>drake</code> was doing.<code style="white-space: pre;">&#8288; The fields are separated by pipe symbols (&#8288;</code>&quot;|&quot;').</p>
</td></tr>
<tr><td><code id="make_+3A_log_worker">log_worker</code></td>
<td>
<p>Logical, same as the <code>log_worker</code> argument of
<code>clustermq::workers()</code> and <code>clustermq::Q()</code>. Only relevant
if <code>parallelism</code> is <code>"clustermq"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing
</p>


<h3>Interactive mode</h3>

<p>In interactive sessions, consider <code><a href="#topic+r_make">r_make()</a></code>, <code><a href="#topic+r_outdated">r_outdated()</a></code>, etc.
rather than <code><a href="#topic+make">make()</a></code>, <code><a href="#topic+outdated">outdated()</a></code>, etc. The <code style="white-space: pre;">&#8288;r_*()&#8288;</code> <code>drake</code> functions
are more reproducible when the session is interactive.
If you do run <code>make()</code> interactively, please restart your R session
beforehand so your functions and global objects get loaded into
a clean reproducible environment. This prevents targets
from getting invalidated unexpectedly.
</p>
<p>A serious drake workflow should be consistent and reliable,
ideally with the help of a main R script.
This script should begin in a fresh R session,
load your packages and functions in a dependable manner,
and then run <code>make()</code>. Example:
<code style="white-space: pre;">&#8288;https://github.com/wlandau/drake-examples/tree/main/gsp&#8288;</code>.
Batch mode, especially within a container, is particularly helpful.
</p>
<p>Interactive R sessions are still useful,
but they easily grow stale.
Targets can falsely invalidate if you accidentally change
a function or data object in your environment.
</p>


<h3>Self-invalidation</h3>

<p>It is possible to construct a workflow that tries to invalidate itself.
Example:
</p>
<div class="sourceCode r"><pre>plan &lt;- drake_plan(
  x = {
    data(mtcars)
    mtcars$mpg
  },
  y = mean(x)
)
</pre></div>
<p>Here, because <code>data()</code> loads <code>mtcars</code> into the global environment,
the very act of building <code>x</code> changes the dependencies of <code>x</code>.
In other words, without safeguards, <code>x</code> would not be up to date at
the end of <code>make(plan)</code>.
Please try to avoid workflows that modify the global environment.
Functions such as <code>data()</code> belong in your setup scripts
prior to <code>make()</code>, not in any functions or commands that get called
during <code>make()</code> itself.
</p>
<p>For each target that is still problematic  (e.g.
<code style="white-space: pre;">&#8288;https://github.com/rstudio/gt/issues/297&#8288;</code>)
you can safely run the command in its own special <code>callr::r()</code> process.
Example: <code style="white-space: pre;">&#8288;https://github.com/rstudio/gt/issues/297#issuecomment-497778735&#8288;</code>. # nolint
</p>
<p>If that fails, you can run <code>make(plan, lock_envir = FALSE)</code>
to suppress environment-locking for all targets.
However, this is not usually recommended.
There are legitimate use cases for <code>lock_envir = FALSE</code>
(example: <code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/hpc.html#parallel-computing-within-targets&#8288;</code>) # nolint
but most workflows should stick with the default <code>lock_envir = TRUE</code>.
</p>


<h3>Cache locking</h3>

<p>When <code>make()</code> runs, it locks the cache so other processes cannot modify it.
Same goes for <code><a href="#topic+outdated">outdated()</a></code>, <code><a href="#topic+vis_drake_graph">vis_drake_graph()</a></code>, and similar functions
when <code>make_imports = TRUE</code>. This is a safety measure to prevent simultaneous
processes from corrupting the cache. If you get an error saying that the
cache is locked, either set <code>make_imports = FALSE</code> or manually force
unlock it with <code>drake_cache()$unlock()</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code>,
<code><a href="#topic+drake_config">drake_config()</a></code>,
<code><a href="#topic+vis_drake_graph">vis_drake_graph()</a></code>,
<code><a href="#topic+outdated">outdated()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
config &lt;- drake_config(my_plan)
outdated(my_plan) # Which targets need to be (re)built?
make(my_plan) # Build what needs to be built.
outdated(my_plan) # Everything is up to date.
# Change one of your imported function dependencies.
reg2 = function(d) {
  d$x3 = d$x^3
  lm(y ~ x3, data = d)
}
outdated(my_plan) # Some targets depend on reg2().
make(my_plan) # Rebuild just the outdated targets.
outdated(my_plan) # Everything is up to date again.
if (requireNamespace("visNetwork", quietly = TRUE)) {
vis_drake_graph(my_plan) # See how they fit in an interactive graph.
make(my_plan, cache_log_file = TRUE) # Write a CSV log file this time.
vis_drake_graph(my_plan) # The colors changed in the graph.
# Run targets in parallel:
# options(clustermq.scheduler = "multicore") # nolint
# make(my_plan, parallelism = "clustermq", jobs = 2) # nolint
}
clean() # Start from scratch next time around.
}
# Dynamic branching
# Get the mean mpg for each cyl in the mtcars dataset.
plan &lt;- drake_plan(
  raw = mtcars,
  group_index = raw$cyl,
  munged = target(raw[, c("mpg", "cyl")], dynamic = map(raw)),
  mean_mpg_by_cyl = target(
    data.frame(mpg = mean(munged$mpg), cyl = munged$cyl[1]),
    dynamic = group(munged, .by = group_index)
  )
)
make(plan)
readd(mean_mpg_by_cyl)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='make_impl'>Internal function with a drake_config() argument</h2><span id='topic+make_impl'></span>

<h3>Description</h3>

<p>Not a user-side function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_impl(config)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_impl_+3A_config">config</code></td>
<td>
<p>a <code><a href="#topic+drake_config">drake_config()</a></code> object.</p>
</td></tr>
</table>

<hr>
<h2 id='make_imports'>Just process the imports
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+make_imports'></span>

<h3>Description</h3>

<p>Deprecated on 2019-01-04
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_imports(config)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_imports_+3A_config">config</code></td>
<td>
<p>A configuration list returned by <code><a href="#topic+drake_config">drake_config()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make">make()</a></code>, <code><a href="#topic+drake_config">drake_config()</a></code>
</p>

<hr>
<h2 id='make_targets'>Just make the targets
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+make_targets'></span>

<h3>Description</h3>

<p>Deprecated on 2019-01-04
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_targets(config)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_targets_+3A_config">config</code></td>
<td>
<p>A configuration list returned by <code><a href="#topic+drake_config">drake_config()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make">make()</a></code>, <code><a href="#topic+drake_config">drake_config()</a></code>
</p>

<hr>
<h2 id='make_with_config'>Apply make() with a pre-computed config object
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+make_with_config'></span>

<h3>Description</h3>

<p>Deprecated on 2019-01-04
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_with_config(config)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_with_config_+3A_config">config</code></td>
<td>
<p>A configuration list returned by <code><a href="#topic+drake_config">drake_config()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make">make()</a></code>, <code><a href="#topic+drake_config">drake_config()</a></code>
</p>

<hr>
<h2 id='Makefile_recipe'>Default Makefile recipe
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+Makefile_recipe'></span>

<h3>Description</h3>

<p>2019-01-03
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Makefile_recipe(
  recipe_command = drake::default_recipe_command(),
  target = "your_target",
  cache_path = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Makefile_recipe_+3A_recipe_command">recipe_command</code></td>
<td>
<p>Character scalar.</p>
</td></tr>
<tr><td><code id="Makefile_recipe_+3A_target">target</code></td>
<td>
<p>Character scalar.</p>
</td></tr>
<tr><td><code id="Makefile_recipe_+3A_cache_path">cache_path</code></td>
<td>
<p>Character scalar.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character scalar
</p>

<hr>
<h2 id='manage_memory'>Manage the in-memory dependencies of a target.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+manage_memory'></span>

<h3>Description</h3>

<p>Load/unload a target's dependencies.
Not a user-side function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>manage_memory(target, config, downstream = NULL, jobs = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="manage_memory_+3A_target">target</code></td>
<td>
<p>Character, name of the target.</p>
</td></tr>
<tr><td><code id="manage_memory_+3A_config">config</code></td>
<td>
<p><code><a href="#topic+drake_config">drake_config()</a></code> list.</p>
</td></tr>
<tr><td><code id="manage_memory_+3A_downstream">downstream</code></td>
<td>
<p>Optional, character vector of any targets
assumed to be downstream.</p>
</td></tr>
<tr><td><code id="manage_memory_+3A_jobs">jobs</code></td>
<td>
<p>Number of jobs for local parallel computing</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing.
</p>

<hr>
<h2 id='map_plan'>Create a plan that maps a function to a grid of arguments.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+map_plan'></span>

<h3>Description</h3>

<p>Deprecated on 2019-05-16. Use <code><a href="#topic+drake_plan">drake_plan()</a></code>
transformations instead. See
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>
for the details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>map_plan(args, fun, id = "id", character_only = FALSE, trace = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="map_plan_+3A_args">args</code></td>
<td>
<p>A data frame (or better yet, a <code>tibble</code>)
of function arguments to <code>fun</code>.
Here, the column names should be the names of the arguments
of <code>fun</code>, and each row of <code>args</code> corresponds to a
call to <code>fun</code>.</p>
</td></tr>
<tr><td><code id="map_plan_+3A_fun">fun</code></td>
<td>
<p>Name of a function to apply the arguments
row-by-row. Supply a symbol if <code>character_only</code> is
<code>FALSE</code> and a character scalar otherwise.</p>
</td></tr>
<tr><td><code id="map_plan_+3A_id">id</code></td>
<td>
<p>Name of an optional column in <code>args</code>
giving the names of the targets. If not supplied,
target names will be generated automatically.
<code>id</code> should be a symbol if <code>character_only</code> is <code>FALSE</code>
and a character scalar otherwise.</p>
</td></tr>
<tr><td><code id="map_plan_+3A_character_only">character_only</code></td>
<td>
<p>Logical, whether to interpret
the <code>fun</code> and <code>id</code> arguments as character scalars or symbols.</p>
</td></tr>
<tr><td><code id="map_plan_+3A_trace">trace</code></td>
<td>
<p>Logical, whether to append the columns of <code>args</code>
to the output workflow plan data frame. The added columns
help &quot;trace back&quot; the original settings that went into building
each target. Similar to the <code>trace</code> argument of <code><a href="#topic+drake_plan">drake_plan()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>map_plan()</code> is like <code>base::Map()</code>:
it takes a function name and a grid of arguments, and
writes out all the commands calls to apply the function to
each row of arguments.
</p>


<h3>Value</h3>

<p>A workflow plan data frame.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code>
</p>

<hr>
<h2 id='max_useful_jobs'>max_useful_jobs <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+max_useful_jobs'></span>

<h3>Description</h3>

<p>2019-05-16
</p>


<h3>Usage</h3>

<pre><code class='language-R'>max_useful_jobs(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="max_useful_jobs_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='migrate_drake_project'>migrate_drake_project <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+migrate_drake_project'></span>

<h3>Description</h3>

<p>2019-05-16
</p>


<h3>Usage</h3>

<pre><code class='language-R'>migrate_drake_project(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="migrate_drake_project_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='missed'>Report any import objects required by your drake_plan
plan but missing from your workspace or file system.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+missed'></span>

<h3>Description</h3>

<p>Checks your workspace/environment and
file system.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>missed(..., config = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="missed_+3A_...">...</code></td>
<td>
<p>Arguments to <code><a href="#topic+make">make()</a></code>, such as <code>plan</code> and <code>targets</code>.</p>
</td></tr>
<tr><td><code id="missed_+3A_config">config</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character vector of names of missing objects and files.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+outdated">outdated()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
plan &lt;- drake_plan(x = missing::fun(arg))
missed(plan)
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='missed_impl'>Internal function with a drake_config() argument</h2><span id='topic+missed_impl'></span>

<h3>Description</h3>

<p>Not a user-side function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>missed_impl(config)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="missed_impl_+3A_config">config</code></td>
<td>
<p>A <code><a href="#topic+drake_config">drake_config()</a></code> object.</p>
</td></tr>
</table>

<hr>
<h2 id='new_cache'>Make a new <code>drake</code> cache. <a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+new_cache'></span>

<h3>Description</h3>

<p>Uses the <code><a href="storr.html#topic+storr_rds">storr_rds()</a></code> function
from the <code>storr</code> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_cache(
  path = NULL,
  verbose = NULL,
  type = NULL,
  hash_algorithm = NULL,
  short_hash_algo = NULL,
  long_hash_algo = NULL,
  ...,
  console_log_file = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="new_cache_+3A_path">path</code></td>
<td>
<p>File path to the cache if the cache
is a file system cache.</p>
</td></tr>
<tr><td><code id="new_cache_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
<tr><td><code id="new_cache_+3A_type">type</code></td>
<td>
<p>Deprecated argument. Once stood for cache type.
Use <code>storr</code> to customize your caches instead.</p>
</td></tr>
<tr><td><code id="new_cache_+3A_hash_algorithm">hash_algorithm</code></td>
<td>
<p>Name of a hash algorithm to use.
See the <code>algo</code> argument of the <code>digest</code> package for your options.</p>
</td></tr>
<tr><td><code id="new_cache_+3A_short_hash_algo">short_hash_algo</code></td>
<td>
<p>Deprecated on 2018-12-12.
Use <code>hash_algorithm</code> instead.</p>
</td></tr>
<tr><td><code id="new_cache_+3A_long_hash_algo">long_hash_algo</code></td>
<td>
<p>Deprecated on 2018-12-12.
Use <code>hash_algorithm</code> instead.</p>
</td></tr>
<tr><td><code id="new_cache_+3A_...">...</code></td>
<td>
<p>other arguments to the cache constructor.</p>
</td></tr>
<tr><td><code id="new_cache_+3A_console_log_file">console_log_file</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A newly created drake cache as a storr object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make">make()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine new_cache() side effects.", {
clean(destroy = TRUE) # Should not be necessary.
unlink("not_hidden", recursive = TRUE) # Should not be necessary.
cache1 &lt;- new_cache() # Creates a new hidden '.drake' folder.
cache2 &lt;- new_cache(path = "not_hidden", hash_algorithm = "md5")
clean(destroy = TRUE, cache = cache2)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='new_drake_deps'><code>drake_deps</code> constructor</h2><span id='topic+new_drake_deps'></span>

<h3>Description</h3>

<p>List of class <code>drake_deps</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_drake_deps(
  globals = character(0),
  namespaced = character(0),
  strings = character(0),
  loadd = character(0),
  readd = character(0),
  file_in = character(0),
  file_out = character(0),
  knitr_in = character(0)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="new_drake_deps_+3A_globals">globals</code></td>
<td>
<p>Global symbols found in the expression</p>
</td></tr>
<tr><td><code id="new_drake_deps_+3A_namespaced">namespaced</code></td>
<td>
<p>Namespaced objects, e.g. <code>rmarkdown::render</code>.</p>
</td></tr>
<tr><td><code id="new_drake_deps_+3A_strings">strings</code></td>
<td>
<p>Miscellaneous strings.</p>
</td></tr>
<tr><td><code id="new_drake_deps_+3A_loadd">loadd</code></td>
<td>
<p>Targets selected with <code><a href="#topic+loadd">loadd()</a></code>.</p>
</td></tr>
<tr><td><code id="new_drake_deps_+3A_readd">readd</code></td>
<td>
<p>Targets selected with <code><a href="#topic+readd">readd()</a></code>.</p>
</td></tr>
<tr><td><code id="new_drake_deps_+3A_file_in">file_in</code></td>
<td>
<p>Literal static file paths enclosed in <code><a href="#topic+file_in">file_in()</a></code>.</p>
</td></tr>
<tr><td><code id="new_drake_deps_+3A_file_out">file_out</code></td>
<td>
<p>Literal static file paths enclosed in <code><a href="#topic+file_out">file_out()</a></code>.</p>
</td></tr>
<tr><td><code id="new_drake_deps_+3A_knitr_in">knitr_in</code></td>
<td>
<p>Literal static file paths enclosed in <code><a href="#topic+knitr_in">knitr_in()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>drake_deps</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (FALSE) { # stronger than roxygen dontrun
new_drake_deps()
}
</code></pre>

<hr>
<h2 id='new_drake_deps_ht'><code>drake_deps_ht</code> constructor</h2><span id='topic+new_drake_deps_ht'></span>

<h3>Description</h3>

<p>List of class <code>drake_deps_ht</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_drake_deps_ht(
  globals = ht_new(hash = TRUE),
  namespaced = ht_new(hash = FALSE),
  strings = ht_new(hash = FALSE),
  loadd = ht_new(hash = FALSE),
  readd = ht_new(hash = FALSE),
  file_in = ht_new(hash = FALSE),
  file_out = ht_new(hash = FALSE),
  knitr_in = ht_new(hash = FALSE)
)
</code></pre>


<h3>Value</h3>

<p>A <code>drake_deps_ht</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (FALSE) { # stronger than roxygen dontrun
new_drake_deps_ht()
}
</code></pre>

<hr>
<h2 id='new_drake_settings'><code>drake_settings</code> constructor</h2><span id='topic+new_drake_settings'></span>

<h3>Description</h3>

<p>List of class <code>drake_settings</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_drake_settings(
  cache_log_file = NULL,
  curl_handles = NULL,
  garbage_collection = NULL,
  jobs = NULL,
  jobs_preprocess = NULL,
  keep_going = NULL,
  lazy_load = NULL,
  lib_loc = NULL,
  lock_envir = NULL,
  lock_cache = NULL,
  log_build_times = NULL,
  log_progress = NULL,
  memory_strategy = NULL,
  parallelism = NULL,
  recover = NULL,
  recoverable = NULL,
  seed = NULL,
  session_info = NULL,
  skip_imports = NULL,
  skip_safety_checks = NULL,
  skip_targets = NULL,
  sleep = NULL,
  template = NULL,
  log_worker = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="new_drake_settings_+3A_cache_log_file">cache_log_file</code></td>
<td>
<p>Name of the CSV cache log file to write.
If <code>TRUE</code>, the default file name is used (<code>drake_cache.CSV</code>).
If <code>NULL</code>, no file is written.
If activated, this option writes a flat text file
to represent the state of the cache
(fingerprints of all the targets and imports).
If you put the log file under version control, your commit history
will give you an easy representation of how your results change
over time as the rest of your project changes. Hopefully,
this is a step in the right direction for data reproducibility.</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_curl_handles">curl_handles</code></td>
<td>
<p>A named list of curl handles. Each value is an
object from <code>curl::new_handle()</code>, and each name is a URL
(and should start with &quot;http&quot;, &quot;https&quot;, or &quot;ftp&quot;).
Example:
list(
<code style="white-space: pre;">&#8288;http://httpbin.org/basic-auth&#8288;</code> = curl::new_handle(
username = &quot;user&quot;, password = &quot;passwd&quot;
)
)
Then, if your plan has
<code>file_in("http://httpbin.org/basic-auth/user/passwd")</code>
<code>drake</code> will authenticate using the username and password of the handle
for <code style="white-space: pre;">&#8288;http://httpbin.org/basic-auth/&#8288;</code>.
</p>
<p><code>drake</code> uses partial matching on text to
find the right handle of the <code>file_in()</code> URL, so the name of the handle
could be the complete URL (<code>"http://httpbin.org/basic-auth/user/passwd"</code>)
or a part of the URL (e.g. <code>"http://httpbin.org/"</code> or
<code>"http://httpbin.org/basic-auth/"</code>). If you have multiple handles
whose names match your URL, <code>drake</code> will choose the closest match.</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_garbage_collection">garbage_collection</code></td>
<td>
<p>Logical, whether to call <code>gc()</code> each time
a target is built during <code><a href="#topic+make">make()</a></code>.</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_jobs">jobs</code></td>
<td>
<p>Maximum number of parallel workers for processing the targets.
You can experiment with <code><a href="#topic+predict_runtime">predict_runtime()</a></code>
to help decide on an appropriate number of jobs.
For details, visit
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/time.html&#8288;</code>.</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_jobs_preprocess">jobs_preprocess</code></td>
<td>
<p>Number of parallel jobs for processing the imports
and doing other preprocessing tasks.</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_keep_going">keep_going</code></td>
<td>
<p>Logical, whether to still keep running <code><a href="#topic+make">make()</a></code>
if targets fail.</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_lazy_load">lazy_load</code></td>
<td>
<p>An old feature, currently being questioned.
For the current recommendations on memory management, see
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/memory.html#memory-strategies&#8288;</code>.
The <code>lazy_load</code> argument is either a character vector or a logical.
For dynamic targets, the behavior is always <code>"eager"</code> (see below).
So the <code>lazy_load</code> argument is for static targets only.
Choices for <code>lazy_load</code>:
</p>

<ul>
<li> <p><code>"eager"</code>: no lazy loading. The target is loaded right away
with <code><a href="base.html#topic+assign">assign()</a></code>.
</p>
</li>
<li> <p><code>"promise"</code>: lazy loading with <code><a href="base.html#topic+delayedAssign">delayedAssign()</a></code>
</p>
</li>
<li> <p><code>"bind"</code>: lazy loading with active bindings:
<code>bindr::populate_env()</code>.
</p>
</li>
<li> <p><code>TRUE</code>: same as <code>"promise"</code>.
</p>
</li>
<li> <p><code>FALSE</code>: same as <code>"eager"</code>.
</p>
</li></ul>

<p>If <code>lazy_load</code> is <code>"eager"</code>,
drake prunes the execution environment before each target/stage,
removing all superfluous targets
and then loading any dependencies it will need for building.
In other words, drake prepares the environment in advance
and tries to be memory efficient.
If <code>lazy_load</code> is <code>"bind"</code> or <code>"promise"</code>, drake assigns
promises to load any dependencies at the last minute.
Lazy loading may be more memory efficient in some use cases, but
it may duplicate the loading of dependencies, costing time.</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_lib_loc">lib_loc</code></td>
<td>
<p>Character vector, optional.
Same as in <code>library()</code> or <code>require()</code>.
Applies to the <code>packages</code> argument (see above).</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_lock_envir">lock_envir</code></td>
<td>
<p>Logical, whether to lock <code>config$envir</code> during <code>make()</code>.
If <code>TRUE</code>, <code>make()</code> quits in error whenever a command in your
<code>drake</code> plan (or <code>prework</code>) tries to add, remove, or modify
non-hidden variables in your environment/workspace/R session.
This is extremely important for ensuring the purity of your functions
and the reproducibility/credibility/trust you can place in your project.
<code>lock_envir</code> will be set to a default of <code>TRUE</code> in <code>drake</code> version
7.0.0 and higher. Namespaces are never locked, e.g.
if <code>envir</code> is <code>getNamespace("packagename")</code>.</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_lock_cache">lock_cache</code></td>
<td>
<p>Logical, whether to lock the cache before running <code>make()</code>
etc. It is usually recommended to keep cache locking on.
However, if you interrupt <code>make()</code> before it can clean itself up,
then the cache will stay locked,
and you will need to manually unlock it with
<code>drake::drake_cache("xyz")$unlock()</code>. Repeatedly unlocking the cache
by hand is annoying, and <code>lock_cache = FALSE</code> prevents the cache
from locking in the first place.</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_log_build_times">log_build_times</code></td>
<td>
<p>Logical, whether to record build_times for targets.
Mac users may notice a 20% speedup in <code>make()</code>
with <code>build_times = FALSE</code>.</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_log_progress">log_progress</code></td>
<td>
<p>Logical, whether to log the progress
of individual targets as they are being built. Progress logging
creates extra files in the cache (usually the <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder)
and slows down <code>make()</code> a little.
If you need to reduce or limit the number of files in the cache,
call <code>make(log_progress = FALSE, recover = FALSE)</code>.</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_memory_strategy">memory_strategy</code></td>
<td>
<p>Character scalar, name of the
strategy <code>drake</code> uses to load/unload a target's dependencies in memory.
You can give each target its own memory strategy,
(e.g. <code>drake_plan(x = 1, y = target(f(x), memory_strategy = "lookahead"))</code>)
to override the global memory strategy. Choices:
</p>

<ul>
<li> <p><code>"speed"</code>: Once a target is newly built or loaded in memory,
just keep it there.
This choice maximizes speed and hogs memory.
</p>
</li>
<li> <p><code>"autoclean"</code>: Just before building each new target,
unload everything from memory except the target's direct dependencies.
After a target is built, discard it from memory.
(Set <code>garbage_collection = TRUE</code> to make sure it is really gone.)
This option conserves memory, but it sacrifices speed because
each new target needs to reload
any previously unloaded targets from storage.
</p>
</li>
<li> <p><code>"preclean"</code>: Just before building each new target,
unload everything from memory except the target's direct dependencies.
After a target is built, keep it in memory until <code>drake</code> determines
they can be unloaded.
This option conserves memory, but it sacrifices speed because
each new target needs to reload
any previously unloaded targets from storage.
</p>
</li>
<li> <p><code>"lookahead"</code>: Just before building each new target,
search the dependency graph to find targets that will not be
needed for the rest of the current <code>make()</code> session.
After a target is built, keep it in memory until the next
memory management stage.
In this mode, targets are only in memory if they need to be loaded,
and we avoid superfluous reads from the cache.
However, searching the graph takes time,
and it could even double the computational overhead for large projects.
</p>
</li>
<li> <p><code>"unload"</code>: Just before building each new target,
unload all targets from memory.
After a target is built, <strong>do not</strong> keep it in memory.
This mode aggressively optimizes for both memory and speed,
but in commands and triggers,
you have to manually load any dependencies you need using <code>readd()</code>.
</p>
</li>
<li> <p><code>"none"</code>: Do not manage memory at all.
Do not load or unload anything before building targets.
After a target is built, <strong>do not</strong> keep it in memory.
This mode aggressively optimizes for both memory and speed,
but in commands and triggers,
you have to manually load any dependencies you need using <code>readd()</code>.
</p>
</li></ul>

<p>For even more direct
control over which targets <code>drake</code> keeps in memory, see the
help file examples of <code><a href="#topic+drake_envir">drake_envir()</a></code>.
Also see the <code>garbage_collection</code> argument of <code>make()</code> and
<code>drake_config()</code>.</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_parallelism">parallelism</code></td>
<td>
<p>Character scalar, type of parallelism to use.
For detailed explanations, see
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/hpc.html&#8288;</code>.
</p>
<p>You could also supply your own scheduler function
if you want to experiment or aggressively optimize.
The function should take a single <code>config</code> argument
(produced by <code><a href="#topic+drake_config">drake_config()</a></code>). Existing examples
from <code>drake</code>'s internals are the <code style="white-space: pre;">&#8288;backend_*()&#8288;</code> functions:
</p>

<ul>
<li> <p><code>backend_loop()</code>
</p>
</li>
<li> <p><code>backend_clustermq()</code>
</p>
</li>
<li> <p><code>backend_future()</code>
However, this functionality is really a back door
and should not be used for production purposes unless you really
know what you are doing and you are willing to suffer setbacks
whenever <code>drake</code>'s unexported core functions are updated.
</p>
</li></ul>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_recover">recover</code></td>
<td>
<p>Logical, whether to activate automated data recovery.
The default is <code>FALSE</code> because
</p>

<ol>
<li><p> Automated data recovery is still stable.
</p>
</li>
<li><p> It has reproducibility issues.
Targets recovered from the distant past may have been generated
with earlier versions of R and earlier package environments
that no longer exist.
</p>
</li>
<li><p> It is not always possible, especially when dynamic files
are combined with dynamic branching
(e.g. <code>dynamic = map(stuff)</code> and <code>format = "file"</code> etc.)
since behavior is harder to predict in advance.
</p>
</li></ol>

<p>How it works: if <code>recover</code> is <code>TRUE</code>,
<code>drake</code> tries to salvage old target values from the cache
instead of running commands from the plan.
A target is recoverable if
</p>

<ol>
<li><p> There is an old value somewhere in the cache that
shares the command, dependencies, etc.
of the target about to be built.
</p>
</li>
<li><p> The old value was generated with <code>make(recoverable = TRUE)</code>.
</p>
</li></ol>

<p>If both conditions are met, <code>drake</code> will
</p>

<ol>
<li><p> Assign the most recently-generated admissible data to the target, and
</p>
</li>
<li><p> skip the target's command.
</p>
</li></ol>

<p>Functions <code><a href="#topic+recoverable">recoverable()</a></code> and <code><a href="#topic+r_recoverable">r_recoverable()</a></code> show the most upstream
outdated targets that will be recovered in this way in the next
<code><a href="#topic+make">make()</a></code> or <code><a href="#topic+r_make">r_make()</a></code>.</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_recoverable">recoverable</code></td>
<td>
<p>Logical, whether to make target values recoverable
with <code>make(recover = TRUE)</code>.
This requires writing extra files to the cache,
and it prevents old metadata from being removed with garbage collection
(<code>clean(garbage_collection = TRUE)</code>, <code>gc()</code> in <code>storr</code>s).
If you need to limit the cache size or the number of files in the cache,
consider <code>make(recoverable = FALSE, progress = FALSE)</code>.
Recovery is not always possible, especially when dynamic files
are combined with dynamic branching
(e.g. <code>dynamic = map(stuff)</code> and <code>format = "file"</code> etc.)
since behavior is harder to predict in advance.</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_seed">seed</code></td>
<td>
<p>Integer, the root pseudo-random number generator
seed to use for your project.
In <code><a href="#topic+make">make()</a></code>, <code>drake</code> generates a unique
local seed for each target using the global seed
and the target name. That way, different pseudo-random numbers
are generated for different targets, and this pseudo-randomness
is reproducible.
</p>
<p>To ensure reproducibility across different R sessions,
<code>set.seed()</code> and <code>.Random.seed</code> are ignored and have no affect on
<code>drake</code> workflows. Conversely, <code>make()</code> does not usually
change <code>.Random.seed</code>,
even when pseudo-random numbers are generated.
The exception to this last point is
<code>make(parallelism = "clustermq")</code>
because the <code>clustermq</code> package needs to generate random numbers
to set up ports and sockets for ZeroMQ.
</p>
<p>On the first call to <code>make()</code> or <code>drake_config()</code>, <code>drake</code>
uses the random number generator seed from the <code>seed</code> argument.
Here, if the <code>seed</code> is <code>NULL</code> (default), <code>drake</code> uses a <code>seed</code> of <code>0</code>.
On subsequent <code>make()</code>s for existing projects, the project's
cached seed will be used in order to ensure reproducibility.
Thus, the <code>seed</code> argument must either be <code>NULL</code> or the same
seed from the project's cache (usually the <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder).
To reset the random number generator seed for a project,
use <code>clean(destroy = TRUE)</code>.</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_session_info">session_info</code></td>
<td>
<p>Logical, whether to save the <code>sessionInfo()</code>
to the cache. Defaults to <code>TRUE</code>.
This behavior is recommended for serious <code><a href="#topic+make">make()</a></code>s
for the sake of reproducibility. This argument only exists to
speed up tests. Apparently, <code>sessionInfo()</code> is a bottleneck
for small <code><a href="#topic+make">make()</a></code>s.</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_skip_imports">skip_imports</code></td>
<td>
<p>Logical, whether to totally neglect to
process the imports and jump straight to the targets. This can be useful
if your imports are massive and you just want to test your project,
but it is bad practice for reproducible data analysis.
This argument is overridden if you supply your own <code>graph</code> argument.</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_skip_safety_checks">skip_safety_checks</code></td>
<td>
<p>Logical, whether to skip the safety checks
on your workflow. Use at your own peril.</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_skip_targets">skip_targets</code></td>
<td>
<p>Logical, whether to skip building the targets
in <code>plan</code> and just import objects and files.</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_sleep">sleep</code></td>
<td>
<p>Optional function on a single numeric argument <code>i</code>.
Default: <code>function(i) 0.01</code>.
</p>
<p>To conserve memory, <code>drake</code> assigns a brand new closure to
<code>sleep</code>, so your custom function should not depend on in-memory data
except from loaded packages.
</p>
<p>For parallel processing, <code>drake</code> uses
a central main process to check what the parallel
workers are doing, and for the affected high-performance
computing workflows, wait for data to arrive over a network.
In between loop iterations, the main process sleeps to avoid throttling.
The <code>sleep</code> argument to <code>make()</code> and <code>drake_config()</code>
allows you to customize how much time the main process spends
sleeping.
</p>
<p>The <code>sleep</code> argument is a function that takes an argument
<code>i</code> and returns a numeric scalar, the number of seconds to
supply to <code>Sys.sleep()</code> after iteration <code>i</code> of checking.
(Here, <code>i</code> starts at 1.)
If the checking loop does something other than sleeping
on iteration <code>i</code>, then <code>i</code> is reset back to 1.
</p>
<p>To sleep for the same amount of time between checks,
you might supply something like <code>function(i) 0.01</code>.
But to avoid consuming too many resources during heavier
and longer workflows, you might use an exponential
back-off: say,
<code>function(i) { 0.1 + 120 * pexp(i - 1, rate = 0.01) }</code>.</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_template">template</code></td>
<td>
<p>A named list of values to fill in the <code>{{ ... }}</code>
placeholders in template files (e.g. from <code><a href="#topic+drake_hpc_template_file">drake_hpc_template_file()</a></code>).
Same as the <code>template</code> argument of <code>clustermq::Q()</code> and
<code>clustermq::workers</code>.
Enabled for <code>clustermq</code> only (<code>make(parallelism = "clustermq")</code>),
not <code>future</code> or <code>batchtools</code> so far.
For more information, see the <code>clustermq</code> package:
<code style="white-space: pre;">&#8288;https://github.com/mschubert/clustermq&#8288;</code>.
Some template placeholders such as <code>{{ job_name }}</code> and <code>{{ n_jobs }}</code>
cannot be set this way.</p>
</td></tr>
<tr><td><code id="new_drake_settings_+3A_log_worker">log_worker</code></td>
<td>
<p>Logical, same as the <code>log_worker</code> argument of
<code>clustermq::workers()</code> and <code>clustermq::Q()</code>. Only relevant
if <code>parallelism</code> is <code>"clustermq"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>drake_settings</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (FALSE) { # stronger than roxygen dontrun
new_drake_settings()
}
</code></pre>

<hr>
<h2 id='new_drake_triggers'><code>drake_triggers</code> constructor</h2><span id='topic+new_drake_triggers'></span>

<h3>Description</h3>

<p>List of class <code>drake_triggers</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_drake_triggers(
  command = TRUE,
  depend = TRUE,
  file = TRUE,
  seed = TRUE,
  format = TRUE,
  condition = FALSE,
  change = NULL,
  mode = "whitelist"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="new_drake_triggers_+3A_command">command</code></td>
<td>
<p>Logical, command trigger.</p>
</td></tr>
<tr><td><code id="new_drake_triggers_+3A_depend">depend</code></td>
<td>
<p>Logical, depend trigger.</p>
</td></tr>
<tr><td><code id="new_drake_triggers_+3A_file">file</code></td>
<td>
<p>Logical, file trigger.</p>
</td></tr>
<tr><td><code id="new_drake_triggers_+3A_seed">seed</code></td>
<td>
<p>Logical, seed trigger.</p>
</td></tr>
<tr><td><code id="new_drake_triggers_+3A_format">format</code></td>
<td>
<p>Logical, format trigger.</p>
</td></tr>
<tr><td><code id="new_drake_triggers_+3A_condition">condition</code></td>
<td>
<p>Language object or object coercible to logical,
condition trigger.</p>
</td></tr>
<tr><td><code id="new_drake_triggers_+3A_change">change</code></td>
<td>
<p>Language object or literal value, change trigger.</p>
</td></tr>
<tr><td><code id="new_drake_triggers_+3A_mode">mode</code></td>
<td>
<p>Character, mode of condition trigger.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>drake_triggers</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (FALSE) { # stronger than roxygen dontrun
new_drake_triggers()
}
</code></pre>

<hr>
<h2 id='no_deps'>Suppress dependency detection.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+no_deps'></span>

<h3>Description</h3>

<p>Tell <code>drake</code> to not search for dependencies in a chunk of code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>no_deps(x = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="no_deps_+3A_x">x</code></td>
<td>
<p>Code for which dependency detection is suppressed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>no_deps()</code> is similar to <code><a href="#topic+ignore">ignore()</a></code>, but it still lets <code>drake</code>
track meaningful changes to the code itself.
</p>


<h3>Value</h3>

<p>The argument.
</p>


<h3>Keywords</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code> understands special keyword functions for your commands.
With the exception of <code><a href="#topic+target">target()</a></code>, each one is a proper function
with its own help file.
</p>

<ul>
<li> <p><code><a href="#topic+target">target()</a></code>: give the target more than just a command.
Using <code><a href="#topic+target">target()</a></code>, you can apply a transformation
(examples: <code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>), # nolint
supply a trigger (<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/triggers.html&#8288;</code>), # nolint
or set any number of custom columns.
</p>
</li>
<li> <p><code><a href="#topic+file_in">file_in()</a></code>: declare an input file dependency.
</p>
</li>
<li> <p><code><a href="#topic+file_out">file_out()</a></code>: declare an output file to be produced
when the target is built.
</p>
</li>
<li> <p><code><a href="#topic+knitr_in">knitr_in()</a></code>: declare a <code>knitr</code> file dependency such as an
R Markdown (<code style="white-space: pre;">&#8288;*.Rmd&#8288;</code>) or R LaTeX (<code style="white-space: pre;">&#8288;*.Rnw&#8288;</code>) file.
</p>
</li>
<li> <p><code><a href="#topic+ignore">ignore()</a></code>: force <code>drake</code> to entirely ignore a piece of code:
do not track it for changes and do not analyze it for dependencies.
</p>
</li>
<li> <p><code><a href="#topic+no_deps">no_deps()</a></code>: tell <code>drake</code> to not track the dependencies
of a piece of code. <code>drake</code> still tracks the code itself for changes.
</p>
</li>
<li> <p><code><a href="#topic+id_chr">id_chr()</a></code>: Get the name of the current target.
</p>
</li>
<li> <p><code><a href="#topic+drake_envir">drake_envir()</a></code>: get the environment where drake builds targets.
Intended for advanced custom memory management.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+file_in">file_in()</a></code>, <code><a href="#topic+file_out">file_out()</a></code>, <code><a href="#topic+knitr_in">knitr_in()</a></code>, <code><a href="#topic+no_deps">no_deps()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Contain side effects", {
# Normally, `drake` reacts to changes in dependencies.
x &lt;- 4
make(plan = drake_plan(y = sqrt(x)))
x &lt;- 5
make(plan = drake_plan(y = sqrt(x)))
make(plan = drake_plan(y = sqrt(4) + x))
# But not with no_deps().
make(plan = drake_plan(y = sqrt(4) + no_deps(x))) # Builds y.
x &lt;- 6
make(plan = drake_plan(y = sqrt(4) + no_deps(x))) # Skips y.
# However, `drake` *does* react to changes
# to the *literal code* inside `no_deps()`.
make(plan = drake_plan(y = sqrt(4) + ignore(x + 1))) # Builds y.

# Like ignore(), no_deps() works with functions and multiline code chunks.
z &lt;- 1
f &lt;- function(x) {
  no_deps({
    x &lt;- z + 1
    x &lt;- x + 2
  })
  x
}
make(plan = drake_plan(y = f(2)))
readd(y)
z &lt;- 2 # Changed dependency is not tracked.
make(plan = drake_plan(y = f(2)))
readd(y)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='outdated'>List the targets that are out of date.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+outdated'></span>

<h3>Description</h3>

<p>Outdated targets will be rebuilt in the next
<code><a href="#topic+make">make()</a></code>. <code>outdated()</code> does not show dynamic sub-targets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>outdated(..., make_imports = TRUE, do_prework = TRUE, config = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="outdated_+3A_...">...</code></td>
<td>
<p>Arguments to <code><a href="#topic+make">make()</a></code>, such as <code>plan</code> and <code>targets</code> and <code>envir</code>.</p>
</td></tr>
<tr><td><code id="outdated_+3A_make_imports">make_imports</code></td>
<td>
<p>Logical, whether to make the imports first.
Set to <code>FALSE</code> to save some time and risk obsolete output.</p>
</td></tr>
<tr><td><code id="outdated_+3A_do_prework">do_prework</code></td>
<td>
<p>Whether to do the <code>prework</code>
normally supplied to <code><a href="#topic+make">make()</a></code>.</p>
</td></tr>
<tr><td><code id="outdated_+3A_config">config</code></td>
<td>
<p>Deprecated (2019-12-21).
A configured workflow from <code><a href="#topic+drake_config">drake_config()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character vector of the names of outdated targets.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+r_outdated">r_outdated()</a></code>, <code><a href="#topic+drake_config">drake_config()</a></code>, <code><a href="#topic+missed">missed()</a></code>, <code><a href="#topic+drake_plan">drake_plan()</a></code>,
<code><a href="#topic+make">make()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
# Recopute the config list early and often to have the
# most current information. Do not modify the config list by hand.
outdated(my_plan) # Which targets are out of date?
make(my_plan) # Run the projects, build the targets.
# Now, everything should be up to date (no targets listed).
outdated(my_plan)
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='outdated_impl'>Internal function with a drake_config() argument</h2><span id='topic+outdated_impl'></span>

<h3>Description</h3>

<p>Not a user-side function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>outdated_impl(config, make_imports = TRUE, do_prework = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="outdated_impl_+3A_config">config</code></td>
<td>
<p>A <code><a href="#topic+drake_config">drake_config()</a></code> object.</p>
</td></tr>
<tr><td><code id="outdated_impl_+3A_make_imports">make_imports</code></td>
<td>
<p>Logical, whether to make the imports first.
Set to <code>FALSE</code> to save some time and risk obsolete output.</p>
</td></tr>
<tr><td><code id="outdated_impl_+3A_do_prework">do_prework</code></td>
<td>
<p>Whether to do the <code>prework</code>
normally supplied to <code><a href="#topic+make">make()</a></code>.</p>
</td></tr>
</table>

<hr>
<h2 id='parallel_stages'>parallel_stages <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+parallel_stages'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parallel_stages(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parallel_stages_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='parallelism_choices'>Names of old parallel backends
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+parallelism_choices'></span>

<h3>Description</h3>

<p>2019-01-03
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parallelism_choices(distributed_only = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parallelism_choices_+3A_distributed_only">distributed_only</code></td>
<td>
<p>Logical.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character vector
</p>

<hr>
<h2 id='plan'>plan <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+plan'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plan(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plan_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='plan_analyses'>Specialized wildcard for analyses
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+plan_analyses'></span>

<h3>Description</h3>

<p>Use <code><a href="#topic+drake_plan">drake_plan()</a></code> instead.
See <code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>
for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plan_analyses(plan, datasets, sep = "_")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plan_analyses_+3A_plan">plan</code></td>
<td>
<p>Workflow plan data frame of analysis methods.
The commands in the <code>command</code> column must
have the <code>dataset__</code> wildcard where the datasets go.
For example, one command could be <code>lm(dataset__)</code>. Then,
the commands in the output will include <code>lm(your_dataset_1)</code>,
<code>lm(your_dataset_2)</code>, etc.</p>
</td></tr>
<tr><td><code id="plan_analyses_+3A_datasets">datasets</code></td>
<td>
<p>Workflow plan data frame with instructions
to make the datasets.</p>
</td></tr>
<tr><td><code id="plan_analyses_+3A_sep">sep</code></td>
<td>
<p>character Scalar, delimiter for creating
the names of new targets.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>2019-01-13
</p>


<h3>Value</h3>

<p>An evaluated workflow plan data frame of analysis targets.
</p>

<hr>
<h2 id='plan_drake'>plan_drake <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+plan_drake'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plan_drake(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plan_drake_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='plan_summaries'>Specialized wildcard for summaries
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+plan_summaries'></span>

<h3>Description</h3>

<p>Use <code><a href="#topic+drake_plan">drake_plan()</a></code> with transformations instead. See
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>
for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plan_summaries(
  plan,
  analyses,
  datasets,
  gather = rep("list", nrow(plan)),
  sep = "_"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plan_summaries_+3A_plan">plan</code></td>
<td>
<p>Workflow plan data frame with commands for the summaries.
Use the <code>analysis__</code> and <code>dataset__</code> wildcards
just like the <code>dataset__</code> wildcard in <code><a href="#topic+plan_analyses">plan_analyses()</a></code>.</p>
</td></tr>
<tr><td><code id="plan_summaries_+3A_analyses">analyses</code></td>
<td>
<p>Workflow plan data frame of analysis instructions.</p>
</td></tr>
<tr><td><code id="plan_summaries_+3A_datasets">datasets</code></td>
<td>
<p>Workflow plan data frame with instructions to make
or import the datasets.</p>
</td></tr>
<tr><td><code id="plan_summaries_+3A_gather">gather</code></td>
<td>
<p>Character vector, names of functions to gather the
summaries. If not <code>NULL</code>, the length must be the number of
rows in the <code>plan</code>. See the <code><a href="#topic+gather_plan">gather_plan()</a></code> function
for more.</p>
</td></tr>
<tr><td><code id="plan_summaries_+3A_sep">sep</code></td>
<td>
<p>Character scalar, delimiter for creating the
new target names.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>2019-01-13
</p>


<h3>Value</h3>

<p>An evaluated workflow plan data frame of instructions
for computing summaries of analyses and datasets.
analyses of multiple datasets in multiple ways.
</p>

<hr>
<h2 id='plan_to_code'>Turn a <code>drake</code> plan into a plain R script file.
<a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a></h2><span id='topic+plan_to_code'></span>

<h3>Description</h3>

<p><code>code_to_plan()</code>, <code><a href="#topic+plan_to_code">plan_to_code()</a></code>, and
<code><a href="#topic+plan_to_notebook">plan_to_notebook()</a></code> together illustrate the relationships
between <code>drake</code> plans, R scripts, and R Markdown documents.
In the file generated by <code>plan_to_code()</code>, every target/command pair
becomes a chunk of code.
Targets are arranged in topological order
so dependencies are available before their downstream targets.
Please note:
</p>

<ol>
<li><p> You are still responsible for loading your project's
packages, imported functions, etc.
</p>
</li>
<li><p> Triggers disappear.
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>plan_to_code(plan, con = stdout())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plan_to_code_+3A_plan">plan</code></td>
<td>
<p>Workflow plan data frame. See <code><a href="#topic+drake_plan">drake_plan()</a></code>
for details.</p>
</td></tr>
<tr><td><code id="plan_to_code_+3A_con">con</code></td>
<td>
<p>A file path or connection to write to.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code>, <code><a href="#topic+make">make()</a></code>, <code><a href="#topic+code_to_plan">code_to_plan()</a></code>,
<code><a href="#topic+plan_to_notebook">plan_to_notebook()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plan &lt;- drake_plan(
  raw_data = read_excel(file_in("raw_data.xlsx")),
  data = raw_data,
  hist = create_plot(data),
  fit = lm(Ozone ~ Temp + Wind, data)
)
file &lt;- tempfile()
# Turn the plan into an R script a the given file path.
plan_to_code(plan, file)
# Here is what the script looks like.
cat(readLines(file), sep = "\n")
# Convert back to a drake plan.
code_to_plan(file)
</code></pre>

<hr>
<h2 id='plan_to_notebook'>Turn a <code>drake</code> plan into an R notebook.
<a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a></h2><span id='topic+plan_to_notebook'></span>

<h3>Description</h3>

<p><code>code_to_plan()</code>, <code><a href="#topic+plan_to_code">plan_to_code()</a></code>, and
<code><a href="#topic+plan_to_notebook">plan_to_notebook()</a></code> together illustrate the relationships
between <code>drake</code> plans, R scripts, and R Markdown documents.
In the file generated by <code>plan_to_code()</code>, every target/command pair
becomes a chunk of code.
Targets are arranged in topological order
so dependencies are available before their downstream targets.
Please note:
</p>

<ol>
<li><p> You are still responsible for loading your project's
packages, imported functions, etc.
</p>
</li>
<li><p> Triggers disappear.
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>plan_to_notebook(plan, con)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plan_to_notebook_+3A_plan">plan</code></td>
<td>
<p>Workflow plan data frame. See <code><a href="#topic+drake_plan">drake_plan()</a></code>
for details.</p>
</td></tr>
<tr><td><code id="plan_to_notebook_+3A_con">con</code></td>
<td>
<p>A file path or connection to write to.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code>, <code><a href="#topic+make">make()</a></code>, <code><a href="#topic+code_to_plan">code_to_plan()</a></code>,
<code><a href="#topic+plan_to_code">plan_to_code()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (suppressWarnings(require("knitr"))) {
plan &lt;- drake_plan(
  raw_data = read_excel(file_in("raw_data.xlsx")),
  data = raw_data,
  hist = create_plot(data),
  fit = lm(Ozone ~ Temp + Wind, data)
)
file &lt;- tempfile()
# Turn the plan into an R notebook a the given file path.
plan_to_notebook(plan, file)
# Here is what the script looks like.
cat(readLines(file), sep = "\n")
# Convert back to a drake plan.
code_to_plan(file)
}
</code></pre>

<hr>
<h2 id='plot_graph'>plot_graph <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+plot_graph'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_graph(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_graph_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='predict_load_balancing'>Predict parallel computing behavior
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+predict_load_balancing'></span>

<h3>Description</h3>

<p>Deprecated on 2019-02-14.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predict_load_balancing(
  config,
  targets = NULL,
  from_scratch = FALSE,
  targets_only = NULL,
  jobs = 1,
  known_times = numeric(0),
  default_time = 0,
  warn = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict_load_balancing_+3A_config">config</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="predict_load_balancing_+3A_from_scratch">from_scratch</code></td>
<td>
<p>Logical, whether to predict a
<code><a href="#topic+make">make()</a></code> build from scratch or to
take into account the fact that some targets may be
already up to date and therefore skipped.</p>
</td></tr>
<tr><td><code id="predict_load_balancing_+3A_targets_only">targets_only</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="predict_load_balancing_+3A_known_times">known_times</code></td>
<td>
<p>A named numeric vector with targets/imports
as names and values as hypothetical runtimes in seconds.
Use this argument to overwrite any of the existing build times
or the <code>default_time</code>.</p>
</td></tr>
<tr><td><code id="predict_load_balancing_+3A_default_time">default_time</code></td>
<td>
<p>Number of seconds to assume for any
target or import with no recorded runtime (from <code><a href="#topic+build_times">build_times()</a></code>)
or anything in <code>known_times</code>.</p>
</td></tr>
<tr><td><code id="predict_load_balancing_+3A_warn">warn</code></td>
<td>
<p>Logical, whether to warn the user about
any targets with no available runtime, either in
<code>known_times</code> or <code><a href="#topic+build_times">build_times()</a></code>. The times for these
targets default to <code>default_time</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame showing one likely arrangement
of targets assigned to parallel workers.
</p>

<hr>
<h2 id='predict_runtime'>Predict the elapsed runtime of the next call to <code>make()</code>
for non-staged parallel backends.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+predict_runtime'></span>

<h3>Description</h3>

<p>Take the past recorded runtimes times from
<code><a href="#topic+build_times">build_times()</a></code> and use them to predict how the targets
will be distributed among the available workers in the
next <code><a href="#topic+make">make()</a></code>. Then, predict the overall runtime to be the
runtime of the slowest (busiest) workers.
Predictions only include the time it takes to run the targets,
not overhead/preprocessing from <code>drake</code> itself.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predict_runtime(
  ...,
  targets_predict = NULL,
  from_scratch = FALSE,
  targets_only = NULL,
  jobs_predict = 1L,
  known_times = numeric(0),
  default_time = 0,
  warn = TRUE,
  config = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict_runtime_+3A_...">...</code></td>
<td>
<p>Arguments to <code><a href="#topic+make">make()</a></code>, such as <code>plan</code> and <code>targets</code>.</p>
</td></tr>
<tr><td><code id="predict_runtime_+3A_targets_predict">targets_predict</code></td>
<td>
<p>Character vector, names of targets
to include in the total runtime and worker predictions.</p>
</td></tr>
<tr><td><code id="predict_runtime_+3A_from_scratch">from_scratch</code></td>
<td>
<p>Logical, whether to predict a
<code><a href="#topic+make">make()</a></code> build from scratch or to
take into account the fact that some targets may be
already up to date and therefore skipped.</p>
</td></tr>
<tr><td><code id="predict_runtime_+3A_targets_only">targets_only</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="predict_runtime_+3A_jobs_predict">jobs_predict</code></td>
<td>
<p>The <code>jobs</code> argument of your next planned
<code>make()</code>.</p>
</td></tr>
<tr><td><code id="predict_runtime_+3A_known_times">known_times</code></td>
<td>
<p>A named numeric vector with targets/imports
as names and values as hypothetical runtimes in seconds.
Use this argument to overwrite any of the existing build times
or the <code>default_time</code>.</p>
</td></tr>
<tr><td><code id="predict_runtime_+3A_default_time">default_time</code></td>
<td>
<p>Number of seconds to assume for any
target or import with no recorded runtime (from <code><a href="#topic+build_times">build_times()</a></code>)
or anything in <code>known_times</code>.</p>
</td></tr>
<tr><td><code id="predict_runtime_+3A_warn">warn</code></td>
<td>
<p>Logical, whether to warn the user about
any targets with no available runtime, either in
<code>known_times</code> or <code><a href="#topic+build_times">build_times()</a></code>. The times for these
targets default to <code>default_time</code>.</p>
</td></tr>
<tr><td><code id="predict_runtime_+3A_config">config</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Predicted total runtime of the next call to <code><a href="#topic+make">make()</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+predict_workers">predict_workers()</a></code>, <code><a href="#topic+build_times">build_times()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
make(my_plan) # Run the project, build the targets.
known_times &lt;- rep(7200, nrow(my_plan))
names(known_times) &lt;- my_plan$target
known_times
# Predict the runtime
if (requireNamespace("lubridate", quietly = TRUE)) {
predict_runtime(
  my_plan,
  jobs_predict = 7L,
  from_scratch = TRUE,
  known_times = known_times
)
predict_runtime(
  my_plan,
  jobs_predict = 8L,
  from_scratch = TRUE,
  known_times = known_times
)
balance &lt;- predict_workers(
  my_plan,
  jobs_predict = 7L,
  from_scratch = TRUE,
  known_times = known_times
)
balance
}
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='predict_runtime_impl'>Internal function with a drake_config() argument</h2><span id='topic+predict_runtime_impl'></span>

<h3>Description</h3>

<p>Not a user-side function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predict_runtime_impl(
  config,
  targets_predict = NULL,
  from_scratch = FALSE,
  targets_only = NULL,
  jobs_predict = 1L,
  known_times = numeric(0),
  default_time = 0,
  warn = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict_runtime_impl_+3A_config">config</code></td>
<td>
<p>A <code><a href="#topic+drake_config">drake_config()</a></code> object.</p>
</td></tr>
</table>

<hr>
<h2 id='predict_workers'>Predict the load balancing of the next call to <code>make()</code>
for non-staged parallel backends.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+predict_workers'></span>

<h3>Description</h3>

<p>Take the past recorded runtimes times from
<code><a href="#topic+build_times">build_times()</a></code> and use them to predict how the targets
will be distributed among the available workers in the
next <code><a href="#topic+make">make()</a></code>.
Predictions only include the time it takes to run the targets,
not overhead/preprocessing from <code>drake</code> itself.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predict_workers(
  ...,
  targets_predict = NULL,
  from_scratch = FALSE,
  targets_only = NULL,
  jobs_predict = 1L,
  known_times = numeric(0),
  default_time = 0,
  warn = TRUE,
  config = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict_workers_+3A_...">...</code></td>
<td>
<p>Arguments to <code><a href="#topic+make">make()</a></code>, such as <code>plan</code> and <code>targets</code>.</p>
</td></tr>
<tr><td><code id="predict_workers_+3A_targets_predict">targets_predict</code></td>
<td>
<p>Character vector, names of targets
to include in the total runtime and worker predictions.</p>
</td></tr>
<tr><td><code id="predict_workers_+3A_from_scratch">from_scratch</code></td>
<td>
<p>Logical, whether to predict a
<code><a href="#topic+make">make()</a></code> build from scratch or to
take into account the fact that some targets may be
already up to date and therefore skipped.</p>
</td></tr>
<tr><td><code id="predict_workers_+3A_targets_only">targets_only</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="predict_workers_+3A_jobs_predict">jobs_predict</code></td>
<td>
<p>The <code>jobs</code> argument of your next planned
<code>make()</code>.</p>
</td></tr>
<tr><td><code id="predict_workers_+3A_known_times">known_times</code></td>
<td>
<p>A named numeric vector with targets/imports
as names and values as hypothetical runtimes in seconds.
Use this argument to overwrite any of the existing build times
or the <code>default_time</code>.</p>
</td></tr>
<tr><td><code id="predict_workers_+3A_default_time">default_time</code></td>
<td>
<p>Number of seconds to assume for any
target or import with no recorded runtime (from <code><a href="#topic+build_times">build_times()</a></code>)
or anything in <code>known_times</code>.</p>
</td></tr>
<tr><td><code id="predict_workers_+3A_warn">warn</code></td>
<td>
<p>Logical, whether to warn the user about
any targets with no available runtime, either in
<code>known_times</code> or <code><a href="#topic+build_times">build_times()</a></code>. The times for these
targets default to <code>default_time</code>.</p>
</td></tr>
<tr><td><code id="predict_workers_+3A_config">config</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame showing one likely arrangement
of targets assigned to parallel workers.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+predict_runtime">predict_runtime()</a></code>, <code><a href="#topic+build_times">build_times()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
make(my_plan) # Run the project, build the targets.
known_times &lt;- rep(7200, nrow(my_plan))
names(known_times) &lt;- my_plan$target
known_times
# Predict the runtime
if (requireNamespace("lubridate", quietly = TRUE)) {
predict_runtime(
  my_plan,
  jobs_predict = 7L,
  from_scratch = TRUE,
  known_times = known_times
)
predict_runtime(
  my_plan,
  jobs_predict = 8L,
  from_scratch = TRUE,
  known_times = known_times
)
balance &lt;- predict_workers(
  my_plan,
  jobs_predict = 7L,
  from_scratch = TRUE,
  known_times = known_times
)
balance
}
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='predict_workers_impl'>Internal function with a drake_config() argument</h2><span id='topic+predict_workers_impl'></span>

<h3>Description</h3>

<p>Not a user-side function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predict_workers_impl(
  config,
  targets_predict = NULL,
  from_scratch = FALSE,
  targets_only = NULL,
  jobs_predict = 1,
  known_times = numeric(0),
  default_time = 0,
  warn = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict_workers_impl_+3A_config">config</code></td>
<td>
<p>A <code><a href="#topic+drake_config">drake_config()</a></code> object.</p>
</td></tr>
</table>

<hr>
<h2 id='process_import'>Process an imported data object
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+process_import'></span>

<h3>Description</h3>

<p>For internal use only. Not a user-side function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>process_import(import, config)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="process_import_+3A_import">import</code></td>
<td>
<p>Character, name of an import to process</p>
</td></tr>
<tr><td><code id="process_import_+3A_config">config</code></td>
<td>
<p><code><a href="#topic+drake_config">drake_config()</a></code> object</p>
</td></tr>
</table>

<hr>
<h2 id='progress'>Get the build progress of your targets
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+progress'></span>

<h3>Description</h3>

<p>Deprecated on 2020-03-23. Use <code><a href="#topic+drake_progress">drake_progress()</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>progress(
  ...,
  list = character(0),
  no_imported_objects = NULL,
  path = NULL,
  search = NULL,
  cache = drake::drake_cache(path = path),
  verbose = 1L,
  jobs = 1,
  progress = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="progress_+3A_...">...</code></td>
<td>
<p>Objects to load from the cache, as names (unquoted)
or character strings (quoted). If the <code>tidyselect</code> package is installed,
you can also supply <code>dplyr</code>-style <code>tidyselect</code>
commands such as <code>starts_with()</code>, <code>ends_with()</code>, and <code>one_of()</code>.</p>
</td></tr>
<tr><td><code id="progress_+3A_list">list</code></td>
<td>
<p>Character vector naming objects to be loaded from the
cache. Similar to the <code>list</code> argument of <code><a href="base.html#topic+remove">remove()</a></code>.</p>
</td></tr>
<tr><td><code id="progress_+3A_no_imported_objects">no_imported_objects</code></td>
<td>
<p>Logical, whether to only return information
about imported files and targets with commands (i.e. whether to ignore
imported objects that are not files).</p>
</td></tr>
<tr><td><code id="progress_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="progress_+3A_search">search</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="progress_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="progress_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
<tr><td><code id="progress_+3A_jobs">jobs</code></td>
<td>
<p>Number of jobs/workers for parallel processing.</p>
</td></tr>
<tr><td><code id="progress_+3A_progress">progress</code></td>
<td>
<p>Character vector for filtering the build progress results.
Defaults to <code>NULL</code> (no filtering) to report progress of all objects.
Supported filters are <code>"done"</code>, <code>"running"</code>, and <code>"failed"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The build progress of each target reached by
the current <code><a href="#topic+make">make()</a></code> so far.
</p>

<hr>
<h2 id='prune_drake_graph'>Prune the graph
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+prune_drake_graph'></span>

<h3>Description</h3>

<p>2019-01-08
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prune_drake_graph(graph, to = igraph::V(graph)$name, jobs = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prune_drake_graph_+3A_graph">graph</code></td>
<td>
<p>An igraph object.</p>
</td></tr>
<tr><td><code id="prune_drake_graph_+3A_to">to</code></td>
<td>
<p>Character vector of vertices.</p>
</td></tr>
<tr><td><code id="prune_drake_graph_+3A_jobs">jobs</code></td>
<td>
<p>Number of jobs for parallelism.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>igraph</code> object
</p>

<hr>
<h2 id='r_make'>Launch a drake function in a fresh new R process
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+r_make'></span><span id='topic+r_drake_build'></span><span id='topic+r_outdated'></span><span id='topic+r_recoverable'></span><span id='topic+r_missed'></span><span id='topic+r_deps_target'></span><span id='topic+r_drake_graph_info'></span><span id='topic+r_vis_drake_graph'></span><span id='topic+r_sankey_drake_graph'></span><span id='topic+r_drake_ggraph'></span><span id='topic+r_text_drake_graph'></span><span id='topic+r_predict_runtime'></span><span id='topic+r_predict_workers'></span>

<h3>Description</h3>

<p>The <code style="white-space: pre;">&#8288;r_*()&#8288;</code> functions, such as <code>r_make()</code>,
enhance reproducibility by launching a <code>drake</code> function in
a separate R process.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>r_make(source = NULL, r_fn = NULL, r_args = list())

r_drake_build(
  target,
  character_only = FALSE,
  ...,
  source = NULL,
  r_fn = NULL,
  r_args = list()
)

r_outdated(..., source = NULL, r_fn = NULL, r_args = list())

r_recoverable(..., source = NULL, r_fn = NULL, r_args = list())

r_missed(..., source = NULL, r_fn = NULL, r_args = list())

r_deps_target(
  target,
  character_only = FALSE,
  ...,
  source = NULL,
  r_fn = NULL,
  r_args = list()
)

r_drake_graph_info(..., source = NULL, r_fn = NULL, r_args = list())

r_vis_drake_graph(..., source = NULL, r_fn = NULL, r_args = list())

r_sankey_drake_graph(..., source = NULL, r_fn = NULL, r_args = list())

r_drake_ggraph(..., source = NULL, r_fn = NULL, r_args = list())

r_text_drake_graph(..., source = NULL, r_fn = NULL, r_args = list())

r_predict_runtime(..., source = NULL, r_fn = NULL, r_args = list())

r_predict_workers(..., source = NULL, r_fn = NULL, r_args = list())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="r_make_+3A_source">source</code></td>
<td>
<p>Path to an R script file that
loads packages, functions, etc. and returns a <code><a href="#topic+drake_config">drake_config()</a></code> object.
There are 3 ways to set this path.
</p>

<ol>
<li><p> Pass an explicit file path.
</p>
</li>
<li><p> Call <code>options(drake_source = "path_to_your_script.R")</code>.
</p>
</li>
<li><p> Just create a file called &quot;_drake.R&quot; in your working directory
and supply nothing to <code>source</code>.
</p>
</li></ol>
</td></tr>
<tr><td><code id="r_make_+3A_r_fn">r_fn</code></td>
<td>
<p>A <code>callr</code> function such as <code>callr::r</code> or <code>callr::r_bg</code>.
Example: <code>r_make(r_fn = callr::r)</code>.</p>
</td></tr>
<tr><td><code id="r_make_+3A_r_args">r_args</code></td>
<td>
<p>List of arguments to <code>r_fn</code>, not including <code>func</code> or <code>args</code>.
Example:
<code>r_make(r_fn = callr::r_bg, r_args = list(stdout = "stdout.log"))</code>.</p>
</td></tr>
<tr><td><code id="r_make_+3A_target">target</code></td>
<td>
<p>Name of the target.</p>
</td></tr>
<tr><td><code id="r_make_+3A_character_only">character_only</code></td>
<td>
<p>Logical, whether <code>name</code> should be treated
as a character or a symbol
(just like <code>character.only</code> in <code><a href="base.html#topic+library">library()</a></code>).</p>
</td></tr>
<tr><td><code id="r_make_+3A_...">...</code></td>
<td>
<p>Arguments to the inner function. For example, if you want to call
<code><a href="#topic+r_vis_drake_graph">r_vis_drake_graph()</a></code>, the inner function is <code><a href="#topic+vis_drake_graph">vis_drake_graph()</a></code>, and
<code>selfcontained</code> is an example argument you could supply to the ellipsis.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>drake</code> searches your environment
to detect dependencies, so functions like <code><a href="#topic+make">make()</a></code>, <code><a href="#topic+outdated">outdated()</a></code>, etc.
are designed to run in fresh clean R sessions. Wrappers <code><a href="#topic+r_make">r_make()</a></code>,
<code><a href="#topic+r_outdated">r_outdated()</a></code>, etc. run reproducibly even if your current R session
is old and stale.
</p>
<p><code><a href="#topic+r_outdated">r_outdated()</a></code> runs the four steps below.
<code><a href="#topic+r_make">r_make()</a></code> etc. are similar.
</p>

<ol>
<li><p> Launch a new <code>callr::r()</code> session.
</p>
</li>
<li><p> In that fresh session, run the R script from the <code>source</code> argument.
This script loads packages, functions, global options, etc.
and calls <code><a href="#topic+drake_config">drake_config()</a></code> at the very end. <code><a href="#topic+drake_config">drake_config()</a></code>
is the preprocessing step of <code><a href="#topic+make">make()</a></code>, and it accepts
all the same arguments as <code><a href="#topic+make">make()</a></code> (e.g. <code>plan</code> and <code>targets</code>).
</p>
</li>
<li><p> In that same session, run <code><a href="#topic+outdated">outdated()</a></code>
with the <code>config</code> argument from step 2.
</p>
</li>
<li><p> Return the result back to main process
(e.g. your interactive R session).
</p>
</li></ol>



<h3>Recovery</h3>

<p><code>make(recover = TRUE, recoverable = TRUE)</code>
powers automated data recovery.
The default of <code>recover</code> is <code>FALSE</code> because
targets recovered from the distant past may have been generated
with earlier versions of R and earlier package environments
that no longer exist.
</p>
<p>How it works: if <code>recover</code> is <code>TRUE</code>,
<code>drake</code> tries to salvage old target values from the cache
instead of running commands from the plan.
A target is recoverable if
</p>

<ol>
<li><p> There is an old value somewhere in the cache that
shares the command, dependencies, etc.
of the target about to be built.
</p>
</li>
<li><p> The old value was generated with <code>make(recoverable = TRUE)</code>.
</p>
</li></ol>

<p>If both conditions are met, <code>drake</code> will
</p>

<ol>
<li><p> Assign the most recently-generated admissible data to the target, and
</p>
</li>
<li><p> skip the target's command.
</p>
</li></ol>



<h3>See Also</h3>

<p><code><a href="#topic+make">make()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("quarantine side effects", {
if (requireNamespace("knitr", quietly = TRUE)) {
writeLines(
  c(
    "library(drake)",
    "load_mtcars_example()",
    "drake_config(my_plan, targets = c(\"small\", \"large\"))"
  ),
  "_drake.R" # default value of the `source` argument
)
cat(readLines("_drake.R"), sep = "\n")
r_outdated()
r_make()
r_outdated()
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='r_recipe_wildcard'>Default Makefile recipe wildcard
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+r_recipe_wildcard'></span>

<h3>Description</h3>

<p>2019-01-02
</p>


<h3>Usage</h3>

<pre><code class='language-R'>r_recipe_wildcard()
</code></pre>


<h3>Value</h3>

<p>The R recipe wildcard.
</p>

<hr>
<h2 id='rate_limiting_times'>rate_limiting_times <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+rate_limiting_times'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rate_limiting_times(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rate_limiting_times_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='read_config'>read_config <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+read_config'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_config(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_config_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='read_drake_config'>Read a config object from the cache
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+read_drake_config'></span>

<h3>Description</h3>

<p>drake no longer stores the config object,
the plan, etc. in the cache during <code>make()</code>. This change
improves speed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_drake_config(
  path = getwd(),
  search = TRUE,
  cache = NULL,
  verbose = 1L,
  jobs = 1,
  envir = parent.frame()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_drake_config_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="read_drake_config_+3A_search">search</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="read_drake_config_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="read_drake_config_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
<tr><td><code id="read_drake_config_+3A_jobs">jobs</code></td>
<td>
<p>Number of jobs/workers for parallel processing.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>2019-01-06
</p>

<hr>
<h2 id='read_drake_graph'>Read a workflow graph from the cache
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+read_drake_graph'></span>

<h3>Description</h3>

<p>drake no longer stores the config object,
the plan, etc. in the cache during <code>make()</code>. This change
improves speed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_drake_graph(path = getwd(), search = TRUE, cache = NULL, verbose = 1L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_drake_graph_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="read_drake_graph_+3A_search">search</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="read_drake_graph_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="read_drake_graph_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>2019-01-06
</p>

<hr>
<h2 id='read_drake_meta'>read_drake_meta <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+read_drake_meta'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_drake_meta(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_drake_meta_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='read_drake_plan'>Read the plan from the cache
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+read_drake_plan'></span>

<h3>Description</h3>

<p>drake no longer stores the config object,
the plan, etc. in the cache during <code>make()</code>. This change
improves speed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_drake_plan(path = getwd(), search = TRUE, cache = NULL, verbose = 1L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_drake_plan_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="read_drake_plan_+3A_search">search</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="read_drake_plan_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="read_drake_plan_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>2019-01-06
</p>

<hr>
<h2 id='read_drake_seed'>Read the pseudo-random number generator seed of the project.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+read_drake_seed'></span>

<h3>Description</h3>

<p>When a project is created with <code><a href="#topic+make">make()</a></code>
or <code><a href="#topic+drake_config">drake_config()</a></code>, the project's pseudo-random number generator
seed is cached. Then, unless the cache is destroyed,
the seeds of all the targets will deterministically depend on
this one central seed. That way, reproducibility is protected,
even under randomness.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_drake_seed(path = NULL, search = NULL, cache = NULL, verbose = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_drake_seed_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="read_drake_seed_+3A_search">search</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="read_drake_seed_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="read_drake_seed_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("contain side effects", {
cache &lt;- storr::storr_environment() # Just for the examples.
my_plan &lt;- drake_plan(
  target1 = sqrt(1234),
  target2 = sample.int(n = 12, size = 1) + target1
)
tmp &lt;- sample.int(1) # Needed to get a .Random.seed, but not for drake.
digest::digest(.Random.seed) # Fingerprint of the current R session's seed.
make(my_plan, cache = cache) # Run the project, build the targets.
digest::digest(.Random.seed) # Your session's seed did not change.
# drake uses a hard-coded seed if you do not supply one.
read_drake_seed(cache = cache)
readd(target2, cache = cache) # Randomly-generated target data.
clean(target2, cache = cache) # Oops, I removed the data!
tmp &lt;- sample.int(1) # Maybe the R session's seed also changed.
make(my_plan, cache = cache) # Rebuild target2.
# Same as before:
read_drake_seed(cache = cache)
readd(target2, cache = cache)
# You can also supply a seed.
# If your project already exists, it must agree with the project's
# preexisting seed (default: 0)
clean(target2, cache = cache)
make(my_plan, cache = cache, seed = 0)
read_drake_seed(cache = cache)
readd(target2, cache = cache)
# If you want to supply a different seed than 0,
# you need to destroy the cache and start over first.
clean(destroy = TRUE, cache = cache)
cache &lt;- storr::storr_environment() # Just for the examples.
make(my_plan, cache = cache, seed = 1234)
read_drake_seed(cache = cache)
readd(target2, cache = cache)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='read_graph'>read_graph <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+read_graph'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_graph(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_graph_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='read_plan'>read_plan <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+read_plan'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_plan(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_plan_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='read_trace'>Read a trace of a dynamic target.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+read_trace'></span>

<h3>Description</h3>

<p>Read a target's dynamic trace from the cache.
Best used on its own outside a <code>drake</code> plan.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_trace(
  trace,
  target,
  cache = drake::drake_cache(path = path),
  path = NULL,
  character_only = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_trace_+3A_trace">trace</code></td>
<td>
<p>Character, name of the trace
you want to extract. Such trace names are declared
in the <code>.trace</code> argument of <code>map()</code>, <code>cross()</code> or <code>group()</code>.</p>
</td></tr>
<tr><td><code id="read_trace_+3A_target">target</code></td>
<td>
<p>Symbol or character,
depending on the value of <code>character_only</code>.
<code>target</code> is T=the name of a dynamic target with one or more traces
defined using the <code>.trace</code> argument of dynamic <code>map()</code>, <code>cross()</code>,
or <code>group()</code>.</p>
</td></tr>
<tr><td><code id="read_trace_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="read_trace_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="read_trace_+3A_character_only">character_only</code></td>
<td>
<p>Logical, whether <code>name</code> should be treated
as a character or a symbol
(just like <code>character.only</code> in <code><a href="base.html#topic+library">library()</a></code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In dynamic branching, the trace keeps track
of how the sub-targets were generated.
It reminds us the values of grouping variables
that go with individual sub-targets.
</p>


<h3>Value</h3>

<p>The dynamic trace of one target in another:
a vector of values from a grouping variable.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_trace">get_trace()</a></code>, <code><a href="#topic+subtargets">subtargets()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("demonstrate dynamic trace", {
plan &lt;- drake_plan(
  w = LETTERS[seq_len(3)],
  x = letters[seq_len(2)],

  # The first trace lets us see the values of w
  # that go with the sub-targets of y.
  y = target(paste0(w, x), dynamic = cross(w, x, .trace = w)),

  # We can use the trace as a grouping variable for the next
  # group().
  w_tr = read_trace("w", y),

  # Now, we use the trace again to keep track of the
  # values of w corresponding to the sub-targets of z.
  z = target(
    paste0(y, collapse = "-"),
    dynamic = group(y, .by = w_tr, .trace = w_tr)
  )
)
make(plan)

# We can read the trace outside make().
# That way, we know which values of `w` correspond
# to the sub-targets of `y`.
readd(y)
read_trace("w", y)

# And we know which values of `w_tr` (and thus `w`)
# match up with the sub-targets of `y`.
readd(z)
read_trace("w_tr", z)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='readd'>Read and return a drake target/import from the cache.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+readd'></span><span id='topic+loadd'></span>

<h3>Description</h3>

<p><code><a href="#topic+readd">readd()</a></code> returns an object from the cache,
and <code><a href="#topic+loadd">loadd()</a></code> loads one or more objects from the cache
into your environment or session. These objects are usually
targets built by <code><a href="#topic+make">make()</a></code>. If <code>target</code> is dynamic,
<code><a href="#topic+readd">readd()</a></code> and <code><a href="#topic+loadd">loadd()</a></code> retrieve a list of sub-target values.
You can restrict which sub-targets to include using the <code>subtargets</code>
argument.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readd(
  target,
  character_only = FALSE,
  path = NULL,
  search = NULL,
  cache = drake::drake_cache(path = path),
  namespace = NULL,
  verbose = 1L,
  show_source = FALSE,
  subtargets = NULL,
  subtarget_list = FALSE
)

loadd(
  ...,
  list = character(0),
  imported_only = NULL,
  path = NULL,
  search = NULL,
  cache = drake::drake_cache(path = path),
  namespace = NULL,
  envir = parent.frame(),
  jobs = 1,
  verbose = 1L,
  deps = FALSE,
  lazy = "eager",
  graph = NULL,
  replace = TRUE,
  show_source = FALSE,
  tidyselect = !deps,
  config = NULL,
  subtargets = NULL,
  subtarget_list = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readd_+3A_target">target</code></td>
<td>
<p>If <code>character_only</code> is <code>TRUE</code>, then
<code>target</code> is a character string naming the object to read.
Otherwise, <code>target</code> is an unquoted symbol with the name of the
object.</p>
</td></tr>
<tr><td><code id="readd_+3A_character_only">character_only</code></td>
<td>
<p>Logical, whether <code>name</code> should be treated
as a character or a symbol
(just like <code>character.only</code> in <code><a href="base.html#topic+library">library()</a></code>).</p>
</td></tr>
<tr><td><code id="readd_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="readd_+3A_search">search</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="readd_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="readd_+3A_namespace">namespace</code></td>
<td>
<p>Optional character string,
name of the <code>storr</code> namespace to read from.</p>
</td></tr>
<tr><td><code id="readd_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
<tr><td><code id="readd_+3A_show_source">show_source</code></td>
<td>
<p>Logical, option to show the command
that produced the target or indicate that the object
was imported (using <code><a href="#topic+show_source">show_source()</a></code>).</p>
</td></tr>
<tr><td><code id="readd_+3A_subtargets">subtargets</code></td>
<td>
<p>A numeric vector of indices.
If <code>target</code> is dynamic, <code><a href="#topic+loadd">loadd()</a></code> and <code><a href="#topic+readd">readd()</a></code> retrieve
a list of sub-targets. You can restrict which sub-targets
to retrieve with the <code>subtargets</code> argument. For example,
<code>readd(x, subtargets = seq_len(3))</code> only retrieves the
first 3 sub-targets of dynamic target <code>x</code>.</p>
</td></tr>
<tr><td><code id="readd_+3A_subtarget_list">subtarget_list</code></td>
<td>
<p>Logical, for dynamic targets only.
If <code>TRUE</code>, the dynamic target is loaded as a named
list of sub-target values. If <code>FALSE</code>, <code>drake</code>
attempts to concatenate the sub-targets with <code>vctrs::vec_c()</code>
(and returns an unnamed list if such concatenation is not possible).</p>
</td></tr>
<tr><td><code id="readd_+3A_...">...</code></td>
<td>
<p>Targets to load from the cache: as names (symbols) or
character strings. If the <code>tidyselect</code> package is installed,
you can also supply <code>dplyr</code>-style <code>tidyselect</code>
commands such as <code>starts_with()</code>, <code>ends_with()</code>, and <code>one_of()</code>.</p>
</td></tr>
<tr><td><code id="readd_+3A_list">list</code></td>
<td>
<p>Character vector naming targets to be loaded from the
cache. Similar to the <code>list</code> argument of <code><a href="base.html#topic+remove">remove()</a></code>.</p>
</td></tr>
<tr><td><code id="readd_+3A_imported_only">imported_only</code></td>
<td>
<p>Logical, deprecated.</p>
</td></tr>
<tr><td><code id="readd_+3A_envir">envir</code></td>
<td>
<p>Environment to load objects into. Defaults to the
calling environment (current workspace).</p>
</td></tr>
<tr><td><code id="readd_+3A_jobs">jobs</code></td>
<td>
<p>Number of parallel jobs for loading objects. On
non-Windows systems, the loading process for multiple objects
can be lightly parallelized via <code>parallel::mclapply()</code>.
just set jobs to be an integer greater than 1. On Windows,
<code>jobs</code> is automatically demoted to 1.</p>
</td></tr>
<tr><td><code id="readd_+3A_deps">deps</code></td>
<td>
<p>Logical, whether to load any cached
dependencies of the targets
instead of the targets themselves.
</p>
<p>Important note:
<code>deps = TRUE</code> disables <code>tidyselect</code> functionality. For example,
<code>loadd(starts_with("model_"), config = config, deps = TRUE)</code>
does not work. For the selection mechanism to work,
the <code style="white-space: pre;">&#8288;model_*&#8288;</code> targets to need to already be in the cache,
which is not always the case when you are debugging your projects.
To help <code>drake</code> understand what you mean,
you must name the targets <em>explicitly</em> when <code>deps</code> is <code>TRUE</code>, e.g.
<code>loadd(model_A, model_B, config = config, deps = TRUE)</code>.</p>
</td></tr>
<tr><td><code id="readd_+3A_lazy">lazy</code></td>
<td>
<p>Either a string or a logical. Choices:
</p>

<ul>
<li> <p><code>"eager"</code>: no lazy loading. The target is loaded right away
with <code><a href="base.html#topic+assign">assign()</a></code>.
</p>
</li>
<li> <p><code>"promise"</code>: lazy loading with <code><a href="base.html#topic+delayedAssign">delayedAssign()</a></code>
</p>
</li>
<li> <p><code>"bind"</code>: lazy loading with active bindings:
<code>bindr::populate_env()</code>.
</p>
</li>
<li> <p><code>TRUE</code>: same as <code>"promise"</code>.
</p>
</li>
<li> <p><code>FALSE</code>: same as <code>"eager"</code>.
</p>
</li></ul>
</td></tr>
<tr><td><code id="readd_+3A_graph">graph</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="readd_+3A_replace">replace</code></td>
<td>
<p>Logical. If <code>FALSE</code>,
items already in your environment
will not be replaced.</p>
</td></tr>
<tr><td><code id="readd_+3A_tidyselect">tidyselect</code></td>
<td>
<p>Logical, whether to enable
<code>tidyselect</code> expressions in <code>...</code> like
<code>starts_with("prefix")</code> and <code>ends_with("suffix")</code>.</p>
</td></tr>
<tr><td><code id="readd_+3A_config">config</code></td>
<td>
<p>Optional <code><a href="#topic+drake_config">drake_config()</a></code> object.
You should supply one if <code>deps</code> is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>There are three uses for the
<code><a href="#topic+loadd">loadd()</a></code> and <code><a href="#topic+readd">readd()</a></code> functions:
</p>

<ol>
<li><p> Exploring the results outside the <code>drake</code>/<code>make()</code> pipeline.
When you call <code><a href="#topic+make">make()</a></code> to run your project,
<code>drake</code> puts the targets in a cache, usually a folder called <code>.drake</code>.
You may want to inspect the targets afterwards, possibly in an
interactive R session. However, the files in the <code>.drake</code> folder
are organized in a special format created by the
<code>storr</code> package,
which is not exactly human-readable.
To retrieve a target for manual viewing, use <code><a href="#topic+readd">readd()</a></code>.
To load one or more targets into your session, use <code><a href="#topic+loadd">loadd()</a></code>.
</p>
</li>
<li><p> In <code>knitr</code> / R Markdown reports.
You can borrow <code>drake</code> targets in your active code chunks
if you have the right calls to <code><a href="#topic+loadd">loadd()</a></code> and <code><a href="#topic+readd">readd()</a></code>.
These reports can either run outside the <code>drake</code> pipeline,
or better yet, as part of the pipeline itself.
If you call <code>knitr_in("your_report.Rmd")</code> inside a <code><a href="#topic+drake_plan">drake_plan()</a></code>
command, then <code><a href="#topic+make">make()</a></code> will scan <code>"your_report.Rmd"</code> for
calls to <code>loadd()</code> and <code>readd()</code> in active code chunks,
and then treat those loaded targets as dependencies.
That way, <code><a href="#topic+make">make()</a></code> will automatically (re)run the report if those
dependencies change.
</p>
</li>
<li><p> If you are using <code>make(memory_strategy = "none")</code>
or <code>make(memory_strategy = "unload")</code>,
<code><a href="#topic+loadd">loadd()</a></code> and <code><a href="#topic+readd">readd()</a></code> can manually load dependencies
into memory for the target that is being built.
If you do this, you must carefully inspect <code><a href="#topic+deps_target">deps_target()</a></code>
and <code><a href="#topic+vis_drake_graph">vis_drake_graph()</a></code> before running <code><a href="#topic+make">make()</a></code>
to be sure the dependency relationships among targets
are correct. If you do not wish to incur extra dependencies
with <code><a href="#topic+loadd">loadd()</a></code> or <code><a href="#topic+readd">readd()</a></code>, you will need to use <code><a href="#topic+ignore">ignore()</a></code>,
e.g. <code>drake_plan(x = 1, y = ignore(readd(x)))</code> or
<code>drake_plan(x = 1, y = readd(ignore("x"), character_only = TRUE))</code>.
Compare those plans to <code>drake_plan(x = 1, y = readd(x))</code>
and <code>drake_plan(x = 1, y = readd("x", character_only = TRUE))</code>
using <code><a href="#topic+vis_drake_graph">vis_drake_graph()</a></code> and <code><a href="#topic+deps_target">deps_target()</a></code>.
</p>
</li></ol>



<h3>Value</h3>

<p>The cached value of the <code>target</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cached">cached()</a></code>, <code><a href="#topic+drake_plan">drake_plan()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>
<p><code><a href="#topic+cached">cached()</a></code>, <code><a href="#topic+drake_plan">drake_plan()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
make(my_plan) # Run the project, build the targets.
readd(reg1) # Return imported object 'reg1' from the cache.
readd(small) # Return targets 'small' from the cache.
readd("large", character_only = TRUE) # Return 'large' from the cache.
# For external files, only the fingerprint/hash is stored.
readd(file_store("report.md"), character_only = TRUE)
}
})

## End(Not run)
## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
make(my_plan) # Run the projects, build the targets.
config &lt;- drake_config(my_plan)
loadd(small) # Load target 'small' into your workspace.
small
# For many targets, you can parallelize loadd()
# using the 'jobs' argument.
loadd(list = c("small", "large"), jobs = 2)
ls()
# Load the dependencies of the target, coef_regression2_small
loadd(coef_regression2_small, deps = TRUE, config = config)
ls()
# Load all the targets listed in the workflow plan
# of the previous `make()`.
# If you do not supply any target names, `loadd()` loads all the targets.
# Be sure your computer has enough memory.
loadd()
ls()
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='recover_cache'>Load or create a drake cache
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+recover_cache'></span>

<h3>Description</h3>

<p>Deprecated on 2019-01-13.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recover_cache(
  path = NULL,
  hash_algorithm = NULL,
  short_hash_algo = NULL,
  long_hash_algo = NULL,
  force = FALSE,
  verbose = 1L,
  fetch_cache = NULL,
  console_log_file = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="recover_cache_+3A_path">path</code></td>
<td>
<p>File path of the cache.</p>
</td></tr>
<tr><td><code id="recover_cache_+3A_hash_algorithm">hash_algorithm</code></td>
<td>
<p>Name of a hash algorithm to use.
See the <code>algo</code> argument of the <code>digest</code> package for your options.</p>
</td></tr>
<tr><td><code id="recover_cache_+3A_short_hash_algo">short_hash_algo</code></td>
<td>
<p>Deprecated on 2018-12-12.
Use <code>hash_algorithm</code> instead.</p>
</td></tr>
<tr><td><code id="recover_cache_+3A_long_hash_algo">long_hash_algo</code></td>
<td>
<p>Deprecated on 2018-12-12.
Use <code>hash_algorithm</code> instead.</p>
</td></tr>
<tr><td><code id="recover_cache_+3A_force">force</code></td>
<td>
<p>Logical, whether to load the cache
despite any back compatibility issues with the
running version of drake.</p>
</td></tr>
<tr><td><code id="recover_cache_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
<tr><td><code id="recover_cache_+3A_fetch_cache">fetch_cache</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="recover_cache_+3A_console_log_file">console_log_file</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Does not work with
in-memory caches such as <code><a href="storr.html#topic+storr_environment">storr_environment()</a></code>.
</p>


<h3>Value</h3>

<p>A drake/storr cache.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+new_cache">new_cache()</a></code>, <code><a href="#topic+get_cache">get_cache()</a></code>
</p>

<hr>
<h2 id='recoverable'>List the most upstream <em>recoverable</em> outdated targets.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+recoverable'></span>

<h3>Description</h3>

<p>Only shows the most upstream updated targets.
Whether downstream targets are recoverable depends on
the eventual values of the upstream targets in the next <code><a href="#topic+make">make()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recoverable(..., make_imports = TRUE, do_prework = TRUE, config = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="recoverable_+3A_...">...</code></td>
<td>
<p>Arguments to <code><a href="#topic+make">make()</a></code>, such as <code>plan</code> and <code>targets</code> and <code>envir</code>.</p>
</td></tr>
<tr><td><code id="recoverable_+3A_make_imports">make_imports</code></td>
<td>
<p>Logical, whether to make the imports first.
Set to <code>FALSE</code> to save some time and risk obsolete output.</p>
</td></tr>
<tr><td><code id="recoverable_+3A_do_prework">do_prework</code></td>
<td>
<p>Whether to do the <code>prework</code>
normally supplied to <code><a href="#topic+make">make()</a></code>.</p>
</td></tr>
<tr><td><code id="recoverable_+3A_config">config</code></td>
<td>
<p>Deprecated (2019-12-21).
A configured workflow from <code><a href="#topic+drake_config">drake_config()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character vector of the names of recoverable targets.
</p>


<h3>Recovery</h3>

<p><code>make(recover = TRUE, recoverable = TRUE)</code>
powers automated data recovery.
The default of <code>recover</code> is <code>FALSE</code> because
targets recovered from the distant past may have been generated
with earlier versions of R and earlier package environments
that no longer exist.
</p>
<p>How it works: if <code>recover</code> is <code>TRUE</code>,
<code>drake</code> tries to salvage old target values from the cache
instead of running commands from the plan.
A target is recoverable if
</p>

<ol>
<li><p> There is an old value somewhere in the cache that
shares the command, dependencies, etc.
of the target about to be built.
</p>
</li>
<li><p> The old value was generated with <code>make(recoverable = TRUE)</code>.
</p>
</li></ol>

<p>If both conditions are met, <code>drake</code> will
</p>

<ol>
<li><p> Assign the most recently-generated admissible data to the target, and
</p>
</li>
<li><p> skip the target's command.
</p>
</li></ol>



<h3>See Also</h3>

<p><code><a href="#topic+r_recoverable">r_recoverable()</a></code>, <code><a href="#topic+r_outdated">r_outdated()</a></code>, <code><a href="#topic+drake_config">drake_config()</a></code>, <code><a href="#topic+missed">missed()</a></code>,
<code><a href="#topic+drake_plan">drake_plan()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
make(my_plan)
clean()
outdated(my_plan) # Which targets are outdated?
recoverable(my_plan) # Which of these are recoverable and upstream?
# The report still builds because clean() removes report.md,
# but make() recovers the rest.
make(my_plan, recover = TRUE)
outdated(my_plan)
# When was the *recovered* small data actually built (first stored)?
# (Was I using a different version of R back then?)
diagnose(small)$date
# If you set the same seed as before, you can even
# rename targets without having to build them again.
# For an example, see
# the "Reproducible data recovery and renaming" section of
# https://github.com/ropensci/drake/blob/main/README.md.
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='recoverable_impl'>Internal function with a drake_config() argument</h2><span id='topic+recoverable_impl'></span>

<h3>Description</h3>

<p>Not a user-side function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recoverable_impl(config = NULL, make_imports = TRUE, do_prework = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="recoverable_impl_+3A_config">config</code></td>
<td>
<p>A <code><a href="#topic+drake_config">drake_config()</a></code> object.</p>
</td></tr>
<tr><td><code id="recoverable_impl_+3A_make_imports">make_imports</code></td>
<td>
<p>Logical, whether to make the imports first.
Set to <code>FALSE</code> to save some time and risk obsolete output.</p>
</td></tr>
<tr><td><code id="recoverable_impl_+3A_do_prework">do_prework</code></td>
<td>
<p>Whether to do the <code>prework</code>
normally supplied to <code><a href="#topic+make">make()</a></code>.</p>
</td></tr>
</table>

<hr>
<h2 id='reduce_by'>Reduce multiple groupings of targets
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+reduce_by'></span>

<h3>Description</h3>

<p>Deprecated on 2019-05-16. Use <code><a href="#topic+drake_plan">drake_plan()</a></code>
transformations instead. See
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>
for the details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reduce_by(
  plan,
  ...,
  prefix = "target",
  begin = "",
  op = " + ",
  end = "",
  pairwise = TRUE,
  append = TRUE,
  filter = NULL,
  sep = "_"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="reduce_by_+3A_plan">plan</code></td>
<td>
<p>Workflow plan data frame of prespecified targets.</p>
</td></tr>
<tr><td><code id="reduce_by_+3A_...">...</code></td>
<td>
<p>Symbols, columns of <code>plan</code> to define target groupings.
A <code>reduce_plan()</code> call is applied for each grouping.
Groupings with all <code>NA</code>s in the selector variables are ignored.</p>
</td></tr>
<tr><td><code id="reduce_by_+3A_prefix">prefix</code></td>
<td>
<p>Character, prefix for naming the new targets.
Suffixes are generated from the values of the columns
specified in <code>...</code>.</p>
</td></tr>
<tr><td><code id="reduce_by_+3A_begin">begin</code></td>
<td>
<p>Character, code to place at the beginning
of each step in the reduction.</p>
</td></tr>
<tr><td><code id="reduce_by_+3A_op">op</code></td>
<td>
<p>Binary operator to apply in the reduction</p>
</td></tr>
<tr><td><code id="reduce_by_+3A_end">end</code></td>
<td>
<p>Character, code to place at the end
of each step in the reduction.</p>
</td></tr>
<tr><td><code id="reduce_by_+3A_pairwise">pairwise</code></td>
<td>
<p>Logical, whether to create multiple
new targets, one for each pair/step in the reduction (<code>TRUE</code>),
or to do the reduction all in one command.</p>
</td></tr>
<tr><td><code id="reduce_by_+3A_append">append</code></td>
<td>
<p>Logical. If <code>TRUE</code>, the output will include the
original rows in the <code>plan</code> argument.
If <code>FALSE</code>, the output will only include the new
targets and commands.</p>
</td></tr>
<tr><td><code id="reduce_by_+3A_filter">filter</code></td>
<td>
<p>An expression like you would pass to <code>dplyr::filter()</code>.
The rows for which <code>filter</code> evaluates to <code>TRUE</code> will be gathered,
and the rest will be excluded from gathering.
Why not just call <code>dplyr::filter()</code> before <code>gather_by()</code>?
Because <code>gather_by(append = TRUE, filter = my_column == "my_value")</code>
gathers on some targets while including all the original targets
in the output. See the examples for a demonstration.</p>
</td></tr>
<tr><td><code id="reduce_by_+3A_sep">sep</code></td>
<td>
<p>Character scalar, delimiter for creating the names
of new targets.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Perform several calls to <code>reduce_plan()</code>
based on groupings from columns in the plan,
and then row-bind the new targets to the plan.
</p>


<h3>Value</h3>

<p>A workflow plan data frame.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code>
</p>

<hr>
<h2 id='reduce_plan'>Write commands to reduce several targets down to one.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+reduce_plan'></span>

<h3>Description</h3>

<p>Deprecated on 2019-05-16. Use <code><a href="#topic+drake_plan">drake_plan()</a></code>
transformations instead. See
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>
for the details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reduce_plan(
  plan = NULL,
  target = "target",
  begin = "",
  op = " + ",
  end = "",
  pairwise = TRUE,
  append = FALSE,
  sep = "_"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="reduce_plan_+3A_plan">plan</code></td>
<td>
<p>Workflow plan data frame of prespecified targets.</p>
</td></tr>
<tr><td><code id="reduce_plan_+3A_target">target</code></td>
<td>
<p>Name of the new reduced target.</p>
</td></tr>
<tr><td><code id="reduce_plan_+3A_begin">begin</code></td>
<td>
<p>Character, code to place at the beginning
of each step in the reduction.</p>
</td></tr>
<tr><td><code id="reduce_plan_+3A_op">op</code></td>
<td>
<p>Binary operator to apply in the reduction</p>
</td></tr>
<tr><td><code id="reduce_plan_+3A_end">end</code></td>
<td>
<p>Character, code to place at the end
of each step in the reduction.</p>
</td></tr>
<tr><td><code id="reduce_plan_+3A_pairwise">pairwise</code></td>
<td>
<p>Logical, whether to create multiple
new targets, one for each pair/step in the reduction (<code>TRUE</code>),
or to do the reduction all in one command.</p>
</td></tr>
<tr><td><code id="reduce_plan_+3A_append">append</code></td>
<td>
<p>Logical. If <code>TRUE</code>, the output will include the
original rows in the <code>plan</code> argument.
If <code>FALSE</code>, the output will only include the new
targets and commands.</p>
</td></tr>
<tr><td><code id="reduce_plan_+3A_sep">sep</code></td>
<td>
<p>Character scalar, delimiter for creating new target names.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Creates a new workflow plan data frame with the
commands to do a reduction (i.e. to repeatedly apply a binary
operator to pairs of targets to produce one target).
</p>


<h3>Value</h3>

<p>A workflow plan data frame that aggregates multiple
prespecified targets into one additional target downstream.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code>
</p>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+all_of'></span><span id='topic+tar_tidyselect'></span><span id='topic+any_of'></span><span id='topic+contains'></span><span id='topic+ends_with'></span><span id='topic+everything'></span><span id='topic+last_col'></span><span id='topic+matches'></span><span id='topic+num_range'></span><span id='topic+one_of'></span><span id='topic+starts_with'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>tidyselect</dt><dd><p><code><a href="tidyselect.html#topic+all_of">all_of</a></code>, <code><a href="tidyselect.html#topic+all_of">any_of</a></code>, <code><a href="tidyselect.html#topic+starts_with">contains</a></code>, <code><a href="tidyselect.html#topic+starts_with">ends_with</a></code>, <code><a href="tidyselect.html#topic+everything">everything</a></code>, <code><a href="tidyselect.html#topic+everything">last_col</a></code>, <code><a href="tidyselect.html#topic+starts_with">matches</a></code>, <code><a href="tidyselect.html#topic+starts_with">num_range</a></code>, <code><a href="tidyselect.html#topic+one_of">one_of</a></code>, <code><a href="tidyselect.html#topic+starts_with">starts_with</a></code></p>
</dd>
</dl>

<hr>
<h2 id='render_drake_ggraph'>Visualize the workflow with <code>ggplot2</code>/<code>ggraph</code> using
<code><a href="#topic+drake_graph_info">drake_graph_info()</a></code> output.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+render_drake_ggraph'></span>

<h3>Description</h3>

<p>This function requires packages <code>ggplot2</code> and <code>ggraph</code>.
Install them with <code>install.packages(c("ggplot2", "ggraph"))</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>render_drake_ggraph(
  graph_info,
  main = graph_info$default_title,
  label_nodes = FALSE,
  transparency = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="render_drake_ggraph_+3A_graph_info">graph_info</code></td>
<td>
<p>List of data frames generated by
<code><a href="#topic+drake_graph_info">drake_graph_info()</a></code>.
There should be 3 data frames: <code>nodes</code>, <code>edges</code>,
and <code>legend_nodes</code>.</p>
</td></tr>
<tr><td><code id="render_drake_ggraph_+3A_main">main</code></td>
<td>
<p>Character string, title of the graph.</p>
</td></tr>
<tr><td><code id="render_drake_ggraph_+3A_label_nodes">label_nodes</code></td>
<td>
<p>Logical, whether to label the nodes.
If <code>FALSE</code>, the graph will not have any text next to the nodes,
which is recommended for large graphs with lots of targets.</p>
</td></tr>
<tr><td><code id="render_drake_ggraph_+3A_transparency">transparency</code></td>
<td>
<p>Logical, whether to allow transparency in
the rendered graph. Set to <code>FALSE</code> if you get warnings
like &quot;semi-transparency is not supported on this device&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ggplot2</code> object, which you can modify with more layers,
show with <code>plot()</code>, or save as a file with <code>ggsave()</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+vis_drake_graph">vis_drake_graph()</a></code>, <code><a href="#topic+sankey_drake_graph">sankey_drake_graph()</a></code>, <code><a href="#topic+drake_ggraph">drake_ggraph()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
load_mtcars_example() # Get the code with drake_example("mtcars").
if (requireNamespace("ggraph", quietly = TRUE)) {
  # Instead of jumpting right to vis_drake_graph(), get the data frames
  # of nodes, edges, and legend nodes.
  drake_ggraph(my_plan) # Jump straight to the static graph.
  # Get the node and edge info that vis_drake_graph() just plotted:
  graph &lt;- drake_graph_info(my_plan)
  render_drake_ggraph(graph)
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='render_drake_graph'>Render a visualization using the data frames
generated by <code><a href="#topic+drake_graph_info">drake_graph_info()</a></code>.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+render_drake_graph'></span>

<h3>Description</h3>

<p>This function is called inside
<code><a href="#topic+vis_drake_graph">vis_drake_graph()</a></code>, which typical users
call more often.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>render_drake_graph(
  graph_info,
  file = character(0),
  layout = NULL,
  direction = NULL,
  hover = TRUE,
  main = graph_info$default_title,
  selfcontained = FALSE,
  navigationButtons = TRUE,
  ncol_legend = 1,
  collapse = TRUE,
  on_select = NULL,
  level_separation = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="render_drake_graph_+3A_graph_info">graph_info</code></td>
<td>
<p>List of data frames generated by
<code><a href="#topic+drake_graph_info">drake_graph_info()</a></code>.
There should be 3 data frames: <code>nodes</code>, <code>edges</code>,
and <code>legend_nodes</code>.</p>
</td></tr>
<tr><td><code id="render_drake_graph_+3A_file">file</code></td>
<td>
<p>Name of a file to save the graph.
If <code>NULL</code> or <code>character(0)</code>, no file is saved and
the graph is rendered and displayed within R.
If the file ends in a <code>.png</code>, <code>.jpg</code>, <code>.jpeg</code>, or <code>.pdf</code> extension,
then a static image will be saved. In this case,
the webshot package and PhantomJS are required:
<code style="white-space: pre;">&#8288;install.packages("webshot"); webshot::install_phantomjs()&#8288;</code>.
If the file does not end in a <code>.png</code>, <code>.jpg</code>, <code>.jpeg</code>, or <code>.pdf</code>
extension, an HTML file will be saved, and you can open the
interactive graph using a web browser.</p>
</td></tr>
<tr><td><code id="render_drake_graph_+3A_layout">layout</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="render_drake_graph_+3A_direction">direction</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="render_drake_graph_+3A_hover">hover</code></td>
<td>
<p>Logical, whether to show the command that generated the target
when you hover over a node with the mouse. For imports, the label does not
change with hovering.</p>
</td></tr>
<tr><td><code id="render_drake_graph_+3A_main">main</code></td>
<td>
<p>Character string, title of the graph.</p>
</td></tr>
<tr><td><code id="render_drake_graph_+3A_selfcontained">selfcontained</code></td>
<td>
<p>Logical, whether
to save the <code>file</code> as a self-contained
HTML file (with external resources base64 encoded) or a file with
external resources placed in an adjacent directory. If <code>TRUE</code>,
pandoc is required. The <code>selfcontained</code> argument only applies
to HTML files. In other words, if <code>file</code> is a
PNG, PDF, or JPEG file, for instance,
the point is moot.</p>
</td></tr>
<tr><td><code id="render_drake_graph_+3A_navigationbuttons">navigationButtons</code></td>
<td>
<p>Logical, whether to add navigation buttons with
<code>visNetwork::visInteraction(navigationButtons = TRUE)</code></p>
</td></tr>
<tr><td><code id="render_drake_graph_+3A_ncol_legend">ncol_legend</code></td>
<td>
<p>Number of columns in the legend nodes.
To remove the legend entirely, set <code>ncol_legend</code> to <code>NULL</code> or <code>0</code>.</p>
</td></tr>
<tr><td><code id="render_drake_graph_+3A_collapse">collapse</code></td>
<td>
<p>Logical, whether to allow nodes to collapse
if you double click on them.
Analogous to <code>visNetwork::visOptions(collapse = TRUE)</code>.</p>
</td></tr>
<tr><td><code id="render_drake_graph_+3A_on_select">on_select</code></td>
<td>
<p>defines node selection event handling.
Either a string of valid JavaScript that may be passed to
<code>visNetwork::visEvents()</code>, or one of the following:
<code>TRUE</code>, <code>NULL</code>/<code>FALSE</code>. If <code>TRUE</code> , enables the default behavior of
opening the link specified by the <code>on_select_col</code> given to
<code>drake_graph_info()</code>. <code>NULL</code>/<code>FALSE</code> disables the behavior.</p>
</td></tr>
<tr><td><code id="render_drake_graph_+3A_level_separation">level_separation</code></td>
<td>
<p>Numeric, <code>levelSeparation</code> argument to
<code>visNetwork::visHierarchicalLayout()</code>. Controls the distance
between hierarchical levels. Consider setting if the
aspect ratio of the graph is far from 1.
Defaults to 150 through <code>visNetwork</code>.</p>
</td></tr>
<tr><td><code id="render_drake_graph_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>visNetwork()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For enhanced interactivity in the graph, see the <code>mandrake</code>
package.
</p>


<h3>Value</h3>

<p>A <code>visNetwork</code> graph.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+vis_drake_graph">vis_drake_graph()</a></code>, <code><a href="#topic+sankey_drake_graph">sankey_drake_graph()</a></code>,
<code><a href="#topic+drake_ggraph">drake_ggraph()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
if (requireNamespace("visNetwork", quietly = TRUE)) {
# Instead of jumping right to vis_drake_graph(), get the data frames
# of nodes, edges, and legend nodes.
vis_drake_graph(my_plan) # Jump straight to the interactive graph.
# Get the node and edge info that vis_drake_graph() just plotted:
graph &lt;- drake_graph_info(my_plan)
# You can pass the data frames right to render_drake_graph()
# (as in vis_drake_graph()) or you can create
# your own custom visNewtork graph.
render_drake_graph(graph)
}
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='render_graph'>render_graph <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+render_graph'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>render_graph(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="render_graph_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='render_sankey_drake_graph'>Render a Sankey diagram from <code><a href="#topic+drake_graph_info">drake_graph_info()</a></code>.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+render_sankey_drake_graph'></span>

<h3>Description</h3>

<p>This function is called inside
<code><a href="#topic+sankey_drake_graph">sankey_drake_graph()</a></code>, which typical users
call more often. A legend is unfortunately unavailable
for the graph itself, but you can see what all the colors mean with
<code>visNetwork::visNetwork(drake::legend_nodes())</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>render_sankey_drake_graph(
  graph_info,
  file = character(0),
  selfcontained = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="render_sankey_drake_graph_+3A_graph_info">graph_info</code></td>
<td>
<p>List of data frames generated by
<code><a href="#topic+drake_graph_info">drake_graph_info()</a></code>.
There should be 3 data frames: <code>nodes</code>, <code>edges</code>,
and <code>legend_nodes</code>.</p>
</td></tr>
<tr><td><code id="render_sankey_drake_graph_+3A_file">file</code></td>
<td>
<p>Name of a file to save the graph.
If <code>NULL</code> or <code>character(0)</code>, no file is saved and
the graph is rendered and displayed within R.
If the file ends in a <code>.png</code>, <code>.jpg</code>, <code>.jpeg</code>, or <code>.pdf</code> extension,
then a static image will be saved. In this case,
the webshot package and PhantomJS are required:
<code style="white-space: pre;">&#8288;install.packages("webshot"); webshot::install_phantomjs()&#8288;</code>.
If the file does not end in a <code>.png</code>, <code>.jpg</code>, <code>.jpeg</code>, or <code>.pdf</code>
extension, an HTML file will be saved, and you can open the
interactive graph using a web browser.</p>
</td></tr>
<tr><td><code id="render_sankey_drake_graph_+3A_selfcontained">selfcontained</code></td>
<td>
<p>Logical, whether
to save the <code>file</code> as a self-contained
HTML file (with external resources base64 encoded) or a file with
external resources placed in an adjacent directory. If <code>TRUE</code>,
pandoc is required.</p>
</td></tr>
<tr><td><code id="render_sankey_drake_graph_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>networkD3::sankeyNetwork()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>visNetwork</code> graph.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sankey_drake_graph">sankey_drake_graph()</a></code>, <code><a href="#topic+vis_drake_graph">vis_drake_graph()</a></code>,
<code><a href="#topic+drake_ggraph">drake_ggraph()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
load_mtcars_example() # Get the code with drake_example("mtcars").
if (suppressWarnings(require("knitr"))) {
if (requireNamespace("networkD3", quietly = TRUE)) {
if (requireNamespace("visNetwork", quietly = TRUE)) {
# Instead of jumpting right to sankey_drake_graph(), get the data frames
# of nodes, edges, and legend nodes.
sankey_drake_graph(my_plan) # Jump straight to the interactive graph.
# Show the legend separately.
visNetwork::visNetwork(nodes = drake::legend_nodes())
# Get the node and edge info that sankey_drake_graph() just plotted:
graph &lt;- drake_graph_info(my_plan)
# You can pass the data frames right to render_sankey_drake_graph()
# (as in sankey_drake_graph()) or you can create
# your own custom visNewtork graph.
render_sankey_drake_graph(graph)
}
}
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='render_static_drake_graph'>Deprecated: render a <code>ggraph</code>/<code>ggplot2</code> representation
of your drake project.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+render_static_drake_graph'></span>

<h3>Description</h3>

<p>Use <code><a href="#topic+render_drake_ggraph">render_drake_ggraph()</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>render_static_drake_graph(graph_info, main = graph_info$default_title)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="render_static_drake_graph_+3A_graph_info">graph_info</code></td>
<td>
<p>List of data frames generated by
<code><a href="#topic+drake_graph_info">drake_graph_info()</a></code>.
There should be 3 data frames: <code>nodes</code>, <code>edges</code>,
and <code>legend_nodes</code>.</p>
</td></tr>
<tr><td><code id="render_static_drake_graph_+3A_main">main</code></td>
<td>
<p>Character string, title of the graph.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Deprecated on 2018-07-25.
</p>


<h3>Value</h3>

<p>A <code>ggplot2</code> object, which you can modify with more layers,
show with <code>plot()</code>, or save as a file with <code>ggsave()</code>.
</p>

<hr>
<h2 id='render_text_drake_graph'>Show a workflow graph as text in your terminal window
using <code><a href="#topic+drake_graph_info">drake_graph_info()</a></code> output.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+render_text_drake_graph'></span>

<h3>Description</h3>

<p>This function is called inside
<code><a href="#topic+text_drake_graph">text_drake_graph()</a></code>, which typical users
call more often. See <code>?text_drake_graph</code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>render_text_drake_graph(graph_info, nchar = 1L, print = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="render_text_drake_graph_+3A_graph_info">graph_info</code></td>
<td>
<p>List of data frames generated by
<code><a href="#topic+drake_graph_info">drake_graph_info()</a></code>.
There should be 3 data frames: <code>nodes</code>, <code>edges</code>,
and <code>legend_nodes</code>.</p>
</td></tr>
<tr><td><code id="render_text_drake_graph_+3A_nchar">nchar</code></td>
<td>
<p>For each node, maximum number of characters of the node label
to show. Can be 0, in which case each node is a colored box
instead of a node label.
Caution: <code>nchar</code> &gt; 0 will mess with the layout.</p>
</td></tr>
<tr><td><code id="render_text_drake_graph_+3A_print">print</code></td>
<td>
<p>Logical. If <code>TRUE</code>, the graph will print to the console
via <code>message()</code>. If <code>FALSE</code>, nothing is printed. However, you still
have the visualization because <code>text_drake_graph()</code> and
<code>render_text_drake_graph()</code> still invisibly return a character string
that you can print yourself with <code>message()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The lines of text in the visualization.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+text_drake_graph">text_drake_graph()</a></code>, <code><a href="#topic+vis_drake_graph">vis_drake_graph()</a></code>,
<code><a href="#topic+sankey_drake_graph">sankey_drake_graph()</a></code>, <code><a href="#topic+drake_ggraph">drake_ggraph()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
pkgs &lt;- requireNamespace("txtplot", quietly = TRUE) &amp;&amp;
  requireNamespace("visNetwork", quietly = TRUE)
if (pkgs) {
# Instead of jumpting right to vis_drake_graph(), get the data frames
# of nodes, edges, and legend nodes.
text_drake_graph(my_plan) # Jump straight to the interactive graph.
# Get the node and edge info that vis_drake_graph() just plotted:
graph &lt;- drake_graph_info(my_plan)
# You can pass the data frames right to render_text_drake_graph().
render_text_drake_graph(graph)
}
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='rescue_cache'>Try to repair a drake cache that is prone
to throwing <code>storr</code>-related errors.
<a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a></h2><span id='topic+rescue_cache'></span>

<h3>Description</h3>

<p>Sometimes, <code>storr</code> caches may have
dangling orphaned files that prevent you from loading or cleaning.
This function tries to remove those files so you can use the
cache normally again.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rescue_cache(
  targets = NULL,
  path = NULL,
  search = NULL,
  verbose = NULL,
  force = FALSE,
  cache = drake::drake_cache(path = path),
  jobs = 1,
  garbage_collection = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rescue_cache_+3A_targets">targets</code></td>
<td>
<p>Character vector, names of the targets to rescue.
As with many other drake utility functions, the word <code>target</code>
is defined generally in this case, encompassing imports
as well as true targets.
If <code>targets</code> is <code>NULL</code>, everything in the
cache is rescued.</p>
</td></tr>
<tr><td><code id="rescue_cache_+3A_path">path</code></td>
<td>
<p>Character.
Set <code>path</code> to the path of a <code>storr::storr_rds()</code> cache
to retrieve a specific cache generated by <code>storr::storr_rds()</code>
or <code>drake::new_cache()</code>. If the <code>path</code> argument is <code>NULL</code>,
<code>drake_cache()</code> searches up through parent directories
to find a folder called <code style="white-space: pre;">&#8288;.drake/&#8288;</code>.</p>
</td></tr>
<tr><td><code id="rescue_cache_+3A_search">search</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="rescue_cache_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
<tr><td><code id="rescue_cache_+3A_force">force</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="rescue_cache_+3A_cache">cache</code></td>
<td>
<p>A <code>storr</code> cache object.</p>
</td></tr>
<tr><td><code id="rescue_cache_+3A_jobs">jobs</code></td>
<td>
<p>Number of jobs for light parallelism
(disabled on Windows).</p>
</td></tr>
<tr><td><code id="rescue_cache_+3A_garbage_collection">garbage_collection</code></td>
<td>
<p>Logical, whether to do garbage collection
as a final step. See <code><a href="#topic+drake_gc">drake_gc()</a></code> and <code><a href="#topic+clean">clean()</a></code>
for details.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_cache">drake_cache()</a></code>, <code><a href="#topic+cached">cached()</a></code>,
<code><a href="#topic+drake_gc">drake_gc()</a></code>, <code><a href="#topic+clean">clean()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
make(my_plan) # Run the project, build targets. This creates the cache.
# Remove dangling cache files that could cause errors.
rescue_cache(jobs = 2)
# Alternatively, just rescue targets 'small' and 'large'.
# Rescuing specific targets is usually faster.
rescue_cache(targets = c("small", "large"))
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='rs_addin_loadd'>Loadd target at cursor into global environment
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+rs_addin_loadd'></span>

<h3>Description</h3>

<p>This function provides an RStudio addin that will
load the target at the
current cursor location from the cache into the global environment.
This is convenient during pipeline development when building off
established targets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rs_addin_loadd(context = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rs_addin_loadd_+3A_context">context</code></td>
<td>
<p>an RStudio document context.
Read from the active document if not supplied.
This is used for testing purposes.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If you are using a non-standard <code>drake</code> cache,
you must supply it to the <code>"rstudio_drake_cache"</code> global option,
e.g. <code>options(rstudio_drake_cache = storr::storr_rds("my_cache"))</code>.
</p>


<h3>Value</h3>

<p>Nothing.
</p>

<hr>
<h2 id='rs_addin_r_make'>RStudio addin for r_make()
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+rs_addin_r_make'></span>

<h3>Description</h3>

<p>Call <code><a href="#topic+r_make">r_make()</a></code> in an RStudio addin.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rs_addin_r_make(r_args = list())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rs_addin_r_make_+3A_r_args">r_args</code></td>
<td>
<p>List of arguments to <code>r_fn</code>, not including <code>func</code> or <code>args</code>.
Example:
<code>r_make(r_fn = callr::r_bg, r_args = list(stdout = "stdout.log"))</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing.
</p>

<hr>
<h2 id='rs_addin_r_outdated'>RStudio addin for r_outdated()
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+rs_addin_r_outdated'></span>

<h3>Description</h3>

<p>Call <code><a href="#topic+r_outdated">r_outdated()</a></code> in an RStudio addin.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rs_addin_r_outdated(r_args = list(), .print = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rs_addin_r_outdated_+3A_r_args">r_args</code></td>
<td>
<p>List of arguments to <code>r_fn</code>, not including <code>func</code> or <code>args</code>.
Example:
<code>r_make(r_fn = callr::r_bg, r_args = list(stdout = "stdout.log"))</code>.</p>
</td></tr>
<tr><td><code id="rs_addin_r_outdated_+3A_.print">.print</code></td>
<td>
<p>Logical, whether to <code>print()</code> the result
to the console. Required for the addin.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of outdated targets.
</p>

<hr>
<h2 id='rs_addin_r_vis_drake_graph'>RStudio addin for r_vis_drake_graph()
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+rs_addin_r_vis_drake_graph'></span>

<h3>Description</h3>

<p>Call <code><a href="#topic+r_vis_drake_graph">r_vis_drake_graph()</a></code> in an RStudio addin.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rs_addin_r_vis_drake_graph(r_args = list(), .print = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rs_addin_r_vis_drake_graph_+3A_r_args">r_args</code></td>
<td>
<p>List of arguments to <code>r_fn</code>, not including <code>func</code> or <code>args</code>.
Example:
<code>r_make(r_fn = callr::r_bg, r_args = list(stdout = "stdout.log"))</code>.</p>
</td></tr>
<tr><td><code id="rs_addin_r_vis_drake_graph_+3A_.print">.print</code></td>
<td>
<p>Logical, whether to <code>print()</code> the result
to the console. Required for the addin.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>visNetwork</code> graph.
</p>

<hr>
<h2 id='running'>List running targets.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+running'></span>

<h3>Description</h3>

<p>Deprecated on 2020-03-23. Use <code><a href="#topic+drake_running">drake_running()</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>running(
  path = NULL,
  search = NULL,
  cache = drake::drake_cache(path = path),
  verbose = 1L
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="running_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="running_+3A_search">search</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="running_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="running_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of target names.
</p>

<hr>
<h2 id='sankey_drake_graph'>Show a Sankey graph of your drake project.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+sankey_drake_graph'></span>

<h3>Description</h3>

<p>To save time for repeated plotting,
this function is divided into
<code><a href="#topic+drake_graph_info">drake_graph_info()</a></code> and <code><a href="#topic+render_sankey_drake_graph">render_sankey_drake_graph()</a></code>.
A legend is unfortunately unavailable
for the graph itself, but you can see what all the colors mean with
<code>visNetwork::visNetwork(drake::legend_nodes())</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sankey_drake_graph(
  ...,
  file = character(0),
  selfcontained = FALSE,
  build_times = "build",
  digits = 3,
  targets_only = FALSE,
  from = NULL,
  mode = c("out", "in", "all"),
  order = NULL,
  subset = NULL,
  make_imports = TRUE,
  from_scratch = FALSE,
  group = NULL,
  clusters = NULL,
  show_output_files = TRUE,
  config = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sankey_drake_graph_+3A_...">...</code></td>
<td>
<p>Arguments to <code><a href="#topic+make">make()</a></code>, such as <code>plan</code> and <code>targets</code>.</p>
</td></tr>
<tr><td><code id="sankey_drake_graph_+3A_file">file</code></td>
<td>
<p>Name of a file to save the graph.
If <code>NULL</code> or <code>character(0)</code>, no file is saved and
the graph is rendered and displayed within R.
If the file ends in a <code>.png</code>, <code>.jpg</code>, <code>.jpeg</code>, or <code>.pdf</code> extension,
then a static image will be saved. In this case,
the webshot package and PhantomJS are required:
<code style="white-space: pre;">&#8288;install.packages("webshot"); webshot::install_phantomjs()&#8288;</code>.
If the file does not end in a <code>.png</code>, <code>.jpg</code>, <code>.jpeg</code>, or <code>.pdf</code>
extension, an HTML file will be saved, and you can open the
interactive graph using a web browser.</p>
</td></tr>
<tr><td><code id="sankey_drake_graph_+3A_selfcontained">selfcontained</code></td>
<td>
<p>Logical, whether
to save the <code>file</code> as a self-contained
HTML file (with external resources base64 encoded) or a file with
external resources placed in an adjacent directory. If <code>TRUE</code>,
pandoc is required.</p>
</td></tr>
<tr><td><code id="sankey_drake_graph_+3A_build_times">build_times</code></td>
<td>
<p>Character string or logical.
If character, the choices are
1. <code>"build"</code>: runtime of the command plus the time
it take to store the target or import.
2. <code>"command"</code>: just the runtime of the command.
3. <code>"none"</code>: no build times.
If logical, <code>build_times</code> selects whether to show the
times from 'build_times(..., type = &quot;build&quot;)&ldquo; or use
no build times at all. See <code><a href="#topic+build_times">build_times()</a></code> for details.</p>
</td></tr>
<tr><td><code id="sankey_drake_graph_+3A_digits">digits</code></td>
<td>
<p>Number of digits for rounding the build times</p>
</td></tr>
<tr><td><code id="sankey_drake_graph_+3A_targets_only">targets_only</code></td>
<td>
<p>Logical,
whether to skip the imports and only include the
targets in the workflow plan.</p>
</td></tr>
<tr><td><code id="sankey_drake_graph_+3A_from">from</code></td>
<td>
<p>Optional collection of target/import names.
If <code>from</code> is nonempty,
the graph will restrict itself to
a neighborhood of <code>from</code>.
Control the neighborhood with
<code>mode</code> and <code>order</code>.</p>
</td></tr>
<tr><td><code id="sankey_drake_graph_+3A_mode">mode</code></td>
<td>
<p>Which direction to branch out in the graph
to create a neighborhood around <code>from</code>.
Use <code>"in"</code> to go upstream,
<code>"out"</code> to go downstream,
and <code>"all"</code> to go both ways and disregard
edge direction altogether.</p>
</td></tr>
<tr><td><code id="sankey_drake_graph_+3A_order">order</code></td>
<td>
<p>How far to branch out to create
a neighborhood around <code>from</code>. Defaults to
as far as possible. If a target is in the neighborhood, then
so are all of its custom <code><a href="#topic+file_out">file_out()</a></code> files if
<code>show_output_files</code> is <code>TRUE</code>.
That means the actual graph order may be slightly greater than
you might expect, but this ensures consistency
between <code>show_output_files = TRUE</code> and
<code>show_output_files = FALSE</code>.</p>
</td></tr>
<tr><td><code id="sankey_drake_graph_+3A_subset">subset</code></td>
<td>
<p>Optional character vector.
Subset of targets/imports to display in the graph.
Applied after <code>from</code>, <code>mode</code>, and <code>order</code>.
Be advised: edges are only kept for adjacent nodes in <code>subset</code>.
If you do not select all the intermediate nodes,
edges will drop from the graph.</p>
</td></tr>
<tr><td><code id="sankey_drake_graph_+3A_make_imports">make_imports</code></td>
<td>
<p>Logical, whether to make the imports first.
Set to <code>FALSE</code> to increase speed and risk using obsolete information.</p>
</td></tr>
<tr><td><code id="sankey_drake_graph_+3A_from_scratch">from_scratch</code></td>
<td>
<p>Logical, whether to assume all the targets
will be made from scratch on the next <code><a href="#topic+make">make()</a></code>.
Makes all targets outdated, but keeps information about
build progress in previous <code><a href="#topic+make">make()</a></code>s.</p>
</td></tr>
<tr><td><code id="sankey_drake_graph_+3A_group">group</code></td>
<td>
<p>Optional character scalar, name of the column used to
group nodes into columns. All the columns names of your original <code>drake</code>
plan are choices. The other choices (such as <code>"status"</code>) are column names
in the <code>nodes</code> . To group nodes into clusters in the graph,
you must also supply the <code>clusters</code> argument.</p>
</td></tr>
<tr><td><code id="sankey_drake_graph_+3A_clusters">clusters</code></td>
<td>
<p>Optional character vector of values to cluster on.
These values must be elements of the column of the <code>nodes</code> data frame
that you specify in the <code>group</code> argument to <code>drake_graph_info()</code>.</p>
</td></tr>
<tr><td><code id="sankey_drake_graph_+3A_show_output_files">show_output_files</code></td>
<td>
<p>Logical, whether to include
<code><a href="#topic+file_out">file_out()</a></code> files in the graph.</p>
</td></tr>
<tr><td><code id="sankey_drake_graph_+3A_config">config</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>visNetwork</code> graph.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+render_sankey_drake_graph">render_sankey_drake_graph()</a></code>, <code><a href="#topic+vis_drake_graph">vis_drake_graph()</a></code>,
<code><a href="#topic+drake_ggraph">drake_ggraph()</a></code>, <code><a href="#topic+text_drake_graph">text_drake_graph()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
if (requireNamespace("networkD3", quietly = TRUE)) {
if (requireNamespace("visNetwork", quietly = TRUE)) {
# Plot the network graph representation of the workflow.
sankey_drake_graph(my_plan)
# Show the legend separately.
visNetwork::visNetwork(nodes = drake::legend_nodes())
make(my_plan) # Run the project, build the targets.
sankey_drake_graph(my_plan) # The black nodes from before are now green.
# Plot a subgraph of the workflow.
sankey_drake_graph(my_plan, from = c("small", "reg2"))
}
}
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='sankey_drake_graph_impl'>Internal function with a drake_config() argument</h2><span id='topic+sankey_drake_graph_impl'></span>

<h3>Description</h3>

<p>Not a user-side function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sankey_drake_graph_impl(
  config,
  file = character(0),
  selfcontained = FALSE,
  build_times = "build",
  digits = 3,
  targets_only = FALSE,
  from = NULL,
  mode = c("out", "in", "all"),
  order = NULL,
  subset = NULL,
  make_imports = TRUE,
  from_scratch = FALSE,
  group = NULL,
  clusters = NULL,
  show_output_files = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sankey_drake_graph_impl_+3A_config">config</code></td>
<td>
<p>A <code><a href="#topic+drake_config">drake_config()</a></code> object.</p>
</td></tr>
</table>

<hr>
<h2 id='session'>session <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+session'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>session(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="session_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='shell_file'>Shell file for Makefile parallelism
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+shell_file'></span>

<h3>Description</h3>

<p>2019-01-03
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shell_file(path = "shell.sh", overwrite = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="shell_file_+3A_path">path</code></td>
<td>
<p>Character.</p>
</td></tr>
<tr><td><code id="shell_file_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>logical
</p>

<hr>
<h2 id='short_hash'><code>drake</code> now only uses one hash algorithm per cache.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+short_hash'></span>

<h3>Description</h3>

<p>Deprecated on 2018-12-12.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>short_hash(cache = drake::get_cache(verbose = verbose), verbose = 1L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="short_hash_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="short_hash_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector naming a hash algorithm.
</p>

<hr>
<h2 id='show_source'>Show how a target/import was produced.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+show_source'></span>

<h3>Description</h3>

<p>Show the command that produced a target
or indicate that the object or file was imported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_source(target, config, character_only = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show_source_+3A_target">target</code></td>
<td>
<p>Symbol denoting the target or import
or a character vector if character_only is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="show_source_+3A_config">config</code></td>
<td>
<p>A <code><a href="#topic+drake_config">drake_config()</a></code> list.</p>
</td></tr>
<tr><td><code id="show_source_+3A_character_only">character_only</code></td>
<td>
<p>Logical, whether to interpret
<code>target</code> as a symbol (<code>FALSE</code>) or character vector
(<code>TRUE</code>).</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("contain side effects", {
plan &lt;- drake_plan(x = sample.int(15))
cache &lt;- storr::storr_environment() # custom in-memory cache
make(plan, cache = cache)
config &lt;- drake_config(plan, cache = cache, history = FALSE)
show_source(x, config)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='static_drake_graph'>Deprecated: show a <code>ggraph</code>/<code>ggplot2</code> representation
of your drake project.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+static_drake_graph'></span>

<h3>Description</h3>

<p>Use <code><a href="#topic+drake_ggraph">drake_ggraph()</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>static_drake_graph(
  config,
  build_times = "build",
  digits = 3,
  targets_only = FALSE,
  main = NULL,
  from = NULL,
  mode = c("out", "in", "all"),
  order = NULL,
  subset = NULL,
  make_imports = TRUE,
  from_scratch = FALSE,
  full_legend = FALSE,
  group = NULL,
  clusters = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="static_drake_graph_+3A_config">config</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="static_drake_graph_+3A_build_times">build_times</code></td>
<td>
<p>Character string or logical.
If character, the choices are
1. <code>"build"</code>: runtime of the command plus the time
it take to store the target or import.
2. <code>"command"</code>: just the runtime of the command.
3. <code>"none"</code>: no build times.
If logical, <code>build_times</code> selects whether to show the
times from 'build_times(..., type = &quot;build&quot;)&ldquo; or use
no build times at all. See <code><a href="#topic+build_times">build_times()</a></code> for details.</p>
</td></tr>
<tr><td><code id="static_drake_graph_+3A_digits">digits</code></td>
<td>
<p>Number of digits for rounding the build times</p>
</td></tr>
<tr><td><code id="static_drake_graph_+3A_targets_only">targets_only</code></td>
<td>
<p>Logical,
whether to skip the imports and only include the
targets in the workflow plan.</p>
</td></tr>
<tr><td><code id="static_drake_graph_+3A_main">main</code></td>
<td>
<p>Character string, title of the graph.</p>
</td></tr>
<tr><td><code id="static_drake_graph_+3A_from">from</code></td>
<td>
<p>Optional collection of target/import names.
If <code>from</code> is nonempty,
the graph will restrict itself to
a neighborhood of <code>from</code>.
Control the neighborhood with
<code>mode</code> and <code>order</code>.</p>
</td></tr>
<tr><td><code id="static_drake_graph_+3A_mode">mode</code></td>
<td>
<p>Which direction to branch out in the graph
to create a neighborhood around <code>from</code>.
Use <code>"in"</code> to go upstream,
<code>"out"</code> to go downstream,
and <code>"all"</code> to go both ways and disregard
edge direction altogether.</p>
</td></tr>
<tr><td><code id="static_drake_graph_+3A_order">order</code></td>
<td>
<p>How far to branch out to create
a neighborhood around <code>from</code>. Defaults to
as far as possible. If a target is in the neighborhood, then
so are all of its custom <code><a href="#topic+file_out">file_out()</a></code> files if
<code>show_output_files</code> is <code>TRUE</code>.
That means the actual graph order may be slightly greater than
you might expect, but this ensures consistency
between <code>show_output_files = TRUE</code> and
<code>show_output_files = FALSE</code>.</p>
</td></tr>
<tr><td><code id="static_drake_graph_+3A_subset">subset</code></td>
<td>
<p>Optional character vector.
Subset of targets/imports to display in the graph.
Applied after <code>from</code>, <code>mode</code>, and <code>order</code>.
Be advised: edges are only kept for adjacent nodes in <code>subset</code>.
If you do not select all the intermediate nodes,
edges will drop from the graph.</p>
</td></tr>
<tr><td><code id="static_drake_graph_+3A_make_imports">make_imports</code></td>
<td>
<p>Logical, whether to make the imports first.
Set to <code>FALSE</code> to increase speed and risk using obsolete information.</p>
</td></tr>
<tr><td><code id="static_drake_graph_+3A_from_scratch">from_scratch</code></td>
<td>
<p>Logical, whether to assume all the targets
will be made from scratch on the next <code><a href="#topic+make">make()</a></code>.
Makes all targets outdated, but keeps information about
build progress in previous <code><a href="#topic+make">make()</a></code>s.</p>
</td></tr>
<tr><td><code id="static_drake_graph_+3A_full_legend">full_legend</code></td>
<td>
<p>Logical. If <code>TRUE</code>, all the node types
are printed in the legend. If <code>FALSE</code>, only the
node types used are printed in the legend.</p>
</td></tr>
<tr><td><code id="static_drake_graph_+3A_group">group</code></td>
<td>
<p>Optional character scalar, name of the column used to
group nodes into columns. All the columns names of your original <code>drake</code>
plan are choices. The other choices (such as <code>"status"</code>) are column names
in the <code>nodes</code> . To group nodes into clusters in the graph,
you must also supply the <code>clusters</code> argument.</p>
</td></tr>
<tr><td><code id="static_drake_graph_+3A_clusters">clusters</code></td>
<td>
<p>Optional character vector of values to cluster on.
These values must be elements of the column of the <code>nodes</code> data frame
that you specify in the <code>group</code> argument to <code>drake_graph_info()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Deprecated on 2018-07-25.
</p>


<h3>Value</h3>

<p>A <code>ggplot2</code> object, which you can modify with more layers,
show with <code>plot()</code>, or save as a file with <code>ggsave()</code>.
</p>

<hr>
<h2 id='subtargets'>List sub-targets <a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+subtargets'></span>

<h3>Description</h3>

<p>List the sub-targets of a dynamic target.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>subtargets(
  target = NULL,
  character_only = FALSE,
  cache = drake::drake_cache(path = path),
  path = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="subtargets_+3A_target">target</code></td>
<td>
<p>Character string or symbol, depending on <code>character_only</code>.
Name of a dynamic target.</p>
</td></tr>
<tr><td><code id="subtargets_+3A_character_only">character_only</code></td>
<td>
<p>Logical, whether <code>target</code> should be treated
as a character or a symbol.
Just like <code>character.only</code> in <code><a href="base.html#topic+library">library()</a></code>.</p>
</td></tr>
<tr><td><code id="subtargets_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
<tr><td><code id="subtargets_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character vector of sub-target names
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_trace">get_trace()</a></code>, <code><a href="#topic+read_trace">read_trace()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("dynamic branching", {
plan &lt;- drake_plan(
  w = c("a", "a", "b", "b"),
  x = seq_len(4),
  y = target(x + 1, dynamic = map(x)),
  z = target(sum(x) + sum(y), dynamic = group(x, y, .by = w))
)
make(plan)
subtargets(y)
subtargets(z)
readd(x)
readd(y)
readd(z)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='summaries'>summaries <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+summaries'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summaries(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summaries_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='target'>Customize a target in <code><a href="#topic+drake_plan">drake_plan()</a></code>.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+target'></span>

<h3>Description</h3>

<p>The <code>target()</code> function is a way to
configure individual targets in a <code>drake</code> plan.
Its most common use is to invoke static branching
and dynamic branching, and it can also set the values
of custom columns such as <code>format</code>, <code>elapsed</code>, <code>retries</code>,
and <code>max_expand</code>. Details are at
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#special-columns&#8288;</code>.
Note: <code>drake_plan(my_target = my_command())</code>
is equivalent to
<code style="white-space: pre;">&#8288;drake_plan(my_target = target(my_command())&#8288;</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>target(command = NULL, transform = NULL, dynamic = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="target_+3A_command">command</code></td>
<td>
<p>The command to build the target.</p>
</td></tr>
<tr><td><code id="target_+3A_transform">transform</code></td>
<td>
<p>A call to <code><a href="#topic+map">map()</a></code>, <code><a href="#topic+split">split()</a></code>, <code><a href="#topic+cross">cross()</a></code>, or <code><a href="#topic+combine">combine()</a></code>
to apply a <em>static</em> transformation. Details:
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/static.html&#8288;</code></p>
</td></tr>
<tr><td><code id="target_+3A_dynamic">dynamic</code></td>
<td>
<p>A call to <code><a href="#topic+map">map()</a></code>, <code><a href="#topic+cross">cross()</a></code>, or <code><a href="#topic+group">group()</a></code>
to apply a <em>dynamic</em> transformation. Details:
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/dynamic.html&#8288;</code></p>
</td></tr>
<tr><td><code id="target_+3A_...">...</code></td>
<td>
<p>Optional columns of the plan for a given target.
See the Columns section of this help file for a selection
of special columns that <code>drake</code> understands.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>target()</code> must be called inside <code><a href="#topic+drake_plan">drake_plan()</a></code>.
It is invalid otherwise.
</p>


<h3>Value</h3>

<p>A one-row workflow plan data frame with the named
arguments as columns.
</p>


<h3>Columns</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code> creates a special data frame. At minimum, that data frame
must have columns <code>target</code> and <code>command</code> with the target names and the
R code chunks to build them, respectively.
</p>
<p>You can add custom columns yourself, either with <code>target()</code> (e.g.
<code>drake_plan(y = target(f(x), transform = map(c(1, 2)), format = "fst"))</code>)
or by appending columns post-hoc (e.g. <code>plan$col &lt;- vals</code>).
</p>
<p>Some of these custom columns are special. They are optional,
but <code>drake</code> looks for them at various points in the workflow.
</p>

<ul>
<li> <p><code>transform</code>: a call to <code><a href="#topic+map">map()</a></code>, <code><a href="#topic+split">split()</a></code>, <code><a href="#topic+cross">cross()</a></code>, or
<code><a href="#topic+combine">combine()</a></code> to create and manipulate large collections of targets.
Details: (<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>). # nolint
</p>
</li>
<li> <p><code>format</code>: set a storage format to save big targets more efficiently.
See the &quot;Formats&quot; section of this help file for more details.
</p>
</li>
<li> <p><code>trigger</code>: rule to decide whether a target needs to run.
It is recommended that you define this one with <code>target()</code>.
Details: <code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/triggers.html&#8288;</code>.
</p>
</li>
<li> <p><code>hpc</code>: logical values (<code>TRUE</code>/<code>FALSE</code>/<code>NA</code>) whether to send each target
to parallel workers.
Visit <code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/hpc.html#selectivity&#8288;</code>
to learn more.
</p>
</li>
<li> <p><code>resources</code>: target-specific lists of resources for a computing cluster.
See
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/hpc.html#advanced-options&#8288;</code>
for details.
</p>
</li>
<li> <p><code>caching</code>: overrides the <code>caching</code> argument of <code><a href="#topic+make">make()</a></code> for each target
individually. Possible values:
</p>

<ul>
<li><p> &quot;main&quot;: tell the main process to store the target in the cache.
</p>
</li>
<li><p> &quot;worker&quot;: tell the HPC worker to store the target in the cache.
</p>
</li>
<li><p> NA: default to the <code>caching</code> argument of <code><a href="#topic+make">make()</a></code>.
</p>
</li></ul>

</li>
<li> <p><code>elapsed</code> and <code>cpu</code>: number of seconds to wait for the target to build
before timing out (<code>elapsed</code> for elapsed time and <code>cpu</code> for CPU time).
</p>
</li>
<li> <p><code>retries</code>: number of times to retry building a target
in the event of an error.
</p>
</li>
<li> <p><code>seed</code>: an optional pseudo-random number generator (RNG)
seed for each target. <code>drake</code> usually comes up with its own
unique reproducible target-specific seeds using the global seed
(the <code>seed</code> argument to <code><a href="#topic+make">make()</a></code> and <code><a href="#topic+drake_config">drake_config()</a></code>)
and the target names, but you can overwrite these automatic seeds.
<code>NA</code> entries default back to <code>drake</code>'s automatic seeds.
</p>
</li>
<li> <p><code>max_expand</code>: for dynamic branching only. Same as the <code>max_expand</code>
argument of <code><a href="#topic+make">make()</a></code>, but on a target-by-target basis.
Limits the number of sub-targets created for a given target.
</p>
</li></ul>



<h3>Keywords</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code> understands special keyword functions for your commands.
With the exception of <code><a href="#topic+target">target()</a></code>, each one is a proper function
with its own help file.
</p>

<ul>
<li> <p><code><a href="#topic+target">target()</a></code>: give the target more than just a command.
Using <code><a href="#topic+target">target()</a></code>, you can apply a transformation
(examples: <code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>), # nolint
supply a trigger (<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/triggers.html&#8288;</code>), # nolint
or set any number of custom columns.
</p>
</li>
<li> <p><code><a href="#topic+file_in">file_in()</a></code>: declare an input file dependency.
</p>
</li>
<li> <p><code><a href="#topic+file_out">file_out()</a></code>: declare an output file to be produced
when the target is built.
</p>
</li>
<li> <p><code><a href="#topic+knitr_in">knitr_in()</a></code>: declare a <code>knitr</code> file dependency such as an
R Markdown (<code style="white-space: pre;">&#8288;*.Rmd&#8288;</code>) or R LaTeX (<code style="white-space: pre;">&#8288;*.Rnw&#8288;</code>) file.
</p>
</li>
<li> <p><code><a href="#topic+ignore">ignore()</a></code>: force <code>drake</code> to entirely ignore a piece of code:
do not track it for changes and do not analyze it for dependencies.
</p>
</li>
<li> <p><code><a href="#topic+no_deps">no_deps()</a></code>: tell <code>drake</code> to not track the dependencies
of a piece of code. <code>drake</code> still tracks the code itself for changes.
</p>
</li>
<li> <p><code><a href="#topic+id_chr">id_chr()</a></code>: Get the name of the current target.
</p>
</li>
<li> <p><code><a href="#topic+drake_envir">drake_envir()</a></code>: get the environment where drake builds targets.
Intended for advanced custom memory management.
</p>
</li></ul>



<h3>Formats</h3>

<p>Specialized target formats increase efficiency and flexibility.
Some allow you to save specialized objects like <code>keras</code> models,
while others increase the speed while conserving storage and memory.
You can declare target-specific formats in the plan
(e.g. <code>drake_plan(x = target(big_data_frame, format = "fst"))</code>)
or supply a global default <code>format</code> for all targets in <code>make()</code>.
Either way, most formats have specialized installation requirements
(e.g. R packages) that are not installed with <code>drake</code> by default.
You will need to install them separately yourself.
Available formats:
</p>

<ul>
<li> <p><code>"file"</code>: Dynamic files. To use this format, simply create
local files and directories yourself and then return
a character vector of paths as the target's value.
Then, <code>drake</code> will watch for changes to those files in
subsequent calls to <code>make()</code>. This is a more flexible
alternative to <code>file_in()</code> and <code>file_out()</code>, and it is
compatible with dynamic branching.
See <code style="white-space: pre;">&#8288;https://github.com/ropensci/drake/pull/1178&#8288;</code> for an example.
</p>
</li>
<li> <p><code>"fst"</code>: save big data frames fast. Requires the <code>fst</code> package.
Note: this format strips non-data-frame attributes such as the
</p>
</li>
<li> <p><code>"fst_tbl"</code>: Like <code>"fst"</code>, but for <code>tibble</code> objects.
Requires the <code>fst</code> and <code>tibble</code> packages.
Strips away non-data-frame non-tibble attributes.
</p>
</li>
<li> <p><code>"fst_dt"</code>: Like <code>"fst"</code> format, but for <code>data.table</code> objects.
Requires the <code>fst</code> and <code>data.table</code> packages.
Strips away non-data-frame non-data-table attributes.
</p>
</li>
<li> <p><code>"diskframe"</code>:
Stores <code>disk.frame</code> objects, which could potentially be
larger than memory. Requires the <code>fst</code> and <code>disk.frame</code> packages.
Coerces objects to <code>disk.frame</code>s.
Note: <code>disk.frame</code> objects get moved to the <code>drake</code> cache
(a subfolder of <code style="white-space: pre;">&#8288;.drake/&#8288;</code> for most workflows).
To ensure this data transfer is fast, it is best to
save your <code>disk.frame</code> objects to the same physical storage
drive as the <code>drake</code> cache,
<code>as.disk.frame(your_dataset, outdir = drake_tempfile())</code>.
</p>
</li>
<li> <p><code>"keras"</code>: save Keras models as HDF5 files.
Requires the <code>keras</code> package.
</p>
</li>
<li> <p><code>"qs"</code>: save any R object that can be properly serialized
with the <code>qs</code> package. Requires the <code>qs</code> package.
Uses <code>qsave()</code> and <code>qread()</code>.
Uses the default settings in <code>qs</code> version 0.20.2.
</p>
</li>
<li> <p><code>"rds"</code>: save any R object that can be properly serialized.
Requires R version &gt;= 3.5.0 due to ALTREP.
Note: the <code>"rds"</code> format uses gzip compression, which is slow.
<code>"qs"</code> is a superior format.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Use target() to create your own custom columns in a drake plan.
# See ?triggers for more on triggers.
drake_plan(
  website_data = target(
    download_data("www.your_url.com"),
    trigger = "always",
    custom_column = 5
  ),
  analysis = analyze(website_data)
)
models &lt;- c("glm", "hierarchical")
plan &lt;- drake_plan(
  data = target(
    get_data(x),
    transform = map(x = c("simulated", "survey"))
  ),
  analysis = target(
    analyze_data(data, model),
    transform = cross(data, model = !!models, .id = c(x, model))
  ),
  summary = target(
    summarize_analysis(analysis),
    transform = map(analysis, .id = c(x, model))
  ),
  results = target(
    bind_rows(summary),
    transform = combine(summary, .by = data)
  )
)
plan
if (requireNamespace("styler", quietly = TRUE)) {
  print(drake_plan_source(plan))
}
</code></pre>

<hr>
<h2 id='target_namespaces'>Storr namespaces for targets
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+target_namespaces'></span>

<h3>Description</h3>

<p>Deprecated on 2019-01-13.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>target_namespaces(default = storr::storr_environment()$default_namespace)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="target_namespaces_+3A_default">default</code></td>
<td>
<p>Name of the default <code>storr</code> namespace.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Ordinary users do not need to worry about this function.
It is just another window into <code>drake</code>'s internals.
</p>


<h3>Value</h3>

<p>A character vector of <code>storr</code> namespaces that store
target-level information.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make">make()</a></code>
</p>

<hr>
<h2 id='text_drake_graph'>Show a workflow graph as text in your terminal window.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+text_drake_graph'></span>

<h3>Description</h3>

<p>This is a low-tech version of <code><a href="#topic+vis_drake_graph">vis_drake_graph()</a></code>
and friends. It is designed for when you do not have access
to the usual graphics devices for viewing visuals in an interactive
R session: for example, if you are logged into a remote machine
with SSH and you do not have access to X Window support.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>text_drake_graph(
  ...,
  from = NULL,
  mode = c("out", "in", "all"),
  order = NULL,
  subset = NULL,
  targets_only = FALSE,
  make_imports = TRUE,
  from_scratch = FALSE,
  group = NULL,
  clusters = NULL,
  show_output_files = TRUE,
  nchar = 1L,
  print = TRUE,
  config = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="text_drake_graph_+3A_...">...</code></td>
<td>
<p>Arguments to <code><a href="#topic+make">make()</a></code>, such as <code>plan</code> and <code>targets</code>.</p>
</td></tr>
<tr><td><code id="text_drake_graph_+3A_from">from</code></td>
<td>
<p>Optional collection of target/import names.
If <code>from</code> is nonempty,
the graph will restrict itself to
a neighborhood of <code>from</code>.
Control the neighborhood with
<code>mode</code> and <code>order</code>.</p>
</td></tr>
<tr><td><code id="text_drake_graph_+3A_mode">mode</code></td>
<td>
<p>Which direction to branch out in the graph
to create a neighborhood around <code>from</code>.
Use <code>"in"</code> to go upstream,
<code>"out"</code> to go downstream,
and <code>"all"</code> to go both ways and disregard
edge direction altogether.</p>
</td></tr>
<tr><td><code id="text_drake_graph_+3A_order">order</code></td>
<td>
<p>How far to branch out to create
a neighborhood around <code>from</code>. Defaults to
as far as possible. If a target is in the neighborhood, then
so are all of its custom <code><a href="#topic+file_out">file_out()</a></code> files if
<code>show_output_files</code> is <code>TRUE</code>.
That means the actual graph order may be slightly greater than
you might expect, but this ensures consistency
between <code>show_output_files = TRUE</code> and
<code>show_output_files = FALSE</code>.</p>
</td></tr>
<tr><td><code id="text_drake_graph_+3A_subset">subset</code></td>
<td>
<p>Optional character vector.
Subset of targets/imports to display in the graph.
Applied after <code>from</code>, <code>mode</code>, and <code>order</code>.
Be advised: edges are only kept for adjacent nodes in <code>subset</code>.
If you do not select all the intermediate nodes,
edges will drop from the graph.</p>
</td></tr>
<tr><td><code id="text_drake_graph_+3A_targets_only">targets_only</code></td>
<td>
<p>Logical,
whether to skip the imports and only include the
targets in the workflow plan.</p>
</td></tr>
<tr><td><code id="text_drake_graph_+3A_make_imports">make_imports</code></td>
<td>
<p>Logical, whether to make the imports first.
Set to <code>FALSE</code> to increase speed and risk using obsolete information.</p>
</td></tr>
<tr><td><code id="text_drake_graph_+3A_from_scratch">from_scratch</code></td>
<td>
<p>Logical, whether to assume all the targets
will be made from scratch on the next <code><a href="#topic+make">make()</a></code>.
Makes all targets outdated, but keeps information about
build progress in previous <code><a href="#topic+make">make()</a></code>s.</p>
</td></tr>
<tr><td><code id="text_drake_graph_+3A_group">group</code></td>
<td>
<p>Optional character scalar, name of the column used to
group nodes into columns. All the columns names of your original <code>drake</code>
plan are choices. The other choices (such as <code>"status"</code>) are column names
in the <code>nodes</code> . To group nodes into clusters in the graph,
you must also supply the <code>clusters</code> argument.</p>
</td></tr>
<tr><td><code id="text_drake_graph_+3A_clusters">clusters</code></td>
<td>
<p>Optional character vector of values to cluster on.
These values must be elements of the column of the <code>nodes</code> data frame
that you specify in the <code>group</code> argument to <code>drake_graph_info()</code>.</p>
</td></tr>
<tr><td><code id="text_drake_graph_+3A_show_output_files">show_output_files</code></td>
<td>
<p>Logical, whether to include
<code><a href="#topic+file_out">file_out()</a></code> files in the graph.</p>
</td></tr>
<tr><td><code id="text_drake_graph_+3A_nchar">nchar</code></td>
<td>
<p>For each node, maximum number of characters of the node label
to show. Can be 0, in which case each node is a colored box
instead of a node label.
Caution: <code>nchar</code> &gt; 0 will mess with the layout.</p>
</td></tr>
<tr><td><code id="text_drake_graph_+3A_print">print</code></td>
<td>
<p>Logical. If <code>TRUE</code>, the graph will print to the console
via <code>message()</code>. If <code>FALSE</code>, nothing is printed. However, you still
have the visualization because <code>text_drake_graph()</code> and
<code>render_text_drake_graph()</code> still invisibly return a character string
that you can print yourself with <code>message()</code>.</p>
</td></tr>
<tr><td><code id="text_drake_graph_+3A_config">config</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>visNetwork</code> graph.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+render_text_drake_graph">render_text_drake_graph()</a></code>, <code><a href="#topic+vis_drake_graph">vis_drake_graph()</a></code>,
<code><a href="#topic+sankey_drake_graph">sankey_drake_graph()</a></code>, <code><a href="#topic+drake_ggraph">drake_ggraph()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
# Plot the network graph representation of the workflow.
pkg &lt;- requireNamespace("txtplot", quietly = TRUE) &amp;&amp;
  requireNamespace("visNetwork", quietly = TRUE)
if (pkg) {
text_drake_graph(my_plan)
make(my_plan) # Run the project, build the targets.
text_drake_graph(my_plan) # The black nodes from before are now green.
}
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='text_drake_graph_impl'>Internal function with a drake_config() argument</h2><span id='topic+text_drake_graph_impl'></span>

<h3>Description</h3>

<p>Not a user-side function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>text_drake_graph_impl(
  config,
  from = NULL,
  mode = c("out", "in", "all"),
  order = NULL,
  subset = NULL,
  targets_only = FALSE,
  make_imports = TRUE,
  from_scratch = FALSE,
  group = NULL,
  clusters = NULL,
  show_output_files = TRUE,
  nchar = 1L,
  print = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="text_drake_graph_impl_+3A_config">config</code></td>
<td>
<p>A <code><a href="#topic+drake_config">drake_config()</a></code> object.</p>
</td></tr>
<tr><td><code id="text_drake_graph_impl_+3A_make_imports">make_imports</code></td>
<td>
<p>Logical, whether to make the imports first.
Set to <code>FALSE</code> to save some time and risk obsolete output.</p>
</td></tr>
</table>

<hr>
<h2 id='this_cache'>Get the cache at the exact file path specified.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+this_cache'></span>

<h3>Description</h3>

<p>This function does not apply to
in-memory caches such as <code>storr_environment()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>this_cache(
  path = NULL,
  force = FALSE,
  verbose = 1L,
  fetch_cache = NULL,
  console_log_file = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="this_cache_+3A_path">path</code></td>
<td>
<p>File path of the cache.</p>
</td></tr>
<tr><td><code id="this_cache_+3A_force">force</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="this_cache_+3A_verbose">verbose</code></td>
<td>
<p>Deprecated on 2019-09-11.</p>
</td></tr>
<tr><td><code id="this_cache_+3A_fetch_cache">fetch_cache</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="this_cache_+3A_console_log_file">console_log_file</code></td>
<td>
<p>Deprecated in favor of <code>log_make</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A drake/storr cache at the specified path, if it exists.
</p>

<hr>
<h2 id='tracked'>List the targets and imports that are reproducibly tracked.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+tracked'></span>

<h3>Description</h3>

<p>List all the spec
in your project's dependency network.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tracked(config)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tracked_+3A_config">config</code></td>
<td>
<p>An output list from <code><a href="#topic+drake_config">drake_config()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with the names of reproducibly-tracked targets.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Load the canonical example for drake.
# List all the targets/imports that are reproducibly tracked.
config &lt;- drake_config(my_plan)
tracked(config)
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='transform_plan'>Transform a plan
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+transform_plan'></span>

<h3>Description</h3>

<p>Evaluate the <code>map()</code>, <code>cross()</code>, <code>split()</code> and
<code>combine()</code> operations in the <code>transform</code> column of a
<code>drake</code> plan.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform_plan(
  plan,
  envir = parent.frame(),
  trace = FALSE,
  max_expand = NULL,
  tidy_eval = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="transform_plan_+3A_plan">plan</code></td>
<td>
<p>A <code>drake</code> plan with a <code>transform</code> column</p>
</td></tr>
<tr><td><code id="transform_plan_+3A_envir">envir</code></td>
<td>
<p>Environment for tidy evaluation.</p>
</td></tr>
<tr><td><code id="transform_plan_+3A_trace">trace</code></td>
<td>
<p>Logical, whether to add columns to show
what happens during target transformations.</p>
</td></tr>
<tr><td><code id="transform_plan_+3A_max_expand">max_expand</code></td>
<td>
<p>Positive integer, optional.
<code>max_expand</code> is the maximum number of targets to generate in each
<code>map()</code>, <code>split()</code>, or <code>cross()</code> transform.
Useful if you have a massive plan and you want to
test and visualize a strategic subset of targets
before scaling up.
Note: the <code>max_expand</code> argument of <code>drake_plan()</code> and
<code>transform_plan()</code> is for static branching only.
The dynamic branching <code>max_expand</code>
is an argument of <code>make()</code> and <code>drake_config()</code>.</p>
</td></tr>
<tr><td><code id="transform_plan_+3A_tidy_eval">tidy_eval</code></td>
<td>
<p>Logical, whether to use tidy evaluation
(e.g. unquoting/<code style="white-space: pre;">&#8288;!!&#8288;</code>) when resolving commands.
Tidy evaluation in transformations is always turned on
regardless of the value you supply to this argument.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code> # nolint
</p>


<h3>See Also</h3>

<p>drake_plan, map, split, cross, combine
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plan1 &lt;- drake_plan(
  y = target(
    f(x),
    transform = map(x = c(1, 2))
  ),
  transform = FALSE
)
plan2 &lt;- drake_plan(
  z = target(
    g(y),
    transform = map(y, .id = x)
  ),
  transform = FALSE
)
plan &lt;- bind_plans(plan1, plan2)
transform_plan(plan)
models &lt;- c("glm", "hierarchical")
plan &lt;- drake_plan(
  data = target(
    get_data(x),
    transform = map(x = c("simulated", "survey"))
  ),
  analysis = target(
    analyze_data(data, model),
    transform = cross(data, model = !!models, .id = c(x, model))
  ),
  summary = target(
    summarize_analysis(analysis),
    transform = map(analysis, .id = c(x, model))
  ),
  results = target(
    bind_rows(summary),
    transform = combine(summary, .by = data)
  )
)
plan
if (requireNamespace("styler", quietly = TRUE)) {
  print(drake_plan_source(plan))
}
# Tags:
drake_plan(
  x = target(
    command,
    transform = map(y = c(1, 2), .tag_in = from, .tag_out = c(to, out))
  ),
  trace = TRUE
)
plan &lt;- drake_plan(
  survey = target(
    survey_data(x),
    transform = map(x = c(1, 2), .tag_in = source, .tag_out = dataset)
  ),
  download = target(
    download_data(),
    transform = map(y = c(5, 6), .tag_in = source, .tag_out = dataset)
  ),
  analysis = target(
    analyze(dataset),
    transform = map(dataset)
  ),
  results = target(
    bind_rows(analysis),
    transform = combine(analysis, .by = source)
  )
)
plan
if (requireNamespace("styler", quietly = TRUE)) {
  print(drake_plan_source(plan))
}
</code></pre>

<hr>
<h2 id='transformations'>Transformations in <code>drake_plan()</code>. <a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+transformations'></span><span id='topic+map'></span><span id='topic+split'></span><span id='topic+cross'></span><span id='topic+combine'></span><span id='topic+group'></span>

<h3>Description</h3>

<p>In <code><a href="#topic+drake_plan">drake_plan()</a></code>, you can define whole batches
of targets with transformations such as
<code>map()</code>, <code>split()</code>, <code>cross()</code>, and <code>combine()</code>.
</p>


<h3>Arguments</h3>

<table>
<tr><td><code id="transformations_+3A_...">...</code></td>
<td>
<p>Grouping variables. New grouping variables must be
supplied with their names and values, existing grouping variables
can be given as symbols without any values assigned.
For dynamic branching, the entries in <code>...</code> must be unnamed symbols
with no values supplied, and they must be the names of targets.</p>
</td></tr>
<tr><td><code id="transformations_+3A_.data">.data</code></td>
<td>
<p>A data frame of new grouping variables with
grouping variable names as column names and values as elements.</p>
</td></tr>
<tr><td><code id="transformations_+3A_.names">.names</code></td>
<td>
<p>Literal character vector of names for the targets.
Must be the same length as the targets generated.</p>
</td></tr>
<tr><td><code id="transformations_+3A_.id">.id</code></td>
<td>
<p>Symbol or vector of symbols naming grouping variables
to incorporate into target names. Useful for creating short target
names. Set <code>.id = FALSE</code> to use integer indices as target name suffixes.</p>
</td></tr>
<tr><td><code id="transformations_+3A_.tag_in">.tag_in</code></td>
<td>
<p>A symbol or vector of symbols. Tags assign targets
to grouping variables. Use <code>.tag_in</code> to assign <em>untransformed</em>
targets to grouping variables.</p>
</td></tr>
<tr><td><code id="transformations_+3A_.tag_out">.tag_out</code></td>
<td>
<p>Just like <code>.tag_in</code>, except that <code>.tag_out</code>
assigns <em>transformed</em> targets to grouping variables.</p>
</td></tr>
<tr><td><code id="transformations_+3A_slice">slice</code></td>
<td>
<p>Number of slices into which <code>split()</code> partitions the data.</p>
</td></tr>
<tr><td><code id="transformations_+3A_margin">margin</code></td>
<td>
<p>Which margin to take the slices in <code>split()</code>. Same meaning
as the <code>MARGIN</code> argument of <code>apply()</code>.</p>
</td></tr>
<tr><td><code id="transformations_+3A_drop">drop</code></td>
<td>
<p>Logical, whether to drop a dimension if its length is 1.
Same meaning as <code>mtcars[, 1L, drop = TRUE]</code> versus
<code>mtcars[, 1L, drop = TRUE]</code>.</p>
</td></tr>
<tr><td><code id="transformations_+3A_.by">.by</code></td>
<td>
<p>Symbol or vector of symbols of grouping variables.
<code>combine()</code> aggregates/groups targets by the grouping variables in <code>.by</code>.
For dynamic branching, <code>.by</code> can only take one variable at a time,
and that variable must be a vector. Ideally, it should take
little space in memory.</p>
</td></tr>
<tr><td><code id="transformations_+3A_.trace">.trace</code></td>
<td>
<p>Symbol or vector of symbols for the dynamic trace.
The dynamic trace allows you to keep track of the values of
dynamic dependencies are associated with individual sub-targets.
For <code>combine()</code>, <code>.trace</code> must either be empty or the same as the
variable given for <code>.by</code>.
See <code><a href="#topic+get_trace">get_trace()</a></code> and <code><a href="#topic+read_trace">read_trace()</a></code> for examples and other details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For details, see
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>.
</p>


<h3>Transformations</h3>

<p><code>drake</code> has special syntax for generating large plans.
Your code will look something like
<code style="white-space: pre;">&#8288;drake_plan(y = target(f(x), transform = map(x = c(1, 2, 3)))&#8288;</code>
You can read about this interface at
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#large-plans&#8288;</code>. # nolint
</p>


<h3>Static branching</h3>

<p>In static branching, you define batches of targets
based on information you know in advance.
Overall usage looks like
<code style="white-space: pre;">&#8288;drake_plan(&lt;x&gt; = target(&lt;...&gt;, transform = &lt;call&gt;)&#8288;</code>,
where
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;&lt;x&gt;&#8288;</code> is the name of the target or group of targets.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;&lt;...&gt;&#8288;</code> is optional arguments to <code><a href="#topic+target">target()</a></code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;&lt;call&gt;&#8288;</code> is a call to one of the transformation functions.
</p>
</li></ul>

<p>Transformation function usage:
</p>

<ul>
<li> <p><code>map(..., .data, .names, .id, .tag_in, .tag_out)</code>
</p>
</li>
<li> <p><code>split(..., slices, margin = 1L, drop = FALSE, .names, .tag_in, .tag_out)</code> # nolint
</p>
</li>
<li> <p><code>cross(..., .data, .names, .id, .tag_in, .tag_out)</code>
</p>
</li>
<li> <p><code>combine(..., .by, .names, .id, .tag_in, .tag_out)</code>
</p>
</li></ul>



<h3>Dynamic branching</h3>


<ul>
<li> <p><code>map(..., .trace)</code>
</p>
</li>
<li> <p><code>cross(..., .trace)</code>
</p>
</li>
<li> <p><code>group(..., .by, .trace)</code>
</p>
</li></ul>

<p><code>map()</code> and <code>cross()</code> create dynamic sub-targets from the variables
supplied to the dots. As with static branching, the variables
supplied to <code>map()</code> must all have equal length.
<code>group(f(data), .by = x)</code> makes new dynamic
sub-targets from <code>data</code>. Here, <code>data</code> can be either static or dynamic.
If <code>data</code> is dynamic, <code>group()</code> aggregates existing sub-targets.
If <code>data</code> is static, <code>group()</code> splits <code>data</code> into multiple
subsets based on the groupings from <code>.by</code>.
</p>
<p>Differences from static branching:
</p>

<ul>
<li> <p><code>...</code> must contain <em>unnamed</em> symbols with no values supplied,
and they must be the names of targets.
</p>
</li>
<li><p> Arguments <code>.id</code>, <code>.tag_in</code>, and <code>.tag_out</code> no longer apply.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># Static branching
models &lt;- c("glm", "hierarchical")
plan &lt;- drake_plan(
  data = target(
    get_data(x),
    transform = map(x = c("simulated", "survey"))
  ),
  analysis = target(
    analyze_data(data, model),
    transform = cross(data, model = !!models, .id = c(x, model))
  ),
  summary = target(
    summarize_analysis(analysis),
    transform = map(analysis, .id = c(x, model))
  ),
  results = target(
    bind_rows(summary),
    transform = combine(summary, .by = data)
  )
)
plan
if (requireNamespace("styler")) {
  print(drake_plan_source(plan))
}
# Static splitting
plan &lt;- drake_plan(
  analysis = target(
    analyze(data),
    transform = split(data, slices = 3L, margin = 1L, drop = FALSE)
  )
)
print(plan)
if (requireNamespace("styler", quietly = TRUE)) {
  print(drake_plan_source(plan))
}
# Static tags:
drake_plan(
  x = target(
    command,
    transform = map(y = c(1, 2), .tag_in = from, .tag_out = c(to, out))
  ),
  trace = TRUE
)
plan &lt;- drake_plan(
  survey = target(
    survey_data(x),
    transform = map(x = c(1, 2), .tag_in = source, .tag_out = dataset)
  ),
  download = target(
    download_data(),
    transform = map(y = c(5, 6), .tag_in = source, .tag_out = dataset)
  ),
  analysis = target(
    analyze(dataset),
    transform = map(dataset)
  ),
  results = target(
    bind_rows(analysis),
    transform = combine(analysis, .by = source)
  )
)
plan
if (requireNamespace("styler", quietly = TRUE)) {
  print(drake_plan_source(plan))
}
</code></pre>

<hr>
<h2 id='trigger'>Customize the decision rules for rebuilding targets
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+trigger'></span>

<h3>Description</h3>

<p>Use this function inside a target's command
in your <code><a href="#topic+drake_plan">drake_plan()</a></code> or the <code>trigger</code> argument to
<code><a href="#topic+make">make()</a></code> or <code><a href="#topic+drake_config">drake_config()</a></code>.
For details, see the chapter on triggers
in the user manual:
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/triggers.html&#8288;</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trigger(
  command = TRUE,
  depend = TRUE,
  file = TRUE,
  seed = TRUE,
  format = TRUE,
  condition = FALSE,
  change = NULL,
  mode = c("whitelist", "blacklist", "condition")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trigger_+3A_command">command</code></td>
<td>
<p>Logical, whether to rebuild the target if the
<code><a href="#topic+drake_plan">drake_plan()</a></code> command changes.</p>
</td></tr>
<tr><td><code id="trigger_+3A_depend">depend</code></td>
<td>
<p>Logical, whether to rebuild if a
non-file dependency changes.</p>
</td></tr>
<tr><td><code id="trigger_+3A_file">file</code></td>
<td>
<p>Logical, whether to rebuild the target
if a <code><a href="#topic+file_in">file_in()</a></code>/<code><a href="#topic+file_out">file_out()</a></code>/<code><a href="#topic+knitr_in">knitr_in()</a></code> file changes.
Also applies to external data tracked with
<code>target(format = "file")</code>.</p>
</td></tr>
<tr><td><code id="trigger_+3A_seed">seed</code></td>
<td>
<p>Logical, whether to rebuild the target
if the seed changes. Only makes a difference if you set
a custom <code>seed</code> column in your <code><a href="#topic+drake_plan">drake_plan()</a></code> at some point
in your workflow.</p>
</td></tr>
<tr><td><code id="trigger_+3A_format">format</code></td>
<td>
<p>Logical, whether to rebuild the target if the
choice of specialized data format changes: for example,
if you use <code>target(format = "qs")</code> one instance and
<code>target(format = "fst")</code> the next. See
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/plans.html#special-data-formats-for-targets&#8288;</code> # nolint
for details on formats.</p>
</td></tr>
<tr><td><code id="trigger_+3A_condition">condition</code></td>
<td>
<p>R code (expression or language object)
that returns a logical. The target will rebuild
if the code evaluates to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="trigger_+3A_change">change</code></td>
<td>
<p>R code (expression or language object)
that returns any value. The target will rebuild
if that value is different from last time
or not already cached.</p>
</td></tr>
<tr><td><code id="trigger_+3A_mode">mode</code></td>
<td>
<p>A character scalar equal to <code>"whitelist"</code> (default) or
<code>"blacklist"</code> or <code>"condition"</code>. With the <code>mode</code> argument, you can choose
how the <code>condition</code> trigger factors into the decision to build
or skip the target. Here are the options.
</p>

<ul>
<li> <p><code>"whitelist"</code> (default): we <em>rebuild</em> the target whenever <code>condition</code>
evaluates to <code>TRUE</code>. Otherwise, we defer to the other triggers.
This behavior is the same as the decision rule described in the
&quot;Details&quot; section of this help file.
</p>
</li>
<li> <p><code>"blacklist"</code>: we <em>skip</em> the target whenever <code>condition</code> evaluates
to <code>FALSE</code>. Otherwise, we defer to the other triggers.
</p>
</li>
<li> <p><code>"condition"</code>: here, the <code>condition</code> trigger is the only decider,
and we ignore all the other triggers. We <em>rebuild</em> target whenever
<code>condition</code> evaluates to <code>TRUE</code> and <em>skip</em> it whenever <code>condition</code>
evaluates to <code>FALSE</code>.
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>A target always builds if it has not been built before.
Triggers allow you to customize the conditions
under which a pre-existing target <em>re</em>builds.
By default, the target will rebuild if and only if:
</p>

<ul>
<li><p> Any of <code>command</code>, <code>depend</code>, or <code>file</code> is <code>TRUE</code>, or
</p>
</li>
<li> <p><code>condition</code> evaluates to <code>TRUE</code>, or
</p>
</li>
<li> <p><code>change</code> evaluates to a value different from last time.
The above steps correspond to the &quot;whitelist&quot; decision rule.
You can select other decision rules with the <code>mode</code> argument
described in this help file.
On another note, there may be a slight efficiency loss
if you set complex triggers
for <code>change</code> and/or <code>condition</code> because
<code>drake</code> needs to load any required dependencies
into memory before evaluating these triggers.
</p>
</li></ul>



<h3>Value</h3>

<p>A list of trigger specification details that
<code>drake</code> processes internally when it comes time to decide
whether to build the target.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drake_plan">drake_plan()</a></code>, <code><a href="#topic+make">make()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># A trigger is just a set of decision rules
# to decide whether to build a target.
trigger()
# This trigger will build a target on Tuesdays
# and when the value of an online dataset changes.
trigger(condition = today() == "Tuesday", change = get_online_dataset())
## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
# You can use a global trigger argument:
# for example, to always run everything.
make(my_plan, trigger = trigger(condition = TRUE))
make(my_plan, trigger = trigger(condition = TRUE))
# You can also define specific triggers for each target.
plan &lt;- drake_plan(
  x = sample.int(15),
  y = target(
    command = x + 1,
    trigger = trigger(depend = FALSE)
  )
)
# Now, when x changes, y will not.
make(plan)
make(plan)
plan$command[1] &lt;- "sample.int(16)" # change x
make(plan)
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='triggers'>List the old drake triggers.
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></h2><span id='topic+triggers'></span>

<h3>Description</h3>

<p>Triggers are target-level rules
that tell <code><a href="#topic+make">make()</a></code> how to know if a target
is outdated or up to date.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>triggers()
</code></pre>


<h3>Details</h3>

<p>Deprecated on 2018-07-22.
</p>


<h3>Value</h3>

<p>A character vector with the names of the old triggers.
</p>

<hr>
<h2 id='type_sum.expr_list'>Type summary printing
<a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a></h2><span id='topic+type_sum.expr_list'></span>

<h3>Description</h3>

<p>Ensures <code style="white-space: pre;">&#8288;&lt;expr&gt;&#8288;</code> is printed at the top
of any <code>drake</code> plan column that is a list of language objects
(e.g. <code>plan$command</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>type_sum.expr_list(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="type_sum.expr_list_+3A_x">x</code></td>
<td>
<p>List of language objects.</p>
</td></tr>
</table>

<hr>
<h2 id='use_drake'>Use drake in a project
<a href="https://lifecycle.r-lib.org/articles/stages.html#questioning"><img src="../help/figures/lifecycle-questioning.svg" alt='[Questioning]' /></a></h2><span id='topic+use_drake'></span>

<h3>Description</h3>

<p>Add top-level R script files to use <code>drake</code>
in your data analysis project. For details, read
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/projects.html&#8288;</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>use_drake(open = interactive())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="use_drake_+3A_open">open</code></td>
<td>
<p>Logical, whether to open <code>make.R</code> for editing.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Files written:
</p>

<ol>
<li> <p><code>make.R</code>: a suggested main R script for batch mode.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;_drake.R&#8288;</code>: a configuration R script for
the <code style="white-space: pre;">&#8288;r_*()&#8288;</code> functions documented at # nolint
<code style="white-space: pre;">&#8288;https://books.ropensci.org/drake/projects.html#safer-interactivity&#8288;</code>. # nolint
Remarks:
</p>
</li></ol>


<ul>
<li><p> There is nothing magical about the name, <code>make.R</code>.
You can call it whatever you want.
</p>
</li>
<li><p> Other supporting scripts, such as <code>R/packages.R</code>,
<code>R/functions.R</code>, and <code>R/plan.R</code>, are not included.
</p>
</li>
<li><p> You can find examples at
<code style="white-space: pre;">&#8288;https://github.com/wlandau/drake-examples&#8288;</code>
and download examples with <code><a href="#topic+drake_example">drake_example()</a></code>
(e.g. <code>drake_example("main")</code>).
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# use_drake(open = FALSE) # nolint

## End(Not run)
</code></pre>

<hr>
<h2 id='vis_drake_graph'>Show an interactive visual network representation
of your drake project.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+vis_drake_graph'></span>

<h3>Description</h3>

<p>It is good practice to visualize the dependency graph
before running the targets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vis_drake_graph(
  ...,
  file = character(0),
  selfcontained = FALSE,
  build_times = "build",
  digits = 3,
  targets_only = FALSE,
  font_size = 20,
  layout = NULL,
  main = NULL,
  direction = NULL,
  hover = FALSE,
  navigationButtons = TRUE,
  from = NULL,
  mode = c("out", "in", "all"),
  order = NULL,
  subset = NULL,
  ncol_legend = 1,
  full_legend = FALSE,
  make_imports = TRUE,
  from_scratch = FALSE,
  group = NULL,
  clusters = NULL,
  show_output_files = TRUE,
  collapse = TRUE,
  on_select_col = NULL,
  on_select = NULL,
  level_separation = NULL,
  config = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vis_drake_graph_+3A_...">...</code></td>
<td>
<p>Arguments to <code><a href="#topic+make">make()</a></code>, such as <code>plan</code> and <code>targets</code>.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_file">file</code></td>
<td>
<p>Name of a file to save the graph.
If <code>NULL</code> or <code>character(0)</code>, no file is saved and
the graph is rendered and displayed within R.
If the file ends in a <code>.png</code>, <code>.jpg</code>, <code>.jpeg</code>, or <code>.pdf</code> extension,
then a static image will be saved. In this case,
the webshot package and PhantomJS are required:
<code style="white-space: pre;">&#8288;install.packages("webshot"); webshot::install_phantomjs()&#8288;</code>.
If the file does not end in a <code>.png</code>, <code>.jpg</code>, <code>.jpeg</code>, or <code>.pdf</code>
extension, an HTML file will be saved, and you can open the
interactive graph using a web browser.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_selfcontained">selfcontained</code></td>
<td>
<p>Logical, whether
to save the <code>file</code> as a self-contained
HTML file (with external resources base64 encoded) or a file with
external resources placed in an adjacent directory. If <code>TRUE</code>,
pandoc is required. The <code>selfcontained</code> argument only applies
to HTML files. In other words, if <code>file</code> is a
PNG, PDF, or JPEG file, for instance,
the point is moot.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_build_times">build_times</code></td>
<td>
<p>Character string or logical.
If character, the choices are
1. <code>"build"</code>: runtime of the command plus the time
it take to store the target or import.
2. <code>"command"</code>: just the runtime of the command.
3. <code>"none"</code>: no build times.
If logical, <code>build_times</code> selects whether to show the
times from 'build_times(..., type = &quot;build&quot;)&ldquo; or use
no build times at all. See <code><a href="#topic+build_times">build_times()</a></code> for details.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_digits">digits</code></td>
<td>
<p>Number of digits for rounding the build times</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_targets_only">targets_only</code></td>
<td>
<p>Logical,
whether to skip the imports and only include the
targets in the workflow plan.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_font_size">font_size</code></td>
<td>
<p>Numeric, font size of the node labels in the graph</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_layout">layout</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_main">main</code></td>
<td>
<p>Character string, title of the graph.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_direction">direction</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_hover">hover</code></td>
<td>
<p>Logical, whether to show text (file contents,
commands, etc.) when you hover your cursor over a node.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_navigationbuttons">navigationButtons</code></td>
<td>
<p>Logical, whether to add navigation buttons with
<code>visNetwork::visInteraction(navigationButtons = TRUE)</code></p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_from">from</code></td>
<td>
<p>Optional collection of target/import names.
If <code>from</code> is nonempty,
the graph will restrict itself to
a neighborhood of <code>from</code>.
Control the neighborhood with
<code>mode</code> and <code>order</code>.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_mode">mode</code></td>
<td>
<p>Which direction to branch out in the graph
to create a neighborhood around <code>from</code>.
Use <code>"in"</code> to go upstream,
<code>"out"</code> to go downstream,
and <code>"all"</code> to go both ways and disregard
edge direction altogether.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_order">order</code></td>
<td>
<p>How far to branch out to create
a neighborhood around <code>from</code>. Defaults to
as far as possible. If a target is in the neighborhood, then
so are all of its custom <code><a href="#topic+file_out">file_out()</a></code> files if
<code>show_output_files</code> is <code>TRUE</code>.
That means the actual graph order may be slightly greater than
you might expect, but this ensures consistency
between <code>show_output_files = TRUE</code> and
<code>show_output_files = FALSE</code>.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_subset">subset</code></td>
<td>
<p>Optional character vector.
Subset of targets/imports to display in the graph.
Applied after <code>from</code>, <code>mode</code>, and <code>order</code>.
Be advised: edges are only kept for adjacent nodes in <code>subset</code>.
If you do not select all the intermediate nodes,
edges will drop from the graph.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_ncol_legend">ncol_legend</code></td>
<td>
<p>Number of columns in the legend nodes.
To remove the legend entirely, set <code>ncol_legend</code> to <code>NULL</code> or <code>0</code>.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_full_legend">full_legend</code></td>
<td>
<p>Logical. If <code>TRUE</code>, all the node types
are printed in the legend. If <code>FALSE</code>, only the
node types used are printed in the legend.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_make_imports">make_imports</code></td>
<td>
<p>Logical, whether to make the imports first.
Set to <code>FALSE</code> to increase speed and risk using obsolete information.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_from_scratch">from_scratch</code></td>
<td>
<p>Logical, whether to assume all the targets
will be made from scratch on the next <code><a href="#topic+make">make()</a></code>.
Makes all targets outdated, but keeps information about
build progress in previous <code><a href="#topic+make">make()</a></code>s.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_group">group</code></td>
<td>
<p>Optional character scalar, name of the column used to
group nodes into columns. All the columns names of your original <code>drake</code>
plan are choices. The other choices (such as <code>"status"</code>) are column names
in the <code>nodes</code> . To group nodes into clusters in the graph,
you must also supply the <code>clusters</code> argument.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_clusters">clusters</code></td>
<td>
<p>Optional character vector of values to cluster on.
These values must be elements of the column of the <code>nodes</code> data frame
that you specify in the <code>group</code> argument to <code>drake_graph_info()</code>.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_show_output_files">show_output_files</code></td>
<td>
<p>Logical, whether to include
<code><a href="#topic+file_out">file_out()</a></code> files in the graph.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_collapse">collapse</code></td>
<td>
<p>Logical, whether to allow nodes to collapse
if you double click on them.
Analogous to <code>visNetwork::visOptions(collapse = TRUE)</code>.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_on_select_col">on_select_col</code></td>
<td>
<p>Optional string corresponding to the column name
in the plan that should provide data for the <code>on_select</code> event.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_on_select">on_select</code></td>
<td>
<p>defines node selection event handling.
Either a string of valid JavaScript that may be passed to
<code>visNetwork::visEvents()</code>, or one of the following:
<code>TRUE</code>, <code>NULL</code>/<code>FALSE</code>. If <code>TRUE</code> , enables the default behavior of
opening the link specified by the <code>on_select_col</code> given to
<code>drake_graph_info()</code>. <code>NULL</code>/<code>FALSE</code> disables the behavior.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_level_separation">level_separation</code></td>
<td>
<p>Numeric, <code>levelSeparation</code> argument to
<code>visNetwork::visHierarchicalLayout()</code>. Controls the distance
between hierarchical levels. Consider setting if the
aspect ratio of the graph is far from 1.
Defaults to 150 through <code>visNetwork</code>.</p>
</td></tr>
<tr><td><code id="vis_drake_graph_+3A_config">config</code></td>
<td>
<p>Deprecated.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For enhanced interactivity in the graph, see the <code>mandrake</code>
package.
</p>


<h3>Value</h3>

<p>A <code>visNetwork</code> graph.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+render_drake_graph">render_drake_graph()</a></code>, <code><a href="#topic+sankey_drake_graph">sankey_drake_graph()</a></code>,
<code><a href="#topic+drake_ggraph">drake_ggraph()</a></code>, <code><a href="#topic+text_drake_graph">text_drake_graph()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
if (suppressWarnings(require("knitr"))) {
load_mtcars_example() # Get the code with drake_example("mtcars").
# Plot the network graph representation of the workflow.
if (requireNamespace("visNetwork", quietly = TRUE)) {
vis_drake_graph(my_plan)
make(my_plan) # Run the project, build the targets.
vis_drake_graph(my_plan) # The red nodes from before are now green.
# Plot a subgraph of the workflow.
vis_drake_graph(
  my_plan,
  from = c("small", "reg2")
)
}
}
})

## End(Not run)
</code></pre>

<hr>
<h2 id='vis_drake_graph_impl'>Internal function with a drake_config() argument</h2><span id='topic+vis_drake_graph_impl'></span>

<h3>Description</h3>

<p>Not a user-side function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vis_drake_graph_impl(
  config,
  file = character(0),
  selfcontained = FALSE,
  build_times = "build",
  digits = 3,
  targets_only = FALSE,
  font_size = 20,
  layout = NULL,
  main = NULL,
  direction = NULL,
  hover = FALSE,
  navigationButtons = TRUE,
  from = NULL,
  mode = c("out", "in", "all"),
  order = NULL,
  subset = NULL,
  ncol_legend = 1,
  full_legend = FALSE,
  make_imports = TRUE,
  from_scratch = FALSE,
  group = NULL,
  clusters = NULL,
  show_output_files = TRUE,
  collapse = TRUE,
  on_select_col = NULL,
  on_select = NULL,
  level_separation = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vis_drake_graph_impl_+3A_config">config</code></td>
<td>
<p>A <code><a href="#topic+drake_config">drake_config()</a></code> object.</p>
</td></tr>
</table>

<hr>
<h2 id='walk_code'>Static code analysis</h2><span id='topic+walk_code'></span>

<h3>Description</h3>

<p>Static code analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>walk_code(expr, results, locals, restrict)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="walk_code_+3A_expr">expr</code></td>
<td>
<p>A function or expression.</p>
</td></tr>
<tr><td><code id="walk_code_+3A_results">results</code></td>
<td>
<p>A <code>drake_deps</code> object.</p>
</td></tr>
<tr><td><code id="walk_code_+3A_locals">locals</code></td>
<td>
<p>An environment, a hash table of local variables.</p>
</td></tr>
<tr><td><code id="walk_code_+3A_restrict">restrict</code></td>
<td>
<p>An environment,
a hash table for whitelisting global symbols.</p>
</td></tr>
</table>

<hr>
<h2 id='which_clean'>Which targets will <code>clean()</code> invalidate?
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a></h2><span id='topic+which_clean'></span>

<h3>Description</h3>

<p><code>which_clean()</code> is a safety check for <code>clean()</code>.
It shows you the targets that <code>clean()</code> will
invalidate (or remove if <code>garbage_collection</code> is <code>TRUE</code>).
It helps you avoid accidentally removing targets you care about.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>which_clean(
  ...,
  list = character(0),
  path = NULL,
  cache = drake::drake_cache(path = path)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="which_clean_+3A_...">...</code></td>
<td>
<p>Targets to remove from the cache: as names (symbols) or
character strings. If the <code>tidyselect</code> package is installed,
you can also supply <code>dplyr</code>-style <code>tidyselect</code>
commands such as <code>starts_with()</code>, <code>ends_with()</code>, and <code>one_of()</code>.</p>
</td></tr>
<tr><td><code id="which_clean_+3A_list">list</code></td>
<td>
<p>Character vector naming targets to be removed from the
cache. Similar to the <code>list</code> argument of <code><a href="base.html#topic+remove">remove()</a></code>.</p>
</td></tr>
<tr><td><code id="which_clean_+3A_path">path</code></td>
<td>
<p>Path to a <code>drake</code> cache
(usually a hidden <code style="white-space: pre;">&#8288;.drake/&#8288;</code> folder) or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="which_clean_+3A_cache">cache</code></td>
<td>
<p>drake cache. See <code><a href="#topic+new_cache">new_cache()</a></code>.
If supplied, <code>path</code> is ignored.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+clean">clean()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
isolate_example("Quarantine side effects.", {
plan &lt;- drake_plan(x = 1, y = 2, z = 3)
make(plan)
cached()
which_clean(x, y) # [1] "x" "y"
clean(x, y)       # Invalidates targets x and y.
cached()          # [1] "z"
})

## End(Not run)
</code></pre>

<hr>
<h2 id='workflow'>workflow <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+workflow'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>workflow(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="workflow_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

<hr>
<h2 id='workplan'>workplan <a href="https://lifecycle.r-lib.org/articles/stages.html#defunct"><img src="../help/figures/lifecycle-defunct.svg" alt='[Defunct]' /></a></h2><span id='topic+workplan'></span>

<h3>Description</h3>

<p>2019-02-15
</p>


<h3>Usage</h3>

<pre><code class='language-R'>workplan(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="workplan_+3A_...">...</code></td>
<td>
<p>Arguments</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
