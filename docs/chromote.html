<!DOCTYPE html><html><head><title>Help for package chromote</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {chromote}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#Browser'><p>Browser base class</p></a></li>
<li><a href='#Chrome'><p>Local Chrome process</p></a></li>
<li><a href='#ChromeRemote'><p>Remote Chrome process</p></a></li>
<li><a href='#Chromote'><p>Chromote class</p></a></li>
<li><a href='#chromote-package'><p>chromote: Headless Chrome Web Browser Interface</p></a></li>
<li><a href='#ChromoteSession'><p>ChromoteSession class</p></a></li>
<li><a href='#default_chrome_args'><p>Default Chrome arguments</p></a></li>
<li><a href='#default_chromote_object'><p>Default Chromote object</p></a></li>
<li><a href='#find_chrome'><p>Find path to Chrome or Chromium browser</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Headless Chrome Web Browser Interface</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.0</td>
</tr>
<tr>
<td>Description:</td>
<td>An implementation of the 'Chrome DevTools Protocol', for
    controlling a headless Chrome web browser.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://rstudio.github.io/chromote/">https://rstudio.github.io/chromote/</a>,
<a href="https://github.com/rstudio/chromote">https://github.com/rstudio/chromote</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/rstudio/chromote/issues">https://github.com/rstudio/chromote/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>curl, fastmap, jsonlite, later (&ge; 1.1.0), magrittr, processx,
promises (&ge; 1.1.1), R6, rlang, utils, websocket (&ge; 1.2.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>showimage, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>tidyverse/tidytemplate</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>Google Chrome or other Chromium-based browser.
chromium: chromium (rpm) or chromium-browser (deb)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-12 15:50:55 UTC; winston</td>
</tr>
<tr>
<td>Author:</td>
<td>Winston Chang [aut, cre],
  Barret Schloerke <a href="https://orcid.org/0000-0001-9986-114X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Posit Software, PBC [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Winston Chang &lt;winston@posit.co&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-12 16:20:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='Browser'>Browser base class</h2><span id='topic+Browser'></span>

<h3>Description</h3>

<p>Base class for browsers like Chrome, Chromium, etc. Defines the interface
used by various browser implementations. It can represent a local browser
process or one running remotely.
</p>


<h3>Details</h3>

<p>The <code>initialize()</code> method of an implementation should set private$host
and private$port. If the process is local, the <code>initialize()</code> method
should also set private$process.
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-Browser-is_local"><code>Browser$is_local()</code></a>
</p>
</li>
<li> <p><a href="#method-Browser-get_process"><code>Browser$get_process()</code></a>
</p>
</li>
<li> <p><a href="#method-Browser-is_alive"><code>Browser$is_alive()</code></a>
</p>
</li>
<li> <p><a href="#method-Browser-get_host"><code>Browser$get_host()</code></a>
</p>
</li>
<li> <p><a href="#method-Browser-get_port"><code>Browser$get_port()</code></a>
</p>
</li>
<li> <p><a href="#method-Browser-close"><code>Browser$close()</code></a>
</p>
</li>
<li> <p><a href="#method-Browser-clone"><code>Browser$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-Browser-is_local"></a>



<h4>Method <code>is_local()</code></h4>

<p>Is local browser?
Returns TRUE if the browser is running locally, FALSE if it's remote.
</p>


<h5>Usage</h5>

<div class="r"><pre>Browser$is_local()</pre></div>


<hr>
<a id="method-Browser-get_process"></a>



<h4>Method <code>get_process()</code></h4>

<p>Browser process
</p>


<h5>Usage</h5>

<div class="r"><pre>Browser$get_process()</pre></div>


<hr>
<a id="method-Browser-is_alive"></a>



<h4>Method <code>is_alive()</code></h4>

<p>Is the process alive?
</p>


<h5>Usage</h5>

<div class="r"><pre>Browser$is_alive()</pre></div>


<hr>
<a id="method-Browser-get_host"></a>



<h4>Method <code>get_host()</code></h4>

<p>Browser Host
</p>


<h5>Usage</h5>

<div class="r"><pre>Browser$get_host()</pre></div>


<hr>
<a id="method-Browser-get_port"></a>



<h4>Method <code>get_port()</code></h4>

<p>Browser port
</p>


<h5>Usage</h5>

<div class="r"><pre>Browser$get_port()</pre></div>


<hr>
<a id="method-Browser-close"></a>



<h4>Method <code>close()</code></h4>

<p>Close the browser
</p>


<h5>Usage</h5>

<div class="r"><pre>Browser$close()</pre></div>


<hr>
<a id="method-Browser-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>Browser$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='Chrome'>Local Chrome process</h2><span id='topic+Chrome'></span>

<h3>Description</h3>

<p>This is a subclass of <code><a href="#topic+Browser">Browser</a></code> that represents a local browser. It extends
the <code><a href="#topic+Browser">Browser</a></code> class with a <code><a href="processx.html#topic+process">processx::process</a></code> object, which represents
the browser's system process.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+Browser">chromote::Browser</a></code> -&gt; <code>Chrome</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-Chrome-new"><code>Chrome$new()</code></a>
</p>
</li>
<li> <p><a href="#method-Chrome-get_path"><code>Chrome$get_path()</code></a>
</p>
</li>
<li> <p><a href="#method-Chrome-clone"><code>Chrome$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="chromote" data-topic="Browser" data-id="close"><a href='../../chromote/html/Browser.html#method-Browser-close'><code>chromote::Browser$close()</code></a></span></li>
<li><span class="pkg-link" data-pkg="chromote" data-topic="Browser" data-id="get_host"><a href='../../chromote/html/Browser.html#method-Browser-get_host'><code>chromote::Browser$get_host()</code></a></span></li>
<li><span class="pkg-link" data-pkg="chromote" data-topic="Browser" data-id="get_port"><a href='../../chromote/html/Browser.html#method-Browser-get_port'><code>chromote::Browser$get_port()</code></a></span></li>
<li><span class="pkg-link" data-pkg="chromote" data-topic="Browser" data-id="get_process"><a href='../../chromote/html/Browser.html#method-Browser-get_process'><code>chromote::Browser$get_process()</code></a></span></li>
<li><span class="pkg-link" data-pkg="chromote" data-topic="Browser" data-id="is_alive"><a href='../../chromote/html/Browser.html#method-Browser-is_alive'><code>chromote::Browser$is_alive()</code></a></span></li>
<li><span class="pkg-link" data-pkg="chromote" data-topic="Browser" data-id="is_local"><a href='../../chromote/html/Browser.html#method-Browser-is_local'><code>chromote::Browser$is_local()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-Chrome-new"></a>



<h4>Method <code>new()</code></h4>

<p>Create a new Chrome object.
</p>


<h5>Usage</h5>

<div class="r"><pre>Chrome$new(path = find_chrome(), args = get_chrome_args())</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>path</code></dt><dd><p>Location of chrome installation</p>
</dd>
<dt><code>args</code></dt><dd><p>A character vector of command-line arguments passed when
initializing Chrome. Single on-off arguments are passed as single
values (e.g.<code>"--disable-gpu"</code>), arguments with a value are given with a
nested character vector (e.g. <code>c("--force-color-profile", "srgb")</code>).
See
<a href="https://peter.sh/experiments/chromium-command-line-switches/">here</a>
for a list of possible arguments. Defaults to <code><a href="#topic+get_chrome_args">get_chrome_args()</a></code>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A new <code>Chrome</code> object.
</p>


<hr>
<a id="method-Chrome-get_path"></a>



<h4>Method <code>get_path()</code></h4>

<p>Browser application path
</p>


<h5>Usage</h5>

<div class="r"><pre>Chrome$get_path()</pre></div>


<hr>
<a id="method-Chrome-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>Chrome$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>See Also</h3>

<p><code><a href="#topic+get_chrome_args">get_chrome_args()</a></code>
</p>

<hr>
<h2 id='ChromeRemote'>Remote Chrome process</h2><span id='topic+ChromeRemote'></span>

<h3>Description</h3>

<p>Remote Chrome process
</p>


<h3>Super class</h3>

<p><code><a href="#topic+Browser">chromote::Browser</a></code> -&gt; <code>ChromeRemote</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-ChromeRemote-new"><code>ChromeRemote$new()</code></a>
</p>
</li>
<li> <p><a href="#method-ChromeRemote-clone"><code>ChromeRemote$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="chromote" data-topic="Browser" data-id="close"><a href='../../chromote/html/Browser.html#method-Browser-close'><code>chromote::Browser$close()</code></a></span></li>
<li><span class="pkg-link" data-pkg="chromote" data-topic="Browser" data-id="get_host"><a href='../../chromote/html/Browser.html#method-Browser-get_host'><code>chromote::Browser$get_host()</code></a></span></li>
<li><span class="pkg-link" data-pkg="chromote" data-topic="Browser" data-id="get_port"><a href='../../chromote/html/Browser.html#method-Browser-get_port'><code>chromote::Browser$get_port()</code></a></span></li>
<li><span class="pkg-link" data-pkg="chromote" data-topic="Browser" data-id="get_process"><a href='../../chromote/html/Browser.html#method-Browser-get_process'><code>chromote::Browser$get_process()</code></a></span></li>
<li><span class="pkg-link" data-pkg="chromote" data-topic="Browser" data-id="is_alive"><a href='../../chromote/html/Browser.html#method-Browser-is_alive'><code>chromote::Browser$is_alive()</code></a></span></li>
<li><span class="pkg-link" data-pkg="chromote" data-topic="Browser" data-id="is_local"><a href='../../chromote/html/Browser.html#method-Browser-is_local'><code>chromote::Browser$is_local()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-ChromeRemote-new"></a>



<h4>Method <code>new()</code></h4>

<p>Create a new ChromeRemote object.
</p>


<h5>Usage</h5>

<div class="r"><pre>ChromeRemote$new(host, port)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>host</code></dt><dd><p>A string that is a valid IPv4 or IPv6 address. <code>"0.0.0.0"</code>
represents all IPv4 addresses and <code>"::/0"</code> represents all IPv6 addresses.</p>
</dd>
<dt><code>port</code></dt><dd><p>A number or integer that indicates the server port.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-ChromeRemote-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>ChromeRemote$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='Chromote'>Chromote class</h2><span id='topic+Chromote'></span>

<h3>Description</h3>

<p>A <code>Chromote</code> object represents the browser as a whole, and it can have
multiple <em>targets</em>, which each represent a browser tab. In the Chrome
DevTools Protocol, each target can have one or more debugging <em>sessions</em> to
control it. A <code>ChromoteSession</code> object represents a single <em>session</em>.
</p>
<p>A <code>Chromote</code> object can have any number of <code>ChromoteSession</code> objects as
children. It is not necessary to create a <code>Chromote</code> object manually. You can
simply call:
</p>
<div class="sourceCode r"><pre>b &lt;- ChromoteSession$new()
</pre></div>
<p>and it will automatically create a <code>Chromote</code> object if one has not already
been created. The <span class="pkg">chromote</span> package will then designate that <code>Chromote</code>
object as the <em>default</em> <code>Chromote</code> object for the package, so that any future
calls to <code>ChromoteSession$new()</code> will automatically use the same <code>Chromote</code>.
This is so that it doesn't start a new browser for every <code>ChromoteSession</code>
object that is created.
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>default_timeout</code></dt><dd><p>Default timeout in seconds for <span class="pkg">chromote</span> to
wait for a Chrome DevTools Protocol response.</p>
</dd>
<dt><code>protocol</code></dt><dd><p>Dynamic protocol implementation. For expert use only!</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-Chromote-new"><code>Chromote$new()</code></a>
</p>
</li>
<li> <p><a href="#method-Chromote-connect"><code>Chromote$connect()</code></a>
</p>
</li>
<li> <p><a href="#method-Chromote-view"><code>Chromote$view()</code></a>
</p>
</li>
<li> <p><a href="#method-Chromote-get_auto_events"><code>Chromote$get_auto_events()</code></a>
</p>
</li>
<li> <p><a href="#method-Chromote-get_child_loop"><code>Chromote$get_child_loop()</code></a>
</p>
</li>
<li> <p><a href="#method-Chromote-wait_for"><code>Chromote$wait_for()</code></a>
</p>
</li>
<li> <p><a href="#method-Chromote-new_session"><code>Chromote$new_session()</code></a>
</p>
</li>
<li> <p><a href="#method-Chromote-get_sessions"><code>Chromote$get_sessions()</code></a>
</p>
</li>
<li> <p><a href="#method-Chromote-register_session"><code>Chromote$register_session()</code></a>
</p>
</li>
<li> <p><a href="#method-Chromote-send_command"><code>Chromote$send_command()</code></a>
</p>
</li>
<li> <p><a href="#method-Chromote-invoke_event_callbacks"><code>Chromote$invoke_event_callbacks()</code></a>
</p>
</li>
<li> <p><a href="#method-Chromote-debug_messages"><code>Chromote$debug_messages()</code></a>
</p>
</li>
<li> <p><a href="#method-Chromote-debug_log"><code>Chromote$debug_log()</code></a>
</p>
</li>
<li> <p><a href="#method-Chromote-url"><code>Chromote$url()</code></a>
</p>
</li>
<li> <p><a href="#method-Chromote-is_active"><code>Chromote$is_active()</code></a>
</p>
</li>
<li> <p><a href="#method-Chromote-is_alive"><code>Chromote$is_alive()</code></a>
</p>
</li>
<li> <p><a href="#method-Chromote-check_active"><code>Chromote$check_active()</code></a>
</p>
</li>
<li> <p><a href="#method-Chromote-get_browser"><code>Chromote$get_browser()</code></a>
</p>
</li>
<li> <p><a href="#method-Chromote-close"><code>Chromote$close()</code></a>
</p>
</li>
<li> <p><a href="#method-Chromote-print"><code>Chromote$print()</code></a>
</p>
</li></ul>


<hr>
<a id="method-Chromote-new"></a>



<h4>Method <code>new()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Chromote$new(browser = Chrome$new(), multi_session = TRUE, auto_events = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>browser</code></dt><dd><p>A <code><a href="#topic+Browser">Browser</a></code> object</p>
</dd>
<dt><code>multi_session</code></dt><dd><p>Should multiple sessions be allowed?</p>
</dd>
<dt><code>auto_events</code></dt><dd><p>If <code>TRUE</code>, enable automatic event enabling/disabling;
if <code>FALSE</code>, disable automatic event enabling/disabling.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-Chromote-connect"></a>



<h4>Method <code>connect()</code></h4>

<p>Re-connect the websocket to the browser. The Chrome browser
automatically closes websockets when your computer goes to sleep;
you can use this to bring it back to life with a new connection.
</p>


<h5>Usage</h5>

<div class="r"><pre>Chromote$connect(multi_session = TRUE, wait_ = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>multi_session</code></dt><dd><p>Should multiple sessions be allowed?</p>
</dd>
<dt><code>wait_</code></dt><dd><p>If <code>FALSE</code>, return a promise; if <code>TRUE</code> wait until
connection is complete.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-Chromote-view"></a>



<h4>Method <code>view()</code></h4>

<p>Display the current session in the <code>browser</code>
</p>
<p>If a <code><a href="#topic+Chrome">Chrome</a></code> browser is being used, this method will open a new tab
using your <code><a href="#topic+Chrome">Chrome</a></code> browser. When not using a <code><a href="#topic+Chrome">Chrome</a></code> browser, set
<code>options(browser=)</code> to change the default behavior of <code><a href="utils.html#topic+browseURL">browseURL()</a></code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>Chromote$view()</pre></div>


<hr>
<a id="method-Chromote-get_auto_events"></a>



<h4>Method <code>get_auto_events()</code></h4>

<p><code>auto_events</code> value.
</p>
<p>For internal use only.
</p>


<h5>Usage</h5>

<div class="r"><pre>Chromote$get_auto_events()</pre></div>


<hr>
<a id="method-Chromote-get_child_loop"></a>



<h4>Method <code>get_child_loop()</code></h4>

<p>Local <span class="pkg">later</span> loop.
</p>
<p>For expert async usage only.
</p>


<h5>Usage</h5>

<div class="r"><pre>Chromote$get_child_loop()</pre></div>


<hr>
<a id="method-Chromote-wait_for"></a>



<h4>Method <code>wait_for()</code></h4>

<p>Wait until the promise resolves
</p>
<p>Blocks the R session until the promise (<code>p</code>) is resolved. The loop from
<code style="white-space: pre;">&#8288;$get_child_loop()&#8288;</code> will only advance just far enough for the promise to
resolve.
</p>


<h5>Usage</h5>

<div class="r"><pre>Chromote$wait_for(p)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>p</code></dt><dd><p>A promise to resolve.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-Chromote-new_session"></a>



<h4>Method <code>new_session()</code></h4>

<p>Create a new tab / window
</p>


<h5>Usage</h5>

<div class="r"><pre>Chromote$new_session(width = 992, height = 1323, targetId = NULL, wait_ = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>width, height</code></dt><dd><p>Width and height of the new window.</p>
</dd>
<dt><code>targetId</code></dt><dd><p><a href="https://chromedevtools.github.io/devtools-protocol/tot/Target/">Target</a>
ID of an existing target to attach to. When a <code>targetId</code> is provided, the
<code>width</code> and <code>height</code> arguments are ignored. If NULL (the default) a new
target is created and attached to, and the <code>width</code> and <code>height</code>
arguments determine its viewport size.</p>
</dd>
<dt><code>wait_</code></dt><dd><p>If <code>FALSE</code>, return a <code><a href="promises.html#topic+promise">promises::promise()</a></code> of a new
<code>ChromoteSession</code> object. Otherwise, block during initialization, and
return a <code>ChromoteSession</code> object directly.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-Chromote-get_sessions"></a>



<h4>Method <code>get_sessions()</code></h4>

<p>Retrieve all <code><a href="#topic+ChromoteSession">ChromoteSession</a></code> objects
</p>


<h5>Usage</h5>

<div class="r"><pre>Chromote$get_sessions()</pre></div>



<h5>Returns</h5>

<p>A list of <code>ChromoteSession</code> objects
</p>


<hr>
<a id="method-Chromote-register_session"></a>



<h4>Method <code>register_session()</code></h4>

<p>Register <code><a href="#topic+ChromoteSession">ChromoteSession</a></code> object
</p>


<h5>Usage</h5>

<div class="r"><pre>Chromote$register_session(session)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>session</code></dt><dd><p>A <code>ChromoteSession</code> object
</p>
<p>For internal use only.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-Chromote-send_command"></a>



<h4>Method <code>send_command()</code></h4>

<p>Send command through Chrome DevTools Protocol.
</p>
<p>For expert use only.
</p>


<h5>Usage</h5>

<div class="r"><pre>Chromote$send_command(
  msg,
  callback = NULL,
  error = NULL,
  timeout = NULL,
  sessionId = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>msg</code></dt><dd><p>A JSON-serializable list containing <code>method</code>, and <code>params</code>.</p>
</dd>
<dt><code>callback</code></dt><dd><p>Method to run when the command finishes successfully.</p>
</dd>
<dt><code>error</code></dt><dd><p>Method to run if an error occurs.</p>
</dd>
<dt><code>timeout</code></dt><dd><p>Number of milliseconds for Chrome DevTools Protocol
execute a method.</p>
</dd>
<dt><code>sessionId</code></dt><dd><p>Determines which <code><a href="#topic+ChromoteSession">ChromoteSession</a></code> with the
corresponding to send the command to.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-Chromote-invoke_event_callbacks"></a>



<h4>Method <code>invoke_event_callbacks()</code></h4>

<p>Immediately call all event callback methods.
</p>
<p>For internal use only.
</p>


<h5>Usage</h5>

<div class="r"><pre>Chromote$invoke_event_callbacks(event, params)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>event</code></dt><dd><p>A single event string</p>
</dd>
<dt><code>params</code></dt><dd><p>A list of parameters to pass to the event callback methods.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-Chromote-debug_messages"></a>



<h4>Method <code>debug_messages()</code></h4>

<p>Enable or disable message debugging
</p>
<p>If enabled, R will print out the
</p>


<h5>Usage</h5>

<div class="r"><pre>Chromote$debug_messages(value = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>value</code></dt><dd><p>If <code>TRUE</code>, enable debugging. If <code>FALSE</code>, disable debugging.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-Chromote-debug_log"></a>



<h4>Method <code>debug_log()</code></h4>

<p>Submit debug log message
</p>


<h5>Examples</h5>

<div class="sourceCode r"><pre>b &lt;- ChromoteSession$new()
b$parent$debug_messages(TRUE)
b$Page$navigate("https://www.r-project.org/")
#&gt; SEND {"method":"Page.navigate","params":{"url":"https://www.r-project.org/"}| __truncated__}
# Turn off debug messages
b$parent$debug_messages(FALSE)
</pre></div>



<h5>Usage</h5>

<div class="r"><pre>Chromote$debug_log(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>Arguments pasted together with <code>paste0(..., collapse = "")</code>.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-Chromote-url"></a>



<h4>Method <code>url()</code></h4>

<p>Create url for a given path
</p>


<h5>Usage</h5>

<div class="r"><pre>Chromote$url(path = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>path</code></dt><dd><p>A path string to append to the host and port</p>
</dd>
</dl>

</div>


<hr>
<a id="method-Chromote-is_active"></a>



<h4>Method <code>is_active()</code></h4>

<p>Is there an active websocket connection to the browser process?
</p>


<h5>Usage</h5>

<div class="r"><pre>Chromote$is_active()</pre></div>


<hr>
<a id="method-Chromote-is_alive"></a>



<h4>Method <code>is_alive()</code></h4>

<p>Is the underlying browser process running?
</p>


<h5>Usage</h5>

<div class="r"><pre>Chromote$is_alive()</pre></div>


<hr>
<a id="method-Chromote-check_active"></a>



<h4>Method <code>check_active()</code></h4>

<p>Check that a chromote instance is active and alive.
Will automatically reconnect if browser process is alive, but
there's no active web socket connection.
</p>


<h5>Usage</h5>

<div class="r"><pre>Chromote$check_active()</pre></div>


<hr>
<a id="method-Chromote-get_browser"></a>



<h4>Method <code>get_browser()</code></h4>

<p>Retrieve <code><a href="#topic+Browser">Browser</a></code>' object
</p>


<h5>Usage</h5>

<div class="r"><pre>Chromote$get_browser()</pre></div>


<hr>
<a id="method-Chromote-close"></a>



<h4>Method <code>close()</code></h4>

<p>Close the <code><a href="#topic+Browser">Browser</a></code> object
</p>


<h5>Usage</h5>

<div class="r"><pre>Chromote$close()</pre></div>


<hr>
<a id="method-Chromote-print"></a>



<h4>Method <code>print()</code></h4>

<p>Summarise the current state of the object.
</p>


<h5>Usage</h5>

<div class="r"><pre>Chromote$print(..., verbose = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>Passed on to <code>format()</code> when <code>verbose</code> = TRUE</p>
</dd>
<dt><code>verbose</code></dt><dd><p>The print method defaults to a brief summary
of the most important debugging info; use <code>verbose = TRUE</code> tp
see the complex R6 object.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='chromote-package'>chromote: Headless Chrome Web Browser Interface</h2><span id='topic+chromote'></span><span id='topic+chromote-package'></span>

<h3>Description</h3>

<p>An implementation of the 'Chrome DevTools Protocol', for controlling a headless Chrome web browser.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Winston Chang <a href="mailto:winston@posit.co">winston@posit.co</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Barret Schloerke <a href="mailto:barret@posit.co">barret@posit.co</a> (<a href="https://orcid.org/0000-0001-9986-114X">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Posit Software, PBC [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://rstudio.github.io/chromote/">https://rstudio.github.io/chromote/</a>
</p>
</li>
<li> <p><a href="https://github.com/rstudio/chromote">https://github.com/rstudio/chromote</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/rstudio/chromote/issues">https://github.com/rstudio/chromote/issues</a>
</p>
</li></ul>


<hr>
<h2 id='ChromoteSession'>ChromoteSession class</h2><span id='topic+ChromoteSession'></span>

<h3>Description</h3>

<p>This represents one <em>session</em> in a Chromote object. Note that in the Chrome
DevTools Protocol a session is a debugging session connected to a <em>target</em>,
which is a browser window/tab or an iframe.
</p>
<p>A single target can potentially have more than one session connected to it,
but this is not currently supported by chromote.
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>parent</code></dt><dd><p><code><a href="#topic+Chromote">Chromote</a></code> object</p>
</dd>
<dt><code>default_timeout</code></dt><dd><p>Default timeout in seconds for <span class="pkg">chromote</span> to
wait for a Chrome DevTools Protocol response.</p>
</dd>
<dt><code>protocol</code></dt><dd><p>Dynamic protocol implementation. For expert use only!</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-ChromoteSession-new"><code>ChromoteSession$new()</code></a>
</p>
</li>
<li> <p><a href="#method-ChromoteSession-view"><code>ChromoteSession$view()</code></a>
</p>
</li>
<li> <p><a href="#method-ChromoteSession-close"><code>ChromoteSession$close()</code></a>
</p>
</li>
<li> <p><a href="#method-ChromoteSession-screenshot"><code>ChromoteSession$screenshot()</code></a>
</p>
</li>
<li> <p><a href="#method-ChromoteSession-screenshot_pdf"><code>ChromoteSession$screenshot_pdf()</code></a>
</p>
</li>
<li> <p><a href="#method-ChromoteSession-new_session"><code>ChromoteSession$new_session()</code></a>
</p>
</li>
<li> <p><a href="#method-ChromoteSession-get_session_id"><code>ChromoteSession$get_session_id()</code></a>
</p>
</li>
<li> <p><a href="#method-ChromoteSession-respawn"><code>ChromoteSession$respawn()</code></a>
</p>
</li>
<li> <p><a href="#method-ChromoteSession-get_target_id"><code>ChromoteSession$get_target_id()</code></a>
</p>
</li>
<li> <p><a href="#method-ChromoteSession-wait_for"><code>ChromoteSession$wait_for()</code></a>
</p>
</li>
<li> <p><a href="#method-ChromoteSession-debug_log"><code>ChromoteSession$debug_log()</code></a>
</p>
</li>
<li> <p><a href="#method-ChromoteSession-get_child_loop"><code>ChromoteSession$get_child_loop()</code></a>
</p>
</li>
<li> <p><a href="#method-ChromoteSession-send_command"><code>ChromoteSession$send_command()</code></a>
</p>
</li>
<li> <p><a href="#method-ChromoteSession-get_auto_events"><code>ChromoteSession$get_auto_events()</code></a>
</p>
</li>
<li> <p><a href="#method-ChromoteSession-invoke_event_callbacks"><code>ChromoteSession$invoke_event_callbacks()</code></a>
</p>
</li>
<li> <p><a href="#method-ChromoteSession-mark_closed"><code>ChromoteSession$mark_closed()</code></a>
</p>
</li>
<li> <p><a href="#method-ChromoteSession-is_active"><code>ChromoteSession$is_active()</code></a>
</p>
</li>
<li> <p><a href="#method-ChromoteSession-check_active"><code>ChromoteSession$check_active()</code></a>
</p>
</li>
<li> <p><a href="#method-ChromoteSession-get_init_promise"><code>ChromoteSession$get_init_promise()</code></a>
</p>
</li>
<li> <p><a href="#method-ChromoteSession-print"><code>ChromoteSession$print()</code></a>
</p>
</li></ul>


<hr>
<a id="method-ChromoteSession-new"></a>



<h4>Method <code>new()</code></h4>

<p>Create a new <code>ChromoteSession</code> object.
</p>


<h5>Examples</h5>

<div class="sourceCode r"><pre># Create a new `ChromoteSession` object.
b &lt;- ChromoteSession$new()

# Create a ChromoteSession with a specific height,width
b &lt;- ChromoteSession$new(height = 1080, width = 1920)

# Navigate to page
b$Page$navigate("http://www.r-project.org/")

# View current chromote session
if (interactive()) b$view()
</pre></div>



<h5>Usage</h5>

<div class="r"><pre>ChromoteSession$new(
  parent = default_chromote_object(),
  width = 992,
  height = 1323,
  targetId = NULL,
  wait_ = TRUE,
  auto_events = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>parent</code></dt><dd><p><code><a href="#topic+Chromote">Chromote</a></code> object to use; defaults to
<code><a href="#topic+default_chromote_object">default_chromote_object()</a></code></p>
</dd>
<dt><code>width, height</code></dt><dd><p>Width and height of the new window.</p>
</dd>
<dt><code>targetId</code></dt><dd><p><a href="https://chromedevtools.github.io/devtools-protocol/tot/Target/">Target</a>
ID of an existing target to attach to. When a <code>targetId</code> is provided, the
<code>width</code> and <code>height</code> arguments are ignored. If NULL (the default) a new
target is created and attached to, and the <code>width</code> and <code>height</code>
arguments determine its viewport size.</p>
</dd>
<dt><code>wait_</code></dt><dd><p>If <code>FALSE</code>, return a <code><a href="promises.html#topic+promise">promises::promise()</a></code> of a new
<code>ChromoteSession</code> object. Otherwise, block during initialization, and
return a <code>ChromoteSession</code> object directly.</p>
</dd>
<dt><code>auto_events</code></dt><dd><p>If <code>NULL</code> (the default), use the <code>auto_events</code> setting
from the parent <code>Chromote</code> object. If <code>TRUE</code>, enable automatic
event enabling/disabling; if <code>FALSE</code>, disable automatic event
enabling/disabling.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A new <code>ChromoteSession</code> object.
</p>


<hr>
<a id="method-ChromoteSession-view"></a>



<h4>Method <code>view()</code></h4>

<p>Display the current session in the <code><a href="#topic+Chromote">Chromote</a></code> browser.
</p>
<p>If a <code><a href="#topic+Chrome">Chrome</a></code> browser is being used, this method will open a new tab
using your <code><a href="#topic+Chrome">Chrome</a></code> browser. When not using a <code><a href="#topic+Chrome">Chrome</a></code> browser, set
<code>options(browser=)</code> to change the default behavior of <code><a href="utils.html#topic+browseURL">browseURL()</a></code>.
</p>


<h5>Examples</h5>

<div class="sourceCode r"><pre># Create a new `ChromoteSession` object.
b &lt;- ChromoteSession$new()

# Navigate to page
b$Page$navigate("http://www.r-project.org/")

# View current chromote session
if (interactive()) b$view()
</pre></div>



<h5>Usage</h5>

<div class="r"><pre>ChromoteSession$view()</pre></div>


<hr>
<a id="method-ChromoteSession-close"></a>



<h4>Method <code>close()</code></h4>

<p>Close the Chromote session.
</p>


<h5>Examples</h5>

<div class="sourceCode r"><pre># Create a new `ChromoteSession` object.
b &lt;- ChromoteSession$new()

# Navigate to page
b$Page$navigate("http://www.r-project.org/")

# Close current chromote session
b$close()
</pre></div>



<h5>Usage</h5>

<div class="r"><pre>ChromoteSession$close(wait_ = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>wait_</code></dt><dd><p>If <code>FALSE</code>, return a <code><a href="promises.html#topic+promise">promises::promise()</a></code> that will resolve
when the <code>ChromoteSession</code> is closed. Otherwise, block until the
<code>ChromoteSession</code> has closed.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-ChromoteSession-screenshot"></a>



<h4>Method <code>screenshot()</code></h4>

<p>Take a PNG screenshot
</p>


<h5>Examples</h5>

<div class="sourceCode r"><pre># Create a new `ChromoteSession` object.
b &lt;- ChromoteSession$new()

# Navigate to page
b$Page$navigate("http://www.r-project.org/")

# Take screenshot
tmppngfile &lt;- tempfile(fileext = ".png")
is_interactive &lt;- interactive() # Display screenshot if interactive
b$screenshot(tmppngfile, show = is_interactive)

# Show screenshot file info
unlist(file.info(tmppngfile))


# Take screenshot using a selector
sidebar_file &lt;- tempfile(fileext = ".png")
b$screenshot(sidebar_file, selector = ".sidebar", show = is_interactive)

# ----------------------------
# Take screenshots in parallel

urls &lt;- c(
  "https://www.r-project.org/",
  "https://github.com/",
  "https://news.ycombinator.com/"
)
# Helper method that:
# 1. Navigates to the given URL
# 2. Waits for the page loaded event to fire
# 3. Takes a screenshot
# 4. Prints a message
# 5. Close the ChromoteSession
screenshot_p &lt;- function(url, filename = NULL) {
  if (is.null(filename)) {
    filename &lt;- gsub("^.*://", "", url)
    filename &lt;- gsub("/", "_", filename)
    filename &lt;- gsub("\\.", "_", filename)
    filename &lt;- sub("_$", "", filename)
    filename &lt;- paste0(filename, ".png")
  }

  b2 &lt;- b$new_session()
  b2$Page$navigate(url, wait_ = FALSE)
  b2$Page$loadEventFired(wait_ = FALSE)$
    then(function(value) {
      b2$screenshot(filename, wait_ = FALSE)
    })$
    then(function(value) {
      message(filename)
    })$
    finally(function() {
      b2$close()
    })
}

# Take multiple screenshots simultaneously
ps &lt;- lapply(urls, screenshot_p)
pa &lt;- promises::promise_all(.list = ps)$then(function(value) {
  message("Done!")
})

# Block the console until the screenshots finish (optional)
b$wait_for(pa)
#&gt; www_r-project_org.png
#&gt; github_com.png
#&gt; news_ycombinator_com.png
#&gt; Done!
</pre></div>



<h5>Usage</h5>

<div class="r"><pre>ChromoteSession$screenshot(
  filename = "screenshot.png",
  selector = "html",
  cliprect = NULL,
  region = c("content", "padding", "border", "margin"),
  expand = NULL,
  scale = 1,
  show = FALSE,
  delay = 0.5,
  options = list(),
  wait_ = TRUE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>filename</code></dt><dd><p>File path of where to save the screenshot. The format of
the screenshot is inferred from the file extension; use
<code>options = list(format = "jpeg")</code> to manually choose the format. See
<a href="https://chromedevtools.github.io/devtools-protocol/tot/Page/#method-captureScreenshot"><code>Page.captureScreenshot</code></a>
for supported formats; at the time of this release the format options
were <code>"png"</code> (default), <code>"jpeg"</code>, or <code>"webp"</code>.</p>
</dd>
<dt><code>selector</code></dt><dd><p>CSS selector to use for the screenshot.</p>
</dd>
<dt><code>cliprect</code></dt><dd><p>A list containing <code>x</code>, <code>y</code>, <code>width</code>, and <code>height</code>. See
<a href="https://chromedevtools.github.io/devtools-protocol/tot/Page/#type-Viewport"><code>Page.Viewport</code></a>
for more information. If provided, <code>selector</code> and <code>expand</code> will be
ignored. To provide a scale, use the <code>scale</code> parameter.</p>
</dd>
<dt><code>region</code></dt><dd><p>CSS region to use for the screenshot.</p>
</dd>
<dt><code>expand</code></dt><dd><p>Extra pixels to expand the screenshot. May be a single
value or a numeric vector of top, right, bottom, left values.</p>
</dd>
<dt><code>scale</code></dt><dd><p>Page scale factor</p>
</dd>
<dt><code>show</code></dt><dd><p>If <code>TRUE</code>, the screenshot will be displayed in the viewer.</p>
</dd>
<dt><code>delay</code></dt><dd><p>The number of seconds to wait before taking the screenshot
after resizing the page. For complicated pages, this may need to be
increased.</p>
</dd>
<dt><code>options</code></dt><dd><p>Additional options passed to
<a href="https://chromedevtools.github.io/devtools-protocol/tot/Page/#method-captureScreenshot"><code>Page.captureScreenshot</code></a>.</p>
</dd>
<dt><code>wait_</code></dt><dd><p>If <code>FALSE</code>, return a <code><a href="promises.html#topic+promise">promises::promise()</a></code> that will resolve
when the <code>ChromoteSession</code> has saved the screenshot. Otherwise, block
until the <code>ChromoteSession</code> has saved the screenshot.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-ChromoteSession-screenshot_pdf"></a>



<h4>Method <code>screenshot_pdf()</code></h4>

<p>Take a PDF screenshot
</p>


<h5>Examples</h5>

<div class="sourceCode r"><pre># Create a new `ChromoteSession` object.
b &lt;- ChromoteSession$new()

# Navigate to page
b$Page$navigate("http://www.r-project.org/")

# Take screenshot
tmppdffile &lt;- tempfile(fileext = ".pdf")
b$screenshot_pdf(tmppdffile)

# Show PDF file info
unlist(file.info(tmppdffile))
</pre></div>



<h5>Usage</h5>

<div class="r"><pre>ChromoteSession$screenshot_pdf(
  filename = "screenshot.pdf",
  pagesize = "letter",
  margins = 0.5,
  units = c("in", "cm"),
  landscape = FALSE,
  display_header_footer = FALSE,
  print_background = FALSE,
  scale = 1,
  wait_ = TRUE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>filename</code></dt><dd><p>File path of where to save the screenshot.</p>
</dd>
<dt><code>pagesize</code></dt><dd><p>A single character value in the set <code>"letter"</code>,
<code>"legal"</code>, <code>"tabloid"</code>, <code>"ledger"</code> and <code>"a0"</code> through <code>"a1"</code>. Or a
numeric vector <code>c(width, height)</code> specifying the page size.</p>
</dd>
<dt><code>margins</code></dt><dd><p>A numeric vector <code>c(top, right, bottom, left)</code> specifying
the page margins.</p>
</dd>
<dt><code>units</code></dt><dd><p>Page and margin size units. Either <code>"in"</code> or <code>"cm"</code> for
inches and centimeters respectively.</p>
</dd>
<dt><code>landscape</code></dt><dd><p>Paper orientation.</p>
</dd>
<dt><code>display_header_footer</code></dt><dd><p>Display header and footer.</p>
</dd>
<dt><code>print_background</code></dt><dd><p>Print background graphics.</p>
</dd>
<dt><code>scale</code></dt><dd><p>Page scale factor.</p>
</dd>
<dt><code>wait_</code></dt><dd><p>If <code>FALSE</code>, return a <code><a href="promises.html#topic+promise">promises::promise()</a></code> that will resolve
when the <code>ChromoteSession</code> has saved the screenshot. Otherwise, block
until the <code>ChromoteSession</code> has saved the screnshot.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-ChromoteSession-new_session"></a>



<h4>Method <code>new_session()</code></h4>

<p>Create a new tab / window
</p>


<h5>Examples</h5>

<div class="sourceCode r"><pre>b1 &lt;- ChromoteSession$new()
b1$Page$navigate("http://www.google.com")
b2 &lt;- b1$new_session()
b2$Page$navigate("http://www.r-project.org/")
b1$Runtime$evaluate("window.location", returnByValue = TRUE)$result$value$href
#&gt; [1] "https://www.google.com/"
b2$Runtime$evaluate("window.location", returnByValue = TRUE)$result$value$href
#&gt; [1] "https://www.r-project.org/"
</pre></div>



<h5>Usage</h5>

<div class="r"><pre>ChromoteSession$new_session(
  width = 992,
  height = 1323,
  targetId = NULL,
  wait_ = TRUE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>width, height</code></dt><dd><p>Width and height of the new window.</p>
</dd>
<dt><code>targetId</code></dt><dd><p><a href="https://chromedevtools.github.io/devtools-protocol/tot/Target/">Target</a>
ID of an existing target to attach to. When a <code>targetId</code> is provided, the
<code>width</code> and <code>height</code> arguments are ignored. If NULL (the default) a new
target is created and attached to, and the <code>width</code> and <code>height</code>
arguments determine its viewport size.</p>
</dd>
<dt><code>wait_</code></dt><dd><p>If <code>FALSE</code>, return a <code><a href="promises.html#topic+promise">promises::promise()</a></code> that will resolve
when the <code>ChromoteSession</code> has created a new session. Otherwise, block
until the <code>ChromoteSession</code> has created a new session.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-ChromoteSession-get_session_id"></a>



<h4>Method <code>get_session_id()</code></h4>

<p>Retrieve the session id
</p>


<h5>Usage</h5>

<div class="r"><pre>ChromoteSession$get_session_id()</pre></div>


<hr>
<a id="method-ChromoteSession-respawn"></a>



<h4>Method <code>respawn()</code></h4>

<p>Create a new session that connects to the same target (i.e. page)
as this session. This is useful if the session has been closed but the target still
exists.
</p>


<h5>Usage</h5>

<div class="r"><pre>ChromoteSession$respawn()</pre></div>


<hr>
<a id="method-ChromoteSession-get_target_id"></a>



<h4>Method <code>get_target_id()</code></h4>

<p>Retrieve the target id
</p>


<h5>Usage</h5>

<div class="r"><pre>ChromoteSession$get_target_id()</pre></div>


<hr>
<a id="method-ChromoteSession-wait_for"></a>



<h4>Method <code>wait_for()</code></h4>

<p>Wait for a Chromote Session to finish. This method will block the R
session until the provided promise resolves. The loop from
<code style="white-space: pre;">&#8288;$get_child_loop()&#8288;</code> will only advance just far enough for the promise to
resolve.
</p>


<h5>Examples</h5>

<div class="sourceCode r"><pre>b &lt;- ChromoteSession$new()

# Async with promise
p &lt;- b$Browser$getVersion(wait_ = FALSE)
p$then(str)

# Async with callback
b$Browser$getVersion(wait_ = FALSE, callback_ = str)
</pre></div>



<h5>Usage</h5>

<div class="r"><pre>ChromoteSession$wait_for(p)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>p</code></dt><dd><p>A promise to resolve.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-ChromoteSession-debug_log"></a>



<h4>Method <code>debug_log()</code></h4>

<p>Send a debug log message to the parent <a href="#topic+Chromote">Chromote</a> object
</p>


<h5>Examples</h5>

<div class="sourceCode r"><pre>b &lt;- ChromoteSession$new()
b$parent$debug_messages(TRUE)
b$Page$navigate("https://www.r-project.org/")
#&gt; SEND {"method":"Page.navigate","params":{"url":"https://www.r-project.org/"}| __truncated__}
# Turn off debug messages
b$parent$debug_messages(FALSE)
</pre></div>



<h5>Usage</h5>

<div class="r"><pre>ChromoteSession$debug_log(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>Arguments pasted together with <code>paste0(..., collapse = "")</code>.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-ChromoteSession-get_child_loop"></a>



<h4>Method <code>get_child_loop()</code></h4>

<p><span class="pkg">later</span> loop.
</p>
<p>For expert async usage only.
</p>


<h5>Usage</h5>

<div class="r"><pre>ChromoteSession$get_child_loop()</pre></div>


<hr>
<a id="method-ChromoteSession-send_command"></a>



<h4>Method <code>send_command()</code></h4>

<p>Send command through Chrome DevTools Protocol.
</p>
<p>For expert use only.
</p>


<h5>Usage</h5>

<div class="r"><pre>ChromoteSession$send_command(
  msg,
  callback = NULL,
  error = NULL,
  timeout = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>msg</code></dt><dd><p>A JSON-serializable list containing <code>method</code>, and <code>params</code>.</p>
</dd>
<dt><code>callback</code></dt><dd><p>Method to run when the command finishes successfully.</p>
</dd>
<dt><code>error</code></dt><dd><p>Method to run if an error occurs.</p>
</dd>
<dt><code>timeout</code></dt><dd><p>Number of milliseconds for Chrome DevTools Protocol
execute a method.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-ChromoteSession-get_auto_events"></a>



<h4>Method <code>get_auto_events()</code></h4>

<p>Resolved <code>auto_events</code> value.
</p>
<p>For internal use only.
</p>


<h5>Usage</h5>

<div class="r"><pre>ChromoteSession$get_auto_events()</pre></div>


<hr>
<a id="method-ChromoteSession-invoke_event_callbacks"></a>



<h4>Method <code>invoke_event_callbacks()</code></h4>

<p>Immediately call all event callback methods.
</p>
<p>For internal use only.
</p>


<h5>Usage</h5>

<div class="r"><pre>ChromoteSession$invoke_event_callbacks(event, params)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>event</code></dt><dd><p>A single event string</p>
</dd>
<dt><code>params</code></dt><dd><p>A list of parameters to pass to the event callback methods.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-ChromoteSession-mark_closed"></a>



<h4>Method <code>mark_closed()</code></h4>

<p>Mark a session, and optionally, the underlying target,
as closed. For internal use only.
</p>


<h5>Usage</h5>

<div class="r"><pre>ChromoteSession$mark_closed(target_closed)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>target_closed</code></dt><dd><p>Has the underlying target been closed as well as the
active debugging session?</p>
</dd>
</dl>

</div>


<hr>
<a id="method-ChromoteSession-is_active"></a>



<h4>Method <code>is_active()</code></h4>

<p>Retrieve active status
Once initialized, the value returned is <code>TRUE</code>. If <code style="white-space: pre;">&#8288;$close()&#8288;</code> has been
called, this value will be <code>FALSE</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>ChromoteSession$is_active()</pre></div>


<hr>
<a id="method-ChromoteSession-check_active"></a>



<h4>Method <code>check_active()</code></h4>

<p>Check that a session is active, erroring if not.
</p>


<h5>Usage</h5>

<div class="r"><pre>ChromoteSession$check_active()</pre></div>


<hr>
<a id="method-ChromoteSession-get_init_promise"></a>



<h4>Method <code>get_init_promise()</code></h4>

<p>Initial promise
</p>
<p>For internal use only.
</p>


<h5>Usage</h5>

<div class="r"><pre>ChromoteSession$get_init_promise()</pre></div>


<hr>
<a id="method-ChromoteSession-print"></a>



<h4>Method <code>print()</code></h4>

<p>Summarise the current state of the object.
</p>


<h5>Usage</h5>

<div class="r"><pre>ChromoteSession$print(..., verbose = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>Passed on to <code>format()</code> when <code>verbose</code> = TRUE</p>
</dd>
<dt><code>verbose</code></dt><dd><p>The print method defaults to a brief summary
of the most important debugging info; use <code>verbose = TRUE</code> tp
see the complex R6 object.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='default_chrome_args'>Default Chrome arguments</h2><span id='topic+default_chrome_args'></span><span id='topic+get_chrome_args'></span><span id='topic+set_chrome_args'></span>

<h3>Description</h3>

<p>A character vector of command-line arguments passed when initializing any new
instance of <code><a href="#topic+Chrome">Chrome</a></code>. Single on-off arguments are passed as single values
(e.g.<code>"--disable-gpu"</code>), arguments with a value are given with a nested
character vector (e.g. <code>c("--force-color-profile", "srgb")</code>). See
<a href="https://peter.sh/experiments/chromium-command-line-switches/">here</a> for a
list of possible arguments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_chrome_args()

get_chrome_args()

set_chrome_args(args)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="default_chrome_args_+3A_args">args</code></td>
<td>
<p>A character vector of command-line arguments (or <code>NULL</code>) to be
used with every new <code><a href="#topic+ChromoteSession">ChromoteSession</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Default chromote arguments are composed of the following values (when
appropriate):
</p>

<ul>
<li> <p><a href="https://peter.sh/experiments/chromium-command-line-switches/#disable-gpu"><code>"--disable-gpu"</code></a>
</p>

<ul>
<li><p> Only added on Windows, as empirically it appears to be needed
(if not, check runs on GHA never terminate).
</p>
</li>
<li><p> Disables GPU hardware acceleration. If software renderer is not in place, then the GPU process won't launch.
</p>
</li></ul>

</li>
<li> <p><a href="https://peter.sh/experiments/chromium-command-line-switches/#no-sandbox"><code>"--no-sandbox"</code></a>
</p>

<ul>
<li><p> Only added when <code>CI</code> system environment variable is set, when the
user on a Linux system is not set, or when executing inside a Docker container.
</p>
</li>
<li><p> Disables the sandbox for all process types that are normally sandboxed. Meant to be used as a browser-level switch for testing purposes only
</p>
</li></ul>

</li>
<li> <p><a href="https://peter.sh/experiments/chromium-command-line-switches/#disable-dev-shm-usage"><code>"--disable-dev-shm-usage"</code></a>
</p>

<ul>
<li><p> Only added when <code>CI</code> system environment variable is set or when inside a docker instance.
</p>
</li>
<li><p> The <code style="white-space: pre;">&#8288;/dev/shm&#8288;</code> partition is too small in certain VM environments, causing Chrome to fail or crash.
</p>
</li></ul>

</li>
<li> <p><a href="https://peter.sh/experiments/chromium-command-line-switches/#force-color-profile"><code>"--force-color-profile=srgb"</code></a>
</p>

<ul>
<li><p> This means that screenshots taken on a laptop plugged into an external
monitor will often have subtly different colors than one taken when
the laptop is using its built-in monitor. This problem will be even
more likely across machines.
</p>
</li>
<li><p> Force all monitors to be treated as though they have the specified color profile.
</p>
</li></ul>

</li>
<li> <p><a href="https://peter.sh/experiments/chromium-command-line-switches/#disable-extensions"><code>"--disable-extensions"</code></a>
</p>

<ul>
<li><p> Disable extensions.
</p>
</li></ul>

</li>
<li> <p><a href="https://peter.sh/experiments/chromium-command-line-switches/#mute-audio"><code>"--mute-audio"</code></a>
</p>

<ul>
<li><p> Mutes audio sent to the audio device so it is not audible during automated testing.
</p>
</li></ul>

</li></ul>



<h3>Value</h3>

<p>A character vector of default command-line arguments to be used with
every new <code><a href="#topic+ChromoteSession">ChromoteSession</a></code>
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>default_chrome_args()</code>: Returns a character vector of command-line
arguments passed when initializing Chrome. See Details for more
information.
</p>
</li>
<li> <p><code>get_chrome_args()</code>: Retrieves the default command-line arguments
passed to <code><a href="#topic+Chrome">Chrome</a></code> during initialization. Returns either <code>NULL</code> or a
character vector.
</p>
</li>
<li> <p><code>set_chrome_args()</code>: Sets the default command-line arguments
passed when initializing. Returns the updated defaults.
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>old_chrome_args &lt;- get_chrome_args()

# Disable the gpu and use of `/dev/shm`
set_chrome_args(c("--disable-gpu", "--disable-dev-shm-usage"))

#... Make new `Chrome` or `ChromoteSession` instance

# Restore old defaults
set_chrome_args(old_chrome_args)
</code></pre>

<hr>
<h2 id='default_chromote_object'>Default Chromote object</h2><span id='topic+default_chromote_object'></span><span id='topic+has_default_chromote_object'></span><span id='topic+set_default_chromote_object'></span>

<h3>Description</h3>

<p>Returns the Chromote package's default <code><a href="#topic+Chromote">Chromote</a></code> object. If
there is not currently a default <code>Chromote</code> object that is active, then
one will be created and set as the default.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_chromote_object()

has_default_chromote_object()

set_default_chromote_object(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="default_chromote_object_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+Chromote">Chromote</a></code> object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code><a href="#topic+ChromoteSession">ChromoteSession</a>$new()</code> calls this function by default, if the
<code>parent</code> is not specified. That means that when
<code><a href="#topic+ChromoteSession">ChromoteSession</a>$new()</code> is called and there is not currently an
active default <code>Chromote</code> object, then a new <code>Chromote</code> object will
be created and set as the default.
</p>

<hr>
<h2 id='find_chrome'>Find path to Chrome or Chromium browser</h2><span id='topic+find_chrome'></span>

<h3>Description</h3>

<p><span class="pkg">chromote</span> requires a Chrome- or Chromium-based browser with support for
the Chrome DevTools Protocol. There are many such browser variants,
including <a href="https://www.google.com/chrome/">Google Chrome</a>,
<a href="https://www.chromium.org/chromium-projects/">Chromium</a>,
<a href="https://www.microsoft.com/en-us/edge">Microsoft Edge</a> and others.
</p>
<p>If you want <span class="pkg">chromote</span> to use a specific browser, set the
<code>CHROMOTE_CHROME</code> environment variable to the full path to the browser's
executable. Note that when <code>CHROMOTE_CHROME</code> is set, <span class="pkg">chromote</span> will use
the value without any additional checks. On Mac, for example, one could use
Microsoft Edge by setting <code>CHROMOTE_CHROME</code> with the following:
</p>
<div class="sourceCode r"><pre>Sys.setenv(
  CHROMOTE_CHROME = "/Applications/Microsoft Edge.app/Contents/MacOS/Microsoft Edge"
)
</pre></div>
<p>When <code>CHROMOTE_CHROME</code> is not set, <code>find_chrome()</code> will perform a limited
search to find a reasonable executable. On Windows, <code>find_chrome()</code> consults
the registry to find <code>chrome.exe</code>. On Mac, it looks for <code style="white-space: pre;">&#8288;Google Chrome&#8288;</code> in
the <code style="white-space: pre;">&#8288;/Applications&#8288;</code> folder (or tries the same checks as on Linux). On Linux,
it searches for several common executable names.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_chrome()
</code></pre>


<h3>Value</h3>

<p>A character vector with the value of <code>CHROMOTE_CHROME</code>, or a path to
the discovered Chrome executable. If no path to is found, <code>find_chrome()</code>
returns <code>NULL</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>find_chrome()

</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic++25...+3E+25'></span><span id='topic++25...+21+25'></span><span id='topic++25...T+3E+25'></span><span id='topic++25...T+21+25'></span><span id='topic++25+3E+25'></span><span id='topic++25T+3E+25'></span><span id='topic+promise'></span><span id='topic+then'></span><span id='topic+catch'></span><span id='topic+finally'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>magrittr</dt><dd><p><code><a href="magrittr.html#topic+pipe">%&gt;%</a></code>, <code><a href="magrittr.html#topic+tee">%T&gt;%</a></code></p>
</dd>
<dt>promises</dt><dd><p><code><a href="promises.html#topic+pipes">%...!%</a></code>, <code><a href="promises.html#topic+pipes">%...&gt;%</a></code>, <code><a href="promises.html#topic+pipes">%...T!%</a></code>, <code><a href="promises.html#topic+pipes">%...T&gt;%</a></code>, <code><a href="promises.html#topic+then">catch</a></code>, <code><a href="promises.html#topic+then">finally</a></code>, <code><a href="promises.html#topic+promise">promise</a></code>, <code><a href="promises.html#topic+then">then</a></code></p>
</dd>
</dl>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
