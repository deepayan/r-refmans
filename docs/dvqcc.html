<!DOCTYPE html><html><head><title>Help for package dvqcc</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {dvqcc}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#offlinem'><p>Offline monitoring</p></a></li>
<li><a href='#onlinem'><p>Online monitoring</p></a></li>
<li><a href='#simoff'><p>simulating dataset (Offline settings)</p></a></li>
<li><a href='#simon'><p>simulating dataset (Online settings)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Dynamic VAR - Based Control Charts for Batch Process Monitoring</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>A set of control charts for batch processes based on the VAR model. The package contains the implementation of T2.var and W.var control charts based on VAR model coefficients using the couple vectors theory. In each time-instant the VAR coefficients are estimated from a historical in-control dataset and a decision rule is made for online classifying of a new batch data. Those charts allow efficient online monitoring since the very first time-instant. The offline version is available too. In order to evaluate the chart's performance, this package contains functions to generate batch data for offline and online monitoring.See in Danilo Marcondes Filho and Marcio Valk (2020) &lt;<a href="https://doi.org/10.1016%2Fj.ejor.2019.12.038">doi:10.1016/j.ejor.2019.12.038</a>&gt;. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0</td>
</tr>
<tr>
<td>Depends:</td>
<td>ggplot2, tsDyn</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-06-05 01:19:09 UTC; marco</td>
</tr>
<tr>
<td>Author:</td>
<td>MÃ¡rcio Valk [aut],
  Danilo Marcondes Filho [aut, cre],
  Gabriela Cybis [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Danilo Marcondes Filho &lt;marcondes.filho@ufrgs.br&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-06-09 11:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='offlinem'>Offline monitoring</h2><span id='topic+offlinem'></span>

<h3>Description</h3>

<p>Offline T2.var and W.var control charts for monitoring batch processes based on VAR model.
This approach is fully described in &quot;Marcondes Filho, D., &amp; Valk, M. (2020). Dynamic VAR Model-Based Control Charts
for Batch Process Monitoring. European Journal of Operational Research.&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>offlinem(
  data,
  size,
  newdata = NULL,
  confidence.level = 0.99,
  type = "T2.var",
  covvar = "empirical",
  plot = TRUE,
  var.estimates = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="offlinem_+3A_data">data</code></td>
<td>
<p>dataframe of reference dataset.
For each batch, variables are arranged in lines and columns are time-instants. The different batches are combined in a single dataset through
rbind</p>
</td></tr>
<tr><td><code id="offlinem_+3A_size">size</code></td>
<td>
<p>number of variables</p>
</td></tr>
<tr><td><code id="offlinem_+3A_newdata">newdata</code></td>
<td>
<p>dataframe of one or more new batches for monitoring (each with same number of variables and time instants of <code>data</code>).
Different batches are combined in a single dataset through rbind</p>
</td></tr>
<tr><td><code id="offlinem_+3A_confidence.level">confidence.level</code></td>
<td>
<p>H0 probability to be consider to define the quantile (default is 0.99)</p>
</td></tr>
<tr><td><code id="offlinem_+3A_type">type</code></td>
<td>
<p>&quot;T2.var&quot; for Hotelling chart (default) and &quot;W.var&quot; for Generalized Variance chart</p>
</td></tr>
<tr><td><code id="offlinem_+3A_covvar">covvar</code></td>
<td>
<p>&quot;empirical&quot; for sample covariance of coefficients (default) and &quot;theoretical&quot; for  estimated theoretical covariance</p>
</td></tr>
<tr><td><code id="offlinem_+3A_plot">plot</code></td>
<td>
<p>TRUE shows the charts plots (default TRUE)</p>
</td></tr>
<tr><td><code id="offlinem_+3A_var.estimates">var.estimates</code></td>
<td>
<p>TRUE show informations about the VAR modeling phase (default FALSE)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>#' The maximum number of variables is five.
</p>
<p>All batches must have the same number of time-instants.
</p>
<p>The dataset of batches in &quot;data&quot; are considered to be in control
</p>


<h3>Value</h3>

<p>beyond.limits: returns the batches that the T2.var (or W.var) scores are above the control limit
</p>
<p>LimT2 (or LimW): T2.var (or W.var) control limit
</p>
<p>perc: perc_ref (and perc_new) returns the rate of reference batches (and new batches) above the control limit
(perc_ref= g_ref/I and perc_new= g_new/Inew, where I (Inew) is the overall number of reference batches (new batches) and g_ref (g_new) is the number of reference batches (new batches) above the control limit)
</p>
<p>arl: arl_ref (and arl_new) returns the mean number of reference batches (and new batches) before a signal is given by the charts
(arl_ref=1/perc_ref and arl_new=1/perc_new)
</p>
<p>varest: If var.estimates=TRUE, it returns the matrices (vec.phis and vec.phis.new) in which each row contains the estimated VAR(1) phis for each reference batches and new batches, respectively;
the matrices (vec.cov.theoretical and vec.cov.empirical) with  the  theoretical and empirical estimated phis covariances from the reference batches, respectively;
the lists (cov.B1 and cov.B1new) of the theoretical estimated phis covariances of the reference and new batches, respectively;
the number (I) of reference batches; the number (Inew) of new batches; and the number (n) of time-instants
</p>


<h3>See Also</h3>

<p>simoff
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Example 1: Monitoring considering two variables and Inew= 10 in control batches

   mydata=simoff()
   T2.var=offlinem(data=mydata$data,size=2)
   T2.var.new=offlinem(data=mydata$data,size=2,newdata=mydata$newdata)
   W.var=offlinem(data=mydata$data,size=2,type="W.var")
   W.var.new=offlinem(data=mydata$data,size=2,type="W.var",newdata=mydata$newdata)


# Example 2: Monitoring considering three variables and Inew=50 out of control batches

   B1=matrix(c(-0.3,0,0.4,0,0.2,0,0,-0.1,0.5),3,byrow=TRUE)
   B1new=matrix(c(0.7,0,0.4,0,0.5,0,0,-0.1,0.5),3,byrow=TRUE)
   mydata2=simoff(n=100,I=100,size=3,Inew=50,B1,varcov=diag(3),B1new)
   T2.var=offlinem(data=mydata2$data,size=3)
   T2.var.new=offlinem(data=mydata2$data,size=3,newdata=mydata2$newdata)
   W.var=offlinem(data=mydata2$data,size=3,type="W.var")
   W.var.new=offlinem(data=mydata2$data,size=3,type="W.var",newdata=mydata2$newdata)

</code></pre>

<hr>
<h2 id='onlinem'>Online monitoring</h2><span id='topic+onlinem'></span>

<h3>Description</h3>

<p>Online T2.var and W.var control charts for monitoring batch processes based on VAR model.
This approach is fully described in &quot;Marcondes Filho, D., &amp; Valk, M. (2020). Dynamic VAR Model-Based Control Charts
for Batch Process Monitoring. European Journal of Operational Research.&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>onlinem(
  data,
  size,
  newdata,
  Lc = 50,
  Lr = 30,
  confidence.level = 0.99,
  type = "T2.var",
  covvar = "empirical",
  plot = TRUE,
  var.estimates = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="onlinem_+3A_data">data</code></td>
<td>
<p>dataframe of reference dataset.
For each batch, variables are arranged in lines and columns are time-instants. The different batches are combined in a single dataset through
rbind</p>
</td></tr>
<tr><td><code id="onlinem_+3A_size">size</code></td>
<td>
<p>number of variables</p>
</td></tr>
<tr><td><code id="onlinem_+3A_newdata">newdata</code></td>
<td>
<p>dataframe of one or more new batches for monitoring (each with same number of variables and time instants of <code>data</code>).
Different batches are combined in a single dataset through rbind</p>
</td></tr>
<tr><td><code id="onlinem_+3A_lc">Lc</code></td>
<td>
<p>length of the coupled vector</p>
</td></tr>
<tr><td><code id="onlinem_+3A_lr">Lr</code></td>
<td>
<p>length of random vector (Lr&lt;Lc)</p>
</td></tr>
<tr><td><code id="onlinem_+3A_confidence.level">confidence.level</code></td>
<td>
<p>H0 probability to be consider to define the quantile (default is 0.99)</p>
</td></tr>
<tr><td><code id="onlinem_+3A_type">type</code></td>
<td>
<p>&quot;T2.var&quot; for Hotelling chart (default) and &quot;W.var&quot; for Generalized Variance chart</p>
</td></tr>
<tr><td><code id="onlinem_+3A_covvar">covvar</code></td>
<td>
<p>&quot;empirical&quot; for sample covariance of coefficients (default) and &quot;theoretical&quot; for  estimated theoretical covariance</p>
</td></tr>
<tr><td><code id="onlinem_+3A_plot">plot</code></td>
<td>
<p>TRUE shows the charts plots (default TRUE)</p>
</td></tr>
<tr><td><code id="onlinem_+3A_var.estimates">var.estimates</code></td>
<td>
<p>TRUE show informations about the VAR modeling phase and the elements for setting T2.var / W.var control charts (default FALSE)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The maximum number of variables is five.
</p>
<p>All batches must have the same number of time-instants.
</p>
<p>This method is based on the use of &quot;coupled vectors (cv)&quot; (for more details, see Marcondes Filho, D., &amp; Valk, M., 2020&quot;).
</p>
<p>The parameters Lc and Lr define the cv structure.
</p>
<p>Considering the new ongoing batch under monitoring:
</p>
<p>Lc is the number of elements of cv. (Lc is smaller than the number of time-instants);
Lr is the number of elements in cv randomly chosen from the in control batches in the reference dataset;
Lc-Lr is the number of elements in cv from the last (Lc-Lr) observations of the new ongoing batch.
</p>
<p>Default is  Lc= 50 e Lr=30.
</p>
<p>The batches in dataset &quot;data&quot; are considered to be in control
</p>


<h3>Value</h3>

<p>beyond.limits: returns the time-instants of each batch that the T2.var (or W.var) score are above the control limit
</p>
<p>arl: returns for each new batch the mean number of time-instants before a signal is given by the control chart
(arl=n/g, where n is the overall number of time-instants and g is the number of time-instants above the control limit)
</p>
<p>time.to.first.detection (TFD): returns for each new batch the first time-instant (the most recently instant) that can be considered
as a possible signal of process change. TFD is the first point (t*) above the limit followed by two consecutive points above the control limit
</p>
<p>artl: returns the cumulative rate of the overall time-instants (n) until the first three consecutive points are above the control limit.
The artl is computed using the first of these three points, that is, artl=t*/n
</p>
<p>varest: If var.estimates=TRUE, it returns the Lim_T2 vector (or Lim_W vector) of the T2.var (or W.var) control limits to each time-instant;
the T2.var (or W.var) scores for each new batch to each time-instant [(tnew) matrix for the T2.var and (wnew) matrix for the W.var scores];
the number (I) of reference batches; the number (C=size*size) of estimated phis coefficients; the number (Inew) of new batches;
the number (n) of time-instants and the (cov) list including the estimated mean
covariance from the reference batches to each time-instant
</p>
<p>#' @examples
</p>
<p># Example 1: Monitoring considering two variables and Inew=5 in control batches
</p>
<p>mydata=simon()
</p>
<p>T2.var.on=onlinem(data=mydata$data,size=2,newdata=mydata$newdata)
W.var.on=onlinem(data=mydata$data,size=2,type=&quot;W.var&quot;,newdata=mydata$newdata)
</p>
<p># Example 2: Monitoring considering two variables and Inew=10 in control batches
</p>
<p>B1=matrix(c(-0.3, 0.4, 0.4, 0.5), 2, byrow=TRUE)
B1new=B1
mydata2=simon(n=100,I=200,size=2,Inew=10,n1=50,B1=B1,varcov=diag(2),B1new=B1new)
T2.var.on=onlinem(data=mydata2$data,size=2,newdata=mydata2$newdata, plot=F)
W.var.on=onlinem(data=mydata2$data,size=2,type=&quot;W.var&quot;,newdata=mydata2$newdata, plot=F)
</p>
<p># Example 3: Monitoring considering three variables and Inew=10 out of control batches
</p>
<p>B1=matrix(c(-0.3,0,0.4,0,0.2,0,0,-0.1,0.5),3,byrow=TRUE)
B1new=matrix(c(0.7,0,0.4,0,0.5,0,0,-0.1,0.5),3,byrow=TRUE)
mydata3=simon(n=100,I=200,size=3,Inew=10,n1=50,B1=B1,varcov=diag(3),B1new=B1new)
T2.var.on=onlinem(data=mydata3$data,size=3,newdata=mydata3$newdata, plot=F)
W.var.on=onlinem(data=mydata3$data,size=3,type=&quot;W.var&quot;,newdata=mydata3$newdata, plot=F)
</p>


<h3>See Also</h3>

<p>simon
</p>

<hr>
<h2 id='simoff'>simulating dataset (Offline settings)</h2><span id='topic+simoff'></span>

<h3>Description</h3>

<p>Function to simulate datasets based on the VAR(1) model (without intercept). The dataset include in control
batches and new batches for offline monitoring
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simoff(
  n = 100,
  I = 100,
  size = 2,
  Inew = 10,
  B1 = matrix(c(-0.3, 0.4, 0.4, 0.5), ncol = size, byrow = TRUE),
  varcov = diag(2),
  B1new = matrix(c(-0.3, 0.4, 0.4, 0.5), ncol = size, byrow = TRUE)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simoff_+3A_n">n</code></td>
<td>
<p>number of time-instants</p>
</td></tr>
<tr><td><code id="simoff_+3A_i">I</code></td>
<td>
<p>number of in control batch samples</p>
</td></tr>
<tr><td><code id="simoff_+3A_size">size</code></td>
<td>
<p>number of variables</p>
</td></tr>
<tr><td><code id="simoff_+3A_inew">Inew</code></td>
<td>
<p>number of new batch samples for monitoring</p>
</td></tr>
<tr><td><code id="simoff_+3A_b1">B1</code></td>
<td>
<p>matrix (size x size) containing the VAR(1) coefficients of in control batches</p>
</td></tr>
<tr><td><code id="simoff_+3A_varcov">varcov</code></td>
<td>
<p>covariance matrix (size x size) of errors</p>
</td></tr>
<tr><td><code id="simoff_+3A_b1new">B1new</code></td>
<td>
<p>matrix (size x size) containing the VAR(1) coefficients of new batches</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data</code>  A dataframe of reference dataset of <code>I</code> in control batches.
For each batch, variables are arranged in lines and columns are time-instants. The different batches are combined in a single dataset
of dimension <code>[(I * size) X n]</code>
</p>
<p><code>newdata</code>  A dataframe including a dataset of <code>Inew</code> new batches for monitoring (each with same number of variables
and time-instants of <code>data</code>).
The different batches are combined in a single dataset of dimension <code>[(Inew * size) X n]</code>
</p>


<h3>See Also</h3>

<p>offlinem, simon, onlinem
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Example 1: Two variables (A default in control simulating dataset)


    mydata=simoff()


# Example 2: Three variables and Inew=50 out of control batches

    B1=matrix(c(-0.3,0,0.4,0,0.2,0,0,-0.1,0.5),3,byrow=TRUE)
    B1new=matrix(c(0.1,0,0.4,0,0.2,0,0,-0.1,0.5),3,byrow=TRUE)
    mydata1=simoff(n=100,I=100,size=3,Inew=50,B1,varcov=diag(3),B1new)


# Example 3: Three variables and Inew=1 new out of control batch

    B1=matrix(c(-0.3,0,0.4,0,0.2,0,0,-0.1,0.5),3,byrow=TRUE)
    B1new=matrix(c(0.1,0,0.4,0,0.2,0,0,-0.1,0.5),3,byrow=TRUE)
    mydata2=simoff(n=100,I=100,size=3,Inew=1,B1,varcov=diag(3),B1new)
    plot.ts(t(mydata2$data[1:3,]),main="One in control batch sample")
    plot.ts(t(mydata2$newdata),main="One new batch sample")

</code></pre>

<hr>
<h2 id='simon'>simulating dataset (Online settings)</h2><span id='topic+simon'></span>

<h3>Description</h3>

<p>Function to simulate datasets based on the VAR(1) model (without intercept). The dataset include in control batches and new batches for online monitoring
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simon(
  n = 100,
  I = 200,
  size = 2,
  Inew = 5,
  n1 = 50,
  B1 = matrix(c(-0.3, 0.4, 0.4, 0.5), ncol = size, byrow = TRUE),
  varcov = diag(2),
  B1new = matrix(c(-0.3, 0.4, 0.4, 0.5), ncol = size, byrow = TRUE)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simon_+3A_n">n</code></td>
<td>
<p>number of time-instants</p>
</td></tr>
<tr><td><code id="simon_+3A_i">I</code></td>
<td>
<p>number of in control batch samples</p>
</td></tr>
<tr><td><code id="simon_+3A_size">size</code></td>
<td>
<p>number of variables</p>
</td></tr>
<tr><td><code id="simon_+3A_inew">Inew</code></td>
<td>
<p>number of new batch samples for monitoring</p>
</td></tr>
<tr><td><code id="simon_+3A_n1">n1</code></td>
<td>
<p>number of time-instants for the new batches under the in control process</p>
</td></tr>
<tr><td><code id="simon_+3A_b1">B1</code></td>
<td>
<p>matrix (size x size) containing the VAR(1) coefficients of in control batches</p>
</td></tr>
<tr><td><code id="simon_+3A_varcov">varcov</code></td>
<td>
<p>covariance matrix (size x size) of errors</p>
</td></tr>
<tr><td><code id="simon_+3A_b1new">B1new</code></td>
<td>
<p>matrix (size x size) containing the VAR(1) coefficients of new batches</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data</code>  A dataframe of reference dataset of <code>I</code> in control batches.
For each batch, variables are arranged in lines and columns are time-instants. The different batches are combined in a single dataset
of dimension <code>[(I * size) X n]</code>
</p>
<p><code>newdata</code>  A dataframe including a dataset of <code>Inew</code> new batches for monitoring (each with same number of variables and time-instants of <code>data</code>).
The different batches are combined in a single dataset of dimension <code>[(Inew * size) X n]</code>
</p>


<h3>See Also</h3>

<p>onlinem, simoff, offlinem
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Example 1: Two variables (A default in control simulating dataset)

    mydata=simon()


# Example 2: Three variables and Inew=5 out of control batches

    B1=matrix(c(-0.3,0,0.4,0,0.2,0,0,-0.1,0.5),3,byrow=TRUE)
    B1new=matrix(c(0.1,0,0.4,0,0.2,0,0,-0.1,0.5),3,byrow=TRUE)
    mydata1=simon(n=100,I=200,size=3,Inew=5,n1=50,B1,varcov=diag(3),B1new)


# Example 3: Three variables and one Inew=1 out of control batch

    B1=matrix(c(-0.3,0,0.4,0,0.2,0,0,-0.1,0.5),3,byrow=TRUE)
    B1new=matrix(c(0.1,0,0.4,0,0.7,0,0,-0.1,0.5),3,byrow=TRUE)
    mydata2=simon(n=100,I=1,size=3,Inew=1,n1=25,B1,varcov=diag(3),B1new)
    plot.ts(t(mydata2$data),main="One in control batch sample")
    plot.ts(t(mydata2$newdata),main="One new batch sample")

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
