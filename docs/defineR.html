<!DOCTYPE html><html><head><title>Help for package defineR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {defineR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#defineR'><p>Creates Define XML documents</p></a></li>
<li><a href='#write_define'><p>Creates a define XML document</p></a></li>
<li><a href='#write_metadata'><p>Creates define XML metadata</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Creates Define XML Documents</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.4</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>David Bosak &lt;dbosak01@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Creates 'define.xml' documents used for regulatory 
    submissions based on spreadsheet metadata.  Can also help
    create metadata and generate HTML data explorer. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://creativecommons.org/publicdomain/zero/1.0/legalcode">CC0</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0), common, glue</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, magrittr, testthat (&ge; 3.0.0),</td>
</tr>
<tr>
<td>Imports:</td>
<td>readxl, xml2, xslt, reporter, libr, openxlsx, stats</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-09-19 16:03:00 UTC; dbosa</td>
</tr>
<tr>
<td>Author:</td>
<td>David Bosak [aut, cre],
  Aheer Alvi [aut],
  Jonathan Stallings [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-09-20 08:26:07 UTC</td>
</tr>
</table>
<hr>
<h2 id='defineR'>Creates Define XML documents</h2><span id='topic+defineR'></span>

<h3>Description</h3>

<p>The <strong>defineR</strong> package contains functions to
create CDISC compliant define.xml documents suitable for
submission to the FDA. The package also contains related capabilities
to help create and manage metadata needed to create the define.xml.
</p>


<h3>Details</h3>

<p>The <strong>defineR</strong> package uses spreadsheet-based metadata.  The package
can use the metadata to produce the define.xml, define.html, and a check
report.  It also has the capability to create a template to get
you started defining metadata for your project.
</p>
<p>The <strong>defineR</strong> package is simple to use.  It contains only two functions:
</p>

<ul>
<li> <p><code><a href="#topic+write_define">write_define</a></code>: Creates a define.xml document and related files.
</p>
</li>
<li> <p><code><a href="#topic+write_metadata">write_metadata</a></code>: Creates a metadata template.
</p>
</li></ul>

<p>See the [Getting Started](https://defineR.r-sassy.org/articles/defineR.html)
page for an overview of these functions.  Additional
information is available in the function references.
</p>

<hr>
<h2 id='write_define'>Creates a define XML document</h2><span id='topic+write_define'></span>

<h3>Description</h3>

<p>The <code>write_define</code> function inputs an SDTM or ADAM
metadata file and outputs a define.xml and associated files to a specified
directory. Possible associated files are the HTML transformation of
the define.xml and a check report. By default, the check report will
also be shown in the viewer.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_define(
  path,
  dir,
  type = "sdtm",
  ver = NULL,
  check = TRUE,
  html = TRUE,
  view = TRUE,
  report_type = "PDF",
  end_char = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_define_+3A_path">path</code></td>
<td>
<p>The path to the metadata file.  Currently only Excel metadata
files are supported.  Other metadata sources may be added if there is sufficient
interest.</p>
</td></tr>
<tr><td><code id="write_define_+3A_dir">dir</code></td>
<td>
<p>The output directory to create the define.xml and associated files.
If the directory does not exist, the function will attempt to create it.</p>
</td></tr>
<tr><td><code id="write_define_+3A_type">type</code></td>
<td>
<p>The type of define.xml to create.  Valid values are
&quot;sdtm&quot; and &quot;adam&quot;.  Default is &quot;sdtm&quot;.</p>
</td></tr>
<tr><td><code id="write_define_+3A_ver">ver</code></td>
<td>
<p>The version of the define XML to produce. Currently only
version &quot;2.0.0&quot; is supported.</p>
</td></tr>
<tr><td><code id="write_define_+3A_check">check</code></td>
<td>
<p>Whether or not to perform consistency checks.  If so,
a check report will be produced in the output directory. Valid values
are TRUE and FALSE.  Default is TRUE.</p>
</td></tr>
<tr><td><code id="write_define_+3A_html">html</code></td>
<td>
<p>Whether or not to produce the HTML output associated with the
define.xml.  Valid values are TRUE and FALSE.  Default is TRUE.</p>
</td></tr>
<tr><td><code id="write_define_+3A_view">view</code></td>
<td>
<p>Whether or not to show the check report in the viewer.  Valid
values are TRUE and FALSE.  Default is TRUE.</p>
</td></tr>
<tr><td><code id="write_define_+3A_report_type">report_type</code></td>
<td>
<p>The output type of the check report, if requested.
Valid values are &quot;TXT&quot;, &quot;RTF&quot;, &quot;PDF&quot;, &quot;HTML&quot; and &quot;DOCX&quot;.  Default is
&quot;PDF&quot;.</p>
</td></tr>
<tr><td><code id="write_define_+3A_end_char">end_char</code></td>
<td>
<p>The end character to use on computational method blocks.
These blocks often contain code samples that include line feeds or other
line ending characters.  This parameter can be used to control how
these characters are emitted to the XML parser.  Default is an empty
string (&quot;&quot;).  If the line feeds in your computational methods are not working,
trying using a return (&quot;\r&quot;) or new line (&quot;\n&quot;).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The define.xml document is used by the FDA (and others) to review
study data. All datasets used in the study are listed, along with
variable and value metadata, where clauses, and more.  The define.xml
can be used along with an XSLT style sheet to transform the XML into
an HTML report.  This HTML report has links that allow you to easily
navigate the data structures.
</p>
<p>The <code>write_define</code> function
creates both the define XML and the define HTML. The <code>path</code>
parameter identifies the location of the Excel metadata, and the
<code>dir</code> parameter specifies an output directory.  You can create
both SDTM and ADAM metadata by passing the appropriate value on the
<code>type</code> parameter.
</p>
<p>Importantly, the function also produces a check report.  This report
will compare the define.xml file against the XSD schema supplied by
CDISC.  Any discrepancies will be written to the check report.  By default,
the check report is also shown in the viewer, and returned as a vector of
strings by the function.  This discrepancy list allows you to verify
that the metadata has been filled out correctly.
</p>
<p>For instance, the
conformance check will ensure that each object ID (OID) is unique within
the document.  Any non-unique IDs will be identified and written to the
check report. The check report may therefore be used iteratively to
fix the metadata.
</p>
<p>Any errors that prevent proper functioning of the procedure will stop
execution, and be displayed in the console.  All other errors and
warnings will be sent to the check report, and will not stop execution.
</p>
<p>Note that the <code>check</code> parameter can be used to turn off the
conformance check mechanism, and just create the XML.
</p>
<p>The XSD schema and XSLT transformation documents were created by CDISC,
and are included in the <strong>defineR</strong> package for convenience. To
specify another version of the documents, use the options &quot;defineR.xsd&quot;
and &quot;defineR.xslt&quot;.  For example:
<code>options("defineR.xsd" = "c:/myproject/define2-1-0.xsd")</code>.
</p>


<h3>Value</h3>

<p>The define.xml file and any associated files will be written
to the directory specified on the <code>dir</code> parameter.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+write_metadata">write_metadata</a></code> to create a metadata template.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get temp directory
tmp &lt;- tempdir()

# Create demo metadata
pth &lt;- write_metadata(tmp, demo = TRUE)

# Generate define files
res &lt;- write_define(pth, tmp, view = FALSE)

# View check results
res
# NULL

# View XML
# file.show(file.path(tmp, "define.sdtm.xml"))

# View check report
# file.show(file.path(tmp, "check.sdtm.pdf"))

# View HTML
# file.show(file.path(tmp, "define.sdtm.html"))
</code></pre>

<hr>
<h2 id='write_metadata'>Creates define XML metadata</h2><span id='topic+write_metadata'></span>

<h3>Description</h3>

<p>The function generates define.xml metadata and
writes it to the file system. The function can generate a blank metadata
spreadsheet, a demonstration spreadsheet, or metadata read
from existing data files. The <code>type</code> parameter can be used
to request an SDTM or ADAM spreadsheet.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_metadata(
  dir,
  type = "sdtm",
  ver = NULL,
  src_dir = NULL,
  check = TRUE,
  demo = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_metadata_+3A_dir">dir</code></td>
<td>
<p>The directory in which to produce the metadata.</p>
</td></tr>
<tr><td><code id="write_metadata_+3A_type">type</code></td>
<td>
<p>The type of metadata file to produce.  Valid values are
&quot;SDTM&quot; and &quot;ADAM&quot;. Default is &quot;SDTM&quot;.</p>
</td></tr>
<tr><td><code id="write_metadata_+3A_ver">ver</code></td>
<td>
<p>The version of the metadata file.  Default is
the preferred version of the define standard.  The function
currently supports only version &quot;2.0.0&quot;.</p>
</td></tr>
<tr><td><code id="write_metadata_+3A_src_dir">src_dir</code></td>
<td>
<p>If the metadata will be generated from existing datasets,
supply the directory path for those datasets.  If the metadata will
not be created from datasets, this parameter should be NULL.  Datasets
should be in XPT file format.</p>
</td></tr>
<tr><td><code id="write_metadata_+3A_check">check</code></td>
<td>
<p>Whether or not to run the checks.</p>
</td></tr>
<tr><td><code id="write_metadata_+3A_demo">demo</code></td>
<td>
<p>If this parameter is TRUE, the function will generate
a metadata file populated with sample data. If the parameter is FALSE,
a blank metadata spreadsheet will be produced. Default is FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Frequently, organizations already have study metadata stored
in Excel spreadsheets, and in the correct structure.  This structure
is used commonly in the industry by other software.
</p>
<p>The purpose of the <code>write_metadata</code> function is to create an
initial metadata template for studies in which you have no metadata.
This task will ensure that you have the proper metadata structure
to later create the define.xml.
</p>
<p>By default, the function creates an unpopulated metadata spreadsheet.
If the <code>demo</code> parameter is set to TRUE, the function will create
the same spreadsheet populated with sample data.  This sample data
can help you to understand how to populate the metadata for your study.
Note that this demo spreadsheet is populated correctly, and has no
conformance errors.  Use this demo spreadsheet as a guide to fill
out your metadata.
</p>
<p>The demo spreadsheet was created by CDISC, and is
included in the <strong>defineR</strong> package for convenience.
</p>


<h3>Value</h3>

<p>The full path of the generated metadata file.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+write_define">write_define</a></code> to create a define.xml document and
associated files.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get temporary directory
tmp &lt;- tempdir()

# Create demo spreadsheet
out1 &lt;- write_metadata(tmp, demo = TRUE)

# View file
# file.show(out1)

# Create unpopulated spreadsheet
out2 &lt;- write_metadata(tmp, demo = FALSE)

# View file
# file.show(out2)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
