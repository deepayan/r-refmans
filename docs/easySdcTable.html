<!DOCTYPE html><html lang="en"><head><title>Help for package easySdcTable</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {easySdcTable}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#EasyData'><p>Function that returns a dataset</p></a></li>
<li><a href='#IncDefault'><p>Default IncProgress function</p></a></li>
<li><a href='#ProtectTable'><p>Easy interface to sdcTable: Table suppression according to a frequency rule.</p></a></li>
<li><a href='#ProtectTable1'><p>Easy input interface to sdcTable</p></a></li>
<li><a href='#PTgui'><p>Table suppression - Shiny Gui</p></a></li>
<li><a href='#PTwrap'><p>Wrapper to ProtectTable() with additional methods (partly experimental)</p></a></li>
<li><a href='#PTxyz'><p>ProtectTable with output ready for SuppressDec in package RegSDC</p></a></li>
<li><a href='#ReplaceDimList'><p>ReplaceDimList</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Easy Interface to the Statistical Disclosure Control Package
'sdcTable' Extended with Own Implementation of
'GaussSuppression'</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2025-03-17</td>
</tr>
<tr>
<td>Author:</td>
<td>Øyvind Langsrud [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Øyvind Langsrud &lt;oyl@ssb.no&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>SSBtools</td>
</tr>
<tr>
<td>Imports:</td>
<td>sdcTable, shiny, methods, Matrix</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, RegSDC, testthat (&ge; 2.1.0)</td>
</tr>
<tr>
<td>Description:</td>
<td>The main function, ProtectTable(), performs table suppression according to a 
 frequency rule with a data set as the only required input. Within this function, 
 protectTable(), protect_linked_tables() or runArgusBatchFile() in package 'sdcTable' is called. 
 Lists of level-hierarchy (parameter 'dimList') and other required input to these functions 
 are created automatically. 
 The suppression method Gauss (default) is implemented independently of 'sdcTable'.
 The function, PTgui(), starts a graphical user interface based on the 'shiny' package.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a> | file LICENSE</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/statisticsnorway/ssb-easysdctable">https://github.com/statisticsnorway/ssb-easysdctable</a>,
<a href="https://statisticsnorway.github.io/ssb-easysdctable/">https://statisticsnorway.github.io/ssb-easysdctable/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/statisticsnorway/ssb-easysdctable/issues">https://github.com/statisticsnorway/ssb-easysdctable/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-03-17 13:15:13 UTC; oyl</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-03-17 14:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='EasyData'>Function that returns a dataset</h2><span id='topic+EasyData'></span>

<h3>Description</h3>

<p>Function that returns a dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>EasyData(dataset, path = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="EasyData_+3A_dataset">dataset</code></td>
<td>
<p>Name of data set within the easySdcTable  package</p>
</td></tr>
<tr><td><code id="EasyData_+3A_path">path</code></td>
<td>
<p>When non-NULL the data set is read from &quot;path/dataset.RData&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The dataset
</p>


<h3>Note</h3>

<p>The function returns the same datasets as <code><a href="SSBtools.html#topic+SSBtoolsData">SSBtoolsData</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> z  &lt;- EasyData("sosialFiktiv")

</code></pre>

<hr>
<h2 id='IncDefault'>Default IncProgress function</h2><span id='topic+IncDefault'></span>

<h3>Description</h3>

<p>Default IncProgress function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>IncDefault()
</code></pre>


<h3>Note</h3>

<p>Instead of using <code>IncProgress = IncDefault</code> in ProtectTable1/ProtectTable one could use <br />
<code>IncProgress = function(){cat("."); flush.console()}</code> <br />
but this results in wrong
&quot;usage line&quot; in the documentation since &quot;;&quot; is not included.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> IncDefault() 
</code></pre>

<hr>
<h2 id='ProtectTable'>Easy interface to sdcTable: Table suppression according to a frequency rule.</h2><span id='topic+ProtectTable'></span><span id='topic+ProtectTableData'></span>

<h3>Description</h3>

<p><code><a href="SSBtools.html#topic+GaussSuppression">GaussSuppression</a></code>, <code><a href="sdcTable.html#topic+protectTable">protectTable</a></code> or  <code><a href="sdcTable.html#topic+protect_linked_tables">protect_linked_tables</a></code>
is run with a data set as the only required input. One (stacked) or several (unstacked) input variables can hold cell counts.
<code>ProtectTableData</code> is a tidy wrapper function, which returns a single data frame instead of a list (<code>info</code> omitted).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ProtectTable(
  data,
  dimVar = 1:NCOL(data),
  freqVar = NULL,
  protectZeros = TRUE,
  maxN = 3,
  method = "Gauss",
  findLinked = TRUE,
  total = "Total",
  addName = FALSE,
  sep = "_",
  removeZeros = FALSE,
  dimList = NULL,
  groupVarInd = NULL,
  ind1 = NULL,
  ind2 = NULL,
  rowData = NULL,
  varNames = paste("var", 1:100, sep = ""),
  split = NULL,
  border = sep,
  revBorder = FALSE,
  freqName = "values",
  totalFirst = FALSE,
  numericOrder = TRUE,
  namesAsInput = TRUE,
  orderAsInput = TRUE,
  sortByReversedColumns = FALSE,
  doUnstack = TRUE,
  removeTotal = TRUE,
  singleOutput = NULL,
  suppression = NA,
  outFreq = "freq",
  outSdcStatus = "sdcStatus",
  outSuppressed = "suppressed",
  infoAsFrame = FALSE,
  IncProgress = IncDefault,
  verbose = FALSE,
  ...
)

ProtectTableData(data, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ProtectTable_+3A_data">data</code></td>
<td>
<p>data frame</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_dimvar">dimVar</code></td>
<td>
<p>The main dimensional variables and additional aggregating variables (name or number).</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_freqvar">freqVar</code></td>
<td>
<p>Variable(s) holding counts or NULL in the case of micro data (name or number).</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_protectzeros">protectZeros</code></td>
<td>
<p>When TRUE empty cells (count=0) is considered sensitive (i.e. same as allowZeros in  <code><a href="sdcTable.html#topic+primarySuppression">primarySuppression</a></code>).</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_maxn">maxN</code></td>
<td>
<p>All cells having counts &lt;= maxN are set as primary suppressed.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_method">method</code></td>
<td>
<p>Parameter <code>method</code> in <code><a href="sdcTable.html#topic+protectTable">protectTable</a></code>, <code><a href="sdcTable.html#topic+protect_linked_tables">protect_linked_tables</a></code>
or wrapper methods via <code><a href="#topic+PTwrap">PTwrap</a></code>.
<code>Gauss</code> (default) is implemented independently of <code>sdcTable</code>. There is also a similar variant implemented in sdcTable as <code>GAUSS</code>.
But this implementation is not as optimal and <code>Gauss</code> is recommended instead.
</p>

<ul>
<li> <p><strong><code>"SIMPLEHEURISTIC"</code>:</strong> This method is default in protectable.
</p>
</li>
<li> <p><strong><code>"SIMPLEHEURISTIC_OLD"</code>:</strong> As <code>"SIMPLEHEURISTIC"</code> in sdcTable versions prior to 0.32.
</p>
</li>
<li> <p><strong><code>"OPT"</code>, <code>"HITAS"</code>, <code>"HYPERCUBE"</code>, <code>"GAUSS"</code>:</strong> Other methods in protectable. <code>"HYPERCUBE"</code> is not possible in cases with two linked tables.
</p>
</li>
<li> <p><strong><code>"SimpleSingle"</code>:</strong>  <code>"SIMPLEHEURISTIC_OLD"</code> with <code>detectSingletons=TRUE</code> when <code>protectZeros=FALSE</code> and
<code>"SIMPLEHEURISTIC_OLD"</code> with <code>threshold=1</code> (can be overridden by input) when <code>protectZeros=TRUE</code>.
</p>
</li>
<li> <p><strong><code>"SIMPLEHEURISTICSingle"</code>:</strong> As <code>"SimpleSingle"</code> with <code>"SIMPLEHEURISTIC"</code> instead of <code>"SIMPLEHEURISTIC_OLD"</code>.
</p>
</li>
<li> <p><strong><code>"Simple"</code>:</strong> <code>"SIMPLEHEURISTIC_OLD"</code> with <code>detectSingletons=FALSE</code>.
</p>
</li>
<li> <p><strong><code>"Gauss"</code>:</strong> <code><a href="SSBtools.html#topic+GaussSuppression">GaussSuppression</a></code> is called with parameters <code>x</code>, <code>candidates</code>, <code>primary</code> and <code>singleton</code> automatically generated.
Other parameters (<code>singletonMethod</code>, <code>printInc</code>) can be specified.
</p>
</li></ul>

<p>Alternatively this parameter can be a named list specifying parameters for running tau-argus (see details).
See <code><a href="#topic+PTwrap">PTwrap</a></code> for other (experimental) wrapper methods (see details).</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_findlinked">findLinked</code></td>
<td>
<p>When TRUE, the function may find two linked tables and run protect_linked_tables.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_total">total</code></td>
<td>
<p>String used to name totals.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_addname">addName</code></td>
<td>
<p>When TRUE the variable name is added to the level names, except for variables with most levels.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_sep">sep</code></td>
<td>
<p>A character string to separate when addName apply and when creating variable names.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_removezeros">removeZeros</code></td>
<td>
<p>When TRUE, rows with zero count will be removed from the data within the algorithm.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_dimlist">dimList</code></td>
<td>
<p>By default, hierarchies will be automatically found from data (see <code><a href="SSBtools.html#topic+FindDimLists">FindDimLists</a></code>).
With non-NULL dimList, these will be changed.
In practice this is done by the function <code><a href="#topic+ReplaceDimList">ReplaceDimList</a></code>.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_groupvarind">groupVarInd</code></td>
<td>
<p>Possible manual specification of list defining the hierarchical
variable groups. When NULL (default) this information will be found automatically
by <code><a href="SSBtools.html#topic+FindTableGroup">FindTableGroup</a></code>.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_ind1">ind1</code></td>
<td>
<p>Coding of table 1 as indices referring to elements of groupVarInd. This information
will be found automatically
by <code><a href="SSBtools.html#topic+FindTableGroup">FindTableGroup</a></code> when groupVarInd=NULL.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_ind2">ind2</code></td>
<td>
<p>Coding of table 2 as indices referring to elements of groupVarInd (as ind1 above).</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_rowdata">rowData</code></td>
<td>
<p>Input to <code><a href="SSBtools.html#topic+Stack">Stack</a></code> used to generate extra dimVar variables when stacking in cases with several
freqvar variables. When NULL rowData will be created automatically by <code><a href="SSBtools.html#topic+AutoSplit">AutoSplit</a></code> using varNames (see below)
and the the freqvar names as input.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_varnames">varNames</code></td>
<td>
<p>The names of the extra dimVar variable(s) made when stacking in cases with several
freqvar variables. When length(varNames)&gt;1 several variables may be found by <code><a href="SSBtools.html#topic+AutoSplit">AutoSplit</a></code>.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_split">split</code></td>
<td>
<p>Parameter to <code><a href="SSBtools.html#topic+AutoSplit">AutoSplit</a></code> - see varNames and rowData above.
When NULL (default), automatic splitting without needing a split string.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_border">border</code></td>
<td>
<p>Parameter to <code><a href="SSBtools.html#topic+AutoSplit">AutoSplit</a></code> - see varNames and rowData above.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_revborder">revBorder</code></td>
<td>
<p>Parameter to <code><a href="SSBtools.html#topic+AutoSplit">AutoSplit</a></code> - see varNames and rowData above..</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_freqname">freqName</code></td>
<td>
<p>Input to <code><a href="SSBtools.html#topic+Stack">Stack</a></code>. The name of the new freqvar variable obtained when stacking in cases with several
input freqvar variables.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_totalfirst">totalFirst</code></td>
<td>
<p>Parameter controlling how output is sorted.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_numericorder">numericOrder</code></td>
<td>
<p>Parameter controlling how output is sorted.
Output is character but sorting can be based on the numeric input variables.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_namesasinput">namesAsInput</code></td>
<td>
<p>When TRUE those output variables (created by unstacking) that correspond to input will be named as input.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_orderasinput">orderAsInput</code></td>
<td>
<p>When TRUE output corresponding to input will be ordered as input and kept together as one block.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_sortbyreversedcolumns">sortByReversedColumns</code></td>
<td>
<p>When TRUE output will be sorted by variables in opposite order.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_dounstack">doUnstack</code></td>
<td>
<p>When FALSE output will not be unstacked (in cases with sever input freqvar variables)</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_removetotal">removeTotal</code></td>
<td>
<p>When TRUE the total string (see total above) will be removed from the names of output variables
created by unstacking (in cases with sever input freqvar variables).</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_singleoutput">singleOutput</code></td>
<td>
<p>When TRUE output will be in as single data set. Default is FALSE for unstacked data
(in cases with sever input freqvar variables) and otherwise TRUE.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_suppression">suppression</code></td>
<td>
<p>Value used for suppressed elements in suppressed output data. Default is NA.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_outfreq">outFreq</code></td>
<td>
<p>String used to name output variable(s)</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_outsdcstatus">outSdcStatus</code></td>
<td>
<p>String used to name output variable(s)</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_outsuppressed">outSuppressed</code></td>
<td>
<p>String used to name output variable(s)</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_infoasframe">infoAsFrame</code></td>
<td>
<p>When TRUE output element info is a data frame (useful in Shiny).</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_incprogress">IncProgress</code></td>
<td>
<p>A function to report progress (incProgress in Shiny). Set equal to NULL to turn it off.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_verbose">verbose</code></td>
<td>
<p>Parameter sent to <code><a href="sdcTable.html#topic+protectTable">protectTable</a></code>, <code><a href="sdcTable.html#topic+protect_linked_tables">protect_linked_tables</a></code> or <code><a href="sdcTable.html#topic+runArgusBatchFile">runArgusBatchFile</a></code>.</p>
</td></tr>
<tr><td><code id="ProtectTable_+3A_...">...</code></td>
<td>
<p>Further parameters sent to <code><a href="sdcTable.html#topic+protectTable">protectTable</a></code> (possibly via <code><a href="sdcTable.html#topic+protect_linked_tables">protect_linked_tables</a></code>)
such as timeLimit.
Parameters to  <code><a href="SSBtools.html#topic+GaussSuppression">GaussSuppression</a></code>, <code><a href="sdcTable.html#topic+createArgusInput">createArgusInput</a></code> and <code><a href="#topic+PTwrap">PTwrap</a></code> is also possible (see details).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>One or two tables are identified automatically and subjected to cell suppression
by <code><a href="sdcTable.html#topic+protectTable">protectTable</a></code> (single table) or <code><a href="sdcTable.html#topic+protect_linked_tables">protect_linked_tables</a></code> (two linked tables).
The tables can alternatively be specified manually by groupVarInd, ind1 and ind2.
The output will be on a form similiar to input depending on whether freqVar is a single variable or not.
The status of the cells are
coded as  &quot;u&quot; (primary suppressed), &quot;x&quot; (secondary suppression), and &quot;s&quot; (can be published).
This is taken directly from the output from sdcTable. In cases with two linked tables &quot;u&quot; or &quot;x&quot;
for common cells are based on output from the first table.
</p>

<ul>
<li> <p><strong>To run tau-argus</strong> specify <code>method</code> as a named list containing the
parameter <code>exe</code> for <code><a href="sdcTable.html#topic+runArgusBatchFile">runArgusBatchFile</a></code> and other parameters for
<code><a href="sdcTable.html#topic+createArgusInput">createArgusInput</a></code>.
</p>

<ul>
<li><p> One may specify:
<code>method = list(exe="C:/Tau/TauArgus.exe", typ="tabular", path= getwd(),</code>
<code>solver= "FREE", method= "OPT")</code>
However these values of &quot;exe&quot;, &quot;path&quot; and &quot;solver&quot; and &quot;method&quot; are set by default so in this case
using &quot;<code>method = list(typ="tabular", method= "OPT")</code>&quot; is equivalent.
</p>
</li>
<li><p> If <code>typ="microdata"</code> is specified. Necessary transformation to microdata will be made.
</p>
</li></ul>

</li>
<li> <p><strong>Wrapper methods (partly experimental):</strong>
In the function <code><a href="#topic+PTwrap">PTwrap</a></code> several additional methods are defined.
If input to ProtectTable() is one of these methods ProtectTable() will
be run via PTwrap(). So making explicit call to PTwrap() is not needed.
</p>
</li>
<li> <p><strong>Singleton and zeros:</strong> The parameter detectSingletons was included in protecttable to handle the so-called
singleton problem that appers  when <code>protectZeros=FALSE</code>.
Not all problems were solved and the parameter threshold has been introduced later. The value of threshold
needed depends on the number of singletons in one group. It seems that <code>threshold=3</code> is equivalent to <code>detectSingletons=TRUE</code>.
When <code>protectZeros=TRUE</code> the related “zero problem” occurs. This problem is solved by <code>threshold=1</code>.
</p>
</li>
<li> <p><strong>NOTE:</strong> The use of numVarInd, weightInd and sampWeightInd in sdcTable is not implemented. This also limit possible
input to  tau-argus.
</p>
</li></ul>



<h3>Value</h3>

<p>When singleOutput=TRUE output is a list of two elements.
</p>

<ul>
<li> <p><strong><code>info</code>:</strong> Information as a single column character matrix. This is information about the extra
dimVar variables created when stacking, information about the identified (linked)
table(s) and summary output from sdcTable.
With <code>method="Gauss"</code>, a sdcTable function is run with <code>maxN=0</code> to create a template for the real output.
Some of the summary info is therefore misleading in this case.
</p>
</li>
<li> <p><strong><code>data</code>:</strong> A data frame where variables are named according to outFreq,
outSdcStatus and outSuppressed.
When singleOutput=FALSE output element data is replaced by three elements and these are named
according to outFreq, outSdcStatus and outSuppressed.
</p>
</li></ul>



<h3>Note</h3>

<p>ProtectTable makes a call to the function <code><a href="#topic+ProtectTable1">ProtectTable1</a></code>.
</p>


<h3>See Also</h3>

<p>See also the vignettes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

 # ==== Example 1 , 8 regions ====
 z1 &lt;- EasyData("z1")        
 ProtectTable(z1,1:2, 3)
 ProtectTableData(z1,1:2, 3)
 ProtectTable(z1, c("region","hovedint"), "ant") # Input by name 
 # --- Unstacked input data ---
 z1w = EasyData("z1w") 
 ProtectTable(z1w, 1, 2:5)
 ProtectTableData(z1w, 1, 2:5)
 ProtectTable(z1w, 1, 2:5, varName="hovedint") 
 ProtectTable(z1w, 1, 2:5, method="HITAS")
 ProtectTable(z1w, 1, 2:5, totalFirst = TRUE, method ="Simple")
 
 # ==== Example 2 , 11 regions ====
 z2 &lt;- EasyData("z2") 
 ProtectTable(z2,c(1,3,4), 5) # With region-variable kostragr
 # --- Unstacked input data ---
 z2w &lt;- EasyData("z2w") 
 ProtectTable(z2w, 1:2, 4:7) # With region-variable fylke
 ProtectTable(z2w, 1:3, 4:7) # Two linked tables
 
 # ==== Example 3 , 36 regions ====
 z3 &lt;- EasyData("z3")   
 ProtectTable(z3, c(1,4,5), 7)                               # Three dimensions. No subtotals    
 ProtectTable(z3, 1:6, 7)                                    # Two linked tables  
 # --- Unstacked input data with coded column names 
 z3w &lt;- EasyData("z3w")
 ProtectTable(z3w,1:3,4:15, varName="g12")                   # coding not used when single varName
 ProtectTable(z3w,1:3,4:15, varName=c("hovedint","mnd"))     # Two variables found automatically 
 ProtectTable(z3w,1:3,4:15, varName=c("hovedint","mnd"),
               removeTotal=FALSE)                            # Keep "Total" in variable names 
 # --- Unstacked input data with three level column name coding
 z3wb &lt;- EasyData("z3wb")  
 ProtectTable(z3wb,1:3,4:15,varName=c("hovedint","mnd","mnd2")) # Two variables found automatically
 ProtectTable(z3wb,1:3,4:15,varName=c("hovedint","mnd","mnd2"), 
             split="_")                                         # Three variables when splitting
 ProtectTable(z3wb,1:3,4:15,varName=c("hovedint","mnd","mnd2"),
               split="_",namesAsInput=FALSE,orderAsInput=FALSE) # Alternative ouput format
               
 # ====  Examples Tau-Argus ====              
 exeArgus &lt;- "C:/TauArgus4.1.4/TauArgus.exe" # Change to TauArgus.exe-path in your computer
 pathArgus &lt;- "C:/Users/nnn/Documents"       # Change to an existing folder 
 z1 = EasyData("z1") 
 ProtectTable(z1,1:2,3,method=list(exe=exeArgus, path=pathArgus, typ="tabular", method="OPT")) 
 ProtectTable(z1,1:2,3,method=list(exe=exeArgus, path=pathArgus, typ="tabular", method="MOD")) 
 ProtectTable(z1,1:2,3,method=list(exe=exeArgus, path=pathArgus, typ="tabular", method="GH"))
  ProtectTable(z1,1:2,3,maxN=-1,
   method=list(path=pathArgus, exe=exeArgus, method="OPT",
         primSuppRules= list(list(type="freq", n=4, rg=20))))
 z3 &lt;- EasyData("z3")
 ProtectTable(z3,c(1:2,4,5),7,maxN=-1,
   method=list(path=pathArgus, exe=exeArgus, method="OPT",
         primSuppRules=list(list(type="freq", n=4, rg=20))))
         
               
# ==== Examples with parameter dimList  ====
z2 &lt;- EasyData("z2")
dList &lt;- FindDimLists(z2[-5])
ProtectTable(z2[, c(1,4,5)], 1:2, 3, dimList = dList[c(1,3)])
ProtectTable(z2[, c(1,4,5)], 1:2, 3, dimList = dList[2])
ProtectTable(z2[, c(1,4,5)], 1:2, 3, dimList = DimList2Hrc(dList[c(2,3)]))

## End(Not run)
              
</code></pre>

<hr>
<h2 id='ProtectTable1'>Easy input interface to sdcTable</h2><span id='topic+ProtectTable1'></span>

<h3>Description</h3>

<p>protectTable or protect_linked_tables is run with a data set at the only required input.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ProtectTable1(
  data,
  dimVarInd = 1:NCOL(data),
  freqVarInd = NULL,
  protectZeros = TRUE,
  maxN = 3,
  method = "SIMPLEHEURISTIC",
  findLinked = TRUE,
  total = "Total",
  addName = FALSE,
  sep = ".",
  removeZeros = FALSE,
  dimList = NULL,
  groupVarInd = NULL,
  ind1 = NULL,
  ind2 = NULL,
  dimDataReturn = FALSE,
  IncProgress = IncDefault,
  verbose = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ProtectTable1_+3A_data">data</code></td>
<td>
<p>Matrix or data frame</p>
</td></tr>
<tr><td><code id="ProtectTable1_+3A_dimvarind">dimVarInd</code></td>
<td>
<p>Column-indices of the main dimensional variables and additional aggregating variables.</p>
</td></tr>
<tr><td><code id="ProtectTable1_+3A_freqvarind">freqVarInd</code></td>
<td>
<p>Column-indices of a variable holding counts or NULL in the case of micro data.</p>
</td></tr>
<tr><td><code id="ProtectTable1_+3A_protectzeros">protectZeros</code></td>
<td>
<p>When TRUE empty cells (count=0) is considered sensitive (i.e. same as allowZeros in primarySuppression).</p>
</td></tr>
<tr><td><code id="ProtectTable1_+3A_maxn">maxN</code></td>
<td>
<p>All cells having counts &lt;= maxN are set as primary suppressed.</p>
</td></tr>
<tr><td><code id="ProtectTable1_+3A_method">method</code></td>
<td>
<p>Parameter &quot;method&quot; in protectTable or protect_linked_tables.
Alternatively a list defining parameters for running tau-argus (see <code><a href="#topic+ProtectTable">ProtectTable</a></code>).</p>
</td></tr>
<tr><td><code id="ProtectTable1_+3A_findlinked">findLinked</code></td>
<td>
<p>When TRUE, the function may find two linked tables and run protect_linked_tables.</p>
</td></tr>
<tr><td><code id="ProtectTable1_+3A_total">total</code></td>
<td>
<p>String used to name totals.</p>
</td></tr>
<tr><td><code id="ProtectTable1_+3A_addname">addName</code></td>
<td>
<p>When TRUE the variable name is added to the level names, except for variables with most levels.</p>
</td></tr>
<tr><td><code id="ProtectTable1_+3A_sep">sep</code></td>
<td>
<p>A character string to separate when addName apply.</p>
</td></tr>
<tr><td><code id="ProtectTable1_+3A_removezeros">removeZeros</code></td>
<td>
<p>When TRUE, rows with zero count will be removed from the data.</p>
</td></tr>
<tr><td><code id="ProtectTable1_+3A_dimlist">dimList</code></td>
<td>
<p>See <code><a href="#topic+ProtectTable">ProtectTable</a></code>.</p>
</td></tr>
<tr><td><code id="ProtectTable1_+3A_groupvarind">groupVarInd</code></td>
<td>
<p>Possible manual specification if list defining the hierarchical variable groups</p>
</td></tr>
<tr><td><code id="ProtectTable1_+3A_ind1">ind1</code></td>
<td>
<p>Coding of table 1 as indices referring to elements of groupVarInd</p>
</td></tr>
<tr><td><code id="ProtectTable1_+3A_ind2">ind2</code></td>
<td>
<p>Coding of table 2 as indices referring to elements of groupVarInd</p>
</td></tr>
<tr><td><code id="ProtectTable1_+3A_dimdatareturn">dimDataReturn</code></td>
<td>
<p>When TRUE a data frame containing the dimVarInd variables is retuned</p>
</td></tr>
<tr><td><code id="ProtectTable1_+3A_incprogress">IncProgress</code></td>
<td>
<p>A function to report progress (incProgress in Shiny).</p>
</td></tr>
<tr><td><code id="ProtectTable1_+3A_verbose">verbose</code></td>
<td>
<p>Parameter sent to protectTable, protect_linked_tables or runArgusBatchFile.</p>
</td></tr>
<tr><td><code id="ProtectTable1_+3A_...">...</code></td>
<td>
<p>Further parameters sent to protectTable, protect_linked_tables or createArgusInput.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>One or two tables are identified automatically and subjected to cell suppression methods in package sdcTable.
The tables can alternatively be specified manually by groupVarInd, ind1 and ind2 (see <code><a href="SSBtools.html#topic+FindTableGroup">FindTableGroup</a></code>).
</p>


<h3>Value</h3>

<p>Output is a list of three elements.
</p>
<p><strong>table1</strong> consists of the following elements:
</p>
<table role = "presentation">
<tr><td><code>secondary</code></td>
<td>
<p>Output from <code><a href="sdcTable.html#topic+protectTable">protectTable</a></code> or first element of output from <code><a href="sdcTable.html#topic+protect_linked_tables">protect_linked_tables</a></code> 
or output from <code><a href="sdcTable.html#topic+runArgusBatchFile">runArgusBatchFile</a></code>.</p>
</td></tr>
<tr><td><code>primary</code></td>
<td>
<p>Output from <code><a href="sdcTable.html#topic+primarySuppression">primarySuppression</a></code>.</p>
</td></tr>
<tr><td><code>problem</code></td>
<td>
<p>Output from <code><a href="sdcTable.html#topic+makeProblem">makeProblem</a></code>.</p>
</td></tr>
<tr><td><code>dimList</code></td>
<td>
<p>Generated input to makeProblem.</p>
</td></tr>
<tr><td><code>ind</code></td>
<td>
<p>Indices referring to elements of groupVarInd in the output element common.</p>
</td></tr>
</table>
<p><strong>table2</strong> consists of elements of the same type as table1 in cases of two linked tables. Otherwise  table2 is NULL.
</p>
<p><strong>common</strong> consists of the following elements:
</p>
<table role = "presentation">
<tr><td><code>commonCells</code></td>
<td>
<p>Input to protect_linked_tables.</p>
</td></tr>
<tr><td><code>groupVarInd</code></td>
<td>
<p>List defining the hierarchical variable groups</p>
</td></tr>
<tr><td><code>info</code></td>
<td>
<p>A table summarizing the tables using variable names</p>
</td></tr>
<tr><td><code>nLevels</code></td>
<td>
<p>The number of levels of each variable (only when groupVarInd input is NULL)</p>
</td></tr>
<tr><td><code>dimData</code></td>
<td>
<p>Data frame containing the dimVarInd variables when dimDataReturn=TRUE. Otherwise NULL.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+ProtectTable">ProtectTable</a></code>, 
<code><a href="SSBtools.html#topic+HierarchicalGroups">HierarchicalGroups</a></code>, <code><a href="SSBtools.html#topic+FactorLevCorr">FactorLevCorr</a></code>,
<code><a href="SSBtools.html#topic+FindDimLists">FindDimLists</a></code>, <code><a href="SSBtools.html#topic+FindCommonCells">FindCommonCells</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
z2 &lt;- EasyData("z2")
a &lt;- ProtectTable1(z2, c(1, 3, 4), 5)
head(as.data.frame(sdcTable::getInfo(a[[1]][[1]], type = "finalData"))) # The table (not linked)

z3 &lt;- EasyData("z3")
b &lt;- ProtectTable1(z3, 1:6, 7)
head(as.data.frame(sdcTable::getInfo(b[[1]][[1]], type = "finalData"))) # First table
head(as.data.frame(sdcTable::getInfo(b[[2]][[1]], type = "finalData"))) # Second table

## End(Not run)
</code></pre>

<hr>
<h2 id='PTgui'>Table suppression - Shiny Gui</h2><span id='topic+PTgui'></span><span id='topic+PTguiApp'></span><span id='topic+PTguiNO'></span><span id='topic+PTguiAppNO'></span>

<h3>Description</h3>

<p>Run <code>PTgui</code> from the R console or use <code>PTguiApp</code> to make a server application
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PTgui(
  data = NULL,
  language = "English",
  exeArgus = NULL,
  pathArgus = getwd(),
  maxNchoices = c(1:10, 12, 15, 20),
  ...
)

PTguiApp(
  language = "English",
  exeArgus = NULL,
  pathArgus = "",
  maxNchoices = c(1:10, 12, 15, 20),
  ...
)

PTguiNO(
  data = NULL,
  language = "Norwegian",
  exeArgus = NULL,
  pathArgus = getwd(),
  maxNchoices = c(1:10, 12, 15, 20),
  ...
)

PTguiAppNO(
  language = "Norwegian",
  exeArgus = NULL,
  pathArgus = "",
  maxNchoices = c(1:10, 12, 15, 20),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PTgui_+3A_data">data</code></td>
<td>
<p>NULL or a data.frame</p>
</td></tr>
<tr><td><code id="PTgui_+3A_language">language</code></td>
<td>
<p>Menu language, &quot;English&quot; or &quot;Norwegian&quot;.</p>
</td></tr>
<tr><td><code id="PTgui_+3A_exeargus">exeArgus</code></td>
<td>
<p>Tau-argus executable</p>
</td></tr>
<tr><td><code id="PTgui_+3A_pathargus">pathArgus</code></td>
<td>
<p>Folder for (temporary) tau-argus files</p>
</td></tr>
<tr><td><code id="PTgui_+3A_maxnchoices">maxNchoices</code></td>
<td>
<p>Choices of maxN</p>
</td></tr>
<tr><td><code id="PTgui_+3A_...">...</code></td>
<td>
<p>Further parameters sent to ProtectTable</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Output from <code><a href="#topic+ProtectTable">ProtectTable</a></code>. The output is returned invisibly
(via <code><a href="base.html#topic+invisible">invisible</a></code>) which means that it is not automatically printed to the console.
</p>


<h3>Note</h3>

<p><code>PTguiApp()</code>: New for server
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  ## Not run: 
  
# Start the gui.
PTgui()

# Start Norwegian gui with example data and catch output
out &lt;- PTguiNO(data=EasyData("z1w"))   

# Note: Change to TauArgus.exe-path in your computer
exeArgus &lt;- "C:/TauArgus4.2.0b2/TauArgus.exe"

# Note: Change to an existing folder 
pathArgus &lt;- "C:/Users/nnn/Documents"
    
# Start the gui with possibility to run tau-argus.       
PTgui(exeArgus=exeArgus, pathArgus=pathArgus)     
  
  
## End(Not run)


</code></pre>

<hr>
<h2 id='PTwrap'>Wrapper to ProtectTable() with additional methods (partly experimental)</h2><span id='topic+PTwrap'></span>

<h3>Description</h3>

<p>Additional values of &quot;method&quot; is possible. Each new method (wrapper method) will make a call 
to ProtectTable() using a specific parameter setting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PTwrap(
  ...,
  maxN = 3,
  method = "SimpleSingle",
  exeArgus = "C:/Tau/TauArgus.exe",
  pathArgus = getwd(),
  solverArgus = "FREE",
  methodArgus = "OPT",
  rgArgus = 0
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PTwrap_+3A_...">...</code></td>
<td>
<p>Parameters to ProtectTable</p>
</td></tr>
<tr><td><code id="PTwrap_+3A_maxn">maxN</code></td>
<td>
<p>Parameter to ProtectTable</p>
</td></tr>
<tr><td><code id="PTwrap_+3A_method">method</code></td>
<td>
<p>Parameter to ProtectTable or a wrapper method (see details)</p>
</td></tr>
<tr><td><code id="PTwrap_+3A_exeargus">exeArgus</code></td>
<td>
<p>Parameter to <code><a href="sdcTable.html#topic+runArgusBatchFile">runArgusBatchFile</a></code></p>
</td></tr>
<tr><td><code id="PTwrap_+3A_pathargus">pathArgus</code></td>
<td>
<p>Parameter to <code><a href="sdcTable.html#topic+createArgusInput">createArgusInput</a></code></p>
</td></tr>
<tr><td><code id="PTwrap_+3A_solverargus">solverArgus</code></td>
<td>
<p>Parameter &quot;solver&quot; to <code><a href="sdcTable.html#topic+createArgusInput">createArgusInput</a></code></p>
</td></tr>
<tr><td><code id="PTwrap_+3A_methodargus">methodArgus</code></td>
<td>
<p>Parameter &quot;method&quot; to <code><a href="sdcTable.html#topic+createArgusInput">createArgusInput</a></code></p>
</td></tr>
<tr><td><code id="PTwrap_+3A_rgargus">rgArgus</code></td>
<td>
<p>Parameter &quot;rg&quot; in &quot;primSuppRules&quot; in <code><a href="sdcTable.html#topic+createArgusInput">createArgusInput</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The wrapper methods are:
</p>
<p><strong>Simple:</strong>  &quot;SIMPLEHEURISTIC&quot; with detectSingletons=FALSE
</p>
<p><strong>SimpleSingle:</strong> &quot;SIMPLEHEURISTIC&quot; with detectSingletons=TRUE when protectZeros=FALSE and
&quot;SIMPLEHEURISTIC&quot; with threshold=1 (can be overridden by input) when protectZeros=TRUE 
</p>
<p><strong>SimpleSingleOld:</strong> &quot;SIMPLEHEURISTIC&quot; with detectSingletons=TRUE
</p>
<p><strong>TauArgus:</strong> Tau-argus will be run according to the settings of the other input parameters.
</p>
<p>Using <code>rgArgus=0</code> is equivalent to calling ProtectTable() with <br /> 
<code>method = list(exe=exeArgus, typ="tabular", path=pathArgus,</code> <br />
<code>solver=solverArgus, method=methodArgus)))</code>
</p>
<p>Other values of <code>rgArgus</code> is equivalent to calling ProtectTable() with <br />
<code>method = list(exe=exeArgus, typ="microdata", path=pathArgus,</code><br /> 
<code>solver=solverArgus, method=methodArgus,</code><br />
<code>primSuppRules=list(list(type="freq", n=maxN+1, rg=rgArgus )))))</code>
</p>
<p><strong>TauArgusOPT:</strong> As &quot;TauArgus&quot; with <code>methodArgus="OPT"</code>
</p>
<p><strong>TauArgusMOD:</strong> As &quot;TauArgus&quot; with <code>methodArgus="MOD"</code>
</p>
<p><strong>TauArgusGH:</strong>  As &quot;TauArgus&quot; with <code>methodArgus="GH"</code>
</p>


<h3>Value</h3>

<p>See <code><a href="#topic+ProtectTable">ProtectTable</a></code>
</p>

<hr>
<h2 id='PTxyz'>ProtectTable with output ready for SuppressDec in package RegSDC</h2><span id='topic+PTxyz'></span>

<h3>Description</h3>

<p>Assuming correct suppression, suppressed values become decimal numbers (not whole numbers) instead of missing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PTxyz(data, dimVar, freqVar, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PTxyz_+3A_data">data</code></td>
<td>
<p>data frame</p>
</td></tr>
<tr><td><code id="PTxyz_+3A_dimvar">dimVar</code></td>
<td>
<p>The main dimensional variables and additional aggregating variables (name or number).</p>
</td></tr>
<tr><td><code id="PTxyz_+3A_freqvar">freqVar</code></td>
<td>
<p>Variable(s) holding counts (name or number).</p>
</td></tr>
<tr><td><code id="PTxyz_+3A_...">...</code></td>
<td>
<p>Further parameters sent to <code><a href="#topic+ProtectTable">ProtectTable</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Within this r package this function will be used for testing
</p>


<h3>Value</h3>

<p>List of three matrices ready as input to <code>SuppressDec</code>
</p>
<table role = "presentation">
<tr><td><code>x</code></td>
<td>
<p>Sparse dummy matrix where the dimensions match z and y.</p>
</td></tr>
<tr><td><code>z</code></td>
<td>
<p>Frequencies to be published with suppressed as NA.</p>
</td></tr>
<tr><td><code>y</code></td>
<td>
<p>Inner cell frequencies.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Øyvind Langsrud
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Same examples as in ProtectTable 
a1 &lt;- PTxyz(EasyData("z1"), c("region","hovedint") ,"ant")
a2 &lt;- PTxyz(EasyData("z2"), c(1,3,4),5) 
 
if (require(RegSDC)) { # RegSDCdata and SuppressDec
  # Same data as in RegSDCdata examples (and in paper)
  data7 &lt;- RegSDCdata("sec7data")
  data7 &lt;- data7[!is.na(data7$y), 1:3]
  data7

  # Generate x, y, z similar to xAll, y, zAllSupp in RegSDCdata examples 
  # But different suppressed cells and z ordered differently
  a &lt;- PTxyz(data7, 1:2, 3, maxN = 3, method = "HITAS")
  a

  # Suppressed inner cells as decimal numbers
  yDec &lt;- SuppressDec(a$x, a$z, a$y, rmse = 1)
  yDec

  # All cells as decimal numbers
  cbind(a$z, t(a$x) %*% cbind(a$y, yDec))

  # As ProtectTable example
  z1 &lt;- EasyData("z1")
  a &lt;- PTxyz(z1, c("region", "hovedint"), "ant")

  # Inner cells as decimal numbers. 3 replicates.
  yDec &lt;- SuppressDec(a$x, a$z, a$y, nRep = 3)
  yDec

  # All cells with 3 replicates.
  cbind(a$z, t(a$x) %*% cbind(a$y, yDec))
}

if (require(RegSDC)) {
  # An example involving two linked tables.  
  # It is demonstrated that the SIMPLEHEURISTIC approach to suppression is not safe.  
  # That is, perfect fit (whole numbers) for some suppressed cells.
  a &lt;- PTxyz(EasyData("z3"), 1:5, 7, method = "SIMPLEHEURISTIC", protectZeros= FALSE)
  cbind(a$z, t(a$x) %*% cbind(a$y, SuppressDec(a$x, a$z, rmse=pi/3, nRep=3)))[which(is.na(a$z)), ]
}
## End(Not run)
</code></pre>

<hr>
<h2 id='ReplaceDimList'>ReplaceDimList</h2><span id='topic+ReplaceDimList'></span>

<h3>Description</h3>

<p>Replace list elements of sdcTable coded hierarchies.
Replacement elements can be sdcTable coded or TauArgus coded.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ReplaceDimList(dimList, replaceList, total = "Total")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ReplaceDimList_+3A_dimlist">dimList</code></td>
<td>
<p>Named list of data frames (sdcTable coded)</p>
</td></tr>
<tr><td><code id="ReplaceDimList_+3A_replacelist">replaceList</code></td>
<td>
<p>Named list where elements are data frames (sdcTable coded) or character vectors (TauArgus coded)</p>
</td></tr>
<tr><td><code id="ReplaceDimList_+3A_total">total</code></td>
<td>
<p>String used to name totals when TauArgus coded input</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Updated dimList where some or all elements are replaced
</p>


<h3>Examples</h3>

<pre><code class='language-R'># First generate dimLists
dimListA &lt;- FindDimLists(SSBtoolsData("sprt_emp_withEU")[, c("geo", "eu", "age")])
dimListB &lt;- FindDimLists(SSBtoolsData("sprt_emp_withEU")[, c("geo", "age")])
dimListC &lt;- FindDimLists(SSBtoolsData("sprt_emp_withEU")[, c("geo", "eu")])

# dimListA1 and dimListA are identical
dimListA1 &lt;- ReplaceDimList(dimListB, dimListC)
identical(dimListA, dimListA1)

# replaceList can be TauArgus coded
hcrC &lt;- DimList2Hrc(dimListC)

# dimListA2 and dimListA are identical
dimListA2 &lt;- ReplaceDimList(dimListB, hcrC)
identical(dimListA, dimListA2)

# Also possible when duplicated names
ReplaceDimList(FindDimLists(EasyData("z3")[, -7]), 
               FindDimLists(EasyData("z2")[, -5]))
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
