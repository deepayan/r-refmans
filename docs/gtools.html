<!DOCTYPE html><html><head><title>Help for package gtools</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {gtools}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#gtools'><p>gtools: Various R Programming Tools</p></a></li>
<li><a href='#asc'><p>Convert between characters and ASCII codes</p></a></li>
<li><a href='#ASCIIfy'><p>Convert Characters to ASCII</p></a></li>
<li><a href='#ask'><p>Display a prompt and collect the user's response</p></a></li>
<li><a href='#assert'><p>Defunct Functions in package <code>gtools</code></p></a></li>
<li><a href='#badDend'><p>Dataset That Crashes Base:::Plot.Dendogram with 'Node Stack Overflow'</p></a></li>
<li><a href='#baseOf'><p>Transform an integer to an array of base-n digits</p></a></li>
<li><a href='#binsearch'><p>Binary Search</p></a></li>
<li><a href='#capwords'><p>Capitalize Words for Titles</p></a></li>
<li><a href='#checkRVersion'><p>Check if a newer version of R is available</p></a></li>
<li><a href='#combinations'><p>Enumerate the Combinations or Permutations of the Elements of a Vector</p></a></li>
<li><a href='#defmacro'><p>Define a macro</p></a></li>
<li><a href='#dirichlet'><p>Functions for the Dirichlet Distribution</p></a></li>
<li><a href='#ELISA'><p>Data from an ELISA assay</p></a></li>
<li><a href='#foldchange'><p>Compute fold-change or convert between log-ratio and fold-change.</p></a></li>
<li><a href='#getDependencies'><p>Get package dependencies</p></a></li>
<li><a href='#gtools-deprecated'><p>Deprecated Functions in the gtools package</p></a></li>
<li><a href='#invalid'><p>Test if a value is missing, empty, contains only NA or NULL values, or is a try-error.</p></a></li>
<li><a href='#keywords'><p>List valid keywords for R man pages</p></a></li>
<li><a href='#lastAdd'><p>Non-destructively construct a .Last function to be executed when R exits.</p></a></li>
<li><a href='#loadedPackages'><p>Provide Name, Version, and Path of Loaded Package Namespaces</p></a></li>
<li><a href='#logit'><p>Generalized logit and inverse logit function</p></a></li>
<li><a href='#mixedsort'><p>Order or Sort strings with embedded numbers so that the numbers are in the</p>
correct order</a></li>
<li><a href='#na.replace'><p>Replace Missing Values</p></a></li>
<li><a href='#oddeven'><p>Detect odd/even integers</p></a></li>
<li><a href='#permute'><p>Randomly Permute the Elements of a Vector</p></a></li>
<li><a href='#quantcut'><p>Create a Factor Variable Using the Quantiles of a Continuous Variable</p></a></li>
<li><a href='#roman2int'><p>Convert Roman Numerals to Integers</p></a></li>
<li><a href='#running'><p>Apply a Function Over Adjacent Subsets of a Vector</p></a></li>
<li><a href='#scat'><p>Display debugging text</p></a></li>
<li><a href='#script_file'><p>Determine the directory or full path to the currently executing script</p></a></li>
<li><a href='#setTCPNoDelay'><p>Modify the TCP_NODELAY (&lsquo;de-Nagle&rsquo;) flag for socket objects</p></a></li>
<li><a href='#smartbind'><p>Efficient rbind of data frames, even if the column names don't match</p></a></li>
<li><a href='#split_path'><p>Split a File Path into Components</p></a></li>
<li><a href='#stars.pval'><p>Generate significance stars from p-values</p></a></li>
<li><a href='#stat_mode'><p>Most frequently occurring value</p></a></li>
<li><a href='#unByteCode'><p>Convert a byte-code function to an interpreted-code function</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Various R Programming Tools</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions to assist in R programming, including:
  - assist in developing, updating, and maintaining R and R packages ('ask', 'checkRVersion',
    'getDependencies', 'keywords', 'scat'),
  - calculate the logit and inverse logit transformations ('logit', 'inv.logit'),
  - test if a value is missing, empty or contains only NA and NULL values ('invalid'),
  - manipulate R's .Last function ('addLast'),
  - define macros ('defmacro'),
  - detect odd and even integers ('odd', 'even'),
  - convert strings containing non-ASCII characters (like single quotes) to plain ASCII ('ASCIIfy'),
  - perform a binary search ('binsearch'),
  - sort strings containing both numeric and character components ('mixedsort'),
  - create a factor variable from the quantiles of a continuous variable ('quantcut'),
  - enumerate permutations and combinations ('combinations', 'permutation'),
  - calculate and convert between fold-change and log-ratio ('foldchange',
    'logratio2foldchange', 'foldchange2logratio'),
  - calculate probabilities and generate random numbers from Dirichlet distributions
    ('rdirichlet', 'ddirichlet'),
  - apply a function over adjacent subsets of a vector ('running'),
  - modify the TCP_NODELAY ('de-Nagle') flag for socket objects,
  - efficient 'rbind' of data frames, even if the column names don't match ('smartbind'),
  - generate significance stars from p-values ('stars.pval'),
  - convert characters to/from ASCII codes ('asc', 'chr'),
  - convert character vector to ASCII representation ('ASCIIfy'),
  - apply title capitalization rules to a character vector ('capwords').</td>
</tr>
<tr>
<td>Version:</td>
<td>3.9.5</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>methods, stats, utils</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/r-gregmisc/gtools">https://github.com/r-gregmisc/gtools</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/r-gregmisc/gtools/issues">https://github.com/r-gregmisc/gtools/issues</a></td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Suggests:</td>
<td>car, gplots, knitr, rstudioapi, SGP, taxize</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-19 00:52:21 UTC; bolker</td>
</tr>
<tr>
<td>Author:</td>
<td>Gregory R. Warnes [aut],
  Ben Bolker <a href="https://orcid.org/0000-0002-2127-0443"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Thomas Lumley [aut],
  Arni Magnusson [aut],
  Bill Venables [aut],
  Genei Ryodan [aut],
  Steffen Moeller [aut],
  Ian Wilson [ctb],
  Mark Davis [ctb],
  Nitin Jain [ctb],
  Scott Chamberlain [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ben Bolker &lt;bolker@mcmaster.ca&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-20 15:10:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='gtools'>gtools: Various R Programming Tools</h2><span id='topic+gtools'></span><span id='topic+gtools-package'></span>

<h3>Description</h3>

<p>Functions to assist in R programming, including:
</p>

<dl>
<dt>developing, updating, and maintaining R and R packages</dt><dd><p>'ask', 'checkRVersion', 'getDependencies', 'keywords', 'scat'</p>
</dd>
<dt>calculate the logit and inverse logit transformations</dt><dd><p>'logit', 'inv.logit'</p>
</dd>
<dt>test if a value is missing, empty, contains only NA and NULL values, or is a 'try-error'</dt><dd><p>'invalid'</p>
</dd>
<dt>manipulate R's .Last function</dt><dd><p>'addLast'</p>
</dd>
<dt>define macros</dt><dd><p>'defmacro', 'strmacro'</p>
</dd>
<dt>detect odd and even integers</dt><dd><p>'odd', 'even'</p>
</dd>
<dt>convert strings containing non-ASCII characters (like single quotes) to plain ASCII</dt><dd><p>'ASCIIfy'</p>
</dd>
<dt>perform a binary search</dt><dd><p>'binsearch'</p>
</dd>
<dt>sort strings containing both numeric and character components</dt><dd><p>'mixedsort', 'mixedorder'</p>
</dd>
<dt>create a factor variable from the quantiles of a continuous variable</dt><dd><p>'quantcut'</p>
</dd>
<dt>enumerate permutations and combinations</dt><dd><p>'combinations', 'permutation'</p>
</dd>
<dt>calculate and convert between fold-change and log-ratio</dt><dd><p>'foldchange', 'logratio2foldchange', 'foldchange2logratio'</p>
</dd>
<dt>calculate probabilities and generate random numbers from Dirichlet distributions</dt><dd><p>'rdirichlet', 'ddirichlet'</p>
</dd>
<dt>apply a function over adjacent subsets of a vector</dt><dd><p>'running'</p>
</dd>
<dt>modify the TCP_NODELAY ('de-Nagle') flag for socket objects</dt><dd><p>'tcpNoDelay'</p>
</dd>
<dt>efficient 'rbind' of data frames, even if the column names don't match</dt><dd><p>'smartbind'</p>
</dd>
<dt>generate significance stars from p-values</dt><dd><p>'stars.pval'</p>
</dd>
<dt>convert characters to/from ASCII codes</dt><dd><p>asc, chr</p>
</dd>
<dt>convert character vector to ASCII representation</dt><dd><p>'ASCIIfy'</p>
</dd>
<dt>apply title capitalization rules to a character vector</dt><dd><p>'capwords'</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Ben Bolker <a href="mailto:bolker@mcmaster.ca">bolker@mcmaster.ca</a> (<a href="https://orcid.org/0000-0002-2127-0443">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Gregory R. Warnes
</p>
</li>
<li><p> Thomas Lumley
</p>
</li>
<li><p> Arni Magnusson
</p>
</li>
<li><p> Bill Venables
</p>
</li>
<li><p> Genei Ryodan
</p>
</li>
<li><p> Steffen Moeller
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Ian Wilson [contributor]
</p>
</li>
<li><p> Mark Davis [contributor]
</p>
</li>
<li><p> Nitin Jain [contributor]
</p>
</li>
<li><p> Scott Chamberlain [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/r-gregmisc/gtools">https://github.com/r-gregmisc/gtools</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/r-gregmisc/gtools/issues">https://github.com/r-gregmisc/gtools/issues</a>
</p>
</li></ul>


<hr>
<h2 id='asc'>Convert between characters and ASCII codes</h2><span id='topic+asc'></span><span id='topic+chr'></span>

<h3>Description</h3>

<p>Convert between characters and ASCII codes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>asc(char, simplify = TRUE)

chr(ascii)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="asc_+3A_char">char</code></td>
<td>
<p>vector of character strings</p>
</td></tr>
<tr><td><code id="asc_+3A_simplify">simplify</code></td>
<td>
<p>logical indicating whether to attempt to convert the result
into a vector or matrix object. See <code><a href="base.html#topic+sapply">sapply</a></code> for details.</p>
</td></tr>
<tr><td><code id="asc_+3A_ascii">ascii</code></td>
<td>
<p>vector or list of vectors containing integer ASCII codes</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>asc</code> returns the integer ASCII values for each character in
the elements of <code>char</code>.  If <code>simplify=FALSE</code> the result will be a
list containing one vector per element of <code>char</code>.  If
<code>simplify=TRUE</code>, the code will attempt to convert the result into a
vector or matrix.
</p>
<p><code>asc</code> returns the characters corresponding to the provided ASCII
values.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>asc()</code>: return the characters corresponding to the specified ASCII codes
</p>
</li>
<li> <p><code>chr()</code>: return the ASCII codes for the specified characters.
</p>
</li></ul>


<h3>Author(s)</h3>

<p>Adapted by Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a> from code
posted by Mark Davis on the 'Data Debrief' blog on 2011-03-09 at
<a href="https://datadebrief.blogspot.com/2011/03/ascii-code-table-in-r.html">https://datadebrief.blogspot.com/2011/03/ascii-code-table-in-r.html</a>.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+strtoi">strtoi</a></code>, <code><a href="base.html#topic+charToRaw">charToRaw</a></code>,
<code><a href="base.html#topic+rawToChar">rawToChar</a></code>, <code><a href="base.html#topic+as.raw">as.raw</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## ascii codes for lowercase letters
asc(letters)

## uppercase letters from ascii codes
chr(65:90)

## works on muti-character strings
(tmp &lt;- asc("hello!"))
chr(tmp)

## Use 'simplify=FALSE' to return the result as a list
(tmp &lt;- asc("hello!", simplify = FALSE))
chr(tmp)

## When simplify=FALSE the results can be...
asc(c("a", "e", "i", "o", "u", "y")) # a vector
asc(c("ae", "io", "uy")) # or a matrix

## When simplify=TRUE the results are always a list...
asc(c("a", "e", "i", "o", "u", "y"), simplify = FALSE)
asc(c("ae", "io", "uy"), simplify = FALSE)
</code></pre>

<hr>
<h2 id='ASCIIfy'>Convert Characters to ASCII</h2><span id='topic+ASCIIfy'></span>

<h3>Description</h3>

<p>Convert character vector to ASCII, replacing non-ASCII characters with
single-byte (&lsquo;<span class="samp">&#8288;\x00&#8288;</span>&rsquo;) or two-byte (&lsquo;<span class="samp">&#8288;\u0000&#8288;</span>&rsquo;) codes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ASCIIfy(x, bytes = 2, fallback = "?")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ASCIIfy_+3A_x">x</code></td>
<td>
<p>a character vector, possibly containing non-ASCII characters.</p>
</td></tr>
<tr><td><code id="ASCIIfy_+3A_bytes">bytes</code></td>
<td>
<p>either <code>1</code> or <code>2</code>, for single-byte (&lsquo;<span class="samp">&#8288;\x00&#8288;</span>&rsquo;) or
two-byte (&lsquo;<span class="samp">&#8288;\u0000&#8288;</span>&rsquo;) codes.</p>
</td></tr>
<tr><td><code id="ASCIIfy_+3A_fallback">fallback</code></td>
<td>
<p>an output character to use, when input characters cannot be
converted.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector like <code>x</code>, except non-ASCII characters have been
replaced with &lsquo;<span class="samp">&#8288;\x00&#8288;</span>&rsquo; or &lsquo;<span class="samp">&#8288;\u0000&#8288;</span>&rsquo; codes.
</p>


<h3>Note</h3>

<p>To render single backslashes, use these or similar techniques: </p>
<pre>
write(ASCIIfy(x), "file.txt")
cat(paste(ASCIIfy(x), collapse="\n"), "\n", sep="")</pre>
<p>The resulting strings are plain ASCII and can be used in R functions and
datasets to improve package portability.
</p>


<h3>Author(s)</h3>

<p>Arni Magnusson.
</p>


<h3>See Also</h3>

<p><code><a href="tools.html#topic+showNonASCII">showNonASCII</a></code> identifies non-ASCII characters in a
character vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cities &lt;- c("S\u00e3o Paulo", "Reykjav\u00edk")
print(cities)
ASCIIfy(cities, 1)
ASCIIfy(cities, 2)

athens &lt;- "\u0391\u03b8\u03ae\u03bd\u03b1"
print(athens)
ASCIIfy(athens)

</code></pre>

<hr>
<h2 id='ask'>Display a prompt and collect the user's response</h2><span id='topic+ask'></span>

<h3>Description</h3>

<p>Display a prompt and collect the user's response
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ask(msg = "Press &lt;RETURN&gt; to continue: ", con = stdin())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ask_+3A_msg">msg</code></td>
<td>
<p>Character vector providing the message to be displayed</p>
</td></tr>
<tr><td><code id="ask_+3A_con">con</code></td>
<td>
<p>Character connection to query, defaults to <code>stdin()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The prompt message will be displayed, and then <code>readLines</code> is used to
collect a single input value (possibly empty), which is then returned.
</p>
<p>In most situations using the default <code>con=stdin()</code> should work
properly.  Under RStudio, it is necessary to specify
<code>con=file("stdin")</code> for proper operation.
</p>


<h3>Value</h3>

<p>A character scalar containing the input provided by the user.
</p>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+readLines">readLines</a></code>, <code><a href="base.html#topic+scan">scan</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# use default prompt
ask()

silly &lt;- function() {
  age &lt;- ask("How old aroe you? ")
  age &lt;- as.numeric(age)
  cat("In 10 years you will be", age + 10, "years old!\n")
}
</code></pre>

<hr>
<h2 id='assert'>Defunct Functions in package <code>gtools</code></h2><span id='topic+assert'></span><span id='topic+gtools-defunct'></span><span id='topic+addLast'></span><span id='topic+capture'></span><span id='topic+sprint'></span>

<h3>Description</h3>

<p>The functions or variables listed here are no longer part of package
<code>gtools</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assert(...)

capture(expression, collapse = "\n")

sprint(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="assert_+3A_expression">expression</code>, <code id="assert_+3A_collapse">collapse</code>, <code id="assert_+3A_x">x</code>, <code id="assert_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li> <p><code>assert</code> is a defunct synonym for <code><a href="base.html#topic+stopifnot">stopifnot</a></code>.
</p>
</li>
<li> <p><code>addLast</code> has been replaced by <code>lastAdd</code>, which has the same
purpose but applied using different syntax.
</p>
</li>
<li> <p><code>capture</code> and <code>capture.output</code> have been removed in favor of
<code>capture.output</code> from the <code>utils</code> package.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="base.html#topic+Defunct">Defunct</a></code>,
<code><a href="base.html#topic+stopifnot">stopifnot</a></code>,
<code><a href="#topic+lastAdd">lastAdd</a></code>,
<code><a href="utils.html#topic+capture.output">capture.output</a></code>
</p>

<hr>
<h2 id='badDend'>Dataset That Crashes Base:::Plot.Dendogram with 'Node Stack Overflow'</h2><span id='topic+badDend'></span>

<h3>Description</h3>

<p>Base:::Plot.Dendogram() will generate a 'Node Stack Overflow' when run on a
dendrogram appropriately constructed from this data set.
</p>


<h3>Format</h3>

<p>The format is: num [1:2047, 1:12] 1 2 3 4 5 6 7 8 9 10 ...  -
attr(*, &quot;dimnames&quot;)=List of 2 ..$ : NULL ..$ : chr [1:12] &quot;X&quot; &quot;V1&quot; &quot;V2&quot; &quot;V3&quot;
...
</p>


<h3>Note</h3>

<p>See help page for <code><a href="#topic+unByteCode">unByteCode</a></code> to see how to construct the
'bad' dendrogram from this data and how to work around the issue.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(badDend)
</code></pre>

<hr>
<h2 id='baseOf'>Transform an integer to an array of base-n digits</h2><span id='topic+baseOf'></span>

<h3>Description</h3>

<p>Transform an integer to an array of base-n digits
</p>


<h3>Usage</h3>

<pre><code class='language-R'>baseOf(v, base = 10, len = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="baseOf_+3A_v">v</code></td>
<td>
<p>A single integer value to be transformed.</p>
</td></tr>
<tr><td><code id="baseOf_+3A_base">base</code></td>
<td>
<p>The base to which to transform to.</p>
</td></tr>
<tr><td><code id="baseOf_+3A_len">len</code></td>
<td>
<p>The minimal length of the returned array.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function converts the elements of an integer vector as an array of its
digits.  The base of the numbering scheme may be changed away from 10, which
defines our decimal system, to any other integer value. For base=2, the
number is returned in the binary system. The least significant digit has the
highest index in the array, i.e. it appears on the right.  The highest
exponent is at position 1, i.e. left.
</p>
<p>To write decimal values in another base is very common in computer science.
In particular at the basis 2 the then possible values 0 and 1 are often
interpreted as logical false or true. And at the very interface to
electrical engineering, it is indicated as an absence or presence of
voltage. When several bit values are transported synchronously, then it is
common to give every lane of such a data bus a unique 2^x value and
interpret it as a number in the binary system. To distinguish 256 characters
one once needed 8 bit (&quot;byte&quot;). It is the common unit in which larger
non-printable data is presented.  Because of the many non-printable
characters and the difficulty for most humans to memorize an even longer
alphabet, it is presented as two half bytes (&quot;nibble&quot;) of 4 bit in a
hexadecimal presentation. Example code is shown below.
</p>
<p>For statisticians, it is more likely to use bit representations for hashing.
A bit set to 1 (TRUE) at e.g. position 2, 9 or 17 is interpreted as the
presence of a particular feature combination of a sample.  With baseOf, you
can refer to the bit combination as a number, which is more easily and more
efficiently dealt with than with an array of binary values. The example code
presents a counter of combinations of features which may be interpreted as a
Venn diagram.
</p>


<h3>Author(s)</h3>

<p>Steffen Moeller <a href="mailto:moeller@debian.org">moeller@debian.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# decimal representation
baseOf(123)

# binary representation
baseOf(123, base = 2)

# octal representation
baseOf(123, base = 8)

# hexadecimal representation
baseOf(123, base = 16)

# hexadecimal with more typical letter-notation
c(0:9, LETTERS)[baseOf(123, 16)]

# hexadecimal again, now showing a single string
paste(c(0:9, LETTERS)[baseOf(123, 16)], collapse = "")

# decimal representation but filling leading zeroes
baseOf(123, len = 5)

# and converting that back
sum(2^(4:0) * baseOf(123, len = 5))

# hashing and a tabular venn diagram derived from it
m &lt;- matrix(sample(c(FALSE, TRUE), replace = TRUE, size = 300), ncol = 4)
colnames(m) &lt;- c("strong", "colorful", "nice", "humorous")
names(dimnames(m)) &lt;- c("samples", "features")
head(m)

m.val &lt;- apply(m, 1, function(X) {
  return(sum(2^((ncol(m) - 1):0) * X))
})
m.val.rle &lt;- rle(sort(m.val))
m.counts &lt;- cbind(
  baseOf(m.val.rle$value, base = 2, len = ncol(m)),
  m.val.rle$lengths
)
colnames(m.counts) &lt;- c(colnames(m), "num")
rownames(m.counts) &lt;- apply(m.counts[, 1:ncol(m)], 1, paste, collapse = "")
m.counts[1 == m.counts[, "nice"] &amp; 1 == m.counts[, "humorous"], , drop = FALSE]
m.counts[, "num", drop = TRUE]
</code></pre>

<hr>
<h2 id='binsearch'>Binary Search</h2><span id='topic+binsearch'></span>

<h3>Description</h3>

<p>Search within a specified range to locate an integer parameter which results
in the the specified monotonic function obtaining a given value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>binsearch(
  fun,
  range,
  ...,
  target = 0,
  lower = ceiling(min(range)),
  upper = floor(max(range)),
  maxiter = 100,
  showiter = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="binsearch_+3A_fun">fun</code></td>
<td>
<p>Monotonic function over which the search will be performed.</p>
</td></tr>
<tr><td><code id="binsearch_+3A_range">range</code></td>
<td>
<p>2-element vector giving the range for the search.</p>
</td></tr>
<tr><td><code id="binsearch_+3A_...">...</code></td>
<td>
<p>Additional parameters to the function <code>fun</code>.</p>
</td></tr>
<tr><td><code id="binsearch_+3A_target">target</code></td>
<td>
<p>Target value for <code>fun</code>.  Defaults to 0.</p>
</td></tr>
<tr><td><code id="binsearch_+3A_lower">lower</code></td>
<td>
<p>Lower limit of search range. Defaults to <code>min(range)</code>.</p>
</td></tr>
<tr><td><code id="binsearch_+3A_upper">upper</code></td>
<td>
<p>Upper limit of search range. Defaults to <code>max(range)</code>.</p>
</td></tr>
<tr><td><code id="binsearch_+3A_maxiter">maxiter</code></td>
<td>
<p>Maximum number of search iterations. Defaults to 100.</p>
</td></tr>
<tr><td><code id="binsearch_+3A_showiter">showiter</code></td>
<td>
<p>Boolean flag indicating whether the algorithm state should
be printed at each iteration. Defaults to FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function implements an extension to the standard binary search
algorithm for searching a sorted list.  The algorithm has been extended to
cope with cases where an exact match is not possible, to detect whether that
the function may be monotonic increasing or decreasing and act
appropriately, and to detect when the target value is outside the specified
range.
</p>
<p>The algorithm initializes two variable <code>lo</code> and <code>high</code> to the
extremes values of <code>range</code>.  It then generates a new value
<code>center</code> halfway between <code>lo</code> and <code>hi</code>.  If the value of
<code>fun</code> at <code>center</code> exceeds <code>target</code>, it becomes the new value
for <code>lo</code>, otherwise it becomes the new value for <code>hi</code>.  This
process is iterated until <code>lo</code> and <code>hi</code> are adjacent.  If the
function at one or the other equals the target, this value is returned,
otherwise <code>lo</code>, <code>hi</code>, and the function value at both are returned.
</p>
<p>Note that when the specified target value falls between integers, the
<em>two</em> closest values are returned.  If the specified target falls
outside of the specified <code>range</code>, the closest endpoint of the range
will be returned, and an warning message will be generated.  If the maximum
number if iterations was reached, the endpoints of the current subset of the
range under consideration will be returned.
</p>


<h3>Value</h3>

<p>A list containing: </p>
<table>
<tr><td><code>call</code></td>
<td>
<p>How the function was called.</p>
</td></tr>
<tr><td><code>numiter</code></td>
<td>
<p>The number of iterations performed</p>
</td></tr> <tr><td><code>flag</code></td>
<td>
<p>One of the
strings, &quot;Found&quot;, &quot;Between Elements&quot;, &quot;Maximum number of iterations
reached&quot;, &quot;Reached lower boundary&quot;, or &quot;Reached upper boundary.&quot;</p>
</td></tr>
<tr><td><code>where</code></td>
<td>
<p>One or two values indicating where the search terminated.</p>
</td></tr>
<tr><td><code>value</code></td>
<td>
<p>Value of the function <code>fun</code> at the values of
<code>where</code>.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>This function often returns two values for <code>where</code> and
<code>value</code>.  Be sure to check the <code>flag</code> parameter to see what these
values mean.
</p>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+optim">optim</a></code>, <code><a href="stats.html#topic+optimize">optimize</a></code>, <code><a href="stats.html#topic+uniroot">uniroot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

### Toy examples

# search for x=10
binsearch(function(x) x - 10, range = c(0, 20))

# search for x=10.1
binsearch(function(x) x - 10.1, range = c(0, 20))

### Classical toy example

# binary search for the index of 'M' among the sorted letters
fun &lt;- function(X) {
  ifelse(LETTERS[X] &gt; "M", 1,
    ifelse(LETTERS[X] &lt; "M", -1, 0)
  )
}

binsearch(fun, range = 1:26)
# returns $where=13
LETTERS[13]

### Substantive example, from genetics
## Not run: 
library(genetics)
# Determine the necessary sample size to detect all alleles with
# frequency 0.07 or greater with probability 0.95.
power.fun &lt;- function(N) 1 - gregorius(N = N, freq = 0.07)$missprob

binsearch(power.fun, range = c(0, 100), target = 0.95)

# equivalent to
gregorius(freq = 0.07, missprob = 0.05)

## End(Not run)

</code></pre>

<hr>
<h2 id='capwords'>Capitalize Words for Titles</h2><span id='topic+capwords'></span>

<h3>Description</h3>

<p>This function capitalizes words for use in titles
</p>


<h3>Usage</h3>

<pre><code class='language-R'>capwords(
  s,
  strict = FALSE,
  AP = TRUE,
  onlyfirst = FALSE,
  preserveMixed = FALSE,
  sep = " "
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="capwords_+3A_s">s</code></td>
<td>
<p>character string to be processed</p>
</td></tr>
<tr><td><code id="capwords_+3A_strict">strict</code></td>
<td>
<p>Logical, remove all additional capitalization.</p>
</td></tr>
<tr><td><code id="capwords_+3A_ap">AP</code></td>
<td>
<p>Logical, apply the Associated Press (AP) rules for prepositions
and conjunctions that should not be capitalized in titles.</p>
</td></tr>
<tr><td><code id="capwords_+3A_onlyfirst">onlyfirst</code></td>
<td>
<p>Logical, only capitalize the first word.</p>
</td></tr>
<tr><td><code id="capwords_+3A_preservemixed">preserveMixed</code></td>
<td>
<p>Logical, preserve the capitalization mixed-case words
containing an upper-case letter after a lower-case letter.</p>
</td></tr>
<tr><td><code id="capwords_+3A_sep">sep</code></td>
<td>
<p>Character string, word separator</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function separates the provided character string into separate words
using <code>sep</code> as the word separator.  If <code>firstonly==TRUE</code>, it then
capitalizes the first letter the first word, otherwise (the default), it
capitalizes the first letter of every word.  If <code>AP==TRUE</code>, it then
un-capitalizes words in the Associated Press's (AP) list of prepositions and
conjunctions should not be capitalized in titles.  Next, it capitalizes the
first word. It then re-joins the words using the specified separator.
</p>
<p>If <code>preserveMixed==TRUE</code>, words with an upper-case letter appearing
after a lower-case letter will not be changed (e.g. &quot;iDevice&quot;).
</p>


<h3>Value</h3>

<p>A character scalar containing the capitalized words.
</p>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a> based on code from the
<code><a href="base.html#topic+chartr">chartr</a></code> manual page, and Scott Chamberlain's
<code><a href="taxize.html#topic+taxize_capwords">taxize_capwords</a></code> in the taxize package.
</p>


<h3>References</h3>

<p>Fogarty, Mignon. Capitalizing Titles: &quot;Which words should you
capitalize? Grammar Girl's Quick and Dirty Tips for Better Writing. 9 Jun.
2011. Quick and Dirty Tips Website.&quot; Accessed 22 April 2016
<a href="https://www.quickanddirtytips.com/articles/capitalizing-titles/">https://www.quickanddirtytips.com/articles/capitalizing-titles/</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+chartr">chartr</a></code>, <code><a href="taxize.html#topic+taxize_capwords">taxize_capwords</a></code>,
<code><a href="SGP.html#topic+capwords">capwords</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
capwords("a function to capitalize words in a title")
capwords("a function to capitalize words in a title", AP = FALSE)

capwords("testing the iProduct for defects")
capwords("testing the iProduct for defects", strict = TRUE)
capwords("testing the iProduct for defects", onlyfirst = TRUE)
capwords("testing the iProduct for defects", preserveMixed = TRUE)

capwords("title_using_underscores_as_separators", sep = "_")
</code></pre>

<hr>
<h2 id='checkRVersion'>Check if a newer version of R is available</h2><span id='topic+checkRVersion'></span>

<h3>Description</h3>

<p>Check if a newer version of R is available
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkRVersion(quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkRVersion_+3A_quiet">quiet</code></td>
<td>
<p>Logical indicating whether printed output should be suppressed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function accesses the R web site to discover the latest released
version of R.  It then compares this version to the running version.  If the
running version is the same as the latest version, it prints the message,
&quot;The latest version of R is installed:&quot; followed by the version number, and
returns NULL.  If the running version is older than the current version, it
displays the message, &quot;A newer version of R is now available:&quot; followed by
the corresponding version number, and returns the version number.
</p>
<p>If <code>quiet=TRUE</code>, no printing is performed.
</p>


<h3>Value</h3>

<p>Either the version number of the latest version of R, if the running
version is less than the latest version, or NULL.
</p>


<h3>Note</h3>

<p>This function uses the internet to access the R project web site.
If internet access is unavailable or the R project web site is down, the function will fail.
</p>


<h3>Author(s)</h3>

<p>Gregory R. Warnes
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+R.Version">R.Version</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
try(
   ver &lt;- checkRVersion()
)
print(ver)
</code></pre>

<hr>
<h2 id='combinations'>Enumerate the Combinations or Permutations of the Elements of a Vector</h2><span id='topic+combinations'></span><span id='topic+permutations'></span>

<h3>Description</h3>

<p><code>combinations</code> enumerates the possible combinations of a specified size
from the elements of a vector.  <code>permutations</code> enumerates the possible
permutations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>combinations(n, r, v = 1:n, set = TRUE, repeats.allowed = FALSE)

permutations(n, r, v = 1:n, set = TRUE, repeats.allowed = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="combinations_+3A_n">n</code></td>
<td>
<p>Size of the source vector</p>
</td></tr>
<tr><td><code id="combinations_+3A_r">r</code></td>
<td>
<p>Size of the target vectors</p>
</td></tr>
<tr><td><code id="combinations_+3A_v">v</code></td>
<td>
<p>Source vector. Defaults to <code>1:n</code></p>
</td></tr>
<tr><td><code id="combinations_+3A_set">set</code></td>
<td>
<p>Logical flag indicating whether duplicates should be removed from
the source vector <code>v</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="combinations_+3A_repeats.allowed">repeats.allowed</code></td>
<td>
<p>Logical flag indicating whether the constructed
vectors may include duplicated values.  Defaults to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Caution: The number of combinations and permutations increases rapidly with
<code>n</code> and <code>r</code>!.
</p>
<p>To use values of <code>n</code> above about 45, you will need to increase R's
recursion limit.  See the <code>expression</code> argument to the <code>options</code>
command for details on how to do this.
</p>
<p>Taken from an email by Brian D Ripley &lt;ripley@stats.ox.ac.uk&gt; to r-help
dated Tue, 14 Dec 1999 11:14:04 +0000 (GMT) in response to
Alex Ahgarin <a href="mailto:datamanagement@email.com">datamanagement@email.com</a>.  Original version was
named &quot;subsets&quot; and was Written by Bill Venables.
</p>


<h3>Value</h3>

<p>Returns a matrix where each row contains a vector of length
<code>r</code>.
</p>


<h3>Author(s)</h3>

<p>Original versions by Bill Venables
<a href="mailto:Bill.Venables@cmis.csiro.au">Bill.Venables@cmis.csiro.au</a>.  Extended to handle
<code>repeats.allowed</code> by Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>.
</p>


<h3>References</h3>

<p>Venables, Bill.  &quot;Programmers Note&quot;, R-News, Vol 1/1, Jan. 2001.
<a href="https://cran.r-project.org/doc/Rnews/">https://cran.r-project.org/doc/Rnews/</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+choose">choose</a></code>, <code><a href="base.html#topic+options">options</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
combinations(3,2,letters[1:3])
combinations(3,2,letters[1:3],repeats=TRUE)

permutations(3,2,letters[1:3])
permutations(3,2,letters[1:3],repeats=TRUE)

## Not run: 
# To use large 'n', you need to change the default recusion limit
options(expressions=1e5)
cmat &lt;- combinations(300,2)
dim(cmat) # 44850 by 2 

## End(Not run)

</code></pre>

<hr>
<h2 id='defmacro'>Define a macro</h2><span id='topic+defmacro'></span><span id='topic+strmacro'></span>

<h3>Description</h3>

<p><code>defmacro</code> define a macro that uses R expression replacement
</p>


<h3>Usage</h3>

<pre><code class='language-R'>defmacro(..., expr)

strmacro(..., expr, strexpr)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="defmacro_+3A_...">...</code></td>
<td>
<p>macro argument list</p>
</td></tr>
<tr><td><code id="defmacro_+3A_expr">expr</code></td>
<td>
<p>R expression defining the macro body</p>
</td></tr>
<tr><td><code id="defmacro_+3A_strexpr">strexpr</code></td>
<td>
<p>character string defining the macro body</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>strmacro</code> define a macro that uses string replacement
</p>
<p><code>defmacro</code> and <code>strmacro</code> create a macro from the expression given
in <code>expr</code>, with formal arguments given by the other elements of the
argument list.
</p>
<p>A macro is similar to a function definition except for handling of formal
arguments.  In a function, formal arguments are simply variables that
contains the result of evaluating the expressions provided to the function
call.  In contrast, macros actually modify the macro body by
<em>replacing</em> each formal argument by the expression (<code>defmacro</code>) or
string (<code>strmacro</code>) provided to the macro call.
</p>
<p>For <code>defmacro</code>, the special argument name <code>DOTS</code> will be replaced
by <code>...</code> in the formal argument list of the macro so that <code>...</code> in
the body of the expression can be used to obtain any additional arguments
passed to the macro. For <code>strmacro</code> you can mimic this behavior
providing a <code>DOTS=""</code> argument.  This is illustrated by the last
example below.
</p>
<p>Macros are often useful for creating new functions during code execution.
</p>


<h3>Value</h3>

<p>A macro function.
</p>


<h3>Note</h3>

<p>Note that because [the defmacro code] works on the parsed expression,
not on a text string, defmacro avoids some of the problems of traditional
string substitution macros such as <code>strmacro</code> and the C preprocessor
macros. For example, in </p>
<pre> mul &lt;- defmacro(a, b, expr={a*b}) </pre><p> a
C programmer might expect <code>mul(i, j + k)</code> to expand (incorrectly) to
<code>i*j + k</code>. In fact it expands correctly, to the equivalent of
<code>i*(j + k)</code>.
</p>
<p>For a discussion of the differences between functions and macros, please
Thomas Lumley's R-News article (reference below).
</p>


<h3>Author(s)</h3>

<p>Thomas Lumley wrote <code>defmacro</code>.  Gregory R. Warnes
<a href="mailto:greg@warnes.net">greg@warnes.net</a> enhanced it and created <code>strmacro</code>.
</p>


<h3>References</h3>

<p>The original <code>defmacro</code> code was directly taken from:
</p>
<p>Lumley T. &quot;Programmer's Niche: Macros in R&quot;, R News, 2001, Vol 1, No. 3, pp
11&ndash;13, <a href="https://cran.r-project.org/doc/Rnews/">https://cran.r-project.org/doc/Rnews/</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+function">function</a></code> <code><a href="base.html#topic+substitute">substitute</a></code>,
<code><a href="base.html#topic+eval">eval</a></code>, <code><a href="base.html#topic+parse">parse</a></code>,
<code><a href="base.html#topic+source">source</a></code>, <code><a href="base.html#topic+parse">parse</a></code>,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
####
# macro for replacing a specified missing value indicator with NA
# within a dataframe
###
setNA &lt;- defmacro(df, var, values,
  expr = {
    df$var[df$var %in% values] &lt;- NA
  }
)

# create example data using 999 as a missing value indicator
d &lt;- data.frame(
  Grp = c("Trt", "Ctl", "Ctl", "Trt", "Ctl", "Ctl", "Trt", "Ctl", "Trt", "Ctl"),
  V1 = c(1, 2, 3, 4, 5, 6, 999, 8, 9, 10),
  V2 = c(1, 1, 1, 1, 1, 2, 999, 2, 999, 999),
  stringsAsFactors = TRUE
)
d

# Try it out
setNA(d, V1, 999)
setNA(d, V2, 999)
d


###
# Expression macro
###
plot.d &lt;- defmacro(df, var, DOTS,
  col = "red", title = "", expr =
    plot(df$var ~ df$Grp, type = "b", col = col, main = title, ...)
)

plot.d(d, V1)
plot.d(d, V1, col = "blue")
plot.d(d, V1, lwd = 4) # use optional 'DOTS' argument

###
# String macro (note the quoted text in the calls below)
#
# This style of macro can be useful when you are reading
# function arguments from a text file
###
plot.s &lt;- strmacro(DF, VAR,
  COL = "'red'", TITLE = "''", DOTS = "", expr =
    plot(DF$VAR ~ DF$Grp, type = "b", col = COL, main = TITLE, DOTS)
)

plot.s("d", "V1")
plot.s(DF = "d", VAR = "V1", COL = '"blue"')
plot.s("d", "V1", DOTS = "lwd=4") # use optional 'DOTS' argument



#######
# Create a macro that defines new functions
######
plot.sf &lt;- defmacro(
  type = "b", col = "black",
  title = deparse(substitute(x)), DOTS, expr =
    function(x, y) plot(x, y, type = type, col = col, main = title, ...)
)

plot.red &lt;- plot.sf(col = "red", title = "Red is more Fun!")
plot.blue &lt;- plot.sf(col = "blue", title = "Blue is Best!", lty = 2)

plot.red(1:100, rnorm(100))
plot.blue(1:100, rnorm(100))
</code></pre>

<hr>
<h2 id='dirichlet'>Functions for the Dirichlet Distribution</h2><span id='topic+dirichlet'></span><span id='topic+rdirichlet'></span><span id='topic+ddirichlet'></span>

<h3>Description</h3>

<p>Functions to compute the density of or generate random deviates from the
Dirichlet distribution
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ddirichlet(x, alpha)

rdirichlet(n, alpha)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dirichlet_+3A_x">x</code></td>
<td>
<p>A vector containing a single random deviate or matrix containing one
random deviate per row.</p>
</td></tr>
<tr><td><code id="dirichlet_+3A_alpha">alpha</code></td>
<td>
<p>Vector or (for <code>ddirichlet</code>) matrix containing shape
parameters.</p>
</td></tr>
<tr><td><code id="dirichlet_+3A_n">n</code></td>
<td>
<p>Number of random vectors to generate.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Dirichlet distribution is the multidimensional generalization of the
beta distribution.  It is the canonical Bayesian distribution for the
parameter estimates of a multinomial distribution.
</p>


<h3>Value</h3>

<p><code>ddirichlet</code> returns a vector containing the Dirichlet density
for the corresponding rows of <code>x</code>.
</p>
<p><code>rdirichlet</code> returns a matrix with <code>n</code> rows, each containing a
single Dirichlet random deviate.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>ddirichlet()</code>: Dirichlet distribution function.
</p>
</li>
<li> <p><code>rdirichlet()</code>: Generate dirichlet random deviates.
</p>
</li></ul>


<h3>Author(s)</h3>

<p>Code original posted by Ben Bolker to R-News on Fri Dec 15 2000. See
<a href="https://stat.ethz.ch/pipermail/r-help/2000-December/009561.html">https://stat.ethz.ch/pipermail/r-help/2000-December/009561.html</a>.  Ben
attributed the code to Ian Wilson <a href="mailto:i.wilson@maths.abdn.ac.uk">i.wilson@maths.abdn.ac.uk</a>.
Subsequent modifications by Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>.
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+dbeta">dbeta</a></code>, <code><a href="stats.html#topic+rbeta">rbeta</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

x &lt;- rdirichlet(20, c(1, 1, 1))

ddirichlet(x, c(1, 1, 1))
</code></pre>

<hr>
<h2 id='ELISA'>Data from an ELISA assay</h2><span id='topic+ELISA'></span>

<h3>Description</h3>

<p>Observed signals and (for some observations) nominal concentrations for
samples that were aliquoted to multiple assay plates, which were read
multiple times on multiple days.
</p>


<h3>Format</h3>

<p>a data frame with the following columns:
</p>

<ul>
<li><p> PlateDay factor. Specifies one of four physically distinct 96 well plates
</p>
</li>
<li><p> Read factor. The signal was read 3 times for each plate.
</p>
</li>
<li><p> Description character. Indicates contents of sample.
</p>
</li>
<li><p> Concentration numeric. Nominal concentration of standards (NA for all other samples).
</p>
</li>
<li><p> Signal numeric. Assay signal. Specifically, optical density (a colorimetric assay).
</p>
</li></ul>



<h3>Source</h3>

<p>Anonymized data.
</p>

<hr>
<h2 id='foldchange'>Compute fold-change or convert between log-ratio and fold-change.</h2><span id='topic+foldchange'></span><span id='topic+logratio2foldchange'></span><span id='topic+foldchange2logratio'></span>

<h3>Description</h3>

<p><code>foldchange</code> computes the fold change for two sets of values.
<code>logratio2foldchange</code> converts values from log-ratios to fold changes.
<code>foldchange2logratio</code> does the reverse.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>foldchange(num, denom)

logratio2foldchange(logratio, base = 2)

foldchange2logratio(foldchange, base = 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="foldchange_+3A_num">num</code>, <code id="foldchange_+3A_denom">denom</code></td>
<td>
<p>vector/matrix of numeric values</p>
</td></tr>
<tr><td><code id="foldchange_+3A_logratio">logratio</code></td>
<td>
<p>vector/matrix of log-ratio values</p>
</td></tr>
<tr><td><code id="foldchange_+3A_base">base</code></td>
<td>
<p>Exponential base for the log-ratio.</p>
</td></tr>
<tr><td><code id="foldchange_+3A_foldchange">foldchange</code></td>
<td>
<p>vector/matrix of fold-change values</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Fold changes are commonly used in the biological sciences as a mechanism for
comparing the relative size of two measurements.  They are computed as:
<code class="reqn">\frac{num}{denom}</code> if <code class="reqn">num&gt;denom</code>, and as
<code class="reqn">\frac{-denom}{num}</code> otherwise.
</p>
<p>Fold-changes have the advantage of ease of interpretation and symmetry about
<code class="reqn">num=denom</code>, but suffer from a discontinuity between -1 and 1, which can
cause significant problems when performing data analysis.  Consequently
statisticians prefer to use log-ratios.
</p>


<h3>Value</h3>

<p>A vector or matrix of the same dimensions as the input containing
the converted values.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>foldchange()</code>: Compute fold-change.
</p>
</li>
<li> <p><code>logratio2foldchange()</code>: Compute foldchange from log-ratio values.
</p>
</li>
<li> <p><code>foldchange2logratio()</code>: Compute log-ratio from fold-change values.
</p>
</li></ul>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

a &lt;- 1:21
b &lt;- 21:1

f &lt;- foldchange(a, b)

cbind(a, b, f)
</code></pre>

<hr>
<h2 id='getDependencies'>Get package dependencies</h2><span id='topic+getDependencies'></span>

<h3>Description</h3>

<p>Get package dependencies
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getDependencies(
  pkgs,
  dependencies = c("Depends", "Imports", "LinkingTo"),
  installed = TRUE,
  available = TRUE,
  base = FALSE,
  recommended = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getDependencies_+3A_pkgs">pkgs</code></td>
<td>
<p>character vector of package names</p>
</td></tr>
<tr><td><code id="getDependencies_+3A_dependencies">dependencies</code></td>
<td>
<p>character vector of dependency types to include.
Choices are &quot;Depends&quot;, &quot;Imports&quot;, &quot;LinkingTo&quot;, &quot;Suggests&quot;, and &quot;Enhances&quot;.
Defaults to <code>c("Depends", "Imports", "LinkingTo")</code>.</p>
</td></tr>
<tr><td><code id="getDependencies_+3A_installed">installed</code></td>
<td>
<p>Logical indicating whether to pull dependency information
from installed packages. Defaults to TRUE.</p>
</td></tr>
<tr><td><code id="getDependencies_+3A_available">available</code></td>
<td>
<p>Logical indicating whether to pull dependency information
from available packages.  Defaults to TRUE.</p>
</td></tr>
<tr><td><code id="getDependencies_+3A_base">base</code></td>
<td>
<p>Logical indicating whether to include dependencies on base
packages that are included in the R installation. Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="getDependencies_+3A_recommended">recommended</code></td>
<td>
<p>Logical indicating whether to include dependencies on
recommended packages that are included in the R installation. Defaults to
FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function recursively constructs the list of dependencies for the
packages given by <code>pkgs</code>.  By default, the dependency information is
extracted from both installed and available packages.  As a consequence, it
works both for local and CRAN packages.
</p>


<h3>Value</h3>

<p>A character vector of package names.
</p>


<h3>Note</h3>

<p>If <code>available=TRUE</code> R will attempt to access the currently
selected CRAN repository, prompting for one if necessary.
</p>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a> based on the non exported
<code>utils:::getDependencies</code> and <code>utils:::.clean_up_dependencies2</code>.
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+installed.packages">installed.packages</a></code>, <code><a href="utils.html#topic+available.packages">available.packages</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
## A locally installed package
#' getDependencies("MASS", installed = TRUE, available = FALSE)

## A package on CRAN
getDependencies("gregmisc", installed = FALSE, available = TRUE)


## Show base and recommended dependencies
getDependencies("MASS", available = FALSE, base = TRUE, recommended = TRUE)

## Download the set of packages necessary to support a local package
deps &lt;- getDependencies("MyLocalPackage", available = FALSE)
download.packages(deps, destdir = "./R_Packages")

## End(Not run)

</code></pre>

<hr>
<h2 id='gtools-deprecated'>Deprecated Functions in the gtools package</h2><span id='topic+gtools-deprecated'></span>

<h3>Description</h3>

<p>These functions are provided for compatibility with older versions of
gtools, and may be defunct as soon as the next release.
</p>


<h3>Details</h3>

<p>gtools currently contains no deprecated functions.
</p>
<p><code>help("oldName-deprecated")</code> (note the quotes). 
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+Deprecated">Deprecated</a></code>
</p>

<hr>
<h2 id='invalid'>Test if a value is missing, empty, contains only NA or NULL values, or is a try-error.</h2><span id='topic+invalid'></span>

<h3>Description</h3>

<p>Test if a value is missing, empty, contains only NA or NULL values, or is a try-error.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>invalid(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="invalid_+3A_x">x</code></td>
<td>
<p>value to be tested</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical value.
</p>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+missing">missing</a></code>, <code><a href="base.html#topic+is.na">is.na</a></code>,
<code><a href="base.html#topic+is.null">is.null</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

invalid(NA)
invalid()
invalid(c(NA, NA, NULL, NA))

invalid(list(a = 1, b = NULL))

x &lt;- try(log("A"))
invalid(x)

# example use in a function
myplot &lt;- function(x, y) {
  if (invalid(y)) {
    y &lt;- x
    x &lt;- 1:length(y)
  }
  plot(x, y)
}
myplot(1:10)
myplot(1:10, NA)
</code></pre>

<hr>
<h2 id='keywords'>List valid keywords for R man pages</h2><span id='topic+keywords'></span>

<h3>Description</h3>

<p>List valid keywords for R man pages
</p>


<h3>Usage</h3>

<pre><code class='language-R'>keywords(topic)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="keywords_+3A_topic">topic</code></td>
<td>
<p>object or man page topic</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>topic</code> is provided, return a list of the keywords associated with
<code>topic</code>.  Otherwise, display the list of valid R keywords from the R
doc/KEYWORDS file.
</p>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+help">help</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Show all valid R keywords
## Not run: 
keywords()

## Show keywords associated with the 'merge' function
keywords(merge)
keywords("merge")

## End(Not run)
</code></pre>

<hr>
<h2 id='lastAdd'>Non-destructively construct a .Last function to be executed when R exits.</h2><span id='topic+lastAdd'></span>

<h3>Description</h3>

<p>Non-destructively construct a <code>.Last</code> function to be executed when R
exits.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lastAdd(fun)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lastAdd_+3A_fun">fun</code></td>
<td>
<p>Function to be called.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>lastAdd</code> constructs a new function which can be used to replace the
existing definition of <code>.Last</code>, which will be executed when R terminates
normally.
</p>
<p>If a <code>.Last</code> function already exists in the global environment, the
original definition is stored in a private environment, and the new function
is defined to call the function <code>fun</code> and then to call the previous
(stored) definition of <code>.Last</code>.
</p>
<p>If no <code>.Last</code> function exists in the global environment, <code>lastAdd</code>
simply returns the function <code>fun</code>.
</p>


<h3>Value</h3>

<p>A new function to be used for <code>.Last</code>.
</p>


<h3>Note</h3>

<p>This function replaces the (now defunct) <code>addLast</code> function.
</p>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+.Last">.Last</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

## Print a couple of cute messages when R exits.
helloWorld &lt;- function() cat("\nHello World!\n")
byeWorld &lt;- function() cat("\nGoodbye World!\n")

.Last &lt;- lastAdd(byeWorld)
.Last &lt;- lastAdd(helloWorld)

## Not run: 
q("no")

## Should yield:
##
##   Save workspace image? [y/n/c]: n
##
##   Hello World!
##
##   Goodbye World!
##
##   Process R finished at Tue Nov 22 10:28:55 2005

## End(Not run)

</code></pre>

<hr>
<h2 id='loadedPackages'>Provide Name, Version, and Path of Loaded Package Namespaces</h2><span id='topic+loadedPackages'></span>

<h3>Description</h3>

<p>Provide name, version, and path of loaded package namespaces
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadedPackages(silent = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loadedPackages_+3A_silent">silent</code></td>
<td>
<p>Logical indicating whether the results should be printed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns a data frame containing one row per loaded package
namespace, with columns: </p>
<table>
<tr><td><code>Package</code></td>
<td>
<p>Package name</p>
</td></tr> <tr><td><code>Version</code></td>
<td>
<p>Version
string</p>
</td></tr> <tr><td><code>Path</code></td>
<td>
<p>Path to package files</p>
</td></tr> <tr><td><code>SearchPath</code></td>
<td>
<p>Either the
index of the package namespace in the current search path, or '-' if the
package namespace is not in the search path. '1' corresponds to the top of
the search path (the first namespace searched for values).  </p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+loadedNamespaces">loadedNamespaces</a></code>,
<code><a href="utils.html#topic+packageVersion">packageVersion</a></code>, <code><a href="base.html#topic+search">search</a></code>,
<code><a href="base.html#topic+find.package">find.package</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
loadedPackages()
</code></pre>

<hr>
<h2 id='logit'>Generalized logit and inverse logit function</h2><span id='topic+logit'></span><span id='topic+inv.logit'></span>

<h3>Description</h3>

<p>Compute generalized logit and generalized inverse logit functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>logit(x, min = 0, max = 1)

inv.logit(x, min = 0, max = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="logit_+3A_x">x</code></td>
<td>
<p>value(s) to be transformed</p>
</td></tr>
<tr><td><code id="logit_+3A_min">min</code></td>
<td>
<p>Lower end of logit interval</p>
</td></tr>
<tr><td><code id="logit_+3A_max">max</code></td>
<td>
<p>Upper end of logit interval</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The generalized logit function takes values on [min, max] and transforms
them to span [-Inf,Inf] it is defined as:
</p>
<p style="text-align: center;"><code class="reqn">y = log(\frac{p}{(1-p)})</code>
</p>

<p>where
</p>
<p style="text-align: center;"><code class="reqn">p=\frac{(x-min)}{(max-min)}</code>
</p>

<p>The generalized inverse logit function provides the inverse transformation:
</p>
<p style="text-align: center;"><code class="reqn">x = p' (max-min) + min</code>
</p>

<p>where
</p>
<p style="text-align: center;"><code class="reqn">p'=\frac{exp(y)}{(1+exp(y))}</code>
</p>



<h3>Value</h3>

<p>Transformed value(s).
</p>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>
</p>


<h3>See Also</h3>

<p><code><a href="car.html#topic+logit">logit</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

x &lt;- seq(0, 10, by = 0.25)
xt &lt;- logit(x, min = 0, max = 10)
cbind(x, xt)

y &lt;- inv.logit(xt, min = 0, max = 10)
cbind(x, xt, y)
</code></pre>

<hr>
<h2 id='mixedsort'>Order or Sort strings with embedded numbers so that the numbers are in the
correct order</h2><span id='topic+mixedsort'></span><span id='topic+mixedorder'></span>

<h3>Description</h3>

<p>These functions sort or order character strings containing embedded numbers
so that the numbers are numerically sorted rather than sorted by character
value.  I.e. &quot;Aspirin 50mg&quot; will come before &quot;Aspirin 100mg&quot;.  In addition,
case of character strings is ignored so that &quot;a&quot;, will come before &quot;B&quot; and
&quot;C&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mixedsort(
  x,
  decreasing = FALSE,
  na.last = TRUE,
  blank.last = FALSE,
  numeric.type = c("decimal", "roman"),
  roman.case = c("upper", "lower", "both"),
  scientific = TRUE
)

mixedorder(
  x,
  decreasing = FALSE,
  na.last = TRUE,
  blank.last = FALSE,
  numeric.type = c("decimal", "roman"),
  roman.case = c("upper", "lower", "both"),
  scientific = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mixedsort_+3A_x">x</code></td>
<td>
<p>Vector to be sorted.</p>
</td></tr>
<tr><td><code id="mixedsort_+3A_decreasing">decreasing</code></td>
<td>
<p>logical.  Should the sort be increasing or decreasing?
Note that <code>descending=TRUE</code> reverses the meanings of <code>na.last</code> and
<code>blanks.last</code>.</p>
</td></tr>
<tr><td><code id="mixedsort_+3A_na.last">na.last</code></td>
<td>
<p>for controlling the treatment of <code>NA</code> values.  If
<code>TRUE</code>, missing values in the data are put last; if <code>FALSE</code>, they
are put first; if <code>NA</code>, they are removed.</p>
</td></tr>
<tr><td><code id="mixedsort_+3A_blank.last">blank.last</code></td>
<td>
<p>for controlling the treatment of blank values.  If
<code>TRUE</code>, blank values in the data are put last; if <code>FALSE</code>, they
are put first; if <code>NA</code>, they are removed.</p>
</td></tr>
<tr><td><code id="mixedsort_+3A_numeric.type">numeric.type</code></td>
<td>
<p>either &quot;decimal&quot; (default) or &quot;roman&quot;.  Are numeric
values represented as decimal numbers (<code>numeric.type="decimal"</code>) or as
Roman numerals (<code>numeric.type="roman"</code>)?</p>
</td></tr>
<tr><td><code id="mixedsort_+3A_roman.case">roman.case</code></td>
<td>
<p>one of &quot;upper&quot;, &quot;lower&quot;, or &quot;both&quot;.  Are roman numerals
represented using only capital letters ('IX') or lower-case letters ('ix')
or both?</p>
</td></tr>
<tr><td><code id="mixedsort_+3A_scientific">scientific</code></td>
<td>
<p>logical. Should exponential notation be allowed for numeric values.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>I often have character vectors (e.g. factor labels), such as compound and
dose, that contain both text and numeric data.  This function is useful for
sorting these character vectors into a logical order.
</p>
<p>It does so by splitting each character vector into a sequence of character
and numeric sections, and then sorting along these sections, with numbers
being sorted by numeric value (e.g. &quot;50&quot; comes before &quot;100&quot;), followed by
characters strings sorted by character value (e.g. &quot;A&quot; comes before &quot;B&quot;)
<em>ignoring case</em> (e.g. 'A' has the same sort order as 'a').
</p>
<p>By default, sort order is ascending, empty strings are sorted to the front,
and <code>NA</code> values to the end.  Setting <code>descending=TRUE</code> changes the
sort order to descending and reverses the meanings of <code>na.last</code> and
<code>blank.last</code>.
</p>
<p>Parsing looks for decimal numbers unless <code>numeric.type="roman"</code>, in
which parsing looks for roman numerals, with character case specified by
<code>roman.case</code>.
</p>


<h3>Value</h3>

<p><code>mixedorder</code> returns a vector giving the sort order of the
input elements. <code>mixedsort</code> returns the sorted vector.
</p>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+sort">sort</a></code>, <code><a href="base.html#topic+order">order</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## compound &amp; dose labels
Treatment &lt;- c(
  "Control", "Aspirin 10mg/day", "Aspirin 50mg/day",
  "Aspirin 100mg/day", "Acetomycin 100mg/day",
  "Acetomycin 1000mg/day"
)

## ordinary sort puts the dosages in the wrong order
sort(Treatment)

## but mixedsort does the 'right' thing
mixedsort(Treatment)

## Here is a more complex example
x &lt;- rev(c(
  "AA 0.50 ml", "AA 1.5 ml", "AA 500 ml", "AA 1500 ml",
  "EXP 1", "AA 1e3 ml", "A A A", "1 2 3 A", "NA", NA, "1e2",
  "", "-", "1A", "1 A", "100", "100A", "Inf"
))

mixedorder(x)

mixedsort(x) # Notice that plain numbers, including 'Inf' show up
# before strings, NAs at the end, and blanks at the
# beginning .


mixedsort(x, na.last = TRUE) # default
mixedsort(x, na.last = FALSE) # push NAs to the front


mixedsort(x, blank.last = FALSE) # default
mixedsort(x, blank.last = TRUE) # push blanks to the end

mixedsort(x, decreasing = FALSE) # default
mixedsort(x, decreasing = TRUE) # reverse sort order

## Roman numerals
chapters &lt;- c(
  "V. Non Sequiturs", "II. More Nonsense",
  "I. Nonsense", "IV. Nonesensical Citations",
  "III. Utter Nonsense"
)
mixedsort(chapters, numeric.type = "roman")

## Lower-case Roman numerals
vals &lt;- c(
  "xix", "xii", "mcv", "iii", "iv", "dcclxxii", "cdxcii",
  "dcxcviii", "dcvi", "cci"
)
(ordered &lt;- mixedsort(vals, numeric.type = "roman", roman.case = "lower"))
roman2int(ordered)

## Control scientific notation for number matching:
vals &lt;- c("3E1", "2E3", "4e0")

mixedsort(vals) # With scientfic notation
mixedsort(vals, scientific = FALSE) # Without scientfic notation
</code></pre>

<hr>
<h2 id='na.replace'>Replace Missing Values</h2><span id='topic+na.replace'></span>

<h3>Description</h3>

<p>Replace missing values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>na.replace(x, replace, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="na.replace_+3A_x">x</code></td>
<td>
<p>vector possibly containing missing (<code>NA</code>) values</p>
</td></tr>
<tr><td><code id="na.replace_+3A_replace">replace</code></td>
<td>
<p>either a scalar replacement value, or a function returning a
scalar value</p>
</td></tr>
<tr><td><code id="na.replace_+3A_...">...</code></td>
<td>
<p>Optional arguments to be passed to <code>replace</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a convenience function that is the same as x[is.na(x)] &lt;- replace
</p>


<h3>Value</h3>

<p>Vector with missing values (<code>NA</code>) replaced by the value of
<code>replace</code>.
</p>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+is.na">is.na</a></code>, <code><a href="stats.html#topic+na.omit">na.omit</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
x &lt;- c(1, 2, 3, NA, 6, 7, 8, NA, NA)

# Replace with a specified value
na.replace(x, "999")

# Replace with the calculated median
na.replace(x, median, na.rm = TRUE)
</code></pre>

<hr>
<h2 id='oddeven'>Detect odd/even integers</h2><span id='topic+oddeven'></span><span id='topic+odd'></span><span id='topic+even'></span>

<h3>Description</h3>

<p>detect odd/even integers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>odd(x)

even(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="oddeven_+3A_x">x</code></td>
<td>
<p>vector of integers</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of TRUE/FALSE values.
</p>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+round">round</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

odd(4)
even(4)

odd(1:10)
even(1:10)
</code></pre>

<hr>
<h2 id='permute'>Randomly Permute the Elements of a Vector</h2><span id='topic+permute'></span>

<h3>Description</h3>

<p>Randomly Permute the elements of a vector
</p>


<h3>Usage</h3>

<pre><code class='language-R'>permute(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="permute_+3A_x">x</code></td>
<td>
<p>Vector of items to be permuted</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is simply a wrapper function for <code><a href="base.html#topic+sample">sample</a></code>.
</p>


<h3>Value</h3>

<p>Vector with the original items reordered.
</p>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+sample">sample</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
x &lt;- 1:10
permute(x)
</code></pre>

<hr>
<h2 id='quantcut'>Create a Factor Variable Using the Quantiles of a Continuous Variable</h2><span id='topic+quantcut'></span>

<h3>Description</h3>

<p>Create a factor variable using the quantiles of a continuous variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>quantcut(x, q = 4, na.rm = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="quantcut_+3A_x">x</code></td>
<td>
<p>Continuous variable.</p>
</td></tr>
<tr><td><code id="quantcut_+3A_q">q</code></td>
<td>
<p>Either a integer number of equally spaced quantile groups to
create, or a vector of quantiles used for creating groups. Defaults to
<code>q=4</code> which is equivalent to <code>q=seq(0, 1, by=0.25)</code>.  See
<code><a href="stats.html#topic+quantile">quantile</a></code> for details.</p>
</td></tr>
<tr><td><code id="quantcut_+3A_na.rm">na.rm</code></td>
<td>
<p>Boolean indicating whether missing values should be removed
when computing quantiles.  Defaults to TRUE.</p>
</td></tr>
<tr><td><code id="quantcut_+3A_...">...</code></td>
<td>
<p>Optional arguments passed to <code><a href="base.html#topic+cut">cut</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function uses <code><a href="stats.html#topic+quantile">quantile</a></code> to obtain the specified quantiles
of <code>x</code>, then calls <code><a href="base.html#topic+cut">cut</a></code> to create a factor variable using
the intervals specified by these quantiles.
</p>
<p>It properly handles cases where more than one quantile obtains the same
value, as in the second example below.  Note that in this case, there will
be fewer generated factor levels than the specified number of quantile
intervals.
</p>


<h3>Value</h3>

<p>Factor variable with one level for each quantile interval.
</p>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+cut">cut</a></code>, <code><a href="stats.html#topic+quantile">quantile</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

## create example data
# testonly{
set.seed(1234)
# }
x &lt;- rnorm(1000)

## cut into quartiles
quartiles &lt;- quantcut(x)
table(quartiles)

## cut into deciles
deciles.1 &lt;- quantcut(x, 10)
table(deciles.1)
# or equivalently
deciles.2 &lt;- quantcut(x, seq(0, 1, by = 0.1))

# testonly{
stopifnot(identical(deciles.1, deciles.2))
# }

## show handling of 'tied' quantiles.
x &lt;- round(x) # discretize to create ties
stem(x) # display the ties
deciles &lt;- quantcut(x, 10)

table(deciles) # note that there are only 5 groups (not 10)
# due to duplicates
</code></pre>

<hr>
<h2 id='roman2int'>Convert Roman Numerals to Integers</h2><span id='topic+roman2int'></span>

<h3>Description</h3>

<p>Convert roman numerals to integers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>roman2int(roman)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="roman2int_+3A_roman">roman</code></td>
<td>
<p>character vector containing roman numerals</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function will convert roman numerals to integers without the upper bound
imposed by R (3899), ignoring case.
</p>


<h3>Value</h3>

<p>A integer vector with the same length as <code>roman</code>.  Character
strings which are not valid roman numerals will be converted to <code>NA</code>.
</p>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+as.roman">as.roman</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
roman2int(c("I", "V", "X", "C", "L", "D", "M"))

# works regardless of case
roman2int("MMXVI")
roman2int("mmxvi")

# works beyond R's limit of 3899
val.3899 &lt;- "MMMDCCCXCIX"
val.3900 &lt;- "MMMCM"
val.4000 &lt;- "MMMM"
as.numeric(as.roman(val.3899))
as.numeric(as.roman(val.3900))
as.numeric(as.roman(val.4000))

roman2int(val.3899)
roman2int(val.3900)
roman2int(val.4000)
</code></pre>

<hr>
<h2 id='running'>Apply a Function Over Adjacent Subsets of a Vector</h2><span id='topic+running'></span>

<h3>Description</h3>

<p>Applies a function over subsets of the vector(s) formed by taking a fixed
number of previous points.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>running(
  X,
  Y = NULL,
  fun = mean,
  width = min(length(X), 20),
  allow.fewer = FALSE,
  pad = FALSE,
  align = c("right", "center", "left"),
  simplify = TRUE,
  by,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="running_+3A_x">X</code></td>
<td>
<p>data vector</p>
</td></tr>
<tr><td><code id="running_+3A_y">Y</code></td>
<td>
<p>data vector (optional)</p>
</td></tr>
<tr><td><code id="running_+3A_fun">fun</code></td>
<td>
<p>Function to apply. Default is <code>mean</code></p>
</td></tr>
<tr><td><code id="running_+3A_width">width</code></td>
<td>
<p>Integer giving the number of vector elements to include in the
subsets.  Defaults to the lesser of the length of the data and 20 elements.</p>
</td></tr>
<tr><td><code id="running_+3A_allow.fewer">allow.fewer</code></td>
<td>
<p>Boolean indicating whether the function should be
computed for subsets with fewer than <code>width</code> points</p>
</td></tr>
<tr><td><code id="running_+3A_pad">pad</code></td>
<td>
<p>Boolean indicating whether the returned results should be
'padded' with NAs corresponding to sets with less than <code>width</code>
elements.  This only applies when when <code>allow.fewer</code> is FALSE.</p>
</td></tr>
<tr><td><code id="running_+3A_align">align</code></td>
<td>
<p>One of &quot;right&quot;, &quot;center&quot;, or &quot;left&quot;.  This controls the
relative location of &lsquo;short&rsquo; subsets with less then <code>width</code> elements:
&quot;right&quot; allows short subsets only at the beginning of the sequence so that
all of the complete subsets are at the end of the sequence (i.e. 'right
aligned'), &quot;left&quot; allows short subsets only at the end of the data so that
the complete subsets are &lsquo;left aligned&rsquo;, and &quot;center&quot; allows short subsets
at both ends of the data so that complete subsets are &lsquo;centered&rsquo;.</p>
</td></tr>
<tr><td><code id="running_+3A_simplify">simplify</code></td>
<td>
<p>Boolean.  If FALSE the returned object will be a list
containing one element per evaluation.  If TRUE, the returned object will be
coerced into a vector (if the computation returns a scalar) or a matrix (if
the computation returns multiple values).  Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="running_+3A_by">by</code></td>
<td>
<p>Integer separation between groups. If <code>by=width</code> will give
non-overlapping windows. Default is missing, in which case groups will start
at each value in the X/Y range.</p>
</td></tr>
<tr><td><code id="running_+3A_...">...</code></td>
<td>
<p>parameters to be passed to <code>fun</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>running</code> applies the specified function to a sequential windows on
<code>X</code> and (optionally) <code>Y</code>.  If <code>Y</code> is specified the function
must be bivariate.
</p>


<h3>Value</h3>

<p>List (if <code>simplify==TRUE</code>), vector, or matrix containing the
results of applying the function <code>fun</code> to the subsets of <code>X</code>
(<code>running</code>) or <code>X</code> and <code>Y</code>.
</p>
<p>Note that this function will create a vector or matrix even for objects
which are not simplified by <code>sapply</code>.
</p>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>, with contributions by
Nitin Jain <a href="mailto:nitin.jain@pfizer.com">nitin.jain@pfizer.com</a>.
</p>


<h3>See Also</h3>

<p><code><a href="gplots.html#topic+wapply">wapply</a></code> to apply a function over an x-y window
centered at each x point, <code><a href="base.html#topic+sapply">sapply</a></code>,
<code><a href="base.html#topic+lapply">lapply</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# show effect of pad
running(1:20, width = 5)
running(1:20, width = 5, pad = TRUE)

# show effect of align
running(1:20, width = 5, align = "left", pad = TRUE)
running(1:20, width = 5, align = "center", pad = TRUE)
running(1:20, width = 5, align = "right", pad = TRUE)

# show effect of simplify
running(1:20, width = 5, fun = function(x) x) # matrix
running(1:20, width = 5, fun = function(x) x, simplify = FALSE) # list

# show effect of by
running(1:20, width = 5) # normal
running(1:20, width = 5, by = 5) # non-overlapping
running(1:20, width = 5, by = 2) # starting every 2nd


# Use 'pad' to ensure correct length of vector, also show the effect
# of allow.fewer.
par(mfrow = c(2, 1))
plot(1:20, running(1:20, width = 5, allow.fewer = FALSE, pad = TRUE), type = "b")
plot(1:20, running(1:20, width = 5, allow.fewer = TRUE, pad = TRUE), type = "b")
par(mfrow = c(1, 1))

# plot running mean and central 2 standard deviation range
# estimated by *last* 40 observations
dat &lt;- rnorm(500, sd = 1 + (1:500) / 500)
plot(dat)
sdfun &lt;- function(x, sign = 1) mean(x) + sign * sqrt(var(x))
lines(running(dat, width = 51, pad = TRUE, fun = mean), col = "blue")
lines(running(dat, width = 51, pad = TRUE, fun = sdfun, sign = -1), col = "red")
lines(running(dat, width = 51, pad = TRUE, fun = sdfun, sign = 1), col = "red")


# plot running correlation estimated by last 40 observations (red)
# against the true local correlation (blue)
sd.Y &lt;- seq(0, 1, length = 500)

X &lt;- rnorm(500, sd = 1)
Y &lt;- rnorm(500, sd = sd.Y)

plot(running(X, X + Y, width = 20, fun = cor, pad = TRUE), col = "red", type = "s")

r &lt;- 1 / sqrt(1 + sd.Y^2) # true cor of (X,X+Y)
lines(r, type = "l", col = "blue")
</code></pre>

<hr>
<h2 id='scat'>Display debugging text</h2><span id='topic+scat'></span>

<h3>Description</h3>

<p>If <code>getOption('DEBUG')==TRUE</code>, write text to STDOUT and flush so that
the text is immediately displayed. Otherwise, do nothing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scat(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="scat_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>cat</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>NULL (invisibly)
</p>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+cat">cat</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
options(DEBUG = NULL) # makee sure DEBUG isn't set
scat("Not displayed")

options(DEBUG = TRUE)
scat("This will be displayed immediately (even in R BATCH output \n")
scat("files), provided options()$DEBUG is TRUE.")
</code></pre>

<hr>
<h2 id='script_file'>Determine the directory or full path to the currently executing script</h2><span id='topic+script_file'></span><span id='topic+script_path'></span>

<h3>Description</h3>

<p>Determine the directory or full path to the currently executing script
</p>


<h3>Usage</h3>

<pre><code class='language-R'>script_file(fail = c("stop", "warning", "quiet"))

script_path(fail = c("stop", "warning", "quiet"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="script_file_+3A_fail">fail</code></td>
<td>
<p>character, one of &quot;stop&quot;, &quot;warning&quot;, &quot;quiet&quot;. specifying what
should be done when the script path cannot be determined:
&quot;stop&quot; causes an error to be generated,
&quot;warn&quot; generates a warning message and returns NA,
&quot;quiet&quot; silently returns NA.
</p>
<p>These function should work with <code>Rscript</code>, <code>source()</code>,
<code>Rmarkdown</code> <code>RStudio</code>'s &quot;Run selection&quot;, and the <code>RStudio</code>
Console.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character scalar containing the full path to the currently
executing script file (<code>script_file</code>) or its directory
(<code>script_path</code>).  If unable to determine the script path, it generates
a warning and returns <code>""</code> (empty string).
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>script_file()</code>: Determine the full path of the currently executing
script
</p>
</li>
<li> <p><code>script_path()</code>: Determine the directory of the currently executing script
</p>
</li></ul>


<h3>Author(s)</h3>

<p>Greg Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a> based on on a Stack Overflow post by
jerry-t (<a href="https://stackoverflow.com/users/2292993/jerry-t">https://stackoverflow.com/users/2292993/jerry-t</a>) at
<a href="https://stackoverflow.com/a/36777602/2744062">https://stackoverflow.com/a/36777602/2744062</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
getwd()
commandArgs(trailingOnly = FALSE)

script_file("warning")
script_path("warning")
</code></pre>

<hr>
<h2 id='setTCPNoDelay'>Modify the TCP_NODELAY (&lsquo;de-Nagle&rsquo;) flag for socket objects</h2><span id='topic+setTCPNoDelay'></span>

<h3>Description</h3>

<p>Modify the TCP_NODELAY (&lsquo;de-Nagle&rsquo;) flag for socket objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setTCPNoDelay(socket, value = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setTCPNoDelay_+3A_socket">socket</code></td>
<td>
<p>A socket connection object</p>
</td></tr>
<tr><td><code id="setTCPNoDelay_+3A_value">value</code></td>
<td>
<p>Logical indicating whether to set (<code>TRUE</code>) or unset
(<code>FALSE</code>) the flag</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default, TCP connections wait a small fixed interval before actually
sending data, in order to permit small packets to be combined.  This
algorithm is named after its inventor, John Nagle, and is often referred to
as 'Nagling'.
</p>
<p>While this reduces network resource utilization in these situations, it
imposes a delay on all outgoing message data, which can cause problems in
client/server situations.
</p>
<p>This function allows this feature to be disabled (de-Nagling,
<code>value=TRUE</code>) or enabled (Nagling, <code>value=FALSE</code>) for the
specified socket.
</p>


<h3>Value</h3>

<p>The character string &quot;SUCCESS&quot; will be returned invisible if the
operation was successful.  On failure, an error will be generated.
</p>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>
</p>


<h3>References</h3>

<p>&quot;Nagle's algorithm&quot; <a href="https://en.wikipedia.org/wiki/Nagle's_algorithm">https://en.wikipedia.org/wiki/Nagle's_algorithm</a>,
</p>
<p>Nagle, John. &quot;Congestion Control in IP/TCP Internetworks&quot;, IETF Request for
Comments 896, January 1984. <a href="https://www.ietf.org/rfc/rfc0896.txt?number=896">https://www.ietf.org/rfc/rfc0896.txt?number=896</a>
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+make.socket">make.socket</a></code>, <code><a href="base.html#topic+socketConnection">socketConnection</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
host &lt;- "www.r-project.org"
socket &lt;- make.socket(host, 80)
print(socket)
setTCPNoDelay(socket, TRUE)

write.socket(socket, "GET /\n\n")
write.socket(socket, "A")
write.socket(socket, "B\n")
while ((str &lt;- read.socket(socket)) &gt; "") {
  cat(str)
}
close.socket(socket)

## End(Not run)

</code></pre>

<hr>
<h2 id='smartbind'>Efficient rbind of data frames, even if the column names don't match</h2><span id='topic+smartbind'></span>

<h3>Description</h3>

<p>Efficient rbind of data frames, even if the column names don't match
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smartbind(..., list, fill = NA, sep = ":", verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="smartbind_+3A_...">...</code></td>
<td>
<p>Data frames to combine</p>
</td></tr>
<tr><td><code id="smartbind_+3A_list">list</code></td>
<td>
<p>List containing data frames to combine</p>
</td></tr>
<tr><td><code id="smartbind_+3A_fill">fill</code></td>
<td>
<p>Value to use when 'filling' missing columns.  Defaults to
<code>NA</code>.</p>
</td></tr>
<tr><td><code id="smartbind_+3A_sep">sep</code></td>
<td>
<p>Character string used to separate column names when pasting them
together.</p>
</td></tr>
<tr><td><code id="smartbind_+3A_verbose">verbose</code></td>
<td>
<p>Logical flag indicating whether to display processing
messages. Defaults to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The returned data frame will contain: </p>
<table>
<tr><td><code>columns</code></td>
<td>
<p>all columns
present in any provided data frame</p>
</td></tr> <tr><td><code>rows</code></td>
<td>
<p>a set of rows from each
provided data frame, with values in columns not present in the given data
frame filled with missing (<code>NA</code>) values.</p>
</td></tr></table>
<p> The data type of columns will
be preserved, as long as all data frames with a given column name agree on
the data type of that column.  If the data frames disagree, the column will
be converted into a character strings.  The user will need to coerce such
character columns into an appropriate type.
</p>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+rbind">rbind</a></code>, <code><a href="base.html#topic+cbind">cbind</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

df1 &lt;- data.frame(A = 1:10, B = LETTERS[1:10], C = rnorm(10))
df2 &lt;- data.frame(A = 11:20, D = rnorm(10), E = letters[1:10])

# rbind would fail
## Not run: 
rbind(df1, df2)
# Error in match.names(clabs, names(xi)) : names do not match previous
# names:
# 	D, E

## End(Not run)
# but smartbind combines them, appropriately creating NA entries
smartbind(df1, df2)

# specify fill=0 to put 0 into the missing row entries
smartbind(df1, df2, fill = 0)


</code></pre>

<hr>
<h2 id='split_path'>Split a File Path into Components</h2><span id='topic+split_path'></span>

<h3>Description</h3>

<p>This function converts a character scalar containing a
<em>valid</em> file path into a character vector of path components
(e.g. directories).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>split_path(x, depth_first = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="split_path_+3A_x">x</code></td>
<td>
<p>character scalar.  Path to be processed.</p>
</td></tr>
<tr><td><code id="split_path_+3A_depth_first">depth_first</code></td>
<td>
<p>logical.  Should path be returned depth first?  Defaults
to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character vector of path components, depth first.
</p>

<hr>
<h2 id='stars.pval'>Generate significance stars from p-values</h2><span id='topic+stars.pval'></span>

<h3>Description</h3>

<p>Generate significance stars (e.g. '***', '**', '*', '.') from p-values using
R's standard definitions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stars.pval(p.value)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stars.pval_+3A_p.value">p.value</code></td>
<td>
<p>numeric vector of p-values</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Mapping from p-value ranges to symbols: </p>
 <dl>
<dt>0 - 0.001</dt><dd><p>'***'</p>
</dd>
<dt>0.001 - 0.01</dt><dd><p>'**'</p>
</dd> <dt>0.01 - 0.05</dt><dd><p>'*'</p>
</dd> <dt>0.05 - 0.1</dt><dd><p>'.'</p>
</dd>
<dt>0.1 - 1.0</dt><dd><p>&rdquo; (No symbol)</p>
</dd> </dl>



<h3>Value</h3>

<p>A character vector containing the same number of elements as
<code>p-value</code>, with an attribute &quot;legend&quot; providing the conversion pattern.
</p>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+symnum">symnum</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
p.val &lt;- c(0.0004, 0.0015, 0.013, 0.044, 0.067, 0.24)
stars.pval(p.val)
</code></pre>

<hr>
<h2 id='stat_mode'>Most frequently occurring value</h2><span id='topic+stat_mode'></span>

<h3>Description</h3>

<p>Most frequently occurring value
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stat_mode(x, na.rm = TRUE, ties = c("all", "first", "last", "missing"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stat_mode_+3A_x">x</code></td>
<td>
<p>vector of values</p>
</td></tr>
<tr><td><code id="stat_mode_+3A_na.rm">na.rm</code></td>
<td>
<p>logical.  Should <code>NA</code> values be removed before processing?</p>
</td></tr>
<tr><td><code id="stat_mode_+3A_ties">ties</code></td>
<td>
<p>character. Which value(s) should be returned in the case of ties?</p>
</td></tr>
<tr><td><code id="stat_mode_+3A_...">...</code></td>
<td>
<p>optional additional parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of the same class as <code>x</code>
</p>


<h3>Author(s)</h3>

<p>Genei Ryodan and Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Character vector
chr_vec &lt;- c("a", "d", "d", "h", "h", NA, NA) # Multiple modes
stat_mode(x = chr_vec)
stat_mode(x = chr_vec, na.rm = FALSE)
stat_mode(x = chr_vec, na.rm = FALSE, ties = "first")
stat_mode(x = chr_vec, na.rm = FALSE, ties = "last")

# - # Numeric vector
# See that it keeps the original vector type
num_vec &lt;- c(2, 3, 3, 4, 4, NA, NA)
stat_mode(x = num_vec)
stat_mode(x = num_vec, na.rm = FALSE)
stat_mode(x = num_vec, na.rm = FALSE, ties = "first")
stat_mode(x = num_vec, na.rm = FALSE, ties = "last")

# The default option is ties="all" but it is very easy for the user to control
# the ties without changing this parameter.
# Select always just one mode, being that the first mode
stat_mode(x = num_vec)[1]

# Select the first and the second stat_mode
stat_mode(x = num_vec)[c(1, 2)]

# Logical Vectors
stat_mode(x = c(TRUE, TRUE))
stat_mode(x = c(FALSE, FALSE, TRUE, TRUE))

# - # Single element cases
stat_mode(x = c(NA_real_))
stat_mode(x = 2)
stat_mode(x = NA)
stat_mode(x = c("a"))

# Not allowing multiple stat_mode, returning NA if that happens
stat_mode(x = c(1, 1, 2, 2), multiple_modes = FALSE) # multiple stat_mode
stat_mode(x = c(1, 1), multiple_modes = FALSE) # single mode

# Empty vector cases
# The ties of any empty vector will be itself (an empty vector of the same type)
stat_mode(x = double())
stat_mode(x = complex())
stat_mode(x = vector("numeric"))
stat_mode(x = vector("character"))
</code></pre>

<hr>
<h2 id='unByteCode'>Convert a byte-code function to an interpreted-code function</h2><span id='topic+unByteCode'></span><span id='topic+unByteCodeAssign'></span><span id='topic+assignEdgewise'></span>

<h3>Description</h3>

<p>The purpose of these functions is to allow a byte coded function to be
converted back into a fully interpreted function as a <em>temporary</em> work
around for issues in byte-code interpretation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unByteCode(fun)

assignEdgewise(name, env, value)

unByteCodeAssign(fun)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="unByteCode_+3A_fun">fun</code></td>
<td>
<p>function to be modified</p>
</td></tr>
<tr><td><code id="unByteCode_+3A_name">name</code></td>
<td>
<p>object name</p>
</td></tr>
<tr><td><code id="unByteCode_+3A_env">env</code></td>
<td>
<p>namespace</p>
</td></tr>
<tr><td><code id="unByteCode_+3A_value">value</code></td>
<td>
<p>new function body</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>unByteCode</code> returns a copy of the function that is directly
interpreted from text rather than from byte-code.
</p>
<p><code>assignEdgewise</code> makes an assignment into a locked environment.
</p>
<p><code>unByteCodeAssign</code> changes the specified function <em>in its source
environment</em> to be directly interpreted from text rather than from
byte-code.
</p>
<p>The latter two functions no longer work out of the box because <code>assignEdgewise</code>
(which <code>unByteCodeAssign</code> uses) makes use of an unsafe <code>unlockBinding</code>
call, but running <code>assignEdgewise()</code> will
</p>


<h3>Value</h3>

<p>All three functions return a copy of the modified function or
assigned value.
</p>


<h3>Note</h3>

<p>These functions are not intended as a permanent solution to issues
with byte-code compilation or interpretation.  Any such issues should be
promptly reported to the R maintainers via the R Bug Tracking System at
<a href="https://bugs.r-project.org">https://bugs.r-project.org</a> and via the R-devel mailing list
<a href="https://stat.ethz.ch/mailman/listinfo/r-devel">https://stat.ethz.ch/mailman/listinfo/r-devel</a>.
</p>


<h3>Author(s)</h3>

<p>Gregory R. Warnes <a href="mailto:greg@warnes.net">greg@warnes.net</a>
</p>


<h3>References</h3>

<p>These functions were inspired as a work-around to R bug
<a href="https://bugs.r-project.org/show_bug.cgi?id=15215">https://bugs.r-project.org/show_bug.cgi?id=15215</a>.
</p>


<h3>See Also</h3>

<p><code><a href="compiler.html#topic+disassemble">disassemble</a></code>, <code><a href="base.html#topic+assign">assign</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(badDend)
dist2 &lt;- function(x) as.dist(1 - cor(t(x), method = "pearson"))
hclust1 &lt;- function(x) hclust(x, method = "single")

distance &lt;- dist2(badDend)
cluster &lt;- hclust1(distance)

dend &lt;- as.dendrogram(cluster)
## Not run: 
## In R 2.3.0 and earlier crashes with a node stack overflow error
plot(dend)
## Error in xy.coords(x, y, recycle = TRUE) : node stack overflow

## End(Not run)

## convert stats:::plotNode from byte-code to interpreted-code
## (no longer available unless assignEdgewise is defined by the user)
## unByteCodeAssign(stats:::plotNode)
## illustrated in https://stackoverflow.com/questions/16559250/error-in-heatmap-2-gplots

# increase recursion limit
options("expressions" = 5e4)

# now the function does not crash
plot(dend)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
