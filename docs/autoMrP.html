<!DOCTYPE html><html lang="en"><head><title>Help for package autoMrP</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {autoMrP}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#absentee_census'><p>Quasi census data.</p></a></li>
<li><a href='#absentee_voting'><p>A sample of the absentee voting item from the CCES 2008</p></a></li>
<li><a href='#auto_MrP'><p>Improve MrP through ensemble learning.</p></a></li>
<li><a href='#best_subset_classifier'><p>Best subset classifier</p></a></li>
<li><a href='#binary_cross_entropy'><p>Estimates the inverse binary cross-entropy, i.e. 0 is the best score and 1</p>
the worst.</a></li>
<li><a href='#boot_auto_mrp'><p>Bootstrappinng wrapper for auto_mrp</p></a></li>
<li><a href='#census'><p>Quasi census data.</p></a></li>
<li><a href='#cv_folding'><p>Generates folds for cross-validation</p></a></li>
<li><a href='#deep_mrp_classifier'><p>Deep MrP classifier</p></a></li>
<li><a href='#ebma'><p>Bayesian Ensemble Model Averaging EBMA</p></a></li>
<li><a href='#ebma_folding'><p>Generates data fold to be used for EBMA tuning</p></a></li>
<li><a href='#ebma_mc_draws'><p>EBMA multicore tuning - parallelises over draws.</p></a></li>
<li><a href='#ebma_mc_tol'><p>EBMA multicore tuning - parallelises over tolerance values.</p></a></li>
<li><a href='#error_checks'><p>Catches user input errors</p></a></li>
<li><a href='#f1_score'><p>Estimates the inverse f1 score, i.e. 0 is the best score and 1 the worst.</p></a></li>
<li><a href='#gb_classifier'><p>GB classifier</p></a></li>
<li><a href='#gb_classifier_update'><p>GB classifier update</p></a></li>
<li><a href='#lasso_classifier'><p>Lasso classifier</p></a></li>
<li><a href='#log_spaced'><p>Sequence that is equally spaced on the log scale</p></a></li>
<li><a href='#loss_function'><p>Estimates loss value.</p></a></li>
<li><a href='#loss_score_ranking'><p>Ranks tuning parameters according to loss functions</p></a></li>
<li><a href='#mean_absolute_error'><p>Estimates the mean absolute prediction error.</p></a></li>
<li><a href='#mean_squared_error'><p>Estimates the mean squared prediction error.</p></a></li>
<li><a href='#mean_squared_false_error'><p>Estimates the mean squared false error.</p></a></li>
<li><a href='#model_list'><p>A list of models for the best subset selection.</p></a></li>
<li><a href='#model_list_pca'><p>A list of models for the best subset selection with PCA.</p></a></li>
<li><a href='#multicore'><p>Register cores for multicore computing</p></a></li>
<li><a href='#output_table'><p>A table for the summary  function</p></a></li>
<li><a href='#plot.autoMrP'><p>A plot method for autoMrP objects. Plots unit-level preference estiamtes.</p></a></li>
<li><a href='#post_stratification'><p>Apply post-stratification to classifiers.</p></a></li>
<li><a href='#predict_glmmLasso'><p>Predicts on newdata from glmmLasso objects</p></a></li>
<li><a href='#quiet'><p>Suppress cat in external package</p></a></li>
<li><a href='#run_best_subset'><p>Apply best subset classifier to MrP.</p></a></li>
<li><a href='#run_best_subset_mc'><p>Best subset multicore tuning.</p></a></li>
<li><a href='#run_classifiers'><p>Optimal individual classifiers</p></a></li>
<li><a href='#run_gb'><p>Apply gradient boosting classifier to MrP.</p></a></li>
<li><a href='#run_gb_mc'><p>GB multicore tuning.</p></a></li>
<li><a href='#run_lasso'><p>Apply lasso classifier to MrP.</p></a></li>
<li><a href='#run_lasso_mc_lambda'><p>Lasso multicore tuning.</p></a></li>
<li><a href='#run_pca'><p>Apply PCA classifier to MrP.</p></a></li>
<li><a href='#run_svm'><p>Apply support vector machine classifier to MrP.</p></a></li>
<li><a href='#run_svm_mc'><p>SVM multicore tuning.</p></a></li>
<li><a href='#summary.autoMrP'><p>A summary method for autoMrP objects.</p></a></li>
<li><a href='#survey_item'><p>A sample of a survey item from the CCES 2008</p></a></li>
<li><a href='#svm_classifier'><p>SVM classifier</p></a></li>
<li><a href='#taxes_census'><p>Quasi census data.</p></a></li>
<li><a href='#taxes_survey'><p>Sample on raising taxes from the 2008 National Annenberg Election Studies.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Improving MrP with Ensemble Learning</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.6</td>
</tr>
<tr>
<td>Description:</td>
<td>A tool that improves the prediction performance of multilevel
    regression with post-stratification (MrP) by combining a number of machine
    learning methods. For information on the method, please refer to Broniecki, 
	Wüest, Leemann (2020) &rdquo;Improving Multilevel Regression with 
	Post-Stratification Through Machine Learning (autoMrP)&rdquo; in the 
	'Journal of Politics'. Final pre-print version: 
	<a href="https://lucasleemann.files.wordpress.com/2020/07/automrp-r2pa.pdf">https://lucasleemann.files.wordpress.com/2020/07/automrp-r2pa.pdf</a>.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/retowuest/autoMrP">https://github.com/retowuest/autoMrP</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/retowuest/autoMrP/issues">https://github.com/retowuest/autoMrP/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6)</td>
</tr>
<tr>
<td>Imports:</td>
<td>rlang (&ge; 0.4.5), dplyr (&ge; 1.0.2), lme4 (&ge; 1.1), gbm (&ge;
2.1.5), e1071 (&ge; 1.7-3), tibble (&ge; 3.0.1), glmmLasso (&ge;
1.5.1), EBMAforecast (&ge; 1.0.0), foreach (&ge; 1.5.0), doParallel
(&ge; 1.0.15), doRNG (&ge; 1.8.2), ggplot2 (&ge; 3.3.2), knitr (&ge;
1.29), tidyr (&ge; 1.1.2), purrr (&ge; 0.3.4), forcats (&ge; 0.5.1),
vglmer (&ge; 1.0.3), stringr (&ge; 1.5.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>R.rsp</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>R.rsp</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-30 17:46:16 UTC; Philipp</td>
</tr>
<tr>
<td>Author:</td>
<td>Reto Wüest <a href="https://orcid.org/0000-0002-7502-6489"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Lucas Leemann <a href="https://orcid.org/0000-0001-5201-869X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Florian Schaffner <a href="https://orcid.org/0000-0003-3352-6191"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Philipp Broniecki <a href="https://orcid.org/0000-0001-9214-4404"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Hadley Wickham [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Philipp Broniecki &lt;philippbroniecki@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-30 18:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='absentee_census'>Quasi census data.</h2><span id='topic+absentee_census'></span>

<h3>Description</h3>

<p>The census file is generated from the full 2008 Cooperative Congressional Election Studies
item cc419_1 by dissaggregating the 64 ideal type combinations of the individual level variables
L1x1, L2x2 and L1x3. A row is an ideal type in a given state.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(absentee_census)
</code></pre>


<h3>Format</h3>

<p>A data frame with 2934 rows and 13 variables:
</p>

<dl>
<dt>state</dt><dd><p>U.S. state</p>
</dd>
<dt>L2.unit</dt><dd><p>U.S. state id</p>
</dd>
<dt>region</dt><dd><p>U.S. region (four categories: 1 = Northeast; 2 = Midwest; 3 = South; 4 = West)</p>
</dd>
<dt>L1x1</dt><dd><p>Age group (four categories)</p>
</dd>
<dt>L1x2</dt><dd><p>Education level (four categories)</p>
</dd>
<dt>L1x3</dt><dd><p>Gender-race combination (six categories)</p>
</dd>
<dt>proportion</dt><dd><p>State-level proportion of respondents of that ideal type in the population</p>
</dd>
<dt>L2.x1</dt><dd><p>State-level share of votes for the Republican candidate in the previous presidential election</p>
</dd>
<dt>L2.x2</dt><dd><p>State-level percentage of Evangelical Protestant or Mormon respondents</p>
</dd>
<dt>L2.x3</dt><dd><p>State-level percentage of the population living in urban areas</p>
</dd>
<dt>L2.x4</dt><dd><p>State-level unemployment rate</p>
</dd>
<dt>L2.x5</dt><dd><p>State-level share of Hispanics</p>
</dd>
<dt>L2.x6</dt><dd><p>State-level share of Whites</p>
</dd>
</dl>



<h3>Source</h3>

<p>The data set (excluding L2.x3, L2.x4, L2.x5, L2.x6) is taken from the
article: Buttice, Matthew K, and Benjamin Highton. 2013. &quot;How does
multilevel regression and poststrat-stratification perform with
conventional national surveys?&quot; Political Analysis 21(4): 449-467. L2.x3,
L2.x3, L2.x4, L2.x5 and L2.x6 are available at
<a href="https://www.census.gov">https://www.census.gov</a>.
</p>

<hr>
<h2 id='absentee_voting'>A sample of the absentee voting item from the CCES 2008</h2><span id='topic+absentee_voting'></span>

<h3>Description</h3>

<p>The Cooperative Congressional Election Stuides (CCES) item (cc419_1) asked:
&quot;States have tried many new ways to run elections in recent years. Do you
support or oppose any of the following ways of voting or conducting elections
in your state? Election Reform - Allow absentee voting over the Internet?&quot;
The original 2008 CCES item contains 26,934 respondents. This sample mimics a
typical national survey. It contains at least 5 respondents from each state
but is otherwise a random sample.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(absentee_voting)
</code></pre>


<h3>Format</h3>

<p>A data frame with 1500 rows and 13 variables:
</p>

<dl>
<dt>YES</dt><dd><p>1 if individual supports use of troops; 0 otherwise</p>
</dd>
<dt>L1x1</dt><dd><p>Age group (four categories: 1 = 18-29; 2 = 30-44; 3 = 45-64; 4 = 65+)</p>
</dd>
<dt>L1x2</dt><dd><p>Education level (four categories: 1 = &lt; high school; 2 = high school graduate; 3 = some college; 4 = college graduate)</p>
</dd>
<dt>L1x3</dt><dd><p>Gender-race combination (six categories: 1 = white male; 2 = black male; 3 = hispanic male; 4 = white female; 5 = black female; 6 = hispanic female)</p>
</dd>
<dt>state</dt><dd><p>U.S. state</p>
</dd>
<dt>L2.unit</dt><dd><p>U.S. state id</p>
</dd>
<dt>region</dt><dd><p>U.S. region (four categories: 1 = Northeast; 2 = Midwest; 3 = South; 4 = West)</p>
</dd>
<dt>L2.x1</dt><dd><p>State-level share of votes for the Republican candidate in the previous presidential election</p>
</dd>
<dt>L2.x2</dt><dd><p>State-level percentage of Evangelical Protestant or Mormon respondents</p>
</dd>
<dt>L2.x3</dt><dd><p>State-level percentage of the population living in urban areas</p>
</dd>
<dt>L2.x4</dt><dd><p>State-level unemployment rate</p>
</dd>
<dt>L2.x5</dt><dd><p>State-level share of Hispanics</p>
</dd>
<dt>L2.x6</dt><dd><p>State-level share of Whites</p>
</dd>
</dl>



<h3>Source</h3>

<p>The data set (excluding L2.x3, L2.x4, L2.x5, L2.x6) is taken from the
article: Buttice, Matthew K, and Benjamin Highton. 2013. &quot;How does
multilevel regression and poststrat-stratification perform with
conventional national surveys?&quot; Political Analysis 21(4): 449-467. It is a
random sample with at least 5 respondents per state. L2.x3, L2.x3, L2.x4,
L2.x5 and L2.x6 are available at <a href="https://www.census.gov">https://www.census.gov</a>.
</p>

<hr>
<h2 id='auto_MrP'>Improve MrP through ensemble learning.</h2><span id='topic+auto_MrP'></span>

<h3>Description</h3>

<p>This package improves the prediction performance of multilevel
regression with post-stratification (MrP) by combining a number of machine
learning methods through ensemble Bayesian model averaging (EBMA).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>auto_MrP(
  y,
  L1.x,
  L2.x,
  L2.unit,
  L2.reg = NULL,
  L2.x.scale = TRUE,
  pcs = NULL,
  folds = NULL,
  bin.proportion = NULL,
  bin.size = NULL,
  survey,
  census,
  ebma.size = 1/3,
  cores = 1,
  k.folds = 5,
  cv.sampling = "L2 units",
  loss.unit = c("individuals", "L2 units"),
  loss.fun = c("msfe", "cross-entropy", "f1", "MSE"),
  best.subset = TRUE,
  lasso = TRUE,
  pca = TRUE,
  gb = TRUE,
  svm = TRUE,
  mrp = FALSE,
  deep.mrp = FALSE,
  oversampling = FALSE,
  best.subset.L2.x = NULL,
  lasso.L2.x = NULL,
  pca.L2.x = NULL,
  gb.L2.x = NULL,
  svm.L2.x = NULL,
  mrp.L2.x = NULL,
  gb.L2.unit = TRUE,
  gb.L2.reg = FALSE,
  svm.L2.unit = TRUE,
  svm.L2.reg = FALSE,
  deep.L2.x = NULL,
  deep.L2.reg = TRUE,
  deep.splines = TRUE,
  lasso.lambda = NULL,
  lasso.n.iter = 100,
  gb.interaction.depth = c(1, 2, 3),
  gb.shrinkage = c(0.04, 0.01, 0.008, 0.005, 0.001),
  gb.n.trees.init = 50,
  gb.n.trees.increase = 50,
  gb.n.trees.max = 1000,
  gb.n.minobsinnode = 20,
  svm.kernel = c("radial"),
  svm.gamma = NULL,
  svm.cost = NULL,
  ebma.n.draws = 100,
  ebma.tol = c(0.01, 0.005, 0.001, 5e-04, 1e-04, 5e-05, 1e-05),
  verbose = FALSE,
  uncertainty = FALSE,
  boot.iter = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="auto_MrP_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_l1.x">L1.x</code></td>
<td>
<p>Individual-level covariates. A character vector containing the
column names of the individual-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. Note that geographic unit
is specified in argument <code>L2.unit</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_l2.x">L2.x</code></td>
<td>
<p>Context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. To exclude context-level
variables, set <code>L2.x = NULL</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column
name of the geographic unit in <code>survey</code> and <code>census</code> at which
outcomes should be aggregated.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_l2.reg">L2.reg</code></td>
<td>
<p>Geographic region. A character scalar containing the column
name of the geographic region in <code>survey</code> and <code>census</code> by which
geographic units are grouped (<code>L2.unit</code> must be nested within
<code>L2.reg</code>). Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_l2.x.scale">L2.x.scale</code></td>
<td>
<p>Scale context-level covariates. A logical argument
indicating whether the context-level covariates should be normalized.
Default is <code>TRUE</code>. Note that if set to <code>FALSE</code>, then the
context-level covariates should be normalized prior to calling
<code>auto_MrP()</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_pcs">pcs</code></td>
<td>
<p>Principal components. A character vector containing the column
names of the principal components of the context-level variables in
<code>survey</code> and <code>census</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_folds">folds</code></td>
<td>
<p>EBMA and cross-validation folds. A character scalar containing
the column name of the variable in <code>survey</code> that specifies the fold
to which an observation is allocated. The variable should contain integers
running from <code class="reqn">1</code> to <code class="reqn">k + 1</code>, where <code class="reqn">k</code> is the number of
cross-validation folds. Value <code class="reqn">k + 1</code> refers to the EBMA fold. Default
is <code>NULL</code>. <em>Note:</em> if <code>folds</code> is <code>NULL</code>, then
<code>ebma.size</code>, <code>k.folds</code>, and <code>cv.sampling</code> must be specified.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_bin.proportion">bin.proportion</code></td>
<td>
<p>Proportion of ideal types. A character scalar
containing the column name of the variable in <code>census</code> that indicates
the proportion of individuals by ideal type and geographic unit. Default is
<code>NULL</code>. <em>Note:</em> if <code>bin.proportion</code> is <code>NULL</code>, then
<code>bin.size</code> must be specified.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_bin.size">bin.size</code></td>
<td>
<p>Bin size of ideal types. A character scalar containing the
column name of the variable in <code>census</code> that indicates the bin size of
ideal types by geographic unit. Default is <code>NULL</code>. <em>Note:</em>
ignored if <code>bin.proportion</code> is provided, but must be specified
otherwise.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_survey">survey</code></td>
<td>
<p>Survey data. A <code>data.frame</code> whose column names include
<code>y</code>, <code>L1.x</code>, <code>L2.x</code>, <code>L2.unit</code>, and, if specified,
<code>L2.reg</code>, <code>pcs</code>, and <code>folds</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_census">census</code></td>
<td>
<p>Census data. A <code>data.frame</code> whose column names include
<code>L1.x</code>, <code>L2.x</code>, <code>L2.unit</code>, if specified, <code>L2.reg</code> and
<code>pcs</code>, and either <code>bin.proportion</code> or <code>bin.size</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_ebma.size">ebma.size</code></td>
<td>
<p>EBMA fold size. A number in the open unit interval
indicating the proportion of respondents to be allocated to the EBMA fold.
Default is <code class="reqn">1/3</code>. <em>Note:</em> ignored if <code>folds</code> is provided, but
must be specified otherwise.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_cores">cores</code></td>
<td>
<p>The number of cores to be used. An integer indicating the number
of processor cores used for parallel computing. Default is 1.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_k.folds">k.folds</code></td>
<td>
<p>Number of cross-validation folds. An integer-valued scalar
indicating the number of folds to be used in cross-validation. Default is
<code class="reqn">5</code>. <em>Note:</em> ignored if <code>folds</code> is provided, but must be
specified otherwise.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_cv.sampling">cv.sampling</code></td>
<td>
<p>Cross-validation sampling method. A character-valued
scalar indicating whether cross-validation folds should be created by
sampling individual respondents (<code>individuals</code>) or geographic units
(<code>L2 units</code>). Default is <code>L2 units</code>. <em>Note:</em> ignored if
<code>folds</code> is provided, but must be specified otherwise.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_loss.unit">loss.unit</code></td>
<td>
<p>Loss function unit. A character-valued scalar indicating
whether performance loss should be evaluated at the level of individual
respondents (<code>individuals</code>), geographic units (<code>L2 units</code>) or at
both levels. Default is <code>c("individuals", "L2 units")</code>. With multiple
loss units, parameters are ranked for each loss unit and the loss unit with
the lowest rank sum is chosen. Ties are broken according to the order in
the search grid.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_loss.fun">loss.fun</code></td>
<td>
<p>Loss function. A character-valued scalar indicating whether
prediction loss should be measured by the mean squared error (<code>MSE</code>),
the mean absolute error (<code>MAE</code>), binary cross-entropy
(<code>cross-entropy</code>), mean squared false error (<code>msfe</code>), the f1
score (<code>f1</code>), or a combination thereof. Default is <code>c("MSE",
"cross-entropy","msfe", "f1")</code>. With multiple loss functions, parameters
are ranked for each loss function and the parameter combination with the
lowest rank sum is chosen. Ties are broken according to the order in the
search grid.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_best.subset">best.subset</code></td>
<td>
<p>Best subset classifier. A logical argument indicating
whether the best subset classifier should be used for predicting outcome
<code>y</code>. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_lasso">lasso</code></td>
<td>
<p>Lasso classifier. A logical argument indicating whether the
lasso classifier should be used for predicting outcome <code>y</code>. Default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_pca">pca</code></td>
<td>
<p>PCA classifier. A logical argument indicating whether the PCA
classifier should be used for predicting outcome <code>y</code>. Default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_gb">gb</code></td>
<td>
<p>GB classifier. A logical argument indicating whether the GB
classifier should be used for predicting outcome <code>y</code>. Default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_svm">svm</code></td>
<td>
<p>SVM classifier. A logical argument indicating whether the SVM
classifier should be used for predicting outcome <code>y</code>. Default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_mrp">mrp</code></td>
<td>
<p>MRP classifier. A logical argument indicating whether the standard
MRP classifier should be used for predicting outcome <code>y</code>. Default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_deep.mrp">deep.mrp</code></td>
<td>
<p>Deep MRP classifier. A logical argument indicating whether
the deep MRP classifier should be used for predicting outcome <code>y</code>.
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_oversampling">oversampling</code></td>
<td>
<p>Over sample to create balance on the dependent variable.
A logical argument. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_best.subset.l2.x">best.subset.L2.x</code></td>
<td>
<p>Best subset context-level covariates. A character
vector containing the column names of the context-level variables in
<code>survey</code> and <code>census</code> to be used by the best subset classifier.
If <code>NULL</code> and <code>best.subset</code> is set to <code>TRUE</code>, then best
subset uses the variables specified in <code>L2.x</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_lasso.l2.x">lasso.L2.x</code></td>
<td>
<p>Lasso context-level covariates. A character vector
containing the column names of the context-level variables in
<code>survey</code> and <code>census</code> to be used by the lasso classifier. If
<code>NULL</code> and <code>lasso</code> is set to <code>TRUE</code>, then lasso uses the
variables specified in <code>L2.x</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_pca.l2.x">pca.L2.x</code></td>
<td>
<p>PCA context-level covariates. A character vector containing
the column names of the context-level variables in <code>survey</code> and
<code>census</code> whose principal components are to be used by the PCA
classifier. If <code>NULL</code> and <code>pca</code> is set to <code>TRUE</code>, then PCA
uses the principal components of the variables specified in <code>L2.x</code>.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_gb.l2.x">gb.L2.x</code></td>
<td>
<p>GB context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> to be used by the GB classifier. If <code>NULL</code> and <code>gb</code>
is set to <code>TRUE</code>, then GB uses the variables specified in <code>L2.x</code>.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_svm.l2.x">svm.L2.x</code></td>
<td>
<p>SVM context-level covariates. A character vector containing
the column names of the context-level variables in <code>survey</code> and
<code>census</code> to be used by the SVM classifier. If <code>NULL</code> and
<code>svm</code> is set to <code>TRUE</code>, then SVM uses the variables specified in
<code>L2.x</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_mrp.l2.x">mrp.L2.x</code></td>
<td>
<p>MRP context-level covariates. A character vector containing
the column names of the context-level variables in <code>survey</code> and
<code>census</code> to be used by the MRP classifier. The character vector
<em>empty</em> if no context-level variables should be used by the MRP
classifier. If <code>NULL</code> and <code>mrp</code> is set to <code>TRUE</code>, then MRP
uses the variables specified in <code>L2.x</code>. Default is <code>NULL</code>. Note:
For the empty MrP model, set <code>L2.x = NULL</code> and <code>mrp.L2.x = ""</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_gb.l2.unit">gb.L2.unit</code></td>
<td>
<p>GB L2.unit. A logical argument indicating whether
<code>L2.unit</code> should be included in the GB classifier. Default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_gb.l2.reg">gb.L2.reg</code></td>
<td>
<p>GB L2.reg. A logical argument indicating whether
<code>L2.reg</code> should be included in the GB classifier. Default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_svm.l2.unit">svm.L2.unit</code></td>
<td>
<p>SVM L2.unit. A logical argument indicating whether
<code>L2.unit</code> should be included in the SVM classifier. Default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_svm.l2.reg">svm.L2.reg</code></td>
<td>
<p>SVM L2.reg. A logical argument indicating whether
<code>L2.reg</code> should be included in the SVM classifier. Default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_deep.l2.x">deep.L2.x</code></td>
<td>
<p>Deep MRP context-level covariates. A character vector
containing the column names of the context-level variables in <code>survey</code>
and <code>census</code> to be used by the deep MRP classifier. If <code>NULL</code> and
<code>deep.mrp</code> is set to <code>TRUE</code>, then deep MRP uses the variables
specified in <code>L2.x</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_deep.l2.reg">deep.L2.reg</code></td>
<td>
<p>Deep MRP L2.reg. A logical argument indicating whether
<code>L2.reg</code> should be included in the deep MRP classifier. Default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_deep.splines">deep.splines</code></td>
<td>
<p>Deep MRP splines. A logical argument indicating whether
splines should be used in the deep MRP classifier. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_lasso.lambda">lasso.lambda</code></td>
<td>
<p>Lasso penalty parameter. A numeric <code>vector</code> of
non-negative values. The penalty parameter controls the shrinkage of the
context-level variables in the lasso model. Default is a sequence with
minimum 0.1 and maximum 250 that is equally spaced on the log-scale. The
number of values is controlled by the <code>lasso.n.iter</code> parameter.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_lasso.n.iter">lasso.n.iter</code></td>
<td>
<p>Lasso number of lambda values. An integer-valued scalar
specifying the number of lambda values to search over. Default is
<code class="reqn">100</code>. <em>Note:</em> Is ignored if a vector of <code>lasso.lambda</code>
values is provided.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_gb.interaction.depth">gb.interaction.depth</code></td>
<td>
<p>GB interaction depth. An integer-valued vector
whose values specify the interaction depth of GB. The interaction depth
defines the maximum depth of each tree grown (i.e., the maximum level of
variable interactions). Default is <code>c(1, 2, 3)</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_gb.shrinkage">gb.shrinkage</code></td>
<td>
<p>GB learning rate. A numeric vector whose values specify
the learning rate or step-size reduction of GB. Values between <code class="reqn">0.001</code>
and <code class="reqn">0.1</code> usually work, but a smaller learning rate typically requires
more trees. Default is <code>c(0.04, 0.01, 0.008, 0.005, 0.001)</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_gb.n.trees.init">gb.n.trees.init</code></td>
<td>
<p>GB initial total number of trees. An integer-valued
scalar specifying the initial number of total trees to fit by GB. Default
is <code class="reqn">50</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_gb.n.trees.increase">gb.n.trees.increase</code></td>
<td>
<p>GB increase in total number of trees. An
integer-valued scalar specifying by how many trees the total number of
trees to fit should be increased (until <code>gb.n.trees.max</code> is reached).
Default is <code class="reqn">50</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_gb.n.trees.max">gb.n.trees.max</code></td>
<td>
<p>GB maximum number of trees. An integer-valued scalar
specifying the maximum number of trees to fit by GB. Default is <code class="reqn">1000</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_gb.n.minobsinnode">gb.n.minobsinnode</code></td>
<td>
<p>GB minimum number of observations in the terminal
nodes. An integer-valued scalar specifying the minimum number of
observations that each terminal node of the trees must contain. Default is
<code class="reqn">20</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_svm.kernel">svm.kernel</code></td>
<td>
<p>SVM kernel. A character-valued scalar specifying the kernel
to be used by SVM. The possible values are <code>linear</code>,
<code>polynomial</code>, <code>radial</code>, and <code>sigmoid</code>. Default is
<code>radial</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_svm.gamma">svm.gamma</code></td>
<td>
<p>SVM kernel parameter. A numeric vector whose values specify
the gamma parameter in the SVM kernel. This parameter is needed for all
kernel types except linear. Default is a sequence with minimum = 1e-5,
maximum = 1e-1, and length = 20 that is equally spaced on the log-scale.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_svm.cost">svm.cost</code></td>
<td>
<p>SVM cost parameter. A numeric vector whose values specify the
cost of constraints violation in SVM. Default is a sequence with minimum =
0.5, maximum = 10, and length = 5 that is equally spaced on the log-scale.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_ebma.n.draws">ebma.n.draws</code></td>
<td>
<p>EBMA number of samples. An integer-valued scalar
specifying the number of bootstrapped samples to be drawn from the EBMA
fold and used for tuning EBMA. Default is <code class="reqn">100</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_ebma.tol">ebma.tol</code></td>
<td>
<p>EBMA tolerance. A numeric vector containing the
tolerance values for improvements in the log-likelihood before the EM
algorithm stops optimization. Values should range at least from <code class="reqn">0.01</code>
to <code class="reqn">0.001</code>. Default is
<code>c(0.01, 0.005, 0.001, 0.0005, 0.0001, 0.00005, 0.00001)</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_verbose">verbose</code></td>
<td>
<p>Verbose output. A logical argument indicating whether or not
verbose output should be printed. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_uncertainty">uncertainty</code></td>
<td>
<p>Uncertainty estimates. A logical argument indicating
whether uncertainty estimates should be computed. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="auto_MrP_+3A_boot.iter">boot.iter</code></td>
<td>
<p>Number of bootstrap iterations. An integer argument
indicating the number of bootstrap iterations to be computed. Will be
ignored unless <code>uncertainty = TRUE</code>. Default is <code>200</code> if
<code>uncertainty = TRUE</code> and <code>NULL</code> if <code>uncertainty = FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Bootstrapping samples the level two units, sometimes referred to as
the cluster bootstrap. For the multilevel model, for example, when running
MrP only, the bootstrapped median level two predictions will differ from
the level two predictions without bootstrapping. We recommend assessing the
difference by running autoMrP without bootstrapping alongside autoMrP with
bootstrapping and then comparing level two predictions from the model
without bootstrapping to the median level two predictions from the model
with bootstrapping.
</p>
<p>To ensure reproducability of the results, use the <code>set.seed()</code>
function to specify a seed.
</p>


<h3>Value</h3>

<p>The context-level predictions. A list with two elements. The first
element, <code>EBMA</code>, contains the post-stratified ensemble bayesian model
avaeraging (EBMA) predictions. The second element, <code>classifiers</code>,
contains the post-stratified predictions from all estimated classifiers.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># An MrP model without machine learning
set.seed(123)
m &lt;- auto_MrP(
  y = "YES",
  L1.x = c("L1x1"),
  L2.x = c("L2.x1", "L2.x2"),
  L2.unit = "state",
  bin.proportion = "proportion",
  survey = taxes_survey,
  census = taxes_census,
  ebma.size = 0,
  cores = 2,
  best.subset = FALSE,
  lasso = FALSE,
  pca = FALSE,
  gb = FALSE,
  svm = FALSE,
  mrp = TRUE
)

# summarize and plot results
summary(m)
plot(m)

# An MrP model without context-level predictors
m &lt;- auto_MrP(
  y = "YES",
  L1.x = "L1x1",
  L2.x = NULL,
  mrp.L2.x = "",
  L2.unit = "state",
  bin.proportion = "proportion",
  survey = taxes_survey,
  census = taxes_census,
  ebma.size = 0,
  cores = 1,
  best.subset = FALSE,
  lasso = FALSE,
  pca = FALSE,
  gb = FALSE,
  svm = FALSE,
  mrp = TRUE
  )


# Predictions with machine learning

# detect number of available cores
max_cores &lt;- parallel::detectCores()

# autoMrP with machine learning
ml_out &lt;- auto_MrP(
  y = "YES",
  L1.x = c("L1x1", "L1x2", "L1x3"),
  L2.x = c("L2.x1", "L2.x2", "L2.x3", "L2.x4", "L2.x5", "L2.x6"),
  L2.unit = "state",
  L2.reg = "region",
  bin.proportion = "proportion",
  survey = taxes_survey,
  census = taxes_census,
  gb.L2.reg = TRUE,
  svm.L2.reg = TRUE,
  cores = min(2, max_cores)
  )

</code></pre>

<hr>
<h2 id='best_subset_classifier'>Best subset classifier</h2><span id='topic+best_subset_classifier'></span>

<h3>Description</h3>

<p><code>best_subset_classifier</code> applies best subset classification to a data
set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>best_subset_classifier(
  model,
  data.train,
  model.family,
  model.optimizer,
  n.iter,
  y,
  verbose = c(TRUE, FALSE)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="best_subset_classifier_+3A_model">model</code></td>
<td>
<p>Multilevel model. A model formula describing the multilevel
model to be estimated on the basis of the provided training data.</p>
</td></tr>
<tr><td><code id="best_subset_classifier_+3A_data.train">data.train</code></td>
<td>
<p>Training data. A data.frame containing the training data
used to train the model.</p>
</td></tr>
<tr><td><code id="best_subset_classifier_+3A_model.family">model.family</code></td>
<td>
<p>Model family. A variable indicating the model family
to be used by glmer. Defaults to binomial(link = &quot;probit&quot;).</p>
</td></tr>
<tr><td><code id="best_subset_classifier_+3A_model.optimizer">model.optimizer</code></td>
<td>
<p>Optimization method. A character-valued scalar
describing the optimization method to be used by glmer. Defaults to
&quot;bobyqa&quot;.</p>
</td></tr>
<tr><td><code id="best_subset_classifier_+3A_n.iter">n.iter</code></td>
<td>
<p>Iterations. A integer-valued scalar specifying the maximum
number of function evaluations tried by the optimization method.</p>
</td></tr>
<tr><td><code id="best_subset_classifier_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="best_subset_classifier_+3A_verbose">verbose</code></td>
<td>
<p>Verbose output. A logical vector indicating whether or not
verbose output should be printed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The multilevel model. An <code><a href="lme4.html#topic+glmer">glmer</a></code> object.
</p>

<hr>
<h2 id='binary_cross_entropy'>Estimates the inverse binary cross-entropy, i.e. 0 is the best score and 1
the worst.</h2><span id='topic+binary_cross_entropy'></span>

<h3>Description</h3>

<p><code>binary_cross_entropy()</code> estimates the inverse binary cross-entropy on
the individual and state-level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>binary_cross_entropy(
  pred,
  data.valid,
  loss.unit = c("individuals", "L2 units"),
  y,
  L2.unit
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="binary_cross_entropy_+3A_pred">pred</code></td>
<td>
<p>Predictions of outcome. A numeric vector of outcome predictions.</p>
</td></tr>
<tr><td><code id="binary_cross_entropy_+3A_data.valid">data.valid</code></td>
<td>
<p>Test data set. A tibble of data that was not used for
prediction.</p>
</td></tr>
<tr><td><code id="binary_cross_entropy_+3A_loss.unit">loss.unit</code></td>
<td>
<p>Loss function unit. A character-valued scalar indicating
whether performance loss should be evaluated at the level of individual
respondents (<code>individuals</code>) or geographic units (<code>L2 units</code>).
Default is <code>individuals</code>.</p>
</td></tr>
<tr><td><code id="binary_cross_entropy_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable.</p>
</td></tr>
<tr><td><code id="binary_cross_entropy_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column name
of the geographic unit in <code>survey</code> and <code>census</code> at which outcomes
should be aggregated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a tibble containing two binary cross-entropy prediction
errors. The first is measured at the level of individuals and the second is
measured at the context level. The tibble dimensions are 2x3 with
variables: measure, value and level.
</p>

<hr>
<h2 id='boot_auto_mrp'>Bootstrappinng wrapper for auto_mrp</h2><span id='topic+boot_auto_mrp'></span>

<h3>Description</h3>

<p><code>boot_auto_mrp</code> estimates uncertainty for auto_mrp via botstrapping.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>boot_auto_mrp(
  y,
  L1.x,
  L2.x,
  mrp.L2.x,
  L2.unit,
  L2.reg,
  L2.x.scale,
  pcs,
  folds,
  bin.proportion,
  bin.size,
  survey,
  census,
  ebma.size,
  k.folds,
  cv.sampling,
  loss.unit,
  loss.fun,
  best.subset,
  lasso,
  pca,
  gb,
  svm,
  mrp,
  deep.mrp,
  best.subset.L2.x,
  lasso.L2.x,
  pca.L2.x,
  pc.names,
  gb.L2.x,
  svm.L2.x,
  svm.L2.unit,
  svm.L2.reg,
  gb.L2.unit,
  gb.L2.reg,
  deep.L2.x,
  deep.L2.reg,
  deep.splines,
  lasso.lambda,
  lasso.n.iter,
  gb.interaction.depth,
  gb.shrinkage,
  gb.n.trees.init,
  gb.n.trees.increase,
  gb.n.trees.max,
  gb.n.minobsinnode,
  svm.kernel,
  svm.gamma,
  svm.cost,
  ebma.tol,
  boot.iter,
  cores
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="boot_auto_mrp_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_l1.x">L1.x</code></td>
<td>
<p>Individual-level covariates. A character vector containing the
column names of the individual-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. Note that geographic unit
is specified in argument <code>L2.unit</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_l2.x">L2.x</code></td>
<td>
<p>Context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. To exclude context-level
variables, set <code>L2.x = NULL</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_mrp.l2.x">mrp.L2.x</code></td>
<td>
<p>MRP context-level covariates. A character vector containing
the column names of the context-level variables in <code>survey</code> and
<code>census</code> to be used by the MRP classifier. The character vector
<em>empty</em> if no context-level variables should be used by the MRP
classifier. If <code>NULL</code> and <code>mrp</code> is set to <code>TRUE</code>, then MRP
uses the variables specified in <code>L2.x</code>. Default is <code>NULL</code>. Note:
For the empty MrP model, set <code>L2.x = NULL</code> and <code>mrp.L2.x = ""</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column
name of the geographic unit in <code>survey</code> and <code>census</code> at which
outcomes should be aggregated.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_l2.reg">L2.reg</code></td>
<td>
<p>Geographic region. A character scalar containing the column
name of the geographic region in <code>survey</code> and <code>census</code> by which
geographic units are grouped (<code>L2.unit</code> must be nested within
<code>L2.reg</code>). Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_l2.x.scale">L2.x.scale</code></td>
<td>
<p>Scale context-level covariates. A logical argument
indicating whether the context-level covariates should be normalized.
Default is <code>TRUE</code>. Note that if set to <code>FALSE</code>, then the
context-level covariates should be normalized prior to calling
<code>auto_MrP()</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_pcs">pcs</code></td>
<td>
<p>Principal components. A character vector containing the column
names of the principal components of the context-level variables in
<code>survey</code> and <code>census</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_folds">folds</code></td>
<td>
<p>EBMA and cross-validation folds. A character scalar containing
the column name of the variable in <code>survey</code> that specifies the fold
to which an observation is allocated. The variable should contain integers
running from <code class="reqn">1</code> to <code class="reqn">k + 1</code>, where <code class="reqn">k</code> is the number of
cross-validation folds. Value <code class="reqn">k + 1</code> refers to the EBMA fold. Default
is <code>NULL</code>. <em>Note:</em> if <code>folds</code> is <code>NULL</code>, then
<code>ebma.size</code>, <code>k.folds</code>, and <code>cv.sampling</code> must be specified.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_bin.proportion">bin.proportion</code></td>
<td>
<p>Proportion of ideal types. A character scalar
containing the column name of the variable in <code>census</code> that indicates
the proportion of individuals by ideal type and geographic unit. Default is
<code>NULL</code>. <em>Note:</em> if <code>bin.proportion</code> is <code>NULL</code>, then
<code>bin.size</code> must be specified.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_bin.size">bin.size</code></td>
<td>
<p>Bin size of ideal types. A character scalar containing the
column name of the variable in <code>census</code> that indicates the bin size of
ideal types by geographic unit. Default is <code>NULL</code>. <em>Note:</em>
ignored if <code>bin.proportion</code> is provided, but must be specified
otherwise.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_survey">survey</code></td>
<td>
<p>Survey data. A <code>data.frame</code> whose column names include
<code>y</code>, <code>L1.x</code>, <code>L2.x</code>, <code>L2.unit</code>, and, if specified,
<code>L2.reg</code>, <code>pcs</code>, and <code>folds</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_census">census</code></td>
<td>
<p>Census data. A <code>data.frame</code> whose column names include
<code>L1.x</code>, <code>L2.x</code>, <code>L2.unit</code>, if specified, <code>L2.reg</code> and
<code>pcs</code>, and either <code>bin.proportion</code> or <code>bin.size</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_ebma.size">ebma.size</code></td>
<td>
<p>EBMA fold size. A number in the open unit interval
indicating the proportion of respondents to be allocated to the EBMA fold.
Default is <code class="reqn">1/3</code>. <em>Note:</em> ignored if <code>folds</code> is provided, but
must be specified otherwise.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_k.folds">k.folds</code></td>
<td>
<p>Number of cross-validation folds. An integer-valued scalar
indicating the number of folds to be used in cross-validation. Default is
<code class="reqn">5</code>. <em>Note:</em> ignored if <code>folds</code> is provided, but must be
specified otherwise.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_cv.sampling">cv.sampling</code></td>
<td>
<p>Cross-validation sampling method. A character-valued
scalar indicating whether cross-validation folds should be created by
sampling individual respondents (<code>individuals</code>) or geographic units
(<code>L2 units</code>). Default is <code>L2 units</code>. <em>Note:</em> ignored if
<code>folds</code> is provided, but must be specified otherwise.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_loss.unit">loss.unit</code></td>
<td>
<p>Loss function unit. A character-valued scalar indicating
whether performance loss should be evaluated at the level of individual
respondents (<code>individuals</code>), geographic units (<code>L2 units</code>) or at
both levels. Default is <code>c("individuals", "L2 units")</code>. With multiple
loss units, parameters are ranked for each loss unit and the loss unit with
the lowest rank sum is chosen. Ties are broken according to the order in
the search grid.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_loss.fun">loss.fun</code></td>
<td>
<p>Loss function. A character-valued scalar indicating whether
prediction loss should be measured by the mean squared error (<code>MSE</code>),
the mean absolute error (<code>MAE</code>), binary cross-entropy
(<code>cross-entropy</code>), mean squared false error (<code>msfe</code>), the f1
score (<code>f1</code>), or a combination thereof. Default is <code>c("MSE",
"cross-entropy","msfe", "f1")</code>. With multiple loss functions, parameters
are ranked for each loss function and the parameter combination with the
lowest rank sum is chosen. Ties are broken according to the order in the
search grid.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_best.subset">best.subset</code></td>
<td>
<p>Best subset classifier. A logical argument indicating
whether the best subset classifier should be used for predicting outcome
<code>y</code>. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_lasso">lasso</code></td>
<td>
<p>Lasso classifier. A logical argument indicating whether the
lasso classifier should be used for predicting outcome <code>y</code>. Default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_pca">pca</code></td>
<td>
<p>PCA classifier. A logical argument indicating whether the PCA
classifier should be used for predicting outcome <code>y</code>. Default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_gb">gb</code></td>
<td>
<p>GB classifier. A logical argument indicating whether the GB
classifier should be used for predicting outcome <code>y</code>. Default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_svm">svm</code></td>
<td>
<p>SVM classifier. A logical argument indicating whether the SVM
classifier should be used for predicting outcome <code>y</code>. Default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_mrp">mrp</code></td>
<td>
<p>MRP classifier. A logical argument indicating whether the standard
MRP classifier should be used for predicting outcome <code>y</code>. Default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_deep.mrp">deep.mrp</code></td>
<td>
<p>Deep MRP classifier. A logical argument indicating whether
the deep MRP classifier should be used for predicting outcome <code>y</code>.
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_best.subset.l2.x">best.subset.L2.x</code></td>
<td>
<p>Best subset context-level covariates. A character
vector containing the column names of the context-level variables in
<code>survey</code> and <code>census</code> to be used by the best subset classifier.
If <code>NULL</code> and <code>best.subset</code> is set to <code>TRUE</code>, then best
subset uses the variables specified in <code>L2.x</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_lasso.l2.x">lasso.L2.x</code></td>
<td>
<p>Lasso context-level covariates. A character vector
containing the column names of the context-level variables in
<code>survey</code> and <code>census</code> to be used by the lasso classifier. If
<code>NULL</code> and <code>lasso</code> is set to <code>TRUE</code>, then lasso uses the
variables specified in <code>L2.x</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_pca.l2.x">pca.L2.x</code></td>
<td>
<p>PCA context-level covariates. A character vector containing
the column names of the context-level variables in <code>survey</code> and
<code>census</code> whose principal components are to be used by the PCA
classifier. If <code>NULL</code> and <code>pca</code> is set to <code>TRUE</code>, then PCA
uses the principal components of the variables specified in <code>L2.x</code>.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_pc.names">pc.names</code></td>
<td>
<p>A character vector of the principal component variable names
in the data.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_gb.l2.x">gb.L2.x</code></td>
<td>
<p>GB context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> to be used by the GB classifier. If <code>NULL</code> and <code>gb</code>
is set to <code>TRUE</code>, then GB uses the variables specified in <code>L2.x</code>.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_svm.l2.x">svm.L2.x</code></td>
<td>
<p>SVM context-level covariates. A character vector containing
the column names of the context-level variables in <code>survey</code> and
<code>census</code> to be used by the SVM classifier. If <code>NULL</code> and
<code>svm</code> is set to <code>TRUE</code>, then SVM uses the variables specified in
<code>L2.x</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_svm.l2.unit">svm.L2.unit</code></td>
<td>
<p>SVM L2.unit. A logical argument indicating whether
<code>L2.unit</code> should be included in the SVM classifier. Default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_svm.l2.reg">svm.L2.reg</code></td>
<td>
<p>SVM L2.reg. A logical argument indicating whether
<code>L2.reg</code> should be included in the SVM classifier. Default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_gb.l2.unit">gb.L2.unit</code></td>
<td>
<p>GB L2.unit. A logical argument indicating whether
<code>L2.unit</code> should be included in the GB classifier. Default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_gb.l2.reg">gb.L2.reg</code></td>
<td>
<p>GB L2.reg. A logical argument indicating whether
<code>L2.reg</code> should be included in the GB classifier. Default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_deep.l2.x">deep.L2.x</code></td>
<td>
<p>Deep MRP context-level covariates. A character vector
containing the column names of the context-level variables in <code>survey</code>
and <code>census</code> to be used by the deep MRP classifier. If <code>NULL</code> and
<code>deep.mrp</code> is set to <code>TRUE</code>, then deep MRP uses the variables
specified in <code>L2.x</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_deep.l2.reg">deep.L2.reg</code></td>
<td>
<p>Deep MRP L2.reg. A logical argument indicating whether
<code>L2.reg</code> should be included in the deep MRP classifier. Default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_deep.splines">deep.splines</code></td>
<td>
<p>Deep MRP splines. A logical argument indicating whether
splines should be used in the deep MRP classifier. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_lasso.lambda">lasso.lambda</code></td>
<td>
<p>Lasso penalty parameter. A numeric <code>vector</code> of
non-negative values. The penalty parameter controls the shrinkage of the
context-level variables in the lasso model. Default is a sequence with
minimum 0.1 and maximum 250 that is equally spaced on the log-scale. The
number of values is controlled by the <code>lasso.n.iter</code> parameter.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_lasso.n.iter">lasso.n.iter</code></td>
<td>
<p>Lasso number of lambda values. An integer-valued scalar
specifying the number of lambda values to search over. Default is
<code class="reqn">100</code>. <em>Note:</em> Is ignored if a vector of <code>lasso.lambda</code>
values is provided.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_gb.interaction.depth">gb.interaction.depth</code></td>
<td>
<p>GB interaction depth. An integer-valued vector
whose values specify the interaction depth of GB. The interaction depth
defines the maximum depth of each tree grown (i.e., the maximum level of
variable interactions). Default is <code>c(1, 2, 3)</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_gb.shrinkage">gb.shrinkage</code></td>
<td>
<p>GB learning rate. A numeric vector whose values specify
the learning rate or step-size reduction of GB. Values between <code class="reqn">0.001</code>
and <code class="reqn">0.1</code> usually work, but a smaller learning rate typically requires
more trees. Default is <code>c(0.04, 0.01, 0.008, 0.005, 0.001)</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_gb.n.trees.init">gb.n.trees.init</code></td>
<td>
<p>GB initial total number of trees. An integer-valued
scalar specifying the initial number of total trees to fit by GB. Default
is <code class="reqn">50</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_gb.n.trees.increase">gb.n.trees.increase</code></td>
<td>
<p>GB increase in total number of trees. An
integer-valued scalar specifying by how many trees the total number of
trees to fit should be increased (until <code>gb.n.trees.max</code> is reached).
Default is <code class="reqn">50</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_gb.n.trees.max">gb.n.trees.max</code></td>
<td>
<p>GB maximum number of trees. An integer-valued scalar
specifying the maximum number of trees to fit by GB. Default is <code class="reqn">1000</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_gb.n.minobsinnode">gb.n.minobsinnode</code></td>
<td>
<p>GB minimum number of observations in the terminal
nodes. An integer-valued scalar specifying the minimum number of
observations that each terminal node of the trees must contain. Default is
<code class="reqn">20</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_svm.kernel">svm.kernel</code></td>
<td>
<p>SVM kernel. A character-valued scalar specifying the kernel
to be used by SVM. The possible values are <code>linear</code>,
<code>polynomial</code>, <code>radial</code>, and <code>sigmoid</code>. Default is
<code>radial</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_svm.gamma">svm.gamma</code></td>
<td>
<p>SVM kernel parameter. A numeric vector whose values specify
the gamma parameter in the SVM kernel. This parameter is needed for all
kernel types except linear. Default is a sequence with minimum = 1e-5,
maximum = 1e-1, and length = 20 that is equally spaced on the log-scale.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_svm.cost">svm.cost</code></td>
<td>
<p>SVM cost parameter. A numeric vector whose values specify the
cost of constraints violation in SVM. Default is a sequence with minimum =
0.5, maximum = 10, and length = 5 that is equally spaced on the log-scale.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_ebma.tol">ebma.tol</code></td>
<td>
<p>EBMA tolerance. A numeric vector containing the
tolerance values for improvements in the log-likelihood before the EM
algorithm stops optimization. Values should range at least from <code class="reqn">0.01</code>
to <code class="reqn">0.001</code>. Default is
<code>c(0.01, 0.005, 0.001, 0.0005, 0.0001, 0.00005, 0.00001)</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_boot.iter">boot.iter</code></td>
<td>
<p>Number of bootstrap iterations. An integer argument
indicating the number of bootstrap iterations to be computed. Will be
ignored unless <code>uncertainty = TRUE</code>. Default is <code>200</code> if
<code>uncertainty = TRUE</code> and <code>NULL</code> if <code>uncertainty = FALSE</code>.</p>
</td></tr>
<tr><td><code id="boot_auto_mrp_+3A_cores">cores</code></td>
<td>
<p>The number of cores to be used. An integer indicating the number
of processor cores used for parallel computing. Default is 1.</p>
</td></tr>
</table>

<hr>
<h2 id='census'>Quasi census data.</h2><span id='topic+census'></span>

<h3>Description</h3>

<p>The census file is generated from the full 2008 Cooperative Congressional Election Studies
item cc418_1 by dissaggregating the 64 ideal type combinations of the individual level variables
L1x1, L2x2 and L1x3. A row is an ideal type in a given state.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>census
</code></pre>


<h3>Format</h3>

<p>A data frame with 2934 rows and 13 variables:
</p>

<dl>
<dt>state</dt><dd><p>U.S. state</p>
</dd>
<dt>L2.unit</dt><dd><p>U.S. state id</p>
</dd>
<dt>region</dt><dd><p>U.S. region (four categories: 1 = Northeast; 2 = Midwest; 3 = South; 4 = West)</p>
</dd>
<dt>L1x1</dt><dd><p>Age group (four categories)</p>
</dd>
<dt>L1x2</dt><dd><p>Education level (four categories)</p>
</dd>
<dt>L1x3</dt><dd><p>Gender-race combination (six categories)</p>
</dd>
<dt>proportion</dt><dd><p>State-level proportion of respondents of that ideal type in the population</p>
</dd>
<dt>L2.x1</dt><dd><p>State-level share of votes for the Republican candidate in the previous presidential election</p>
</dd>
<dt>L2.x2</dt><dd><p>State-level percentage of Evangelical Protestant or Mormon respondents</p>
</dd>
<dt>L2.x3</dt><dd><p>State-level percentage of the population living in urban areas</p>
</dd>
<dt>L2.x4</dt><dd><p>State-level unemployment rate</p>
</dd>
<dt>L2.x5</dt><dd><p>State-level share of Hispanics</p>
</dd>
<dt>L2.x6</dt><dd><p>State-level share of Whites</p>
</dd>
</dl>



<h3>Source</h3>

<p>The data set (excluding L2.x3, L2.x4, L2.x5, L2.x6) is taken from the
article: Buttice, Matthew K, and Benjamin Highton. 2013. &quot;How does
multilevel regression and poststrat-stratification perform with
conventional national surveys?&quot; Political Analysis 21(4): 449-467. L2.x3,
L2.x3, L2.x4, L2.x5 and L2.x6 are available at
<a href="https://www.census.gov">https://www.census.gov</a>.
</p>

<hr>
<h2 id='cv_folding'>Generates folds for cross-validation</h2><span id='topic+cv_folding'></span>

<h3>Description</h3>

<p><code>cv_folding</code> creates folds used in classifier training within the survey
data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cv_folding(data, L2.unit, k.folds, cv.sampling = c("individuals", "L2 units"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cv_folding_+3A_data">data</code></td>
<td>
<p>The survey data; must be a tibble.</p>
</td></tr>
<tr><td><code id="cv_folding_+3A_l2.unit">L2.unit</code></td>
<td>
<p>The column name of the factor variable identifying the
context-level unit</p>
</td></tr>
<tr><td><code id="cv_folding_+3A_k.folds">k.folds</code></td>
<td>
<p>An integer value indicating the number of folds to be
generated.</p>
</td></tr>
<tr><td><code id="cv_folding_+3A_cv.sampling">cv.sampling</code></td>
<td>
<p>Cross-validation sampling method. A character-valued
scalar indicating whether cross-validation folds should be created by
sampling individual respondents (<code>individuals</code>) or geographic units
(<code>L2 units</code>). Default is <code>L2 units</code>. <em>Note:</em> ignored if
<code>folds</code> is provided, but must be specified otherwise.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list with length specified by <code>k.folds</code> argument. Each
element is a tibble with a fold used in k-fold cross-validation.
</p>

<hr>
<h2 id='deep_mrp_classifier'>Deep MrP classifier</h2><span id='topic+deep_mrp_classifier'></span>

<h3>Description</h3>

<p><code>deep_mrp_classifier</code> applies Deep MrP implemented in the <span class="pkg">vglmer</span>
package to a data set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deep_mrp_classifier(y, form, data, verbose)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="deep_mrp_classifier_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="deep_mrp_classifier_+3A_form">form</code></td>
<td>
<p>Model formula. A two-sided linear formula describing
the model to be fit, with the outcome on the LHS and the covariates
separated by + operators on the RHS.</p>
</td></tr>
<tr><td><code id="deep_mrp_classifier_+3A_data">data</code></td>
<td>
<p>Data. A data.frame containing the data used to train the model.</p>
</td></tr>
<tr><td><code id="deep_mrp_classifier_+3A_verbose">verbose</code></td>
<td>
<p>Verbose output. A logical argument indicating whether or not
verbose output should be printed. Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Deep MrP model. A <code><a href="vglmer.html#topic+vglmer">vglmer</a></code> object.
</p>

<hr>
<h2 id='ebma'>Bayesian Ensemble Model Averaging EBMA</h2><span id='topic+ebma'></span>

<h3>Description</h3>

<p><code>ebma</code> tunes EBMA and generates weights for classifier averaging.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ebma(
  ebma.fold,
  y,
  L1.x,
  L2.x,
  L2.unit,
  L2.reg,
  pc.names,
  post.strat,
  n.draws,
  tol,
  best.subset.opt,
  pca.opt,
  lasso.opt,
  gb.opt,
  svm.opt,
  deep.mrp,
  verbose,
  cores
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ebma_+3A_ebma.fold">ebma.fold</code></td>
<td>
<p>New data for EBMA tuning. A list containing the the data
that must not have been used in classifier training.</p>
</td></tr>
<tr><td><code id="ebma_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="ebma_+3A_l1.x">L1.x</code></td>
<td>
<p>Individual-level covariates. A character vector containing the
column names of the individual-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. Note that geographic unit
is specified in argument <code>L2.unit</code>.</p>
</td></tr>
<tr><td><code id="ebma_+3A_l2.x">L2.x</code></td>
<td>
<p>Context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. To exclude context-level
variables, set <code>L2.x = NULL</code>.</p>
</td></tr>
<tr><td><code id="ebma_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column
name of the geographic unit in <code>survey</code> and <code>census</code> at which
outcomes should be aggregated.</p>
</td></tr>
<tr><td><code id="ebma_+3A_l2.reg">L2.reg</code></td>
<td>
<p>Geographic region. A character scalar containing the column
name of the geographic region in <code>survey</code> and <code>census</code> by which
geographic units are grouped (<code>L2.unit</code> must be nested within
<code>L2.reg</code>). Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="ebma_+3A_pc.names">pc.names</code></td>
<td>
<p>Principal Component Variable names. A character vector
containing the names of the context-level principal components variables.</p>
</td></tr>
<tr><td><code id="ebma_+3A_post.strat">post.strat</code></td>
<td>
<p>Post-stratification results. A list containing the best
models for each of the tuned classifiers, the individual level predictions
on the data classifier trainig data and the post-stratified context-level
predictions.</p>
</td></tr>
<tr><td><code id="ebma_+3A_n.draws">n.draws</code></td>
<td>
<p>EBMA number of samples. An integer-valued scalar specifying
the number of bootstrapped samples to be drawn from the EBMA fold and used
for tuning EBMA. Default is <code class="reqn">100</code>. Passed on from <code>ebma.n.draws</code>.</p>
</td></tr>
<tr><td><code id="ebma_+3A_tol">tol</code></td>
<td>
<p>EBMA tolerance. A numeric vector containing the tolerance values
for improvements in the log-likelihood before the EM algorithm stops
optimization. Values should range at least from <code class="reqn">0.01</code> to <code class="reqn">0.001</code>.
Default is <code>c(0.01, 0.005, 0.001, 0.0005, 0.0001, 0.00005, 0.00001)</code>.
Passed on from <code>ebma.tol</code>.</p>
</td></tr>
<tr><td><code id="ebma_+3A_best.subset.opt">best.subset.opt</code></td>
<td>
<p>Tuned best subset parameters. A list returned from
<code>run_best_subset()</code>.</p>
</td></tr>
<tr><td><code id="ebma_+3A_pca.opt">pca.opt</code></td>
<td>
<p>Tuned best subset with principal components parameters. A list
returned from <code>run_pca()</code>.</p>
</td></tr>
<tr><td><code id="ebma_+3A_lasso.opt">lasso.opt</code></td>
<td>
<p>Tuned lasso parameters. A list returned from
<code>run_lasso()</code>.</p>
</td></tr>
<tr><td><code id="ebma_+3A_gb.opt">gb.opt</code></td>
<td>
<p>Tuned gradient tree boosting parameters. A list returned from
<code>run_gb()</code>.</p>
</td></tr>
<tr><td><code id="ebma_+3A_svm.opt">svm.opt</code></td>
<td>
<p>Tuned support vector machine parameters. A list returned from
<code>run_svm()</code>.</p>
</td></tr>
<tr><td><code id="ebma_+3A_deep.mrp">deep.mrp</code></td>
<td>
<p>Deep MRP classifier. A logical argument indicating whether
the deep MRP classifier should be used for predicting outcome <code>y</code>.
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="ebma_+3A_verbose">verbose</code></td>
<td>
<p>Verbose output. A logical argument indicating whether or not
verbose output should be printed. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="ebma_+3A_cores">cores</code></td>
<td>
<p>The number of cores to be used. An integer indicating the number
of processor cores used for parallel computing. Default is 1.</p>
</td></tr>
</table>

<hr>
<h2 id='ebma_folding'>Generates data fold to be used for EBMA tuning</h2><span id='topic+ebma_folding'></span>

<h3>Description</h3>

<p>#' <code>ebma_folding()</code> generates a data fold that will not be used in
classifier tuning. It is data that is needed to determine the optimal
tolerance for EBMA.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ebma_folding(data, L2.unit, ebma.size)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ebma_folding_+3A_data">data</code></td>
<td>
<p>The full survey data. A tibble.</p>
</td></tr>
<tr><td><code id="ebma_folding_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column name
of the geographic unit in <code>survey</code> and <code>census</code> at which outcomes
should be aggregated.</p>
</td></tr>
<tr><td><code id="ebma_folding_+3A_ebma.size">ebma.size</code></td>
<td>
<p>EBMA fold size. A number in the open unit interval
indicating the proportion of respondents to be allocated to the EBMA fold.
Default is <code class="reqn">1/3</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list with two elements which are both tibble. List element
one is named <code>ebma_fold</code> and contains the tibble used in Ensemble
Bayesian Model Averaging Tuning. List element two is named <code>cv_data</code>
and contains the tibble used for classifier tuning.
</p>

<hr>
<h2 id='ebma_mc_draws'>EBMA multicore tuning - parallelises over draws.</h2><span id='topic+ebma_mc_draws'></span>

<h3>Description</h3>

<p><code>ebma_mc_draws</code> is called from within <code>ebma</code>. It tunes using
multiple cores.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ebma_mc_draws(
  train.preds,
  train.y,
  ebma.fold,
  y,
  L1.x,
  L2.x,
  L2.unit,
  L2.reg,
  pc.names,
  model.bs,
  model.pca,
  model.lasso,
  model.gb,
  model.svm,
  model.mrp,
  model_deep,
  tol,
  n.draws,
  cores
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ebma_mc_draws_+3A_train.preds">train.preds</code></td>
<td>
<p>Predictions of classifiers on the classifier training
data. A tibble.</p>
</td></tr>
<tr><td><code id="ebma_mc_draws_+3A_train.y">train.y</code></td>
<td>
<p>Outcome variable of the classifier training data. A numeric
vector.</p>
</td></tr>
<tr><td><code id="ebma_mc_draws_+3A_ebma.fold">ebma.fold</code></td>
<td>
<p>New data for EBMA tuning. A list containing the the data
that must not have been used in classifier training.</p>
</td></tr>
<tr><td><code id="ebma_mc_draws_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="ebma_mc_draws_+3A_l1.x">L1.x</code></td>
<td>
<p>Individual-level covariates. A character vector containing the
column names of the individual-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. Note that geographic unit
is specified in argument <code>L2.unit</code>.</p>
</td></tr>
<tr><td><code id="ebma_mc_draws_+3A_l2.x">L2.x</code></td>
<td>
<p>Context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. To exclude context-level
variables, set <code>L2.x = NULL</code>.</p>
</td></tr>
<tr><td><code id="ebma_mc_draws_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column
name of the geographic unit in <code>survey</code> and <code>census</code> at which
outcomes should be aggregated.</p>
</td></tr>
<tr><td><code id="ebma_mc_draws_+3A_l2.reg">L2.reg</code></td>
<td>
<p>Geographic region. A character scalar containing the column
name of the geographic region in <code>survey</code> and <code>census</code> by which
geographic units are grouped (<code>L2.unit</code> must be nested within
<code>L2.reg</code>). Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="ebma_mc_draws_+3A_pc.names">pc.names</code></td>
<td>
<p>Principal Component Variable names. A character vector
containing the names of the context-level principal components variables.</p>
</td></tr>
<tr><td><code id="ebma_mc_draws_+3A_model.bs">model.bs</code></td>
<td>
<p>The tuned model from the multilevel regression with best
subset selection classifier. An <code><a href="lme4.html#topic+glmer">glmer</a></code> object.</p>
</td></tr>
<tr><td><code id="ebma_mc_draws_+3A_model.pca">model.pca</code></td>
<td>
<p>The tuned model from the multilevel regression with
principal components as context-level predictors classifier. An
<code><a href="lme4.html#topic+glmer">glmer</a></code> object.</p>
</td></tr>
<tr><td><code id="ebma_mc_draws_+3A_model.lasso">model.lasso</code></td>
<td>
<p>The tuned model from the multilevel regression with L1
regularization classifier. A <code><a href="glmmLasso.html#topic+glmmLasso">glmmLasso</a></code> object.</p>
</td></tr>
<tr><td><code id="ebma_mc_draws_+3A_model.gb">model.gb</code></td>
<td>
<p>The tuned model from the gradient boosting classifier. A
<code><a href="gbm.html#topic+gbm">gbm</a></code> object.</p>
</td></tr>
<tr><td><code id="ebma_mc_draws_+3A_model.svm">model.svm</code></td>
<td>
<p>The tuned model from the support vector machine classifier.
An <code><a href="e1071.html#topic+svm">svm</a></code> object.</p>
</td></tr>
<tr><td><code id="ebma_mc_draws_+3A_model.mrp">model.mrp</code></td>
<td>
<p>The standard MrP model. An <code><a href="lme4.html#topic+glmer">glmer</a></code> object</p>
</td></tr>
<tr><td><code id="ebma_mc_draws_+3A_model_deep">model_deep</code></td>
<td>
<p>The tuned model from the deep mrp classifier. An
<code><a href="vglmer.html#topic+vglmer">vglmer</a></code> object.</p>
</td></tr>
<tr><td><code id="ebma_mc_draws_+3A_tol">tol</code></td>
<td>
<p>EBMA tolerance. A numeric vector containing the tolerance values
for improvements in the log-likelihood before the EM algorithm stops
optimization. Values should range at least from <code class="reqn">0.01</code> to <code class="reqn">0.001</code>.
Default is <code>c(0.01, 0.005, 0.001, 0.0005, 0.0001, 0.00005, 0.00001)</code>.
Passed on from <code>ebma.tol</code>.</p>
</td></tr>
<tr><td><code id="ebma_mc_draws_+3A_n.draws">n.draws</code></td>
<td>
<p>EBMA number of samples. An integer-valued scalar specifying
the number of bootstrapped samples to be drawn from the EBMA fold and used
for tuning EBMA. Default is <code class="reqn">100</code>. Passed on from <code>ebma.n.draws</code>.</p>
</td></tr>
<tr><td><code id="ebma_mc_draws_+3A_cores">cores</code></td>
<td>
<p>The number of cores to be used. An integer indicating the number
of processor cores used for parallel computing. Default is 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The classifier weights. A numeric vector.
</p>

<hr>
<h2 id='ebma_mc_tol'>EBMA multicore tuning - parallelises over tolerance values.</h2><span id='topic+ebma_mc_tol'></span>

<h3>Description</h3>

<p><code>ebma_mc_tol</code> is called from within <code>ebma</code>. It tunes using
multiple cores.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ebma_mc_tol(
  train.preds,
  train.y,
  ebma.fold,
  y,
  L1.x,
  L2.x,
  L2.unit,
  L2.reg,
  pc.names,
  model.bs,
  model.pca,
  model.lasso,
  model.gb,
  model.svm,
  model.mrp,
  model_deep,
  tol,
  n.draws,
  cores
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ebma_mc_tol_+3A_train.preds">train.preds</code></td>
<td>
<p>Predictions of classifiers on the classifier training
data. A tibble.</p>
</td></tr>
<tr><td><code id="ebma_mc_tol_+3A_train.y">train.y</code></td>
<td>
<p>Outcome variable of the classifier training data. A numeric
vector.</p>
</td></tr>
<tr><td><code id="ebma_mc_tol_+3A_ebma.fold">ebma.fold</code></td>
<td>
<p>The data used for EBMA tuning. A tibble.</p>
</td></tr>
<tr><td><code id="ebma_mc_tol_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="ebma_mc_tol_+3A_l1.x">L1.x</code></td>
<td>
<p>Individual-level covariates. A character vector containing the
column names of the individual-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. Note that geographic unit
is specified in argument <code>L2.unit</code>.</p>
</td></tr>
<tr><td><code id="ebma_mc_tol_+3A_l2.x">L2.x</code></td>
<td>
<p>Context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. To exclude context-level
variables, set <code>L2.x = NULL</code>.</p>
</td></tr>
<tr><td><code id="ebma_mc_tol_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column
name of the geographic unit in <code>survey</code> and <code>census</code> at which
outcomes should be aggregated.</p>
</td></tr>
<tr><td><code id="ebma_mc_tol_+3A_l2.reg">L2.reg</code></td>
<td>
<p>Geographic region. A character scalar containing the column
name of the geographic region in <code>survey</code> and <code>census</code> by which
geographic units are grouped (<code>L2.unit</code> must be nested within
<code>L2.reg</code>). Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="ebma_mc_tol_+3A_pc.names">pc.names</code></td>
<td>
<p>Principal Component Variable names. A character vector
containing the names of the context-level principal components variables.</p>
</td></tr>
<tr><td><code id="ebma_mc_tol_+3A_model.bs">model.bs</code></td>
<td>
<p>The tuned model from the multilevel regression with best
subset selection classifier. An <code><a href="lme4.html#topic+glmer">glmer</a></code> object.</p>
</td></tr>
<tr><td><code id="ebma_mc_tol_+3A_model.pca">model.pca</code></td>
<td>
<p>The tuned model from the multilevel regression with
principal components as context-level predictors classifier. An
<code><a href="lme4.html#topic+glmer">glmer</a></code> object.</p>
</td></tr>
<tr><td><code id="ebma_mc_tol_+3A_model.lasso">model.lasso</code></td>
<td>
<p>The tuned model from the multilevel regression with L1
regularization classifier. A <code><a href="glmmLasso.html#topic+glmmLasso">glmmLasso</a></code> object.</p>
</td></tr>
<tr><td><code id="ebma_mc_tol_+3A_model.gb">model.gb</code></td>
<td>
<p>The tuned model from the gradient boosting classifier. A
<code><a href="gbm.html#topic+gbm">gbm</a></code> object.</p>
</td></tr>
<tr><td><code id="ebma_mc_tol_+3A_model.svm">model.svm</code></td>
<td>
<p>The tuned model from the support vector machine classifier.
An <code><a href="e1071.html#topic+svm">svm</a></code> object.</p>
</td></tr>
<tr><td><code id="ebma_mc_tol_+3A_model.mrp">model.mrp</code></td>
<td>
<p>The standard MrP model. An <code><a href="lme4.html#topic+glmer">glmer</a></code> object</p>
</td></tr>
<tr><td><code id="ebma_mc_tol_+3A_model_deep">model_deep</code></td>
<td>
<p>The tuned model from the deep mrp classifier. An
<code><a href="vglmer.html#topic+vglmer">vglmer</a></code> object.</p>
</td></tr>
<tr><td><code id="ebma_mc_tol_+3A_tol">tol</code></td>
<td>
<p>The tolerance values used for EBMA. A numeric vector.</p>
</td></tr>
<tr><td><code id="ebma_mc_tol_+3A_n.draws">n.draws</code></td>
<td>
<p>EBMA number of samples. An integer-valued scalar specifying
the number of bootstrapped samples to be drawn from the EBMA fold and used
for tuning EBMA. Default is <code class="reqn">100</code>. Passed on from <code>ebma.n.draws</code>.</p>
</td></tr>
<tr><td><code id="ebma_mc_tol_+3A_cores">cores</code></td>
<td>
<p>The number of cores to be used. An integer indicating the number
of processor cores used for parallel computing. Default is 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The classifier weights. A numeric vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# not yet

## End(Not run)
</code></pre>

<hr>
<h2 id='error_checks'>Catches user input errors</h2><span id='topic+error_checks'></span>

<h3>Description</h3>

<p><code>error_checks()</code> checks for incorrect data entry in <code>autoMrP()</code>
call.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>error_checks(
  y,
  L1.x,
  L2.x,
  L2.unit,
  L2.reg,
  L2.x.scale,
  pcs,
  folds,
  bin.proportion,
  bin.size,
  survey,
  census,
  ebma.size,
  k.folds,
  cv.sampling,
  loss.unit,
  loss.fun,
  best.subset,
  lasso,
  pca,
  gb,
  svm,
  mrp,
  best.subset.L2.x,
  lasso.L2.x,
  gb.L2.x,
  svm.L2.x,
  mrp.L2.x,
  gb.L2.unit,
  gb.L2.reg,
  lasso.lambda,
  lasso.n.iter,
  uncertainty,
  boot.iter
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="error_checks_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_l1.x">L1.x</code></td>
<td>
<p>Individual-level covariates. A character vector containing the
column names of the individual-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. Note that geographic unit
is specified in argument <code>L2.unit</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_l2.x">L2.x</code></td>
<td>
<p>Context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. To exclude context-level
variables, set <code>L2.x = NULL</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column
name of the geographic unit in <code>survey</code> and <code>census</code> at which
outcomes should be aggregated.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_l2.reg">L2.reg</code></td>
<td>
<p>Geographic region. A character scalar containing the column
name of the geographic region in <code>survey</code> and <code>census</code> by which
geographic units are grouped (<code>L2.unit</code> must be nested within
<code>L2.reg</code>). Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_l2.x.scale">L2.x.scale</code></td>
<td>
<p>Scale context-level covariates. A logical argument
indicating whether the context-level covariates should be normalized.
Default is <code>TRUE</code>. Note that if set to <code>FALSE</code>, then the
context-level covariates should be normalized prior to calling
<code>auto_MrP()</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_pcs">pcs</code></td>
<td>
<p>Principal components. A character vector containing the column
names of the principal components of the context-level variables in
<code>survey</code> and <code>census</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_folds">folds</code></td>
<td>
<p>EBMA and cross-validation folds. A character scalar containing
the column name of the variable in <code>survey</code> that specifies the fold
to which an observation is allocated. The variable should contain integers
running from <code class="reqn">1</code> to <code class="reqn">k + 1</code>, where <code class="reqn">k</code> is the number of
cross-validation folds. Value <code class="reqn">k + 1</code> refers to the EBMA fold. Default
is <code>NULL</code>. <em>Note:</em> if <code>folds</code> is <code>NULL</code>, then
<code>ebma.size</code>, <code>k.folds</code>, and <code>cv.sampling</code> must be specified.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_bin.proportion">bin.proportion</code></td>
<td>
<p>Proportion of ideal types. A character scalar
containing the column name of the variable in <code>census</code> that indicates
the proportion of individuals by ideal type and geographic unit. Default is
<code>NULL</code>. <em>Note:</em> if <code>bin.proportion</code> is <code>NULL</code>, then
<code>bin.size</code> must be specified.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_bin.size">bin.size</code></td>
<td>
<p>Bin size of ideal types. A character scalar containing the
column name of the variable in <code>census</code> that indicates the bin size of
ideal types by geographic unit. Default is <code>NULL</code>. <em>Note:</em>
ignored if <code>bin.proportion</code> is provided, but must be specified
otherwise.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_survey">survey</code></td>
<td>
<p>Survey data. A <code>data.frame</code> whose column names include
<code>y</code>, <code>L1.x</code>, <code>L2.x</code>, <code>L2.unit</code>, and, if specified,
<code>L2.reg</code>, <code>pcs</code>, and <code>folds</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_census">census</code></td>
<td>
<p>Census data. A <code>data.frame</code> whose column names include
<code>L1.x</code>, <code>L2.x</code>, <code>L2.unit</code>, if specified, <code>L2.reg</code> and
<code>pcs</code>, and either <code>bin.proportion</code> or <code>bin.size</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_ebma.size">ebma.size</code></td>
<td>
<p>EBMA fold size. A number in the open unit interval
indicating the proportion of respondents to be allocated to the EBMA fold.
Default is <code class="reqn">1/3</code>. <em>Note:</em> ignored if <code>folds</code> is provided, but
must be specified otherwise.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_k.folds">k.folds</code></td>
<td>
<p>Number of cross-validation folds. An integer-valued scalar
indicating the number of folds to be used in cross-validation. Default is
<code class="reqn">5</code>. <em>Note:</em> ignored if <code>folds</code> is provided, but must be
specified otherwise.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_cv.sampling">cv.sampling</code></td>
<td>
<p>Cross-validation sampling method. A character-valued
scalar indicating whether cross-validation folds should be created by
sampling individual respondents (<code>individuals</code>) or geographic units
(<code>L2 units</code>). Default is <code>L2 units</code>. <em>Note:</em> ignored if
<code>folds</code> is provided, but must be specified otherwise.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_loss.unit">loss.unit</code></td>
<td>
<p>Loss function unit. A character-valued scalar indicating
whether performance loss should be evaluated at the level of individual
respondents (<code>individuals</code>), geographic units (<code>L2 units</code>) or at
both levels. Default is <code>c("individuals", "L2 units")</code>. With multiple
loss units, parameters are ranked for each loss unit and the loss unit with
the lowest rank sum is chosen. Ties are broken according to the order in
the search grid.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_loss.fun">loss.fun</code></td>
<td>
<p>Loss function. A character-valued scalar indicating whether
prediction loss should be measured by the mean squared error (<code>MSE</code>),
the mean absolute error (<code>MAE</code>), binary cross-entropy
(<code>cross-entropy</code>), mean squared false error (<code>msfe</code>), the f1
score (<code>f1</code>), or a combination thereof. Default is <code>c("MSE",
"cross-entropy","msfe", "f1")</code>. With multiple loss functions, parameters
are ranked for each loss function and the parameter combination with the
lowest rank sum is chosen. Ties are broken according to the order in the
search grid.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_best.subset">best.subset</code></td>
<td>
<p>Best subset classifier. A logical argument indicating
whether the best subset classifier should be used for predicting outcome
<code>y</code>. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_lasso">lasso</code></td>
<td>
<p>Lasso classifier. A logical argument indicating whether the
lasso classifier should be used for predicting outcome <code>y</code>. Default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_pca">pca</code></td>
<td>
<p>PCA classifier. A logical argument indicating whether the PCA
classifier should be used for predicting outcome <code>y</code>. Default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_gb">gb</code></td>
<td>
<p>GB classifier. A logical argument indicating whether the GB
classifier should be used for predicting outcome <code>y</code>. Default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_svm">svm</code></td>
<td>
<p>SVM classifier. A logical argument indicating whether the SVM
classifier should be used for predicting outcome <code>y</code>. Default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_mrp">mrp</code></td>
<td>
<p>MRP classifier. A logical argument indicating whether the standard
MRP classifier should be used for predicting outcome <code>y</code>. Default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_best.subset.l2.x">best.subset.L2.x</code></td>
<td>
<p>Best subset context-level covariates. A character
vector containing the column names of the context-level variables in
<code>survey</code> and <code>census</code> to be used by the best subset classifier.
If <code>NULL</code> and <code>best.subset</code> is set to <code>TRUE</code>, then best
subset uses the variables specified in <code>L2.x</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_lasso.l2.x">lasso.L2.x</code></td>
<td>
<p>Lasso context-level covariates. A character vector
containing the column names of the context-level variables in
<code>survey</code> and <code>census</code> to be used by the lasso classifier. If
<code>NULL</code> and <code>lasso</code> is set to <code>TRUE</code>, then lasso uses the
variables specified in <code>L2.x</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_gb.l2.x">gb.L2.x</code></td>
<td>
<p>GB context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> to be used by the GB classifier. If <code>NULL</code> and <code>gb</code>
is set to <code>TRUE</code>, then GB uses the variables specified in <code>L2.x</code>.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_svm.l2.x">svm.L2.x</code></td>
<td>
<p>SVM context-level covariates. A character vector containing
the column names of the context-level variables in <code>survey</code> and
<code>census</code> to be used by the SVM classifier. If <code>NULL</code> and
<code>svm</code> is set to <code>TRUE</code>, then SVM uses the variables specified in
<code>L2.x</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_mrp.l2.x">mrp.L2.x</code></td>
<td>
<p>MRP context-level covariates. A character vector containing
the column names of the context-level variables in <code>survey</code> and
<code>census</code> to be used by the MRP classifier. The character vector
<em>empty</em> if no context-level variables should be used by the MRP
classifier. If <code>NULL</code> and <code>mrp</code> is set to <code>TRUE</code>, then MRP
uses the variables specified in <code>L2.x</code>. Default is <code>NULL</code>. Note:
For the empty MrP model, set <code>L2.x = NULL</code> and <code>mrp.L2.x = ""</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_gb.l2.unit">gb.L2.unit</code></td>
<td>
<p>GB L2.unit. A logical argument indicating whether
<code>L2.unit</code> should be included in the GB classifier. Default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_gb.l2.reg">gb.L2.reg</code></td>
<td>
<p>GB L2.reg. A logical argument indicating whether
<code>L2.reg</code> should be included in the GB classifier. Default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_lasso.lambda">lasso.lambda</code></td>
<td>
<p>Lasso penalty parameter. A numeric <code>vector</code> of
non-negative values. The penalty parameter controls the shrinkage of the
context-level variables in the lasso model. Default is a sequence with
minimum 0.1 and maximum 250 that is equally spaced on the log-scale. The
number of values is controlled by the <code>lasso.n.iter</code> parameter.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_lasso.n.iter">lasso.n.iter</code></td>
<td>
<p>Lasso number of lambda values. An integer-valued scalar
specifying the number of lambda values to search over. Default is
<code class="reqn">100</code>. <em>Note:</em> Is ignored if a vector of <code>lasso.lambda</code>
values is provided.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_uncertainty">uncertainty</code></td>
<td>
<p>Uncertainty estimates. A logical argument indicating
whether uncertainty estimates should be computed. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="error_checks_+3A_boot.iter">boot.iter</code></td>
<td>
<p>Number of bootstrap iterations. An integer argument
indicating the number of bootstrap iterations to be computed. Will be
ignored unless <code>uncertainty = TRUE</code>. Default is <code>200</code> if
<code>uncertainty = TRUE</code> and <code>NULL</code> if <code>uncertainty = FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for detection of errors in autoMrP() call.
</p>

<hr>
<h2 id='f1_score'>Estimates the inverse f1 score, i.e. 0 is the best score and 1 the worst.</h2><span id='topic+f1_score'></span>

<h3>Description</h3>

<p><code>f1_score()</code> estimates the inverse f1 scores on the individual and state
levels.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>f1_score(pred, data.valid, y, L2.unit)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="f1_score_+3A_pred">pred</code></td>
<td>
<p>Predictions of outcome. A numeric vector of outcome predictions.</p>
</td></tr>
<tr><td><code id="f1_score_+3A_data.valid">data.valid</code></td>
<td>
<p>Test data set. A tibble of data that was not used for
prediction.</p>
</td></tr>
<tr><td><code id="f1_score_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable.</p>
</td></tr>
<tr><td><code id="f1_score_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column name
of the geographic unit in <code>survey</code> and <code>census</code> at which outcomes
should be aggregated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a tibble containing two f1 prediction errors. The first is
measured at the level of individuals and the second is measured at the
context level. The tibble dimensions are 2x3 with variables: measure, value
and level.
</p>

<hr>
<h2 id='gb_classifier'>GB classifier</h2><span id='topic+gb_classifier'></span>

<h3>Description</h3>

<p><code>gb_classifier</code> applies gradient boosting classification to a data set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gb_classifier(
  y,
  form,
  distribution,
  data.train,
  n.trees,
  interaction.depth,
  n.minobsinnode,
  shrinkage,
  verbose = c(TRUE, FALSE)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gb_classifier_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="gb_classifier_+3A_form">form</code></td>
<td>
<p>Model formula. A two-sided linear formula describing
the model to be fit, with the outcome on the LHS and the covariates
separated by + operators on the RHS.</p>
</td></tr>
<tr><td><code id="gb_classifier_+3A_distribution">distribution</code></td>
<td>
<p>Model distribution. A character string specifying the
name of the distribution to be used.</p>
</td></tr>
<tr><td><code id="gb_classifier_+3A_data.train">data.train</code></td>
<td>
<p>Training data. A data.frame containing the training data
used to train the model.</p>
</td></tr>
<tr><td><code id="gb_classifier_+3A_n.trees">n.trees</code></td>
<td>
<p>Total number of trees. An integer-valued scalar specifying
the total number of trees to be fit.</p>
</td></tr>
<tr><td><code id="gb_classifier_+3A_interaction.depth">interaction.depth</code></td>
<td>
<p>Interaction depth. An integer-valued scalar
specifying the maximum depth of each tree.</p>
</td></tr>
<tr><td><code id="gb_classifier_+3A_n.minobsinnode">n.minobsinnode</code></td>
<td>
<p>Minimum number of observations in terminal nodes. An
integer-valued scalar specifying the minimum number of observations in the
terminal nodes of the trees.</p>
</td></tr>
<tr><td><code id="gb_classifier_+3A_shrinkage">shrinkage</code></td>
<td>
<p>Learning rate. A numeric scalar specifying the shrinkage or
learning rate applied to each tree in the expansion.</p>
</td></tr>
<tr><td><code id="gb_classifier_+3A_verbose">verbose</code></td>
<td>
<p>Verbose output. A logical vector indicating whether or not
verbose output should be printed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A gradient tree boosting model. A <code><a href="gbm.html#topic+gbm">gbm</a></code> object.
</p>

<hr>
<h2 id='gb_classifier_update'>GB classifier update</h2><span id='topic+gb_classifier_update'></span>

<h3>Description</h3>

<p><code>gb_classifier_update()</code> grows additional trees in gradient tree
boosting ensemble.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gb_classifier_update(object, n.new.trees, verbose = c(TRUE, FALSE))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gb_classifier_update_+3A_object">object</code></td>
<td>
<p>Gradient tree boosting output. A gbm object.</p>
</td></tr>
<tr><td><code id="gb_classifier_update_+3A_n.new.trees">n.new.trees</code></td>
<td>
<p>Number of additional trees to grow. A numeric scalar.</p>
</td></tr>
<tr><td><code id="gb_classifier_update_+3A_verbose">verbose</code></td>
<td>
<p>Verbose output. A logical vector indicating whether or not
verbose output should be printed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An updated gradient tree boosting model.
A <code><a href="gbm.html#topic+gbm.more">gbm.more</a></code> object.
</p>

<hr>
<h2 id='lasso_classifier'>Lasso classifier</h2><span id='topic+lasso_classifier'></span>

<h3>Description</h3>

<p><code>lasso_classifier</code> applies lasso classification to a data set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lasso_classifier(
  L2.fix,
  L1.re,
  data.train,
  lambda,
  model.family,
  y,
  verbose = c(TRUE, FALSE)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="lasso_classifier_+3A_l2.fix">L2.fix</code></td>
<td>
<p>Fixed effects. A two-sided linear formula describing
the fixed effects part of the model, with the outcome on the LHS and
the fixed effects separated by + operators on the RHS.</p>
</td></tr>
<tr><td><code id="lasso_classifier_+3A_l1.re">L1.re</code></td>
<td>
<p>Random effects. A named list object, with the random effects
providing the names of the list elements and ~ 1 being the list elements.</p>
</td></tr>
<tr><td><code id="lasso_classifier_+3A_data.train">data.train</code></td>
<td>
<p>Training data. A data.frame containing the training data
used to train the model.</p>
</td></tr>
<tr><td><code id="lasso_classifier_+3A_lambda">lambda</code></td>
<td>
<p>Tuning parameter. Lambda is the penalty parameter that controls
the shrinkage of fixed effects.</p>
</td></tr>
<tr><td><code id="lasso_classifier_+3A_model.family">model.family</code></td>
<td>
<p>Model family. A variable indicating the model family
to be used by glmmLasso. Defaults to binomial(link = &quot;probit&quot;).</p>
</td></tr>
<tr><td><code id="lasso_classifier_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="lasso_classifier_+3A_verbose">verbose</code></td>
<td>
<p>Verbose output. A logical vector indicating whether or not
verbose output should be printed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A multilevel lasso model. An <code><a href="glmmLasso.html#topic+glmmLasso">glmmLasso</a></code>
object.
</p>

<hr>
<h2 id='log_spaced'>Sequence that is equally spaced on the log scale</h2><span id='topic+log_spaced'></span>

<h3>Description</h3>

<p>Sequence that is equally spaced on the log scale
</p>


<h3>Usage</h3>

<pre><code class='language-R'>log_spaced(min, max, n)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="log_spaced_+3A_min">min</code></td>
<td>
<p>The minimum value of the sequence. A positive numeric scalar (min
&gt; 0).</p>
</td></tr>
<tr><td><code id="log_spaced_+3A_max">max</code></td>
<td>
<p>The maximum value of the sequence. a positive numeric scalar (max
&gt; 0).</p>
</td></tr>
<tr><td><code id="log_spaced_+3A_n">n</code></td>
<td>
<p>The length of the sequence. An integer valued scalar.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a numeric vector with length specified in argument <code>n</code>.
The vector elements are equally spaced on the log-scale.
</p>

<hr>
<h2 id='loss_function'>Estimates loss value.</h2><span id='topic+loss_function'></span>

<h3>Description</h3>

<p><code>loss_function()</code> estimates the loss based on a loss function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loss_function(
  pred,
  data.valid,
  loss.unit = c("individuals", "L2 units"),
  loss.fun = c("MSE", "MAE", "cross-entropy"),
  y,
  L2.unit
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="loss_function_+3A_pred">pred</code></td>
<td>
<p>Predictions of outcome. A numeric vector of outcome predictions.</p>
</td></tr>
<tr><td><code id="loss_function_+3A_data.valid">data.valid</code></td>
<td>
<p>Test data set. A tibble of data that was not used for
prediction.</p>
</td></tr>
<tr><td><code id="loss_function_+3A_loss.unit">loss.unit</code></td>
<td>
<p>Loss function unit. A character-valued scalar indicating
whether performance loss should be evaluated at the level of individual
respondents (<code>individuals</code>) or geographic units (<code>L2 units</code>).
Default is <code>individuals</code>.</p>
</td></tr>
<tr><td><code id="loss_function_+3A_loss.fun">loss.fun</code></td>
<td>
<p>Loss function. A character-valued scalar indicating whether
prediction loss should be measured by the mean squared error (<code>MSE</code>)
or the mean absolute error (<code>MAE</code>). Default is <code>MSE</code>.</p>
</td></tr>
<tr><td><code id="loss_function_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable.</p>
</td></tr>
<tr><td><code id="loss_function_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column name
of the geographic unit in <code>survey</code> and <code>census</code> at which outcomes
should be aggregated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a tibble with number of rows equal to the number of loss
functions tested (defaults to 4 for cross-entropy, f1, MSE, and msfe). The
number of columns is 2 where the first is called measure and contains the
names of the loss-functions and the second is called value and contains the
loss-function scores.
</p>

<hr>
<h2 id='loss_score_ranking'>Ranks tuning parameters according to loss functions</h2><span id='topic+loss_score_ranking'></span>

<h3>Description</h3>

<p><code>loss_score_ranking()</code> ranks tuning parameters according to the scores
received in multiple loss functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loss_score_ranking(score, loss.fun)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="loss_score_ranking_+3A_score">score</code></td>
<td>
<p>A data set containing loss function names, the loss function
values, and the tuning parameter values.</p>
</td></tr>
<tr><td><code id="loss_score_ranking_+3A_loss.fun">loss.fun</code></td>
<td>
<p>Loss function. A character-valued scalar indicating whether
prediction loss should be measured by the mean squared error (<code>MSE</code>)
or the mean absolute error (<code>MAE</code>). Default is <code>MSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a tibble containing the parameter grid as well as a rank
column that corresponds to the cross-validation rank of a parameter
combination across all loss function scores.
</p>

<hr>
<h2 id='mean_absolute_error'>Estimates the mean absolute prediction error.</h2><span id='topic+mean_absolute_error'></span>

<h3>Description</h3>

<p><code>mean_absolute_error()</code> estimates the mean absolute error for the
desired loss unit.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mean_absolute_error(pred, data.valid, y, L2.unit)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mean_absolute_error_+3A_pred">pred</code></td>
<td>
<p>Predictions of outcome. A numeric vector of outcome predictions.</p>
</td></tr>
<tr><td><code id="mean_absolute_error_+3A_data.valid">data.valid</code></td>
<td>
<p>Test data set. A tibble of data that was not used for
prediction.</p>
</td></tr>
<tr><td><code id="mean_absolute_error_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable.</p>
</td></tr>
<tr><td><code id="mean_absolute_error_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column name
of the geographic unit in <code>survey</code> and <code>census</code> at which outcomes
should be aggregated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a tibble containing two mean absolute prediction errors. The
first is measured at the level of individuals and the second is measured at
the context level. The tibble dimensions are 2x3 with variables: measure,
value and level.
</p>

<hr>
<h2 id='mean_squared_error'>Estimates the mean squared prediction error.</h2><span id='topic+mean_squared_error'></span>

<h3>Description</h3>

<p><code>mean_squared_error()</code> estimates the mean squared error for the desired
loss unit.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mean_squared_error(pred, data.valid, y, L2.unit)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mean_squared_error_+3A_pred">pred</code></td>
<td>
<p>Predictions of outcome. A numeric vector of outcome predictions.</p>
</td></tr>
<tr><td><code id="mean_squared_error_+3A_data.valid">data.valid</code></td>
<td>
<p>Test data set. A tibble of data that was not used for
prediction.</p>
</td></tr>
<tr><td><code id="mean_squared_error_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable.</p>
</td></tr>
<tr><td><code id="mean_squared_error_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column name
of the geographic unit in <code>survey</code> and <code>census</code> at which outcomes
should be aggregated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a tibble containing two mean squared prediction errors. The
first is measured at the level of individuals and the second is measured at
the context level. The tibble dimensions are 2x3 with variables: measure,
value and level.
</p>

<hr>
<h2 id='mean_squared_false_error'>Estimates the mean squared false error.</h2><span id='topic+mean_squared_false_error'></span>

<h3>Description</h3>

<p><code>msfe()</code> estimates the inverse f1 scores on the individual and state
levels.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mean_squared_false_error(pred, data.valid, y, L2.unit)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mean_squared_false_error_+3A_pred">pred</code></td>
<td>
<p>Predictions of outcome. A numeric vector of outcome predictions.</p>
</td></tr>
<tr><td><code id="mean_squared_false_error_+3A_data.valid">data.valid</code></td>
<td>
<p>Test data set. A tibble of data that was not used for
prediction.</p>
</td></tr>
<tr><td><code id="mean_squared_false_error_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable.</p>
</td></tr>
<tr><td><code id="mean_squared_false_error_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column name
of the geographic unit in <code>survey</code> and <code>census</code> at which outcomes
should be aggregated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a tibble containing two mean squared false prediction errors.
The first is measured at the level of individuals and the second is
measured at the context level. The tibble dimensions are 2x3 with
variables: measure, value and level.
</p>

<hr>
<h2 id='model_list'>A list of models for the best subset selection.</h2><span id='topic+model_list'></span>

<h3>Description</h3>

<p><code>model_list()</code> generates an exhaustive list of lme4 model formulas from
the individual level and context level variables as well as geographic unit
variables to be iterated over in best subset selection.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>model_list(y, L1.x, L2.x, L2.unit, L2.reg = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="model_list_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable.</p>
</td></tr>
<tr><td><code id="model_list_+3A_l1.x">L1.x</code></td>
<td>
<p>Individual-level covariates. A character vector containing the
column names of the individual-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. Note that geographic unit
is specified in argument <code>L2.unit</code>.</p>
</td></tr>
<tr><td><code id="model_list_+3A_l2.x">L2.x</code></td>
<td>
<p>Context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>.</p>
</td></tr>
<tr><td><code id="model_list_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column name
of the geographic unit in <code>survey</code> and <code>census</code> at which outcomes
should be aggregated.</p>
</td></tr>
<tr><td><code id="model_list_+3A_l2.reg">L2.reg</code></td>
<td>
<p>Geographic region. A character scalar containing the column
name of the geographic region in <code>survey</code> and <code>census</code> by which
geographic units are grouped (<code>L2.unit</code> must be nested within
<code>L2.reg</code>). Default is <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list with the number of elements equal to 2^k where k is
the number context-level variables. Each element is of class formula.
</p>

<hr>
<h2 id='model_list_pca'>A list of models for the best subset selection with PCA.</h2><span id='topic+model_list_pca'></span>

<h3>Description</h3>

<p><code>model_list_pca()</code> generates an exhaustive list of lme4 model formulas
from the individual level and context level principal components as well as
geographic unit variables to be iterated over in best subset selection with
principal components.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>model_list_pca(y, L1.x, L2.x, L2.unit, L2.reg = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="model_list_pca_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable.</p>
</td></tr>
<tr><td><code id="model_list_pca_+3A_l1.x">L1.x</code></td>
<td>
<p>Individual-level covariates. A character vector containing the
column names of the individual-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. Note that geographic unit
is specified in argument <code>L2.unit</code>.</p>
</td></tr>
<tr><td><code id="model_list_pca_+3A_l2.x">L2.x</code></td>
<td>
<p>Context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>.</p>
</td></tr>
<tr><td><code id="model_list_pca_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column name
of the geographic unit in <code>survey</code> and <code>census</code> at which outcomes
should be aggregated.</p>
</td></tr>
<tr><td><code id="model_list_pca_+3A_l2.reg">L2.reg</code></td>
<td>
<p>Geographic region. A character scalar containing the column
name of the geographic region in <code>survey</code> and <code>census</code> by which
geographic units are grouped (<code>L2.unit</code> must be nested within
<code>L2.reg</code>). Default is <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list with the number of elements k+1 where k is the number
of context-level variables. Each element is of class formula. The first
element is a model with context-level variables and the following models
iteratively add the principal components as context-level variables.
</p>

<hr>
<h2 id='multicore'>Register cores for multicore computing</h2><span id='topic+multicore'></span>

<h3>Description</h3>

<p><code>multicore()</code> registers cores for parallel processing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multicore(cores = 1, type, cl = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="multicore_+3A_cores">cores</code></td>
<td>
<p>Number of cores to be used. An integer. Default is <code>1</code>.</p>
</td></tr>
<tr><td><code id="multicore_+3A_type">type</code></td>
<td>
<p>Whether to start or end parallel processing. A character string.
The possible values are <code>open</code>, <code>close</code>.</p>
</td></tr>
<tr><td><code id="multicore_+3A_cl">cl</code></td>
<td>
<p>The registered cluster. Default is <code>NULL</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called to register or un-register clusters for
parallel processing.
</p>

<hr>
<h2 id='output_table'>A table for the summary  function</h2><span id='topic+output_table'></span>

<h3>Description</h3>

<p><code>output_table()</code> ...
</p>


<h3>Usage</h3>

<pre><code class='language-R'>output_table(object, col.names, format, digits)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="output_table_+3A_object">object</code></td>
<td>
<p>An <code>autoMrP()</code> object for which a summary is desired.</p>
</td></tr>
<tr><td><code id="output_table_+3A_col.names">col.names</code></td>
<td>
<p>The column names of the table. A</p>
</td></tr>
<tr><td><code id="output_table_+3A_format">format</code></td>
<td>
<p>The table format. A character string passed to
<code><a href="knitr.html#topic+kable">kable</a></code>. Default is <code>simple</code>.</p>
</td></tr>
<tr><td><code id="output_table_+3A_digits">digits</code></td>
<td>
<p>The number of digits to be displayed. An integer scalar.
Default is <code>4</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, prints a table to the console.
</p>

<hr>
<h2 id='plot.autoMrP'>A plot method for autoMrP objects. Plots unit-level preference estiamtes.</h2><span id='topic+plot.autoMrP'></span>

<h3>Description</h3>

<p><code>plot.autoMrP()</code> plots unit-level preference estimates and error bars.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'autoMrP'
plot(x, algorithm = "ebma", ci.lvl = 0.95, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.autoMrP_+3A_x">x</code></td>
<td>
<p>An <code>autoMrP()</code> object.</p>
</td></tr>
<tr><td><code id="plot.autoMrP_+3A_algorithm">algorithm</code></td>
<td>
<p>The algorithm/classifier fo which preference estimates are
desired. A character-valued scalar indicating either <code>ebma</code> or the
classifier to be used. Allowed choices are: &quot;ebma&quot;, &quot;best_subset&quot;, &quot;lasso&quot;,
&quot;pca&quot;, &quot;gb&quot;, &quot;svm&quot;, and &quot;mrp&quot;. Default is <code>ebma</code>.</p>
</td></tr>
<tr><td><code id="plot.autoMrP_+3A_ci.lvl">ci.lvl</code></td>
<td>
<p>The level of the confidence intervals. A proportion. Default is
<code>0.95</code>. Confidence intervals are based on bootstrapped estimates and
will not be printed if bootstrapping was not carried out.</p>
</td></tr>
<tr><td><code id="plot.autoMrP_+3A_...">...</code></td>
<td>
<p>Additional arguments affecting the summary produced.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>ggplot2</code> object of the preference estimates for the
selected classifier.
</p>

<hr>
<h2 id='post_stratification'>Apply post-stratification to classifiers.</h2><span id='topic+post_stratification'></span>

<h3>Description</h3>

<p>Apply post-stratification to classifiers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>post_stratification(
  y,
  L1.x,
  L2.x,
  L2.unit,
  L2.reg,
  best.subset.opt,
  lasso.opt,
  lasso.L2.x,
  pca.opt,
  gb.opt,
  svm.opt,
  svm.L2.reg,
  svm.L2.unit,
  svm.L2.x,
  mrp.include,
  n.minobsinnode,
  L2.unit.include,
  L2.reg.include,
  kernel,
  mrp.L2.x,
  data,
  ebma.fold,
  census,
  verbose,
  deep.mrp,
  deep.L2.x,
  deep.L2.reg,
  deep.splines
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="post_stratification_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_l1.x">L1.x</code></td>
<td>
<p>Individual-level covariates. A character vector containing the
column names of the individual-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. Note that geographic unit
is specified in argument <code>L2.unit</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_l2.x">L2.x</code></td>
<td>
<p>Context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. To exclude context-level
variables, set <code>L2.x = NULL</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column
name of the geographic unit in <code>survey</code> and <code>census</code> at which
outcomes should be aggregated.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_l2.reg">L2.reg</code></td>
<td>
<p>Geographic region. A character scalar containing the column
name of the geographic region in <code>survey</code> and <code>census</code> by which
geographic units are grouped (<code>L2.unit</code> must be nested within
<code>L2.reg</code>). Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_best.subset.opt">best.subset.opt</code></td>
<td>
<p>Optimal tuning parameters from best subset selection
classifier. A list returned by <code>run_best_subset()</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_lasso.opt">lasso.opt</code></td>
<td>
<p>Optimal tuning parameters from lasso classifier A list
returned by <code>run_lasso()</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_lasso.l2.x">lasso.L2.x</code></td>
<td>
<p>Lasso context-level covariates. A character vector
containing the column names of the context-level variables in
<code>survey</code> and <code>census</code> to be used by the lasso classifier. If
<code>NULL</code> and <code>lasso</code> is set to <code>TRUE</code>, then lasso uses the
variables specified in <code>L2.x</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_pca.opt">pca.opt</code></td>
<td>
<p>Optimal tuning parameters from best subset selection with
principal components classifier A list returned by <code>run_pca()</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_gb.opt">gb.opt</code></td>
<td>
<p>Optimal tuning parameters from gradient tree boosting
classifier A list returned by <code>run_gb()</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_svm.opt">svm.opt</code></td>
<td>
<p>Optimal tuning parameters from support vector machine
classifier A list returned by <code>run_svm()</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_svm.l2.reg">svm.L2.reg</code></td>
<td>
<p>SVM L2.reg. A logical argument indicating whether
<code>L2.reg</code> should be included in the SVM classifier. Default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_svm.l2.unit">svm.L2.unit</code></td>
<td>
<p>SVM L2.unit. A logical argument indicating whether
<code>L2.unit</code> should be included in the SVM classifier. Default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_svm.l2.x">svm.L2.x</code></td>
<td>
<p>SVM context-level covariates. A character vector containing
the column names of the context-level variables in <code>survey</code> and
<code>census</code> to be used by the SVM classifier. If <code>NULL</code> and
<code>svm</code> is set to <code>TRUE</code>, then SVM uses the variables specified in
<code>L2.x</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_mrp.include">mrp.include</code></td>
<td>
<p>Whether to run MRP classifier. A logical argument
indicating whether the standard MRP classifier should be used for
predicting outcome <code>y</code>. Passed from <code>autoMrP()</code> argument
<code>mrp</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_n.minobsinnode">n.minobsinnode</code></td>
<td>
<p>GB minimum number of observations in the terminal
nodes. An integer-valued scalar specifying the minimum number of
observations that each terminal node of the trees must contain. Passed from
<code>autoMrP()</code> argument <code>gb.n.minobsinnode</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_l2.unit.include">L2.unit.include</code></td>
<td>
<p>GB L2.unit. A logical argument indicating whether
<code>L2.unit</code> should be included in the GB classifier. Passed from
<code>autoMrP()</code> argument <code>gb.L2.unit</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_l2.reg.include">L2.reg.include</code></td>
<td>
<p>A logical argument indicating whether <code>L2.reg</code>
should be included in the GB classifier. Passed from <code>autoMrP()</code>
argument <code>GB L2.reg</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_kernel">kernel</code></td>
<td>
<p>SVM kernel. A character-valued scalar specifying the kernel to
be used by SVM. The possible values are <code>linear</code>, <code>polynomial</code>,
<code>radial</code>, and <code>sigmoid</code>. Passed from <code>autoMrP()</code> argument
<code>svm.kernel</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_mrp.l2.x">mrp.L2.x</code></td>
<td>
<p>MRP context-level covariates. A character vector containing
the column names of the context-level variables in <code>survey</code> and
<code>census</code> to be used by the MRP classifier. The character vector
<em>empty</em> if no context-level variables should be used by the MRP
classifier. If <code>NULL</code> and <code>mrp</code> is set to <code>TRUE</code>, then MRP
uses the variables specified in <code>L2.x</code>. Default is <code>NULL</code>. Note:
For the empty MrP model, set <code>L2.x = NULL</code> and <code>mrp.L2.x = ""</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_data">data</code></td>
<td>
<p>A data.frame containing the survey data used in classifier
training.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_ebma.fold">ebma.fold</code></td>
<td>
<p>A data.frame containing the data not used in classifier
training.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_census">census</code></td>
<td>
<p>Census data. A <code>data.frame</code> whose column names include
<code>L1.x</code>, <code>L2.x</code>, <code>L2.unit</code>, if specified, <code>L2.reg</code> and
<code>pcs</code>, and either <code>bin.proportion</code> or <code>bin.size</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_verbose">verbose</code></td>
<td>
<p>Verbose output. A logical argument indicating whether or not
verbose output should be printed. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_deep.mrp">deep.mrp</code></td>
<td>
<p>Deep MRP classifier. A logical argument indicating whether
the deep MRP classifier should be used for predicting outcome <code>y</code>.
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_deep.l2.x">deep.L2.x</code></td>
<td>
<p>Deep MRP context-level covariates. A character vector
containing the column names of the context-level variables in <code>survey</code>
and <code>census</code> to be used by the deep MRP classifier. If <code>NULL</code> and
<code>deep.mrp</code> is set to <code>TRUE</code>, then deep MRP uses the variables
specified in <code>L2.x</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_deep.l2.reg">deep.L2.reg</code></td>
<td>
<p>Deep MRP L2.reg. A logical argument indicating whether
<code>L2.reg</code> should be included in the deep MRP classifier. Default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="post_stratification_+3A_deep.splines">deep.splines</code></td>
<td>
<p>Deep MRP splines. A logical argument indicating whether
splines should be used in the deep MRP classifier. Default is <code>TRUE</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='predict_glmmLasso'>Predicts on newdata from glmmLasso objects</h2><span id='topic+predict_glmmLasso'></span>

<h3>Description</h3>

<p><code>glmmLasso()</code> predicts on newdata objects from a glmmLasso object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predict_glmmLasso(census, m, L1.x, lasso.L2.x, L2.unit, L2.reg)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict_glmmLasso_+3A_census">census</code></td>
<td>
<p>Census data. A <code>data.frame</code> whose column names include
<code>L1.x</code>, <code>L2.x</code>, <code>L2.unit</code>, if specified, <code>L2.reg</code> and
<code>pcs</code>, and either <code>bin.proportion</code> or <code>bin.size</code>.</p>
</td></tr>
<tr><td><code id="predict_glmmLasso_+3A_m">m</code></td>
<td>
<p>A <code>glmmLasso()</code> object.</p>
</td></tr>
<tr><td><code id="predict_glmmLasso_+3A_l1.x">L1.x</code></td>
<td>
<p>Individual-level covariates. A character vector containing the
column names of the individual-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. Note that geographic unit
is specified in argument <code>L2.unit</code>.</p>
</td></tr>
<tr><td><code id="predict_glmmLasso_+3A_lasso.l2.x">lasso.L2.x</code></td>
<td>
<p>Lasso context-level covariates. A character vector
containing the column names of the context-level variables in
<code>survey</code> and <code>census</code> to be used by the lasso classifier. If
<code>NULL</code> and <code>lasso</code> is set to <code>TRUE</code>, then lasso uses the
variables specified in <code>L2.x</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="predict_glmmLasso_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column
name of the geographic unit in <code>survey</code> and <code>census</code> at which
outcomes should be aggregated.</p>
</td></tr>
<tr><td><code id="predict_glmmLasso_+3A_l2.reg">L2.reg</code></td>
<td>
<p>Geographic region. A character scalar containing the column
name of the geographic region in <code>survey</code> and <code>census</code> by which
geographic units are grouped (<code>L2.unit</code> must be nested within
<code>L2.reg</code>). Default is <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a numeric vector of predictions from a <code>glmmLasso()</code>
object.
</p>

<hr>
<h2 id='quiet'>Suppress cat in external package</h2><span id='topic+quiet'></span>

<h3>Description</h3>

<p><code>quiet()</code> suppresses cat output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>quiet(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="quiet_+3A_x">x</code></td>
<td>
<p>Input. It can be any kind.</p>
</td></tr>
</table>

<hr>
<h2 id='run_best_subset'>Apply best subset classifier to MrP.</h2><span id='topic+run_best_subset'></span>

<h3>Description</h3>

<p><code>run_best_subset</code> is a wrapper function that applies the best subset
classifier to a list of models provided by the user, evaluates the models'
prediction performance, and chooses the best-performing model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_best_subset(
  y,
  L1.x,
  L2.x,
  L2.unit,
  L2.reg,
  loss.unit,
  loss.fun,
  data,
  verbose,
  cores
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_best_subset_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="run_best_subset_+3A_l1.x">L1.x</code></td>
<td>
<p>Individual-level covariates. A character vector containing the
column names of the individual-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. Note that geographic unit
is specified in argument <code>L2.unit</code>.</p>
</td></tr>
<tr><td><code id="run_best_subset_+3A_l2.x">L2.x</code></td>
<td>
<p>Context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. To exclude context-level
variables, set <code>L2.x = NULL</code>.</p>
</td></tr>
<tr><td><code id="run_best_subset_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column
name of the geographic unit in <code>survey</code> and <code>census</code> at which
outcomes should be aggregated.</p>
</td></tr>
<tr><td><code id="run_best_subset_+3A_l2.reg">L2.reg</code></td>
<td>
<p>Geographic region. A character scalar containing the column
name of the geographic region in <code>survey</code> and <code>census</code> by which
geographic units are grouped (<code>L2.unit</code> must be nested within
<code>L2.reg</code>). Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="run_best_subset_+3A_loss.unit">loss.unit</code></td>
<td>
<p>Loss function unit. A character-valued scalar indicating
whether performance loss should be evaluated at the level of individual
respondents (<code>individuals</code>), geographic units (<code>L2 units</code>) or at
both levels. Default is <code>c("individuals", "L2 units")</code>. With multiple
loss units, parameters are ranked for each loss unit and the loss unit with
the lowest rank sum is chosen. Ties are broken according to the order in
the search grid.</p>
</td></tr>
<tr><td><code id="run_best_subset_+3A_loss.fun">loss.fun</code></td>
<td>
<p>Loss function. A character-valued scalar indicating whether
prediction loss should be measured by the mean squared error (<code>MSE</code>),
the mean absolute error (<code>MAE</code>), binary cross-entropy
(<code>cross-entropy</code>), mean squared false error (<code>msfe</code>), the f1
score (<code>f1</code>), or a combination thereof. Default is <code>c("MSE",
"cross-entropy","msfe", "f1")</code>. With multiple loss functions, parameters
are ranked for each loss function and the parameter combination with the
lowest rank sum is chosen. Ties are broken according to the order in the
search grid.</p>
</td></tr>
<tr><td><code id="run_best_subset_+3A_data">data</code></td>
<td>
<p>Data for cross-validation. A <code>list</code> of <code class="reqn">k</code>
<code>data.frames</code>, one for each fold to be used in <code class="reqn">k</code>-fold
cross-validation.</p>
</td></tr>
<tr><td><code id="run_best_subset_+3A_verbose">verbose</code></td>
<td>
<p>Verbose output. A logical argument indicating whether or not
verbose output should be printed. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="run_best_subset_+3A_cores">cores</code></td>
<td>
<p>The number of cores to be used. An integer indicating the number
of processor cores used for parallel computing. Default is 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A model formula of the winning best subset classifier model.
</p>

<hr>
<h2 id='run_best_subset_mc'>Best subset multicore tuning.</h2><span id='topic+run_best_subset_mc'></span>

<h3>Description</h3>

<p><code>run_best_subset_mc</code> is called from within <code>run_best_subset</code>. It
tunes using multiple cores.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_best_subset_mc(
  y,
  L1.x,
  L2.x,
  L2.unit,
  L2.reg,
  loss.unit,
  loss.fun,
  data,
  cores,
  models,
  verbose
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_best_subset_mc_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="run_best_subset_mc_+3A_l1.x">L1.x</code></td>
<td>
<p>Individual-level covariates. A character vector containing the
column names of the individual-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. Note that geographic unit
is specified in argument <code>L2.unit</code>.</p>
</td></tr>
<tr><td><code id="run_best_subset_mc_+3A_l2.x">L2.x</code></td>
<td>
<p>Context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>.</p>
</td></tr>
<tr><td><code id="run_best_subset_mc_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column
name of the geographic unit in <code>survey</code> and <code>census</code> at which
outcomes should be aggregated.</p>
</td></tr>
<tr><td><code id="run_best_subset_mc_+3A_l2.reg">L2.reg</code></td>
<td>
<p>Geographic region. A character scalar containing the column
name of the geographic region in <code>survey</code> and <code>census</code> by which
geographic units are grouped (<code>L2.unit</code> must be nested within
<code>L2.reg</code>). Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="run_best_subset_mc_+3A_loss.unit">loss.unit</code></td>
<td>
<p>Loss function unit. A character-valued scalar indicating
whether performance loss should be evaluated at the level of individual
respondents (<code>individuals</code>) or geographic units (<code>L2 units</code>).
Default is <code>individuals</code>.</p>
</td></tr>
<tr><td><code id="run_best_subset_mc_+3A_loss.fun">loss.fun</code></td>
<td>
<p>Loss function. A character-valued scalar indicating whether
prediction loss should be measured by the mean squared error (<code>MSE</code>)
or the mean absolute error (<code>MAE</code>). Default is <code>MSE</code>.</p>
</td></tr>
<tr><td><code id="run_best_subset_mc_+3A_data">data</code></td>
<td>
<p>Data for cross-validation. A <code>list</code> of <code class="reqn">k</code>
<code>data.frames</code>, one for each fold to be used in <code class="reqn">k</code>-fold
cross-validation.</p>
</td></tr>
<tr><td><code id="run_best_subset_mc_+3A_cores">cores</code></td>
<td>
<p>The number of cores to be used. An integer indicating the number
of processor cores used for parallel computing. Default is 1.</p>
</td></tr>
<tr><td><code id="run_best_subset_mc_+3A_models">models</code></td>
<td>
<p>The models to perform best subset selection on. A list of model
formulas.</p>
</td></tr>
<tr><td><code id="run_best_subset_mc_+3A_verbose">verbose</code></td>
<td>
<p>Verbose output. A logical argument indicating whether or not
verbose output should be printed. Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The cross-validation errors for all models. A list.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# not yet

## End(Not run)
</code></pre>

<hr>
<h2 id='run_classifiers'>Optimal individual classifiers</h2><span id='topic+run_classifiers'></span>

<h3>Description</h3>

<p><code>run_classifiers</code> tunes classifiers, post-stratifies and carries out
EMBA.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_classifiers(
  y,
  L1.x,
  L2.x,
  mrp.L2.x,
  L2.unit,
  L2.reg,
  L2.x.scale,
  pcs,
  pc.names,
  folds,
  bin.proportion,
  bin.size,
  cv.folds,
  cv.data,
  ebma.fold,
  census,
  ebma.size,
  ebma.n.draws,
  k.folds,
  cv.sampling,
  loss.unit,
  loss.fun,
  best.subset,
  lasso,
  pca,
  gb,
  svm,
  mrp,
  deep.mrp,
  best.subset.L2.x,
  lasso.L2.x,
  pca.L2.x,
  gb.L2.x,
  svm.L2.x,
  gb.L2.unit,
  gb.L2.reg,
  svm.L2.unit,
  svm.L2.reg,
  deep.L2.x,
  deep.L2.reg,
  deep.splines,
  lasso.lambda,
  lasso.n.iter,
  gb.interaction.depth,
  gb.shrinkage,
  gb.n.trees.init,
  gb.n.trees.increase,
  gb.n.trees.max,
  gb.n.minobsinnode,
  svm.kernel,
  svm.gamma,
  svm.cost,
  ebma.tol,
  cores,
  verbose
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_classifiers_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_l1.x">L1.x</code></td>
<td>
<p>Individual-level covariates. A character vector containing the
column names of the individual-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. Note that geographic unit
is specified in argument <code>L2.unit</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_l2.x">L2.x</code></td>
<td>
<p>Context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. To exclude context-level
variables, set <code>L2.x = NULL</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_mrp.l2.x">mrp.L2.x</code></td>
<td>
<p>MRP context-level covariates. A character vector containing
the column names of the context-level variables in <code>survey</code> and
<code>census</code> to be used by the MRP classifier. The character vector
<em>empty</em> if no context-level variables should be used by the MRP
classifier. If <code>NULL</code> and <code>mrp</code> is set to <code>TRUE</code>, then MRP
uses the variables specified in <code>L2.x</code>. Default is <code>NULL</code>. Note:
For the empty MrP model, set <code>L2.x = NULL</code> and <code>mrp.L2.x = ""</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column
name of the geographic unit in <code>survey</code> and <code>census</code> at which
outcomes should be aggregated.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_l2.reg">L2.reg</code></td>
<td>
<p>Geographic region. A character scalar containing the column
name of the geographic region in <code>survey</code> and <code>census</code> by which
geographic units are grouped (<code>L2.unit</code> must be nested within
<code>L2.reg</code>). Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_l2.x.scale">L2.x.scale</code></td>
<td>
<p>Scale context-level covariates. A logical argument
indicating whether the context-level covariates should be normalized.
Default is <code>TRUE</code>. Note that if set to <code>FALSE</code>, then the
context-level covariates should be normalized prior to calling
<code>auto_MrP()</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_pcs">pcs</code></td>
<td>
<p>Principal components. A character vector containing the column
names of the principal components of the context-level variables in
<code>survey</code> and <code>census</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_pc.names">pc.names</code></td>
<td>
<p>A character vector of the principal component variable names
in the data.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_folds">folds</code></td>
<td>
<p>EBMA and cross-validation folds. A character scalar containing
the column name of the variable in <code>survey</code> that specifies the fold
to which an observation is allocated. The variable should contain integers
running from <code class="reqn">1</code> to <code class="reqn">k + 1</code>, where <code class="reqn">k</code> is the number of
cross-validation folds. Value <code class="reqn">k + 1</code> refers to the EBMA fold. Default
is <code>NULL</code>. <em>Note:</em> if <code>folds</code> is <code>NULL</code>, then
<code>ebma.size</code>, <code>k.folds</code>, and <code>cv.sampling</code> must be specified.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_bin.proportion">bin.proportion</code></td>
<td>
<p>Proportion of ideal types. A character scalar
containing the column name of the variable in <code>census</code> that indicates
the proportion of individuals by ideal type and geographic unit. Default is
<code>NULL</code>. <em>Note:</em> if <code>bin.proportion</code> is <code>NULL</code>, then
<code>bin.size</code> must be specified.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_bin.size">bin.size</code></td>
<td>
<p>Bin size of ideal types. A character scalar containing the
column name of the variable in <code>census</code> that indicates the bin size of
ideal types by geographic unit. Default is <code>NULL</code>. <em>Note:</em>
ignored if <code>bin.proportion</code> is provided, but must be specified
otherwise.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_cv.folds">cv.folds</code></td>
<td>
<p>Data for cross-validation. A <code>list</code> of <code class="reqn">k</code>
<code>data.frames</code>, one for each fold to be used in <code class="reqn">k</code>-fold
cross-validation.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_cv.data">cv.data</code></td>
<td>
<p>A data.frame containing the survey data used in classifier
training.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_ebma.fold">ebma.fold</code></td>
<td>
<p>A data.frame containing the data not used in classifier
training.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_census">census</code></td>
<td>
<p>Census data. A <code>data.frame</code> whose column names include
<code>L1.x</code>, <code>L2.x</code>, <code>L2.unit</code>, if specified, <code>L2.reg</code> and
<code>pcs</code>, and either <code>bin.proportion</code> or <code>bin.size</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_ebma.size">ebma.size</code></td>
<td>
<p>EBMA fold size. A number in the open unit interval
indicating the proportion of respondents to be allocated to the EBMA fold.
Default is <code class="reqn">1/3</code>. <em>Note:</em> ignored if <code>folds</code> is provided, but
must be specified otherwise.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_ebma.n.draws">ebma.n.draws</code></td>
<td>
<p>EBMA number of samples. An integer-valued scalar
specifying the number of bootstrapped samples to be drawn from the EBMA
fold and used for tuning EBMA. Default is <code class="reqn">100</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_k.folds">k.folds</code></td>
<td>
<p>Number of cross-validation folds. An integer-valued scalar
indicating the number of folds to be used in cross-validation. Default is
<code class="reqn">5</code>. <em>Note:</em> ignored if <code>folds</code> is provided, but must be
specified otherwise.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_cv.sampling">cv.sampling</code></td>
<td>
<p>Cross-validation sampling method. A character-valued
scalar indicating whether cross-validation folds should be created by
sampling individual respondents (<code>individuals</code>) or geographic units
(<code>L2 units</code>). Default is <code>L2 units</code>. <em>Note:</em> ignored if
<code>folds</code> is provided, but must be specified otherwise.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_loss.unit">loss.unit</code></td>
<td>
<p>Loss function unit. A character-valued scalar indicating
whether performance loss should be evaluated at the level of individual
respondents (<code>individuals</code>), geographic units (<code>L2 units</code>) or at
both levels. Default is <code>c("individuals", "L2 units")</code>. With multiple
loss units, parameters are ranked for each loss unit and the loss unit with
the lowest rank sum is chosen. Ties are broken according to the order in
the search grid.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_loss.fun">loss.fun</code></td>
<td>
<p>Loss function. A character-valued scalar indicating whether
prediction loss should be measured by the mean squared error (<code>MSE</code>),
the mean absolute error (<code>MAE</code>), binary cross-entropy
(<code>cross-entropy</code>), mean squared false error (<code>msfe</code>), the f1
score (<code>f1</code>), or a combination thereof. Default is <code>c("MSE",
"cross-entropy","msfe", "f1")</code>. With multiple loss functions, parameters
are ranked for each loss function and the parameter combination with the
lowest rank sum is chosen. Ties are broken according to the order in the
search grid.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_best.subset">best.subset</code></td>
<td>
<p>Best subset classifier. A logical argument indicating
whether the best subset classifier should be used for predicting outcome
<code>y</code>. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_lasso">lasso</code></td>
<td>
<p>Lasso classifier. A logical argument indicating whether the
lasso classifier should be used for predicting outcome <code>y</code>. Default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_pca">pca</code></td>
<td>
<p>PCA classifier. A logical argument indicating whether the PCA
classifier should be used for predicting outcome <code>y</code>. Default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_gb">gb</code></td>
<td>
<p>GB classifier. A logical argument indicating whether the GB
classifier should be used for predicting outcome <code>y</code>. Default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_svm">svm</code></td>
<td>
<p>SVM classifier. A logical argument indicating whether the SVM
classifier should be used for predicting outcome <code>y</code>. Default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_mrp">mrp</code></td>
<td>
<p>MRP classifier. A logical argument indicating whether the standard
MRP classifier should be used for predicting outcome <code>y</code>. Default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_deep.mrp">deep.mrp</code></td>
<td>
<p>Deep MRP classifier. A logical argument indicating whether
the deep MRP classifier should be used for predicting outcome <code>y</code>.
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_best.subset.l2.x">best.subset.L2.x</code></td>
<td>
<p>Best subset context-level covariates. A character
vector containing the column names of the context-level variables in
<code>survey</code> and <code>census</code> to be used by the best subset classifier.
If <code>NULL</code> and <code>best.subset</code> is set to <code>TRUE</code>, then best
subset uses the variables specified in <code>L2.x</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_lasso.l2.x">lasso.L2.x</code></td>
<td>
<p>Lasso context-level covariates. A character vector
containing the column names of the context-level variables in
<code>survey</code> and <code>census</code> to be used by the lasso classifier. If
<code>NULL</code> and <code>lasso</code> is set to <code>TRUE</code>, then lasso uses the
variables specified in <code>L2.x</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_pca.l2.x">pca.L2.x</code></td>
<td>
<p>PCA context-level covariates. A character vector containing
the column names of the context-level variables in <code>survey</code> and
<code>census</code> whose principal components are to be used by the PCA
classifier. If <code>NULL</code> and <code>pca</code> is set to <code>TRUE</code>, then PCA
uses the principal components of the variables specified in <code>L2.x</code>.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_gb.l2.x">gb.L2.x</code></td>
<td>
<p>GB context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> to be used by the GB classifier. If <code>NULL</code> and <code>gb</code>
is set to <code>TRUE</code>, then GB uses the variables specified in <code>L2.x</code>.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_svm.l2.x">svm.L2.x</code></td>
<td>
<p>SVM context-level covariates. A character vector containing
the column names of the context-level variables in <code>survey</code> and
<code>census</code> to be used by the SVM classifier. If <code>NULL</code> and
<code>svm</code> is set to <code>TRUE</code>, then SVM uses the variables specified in
<code>L2.x</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_gb.l2.unit">gb.L2.unit</code></td>
<td>
<p>GB L2.unit. A logical argument indicating whether
<code>L2.unit</code> should be included in the GB classifier. Default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_gb.l2.reg">gb.L2.reg</code></td>
<td>
<p>GB L2.reg. A logical argument indicating whether
<code>L2.reg</code> should be included in the GB classifier. Default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_svm.l2.unit">svm.L2.unit</code></td>
<td>
<p>SVM L2.unit. A logical argument indicating whether
<code>L2.unit</code> should be included in the SVM classifier. Default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_svm.l2.reg">svm.L2.reg</code></td>
<td>
<p>SVM L2.reg. A logical argument indicating whether
<code>L2.reg</code> should be included in the SVM classifier. Default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_deep.l2.x">deep.L2.x</code></td>
<td>
<p>Deep MRP context-level covariates. A character vector
containing the column names of the context-level variables in <code>survey</code>
and <code>census</code> to be used by the deep MRP classifier. If <code>NULL</code> and
<code>deep.mrp</code> is set to <code>TRUE</code>, then deep MRP uses the variables
specified in <code>L2.x</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_deep.l2.reg">deep.L2.reg</code></td>
<td>
<p>Deep MRP L2.reg. A logical argument indicating whether
<code>L2.reg</code> should be included in the deep MRP classifier. Default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_deep.splines">deep.splines</code></td>
<td>
<p>Deep MRP splines. A logical argument indicating whether
splines should be used in the deep MRP classifier. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_lasso.lambda">lasso.lambda</code></td>
<td>
<p>Lasso penalty parameter. A numeric <code>vector</code> of
non-negative values. The penalty parameter controls the shrinkage of the
context-level variables in the lasso model. Default is a sequence with
minimum 0.1 and maximum 250 that is equally spaced on the log-scale. The
number of values is controlled by the <code>lasso.n.iter</code> parameter.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_lasso.n.iter">lasso.n.iter</code></td>
<td>
<p>Lasso number of lambda values. An integer-valued scalar
specifying the number of lambda values to search over. Default is
<code class="reqn">100</code>. <em>Note:</em> Is ignored if a vector of <code>lasso.lambda</code>
values is provided.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_gb.interaction.depth">gb.interaction.depth</code></td>
<td>
<p>GB interaction depth. An integer-valued vector
whose values specify the interaction depth of GB. The interaction depth
defines the maximum depth of each tree grown (i.e., the maximum level of
variable interactions). Default is <code>c(1, 2, 3)</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_gb.shrinkage">gb.shrinkage</code></td>
<td>
<p>GB learning rate. A numeric vector whose values specify
the learning rate or step-size reduction of GB. Values between <code class="reqn">0.001</code>
and <code class="reqn">0.1</code> usually work, but a smaller learning rate typically requires
more trees. Default is <code>c(0.04, 0.01, 0.008, 0.005, 0.001)</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_gb.n.trees.init">gb.n.trees.init</code></td>
<td>
<p>GB initial total number of trees. An integer-valued
scalar specifying the initial number of total trees to fit by GB. Default
is <code class="reqn">50</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_gb.n.trees.increase">gb.n.trees.increase</code></td>
<td>
<p>GB increase in total number of trees. An
integer-valued scalar specifying by how many trees the total number of
trees to fit should be increased (until <code>gb.n.trees.max</code> is reached).
Default is <code class="reqn">50</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_gb.n.trees.max">gb.n.trees.max</code></td>
<td>
<p>GB maximum number of trees. An integer-valued scalar
specifying the maximum number of trees to fit by GB. Default is <code class="reqn">1000</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_gb.n.minobsinnode">gb.n.minobsinnode</code></td>
<td>
<p>GB minimum number of observations in the terminal
nodes. An integer-valued scalar specifying the minimum number of
observations that each terminal node of the trees must contain. Default is
<code class="reqn">20</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_svm.kernel">svm.kernel</code></td>
<td>
<p>SVM kernel. A character-valued scalar specifying the kernel
to be used by SVM. The possible values are <code>linear</code>,
<code>polynomial</code>, <code>radial</code>, and <code>sigmoid</code>. Default is
<code>radial</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_svm.gamma">svm.gamma</code></td>
<td>
<p>SVM kernel parameter. A numeric vector whose values specify
the gamma parameter in the SVM kernel. This parameter is needed for all
kernel types except linear. Default is a sequence with minimum = 1e-5,
maximum = 1e-1, and length = 20 that is equally spaced on the log-scale.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_svm.cost">svm.cost</code></td>
<td>
<p>SVM cost parameter. A numeric vector whose values specify the
cost of constraints violation in SVM. Default is a sequence with minimum =
0.5, maximum = 10, and length = 5 that is equally spaced on the log-scale.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_ebma.tol">ebma.tol</code></td>
<td>
<p>EBMA tolerance. A numeric vector containing the
tolerance values for improvements in the log-likelihood before the EM
algorithm stops optimization. Values should range at least from <code class="reqn">0.01</code>
to <code class="reqn">0.001</code>. Default is
<code>c(0.01, 0.005, 0.001, 0.0005, 0.0001, 0.00005, 0.00001)</code>.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_cores">cores</code></td>
<td>
<p>The number of cores to be used. An integer indicating the number
of processor cores used for parallel computing. Default is 1.</p>
</td></tr>
<tr><td><code id="run_classifiers_+3A_verbose">verbose</code></td>
<td>
<p>Verbose output. A logical argument indicating whether or not
verbose output should be printed. Default is <code>FALSE</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='run_gb'>Apply gradient boosting classifier to MrP.</h2><span id='topic+run_gb'></span>

<h3>Description</h3>

<p><code>run_gb</code> is a wrapper function that applies the gradient boosting
classifier to data provided by the user, evaluates prediction performance,
and chooses the best-performing model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_gb(
  y,
  L1.x,
  L2.x,
  L2.eval.unit,
  L2.unit,
  L2.reg,
  loss.unit,
  loss.fun,
  interaction.depth,
  shrinkage,
  n.trees.init,
  n.trees.increase,
  n.trees.max,
  cores = cores,
  n.minobsinnode,
  data,
  verbose
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_gb_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="run_gb_+3A_l1.x">L1.x</code></td>
<td>
<p>Individual-level covariates. A character vector containing the
column names of the individual-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. Note that geographic unit
is specified in argument <code>L2.unit</code>.</p>
</td></tr>
<tr><td><code id="run_gb_+3A_l2.x">L2.x</code></td>
<td>
<p>Context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. To exclude context-level
variables, set <code>L2.x = NULL</code>.</p>
</td></tr>
<tr><td><code id="run_gb_+3A_l2.eval.unit">L2.eval.unit</code></td>
<td>
<p>Geographic unit for the loss function. A character scalar
containing the column name of the geographic unit in <code>survey</code> and
<code>census</code>.</p>
</td></tr>
<tr><td><code id="run_gb_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column
name of the geographic unit in <code>survey</code> and <code>census</code> at which
outcomes should be aggregated.</p>
</td></tr>
<tr><td><code id="run_gb_+3A_l2.reg">L2.reg</code></td>
<td>
<p>Geographic region. A character scalar containing the column
name of the geographic region in <code>survey</code> and <code>census</code> by which
geographic units are grouped (<code>L2.unit</code> must be nested within
<code>L2.reg</code>). Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="run_gb_+3A_loss.unit">loss.unit</code></td>
<td>
<p>Loss function unit. A character-valued scalar indicating
whether performance loss should be evaluated at the level of individual
respondents (<code>individuals</code>) or geographic units (<code>L2 units</code>).
Default is <code>individuals</code>.</p>
</td></tr>
<tr><td><code id="run_gb_+3A_loss.fun">loss.fun</code></td>
<td>
<p>Loss function. A character-valued scalar indicating whether
prediction loss should be measured by the mean squared error (<code>MSE</code>)
or the mean absolute error (<code>MAE</code>). Default is <code>MSE</code>.</p>
</td></tr>
<tr><td><code id="run_gb_+3A_interaction.depth">interaction.depth</code></td>
<td>
<p>GB interaction depth. An integer-valued vector
whose values specify the interaction depth of GB. The interaction depth
defines the maximum depth of each tree grown (i.e., the maximum level of
variable interactions). Default is <code>c(1, 2, 3)</code>.</p>
</td></tr>
<tr><td><code id="run_gb_+3A_shrinkage">shrinkage</code></td>
<td>
<p>GB learning rate. A numeric vector whose values specify the
learning rate or step-size reduction of GB. Values between <code class="reqn">0.001</code>
and <code class="reqn">0.1</code> usually work, but a smaller learning rate typically requires
more trees. Default is <code>c(0.04, 0.01, 0.008, 0.005, 0.001)</code>.</p>
</td></tr>
<tr><td><code id="run_gb_+3A_n.trees.init">n.trees.init</code></td>
<td>
<p>GB initial total number of trees. An integer-valued
scalar specifying the initial number of total trees to fit by GB. Default
is <code class="reqn">50</code>.</p>
</td></tr>
<tr><td><code id="run_gb_+3A_n.trees.increase">n.trees.increase</code></td>
<td>
<p>GB increase in total number of trees. An
integer-valued scalar specifying by how many trees the total number of
trees to fit should be increased (until <code>n.trees.max</code> is reached)
or an integer-valued vector of length <code>length(shrinkage)</code> with each
of its values being associated with a learning rate in <code>shrinkage</code>.
Default is <code class="reqn">50</code>.</p>
</td></tr>
<tr><td><code id="run_gb_+3A_n.trees.max">n.trees.max</code></td>
<td>
<p>GB maximum number of trees. An integer-valued scalar
specifying the maximum number of trees to fit by GB or an integer-valued
vector of length <code>length(shrinkage)</code> with each of its values being
associated with a learning rate and an increase in the total number of
trees. Default is <code class="reqn">1000</code>.</p>
</td></tr>
<tr><td><code id="run_gb_+3A_cores">cores</code></td>
<td>
<p>The number of cores to be used. An integer indicating the number
of processor cores used for parallel computing. Default is 1.</p>
</td></tr>
<tr><td><code id="run_gb_+3A_n.minobsinnode">n.minobsinnode</code></td>
<td>
<p>GB minimum number of observations in the terminal
nodes. An integer-valued scalar specifying the minimum number of
observations that each terminal node of the trees must contain. Default is
<code class="reqn">5</code>.</p>
</td></tr>
<tr><td><code id="run_gb_+3A_data">data</code></td>
<td>
<p>Data for cross-validation. A <code>list</code> of <code class="reqn">k</code>
<code>data.frames</code>, one for each fold to be used in <code class="reqn">k</code>-fold
cross-validation.</p>
</td></tr>
<tr><td><code id="run_gb_+3A_verbose">verbose</code></td>
<td>
<p>Verbose output. A logical argument indicating whether or not
verbose output should be printed. Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The tuned gradient boosting parameters. A list with three elements:
<code>interaction_depth</code> contains the interaction depth parameter,
<code>shrinkage</code> contains the learning rate, <code>n_trees</code> the number of
trees to be grown.
</p>

<hr>
<h2 id='run_gb_mc'>GB multicore tuning.</h2><span id='topic+run_gb_mc'></span>

<h3>Description</h3>

<p><code>run_gb_mc</code> is called from within <code>run_gb</code>. It tunes using
multiple cores.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_gb_mc(
  y,
  L1.x,
  L2.eval.unit,
  L2.unit,
  L2.reg,
  form,
  gb.grid,
  n.minobsinnode,
  loss.unit,
  loss.fun,
  data,
  cores
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_gb_mc_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="run_gb_mc_+3A_l1.x">L1.x</code></td>
<td>
<p>Individual-level covariates. A character vector containing the
column names of the individual-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. Note that geographic unit
is specified in argument <code>L2.unit</code>.</p>
</td></tr>
<tr><td><code id="run_gb_mc_+3A_l2.eval.unit">L2.eval.unit</code></td>
<td>
<p>Geographic unit for the loss function. A character scalar
containing the column name of the geographic unit in <code>survey</code> and
<code>census</code>.</p>
</td></tr>
<tr><td><code id="run_gb_mc_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column
name of the geographic unit in <code>survey</code> and <code>census</code> at which
outcomes should be aggregated.</p>
</td></tr>
<tr><td><code id="run_gb_mc_+3A_l2.reg">L2.reg</code></td>
<td>
<p>Geographic region. A character scalar containing the column
name of the geographic region in <code>survey</code> and <code>census</code> by which
geographic units are grouped (<code>L2.unit</code> must be nested within
<code>L2.reg</code>). Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="run_gb_mc_+3A_form">form</code></td>
<td>
<p>The model formula. A formula object.</p>
</td></tr>
<tr><td><code id="run_gb_mc_+3A_gb.grid">gb.grid</code></td>
<td>
<p>The hyper-parameter search grid. A matrix of all
hyper-parameter combinations.</p>
</td></tr>
<tr><td><code id="run_gb_mc_+3A_n.minobsinnode">n.minobsinnode</code></td>
<td>
<p>GB minimum number of observations in the terminal
nodes. An integer-valued scalar specifying the minimum number of
observations that each terminal node of the trees must contain. Default is
<code class="reqn">5</code>.</p>
</td></tr>
<tr><td><code id="run_gb_mc_+3A_loss.unit">loss.unit</code></td>
<td>
<p>Loss function unit. A character-valued scalar indicating
whether performance loss should be evaluated at the level of individual
respondents (<code>individuals</code>) or geographic units (<code>L2 units</code>).
Default is <code>individuals</code>.</p>
</td></tr>
<tr><td><code id="run_gb_mc_+3A_loss.fun">loss.fun</code></td>
<td>
<p>Loss function. A character-valued scalar indicating whether
prediction loss should be measured by the mean squared error (<code>MSE</code>)
or the mean absolute error (<code>MAE</code>). Default is <code>MSE</code>.</p>
</td></tr>
<tr><td><code id="run_gb_mc_+3A_data">data</code></td>
<td>
<p>Data for cross-validation. A <code>list</code> of <code class="reqn">k</code>
<code>data.frames</code>, one for each fold to be used in <code class="reqn">k</code>-fold
cross-validation.</p>
</td></tr>
<tr><td><code id="run_gb_mc_+3A_cores">cores</code></td>
<td>
<p>The number of cores to be used. An integer indicating the number
of processor cores used for parallel computing. Default is 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The tuning parameter combinations and there associated loss function
scores. A list.
</p>

<hr>
<h2 id='run_lasso'>Apply lasso classifier to MrP.</h2><span id='topic+run_lasso'></span>

<h3>Description</h3>

<p><code>run_lasso</code> is a wrapper function that applies the lasso classifier to
data provided by the user, evaluates prediction performance, and chooses the
best-performing model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_lasso(
  y,
  L1.x,
  L2.x,
  L2.unit,
  L2.reg,
  n.iter,
  loss.unit,
  loss.fun,
  lambda,
  data,
  verbose,
  cores
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_lasso_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="run_lasso_+3A_l1.x">L1.x</code></td>
<td>
<p>Individual-level covariates. A character vector containing the
column names of the individual-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. Note that geographic unit
is specified in argument <code>L2.unit</code>.</p>
</td></tr>
<tr><td><code id="run_lasso_+3A_l2.x">L2.x</code></td>
<td>
<p>Context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. To exclude context-level
variables, set <code>L2.x = NULL</code>.</p>
</td></tr>
<tr><td><code id="run_lasso_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column
name of the geographic unit in <code>survey</code> and <code>census</code> at which
outcomes should be aggregated.</p>
</td></tr>
<tr><td><code id="run_lasso_+3A_l2.reg">L2.reg</code></td>
<td>
<p>Geographic region. A character scalar containing the column
name of the geographic region in <code>survey</code> and <code>census</code> by which
geographic units are grouped (<code>L2.unit</code> must be nested within
<code>L2.reg</code>). Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="run_lasso_+3A_n.iter">n.iter</code></td>
<td>
<p>Lasso number of lambda values. An integer-valued scalar
specifying the number of lambda values to search over. Default is
<code class="reqn">100</code>.
<em>Note:</em> Is ignored if a vector of <code>lasso.lambda</code> values is
provided.</p>
</td></tr>
<tr><td><code id="run_lasso_+3A_loss.unit">loss.unit</code></td>
<td>
<p>Loss function unit. A character-valued scalar indicating
whether performance loss should be evaluated at the level of individual
respondents (<code>individuals</code>), geographic units (<code>L2 units</code>) or at
both levels. Default is <code>c("individuals", "L2 units")</code>. With multiple
loss units, parameters are ranked for each loss unit and the loss unit with
the lowest rank sum is chosen. Ties are broken according to the order in
the search grid.</p>
</td></tr>
<tr><td><code id="run_lasso_+3A_loss.fun">loss.fun</code></td>
<td>
<p>Loss function. A character-valued scalar indicating whether
prediction loss should be measured by the mean squared error (<code>MSE</code>),
the mean absolute error (<code>MAE</code>), binary cross-entropy
(<code>cross-entropy</code>), mean squared false error (<code>msfe</code>), the f1
score (<code>f1</code>), or a combination thereof. Default is <code>c("MSE",
"cross-entropy","msfe", "f1")</code>. With multiple loss functions, parameters
are ranked for each loss function and the parameter combination with the
lowest rank sum is chosen. Ties are broken according to the order in the
search grid.</p>
</td></tr>
<tr><td><code id="run_lasso_+3A_lambda">lambda</code></td>
<td>
<p>Lasso penalty parameter. A numeric <code>vector</code> of
non-negative values. The penalty parameter controls the shrinkage of the
context-level variables in the lasso model. Default is a sequence with
minimum 0.1 and maximum 250 that is equally spaced on the log-scale. The
number of values is controlled by the <code>lasso.n.iter</code> parameter.</p>
</td></tr>
<tr><td><code id="run_lasso_+3A_data">data</code></td>
<td>
<p>Data for cross-validation. A <code>list</code> of <code class="reqn">k</code>
<code>data.frames</code>, one for each fold to be used in <code class="reqn">k</code>-fold
cross-validation.</p>
</td></tr>
<tr><td><code id="run_lasso_+3A_verbose">verbose</code></td>
<td>
<p>Verbose output. A logical argument indicating whether or not
verbose output should be printed. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="run_lasso_+3A_cores">cores</code></td>
<td>
<p>The number of cores to be used. An integer indicating the number
of processor cores used for parallel computing. Default is 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The tuned lambda value. A numeric scalar.
</p>

<hr>
<h2 id='run_lasso_mc_lambda'>Lasso multicore tuning.</h2><span id='topic+run_lasso_mc_lambda'></span>

<h3>Description</h3>

<p><code>run_lasso_mc_lambda</code> is called from within <code>run_lasso</code>. It
tunes using multiple cores.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_lasso_mc_lambda(
  y,
  L1.x,
  L2.x,
  L2.unit,
  L2.reg,
  loss.unit,
  loss.fun,
  data,
  cores,
  L2.fe.form,
  L1.re,
  lambda
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_lasso_mc_lambda_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="run_lasso_mc_lambda_+3A_l1.x">L1.x</code></td>
<td>
<p>Individual-level covariates. A character vector containing the
column names of the individual-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. Note that geographic unit
is specified in argument <code>L2.unit</code>.</p>
</td></tr>
<tr><td><code id="run_lasso_mc_lambda_+3A_l2.x">L2.x</code></td>
<td>
<p>Context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. To exclude context-level
variables, set <code>L2.x = NULL</code>.</p>
</td></tr>
<tr><td><code id="run_lasso_mc_lambda_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column
name of the geographic unit in <code>survey</code> and <code>census</code> at which
outcomes should be aggregated.</p>
</td></tr>
<tr><td><code id="run_lasso_mc_lambda_+3A_l2.reg">L2.reg</code></td>
<td>
<p>Geographic region. A character scalar containing the column
name of the geographic region in <code>survey</code> and <code>census</code> by which
geographic units are grouped (<code>L2.unit</code> must be nested within
<code>L2.reg</code>). Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="run_lasso_mc_lambda_+3A_loss.unit">loss.unit</code></td>
<td>
<p>Loss function unit. A character-valued scalar indicating
whether performance loss should be evaluated at the level of individual
respondents (<code>individuals</code>), geographic units (<code>L2 units</code>) or at
both levels. Default is <code>c("individuals", "L2 units")</code>. With multiple
loss units, parameters are ranked for each loss unit and the loss unit with
the lowest rank sum is chosen. Ties are broken according to the order in
the search grid.</p>
</td></tr>
<tr><td><code id="run_lasso_mc_lambda_+3A_loss.fun">loss.fun</code></td>
<td>
<p>Loss function. A character-valued scalar indicating whether
prediction loss should be measured by the mean squared error (<code>MSE</code>),
the mean absolute error (<code>MAE</code>), binary cross-entropy
(<code>cross-entropy</code>), mean squared false error (<code>msfe</code>), the f1
score (<code>f1</code>), or a combination thereof. Default is <code>c("MSE",
"cross-entropy","msfe", "f1")</code>. With multiple loss functions, parameters
are ranked for each loss function and the parameter combination with the
lowest rank sum is chosen. Ties are broken according to the order in the
search grid.</p>
</td></tr>
<tr><td><code id="run_lasso_mc_lambda_+3A_data">data</code></td>
<td>
<p>Data for cross-validation. A <code>list</code> of <code class="reqn">k</code>
<code>data.frames</code>, one for each fold to be used in <code class="reqn">k</code>-fold
cross-validation.</p>
</td></tr>
<tr><td><code id="run_lasso_mc_lambda_+3A_cores">cores</code></td>
<td>
<p>The number of cores to be used. An integer indicating the number
of processor cores used for parallel computing. Default is 1.</p>
</td></tr>
<tr><td><code id="run_lasso_mc_lambda_+3A_l2.fe.form">L2.fe.form</code></td>
<td>
<p>The fixed effects part of the Lasso classifier formula. The
formula is inherited from <code>run_lasso</code>.</p>
</td></tr>
<tr><td><code id="run_lasso_mc_lambda_+3A_l1.re">L1.re</code></td>
<td>
<p>A list of random effects for the Lasso classifier formula. The
formula is inherited from <code>run_lasso</code>.</p>
</td></tr>
<tr><td><code id="run_lasso_mc_lambda_+3A_lambda">lambda</code></td>
<td>
<p>Lasso penalty parameter. A numeric <code>vector</code> of
non-negative values. The penalty parameter controls the shrinkage of the
context-level variables in the lasso model. Default is a sequence with
minimum 0.1 and maximum 250 that is equally spaced on the log-scale. The
number of values is controlled by the <code>lasso.n.iter</code> parameter.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The cross-validation errors for all models. A list.
</p>

<hr>
<h2 id='run_pca'>Apply PCA classifier to MrP.</h2><span id='topic+run_pca'></span>

<h3>Description</h3>

<p><code>run_pca</code> is a wrapper function that applies the PCA classifier to data
provided by the user, evaluates prediction performance, and chooses the
best-performing model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_pca(
  y,
  L1.x,
  L2.x,
  L2.unit,
  L2.reg,
  loss.unit,
  loss.fun,
  data,
  cores,
  verbose
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_pca_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="run_pca_+3A_l1.x">L1.x</code></td>
<td>
<p>Individual-level covariates. A character vector containing the
column names of the individual-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. Note that geographic unit
is specified in argument <code>L2.unit</code>.</p>
</td></tr>
<tr><td><code id="run_pca_+3A_l2.x">L2.x</code></td>
<td>
<p>Context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. To exclude context-level
variables, set <code>L2.x = NULL</code>.</p>
</td></tr>
<tr><td><code id="run_pca_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column
name of the geographic unit in <code>survey</code> and <code>census</code> at which
outcomes should be aggregated.</p>
</td></tr>
<tr><td><code id="run_pca_+3A_l2.reg">L2.reg</code></td>
<td>
<p>Geographic region. A character scalar containing the column
name of the geographic region in <code>survey</code> and <code>census</code> by which
geographic units are grouped (<code>L2.unit</code> must be nested within
<code>L2.reg</code>). Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="run_pca_+3A_loss.unit">loss.unit</code></td>
<td>
<p>Loss function unit. A character-valued scalar indicating
whether performance loss should be evaluated at the level of individual
respondents (<code>individuals</code>), geographic units (<code>L2 units</code>) or at
both levels. Default is <code>c("individuals", "L2 units")</code>. With multiple
loss units, parameters are ranked for each loss unit and the loss unit with
the lowest rank sum is chosen. Ties are broken according to the order in
the search grid.</p>
</td></tr>
<tr><td><code id="run_pca_+3A_loss.fun">loss.fun</code></td>
<td>
<p>Loss function. A character-valued scalar indicating whether
prediction loss should be measured by the mean squared error (<code>MSE</code>),
the mean absolute error (<code>MAE</code>), binary cross-entropy
(<code>cross-entropy</code>), mean squared false error (<code>msfe</code>), the f1
score (<code>f1</code>), or a combination thereof. Default is <code>c("MSE",
"cross-entropy","msfe", "f1")</code>. With multiple loss functions, parameters
are ranked for each loss function and the parameter combination with the
lowest rank sum is chosen. Ties are broken according to the order in the
search grid.</p>
</td></tr>
<tr><td><code id="run_pca_+3A_data">data</code></td>
<td>
<p>Data for cross-validation. A <code>list</code> of <code class="reqn">k</code>
<code>data.frames</code>, one for each fold to be used in <code class="reqn">k</code>-fold
cross-validation.</p>
</td></tr>
<tr><td><code id="run_pca_+3A_cores">cores</code></td>
<td>
<p>The number of cores to be used. An integer indicating the number
of processor cores used for parallel computing. Default is 1.</p>
</td></tr>
<tr><td><code id="run_pca_+3A_verbose">verbose</code></td>
<td>
<p>Verbose output. A logical argument indicating whether or not
verbose output should be printed. Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A model formula of the winning best subset classifier model.
</p>

<hr>
<h2 id='run_svm'>Apply support vector machine classifier to MrP.</h2><span id='topic+run_svm'></span>

<h3>Description</h3>

<p><code>run_svm</code> is a wrapper function that applies the support vector machine
classifier to data provided by the user, evaluates prediction performance,
and chooses the best-performing model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_svm(
  y,
  L1.x,
  L2.x,
  L2.eval.unit,
  L2.unit,
  L2.reg,
  kernel = "radial",
  loss.fun,
  loss.unit,
  gamma,
  cost,
  data,
  verbose,
  cores
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_svm_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="run_svm_+3A_l1.x">L1.x</code></td>
<td>
<p>Individual-level covariates. A character vector containing the
column names of the individual-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. Note that geographic unit
is specified in argument <code>L2.unit</code>.</p>
</td></tr>
<tr><td><code id="run_svm_+3A_l2.x">L2.x</code></td>
<td>
<p>Context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. To exclude context-level
variables, set <code>L2.x = NULL</code>.</p>
</td></tr>
<tr><td><code id="run_svm_+3A_l2.eval.unit">L2.eval.unit</code></td>
<td>
<p>Geographic unit for the loss function. A character scalar
containing the column name of the geographic unit in <code>survey</code> and
<code>census</code>.</p>
</td></tr>
<tr><td><code id="run_svm_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column
name of the geographic unit in <code>survey</code> and <code>census</code> at which
outcomes should be aggregated.</p>
</td></tr>
<tr><td><code id="run_svm_+3A_l2.reg">L2.reg</code></td>
<td>
<p>Geographic region. A character scalar containing the column
name of the geographic region in <code>survey</code> and <code>census</code> by which
geographic units are grouped (<code>L2.unit</code> must be nested within
<code>L2.reg</code>). Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="run_svm_+3A_kernel">kernel</code></td>
<td>
<p>SVM kernel. A character-valued scalar specifying the kernel to
be used by SVM. The possible values are <code>linear</code>, <code>polynomial</code>,
<code>radial</code>, and <code>sigmoid</code>. Default is <code>radial</code>.</p>
</td></tr>
<tr><td><code id="run_svm_+3A_loss.fun">loss.fun</code></td>
<td>
<p>Loss function. A character-valued scalar indicating whether
prediction loss should be measured by the mean squared error (<code>MSE</code>)
or the mean absolute error (<code>MAE</code>). Default is <code>MSE</code>.</p>
</td></tr>
<tr><td><code id="run_svm_+3A_loss.unit">loss.unit</code></td>
<td>
<p>Loss function unit. A character-valued scalar indicating
whether performance loss should be evaluated at the level of individual
respondents (<code>individuals</code>), geographic units (<code>L2 units</code>) or at
both levels. Default is <code>c("individuals", "L2 units")</code>. With multiple
loss units, parameters are ranked for each loss unit and the loss unit with
the lowest rank sum is chosen. Ties are broken according to the order in
the search grid.</p>
</td></tr>
<tr><td><code id="run_svm_+3A_gamma">gamma</code></td>
<td>
<p>SVM kernel parameter. A numeric vector whose values specify the
gamma parameter in the SVM kernel. This parameter is needed for all kernel
types except linear. Default is a sequence with minimum = 1e-5, maximum =
1e-1, and length = 20 that is equally spaced on the log-scale.</p>
</td></tr>
<tr><td><code id="run_svm_+3A_cost">cost</code></td>
<td>
<p>SVM cost parameter. A numeric vector whose values specify the
cost of constraints violation in SVM. Default is a sequence with minimum =
0.5, maximum = 10, and length = 5 that is equally spaced on the log-scale.</p>
</td></tr>
<tr><td><code id="run_svm_+3A_data">data</code></td>
<td>
<p>Data for cross-validation. A <code>list</code> of <code class="reqn">k</code>
<code>data.frames</code>, one for each fold to be used in <code class="reqn">k</code>-fold
cross-validation.</p>
</td></tr>
<tr><td><code id="run_svm_+3A_verbose">verbose</code></td>
<td>
<p>Verbose output. A logical argument indicating whether or not
verbose output should be printed. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="run_svm_+3A_cores">cores</code></td>
<td>
<p>The number of cores to be used. An integer indicating the number
of processor cores used for parallel computing. Default is 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The support vector machine tuned parameters. A list.
</p>

<hr>
<h2 id='run_svm_mc'>SVM multicore tuning.</h2><span id='topic+run_svm_mc'></span>

<h3>Description</h3>

<p><code>run_svm_mc</code> is called from within <code>run_svm</code>. It tunes using
multiple cores.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_svm_mc(
  y,
  L1.x,
  L2.x,
  L2.eval.unit,
  L2.unit,
  L2.reg,
  form,
  loss.unit,
  loss.fun,
  data,
  cores,
  svm.grid,
  verbose
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_svm_mc_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="run_svm_mc_+3A_l1.x">L1.x</code></td>
<td>
<p>Individual-level covariates. A character vector containing the
column names of the individual-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. Note that geographic unit
is specified in argument <code>L2.unit</code>.</p>
</td></tr>
<tr><td><code id="run_svm_mc_+3A_l2.x">L2.x</code></td>
<td>
<p>Context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. To exclude context-level
variables, set <code>L2.x = NULL</code>.</p>
</td></tr>
<tr><td><code id="run_svm_mc_+3A_l2.eval.unit">L2.eval.unit</code></td>
<td>
<p>Geographic unit for the loss function. A character scalar
containing the column name of the geographic unit in <code>survey</code> and
<code>census</code>.</p>
</td></tr>
<tr><td><code id="run_svm_mc_+3A_l2.unit">L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column
name of the geographic unit in <code>survey</code> and <code>census</code> at which
outcomes should be aggregated.</p>
</td></tr>
<tr><td><code id="run_svm_mc_+3A_l2.reg">L2.reg</code></td>
<td>
<p>Geographic region. A character scalar containing the column
name of the geographic region in <code>survey</code> and <code>census</code> by which
geographic units are grouped (<code>L2.unit</code> must be nested within
<code>L2.reg</code>). Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="run_svm_mc_+3A_form">form</code></td>
<td>
<p>The model formula. A formula object.</p>
</td></tr>
<tr><td><code id="run_svm_mc_+3A_loss.unit">loss.unit</code></td>
<td>
<p>Loss function unit. A character-valued scalar indicating
whether performance loss should be evaluated at the level of individual
respondents (<code>individuals</code>), geographic units (<code>L2 units</code>) or at
both levels. Default is <code>c("individuals", "L2 units")</code>. With multiple
loss units, parameters are ranked for each loss unit and the loss unit with
the lowest rank sum is chosen. Ties are broken according to the order in
the search grid.</p>
</td></tr>
<tr><td><code id="run_svm_mc_+3A_loss.fun">loss.fun</code></td>
<td>
<p>Loss function. A character-valued scalar indicating whether
prediction loss should be measured by the mean squared error (<code>MSE</code>)
or the mean absolute error (<code>MAE</code>). Default is <code>MSE</code>.</p>
</td></tr>
<tr><td><code id="run_svm_mc_+3A_data">data</code></td>
<td>
<p>Data for cross-validation. A <code>list</code> of <code class="reqn">k</code>
<code>data.frames</code>, one for each fold to be used in <code class="reqn">k</code>-fold
cross-validation.</p>
</td></tr>
<tr><td><code id="run_svm_mc_+3A_cores">cores</code></td>
<td>
<p>The number of cores to be used. An integer indicating the number
of processor cores used for parallel computing. Default is 1.</p>
</td></tr>
<tr><td><code id="run_svm_mc_+3A_svm.grid">svm.grid</code></td>
<td>
<p>The hyper-parameter search grid. A matrix of all
hyper-parameter combinations.</p>
</td></tr>
<tr><td><code id="run_svm_mc_+3A_verbose">verbose</code></td>
<td>
<p>Verbose output. A logical argument indicating whether or not
verbose output should be printed. Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The cross-validation errors for all models. A list.
</p>

<hr>
<h2 id='summary.autoMrP'>A summary method for autoMrP objects.</h2><span id='topic+summary.autoMrP'></span>

<h3>Description</h3>

<p><code>summary.autoMrP()</code> ...
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'autoMrP'
summary(
  object,
  ci.lvl = 0.95,
  digits = 4,
  format = "simple",
  classifiers = NULL,
  n = 10,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.autoMrP_+3A_object">object</code></td>
<td>
<p>An <code>autoMrP()</code> object for which a summary is desired.</p>
</td></tr>
<tr><td><code id="summary.autoMrP_+3A_ci.lvl">ci.lvl</code></td>
<td>
<p>The level of the confidence intervals. A proportion. Default is
<code>0.95</code>. Confidence intervals are based on bootstrapped estimates and
will not be printed if bootstrapping was not carried out.</p>
</td></tr>
<tr><td><code id="summary.autoMrP_+3A_digits">digits</code></td>
<td>
<p>The number of digits to be displayed. An integer scalar.
Default is <code>4</code>.</p>
</td></tr>
<tr><td><code id="summary.autoMrP_+3A_format">format</code></td>
<td>
<p>The table format. A character string passed to
<code><a href="knitr.html#topic+kable">kable</a></code>. Default is <code>simple</code>.</p>
</td></tr>
<tr><td><code id="summary.autoMrP_+3A_classifiers">classifiers</code></td>
<td>
<p>Summarize a single classifier. A character string. Must be
one of <code>best_subset</code>, <code>lasso</code>, <code>pca</code>, <code>gb</code>, <code>svm</code>,
or <code>mrp</code>. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="summary.autoMrP_+3A_n">n</code></td>
<td>
<p>Number of rows to be printed. An integer scalar. Default is
<code>10</code>.</p>
</td></tr>
<tr><td><code id="summary.autoMrP_+3A_...">...</code></td>
<td>
<p>Additional arguments affecting the summary produced.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, prints a summary of the context level preference
estimates to the console.
</p>

<hr>
<h2 id='survey_item'>A sample of a survey item from the CCES 2008</h2><span id='topic+survey_item'></span>

<h3>Description</h3>

<p>The Cooperative Congressional Election Stuides (CCES) item (cc418_1) asked:
&quot;Would you approve of the use of U.S. military troops in order to ensure the
supply of oil?&quot; The original 2008 CCES item contains 36,832 respondents. This
sample mimics a typical national survey. It contains at least 5 respondents
from each state but is otherwise a random sample.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survey_item
</code></pre>


<h3>Format</h3>

<p>A data frame with 1500 rows and 13 variables:
</p>

<dl>
<dt>YES</dt><dd><p>1 if individual supports use of troops; 0 otherwise</p>
</dd>
<dt>L1x1</dt><dd><p>Age group (four categories: 1 = 18-29; 2 = 30-44; 3 = 45-64; 4 = 65+)</p>
</dd>
<dt>L1x2</dt><dd><p>Education level (four categories: 1 = &lt; high school; 2 = high school graduate; 3 = some college; 4 = college graduate)</p>
</dd>
<dt>L1x3</dt><dd><p>Gender-race combination (six categories: 1 = white male; 2 = black male; 3 = hispanic male; 4 = white female; 5 = black female; 6 = hispanic female)</p>
</dd>
<dt>state</dt><dd><p>U.S. state</p>
</dd>
<dt>L2.unit</dt><dd><p>U.S. state id</p>
</dd>
<dt>region</dt><dd><p>U.S. region (four categories: 1 = Northeast; 2 = Midwest; 3 = South; 4 = West)</p>
</dd>
<dt>L2.x1</dt><dd><p>Normalized state-level share of votes for the Republican candidate in the previous presidential election</p>
</dd>
<dt>L2.x2</dt><dd><p>Normalized state-level percentage of Evangelical Protestant or Mormon respondents</p>
</dd>
<dt>L2.x3</dt><dd><p>Normalized state-level percentage of the population living in urban areas</p>
</dd>
<dt>L2.x4</dt><dd><p>Normalized state-level unemployment rate</p>
</dd>
<dt>L2.x5</dt><dd><p>Normalized state-level share of Hispanics</p>
</dd>
<dt>L2.x6</dt><dd><p>Normalized state-level share of Whites</p>
</dd>
</dl>



<h3>Source</h3>

<p>The data set (excluding L2.x3, L2.x4, L2.x5, L2.x6) is taken from the
article: Buttice, Matthew K, and Benjamin Highton. 2013. &quot;How does
multilevel regression and poststrat-stratification perform with
conventional national surveys?&quot; Political Analysis 21(4): 449-467. It is a
random sample with at least 5 respondents per state. L2.x3, L2.x3, L2.x4,
L2.x5 and L2.x6 are available at <a href="https://www.census.gov">https://www.census.gov</a>.
</p>

<hr>
<h2 id='svm_classifier'>SVM classifier</h2><span id='topic+svm_classifier'></span>

<h3>Description</h3>

<p><code>svm_classifier</code> applies support vector machine classification to a
data set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svm_classifier(
  y,
  form,
  data,
  kernel,
  type,
  probability,
  svm.gamma,
  svm.cost,
  verbose = c(TRUE, FALSE)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="svm_classifier_+3A_y">y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td></tr>
<tr><td><code id="svm_classifier_+3A_form">form</code></td>
<td>
<p>Model formula. A two-sided linear formula describing
the model to be fit, with the outcome on the LHS and the covariates
separated by + operators on the RHS.</p>
</td></tr>
<tr><td><code id="svm_classifier_+3A_data">data</code></td>
<td>
<p>Data. A data.frame containing the cross-validation data used to
train and evaluate the model.</p>
</td></tr>
<tr><td><code id="svm_classifier_+3A_kernel">kernel</code></td>
<td>
<p>Kernel for SVM. A character string specifying the kernel to
be used for SVM. The possible types are linear, polynomial, radial, and
sigmoid. Default is radial.</p>
</td></tr>
<tr><td><code id="svm_classifier_+3A_type">type</code></td>
<td>
<p>svm can be used as a classification machine, as a regression
machine, or for novelty detection. Depending of whether y is a factor or
not, the default setting for type is C-classification or eps-regression,
respectively, but may be overwritten by setting an explicit value. Valid
options are: #' </p>

<ol>
<li><p> C-classification
</p>
</li>
<li><p> nu-classification
</p>
</li>
<li><p> one-classification (for novelty detection)
</p>
</li>
<li><p> eps-regression
</p>
</li>
<li><p> nu-regression
</p>
</li></ol>
</td></tr>
<tr><td><code id="svm_classifier_+3A_probability">probability</code></td>
<td>
<p>Probability predictions. A logical argument indicating
whether the model should allow for probability predictions</p>
</td></tr>
<tr><td><code id="svm_classifier_+3A_svm.gamma">svm.gamma</code></td>
<td>
<p>Gamma parameter for SVM. This parameter is needed for all
kernels except linear.</p>
</td></tr>
<tr><td><code id="svm_classifier_+3A_svm.cost">svm.cost</code></td>
<td>
<p>Cost parameter for SVM. This parameter specifies the cost of
constraints violation.</p>
</td></tr>
<tr><td><code id="svm_classifier_+3A_verbose">verbose</code></td>
<td>
<p>Verbose output. A logical vector indicating whether or not
verbose output should be printed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The support vector machine model. An <code><a href="e1071.html#topic+svm">svm</a></code> object.
</p>

<hr>
<h2 id='taxes_census'>Quasi census data.</h2><span id='topic+taxes_census'></span>

<h3>Description</h3>

<p>The census file is generated from the full 2008 National Annenberg Election
Studies item CBb01 by dissaggregating the 64 ideal type combinations of the
individual level variables L1x1, L2x2 and L1x3. A row is an ideal type in a
given state.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(taxes_census)
</code></pre>


<h3>Format</h3>

<p>A data frame with 2934 rows and 13 variables:
</p>

<dl>
<dt>state</dt><dd><p>U.S. state</p>
</dd>
<dt>L2.unit</dt><dd><p>U.S. state id</p>
</dd>
<dt>region</dt><dd><p>U.S. region (four categories: 1 = Northeast; 2 = Midwest; 3 = South; 4 = West)</p>
</dd>
<dt>L1x1</dt><dd><p>Age group (four categories)</p>
</dd>
<dt>L1x2</dt><dd><p>Education level (four categories)</p>
</dd>
<dt>L1x3</dt><dd><p>Gender-race combination (six categories)</p>
</dd>
<dt>freq</dt><dd><p>State-level frequency of ideal type</p>
</dd>
<dt>proportion</dt><dd><p>State-level proportion of respondents of that ideal type in the population</p>
</dd>
<dt>L2.x1</dt><dd><p>State-level share of votes for the Republican candidate in the previous presidential election</p>
</dd>
<dt>L2.x2</dt><dd><p>State-level percentage of Evangelical Protestant or Mormon respondents</p>
</dd>
<dt>L2.x3</dt><dd><p>State-level percentage of the population living in urban areas</p>
</dd>
<dt>L2.x4</dt><dd><p>State-level unemployment rate</p>
</dd>
<dt>L2.x5</dt><dd><p>State-level share of Hispanics</p>
</dd>
<dt>L2.x6</dt><dd><p>State-level share of Whites</p>
</dd>
</dl>



<h3>Source</h3>

<p>The data set (excluding L2.x3, L2.x4, L2.x5, L2.x6) is taken from the
article: Buttice, Matthew K, and Benjamin Highton. 2013. &quot;How does
multilevel regression and poststrat-stratification perform with
conventional national surveys?&quot; Political Analysis 21(4): 449-467. L2.x3,
L2.x3, L2.x4, L2.x5 and L2.x6 are available at
<a href="https://www.census.gov">https://www.census.gov</a>.
</p>

<hr>
<h2 id='taxes_survey'>Sample on raising taxes from the 2008 National Annenberg Election Studies.</h2><span id='topic+taxes_survey'></span>

<h3>Description</h3>

<p>The 2008 National Annenberg Election Studies (NAES) item (CBb01) asked: &quot;I'm
going to read you some options about federal income taxes. Please tell me
which one comes closest to your view on what we should be doing about federal
income taxes: (1) Cut taxes; (2) Keep taxes as they are; (3) Raise taxes if
necessary; (4) None of these; (998) Don't know; (999) No answer. Category (3)
was turned into a 'raise taxes response,' categories (1) and (2) were
combined into a 'do not raise taxes' response. The original item from the
phone and online surveys contains 50,483 respondents. This sample mimics a
typical national survey. It contains at least 5 respondents from each state
but is otherwise a random sample.
</p>
<p>The 2008 National Annenberg Election Studies (NAES) item (CBb01) asked: &quot;I'm
going to read you some options about federal income taxes. Please tell me
which one comes closest to your view on what we should be doing about federal
income taxes: (1) Cut taxes; (2) Keep taxes as they are; (3) Raise taxes if
necessary; (4) None of these; (998) Don't know; (999) No answer. Category (3)
was turned into a 'raise taxes response,' categories (1) and (2) were
combined into a 'do not raise taxes' response. The original item from the
phone and online surveys contains 50,483 respondents. This sample mimics a
typical national survey. It contains at least 5 respondents from each state
but is otherwise a random sample.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(taxes_survey)

data(taxes_survey)
</code></pre>


<h3>Format</h3>

<p>A data frame with 1500 rows and 13 variables:
</p>

<dl>
<dt>YES</dt><dd><p>1 if individual supports raising taxes; 0 otherwise</p>
</dd>
<dt>L1x1</dt><dd><p>Age group (four categories: 1 = 18-29; 2 = 30-44; 3 = 45-64; 4 = 65+)</p>
</dd>
<dt>L1x2</dt><dd><p>Education level (four categories: 1 = &lt; high school; 2 = high school graduate; 3 = some college; 4 = college graduate)</p>
</dd>
<dt>L1x3</dt><dd><p>Gender-race combination (six categories: 1 = white male; 2 = black male; 3 = hispanic male; 4 = white female; 5 = black female; 6 = hispanic female)</p>
</dd>
<dt>state</dt><dd><p>U.S. state</p>
</dd>
<dt>L2.unit</dt><dd><p>U.S. state id</p>
</dd>
<dt>region</dt><dd><p>U.S. region (four categories: 1 = Northeast; 2 = Midwest; 3 = South; 4 = West)</p>
</dd>
<dt>L2.x1</dt><dd><p>State-level share of votes for the Republican candidate in the previous presidential election</p>
</dd>
<dt>L2.x2</dt><dd><p>State-level percentage of Evangelical Protestant or Mormon respondents</p>
</dd>
<dt>L2.x3</dt><dd><p>State-level percentage of the population living in urban areas</p>
</dd>
<dt>L2.x4</dt><dd><p>State-level unemployment rate</p>
</dd>
<dt>L2.x5</dt><dd><p>State-level share of Hispanics</p>
</dd>
<dt>L2.x6</dt><dd><p>State-level share of Whites</p>
</dd>
</dl>

<p>A data frame with 1500 rows and 13 variables:
</p>

<dl>
<dt>YES</dt><dd><p>1 if individual supports raising taxes; 0 otherwise</p>
</dd>
<dt>L1x1</dt><dd><p>Age group (four categories: 1 = 18-29; 2 = 30-44; 3 = 45-64; 4 = 65+)</p>
</dd>
<dt>L1x2</dt><dd><p>Education level (four categories: 1 = &lt; high school; 2 = high school graduate; 3 = some college; 4 = college graduate)</p>
</dd>
<dt>L1x3</dt><dd><p>Gender-race combination (six categories: 1 = white male; 2 = black male; 3 = hispanic male; 4 = white female; 5 = black female; 6 = hispanic female)</p>
</dd>
<dt>state</dt><dd><p>U.S. state</p>
</dd>
<dt>L2.unit</dt><dd><p>U.S. state id</p>
</dd>
<dt>region</dt><dd><p>U.S. region (four categories: 1 = Northeast; 2 = Midwest; 3 = South; 4 = West)</p>
</dd>
<dt>L2.x1</dt><dd><p>State-level share of votes for the Republican candidate in the previous presidential election</p>
</dd>
<dt>L2.x2</dt><dd><p>State-level percentage of Evangelical Protestant or Mormon respondents</p>
</dd>
<dt>L2.x3</dt><dd><p>State-level percentage of the population living in urban areas</p>
</dd>
<dt>L2.x4</dt><dd><p>State-level unemployment rate</p>
</dd>
<dt>L2.x5</dt><dd><p>State-level share of Hispanics</p>
</dd>
<dt>L2.x6</dt><dd><p>State-level share of Whites</p>
</dd>
</dl>



<h3>Source</h3>

<p>The data set (excluding L2.x3, L2.x4, L2.x5, L2.x6) is taken from the
article: Buttice, Matthew K, and Benjamin Highton. 2013. &quot;How does
multilevel regression and poststrat-stratification perform with
conventional national surveys?&quot; Political Analysis 21(4): 449-467. It is a
random sample with at least 5 respondents per state. L2.x3, L2.x3, L2.x4,
L2.x5 and L2.x6 are available at <a href="https://www.census.gov">https://www.census.gov</a>.
</p>
<p>The data set (excluding L2.x3, L2.x4, L2.x5, L2.x6) is taken from the
article: Buttice, Matthew K, and Benjamin Highton. 2013. &quot;How does
multilevel regression and poststrat-stratification perform with
conventional national surveys?&quot; Political Analysis 21(4): 449-467. It is a
random sample with at least 5 respondents per state. L2.x3, L2.x3, L2.x4,
L2.x5 and L2.x6 are available at <a href="https://www.census.gov">https://www.census.gov</a>.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
