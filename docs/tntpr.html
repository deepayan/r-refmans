<!DOCTYPE html><html lang="en"><head><title>Help for package tntpr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {tntpr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#tntpr'><p>Data Analysis Tools Customized for TNTP</p></a></li>
<li><a href='#.onAttach'><p>Title</p></a></li>
<li><a href='#bar_chart_counts'><p>Bar chart of counts with TNTP polish</p></a></li>
<li><a href='#check_all_count'><p>Tabulate a range of check-all-that-apply response columns in a single table.</p></a></li>
<li><a href='#check_all_recode'><p>Process a range of check-all-that-apply response columns for correct tabulation.</p></a></li>
<li><a href='#choose_text_color'><p>Get contrasting text colors for fills</p></a></li>
<li><a href='#colors_tntp'><p>TNTP colors</p></a></li>
<li><a href='#colors_tntp_likert'><p>Likert pallette</p></a></li>
<li><a href='#colors_tntp_likert_orange_to_green'><p>Likert orange to green pallette</p></a></li>
<li><a href='#colors_tntp_palette'><p>TNTP pallette</p></a></li>
<li><a href='#date_to_sy'><p>Convert a date value into its school year.</p></a></li>
<li><a href='#factorize_df'><p>Convert all character vectors containing a set of values in a data.frame to factors.</p></a></li>
<li><a href='#fake_county'><p>Fake teacher roster dataset from OpenSDP</p></a></li>
<li><a href='#figureN'><p>Create sequential figure numbers</p></a></li>
<li><a href='#get_ext'><p>Pull extension from a path</p></a></li>
<li><a href='#get_usable_family'><p>Checks if a font family is usable and returns a usable font if not</p></a></li>
<li><a href='#header_tntp'><p>Insert header_script_tntp.</p></a></li>
<li><a href='#import_segoe_ui'><p>Import Segoe UI Condensed font for use in charts</p></a></li>
<li><a href='#is_color'><p>Validate color inputs</p></a></li>
<li><a href='#is_drive_id'><p>Test if a string is formatted like a Sharepoint drive id</p></a></li>
<li><a href='#is_site_id'><p>Test if a string is formatted like a Sharepoint site id</p></a></li>
<li><a href='#is_site_url'><p>Test if a string is formatted like a Sharepoint site url</p></a></li>
<li><a href='#labelled_to_factors'><p>Convert all <code>labelled</code>-class columns to factors.</p></a></li>
<li><a href='#palette_names'><p>Pallette names</p></a></li>
<li><a href='#palette_tntp'><p>TNTP branded color palettes</p></a></li>
<li><a href='#palette_tntp_scales'><p>scale_palette_tntp</p></a></li>
<li><a href='#parse_date'><p>Attempt to parse a date with common formats</p></a></li>
<li><a href='#position_diverge'><p>Easy Diverging Bar Charts</p></a></li>
<li><a href='#process_type'><p>Determine function type by extension and provided type</p>
Handles type validation</a></li>
<li><a href='#prop_matching'><p>Calculate the percent of non-missing values in a character vector containing the values of interest.  This is a helper function for factorize_df().</p></a></li>
<li><a href='#recode_to_binary'><p>Recode a variable into binary groups, e.g., &quot;Top-2&quot; and &quot;Not in Top-2&quot;.</p></a></li>
<li><a href='#scale_colour_tntp'><p>scale_color_tntp/scale_fill_tntp</p></a></li>
<li><a href='#set_data_memo_formatting'><p>Set the formatting options for a TNTP Data Memo</p></a></li>
<li><a href='#setup_repo'><p>Initialize a new repository, and a single subfolder, TNTP style.</p></a></li>
<li><a href='#setup_subdirectory'><p>Initialize a new subdirectory in an existing repository, TNTP style.</p></a></li>
<li><a href='#show_in_excel'><p>Write Dataframe to a temp excel file and open it.</p></a></li>
<li><a href='#sp_check_folder'><p>Check for existence of a Sharepoint folder and offer to create it if it</p>
doesn't exist</a></li>
<li><a href='#sp_create_folder'><p>Create Sharepoint Folder</p></a></li>
<li><a href='#sp_defaults'><p>Set default Sharepoint settings for a session</p></a></li>
<li><a href='#sp_error'><p>For parsing sharepoint errors (right now just path errors)</p></a></li>
<li><a href='#sp_list'><p>List Sharepoint Contents</p></a></li>
<li><a href='#sp_read'><p>Read/Write from Sharepoint</p></a></li>
<li><a href='#sp_read_xlsx'><p>Internal function for reading excel files from Sharepoint</p></a></li>
<li><a href='#sp_site'><p>Return Microsoft365R site or drive object</p></a></li>
<li><a href='#sp_string'><p>Internal function to create cli-friendly site/drive/path string</p></a></li>
<li><a href='#sp_upload'><p>Sharepoint upload/download</p></a></li>
<li><a href='#sp_write_xlsx'><p>Function for uploading an xls / xlsx file</p></a></li>
<li><a href='#standardize_case'><p>Update case of a character vector</p></a></li>
<li><a href='#tableN'><p>Create sequential table numbers</p></a></li>
<li><a href='#teacher_survey'><p>Teacher survey data</p></a></li>
<li><a href='#theme_tntp'><p>TNTP's ggplot2 theme</p></a></li>
<li><a href='#theme_tntp_2018'><p>A precise &amp; pristine <code>ggplot2</code> theme with opinionated defaults and an emphasis on typography</p></a></li>
<li><a href='#tntp_colors'><p>TNTP Brand Colors</p></a></li>
<li><a href='#tntp_cred'><p>TNTP Credential Get/Set Command</p></a></li>
<li><a href='#tntp_palette'><p>Common TNTP Color Palettes</p></a></li>
<li><a href='#tntp_style'><p>Create TNTP themed ggplot2 charts</p></a></li>
<li><a href='#update_geom_font_defaults'><p>Update matching font defaults for text geoms</p></a></li>
<li><a href='#update_tntpr'><p>Re-install the tntpr package from GitHub.</p></a></li>
<li><a href='#wisc'><p>Fake student data from the Wisconsin State Dept. of Ed</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Data Analysis Tools Customized for TNTP</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.1</td>
</tr>
<tr>
<td>Description:</td>
<td>An assortment of functions and templates customized to meet 
    the needs of data analysts at the non-profit organization TNTP. 
    Includes functions for branded colors and plots, credentials management,
    repository set-up, and other common analytic tasks.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://creativecommons.org/licenses/by/4.0">CC BY 4.0</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/tntp/tntpr">https://github.com/tntp/tntpr</a>, <a href="https://tntp.github.io/tntpr/">https://tntp.github.io/tntpr/</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, colorspace, dplyr (&ge; 0.8.3), extrafont, formattable,
ggplot2 (&ge; 3.5.0), grDevices, grid, janitor, keyring,
labelled, lubridate (&ge; 1.7.4), Microsoft365R, purrr (&ge;
0.3.3), readr, rlang, rstudioapi, scales, stringr (&ge; 1.4.0),
tibble (&ge; 2.1.3), tidyr (&ge; 1.0.0), tidyselect</td>
</tr>
<tr>
<td>Suggests:</td>
<td>devtools, knitr, rmarkdown, testthat (&ge; 3.0.0), usethis,
ggridges, ggalt, forcats, qualtRics, haven, readxl, writexl</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-11-26 21:03:16 UTC; SamTalcott</td>
</tr>
<tr>
<td>Author:</td>
<td>Dustin Pashouwer [aut, cre],
  Sam Firke [aut],
  Shane Orr [aut],
  Sam Talcott [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Dustin Pashouwer &lt;dustin.pashouwer@tntp.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-11-26 23:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='tntpr'>Data Analysis Tools Customized for TNTP</h2><span id='topic+tntpr'></span><span id='topic+tntpr-package'></span>

<h3>Description</h3>

<p>An in-house TNTP R package. Includes tools for data manipulation,
analysis, and reporting, including making TNTP-themed charts and documents.
By and for TNTP data-using staff, though available to the broader public.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Dustin Pashouwer <a href="mailto:dustin.pashouwer@tntp.org">dustin.pashouwer@tntp.org</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Sam Firke
</p>
</li>
<li><p> Shane Orr <a href="mailto:shane.orr@tntp.org">shane.orr@tntp.org</a>
</p>
</li>
<li><p> Sam Talcott <a href="mailto:sam.talcott@tntp.org">sam.talcott@tntp.org</a>
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/tntp/tntpr">https://github.com/tntp/tntpr</a>
</p>
</li>
<li> <p><a href="https://tntp.github.io/tntpr/">https://tntp.github.io/tntpr/</a>
</p>
</li></ul>


<hr>
<h2 id='.onAttach'>Title</h2><span id='topic+.onAttach'></span>

<h3>Description</h3>

<p>Title
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.onAttach(libname, pkgname)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".onAttach_+3A_libname">libname</code></td>
<td>
<p>library name</p>
</td></tr>
<tr><td><code id=".onAttach_+3A_pkgname">pkgname</code></td>
<td>
<p>package name</p>
</td></tr>
</table>

<hr>
<h2 id='bar_chart_counts'>Bar chart of counts with TNTP polish</h2><span id='topic+bar_chart_counts'></span>

<h3>Description</h3>

<p>Takes a user supplied data frame and turns the designated column into
an N bar chart (uses position dodge from ggplot2).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bar_chart_counts(
  df,
  var,
  group_var = NULL,
  labels = "n",
  var_color = "green",
  group_colors = NULL,
  title = NULL,
  var_label = NULL,
  digits = 1,
  font = "Halyard Display",
  font_size = 12
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bar_chart_counts_+3A_df">df</code></td>
<td>
<p>the data.frame to be used in the bar chart</p>
</td></tr>
<tr><td><code id="bar_chart_counts_+3A_var">var</code></td>
<td>
<p>unquoted column name for variable to count</p>
</td></tr>
<tr><td><code id="bar_chart_counts_+3A_group_var">group_var</code></td>
<td>
<p>(optional) unquoted column name for group variable.  If this is specified, you get a 2-variable clustered bar chart.  If left blank, a single variable bar chart.</p>
</td></tr>
<tr><td><code id="bar_chart_counts_+3A_labels">labels</code></td>
<td>
<p>should labels show the count (<code>"n"</code>) or the percentage (<code>"pct"</code>)?</p>
</td></tr>
<tr><td><code id="bar_chart_counts_+3A_var_color">var_color</code></td>
<td>
<p>color for non-grouped charts; set to TNTP green by default. For both this and <code>group_colors</code>, strings will be tried in <code>tntp_colors</code> automatically.  So <code>c("red", "green")</code> will get you the official TNTP colors, while <code>c("red", "brown")</code> will get you base R red and blue.</p>
</td></tr>
<tr><td><code id="bar_chart_counts_+3A_group_colors">group_colors</code></td>
<td>
<p>character vector of group colors, if a specific palette is desired</p>
</td></tr>
<tr><td><code id="bar_chart_counts_+3A_title">title</code></td>
<td>
<p>main chart title</p>
</td></tr>
<tr><td><code id="bar_chart_counts_+3A_var_label">var_label</code></td>
<td>
<p>label for x-axis</p>
</td></tr>
<tr><td><code id="bar_chart_counts_+3A_digits">digits</code></td>
<td>
<p>integer indicating the number of decimal places to be used in percentages. In truncating, ties are rounded up, like in MS Excel, i.e., 10.5 and 11.5 become 11 and 12.  This is *not* base R's default behavior.</p>
</td></tr>
<tr><td><code id="bar_chart_counts_+3A_font">font</code></td>
<td>
<p>font for chart text; Segoe UI by default</p>
</td></tr>
<tr><td><code id="bar_chart_counts_+3A_font_size">font_size</code></td>
<td>
<p>size for chart text; set to 12 by default</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# An N bar chart by default
# All examples use font = "sans" to avoid triggering font warnings
mtcars |&gt;
  bar_chart_counts(var   = cyl,
                   var_color = "orange",
                   title = "Number of mtcars by cylinder",
                   font  = "sans")

# Use a grouping variable with custom colors
mtcars |&gt;
  bar_chart_counts(var       = cyl,
                   group_var = vs,
                   group_colors = c("orange", "navy"),
                   labels    = "pct",
                   title     = "% of V vs. Straight engines by # of cylinders",
                   font  = "sans")
</code></pre>

<hr>
<h2 id='check_all_count'>Tabulate a range of check-all-that-apply response columns in a single table.</h2><span id='topic+check_all_count'></span>

<h3>Description</h3>

<p>This function is to be run on columns treated with <code>check_all_recode()</code>.
</p>
<p>Takes a data.frame and range of columns containing all answer choices to a check-all-that-apply question and tabulates the results.  People who did not select any choices  (i.e., they did not answer the question) are omitted from the denominator.  For this to make sense, the question's choices should be MECE, or there should be an NA option.
</p>
<p>This works with an &quot;Other&quot; open-response text field, which will be recoded to a binary variable with <code>check_all_recode</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_all_count(dat, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_all_count_+3A_dat">dat</code></td>
<td>
<p>a data.frame with survey data</p>
</td></tr>
<tr><td><code id="check_all_count_+3A_...">...</code></td>
<td>
<p>unquoted column names containing the range of the answer choices.  Can be specified individually, as a range, i.e., <code>q1_1:q1_5</code>, or using other helper functions from <code>dplyr::select()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame with the tabulated results (n and 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- data.frame( # 4th person didn't respond at all
  unrelated = 1:5,
  q1_1 = c("a", "a", "a", NA, NA),
  q1_2 = c("b", "b", NA, NA, NA),
  q1_3 = c(NA, NA, "c", NA, NA),
  q1_other = c(NA, "something else", NA, NA, "not any of these")
)

x |&gt;
  check_all_recode(q1_1:q1_other) |&gt;
  check_all_count(q1_1:q1_other)

# You can use any of the dplyr::select() helpers to identify the columns:
x |&gt;
  check_all_recode(contains("q1")) |&gt;
  check_all_count(contains("q1"))
</code></pre>

<hr>
<h2 id='check_all_recode'>Process a range of check-all-that-apply response columns for correct tabulation.</h2><span id='topic+check_all_recode'></span>

<h3>Description</h3>

<p>Some survey software returns check-all-that-apply response columns where missing values could indicate either that the respondent skipped the question entirely, or that they did not select that particular answer choice.  To count the responses properly, the cases where a respondent did not check any of choices - i.e., they skipped the question - should not be counted in the denominator (assuming that the choices were completely exhaustive, or that there was an NA option).
</p>
<p>This function takes a data.frame and range of columns containing all answer choices to a check-all-that-apply question and updates the columns in the data.frame to contain one of three values: 1 if the choice was selected; 0 if the respondent chose another option but not this one; or NA if the respondent skipped the question (i.e., they did not select any of the choices) and thus their response is truly missing.
</p>
<p>It also takes the single text values in each column and adds them as a <code>label</code> attribute to each data.frame columns.
</p>
<p>This function accomodates an open-response column, to get the correct denominator when some respondents have skipped all check variables but written something in.  This passing over of the offered choices is an implicit rejection of them, not a &quot;missing.&quot;  Such a text variable will throw a warning - which may be okay - and will then be recoded into a binary 1/0 variable indicating a response.  Such a text variable will be assigned the label &quot;Other&quot;.  Consider preserving the original respondent text values prior to this point as a separate column if needed.
</p>
<p><code>check_all_recode()</code> prepares the data.frame for a call to its sister function <code>check_all_count()</code>.  The label attribute is accessed by this function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_all_recode(dat, ..., set_labels = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_all_recode_+3A_dat">dat</code></td>
<td>
<p>a data.frame with survey data</p>
</td></tr>
<tr><td><code id="check_all_recode_+3A_...">...</code></td>
<td>
<p>unquoted variable names containing the answer choices.  Can be specified as a range, i.e., <code>q1_1:q1_5</code> or using other helper functions from <code>dplyr::select()</code>.</p>
</td></tr>
<tr><td><code id="check_all_recode_+3A_set_labels">set_labels</code></td>
<td>
<p>should the label attribute of the columns be over-written with the column text?  Allow this to be TRUE unless there are currently label attributes you don't wish to overwrite.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the original data.frame with the specified column range updated, and with label attributes on the questions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- data.frame( # 4th person didn't respond at all
  unrelated = 1:5,
  q1_1 = c("a", "a", "a", NA, NA),
  q1_2 = c("b", "b", NA, NA, NA),
  q1_3 = c(NA, NA, "c", NA, NA),
  q1_other = c(NA, "something else", NA, NA, "not any of these")
)
x |&gt;
  check_all_recode(q1_1:q1_other)

# You can use any of the dplyr::select() helpers to identify the columns:
x |&gt;
  check_all_recode(contains("q1"))

</code></pre>

<hr>
<h2 id='choose_text_color'>Get contrasting text colors for fills</h2><span id='topic+choose_text_color'></span>

<h3>Description</h3>

<p>Get appropriate high-contrast text colors for a vector of background colors.
This function uses the W3C contrast ratio guidance (through the
<code>colorspace::contrast_ratio()</code> function) to determine the contrast,
and will raise an error if no high-enough contrast colors can be found.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>choose_text_color(bg_color, text_colors = c("black", "white"), min_ratio = 4.5)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="choose_text_color_+3A_bg_color">bg_color</code></td>
<td>
<p>a vector of colors to be used as background colors</p>
</td></tr>
<tr><td><code id="choose_text_color_+3A_text_colors">text_colors</code></td>
<td>
<p>a vector of options for text colors. Defaults to &quot;black&quot; and &quot;white&quot;</p>
</td></tr>
<tr><td><code id="choose_text_color_+3A_min_ratio">min_ratio</code></td>
<td>
<p>Minimum contrast ratio. By default this is set to 4.5, the WCAG recommendation for regular text.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default, this function uses black and white as the text color options,
however custom text color options can be set with the <code>text_colors</code>
argument.
</p>


<h3>Value</h3>

<p>a vector of text colors the same length as <code>bg_color</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(ggplot2)

fills &lt;- tntp_palette("top2_5")

diamonds |&gt;
  dplyr::summarize(m = mean(price), .by = cut) |&gt;
  ggplot(aes(cut, m, fill = cut)) +
  geom_col() +
  geom_text(aes(label = scales::dollar(m), color = cut), vjust = 1.5) +
  scale_fill_manual(values = fills, guide = "none") +
  scale_color_manual(values = choose_text_color(fills), guide = "none") +
  tntp_style(family = "sans")

</code></pre>

<hr>
<h2 id='colors_tntp'>TNTP colors</h2><span id='topic+colors_tntp'></span>

<h3>Description</h3>

<p>This list of colors has been superseded by the new brand colors and the new
function <code><a href="#topic+tntp_colors">tntp_colors()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>colors_tntp
</code></pre>


<h3>Format</h3>

<p>An object of class <code>character</code> of length 34.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tntp_colors()

</code></pre>

<hr>
<h2 id='colors_tntp_likert'>Likert pallette</h2><span id='topic+colors_tntp_likert'></span>

<h3>Description</h3>

<p>This likert palette has been superseded by the new brand colors and the new
function <code><a href="#topic+tntp_palette">tntp_palette()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>colors_tntp_likert
</code></pre>


<h3>Format</h3>

<p>An object of class <code>character</code> of length 7.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tntp_palette('likert_6')

</code></pre>

<hr>
<h2 id='colors_tntp_likert_orange_to_green'>Likert orange to green pallette</h2><span id='topic+colors_tntp_likert_orange_to_green'></span>

<h3>Description</h3>

<p>This likert palette has been superseded by the new brand colors and the new
functions <code><a href="#topic+tntp_colors">tntp_colors()</a></code> and <code><a href="#topic+tntp_palette">tntp_palette()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>colors_tntp_likert_orange_to_green
</code></pre>


<h3>Format</h3>

<p>An object of class <code>character</code> of length 7.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tntp_palette('bg_6')

</code></pre>

<hr>
<h2 id='colors_tntp_palette'>TNTP pallette</h2><span id='topic+colors_tntp_palette'></span>

<h3>Description</h3>

<p>This list of colors has been superseded by the new brand colors and the new
function <code><a href="#topic+tntp_colors">tntp_colors()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>colors_tntp_palette
</code></pre>


<h3>Format</h3>

<p>An object of class <code>character</code> of length 16.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tntp_colors()

</code></pre>

<hr>
<h2 id='date_to_sy'>Convert a date value into its school year.</h2><span id='topic+date_to_sy'></span>

<h3>Description</h3>

<p>Checks to see if a date is past the user-specified cutoff point for delineating school years, then maps to the appropriate year.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date_to_sy(date_var, last_day_of_sy = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date_to_sy_+3A_date_var">date_var</code></td>
<td>
<p>the date to convert. Can be a <code>Date</code> object or a string in the form 'YYYY-MM-DD' or 'MM/DD/YYYY'</p>
</td></tr>
<tr><td><code id="date_to_sy_+3A_last_day_of_sy">last_day_of_sy</code></td>
<td>
<p>the cutoff date, after which a date is considered part of the following school year. The year of this argument does not matter. Defaults (noisily) to July 1st.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a character vector in the format of &quot;2013 - 2014&quot;
</p>
<p>A character vector the same length as <code>date_var</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>date_to_sy(as.Date("2014-05-05"), as.Date("2000-07-01"))
date_to_sy(as.Date("2014-07-05"), as.Date("2000-07-01"))

</code></pre>

<hr>
<h2 id='factorize_df'>Convert all character vectors containing a set of values in a data.frame to factors.</h2><span id='topic+factorize_df'></span>

<h3>Description</h3>

<p>This function examines each column in a data.frame; when it finds a column composed solely of the values provided to the <code>lvls</code> argument it updates them to be factor variables, with levels in the order provided.
</p>
<p>This is an alternative to calling <code>dplyr::mutate_at</code> with <code>factor()</code> and identifying the specific variables you want to transform, if you have several repeated sets of responses.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>factorize_df(dat, lvls, ignore.case = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="factorize_df_+3A_dat">dat</code></td>
<td>
<p>data.frame with some factor variables stored as characters.</p>
</td></tr>
<tr><td><code id="factorize_df_+3A_lvls">lvls</code></td>
<td>
<p>The factor levels in your variable(s), in order.  If you have a question whose possible responses are a subset of another question's, don't use this function; manipulate the specific columns with <code>dplyr::mutate_at</code>.</p>
</td></tr>
<tr><td><code id="factorize_df_+3A_ignore.case">ignore.case</code></td>
<td>
<p>Logical. If TRUE, will match without checking case, using the capitalization from the <code>lvls</code> parameter for the final output. If not provided, the function will provide a warning if it detects columns that would match without checking case but will NOT coerce them.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame the same size as <code>dat</code>, with factorization completed in place.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>teacher_survey |&gt;
  factorize_df(lvls = c("Strongly Disagree", "Disagree", "Somewhat Disagree",
                        "Somewhat Agree", "Agree", "Strongly Agree"))

# prints warning due to case mismatches:
teacher_survey |&gt;
  factorize_df(lvls = c("Strongly disagree", "Disagree", "Somewhat disagree",
                        "Somewhat agree", "Agree", "Strongly agree"))
</code></pre>

<hr>
<h2 id='fake_county'>Fake teacher roster dataset from OpenSDP</h2><span id='topic+fake_county'></span>

<h3>Description</h3>

<p>The Fake County synthetic panel dataset contains approximately 40,000 records comprising four years of data with roughly 10,000 teachers per year. The dataset includes information about teacher demographics, teaching assignments, salary, credentials, experience, evaluation scores, and hiring and retention status. It also includes information about school types and average student characteristics for each school. There are no real teachers in the dataset, but it is based on real data. Fake County was developed as an offshoot of the Strategic Data Project's work on human capital diagnostics for school districts and state education departments, and can be used for teaching or collaboration. The data was synthesized using the R synthpop package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fake_county
</code></pre>


<h3>Format</h3>

<p>A data frame with 39,339 rows and 38 variables:
</p>

<dl>
<dt>tid</dt><dd><p>double: Teacher ID</p>
</dd>
<dt>fake_data</dt><dd><p>double: Record Is Simulated</p>
</dd>
<dt>school_year</dt><dd><p>double: School Year</p>
</dd>
<dt>school_code</dt><dd><p>double: School Code</p>
</dd>
<dt>school_name</dt><dd><p>character: School Name</p>
</dd>
<dt>t_male</dt><dd><p>double: Teacher Is Male</p>
</dd>
<dt>t_race_ethnicity</dt><dd><p>double: Teacher Race/Ethnicity</p>
</dd>
<dt>t_job_area</dt><dd><p>double: Teacher Assignment Type</p>
</dd>
<dt>t_salary</dt><dd><p>double: Monthly Salary</p>
</dd>
<dt>t_nbpts</dt><dd><p>double: Teacher Has National Board Certification</p>
</dd>
<dt>t_tenured</dt><dd><p>double: Teacher Is Tenured</p>
</dd>
<dt>t_experience</dt><dd><p>double: Years of Teaching Experience</p>
</dd>
<dt>t_fte</dt><dd><p>double: Teacher's FTE Status</p>
</dd>
<dt>t_highest_degree</dt><dd><p>double: Teacher's Highest Degree</p>
</dd>
<dt>t_licensed_stem</dt><dd><p>double: Teacher Is Licensed In STEM Field</p>
</dd>
<dt>t_eval_obs</dt><dd><p>double: Evaluation Summary Observation Score</p>
</dd>
<dt>t_eval_growth</dt><dd><p>double: Evaluation Summary Student Growth Score</p>
</dd>
<dt>t_stay</dt><dd><p>double: Teacher in Same School in Following Year</p>
</dd>
<dt>t_transfer</dt><dd><p>double: Teacher in Different School in Following Year</p>
</dd>
<dt>t_leave</dt><dd><p>double: Teacher Not Teaching in Fake County Schools in Following Year</p>
</dd>
<dt>t_novice</dt><dd><p>double: Teacher Is Novice First-Year Teacher</p>
</dd>
<dt>t_new_hire</dt><dd><p>double: Teacher Did Not Teach in Fake County in Prior Year</p>
</dd>
<dt>sch_elem</dt><dd><p>double: School Is Elementary School</p>
</dd>
<dt>sch_middle</dt><dd><p>double: School Is Middle School</p>
</dd>
<dt>sch_high</dt><dd><p>double: School Is High School</p>
</dd>
<dt>sch_alternative</dt><dd><p>double: School Is Alternative School</p>
</dd>
<dt>sch_regular</dt><dd><p>double: School Is Regular School</p>
</dd>
<dt>sch_title_1</dt><dd><p>double: School Is Title 1 School</p>
</dd>
<dt>sch_magnet</dt><dd><p>double: School Is Magnet School</p>
</dd>
<dt>sch_vocational</dt><dd><p>double: School is Vocational School</p>
</dd>
<dt>sch_region</dt><dd><p>double: School Region Code</p>
</dd>
<dt>sch_calendar_type</dt><dd><p>double: School Calendar Type</p>
</dd>
<dt>sch_iep_pct</dt><dd><p>double: School Special Education Student Share in 2012-15</p>
</dd>
<dt>sch_minority_pct</dt><dd><p>double: School Minority Student Share in 2012-15</p>
</dd>
<dt>sch_frpl_pct</dt><dd><p>double: School Free and Reduced Price Lunch Student Share in 2012-15</p>
</dd>
<dt>sch_ela_avg</dt><dd><p>double: School ELA Test Score Average in 2012-15 (in standard deviations)</p>
</dd>
<dt>sch_math_avg</dt><dd><p>double: School Math Test Score Average in 2012-15 (in standard deviations)</p>
</dd>
<dt>sch_enroll_2015</dt><dd><p>double: School Enrollment in 2015</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://github.com/OpenSDP/fake-county">https://github.com/OpenSDP/fake-county</a>, posted under a Creative Commons license.
</p>

<hr>
<h2 id='figureN'>Create sequential figure numbers</h2><span id='topic+figureN'></span>

<h3>Description</h3>

<p>Create sequential figure numbers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>figureN(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="figureN_+3A_x">x</code></td>
<td>
<p>character string description of the figure</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An atomic character vector prepended with a Figure number
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
figureN("Distribution of cars by cylinder count")
# Inline RMarkdown code: `r figureN("Distribution of cars by cylinder count")`

#
</code></pre>

<hr>
<h2 id='get_ext'>Pull extension from a path</h2><span id='topic+get_ext'></span>

<h3>Description</h3>

<p>Pull extension from a path
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_ext(path)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_ext_+3A_path">path</code></td>
<td>
<p>file path</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The extension as a character vector
</p>

<hr>
<h2 id='get_usable_family'>Checks if a font family is usable and returns a usable font if not</h2><span id='topic+get_usable_family'></span>

<h3>Description</h3>

<p>Helper function. Checks if a given family value is available, and if not returns
the default font family (&quot;sans&quot; or user provided)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_usable_family(family, silent = FALSE, default_family = "sans")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_usable_family_+3A_family">family</code></td>
<td>
<p>the font family to check as a character</p>
</td></tr>
<tr><td><code id="get_usable_family_+3A_silent">silent</code></td>
<td>
<p>logical. If TRUE doesn't raise a warning if the font family is unavailable</p>
</td></tr>
<tr><td><code id="get_usable_family_+3A_default_family">default_family</code></td>
<td>
<p>defaults to &quot;sans&quot;, but can be set to another fallback family.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character of a usable font family
</p>

<hr>
<h2 id='header_tntp'>Insert header_script_tntp.</h2><span id='topic+header_tntp'></span>

<h3>Description</h3>

<p>Call this function from inside a .R file in RStudio to insert the standard
TNTP header into your active script.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>header_tntp()
</code></pre>


<h3>Value</h3>

<p>nothing
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
header_tntp()

</code></pre>

<hr>
<h2 id='import_segoe_ui'>Import Segoe UI Condensed font for use in charts</h2><span id='topic+import_segoe_ui'></span>

<h3>Description</h3>

<p>This function will check if Segoe UI is already accessible in R and if not
it will attempt to import it using the <code>extrafont</code> package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_segoe_ui()
</code></pre>


<h3>Value</h3>

<p>nothing
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
import_segoe_ui()

</code></pre>

<hr>
<h2 id='is_color'>Validate color inputs</h2><span id='topic+is_color'></span>

<h3>Description</h3>

<p>Validate color inputs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_color(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_color_+3A_x">x</code></td>
<td>
<p>a color</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE if x can be interpreted as a color
</p>

<hr>
<h2 id='is_drive_id'>Test if a string is formatted like a Sharepoint drive id</h2><span id='topic+is_drive_id'></span>

<h3>Description</h3>

<p>Test if a string is formatted like a Sharepoint drive id
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_drive_id(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_drive_id_+3A_x">x</code></td>
<td>
<p>string to test</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE or FALSE
</p>

<hr>
<h2 id='is_site_id'>Test if a string is formatted like a Sharepoint site id</h2><span id='topic+is_site_id'></span>

<h3>Description</h3>

<p>Test if a string is formatted like a Sharepoint site id
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_site_id(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_site_id_+3A_x">x</code></td>
<td>
<p>string to test</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE or FALSE
</p>

<hr>
<h2 id='is_site_url'>Test if a string is formatted like a Sharepoint site url</h2><span id='topic+is_site_url'></span>

<h3>Description</h3>

<p>Test if a string is formatted like a Sharepoint site url
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_site_url(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_site_url_+3A_x">x</code></td>
<td>
<p>string to test</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE or FALSE
</p>

<hr>
<h2 id='labelled_to_factors'>Convert all <code>labelled</code>-class columns to factors.</h2><span id='topic+labelled_to_factors'></span>

<h3>Description</h3>

<p>Deprecated. Use the <code>as_factor()</code> function from the <code>haven</code> package instead for the same functionality.
</p>
<p>Takes a data.frame, checks for columns that are class <code>labelled</code> from the <code>haven</code> package, and converts them to factor class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>labelled_to_factors(labels_df)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="labelled_to_factors_+3A_labels_df">labels_df</code></td>
<td>
<p>a data.frame containing some columns of class labelled</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data.frame, the same size as <code>labels_df</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
tntpr::fake_county |&gt;
  haven::as_factor()

</code></pre>

<hr>
<h2 id='palette_names'>Pallette names</h2><span id='topic+palette_names'></span>

<h3>Description</h3>

<p>This list of palette names has been superseded by the new brand colors and
new functions <code><a href="#topic+tntp_colors">tntp_colors()</a></code> and <code><a href="#topic+tntp_palette">tntp_palette()</a></code>. To see all of the new
brand palettes, use <code><a href="#topic+show_tntp_palette">show_tntp_palette()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>palette_names
</code></pre>


<h3>Format</h3>

<p>An object of class <code>character</code> of length 7.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>show_tntp_palette()

</code></pre>

<hr>
<h2 id='palette_tntp'>TNTP branded color palettes</h2><span id='topic+palette_tntp'></span>

<h3>Description</h3>

<p>This function as been superseded by <code><a href="#topic+tntp_colors">tntp_colors()</a></code> which has improved
functionality and includes the most recent TNTP brand colors.
</p>
<p>This function creates user defined color palette combinations for up to
eleven colors. There are nine TNTP approved colors: dark_blue, medium_blue,
light_blue, green, orange, gold, dark_grey (dark_gray), medium_grey
(medium_gray), light_grey (light_gray). White and black are also available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>palette_tntp(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="palette_tntp_+3A_...">...</code></td>
<td>
<p>supply quoted color names to include in color palette</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)

pal1_tntp &lt;- tntp_colors("green", "gold", "orange")
pal2_tntp &lt;- tntp_colors("navy", "cerulean", "sky")

p &lt;- ggplot(mtcars, aes(wt, mpg))
p &lt;- p + geom_point(aes(colour = factor(cyl)))
p

# Change colors to created palette
p &lt;- p + scale_color_manual(values = pal1_tntp)
p

g &lt;- ggplot(mtcars, aes(factor(cyl), mean(mpg)))
g &lt;- g + geom_bar(aes(fill = factor(cyl)), stat = "identity")
g

# Change fill to created palette
g &lt;- g + scale_fill_manual(values = pal2_tntp)
g
</code></pre>

<hr>
<h2 id='palette_tntp_scales'>scale_palette_tntp</h2><span id='topic+palette_tntp_scales'></span>

<h3>Description</h3>

<p>This function has been superseded by <code><a href="#topic+tntp_palette">tntp_palette()</a></code> which includes the new
brand colors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>palette_tntp_scales(palette = palette_names)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="palette_tntp_scales_+3A_palette">palette</code></td>
<td>
<p>the palette</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>colors &lt;- tntp_palette("likert_5")

</code></pre>

<hr>
<h2 id='parse_date'>Attempt to parse a date with common formats</h2><span id='topic+parse_date'></span>

<h3>Description</h3>

<p>Helper function for date_to_sy. Returns a date object as is, or noisily attempts to parse
a string in the form YYYY-MM-DD or MM/DD/YYYY. If the date cannot be parsed,
throws an error.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_date(date)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="parse_date_+3A_date">date</code></td>
<td>
<p>a character or Date vector to parse</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a Date vector, the same length as 'date'
</p>

<hr>
<h2 id='position_diverge'>Easy Diverging Bar Charts</h2><span id='topic+position_diverge'></span>

<h3>Description</h3>

<p>This is a modification of <code>ggplot2::position_stack()</code> for creating diverging
bar charts. In order to use this function, you <em>must</em> set a fill aesthetic
(and that aesthetic should probably be a factor). This function will
automatically break your chart into negative and positive values and display
them in the same order as your fill levels.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>position_diverge(vjust = 1, break_after = NULL, fill = FALSE, reverse = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="position_diverge_+3A_vjust">vjust</code></td>
<td>
<p>Vertical adjustment for geoms that have a position (like text or points), not a dimension (like bars or areas). Set to 0 to align with the bottom, 0.5 for the middle, and 1 (the default) for the top.</p>
</td></tr>
<tr><td><code id="position_diverge_+3A_break_after">break_after</code></td>
<td>
<p>Either an integer index or character value that represents the last positive level. The default, <code>NULL</code>, will split the levels halfway (with fewer positive levels if the total number of levels is odd).</p>
</td></tr>
<tr><td><code id="position_diverge_+3A_fill">fill</code></td>
<td>
<p>If <code>TRUE</code> will automatically scale bars to 100% as with <code>position_fill()</code></p>
</td></tr>
<tr><td><code id="position_diverge_+3A_reverse">reverse</code></td>
<td>
<p>If <code>TRUE</code>, will reverse the default stacking order.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)

# Example data
test_df &lt;- tibble::tribble(
  ~q,  ~response,  ~prop,
  'a', 'Yes',      0.25,
  'a', 'Mostly',   0.25,
  'a', 'Somewhat', 0.25,
  'a', 'Not Yet',  0.25,
  'b', 'Yes',      0.4,
  'b', 'Mostly',   0.3,
  'b', 'Somewhat', 0.2,
  'b', 'Not Yet',  0.1
  ) |&gt;
  dplyr::mutate(
    response = forcats::fct_inorder(response),
    q = forcats::fct_inorder(q)
  )

# Default diverging with text
# In interactive use, this can also be run with `position = "diverge"`

test_df |&gt;
  ggplot(aes(prop, q, fill = response)) +
  geom_col(position = position_diverge()) +
  geom_text(aes(label = scales::percent(prop,)),
            position = position_diverge(vjust = 0.5)) +
  geom_vline(xintercept = 0) +
  tntp_style(family = "sans") +
  # Reverse legend to match horizontal bar order
  guides(fill = guide_legend(reverse = TRUE)) +
  # Adjust axis labels to be positive on both sides
  scale_x_continuous(labels = ~scales::percent(abs(.)))

# Custom breaks with the break_after parameter
test_df |&gt;
  ggplot(aes(q, prop, fill = response)) +
  geom_col(position = position_diverge(break_after = 'Yes')) +
  geom_hline(yintercept = 0) +
  tntp_style(family = "sans") +
  # Adjust axis labels to be positive on both sides
  scale_y_continuous(labels = ~scales::percent(abs(.)))

</code></pre>

<hr>
<h2 id='process_type'>Determine function type by extension and provided type
Handles type validation</h2><span id='topic+process_type'></span>

<h3>Description</h3>

<p>Determine function type by extension and provided type
Handles type validation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>process_type(ext, type)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="process_type_+3A_ext">ext</code></td>
<td>
<p>File extension (from get_ext)</p>
</td></tr>
<tr><td><code id="process_type_+3A_type">type</code></td>
<td>
<p>User-specified type</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a type (&quot;dataframe&quot; &quot;rds&quot; or &quot;rdata&quot;)
</p>

<hr>
<h2 id='prop_matching'>Calculate the percent of non-missing values in a character vector containing the values of interest.  This is a helper function for factorize_df().</h2><span id='topic+prop_matching'></span>

<h3>Description</h3>

<p>Calculate the percent of non-missing values in a character vector containing the values of interest.  This is a helper function for factorize_df().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prop_matching(vec, valid_strings, ignore.case = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prop_matching_+3A_vec">vec</code></td>
<td>
<p>character vector.</p>
</td></tr>
<tr><td><code id="prop_matching_+3A_valid_strings">valid_strings</code></td>
<td>
<p>the values that the variable can possibly take on.</p>
</td></tr>
<tr><td><code id="prop_matching_+3A_ignore.case">ignore.case</code></td>
<td>
<p>if TRUE, ignores case in matching</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a numeric proportion between 0 and 1.
</p>

<hr>
<h2 id='recode_to_binary'>Recode a variable into binary groups, e.g., &quot;Top-2&quot; and &quot;Not in Top-2&quot;.</h2><span id='topic+recode_to_binary'></span>

<h3>Description</h3>

<p>Recodes a character variable into a binary result, a two-level factor.  All values matching of the supplied character strings in the <code>to_match</code> vector are coded into the first level of the factor; all other values are coded into the other level.  <code>NA</code> remains <code>NA</code>.  The default factor labels are &quot;Selected&quot;  and &quot;Not selected&quot; but these can be overridden.
</p>
<p>This recoding is not case-sensitive; if you specify &quot;agree&quot; as a top-2 value, &quot;Agree&quot; will be counted as Top-2, and vice versa.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recode_to_binary(
  x,
  to_match = c("strongly agree", "agree"),
  label_matched = "Selected",
  label_unmatched = "Not selected"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="recode_to_binary_+3A_x">x</code></td>
<td>
<p>the character or factor vector to be recoded</p>
</td></tr>
<tr><td><code id="recode_to_binary_+3A_to_match">to_match</code></td>
<td>
<p>a character vector with the strings that should be put in the first level of the factor.  Defaults to &quot;strongly agree&quot; and &quot;agree&quot; but can be overwritten.</p>
</td></tr>
<tr><td><code id="recode_to_binary_+3A_label_matched">label_matched</code></td>
<td>
<p>what should be the factor label of values that match the strings specified in <code>to_match</code>?  Defaults to &quot;Selected&quot;</p>
</td></tr>
<tr><td><code id="recode_to_binary_+3A_label_unmatched">label_unmatched</code></td>
<td>
<p>what should be the factor label of values that don't match the strings specified in <code>to_match</code>?  Defaults to &quot;Not selected&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a factor variable (for nicer ordering in calls to <code>janitor::tabyl</code>) with values mapped to the two levels.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>agreement &lt;- c(
  "Strongly agree", "Agree", "Somewhat agree",
  "Somewhat disagree", "Strongly disagree", "Frogs", NA
)

recode_to_binary(agreement) # default values of "strongly agree" and "agree" are used for recoding
recode_to_binary(agreement,
  label_matched = "Top-2 Agree",
  label_unmatched = "Not in Top-2"
) # custom labels of factor levels
recode_to_binary(agreement, "frogs")
recode_to_binary(
  agreement,
  "frogs",
  "FROGS!!!",
  "not frogs"
) # custom matching values &amp; labels of factor levels

freq &lt;- c("always", "often", "sometimes", "never")
recode_to_binary(freq, "always", "always", "less than always")
</code></pre>

<hr>
<h2 id='scale_colour_tntp'>scale_color_tntp/scale_fill_tntp</h2><span id='topic+scale_colour_tntp'></span><span id='topic+scale_color_tntp'></span><span id='topic+scale_fill_tntp'></span>

<h3>Description</h3>

<p>These functions are deprecated. Please use
<code>scale_color_manual(values = tntp_palette(palette_name))</code> or
<code>scale_fill_manual(values = tntp_palette(palette_name))</code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scale_colour_tntp(palette = palette_names, ...)

scale_color_tntp(palette = palette_names, ...)

scale_fill_tntp(palette = palette_names, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="scale_colour_tntp_+3A_palette">palette</code></td>
<td>
<p>character string describing the desired palette from</p>
</td></tr>
<tr><td><code id="scale_colour_tntp_+3A_...">...</code></td>
<td>
<p>other arguments to pass through to ggplot2::discrete_scale()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot Scale object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)
library(dplyr)

x &lt;- mtcars |&gt;
  count(cyl, am) |&gt;
  mutate(am = as.factor(am))

ggplot(x, aes(x = cyl, y = n, fill = am)) + # you need a fill aesthetic
  geom_col() +
  scale_fill_manual(values = tntp_palette())

</code></pre>

<hr>
<h2 id='set_data_memo_formatting'>Set the formatting options for a TNTP Data Memo</h2><span id='topic+set_data_memo_formatting'></span>

<h3>Description</h3>

<p>internal function that calls standard formatting options for the Data Memo RMarkdown template
moved here to keep the actual memo template cleaner and easier to use
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_data_memo_formatting()
</code></pre>


<h3>Value</h3>

<p>nothing
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
set_data_memo_formatting()

</code></pre>

<hr>
<h2 id='setup_repo'>Initialize a new repository, and a single subfolder, TNTP style.</h2><span id='topic+setup_repo'></span>

<h3>Description</h3>

<p>Create a new repository on Bitbucket, then set your working
directory to that folder and run this function.  It will set up the main
repo folder as well as a single subfolder in which you can work on your
immediate project.
</p>
<p>You must specify the subfolder name as well as the long name associated with
that project and the analyst(s) working on it.  These latter two values are
used to create a README.Md file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setup_repo(project_path, subfolder, proj_name, analyst_name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="setup_repo_+3A_project_path">project_path</code></td>
<td>
<p>the path to the main project directory. To use the current project, use 'project_path = here::here()'.</p>
</td></tr>
<tr><td><code id="setup_repo_+3A_subfolder">subfolder</code></td>
<td>
<p>a character vector containing the concise name of a project subfolder.
E.g., if the repository is the name of a city &quot;Anywhere City&quot;, a project subfolder might be
&quot;ela_access&quot; or &quot;aps_talent_landscape&quot;).</p>
</td></tr>
<tr><td><code id="setup_repo_+3A_proj_name">proj_name</code></td>
<td>
<p>the longer, full name of the subfolder project.  This will
appear in the subfolder's README.md file.  E.g., &quot;Access to Grade-Level ELA Content Pilot.&quot;</p>
</td></tr>
<tr><td><code id="setup_repo_+3A_analyst_name">analyst_name</code></td>
<td>
<p>the name(s) of the analysts currently working on the subfolder
project.  This will appear in the subfolder's README.md file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Setting up in a temporary directory
setup_repo(project_path = tempdir(),
           subfolder = "ela_access",
           proj_name = "Access to Grade-Level ELA Content",
           analyst_name = "Dustin Pashouwer and Sam Firke")
</code></pre>

<hr>
<h2 id='setup_subdirectory'>Initialize a new subdirectory in an existing repository, TNTP style.</h2><span id='topic+setup_subdirectory'></span>

<h3>Description</h3>

<p>A repository might represent a region, like &quot;Anywhere City&quot;,
or a major client or contract, like &quot;Midwestern Charter Network.
Within that repo you would have a subfolder for each analysis project.
This function creates such a subfolder and populates it with folders and a README.
</p>
<p>To use: within an existing repository on Bitbucket, set your your working
directory to that folder and run this function to create a sub-folder.
</p>
<p>Use <code>setup_repo()</code> in a blank new repository to add the first project subfolder
and create the RProject and .gitignore files.  Add subsequent analysis project folders
with this function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setup_subdirectory(project_path, subfolder, proj_name, analyst_name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="setup_subdirectory_+3A_project_path">project_path</code></td>
<td>
<p>the path to the main project directory. To use the current project, use 'project_path = here::here()'.</p>
</td></tr>
<tr><td><code id="setup_subdirectory_+3A_subfolder">subfolder</code></td>
<td>
<p>a character vector containing the concise name of a project subfolder.
E.g., if the repository is the name of a city &quot;Anywhere City&quot;, a project subfolder might be
&quot;ela_access&quot; or &quot;aps_talent_landscape&quot;).</p>
</td></tr>
<tr><td><code id="setup_subdirectory_+3A_proj_name">proj_name</code></td>
<td>
<p>the longer, full name of the subfolder project.  This will
appear in the subfolder's README.md file.</p>
</td></tr>
<tr><td><code id="setup_subdirectory_+3A_analyst_name">analyst_name</code></td>
<td>
<p>the name(s) of the analysts currently working on the subfolder
project.  This will appear in the subfolder's README.md file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Setting up in a temporary directory
setup_subdirectory(tempdir(),
                   subfolder = "ela_access",
                   proj_name = "Equitable Access to Grade-Level ELA",
                   analyst_name = "Dustin Pashouwer and Sam Firke")
</code></pre>

<hr>
<h2 id='show_in_excel'>Write Dataframe to a temp excel file and open it.</h2><span id='topic+show_in_excel'></span>

<h3>Description</h3>

<p>Write Dataframe to a temp excel file and open it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_in_excel(.data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="show_in_excel_+3A_.data">.data</code></td>
<td>
<p>Dataframe</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# View a data set in excel
mtcars |&gt; show_in_excel()


</code></pre>

<hr>
<h2 id='sp_check_folder'>Check for existence of a Sharepoint folder and offer to create it if it
doesn't exist</h2><span id='topic+sp_check_folder'></span>

<h3>Description</h3>

<p>Check for existence of a Sharepoint folder and offer to create it if it
doesn't exist
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sp_check_folder(site, drive, folder_path)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sp_check_folder_+3A_site">site</code></td>
<td>
<p>ms_site object</p>
</td></tr>
<tr><td><code id="sp_check_folder_+3A_drive">drive</code></td>
<td>
<p>ms_drive object</p>
</td></tr>
<tr><td><code id="sp_check_folder_+3A_folder_path">folder_path</code></td>
<td>
<p>path to an item</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing
</p>

<hr>
<h2 id='sp_create_folder'>Create Sharepoint Folder</h2><span id='topic+sp_create_folder'></span>

<h3>Description</h3>

<p>Wrapper around the <code style="white-space: pre;">&#8288;$create_folder()&#8288;</code> method from <a href="Microsoft365R.html#topic+ms_drive">Microsoft365R::ms_drive</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sp_create_folder(folder_path, site = NULL, drive = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sp_create_folder_+3A_folder_path">folder_path</code></td>
<td>
<p>Path to the new folder</p>
</td></tr>
<tr><td><code id="sp_create_folder_+3A_site">site</code></td>
<td>
<p>Site identifier. Can be the site name, id, URL, or an ms_site object. If no site identifier is provided, uses the stored default site if it exists.</p>
</td></tr>
<tr><td><code id="sp_create_folder_+3A_drive">drive</code></td>
<td>
<p>Drive identifier. Can be the drive name, id, or an ms_drive object. If site is provided but drive is not, uses the first drive of the provided site. If neither is provided, uses the stored default drive if it exists.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns <code>folder_path</code> invisibly
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Set site/drive defaults
sp_defaults("Data Analytics")

# Create a folder
sp_create_folder("new/folder")

</code></pre>

<hr>
<h2 id='sp_defaults'>Set default Sharepoint settings for a session</h2><span id='topic+sp_defaults'></span>

<h3>Description</h3>

<p>Sets default site and drive for using the other <code style="white-space: pre;">&#8288;sp_*()&#8288;</code> functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sp_defaults(site = NULL, drive = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sp_defaults_+3A_site">site</code></td>
<td>
<p>Site identifier. Can be the site_name, site_url, site_id, or an ms_site object. If not provided, uses the current stored default site if it exists.</p>
</td></tr>
<tr><td><code id="sp_defaults_+3A_drive">drive</code></td>
<td>
<p>Name of the drive within the site. If site is provided but drive is not, uses the first drive of the provided site. If neither is provided, uses the stored default drive if it exists.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sp_list">sp_list()</a></code>, <code><a href="#topic+sp_read">sp_read()</a></code>, <code><a href="#topic+sp_write">sp_write()</a></code>, <code><a href="#topic+sp_site">sp_site()</a></code>, <code><a href="#topic+sp_drive">sp_drive()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Set default site
sp_defaults(site = "Data Analytics")

# List drives from the default site
sp_list_drives()

# List files/folders in the default site and drive.
# Since no default drive was added, uses the first listed drive for the site.
sp_list()

</code></pre>

<hr>
<h2 id='sp_error'>For parsing sharepoint errors (right now just path errors)</h2><span id='topic+sp_error'></span>

<h3>Description</h3>

<p>For parsing sharepoint errors (right now just path errors)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sp_error(cnd, path_string)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sp_error_+3A_cnd">cnd</code></td>
<td>
<p>condition</p>
</td></tr>
<tr><td><code id="sp_error_+3A_path_string">path_string</code></td>
<td>
<p>path string (from sp_string())</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing
</p>

<hr>
<h2 id='sp_list'>List Sharepoint Contents</h2><span id='topic+sp_list'></span><span id='topic+sp_list_drives'></span><span id='topic+sp_list_sites'></span><span id='topic+sp_list_subsites'></span>

<h3>Description</h3>

<p>Lists site/subsite/drive/folder contents. Can be used with default site/drive set by
<code><a href="#topic+sp_defaults">sp_defaults()</a></code> or with a specified site/drive.
</p>

<ul>
<li> <p><code>sp_list()</code> lists the contents of a Sharepoint Drive or a folder.
</p>
</li>
<li> <p><code>sp_list_drives()</code> lists the drives contained in a Sharepoint site.
</p>
</li>
<li> <p><code>sp_list_subsites()</code> lists any subsites of the specified Sharepoint site.
</p>
</li>
<li> <p><code>sp_list_sites()</code> lists the sites you have access to. These are the sites you are following in Sharepoint
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>sp_list(
  folder = "",
  site = NULL,
  drive = NULL,
  pattern = NULL,
  full_names = FALSE,
  recursive = FALSE,
  include_dirs = FALSE
)

sp_list_drives(site = NULL, pattern = NULL)

sp_list_sites(pattern = NULL)

sp_list_subsites(site = NULL, pattern = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sp_list_+3A_folder">folder</code></td>
<td>
<p>Path to the folder. By default, lists the top-level contents of the drive.</p>
</td></tr>
<tr><td><code id="sp_list_+3A_site">site</code></td>
<td>
<p>Site identifier. Can be the site name, id, URL, or an ms_site object. If no site identifier is provided, uses the stored default site if it exists.</p>
</td></tr>
<tr><td><code id="sp_list_+3A_drive">drive</code></td>
<td>
<p>Drive identifier. Can be the drive name, id, or an ms_drive object. If site is provided but drive is not, uses the first drive of the provided site. If neither is provided, uses the stored default drive if it exists.</p>
</td></tr>
<tr><td><code id="sp_list_+3A_pattern">pattern</code></td>
<td>
<p>Optional regular expression. Only names which match the regular expression will be returned.</p>
</td></tr>
<tr><td><code id="sp_list_+3A_full_names">full_names</code></td>
<td>
<p>logical. If TRUE, the directory path is prepended to the file names to give a relative file path. If FALSE, the file names (rather than paths) are returned.</p>
</td></tr>
<tr><td><code id="sp_list_+3A_recursive">recursive</code></td>
<td>
<p>logical. Should the listing recurse into directories? If TRUE, full_names is also set to TRUE.</p>
</td></tr>
<tr><td><code id="sp_list_+3A_include_dirs">include_dirs</code></td>
<td>
<p>logical. Should subdirectory names be included in recursive listings? (They always are in non-recursive ones)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with name and additional information on the relevant sites/drives/files
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# List drives from the default site
sp_list_drives()

# List drives from a specific site
sp_list_drives("Data Analytics")

</code></pre>

<hr>
<h2 id='sp_read'>Read/Write from Sharepoint</h2><span id='topic+sp_read'></span><span id='topic+sp_write'></span>

<h3>Description</h3>

<p>Read or write data to/from a Sharepoint drive. Can be used with default
site/drive set by <code><a href="#topic+sp_defaults">sp_defaults()</a></code> or with a specified site/drive.
</p>
<p>Currently supported file types include: <code>.csv</code>, <code>.csv2</code>, <code>.tsv</code>, <code>.xls</code>,
<code>.xlsx</code>, <code>.rds</code>
</p>
<p>These functions will attempt to use the appropriate read/write function based
on the file extension, however this can be overridden by specifying type.
</p>
<p>The <code>...</code> parameter is passed on to the appropriate reading or writing
function. See the details section for more information on these functions
by type.
</p>
<p>If the folder in <code>path</code> does not yet exist, the user will be prompted if they
would like to create it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sp_read(path, site = NULL, drive = NULL, type = NULL, ...)

sp_write(x, path, site = NULL, drive = NULL, type = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sp_read_+3A_path">path</code></td>
<td>
<p>The location in the Sharepoint drive</p>
</td></tr>
<tr><td><code id="sp_read_+3A_site">site</code></td>
<td>
<p>Site identifier. Can be the site name, id, URL, or an ms_site object. If no site identifier is provided, uses the stored default site if it exists.</p>
</td></tr>
<tr><td><code id="sp_read_+3A_drive">drive</code></td>
<td>
<p>Drive identifier. Can be the drive name, id, or an ms_drive object. If site is provided but drive is not, uses the first drive of the provided site. If neither is provided, uses the stored default drive if it exists.</p>
</td></tr>
<tr><td><code id="sp_read_+3A_type">type</code></td>
<td>
<p>Optional. One of &quot;dataframe&quot; (for delimited files), &quot;xlsx&quot;, or &quot;rds&quot;. Uses the file extension to determine type if not provided.</p>
</td></tr>
<tr><td><code id="sp_read_+3A_...">...</code></td>
<td>
<p>Additional arguments passed on to the reading/writing function.</p>
</td></tr>
<tr><td><code id="sp_read_+3A_x">x</code></td>
<td>
<p>The object to be written</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>sp_read()</code> returns an R object as specified by type. <code>sp_write()</code>
returns x, invisibly
</p>


<h3>Details</h3>

<p>For more information on methods (shown as <code style="white-space: pre;">&#8288;$__()&#8288;</code> below) see documentation
on <a href="Microsoft365R.html#topic+ms_drive">Microsoft365R::ms_drive</a>.
</p>


<h4>Reading Functions</h4>


<ul>
<li><p> &quot;.csv&quot;, &quot;.csv2&quot;, &quot;.tsv&quot; are read using the <code style="white-space: pre;">&#8288;$load_dataframe()&#8288;</code> method,
which uses <code><a href="readr.html#topic+read_delim">readr::read_delim()</a></code>.
</p>
</li>
<li><p> &quot;.rds&quot; is read using the <code style="white-space: pre;">&#8288;$load_rds()&#8288;</code> method which accepts no additional
arguments.
</p>
</li>
<li><p> &quot;.xls&quot; and &quot;.xlsx&quot; are read using <code><a href="readxl.html#topic+read_excel">readxl::read_excel()</a></code> (if installed).
The function will download the excel file temporarily, then import it and
delete the temporary copy
</p>
</li></ul>




<h4>Writing Functions</h4>


<ul>
<li><p> &quot;.csv&quot;, &quot;.csv2&quot;, &quot;.tsv&quot; are written using the <code style="white-space: pre;">&#8288;$save_dataframe()&#8288;</code> method
and uses <code><a href="readr.html#topic+write_delim">readr::write_delim()</a></code>. Delimiter will be assumed by the extension
unless provided in a <code>delim</code> argument
</p>
</li>
<li><p> &quot;.rds&quot; is written using the <code style="white-space: pre;">&#8288;$save_rds()&#8288;</code> method, which accepts no
additional arguments
</p>
</li>
<li><p> &quot;.xlsx&quot; is written using <code><a href="writexl.html#topic+write_xlsx">writexl::write_xlsx()</a></code> (if
installed) and then uploaded using the <code style="white-space: pre;">&#8288;$upload_file()&#8288;</code> method.
</p>
</li></ul>




<h3>See Also</h3>

<p><code><a href="#topic+sp_upload">sp_upload()</a></code>, <code><a href="#topic+sp_download">sp_download()</a></code>; <code style="white-space: pre;">&#8288;$upload_file()&#8288;</code>, <code style="white-space: pre;">&#8288;$download_file()&#8288;</code>, <code style="white-space: pre;">&#8288;$save_rdata()&#8288;</code>, <code style="white-space: pre;">&#8288;$load_rdata()&#8288;</code> from <a href="Microsoft365R.html#topic+ms_drive">Microsoft365R::ms_drive</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Set site defaults
sp_defaults(site = "Data Analytics")

# Write a file
sp_write(mtcars, "mtcars.csv")

# Write a file, specifying type and adding additional parameters
sp_write(mtcars, "mtcars.txt", type = "dataframe", delim = "|")

# Read a file
x &lt;- sp_read("mtcars.csv")
y &lt;- sp_read("mtcars.txt", type = "dataframe", delim = "|")

# Save / load an .rdata file using ms_drive methods
dr &lt;- sp_drive() # Get stored default ms_drive object
dr$save_rdata(x, y, file = "data.rdata")
dr$load_rdata("data.rdata")


</code></pre>

<hr>
<h2 id='sp_read_xlsx'>Internal function for reading excel files from Sharepoint</h2><span id='topic+sp_read_xlsx'></span>

<h3>Description</h3>

<p>Internal function for reading excel files from Sharepoint
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sp_read_xlsx(path, site, drive, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sp_read_xlsx_+3A_path">path</code></td>
<td>
<p>path</p>
</td></tr>
<tr><td><code id="sp_read_xlsx_+3A_site">site</code></td>
<td>
<p>ms_site object</p>
</td></tr>
<tr><td><code id="sp_read_xlsx_+3A_drive">drive</code></td>
<td>
<p>ms_drive object</p>
</td></tr>
<tr><td><code id="sp_read_xlsx_+3A_...">...</code></td>
<td>
<p>additional arguments from sp_read()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data read by readxl::read_excel()
</p>

<hr>
<h2 id='sp_site'>Return Microsoft365R site or drive object</h2><span id='topic+sp_site'></span><span id='topic+sp_drive'></span>

<h3>Description</h3>

<p>Pulls the site or drive (if given) or returns the stored default. Useful if
you need to use methods that aren't currently wrapped by tntpr
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sp_site(site = NULL)

sp_drive(drive = NULL, site = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sp_site_+3A_site">site</code></td>
<td>
<p>Site identifier. Can be the site name, id, URL, or an ms_site object. If no site identifier is provided, uses the stored default site if it exists.</p>
</td></tr>
<tr><td><code id="sp_site_+3A_drive">drive</code></td>
<td>
<p>Drive identifier. Can be the drive name, id, or an ms_drive object. If site is provided but drive is not, uses the first drive of the provided site. If neither is provided, uses the stored default drive if it exists.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Microsoft365R site object or drive object
</p>


<h3>See Also</h3>

<p><a href="Microsoft365R.html#topic+ms_site">Microsoft365R::ms_site</a>, <a href="Microsoft365R.html#topic+ms_drive">Microsoft365R::ms_drive</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Get current default site or drive
x &lt;- sp_site()
y &lt;- sp_drive()

# Get specified site or drive
x &lt;- sp_site("Data Analytics")
y &lt;- sp_drive("Documents") # Uses stored default site
y &lt;- sp_drive("Documents", site = "Data Analytics") # Use provided site

# Use additional methods in the site/drive objects
x$get_lists()
y$get_item_properties("Analysis Tools.docx")

</code></pre>

<hr>
<h2 id='sp_string'>Internal function to create cli-friendly site/drive/path string</h2><span id='topic+sp_string'></span>

<h3>Description</h3>

<p>Can use either a site_name or site object, a drive_name or drive_object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sp_string(
  site = NULL,
  site_name = NULL,
  drive = NULL,
  drive_name = NULL,
  path = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sp_string_+3A_site">site</code></td>
<td>
<p>site object (from sp_site())</p>
</td></tr>
<tr><td><code id="sp_string_+3A_site_name">site_name</code></td>
<td>
<p>site name</p>
</td></tr>
<tr><td><code id="sp_string_+3A_drive">drive</code></td>
<td>
<p>drive object (from sp_drive())</p>
</td></tr>
<tr><td><code id="sp_string_+3A_drive_name">drive_name</code></td>
<td>
<p>drive name</p>
</td></tr>
<tr><td><code id="sp_string_+3A_path">path</code></td>
<td>
<p>path</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a cli-formatted string
</p>

<hr>
<h2 id='sp_upload'>Sharepoint upload/download</h2><span id='topic+sp_upload'></span><span id='topic+sp_download'></span>

<h3>Description</h3>

<p><code>sp_upload()</code> and <code>sp_download()</code> wrap the <code style="white-space: pre;">&#8288;$upload_file()&#8288;</code> and <code style="white-space: pre;">&#8288;$download_file()&#8288;</code>
methods from the <a href="Microsoft365R.html#topic+ms_drive">Microsoft365R::ms_drive</a> object. In addition, <code>sp_upload()</code> checks for the
existence of the destination folder and will prompt the user to create it if
it doesn't exist.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sp_upload(src, dest = basename(src), site = NULL, drive = NULL)

sp_download(
  src,
  dest = basename(src),
  site = NULL,
  drive = NULL,
  overwrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sp_upload_+3A_src">src</code></td>
<td>
<p>Location of source file. Either a local path (for <code>sp_upload</code>), or a Sharepoint path (for <code>sp_download</code>)</p>
</td></tr>
<tr><td><code id="sp_upload_+3A_dest">dest</code></td>
<td>
<p>Location of destination file. If not provided, uses the same file name as <code>src</code></p>
</td></tr>
<tr><td><code id="sp_upload_+3A_site">site</code></td>
<td>
<p>Site identifier. Can be the site name, id, URL, or an ms_site object. If no site identifier is provided, uses the stored default site if it exists.</p>
</td></tr>
<tr><td><code id="sp_upload_+3A_drive">drive</code></td>
<td>
<p>Drive identifier. Can be the drive name, id, or an ms_drive object. If site is provided but drive is not, uses the first drive of the provided site. If neither is provided, uses the stored default drive if it exists.</p>
</td></tr>
<tr><td><code id="sp_upload_+3A_overwrite">overwrite</code></td>
<td>
<p>Should the destination file be overwritten if it exists?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>dest</code> invisibly
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sp_read">sp_read()</a></code>, <code><a href="#topic+sp_write">sp_write()</a></code>; <code style="white-space: pre;">&#8288;$upload_file()&#8288;</code> and <code style="white-space: pre;">&#8288;$download_file()&#8288;</code> from <a href="Microsoft365R.html#topic+ms_drive">Microsoft365R::ms_drive</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Set site defaults
sp_defaults("Data Analytics")

# List files
sp_list()

# Download a document locally
sp_download("Analysis Tools.docx", "AT.docx")

# Upload a document
sp_upload("AT.docx", "Analysis Tools.docx")

</code></pre>

<hr>
<h2 id='sp_write_xlsx'>Function for uploading an xls / xlsx file</h2><span id='topic+sp_write_xlsx'></span>

<h3>Description</h3>

<p>Function for uploading an xls / xlsx file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sp_write_xlsx(x, path, site, drive, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sp_write_xlsx_+3A_x">x</code></td>
<td>
<p>R object</p>
</td></tr>
<tr><td><code id="sp_write_xlsx_+3A_path">path</code></td>
<td>
<p>path on the Sharepoint drive</p>
</td></tr>
<tr><td><code id="sp_write_xlsx_+3A_site">site</code></td>
<td>
<p>ms_site object</p>
</td></tr>
<tr><td><code id="sp_write_xlsx_+3A_drive">drive</code></td>
<td>
<p>ms_drive object</p>
</td></tr>
<tr><td><code id="sp_write_xlsx_+3A_...">...</code></td>
<td>
<p>additional arguments passed on from sp_write()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing
</p>

<hr>
<h2 id='standardize_case'>Update case of a character vector</h2><span id='topic+standardize_case'></span>

<h3>Description</h3>

<p>Helper function for factorize_df(). Returns a vector of the same length as vec,
with any values that match values in valid_strings updated to the case in valid_strings
</p>


<h3>Usage</h3>

<pre><code class='language-R'>standardize_case(vec, new_case)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="standardize_case_+3A_vec">vec</code></td>
<td>
<p>The character vector you want to update</p>
</td></tr>
<tr><td><code id="standardize_case_+3A_new_case">new_case</code></td>
<td>
<p>A character vector of correctly cased strings</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character vector the same length as vec
</p>

<hr>
<h2 id='tableN'>Create sequential table numbers</h2><span id='topic+tableN'></span>

<h3>Description</h3>

<p>Create sequential table numbers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tableN(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tableN_+3A_x">x</code></td>
<td>
<p>character string description of the figure</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An atomic character vector prepended with a Table number
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
tableN("Distribution of cars by cylinder count")
# Inline RMarkdown code: `r tableN("Distribution of cars by cylinder count")`
</code></pre>

<hr>
<h2 id='teacher_survey'>Teacher survey data</h2><span id='topic+teacher_survey'></span>

<h3>Description</h3>

<p>Simulated teacher survey data. Data only includes teh four TNTP high expectations questions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>teacher_survey
</code></pre>


<h3>Format</h3>

<p>## 'teacher survey'
A data frame with 5 columns and 20 rows. The five columns are a 'timing' column,
followed by four column for each of the four high expectations questions. Responses
are on the 'strongly agree' to strongly disagree' 6-point scale.
</p>


<h3>Source</h3>

<p>simulated in 'data-raw/teacher_survey.R'
</p>

<hr>
<h2 id='theme_tntp'>TNTP's ggplot2 theme</h2><span id='topic+theme_tntp'></span>

<h3>Description</h3>

<p>This theme is superseded by [tntp_style()]. Ggplot2 theme customized for TNTP aesthetics
</p>


<h3>Usage</h3>

<pre><code class='language-R'>theme_tntp(
  show_legend_title = TRUE,
  base_size = 12,
  base_family = "Segoe UI",
  grid_color = "grey93",
  title_align = "center",
  title_color = "black",
  title_size = 12,
  subtitle_align = "center",
  subtitle_color = "black",
  subtitle_size = 12,
  caption_align = "right",
  caption_color = "black",
  caption_size = 12
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="theme_tntp_+3A_show_legend_title">show_legend_title</code></td>
<td>
<p>logical. Should the legend title be shown?  Leave as <code>TRUE</code> if you want to change the legend title with a subsequent line <code>+ labs(...)</code>.</p>
</td></tr>
<tr><td><code id="theme_tntp_+3A_base_size">base_size</code></td>
<td>
<p>base font size</p>
</td></tr>
<tr><td><code id="theme_tntp_+3A_base_family">base_family</code></td>
<td>
<p>base font family</p>
</td></tr>
<tr><td><code id="theme_tntp_+3A_grid_color">grid_color</code></td>
<td>
<p>color for major gridlines</p>
</td></tr>
<tr><td><code id="theme_tntp_+3A_title_align">title_align</code></td>
<td>
<p>alignment of main title, defaults to &quot;center&quot;; also accepts &quot;left&quot; or &quot;right&quot;</p>
</td></tr>
<tr><td><code id="theme_tntp_+3A_title_color">title_color</code></td>
<td>
<p>color of title text</p>
</td></tr>
<tr><td><code id="theme_tntp_+3A_title_size">title_size</code></td>
<td>
<p>size of title text</p>
</td></tr>
<tr><td><code id="theme_tntp_+3A_subtitle_align">subtitle_align</code></td>
<td>
<p>alignment of sub-title, defaults to &quot;center&quot;; also accepts &quot;left&quot; or &quot;right&quot;</p>
</td></tr>
<tr><td><code id="theme_tntp_+3A_subtitle_color">subtitle_color</code></td>
<td>
<p>color of subtitle text</p>
</td></tr>
<tr><td><code id="theme_tntp_+3A_subtitle_size">subtitle_size</code></td>
<td>
<p>size of subtitle text</p>
</td></tr>
<tr><td><code id="theme_tntp_+3A_caption_align">caption_align</code></td>
<td>
<p>alignment of caption, defaults to &quot;right&quot;; also accepts &quot;left&quot; or &quot;center&quot;</p>
</td></tr>
<tr><td><code id="theme_tntp_+3A_caption_color">caption_color</code></td>
<td>
<p>color of caption text</p>
</td></tr>
<tr><td><code id="theme_tntp_+3A_caption_size">caption_size</code></td>
<td>
<p>size of caption text</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot theme object.
</p>

<hr>
<h2 id='theme_tntp_2018'>A precise &amp; pristine <code>ggplot2</code> theme with opinionated defaults and an emphasis on typography</h2><span id='topic+theme_tntp_2018'></span>

<h3>Description</h3>

<p>This theme is superseded by <code><a href="#topic+tntp_style">tntp_style()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>theme_tntp_2018(
  base_family = "Segoe UI",
  base_size = 11.5,
  plot_title_family = base_family,
  plot_title_size = 18,
  plot_title_face = "bold",
  plot_title_margin = 10,
  subtitle_family = base_family,
  subtitle_size = 12,
  subtitle_face = "plain",
  subtitle_margin = 15,
  strip_text_family = base_family,
  strip_text_size = 12,
  strip_text_face = "plain",
  caption_family = base_family,
  caption_size = 9,
  caption_face = "italic",
  caption_margin = 10,
  axis_text = TRUE,
  axis_text_size = base_size,
  axis_title_family = subtitle_family,
  axis_title_size = 9,
  axis_title_face = "plain",
  axis_title_just = "rt",
  plot_margin = ggplot2::margin(30, 30, 30, 30),
  grid_col = "grey93",
  grid = TRUE,
  axis_col = "#cccccc",
  axis = FALSE,
  ticks = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="theme_tntp_2018_+3A_base_family">base_family</code>, <code id="theme_tntp_2018_+3A_base_size">base_size</code></td>
<td>
<p>base font family and size</p>
</td></tr>
<tr><td><code id="theme_tntp_2018_+3A_plot_title_family">plot_title_family</code>, <code id="theme_tntp_2018_+3A_plot_title_face">plot_title_face</code>, <code id="theme_tntp_2018_+3A_plot_title_size">plot_title_size</code>, <code id="theme_tntp_2018_+3A_plot_title_margin">plot_title_margin</code></td>
<td>
<p>plot title family, face, size and margi</p>
</td></tr>
<tr><td><code id="theme_tntp_2018_+3A_subtitle_family">subtitle_family</code>, <code id="theme_tntp_2018_+3A_subtitle_face">subtitle_face</code>, <code id="theme_tntp_2018_+3A_subtitle_size">subtitle_size</code></td>
<td>
<p>plot subtitle family, face and size</p>
</td></tr>
<tr><td><code id="theme_tntp_2018_+3A_subtitle_margin">subtitle_margin</code></td>
<td>
<p>plot subtitle margin bottom (single numeric value)</p>
</td></tr>
<tr><td><code id="theme_tntp_2018_+3A_strip_text_family">strip_text_family</code>, <code id="theme_tntp_2018_+3A_strip_text_face">strip_text_face</code>, <code id="theme_tntp_2018_+3A_strip_text_size">strip_text_size</code></td>
<td>
<p>facet label font family, face and size</p>
</td></tr>
<tr><td><code id="theme_tntp_2018_+3A_caption_family">caption_family</code>, <code id="theme_tntp_2018_+3A_caption_face">caption_face</code>, <code id="theme_tntp_2018_+3A_caption_size">caption_size</code>, <code id="theme_tntp_2018_+3A_caption_margin">caption_margin</code></td>
<td>
<p>plot caption family, face, size and margin</p>
</td></tr>
<tr><td><code id="theme_tntp_2018_+3A_axis_text">axis_text</code></td>
<td>
<p>add x or y axes text? <code>X</code>, <code>Y</code></p>
</td></tr>
<tr><td><code id="theme_tntp_2018_+3A_axis_text_size">axis_text_size</code></td>
<td>
<p>font size of axis text</p>
</td></tr>
<tr><td><code id="theme_tntp_2018_+3A_axis_title_family">axis_title_family</code>, <code id="theme_tntp_2018_+3A_axis_title_face">axis_title_face</code>, <code id="theme_tntp_2018_+3A_axis_title_size">axis_title_size</code></td>
<td>
<p>axis title font family, face and size</p>
</td></tr>
<tr><td><code id="theme_tntp_2018_+3A_axis_title_just">axis_title_just</code></td>
<td>
<p>axis title font justification, one of <code style="white-space: pre;">&#8288;[blmcrt]&#8288;</code></p>
</td></tr>
<tr><td><code id="theme_tntp_2018_+3A_plot_margin">plot_margin</code></td>
<td>
<p>plot margin (specify with <code><a href="ggplot2.html#topic+element">ggplot2::margin()</a></code>)</p>
</td></tr>
<tr><td><code id="theme_tntp_2018_+3A_grid_col">grid_col</code>, <code id="theme_tntp_2018_+3A_axis_col">axis_col</code></td>
<td>
<p>grid &amp; axis colors; both default to <code style="white-space: pre;">&#8288;#cccccc&#8288;</code></p>
</td></tr>
<tr><td><code id="theme_tntp_2018_+3A_grid">grid</code></td>
<td>
<p>panel grid (<code>TRUE</code>, <code>FALSE</code>, or a combination of <code>X</code>, <code>x</code>, <code>Y</code>, <code>y</code>)</p>
</td></tr>
<tr><td><code id="theme_tntp_2018_+3A_axis">axis</code></td>
<td>
<p>add x or y axes? <code>TRUE</code>, <code>FALSE</code>, &quot;<code>xy</code>&quot;</p>
</td></tr>
<tr><td><code id="theme_tntp_2018_+3A_ticks">ticks</code></td>
<td>
<p>ticks if <code>TRUE</code> add ticks</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot theme object.
</p>


<h3>Building upon <code>theme_tntp</code></h3>

<p>The function is setup in such a way that you can customize your own one by just
wrapping the call and changing the parameters. See source for examples.
</p>


<h3>Gotchas</h3>

<p>There are distinctions between font names and various devices. Names that work
for display graphics devices and bitmap ones such as <code>png</code> may not work well
for PostScript or PDF ones. You may need two versions of a font-based
theme function for them to work in a particular situation. This situation
usually only arises when using a newer font with many weights but somewhat
irregular internal font name patterns.
</p>
<p>There is an option <code>hrbrthemes.loadfonts</code> which &ndash; if set to <code>TRUE</code> &ndash; will
call <code>extrafont::loadfonts()</code> to register non-core fonts with R PDF &amp; PostScript
devices. If you are running under Windows, the package calls the same function
to register non-core fonts with the Windows graphics device.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)
library(dplyr)

# seminal scatterplot
ggplot(mtcars, aes(mpg, wt)) +
  geom_point() +
  labs(
    x = "Fuel effiiency (mpg)", y = "Weight (tons)",
    title = "Seminal ggplot2 scatterplot example",
    subtitle = "A plot that is only useful for demonstration purposes",
    caption = "Brought to you by the letter 'g'"
  ) +
  tntp_style(family = 'sans')

# seminal bar chart
count(mpg, class) |&gt;
  ggplot(aes(class, n)) +
  geom_col() +
  geom_text(aes(label = n), nudge_y = 3) +
  labs(
    x = "Fuel efficiency (mpg)", y = "Weight (tons)",
    title = "Seminal ggplot2 bar chart example",
    subtitle = "A plot that is only useful for demonstration purposes",
    caption = "Brought to you by the letter 'g'"
  ) +
  tntp_style(family = 'sans') +
  theme(axis.text.y = element_blank())
</code></pre>

<hr>
<h2 id='tntp_colors'>TNTP Brand Colors</h2><span id='topic+tntp_colors'></span><span id='topic+show_tntp_colors'></span>

<h3>Description</h3>

<p>Translate human friendly TNTP brand color names like &quot;medium_blue&quot; into
accurate hex values for use in plotting. This function can also be used to
show a named vector of all available TNTP brand colors and values. Use
<code>show_tntp_colors()</code> to quickly visualize selected colors in the plot window.
For often used palettes of TNTP colors, see <code><a href="#topic+tntp_palette">tntp_palette()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tntp_colors(...)

show_tntp_colors(
  ...,
  pattern = NULL,
  labels = TRUE,
  borders = NULL,
  cex_label = 1,
  ncol = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tntp_colors_+3A_...">...</code></td>
<td>
<p>Supply quoted TNTP color names to return. If no colors are specified, returns all available colors.</p>
</td></tr>
<tr><td><code id="tntp_colors_+3A_pattern">pattern</code></td>
<td>
<p>Optional regular expression. If provided, will return only brand colors that match the regular expression</p>
</td></tr>
<tr><td><code id="tntp_colors_+3A_labels">labels</code></td>
<td>
<p>Logical. Label colors with names and hex values?</p>
</td></tr>
<tr><td><code id="tntp_colors_+3A_borders">borders</code></td>
<td>
<p>Border color for each tile. Default uses <code>par("fg")</code>. Use <code>border = NA</code> to omit borders.</p>
</td></tr>
<tr><td><code id="tntp_colors_+3A_cex_label">cex_label</code></td>
<td>
<p>Size of printed labels, as multiplier of default size.</p>
</td></tr>
<tr><td><code id="tntp_colors_+3A_ncol">ncol</code></td>
<td>
<p>Number of columns. If not supplied, tries to be as square as possible.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li> <p><code>tntp_colors()</code> returns a character vector of color codes
</p>
</li>
<li> <p><code>show_tntp_colors()</code> returns nothing
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
library(ggplot2)

# Use tntp_colors() to retrieve a single color...
ggplot(mtcars, aes(wt, mpg)) +
  geom_point(color = tntp_colors('green'))

#... multiple colors ...
ggplot(iris, aes(Sepal.Length, Sepal.Width, color = Species)) +
  geom_point() +
  scale_color_manual(values = tntp_colors('green', 'navy', 'red'))

#... or a list of all possible TNTP brand colors
tntp_colors()

# Use show_tntp_colors() to quickly see brand colors in the plotting window
show_tntp_colors('mint', 'moss', 'green')

# You can also use a pattern to return similar colors
show_tntp_colors(pattern = 'green')

# You can see all colors (and names) by running it with no arguments
show_tntp_colors()
</code></pre>

<hr>
<h2 id='tntp_cred'>TNTP Credential Get/Set Command</h2><span id='topic+tntp_cred'></span><span id='topic+tntp_cred_set'></span><span id='topic+tntp_cred_list'></span>

<h3>Description</h3>

<p>A wrapper around the <code>keyring</code> package for secure credential management.
</p>
<p><code>tntp_cred()</code> will attempt to get a credential, and if no credential is found
it will prompt you to add it (and then return it).
</p>
<p><code>tntp_cred_set()</code> will set a credential. By default it will prompt before
overwriting any current credentials.
</p>
<p><code>tntp_cred_list()</code> will list all current credentials by sorted by service
and username.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tntp_cred(service, username = NULL, keyring = NULL, prompt = NULL)

tntp_cred_set(
  service = NULL,
  username = NULL,
  keyring = NULL,
  prompt = NULL,
  overwrite = NULL
)

tntp_cred_list(service = NULL, keyring = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tntp_cred_+3A_service">service</code></td>
<td>
<p>The identifier for the credential you are pulling or setting</p>
</td></tr>
<tr><td><code id="tntp_cred_+3A_username">username</code></td>
<td>
<p>OPTIONAL. Can be used to specify different usernames for the same service</p>
</td></tr>
<tr><td><code id="tntp_cred_+3A_keyring">keyring</code></td>
<td>
<p>OPTIONAL. Can be used to specify a specific keyring</p>
</td></tr>
<tr><td><code id="tntp_cred_+3A_prompt">prompt</code></td>
<td>
<p>OPTIONAL. What text should be displayed above the input box for the key while setting?</p>
</td></tr>
<tr><td><code id="tntp_cred_+3A_overwrite">overwrite</code></td>
<td>
<p>OPTIONAL. By default, <code>tntp_cred_set()</code> will prompt if it finds a credential already saved. Set this to <code>TRUE</code> to overwrite without prompting or <code>FALSE</code> to throw an error if a current credential is found.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li> <p><code>tntp_cred()</code> returns a stored (or newly created) credential
</p>
</li>
<li> <p><code>tntp_cred_set()</code> returns nothing
</p>
</li>
<li> <p><code>tntp_cred_list()</code> returns a 2-column data frame of services and usernames
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
# Using tntp_cred() with qualtRics
library(qualtRics)

# If no credential is set, this command will prompt for it first
qualtrics_token &lt;- tntp_cred("QUALTRICS_TOKEN")
qualtrics_api_credentials(api_key = qualtrics_token,
                          base_url = 'tntp.co1.qualtrics.com')

# To overwrite your Qualtrics credential
tntp_cred("QUALTRICS_TOKEN", .set = TRUE)

</code></pre>

<hr>
<h2 id='tntp_palette'>Common TNTP Color Palettes</h2><span id='topic+tntp_palette'></span><span id='topic+show_tntp_palette'></span>

<h3>Description</h3>

<p>Use or see
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tntp_palette(palette = "likert_6", reverse = FALSE)

show_tntp_palette(..., reverse = FALSE, pattern = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tntp_palette_+3A_palette">palette</code></td>
<td>
<p>Name of the TNTP palette you want to use. To see all available palettes, use <code>show_tntp_palette()</code></p>
</td></tr>
<tr><td><code id="tntp_palette_+3A_reverse">reverse</code></td>
<td>
<p>Logical. If set to <code>TRUE</code>, reverses the direction of the palette.</p>
</td></tr>
<tr><td><code id="tntp_palette_+3A_...">...</code></td>
<td>
<p>Supply quoted TNTP palette names to visualize. If no names are specified, shows all available palettes.</p>
</td></tr>
<tr><td><code id="tntp_palette_+3A_pattern">pattern</code></td>
<td>
<p>Optional regular expression. If provided, will return only palettes that match the regular expression</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li> <p><code>tntp_palette()</code> returns a character vector of color codes
</p>
</li>
<li> <p><code>show_tntp_palette()</code> returns nothing
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
library(ggplot2)

# Use to add a common palette to a ggplot visualization
ggplot(diamonds, aes(y = color, fill = cut)) +
  geom_bar(position = "fill") +
  scale_fill_manual(values = tntp_palette('blues', reverse = TRUE))


# Use show_tntp_palette() to visualize a single or multiple palettes
show_tntp_palette('likert_7')
show_tntp_palette('bg_5', 'likert_5')

# You can use a pattern to show similar palettes
show_tntp_palette(pattern = 'top2')
show_tntp_palette(pattern = '_6')

# Or run it with no specified palettes to see all available palettes
show_tntp_palette()

# For creating a continuous color palette, use scale_color_gradient()
# along with tntp_colors():
ggplot(mtcars, aes(hp, disp, color = mpg)) +
  geom_point(size = 3) +
  scale_color_gradient(low = tntp_colors('red'),
                       high = tntp_colors('green'))
</code></pre>

<hr>
<h2 id='tntp_style'>Create TNTP themed ggplot2 charts</h2><span id='topic+tntp_style'></span>

<h3>Description</h3>

<p>A custom theme including TNTP fonts and other defaults for styling ggplot2 charts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tntp_style(
  family = "Halyard Display",
  header_family = family,
  base_size = 28,
  text_color = "#222222",
  caption_color = "#7D7E81",
  show_legend_title = FALSE,
  show_axis_titles = FALSE,
  grid = FALSE,
  grid_color = "#CBCBCB",
  title_align = "left",
  legend_align = "left",
  caption_align = "right"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tntp_style_+3A_family">family</code></td>
<td>
<p>Base font family. Defaults to &quot;Halyard Display&quot;.</p>
</td></tr>
<tr><td><code id="tntp_style_+3A_header_family">header_family</code></td>
<td>
<p>Font family for title and subtitle. Defaults to the base font family.</p>
</td></tr>
<tr><td><code id="tntp_style_+3A_base_size">base_size</code></td>
<td>
<p>Base font size. Recommended minimum value of 15.</p>
</td></tr>
<tr><td><code id="tntp_style_+3A_text_color">text_color</code></td>
<td>
<p>Text color for titles, axes, legends, and facets.</p>
</td></tr>
<tr><td><code id="tntp_style_+3A_caption_color">caption_color</code></td>
<td>
<p>Text color for caption.</p>
</td></tr>
<tr><td><code id="tntp_style_+3A_show_legend_title">show_legend_title</code></td>
<td>
<p>Logical. Should the legend title be shown?  Leave as <code>TRUE</code> if you want to change the legend title with a subsequent line <code>+ labs(...)</code>.</p>
</td></tr>
<tr><td><code id="tntp_style_+3A_show_axis_titles">show_axis_titles</code></td>
<td>
<p>Which axis titles should be shown? Use <code>TRUE</code> or <code>FALSE</code> for toggle both titles, or <code>x</code> or <code>y</code> to show just that axis title.</p>
</td></tr>
<tr><td><code id="tntp_style_+3A_grid">grid</code></td>
<td>
<p>Which grid lines should be shown? Use <code>TRUE</code> or <code>FALSE</code> to toggle all grid lines, or a string combination of <code>X</code>, <code>x</code>, <code>Y</code>, <code>y</code> for major and minor x and y grid lines.</p>
</td></tr>
<tr><td><code id="tntp_style_+3A_grid_color">grid_color</code></td>
<td>
<p>Grid line color.</p>
</td></tr>
<tr><td><code id="tntp_style_+3A_title_align">title_align</code>, <code id="tntp_style_+3A_legend_align">legend_align</code>, <code id="tntp_style_+3A_caption_align">caption_align</code></td>
<td>
<p>Alignment of title, legend, and caption. Accepts <code>left</code>, <code>right</code>, or <code>center</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot theme object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(dplyr)
library(ggplot2)

fake_county |&gt;
  filter(t_salary &gt; 0) |&gt;
  ggplot(aes(t_experience, t_salary)) +
  geom_point() +
  scale_y_continuous(labels = scales::dollar) +
  labs(
    title = "Salary Increases with Experience",
    subtitle = "With significant variation at all levels",
    x = "Years of Experience",
    caption = "Data from the Fake County Data Set"
  ) +
  tntp_style(family = 'sans', show_axis_titles = "x")

frpl_experience &lt;- fake_county |&gt;
  mutate(frpl_bucket = cut(sch_frpl_pct,
    breaks = c(0, 20, 40, 60, 80, 100),
    labels = c("0-20%", "20-40%", "40-60%", "60-80%", "80-100%")
  )) |&gt;
  group_by(frpl_bucket) |&gt;
  summarize(avg_experience = mean(t_experience, na.rm = TRUE)) |&gt;
  mutate(
    label = as.character(round(avg_experience, digits = 1)),
    label = if_else(frpl_bucket == "0-20%", paste0(label, "\nYears of\nExperience"), label)
  )

frpl_experience |&gt;
  ggplot(aes(frpl_bucket, avg_experience)) +
  geom_col(fill = if_else(frpl_experience$frpl_bucket == "60-80%",
    tntp_colors("tangerine"),
    tntp_colors("medium_gray")
  )) +
  geom_text(aes(label = label),
    nudge_y = -0.25, vjust = 1,
    color = "white", size = 5, lineheight = 1
  ) +
  labs(
    title = "High Poverty Schools have Less Experienced Teachers",
    x = "% of Student Body Receiving Free/Reduced Lunch"
  ) +
  scale_y_continuous(breaks = seq(0, 20, 4)) +
  tntp_style(
    family = "sans",
    base_size = 20,
    show_axis_titles = "x"
  )
  

</code></pre>

<hr>
<h2 id='update_geom_font_defaults'>Update matching font defaults for text geoms</h2><span id='topic+update_geom_font_defaults'></span>

<h3>Description</h3>

<p>Updates [ggplot2::geom_label] and [ggplot2::geom_text] font defaults
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_geom_font_defaults(
  family = "Segoe UI",
  face = "plain",
  size = 3.5,
  color = "#2b2b2b"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="update_geom_font_defaults_+3A_family">family</code>, <code id="update_geom_font_defaults_+3A_face">face</code>, <code id="update_geom_font_defaults_+3A_size">size</code>, <code id="update_geom_font_defaults_+3A_color">color</code></td>
<td>
<p>font family name, face, size and color</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Update text geoms to use Arial font
update_geom_font_defaults(family = 'Arial')

</code></pre>

<hr>
<h2 id='update_tntpr'>Re-install the tntpr package from GitHub.</h2><span id='topic+update_tntpr'></span>

<h3>Description</h3>

<p>Re-install the tntpr package from GitHub.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_tntpr()
</code></pre>


<h3>Value</h3>

<p>nothing
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Run without loading tntpr first
tntpr::update_tntpr()

</code></pre>

<hr>
<h2 id='wisc'>Fake student data from the Wisconsin State Dept. of Ed</h2><span id='topic+wisc'></span>

<h3>Description</h3>

<p>A generated data set containing data on 1200 imaginary individual K-12 students in Wisconsin.  They are nested within 6 schools in 3 districts.  In adapting this from the source, Sam switched the school and district variables (there had been multiple districts per school) and made other minor changes, including dropping columns that I didn't understand or that didn't seem relevant (e.g., variables like &quot;luck&quot; that were used to calculate the reading and math scores).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wisc
</code></pre>


<h3>Format</h3>

<p>A data frame with 2700 rows and 26 variables:
</p>

<dl>
<dt>student_id</dt><dd><p>numeric: student's unique ID #</p>
</dd>
<dt>grade</dt><dd><p>numeric: grade level</p>
</dd>
<dt>district</dt><dd><p>numeric: district code</p>
</dd>
<dt>school</dt><dd><p>numeric: school code</p>
</dd>
<dt>white</dt><dd><p>numeric: is the student white?</p>
</dd>
<dt>black</dt><dd><p>numeric: is the student black?</p>
</dd>
<dt>hisp</dt><dd><p>numeric: is the student Hispanic?</p>
</dd>
<dt>indian</dt><dd><p>numeric: is the student Native-American Indian?</p>
</dd>
<dt>asian</dt><dd><p>numeric: is the student Asian?</p>
</dd>
<dt>econ</dt><dd><p>numeric: is the student economically-disadvantaged?</p>
</dd>
<dt>female</dt><dd><p>numeric: is the student female?</p>
</dd>
<dt>ell</dt><dd><p>numeric: is the student an English Language Learner?</p>
</dd>
<dt>disab</dt><dd><p>numeric: does the student have a learning disability?</p>
</dd>
<dt>year</dt><dd><p>numeric: school year</p>
</dd>
<dt>attday</dt><dd><p>numeric: days attended</p>
</dd>
<dt>readSS</dt><dd><p>numeric: student's reading standardized test score</p>
</dd>
<dt>mathSS</dt><dd><p>numeric: student's math standardized test score</p>
</dd>
<dt>proflvl</dt><dd><p>factor: student's proficiency level</p>
</dd>
<dt>race</dt><dd><p>factor: student's single-category race</p>
</dd>
</dl>
<p>...

</p>


<h3>Source</h3>

<p><a href="https://github.com/jknowles/r_tutorial_ed/">https://github.com/jknowles/r_tutorial_ed/</a>, posted under a Creative Commons license. The script used to generate the data set is here, although not very well documented: <a href="https://github.com/jknowles/r_tutorial_ed/blob/master/data/simulate_data.R">https://github.com/jknowles/r_tutorial_ed/blob/master/data/simulate_data.R</a>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
