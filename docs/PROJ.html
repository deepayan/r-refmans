<!DOCTYPE html><html><head><title>Help for package PROJ</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {PROJ}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#PROJ-package'><p>PROJ: Generic Coordinate System Transformations Using 'PROJ'</p></a></li>
<li><a href='#ok_proj6'><p>Is 'PROJ library &gt;= 6' available</p></a></li>
<li><a href='#proj_crs_text'><p>Generate a projection string.</p></a></li>
<li><a href='#proj_trans'><p>Transform coordinates</p></a></li>
<li><a href='#proj_trans_create'><p>Create a transformation object</p></a></li>
<li><a href='#proj_version'><p>Report PROJ library version</p></a></li>
<li><a href='#xymap'><p>xymap data for testing</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Generic Coordinate System Transformations Using 'PROJ'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5.0</td>
</tr>
<tr>
<td>Description:</td>
<td>A wrapper around the generic coordinate transformation software 'PROJ'
  that transforms coordinates from one coordinate reference system ('CRS')
  to another. This includes cartographic projections as well as geodetic transformations.  The intention is for this
  package to be used by user-packages such as 'reproj', and that the older 'PROJ.4' and version 5
  pathways be provided by the 'proj4' package.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.2)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>lifecycle, wk</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>wk</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), spelling, knitr, rmarkdown, sf</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/hypertidy/PROJ">https://github.com/hypertidy/PROJ</a>,
<a href="https://hypertidy.github.io/PROJ/">https://hypertidy.github.io/PROJ/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/hypertidy/PROJ/issues">https://github.com/hypertidy/PROJ/issues</a></td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>PROJ (&gt;= 6.3.1)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-06-12 03:07:33 UTC; mdsumner</td>
</tr>
<tr>
<td>Author:</td>
<td>Michael D. Sumner <a href="https://orcid.org/0000-0002-2471-7511"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Jeroen Ooms [ctb] (provided PROJ library support on Windows, and
    assistance with Windows configuration),
  Simon Urbanek [cph, ctb] (wrote original code versions for PROJ version
    6),
  Dewey Dunnington [ctb] (key code contributions),
  Anthony North [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Michael D. Sumner &lt;mdsumner@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-06-12 04:50:18 UTC</td>
</tr>
</table>
<hr>
<h2 id='PROJ-package'>PROJ: Generic Coordinate System Transformations Using 'PROJ'</h2><span id='topic+PROJ'></span><span id='topic+PROJ-package'></span>

<h3>Description</h3>

<p>A wrapper around the generic coordinate transformation software 'PROJ' that transforms coordinates from one coordinate reference system ('CRS') to another. This includes cartographic projections as well as geodetic transformations. The intention is for this package to be used by user-packages such as 'reproj', and that the older 'PROJ.4' and version 5 pathways be provided by the 'proj4' package.
</p>
<p>The goal of PROJ is to provide generic coordinate system transformations in R
without requiring bespoke formats for storing basic data.
</p>


<h3>I. Functions</h3>


<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ok_proj6">ok_proj6</a></code> determine if PROJ version &gt;=6 is available
<code><a href="#topic+proj_trans">proj_trans</a></code> a light wrapper around the underlying transformation functionality of PROJ version 6 (or higher)
<code><a href="#topic+proj_crs_text">proj_crs_text</a></code> generate PROJ crs strings from input
<code><a href="#topic+proj_version">proj_version</a></code> report PROJ lib version if available <em>and</em> &gt;= 6.3.1
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Michael D. Sumner <a href="mailto:mdsumner@gmail.com">mdsumner@gmail.com</a> (<a href="https://orcid.org/0000-0002-2471-7511">ORCID</a>)
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Jeroen Ooms (provided PROJ library support on Windows, and assistance with Windows configuration) [contributor]
</p>
</li>
<li><p> Simon Urbanek (wrote original code versions for PROJ version 6) [copyright holder, contributor]
</p>
</li>
<li><p> Dewey Dunnington (key code contributions) [contributor]
</p>
</li>
<li><p> Anthony North [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/hypertidy/PROJ">https://github.com/hypertidy/PROJ</a>
</p>
</li>
<li> <p><a href="https://hypertidy.github.io/PROJ/">https://hypertidy.github.io/PROJ/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/hypertidy/PROJ/issues">https://github.com/hypertidy/PROJ/issues</a>
</p>
</li></ul>


<hr>
<h2 id='ok_proj6'>Is 'PROJ library &gt;= 6' available</h2><span id='topic+ok_proj6'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
</p>
<p>Test for availability of 'PROJ' system library version 6 or higher.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ok_proj6()
</code></pre>


<h3>Details</h3>

<p>On unix-alikes, this function is run in <code>.onLoad()</code> to check that version 6 functionality is
available. On Windows, the load process sets the data file location with the version 6 API, and that
is used as a test instead.
</p>
<p>If 'PROJ' library version 6 is not available, the package still compiles and installs
but is not functional.
</p>
<p>The lack of function can be simulated by setting
<code>options(reproj.mock.noproj6 = TRUE)</code>, designed for use with the reproj package.
</p>


<h3>Value</h3>

<p>logical, <code>TRUE</code> if the system library 'PROJ &gt;= 6'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ok_proj6()
</code></pre>

<hr>
<h2 id='proj_crs_text'>Generate a projection string.</h2><span id='topic+proj_crs_text'></span>

<h3>Description</h3>

<p>Input any accepted format of 'PROJ' coordinate reference system specification.
Return value is a string in the requested format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>proj_crs_text(source, format = 0L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="proj_crs_text_+3A_source">source</code></td>
<td>
<p>input projection specification one of ('PROJ4', 'WKT2',
'EPSG', 'PROJJSON', ... see the library documentation link in Details)</p>
</td></tr>
<tr><td><code id="proj_crs_text_+3A_format">format</code></td>
<td>
<p>integer, 0 for 'WKT', 1 for 'PROJ', 2 for 'PROJJSON'</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function requires PROJ version 6.0 or higher to be useful. If not, this
function simply returns 'NA'.
</p>
<p>See the <a href="https://proj.org/development/reference/functions.html#transformation-setup">library documentation</a>
for details on input and output formats.
</p>


<h3>Value</h3>

<p>character string in requested format
</p>


<h3>warning</h3>

<p>Note that a PROJ string is not a full specification, in particular this means that a string like &quot;+proj=laea&quot; cannot be converted
to full WKT, because it is technically a transformation step not a crs. To get the full WKT form use a string like &quot;+proj=laea +type=crs&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cat(proj_crs_text("EPSG:4326", format = 0L))
proj_crs_text("EPSG:4326", format = 1L)
south55 &lt;- "+proj=utm +zone=55 +south +ellps=GRS80 +units=m +no_defs +type=crs"
proj_crs_text(proj_crs_text(south55), 1L)
</code></pre>

<hr>
<h2 id='proj_trans'>Transform coordinates</h2><span id='topic+proj_trans'></span>

<h3>Description</h3>

<p>Transforms all coordinates in <code>x</code> using <code><a href="wk.html#topic+wk_handle">wk::wk_handle()</a></code> and <code><a href="#topic+proj_trans_create">proj_trans_create()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>proj_trans(x, target_crs, source_crs = NULL, ..., use_z = NA, use_m = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="proj_trans_+3A_x">x</code></td>
<td>
<p>Input geometry/geography. May take any of the following forms:
</p>

<ul>
<li><p> A coordinate matrix containing 2, 3 or 4 columns.
If named, expects column names &quot;x&quot;, &quot;y&quot; and optionally &quot;z&quot; and/or &quot;m&quot;. If
not named, columns are assumed in xyzm order. Non-coordinate columns are
removed.
</p>
</li>
<li><p> A data.frame containing coordinates as columns. Expects names &quot;x&quot;, &quot;y&quot; and
optionally &quot;z&quot; and/or &quot;m&quot;. Non-coordinate columns are retained.
</p>
</li>
<li><p> A data.frame containing a geometry vector which is readable by
<code><a href="wk.html#topic+wk_handle">wk::wk_handle()</a></code>, including <code>sfc</code> columns.
</p>
</li>
<li><p> A geometry vector which is readable by <code><a href="wk.html#topic+wk_handle">wk::wk_handle()</a></code>, including <code>sfc</code>
columns.
</p>
</li></ul>
</td></tr>
<tr><td><code id="proj_trans_+3A_source_crs">source_crs</code>, <code id="proj_trans_+3A_target_crs">target_crs</code></td>
<td>
<p>Source/Target CRS definition, coerced with <code><a href="wk.html#topic+wk_crs_proj_definition">wk::wk_crs_proj_definition()</a></code></p>
</td></tr>
<tr><td><code id="proj_trans_+3A_...">...</code></td>
<td>
<p>Additional parameters forwarded to <code><a href="wk.html#topic+wk_handle">wk::wk_handle()</a></code></p>
</td></tr>
<tr><td><code id="proj_trans_+3A_use_z">use_z</code>, <code id="proj_trans_+3A_use_m">use_m</code></td>
<td>
<p>Used to declare the output type. Use <code>TRUE</code> to
ensure the output has that dimension, <code>FALSE</code> to ensure it does not,
and <code>NA</code> to leave the dimension unchanged.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Values that are detected out of bounds by library PROJ are allowed, we return <code>Inf</code>
in this case, rather than the error &quot;tolerance condition error&quot;.
</p>


<h3>Value</h3>

<p>Transformed geometries whose format is dependent on input.
</p>


<h3>References</h3>

<p>see the <a href="https://proj.org/development/reference/functions.html#coordinate-transformation">PROJ library documentation</a>
for details on the underlying functionality
</p>


<h3>Examples</h3>

<pre><code class='language-R'>proj_trans(cbind(147, -42), "+proj=laea +type=crs", "EPSG:4326")
proj_trans(cbind(147, -42, -2), "+proj=laea +type=crs", "EPSG:4326")
proj_trans(cbind(147, -42, -2, 1), "+proj=laea +type=crs", "EPSG:4326")
proj_trans(wk::xy(147, -42, crs = "EPSG:4326"), "+proj=laea +type=crs")
proj_trans(wk::wkt("POLYGON ((1 1, 0 1, 0 0, 1 0, 1 1))", crs = "EPSG:4326"), 3112)

</code></pre>

<hr>
<h2 id='proj_trans_create'>Create a transformation object</h2><span id='topic+proj_trans_create'></span>

<h3>Description</h3>

<p>Creates a transformation object that transforms coordinates in a wk
pipeline.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>proj_trans_create(source_crs, target_crs, use_z = NA, use_m = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="proj_trans_create_+3A_source_crs">source_crs</code>, <code id="proj_trans_create_+3A_target_crs">target_crs</code></td>
<td>
<p>Source/Target CRS definition, coerced with <code><a href="wk.html#topic+wk_crs_proj_definition">wk::wk_crs_proj_definition()</a></code></p>
</td></tr>
<tr><td><code id="proj_trans_create_+3A_use_z">use_z</code>, <code id="proj_trans_create_+3A_use_m">use_m</code></td>
<td>
<p>Used to declare the output type. Use <code>TRUE</code> to
ensure the output has that dimension, <code>FALSE</code> to ensure it does not,
and <code>NA</code> to leave the dimension unchanged.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A PROJ transformation object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>(trans &lt;- proj_trans_create("EPSG:4326", "EPSG:3857"))
wk::wk_transform(wk::xy(1:5, 1:5), trans)

library(wk)
(invtrans &lt;- wk_trans_inverse(trans))

h &lt;- 1852 * 60
## the stretch of Mercator to a square
wk::wk_transform(wk::xy(c(-h * 180, 0, h * 180), c(-h * 180,0, h * 180)), invtrans)

</code></pre>

<hr>
<h2 id='proj_version'>Report PROJ library version</h2><span id='topic+proj_version'></span>

<h3>Description</h3>

<p>This function returns NA if PROJ lib is not available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>proj_version()
</code></pre>


<h3>Value</h3>

<p>character string (major.minor.patch)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>proj_version()
</code></pre>

<hr>
<h2 id='xymap'>xymap data for testing</h2><span id='topic+xymap'></span>

<h3>Description</h3>

<p>A copy of the xymap data set from the quadmesh package.
</p>


<h3>Details</h3>

<p>A matrix of longitude/latitude values of the world coastline.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
