<!DOCTYPE html><html><head><title>Help for package greport</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {greport}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#accrualReport'><p>Accrual Report</p></a></li>
<li><a href='#appsection'><p>Issue LaTeX section and/or subsection in appendix</p></a></li>
<li><a href='#dNeedle'><p>Draw Needles</p></a></li>
<li><a href='#dReport'><p>Descriptive Statistics Report</p></a></li>
<li><a href='#eReport'><p>Event Report</p></a></li>
<li><a href='#exReport'><p>Exclusion Report</p></a></li>
<li><a href='#getgreportOption'><p>Get greport Options</p></a></li>
<li><a href='#greport'><p>Graphical Reporting for Clinical Trials</p></a></li>
<li><a href='#latticeInit'><p>Setup lattice plots using greport options</p></a></li>
<li><a href='#maskDframe'><p>Mask Variables in a Data Frame</p></a></li>
<li><a href='#maskVal'><p>Mask Values of a Vector</p></a></li>
<li><a href='#Merge'><p>Merge Multiple Data Frames or Data Tables</p></a></li>
<li><a href='#mfrowSuggest'><p>Compute mfrow Parameter</p></a></li>
<li><a href='#nriskReport'><p>Number at Risk Report</p></a></li>
<li><a href='#putFig'><p>Put Figure</p></a></li>
<li><a href='#sampleFrac'><p>Compute Sample Fractions</p></a></li>
<li><a href='#setgreportOption'><p>Set greport Options</p></a></li>
<li><a href='#startPlot'><p>Plot Initialization</p></a></li>
<li><a href='#survReport'><p>Survival Report</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>0.7-4</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-09-02</td>
</tr>
<tr>
<td>Title:</td>
<td>Graphical Reporting for Clinical Trials</td>
</tr>
<tr>
<td>Author:</td>
<td>Frank E Harrell Jr &lt;fh@fharrell.com&gt;</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Frank E Harrell Jr &lt;fh@fharrell.com&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>Hmisc (&ge; 4.0-0),</td>
</tr>
<tr>
<td>Imports:</td>
<td>rms (&ge; 5.0-0), lattice, latticeExtra, ggplot2, Formula,
survival, methods, data.table</td>
</tr>
<tr>
<td>Description:</td>
<td>Contains many functions useful for
    monitoring and reporting the results of clinical trials and other
    experiments in which treatments are compared.  LaTeX is
    used to typeset the resulting reports, recommended to be in the
    context of 'knitr'. The 'Hmisc', 'ggplot2', and 'lattice' packages are used
    by 'greport' for high-level graphics.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://hbiostat.org/R/greport/">http://hbiostat.org/R/greport/</a>,
<a href="https://github.com/harrelfe/greport/">https://github.com/harrelfe/greport/</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-02 18:22:59 UTC; harrelfe</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-02 22:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='accrualReport'>Accrual Report</h2><span id='topic+accrualReport'></span>

<h3>Description</h3>

<p>Generate graphics and LaTeX to analyze subject accrual
</p>


<h3>Usage</h3>

<pre><code class='language-R'>accrualReport(
  formula,
  data = NULL,
  subset = NULL,
  na.action = na.retain,
  dateRange = NULL,
  zoom = NULL,
  targetN = NULL,
  targetDate = NULL,
  closeDate = NULL,
  enrollmax = NULL,
  studynos = TRUE,
  minrand = 10,
  panel = "accrual",
  h = 2.5,
  w = 3.75,
  hb = 5,
  wb = 5,
  hdot = 3.5
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="accrualReport_+3A_formula">formula</code></td>
<td>
<p>formula object, with time variables on the left (separated by +) and grouping variables on the right.  Enrollment date, randomization date, region, country, and site when present must have the variables in parenthesis preceeded by the key words <code>enrollment, randomize, region, country, site</code>.</p>
</td></tr>
<tr><td><code id="accrualReport_+3A_data">data</code></td>
<td>
<p>data frame.</p>
</td></tr>
<tr><td><code id="accrualReport_+3A_subset">subset</code></td>
<td>
<p>a subsetting epression for the entire analysis.</p>
</td></tr>
<tr><td><code id="accrualReport_+3A_na.action">na.action</code></td>
<td>
<p>a NA handling function for data frames, default is <code>na.retain</code>.</p>
</td></tr>
<tr><td><code id="accrualReport_+3A_daterange">dateRange</code></td>
<td>
<p><code>Date</code> or character 2-vector formatted as <code>yyyy-mm-dd</code>.  Provides the range on the <code>x</code>-axis (before any zooming).</p>
</td></tr>
<tr><td><code id="accrualReport_+3A_zoom">zoom</code></td>
<td>
<p><code>Date</code> or character 2-vector for an option zoomed-in look at accrual.</p>
</td></tr>
<tr><td><code id="accrualReport_+3A_targetn">targetN</code></td>
<td>
<p>integer vector with target sample sizes over time, same length as <code>targetDate</code></p>
</td></tr>
<tr><td><code id="accrualReport_+3A_targetdate">targetDate</code></td>
<td>
<p><code>Date</code> or character vector corresponding to <code>targetN</code></p>
</td></tr>
<tr><td><code id="accrualReport_+3A_closedate">closeDate</code></td>
<td>
<p><code>Date</code> or characterstring.  Used for randomizations per month and per site-month - contains the dataset closing date to be able to compute the number of dates that a group (country, site, etc.) has been online since randomizating its first subject.</p>
</td></tr>
<tr><td><code id="accrualReport_+3A_enrollmax">enrollmax</code></td>
<td>
<p>numeric specifying the upper y-axis limit for cumulative enrollment when not zoomed</p>
</td></tr>
<tr><td><code id="accrualReport_+3A_studynos">studynos</code></td>
<td>
<p>logical.  Set to <code>FALSE</code> to suppress summary study numbers table.</p>
</td></tr>
<tr><td><code id="accrualReport_+3A_minrand">minrand</code></td>
<td>
<p>integer.  Minimum number of randomized subjects a country must have before a box plot of time to randomization is included.</p>
</td></tr>
<tr><td><code id="accrualReport_+3A_panel">panel</code></td>
<td>
<p>character string.  Name of panel, which goes into file base names and figure labels for cross-referencing.</p>
</td></tr>
<tr><td><code id="accrualReport_+3A_h">h</code></td>
<td>
<p>numeric.  Height of ordinary plots, in inches.</p>
</td></tr>
<tr><td><code id="accrualReport_+3A_w">w</code></td>
<td>
<p>numeric.  Width of ordinary plots.</p>
</td></tr>
<tr><td><code id="accrualReport_+3A_hb">hb</code></td>
<td>
<p>numeric.  Height of extended box plots.</p>
</td></tr>
<tr><td><code id="accrualReport_+3A_wb">wb</code></td>
<td>
<p>numeric.  Weight of extended box plots.</p>
</td></tr>
<tr><td><code id="accrualReport_+3A_hdot">hdot</code></td>
<td>
<p>numeric.  Height of dot charts in inches.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Typically the left-hand-side variables of the formula, in order, are date of enrollment and date of randomization, with subjects enrolled but not randomized having missing date of randomization.  Given such date variables, this function generates cumulative frequencies optionally with target enrollment/randomization numbers and with time-zooming.  Makes a variety of dot charts by right-hand-side variables:  number of subjects, number of sites, number of subjects per site, fraction of enrolled subjects randomized, number per month, number per site-month.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# See test.Rnw in tests directory

## End(Not run)
</code></pre>

<hr>
<h2 id='appsection'>Issue LaTeX section and/or subsection in appendix</h2><span id='topic+appsection'></span>

<h3>Description</h3>

<p>This is useful for copying section and subsection titles in the main body of the report to the appendix, to help in navigating supporting tables.  LaTeX backslash characters need to be doubled.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>appsection(section = NULL, subsection = NULL, main = FALSE, panel = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="appsection_+3A_section">section</code></td>
<td>
<p>a character string that will cause a section command to be added to app.tex</p>
</td></tr>
<tr><td><code id="appsection_+3A_subsection">subsection</code></td>
<td>
<p>a character string that will cause a subsection command to be added to app.tex</p>
</td></tr>
<tr><td><code id="appsection_+3A_main">main</code></td>
<td>
<p>set to <code>TRUE</code> to also write a section or subsection command to the console to be used in building the main report body (graphical section), in which case you should also specify <code>panel</code> if option <code>texdir</code> is not an empty string</p>
</td></tr>
<tr><td><code id="appsection_+3A_panel">panel</code></td>
<td>
<p>panel string; must be given if <code>main=TRUE</code> and option <code>texdir</code> is not <code>""</code></p>
</td></tr>
</table>

<hr>
<h2 id='dNeedle'>Draw Needles</h2><span id='topic+dNeedle'></span>

<h3>Description</h3>

<p>Create a LaTeX <code>picture</code> to draw needles for current sample sizes.  Uses colors set by call to <code>setgreportOptions</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dNeedle(sf, name, file = "", append = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dNeedle_+3A_sf">sf</code></td>
<td>
<p>output of <code>sampleFrac</code></p>
</td></tr>
<tr><td><code id="dNeedle_+3A_name">name</code></td>
<td>
<p>character string name of LaTeX variable to create</p>
</td></tr>
<tr><td><code id="dNeedle_+3A_file">file</code></td>
<td>
<p>output file name (character string)</p>
</td></tr>
<tr><td><code id="dNeedle_+3A_append">append</code></td>
<td>
<p>set to <code>FALSE</code> to start a new <code>file</code></p>
</td></tr>
</table>

<hr>
<h2 id='dReport'>Descriptive Statistics Report</h2><span id='topic+dReport'></span>

<h3>Description</h3>

<p>Generate graphics and LaTeX with descriptive statistics
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dReport(
  formula,
  groups = NULL,
  what = c("box", "proportions", "xy", "byx"),
  byx.type = c("violin", "quantiles"),
  violinbox = TRUE,
  violinbox.opts = list(col = adjustcolor("blue", alpha.f = 0.25), border = FALSE),
  summaryPsort = FALSE,
  exclude1 = TRUE,
  stable = TRUE,
  fun = NULL,
  data = NULL,
  subset = NULL,
  na.action = na.retain,
  panel = "desc",
  subpanel = NULL,
  head = NULL,
  tail = NULL,
  continuous = 10,
  h = 5.5,
  w = 5.5,
  outerlabels = TRUE,
  append = FALSE,
  sopts = NULL,
  popts = NULL,
  lattice = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dReport_+3A_formula">formula</code></td>
<td>
<p>a formula accepted by the <code>bpplotM</code> or <code>summaryP</code> functions.  <code>formula</code> must have an <code>id(subjectidvariable)</code> term if there are repeated measures, in order to get correct subject counts as <code>nobs</code>.</p>
</td></tr>
<tr><td><code id="dReport_+3A_groups">groups</code></td>
<td>
<p>a superpositioning variable, usually treatment, for categorical charts.  For continuous analysis variables, <code>groups</code> becomes the <code>y</code>-axis stratification variable.  This is a single character string.</p>
</td></tr>
<tr><td><code id="dReport_+3A_what">what</code></td>
<td>
<p><code>"box"</code> (the default) or <code>"xy"</code> for continuous analysis variables, or <code>"proportions"</code> (or shorter) for categorical ones.  Instead, specifying <code>what="byx"</code> results in an array of quantile intervals for continuous <code>y</code>, Wilson confidence intervals for proportions when <code>y</code> is binary, or means and parametric confidence limits when <code>y</code> is not continuous but is not binary.  If <code>what</code> is omitted or <code>what="byx"</code>, actions will be inferred from the most continuous variable listed in <code>formula</code>.  When <code>fun</code> is given, different behavior results (see below).</p>
</td></tr>
<tr><td><code id="dReport_+3A_byx.type">byx.type</code></td>
<td>
<p>set to <code>"quantiles"</code> to show vertical quantile intervals of <code>y</code> at each <code>x</code> for when <code>what="byx"</code> and the <code>y</code> variable is continuous numeric, or set <code>byx.type="violin"</code> (the default) to plot half-violin plots at each <code>x</code>.</p>
</td></tr>
<tr><td><code id="dReport_+3A_violinbox">violinbox</code></td>
<td>
<p>set to <code>TRUE</code> to add violin plots to box plots</p>
</td></tr>
<tr><td><code id="dReport_+3A_violinbox.opts">violinbox.opts</code></td>
<td>
<p>a list to pass to <code>panel.violin</code></p>
</td></tr>
<tr><td><code id="dReport_+3A_summarypsort">summaryPsort</code></td>
<td>
<p>set to <code>TRUE</code> to sort categories in descending order of frequencies</p>
</td></tr>
<tr><td><code id="dReport_+3A_exclude1">exclude1</code></td>
<td>
<p>logical used for <code>latex</code> methods when <code>summaryM</code> or <code>summaryP</code> are called by <code>dReport</code>, or for plot methods for <code>summaryP</code>.  The default is <code>TRUE</code> to cause the most frequent level of any two-level categorical variable to not be used as a separate category in the graphic or table.  See <code><a href="Hmisc.html#topic+summaryM">summaryM</a></code>.</p>
</td></tr>
<tr><td><code id="dReport_+3A_stable">stable</code></td>
<td>
<p>set to <code>FALSE</code> to suppress creation of backup supplemental tables for graphics</p>
</td></tr>
<tr><td><code id="dReport_+3A_fun">fun</code></td>
<td>
<p>a function that takes individual response variables (which may be matrices, as in <code><a href="survival.html#topic+Surv">Surv</a></code> objects) and creates one or more summary statistics that will be computed while the resulting data frame is being collapsed to one row per condition.  Dot charts are drawn when <code>fun</code> is given.</p>
</td></tr>
<tr><td><code id="dReport_+3A_data">data</code></td>
<td>
<p>data frame</p>
</td></tr>
<tr><td><code id="dReport_+3A_subset">subset</code></td>
<td>
<p>a subsetting epression for the entire analysis</p>
</td></tr>
<tr><td><code id="dReport_+3A_na.action">na.action</code></td>
<td>
<p>a NA handling function for data frames, default is <code>na.retain</code></p>
</td></tr>
<tr><td><code id="dReport_+3A_panel">panel</code></td>
<td>
<p>character string.  Name of panel, which goes into file base names and figure labels for cross-referencing</p>
</td></tr>
<tr><td><code id="dReport_+3A_subpanel">subpanel</code></td>
<td>
<p>If calling <code>dReport</code> more than once for the same type of chart (by different values of <code>what</code>), specify <code>subpanel</code> to distinguish the multiple calls.  In that case, <code>-subpanel</code> will be appended to <code>panel</code> when creating figure labels and cross-references.</p>
</td></tr>
<tr><td><code id="dReport_+3A_head">head</code></td>
<td>
<p>character string.  Specifies initial text in the figure caption, otherwise a default is used</p>
</td></tr>
<tr><td><code id="dReport_+3A_tail">tail</code></td>
<td>
<p>optional character string.  Specifies final text in the figure caption, e.g., what might have been put in a footnote in an ordinary text page.  This appears just before any needles.</p>
</td></tr>
<tr><td><code id="dReport_+3A_continuous">continuous</code></td>
<td>
<p>the minimum number of numeric values a variable must have in order to be considered continuous.  Also passed to <code>summaryM</code>.</p>
</td></tr>
<tr><td><code id="dReport_+3A_h">h</code></td>
<td>
<p>numeric.  Height of plot, in inches</p>
</td></tr>
<tr><td><code id="dReport_+3A_w">w</code></td>
<td>
<p>numeric.  Width of plot</p>
</td></tr>
<tr><td><code id="dReport_+3A_outerlabels">outerlabels</code></td>
<td>
<p>logical that if <code>TRUE</code>, pass <code>lattice</code> graphics through the <code>latticeExtra</code> package's <code>useOuterStrips</code>function if there are two conditioning (paneling) variables, to put panel labels in outer margins.</p>
</td></tr>
<tr><td><code id="dReport_+3A_append">append</code></td>
<td>
<p>logical.  Set to <code>FALSE</code> to start a new panel</p>
</td></tr>
<tr><td><code id="dReport_+3A_sopts">sopts</code></td>
<td>
<p>list specifying extra arguments to pass to <code>bpplotM</code>, <code>summaryP</code>, or <code>summaryS</code></p>
</td></tr>
<tr><td><code id="dReport_+3A_popts">popts</code></td>
<td>
<p>list specifying extra arguments to pass to a plot method.  One example is <code>text.at</code> to specify some number beyond <code>xlim[2]</code> to leave extra space for numerators and denominators when using <code>summaryP</code> for categorical analysis variables.  Another common use is for example <code>popts=list(layout=c(columns,rows))</code> to be used in rendering <code>lattice</code> plots.  <code>key</code> and <code>panel</code> are also frequently used.</p>
</td></tr>
<tr><td><code id="dReport_+3A_lattice">lattice</code></td>
<td>
<p>set to <code>TRUE</code> to use <code>lattice</code> instead of <code>ggplot2</code> for proportions.  When this option is in effect, numerators and denominators are shown.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>dReport</code> generates multi-panel charts, separately for categorical analysis variables and continuous ones.  The Hmisc <code>summaryP</code> function and its plot method are used for categorical variables, and <code>bpplotM</code> is used to make extended box plots for continuous ones unless <code>what='byx'</code>.   Stratification is by treatment or other variables.  The user must have defined a LaTeX macro <code>\eboxpopup</code> (which may be defined to do nothing) with one argument.  This macro is called with argument <code>extended box plot</code> whenever that phrase appears in the legend, so that a <code>PDF</code> popup may be generated to show the prototype.  See the example in <code>report.Rnw</code> in the <code>tests</code> directory.  Similarly a popup macro <code>\qintpopup</code> must be defined, which generates a tooltip for the phrase <code>quantile intervals</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See test.Rnw in tests directory
</code></pre>

<hr>
<h2 id='eReport'>Event Report</h2><span id='topic+eReport'></span>

<h3>Description</h3>

<p>Generates graphics for binary event proportions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eReport(
  formula,
  data = NULL,
  subset = NULL,
  na.action = na.retain,
  minincidence = 0,
  conf.int = 0.95,
  etype = "adverse events",
  panel = "events",
  subpanel = NULL,
  head = NULL,
  tail = NULL,
  h = 6,
  w = 7,
  append = FALSE,
  popts = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="eReport_+3A_formula">formula</code></td>
<td>
<p>a formula with one or two left hand variables (the first representing major categorization and the second minor), and 1-2 right hand variables.  One of these may be enclosed in <code>id()</code> to indicate the presence of a unique subject ID, and the other is treatment.</p>
</td></tr>
<tr><td><code id="eReport_+3A_data">data</code></td>
<td>
<p>input data frame</p>
</td></tr>
<tr><td><code id="eReport_+3A_subset">subset</code></td>
<td>
<p>subsetting criteria</p>
</td></tr>
<tr><td><code id="eReport_+3A_na.action">na.action</code></td>
<td>
<p>function for handling <code>NA</code>s when creating analysis frame</p>
</td></tr>
<tr><td><code id="eReport_+3A_minincidence">minincidence</code></td>
<td>
<p>a number between 0 and 1 specifying the minimum incidence in any stratum that must hold before an event is included in the summary</p>
</td></tr>
<tr><td><code id="eReport_+3A_conf.int">conf.int</code></td>
<td>
<p>confidence level for difference in proportions</p>
</td></tr>
<tr><td><code id="eReport_+3A_etype">etype</code></td>
<td>
<p>a character string describing the nature of the events, for example <code>"adverse events"</code>, <code>"serious adverse events"</code>.  Used in figure captions.</p>
</td></tr>
<tr><td><code id="eReport_+3A_panel">panel</code></td>
<td>
<p>panel string</p>
</td></tr>
<tr><td><code id="eReport_+3A_subpanel">subpanel</code></td>
<td>
<p>a subpanel designation to add to <code>panel</code></p>
</td></tr>
<tr><td><code id="eReport_+3A_head">head</code></td>
<td>
<p>character string.  Specifies initial text in the figure caption, otherwise a default is used.</p>
</td></tr>
<tr><td><code id="eReport_+3A_tail">tail</code></td>
<td>
<p>a character string to add to end of automatic caption</p>
</td></tr>
<tr><td><code id="eReport_+3A_h">h</code></td>
<td>
<p>height of graph</p>
</td></tr>
<tr><td><code id="eReport_+3A_w">w</code></td>
<td>
<p>width of graph</p>
</td></tr>
<tr><td><code id="eReport_+3A_append">append</code></td>
<td>
<p>set to <code>TRUE</code> if adding to an existing sub-report</p>
</td></tr>
<tr><td><code id="eReport_+3A_popts">popts</code></td>
<td>
<p>a list of options to pass to graphing functions</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Generates dot charts showing proportions on left and risk difference with confidence intervals on the right, if there is only one level of event categorization.  Input data must contain one record per event, with this record containing the event name.  If there is more than one event of a given type per subject, unique subject ID must be provided.  Denominators come from <code>greport</code> options and it is assumed that only randomized subjects have records.  Some of the graphics functions are modifications of those found in the HH package.  The data are expected to have one record per event, and non-events are inferred from <code>setgreportOption('denom')</code>.  It is also assumed that only randomized subjects are included in the dataset.
</p>


<h3>Author(s)</h3>

<p>Frank Harrell
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See test.Rnw in tests directory
</code></pre>

<hr>
<h2 id='exReport'>Exclusion Report</h2><span id='topic+exReport'></span>

<h3>Description</h3>

<p>Generates graphics for sequential exclusion criteria
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exReport(
  formula,
  data = NULL,
  subset = NULL,
  na.action = na.retain,
  ignoreExcl = NULL,
  ignoreRand = NULL,
  plotExRemain = TRUE,
  autoother = FALSE,
  sort = TRUE,
  whenapp = NULL,
  erdata = NULL,
  panel = "excl",
  subpanel = NULL,
  head = NULL,
  tail = NULL,
  apptail = NULL,
  h = 5.5,
  w = 6.5,
  hc = 4.5,
  wc = 5,
  adjustwidth = "-0.75in",
  append = FALSE,
  popts = NULL,
  app = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exReport_+3A_formula">formula</code></td>
<td>
<p>a formula with only a right-hand side, possibly containing a term of the form <code>pending(x)</code> to inform the function of which subjects have incomplete randomization (&quot;randomization pending&quot;).  The <code>pending</code> variable is ignored if a subject has an exclusion marked.  A <code>randomized</code> variable is an optional <code>logical</code> vector specifying which subjects are considered to have been randomized.  The presence of this variable causes consistency checking against exclusions.  One or more <code>cond</code> variables provide binary/logical vectors used to define subsets of subjects for which denominators are used to compute additional fractions of exclusions that are reported in a detailed table.  The arguments of the <code>cond</code> function are the name of the original variable (assumed to be provided as a regular variable in <code>formula</code>, a single character string giving the label for the condition, and the vector of essentially binary values that specify the condition.</p>
</td></tr>
<tr><td><code id="exReport_+3A_data">data</code></td>
<td>
<p>input data frame</p>
</td></tr>
<tr><td><code id="exReport_+3A_subset">subset</code></td>
<td>
<p>subsetting criteria</p>
</td></tr>
<tr><td><code id="exReport_+3A_na.action">na.action</code></td>
<td>
<p>function for handling <code>NA</code>s when creating analysis frame</p>
</td></tr>
<tr><td><code id="exReport_+3A_ignoreexcl">ignoreExcl</code></td>
<td>
<p>a formula with only a right-hand side, specifying the names of exclusion variable names that are to be ignored when counting exclusions (screen failures)</p>
</td></tr>
<tr><td><code id="exReport_+3A_ignorerand">ignoreRand</code></td>
<td>
<p>a formula with only a right-hand side, specifying the names of exclusion variable names that are to be ignored when counting randomized subjects marked as exclusions</p>
</td></tr>
<tr><td><code id="exReport_+3A_plotexremain">plotExRemain</code></td>
<td>
<p>set to <code>FALSE</code> to suppress plotting a 2-panel dot plot showing the number of subjects excluded and the fraction of enrolled subjects remaining</p>
</td></tr>
<tr><td><code id="exReport_+3A_autoother">autoother</code></td>
<td>
<p>set to <code>TRUE</code> to add another exclusion <code>Unspecified</code> that is set to <code>TRUE</code> for non-pending subjects that have no other exclusions</p>
</td></tr>
<tr><td><code id="exReport_+3A_sort">sort</code></td>
<td>
<p>set to <code>FALSE</code> to not sort variables by descending exclusion frequency</p>
</td></tr>
<tr><td><code id="exReport_+3A_whenapp">whenapp</code></td>
<td>
<p>a named character vector (with names equal to names of variables in formula).  For each variable that is only assessed (i.e., is not <code>NA</code>) under certain conditions, add an element to this vector naming the condition</p>
</td></tr>
<tr><td><code id="exReport_+3A_erdata">erdata</code></td>
<td>
<p>a data frame that is subsetted on the combination of <code>id</code> variables when <code>randomized</code> is present, to print auxiliary information about randomized subjects who have exclusion criteria</p>
</td></tr>
<tr><td><code id="exReport_+3A_panel">panel</code></td>
<td>
<p>panel string</p>
</td></tr>
<tr><td><code id="exReport_+3A_subpanel">subpanel</code></td>
<td>
<p>If calling <code>exReport</code> more than once (e.g., for different values of <code>sort</code>), specify <code>subpanel</code> to distinguish the multiple calls.  In that case, <code>-subpanel</code> will be appended to <code>panel</code> when creating figure labels and cross-references.</p>
</td></tr>
<tr><td><code id="exReport_+3A_head">head</code></td>
<td>
<p>character string.  Specifies initial text in the figure caption, otherwise a default is used.</p>
</td></tr>
<tr><td><code id="exReport_+3A_tail">tail</code></td>
<td>
<p>a character string to add to end of automatic caption</p>
</td></tr>
<tr><td><code id="exReport_+3A_apptail">apptail</code></td>
<td>
<p>a character string to add to end of automatic caption for appendix table with listing of subject IDs</p>
</td></tr>
<tr><td><code id="exReport_+3A_h">h</code></td>
<td>
<p>height of 2-panel graph</p>
</td></tr>
<tr><td><code id="exReport_+3A_w">w</code></td>
<td>
<p>width of 2-panel graph</p>
</td></tr>
<tr><td><code id="exReport_+3A_hc">hc</code></td>
<td>
<p>height of cumulative exclusion 1-panel graph</p>
</td></tr>
<tr><td><code id="exReport_+3A_wc">wc</code></td>
<td>
<p>width of this 1-panel graph</p>
</td></tr>
<tr><td><code id="exReport_+3A_adjustwidth">adjustwidth</code></td>
<td>
<p>used to allow wide detailed exclusion table to go into left margin in order to be centered on the physical page.  The default is <code>'-0.75in'</code>, which works well when using article document class with default page width.  To use the geometry package in LaTeX with margin=.45in specify <code>adjustwidth='+.90in'</code>.</p>
</td></tr>
<tr><td><code id="exReport_+3A_append">append</code></td>
<td>
<p>set to <code>TRUE</code> if adding to an existing sub-report</p>
</td></tr>
<tr><td><code id="exReport_+3A_popts">popts</code></td>
<td>
<p>a list of options to pass to graphing functions</p>
</td></tr>
<tr><td><code id="exReport_+3A_app">app</code></td>
<td>
<p>set to <code>FALSE</code> to prevent writing appendix information</p>
</td></tr>
</table>


<h3>Details</h3>

<p>With input being a series of essentially binary variables with positive indicating that a subject is excluded for a specific reason, orders the reasons so that the first excludes the highest number of subjects, the second excludes the highest number of remaining subjects, and so on.  If a randomization status variable is present, actually randomized (properly or not) subjects are excluded from counts of exclusions.  First draws a single vertical axis graph showing cumulative exclusions, then creates a 2-panel dot chart with the first panel showing that information, along with the marginal frequencies of exclusions and the second showing the number of subjects remaining in the study after the sequential exclusions.  A pop-up table is created showing those quantities plus fractions.  There is an option to not sort by descending exclusion frequencies but instead to use the original variable order.  Assumes that any factor variable exclusions that have only one level and that level indicates a positive finding, that variable has a denominator equal to the overall number of subjects.
</p>


<h3>Author(s)</h3>

<p>Frank Harrell
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See test.Rnw in tests directory
</code></pre>

<hr>
<h2 id='getgreportOption'>Get greport Options</h2><span id='topic+getgreportOption'></span>

<h3>Description</h3>

<p>Get greport options, assigning default values of unspecified optios.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getgreportOption(opts = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getgreportOption_+3A_opts">opts</code></td>
<td>
<p>character vector containing list of option names to retrieve.  If only one element, the result is a scalar, otherwise a list.  If <code>opts</code> is not specified, a list with all current option settings is returned.</p>
</td></tr>
</table>

<hr>
<h2 id='greport'>Graphical Reporting for Clinical Trials</h2><span id='topic+greport'></span><span id='topic+.noGenerics'></span><span id='topic+greport-package'></span>

<h3>Description</h3>

<p>Graphical clinical trial reporting based on Rmarkdown, LaTeX, and pdf
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.noGenerics
</code></pre>


<h3>Format</h3>

<p>An object of class <code>logical</code> of length 1.
</p>


<h3>Author(s)</h3>

<p>Frank E Harrell Jr <a href="mailto:fh@fharrell.com">fh@fharrell.com</a>
</p>

<hr>
<h2 id='latticeInit'>Setup lattice plots using greport options</h2><span id='topic+latticeInit'></span>

<h3>Description</h3>

<p>Initializes colors and other graphical attributes based on
what is stored in system option <code>greport</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>latticeInit()
</code></pre>

<hr>
<h2 id='maskDframe'>Mask Variables in a Data Frame</h2><span id='topic+maskDframe'></span>

<h3>Description</h3>

<p>Given a list of applicable variable names in a formula, runs <code>maskVal</code> on any variables in a data frame <code>x</code> whose name is found in <code>formula</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>maskDframe(x, formula, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="maskDframe_+3A_x">x</code></td>
<td>
<p>an input data frame or data table</p>
</td></tr>
<tr><td><code id="maskDframe_+3A_formula">formula</code></td>
<td>
<p>a formula specifying the variables to perturb</p>
</td></tr>
<tr><td><code id="maskDframe_+3A_...">...</code></td>
<td>
<p>parameters to pass to <code>maskVal</code></p>
</td></tr>
</table>

<hr>
<h2 id='maskVal'>Mask Values of a Vector</h2><span id='topic+maskVal'></span>

<h3>Description</h3>

<p>Modifies the value of a vector so as to mask the information by generating random data subject to constraints and keeping the length, type, label, and units attributes of the original variable.  For a binary numeric or logical variable a random vector with prevalence (by default) of 0.5 replaces the original.  For a factor variable, a random multinomial sample is drawn, with equal expected frequencies of all levels.  For a numeric variable, the range is preserved but the distribution is uniform over that range, and generated values are rounded by an amount equal to the minimum spacing between distinct values.  Character variables are just randomly reordered.  In the special case where the input vector contains only one unique non-NA value, the variable is assumed to be the type of variable where NA represents FALSE or &quot;no&quot;, and the variable is replaced by a logical vector with the specified prevalence.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>maskVal(x, prev = 0.5, NAs = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="maskVal_+3A_x">x</code></td>
<td>
<p>an input vector</p>
</td></tr>
<tr><td><code id="maskVal_+3A_prev">prev</code></td>
<td>
<p>a numeric scalar specifying the prevalence for binary variables</p>
</td></tr>
<tr><td><code id="maskVal_+3A_nas">NAs</code></td>
<td>
<p>if the variable contains <code>NA</code>s, keep the same expected proportion of <code>NA</code>s but distribute them randomly.  Otherwise, the new vector will have no missing values.</p>
</td></tr>
</table>

<hr>
<h2 id='Merge'>Merge Multiple Data Frames or Data Tables</h2><span id='topic+Merge'></span>

<h3>Description</h3>

<p>Merges an arbitrarily large series of data frames or data tables containing common <code>id</code> variables (keys for data tables).  Information about number of observations and number of unique <code>id</code>s in individual and final merged datasets is printed.  The first data frame has special meaning in that all of its observations are kept whether they match <code>id</code>s in other data frames or not.  For all other data frames, by default non-matching observations are dropped.  The first data frame is also the one against which counts of unique <code>id</code>s are compared.  Sometimes <code>merge</code> drops variable attributes such as <code>labels</code> and <code>units</code>.  These are restored by <code>Merge</code>.  If all objects are of class <code>data.table</code>, faster merging will be done using the <code>data.table</code> package's join operation.  This assumes that all objects have identical key variables and those of the variables on which to merge.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Merge(..., id, all = TRUE, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Merge_+3A_...">...</code></td>
<td>
<p>two or more dataframes or data tables</p>
</td></tr>
<tr><td><code id="Merge_+3A_id">id</code></td>
<td>
<p>a formula containing all the identification variables such that the combination of these variables uniquely identifies subjects or records of interest.  May be omitted for data tables; in that case the <code>key</code> function retrieves the id variables.</p>
</td></tr>
<tr><td><code id="Merge_+3A_all">all</code></td>
<td>
<p>set to <code>FALSE</code> to drop observations not found in second and later data frames (only applies if not using <code>data.table</code>)</p>
</td></tr>
<tr><td><code id="Merge_+3A_verbose">verbose</code></td>
<td>
<p>set to <code>FALSE</code> to not print information about observations</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>a &lt;- data.frame(sid=1:3, age=c(20,30,40))
b &lt;- data.frame(sid=c(1,2,2), bp=c(120,130,140))
d &lt;- data.frame(sid=c(1,3,4), wt=c(170,180,190))
all &lt;- Merge(a, b, d, id = ~ sid)
# For data.table, first file must be the master file and must
# contain all ids that ever occur.  ids not in the master will
# not be merged from other datasets.
require(data.table)
a &lt;- data.table(a); setkey(a, sid)
# data.table also does not allow duplicates without allow.cartesian=TRUE
b &lt;- data.table(sid=1:2, bp=c(120,130)); setkey(b, sid)
d &lt;- data.table(d); setkey(d, sid)
all &lt;- Merge(a, b, d)
</code></pre>

<hr>
<h2 id='mfrowSuggest'>Compute mfrow Parameter</h2><span id='topic+mfrowSuggest'></span>

<h3>Description</h3>

<p>Compute a good <code>par("mfrow")</code> given the
number of figures to plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mfrowSuggest(n, small = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mfrowSuggest_+3A_n">n</code></td>
<td>
<p>numeric. Total number of figures to place in layout.</p>
</td></tr>
<tr><td><code id="mfrowSuggest_+3A_small">small</code></td>
<td>
<p>logical. Set to &lsquo;TRUE&rsquo; if the plot area should be
smaller to accomodate many plots.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>return numeric vector.
oldmfrow &lt;- mfrowSet(8)
</p>

<hr>
<h2 id='nriskReport'>Number at Risk Report</h2><span id='topic+nriskReport'></span>

<h3>Description</h3>

<p>Graph number of subjects at risk
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nriskReport(
  formula,
  groups = NULL,
  time0 = "randomization",
  data = NULL,
  subset = NULL,
  na.action = na.retain,
  ylab = "Number Followed",
  panel = "nrisk",
  head = NULL,
  tail = NULL,
  h = 5.5,
  w = 5.5,
  outerlabels = TRUE,
  append = FALSE,
  popts = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nriskReport_+3A_formula">formula</code></td>
<td>
<p>a formula with time and the left hand side, and with variables on the right side being possible stratification variables.  If no stratification put <code>1</code> as the right hand side.  Specify unique subject IDs by including a term <code>id()</code> if subjects have more than one observation.</p>
</td></tr>
<tr><td><code id="nriskReport_+3A_groups">groups</code></td>
<td>
<p>a character string naming a superpositioning variable.  Must also be included in <code>formula</code>.</p>
</td></tr>
<tr><td><code id="nriskReport_+3A_time0">time0</code></td>
<td>
<p>a character string defining the meaning of time zero in follow-up.  Default is <code>"randomization"</code>.</p>
</td></tr>
<tr><td><code id="nriskReport_+3A_data">data</code></td>
<td>
<p>data frame</p>
</td></tr>
<tr><td><code id="nriskReport_+3A_subset">subset</code></td>
<td>
<p>a subsetting epression for the entire analysis</p>
</td></tr>
<tr><td><code id="nriskReport_+3A_na.action">na.action</code></td>
<td>
<p>a NA handling function for data frames, default is <code>na.retain</code></p>
</td></tr>
<tr><td><code id="nriskReport_+3A_ylab">ylab</code></td>
<td>
<p>character string if you want to override <code>"Number Followed"</code></p>
</td></tr>
<tr><td><code id="nriskReport_+3A_panel">panel</code></td>
<td>
<p>character string.  Name of panel, which goes into file base names and figure labels for cross-referencing.  The default is <code>'nrisk'</code>.</p>
</td></tr>
<tr><td><code id="nriskReport_+3A_head">head</code></td>
<td>
<p>character string.  Specifies initial text in the figure caption, otherwise a default is used</p>
</td></tr>
<tr><td><code id="nriskReport_+3A_tail">tail</code></td>
<td>
<p>optional character string.  Specifies final text in the figure caption, e.g., what might have been put in a footnote in an ordinary text page.  This appears just before any needles.</p>
</td></tr>
<tr><td><code id="nriskReport_+3A_h">h</code></td>
<td>
<p>numeric.  Height of plot, in inches</p>
</td></tr>
<tr><td><code id="nriskReport_+3A_w">w</code></td>
<td>
<p>numeric.  Width of plot</p>
</td></tr>
<tr><td><code id="nriskReport_+3A_outerlabels">outerlabels</code></td>
<td>
<p>logical that if <code>TRUE</code>, pass <code>lattice</code> graphics through the <code>latticeExtra</code> package's <code>useOuterStrips</code>function if there are two conditioning (paneling) variables, to put panel labels in outer margins.</p>
</td></tr>
<tr><td><code id="nriskReport_+3A_append">append</code></td>
<td>
<p>logical.  Set to <code>FALSE</code> to start a new panel</p>
</td></tr>
<tr><td><code id="nriskReport_+3A_popts">popts</code></td>
<td>
<p>list specifying extra arguments to pass to <code>Ecdf</code>.  A common use is for example <code>popts=list(layout=c(columns,rows))</code> to be used in rendering <code>lattice</code> plots.  <code>key</code> and <code>panel</code> are also frequently used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>nriskReport</code> generates multi-panel charts, separately for categorical analysis variables.  Each panel depicts the number at risk as a function of follow-up time.  The Hmisc <code>Ecdf</code> function is used.  Stratification is by treatment or other variables.  It is assumed that this function is only run on randomized subjects.  If an <code>id</code> variable is present but <code>groups</code> and stratification variables are not, other plots are also produced: a histogram of the number of visits per subject, a histogram of times at which subjects have visits, the average number of contacts as a function of elapsed time, and a histogram showing the distribution of the longest gap between visits over subjects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See test.Rnw in tests directory
</code></pre>

<hr>
<h2 id='putFig'>Put Figure</h2><span id='topic+putFig'></span>

<h3>Description</h3>

<p>Included a generated figure within LaTex document.  <code>tcaption</code> and <code>tlongcaption</code> only apply if <code>setgreportOption(tablelink="hyperref")</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>putFig(
  panel,
  name,
  caption = NULL,
  longcaption = NULL,
  tcaption = caption,
  tlongcaption = NULL,
  poptable = NULL,
  popfull = FALSE,
  sidecap = FALSE,
  outtable = FALSE,
  append = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="putFig_+3A_panel">panel</code></td>
<td>
<p>character. Panel name.</p>
</td></tr>
<tr><td><code id="putFig_+3A_name">name</code></td>
<td>
<p>character. Name for figure.</p>
</td></tr>
<tr><td><code id="putFig_+3A_caption">caption</code></td>
<td>
<p>character. Short caption for figure.</p>
</td></tr>
<tr><td><code id="putFig_+3A_longcaption">longcaption</code></td>
<td>
<p>character. Long caption for figure.</p>
</td></tr>
<tr><td><code id="putFig_+3A_tcaption">tcaption</code></td>
<td>
<p>character.  Short caption for supporting table.</p>
</td></tr>
<tr><td><code id="putFig_+3A_tlongcaption">tlongcaption</code></td>
<td>
<p>character.  Long caption for supporting table.</p>
</td></tr>
<tr><td><code id="putFig_+3A_poptable">poptable</code></td>
<td>
<p>an optional character string containing LaTeX code that will be used as a pop-up tool tip for the figure (typically a tabular).  Set to <code>NULL</code> to suppress supplemental tables that back up figures.</p>
</td></tr>
<tr><td><code id="putFig_+3A_popfull">popfull</code></td>
<td>
<p>set to <code>TRUE</code> to make the pop-up be full-page</p>
</td></tr>
<tr><td><code id="putFig_+3A_sidecap">sidecap</code></td>
<td>
<p>set to <code>TRUE</code> (only applies if <code>greportOption(figenv="SCfigure")</code>) to assume the figure is narrow and to use side captions</p>
</td></tr>
<tr><td><code id="putFig_+3A_outtable">outtable</code></td>
<td>
<p>set to <code>TRUE</code> to only have the caption and hyperlink to graphics in a LaTeX table environment and to leave the tabulars to free-standing LaTeX markup.  This is useful when the table is long, to prevent hyperlinking from making the table run outside the visable area.  Instead of the hyperlink area being the whole table, it will be the caption.  A <code>clearpage</code> is issued after the tabular.</p>
</td></tr>
<tr><td><code id="putFig_+3A_append">append</code></td>
<td>
<p>logical. If &lsquo;TRUE&rsquo; output will be appended instead of overwritten.</p>
</td></tr>
</table>

<hr>
<h2 id='sampleFrac'>Compute Sample Fractions</h2><span id='topic+sampleFrac'></span>

<h3>Description</h3>

<p>Uses denominators stored with <code>setgreportOption</code> along with counts specified to <code>SampleFrac</code> to compute fractions of subjects in current analysis
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sampleFrac(n, nobsY = NULL, table = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sampleFrac_+3A_n">n</code></td>
<td>
<p>integer vector, named with <code>"enrolled","randomized"</code> and optionally also including treatment levels.</p>
</td></tr>
<tr><td><code id="sampleFrac_+3A_nobsy">nobsY</code></td>
<td>
<p>a result of the the <code>nobsY</code> Hmisc function</p>
</td></tr>
<tr><td><code id="sampleFrac_+3A_table">table</code></td>
<td>
<p>set to <code>TRUE</code> to return as an attribute <code>"table"</code> a character string containing a LaTeX tabular showing the pertinent frequencies created from <code>n</code> and the <code>denom</code> option, and if <code>nobsY</code> is present, adding another table with response variable-specific counts.</p>
</td></tr>
</table>

<hr>
<h2 id='setgreportOption'>Set greport Options</h2><span id='topic+setgreportOption'></span>

<h3>Description</h3>

<p>Set greport Options
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setgreportOption(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setgreportOption_+3A_...">...</code></td>
<td>
<p>a series of options for which non-default values are desired:
</p>

<ul>
<li><p><code>tx.pch</code>:symbols corresponding to treatments
</p>
</li>
<li><p><code>tx.col</code>:colors corresponding to treatments
</p>
</li>
<li><p><code>tx.linecol</code>:colors for lines in line plots
</p>
</li>
<li><p><code>nontx.col</code>:colors for categories other than treatments
</p>
</li>
<li><p><code>tx.lty</code>:line types corresponding to treatments
</p>
</li>
<li><p><code>tx.lwd</code>:line widths corresponding to treatments
</p>
</li>
<li><p><code>tx.var</code>:character string name of treatment variable
</p>
</li>
<li><p><code>er.col</code>:2-vector with names <code>"enrolled","randomized"</code> containing colors to use for enrolled and randomized in needle displays
</p>
</li>
<li><p><code>alpha.f</code>:single numeric specifying alpha adjustment to be applied to all colors.  Default is 0.7
</p>
</li>
<li><p><code>denom</code>:named vector with overall sample sizes
</p>
</li>
<li><p><code>tablelink</code>:a character string, either <code>"tooltip"</code> or <code>"hyperref"</code> (the default); use the latter to make supporting data tables be hyperlinked to tables in the appendix rather than using a pop-up tooltip
</p>
</li>
<li><p><code>figenv</code>:LaTeX figure environment to use, default is <code>"figure"</code>.  Use <code>figenv="SCfigure"</code> if using the LaTeX <code>sidecap</code> package.  <code>SCfigure</code> is only used for narrow images, by calling <code>putFig</code> with <code>sidecap=TRUE</code>.
</p>
</li>
<li><p>codefigpos:LaTeX figure environment position; default is <code>"htb!"</code>
</p>
</li>
<li><p><code>gtype</code>:graphics type, <code>"pdf"</code> or <code>"interactive"</code>
</p>
</li>
<li><p><code>pdfdir</code>:name of subdirectory in which to write <code>pdf</code> graphics
</p>
</li>
<li><p><code>texdir</code>:name of subdirectory in which to write <code>LaTeX</code> code
</p>
</li>
<li><p><code>texwhere</code>:default is <code>"texdir"</code> to use location specified by <code>texdir</code>.  Set to <code>""</code> to write generated non-appendix LaTeX code to the console as expected by <code>knitr</code>
</p>
</li>
<li><p><code>defs</code>:fully qualified file name to which to write LaTeX macro definitions such as poptables
</p>
</li></ul>
</td></tr>
</table>

<hr>
<h2 id='startPlot'>Plot Initialization</h2><span id='topic+startPlot'></span><span id='topic+endPlot'></span>

<h3>Description</h3>

<p>Toggle plotting.  Sets options by examining <code>setgreportOption(gtype=)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>startPlot(file, h = 7, w = 7, lattice = TRUE, ...)

endPlot()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="startPlot_+3A_file">file</code></td>
<td>
<p>character.  Character string specifying file prefix.</p>
</td></tr>
<tr><td><code id="startPlot_+3A_h">h</code></td>
<td>
<p>numeric.  Height of plot in inches, default=7.</p>
</td></tr>
<tr><td><code id="startPlot_+3A_w">w</code></td>
<td>
<p>numeric.  Width of plot in inches, default=7.</p>
</td></tr>
<tr><td><code id="startPlot_+3A_lattice">lattice</code></td>
<td>
<p>logical.  Set to <code>FALSE</code> to prevent <code>latticeInit</code> from being called.</p>
</td></tr>
<tr><td><code id="startPlot_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to <code>spar</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='survReport'>Survival Report</h2><span id='topic+survReport'></span>

<h3>Description</h3>

<p>Generate a Survival Report with Kaplan-Meier Estimates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survReport(
  formula,
  data = NULL,
  subset = NULL,
  na.action = na.retain,
  ylab = NULL,
  what = c("S", "1-S"),
  conf = c("diffbands", "bands", "bars", "none"),
  cause = NULL,
  panel = "surv",
  subpanel = NULL,
  head = NULL,
  tail = NULL,
  h = 3,
  w = 4.5,
  multi = FALSE,
  markevent = TRUE,
  mfrow = NULL,
  y.n.risk = 0,
  mylim = NULL,
  bot = 2,
  aehaz = TRUE,
  times = NULL,
  append = FALSE,
  opts = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="survReport_+3A_formula">formula</code></td>
<td>
<p>a formula with survival (<code>Surv</code>) objects on the left hand side and an optional stratification factor on the right (or <code>1</code> if none).  The survival object component variables should be labeled; these labels are used for graph annotation.  If any of the <code>Surv</code> objects are competing risk objects (see <code><a href="survival.html#topic+Surv">Surv</a></code>), event labels come from the factor levels in the variable that was the second argument to <code>Surv</code>, and the first factor level must correspond to right-censored observations.</p>
</td></tr>
<tr><td><code id="survReport_+3A_data">data</code></td>
<td>
<p>data.frame</p>
</td></tr>
<tr><td><code id="survReport_+3A_subset">subset</code></td>
<td>
<p>optional subsetting criteria</p>
</td></tr>
<tr><td><code id="survReport_+3A_na.action">na.action</code></td>
<td>
<p>function for handling <code>NA</code>s while creating a data frame</p>
</td></tr>
<tr><td><code id="survReport_+3A_ylab">ylab</code></td>
<td>
<p>character. Passed to <code><a href="rms.html#topic+survplot.npsurv">survplot.npsurv</a></code> as the <code>ylab</code> argument.  Constructed by default.</p>
</td></tr>
<tr><td><code id="survReport_+3A_what">what</code></td>
<td>
<p><code>"S"</code> (the default) to plot survival functions or <code>"1-S"</code> to plot cumulative incidence functions.  If any of the survival time objects on the left hand side are competing risk objects, the default is <code>"1-S"</code> and you may not change it.</p>
</td></tr>
<tr><td><code id="survReport_+3A_conf">conf</code></td>
<td>
<p>character. See <code><a href="rms.html#topic+survplot.npsurv">survplot.npsurv</a></code>.</p>
</td></tr>
<tr><td><code id="survReport_+3A_cause">cause</code></td>
<td>
<p>character vector or list.  If a vector, every <code>Surv</code> term on the left hand side of <code>formula</code> will have cumulative incidence plotted for all causes that appear in <code>cause</code>.  If a list, the list elements must correspond to the <code>Surv</code> terms in order, and specify which causes to display from the corresponding <code>Surv</code> object.  When <code>cause</code> is a list and one of its elements contains more than one character string, or when <code>cause</code> is a vector and for one <code>Surv</code> object it matches multiple causes, <code>survReport</code> produces more plots than there are <code>Surv</code> objects.</p>
</td></tr>
<tr><td><code id="survReport_+3A_panel">panel</code></td>
<td>
<p>character string.  Name of panel, which goes into file base names and figure labels for cross-referencing.</p>
</td></tr>
<tr><td><code id="survReport_+3A_subpanel">subpanel</code></td>
<td>
<p>character string.  If calling <code>dReport</code> more than once for the same type of chart (categorical or continuous), specify <code>subpanel</code> to distinguish the multiple calls.  In that case, <code>-subpanel</code> will be appended to <code>panel</code> when creating figure labels and cross-references.</p>
</td></tr>
<tr><td><code id="survReport_+3A_head">head</code></td>
<td>
<p>character string.  Specifies initial text in the figure caption, otherwise a default is used.</p>
</td></tr>
<tr><td><code id="survReport_+3A_tail">tail</code></td>
<td>
<p>optional character string.  Specifies final text in the figure caption, e.g., what might have been put in a footnote in an ordinary text page.  This appears just before any needles.</p>
</td></tr>
<tr><td><code id="survReport_+3A_h">h</code></td>
<td>
<p>numeric. Height of plots.</p>
</td></tr>
<tr><td><code id="survReport_+3A_w">w</code></td>
<td>
<p>numeric. Width of plots in inches.</p>
</td></tr>
<tr><td><code id="survReport_+3A_multi">multi</code></td>
<td>
<p>logical.  If <code>TRUE</code>, multiple figures are produced, otherwise a single figure with a matrix of survival plots is made.</p>
</td></tr>
<tr><td><code id="survReport_+3A_markevent">markevent</code></td>
<td>
<p>logical.  Applies only if <code>multi=TRUE</code>.  Specify <code>FALSE</code> to not put the event label in the extreme upper left of the plot.</p>
</td></tr>
<tr><td><code id="survReport_+3A_mfrow">mfrow</code></td>
<td>
<p>numeric 2-vector, used if <code>multi=FALSE</code>.  If not specified, default plot matrix layout will be figured.</p>
</td></tr>
<tr><td><code id="survReport_+3A_y.n.risk">y.n.risk</code></td>
<td>
<p>used if <code>what="1-S"</code>, to specify <code>y</code> coordinate for putting numbers at risk, typically below the <code>x</code>-axis label</p>
</td></tr>
<tr><td><code id="survReport_+3A_mylim">mylim</code></td>
<td>
<p>numeric 2-vector.  Used to force expansion of computed y-axis limits.  See <code>survplot</code>.</p>
</td></tr>
<tr><td><code id="survReport_+3A_bot">bot</code></td>
<td>
<p>number of spaces to reserve at bottom of plot for numbers at risk, if <code>what="1-S"</code></p>
</td></tr>
<tr><td><code id="survReport_+3A_aehaz">aehaz</code></td>
<td>
<p>logical.  Set to <code>FALSE</code> to not print number of events and hazard rate on plots.</p>
</td></tr>
<tr><td><code id="survReport_+3A_times">times</code></td>
<td>
<p>numeric vector.  If specified, prints cumulative incidence probabilities at those times on the plots.</p>
</td></tr>
<tr><td><code id="survReport_+3A_append">append</code></td>
<td>
<p>logical. If <code>TRUE</code> output will be appended instead of overwritten.</p>
</td></tr>
<tr><td><code id="survReport_+3A_opts">opts</code></td>
<td>
<p>list.  A list specifying arguments to <code>survReport</code> and <code>startPlot</code> that override any other arguments.  This is useful when making a long series of <code>survReport</code> calls with the same options, as the options can be defined up front in a list.</p>
</td></tr>
<tr><td><code id="survReport_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## See tests directory test.Rnw for a live example
## Not run: 
  set.seed(1)
  n &lt;- 400
  dat &lt;- data.frame(t1=runif(n, 2, 5), t2=runif(n, 2, 5),
                    e1=rbinom(n, 1, .5), e2=rbinom(n, 1, .5),
                    treat=sample(c('a','b'), n, TRUE))
  dat &lt;- upData(dat,
                labels=c(t1='Time to operation',
                         t2='Time to rehospitalization',
                         e1='Operation', e2='Hospitalization',
                         treat='Treatment')
                units=c(t1='year', t2='year'))
  survReport(Surv(t1, e1) + Surv(t2, e2) ~ treat, data=dat)

  dat &lt;- upData(dat, labels=c(t1='Follow-up Time', t2='Time'),
                cause=factor(sample(c('death','MI','censor'), n, TRUE),
                             c('censor', 'MI', 'death')))
  survReport(Surv(t1, cause) ~ treat, cause='death', data=dat)
  survReport(Surv(t1, cause) + Surv(t2, cause) ~ treat,
             cause=list(c('death', 'MI'), 'death'), data=dat)
  # Two plots for t1, one plot for t2

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
