<!DOCTYPE html><html lang="en-US"><head><title>Help for package digitTests</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {digitTests}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#digitTests-package'><p>digitTests: Tests for Detecting Irregular Data Patterns</p></a></li>
<li><a href='#distr.btest'><p>Bayesian Test of Digits against a Reference Distribution</p></a></li>
<li><a href='#distr.test'><p>Test of Digits against a Reference Distribution</p></a></li>
<li><a href='#dt-methods'><p>Methods for da objects</p></a></li>
<li><a href='#extract_digits'><p>Extraction of First or Last Digits</p></a></li>
<li><a href='#rv.test'><p>Test of Repeated Values</p></a></li>
<li><a href='#sanitizer'><p>Factory Workers' use of Hand Sanitizer</p></a></li>
<li><a href='#sinoForest'><p>Financial Statemens of Sino Forest Corporation's 2010 Report</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Tests for Detecting Irregular Digit Patterns</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-06-16</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides statistical tests and support functions for detecting irregular digit patterns in numerical data. The package includes tools for extracting digits at various locations in a number, tests for repeated values, and (Bayesian) tests of digit distributions.</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/koenderks/digitTests/issues">https://github.com/koenderks/digitTests/issues</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://koenderks.github.io/digitTests/">https://koenderks.github.io/digitTests/</a>,
<a href="https://github.com/koenderks/digitTests">https://github.com/koenderks/digitTests</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>graphics, stats</td>
</tr>
<tr>
<td>Suggests:</td>
<td>benford.analysis, BenfordTests, BeyondBenford, knitr,
rmarkdown, testthat</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-06-16 14:38:22 UTC; derksk</td>
</tr>
<tr>
<td>Author:</td>
<td>Koen Derks <a href="https://orcid.org/0000-0002-5533-9349"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Koen Derks &lt;k.derks@nyenrode.nl&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-06-16 16:10:12 UTC</td>
</tr>
</table>
<hr>
<h2 id='digitTests-package'>digitTests: Tests for Detecting Irregular Data Patterns</h2><span id='topic+digitTests'></span><span id='topic+digitTests-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" alt='logo' width='120' style='float: right' />
</p>
<p><code>digitTests</code> is an <span class="rlang"><b>R</b></span> package providing tests for detecting irregular data patterns.
</p>
<p>The package and its analyses are also implemented with a graphical user interface in the Audit module of 
<a href="https://jasp-stats.org">JASP</a>, a free and open-source statistical software program.
</p>


<h3>Author(s)</h3>


<table>
<tr>
 <td style="text-align: left;">
    Koen Derks (maintainer, author)</td><td style="text-align: left;"> &lt;k.derks@nyenrode.nl&gt; </td>
</tr>
<tr>
 <td style="text-align: left;">
  </td>
</tr>

</table>

<p>Please use the citation provided by <span class="rlang"><b>R</b></span> when citing this package. 
A BibTex entry is available from <code>citation("digitTests")</code>.
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li><p> The <a href="https://github.com/koenderks/digitTests/issues">issue page</a> to submit a bug report or feature request.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
# Load the digitTests package
library(digitTests)

############################################
### Example 1: Benford's Law ####
############################################

data('sinoForest')
distr.test(sinoForest$value, check = 'first', reference = 'benford')

###################################
### Example 2: Repeated Values ####
###################################

data('sanitizer')
rv.test(sanitizer$value, check = 'lasttwo', method = 'af', B = 1000)

</code></pre>

<hr>
<h2 id='distr.btest'>Bayesian Test of Digits against a Reference Distribution</h2><span id='topic+distr.btest'></span>

<h3>Description</h3>

<p>This function extracts and performs a Bayesian test of the distribution of (leading) digits in a vector against a reference distribution. By default, the distribution of leading digits is checked against Benford's law.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>distr.btest(x, check = 'first', reference = 'benford', 
            alpha = NULL, BF10 = TRUE, log = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="distr.btest_+3A_x">x</code></td>
<td>
<p>a numeric vector.</p>
</td></tr>
<tr><td><code id="distr.btest_+3A_check">check</code></td>
<td>
<p>location of the digits to analyze. Can be <code>first</code>, <code>firsttwo</code>, or <code>last</code>.</p>
</td></tr>
<tr><td><code id="distr.btest_+3A_reference">reference</code></td>
<td>
<p>which character string given the reference distribution for the digits, or a vector of probabilities for each digit. Can be <code>benford</code> for Benford's law, <code>uniform</code> for the uniform distribution. An error is given if any entry of <code>reference</code> is negative. Probabilities that do not sum to one are normalized.</p>
</td></tr>
<tr><td><code id="distr.btest_+3A_alpha">alpha</code></td>
<td>
<p>a numeric vector containing the prior parameters for the Dirichlet distribution on the digit categories.</p>
</td></tr>
<tr><td><code id="distr.btest_+3A_bf10">BF10</code></td>
<td>
<p>logical. Whether to compute the Bayes factor in favor of the alternative hypothesis (BF10) or the null hypothesis (BF01).</p>
</td></tr>
<tr><td><code id="distr.btest_+3A_log">log</code></td>
<td>
<p>logical. Whether to return the logarithm of the Bayes factor.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Benford's law is defined as <code class="reqn">p(d) = log10(1/d)</code>. The uniform distribution is defined as <code class="reqn">p(d) = 1/d</code>.
</p>
<p>The Bayes Factor <code class="reqn">BF_{10}</code> quantifies how much more likely the data are to be observed under <code class="reqn">H_{1}</code>: the digits are not distributed according to the reference distribution than under <code class="reqn">H_{0}</code>: the digits are distributed according to the reference distribution. Therefore, <code class="reqn">BF_{10}</code> can be interpreted as the relative support in the observed data for <code class="reqn">H_{1}</code> versus <code class="reqn">H_{0}</code>. If <code class="reqn">BF_{10}</code> is 1, there is no preference for either <code class="reqn">H_{1}</code> or <code class="reqn">H_{0}</code>. If <code class="reqn">BF_{10}</code> is larger than 1, <code class="reqn">H_{1}</code> is preferred. If <code class="reqn">BF_{10}</code> is between 0 and 1, <code class="reqn">H_{0}</code> is preferred. The Bayes factor is calculated using the Savage-Dickey density ratio.
</p>


<h3>Value</h3>

<p>An object of class <code>dt.distr</code> containing:
</p>
<table role = "presentation">
<tr><td><code>observed</code></td>
<td>
<p>the observed counts.</p>
</td></tr>
<tr><td><code>expected</code></td>
<td>
<p>the expected counts under the null hypothesis.</p>
</td></tr>
<tr><td><code>n</code></td>
<td>
<p>the number of observations in <code>x</code>.</p>
</td></tr>
<tr><td><code>statistic</code></td>
<td>
<p>the value the chi-squared test statistic.</p>
</td></tr>
<tr><td><code>parameter</code></td>
<td>
<p>the degrees of freedom of the approximate chi-squared distribution of the test statistic.</p>
</td></tr>
<tr><td><code>p.value</code></td>
<td>
<p>the p-value for the test.</p>
</td></tr>
<tr><td><code>check</code></td>
<td>
<p>checked digits.</p>
</td></tr>
<tr><td><code>digits</code></td>
<td>
<p>vector of digits.</p>
</td></tr>
<tr><td><code>reference</code></td>
<td>
<p>reference distribution</p>
</td></tr>
<tr><td><code>data.name</code></td>
<td>
<p>a character string giving the name(s) of the data.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Koen Derks, <a href="mailto:k.derks@nyenrode.nl">k.derks@nyenrode.nl</a>
</p>


<h3>References</h3>

<p>Benford, F. (1938). The law of anomalous numbers. <em>In Proceedings of the American Philosophical Society</em>, 551-572.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+distr.test">distr.test</a></code> <code><a href="#topic+rv.test">rv.test</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(1)
x &lt;- rnorm(100)

# Bayesian digit analysis against Benford's law
distr.btest(x, check = 'first', reference = 'benford')

# Bayesian digit analysis against Benford's law, custom prior
distr.btest(x, check = 'first', reference = 'benford', alpha = 9:1)

# Bayesian digit analysis against custom distribution
distr.btest(x, check = 'last', reference = rep(1/9, 9))

</code></pre>

<hr>
<h2 id='distr.test'>Test of Digits against a Reference Distribution</h2><span id='topic+distr.test'></span>

<h3>Description</h3>

<p>This function extracts and performs a test of the distribution of (leading) digits in a vector against a reference distribution. By default, the distribution of leading digits is checked against Benford's law.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>distr.test(x, check = 'first', reference = 'benford')
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="distr.test_+3A_x">x</code></td>
<td>
<p>a numeric vector.</p>
</td></tr>
<tr><td><code id="distr.test_+3A_check">check</code></td>
<td>
<p>location of the digits to analyze. Can be <code>first</code>, <code>firsttwo</code>, or <code>last</code>.</p>
</td></tr>
<tr><td><code id="distr.test_+3A_reference">reference</code></td>
<td>
<p>which character string given the reference distribution for the digits, or a vector of probabilities for each digit. Can be <code>benford</code> for Benford's law, <code>uniform</code> for the uniform distribution. An error is given if any entry of <code>reference</code> is negative. Probabilities that do not sum to one are normalized.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Benford's law is defined as <code class="reqn">p(d) = log10(1/d)</code>. The uniform distribution is defined as <code class="reqn">p(d) = 1/d</code>.
</p>


<h3>Value</h3>

<p>An object of class <code>dt.distr</code> containing:
</p>
<table role = "presentation">
<tr><td><code>observed</code></td>
<td>
<p>the observed counts.</p>
</td></tr>
<tr><td><code>expected</code></td>
<td>
<p>the expected counts under the null hypothesis.</p>
</td></tr>
<tr><td><code>n</code></td>
<td>
<p>the number of observations in <code>x</code>.</p>
</td></tr>
<tr><td><code>statistic</code></td>
<td>
<p>the value the chi-squared test statistic.</p>
</td></tr>
<tr><td><code>parameter</code></td>
<td>
<p>the degrees of freedom of the approximate chi-squared distribution of the test statistic.</p>
</td></tr>
<tr><td><code>p.value</code></td>
<td>
<p>the p-value for the test.</p>
</td></tr>
<tr><td><code>check</code></td>
<td>
<p>checked digits.</p>
</td></tr>
<tr><td><code>digits</code></td>
<td>
<p>vector of digits.</p>
</td></tr>
<tr><td><code>reference</code></td>
<td>
<p>reference distribution</p>
</td></tr>
<tr><td><code>data.name</code></td>
<td>
<p>a character string giving the name(s) of the data.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Koen Derks, <a href="mailto:k.derks@nyenrode.nl">k.derks@nyenrode.nl</a>
</p>


<h3>References</h3>

<p>Benford, F. (1938). The law of anomalous numbers. <em>In Proceedings of the American Philosophical Society</em>, 551-572.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+distr.btest">distr.btest</a></code> <code><a href="#topic+rv.test">rv.test</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(1)
x &lt;- rnorm(100)

# Digit analysis against Benford's law
distr.test(x, check = 'first', reference = 'benford')

# Digit analysis against custom distribution
distr.test(x, check = 'last', reference = rep(1/9, 9))

</code></pre>

<hr>
<h2 id='dt-methods'>Methods for da objects</h2><span id='topic+dt-methods'></span><span id='topic+print.dt.distr'></span><span id='topic+print.dt.rv'></span><span id='topic+plot.dt.distr'></span><span id='topic+plot.dt.rv'></span>

<h3>Description</h3>

<p>Methods defined for objects returned from the <code><a href="#topic+distr.test">distr.test</a></code>, <code><a href="#topic+distr.btest">distr.btest</a></code>, and <code><a href="#topic+rv.test">rv.test</a></code> functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'dt.distr'
print(x, digits = getOption("digits"), ...)

## S3 method for class 'dt.rv'
print(x, digits = getOption("digits"), ...)

## S3 method for class 'dt.distr'
plot(x, ...)

## S3 method for class 'dt.rv'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dt-methods_+3A_x">x</code></td>
<td>
<p>an object of class <code>da</code> as returned by one of the package functions.</p>
</td></tr>
<tr><td><code id="dt-methods_+3A_digits">digits</code></td>
<td>
<p>the number of digits to round to.</p>
</td></tr>
<tr><td><code id="dt-methods_+3A_...">...</code></td>
<td>
<p>further arguments, currently ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The <code>print</code> methods simply print and return nothing.
</p>

<hr>
<h2 id='extract_digits'>Extraction of First or Last Digits</h2><span id='topic+extract_digits'></span>

<h3>Description</h3>

<p>This function extracts the first (and optionally second) or last digits in a vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_digits(x, check = 'first', include.zero = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="extract_digits_+3A_x">x</code></td>
<td>
<p>a numeric vector.</p>
</td></tr>
<tr><td><code id="extract_digits_+3A_check">check</code></td>
<td>
<p>location of the digits to extract. Can be <code>first</code>, <code>firsttwo</code>, or <code>last</code>.</p>
</td></tr>
<tr><td><code id="extract_digits_+3A_include.zero">include.zero</code></td>
<td>
<p>logical. Whether to include the digit zero in the output.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of first (and optionally second) or last digits.
</p>


<h3>Author(s)</h3>

<p>Koen Derks, <a href="mailto:k.derks@nyenrode.nl">k.derks@nyenrode.nl</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(1)
x &lt;- rnorm(100)

# Extract first digits (without zero)
extract_digits(x, check = 'first')

# Extract last digits (including zero)
extract_digits(x, check = 'last', include.zero = TRUE)

</code></pre>

<hr>
<h2 id='rv.test'>Test of Repeated Values</h2><span id='topic+rv.test'></span>

<h3>Description</h3>

<p>This function analyzes the frequency with which values get repeated within a set of numbers. Unlike Benford's law, and its generalizations, this approach examines the entire number at once, not only the first or last digit.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rv.test(x, check = 'last', method = 'af', B = 2000)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rv.test_+3A_x">x</code></td>
<td>
<p>a numeric vector of values from which the digits should be analyzed.</p>
</td></tr>
<tr><td><code id="rv.test_+3A_check">check</code></td>
<td>
<p>which digits to shuffle during the procedure. Can be <code>last</code> or <code>lasttwo</code>.</p>
</td></tr>
<tr><td><code id="rv.test_+3A_method">method</code></td>
<td>
<p>which property of the data is calculated. Defaults to <code>af</code> for average frequency, but can also be <code>entropy</code> for entropy.</p>
</td></tr>
<tr><td><code id="rv.test_+3A_b">B</code></td>
<td>
<p>how many samples to use in the bootstraping procedure.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To determine whether the data show an excessive amount of bunching, the null hypothesis that <code>x</code> does not contain an unexpected amount of repeated values is tested against the alternative hypothesis that <code>x</code> has more repeated values than expected. The statistic can either be the average frequency (<code class="reqn">AF = sum(f_i^2)/sum(f_i))</code> of the data or the entropy (<code class="reqn">E = - sum(p_i * log(p_i))</code>, with <code class="reqn">p_i=f_i/n</code>) of the data. Average frequency and entropy are highly correlated, but the average frequency is often more interpretable. For example, an average frequency of 2.5 means that, on average, your observations contain a value that appears 2.5 times in the data set.To quantify what is expected, this test requires the assumption that the integer portions of the numbers are not associated with their decimal portions.
</p>


<h3>Value</h3>

<p>An object of class <code>dt.rv</code> containing:
</p>
<table role = "presentation">
<tr><td><code>x</code></td>
<td>
<p>input data.</p>
</td></tr>
<tr><td><code>frequencies</code></td>
<td>
<p>frequencies of observations in <code>x</code>.</p>
</td></tr>
<tr><td><code>samples</code></td>
<td>
<p>vector of simulated samples.</p>
</td></tr>
<tr><td><code>integers</code></td>
<td>
<p>counts for extracted integers.</p>
</td></tr>
<tr><td><code>decimals</code></td>
<td>
<p>counts for extracted decimals.</p>
</td></tr>
<tr><td><code>n</code></td>
<td>
<p>the number of observations in <code>x</code>.</p>
</td></tr>
<tr><td><code>statistic</code></td>
<td>
<p>the value the average frequency or entropy statistic.</p>
</td></tr>
<tr><td><code>p.value</code></td>
<td>
<p>the p-value for the test.</p>
</td></tr>
<tr><td><code>cor.test</code></td>
<td>
<p>correlation test for the integer portions of the number versus the decimals portions of the number.</p>
</td></tr>
<tr><td><code>method</code></td>
<td>
<p>method used.</p>
</td></tr>
<tr><td><code>check</code></td>
<td>
<p>checked digits.</p>
</td></tr>
<tr><td><code>data.name</code></td>
<td>
<p>a character string giving the name(s) of the data.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Koen Derks, <a href="mailto:k.derks@nyenrode.nl">k.derks@nyenrode.nl</a>
</p>


<h3>References</h3>

<p>Simohnsohn, U. (2019, May 25). Number-Bunching: A New Tool for Forensic Data Analysis. Retrieved from <a href="https://datacolada.org/77">https://datacolada.org/77</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+distr.test">distr.test</a></code> <code><a href="#topic+distr.btest">distr.btest</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> 
set.seed(1)
x &lt;- rnorm(50)

# Repeated values analysis shuffling last digit
rv.test(x, check = 'last', method = 'af', B = 2000)

</code></pre>

<hr>
<h2 id='sanitizer'>Factory Workers' use of Hand Sanitizer</h2><span id='topic+sanitizer'></span>

<h3>Description</h3>

<p>Data from a study on factory workers' use of hand sanitizer. Sanitizer use was measured to a 100th of a gram.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(sanitizer)
</code></pre>


<h3>Format</h3>

<p>A data frame with 1600 rows and 1 variable.
</p>


<h3>References</h3>

<p>[Retracted] Li, M., Sun, Y., &amp; Chen, H. (2019). The decoy effect as a nudge: Boosting hand hygiene with a worse option. Psychological Science, 30, 139–149.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(sanitizer)
</code></pre>

<hr>
<h2 id='sinoForest'>Financial Statemens of Sino Forest Corporation's 2010 Report</h2><span id='topic+sinoForest'></span>

<h3>Description</h3>

<p>Financial Statemens numbers of Sino Forest Corporation's 2010 Report.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(sinoForest)
</code></pre>


<h3>Format</h3>

<p>A data frame with 772 rows and 1 variable.
</p>


<h3>References</h3>

<p>Nigrini, M. J. (2012). Benford's Law: Application for Forensic Accounting, Auditing and Fraud Detection. Wiley and Sons: New Jersey.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(sinoForest)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
