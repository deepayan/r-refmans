<!DOCTYPE html><html lang="en"><head><title>Help for package globaltrends</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {globaltrends}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_control_keyword'><p>Add batches of control or object keywords</p></a></li>
<li><a href='#add_locations'><p>Add sets of locations</p></a></li>
<li><a href='#add_synonym'><p>Add synonyms for object keywords</p></a></li>
<li><a href='#batch_keywords'><p>batch_keywords</p></a></li>
<li><a href='#batch_time'><p>batch_time</p></a></li>
<li><a href='#compute_doi'><p>Aggregate keyword-country data and compute DOI</p></a></li>
<li><a href='#compute_score'><p>Compute keyword-country search score</p></a></li>
<li><a href='#countries'><p>countries</p></a></li>
<li><a href='#countries_wdi'><p>countries_wdi</p></a></li>
<li><a href='#data_control'><p>data_control</p></a></li>
<li><a href='#data_doi'><p>data_doi</p></a></li>
<li><a href='#data_object'><p>data_object</p></a></li>
<li><a href='#data_score'><p>data_score</p></a></li>
<li><a href='#disconnect_db'><p>Disconnect from database</p></a></li>
<li><a href='#download_control'><p>Download data for control keywords</p></a></li>
<li><a href='#download_object'><p>Download data for object batch</p></a></li>
<li><a href='#export_control'><p>Export data from database table</p></a></li>
<li><a href='#get_abnorm_hist'><p>Compute abnormal changes in data - historic baseline</p></a></li>
<li><a href='#gt.env'><p>globaltrends package environment</p></a></li>
<li><a href='#initialize_db'><p>Initialize database</p></a></li>
<li><a href='#plot_bar'><p>Create barplot for cross-sectional globaltrends data</p></a></li>
<li><a href='#plot_box'><p>Create boxplot for time series of globaltrends data</p></a></li>
<li><a href='#plot_ts'><p>Plot time series of globaltrends data</p></a></li>
<li><a href='#plot_voi_doi'><p>Line plots of VOI and DOI time series</p></a></li>
<li><a href='#remove_data'><p>Remove data from database tables</p></a></li>
<li><a href='#start_db'><p>Load globaltrends database and tables</p></a></li>
<li><a href='#us_states'><p>us_states</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Download and Measure Global Trends Through Google Search Volumes</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.14</td>
</tr>
<tr>
<td>Description:</td>
<td>Google offers public access to global search volumes from its
    search engine through the Google Trends portal. The package downloads
    these search volumes provided by Google Trends and uses them to
    measure and analyze the distribution of search scores across countries
    or within countries. The package allows researchers and analysts to
    use these search scores to investigate global trends based on patterns
    within these scores. This offers insights such as degree of
    internationalization of firms and organizations or dissemination of
    political, social, or technological trends across the globe or within
    single countries.  An outline of the package's methodological
    foundations and potential applications is available as a working
    paper: <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3969013">https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3969013</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ha-pu/globaltrends/">https://github.com/ha-pu/globaltrends/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ha-pu/globaltrends/issues/">https://github.com/ha-pu/globaltrends/issues/</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>DBI (&ge; 1.1.0), dbplyr (&ge; 1.4.4), dplyr (&ge; 1.0.2), forcats
(&ge; 0.5.0), forecast (&ge; 8.12), ggplot2 (&ge; 3.3.2), gtrendsR
(&ge; 1.5.1), lubridate (&ge; 1.7.9), purrr (&ge; 0.3.4), rlang (&ge;
0.4.7), RSQLite (&ge; 2.2.0), stats (&ge; 3.5.0), stringr (&ge;
1.4.0), tibble (&ge; 3.0.3), tidyr (&ge; 1.0.0), utils (&ge; 3.5.0),
zoo (&ge; 1.8.8)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr (&ge; 1.29), rmarkdown (&ge; 2.3), testthat (&ge; 2.3.2)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-03-06 18:27:21 UTC; c4361369</td>
</tr>
<tr>
<td>Author:</td>
<td>Harald Puhr [aut, cre],
  Jakob Muellner [ccp]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Harald Puhr &lt;harald.puhr@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-03-06 19:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_control_keyword'>Add batches of control or object keywords</h2><span id='topic+add_control_keyword'></span><span id='topic+add_object_keyword'></span>

<h3>Description</h3>

<p>The function adds one or more batches of keywords with a time period for
downloads to the database. The batches serve as input for all download and
computation functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_control_keyword(keyword, time = "2010-01-01 2020-12-31")

add_object_keyword(keyword, time = "2010-01-01 2020-12-31")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_control_keyword_+3A_keyword">keyword</code></td>
<td>
<p>Keywords that should be added as batch. Vector of type
<code>character</code> or a <code>list</code> of <code>character</code> vectors. The function also allows the
usage of codes for search topics instead of search terms.</p>
</td></tr>
<tr><td><code id="add_control_keyword_+3A_time">time</code></td>
<td>
<p>Time frame for which the batch data should be downloaded. Object
of type <code>character</code> that takes the from &quot;YYYY-MM-DD YYYY-MM-DD&quot;.
Defaults to <em>&quot;2010-01-01 2020-12-31&quot;</em>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Since Google Trends allows a maximum of five keywords for each query, batches
of control keywords can consist of up to five keywords. Since one control
keyword is added to batches of object keywords for mapping, object batch
length is limited to four keywords. When a <code>character</code> vector contains
more than four (five) keywords, the vector is split into four-keyword
(five-keyword) batches. A <code>list</code> must contain <code>character</code> vectors
of length four (five) or less. Each batch of keywords is combined with a time
period for which data will be downloaded. To change the time period for an
existing batch, all downloads and computations must be rerun.
</p>


<h3>Value</h3>

<p>Message that the batch has been created successfully. Batch data is
written to tables <em>batch_keywords</em> and <em>batch_time</em>.
Numeric vector containing the newly added batch numbers are returned.
</p>


<h3>Warning</h3>

<p>If you use search topics for object keywords, make sure to use search topics
for control keywords and vice versa. See Google's
<a href="https://web.archive.org/web/20230117193147/https://support.google.com/trends/answer/4359550/">FAQ</a>
for additional information on search topics.
</p>


<h3>Note</h3>

<p>To avoid trailing spaces <code>stringr::str_squish</code> is automatically
applied to all keywords.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+example_keywords">example_keywords()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+example_time">example_time()</a></code>
</p>
</li>
<li> <p><code><a href="stringr.html#topic+str_trim">stringr::str_squish()</a></code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
add_control_keyword(
  keyword = c("gmail", "maps", "translate", "wikipedia", "youtube"),
  time = "2016-01-01 2019-12-31"
)
add_object_keyword(
  keyword = c("apple", "facebook", "google", "microsoft"),
  time = "2016-01-01 2019-12-31"
)

add_control_keyword(
  keyword = c("gmail", "maps", "news", "translate", "weather", "wikipedia", "youtube"),
  time = "2016-01-01 2019-12-31"
)
add_control_keyword(
  keyword = c("amazon", "apple", "facebook", "google", "microsoft", "netflix", "twitter"),
  time = "2016-01-01 2019-12-31"
)

add_control_keyword(
  keyword = list(
    c("gmail", "maps", "news"),
    c("translate", "weather", "wikipedia", "youtube")
  ),
  time = "2016-01-01 2019-12-31"
)
add_control_keyword(
  keyword = list(
    c("amazon", "apple", "facebook", "google"),
    c("microsoft", "netflix", "twitter")
  ),
  time = "2016-01-01 2019-12-31"
)

# search topics
add_control_keyword(
  keyword = c("%2Fm%2F02q_bk", "%2Fm%2F055t58", "%2Fm%2F025sndk", "%2Fm%2F0d07ph", "%2Fm%2F09jcvs"),
  time = "2016-01-01 2019-12-31"
)
# This adds the following topics: Gmail, Google Maps, Google Translate, Wikipedia, YouTube

## End(Not run)

</code></pre>

<hr>
<h2 id='add_locations'>Add sets of locations</h2><span id='topic+add_locations'></span>

<h3>Description</h3>

<p>The function adds a new set of locations for downloads and computations to
the database. The location set serves as input for all download and
computation functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_locations(locations, type, export = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_locations_+3A_locations">locations</code></td>
<td>
<p>Locations that should be added as set of locations. Vector of
type <code>character</code>.</p>
</td></tr>
<tr><td><code id="add_locations_+3A_type">type</code></td>
<td>
<p>Name of the location set that should be added. Object of type
<code>character</code> of length 1.</p>
</td></tr>
<tr><td><code id="add_locations_+3A_export">export</code></td>
<td>
<p>Indicator whether the new location set should be directly
exported to the package environment <code>gt.env</code>. Object of type <code>logical</code>,
defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Location sets control the locations for which data is downloaded or to which
computations are applied. By adding new location sets, the default sets
<em>countries</em> and <em>us_states</em> can be expanded by additional sets.
Thereby, users can compute DOI within a region (e.g., adding EU countries as
a set) or single countries (e.g., adding regions of France as a set). Download
and computation functions check whether data for a location already exists.
Therefore, data will not be duplicated when location data already exists from
another set.
</p>


<h3>Value</h3>

<p>Message that the location set has been created successfully. Location data is
written to table <em>data_locations</em>.
</p>


<h3>Warning</h3>

<p>Unfortunately, the Google Trends API cannot handle the location
&quot;NA - Namibia&quot;. Therefore, the location will be dropped automatically.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
add_locations(locations = c("AT", "CH", "DE"), type = "DACH")

## End(Not run)

</code></pre>

<hr>
<h2 id='add_synonym'>Add synonyms for object keywords</h2><span id='topic+add_synonym'></span><span id='topic+add_synonym.character'></span><span id='topic+add_synonym.list'></span>

<h3>Description</h3>

<p>The function allows to add synonyms for object keywords. Sometimes, objects
of interest can be searched with different keywords on Google e.g., FC Bayern
for Bayern Munich. Search scores for keywords that are added as synonyms are
aggregated when running <code>compute_score</code>. The function allows to add
synonyms for a single keyword at a time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_synonym(keyword, synonym)

## S3 method for class 'character'
add_synonym(keyword, synonym)

## S3 method for class 'list'
add_synonym(keyword, synonym)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_synonym_+3A_keyword">keyword</code></td>
<td>
<p>Keyword of type <code>character</code> and length 1 for which the
synonyms are added.</p>
</td></tr>
<tr><td><code id="add_synonym_+3A_synonym">synonym</code></td>
<td>
<p>Synonym of type <code>character</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Message that the synonym has been added successfully. Synonym data is
written to table <em>keyword_synonyms</em>.
</p>


<h3>Note</h3>

<p>To avoid trailing spaces <code>stringr::str_squish</code> is automatically
applied to all keywords and synonyms.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+compute_score">compute_score()</a></code>
</p>
</li>
<li> <p><code><a href="stringr.html#topic+str_trim">stringr::str_squish()</a></code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
add_synonym(
  keyword = "fc bayern",
  synonym = "bayern munich"
)

## End(Not run)

</code></pre>

<hr>
<h2 id='batch_keywords'>batch_keywords</h2><span id='topic+batch_keywords'></span><span id='topic+example_keywords'></span>

<h3>Description</h3>

<p>The table <em>batch_keywords</em> contains the keywords for each batch. Each
line contains one <em>keyword</em>, the <em>type</em> of the batch (i.e., control
or object) and the id of the <em>batch</em> to which the keyword is assigned.
Keywords can be added with the function <code>add_keywords</code>. The function
<code>start_db</code> exports the table <em>batch_keywords</em> as objects
<code>keywords_control</code> and <code>keywords_object</code> to the package environment
<code>gt.env</code>.
</p>
<p>Example data for the table <em>batch_keywords</em> is available as R object
<code>example_keywords</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>example_keywords
</code></pre>


<h3>Format</h3>

<p>A tibble with 19 rows and 3 variables:
</p>

<dl>
<dt>type</dt><dd><p>Column of type <code>character</code> showing the type of each batch,
takes &quot;control&quot; for control batches and &quot;object&quot; for object batches.</p>
</dd>
<dt>batch</dt><dd><p>Column of type <code>integer</code> showing the number of each
batch.</p>
</dd>
<dt>keyword</dt><dd><p>Column of type <code>character</code> showing the keywords
included in each batch.</p>
</dd>
</dl>



<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+add_control_keyword">add_control_keyword()</a></code>
</p>
</li></ul>


<hr>
<h2 id='batch_time'>batch_time</h2><span id='topic+batch_time'></span><span id='topic+example_time'></span>

<h3>Description</h3>

<p>The table <em>batch_time</em> contains the time period for which data is
downloaded for each batch. Each line contains one <em>time</em> period, the
<em>type</em> of the batch (i.e., control or object) and the id of the
<em>batch</em> to which the time period is assigned. Time frames take the form
<code>"YYYY-MM-DD YYYY-MM-DD"</code>. Time periods are added automatically through
the function <code>add_keywords</code>. The function <code>start_db</code> exports the
table <em>batch_time</em> as objects <code>time_control</code> and <code>time_object</code>
to <code>.GlobalEnv</code>.
</p>
<p>Example data for the table <em>batch_time</em> is available as R object
<code>example_time</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>example_time
</code></pre>


<h3>Format</h3>

<p>A tibble with 5 rows and 3 variables:
</p>

<dl>
<dt>type</dt><dd><p>Column of type <code>character</code> showing the type of each batch,
takes &quot;control&quot; for control batches and &quot;object&quot; for object batches.</p>
</dd>
<dt>batch</dt><dd><p>Column of type <code>integer</code> showing number of each batch.</p>
</dd>
<dt>time</dt><dd><p>Column of type <code>character</code> showing the time period for
each batch as &quot;YYYY-MM-DD YYYY-MM-DD&quot;.</p>
</dd>
</dl>



<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+add_control_keyword">add_control_keyword()</a></code>
</p>
</li></ul>


<hr>
<h2 id='compute_doi'>Aggregate keyword-country data and compute DOI</h2><span id='topic+compute_doi'></span><span id='topic+compute_doi.numeric'></span><span id='topic+compute_doi.list'></span>

<h3>Description</h3>

<p>The function computes degree of internationalization (DOI) for object
keywords. Degree of internationalization is measured based on the
distribution of country search scores.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_doi(object, control = 1, locations = "countries")

## S3 method for class 'numeric'
compute_doi(object, control = 1, locations = "countries")

## S3 method for class 'list'
compute_doi(object, control = 1, locations = "countries")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_doi_+3A_object">object</code></td>
<td>
<p>Object batch for which the keyword-country data
is aggregated and DOI is computed.  Object of type <code>numeric</code>.</p>
</td></tr>
<tr><td><code id="compute_doi_+3A_control">control</code></td>
<td>
<p>Control batch for which the search score is used. Object
of type <code>numeric</code>.</p>
</td></tr>
<tr><td><code id="compute_doi_+3A_locations">locations</code></td>
<td>
<p>List of locations for which the search score is used.
Object of type <code>character</code>. Defaults to <em>&quot;countries&quot;</em>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function uses an inverted Gini-coefficient as measure for the degree of
internationalization. The more uniform the distribution of search scores
across all countries, the higher the inverted Gini-coefficient and the
greater the degree of internationalization. In addition to the
Gini-coefficient, the package uses inverted Herfindahl index and inverted
Entropy as measures for internationalization.
</p>


<h3>Value</h3>

<p>Message that data was aggregated successfully. Data is written to table
<em>data_doi</em>.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+example_doi">example_doi()</a></code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
compute_doi(
  object = 1,
  control = 1,
  locations = "countries"
)
compute_doi(
  object = as.list(1:5),
  control = 1,
  locations = "countries"
)

## End(Not run)

</code></pre>

<hr>
<h2 id='compute_score'>Compute keyword-country search score</h2><span id='topic+compute_score'></span><span id='topic+compute_score.numeric'></span><span id='topic+compute_score.list'></span><span id='topic+compute_voi'></span>

<h3>Description</h3>

<p>The function computes search scores for object keywords. Search volumes for
control and object batches are mapped to the same base. Next, search volumes
for object batches are divided by the sum of search volumes for the
respective control batch. <code>compute_voi</code> computes volume of
internationalization (VOI) as global search scores.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_score(object, control = 1, locations = gt.env$countries)

## S3 method for class 'numeric'
compute_score(object, control = 1, locations = gt.env$countries)

## S3 method for class 'list'
compute_score(object, control = 1, locations = gt.env$countries)

compute_voi(object, control = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_score_+3A_object">object</code></td>
<td>
<p>Object batch for which the data is downloaded. Object
of type <code>numeric</code> or object of type <code>list</code> containing single
objects of type <code>numeric</code>.</p>
</td></tr>
<tr><td><code id="compute_score_+3A_control">control</code></td>
<td>
<p>Control batch for which the data is downloaded. Object
of type <code>numeric</code>. Defaults to 1.</p>
</td></tr>
<tr><td><code id="compute_score_+3A_locations">locations</code></td>
<td>
<p>List of countries or regions for which the data is
downloaded. Refers to lists generated in <code>start_db</code>. Defaults to
<code>countries</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The search score computation proceeds in four steps. First, the function
aggregates all search volumes to monthly data. Then, it applies some optional
time series adjustments: seasonally adjusted <code><a href="forecast.html#topic+seasadj">forecast::seasadj</a></code> and
trend only <code><a href="stats.html#topic+stl">stats::stl</a></code>. Next, it follows the procedure outlined by
Castelnuovo and Tran (2017, pp. A1-A2) to map control and object data. After
the mapping, object search volumes are divided by the sum of control search
volumes in the respective control batch. We use the sum of search volumes for
a set of control keywords, rather than the search volumes for a single
control keyword, to smooth-out variation in the underlying control data.
</p>
<p><em>Castelnuovo, E. &amp; Tran, T. D. 2017. Google It Up! A Google Trends-based
Uncertainty index for the United States and Australia. Economics Letters,
161: 149-153.</em>
</p>


<h3>Value</h3>

<p>Message that data has been computed successfully. Data is written to
table <em>data_score</em>.
</p>


<h3>Note</h3>

<p>When synonyms were specified through <code>add_synonym</code>, search
scores for synonyms are added to the main keyword.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+example_score">example_score()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+add_synonym">add_synonym()</a></code>
</p>
</li>
<li> <p><code><a href="stats.html#topic+stl">stats::stl()</a></code>
</p>
</li>
<li> <p><code><a href="forecast.html#topic+seasadj">forecast::seasadj()</a></code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
compute_score(
  object = 1,
  control = 1,
  locations = countries
)
compute_voi(
  object = 1,
  control = 1
)
compute_score(
  object = as.list(1:5),
  control = 1,
  locations = countries
)

## End(Not run)

</code></pre>

<hr>
<h2 id='countries'>countries</h2><span id='topic+countries'></span>

<h3>Description</h3>

<p>A character vector that includes ISO2 codes for all countries with a share in
global GDP &gt;= 0.1\
World Development Indicators database. The data includes:
</p>

<ul>
<li><p> AE
</p>
</li>
<li><p> AO
</p>
</li>
<li><p> AR
</p>
</li>
<li><p> AT
</p>
</li>
<li><p> AU
</p>
</li>
<li><p> BD
</p>
</li>
<li><p> BE
</p>
</li>
<li><p> BR
</p>
</li>
<li><p> CA
</p>
</li>
<li><p> CH
</p>
</li>
<li><p> CL
</p>
</li>
<li><p> CN
</p>
</li>
<li><p> CO
</p>
</li>
<li><p> CU
</p>
</li>
<li><p> CZ
</p>
</li>
<li><p> DE
</p>
</li>
<li><p> DK
</p>
</li>
<li><p> DO
</p>
</li>
<li><p> DZ
</p>
</li>
<li><p> EC
</p>
</li>
<li><p> EG
</p>
</li>
<li><p> ES
</p>
</li>
<li><p> ET
</p>
</li>
<li><p> FI
</p>
</li>
<li><p> FR
</p>
</li>
<li><p> GB
</p>
</li>
<li><p> GR
</p>
</li>
<li><p> HK
</p>
</li>
<li><p> HU
</p>
</li>
<li><p> ID
</p>
</li>
<li><p> IE
</p>
</li>
<li><p> IL
</p>
</li>
<li><p> IN
</p>
</li>
<li><p> IQ
</p>
</li>
<li><p> IR
</p>
</li>
<li><p> IT
</p>
</li>
<li><p> JP
</p>
</li>
<li><p> KR
</p>
</li>
<li><p> KW
</p>
</li>
<li><p> KZ
</p>
</li>
<li><p> LK
</p>
</li>
<li><p> MA
</p>
</li>
<li><p> MX
</p>
</li>
<li><p> MY
</p>
</li>
<li><p> NG
</p>
</li>
<li><p> NL
</p>
</li>
<li><p> NO
</p>
</li>
<li><p> NZ
</p>
</li>
<li><p> OM
</p>
</li>
<li><p> PE
</p>
</li>
<li><p> PH
</p>
</li>
<li><p> PK
</p>
</li>
<li><p> PL
</p>
</li>
<li><p> PR
</p>
</li>
<li><p> PT
</p>
</li>
<li><p> QA
</p>
</li>
<li><p> RO
</p>
</li>
<li><p> RU
</p>
</li>
<li><p> SA
</p>
</li>
<li><p> SD
</p>
</li>
<li><p> SE
</p>
</li>
<li><p> SG
</p>
</li>
<li><p> SK
</p>
</li>
<li><p> TH
</p>
</li>
<li><p> TR
</p>
</li>
<li><p> TW
</p>
</li>
<li><p> UA
</p>
</li>
<li><p> US
</p>
</li>
<li><p> UZ
</p>
</li>
<li><p> VN
</p>
</li>
<li><p> ZA
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>countries
</code></pre>


<h3>Format</h3>

<p>An object of class <code>character</code> of length 71.
</p>

<hr>
<h2 id='countries_wdi'>countries_wdi</h2><span id='topic+countries_wdi'></span>

<h3>Description</h3>

<p>A data.frame that includes ISO2 codes and country names for all countries and
locations in the World Bank's World Development Indicators database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>countries_wdi
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 299 rows and 2 columns.
</p>

<hr>
<h2 id='data_control'>data_control</h2><span id='topic+data_control'></span><span id='topic+example_control'></span>

<h3>Description</h3>

<p>The table <em>data_control</em> contains the downloaded data for each control
batch. Each line contains the search <em>hits</em> for each <em>keyword</em> in a
control <em>batch</em> for a given <em>location</em> and <em>date</em>. Global data
gets the value <em>world</em> as location. Data is downloaded and automatically
written to the table through the function <code>download_control</code>. The
function <code>start_db</code> exports the table <em>data_control</em> as database
connection <code>tbl_control</code> to the package environment <code>gt.env</code>. Users
can access the database table through <code>dplyr::tbl</code>.
The sample data included in <code>data_control</code> was simulated based on actual
Google Trends data.
</p>
<p>Example data for the table <em>data_control</em> is available as R object
<code>example_control</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>example_control
</code></pre>


<h3>Format</h3>

<p>A tibble with 2,400 rows and 5 variables:
</p>

<dl>
<dt>location</dt><dd><p>Column of type <code>character</code> showing the ISO2 code of
the country or region for which the data was downloaded.</p>
</dd>
<dt>keyword</dt><dd><p>Column of type <code>character</code> showing the keyword for
which the data was downloaded.</p>
</dd>
<dt>date</dt><dd><p>Column of type <code>integer</code> showing the date for which the
data was downloaded. Can be transformed into date format with
<code>lubridate::as_date</code>.<code style="white-space: pre;">&#8288;\item{hits}{Column of type&#8288;</code>double<code style="white-space: pre;">&#8288;showing search volumes for the respective location-keyword-date combination.} \item{batch}{Column of type&#8288;</code>integer' showing the number of each
batch.</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://trends.google.com/trends/">https://trends.google.com/trends/</a>
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+download_control">download_control()</a></code>
</p>
</li>
<li> <p><code><a href="dplyr.html#topic+tbl">dplyr::tbl()</a></code>
</p>
</li></ul>


<hr>
<h2 id='data_doi'>data_doi</h2><span id='topic+data_doi'></span><span id='topic+example_doi'></span>

<h3>Description</h3>

<p>The table <em>data_doi</em> contains the degree of internationalization (DOI)
for each object batch. Each line contains the DOI computed as inverted
<em>gini</em> coefficient, as inverted <em>hhi</em>, or inverted <em>entropy</em>
for each <em>keyword</em> in an object <em>batch_o</em> for a given <em>date</em>
and <em>type</em> of search score. The column <em>batch_c</em> indicates the
control batch that has been used as baseline for mapping. Column
<em>locations</em> indicates which set of locations was used to compute the
distribution of search scores. DOI is computed and automatically written to
the table with the function <code>compute_doi</code>. The function <code>start_db</code>
exports the table <em>data_doi</em> as database connection <code>tbl_doi</code> to
the package environment <code>gt.env</code>. Users can access the database table
through <code>dplyr::tbl</code>.
The sample data included in <code>data_doi</code> was simulated based on actual
Google Trends data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>example_doi
</code></pre>


<h3>Format</h3>

<p>A tibble with 4,320 rows and 9 variables:
</p>

<dl>
<dt>keyword</dt><dd><p>Column of type <code>character</code> showing the keyword for
which the data was computed.</p>
</dd>
<dt>date</dt><dd><p>Column of type <code>integer</code> showing the date for which the
data was computed Can be transformed into date format with
<code>lubridate::as_date</code>.</p>
</dd>
<dt>type</dt><dd><p>Column of type <code>character</code> indicating the type of time
series-column from <code>data_score</code> that is used for DOI computation,
takes either &quot;score_obs&quot;, &quot;score_sad&quot;, or &quot;score_trd&quot;.</p>
</dd>
<dt>gini</dt><dd><p>Column of type <code>double</code> showing the DOI computed as
inverted Gini coefficient of the search score distribution from
<code>data_score</code>.</p>
</dd>
<dt>hhi</dt><dd><p>Column of type <code>double</code> showing the DOI computed as
inverted Herfindahl-Hirschman index of the search score distribution from
<code>data_score</code>.</p>
</dd>
<dt>entropy</dt><dd><p>Column of type <code>double</code> showing the DOI computed as
inverted Entropy measure for the search score distribution from
<code>data_score</code>.</p>
</dd>
<dt>batch_c</dt><dd><p>Column of type <code>integer</code> showing the number of each
control batch.</p>
</dd>
<dt>batch_o</dt><dd><p>Column of type <code>integer</code> showing the number of each
object batch.</p>
</dd>
<dt>locations</dt><dd><p>Column of type <code>character</code> showing the list of
locations for which the search score distribution is used.</p>
</dd>
</dl>



<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+compute_doi">compute_doi()</a></code>
</p>
</li>
<li> <p><code><a href="dplyr.html#topic+tbl">dplyr::tbl()</a></code>
</p>
</li></ul>


<hr>
<h2 id='data_object'>data_object</h2><span id='topic+data_object'></span><span id='topic+example_object'></span>

<h3>Description</h3>

<p>The table <em>data_object</em> contains the downloaded data for each object
batch. Each line contains the search <em>hits</em> for each <em>keyword</em> in
an object <em>batch_o</em> for a given <em>location</em> and <em>date</em>. The
column <em>batch_c</em> indicates the control batch to which the data will be
mapped. Global data takes the value <em>world</em> as location. Data is
downloaded and automatically written to the table through the function
<code>download_object</code>. The function <code>start_db</code> exports the table
<em>data_object</em> as database connection <code>tbl_object</code> to the package
environment <code>gt.env</code>. Users can access the database table through
<code>dplyr::tbl</code>.
The sample data included in <code>data_object</code> was simulated based on actual
Google Trends data.
</p>
<p>Example data for the table <em>data_object</em> is available as R object
<code>example_object</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>example_object
</code></pre>


<h3>Format</h3>

<p>A tibble with 8,640 rows and 6 variables:
</p>

<dl>
<dt>location</dt><dd><p>Column of type <code>character</code> showing the ISO2 code of
the country or region for which the data was downloaded.</p>
</dd>
<dt>keyword</dt><dd><p>Column of type <code>character</code> showing the keyword for
which the data was downloaded.</p>
</dd>
<dt>date</dt><dd><p>Column of type <code>integer</code> showing the date for which the
data was downloaded. Can be transformed into date format with
<code>lubridate::as_date</code>.</p>
</dd>
<dt>hits</dt><dd><p>Column of type <code>double</code> showing search volumes for the
respective location-keyword-date combination.</p>
</dd>
<dt>batch_c</dt><dd><p>Column of type <code>integer</code> showing the number of each
control batch.</p>
</dd>
<dt>batch_o</dt><dd><p>Column of type <code>integer</code> showing the number of each
object batch.</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://trends.google.com/trends/">https://trends.google.com/trends/</a>
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+download_object">download_object()</a></code>
</p>
</li>
<li> <p><code><a href="dplyr.html#topic+tbl">dplyr::tbl()</a></code>
</p>
</li></ul>


<hr>
<h2 id='data_score'>data_score</h2><span id='topic+data_score'></span><span id='topic+example_score'></span>

<h3>Description</h3>

<p>The table <em>data_score</em> contains the search scores for each object batch.
Each line contains the observed search score (<em>score_obs</em>), the
seasonally adjusted search score (<em>score_sad</em>), and the trend only
search score (<em>score_trd</em>) for each <em>keyword</em> in an object
<em>batch_o</em> for a given <em>location</em> and <em>date</em>. The column
<em>batch_c</em> indicates the control batch that has been used as baseline
for mapping. Global data takes the value <em>world</em> as location. Search
scores are computed and automatically written to the table with the function
<code>compute_score</code>. The function <code>start_db</code> exports the table
<em>data_score</em> as database connection <code>tbl_score</code> to
the package environment <code>gt.env</code>. Users can access the database
table through <code>dplyr::tbl</code>.
The sample data included in <code>data_score</code> was simulated based on actual
Google Trends data.
</p>
<p>Example data for the table <em>data_score</em> is available as R object
<code>example_score</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>example_score
</code></pre>


<h3>Format</h3>

<p>A tibble with 6,000 rows and 8 variables:
</p>

<dl>
<dt>location</dt><dd><p>Column of type <code>character</code> showing the ISO2 code of
the country or region for which the data was computed.</p>
</dd>
<dt>keyword</dt><dd><p>Column of type <code>character</code> showing the keyword for
which the data was downloaded.</p>
</dd>
<dt>date</dt><dd><p>Column of type <code>integer</code> showing the date for which the
data was computed Can be transformed into date format with
<code>lubridate::as_date</code>.</p>
</dd>
<dt>score_obs</dt><dd><p>Column of type <code>double</code> showing search score for the
respective location-keyword-date combination - no time series adjustment.</p>
</dd>
<dt>score_sad</dt><dd><p>Column of type <code>double</code> showing the search score for
the respective location-keyword-date combination - seasonally adjusted time
series.</p>
</dd>
<dt>score_trd</dt><dd><p>Column of type <code>double</code> showing the search score for
the respective location-keyword-date combination - trend-only time series.</p>
</dd>
<dt>batch_c</dt><dd><p>Column of type <code>integer</code> showing the number of each
control batch.</p>
</dd>
<dt>batch_o</dt><dd><p>Column of type <code>integer</code> showing the number of each
object batch.</p>
</dd>
<dt>synonym</dt><dd><p>Column of type <code>integer</code> showing whether the line will
be aggregated as synonym.</p>
</dd>
</dl>



<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+compute_score">compute_score()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+compute_voi">compute_voi()</a></code>
</p>
</li>
<li> <p><code><a href="dplyr.html#topic+tbl">dplyr::tbl()</a></code>
</p>
</li></ul>


<hr>
<h2 id='disconnect_db'>Disconnect from database</h2><span id='topic+disconnect_db'></span>

<h3>Description</h3>

<p>The function closes the connection to the database file
<em>db/globaltrends_db.sqlite</em> in the working directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>disconnect_db()
</code></pre>


<h3>Value</h3>

<p>Message that disconnection was successful.
</p>


<h3>Warning</h3>

<p>SQLite databases only allow one writer at any instant in time. To run
parallel downloads use one database for each download client and merge them
once all downloads are complete.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+initialize_db">initialize_db()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+start_db">start_db()</a></code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
disconnect_db()

## End(Not run)
</code></pre>

<hr>
<h2 id='download_control'>Download data for control keywords</h2><span id='topic+download_control'></span><span id='topic+download_control.numeric'></span><span id='topic+download_control.list'></span><span id='topic+download_control_global'></span>

<h3>Description</h3>

<p>The function downloads search volumes from Google Trends for a <em>control</em>
batch in a set of <em>locations</em>. Data is automatically written to table
<em>data_control</em>. For <code>download_control_global</code> the input
<em>location</em> is automatically set to <em>world</em>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_control(control, locations = gt.env$countries, ...)

## S3 method for class 'numeric'
download_control(control, locations = gt.env$countries, ...)

## S3 method for class 'list'
download_control(control, locations = gt.env$countries, ...)

download_control_global(control, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_control_+3A_control">control</code></td>
<td>
<p>Control batch for which the data is downloaded. Object
of type <code>numeric</code> or object of type <code>list</code> containing single
objects of type <code>numeric</code>.</p>
</td></tr>
<tr><td><code id="download_control_+3A_locations">locations</code></td>
<td>
<p>List of countries or regions for which the data is
downloaded. Refers to lists generated in <code>start_db</code>. Defaults to
<code>gt.env$countries</code>.</p>
</td></tr>
<tr><td><code id="download_control_+3A_...">...</code></td>
<td>
<p>Arguments that are passed on to the <code>gtrendsR::gtrends</code> function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Downloads through the Google Trends API are made through
<code>gtrendsR::gtrends</code>. Each control batch can consist of up to five
keywords and is predefined in tables <em>batch_keywords</em> and
<em>batch_time</em> through <code>add_keywords</code>. The download for a single
keyword batch for a single location takes about 30 seconds. This includes a
randomized waiting period of 5-10 seconds between downloads. Depending on
the frequency of downloads, Google Trends might block users for some time. In
this case, <code>download_control</code> waits 60 minutes before it retries the
download.
</p>


<h3>Value</h3>

<p>Message that data has been downloaded successfully. Data is written
to table <em>data_control</em>.
</p>


<h3>Warning</h3>

<p>We advise against the usage of <em>category codes</em> in
downloads. If you use <em>categories</em> to narrow the context of keyword usage,
these categories are applied to <strong>ALL</strong> keywords in the batch. This applies
to <em>control</em> keywords as well as <em>object</em> keywords and can result in
unintended behavior.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+example_control">example_control()</a></code>
</p>
</li>
<li> <p><code><a href="gtrendsR.html#topic+gtrends">gtrendsR::gtrends()</a></code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
download_control(
  control = 1,
  locations = countries
)
download_control(
  control = as.list(1:5),
  locations = countries
)

## End(Not run)

</code></pre>

<hr>
<h2 id='download_object'>Download data for object batch</h2><span id='topic+download_object'></span><span id='topic+download_object.numeric'></span><span id='topic+download_object.list'></span><span id='topic+download_object_global'></span>

<h3>Description</h3>

<p>The function downloads search volumes from Google Trends for an object batch
(<em>batch_o</em>) and one keyword from a control batch (<em>batch_c</em>) in a
set of <em>locations</em>. Data is automatically written to table
<em>data_object</em>. For <code>download_object_global</code> the input
<em>location</em> is automatically set to <em>world</em>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_object(object, control = 1, locations = gt.env$countries, ...)

## S3 method for class 'numeric'
download_object(object, control = 1, locations = gt.env$countries, ...)

## S3 method for class 'list'
download_object(object, control = 1, locations = gt.env$countries, ...)

download_object_global(object, control = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_object_+3A_object">object</code></td>
<td>
<p>Object batch for which the data is downloaded. Object
of type <code>numeric</code> or object of type <code>list</code> containing single
object of type <code>numeric</code>.</p>
</td></tr>
<tr><td><code id="download_object_+3A_control">control</code></td>
<td>
<p>Control batch that is used for mapping. Object of type
<code>numeric</code>. Defaults to <code>1</code>.</p>
</td></tr>
<tr><td><code id="download_object_+3A_locations">locations</code></td>
<td>
<p>List of countries or regions for which the data is
downloaded. Refers to lists generated in <code>start_db</code>. Defaults to
<code>countries</code>.</p>
</td></tr>
<tr><td><code id="download_object_+3A_...">...</code></td>
<td>
<p>Arguments that are passed on to the <code>gtrendsR::gtrends</code> function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Downloads through the Google Trends API are made through
<code>gtrendsR::gtrends</code>. Each object batch can consist of up to four
keywords and is predefined in tables <em>batch_keywords</em> and
<em>batch_time</em> through <code>add_keywords</code>. In addition, one control
keyword is added to each object batch. The control keyword then allows a
mapping between search volumes for control keywords stored in
<em>data_control</em> and search volumes for object keywords. The download for
a single keyword batch for a single location takes about 30 seconds. This
includes a randomized waiting period of 5-10 seconds between downloads.
Depending on the frequency of downloads, Google Trends might block users
for some time. In this case, <code>download_object</code> waits 60 minutes
before it retries the download.
</p>


<h3>Value</h3>

<p>Message that data was downloaded successfully. Data is written
to table <em>data_object</em>.
</p>


<h3>Warning</h3>

<p>We advise against the usage of <em>category codes</em> in
downloads. If you use <em>categories</em> to narrow the context of keyword usage,
these categories are applied to <strong>ALL</strong> keywords in the batch. This applies
to <em>control</em> keywords as well as <em>object</em> keywords and can result in
unintended behavior.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+example_object">example_object()</a></code>
</p>
</li>
<li> <p><code><a href="gtrendsR.html#topic+gtrends">gtrendsR::gtrends()</a></code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
download_object(
  object = 1,
  locations = countries
)
download_object(
  object = as.list(1:5),
  locations = countries
)

## End(Not run)

</code></pre>

<hr>
<h2 id='export_control'>Export data from database table</h2><span id='topic+export_control'></span><span id='topic+export_control_global'></span><span id='topic+export_object'></span><span id='topic+export_object_global'></span><span id='topic+export_score'></span><span id='topic+export_voi'></span><span id='topic+export_doi'></span>

<h3>Description</h3>

<p>The function allows to export data from database tables. In combination with
various <em>write</em> functions in R, the functions allow exports from the
database to local files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>export_control(control = NULL, location = NULL)

export_control_global(control = NULL)

export_object(keyword = NULL, object = NULL, control = NULL, location = NULL)

export_object_global(keyword = NULL, object = NULL, control = NULL)

export_score(keyword = NULL, object = NULL, control = NULL, location = NULL)

export_voi(keyword = NULL, object = NULL, control = NULL)

export_doi(
  keyword = NULL,
  object = NULL,
  control = NULL,
  locations = NULL,
  type = c("obs", "sad", "trd")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="export_control_+3A_control">control</code></td>
<td>
<p>Control batch number for which data should be exported. Only
for <code>export_control</code> and <code>export_control_global</code>, input is also possible as
list.</p>
</td></tr>
<tr><td><code id="export_control_+3A_location">location</code></td>
<td>
<p>List of locations for which the data is exported. Refers to
lists generated in <code>start_db</code> or <code>character</code> objects in these lists. Only for
<code>export_control</code>, <code>export_object</code>, or <code>export_score</code>.</p>
</td></tr>
<tr><td><code id="export_control_+3A_keyword">keyword</code></td>
<td>
<p>Object keywords for which data should be exported. Object or
list of objects of type <code>character</code>.</p>
</td></tr>
<tr><td><code id="export_control_+3A_object">object</code></td>
<td>
<p>Object batch number for which data should be exported.</p>
</td></tr>
<tr><td><code id="export_control_+3A_locations">locations</code></td>
<td>
<p>List of locations for which the data is exported. Refers to
names of lists generated in <code>start_db</code> as an object of type <code>character</code>. Only
for <code>export_doi</code>.</p>
</td></tr>
<tr><td><code id="export_control_+3A_type">type</code></td>
<td>
<p>Type of time series for which data should be exported. Element
of type <code>character</code>. Relevant only for <code>export_global</code> and
<code>export_doi</code>. Takes one of the following values: <em>obs</em> - observed
search scores, <em>sad</em> - seasonally adjusted search scores, <em>trd</em> -
trend only search scores.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Exports can be filtered by <em>keyword</em>, <em>object</em>, <em>control</em>, <em>location</em>,
<em>locations</em>, or <em>type</em>. Not all filters are applicable for all
functions. When filter <em>keyword</em> and <em>object</em> are used together,
<em>keyword</em> overrules <em>object</em>. When supplying <code>NULL</code> as input, no filter is
applied to the variable.
</p>


<h3>Value</h3>

<p>The functions export and filter the respective database tables.
</p>

<ul>
<li> <p><code>export_control</code> and <code>export_control_global</code> export data from table
*data_control<code style="white-space: pre;">&#8288;with columns location, keyword, date, hits, control. Object of class&#8288;</code>&quot;data.frame&quot;<code style="white-space: pre;">&#8288;. Methods are applied based on input *control*. \item &#8288;</code>export_object<code>and</code>export_object_global<code style="white-space: pre;">&#8288; export data from table *data_object&#8288;</code> with columns location, keyword, date, hits, object. Object of
class <code>"data.frame"</code>. Methods are applied based on input <em>keyword</em>.
</p>
</li>
<li> <p><code>export_score</code> exports data from table *data_score<code style="white-space: pre;">&#8288;with columns location, keyword, date, score_obs, score_sad, score_trd, control, object. Object of class&#8288;</code>c(&quot;exp_score&quot;, &quot;data.frame&quot;)<code style="white-space: pre;">&#8288;. Methods are applied based on input *keyword*. \item &#8288;</code>export_voi<code style="white-space: pre;">&#8288; exports data from table *data_score&#8288;</code> with
columns keyword, date, hits, control, filters for
<code>location == "world"</code>. Object of class <code>c("exp_voi", "data.frame")</code>.
Methods are applied based on input <em>keyword</em>.
</p>
</li>
<li> <p><code>export_doi</code> exports data from table *data_doi<code style="white-space: pre;">&#8288;with columns keyword, date, type, gini, hhi, entropy, control, object, locations. Object of class&#8288;</code>c(&quot;exp_doi&quot;, &quot;data.frame&quot;)'. Methods are applied based on input
<em>keyword</em>.
</p>
</li></ul>



<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+example_control">example_control()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+example_object">example_object()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+example_score">example_score()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+example_doi">example_doi()</a></code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
export_control(control = 2)

export_object(
  keyword = "manchester united",
  locations = countries
)

export_object(
  keyword = c("manchester united", "real madrid")
)

export_object(
  keyword = list("manchester united", "real madrid")
)

export_score(
  object = 3,
  control = 1,
  location = us_states
) %&gt;%
  readr::write_csv("data_score.csv")

export_doi(
  keyword = "manchester united",
  control = 2,
  type = "sad",
  locations = "us_states"
) %&gt;%
  writexl::write_xlsx("data_doi.xlsx")

## End(Not run)

</code></pre>

<hr>
<h2 id='get_abnorm_hist'>Compute abnormal changes in data - historic baseline</h2><span id='topic+get_abnorm_hist'></span><span id='topic+get_abnorm_hist.exp_score'></span><span id='topic+get_abnorm_hist.exp_voi'></span><span id='topic+get_abnorm_hist.exp_doi'></span>

<h3>Description</h3>

<p>The function allows to compute changes in search scores, voi, and doi and
shows percentile of changes to identify abnormal changes. In combination with
various <em>write</em> functions in R, the functions allow exports from the
database to local files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_abnorm_hist(data, ...)

## S3 method for class 'exp_score'
get_abnorm_hist(
  data,
  train_win = 12,
  train_break = 0,
  type = c("obs", "sad", "trd"),
  ...
)

## S3 method for class 'exp_voi'
get_abnorm_hist(
  data,
  train_win = 12,
  train_break = 0,
  type = c("obs", "sad", "trd"),
  ...
)

## S3 method for class 'exp_doi'
get_abnorm_hist(
  data,
  train_win = 12,
  train_break = 0,
  measure = c("gini", "hhi", "entropy"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_abnorm_hist_+3A_data">data</code></td>
<td>
<p>Object of class <code>exp_score</code>, <code>exp_voi</code> or
<code>exp_doi</code> generated through <code>export_...</code> functions.</p>
</td></tr>
<tr><td><code id="get_abnorm_hist_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
<tr><td><code id="get_abnorm_hist_+3A_train_win">train_win</code></td>
<td>
<p>Object of type <code>numeric</code>. Length of rolling average
training window in months. Defaults to 12.</p>
</td></tr>
<tr><td><code id="get_abnorm_hist_+3A_train_break">train_break</code></td>
<td>
<p>Object of type <code>numeric</code>. Length of break between
rolling average training window and date in months. Defaults to 1.</p>
</td></tr>
<tr><td><code id="get_abnorm_hist_+3A_type">type</code></td>
<td>
<p>Object of type <code>character</code> indicating the type of time
series-column from data_score, takes either <em>obs</em>, <em>sad</em>, or
<em>trd</em>. Defaults to <em>&quot;obs&quot;</em>.</p>
</td></tr>
<tr><td><code id="get_abnorm_hist_+3A_measure">measure</code></td>
<td>
<p>Object of type <code>character</code> indicating the measure used
for DOI computation for which abnormal changes should be analyzed. Takes
either <em>gini</em>, <em>hhi</em>, or <em>entropy</em>. Defaults to <em>&quot;gini&quot;</em>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function computes abnormal changes in search scores, VOI, or DOI for each
date. We define &quot;abnormal&quot; in terms of deviation from a historic baseline
value. To compute the historic baseline value, the function computes a moving
average. Users can specify the window for moving average training
<code>train_win</code> and a break between training and the given date
<code>train_break</code>. Abnormal changes are the difference between the moving
average and the respective search score, VOI, or DOI. To highlight abnormal
changes, the function computes a historic percentile rank for each abnormal
change within the distribution of abnormal changes. Low percentile ranks
signify abnormally high negative changes. High percentile ranks signify
abnormally high positive changes.
The function uses the output from <code>export_...</code> functions as input. As
<code>get_abnorm_hist</code> offers no additional filters, users are advised to use
filters in the <code>export_...</code> functions or to pre-process data before
using <code>get_abnorm_hist</code>.
</p>


<h3>Value</h3>

<p>The functions export and filter the respective database tables and return
objects of class <code style="white-space: pre;">&#8288;"tbl_df", "tbl", "data.frame"&#8288;</code>.
</p>

<ul>
<li><p> Input class <code>exp_score</code> computes abnormal changes in search
scores with columns keyword, location, date, control, object, score,
score_abnorm, quantile. Object of class
<code>c("abnorm_score", "data.frame")</code>.
</p>
</li>
<li><p> Input class <code>exp_voi</code> computes abnormal changes in VOI with
columns keyword, date, control, object, voi, voi_abnorm, quantile. Object
of class <code>c("abnorm_voi", "data.frame")</code>.
</p>
</li>
<li><p> Input class <code>exp_doi</code> computes abnormal changes in DOI with
columns keyword, locations, date, control, object, doi, doi_abnorm,
quantile. Object of class <code>c("abnorm_doi", "data.frame")</code>.
</p>
</li></ul>



<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+export_score">export_score()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+export_voi">export_voi()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+export_doi">export_doi()</a></code>
</p>
</li>
<li> <p><code><a href="dplyr.html#topic+filter">dplyr::filter()</a></code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data &lt;- export_score(keyword = "amazon")
get_abnorm_hist(data, train_win = 12, train_break = 0, type = "obs")

data &lt;- export_voi(keyword = "amazon")
get_abnorm_hist(data, train_win = 12, train_break = 0, type = "obs")

data &lt;- export_score(keyword = "amazon")
get_abnorm_hist(data, train_win = 12, train_break = 0, measure = "gini")

## End(Not run)

</code></pre>

<hr>
<h2 id='gt.env'>globaltrends package environment</h2><span id='topic+gt.env'></span>

<h3>Description</h3>

<p>The environment <code>gt.env</code> contains all package-related data objects, such as
the handle for the SQLite database file or connections to tables. The object
contains:
</p>

<ul>
<li><p> globaltrends_db: Handle for the SQLite database file.
</p>
</li>
<li><p> tbl_locations: Connection to table that contains the lists of locations saved in the database.
</p>
</li>
<li><p> tbl_keywords: Connection to table that contains the lists of keywords saved in the database.
</p>
</li>
<li><p> tbl_time: Connection to table that contains the lists of batch times saved in the database.
</p>
</li>
<li><p> tbl_synonyms: Connection to table that contains the lists of keyword synonyms saved in the database.
</p>
</li>
<li><p> tbl_doi: Connection to table that contains the DOI data saved in the database.
</p>
</li>
<li><p> tbl_control: Connection to table that contains data on search volume for control terms saved in the database.
</p>
</li>
<li><p> tbl_object: Connection to table that contains data on search volume for object terms saved in the database.
</p>
</li>
<li><p> tbl_score: Connection to table that contains data on search scores saved in the database.
</p>
</li>
<li><p> keywords_control: Tibble that contains all keywords per control batch.
</p>
</li>
<li><p> time_control: Tibble that contains all batch times per control batch.
</p>
</li>
<li><p> keywords_object: Tibble that contains all keywords per object batch.
</p>
</li>
<li><p> time_object: Tibble that contains all batch times per object batch.
</p>
</li>
<li><p> keyword_synonyms: Tibble that contains all keyword/synonym combinations.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>gt.env
</code></pre>


<h3>Format</h3>

<p>An object of class <code>environment</code> of length 14.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+example_control">example_control()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+example_object">example_object()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+example_score">example_score()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+example_doi">example_doi()</a></code>
</p>
</li></ul>


<hr>
<h2 id='initialize_db'>Initialize database</h2><span id='topic+initialize_db'></span>

<h3>Description</h3>

<p>The function creates a new database for the <code>globaltrends</code> package and
creates all necessary tables within the database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>initialize_db()
</code></pre>


<h3>Details</h3>

<p>The function creates a new SQLite database for the <code>globaltrends</code>
package. The database is saved as file <em>db/globaltrends_db.sqlite</em> in
the working directory. If the folder <em>db</em> does not exists in the working
directory, the folder is created. If the database already exists in the
working directory, the function exits with an error. Within the database all
tables are created and the default location sets are added to the respective
table:
</p>

<ul>
<li> <p><em>countries</em> - all countries with a share in global GDP &gt;= 0.1\
in 2018.
</p>
</li>
<li> <p><em>us_states</em> - all US federal states and Washington DC.
</p>
</li></ul>

<p>After creating the database, the function disconnects from the database.
</p>


<h3>Value</h3>

<p>Database is created.
</p>


<h3>Warning</h3>

<p>SQLite databases only allow one writer at any instant in time. To run
parallel downloads use one database for each download client and merge them
once all downloads are complete.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+start_db">start_db()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+disconnect_db">disconnect_db()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+countries">countries()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+us_states">us_states()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+example_keywords">example_keywords()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+example_time">example_time()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+example_control">example_control()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+example_object">example_object()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+example_score">example_score()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+example_doi">example_doi()</a></code>
</p>
</li>
<li> <p><a href="https://www.sqlite.org/index.html">https://www.sqlite.org/index.html</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
initialize_db()

## End(Not run)

</code></pre>

<hr>
<h2 id='plot_bar'>Create barplot for cross-sectional globaltrends data</h2><span id='topic+plot_bar'></span><span id='topic+plot_bar.exp_score'></span><span id='topic+plot_bar.abnorm_score'></span>

<h3>Description</h3>

<p>The function creates barplots for cross-sectional search score data. It uses
the output of <code>export_score</code> to prepare a bar plot of search scores for
the top 10 countries. For output from <code>get_abnorm_hist</code> the plot shows
five locations with the highest and lowest abnormal changes each. When the
output includes more than one keyword, only the first keyword is used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_bar(data, ...)

## S3 method for class 'exp_score'
plot_bar(data, type = c("obs", "sad", "trd"), ...)

## S3 method for class 'abnorm_score'
plot_bar(data, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_bar_+3A_data">data</code></td>
<td>
<p>Data exported from <code>export_...</code> or <code>compute_abnorm</code> functions.</p>
</td></tr>
<tr><td><code id="plot_bar_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
<tr><td><code id="plot_bar_+3A_type">type</code></td>
<td>
<p>Object of type <code>character</code> indicating the type of time
series-column from data_score, takes either <em>obs</em>, <em>sad</em>, or <em>trd</em>. Defaults
to <em>&quot;obs&quot;</em>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Barplot of cross-sectional data as <code>ggplot2</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data &lt;- export_score(keyword = "amazon")
plot_bar(data, type = "obs")

data &lt;- export_score(keyword = "amazon")
data &lt;- get_abnorm_hist(data, train_win = 12, train_break = 0, type = "obs")
plot_bar(data)

## End(Not run)

</code></pre>

<hr>
<h2 id='plot_box'>Create boxplot for time series of globaltrends data</h2><span id='topic+plot_box'></span><span id='topic+plot_box.exp_score'></span><span id='topic+plot_box.abnorm_score'></span><span id='topic+plot_box.exp_voi'></span><span id='topic+plot_box.abnorm_voi'></span><span id='topic+plot_box.exp_doi'></span><span id='topic+plot_box.abnorm_doi'></span>

<h3>Description</h3>

<p>The function creates boxplots for time series globaltrends data. It uses
the output of <code>export_...</code> or <code>get_abnorm_hist</code> to prepare boxplots for up to
nine keywords.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_box(data, ...)

## S3 method for class 'exp_score'
plot_box(data, type = c("obs", "sad", "trd"), ...)

## S3 method for class 'abnorm_score'
plot_box(data, ci = 0.95, ...)

## S3 method for class 'exp_voi'
plot_box(data, type = c("obs", "sad", "trd"), ...)

## S3 method for class 'abnorm_voi'
plot_box(data, ci = 0.95, ...)

## S3 method for class 'exp_doi'
plot_box(
  data,
  type = c("obs", "sad", "trd"),
  measure = c("gini", "hhi", "entropy"),
  locations = "countries",
  ...
)

## S3 method for class 'abnorm_doi'
plot_box(
  data,
  type = c("obs", "sad", "trd"),
  locations = "countries",
  ci = 0.95,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_box_+3A_data">data</code></td>
<td>
<p>Data exported from <code>export_...</code> or <code>compute_abnorm</code> functions.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_type">type</code></td>
<td>
<p>Object of type <code>character</code> indicating the type of time
series-column from data_score, takes either <em>obs</em>, <em>sad</em>, or <em>trd</em>. Defaults
to <em>&quot;obs&quot;</em>.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_ci">ci</code></td>
<td>
<p>Confidence interval within which changes are assumed to be normal.
Object of type <code style="white-space: pre;">&#8288;double, 0 &lt; ci &lt; 1&#8288;</code>. Defaults to <em>0.95</em>.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_measure">measure</code></td>
<td>
<p>Object of type <code>character</code> indicating the DOI measure,
takes either <em>gini</em>, <em>hhi</em>, or <em>entropy</em>. Defaults to <em>&quot;gini&quot;</em>.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_locations">locations</code></td>
<td>
<p>Object of type <code>character</code> indicating for which
set of locations should be filtered. Defaults to <em>&quot;countries&quot;</em>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For output of <code>export_score</code>, only data for a single location is shown.
When date for more than one location is provided, the function selects only
the first location.
For output of <code>get_abnorm_hist</code>, users can specify confidence intervals
to highlight abnormal changes in the data.
</p>


<h3>Value</h3>

<p>Boxplot of time series as <code>ggplot2</code> object. For plots for output from
<code>get_abnorm_hist</code> the provided confidence interval is indicated by red dots.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data &lt;- export_score(keyword = "amazon")
plot_box(data, type = "obs")

data &lt;- export_voi(keyword = "amazon")
data &lt;- get_abnorm_hist(data, train_win = 12, train_break = 0, type = "obs")
plot_box(data)

data &lt;- export_doi(keyword = "amazon")
data &lt;- get_abnorm_hist(data, train_win = 12, train_break = 0, measure = "gini")
plot_box(data, ci = 0.9)

## End(Not run)

</code></pre>

<hr>
<h2 id='plot_ts'>Plot time series of globaltrends data</h2><span id='topic+plot_ts'></span><span id='topic+plot_ts.exp_score'></span><span id='topic+plot_ts.abnorm_score'></span><span id='topic+plot_ts.exp_voi'></span><span id='topic+plot_ts.abnorm_voi'></span><span id='topic+plot_ts.exp_doi'></span><span id='topic+plot_ts.abnorm_doi'></span>

<h3>Description</h3>

<p>The function creates line plots for time series globaltrends data. It uses
the output of <code>export_...</code> or <code>get_abnorm_hist</code> to prepare line plots for up
to nine keywords.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_ts(data, ...)

## S3 method for class 'exp_score'
plot_ts(data, type = c("obs", "sad", "trd"), smooth = TRUE, ...)

## S3 method for class 'abnorm_score'
plot_ts(data, ci = 0.95, ...)

## S3 method for class 'exp_voi'
plot_ts(data, type = c("obs", "sad", "trd"), smooth = TRUE, ...)

## S3 method for class 'abnorm_voi'
plot_ts(data, ci = 0.95, ...)

## S3 method for class 'exp_doi'
plot_ts(
  data,
  type = c("obs", "sad", "trd"),
  measure = c("gini", "hhi", "entropy"),
  locations = "countries",
  smooth = TRUE,
  ...
)

## S3 method for class 'abnorm_doi'
plot_ts(
  data,
  type = c("obs", "sad", "trd"),
  locations = "countries",
  ci = 0.95,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_ts_+3A_data">data</code></td>
<td>
<p>Data exported from <code>export_...</code> or <code>compute_abnorm</code> functions.</p>
</td></tr>
<tr><td><code id="plot_ts_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
<tr><td><code id="plot_ts_+3A_type">type</code></td>
<td>
<p>Object of type <code>character</code> indicating the type of time
series-column from data_score, takes either <em>obs</em>, <em>sad</em>, or <em>trd</em>. Defaults
to <em>&quot;obs&quot;</em>.</p>
</td></tr>
<tr><td><code id="plot_ts_+3A_smooth">smooth</code></td>
<td>
<p>Object of type <code>logical</code> indicating whether the <code>geom_smooth</code>
function of <code>ggplot2</code> should be used. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="plot_ts_+3A_ci">ci</code></td>
<td>
<p>Confidence interval within which changes are assumed to be normal.
Object of type <code style="white-space: pre;">&#8288;double, 0 &lt; ci &lt; 1&#8288;</code>. Defaults to <em>0.95</em>.</p>
</td></tr>
<tr><td><code id="plot_ts_+3A_measure">measure</code></td>
<td>
<p>Object of type <code>character</code> indicating the DOI measure,
takes either <em>gini</em>, <em>hhi</em>, or <em>entropy</em>. Defaults to <em>&quot;gini&quot;</em>.</p>
</td></tr>
<tr><td><code id="plot_ts_+3A_locations">locations</code></td>
<td>
<p>Object of type <code>character</code> indicating for which
set of locations should be filtered. Defaults to <em>&quot;countries&quot;</em>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For output of <code>export_score</code>, only data for a single location is shown.
When date for more than one location is provided, the function selects only
the first location.
For output of <code>get_abnorm_hist</code>, users can specify confidence intervals
to highlight abnormal changes in the data.
</p>


<h3>Value</h3>

<p>Line plot of time series as <code>ggplot2</code> object. For plots for output from
<code>get_abnorm_hist</code> the provided confidence interval is indicated by red dots.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data &lt;- export_score(keyword = "amazon")
plot_ts(data, type = "obs")

data &lt;- export_voi(keyword = "amazon")
data &lt;- get_abnorm_hist(data, train_win = 12, train_break = 0, type = "obs")
plot_ts(data)

data &lt;- export_doi(keyword = "amazon")
data &lt;- get_abnorm_hist(data, train_win = 12, train_break = 0, measure = "gini")
plot_ts(data, ci = 0.9)

## End(Not run)

</code></pre>

<hr>
<h2 id='plot_voi_doi'>Line plots of VOI and DOI time series</h2><span id='topic+plot_voi_doi'></span>

<h3>Description</h3>

<p>The function uses the outputs of <code>export_voi</code> and <code>export_doi</code> to prepare a
parallel time series plot of volume and degree of internationalization
values. When the output includes more than one keyword, only the first
keyword is used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_voi_doi(
  data_voi,
  data_doi,
  type = c("obs", "sad", "trd"),
  measure = c("gini", "hhi", "entropy"),
  locations = "countries",
  smooth = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_voi_doi_+3A_data_voi">data_voi</code></td>
<td>
<p>Data exported from <code>export_voi</code> function.</p>
</td></tr>
<tr><td><code id="plot_voi_doi_+3A_data_doi">data_doi</code></td>
<td>
<p>Data exported from <code>export_doi</code> function.</p>
</td></tr>
<tr><td><code id="plot_voi_doi_+3A_type">type</code></td>
<td>
<p>Object of type <code>character</code> indicating the type of time
series-column from data_score, takes either <em>obs</em>, <em>sad</em>, or <em>trd</em>. Defaults
to <em>&quot;obs&quot;</em>.</p>
</td></tr>
<tr><td><code id="plot_voi_doi_+3A_measure">measure</code></td>
<td>
<p>Object of type <code>character</code> indicating the DOI measure,
takes either <em>gini</em>, <em>hhi</em>, or <em>entropy</em>. Defaults to <em>&quot;gini&quot;</em>.</p>
</td></tr>
<tr><td><code id="plot_voi_doi_+3A_locations">locations</code></td>
<td>
<p>Object of type <code>character</code> indicating for which
set of locations should be filtered. Defaults to <em>&quot;countries&quot;</em>.</p>
</td></tr>
<tr><td><code id="plot_voi_doi_+3A_smooth">smooth</code></td>
<td>
<p>Object of type <code>logical</code> indicating whether the <code>geom_smooth</code>
function of <code>ggplot2</code> should be used. Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Line plot of VOI and DOI time series as <code>ggplot2</code> object.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+export_voi">export_voi()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+export_doi">export_doi()</a></code>
</p>
</li>
<li> <p><code><a href="ggplot2.html#topic+ggplot">ggplot2::ggplot()</a></code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data1 &lt;- export_voi(keyword = "manchester united")
data2 &lt;- export_doi(
  keyword = "manchester united",
  locations = "countries"
)
plot_voi_doi(
  data_voi = data1,
  data_doi = data2,
  type = "obs",
  measure = "gini",
  smooth = TRUE
)
plot_voi_doi(
  data_voi = data1,
  data_doi = data2,
  type = "sad",
  measure = "hhi",
  smooth = FALSE
)
plot_voi_doi(
  data_voi = data1,
  data_doi = data2,
  type = "trd",
  measure = "entropy",
  smooth = TRUE
)

## End(Not run)

</code></pre>

<hr>
<h2 id='remove_data'>Remove data from database tables</h2><span id='topic+remove_data'></span><span id='topic+vacuum_data'></span>

<h3>Description</h3>

<p>The function removes data from database tables for control or object batches.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove_data(table, control = NULL, object = NULL)

vacuum_data()
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="remove_data_+3A_table">table</code></td>
<td>
<p>Database table from which the batch should be removed.  Object
of type <code>character</code>.</p>
</td></tr>
<tr><td><code id="remove_data_+3A_control">control</code></td>
<td>
<p>Control batch for which the data is removed Object
of type <code>numeric</code>.</p>
</td></tr>
<tr><td><code id="remove_data_+3A_object">object</code></td>
<td>
<p>Object batch for which the data is removed Object
of type <code>numeric</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function removes data &quot;greedily&quot;: all data that builds on the deleted
data is removed. For example, when data from <em>data_control</em> is removed
data in <em>data_object</em> that maps to this control batch is also removed.
The dependency structure works as follows: <em>batch_keyword</em> / <em>batch_time</em> -&gt;
<em>data_control</em> -&gt; <em>data_object</em> -&gt; <em>data_score</em> -&gt; <em>data_doi</em>.
</p>
<p>After using <code>remove_data</code>, run <code>vacuum_data</code> to free-up unused memory in
the database file. Depending on the database size, <code>vacuum_data</code> might
take some minutes for execution.
</p>


<h3>Value</h3>

<p>Message that data has been removed successfully. Data is removed
from database tables.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+example_keywords">example_keywords()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+example_time">example_time()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+example_control">example_control()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+example_object">example_object()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+example_score">example_score()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+example_doi">example_doi()</a></code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
remove_data(
  table = "batch_keywords",
  control = 1
)
remove_data(
  table = "data_score",
  control = 1,
  object = 1
)
vacuum_data()

## End(Not run)

</code></pre>

<hr>
<h2 id='start_db'>Load globaltrends database and tables</h2><span id='topic+start_db'></span>

<h3>Description</h3>

<p>The function connects to the database file <em>db/globaltrends_db.sqlite</em>
in the working directory. After connecting to the database connections to the
database tables (through <code>dplyr::tbl</code>) are created. Data from the tables
<em>batch_keywords</em> and <em>batch_time</em> are exported to the <code>tibble</code>
objects <em>keywords_control</em>, <em>keywords_object</em>, <em>time_control</em>,
and <em>time_object</em>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>start_db()
</code></pre>


<h3>Value</h3>

<p>The function exports the following objects to the package environment <code>globaltrends_db</code>:
</p>

<ul>
<li><p> globaltrends_db A DBIConnection object, as returned by
<code>DBI::dbConnect()</code>, connecting to the SQLite database in the working
directory
</p>
</li>
<li><p> tbl_doi A remote data source pointing to the table <em>data_doi</em> in
the connected SQLite database
</p>
</li>
<li><p> tbl_control A remote data source pointing to the table
<em>data_control</em> in the connected SQLite database
</p>
</li>
<li><p> tbl_mapping A remote data source pointing to the table
<em>data_mapping</em> in the connected SQLite database
</p>
</li>
<li><p> tbl_object A remote data source pointing to the table
<em>data_object</em> in the connected SQLite database
</p>
</li>
<li><p> tbl_score A remote data source pointing to the table
<em>data_score</em> in the connected SQLite database
</p>
</li>
<li><p> countries A <code>character</code> vector containing ISO2 country codes of
countries that add at least 0.1\
</p>
</li>
<li><p> us_states A <code>character</code> vector containing ISO2 regional codes of
US states
</p>
</li>
<li><p> keywords_control A <code>tibble</code> containing keywords of control
batches
</p>
</li>
<li><p> time_control A <code>tibble</code> containing times of control batches
</p>
</li>
<li><p> keywords_object A <code>tibble</code> containing keywords of object batches
</p>
</li>
<li><p> time_object A <code>tibble</code> containing times of control batches
</p>
</li>
<li><p> keyword_synonyms A <code>tibble</code> containing synonymous keywords
</p>
</li></ul>



<h3>Warning</h3>

<p>SQLite databases only allow one writer at any instant in time. To run
parallel downloads use one database for each download client and merge them
once all downloads are complete.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+initialize_db">initialize_db()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+disconnect_db">disconnect_db()</a></code>
</p>
</li>
<li> <p><code><a href="dplyr.html#topic+tbl">dplyr::tbl()</a></code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
start_db()

## End(Not run)

</code></pre>

<hr>
<h2 id='us_states'>us_states</h2><span id='topic+us_states'></span>

<h3>Description</h3>

<p>A character vector that includes ISO2 codes for all US federal states and
Washington DC. The data includes:
</p>

<ul>
<li><p> US-AL
</p>
</li>
<li><p> US-AK
</p>
</li>
<li><p> US-AZ
</p>
</li>
<li><p> US-AR
</p>
</li>
<li><p> US-CA
</p>
</li>
<li><p> US-CO
</p>
</li>
<li><p> US-CT
</p>
</li>
<li><p> US-DE
</p>
</li>
<li><p> US-FL
</p>
</li>
<li><p> US-GA
</p>
</li>
<li><p> US-HI
</p>
</li>
<li><p> US-ID
</p>
</li>
<li><p> US-IL
</p>
</li>
<li><p> US-IN
</p>
</li>
<li><p> US-IA
</p>
</li>
<li><p> US-KS
</p>
</li>
<li><p> US-KY
</p>
</li>
<li><p> US-LA
</p>
</li>
<li><p> US-ME
</p>
</li>
<li><p> US-MD
</p>
</li>
<li><p> US-MA
</p>
</li>
<li><p> US-MI
</p>
</li>
<li><p> US-MN
</p>
</li>
<li><p> US-MS
</p>
</li>
<li><p> US-MO
</p>
</li>
<li><p> US-MT
</p>
</li>
<li><p> US-NE
</p>
</li>
<li><p> US-NV
</p>
</li>
<li><p> US-NH
</p>
</li>
<li><p> US-NJ
</p>
</li>
<li><p> US-NM
</p>
</li>
<li><p> US-NY
</p>
</li>
<li><p> US-NC
</p>
</li>
<li><p> US-ND
</p>
</li>
<li><p> US-OH
</p>
</li>
<li><p> US-OK
</p>
</li>
<li><p> US-OR
</p>
</li>
<li><p> US-PA
</p>
</li>
<li><p> US-RI
</p>
</li>
<li><p> US-SC
</p>
</li>
<li><p> US-SD
</p>
</li>
<li><p> US-TN
</p>
</li>
<li><p> US-TX
</p>
</li>
<li><p> US-UT
</p>
</li>
<li><p> US-VT
</p>
</li>
<li><p> US-VA
</p>
</li>
<li><p> US-WA
</p>
</li>
<li><p> US-WV
</p>
</li>
<li><p> US-WI
</p>
</li>
<li><p> US-WY
</p>
</li>
<li><p> US-DC
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>us_states
</code></pre>


<h3>Format</h3>

<p>An object of class <code>character</code> of length 51.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
