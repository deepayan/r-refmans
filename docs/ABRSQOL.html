<!DOCTYPE html><html lang="en"><head><title>Help for package ABRSQOL</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ABRSQOL}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ABRSQOL'><p>ABRSQOL numerical solution algorithm to invert a quality of life measure</p></a></li>
<li><a href='#ABRSQOL_testdata'><p>Test data for ABRSQOL quality of life inversion</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Quality-of-Life Solver for "Measuring Quality of Life under
Spatial Frictions"</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>This toolkit implements a numerical solution algorithm 
    to invert a quality of life measure from observed data. Unlike
    the traditional Rosen-Roback measure, this measure accounts for
    mobility frictions—generated by idiosyncratic tastes and local
    ties — and trade frictions — generated by trade costs and
    non-tradable services, thereby reducing non-classical
    measurement error. The QoL measure is based on Ahlfeldt, Bald,
    Roth, Seidel (2024)
    <a href="https://econpapers.repec.org/RePEc:boc:bocode:s459382">https://econpapers.repec.org/RePEc:boc:bocode:s459382</a>
    "Measuring Quality of Life under Spatial Frictions". When using
    this programme or the toolkit in your work, please cite the paper.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/Ahlfeldt/ABRSQOL-toolkit#readme">https://github.com/Ahlfeldt/ABRSQOL-toolkit#readme</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/Ahlfeldt/ABRSQOL-toolkit/issues">https://github.com/Ahlfeldt/ABRSQOL-toolkit/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-11-04 14:39:54 UTC; BSE</td>
</tr>
<tr>
<td>Author:</td>
<td>Gabriel M Ahlfeldt [cph, aut] (Humboldt University of Berlin),
  Fabian Bald [aut] (European University Viadrina),
  Duncan Roth [aut] (Institute for Employment Research),
  Tobias Seidel [aut] (University of Duisburg-Essen),
  Max von Mylius [trl, cre] (Humboldt University of Berlin)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Max von Mylius &lt;max.mylius@hu-berlin.de&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-11-06 16:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='ABRSQOL'>ABRSQOL numerical solution algorithm to invert a quality of life measure</h2><span id='topic+ABRSQOL'></span>

<h3>Description</h3>

<p>This toolkit implements a numerical solution algorithm
to invert a quality of life (QoL) from observed data
in various programming languages. The QoL measure is
based on Ahlfeldt, Bald, Roth, Seidel (2024):
Measuring quality of life under spatial frictions.
Unlike the traditional Rosen-Roback measure, this measure
accounts for mobility frictions—generated by idiosyncratic
tastes and local ties—and trade frictions—generated by
trade costs and non-tradable services, thereby reducing
non-classical measurement error.
When using this programme or the toolkit in your work, please cite the paper.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ABRSQOL(
  df,
  w = "w",
  p_H = "p_H",
  P_t = "P_t",
  p_n = "p_n",
  L = "L",
  L_b = "L_b",
  alpha = 0.7,
  beta = 0.5,
  gamma = 3,
  xi = 5.5,
  conv = 0.5,
  tolerance = 1e-10,
  maxiter = 10000
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ABRSQOL_+3A_df">df</code></td>
<td>
<p>input data containing variables refenced by 
following arguments: data.frame or matrix</p>
</td></tr>
<tr><td><code id="ABRSQOL_+3A_w">w</code></td>
<td>
<p>wage index variable name or column index:
character or integer (or list), default='w'</p>
</td></tr>
<tr><td><code id="ABRSQOL_+3A_p_h">p_H</code></td>
<td>
<p>floor_space_price variable name or column index:
character or integer, default='p_H'</p>
</td></tr>
<tr><td><code id="ABRSQOL_+3A_p_t">P_t</code></td>
<td>
<p>tradable_goods_price variable name or column index:
character or integer, default='P_t'</p>
</td></tr>
<tr><td><code id="ABRSQOL_+3A_p_n">p_n</code></td>
<td>
<p>local_services_price variable name or column index:
character or integer, default='p_n'</p>
</td></tr>
<tr><td><code id="ABRSQOL_+3A_l">L</code></td>
<td>
<p>residence_population variable name or column index:
character or integer, default='L'</p>
</td></tr>
<tr><td><code id="ABRSQOL_+3A_l_b">L_b</code></td>
<td>
<p>hometown_population variable name or column index:
character or integer, default='L_b'</p>
</td></tr>
<tr><td><code id="ABRSQOL_+3A_alpha">alpha</code></td>
<td>
<p>Income share on non-housing consumtpion:
double, default=0.7</p>
</td></tr>
<tr><td><code id="ABRSQOL_+3A_beta">beta</code></td>
<td>
<p>Share of tradable goods in non-housing consumption:
double, default=0.5</p>
</td></tr>
<tr><td><code id="ABRSQOL_+3A_gamma">gamma</code></td>
<td>
<p>Idiosyncratic taste dispersion (inverse labour
supply elasticity):
double, default=3</p>
</td></tr>
<tr><td><code id="ABRSQOL_+3A_xi">xi</code></td>
<td>
<p>Valuation of local ties: double, default=5</p>
</td></tr>
<tr><td><code id="ABRSQOL_+3A_conv">conv</code></td>
<td>
<p>Convergence parameter (Hgher value increases spead of,
convergence and risk of bouncing): double, default=0.5</p>
</td></tr>
<tr><td><code id="ABRSQOL_+3A_tolerance">tolerance</code></td>
<td>
<p>Value used in stopping rule (The mean absolute error (MAE).
Smaller values imply greater precision and longer convergence):
double, default=1e-10</p>
</td></tr>
<tr><td><code id="ABRSQOL_+3A_maxiter">maxiter</code></td>
<td>
<p>Maximum number of iterations after which the algorithm
is forced to stop: integer, default=1e4</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Notice that quality of life is identified up to a constant.
Therefore, the inverted QoL measures measure has a relative
interpretation only. We normalize the QoL relative to the first
observation in the data set. It is straightforward to rescale
the QoL measure to any other location or any other value (such
as the mean or median in the distribution of QoL across locations).
</p>


<h3>Value</h3>

<p>inverted quality of life measure as Numeric vector
(identified up to a constant)
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example 1: 
# load testdata, 
# run QoL inversion with default parameters and append result
data(ABRSQOL_testdata)
my_dataframe &lt;- ABRSQOL_testdata
my_dataframe$qol1 &lt;- ABRSQOL(df=ABRSQOL_testdata)
my_dataframe

# Example 2: load your data from csv, run inversion, save result as csv
# my_dataframe &lt;- read.csv("path/to/your/csv_filename.csv")
# my_dataframe$qol2 &lt;- ABRSQOL(
#  # supply your dataset as a dataframe
#  df=my_dataframe,
#  # and specify the corresponding variable name for your dataset
#  w = 'wage',
#  p_H = 'floor_space_price',
#  P_t = 'tradable_goods_price',
#  p_n = 'local_services_price',
#  L = 'residence_pop',
#  L_b = 'L_b',
#  # freely adjust remaining parameters
#  alpha = 0.7,
#  beta = 0.5,
#  gamma = 3,
#  xi = 5.5,
#  conv = 0.3,
#  tolerance = 1e-11,
#  maxiter = 50000
#)
#write.csv(my_dataframe, 'qol_of_my_data.csv'

# Example 3: Reference variables in your dataset by using the column index
my_dataframe$qol3 &lt;- ABRSQOL(
  df=my_dataframe,
  w = 1,
  p_H = 3,
  P_t = 4,
  p_n = 2,
  L = 6,
  L_b = 5
)

# Example 4: Having named the variables in your data according to the 
# default parameters, you can ommit specifying variable names
my_dataframe$qol4 &lt;- ABRSQOL(
  df=my_dataframe,
  alpha = 0.7,
  beta = 0.5,
  gamma = 3,
  xi = 5.5,
  conv = 0.5
)

</code></pre>

<hr>
<h2 id='ABRSQOL_testdata'>Test data for ABRSQOL quality of life inversion</h2><span id='topic+ABRSQOL_testdata'></span>

<h3>Description</h3>

<p>This is a test data set, and it is not identical to the data used in the
paper. The data set includes average disposable household income as a
measure of wage, the local labour market house price index from Ahlfeldt,
Heblich, Seidel (2023), the 2015 census population as a measure of
residence population and hte 1985 census population as measure of hometown
population. Tradable goods price and local services price indices
are uniformly set to one.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(ABRSQOL_testdata)
</code></pre>


<h3>Format</h3>

<p>data.frame with colnames=c('llm_id','w','p_H','P_t','p_n','L','L_b',
'Name','coord_x','coord_y') and 141 observations
</p>


<h3>Source</h3>

<p><a href="https://github.com/Ahlfeldt/ABRSQOL-toolkit">ABRSQOL-toolkit</a>
</p>


<h3>References</h3>

<p>Gabriel M. Ahlfeldt, Fabian Bald, Duncan Roth, Tobias Seidel
(forthcoming): Measuring quality of life under spatial frictions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library('ABRSQOL')
data(ABRSQOL_testdata)
ABRSQOL_testdata$QoL = ABRSQOL(df=ABRSQOL_testdata)
ABRSQOL_testdata
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
