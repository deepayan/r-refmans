<!DOCTYPE html><html><head><title>Help for package predfairness</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {predfairness}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#adult.data'><p>Adult Dataset</p></a></li>
<li><a href='#roc_method'><p>Reject Option based Classification method</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Discrimination Mitigation for Machine Learning Models</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-07-14</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Thaís de Bessa Gontijo de Oliveira &lt;thais.bgo@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Based on different statistical definitions of discrimination, several methods have been proposed to detect and mitigate social inequality in machine learning models. 
  This package aims to provide an alternative to fairness treatment in predictive models. The ROC method implemented in this package
  is described by Kamiran, Karim and Zhang (2012) <a href="https://ieeexplore.ieee.org/document/6413831/">https://ieeexplore.ieee.org/document/6413831/</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>caret, stats</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-07-27 19:51:49 UTC; leonardopv</td>
</tr>
<tr>
<td>Author:</td>
<td>Thaís de Bessa Gontijo de Oliveira [aut, cre],
  Leonardo Paes Vieira [aut],
  Gustavo Rodrigues Lacerda Silva [ctb],
  Barbara Bianca Alves Cardoso [ctb],
  Douglas Alexandre Gomes Vieira [ctb]</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-07-28 11:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='adult.data'>Adult Dataset</h2><span id='topic+adult.data'></span>

<h3>Description</h3>

<p>Sample extracted from the 1994 USA census. Each observation is related to an individual.
</p>


<h3>Format</h3>

<p>Data frame with 32,561 rows and 15 columns.
</p>

<ul>
<li><p> income: factor, &gt;50K / &lt;=50K. Income of each person.
</p>
</li>
<li><p> age: integer, age of each person.
</p>
</li>
<li><p> workclass factor, category of work. Private, Self-emp-not-inc, Self-emp-inc,
Federal-gov, Local-gov, State-gov, Without-pay, Never-worked.
</p>
</li>
<li><p> fnlwgt: numeric
</p>
</li>
<li><p> education: factor. Bachelors, Some-college, 11th, HS-grad, Prof-school, Assoc-acdm, Assoc-voc,
9th, 7th-8th, 12th, Masters, 1st-4th, 10th, Doctorate, 5th-6th, Preschool.
</p>
</li>
<li><p> education_num: numeric. Variable education converted to numeric.
</p>
</li>
<li><p> marital-status:  factor of marital status. Married-civ-spouse, Divorced, Never-married, Separated, Widowed,
Married-spouse-absent, Married-AF-spouse.
</p>
</li>
<li><p> occupation: factor. Tech-support, Craft-repair, Other-service, Sales, Exec-managerial, Prof-specialty, Handlers-cleaners, Machine-op-inspct, Adm-clerical, Farming-fishing, Transport-moving,
Priv-house-serv, Protective-serv, Armed-Forces.
</p>
</li>
<li><p> relationship:: factor. Wife, Own-child, Husband, Not-in-family, Other-relative, Unmarried.
</p>
</li>
<li><p> race: factor. White, Asian-Pac-Islander, Amer-Indian-Eskimo, Other, Black.
</p>
</li>
<li><p> capital_gain: numeric.
</p>
</li>
<li><p> capital_loss. numeric.
</p>
</li>
<li><p> hours-per-week: numeric. Worked hours per week.
</p>
</li>
<li><p> native-country:: factor. Country of origin.
</p>
</li></ul>



<h3>Value</h3>

<p>Returns a data frame with 32,561 rows and 15 columns.
</p>


<h3>Source</h3>

<p>Dataset extracted from: <a href="https://archive.ics.uci.edu/ml/datasets/adult">UCL Machine Learning Repository</a>
</p>


<h3>References</h3>

<p>Dua, D. and Graff, C. (2019). UCI Machine Learning Repository [http://archive.ics.uci.edu/ml]. Irvine, CA: University of California, School of Information and Computer Science.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> data('adult.data')

</code></pre>

<hr>
<h2 id='roc_method'>Reject Option based Classification method</h2><span id='topic+roc_method'></span><span id='topic+Reject'></span><span id='topic+Option'></span><span id='topic+based'></span><span id='topic+Classification'></span><span id='topic+method'></span>

<h3>Description</h3>

<p>Reject Option based Classification (ROC) method for discrimination reduction in predictive models. Given a probabilistic model
for binary classifications, ROC is a post processing method which changes instances' classification labels in a defined probability interval.
In a probabilistic model, the decision criteria is defined by simply choosing the category with the higher estimated probability.
Considering a binary classification, a model returns two complementary probabilities.
</p>
<p>Assuming that discriminatory classifications occurs near rejection boundary (when probabilities are near 0.5), the ROC method
defines an interval in which probabilities can be considered next to the boundary.
Then, once the interval size ([0.5, theta]) is defined, the method looks for the higher probability between the two classes.
If a privileged person receives a positive classification with probability between 0.5 and theta, the method turn this classification
to negative. Conversely, if the method finds a deprived person with negative classification probability between 0.5 and theta, then it changes her to positive.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>roc_method(
  pred_mod,
  positive_col,
  positive_class,
  negative_col,
  sensible_col,
  privileged_group,
  classification_col,
  theta
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="roc_method_+3A_pred_mod">pred_mod</code></td>
<td>
<p>data frame - predictions and its probabilities with respect to each category.</p>
</td></tr>
<tr><td><code id="roc_method_+3A_positive_col">positive_col</code></td>
<td>
<p>string - positive classification probabilities column name</p>
</td></tr>
<tr><td><code id="roc_method_+3A_positive_class">positive_class</code></td>
<td>
<p>string - positive classification label</p>
</td></tr>
<tr><td><code id="roc_method_+3A_negative_col">negative_col</code></td>
<td>
<p>string - negative classification probabilities column name</p>
</td></tr>
<tr><td><code id="roc_method_+3A_sensible_col">sensible_col</code></td>
<td>
<p>string - sensible attribute column name</p>
</td></tr>
<tr><td><code id="roc_method_+3A_privileged_group">privileged_group</code></td>
<td>
<p>string - privileged group label</p>
</td></tr>
<tr><td><code id="roc_method_+3A_classification_col">classification_col</code></td>
<td>
<p>string - classifications column name</p>
</td></tr>
<tr><td><code id="roc_method_+3A_theta">theta</code></td>
<td>
<p>numeric - classification probabilities threshold</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In a binary classification, the highest probability is always greater than 0.5. Considering already classified instances,
and selecting people from the privileged-positive classified group and deprived-negative classified group, the method searches for those
with the maximum probability less than theta.
In this case, the function will change the instance's classification label and replace the two probabilities with their complementary.
The user must run the data frame with predictions, the column name with the sensible attribute, as well as the privileged group name through the ROC method.
Also, the user must add the classification column name, the categories probabilities columns names and the name of the category considered the positive one.
This function returns a data frame with updated probabilities and classifications.
</p>


<h3>Value</h3>

<p>Returns a new data frame with updated classifications and probabilities, maintaining the structure (columns and its names)
of the original data frame, ran in the method.
</p>


<h3>Author(s)</h3>

<p>Leonardo Paes Vieira
</p>


<h3>References</h3>

<p>F. Kamiran, A. Karim and X. Zhang, &quot;Decision Theory for Discrimination-Aware Classification,&quot; 2012 IEEE 12th International Conference on Data Mining, 2012, pp. 924-929, doi: 10.1109/ICDM.2012.45.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
 data('adult.data')

 adult.data$income = ifelse(test =  adult.data$income == '&gt;50K',
                             yes = 1, no = 0)

 adult.data = adult.data[, colnames(adult.data) %in%
                           c('age', 'education', 'sex',
                             'income', 'capital_gain')]

 adult.data = adult.data[sample(1:nrow(adult.data), size = 100, replace = FALSE), ]

 ##### Logistic Regression

 if (!requireNamespace("stats", quietly = TRUE)) {
 stop("Package \"stats\" needed for this example to work.",
 call. = FALSE)}

 mod = glm(formula =  income ~., data = adult.data, family = binomial(link = 'logit'))

 ### The 'predict' function returns the classes probabilities
 ### automatically for caret (package) models

 pred = data.frame(greater = mod$fitted.values, less =  1 - mod$fitted.values, sex = adult.data$sex,
                   classification = ifelse(mod$fitted.values &gt;= 0.5, 'greater', 'less'))

 theta = 0.6

 pred_changed = roc_method(pred_mod = pred, positive_col = 'greater',
                          positive_class = 'greater', negative_col = 'less',
                          sensible_col = 'sex', privileged_group = 'Male',
                          classification_col = 'classification',
                          theta = theta)


 pred_changed
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
