<!DOCTYPE html><html><head><title>Help for package tapkee</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {tapkee}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#tapkee-package'><p>'tapkee' command line utility installation</p></a></li>
<li><a href='#Gen.dr.data'><p>Generates 3D data</p></a></li>
<li><a href='#Tapkee'><p>Tapkee wrapper</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Wrapper for 'tapkee' Dimension Reduction Library</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-12-20</td>
</tr>
<tr>
<td>Author:</td>
<td>Alexey Shipunov</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Alexey Shipunov &lt;dactylorhiza@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Wrapper for using 'tapkee' command line utility,
 it allows to run it from inside R and catch the results for further analysis and plotting.
 'Tapkee' is a program for fast dimension reduction, see 'package?tapkee' and <a href="http://tapkee.lisitsyn.me/">http://tapkee.lisitsyn.me/</a>
 for installation and other details.</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>'tapkee' (http://tapkee.lisitsyn.me/)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>scatterplot3d, rgl, R.rsp</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>R.rsp</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-12-27 13:17:58 UTC; alexey</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-01-04 12:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='tapkee-package'>'tapkee' command line utility installation</h2><span id='topic+tapkee-package'></span>

<h3>Description</h3>

<p>Here is the description of how to install 'tapkee' utility on different
operation systems.
</p>


<h3>General instructions</h3>


<dl>
<dt>Download</dt><dd>
<p>Executablle files for macOS, Windows and Linux are available here:
https://github.com/lisitsyn/tapkee/releases/tag/1.2
</p>
</dd></dl>


<h3>Specific instructions for Linux</h3>


<dl>
<dt>Downloaded binary: </dt><dd>
<p>Linux binary is a 64 bit version which works on Ubuntu 16.04 LTS and
likely will work on other systems. Depends on 'ldd tapkee', install
dependencies (you might need to install at least &quot;libarpack2&quot;). Copy
'tapkee' binary to where system will find it ('echo $PATH').
</p>
</dd></dl>


<h3>Specific instructions for macOS</h3>


<dl>
<dt>1)</dt><dd><p>In Terminal.app, run:
</p>
<p>$ echo $PATH
</p>
</dd>
<dt>2)</dt><dd><p>Copy 'tapkee' into one of mentioned directories, e.g.:
</p>
<p>$ cp tapkee /usr/local/bin
</p>
</dd>
<dt>3)</dt><dd><p>Run:
</p>
<p>$ tapkee -h
</p>
<p>If you see the list of 'tapkee' options, everything is OK. If not,
you need to check (4) and (5).
</p>
</dd>
<dt>4)</dt><dd><p>If you have the message similar to:
</p>
<p>$ dyld: Library not loaded: ...
</p>
<p>install eigen and arpack with Homebrew (install Homebrew first,
google how to do it):
</p>
<p>$ brew install arpack &amp;&amp; brew install eigen
</p>
<p>then run
</p>
<p>$ tapkee -h
</p>
<p>again.
</p>
</dd>
<dt>5)</dt><dd><p>You might also run:
</p>
<p>$ echo $DYLD_LIBRARY_PATH
</p>
<p>to see where installed libraries should be located.
</p>
</dd></dl>


<h3>Specific instructions for Windows</h3>


<dl>
<dt>1)</dt><dd><p>Download the 'tapkee-win.exe' executable which works under
Windows 10. Please also make sure that you installed &quot;Microsoft
Visual C++ Redistributable 32-bit&quot; (google the name to obtain link)
to get required DLLs.
</p>
</dd>
<dt>2)</dt><dd><p>Find where did you place the executable file. Open command
prompt and direct it to this folder, for example (if the
'tapkee-win.exe' is in &quot;C:\Users\Me\Downloads&quot; directory):
</p>
<p>&gt; c:
&gt; cd &quot;C:\Users\Me\Downloads&quot;
</p>
<p>Then check is the executable works. Type
</p>
<p>&gt; tapkee-win.exe -h
</p>
<p>Long message with options should appear. If not, you are either not
in the proper place (double check where is executable file and then
&quot;cd&quot; to there), or there are some other problems (e.g., required DLLs
are not installed properly).
</p>
<p>Next, find the place where to install 'tapkee-win.exe'. Best is to
start the command prompt window and run there:
</p>
<p>&gt; echo 
</p>
<p>Install the executable (and change its name to just 'tapkee.exe')
into one of folders which are in the list. For example, if &quot;C:\Some
dir&quot; is in the list (entries there are separated with semicolon),
run:
</p>
<p>&gt; copy tapkee-win.exe &quot;C:\Some dir\tapkee.exe&quot;
</p>
<p>You might also try to install everything in the R working folder (to
find it, run 'getwd()' inside R) but this is less usable.
</p>
</dd>
<dt>3)</dt><dd><p>Now open new command prompt window and run:
</p>
<p>&gt; tapkee -h
</p>
<p>If you see the list of 'tapkee' options, everything is OK. If not,
you need to check (1) and (2) again.
</p>
</dd></dl>

<hr>
<h2 id='Gen.dr.data'>Generates 3D data</h2><span id='topic+Gen.dr.data'></span>

<h3>Description</h3>

<p>Generates typical 3D dimension reduction data</p>


<h3>Usage</h3>

<pre><code class='language-R'>
Gen.dr.data(type, N=1000)

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Gen.dr.data_+3A_type">type</code></td>
<td>
<p>one of &quot;swissroll&quot;, &quot;scurve&quot; (S-curve), &quot;helix&quot;, &quot;ssphere&quot;
(severed sphere)</p>
</td></tr>
<tr><td><code id="Gen.dr.data_+3A_n">N</code></td>
<td>
<p>number of data points</p>
</td></tr>
</table>


<h3>Details</h3>

<p>'Gen.dr.data()' generates some frequently used 3D data. Formulas taken
partly from 'tapkee' 'borsch' script and partly from Python
'scikit-learn'.
</p>


<h3>Author(s)</h3>

<p>Alexey Shipunov</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# generate four variants of 3D data

SC &lt;- Gen.dr.data("scurve")
SR &lt;- Gen.dr.data("swissroll")
HX &lt;- Gen.dr.data("helix")
SS &lt;- Gen.dr.data("ssphere")

# plot them (requires packages 'scatterplot3d' and 'rgl')

if (requireNamespace("rgl", quietly = TRUE)) {
 COL &lt;- colorRampPalette(c("green", "orange"))(1000)
 scatterplot3d::scatterplot3d(SC, color=COL, pch=20, cex.symbols=1.4)
} else {
  cat("Please install 'rgl' package to see the plot")
}

if (requireNamespace("rgl", quietly = TRUE)) {
 rgl::plot3d(SR, col=rainbow(1100))
} else {
 cat("Please install 'rgl' package to see the plot")
}

if (requireNamespace("rgl", quietly = TRUE)) {
 rgl::plot3d(HX, col=rainbow(1100))
} else {
 cat("Please install 'rgl' package to see the plot")
}

if (requireNamespace("rgl", quietly = TRUE)) {
 rgl::plot3d(SS, col=rainbow(1100))
} else {
  cat("Please install 'rgl' package to see the plot")
}

</code></pre>

<hr>
<h2 id='Tapkee'>Tapkee wrapper</h2><span id='topic+Tapkee'></span>

<h3>Description</h3>

<p>R wrapper for the 'tapkee' dimension reduction library</p>


<h3>Usage</h3>

<pre><code class='language-R'>Tapkee(data, method="pca", td=2, verbose=FALSE, add="", prefix="Dim", rm=TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Tapkee_+3A_data">data</code></td>
<td>
<p>R numerical matrix or data frame (will be converted into matrix)</p>
</td></tr>
<tr><td><code id="Tapkee_+3A_method">method</code></td>
<td>
<p>'tapkee' method, run &quot;system('tapkee -h')&quot; for the list, default is &quot;pca&quot;</p>
</td></tr>
<tr><td><code id="Tapkee_+3A_td">td</code></td>
<td>
<p>Number of dimensions to output, default is 2</p>
</td></tr>
<tr><td><code id="Tapkee_+3A_verbose">verbose</code></td>
<td>
<p>If TRUE, 'tapkee' is verbose, defalut is FALSE</p>
</td></tr>
<tr><td><code id="Tapkee_+3A_add">add</code></td>
<td>
<p>'tapkee' additional arguments as character string: see &quot;system('tapkee -h')&quot;</p>
</td></tr>
<tr><td><code id="Tapkee_+3A_prefix">prefix</code></td>
<td>
<p>Variable name prefix in the resulted data frame, default is &quot;Dim&quot;</p>
</td></tr>
<tr><td><code id="Tapkee_+3A_rm">rm</code></td>
<td>
<p>Remove temp files (but temp folder will be removed anyway in the end of R session), default is TRUE</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Interface (wrapper) for the 'tapkee', flexible and efficient C++ template library for dimension reduction.
'tapkee' is extremely fast comparing with other DR tools.
</p>
<p>For methods used in 'tapkee', run 'vignette(tapkee_methods)'.
</p>
<p>Users should install 'tapkee' independently from author Web site (https://github.com/lisitsyn/tapkee)
or associated GitHub (https://github.com/lisitsyn/tapkee). Run 'package?tapkee' or help(&quot;tapkee-package&quot;)
for details related with your operation system. If 'tapkee' is not installed, Tapkee() will fail gracefully
and output the input data with warning.
</p>
<p>Please note that &quot;[warning] The neighborhood graph is not connected&quot; message in most cases means that
'tapkee' run was unsuccessful. As a result, Tapkee() might return the matrix of NaN's.
One of possible workarounds is to specify the higher number of neigbors ('-k' option, default is 10).
See below for the example.
</p>
<p>Note that the wrapper catches only one (main) type of 'tapkee' utility outputs. For other possible output
types (see 'tapkee -h' for explanation), run 'tapkee' without wrapper.
</p>


<h3>Value</h3>

<p>Data frame with number of columns equal to number of dimensions given and &quot;prefix&quot; column names prefixes.</p>


<h3>Author(s)</h3>

<p>Alexey Shipunov</p>


<h3>References</h3>

<p>Sergey Lisitsyn and Christian Widmer and Fernando J. Iglesias Garcia. Tapkee: An Efficient Dimension Reduction Library. Journal of Machine Learning Research, 14: 2355-2359, 2013.</p>


<h3>See Also</h3>

<p><code><a href="#topic+tapkee-package">tapkee-package</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## 'tapkee' vs. R base functions
system.time(Tapkee(iris[, -5], method="mds"))
system.time(cmdscale(dist(iris[, -5])))

## How to use 'add' option
plot(Tapkee(iris[, -5], "isomap", add="-k 47"), col=iris[, 5])

## 'tapkee' methods as of March 2019:
TM &lt;- c(
"lle", # 1) locally_linear_embedding (lle),
"npe", # 2) neighborhood_preserving_embedding (npe),
"ltsa", # 3) local_tangent_space_alignment (ltsa),
"lltsa", # 4) linear_local_tangent_space_alignment (lltsa), 
"hlle", # 5) hessian_locally_linear_embedding (hlle),
"la", # 6) laplacian_eigenmaps (la),
"lpp", # 7) locality_preserving_projections (lpp),
"dm", # 8) diffusion_map (dm),
"isomap", # 9) isomap (isomap),
"l-isomap", # 10) landmark_isomap (l-isomap),
"mds", # 11) multidimensional_scaling (mds),
"l-mds", # 12) landmark_multidimensional_scaling (l-mds),
"spe", # 13) stochastic_proximity_embedding (spe),
"kpca", # 14) kernel_pca (kpca),
"pca", # 15) pca (pca),
"ra", # 16) random_projection (ra),
"fa", # 17) factor_analysis (fa),
"t-sne", # 18) t-stochastic_neighborhood_embedding (t-sne),
"ms") # 19) manifold_sculpting (ms)

## Iris example
oldpar &lt;- par(mfrow=c(4, 5), mar=c(1, 1, 3, 1), xaxt="n", yaxt="n")
for (n in c(1:18)) {
plot(Tapkee(iris[, -5], method=TM[n], add="-k 50"),
 col=iris[, 5], pch=20, main=TM[n], xlab="", ylab="")
}
plot(iris[, 1:2], col=iris[, 5], pch=20, main="iris[, 1:2]", xlab="", ylab="")
par(oldpar)

## Generate typical 3D data
SR &lt;- Gen.dr.data("swissroll")
SC &lt;- Gen.dr.data("scurve")
HX &lt;- Gen.dr.data("helix")
SS &lt;- Gen.dr.data("ssphere")

## This will separate colors better
COL &lt;- rainbow(1100)[1:1000]

## 3D plot (if no 'scatterplot3d' package, plots XY axes)
T3D &lt;- function(dat, title, col=COL) {
 if (requireNamespace("scatterplot3d", quietly = TRUE)) {
 scatterplot3d::scatterplot3d(dat, color=col, main=title, pch=20, xlab="", ylab="", zlab="",
  axis=FALSE, tick.marks=FALSE, label.tick.marks=FALSE, mar=c(1, 1, 3, 1))
} else {
 plot(dat[, 1:2], col=col, main=paste(title, "(2D projection)"), pch=20)
 warning("Please install 'scatterplot3d' package to see the 3D plot")
}}

## Swiss Roll
oldpar &lt;- par(mfrow=c(4, 5))
T3D(SR, title="Swiss Roll")
for (n in 1:18) plot(Tapkee(SR, method=TM[n]), col=COL, pch=20, main=TM[n],
 xlab="", ylab="", xaxt="n", yaxt="n")
par(oldpar)

## S-Curve
oldpar &lt;- par(mfrow=c(4, 5))
T3D(SC, title="S-Curve")
for (n in 1:18) plot(Tapkee(SC, method=TM[n]), col=COL, pch=20, main=TM[n],
 xlab="", ylab="", xaxt="n", yaxt="n")
par(oldpar)

## Helix
oldpar &lt;- par(mfrow=c(4, 5))
T3D(HX, title="Helix")
for (n in 1:18) plot(Tapkee(HX, method=TM[n]), col=COL, pch=20,
 main=TM[n], xlab="", ylab="", xaxt="n", yaxt="n")
par(oldpar)

## Severed Sphere
oldpar &lt;- par(mfrow=c(4, 5))
T3D(SS, title="Severed Sphere", col=rainbow(nrow(SS)))
for (n in 1:18) plot(Tapkee(SS, method=TM[n]), col=rainbow(nrow(SS)), pch=20,
 main=TM[n], xlab="", ylab="", xaxt="n", yaxt="n")
par(oldpar)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
