<!DOCTYPE html><html lang="en"><head><title>Help for package sociome</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {sociome}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#acs_age_sex_race_ethnicity_vars'><p>ACS variables for age, sex, race, and ethnicity</p></a></li>
<li><a href='#acs_vars'><p>ACS variable names for ADI and ADI-3 calculation</p></a></li>
<li><a href='#append_dissimilarities'><p>Append list columns of Gower's distances and sampling weights to a data frame</p></a></li>
<li><a href='#calculate_adi'><p>Calculate ADI and ADI-3 from census data.</p></a></li>
<li><a href='#census_api_key'><p>Census API Key installer</p></a></li>
<li><a href='#decennial_age_sex_race_ethnicity_vars'><p>Decennial Census variables for age, sex, race, and ethnicity</p></a></li>
<li><a href='#decennial_vars'><p>Decennial census variable names for ADI calculation</p></a></li>
<li><a href='#get_adi'><p>Get Area Deprivation Index (ADI) and Berg Indices (ADI-3)</p></a></li>
<li><a href='#get_areas_near_coordinates'><p>Make a tibble of census areas closest to a user-specified center</p></a></li>
<li><a href='#get_geoids'><p>Obtain GEOIDs of areas</p></a></li>
<li><a href='#lon_lat_from_area'><p>Grab the longitude/latitude of the center of population of a census area</p></a></li>
<li><a href='#synthetic_population'><p>Create a synthetic population simulating US Census areas</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Operationalizing Social Determinants of Health Data for
Researchers</td>
</tr>
<tr>
<td>Version:</td>
<td>2.2.5</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Nik Krieger &lt;nikkrieger@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Accesses raw data via API and calculates social
    determinants of health measures for user-specified locations in the
    US, returning them in tidyverse- and sf-compatible data frames.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ClevelandClinicQHS/sociome/issues">https://github.com/ClevelandClinicQHS/sociome/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr (&ge; 1.0.1), magrittr (&ge; 1.5), mice (&ge; 3.10.0.1),
psych, purrr (&ge; 0.3.4), rlang (&ge; 0.4.7), stringr (&ge; 1.4.0),
tidycensus (&ge; 1.0), tidyr (&ge; 1.1.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>USpopcenters, cluster, geosphere, ggplot2 (&ge; 3.3.2), sf (&ge;
0.9-7), testthat (&ge; 2.3.2), tibble (&ge; 3.0.3), tigris (&ge;
1.0), units</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-12-05 22:08:55 UTC; caile</td>
</tr>
<tr>
<td>Author:</td>
<td>Nik Krieger [aut, cre],
  Jarrod Dalton [aut],
  Cindy Wang [aut],
  Adam Perzynski [aut],
  National Institutes of Health/National Institute on Aging [fnd] (The
    development of this software package was supported by a research
    grant from the National Institutes of Health/National Institute on
    Aging, (Principal Investigators: Jarrod E. Dalton, PhD and Adam T.
    Perzynski, PhD; Grant Number: 5R01AG055480-02). All of its contents
    are solely the responsibility of the authors and do not necessarily
    represent the official views of the NIH.)</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-12-06 12:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>

<hr>
<h2 id='acs_age_sex_race_ethnicity_vars'>ACS variables for age, sex, race, and ethnicity</h2><span id='topic+acs_age_sex_race_ethnicity_vars'></span>

<h3>Description</h3>

<p>A two-column data set of the American Community Survey variable names and
their descriptions. Contains counts of various subdivisions of the population
based on age, sex, race, and ethnicity.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>acs_age_sex_race_ethnicity_vars
</code></pre>


<h3>Format</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble</a></code> with 65 rows and 2 variables:
</p>
 <dl>
<dt>variable</dt><dd><p>ACS variable name</p>
</dd>
<dt>description</dt><dd><p>A description of who is present in the count</p>
</dd></dl>



<h3>Details</h3>

<p>These variable names have been consistent throughout the existence of the ACS
from its beginning through 2020.
</p>
<p>This data set is used to support <code><a href="#topic+synthetic_population">synthetic_population</a>()</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+decennial_age_sex_race_ethnicity_vars">decennial_age_sex_race_ethnicity_vars</a></code>
</p>

<hr>
<h2 id='acs_vars'>ACS variable names for ADI and ADI-3 calculation</h2><span id='topic+acs_vars'></span>

<h3>Description</h3>

<p>A dataset of the ACS variable names used to calculate the Area Deprivation
Index (ADI) and Berg Indices (ADI-3).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>acs_vars
</code></pre>


<h3>Format</h3>

<p>A ['tibble'][tibble::tibble] with 139 rows and 10 variables:
</p>
 <dl>
<dt>variable</dt><dd><p>ACS variable name</p>
</dd> <dt>description</dt><dd><p>Brief
description of the data the variable contains</p>
</dd> <dt>set1</dt><dd><p>Logical,
indicating the variables to be used when calculating ADI and ADI-3 using
the 1- or 3-year estimates from 2011 and later or when using the 5-year
estimates from 2012 or later</p>
</dd> <dt>set2</dt><dd><p>Logical, indicating the variables
to be used when calculating ADI and ADI-3 at the block group level using
the 2015 or 2016 estimates</p>
</dd> <dt>set3</dt><dd><p>Logical, indicating the variables
to be used when calculating ADI using the 2011 5-year estimates</p>
</dd>
<dt>set4</dt><dd><p>Logical, indicating the variables to be used when calculating
ADI and ADI-3 using the 2010 1- or 3-year estimates</p>
</dd> <dt>set5</dt><dd><p>Logical,
indicating the variables to be used when calculating ADI and ADI-3 using
the 2010 5-year estimates</p>
</dd> <dt>set6</dt><dd><p>Logical, indicating the variables to
be used when calculating ADI and ADI-3 using the 2008 or 2009 1-year
estimates</p>
</dd> <dt>set7</dt><dd><p>Logical, indicating the variables to be used when
calculating ACS estimates not previously mentioned, including the 2009
5-year estimates</p>
</dd> <dt>dec2010</dt><dd><p>Logical, indicating the variables to use
in conjunction with the few actual 2010 decennial census variables when
running <code><a href="#topic+get_adi">get_adi</a>(year = 2010, dataset = "decennial")</code></p>
</dd></dl>

<p>Note that not all year/estimate combinations are currently supported by the
census API and/or <code>tidycensus</code>, and some may never be supported.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+decennial_vars">decennial_vars</a></code>
</p>

<hr>
<h2 id='append_dissimilarities'>Append list columns of Gower's distances and sampling weights to a data frame</h2><span id='topic+append_dissimilarities'></span>

<h3>Description</h3>

<p>Runs <code><a href="cluster.html#topic+daisy">cluster::daisy()</a></code> on a data frame, breaks up the columns of the
resulting dissimilarity into a list, and adds this list to the data frame as
a list column. In addition or instead, it adds a transformed version of the
dissimilarity list, which can be used as sampling weights.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>append_dissimilarities(
  data,
  cols = dplyr::everything(),
  dissimilarity_measure_name = "dissimilarities",
  sampling_weight_name = "sampling_weights",
  metric = "gower",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="append_dissimilarities_+3A_data">data</code></td>
<td>
<p>A data frame that has at least one row and at least one column.</p>
</td></tr>
<tr><td><code id="append_dissimilarities_+3A_cols">cols</code></td>
<td>
<p>&lt;<code><a href="dplyr.html#topic+dplyr_tidy_select">tidy-select</a></code>&gt; Columns of <code>data</code> on
which to calculate dissimilarities.</p>
</td></tr>
<tr><td><code id="append_dissimilarities_+3A_dissimilarity_measure_name">dissimilarity_measure_name</code>, <code id="append_dissimilarities_+3A_sampling_weight_name">sampling_weight_name</code></td>
<td>
<p>The names of the list
columns that will be added to <code>data</code>. Cannot match the names of the
existing columns. Make one of them <code>NULL</code> if you don't want it added, but
they can't both be <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="append_dissimilarities_+3A_metric">metric</code>, <code id="append_dissimilarities_+3A_...">...</code></td>
<td>
<p>Passed to <code><a href="cluster.html#topic+daisy">cluster::daisy()</a></code>. Use <code>...</code> at your own risk.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All columns are fed to <code><a href="cluster.html#topic+daisy">cluster::daisy()</a></code> by default, but the user can select
which ones using the <code>cols</code> argument.
</p>
<p>Once the full dissimilarity matrix is obtained, the columns are separated
into a list via <code><a href="base.html#topic+asplit">asplit()</a></code> and appended to <code>data</code>. Each element of the list
is therefore a <a href="base.html#topic+double">double</a> vector with <code><a href="base.html#topic+nrow">nrow</a></code><code>(data)</code> values. For any given
row, its dissimilarity vector represents the row's dissimilarity to every
row.
</p>
<p>The optional/alternative &quot;sampling weight&quot; column is a transformed version of
the dissimilarity list: 1. All dissimilarity measures of 0 are replaced with
the next smallest dissimilarity value in the vector. In effect, this means
that a row's dissimilarity to itself (and any rows identical to it) is
replaced with the dissimilarity value of its next most similar row.
(Exception: if all elements are 0, all of them are replaced with 1). 2. Then
the reciprocal of each element is taken so that larger values represent
greater similarity. 3. Each element is divided by the sum of the vector,
which standardizes the elements to add to 1.
</p>
<p>Requires the package <code>cluster</code> to be installed.
</p>


<h3>Value</h3>

<p>A data frame, specifically the <code>data</code> argument with one or two more
columns added to the end.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Running this on all mtcars columns
mtdissim &lt;- append_dissimilarities(mtcars)

# Therefore, these numbers represent the dissimilarity of each row to the
# fifth row:
mtdissim$dissimilarities[[5]]

# And these are the dissimilarities' corresponding sampling weights:
mtdissim$sampling_weights[[5]]

# Now we run it on mtcars without the wt and qsec colums so that we purposely
# end up with some duplicate rows (the first and second).
mtdissim_dup &lt;- append_dissimilarities(mtcars, cols = !c(wt, qsec))

# These represent each row's dissimilarity to its first row.
# Since we specifically told it not to take wt and qsec into account, the
# first two rows are identical. Therefore, both values are zero.
mtdissim_dup$dissimilarities[[1]]

# Here are the corresponding sampling weights. Notice that the first two
# rows' sampling weights are the same as the sampling weight of row 30, which
# is the next most similar row.
mtdissim_dup$sampling_weights[[1]]
</code></pre>

<hr>
<h2 id='calculate_adi'>Calculate ADI and ADI-3 from census data.</h2><span id='topic+calculate_adi'></span>

<h3>Description</h3>

<p>Calculate the Area Deprivation Index and Berg Indices (ADI-3) using decennial
US census or American Community Survey (ACS) variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculate_adi(data_raw, keep_indicators = FALSE, seed = NA)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calculate_adi_+3A_data_raw">data_raw</code></td>
<td>
<p>A data frame, <code><a href="tibble.html#topic+tibble">tibble</a></code>, or <code><a href="sf.html#topic+sf">sf</a></code>
object ultimately obtained via <code><a href="tidycensus.html#topic+get_acs">tidycensus::get_acs()</a></code> or
<code><a href="tidycensus.html#topic+get_decennial">tidycensus::get_decennial()</a></code>, having the data necessary to compute the
indicators of the ADI and ADI-3.
</p>
<p>The columns of his data frame must be named according to the elements of
the <code>variable</code> column in <code><a href="#topic+acs_vars">acs_vars</a></code> and/or <code><a href="#topic+decennial_vars">decennial_vars</a></code>.
</p>
<p>The easiest way to obtain data like this is to run
<code><a href="#topic+get_adi">get_adi</a></code><code>(raw_data_only = TRUE)</code>.</p>
</td></tr>
<tr><td><code id="calculate_adi_+3A_keep_indicators">keep_indicators</code></td>
<td>
<p>Logical indicating whether or not to keep the
component indicators of the ADI and ADI-3 as well as the original census
variables used to calculate them. Defaults to <code>FALSE</code>.
</p>
<p>See <code><a href="#topic+acs_vars">acs_vars</a></code> and <code><a href="#topic+decennial_vars">decennial_vars</a></code> for basic descriptions of the raw
census variables.</p>
</td></tr>
<tr><td><code id="calculate_adi_+3A_seed">seed</code></td>
<td>
<p>Passed to the <code>seed</code> argument of <code><a href="mice.html#topic+mice">mice::mice()</a></code> when imputation
is needed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function <code><a href="#topic+get_adi">get_adi()</a></code> calls this function by default as its final step,
but some users may want to calculate ADI and ADI-3 values for different
combinations of areas in a given data set. <code><a href="#topic+get_adi">get_adi</a></code><code>(raw_data_only = TRUE)</code> returns the raw census data used to calculate ADI and ADI-3. Users may
select subsets of such a data set and pipe them into <code>calculate_adi()</code>.
</p>
<p>This function discerns what kind of census data that <code>data</code> contains (ACS, or
one of the decennial censuses) by checking for the existence of key variables
unique to each kind of data set.
</p>
<p>Areas listed as having zero households are excluded from ADI and ADI-3
calculation. Their resulting ADIs and ADI-3s will be <code>NA</code>.
</p>
<p>If calling this function directly (i.e., not via <code><a href="#topic+get_adi">get_adi()</a></code>) on a data set
that contains median household income (B19013_001) and does not contain
median family income (B19113_001), median household income will be used in
place of median family income, with a <code>warning()</code>. See the &quot;Missingness and
imputation&quot; section of <code><a href="#topic+get_adi">get_adi()</a></code>.
</p>


<h3>Value</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble</a></code> (or <code><a href="sf.html#topic+sf">sf</a></code>) with the same number
of rows as <code>data</code>. Columns include <code>GEOID</code>, <code>NAME</code>, <code>ADI</code>, <code style="white-space: pre;">&#8288;Financial Strength&#8288;</code>, <code>Economic_Hardship_and_Inequality</code>, and
<code>Educational_Attainment</code>. Further columns containing the indicators and raw
values will also be present if <code>keep_indicators = TRUE</code>.
</p>


<h3>See Also</h3>

<p>For more information, see <code><a href="#topic+get_adi">get_adi()</a></code>, especially the sections
titled <strong>ADI and ADI-3 factor loadings</strong> and <strong>Missingness and
imputation</strong>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Wrapped in \dontrun{} because these examples require a Census API key.

raw_census &lt;- get_adi("state", year = 2017, raw_data_only = TRUE)

calculate_adi(raw_census)

calculate_adi(raw_census, keep_indicators = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='census_api_key'>Census API Key installer</h2><span id='topic+census_api_key'></span>

<h3>Description</h3>

<p>See <code><a href="tidycensus.html#topic+census_api_key">tidycensus::census_api_key()</a></code>.
</p>

<hr>
<h2 id='decennial_age_sex_race_ethnicity_vars'>Decennial Census variables for age, sex, race, and ethnicity</h2><span id='topic+decennial_age_sex_race_ethnicity_vars'></span>

<h3>Description</h3>

<p>A three-column data set of the Decennial Census variable names, their
descriptions, and their decennial census year. Contains counts of various
subdivisions of the population based on age, sex, race, and ethnicity.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>decennial_age_sex_race_ethnicity_vars
</code></pre>


<h3>Format</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble</a></code> with 130 rows and 3 variables:
</p>
 <dl>
<dt>year</dt><dd><p>The year of the decennial census with which the
variable is associated.</p>
</dd> <dt>variable</dt><dd><p>ACS variable name</p>
</dd>
<dt>description</dt><dd><p>A description of who is present in the count</p>
</dd></dl>



<h3>Details</h3>

<p>Currently, the 2000 and 2010 Decennial Census variables are available.
</p>
<p>This data set is used to support <code><a href="#topic+synthetic_population">synthetic_population</a>()</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+acs_age_sex_race_ethnicity_vars">acs_age_sex_race_ethnicity_vars</a></code>
</p>

<hr>
<h2 id='decennial_vars'>Decennial census variable names for ADI calculation</h2><span id='topic+decennial_vars'></span>

<h3>Description</h3>

<p>A dataset of the decennial census variable names used to calculate the Area
Deprivation Index (ADI) and the Berg Indices (ADI-3).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>decennial_vars
</code></pre>


<h3>Format</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble</a></code> with 137 rows and 4 variables:
</p>
 <dl>
<dt>variable</dt><dd><p>Decennial census variable name</p>
</dd>
<dt>sumfile</dt><dd><p>The summary tape file of the decennial census variable</p>
</dd>
<dt>year</dt><dd><p>The year of the decennial census variable</p>
</dd>
<dt>description</dt><dd><p>Brief description of the data the variable contains</p>
</dd></dl>



<h3>See Also</h3>

<p><code><a href="#topic+acs_vars">acs_vars</a></code>
</p>

<hr>
<h2 id='get_adi'>Get Area Deprivation Index (ADI) and Berg Indices (ADI-3)</h2><span id='topic+get_adi'></span>

<h3>Description</h3>

<p>Returns the ADI and ADI-3 of user-specified areas.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_adi(
  geography,
  state = NULL,
  county = NULL,
  geoid = NULL,
  zcta = NULL,
  year,
  dataset = c("acs5", "acs3", "acs1", "decennial"),
  geometry = FALSE,
  keep_indicators = FALSE,
  raw_data_only = FALSE,
  cache_tables = TRUE,
  key = NULL,
  seed = NA,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_adi_+3A_geography">geography</code></td>
<td>
<p>A character string denoting the level of census geography
whose ADIs and ADI-3s you'd like to obtain. Must be one of <code>c("state", "county", "tract", "block group", "zcta")</code>. Required.</p>
</td></tr>
<tr><td><code id="get_adi_+3A_state">state</code></td>
<td>
<p>A character string specifying states whose ADI and ADI-3 data is
desired. Defaults to <code>NULL</code>. Can contain full state names, two-letter state
abbreviations, or a two-digit FIPS code/GEOID (must be a vector of strings,
so use quotation marks and leading zeros if necessary). Must be left as
<code>NULL</code> if using the <code>geoid</code> or <code>zcta</code> parameter.</p>
</td></tr>
<tr><td><code id="get_adi_+3A_county">county</code></td>
<td>
<p>A vector of character strings specifying the counties whose ADI
and ADI-3 data you're requesting. Defaults to <code>NULL</code>. If not <code>NULL</code>, the
<code>state</code> parameter must have a length of 1. County names and three-digit
FIPS codes are accepted (must contain strings, so use quotation marks and
leading zeros if necessary). Must be blank if using the <code>geoid</code> parameter.</p>
</td></tr>
<tr><td><code id="get_adi_+3A_geoid">geoid</code></td>
<td>
<p>A character vector of GEOIDs (use quotation marks and leading
zeros). Defaults to <code>NULL</code>. Must be blank if <code>state</code>, <code>county</code>, or <code>zcta</code>
is used. Can contain different levels of geography (see details).</p>
</td></tr>
<tr><td><code id="get_adi_+3A_zcta">zcta</code></td>
<td>
<p>A character vector of ZCTAs or the leading digit(s) of ZCTAs (use
quotation marks and leading zeros). Defaults to <code>NULL</code>. Must be blank if
<code>state</code>, <code>county</code>, or <code>geoid</code> is used.
</p>
<p>Strings under 5 digits long will yield all ZCTAs that begin with those
digits.
</p>
<p>Requires that <code>geography = "zcta"</code>. If <code>geography = "zcta"</code> and <code>zcta = NULL</code>, all ZCTAs in the US will be used.</p>
</td></tr>
<tr><td><code id="get_adi_+3A_year">year</code></td>
<td>
<p>Single integer specifying the year of US Census data to use.</p>
</td></tr>
<tr><td><code id="get_adi_+3A_dataset">dataset</code></td>
<td>
<p>The data set used to calculate ADIs and ADI-3s. Must be one of
<code>c("acs5", "acs3", "acs1", "decennial")</code>, denoting the 5-, 3-, and 1-year
ACS along with the decennial census. Defaults to <code>"acs5"</code>.
</p>
<p>When <code>dataset = "decennial"</code>, <code>year</code> must be in <code>c(1990, 2000, 2010)</code>.
</p>
<p>The 2010 decennial census did not include the long-form questionnaire used
in the 1990 and 2000 censuses, so this function uses the 5-year estimates
from the 2010 ACS to supply the data not included in the 2010 decennial
census. In fact, the only 2010 decennial variables used are H003002,
H014002, P020002, and P020008.
</p>
<p>Important: data are not always available depending on the level of
geography and data set chosen. See
<a href="https://www.census.gov/programs-surveys/acs/guidance/estimates.html">https://www.census.gov/programs-surveys/acs/guidance/estimates.html</a>.</p>
</td></tr>
<tr><td><code id="get_adi_+3A_geometry">geometry</code></td>
<td>
<p>Logical value indicating whether or not shapefile data should
be included in the result, making the result an <code><a href="sf.html#topic+sf">sf</a></code> object
instead of a plain <code><a href="tibble.html#topic+tibble">tibble</a></code>. Defaults to <code>FALSE</code>.
</p>
<p>The shapefile data that is returned is somewhat customizable by passing
certain arguments along to the <code>tidycensus</code> functions via <code>...</code>.</p>
</td></tr>
<tr><td><code id="get_adi_+3A_keep_indicators">keep_indicators</code></td>
<td>
<p>Logical value indicating whether or not the resulting
<code><a href="tibble.html#topic+tibble">tibble</a></code> or <code><a href="sf.html#topic+sf">sf</a></code> object will contain the
socioeconomic measures used to calculate the ADI and ADI-3 values. Defaults
to <code>FALSE</code>.
</p>
<p>See <code><a href="#topic+acs_vars">acs_vars</a></code> and <code><a href="#topic+decennial_vars">decennial_vars</a></code> for basic descriptions of the raw
census variables.</p>
</td></tr>
<tr><td><code id="get_adi_+3A_raw_data_only">raw_data_only</code></td>
<td>
<p>Logical, indicating whether or not to skip calculation
of the ADI and ADI-3 and only return the census variables. Defaults to
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="get_adi_+3A_cache_tables">cache_tables</code></td>
<td>
<p>The plural version of the <code>cache_table</code> argument in
<code><a href="tidycensus.html#topic+get_acs">tidycensus::get_acs()</a></code> or <code><a href="tidycensus.html#topic+get_decennial">tidycensus::get_decennial()</a></code>. (<code>get_adi()</code>
calls the necessary <code>tidycensus</code> function many times in order to return
ADIs and ADI-3s, so many tables are cached if <code>TRUE</code>). Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="get_adi_+3A_key">key</code></td>
<td>
<p>Your Census API key as a character string. Obtain one at
<a href="http://api.census.gov/data/key_signup.html">http://api.census.gov/data/key_signup.html</a>. Defaults to <code>NULL</code>. Not
necessary if you have already loaded your key with <code><a href="#topic+census_api_key">census_api_key()</a></code>.</p>
</td></tr>
<tr><td><code id="get_adi_+3A_seed">seed</code></td>
<td>
<p>Passed to <code><a href="#topic+calculate_adi">calculate_adi()</a></code>.</p>
</td></tr>
<tr><td><code id="get_adi_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed onto <code><a href="tidycensus.html#topic+get_acs">tidycensus::get_acs()</a></code> or
<code><a href="tidycensus.html#topic+get_decennial">tidycensus::get_decennial()</a></code>. These must all be named. Must not match any
of the <code>tidycensus</code> formal arguments that <code>sociome</code> needs to set
explicitly.
</p>
<p>This may be found to be helpful when setting <code>geometry = TRUE</code>, since the
<code>tidycensus</code> functions pass <code>...</code> onto the appropriate <code>tigris</code> function
(namely, one of <code><a href="tigris.html#topic+states">tigris::states()</a></code>, <code><a href="tigris.html#topic+counties">tigris::counties()</a></code>,
<code><a href="tigris.html#topic+tracts">tigris::tracts()</a></code>, <code><a href="tigris.html#topic+block_groups">tigris::block_groups()</a></code>, or <code><a href="tigris.html#topic+zctas">tigris::zctas()</a></code>,
according to the the value of <code>geography</code>). This enables the user to
somewhat customize the shapefile data obtained.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns a <code><a href="tibble.html#topic+tibble">tibble</a></code> or <code><a href="sf.html#topic+sf">sf</a></code> object of the Area
Deprivation Indices (ADIs) and Berg Indices (ADI-3s) of user-specified
locations in the United States, utilizing US Census data. Locations that are
listed as having zero households are excluded from ADI and ADI-3 calculation:
their ADI and ADI-3 values will be <code>NA</code>.
</p>


<h3>Value</h3>

<p>If <code>geometry = FALSE</code>, (the default) a <code><a href="tibble.html#topic+tibble">tibble</a></code>. If
<code>geometry = TRUE</code> is specified, an <code><a href="sf.html#topic+sf">sf</a></code>.
</p>


<h3>Reference area</h3>

<p><strong>The concept of &quot;reference area&quot; is important to
understand when using this function.</strong> The algorithm that produced the
original ADIs employs factor analysis. As a result, the ADI is a relative
measure; the ADI of a particular location is dynamic, varying depending on
which other locations were supplied to the algorithm. In other words, <strong>ADI
will vary depending on the reference area you specify.</strong>
</p>
<p>For example, the ADI of Orange County, California is <em>x</em> when calculated
alongside all other counties in California, but it is <em>y</em> when calculated
alongside all counties in the US. The <code>get_adi()</code> function enables the user
to define a <strong>reference area</strong> by feeding a vector of GEOIDs to its <code>geoid</code>
parameter (or alternatively for convenience, states and/or counties to
<code>state</code> and <code>county</code>). The function then gathers data from those specified
locations and performs calculations using their data alone.
</p>
<p>The Berg Indices (ADI-3) were developed with this principle of relativity
in mind, and as such there is no set of seminal ADI-3 values. Thus, the
terms &quot;Berg Indices&quot; and &quot;ADI-3&quot; refer more nearly to any values generated
using the algorithm employed in this package.
</p>
<p>Areas listed as having zero households are excluded from the reference
area, and their ADI and ADI-3 values will be <code>NA</code>.
</p>


<h3>The <code>geoid</code> parameter</h3>

<p>Elements of <code>geoid</code> can represent different
levels of geography, but they all must be either 2 digits (for states), 5
digits (for counties), 11 digits (for tracts), or 12 digits (for block
groups). It must contain character strings, so use quotation marks as well
as leading zeros where applicable.
</p>


<h3>ADI and ADI-3 factor loadings</h3>

<p>The returned
<code><a href="tibble.html#topic+tibble">tibble</a></code> or <code><a href="sf.html#topic+sf">sf</a></code> is of class <code>adi</code>, and it
contains an attribute called <code>loadings</code>, which contains a tibble of the PCA
loadings of each factor. This is accessible through
<code><a href="base.html#topic+attr">attr</a></code><code style="white-space: pre;">&#8288;(name_of_tibble, "loadings")&#8288;</code>.
</p>


<h3>Missingness and imputation</h3>

<p>While this function allows flexibility
in specifying reference areas (see the <strong>Reference area</strong> section above),
data from the US Census are masked for sparsely populated places, resulting
in many missing values.
</p>
<p>Imputation is attempted via <code><a href="mice.html#topic+mice">mice::mice</a></code><code style="white-space: pre;">&#8288;(m = 1, maxit = 50, method = "pmm", seed = seed)&#8288;</code>. If imputation is unsuccessful, an error is thrown,
but the dataset of indicators on which imputation was unsuccessful is
available via <code><a href="rlang.html#topic+last_error">rlang::last_error()</a></code><code style="white-space: pre;">&#8288;$adi_indicators&#8288;</code> and the raw census
data are available via <code><a href="rlang.html#topic+last_error">rlang::last_error()</a></code><code style="white-space: pre;">&#8288;$adi_raw_data&#8288;</code>. The former
excludes areas with zero households, but the latter includes them.
</p>
<p>One of the indicators of both ADI and the Financial Strength component of
ADI-3 is median family income, but methodological issues with the 2015 and
2016 ACS have rendered this variable unavailable at the block group level
for those years. When requested, this function will use median household
income in its place, with a <code>warning()</code>. See
<a href="https://www.census.gov/programs-surveys/acs/technical-documentation/user-notes/2016-01.html">https://www.census.gov/programs-surveys/acs/technical-documentation/user-notes/2016-01.html</a>.
</p>


<h3>API-related error handling</h3>

<p>Depending on user input, this function
may call its underlying functions (<code><a href="tidycensus.html#topic+get_acs">tidycensus::get_acs()</a></code> or
<code><a href="tidycensus.html#topic+get_decennial">tidycensus::get_decennial()</a></code>) many times in order to accommodate their
behavior. When these calls are broken up by state or by state and county, a
message is printed indicating the state or state and county whose data is
being pulled. These calls are wrapped in
<code><a href="purrr.html#topic+insistently">purrr::insistently</a></code><code>(</code><code><a href="purrr.html#topic+rate-helpers">purrr::rate_delay()</a></code><code style="white-space: pre;">&#8288;, quiet = FALSE)&#8288;</code>, meaning
that they are attempted over and over until success, and <code>tidycensus</code> error
messages are printed as they occur.
</p>


<h3>Warnings and disclaimers</h3>

<p>Please note that this function calls data
from US Census servers, so execution may take a long time depending on the
user's internet connection and the amount of data requested.
</p>
<p>For advanced users, if changing the <code>dataset</code> argument, be sure to know the
advantages and limitations of the 1-year and 3-year ACS estimates. See
<a href="https://www.census.gov/programs-surveys/acs/guidance/estimates.html">https://www.census.gov/programs-surveys/acs/guidance/estimates.html</a> for
details.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Wrapped in \dontrun{} because all these examples take &gt;5 seconds
# and require a Census API key.

# ADI of all census tracts in Cuyahoga County, Ohio
get_adi(geography = "tract", year = 2017, state = "OH", county = "Cuyahoga")

# ADI and ADI-3 of all counties in Connecticut, using the 2014 ACS1 survey.
# Returns a warning because there are only 8 counties.
# A minimum of 30 locations is recommended.
get_adi(geography = "county", state = "CT", year = 2014, dataset = "acs1")

# Areas with zero households will have an ADI and ADI-3 of NA:
queens &lt;-
  get_adi(
    "tract",
    year = 2017,
    state = "NY",
    county = "Queens",
    keep_indicators = TRUE,
    geometry = TRUE
  )
queens %&gt;%
  dplyr::as_tibble() %&gt;%
  dplyr::select(GEOID, NAME, ADI, households = B11005_001) %&gt;%
  dplyr::filter(is.na(ADI) | households == 0) %&gt;%
  print(n = Inf)

# geoid argument allows for highly customized reference populations.
# ADI of all census tracts in the GEOIDs stored in "delmarva" below:
# Notice the mixing of state- ("10") and county-level GEOIDs (the others).
delmarva_geoids &lt;- c("10", "51001", "51131", "24015", "24029", "24035",
                     "24011", "24041", "24019", "24045", "24039", "24047")
delmarva &lt;-
  get_adi(
    geography = "tract",
    geoid = delmarva_geoids,
    dataset = "acs5",
    year = 2009,
    geometry = TRUE
  )

# Demonstration of geom_sf() integration:
require(ggplot2)

# The na.value argument changes the fill of NA ADI areas.
delmarva %&gt;% ggplot() + geom_sf(aes(fill = ADI), lwd = 0)

# Setting direction = -1 makes the less deprived areas the lighter ones
# The argument na.value changes the color of zero-household areas
queens %&gt;%
  ggplot() +
  geom_sf(aes(fill = ADI), lwd = 0) +
  scale_fill_viridis_c(na.value = "red", direction = -1)

# Obtain factor loadings:
attr(queens, "loadings")

## End(Not run)
</code></pre>

<hr>
<h2 id='get_areas_near_coordinates'>Make a tibble of census areas closest to a user-specified center</h2><span id='topic+get_areas_near_coordinates'></span><span id='topic+areas_in_radius'></span><span id='topic+closest_n_areas'></span><span id='topic+closest_population'></span>

<h3>Description</h3>

<p>Returns a <code><a href="tibble.html#topic+tibble">tibble</a></code> containing the census areas whose
centers of population are closest to some user-specified center. To specify
the center, the user can manually enter longitude/latitude coordinates or use
the helper function <code><a href="#topic+lon_lat_from_area">lon_lat_from_area()</a></code> to automatically grab the
longitude/latitude coordinates of the center of population of an area. The
cutoff point for how many areas will be return depends on the function used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>areas_in_radius(
  geography = c("state", "county", "tract", "block group"),
  center = lon_lat_from_area(state = "DC"),
  radius = 5,
  units = "miles",
  measure_from = "center of population",
  year = 2020,
  distance_fun = geosphere::distVincentyEllipsoid,
  batch_size = 50L
)

closest_n_areas(
  geography = c("state", "county", "tract", "block group"),
  center = lon_lat_from_area(state = "DC"),
  n = 50,
  measure_from = "center of population",
  year = 2020,
  distance_fun = geosphere::distVincentyEllipsoid,
  units = NULL,
  batch_size = 50L
)

closest_population(
  geography = c("state", "county", "tract", "block group"),
  center = lon_lat_from_area(state = "DC"),
  population = 1e+06,
  measure_from = "center of population",
  year = 2020,
  distance_fun = geosphere::distVincentyEllipsoid,
  units = NULL,
  batch_size = 50L
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_areas_near_coordinates_+3A_geography">geography</code></td>
<td>
<p>The type of census areas that the resulting table will
contain. One of <code>c("state", "county", "tract", "block group")</code>.</p>
</td></tr>
<tr><td><code id="get_areas_near_coordinates_+3A_center">center</code></td>
<td>
<p>The longitude/latitude coordinates of the center of the circle.
A double vector of length 2 whose elements are finite numbers. Passed to
the <code>y</code> argument of <code><a href="geosphere.html#topic+distm">geosphere::distm()</a></code>.
</p>
<p>The first element is the longitude coordinate (positive for west, negative
for east). The second element is the latitude coordinate (positive for
north, negative for south).
</p>
<p>The convenience function <code><a href="#topic+lon_lat_from_area">lon_lat_from_area()</a></code> can be used to obtain the
longitude/latitude coordinates of the center of population of a
user-specified census area.
</p>
<p>Defaults to the center of population of the District of Columbia according
to the 2020 decennial census.</p>
</td></tr>
<tr><td><code id="get_areas_near_coordinates_+3A_radius">radius</code></td>
<td>
<p>A single, non-negative number specifying the radius of the
circle. Defaults to 5.</p>
</td></tr>
<tr><td><code id="get_areas_near_coordinates_+3A_units">units</code></td>
<td>
<p>A single string specifying the units of the resulting <code>distance</code>
column. If <code>NULL</code>, the <code>units</code> package does not need to be installed, and
units will be meters. Otherwise, this will be passed to the <code>value</code>
argument of <code><a href="units.html#topic+units">units::set_units</a></code><code>(mode = "standard")</code>.
</p>
<p>For <code>areas_in_radius()</code>, this also used for the units of <code>radius</code>.</p>
</td></tr>
<tr><td><code id="get_areas_near_coordinates_+3A_measure_from">measure_from</code></td>
<td>
<p>Currently can only be <code>"center of population"</code>, the
default.</p>
</td></tr>
<tr><td><code id="get_areas_near_coordinates_+3A_year">year</code></td>
<td>
<p>Must be 2020, 2010, or 2000. Defaults to 2020.</p>
</td></tr>
<tr><td><code id="get_areas_near_coordinates_+3A_distance_fun">distance_fun</code></td>
<td>
<p>Passed to the <code>fun</code> argument of <code><a href="geosphere.html#topic+distm">geosphere::distm()</a></code>.
Defaults to <code><a href="geosphere.html#topic+distVincentyEllipsoid">geosphere::distVincentyEllipsoid</a></code>, which results in the most
accurate measurement but is also the slowest.</p>
</td></tr>
<tr><td><code id="get_areas_near_coordinates_+3A_batch_size">batch_size</code></td>
<td>
<p>The number of distances calculated in each iterative call
to <code><a href="geosphere.html#topic+distm">geosphere::distm()</a></code>. When the request is satisfied, these functions
stop calculating distances in order to prevent potentially hundreds of
thousands of unnecessary calculations. Defaults to 50.</p>
</td></tr>
<tr><td><code id="get_areas_near_coordinates_+3A_n">n</code></td>
<td>
<p>A single positive integer specifying how many of the areas closest
to <code>center</code> should be gathered. Defaults to 50.</p>
</td></tr>
<tr><td><code id="get_areas_near_coordinates_+3A_population">population</code></td>
<td>
<p>A single positive integer specifying the target total
population of the areas returned. See <strong>Details</strong>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>areas_in_radius()</code> returns all areas whose centers of population are within
the user-specified <code>radius</code> around <code>center</code>.
</p>
<p><code>closest_n_areas()</code> returns the top <code>n</code> areas whose centers of population are
closest areas to <code>center</code>.
</p>
<p>Conceptually, <code>closest_population()</code> sequentially gathers the next closest
area to <code>center</code> until the total population of the areas meets or exceeds
<code>population</code>.
</p>
<p>Distances are determined with <code><a href="geosphere.html#topic+distm">geosphere::distm()</a></code>.
</p>
<p>Requires the packages <code>USpopcenters</code> and <code>geosphere</code> to be installed.
Requires the <code>units</code> to be installed unless <code>units = NULL</code>.
</p>
<p>Centers of population are based on the decennial census data. Only states,
counties, tracts, and block groups are currently supported. See the
documentation of the <code>USpopcenters</code> package and
<a href="https://www.census.gov/geographies/reference-files/time-series/geo/centers-population.html">https://www.census.gov/geographies/reference-files/time-series/geo/centers-population.html</a>
for more information.
</p>


<h3>Value</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble</a></code> with each of the columns found in the
corresponding <code>USpopcenters</code> table, with two columns appended:
</p>
<p><code>geoid</code> - all FIPS code columns combined with <code><a href="base.html#topic+paste0">paste0()</a></code>.
</p>
<p><code>distance</code> - the number of <code>units</code> the area's <code>LONGITUDE</code>/<code>LATITUDE</code> center
of population is away from the coordinates given in <code>center</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+lon_lat_from_area">lon_lat_from_area()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (requireNamespace("USpopcenters", quietly = TRUE) &amp;&amp;
  requireNamespace("geosphere", quietly = TRUE)) {

# All states whose centers of population are within 300 kilometers of the
# center of population of New York County, New York (i.e, Manhattan):
areas_in_radius(
  geography = "state",
  center = lon_lat_from_area(state = "NY", county = "New York"),
  radius = 300,
  units = "km"
)

# The four census tracts whose centers of population are closest to the
# Four Corners (distance column is in meters due to setting units = NULL):
closest_n_areas("tract", center = c(-109.0452, 36.9991), n = 4, units = NULL)

# The counties closest to center of population of Kauai County, Hawaii whose
# total population reaches 3 million people:
closest_population(
  geography = "county",
  center = lon_lat_from_area("15007"),
  population = 3e6,
  units = "barleycorns"
)

}
</code></pre>

<hr>
<h2 id='get_geoids'>Obtain GEOIDs of areas</h2><span id='topic+get_geoids'></span>

<h3>Description</h3>

<p>Returns a <code><a href="tibble.html#topic+tibble">tibble</a></code> or <code><a href="sf.html#topic+sf">sf</a></code> of GEOIDs, names, and
decennial census population of user-specified locations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_geoids(
  geography,
  state = NULL,
  county = NULL,
  geoid = NULL,
  year = 2010,
  geometry = FALSE,
  cache_tables = TRUE,
  key = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_geoids_+3A_geography">geography</code></td>
<td>
<p>A character string denoting the level of census geography
whose GEOIDs you'd like to obtain. Must be one of <code>c("state", "county", "tract", "block group", "block")</code>.
</p>
<p>Note that block-level data cannot be obtained from 1990 and 2000 decennial
census data due to limitations in <code><a href="tidycensus.html#topic+get_decennial">tidycensus::get_decennial()</a></code>. Whereas
block-level 2010 decennial census data are available, block-level ADI and
ADI-3 cannot be calculated due to the removal of the long-form
questionnaire from the 2010 decennial census.</p>
</td></tr>
<tr><td><code id="get_geoids_+3A_state">state</code>, <code id="get_geoids_+3A_county">county</code>, <code id="get_geoids_+3A_geoid">geoid</code>, <code id="get_geoids_+3A_geometry">geometry</code>, <code id="get_geoids_+3A_cache_tables">cache_tables</code>, <code id="get_geoids_+3A_key">key</code></td>
<td>
<p>See the descriptions of
the arguments in <code><a href="#topic+get_adi">get_adi()</a></code>.</p>
</td></tr>
<tr><td><code id="get_geoids_+3A_year">year</code></td>
<td>
<p>Single integer specifying the year of US Census data to use.
Defaults to 2010. Based on this year, data from the most recent decennial
census will be returned (specifically, <code style="white-space: pre;">&#8288;year &lt;- &#8288;</code><code><a href="base.html#topic+floor">floor</a></code><code>(year / 10) * 10</code> is run).</p>
</td></tr>
<tr><td><code id="get_geoids_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to
<code><a href="tidycensus.html#topic+get_decennial">tidycensus::get_decennial()</a></code>. Use at your own risk.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This allows users to quickly obtain all GEOIDs in a specified location at a
specific level of geography without having to manually look them up somewhere
else.
</p>
<p>This facilitates calls to <code><a href="#topic+get_adi">get_adi()</a></code> that involve somewhat complicated
reference areas.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Wrapped in \dontrun{} because it requires a Census API key.

# Get all tract GEOIDs for Manhattan
tracts &lt;- get_geoids(geography = "tract", state = "New York", county = "New York")
tracts

# Get all block GEOIDs for the fifth tract on that list
get_geoids(geography = "block", geoid = tracts$GEOID[5])

## End(Not run)
</code></pre>

<hr>
<h2 id='lon_lat_from_area'>Grab the longitude/latitude of the center of population of a census area</h2><span id='topic+lon_lat_from_area'></span>

<h3>Description</h3>

<p>The user specifies a census area, and the function returns the
longitude/latitude coordinates of the area's center of population according
to the decennial census.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lon_lat_from_area(geoid = NULL, state = NULL, county = NULL, year = 2020)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="lon_lat_from_area_+3A_geoid">geoid</code></td>
<td>
<p>A single string specifying the geoid of a census area. Must be
2, 5, 11, or 12 digits. Must be <code>NULL</code> if <code>state</code> is not <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="lon_lat_from_area_+3A_state">state</code></td>
<td>
<p>A single string containing the FIPS code, two-letter
abbreviation, or full state name of a US state or the District of Columbia
or Puerto Rico. Not case sensitive. Must be <code>NULL</code> if <code>geoid</code> is not
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="lon_lat_from_area_+3A_county">county</code></td>
<td>
<p>A single string specifying the name of a county in <code>state</code> or
the three- or five-digit GEOID of a county in <code>state</code>. Not case sensitive.
If entering a county name, it must match the beginning of only one of the
county names in <code>state</code>. If entering a five-digit GEOID, it will throw an
error if its first two digits do not match the GEOID of <code>state</code>. Must be
<code>NULL</code> if state is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="lon_lat_from_area_+3A_year">year</code></td>
<td>
<p>One of 2020, 2010, or 2000. Defaults to 2020.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Centers of population are based on the decennial census. Only states,
counties, tracts, and block groups are currently supported. See the
documentation of the <code>USpopcenters</code> package and
<a href="https://www.census.gov/geographies/reference-files/time-series/geo/centers-population.html">https://www.census.gov/geographies/reference-files/time-series/geo/centers-population.html</a>
for more information.
</p>
<p>Requires the data package <code>USpopcenters</code> to be installed.
</p>


<h3>Value</h3>

<p>A <a href="base.html#topic+double">double</a> vector of length 2. The first element is LONGITUDE
(positive for east, negative for west). The second element is LATITUDE
(positive for north, negative for south).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+areas_in_radius">areas_in_radius()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (requireNamespace("USpopcenters", quietly = TRUE)) {
 
# The center of population of Alaska
lon_lat_from_area(state = "alAskA")

# The center of population of Cook County, Illinois.
lon_lat_from_area(state = "IL", county = "Cook")

# The center of population of some tract in Manhattan
lon_lat_from_area(geoid = "36061021600")
}
</code></pre>

<hr>
<h2 id='synthetic_population'>Create a synthetic population simulating US Census areas</h2><span id='topic+synthetic_population'></span>

<h3>Description</h3>

<p>Returns a data set of synthetic individuals based on user-specified US Census
areas. The age, sex, race, and ethnicity of each individual is probabilistic,
based on the demographics of the areas as reported in a user-specified US
Census data set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>synthetic_population(
  geography,
  state = NULL,
  county = NULL,
  geoid = NULL,
  zcta = NULL,
  year,
  dataset = c("acs5", "acs3", "acs1", "decennial"),
  geometry = FALSE,
  cache_tables = TRUE,
  max_age = 115,
  rate = 0.25,
  key = NULL,
  seed = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="synthetic_population_+3A_geography">geography</code></td>
<td>
<p>A character string denoting the level of US census geography
at which you want to create a synthetic population. Required.</p>
</td></tr>
<tr><td><code id="synthetic_population_+3A_state">state</code></td>
<td>
<p>A character string specifying states whose population you want
to synthesize. Defaults to <code>NULL</code>. Can contain full state names, two-letter
state abbreviations, or a two-digit FIPS code/GEOID (must be a vector of
strings, so use quotation marks and leading zeros if necessary). Must be
left as <code>NULL</code> if using the <code>geoid</code> or <code>zcta</code> parameter.</p>
</td></tr>
<tr><td><code id="synthetic_population_+3A_county">county</code></td>
<td>
<p>A vector of character strings specifying the counties whose
population you want to synthesize. Defaults to <code>NULL</code>. If not <code>NULL</code>, the
<code>state</code> parameter must have a length of 1. County names and three-digit
FIPS codes are accepted (must contain strings, so use quotation marks and
leading zeros if necessary). Must be blank if using the <code>geoid</code> parameter.</p>
</td></tr>
<tr><td><code id="synthetic_population_+3A_geoid">geoid</code></td>
<td>
<p>A character vector of GEOIDs (use quotation marks and leading
zeros). Defaults to <code>NULL</code>. Must be blank if <code>state</code>, <code>county</code>, or <code>zcta</code>
is used. Can contain different levels of geography (see details).</p>
</td></tr>
<tr><td><code id="synthetic_population_+3A_zcta">zcta</code></td>
<td>
<p>A character vector of ZCTAs or the leading digit(s) of ZCTAs (use
quotation marks and leading zeros). Defaults to <code>NULL</code>. Must be blank if
<code>state</code>, <code>county</code>, or <code>geoid</code> is used.
</p>
<p>Strings under 5 digits long will yield all ZCTAs that begin with those
digits.
</p>
<p>Requires that <code>geography = "zcta"</code>. If <code>geography = "zcta"</code> and <code>zcta = NULL</code>, all ZCTAs in the US will be used.</p>
</td></tr>
<tr><td><code id="synthetic_population_+3A_year">year</code>, <code id="synthetic_population_+3A_dataset">dataset</code></td>
<td>
<p>Specifies the US Census data set on which to base the
demographic profile of your synthetic population.
</p>
<p><code>year</code> must be a single integer specifying the year of US Census data to
use.The data set used to calculate ADIs and ADI-3s.
</p>
<p><code>dataset</code> must be one of <code>c("acs5", "acs3", "acs1", "decennial")</code>, denoting
the 5-, 3-, and 1-year ACS along with the decennial census. Defaults to
<code>"acs5"</code>.
</p>
<p>When <code>dataset = "decennial"</code>, <code>year</code> must be in <code>c(1990, 2000, 2010)</code>.
</p>
<p>Important: data are not always available depending on the level of
geography and data set chosen. See
<a href="https://www.census.gov/programs-surveys/acs/guidance/estimates.html">https://www.census.gov/programs-surveys/acs/guidance/estimates.html</a>.</p>
</td></tr>
<tr><td><code id="synthetic_population_+3A_geometry">geometry</code></td>
<td>
<p>Logical value indicating whether or not shapefile data should
be included in the result, making the result an <code><a href="sf.html#topic+sf">sf</a></code> object
instead of a plain <code><a href="tibble.html#topic+tibble">tibble</a></code>. Defaults to <code>FALSE</code>.
</p>
<p>The shapefile data that is returned is somewhat customizable by passing
certain arguments along to the <code>tidycensus</code> functions via <code>...</code>.</p>
</td></tr>
<tr><td><code id="synthetic_population_+3A_cache_tables">cache_tables</code></td>
<td>
<p>The plural version of the <code>cache_table</code> argument in
<code><a href="tidycensus.html#topic+get_acs">tidycensus::get_acs()</a></code> or <code><a href="tidycensus.html#topic+get_decennial">tidycensus::get_decennial()</a></code>. (<code>get_adi()</code>
calls the necessary <code>tidycensus</code> function many times in order to return
ADIs and ADI-3s, so many tables are cached if <code>TRUE</code>). Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="synthetic_population_+3A_max_age">max_age</code></td>
<td>
<p>A single integer representing the largest possible age that
can appear in the data set. Simulated age values exceeding this value will
be top-coded to this value. Defaults to 115. See details.</p>
</td></tr>
<tr><td><code id="synthetic_population_+3A_rate">rate</code></td>
<td>
<p>A single number, passed to <code><a href="stats.html#topic+Exponential">stats::rexp()</a></code> when synthesizing the
ages of the highest age bracket. Defaults to 0.25. See details.</p>
</td></tr>
<tr><td><code id="synthetic_population_+3A_key">key</code></td>
<td>
<p>Your Census API key as a character string. Obtain one at
<a href="http://api.census.gov/data/key_signup.html">http://api.census.gov/data/key_signup.html</a>. Defaults to <code>NULL</code>. Not
necessary if you have already loaded your key with <code><a href="#topic+census_api_key">census_api_key()</a></code>.</p>
</td></tr>
<tr><td><code id="synthetic_population_+3A_seed">seed</code></td>
<td>
<p>Passed onto <code><a href="base.html#topic+set.seed">set.seed()</a></code>, which is called before
probabilistically synthesizing the age values with <code><a href="base.html#topic+sample">sample()</a></code>.</p>
</td></tr>
<tr><td><code id="synthetic_population_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed onto <code><a href="tidycensus.html#topic+get_acs">tidycensus::get_acs()</a></code> or
<code><a href="tidycensus.html#topic+get_decennial">tidycensus::get_decennial()</a></code>. These must all be named. Must not match any
of the <code>tidycensus</code> formal arguments that <code>sociome</code> needs to set
explicitly.
</p>
<p>This may be found to be helpful when setting <code>geometry = TRUE</code>, since the
<code>tidycensus</code> functions pass <code>...</code> onto the appropriate <code>tigris</code> function
(namely, one of <code><a href="tigris.html#topic+states">tigris::states()</a></code>, <code><a href="tigris.html#topic+counties">tigris::counties()</a></code>,
<code><a href="tigris.html#topic+tracts">tigris::tracts()</a></code>, <code><a href="tigris.html#topic+block_groups">tigris::block_groups()</a></code>, or <code><a href="tigris.html#topic+zctas">tigris::zctas()</a></code>,
according to the the value of <code>geography</code>). This enables the user to
somewhat customize the shapefile data obtained.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns a <code><a href="tibble.html#topic+tibble">tibble</a></code> or <code><a href="sf.html#topic+sf">sf</a></code> object where each row
represents a synthetic person. Each person has an age, sex, race, and
ethnicity. The probability of what each person's age/sex/race/ethnicity will
be is equal to the proportions in their census area as reported in the
user-specified US Census data set (e.g., 2010 Decennial Census or 2017 ACS
5-year estimates). The number of rows in the data set will equal the number
of people living in the user-specified US Census areas, as reported in the
same US Census data set.
</p>


<h3>Value</h3>

<p>If <code>geometry = FALSE</code>, (the default) a <code><a href="tibble.html#topic+tibble">tibble</a></code>. If
<code>geometry = TRUE</code> is specified, an <code><a href="sf.html#topic+sf">sf</a></code>.
</p>


<h3>Synthesizing ages from US Census Data</h3>

<p>US Census data provides
counts of the number of people in different age brackets of varying widths.
The <code>age_lo</code> and <code>age_hi</code> columns in the output depict the age bracket of
each individual in the synthetic population. There is also an <code>age</code> column
that probabilistically generates a non-whole-number age within the age
bracket. A uniform distribution (via <code><a href="stats.html#topic+Uniform">stats::runif()</a></code>) guides this age
generation for all age brackets except the highest age bracket (&quot;age 85 and
over&quot; in the extant ACS and Decennial Census data). An exponential
distribution (via <code><a href="stats.html#topic+Exponential">stats::rexp()</a></code>) guides the age generation for this
highest age bracket, and the user can specify <code>rate</code> to customize the
exponential distribution that is used.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Wrapped in \dontrun{} because all these examples take &gt;5 seconds
# and require a Census API key.

# Synthetic population for Utah, using the 2019 ACS 5-year estimates:
synthetic_population(geography = "state", state = "UT", year = 2019)

# Same, but make it so that survival past age 85 is highly unlikely
# (via rate = 10), and so that 87 is the maximum possible age
synthetic_population(
  geography = "state",
  state = "UT",
  year = 2019,
  max_age = 87,
  rate = 10
)

# Synthetic population of the Delmarva Peninsula at the census tract level,
# using 2000 Decennial Census data
synthetic_population(
  geography = "tract",
  geoid = 
    # This two-digit GEOID is the state of Delaware.
    c("10",
    
    # These five-digit GEOIDs are specific counties in Virginia and Maryland
      "51001", "51131", "24015", "24029", "24035", "24011", "24041", "24019",
      "24045", "24039", "24047"),
  year = 2000,
  dataset = "decennial"
)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
