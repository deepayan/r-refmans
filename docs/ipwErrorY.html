<!DOCTYPE html><html><head><title>Help for package ipwErrorY</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ipwErrorY}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ipwErrorY-package'>
<p>Inverse Probability Weighted (IPW) Estimation of Average Treatment Effect (ATE) with Misclassified Binary Outcome</p></a></li>
<li><a href='#Est2Replicates'><p>Estimation of ATE with Two Replicates</p></a></li>
<li><a href='#EstValidation'><p>Estimation of ATE with Validation Data</p></a></li>
<li><a href='#KnownError'><p>Estimation of ATE with Known Error</p></a></li>
<li><a href='#KnownErrorDR'><p>Doubly Robust Estimation of ATE with Known Error</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Inverse Probability Weighted Estimation of Average Treatment
Effect with Misclassified Binary Outcome</td>
</tr>
<tr>
<td>Version:</td>
<td>2.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2019-05-02</td>
</tr>
<tr>
<td>Author:</td>
<td>Di Shu &lt;shudi1991@gmail.com&gt;, Grace Y. Yi &lt;yyi@uwaterloo.ca&gt;</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Di Shu &lt;shudi1991@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>An implementation of the correction methods proposed by Shu and Yi (2017) &lt;<a href="https://doi.org/10.1177%2F0962280217743777">doi:10.1177/0962280217743777</a>&gt; for the inverse probability weighted (IPW) estimation of average treatment effect (ATE) with misclassified binary outcomes. Logistic regression model is assumed for treatment model for all implemented correction methods, and is assumed for the outcome model for the implemented doubly robust correction method. Misclassification probability given a true value of the outcome is assumed to be the same for all individuals.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Imports:</td>
<td>nleqslv, stats</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.0.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-05-02 06:12:46 UTC; dishu</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2019-05-02 10:00:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='ipwErrorY-package'>
Inverse Probability Weighted (IPW) Estimation of Average Treatment Effect (ATE) with Misclassified Binary Outcome
</h2><span id='topic+ipwErrorY-package'></span>

<h3>Description</h3>

<p>This package is an implementation of the correction methods proposed by Shu and Yi (2017) for the inverse probability weighted (IPW) estimation of average treatment effect (ATE) with misclassified binary outcomes. Logistic regression model is assumed for treatment model for all implemented correction methods, and is assumed for the outcome model for the implemented doubly robust correction method. Misclassification probability given a true value of the outcome is assumed to be the same for all individuals.
</p>


<h3>Details</h3>

<p>The <code>ipwErrorY</code> package implements correction methods developed by Shu and Yi (2017) to adjust for misclassification in binary outcomes in the inverse probability weighted estimation of average treatment effect. The function <code><a href="#topic+KnownError">KnownError</a></code> implements the correction method with known outcome misclassification probabilities. The function <code><a href="#topic+EstValidation">EstValidation</a></code> implements the optimal linear combination correction method when validation data are available. The function <code><a href="#topic+Est2Replicates">Est2Replicates</a></code> implements the correction method when two independent replicates of the outcome are available. The function <code><a href="#topic+KnownErrorDR">KnownErrorDR</a></code> implements the doubly robust correction method with known outcome misclassification probabilities.
</p>


<h3>Author(s)</h3>

<p>Di Shu and Grace Y. Yi
</p>
<p>Maintainer: Di Shu &lt;shudi1991@gmail.com&gt;
</p>


<h3>References</h3>

<p>Shu D, Yi GY. (2017). Causal inference with measurement error in outcomes: bias analysis and estimation methods. <em>Statistical Methods in Medical Research</em> &lt;doi:10.1177/0962280217743777&gt;
</p>

<hr>
<h2 id='Est2Replicates'>Estimation of ATE with Two Replicates</h2><span id='topic+Est2Replicates'></span>

<h3>Description</h3>

<p>Estimation of average treatment effect when misclassification probabilities are unknown but two independent replicates of the outcome are available
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Est2Replicates(data, indA, indYerror, indX,
  constraint = c("sensitivity equals specificity", "known sensitivity",
  "known specificity", "known prevalence"), sensitivity = NULL,
  specificity = NULL, prevalence = NULL, confidence = 0.95)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Est2Replicates_+3A_data">data</code></td>
<td>
<p>The dataset to be analyzed in the form of R data frame without missing data</p>
</td></tr>
<tr><td><code id="Est2Replicates_+3A_inda">indA</code></td>
<td>
<p>A column name indicating the binary treatment variable</p>
</td></tr>
<tr><td><code id="Est2Replicates_+3A_indyerror">indYerror</code></td>
<td>
<p>A vector of two column names indicating replicates of the binary outcome variable</p>
</td></tr>
<tr><td><code id="Est2Replicates_+3A_indx">indX</code></td>
<td>
<p>A vector of column names indicating the covariates included in the treatment model</p>
</td></tr>
<tr><td><code id="Est2Replicates_+3A_constraint">constraint</code></td>
<td>
<p>The constraint to be used; the default assumes sensitivity equals specificity</p>
</td></tr>
<tr><td><code id="Est2Replicates_+3A_sensitivity">sensitivity</code></td>
<td>
<p>The specified sensitivity between 0 and 1 when imposing the constraint that sensitivity is known, and the default is set to be NULL</p>
</td></tr>
<tr><td><code id="Est2Replicates_+3A_specificity">specificity</code></td>
<td>
<p>The specified specificity between 0 and 1 when imposing the constraint that specificity is known, and the default is set to be NULL</p>
</td></tr>
<tr><td><code id="Est2Replicates_+3A_prevalence">prevalence</code></td>
<td>
<p>The specified prevalence between 0 and 1 when imposing the constraint that prevalence is known, and the default is set to be NULL</p>
</td></tr>
<tr><td><code id="Est2Replicates_+3A_confidence">confidence</code></td>
<td>
<p>The confidence level between 0 and 1; the default is 0.95 corresponding to a 95 per cent confidence interval</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of the estimate of average treatment effect, sandwich-variance-based standard error, confidence interval, imposed constraint, and the information on sensitivity and specificity
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#create a dataset with sensitivity=0.95 and specificity=0.85
set.seed(100)
X1=rnorm(2000)   
A=rbinom(2000,1,1/(1+exp(-0.2-X1)))
Y=rbinom(2000,1,1/(1+exp(-0.2-A-X1)))
y1=which(Y==1)
y0=which(Y==0) 
Yast1=Y
Yast1[y1]=rbinom(length(y1),1,0.95)
Yast1[y0]=rbinom(length(y0),1,0.15)
Yast2=Y
Yast2[y1]=rbinom(length(y1),1,0.95)  
Yast2[y0]=rbinom(length(y0),1,0.15)
da=data.frame(A=A,X1=X1,Yast1=Yast1,Yast2=Yast2)
head(da)
#apply the correction method assuming specificity=0.85
Est2Replicates(da,"A",c("Yast1","Yast2"),"X1","known specificity",NULL,0.85,NULL,0.95)

</code></pre>

<hr>
<h2 id='EstValidation'>Estimation of ATE with Validation Data</h2><span id='topic+EstValidation'></span>

<h3>Description</h3>

<p>Estimation of average treatment effect using the optimal linear combination method when misclassification probabilities are unknown but validation data are available
</p>


<h3>Usage</h3>

<pre><code class='language-R'>EstValidation(maindata, validationdata, indA, indYerror, indX, indY,
  confidence = 0.95)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="EstValidation_+3A_maindata">maindata</code></td>
<td>
<p>The non-validation main data in the form of R data frame without missing data</p>
</td></tr>
<tr><td><code id="EstValidation_+3A_validationdata">validationdata</code></td>
<td>
<p>The validation data in the form of R data frame without missing data</p>
</td></tr>
<tr><td><code id="EstValidation_+3A_inda">indA</code></td>
<td>
<p>A column name indicating the binary treatment variable</p>
</td></tr>
<tr><td><code id="EstValidation_+3A_indyerror">indYerror</code></td>
<td>
<p>A column name indicating the misclassified binary outcome variable</p>
</td></tr>
<tr><td><code id="EstValidation_+3A_indx">indX</code></td>
<td>
<p>A vector of column names indicating the covariates included in the treatment model</p>
</td></tr>
<tr><td><code id="EstValidation_+3A_indy">indY</code></td>
<td>
<p>A column name indicating the true binary outcome variable</p>
</td></tr>
<tr><td><code id="EstValidation_+3A_confidence">confidence</code></td>
<td>
<p>The confidence level between 0 and 1; the default is 0.95 corresponding to a 95 per cent confidence interval</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of the estimate of average treatment effect, sandwich-variance-based standard error, confidence interval, and the estimated sensitivity and specificity
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#create main data and validation data with sensitivity=0.95 and specificity=0.85
set.seed(100)
X1=rnorm(1200)   
A=rbinom(1200,1,1/(1+exp(-0.2-X1)))
Y=rbinom(1200,1,1/(1+exp(-0.2-A-X1)))
y1=which(Y==1)
y0=which(Y==0) 
Yast=Y
Yast[y1]=rbinom(length(y1),1,0.95)
Yast[y0]=rbinom(length(y0),1,0.15)
mainda=data.frame(A=A,X1=X1,Yast=Yast)
X1=rnorm(800)   
A=rbinom(800,1,1/(1+exp(-0.2-X1)))
Y=rbinom(800,1,1/(1+exp(-0.2-A-X1)))
y1=which(Y==1)
y0=which(Y==0) 
Yast=Y
Yast[y1]=rbinom(length(y1),1,0.95)
Yast[y0]=rbinom(length(y0),1,0.15)
validationda=data.frame(A=A,X1=X1,Y=Y,Yast=Yast)
head(mainda)
head(validationda)
#apply the optimal linear combination correction method
EstValidation(mainda,validationda,"A","Yast","X1","Y",0.95)

</code></pre>

<hr>
<h2 id='KnownError'>Estimation of ATE with Known Error</h2><span id='topic+KnownError'></span>

<h3>Description</h3>

<p>Estimation of average treatment effect with known outcome misclassification probabilities, i.e., known sensitivity and specificity
</p>


<h3>Usage</h3>

<pre><code class='language-R'>KnownError(data, indA, indYerror, indX, sensitivity, specificity,
  confidence = 0.95)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="KnownError_+3A_data">data</code></td>
<td>
<p>The dataset to be analyzed in the form of R data frame without missing data</p>
</td></tr>
<tr><td><code id="KnownError_+3A_inda">indA</code></td>
<td>
<p>A column name indicating the binary treatment variable</p>
</td></tr>
<tr><td><code id="KnownError_+3A_indyerror">indYerror</code></td>
<td>
<p>A column name indicating the misclassified binary outcome variable</p>
</td></tr>
<tr><td><code id="KnownError_+3A_indx">indX</code></td>
<td>
<p>A vector of column names indicating the covariates included in the treatment model</p>
</td></tr>
<tr><td><code id="KnownError_+3A_sensitivity">sensitivity</code></td>
<td>
<p>The specified sensitivity between 0 and 1</p>
</td></tr>
<tr><td><code id="KnownError_+3A_specificity">specificity</code></td>
<td>
<p>The specified specificity between 0 and 1</p>
</td></tr>
<tr><td><code id="KnownError_+3A_confidence">confidence</code></td>
<td>
<p>The confidence level between 0 and 1; the default is 0.95 corresponding to a 95 per cent confidence interval</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of the estimate of average treatment effect, sandwich-variance-based standard error and confidence interval
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#create a dataset with sensitivity=0.95 and specificity=0.85
set.seed(100)
X1=rnorm(2000) 
A=rbinom(2000,1,1/(1+exp(-0.2-X1)))
Y=rbinom(2000,1,1/(1+exp(-0.2-A-X1)))
y1=which(Y==1)
y0=which(Y==0) 
Yast=Y
Yast[y1]=rbinom(length(y1),1,0.95)
Yast[y0]=rbinom(length(y0),1,0.15)
da=data.frame(X1=X1,A=A,Yast=Yast)
head(da)
#apply the correction method with sensitivity=0.95 and specificity=0.85
KnownError(da,"A","Yast","X1",0.95,0.85,0.95)

</code></pre>

<hr>
<h2 id='KnownErrorDR'>Doubly Robust Estimation of ATE with Known Error</h2><span id='topic+KnownErrorDR'></span>

<h3>Description</h3>

<p>Doubly robust estimation of average treatment effect with known outcome misclassification probabilities, i.e., known sensitivity and specificity
</p>


<h3>Usage</h3>

<pre><code class='language-R'>KnownErrorDR(data, indA, indYerror, indXtrt, indXout, sensitivity, specificity,
  sharePara = FALSE, confidence = 0.95)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="KnownErrorDR_+3A_data">data</code></td>
<td>
<p>The dataset to be analyzed in the form of R data frame without missing data</p>
</td></tr>
<tr><td><code id="KnownErrorDR_+3A_inda">indA</code></td>
<td>
<p>A column name indicating the binary treatment variable</p>
</td></tr>
<tr><td><code id="KnownErrorDR_+3A_indyerror">indYerror</code></td>
<td>
<p>A column name indicating the misclassified binary outcome variable</p>
</td></tr>
<tr><td><code id="KnownErrorDR_+3A_indxtrt">indXtrt</code></td>
<td>
<p>A vector of column names indicating the covariates included in the treatment model</p>
</td></tr>
<tr><td><code id="KnownErrorDR_+3A_indxout">indXout</code></td>
<td>
<p>A vector of column names indicating the covariates included in the outcome model</p>
</td></tr>
<tr><td><code id="KnownErrorDR_+3A_sensitivity">sensitivity</code></td>
<td>
<p>The specified sensitivity between 0 and 1</p>
</td></tr>
<tr><td><code id="KnownErrorDR_+3A_specificity">specificity</code></td>
<td>
<p>The specified specificity between 0 and 1</p>
</td></tr>
<tr><td><code id="KnownErrorDR_+3A_sharepara">sharePara</code></td>
<td>
<p>if the treated and untreated groups share parameters for covariates in the logistic outcome model (i.e., assuming Y~ T+X), then set <code>sharePara=TRUE</code>; if not (i.e., modeling Y~ X for the treated and untreated groups separately), then set <code>sharePara=FALSE</code>. By default,  <code>sharePara=FALSE</code></p>
</td></tr>
<tr><td><code id="KnownErrorDR_+3A_confidence">confidence</code></td>
<td>
<p>The confidence level between 0 and 1; the default is 0.95 corresponding to a 95 per cent confidence interval</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of the estimate of average treatment effect, sandwich-variance-based standard error and confidence interval
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#create a dataset with sensitivity=0.95 and specificity=0.85
set.seed(100)
X=rnorm(2000)   
xx=X^2
A=rbinom(2000,1,1/(1+exp(-0.1-X-0.2*xx)))
Y=rbinom(2000,1,1/(1+exp(1-A-0.5*X-xx)))
y1=which(Y==1)
y0=which(Y==0) 
Y[y1]=rbinom(length(y1),1,0.95)
Y[y0]=rbinom(length(y0),1,0.15)
Yast=Y
da=data.frame(A=A,X=X,xx=xx,Yast=Yast)
head(da)
#apply the doubly robust correction method with sensitivity=0.95 and specificity=0.85
KnownErrorDR(da,"A","Yast",c("X","xx"),c("X","xx"),0.95,0.85,FALSE,0.95)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
