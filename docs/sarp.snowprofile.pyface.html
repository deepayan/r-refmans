<!DOCTYPE html><html><head><title>Help for package sarp.snowprofile.pyface</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {sarp.snowprofile.pyface}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#computeCritCutLength'><p>Compute critical crack length</p></a></li>
<li><a href='#computePunstable'><p>Compute probability of layer instability based on random forest model</p></a></li>
<li><a href='#have_dependencies'><p>Check whether python and dependencies are available on system</p></a></li>
<li><a href='#import_pyunstable'><p>Import python module pyunstable</p></a></li>
<li><a href='#import_RFmodel'><p>Make RFmodel available for direct python calls</p></a></li>
<li><a href='#sarp.snowprofile.pyface-package'><p>sarp.snowprofile.pyface: 'python' Modules from Snowpack and Avalanche Research</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>0.1.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-10-26</td>
</tr>
<tr>
<td>Title:</td>
<td>'python' Modules from Snowpack and Avalanche Research</td>
</tr>
<tr>
<td>Description:</td>
<td>
    The development of post-processing functionality for simulated snow profiles 
    by the snow and avalanche community is often done in 'python'. This package
    aims to make these tools accessible to 'R' users. Currently integrated modules 
    contain functions to calculate dry snow layer instabilities in support of
    avalache hazard assessments following the publications of  Richter, Schweizer, 
    Rotach, and Van Herwijnen (2019) &lt;<a href="https://doi.org/10.5194%2Ftc-13-3353-2019">doi:10.5194/tc-13-3353-2019</a>&gt;, and Mayer, 
    Van Herwijnen, Techel, and Schweizer (2022) &lt;<a href="https://doi.org/10.5194%2Ftc-2022-34">doi:10.5194/tc-2022-34</a>&gt;.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://www.avalancheresearch.ca">http://www.avalancheresearch.ca</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://creativecommons.org/licenses/by-sa/4.0">CC BY-SA 4.0</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>Language:</td>
<td>en-CA</td>
</tr>
<tr>
<td>Depends:</td>
<td>sarp.snowprofile (&ge; 1.3.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>utils, reticulate, data.table</td>
</tr>
<tr>
<td>Config/reticulate:</td>
<td>list( packages = list( list(package =
"scikit-learn", version = "0.22.1"), list(package = "joblib"),
list(package = "numpy"), list(package = "pandas") ) )</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-11-01 11:58:04 UTC; flo</td>
</tr>
<tr>
<td>Author:</td>
<td>Florian Herla [aut, cre],
  Stephanie Mayer [aut],
  SFU Avalanche Research Program [fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Florian Herla &lt;fherla@sfu.ca&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-11-01 15:15:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='computeCritCutLength'>Compute critical crack length</h2><span id='topic+computeCritCutLength'></span><span id='topic+computeCritCutLength.snowprofileSet'></span><span id='topic+computeCritCutLength.snowprofile'></span><span id='topic+computeCritCutLength.snowprofileLayers'></span>

<h3>Description</h3>

<p>This function implements Bettina Richter's (2019) parametrization for the critical crack length for flat simulations based on
density, grain size, and shear strength. The parametrization also needs the mean density of the slab, which can be computed
automatically if a snowprofile object is provided. In case the functions gets a snowprofileLayers object it expects <code>slab_rho</code> being precomputed.
This acts as a safety mechanism to ensure that <code>slab_rho</code> is computed over one profile and not over a stacked layers data.frame containing multiple
profiles. Note that the critical crack length can be computed alongside the layer probabilities for instability <code>p_unstable</code> in <a href="#topic+computePunstable">computePunstable</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeCritCutLength(x)

## S3 method for class 'snowprofileSet'
computeCritCutLength(x)

## S3 method for class 'snowprofile'
computeCritCutLength(x)

## S3 method for class 'snowprofileLayers'
computeCritCutLength(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeCritCutLength_+3A_x">x</code></td>
<td>
<p>snowprofileSet, snowprofile, or snowprofileLayers object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Input object is returned with <code style="white-space: pre;">&#8288;$crit_cut_length&#8288;</code> (and potentially <code style="white-space: pre;">&#8288;$slab_rho&#8288;</code>) appended to the layers object.
</p>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>snowprofileSet</code>: for snowprofileSets
</p>
</li>
<li> <p><code>snowprofile</code>: for snowprofiles
</p>
</li>
<li> <p><code>snowprofileLayers</code>: for snowprofileLayers
</p>
</li></ul>


<h3>Author(s)</h3>

<p>fherla based on the python function by smayer and brichter
</p>


<h3>References</h3>

<p>Richter, B., Schweizer, J., Rotach, M. W., &amp; Van Herwijnen, A. (2019).
Validating modeled critical crack length for crack propagation in the snow cover model SNOWPACK.
The Cryosphere, 13(12), 3353â€“3366. https://doi.org/10.5194/tc-13-3353-2019
</p>


<h3>See Also</h3>

<p><a href="#topic+computePunstable">computePunstable</a>
</p>

<hr>
<h2 id='computePunstable'>Compute probability of layer instability based on random forest model</h2><span id='topic+computePunstable'></span><span id='topic+computePunstable.snowprofileSet'></span><span id='topic+computePunstable.snowprofile'></span><span id='topic+computePunstable.snowprofileLayers'></span>

<h3>Description</h3>

<p>This function enables comfortable and fast R access to Stephanie Mayer's python implementation of her random forest model to estimate the probability of dry snow layer instability.
The routine can be run very efficiently on large snowprofileSets. Layer properties required are sphericity, viscous deformation rate (10e-6 s-1), density (kg m-3), grain size (mm),
and the critical crack length (m) (which can be computed very efficiently automatically if shear strength (kPA) is available.) Additionally, skier penetration depth in (m) is required.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computePunstable(x, ...)

## S3 method for class 'snowprofileSet'
computePunstable(
  x,
  ski_pen = NA,
  recompute_crit_cut_length = TRUE,
  buffer = TRUE,
  ...
)

## S3 method for class 'snowprofile'
computePunstable(x, ski_pen = NA, recompute_crit_cut_length = TRUE, ...)

## S3 method for class 'snowprofileLayers'
computePunstable(x, ski_pen = NA, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computePunstable_+3A_x">x</code></td>
<td>
<p>snowprofile, snowprofileSet, or snowprofileLayers</p>
</td></tr>
<tr><td><code id="computePunstable_+3A_...">...</code></td>
<td>
<p>passed on to subsequent methods</p>
</td></tr>
<tr><td><code id="computePunstable_+3A_ski_pen">ski_pen</code></td>
<td>
<p>skier penetration depth (m), one scalar for each profile in x</p>
</td></tr>
<tr><td><code id="computePunstable_+3A_recompute_crit_cut_length">recompute_crit_cut_length</code></td>
<td>
<p>This routine can very efficiently compute the critical crack length with <a href="#topic+computeCritCutLength">computeCritCutLength</a>.
SNOWPACK often provides NA values of the critical crack length even for layers that have a real solution to it. With this flag you can conveniently
recompute all critical crack lengths (<code>TRUE</code>). If set to <code>FALSE</code>, it will only be computed if not all profiles already contain it.
Note that shear strength must be available to compute the critical crack length!</p>
</td></tr>
<tr><td><code id="computePunstable_+3A_buffer">buffer</code></td>
<td>
<p>internal switch to ensure fast computation at low memory cost. Leave at <code>TRUE</code>!</p>
</td></tr>
</table>


<h3>Value</h3>

<p>x is returned with <code style="white-space: pre;">&#8288;$p_unstable&#8288;</code> (and potentially <code style="white-space: pre;">&#8288;$crit_cut_length&#8288;</code>, <code style="white-space: pre;">&#8288;$slab_rho&#8288;</code>, and <code>slab_rhogs</code>) appended to each profile's layers object.
</p>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>snowprofileSet</code>: for <a href="sarp.snowprofile.html#topic+snowprofileSet">sarp.snowprofile::snowprofileSet</a>s
</p>
</li>
<li> <p><code>snowprofile</code>: for snowprofiles
</p>
</li>
<li> <p><code>snowprofileLayers</code>: for snowprofileLayers
</p>
</li></ul>


<h3>Author(s)</h3>

<p>fherla and smayer
</p>


<h3>References</h3>

<p>Mayer, S., Herwijnen, A. Van, Techel, F., &amp; Schweizer, J. (accepted, 2022).
A random forest model to assess snow instability from simulated snow stratigraphy.
The Cryosphere Discussions. https://doi.org/10.5194/tc-2022-34
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## load a handful of example profiles from a PRO file
profiles &lt;- snowprofilePro(system.file("extdata/snowprofile.pro",
                                       package = "sarp.snowprofile.pyface"),
                           remove_soil = TRUE, suppressWarnings = TRUE)
summary(profiles)
names(profiles[[1]]$layers)
## compute p_unstable alongside critical crack length, slab_rho, slab_rhogs:
if (have_dependencies()) {
profiles &lt;- computePunstable(profiles)
names(profiles[[1]]$layers)
}


</code></pre>

<hr>
<h2 id='have_dependencies'>Check whether python and dependencies are available on system</h2><span id='topic+have_dependencies'></span>

<h3>Description</h3>

<p>Check whether python and dependencies are available on system
</p>


<h3>Usage</h3>

<pre><code class='language-R'>have_dependencies()
</code></pre>


<h3>Value</h3>

<p>boolean TRUE/ FALSE
</p>

<hr>
<h2 id='import_pyunstable'>Import python module pyunstable</h2><span id='topic+import_pyunstable'></span>

<h3>Description</h3>

<p>Convenience wrapper to make python module pyunstable accessible in R session
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_pyunstable()
</code></pre>


<h3>Value</h3>

<p>attach python module <code>pyunstable</code> to use python functions therein
</p>


<h3>See Also</h3>

<p><a href="#topic+computePunstable">computePunstable</a>
</p>

<hr>
<h2 id='import_RFmodel'>Make RFmodel available for direct python calls</h2><span id='topic+import_RFmodel'></span>

<h3>Description</h3>

<p>Convenience wrapper to make the python random forest model for snow layer instability 'p_unstable' accessible in R session
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_RFmodel()
</code></pre>


<h3>Value</h3>

<p>attach python RandomForestClassifier to variable <code>RFmodel</code>
</p>


<h3>See Also</h3>

<p><a href="#topic+computePunstable">computePunstable</a>
</p>

<hr>
<h2 id='sarp.snowprofile.pyface-package'>sarp.snowprofile.pyface: 'python' Modules from Snowpack and Avalanche Research</h2><span id='topic+sarp.snowprofile.pyface'></span><span id='topic+sarp.snowprofile.pyface-package'></span>

<h3>Description</h3>

<p>The development of post-processing functionality for simulated snow profiles by the snow and avalanche community is often done in 'python'. This package aims to make these tools accessible to 'R' users. Currently integrated modules contain functions to calculate dry snow layer instabilities in support of avalache hazard assessments following the publications of Richter, Schweizer, Rotach, and Van Herwijnen (2019) &lt;doi:10.5194/tc-13-3353-2019&gt;, and Mayer, Van Herwijnen, Techel, and Schweizer (2022) &lt;doi:10.5194/tc-2022-34&gt;.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Florian Herla <a href="mailto:fherla@sfu.ca">fherla@sfu.ca</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Stephanie Mayer <a href="mailto:stephanie.mayer@slf.ch">stephanie.mayer@slf.ch</a>
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> SFU Avalanche Research Program [funder]
</p>
</li></ul>



<h3>See Also</h3>

<p><a href="#topic+computeCritCutLength">computeCritCutLength</a>, <a href="#topic+computePunstable">computePunstable</a>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
