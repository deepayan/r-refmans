<!DOCTYPE html><html lang="en"><head><title>Help for package codelist</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {codelist}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#as.code'><p>Convert object to code</p></a></li>
<li><a href='#as.codelist'><p>Convert an object to a codelist object</p></a></li>
<li><a href='#as.label'><p>Label character vector as label to use in comparisons with a code vector</p></a></li>
<li><a href='#cl'><p>Get the code list associated with the object</p></a></li>
<li><a href='#cl_filter'><p>Filter a code list</p></a></li>
<li><a href='#cl_is_valid'><p>Check if the codelist is valid</p></a></li>
<li><a href='#cl_levels'><p>Get the hierarchical level for each code in a code list</p></a></li>
<li><a href='#cl_locale'><p>Get the locale to use with the codelist</p></a></li>
<li><a href='#cl_nlevels'><p>Get the number of hierarchical levels in a code list</p></a></li>
<li><a href='#code'><p>Code vector</p></a></li>
<li><a href='#codelist'><p>Create a codelist object</p></a></li>
<li><a href='#codes'><p>Get the codes belonging to given labels</p></a></li>
<li><a href='#format.code'><p>Format a code object for pretty printing</p></a></li>
<li><a href='#in_labels'><p>Match codes based on label</p></a></li>
<li><a href='#is.code'><p>Check if object is a code</p></a></li>
<li><a href='#is.codelist'><p>Check if an object is a Code List</p></a></li>
<li><a href='#is.missing'><p>Find out which elements of a vector have missing values</p></a></li>
<li><a href='#labels.code'><p>Convert vector with codes to factor using a code list</p></a></li>
<li><a href='#levelcast'><p>Recode codes to a higher level in a hierarchy</p></a></li>
<li><a href='#objectcodes'><p>Example code list for object types</p></a></li>
<li><a href='#objectsales'><p>Example data set to demonstrate working with code lists</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Working with Code Lists</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions for working with code lists and vectors with codes. These
    are an alternative for factor that keep track of both the codes and labels.
    Methods allow for transforming between codes and labels. Also supports
    hierarchical code lists.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>utils, methods</td>
</tr>
<tr>
<td>Suggests:</td>
<td>simplermarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>simplermarkdown</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-19 15:12:08 UTC; eoos</td>
</tr>
<tr>
<td>Author:</td>
<td>Jan van der Laan <a href="https://orcid.org/0000-0002-0693-1514"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jan van der Laan &lt;r@eoos.dds.nl&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-02-20 18:00:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='as.code'>Convert object to code</h2><span id='topic+as.code'></span><span id='topic+as.code.code'></span><span id='topic+as.code.default'></span>

<h3>Description</h3>

<p>Convert object to code
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.code(x)

## S3 method for class 'code'
as.code(x)

## Default S3 method:
as.code(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as.code_+3A_x">x</code></td>
<td>
<p>object to convert</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default objects are first converted to factor using
<code><a href="base.html#topic+as.factor">as.factor</a></code> before being converted to code using
<code><a href="#topic+as.code">as.code</a></code>.
</p>


<h3>Value</h3>

<p>Returns an object of type <code><a href="#topic+code">code</a></code>.
</p>

<hr>
<h2 id='as.codelist'>Convert an object to a codelist object</h2><span id='topic+as.codelist'></span><span id='topic+as.codelist.codelist'></span><span id='topic+as.codelist.data.frame'></span>

<h3>Description</h3>

<p>Convert an object to a codelist object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.codelist(x, ...)

## S3 method for class 'codelist'
as.codelist(x, ...)

## S3 method for class 'data.frame'
as.codelist(
  x,
  code = names(x)[1],
  label = names(x)[2],
  description = "description",
  parent = "parent",
  locale = "locale",
  missing = "missing",
  format = c("regular", "wide"),
  locales = NULL,
  locale_sep = "[-_@. ]",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as.codelist_+3A_x">x</code></td>
<td>
<p>data.frame with the code list</p>
</td></tr>
<tr><td><code id="as.codelist_+3A_...">...</code></td>
<td>
<p>used to pass extra arguments on to other methods.</p>
</td></tr>
<tr><td><code id="as.codelist_+3A_code">code</code></td>
<td>
<p>the name of the column in <code>x</code> containing the codes.</p>
</td></tr>
<tr><td><code id="as.codelist_+3A_label">label</code></td>
<td>
<p>the name of the column in <code>x</code> containing the labels of the
codes.</p>
</td></tr>
<tr><td><code id="as.codelist_+3A_description">description</code></td>
<td>
<p>the name of the column in <code>x</code> containing the labels
of the codes.</p>
</td></tr>
<tr><td><code id="as.codelist_+3A_parent">parent</code></td>
<td>
<p>the name of the column in <code>x</code> containing the parents of
the codes in case of a hierarchical code list.</p>
</td></tr>
<tr><td><code id="as.codelist_+3A_locale">locale</code></td>
<td>
<p>the name of the column in <code>x</code> containing the locale of
the corresponding row.</p>
</td></tr>
<tr><td><code id="as.codelist_+3A_missing">missing</code></td>
<td>
<p>the name of the column in <code>x</code> indicating whether or not
a given code should be treated as missing values.</p>
</td></tr>
<tr><td><code id="as.codelist_+3A_format">format</code></td>
<td>
<p>the format of data.frame. In case of 'wide', it is assummed that
columns are repeated for each locale. For example there are columns
'label_locale1' and 'label_locale2'. In case of 'regular' there are multiple
rows one for each locale.</p>
</td></tr>
<tr><td><code id="as.codelist_+3A_locales">locales</code></td>
<td>
<p>only used for <code>format = "wide"</code>. The locales in the data
set.</p>
</td></tr>
<tr><td><code id="as.codelist_+3A_locale_sep">locale_sep</code></td>
<td>
<p>the separator separating the locale from the column name.
This is interpreted as a regular expression (see the 'split' argument of
<code><a href="base.html#topic+strsplit">strsplit</a></code>). The part of the column name until the first
separator is the column name; the remainder the locale name.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When there is no column with the name given by <code>label</code> in <code>x</code>, a
new column 'label' is derived containing codes converted to character.
</p>


<h3>Value</h3>

<p>Returns a <code><a href="#topic+codelist">codelist</a></code> object which is a <code>data.frame</code> with at
minimum the columns 'code' and 'label' and optionally 'description',
'parent', 'locale' and 'missing'. When <code>x</code> contains additional columns
these are kept.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codelist">codelist</a></code> for a description of the <code>codelist</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Examples below show the same codelist in both regular and wide format
dta &lt;- data.frame(codes = c(1:3, 1:3), 
  labels = c(letters[1:3], LETTERS[1:3]), 
  locale = c("en", "en", "en", "nl" ,"nl" ,"nl"))
as.codelist(dta, format = "regular")

dta &lt;- data.frame(codes = 1:3, labels_en = letters[1:3], 
  labels_nl = LETTERS[1:3])
as.codelist(dta, format = "wide")

</code></pre>

<hr>
<h2 id='as.label'>Label character vector as label to use in comparisons with a code vector</h2><span id='topic+as.label'></span>

<h3>Description</h3>

<p>Label character vector as label to use in comparisons with a code vector
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.label(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as.label_+3A_x">x</code></td>
<td>
<p>character vector that is to be interpreted as a label. If <code>x</code>
is not a character vector it will be converted to one using
<code>as.character</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a character vector with the class &quot;label&quot;. This can be used in
comparisons to a 'code' vector, or to assign to a 'code' vector.
</p>


<h3>See Also</h3>

<p>Uses <code><a href="#topic+codes">codes</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(objectcodes)
data(objectsales)
objectsales$product &lt;- code(objectsales$product, objectcodes)

objectsales$product[1] &lt;- as.label("Hammer")

objectsales$product == as.label("Hammer")
subset(objectsales, product == as.label("Hammer"))

# This is the same as
subset(objectsales, product == codes("Hammer", cl(product)))

</code></pre>

<hr>
<h2 id='cl'>Get the code list associated with the object</h2><span id='topic+cl'></span><span id='topic+cl.default'></span><span id='topic+cl.code'></span>

<h3>Description</h3>

<p>Get the code list associated with the object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cl(x)

## Default S3 method:
cl(x)

## S3 method for class 'code'
cl(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cl_+3A_x">x</code></td>
<td>
<p>the object to get the <code><a href="#topic+codelist">codelist</a></code> from.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of type 'codelist'.
</p>

<hr>
<h2 id='cl_filter'>Filter a code list</h2><span id='topic+cl_filter'></span>

<h3>Description</h3>

<p>Filter a code list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cl_filter(codelist, locale, levels, check_levels = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cl_filter_+3A_codelist">codelist</code></td>
<td>
<p>a <code><a href="#topic+codelist">codelist</a></code> object.</p>
</td></tr>
<tr><td><code id="cl_filter_+3A_locale">locale</code></td>
<td>
<p>use the codes from the given locale. Should be character
vector of length 1. When NA the default locale is used (as returned by
<code><a href="#topic+cl_locale">cl_locale</a></code>.</p>
</td></tr>
<tr><td><code id="cl_filter_+3A_levels">levels</code></td>
<td>
<p>vector with levels on which to filter an hierarchical code list.
Levels are numbered from 0 with 0 the topmost level. See 'Details'. When a
code list does not have a 'parent' column and is, therefore, not hierarchical
all codes are in level 0.</p>
</td></tr>
<tr><td><code id="cl_filter_+3A_check_levels">check_levels</code></td>
<td>
<p>if TRUE the parent column (if present) is removed from
the result when the resulting code list would not be a valid hierarchy.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When a code list has a 'parent' column. The codes without parent are assigned
level 0. Codes with a parent in level 0 are assigned to level 1. Etc. When
the code list does not have a 'parent' column all codes are assigned to level
0 (all codes are in the top level).
</p>


<h3>Value</h3>

<p>Returns a <code><a href="#topic+codelist">codelist</a></code> with the selected encoding and/or levels.
</p>

<hr>
<h2 id='cl_is_valid'>Check if the codelist is valid</h2><span id='topic+cl_is_valid'></span>

<h3>Description</h3>

<p>Check if the codelist is valid
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cl_is_valid(codelist)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cl_is_valid_+3A_codelist">codelist</code></td>
<td>
<p>a <code><a href="#topic+codelist">codelist</a></code> object or a <code>data.frame</code> that
is a valid <code><a href="#topic+codelist">code list</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>TRUE</code> when the code list is valid; returns a character vector
of length 1 with a description of the problem when it is not valid.
</p>

<hr>
<h2 id='cl_levels'>Get the hierarchical level for each code in a code list</h2><span id='topic+cl_levels'></span>

<h3>Description</h3>

<p>Get the hierarchical level for each code in a code list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cl_levels(codelist)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cl_levels_+3A_codelist">codelist</code></td>
<td>
<p>the <code><a href="#topic+codelist">codelist</a></code> for which to determine the levels.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Levels are numbered with 0 being the top-most level, which contains code
without parent (parent missing). In level 1 are codes that have a parent in
level 0. Etc.
</p>
<p>When the code list does not have a 'parent' column, all codes are in level 0.
</p>


<h3>Value</h3>

<p>An integer vector with the same length as the number of rows in the code
list.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(objectcodes)
cl_levels(objectcodes)

</code></pre>

<hr>
<h2 id='cl_locale'>Get the locale to use with the codelist</h2><span id='topic+cl_locale'></span>

<h3>Description</h3>

<p>Get the locale to use with the codelist
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cl_locale(codelist, preferred = getOption("CLLOCALE", NA_character_))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cl_locale_+3A_codelist">codelist</code></td>
<td>
<p>a <code><a href="#topic+codelist">codelist</a></code> object or a <code>data.frame</code> that
is a valid code list.</p>
</td></tr>
<tr><td><code id="cl_locale_+3A_preferred">preferred</code></td>
<td>
<p>the preferred locale. If missing or not present in the 
code list, the first locale in the code list will be used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of length 1 with the locale. Can be <code>NA</code> when the 
codelist does not have locales.
</p>

<hr>
<h2 id='cl_nlevels'>Get the number of hierarchical levels in a code list</h2><span id='topic+cl_nlevels'></span>

<h3>Description</h3>

<p>Get the number of hierarchical levels in a code list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cl_nlevels(codelist)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cl_nlevels_+3A_codelist">codelist</code></td>
<td>
<p>the <code><a href="#topic+codelist">codelist</a></code> for which to determine the number
of levels.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single integer value (&gt;= 1) with the number of levels.
</p>

<hr>
<h2 id='code'>Code vector</h2><span id='topic+code'></span>

<h3>Description</h3>

<p>A code vector is a vector with an associated code list. The values in the
vector should come from this code list. The values also have an associated
label and optionally additional properties such as a description. See
<code><a href="#topic+codelist">codelist</a></code> for more information on what should and could be in a
code list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>code(x, codelist, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="code_+3A_x">x</code></td>
<td>
<p>vector to convert to code vector</p>
</td></tr>
<tr><td><code id="code_+3A_codelist">codelist</code></td>
<td>
<p>code list to associate with the values in <code>x</code>. This
should be convertable to <code><a href="#topic+codelist">codelist</a></code> using
<code><a href="#topic+as.codelist">as.codelist</a></code>.</p>
</td></tr>
<tr><td><code id="code_+3A_...">...</code></td>
<td>
<p>Ignored; used to pass extra arguments to other methods</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When <code>codelist</code> is omitted when case <code>x</code> is a factor, a code list is
generated from the factor values.
</p>


<h3>Value</h3>

<p>Returns an object of type 'code'. Except when <code>x</code> is a factor, <code>x</code>
keeps classes and attributes assiated with <code>x</code>. This object is a copy of
<code>x</code> with a <code>codelist</code> attribute added. 
</p>
<p>When <code>x</code> is a factor <code>x</code> it converted to an integer vector. The
labels are the levels of the factor.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
x &lt;- code(c(1,4,2), codelist(codes = 1:4, labels = letters[1:4]))
print(x)
labels(x)

x &lt;- code(factor(letters[1:3]))
print(x)
attr(x, "codelist")

</code></pre>

<hr>
<h2 id='codelist'>Create a codelist object</h2><span id='topic+codelist'></span>

<h3>Description</h3>

<p>Create a codelist object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>codelist(
  codes,
  labels = NULL,
  descriptions = NULL,
  parent = NULL,
  locale = NULL,
  missing = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="codelist_+3A_codes">codes</code></td>
<td>
<p>a vector with the codes.</p>
</td></tr>
<tr><td><code id="codelist_+3A_labels">labels</code></td>
<td>
<p>optional vector with the labels. Will be converted to character
and should have the same length as <code>codes</code>. When <code>labels</code> is not
given <code>as.character(codes)</code> is used for the labels.</p>
</td></tr>
<tr><td><code id="codelist_+3A_descriptions">descriptions</code></td>
<td>
<p>optional vector with the descriptions of the codes. Will be
converted to character and should have the same length as <code>codes</code>.</p>
</td></tr>
<tr><td><code id="codelist_+3A_parent">parent</code></td>
<td>
<p>optional vector with the parents of the codes. Should be of the
same type and length as <code>codes</code> and should contain only values present in
<code>codes</code> or missing values. This can be used to define simple hierarchies.
Codes with NA as their parent are the top-level (level 0) codes in the
hierarchy.</p>
</td></tr>
<tr><td><code id="codelist_+3A_locale">locale</code></td>
<td>
<p>optional vector with the locale of the labels, descriptions etc.
of the codes. This should be a character vector with the same length as
<code>codes</code>. When the code list contains multiple locales each code should be
present in each locale.</p>
</td></tr>
<tr><td><code id="codelist_+3A_missing">missing</code></td>
<td>
<p>optional logical vector indicating whether or not the
corresponding code can be treated as a missing value. This can be used to
encode different types of missingness.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>codelist</code> object which is a <code>data.frame</code> with at minimum
the columns 'code' and 'label' and optionally 'description', 'parent',
'locale' and 'missing'. See below for a description of the columns:
</p>
<table role = "presentation">
<tr><td><code>code</code></td>
<td>
<p>The codes. It is expected that these are either characters or
integers although other types are probably supported. For a given locale (see
below) they should be unique. Missing values are not allowed.</p>
</td></tr>
<tr><td><code>label</code></td>
<td>
<p>The labels of the codes. These are characters. Missing values
are not allowed.</p>
</td></tr> 
<tr><td><code>description</code></td>
<td>
<p>Optional. The description of the codes. These are characters.
Missing values are not allowed.</p>
</td></tr>
<tr><td><code>missing</code></td>
<td>
<p>Optional. Logical vector indicating whether or not the
corresponding code can be treated as a special value. This can be used to
have different codes for different types of missingness. Missing values are
not allowed.</p>
</td></tr>
<tr><td><code>locale</code></td>
<td>
<p>Optional. Character vector indicating for the given row 
which locale the label and description belong to. The default use is to have
different translations of the labels and descriptions. However, this can also
be used, for example, to specify short and long labels. When there is more
than one locale, there should be multiple lines for each code, one for each
locale.</p>
</td></tr>
<tr><td><code>parent</code></td>
<td>
<p>Optional. The parent of the code. This can be used to specify
simple hierarchies. These should be of the same type as the 'code' column and
values should be present in the 'code' column or be 'NA'. When the parent is
'NA' it is assumed this is a top level code. The hierarchy should form a
tree.</p>
</td></tr>
</table>
<p>The validity of the code list can be checked using <code><a href="#topic+cl_is_valid">cl_is_valid</a></code>.
</p>

<hr>
<h2 id='codes'>Get the codes belonging to given labels</h2><span id='topic+codes'></span><span id='topic+codes.default'></span><span id='topic+codes.code'></span><span id='topic+to_codes'></span>

<h3>Description</h3>

<p>Get the codes belonging to given labels
</p>


<h3>Usage</h3>

<pre><code class='language-R'>codes(x, ...)

## Default S3 method:
codes(x, codelist, locale = cl_locale(codelist), ...)

## S3 method for class 'code'
codes(x, ...)

to_codes(x, codelist, locale = cl_locale(codelist))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="codes_+3A_x">x</code></td>
<td>
<p>character vector with labels.</p>
</td></tr>
<tr><td><code id="codes_+3A_...">...</code></td>
<td>
<p>used to pass arguments to other methods.</p>
</td></tr>
<tr><td><code id="codes_+3A_codelist">codelist</code></td>
<td>
<p>a <code><a href="#topic+codelist">codelist</a></code> object or a <code>data.frame</code> that
is a valid code list or and object that has a 'codelist' attribute
containing a codelist.</p>
</td></tr>
<tr><td><code id="codes_+3A_locale">locale</code></td>
<td>
<p>use the codes from the given locale. Should be a character vector 
of length 1.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>to_codes</code> has the same functionality as a call to <code>codes.default</code>.
</p>


<h3>Value</h3>

<p>Returns a vector of codes. Will give an error when one of the labels cannot
be found in the codelist for the given locale. When <code>x</code> is an object of
type 'code' the codes themselves are returned stripped from the 'code'
class and with the 'codelist' attribute removed.
</p>


<h3>See Also</h3>

<p>See <code><a href="#topic+as.label">as.label</a></code> for an alternative in comparisons.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(objectcodes)
data(objectsales)
objectsales$product &lt;- code(objectsales$product, objectcodes)

codes(c("Hammer", "Electric Drill"), objectcodes)
codes(c("Hammer", "Electric Drill"), cl(objectsales$product))

</code></pre>

<hr>
<h2 id='format.code'>Format a code object for pretty printing</h2><span id='topic+format.code'></span>

<h3>Description</h3>

<p>Format a code object for pretty printing
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'code'
format(x, maxlen = getOption("CLMAXLEN", 8L), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="format.code_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+code">code</a></code> object</p>
</td></tr>
<tr><td><code id="format.code_+3A_maxlen">maxlen</code></td>
<td>
<p>maximum length of the label. A length of 0 or lower will
suppress adding the label to the output.</p>
</td></tr>
<tr><td><code id="format.code_+3A_...">...</code></td>
<td>
<p>ignored
</p>
<p>When <code>maxlen</code> is one or larger function will add the label of the code
to the code in square brackets. When the label is larger than <code>maxlen</code>
the label will be truncated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with the formatted code.
</p>

<hr>
<h2 id='in_labels'>Match codes based on label</h2><span id='topic+in_labels'></span>

<h3>Description</h3>

<p>Match codes based on label
</p>


<h3>Usage</h3>

<pre><code class='language-R'>in_labels(
  x,
  labels,
  codelist = attr(x, "codelist"),
  locale = cl_locale(codelist)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="in_labels_+3A_x">x</code></td>
<td>
<p>vector with codes. Should be of the same type as the codes in the
codelist.</p>
</td></tr>
<tr><td><code id="in_labels_+3A_labels">labels</code></td>
<td>
<p>vector with labels.</p>
</td></tr>
<tr><td><code id="in_labels_+3A_codelist">codelist</code></td>
<td>
<p>a <code><a href="#topic+codelist">codelist</a></code> object or a <code>data.frame</code> that
is a valid code list or and object that has a 'codelist' attribute
containing a codelist.</p>
</td></tr>
<tr><td><code id="in_labels_+3A_locale">locale</code></td>
<td>
<p>use the codes from the given locale. Should be character vector 
of length 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical vector of the same length as <code>x</code> indicating for each value if
the code has a label present in <code>labels</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(objectcodes)
data(objectsales)
objectsales$product &lt;- code(objectsales$product, objectcodes)

in_labels(objectsales$product, c("Electric Drill", "Toys"))

subset(objectsales, in_labels(product, c("Electric Drill", "Hammer")))

</code></pre>

<hr>
<h2 id='is.code'>Check if object is a code</h2><span id='topic+is.code'></span>

<h3>Description</h3>

<p>Check if object is a code
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.code(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is.code_+3A_x">x</code></td>
<td>
<p>object to check</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a logical of length 1 indicating whether or not <code>X</code> is of 
type 'code'.
</p>

<hr>
<h2 id='is.codelist'>Check if an object is a Code List</h2><span id='topic+is.codelist'></span>

<h3>Description</h3>

<p>Check if an object is a Code List
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.codelist(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is.codelist_+3A_x">x</code></td>
<td>
<p>object to test.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a logical of length 1. Returns <code>TRUE</code> is <code>x</code> is of type
<code><a href="#topic+codelist">codelist</a></code> or a <code>data.frame</code> that conforms to the
requirements of a code list.
</p>

<hr>
<h2 id='is.missing'>Find out which elements of a vector have missing values</h2><span id='topic+is.missing'></span>

<h3>Description</h3>

<p>Find out which elements of a vector have missing values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.missing(x, codelist = attr(x, "codelist"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is.missing_+3A_x">x</code></td>
<td>
<p>vector for which the missing elements have to be detected.</p>
</td></tr>
<tr><td><code id="is.missing_+3A_codelist">codelist</code></td>
<td>
<p>a <code><a href="#topic+codelist">codelist</a></code> object or a <code>data.frame</code> that
is a valid code list.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Unlike <code><a href="base.html#topic+is.na">is.na</a></code> <code>is.missing</code> will also return <code>TRUE</code> for
elements of <code>x</code> whose values are indicated in the code list to be
missing values. For that to work <code>codelist</code> needs to be a valid
<code><a href="#topic+codelist">codelist</a></code> with a 'missing' column. This column needs to be
interpretable as a logical vector. When <code>codelist</code> is missing or does
not contain a 'missing' column the result of <code>is.missing</code> is the same as
<code><a href="base.html#topic+is.na">is.na</a></code>.
</p>


<h3>Value</h3>

<p>Returns a logical vector of the same length as <code>x</code> with <code>TRUE</code>
indicating corresponing values in <code>x</code> that can be considered to be
missing.
</p>

<hr>
<h2 id='labels.code'>Convert vector with codes to factor using a code list</h2><span id='topic+labels.code'></span><span id='topic+to_labels'></span>

<h3>Description</h3>

<p>Convert vector with codes to factor using a code list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'code'
labels(
  object,
  missing = TRUE,
  droplevels = FALSE,
  codelist = attr(object, "codelist"),
  locale = cl_locale(codelist),
  ...
)

to_labels(
  x,
  codelist = attr(x, "codelist"),
  missing = TRUE,
  droplevels = FALSE,
  locale = cl_locale(codelist)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="labels.code_+3A_object">object</code></td>
<td>
<p>vector with codes. Should be of the same type as the codes in
the codelist.</p>
</td></tr>
<tr><td><code id="labels.code_+3A_missing">missing</code></td>
<td>
<p>convert codes that are missing value to missing values.</p>
</td></tr>
<tr><td><code id="labels.code_+3A_droplevels">droplevels</code></td>
<td>
<p>remove labels that do not occur in <code>x</code>.</p>
</td></tr>
<tr><td><code id="labels.code_+3A_codelist">codelist</code></td>
<td>
<p>a <code><a href="#topic+codelist">codelist</a></code> object or a <code>data.frame</code> that
is a valid code list.</p>
</td></tr>
<tr><td><code id="labels.code_+3A_locale">locale</code></td>
<td>
<p>use the codes from the given locale. Should be character
vector of length 1.</p>
</td></tr>
<tr><td><code id="labels.code_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
<tr><td><code id="labels.code_+3A_x">x</code></td>
<td>
<p>vector with codes. Should be of the same type as the codes in the
codelist.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>to_labels</code> calls <code>labels.code</code> directly and is meant as a
substitute for <code>labels.code</code> for objects that are not of type 'code'.
</p>


<h3>Value</h3>

<p>A factor vector with the same length as <code>x</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(objectsales)
data(objectcodes)
objectsales$product &lt;- code(objectsales$product, objectcodes)

labels(objectsales$product) |&gt; 
  table(useNA = "ifany")
labels(objectsales$product, missing = FALSE) |&gt; 
  table(useNA = "ifany")
labels(objectsales$product, droplevels = TRUE) |&gt; 
  table(useNA = "ifany")

to_labels(c("A", "B"), codelist = objectcodes)
# is the same as 
labels.code(c("A", "B"), codelist = objectcodes)

</code></pre>

<hr>
<h2 id='levelcast'>Recode codes to a higher level in a hierarchy</h2><span id='topic+levelcast'></span>

<h3>Description</h3>

<p>Recode codes to a higher level in a hierarchy
</p>


<h3>Usage</h3>

<pre><code class='language-R'>levelcast(
  x,
  level,
  codelist = attr(x, "codelist"),
  over_level = c("error", "missing", "ignore"),
  filter_codelist = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="levelcast_+3A_x">x</code></td>
<td>
<p>vector of codes to record. This can be an object of type
<code><a href="#topic+code">code</a></code>.</p>
</td></tr>
<tr><td><code id="levelcast_+3A_level">level</code></td>
<td>
<p>level to which to cast the codes.</p>
</td></tr>
<tr><td><code id="levelcast_+3A_codelist">codelist</code></td>
<td>
<p>the <code><a href="#topic+codelist">codelist</a></code> for the codes. This code list
should be hierarchical will the cast have effect.</p>
</td></tr>
<tr><td><code id="levelcast_+3A_over_level">over_level</code></td>
<td>
<p>how to handle codes that are in a higher level than the
level that is cast to. The default 'error' will generate an error; 'missing'
will result in missing values for those codes; 'ignore' will keep these
codes.</p>
</td></tr>
<tr><td><code id="levelcast_+3A_filter_codelist">filter_codelist</code></td>
<td>
<p>if <code>TRUE</code> codes with a level lower than the lever
cast to will be removed from the code list that is returned with the result.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When handling codes that are in a higher level than the level that is cast
to, codes that are missing values are ignored as these are often in the
highest level.
</p>


<h3>Value</h3>

<p>A vector with the same length as <code>x</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cl &lt;- codelist(
    codes = c("A", "B", "A1", "A2", "B1", "B2", "A1.1", "B2.2", "X"),
    parent = c(NA, NA, "A", "A", "B", "B", "A1", "B2", NA),
    missing = c(0, 0, 0, 0, 0, 0, 0, 0, 1)
  )
x &lt;- code(c("A1.1", "A1", "A2", "B2.2", "B2.2", NA, "B2", "X"), cl)
levelcast(x, 1)
levelcast(x, 2, over_level = "ignore")
levelcast(x, 0)

</code></pre>

<hr>
<h2 id='objectcodes'>Example code list for object types</h2><span id='topic+objectcodes'></span>

<h3>Description</h3>

<p>Contains fictional codes for various types of objects
</p>


<h3>Format</h3>

<p>Data frame with 16 records and 5 columns.
</p>


<h3>Details</h3>


<ul>
<li> <p><code>code</code> the code used for the object
</p>
</li>
<li> <p><code>label</code> label of the code
</p>
</li>
<li> <p><code>parent</code> the parent of the object in the hierarchy
</p>
</li>
<li> <p><code>locale</code> the locale of the label of the code
</p>
</li>
<li> <p><code>missing</code> should the code be treated as a missing value
</p>
</li></ul>


<hr>
<h2 id='objectsales'>Example data set to demonstrate working with code lists</h2><span id='topic+objectsales'></span>

<h3>Description</h3>

<p>Contains fictional data with sales of various types of objects.
</p>


<h3>Format</h3>

<p>Data frame with 100 records and 4 columns.
</p>


<h3>Details</h3>


<ul>
<li> <p><code>product</code> the code used for the object. Corresponds
to codes in <code><a href="#topic+objectcodes">objectcodes</a></code>.
</p>
</li>
<li> <p><code>unitprice</code> price per object.
</p>
</li>
<li> <p><code>quantity</code> number of objects sold.
</p>
</li>
<li> <p><code>totalprice</code> total price of sold objects.
</p>
</li></ul>


</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
