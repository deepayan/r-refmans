<!DOCTYPE html><html lang="en"><head><title>Help for package portalr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {portalr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#portalr'><p>Creates summaries of the Portal data</p></a></li>
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#add_seasons'><p>Add Seasons</p></a></li>
<li><a href='#bait_presence_absence'><p>Ant Bait Presence Absence</p></a></li>
<li><a href='#check_default_data_path'><p>Manage the default path for downloading Portal Data into</p></a></li>
<li><a href='#check_for_newer_data'><p>Check for latest version of data files</p></a></li>
<li><a href='#clean_plant_data'><p>Do basic cleaning of Portal plant data</p></a></li>
<li><a href='#clean_rodent_data'><p>Do basic cleaning of Portal rodent data</p></a></li>
<li><a href='#colony_presence_absence'><p>Ant Colony Presence Absence</p></a></li>
<li><a href='#download_observations'><p>Download the PortalData repo</p></a></li>
<li><a href='#fcast_ndvi'><p>Forecast ndvi using a seasonal auto ARIMA</p></a></li>
<li><a href='#fill_missing_ndvi'><p>Fill in historic ndvi data to the complete timeseries being fit</p></a></li>
<li><a href='#find_incomplete_censuses'><p>Period code for incomplete censuses</p></a></li>
<li><a href='#get_dataset_citation'><p>Return Citation for Portal Data</p></a></li>
<li><a href='#get_future_newmoons'><p>Get future newmoon dates and numbers</p></a></li>
<li><a href='#load_datafile'><p>read in a raw datafile from the downloaded data or the GitHub repo</p></a></li>
<li><a href='#load_rodent_data'><p>Read in the Portal data files</p></a></li>
<li><a href='#na_conformer'><p>Conform NA entries to &quot;NA&quot; entries</p></a></li>
<li><a href='#ndvi'><p>NDVI by calendar month or lunar month</p></a></li>
<li><a href='#phenocam'><p>Phenocam data products by day, calendar month, or lunar month</p></a></li>
<li><a href='#print.portal_data_list'><p>Prints a portal_data_list object</p></a></li>
<li><a href='#return_if_null'><p>If a Value is NULL, Trigger the Parent Function's Return</p></a></li>
<li><a href='#rodent_species'><p>Rodent species abbreviations</p></a></li>
<li><a href='#shrub_cover'><p>Generate percent cover from Portal plant transect data</p></a></li>
<li><a href='#summarize_individual_rodents'><p>Return cleaned Portal rodent individual data</p></a></li>
<li><a href='#summarize_plant_data'><p>Generate summaries of Portal plant data</p></a></li>
<li><a href='#summarize_rodent_data'><p>Generate summaries of Portal rodent data</p></a></li>
<li><a href='#weather'><p>Weather by day, calendar month, or lunar month</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Create Useful Summaries of the Portal Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Download and generate summaries for the rodent,
    plant, ant, and weather data from the Portal Project. Portal is a
    long-term (and ongoing) experimental monitoring site in the Chihuahuan
    desert. The raw data files can be found at
    <a href="https://github.com/weecology/portaldata">https://github.com/weecology/portaldata</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://weecology.github.io/portalr/">https://weecology.github.io/portalr/</a>,
<a href="https://github.com/weecology/portalr">https://github.com/weecology/portalr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/weecology/portalr/issues">https://github.com/weecology/portalr/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.3)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, clipr, dplyr, forecast, httr, lubridate, lunar, magrittr,
rlang, tidyr, tidyselect (&ge; 1.2.1), zoo</td>
</tr>
<tr>
<td>Suggests:</td>
<td>cowplot, ggplot2, httptest, knitr, rmarkdown, testthat (&ge;
3.0.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-09-23 22:02:16 UTC; GlendaYenni</td>
</tr>
<tr>
<td>Author:</td>
<td>Glenda M. Yenni <a href="https://orcid.org/0000-0001-6969-1848"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Hao Ye <a href="https://orcid.org/0000-0002-8630-1458"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Erica M. Christensen
    <a href="https://orcid.org/0000-0002-5635-2502"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Juniper L. Simonis
    <a href="https://orcid.org/0000-0001-9798-0460"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Ellen K. Bledsoe <a href="https://orcid.org/0000-0002-3629-7235"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Renata M. Diaz <a href="https://orcid.org/0000-0003-0803-4734"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Shawn D. Taylor <a href="https://orcid.org/0000-0002-6178-6903"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Ethan P, White <a href="https://orcid.org/0000-0001-6728-7745"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  S.K. Morgan Ernest
    <a href="https://orcid.org/0000-0002-6026-8530"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Weecology [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Glenda M. Yenni &lt;glenda@weecology.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-09-23 23:20:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='portalr'>Creates summaries of the Portal data</h2><span id='topic+portalr-package'></span><span id='topic+portalr'></span>

<h3>Description</h3>

<p>This package is designed to be an interface to the Portal data, which resides online at <a href="https://github.com/weecology/portalData">https://github.com/weecology/portalData</a>. Its contains a set of functions to download, clean, and summarize the data.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Glenda M. Yenni <a href="mailto:glenda@weecology.org">glenda@weecology.org</a> (<a href="https://orcid.org/0000-0001-6969-1848">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Hao Ye (<a href="https://orcid.org/0000-0002-8630-1458">ORCID</a>)
</p>
</li>
<li><p> Erica M. Christensen (<a href="https://orcid.org/0000-0002-5635-2502">ORCID</a>)
</p>
</li>
<li><p> Juniper L. Simonis (<a href="https://orcid.org/0000-0001-9798-0460">ORCID</a>)
</p>
</li>
<li><p> Ellen K. Bledsoe (<a href="https://orcid.org/0000-0002-3629-7235">ORCID</a>)
</p>
</li>
<li><p> Renata M. Diaz (<a href="https://orcid.org/0000-0003-0803-4734">ORCID</a>)
</p>
</li>
<li><p> Shawn D. Taylor (<a href="https://orcid.org/0000-0002-6178-6903">ORCID</a>)
</p>
</li>
<li><p> Ethan P, White (<a href="https://orcid.org/0000-0001-6728-7745">ORCID</a>)
</p>
</li>
<li><p> S.K. Morgan Ernest (<a href="https://orcid.org/0000-0002-6026-8530">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Weecology [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://weecology.github.io/portalr/">https://weecology.github.io/portalr/</a>
</p>
</li>
<li> <p><a href="https://github.com/weecology/portalr">https://github.com/weecology/portalr</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/weecology/portalr/issues">https://github.com/weecology/portalr/issues</a>
</p>
</li></ul>


<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic++25+3E+25">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>

<hr>
<h2 id='add_seasons'>Add Seasons</h2><span id='topic+add_seasons'></span><span id='topic+yearly'></span>

<h3>Description</h3>

<p>Higher-order data summaries, by 6-month seasons, 3-month seasons, or year.
Also applies specified functions to the specified summary level.
</p>
<p><code>yearly</code> generates a table of yearly means
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_seasons(
  data,
  level = "site",
  season_level = 2,
  date_column = "yearmon",
  summary_funs = NA,
  path = get_default_data_path(),
  download_if_missing = TRUE,
  clean = TRUE
)

yearly(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_seasons_+3A_data">data</code></td>
<td>
<p>data frame containing columns: date, period, newmoonnumber, or year and month</p>
</td></tr>
<tr><td><code id="add_seasons_+3A_level">level</code></td>
<td>
<p>summarize by &quot;Plot&quot;, &quot;Treatment&quot;, or &quot;Site&quot;</p>
</td></tr>
<tr><td><code id="add_seasons_+3A_season_level">season_level</code></td>
<td>
<p>either year,
2: winter = Oct-March
summer = April-Sept
4: winter = Dec-Feb
spring = March-May
summer = Jun-Aug
fall = Sep-Nov</p>
</td></tr>
<tr><td><code id="add_seasons_+3A_date_column">date_column</code></td>
<td>
<p>either &quot;date&quot; (must be in format &quot;y-m-d&quot;), &quot;period&quot;, &quot;newmoonnumber&quot;,
or &quot;yearmon&quot; (data must contain &quot;year&quot; and &quot;month&quot;)</p>
</td></tr>
<tr><td><code id="add_seasons_+3A_summary_funs">summary_funs</code></td>
<td>
<p>A function specified by its name (e.g. &quot;mean&quot;).
Default is NA (returned with seasons added but not summarized).</p>
</td></tr>
<tr><td><code id="add_seasons_+3A_path">path</code></td>
<td>
<p>either the file path that contains the PortalData folder or
&quot;repo&quot;, which then pulls data from the PortalData GitHub repository</p>
</td></tr>
<tr><td><code id="add_seasons_+3A_download_if_missing">download_if_missing</code></td>
<td>
<p>if the specified file path doesn't have the
PortalData folder, then download it</p>
</td></tr>
<tr><td><code id="add_seasons_+3A_clean">clean</code></td>
<td>
<p>logical, load only QA/QC rodent data (TRUE) or all data (FALSE)</p>
</td></tr>
<tr><td><code id="add_seasons_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="#topic+add_seasons">add_seasons</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame with additional &quot;season&quot; and &quot;year&quot; column, and other columns summarized
as specified. If no summary function is specified, &quot;season&quot; and &quot;year&quot; columns are
added to original dataframe, as well as a &quot;seasonyear&quot; column which correctly assigns
months to seasons for grouping (eg December 2000 in winter 2001, rather than winter 2000).
</p>

<hr>
<h2 id='bait_presence_absence'>Ant Bait Presence Absence</h2><span id='topic+bait_presence_absence'></span>

<h3>Description</h3>

<p>Get ant species presence/absence by year/plot/stake from bait census data
</p>
<p>Bait census data is more consistent over time than the colony census data. This function assumes that all species
present in at least one census were censused in all years.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bait_presence_absence(
  path = get_default_data_path(),
  level = "Site",
  download_if_missing = TRUE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bait_presence_absence_+3A_path">path</code></td>
<td>
<p>either the file path that contains the PortalData folder or
&quot;repo&quot;, which then pulls data from the PortalData GitHub repository</p>
</td></tr>
<tr><td><code id="bait_presence_absence_+3A_level">level</code></td>
<td>
<p>level at which to summarize data: 'Site', 'Plot', or 'Stake'</p>
</td></tr>
<tr><td><code id="bait_presence_absence_+3A_download_if_missing">download_if_missing</code></td>
<td>
<p>if the specified file path doesn't have the
PortalData folder, then download it</p>
</td></tr>
<tr><td><code id="bait_presence_absence_+3A_quiet">quiet</code></td>
<td>
<p>logical, whether to run without version messages</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame with year, species, (plot if applicable), and presence [1, 0]
</p>

<hr>
<h2 id='check_default_data_path'>Manage the default path for downloading Portal Data into</h2><span id='topic+check_default_data_path'></span><span id='topic+get_default_data_path'></span><span id='topic+use_default_data_path'></span>

<h3>Description</h3>

<p><code>check_default_data_path</code> checks if a default data path is
set, and prompts the user to set it if it is missing.
</p>
<p><code>get_default_data_path</code> gets the value of the data path
environmental variable
</p>
<p><code>use_default_data_path</code> has 3 steps. First, it checks for
the presence of a pre-existing setting for the environmental variable.
Then it checks if the folder exists and creates it, if needed. Then it
provides instructions for setting the environmental variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_default_data_path(
  ENV_VAR = "PORTALR_DATA_PATH",
  MESSAGE_FUN = message,
  DATA_NAME = "Portal data"
)

get_default_data_path(fallback = "~", ENV_VAR = "PORTALR_DATA_PATH")

use_default_data_path(path = NULL, ENV_VAR = "PORTALR_DATA_PATH")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_default_data_path_+3A_env_var">ENV_VAR</code></td>
<td>
<p>the environmental variable to check (by default
'&quot;PORTALR_DATA_PATH&quot;&ldquo;)</p>
</td></tr>
<tr><td><code id="check_default_data_path_+3A_message_fun">MESSAGE_FUN</code></td>
<td>
<p>the function to use to output messages</p>
</td></tr>
<tr><td><code id="check_default_data_path_+3A_data_name">DATA_NAME</code></td>
<td>
<p>the name of the dataset to use in output messages</p>
</td></tr>
<tr><td><code id="check_default_data_path_+3A_fallback">fallback</code></td>
<td>
<p>the default value to use if the setting is missing</p>
</td></tr>
<tr><td><code id="check_default_data_path_+3A_path">path</code></td>
<td>
<p><code>character</code> Folder into which data will be downloaded.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>FALSE if there is no path set, TRUE otherwise
</p>
<p>None
</p>

<hr>
<h2 id='check_for_newer_data'>Check for latest version of data files</h2><span id='topic+check_for_newer_data'></span>

<h3>Description</h3>

<p>Check the latest version against the data that exists on the GitHub repo
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_for_newer_data(path = get_default_data_path())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_for_newer_data_+3A_path">path</code></td>
<td>
<p>Folder in which data will be checked</p>
</td></tr>
</table>


<h3>Value</h3>

<p>bool TRUE if there is a newer version of the data online
</p>

<hr>
<h2 id='clean_plant_data'>Do basic cleaning of Portal plant data</h2><span id='topic+clean_plant_data'></span>

<h3>Description</h3>

<p>This function does basic quality control of the Portal plant
data. It is mainly called from <code><a href="#topic+summarize_plant_data">summarize_plant_data</a></code>, with
several arguments passed along.
</p>
<p>The specific steps it does are, in order:
(1) correct species names according to recent vouchers, if requested
(2) restrict species to annuals or non-woody
(3) remove records for unidentified species
(5) exclude the plots that aren't long-term treatments
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_plant_data(
  data_tables,
  type = "All",
  unknowns = FALSE,
  correct_sp = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clean_plant_data_+3A_data_tables">data_tables</code></td>
<td>
<p>the list of data_tables, returned from calling
<code><a href="#topic+load_plant_data">load_plant_data</a></code></p>
</td></tr>
<tr><td><code id="clean_plant_data_+3A_type">type</code></td>
<td>
<p>specify subset of species;
If type=Annuals, removes all non-annual species.
If type=Non-woody, removes shrub and subshrub species
If type=Perennials, returns all perennial species (includes shrubs and subshrubs)
If type=Shrubs, returns only shrubs and subshrubs
If type=Winter-annual, returns all annuals found in winter
IF type=Summer-annual, returns all annuals found in summer</p>
</td></tr>
<tr><td><code id="clean_plant_data_+3A_unknowns">unknowns</code></td>
<td>
<p>either removes all individuals not identified to species
(unknowns = FALSE) or sums them in an additional column (unknowns = TRUE)</p>
</td></tr>
<tr><td><code id="clean_plant_data_+3A_correct_sp">correct_sp</code></td>
<td>
<p>T/F whether or not to use likely corrected plant IDs,
passed to <code>rename_species_plants</code></p>
</td></tr>
</table>

<hr>
<h2 id='clean_rodent_data'>Do basic cleaning of Portal rodent data</h2><span id='topic+clean_rodent_data'></span>

<h3>Description</h3>

<p>This function does basic quality control of the Portal rodent
data. It is mainly called from <code><a href="#topic+summarize_rodent_data">summarize_rodent_data</a></code>, with
several arguments passed along.
</p>
<p>The specific steps it does are, in order:
(1) add in missing weight data
(2) remove records with &quot;bad&quot; period codes or plot numbers
(3) remove records for unidentified species
(4) exclude non-granivores
(5) exclude incomplete trapping sessions
(6) exclude the plots that aren't long-term treatments
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_rodent_data(
  rodent_data,
  species_table,
  fillweight = FALSE,
  type = "Rodents",
  unknowns = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clean_rodent_data_+3A_rodent_data">rodent_data</code></td>
<td>
<p>the raw rodent data table</p>
</td></tr>
<tr><td><code id="clean_rodent_data_+3A_species_table">species_table</code></td>
<td>
<p>the species table</p>
</td></tr>
<tr><td><code id="clean_rodent_data_+3A_fillweight">fillweight</code></td>
<td>
<p>specify whether to fill in unknown weights with other
records from that individual or species, where possible</p>
</td></tr>
<tr><td><code id="clean_rodent_data_+3A_type">type</code></td>
<td>
<p>specify subset of species; either all &quot;Rodents&quot; or only
&quot;Granivores&quot;</p>
</td></tr>
<tr><td><code id="clean_rodent_data_+3A_unknowns">unknowns</code></td>
<td>
<p>either removes all individuals not identified to species
(unknowns = FALSE) or sums them in an additional column (unknowns = TRUE)</p>
</td></tr>
</table>

<hr>
<h2 id='colony_presence_absence'>Ant Colony Presence Absence</h2><span id='topic+colony_presence_absence'></span>

<h3>Description</h3>

<p>Get ant species presence/absence by year/plot/stake from colony census data
</p>
<p>Anomalies in ant colony census protocol over the years means that it can be difficult to discern true absences
of all species in all years.  This function uses information from Portal_ant_species.csv and Portal_ant_dataflags.csv
to predict true presence/absence of species per plot per year.  If a more conservative estimate is desired,
setting the argument 'rare_sp = T' will only include species we are confident were censused regularly. Setting
'rare_sp = F' may include some false absences, since it is unknown if some rare species were censused in all years.
Unknowns may also be excluded from output if desired.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>colony_presence_absence(
  path = get_default_data_path(),
  level = "Site",
  rare_sp = FALSE,
  unknowns = FALSE,
  download_if_missing = TRUE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="colony_presence_absence_+3A_path">path</code></td>
<td>
<p>either the file path that contains the PortalData folder or
&quot;repo&quot;, which then pulls data from the PortalData GitHub repository</p>
</td></tr>
<tr><td><code id="colony_presence_absence_+3A_level">level</code></td>
<td>
<p>level at which to summarize data: 'Site', 'Plot', or 'Stake'</p>
</td></tr>
<tr><td><code id="colony_presence_absence_+3A_rare_sp">rare_sp</code></td>
<td>
<p>include rare species (T) or not (F).
Rare species may or may not have been censused in all years. Setting
'rare_sp = FALSE' gives a more conservative estimate of presence/absence</p>
</td></tr>
<tr><td><code id="colony_presence_absence_+3A_unknowns">unknowns</code></td>
<td>
<p>include unknown species (TRUE) or not (FALSE). Unknowns
include those only identified to genus.</p>
</td></tr>
<tr><td><code id="colony_presence_absence_+3A_download_if_missing">download_if_missing</code></td>
<td>
<p>if the specified file path doesn't have the
PortalData folder, then download it</p>
</td></tr>
<tr><td><code id="colony_presence_absence_+3A_quiet">quiet</code></td>
<td>
<p>logical, whether to run without version messages</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame with year, species, (plot if applicable), and presence [1, 0, NA]
</p>

<hr>
<h2 id='download_observations'>Download the PortalData repo</h2><span id='topic+download_observations'></span>

<h3>Description</h3>

<p>Downloads specified version of the Portal data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_observations(
  path = get_default_data_path(),
  version = "latest",
  source = "github",
  quiet = FALSE,
  verbose = FALSE,
  pause = 30,
  timeout = getOption("timeout"),
  force = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_observations_+3A_path">path</code></td>
<td>
<p><code>character</code> Folder into which data will be downloaded.</p>
</td></tr>
<tr><td><code id="download_observations_+3A_version">version</code></td>
<td>
<p><code>character</code> Version of the data to download (default = &quot;latest&quot;). If <code>NULL</code>, returns.</p>
</td></tr>
<tr><td><code id="download_observations_+3A_source">source</code></td>
<td>
<p><code>character</code> indicator of the source for the download. Either <code>"github"</code> (default) or <code>"zenodo"</code>.</p>
</td></tr>
<tr><td><code id="download_observations_+3A_quiet">quiet</code></td>
<td>
<p><code>logical</code> whether to download data silently.</p>
</td></tr>
<tr><td><code id="download_observations_+3A_verbose">verbose</code></td>
<td>
<p><code>logical</code> whether to provide details of downloading.</p>
</td></tr>
<tr><td><code id="download_observations_+3A_pause">pause</code></td>
<td>
<p>Positive <code>integer</code> or integer <code>numeric</code> seconds for pausing during steps around unzipping that require time delayment.</p>
</td></tr>
<tr><td><code id="download_observations_+3A_timeout">timeout</code></td>
<td>
<p>Positive <code>integer</code> or integer <code>numeric</code> seconds for timeout on downloads. Temporarily overrides the <code>"timeout"</code> option in <code><a href="base.html#topic+options">options</a></code>.</p>
</td></tr>
<tr><td><code id="download_observations_+3A_force">force</code></td>
<td>
<p><code>logical</code> indicator of whether or not existing files or folders (such as the archive) should be over-written if an up-to-date copy exists (most users should leave as <code>FALSE</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>NULL invisibly.
</p>

<hr>
<h2 id='fcast_ndvi'>Forecast ndvi using a seasonal auto ARIMA</h2><span id='topic+fcast_ndvi'></span>

<h3>Description</h3>

<p>Forecast ndvi using a seasonal auto ARIMA
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fcast_ndvi(hist_ndvi, level, lead, moons = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fcast_ndvi_+3A_hist_ndvi">hist_ndvi</code></td>
<td>
<p>historic ndvi data</p>
</td></tr>
<tr><td><code id="fcast_ndvi_+3A_level">level</code></td>
<td>
<p>specify &quot;monthly&quot; or &quot;newmoon&quot;</p>
</td></tr>
<tr><td><code id="fcast_ndvi_+3A_lead">lead</code></td>
<td>
<p>number of steps forward to forecast</p>
</td></tr>
<tr><td><code id="fcast_ndvi_+3A_moons">moons</code></td>
<td>
<p>moon data (required if level = &quot;newmoon&quot;)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>ndvi values are forecast using auto.arima with seasonality (using
a Fourier transform)
</p>


<h3>Value</h3>

<p>a data.frame with time and ndvi values
</p>

<hr>
<h2 id='fill_missing_ndvi'>Fill in historic ndvi data to the complete timeseries being fit</h2><span id='topic+fill_missing_ndvi'></span>

<h3>Description</h3>

<p>Fill in historic ndvi data to the complete timeseries being fit
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fill_missing_ndvi(ndvi, level, last_time, moons = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fill_missing_ndvi_+3A_ndvi">ndvi</code></td>
<td>
<p>ndvi data</p>
</td></tr>
<tr><td><code id="fill_missing_ndvi_+3A_level">level</code></td>
<td>
<p>specify &quot;monthly&quot; or &quot;newmoon&quot;</p>
</td></tr>
<tr><td><code id="fill_missing_ndvi_+3A_last_time">last_time</code></td>
<td>
<p>the last time step to have been completed</p>
</td></tr>
<tr><td><code id="fill_missing_ndvi_+3A_moons">moons</code></td>
<td>
<p>moon data (required if level = &quot;newmoons&quot; and forecasts are
needed)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>missing values during the time series are replaced using
na.interp, missing values at the end of the time series are forecast using
auto.arima with seasonality (using Fourier transform)
</p>


<h3>Value</h3>

<p>a data.frame with time and ndvi values
</p>

<hr>
<h2 id='find_incomplete_censuses'>Period code for incomplete censuses</h2><span id='topic+find_incomplete_censuses'></span>

<h3>Description</h3>

<p>Determines incomplete censuses by finding dates when some plots
were trapped, but others were not.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_incomplete_censuses(trapping_table, min_plots, min_traps)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="find_incomplete_censuses_+3A_trapping_table">trapping_table</code></td>
<td>
<p>Data_table of when plots were censused.</p>
</td></tr>
<tr><td><code id="find_incomplete_censuses_+3A_min_plots">min_plots</code></td>
<td>
<p>minimum number of plots within a period for an
observation to be included</p>
</td></tr>
<tr><td><code id="find_incomplete_censuses_+3A_min_traps">min_traps</code></td>
<td>
<p>minimum number of traps for a plot to be included</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data.table of period codes when not all plots were trapped.
</p>

<hr>
<h2 id='get_dataset_citation'>Return Citation for Portal Data</h2><span id='topic+get_dataset_citation'></span>

<h3>Description</h3>

<p>Return Citation for Portal Data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_dataset_citation()
</code></pre>


<h3>Value</h3>

<p>An object of class &quot;citation&quot;. For more details, see 'citation()'
</p>

<hr>
<h2 id='get_future_newmoons'>Get future newmoon dates and numbers</h2><span id='topic+get_future_newmoons'></span>

<h3>Description</h3>

<p>Get next newmoon dates and assign newmoon numbers for forecasting
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_future_newmoons(newmoons, nfuture_newmoons = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_future_newmoons_+3A_newmoons">newmoons</code></td>
<td>
<p>current newmoon table</p>
</td></tr>
<tr><td><code id="get_future_newmoons_+3A_nfuture_newmoons">nfuture_newmoons</code></td>
<td>
<p>number of future newmoons to get</p>
</td></tr>
</table>


<h3>Value</h3>

<p>expected newmoons table for requested future newmoons
</p>

<hr>
<h2 id='load_datafile'>read in a raw datafile from the downloaded data or the GitHub repo</h2><span id='topic+load_datafile'></span>

<h3>Description</h3>

<p>does checking for whether a particular datafile exists and then
reads it in, using na_strings to determine what gets converted to NA. It
can also download the dataset if it's missing locally.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_datafile(
  datafile,
  na.strings = "",
  path = get_default_data_path(),
  download_if_missing = TRUE,
  quiet = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="load_datafile_+3A_datafile">datafile</code></td>
<td>
<p>the path to the datafile within the folder for Portal data</p>
</td></tr>
<tr><td><code id="load_datafile_+3A_na.strings">na.strings</code></td>
<td>
<p>a character vector of strings which are to be
interpreted as <code><a href="base.html#topic+NA">NA</a></code> values.  Blank fields are also
considered to be missing values in logical, integer, numeric and
complex fields.  Note that the test happens <em>after</em>
white space is stripped from the input, so <code>na.strings</code>
values may need their own white space stripped in advance.</p>
</td></tr>
<tr><td><code id="load_datafile_+3A_path">path</code></td>
<td>
<p>either the file path that contains the PortalData folder or
&quot;repo&quot;, which then pulls data from the PortalData GitHub repository</p>
</td></tr>
<tr><td><code id="load_datafile_+3A_download_if_missing">download_if_missing</code></td>
<td>
<p>if the specified file path doesn't have the
PortalData folder, then download it</p>
</td></tr>
<tr><td><code id="load_datafile_+3A_quiet">quiet</code></td>
<td>
<p>logical, whether to perform operations silently</p>
</td></tr>
<tr><td><code id="load_datafile_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="#topic+download_observations">download_observations</a></code></p>
</td></tr>
</table>

<hr>
<h2 id='load_rodent_data'>Read in the Portal data files</h2><span id='topic+load_rodent_data'></span><span id='topic+load_plant_data'></span><span id='topic+load_ant_data'></span><span id='topic+load_trapping_data'></span>

<h3>Description</h3>

<p>Loads Portal data files from either a user-defined
path or the online Github repository. If the user-defined path is un-
available, the default option is to download to that location.
</p>
<p><code><a href="#topic+load_rodent_data">load_rodent_data</a></code> loads the rodent data files
</p>
<p><code><a href="#topic+load_plant_data">load_plant_data</a></code> loads the plant data files
</p>
<p><code><a href="#topic+load_ant_data">load_ant_data</a></code> loads the ant data files
</p>
<p><code><a href="#topic+load_trapping_data">load_trapping_data</a></code> loads just the rodent trapping files
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_rodent_data(
  path = get_default_data_path(),
  download_if_missing = TRUE,
  clean = TRUE,
  quiet = FALSE,
  ...
)

load_plant_data(
  path = get_default_data_path(),
  download_if_missing = TRUE,
  quiet = FALSE,
  ...
)

load_ant_data(
  path = get_default_data_path(),
  download_if_missing = TRUE,
  quiet = FALSE,
  ...
)

load_trapping_data(
  path = get_default_data_path(),
  download_if_missing = TRUE,
  clean = TRUE,
  quiet = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="load_rodent_data_+3A_path">path</code></td>
<td>
<p>either the file path that contains the PortalData folder or
&quot;repo&quot;, which then pulls data from the PortalData GitHub repository</p>
</td></tr>
<tr><td><code id="load_rodent_data_+3A_download_if_missing">download_if_missing</code></td>
<td>
<p>if the specified file path doesn't have the
PortalData folder, then download it</p>
</td></tr>
<tr><td><code id="load_rodent_data_+3A_clean">clean</code></td>
<td>
<p>logical, load only QA/QC rodent data (TRUE) or all data (FALSE)</p>
</td></tr>
<tr><td><code id="load_rodent_data_+3A_quiet">quiet</code></td>
<td>
<p>logical, whether to run without version messages</p>
</td></tr>
<tr><td><code id="load_rodent_data_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="#topic+download_observations">download_observations</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="#topic+load_rodent_data">load_rodent_data</a></code> returns a list of 5 dataframes:
</p>

<table>
<tr>
 <td style="text-align: left;">
    <code>rodent_data</code> </td><td style="text-align: left;"> raw data on rodent captures</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>species_table</code> </td><td style="text-align: left;"> species code, names, types</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>trapping_table</code> </td><td style="text-align: left;"> when each plot was trapped</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>newmoons_table</code> </td><td style="text-align: left;"> pairs census periods with newmoons</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>plots_table</code> </td><td style="text-align: left;"> rodent treatment assignments for each plot</td>
</tr>
<tr>
 <td style="text-align: left;">
  </td>
</tr>

</table>

<p><code><a href="#topic+load_plant_data">load_plant_data</a></code> returns a list of 7 dataframes:
</p>

<table>
<tr>
 <td style="text-align: left;">
    <code>quadrat_data</code> </td><td style="text-align: left;"> raw plant quadrat data</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>species_table</code> </td><td style="text-align: left;"> species code, names, types</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>census_table</code> </td><td style="text-align: left;"> indicates whether each quadrat was counted in each
      census; area of each quadrat</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>date_table</code> </td><td style="text-align: left;"> start and end date of each plant census</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>plots_table</code> </td><td style="text-align: left;"> rodent treatment assignments for each plot</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>transect_data</code> </td><td style="text-align: left;"> raw plant transect data with length and height (2015-present)</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>oldtransect_data</code> </td><td style="text-align: left;"> raw plant transect data as point counts (1989-2009)</td>
</tr>
<tr>
 <td style="text-align: left;">
  </td>
</tr>

</table>

<p><code><a href="#topic+load_ant_data">load_ant_data</a></code> returns a list of 4 dataframes:
</p>

<table>
<tr>
 <td style="text-align: left;">
    <code>bait_data</code> </td><td style="text-align: left;"> raw ant bait data</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>colony_data</code> </td><td style="text-align: left;"> raw ant colony data</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>species_table</code> </td><td style="text-align: left;"> species code, names, types</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>plots_table</code> </td><td style="text-align: left;"> treatment assignments for each plot</td>
</tr>
<tr>
 <td style="text-align: left;">
  </td>
</tr>

</table>

<p><code><a href="#topic+load_trapping_data">load_trapping_data</a></code> returns a list of 2 dataframes:
</p>

<table>
<tr>
 <td style="text-align: left;">
    <code>trapping_table</code> </td><td style="text-align: left;"> when each plot was trapped</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>newmoons_table</code> </td><td style="text-align: left;"> pairs census periods with newmoons</td>
</tr>
<tr>
 <td style="text-align: left;">
  </td>
</tr>

</table>


<hr>
<h2 id='na_conformer'>Conform NA entries to &quot;NA&quot; entries</h2><span id='topic+na_conformer'></span>

<h3>Description</h3>

<p>Given the species abbreviation <em>Neotoma albigula</em> (NA), when data are read in, there can be an <code>NA</code> when it should be an <code>"NA"</code>. This function conforms the entries to be proper character values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>na_conformer(dfv, colname = "species")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="na_conformer_+3A_dfv">dfv</code></td>
<td>
<p>Either [1] a <code>data.frame</code> containing <code>colname</code> as a column with <code>NA</code>s that need to be conformed to <code>"NA"</code>s or [2] a vector with <code>NA</code>s that need to be conformed to <code>"NA"</code>s.</p>
</td></tr>
<tr><td><code id="na_conformer_+3A_colname">colname</code></td>
<td>
<p><code>character</code> value of the column name in <code>tab</code> to conform the <code>NA</code>s to <code>"NA"</code>s.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> with any <code>NA</code> in <code>colname</code> replaced with <code>"NA"</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> na_conformer(c("a", "b", NA, "c"))

</code></pre>

<hr>
<h2 id='ndvi'>NDVI by calendar month or lunar month</h2><span id='topic+ndvi'></span>

<h3>Description</h3>

<p>Summarize NDVI data to monthly or lunar monthly level
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ndvi(
  level = "monthly",
  sensor = "landsat",
  fill = FALSE,
  path = get_default_data_path(),
  download_if_missing = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ndvi_+3A_level">level</code></td>
<td>
<p>specify &quot;monthly&quot; or &quot;newmoon&quot;</p>
</td></tr>
<tr><td><code id="ndvi_+3A_sensor">sensor</code></td>
<td>
<p>specify &quot;landsat&quot;, &quot;modis&quot;, &quot;gimms&quot;, or &quot;all&quot;</p>
</td></tr>
<tr><td><code id="ndvi_+3A_fill">fill</code></td>
<td>
<p>specify if missing data should be filled, passed to
<code>fill_missing_ndvi</code></p>
</td></tr>
<tr><td><code id="ndvi_+3A_path">path</code></td>
<td>
<p>either the file path that contains the PortalData folder or
&quot;repo&quot;, which then pulls data from the PortalData GitHub repository</p>
</td></tr>
<tr><td><code id="ndvi_+3A_download_if_missing">download_if_missing</code></td>
<td>
<p>if the specified file path doesn't have the
PortalData folder, then download it</p>
</td></tr>
</table>

<hr>
<h2 id='phenocam'>Phenocam data products by day, calendar month, or lunar month</h2><span id='topic+phenocam'></span>

<h3>Description</h3>

<p>Summarize phenocam data products to either daily, monthly, or lunar monthly level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>phenocam(level = "daily", path = get_default_data_path())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="phenocam_+3A_level">level</code></td>
<td>
<p>specify 'monthly', 'daily', or 'newmoon'</p>
</td></tr>
<tr><td><code id="phenocam_+3A_path">path</code></td>
<td>
<p>either the file path that contains the PortalData folder or
&quot;repo&quot;, which then pulls data from the PortalData GitHub repository</p>
</td></tr>
</table>

<hr>
<h2 id='print.portal_data_list'>Prints a portal_data_list object</h2><span id='topic+print.portal_data_list'></span><span id='topic+print'></span>

<h3>Description</h3>

<p>Prints a portal_data_list object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'portal_data_list'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.portal_data_list_+3A_x">x</code></td>
<td>
<p>A portal_data_list object.</p>
</td></tr>
<tr><td><code id="print.portal_data_list_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="#topic+print">print</a></code></p>
</td></tr>
</table>

<hr>
<h2 id='return_if_null'>If a Value is NULL, Trigger the Parent Function's Return</h2><span id='topic+return_if_null'></span>

<h3>Description</h3>

<p>If the focal input is <code>NULL</code>, return <code>value</code> from the parent function. Should only be used within a function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>return_if_null(x, value = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="return_if_null_+3A_x">x</code></td>
<td>
<p>Focal input.</p>
</td></tr>
<tr><td><code id="return_if_null_+3A_value">value</code></td>
<td>
<p>If <code>x</code> is <code>NULL</code>, <code><a href="base.html#topic+return">return</a></code> this input from the parent function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>x</code> is not <code>NULL</code>, <code>NULL</code> is returned. If <code>x</code> is <code>NULL</code>, the result of <code><a href="base.html#topic+return">return</a></code> with <code>value</code> as its input evaluated within the parent function's environment is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> ff &lt;- function(x = 1, null_return = "hello"){
   return_if_null(x, null_return)
   x
 }
 ff()
 ff(NULL)

</code></pre>

<hr>
<h2 id='rodent_species'>Rodent species abbreviations</h2><span id='topic+rodent_species'></span><span id='topic+forecasting_species'></span>

<h3>Description</h3>

<p>Creates a simple <code>character</code> vector of abbreviations for the Portal <a href="https://portal.naturecast.org/">Rodents</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rodent_species(
  path = get_default_data_path(),
  type = "code",
  set = "all",
  total = FALSE
)

forecasting_species(
  path = get_default_data_path(),
  total = FALSE,
  type = "abbreviation"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rodent_species_+3A_path">path</code></td>
<td>
<p><code>character</code> Folder into which data will be downloaded.</p>
</td></tr>
<tr><td><code id="rodent_species_+3A_type">type</code></td>
<td>
<p><code>character</code> value indicating the output type. Current options include <code>'abbreviation'</code> or <code>'code'</code> (default, two-letter abbreviation), <code>'g_species'</code> (abbreviated genus and species), <code>'Latin'</code> (full scientific names), <code>'common'</code> (common names), and  <code>'table'</code> (a <code>data.frame</code> of all the options).</p>
</td></tr>
<tr><td><code id="rodent_species_+3A_set">set</code></td>
<td>
<p><code>character</code> input of a specified set of species. Options include <code>"all"</code> (default, all species included) and <code>"forecasting"</code> (the species used in forecating pipelines).</p>
</td></tr>
<tr><td><code id="rodent_species_+3A_total">total</code></td>
<td>
<p><code>logical</code> value indicating if <code>"total"</code> should be added or not.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>character</code> vector of species abbreviations.
</p>

<hr>
<h2 id='shrub_cover'>Generate percent cover from Portal plant transect data</h2><span id='topic+shrub_cover'></span>

<h3>Description</h3>

<p>This function calculates percent cover from transect data.
It handles the pre-2015 data differently from the current transects,
becase they are collected differently. But it returns a single time-series
with all years of transect data available. It also returns mean height
beginning in 2015.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shrub_cover(
  path = get_default_data_path(),
  type = "Shrubs",
  plots = "all",
  unknowns = FALSE,
  correct_sp = TRUE,
  download_if_missing = TRUE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="shrub_cover_+3A_path">path</code></td>
<td>
<p>either the file path that contains the PortalData folder or
&quot;repo&quot;, which then pulls data from the PortalData GitHub repository</p>
</td></tr>
<tr><td><code id="shrub_cover_+3A_type">type</code></td>
<td>
<p>specify subset of species;
If type=Annuals, removes all non-annual species.
If type=Summer Annuals, returns all annual species that can be found in the summer
If type=Winter Annuals, returns all annual species that can be found in the winter
If type=Non-woody, removes shrub and subshrub species
If type=Perennials, returns all perennial species (includes shrubs and subshrubs)
If type=Shrubs, returns only shrubs and subshrubs</p>
</td></tr>
<tr><td><code id="shrub_cover_+3A_plots">plots</code></td>
<td>
<p>specify subset of plots; can be a vector of plots, or specific
sets: &quot;all&quot; plots or &quot;Longterm&quot; plots (plots that have had the same
treatment for the entire time series)</p>
</td></tr>
<tr><td><code id="shrub_cover_+3A_unknowns">unknowns</code></td>
<td>
<p>either removes all individuals not identified to species
(unknowns = FALSE) or sums them in an additional column (unknowns = TRUE)</p>
</td></tr>
<tr><td><code id="shrub_cover_+3A_correct_sp">correct_sp</code></td>
<td>
<p>correct species names suspected to be incorrect in early data (T/F)</p>
</td></tr>
<tr><td><code id="shrub_cover_+3A_download_if_missing">download_if_missing</code></td>
<td>
<p>if the specified file path doesn't have the
PortalData folder, then download it</p>
</td></tr>
<tr><td><code id="shrub_cover_+3A_quiet">quiet</code></td>
<td>
<p>logical, whether to run without version messages</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame of percent cover and mean height
</p>

<hr>
<h2 id='summarize_individual_rodents'>Return cleaned Portal rodent individual data</h2><span id='topic+summarize_individual_rodents'></span><span id='topic+summarise_individual_rodents'></span>

<h3>Description</h3>

<p>This function cleans and subsets the data based on a number
of arguments. It returns stake number and individual level data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summarize_individual_rodents(
  path = get_default_data_path(),
  clean = TRUE,
  type = "Rodents",
  length = "all",
  unknowns = FALSE,
  time = "period",
  fillweight = FALSE,
  min_plots = 1,
  min_traps = 1,
  download_if_missing = TRUE,
  quiet = FALSE
)

summarise_individual_rodents(
  path = get_default_data_path(),
  clean = TRUE,
  type = "Rodents",
  length = "all",
  unknowns = FALSE,
  time = "period",
  fillweight = FALSE,
  min_plots = 1,
  min_traps = 1,
  download_if_missing = TRUE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summarize_individual_rodents_+3A_path">path</code></td>
<td>
<p>either the file path that contains the PortalData folder or
&quot;repo&quot;, which then pulls data from the PortalData GitHub repository</p>
</td></tr>
<tr><td><code id="summarize_individual_rodents_+3A_clean">clean</code></td>
<td>
<p>logical, load only QA/QC rodent data (TRUE) or all data (FALSE)</p>
</td></tr>
<tr><td><code id="summarize_individual_rodents_+3A_type">type</code></td>
<td>
<p>specify subset of species; either all &quot;Rodents&quot; or only
&quot;Granivores&quot;</p>
</td></tr>
<tr><td><code id="summarize_individual_rodents_+3A_length">length</code></td>
<td>
<p>specify subset of plots; use &quot;All&quot; plots or only &quot;Longterm&quot;
plots (to be deprecated)</p>
</td></tr>
<tr><td><code id="summarize_individual_rodents_+3A_unknowns">unknowns</code></td>
<td>
<p>either removes all individuals not identified to species
(unknowns = FALSE) or sums them in an additional column (unknowns = TRUE)</p>
</td></tr>
<tr><td><code id="summarize_individual_rodents_+3A_time">time</code></td>
<td>
<p>specify the format of the time index in the output, either
&quot;period&quot; (sequential Portal surveys), &quot;newmoon&quot; (lunar cycle numbering),
&quot;date&quot; (calendar date), or &quot;all&quot; (for all time indices)</p>
</td></tr>
<tr><td><code id="summarize_individual_rodents_+3A_fillweight">fillweight</code></td>
<td>
<p>specify whether to fill in unknown weights with other
records from that individual or species, where possible</p>
</td></tr>
<tr><td><code id="summarize_individual_rodents_+3A_min_plots">min_plots</code></td>
<td>
<p>minimum number of plots within a period for an
observation to be included</p>
</td></tr>
<tr><td><code id="summarize_individual_rodents_+3A_min_traps">min_traps</code></td>
<td>
<p>minimum number of traps for a plot to be included</p>
</td></tr>
<tr><td><code id="summarize_individual_rodents_+3A_download_if_missing">download_if_missing</code></td>
<td>
<p>if the specified file path doesn't have the
PortalData folder, then download it</p>
</td></tr>
<tr><td><code id="summarize_individual_rodents_+3A_quiet">quiet</code></td>
<td>
<p>logical, whether to run without producing messages</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame
</p>

<hr>
<h2 id='summarize_plant_data'>Generate summaries of Portal plant data</h2><span id='topic+summarize_plant_data'></span><span id='topic+plant_abundance'></span><span id='topic+summarise_plant_data'></span>

<h3>Description</h3>

<p>This function is a generic interface into creating
summaries of the Portal plant species data. It contains a number of
arguments to specify both the kind of data to summarize, at what level of
aggregation, various choices for dealing with data quality, and output
format.
</p>
<p><code>plant_abundance</code> generates a table of plant abundance
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summarize_plant_data(
  path = get_default_data_path(),
  level = "Site",
  type = "All",
  length = "all",
  plots = length,
  unknowns = FALSE,
  correct_sp = TRUE,
  shape = "flat",
  output = "abundance",
  na_drop = switch(tolower(level), quadrat = FALSE, plot = FALSE, treatment = TRUE, site
    = TRUE, TRUE),
  zero_drop = switch(tolower(level), quadrat = TRUE, plot = FALSE, treatment = TRUE, site
    = TRUE, TRUE),
  min_quads = 1,
  effort = TRUE,
  download_if_missing = TRUE,
  quiet = FALSE
)

plant_abundance(..., shape = "flat")

summarise_plant_data(
  path = get_default_data_path(),
  level = "Site",
  type = "All",
  length = "all",
  plots = length,
  unknowns = FALSE,
  correct_sp = TRUE,
  shape = "flat",
  output = "abundance",
  na_drop = switch(tolower(level), quadrat = FALSE, plot = FALSE, treatment = TRUE, site
    = TRUE, TRUE),
  zero_drop = switch(tolower(level), quadrat = TRUE, plot = FALSE, treatment = TRUE, site
    = TRUE, TRUE),
  min_quads = 1,
  effort = TRUE,
  download_if_missing = TRUE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summarize_plant_data_+3A_path">path</code></td>
<td>
<p>either the file path that contains the PortalData folder or
&quot;repo&quot;, which then pulls data from the PortalData GitHub repository</p>
</td></tr>
<tr><td><code id="summarize_plant_data_+3A_level">level</code></td>
<td>
<p>summarize by &quot;Plot&quot;, &quot;Treatment&quot;, &quot;Site&quot;, or &quot;Quadrat&quot;</p>
</td></tr>
<tr><td><code id="summarize_plant_data_+3A_type">type</code></td>
<td>
<p>specify subset of species;
If type=Annuals, removes all non-annual species.
If type=Summer Annuals, returns all annual species that can be found in the summer
If type=Winter Annuals, returns all annual species that can be found in the winter
If type=Non-woody, removes shrub and subshrub species
If type=Perennials, returns all perennial species (includes shrubs and subshrubs)
If type=Shrubs, returns only shrubs and subshrubs</p>
</td></tr>
<tr><td><code id="summarize_plant_data_+3A_length">length</code></td>
<td>
<p>specify subset of plots; use &quot;All&quot; plots or only &quot;Longterm&quot;
plots (to be deprecated)</p>
</td></tr>
<tr><td><code id="summarize_plant_data_+3A_plots">plots</code></td>
<td>
<p>specify subset of plots; can be a vector of plots, or specific
sets: &quot;all&quot; plots or &quot;Longterm&quot; plots (plots that have had the same
treatment for the entire time series)</p>
</td></tr>
<tr><td><code id="summarize_plant_data_+3A_unknowns">unknowns</code></td>
<td>
<p>either removes all individuals not identified to species
(unknowns = FALSE) or sums them in an additional column (unknowns = TRUE)</p>
</td></tr>
<tr><td><code id="summarize_plant_data_+3A_correct_sp">correct_sp</code></td>
<td>
<p>correct species names suspected to be incorrect in early data (T/F)</p>
</td></tr>
<tr><td><code id="summarize_plant_data_+3A_shape">shape</code></td>
<td>
<p>return data as a &quot;crosstab&quot; or &quot;flat&quot; list</p>
</td></tr>
<tr><td><code id="summarize_plant_data_+3A_output">output</code></td>
<td>
<p>specify whether to return &quot;abundance&quot;, or &quot;cover&quot; [cover data
starts in summer 2015]</p>
</td></tr>
<tr><td><code id="summarize_plant_data_+3A_na_drop">na_drop</code></td>
<td>
<p>logical, drop NA values (representing insufficient sampling)
filling missing combinations of year-month-treatment/plot-species with NA could
represent one of a few slightly different meanings:
1) that combo doesn't exist
2) that combo was skipped that month, or
3) that combo was trapped, but is unusable (a negative period code))</p>
</td></tr>
<tr><td><code id="summarize_plant_data_+3A_zero_drop">zero_drop</code></td>
<td>
<p>logical, drop 0s (representing sufficient sampling, but no
detection)</p>
</td></tr>
<tr><td><code id="summarize_plant_data_+3A_min_quads">min_quads</code></td>
<td>
<p>numeric [1:16], minimum number of quadrats (out of 16) for a plot to be included</p>
</td></tr>
<tr><td><code id="summarize_plant_data_+3A_effort">effort</code></td>
<td>
<p>logical as to whether or not the effort columns should be
included in the output</p>
</td></tr>
<tr><td><code id="summarize_plant_data_+3A_download_if_missing">download_if_missing</code></td>
<td>
<p>if the specified file path doesn't have the
PortalData folder, then download it</p>
</td></tr>
<tr><td><code id="summarize_plant_data_+3A_quiet">quiet</code></td>
<td>
<p>logical, whether to run without version messages</p>
</td></tr>
<tr><td><code id="summarize_plant_data_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="#topic+summarize_plant_data">summarize_plant_data</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame in either &quot;long&quot; or &quot;wide&quot; format, depending on the
value of 'shape'
</p>

<hr>
<h2 id='summarize_rodent_data'>Generate summaries of Portal rodent data</h2><span id='topic+summarize_rodent_data'></span><span id='topic+abundance'></span><span id='topic+biomass'></span><span id='topic+energy'></span><span id='topic+rates'></span><span id='topic+summarise_rodent_data'></span>

<h3>Description</h3>

<p>This function is a generic interface into creating summaries
of the Portal rodent species data. It contains a number of arguments
to specify the kind of data to summarize (at what level of aggregation)
and various choices for dealing with data quality, and output format.
</p>
<p><code>abundance</code> generates a table of rodent abundance
</p>
<p>* <code>biomass()</code> generates a table of rodent biomass
</p>
<p>* <code>energy()</code> generates a table of rodent energy
(computed as 5.69 * (biomass ^ 0.75) after White et al 2004)
</p>
<p>* <code>rates()</code> generates a table of rodent growth rates
(computed as r=log(N[t+1]/N[t])
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summarize_rodent_data(
  path = get_default_data_path(),
  clean = TRUE,
  level = "Site",
  type = "Rodents",
  length = "all",
  plots = length,
  unknowns = FALSE,
  shape = "crosstab",
  time = "period",
  output = "abundance",
  fillweight = (output != "abundance"),
  na_drop = TRUE,
  zero_drop = switch(tolower(level), plot = FALSE, treatment = TRUE, site = TRUE),
  min_traps = 1,
  min_plots = 24,
  effort = FALSE,
  download_if_missing = TRUE,
  quiet = FALSE,
  include_unsampled = FALSE
)

abundance(...)

biomass(...)

energy(...)

rates(...)

summarise_rodent_data(
  path = get_default_data_path(),
  clean = TRUE,
  level = "Site",
  type = "Rodents",
  length = "all",
  plots = length,
  unknowns = FALSE,
  shape = "crosstab",
  time = "period",
  output = "abundance",
  fillweight = (output != "abundance"),
  na_drop = TRUE,
  zero_drop = switch(tolower(level), plot = FALSE, treatment = TRUE, site = TRUE),
  min_traps = 1,
  min_plots = 24,
  effort = FALSE,
  download_if_missing = TRUE,
  quiet = FALSE,
  include_unsampled = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summarize_rodent_data_+3A_path">path</code></td>
<td>
<p>either the file path that contains the PortalData folder or
&quot;repo&quot;, which then pulls data from the PortalData GitHub repository</p>
</td></tr>
<tr><td><code id="summarize_rodent_data_+3A_clean">clean</code></td>
<td>
<p>logical, load only QA/QC rodent data (TRUE) or all data (FALSE)</p>
</td></tr>
<tr><td><code id="summarize_rodent_data_+3A_level">level</code></td>
<td>
<p>summarize by &quot;Plot&quot;, &quot;Treatment&quot;, or &quot;Site&quot;</p>
</td></tr>
<tr><td><code id="summarize_rodent_data_+3A_type">type</code></td>
<td>
<p>specify subset of species; either all &quot;Rodents&quot; or only
&quot;Granivores&quot;</p>
</td></tr>
<tr><td><code id="summarize_rodent_data_+3A_length">length</code></td>
<td>
<p>specify subset of plots; use &quot;All&quot; plots or only &quot;Longterm&quot;
plots (to be deprecated)</p>
</td></tr>
<tr><td><code id="summarize_rodent_data_+3A_plots">plots</code></td>
<td>
<p>specify subset of plots; can be a vector of plots, or specific
sets: &quot;all&quot; plots or &quot;Longterm&quot; plots (plots that have had the same
treatment for the entire time series)</p>
</td></tr>
<tr><td><code id="summarize_rodent_data_+3A_unknowns">unknowns</code></td>
<td>
<p>either removes all individuals not identified to species
(unknowns = FALSE) or sums them in an additional column (unknowns = TRUE)</p>
</td></tr>
<tr><td><code id="summarize_rodent_data_+3A_shape">shape</code></td>
<td>
<p>return data as a &quot;crosstab&quot; or &quot;flat&quot; list</p>
</td></tr>
<tr><td><code id="summarize_rodent_data_+3A_time">time</code></td>
<td>
<p>specify the format of the time index in the output, either
&quot;period&quot; (sequential Portal surveys), &quot;newmoon&quot; (lunar cycle numbering),
&quot;date&quot; (calendar date), or &quot;all&quot; (for all time indices)</p>
</td></tr>
<tr><td><code id="summarize_rodent_data_+3A_output">output</code></td>
<td>
<p>specify whether to return &quot;abundance&quot;, or &quot;biomass&quot;, or
&quot;energy&quot;, or &quot;rates&quot;</p>
</td></tr>
<tr><td><code id="summarize_rodent_data_+3A_fillweight">fillweight</code></td>
<td>
<p>specify whether to fill in unknown weights with other
records from that individual or species, where possible</p>
</td></tr>
<tr><td><code id="summarize_rodent_data_+3A_na_drop">na_drop</code></td>
<td>
<p>logical, drop NA values (representing insufficient sampling)
filling missing combinations of year-month-treatment/plot-species with NA could
represent one of a few slightly different meanings:
1) that combo doesn't exist
2) that combo was skipped that month, or
3) that combo was trapped, but is unusable (a negative period code))</p>
</td></tr>
<tr><td><code id="summarize_rodent_data_+3A_zero_drop">zero_drop</code></td>
<td>
<p>logical, drop 0s (representing sufficient sampling, but no
detection)</p>
</td></tr>
<tr><td><code id="summarize_rodent_data_+3A_min_traps">min_traps</code></td>
<td>
<p>minimum number of traps for a plot to be included</p>
</td></tr>
<tr><td><code id="summarize_rodent_data_+3A_min_plots">min_plots</code></td>
<td>
<p>minimum number of plots within a period for an
observation to be included</p>
</td></tr>
<tr><td><code id="summarize_rodent_data_+3A_effort">effort</code></td>
<td>
<p>logical as to whether or not the effort columns should be
included in the output</p>
</td></tr>
<tr><td><code id="summarize_rodent_data_+3A_download_if_missing">download_if_missing</code></td>
<td>
<p>if the specified file path doesn't have the
PortalData folder, then download it</p>
</td></tr>
<tr><td><code id="summarize_rodent_data_+3A_quiet">quiet</code></td>
<td>
<p>logical, whether to run without producing messages</p>
</td></tr>
<tr><td><code id="summarize_rodent_data_+3A_include_unsampled">include_unsampled</code></td>
<td>
<p>logical, overrides settings for 'na_drop' and
'zero_drop', setting both to FALSE</p>
</td></tr>
<tr><td><code id="summarize_rodent_data_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="#topic+summarize_rodent_data">summarize_rodent_data</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame in either &quot;long&quot; or &quot;wide&quot; format, depending on the
value of 'shape'
</p>

<hr>
<h2 id='weather'>Weather by day, calendar month, or lunar month</h2><span id='topic+weather'></span>

<h3>Description</h3>

<p>Summarize hourly weather data to either daily, monthly, or lunar monthly level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weather(
  level = "daily",
  fill = FALSE,
  horizon = 365,
  temperature_limit = 4,
  path = get_default_data_path()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="weather_+3A_level">level</code></td>
<td>
<p>specify 'monthly', 'daily', or 'newmoon'</p>
</td></tr>
<tr><td><code id="weather_+3A_fill">fill</code></td>
<td>
<p>specify if missing data should be filled, passed to <code>fill_missing_weather</code></p>
</td></tr>
<tr><td><code id="weather_+3A_horizon">horizon</code></td>
<td>
<p>Horizon (number of days) to use when calculating cumulative values
(eg warm weather precip)</p>
</td></tr>
<tr><td><code id="weather_+3A_temperature_limit">temperature_limit</code></td>
<td>
<p>Temperature limit (in C) to use when calculating cumulative values
(eg warm weather precip)</p>
</td></tr>
<tr><td><code id="weather_+3A_path">path</code></td>
<td>
<p>either the file path that contains the PortalData folder or
&quot;repo&quot;, which then pulls data from the PortalData GitHub repository</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
