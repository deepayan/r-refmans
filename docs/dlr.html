<!DOCTYPE html><html><head><title>Help for package dlr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {dlr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#.do_function'><p>Do a Function Call</p></a></li>
<li><a href='#.download_then'><p>Compose a Download-then-Process Function</p></a></li>
<li><a href='#.is_url'><p>Determine if Path is a URL</p></a></li>
<li><a href='#.process_and_write'><p>Process and Write a File</p></a></li>
<li><a href='#.read_file'><p>Read/Process a File</p></a></li>
<li><a href='#.write_object'><p>Write an Object</p></a></li>
<li><a href='#app_cache_dir'><p>Path to an App Cache Directory</p></a></li>
<li><a href='#construct_cached_file_path'><p>Construct Cache Path</p></a></li>
<li><a href='#construct_processed_filename'><p>Construct Processed Filename</p></a></li>
<li><a href='#maybe_cache'><p>Cache a File if Necessary</p></a></li>
<li><a href='#maybe_process'><p>Process a File if Necessary</p></a></li>
<li><a href='#read_or_cache'><p>Read or Cache a File</p></a></li>
<li><a href='#read_or_process'><p>Read or Process a File</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#set_app_cache_dir'><p>Set a Cache Directory for an App</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Download and Cache Files Safely</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.1</td>
</tr>
<tr>
<td>Description:</td>
<td>The goal of dlr is to provide a friendly wrapper around the common 
    pattern of downloading a file if that file does not already exist locally. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (&ge; 2)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Imports:</td>
<td>digest, fs, rappdirs, rlang, utils</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/macmillancontentscience/dlr">https://github.com/macmillancontentscience/dlr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/macmillancontentscience/dlr/issues">https://github.com/macmillancontentscience/dlr/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-09-17 19:33:14 UTC; jonth</td>
</tr>
<tr>
<td>Author:</td>
<td>Jonathan Bratt <a href="https://orcid.org/0000-0003-2859-0076"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Jon Harmon <a href="https://orcid.org/0000-0003-4781-4346"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Bedford Freeman &amp; Worth Pub Grp LLC DBA Macmillan Learning [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jon Harmon &lt;jonthegeek@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-09-18 13:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='.do_function'>Do a Function Call</h2><span id='topic+.do_function'></span>

<h3>Description</h3>

<p>Do a Function Call
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.do_function(do_f, default_f, main_args, extra_args = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".do_function_+3A_do_f">do_f</code></td>
<td>
<p>The function to call.</p>
</td></tr>
<tr><td><code id=".do_function_+3A_default_f">default_f</code></td>
<td>
<p>The function to call if <code>do_f</code> is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id=".do_function_+3A_main_args">main_args</code></td>
<td>
<p>A list containing the first argument(s) to <code>do_f</code>.</p>
</td></tr>
<tr><td><code id=".do_function_+3A_extra_args">extra_args</code></td>
<td>
<p>A list containing any additional arguments to <code>do_f</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>The return from the call to <code>do_f</code>.
</p>

<hr>
<h2 id='.download_then'>Compose a Download-then-Process Function</h2><span id='topic+.download_then'></span>

<h3>Description</h3>

<p>Compose a Download-then-Process Function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.download_then(process_f)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".download_then_+3A_process_f">process_f</code></td>
<td>
<p>A function or one-sided formula to use to read and process
the raw file after it is downloaded. The path to the downloaded file will
be passed as the first argument to this function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The processed data returned by <code>process_f</code>.
</p>

<hr>
<h2 id='.is_url'>Determine if Path is a URL</h2><span id='topic+.is_url'></span>

<h3>Description</h3>

<p>Determine if Path is a URL
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.is_url(source_path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".is_url_+3A_source_path">source_path</code></td>
<td>
<p>Character; the path to check.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical indicating whether that looks like a url (<code>TRUE</code> if it
starts with <code>http://</code>, <code>http://</code>, <code>http://</code>, or
<code>http://</code>, <code>FALSE</code> otherwise).
</p>

<hr>
<h2 id='.process_and_write'>Process and Write a File</h2><span id='topic+.process_and_write'></span>

<h3>Description</h3>

<p>Process and Write a File
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.process_and_write(
  source_path,
  target_path,
  process_f,
  process_args,
  write_f,
  write_args
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".process_and_write_+3A_source_path">source_path</code></td>
<td>
<p>Character scalar; the path to the raw file. Paths starting
with <code>http://</code>, <code>http://</code>, <code>http://</code>, or <code>http://</code> will
be downloaded to a temp file if the processed version is not already
available.</p>
</td></tr>
<tr><td><code id=".process_and_write_+3A_target_path">target_path</code></td>
<td>
<p>Character scalar; the path where the processed version of
the file should be stored.</p>
</td></tr>
<tr><td><code id=".process_and_write_+3A_process_f">process_f</code></td>
<td>
<p>A function or one-sided formula to use to process the source
file. <code>source_path</code> will be passed as the first argument to this
function. Defaults to <code>read_f</code>.</p>
</td></tr>
<tr><td><code id=".process_and_write_+3A_process_args">process_args</code></td>
<td>
<p>An optional list of additional arguments to
<code>process_f</code>.</p>
</td></tr>
<tr><td><code id=".process_and_write_+3A_write_f">write_f</code></td>
<td>
<p>A function or one-sided formula to use to save the processed
file. The processed object will be passed as the first argument to this
function, and <code>target_path</code> will be passed as the second argument.
Defaults to <code><a href="base.html#topic+saveRDS">saveRDS</a></code>.</p>
</td></tr>
<tr><td><code id=".process_and_write_+3A_write_args">write_args</code></td>
<td>
<p>An optional list of additional arguments to <code>write_f</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The processed object.
</p>

<hr>
<h2 id='.read_file'>Read/Process a File</h2><span id='topic+.read_file'></span>

<h3>Description</h3>

<p>Read/Process a File
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.read_file(path, read_f, read_args)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".read_file_+3A_path">path</code></td>
<td>
<p>Character scalar; the full path to the file.</p>
</td></tr>
<tr><td><code id=".read_file_+3A_read_f">read_f</code></td>
<td>
<p>The function to use to read and process the file. The first
argument to this function must be the path to the file.</p>
</td></tr>
<tr><td><code id=".read_file_+3A_read_args">read_args</code></td>
<td>
<p>Additional arguments to <code>read_f</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The processed file.
</p>

<hr>
<h2 id='.write_object'>Write an Object</h2><span id='topic+.write_object'></span>

<h3>Description</h3>

<p>Write an Object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.write_object(object, target_path, write_f, write_args)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".write_object_+3A_object">object</code></td>
<td>
<p>An R object.</p>
</td></tr>
<tr><td><code id=".write_object_+3A_target_path">target_path</code></td>
<td>
<p>Character scalar; the full path to the file to write.</p>
</td></tr>
<tr><td><code id=".write_object_+3A_write_f">write_f</code></td>
<td>
<p>The function to use to write the file. The first argument to
this function must be the object, and the second argument must be the path
to the file.</p>
</td></tr>
<tr><td><code id=".write_object_+3A_write_args">write_args</code></td>
<td>
<p>Additional arguments to <code>write_f</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The return from the call to <code>write_f</code>.
</p>

<hr>
<h2 id='app_cache_dir'>Path to an App Cache Directory</h2><span id='topic+app_cache_dir'></span>

<h3>Description</h3>

<p>App cache directories can depend on the user's operating system and an
overall <code>R_USER_CACHE_DIR</code> environment variable. We also respect a
per-app option (<code>appname.dir</code>), and a per-app environment variable
(<code>APPNAME_CACHE_DIR</code>. This function returns the path that will be used
for a given app's cache.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>app_cache_dir(appname)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="app_cache_dir_+3A_appname">appname</code></td>
<td>
<p>Character; the name of the application that will &quot;own&quot; the
cache, such as the name of a package.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The full path to the app's cache directory.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>app_cache_dir("myApp")
</code></pre>

<hr>
<h2 id='construct_cached_file_path'>Construct Cache Path</h2><span id='topic+construct_cached_file_path'></span>

<h3>Description</h3>

<p>Construct the full path to the cached version of a file within a particular
app's cache, using the source path of the file to make sure the cache
filename is unique.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>construct_cached_file_path(source_path, appname, extension = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="construct_cached_file_path_+3A_source_path">source_path</code></td>
<td>
<p>Character scalar; the full path to the source file.</p>
</td></tr>
<tr><td><code id="construct_cached_file_path_+3A_appname">appname</code></td>
<td>
<p>Character; the name of the application that will &quot;own&quot; the
cache, such as the name of a package.</p>
</td></tr>
<tr><td><code id="construct_cached_file_path_+3A_extension">extension</code></td>
<td>
<p>Character scalar; an optional filename extension.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The full path to the processed version of source_path in the app's
cache directory.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>construct_cached_file_path(
  source_path = "my/file.txt",
  appname = "dlr",
  extension = "rds"
)
</code></pre>

<hr>
<h2 id='construct_processed_filename'>Construct Processed Filename</h2><span id='topic+construct_processed_filename'></span>

<h3>Description</h3>

<p>Given the path to a file, construct a unique filename using the hash of the
path.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>construct_processed_filename(source_path, extension = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="construct_processed_filename_+3A_source_path">source_path</code></td>
<td>
<p>Character scalar; the full path to the source file.</p>
</td></tr>
<tr><td><code id="construct_processed_filename_+3A_extension">extension</code></td>
<td>
<p>Character scalar; an optional filename extension.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A unique filename for a processed version of the file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>construct_processed_filename(
  source_path = "my/file.txt",
  extension = "rds"
)
</code></pre>

<hr>
<h2 id='maybe_cache'>Cache a File if Necessary</h2><span id='topic+maybe_cache'></span>

<h3>Description</h3>

<p>This function wraps <code><a href="#topic+maybe_process">maybe_process</a></code>, specifying the app's cache
directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>maybe_cache(
  source_path,
  appname,
  filename = construct_processed_filename(source_path),
  process_f = readRDS,
  process_args = NULL,
  write_f = saveRDS,
  write_args = NULL,
  force_process = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="maybe_cache_+3A_source_path">source_path</code></td>
<td>
<p>Character scalar; the path to the raw file. Paths starting
with <code>http://</code>, <code>http://</code>, <code>http://</code>, or <code>http://</code> will
be downloaded to a temp file if the processed version is not already
available.</p>
</td></tr>
<tr><td><code id="maybe_cache_+3A_appname">appname</code></td>
<td>
<p>Character; the name of the application that will &quot;own&quot; the
cache, such as the name of a package.</p>
</td></tr>
<tr><td><code id="maybe_cache_+3A_filename">filename</code></td>
<td>
<p>Character; an optional filename for the cached version of the
file. By default, a filename is constructed using
<code><a href="#topic+construct_processed_filename">construct_processed_filename</a></code></p>
</td></tr>
<tr><td><code id="maybe_cache_+3A_process_f">process_f</code></td>
<td>
<p>A function or one-sided formula to use to process the source
file. <code>source_path</code> will be passed as the first argument to this
function. Defaults to <code>read_f</code>.</p>
</td></tr>
<tr><td><code id="maybe_cache_+3A_process_args">process_args</code></td>
<td>
<p>An optional list of additional arguments to
<code>process_f</code>.</p>
</td></tr>
<tr><td><code id="maybe_cache_+3A_write_f">write_f</code></td>
<td>
<p>A function or one-sided formula to use to save the processed
file. The processed object will be passed as the first argument to this
function, and <code>target_path</code> will be passed as the second argument.
Defaults to <code><a href="base.html#topic+saveRDS">saveRDS</a></code>.</p>
</td></tr>
<tr><td><code id="maybe_cache_+3A_write_args">write_args</code></td>
<td>
<p>An optional list of additional arguments to <code>write_f</code>.</p>
</td></tr>
<tr><td><code id="maybe_cache_+3A_force_process">force_process</code></td>
<td>
<p>A logical scalar indicating whether we should process
the source file even if the target already exists. This can be particularly
useful if you wish to redownload a file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The normalized <code>target_path</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  target_path &lt;- maybe_cache(
    "https://query.data.world/s/owqxojjiphaypjmlxldsp566lck7co",
    appname = "dlr",
    process_f = read.csv
  )
  target_path

  unlink(target_path)
}
</code></pre>

<hr>
<h2 id='maybe_process'>Process a File if Necessary</h2><span id='topic+maybe_process'></span>

<h3>Description</h3>

<p>Sometimes you just need to get a processed file to a particular location,
without reading the data. For example, you might need to download a lookup
table used by various functions in a package, independent of a particular
function call that needs the data. This function does the processing if it
hasn't already been done.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>maybe_process(
  source_path,
  target_path,
  process_f = readRDS,
  process_args = NULL,
  write_f = saveRDS,
  write_args = NULL,
  force_process = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="maybe_process_+3A_source_path">source_path</code></td>
<td>
<p>Character scalar; the path to the raw file. Paths starting
with <code>http://</code>, <code>http://</code>, <code>http://</code>, or <code>http://</code> will
be downloaded to a temp file if the processed version is not already
available.</p>
</td></tr>
<tr><td><code id="maybe_process_+3A_target_path">target_path</code></td>
<td>
<p>Character scalar; the path where the processed version of
the file should be stored.</p>
</td></tr>
<tr><td><code id="maybe_process_+3A_process_f">process_f</code></td>
<td>
<p>A function or one-sided formula to use to process the source
file. <code>source_path</code> will be passed as the first argument to this
function. Defaults to <code>read_f</code>.</p>
</td></tr>
<tr><td><code id="maybe_process_+3A_process_args">process_args</code></td>
<td>
<p>An optional list of additional arguments to
<code>process_f</code>.</p>
</td></tr>
<tr><td><code id="maybe_process_+3A_write_f">write_f</code></td>
<td>
<p>A function or one-sided formula to use to save the processed
file. The processed object will be passed as the first argument to this
function, and <code>target_path</code> will be passed as the second argument.
Defaults to <code><a href="base.html#topic+saveRDS">saveRDS</a></code>.</p>
</td></tr>
<tr><td><code id="maybe_process_+3A_write_args">write_args</code></td>
<td>
<p>An optional list of additional arguments to <code>write_f</code>.</p>
</td></tr>
<tr><td><code id="maybe_process_+3A_force_process">force_process</code></td>
<td>
<p>A logical scalar indicating whether we should process
the source file even if the target already exists. This can be particularly
useful if you wish to redownload a file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The normalized <code>target_path</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  temp_filename &lt;- tempfile()
  maybe_process(
    "https://query.data.world/s/owqxojjiphaypjmlxldsp566lck7co",
    target_path = temp_filename,
    process_f = read.csv
  )

  unlink(temp_filename)
}
</code></pre>

<hr>
<h2 id='read_or_cache'>Read or Cache a File</h2><span id='topic+read_or_cache'></span>

<h3>Description</h3>

<p>This function wraps <code><a href="#topic+read_or_process">read_or_process</a></code>, specifying an app's cache
directory as the target directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_or_cache(
  source_path,
  appname,
  filename = construct_processed_filename(source_path),
  process_f = readRDS,
  process_args = NULL,
  read_f = readRDS,
  read_args = NULL,
  write_f = saveRDS,
  write_args = NULL,
  force_process = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_or_cache_+3A_source_path">source_path</code></td>
<td>
<p>Character scalar; the path to the raw file. Paths starting
with <code>http://</code>, <code>http://</code>, <code>http://</code>, or <code>http://</code> will
be downloaded to a temp file if the processed version is not already
available.</p>
</td></tr>
<tr><td><code id="read_or_cache_+3A_appname">appname</code></td>
<td>
<p>Character; the name of the application that will &quot;own&quot; the
cache, such as the name of a package.</p>
</td></tr>
<tr><td><code id="read_or_cache_+3A_filename">filename</code></td>
<td>
<p>Character; an optional filename for the cached version of the
file. By default, a filename is constructed using
<code><a href="#topic+construct_processed_filename">construct_processed_filename</a></code></p>
</td></tr>
<tr><td><code id="read_or_cache_+3A_process_f">process_f</code></td>
<td>
<p>A function or one-sided formula to use to process the source
file. <code>source_path</code> will be passed as the first argument to this
function. Defaults to <code>read_f</code>.</p>
</td></tr>
<tr><td><code id="read_or_cache_+3A_process_args">process_args</code></td>
<td>
<p>An optional list of additional arguments to
<code>process_f</code>.</p>
</td></tr>
<tr><td><code id="read_or_cache_+3A_read_f">read_f</code></td>
<td>
<p>A function or one-sided formula to use to read the processed
file. <code>target_path</code> will be passed as the first argument to this
function. Defaults to <code><a href="base.html#topic+readRDS">readRDS</a></code>.</p>
</td></tr>
<tr><td><code id="read_or_cache_+3A_read_args">read_args</code></td>
<td>
<p>An optional list of additional arguments to <code>read_f</code>.</p>
</td></tr>
<tr><td><code id="read_or_cache_+3A_write_f">write_f</code></td>
<td>
<p>A function or one-sided formula to use to save the processed
file. The processed object will be passed as the first argument to this
function, and <code>target_path</code> will be passed as the second argument.
Defaults to <code><a href="base.html#topic+saveRDS">saveRDS</a></code>.</p>
</td></tr>
<tr><td><code id="read_or_cache_+3A_write_args">write_args</code></td>
<td>
<p>An optional list of additional arguments to <code>write_f</code>.</p>
</td></tr>
<tr><td><code id="read_or_cache_+3A_force_process">force_process</code></td>
<td>
<p>A logical scalar indicating whether we should process
the source file even if the target already exists. This can be particularly
useful if you wish to redownload a file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The processed object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  austin_smoke_free &lt;- read_or_cache(
    "https://query.data.world/s/owqxojjiphaypjmlxldsp566lck7co",
    appname = "dlr",
    process_f = read.csv
  )
  head(austin_smoke_free)
}

if (interactive()) {
  # Calling the function a second time gives the result instantly.
  austin_smoke_free &lt;- read_or_cache(
    "https://query.data.world/s/owqxojjiphaypjmlxldsp566lck7co",
    appname = "dlr",
    process_f = read.csv
  )
  head(austin_smoke_free)
}

if (interactive()) {
  # Remove the generated file.
  unlink(
    construct_cached_file_path(
      "https://query.data.world/s/owqxojjiphaypjmlxldsp566lck7co"
    )
  )
}
</code></pre>

<hr>
<h2 id='read_or_process'>Read or Process a File</h2><span id='topic+read_or_process'></span>

<h3>Description</h3>

<p>Often, a file must be processed before being usable in R. It can be useful to
save the processed contents of that file in a standard format, such as RDS,
so that the file does not need to be processed the next time it is loaded.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_or_process(
  source_path,
  target_path,
  process_f = readRDS,
  process_args = NULL,
  read_f = readRDS,
  read_args = NULL,
  write_f = saveRDS,
  write_args = NULL,
  force_process = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_or_process_+3A_source_path">source_path</code></td>
<td>
<p>Character scalar; the path to the raw file. Paths starting
with <code>http://</code>, <code>http://</code>, <code>http://</code>, or <code>http://</code> will
be downloaded to a temp file if the processed version is not already
available.</p>
</td></tr>
<tr><td><code id="read_or_process_+3A_target_path">target_path</code></td>
<td>
<p>Character scalar; the path where the processed version of
the file should be stored.</p>
</td></tr>
<tr><td><code id="read_or_process_+3A_process_f">process_f</code></td>
<td>
<p>A function or one-sided formula to use to process the source
file. <code>source_path</code> will be passed as the first argument to this
function. Defaults to <code>read_f</code>.</p>
</td></tr>
<tr><td><code id="read_or_process_+3A_process_args">process_args</code></td>
<td>
<p>An optional list of additional arguments to
<code>process_f</code>.</p>
</td></tr>
<tr><td><code id="read_or_process_+3A_read_f">read_f</code></td>
<td>
<p>A function or one-sided formula to use to read the processed
file. <code>target_path</code> will be passed as the first argument to this
function. Defaults to <code><a href="base.html#topic+readRDS">readRDS</a></code>.</p>
</td></tr>
<tr><td><code id="read_or_process_+3A_read_args">read_args</code></td>
<td>
<p>An optional list of additional arguments to <code>read_f</code>.</p>
</td></tr>
<tr><td><code id="read_or_process_+3A_write_f">write_f</code></td>
<td>
<p>A function or one-sided formula to use to save the processed
file. The processed object will be passed as the first argument to this
function, and <code>target_path</code> will be passed as the second argument.
Defaults to <code><a href="base.html#topic+saveRDS">saveRDS</a></code>.</p>
</td></tr>
<tr><td><code id="read_or_process_+3A_write_args">write_args</code></td>
<td>
<p>An optional list of additional arguments to <code>write_f</code>.</p>
</td></tr>
<tr><td><code id="read_or_process_+3A_force_process">force_process</code></td>
<td>
<p>A logical scalar indicating whether we should process
the source file even if the target already exists. This can be particularly
useful if you wish to redownload a file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The processed object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  temp_filename &lt;- tempfile()
  austin_smoke_free &lt;- read_or_process(
    "https://query.data.world/s/owqxojjiphaypjmlxldsp566lck7co",
    target_path = temp_filename,
    process_f = read.csv
  )
  head(austin_smoke_free)
}

# Calling the function a second time gives the result instantly.
if (interactive()) {
  austin_smoke_free &lt;- read_or_process(
    "https://query.data.world/s/owqxojjiphaypjmlxldsp566lck7co",
    target_path = temp_filename,
    process_f = read.csv
  )
  head(austin_smoke_free)
}

if (interactive()) {
  # Remove the generated file.
  unlink(temp_filename)
}
</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic++25+7C+7C+25'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>rlang</dt><dd><p><code><a href="rlang.html#topic+op-null-default">%||%</a></code></p>
</dd>
</dl>

<hr>
<h2 id='set_app_cache_dir'>Set a Cache Directory for an App</h2><span id='topic+set_app_cache_dir'></span>

<h3>Description</h3>

<p>Override the default paths used by <code><a href="#topic+app_cache_dir">app_cache_dir</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_app_cache_dir(appname, cache_dir = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_app_cache_dir_+3A_appname">appname</code></td>
<td>
<p>Character; the name of the application that will &quot;own&quot; the
cache, such as the name of a package.</p>
</td></tr>
<tr><td><code id="set_app_cache_dir_+3A_cache_dir">cache_dir</code></td>
<td>
<p>Character scalar; a path to a cache directory.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A normalized path to a cache directory. The directory is created if
the user has write access and the directory does not exist. An option is
also set so future calls to <code><a href="#topic+app_cache_dir">app_cache_dir</a></code> will respect the
change.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Executing this function creates a cache directory.
set_app_cache_dir(appname = "dlr", cache_dir = "/my/cache/path")

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
