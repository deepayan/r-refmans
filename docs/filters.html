<!DOCTYPE html><html><head><title>Help for package filters</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {filters}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#filters-package'><p>filters Package</p></a></li>
<li><a href='#add_filter'><p>Add a New Filter Definition</p></a></li>
<li><a href='#apply_filter'><p>Apply a Filter to a Dataset or List of Datasets</p></a></li>
<li><a href='#get_filter'><p>Get a Filter Definition</p></a></li>
<li><a href='#get_filters'><p>Get Multiple Filter Definitions</p></a></li>
<li><a href='#list_all_filters'><p>List All Filters</p></a></li>
<li><a href='#load_filters'><p>Load Filter Definitions</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>A "Snake_case" Filter System for R</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Enables filtering datasets by a prior specified identifiers
    which correspond to saved filter expressions.</td>
</tr>
<tr>
<td>Imports:</td>
<td>magrittr, plyr, yaml</td>
</tr>
<tr>
<td>Suggests:</td>
<td>dplyr, random.cdisc.data, testthat</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-04-16 14:55:47 UTC; rstudio</td>
</tr>
<tr>
<td>Author:</td>
<td>Thomas Neitman [aut] (Original creator of the package),
  Joe Zhu [ctb, cre],
  F. Hoffmann-La Roche AG [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Joe Zhu &lt;joe.zhu@roche.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-04-17 09:50:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='filters-package'>filters Package</h2><span id='topic+filters'></span><span id='topic+filters-package'></span>

<h3>Description</h3>

<p>Enables filtering datasets by a prior specified identifiers which correspond to saved filter expressions.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Joe Zhu <a href="mailto:joe.zhu@roche.com">joe.zhu@roche.com</a> [contributor]
</p>
<p>Authors:
</p>

<ul>
<li><p> Thomas Neitman (Original creator of the package)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> F. Hoffmann-La Roche AG [copyright holder, funder]
</p>
</li></ul>


<hr>
<h2 id='add_filter'>Add a New Filter Definition</h2><span id='topic+add_filter'></span>

<h3>Description</h3>

<p>Add a new filter definition or overwrite an existing one
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_filter(
  id,
  title,
  target,
  condition,
  character_only = FALSE,
  overwrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_filter_+3A_id">id</code></td>
<td>
<p><code>character</code> The id or name of this filter, e.g. <code>"SE"</code>.</p>
</td></tr>
<tr><td><code id="add_filter_+3A_title">title</code></td>
<td>
<p><code>character</code> The title of the filter</p>
</td></tr>
<tr><td><code id="add_filter_+3A_target">target</code></td>
<td>
<p><code>character</code> The target dataset of the filter</p>
</td></tr>
<tr><td><code id="add_filter_+3A_condition">condition</code></td>
<td>
<p>The filter condition</p>
</td></tr>
<tr><td><code id="add_filter_+3A_character_only">character_only</code></td>
<td>
<p><code>logical</code>. Is <code>condition</code> a string? Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="add_filter_+3A_overwrite">overwrite</code></td>
<td>
<p><code>logical</code> Should existing filters be overwritten? Defaults to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns a <code>list</code> of <code>title</code>, <code>target</code> and <code>condition</code>
invisibly
</p>


<h3>Author(s)</h3>

<p>Thomas Neitmann (<code>neitmant</code>)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>add_filter(
  id = "CTC5",
  title = "Grade 5 Adverse Event",
  target = "ADAE",
  condition = AETOXGR == "5"
)

add_filter(
  id = "CTC4",
  title = "Grade 4 Adverse Event",
  target = "ADAE",
  condition = "AETOXGR == '4'",
  character_only = TRUE
)

add_filter(
  id = "IT",
  title = "ITT Population",
  target = "ADSL",
  condition = ITTFL == "Y",
  overwrite = TRUE
)

add_filter(
  id = "5PER",
  title = "Adverse Events with a Difference of at Least 5% between Treatment Arms",
  target = "adae",
  condition = 1 == 1,
  overwrite = TRUE
)

</code></pre>

<hr>
<h2 id='apply_filter'>Apply a Filter to a Dataset or List of Datasets</h2><span id='topic+apply_filter'></span><span id='topic+apply_filter.default'></span><span id='topic+apply_filter.data.frame'></span><span id='topic+apply_filter.list'></span>

<h3>Description</h3>

<p>Apply a Filter to a Dataset or List of Datasets
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apply_filter(data, ...)

## Default S3 method:
apply_filter(data, ...)

## S3 method for class 'data.frame'
apply_filter(data, id, target = deparse(substitute(data)), verbose = TRUE, ...)

## S3 method for class 'list'
apply_filter(data, id, verbose = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apply_filter_+3A_data">data</code></td>
<td>
<p><code>data.frame</code> of <code>list</code> of <code>data.frame</code>s</p>
</td></tr>
<tr><td><code id="apply_filter_+3A_...">...</code></td>
<td>
<p>Not used.</p>
</td></tr>
<tr><td><code id="apply_filter_+3A_id">id</code></td>
<td>
<p><code>character</code>. The ID of a filter defined with <code>add_filter()</code></p>
</td></tr>
<tr><td><code id="apply_filter_+3A_target">target</code></td>
<td>
<p><code>character</code>. The name of the dataset, e.g. ADSL or ADTTE</p>
</td></tr>
<tr><td><code id="apply_filter_+3A_verbose">verbose</code></td>
<td>
<p><code>logical</code>. Should informative messages be printed? Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A new <code>data.frame</code> or <code>list</code> of <code>data.frame</code>s filtered based upon the condition defined for <code>id</code>
</p>


<h3>Author(s)</h3>

<p>Thomas Neitmann (<code>neitmant</code>)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>adsl &lt;- random.cdisc.data::cadsl
adae &lt;- random.cdisc.data::cadae
datasets &lt;- list(adsl = adsl, adae = adae)

add_filter("REL", "Related AEs", "ADAE", AEREL == "Y", overwrite = TRUE)

apply_filter(adsl, "SE")
apply_filter(adae, "SER_REL")
apply_filter(datasets, "SER_REL_SE")

</code></pre>

<hr>
<h2 id='get_filter'>Get a Filter Definition</h2><span id='topic+get_filter'></span>

<h3>Description</h3>

<p>Get a Filter Definition
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_filter(id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_filter_+3A_id">id</code></td>
<td>
<p><code>character</code>. The filter ID</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>list</code> with elements <code>title</code>, <code>target</code> and <code>condition</code>
</p>


<h3>Author(s)</h3>

<p>Thomas Neitmann (<code>neitmant</code>)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_filter("SE")
get_filter("SER")

## Filter `FOO` does not exist
try(get_filter("FOO"))

</code></pre>

<hr>
<h2 id='get_filters'>Get Multiple Filter Definitions</h2><span id='topic+get_filters'></span>

<h3>Description</h3>

<p>Get Multiple Filter Definitions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_filters(ids)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_filters_+3A_ids">ids</code></td>
<td>
<p><code>character</code>. The filter IDs as a single string separated by underscores</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named <code>list</code> of filter definitions
</p>


<h3>Author(s)</h3>

<p>Thomas Neitmann (<code>neitmant</code>)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_filters("REL_SER")
get_filters("OS_IT")

</code></pre>

<hr>
<h2 id='list_all_filters'>List All Filters</h2><span id='topic+list_all_filters'></span>

<h3>Description</h3>

<p>List all available filters
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_all_filters()
</code></pre>


<h3>Value</h3>

<p>A <code>data.frame</code> with columns <code>id</code>, <code>title</code>, <code>target</code> and <code>condition</code>
</p>


<h3>Author(s)</h3>

<p>Thomas Neitmann (<code>neitmant</code>)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>list_all_filters()

</code></pre>

<hr>
<h2 id='load_filters'>Load Filter Definitions</h2><span id='topic+load_filters'></span>

<h3>Description</h3>

<p>Load filter definitions from a yaml file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_filters(yaml_file, overwrite = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="load_filters_+3A_yaml_file">yaml_file</code></td>
<td>
<p><code>character</code>. A path to a yaml file containing filter definitions</p>
</td></tr>
<tr><td><code id="load_filters_+3A_overwrite">overwrite</code></td>
<td>
<p><code>logical</code>. Should existing filter definitions be overwritten?
Defaults to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>On success, <code>load_filters()</code> returns <code>TRUE</code> invisibly
</p>


<h3>Author(s)</h3>

<p>Thomas Neitmann (<code>neitmant</code>)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>filter_definitions &lt;- system.file("filters.yaml", package = "filters")
if (interactive()) file.edit(filter_definitions)
load_filters(filter_definitions, overwrite = TRUE)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
