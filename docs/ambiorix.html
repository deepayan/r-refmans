<!DOCTYPE html><html lang="en"><head><title>Help for package ambiorix</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ambiorix}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#Ambiorix'><p>Ambiorix</p></a></li>
<li><a href='#as_cookie_parser'><p>Define a Cookie Parser</p></a></li>
<li><a href='#as_cookie_preprocessor'><p>Define a Cookie Preprocessor</p></a></li>
<li><a href='#as_path_to_pattern'><p>Path to pattern</p></a></li>
<li><a href='#as_renderer'><p>Create a Renderer</p></a></li>
<li><a href='#content'><p>Content Headers</p></a></li>
<li><a href='#create_dockerfile'><p>Dockerfile</p></a></li>
<li><a href='#default_cookie_parser'><p>Cookie Parser</p></a></li>
<li><a href='#forward'><p>Forward Method</p></a></li>
<li><a href='#import'><p>Import Files</p></a></li>
<li><a href='#jobj'><p>JSON Object</p></a></li>
<li><a href='#mockRequest'><p>Mock Request</p></a></li>
<li><a href='#new_log'><p>Logger</p></a></li>
<li><a href='#parse_form_urlencoded'><p>Parse application/x-www-form-urlencoded data</p></a></li>
<li><a href='#parse_json'><p>Parse application/json data</p></a></li>
<li><a href='#parse_multipart'><p>Parse multipart form data</p></a></li>
<li><a href='#pre_hook'><p>Pre Hook Response</p></a></li>
<li><a href='#Request'><p>Request</p></a></li>
<li><a href='#Response'><p>Response</p></a></li>
<li><a href='#responses'><p>Plain Responses</p></a></li>
<li><a href='#robj'><p>R Object</p></a></li>
<li><a href='#Router'><p>Router</p></a></li>
<li><a href='#Routing'><p>Core Routing Class</p></a></li>
<li><a href='#serialise'><p>Serialise an Object to JSON</p></a></li>
<li><a href='#set_log'><p>Customise logs</p></a></li>
<li><a href='#stop_all'><p>Stop</p></a></li>
<li><a href='#token_create'><p>Token</p></a></li>
<li><a href='#use_html_template'><p>HTML Template</p></a></li>
<li><a href='#Websocket'><p>Websocket</p></a></li>
<li><a href='#websocket_client'><p>Websocket Client</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Web Framework Inspired by 'Express.js'</td>
</tr>
<tr>
<td>Version:</td>
<td>2.2.0</td>
</tr>
<tr>
<td>Description:</td>
<td>A web framework inspired by 'express.js' to build
  any web service from multi-page websites to 'RESTful' 
  application programming interfaces.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>fs, log, cli, glue, httpuv, methods, assertthat, webutils (&ge;
1.2.0), yyjsonr (&ge; 0.1.20)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>mime, readr, readxl, ggplot2, promises, jsonlite, websocket,
htmltools, commonmark, htmlwidgets, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ambiorix-web/ambiorix">https://github.com/ambiorix-web/ambiorix</a>, <a href="https://ambiorix.dev">https://ambiorix.dev</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ambiorix-web/ambiorix/issues">https://github.com/ambiorix-web/ambiorix/issues</a></td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-03-13 10:51:06 UTC; mwavu</td>
</tr>
<tr>
<td>Author:</td>
<td>John Coene <a href="https://orcid.org/0000-0002-6637-4107"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Opifex [fnd],
  Kennedy Mwavu <a href="https://orcid.org/0009-0006-3157-7234"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>John Coene &lt;jcoenep@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-03-15 16:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='Ambiorix'>Ambiorix</h2><span id='topic+Ambiorix'></span>

<h3>Description</h3>

<p>Web server.
</p>


<h3>Value</h3>

<p>An object of class <code>Ambiorix</code> from which one can
add routes, routers, and run the application.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+Routing">ambiorix::Routing</a></code> -&gt; <code>Ambiorix</code>
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>not_found</code></dt><dd><p>404 Response, must be a handler function that accepts the request and the response, by default uses <code><a href="#topic+response_404">response_404()</a></code>.</p>
</dd>
<dt><code>error</code></dt><dd><p>500 response when the route errors, must a handler function that accepts the request and the response, by default uses <code><a href="#topic+response_500">response_500()</a></code>.</p>
</dd>
<dt><code>on_stop</code></dt><dd><p>Callback function to run when the app stops, takes no argument.</p>
</dd>
</dl>

</div>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>port</code></dt><dd><p>Port to run the application.</p>
</dd>
<dt><code>host</code></dt><dd><p>Host to run the application.</p>
</dd>
<dt><code>limit</code></dt><dd><p>Max body size, defaults to <code>5 * 1024 * 1024</code>.</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-Ambiorix-new"><code>Ambiorix$new()</code></a>
</p>
</li>
<li> <p><a href="#method-Ambiorix-cache_templates"><code>Ambiorix$cache_templates()</code></a>
</p>
</li>
<li> <p><a href="#method-Ambiorix-listen"><code>Ambiorix$listen()</code></a>
</p>
</li>
<li> <p><a href="#method-Ambiorix-set_404"><code>Ambiorix$set_404()</code></a>
</p>
</li>
<li> <p><a href="#method-Ambiorix-set_error"><code>Ambiorix$set_error()</code></a>
</p>
</li>
<li> <p><a href="#method-Ambiorix-static"><code>Ambiorix$static()</code></a>
</p>
</li>
<li> <p><a href="#method-Ambiorix-start"><code>Ambiorix$start()</code></a>
</p>
</li>
<li> <p><a href="#method-Ambiorix-serialiser"><code>Ambiorix$serialiser()</code></a>
</p>
</li>
<li> <p><a href="#method-Ambiorix-stop"><code>Ambiorix$stop()</code></a>
</p>
</li>
<li> <p><a href="#method-Ambiorix-print"><code>Ambiorix$print()</code></a>
</p>
</li>
<li> <p><a href="#method-Ambiorix-clone"><code>Ambiorix$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="all"><a href='../../ambiorix/html/Routing.html#method-Routing-all'><code>ambiorix::Routing$all()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="delete"><a href='../../ambiorix/html/Routing.html#method-Routing-delete'><code>ambiorix::Routing$delete()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="engine"><a href='../../ambiorix/html/Routing.html#method-Routing-engine'><code>ambiorix::Routing$engine()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="get"><a href='../../ambiorix/html/Routing.html#method-Routing-get'><code>ambiorix::Routing$get()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="get_middleware"><a href='../../ambiorix/html/Routing.html#method-Routing-get_middleware'><code>ambiorix::Routing$get_middleware()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="get_receivers"><a href='../../ambiorix/html/Routing.html#method-Routing-get_receivers'><code>ambiorix::Routing$get_receivers()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="get_routes"><a href='../../ambiorix/html/Routing.html#method-Routing-get_routes'><code>ambiorix::Routing$get_routes()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="options"><a href='../../ambiorix/html/Routing.html#method-Routing-options'><code>ambiorix::Routing$options()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="patch"><a href='../../ambiorix/html/Routing.html#method-Routing-patch'><code>ambiorix::Routing$patch()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="post"><a href='../../ambiorix/html/Routing.html#method-Routing-post'><code>ambiorix::Routing$post()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="prepare"><a href='../../ambiorix/html/Routing.html#method-Routing-prepare'><code>ambiorix::Routing$prepare()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="put"><a href='../../ambiorix/html/Routing.html#method-Routing-put'><code>ambiorix::Routing$put()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="receive"><a href='../../ambiorix/html/Routing.html#method-Routing-receive'><code>ambiorix::Routing$receive()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="use"><a href='../../ambiorix/html/Routing.html#method-Routing-use'><code>ambiorix::Routing$use()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-Ambiorix-new"></a>



<h4>Method <code>new()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Ambiorix$new(
  host = getOption("ambiorix.host", "0.0.0.0"),
  port = getOption("ambiorix.port", NULL),
  log = getOption("ambiorix.logger", TRUE)
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>host</code></dt><dd><p>A string defining the host.</p>
</dd>
<dt><code>port</code></dt><dd><p>Integer defining the port, defaults to <code>ambiorix.port</code> option: uses a random port if <code>NULL</code>.</p>
</dd>
<dt><code>log</code></dt><dd><p>Whether to generate a log of events.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Define the webserver.
</p>


<hr>
<a id="method-Ambiorix-cache_templates"></a>



<h4>Method <code>cache_templates()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Ambiorix$cache_templates()</pre></div>



<h5>Details</h5>

<p>Cache templates in memory instead of reading
them from disk.
</p>


<hr>
<a id="method-Ambiorix-listen"></a>



<h4>Method <code>listen()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Ambiorix$listen(port)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>port</code></dt><dd><p>Port number.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Specifies the port to listen on.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>app &lt;- Ambiorix$new()

app$listen(3000L)

app$get("/", function(req, res){
 res$send("Using {ambiorix}!")
})

if(interactive())
 app$start()
</pre>
</div>


<hr>
<a id="method-Ambiorix-set_404"></a>



<h4>Method <code>set_404()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Ambiorix$set_404(handler)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>handler</code></dt><dd><p>Function that accepts the request and returns an object
describing an httpuv response, e.g.: <code><a href="#topic+response">response()</a></code>.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Sets the 404 page.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>app &lt;- Ambiorix$new()

app$set_404(function(req, res){
 res$send("Nothing found here")
})

app$get("/", function(req, res){
 res$send("Using {ambiorix}!")
})

if(interactive())
 app$start()
</pre>
</div>


<hr>
<a id="method-Ambiorix-set_error"></a>



<h4>Method <code>set_error()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Ambiorix$set_error(handler)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>handler</code></dt><dd><p>Function that accepts a request, response and an error object.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Sets the error handler.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre># my custom error handler:
error_handler &lt;- function(req, res, error) {
  if (!is.null(error)) {
    error_msg &lt;- conditionMessage(error)
    cli::cli_alert_danger("Error: {error_msg}")
  }
  response &lt;- list(
    code = 500L,
    msg = "Uhhmmm... Looks like there's an error from our side :("
  )
  res$
    set_status(500L)$
    json(response)
}

# handler for GET at /whoami:
whoami &lt;- function(req, res) {
  # simulate error (object 'Pikachu' is not defined)
  print(Pikachu)
}

app &lt;- Ambiorix$
  new()$
  set_error(error_handler)$
  get("/whoami", whoami)

if (interactive()) {
  app$start(open = FALSE)
}
</pre>
</div>


<hr>
<a id="method-Ambiorix-static"></a>



<h4>Method <code>static()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Ambiorix$static(path, uri = "www")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>path</code></dt><dd><p>Local path to directory of assets.</p>
</dd>
<dt><code>uri</code></dt><dd><p>URL path where the directory will be available.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Static directories
</p>


<hr>
<a id="method-Ambiorix-start"></a>



<h4>Method <code>start()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Ambiorix$start(port = NULL, host = NULL, open = interactive())</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>port</code></dt><dd><p>Integer defining the port, defaults to <code>ambiorix.port</code> option: uses a random port if <code>NULL</code>.</p>
</dd>
<dt><code>host</code></dt><dd><p>A string defining the host.</p>
</dd>
<dt><code>open</code></dt><dd><p>Whether to open the app the browser.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Start
Start the webserver.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>app &lt;- Ambiorix$new()

app$get("/", function(req, res){
 res$send("Using {ambiorix}!")
})

if(interactive())
 app$start(port = 3000L)
</pre>
</div>


<hr>
<a id="method-Ambiorix-serialiser"></a>



<h4>Method <code>serialiser()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Ambiorix$serialiser(handler)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>handler</code></dt><dd><p>Function to use to serialise.
This function should accept two arguments: the object to serialise and <code>...</code>.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Define Serialiser
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>app &lt;- Ambiorix$new()

app$serialiser(function(data, ...){
 jsonlite::toJSON(x, ..., pretty = TRUE)
})

app$get("/", function(req, res){
 res$send("Using {ambiorix}!")
})

if(interactive())
 app$start()
</pre>
</div>


<hr>
<a id="method-Ambiorix-stop"></a>



<h4>Method <code>stop()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Ambiorix$stop()</pre></div>



<h5>Details</h5>

<p>Stop
Stop the webserver.
</p>


<hr>
<a id="method-Ambiorix-print"></a>



<h4>Method <code>print()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Ambiorix$print()</pre></div>



<h5>Details</h5>

<p>Print
</p>


<hr>
<a id="method-Ambiorix-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>Ambiorix$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>app &lt;- Ambiorix$new()

app$get("/", function(req, res){
 res$send("Using {ambiorix}!")
})

app$on_stop &lt;- function(){
 cat("Bye!\n")
}

if(interactive())
 app$start()


## ------------------------------------------------
## Method `Ambiorix$listen`
## ------------------------------------------------

app &lt;- Ambiorix$new()

app$listen(3000L)

app$get("/", function(req, res){
 res$send("Using {ambiorix}!")
})

if(interactive())
 app$start()

## ------------------------------------------------
## Method `Ambiorix$set_404`
## ------------------------------------------------

app &lt;- Ambiorix$new()

app$set_404(function(req, res){
 res$send("Nothing found here")
})

app$get("/", function(req, res){
 res$send("Using {ambiorix}!")
})

if(interactive())
 app$start()

## ------------------------------------------------
## Method `Ambiorix$set_error`
## ------------------------------------------------

# my custom error handler:
error_handler &lt;- function(req, res, error) {
  if (!is.null(error)) {
    error_msg &lt;- conditionMessage(error)
    cli::cli_alert_danger("Error: {error_msg}")
  }
  response &lt;- list(
    code = 500L,
    msg = "Uhhmmm... Looks like there's an error from our side :("
  )
  res$
    set_status(500L)$
    json(response)
}

# handler for GET at /whoami:
whoami &lt;- function(req, res) {
  # simulate error (object 'Pikachu' is not defined)
  print(Pikachu)
}

app &lt;- Ambiorix$
  new()$
  set_error(error_handler)$
  get("/whoami", whoami)

if (interactive()) {
  app$start(open = FALSE)
}

## ------------------------------------------------
## Method `Ambiorix$start`
## ------------------------------------------------

app &lt;- Ambiorix$new()

app$get("/", function(req, res){
 res$send("Using {ambiorix}!")
})

if(interactive())
 app$start(port = 3000L)

## ------------------------------------------------
## Method `Ambiorix$serialiser`
## ------------------------------------------------

app &lt;- Ambiorix$new()

app$serialiser(function(data, ...){
 jsonlite::toJSON(x, ..., pretty = TRUE)
})

app$get("/", function(req, res){
 res$send("Using {ambiorix}!")
})

if(interactive())
 app$start()
</code></pre>

<hr>
<h2 id='as_cookie_parser'>Define a Cookie Parser</h2><span id='topic+as_cookie_parser'></span>

<h3>Description</h3>

<p>Identifies a function as a cookie parser (see example).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_cookie_parser(fn)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_cookie_parser_+3A_fn">fn</code></td>
<td>
<p>A function that accepts a single argument,
<code>req</code> the <a href="#topic+Request">Request</a> and returns the parsed cookie string,
generally a <code>list</code>.
Note that the original cookie string is available on the
<a href="#topic+Request">Request</a> at the <code>HTTP_COOKIE</code> field, get it with:
<code>req$HTTP_COOKIE</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class &quot;cookieParser&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>func &lt;- function(req) {
 req$HTTP_COOKIE
}

parser &lt;- as_cookie_parser(func)

app &lt;- Ambiorix$new()
app$use(parser)

</code></pre>

<hr>
<h2 id='as_cookie_preprocessor'>Define a Cookie Preprocessor</h2><span id='topic+as_cookie_preprocessor'></span>

<h3>Description</h3>

<p>Identifies a function as a cookie preprocessor.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_cookie_preprocessor(fn)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_cookie_preprocessor_+3A_fn">fn</code></td>
<td>
<p>A function that accepts the same arguments
as the <code>cookie</code> method of the <a href="#topic+Response">Response</a> class
(name, value, ...), and returns a modified
<code>value</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class &quot;cookiePreprocessor&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>func &lt;- function(name, value, ...) {
 sprintf("prefix.%s", value)
}

prep &lt;- as_cookie_preprocessor(func)

app &lt;- Ambiorix$new()
app$use(prep)

</code></pre>

<hr>
<h2 id='as_path_to_pattern'>Path to pattern</h2><span id='topic+as_path_to_pattern'></span>

<h3>Description</h3>

<p>Identify a function as a path to pattern function;
a function that accepts a path and returns a matching pattern.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_path_to_pattern(path)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_path_to_pattern_+3A_path">path</code></td>
<td>
<p>A function that accepts a character vector of length 1
and returns another character vector of length 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class &quot;pathToPattern&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fn &lt;- function(path) {
  pattern &lt;- gsub(":([^/]+)", "(\\\\w+)", path)
  paste0("^", pattern, "$")
}

path_to_pattern &lt;- as_path_to_pattern(fn)

path &lt;- "/dashboard/profile/:user_id"
pattern &lt;- path_to_pattern(path) # "^/dashboard/profile/(\w+)$"

</code></pre>

<hr>
<h2 id='as_renderer'>Create a Renderer</h2><span id='topic+as_renderer'></span>

<h3>Description</h3>

<p>Create a custom renderer.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_renderer(fn)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_renderer_+3A_fn">fn</code></td>
<td>
<p>A function that accepts two arguments,
the full path to the <code>file</code> to render, and the
<code>data</code> to render.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A renderer function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  fn &lt;- function(path, data) {
    # ...
  }

  as_renderer(fn)
}
</code></pre>

<hr>
<h2 id='content'>Content Headers</h2><span id='topic+content'></span><span id='topic+content_html'></span><span id='topic+content_plain'></span><span id='topic+content_json'></span><span id='topic+content_csv'></span><span id='topic+content_tsv'></span><span id='topic+content_protobuf'></span>

<h3>Description</h3>

<p>Convenient functions for more readable content type headers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>content_html()

content_plain()

content_json()

content_csv()

content_tsv()

content_protobuf()
</code></pre>


<h3>Value</h3>

<p>Length 1 character vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>list(
 "Content-Type",
 content_json()
)

if(FALSE)
 req$header(
  "Content-Type",
  content_json()
 )

</code></pre>

<hr>
<h2 id='create_dockerfile'>Dockerfile</h2><span id='topic+create_dockerfile'></span>

<h3>Description</h3>

<p>Create the dockerfile required to run the application.
The dockerfile created will install packages from
RStudio Public Package Manager
which comes with pre-built binaries
that much improve the speed of building of Dockerfiles.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_dockerfile(port, host = "0.0.0.0", file_path)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_dockerfile_+3A_port">port</code>, <code id="create_dockerfile_+3A_host">host</code></td>
<td>
<p>Port and host to serve the application.</p>
</td></tr>
<tr><td><code id="create_dockerfile_+3A_file_path">file_path</code></td>
<td>
<p>String. Path to file to write to.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Reads the <code>DESCRIPTION</code> file of the project to produce the <code>Dockerfile</code>.
</p>


<h3>Value</h3>

<p><code>NULL</code> (invisibly)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  create_dockerfile(port = 5000L, host = "0.0.0.0", file_path = tempfile())
  # create_dockerfile(port = 5000L, host = "0.0.0.0", file_path = "Dockerfile") 
}

</code></pre>

<hr>
<h2 id='default_cookie_parser'>Cookie Parser</h2><span id='topic+default_cookie_parser'></span>

<h3>Description</h3>

<p>Parses the cookie string.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_cookie_parser(req)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="default_cookie_parser_+3A_req">req</code></td>
<td>
<p>A <a href="#topic+Request">Request</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>list</code> of key value pairs or cookie values.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  library(ambiorix)

  #' Handle GET at '/greet'
  #'
  #' @export
  say_hello &lt;- function(req, res) {
    cookies &lt;- default_cookie_parser(req)
    print(cookies)

    res$send("hello there!")
  }

  app &lt;- Ambiorix$new()
  app$get("/greet", say_hello)
  app$start()
}

</code></pre>

<hr>
<h2 id='forward'>Forward Method</h2><span id='topic+forward'></span>

<h3>Description</h3>

<p>Makes it such that the web server skips this method and uses the next one in line instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>forward()
</code></pre>


<h3>Value</h3>

<p>An object of class <code>forward</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>app &lt;- Ambiorix$new()

app$get("/next", function(req, res){
 forward()
})

app$get("/next", function(req, res){
 res$send("Hello")
})

if(interactive())
 app$start()

</code></pre>

<hr>
<h2 id='import'>Import Files</h2><span id='topic+import'></span>

<h3>Description</h3>

<p>Import all R-files in a directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="import_+3A_...">...</code></td>
<td>
<p>Directory from which to import <code>.R</code> or <code>.r</code> files.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns <code>NULL</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  import("views")
}

</code></pre>

<hr>
<h2 id='jobj'>JSON Object</h2><span id='topic+jobj'></span>

<h3>Description</h3>

<p>Serialises an object to JSON in <code>res$render</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>jobj(obj)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="jobj_+3A_obj">obj</code></td>
<td>
<p>Object to serialise.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class &quot;jobj&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  l &lt;- list(a = "hello", b = 2L, c = 3)
  jobj(l)
}
</code></pre>

<hr>
<h2 id='mockRequest'>Mock Request</h2><span id='topic+mockRequest'></span>

<h3>Description</h3>

<p>Mock a request, used for tests.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mockRequest(cookie = "", query = "", path = "/")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mockRequest_+3A_cookie">cookie</code></td>
<td>
<p>Cookie string.</p>
</td></tr>
<tr><td><code id="mockRequest_+3A_query">query</code></td>
<td>
<p>Query string.</p>
</td></tr>
<tr><td><code id="mockRequest_+3A_path">path</code></td>
<td>
<p>Path string.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>Request</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mockRequest()

</code></pre>

<hr>
<h2 id='new_log'>Logger</h2><span id='topic+new_log'></span>

<h3>Description</h3>

<p>Returns a new logger using the <code>log</code> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_log(prefix = "&gt;", write = FALSE, file = "ambiorix.log", sep = "")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="new_log_+3A_prefix">prefix</code></td>
<td>
<p>String to prefix all log messages.</p>
</td></tr>
<tr><td><code id="new_log_+3A_write">write</code></td>
<td>
<p>Whether to write the log to the <code>file</code>.</p>
</td></tr>
<tr><td><code id="new_log_+3A_file">file</code></td>
<td>
<p>Name of the file to dump the logs to,
only used if <code>write</code> is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="new_log_+3A_sep">sep</code></td>
<td>
<p>Separator between <code>prefix</code> and other
flags and messages.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An R&amp; of class <code>log::Logger</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>log &lt;- new_log()
log$log("Hello world")

</code></pre>

<hr>
<h2 id='parse_form_urlencoded'>Parse application/x-www-form-urlencoded data</h2><span id='topic+parse_form_urlencoded'></span>

<h3>Description</h3>

<p>This function parses <code>application/x-www-form-urlencoded</code> data, typically used in form submissions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_form_urlencoded(req, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="parse_form_urlencoded_+3A_req">req</code></td>
<td>
<p>The request object.</p>
</td></tr>
<tr><td><code id="parse_form_urlencoded_+3A_...">...</code></td>
<td>
<p>Additional parameters passed to the parser function.</p>
</td></tr>
</table>


<h3>Details</h3>



<h4>Overriding Default Parser</h4>

<p>By default, <code>parse_form_urlencoded()</code> uses <code><a href="webutils.html#topic+parse_http">webutils::parse_http()</a></code>.
You can override this globally by setting the <code>AMBIORIX_FORM_URLENCODED_PARSER</code> option:
</p>
<div class="sourceCode r"><pre>options(AMBIORIX_FORM_URLENCODED_PARSER = my_other_custom_parser)
</pre></div>
<p>Your custom parser function <em>MUST</em> accept the following parameters:
</p>

<ol>
<li> <p><code>body</code>: Raw vector containing the form data.
</p>
</li>
<li> <p><code>...</code>: Additional optional parameters.
</p>
</li></ol>




<h3>Value</h3>

<p>A list of parsed form fields, with each key representing a form field name and each value
representing the form field's value.
</p>
<p>Named list
</p>


<h3>See Also</h3>

<p><code><a href="#topic+parse_multipart">parse_multipart()</a></code>, <code><a href="#topic+parse_json">parse_json()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  library(ambiorix)
  library(htmltools)
  library(readxl)

  page_links &lt;- function() {
    Map(
      f = function(href, label) {
        tags$a(href = href, label)
      },
      c("/", "/about", "/contact"),
      c("Home", "About", "Contact")
    )
  }

  forms &lt;- function() {
    form1 &lt;- tags$form(
      action = "/url-form-encoded",
      method = "POST",
      enctype = "application/x-www-form-urlencoded",
      tags$h4("form-url-encoded:"),
      tags$label(`for` = "first_name", "First Name"),
      tags$input(id = "first_name", name = "first_name", value = "John"),
      tags$label(`for` = "last_name", "Last Name"),
      tags$input(id = "last_name", name = "last_name", value = "Coene"),
      tags$button(type = "submit", "Submit")
    )

    form2 &lt;- tags$form(
      action = "/multipart-form-data",
      method = "POST",
      enctype = "multipart/form-data",
      tags$h4("multipart/form-data:"),
      tags$label(`for` = "email", "Email"),
      tags$input(id = "email", name = "email", value = "john@mail.com"),
      tags$label(`for` = "framework", "Framework"),
      tags$input(id = "framework", name = "framework", value = "ambiorix"),
      tags$label(`for` = "file", "Upload CSV file"),
      tags$input(type = "file", id = "file", name = "file", accept = ".csv"),
      tags$label(`for` = "file2", "Upload xlsx file"),
      tags$input(type = "file", id = "file2", name = "file2", accept = ".xlsx"),
      tags$button(type = "submit", "Submit")
    )

    tagList(form1, form2)
  }

  home_get &lt;- function(req, res) {
    html &lt;- tagList(
      page_links(),
      tags$h3("hello, world!"),
      forms()
    )

    res$send(html)
  }

  home_post &lt;- function(req, res) {
    body &lt;- parse_json(req)
    # print(body)

    response &lt;- list(
      code = 200L,
      msg = "hello, world"
    )
    res$json(response)
  }

  url_form_encoded_post &lt;- function(req, res) {
    body &lt;- parse_form_urlencoded(req)
    # print(body)

    list_items &lt;- lapply(
      X = names(body),
      FUN = function(nm) {
        tags$li(
          nm,
          ":",
          body[[nm]]
        )
      }
    )
    input_vals &lt;- tags$ul(list_items)

    html &lt;- tagList(
      page_links(),
      tags$h3("Request processed"),
      input_vals
    )

    res$send(html)
  }

  multipart_form_data_post &lt;- function(req, res) {
    body &lt;- parse_multipart(req)

    list_items &lt;- lapply(
      X = names(body),
      FUN = function(nm) {
        field &lt;- body[[nm]]

        # if 'field' is a file, parse it &amp; print on console:
        is_file &lt;- "filename" %in% names(field)
        is_csv &lt;- is_file &amp;&amp; identical(field[["content_type"]], "text/csv")
        is_xlsx &lt;- is_file &amp;&amp;
          identical(
            field[["content_type"]],
            "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
          )

        if (is_file) {
          file_path &lt;- tempfile()
          writeBin(object = field$value, con = file_path)
          on.exit(unlink(x = file_path))
        }

        if (is_csv) {
          # print(read.csv(file = file_path))
        }

        if (is_xlsx) {
          # print(readxl::read_xlsx(path = file_path))
        }

        tags$li(
          nm,
          ":",
          if (is_file) "printed on console" else field
        )
      }
    )
    input_vals &lt;- tags$ul(list_items)

    html &lt;- tagList(
      page_links(),
      tags$h3("Request processed"),
      input_vals
    )

    res$send(html)
  }

  about_get &lt;- function(req, res) {
    html &lt;- tagList(
      page_links(),
      tags$h3("About Us")
    )
    res$send(html)
  }

  contact_get &lt;- function(req, res) {
    html &lt;- tagList(
      page_links(),
      tags$h3("Get In Touch!")
    )
    res$send(html)
  }

  app &lt;- Ambiorix$new(port = 5000L)

  app$
    get("/", home_get)$
    post("/", home_post)$
    get("/about", about_get)$
    get("/contact", contact_get)$
    post("/url-form-encoded", url_form_encoded_post)$
    post("/multipart-form-data", multipart_form_data_post)

  app$start()
}
</code></pre>

<hr>
<h2 id='parse_json'>Parse application/json data</h2><span id='topic+parse_json'></span>

<h3>Description</h3>

<p>This function parses JSON data from the request body.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_json(req, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="parse_json_+3A_req">req</code></td>
<td>
<p>The request object.</p>
</td></tr>
<tr><td><code id="parse_json_+3A_...">...</code></td>
<td>
<p>Additional parameters passed to the parser function.</p>
</td></tr>
</table>


<h3>Details</h3>



<h4>Overriding Default Parser</h4>

<p>By default, <code>parse_json()</code> uses <code><a href="yyjsonr.html#topic+read_json_raw">yyjsonr::read_json_raw()</a></code> for JSON parsing.
You can override this globally by setting the <code>AMBIORIX_JSON_PARSER</code> option:
</p>
<div class="sourceCode r"><pre>my_json_parser &lt;- function(body, ...) {
  txt &lt;- rawToChar(body)
  jsonlite::fromJSON(txt, ...)
}
options(AMBIORIX_JSON_PARSER = my_json_parser)
</pre></div>
<p>Your custom parser <em>MUST</em> accept the following parameters:
</p>

<ol>
<li> <p><code>body</code>: Raw vector containing the JSON data.
</p>
</li>
<li> <p><code>...</code>: Additional optional parameters.
</p>
</li></ol>




<h3>Value</h3>

<p>An R object (e.g., list or data frame) parsed from the JSON data.
</p>
<p>Named list
</p>


<h3>See Also</h3>

<p><code><a href="#topic+parse_multipart">parse_multipart()</a></code>, <code><a href="#topic+parse_form_urlencoded">parse_form_urlencoded()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  library(ambiorix)
  library(htmltools)
  library(readxl)

  page_links &lt;- function() {
    Map(
      f = function(href, label) {
        tags$a(href = href, label)
      },
      c("/", "/about", "/contact"),
      c("Home", "About", "Contact")
    )
  }

  forms &lt;- function() {
    form1 &lt;- tags$form(
      action = "/url-form-encoded",
      method = "POST",
      enctype = "application/x-www-form-urlencoded",
      tags$h4("form-url-encoded:"),
      tags$label(`for` = "first_name", "First Name"),
      tags$input(id = "first_name", name = "first_name", value = "John"),
      tags$label(`for` = "last_name", "Last Name"),
      tags$input(id = "last_name", name = "last_name", value = "Coene"),
      tags$button(type = "submit", "Submit")
    )

    form2 &lt;- tags$form(
      action = "/multipart-form-data",
      method = "POST",
      enctype = "multipart/form-data",
      tags$h4("multipart/form-data:"),
      tags$label(`for` = "email", "Email"),
      tags$input(id = "email", name = "email", value = "john@mail.com"),
      tags$label(`for` = "framework", "Framework"),
      tags$input(id = "framework", name = "framework", value = "ambiorix"),
      tags$label(`for` = "file", "Upload CSV file"),
      tags$input(type = "file", id = "file", name = "file", accept = ".csv"),
      tags$label(`for` = "file2", "Upload xlsx file"),
      tags$input(type = "file", id = "file2", name = "file2", accept = ".xlsx"),
      tags$button(type = "submit", "Submit")
    )

    tagList(form1, form2)
  }

  home_get &lt;- function(req, res) {
    html &lt;- tagList(
      page_links(),
      tags$h3("hello, world!"),
      forms()
    )

    res$send(html)
  }

  home_post &lt;- function(req, res) {
    body &lt;- parse_json(req)
    # print(body)

    response &lt;- list(
      code = 200L,
      msg = "hello, world"
    )
    res$json(response)
  }

  url_form_encoded_post &lt;- function(req, res) {
    body &lt;- parse_form_urlencoded(req)
    # print(body)

    list_items &lt;- lapply(
      X = names(body),
      FUN = function(nm) {
        tags$li(
          nm,
          ":",
          body[[nm]]
        )
      }
    )
    input_vals &lt;- tags$ul(list_items)

    html &lt;- tagList(
      page_links(),
      tags$h3("Request processed"),
      input_vals
    )

    res$send(html)
  }

  multipart_form_data_post &lt;- function(req, res) {
    body &lt;- parse_multipart(req)

    list_items &lt;- lapply(
      X = names(body),
      FUN = function(nm) {
        field &lt;- body[[nm]]

        # if 'field' is a file, parse it &amp; print on console:
        is_file &lt;- "filename" %in% names(field)
        is_csv &lt;- is_file &amp;&amp; identical(field[["content_type"]], "text/csv")
        is_xlsx &lt;- is_file &amp;&amp;
          identical(
            field[["content_type"]],
            "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
          )

        if (is_file) {
          file_path &lt;- tempfile()
          writeBin(object = field$value, con = file_path)
          on.exit(unlink(x = file_path))
        }

        if (is_csv) {
          # print(read.csv(file = file_path))
        }

        if (is_xlsx) {
          # print(readxl::read_xlsx(path = file_path))
        }

        tags$li(
          nm,
          ":",
          if (is_file) "printed on console" else field
        )
      }
    )
    input_vals &lt;- tags$ul(list_items)

    html &lt;- tagList(
      page_links(),
      tags$h3("Request processed"),
      input_vals
    )

    res$send(html)
  }

  about_get &lt;- function(req, res) {
    html &lt;- tagList(
      page_links(),
      tags$h3("About Us")
    )
    res$send(html)
  }

  contact_get &lt;- function(req, res) {
    html &lt;- tagList(
      page_links(),
      tags$h3("Get In Touch!")
    )
    res$send(html)
  }

  app &lt;- Ambiorix$new(port = 5000L)

  app$
    get("/", home_get)$
    post("/", home_post)$
    get("/about", about_get)$
    get("/contact", contact_get)$
    post("/url-form-encoded", url_form_encoded_post)$
    post("/multipart-form-data", multipart_form_data_post)

  app$start()
}
</code></pre>

<hr>
<h2 id='parse_multipart'>Parse multipart form data</h2><span id='topic+parse_multipart'></span>

<h3>Description</h3>

<p>Parses multipart form data, including file uploads, and returns the parsed fields as a list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_multipart(req, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="parse_multipart_+3A_req">req</code></td>
<td>
<p>The request object.</p>
</td></tr>
<tr><td><code id="parse_multipart_+3A_...">...</code></td>
<td>
<p>Additional parameters passed to the parser function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If a field is a file upload it is returned as a named list with:
</p>

<ul>
<li> <p><code>value</code>: Raw vector representing the file contents. You must
process this further (eg. convert to data.frame). See the examples section.
</p>
</li>
<li> <p><code>content_disposition</code>: Typically &quot;form-data&quot;, indicating how the content
is meant to be handled.
</p>
</li>
<li> <p><code>content_type</code>: MIME type of the uploaded file (e.g., &quot;image/png&quot; or &quot;application/pdf&quot;).
</p>
</li>
<li> <p><code>name</code>: Name of the form input field.
</p>
</li>
<li> <p><code>filename</code>: Original name of the uploaded file.
</p>
</li></ul>

<p>If no body data, an empty list is returned.
</p>


<h4>Overriding Default Parser</h4>

<p>By default, <code>parse_multipart()</code> uses <code><a href="webutils.html#topic+parse_http">webutils::parse_http()</a></code> internally.
You can override this globally by setting the <code>AMBIORIX_MULTIPART_FORM_DATA_PARSER</code> option:
</p>
<div class="sourceCode r"><pre>options(AMBIORIX_MULTIPART_FORM_DATA_PARSER = my_custom_parser)
</pre></div>
<p>Your custom parser function must accept the following parameters:
</p>

<ol>
<li> <p><code>body</code>: Raw vector containing the form data.
</p>
</li>
<li> <p><code>content_type</code>: The 'Content-Type' header of the request as defined by the client.
</p>
</li>
<li> <p><code>...</code>: Additional optional parameters.
</p>
</li></ol>




<h3>Value</h3>

<p>Named list.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+parse_form_urlencoded">parse_form_urlencoded()</a></code>, <code><a href="#topic+parse_json">parse_json()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  library(ambiorix)
  library(htmltools)
  library(readxl)

  page_links &lt;- function() {
    Map(
      f = function(href, label) {
        tags$a(href = href, label)
      },
      c("/", "/about", "/contact"),
      c("Home", "About", "Contact")
    )
  }

  forms &lt;- function() {
    form1 &lt;- tags$form(
      action = "/url-form-encoded",
      method = "POST",
      enctype = "application/x-www-form-urlencoded",
      tags$h4("form-url-encoded:"),
      tags$label(`for` = "first_name", "First Name"),
      tags$input(id = "first_name", name = "first_name", value = "John"),
      tags$label(`for` = "last_name", "Last Name"),
      tags$input(id = "last_name", name = "last_name", value = "Coene"),
      tags$button(type = "submit", "Submit")
    )

    form2 &lt;- tags$form(
      action = "/multipart-form-data",
      method = "POST",
      enctype = "multipart/form-data",
      tags$h4("multipart/form-data:"),
      tags$label(`for` = "email", "Email"),
      tags$input(id = "email", name = "email", value = "john@mail.com"),
      tags$label(`for` = "framework", "Framework"),
      tags$input(id = "framework", name = "framework", value = "ambiorix"),
      tags$label(`for` = "file", "Upload CSV file"),
      tags$input(type = "file", id = "file", name = "file", accept = ".csv"),
      tags$label(`for` = "file2", "Upload xlsx file"),
      tags$input(type = "file", id = "file2", name = "file2", accept = ".xlsx"),
      tags$button(type = "submit", "Submit")
    )

    tagList(form1, form2)
  }

  home_get &lt;- function(req, res) {
    html &lt;- tagList(
      page_links(),
      tags$h3("hello, world!"),
      forms()
    )

    res$send(html)
  }

  home_post &lt;- function(req, res) {
    body &lt;- parse_json(req)
    # print(body)

    response &lt;- list(
      code = 200L,
      msg = "hello, world"
    )
    res$json(response)
  }

  url_form_encoded_post &lt;- function(req, res) {
    body &lt;- parse_form_urlencoded(req)
    # print(body)

    list_items &lt;- lapply(
      X = names(body),
      FUN = function(nm) {
        tags$li(
          nm,
          ":",
          body[[nm]]
        )
      }
    )
    input_vals &lt;- tags$ul(list_items)

    html &lt;- tagList(
      page_links(),
      tags$h3("Request processed"),
      input_vals
    )

    res$send(html)
  }

  multipart_form_data_post &lt;- function(req, res) {
    body &lt;- parse_multipart(req)

    list_items &lt;- lapply(
      X = names(body),
      FUN = function(nm) {
        field &lt;- body[[nm]]

        # if 'field' is a file, parse it &amp; print on console:
        is_file &lt;- "filename" %in% names(field)
        is_csv &lt;- is_file &amp;&amp; identical(field[["content_type"]], "text/csv")
        is_xlsx &lt;- is_file &amp;&amp;
          identical(
            field[["content_type"]],
            "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
          )

        if (is_file) {
          file_path &lt;- tempfile()
          writeBin(object = field$value, con = file_path)
          on.exit(unlink(x = file_path))
        }

        if (is_csv) {
          # print(read.csv(file = file_path))
        }

        if (is_xlsx) {
          # print(readxl::read_xlsx(path = file_path))
        }

        tags$li(
          nm,
          ":",
          if (is_file) "printed on console" else field
        )
      }
    )
    input_vals &lt;- tags$ul(list_items)

    html &lt;- tagList(
      page_links(),
      tags$h3("Request processed"),
      input_vals
    )

    res$send(html)
  }

  about_get &lt;- function(req, res) {
    html &lt;- tagList(
      page_links(),
      tags$h3("About Us")
    )
    res$send(html)
  }

  contact_get &lt;- function(req, res) {
    html &lt;- tagList(
      page_links(),
      tags$h3("Get In Touch!")
    )
    res$send(html)
  }

  app &lt;- Ambiorix$new(port = 5000L)

  app$
    get("/", home_get)$
    post("/", home_post)$
    get("/about", about_get)$
    get("/contact", contact_get)$
    post("/url-form-encoded", url_form_encoded_post)$
    post("/multipart-form-data", multipart_form_data_post)

  app$start()
}
</code></pre>

<hr>
<h2 id='pre_hook'>Pre Hook Response</h2><span id='topic+pre_hook'></span>

<h3>Description</h3>

<p>Pre Hook Response
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pre_hook(content, data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pre_hook_+3A_content">content</code></td>
<td>
<p>File content, a character vector.</p>
</td></tr>
<tr><td><code id="pre_hook_+3A_data">data</code></td>
<td>
<p>A list of data passed to <code>glue::glue_data</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A response pre-hook.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>my_prh &lt;- function(self, content, data, ext, ...) {
  data$title &lt;- "Mansion"
  pre_hook(content, data)
}

#' Handler for GET at '/'
#' 
#' @details Renders the homepage
#' @export
home_get &lt;- function(req, res) {
  res$pre_render_hook(my_prh)
  res$render(
    file = "page.html",
    data = list(
      title = "Home"
    )
  )
}
</code></pre>

<hr>
<h2 id='Request'>Request</h2><span id='topic+Request'></span>

<h3>Description</h3>

<p>A request.
</p>


<h3>Value</h3>

<p>A Request object.
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>HEADERS</code></dt><dd><p>Headers from the request.</p>
</dd>
<dt><code>HTTP_ACCEPT</code></dt><dd><p>Content types to accept.</p>
</dd>
<dt><code>HTTP_ACCEPT_ENCODING</code></dt><dd><p>Encoding of the request.</p>
</dd>
<dt><code>HTTP_ACCEPT_LANGUAGE</code></dt><dd><p>Language of the request.</p>
</dd>
<dt><code>HTTP_CACHE_CONTROL</code></dt><dd><p>Directorives for the cache (case-insensitive).</p>
</dd>
<dt><code>HTTP_CONNECTION</code></dt><dd><p>Controls whether the network connection stays open after the current transaction finishes.</p>
</dd>
<dt><code>HTTP_COOKIE</code></dt><dd><p>Cookie data.</p>
</dd>
<dt><code>HTTP_HOST</code></dt><dd><p>Host making the request.</p>
</dd>
<dt><code>HTTP_SEC_FETCH_DEST</code></dt><dd><p>Indicates the request's destination. That is the initiator of the original fetch request, which is where (and how) the fetched data will be used.</p>
</dd>
<dt><code>HTTP_SEC_FETCH_MODE</code></dt><dd><p>Indicates mode of the request.</p>
</dd>
<dt><code>HTTP_SEC_FETCH_SITE</code></dt><dd><p>Indicates the relationship between a request initiator's origin and the origin of the requested resource.</p>
</dd>
<dt><code>HTTP_SEC_FETCH_USER</code></dt><dd><p>Only sent for requests initiated by user activation, and its value will always be <code>?1</code>.</p>
</dd>
<dt><code>HTTP_UPGRADE_INSECURE_REQUESTS</code></dt><dd><p>Signals that server supports upgrade.</p>
</dd>
<dt><code>HTTP_USER_AGENT</code></dt><dd><p>User agent.</p>
</dd>
<dt><code>SERVER_NAME</code></dt><dd><p>Name of the server.</p>
</dd>
<dt><code>httpuv.version</code></dt><dd><p>Version of httpuv.</p>
</dd>
<dt><code>PATH_INFO</code></dt><dd><p>Path of the request.</p>
</dd>
<dt><code>QUERY_STRING</code></dt><dd><p>Query string of the request.</p>
</dd>
<dt><code>REMOTE_ADDR</code></dt><dd><p>Remote address.</p>
</dd>
<dt><code>REMOTE_PORT</code></dt><dd><p>Remote port.</p>
</dd>
<dt><code>REQUEST_METHOD</code></dt><dd><p>Method of the request, e.g.: <code>GET</code>.</p>
</dd>
<dt><code>rook.errors</code></dt><dd><p>Errors from rook.</p>
</dd>
<dt><code>rook.input</code></dt><dd><p>Rook inputs.</p>
</dd>
<dt><code>rook.url_scheme</code></dt><dd><p>Rook url scheme.</p>
</dd>
<dt><code>rook.version</code></dt><dd><p>Rook version.</p>
</dd>
<dt><code>SCRIPT_NAME</code></dt><dd><p>The initial portion of the request URL's &quot;path&quot; that corresponds to the application object, so that the application knows its virtual &quot;location&quot;.  #' @field SERVER_NAME Server name.</p>
</dd>
<dt><code>SERVER_PORT</code></dt><dd><p>Server port</p>
</dd>
<dt><code>CONTENT_LENGTH</code></dt><dd><p>Size of the message body.</p>
</dd>
<dt><code>CONTENT_TYPE</code></dt><dd><p>Type of content of the request.</p>
</dd>
<dt><code>HTTP_REFERER</code></dt><dd><p>Contains an absolute or partial address of the page that makes the request.</p>
</dd>
<dt><code>body</code></dt><dd><p>Request, an environment.</p>
</dd>
<dt><code>query</code></dt><dd><p>Parsed <code>QUERY_STRING</code>, <code>list</code>.</p>
</dd>
<dt><code>params</code></dt><dd><p>A <code>list</code> of parameters.</p>
</dd>
<dt><code>cookie</code></dt><dd><p>Parsed <code>HTTP_COOKIE</code>.</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-Request-new"><code>Request$new()</code></a>
</p>
</li>
<li> <p><a href="#method-Request-print"><code>Request$print()</code></a>
</p>
</li>
<li> <p><a href="#method-Request-get_header"><code>Request$get_header()</code></a>
</p>
</li>
<li> <p><a href="#method-Request-parse_multipart"><code>Request$parse_multipart()</code></a>
</p>
</li>
<li> <p><a href="#method-Request-parse_json"><code>Request$parse_json()</code></a>
</p>
</li>
<li> <p><a href="#method-Request-clone"><code>Request$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-Request-new"></a>



<h4>Method <code>new()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Request$new(req)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>req</code></dt><dd><p>Original request (environment).</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Constructor
</p>


<hr>
<a id="method-Request-print"></a>



<h4>Method <code>print()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Request$print()</pre></div>



<h5>Details</h5>

<p>Print
</p>


<hr>
<a id="method-Request-get_header"></a>



<h4>Method <code>get_header()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Request$get_header(name)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt><dd><p>Name of the header</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Get Header
</p>


<hr>
<a id="method-Request-parse_multipart"></a>



<h4>Method <code>parse_multipart()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Request$parse_multipart()</pre></div>



<h5>Details</h5>

<p>Parse Multipart encoded data
</p>


<hr>
<a id="method-Request-parse_json"></a>



<h4>Method <code>parse_json()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Request$parse_json(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>Arguments passed to <code><a href="#topic+parse_json">parse_json()</a></code>.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Parse JSON encoded data
</p>


<hr>
<a id="method-Request-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>Request$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  library(ambiorix)

  app &lt;- Ambiorix$new()

  app$get("/", function(req, res) {
    print(req)
    res$send("Using {ambiorix}!")
  })

  app$start()
}
</code></pre>

<hr>
<h2 id='Response'>Response</h2><span id='topic+Response'></span>

<h3>Description</h3>

<p>Response class to generate responses sent from the server.
</p>


<h3>Value</h3>

<p>A Response object.
</p>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>status</code></dt><dd><p>Status of the response, defaults to <code>200L</code>.</p>
</dd>
<dt><code>headers</code></dt><dd><p>Named list of headers.</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-Response-set_status"><code>Response$set_status()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-send"><code>Response$send()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-sendf"><code>Response$sendf()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-text"><code>Response$text()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-send_file"><code>Response$send_file()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-redirect"><code>Response$redirect()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-render"><code>Response$render()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-json"><code>Response$json()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-csv"><code>Response$csv()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-tsv"><code>Response$tsv()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-htmlwidget"><code>Response$htmlwidget()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-md"><code>Response$md()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-png"><code>Response$png()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-jpeg"><code>Response$jpeg()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-image"><code>Response$image()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-ggplot2"><code>Response$ggplot2()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-print"><code>Response$print()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-set"><code>Response$set()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-get"><code>Response$get()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-header"><code>Response$header()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-header_content_json"><code>Response$header_content_json()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-header_content_html"><code>Response$header_content_html()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-header_content_plain"><code>Response$header_content_plain()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-header_content_csv"><code>Response$header_content_csv()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-header_content_tsv"><code>Response$header_content_tsv()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-get_headers"><code>Response$get_headers()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-get_header"><code>Response$get_header()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-set_headers"><code>Response$set_headers()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-set_header"><code>Response$set_header()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-pre_render_hook"><code>Response$pre_render_hook()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-post_render_hook"><code>Response$post_render_hook()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-cookie"><code>Response$cookie()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-clear_cookie"><code>Response$clear_cookie()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-clone"><code>Response$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-Response-set_status"></a>



<h4>Method <code>set_status()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$set_status(status)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>status</code></dt><dd><p>An integer defining the status.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Set the status of the response.
</p>


<hr>
<a id="method-Response-send"></a>



<h4>Method <code>send()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$send(body, headers = NULL, status = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>body</code></dt><dd><p>Body of the response.</p>
</dd>
<dt><code>headers</code></dt><dd><p>HTTP headers to set.</p>
</dd>
<dt><code>status</code></dt><dd><p>Status of the response, if <code>NULL</code> uses <code>self$status</code>.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Send a plain HTML response.
</p>


<hr>
<a id="method-Response-sendf"></a>



<h4>Method <code>sendf()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$sendf(body, ..., headers = NULL, status = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>body</code></dt><dd><p>Body of the response.</p>
</dd>
<dt><code>...</code></dt><dd><p>Passed to <code>...</code> of <code>sprintf</code>.</p>
</dd>
<dt><code>headers</code></dt><dd><p>HTTP headers to set.</p>
</dd>
<dt><code>status</code></dt><dd><p>Status of the response, if <code>NULL</code> uses <code>self$status</code>.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Send a plain HTML response, pre-processed with sprintf.
</p>


<hr>
<a id="method-Response-text"></a>



<h4>Method <code>text()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$text(body, headers = NULL, status = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>body</code></dt><dd><p>Body of the response.</p>
</dd>
<dt><code>headers</code></dt><dd><p>HTTP headers to set.</p>
</dd>
<dt><code>status</code></dt><dd><p>Status of the response, if <code>NULL</code> uses <code>self$status</code>.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Send a plain text response.
</p>


<hr>
<a id="method-Response-send_file"></a>



<h4>Method <code>send_file()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$send_file(file, headers = NULL, status = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>file</code></dt><dd><p>File to send.</p>
</dd>
<dt><code>headers</code></dt><dd><p>HTTP headers to set.</p>
</dd>
<dt><code>status</code></dt><dd><p>Status of the response.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Send a file.
</p>


<hr>
<a id="method-Response-redirect"></a>



<h4>Method <code>redirect()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$redirect(path, status = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>path</code></dt><dd><p>Path or URL to redirect to.</p>
</dd>
<dt><code>status</code></dt><dd><p>Status of the response, if <code>NULL</code> uses <code>self$status</code>.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Redirect to a path or URL.
</p>


<hr>
<a id="method-Response-render"></a>



<h4>Method <code>render()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$render(file, data = list(), headers = NULL, status = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>file</code></dt><dd><p>Template file.</p>
</dd>
<dt><code>data</code></dt><dd><p>List to fill <code style="white-space: pre;">&#8288;[% tags %]&#8288;</code>.</p>
</dd>
<dt><code>headers</code></dt><dd><p>HTTP headers to set.</p>
</dd>
<dt><code>status</code></dt><dd><p>Status of the response, if <code>NULL</code> uses <code>self$status</code>.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Render a template file.
</p>


<hr>
<a id="method-Response-json"></a>



<h4>Method <code>json()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$json(body, headers = NULL, status = NULL, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>body</code></dt><dd><p>Body of the response.</p>
</dd>
<dt><code>headers</code></dt><dd><p>HTTP headers to set.</p>
</dd>
<dt><code>status</code></dt><dd><p>Status of the response, if <code>NULL</code> uses <code>self$status</code>.</p>
</dd>
<dt><code>...</code></dt><dd><p>Additional named arguments passed to the serialiser.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Render an object as JSON.
</p>


<hr>
<a id="method-Response-csv"></a>



<h4>Method <code>csv()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$csv(data, name = "data", status = NULL, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt><dd><p>Data to convert to CSV.</p>
</dd>
<dt><code>name</code></dt><dd><p>Name of the file.</p>
</dd>
<dt><code>status</code></dt><dd><p>Status of the response, if <code>NULL</code> uses <code>self$status</code>.</p>
</dd>
<dt><code>...</code></dt><dd><p>Additional arguments passed to <code><a href="readr.html#topic+format_delim">readr::format_csv()</a></code>.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Sends a comma separated value file
</p>


<hr>
<a id="method-Response-tsv"></a>



<h4>Method <code>tsv()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$tsv(data, name = "data", status = NULL, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt><dd><p>Data to convert to CSV.</p>
</dd>
<dt><code>name</code></dt><dd><p>Name of the file.</p>
</dd>
<dt><code>status</code></dt><dd><p>Status of the response, if <code>NULL</code> uses <code>self$status</code>.</p>
</dd>
<dt><code>...</code></dt><dd><p>Additional arguments passed to <code><a href="readr.html#topic+format_delim">readr::format_tsv()</a></code>.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Sends a tab separated value file
</p>


<hr>
<a id="method-Response-htmlwidget"></a>



<h4>Method <code>htmlwidget()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$htmlwidget(widget, status = NULL, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>widget</code></dt><dd><p>The widget to use.</p>
</dd>
<dt><code>status</code></dt><dd><p>Status of the response, if <code>NULL</code> uses <code>self$status</code>.</p>
</dd>
<dt><code>...</code></dt><dd><p>Additional arguments passed to <code><a href="htmlwidgets.html#topic+saveWidget">htmlwidgets::saveWidget()</a></code>.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Sends an htmlwidget.
</p>


<hr>
<a id="method-Response-md"></a>



<h4>Method <code>md()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$md(file, data = list(), headers = NULL, status = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>file</code></dt><dd><p>Template file.</p>
</dd>
<dt><code>data</code></dt><dd><p>List to fill <code style="white-space: pre;">&#8288;[% tags %]&#8288;</code>.</p>
</dd>
<dt><code>headers</code></dt><dd><p>HTTP headers to set.</p>
</dd>
<dt><code>status</code></dt><dd><p>Status of the response, if <code>NULL</code> uses <code>self$status</code>.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Render a markdown file.
</p>


<hr>
<a id="method-Response-png"></a>



<h4>Method <code>png()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$png(file)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>file</code></dt><dd><p>Path to local file.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Send a png file
</p>


<hr>
<a id="method-Response-jpeg"></a>



<h4>Method <code>jpeg()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$jpeg(file)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>file</code></dt><dd><p>Path to local file.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Send a jpeg file
</p>


<hr>
<a id="method-Response-image"></a>



<h4>Method <code>image()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$image(file)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>file</code></dt><dd><p>Path to local file.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Send an image
Similar to <code>png</code> and <code>jpeg</code> methods but guesses correct method
based on file extension.
</p>


<hr>
<a id="method-Response-ggplot2"></a>



<h4>Method <code>ggplot2()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$ggplot2(plot, ..., type = c("png", "jpeg"))</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>plot</code></dt><dd><p>Ggplot2 plot object.</p>
</dd>
<dt><code>...</code></dt><dd><p>Passed to <code><a href="ggplot2.html#topic+ggsave">ggplot2::ggsave()</a></code></p>
</dd>
<dt><code>type</code></dt><dd><p>Type of image to save.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Ggplot2
</p>


<hr>
<a id="method-Response-print"></a>



<h4>Method <code>print()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$print()</pre></div>



<h5>Details</h5>

<p>Print
</p>


<hr>
<a id="method-Response-set"></a>



<h4>Method <code>set()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$set(name, value)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt><dd><p>String. Name of the variable.</p>
</dd>
<dt><code>value</code></dt><dd><p>Value of the variable.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Set Data
</p>



<h5>Returns</h5>

<p>Invisible returns self.
</p>


<hr>
<a id="method-Response-get"></a>



<h4>Method <code>get()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$get(name)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt><dd><p>String. Name of the variable to get.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Get data
</p>


<hr>
<a id="method-Response-header"></a>



<h4>Method <code>header()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$header(name, value)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt><dd><p>String. Name of the header.</p>
</dd>
<dt><code>value</code></dt><dd><p>Value of the header.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Add headers to the response.
</p>



<h5>Returns</h5>

<p>Invisibly returns self.
</p>


<hr>
<a id="method-Response-header_content_json"></a>



<h4>Method <code>header_content_json()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$header_content_json()</pre></div>



<h5>Details</h5>

<p>Set Content Type to JSON
</p>



<h5>Returns</h5>

<p>Invisibly returns self.
</p>


<hr>
<a id="method-Response-header_content_html"></a>



<h4>Method <code>header_content_html()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$header_content_html()</pre></div>



<h5>Details</h5>

<p>Set Content Type to HTML
</p>



<h5>Returns</h5>

<p>Invisibly returns self.
</p>


<hr>
<a id="method-Response-header_content_plain"></a>



<h4>Method <code>header_content_plain()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$header_content_plain()</pre></div>



<h5>Details</h5>

<p>Set Content Type to Plain Text
</p>



<h5>Returns</h5>

<p>Invisibly returns self.
</p>


<hr>
<a id="method-Response-header_content_csv"></a>



<h4>Method <code>header_content_csv()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$header_content_csv()</pre></div>



<h5>Details</h5>

<p>Set Content Type to CSV
</p>



<h5>Returns</h5>

<p>Invisibly returns self.
</p>


<hr>
<a id="method-Response-header_content_tsv"></a>



<h4>Method <code>header_content_tsv()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$header_content_tsv()</pre></div>



<h5>Details</h5>

<p>Set Content Type to TSV
</p>



<h5>Returns</h5>

<p>Invisibly returns self.
</p>


<hr>
<a id="method-Response-get_headers"></a>



<h4>Method <code>get_headers()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$get_headers()</pre></div>



<h5>Details</h5>

<p>Get headers
Returns the list of headers currently set.
</p>


<hr>
<a id="method-Response-get_header"></a>



<h4>Method <code>get_header()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$get_header(name)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt><dd><p>Name of the header to return.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Get a header
Returns a single header currently, <code>NULL</code> if not set.
</p>


<hr>
<a id="method-Response-set_headers"></a>



<h4>Method <code>set_headers()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$set_headers(headers)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>headers</code></dt><dd><p>A named list of headers to set.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Set headers
</p>


<hr>
<a id="method-Response-set_header"></a>



<h4>Method <code>set_header()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$set_header(name, value)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt><dd><p>Name of the header.</p>
</dd>
<dt><code>value</code></dt><dd><p>Value to set.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Set a Header
</p>



<h5>Returns</h5>

<p>Invisible returns self.
</p>


<hr>
<a id="method-Response-pre_render_hook"></a>



<h4>Method <code>pre_render_hook()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$pre_render_hook(hook)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>hook</code></dt><dd><p>A function that accepts at least 4 arguments:
</p>

<ul>
<li> <p><code>self</code>: The <code>Request</code> class instance.
</p>
</li>
<li> <p><code>content</code>: File content a vector of character string,
content of the template.
</p>
</li>
<li> <p><code>data</code>: <code>list</code> passed from <code>render</code> method.
</p>
</li>
<li> <p><code>ext</code>: File extension of the template file.
</p>
</li></ul>

<p>This function is used to add pre-render hooks to the <code>render</code>
method. The function should return an object of class
<code>responsePreHook</code> as obtained by <code><a href="#topic+pre_hook">pre_hook()</a></code>.
This is meant to be used by middlewares to, if necessary,
pre-process rendered data.
</p>
<p>Include <code>...</code> in your <code>hook</code> to ensure it will handle
potential updates to hooks in the future.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Add a pre render hook.
Runs before the <code>render</code> and <code>send_file</code> method.
</p>



<h5>Returns</h5>

<p>Invisible returns self.
</p>


<hr>
<a id="method-Response-post_render_hook"></a>



<h4>Method <code>post_render_hook()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$post_render_hook(hook)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>hook</code></dt><dd><p>A function to run after the rendering of HTML.
It should accept at least 3 arguments:
</p>

<ul>
<li> <p><code>self</code>: The <code>Response</code> class instance.
</p>
</li>
<li> <p><code>content</code>: File content a vector of character string,
content of the template.
</p>
</li>
<li> <p><code>ext</code>: File extension of the template file.
</p>
</li></ul>

<p>Include <code>...</code> in your <code>hook</code> to ensure it will handle
potential updates to hooks in the future.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Post render hook.
</p>



<h5>Returns</h5>

<p>Invisible returns self.
</p>


<hr>
<a id="method-Response-cookie"></a>



<h4>Method <code>cookie()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$cookie(
  name,
  value,
  expires = getOption("ambiorix.cookie.expire"),
  max_age = getOption("ambiorix.cookie.maxage"),
  domain = getOption("ambiorix.cookie.domain"),
  path = getOption("ambiorix.cookie.path", "/"),
  secure = getOption("ambiorix.cookie.secure", TRUE),
  http_only = getOption("ambiorix.cookie.httponly", TRUE),
  same_site = getOption("ambiorix.cookie.savesite")
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt><dd><p>String. Name of the cookie.</p>
</dd>
<dt><code>value</code></dt><dd><p>value of the cookie.</p>
</dd>
<dt><code>expires</code></dt><dd><p>Expiry, if an integer assumes it's the number of seconds
from now. Otherwise accepts an object of class <code>POSIXct</code> or <code>Date</code>.
If a <code>character</code> string then it is set as-is and not pre-processed.
If unspecified, the cookie becomes a session cookie. A session finishes
when the client shuts down, after which the session cookie is removed.</p>
</dd>
<dt><code>max_age</code></dt><dd><p>Indicates the number of seconds until the cookie expires.
A zero or negative number will expire the cookie immediately.
If both <code>expires</code> and <code>max_age</code> are set, the latter has precedence.</p>
</dd>
<dt><code>domain</code></dt><dd><p>Defines the host to which the cookie will be sent.
If omitted, this attribute defaults to the host of the current document URL,
not including subdomains.</p>
</dd>
<dt><code>path</code></dt><dd><p>Indicates the path that must exist in the requested URL for the
browser to send the Cookie header.</p>
</dd>
<dt><code>secure</code></dt><dd><p>Indicates that the cookie is sent to the server only when a
request is made with the https: scheme (except on localhost), and therefore,
is more resistant to man-in-the-middle attacks.</p>
</dd>
<dt><code>http_only</code></dt><dd><p>Forbids JavaScript from accessing the cookie, for example,
through the document.cookie property.</p>
</dd>
<dt><code>same_site</code></dt><dd><p>Controls whether or not a cookie is sent with cross-origin
requests, providing some protection against cross-site request forgery
attacks (CSRF). Accepts <code>Strict</code>, <code>Lax</code>, or <code>None</code>.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Set a cookie
Overwrites existing cookie of the same <code>name</code>.
</p>



<h5>Returns</h5>

<p>Invisibly returns self.
</p>


<hr>
<a id="method-Response-clear_cookie"></a>



<h4>Method <code>clear_cookie()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Response$clear_cookie(name)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt><dd><p>Name of the cookie to clear.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Clear a cookie
Clears the value of a cookie.
</p>



<h5>Returns</h5>

<p>Invisibly returns self.
</p>


<hr>
<a id="method-Response-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>Response$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  library(ambiorix)

  app &lt;- Ambiorix$new()

  app$get("/", function(req, res) {
    # print(res)
    res$send("Using {ambiorix}!")
  })

  app$start()
}
</code></pre>

<hr>
<h2 id='responses'>Plain Responses</h2><span id='topic+responses'></span><span id='topic+response'></span><span id='topic+response_404'></span><span id='topic+response_500'></span>

<h3>Description</h3>

<p>Plain HTTP Responses.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>response(body, headers = list(), status = 200L)

response_404(
  body = "404: Not found",
  headers = list(`Content-Type` = content_html()),
  status = 404L
)

response_500(
  body = "500: Server Error",
  headers = list(`Content-Type` = content_html()),
  status = 500L
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="responses_+3A_body">body</code></td>
<td>
<p>Body of response.</p>
</td></tr>
<tr><td><code id="responses_+3A_headers">headers</code></td>
<td>
<p>HTTP headers.</p>
</td></tr>
<tr><td><code id="responses_+3A_status">status</code></td>
<td>
<p>Response status</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An Ambiorix response.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>app &lt;- Ambiorix$new()

# html
app$get("/", function(req, res){
 res$send("hello!")
})

# text
app$get("/text", function(req, res){
 res$text("hello!")
})

if(interactive())
 app$start()

</code></pre>

<hr>
<h2 id='robj'>R Object</h2><span id='topic+robj'></span>

<h3>Description</h3>

<p>Treats a data element rendered in a response (<code>res$render</code>) as
a data object and ultimately uses <code><a href="base.html#topic+dput">dput()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>robj(obj)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="robj_+3A_obj">obj</code></td>
<td>
<p>R object to treat.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For instance in a template, <code style="white-space: pre;">&#8288;x &lt;- [% var %]&#8288;</code> will not work with
<code>res$render(data=list(var = "hello"))</code> because this will be replace
like <code>x &lt;- hello</code> (missing quote): breaking the template. Using <code>robj</code> one would
obtain <code>x &lt;- "hello"</code>.
</p>


<h3>Value</h3>

<p>Object of class &quot;robj&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>robj(1:10)
</code></pre>

<hr>
<h2 id='Router'>Router</h2><span id='topic+Router'></span>

<h3>Description</h3>

<p>Web server.
</p>


<h3>Value</h3>

<p>A Router object.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+Routing">ambiorix::Routing</a></code> -&gt; <code>Router</code>
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>error</code></dt><dd><p>500 response when the route errors, must a handler function that accepts the request and the response, by default uses <code><a href="#topic+response_500">response_500()</a></code>.</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-Router-new"><code>Router$new()</code></a>
</p>
</li>
<li> <p><a href="#method-Router-print"><code>Router$print()</code></a>
</p>
</li>
<li> <p><a href="#method-Router-clone"><code>Router$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="all"><a href='../../ambiorix/html/Routing.html#method-Routing-all'><code>ambiorix::Routing$all()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="delete"><a href='../../ambiorix/html/Routing.html#method-Routing-delete'><code>ambiorix::Routing$delete()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="engine"><a href='../../ambiorix/html/Routing.html#method-Routing-engine'><code>ambiorix::Routing$engine()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="get"><a href='../../ambiorix/html/Routing.html#method-Routing-get'><code>ambiorix::Routing$get()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="get_middleware"><a href='../../ambiorix/html/Routing.html#method-Routing-get_middleware'><code>ambiorix::Routing$get_middleware()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="get_receivers"><a href='../../ambiorix/html/Routing.html#method-Routing-get_receivers'><code>ambiorix::Routing$get_receivers()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="get_routes"><a href='../../ambiorix/html/Routing.html#method-Routing-get_routes'><code>ambiorix::Routing$get_routes()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="options"><a href='../../ambiorix/html/Routing.html#method-Routing-options'><code>ambiorix::Routing$options()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="patch"><a href='../../ambiorix/html/Routing.html#method-Routing-patch'><code>ambiorix::Routing$patch()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="post"><a href='../../ambiorix/html/Routing.html#method-Routing-post'><code>ambiorix::Routing$post()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="prepare"><a href='../../ambiorix/html/Routing.html#method-Routing-prepare'><code>ambiorix::Routing$prepare()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="put"><a href='../../ambiorix/html/Routing.html#method-Routing-put'><code>ambiorix::Routing$put()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="receive"><a href='../../ambiorix/html/Routing.html#method-Routing-receive'><code>ambiorix::Routing$receive()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ambiorix" data-topic="Routing" data-id="use"><a href='../../ambiorix/html/Routing.html#method-Routing-use'><code>ambiorix::Routing$use()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-Router-new"></a>



<h4>Method <code>new()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Router$new(path)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>path</code></dt><dd><p>The base path of the router.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Define the base route.
</p>


<hr>
<a id="method-Router-print"></a>



<h4>Method <code>print()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Router$print()</pre></div>



<h5>Details</h5>

<p>Print
</p>


<hr>
<a id="method-Router-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>Router$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'># log
logger &lt;- new_log()
# router
# create router
router &lt;- Router$new("/users")

router$get("/", function(req, res){
 res$send("List of users")
})

router$get("/:id", function(req, res){
 logger$log("Return user id:", req$params$id)
 res$send(req$params$id)
})

router$get("/:id/profile", function(req, res){
 msg &lt;- sprintf("This is the profile of user #%s", req$params$id)
 res$send(msg)
})

# core app
app &lt;- Ambiorix$new()

app$get("/", function(req, res){
 res$send("Home!")
})

# mount the router
app$use(router)

if(interactive())
 app$start()

</code></pre>

<hr>
<h2 id='Routing'>Core Routing Class</h2><span id='topic+Routing'></span>

<h3>Description</h3>

<p>Core routing class.
Do not use directly, see <a href="#topic+Ambiorix">Ambiorix</a>, and <a href="#topic+Router">Router</a>.
</p>


<h3>Value</h3>

<p>A Routing object.
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>error</code></dt><dd><p>Error handler.</p>
</dd>
</dl>

</div>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>basepath</code></dt><dd><p>Basepath, read-only.</p>
</dd>
<dt><code>websocket</code></dt><dd><p>Websocket handler.</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-Routing-new"><code>Routing$new()</code></a>
</p>
</li>
<li> <p><a href="#method-Routing-get"><code>Routing$get()</code></a>
</p>
</li>
<li> <p><a href="#method-Routing-put"><code>Routing$put()</code></a>
</p>
</li>
<li> <p><a href="#method-Routing-patch"><code>Routing$patch()</code></a>
</p>
</li>
<li> <p><a href="#method-Routing-delete"><code>Routing$delete()</code></a>
</p>
</li>
<li> <p><a href="#method-Routing-post"><code>Routing$post()</code></a>
</p>
</li>
<li> <p><a href="#method-Routing-options"><code>Routing$options()</code></a>
</p>
</li>
<li> <p><a href="#method-Routing-all"><code>Routing$all()</code></a>
</p>
</li>
<li> <p><a href="#method-Routing-receive"><code>Routing$receive()</code></a>
</p>
</li>
<li> <p><a href="#method-Routing-print"><code>Routing$print()</code></a>
</p>
</li>
<li> <p><a href="#method-Routing-engine"><code>Routing$engine()</code></a>
</p>
</li>
<li> <p><a href="#method-Routing-use"><code>Routing$use()</code></a>
</p>
</li>
<li> <p><a href="#method-Routing-get_routes"><code>Routing$get_routes()</code></a>
</p>
</li>
<li> <p><a href="#method-Routing-get_receivers"><code>Routing$get_receivers()</code></a>
</p>
</li>
<li> <p><a href="#method-Routing-get_middleware"><code>Routing$get_middleware()</code></a>
</p>
</li>
<li> <p><a href="#method-Routing-prepare"><code>Routing$prepare()</code></a>
</p>
</li>
<li> <p><a href="#method-Routing-clone"><code>Routing$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-Routing-new"></a>



<h4>Method <code>new()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Routing$new(path = "")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>path</code></dt><dd><p>Prefix path.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Initialise
</p>


<hr>
<a id="method-Routing-get"></a>



<h4>Method <code>get()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Routing$get(path, handler, error = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>path</code></dt><dd><p>Route to listen to, <code>:</code> defines a parameter.</p>
</dd>
<dt><code>handler</code></dt><dd><p>Function that accepts the request and returns an object
describing an httpuv response, e.g.: <code><a href="#topic+response">response()</a></code>.</p>
</dd>
<dt><code>error</code></dt><dd><p>Handler function to run on error.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>GET Method
</p>
<p>Add routes to listen to.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>app &lt;- Ambiorix$new()

app$get("/", function(req, res){
 res$send("Using {ambiorix}!")
})

if(interactive())
 app$start()
</pre>
</div>


<hr>
<a id="method-Routing-put"></a>



<h4>Method <code>put()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Routing$put(path, handler, error = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>path</code></dt><dd><p>Route to listen to, <code>:</code> defines a parameter.</p>
</dd>
<dt><code>handler</code></dt><dd><p>Function that accepts the request and returns an object
describing an httpuv response, e.g.: <code><a href="#topic+response">response()</a></code>.</p>
</dd>
<dt><code>error</code></dt><dd><p>Handler function to run on error.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>PUT Method
</p>
<p>Add routes to listen to.
</p>


<hr>
<a id="method-Routing-patch"></a>



<h4>Method <code>patch()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Routing$patch(path, handler, error = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>path</code></dt><dd><p>Route to listen to, <code>:</code> defines a parameter.</p>
</dd>
<dt><code>handler</code></dt><dd><p>Function that accepts the request and returns an object
describing an httpuv response, e.g.: <code><a href="#topic+response">response()</a></code>.</p>
</dd>
<dt><code>error</code></dt><dd><p>Handler function to run on error.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>PATCH Method
</p>
<p>Add routes to listen to.
</p>


<hr>
<a id="method-Routing-delete"></a>



<h4>Method <code>delete()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Routing$delete(path, handler, error = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>path</code></dt><dd><p>Route to listen to, <code>:</code> defines a parameter.</p>
</dd>
<dt><code>handler</code></dt><dd><p>Function that accepts the request and returns an object
describing an httpuv response, e.g.: <code><a href="#topic+response">response()</a></code>.</p>
</dd>
<dt><code>error</code></dt><dd><p>Handler function to run on error.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>DELETE Method
</p>
<p>Add routes to listen to.
</p>


<hr>
<a id="method-Routing-post"></a>



<h4>Method <code>post()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Routing$post(path, handler, error = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>path</code></dt><dd><p>Route to listen to.</p>
</dd>
<dt><code>handler</code></dt><dd><p>Function that accepts the request and returns an object
describing an httpuv response, e.g.: <code><a href="#topic+response">response()</a></code>.</p>
</dd>
<dt><code>error</code></dt><dd><p>Handler function to run on error.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>POST Method
</p>
<p>Add routes to listen to.
</p>


<hr>
<a id="method-Routing-options"></a>



<h4>Method <code>options()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Routing$options(path, handler, error = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>path</code></dt><dd><p>Route to listen to.</p>
</dd>
<dt><code>handler</code></dt><dd><p>Function that accepts the request and returns an object
describing an httpuv response, e.g.: <code><a href="#topic+response">response()</a></code>.</p>
</dd>
<dt><code>error</code></dt><dd><p>Handler function to run on error.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>OPTIONS Method
</p>
<p>Add routes to listen to.
</p>


<hr>
<a id="method-Routing-all"></a>



<h4>Method <code>all()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Routing$all(path, handler, error = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>path</code></dt><dd><p>Route to listen to.</p>
</dd>
<dt><code>handler</code></dt><dd><p>Function that accepts the request and returns an object
describing an httpuv response, e.g.: <code><a href="#topic+response">response()</a></code>.</p>
</dd>
<dt><code>error</code></dt><dd><p>Handler function to run on error.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>All Methods
</p>
<p>Add routes to listen to for all methods <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>DELETE</code>, and <code>PATCH</code>.
</p>


<hr>
<a id="method-Routing-receive"></a>



<h4>Method <code>receive()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Routing$receive(name, handler)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt><dd><p>Name of message.</p>
</dd>
<dt><code>handler</code></dt><dd><p>Function to run when message is received.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Receive Websocket Message
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>app &lt;- Ambiorix$new()

app$get("/", function(req, res){
 res$send("Using {ambiorix}!")
})

app$receive("hello", function(msg, ws){
 print(msg) # print msg received
 
 # send a message back
 ws$send("hello", "Hello back! (sent from R)")
})

if(interactive())
 app$start()
</pre>
</div>


<hr>
<a id="method-Routing-print"></a>



<h4>Method <code>print()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Routing$print()</pre></div>



<h5>Details</h5>

<p>Print
</p>


<hr>
<a id="method-Routing-engine"></a>



<h4>Method <code>engine()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Routing$engine(engine)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>engine</code></dt><dd><p>Engine function.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Engine to use for rendering templates.
</p>


<hr>
<a id="method-Routing-use"></a>



<h4>Method <code>use()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Routing$use(use)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>use</code></dt><dd><p>Either a router as returned by <a href="#topic+Router">Router</a>, a function to use as middleware,
or a <code>list</code> of functions.
If a function is passed, it must accept two arguments (the request, and the response):
this function will be executed every time the server receives a request.
<em>Middleware may but does not have to return a response, unlike other methods such as <code>get</code></em>
Note that multiple routers and middlewares can be used.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Use a router or middleware
</p>


<hr>
<a id="method-Routing-get_routes"></a>



<h4>Method <code>get_routes()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Routing$get_routes(routes = list(), parent = "")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>routes</code></dt><dd><p>Existing list of routes.</p>
</dd>
<dt><code>parent</code></dt><dd><p>Parent path.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Get the routes
</p>


<hr>
<a id="method-Routing-get_receivers"></a>



<h4>Method <code>get_receivers()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Routing$get_receivers(receivers = list())</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>receivers</code></dt><dd><p>Existing list of receivers</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Get the websocket receivers
</p>


<hr>
<a id="method-Routing-get_middleware"></a>



<h4>Method <code>get_middleware()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Routing$get_middleware(middlewares = list(), parent = "")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>middlewares</code></dt><dd><p>Existing list of middleswares</p>
</dd>
<dt><code>parent</code></dt><dd><p>Parent path</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Get the middleware
</p>


<hr>
<a id="method-Routing-prepare"></a>



<h4>Method <code>prepare()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Routing$prepare()</pre></div>



<h5>Details</h5>

<p>Prepare routes and decomposes paths
</p>


<hr>
<a id="method-Routing-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>Routing$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
## ------------------------------------------------
## Method `Routing$get`
## ------------------------------------------------

app &lt;- Ambiorix$new()

app$get("/", function(req, res){
 res$send("Using {ambiorix}!")
})

if(interactive())
 app$start()

## ------------------------------------------------
## Method `Routing$receive`
## ------------------------------------------------

app &lt;- Ambiorix$new()

app$get("/", function(req, res){
 res$send("Using {ambiorix}!")
})

app$receive("hello", function(msg, ws){
 print(msg) # print msg received
 
 # send a message back
 ws$send("hello", "Hello back! (sent from R)")
})

if(interactive())
 app$start()
</code></pre>

<hr>
<h2 id='serialise'>Serialise an Object to JSON</h2><span id='topic+serialise'></span>

<h3>Description</h3>

<p>Serialise an Object to JSON
</p>


<h3>Usage</h3>

<pre><code class='language-R'>serialise(data, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="serialise_+3A_data">data</code></td>
<td>
<p>Data to serialise.</p>
</td></tr>
<tr><td><code id="serialise_+3A_...">...</code></td>
<td>
<p>Passed to serialiser.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Ambiorix uses <code><a href="yyjsonr.html#topic+write_json_str">yyjsonr::write_json_str()</a></code> by default for serialization.
</p>


<h4>Custom Serialiser</h4>

<p>To override the default, set the <code>AMBIORIX_SERIALISER</code> option to a function that accepts:
</p>

<ul>
<li> <p><code>data</code>: Object to serialise.
</p>
</li>
<li> <p><code>...</code>: Additional arguments passed to the function.
</p>
</li></ul>

<p>For example:
</p>
<div class="sourceCode r"><pre>my_serialiser &lt;- function(data, ...) {
 jsonlite::toJSON(x = data, ...)
}

options(AMBIORIX_SERIALISER = my_serialiser)
</pre></div>



<h3>Value</h3>

<p>JSON string.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  # a list:
  response &lt;- list(code = 200L, msg = "hello, world!")

  serialise(response)
  #&gt; {"code":200,"msg":"hello, world"}

  serialise(response, auto_unbox = FALSE)
  #&gt; {"code":[200],"msg":["hello, world"]}

  # data.frame:
  serialise(cars)
}

</code></pre>

<hr>
<h2 id='set_log'>Customise logs</h2><span id='topic+set_log'></span><span id='topic+set_log_info'></span><span id='topic+set_log_success'></span><span id='topic+set_log_error'></span>

<h3>Description</h3>

<p>Customise the internal logs used by Ambiorix.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_log_info(log)

set_log_success(log)

set_log_error(log)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_log_+3A_log">log</code></td>
<td>
<p>An object of class <code>Logger</code>, see
<a href="log.html#topic+Logger">log::Logger</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The <code>log</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># define custom loggers:
info_logger &lt;- log::Logger$new("INFO")
success_logger &lt;- log::Logger$new("SUCCESS")
error_logger &lt;- log::Logger$new("ERROR")

info_logger$log("This is an info message.")
success_logger$log("This is a success message.")
error_logger$log("This is an error message.")

# set custom loggers for Ambiorix:
set_log_info(info_logger)
set_log_success(success_logger)
set_log_error(error_logger)
</code></pre>

<hr>
<h2 id='stop_all'>Stop</h2><span id='topic+stop_all'></span>

<h3>Description</h3>

<p>Stop all servers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stop_all()
</code></pre>


<h3>Value</h3>

<p><code>NULL</code> (invisibly)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  stop_all()
}
</code></pre>

<hr>
<h2 id='token_create'>Token</h2><span id='topic+token_create'></span>

<h3>Description</h3>

<p>Create a token
</p>


<h3>Usage</h3>

<pre><code class='language-R'>token_create(n = 16L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="token_create_+3A_n">n</code></td>
<td>
<p>Number of bytes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Length 1 character vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>token_create()
token_create(n = 32L)
</code></pre>

<hr>
<h2 id='use_html_template'>HTML Template</h2><span id='topic+use_html_template'></span>

<h3>Description</h3>

<p>Use <code><a href="htmltools.html#topic+htmlTemplate">htmltools::htmlTemplate()</a></code> as renderer.
Passed to <code>use</code> method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>use_html_template()
</code></pre>


<h3>Value</h3>

<p>A renderer function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>use_html_template()
</code></pre>

<hr>
<h2 id='Websocket'>Websocket</h2><span id='topic+Websocket'></span>

<h3>Description</h3>

<p>Handle websocket messages.
</p>


<h3>Value</h3>

<p>A Websocket object.
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-Websocket-new"><code>Websocket$new()</code></a>
</p>
</li>
<li> <p><a href="#method-Websocket-send"><code>Websocket$send()</code></a>
</p>
</li>
<li> <p><a href="#method-Websocket-print"><code>Websocket$print()</code></a>
</p>
</li>
<li> <p><a href="#method-Websocket-clone"><code>Websocket$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-Websocket-new"></a>



<h4>Method <code>new()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Websocket$new(ws)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>ws</code></dt><dd></dd>
</dl>

</div>



<h5>Details</h5>

<p>Constructor
</p>


<hr>
<a id="method-Websocket-send"></a>



<h4>Method <code>send()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Websocket$send(name, message)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt><dd><p>Name, identifier, of the message.</p>
</dd>
<dt><code>message</code></dt><dd><p>Content of the message, anything that can be
serialised to JSON.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Send a message
</p>


<hr>
<a id="method-Websocket-print"></a>



<h4>Method <code>print()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>Websocket$print()</pre></div>



<h5>Details</h5>

<p>Print
</p>


<hr>
<a id="method-Websocket-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>Websocket$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'># create an Ambiorix app with websocket support:
if (interactive()) {
  library(ambiorix)

  home_get &lt;- function(req, res) {
    res$send("hello, world!")
  }

  greeting_ws_handler &lt;- function(msg, ws) {
    cat("Received message:", "\n")
    print(msg)
    ws$send("greeting", "Hello from the server!")
  }

  app &lt;- Ambiorix$new(port = 8080)
  app$get("/", home_get)
  app$receive("greeting", greeting_ws_handler)
  app$start()
}

# create websocket client from another R session:
if (interactive()) {
  client &lt;- websocket::WebSocket$new("ws://127.0.0.1:8080", autoConnect = FALSE)

  client$onOpen(function(event) {
    cat("Connection opened\n")

    msg &lt;- list(
      isAmbiorix = TRUE, # __MUST__ be set!
      name = "greeting",
      message = "Hello from the client!"
    )

    # serialise:
    msg &lt;- yyjsonr::write_json_str(msg, auto_unbox = TRUE)

    client$send(msg)
  })

  client$onMessage(function(event) {
    cat("Received message from server:", event$data, "\n")
  })

  client$connect()
}

</code></pre>

<hr>
<h2 id='websocket_client'>Websocket Client</h2><span id='topic+websocket_client'></span><span id='topic+copy_websocket_client'></span><span id='topic+get_websocket_client_path'></span><span id='topic+get_websocket_clients'></span>

<h3>Description</h3>

<p>Handle ambiorix websocket client.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>copy_websocket_client(path)

get_websocket_client_path()

get_websocket_clients()
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="websocket_client_+3A_path">path</code></td>
<td>
<p>Path to copy the file to.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li> <p><code>copy_websocket_client</code>: String. The new path (invisibly).
</p>
</li>
<li> <p><code>get_websocket_client_path</code>: String. The path to the local websocket client.
</p>
</li>
<li> <p><code>get_websocket_clients</code>: List. Websocket clients.
</p>
</li></ul>



<h3>Functions</h3>


<ul>
<li> <p><code>copy_websocket_client</code> Copies the websocket client file, useful when
ambiorix was not setup with the ambiorix generator.
</p>
</li>
<li> <p><code>get_websocket_client_path</code> Retrieves the full path to the local websocket client.
</p>
</li>
<li> <p><code>get_websocket_clients</code> Retrieves clients connected to the server.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>chat_ws &lt;- function(msg, ws) {
  lapply(
    X = get_websocket_clients(),
    FUN = function(c) {
      c$send("chat", msg)
    }
  )
}
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
