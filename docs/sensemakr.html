<!DOCTYPE html><html><head><title>Help for package sensemakr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {sensemakr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_bound_to_contour'><p>Add bounds to contour plot of omitted variable bias</p></a></li>
<li><a href='#adjusted_estimate'><p>Bias-adjusted estimates, standard-errors and t-values</p></a></li>
<li><a href='#colombia'><p>Data from the 2016 referendum for peace with the FARC in Colombia.</p></a></li>
<li><a href='#darfur'><p>Data from survey of Darfurian refugees in eastern Chad.</p></a></li>
<li><a href='#group_partial_r2'><p>Partial R2 of groups of covariates in a linear regression model</p></a></li>
<li><a href='#model_helper'><p>Helper function for extracting model statistics</p></a></li>
<li><a href='#ovb_bounds'><p>Bounds on the strength of unobserved confounders using observed covariates</p></a></li>
<li><a href='#ovb_contour_plot'><p>Contour plots of omitted variable bias</p></a></li>
<li><a href='#ovb_extreme_plot'><p>Extreme scenarios plots of omitted variable bias</p></a></li>
<li><a href='#partial_r2'><p>Computes the partial R2 and partial (Cohen's) f2</p></a></li>
<li><a href='#plot.sensemakr'><p>Sensitivity analysis plots for <code>sensemakr</code></p></a></li>
<li><a href='#print.sensemakr'><p>Sensitivity analysis print and summary methods for <code>sensemakr</code></p></a></li>
<li><a href='#resid_maker'><p>Creates orthogonal residuals</p></a></li>
<li><a href='#robustness_value'><p>Computes the robustness value</p></a></li>
<li><a href='#sensemakr'><p>Sensitivity analysis to unobserved confounders</p></a></li>
<li><a href='#sensemakr-package'><p>Sensemakr: extending omitted variable bias</p></a></li>
<li><a href='#sensitivity_stats'><p>Sensitivity statistics for regression coefficients</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Sensitivity Analysis Tools for Regression Models</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-10-07</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.4</td>
</tr>
<tr>
<td>Author:</td>
<td>Carlos Cinelli [aut, cre],
  Jeremy Ferwerda [aut],
  Chad Hazlett [aut],
  Aaron Rudkin [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Carlos Cinelli &lt;carloscinelli@hotmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Implements a suite of sensitivity analysis tools 
  that extends the traditional omitted variable bias framework and makes it easier 
  to understand the impact of omitted variables in regression models, as discussed in Cinelli, C. and Hazlett, C. (2020), "Making Sense of Sensitivity: Extending Omitted Variable Bias." Journal of the Royal Statistical Society, Series B (Statistical Methodology) &lt;<a href="https://doi.org/10.1111%2Frssb.12348">doi:10.1111/rssb.12348</a>&gt;.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/carloscinelli/sensemakr">https://github.com/carloscinelli/sensemakr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/carloscinelli/sensemakr/issues">https://github.com/carloscinelli/sensemakr/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.0)</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, covr, knitr, rmarkdown, png, stargazer</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-10-08 02:58:59 UTC; carloscinelli</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-10-08 05:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_bound_to_contour'>Add bounds to contour plot of omitted variable bias</h2><span id='topic+add_bound_to_contour'></span><span id='topic+add_bound_to_contour.lm'></span><span id='topic+add_bound_to_contour.numeric'></span>

<h3>Description</h3>

<p>Convenience function to add bounds on a sensitivity contour plot created with <code><a href="#topic+ovb_contour_plot">ovb_contour_plot</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_bound_to_contour(...)

## S3 method for class 'lm'
add_bound_to_contour(
  model,
  benchmark_covariates,
  kd = 1,
  ky = kd,
  bound_label = NULL,
  treatment = plot.env$treatment,
  reduce = plot.env$reduce,
  sensitivity.of = plot.env$sensitivity.of,
  label.text = TRUE,
  cex.label.text = 0.7,
  label.bump.x = plot.env$lim * (1/15),
  label.bump.y = plot.env$lim.y * (1/15),
  round = 2,
  ...
)

## S3 method for class 'numeric'
add_bound_to_contour(
  r2dz.x,
  r2yz.dx,
  bound_value = NULL,
  bound_label = NULL,
  label.text = TRUE,
  cex.label.text = 0.7,
  font.label.text = 1,
  label.bump.x = plot.env$lim * (1/15),
  label.bump.y = plot.env$lim.y * (1/15),
  round = 2,
  point.pch = 23,
  point.col = "black",
  point.bg = "red",
  point.cex = 1,
  point.font = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_bound_to_contour_+3A_...">...</code></td>
<td>
<p>arguments passed to other methods.</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_model">model</code></td>
<td>
<p>An <code>lm</code> object with the outcome regression.</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_benchmark_covariates">benchmark_covariates</code></td>
<td>
<p>The user has two options: (i)  character vector of the names of covariates that will be used to bound the plausible strength of the unobserved confounders. Each variable will be considered separately; (ii) a named list with character vector names of covariates that will be used, <em>as a group</em>, to bound the plausible strength of the unobserved confounders. The names of the list will be used for the benchmark labels. Note: for factor variables with more than two levels, you need to provide the name of each level as encoded in the <code>lm</code> model (the columns of <code>model.matrix</code>).</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_kd">kd</code></td>
<td>
<p>numeric vector. Parameterizes how many times stronger the confounder is related to the treatment in comparison to the observed benchmark covariate.
Default value is <code>1</code> (confounder is as strong as benchmark covariate).</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_ky">ky</code></td>
<td>
<p>numeric vector. Parameterizes how many times stronger the confounder is related to the outcome in comparison to the observed benchmark covariate.
Default value is the same as <code>kd</code>.</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_bound_label">bound_label</code></td>
<td>
<p>label to bounds provided manually in <code>r2dz.x</code> and <code>r2yz.dx</code>.</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_treatment">treatment</code></td>
<td>
<p>A character vector with the name of the treatment variable
of the model.</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_reduce">reduce</code></td>
<td>
<p>Should the bias adjustment reduce or increase the
absolute value of the estimated coefficient? Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_sensitivity.of">sensitivity.of</code></td>
<td>
<p>should the contour plot show adjusted estimates (<code>"estimate"</code>)
or adjusted t-values (<code>"t-value"</code>)?</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_label.text">label.text</code></td>
<td>
<p>should label texts be plotted? Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_cex.label.text">cex.label.text</code></td>
<td>
<p>size of the label text.</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_label.bump.x">label.bump.x</code></td>
<td>
<p>bump on the x coordinate of label text.</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_label.bump.y">label.bump.y</code></td>
<td>
<p>bump on the y coordinate of label text.</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_round">round</code></td>
<td>
<p>integer indicating the number of decimal places to be used for rounding.</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_r2dz.x">r2dz.x</code></td>
<td>
<p>Hypothetical partial R2 of unobserved confounder
Z with treatment D, given covariates X.</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_r2yz.dx">r2yz.dx</code></td>
<td>
<p>Hypothetical partial R2 of unobserved confounder Z
with outcome Y, given covariates X and treatment D.</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_bound_value">bound_value</code></td>
<td>
<p>value to be printed in label bound.</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_font.label.text">font.label.text</code></td>
<td>
<p>font for the label text.</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_point.pch">point.pch</code></td>
<td>
<p>plotting character for <code><a href="graphics.html#topic+points">points</a></code>.</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_point.col">point.col</code></td>
<td>
<p>color code or name for <code><a href="graphics.html#topic+points">points</a></code>.</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_point.bg">point.bg</code></td>
<td>
<p>backgrounf (fill) color for <code><a href="graphics.html#topic+points">points</a></code>.</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_point.cex">point.cex</code></td>
<td>
<p>size of <code><a href="graphics.html#topic+points">points</a></code>.</p>
</td></tr>
<tr><td><code id="add_bound_to_contour_+3A_point.font">point.font</code></td>
<td>
<p>font for <code><a href="graphics.html#topic+points">points</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function adds bounds in an existing contour plot and returns 'NULL'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# runs regression model
model &lt;- lm(peacefactor ~ directlyharmed + age + farmer_dar + herder_dar +
                         pastvoted + hhsize_darfur + female + village,
                         data = darfur)
# contour plot
ovb_contour_plot(model = model, treatment = "directlyharmed")

# add bound 3/1 times stronger than female
add_bound_to_contour(model = model,
                     benchmark_covariates = "female",
                     kd = 3, ky = 1)

# add bound 50/2 times stronger than age
add_bound_to_contour(model = model,
                     benchmark_covariates = "age",
                     kd = 50, ky = 2)

</code></pre>

<hr>
<h2 id='adjusted_estimate'>Bias-adjusted estimates, standard-errors and t-values</h2><span id='topic+adjusted_estimate'></span><span id='topic+adjusted_estimate.lm'></span><span id='topic+adjusted_estimate.numeric'></span><span id='topic+adjusted_se'></span><span id='topic+adjusted_se.numeric'></span><span id='topic+adjusted_se.lm'></span><span id='topic+adjusted_t'></span><span id='topic+adjusted_t.lm'></span><span id='topic+adjusted_t.numeric'></span><span id='topic+adjusted_partial_r2'></span><span id='topic+adjusted_partial_r2.numeric'></span><span id='topic+adjusted_partial_r2.lm'></span><span id='topic+bias'></span><span id='topic+bias.numeric'></span><span id='topic+bias.lm'></span><span id='topic+relative_bias'></span><span id='topic+relative_bias.lm'></span><span id='topic+relative_bias.numeric'></span><span id='topic+rel_bias'></span>

<h3>Description</h3>

<p>These functions compute bias adjusted estimates (<code>adjusted_estimate</code>),
standard-errors (<code>adjusted_se</code>) and t-values (<code>adjusted_t</code>),
given a hypothetical strength of the confounder in the partial R2 parameterization.
</p>
<p>The functions work either with an <code><a href="stats.html#topic+lm">lm</a></code> object, or directly
passing in numerical inputs, such as the
current coefficient estimate, standard error and degrees of freedom.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adjusted_estimate(...)

## S3 method for class 'lm'
adjusted_estimate(model, treatment, r2dz.x, r2yz.dx, reduce = TRUE, ...)

## S3 method for class 'numeric'
adjusted_estimate(estimate, se, dof, r2dz.x, r2yz.dx, reduce = TRUE, ...)

adjusted_se(...)

## S3 method for class 'numeric'
adjusted_se(se, dof, r2dz.x, r2yz.dx, ...)

## S3 method for class 'lm'
adjusted_se(model, treatment, r2dz.x, r2yz.dx, ...)

adjusted_t(...)

## S3 method for class 'lm'
adjusted_t(model, treatment, r2dz.x, r2yz.dx, reduce = TRUE, h0 = 0, ...)

## S3 method for class 'numeric'
adjusted_t(estimate, se, dof, r2dz.x, r2yz.dx, reduce = TRUE, h0 = 0, ...)

adjusted_partial_r2(...)

## S3 method for class 'numeric'
adjusted_partial_r2(
  estimate,
  se,
  dof,
  r2dz.x,
  r2yz.dx,
  reduce = TRUE,
  h0 = 0,
  ...
)

## S3 method for class 'lm'
adjusted_partial_r2(
  model,
  treatment,
  r2dz.x,
  r2yz.dx,
  reduce = TRUE,
  h0 = 0,
  ...
)

bias(...)

## S3 method for class 'numeric'
bias(se, dof, r2dz.x, r2yz.dx, ...)

## S3 method for class 'lm'
bias(model, treatment, r2dz.x, r2yz.dx, ...)

relative_bias(...)

## S3 method for class 'lm'
relative_bias(model, treatment, r2dz.x, r2yz.dx, ...)

## S3 method for class 'numeric'
relative_bias(estimate, se, dof, r2dz.x, r2yz.dx, ...)

rel_bias(r.est, est)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="adjusted_estimate_+3A_...">...</code></td>
<td>
<p>Arguments passed to other methods. First argument should either be an
<code>lm</code> model with the outcome regression or a numeric vector with the
coefficient estimate.</p>
</td></tr>
<tr><td><code id="adjusted_estimate_+3A_model">model</code></td>
<td>
<p>An <code>lm</code> object with the outcome regression.</p>
</td></tr>
<tr><td><code id="adjusted_estimate_+3A_treatment">treatment</code></td>
<td>
<p>A character vector with the name of the treatment variable
of the model.</p>
</td></tr>
<tr><td><code id="adjusted_estimate_+3A_r2dz.x">r2dz.x</code></td>
<td>
<p>Hypothetical partial R2 of unobserved confounder
Z with treatment D, given covariates X.</p>
</td></tr>
<tr><td><code id="adjusted_estimate_+3A_r2yz.dx">r2yz.dx</code></td>
<td>
<p>Hypothetical partial R2 of unobserved confounder Z
with outcome Y, given covariates X and treatment D.</p>
</td></tr>
<tr><td><code id="adjusted_estimate_+3A_reduce">reduce</code></td>
<td>
<p>Should the bias adjustment reduce or increase the
absolute value of the estimated coefficient? Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="adjusted_estimate_+3A_estimate">estimate</code></td>
<td>
<p>Coefficient estimate.</p>
</td></tr>
<tr><td><code id="adjusted_estimate_+3A_se">se</code></td>
<td>
<p>Standard error of the coefficient estimate.</p>
</td></tr>
<tr><td><code id="adjusted_estimate_+3A_dof">dof</code></td>
<td>
<p>Residual degrees of freedom of the regression.</p>
</td></tr>
<tr><td><code id="adjusted_estimate_+3A_h0">h0</code></td>
<td>
<p>Null hypothesis for computation of the t-value. Default is zero.</p>
</td></tr>
<tr><td><code id="adjusted_estimate_+3A_r.est">r.est</code></td>
<td>
<p>restricted estimate. A numerical vector.</p>
</td></tr>
<tr><td><code id="adjusted_estimate_+3A_est">est</code></td>
<td>
<p>unrestricted estimate. A numerical vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Numeric vector with bias, adjusted estimate, standard error, or t-value.
</p>


<h3>References</h3>

<p>Cinelli, C. and Hazlett, C. (2020), &quot;Making Sense of Sensitivity: Extending Omitted Variable Bias.&quot; Journal of the Royal Statistical Society, Series B (Statistical Methodology).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># loads data
data("darfur")

# fits model
model &lt;- lm(peacefactor ~ directlyharmed + age +
                          farmer_dar + herder_dar +
                           pastvoted + hhsize_darfur +
                           female + village, data = darfur)

# computes adjusted estimate for confounder with  r2dz.x = 0.05, r2yz.dx = 0.05
adjusted_estimate(model, treatment = "directlyharmed", r2dz.x = 0.05, r2yz.dx = 0.05)

# computes adjusted SE for confounder with  r2dz.x = 0.05, r2yz.dx = 0.05
adjusted_se(model, treatment = "directlyharmed", r2dz.x = 0.05, r2yz.dx = 0.05)

# computes adjusted t-value for confounder with  r2dz.x = 0.05, r2yz.dx = 0.05
adjusted_t(model, treatment = "directlyharmed", r2dz.x = 0.05, r2yz.dx = 0.05)

# Alternatively, pass in numerical values directly.
adjusted_estimate(estimate = 0.09731582, se = 0.02325654,
                  dof = 783, r2dz.x = 0.05, r2yz.dx = 0.05)

adjusted_se(estimate = 0.09731582, se = 0.02325654,
            dof = 783, r2dz.x = 0.05, r2yz.dx = 0.05)

adjusted_t(estimate = 0.09731582, se = 0.02325654,
           dof = 783, r2dz.x = 0.05, r2yz.dx = 0.05)

</code></pre>

<hr>
<h2 id='colombia'>Data from the 2016 referendum for peace with the FARC in Colombia.</h2><span id='topic+colombia'></span>

<h3>Description</h3>

<p>Data on support for the 2016 referendum for peace with the FARC in Colombia, as discussed in Hazlett and Parente (2020).
The main &quot;treatment&quot;
variables are <code>santos2014</code>, which indicates the share of town population voting in support of
Santos in the 2014 Presidential election, and <code>fat_2011to2015_gtd</code>, which indicates
the number of fatalities due to FARC violence between 2011 and 2015, again at the town level.
The main outcome of interest is <code>yes_vote</code>, the proportion (0-100) at the town-level
voting in support of the peace referendum. The question of interest in Hazlett and Parente (2020) is
what can be said about the causal effect of either violence (fatalities) or
of political affiliation with Santos, recognizing that analyses of either cannot
likely rule out all confounding.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>colombia
</code></pre>


<h3>Format</h3>

<p>A data frame with 1123 rows and 16 columns.
</p>

<dl>
<dt>department</dt><dd><p>Name for the provincial level unit, called departments or departamentos, of which there are 32 in the country.</p>
</dd>
<dt>dept_code</dt><dd><p>Short code for the department</p>
</dd>
<dt>town</dt><dd><p>Name for the town, which is the smallest electoral unit available and is the unit of analysis.</p>
</dd>
<dt>town_code</dt><dd><p>Code for the town.</p>
</dd>
<dt>total_eligible</dt><dd><p>Total eligible voters in the town</p>
</dd>
<dt>yes_vote</dt><dd><p>Proportion (out of 100) voting in favor of the peace deal.</p>
</dd>
<dt>santos10</dt><dd><p>Proportion (out of 100) voting for Santos in 2010 presidential election.</p>
</dd>
<dt>santos14</dt><dd><p>Proportion (out of 100) voting for Santos in the 2014 presidential election.</p>
</dd>
<dt>gdppc</dt><dd><p>The town-level GDP per capita.</p>
</dd>
<dt>pop13</dt><dd><p>Town-level population in 2013.</p>
</dd>
<dt>elev</dt><dd><p>Town's mean elevation.</p>
</dd>
<dt>fat_all</dt><dd><p>Sum of all known fatalities due to FARC violence in the town (from Global Terrorism Database, GTD).</p>
</dd>
<dt>fat_2001to2005_gtd</dt><dd><p>Sum of fatalities due to FARC in the town in 2001 to 2005 (from GTD).</p>
</dd>
<dt>fat_2006to2010_gtd</dt><dd><p>Sum of fatalities due to FARC in the town in 2006 to 2010 (from GTD).</p>
</dd>
<dt>fat_2011to2015_gtd</dt><dd><p>Sum of fatalities due to FARC in the town in 2011 to 2015 (from GTD).</p>
</dd>
<dt>fat_2010to2013</dt><dd><p>Sum of fatalities due to FARC in the town in 2010 to 2013 (from GTD).</p>
</dd>
</dl>



<h3>References</h3>

<p>Hazlett, C., and Parente, F. (2020). &quot;Who supports peace with the FARC? A sensitivity-based approach under imperfect identification&quot;
</p>


<h3>Examples</h3>

<pre><code class='language-R'># loads data
data(colombia)

#-----------------------------------------------------
# Violence Models
#-----------------------------------------------------

### Model 1 (bivariate)
model1 &lt;- lm(yes_vote ~ fat_2001to2005_gtd, data = colombia)

### Model 2 (more controls, and lagged violence.)
model2 &lt;- lm(yes_vote ~ fat_2001to2005_gtd + fat_2006to2010_gtd +
               fat_2011to2015_gtd + total_eligible + santos10 + gdppc ,
             data = colombia)

### Sensitivity analysis - Model 2, for effect of most recent violence.
sense.model2 &lt;- sensemakr(model2,
                          treatment = "fat_2011to2015_gtd",
                          benchmark = "santos10",
                          kd = 1)

### contour plot point estimate
plot(sense.model2)

### contour plot t-value
plot(sense.model2, sensitivity.of = "t-value")

#---------------------------------------------
# Political Affiliation Model
#---------------------------------------------

### Model 3: santos2014 as measure of political support for Santos, with control variables.
model3  &lt;- lm(yes_vote ~ santos14 + fat_2010to2013 + elev + gdppc + pop13,
              data = colombia)

### Sensitivity analysis - Model 3
sense.model3 &lt;- sensemakr(model3, treatment = "santos14",
                          benchmark = c("gdppc","elev"),
                          kd = 3)
summary(sense.model3)

### contour plot point estimate
plot(sense.model3, lim = .9)

### contour plot t-value
plot(sense.model3, sensitivity.of = "t-value", lim = 0.9)

</code></pre>

<hr>
<h2 id='darfur'>Data from survey of Darfurian refugees in eastern Chad.</h2><span id='topic+darfur'></span>

<h3>Description</h3>

<p>Data on attitudes of Darfurian refugees in eastern Chad. The main &quot;treatment&quot;
variable is <code>directlyharmed</code>, which indicates that the individual was physically
injured during attacks on villages in Darfur, largely between 2003 and 2004.
The main outcome of interest is <code>peacefactor</code>, a measure of pro-peace
attitudes.
</p>
<p>Key  covariates include <code>herder_dar</code>
(whether they were a herder in Darfur), <code>farmer_dar</code> (whether they were a
farmer in Darfur), <code>age</code>, <code>female</code> (indicator for female), and
<code>past_voted</code> (whether they report having voted in an earlier election,
prior to the conflict).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>darfur
</code></pre>


<h3>Format</h3>

<p>A data frame with 1276 rows and 14 columns.
</p>

<dl>
<dt>wouldvote</dt><dd><p>If elections were held in Darfur in the future, would you vote? (0/1)</p>
</dd>
<dt>peacefactor</dt><dd><p>A measure of pro-peace attitudes, from a factor analysis of several questions. Rescaled such that 0 is minimally pro-peace and 1 is maximally pro-peace.</p>
</dd>
<dt>peace_formerenemies</dt><dd><p>Would you be willing to make peace with your former enemies? (0/1)</p>
</dd>
<dt>peace_jjindiv</dt><dd><p>Would you be willing to make peace with Janjweed individuals who carried out violence? (0/1)</p>
</dd>
<dt>peace_jjtribes</dt><dd><p>Would you be willing to make peace with the tribes that were part of the Janjaweed? (0/1)</p>
</dd>
<dt>gos_soldier_execute</dt><dd><p>Should Government of Sudan soldiers who perpetrated attacks on civilians be executed? (0/1)</p>
</dd>
<dt>directlyharmed</dt><dd><p>A binary variable indicating whether the respondent
was personally physically injured during attacks on villages in Darfur
largely between 2003-2004. 529 respondents report being personally injured,
while 747 do not report being injured.</p>
</dd>
<dt>age</dt><dd><p>Age of respondent in whole integer years. Ages in the data
range from 18 to 100.</p>
</dd>
<dt>farmer_dar</dt><dd><p>The respondent was a farmer in
Darfur (0/1). 1,051 respondents were farmers, 225 were not.</p>
</dd>
<dt>herder_dar</dt><dd><p>The respondent was a herder in
Darfur (0/1). 190 respondents were farmers, 1,086 were not.</p>
</dd>
<dt>pastvoted</dt><dd><p>The respondent reported having
voted in a previous election before the conflict (0/1). 821 respondents reported
having voted in a previous election, 455 reported not having voted in a
previous election.</p>
</dd>
<dt>hhsize_darfur</dt><dd><p>Household size while in Darfur.</p>
</dd>
<dt>village</dt><dd><p>Factor variable indicating village of respondent. 486
unique villages are accounted for in the data.</p>
</dd>
<dt>female</dt><dd><p>The respondent identifies as female (0/1). 582 respondents are female-identified, 694 are not.</p>
</dd>
</dl>



<h3>References</h3>

<p>Cinelli, C. and Hazlett, C. (2020), &quot;Making Sense of Sensitivity: Extending Omitted Variable Bias.&quot; Journal of the Royal Statistical Society, Series B (Statistical Methodology).
</p>
<p>Hazlett, Chad. (2019) &quot;Angry or Weary? How Violence Impacts Attitudes toward Peace among Darfurian Refugees.&quot; Journal of Conflict Resolution: 0022002719879217.
</p>

<hr>
<h2 id='group_partial_r2'>Partial R2 of groups of covariates in a linear regression model</h2><span id='topic+group_partial_r2'></span><span id='topic+group_partial_r2.lm'></span><span id='topic+group_partial_r2.numeric'></span>

<h3>Description</h3>

<p>This function computes the partial R2 of a group of covariates in a linear regression model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>group_partial_r2(...)

## S3 method for class 'lm'
group_partial_r2(model, covariates, ...)

## S3 method for class 'numeric'
group_partial_r2(F.stats, p, dof, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="group_partial_r2_+3A_...">...</code></td>
<td>
<p>arguments passed to other methods. First argument should either be an <code>lm</code> object
with the regression model or a numeric vector with the F-statistics for the group of covariates.</p>
</td></tr>
<tr><td><code id="group_partial_r2_+3A_model">model</code></td>
<td>
<p>an <code>lm</code> object with the regression model</p>
</td></tr>
<tr><td><code id="group_partial_r2_+3A_covariates">covariates</code></td>
<td>
<p>model covariates for which their grouped partial R2 will be computed.</p>
</td></tr>
<tr><td><code id="group_partial_r2_+3A_f.stats">F.stats</code></td>
<td>
<p>F-statistics for the group of covariates.</p>
</td></tr>
<tr><td><code id="group_partial_r2_+3A_p">p</code></td>
<td>
<p>number of parameters in the model.</p>
</td></tr>
<tr><td><code id="group_partial_r2_+3A_dof">dof</code></td>
<td>
<p>residual degrees of freedom of the model.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector with the computed partial R2.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("darfur")

model &lt;- lm(peacefactor ~ directlyharmed + age + farmer_dar + herder_dar +
             pastvoted + hhsize_darfur + female + village, data = darfur)

group_partial_r2(model, covariates = c("female", "pastvoted"))

</code></pre>

<hr>
<h2 id='model_helper'>Helper function for extracting model statistics</h2><span id='topic+model_helper'></span>

<h3>Description</h3>

<p>This is an internal function used for extracting the necessary statistics from the models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>model_helper(model, covariates = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="model_helper_+3A_model">model</code></td>
<td>
<p>model to extract statistics from</p>
</td></tr>
<tr><td><code id="model_helper_+3A_covariates">covariates</code></td>
<td>
<p>model covariates from which statistics will be extracted.</p>
</td></tr>
<tr><td><code id="model_helper_+3A_...">...</code></td>
<td>
<p>arguments passed to other methods.</p>
</td></tr>
</table>

<hr>
<h2 id='ovb_bounds'>Bounds on the strength of unobserved confounders using observed covariates</h2><span id='topic+ovb_bounds'></span><span id='topic+ovb_bounds.lm'></span><span id='topic+ovb_partial_r2_bound'></span><span id='topic+ovb_partial_r2_bound.numeric'></span><span id='topic+ovb_partial_r2_bound.lm'></span>

<h3>Description</h3>

<p>Bounds on the strength of unobserved confounders using observed covariates, as in Cinelli and Hazlett (2020). The main generic function is <code>ovb_bounds</code>, which can compute both the bounds on the strength of confounding as well as the adjusted estimates, standard errors, t-values and confidence intervals.
</p>
<p>Other functions that compute only the bounds on the strength of confounding are also provided. These functions may be useful when computing benchmarks for using only summary statistics from papers you see in print.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ovb_bounds(...)

## S3 method for class 'lm'
ovb_bounds(
  model,
  treatment,
  benchmark_covariates = NULL,
  kd = 1,
  ky = kd,
  reduce = TRUE,
  bound = c("partial r2", "partial r2 no D", "total r2"),
  adjusted_estimates = TRUE,
  alpha = 0.05,
  h0 = 0,
  ...
)

ovb_partial_r2_bound(...)

## S3 method for class 'numeric'
ovb_partial_r2_bound(
  r2dxj.x,
  r2yxj.dx,
  kd = 1,
  ky = kd,
  bound_label = "manual",
  ...
)

## S3 method for class 'lm'
ovb_partial_r2_bound(
  model,
  treatment,
  benchmark_covariates = NULL,
  kd = 1,
  ky = kd,
  adjusted_estimates = TRUE,
  alpha = 0.05,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ovb_bounds_+3A_...">...</code></td>
<td>
<p>arguments passed to other methods. First argument should either be (i) an <code><a href="stats.html#topic+lm">lm</a></code> model with the
outcome regression (argument <code>model</code>); (ii) a <code><a href="stats.html#topic+formula">formula</a></code> describing the model along
with the <code><a href="base.html#topic+data.frame">data.frame</a></code> containing the variables of the model (arguments <code>formula</code> and <code>data</code>); or, (iii) the numerical estimated value of the coefficient, along with the numeric values of standard errors and degrees of freedom (arguments <code>estimate</code>, <code>se</code> and <code>df</code>).</p>
</td></tr>
<tr><td><code id="ovb_bounds_+3A_model">model</code></td>
<td>
<p>An <code>lm</code> object with the outcome regression.</p>
</td></tr>
<tr><td><code id="ovb_bounds_+3A_treatment">treatment</code></td>
<td>
<p>A character vector with the name of the treatment variable
of the model.</p>
</td></tr>
<tr><td><code id="ovb_bounds_+3A_benchmark_covariates">benchmark_covariates</code></td>
<td>
<p>The user has two options: (i)  character vector of the names of covariates that will be used to bound the plausible strength of the unobserved confounders. Each variable will be considered separately; (ii) a named list with character vector names of covariates that will be used, <em>as a group</em>, to bound the plausible strength of the unobserved confounders. The names of the list will be used for the benchmark labels. Note: for factor variables with more than two levels, you need to provide the name of each level as encoded in the <code>lm</code> model (the columns of <code>model.matrix</code>).</p>
</td></tr>
<tr><td><code id="ovb_bounds_+3A_kd">kd</code></td>
<td>
<p>numeric vector. Parameterizes how many times stronger the confounder is related to the treatment in comparison to the observed benchmark covariate.
Default value is <code>1</code> (confounder is as strong as benchmark covariate).</p>
</td></tr>
<tr><td><code id="ovb_bounds_+3A_ky">ky</code></td>
<td>
<p>numeric vector. Parameterizes how many times stronger the confounder is related to the outcome in comparison to the observed benchmark covariate.
Default value is the same as <code>kd</code>.</p>
</td></tr>
<tr><td><code id="ovb_bounds_+3A_reduce">reduce</code></td>
<td>
<p>Should the bias adjustment reduce or increase the
absolute value of the estimated coefficient? Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="ovb_bounds_+3A_bound">bound</code></td>
<td>
<p>type of bounding procedure. Currently only <code>"partial r2"</code> is implemented.</p>
</td></tr>
<tr><td><code id="ovb_bounds_+3A_adjusted_estimates">adjusted_estimates</code></td>
<td>
<p>should the bounder also compute the adjusted estimates? Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="ovb_bounds_+3A_alpha">alpha</code></td>
<td>
<p>significance level for computing the adjusted confidence intervals. Default is 0.05.</p>
</td></tr>
<tr><td><code id="ovb_bounds_+3A_h0">h0</code></td>
<td>
<p>Null hypothesis for computation of the t-value. Default is zero.</p>
</td></tr>
<tr><td><code id="ovb_bounds_+3A_r2dxj.x">r2dxj.x</code></td>
<td>
<p>partial R2 of covariate Xj with the treatment D (after partialling out the effect of the remaining covariates X, excluding Xj).</p>
</td></tr>
<tr><td><code id="ovb_bounds_+3A_r2yxj.dx">r2yxj.dx</code></td>
<td>
<p>partial R2 of covariate Xj with the outcome Y (after partialling out the effect of the remaining covariates X, excluding Xj).</p>
</td></tr>
<tr><td><code id="ovb_bounds_+3A_bound_label">bound_label</code></td>
<td>
<p>label to bounds provided manually in <code>r2dz.x</code> and <code>r2yz.dx</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently it implements only the bounds based on partial R2. Other bounds will be implemented soon.
</p>


<h3>Value</h3>

<p>The function <code>ovb_bounds</code> returns a <code><a href="base.html#topic+data.frame">data.frame</a></code> with the bounds on the strength of the unobserved confounder
as well with the adjusted point estimates, standard errors and t-values (optional, controlled by argument <code>adjusted_estimates = TRUE</code>).
</p>
<p>The function 'ovb_partial_r2_bound()' returns only <code><a href="base.html#topic+data.frame">data.frame</a></code> with the bounds on the strength of the unobserved confounder. Adjusted estimates, standard
errors and t-values (among other quantities) need to be computed manually by the user using those bounds with the functions <code><a href="#topic+adjusted_estimate">adjusted_estimate</a></code>, <code><a href="#topic+adjusted_se">adjusted_se</a></code> and <code><a href="#topic+adjusted_t">adjusted_t</a></code>.
</p>


<h3>References</h3>

<p>Cinelli, C. and Hazlett, C. (2020), &quot;Making Sense of Sensitivity: Extending Omitted Variable Bias.&quot; Journal of the Royal Statistical Society, Series B (Statistical Methodology).
</p>
<p>Cinelli, C. and Hazlett, C. (2020), &quot;Making Sense of Sensitivity: Extending Omitted Variable Bias.&quot; Journal of the Royal Statistical Society, Series B (Statistical Methodology).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# runs regression model
model &lt;- lm(peacefactor ~ directlyharmed + age + farmer_dar + herder_dar +
             pastvoted + hhsize_darfur + female + village, data = darfur)

# bounds on the strength of confounders 1, 2, or 3 times as strong as female
# and 1,2, or 3 times as strong as pastvoted
ovb_bounds(model, treatment = "directlyharmed",
          benchmark_covariates = c("female", "pastvoted"),
          kd = 1:3)


#########################################################
## Let's construct bounds from summary statistics only ##
#########################################################
# Suppose you didn't have access to the data, but only to
# the treatment and outcome regression tables.
# You can still compute the bounds.

# Use the t statistic of female in the outcome regression
# to compute the partial R2 of female with the outcome.
r2yxj.dx &lt;- partial_r2(t_statistic = -9.789, dof = 783)

# Use the t-value of female in the *treatment* regression
# to compute the partial R2 of female with the treatment
r2dxj.x &lt;- partial_r2(t_statistic = -2.680, dof = 783)

# Compute manually bounds on the strength of confounders 1, 2, or 3
# times as strong as female
bounds &lt;- ovb_partial_r2_bound(r2dxj.x = r2dxj.x,
                              r2yxj.dx = r2yxj.dx,
                              kd = 1:3,
                              ky = 1:3,
                              bound_label = paste(1:3, "x", "female"))
# Compute manually adjusted estimates
bound.values &lt;- adjusted_estimate(estimate = 0.0973,
                                 se = 0.0232,
                                 dof = 783,
                                 r2dz.x = bounds$r2dz.x,
                                 r2yz.dx = bounds$r2yz.dx)

# Plot contours and bounds
ovb_contour_plot(estimate = 0.0973,
                se = 0.0232,
                dof = 783)
add_bound_to_contour(bounds, bound_value = bound.values)


</code></pre>

<hr>
<h2 id='ovb_contour_plot'>Contour plots of omitted variable bias</h2><span id='topic+ovb_contour_plot'></span><span id='topic+ovb_contour_plot.lm'></span><span id='topic+ovb_contour_plot.formula'></span><span id='topic+ovb_contour_plot.numeric'></span>

<h3>Description</h3>

<p>Contour plots of omitted variable bias for sensitivity analysis. The main inputs are an <code><a href="stats.html#topic+lm">lm</a></code> model, the treatment variable
and the covariates used for benchmarking the strength of unobserved confounding.
</p>
<p>The horizontal axis of the plot shows hypothetical values of the partial R2 of the unobserved confounder(s) with the treatment.
The vertical axis shows hypothetical values of the partial R2 of the unobserved confounder(s) with the outcome.
The contour levels represent the adjusted estimates (or t-values) of the treatment effect.
The reference points are the bounds on the partial R2 of the unobserved confounder if it were <code>k</code> times &ldquo;as strong&rdquo; as the observed covariate used for benchmarking (see arguments <code>kd</code> and <code>ky</code>).
The dotted red line show the chosen critical threshold (for instance, zero): confounders with such strength (or stronger) are sufficient to invalidate the research conclusions.
All results are exact for single confounders and conservative for multiple/nonlinear confounders.
</p>
<p>See Cinelli and Hazlett (2020) for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ovb_contour_plot(...)

## S3 method for class 'lm'
ovb_contour_plot(
  model,
  treatment,
  benchmark_covariates = NULL,
  kd = 1,
  ky = kd,
  r2dz.x = NULL,
  r2yz.dx = r2dz.x,
  bound_label = "manual",
  sensitivity.of = c("estimate", "t-value"),
  reduce = TRUE,
  estimate.threshold = 0,
  t.threshold = 2,
  nlevels = 10,
  col.contour = "grey40",
  col.thr.line = "red",
  label.text = TRUE,
  cex.label.text = 0.7,
  round = 3,
  ...
)

## S3 method for class 'formula'
ovb_contour_plot(
  formula,
  data,
  treatment,
  benchmark_covariates = NULL,
  kd = 1,
  ky = kd,
  r2dz.x = NULL,
  r2yz.dx = r2dz.x,
  bound_label = NULL,
  sensitivity.of = c("estimate", "t-value"),
  reduce = TRUE,
  estimate.threshold = 0,
  t.threshold = 2,
  nlevels = 10,
  col.contour = "grey40",
  col.thr.line = "red",
  label.text = TRUE,
  cex.label.text = 0.7,
  round = 3,
  ...
)

## S3 method for class 'numeric'
ovb_contour_plot(
  estimate,
  se,
  dof,
  r2dz.x = NULL,
  r2yz.dx = r2dz.x,
  bound_label = rep("manual", length(r2dz.x)),
  sensitivity.of = c("estimate", "t-value"),
  reduce = TRUE,
  estimate.threshold = 0,
  t.threshold = 2,
  show.unadjusted = TRUE,
  lim = NULL,
  lim.y = NULL,
  nlevels = 10,
  col.contour = "black",
  col.thr.line = "red",
  label.text = TRUE,
  cex.label.text = 0.7,
  label.bump.x = NULL,
  label.bump.y = NULL,
  xlab = NULL,
  ylab = NULL,
  cex.lab = 0.8,
  cex.axis = 0.8,
  cex.main = 1,
  asp = lim/lim.y,
  list.par = list(mar = c(4, 4, 1, 1), pty = "s"),
  round = 3,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ovb_contour_plot_+3A_...">...</code></td>
<td>
<p>arguments passed to other methods. First argument should either be an <code><a href="stats.html#topic+lm">lm</a></code> model with the
outcome regression, a <code><a href="stats.html#topic+formula">formula</a></code> describing the model along
with the <code><a href="base.html#topic+data.frame">data.frame</a></code> containing the variables of the model,
or a numeric vector with the coefficient estimate.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_model">model</code></td>
<td>
<p>An <code>lm</code> object with the outcome regression.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_treatment">treatment</code></td>
<td>
<p>A character vector with the name of the treatment variable
of the model.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_benchmark_covariates">benchmark_covariates</code></td>
<td>
<p>The user has two options: (i)  character vector of the names of covariates that will be used to bound the plausible strength of the unobserved confounders. Each variable will be considered separately; (ii) a named list with character vector names of covariates that will be used, <em>as a group</em>, to bound the plausible strength of the unobserved confounders. The names of the list will be used for the benchmark labels. Note: for factor variables with more than two levels, you need to provide the name of each level as encoded in the <code>lm</code> model (the columns of <code>model.matrix</code>).</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_kd">kd</code></td>
<td>
<p>numeric vector. Parameterizes how many times stronger the confounder is related to the treatment in comparison to the observed benchmark covariate.
Default value is <code>1</code> (confounder is as strong as benchmark covariate).</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_ky">ky</code></td>
<td>
<p>numeric vector. Parameterizes how many times stronger the confounder is related to the outcome in comparison to the observed benchmark covariate.
Default value is the same as <code>kd</code>.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_r2dz.x">r2dz.x</code></td>
<td>
<p>Hypothetical partial R2 of unobserved confounder
Z with treatment D, given covariates X.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_r2yz.dx">r2yz.dx</code></td>
<td>
<p>Hypothetical partial R2 of unobserved confounder Z
with outcome Y, given covariates X and treatment D.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_bound_label">bound_label</code></td>
<td>
<p>label to bounds provided manually in <code>r2dz.x</code> and <code>r2yz.dx</code>.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_sensitivity.of">sensitivity.of</code></td>
<td>
<p>should the contour plot show adjusted estimates (<code>"estimate"</code>)
or adjusted t-values (<code>"t-value"</code>)?</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_reduce">reduce</code></td>
<td>
<p>Should the bias adjustment reduce or increase the
absolute value of the estimated coefficient? Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_estimate.threshold">estimate.threshold</code></td>
<td>
<p>critical threshold for the point estimate.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_t.threshold">t.threshold</code></td>
<td>
<p>critical threshold for the t-value.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_nlevels">nlevels</code></td>
<td>
<p>number of levels for the contour plot.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_col.contour">col.contour</code></td>
<td>
<p>color of contour lines.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_col.thr.line">col.thr.line</code></td>
<td>
<p>color of threshold contour line.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_label.text">label.text</code></td>
<td>
<p>should label texts be plotted? Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_cex.label.text">cex.label.text</code></td>
<td>
<p>size of the label text.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_round">round</code></td>
<td>
<p>number of digits to show in contours and bound values</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_formula">formula</code></td>
<td>
<p>an object of the class <code><a href="stats.html#topic+formula">formula</a></code>: a symbolic description of the model to be fitted.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_data">data</code></td>
<td>
<p>data needed only when you pass a formula as first parameter. An object of the class <code><a href="base.html#topic+data.frame">data.frame</a></code> containing the variables used in the analysis.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_estimate">estimate</code></td>
<td>
<p>Coefficient estimate.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_se">se</code></td>
<td>
<p>Standard error of the coefficient estimate.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_dof">dof</code></td>
<td>
<p>Residual degrees of freedom of the regression.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_show.unadjusted">show.unadjusted</code></td>
<td>
<p>should the unadjusted estimates be shown? Default is 'TRUE'.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_lim">lim</code></td>
<td>
<p>sets limit for x-axis. If 'NULL', limits are computed automatically.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_lim.y">lim.y</code></td>
<td>
<p>sets limit for y-axis. If 'NULL', limits are computed automatically.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_label.bump.x">label.bump.x</code></td>
<td>
<p>bump on the x coordinate of label text.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_label.bump.y">label.bump.y</code></td>
<td>
<p>bump on the y coordinate of label text.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_xlab">xlab</code></td>
<td>
<p>label of x axis. If 'NULL', default label is used.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_ylab">ylab</code></td>
<td>
<p>label of y axis. If 'NULL', default label is used.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_cex.lab">cex.lab</code></td>
<td>
<p>The magnification to be used for x and y labels relative to the current setting of cex.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_cex.axis">cex.axis</code></td>
<td>
<p>The magnification to be used for axis annotation relative to the current setting of cex.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_cex.main">cex.main</code></td>
<td>
<p>The magnification to be used for main titles relative to the current setting of cex.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_asp">asp</code></td>
<td>
<p>the y/x aspect ratio. Default is 1.</p>
</td></tr>
<tr><td><code id="ovb_contour_plot_+3A_list.par">list.par</code></td>
<td>
<p>arguments to be passed to <code><a href="graphics.html#topic+par">par</a></code>. It needs to be a named list.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns invisibly the data used for the contour plot (contour grid and bounds).
</p>


<h3>References</h3>

<p>Cinelli, C. and Hazlett, C. (2020), &quot;Making Sense of Sensitivity: Extending Omitted Variable Bias.&quot; Journal of the Royal Statistical Society, Series B (Statistical Methodology).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# runs regression model
model &lt;- lm(peacefactor ~ directlyharmed + age + farmer_dar + herder_dar +
                         pastvoted + hhsize_darfur + female + village,
                         data = darfur)
# contour plot
ovb_contour_plot(model, treatment = "directlyharmed",
                        benchmark_covariates = "female",
                        kd = 1:2)

</code></pre>

<hr>
<h2 id='ovb_extreme_plot'>Extreme scenarios plots of omitted variable bias</h2><span id='topic+ovb_extreme_plot'></span><span id='topic+ovb_extreme_plot.lm'></span><span id='topic+ovb_extreme_plot.formula'></span><span id='topic+ovb_extreme_plot.numeric'></span>

<h3>Description</h3>

<p>Extreme scenario plots of omitted variable bias for sensitivity analysis. The main inputs are an <code><a href="stats.html#topic+lm">lm</a></code> model, the treatment variable
and the covariates used for benchmarking the strength of unobserved confounding.
</p>
<p>The horizontal axis shows the partial R2 of the unobserved confounder(s) with the treatment. The vertical axis shows the adjusted treatment effect estimate.
The partial R2 of the confounder with the outcome is represented by <em>different curves</em> for each scenario, as given by the parameter <code>r2yz.dx</code>.
The red marks on horizontal axis are bounds on the partial R2 of the unobserved confounder <code>kd</code> times as strong as the covariates used for benchmarking.
The dotted red line represent the threshold for the effect estimate deemed to be problematic (for instance, zero).
</p>
<p>See Cinelli and Hazlett (2020) for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ovb_extreme_plot(...)

## S3 method for class 'lm'
ovb_extreme_plot(
  model,
  treatment,
  benchmark_covariates = NULL,
  kd = 1,
  r2yz.dx = c(1, 0.75, 0.5),
  r2dz.x = NULL,
  reduce = TRUE,
  threshold = 0,
  lim = min(c(r2dz.x + 0.1, 0.5)),
  legend = TRUE,
  cex.legend = 0.65,
  legend.bty = "n",
  ...
)

## S3 method for class 'formula'
ovb_extreme_plot(
  formula,
  data,
  treatment,
  benchmark_covariates = NULL,
  kd = 1,
  r2yz.dx = c(1, 0.75, 0.5),
  r2dz.x = NULL,
  reduce = TRUE,
  threshold = 0,
  lim = min(c(r2dz.x + 0.1, 0.5)),
  legend = TRUE,
  cex.legend = 0.65,
  legend.bty = "n",
  ...
)

## S3 method for class 'numeric'
ovb_extreme_plot(
  estimate,
  se,
  dof,
  r2dz.x = NULL,
  r2yz.dx = c(1, 0.75, 0.5),
  reduce = TRUE,
  threshold = 0,
  lim = min(c(r2dz.x + 0.1, 0.5)),
  legend = TRUE,
  legend.title = NULL,
  cex.legend = 0.65,
  legend.bty = "n",
  xlab = NULL,
  ylab = NULL,
  cex.lab = 0.7,
  cex.axis = 0.7,
  list.par = list(oma = c(1, 1, 1, 1)),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ovb_extreme_plot_+3A_...">...</code></td>
<td>
<p>arguments passed to other methods. First argument should either be an <code><a href="stats.html#topic+lm">lm</a></code> model with the
outcome regression, a <code><a href="stats.html#topic+formula">formula</a></code> describing the model along
with the <code><a href="base.html#topic+data.frame">data.frame</a></code> containing the variables of the model,
or a numeric vector with the coefficient estimate.</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_model">model</code></td>
<td>
<p>An <code>lm</code> object with the outcome regression.</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_treatment">treatment</code></td>
<td>
<p>A character vector with the name of the treatment variable
of the model.</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_benchmark_covariates">benchmark_covariates</code></td>
<td>
<p>The user has two options: (i)  character vector of the names of covariates that will be used to bound the plausible strength of the unobserved confounders. Each variable will be considered separately; (ii) a named list with character vector names of covariates that will be used, <em>as a group</em>, to bound the plausible strength of the unobserved confounders. The names of the list will be used for the benchmark labels. Note: for factor variables with more than two levels, you need to provide the name of each level as encoded in the <code>lm</code> model (the columns of <code>model.matrix</code>).</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_kd">kd</code></td>
<td>
<p>numeric vector. Parameterizes how many times stronger the confounder is related to the treatment in comparison to the observed benchmark covariate.
Default value is <code>1</code> (confounder is as strong as benchmark covariate).</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_r2yz.dx">r2yz.dx</code></td>
<td>
<p>Hypothetical partial R2 of unobserved confounder Z
with outcome Y, given covariates X and treatment D.</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_r2dz.x">r2dz.x</code></td>
<td>
<p>Hypothetical partial R2 of unobserved confounder
Z with treatment D, given covariates X.</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_reduce">reduce</code></td>
<td>
<p>Should the bias adjustment reduce or increase the
absolute value of the estimated coefficient? Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_threshold">threshold</code></td>
<td>
<p>estimate threshold.</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_lim">lim</code></td>
<td>
<p>sets limit for x-axis. If 'NULL', limits are computed automatically.</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_legend">legend</code></td>
<td>
<p>should legend be plotted? Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_cex.legend">cex.legend</code></td>
<td>
<p>size of the text for the legend.</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_legend.bty">legend.bty</code></td>
<td>
<p>legend box. See <code>bty</code> argument of <a href="graphics.html#topic+par">par</a>.</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_formula">formula</code></td>
<td>
<p>an object of the class <code><a href="stats.html#topic+formula">formula</a></code>: a symbolic description of the model to be fitted.</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_data">data</code></td>
<td>
<p>data needed only when you pass a formula as first parameter. An object of the class <code><a href="base.html#topic+data.frame">data.frame</a></code> containing the variables used in the analysis.</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_estimate">estimate</code></td>
<td>
<p>Coefficient estimate.</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_se">se</code></td>
<td>
<p>Standard error of the coefficient estimate.</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_dof">dof</code></td>
<td>
<p>Residual degrees of freedom of the regression.</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_legend.title">legend.title</code></td>
<td>
<p>the legend title. If <code>NULL</code>, then default legend is used.</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_xlab">xlab</code></td>
<td>
<p>label of x axis. If 'NULL', default label is used.</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_ylab">ylab</code></td>
<td>
<p>label of y axis. If 'NULL', default label is used.</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_cex.lab">cex.lab</code></td>
<td>
<p>The magnification to be used for x and y labels relative to the current setting of cex.</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_cex.axis">cex.axis</code></td>
<td>
<p>The magnification to be used for axis annotation relative to the current setting of cex.</p>
</td></tr>
<tr><td><code id="ovb_extreme_plot_+3A_list.par">list.par</code></td>
<td>
<p>arguments to be passed to <code><a href="graphics.html#topic+par">par</a></code>. It needs to be a named list.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns invisibly the data used for the extreme plot.
</p>


<h3>References</h3>

<p>Cinelli, C. and Hazlett, C. (2020), &quot;Making Sense of Sensitivity: Extending Omitted Variable Bias.&quot; Journal of the Royal Statistical Society, Series B (Statistical Methodology).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# runs regression model
model &lt;- lm(peacefactor ~ directlyharmed + age + farmer_dar + herder_dar +
                         pastvoted + hhsize_darfur + female + village,
                         data = darfur)
# extreme scenarios plot
ovb_extreme_plot(model, treatment = "directlyharmed",
                        benchmark_covariates = "female",
                        kd = 1:2,
                        lim = 0.05)

</code></pre>

<hr>
<h2 id='partial_r2'>Computes the partial R2 and partial (Cohen's) f2</h2><span id='topic+partial_r2'></span><span id='topic+partial_r2.lm'></span><span id='topic+partial_r2.numeric'></span><span id='topic+partial_f2'></span><span id='topic+partial_f2.numeric'></span><span id='topic+partial_f2.lm'></span><span id='topic+partial_f'></span>

<h3>Description</h3>

<p>These functions computes the partial R2 and the partial (Cohen's) f2 for a linear regression model. The partial R2
describes how much of the residual variance of the outcome (after partialing out the other covariates) a covariate explains.
</p>
<p>The partial R2 can be used as an extreme-scenario sensitivity analysis to omitted variables.
Considering an unobserved confounder that explains 100% of the residual variance of the outcome,
the partial R2 describes how strongly associated with the treatment this unobserved confounder would need to be in order to explain away the estimated effect.
For details see Cinelli and Hazlett (2020).
</p>
<p>The partial (Cohen's) f2 is a common measure of effect size (a transformation of the partial R2) that can also be used directly
for sensitivity analysis using a bias factor table.
</p>
<p>The function <code>partial_r2</code> computes the partial R2. The function <code>partial_f2</code> computes the partial f2 and the function <code>partial_f</code> the partial f.
They can take as input an <code><a href="stats.html#topic+lm">lm</a></code> object or you may pass directly t-value and degrees of freedom.
</p>
<p>For partial R2 of groups of covariates, check <code><a href="#topic+group_partial_r2">group_partial_r2</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>partial_r2(...)

## S3 method for class 'lm'
partial_r2(model, covariates = NULL, ...)

## S3 method for class 'numeric'
partial_r2(t_statistic, dof, ...)

partial_f2(...)

## S3 method for class 'numeric'
partial_f2(t_statistic, dof, ...)

## S3 method for class 'lm'
partial_f2(model, covariates = NULL, ...)

partial_f(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="partial_r2_+3A_...">...</code></td>
<td>
<p>arguments passed to other methods. First argument should either be an <code>lm</code> object
with the regression model or a numeric vector with the t-value of the coefficient estimate</p>
</td></tr>
<tr><td><code id="partial_r2_+3A_model">model</code></td>
<td>
<p>an <code>lm</code> object with the regression model</p>
</td></tr>
<tr><td><code id="partial_r2_+3A_covariates">covariates</code></td>
<td>
<p>model covariates for which the partial R2 will be computed. Default is to compute
the partial R2 of all covariates.</p>
</td></tr>
<tr><td><code id="partial_r2_+3A_t_statistic">t_statistic</code></td>
<td>
<p><code>numeric</code> vector with the t-value of the coefficient estimates</p>
</td></tr>
<tr><td><code id="partial_r2_+3A_dof">dof</code></td>
<td>
<p>residual degrees of freedom of the regression</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector with the computed partial R2, f2, or f.
</p>


<h3>References</h3>

<p>Cinelli, C. and Hazlett, C. (2020), &quot;Making Sense of Sensitivity: Extending Omitted Variable Bias.&quot; Journal of the Royal Statistical Society, Series B (Statistical Methodology).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# using an lm object
## loads data
data("darfur")

## fits model
model &lt;- lm(peacefactor ~ directlyharmed + age + farmer_dar + herder_dar +
             pastvoted + hhsize_darfur + female + village, data = darfur)

## partial R2 of the treatment (directly harmed) with the outcome (peacefactor)
partial_r2(model, covariates = "directlyharmed")

## partial R2 of female with the outcome
partial_r2(model, covariates = "female")

# you can also provide the statistics directly
partial_r2(t_statistic = 4.18445, dof = 783)

</code></pre>

<hr>
<h2 id='plot.sensemakr'>Sensitivity analysis plots for <code>sensemakr</code></h2><span id='topic+plot.sensemakr'></span>

<h3>Description</h3>

<p>This function provides the contour and extreme scenario sensitivity plots of the sensitivity analysis results
obtained with the function <code><a href="#topic+sensemakr">sensemakr</a></code>. They are basically dispatchers to the core plot functions <code><a href="#topic+ovb_contour_plot">ovb_contour_plot</a></code> and
<code><a href="#topic+ovb_extreme_plot">ovb_extreme_plot</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'sensemakr'
plot(x, type = c("contour", "extreme"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.sensemakr_+3A_x">x</code></td>
<td>
<p>an object of class <code><a href="#topic+sensemakr">sensemakr</a></code>.</p>
</td></tr>
<tr><td><code id="plot.sensemakr_+3A_type">type</code></td>
<td>
<p>type of sensitivity plot. It can be <code>"contour"</code>, for contour plots of omitted
variable bias as in <code><a href="#topic+ovb_contour_plot">ovb_contour_plot</a></code>; or, <code>"extreme"</code> for
extreme scenarios plots of omitted variable bias as in <code><a href="#topic+ovb_extreme_plot">ovb_extreme_plot</a></code>.</p>
</td></tr>
<tr><td><code id="plot.sensemakr_+3A_...">...</code></td>
<td>
<p>arguments passed to the plot functions. Check arguments in  <code><a href="#topic+ovb_contour_plot">ovb_contour_plot</a></code>
and <code><a href="#topic+ovb_extreme_plot">ovb_extreme_plot</a></code>.</p>
</td></tr>
</table>

<hr>
<h2 id='print.sensemakr'>Sensitivity analysis print and summary methods for <code>sensemakr</code></h2><span id='topic+print.sensemakr'></span><span id='topic+summary.sensemakr'></span><span id='topic+ovb_minimal_reporting'></span>

<h3>Description</h3>

<p>The <code>print</code> and <code>summary</code> methods provide verbal descriptions of the sensitivity analysis results
obtained with the function <code><a href="#topic+sensemakr">sensemakr</a></code>. The function <code><a href="#topic+ovb_minimal_reporting">ovb_minimal_reporting</a></code> provides
latex or html code for a minimal
sensitivity analysis reporting, as suggested in Cinelli and Hazlett (2020).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'sensemakr'
print(x, digits = max(3L, getOption("digits") - 2L), ...)

## S3 method for class 'sensemakr'
summary(object, digits = max(3L, getOption("digits") - 3L), ...)

ovb_minimal_reporting(
  x,
  digits = 3,
  verbose = TRUE,
  format = c("latex", "html", "pure_html"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.sensemakr_+3A_x">x</code></td>
<td>
<p>an object of class <code><a href="#topic+sensemakr">sensemakr</a></code>.</p>
</td></tr>
<tr><td><code id="print.sensemakr_+3A_digits">digits</code></td>
<td>
<p>minimal number of <em>significant</em> digits.</p>
</td></tr>
<tr><td><code id="print.sensemakr_+3A_...">...</code></td>
<td>
<p>arguments passed to other methods.</p>
</td></tr>
<tr><td><code id="print.sensemakr_+3A_object">object</code></td>
<td>
<p>an object of class <code><a href="#topic+sensemakr">sensemakr</a></code>.</p>
</td></tr>
<tr><td><code id="print.sensemakr_+3A_verbose">verbose</code></td>
<td>
<p>if 'TRUE', the function prints the LaTeX code with <code><a href="base.html#topic+cat">cat</a></code></p>
</td></tr>
<tr><td><code id="print.sensemakr_+3A_format">format</code></td>
<td>
<p>code format to print, either <code>latex</code> or <code>html</code>. The default html version
has some mathematical content that requires mathjax or equivalent library to parse.
If you need only html, use the option &quot;pure_html&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function <code>ovb_minimal_reporting</code> returns the LaTeX/HTML code invisibly in character form and also prints with
<code><a href="base.html#topic+cat">cat</a></code> the LaTeX code. To suppress automatic printing, set <code>verbose = FALSE</code>.
</p>


<h3>References</h3>

<p>Cinelli, C. and Hazlett, C. (2020), &quot;Making Sense of Sensitivity: Extending Omitted Variable Bias.&quot; Journal of the Royal Statistical Society, Series B (Statistical Methodology).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># runs regression model
model &lt;- lm(peacefactor ~ directlyharmed + age + farmer_dar + herder_dar +
                         pastvoted + hhsize_darfur + female + village,
                         data = darfur)

# runs sensemakr for sensitivity analysis
sensitivity &lt;- sensemakr(model, treatment = "directlyharmed",
                               benchmark_covariates = "female",
                               kd = 1:3)
# print
sensitivity

# summary
summary(sensitivity)

# prints latex code for minimal sensitivity analysis reporting
ovb_minimal_reporting(sensitivity)

</code></pre>

<hr>
<h2 id='resid_maker'>Creates orthogonal residuals</h2><span id='topic+resid_maker'></span>

<h3>Description</h3>

<p>This function is an auxiliary function for simulation purposes.
It creates a vector of n standard normal random variables, residualizes
this vector against a matrix of covariates C, then standardizes the vector again.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>resid_maker(n, C)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="resid_maker_+3A_n">n</code></td>
<td>
<p>sample size.</p>
</td></tr>
<tr><td><code id="resid_maker_+3A_c">C</code></td>
<td>
<p>a numeric matrix with <code>n</code> rows and <code>p</code> columns.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns a numeric vector orthogonal to C.
</p>

<hr>
<h2 id='robustness_value'>Computes the robustness value</h2><span id='topic+robustness_value'></span><span id='topic+robustness_value.lm'></span><span id='topic+robustness_value.numeric'></span>

<h3>Description</h3>

<p>This function computes the robustness value of a regression coefficient.
</p>
<p>The robustness value describes the minimum strength of association (parameterized in terms of partial R2) that
omitted variables would need to have both with the treatment and with the outcome to change the estimated coefficient by
a certain amount (for instance, to bring it down to zero).
</p>
<p>For instance, a robustness value of 1% means that an unobserved confounder that explain 1% of the residual variance of the outcome
and 1% of the residual variance of the treatment is strong enough to explain away the estimated effect. Whereas a robustness value of 90%
means that any unobserved confounder that explain less than 90% of the residual variance of both the outcome and the treatment assignment cannot
fully account for the observed effect. You may also compute robustness value taking into account sampling uncertainty. See details in Cinelli and Hazlett (2020).
</p>
<p>The function <a href="#topic+robustness_value">robustness_value</a> can take as input an <code><a href="stats.html#topic+lm">lm</a></code> object or you may directly pass the t-value and degrees of freedom.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>robustness_value(...)

## S3 method for class 'lm'
robustness_value(model, covariates = NULL, q = 1, alpha = 1, ...)

## S3 method for class 'numeric'
robustness_value(t_statistic, dof, q = 1, alpha = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="robustness_value_+3A_...">...</code></td>
<td>
<p>arguments passed to other methods. First argument should either be an <code>lm</code> model with the
regression model or a numeric vector with the t-value of the coefficient estimate</p>
</td></tr>
<tr><td><code id="robustness_value_+3A_model">model</code></td>
<td>
<p>an <code>lm</code> object with the regression model.</p>
</td></tr>
<tr><td><code id="robustness_value_+3A_covariates">covariates</code></td>
<td>
<p>model covariates for which the robustness value will be computed. Default is to compute
the robustness value of all covariates.</p>
</td></tr>
<tr><td><code id="robustness_value_+3A_q">q</code></td>
<td>
<p>percent change of the effect estimate that would be deemed problematic.  Default is <code>1</code>,
which means a reduction of 100% of the current effect estimate (bring estimate to zero). It has to be greater than zero.</p>
</td></tr>
<tr><td><code id="robustness_value_+3A_alpha">alpha</code></td>
<td>
<p>significance level.</p>
</td></tr>
<tr><td><code id="robustness_value_+3A_t_statistic">t_statistic</code></td>
<td>
<p><code>numeric</code> vector with the t-value of the coefficient estimates</p>
</td></tr>
<tr><td><code id="robustness_value_+3A_dof">dof</code></td>
<td>
<p>residual degrees of freedom of the regression</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns a numerical vector with the robustness value. The arguments q and alpha are saved as attributes of the vector for reference.
</p>


<h3>References</h3>

<p>Cinelli, C. and Hazlett, C. (2020), &quot;Making Sense of Sensitivity: Extending Omitted Variable Bias.&quot; Journal of the Royal Statistical Society, Series B (Statistical Methodology).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# using an lm object
## loads data
data("darfur")

## fits model
model &lt;- lm(peacefactor ~ directlyharmed + age + farmer_dar + herder_dar +
             pastvoted + hhsize_darfur + female + village, data = darfur)

## robustness value of directly harmed q =1 (reduce estimate to zero)
robustness_value(model, covariates = "directlyharmed")

## robustness value of directly harmed q = 1/2 (reduce estimate in half)
robustness_value(model, covariates = "directlyharmed", q = 1/2)

## robustness value of directly harmed q = 1/2, alpha = 0.05
## (reduce estimate in half, with 95% confidence)
robustness_value(model, covariates = "directlyharmed", q = 1/2, alpha = 0.05)

# you can also provide the statistics directly
robustness_value(t_statistic = 4.18445, dof = 783)
</code></pre>

<hr>
<h2 id='sensemakr'>Sensitivity analysis to unobserved confounders</h2><span id='topic+sensemakr'></span><span id='topic+sensemakr.lm'></span><span id='topic+sensemakr.formula'></span><span id='topic+sensemakr.numeric'></span>

<h3>Description</h3>

<p>This function performs sensitivity analysis to omitted variables as discussed in Cinelli and Hazlett (2020). It returns an object of
class <code>sensemakr</code> with several pre-computed sensitivity statistics for reporting.
After running <code>sensemakr</code> you may directly use the <code>plot</code>, <code>print</code> and <code>summary</code> methods in the returned object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sensemakr(...)

## S3 method for class 'lm'
sensemakr(
  model,
  treatment,
  benchmark_covariates = NULL,
  kd = 1,
  ky = kd,
  q = 1,
  alpha = 0.05,
  r2dz.x = NULL,
  r2yz.dx = r2dz.x,
  bound_label = "Manual Bound",
  reduce = TRUE,
  ...
)

## S3 method for class 'formula'
sensemakr(
  formula,
  data,
  treatment,
  benchmark_covariates = NULL,
  kd = 1,
  ky = kd,
  q = 1,
  alpha = 0.05,
  r2dz.x = NULL,
  r2yz.dx = r2dz.x,
  bound_label = "",
  reduce = TRUE,
  ...
)

## S3 method for class 'numeric'
sensemakr(
  estimate,
  se,
  dof,
  treatment = "D",
  q = 1,
  alpha = 0.05,
  r2dz.x = NULL,
  r2yz.dx = r2dz.x,
  bound_label = "manual_bound",
  r2dxj.x = NULL,
  r2yxj.dx = r2dxj.x,
  benchmark_covariates = "manual_benchmark",
  kd = 1,
  ky = kd,
  reduce = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sensemakr_+3A_...">...</code></td>
<td>
<p>arguments passed to other methods. First argument should either be (i) an <code><a href="stats.html#topic+lm">lm</a></code> model with the
outcome regression (argument <code>model</code>); (ii) a <code><a href="stats.html#topic+formula">formula</a></code> describing the model along
with the <code><a href="base.html#topic+data.frame">data.frame</a></code> containing the variables of the model (arguments <code>formula</code> and <code>data</code>); or, (iii) the numerical estimated value of the coefficient, along with the numeric values of standard errors and degrees of freedom (arguments <code>estimate</code>, <code>se</code> and <code>df</code>).</p>
</td></tr>
<tr><td><code id="sensemakr_+3A_model">model</code></td>
<td>
<p>An <code>lm</code> object with the outcome regression.</p>
</td></tr>
<tr><td><code id="sensemakr_+3A_treatment">treatment</code></td>
<td>
<p>A character vector with the name of the treatment variable
of the model.</p>
</td></tr>
<tr><td><code id="sensemakr_+3A_benchmark_covariates">benchmark_covariates</code></td>
<td>
<p>The user has two options: (i)  character vector of the names of covariates that will be used to bound the plausible strength of the unobserved confounders. Each variable will be considered separately; (ii) a named list with character vector names of covariates that will be used, <em>as a group</em>, to bound the plausible strength of the unobserved confounders. The names of the list will be used for the benchmark labels. Note: for factor variables with more than two levels, you need to provide the name of each level as encoded in the <code>lm</code> model (the columns of <code>model.matrix</code>).</p>
</td></tr>
<tr><td><code id="sensemakr_+3A_kd">kd</code></td>
<td>
<p>numeric vector. Parameterizes how many times stronger the confounder is related to the treatment in comparison to the observed benchmark covariate.
Default value is <code>1</code> (confounder is as strong as benchmark covariate).</p>
</td></tr>
<tr><td><code id="sensemakr_+3A_ky">ky</code></td>
<td>
<p>numeric vector. Parameterizes how many times stronger the confounder is related to the outcome in comparison to the observed benchmark covariate.
Default value is the same as <code>kd</code>.</p>
</td></tr>
<tr><td><code id="sensemakr_+3A_q">q</code></td>
<td>
<p>percent change of the effect estimate that would be deemed problematic.  Default is <code>1</code>,
which means a reduction of 100% of the current effect estimate (bring estimate to zero). It has to be greater than zero.</p>
</td></tr>
<tr><td><code id="sensemakr_+3A_alpha">alpha</code></td>
<td>
<p>significance level.</p>
</td></tr>
<tr><td><code id="sensemakr_+3A_r2dz.x">r2dz.x</code></td>
<td>
<p>Hypothetical partial R2 of unobserved confounder
Z with treatment D, given covariates X.</p>
</td></tr>
<tr><td><code id="sensemakr_+3A_r2yz.dx">r2yz.dx</code></td>
<td>
<p>Hypothetical partial R2 of unobserved confounder Z
with outcome Y, given covariates X and treatment D.</p>
</td></tr>
<tr><td><code id="sensemakr_+3A_bound_label">bound_label</code></td>
<td>
<p>label to bounds provided manually in <code>r2dz.x</code> and <code>r2yz.dx</code>.</p>
</td></tr>
<tr><td><code id="sensemakr_+3A_reduce">reduce</code></td>
<td>
<p>Should the bias adjustment reduce or increase the
absolute value of the estimated coefficient? Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="sensemakr_+3A_formula">formula</code></td>
<td>
<p>an object of the class <code><a href="stats.html#topic+formula">formula</a></code>: a symbolic description of the model to be fitted.</p>
</td></tr>
<tr><td><code id="sensemakr_+3A_data">data</code></td>
<td>
<p>data needed only when you pass a formula as first parameter. An object of the class <code><a href="base.html#topic+data.frame">data.frame</a></code> containing the variables used in the analysis.</p>
</td></tr>
<tr><td><code id="sensemakr_+3A_estimate">estimate</code></td>
<td>
<p>Coefficient estimate.</p>
</td></tr>
<tr><td><code id="sensemakr_+3A_se">se</code></td>
<td>
<p>Standard error of the coefficient estimate.</p>
</td></tr>
<tr><td><code id="sensemakr_+3A_dof">dof</code></td>
<td>
<p>Residual degrees of freedom of the regression.</p>
</td></tr>
<tr><td><code id="sensemakr_+3A_r2dxj.x">r2dxj.x</code></td>
<td>
<p>partial R2 of covariate Xj with the treatment D (after partialling out the effect of the remaining covariates X, excluding Xj).</p>
</td></tr>
<tr><td><code id="sensemakr_+3A_r2yxj.dx">r2yxj.dx</code></td>
<td>
<p>partial R2 of covariate Xj with the outcome Y (after partialling out the effect of the remaining covariates X, excluding Xj).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>sensemakr</code>, containing:
</p>

<dl>
<dt> <code>info</code> </dt><dd><p>A <code>data.frame</code> with the general information of the analysis, including the formula used, the name of the treatment variable, parameter values such as <code>q</code>, <code>alpha</code>, and whether the bias is assumed to reduce the current estimate. </p>
</dd>
<dt> <code>sensitivity_stats</code> </dt><dd><p>A <code>data.frame</code> with the sensitivity statistics for the treatment variable, as computed by the function <code><a href="#topic+sensitivity_stats">sensitivity_stats</a></code>.</p>
</dd>
<dt> <code>bounds</code> </dt><dd><p>A <code>data.frame</code> with bounds on the strength of confounding according to some benchmark covariates, as computed by the function <code><a href="#topic+ovb_bounds">ovb_bounds</a></code>.</p>
</dd>
</dl>



<h3>References</h3>

<p>Cinelli, C. and Hazlett, C. (2020), &quot;Making Sense of Sensitivity: Extending Omitted Variable Bias.&quot; Journal of the Royal Statistical Society, Series B (Statistical Methodology).
</p>


<h3>See Also</h3>

<p>The function <code>sensemakr</code> is a convenience function. You may use the other sensitivity functions of the package directly, such as the functions for sensitivity plots
(<code><a href="#topic+ovb_contour_plot">ovb_contour_plot</a></code>, <code><a href="#topic+ovb_extreme_plot">ovb_extreme_plot</a></code>) the functions for computing bias-adjusted estimates and t-values (<code><a href="#topic+adjusted_estimate">adjusted_estimate</a></code>, <code><a href="#topic+adjusted_t">adjusted_t</a></code>),
the functions for computing the robustness value and partial R2 (<code><a href="#topic+robustness_value">robustness_value</a></code>, <code><a href="#topic+partial_r2">partial_r2</a></code>),  or the functions for bounding the strength
of unobserved confounders (<code><a href="#topic+ovb_bounds">ovb_bounds</a></code>), among others.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># loads dataset
data("darfur")

# runs regression model
model &lt;- lm(peacefactor ~ directlyharmed + age + farmer_dar + herder_dar +
                         pastvoted + hhsize_darfur + female + village, data = darfur)

# runs sensemakr for sensitivity analysis
sensitivity &lt;- sensemakr(model, treatment = "directlyharmed",
                               benchmark_covariates = "female",
                               kd = 1:3)
# short description of results
sensitivity

# long description of results
summary(sensitivity)

# plot bias contour of point estimate
plot(sensitivity)

# plot bias contour of t-value
plot(sensitivity, sensitivity.of = "t-value")

# plot extreme scenario
plot(sensitivity, type = "extreme")

# latex code for sensitivity table
ovb_minimal_reporting(sensitivity)

</code></pre>

<hr>
<h2 id='sensemakr-package'>Sensemakr: extending omitted variable bias</h2><span id='topic+sensemakr-package'></span>

<h3>Description</h3>

<p>The sensemakr package implements a suite of sensitivity analysis tools that makes it easier to
understand the impact of omitted variables in linear regression models, as discussed in Cinelli and Hazlett (2020).
</p>


<h3>Details</h3>

<p>The main function of the package is  <code><a href="#topic+sensemakr">sensemakr</a></code>, which computes the most common sensitivity analysis results.
After running <code>sensemakr</code> you may directly use the plot and print methods in the returned object.
</p>
<p>You may also use the other sensitivity functions of the package directly, such as the functions for sensitivity plots
(<code><a href="#topic+ovb_contour_plot">ovb_contour_plot</a></code>, <code><a href="#topic+ovb_extreme_plot">ovb_extreme_plot</a></code>) the functions for computing bias-adjusted estimates and t-values (<code><a href="#topic+adjusted_estimate">adjusted_estimate</a></code>, <code><a href="#topic+adjusted_t">adjusted_t</a></code>),
the functions for computing the robustness value and partial R2 (<code><a href="#topic+robustness_value">robustness_value</a></code>, <code><a href="#topic+partial_r2">partial_r2</a></code>),  or the functions for bounding the strength
of unobserved confounders (<code><a href="#topic+ovb_bounds">ovb_bounds</a></code>), among others.
</p>
<p>More information can be found on the help documentation, vignettes and related papers.
</p>


<h3>References</h3>

<p>Cinelli, C. and Hazlett, C. (2020), &quot;Making Sense of Sensitivity: Extending Omitted Variable Bias.&quot; Journal of the Royal Statistical Society, Series B (Statistical Methodology).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# loads dataset
data("darfur")

# runs regression model
model &lt;- lm(peacefactor ~ directlyharmed + age + farmer_dar + herder_dar +
              pastvoted + hhsize_darfur + female + village, data = darfur)

# runs sensemakr for sensitivity analysis
sensitivity &lt;- sensemakr(model, treatment = "directlyharmed",
                         benchmark_covariates = "female",
                         kd = 1:3)
# short description of results
sensitivity

# long description of results
summary(sensitivity)

# plot bias contour of point estimate
plot(sensitivity)

# plot bias contour of t-value
plot(sensitivity, sensitivity.of = "t-value")

# plot extreme scenario
plot(sensitivity, type = "extreme")

# latex code for sensitivity table
ovb_minimal_reporting(sensitivity)

# data.frame with sensitivity statistics
sensitivity$sensitivity_stats

#  data.frame with bounds on the strengh of confounders
sensitivity$bounds

### Using sensitivity functions directly ###

# robustness value of directly harmed q = 1 (reduce estimate to zero)
robustness_value(model, covariates = "directlyharmed")

# robustness value of directly harmed q = 1/2 (reduce estimate in half)
robustness_value(model, covariates = "directlyharmed", q = 1/2)

# robustness value of directly harmed q = 1/2, alpha = 0.05
robustness_value(model, covariates = "directlyharmed", q = 1/2, alpha = 0.05)

# partial R2 of directly harmed with peacefactor
partial_r2(model, covariates = "directlyharmed")

# partial R2 of female with peacefactor
partial_r2(model, covariates = "female")

# data.frame with sensitivity statistics
sensitivity_stats(model, treatment = "directlyharmed")

# bounds on the strength of confounders using female and age
ovb_bounds(model,
           treatment = "directlyharmed",
           benchmark_covariates = c("female", "age"),
           kd = 1:3)

# adjusted estimate given hypothetical strength of confounder
adjusted_estimate(model, treatment = "directlyharmed", r2dz.x = 0.1, r2yz.dx = 0.1)

# adjusted t-value given hypothetical strength of confounder
adjusted_t(model, treatment = "directlyharmed", r2dz.x = 0.1, r2yz.dx = 0.1)

# bias contour plot directly from lm model
ovb_contour_plot(model,
                 treatment = "directlyharmed",
                 benchmark_covariates = "female",
                 kd = 1:3)

# extreme scenario plot directly from lm model
ovb_extreme_plot(model,
                 treatment = "directlyharmed",
                 benchmark_covariates = "female",
                 kd = 1:3, lim = 0.05)
</code></pre>

<hr>
<h2 id='sensitivity_stats'>Sensitivity statistics for regression coefficients</h2><span id='topic+sensitivity_stats'></span><span id='topic+sensitivity_stats.lm'></span><span id='topic+sensitivity_stats.numeric'></span>

<h3>Description</h3>

<p>Convenience function that computes the <code><a href="#topic+robustness_value">robustness_value</a></code>,
<code><a href="#topic+partial_r2">partial_r2</a></code> and <code><a href="#topic+partial_f2">partial_f2</a></code> of the coefficient of interest.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sensitivity_stats(...)

## S3 method for class 'lm'
sensitivity_stats(model, treatment, q = 1, alpha = 0.05, reduce = TRUE, ...)

## S3 method for class 'numeric'
sensitivity_stats(
  estimate,
  se,
  dof,
  treatment = "treatment",
  q = 1,
  alpha = 0.05,
  reduce = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sensitivity_stats_+3A_...">...</code></td>
<td>
<p>Arguments passed to other methods. First argument should either be an
<code>lm</code> model with the outcome regression or a numeric vector with the
coefficient estimate.</p>
</td></tr>
<tr><td><code id="sensitivity_stats_+3A_model">model</code></td>
<td>
<p>An <code>lm</code> object with the outcome regression.</p>
</td></tr>
<tr><td><code id="sensitivity_stats_+3A_treatment">treatment</code></td>
<td>
<p>A character vector with the name of the treatment variable
of the model.</p>
</td></tr>
<tr><td><code id="sensitivity_stats_+3A_q">q</code></td>
<td>
<p>percent change of the effect estimate that would be deemed problematic.  Default is <code>1</code>,
which means a reduction of 100% of the current effect estimate (bring estimate to zero). It has to be greater than zero.</p>
</td></tr>
<tr><td><code id="sensitivity_stats_+3A_alpha">alpha</code></td>
<td>
<p>significance level.</p>
</td></tr>
<tr><td><code id="sensitivity_stats_+3A_reduce">reduce</code></td>
<td>
<p>Should the bias adjustment reduce or increase the
absolute value of the estimated coefficient? Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="sensitivity_stats_+3A_estimate">estimate</code></td>
<td>
<p>Coefficient estimate.</p>
</td></tr>
<tr><td><code id="sensitivity_stats_+3A_se">se</code></td>
<td>
<p>Standard error of the coefficient estimate.</p>
</td></tr>
<tr><td><code id="sensitivity_stats_+3A_dof">dof</code></td>
<td>
<p>Residual degrees of freedom of the regression.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> containing the following quantities:
</p>

<dl>
<dt>treatment</dt><dd><p>a character with the name of the treatment variable</p>
</dd>
<dt>estimate</dt><dd><p>a numeric vector with the estimated effect of the treatment</p>
</dd>
<dt>se</dt><dd><p>a numeric vector with  the estimated standard error of the treatment effect</p>
</dd>
<dt>t_statistics</dt><dd><p>a numeric vector with  the t-value of the treatment</p>
</dd>
<dt>r2yd.x</dt><dd><p>a numeric vector with  the partial R2 of the treatment and the outcome, see details in <code><a href="#topic+partial_r2">partial_r2</a></code></p>
</dd>
<dt>rv_q</dt><dd><p>a numeric vector with  the robustness value of the treatment, see details  in <code><a href="#topic+robustness_value">robustness_value</a></code></p>
</dd>
<dt>rv_qa</dt><dd><p>a numeric vector with the robustness value of the treatment considering statistical significance, see details  in <code><a href="#topic+robustness_value">robustness_value</a></code></p>
</dd>
<dt>f2yd.x </dt><dd><p>a numeric vector with the partial (Cohen's) f2 of the treatment with the outcome, see details in <code><a href="#topic+partial_f2">partial_f2</a></code></p>
</dd>
<dt>dof</dt><dd><p>a numeric vector with the degrees of freedom of the model</p>
</dd>
</dl>



<h3>References</h3>

<p>Cinelli, C. and Hazlett, C. (2020), &quot;Making Sense of Sensitivity: Extending Omitted Variable Bias.&quot; Journal of the Royal Statistical Society, Series B (Statistical Methodology).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## loads data
data("darfur")

## fits model
model &lt;- lm(peacefactor ~ directlyharmed + age + farmer_dar + herder_dar +
             pastvoted + hhsize_darfur + female + village, data = darfur)

## sensitivity stats for directly harmed
sensitivity_stats(model, treatment = "directlyharmed")

## you can  also pass the numeric values directly
sensitivity_stats(estimate = 0.09731582, se = 0.02325654, dof = 783)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
