<!DOCTYPE html><html><head><title>Help for package wordpredictor</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {wordpredictor}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#Base'><p>Base class for all other classes</p></a></li>
<li><a href='#DataAnalyzer'><p>Analyzes input text files and n-gram token files</p></a></li>
<li><a href='#DataCleaner'><p>Provides data cleaning functionality</p></a></li>
<li><a href='#DataSampler'><p>Generates data samples from text files</p></a></li>
<li><a href='#EnvManager'><p>Allows managing the test environment</p></a></li>
<li><a href='#Model'><p>Represents n-gram models</p></a></li>
<li><a href='#ModelEvaluator'><p>Evaluates performance of n-gram models</p></a></li>
<li><a href='#ModelGenerator'><p>Generates n-gram models from a text file</p></a></li>
<li><a href='#ModelPredictor'><p>Allows predicting text, calculating word probabilities and Perplexity</p></a></li>
<li><a href='#TokenGenerator'><p>Generates n-grams from text files</p></a></li>
<li><a href='#TPGenerator'><p>Generates transition probabilities for n-grams</p></a></li>
<li><a href='#wordpredictor-package'><p>wordpredictor: Develop Text Prediction Models Based on N-Grams</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Develop Text Prediction Models Based on N-Grams</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/pakjiddat/word-predictor">https://github.com/pakjiddat/word-predictor</a>,
<a href="https://pakjiddat.github.io/word-predictor/">https://pakjiddat.github.io/word-predictor/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/pakjiddat/word-predictor/issues">https://github.com/pakjiddat/word-predictor/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>A framework for developing n-gram models for text prediction.
    It provides data cleaning, data sampling, extracting tokens from text,
    model generation, model evaluation and word prediction. For information on how n-gram models 
    work we referred to: "Speech and Language Processing"
    <a href="https://web.stanford.edu/~jurafsky/slp3/3.pdf">https://web.stanford.edu/~jurafsky/slp3/3.pdf</a>. For optimizing R code and
    using R6 classes we referred to "Advanced R" 
    <a href="https://adv-r.hadley.nz/r6.html">https://adv-r.hadley.nz/r6.html</a>. For writing R extensions we referred to 
    "R Packages", <a href="https://r-pkgs.org/index.html">https://r-pkgs.org/index.html</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>digest, ggplot2, patchwork, stringr, dplyr, SnowballC</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, covr, knitr, rmarkdown, markdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-01-04 12:23:14 UTC; nadir</td>
</tr>
<tr>
<td>Author:</td>
<td>Nadir Latif <a href="https://orcid.org/0000-0002-7543-7405"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Nadir Latif &lt;pakjiddat@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-01-04 14:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='Base'>Base class for all other classes</h2><span id='topic+Base'></span>

<h3>Description</h3>

<p>Provides a basic structure for processing text files. Also provides methods
for reading and writing files and objects.
</p>


<h3>Details</h3>

<p>It provides pre-processing, processing and post-processing methods, which
need to be overridden by derived classes.
</p>
<p>The pre-processing function is called before reading a file. The process
function is called for processing a given number of lines. The post
processing function is called on the processed data.
</p>
<p>Also provides methods for reading and writing text files and R objects. All
class methods are private.
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-new"><code>Base$new()</code></a>
</p>
</li>
<li> <p><a href="#method-clone"><code>Base$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-new"></a>



<h4>Method <code>new()</code></h4>

<p>It initializes the current object. It is used to set the file name
and verbose options.
</p>


<h5>Usage</h5>

<div class="r"><pre>Base$new(fn = NULL, lc = 100, ve = 2)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>fn</code></dt><dd><p>The path to the file to clean.</p>
</dd>
<dt><code>lc</code></dt><dd><p>The number of lines to read and clean at a time.</p>
</dd>
<dt><code>ve</code></dt><dd><p>The level of detail in the information messages.
Reads the given file one line at a time. It runs the given
pre-processing function before reading the file. It runs the given</p>
</dd>
</dl>

</div>


<hr>
<a id="method-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>Base$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='DataAnalyzer'>Analyzes input text files and n-gram token files</h2><span id='topic+DataAnalyzer'></span>

<h3>Description</h3>

<p>It provides a method that returns information about text files, such as
number of lines and number of words. It also provides a method that displays
bar plots of n-gram frequencies. Additionally it provides a method for
searching for n-grams in a n-gram token file. This file is generated using
the TokenGenerator class.
</p>


<h3>Details</h3>

<p>It provides a method that returns text file information. The text
file information includes total number of lines, max, min and mean line
length and file size.
</p>
<p>It also provides a method that generates a bar plot showing the most common
n-gram tokens.
</p>
<p>Another method is provided which returns a list of n-grams that match the
given regular expression.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+Base">wordpredictor::Base</a></code> -&gt; <code>DataAnalyzer</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-new"><code>DataAnalyzer$new()</code></a>
</p>
</li>
<li> <p><a href="#method-plot_n_gram_stats"><code>DataAnalyzer$plot_n_gram_stats()</code></a>
</p>
</li>
<li> <p><a href="#method-get_file_info"><code>DataAnalyzer$get_file_info()</code></a>
</p>
</li>
<li> <p><a href="#method-get_ngrams"><code>DataAnalyzer$get_ngrams()</code></a>
</p>
</li>
<li> <p><a href="#method-clone"><code>DataAnalyzer$clone()</code></a>
</p>
</li></ul>



<details open ><summary>Inherited methods</summary>


</details>

<hr>
<a id="method-new"></a>



<h4>Method <code>new()</code></h4>

<p>It initializes the current object. It is used to set the file name
and verbose options.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataAnalyzer$new(fn = NULL, ve = 0)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>fn</code></dt><dd><p>The path to the input file.</p>
</dd>
<dt><code>ve</code></dt><dd><p>The level of detail in the information messages.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-plot_n_gram_stats"></a>



<h4>Method <code>plot_n_gram_stats()</code></h4>

<p>It allows generating two type of n-gram plots. It first reads n-gram
token frequencies from an input text file. The n-gram frequencies are
displayed in a bar plot.
</p>
<p>The type of plot is specified by the type option. The type options
can have the values 'top_features' or 'coverage'. 'top_features'
displays the top n most occurring tokens along with their
frequencies. 'coverage' displays the number of words along with their
frequencies.
</p>
<p>The plot stats are returned as a data frame.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataAnalyzer$plot_n_gram_stats(opts)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>opts</code></dt><dd><p>The options for analyzing the data.
</p>

<ul>
<li> <p><strong>type</strong>. The type of plot to display. The options are:
'top_features', 'coverage'.
</p>
</li>
<li> <p><strong>n</strong>. For 'top_features', it is the number of top most occurring
tokens. For 'coverage' it is the first n frequencies.
</p>
</li>
<li> <p><strong>save_to</strong>. The graphics devices to save the plot to.
NULL implies plot is printed.
</p>
</li>
<li> <p><strong>dir</strong>. The output directory where the plot will be saved.
</p>
</li></ul>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A data frame containing the stats.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre># Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL value implies tempdir will
# be used.
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("n2.RDS")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The n-gram file name
nfn &lt;- paste0(ed, "/n2.RDS")
# The DataAnalyzer object is created
da &lt;- DataAnalyzer$new(nfn, ve = ve)
# The top features plot is checked
df &lt;- da$plot_n_gram_stats(opts = list(
    "type" = "top_features",
    "n" = 10,
    "save_to" = NULL,
    "dir" = ed
))
# N-gram statistics are displayed
print(df)
# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</pre>
</div>


<hr>
<a id="method-get_file_info"></a>



<h4>Method <code>get_file_info()</code></h4>

<p>It generates information about text files. It takes as input a file
or a directory containing text files. For each file it calculates the
total number of lines, maximum, minimum and mean line lengths and the
total file size. The file information is returned as a data frame.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataAnalyzer$get_file_info(res)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>res</code></dt><dd><p>The name of a directory or a file name.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A data frame containing the text file statistics.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre># Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("test.txt")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The test file name
cfn &lt;- paste0(ed, "/test.txt")
# The DataAnalyzer object is created
da &lt;- DataAnalyzer$new(ve = ve)
# The file info is fetched
fi &lt;- da$get_file_info(cfn)
# The file information is printed
print(fi)

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</pre>
</div>


<hr>
<a id="method-get_ngrams"></a>



<h4>Method <code>get_ngrams()</code></h4>

<p>It extracts a given number of n-grams and their frequencies from a
n-gram token file.
</p>
<p>The prefix parameter specifies the regular expression for matching
n-grams. If this parameter is not specified then the given number of
n-grams are randomly chosen.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataAnalyzer$get_ngrams(fn, c = NULL, pre = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>fn</code></dt><dd><p>The n-gram file name.</p>
</dd>
<dt><code>c</code></dt><dd><p>The number of n-grams to return.</p>
</dd>
<dt><code>pre</code></dt><dd><p>The n-gram prefix, given as a regular expression.</p>
</dd>
</dl>

</div>



<h5>Examples</h5>

<div class="r example copy">
<pre># Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("n2.RDS")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The n-gram file name
nfn &lt;- paste0(ed, "/n2.RDS")
# The DataAnalyzer object is created
da &lt;- DataAnalyzer$new(nfn, ve = ve)
# Bi-grams starting with "and_" are returned
df &lt;- da$get_ngrams(fn = nfn, c = 10, pre = "^and_*")
# The data frame is sorted by frequency
df &lt;- df[order(df$freq, decreasing = TRUE),]
# The data frame is printed
print(df)

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</pre>
</div>


<hr>
<a id="method-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataAnalyzer$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
## ------------------------------------------------
## Method `DataAnalyzer$plot_n_gram_stats`
## ------------------------------------------------

# Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL value implies tempdir will
# be used.
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("n2.RDS")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The n-gram file name
nfn &lt;- paste0(ed, "/n2.RDS")
# The DataAnalyzer object is created
da &lt;- DataAnalyzer$new(nfn, ve = ve)
# The top features plot is checked
df &lt;- da$plot_n_gram_stats(opts = list(
    "type" = "top_features",
    "n" = 10,
    "save_to" = NULL,
    "dir" = ed
))
# N-gram statistics are displayed
print(df)
# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()

## ------------------------------------------------
## Method `DataAnalyzer$get_file_info`
## ------------------------------------------------

# Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("test.txt")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The test file name
cfn &lt;- paste0(ed, "/test.txt")
# The DataAnalyzer object is created
da &lt;- DataAnalyzer$new(ve = ve)
# The file info is fetched
fi &lt;- da$get_file_info(cfn)
# The file information is printed
print(fi)

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()

## ------------------------------------------------
## Method `DataAnalyzer$get_ngrams`
## ------------------------------------------------

# Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("n2.RDS")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The n-gram file name
nfn &lt;- paste0(ed, "/n2.RDS")
# The DataAnalyzer object is created
da &lt;- DataAnalyzer$new(nfn, ve = ve)
# Bi-grams starting with "and_" are returned
df &lt;- da$get_ngrams(fn = nfn, c = 10, pre = "^and_*")
# The data frame is sorted by frequency
df &lt;- df[order(df$freq, decreasing = TRUE),]
# The data frame is printed
print(df)

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</code></pre>

<hr>
<h2 id='DataCleaner'>Provides data cleaning functionality</h2><span id='topic+DataCleaner'></span>

<h3>Description</h3>

<p>It provides a memory efficient method for removing unneeded
characters from text files. It is suitable for cleaning large text files.
</p>


<h3>Details</h3>

<p>It provides a method for cleaning text files. It allows removing bad words,
stop words, non dictionary words, extra space, punctuation and non-alphabet
characters. It also allows conversion to lower case. It supports large text
files.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+Base">wordpredictor::Base</a></code> -&gt; <code>DataCleaner</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-new"><code>DataCleaner$new()</code></a>
</p>
</li>
<li> <p><a href="#method-clean_file"><code>DataCleaner$clean_file()</code></a>
</p>
</li>
<li> <p><a href="#method-clean_lines"><code>DataCleaner$clean_lines()</code></a>
</p>
</li>
<li> <p><a href="#method-clone"><code>DataCleaner$clone()</code></a>
</p>
</li></ul>



<details open ><summary>Inherited methods</summary>


</details>

<hr>
<a id="method-new"></a>



<h4>Method <code>new()</code></h4>

<p>It initializes the current object. It is used to set the file name
and verbose options.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataCleaner$new(fn = NULL, opts = list(), ve = 0)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>fn</code></dt><dd><p>The path to the file to clean.</p>
</dd>
<dt><code>opts</code></dt><dd><p>The options for data cleaning.
</p>

<ul>
<li> <p><strong>min_words</strong>. The minimum number of words per sentence.
</p>
</li>
<li> <p><strong>line_count</strong>. The number of lines to read and clean at a time.
</p>
</li>
<li> <p><strong>save_data</strong>. If the combined processed lines should be saved.
</p>
</li>
<li> <p><strong>output_file</strong>. Name of the output file used to store the data.
</p>
</li>
<li> <p><strong>sw_file</strong>. The stop words file path.
</p>
</li>
<li> <p><strong>dict_file</strong>. The dictionary file path.
</p>
</li>
<li> <p><strong>bad_file</strong>. The bad words file path.
</p>
</li>
<li> <p><strong>to_lower</strong>. If the words should be converted to lower case.
</p>
</li>
<li> <p><strong>remove_stop</strong>. If stop words should be removed.
</p>
</li>
<li> <p><strong>remove_punct</strong>. If punctuation symbols should be removed.
</p>
</li>
<li> <p><strong>remove_non_dict</strong>. If non dictionary words should be removed.
</p>
</li>
<li> <p><strong>remove_non_alpha</strong>. -&gt; If non alphabet symbols should be removed.
</p>
</li>
<li> <p><strong>remove_extra_space</strong>. -&gt; If leading, trailing and double spaces
should be removed.
</p>
</li>
<li> <p><strong>remove_bad</strong>. If bad words should be removed
</p>
</li></ul>
</dd>
<dt><code>ve</code></dt><dd><p>The level of detail in the information messages.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-clean_file"></a>



<h4>Method <code>clean_file()</code></h4>

<p>It provides an efficient method for cleaning text files.
It removes unneeded characters from the given text file with several
options.
</p>
<p>It allows removing punctuation, bad words, stop words,
non-alphabetical symbols and non-dictionary words. It reads a certain
number of lines from the given text file. It removes unneeded
characters from the lines and then saves the lines to an output text
file.
</p>
<p>File cleaning progress is displayed if the verbose option was
set in the class constructor. It is suitable for cleaning large text
files.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataCleaner$clean_file()</pre></div>



<h5>Examples</h5>

<div class="r example copy">
<pre># Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("test.txt")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The cleaned test file name
cfn &lt;- paste0(ed, "/test-clean.txt")
# The test file name
fn &lt;- paste0(ed, "/test.txt")
# The data cleaning options
dc_opts &lt;- list("output_file" = cfn)
# The data cleaner object is created
dc &lt;- DataCleaner$new(fn, dc_opts, ve = ve)
# The sample file is cleaned
dc$clean_file()

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</pre>
</div>


<hr>
<a id="method-clean_lines"></a>



<h4>Method <code>clean_lines()</code></h4>

<p>It cleans the given lines of text using the options
passed to the current object.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataCleaner$clean_lines(lines)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>lines</code></dt><dd><p>The input sentences.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>The cleaned lines of text.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre># The level of detail in the information messages
ve &lt;- 0
# Test data is read
l &lt;- c(
    "If you think I'm wrong, send me a link to where it's happened",
    "We're about 90percent done with this room",
    "This isn't how I wanted it between us.",
    "Almost any cute breed can become ornamental",
    "Once upon a time there was a kingdom with a castle",
    "That's not a thing any of us are granted'",
    "Why are you being so difficult? she asks."
)
# The expected results
res &lt;- c(
    "if you think wrong send me a link to where its happened",
    "were about percent done with this room",
    "this how i wanted it between us",
    "almost any cute breed can become ornamental",
    "once upon a time there was a kingdom with a castle",
    "thats not a thing any of us are granted",
    "why are you being so difficult she asks"
)
# The DataCleaner object is created
dc &lt;- DataCleaner$new(ve = ve)
# The line is cleaned
cl &lt;- dc$clean_lines(l)
# The cleaned lines are printed
print(cl)
</pre>
</div>


<hr>
<a id="method-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataCleaner$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
## ------------------------------------------------
## Method `DataCleaner$clean_file`
## ------------------------------------------------

# Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("test.txt")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The cleaned test file name
cfn &lt;- paste0(ed, "/test-clean.txt")
# The test file name
fn &lt;- paste0(ed, "/test.txt")
# The data cleaning options
dc_opts &lt;- list("output_file" = cfn)
# The data cleaner object is created
dc &lt;- DataCleaner$new(fn, dc_opts, ve = ve)
# The sample file is cleaned
dc$clean_file()

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()

## ------------------------------------------------
## Method `DataCleaner$clean_lines`
## ------------------------------------------------

# The level of detail in the information messages
ve &lt;- 0
# Test data is read
l &lt;- c(
    "If you think I'm wrong, send me a link to where it's happened",
    "We're about 90percent done with this room",
    "This isn't how I wanted it between us.",
    "Almost any cute breed can become ornamental",
    "Once upon a time there was a kingdom with a castle",
    "That's not a thing any of us are granted'",
    "Why are you being so difficult? she asks."
)
# The expected results
res &lt;- c(
    "if you think wrong send me a link to where its happened",
    "were about percent done with this room",
    "this how i wanted it between us",
    "almost any cute breed can become ornamental",
    "once upon a time there was a kingdom with a castle",
    "thats not a thing any of us are granted",
    "why are you being so difficult she asks"
)
# The DataCleaner object is created
dc &lt;- DataCleaner$new(ve = ve)
# The line is cleaned
cl &lt;- dc$clean_lines(l)
# The cleaned lines are printed
print(cl)
</code></pre>

<hr>
<h2 id='DataSampler'>Generates data samples from text files</h2><span id='topic+DataSampler'></span>

<h3>Description</h3>

<p>It provides a method for generating training, testing and validation data
sets from a given input text file.
</p>
<p>It also provides a method for generating a sample file of given size or
number of lines from an input text file. The contents of the sample file may
be cleaned or randomized.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+Base">wordpredictor::Base</a></code> -&gt; <code>DataSampler</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-new"><code>DataSampler$new()</code></a>
</p>
</li>
<li> <p><a href="#method-generate_sample"><code>DataSampler$generate_sample()</code></a>
</p>
</li>
<li> <p><a href="#method-generate_data"><code>DataSampler$generate_data()</code></a>
</p>
</li>
<li> <p><a href="#method-clone"><code>DataSampler$clone()</code></a>
</p>
</li></ul>



<details open ><summary>Inherited methods</summary>


</details>

<hr>
<a id="method-new"></a>



<h4>Method <code>new()</code></h4>

<p>It initializes the current object. It is used to set the
verbose option.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataSampler$new(dir = ".", ve = 0)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dir</code></dt><dd><p>The directory for storing the input and output files.</p>
</dd>
<dt><code>ve</code></dt><dd><p>The level of detail in the information messages.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-generate_sample"></a>



<h4>Method <code>generate_sample()</code></h4>

<p>Generates a sample file of given size from the given input file. The
file is saved to the directory given by the dir object attribute.
Once the file has been generated, its contents may be cleaned or
randomized.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataSampler$generate_sample(fn, ss, ic, ir, ofn, is, dc_opts = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>fn</code></dt><dd><p>The input file name. It is the short file name relative to
the dir attribute.</p>
</dd>
<dt><code>ss</code></dt><dd><p>The number of lines or proportion of lines to sample.</p>
</dd>
<dt><code>ic</code></dt><dd><p>If the sample file should be cleaned.</p>
</dd>
<dt><code>ir</code></dt><dd><p>If the sample file contents should be randomized.</p>
</dd>
<dt><code>ofn</code></dt><dd><p>The output file name. It will be saved to the dir.</p>
</dd>
<dt><code>is</code></dt><dd><p>If the sampled data should be saved to a file.</p>
</dd>
<dt><code>dc_opts</code></dt><dd><p>The options for cleaning the data.</p>
</dd>
</dl>

</div>



<h5>Examples</h5>

<div class="r example copy">
<pre># Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("input.txt")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The sample file name
sfn &lt;- paste0(ed, "/sample.txt")
# An object of class DataSampler is created
ds &lt;- DataSampler$new(dir = ed, ve = ve)
# The sample file is generated
ds$generate_sample(
    fn = "input.txt",
    ss = 0.5,
    ic = FALSE,
    ir = FALSE,
    ofn = "sample.txt",
    is = TRUE
)

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</pre>
</div>


<hr>
<a id="method-generate_data"></a>



<h4>Method <code>generate_data()</code></h4>

<p>It generates training, testing and validation data sets
from the given input file. It first reads the file given as a
parameter to the current object. It partitions the data into
training, testing and validation sets, according to the perc
parameter. The files are named train.txt, test.txt and va.txt and are
saved to the given output folder.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataSampler$generate_data(fn, percs)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>fn</code></dt><dd><p>The input file name. It should be relative to the dir
attribute.</p>
</dd>
<dt><code>percs</code></dt><dd><p>The size of the training, testing and validation sets.</p>
</dd>
</dl>

</div>



<h5>Examples</h5>

<div class="r example copy">
<pre># Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be
# used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("input.txt")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve)
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The files to clean
fns &lt;- c("train", "test", "validate")
# An object of class DataSampler is created
ds &lt;- DataSampler$new(dir = ed, ve = ve)
# The train, test and validation files are generated
ds$generate_data(
    fn = "input.txt",
    percs = list(
        "train" = 0.8,
        "test" = 0.1,
        "validate" = 0.1
    )
)

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</pre>
</div>


<hr>
<a id="method-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataSampler$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
## ------------------------------------------------
## Method `DataSampler$generate_sample`
## ------------------------------------------------

# Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("input.txt")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The sample file name
sfn &lt;- paste0(ed, "/sample.txt")
# An object of class DataSampler is created
ds &lt;- DataSampler$new(dir = ed, ve = ve)
# The sample file is generated
ds$generate_sample(
    fn = "input.txt",
    ss = 0.5,
    ic = FALSE,
    ir = FALSE,
    ofn = "sample.txt",
    is = TRUE
)

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()

## ------------------------------------------------
## Method `DataSampler$generate_data`
## ------------------------------------------------

# Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be
# used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("input.txt")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve)
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The files to clean
fns &lt;- c("train", "test", "validate")
# An object of class DataSampler is created
ds &lt;- DataSampler$new(dir = ed, ve = ve)
# The train, test and validation files are generated
ds$generate_data(
    fn = "input.txt",
    percs = list(
        "train" = 0.8,
        "test" = 0.1,
        "validate" = 0.1
    )
)

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</code></pre>

<hr>
<h2 id='EnvManager'>Allows managing the test environment</h2><span id='topic+EnvManager'></span>

<h3>Description</h3>

<p>This class provides a method for creating directories in the tempdir folder
for testing purposes. It also provides a method for reading files from the
inst/extdata folder.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+Base">wordpredictor::Base</a></code> -&gt; <code>EnvManager</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-new"><code>EnvManager$new()</code></a>
</p>
</li>
<li> <p><a href="#method-get_data_fn"><code>EnvManager$get_data_fn()</code></a>
</p>
</li>
<li> <p><a href="#method-remove_files"><code>EnvManager$remove_files()</code></a>
</p>
</li>
<li> <p><a href="#method-td_env"><code>EnvManager$td_env()</code></a>
</p>
</li>
<li> <p><a href="#method-cp_env"><code>EnvManager$cp_env()</code></a>
</p>
</li>
<li> <p><a href="#method-setup_env"><code>EnvManager$setup_env()</code></a>
</p>
</li>
<li> <p><a href="#method-clone"><code>EnvManager$clone()</code></a>
</p>
</li></ul>



<details open ><summary>Inherited methods</summary>


</details>

<hr>
<a id="method-new"></a>



<h4>Method <code>new()</code></h4>

<p>It initializes the current object. It simply calls the base class
constructor.
</p>


<h5>Usage</h5>

<div class="r"><pre>EnvManager$new(rp = "../../", ve = 0)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>rp</code></dt><dd><p>The prefix for accessing the package root folder.</p>
</dd>
<dt><code>ve</code></dt><dd><p>The level of detail in the information messages.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-get_data_fn"></a>



<h4>Method <code>get_data_fn()</code></h4>

<p>Checks if the given file exists. If it does not exist,
then it tries to load the file from the inst/extdata data folder of
the package. It throws an error if the file was not found. If the
file exists, then the method simply returns the file name.
</p>


<h5>Usage</h5>

<div class="r"><pre>EnvManager$get_data_fn(fn, dfn)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>fn</code></dt><dd><p>The file name.</p>
</dd>
<dt><code>dfn</code></dt><dd><p>The name of the default file in the external data folder
of the package.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>The name of the file if it exists, or the full path to the
default file.
</p>


<hr>
<a id="method-remove_files"></a>



<h4>Method <code>remove_files()</code></h4>

<p>Removes all files in the given directory.
</p>


<h5>Usage</h5>

<div class="r"><pre>EnvManager$remove_files(dn)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dn</code></dt><dd><p>The directory name.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-td_env"></a>



<h4>Method <code>td_env()</code></h4>

<p>Removes the ed folder created by the setup_env method. Also sets
the R option, &quot;ed&quot; to NULL.
</p>


<h5>Usage</h5>

<div class="r"><pre>EnvManager$td_env(rf = F)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>rf</code></dt><dd><p>If the environment folder should be removed.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-cp_env"></a>



<h4>Method <code>cp_env()</code></h4>

<p>Copies the ed folder created by the setup_env method to
inst/extdata.
</p>


<h5>Usage</h5>

<div class="r"><pre>EnvManager$cp_env()</pre></div>


<hr>
<a id="method-setup_env"></a>



<h4>Method <code>setup_env()</code></h4>

<p>Copies the given files from test folder to the
environment folder.
</p>


<h5>Usage</h5>

<div class="r"><pre>EnvManager$setup_env(fns = c(), cf = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>fns</code></dt><dd><p>The list of test files to copy</p>
</dd>
<dt><code>cf</code></dt><dd><p>A custom environment folder. It is a path relative to the
current directory. If not specified, then the tempdir function is
used to generate the environment folder.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>The list of folders that can be used during testing.
</p>


<hr>
<a id="method-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>EnvManager$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='Model'>Represents n-gram models</h2><span id='topic+Model'></span>

<h3>Description</h3>

<p>The Model class represents n-gram models. An instance of the class is a
single n-gram model. The attributes of this class are used to store n-gram
model information. The class provides methods for loading and saving the
model.
</p>


<h3>Details</h3>

<p>The attributes of this class are used to store n-gram model information such
as model name, model description, model file name, n-gram size, transition
probabilities data, default probability for words, data cleaning and
tokenization options, word list, model path, data directory path and
performance stats. The model is saved to a single file as a R object.
</p>
<p>A model file contains all the information required by the model. The model
object is used as input by classes that perform operations on the model such
as evaluation of model performance, text predictions and comparison of model
performance.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+Base">wordpredictor::Base</a></code> -&gt; <code>Model</code>
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>pstats</code></dt><dd><p>The performance stats for the model.</p>
</dd>
<dt><code>name</code></dt><dd><p>The model name.</p>
</dd>
<dt><code>desc</code></dt><dd><p>The model description.</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-new"><code>Model$new()</code></a>
</p>
</li>
<li> <p><a href="#method-load_model"><code>Model$load_model()</code></a>
</p>
</li>
<li> <p><a href="#method-get_config"><code>Model$get_config()</code></a>
</p>
</li>
<li> <p><a href="#method-get_size"><code>Model$get_size()</code></a>
</p>
</li>
<li> <p><a href="#method-clone"><code>Model$clone()</code></a>
</p>
</li></ul>



<details open ><summary>Inherited methods</summary>


</details>

<hr>
<a id="method-new"></a>



<h4>Method <code>new()</code></h4>

<p>It initializes the current object. It is used to set the
maximum n-gram number, sample size, input file name, data cleaner
options, tokenization options, combined transition probabilities file
name and verbose.
</p>


<h5>Usage</h5>

<div class="r"><pre>Model$new(
  name = NULL,
  desc = NULL,
  fn = NULL,
  df = NULL,
  n = 4,
  ssize = 0.3,
  dir = ".",
  dc_opts = list(),
  tg_opts = list(),
  ve = 0
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt><dd><p>The model name.</p>
</dd>
<dt><code>desc</code></dt><dd><p>The model description.</p>
</dd>
<dt><code>fn</code></dt><dd><p>The model file name.</p>
</dd>
<dt><code>df</code></dt><dd><p>The name of the file used to generate the model.</p>
</dd>
<dt><code>n</code></dt><dd><p>The maximum n-gram number supported by the model.</p>
</dd>
<dt><code>ssize</code></dt><dd><p>The sample size as a proportion of the input file.</p>
</dd>
<dt><code>dir</code></dt><dd><p>The directory containing the model files.</p>
</dd>
<dt><code>dc_opts</code></dt><dd><p>The data cleaner options.</p>
</dd>
<dt><code>tg_opts</code></dt><dd><p>The token generator options.</p>
</dd>
<dt><code>ve</code></dt><dd><p>The level of detail in the information messages.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-load_model"></a>



<h4>Method <code>load_model()</code></h4>

<p>It loads the model using the given information
</p>


<h5>Usage</h5>

<div class="r"><pre>Model$load_model()</pre></div>


<hr>
<a id="method-get_config"></a>



<h4>Method <code>get_config()</code></h4>

<p>It returns the given configuration data
</p>


<h5>Usage</h5>

<div class="r"><pre>Model$get_config(cn)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>cn</code></dt><dd><p>The name of the required configuration.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>The configuration value.
</p>


<hr>
<a id="method-get_size"></a>



<h4>Method <code>get_size()</code></h4>

<p>It returns the size of the current object. The object
size is calculated as the sum of sizes of the object attributes.
</p>


<h5>Usage</h5>

<div class="r"><pre>Model$get_size()</pre></div>



<h5>Returns</h5>

<p>The size of the object in bytes.
</p>


<hr>
<a id="method-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>Model$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='ModelEvaluator'>Evaluates performance of n-gram models</h2><span id='topic+ModelEvaluator'></span>

<h3>Description</h3>

<p>It provides methods for performing extrinsic and intrinsic
evaluation of a n-gram model. It also provides a method for comparing
performance of multiple n-gram models.
</p>
<p>Intrinsic evaluation is based on calculation of Perplexity. Extrinsic
evaluation involves determining the percentage of correct next word
predictions.
</p>


<h3>Details</h3>

<p>Before performing the intrinsic and extrinsic model evaluation, a validation
file must be first generated. This can be done using the DataSampler class.
</p>
<p>Each line in the validation file is evaluated. For intrinsic evaluation
Perplexity for the line is calculated. An overall summary of the Perplexity
calculations is returned. It includes the min, max and mean Perplexity.
</p>
<p>For extrinsic evaluation, next word prediction is performed on each line. If
the actual next word is one of the three predicted next words, then the
prediction is considered to be accurate. The extrinsic evaluation returns the
percentage of correct and incorrect predictions.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+Base">wordpredictor::Base</a></code> -&gt; <code>ModelEvaluator</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-new"><code>ModelEvaluator$new()</code></a>
</p>
</li>
<li> <p><a href="#method-compare_performance"><code>ModelEvaluator$compare_performance()</code></a>
</p>
</li>
<li> <p><a href="#method-plot_stats"><code>ModelEvaluator$plot_stats()</code></a>
</p>
</li>
<li> <p><a href="#method-evaluate_performance"><code>ModelEvaluator$evaluate_performance()</code></a>
</p>
</li>
<li> <p><a href="#method-intrinsic_evaluation"><code>ModelEvaluator$intrinsic_evaluation()</code></a>
</p>
</li>
<li> <p><a href="#method-extrinsic_evaluation"><code>ModelEvaluator$extrinsic_evaluation()</code></a>
</p>
</li>
<li> <p><a href="#method-clone"><code>ModelEvaluator$clone()</code></a>
</p>
</li></ul>



<details open ><summary>Inherited methods</summary>


</details>

<hr>
<a id="method-new"></a>



<h4>Method <code>new()</code></h4>

<p>It initializes the current object. It is used to set the
model file name and verbose options.
</p>


<h5>Usage</h5>

<div class="r"><pre>ModelEvaluator$new(mf = NULL, ve = 0)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>mf</code></dt><dd><p>The model file name.</p>
</dd>
<dt><code>ve</code></dt><dd><p>The level of detail in the information messages.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-compare_performance"></a>



<h4>Method <code>compare_performance()</code></h4>

<p>It compares the performance of the models in the given folder.
</p>
<p>The performance of the model is compared for the 4 metric which are
time taken, memory used, Perplexity and accuracy. The performance
comparison is displayed on plots.
</p>
<p>4 plots are displayed. One for each performance metric. A fifth plot
shows the variation of Perplexity with accuracy. All 5 plots are
plotted on one page.
</p>


<h5>Usage</h5>

<div class="r"><pre>ModelEvaluator$compare_performance(opts)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>opts</code></dt><dd><p>The options for comparing model performance.
</p>

<ul>
<li> <p><strong>save_to</strong>. The graphics device to save the plot to.
NULL implies plot is printed.
</p>
</li>
<li> <p><strong>dir</strong>. The directory containing the model file, plot and stats.
</p>
</li></ul>
</dd>
</dl>

</div>



<h5>Examples</h5>

<div class="r example copy">
<pre># Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be
# used.
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("def-model.RDS")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code
# ModelEvaluator class object is created
me &lt;- ModelEvaluator$new(ve = ve)
# The performance evaluation is performed
me$compare_performance(opts = list(
    "save_to" = NULL,
    "dir" = ed
))

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</pre>
</div>


<hr>
<a id="method-plot_stats"></a>



<h4>Method <code>plot_stats()</code></h4>

<p>It plots the given stats on 5 plots. The plots are displayed on a
single page.
</p>
<p>The 4 performance metrics which are time taken, memory, Perplexity
and accuracy are plotted against the model name. Another plot
compares Perplexity with accuracy for each model.
</p>


<h5>Usage</h5>

<div class="r"><pre>ModelEvaluator$plot_stats(data)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt><dd><p>The data to plot</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>The ggplot object is returned.
</p>


<hr>
<a id="method-evaluate_performance"></a>



<h4>Method <code>evaluate_performance()</code></h4>

<p>It performs intrinsic and extrinsic evaluation for the given model
and validation text file. The given number of lines in the validation
file are used in the evaluation
</p>
<p>It performs two types of evaluations. One is intrinsic evaluation,
based on Perplexity, the other is extrinsic evaluation based on
accuracy.
</p>
<p>It returns the results of evaluation. 4 evaluation metrics are
returned. Perplexity, accuracy, memory and time taken. Memory is the
size of the model object. Time taken is the time needed for
performing both evaluations.
</p>
<p>The results of the model evaluation are saved within the model object
and also returned.
</p>


<h5>Usage</h5>

<div class="r"><pre>ModelEvaluator$evaluate_performance(lc, fn)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>lc</code></dt><dd><p>The number of lines of text in the validation file to be
used for the evaluation.</p>
</dd>
<dt><code>fn</code></dt><dd><p>The name of the validation file. If it does not exist, then
the default file validation-clean.txt is checked in the models
folder</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>The performance stats are returned.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre># Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("def-model.RDS", "validate-clean.txt")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The model file name
mfn &lt;- paste0(ed, "/def-model.RDS")
# The validation file name
vfn &lt;- paste0(ed, "/validate-clean.txt")

# ModelEvaluator class object is created
me &lt;- ModelEvaluator$new(mf = mfn, ve = ve)
# The performance evaluation is performed
stats &lt;- me$evaluate_performance(lc = 20, fn = vfn)
# The evaluation stats are printed
print(stats)

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</pre>
</div>


<hr>
<a id="method-intrinsic_evaluation"></a>



<h4>Method <code>intrinsic_evaluation()</code></h4>

<p>Evaluates the model using intrinsic evaluation based on
Perplexity. The given number of sentences are taken from the
validation file. For each sentence, the Perplexity is calculated.
</p>


<h5>Usage</h5>

<div class="r"><pre>ModelEvaluator$intrinsic_evaluation(lc, fn)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>lc</code></dt><dd><p>The number of lines of text in the validation file to be
used for the evaluation.</p>
</dd>
<dt><code>fn</code></dt><dd><p>The name of the validation file. If it does not exist, then
the default file validation-clean.txt is checked in the models
folder</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>The min, max and mean Perplexity score.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre># Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("def-model.RDS", "validate-clean.txt")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The model file name
mfn &lt;- paste0(ed, "/def-model.RDS")
# The validation file name
vfn &lt;- paste0(ed, "/validate-clean.txt")

# ModelEvaluator class object is created
me &lt;- ModelEvaluator$new(mf = mfn, ve = ve)
# The intrinsic evaluation is performed
stats &lt;- me$intrinsic_evaluation(lc = 20, fn = vfn)
# The evaluation stats are printed
print(stats)

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</pre>
</div>


<hr>
<a id="method-extrinsic_evaluation"></a>



<h4>Method <code>extrinsic_evaluation()</code></h4>

<p>Evaluates the model using extrinsic evaluation based on
Accuracy. The given number of sentences are taken from the validation
file.
</p>
<p>For each sentence, the model is used to predict the next word.
The accuracy stats are returned. A prediction is considered to be
correct if one of the predicted words matches the actual word.
</p>


<h5>Usage</h5>

<div class="r"><pre>ModelEvaluator$extrinsic_evaluation(lc, fn)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>lc</code></dt><dd><p>The number of lines of text in the validation file to be
used for the evaluation.</p>
</dd>
<dt><code>fn</code></dt><dd><p>The name of the validation file.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>The number of correct and incorrect predictions.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre># Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("def-model.RDS", "validate-clean.txt")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The model file name
mfn &lt;- paste0(ed, "/def-model.RDS")
# The validation file name
vfn &lt;- paste0(ed, "/validate-clean.txt")

# ModelEvaluator class object is created
me &lt;- ModelEvaluator$new(mf = mfn, ve = ve)
# The intrinsic evaluation is performed
stats &lt;- me$extrinsic_evaluation(lc = 100, fn = vfn)
# The evaluation stats are printed
print(stats)

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</pre>
</div>


<hr>
<a id="method-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>ModelEvaluator$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
## ------------------------------------------------
## Method `ModelEvaluator$compare_performance`
## ------------------------------------------------

# Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be
# used.
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("def-model.RDS")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code
# ModelEvaluator class object is created
me &lt;- ModelEvaluator$new(ve = ve)
# The performance evaluation is performed
me$compare_performance(opts = list(
    "save_to" = NULL,
    "dir" = ed
))

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()

## ------------------------------------------------
## Method `ModelEvaluator$evaluate_performance`
## ------------------------------------------------

# Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("def-model.RDS", "validate-clean.txt")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The model file name
mfn &lt;- paste0(ed, "/def-model.RDS")
# The validation file name
vfn &lt;- paste0(ed, "/validate-clean.txt")

# ModelEvaluator class object is created
me &lt;- ModelEvaluator$new(mf = mfn, ve = ve)
# The performance evaluation is performed
stats &lt;- me$evaluate_performance(lc = 20, fn = vfn)
# The evaluation stats are printed
print(stats)

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()

## ------------------------------------------------
## Method `ModelEvaluator$intrinsic_evaluation`
## ------------------------------------------------

# Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("def-model.RDS", "validate-clean.txt")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The model file name
mfn &lt;- paste0(ed, "/def-model.RDS")
# The validation file name
vfn &lt;- paste0(ed, "/validate-clean.txt")

# ModelEvaluator class object is created
me &lt;- ModelEvaluator$new(mf = mfn, ve = ve)
# The intrinsic evaluation is performed
stats &lt;- me$intrinsic_evaluation(lc = 20, fn = vfn)
# The evaluation stats are printed
print(stats)

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()

## ------------------------------------------------
## Method `ModelEvaluator$extrinsic_evaluation`
## ------------------------------------------------

# Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("def-model.RDS", "validate-clean.txt")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The model file name
mfn &lt;- paste0(ed, "/def-model.RDS")
# The validation file name
vfn &lt;- paste0(ed, "/validate-clean.txt")

# ModelEvaluator class object is created
me &lt;- ModelEvaluator$new(mf = mfn, ve = ve)
# The intrinsic evaluation is performed
stats &lt;- me$extrinsic_evaluation(lc = 100, fn = vfn)
# The evaluation stats are printed
print(stats)

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</code></pre>

<hr>
<h2 id='ModelGenerator'>Generates n-gram models from a text file</h2><span id='topic+ModelGenerator'></span>

<h3>Description</h3>

<p>It provides a method for generating n-gram models. The n-gram models may be
customized by specifying data cleaning and tokenization options.
</p>


<h3>Details</h3>

<p>It provides a method that generates a n-gram model. The n-gram model
may be customized by specifying the data cleaning and tokenization options.
</p>
<p>The data cleaning options include removal of punctuation, stop words, extra
space, non-dictionary words and bad words. The tokenization options include
n-gram number and word stemming.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+Base">wordpredictor::Base</a></code> -&gt; <code>ModelGenerator</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-new"><code>ModelGenerator$new()</code></a>
</p>
</li>
<li> <p><a href="#method-generate_model"><code>ModelGenerator$generate_model()</code></a>
</p>
</li>
<li> <p><a href="#method-clone"><code>ModelGenerator$clone()</code></a>
</p>
</li></ul>



<details open ><summary>Inherited methods</summary>


</details>

<hr>
<a id="method-new"></a>



<h4>Method <code>new()</code></h4>

<p>It initializes the current object. It is used to set the maximum
n-gram number, sample size, input file name, data cleaner options,
tokenization options and verbose option.
</p>


<h5>Usage</h5>

<div class="r"><pre>ModelGenerator$new(
  name = NULL,
  desc = NULL,
  fn = NULL,
  df = NULL,
  n = 4,
  ssize = 0.3,
  dir = ".",
  dc_opts = list(),
  tg_opts = list(),
  ve = 0
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt><dd><p>The model name.</p>
</dd>
<dt><code>desc</code></dt><dd><p>The model description.</p>
</dd>
<dt><code>fn</code></dt><dd><p>The model file name.</p>
</dd>
<dt><code>df</code></dt><dd><p>The path of the input text file. It should be the short
file name and should be present in the data directory.</p>
</dd>
<dt><code>n</code></dt><dd><p>The n-gram size of the model.</p>
</dd>
<dt><code>ssize</code></dt><dd><p>The sample size as a proportion of the input file.</p>
</dd>
<dt><code>dir</code></dt><dd><p>The directory containing the input and output files.</p>
</dd>
<dt><code>dc_opts</code></dt><dd><p>The data cleaner options.</p>
</dd>
<dt><code>tg_opts</code></dt><dd><p>The token generator options.</p>
</dd>
<dt><code>ve</code></dt><dd><p>The level of detail in the information messages.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-generate_model"></a>



<h4>Method <code>generate_model()</code></h4>

<p>It generates the model using the parameters passed to
the object's constructor. It generates a n-gram model file and saves
it to the model directory.
</p>


<h5>Usage</h5>

<div class="r"><pre>ModelGenerator$generate_model()</pre></div>



<h5>Examples</h5>

<div class="r example copy">
<pre># Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("input.txt")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# ModelGenerator class object is created
mg &lt;- ModelGenerator$new(
    name = "default-model",
    desc = "1 MB size and default options",
    fn = "def-model.RDS",
    df = "input.txt",
    n = 4,
    ssize = 0.99,
    dir = ed,
    dc_opts = list(),
    tg_opts = list(),
    ve = ve
)
# The n-gram model is generated
mg$generate_model()

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</pre>
</div>


<hr>
<a id="method-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>ModelGenerator$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
## ------------------------------------------------
## Method `ModelGenerator$generate_model`
## ------------------------------------------------

# Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("input.txt")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# ModelGenerator class object is created
mg &lt;- ModelGenerator$new(
    name = "default-model",
    desc = "1 MB size and default options",
    fn = "def-model.RDS",
    df = "input.txt",
    n = 4,
    ssize = 0.99,
    dir = ed,
    dc_opts = list(),
    tg_opts = list(),
    ve = ve
)
# The n-gram model is generated
mg$generate_model()

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</code></pre>

<hr>
<h2 id='ModelPredictor'>Allows predicting text, calculating word probabilities and Perplexity</h2><span id='topic+ModelPredictor'></span>

<h3>Description</h3>

<p>It provides a method for predicting the new word given a set of
previous words. It also provides a method for calculating the Perplexity
score for a set of words. Furthermore it provides a method for calculating
the probability of a given word and set of previous words.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+Base">wordpredictor::Base</a></code> -&gt; <code>ModelPredictor</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-new"><code>ModelPredictor$new()</code></a>
</p>
</li>
<li> <p><a href="#method-get_model"><code>ModelPredictor$get_model()</code></a>
</p>
</li>
<li> <p><a href="#method-calc_perplexity"><code>ModelPredictor$calc_perplexity()</code></a>
</p>
</li>
<li> <p><a href="#method-predict_word"><code>ModelPredictor$predict_word()</code></a>
</p>
</li>
<li> <p><a href="#method-get_word_prob"><code>ModelPredictor$get_word_prob()</code></a>
</p>
</li>
<li> <p><a href="#method-clone"><code>ModelPredictor$clone()</code></a>
</p>
</li></ul>



<details open ><summary>Inherited methods</summary>


</details>

<hr>
<a id="method-new"></a>



<h4>Method <code>new()</code></h4>

<p>It initializes the current object. It is used to set the
model file name and verbose options.
</p>


<h5>Usage</h5>

<div class="r"><pre>ModelPredictor$new(mf, ve = 0)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>mf</code></dt><dd><p>The model file name.</p>
</dd>
<dt><code>ve</code></dt><dd><p>The level of detail in the information messages.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-get_model"></a>



<h4>Method <code>get_model()</code></h4>

<p>Returns the Model class object.
</p>


<h5>Usage</h5>

<div class="r"><pre>ModelPredictor$get_model()</pre></div>



<h5>Returns</h5>

<p>The Model class object is returned.
</p>


<hr>
<a id="method-calc_perplexity"></a>



<h4>Method <code>calc_perplexity()</code></h4>

<p>The Perplexity for the given sentence is calculated. For
each word, the probability of the word given the previous words is
calculated. The probabilities are multiplied and then inverted. The
nth root of the result is the perplexity, where n is the number of
words in the sentence. If the stem_words tokenization option was
specified when creating the given model file, then the previous words
are converted to their stems.
</p>


<h5>Usage</h5>

<div class="r"><pre>ModelPredictor$calc_perplexity(words)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>words</code></dt><dd><p>The list of words.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>The perplexity of the given list of words.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre># Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("def-model.RDS")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The model file name
mfn &lt;- paste0(ed, "/def-model.RDS")
# ModelPredictor class object is created
mp &lt;- ModelPredictor$new(mf = mfn, ve = ve)
# The sentence whoose Perplexity is to be calculated
l &lt;- "last year at this time i was preparing for a trip to rome"
# The line is split in to words
w &lt;- strsplit(l, " ")[[1]]
# The Perplexity of the sentence is calculated
p &lt;- mp$calc_perplexity(w)
# The sentence Perplexity is printed
print(p)
# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</pre>
</div>


<hr>
<a id="method-predict_word"></a>



<h4>Method <code>predict_word()</code></h4>

<p>Predicts the next word given a list of previous words. It
checks the last n previous words in the transition probabilities
data, where n is equal to 1 - n-gram size of model. If there is a
match, the top 3 next words with highest probabilities are returned.
If there is no match, then the last n-1 previous words are checked.
This process is continued until the last word is checked. If there is
no match, then empty result is returned. The given words may
optionally be stemmed.
</p>


<h5>Usage</h5>

<div class="r"><pre>ModelPredictor$predict_word(words, count = 3, dc = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>words</code></dt><dd><p>A character vector of previous words or a single vector
containing the previous word text.</p>
</dd>
<dt><code>count</code></dt><dd><p>The number of results to return.</p>
</dd>
<dt><code>dc</code></dt><dd><p>A DataCleaner object. If it is given, then the given words</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>The top 3 predicted words along with their probabilities.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre># Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("def-model.RDS")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, "rp" = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The model file name
mfn &lt;- paste0(ed, "/def-model.RDS")
# ModelPredictor class object is created
mp &lt;- ModelPredictor$new(mf = mfn, ve = ve)
# The next word is predicted
nws &lt;- mp$predict_word("today is", count = 10)
# The predicted next words are printed
print(nws)

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</pre>
</div>


<hr>
<a id="method-get_word_prob"></a>



<h4>Method <code>get_word_prob()</code></h4>

<p>Calculates the probability of the given word given the
previous words. The last n words are converted to numeric hash using
digest2int function. All other words are ignored. n is equal to 1 -
size of the n-gram model. The hash is looked up in a data frame of
transition probabilities. The last word is converted to a number by
checking its position in a list of unique words. If the hash and the
word position were found, then the probability of the previous word
and hash is returned. If it was not found, then the hash of the n-1
previous words is taken and the processed is repeated. If the data
was not found in the data frame, then the word probability is
returned. This is known as back-off. If the word probability could
not be found then the default probability is returned. The default
probability is calculated as 1/(N+V), Where N = number of words in
corpus and V is the number of dictionary words.
</p>


<h5>Usage</h5>

<div class="r"><pre>ModelPredictor$get_word_prob(word, pw)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>word</code></dt><dd><p>The word whose probability is to be calculated.</p>
</dd>
<dt><code>pw</code></dt><dd><p>The previous words.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>The probability of the word given the previous words.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre># Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("def-model.RDS")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, "rp" = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The model file name
mfn &lt;- paste0(ed, "/def-model.RDS")
# ModelPredictor class object is created
mp &lt;- ModelPredictor$new(mf = mfn, ve = ve)
# The probability that the next word is "you" given the prev words
# "how" and "are"
prob &lt;- mp$get_word_prob(word = "you", pw = c("how", "are"))
# The probability is printed
print(prob)

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</pre>
</div>


<hr>
<a id="method-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>ModelPredictor$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
## ------------------------------------------------
## Method `ModelPredictor$calc_perplexity`
## ------------------------------------------------

# Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("def-model.RDS")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The model file name
mfn &lt;- paste0(ed, "/def-model.RDS")
# ModelPredictor class object is created
mp &lt;- ModelPredictor$new(mf = mfn, ve = ve)
# The sentence whoose Perplexity is to be calculated
l &lt;- "last year at this time i was preparing for a trip to rome"
# The line is split in to words
w &lt;- strsplit(l, " ")[[1]]
# The Perplexity of the sentence is calculated
p &lt;- mp$calc_perplexity(w)
# The sentence Perplexity is printed
print(p)
# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()

## ------------------------------------------------
## Method `ModelPredictor$predict_word`
## ------------------------------------------------

# Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("def-model.RDS")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, "rp" = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The model file name
mfn &lt;- paste0(ed, "/def-model.RDS")
# ModelPredictor class object is created
mp &lt;- ModelPredictor$new(mf = mfn, ve = ve)
# The next word is predicted
nws &lt;- mp$predict_word("today is", count = 10)
# The predicted next words are printed
print(nws)

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()

## ------------------------------------------------
## Method `ModelPredictor$get_word_prob`
## ------------------------------------------------

# Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("def-model.RDS")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, "rp" = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The model file name
mfn &lt;- paste0(ed, "/def-model.RDS")
# ModelPredictor class object is created
mp &lt;- ModelPredictor$new(mf = mfn, ve = ve)
# The probability that the next word is "you" given the prev words
# "how" and "are"
prob &lt;- mp$get_word_prob(word = "you", pw = c("how", "are"))
# The probability is printed
print(prob)

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</code></pre>

<hr>
<h2 id='TokenGenerator'>Generates n-grams from text files</h2><span id='topic+TokenGenerator'></span>

<h3>Description</h3>

<p>It generates n-gram tokens along with their frequencies. The data
may be saved to a file in plain text format or as a R object.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+Base">wordpredictor::Base</a></code> -&gt; <code>TokenGenerator</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-new"><code>TokenGenerator$new()</code></a>
</p>
</li>
<li> <p><a href="#method-generate_tokens"><code>TokenGenerator$generate_tokens()</code></a>
</p>
</li>
<li> <p><a href="#method-clone"><code>TokenGenerator$clone()</code></a>
</p>
</li></ul>



<details open ><summary>Inherited methods</summary>


</details>

<hr>
<a id="method-new"></a>



<h4>Method <code>new()</code></h4>

<p>It initializes the current obj. It is used to set the file name,
tokenization options and verbose option.
</p>


<h5>Usage</h5>

<div class="r"><pre>TokenGenerator$new(fn = NULL, opts = list(), ve = 0)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>fn</code></dt><dd><p>The path to the input file.</p>
</dd>
<dt><code>opts</code></dt><dd><p>The options for generating the n-gram tokens.
</p>

<ul>
<li> <p><strong>n</strong>. The n-gram size.
</p>
</li>
<li> <p><strong>save_ngrams</strong>. If the n-gram data should be saved.
</p>
</li>
<li> <p><strong>min_freq</strong>. All n-grams with frequency less than min_freq are
ignored.
</p>
</li>
<li> <p><strong>line_count</strong>. The number of lines to process at a time.
</p>
</li>
<li> <p><strong>stem_words</strong>. If words should be transformed to their stems.
</p>
</li>
<li> <p><strong>dir</strong>. The dir where the output file should be saved.
</p>
</li>
<li> <p><strong>format</strong>. The format for the output. There are two options.
</p>

<ul>
<li> <p><strong>plain</strong>. The data is stored in plain text.
</p>
</li>
<li> <p><strong>obj</strong>. The data is stored as a R obj.
</p>
</li></ul>

</li></ul>
</dd>
<dt><code>ve</code></dt><dd><p>The level of detail in the information messages.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-generate_tokens"></a>



<h4>Method <code>generate_tokens()</code></h4>

<p>It generates n-gram tokens and their frequencies from the
given file name. The tokens may be saved to a text file as plain text
or a R object.
</p>


<h5>Usage</h5>

<div class="r"><pre>TokenGenerator$generate_tokens()</pre></div>



<h5>Returns</h5>

<p>The data frame containing n-gram tokens along with their
frequencies.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre># Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("test-clean.txt")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The n-gram size
n &lt;- 4
# The test file name
tfn &lt;- paste0(ed, "/test-clean.txt")
# The n-gram number is set
tg_opts &lt;- list("n" = n, "save_ngrams" = TRUE, "dir" = ed)
# The TokenGenerator object is created
tg &lt;- TokenGenerator$new(tfn, tg_opts, ve = ve)
# The n-gram tokens are generated
tg$generate_tokens()

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</pre>
</div>


<hr>
<a id="method-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>TokenGenerator$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
## ------------------------------------------------
## Method `TokenGenerator$generate_tokens`
## ------------------------------------------------

# Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("test-clean.txt")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The n-gram size
n &lt;- 4
# The test file name
tfn &lt;- paste0(ed, "/test-clean.txt")
# The n-gram number is set
tg_opts &lt;- list("n" = n, "save_ngrams" = TRUE, "dir" = ed)
# The TokenGenerator object is created
tg &lt;- TokenGenerator$new(tfn, tg_opts, ve = ve)
# The n-gram tokens are generated
tg$generate_tokens()

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</code></pre>

<hr>
<h2 id='TPGenerator'>Generates transition probabilities for n-grams</h2><span id='topic+TPGenerator'></span>

<h3>Description</h3>

<p>It provides a method for generating transition probabilities for
the given n-gram size. It also provides a method for generating the combined
transition probabilities data for n-gram sizes from 1 to the given size. The
combined transition probabilities data can be used to implement back-off.
</p>


<h3>Details</h3>

<p>It provides a method for generating n-gram transition probabilities.
It reads n-gram frequencies from an input text file that is generated by the
TokenGenerator class.
</p>
<p>It parses each n-gram into a prefix, a next word, the next word frequency and
the next word probability. Maximum Likelihood count is used to generate the
next word probabilities.
</p>
<p>Each n-gram prefix is converted to a numeric hash using the digest2int
function. The next word is replaced with the position of the next word in the
list of all words. The transition probabilities data is stored as a dataframe
in a file.
</p>
<p>Another method is provided that combines the transition probabilities for
n-grams of size 1 to the given size. The combined transition probabilities
can be saved to a file as a data frame. This file may be regarded as a
completed self contained n-gram model. By combining the transition
probabilities of n-grams, back-off may be used to evaluate word probabilities
or predict the next word.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+Base">wordpredictor::Base</a></code> -&gt; <code>TPGenerator</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-new"><code>TPGenerator$new()</code></a>
</p>
</li>
<li> <p><a href="#method-generate_tp"><code>TPGenerator$generate_tp()</code></a>
</p>
</li>
<li> <p><a href="#method-generate_tp_for_n"><code>TPGenerator$generate_tp_for_n()</code></a>
</p>
</li>
<li> <p><a href="#method-clone"><code>TPGenerator$clone()</code></a>
</p>
</li></ul>



<details open ><summary>Inherited methods</summary>


</details>

<hr>
<a id="method-new"></a>



<h4>Method <code>new()</code></h4>

<p>It initializes the current obj. It is used to set the
transition probabilities options and verbose option.
</p>


<h5>Usage</h5>

<div class="r"><pre>TPGenerator$new(opts = list(), ve = 0)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>opts</code></dt><dd><p>The options for generating the transition probabilities.
</p>

<ul>
<li> <p><strong>save_tp</strong>. If the data should be saved.
</p>
</li>
<li> <p><strong>n</strong>. The n-gram size.
</p>
</li>
<li> <p><strong>dir</strong>. The directory containing the input and output files.
</p>
</li>
<li> <p><strong>format</strong>. The format for the output. There are two options.
</p>

<ul>
<li> <p><strong>plain</strong>. The data is stored in plain text.
</p>
</li>
<li> <p><strong>obj</strong>. The data is stored as a R obj.
</p>
</li></ul>

</li></ul>
</dd>
<dt><code>ve</code></dt><dd><p>The level of detail in the information messages.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-generate_tp"></a>



<h4>Method <code>generate_tp()</code></h4>

<p>It first generates the transition probabilities for each
n-gram of size from 1 to the given size. The transition probabilities
are then combined into a single data frame and saved to the output
folder that is given as parameter to the current object.
</p>
<p>By combining the transition probabilities for all n-gram sizes from 1
to n, back-off can be used to calculate next word probabilities or
predict the next word.
</p>


<h5>Usage</h5>

<div class="r"><pre>TPGenerator$generate_tp()</pre></div>



<h5>Examples</h5>

<div class="r example copy">
<pre># Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("n1.RDS", "n2.RDS", "n3.RDS", "n4.RDS")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The list of output files
fns &lt;- c("words", "model-4", "tp2", "tp3", "tp4")

# The TPGenerator object is created
tp &lt;- TPGenerator$new(opts = list(n = 4, dir = ed), ve = ve)
# The combined transition probabilities are generated
tp$generate_tp()

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</pre>
</div>


<hr>
<a id="method-generate_tp_for_n"></a>



<h4>Method <code>generate_tp_for_n()</code></h4>

<p>It generates the transition probabilities table for the
given n-gram size. It first reads n-gram token frequencies from an
input text file.
</p>
<p>It then generates a data frame whose columns are the
n-gram prefix, next word and next word frequency. The data frame may
be saved to a file as plain text or as a R obj. If n = 1, then the
list of words is saved.
</p>


<h5>Usage</h5>

<div class="r"><pre>TPGenerator$generate_tp_for_n(n)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>n</code></dt><dd><p>The n-gram size for which the tp data is generated.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>TPGenerator$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
## ------------------------------------------------
## Method `TPGenerator$generate_tp`
## ------------------------------------------------

# Start of environment setup code
# The level of detail in the information messages
ve &lt;- 0
# The name of the folder that will contain all the files. It will be
# created in the current directory. NULL implies tempdir will be used
fn &lt;- NULL
# The required files. They are default files that are part of the
# package
rf &lt;- c("n1.RDS", "n2.RDS", "n3.RDS", "n4.RDS")
# An object of class EnvManager is created
em &lt;- EnvManager$new(ve = ve, rp = "./")
# The required files are downloaded
ed &lt;- em$setup_env(rf, fn)
# End of environment setup code

# The list of output files
fns &lt;- c("words", "model-4", "tp2", "tp3", "tp4")

# The TPGenerator object is created
tp &lt;- TPGenerator$new(opts = list(n = 4, dir = ed), ve = ve)
# The combined transition probabilities are generated
tp$generate_tp()

# The test environment is removed. Comment the below line, so the
# files generated by the function can be viewed
em$td_env()
</code></pre>

<hr>
<h2 id='wordpredictor-package'>wordpredictor: Develop Text Prediction Models Based on N-Grams</h2><span id='topic+wordpredictor'></span><span id='topic+wordpredictor-package'></span>

<h3>Description</h3>

<p>A framework for developing n-gram models for text prediction. It provides data cleaning, data sampling, extracting tokens from text, model generation, model evaluation and word prediction. For information on how n-gram models work we referred to: &quot;Speech and Language Processing&quot; &lt;https://web.stanford.edu/~jurafsky/slp3/3.pdf&gt;. For optimizing R code and using R6 classes we referred to &quot;Advanced R&quot; &lt;https://adv-r.hadley.nz/r6.html&gt;. For writing R extensions we referred to &quot;R Packages&quot;, &lt;https://r-pkgs.org/index.html&gt;.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Nadir Latif <a href="mailto:pakjiddat@gmail.com">pakjiddat@gmail.com</a> (<a href="https://orcid.org/0000-0002-7543-7405">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/pakjiddat/word-predictor">https://github.com/pakjiddat/word-predictor</a>
</p>
</li>
<li> <p><a href="https://pakjiddat.github.io/word-predictor/">https://pakjiddat.github.io/word-predictor/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/pakjiddat/word-predictor/issues">https://github.com/pakjiddat/word-predictor/issues</a>
</p>
</li></ul>


</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
