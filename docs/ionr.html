<!DOCTYPE html><html><head><title>Help for package ionr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ionr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ciplotter'><p>Plot confidence intervals</p></a></li>
<li><a href='#ind_excl'><p>Wrapper and scripts for indicator exclusion procedure</p></a></li>
<li><a href='#ind_excl_inc'><p>Incrementally calls ind_excl_step</p></a></li>
<li><a href='#ind_excl_plot'><p>Plot indicator exlusion results with and without excluded indicators</p></a></li>
<li><a href='#ind_excl_step'><p>One step in indicator exclusion procedure</p></a></li>
<li><a href='#optimal_p'><p>Find an optimal p-value for SONE</p></a></li>
<li><a href='#optimal_p_out'><p>Table and plot the SONE values</p></a></li>
<li><a href='#scale_sim'><p>Simulate personality scale(s) and an outcome</p></a></li>
<li><a href='#scenario_plot'><p>Plot scenario simulation results</p></a></li>
<li><a href='#scenario_sim'><p>Simulate SONE values for scenario.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Test for Indifference of Indicator</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2016-10-02</td>
</tr>
<tr>
<td>Author:</td>
<td>Uku Vainik &lt;ukuvainik@gmail.com&gt;, Rene Mottus &lt;rene.mottus@ed.ac.uk&gt; </td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Uku Vainik &lt;ukuvainik@gmail.com&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>gplots, psych</td>
</tr>
<tr>
<td>Suggests:</td>
<td>lavaan</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides item exclusion procedure, which is a formal method to 
    test 'Indifference Of iNdicator' (ION). When a latent personality 
    trait-outcome association is assumed, then the association strength 
    should not depend on which subset of indicators (i.e. items) has been 
    chosen to reflect the trait. Personality traits are  often measured 
    (reflected) by  a sum-score of a certain set of indicators. 
    Item exclusion procedure randomly excludes items from a sum-score and 
    tests, whether the sum-score - outcome correlation changes. ION has been 
    achieved, when any item can be excluded from the sum-score without the 
    sum-score - outcome correlation substantially changing . For more details, 
    see Vainik, Mottus et. al, (2015) "Are Trait-Outcome Associations Caused
    by Scales or Particular Items? Example Analysis of Personality Facets and
    BMI",European Journal of Personality  DOI: &lt;10.1002/per.2009&gt; .</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>5.0.1</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>URL:</td>
<td>www.ut.ee/uku.vainik/ion/</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2016-02-10 20:16:09 UTC; uku</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2016-02-11 00:47:11</td>
</tr>
</table>
<hr>
<h2 id='ciplotter'>Plot confidence intervals</h2><span id='topic+ciplotter'></span>

<h3>Description</h3>

<p>Used by <code><a href="#topic+scenario_plot">scenario_plot</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ciplotter(cix, ciy.lo, ciy.hi, eps, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ciplotter_+3A_cix">cix</code></td>
<td>
<p>values of the x axis</p>
</td></tr>
<tr><td><code id="ciplotter_+3A_ciy.lo">ciy.lo</code></td>
<td>
<p>spread of confidence intervals</p>
</td></tr>
<tr><td><code id="ciplotter_+3A_ciy.hi">ciy.hi</code></td>
<td>
<p>spread of confidence intervals</p>
</td></tr>
<tr><td><code id="ciplotter_+3A_eps">eps</code></td>
<td>
<p>width of the whiskars</p>
</td></tr>
<tr><td><code id="ciplotter_+3A_...">...</code></td>
<td>
<p>additional base plot arguments</p>
</td></tr>
</table>

<hr>
<h2 id='ind_excl'>Wrapper and scripts for indicator exclusion procedure</h2><span id='topic+ind_excl'></span>

<h3>Description</h3>

<p>For each item, correlation between the scale's sum scores and outcome is
calculated such that the particular item is excluded from the sum scores. Each of the
obtained correlations will then be compared with the original scale–outcome correlation
(sum score of all items). This comparison can be conducted with William's test for two
dependent correlations that share one variable (Steiger, 1980), using
<code><a href="psych.html#topic+r.test">r.test</a></code> from <span class="pkg">psych</span>. William's test characterises difference
between correlations with a p-value—a small p-value indicates that the tested
difference between correlations is unlikely to have happened by chance and could be
considered a real difference. Thus, each item will receive a p-value characterising
the 'significance' of difference between correlations—here called 'Significance Of
iNdicator Exclusion' (SONE). When one item is excluded, another round is begun
until no more items should be excluded.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ind_excl(indicators, indicators2 = vector(), outcome, covars = NULL,
  scalename = "scale", outcomename = "outcome",
  indicatornames = 1:ncol(indicators), pcrit, location1 = "topleft",
  location2 = "topright", draw = F, subset = vector(),
  coruse = "everything", multi = 1, verbose = F, ci = "estimate")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ind_excl_+3A_indicators">indicators</code></td>
<td>
<p>Set of numeric indicators (items) in a matrix.</p>
</td></tr>
<tr><td><code id="ind_excl_+3A_indicators2">indicators2</code></td>
<td>
<p>An additional set of indicators (e.g. informant-report )</p>
</td></tr>
<tr><td><code id="ind_excl_+3A_outcome">outcome</code></td>
<td>
<p>A numeric outcome vector. Indicators and outcome can be simulated with
<code><a href="#topic+scale_sim">scale_sim</a></code></p>
</td></tr>
<tr><td><code id="ind_excl_+3A_covars">covars</code></td>
<td>
<p>A data frame with covariates to take into account. The outcome is residualised for
these covariates. For instance, BMI was residualised for age, gender, and education in Vainik
et al. (2015) EJP.</p>
</td></tr>
<tr><td><code id="ind_excl_+3A_scalename">scalename</code></td>
<td>
<p>A string for labelling the scale</p>
</td></tr>
<tr><td><code id="ind_excl_+3A_outcomename">outcomename</code></td>
<td>
<p>A string for labelling the outcome</p>
</td></tr>
<tr><td><code id="ind_excl_+3A_indicatornames">indicatornames</code></td>
<td>
<p>An array of strings for labelling the outcome. Default to numbers
from 1 to n of indicators</p>
</td></tr>
<tr><td><code id="ind_excl_+3A_pcrit">pcrit</code></td>
<td>
<p>a p-value characterising the ‘significance’ of difference between
correlations—here called ‘significance of indicator exclusion’ (SONE). Look it up
from Table 2 in Vainik, Mõttus et al 2015, or simulate using
<code><a href="#topic+optimal_p">optimal_p</a></code> function</p>
</td></tr>
<tr><td><code id="ind_excl_+3A_location1">location1</code></td>
<td>
<p>Location for legends at left-side plot</p>
</td></tr>
<tr><td><code id="ind_excl_+3A_location2">location2</code></td>
<td>
<p>Location for legends at right-side plot</p>
</td></tr>
<tr><td><code id="ind_excl_+3A_draw">draw</code></td>
<td>
<p>TRUE plots the result to a .tiff file in the working directory.
Defaults to FALSE</p>
</td></tr>
<tr><td><code id="ind_excl_+3A_subset">subset</code></td>
<td>
<p>Allows exluding certain indicators from the start. Use numbers</p>
</td></tr>
<tr><td><code id="ind_excl_+3A_coruse">coruse</code></td>
<td>
<p>argument for function cor(). Defaults to 'everything', as
simulations have no missing data.</p>
</td></tr>
<tr><td><code id="ind_excl_+3A_multi">multi</code></td>
<td>
<p>influences cex of certain plot variables. Defaults to 1</p>
</td></tr>
<tr><td><code id="ind_excl_+3A_verbose">verbose</code></td>
<td>
<p>option for observing steps for debugging. Defaults to FALSE</p>
</td></tr>
<tr><td><code id="ind_excl_+3A_ci">ci</code></td>
<td>
<p>should output object and plot have 95
CI-s from  <code><a href="psych.html#topic+corr.test">corr.test</a></code>. If you insert a number (e.g., ci=5000), then the CI-s
are bootstrapped using <code><a href="psych.html#topic+cor.ci">cor.ci</a></code>. Any other string results in no CI-s.
r value in output matrix is taken from <code><a href="stats.html#topic+cor">cor</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Plots results using , using <code><a href="gplots.html#topic+barplot2">barplot2</a></code> from  <span class="pkg">gplots</span>.
Also returns scale-outcome correlation magnitude(s) and their comparison, if
appropriate
</p>


<h3>Examples</h3>

<pre><code class='language-R'>### Create a scale-outcome set that violates IOn_ Only 2 indicators out of 8
### relate to the outcome, the others just relate to the 2 indicators. This setting is
### similar to the N5: Impulsiveness - BMI association in Vainik et al (2015) EJP paper.
set.seed(466)
a&lt;-scale_sim(n=2500, to_n=2, tn_n=6)
# Last 2 indicators have considerably higher correlation with the outcome
ind_excl(a[[1]], outcome=a[[2]], pcrit=0.0037)

## boostrapped confidence intervals
ind_excl(a[[1]], outcome=a[[2]], pcrit=0.0037, ci=100)

# no confidence intervals
ind_excl(a[[1]], outcome=a[[2]], pcrit=0.0037, ci="no")

## include covariates in the model
covx=rnorm(2500)
covy=rnorm(2500)
outcome=a[[2]]+0.3*covx+0.4*covy
covars=data.frame(covx=covx, covy=covy)

# ind_excl() with covariates taken into account
ind_excl(a[[1]],outcome=outcome,covars=covars, pcrit=0.0037)

#effect sizes are lower when noisy covariatse are not accounted for
ind_excl(a[[1]],outcome=outcome, pcrit=0.0037)

# just a single covariate also needs to be in data frame

covx=rnorm(2500)
outcome=a[[2]]+0.3*covx
covars=data.frame(covx=covx)

ind_excl(a[[1]],outcome=outcome,covars=covars, pcrit=0.0037)

### Create a scale-outcome set that has ION, all 8 indicators relate to the outcome
set.seed(466)
b&lt;-scale_sim(n=2500, to_n=8, cor_to_outcome = 0.35)
# All indicators correlate largely on the same level with the outcome.
ind_excl(b[[1]], outcome=b[[2]], pcrit=1.7*10^-4)

#note that using cor_to_outcome=0.25, sometimes still indicators get wrongly flagged.
# Here, the method could probably be improved..

### Create a scale-outcome set that violates ION - only 1 indicator relates to the
### outcome. Include other-report.
set.seed(466)
c&lt;-scale_sim(n=2500, to_n=1, tn_n=7, indicators2=TRUE)
# Last indicator has considerably higher correlation with the outcome
ind_excl(c[[1]], c[[3]], outcome=c[[2]], pcrit=0.0037)
</code></pre>

<hr>
<h2 id='ind_excl_inc'>Incrementally calls ind_excl_step</h2><span id='topic+ind_excl_inc'></span>

<h3>Description</h3>

<p>See <code><a href="#topic+ind_excl">ind_excl</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ind_excl_inc(indicators, outcome, indicatornames = 1:ncol(indicators),
  pcrit = 0.05, verbose = F, coruse = "everything")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ind_excl_inc_+3A_indicators">indicators</code></td>
<td>
<p>Set of numeric indicators (items) in a matrix.</p>
</td></tr>
<tr><td><code id="ind_excl_inc_+3A_outcome">outcome</code></td>
<td>
<p>A numeric outcome vector. Indicators and outcome can be simulated with
<code><a href="#topic+scale_sim">scale_sim</a></code></p>
</td></tr>
<tr><td><code id="ind_excl_inc_+3A_indicatornames">indicatornames</code></td>
<td>
<p>An array of strings for labelling the outcome. Default to numbers
from 1 to n of indicators</p>
</td></tr>
<tr><td><code id="ind_excl_inc_+3A_pcrit">pcrit</code></td>
<td>
<p>a p-value characterising the ‘significance’ of difference between
correlations—here called ‘significance of indicator exclusion’ (SONE). Look it up
from Table 2 in Vainik, Mõttus et al 2015, or simulate using
<code><a href="#topic+optimal_p">optimal_p</a></code> function</p>
</td></tr>
<tr><td><code id="ind_excl_inc_+3A_verbose">verbose</code></td>
<td>
<p>option for observing steps for debugging. Defaults to FALSE</p>
</td></tr>
<tr><td><code id="ind_excl_inc_+3A_coruse">coruse</code></td>
<td>
<p>argument for function cor(). Defaults to 'everything', as
simulations have no missing data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Provides the results of a single step in indicator exclusion procedure. See example for details
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Create a scale-outcome set that violates ION. Only 2 last indicators out of 8
## relate to the outcome, the others just relate to the 2 indicators
set.seed(466)
a&lt;-scale_sim(n=2500, to_n=2, tn_n=6)
# run the exclusion procedure. Pcrit taken from Table 2 in Vainik et al., 2015,
# European Journal of Personality
res=ind_excl_inc(a[[1]],a[[2]], pcrit=0.0037)
# which indicators does the procedure exclude?
res

</code></pre>

<hr>
<h2 id='ind_excl_plot'>Plot indicator exlusion results with and without excluded indicators</h2><span id='topic+ind_excl_plot'></span>

<h3>Description</h3>

<p>Provides an overview of the indicator exclusion results. Marked(x) indicators are excluded in the indicator exclusion procedure. See <code><a href="#topic+ind_excl">ind_excl</a></code> for details.
</p>

<dl>
<dt>left</dt><dd><p>correlations between single indicator and outcome</p>
</dd>
<dt>right</dt><dd><p>correlations between sum-score and outcome with and without the marked indicators</p>
</dd>
</dl>



<h3>Usage</h3>

<pre><code class='language-R'>ind_excl_plot(indicators, indicators2 = vector(), outcome,
  scalename = "scale", outcomename = "outcome",
  indicatornames = 1:ncol(indicators), tagged = vector(),
  tagged2 = vector(), location1 = "topleft", location2 = "topright",
  pcrit = 0.05, multi = 1, coruse = "everything", ci = "estimate")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ind_excl_plot_+3A_indicators">indicators</code></td>
<td>
<p>Set of numeric indicators (items) in a matrix.</p>
</td></tr>
<tr><td><code id="ind_excl_plot_+3A_indicators2">indicators2</code></td>
<td>
<p>An additional set of indicators (e.g. informant-report )</p>
</td></tr>
<tr><td><code id="ind_excl_plot_+3A_outcome">outcome</code></td>
<td>
<p>A numeric outcome vector. Indicators and outcome can be simulated with
<code><a href="#topic+scale_sim">scale_sim</a></code></p>
</td></tr>
<tr><td><code id="ind_excl_plot_+3A_scalename">scalename</code></td>
<td>
<p>A string for labelling the scale</p>
</td></tr>
<tr><td><code id="ind_excl_plot_+3A_outcomename">outcomename</code></td>
<td>
<p>A string for labelling the outcome</p>
</td></tr>
<tr><td><code id="ind_excl_plot_+3A_indicatornames">indicatornames</code></td>
<td>
<p>An array of strings for labelling the outcome. Default to numbers
from 1 to n of indicators</p>
</td></tr>
<tr><td><code id="ind_excl_plot_+3A_tagged">tagged</code></td>
<td>
<p>items to be marked as excluded by the indicator exclusion procedure</p>
</td></tr>
<tr><td><code id="ind_excl_plot_+3A_tagged2">tagged2</code></td>
<td>
<p>same as 'tagged' for second scale (e.g., informant report)</p>
</td></tr>
<tr><td><code id="ind_excl_plot_+3A_location1">location1</code></td>
<td>
<p>Location for legends at left-side plot</p>
</td></tr>
<tr><td><code id="ind_excl_plot_+3A_location2">location2</code></td>
<td>
<p>Location for legends at right-side plot</p>
</td></tr>
<tr><td><code id="ind_excl_plot_+3A_pcrit">pcrit</code></td>
<td>
<p>a p-value characterising the ‘significance’ of difference between
correlations—here called ‘significance of indicator exclusion’ (SONE). Look it up
from Table 2 in Vainik, Mõttus et al 2015, or simulate using
<code><a href="#topic+optimal_p">optimal_p</a></code> function</p>
</td></tr>
<tr><td><code id="ind_excl_plot_+3A_multi">multi</code></td>
<td>
<p>influences cex of certain plot variables. Defaults to 1</p>
</td></tr>
<tr><td><code id="ind_excl_plot_+3A_coruse">coruse</code></td>
<td>
<p>argument for function cor(). Defaults to 'everything', as
simulations have no missing data.</p>
</td></tr>
<tr><td><code id="ind_excl_plot_+3A_ci">ci</code></td>
<td>
<p>should output object and plot have 95
CI-s from  <code><a href="psych.html#topic+corr.test">corr.test</a></code>. If you insert a number (e.g., ci=5000), then the CI-s
are bootstrapped using <code><a href="psych.html#topic+cor.ci">cor.ci</a></code>. Any other string results in no CI-s.
r value in output matrix is taken from <code><a href="stats.html#topic+cor">cor</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>See <code><a href="#topic+ind_excl">ind_excl</a></code>
</p>

<hr>
<h2 id='ind_excl_step'>One step in indicator exclusion procedure</h2><span id='topic+ind_excl_step'></span>

<h3>Description</h3>

<p>See <code><a href="#topic+ind_excl">ind_excl</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ind_excl_step(indicators, outcome, indicatornames = 1:ncol(indicators),
  exclude = vector(), coruse = "everything", round = F)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ind_excl_step_+3A_indicators">indicators</code></td>
<td>
<p>Set of numeric indicators (items) in a matrix.</p>
</td></tr>
<tr><td><code id="ind_excl_step_+3A_outcome">outcome</code></td>
<td>
<p>A numeric outcome vector. Indicators and outcome can be simulated with
<code><a href="#topic+scale_sim">scale_sim</a></code></p>
</td></tr>
<tr><td><code id="ind_excl_step_+3A_indicatornames">indicatornames</code></td>
<td>
<p>An array of strings for labelling the outcome. Default to numbers
from 1 to n of indicators</p>
</td></tr>
<tr><td><code id="ind_excl_step_+3A_exclude">exclude</code></td>
<td>
<p>Exclude an item excluded at previous step, e.g., as decided by <code><a href="#topic+ind_excl_inc">ind_excl_inc</a></code></p>
</td></tr>
<tr><td><code id="ind_excl_step_+3A_coruse">coruse</code></td>
<td>
<p>argument for function cor(). Defaults to 'everything', as
simulations have no missing data.</p>
</td></tr>
<tr><td><code id="ind_excl_step_+3A_round">round</code></td>
<td>
<p>Allows rounding of values in returned matrix.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Provides the results of a single step in indicator exclusion procedure. See example for
details
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Create a scale-outcome set that violates ION. Only 2 indicators out of 8 relate to
## the outcome, the others just relate to the 2 indicators
set.seed(466)
a&lt;-scale_sim(n=2500, to_n=2, tn_n=6)
res=ind_excl_step(a[[1]],a[[2]])
print(res)

# note that the p-values for upper items (7 &amp; 8 ) are much smaller than for the rest

#row number   indicator number
#r.test.t     t value of the r.test.
#t.test.p     p value of the r.test.
#cor_excl     correlation between outcome and sum-score when an item is excluded.
#cor_all      correlation between outcome and sum-score when all items are included
# (i.e., full scale).
#cor.excl_all correlation between two sum-scores.
</code></pre>

<hr>
<h2 id='optimal_p'>Find an optimal p-value for SONE</h2><span id='topic+optimal_p'></span>

<h3>Description</h3>

<p>a wrapper that runs the maximum and minimum scenarios using <code><a href="#topic+scenario_sim">scenario_sim</a></code> and provides the optimal p -value
</p>


<h3>Usage</h3>

<pre><code class='language-R'>optimal_p(sizes, n_sim = 100, plotting = "", n_indicators = 8,
  to_min = (round((n_indicators/2), 0)) - 1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="optimal_p_+3A_sizes">sizes</code></td>
<td>
<p>An array of sample sizes to be simulated. Can be single value.</p>
</td></tr>
<tr><td><code id="optimal_p_+3A_n_sim">n_sim</code></td>
<td>
<p>number of simulations. 1000 is a start, 10000 was used in paper, but takes a long time</p>
</td></tr>
<tr><td><code id="optimal_p_+3A_plotting">plotting</code></td>
<td>
<p>Plots the result with <code><a href="#topic+optimal_p_out">optimal_p_out</a></code>. Defaults to &rdquo;. Possible options: &rdquo; - no plot; 'yes' - a regular plot;  'file' &ndash; writes the plot to a tiff file in working directory. If sizes is a single value, plotting is disabled.</p>
</td></tr>
<tr><td><code id="optimal_p_+3A_n_indicators">n_indicators</code></td>
<td>
<p>How many many indicators are there in a scale. The package is tested with 8 indicators (default), but should work with other number.</p>
</td></tr>
<tr><td><code id="optimal_p_+3A_to_min">to_min</code></td>
<td>
<p>How many indicators relate to the outcome in the lack of ION condition. In <code><a href="#topic+optimal_p">optimal_p</a></code> defaults to (round((n_indicators/2),0)) - 1), i.e close to half the number of indicators.</p>
</td></tr>
<tr><td><code id="optimal_p_+3A_...">...</code></td>
<td>
<p>further tweaking of the scale simulator, see  <code><a href="#topic+scale_sim">scale_sim</a></code> for details.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the P criterion, as well as the p values for max and min scenario for each sample size. If min pvalue &gt; max pvalue, then p criterion is NA.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(466)
n_sim=100
ptm &lt;- proc.time()
a=optimal_p(sizes=750, n_sim=n_sim, n_indicators=8, cor_to_outcome=0.25)
stp=proc.time() - ptm
print(paste("Currently elapsed:",round(stp[3],1)))
print(paste("Time estimate for n_sim=5000:",round(stp[3]*5000/n_sim,1)))

</code></pre>

<hr>
<h2 id='optimal_p_out'>Table and plot the SONE values</h2><span id='topic+optimal_p_out'></span>

<h3>Description</h3>

<p>Takes max and min scenarious and produces a table and optionally a plot.
See <code><a href="#topic+scenario_sim">scenario_sim</a></code> or <code><a href="#topic+optimal_p">optimal_p</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>optimal_p_out(scenario_max, scenario_min, sizes, n_sim, to_min, plotting = "",
  multi = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="optimal_p_out_+3A_scenario_max">scenario_max</code></td>
<td>
<p>SONE data from <code><a href="#topic+scenario_sim">scenario_sim</a></code> output</p>
</td></tr>
<tr><td><code id="optimal_p_out_+3A_scenario_min">scenario_min</code></td>
<td>
<p>SONE data from <code><a href="#topic+scenario_sim">scenario_sim</a></code> output</p>
</td></tr>
<tr><td><code id="optimal_p_out_+3A_sizes">sizes</code></td>
<td>
<p>An array of sample sizes to be simulated. Can be single value.</p>
</td></tr>
<tr><td><code id="optimal_p_out_+3A_n_sim">n_sim</code></td>
<td>
<p>number of simulations. 1000 is a start, 10000 was used in paper, but takes a long time</p>
</td></tr>
<tr><td><code id="optimal_p_out_+3A_to_min">to_min</code></td>
<td>
<p>How many indicators relate to the outcome in the lack of ION condition. In <code><a href="#topic+optimal_p">optimal_p</a></code> defaults to (round((n_indicators/2),0)) - 1), i.e close to half the number of indicators.</p>
</td></tr>
<tr><td><code id="optimal_p_out_+3A_plotting">plotting</code></td>
<td>
<p>Plots the result with <code><a href="#topic+optimal_p_out">optimal_p_out</a></code>. Defaults to &rdquo;. Possible options: &rdquo; - no plot; 'yes' - a regular plot;  'file' &ndash; writes the plot to a tiff file in working directory. If sizes is a single value, plotting is disabled.</p>
</td></tr>
<tr><td><code id="optimal_p_out_+3A_multi">multi</code></td>
<td>
<p>influences cex of certain plot variables. Defaults to 1</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(466)
sizes=c(500,1000)
n_sim=50  #  make bigger for more accurate estimates..
to_n=8
cor_to_outcome=0.25
ptm &lt;- proc.time()  # timing
# takes a few seconds..
scen1=scenario_sim(sizes=sizes,n_sim=n_sim,to_n=to_n, cor_to_outcome=cor_to_outcome)
proc.time() - ptm
ptm &lt;- proc.time()
# A scenario with 3 out of 8 items relating to outcome, 3 different samples
to_n=3
scen2=scenario_sim(sizes=sizes,n_sim=n_sim,to_n=to_n, cor_to_outcome=cor_to_outcome)
proc.time() - ptm

optimal_p_out(scen1[[1]],scen2[[1]],sizes = sizes,n_sim=n_sim,to_min = to_n, plot='yes', multi=1)

# Should be equivalent. Some variation can be expected when n_sim is below 1000
ptm &lt;- proc.time()
a=optimal_p(sizes=sizes, n_sim=n_sim, n_indicators=8, plotting='yes', cor_to_outcome=cor_to_outcome)
proc.time() - ptm
print(a[[1]])
</code></pre>

<hr>
<h2 id='scale_sim'>Simulate personality scale(s) and an outcome</h2><span id='topic+scale_sim'></span>

<h3>Description</h3>

<p>Simulates a personality scale which correlates to an outcome. The function can specify
the number of indicators (i.e. indicators) truly relating to the outcome. Also, the
function can create a secondary scale, for instance mimicing informant-report
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scale_sim(n, to_n, tn_n = 0, indicators2 = FALSE, cor_to_tn = 0.3,
  cor_to_outcome = 0.4, to_min = 0.4, to_max = 0.7, tn_min = 0.4,
  tn_max = 0.7, n.cat = 5, sdev = 0.8)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="scale_sim_+3A_n">n</code></td>
<td>
<p>Number of participants</p>
</td></tr>
<tr><td><code id="scale_sim_+3A_to_n">to_n</code></td>
<td>
<p>Number of indicators in a Trait relating to Outcome</p>
</td></tr>
<tr><td><code id="scale_sim_+3A_tn_n">tn_n</code></td>
<td>
<p>Number of indicators in a Trait Not relating to outcome.</p>
</td></tr>
<tr><td><code id="scale_sim_+3A_indicators2">indicators2</code></td>
<td>
<p>if TRUE, a secondary set of indicators is created, e.g. to mimic informant-report. Defaults to FALSE</p>
</td></tr>
<tr><td><code id="scale_sim_+3A_cor_to_tn">cor_to_tn</code></td>
<td>
<p>Correlation between to and tn. Defaults to 0.3</p>
</td></tr>
<tr><td><code id="scale_sim_+3A_cor_to_outcome">cor_to_outcome</code></td>
<td>
<p>correlation between to and outcome. Defaults to 0.4</p>
</td></tr>
<tr><td><code id="scale_sim_+3A_to_min">to_min</code></td>
<td>
<p>minimum factor loading for to_n. Defaults to 0.4</p>
</td></tr>
<tr><td><code id="scale_sim_+3A_to_max">to_max</code></td>
<td>
<p>maximum factor loading for to_n. Defaults to 0.7</p>
</td></tr>
<tr><td><code id="scale_sim_+3A_tn_min">tn_min</code></td>
<td>
<p>minimum factor loading for tn_n. Defaults to 0.4</p>
</td></tr>
<tr><td><code id="scale_sim_+3A_tn_max">tn_max</code></td>
<td>
<p>maximum factor loading for tn_n. Defaults to 0.7</p>
</td></tr>
<tr><td><code id="scale_sim_+3A_n.cat">n.cat</code></td>
<td>
<p>number of response options. when you go larger than 5, update the
standard deviation as well. Defaults to 5</p>
</td></tr>
<tr><td><code id="scale_sim_+3A_sdev">sdev</code></td>
<td>
<p>standard deviation. Defaults to 0.8</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list object, first object is indicators' matrix and second object is outcome
vector. If indicators2=TRUE, then a third object is added, which is the  secondary
indicators' matrix.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Create a scale-outcome set that violates ION. Only 2 indicators out of 8 relate
## to the outcome, the others just relate to the 2 indicators This setting is similar
## to the N5: Impulsiveness - BMI association in Vainik et al (2015) EJP paper.
set.seed(466)
a&lt;-scale_sim(n=2500, to_n=2, tn_n=6)
# Last 2 indicators have considerably higher correlation with the outcome
cor(a[[1]],a[[2]])

## Create a scale-outcome set that has ION, all 8 indicators relate to the outcome
set.seed(466)
b&lt;-scale_sim(n=2500, to_n=8)
# All indicators correlate largely on the same level with the outcome.
cor(b[[1]],b[[2]])

## Create a scale-outcome set that violates ION - only 1 indicator relates to
##the outcome. Include other-report.
set.seed(466)
c&lt;-scale_sim(n=2500, to_n=1, tn_n=7, indicators2=TRUE)
# Last 2 indicators have considerably higher correlation with the outcome
cor(c[[1]],c[[2]])
cor(c[[3]],c[[2]])
</code></pre>

<hr>
<h2 id='scenario_plot'>Plot scenario simulation results</h2><span id='topic+scenario_plot'></span><span id='topic+scenario_plot80'></span>

<h3>Description</h3>

<p>Plots the results like in Study 1 of the Vainik et al. paper an overview of the indicator exclusion results. Starred indicators are excluded in the indicator exclusion procedure. See <code><a href="#topic+scenario_sim">scenario_sim</a></code> for details. NB! Scenario with no ION violations needs <em>scenario_plot80()</em>
See  <code><a href="#topic+scenario_sim">scenario_sim</a></code> for examples
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scenario_plot(dat, sizes, n_sim, to_n, tn_n = 8 - to_n, multi = 1,
  jitter = 0.05, letter = "", ...)

scenario_plot80(dat, sizes, n_sim, multi = 1, letter = "", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="scenario_plot_+3A_dat">dat</code></td>
<td>
<p>simulated data</p>
</td></tr>
<tr><td><code id="scenario_plot_+3A_sizes">sizes</code></td>
<td>
<p>An array of sample sizes to be simulated. Can be single value.</p>
</td></tr>
<tr><td><code id="scenario_plot_+3A_n_sim">n_sim</code></td>
<td>
<p>number of simulations. 1000 is a start, 10000 was used in paper, but takes a long time</p>
</td></tr>
<tr><td><code id="scenario_plot_+3A_to_n">to_n</code></td>
<td>
<p>Number of indicators in a Trait relating to Outcome</p>
</td></tr>
<tr><td><code id="scenario_plot_+3A_tn_n">tn_n</code></td>
<td>
<p>Number of indicators in a Trait Not relating to outcome.</p>
</td></tr>
<tr><td><code id="scenario_plot_+3A_multi">multi</code></td>
<td>
<p>influences cex of certain plot variables.</p>
</td></tr>
<tr><td><code id="scenario_plot_+3A_jitter">jitter</code></td>
<td>
<p>Avoid overalp between lines</p>
</td></tr>
<tr><td><code id="scenario_plot_+3A_letter">letter</code></td>
<td>
<p>assigns plot a letter, useful for combining multiple plots</p>
</td></tr>
<tr><td><code id="scenario_plot_+3A_...">...</code></td>
<td>
<p>additional options for axis</p>
</td></tr>
</table>


<h3>Functions</h3>


<ul>
<li> <p><code>scenario_plot80</code>: For plotting scenarios where ION is not violated
</p>
</li></ul>

<hr>
<h2 id='scenario_sim'>Simulate SONE values for scenario.</h2><span id='topic+scenario_sim'></span>

<h3>Description</h3>

<p>A wrapper that takes a scenario, and produces the Significance Of iNdicator Exclusion (SONE) values for each exclusion and calculates efficacy. Used by  <code><a href="#topic+optimal_p">optimal_p</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scenario_sim(sizes, n_sim, to_n, tn_n = 8 - to_n, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="scenario_sim_+3A_sizes">sizes</code></td>
<td>
<p>An array of sample sizes to be simulated. Can be single value.</p>
</td></tr>
<tr><td><code id="scenario_sim_+3A_n_sim">n_sim</code></td>
<td>
<p>number of simulations. 1000 is a start, 10000 was used in paper, but takes a long time</p>
</td></tr>
<tr><td><code id="scenario_sim_+3A_to_n">to_n</code></td>
<td>
<p>Number of indicators in a Trait relating to Outcome</p>
</td></tr>
<tr><td><code id="scenario_sim_+3A_tn_n">tn_n</code></td>
<td>
<p>Number of indicators in a Trait Not relating to outcome.</p>
</td></tr>
<tr><td><code id="scenario_sim_+3A_...">...</code></td>
<td>
<p>further tweaking of the scale simulator, see  <code><a href="#topic+scale_sim">scale_sim</a></code> for details.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list of SONE values and related efficacy. See example for details
</p>

<ol>
<li><p> SONE results. Feed this to  <code><a href="#topic+scenario_plot">scenario_plot</a></code> or <code><a href="#topic+scenario_plot80">scenario_plot80</a></code> (see examples)
</p>
</li>
<li><p> Summary efficacy. Such data comprises Table 1 in Vainik, Mottus et al., 2015 EJP
</p>
</li>
<li><p> Full efficacy data.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>
#A scenario with 8 items relating to outcome, testing 2 different samples
sizes=c(250,500)
n_sim=100
to_n=8
scen1=scenario_sim(sizes,n_sim,to_n)  # takes a few seconds..
scenario_plot80(scen1[[1]],sizes,n_sim)

# A scenario with 2 out of 8 items relating to outcome, 2 different samples
to_n=2
scen2=scenario_sim(sizes,n_sim,to_n)  # takes a few seconds..
scenario_plot(scen2[[1]],sizes,n_sim,to_n)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
