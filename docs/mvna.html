<!DOCTYPE html><html lang="en"><head><title>Help for package mvna</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mvna}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#abortion'><p>Pregnancies exposed to coumarin derivatives</p></a></li>
<li><a href='#lines.mvna'>
<p>Lines method for 'mvna' objects</p></a></li>
<li><a href='#mvna'><p>Nelson-Aalen estimator in multistate models</p></a></li>
<li><a href='#plot.mvna'><p>Plot method for a mvna object</p></a></li>
<li><a href='#predict.mvna'><p> Calculates Nelson-Aalen estimates at specified time-points</p></a></li>
<li><a href='#print.mvna'><p> Print method for 'mvna' object</p></a></li>
<li><a href='#sir.adm'><p>Pneumonia on admission in intenive care unit patients</p></a></li>
<li><a href='#sir.cont'><p>Ventilation status in intensive care unit patients</p></a></li>
<li><a href='#summary.mvna'>
<p>Summary method for objects of class 'mvna'</p></a></li>
<li><a href='#xyplot.mvna'><p> Panel plots for object of class 'mvna'</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Nelson-Aalen Estimator of the Cumulative Hazard in Multistate
Models</td>
</tr>
<tr>
<td>Version:</td>
<td>2.0.1</td>
</tr>
<tr>
<td>Author:</td>
<td>Arthur Allignol</td>
</tr>
<tr>
<td>Description:</td>
<td>Computes the Nelson-Aalen estimator of the cumulative transition hazard for arbitrary Markov multistate models &lt;ISBN:978-0-387-68560-1&gt;. </td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Arthur Allignol &lt;arthur.allignol@gmail.com&gt;</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Imports:</td>
<td>lattice</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2017-09-11 20:37:17 UTC; arthur</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2017-09-11 23:21:40 UTC</td>
</tr>
</table>
<hr>
<h2 id='abortion'>Pregnancies exposed to coumarin derivatives</h2><span id='topic+abortion'></span>

<h3>Description</h3>

<p>Outcomes of pregnancies exposed to coumarin derivatives. The aim is to
investigate whether exposition to coumarin derivatives increases the
probability of spontaneous abortions. Apart from spontaneous abortion,
pregnancy may end in induced abortion or live birth. Moreover, data
are left-truncated as women usually enter the study several weeks
after conception.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(abortion)</code></pre>


<h3>Format</h3>

<p>A data frame with 1186 observations on the following 5 variables.
</p>

<dl>
<dt><code>id</code></dt><dd><p>Identification number</p>
</dd>
<dt><code>entry</code></dt><dd><p>Entry times into the cohort</p>
</dd>
<dt><code>exit</code></dt><dd><p>Event times</p>
</dd>
<dt><code>group</code></dt><dd><p>Group. 0: control, 1: exposed to coumarin
derivatives</p>
</dd>
<dt><code>cause</code></dt><dd><p>Cause of failure. 1: induced abortion, 2: life
birth, 3: spontaneous abortion</p>
</dd>
</dl>



<h3>Source</h3>

<p>Meiester, R. and Schaefer, C (2008). Statistical methods for
estimating the probability of spontaneous abortion in observational
studies &ndash; Analyzing pregnancies exposed to coumarin
derivatives. Reproductive Toxicology, 26, 31&ndash;35
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(abortion)
</code></pre>

<hr>
<h2 id='lines.mvna'>
Lines method for 'mvna' objects
</h2><span id='topic+lines.mvna'></span>

<h3>Description</h3>

<p>Lines method for <code>mvna</code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mvna'
lines(x, tr.choice, col = 1, lty, conf.int = FALSE,
      level = 0.95, var.type = c("aalen", "greenwood"),
      ci.fun = c("log", "linear", "arcsin"), ci.col = col,
      ci.lty = 3, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="lines.mvna_+3A_x">x</code></td>
<td>
<p>An object of class <code>mvna</code>.</p>
</td></tr>
<tr><td><code id="lines.mvna_+3A_tr.choice">tr.choice</code></td>
<td>
<p>A character vector of the form <code>c("from to",
      "from to")</code> specifying which transitions should be displayed.
By default, all the transition hazards are plotted.</p>
</td></tr>
<tr><td><code id="lines.mvna_+3A_col">col</code></td>
<td>
<p>A vector of colours. Default is black.</p>
</td></tr>
<tr><td><code id="lines.mvna_+3A_lty">lty</code></td>
<td>
<p>A vector of line types. Default is 1:number of
transitions.</p>
</td></tr>
<tr><td><code id="lines.mvna_+3A_conf.int">conf.int</code></td>
<td>
<p>Logical. Indicates whether to display pointwise
confidence interval. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="lines.mvna_+3A_level">level</code></td>
<td>
<p>Level of the confidence interval. Default is 0.95.</p>
</td></tr>
<tr><td><code id="lines.mvna_+3A_var.type">var.type</code></td>
<td>
<p>Specifies the variance estimator that should be used
to compute the confidence interval. One of &quot;aalen&quot; or
&quot;greenwood&quot;. Default is &quot;aalen&quot;.</p>
</td></tr>
<tr><td><code id="lines.mvna_+3A_ci.fun">ci.fun</code></td>
<td>
<p>Specifies the transformation applied to the confidence
interval. Choices are &quot;linear&quot;, &quot;log&quot;, &quot;arcsin&quot;. Default is &quot;log&quot;.</p>
</td></tr>
<tr><td><code id="lines.mvna_+3A_ci.col">ci.col</code></td>
<td>
<p>Colours of the confidence interval lines. By default,
<code>ci.col</code> equals <code>col</code>.</p>
</td></tr>
<tr><td><code id="lines.mvna_+3A_ci.lty">ci.lty</code></td>
<td>
<p>Line types for the confidence intervals. Default is 3.</p>
</td></tr>
<tr><td><code id="lines.mvna_+3A_...">...</code></td>
<td>
<p>Further arguments for <code>lines</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No value returned.
</p>


<h3>Author(s)</h3>

<p>Arthur Allignol, <a href="mailto:arthur.allignol@gmail.com">arthur.allignol@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mvna">mvna</a></code>, <code><a href="#topic+plot.mvna">plot.mvna</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(sir.adm)

## data set transformation
data(sir.adm) 
id &lt;- sir.adm$id
from &lt;- sir.adm$pneu
to &lt;- ifelse(sir.adm$status==0,"cens",sir.adm$status+1)
times &lt;- sir.adm$time
dat.sir &lt;- data.frame(id,from,to,time=times)

## Possible transitions
tra &lt;- matrix(ncol=4,nrow=4,FALSE)
tra[1:2,3:4] &lt;- TRUE

na.pneu &lt;- mvna(dat.sir,c("0","1","2","3"),
                tra,"cens")

plot(na.pneu, tr.choice = c("0 2"), conf.int = TRUE,
     col = 1, lty = 1, legend = FALSE)

lines(na.pneu, tr.choice = c("1 2"), conf.int = TRUE,
      col = 2, lty = 1)
</code></pre>

<hr>
<h2 id='mvna'>Nelson-Aalen estimator in multistate models </h2><span id='topic+mvna'></span>

<h3>Description</h3>

<p>This function computes the multivariate Nelson-Aalen estimator of
the cumulative transition hazards in multistate models, that is,
for each possible transition, it computes an estimate of
the cumulative hazard.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mvna(data, state.names, tra, cens.name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mvna_+3A_data">data</code></td>
<td>
<p> A data.frame of the form data.frame(id,from,to,time)
or (id,from,to,entry,exit)
</p>

<dl>
<dt>id:</dt><dd><p>patient id</p>
</dd>
<dt>from:</dt><dd><p>the state from where the transition occurs</p>
</dd>
<dt>to:</dt><dd><p>the state to which a transition occurs</p>
</dd>
<dt>time:</dt><dd><p>time when a transition occurs</p>
</dd>
<dt>entry:</dt><dd><p>entry time in a state</p>
</dd>
<dt>exit:</dt><dd><p>exit time from a state</p>
</dd>
</dl>

<p>This data.frame is transition-oriented, <em>i.e.</em> it contains one
row per transition, and possibly several rows per patient. Specifying
an entry and exit time permits to take into account left-truncation.</p>
</td></tr>
<tr><td><code id="mvna_+3A_state.names">state.names</code></td>
<td>
<p> A vector of character giving the states names. </p>
</td></tr>
<tr><td><code id="mvna_+3A_tra">tra</code></td>
<td>
<p>A quadratic matrix of logical values describing the possible
transitions within the multistate model. </p>
</td></tr>
<tr><td><code id="mvna_+3A_cens.name">cens.name</code></td>
<td>
<p> A character giving the code for censored
observations in the column <code>to</code> of <code>data</code>. If there is no
censored observations in your data, put <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This functions computes the Nelson-Aalen estimator as described in
Anderson et al. (1993), along with the two variance estimators
described in eq. (4.1.6) and (4.1.7) of Andersen et al. (1993) at each
transition time.
</p>


<h3>Value</h3>

<p>Returns a list named after the possible transitions, <em>e.g.</em> if we
define a multistate model with two possible transitions: from state 0 to
state 1, and from state 0 to state 2, the returned list will have two
parts named &quot;0 1&quot; and &quot;0 2&quot;. Each part contains a data.frame with
columns:
</p>
<table role = "presentation">
<tr><td><code>na</code></td>
<td>
<p>Nelson-Aalen estimates at each transition times.</p>
</td></tr>
<tr><td><code>var.aalen</code></td>
<td>
<p>Variance estimator given in eq. (4.1.6) of Andersen et
al. (1993).</p>
</td></tr>
<tr><td><code>var.greenwood</code></td>
<td>
<p>Variance estimator given in eq. (4.1.7) of Andersen et
al. (1993).</p>
</td></tr>
<tr><td><code>time</code></td>
<td>
<p>The transition times.</p>
</td></tr>
</table>
<p>The list also contains:
</p>
<table role = "presentation">
<tr><td><code>time</code></td>
<td>
<p>All the event times.</p>
</td></tr>
<tr><td><code>n.risk</code></td>
<td>
<p>A matrix giving the number at individual at risk in the
transient states just before an event.</p>
</td></tr>
<tr><td><code>n.event</code></td>
<td>
<p>An array which gives the number of transitions at each
event times.</p>
</td></tr>
<tr><td><code>n.cens</code></td>
<td>
<p>A matrix giving the number a censored observations at each
event times.</p>
</td></tr>
<tr><td><code>state.names</code></td>
<td>
<p> The same as in the function call.</p>
</td></tr>
<tr><td><code>cens.name</code></td>
<td>
<p>The same as in the function call.</p>
</td></tr>
<tr><td><code>trans</code></td>
<td>
<p>A data frame, with columns <code>from</code> and <code>to</code>, that gives
the possible transitions.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>The variance estimator (4.1.6) may overestimate the true variance, and
the one defined eq. (4.1.7) may underestimate the true variance (see
Klein (1991) and Andersen et al. (example IV.1.1, 1993)), especially
with small sample set. Klein (1991) recommends the use of the variance
estimator of eq. (4.1.6, &quot;aalen&quot;) because he found it to be less biased.
</p>


<h3>Author(s)</h3>

<p>Arthur Allignol, <a href="mailto:arthur.allignol@gmail.com">arthur.allignol@gmail.com</a></p>


<h3>References</h3>

<p>Andersen, P.K., Borgan, O., Gill, R.D. and Keiding,
N. (1993). <em>Statistical models based on counting
processes</em>. Springer Series in Statistics. New York, NY: Springer.
</p>
<p>Beyersmann J, Allignol A, Schumacher M: Competing Risks and Multistate
Models with R (Use R!), Springer Verlag, 2012 (Use R!)
</p>
<p>Klein, J.P. Small sample moments of some estimators of the variance
of the Kaplan-Meier and Nelson-Aalen estimators. <em>Scandinavian
Journal of Statistics</em>, 18:333&ndash;340, 1991.</p>


<h3>See Also</h3>

<p><code><a href="#topic+sir.adm">sir.adm</a></code>,<code><a href="#topic+sir.cont">sir.cont</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>data(sir.cont)

# Modification for patients entering and leaving a state
# at the same date
sir.cont &lt;- sir.cont[order(sir.cont$id, sir.cont$time), ]
for (i in 2:nrow(sir.cont)) {
  if (sir.cont$id[i]==sir.cont$id[i-1]) {
    if (sir.cont$time[i]==sir.cont$time[i-1]) {
      sir.cont$time[i-1] &lt;- sir.cont$time[i-1] - 0.5
    }
  }
}

# Matrix of logical giving the possible transitions
tra &lt;- matrix(ncol=3,nrow=3,FALSE)
tra[1, 2:3] &lt;- TRUE
tra[2, c(1, 3)] &lt;- TRUE

# Computation of the Nelson-Aalen estimates
na &lt;- mvna(sir.cont,c("0","1","2"),tra,"cens")

# plot
if (require(lattice))
xyplot(na)

### example with left-truncation
data(abortion)

# Data set modification in order to be used by mvna
names(abortion) &lt;- c("id", "entry", "exit", "from", "to")
abortion$to &lt;- abortion$to + 1

## computation of the matrix giving the possible transitions
tra &lt;- matrix(FALSE, nrow = 5, ncol = 5)
tra[1:2, 3:5] &lt;- TRUE

na.abortion &lt;- mvna(abortion, as.character(0:4), tra, NULL)

plot(na.abortion, tr.choice = c("0 4", "1 4"),
     curvlab = c("Control", "Exposed"),
     bty = "n", legend.pos = "topleft")
</code></pre>

<hr>
<h2 id='plot.mvna'>Plot method for a mvna object</h2><span id='topic+plot.mvna'></span>

<h3>Description</h3>

<p>Plot method for an object of class <code>mvna</code>. This function plots
estimates of the cumulative transition hazards in one panel. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mvna'
plot(x, tr.choice, xlab = "Time",
     ylab = "Cumulative Hazard", col = 1, lty, xlim, ylim,
     conf.int = FALSE, level = 0.95,
     var.type = c("aalen", "greenwood"),
     ci.fun = c("log", "linear", "arcsin"),
     ci.col = col, ci.lty = 3,
     legend = TRUE, legend.pos, curvlab, legend.bty = "n", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.mvna_+3A_x">x</code></td>
<td>
<p>An object of class <code>mvna</code>.</p>
</td></tr>
<tr><td><code id="plot.mvna_+3A_tr.choice">tr.choice</code></td>
<td>
<p>A character vector of the form <code>c("from to","from
    to")</code> specifying which transitions should be plotted. Default, all
the cumulative transition hazards are plotted.</p>
</td></tr>
<tr><td><code id="plot.mvna_+3A_xlab">xlab</code></td>
<td>
<p>x-axis label. Default is &quot;Time&quot;.</p>
</td></tr>
<tr><td><code id="plot.mvna_+3A_ylab">ylab</code></td>
<td>
<p>y-axis label. Default is &quot;Cumulative Hazard&quot;.</p>
</td></tr>
<tr><td><code id="plot.mvna_+3A_col">col</code></td>
<td>
<p>Vector of colour. Default is black.</p>
</td></tr>
<tr><td><code id="plot.mvna_+3A_lty">lty</code></td>
<td>
<p>Vector of line type. Default is 1:number of transitions</p>
</td></tr>
<tr><td><code id="plot.mvna_+3A_xlim">xlim</code></td>
<td>
<p>Limits of x-axis for the plot</p>
</td></tr>
<tr><td><code id="plot.mvna_+3A_ylim">ylim</code></td>
<td>
<p>Limits of y-axis for the plot</p>
</td></tr>
<tr><td><code id="plot.mvna_+3A_conf.int">conf.int</code></td>
<td>
<p>Logical. Whether to display pointwise confidence
intervals. Default is FALSE.</p>
</td></tr>
<tr><td><code id="plot.mvna_+3A_level">level</code></td>
<td>
<p>Level of the pointwise confidence intervals. Default is
0.95.</p>
</td></tr>
<tr><td><code id="plot.mvna_+3A_var.type">var.type</code></td>
<td>
<p>A character vector specifying the variance that
should be used to compute the pointwise confidence
intervals. Choices are &quot;aalen&quot; or &quot;greenwood&quot;. Default is &quot;aalen&quot;.</p>
</td></tr>
<tr><td><code id="plot.mvna_+3A_ci.fun">ci.fun</code></td>
<td>
<p>One of &quot;log&quot;, &quot;linear&quot; or &quot;arcsin&quot;. Indicates which
transformation to apply to the confidence intervals.</p>
</td></tr>
<tr><td><code id="plot.mvna_+3A_ci.col">ci.col</code></td>
<td>
<p>Colour for the confidence intervals. By default, the
colour specified by <code>col</code> is used.</p>
</td></tr>
<tr><td><code id="plot.mvna_+3A_ci.lty">ci.lty</code></td>
<td>
<p>Line type for the confidence intervals. Default is 3.</p>
</td></tr>
<tr><td><code id="plot.mvna_+3A_legend">legend</code></td>
<td>
<p>A logical specifying if a legend should be added</p>
</td></tr>
<tr><td><code id="plot.mvna_+3A_legend.pos">legend.pos</code></td>
<td>
<p>A vector giving the legend's position. See
<code><a href="graphics.html#topic+legend">legend</a></code> for further details.</p>
</td></tr>
<tr><td><code id="plot.mvna_+3A_curvlab">curvlab</code></td>
<td>
<p>A character or expression vector to appear in the
legend. Default is the name of the transitions.</p>
</td></tr>
<tr><td><code id="plot.mvna_+3A_legend.bty">legend.bty</code></td>
<td>
<p>Box type for the legend.</p>
</td></tr>
<tr><td><code id="plot.mvna_+3A_...">...</code></td>
<td>
<p>Further arguments for plot method.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This plot method permits to draw several cumulative transition hazards
on the same panel.
</p>


<h3>Value</h3>

<p>No value returned
</p>


<h3>Author(s)</h3>

<p>Arthur Allignol <a href="mailto:arthur.allignol@gmail.com">arthur.allignol@gmail.com</a></p>


<h3>See Also</h3>

<p><code><a href="#topic+mvna">mvna</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>data(sir.cont)

# Modification for patients entering and leaving a state
# at the same date
sir.cont &lt;- sir.cont[order(sir.cont$id, sir.cont$time), ]
for (i in 2:nrow(sir.cont)) {
  if (sir.cont$id[i]==sir.cont$id[i-1]) {
    if (sir.cont$time[i]==sir.cont$time[i-1]) {
      sir.cont$time[i-1] &lt;- sir.cont$time[i-1] - 0.5
    }
  }
}

tra &lt;- matrix(ncol=3,nrow=3,FALSE)
tra[1, 2:3] &lt;- TRUE
tra[2, c(1, 3)] &lt;- TRUE

na.cont &lt;- mvna(sir.cont,c("0","1","2"),tra,"cens")

plot(na.cont, tr.choice=c("0 2", "1 2"))
</code></pre>

<hr>
<h2 id='predict.mvna'> Calculates Nelson-Aalen estimates at specified time-points </h2><span id='topic+predict.mvna'></span>

<h3>Description</h3>

<p>This function gives the Nelson-Aalen estimates at time-points
specified by the user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mvna'
predict(object, times, tr.choice, level = 0.95,
        var.type = c("aalen", "greenwood"),
        ci.fun = c("log", "linear", "arcsin"), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict.mvna_+3A_object">object</code></td>
<td>
<p>An object of class <code>mvna</code></p>
</td></tr>
<tr><td><code id="predict.mvna_+3A_times">times</code></td>
<td>
<p>Time-points at which one wants the estimates</p>
</td></tr>
<tr><td><code id="predict.mvna_+3A_tr.choice">tr.choice</code></td>
<td>
<p>A vector of character giving for which transitions
one wants estimates. By default, the function will give the
Nelson-Aalen estimates for all transitions.</p>
</td></tr>
<tr><td><code id="predict.mvna_+3A_level">level</code></td>
<td>
<p>Level of the pointwise confidence intervals. Default is
0.95.</p>
</td></tr>
<tr><td><code id="predict.mvna_+3A_var.type">var.type</code></td>
<td>
<p>Variance estimator displayed and used to compute the
pointwise confidence intervals. One of &quot;aalen&quot; or &quot;greenwood&quot;. Default
is &quot;aalen&quot;.</p>
</td></tr>
<tr><td><code id="predict.mvna_+3A_ci.fun">ci.fun</code></td>
<td>
<p>Which transformation to apply for the confidence
intervals. Choices are &quot;linear&quot;, &quot;log&quot; or &quot;arcsin&quot;. Default is &quot;log&quot;.</p>
</td></tr>
<tr><td><code id="predict.mvna_+3A_...">...</code></td>
<td>
<p>Other arguments to predict</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list named after the possible transitions, <em>e.g.</em> if we
define a multistate model with two possible transitions: from state 0 to
state 1, and from state 0 to state 2, the returned list will have two
parts named &quot;0 1&quot; and &quot;0 2&quot;. Each part contains a data.frame with
columns:
</p>
<table role = "presentation">
<tr><td><code>times</code></td>
<td>
<p>Time points specified by the user.</p>
</td></tr>
<tr><td><code>na</code></td>
<td>
<p>Nelson-Aalen estimates at the specified times.</p>
</td></tr>
<tr><td><code>var.aalen or var.greenwood</code></td>
<td>
<p>Depending on what was specified in
<code>var.type</code>.</p>
</td></tr>
<tr><td><code>lower</code></td>
<td>
<p>Lower bound of the pointwise confidence intervals.</p>
</td></tr>
<tr><td><code>upper</code></td>
<td>
<p>Upper bound.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p> Arthur Allignol, <a href="mailto:arthur.allignol@gmail.com">arthur.allignol@gmail.com</a> </p>


<h3>References</h3>

<p> Andersen, P.K., Borgan, O., Gill, R.D. and Keiding,
N. (1993). <em>Statistical models based on counting
processes</em>. Springer Series in Statistics. New York, NY: Springer.</p>


<h3>See Also</h3>

<p><code><a href="#topic+mvna">mvna</a></code>, <code><a href="#topic+summary.mvna">summary.mvna</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>data(sir.cont)

# Modification for patients entering and leaving a state
# at the same date
sir.cont &lt;- sir.cont[order(sir.cont$id, sir.cont$time), ]
for (i in 2:nrow(sir.cont)) {
  if (sir.cont$id[i]==sir.cont$id[i-1]) {
    if (sir.cont$time[i]==sir.cont$time[i-1]) {
      sir.cont$time[i-1] &lt;- sir.cont$time[i-1] - 0.5
    }
  }
}

# Matrix of logical giving the possible transitions
tra &lt;- matrix(ncol=3,nrow=3,FALSE)
tra[1, 2:3] &lt;- TRUE
tra[2, c(1, 3)] &lt;- TRUE

# Computation of the Nelson-Aalen estimates
na &lt;- mvna(sir.cont,c("0","1","2"),tra,"cens")

# Using predict
predict(na,times=c(1,5,10,15))
</code></pre>

<hr>
<h2 id='print.mvna'> Print method for 'mvna' object </h2><span id='topic+print.mvna'></span>

<h3>Description</h3>

<p>Print method for an object of class <code>mvna</code>. It prints estimates of
the cumulative hazard along with estimates of the variance described
in eq. (4.1.6) and (4.1.7) of Andersen et al. (1993) at several
time points obtained with the <code>quantile</code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mvna'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.mvna_+3A_x">x</code></td>
<td>
<p>An object of class <code>mvna</code></p>
</td></tr>
<tr><td><code id="print.mvna_+3A_...">...</code></td>
<td>
<p>Other arguments for print method</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No value returned.
</p>


<h3>Author(s)</h3>

<p> Arthur Allignol, <a href="mailto:arthur.allignol@fdm-freiburg.de">arthur.allignol@fdm-freiburg.de</a> </p>


<h3>See Also</h3>

<p><code><a href="#topic+mvna">mvna</a></code></p>

<hr>
<h2 id='sir.adm'>Pneumonia on admission in intenive care unit patients</h2><span id='topic+sir.adm'></span>

<h3>Description</h3>

<p>Pneumonia status on admission for intensive care unit (ICU) patients,
a random sample from the SIR-3 study.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(sir.adm)</code></pre>


<h3>Format</h3>

<p>The data contains 747 rows and 4 variables:
</p>

<dl>
<dt>id:</dt><dd><p>Randomly generated patient id</p>
</dd>
<dt>pneu:</dt><dd><p>Pneumonia indicator. 0: No pneumonia, 1: Pneumonia</p>
</dd>
<dt>status</dt><dd><p>Status indicator. 0: censored observation, 1:
discharged, 2: dead</p>
</dd>
<dt>time:</dt><dd><p>Follow-up time in day</p>
</dd>
<dt>age:</dt><dd><p>Age at inclusion</p>
</dd>
<dt>sex:</dt><dd><p>Sex. <code>F</code> for female and <code>M</code> for male</p>
</dd>
</dl>



<h3>Source</h3>

<p>Beyersmann, J., Gastmeier, P., Grundmann, H.,
Baerwolff, S., Geffers, C., Behnke, M.,
Rueden, H., and Schumacher, M. Use of multistate
models to assess prolongation of intensive care unit stay due to
nosocomial infection. <em>Infection Control and Hospital
Epidemiology</em>, 27:493-499, 2006.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># data set transformation
data(sir.adm) 
id &lt;- sir.adm$id
from &lt;- sir.adm$pneu
to &lt;- ifelse(sir.adm$status==0,"cens",sir.adm$status+1)
times &lt;- sir.adm$time
dat.sir &lt;- data.frame(id,from,to,time=times)

# Possible transitions
tra &lt;- matrix(ncol=4,nrow=4,FALSE)
tra[1:2,3:4] &lt;- TRUE

na.pneu &lt;- mvna(dat.sir,c("0","1","2","3"),
                tra,"cens")

if(require("lattice")) {
xyplot(na.pneu,tr.choice=c("0 2","1 2","0 3","1 3"),
       aspect=1,strip=strip.custom(bg="white",
       factor.levels=c("No pneumonia on admission -- Discharge",
                       "Pneumonia on admission -- Discharge",
                       "No pneumonia on admission -- Death",
                       "Pneumonia on admission -- Death"),
       par.strip.text=list(cex=0.9)),
       scales=list(alternating=1),xlab="Days",
       ylab="Nelson-Aalen esimates")
}
</code></pre>

<hr>
<h2 id='sir.cont'>Ventilation status in intensive care unit patients</h2><span id='topic+sir.cont'></span>

<h3>Description</h3>

<p>Time-dependent ventilation status for intensive care unit (ICU)
patients, a random sample from the SIR-3 study.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(sir.cont)
</code></pre>


<h3>Format</h3>

<p>A data frame with 1141 rows and 6 columns:
</p>

<dl>
<dt>id:</dt><dd><p>Randomly generated patient id</p>
</dd>
<dt>from:</dt><dd><p>State from which a transition occurs</p>
</dd>
<dt>to:</dt><dd><p>State to which a transition occurs</p>
</dd>
<dt>time:</dt><dd><p>Time when a transition occurs</p>
</dd>
<dt>age:</dt><dd><p>Age at inclusion</p>
</dd>
<dt>sex:</dt><dd><p>Sex. <code>F</code> for female and <code>M</code> for male</p>
</dd>
</dl>

<p>The possible states are:
</p>
<p>0: No ventilation
</p>
<p>1: Ventilation
</p>
<p>2: End of stay.
</p>
<p>And <code>cens</code> stands for censored observations.
</p>


<h3>Details</h3>

<p>This data frame consists in a random sample of the SIR-3 cohort
data. It focuses on the effect of ventilation on the length of stay
(combined endpoint discharge/death). Ventilation status is considered
as a transcient state in an illness-death model. 
</p>
<p>The data frame is directly formated to be used with the <code>mvna</code>
function, i.e., it is transition-oriented with one row per transition.
</p>


<h3>Source</h3>

<p>Beyersmann, J., Gastmeier, P., Grundmann, H.,
Baerwolff, S., Geffers, C., Behnke, M.,
Rueden, H., and Schumacher, M. Use of multistate
models to assess prolongation of intensive care unit stay due to
nosocomial infection. <em>Infection Control and Hospital
Epidemiology</em>, 27:493-499, 2006.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(sir.cont)

# Matrix of possible transitions
tra &lt;- matrix(ncol=3,nrow=3,FALSE)
tra[1, 2:3] &lt;- TRUE
tra[2, c(1, 3)] &lt;- TRUE

# Modification for patients entering and leaving a state
# at the same date
sir.cont &lt;- sir.cont[order(sir.cont$id, sir.cont$time), ]
for (i in 2:nrow(sir.cont)) {
  if (sir.cont$id[i]==sir.cont$id[i-1]) {
    if (sir.cont$time[i]==sir.cont$time[i-1]) {
      sir.cont$time[i-1] &lt;- sir.cont$time[i-1] - 0.5
    }
  }
}

# Computation of the Nelson-Aalen estimates
  na.cont &lt;- mvna(sir.cont,c("0","1","2"),tra,"cens")

if (require("lattice")) {
  xyplot(na.cont,tr.choice=c("0 2","1 2"),aspect=1,
       strip=strip.custom(bg="white",
         factor.levels=c("No ventilation -- Discharge/Death",
           "Ventilation -- Discharge/Death"),
         par.strip.text=list(cex=0.9)),
       scales=list(alternating=1),xlab="Days",
       ylab="Nelson-Aalen estimates")
}
</code></pre>

<hr>
<h2 id='summary.mvna'>
Summary method for objects of class 'mvna' 
</h2><span id='topic+summary.mvna'></span><span id='topic+print.summary.mvna'></span>

<h3>Description</h3>

<p>Summary method for <code>mvna</code> objects. The function returns a list
containing the cumulative transition hazards, variance and other
informations. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mvna'
summary(object, level = 0.95,
        var.type = c("aalen", "greenwood"),
        ci.fun = c("log", "linear", "arcsin"), ...)

## S3 method for class 'mvna'
print.summary(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.mvna_+3A_object">object</code></td>
<td>
<p>An object of class <code>mvna</code>.</p>
</td></tr>
<tr><td><code id="summary.mvna_+3A_level">level</code></td>
<td>
<p>Level of the pointwise confidence interval. Default is
0.95.</p>
</td></tr>
<tr><td><code id="summary.mvna_+3A_var.type">var.type</code></td>
<td>
<p>Which of the &quot;aalen&quot; or &quot;greenwood&quot; variance estimator
should be displayed and used to compute the pointwise confidence
intervals. Default is &quot;aalen&quot;.</p>
</td></tr>
<tr><td><code id="summary.mvna_+3A_ci.fun">ci.fun</code></td>
<td>
<p>Which transformation to apply to the confidence
intervals. One of &quot;linear&quot;, &quot;log&quot;, &quot;arcsin&quot;. Default is &quot;log&quot;.</p>
</td></tr>
<tr><td><code id="summary.mvna_+3A_...">...</code></td>
<td>
<p>Further arguments.</p>
</td></tr>
<tr><td><code id="summary.mvna_+3A_x">x</code></td>
<td>
<p>An object of class <code>summary.mvna</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an object of class <code>mvna</code> which is a list of data frames
named after the possible transitions. Each data frame contains the
following columns:
</p>
<table role = "presentation">
<tr><td><code>time</code></td>
<td>
<p>Event times at which the cumulative hazards are
estimated.</p>
</td></tr>
<tr><td><code>na</code></td>
<td>
<p>Estimated cumulative transition hazards.</p>
</td></tr>
<tr><td><code>var.aalen or var.greenwood</code></td>
<td>
<p>Variance estimates. The name depends
on the <code>var.type</code> argument. Default will be <code>var.aalen</code>.</p>
</td></tr>
<tr><td><code>lower</code></td>
<td>
<p>Lower bound of the pointwise confidence interval.</p>
</td></tr>
<tr><td><code>upper</code></td>
<td>
<p>Upper bound.</p>
</td></tr>
<tr><td><code>n.risk</code></td>
<td>
<p>Number of individuals at risk of experiencing an event
just before <code class="reqn">t</code>.</p>
</td></tr>
<tr><td><code>n.event</code></td>
<td>
<p>Number of transitions at time <code class="reqn">t</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Arthur Allignol, <a href="mailto:arthur.allignol@gmail.com">arthur.allignol@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mvna">mvna</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(sir.adm)

## data set transformation
data(sir.adm) 
id &lt;- sir.adm$id
from &lt;- sir.adm$pneu
to &lt;- ifelse(sir.adm$status==0,"cens",sir.adm$status+1)
times &lt;- sir.adm$time
dat.sir &lt;- data.frame(id,from,to,time=times)

## Possible transitions
tra &lt;- matrix(ncol=4,nrow=4,FALSE)
tra[1:2,3:4] &lt;- TRUE

na.pneu &lt;- mvna(dat.sir,c("0","1","2","3"),
                tra,"cens")

summ.na.pneu &lt;- summary(na.pneu)

## cumulative hazard for 0 -&gt; 2 transition:
summ.na.pneu$"0 2"$na
</code></pre>

<hr>
<h2 id='xyplot.mvna'> Panel plots for object of class 'mvna' </h2><span id='topic+xyplot.mvna'></span>

<h3>Description</h3>

<p>xyplot function for objects of class <code>mvna</code>. Estimates of the
cumulative hazards are plotted as a function of time for all the
transitions specified by the user. The function can also plot
several types of pointwise confidence interval (see Andersen et
al. (1993) p.208).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mvna'
xyplot(x, data = NULL, xlab = "Time",
       ylab = "Cumulative Hazard", tr.choice = "all",
       conf.int = TRUE, var.type = c("aalen", "greenwood"),
       ci.fun = c("log", "linear", "arcsin"), level = 0.95,
       col = c(1, 1, 1), lty = c(1, 3, 3),
       ci.type = c(1, 2), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xyplot.mvna_+3A_x">x</code></td>
<td>
<p>An object of class <code>mvna</code>.</p>
</td></tr>
<tr><td><code id="xyplot.mvna_+3A_data">data</code></td>
<td>
<p><em>Useless</em>.</p>
</td></tr>
<tr><td><code id="xyplot.mvna_+3A_xlab">xlab</code></td>
<td>
<p> x-axis label. Default is &quot;Time&quot;. </p>
</td></tr>
<tr><td><code id="xyplot.mvna_+3A_ylab">ylab</code></td>
<td>
<p> y-axis label. Default is &quot;Cumulative Hazard&quot; </p>
</td></tr>
<tr><td><code id="xyplot.mvna_+3A_tr.choice">tr.choice</code></td>
<td>
<p>A character vector of the form <code>c("from to","from
    to")</code> specifying which transitions should be plotted. Default is &quot;all&quot;.  </p>
</td></tr>
<tr><td><code id="xyplot.mvna_+3A_conf.int">conf.int</code></td>
<td>
<p> A logical whether plot pointwise confidence
interval. Default is TRUE</p>
</td></tr>
<tr><td><code id="xyplot.mvna_+3A_var.type">var.type</code></td>
<td>
<p>One of &quot;aalen&quot; or &quot;greenwood&quot;. Specifies which
variance estimator is used to compute the confidence intervals.</p>
</td></tr>
<tr><td><code id="xyplot.mvna_+3A_ci.fun">ci.fun</code></td>
<td>
<p>One of &quot;log&quot;, &quot;linear&quot; or &quot;arcsin&quot;. Indicates the
transformation applied to the pointwise confidence intervals. Default
is &quot;log&quot;.</p>
</td></tr>
<tr><td><code id="xyplot.mvna_+3A_level">level</code></td>
<td>
<p>Level of the confidence interval. Default is 0.95.</p>
</td></tr>
<tr><td><code id="xyplot.mvna_+3A_col">col</code></td>
<td>
<p>Vector of colour for the plot. Default is black.</p>
</td></tr>
<tr><td><code id="xyplot.mvna_+3A_lty">lty</code></td>
<td>
<p>Vector of line type. Default is <code>c(1, 3, 3)</code>.</p>
</td></tr>
<tr><td><code id="xyplot.mvna_+3A_ci.type">ci.type</code></td>
<td>
<p><em>DEPRECATED</em></p>
</td></tr>
<tr><td><code id="xyplot.mvna_+3A_...">...</code></td>
<td>
<p>Other arguments for xyplot.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>trellis</code>.
</p>


<h3>Note</h3>

<p>These plots are highly customizable, see
<code><a href="lattice.html#topic+Lattice">Lattice</a></code> and <code><a href="lattice.html#topic+xyplot">xyplot</a></code>. For
example, if one want to change strip background color and the title of
each strip, it can be added 'strip=strip.custom(bg=&quot;a
color&quot;,factor.levels=&quot;a title&quot;,&quot;another title&quot;)'. One can use
'aspect=&quot;1&quot;' to get the size of the panels isometric.
</p>


<h3>Author(s)</h3>

<p>Arthur Allignol, <a href="mailto:arthur.allignol@fdm-freiburg.de">arthur.allignol@fdm-freiburg.de</a> </p>


<h3>References</h3>

<p> Andersen, P.K., Borgan, O., Gill, R.D. and Keiding,
N. (1993). <em>Statistical models based on counting
processes</em>. Springer Series in Statistics. New York, NY: Springer.
</p>
<p>Deepayan Sarkar (2006). lattice: Lattice Graphics. R package version
0.13-8.</p>


<h3>See Also</h3>

<p><code><a href="lattice.html#topic+xyplot">xyplot</a></code>, <code><a href="#topic+mvna">mvna</a></code>, <code><a href="#topic+sir.adm">sir.adm</a></code>,<code><a href="#topic+sir.cont">sir.cont</a></code>   </p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
