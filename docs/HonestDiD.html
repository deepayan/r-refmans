<!DOCTYPE html><html lang="en"><head><title>Help for package HonestDiD</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {HonestDiD}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#basisVector'>
<p>Creates a standard basis vector.</p></a></li>
<li><a href='#BCdata_EventStudy'>
<p>Event study estimates from baseline event study specification on profits in Benzarti &amp; Carloni (2019). See discussion in Section 6.1 of Rambachan &amp; Roth (2021).</p></a></li>
<li><a href='#computeConditionalCS_DeltaRM'>
<p>Computes conditional and hybridized confidence set for <code class="reqn">\Delta = \Delta^{RM}(Mbar)</code>.</p></a></li>
<li><a href='#computeConditionalCS_DeltaRMB'>
<p>Computes conditional and hybridized confidence set for <code class="reqn">Delta = Delta^{RMB}(Mbar)</code>.</p></a></li>
<li><a href='#computeConditionalCS_DeltaRMM'>
<p>Computes conditional and hybridized confidence set for <code class="reqn">\Delta = \Delta^{RMM}(Mbar)</code>.</p></a></li>
<li><a href='#computeConditionalCS_DeltaSD'>
<p>Computes conditional and hybridized confidence set for <code class="reqn">\Delta = \Delta^{SD}(M)</code>.</p></a></li>
<li><a href='#computeConditionalCS_DeltaSDB'>
<p>Computes conditional and hybridized confidence set for <code class="reqn">\Delta = \Delta^{SDB}(M)</code>.</p></a></li>
<li><a href='#computeConditionalCS_DeltaSDM'>
<p>Computes conditional and hybridized confidence set for <code class="reqn">\Delta = \Delta^{SDM}(M)</code>.</p></a></li>
<li><a href='#computeConditionalCS_DeltaSDRM'>
<p>Computes conditional and hybridized confidence set for <code class="reqn">\Delta = \Delta^{SDRM}(Mbar)</code>.</p></a></li>
<li><a href='#computeConditionalCS_DeltaSDRMB'>
<p>Computes conditional and hybridized confidence set for <code class="reqn">\Delta = \Delta^{SDRMB}(Mbar)</code>.</p></a></li>
<li><a href='#computeConditionalCS_DeltaSDRMM'>
<p>Computes conditional and hybridized confidence set for <code class="reqn">\Delta = \Delta^{SDRMM}(Mbar)</code>.</p></a></li>
<li><a href='#constructOriginalCS'>
<p>Constructs original confidence interval for parameter of interest, theta = l_vec'tau.</p></a></li>
<li><a href='#createEventStudyPlot'>
<p>Constructs event study plot</p></a></li>
<li><a href='#createSensitivityPlot'>
<p>Constructs sensitivity plot for <code class="reqn">\Delta = \Delta^{SD}(M)</code>, <code class="reqn">\Delta^{SDB}(M)</code> and <code class="reqn">\Delta^{SDM}(M)</code></p></a></li>
<li><a href='#createSensitivityPlot_relativeMagnitudes'>
<p>Constructs sensitivity plot for <code class="reqn">\Delta = \Delta^{RM}(Mbar)</code>, <code class="reqn">\Delta^{SDRM}{Mbar}</code> and their variants that incorporate additional shape or sign restrictions.</p></a></li>
<li><a href='#createSensitivityResults'>
<p>Constructs robust confidence intervals for <code class="reqn">\Delta = \Delta^{SD}(M)</code>, <code class="reqn">\Delta^{SDB}(M)</code> and <code class="reqn">\Delta^{SDM}(M)</code> for vector of possible M values.</p></a></li>
<li><a href='#createSensitivityResults_relativeMagnitudes'>
<p>Constructs robust confidence intervals for <code class="reqn">\Delta = \Delta^{RM}(Mbar)</code>, <code class="reqn">\Delta^{SDRM}(Mbar)</code> and their variants that incorporate shape or sign restrictions for a vector of possible Mbar values.</p></a></li>
<li><a href='#DeltaSD_lowerBound_Mpre'>
<p>Construct lower bound for M for <code class="reqn">\Delta = \Delta^{SD}(M)</code> based on observed pre-period coefficients.</p></a></li>
<li><a href='#DeltaSD_upperBound_Mpre'><p>Construct upper bound for M for <code class="reqn">\Delta = \Delta^{SD}(M)</code> based on observed pre-period coefficients.</p></a></li>
<li><a href='#findOptimalFLCI'>
<p>Constructs optimal fixed length confidence interval for <code class="reqn">\Delta = \Delta^{SD}(M)</code>.</p></a></li>
<li><a href='#LWdata_EventStudy'>
<p>Event study estimates from baseline female specification on employment in Lovenheim &amp; Willen (2019). See discussion in Section 6.2 of Rambachan &amp; Roth (2021).</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Robust Inference in Difference-in-Differences and Event Study
Designs</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.6</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, rlang, foreach (&ge; 1.4.7), matrixStats (&ge; 0.63.0),
CVXR (&ge; 0.99-6), latex2exp (&ge; 0.4.0), lpSolveAPI (&ge;
5.5.2.0-17), Matrix (&ge; 1.2-17), pracma (&ge; 2.2.5), purrr (&ge;
0.3.4), tibble (&ge; 1.3.4), dplyr (&ge; 0.7.4), ggplot2 (&ge;
2.2.1), Rglpk (&ge; 0.6-4), mvtnorm (&ge; 1.1-3), TruncatedNormal
(&ge; 1.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, testthat, haven, lfe, rmarkdown</td>
</tr>
<tr>
<td>Description:</td>
<td>
    Provides functions to conduct robust inference in difference-in-differences and event study designs by implementing the methods developed in Rambachan &amp; Roth (2023) &lt;<a href="https://doi.org/10.1093%2Frestud%2Frdad018">doi:10.1093/restud/rdad018</a>&gt;, "A More Credible Approach to Parallel Trends" [Previously titled "An Honest Approach..."]. Inference is conducted under a weaker version of the parallel trends assumption. Uniformly valid confidence sets are constructed based upon conditional confidence sets, fixed-length confidence sets and hybridized confidence sets.</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-07-12 00:19:14 UTC; asheshr</td>
</tr>
<tr>
<td>Author:</td>
<td>Ashesh Rambachan [aut, cph, cre],
  Jonathan Roth [aut, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ashesh Rambachan &lt;ashesh.a.rambachan@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-07-14 11:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='basisVector'>
Creates a standard basis vector.
</h2><span id='topic+basisVector'></span>

<h3>Description</h3>

<p>Creates a basis vector of length <code>size</code> with a 1 in the <code>index</code> position.
</p>


<h3>Usage</h3>

<pre><code class='language-R'># Create the index basis vector in R^size
basisVector(index, size)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="basisVector_+3A_index">index</code></td>
<td>

<p>The index at which there should be a one. Default equals one.
</p>
</td></tr>
<tr><td><code id="basisVector_+3A_size">size</code></td>
<td>

<p>The length of the vector. Default equals one.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a basis vector of length <code>size</code> with a 1 in the <code>index</code> position.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  # Create the first basis vector in R^2
  basisVector(index = 1, size = 2)
  # Create the third basis vector in R^6
  basisVector(index = 3, size = 6)
</code></pre>

<hr>
<h2 id='BCdata_EventStudy'>
Event study estimates from baseline event study specification on profits in Benzarti &amp; Carloni (2019). See discussion in Section 6.1 of Rambachan &amp; Roth (2021).
</h2><span id='topic+BCdata_EventStudy'></span>

<h3>Description</h3>

<p>This list contains the event study estimates from baseline event study specification on profits in Benzarti &amp; Carloni (2019). See discussion in Section 6.1 of Rambachan &amp; Roth (2021).
</p>


<h3>Format</h3>

<p>A list, containing 7 objects:
</p>
<dl>
<dt>betahat</dt><dd><p>Vector of estimated event study coefficients.</p>
</dd>
<dt>sigma</dt><dd><p>Estimated variance-covariance matrix.</p>
</dd>
<dt>timeVec</dt><dd><p>Vector that contains the time periods associated with the event study coefficients.</p>
</dd>
<dt>referencePeriod</dt><dd><p>Reference period that is normalized to zero.</p>
</dd>
<dt>prePeriodIndices</dt><dd><p>Vector containing elements of timeVec that correspond to the pre-periods.</p>
</dd>
<dt>postPeriodIndices</dt><dd><p>Vector containing elements of timeVec that correspond to the post-periods.</p>
</dd>
</dl>


<hr>
<h2 id='computeConditionalCS_DeltaRM'>
Computes conditional and hybridized confidence set for <code class="reqn">\Delta = \Delta^{RM}(Mbar)</code>.
</h2><span id='topic+computeConditionalCS_DeltaRM'></span>

<h3>Description</h3>

<p>Computes the conditional confidence set and hybridized confidence set for <code class="reqn">\Delta = \Delta^{RM}(Mbar)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeConditionalCS_DeltaRM(betahat, sigma, numPrePeriods, numPostPeriods,
                         l_vec = .basisVector(index = 1, size = numPostPeriods), Mbar = 0,
                         alpha = 0.05, hybrid_flag = "LF", hybrid_kappa = alpha/10,
                         returnLength = FALSE, postPeriodMomentsOnly = TRUE,
                         gridPoints=10^3, grid.ub = NA, grid.lb = NA, seed = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="computeConditionalCS_DeltaRM_+3A_betahat">betahat</code></td>
<td>

<p>Vector of estimated event study coefficients.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRM_+3A_sigma">sigma</code></td>
<td>

<p>Covariance matrix of event study coefficients.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRM_+3A_numpreperiods">numPrePeriods</code></td>
<td>

<p>Number of pre-periods.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRM_+3A_numpostperiods">numPostPeriods</code></td>
<td>

<p>Number of post-periods.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRM_+3A_l_vec">l_vec</code></td>
<td>

<p>Vector of length numPostPeriods that describes the scalar parameter of interest, theta = l_vec'tau. Default equals to first basis vector, (1, 0, ..., 0)
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRM_+3A_mbar">Mbar</code></td>
<td>

<p>Tuning parameter Mbar for <code class="reqn">\Delta^{RM}(Mbar)</code> that governs how different the maximal pre-period violation of parallel trends may be from the post-period differential trend. Default sets Mbar = 0. See Section 2.3.2 of Rambachan &amp; Roth (2021) for more details.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRM_+3A_alpha">alpha</code></td>
<td>

<p>Desired level of the confidence set. Default equals 0.05 (corresponding to 95% confidence interval)
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRM_+3A_hybrid_flag">hybrid_flag</code></td>
<td>

<p>Flag for whether user wishes to compute a hybridized confidence set. &quot;ARP&quot; specifies the conditional confidence set &quot;LF&quot; specifies the conditional least-favorable confidence set. The conditional FLCI hybrid confidence set is not available for <code class="reqn">\Delta^{RM}(Mbar)</code> since the FLCI is infinite length for this choice of <code class="reqn">\Delta</code>. See Section 3.3 and Section 5.3 of Rambachan &amp; Roth (2021) for details. Default equals &quot;LF&quot;.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRM_+3A_hybrid_kappa">hybrid_kappa</code></td>
<td>

<p>Desired first-stage size of hybridized confidence set. Only specify this value if the user wishes to compute a hybridized confidence set. Default equals alpha/10. If user specifies hybrid_flag = &quot;ARP&quot;, set this value to NULL.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRM_+3A_returnlength">returnLength</code></td>
<td>

<p>Logical value. If TRUE, function only returns the length of the robust confidence. If FALSE, function returns dataframe that contains a grid of possible parameter values and a vector of zeros and ones associated with each value in the grid (one denotes that the grid value lies in the confidence set and zero denotes that the grid value does not fall within the confidence set.) Default equals FALSE.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRM_+3A_postperiodmomentsonly">postPeriodMomentsOnly</code></td>
<td>

<p>Logical value. If TRUE, function excludes moments for <code class="reqn">\Delta^{RM}(Mbar)</code> that only include pre-period coefficients. Default equals TRUE.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRM_+3A_gridpoints">gridPoints</code></td>
<td>

<p>Number of grid points used in test inversion step. Default equals 1000.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRM_+3A_grid.ub">grid.ub</code></td>
<td>

<p>Upper bound of grid for test inversion. The user should only specify this if she wishes to manually specify the upper bound of the grid. Default equals NA and sets grid upper bound to equal the upper bound of the identified set under parallel trends plus 20*standard deviation of the point estimate, l_vec'betahat.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRM_+3A_grid.lb">grid.lb</code></td>
<td>

<p>Lower bound of grid for test inversion. The user should only specify this if she wishes to manually specify the upper bound of the grid. Default equals NA sets grid lower bound to equal the lower bound of the identified set under parallel trends minus 20*standard deviation of the point estimate, l_vec'betahat.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRM_+3A_seed">seed</code></td>
<td>

<p>Random seed for internal computations; included for reproducibility.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If returnLength equals TRUE, function returns a scalar that equals the length of the confidence interval. If returnLength equals FALSE, function returns a dataframe with columns
</p>
<table role = "presentation">
<tr><td><code>grid</code></td>
<td>

<p>Vector of grid values used to construct the confidence interval by test inversion.
</p>
</td></tr>
<tr><td><code>accept</code></td>
<td>

<p>Vector of zeros-ones associated with grid values, where one denotes a grid value that falls within the confidence interval and zero denotes a grid value that falls outside the confidence interval.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Ashesh Rambachan
</p>


<h3>References</h3>

<p>Rambachan, Ashesh and Jonathan Roth. &quot;An Honest Approach to Parallel Trends.&quot; 2021.
</p>

<hr>
<h2 id='computeConditionalCS_DeltaRMB'>
Computes conditional and hybridized confidence set for <code class="reqn">Delta = Delta^{RMB}(Mbar)</code>.
</h2><span id='topic+computeConditionalCS_DeltaRMB'></span>

<h3>Description</h3>

<p>Computes the conditional confidence set and hybridized confidence set for <code class="reqn">Delta = Delta^{RMB}(Mbar)</code>. The set <code class="reqn">Delta^{RMB}(Mbar)</code> adds an additional sign restriction to <code class="reqn">Delta^{RM}(Mbar)</code> that restricts the sign of the bias to be either positive (<code class="reqn">delta \ge 0</code>) or negative (<code class="reqn">delta \le 0</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeConditionalCS_DeltaRMB(betahat, sigma, numPrePeriods, numPostPeriods,
                         l_vec = .basisVector(index = 1,
                                              size = numPostPeriods),
                         Mbar = 0, alpha = 0.05, hybrid_flag = "LF",
                         hybrid_kappa = alpha/10, returnLength = FALSE,
                         biasDirection = "positive", postPeriodMomentsOnly = TRUE,
                         gridPoints=10^3, grid.ub = NA, grid.lb = NA, seed = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="computeConditionalCS_DeltaRMB_+3A_betahat">betahat</code></td>
<td>

<p>Vector of estimated event study coefficients.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMB_+3A_sigma">sigma</code></td>
<td>

<p>Covariance matrix of event study coefficients.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMB_+3A_numpreperiods">numPrePeriods</code></td>
<td>

<p>Number of pre-periods.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMB_+3A_numpostperiods">numPostPeriods</code></td>
<td>

<p>Number of post-periods.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMB_+3A_l_vec">l_vec</code></td>
<td>

<p>Vector of length numPostPeriods that describes the scalar parameter of interest, theta = l_vec'tau. Default equals to first basis vector, (1, 0, ..., 0)
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMB_+3A_mbar">Mbar</code></td>
<td>

<p>Tuning parameter Mbar for <code class="reqn">\Delta^{RM}(Mbar)</code> that governs how different the maximal pre-period violation of parallel trends may be from the post-period differential trend. Default sets Mbar = 0. See Section 2.3.2 of Rambachan &amp; Roth (2021) for more details.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMB_+3A_alpha">alpha</code></td>
<td>

<p>Desired level of the confidence set. Default equals 0.05 (corresponding to 95% confidence interval)
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMB_+3A_hybrid_flag">hybrid_flag</code></td>
<td>

<p>Flag for whether user wishes to compute a hybridized confidence set. &quot;ARP&quot; specifies the conditional confidence set &quot;LF&quot; specifies the conditional least-favorable confidence set. The conditional FLCI hybrid confidence set is not available for <code class="reqn">\Delta^{RMB}(Mbar)</code> since the FLCI is infinite length for this choice of <code class="reqn">\Delta</code>. See Section 3.3 and Section 5.3 of Rambachan &amp; Roth (2021) for details. Default equals &quot;LF&quot;.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMB_+3A_hybrid_kappa">hybrid_kappa</code></td>
<td>

<p>Desired first-stage size of hybridized confidence set. Only specify this value if the user wishes to compute a hybridized confidence set. Default equals alpha/10. If user specifies hybrid_flag = &quot;ARP&quot;, set this value to NULL.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMB_+3A_returnlength">returnLength</code></td>
<td>

<p>Logical value. If TRUE, function only returns the length of the robust confidence. If FALSE, function returns dataframe that contains a grid of possible parameter values and a vector of zeros and ones associated with each value in the grid (one denotes that the grid value lies in the confidence set and zero denotes that the grid value does not fall within the confidence set.) Default equals FALSE.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMB_+3A_biasdirection">biasDirection</code></td>
<td>

<p>Specifies direction of bias restriction. If &quot;positive&quot;, bias is restricted to be positive, <code class="reqn">\delta \ge 0</code>. If &quot;negative&quot;, bias is restricted to be negative, <code class="reqn">\delta \le 0</code>. Default equals &quot;positive&quot;.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMB_+3A_postperiodmomentsonly">postPeriodMomentsOnly</code></td>
<td>

<p>Logical value. If TRUE, function excludes moments for <code class="reqn">\Delta^{RMB}(Mbar)</code> that only include pre-period coefficients. Default equals TRUE.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMB_+3A_gridpoints">gridPoints</code></td>
<td>

<p>Number of grid points used in test inversion step. Default equals 1000.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMB_+3A_grid.ub">grid.ub</code></td>
<td>

<p>Upper bound of grid for test inversion. The user should only specify this if she wishes to manually specify the upper bound of the grid. Default equals NA and sets grid upper bound to equal the upper bound of the identified set under parallel trends plus 20*standard deviation of the point estimate, l_vec'betahat.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMB_+3A_grid.lb">grid.lb</code></td>
<td>

<p>Lower bound of grid for test inversion. The user should only specify this if she wishes to manually specify the upper bound of the grid. Default equals NA sets grid lower bound to equal the lower bound of the identified set under parallel trends minus 20*standard deviation of the point estimate, l_vec'betahat.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMB_+3A_seed">seed</code></td>
<td>

<p>Random seed for internal computations; included for reproducibility.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If returnLength equals TRUE, function returns a scalar that equals the length of the confidence interval. If returnLength equals FALSE, function returns a dataframe with columns
</p>
<table role = "presentation">
<tr><td><code>grid</code></td>
<td>

<p>Vector of grid values used to construct the confidence interval by test inversion.
</p>
</td></tr>
<tr><td><code>accept</code></td>
<td>

<p>Vector of zeros-ones associated with grid values, where one denotes a grid value that falls within the confidence interval and zero denotes a grid value that falls outside the confidence interval.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Ashesh Rambachan
</p>


<h3>References</h3>

<p>Rambachan, Ashesh and Jonathan Roth. &quot;An Honest Approach to Parallel Trends.&quot; 2021.
</p>

<hr>
<h2 id='computeConditionalCS_DeltaRMM'>
Computes conditional and hybridized confidence set for <code class="reqn">\Delta = \Delta^{RMM}(Mbar)</code>.
</h2><span id='topic+computeConditionalCS_DeltaRMM'></span>

<h3>Description</h3>

<p>Computes the conditional confidence set and hybridized confidence set for <code class="reqn">\Delta = \Delta^{RMM}(Mbar)</code>. The set <code class="reqn">\Delta^{RMM}(Mbar)</code> adds an additional shape restriction to <code class="reqn">\Delta^{RM}(Mbar)</code> that restricts the underlying trend to be monotone. It may either be increasing (<code class="reqn">\delta_t \ge \delta_{t-1}</code>) or decreasing (<code class="reqn">\delta_t \le \delta_{t-1}</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeConditionalCS_DeltaRMM(betahat, sigma, numPrePeriods, numPostPeriods,
                         l_vec = .basisVector(index = 1,
                                              size = numPostPeriods),
                                              Mbar = 0,
                         alpha = 0.05, hybrid_flag = "LF", hybrid_kappa = alpha/10,
                         returnLength = FALSE, postPeriodMomentsOnly = TRUE,
                         monotonicityDirection = "increasing",
                         gridPoints=10^3, grid.ub = NA, grid.lb = NA, seed = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="computeConditionalCS_DeltaRMM_+3A_betahat">betahat</code></td>
<td>

<p>Vector of estimated event study coefficients.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMM_+3A_sigma">sigma</code></td>
<td>

<p>Covariance matrix of event study coefficients.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMM_+3A_numpreperiods">numPrePeriods</code></td>
<td>

<p>Number of pre-periods.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMM_+3A_numpostperiods">numPostPeriods</code></td>
<td>

<p>Number of post-periods.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMM_+3A_l_vec">l_vec</code></td>
<td>

<p>Vector of length numPostPeriods that describes the scalar parameter of interest, theta = l_vec'tau. Default equals to first basis vector, (1, 0, ..., 0)
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMM_+3A_mbar">Mbar</code></td>
<td>

<p>Tuning parameter Mbar for <code class="reqn">\Delta^{RM}(Mbar)</code> that governs how different the maximal pre-period violation of parallel trends may be from the post-period differential trend. Default sets Mbar = 0. See Section 2.3.2 of Rambachan &amp; Roth (2021) for more details.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMM_+3A_alpha">alpha</code></td>
<td>

<p>Desired level of the confidence set. Default equals 0.05 (corresponding to 95% confidence interval)
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMM_+3A_hybrid_flag">hybrid_flag</code></td>
<td>

<p>Flag for whether user wishes to compute a hybridized confidence set. &quot;ARP&quot; specifies the conditional confidence set &quot;LF&quot; specifies the conditional least-favorable confidence set. The conditional FLCI hybrid confidence set is not available for <code class="reqn">\Delta^{RM}(Mbar)</code> since the FLCI is infinite length for this choice of <code class="reqn">\Delta</code>. See Section 3.3 and Section 5.3 of Rambachan &amp; Roth (2021) for details. Default equals &quot;LF&quot;.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMM_+3A_hybrid_kappa">hybrid_kappa</code></td>
<td>

<p>Desired first-stage size of hybridized confidence set. Only specify this value if the user wishes to compute a hybridized confidence set. Default equals alpha/10. If user specifies hybrid_flag = &quot;ARP&quot;, set this value to NULL.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMM_+3A_returnlength">returnLength</code></td>
<td>

<p>Logical value. If TRUE, function only returns the length of the robust confidence. If FALSE, function returns dataframe that contains a grid of possible parameter values and a vector of zeros and ones associated with each value in the grid (one denotes that the grid value lies in the confidence set and zero denotes that the grid value does not fall within the confidence set.) Default equals FALSE.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMM_+3A_postperiodmomentsonly">postPeriodMomentsOnly</code></td>
<td>

<p>Logical value. If TRUE, function excludes moments for <code class="reqn">\Delta^{RM}(Mbar)</code> that only include pre-period coefficients. Default equals TRUE.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMM_+3A_monotonicitydirection">monotonicityDirection</code></td>
<td>

<p>Specifies direction of monotonicity restriction. If &quot;increasing&quot;, underlying trend specified to be increasing, <code class="reqn">\delta_t \ge \delta_{t-1}</code>. If &quot;decreasing&quot;, underlying trend specified to be decreasing <code class="reqn">\delta_t \le \delta_{t-1}</code>. Default equals &quot;increasing.&quot;
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMM_+3A_gridpoints">gridPoints</code></td>
<td>

<p>Number of grid points used in test inversion step. Default equals 1000.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMM_+3A_grid.ub">grid.ub</code></td>
<td>

<p>Upper bound of grid for test inversion. The user should only specify this if she wishes to manually specify the upper bound of the grid. Default equals NA and sets grid upper bound to equal the upper bound of the identified set under parallel trends plus 20*standard deviation of the point estimate, l_vec'betahat.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMM_+3A_grid.lb">grid.lb</code></td>
<td>

<p>Lower bound of grid for test inversion. The user should only specify this if she wishes to manually specify the upper bound of the grid. Default equals NA sets grid lower bound to equal the lower bound of the identified set under parallel trends minus 20*standard deviation of the point estimate, l_vec'betahat.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaRMM_+3A_seed">seed</code></td>
<td>

<p>Random seed for internal computations; included for reproducibility.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If returnLength equals TRUE, function returns a scalar that equals the length of the confidence interval. If returnLength equals FALSE, function returns a dataframe with columns
</p>
<table role = "presentation">
<tr><td><code>grid</code></td>
<td>

<p>Vector of grid values used to construct the confidence interval by test inversion.
</p>
</td></tr>
<tr><td><code>accept</code></td>
<td>

<p>Vector of zeros-ones associated with grid values, where one denotes a grid value that falls within the confidence interval and zero denotes a grid value that falls outside the confidence interval.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Ashesh Rambachan
</p>


<h3>References</h3>

<p>Rambachan, Ashesh and Jonathan Roth. &quot;An Honest Approach to Parallel Trends.&quot; 2021.
</p>

<hr>
<h2 id='computeConditionalCS_DeltaSD'>
Computes conditional and hybridized confidence set for <code class="reqn">\Delta = \Delta^{SD}(M)</code>.
</h2><span id='topic+computeConditionalCS_DeltaSD'></span>

<h3>Description</h3>

<p>Computes the conditional confidence set and hybridized confidence set for <code class="reqn">\Delta = \Delta^{SD}(M)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeConditionalCS_DeltaSD(betahat, sigma, numPrePeriods, numPostPeriods,
                             l_vec = .basisVector(index = 1, size = numPostPeriods),
                             M = 0, alpha = 0.05, hybrid_flag = "FLCI",
                             hybrid_kappa = alpha/10, returnLength = FALSE,
                             postPeriodMomentsOnly = TRUE,
                             gridPoints =10^3, grid.ub = NA, grid.lb = NA, seed = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="computeConditionalCS_DeltaSD_+3A_betahat">betahat</code></td>
<td>

<p>Vector of estimated event study coefficients.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSD_+3A_sigma">sigma</code></td>
<td>

<p>Covariance matrix of event study coefficients.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSD_+3A_numpreperiods">numPrePeriods</code></td>
<td>

<p>Number of pre-periods.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSD_+3A_numpostperiods">numPostPeriods</code></td>
<td>

<p>Number of post-periods.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSD_+3A_l_vec">l_vec</code></td>
<td>

<p>Vector of length numPostPeriods that describes the scalar parameter of interest, theta = l_vec'tau. Default equals to first basis vector, (1, 0, ..., 0)
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSD_+3A_m">M</code></td>
<td>

<p>Tuning parameter for <code class="reqn">\Delta^{SD}(M)</code> that governs the degree of non-linearity allowed in the violation of parallel trends. Default equals 0
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSD_+3A_alpha">alpha</code></td>
<td>

<p>Desired size of the confidence set. Default equals 0.05 (corresponding to 95% confidence interval)
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSD_+3A_hybrid_flag">hybrid_flag</code></td>
<td>

<p>Flag for whether user wishes to compute a hybridized confidence set. &quot;ARP&quot; specifies the conditional confidence set, &quot;FLCI&quot; specifies the conditional FLCI confidence set and &quot;LF&quot; specifies the conditional least-favorable confidence set. Default equals &quot;FLCI&quot;.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSD_+3A_hybrid_kappa">hybrid_kappa</code></td>
<td>

<p>Desired first-stage size of hybridized confidence set. Only specify this value if the user wishes to compute a hybridized confidence set. Default equals alpha/10. If user specifies hybrid_flag = &quot;ARP&quot;, set this value to NULL.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSD_+3A_returnlength">returnLength</code></td>
<td>

<p>Logical value. If TRUE, function only returns the length of the robust confidence. If FALSE, function returns dataframe that contains a grid of possible parameter values and a vector of zeros and ones associated with each value in the grid (one denotes that the grid value lies in the confidence set and zero denotes that the grid value does not fall within the confidence set. Default equals FALSE.)
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSD_+3A_postperiodmomentsonly">postPeriodMomentsOnly</code></td>
<td>

<p>Logical value. If TRUE, function excludes moments for <code class="reqn">\Delta^{SD}(M)</code> that only include pre-period coefficients. Default equals TRUE.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSD_+3A_gridpoints">gridPoints</code></td>
<td>

<p>Number of grid points used in test inversion step. Default equals 1000.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSD_+3A_grid.ub">grid.ub</code></td>
<td>

<p>Upper bound of grid for test inversion. The user should only specify this if she wishes to manually specify the upper bound of the grid. Default equals NA and sets grid upper bound to equal the upper bound of the identified set under parallel trends plus 20*standard deviation of the point estimate, l_vec'betahat.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSD_+3A_grid.lb">grid.lb</code></td>
<td>

<p>Lower bound of grid for test inversion. The user should only specify this if she wishes to manually specify the upper bound of the grid. Default equals NA sets grid lower bound to equal the lower bound of the identified set under parallel trends minus 20*standard deviation of the point estimate, l_vec'betahat.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSD_+3A_seed">seed</code></td>
<td>

<p>Random seed for internal computations; included for reproducibility.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If returnLength equals TRUE, function returns a scalar that equals the length of the confidence interval. If returnLength equals FALSE, function returns a dataframe with columns
</p>
<table role = "presentation">
<tr><td><code>grid</code></td>
<td>

<p>Vector of grid values used to construct the confidence interval by test inversion.
</p>
</td></tr>
<tr><td><code>accept</code></td>
<td>

<p>Vector of zeros-ones associated with grid values, where one denotes a grid value that falls within the confidence interval and zero denotes a grid value that falls outside the confidence interval.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Ashesh Rambachan
</p>


<h3>References</h3>

<p>Rambachan, Ashesh and Jonathan Roth. &quot;An Honest Approach to Parallel Trends.&quot; 2021.
</p>

<hr>
<h2 id='computeConditionalCS_DeltaSDB'>
Computes conditional and hybridized confidence set for <code class="reqn">\Delta = \Delta^{SDB}(M)</code>.
</h2><span id='topic+computeConditionalCS_DeltaSDB'></span>

<h3>Description</h3>

<p>Computes the conditional confidence set and hybridized confidence set for <code class="reqn">\Delta = \Delta^{SDB}(M)</code>. The set <code class="reqn">\Delta^{SDB}(M)</code> adds an additional sign restriction to <code class="reqn">\Delta^{SD}(M)</code> that restricts the sign of the bias to be either positive (<code class="reqn">\delta \ge 0</code>) or negative (<code class="reqn">\delta \le 0</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeConditionalCS_DeltaSDB(betahat, sigma, numPrePeriods, numPostPeriods,
                              M = 0, l_vec = .basisVector(index = 1, size=numPostPeriods),
                              alpha = 0.05, hybrid_flag = "FLCI", hybrid_kappa = alpha/10,
                              returnLength = FALSE, biasDirection = "positive",
                              postPeriodMomentsOnly = TRUE,
                              gridPoints = 10^3, grid.lb = NA, grid.ub = NA, seed = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="computeConditionalCS_DeltaSDB_+3A_betahat">betahat</code></td>
<td>

<p>Vector of estimated event study coefficients.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDB_+3A_sigma">sigma</code></td>
<td>

<p>Covariance matrix of event study coefficients.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDB_+3A_numpreperiods">numPrePeriods</code></td>
<td>

<p>Number of pre-periods.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDB_+3A_numpostperiods">numPostPeriods</code></td>
<td>

<p>Number of post-periods.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDB_+3A_l_vec">l_vec</code></td>
<td>

<p>Vector of length numPostPeriods that describes the scalar parameter of interest, theta = l_vec'tau. Default equals to first basis vector, (1, 0, ..., 0)
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDB_+3A_m">M</code></td>
<td>

<p>Tuning parameter for <code class="reqn">\Delta^{SD}(M)</code> that governs the degree of non-linearity allowed in the violation of parallel trends. Default equals 0
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDB_+3A_alpha">alpha</code></td>
<td>

<p>Desired size of the confidence set. Default equals 0.05 (corresponding to 95% confidence interval)
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDB_+3A_hybrid_flag">hybrid_flag</code></td>
<td>

<p>Flag for whether user wishes to compute a hybridized confidence set. &quot;ARP&quot; specifies the conditional confidence set, &quot;FLCI&quot; specifies the conditional FLCI confidence set and &quot;LF&quot; specifies the conditional least-favorable confidence set. Default equals &quot;FLCI&quot;.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDB_+3A_hybrid_kappa">hybrid_kappa</code></td>
<td>

<p>Desired first-stage size of hybridized confidence set. Only specify this value if the user wishes to compute a hybridized confidence set. Default equals alpha/10. If user specifies hybrid_flag = &quot;ARP&quot;, set this value to NULL.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDB_+3A_returnlength">returnLength</code></td>
<td>

<p>Logical value. If TRUE, function only returns the length of the robust confidence. If FALSE, function returns dataframe that contains a grid of possible parameter values and a vector of zeros and ones associated with each value in the grid (one denotes that the grid value lies in the confidence set and zero denotes that the grid value does not fall within the confidence set.) Default equals FALSE.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDB_+3A_biasdirection">biasDirection</code></td>
<td>

<p>Specifies direction of bias restriction. If &quot;positive&quot;, bias is restricted to be positive, <code class="reqn">\delta \ge 0</code>. If &quot;negative&quot;, bias is restricted to be negative, <code class="reqn">\delta \le 0</code>. Default equals &quot;positive&quot;.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDB_+3A_postperiodmomentsonly">postPeriodMomentsOnly</code></td>
<td>

<p>Logical value. If TRUE, function excludes moments for <code class="reqn">\Delta^{SD}(M)</code> that only include pre-period coefficients. Default equals TRUE.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDB_+3A_gridpoints">gridPoints</code></td>
<td>

<p>Number of grid points used in test inversion step. Default equals 1000.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDB_+3A_grid.ub">grid.ub</code></td>
<td>

<p>Upper bound of grid for test inversion. The user should only specify this if she wishes to manually specify the upper bound of the grid. Default equals NA and sets grid upper bound to equal the upper bound of the identified set under parallel trends plus 20*standard deviation of the point estimate, l_vec'betahat.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDB_+3A_grid.lb">grid.lb</code></td>
<td>

<p>Lower bound of grid for test inversion. The user should only specify this if she wishes to manually specify the upper bound of the grid. Default equals NA sets grid lower bound to equal the lower bound of the identified set under parallel trends minus 20*standard deviation of the point estimate, l_vec'betahat.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDB_+3A_seed">seed</code></td>
<td>

<p>Random seed for internal computations; included for reproducibility.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If returnLength equals TRUE, function returns a scalar that equals the length of the confidence interval. If returnLength equals FALSE, function returns a dataframe with columns
</p>
<table role = "presentation">
<tr><td><code>grid</code></td>
<td>

<p>Vector of grid values used to construct the confidence interval by test inversion.
</p>
</td></tr>
<tr><td><code>accept</code></td>
<td>

<p>Vector of zeros-ones associated with grid values, where one denotes a grid value that falls within the confidence interval and zero denotes a grid value that falls outside the confidence interval.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Ashesh Rambachan
</p>


<h3>References</h3>

<p>Rambachan, Ashesh and Jonathan Roth. &quot;An Honest Approach to Parallel Trends.&quot; 2021.
</p>

<hr>
<h2 id='computeConditionalCS_DeltaSDM'>
Computes conditional and hybridized confidence set for <code class="reqn">\Delta = \Delta^{SDM}(M)</code>.
</h2><span id='topic+computeConditionalCS_DeltaSDM'></span>

<h3>Description</h3>

<p>Computes the conditional confidence set and hybridized confidence set for <code class="reqn">\Delta = \Delta^{SDM}(M)</code>. The set <code class="reqn">\Delta^{SDB}(M)</code> adds an additional shape restriction to <code class="reqn">\Delta^{SD}(M)</code> that restricts the underlying trend to be monotone. It may either be increasing (<code class="reqn">\delta_t \ge \delta_{t-1}</code>) or decreasing (<code class="reqn">\delta_t \le \delta_{t-1}</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeConditionalCS_DeltaSDM(betahat, sigma, numPrePeriods, numPostPeriods,
                              M = 0, l_vec = .basisVector(index = 1, size=numPostPeriods),
                              alpha = 0.05, monotonicityDirection = "increasing",
                              hybrid_flag = "FLCI", hybrid_kappa = alpha/10,
                              returnLength = FALSE, postPeriodMomentsOnly = TRUE,
                              gridPoints = 10^3, grid.lb = NA, grid.ub = NA, seed = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="computeConditionalCS_DeltaSDM_+3A_betahat">betahat</code></td>
<td>

<p>Vector of estimated event study coefficients.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDM_+3A_sigma">sigma</code></td>
<td>

<p>Covariance matrix of event study coefficients.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDM_+3A_numpreperiods">numPrePeriods</code></td>
<td>

<p>Number of pre-periods.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDM_+3A_numpostperiods">numPostPeriods</code></td>
<td>

<p>Number of post-periods.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDM_+3A_l_vec">l_vec</code></td>
<td>

<p>Vector of length numPostPeriods that describes the scalar parameter of interest, theta = l_vec'tau. Default equals to first basis vector, (1, 0, ..., 0)
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDM_+3A_m">M</code></td>
<td>

<p>Tuning parameter for <code class="reqn">\Delta^{SD}(M)</code> that governs the degree of non-linearity allowed in the violation of parallel trends. Default equals 0
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDM_+3A_alpha">alpha</code></td>
<td>

<p>Desired size of the confidence set. Default equals 0.05 (corresponding to 95% confidence interval)
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDM_+3A_hybrid_flag">hybrid_flag</code></td>
<td>

<p>Flag for whether user wishes to compute a hybridized confidence set. &quot;ARP&quot; specifies the conditional confidence set, &quot;FLCI&quot; specifies the conditional FLCI confidence set and &quot;LF&quot; specifies the conditional least-favorable confidence set. Default equals &quot;FLCI&quot;.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDM_+3A_hybrid_kappa">hybrid_kappa</code></td>
<td>

<p>Desired first-stage size of hybridized confidence set. Only specify this value if the user wishes to compute a hybridized confidence set. Default equals alpha/10. If user specifies hybrid_flag = &quot;ARP&quot;, set this value to NULL.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDM_+3A_returnlength">returnLength</code></td>
<td>

<p>Logical value. If TRUE, function only returns the length of the robust confidence. If FALSE, function returns dataframe that contains a grid of possible parameter values and a vector of zeros and ones associated with each value in the grid (one denotes that the grid value lies in the confidence set and zero denotes that the grid value does not fall within the confidence set.) Default equals FALSE.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDM_+3A_monotonicitydirection">monotonicityDirection</code></td>
<td>

<p>Specifies direction of monotonicity restriction. If &quot;increasing&quot;, underlying trend specified to be increasing, <code class="reqn">\delta_t \ge \delta_{t-1}</code>. If &quot;decreasing&quot;, underlying trend specified to be decreasing <code class="reqn">\delta_t \le \delta_{t-1}</code>. Default equals &quot;increasing.&quot;
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDM_+3A_postperiodmomentsonly">postPeriodMomentsOnly</code></td>
<td>

<p>Logical value. If TRUE, function excludes moments for <code class="reqn">\Delta^{SD}(M)</code> that only include pre-period coefficients. Default equals TRUE.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDM_+3A_gridpoints">gridPoints</code></td>
<td>

<p>Number of grid points used in test inversion step. Default equals 1000.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDM_+3A_grid.ub">grid.ub</code></td>
<td>

<p>Upper bound of grid for test inversion. The user should only specify this if she wishes to manually specify the upper bound of the grid. Default equals NA and sets grid upper bound to equal the upper bound of the identified set under parallel trends plus 20*standard deviation of the point estimate, l_vec'betahat.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDM_+3A_grid.lb">grid.lb</code></td>
<td>

<p>Lower bound of grid for test inversion. The user should only specify this if she wishes to manually specify the upper bound of the grid. Default equals NA sets grid lower bound to equal the lower bound of the identified set under parallel trends minus 20*standard deviation of the point estimate, l_vec'betahat.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDM_+3A_seed">seed</code></td>
<td>

<p>Random seed for internal computations; included for reproducibility.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If returnLength equals TRUE, function returns a scalar that equals the length of the confidence interval. If returnLength equals FALSE, function returns a dataframe with columns
</p>
<table role = "presentation">
<tr><td><code>grid</code></td>
<td>

<p>Vector of grid values used to construct the confidence interval by test inversion.
</p>
</td></tr>
<tr><td><code>accept</code></td>
<td>

<p>Vector of zeros-ones associated with grid values, where one denotes a grid value that falls within the confidence interval and zero denotes a grid value that falls outside the confidence interval.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Ashesh Rambachan
</p>


<h3>References</h3>

<p>Rambachan, Ashesh and Jonathan Roth. &quot;An Honest Approach to Parallel Trends.&quot; 2021.
</p>

<hr>
<h2 id='computeConditionalCS_DeltaSDRM'>
Computes conditional and hybridized confidence set for <code class="reqn">\Delta = \Delta^{SDRM}(Mbar)</code>.
</h2><span id='topic+computeConditionalCS_DeltaSDRM'></span>

<h3>Description</h3>

<p>Computes the conditional confidence set and hybridized confidence set for <code class="reqn">\Delta = \Delta^{SDRM}(Mbar)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeConditionalCS_DeltaSDRM(betahat, sigma, numPrePeriods, numPostPeriods,
                         l_vec = .basisVector(index = 1, size = numPostPeriods), Mbar = 0,
                         alpha = 0.05, hybrid_flag = "LF", hybrid_kappa = alpha/10,
                         returnLength = FALSE, postPeriodMomentsOnly = TRUE,
                         gridPoints=10^3, grid.ub = NA, grid.lb = NA, seed = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="computeConditionalCS_DeltaSDRM_+3A_betahat">betahat</code></td>
<td>

<p>Vector of estimated event study coefficients.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRM_+3A_sigma">sigma</code></td>
<td>

<p>Covariance matrix of event study coefficients.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRM_+3A_numpreperiods">numPrePeriods</code></td>
<td>

<p>Number of pre-periods. For this function, <code>numPrePeriods</code> must be greater than one. See details for further explanation.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRM_+3A_numpostperiods">numPostPeriods</code></td>
<td>

<p>Number of post-periods.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRM_+3A_l_vec">l_vec</code></td>
<td>

<p>Vector of length numPostPeriods that describes the scalar parameter of interest, theta = l_vec'tau. Default equals to first basis vector, (1, 0, ..., 0)
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRM_+3A_mbar">Mbar</code></td>
<td>

<p>Tuning parameter Mbar for <code class="reqn">\Delta^{SDRM}(Mbar)</code> that governs how different the maximal pre-period deviation from a linear trend may be from the maximal deviation from a linear trend in the post-treatment period the post-treatment period. Default sets Mbar = 0. See Section 2.3.2 of Rambachan &amp; Roth (2021) for more details.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRM_+3A_alpha">alpha</code></td>
<td>

<p>Desired level of the confidence set. Default equals 0.05 (corresponding to 95% confidence interval)
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRM_+3A_hybrid_flag">hybrid_flag</code></td>
<td>

<p>Flag for whether user wishes to compute a hybridized confidence set. &quot;ARP&quot; specifies the conditional confidence set &quot;LF&quot; specifies the conditional least-favorable confidence set. The conditional FLCI hybrid confidence set is not available for <code class="reqn">\Delta^{SDRM}(Mbar)</code> since the FLCI is infinite length for this choice of <code class="reqn">\Delta</code>. See Section 3.3 and Section 5.3 of Rambachan &amp; Roth (2021) for details. Default equals &quot;LF&quot;.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRM_+3A_hybrid_kappa">hybrid_kappa</code></td>
<td>

<p>Desired first-stage size of hybridized confidence set. Only specify this value if the user wishes to compute a hybridized confidence set. Default equals alpha/10. If user specifies hybrid_flag = &quot;ARP&quot;, set this value to NULL.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRM_+3A_returnlength">returnLength</code></td>
<td>

<p>Logical value. If <code>TRUE</code>, function only returns the length of the robust confidence. If <code>FALSE</code>, function returns dataframe that contains a grid of possible parameter values and a vector of zeros and ones associated with each value in the grid (one denotes that the grid value lies in the confidence set and zero denotes that the grid value does not fall within the confidence set.) Default equals <code>FALSE</code>.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRM_+3A_postperiodmomentsonly">postPeriodMomentsOnly</code></td>
<td>

<p>Logical value. If <code>TRUE</code>, function excludes moments for <code class="reqn">\Delta^{SDRM}(Mbar)</code> that only include pre-period coefficients. Default equals <code>TRUE</code>.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRM_+3A_gridpoints">gridPoints</code></td>
<td>

<p>Number of grid points used in test inversion step. Default equals 1000.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRM_+3A_grid.ub">grid.ub</code></td>
<td>

<p>Upper bound of grid for test inversion. The user should only specify this if she wishes to manually specify the upper bound of the grid. Default equals <code>NA</code> and sets grid upper bound to equal the upper bound of the identified set under parallel trends plus 20*standard deviation of the point estimate, l_vec'betahat.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRM_+3A_grid.lb">grid.lb</code></td>
<td>

<p>Lower bound of grid for test inversion. The user should only specify this if she wishes to manually specify the upper bound of the grid. Default equals <code>NA</code> sets grid lower bound to equal the lower bound of the identified set under parallel trends minus 20*standard deviation of the point estimate, l_vec'betahat.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRM_+3A_seed">seed</code></td>
<td>

<p>Random seed for internal computations; included for reproducibility.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For the choice <code class="reqn">\Delta^{SDRM}</code>, <code>numPrePeriods</code> must be greater than one. As discussed in Section 2.3.2 of Rambachan &amp; Roth (2021), <code class="reqn">\Delta^{SDRM}</code> uses observed non-linearities in the pre-treatment difference in trends to bound the possible non-linearities in the post-treatment difference in trends. This is only possible if there are multiple pre-treatment periods (i.e., <code>numPrePeriods</code> &gt; 1).
</p>


<h3>Value</h3>

<p>If returnLength equals <code>TRUE</code>, function returns a scalar that equals the length of the confidence interval. If returnLength equals <code>FALSE</code>, function returns a dataframe with columns
</p>
<table role = "presentation">
<tr><td><code>grid</code></td>
<td>

<p>Vector of grid values used to construct the confidence interval by test inversion.
</p>
</td></tr>
<tr><td><code>accept</code></td>
<td>

<p>Vector of zeros-ones associated with grid values, where one denotes a grid value that falls within the confidence interval and zero denotes a grid value that falls outside the confidence interval.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Ashesh Rambachan
</p>


<h3>References</h3>

<p>Rambachan, Ashesh and Jonathan Roth. &quot;An Honest Approach to Parallel Trends.&quot; 2021.
</p>

<hr>
<h2 id='computeConditionalCS_DeltaSDRMB'>
Computes conditional and hybridized confidence set for <code class="reqn">\Delta = \Delta^{SDRMB}(Mbar)</code>.
</h2><span id='topic+computeConditionalCS_DeltaSDRMB'></span>

<h3>Description</h3>

<p>Computes the conditional confidence set and hybridized confidence set for <code class="reqn">\Delta = \Delta^{SDRMB}(Mbar)</code>. The set <code class="reqn">\Delta^{SDRMB}(Mbar)</code> adds an additional sign restriction to <code class="reqn">\Delta^{SDRM}(Mbar)</code> that restricts the sign of the bias to be either positive (<code class="reqn">\delta \ge 0</code>) or negative (<code class="reqn">\delta \le 0</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeConditionalCS_DeltaSDRMB(betahat, sigma, numPrePeriods, numPostPeriods,
                                l_vec = .basisVector(index = 1, size = numPostPeriods),
                                Mbar = 0, alpha = 0.05, hybrid_flag = "LF",
                                hybrid_kappa = alpha/10, returnLength = FALSE,
                                postPeriodMomentsOnly = TRUE, biasDirection = "positive",
                                gridPoints=10^3, grid.ub = NA, grid.lb = NA, seed = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="computeConditionalCS_DeltaSDRMB_+3A_betahat">betahat</code></td>
<td>

<p>Vector of estimated event study coefficients.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMB_+3A_sigma">sigma</code></td>
<td>

<p>Covariance matrix of event study coefficients.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMB_+3A_numpreperiods">numPrePeriods</code></td>
<td>

<p>Number of pre-periods. For this function, <code>numPrePeriods</code> must be greater than one. See details for further explanation.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMB_+3A_numpostperiods">numPostPeriods</code></td>
<td>

<p>Number of post-periods.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMB_+3A_l_vec">l_vec</code></td>
<td>

<p>Vector of length numPostPeriods that describes the scalar parameter of interest, theta = l_vec'tau. Default equals to first basis vector, (1, 0, ..., 0)
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMB_+3A_mbar">Mbar</code></td>
<td>

<p>Tuning parameter Mbar for <code class="reqn">\Delta^{SDRM}(Mbar)</code> that governs how different the maximal pre-period deviation from a linear trend may be from the maximal deviation from a linear trend in the post-treatment period the post-treatment period. Default sets Mbar = 0. See Section 2.3.2 of Rambachan &amp; Roth (2021) for more details.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMB_+3A_alpha">alpha</code></td>
<td>

<p>Desired level of the confidence set. Default equals 0.05 (corresponding to 95% confidence interval)
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMB_+3A_hybrid_flag">hybrid_flag</code></td>
<td>

<p>Flag for whether user wishes to compute a hybridized confidence set. &quot;ARP&quot; specifies the conditional confidence set &quot;LF&quot; specifies the conditional least-favorable confidence set. The conditional FLCI hybrid confidence set is not available for <code class="reqn">\Delta^{SDRMB}(Mbar)</code> since the FLCI is infinite length for this choice of <code class="reqn">\Delta</code>. See Section 3.3 and Section 5.3 of Rambachan &amp; Roth (2021) for details. Default equals &quot;LF&quot;.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMB_+3A_hybrid_kappa">hybrid_kappa</code></td>
<td>

<p>Desired first-stage size of hybridized confidence set. Only specify this value if the user wishes to compute a hybridized confidence set. Default equals alpha/10. If user specifies hybrid_flag = &quot;ARP&quot;, set this value to NULL.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMB_+3A_returnlength">returnLength</code></td>
<td>

<p>Logical value. If <code>TRUE</code>, function only returns the length of the robust confidence. If <code>FALSE</code>, function returns dataframe that contains a grid of possible parameter values and a vector of zeros and ones associated with each value in the grid (one denotes that the grid value lies in the confidence set and zero denotes that the grid value does not fall within the confidence set.) Default equals <code>FALSE</code>.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMB_+3A_biasdirection">biasDirection</code></td>
<td>

<p>Specifies direction of bias restriction. If &quot;positive&quot;, bias is restricted to be positive, <code class="reqn">\delta \ge 0</code>. If &quot;negative&quot;, bias is restricted to be negative, <code class="reqn">\delta \le 0</code>. Default equals &quot;positive&quot;.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMB_+3A_postperiodmomentsonly">postPeriodMomentsOnly</code></td>
<td>

<p>Logical value. If <code>TRUE</code>, function excludes moments for <code class="reqn">\Delta^{SDRMB}(Mbar)</code> that only include pre-period coefficients. Default equals <code>TRUE</code>.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMB_+3A_gridpoints">gridPoints</code></td>
<td>

<p>Number of grid points used in test inversion step. Default equals 1000.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMB_+3A_grid.ub">grid.ub</code></td>
<td>

<p>Upper bound of grid for test inversion. The user should only specify this if she wishes to manually specify the upper bound of the grid. Default equals <code>NA</code> and sets grid upper bound to equal the upper bound of the identified set under parallel trends plus 20*standard deviation of the point estimate, l_vec'betahat.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMB_+3A_grid.lb">grid.lb</code></td>
<td>

<p>Lower bound of grid for test inversion. The user should only specify this if she wishes to manually specify the upper bound of the grid. Default equals <code>NA</code> sets grid lower bound to equal the lower bound of the identified set under parallel trends minus 20*standard deviation of the point estimate, l_vec'betahat.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMB_+3A_seed">seed</code></td>
<td>

<p>Random seed for internal computations; included for reproducibility.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The choice <code class="reqn">\Delta^{SDRMB}</code> adds an additional sign restriction to <code class="reqn">\Delta^{SDRM}(Mbar)</code> that restricts the sign of the bias to be either positive (<code class="reqn">\delta \ge 0</code>) or negative (<code class="reqn">\delta \le 0</code>). For this choice <code class="reqn">\Delta^{SDRMB}</code>, <code>numPrePeriods</code> must be greater than one. As discussed in Section 2.3.2 of Rambachan &amp; Roth (2021), <code class="reqn">\Delta^{SDRM}</code> uses observed non-linearities in the pre-treatment difference in trends to bound the possible non-linearities in the post-treatment difference in trends. This is only possible if there are multiple pre-treatment periods (i.e., <code>numPrePeriods</code> &gt; 1).
</p>


<h3>Value</h3>

<p>If returnLength equals <code>TRUE</code>, function returns a scalar that equals the length of the confidence interval. If returnLength equals <code>FALSE</code>, function returns a dataframe with columns
</p>
<table role = "presentation">
<tr><td><code>grid</code></td>
<td>

<p>Vector of grid values used to construct the confidence interval by test inversion.
</p>
</td></tr>
<tr><td><code>accept</code></td>
<td>

<p>Vector of zeros-ones associated with grid values, where one denotes a grid value that falls within the confidence interval and zero denotes a grid value that falls outside the confidence interval.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Ashesh Rambachan
</p>


<h3>References</h3>

<p>Rambachan, Ashesh and Jonathan Roth. &quot;An Honest Approach to Parallel Trends.&quot; 2021.
</p>

<hr>
<h2 id='computeConditionalCS_DeltaSDRMM'>
Computes conditional and hybridized confidence set for <code class="reqn">\Delta = \Delta^{SDRMM}(Mbar)</code>.
</h2><span id='topic+computeConditionalCS_DeltaSDRMM'></span>

<h3>Description</h3>

<p>Computes the conditional confidence set and hybridized confidence set for <code class="reqn">\Delta = \Delta^{SDRMM}(Mbar)</code>. The set <code class="reqn">\Delta^{SDRMM}(Mbar)</code> adds an additional shape restriction to <code class="reqn">\Delta^{SDRM}(Mbar)</code> that restricts the underlying trend to be monotone. It may either be increasing (<code class="reqn">\delta_t \ge \delta_{t-1}</code>) or decreasing (<code class="reqn">\delta_t \le \delta_{t-1}</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeConditionalCS_DeltaSDRMM(betahat, sigma, numPrePeriods, numPostPeriods,
                         l_vec = .basisVector(index = 1, size = numPostPeriods),
                         Mbar = 0, alpha = 0.05, hybrid_flag = "LF",
                         hybrid_kappa = alpha/10, returnLength = FALSE,
                         postPeriodMomentsOnly = TRUE,
                         monotonicityDirection = "increasing",
                         gridPoints=10^3, grid.ub = NA, grid.lb = NA, seed = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="computeConditionalCS_DeltaSDRMM_+3A_betahat">betahat</code></td>
<td>

<p>Vector of estimated event study coefficients.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMM_+3A_sigma">sigma</code></td>
<td>

<p>Covariance matrix of event study coefficients.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMM_+3A_numpreperiods">numPrePeriods</code></td>
<td>

<p>Number of pre-periods. For this function, <code>numPrePeriods</code> must be greater than one. See details for further explanation.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMM_+3A_numpostperiods">numPostPeriods</code></td>
<td>

<p>Number of post-periods.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMM_+3A_l_vec">l_vec</code></td>
<td>

<p>Vector of length numPostPeriods that describes the scalar parameter of interest, theta = l_vec'tau. Default equals to first basis vector, (1, 0, ..., 0)
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMM_+3A_mbar">Mbar</code></td>
<td>

<p>Tuning parameter Mbar for <code class="reqn">\Delta^{SDRM}(Mbar)</code> that governs how different the maximal pre-period deviation from a linear trend may be from the maximal deviation from a linear trend in the post-treatment period the post-treatment period. Default sets Mbar = 0. See Section 2.3.2 of Rambachan &amp; Roth (2021) for more details.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMM_+3A_alpha">alpha</code></td>
<td>

<p>Desired level of the confidence set. Default equals 0.05 (corresponding to 95% confidence interval)
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMM_+3A_hybrid_flag">hybrid_flag</code></td>
<td>

<p>Flag for whether user wishes to compute a hybridized confidence set. &quot;ARP&quot; specifies the conditional confidence set &quot;LF&quot; specifies the conditional least-favorable confidence set. The conditional FLCI hybrid confidence set is not available for <code class="reqn">\Delta^{SDRM}(Mbar)</code> since the FLCI is infinite length for this choice of <code class="reqn">\Delta</code>. See Section 3.3 and Section 5.3 of Rambachan &amp; Roth (2021) for details. Default equals &quot;LF&quot;.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMM_+3A_hybrid_kappa">hybrid_kappa</code></td>
<td>

<p>Desired first-stage size of hybridized confidence set. Only specify this value if the user wishes to compute a hybridized confidence set. Default equals alpha/10. If user specifies hybrid_flag = &quot;ARP&quot;, set this value to NULL.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMM_+3A_returnlength">returnLength</code></td>
<td>

<p>Logical value. If TRUE, function only returns the length of the robust confidence. If FALSE, function returns dataframe that contains a grid of possible parameter values and a vector of zeros and ones associated with each value in the grid (one denotes that the grid value lies in the confidence set and zero denotes that the grid value does not fall within the confidence set.) Default equals FALSE.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMM_+3A_postperiodmomentsonly">postPeriodMomentsOnly</code></td>
<td>

<p>Logical value. If TRUE, function excludes moments for <code class="reqn">\Delta^{SDRM}(Mbar)</code> that only include pre-period coefficients. Default equals TRUE.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMM_+3A_monotonicitydirection">monotonicityDirection</code></td>
<td>

<p>Specifies direction of monotonicity restriction. If &quot;increasing&quot;, underlying trend specified to be increasing, <code class="reqn">\delta_t \ge \delta_{t-1}</code>. If &quot;decreasing&quot;, underlying trend specified to be decreasing <code class="reqn">\delta_t \le \delta_{t-1}</code>. Default equals &quot;increasing.&quot;
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMM_+3A_gridpoints">gridPoints</code></td>
<td>

<p>Number of grid points used in test inversion step. Default equals 1000.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMM_+3A_grid.ub">grid.ub</code></td>
<td>

<p>Upper bound of grid for test inversion. The user should only specify this if she wishes to manually specify the upper bound of the grid. Default equals NA and sets grid upper bound to equal the upper bound of the identified set under parallel trends plus 20*standard deviation of the point estimate, l_vec'betahat.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMM_+3A_grid.lb">grid.lb</code></td>
<td>

<p>Lower bound of grid for test inversion. The user should only specify this if she wishes to manually specify the upper bound of the grid. Default equals NA sets grid lower bound to equal the lower bound of the identified set under parallel trends minus 20*standard deviation of the point estimate, l_vec'betahat.
</p>
</td></tr>
<tr><td><code id="computeConditionalCS_DeltaSDRMM_+3A_seed">seed</code></td>
<td>

<p>Random seed for internal computations; included for reproducibility.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The choice <code class="reqn">\Delta^{SDRMM}</code> adds an additional shape restriction to <code class="reqn">\Delta^{SDRM}(Mbar)</code> that restricts the underlying trend to be monotone. For this choice <code class="reqn">\Delta^{SDRMM}</code>, <code>numPrePeriods</code> must be greater than one. As discussed in Section 2.3.2 of Rambachan &amp; Roth (2021), <code class="reqn">\Delta^{SDRM}</code> uses observed non-linearities in the pre-treatment difference in trends to bound the possible non-linearities in the post-treatment difference in trends. This is only possible if there are multiple pre-treatment periods (i.e., <code>numPrePeriods</code> &gt; 1).
</p>


<h3>Value</h3>

<p>If <code>returnLength</code> equals TRUE, function returns a scalar that equals the length of the confidence interval. If <code>returnLength</code> equals FALSE, function returns a dataframe with columns
</p>
<table role = "presentation">
<tr><td><code>grid</code></td>
<td>

<p>Vector of grid values used to construct the confidence interval by test inversion.
</p>
</td></tr>
<tr><td><code>accept</code></td>
<td>

<p>Vector of zeros-ones associated with grid values, where one denotes a grid value that falls within the confidence interval and zero denotes a grid value that falls outside the confidence interval.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Ashesh Rambachan
</p>


<h3>References</h3>

<p>Rambachan, Ashesh and Jonathan Roth. &quot;An Honest Approach to Parallel Trends.&quot; 2021.
</p>

<hr>
<h2 id='constructOriginalCS'>
Constructs original confidence interval for parameter of interest, theta = l_vec'tau.
</h2><span id='topic+constructOriginalCS'></span>

<h3>Description</h3>

<p>Constructs original confidence interval for parameter of interest, theta = l_vec'tau using the user-specified estimated event study coefficients and variance-covariance matrix.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>constructOriginalCS(betahat, sigma,
                    numPrePeriods, numPostPeriods,
                    l_vec = .basisVector(index = 1, size = numPostPeriods),
                    alpha = 0.05)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="constructOriginalCS_+3A_betahat">betahat</code></td>
<td>

<p>Vector of estimated event study coefficients.
</p>
</td></tr>
<tr><td><code id="constructOriginalCS_+3A_sigma">sigma</code></td>
<td>

<p>Covariance matrix of event study coefficients.
</p>
</td></tr>
<tr><td><code id="constructOriginalCS_+3A_numpreperiods">numPrePeriods</code></td>
<td>

<p>Number of pre-periods.
</p>
</td></tr>
<tr><td><code id="constructOriginalCS_+3A_numpostperiods">numPostPeriods</code></td>
<td>

<p>Number of post-periods.
</p>
</td></tr>
<tr><td><code id="constructOriginalCS_+3A_l_vec">l_vec</code></td>
<td>

<p>Vector of length numPostPeriods that describes the scalar parameter of interest, theta = l_vec'tau. Default equals to first basis vector, (1, 0, ..., 0)
</p>
</td></tr>
<tr><td><code id="constructOriginalCS_+3A_alpha">alpha</code></td>
<td>

<p>Desired size of the robust confidence sets. Default equals 0.05 (corresponding to 95% confidence interval)
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a dataframe with columns
</p>
<table role = "presentation">
<tr><td><code>lb</code></td>
<td>

<p>Lower bound of original confidence set (based on asymptotic normality).
</p>
</td></tr>
<tr><td><code>ub</code></td>
<td>

<p>Upper bound of original confidence set (based on asymptotic normality).
</p>
</td></tr>
<tr><td><code>method</code></td>
<td>

<p>Method for constructing confidence set; set to &quot;Original&quot;.
</p>
</td></tr>
<tr><td><code>Delta</code></td>
<td>

<p>The set Delta that was specified; set to NA.
</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>  # Simple use case; for more detailed examples,
  # see &lt;https://github.com/asheshrambachan/HonestDiD#honestdid&gt;
  constructOriginalCS(betahat        = BCdata_EventStudy$betahat,
                      sigma          = BCdata_EventStudy$sigma,
                      numPrePeriods  = length(BCdata_EventStudy$prePeriodIndices),
                      numPostPeriods = length(BCdata_EventStudy$postPeriodIndices),
                      alpha          = 0.05)
</code></pre>

<hr>
<h2 id='createEventStudyPlot'>
Constructs event study plot
</h2><span id='topic+createEventStudyPlot'></span>

<h3>Description</h3>

<p>Constructs event study plot using the estimated event study coefficients and standard errors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createEventStudyPlot(betahat, stdErrors = NULL, sigma = NULL,
                     numPrePeriods, numPostPeriods, alpha = 0.05, timeVec,
                     referencePeriod, useRelativeEventTime = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="createEventStudyPlot_+3A_betahat">betahat</code></td>
<td>

<p>Vector of estimated event study coefficients.
</p>
</td></tr>
<tr><td><code id="createEventStudyPlot_+3A_stderrors">stdErrors</code></td>
<td>

<p>Vector of standard errors associated with the estimated event study coefficients. Default equals NULL. Either stdErrors or sigma must be specified by the user. If stdErrors is not specified but sigma is, the stdErrors are set to equal the square root of the diagonal elements of sigma.
</p>
</td></tr>
<tr><td><code id="createEventStudyPlot_+3A_sigma">sigma</code></td>
<td>

<p>Covariance matrix of event study coefficients. Default equals NULL. Either stdErrors or sigma must be specified by the user.
</p>
</td></tr>
<tr><td><code id="createEventStudyPlot_+3A_numpreperiods">numPrePeriods</code></td>
<td>

<p>Number of pre-periods.
</p>
</td></tr>
<tr><td><code id="createEventStudyPlot_+3A_numpostperiods">numPostPeriods</code></td>
<td>

<p>Number of post-periods.
</p>
</td></tr>
<tr><td><code id="createEventStudyPlot_+3A_alpha">alpha</code></td>
<td>

<p>Desired size of confidence intervals. Default = 0.05.
</p>
</td></tr>
<tr><td><code id="createEventStudyPlot_+3A_timevec">timeVec</code></td>
<td>

<p>Vector that contains the time periods associated with the event study coefficients. This vector should not include the reference period that is normalized to zero.
</p>
</td></tr>
<tr><td><code id="createEventStudyPlot_+3A_referenceperiod">referencePeriod</code></td>
<td>

<p>Scalar that contains the time period associated with the reference period.
</p>
</td></tr>
<tr><td><code id="createEventStudyPlot_+3A_userelativeeventtime">useRelativeEventTime</code></td>
<td>

<p>Logical that specifies whether user would like the plot to be in relative event time (normalizes the reference period to be zero). Default equals FALSE.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns ggplot object of the event study plot.
</p>


<h3>Author(s)</h3>

<p>Ashesh Rambachan
</p>


<h3>References</h3>

<p>Rambachan, Ashesh and Jonathan Roth. &quot;An Honest Approach to Parallel Trends.&quot; 2021.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  # Simple use case; for more detailed examples,
  # see &lt;https://github.com/asheshrambachan/HonestDiD#honestdid&gt;
  createEventStudyPlot(betahat         = BCdata_EventStudy$betahat,
                       sigma           = BCdata_EventStudy$sigma,
                       numPrePeriods   = length(BCdata_EventStudy$prePeriodIndices),
                       numPostPeriods  = length(BCdata_EventStudy$postPeriodIndices),
                       alpha           = 0.05,
                       timeVec         = BCdata_EventStudy$timeVec,
                       referencePeriod = BCdata_EventStudy$referencePeriod)

</code></pre>

<hr>
<h2 id='createSensitivityPlot'>
Constructs sensitivity plot for <code class="reqn">\Delta = \Delta^{SD}(M)</code>, <code class="reqn">\Delta^{SDB}(M)</code> and <code class="reqn">\Delta^{SDM}(M)</code>
</h2><span id='topic+createSensitivityPlot'></span>

<h3>Description</h3>

<p>This function constructs sensitivity plots that examine how the robust confidence sets change as the parameter M varies for <code class="reqn">\Delta = \Delta^{SD}(M)</code>, <code class="reqn">\Delta^{SDB}(M)</code> and <code class="reqn">\Delta^{SDM}(M)</code>. Similar plots are constructed in Section 6 of Rambachan &amp; Roth (2021).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createSensitivityPlot(robustResults, originalResults,
                      rescaleFactor = 1, maxM = Inf, add_xAxis = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="createSensitivityPlot_+3A_robustresults">robustResults</code></td>
<td>

<p>Dataframe that contains the upper/lower bounds of robust confidence sets for each choice of M. Contains columns: method &ndash;  Method of constructing robust confidence set (e.g., &quot;FLCI&quot;), lb &ndash; Lower bound of robust confidence set, ub &ndash; Upper bound of robust confidence set, M &ndash; M values associated with each robust confidence set.
</p>
</td></tr>
<tr><td><code id="createSensitivityPlot_+3A_originalresults">originalResults</code></td>
<td>

<p>Dataframe that contains the original confidence set for the parameter of interest. Contains columns: method &ndash;  Method of constructing confidence set (e.g., &quot;Original&quot;), lb &ndash; Lower bound of confidence set, ub &ndash; Upper bound of confidence set.
</p>
</td></tr>
<tr><td><code id="createSensitivityPlot_+3A_rescalefactor">rescaleFactor</code></td>
<td>

<p>Scalar that is used to rescale the user specified choices of M and the upper/lower bounds of the confidence sets. Default equals one.
</p>
</td></tr>
<tr><td><code id="createSensitivityPlot_+3A_maxm">maxM</code></td>
<td>

<p>Scalar that specifies the maximum M value to plot in the sensitivity plot. Default equals infinity (no truncation).
</p>
</td></tr>
<tr><td><code id="createSensitivityPlot_+3A_add_xaxis">add_xAxis</code></td>
<td>

<p>Logical specifying whether to plot the x-axis in the sensitivity plot. Default equals TRUE.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns ggplot object of the sensitivity plot.
</p>


<h3>Author(s)</h3>

<p>Ashesh Rambachan
</p>


<h3>References</h3>

<p>Rambachan, Ashesh and Jonathan Roth. &quot;An Honest Approach to Parallel Trends.&quot; 2021.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  # Simple use case; for more detailed examples,
  # see &lt;https://github.com/asheshrambachan/HonestDiD#honestdid&gt;
  robustResults &lt;-
    createSensitivityResults(betahat        = BCdata_EventStudy$betahat,
                             sigma          = BCdata_EventStudy$sigma,
                             numPrePeriods  = length(BCdata_EventStudy$prePeriodIndices),
                             numPostPeriods = length(BCdata_EventStudy$postPeriodIndices),
                             alpha          = 0.05)
  originalResults &lt;-
    constructOriginalCS(betahat        = BCdata_EventStudy$betahat,
                        sigma          = BCdata_EventStudy$sigma,
                        numPrePeriods  = length(BCdata_EventStudy$prePeriodIndices),
                        numPostPeriods = length(BCdata_EventStudy$postPeriodIndices),
                        alpha          = 0.05)
  createSensitivityPlot(robustResults, originalResults)

</code></pre>

<hr>
<h2 id='createSensitivityPlot_relativeMagnitudes'>
Constructs sensitivity plot for <code class="reqn">\Delta = \Delta^{RM}(Mbar)</code>, <code class="reqn">\Delta^{SDRM}{Mbar}</code> and their variants that incorporate additional shape or sign restrictions.
</h2><span id='topic+createSensitivityPlot_relativeMagnitudes'></span>

<h3>Description</h3>

<p>This function constructs sensitivity plots that examine how the robust confidence sets change as the parameter Mbar varies for <code class="reqn">\Delta = \Delta^{RM}(Mbar)</code>, <code class="reqn">\Delta^{SDRM}(Mbar)</code> and their variants that incorporate additional shape or sign restrictions. Similar plots are constructed in Section 6 of Rambachan &amp; Roth (2021).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createSensitivityPlot_relativeMagnitudes(robustResults, originalResults,
                                         rescaleFactor = 1, maxMbar = Inf,
                                         add_xAxis = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="createSensitivityPlot_relativeMagnitudes_+3A_robustresults">robustResults</code></td>
<td>

<p>Dataframe that contains the upper/lower bounds of robust confidence sets for each choice of Mbar. Contains columns: method &ndash;  Method of constructing robust confidence set, lb &ndash; Lower bound of robust confidence set, ub &ndash; Upper bound of robust confidence set, Mbar &ndash; M values associated with each robust confidence set.
</p>
</td></tr>
<tr><td><code id="createSensitivityPlot_relativeMagnitudes_+3A_originalresults">originalResults</code></td>
<td>

<p>Dataframe that contains the original confidence set for the parameter of interest. Contains columns: method &ndash;  Method of constructing confidence set (e.g., &quot;Original&quot;), lb &ndash; Lower bound of confidence set, ub &ndash; Upper bound of confidence set.
</p>
</td></tr>
<tr><td><code id="createSensitivityPlot_relativeMagnitudes_+3A_rescalefactor">rescaleFactor</code></td>
<td>

<p>Scalar that is used to rescale the user specified choices of M and the upper/lower bounds of the confidence sets. Default equals one.
</p>
</td></tr>
<tr><td><code id="createSensitivityPlot_relativeMagnitudes_+3A_maxmbar">maxMbar</code></td>
<td>

<p>Scalar that specifies the maximum Mbar value to plot in the sensitivity plot. Default equals infinity (no truncation).
</p>
</td></tr>
<tr><td><code id="createSensitivityPlot_relativeMagnitudes_+3A_add_xaxis">add_xAxis</code></td>
<td>

<p>Logical specifying whether to plot the x-axis in the sensitivity plot. Default equals TRUE.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns ggplot object of the sensitivity plot.
</p>


<h3>Author(s)</h3>

<p>Ashesh Rambachan
</p>


<h3>References</h3>

<p>Rambachan, Ashesh and Jonathan Roth. &quot;An Honest Approach to Parallel Trends.&quot; 2019.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  # Simple use case. For more detailed examples,
  # see &lt;https://github.com/asheshrambachan/HonestDiD#honestdid&gt;
  kwargs &lt;- list(betahat        = BCdata_EventStudy$betahat,
                 sigma          = BCdata_EventStudy$sigma,
                 numPrePeriods  = length(BCdata_EventStudy$prePeriodIndices),
                 numPostPeriods = length(BCdata_EventStudy$postPeriodIndices),
                 alpha          = 0.05)
  robustResults   &lt;- do.call(createSensitivityResults_relativeMagnitudes, kwargs)
  originalResults &lt;- do.call(constructOriginalCS, kwargs)
  createSensitivityPlot_relativeMagnitudes(robustResults, originalResults)

</code></pre>

<hr>
<h2 id='createSensitivityResults'>
Constructs robust confidence intervals for <code class="reqn">\Delta = \Delta^{SD}(M)</code>, <code class="reqn">\Delta^{SDB}(M)</code> and <code class="reqn">\Delta^{SDM}(M)</code> for vector of possible M values.
</h2><span id='topic+createSensitivityResults'></span>

<h3>Description</h3>

<p>Constructs robust confidence intervals for a choice <code class="reqn">\Delta = \Delta^{SD}(M)</code>, <code class="reqn">\Delta^{SDB}(M)</code> and <code class="reqn">\Delta^{SDM}(M)</code> for vector of possible M values. By default, the function constructs robust confidence intervals for <code class="reqn">\Delta^{SD}(M)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createSensitivityResults(betahat, sigma,
                         numPrePeriods, numPostPeriods,
                         method = NULL,
                         Mvec = NULL,
                         l_vec = .basisVector(index = 1, size = numPostPeriods),
                         monotonicityDirection = NULL,
                         biasDirection = NULL,
                         alpha = 0.05,
                         parallel = FALSE,
                         seed = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="createSensitivityResults_+3A_betahat">betahat</code></td>
<td>

<p>Vector of estimated event study coefficients.
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_+3A_sigma">sigma</code></td>
<td>

<p>Covariance matrix of event study coefficients.
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_+3A_numpreperiods">numPrePeriods</code></td>
<td>

<p>Number of pre-periods.
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_+3A_numpostperiods">numPostPeriods</code></td>
<td>

<p>Number of post-periods.
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_+3A_method">method</code></td>
<td>

<p>String that specifies the choice of method for constructing robust confidence intervals. This must be one of &quot;FLCI&quot;, &quot;Conditional&quot;, &quot;C-F&quot; (conditional FLCI hybrid), or &quot;C-LF&quot; (conditional least-favorable hybrid). Default equals NULL and the function automatically sets method based on the recommendations in Rambachan &amp; Roth (2021) depending on the choice of Delta. If Delta = DeltaSD, default selects the FLCI. If Delta = DeltaSDB or DeltaSDM, default delects the conditional FLCI hybrid.
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_+3A_mvec">Mvec</code></td>
<td>

<p>Vector of M values for which the user wishes to construct robust confidence intervals. If NULL, the function constructs a grid of length 10 that starts at M = 0 and ends at M equal to the upper bound constructed from the pre-periods using the function DeltaSD_upperBound_Mpre if number of pre-periods &gt; 1 or the standard deviation of the first pre-period coefficient if number of pre-periods = 1. Default equals null.
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_+3A_l_vec">l_vec</code></td>
<td>

<p>Vector of length numPostPeriods that describes the scalar parameter of interest, theta = l_vec'tau. Default equals to first basis vector, (1, 0, ..., 0)
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_+3A_biasdirection">biasDirection</code></td>
<td>

<p>This must be specified if the user wishes to add an additional bias restriction to <code class="reqn">\Delta^{SD}(M)</code>. If &quot;positive&quot;, bias is restricted to be positive, <code class="reqn">\delta \ge 0</code>. If &quot;negative&quot;, bias is restricted to be negative, <code class="reqn">\delta \le 0</code>. Default equals NULL.
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_+3A_monotonicitydirection">monotonicityDirection</code></td>
<td>

<p>This must be specified if the user wishes to add an additional monotonicity restriction to <code class="reqn">\Delta^{SD}(M)</code>. If &quot;increasing&quot;, underlying trend specified to be increasing, <code class="reqn">\delta_t \ge \delta_{t-1}</code>. If &quot;decreasing&quot;, underlying trend specified to be decreasing <code class="reqn">\delta_t \le \delta_{t-1}</code>. Default equals NULL
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_+3A_alpha">alpha</code></td>
<td>

<p>Desired size of the robust confidence sets. Default equals 0.05 (corresponding to 95% confidence interval)
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_+3A_parallel">parallel</code></td>
<td>

<p>Logical to indicate whether the user would like to construct the robust confidence intervals in parallel. This uses the Foreach package and doParallel package. Default equals FALSE.
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_+3A_seed">seed</code></td>
<td>

<p>Random seed for internal computations; included for reproducibility.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a dataframe with columns
</p>
<table role = "presentation">
<tr><td><code>lb</code></td>
<td>

<p>Lower bound of robust confidence sets.
</p>
</td></tr>
<tr><td><code>ub</code></td>
<td>

<p>Upper bound of robust confidence sets.
</p>
</td></tr>
<tr><td><code>method</code></td>
<td>

<p>Method for constructing robust confidence sets
</p>
</td></tr>
<tr><td><code>Delta</code></td>
<td>

<p>The set Delta that was specified.
</p>
</td></tr>
<tr><td><code>M</code></td>
<td>

<p>Values of M associated with each robust confidence set.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Ashesh Rambachan
</p>


<h3>References</h3>

<p>Rambachan, Ashesh and Jonathan Roth. &quot;An Honest Approach to Parallel Trends.&quot; 2021.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  # Simple use case; for more detailed examples,
  # see &lt;https://github.com/asheshrambachan/HonestDiD#honestdid&gt;
  createSensitivityResults(betahat        = BCdata_EventStudy$betahat,
                           sigma          = BCdata_EventStudy$sigma,
                           numPrePeriods  = length(BCdata_EventStudy$prePeriodIndices),
                           numPostPeriods = length(BCdata_EventStudy$postPeriodIndices),
                           alpha          = 0.05)

</code></pre>

<hr>
<h2 id='createSensitivityResults_relativeMagnitudes'>
Constructs robust confidence intervals for <code class="reqn">\Delta = \Delta^{RM}(Mbar)</code>, <code class="reqn">\Delta^{SDRM}(Mbar)</code> and their variants that incorporate shape or sign restrictions for a vector of possible Mbar values.
</h2><span id='topic+createSensitivityResults_relativeMagnitudes'></span>

<h3>Description</h3>

<p>Constructs robust confidence intervals for <code class="reqn">\Delta = \Delta^{RM}(Mbar)</code>, <code class="reqn">\Delta^{SDRM}(Mbar)</code> and their variants that incorporate shape or sign restrictions for a vector of possible Mbar values. By default, the function constructs sensitivity results for <code class="reqn">\Delta^{RM}(Mbar)</code> and its variants. The confidence sets are constructed through test inversion.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createSensitivityResults_relativeMagnitudes(betahat, sigma,
                                            numPrePeriods, numPostPeriods,
                                            bound = "deviation from parallel trends",
                                            method = "C-LF",
                                            Mbarvec = NULL,
                                            l_vec = .basisVector(index = 1,
                                                                 size = numPostPeriods),
                                            monotonicityDirection = NULL,
                                            biasDirection = NULL,
                                            alpha = 0.05,
                                            gridPoints = 10^3,
                                            grid.ub = NA,
                                            grid.lb = NA,
                                            parallel = FALSE,
                                            seed = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="createSensitivityResults_relativeMagnitudes_+3A_betahat">betahat</code></td>
<td>

<p>Vector of estimated event study coefficients.
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_relativeMagnitudes_+3A_sigma">sigma</code></td>
<td>

<p>Covariance matrix of event study coefficients.
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_relativeMagnitudes_+3A_numpreperiods">numPrePeriods</code></td>
<td>

<p>Number of pre-periods. If user selects bound = &quot;deviation from linear trends&quot; (<code class="reqn">Delta^{SDRM}</code> as base choice of Delta), then numPrePeriods must be greater than one. See details for further explanation.
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_relativeMagnitudes_+3A_numpostperiods">numPostPeriods</code></td>
<td>

<p>Number of post-periods.
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_relativeMagnitudes_+3A_bound">bound</code></td>
<td>

<p>String that specifies the base choice of Delta (to which additional sign and shape restrictions will be incorporated if specified by the user). This must be either &quot;deviation from parallel trends&quot; or &quot;deviation from linear trend&quot;. If bound equals &quot;deviation from parallel trends&quot;, then the function will select <code class="reqn">\Delta^{RM}(Mbar)</code> as the base choice of <code class="reqn">\Delta</code>. If bound equals &quot;deviation from linear trends&quot;, then the function will select <code class="reqn">\Delta^{SDRM}</code> as the base choice of <code class="reqn">\Delta</code>. By default, this is set to &quot;deviation from parallel trends&quot;. See Section 2.3.1 and 2.3.2 of Rambachan &amp; Roth (2021) for a discussion of these choices of <code class="reqn">\Delta</code>.
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_relativeMagnitudes_+3A_method">method</code></td>
<td>

<p>String that specifies the choice of method for constructing robust confidence intervals. This must be either &quot;Conditional&quot;, or &quot;C-LF&quot; (conditional least-favorable hybrid). Default equals &quot;C-LF&quot; and the function automatically sets method to be &quot;C-LF&quot; based on the recommendations in Rambachan &amp; Roth (2021).
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_relativeMagnitudes_+3A_mbarvec">Mbarvec</code></td>
<td>

<p>Vector of Mbar values for which the user wishes to construct robust confidence intervals. If NULL, the function constructs a grid of length 10 that starts at Mbar = 0 and ends at Mbar = 2. Default equals null.
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_relativeMagnitudes_+3A_l_vec">l_vec</code></td>
<td>

<p>Vector of length numPostPeriods that describes the scalar parameter of interest, theta = l_vec'tau. Default equals to first basis vector, (1, 0, ..., 0)
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_relativeMagnitudes_+3A_biasdirection">biasDirection</code></td>
<td>

<p>This must be specified if the user wishes to add an additional bias restriction to base choice of Delta. If &quot;positive&quot;, bias is restricted to be positive, delta &gt;= 0. If &quot;negative&quot;, bias is restricted to be negative, delta &lt;= 0. Default equals NULL.
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_relativeMagnitudes_+3A_monotonicitydirection">monotonicityDirection</code></td>
<td>

<p>This must be specified if the user wishes to add an additional monotonicity restriction to base choice of Delta. If &quot;increasing&quot;, underlying trend specified to be increasing, <code class="reqn">\delta_t \ge \delta_{t-1}</code>. If &quot;decreasing&quot;, underlying trend specified to be decreasing <code class="reqn">\delta_t \le \delta_{t-1}</code>. Default equals NULL.
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_relativeMagnitudes_+3A_alpha">alpha</code></td>
<td>

<p>Desired size of the robust confidence sets. Default equals 0.05 (corresponding to 95% confidence interval)
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_relativeMagnitudes_+3A_parallel">parallel</code></td>
<td>

<p>Logical to indicate whether the user would like to construct the robust confidence intervals in parallel. This uses the Foreach package and doParallel package. Default equals FALSE.
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_relativeMagnitudes_+3A_gridpoints">gridPoints</code></td>
<td>

<p>Number of grid points used for the underlying test inversion. Default equals 1000. User may wish to change the number of grid points for computational reasons.
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_relativeMagnitudes_+3A_grid.ub">grid.ub</code></td>
<td>

<p>Upper bound of grid used for underlying test inversion. Default sets grid.ub to be equal to twenty times the standard deviation of the estimated target parameter, l_vec * betahat. User may wish to change the upper bound of the grid to suit their application.
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_relativeMagnitudes_+3A_grid.lb">grid.lb</code></td>
<td>

<p>Lower bound of grid used for underlying test inversion. Default sets grid.lb to be equal to negative twenty times the standard deviation of the estimated target parameter, l_vec * betahat. User may wish to change the lower bound of the grid to suit their application.
</p>
</td></tr>
<tr><td><code id="createSensitivityResults_relativeMagnitudes_+3A_seed">seed</code></td>
<td>

<p>Random seed for internal computations; included for reproducibility.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note: If the user specifies bound = &quot;deviation from linear trends&quot;, then numPrePeriods must be greater than one. By specifying bound = &quot;deviation from linear trends&quot;, then the function selects <code class="reqn">\Delta^{SDRM}</code> as the base choice of <code class="reqn">\Delta</code>. As discussed in Section 2.3.2 of Rambachan &amp; Roth (2021), <code class="reqn">\Delta^{SDRM}</code> uses observed non-linearities in the pre-treatment difference in trends to bound the possible non-linearities in the post-treatment difference in trends. This is only possible if there are multiple pre-treatment periods (i.e., numPrePeriods &gt; 1).
</p>


<h3>Value</h3>

<p>Returns a dataframe with columns
</p>
<table role = "presentation">
<tr><td><code>lb</code></td>
<td>

<p>Lower bound of robust confidence sets.
</p>
</td></tr>
<tr><td><code>ub</code></td>
<td>

<p>Upper bound of robust confidence sets.
</p>
</td></tr>
<tr><td><code>method</code></td>
<td>

<p>Method for constructing robust confidence sets
</p>
</td></tr>
<tr><td><code>Delta</code></td>
<td>

<p>The set Delta that was specified.
</p>
</td></tr>
<tr><td><code>M</code></td>
<td>

<p>Values of M associated with each robust confidence set.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Ashesh Rambachan
</p>


<h3>References</h3>

<p>Rambachan, Ashesh and Jonathan Roth. &quot;An Honest Approach to Parallel Trends.&quot; 2021.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  # Simple use case. For more detailed examples,
  # see &lt;https://github.com/asheshrambachan/HonestDiD#honestdid&gt;
  kwargs &lt;- list(betahat        = BCdata_EventStudy$betahat,
                 sigma          = BCdata_EventStudy$sigma,
                 numPrePeriods  = length(BCdata_EventStudy$prePeriodIndices),
                 numPostPeriods = length(BCdata_EventStudy$postPeriodIndices),
                 alpha          = 0.05)
  do.call(createSensitivityResults_relativeMagnitudes, kwargs)

</code></pre>

<hr>
<h2 id='DeltaSD_lowerBound_Mpre'>
Construct lower bound for M for <code class="reqn">\Delta = \Delta^{SD}(M)</code> based on observed pre-period coefficients.
</h2><span id='topic+DeltaSD_lowerBound_Mpre'></span>

<h3>Description</h3>

<p>Constructs a lower bound for M using the observed pre-period coefficients. It constructs a one-sided confidence interval for the maximal second difference of the observed pre-period using the conditional test developed in Andrews, Roth &amp; Pakes (2019). The number of pre-periods (not including the reference period) must be larger than or equal to two.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DeltaSD_lowerBound_Mpre(betahat, sigma, numPrePeriods,
                        alpha = 0.05, grid.ub = NA, gridPoints = 1000)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="DeltaSD_lowerBound_Mpre_+3A_betahat">betahat</code></td>
<td>

<p>Vector of estimated event study coefficients.
</p>
</td></tr>
<tr><td><code id="DeltaSD_lowerBound_Mpre_+3A_sigma">sigma</code></td>
<td>

<p>Covariance matrix of event study coefficients.
</p>
</td></tr>
<tr><td><code id="DeltaSD_lowerBound_Mpre_+3A_numpreperiods">numPrePeriods</code></td>
<td>

<p>Number of pre-periods. Must be larger than or equal to two.
</p>
</td></tr>
<tr><td><code id="DeltaSD_lowerBound_Mpre_+3A_alpha">alpha</code></td>
<td>

<p>Desired size of the one-sided confidence set. Default equals 0.05 (corresponding to 95% confidence interval)
</p>
</td></tr>
<tr><td><code id="DeltaSD_lowerBound_Mpre_+3A_grid.ub">grid.ub</code></td>
<td>

<p>Upper bound of grid of values of M that is used to construct the confidence interval by test inversion. Default equals NA and the upper bound of the grid is set equal to three times the maximum standard error of the observed pre-period event-study coefficients.
</p>
</td></tr>
<tr><td><code id="DeltaSD_lowerBound_Mpre_+3A_gridpoints">gridPoints</code></td>
<td>

<p>Number of points to include in the grid that is used to construct the confidence interval by test inversion. Default equals 1000 points.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a scalar that equals the lower bound of a one-sided confidence interval for the maximal second difference of the observed pre-period coefficients.
</p>


<h3>Author(s)</h3>

<p>Ashesh Rambachan
</p>


<h3>References</h3>

<p>Andrews, Isaiah, Jonathan Roth and Ariel Pakes. &quot;Inference for Linear Conditional Moment Inequalities.&quot; 2019.
Rambachan, Ashesh and Jonathan Roth. &quot;An Honest Approach to Parallel Trends.&quot; 2021.
</p>

<hr>
<h2 id='DeltaSD_upperBound_Mpre'>Construct upper bound for M for <code class="reqn">\Delta = \Delta^{SD}(M)</code> based on observed pre-period coefficients.
</h2><span id='topic+DeltaSD_upperBound_Mpre'></span>

<h3>Description</h3>

<p>Constructs an upper bound for M using the observed pre-period event study coefficients. This is constructed using (1-alpha) level one-sided upper confidence intervala for the second differences of the observed pre-period event study coefficients. The number of pre-periods (not including the reference period) must be larger than or equal to two.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DeltaSD_upperBound_Mpre(betahat, sigma, numPrePeriods, alpha = 0.05)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="DeltaSD_upperBound_Mpre_+3A_betahat">betahat</code></td>
<td>

<p>Vector of estimated event study coefficients.
</p>
</td></tr>
<tr><td><code id="DeltaSD_upperBound_Mpre_+3A_sigma">sigma</code></td>
<td>

<p>Covariance matrix of event study coefficients.
</p>
</td></tr>
<tr><td><code id="DeltaSD_upperBound_Mpre_+3A_numpreperiods">numPrePeriods</code></td>
<td>

<p>Number of pre-periods. Must be larger than or equal to two.
</p>
</td></tr>
<tr><td><code id="DeltaSD_upperBound_Mpre_+3A_alpha">alpha</code></td>
<td>

<p>Desired size of the one-sided confidence set. Default equals 0.05 (corresponding to 95% confidence interval)
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function returns the maximum of the upper bounds of one-sided upper confidence intervals for the observed second differences of the pre-period event study coefficients.
</p>


<h3>Value</h3>

<p>Returns a scalar that equals the maximum of the upper bounds of one-sided upper confidence intervals for the observed second differences of the pre-period event study coefficients.
</p>


<h3>Author(s)</h3>

<p>Ashesh Rambachan
</p>


<h3>References</h3>

<p>Rambachan, Ashesh and Jonathan Roth. &quot;An Honest Approach to Parallel Trends.&quot; 2021.
</p>

<hr>
<h2 id='findOptimalFLCI'>
Constructs optimal fixed length confidence interval for <code class="reqn">\Delta = \Delta^{SD}(M)</code>.
</h2><span id='topic+findOptimalFLCI'></span>

<h3>Description</h3>

<p>Computes the optimal FLCI for the scalar parameter of interest under <code class="reqn">\Delta = \Delta^{SD}(M)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>findOptimalFLCI(betahat, sigma, M = 0,
                numPrePeriods, numPostPeriods,
                l_vec = .basisVector(index = 1, size = numPostPeriods),
                numPoints = 100, alpha = 0.05, seed = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="findOptimalFLCI_+3A_betahat">betahat</code></td>
<td>

<p>Vector of estimated event study coefficients.
</p>
</td></tr>
<tr><td><code id="findOptimalFLCI_+3A_sigma">sigma</code></td>
<td>

<p>Covariance matrix of event study coefficients.
</p>
</td></tr>
<tr><td><code id="findOptimalFLCI_+3A_numpreperiods">numPrePeriods</code></td>
<td>

<p>Number of pre-periods.
</p>
</td></tr>
<tr><td><code id="findOptimalFLCI_+3A_numpostperiods">numPostPeriods</code></td>
<td>

<p>Number of post-periods.
</p>
</td></tr>
<tr><td><code id="findOptimalFLCI_+3A_l_vec">l_vec</code></td>
<td>

<p>Vector of length numPostPeriods that describes the scalar parameter of interest, theta = l_vec'tau. Default equals to first basis vector, (1, 0, ..., 0)
</p>
</td></tr>
<tr><td><code id="findOptimalFLCI_+3A_m">M</code></td>
<td>

<p>Tuning parameter for <code class="reqn">\Delta^{SD}(M)</code> that governs the degree of non-linearity allowed in the violation of parallel trends. Default equals 0
</p>
</td></tr>
<tr><td><code id="findOptimalFLCI_+3A_numpoints">numPoints</code></td>
<td>

<p>Number of possible values when optimizing the FLCI. Default equals 100.
</p>
</td></tr>
<tr><td><code id="findOptimalFLCI_+3A_alpha">alpha</code></td>
<td>

<p>Desired size of the FLCI. Default equals 0.05 (corresponding to 95% confidence interval)
</p>
</td></tr>
<tr><td><code id="findOptimalFLCI_+3A_seed">seed</code></td>
<td>

<p>Random seed for internal computations; included for reproducibility.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list containing items
</p>
<table role = "presentation">
<tr><td><code>FLCI</code></td>
<td>

<p>Vector containing lower and upper bounds of optimal FLCI.
</p>
</td></tr>
<tr><td><code>optimalVec</code></td>
<td>

<p>Vector of length numPrePeriods + numPostPeriods that contains the vector of coefficients associated with the optimal FLCI.
</p>
</td></tr>
<tr><td><code>optimalPrePeriodVec</code></td>
<td>

<p>Vector of length numPrePeriods that contains the vector of coefficients for the optimal FLCI that are associated with the pre-period event study coefficients.
</p>
</td></tr>
<tr><td><code>optimalHalfLength</code></td>
<td>

<p>A scalar that equals the half-length of the optimal FLCI.
</p>
</td></tr>
<tr><td><code>M</code></td>
<td>

<p>Value of M at which the FLCI was computed.
</p>
</td></tr>
<tr><td><code>status</code></td>
<td>

<p>Status of optimization.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Ashesh Rambachan
</p>


<h3>References</h3>

<p>Rambachan, Ashesh and Jonathan Roth. &quot;An Honest Approach to Parallel Trends.&quot; 2021.
</p>

<hr>
<h2 id='LWdata_EventStudy'>
Event study estimates from baseline female specification on employment in Lovenheim &amp; Willen (2019). See discussion in Section 6.2 of Rambachan &amp; Roth (2021).
</h2><span id='topic+LWdata_EventStudy'></span>

<h3>Description</h3>

<p>This list contains the event study estimates from the baseline female specification on employment in Lovenheim &amp; Willen (2019). See discussion in Section 6.2 of Rambachan &amp; Roth (2021).
</p>


<h3>Format</h3>

<p>A list, containing 7 objects:
</p>
<dl>
<dt>betahat</dt><dd><p>Vector of estimated event study coefficients.</p>
</dd>
<dt>sigma</dt><dd><p>Estimated variance-covariance matrix.</p>
</dd>
<dt>timeVec</dt><dd><p>Vector that contains the time periods associated with the event study coefficients.</p>
</dd>
<dt>referencePeriod</dt><dd><p>Reference period that is normalized to zero.</p>
</dd>
<dt>prePeriodIndices</dt><dd><p>Vector containing elements of timeVec that correspond to the pre-periods.</p>
</dd>
<dt>postPeriodIndices</dt><dd><p>Vector containing elements of timeVec that correspond to the post-periods.</p>
</dd>
<dt>stdErrors</dt><dd><p>Vector of standard errors associated with estimated event study coefficients</p>
</dd>
</dl>


</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
