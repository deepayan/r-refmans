<!DOCTYPE html><html lang="en"><head><title>Help for package smdi</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {smdi}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#smdi-package'><p>smdi: Perform Structural Missing Data Investigations</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#smdi_asmd'><p>Computes mean/median absolute standardized mean differences between observed and missing observations</p></a></li>
<li><a href='#smdi_check_covar'><p>This is a utility function to help check input data and covariates provided</p></a></li>
<li><a href='#smdi_data'><p>smdi exemplary lung cancer dataset</p></a></li>
<li><a href='#smdi_data_complete'><p>smdi exemplary lung cancer dataset (with complete data)</p></a></li>
<li><a href='#smdi_diagnose'><p>Computes three group missing data summary diagnostics</p></a></li>
<li><a href='#smdi_hotelling'><p>Computes hotelling's multivariate t-test</p></a></li>
<li><a href='#smdi_little'><p>Computes Little's test</p></a></li>
<li><a href='#smdi_na_indicator'><p>Create binary missing indicator variables by two different strategies</p></a></li>
<li><a href='#smdi_outcome'><p>Computes association between missingness and outcome</p></a></li>
<li><a href='#smdi_rf'><p>Computes random forest-based AUC</p></a></li>
<li><a href='#smdi_style_gt'><p>Takes an object of class smdi and styles it to a publication-ready gt table</p></a></li>
<li><a href='#smdi_summarize'><p>Utility helper to give a light summary of partially observed covariates</p></a></li>
<li><a href='#smdi_vis'><p>Quick ggplot2 barchart visualization of partially observed/missing variables</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Perform Structural Missing Data Investigations</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.1</td>
</tr>
<tr>
<td>Description:</td>
<td>An easy to use implementation of routine structural missing data diagnostics with functions to visualize the proportions of missing observations, investigate missing data patterns and conduct various empirical missing data diagnostic tests. Reference: Weberpals J, Raman SR, Shaw PA, Lee H, Hammill BG, Toh S, Connolly JG, Dandreo KJ, Tian F, Liu W, Li J, Hernández-Muñoz JJ, Glynn RJ, Desai RJ. smdi: an R package to perform structural missing data investigations on partially observed confounders in real-world evidence studies. JAMIA Open. 2024 Jan 31;7(1):ooae008. &lt;<a href="https://doi.org/10.1093%2Fjamiaopen%2Fooae008">doi:10.1093/jamiaopen/ooae008</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://janickweberpals.gitlab-pages.partners.org/smdi/">https://janickweberpals.gitlab-pages.partners.org/smdi/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://gitlab-scm.partners.org/janickweberpals/smdi/-/issues">https://gitlab-scm.partners.org/janickweberpals/smdi/-/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>broom, caret, dplyr, fastDummies, forcats, ggplot2, glue, gt,
Hotelling, lifecycle, magrittr, mice, naniar, parallel, pROC,
randomForest, stringr, survival, tableone, tibble, tidyr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>broom.helpers, cardx, gridExtra, gtsummary, here, knitr,
reactR, reactable, rmarkdown, simsurv, smd, survminer, usethis,
testthat (&ge; 3.0.0), vdiffr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-10-02 11:00:48 UTC; jgw17</td>
</tr>
<tr>
<td>Author:</td>
<td>Janick Weberpals <a href="https://orcid.org/0000-0003-0404-7394"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Janick Weberpals &lt;janick.developer@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-10-04 07:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='smdi-package'>smdi: Perform Structural Missing Data Investigations</h2><span id='topic+smdi'></span><span id='topic+smdi-package'></span>

<h3>Description</h3>

<p>An easy to use implementation of routine structural missing data diagnostics with functions to visualize the proportions of missing observations, investigate missing data patterns and conduct various empirical missing data diagnostic tests. Reference: Weberpals J, Raman SR, Shaw PA, Lee H, Hammill BG, Toh S, Connolly JG, Dandreo KJ, Tian F, Liu W, Li J, Hernández-Muñoz JJ, Glynn RJ, Desai RJ. smdi: an R package to perform structural missing data investigations on partially observed confounders in real-world evidence studies. JAMIA Open. 2024 Jan 31;7(1):ooae008. <a href="https://doi.org/10.1093/jamiaopen/ooae008">doi:10.1093/jamiaopen/ooae008</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Janick Weberpals <a href="mailto:janick.developer@gmail.com">janick.developer@gmail.com</a> (<a href="https://orcid.org/0000-0003-0404-7394">ORCID</a>) [copyright holder]
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://janickweberpals.gitlab-pages.partners.org/smdi/">https://janickweberpals.gitlab-pages.partners.org/smdi/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://gitlab-scm.partners.org/janickweberpals/smdi/-/issues">https://gitlab-scm.partners.org/janickweberpals/smdi/-/issues</a>
</p>
</li></ul>


<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+gg_miss_upset'></span><span id='topic+md.pattern'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>mice</dt><dd><p><code><a href="mice.html#topic+md.pattern">md.pattern</a></code></p>
</dd>
<dt>naniar</dt><dd><p><code><a href="naniar.html#topic+gg_miss_upset">gg_miss_upset</a></code></p>
</dd>
</dl>

<hr>
<h2 id='smdi_asmd'>Computes mean/median absolute standardized mean differences between observed and missing observations</h2><span id='topic+smdi_asmd'></span>

<h3>Description</h3>

<p>This function takes a dataframe with covariates which are partially observed/missing and returns the
median/average absolute standardized mean difference (asmd) and more details for every specified covariate in covar
(if NULL all covariates with at least one NA are considered).
</p>
<p>Important: don't include variables like ID variables, ZIP codes, dates, etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smdi_asmd(
  data = NULL,
  covar = NULL,
  median = TRUE,
  includeNA = FALSE,
  n_cores = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smdi_asmd_+3A_data">data</code></td>
<td>
<p>dataframe or tibble object with partially observed/missing variables</p>
</td></tr>
<tr><td><code id="smdi_asmd_+3A_covar">covar</code></td>
<td>
<p>character covariate or covariate vector with partially observed variable/column name(s) to investigate. If NULL, the function automatically includes all columns with at least one missing observation and all remaining covariates will be used as predictors</p>
</td></tr>
<tr><td><code id="smdi_asmd_+3A_median">median</code></td>
<td>
<p>logical if the median (= TRUE; recommended default) or mean of all absolute standardized mean differences (asmd) should be computed</p>
</td></tr>
<tr><td><code id="smdi_asmd_+3A_includena">includeNA</code></td>
<td>
<p>logical, should missingness of other partially observed covariates be explicitly modeled (default is FALSE)</p>
</td></tr>
<tr><td><code id="smdi_asmd_+3A_n_cores">n_cores</code></td>
<td>
<p>integer, if &gt;1, computations will be parallelized across amount of cores specified in n_cores (only UNIX systems)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The asmd may be one indicator as to how much patient characteristics differ between patients with and without an observed
value for a partially observed covariate. If the median/average asmd is above a certain threshold this may indicate
imbalance in patient covariate distributions which may be indicative of the partially observed covariate following a
missing at random (MAR) mechanims, i.e. the missingness is explainable by other observed covariates. Similarly,
no imbalance between observed covariates may be indicative that missingness cannot be explained with observed
covariates and the underlying missingness mechanism may be completely at random (MCAR) or not at random (e.g.
missingness is only associated with unobserved factors or through the partially observed covariate itself).
</p>
<p>A clear cut-off is hard to determine and analogues to propensity scores,
some researchers have proposed that a standardized difference of 0.1 (10 per cent)
denotes meaningful imbalance in the baseline covariate.
</p>
<p>The asmd is computed for every covariate one-by-one and not jointly. If there is multivariate
missingness, i.e. more than just one missing covariate exists, you can decide what should
happen with the other partially observed 'predictor' covariates using the includeNA parameter.
That is, if includeNA is set to FALSE (default), only the asmd between observed cases will be computed,
and if includeNA is set to TRUE, missingness is modeled as an explicit category (categorical covariates only).
</p>
<p>If any other behavior is desired, data transformations for example with the <code><a href="#topic+smdi_na_indicator">smdi_na_indicator</a></code> function, may make sense
before calling the function.
</p>
<p>The dataframe should generally consist of the exposure variable, the outcome variable(s), the partially observed covariates
and all other fully observed covariates which are deemed important for the final modeling
and (optionally) which could be considered as auxiliary variables. If no partially observed covariates are provided,
the function automatically looks for all variables/columns with NA (powered by the <code><a href="#topic+smdi_summarize">smdi_summarize</a></code> function)
</p>


<h3>Value</h3>

<p>returns an asmd object with average/median absolute standardized mean differences. That is, for each covar, the following outputs are provided:
</p>

<ul>
<li><p> asmd_covar: name of covariate investigated
</p>
</li>
<li><p> asmd_table1: detailed &quot;table 1&quot; illustrating distributions and differences of patient characteristics between those without (1) and with (0) observed covariate
</p>
</li>
<li><p> asmd_plot: plot of absolute standardized mean differences (asmd) between patients without (1) and with (0) observed covariate (sorted by asmd)
</p>
</li>
<li><p> asmd_aggregate: average/median absolute standardized mean difference (and min, max) of patient characteristics between those without (1) and with (0) observed covariate
</p>
</li></ul>



<h3>References</h3>

<p>Austin PC. Balance diagnostics for comparing the distribution of baseline covariates between treatment groups in propensity-score matched samples. Stat Med. 2009 Nov 10;28(25):3083-107.
</p>
<p>Normand SLT, Landrum MB, Guadagnoli E, Ayanian JZ, Ryan TJ, Cleary PD, McNeil BJ. Validating recommendations for coronary angiography following an acute myocardial infarction in the elderly: a matched analysis using propensity scores. Journal of Clinical Epidemiology. 2001;54:387–398.
</p>


<h3>See Also</h3>

<p><code><a href="tableone.html#topic+CreateTableOne">CreateTableOne</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(smdi)
library(dplyr)

# S3 print method
asmd &lt;- smdi_asmd(data = smdi_data)
asmd

# let's look at the first variable
# we can check the complete covariate distribution
asmd$pdl1_num$asmd_table1

</code></pre>

<hr>
<h2 id='smdi_check_covar'>This is a utility function to help check input data and covariates provided</h2><span id='topic+smdi_check_covar'></span>

<h3>Description</h3>

<p>This is a utility function to help check input data and covariates provided
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smdi_check_covar(data = NULL, covar = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smdi_check_covar_+3A_data">data</code></td>
<td>
<p>dataframe or tibble object with partially observed/missing variables</p>
</td></tr>
<tr><td><code id="smdi_check_covar_+3A_covar">covar</code></td>
<td>
<p>character covariate or covariate vector with partially observed variable/column name(s) to investigate. If NULL, the function automatically looks for and includes all columns with at least one missing observation</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns the covariate vector for subsequent tasks or warnings/errors
</p>

<hr>
<h2 id='smdi_data'>smdi exemplary lung cancer dataset</h2><span id='topic+smdi_data'></span>

<h3>Description</h3>

<p>Example dataset with partially observed covariates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smdi_data
</code></pre>


<h3>Format</h3>



<h4><code>smdi_data</code></h4>

<p>A data frame with 2,500 rows and 14 columns:
</p>

<dl>
<dt>exposure</dt><dd><p>Treatment assignment variable (binary). Indicates initiation of the exposure of interest (1) versus a comparator regimen (0)</p>
</dd>
<dt>age_num</dt><dd><p>Age at baseline in years</p>
</dd>
<dt>female_cat</dt><dd><p>Is gender female (0 = no, 1 = yes)</p>
</dd>
<dt>ecog_cat</dt><dd><p>ECOG performance score at baseline (0 versus 1). Shows 30% missingness following an MCAR mechanism.</p>
</dd>
<dt>smoking_cat</dt><dd><p>Smoking status at baseline (0 = non-smoker, 1 = smoker)</p>
</dd>
<dt>physical_cat</dt><dd><p>Physical activity at baseline (not active versus active)</p>
</dd>
<dt>egfr_cat</dt><dd><p>EGFR mutation status (0 = wild-type, 1 = alteration). Shows 20% missingness following an MAR mechanism.</p>
</dd>
<dt>alk_cat</dt><dd><p>ALK transolcation mutation status (0 = wild-type, 1 = alteration)</p>
</dd>
<dt>pdl1_num</dt><dd><p>PD-L1 cell staining biomarker in %. Shows 40% missingness following an MNAR(value) mechanism</p>
</dd>
<dt>histology_cat</dt><dd><p>Tumor histology (0 = nonsquamous, 1 = squamous)</p>
</dd>
<dt>ses_cat</dt><dd><p>Socio-economic status (multi-categorical: 1-low, 2-middle, 3-high)</p>
</dd>
<dt>copd_cat</dt><dd><p>COPD comorbidity at baseline</p>
</dd>
<dt>eventtime</dt><dd><p>time to censoring event</p>
</dd>
<dt>status</dt><dd><p>event indicator at time t; 0 = censored, 1 = deceased</p>
</dd>
</dl>




<h3>Source</h3>

<p>https://janickweberpals.gitlab-pages.partners.org/smdi/articles/data_generation.html
</p>

<hr>
<h2 id='smdi_data_complete'>smdi exemplary lung cancer dataset (with complete data)</h2><span id='topic+smdi_data_complete'></span>

<h3>Description</h3>

<p>Example dataset with complete cases.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smdi_data_complete
</code></pre>


<h3>Format</h3>



<h4><code>smdi_data_complete</code></h4>

<p>A data frame with 2,500 rows and 14 columns:
</p>

<dl>
<dt>exposure</dt><dd><p>Treatment assignment variable (binary). Indicates initiation of the exposure of interest (1) versus a comparator regimen (0)</p>
</dd>
<dt>age_num</dt><dd><p>Age at baseline in years</p>
</dd>
<dt>female_cat</dt><dd><p>Is gender female (0 = no, 1 = yes)</p>
</dd>
<dt>ecog_cat</dt><dd><p>ECOG performance score at baseline (0 versus 1)</p>
</dd>
<dt>smoking_cat</dt><dd><p>Smoking status at baseline (0 = non-smoker, 1 = smoker)</p>
</dd>
<dt>physical_cat</dt><dd><p>Physical activity at baseline (not active versus active)</p>
</dd>
<dt>egfr_cat</dt><dd><p>EGFR mutation status (0 = wild-type, 1 = alteration)</p>
</dd>
<dt>alk_cat</dt><dd><p>ALK transolcation mutation status (0 = wild-type, 1 = alteration)</p>
</dd>
<dt>pdl1_num</dt><dd><p>PD-L1 cell staining biomarker in %</p>
</dd>
<dt>histology_cat</dt><dd><p>Tumor histology (0 = nonsquamous, 1 = squamous)</p>
</dd>
<dt>ses_cat</dt><dd><p>Socio-economic status (multi-categorical: 1-low, 2-middle, 3-high)</p>
</dd>
<dt>copd_cat</dt><dd><p>COPD comorbidity at baseline</p>
</dd>
<dt>eventtime</dt><dd><p>time to censoring event</p>
</dd>
<dt>status</dt><dd><p>event indicator at time t; 0 = censored, 1 = deceased</p>
</dd>
</dl>
<p>...

</p>



<h3>Source</h3>

<p>https://janickweberpals.gitlab-pages.partners.org/smdi/articles/data_generation.html
</p>

<hr>
<h2 id='smdi_diagnose'>Computes three group missing data summary diagnostics</h2><span id='topic+smdi_diagnose'></span>

<h3>Description</h3>

<p>This function bundles and calls all three group diagnostics and returns the most important summary metrics.
For more information and details, please refer to the individual functions.
</p>
<p>Important: don't include variables like ID variables, ZIP codes, dates, etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smdi_diagnose(
  data = NULL,
  covar = NULL,
  median = TRUE,
  includeNA = FALSE,
  train_test_ratio = c(0.7, 0.3),
  set_seed = 42,
  ntree = 1000,
  n_cores = 1,
  model = c("logistic", "linear", "cox"),
  form_lhs = NULL,
  exponentiated = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smdi_diagnose_+3A_data">data</code></td>
<td>
<p>dataframe or tibble object with partially observed/missing variables</p>
</td></tr>
<tr><td><code id="smdi_diagnose_+3A_covar">covar</code></td>
<td>
<p>character covariate or covariate vector with partially observed variable/column name(s) to investigate. If NULL, the function automatically includes all columns with at least one missing observation and all remaining covariates will be used as predictors</p>
</td></tr>
<tr><td><code id="smdi_diagnose_+3A_median">median</code></td>
<td>
<p>logical if the median (= TRUE; recommended default) or mean of all absolute standardized mean differences (asmd) should be computed (smdi_asmd())</p>
</td></tr>
<tr><td><code id="smdi_diagnose_+3A_includena">includeNA</code></td>
<td>
<p>logical, should missingness of other partially observed covariates be explicitly modeled for computation of absolute standardized mean differences (default is FALSE)</p>
</td></tr>
<tr><td><code id="smdi_diagnose_+3A_train_test_ratio">train_test_ratio</code></td>
<td>
<p>numeric vector to indicate the test/train split ratio for random forest missingness prediction model, e.g. c(.7, .3) is the default</p>
</td></tr>
<tr><td><code id="smdi_diagnose_+3A_set_seed">set_seed</code></td>
<td>
<p>seed for reproducibility of random forest missingness prediction model, defaults to 42</p>
</td></tr>
<tr><td><code id="smdi_diagnose_+3A_ntree">ntree</code></td>
<td>
<p>integer, number of trees for random forest missingness prediction model (defaults to 1000 trees)</p>
</td></tr>
<tr><td><code id="smdi_diagnose_+3A_n_cores">n_cores</code></td>
<td>
<p>integer, if &gt;1, computations will be parallelized across amount of cores specified in n_cores (only UNIX systems)</p>
</td></tr>
<tr><td><code id="smdi_diagnose_+3A_model">model</code></td>
<td>
<p>character describing which outcome model to fit to assess the association between covar missingness indicator and outcome. Currently supported are models of type logistic, linear and cox (see smdi_outcome)</p>
</td></tr>
<tr><td><code id="smdi_diagnose_+3A_form_lhs">form_lhs</code></td>
<td>
<p>string specifying the left-hand side of the outcome formula (see smdi_outcome)</p>
</td></tr>
<tr><td><code id="smdi_diagnose_+3A_exponentiated">exponentiated</code></td>
<td>
<p>logical, should results of outcome regression to assess association between missingness and outcome be exponentiated (default is FALSE)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Wrapper for individual diagnostics function.
</p>


<h3>Value</h3>

<p>smdi object including a summary table of all three smdi group diagnostics:
</p>
<p><strong>Group 1 diagnostic:</strong>
</p>

<ul>
<li> <p><code>asmd_mean</code> or <code>asmd_median</code>: average/median absolute standardized mean difference (and min, max) of patient characteristics between those without (1) and with (0) observed covariate
</p>
</li>
<li><p> hotteling_p: p-value of hotelling test. Rejecting the H0 means that Hotelling's test detects a significant difference in the distribution between patients without (1) and with (0) the observed covariate
</p>
</li></ul>

<p><strong>Group 2 diagnostic:</strong>
</p>

<ul>
<li> <p><code>rf_auc</code>: The area under the receiver operating curve (AUC) as a measure of the ability to predict the missingness of the partially observed covariate
</p>
</li></ul>

<p><strong>Group 3 diagnostic:</strong>
</p>

<ul>
<li> <p><code>estimate_univariate</code>: univariate association between missingness indicator of covar and outcome
</p>
</li>
<li> <p><code>estimate_adjusted</code>: association between missingness indicator of covar and outcome conditional on other fully observed covariates and missing indicator variables of other partially observed covariates
</p>
</li></ul>



<h3>References</h3>

<p>TBD
</p>


<h3>See Also</h3>

<p><code><a href="#topic+smdi_asmd">smdi_asmd</a></code>
<code><a href="#topic+smdi_hotelling">smdi_hotelling</a></code>
<code><a href="#topic+smdi_little">smdi_little</a></code>
<code><a href="#topic+smdi_rf">smdi_rf</a></code>
<code><a href="#topic+smdi_outcome">smdi_outcome</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(smdi)

smdi_diagnose(
 data = smdi_data,
 covar = "egfr_cat",
 model = "cox",
 form_lhs = "Surv(eventtime, status)"
 )

</code></pre>

<hr>
<h2 id='smdi_hotelling'>Computes hotelling's multivariate t-test</h2><span id='topic+smdi_hotelling'></span>

<h3>Description</h3>

<p>Hotelling's multivariate t-test, which examines variable
differences conditional on having an observed covariate value or not.
As the power of statistical hypothesis tests can be influenced by
sample size, the combined investigation along with <code><a href="#topic+smdi_asmd">smdi_asmd</a></code> is highly recommended.
</p>
<p>Important: don't include variables like ID variables, ZIP codes, dates, etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smdi_hotelling(data = NULL, covar = NULL, n_cores = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smdi_hotelling_+3A_data">data</code></td>
<td>
<p>dataframe or tibble object with partially observed/missing variables</p>
</td></tr>
<tr><td><code id="smdi_hotelling_+3A_covar">covar</code></td>
<td>
<p>character covariate or covariate vector with partially observed variable/column name(s) to investigate. If NULL, the function automatically includes all columns with at least one missing observation and all remaining covariates will be used as predictors</p>
</td></tr>
<tr><td><code id="smdi_hotelling_+3A_n_cores">n_cores</code></td>
<td>
<p>integer, if &gt;1, computations will be parallelized across amount of cores specified in n_cores (only UNIX systems)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>CAVE: Hotelling's and Little's show high susceptibility with large sample sizes and
it is recommended to always interpret the results along with the other diagnostics.
</p>


<h3>Value</h3>

<p>returns a hotelling object with statistics on hotellings test by covariate. That is, for each covar, the following outputs are provided:
</p>

<ul>
<li><p> stats: hotelling test statistics (for more information see <code><a href="Hotelling.html#topic+hotelling.test">hotelling.test</a></code>)
</p>
</li>
<li><p> pval: p-value of hotelling test
</p>
</li></ul>



<h3>References</h3>

<p>Hotelling H. The Generalization of Student’s Ratio. Ann Math Stat. 1931;2(3):360-378.
</p>


<h3>See Also</h3>

<p><code><a href="Hotelling.html#topic+hotelling.test">hotelling.test</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(smdi)

smdi_hotelling(data = smdi_data)

</code></pre>

<hr>
<h2 id='smdi_little'>Computes Little's test</h2><span id='topic+smdi_little'></span>

<h3>Description</h3>

<p>Little’s chi-squared test takes into account possible patterns of missingness across all variables in the dataset.
Rejection of the null hypothesis of this test would provide sufficient evidence to indicate that the data are (globally) not MCAR.
Please note that compared to <a href="#topic+smdi_hotelling">smdi_hotelling</a>, this function tests for MCAR globally across all missing covariates.
</p>
<p>#' #' Important: don't include variables like ID variables, ZIP codes, dates, etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smdi_little(data = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smdi_little_+3A_data">data</code></td>
<td>
<p>dataframe or tibble object with partially observed/missing variables</p>
</td></tr>
</table>


<h3>Details</h3>

<p>CAVE: Hotelling's and Little's show high susceptibility with large sample sizes and it is recommended to always interpret the results along with the other diagnostics.
</p>


<h3>Value</h3>

<p>returns a little object with statistics on little's test globally.
</p>


<h3>References</h3>

<p>Little RJA. A Test of Missing Completely at Random for Multivariate Data with Missing Values.
J Am Stat Assoc. 1988;83(404):1198-1202.
</p>


<h3>See Also</h3>

<p><code><a href="naniar.html#topic+mcar_test">mcar_test</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(smdi)
library(dplyr)

smdi_data %&gt;%
 smdi_little()

</code></pre>

<hr>
<h2 id='smdi_na_indicator'>Create binary missing indicator variables by two different strategies</h2><span id='topic+smdi_na_indicator'></span>

<h3>Description</h3>

<p>This function takes a dataframe and creates binary missing indicator variable. This can be realized with two
different approaches:
</p>
<p>Approach 1 (drop_NA_col = FALSE): creates a binary missing indicator variable for partially observed variables and retains both original and indicator variables.
</p>
<p>Approach 2 (drop_NA_col = TRUE): creates a binary missing indicator variable for partially observed variables and only retains indicator variables (and drops the original variables).
</p>
<p>Important: Make sure you have your variables format correct and avoid to include variables like ID variables, ZIP codes, dates, etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smdi_na_indicator(data = NULL, covar = NULL, drop_NA_col = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smdi_na_indicator_+3A_data">data</code></td>
<td>
<p>dataframe or tibble object with partially observed/missing variables</p>
</td></tr>
<tr><td><code id="smdi_na_indicator_+3A_covar">covar</code></td>
<td>
<p>character covariate or covariate vector with partially observed variable/column name(s) to investigate. If NULL, the function automatically includes all columns with at least one missing observation.</p>
</td></tr>
<tr><td><code id="smdi_na_indicator_+3A_drop_na_col">drop_NA_col</code></td>
<td>
<p>logical, drop specified columns with NA (default) or retain those columns</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns the dataframe with missing indicator variables (column names are ending on &quot;_NA&quot;)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(smdi)
library(dplyr)

smdi_data %&gt;%
  smdi_na_indicator(drop_NA_col = FALSE) %&gt;%
  glimpse()

smdi_data %&gt;%
  smdi_na_indicator(drop_NA_col = TRUE) %&gt;%
  glimpse()

</code></pre>

<hr>
<h2 id='smdi_outcome'>Computes association between missingness and outcome</h2><span id='topic+smdi_outcome'></span>

<h3>Description</h3>

<p>This function fits outcome models with a covariate missingness indicator(s) of the covariates specified with <em>covar</em>.
The estimates are computed by univariate and adjusted models on all other prognostic covariates
in the dataset. Based on the underlying missingness mechanism, the estimate for the covariate missingness indicator
may indicate a meaningful difference in the outcome between patients with vs w/o
the observed confounder conditional on other covariates that could explain that difference.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smdi_outcome(
  data = NULL,
  covar = NULL,
  model = c("glm", "linear", "cox"),
  glm_family = NULL,
  form_lhs = NULL,
  exponentiated = FALSE,
  n_cores = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smdi_outcome_+3A_data">data</code></td>
<td>
<p>dataframe or tibble object with partially observed/missing variables</p>
</td></tr>
<tr><td><code id="smdi_outcome_+3A_covar">covar</code></td>
<td>
<p>character covariate or covariate vector with partially observed variable/column name(s) to investigate. If NULL, the function automatically includes all columns with at least one missing observation and all remaining covariates will be used as predictors</p>
</td></tr>
<tr><td><code id="smdi_outcome_+3A_model">model</code></td>
<td>
<p>character describing which outcome model to fit to assess the association between covar missingness indicator and outcome. Currently supported are models of type glm, linear and cox</p>
</td></tr>
<tr><td><code id="smdi_outcome_+3A_glm_family">glm_family</code></td>
<td>
<p>glm family object to specify a certain family of generalized linear models (e.g., binomial, gaussian, Gamma, poisson, etc.). For all options see ?stats::family</p>
</td></tr>
<tr><td><code id="smdi_outcome_+3A_form_lhs">form_lhs</code></td>
<td>
<p>string specifying the left-hand side of the outcome formula (see details)</p>
</td></tr>
<tr><td><code id="smdi_outcome_+3A_exponentiated">exponentiated</code></td>
<td>
<p>logical, should results be exponentiated (default is FALSE)</p>
</td></tr>
<tr><td><code id="smdi_outcome_+3A_n_cores">n_cores</code></td>
<td>
<p>integer, if &gt;1, computations will be parallelized across amount of cores specified in n_cores (only UNIX systems)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function automatically fits a univariate and adjusted outcome model. The currently supported models are glm (glm), linear (lm) and cox (survival).
For adjusted models, the function uses all available covariates found in the dataset specified with the data parameter. If covariates should not
be include in the outcome model, these covariates should be dropped beforehand (as with all other functions in the smdi package).
</p>
<p>The left-hand side of the formula (form_lhs) needs to specify the outcome in one of the following ways:
</p>

<ul>
<li><p> glm (binary): character of column name with binary outcome, e.g. &quot;MACE&quot;
</p>
</li>
<li><p> lm (continuous): character of column name with binary outcome, e.g. &quot;WEIGHT_LOSS&quot;
</p>
</li>
<li><p> cox (time-to-event): LHS specifying time-to-event outcome, e.g. &quot;Surv(TIME, STATUS)&quot;
</p>
</li></ul>



<h3>Value</h3>

<p>returns a tibble with univariate and adjusted estimates for each partially observed covar:
</p>

<ul>
<li><p> estimate_univariate: univariate association between missingness indicator of covar and outcome
</p>
</li>
<li><p> estimate_adjusted: association between missingness indicator of covar and outcome conditional on other fully observed covariates and missing indicator variables of other partially observed covariates
</p>
</li></ul>



<h3>References</h3>

<p>...
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+glm">glm</a></code>
<code><a href="survival.html#topic+coxph">coxph</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(smdi)

smdi_outcome(
 data = smdi_data,
 model = "cox",
 form_lhs = "Surv(eventtime, status)"
)


</code></pre>

<hr>
<h2 id='smdi_rf'>Computes random forest-based AUC</h2><span id='topic+smdi_rf'></span>

<h3>Description</h3>

<p>The function trains and fits a random forest model to assess the ability to predict missingness for
the specified covariate(s). If missing indicator can be predicted as a function of observed covariates,
MAR may be a likely scenario and would imply that imputation may be feasible.
</p>
<p>Important: don't include variables like ID variables, ZIP codes, dates, etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smdi_rf(
  data = NULL,
  covar = NULL,
  train_test_ratio = c(0.7, 0.3),
  tune = FALSE,
  set_seed = 42,
  ntree = 1000,
  n_cores = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smdi_rf_+3A_data">data</code></td>
<td>
<p>dataframe or tibble object with partially observed/missing variables</p>
</td></tr>
<tr><td><code id="smdi_rf_+3A_covar">covar</code></td>
<td>
<p>character covariate or covariate vector with partially observed variable/column name(s) to investigate. If NULL, the function automatically includes all columns with at least one missing observation and all remaining covariates will be used as predictors</p>
</td></tr>
<tr><td><code id="smdi_rf_+3A_train_test_ratio">train_test_ratio</code></td>
<td>
<p>numeric vector to indicate the test/train split ratio, e.g. c(.7, .3) which is the default</p>
</td></tr>
<tr><td><code id="smdi_rf_+3A_tune">tune</code></td>
<td>
<p>logical,if TRUE, a 5-fold cross validation is performed combined with a random search for the optimal number of optimal number of variables randomly sampled as candidates at each split (mtry). FALSE is the default due to potentially extensive computation times.</p>
</td></tr>
<tr><td><code id="smdi_rf_+3A_set_seed">set_seed</code></td>
<td>
<p>seed for reproducibility, defaults to 42</p>
</td></tr>
<tr><td><code id="smdi_rf_+3A_ntree">ntree</code></td>
<td>
<p>integer, number of trees (defaults to 1000 trees)</p>
</td></tr>
<tr><td><code id="smdi_rf_+3A_n_cores">n_cores</code></td>
<td>
<p>integer, if &gt;1, computations will be parallelized across amount of cores specified in n_cores (only UNIX systems)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The random forest utilizes the <a href="randomForest.html#topic+randomForest">randomForest</a> engine.
</p>
<p>CAVE: If the missingness indicator variables of other partially observed covariates (indicated by suffix _NA) have an extremely high variable importance (combined with an unusually high AUC),
this might be an indicator of a monotone missing data pattern. In this case it is advisable to exclude other partially observed covariates and run missingness diagnostics separately.
</p>


<h3>Value</h3>

<p>returns an rf object which comes as a list that contains the ROC AUC value and corresponding variable importance in training dataset (latter as ggplot object). That is, for each covar, the following outputs are provided:
</p>

<ul>
<li><p> rf_table: The area under the receiver operating curve (AUC) as a measure of the ability to predict the missingness of the partially observed covariate
</p>
</li>
<li><p> rf_plot: ggplot object illustrating the variable importance for the prediction made expressed by the mean decrease in accuracy per predictor.
That is how much would the accuracy of the prediction (# of correct predictions/Total # of predictions made) decrease, had we left out this specific predictor.
</p>
</li>
<li><p> OOB: estimated OOB error for each investigated partially observed confounder (indicates the performance of the random forest model for data points that are not used in training a tree.)
</p>
</li></ul>



<h3>References</h3>

<p>Sondhi A, Weberpals J, Yerram P, Jiang C, Taylor M, Samant M, Cherng S. A systematic approach towards missing lab data in electronic health records: A case study in non-small cell lung cancer and multiple myeloma. CPT Pharmacometrics Syst Pharmacol. 2023 Jun 15. &lt;doi: 10.1002/psp4.12998.&gt; Epub ahead of print. PMID: 37322818.
</p>


<h3>See Also</h3>

<p><code><a href="randomForest.html#topic+randomForest">randomForest</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(smdi)

smdi_rf(data = smdi_data, covar = "ecog_cat")

</code></pre>

<hr>
<h2 id='smdi_style_gt'>Takes an object of class smdi and styles it to a publication-ready gt table</h2><span id='topic+smdi_style_gt'></span>

<h3>Description</h3>

<p>This function takes either an object of class smdi or data.frame or tibble as
input and styles it to a publication-ready table based on the gt package.
The output is of class gt and can take further gt-based arguments for
customization.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smdi_style_gt(
  smdi_object = NULL,
  include_little = TRUE,
  font_size = 13,
  tbl_width = 800
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smdi_style_gt_+3A_smdi_object">smdi_object</code></td>
<td>
<p>object of class &quot;smdi&quot; or data.frame/tibble</p>
</td></tr>
<tr><td><code id="smdi_style_gt_+3A_include_little">include_little</code></td>
<td>
<p>can be logical (TRUE/FALSE) for displaying Little's p-value that is part of an &quot;smdi&quot; object or a separate object of class &quot;little&quot;</p>
</td></tr>
<tr><td><code id="smdi_style_gt_+3A_font_size">font_size</code></td>
<td>
<p>integer to determine table font size</p>
</td></tr>
<tr><td><code id="smdi_style_gt_+3A_tbl_width">tbl_width</code></td>
<td>
<p>integer to determine table width</p>
</td></tr>
</table>


<h3>Details</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>


<h3>Value</h3>

<p>returns a formatted gt table object
</p>


<h3>See Also</h3>

<p><code><a href="gt.html#topic+gt">gt</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(smdi)
library(dplyr)

smdi_diagnose(
  data = smdi_data,
  covar = "egfr_cat",
  model = "cox",
  form_lhs = "Surv(eventtime, status)"
  ) %&gt;%
smdi_style_gt()

</code></pre>

<hr>
<h2 id='smdi_summarize'>Utility helper to give a light summary of partially observed covariates</h2><span id='topic+smdi_summarize'></span>

<h3>Description</h3>

<p>This function takes a dataframe and automatically returns the amount and proportion of
missing for partially observed covariates assuming a one-row-per-patient
dataframe. This is an important utility function for other functions in this package.
Results can also be stratified by another variable
in which case the proportion missing refers to the amount of
patients in the respective stratum.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smdi_summarize(data = NULL, covar = NULL, strata = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smdi_summarize_+3A_data">data</code></td>
<td>
<p>dataframe or tibble object with partially observed/missing variables. Assumes a a one-row-per-patient format.</p>
</td></tr>
<tr><td><code id="smdi_summarize_+3A_covar">covar</code></td>
<td>
<p>character covariate or covariate vector with partially observed variable/column name(s) to investigate. If NULL, the function automatically includes all columns with at least one missing observation.</p>
</td></tr>
<tr><td><code id="smdi_summarize_+3A_strata">strata</code></td>
<td>
<p>character name of variable/column by which results should be stratified</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns count and proportion of missing values. If strata is specified, the returned proportion refers to the amount of
patients in the respective stratum.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(smdi)

smdi_vis(data = smdi_data)

</code></pre>

<hr>
<h2 id='smdi_vis'>Quick ggplot2 barchart visualization of partially observed/missing variables</h2><span id='topic+smdi_vis'></span>

<h3>Description</h3>

<p>This function takes a dataframe and outputs a nicely formatted
ggplot2 vertical barchart plot that visualizes the proportion
missing for a given variable (vector) or all existent missing
variables. Results can also be stratified by another variable
in which case the proportion missing refers to the amount of
patients in the respective stratum.
</p>
<p>Important: Function assumes the data is in a one-row-per-patient format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smdi_vis(data = NULL, covar = NULL, strata = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smdi_vis_+3A_data">data</code></td>
<td>
<p>dataframe or tibble object with partially observed/missing variables. Assumes a a one-row-per-patient format</p>
</td></tr>
<tr><td><code id="smdi_vis_+3A_covar">covar</code></td>
<td>
<p>character covariate or covariate vector with partially observed variable/column name(s) to investigate. If NULL, the function automatically includes all columns with at least one missing observation</p>
</td></tr>
<tr><td><code id="smdi_vis_+3A_strata">strata</code></td>
<td>
<p>character name of variable/column by which results should be stratified</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns ggplot2 graph displaying selected or automatically identified variables by percent missing
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(smdi)

smdi_vis(data = smdi_data)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
