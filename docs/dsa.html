<!DOCTYPE html><html><head><title>Help for package dsa</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {dsa}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#daily_data'><p>Exemplary time series</p></a></li>
<li><a href='#daily_sim'><p>Create a simple, exemplary, seasonal, daily time series</p></a></li>
<li><a href='#del_names'><p>Delete name of xts</p></a></li>
<li><a href='#Descaler'><p>Invert taking logs and differences of a time series</p></a></li>
<li><a href='#dsa'><p>Seasonally Adjust Daily Time Series</p></a></li>
<li><a href='#dsa_examples'><p>Exemplary dsa outputs</p></a></li>
<li><a href='#freq_xts'><p>Obtain the frequency of an xts time series</p></a></li>
<li><a href='#get_original'><p>Get Original Time Series</p></a></li>
<li><a href='#get_sa'><p>Get Seasonally Adjusted Series</p></a></li>
<li><a href='#get_trend'><p>Get Trend-Cycle</p></a></li>
<li><a href='#holidays'><p>Data set for frequently used regressors</p></a></li>
<li><a href='#make_cal'><p>Creating holiday regressor that increases linearly up to holiday and decreases afterwards</p></a></li>
<li><a href='#make_dummy'><p>Creating set of dummy variables for specified Holidays</p></a></li>
<li><a href='#make_holiday'><p>Creating Holiday dummy</p></a></li>
<li><a href='#multi_xts2ts'><p>Change multiple xts to a multivariate ts</p></a></li>
<li><a href='#output'><p>Creating Output for dsa</p></a></li>
<li><a href='#plot_spectrum'><p>Plot the periodogram of a daily time series</p></a></li>
<li><a href='#plot.daily'><p>Plot daily time series</p></a></li>
<li><a href='#print.daily'><p>Print daily time series</p></a></li>
<li><a href='#Scaler'><p>Take logs and differences of  a time series</p></a></li>
<li><a href='#to_weekly'><p>Change a daily to a weekly differenced time series</p></a></li>
<li><a href='#ts_sum'><p>Add time series</p></a></li>
<li><a href='#ts2xts'><p>Change ts to xts</p></a></li>
<li><a href='#xts2ts'><p>Change xts to ts</p></a></li>
<li><a href='#xtsplot'><p>Create a plot for xts series</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Seasonal Adjustment of Daily Time Series</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.12</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Daniel Ollech &lt;daniel.ollech@bundesbank.de&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Seasonal- and calendar adjustment of time series
    with daily frequency using the DSA approach developed by Ollech,
    Daniel (2018): Seasonal adjustment of daily time series. Bundesbank
    Discussion Paper 41/2018.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, stR</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>ggplot2, xts, zoo, R2HTML, grid, tools, tsoutliers,
htmlwidgets, forecast, rJava, timeDate, dygraphs, gridExtra,
reshape2, stats, seastests</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-06-21 05:00:37 UTC; s3504do</td>
</tr>
<tr>
<td>Author:</td>
<td>Daniel Ollech [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-06-21 05:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='daily_data'>Exemplary time series</h2><span id='topic+daily_data'></span>

<h3>Description</h3>

<p>Three time series that have been analysed by Ollech (2021) and their seasonally and calendar adjusted variants.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>daily_data
</code></pre>


<h3>Format</h3>

<p>An xts data set containing 3 time series:
</p>

<dl>
<dt>currency_circulation</dt><dd><p>Currency in circulation in Germany, in billion Euros, sum of small denominations: i.e. 5 Euro + 10 Euro + 20 Euro + 50 Euro. Series compiled by Deutsche Bundesbank</p>
</dd>
<dt>elec_consumption</dt><dd><p>Electricity consumption in Germany in GWh. Compiled by Bundesnetzagentur (German Federal Network Agency)</p>
</dd>
<dt>no2</dt><dd><p>Nitrogen dioxide (NO2) immissions averaged over all available measuring stations in Europe that are made available by the European Environment Agency (EEA)</p>
</dd>
</dl>
<p>#' </p>
<dl>
<dt>currency_circulation_sa</dt><dd><p>Seasonally and calendar adjusted version using dsa of currency_circulation</p>
</dd>
<dt>elec_consumption_sa</dt><dd><p>Seasonally and calendar adjusted version using dsa of elec_consumption</p>
</dd>
<dt>no2_sa</dt><dd><p>Seasonally and calendar adjusted version using dsa of no2</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>Source</h3>

<p>Own calculations, Deutsche Bundesbank, Bundesnetzagentur, EEA
</p>


<h3>References</h3>

<p>Ollech, Daniel (2021). Seasonal Adjustment of Daily Time Series. Journal of Time Series Econometrics (forthcoming).
</p>

<hr>
<h2 id='daily_sim'>Create a simple, exemplary, seasonal, daily time series</h2><span id='topic+daily_sim'></span>

<h3>Description</h3>

<p>Create a seasonal daily time series and its seasonal and non-seasonal components
</p>


<h3>Usage</h3>

<pre><code class='language-R'>daily_sim(
  n = 8,
  week_effect = 1,
  month_effect = 1,
  year_effect = 1,
  model = c(3, 1, 1),
  ar = c(-0.2, 0.5, 0.1),
  ma = -0.4,
  moving = T,
  week_cycles = 2,
  month_cycles = 3,
  year_cycles = 8
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="daily_sim_+3A_n">n</code></td>
<td>
<p>length of time series in years</p>
</td></tr>
<tr><td><code id="daily_sim_+3A_week_effect">week_effect</code></td>
<td>
<p>increase size of seasonal factor for day-of-the-week</p>
</td></tr>
<tr><td><code id="daily_sim_+3A_month_effect">month_effect</code></td>
<td>
<p>increase size of seasonal factor for day-of-the-month</p>
</td></tr>
<tr><td><code id="daily_sim_+3A_year_effect">year_effect</code></td>
<td>
<p>increase size of seasonal factor for day-of-the-year</p>
</td></tr>
<tr><td><code id="daily_sim_+3A_model">model</code></td>
<td>
<p>ARIMA model for trend and irregular component of series</p>
</td></tr>
<tr><td><code id="daily_sim_+3A_ar">ar</code></td>
<td>
<p>coefficients for AR terms</p>
</td></tr>
<tr><td><code id="daily_sim_+3A_ma">ma</code></td>
<td>
<p>coefficients for MA terms</p>
</td></tr>
<tr><td><code id="daily_sim_+3A_moving">moving</code></td>
<td>
<p>should seasonal factors be moving (=T) or constant (=F)</p>
</td></tr>
<tr><td><code id="daily_sim_+3A_week_cycles">week_cycles</code></td>
<td>
<p>number of cycles per week</p>
</td></tr>
<tr><td><code id="daily_sim_+3A_month_cycles">month_cycles</code></td>
<td>
<p>number of cycles per month</p>
</td></tr>
<tr><td><code id="daily_sim_+3A_year_cycles">year_cycles</code></td>
<td>
<p>number of cycles per year</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The output is an xts time series containing the time series, the true seasonally adjusted series,
</p>
<p>the day-of-the-week seasonal component, the day-of-the-month seasonal component and the
</p>
<p>day-of-the-year seasonal component.
</p>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>Examples</h3>

<pre><code class='language-R'>time_series &lt;- daily_sim(n=4, year_effect=3)
xtsplot(time_series[,1]) # Plot of the time series
xtsplot(time_series[,3:5]) # Plot of the seasonal factors
</code></pre>

<hr>
<h2 id='del_names'>Delete name of xts</h2><span id='topic+del_names'></span>

<h3>Description</h3>

<p>Delete name of xts
</p>


<h3>Usage</h3>

<pre><code class='language-R'>del_names(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="del_names_+3A_x">x</code></td>
<td>
<p>xts time series</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function can be helpful if one xts is created to be equal to another xts and then changed afterwards. In these cases the new xts inherits the column name of the old xts.
</p>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>Examples</h3>

<pre><code class='language-R'>timeseries &lt;- dsa::daily_sim()$original # timeseries inherits name from original
colnames(timeseries)
colnames(del_names(timeseries))
y &lt;- del_names(timeseries)
colnames(merge(timeseries, y))
</code></pre>

<hr>
<h2 id='Descaler'>Invert taking logs and differences of a time series</h2><span id='topic+Descaler'></span>

<h3>Description</h3>

<p>For a series that has been logged and/or differenced, this function reverses these transformations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Descaler(x, y = NA, Diff = 0, Sdiff = 0, Log = FALSE, Lag = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Descaler_+3A_x">x</code></td>
<td>
<p>time series</p>
</td></tr>
<tr><td><code id="Descaler_+3A_y">y</code></td>
<td>
<p>time series used as benchmark</p>
</td></tr>
<tr><td><code id="Descaler_+3A_diff">Diff</code></td>
<td>
<p>number of differences to be taken</p>
</td></tr>
<tr><td><code id="Descaler_+3A_sdiff">Sdiff</code></td>
<td>
<p>number of seasonal differences to be taken</p>
</td></tr>
<tr><td><code id="Descaler_+3A_log">Log</code></td>
<td>
<p>Should time series be logarithmised</p>
</td></tr>
<tr><td><code id="Descaler_+3A_lag">Lag</code></td>
<td>
<p>Lag for Sdiff can be specified</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The time series used as a benchmark (y) is necessary, if regular or seasonal differences have to be inversed, because the first values of this series are used to reconstruct the original values or benchmark the new series.
</p>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>Examples</h3>

<pre><code class='language-R'>a = ts(rnorm(100, 100, 10), start=c(2015,1), frequency=12)
b = Scaler(a, Diff=1, Log=TRUE)
Descaler(b,a, Diff=1, Log=TRUE)
</code></pre>

<hr>
<h2 id='dsa'>Seasonally Adjust Daily Time Series</h2><span id='topic+dsa'></span>

<h3>Description</h3>

<p>Seasonally adjust daily time series using the dsa approach
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dsa(
  series,
  span.start = NULL,
  model = NULL,
  Log = FALSE,
  automodel = "reduced",
  ic = "bic",
  include.constant = FALSE,
  fourier_number = 24,
  max_fourier = 30,
  s.window1 = 53,
  s.window2 = 53,
  s.window3 = 13,
  t.window1 = NULL,
  t.window2 = NULL,
  t.window3 = NULL,
  cval = 7,
  robust1 = TRUE,
  robust2 = TRUE,
  robust3 = TRUE,
  regressor = NULL,
  forecast_regressor = NULL,
  reg_create = NULL,
  reg_dummy = NULL,
  outlier = TRUE,
  outlier_types = c("AO", "LS", "TC"),
  delta = 0.7,
  model_span = NULL,
  feb29 = "sfac",
  trend_month = 3,
  outer3 = NULL,
  inner3 = NULL,
  h = 365,
  reiterate3 = NULL,
  scaler = 1e+07,
  mean_correction = TRUE,
  progress_bar = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dsa_+3A_series">series</code></td>
<td>
<p>Input time series in xts format</p>
</td></tr>
<tr><td><code id="dsa_+3A_span.start">span.start</code></td>
<td>
<p>Define when seasonal adjustment should begin</p>
</td></tr>
<tr><td><code id="dsa_+3A_model">model</code></td>
<td>
<p>ARIMA order of non-seasonal part</p>
</td></tr>
<tr><td><code id="dsa_+3A_log">Log</code></td>
<td>
<p>Boolean. Should multiplicate or additive model be used</p>
</td></tr>
<tr><td><code id="dsa_+3A_automodel">automodel</code></td>
<td>
<p>Set of models to be considered for automatic model detection. Either &quot;full&quot; or &quot;reduced&quot; set of fourier regressors included</p>
</td></tr>
<tr><td><code id="dsa_+3A_ic">ic</code></td>
<td>
<p>Information criterion that is used for automodelling. One of &quot;bic&quot;, &quot;aic&quot; or &quot;aicc&quot;</p>
</td></tr>
<tr><td><code id="dsa_+3A_include.constant">include.constant</code></td>
<td>
<p>Should drift be allowed for model that includes differencing</p>
</td></tr>
<tr><td><code id="dsa_+3A_fourier_number">fourier_number</code></td>
<td>
<p>Number of trigometric regressors to model annual and monthly seasonality</p>
</td></tr>
<tr><td><code id="dsa_+3A_max_fourier">max_fourier</code></td>
<td>
<p>Maximum number of trigonometric regressors allowed if the number is selected automatically, i.e. fourier_number=NULL</p>
</td></tr>
<tr><td><code id="dsa_+3A_s.window1">s.window1</code></td>
<td>
<p>STL parameter s.window for the day of the week effect</p>
</td></tr>
<tr><td><code id="dsa_+3A_s.window2">s.window2</code></td>
<td>
<p>STL parameter s.window for the day of the month effect</p>
</td></tr>
<tr><td><code id="dsa_+3A_s.window3">s.window3</code></td>
<td>
<p>STL parameter s.window for the day of the year effect</p>
</td></tr>
<tr><td><code id="dsa_+3A_t.window1">t.window1</code></td>
<td>
<p>STL parameter t.window for the day of the week effect</p>
</td></tr>
<tr><td><code id="dsa_+3A_t.window2">t.window2</code></td>
<td>
<p>STL parameter t.window for the day of the month effect</p>
</td></tr>
<tr><td><code id="dsa_+3A_t.window3">t.window3</code></td>
<td>
<p>STL parameter t.window for the day of the year effect</p>
</td></tr>
<tr><td><code id="dsa_+3A_cval">cval</code></td>
<td>
<p>Critical value for outlier adjustment</p>
</td></tr>
<tr><td><code id="dsa_+3A_robust1">robust1</code></td>
<td>
<p>Boolean. Should robust STL be used for the day of the week effect</p>
</td></tr>
<tr><td><code id="dsa_+3A_robust2">robust2</code></td>
<td>
<p>Boolean. Should robust STL be used for the day of the month effect</p>
</td></tr>
<tr><td><code id="dsa_+3A_robust3">robust3</code></td>
<td>
<p>Boolean. Should robust STL be used for the day of the year effect</p>
</td></tr>
<tr><td><code id="dsa_+3A_regressor">regressor</code></td>
<td>
<p>Pre-specified regressors</p>
</td></tr>
<tr><td><code id="dsa_+3A_forecast_regressor">forecast_regressor</code></td>
<td>
<p>Pre-specified regressors to be used for forecasting</p>
</td></tr>
<tr><td><code id="dsa_+3A_reg_create">reg_create</code></td>
<td>
<p>Names of Holidays for which regressors will be created</p>
</td></tr>
<tr><td><code id="dsa_+3A_reg_dummy">reg_dummy</code></td>
<td>
<p>If specified dummy variables of specified length are created and used as regressors</p>
</td></tr>
<tr><td><code id="dsa_+3A_outlier">outlier</code></td>
<td>
<p>Should an outlier adjustment be conducted?</p>
</td></tr>
<tr><td><code id="dsa_+3A_outlier_types">outlier_types</code></td>
<td>
<p>The following are possible: &quot;LS&quot;, &quot;TC&quot;, &quot;AO&quot;, &quot;IO&quot;</p>
</td></tr>
<tr><td><code id="dsa_+3A_delta">delta</code></td>
<td>
<p>The decay rate for TC outliers</p>
</td></tr>
<tr><td><code id="dsa_+3A_model_span">model_span</code></td>
<td>
<p>Last x years used for regARIMA modelling</p>
</td></tr>
<tr><td><code id="dsa_+3A_feb29">feb29</code></td>
<td>
<p>How should February 29th be derived: interpolation of adjusted series (&quot;sa&quot;) or combined factor (&quot;sfac&quot;)</p>
</td></tr>
<tr><td><code id="dsa_+3A_trend_month">trend_month</code></td>
<td>
<p>Length of support period for trend estimation</p>
</td></tr>
<tr><td><code id="dsa_+3A_outer3">outer3</code></td>
<td>
<p>Number of iterations of outer loop in STL for day of the year effect</p>
</td></tr>
<tr><td><code id="dsa_+3A_inner3">inner3</code></td>
<td>
<p>Number of iterations of inner loop in STL for day of the year effect</p>
</td></tr>
<tr><td><code id="dsa_+3A_h">h</code></td>
<td>
<p>Forecast horizon in number of days</p>
</td></tr>
<tr><td><code id="dsa_+3A_reiterate3">reiterate3</code></td>
<td>
<p>Number of total iterations of STL for the day of the year effect</p>
</td></tr>
<tr><td><code id="dsa_+3A_scaler">scaler</code></td>
<td>
<p>for additive model, if max(abs(series)) &gt; 1e5, scale series</p>
</td></tr>
<tr><td><code id="dsa_+3A_mean_correction">mean_correction</code></td>
<td>
<p>Boolean. Should seasonal factors be standardised so that their mean (over all full cycles) is 0 for additive and 1 for multiplicative models</p>
</td></tr>
<tr><td><code id="dsa_+3A_progress_bar">progress_bar</code></td>
<td>
<p>Boolean. Should a progress bar be displayed</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function can be used to seasonally and calendar adjust daily time series and decomposing the series into a seasonally adjusted series, a day-of-the-week, a moving holiday, a day-of-the-month and a day-of-the-year component.
</p>
<p>If mean_correction=TRUE (default), the seasonal and calendar factors are corrected, so that over all full years, the mean of the components is 0 in additive models. They will be close to 1 if a multiplicative decomposition (i.e. Log=TRUE) is used. Deviations from 1 may result, because the mean correction is applied to the components before inverting taking logs.
</p>
<p>For long series, the ARIMA modelling and the outlier adjustment may take a long time. It may therefore be a good idea, to specify the ARIMA model used, e.g. model=c(3,1,0). If the series does not contain influential outliers, the outlier adjustment could be skipped by setting outlier=FALSE.
</p>
<p>See vignette for further examples.
</p>


<h3>Value</h3>

<p><code>dsa</code> returns a <code>daily</code> object which contains the output of the seasonal adjustment of a daily time series.
</p>
<p>output Contains the calendar and seasonally adjusted series, original series, implicit calendar and seasonal component, and Loess based trend as an <code>xts</code> object
</p>
<p>fourier_terms The number of sine and cosine terms used to model the seasonal pattern in the RegARIMA model
</p>
<p>reg RegARIMA results
</p>
<p>info Basic information on transformation (Log/Level), differencing and forecast horizon
</p>
<p>stl A list of length 3, containing the STL results of the day-of-week, day-of-the-month and day-of-the-year adjustment, respectively
</p>
<p>outlier Result of the outlier adjustment
</p>
<p>sa_result The original series and the intermediate adjustment results after the day-of-week adjustment (s1_adjusted), calendar adjustment (s1k1_adjusted), day-of-the-month adjustment (s1k1s2_adjusted), and the final adjusted series after the day-of-the-year adjustment (seas_adj) as an <code>xts</code> object
</p>
<p>sa_result2 The original series only adjusted for single components as an <code>xts</code> object. Namely the original series itself (original), the original only adjusted for the day-of-the week (s1_adjusted), calendar (k1_adjusted), day-of-the-month (s2_adjusted), and day-of-the-year (s3_adjusted)
</p>
<p>sfac_result The seasonal and calendar components as an <code>xts</code> object. Namely, the day-of-the-week (s1_fac), calendar (cal_fac), day-of-the-month (s2_fac), and day-of-the-year component (s3_fac) 
</p>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>References</h3>

<p>Ollech, Daniel (2018). Seasonal adjustment of daily time series. Bundesbank Discussion Paper 41/2018.
</p>
<p>Ollech, Daniel (2021). Seasonal Adjustment of Daily Time Series. Journal of Time Series Econometrics (forthcoming).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x = daily_sim(n=4)$original # series with length 4 years
res &lt;- dsa(x, cval=7, model=c(3,1,0),fourier_number = 13)
</code></pre>

<hr>
<h2 id='dsa_examples'>Exemplary dsa outputs</h2><span id='topic+dsa_examples'></span>

<h3>Description</h3>

<p>The dsa results for the three time series that have been analysed by Ollech (2021). Details on the specification can be found in the vignette.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dsa_examples
</code></pre>


<h3>Format</h3>

<p>A list containing the following three objects
</p>

<dl>
<dt>cic_dsa</dt><dd><p>Results from a call to dsa() for the currency in circulation in Germany, in billion Euros, sum of small denominations: i.e. 5 Euro + 10 Euro + 20 Euro + 50 Euro. Series compiled by Deutsche Bundesbank. </p>
</dd>
<dt>elec_dsa</dt><dd><p>Results from a call to dsa() for the electricity consumption in Germany in GWh. Compiled by Bundesnetzagentur (German Federal Network Agency)</p>
</dd>
<dt>no2_dsa</dt><dd><p>Results from a call to dsa() for the nitrogen dioxide (NO2) immissions averaged over all available measuring stations in Europe that are made available by the European Environment Agency (EEA)</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>Source</h3>

<p>Own calculations, Deutsche Bundesbank, Bundesnetzagentur, EEA
</p>


<h3>References</h3>

<p>Ollech, Daniel (2021). Seasonal Adjustment of Daily Time Series. Journal of Time Series Econometrics (forthcoming).
</p>

<hr>
<h2 id='freq_xts'>Obtain the frequency of an xts time series</h2><span id='topic+freq_xts'></span>

<h3>Description</h3>

<p>Estimate the number of periods per year of an xts time series
</p>


<h3>Usage</h3>

<pre><code class='language-R'>freq_xts(series)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="freq_xts_+3A_series">series</code></td>
<td>
<p>time series</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- xts::xts(rnorm(100), seq.Date(from=as.Date("2010-01-01"), by="months", length.out=100))
frequency(x)
</code></pre>

<hr>
<h2 id='get_original'>Get Original Time Series</h2><span id='topic+get_original'></span>

<h3>Description</h3>

<p>Get the original time series from a seasonal adjustment object created by the dsa function. Can deviate from the input data as missings are filled up, usually using zoo::na.locf().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_original(daily.object, forecast = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_original_+3A_daily.object">daily.object</code></td>
<td>
<p>Output from dsa</p>
</td></tr>
<tr><td><code id="get_original_+3A_forecast">forecast</code></td>
<td>
<p>Include forecast of component</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>See Also</h3>

<p>get_sa, get_trend
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(123)
x = daily_sim(n=4)$original # series with length 4 years
res &lt;- dsa(x, cval=7, model=c(3,1,0),fourier_number = 13)
get_original(res)
</code></pre>

<hr>
<h2 id='get_sa'>Get Seasonally Adjusted Series</h2><span id='topic+get_sa'></span>

<h3>Description</h3>

<p>Get the calendar- and seasonally adjusted series from a seasonal adjustment object created by the dsa function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_sa(daily.object, forecast = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_sa_+3A_daily.object">daily.object</code></td>
<td>
<p>Output from dsa</p>
</td></tr>
<tr><td><code id="get_sa_+3A_forecast">forecast</code></td>
<td>
<p>Include forecast of component</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>See Also</h3>

<p>get_trend, get_original
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(123)
x = daily_sim(n=4)$original # series with length 4 years
res &lt;- dsa(x, cval=7, model=c(3,1,0),fourier_number = 13)
get_sa(res)
</code></pre>

<hr>
<h2 id='get_trend'>Get Trend-Cycle</h2><span id='topic+get_trend'></span>

<h3>Description</h3>

<p>Calculate the trend-cycle based on a seasonally adjusted series obtained from a seasonal adjustment object created by the dsa function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_trend(daily.object, trend_length = 93, forecast = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_trend_+3A_daily.object">daily.object</code></td>
<td>
<p>Output from dsa</p>
</td></tr>
<tr><td><code id="get_trend_+3A_trend_length">trend_length</code></td>
<td>
<p>Number of neighbouring points to use, in days</p>
</td></tr>
<tr><td><code id="get_trend_+3A_forecast">forecast</code></td>
<td>
<p>Include forecast of component</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If not odd the parameter trend_length is set to the next highest odd number.
</p>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>See Also</h3>

<p>get_sa, get_original
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(123)
x = daily_sim(n=4)$original # series with length 4 years
res &lt;- dsa(x, cval=7, model=c(3,1,0),fourier_number = 13)
get_trend(res)
</code></pre>

<hr>
<h2 id='holidays'>Data set for frequently used regressors</h2><span id='topic+holidays'></span>

<h3>Description</h3>

<p>Daily time series in xts format containing many regressors for holidays potentially used in the adjustment of daily time series
</p>


<h3>Usage</h3>

<pre><code class='language-R'>holidays
</code></pre>


<h3>Format</h3>

<p>An xts data set containing 131 regressors for the time span 1950 to 2075:
</p>

<dl>
<dt>AllSaints</dt><dd><p>AllSaints, Nov 1</p>
</dd>
<dt>Ascension</dt><dd><p>Ascension</p>
</dd>
<dt>AscensionAft1Day</dt><dd><p>Captures the first day after Ascension</p>
</dd>
<dt>AscensionBef1Day</dt><dd><p>Captures the last day before Ascension</p>
</dd>
<dt>AssumptionOfMary</dt><dd><p>Assumption of Mary, Aug 15</p>
</dd>
<dt>Aug15ZZZ</dt><dd><p>Captures if Assumption of Mary, Aug 15, is a certain weekday (Monday to Sunday)</p>
</dd>
<dt>Base</dt><dd><p>Regressor made up of 0s, can be used to create other regressors</p>
</dd>
<dt>BoxingDay</dt><dd><p>Boxing Day, Dec 26</p>
</dd>
<dt>CarnivalMonday</dt><dd><p>Carnival Monday</p>
</dd>
<dt>ChristmasDay</dt><dd><p>Christmas Day, Dec 25</p>
</dd>
<dt>ChristmasEve</dt><dd><p>Christmas Eve, Dec 24</p>
</dd>
<dt>CorpusChristi</dt><dd><p>Corpus Christi</p>
</dd>
<dt>CorpusChristiAft1Day</dt><dd><p>Captures the first day after Corpus Christi</p>
</dd>
<dt>CorpusChristiBef1Day</dt><dd><p>Captures the last day before Corpus Christi</p>
</dd>
<dt>Dec24ZZZ</dt><dd><p>Captures if Dec 24 is a certain weekday (Monday to Sunday)</p>
</dd>
<dt>Dec25ZZZ</dt><dd><p>Captures if Dec 25 is a certain weekday (Monday to Sunday)</p>
</dd>
<dt>Dec26ZZZ</dt><dd><p>Captures if Dec 26 is a certain weekday (Monday to Sunday)</p>
</dd>
<dt>Dec31ZZZ</dt><dd><p>Captures if Dec 31 is a certain weekday (Monday to Sunday)</p>
</dd>
<dt>Dst</dt><dd><p>Daylight Saving Time, Spring=-1, Autumn=1</p>
</dd>
<dt>DstAutumn</dt><dd><p>Daylight Saving Time, Autumn=1</p>
</dd>
<dt>DstSpring</dt><dd><p>Daylight Saving Time, Spring=1</p>
</dd>
<dt>EasterMonday</dt><dd><p>Easter Monday</p>
</dd>
<dt>EasterMondayAft1Day</dt><dd><p>Captures the first day after Easter Monday</p>
</dd>
<dt>EasterPeriod</dt><dd><p>Captures all days from Holy Thursday to Easter Monday</p>
</dd>
<dt>EasterSunday</dt><dd><p>Easter Sunday</p>
</dd>
<dt>Epiphany</dt><dd><p>Epiphany, Jan 6</p>
</dd>
<dt>GermanUnity</dt><dd><p>German Unity, Oct 3</p>
</dd>
<dt>GoodFriday</dt><dd><p>Good Friday</p>
</dd>
<dt>HolyThursday</dt><dd><p>Holy Thursday</p>
</dd>
<dt>HolySaturday</dt><dd><p>Holy Saturday</p>
</dd>
<dt>Jan1ZZZ</dt><dd><p>Captures if Jan 1 is a certain weekday (Monday to Sunday)</p>
</dd>
<dt>Jan6ZZZ</dt><dd><p>Captures if Jan 1 is a certain weekday (Monday to Sunday)</p>
</dd>
<dt>LabourDay</dt><dd><p>Labour Day, May 1</p>
</dd>
<dt>LabourBridge</dt><dd><p>Captures the bridge days created by May 1, i.e. if surrounding days are either a Monday or Friday</p>
</dd>
<dt>MardiGras</dt><dd><p>Mardi Gras</p>
</dd>
<dt>May1ZZZ</dt><dd><p>Captures if Labour Day, May 1, is a certain weekday (Monday to Sunday)</p>
</dd>
<dt>NewYearsDay</dt><dd><p>New Years Day, Jan 1</p>
</dd>
<dt>NewYearsEve</dt><dd><p>New Years Eve, Dec 31</p>
</dd>
<dt>Nov1ZZZ</dt><dd><p>Captures if Nov 1 is a certain weekday (Monday to Sunday)</p>
</dd>
<dt>Nov1Bridge</dt><dd><p>Captures the bridge days created by Nov 1, i.e. if surrounding days are either a Monday or Friday</p>
</dd>
<dt>Oct3ZZZ</dt><dd><p>Captures if German Unity, Oct 3, is a certain weekday (Monday to Sunday)</p>
</dd>
<dt>Oct3Bridge</dt><dd><p>Captures the bridge days created by Nov 1, i.e. if surrounding days are either a Monday or Friday</p>
</dd>
<dt>Oct31ZZZ</dt><dd><p>Captures if Reformation Day, Oct 31, is a certain weekday (Monday to Sunday)</p>
</dd>
<dt>Oct31Bridge</dt><dd><p>Captures the bridge days created by Reformation Day, i.e. if surrounding days are either a Monday or Friday</p>
</dd>
<dt>Pentecost</dt><dd><p>Pentecost Monday</p>
</dd>
<dt>PentecostAft1Day</dt><dd><p>Captures the first day after Pentecost Monday</p>
</dd>
<dt>PentecostBef1Day</dt><dd><p>Captures the last day before Pentecost Monday</p>
</dd>
<dt>PentecostMonday</dt><dd><p>Alias for Pentecost Monday</p>
</dd>
<dt>PentecostPeriod</dt><dd><p>Period spanning three days from Pentecost Sunday to Tuesday after Pentecost Monday</p>
</dd>
<dt>PostNewEveSat1w</dt><dd><p>Captures Saturdays in the period from Dec 31 to Jan 6</p>
</dd>
<dt>PostNewEveSun1w</dt><dd><p>Captures Sundays in the period from Dec 31 to Jan 6</p>
</dd>
<dt>PostXmasSat1w</dt><dd><p>Captures Saturdays in the period from Dec 27 to Jan 2</p>
</dd>
<dt>PostXmasSun1w</dt><dd><p>Captures Sundays in the period from Dec 27 to Jan 2</p>
</dd>
<dt>PostXmasSat10d</dt><dd><p>Captures Saturdays in the period from Dec 27 to Jan 5</p>
</dd>
<dt>PostXmasSun10d</dt><dd><p>Captures Sundays in the period from Dec 27 to Jan 5</p>
</dd>
<dt>PreXmasSat3d</dt><dd><p>Captures Saturdays in the three days leading up to Christmas</p>
</dd>
<dt>PreXmasSun3d</dt><dd><p>Captures Sundays in the three days leading up to Christmas</p>
</dd>
<dt>ReformationDay</dt><dd><p>Reformation Day, Oct 31</p>
</dd>
<dt>ReformationDay2017</dt><dd><p>Reformation Day, Oct 31 2017 (National holiday that year)</p>
</dd>
<dt>XmasPeriodZZZ</dt><dd><p>Captures weekdays (Monday to Sunday) in the Christmas period from Dec 21 to Jan 5</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>Source</h3>

<p>Own calculations
</p>

<hr>
<h2 id='make_cal'>Creating holiday regressor that increases linearly up to holiday and decreases afterwards</h2><span id='topic+make_cal'></span>

<h3>Description</h3>

<p>Creating holiday regressor that increases linearly up to holiday and decreases afterwards
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_cal(holidays = NULL, h = 365, original = NA, original2 = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_cal_+3A_holidays">holidays</code></td>
<td>
<p>Holidays for which regressor will be created</p>
</td></tr>
<tr><td><code id="make_cal_+3A_h">h</code></td>
<td>
<p>Forecast horizon</p>
</td></tr>
<tr><td><code id="make_cal_+3A_original">original</code></td>
<td>
<p>xts time series which characteristics will be used</p>
</td></tr>
<tr><td><code id="make_cal_+3A_original2">original2</code></td>
<td>
<p>ts time series which characteristics will be used</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used internally in dsa()
</p>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>Examples</h3>

<pre><code class='language-R'>a &lt;- daily_sim(n=8)$original
## Not run: make_cal(holidays="Easter", original=a, original2=xts2ts(a, freq=365))
</code></pre>

<hr>
<h2 id='make_dummy'>Creating set of dummy variables for specified Holidays</h2><span id='topic+make_dummy'></span>

<h3>Description</h3>

<p>Creating set of dummy variables for specified Holidays
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_dummy(
  holidays = NULL,
  from = -5,
  to = 5,
  h = 365,
  original = NA,
  original2 = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_dummy_+3A_holidays">holidays</code></td>
<td>
<p>holidays for which dummy variables will be created</p>
</td></tr>
<tr><td><code id="make_dummy_+3A_from">from</code></td>
<td>
<p>start of holiday regressor. Relative to specified holiday</p>
</td></tr>
<tr><td><code id="make_dummy_+3A_to">to</code></td>
<td>
<p>end of holiday regressor. Relative to specified holiday</p>
</td></tr>
<tr><td><code id="make_dummy_+3A_h">h</code></td>
<td>
<p>forecast horizon</p>
</td></tr>
<tr><td><code id="make_dummy_+3A_original">original</code></td>
<td>
<p>xts time series which characteristics will be used</p>
</td></tr>
<tr><td><code id="make_dummy_+3A_original2">original2</code></td>
<td>
<p>ts time series which characteristics will be used</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used internally in dsa()
</p>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>

<hr>
<h2 id='make_holiday'>Creating Holiday dummy</h2><span id='topic+make_holiday'></span>

<h3>Description</h3>

<p>This function uses the Holiday dates of the timeDate::timeDate package to create dummies on a specified holiday.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_holiday(dates = timeDate::Easter(2000:2030), shift = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_holiday_+3A_dates">dates</code></td>
<td>
<p>Holiday and period for which dummy shall be created</p>
</td></tr>
<tr><td><code id="make_holiday_+3A_shift">shift</code></td>
<td>
<p>shifting point in time for dummy</p>
</td></tr>
</table>


<h3>Details</h3>

<p>With shift the user can specify for how many days before (negative value) or after (positive value) the holiday a dummy will be created.
</p>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>Examples</h3>

<pre><code class='language-R'>make_holiday(dates=timeDate::Easter(2000:2030), shift=-1)
</code></pre>

<hr>
<h2 id='multi_xts2ts'>Change multiple xts to a multivariate ts</h2><span id='topic+multi_xts2ts'></span>

<h3>Description</h3>

<p>Change multiple xts to a multivariate ts
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multi_xts2ts(x, short = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="multi_xts2ts_+3A_x">x</code></td>
<td>
<p>xts time series</p>
</td></tr>
<tr><td><code id="multi_xts2ts_+3A_short">short</code></td>
<td>
<p>Is series too short for xts2ts to work?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the ts are used for forecasting
</p>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- dsa::daily_sim()$original
y &lt;- dsa::daily_sim()$original
multi_xts2ts(merge(x,y))
</code></pre>

<hr>
<h2 id='output'>Creating Output for dsa</h2><span id='topic+output'></span>

<h3>Description</h3>

<p>This function creates HTML output in a specified folder for objects of class daily
</p>


<h3>Usage</h3>

<pre><code class='language-R'>output(
  daily_object,
  path = getwd(),
  short = FALSE,
  SI = TRUE,
  SI365.seed = 3,
  spec = TRUE,
  outlier = TRUE,
  Factor = "auto",
  every_day = TRUE,
  seasonals = FALSE,
  spectrum_linesize = 0.5,
  seasonality_tests = TRUE,
  progress_bar = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="output_+3A_daily_object">daily_object</code></td>
<td>
<p>output of dsa() function</p>
</td></tr>
<tr><td><code id="output_+3A_path">path</code></td>
<td>
<p>Path that HTML file is written to</p>
</td></tr>
<tr><td><code id="output_+3A_short">short</code></td>
<td>
<p>Boolean. If true only short version of output is produced</p>
</td></tr>
<tr><td><code id="output_+3A_si">SI</code></td>
<td>
<p>Including graphs of SI-ratios</p>
</td></tr>
<tr><td><code id="output_+3A_si365.seed">SI365.seed</code></td>
<td>
<p>This seed influences which days of the year are shown as SI-ratios</p>
</td></tr>
<tr><td><code id="output_+3A_spec">spec</code></td>
<td>
<p>Boolean. Inclusion of spectral plots</p>
</td></tr>
<tr><td><code id="output_+3A_outlier">outlier</code></td>
<td>
<p>Boolean. Inclusion of outlier plots</p>
</td></tr>
<tr><td><code id="output_+3A_factor">Factor</code></td>
<td>
<p>Scaling factor for series with large values</p>
</td></tr>
<tr><td><code id="output_+3A_every_day">every_day</code></td>
<td>
<p>Boolean. Inclusion of table that summarizes daily results</p>
</td></tr>
<tr><td><code id="output_+3A_seasonals">seasonals</code></td>
<td>
<p>Boolean. Plots of seasonal factors as interactive instead of static graph</p>
</td></tr>
<tr><td><code id="output_+3A_spectrum_linesize">spectrum_linesize</code></td>
<td>
<p>Width of lines in spectrum</p>
</td></tr>
<tr><td><code id="output_+3A_seasonality_tests">seasonality_tests</code></td>
<td>
<p>Boolean. Inclusion of seasonality tests</p>
</td></tr>
<tr><td><code id="output_+3A_progress_bar">progress_bar</code></td>
<td>
<p>Should a progress bar be displayed?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function can be used to create plots and tables necessary for the analysis of seasonally and calendar adjusted daily time series. Uses the output of dsa() as an input.
</p>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>Examples</h3>

<pre><code class='language-R'>res &lt;- dsa(daily_sim(4)$original, cval=7, model=c(3,1,0),fourier_number = 13)
## Not run: output(res)
</code></pre>

<hr>
<h2 id='plot_spectrum'>Plot the periodogram of a daily time series</h2><span id='topic+plot_spectrum'></span>

<h3>Description</h3>

<p>Plot the periodogram of a daily time series
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_spectrum(
  x,
  xlog = FALSE,
  size = 1,
  color = "black",
  vline_color = "#6F87B2"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_spectrum_+3A_x">x</code></td>
<td>
<p>xts or ts, daily timeseries</p>
</td></tr>
<tr><td><code id="plot_spectrum_+3A_xlog">xlog</code></td>
<td>
<p>should x-axis be log transformed</p>
</td></tr>
<tr><td><code id="plot_spectrum_+3A_size">size</code></td>
<td>
<p>linesize</p>
</td></tr>
<tr><td><code id="plot_spectrum_+3A_color">color</code></td>
<td>
<p>color of line</p>
</td></tr>
<tr><td><code id="plot_spectrum_+3A_vline_color">vline_color</code></td>
<td>
<p>color of vertical lines</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Plot uses ggplot2 and can be changed accordingly. The spectrum is build around the spec.pgram() function
</p>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- daily_sim(3)$original
plot_spectrum(x)
</code></pre>

<hr>
<h2 id='plot.daily'>Plot daily time series</h2><span id='topic+plot.daily'></span>

<h3>Description</h3>

<p>Plotting output for objects of class &quot;daily&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'daily'
plot(x, dy = TRUE, trend = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.daily_+3A_x">x</code></td>
<td>
<p>Result of dsa() that will be plotted</p>
</td></tr>
<tr><td><code id="plot.daily_+3A_dy">dy</code></td>
<td>
<p>should dygraphs be used for plotting</p>
</td></tr>
<tr><td><code id="plot.daily_+3A_trend">trend</code></td>
<td>
<p>Boolean. Inclusion of a trend estimate.</p>
</td></tr>
<tr><td><code id="plot.daily_+3A_...">...</code></td>
<td>
<p>Other plot parameters (only if dy=FALSE)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The original series is plotted in black, the seasonally adjusted series is colored in red, and if trend=T, a blue trend line is added.
</p>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- daily_sim(3)$original
## Not run: res&lt;- dsa(x, fourier_number = 24, outlier.types="AO", reg.create=NULL, model=c(3,1,0))
## Not run: plot(res, dy=FALSE)
</code></pre>

<hr>
<h2 id='print.daily'>Print daily time series</h2><span id='topic+print.daily'></span>

<h3>Description</h3>

<p>Print output for objects of class &quot;daily&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'daily'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.daily_+3A_x">x</code></td>
<td>
<p>Result of dsa() that will be printed</p>
</td></tr>
<tr><td><code id="print.daily_+3A_...">...</code></td>
<td>
<p>further arguments handed to print()</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- daily_sim(3)$original
## Not run: res&lt;- dsa(x, fourier_number = 24, outlier.types="AO", reg.create=NULL, model=c(3,1,0))
## Not run: print(res)
</code></pre>

<hr>
<h2 id='Scaler'>Take logs and differences of  a time series</h2><span id='topic+Scaler'></span>

<h3>Description</h3>

<p>Logarithmise and / or difference a time series
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Scaler(x, Diff = 0, Sdiff = 0, Log = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Scaler_+3A_x">x</code></td>
<td>
<p>time series</p>
</td></tr>
<tr><td><code id="Scaler_+3A_diff">Diff</code></td>
<td>
<p>number of differences to be taken</p>
</td></tr>
<tr><td><code id="Scaler_+3A_sdiff">Sdiff</code></td>
<td>
<p>number of seasonal differences to be taken</p>
</td></tr>
<tr><td><code id="Scaler_+3A_log">Log</code></td>
<td>
<p>Should time series be logarithmised</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Function is used in dsa to let the user decide whether logs and differences should be taken.
</p>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>Examples</h3>

<pre><code class='language-R'>a = ts(rnorm(100, 100, 10), start=c(2015,1), frequency=12)
Scaler(a, Diff=1, Log=TRUE)
</code></pre>

<hr>
<h2 id='to_weekly'>Change a daily to a weekly differenced time series</h2><span id='topic+to_weekly'></span>

<h3>Description</h3>

<p>This function computes the weekly aggregates or differences (by default Friday to Friday) for any daily time series in the xts format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>to_weekly(x, incl_forecast = T, forecast_length = 365, diff = T, dayofweek = 5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="to_weekly_+3A_x">x</code></td>
<td>
<p>input series</p>
</td></tr>
<tr><td><code id="to_weekly_+3A_incl_forecast">incl_forecast</code></td>
<td>
<p>whether the series contains a forecast that shall be omitted</p>
</td></tr>
<tr><td><code id="to_weekly_+3A_forecast_length">forecast_length</code></td>
<td>
<p>length of forecast</p>
</td></tr>
<tr><td><code id="to_weekly_+3A_diff">diff</code></td>
<td>
<p>should series be differenced</p>
</td></tr>
<tr><td><code id="to_weekly_+3A_dayofweek">dayofweek</code></td>
<td>
<p>which day of the week (friday=5)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>Examples</h3>

<pre><code class='language-R'>to_weekly(xts::xts(rnorm(365, 10,1), seq.Date(as.Date("2010-01-01"), length.out=365, by="days")))
</code></pre>

<hr>
<h2 id='ts_sum'>Add time series</h2><span id='topic+ts_sum'></span>

<h3>Description</h3>

<p>Sequentially add a set of time series
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ts_sum(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ts_sum_+3A_...">...</code></td>
<td>
<p>list of ts time series that are added together</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used internally in dsa()
</p>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ts_sum(list(ts(rnorm(100,10,1)), ts(rnorm(100,10,1)), ts(rnorm(100,10,1))))
</code></pre>

<hr>
<h2 id='ts2xts'>Change ts to xts</h2><span id='topic+ts2xts'></span>

<h3>Description</h3>

<p>Change the format of a time series from ts to xts. Has been optimised for the use in dsa(), i.e. for daily time series.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ts2xts(x_ts)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ts2xts_+3A_x_ts">x_ts</code></td>
<td>
<p>ts series to be changed to xts</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used internally in dsa(). Does not create values for the 29th of February.
</p>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ts2xts(stats::ts(rnorm(1000, 10,1), start=c(2001,1), freq=365))
</code></pre>

<hr>
<h2 id='xts2ts'>Change xts to ts</h2><span id='topic+xts2ts'></span>

<h3>Description</h3>

<p>Change the format of a time series from xts to ts. Has been optimised for the use in dsa(), i.e. for daily time series.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xts2ts(series, freq = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="xts2ts_+3A_series">series</code></td>
<td>
<p>xts series to be changed to ts</p>
</td></tr>
<tr><td><code id="xts2ts_+3A_freq">freq</code></td>
<td>
<p>frequency of ts series</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used internally in dsa(). Does not create values for the 29th of February.
</p>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>Examples</h3>

<pre><code class='language-R'>xts2ts(xts::xts(rnorm(1095, 10,1), seq.Date(as.Date("2010-01-01"), length.out=1095, by="days")))
</code></pre>

<hr>
<h2 id='xtsplot'>Create a plot for xts series</h2><span id='topic+xtsplot'></span>

<h3>Description</h3>

<p>Creates a plot using an xts series
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xtsplot(
  xts,
  transform = "none",
  type = "line",
  years = NA,
  scale = 1,
  names = NA,
  color = NA,
  main = "",
  legend = NA,
  textsize = 1,
  textsize_x = NA,
  textsize_y = NA,
  textsize_legend = NA,
  textsize_title = NA,
  linesize = 1.1,
  WeekOfYear = F,
  date_breaks = NA,
  date_labels = NA,
  submain = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="xtsplot_+3A_xts">xts</code></td>
<td>
<p>one or many series</p>
</td></tr>
<tr><td><code id="xtsplot_+3A_transform">transform</code></td>
<td>
<p>one of &quot;none&quot;,&quot;diff&quot;, &quot;change&quot; (can be abbreviated)</p>
</td></tr>
<tr><td><code id="xtsplot_+3A_type">type</code></td>
<td>
<p>either &quot;bar&quot;, &quot;bar2&quot; or &quot;line&quot;</p>
</td></tr>
<tr><td><code id="xtsplot_+3A_years">years</code></td>
<td>
<p>number of years to include</p>
</td></tr>
<tr><td><code id="xtsplot_+3A_scale">scale</code></td>
<td>
<p>by what factor should data be scaled.</p>
</td></tr>
<tr><td><code id="xtsplot_+3A_names">names</code></td>
<td>
<p>change names of series</p>
</td></tr>
<tr><td><code id="xtsplot_+3A_color">color</code></td>
<td>
<p>color of the series</p>
</td></tr>
<tr><td><code id="xtsplot_+3A_main">main</code></td>
<td>
<p>title of the plot</p>
</td></tr>
<tr><td><code id="xtsplot_+3A_legend">legend</code></td>
<td>
<p>alignment of legend. &quot;horizontal&quot; or &quot;vertical&quot;</p>
</td></tr>
<tr><td><code id="xtsplot_+3A_textsize">textsize</code></td>
<td>
<p>scale the size of all the text</p>
</td></tr>
<tr><td><code id="xtsplot_+3A_textsize_x">textsize_x</code></td>
<td>
<p>scale size of x-axis labels</p>
</td></tr>
<tr><td><code id="xtsplot_+3A_textsize_y">textsize_y</code></td>
<td>
<p>scale size of y-axis labels</p>
</td></tr>
<tr><td><code id="xtsplot_+3A_textsize_legend">textsize_legend</code></td>
<td>
<p>scale size of legend text</p>
</td></tr>
<tr><td><code id="xtsplot_+3A_textsize_title">textsize_title</code></td>
<td>
<p>scale size of title</p>
</td></tr>
<tr><td><code id="xtsplot_+3A_linesize">linesize</code></td>
<td>
<p>scale the size of the lines</p>
</td></tr>
<tr><td><code id="xtsplot_+3A_weekofyear">WeekOfYear</code></td>
<td>
<p>should x axis be week of year</p>
</td></tr>
<tr><td><code id="xtsplot_+3A_date_breaks">date_breaks</code></td>
<td>
<p>distance between labels (see examples)</p>
</td></tr>
<tr><td><code id="xtsplot_+3A_date_labels">date_labels</code></td>
<td>
<p>format of the date label for x-axis</p>
</td></tr>
<tr><td><code id="xtsplot_+3A_submain">submain</code></td>
<td>
<p>subtitle of the plot</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function uses the ggplot2 package.
The difference between type=&quot;bar&quot; and type=&quot;bar2&quot; is that the former produces barcharts with bars of the second series in front of the bars of the first series (and accordingly for more than two series), while &quot;bar2&quot; creates side-by-side barcharts.
If a scale is supplied, the data will be divided by this number.
</p>


<h3>Author(s)</h3>

<p>Daniel Ollech
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- xts::xts(rnorm(100), seq.Date(as.Date("2010-01-01"), length.out=100, by="months"))
y &lt;- xts::xts(runif(100), seq.Date(as.Date("2010-01-01"), length.out=100, by="months"))
xtsplot(y, transform="diff", type="bar")
xtsplot(y, transform="diff", type="bar", date_breaks="24 months")
xtsplot(merge(x,y), names=c("Gaussian", "Uniform"), main="Simulated series")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
