<!DOCTYPE html><html><head><title>Help for package BLCOP</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {BLCOP}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#BLCOP data sets'><p>Monthly equity returns</p></a></li>
<li><a href='#BLCOPOptions'><p>Global package options</p></a></li>
<li><a href='#BLPosterior'><p>BLposterior</p></a></li>
<li><a href='#BLResult-class'><p>Class &quot;BLResult&quot;: posterior of a market distribution in the Black-Litterman sense</p></a></li>
<li><a href='#BLViews-class'><p>Class &quot;BLViews&quot; (Black-Litterman views)</p></a></li>
<li><a href='#Build Views'><p>Create or add to a BLViews object</p></a></li>
<li><a href='#CAPMList'><p>Compute CAPM alphas for a set of assets</p></a></li>
<li><a href='#Construct views'><p>Create or add to a view object using a graphical interface</p></a></li>
<li><a href='#COPPosterior'><p>Calculate the posterior distribution of the market using copula opinion pooling</p></a></li>
<li><a href='#COPResult-class'><p>Class &quot;COPResult&quot;</p></a></li>
<li><a href='#COPViews-class'><p>Class &quot;COPViews&quot; (copula opinion pooling views)</p></a></li>
<li><a href='#deleteViews'><p>Delete individual views from view objects</p></a></li>
<li><a href='#densityPlots'><p>Density plots of prior and posterior distributions</p></a></li>
<li><a href='#Distribution class constructors'><p>Constructors for distribution and mvdistribution class objects</p></a></li>
<li><a href='#distribution-class'><p>Class &quot;distribution&quot;</p></a></li>
<li><a href='#Estimators'><p>Get prior and posterior estimators stored in package scope</p></a></li>
<li><a href='#Extractors'><p>Extract various fields of view or posterior objects</p></a></li>
<li><a href='#mvdistribution-class'><p>Class &quot;mvdistribution&quot;</p></a></li>
<li><a href='#optimalPortfolios'><p>Calculates optimal portfolios under prior and posterior distributions</p></a></li>
<li><a href='#posteriorEst'><p>This function performs the &quot;core&quot; calculation of the Black-Litterman model.</p></a></li>
<li><a href='#posteriorFeasibility'><p>Calculate the &quot;feasibility&quot; of the (Black-Litterman) posterior mean</p></a></li>
<li><a href='#Replacer functions'><p>Various functions for modifying fields of view objects</p></a></li>
<li><a href='#runBLCOPTests'><p>Execute the BLCOP unit tests</p></a></li>
<li><a href='#sampleFrom'><p>Sample from a distribution object</p></a></li>
<li><a href='#sp500Returns'><p>S\&amp;P500 Returns</p></a></li>
<li><a href='#US13wTB'><p>Risk free rate of return</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Black-Litterman and Copula Opinion Pooling Frameworks</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.3</td>
</tr>
<tr>
<td>Description:</td>
<td>An implementation of the Black-Litterman Model and Attilio
    Meucci's copula opinion pooling framework as described in
    Meucci, Attilio (2005) &lt;<a href="https://doi.org/10.2139%2Fssrn.848407">doi:10.2139/ssrn.848407</a>&gt;,
    Meucci, Attilio (2006) &lt;<a href="https://doi.org/10.2139%2Fssrn.872577">doi:10.2139/ssrn.872577</a>&gt; and
    Meucci, Attilio (2008) &lt;<a href="https://doi.org/10.2139%2Fssrn.1117574">doi:10.2139/ssrn.1117574</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/mangothecat/BLCOP">https://github.com/mangothecat/BLCOP</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/mangothecat/BLCOP/issues">https://github.com/mangothecat/BLCOP/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>methods, MASS, quadprog, RUnit (&ge; 0.4.22), timeSeries,
fBasics, fMultivar, fPortfolio (&ge; 3011.81), rmarkdown, knitr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>sn, corpcor, mnormt</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-01-25 15:30:56 UTC; jrussell</td>
</tr>
<tr>
<td>Author:</td>
<td>Francisco Gochez [aut],
  Richard Chandler-Mant [aut],
  Suchen Jin [aut],
  Jinjing Xie [aut],
  Ava Yang [ctb] (Previous maintainer),
  Joe Russell [cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Joe Russell &lt;jrussell@mango-solutions.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-01-25 23:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='BLCOP+20data+20sets'>Monthly equity returns </h2><span id='topic+monthlyReturns'></span>

<h3>Description</h3>

<p>A matrix holding time series of monthly returns (calculated from closing prices) for six stocks. The returns span the period from Jaunary 1998 through December 2003.</p>


<h3>Usage</h3>

<pre><code class='language-R'>monthlyReturns</code></pre>


<h3>Format</h3>

<p>A matrix with 6 columns and 71 rows.  The names of the rows hold the dates of each series entry, and the column names are the names of the six equities from
which the return series are taken.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>CAPMList(monthlyReturns, marketIndex = sp500Returns, riskFree = US13wTB)
</code></pre>

<hr>
<h2 id='BLCOPOptions'>Global package options</h2><span id='topic+BLCOPOptions'></span>

<h3>Description</h3>

<p>This function can be used to set or get global options for the BLCOP package.    
</p>


<h3>Usage</h3>

<pre><code class='language-R'>BLCOPOptions(opt, setting)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="BLCOPOptions_+3A_opt">opt</code></td>
<td>
<p>A string with the name of an option </p>
</td></tr>
<tr><td><code id="BLCOPOptions_+3A_setting">setting</code></td>
<td>
<p>The new setting for the option</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>setting</code> is omitted, the current setting for <code>opt</code> is returned.  If both
arguments are omitted, a list with all of the settings is returned.  The following settings may
be changed:
<code>regFunc</code>:Function used to perform the regression in <code>CAPMalphas</code>
<code>numSimulations</code>:Number of monte-carlo simulations to perform in copula opinion pooling functions
<code>unitTestPath</code>: Path where unit tests are located.
</p>


<h3>Value</h3>

<p>If both arguments omitted, a list.  If setting is omitted, value of an individual setting.
</p>


<h3>Author(s)</h3>

<p>Francisco Gochez &lt;fgochez@mango-solutions&gt;</p>


<h3>Examples</h3>

<pre><code class='language-R'>    BLCOPOptions("numSimulations")
</code></pre>

<hr>
<h2 id='BLPosterior'>BLposterior</h2><span id='topic+BLPosterior'></span>

<h3>Description</h3>

<p>BLposterior
</p>


<h3>Usage</h3>

<pre><code class='language-R'>BLPosterior(returns, views, tau = 1, marketIndex, riskFree = NULL,
  kappa = 0, covEstimator = "cov")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="BLPosterior_+3A_returns">returns</code></td>
<td>
<p>A matrix of time series of returns.  The
columns should correspond to individual assets.</p>
</td></tr>
<tr><td><code id="BLPosterior_+3A_views">views</code></td>
<td>
<p>An object of class BLViews</p>
</td></tr>
<tr><td><code id="BLPosterior_+3A_tau">tau</code></td>
<td>
<p>The &quot;tau&quot; parameter in the Black-Litterman
model.</p>
</td></tr>
<tr><td><code id="BLPosterior_+3A_marketindex">marketIndex</code></td>
<td>
<p>A set of returns of a market index.</p>
</td></tr>
<tr><td><code id="BLPosterior_+3A_riskfree">riskFree</code></td>
<td>
<p>A time series of risk-free rates of
return.  Defaults to 0</p>
</td></tr>
<tr><td><code id="BLPosterior_+3A_kappa">kappa</code></td>
<td>
<p>if greater than 0, the confidences in each
view are replaced.  See the online help for details</p>
</td></tr>
<tr><td><code id="BLPosterior_+3A_covestimator">covEstimator</code></td>
<td>
<p>A string holding the name of the
function that should be used to estimate the
variance-covariance matrix.  This function should simply
return a matrix.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class BLResult
</p>


<h3>Author(s)</h3>

<p>Francisco
</p>

<hr>
<h2 id='BLResult-class'>Class &quot;BLResult&quot;: posterior of a market distribution in the Black-Litterman sense </h2><span id='topic+BLResult-class'></span><span id='topic+densityPlots+2CBLResult-method'></span><span id='topic+show+2CBLResult-method'></span><span id='topic+densityPlots.BLResult'></span><span id='topic+optimalPortfolios.fPort.BL'></span><span id='topic+optimalPortfolios.fPort+2CBLResult-method'></span>

<h3>Description</h3>

<p>This class holds the posterior market mean and variance-covariance matrix calculated from some prior and set of views.  The original views are also returned.</p>


<h3>Objects from the Class</h3>

<p>Objects can be created by calls of the form <code>new("BLResult", ...)</code>.  However, it is intended that they be created by
the function posteriorEst(or wrappers to that function).</p>


<h3>Slots</h3>


<dl>
<dt><code>views</code>:</dt><dd><p>Object of class <code>"BLViews"</code>.  These are the original views used to calculate this posterior</p>
</dd>
<dt><code>tau</code>:</dt><dd><p>Object of class <code>"numeric"</code>.  The value of &quot;tau&quot; used</p>
</dd>
<dt><code>priorMean</code>:</dt><dd><p>Object of class <code>"numeric"</code>: prior vector of market means</p>
</dd>
<dt><code>priorCovar</code>:</dt><dd><p>Object of class <code>"matrix"</code>: prior of the variance-covariance</p>
</dd>
<dt><code>posteriorMean</code>:</dt><dd><p>Object of class <code>"numeric"</code>:  posterior mean</p>
</dd>
<dt><code>posteriorCovar</code>:</dt><dd><p>Object of class <code>"matrix"</code>: posterior variance-covariance</p>
</dd>
<dt><code>kappa</code>:</dt><dd><p>Object of class <code>"logical"</code>: logical flag indicating whether or not confidences-in-views
were ignored.</p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt>denityPlots</dt><dd><p><code>signature(result = "BLResult")</code>: Plots the marginal distributions of the asset returns under the prior and posterior distributions</p>
</dd>
<dt>show</dt><dd><p><code>signature(object = "BLResult")</code>: Displays the contents of a result</p>
</dd>
<dt>optimalPortfolios.fPort</dt><dd><p><code>signature(result = "BLResult")</code>: Generates optimal prior and posterior portfolios using <code>fPortfolio</code> package routines</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Francisco Gochez</p>

<hr>
<h2 id='BLViews-class'>Class &quot;BLViews&quot; (Black-Litterman views)</h2><span id='topic+BLViews-class'></span><span id='topic+deleteViews+2CBLViews-method'></span><span id='topic+show+2CBLViews-method'></span>

<h3>Description</h3>

<p> An object that holds a set of analyst views, in the Black-Litterman sense, on a set of assets</p>


<h3>Objects from the Class</h3>

<p>Objects can be created by calls of the form <code>new("BLViews", ...)</code> or with the <code>BLViews</code> function.
</p>


<h3>Slots</h3>


<dl>
<dt><code>P</code>:</dt><dd><p>Object of class <code>"matrix"</code>. The &quot;pick&quot; matrix</p>
</dd>
<dt><code>qv</code>:</dt><dd><p>Object of class <code>"numeric"</code>. Means of the views</p>
</dd>
<dt><code>confidences</code>:</dt><dd><p>Object of class <code>"numeric"</code>.  Holds the confidence in each of the individual views</p>
</dd>
<dt><code>assets</code>:</dt><dd><p>Object of class <code>"character"</code>: Name of the asset &quot;universe&quot; to which these views apply </p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt>deleteViews</dt><dd><p><code>signature(views = "BLViews", viewsToDel = "numeric")</code>: Deletes a vector of views from the object, where the vector entries correspond to rows of the pick matrix</p>
</dd>
<dt>show</dt><dd><p><code>signature(object = "BLViews")</code>: Prints views in a user-friendly manner</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Francisco Gochez &lt;fgochez@mango-solutions.com&gt;</p>

<hr>
<h2 id='Build+20Views'>Create or add to a BLViews object</h2><span id='topic+addBLViews'></span><span id='topic+addCOPViews'></span><span id='topic+BLViews'></span><span id='topic+COPViews'></span><span id='topic+newPMatrix'></span>

<h3>Description</h3>

<p><code>BLViews</code> and <code>COPViews</code> are &quot;constructors&quot; for BLViews and COPViews objects respectively.  
<code>addBLViews</code> and <code>addCOPViews</code> allow one to easily add more views to a pre-existing views objects.
<code>newPMatrix</code> is a utility function for creating pick matrices.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>	
addBLViews(pickMatrix, q, confidences, views)
addCOPViews(pickMatrix, viewDist, confidences, views) 
BLViews(P, q, confidences, assetNames)
COPViews(pickMatrix, viewDist, confidences, assetNames) 
newPMatrix(assetNames, numViews, defaultValue = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Build+2B20Views_+3A_p">P</code></td>
<td>
<p>&quot;Pick&quot; matrix with columns named after assets to which views correspond</p>
</td></tr>
<tr><td><code id="Build+2B20Views_+3A_pickmatrix">pickMatrix</code></td>
<td>
<p>&quot;Pick&quot; matrix with columns named after assets to which views correspond</p>
</td></tr>
<tr><td><code id="Build+2B20Views_+3A_q">q</code></td>
<td>
<p>&quot;q&quot; vector of views</p>
</td></tr>
<tr><td><code id="Build+2B20Views_+3A_confidences">confidences</code></td>
<td>
<p>Vector of confidences in views.  Note that confidences are recipricols of standard deviations</p>
</td></tr>  
<tr><td><code id="Build+2B20Views_+3A_viewdist">viewDist</code></td>
<td>
<p>A list of marginal distributions of the views</p>
</td></tr>
<tr><td><code id="Build+2B20Views_+3A_views">views</code></td>
<td>
<p>A BLViews object</p>
</td></tr>
<tr><td><code id="Build+2B20Views_+3A_assetnames">assetNames</code></td>
<td>
<p>Names of the assets in the universe</p>
</td></tr>
<tr><td><code id="Build+2B20Views_+3A_numviews">numViews</code></td>
<td>
<p>Number of views in the pick matrix</p>
</td></tr>
<tr><td><code id="Build+2B20Views_+3A_defaultvalue">defaultValue</code></td>
<td>
<p>Default value to use to fill the new pick matrix</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A BLViews or COPViews class object as appropriate.  <code>newPMatrix</code> creates a matrix.
</p>


<h3>Author(s)</h3>

<p>Francisco Gochez</p>


<h3>See Also</h3>

<p><code><a href="#topic+createBLViews">createBLViews</a></code>, <code><a href="#topic+updateBLViews">updateBLViews</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>    ### example from T. M. Idzorek's paper "A STEP-BY-STEP GUIDE TO THE 
	### BLACK-LITTERMAN MODEL"
 	## Not run: 
	    pick &lt;- newPMatrix(letters[1:8], 3)
	    pick[1,7] &lt;- 1
	    pick[2,1] &lt;- -1 
	    pick[2,2] &lt;- 1
	    pick[3, 3:6] &lt;- c(0.9, -0.9, .1, -.1)
	    confidences &lt;- 1 / c(0.00709, 0.000141, 0.000866)
	    myViews &lt;- BLViews(pick, q = c(0.0525, 0.0025, 0.02), confidences, letters[1:8])
	    myViews
	    
	    ### Modified COP example from Meucci's "Beyond Black-Litterman: Views on
		### non-normal markets" 
	    dispersion &lt;- c(.376,.253,.360,.333,.360,.600,.397,.396,.578,.775) / 1000
	    sigma &lt;- BLCOP:::.symmetricMatrix(dispersion, dim = 4)
	    caps &lt;- rep(1/4, 4)
	    mu &lt;- 2.5 * sigma 
	    dim(mu) &lt;- NULL
	    marketDistribution &lt;- mvdistribution("mt", mean = mu, S = sigma, df = 5 )
	    pick &lt;- newPMatrix(c("SP", "FTSE", "CAC", "DAX"), 1)
	    pick[1,4] &lt;- 1
	    vdist &lt;- list(distribution("unif", min = -0.02, max = 0))
	    views &lt;- COPViews(pick, vdist, 0.2, c("SP", "FTSE", "CAC", "DAX"))
    
## End(Not run)
</code></pre>

<hr>
<h2 id='CAPMList'>Compute CAPM alphas for a set of assets</h2><span id='topic+CAPMList'></span>

<h3>Description</h3>

<p><code>CAPMList</code> is a helper function that computes the &quot;alphas&quot; and &quot;betas&quot; in the sense of the CAPM for 
series of asset returns.  It is meant to be used for computing &quot;prior&quot; means for the Black-Litterman model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CAPMList(returns, marketIndex, riskFree = NULL, regFunc = BLCOPOptions("regFunc"), 
         coeffExtractFunc = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="CAPMList_+3A_returns">returns</code></td>
<td>
<p>A matrix or data.frame of asset returns, with different columns corresponding to different assets</p>
</td></tr>
<tr><td><code id="CAPMList_+3A_marketindex">marketIndex</code></td>
<td>
<p>A time series of returns for some market index (e.g. SP500)</p>
</td></tr>
<tr><td><code id="CAPMList_+3A_riskfree">riskFree</code></td>
<td>
<p>Risk-free rate of return</p>
</td></tr>
<tr><td><code id="CAPMList_+3A_regfunc">regFunc</code></td>
<td>
<p>The name of the function to used to regress the asset return series against the market index.  This is set in the BLCOP options,
and is <code>lm</code> by default.</p>
</td></tr>
<tr><td><code id="CAPMList_+3A_coeffextractfunc">coeffExtractFunc</code></td>
<td>
<p>A function that extracts the intercept (alpha) and coefficient of the market index (beta) from the results of a 
call to the regression function. It should return a vector containing these two elements.</p>
</td></tr>
<tr><td><code id="CAPMList_+3A_...">...</code></td>
<td>
<p>Additional arguments to the regression function </p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>coeffExtractFun</code> is needed because some regression functions such as <code>gls</code> from the <code>nlme</code> package
don't return their results in the same format as <code>lm</code> does.  If it is not supplied, a default that works with <code>lm</code> results is used.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> with one column for the &quot;alphas&quot; and another for the &quot;betas&quot;
</p>


<h3>Author(s)</h3>

<p>Francisco Gochez &lt;fgochez@mango-solutions.com&gt;</p>


<h3>Examples</h3>

<pre><code class='language-R'>    library(MASS)
    CAPMList(monthlyReturns, marketIndex = sp500Returns, riskFree = US13wTB, regFunc = "rlm")
</code></pre>

<hr>
<h2 id='Construct+20views'>Create or add to a view object using a graphical interface</h2><span id='topic+createBLViews'></span><span id='topic+updateBLViews'></span><span id='topic+createCOPViews'></span>

<h3>Description</h3>

<p>These helper functions allow one to easily create or add to an object of class BLViews or COPViews through the use 
of R's built-in data editor.  
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createBLViews(allAssets, numAssetViews = 1, assetSubset = NULL, 
              mode = c("editor", "Window"))
updateBLViews(views, includeNullViews = FALSE, numNewViews = 0, assets = NULL)
createCOPViews (allAssets, numAssetViews = 1, assetSubset = NULL, 
                mode = c("editor", "Window")) 

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Construct+2B20views_+3A_allassets">allAssets</code></td>
<td>
<p>A character vector holding the names of all of the assets in one's &quot;universe&quot;</p>
</td></tr>
<tr><td><code id="Construct+2B20views_+3A_numassetviews">numAssetViews</code></td>
<td>
<p>The number of views to form.  Should be less than or equal to the total number of assets</p>
</td></tr>
<tr><td><code id="Construct+2B20views_+3A_assetsubset">assetSubset</code></td>
<td>
<p>A character vector of assets that is a subset of <code>allAssets</code>.  Views will be formed only on this subset. By default, <code>assetSubset = allAssets</code></p>
</td></tr></table>
<p>.
</p>
<table>
<tr><td><code id="Construct+2B20views_+3A_mode">mode</code></td>
<td>
<p>Mode of GUI.  Currently unused</p>
</td></tr>
<tr><td><code id="Construct+2B20views_+3A_views">views</code></td>
<td>
<p>Object of class BLViews</p>
</td></tr>
<tr><td><code id="Construct+2B20views_+3A_assets">assets</code></td>
<td>
<p>Set of assets to form or modify views on.  If NULL, will use the full set of assets</p>
</td></tr>
<tr><td><code id="Construct+2B20views_+3A_includenullviews">includeNullViews</code></td>
<td>
<p>When updating views, should the 0 columns of the pick matrix be included?</p>
</td></tr>
<tr><td><code id="Construct+2B20views_+3A_numnewviews">numNewViews</code></td>
<td>
<p>In <code>updateViews</code>, this is the number of new views to add</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>createCOPViews</code> does not allow one to specify the distributions of the views at the moment.  Such a feature
may be added later through another GUI.  At the moment the object returned by this function has its distribution
set to a default.  <code>updateViews</code> allows one to modify pre-existing views
</p>


<h3>Value</h3>

<p>An object of class <code>BLViews</code> or <code>COPViews</code> that holds all of the views created.
</p>


<h3>Author(s)</h3>

<p>Francisco Gochez &lt;fgochez@mango-solutions.com&gt; </p>


<h3>See Also</h3>

<p><code><a href="#topic+addBLViews">addBLViews</a></code>, <code><a href="#topic+addCOPViews">addCOPViews</a></code>, <code><a href="#topic+COPViews">COPViews</a></code>, <code><a href="#topic+BLViews">BLViews</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>    
    ## Not run: 
        views &lt;- createBLViews(colnames(monthlyReturns), 2)
    
## End(Not run)
</code></pre>

<hr>
<h2 id='COPPosterior'>Calculate the posterior distribution of the market using copula opinion pooling</h2><span id='topic+COPPosterior'></span>

<h3>Description</h3>

<p><code>COPPosteior</code> uses Attilio Meucci's copula opinion pooling method to incorporate an analyst's subjective
views with a prior &quot;official&quot; market distribution.  Both the views and the market may have an arbitrary distribution
as long as it can be sampled in R.  
Calculations are done with monte-carlo simulation, and the object returned will hold samples drawn from the market
posterior distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>    COPPosterior(marketDist, views, numSimulations = BLCOPOptions("numSimulations"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="COPPosterior_+3A_marketdist">marketDist</code></td>
<td>
<p>An object of class mvdistribution which describes the prior &quot;official&quot; distribution of the market.</p>
</td></tr>
<tr><td><code id="COPPosterior_+3A_views">views</code></td>
<td>
<p>An object of class COPViews which describe the subjective views on the market distribution</p>
</td></tr>
<tr><td><code id="COPPosterior_+3A_numsimulations">numSimulations</code></td>
<td>
<p>The number of monte carlo samples to draw during calculations.  Each asset in one's universe will have numSimulations 
samples from the posterior.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class COPResult.
</p>


<h3>Author(s)</h3>

<p>Francisco Gochez &lt;fgochez@mango-solutions.com&gt;</p>


<h3>References</h3>

<p>Attilio Meucci, &quot;Beyond Black-Litterman:Views on Non-normal Markets&quot;.  
See also Attilio Meucci, &quot;Beyond Black-Litterman in Practice: a Five-Step Recipe to Input Views on non-Normal Markets.&quot;</p>


<h3>See Also</h3>

 <p><code><a href="#topic+BLPosterior">BLPosterior</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>    
    ## Not run:     
        # An example based on one found in "Beyond Black-Litterman:Views on Non-normal Markets"
        dispersion &lt;- c(.376,.253,.360,.333,.360,.600,.397,.396,.578,.775) / 1000
        sigma &lt;- BLCOP:::.symmetricMatrix(dispersion, dim = 4)
        caps &lt;- rep(1/4, 4)
        mu &lt;- 2.5 * sigma 
        dim(mu) &lt;- NULL
        marketDistribution &lt;- mvdistribution("mt", mean = mu, S = sigma, df = 5 )
        pick &lt;- matrix(0, ncol = 4, nrow = 1, dimnames = list(NULL, c("SP", "FTSE", "CAC", "DAX")))
        pick[1,4] &lt;- 1
        vdist &lt;- list(distribution("unif", min = -0.02, max = 0))
    
        views &lt;- COPViews(pick, vdist, 0.2, c("SP", "FTSE", "CAC", "DAX"))
        posterior &lt;- COPPosterior(marketDistribution, views)
    
## End(Not run)
</code></pre>

<hr>
<h2 id='COPResult-class'>Class &quot;COPResult&quot;</h2><span id='topic+COPResult-class'></span><span id='topic+densityPlots+2CCOPResult-method'></span><span id='topic+show+2CCOPResult-method'></span><span id='topic+show.COPResult'></span><span id='topic+densityPlots.COPResult'></span><span id='topic+optimalPortfolios.fPort.COP'></span><span id='topic+optimalPortfolios.fPort+2CCOPResult-method'></span>

<h3>Description</h3>

<p>A class that holds the posterior distribution produced with the COP framework</p>


<h3>Objects from the Class</h3>

<p>Objects can be created by calls of the form <code>new("COPResult", ...)</code>. In general however
they are created by the function <code><a href="#topic+COPPosterior">COPPosterior</a></code>
</p>


<h3>Slots</h3>


<dl>
<dt><code>views</code>:</dt><dd><p>Object of class <code>"COPViews"</code>.  These are the views that led to the result </p>
</dd>
<dt><code>marketDist</code>:</dt><dd><p>Object of class <code>"mvdistribution"</code>.  Prior distribution of the market</p>
</dd>
<dt><code>posteriorSims</code>:</dt><dd><p>Object of class <code>"matrix"</code>. Matrices holding the simulations of the posteriors with a column for each asset.</p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt>densityPlots</dt><dd><p><code>signature(result = "COPResult")</code>: Generates density plots of the marginal prior and posterior distributions of each asset.</p>
</dd>
<dt>show</dt><dd><p><code>signature(result = "COPResult")</code>: Displays basic information about the posterior results</p>
</dd>


<dt>optimalPortfolios.fPort</dt><dd><p><code>signature(result = "COPResult")</code>: Generates optimal prior and posterior portfolios using <code>fPortfolio</code> package routines </p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Francisco Gochez &lt;fgochez@mango-solutions.com&gt;</p>


<h3>See Also</h3>

<p><code><a href="#topic+COPPosterior">COPPosterior</a></code>, <code><a href="#topic+BLResult-class">BLResult-class</a></code>
</p>

<hr>
<h2 id='COPViews-class'>Class &quot;COPViews&quot; (copula opinion pooling views)</h2><span id='topic+COPViews-class'></span><span id='topic+deleteViews+2CCOPViews-method'></span><span id='topic+show+2CCOPViews-method'></span>

<h3>Description</h3>

<p> An object that holds a set of analyst views, in the copula opinion pooling sense, on a set of assets</p>


<h3>Objects from the Class</h3>

<p>Objects can be created by calls of the form <code>new("COPViews", ...)</code> or with the <code>COPViews</code> function.</p>


<h3>Slots</h3>


<dl>
<dt><code>pick</code>:</dt><dd><p>Object of class <code>"matrix"</code>. The pick matrix</p>
</dd>
<dt><code>viewDist</code>:</dt><dd><p>Object of class <code>"list"</code>. List of probability distributions of the views </p>
</dd>
<dt><code>confidences</code>:</dt><dd><p>Object of class <code>"numeric"</code>. </p>
</dd>
<dt><code>assets</code>:</dt><dd><p>Object of class <code>"character"</code>. Name of the asset &quot;universe&quot; to which these views apply.</p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt>deleteViews</dt><dd><p><code>signature(views = "COPViews", viewsToDel = "numeric")</code>: Deletes a vector of views from the object, where the vector entries correspond to rows of the pick matrix </p>
</dd>
<dt>show</dt><dd><p><code>signature(object = "COPViews")</code>: Prints views in a user-friendly manner </p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Francisco Gochez &lt;fgochez@mango-solutions.com&gt;</p>


<h3>See Also</h3>

<p><code><a href="#topic+BLViews-class">BLViews</a></code>, <code><a href="#topic+COPViews">COPViews</a></code>, <code><a href="#topic+addCOPViews">addCOPViews</a></code>, <code><a href="#topic+createCOPViews">createCOPViews</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>    showClass("COPViews")
</code></pre>

<hr>
<h2 id='deleteViews'>Delete individual views from view objects  </h2><span id='topic+deleteViews'></span>

<h3>Description</h3>

<p>A generic function that allows one to delete individual views from objects of class <code>BLViews</code> or <code>COPViews</code>.  The inputs are a view object and a numeric
vector of views to delete, where the entires of the vector map to rows of the pick matrix.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deleteViews(views, viewsToDel)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deleteViews_+3A_views">views</code></td>
<td>
<p>An object of class <code>BLViews</code> or <code>COPViews</code></p>
</td></tr>
<tr><td><code id="deleteViews_+3A_viewstodel">viewsToDel</code></td>
<td>
<p>A numeric vector of views to delete, as described above</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The original object with the indicated views deleted
</p>


<h3>Author(s)</h3>

<p>Francisco Gochez &lt;fgochez@mango-solutions.com&gt;</p>


<h3>See Also</h3>

 <p><code><a href="#topic+BLViews-class">BLViews-class</a></code>, <code><a href="#topic+COPViews-class">COPViews-class</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>    stocks &lt;- colnames(monthlyReturns)
    pick &lt;- matrix(0, ncol = 6, nrow = 2, dimnames = list(NULL, stocks))
    pick[1,"IBM"] &lt;- 1
    pick[1, "DELL"] &lt;- 0.04
    pick[2, "C"] &lt;- 1
    pick[2, "JPM"] &lt;- 0.6

    confidences &lt;- 1 / c(0.7, 0.1)

    views &lt;- BLViews( P = pick, q = c(0.1,0.1) , confidences = confidences,stocks)
    deleteViews(views, 1)
   
</code></pre>

<hr>
<h2 id='densityPlots'>Density plots of prior and posterior distributions</h2><span id='topic+densityPlots'></span>

<h3>Description</h3>

<p>This generic function generates density plots of the marginal posterior and prior distributions of a set of assets in an object of class <code>BLResult</code> or
<code>COPResult</code> for comparative purposes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>densityPlots(result, assetsSel = NULL, numSimulations = BLCOPOptions("numSimulations"), 
             ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="densityPlots_+3A_result">result</code></td>
<td>
<p>Object of class</p>
</td></tr>
<tr><td><code id="densityPlots_+3A_assetssel">assetsSel</code></td>
<td>
<p>A numeric vector of assets to plot </p>
</td></tr>
<tr><td><code id="densityPlots_+3A_numsimulations">numSimulations</code></td>
<td>
<p> For <code>COPResult</code> class objects, the number of simulations to use for the market posterior distribution </p>
</td></tr>
<tr><td><code id="densityPlots_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code>plot</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>For <code>COPResults</code> objects, density kernel estimates from the samples are used
</p>


<h3>Value</h3>

<p>None
</p>


<h3>Author(s)</h3>

<p>Francisco Gochez, &lt;fgochez@mango-solutions&gt;</p>


<h3>Examples</h3>

<pre><code class='language-R'>    ## Not run: 
        dispersion &lt;- c(.376,.253,.360,.333,.360,.600,.397,.396,.578,.775) / 1000
        sigma &lt;- BLCOP:::.symmetricMatrix(dispersion, dim = 4)
        caps &lt;- rep(1/4, 4)
        mu &lt;- 2.5 * sigma 
        dim(mu) &lt;- NULL
        marketDistribution &lt;- mvdistribution("mt", mean = mu, S = sigma, df = 5 )
        pick &lt;- matrix(0, ncol = 4, nrow = 1, dimnames = list(NULL, c("SP", "FTSE", "CAC", "DAX")))
        pick[1,4] &lt;- 1
        vdist &lt;- list(distribution("unif", min = -0.02, max = 0))
    
        views &lt;- COPViews(pick, vdist, 0.2, c("SP", "FTSE", "CAC", "DAX"))
        posterior &lt;- COPPosterior(marketDistribution, views)
        densityPlots(posterior, 4)
        
## End(Not run)
</code></pre>

<hr>
<h2 id='Distribution+20class+20constructors'>Constructors for distribution and mvdistribution class objects</h2><span id='topic+mvdistribution'></span><span id='topic+distribution'></span>

<h3>Description</h3>

<p>These functions create objects of class <code>distribution</code> and <code>mvdistribution</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mvdistribution(RName, ...)
distribution(RName, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Distribution+2B20class+2B20constructors_+3A_rname">RName</code></td>
<td>
<p>A string holding the R suffix corresponding to the distribution, e.g. &quot;pois&quot; for the Poisson distribution</p>
</td></tr>
<tr><td><code id="Distribution+2B20class+2B20constructors_+3A_...">...</code></td>
<td>
<p>Additional parameters that parametrize the distribution</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In general any distribution with a corresponding sampling function can be used.  This function should
have the name given in <code>RName</code> but preceded with an &quot;r&quot;, e.g. <code>rnorm</code> for the normal 
distribution.  When the constructors are called, they check that the given sampling function exists
and that it takes the arguments that were passed in the <code>...</code>.
</p>


<h3>Value</h3>

<p>An object of class <code>distribution</code> or <code>mvdistribution</code>.
</p>


<h3>Author(s)</h3>

<p>Francisco Gochez &lt;fgochez@mango-solutions.com&gt;</p>


<h3>See Also</h3>

<p><code><a href="#topic+sampleFrom">sampleFrom</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>    ## Not run: 
	    # create a uniform distribution object and sample from it
	    myUnif &lt;- distribution("unif", min = -0.1, max = 0.1)
	    hist(sampleFrom(myUnif, 1000))
	    
	    mvNormal &lt;- mvdistribution("mnorm", mean = c(1, 5), varcov = diag(c(2, 0.1)))
	    x &lt;- sampleFrom(mvNormal, 1000)
	    plot(x[,1] ~ x[,2])
    
## End(Not run)
</code></pre>

<hr>
<h2 id='distribution-class'>Class &quot;distribution&quot;</h2><span id='topic+distribution-class'></span>

<h3>Description</h3>

<p>A class that describes univariate distributions</p>


<h3>Objects from the Class</h3>

<p>Objects can be created by calls of the form <code>new("distribution", ...)</code>. There is also
a constructor which is also named <code><a href="#topic+distribution">distribution</a></code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>RName</code>:</dt><dd><p>Object of class <code>"character"</code>.  This is the R &quot;suffix&quot; of the distirbution.</p>
</dd>
<dt><code>parameters</code>:</dt><dd><p>Object of class <code>"numeric"</code>.  A named numeric vector that holds the parameters of the distribution</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Francisco Gochez &lt;fgochez@mango-solutions.com&gt;</p>


<h3>See Also</h3>

<p><code><a href="#topic+distribution">distribution</a></code>, <code><a href="#topic+mvdistribution-class">mvdistribution</a></code>, <code><a href="#topic+mvdistribution">mvdistribution</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>    showClass("distribution")
</code></pre>

<hr>
<h2 id='Estimators'>Get prior and posterior estimators stored in package scope</h2><span id='topic+Estimators'></span><span id='topic+getPriorEstim'></span><span id='topic+getPosteriorEstim'></span>

<h3>Description</h3>

<p>These functions are not intended to be called directly by the user but exist to allow third party
optimizer routines to access prior and posterior estimators calculated as part of the portfolio optimisation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getPriorEstim(x, spec=NULL, ...)
getPosteriorEstim(x, spec=NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Estimators_+3A_x">x</code></td>
<td>
<p>multivariate time series</p>
</td></tr> 
<tr><td><code id="Estimators_+3A_spec">spec</code></td>
<td>
<p>optional portfolio specification</p>
</td></tr>
<tr><td><code id="Estimators_+3A_...">...</code></td>
<td>
<p>additional arguments</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with 2 elements:
</p>
<table>
<tr><td><code>mu</code></td>
<td>
<p>estimate of mean</p>
</td></tr>
<tr><td><code>Sigma</code></td>
<td>
<p>estimate of covariance</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Richard Chandler-Mant &lt;rchandler-mant@mango-solutions.com&gt;</p>

<hr>
<h2 id='Extractors'>Extract various fields of view or posterior objects</h2><span id='topic+assetSet'></span><span id='topic+PMatrix'></span><span id='topic+confidences'></span><span id='topic+viewMatrix'></span><span id='topic+posteriorMeanCov'></span><span id='topic+posteriorSimulations'></span><span id='topic+numSimulations'></span><span id='topic+priorViews'></span>

<h3>Description</h3>

<p>A collection of functions to extract several fields of BLViews, COPViews, COPPosterior and BLPosterior
objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assetSet(views)
viewMatrix(views, dropZeroColumns = TRUE)
PMatrix(views)
confidences(views)
posteriorMeanCov(posterior)
posteriorSimulations(posterior)
numSimulations(posterior)
priorViews(posterior)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Extractors_+3A_views">views</code></td>
<td>
<p>An object of class BLViews or COPViews</p>
</td></tr>
<tr><td><code id="Extractors_+3A_posterior">posterior</code></td>
<td>
<p>An object of class BLPosterior (posteriorMeanCov) or COPPosterior (posteriorSimulations, priorViews)
, as appropriate</p>
</td></tr>
<tr><td><code id="Extractors_+3A_dropzerocolumns">dropZeroColumns</code></td>
<td>
<p>Logical flag.  If TRUE, columns of &quot;view matrix&quot; which only have zeros are dropped</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>assetSet</code></td>
<td>
<p>The names of the assets in the view object's universe</p>
</td></tr>
<tr><td><code>confidences</code></td>
<td>
<p>The set of confidences in each view.</p>
</td></tr>
<tr><td><code>PMatrix</code></td>
<td>
<p>The 'pick' matrix</p>
</td></tr>
<tr><td><code>viewMatrix</code></td>
<td>
<p>The pick matrix augmented with the q vector of the BL model</p>
</td></tr>
<tr><td><code>posteriorMeanCov</code></td>
<td>
<p>The posterior mean and covariance (in a list) of a BLPosterior object</p>
</td></tr>
<tr><td><code>posteriorSimulations</code></td>
<td>
<p> Matrix of posterior distribution simulations held in a COPPosterior object </p>
</td></tr>
<tr><td><code>numSimulations</code></td>
<td>
<p> Number of simulations in posterior COP distribution </p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Francisco Gochez &lt;fgochez@mango-solutions.com&gt;</p>


<h3>Examples</h3>

<pre><code class='language-R'>    pick &lt;- matrix(0, ncol = 4, nrow = 1, dimnames = list(NULL, c("SP", "FTSE", "CAC", "DAX")))
    pick[1,4] &lt;- 1
    vdist &lt;- list(distribution("unif", min = -0.02, max = 0))
    views &lt;- COPViews(pick, vdist, 0.2, c("SP", "FTSE", "CAC", "DAX"))
    assetSet(views)
    confidences(views)
    PMatrix(views)

</code></pre>

<hr>
<h2 id='mvdistribution-class'>Class &quot;mvdistribution&quot;</h2><span id='topic+mvdistribution-class'></span>

<h3>Description</h3>

<p>A class that describes multivariate distributions</p>


<h3>Objects from the Class</h3>

<p>Objects can be created by calls of the form <code>new("distribution", ...)</code>. There is also 
a constructor which is also named <code><a href="#topic+mvdistribution">mvdistribution</a></code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>RName</code>:</dt><dd><p>Object of class <code>"character"</code>. This is the R &quot;suffix&quot; of the distirbution.</p>
</dd>
<dt><code>parameters</code>:</dt><dd><p>A named list of parameters that characterize the distribution</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Francisco Gochez &lt;fgochez@mango-solutions.com&gt;</p>


<h3>See Also</h3>

<p><code><a href="#topic+distribution">distribution</a></code>, <code><a href="#topic+mvdistribution">mvdistribution</a></code>, <code><a href="#topic+distribution-class">distribution-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>      showClass("mvdistribution")
</code></pre>

<hr>
<h2 id='optimalPortfolios'>Calculates optimal portfolios under prior and posterior distributions</h2><span id='topic+optimalPortfolios'></span><span id='topic+optimalPortfolios.fPort'></span>

<h3>Description</h3>

<p>These are wrapper functions that calculate optimal portfolios under the prior and posterior return distributions.  
<code>optimalPortfolios</code> works with a user-supplied optimization  function, 
though simple Markowitz minimum-risk optimization is done with <code>solve.QP</code> from <code>quadprog</code> if none is supplied.
<code>optimalPortfolios.fPort</code> is a generic utility function which calculates optimal portfolios using routines from
the <code>fPortfolio</code> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>optimalPortfolios(result, optimizer = .optimalWeights.simpleMV, ..., doPlot = TRUE, 
                  beside = TRUE)
optimalPortfolios.fPort(result, spec = NULL, constraints = "LongOnly", 
                        optimizer = "minriskPortfolio", inputData = NULL, 
                        numSimulations = BLCOPOptions("numSimulations")) 
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="optimalPortfolios_+3A_result">result</code></td>
<td>
<p>An object of class <code>BLResult</code></p>
</td></tr>
<tr><td><code id="optimalPortfolios_+3A_optimizer">optimizer</code></td>
<td>
<p>For <code>optimalPortfolios</code>, An optimization function.  It should take as arguments a vector of means and
a variance-covariance matrix, and should return a vector of optimal weights.  For <code>optimalPortfolios</code>, 
the name of a <code>fPortfolio</code> function that performs portfolio optimization</p>
</td></tr>
<tr><td><code id="optimalPortfolios_+3A_spec">spec</code></td>
<td>
<p>Object of class <code>fPORTFOLIOSPEC</code>.  If NULL, will use a basic mean-variance spec for Black-Litterman
results, and a basic CVaR spec for COP results</p>
</td></tr>
<tr><td><code id="optimalPortfolios_+3A_inputdata">inputData</code></td>
<td>
<p>Time series data (any form that can be coerced into a <code>timeSeries</code> object)</p>
</td></tr>
<tr><td><code id="optimalPortfolios_+3A_constraints">constraints</code></td>
<td>
<p>String of constraints that may be passed into <code>fPortfolio</code> optimization routines</p>
</td></tr>
<tr><td><code id="optimalPortfolios_+3A_numsimulations">numSimulations</code></td>
<td>
<p>For COP results only - the number of posterior simulations to use in the optimization (large
numbers here will likely cause the routine to fail)</p>
</td></tr>
<tr><td><code id="optimalPortfolios_+3A_...">...</code></td>
<td>
<p> Additional arguments to the optimization function </p>
</td></tr>
<tr><td><code id="optimalPortfolios_+3A_doplot">doPlot</code></td>
<td>
<p> A logical flag.  Should barplots of the optimal portfolio weights be produced? </p>
</td></tr>
<tr><td><code id="optimalPortfolios_+3A_beside">beside</code></td>
<td>
<p>A logical flag. If a barplot is generated, should the bars appear side-by side? If <code>FALSE</code>, 
differences of weights will be plotted instead.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default, <code>optimizer</code> is a simple function that performs Markowitz optimization via
<code>solve.QP</code>.  In addition to a mean and variance, it takes an optional <code>constraints</code>
parameter that if supplied should hold a named list with all of the parameters that <code>solve.QP</code>
takes.  
</p>


<h3>Value</h3>

<p><code>optimalPortfolios</code> will return a list with the following items:
</p>
<table>
<tr><td><code>priorPFolioWeights</code></td>
<td>
<p>The optimal weights under the prior distribution</p>
</td></tr>
<tr><td><code>postPFolioWeights</code></td>
<td>
<p>The optimal weights under the posterior distribution</p>
</td></tr>
</table>
<p><code>optimalPortfolios.fPort</code> will return a similar list with 2 elements of class <code>fPORTFOLIO</code>.
</p>


<h3>Note</h3>

<p> It is expected that <code>optimalPortfolios</code> will be deprecated in future releases in favour of 
<code>optimalPortfolios.fPort</code>.
</p>


<h3>Author(s)</h3>

<p>Francisco Gochez &lt;fgochez@mango-solutions.com&gt;</p>


<h3>References</h3>

<p>Wuertz, D., Chalabi, Y., Chen W., Ellis A. (2009); Portfolio Optimization with R/Rmetrics, Rmetrics eBook, Rmetrics Association and Finance Online, Zurich. </p>


<h3>Examples</h3>

<pre><code class='language-R'>	## Not run: 
	    entries &lt;- c(0.001005,0.001328,-0.000579,-0.000675,0.000121,0.000128,
                    -0.000445, -0.000437, 0.001328,0.007277,-0.001307,-0.000610,
                    -0.002237,-0.000989,0.001442,-0.001535, -0.000579,-0.001307,
                    0.059852,0.027588,0.063497,0.023036,0.032967,0.048039,-0.000675,
                    -0.000610,0.027588,0.029609,0.026572,0.021465,0.020697,0.029854,
                    0.000121,-0.002237,0.063497,0.026572,0.102488,0.042744,0.039943,
                    0.065994 ,0.000128,-0.000989,0.023036,0.021465,0.042744,0.032056,
                    0.019881,0.032235 ,-0.000445,0.001442,0.032967,0.020697,0.039943,
                    0.019881,0.028355,0.035064 ,-0.000437,-0.001535,0.048039,0.029854,
                    0.065994,0.032235,0.035064,0.079958 )
	    
	    varcov &lt;- matrix(entries, ncol = 8, nrow = 8)
	    mu &lt;- c(0.08, 0.67,6.41, 4.08, 7.43, 3.70, 4.80, 6.60) / 100
	    pick &lt;- matrix(0, ncol = 8, nrow = 3, dimnames = list(NULL, letters[1:8]))
	    pick[1,7] &lt;- 1
	    pick[2,1] &lt;- -1; pick[2,2] &lt;- 1
	    pick[3, 3:6] &lt;- c(0.9, -0.9, .1, -.1)
	    confidences &lt;- 1 / c(0.00709, 0.000141, 0.000866)
	    views &lt;- BLViews(pick, c(0.0525, 0.0025, 0.02), confidences, letters[1:8])
	    posterior &lt;- posteriorEst(views, tau = 0.025, mu, varcov )
	    optimalPortfolios(posterior, doPlot = TRUE)
    
    	optimalPortfolios.fPort(posterior, optimizer = "tangencyPortfolio")
    	
    	# An example based on one found in "Beyond Black-Litterman:Views on Non-normal Markets"
        dispersion &lt;- c(.376,.253,.360,.333,.360,.600,.397,.396,.578,.775) / 1000
        sigma &lt;- BLCOP:::.symmetricMatrix(dispersion, dim = 4)
        caps &lt;- rep(1/4, 4)
        mu &lt;- 2.5 * sigma 
        dim(mu) &lt;- NULL
        marketDistribution &lt;- mvdistribution("mt", mean = mu, S = sigma, df = 5 )
        pick &lt;- matrix(0, ncol = 4, nrow = 1, dimnames = list(NULL, c("SP", "FTSE", "CAC", "DAX")))
        pick[1,4] &lt;- 1
        vdist &lt;- list(distribution("unif", min = -0.02, max = 0))
    
        views &lt;- COPViews(pick, vdist, 0.2, c("SP", "FTSE", "CAC", "DAX"))
        posterior &lt;- COPPosterior(marketDistribution, views)
    
        optimalPortfolios.fPort(myPosterior, spec = NULL, optimizer = "minriskPortfolio", 
		                        inputData = NULL, numSimulations  = 100	)
	
    
## End(Not run)
</code></pre>

<hr>
<h2 id='posteriorEst'>This function performs the &quot;core&quot; calculation of the Black-Litterman model.</h2><span id='topic+posteriorEst'></span>

<h3>Description</h3>

<p>This function performs the &quot;core&quot; calculation of the
Black-Litterman model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>posteriorEst(views, mu, tau = 0.5, sigma, kappa = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="posteriorEst_+3A_views">views</code></td>
<td>
<p>An object of class BLViews</p>
</td></tr>
<tr><td><code id="posteriorEst_+3A_mu">mu</code></td>
<td>
<p>A vector of mean equilibrium returns</p>
</td></tr>
<tr><td><code id="posteriorEst_+3A_tau">tau</code></td>
<td>
<p>The &quot;tau&quot; parameter in the Black-Litterman
model.</p>
</td></tr>
<tr><td><code id="posteriorEst_+3A_sigma">sigma</code></td>
<td>
<p>The variance-covariance matrix of the
returns of the assets</p>
</td></tr>
<tr><td><code id="posteriorEst_+3A_kappa">kappa</code></td>
<td>
<p>if greater than 0, the confidences in each
view are replaced.  See the online help for details</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class BLResult holding the updated
Black-Litterman posterior
</p>


<h3>Author(s)</h3>

<p>Francisco
</p>

<hr>
<h2 id='posteriorFeasibility'>Calculate the &quot;feasibility&quot; of the (Black-Litterman) posterior mean</h2><span id='topic+posteriorFeasibility'></span>

<h3>Description</h3>

<p>Attilio Meucci and Gianluca Fusai have suggested using the Mahalanobis distance to assess
the feasibility of a set of Black-Litterman views.  This function calculates this distance, along
with a &quot;feasibility&quot; measure based on this distance and the sensitivity of the measure to changes in the &quot;q&quot;
vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>posteriorFeasibility(result)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="posteriorFeasibility_+3A_result">result</code></td>
<td>
<p>An object of class BLResult</p>
</td></tr>  
</table>


<h3>Details</h3>

<p>The feasibility measure proposed by Meucci and Fusai (see the references below) is 1 - F(m), where m is the Mahalanobis distance from
from the prior mean calculated with respect to the prior distribution.  F is the chi-squared CDF of n-degrees of freedom, where
n is the number assets in one's universe.  It should be noted that in Meucci and Fusai's paper, a version of Black-Litterman is
used in which the tau parameter is always set to 1.
</p>


<h3>Value</h3>

<table>
<tr><td><code>mahalDist</code></td>
<td>
<p>Mahalonobis distance of posterior mean vector from prior mean</p>
</td></tr>
<tr><td><code>mahalDistProb</code></td>
<td>
<p>1 - F(mahalDist), where F is the CDF of the Chi-squared distribution with n = \#assets degrees of freedom</p>
</td></tr>
<tr><td><code>sensitivities</code></td>
<td>
<p>Derivatives of mahalDistProb with respect to the elements of the &quot;q&quot; vector in the set of views.  Not yet implemented</p>
</td></tr>
</table>


<h3>Warning</h3>

<p>It is not clear that the results produced by this routine are entirely sensible, though the calculation
is very straightforward and seems to match the one discussed in the source paper.  Use with caution.
</p>


<h3>Author(s)</h3>

<p>Francisco Gochez &lt;fgochez@mango-solutions.com&gt;</p>


<h3>References</h3>

<p>Fusai, Gianluca and Meucci, Attilio.  &quot;Assessing Views&quot;, 2002. http://www.symmys.com/AttilioMeucci/Research/PublFinance/PublFinance.html</p>


<h3>Examples</h3>

<pre><code class='language-R'>    pickMatrix &lt;- matrix(c(rep(1/2, 2), -1,  rep(0, 3)), nrow = 1, ncol = 6 )
    views &lt;- BLViews(P = pickMatrix, q = 0.08,confidences =  100, 
	                 assetNames = colnames(monthlyReturns))
    marketPosterior &lt;- BLPosterior(monthlyReturns, views, marketIndex = sp500Returns, 
        riskFree = US13wTB)
    posteriorFeasibility(marketPosterior)
</code></pre>

<hr>
<h2 id='Replacer+20functions'>Various functions for modifying fields of view objects</h2><span id='topic+PMatrix+3C-'></span><span id='topic+confidences+3C-'></span><span id='topic+qv+3C-'></span>

<h3>Description</h3>

<p>These functions allow for direct replacement of fields of view objects such as the pick
matrix and vector of confidences.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PMatrix(views) &lt;- value
confidences(views) &lt;- value
qv(views) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Replacer+2B20functions_+3A_views">views</code></td>
<td>
<p>An object of class BLViews or COPViews, except in the case of qv&lt;- which applies only to BLViews</p>
</td></tr>
<tr><td><code id="Replacer+2B20functions_+3A_value">value</code></td>
<td>
<p> A vector in <code>confidences&lt;-</code> and <code>qv&lt;-</code> or a matrix in <code>PMatrix&lt;-</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The object is modified directly
</p>


<h3>Author(s)</h3>

<p>Francisco Gochez &lt;fgochez@mango-solutions.com&gt;</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## example from Thomas M. Idzorek's paper "A STEP-BY-STEP GUIDE TO THE BLACK-LITTERMAN MODEL"
x &lt;- c(0.001005,0.001328,-0.000579,-0.000675,0.000121,0.000128,-0.000445,-0.000437 ,
     0.001328,0.007277,-0.001307,-0.000610,-0.002237,-0.000989,0.001442,-0.001535 ,
     -0.000579,-0.001307,0.059852,0.027588,0.063497,0.023036,0.032967,0.048039 ,
    -0.000675,-0.000610,0.027588,0.029609,0.026572,0.021465,0.020697,0.029854 ,
     0.000121,-0.002237,0.063497,0.026572,0.102488,0.042744,0.039943,0.065994 ,
     0.000128,-0.000989,0.023036,0.021465,0.042744,0.032056,0.019881,0.032235 ,
    -0.000445,0.001442,0.032967,0.020697,0.039943,0.019881,0.028355,0.035064 ,
    -0.000437,-0.001535,0.048039,0.029854,0.065994,0.032235,0.035064,0.079958 )

    varCov &lt;- matrix(x, ncol = 8, nrow = 8)
    mu &lt;- c(0.08, 0.67,6.41, 4.08, 7.43, 3.70, 4.80, 6.60) / 100
    pick &lt;- matrix(0, ncol = 8, nrow = 3, dimnames = list(NULL, letters[1:8]))
    pick[1,7] &lt;- 1
    pick[2,1] &lt;- -1; pick[2,2] &lt;- 1
    pick[3, 3:6] &lt;- c(0.9, -0.9, .1, -.1)
    confidences &lt;- 1 / c(0.000709, 0.000141, 0.000866)
    myViews &lt;- BLViews(pick, c(0.0525, 0.0025, 0.02), confidences, letters[1:8])
    myPosterior &lt;- posteriorEst(myViews, tau = 0.025, mu, varCov )
    myPosterior
    # increase confidences
   	confidences(myViews) &lt;-  1 / c(0.0001, 0.0001, 0.0005)
    myPosterior2 &lt;- posteriorEst(myViews, tau = 0.025, mu, varCov )
    myPosterior2
</code></pre>

<hr>
<h2 id='runBLCOPTests'>Execute the BLCOP unit tests</h2><span id='topic+runBLCOPTests'></span>

<h3>Description</h3>

<p>Uses the <code>RUnit</code> package to execute a series of unit tests.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>runBLCOPTests(testPath = BLCOPOptions("unitTestPath"), protocolFile = "BLCOPTests.html", 
    writeProtocol = FALSE) 
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="runBLCOPTests_+3A_testpath">testPath</code></td>
<td>
<p>Location of the unit tests.</p>
</td></tr>
<tr><td><code id="runBLCOPTests_+3A_protocolfile">protocolFile</code></td>
<td>
<p>Name of the html report file generated by the RUnit function printHTMLProtocol</p>
</td></tr>
<tr><td><code id="runBLCOPTests_+3A_writeprotocol">writeProtocol</code></td>
<td>
<p>Logical flag.  Should the above html report be produced?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The summary of an object returned by RUnit's <code>runTestSuite</code>
</p>


<h3>Warning</h3>

<p>These unit tests are in need of additional test cases, and should not be regarded as exhaustive in their current state.
</p>


<h3>Author(s)</h3>

<p>Francisco Gochez &lt;fgochez@mango-solutions.com&gt; </p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
    runBLCOPTests()
    
## End(Not run)
</code></pre>

<hr>
<h2 id='sampleFrom'>Sample from a distribution object</h2><span id='topic+sampleFrom'></span>

<h3>Description</h3>

<p>Generates samples from a distribution held by an object of class <code>distribution</code> or
<code>mvdistribution</code>.  Intended mainly for internal use.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sampleFrom(dstn, n = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sampleFrom_+3A_dstn">dstn</code></td>
<td>
<p> an object of class <code>distribution</code> or <code>mvdistribution</code>.</p>
</td></tr>
<tr><td><code id="sampleFrom_+3A_n">n</code></td>
<td>
<p>Number of samples to generate</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector or matrix of samples.
</p>


<h3>Author(s)</h3>

<p>Francisco Gochez &lt;fgochez@mango-solutions.com&gt;</p>


<h3>Examples</h3>

<pre><code class='language-R'>    x &lt;- distribution("pois", lambda = 5)
    hist(sampleFrom(x, 1000), col = "blue", prob = TRUE)

</code></pre>

<hr>
<h2 id='sp500Returns'>S\&amp;P500 Returns</h2><span id='topic+sp500Returns'></span>

<h3>Description</h3>

<p>Monthly returns of the S&amp;P 500 index for the period 2/2/1998 through  1/12/2003
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sp500Returns</code></pre>


<h3>Format</h3>

<p>A matrix with 1 column and 71 rows.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>    ts.plot(sp500Returns)
</code></pre>

<hr>
<h2 id='US13wTB'>Risk free rate of return</h2><span id='topic+US13wTB'></span>

<h3>Description</h3>

<p>The monthly rate of return of the US 13 week Treasury Bill for the period 30/1/1998 through 30/11/2003.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>US13wTB</code></pre>


<h3>Format</h3>

<p>A one-column matrix with 71 rows.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ts.plot(US13wTB)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
