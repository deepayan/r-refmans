<!DOCTYPE html><html lang="en-US"><head><title>Help for package fusen</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {fusen}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#fusen-package'><p>fusen: Build a Package from Rmarkdown Files</p></a></li>
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#add_additional'><p>Add flat Rmd file that drives package development</p></a></li>
<li><a href='#add_fusen_chunks'><p>Add 'fusen' chunks</p></a></li>
<li><a href='#check_not_registered_files'><p>Show in a table files that are not already registered in the yaml config file</p></a></li>
<li><a href='#create_fusen'><p>Create a new fusen project</p></a></li>
<li><a href='#deprecate_flat_file'><p>Deprecate a flat file</p></a></li>
<li><a href='#fill_description'><p>Fill DESCRIPTION file of the package</p></a></li>
<li><a href='#get_all_created_funs'><p>Get all functions created in a R file</p></a></li>
<li><a href='#get_package_structure'><p>Get structure and information of a 'fusen' built package for developers</p></a></li>
<li><a href='#inflate'><p>Inflate Rmd to package</p></a></li>
<li><a href='#inflate_all'><p>Inflate all your flat files</p></a></li>
<li><a href='#init_share_on_github'><p>Initiate GitHub to share your package on a website</p></a></li>
<li><a href='#list_flat_files'><p>List all flat files present in the package</p></a></li>
<li><a href='#load_flat_functions'><p>Load the code of all 'function' chunk in a flat file</p></a></li>
<li><a href='#register_all_to_config'><p>Include all existing package files in the config file</p></a></li>
<li><a href='#rename_flat_file'><p>Rename a flat file</p></a></li>
<li><a href='#sepuku'><p>Clean a package from fusen-related files and tags</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Build a Package from Rmarkdown Files</td>
</tr>
<tr>
<td>Version:</td>
<td>0.7.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Use Rmarkdown First method to build your package. Start your
    package with documentation, functions, examples and tests in the same
    unique file. Everything can be set from the Rmarkdown template file
    provided in your project, then inflated as a package. Inflating the
    template copies the relevant chunks and sections in the appropriate
    files required for package development.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://thinkr-open.github.io/fusen/">https://thinkr-open.github.io/fusen/</a>,
<a href="https://github.com/Thinkr-open/fusen">https://github.com/Thinkr-open/fusen</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>attachment, cli, desc, devtools, glue, here (&ge; 1.0.0),
lightparser, magrittr, methods, pkgload, roxygen2, stats,
stringi, tibble, tidyr, tools, usethis (&ge; 2.0.0), utils, yaml</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, gert, knitr, rcmdcheck, rmarkdown, rstudioapi, styler,
testthat (&ge; 3.2.0), withr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/fusen/version:</td>
<td>0.7.0</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/testthat/parallel:</td>
<td>false</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-01-25 18:06:59 UTC; srochett</td>
</tr>
<tr>
<td>Author:</td>
<td>Sebastien Rochette
    <a href="https://orcid.org/0000-0002-1565-9313"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut]
    (creator),
  Vincent Guyader <a href="https://orcid.org/0000-0003-0671-9270"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Yohann Mansiaux [aut],
  ThinkR [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Vincent Guyader &lt;vincent@thinkr.fr&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-26 07:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='fusen-package'>fusen: Build a Package from Rmarkdown Files</h2><span id='topic+fusen'></span><span id='topic+fusen-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Use Rmarkdown First method to build your package. Start your package with documentation, functions, examples and tests in the same unique file. Everything can be set from the Rmarkdown template file provided in your project, then inflated as a package. Inflating the template copies the relevant chunks and sections in the appropriate files required for package development.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Vincent Guyader <a href="mailto:vincent@thinkr.fr">vincent@thinkr.fr</a> (<a href="https://orcid.org/0000-0003-0671-9270">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Sebastien Rochette <a href="mailto:sebastienrochettefr@gmail.com">sebastienrochettefr@gmail.com</a> (<a href="https://orcid.org/0000-0002-1565-9313">ORCID</a>) (creator)
</p>
</li>
<li><p> Yohann Mansiaux <a href="mailto:yohann.mansiaux@gmail.com">yohann.mansiaux@gmail.com</a>
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> ThinkR [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://thinkr-open.github.io/fusen/">https://thinkr-open.github.io/fusen/</a>
</p>
</li>
<li> <p><a href="https://github.com/Thinkr-open/fusen">https://github.com/Thinkr-open/fusen</a>
</p>
</li></ul>


<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='add_additional'>Add flat Rmd file that drives package development</h2><span id='topic+add_additional'></span><span id='topic+add_minimal_flat'></span><span id='topic+add_minimal_package'></span><span id='topic+add_full'></span><span id='topic+add_dev_history'></span><span id='topic+add_flat_template'></span>

<h3>Description</h3>

<p>Add flat Rmd file that drives package development
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_additional(
  pkg = ".",
  dev_dir = "dev",
  flat_name = "additional",
  overwrite = FALSE,
  open = TRUE
)

add_minimal_flat(
  pkg = ".",
  dev_dir = "dev",
  flat_name = "minimal",
  overwrite = FALSE,
  open = TRUE
)

add_minimal_package(
  pkg = ".",
  dev_dir = "dev",
  flat_name = "minimal",
  overwrite = FALSE,
  open = TRUE
)

add_full(
  pkg = ".",
  dev_dir = "dev",
  flat_name = "full",
  overwrite = FALSE,
  open = TRUE
)

add_dev_history(pkg = ".", dev_dir = "dev", overwrite = FALSE, open = TRUE)

add_flat_template(
  template = c("full", "minimal_package", "minimal_flat", "additional", "teaching",
    "dev_history"),
  pkg = ".",
  dev_dir = "dev",
  flat_name = NULL,
  overwrite = FALSE,
  open = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_additional_+3A_pkg">pkg</code></td>
<td>
<p>Path where to save file</p>
</td></tr>
<tr><td><code id="add_additional_+3A_dev_dir">dev_dir</code></td>
<td>
<p>Name of directory for development Rmarkdown files. Default to &quot;dev&quot;.</p>
</td></tr>
<tr><td><code id="add_additional_+3A_flat_name">flat_name</code></td>
<td>
<p>Name of the file to write in dev.
Use the name of the main function of your template to get chunks pre-filled with this function name.</p>
</td></tr>
<tr><td><code id="add_additional_+3A_overwrite">overwrite</code></td>
<td>
<p>Whether to overwrite existing flat Rmd template file with same name</p>
</td></tr>
<tr><td><code id="add_additional_+3A_open">open</code></td>
<td>
<p>Logical. Whether to open file after creation</p>
</td></tr>
<tr><td><code id="add_additional_+3A_template">template</code></td>
<td>
<p>Name of the template to use. See details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Choose <code>template</code> among the different templates available:
</p>

<ul>
<li><p> &quot;full&quot;: The full template with a reproducible package that can directly be inflated.
It comes along with the &quot;dev_history&quot; template. Default.
</p>
</li>
<li><p> &quot;minimal_package&quot;: Minimal template to start a new package when you already know 'fusen', along with the &quot;dev_history&quot; template. Note that this is called &quot;minimal&quot; in <code>create_fusen()</code>.
</p>
</li>
<li><p> &quot;minimal_flat&quot; or &quot;additional&quot;: Template for a new minimal flat file only.
</p>
</li>
<li><p> &quot;teaching&quot;: Template with a reproducible package, simpler than &quot;full&quot;, but everything to
teach the minimal structure of a package.
</p>
</li>
<li><p> &quot;dev_history&quot;: Template with functions commonly used during package development.
This does not contain chunks to write your own functions.
</p>
</li></ul>

<p>Abbreviated names can also be used for the different templates:
&quot;add&quot; for additional, &quot;minflat&quot; for minimal_flat, &quot;minpkg&quot; for minimal_package &quot;teach&quot; for teaching, &quot;dev&quot; for &quot;dev_history&quot;.
</p>
<p><code>add_additional()</code>, <code>add_minimal_flat()</code>, <code>add_dev_history()</code>, <code>add_minimal_package()</code>, <code>add_full()</code> are wrapper around <code>add_flat_template("additional")</code>, ...
</p>


<h3>Value</h3>

<p>Create flat Rmd file(s) template(s) and return its (their) path
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create a new project
dummypackage &lt;- tempfile("dummy.package.flat")
dir.create(dummypackage)

# Add
add_flat_template(template = "teaching", pkg = dummypackage)
# Delete dummy package
unlink(dummypackage, recursive = TRUE)

# For classical use in your package
## Not run: 
# first time ever using 'fusen'
add_flat_template("full")

# first time in your new package
add_flat_template("minimal_package")

# add new flat file for new functions
add_flat_template("add")
add_additional()
add_minimal_flat()

# add only the dev_history file in an existing package
add_dev_history()

# add new flat template for teaching (a reduced full template)
add_flat_template("teaching")

## End(Not run)
</code></pre>

<hr>
<h2 id='add_fusen_chunks'>Add 'fusen' chunks</h2><span id='topic+add_fusen_chunks'></span>

<h3>Description</h3>

<p>Create 'fusen' chunks inside your Rmd
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_fusen_chunks(
  function_name = NULL,
  export = getOption("fusen.export.functions")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_fusen_chunks_+3A_function_name">function_name</code></td>
<td>
<p>Name of the function to create.
If NULL (the  default), the user will be prompted to enter it.</p>
</td></tr>
<tr><td><code id="add_fusen_chunks_+3A_export">export</code></td>
<td>
<p>Should the function be exported?
Default is <code>getOption("fusen.export.functions")</code>. If NULL, the
user will be prompted to enter it.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the context and the content, invisibly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
add_fusen_chunks("this", export = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='check_not_registered_files'>Show in a table files that are not already registered in the yaml config file</h2><span id='topic+check_not_registered_files'></span>

<h3>Description</h3>

<p>If user start their package without 'fusen' or with version &lt; 0.4, they need to create the config file, with already existing functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_not_registered_files(
  path = ".",
  config_file,
  guess = TRUE,
  to_csv = TRUE,
  open = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_not_registered_files_+3A_path">path</code></td>
<td>
<p>Path to package to check for not registered files</p>
</td></tr>
<tr><td><code id="check_not_registered_files_+3A_config_file">config_file</code></td>
<td>
<p>Path to the configuration file</p>
</td></tr>
<tr><td><code id="check_not_registered_files_+3A_guess">guess</code></td>
<td>
<p>Logical. Guess if the file was inflated by a specific flat file</p>
</td></tr>
<tr><td><code id="check_not_registered_files_+3A_to_csv">to_csv</code></td>
<td>
<p>Logical. Whether to store along the config file, the outputs in a csv for the user to clean it manually</p>
</td></tr>
<tr><td><code id="check_not_registered_files_+3A_open">open</code></td>
<td>
<p>Logical. Whether to open the csv of unregistered files.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Path to csv file if <code>to_csv</code> is TRUE. <code>dput()</code> of the dataframe otherwise.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+register_all_to_config">register_all_to_config()</a></code> for automatically registering all files already present in the project,
<code><a href="#topic+inflate_all">inflate_all()</a></code> to inflate every flat files according to the configuration file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Run this on the current package in development
out_csv &lt;- check_not_registered_files()
file.edit(out_csv)

## End(Not run)

# Or you can try on the reproducible example
dummypackage &lt;- tempfile("clean")
dir.create(dummypackage)

# {fusen} steps
fill_description(pkg = dummypackage, fields = list(Title = "Dummy Package"))
dev_file &lt;- suppressMessages(add_flat_template(pkg = dummypackage, overwrite = TRUE, open = FALSE))
flat_file &lt;- dev_file[grepl("flat_", dev_file)]
# Inflate once
usethis::with_project(dummypackage, {
  suppressMessages(
    inflate(
      pkg = dummypackage,
      flat_file = flat_file,
      vignette_name = "Get started",
      check = FALSE,
      open_vignette = FALSE
    )
  )

  # Add a not registered file to the package
  cat("# test R file\n", file = file.path(dummypackage, "R", "to_keep.R"))

  # Use the function to check the list of files
  out_csv &lt;- check_not_registered_files(dummypackage)
  out_csv
  # Read the csv to see what is going on
  content_csv &lt;- read.csv(out_csv, stringsAsFactors = FALSE)
  content_csv
  # Keep it all or delete some files, and then register all remaining
  out_config &lt;- register_all_to_config()
  out_config
  # Open the out_config file to see what's going on
  yaml::read_yaml(out_config)
})
unlink(dummypackage, recursive = TRUE)
</code></pre>

<hr>
<h2 id='create_fusen'>Create a new fusen project</h2><span id='topic+create_fusen'></span>

<h3>Description</h3>

<p>Create a new fusen project
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_fusen(
  path,
  template = c("full", "minimal", "teaching", "dev_history"),
  flat_name = template,
  open = TRUE,
  overwrite = FALSE,
  with_git = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_fusen_+3A_path">path</code></td>
<td>
<p>Character. Path where to create the new fusen project.</p>
</td></tr>
<tr><td><code id="create_fusen_+3A_template">template</code></td>
<td>
<p>Character. Name of the template to be used among &quot;full&quot;, &quot;minimal&quot;, &quot;teaching&quot; and &quot;dev_history&quot;.</p>
</td></tr>
<tr><td><code id="create_fusen_+3A_flat_name">flat_name</code></td>
<td>
<p>Character. Filename of the flat file created.
This is also used to name the first function of the file in <code>minimal</code> template.</p>
</td></tr>
<tr><td><code id="create_fusen_+3A_open">open</code></td>
<td>
<p>Logical. Should the newly created project be opened ?</p>
</td></tr>
<tr><td><code id="create_fusen_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. Allow to overwrite 'dev/' files if path exists.</p>
</td></tr>
<tr><td><code id="create_fusen_+3A_with_git">with_git</code></td>
<td>
<p>Logical. Should git be initialized in the newly created project ?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <code><a href="#topic+add_flat_template">add_flat_template</a></code> for details about the different options for <code>template</code>.
Template &quot;additional&quot; is not available here as it is meant to be used with an already
existing 'fusen'.
</p>


<h3>Value</h3>

<p>Path to dev and flat files. Side-effect: Create a new directory to build
a package
</p>


<h3>Examples</h3>

<pre><code class='language-R'>my_path &lt;- tempfile("mypkg")
create_fusen(path = my_path, template = "full", open = FALSE)
</code></pre>

<hr>
<h2 id='deprecate_flat_file'>Deprecate a flat file</h2><span id='topic+deprecate_flat_file'></span>

<h3>Description</h3>

<p>It is not inflated again during <code style="white-space: pre;">&#8288;[inflate_all()]&#8288;</code> as it is
identified as deprecated in the config file.
Previously generated files get &quot;do not edit by hand&quot; message removed.
The flat file is moved to &quot;dev/flat_history&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deprecate_flat_file(flat_file)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="deprecate_flat_file_+3A_flat_file">flat_file</code></td>
<td>
<p>Path to the flat file to deprecate</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Used for side effect.
Move flat file to &quot;dev/flat_history&quot;, update config file,
and remove &quot;do not edit by hand&quot; message.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# These functions change the current user workspace
dev_file &lt;- suppressMessages(
  add_flat_template(
    template = "add",
    pkg = dummypackage,
    overwrite = TRUE,
    open = FALSE
  )
)
deprecate_flat_file(flat_file = "dev/flat_additional.Rmd")

## End(Not run)
</code></pre>

<hr>
<h2 id='fill_description'>Fill DESCRIPTION file of the package</h2><span id='topic+fill_description'></span>

<h3>Description</h3>

<p>Fill DESCRIPTION file of the package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fill_description(pkg = ".", fields, overwrite = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fill_description_+3A_pkg">pkg</code></td>
<td>
<p>Path to package</p>
</td></tr>
<tr><td><code id="fill_description_+3A_fields">fields</code></td>
<td>
<p>A named list of fields to add to DESCRIPTION, potentially
overriding default values. See <code><a href="usethis.html#topic+use_description">use_description</a></code> for how you can set
personalized defaults using package options</p>
</td></tr>
<tr><td><code id="fill_description_+3A_overwrite">overwrite</code></td>
<td>
<p>Whether to overwrite existing DESCRIPTION</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Fill DESCRIPTION file with fields. Return path to file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create a new project
dummypackage &lt;- tempfile("dummy.package.desc")
dir.create(dummypackage)

fill_description(
  pkg = dummypackage,
  fields = list(
    Title = "Build A Package From Rmarkdown file",
    Description = paste(
      "Use Rmd First method to build your package.",
      "Start your package with documentation.",
      "Everything can be set from a Rmarkdown file in your project."
    ),
    `Authors@R` = c(
      person(
        "John",
        "Doe",
        email = "john@email.me",
        role = c("aut", "cre"),
        comment = c(ORCID = "0000-0000-0000-0000")
      )
    )
  )
)

# Delete dummy package
unlink(dummypackage, recursive = TRUE)
</code></pre>

<hr>
<h2 id='get_all_created_funs'>Get all functions created in a R file</h2><span id='topic+get_all_created_funs'></span>

<h3>Description</h3>

<p>Get all functions created in a R file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_all_created_funs(file)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_all_created_funs_+3A_file">file</code></td>
<td>
<p>A R file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of function names
</p>


<h3>Examples</h3>

<pre><code class='language-R'>file_path &lt;- tempfile(fileext = ".R")
cat(
  "my_fun &lt;- function() {1}",
  "my_fun2 &lt;- function() {2}",
  sep = "\n",
  file = file_path
)
get_all_created_funs(file_path)
</code></pre>

<hr>
<h2 id='get_package_structure'>Get structure and information of a 'fusen' built package for developers</h2><span id='topic+get_package_structure'></span><span id='topic+draw_package_structure'></span>

<h3>Description</h3>

<p>Get structure and information of a 'fusen' built package for developers
</p>
<p>Draw a tree of the package structure in the console
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_package_structure(config_file, emoji = TRUE, silent = FALSE)

draw_package_structure(structure_list, silent = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_package_structure_+3A_config_file">config_file</code></td>
<td>
<p>Path to a source configuration file
to get the structure from</p>
</td></tr>
<tr><td><code id="get_package_structure_+3A_emoji">emoji</code></td>
<td>
<p>Add emojis to the output</p>
</td></tr>
<tr><td><code id="get_package_structure_+3A_silent">silent</code></td>
<td>
<p>Whether to print messages</p>
</td></tr>
<tr><td><code id="get_package_structure_+3A_structure_list">structure_list</code></td>
<td>
<p>A list of information about the package as issued
from <code style="white-space: pre;">&#8288;[get_package_structure()]&#8288;</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of information about the package
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# This only works inside a 'fusen' built package
pkg_structure &lt;- get_package_structure()
draw_package_structure(pkg_structure)

## End(Not run)

# Example with a dummy package
dummypackage &lt;- tempfile("drawpkg.structure")
dir.create(dummypackage)

# {fusen} steps
fill_description(pkg = dummypackage, fields = list(Title = "Dummy Package"))
dev_file &lt;- suppressMessages(
  add_flat_template(pkg = dummypackage, overwrite = TRUE, open = FALSE)
)
flat_file &lt;- dev_file[grepl("flat_", dev_file)]

usethis::with_project(dummypackage, {
  # Add an extra R file with internal function
  # to list in "keep"
  dir.create("R")
  cat("extra_fun &lt;- function() {1}\n", file = "R/my_extra_fun.R")

  # Works with classical package
  pkg_structure &lt;- get_package_structure()
  draw_package_structure(pkg_structure)
})

usethis::with_project(dummypackage, {
  # Works with 'fusen' package
  suppressMessages(
    inflate(
      pkg = dummypackage,
      flat_file = flat_file,
      vignette_name = "Get started",
      check = FALSE,
      open_vignette = FALSE
    )
  )

  pkg_structure &lt;- get_package_structure()
  draw_package_structure(pkg_structure)
})
</code></pre>

<hr>
<h2 id='inflate'>Inflate Rmd to package</h2><span id='topic+inflate'></span>

<h3>Description</h3>

<p>Inflate Rmd to package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inflate(
  pkg = ".",
  flat_file,
  vignette_name = "Get started",
  open_vignette = TRUE,
  check = TRUE,
  document = TRUE,
  overwrite = "ask",
  clean = "ask",
  update_params = TRUE,
  codecov = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="inflate_+3A_pkg">pkg</code></td>
<td>
<p>Path to package</p>
</td></tr>
<tr><td><code id="inflate_+3A_flat_file">flat_file</code></td>
<td>
<p>Path to Rmarkdown file to inflate</p>
</td></tr>
<tr><td><code id="inflate_+3A_vignette_name">vignette_name</code></td>
<td>
<p>Character. Title of the resulting vignette.
Use <code>NA</code> if you do not want to create a vignette.</p>
</td></tr>
<tr><td><code id="inflate_+3A_open_vignette">open_vignette</code></td>
<td>
<p>Logical. Whether to open vignette file at the end
of the process</p>
</td></tr>
<tr><td><code id="inflate_+3A_check">check</code></td>
<td>
<p>Logical. Whether to check package after Rmd inflating</p>
</td></tr>
<tr><td><code id="inflate_+3A_document">document</code></td>
<td>
<p>Logical. Whether to document your package using
<code><a href="attachment.html#topic+att_amend_desc">att_amend_desc</a></code></p>
</td></tr>
<tr><td><code id="inflate_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical (TRUE, FALSE) or character (&quot;ask&quot;, &quot;yes&quot;, &quot;no).
Whether to overwrite vignette and functions if already exists.</p>
</td></tr>
<tr><td><code id="inflate_+3A_clean">clean</code></td>
<td>
<p>Logical (TRUE, FALSE) or character (&quot;ask&quot;, &quot;yes&quot;, &quot;no)
Whether to delete files that are not anymore created by the current
flat file. Typically, if you have deleted or renamed a function
in the flat file. Default to &quot;ask&quot;.</p>
</td></tr>
<tr><td><code id="inflate_+3A_update_params">update_params</code></td>
<td>
<p>Logical. Whether to update the inflate parameters
in the configuration file.</p>
</td></tr>
<tr><td><code id="inflate_+3A_codecov">codecov</code></td>
<td>
<p>Logical.
Whether to compute code coverage with <code>covr::package_coverage()</code>.</p>
</td></tr>
<tr><td><code id="inflate_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>devtools::check()</code>.
For example, you can do <code>inflate(check = TRUE, quiet = TRUE)</code>,
where <code>quiet</code> is passed to <code>devtools::check()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Package structure. Return path to current package.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+inflate_all">inflate_all()</a></code> to inflate every flat files according to the configuration file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create a new project
dummypackage &lt;- tempfile("dummy.package")
dir.create(dummypackage)

# {fusen} steps
dev_file &lt;- add_flat_template(template = "full", pkg = dummypackage, overwrite = TRUE)
flat_file &lt;- dev_file[grepl("flat", dev_file)]
fill_description(pkg = dummypackage, fields = list(Title = "Dummy Package"))
inflate(
  pkg = dummypackage,
  flat_file = flat_file,
  vignette_name = "Exploration of my Data",
  check = FALSE
)

# Explore directory of the package
# browseURL(dummypackage)

# Try pkgdown build
# usethis::use_pkgdown()
# pkgdown::build_site(dummypackage)
# Delete dummy package
unlink(dummypackage, recursive = TRUE)

</code></pre>

<hr>
<h2 id='inflate_all'>Inflate all your flat files</h2><span id='topic+inflate_all'></span><span id='topic+inflate_all_no_check'></span>

<h3>Description</h3>

<p>Inflate all the flat files stored in &quot;dev/&quot; and starting with &quot;flat_&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inflate_all(
  pkg = ".",
  document = TRUE,
  check = TRUE,
  open_vignette = FALSE,
  overwrite = TRUE,
  check_unregistered = TRUE,
  codecov = FALSE,
  stylers,
  ...
)

inflate_all_no_check(
  pkg = ".",
  document = TRUE,
  open_vignette = FALSE,
  overwrite = TRUE,
  check_unregistered = TRUE,
  codecov = FALSE,
  stylers,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="inflate_all_+3A_pkg">pkg</code></td>
<td>
<p>Path to package</p>
</td></tr>
<tr><td><code id="inflate_all_+3A_document">document</code></td>
<td>
<p>Logical. Whether to document your package using
<code><a href="attachment.html#topic+att_amend_desc">att_amend_desc</a></code></p>
</td></tr>
<tr><td><code id="inflate_all_+3A_check">check</code></td>
<td>
<p>Logical. Whether to check package after Rmd inflating</p>
</td></tr>
<tr><td><code id="inflate_all_+3A_open_vignette">open_vignette</code></td>
<td>
<p>Logical. Whether to open vignette file at the end
of the process</p>
</td></tr>
<tr><td><code id="inflate_all_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical (TRUE, FALSE) or character (&quot;ask&quot;, &quot;yes&quot;, &quot;no).
Whether to overwrite vignette and functions if already exists.</p>
</td></tr>
<tr><td><code id="inflate_all_+3A_check_unregistered">check_unregistered</code></td>
<td>
<p>Logical. Whether to help detect unregistered files.
Typically files not created from a flat file and added manually in the repository.</p>
</td></tr>
<tr><td><code id="inflate_all_+3A_codecov">codecov</code></td>
<td>
<p>Logical.
Whether to compute code coverage with <code>covr::package_coverage()</code>.</p>
</td></tr>
<tr><td><code id="inflate_all_+3A_stylers">stylers</code></td>
<td>
<p>Function to be run at the end of the process,
like <code>styler::style_pkg</code> or <code>lintr::lint_package</code>
or a lambda function combining functions like:
<code>function() {styler::style_pkg(); lintr::lint_package()}</code>.
For a unique function, use the format without parenthesis <code style="white-space: pre;">&#8288;()&#8288;</code>
at the end of the command.</p>
</td></tr>
<tr><td><code id="inflate_all_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>devtools::check()</code>.
For example, you can do <code>inflate(check = TRUE, quiet = TRUE)</code>,
where <code>quiet</code> is passed to <code>devtools::check()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This requires to <code><a href="#topic+inflate">inflate()</a></code> all flat files
individually at least once, so that their specific
inflate configurations are stored.
</p>
<p>This also requires to register all R,
tests and vignettes files of your package,
even if not created with an inflate.
Run <code><a href="#topic+inflate_all">inflate_all()</a></code> once and read the messages.
The first time, you will probably need to run
<code><a href="#topic+register_all_to_config">register_all_to_config()</a></code> if your package is not new.
</p>
<p>For more information, read the
<code>vignette("inflate-all-your-flat-files", package = "fusen")</code>
</p>


<h3>Value</h3>

<p>side effect. Inflates all your flat files that can be inflated.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+inflate">inflate()</a></code> for the options of a single file inflate,
<code><a href="#topic+check_not_registered_files">check_not_registered_files()</a></code> for the list of files
not already associated with a flat file in the config file,
<code><a href="#topic+register_all_to_config">register_all_to_config()</a></code> for automatically registering
all files already present in the project before the first <code>inflate_all()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Usually, in the current package run inflate_all() directly
# These functions change the current user workspace
inflate_all()
# Or inflate_all_no_check() to prevent checks to run
inflate_all_no_check()
# Or inflate with the styler you want
inflate_all(stylers = styler::style_pkg)

## End(Not run)

# You can also inflate_all flats of another package as follows
# Example with a dummy package with a flat file
dummypackage &lt;- tempfile("inflateall.otherpkg")
dir.create(dummypackage)
fill_description(pkg = dummypackage, fields = list(Title = "Dummy Package"))
flat_files &lt;- add_minimal_package(
  pkg = dummypackage,
  overwrite = TRUE,
  open = FALSE
)
flat_file &lt;- flat_files[grep("flat", basename(flat_files))]
# Inflate the flat file once
usethis::with_project(dummypackage, {
  # if you are starting from a brand new package, inflate_all() will crash
  # it's because of the absence of a fusen config file
  #
  # inflate_all() # will crash

  # Add licence
  usethis::use_mit_license("John Doe")

  # you need to inflate manually your flat file first
  inflate(
    pkg = dummypackage,
    flat_file = flat_file,
    vignette_name = "Get started",
    check = FALSE,
    open_vignette = FALSE,
    document = TRUE,
    overwrite = "yes"
  )

  # your config file has been created
  config_yml_ref &lt;-
    yaml::read_yaml(getOption("fusen.config_file", default = "dev/config_fusen.yaml"))
})

# Next time, you can run inflate_all() directly
usethis::with_project(dummypackage, {
  # now you can run inflate_all()
  inflate_all(check = FALSE, document = TRUE)
})

# If you wish, the code coverage can be computed
usethis::with_project(dummypackage, {
  # now you can run inflate_all()
  inflate_all(check = FALSE, document = TRUE, codecov = TRUE)
})

# Clean the temporary directory
unlink(dummypackage, recursive = TRUE)
</code></pre>

<hr>
<h2 id='init_share_on_github'>Initiate GitHub to share your package on a website</h2><span id='topic+init_share_on_github'></span>

<h3>Description</h3>

<p>This uses 'pkgdown' to share the documentation of the package through GitHub Actions.
You may need to run <code>usethis::create_github_token()</code>, then <code>gitcreds::gitcreds_set()</code> before.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>init_share_on_github(ask = TRUE, organisation = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="init_share_on_github_+3A_ask">ask</code></td>
<td>
<p>Logical. <code>TRUE</code> (default) to ask the user to apply the instructions each time needed,
or <code>FALSE</code> if the user already know what to do.</p>
</td></tr>
<tr><td><code id="init_share_on_github_+3A_organisation">organisation</code></td>
<td>
<p>If supplied, the repo will be created under this
organisation, instead of the login associated with the GitHub token
discovered for this <code>host</code>. The user's role and the token's scopes must be
such that you have permission to create repositories in this
<code>organisation</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>init_share_on_github()</code> runs multiple steps to be able to share a proper package on GitHub:
</p>

<ul>
<li><p> Start versionning with git if not already
</p>
</li>
<li><p> Connect to your GitHub account
</p>
</li>
<li><p> Create a minimal DESCRIPTION file if missing
</p>

<ul>
<li><p> You will have to update its content with your information after deployment
</p>
</li></ul>

</li>
<li><p> Add NEWS file to present modifications of your releases
</p>
</li>
<li><p> Add README.Rmd and knit it to README.md to quickly present the aim and the use of your package
</p>
</li>
<li><p> Init continuous integration (CI)
</p>

<ul>
<li><p> Check the package on Linux, Windows and MacOS
</p>
</li>
<li><p> Calculate code coverage. Note that you may need to connect to <a href="https://about.codecov.io/">https://about.codecov.io/</a> to see the results of the code coverage.
</p>
</li></ul>

</li>
<li><p> Init continuous deployment (CD) of the 'pkgdown' website documentation
</p>
</li>
<li><p> Commit and push to GitHub
</p>
</li>
<li><p> List remaining manual steps to make the website public
</p>
</li></ul>

<p>Read <code>vignette("share-on-a-github-website", package = "fusen")</code>
</p>


<h3>Value</h3>

<p>The URL of the website created
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# This modifies the current directory and send it on GitHub
init_share_on_github()

## End(Not run)
</code></pre>

<hr>
<h2 id='list_flat_files'>List all flat files present in the package</h2><span id='topic+list_flat_files'></span>

<h3>Description</h3>

<p>Search for flat files listed in fusen config file, and for Rmd and qmd files starting with &quot;flat_&quot; in dev/ folder, and dev/flat_history folder
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_flat_files(pkg = ".")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="list_flat_files_+3A_pkg">pkg</code></td>
<td>
<p>Path to package</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of flat files paths
</p>

<hr>
<h2 id='load_flat_functions'>Load the code of all 'function' chunk in a flat file</h2><span id='topic+load_flat_functions'></span>

<h3>Description</h3>

<p>Load the code of all 'function' chunk in a flat file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_flat_functions(flat_file, envir = globalenv())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="load_flat_functions_+3A_flat_file">flat_file</code></td>
<td>
<p>Path to the flat to load functions from</p>
</td></tr>
<tr><td><code id="load_flat_functions_+3A_envir">envir</code></td>
<td>
<p>the <code><a href="base.html#topic+environment">environment</a></code> in which <code>expr</code> is to
be evaluated.  May also be <code>NULL</code>, a list, a data frame,
a pairlist or an integer as specified to <code><a href="base.html#topic+sys.call">sys.call</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Path to flat file loaded.
Used for side effect: Load functions in the global environment.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Use this command directly in the console
fusen::load_flat_functions()

# Or choose a flat file to load functions from
load_flat_functions(flat_file = "dev/flat_full.Rmd")
load_flat_functions(flat_file = "dev/flat_clean_fusen_files.Rmd")

## End(Not run)
</code></pre>

<hr>
<h2 id='register_all_to_config'>Include all existing package files in the config file</h2><span id='topic+register_all_to_config'></span>

<h3>Description</h3>

<p>Helps transition from non-fusen packages or made with earlier version
</p>


<h3>Usage</h3>

<pre><code class='language-R'>register_all_to_config(pkg = ".", config_file)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="register_all_to_config_+3A_pkg">pkg</code></td>
<td>
<p>Path to the package from which to add file to configuration file</p>
</td></tr>
<tr><td><code id="register_all_to_config_+3A_config_file">config_file</code></td>
<td>
<p>Path to the configuration file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisible path to 'fusen' configuration file
</p>


<h3>See Also</h3>

<p><code><a href="#topic+check_not_registered_files">check_not_registered_files()</a></code> for the list of files not already associated with a flat file in the config file,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Usually run this one inside the current project
# Note: running this will write "dev/config_fusen.yaml" in your working directory
register_all_to_config()

## End(Not run)

# Or you can try on the reproducible example
dummypackage &lt;- tempfile("register")
dir.create(dummypackage)

# {fusen} steps
fill_description(pkg = dummypackage, fields = list(Title = "Dummy Package"))
dev_file &lt;- suppressMessages(add_flat_template(pkg = dummypackage, overwrite = TRUE, open = FALSE))
flat_file &lt;- dev_file[grepl("flat_", dev_file)]
# Inflate once
usethis::with_project(dummypackage, {
  suppressMessages(
    inflate(
      pkg = dummypackage,
      flat_file = flat_file,
      vignette_name = "Get started",
      check = FALSE,
      open_vignette = FALSE
    )
  )
  out_path &lt;- register_all_to_config(dummypackage)

  # Look at the output
  yaml::read_yaml(out_path)
})
</code></pre>

<hr>
<h2 id='rename_flat_file'>Rename a flat file</h2><span id='topic+rename_flat_file'></span>

<h3>Description</h3>

<p>Rename a flat file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rename_flat_file(flat_file, new_name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rename_flat_file_+3A_flat_file">flat_file</code></td>
<td>
<p>Path to the flat file to rename</p>
</td></tr>
<tr><td><code id="rename_flat_file_+3A_new_name">new_name</code></td>
<td>
<p>New name for the flat file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Used for side effect. Flat file renamed, config file updated,
inflated files modified when needed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# These functions change the current user workspace
dev_file &lt;- suppressMessages(
  add_flat_template(
    template = "add",
    pkg = ".",
    overwrite = TRUE,
    open = FALSE
  )
)
rename_flat_file(
  flat_file = "dev/flat_additional.Rmd",
  new_name = "flat_new.Rmd"
)

## End(Not run)
</code></pre>

<hr>
<h2 id='sepuku'>Clean a package from fusen-related files and tags</h2><span id='topic+sepuku'></span>

<h3>Description</h3>

<p>This function will delete all the flat files (i.e files listed in the fusen configuration file, as well as Rmd or qmd files starting with &quot;flat&quot; in the &quot;dev/&quot; and &quot;dev/flat_history&quot; folders). It will also remove the fusen-related tags added by calls to <code>fusen::inflate()</code> in files located in the &quot;R/&quot;, &quot;tests/&quot; and &quot;vignettes/&quot; folders. Finally, it will also remove the fusen configuration file if it exists.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sepuku(pkg = ".", force = FALSE, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sepuku_+3A_pkg">pkg</code></td>
<td>
<p>Character. Path of the current package</p>
</td></tr>
<tr><td><code id="sepuku_+3A_force">force</code></td>
<td>
<p>logical. whether to force the cleaning or not, without asking if the user is sure about making this operation (default: FALSE)</p>
</td></tr>
<tr><td><code id="sepuku_+3A_verbose">verbose</code></td>
<td>
<p>logical. whether to display the files that will be deleted or modified (default: FALSE)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>side effect. A package cleaned from fusen-related files or tags
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
sepuku()
# If you want to force the cleaning, you can use the force argument
sepuku(force = TRUE)

# Example with a dummy package
dummypackage &lt;- tempfile("sepuku.example")
dir.create(dummypackage)
fill_description(pkg = dummypackage, fields = list(Title = "Dummy Package"))

usethis::with_project(dummypackage, {
  # Add licence
  usethis::use_mit_license("John Doe")

  dir.create(file.path(dummypackage, "dev"))
  dir.create(file.path(dummypackage, "dev", "flat_history"))

  # We add 2 flat files in the package and inflate them
  dev_file1 &lt;- add_minimal_flat(
    pkg = dummypackage,
    flat_name = "flat1.Rmd",
    open = FALSE
  )

  dev_file2 &lt;- add_minimal_flat(
    pkg = dummypackage,
    flat_name = "flat2.Rmd",
    open = FALSE
  )

  inflate(
    pkg = dummypackage,
    flat_file = dev_file1,
    vignette_name = "Get started",
    check = FALSE,
    open_vignette = FALSE,
    document = TRUE,
    overwrite = "yes"
  )

  inflate(
    pkg = dummypackage,
    flat_file = dev_file2,
    vignette_name = "Get started 2",
    check = FALSE,
    open_vignette = FALSE,
    document = TRUE,
    overwrite = "yes"
  )

  # We deprecate the first flat file, which will be moved to the flat_history folder
  deprecate_flat_file(
    file.path(dummypackage, "dev", "flat_flat1.Rmd")
  )

  # We create 2 flat files with the qmd extension
  file.create(file.path(dummypackage, "dev", "flat_history", "flat_old.qmd"))
  file.create(file.path(dummypackage, "dev", "flat_qmd.qmd"))

  sepuku(force = TRUE)

  # We check that the fusen configuration file has been deleted
  file.exists(
    file.path(dummypackage, "dev", "config_fusen.yaml")
  )

  # We check that all the flat files have been deleted
  length(
    list.files(
      file.path(dummypackage, "dev"),
      pattern = "^flat.*\\.Rmd"
    )
  )

  length(
    list.files(
      file.path(dummypackage, "dev"),
      pattern = "^flat.*\\.qmd"
    )
  )


  length(
    list.files(
      file.path(dummypackage, "dev", "flat_history"),
      pattern = "^flat.*\\.Rmd"
    )
  )


  length(
    list.files(
      file.path(dummypackage, "dev", "flat_history"),
      pattern = "^flat.*\\.qmd"
    )
  )

  # We check that all the files with fusen tags have been cleaned
  length(fusen:::find_files_with_fusen_tags(pkg = dummypackage))
})

# Clean the temporary directory
unlink(dummypackage, recursive = TRUE)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
