<!DOCTYPE html><html lang="EN-GB"><head><title>Help for package SafeVote</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {SafeVote}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#SafeVote-package'><p>SafeVote: Election Vote Counting with Safety Features</p></a></li>
<li><a href='#.print.summary.SafeVote'><p>.print method for summary object</p></a></li>
<li><a href='#.summary.SafeVote'><p>summarises vote-totals for subsequent printing</p></a></li>
<li><a href='#a3_hil'><p>Tideman a3_hil</p></a></li>
<li><a href='#a4_hil'><p>Tideman a4_hil</p></a></li>
<li><a href='#a53_hil'><p>Tideman a53_hil</p></a></li>
<li><a href='#approval'><p>Count votes using the approval method</p></a></li>
<li><a href='#as.SafeRankExpt'><p>as.SafeRankExpt()</p></a></li>
<li><a href='#assemble.args.for.check.score'><p>undocumented internal method</p></a></li>
<li><a href='#assemble.args.for.check.stv'><p>undocumented internal method</p></a></li>
<li><a href='#backwards.tiebreak'><p>Undocumented internal method</p></a></li>
<li><a href='#check.nseats'><p>parameter-checking method for nseats (internal)</p></a></li>
<li><a href='#check.ranking'><p>check the validity of a partial ranking</p></a></li>
<li><a href='#check.votes'><p>undocumented internal method</p></a></li>
<li><a href='#check.votes.approval'><p>undocumented internal method</p></a></li>
<li><a href='#check.votes.condorcet'><p>undocumented internal method</p></a></li>
<li><a href='#check.votes.plurality'><p>undocumented internal method</p></a></li>
<li><a href='#check.votes.score'><p>undocumented internal method</p></a></li>
<li><a href='#check.votes.stv'><p>undocumented internal method</p></a></li>
<li><a href='#check.votes.tworound.runoff'><p>undocumented internal method</p></a></li>
<li><a href='#combineRankings'><p>the least upper bound on a pair of rankings</p></a></li>
<li><a href='#completeRankingTable'><p>internal method to analyse the partial results of an stv() ballot count, to</p>
discover a complete ranking of all candidates.  The ranking may depend on the
value of nseats, because this affects how votes are transferred.</a></li>
<li><a href='#condorcet'><p>Count votes using the Condorcet voting method.</p></a></li>
<li><a href='#correct.ranking'><p>Amend ballots with equal or incomplete preferences</p></a></li>
<li><a href='#dublin_west'><p>Dublin West</p></a></li>
<li><a href='#election.info'><p>prints the basic results of an election</p></a></li>
<li><a href='#extractMargins'><p>extract margins from the results of a ballot count</p></a></li>
<li><a href='#extractRank'><p>Extract a ranking vector by name from the results of a ballot count</p></a></li>
<li><a href='#food_election'><p>Food Election</p></a></li>
<li><a href='#forwards.tiebreak'><p>Undocumented internal method</p></a></li>
<li><a href='#image.SafeVote.condorcet'><p>The image function visualizes the joint distribution of two preferences</p>
(if 'all.pref=FALSE') given 'xpref' and 'ypref', as well as the marginal
distribution of all preferences (if 'all.pref=TRUE'). The joint distribution
can be shown as proportions (if 'proportion=TRUE') or raw vote counts
(if 'proportion=FALSE').</a></li>
<li><a href='#image.SafeVote.stv'><p>visualisation of joint and marginal distributions in STV preferences</p></a></li>
<li><a href='#ims_approval'><p>IMS Approval</p></a></li>
<li><a href='#ims_election'><p>IMS Election</p></a></li>
<li><a href='#ims_plurality'><p>IMS Plurality</p></a></li>
<li><a href='#ims_score'><p>IMS Score</p></a></li>
<li><a href='#ims_stv'><p>IMS STV</p></a></li>
<li><a href='#invalid.votes'><p>Extracts the invalid.votes member (if any) from the result of a count</p></a></li>
<li><a href='#is.SafeRankExpt'><p>is.SafeRankExpt()</p></a></li>
<li><a href='#is.valid.vote'><p>undocumented internal method</p></a></li>
<li><a href='#loserMargin'><p>Find a loser and their margin of victory</p></a></li>
<li><a href='#new_SafeRankExpt'><p>Constructor for the results of a SafeRank experiment</p></a></li>
<li><a href='#ordered.preferences'><p>Undocumented internal method</p></a></li>
<li><a href='#ordered.tiebreak'><p>Undocumented internal method</p></a></li>
<li><a href='#plot.SafeRankExpt'><p>plot() method for the result of an experiment with varying numbers of ballots</p></a></li>
<li><a href='#plot.SafeVote.stv'><p>plot() method for the result of an stv() ballot-count</p></a></li>
<li><a href='#plurality'><p>Count votes using the plurality method</p></a></li>
<li><a href='#prepare.votes'><p>Coerce input 'data' into a matrix</p></a></li>
<li><a href='#print.summary.SafeRankExpt'><p>Print method for summary.SafeRankExpt</p></a></li>
<li><a href='#print.summary.SafeVote.approval'><p>print method for summary object</p></a></li>
<li><a href='#print.summary.SafeVote.condorcet'><p>print method for summary.SafeVote.condorcet</p></a></li>
<li><a href='#print.summary.SafeVote.plurality'><p>print method for summary of plurality object</p></a></li>
<li><a href='#print.summary.SafeVote.score'><p>print method for summary.score object</p></a></li>
<li><a href='#print.summary.SafeVote.stv'><p>print() method for a summary() of a SafeVote result</p></a></li>
<li><a href='#rbind_SafeRankExpt'><p>add a row to a SafeRankExpt object</p></a></li>
<li><a href='#readHil'><p>read a set of ballots in .HIL format</p></a></li>
<li><a href='#remove.candidate'><p>Remove a candidate, amending ballot papers as required</p></a></li>
<li><a href='#score'><p>Count votes using the score (or range) method.</p></a></li>
<li><a href='#solveTiebreak'><p>Undocumented internal method, renamed from 'solve.tiebreak' to avoid</p>
confusion with generic solve()</a></li>
<li><a href='#stv'><p>Count preferential ballots using an STV method</p></a></li>
<li><a href='#summary.SafeRankExpt'><p>summary method for SafeRankExpt</p></a></li>
<li><a href='#summary.SafeVote.approval'><p>summary method for approval results</p></a></li>
<li><a href='#summary.SafeVote.condorcet'><p>Summary method for condorcet() results</p></a></li>
<li><a href='#summary.SafeVote.plurality'><p>summary method for plurality object</p></a></li>
<li><a href='#summary.SafeVote.score'><p>summary method for score object</p></a></li>
<li><a href='#summary.SafeVote.stv'><p>summary() method for a SafeVote result</p></a></li>
<li><a href='#sumOfVotes'><p>internal method, computes column-sums</p></a></li>
<li><a href='#testAdditions'><p>Test the sensitivity of a result to tactical voting.</p></a></li>
<li><a href='#testDeletions'><p>Assess the safety of a preliminary result for an election</p></a></li>
<li><a href='#testFraction'><p>Bootstrapping experiment, with fractional counts of a ballot box.</p></a></li>
<li><a href='#translate.ties'><p>Undocumented internal method from original code</p></a></li>
<li><a href='#uk_labour_2010'><p>UK Labour Party Leader 2010</p></a></li>
<li><a href='#view'><p>generic view() for classes defined in this package</p></a></li>
<li><a href='#view.SafeVote.approval'><p>view method for approval object</p></a></li>
<li><a href='#view.SafeVote.condorcet'><p>view method for SafeVote.condorcet</p></a></li>
<li><a href='#view.SafeVote.plurality'><p>view method for plurality object</p></a></li>
<li><a href='#view.SafeVote.score'><p>view method for score object</p></a></li>
<li><a href='#view.SafeVote.stv'><p>view method for the result of an stv() ballot-count</p></a></li>
<li><a href='#winnerMargin'><p>Find a winner and their margin of victory</p></a></li>
<li><a href='#yale_ballots'><p>Yale Faculty Senate 2016</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Election Vote Counting with Safety Features</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-10-04</td>
</tr>
<tr>
<td>Description:</td>
<td>Fork of 'vote_2.3-2', Raftery et al. (2021)
  &lt;<a href="https://doi.org/10.32614%2FRJ-2021-086">doi:10.32614/RJ-2021-086</a>&gt;, with additional support 
  for stochastic experimentation.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>formattable, knitr, fields, grDevices, graphics, utils,
ggplot2, data.table, stringr, forcats, dplyr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Language:</td>
<td>EN-GB</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://cran.r-project.org/package=SafeVote">https://cran.r-project.org/package=SafeVote</a>,
<a href="https://cthombor.github.io/SafeVote/">https://cthombor.github.io/SafeVote/</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), vote, STV</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-10-05 22:15:35 UTC; cthom</td>
</tr>
<tr>
<td>Author:</td>
<td>Clark Thomborson <a href="https://orcid.org/0000-0002-4147-7898"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [cre, aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Clark Thomborson &lt;c.thomborson@auckland.ac.nz&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-10-05 22:50:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='SafeVote-package'>SafeVote: Election Vote Counting with Safety Features</h2><span id='topic+SafeVote'></span><span id='topic+SafeVote-package'></span>

<h3>Description</h3>

<p>Fork of 'vote_2.3-2', Raftery et al. (2021) <a href="https://doi.org/10.32614/RJ-2021-086">doi:10.32614/RJ-2021-086</a>, with additional support for stochastic experimentation.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Clark Thomborson <a href="mailto:c.thomborson@auckland.ac.nz">c.thomborson@auckland.ac.nz</a> (<a href="https://orcid.org/0000-0002-4147-7898">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://cran.r-project.org/package=SafeVote">https://cran.r-project.org/package=SafeVote</a>
</p>
</li>
<li> <p><a href="https://cthombor.github.io/SafeVote/">https://cthombor.github.io/SafeVote/</a>
</p>
</li></ul>


<hr>
<h2 id='.print.summary.SafeVote'>.print method for summary object</h2><span id='topic+.print.summary.SafeVote'></span>

<h3>Description</h3>

<p>.print method for summary object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.print.summary.SafeVote(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".print.summary.SafeVote_+3A_x">x</code>, <code id=".print.summary.SafeVote_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='.summary.SafeVote'>summarises vote-totals for subsequent printing</h2><span id='topic+.summary.SafeVote'></span>

<h3>Description</h3>

<p>summarises vote-totals for subsequent printing
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.summary.SafeVote(object, larger.wins = TRUE, reorder = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".summary.SafeVote_+3A_object">object</code></td>
<td>
<p>vector of total votes per candidate</p>
</td></tr>
<tr><td><code id=".summary.SafeVote_+3A_larger.wins">larger.wins</code></td>
<td>
<p>TRUE if candidates are &quot;voted in&quot; rather than voted-out</p>
</td></tr>
<tr><td><code id=".summary.SafeVote_+3A_reorder">reorder</code></td>
<td>
<p>TRUE if output data.frame columns should be in rank-order</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame with three columns and nc+1 rows, where
nc is the number of candidates.  The first column contains candidate
names and a final entry named &quot;Sum&quot;.  The second column contains
vote totals. The third column is a vector of chars which indicate
whether the candidate has been elected.  The data.frame has four named
attributes carrying election parameters.
</p>
<p>TODO: refactor into a modern dialect of R, perhaps by defining a
constructor for an election_info S3 object with a summary method and a
print method
</p>

<hr>
<h2 id='a3_hil'>Tideman a3_hil</h2><span id='topic+a3_hil'></span>

<h3>Description</h3>

<p>This data is one of 87 sets of ballots from the Tideman data
collection, as curated by The Center for Range Voting.
</p>
<p>This set of ballots was collected in 1987 by Nicolaus Tideman, with support
from NSF grant SES86-18328. &quot;The data are records of ballots from elections
of British organizations (mostly trade unions using PR-STV or IRV voting)
in which the voters ranked the candidates. The data were gathered under a
stipulation that the organizations involved would remain anonymous.&quot;
</p>
<p>The ballots were encoded in David Hill's format, and have been converted to
the preference-vector format of this package.  The archival file
A4.HIL at rangevoting.org contains eight blank ballot
papers (1, 616, 619, 620, 685, 686, 687, 688) which we have retained. This
set may be counted by 'stv(a3_hil,nseats=attr(a3_hil,&quot;nseats&quot;))'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(a3_hil)
</code></pre>


<h3>Format</h3>

<p>A data frame with attribute &quot;nseats&quot; = 7, consisting of 989
observations and 15 candidates.
</p>

<hr>
<h2 id='a4_hil'>Tideman a4_hil</h2><span id='topic+a4_hil'></span>

<h3>Description</h3>

<p>This data is one of 87 sets of ballots from the Tideman data
collection, as curated by The Center for Range Voting. The ballots were
archived in David Hill's format, and have been converted to the
preference-vector format of this package.
</p>
<p>This set of ballots was collected in 1987 by Nicolaus Tideman, with support
from NSF grant SES86-18328. &quot;The data are records of ballots from elections
of British organizations (mostly trade unions using PR-STV or IRV voting)
in which the voters ranked the candidates. The data were gathered under a
stipulation that the organizations involved would remain anonymous.&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(a4_hil)
</code></pre>


<h3>Format</h3>

<p>A data frame with attribute &quot;nseats&quot; = 2, consisting of 43
observations and 14 candidates.
</p>

<hr>
<h2 id='a53_hil'>Tideman a53_hil</h2><span id='topic+a53_hil'></span>

<h3>Description</h3>

<p>This data is one of 87 sets of ballots from the Tideman data
collection, as curated by The Center for Range Voting.
</p>
<p>This set of ballots was collected in 1988 by Nicolaus Tideman, with support
from NSF grant SES86-18328. &quot;The data are records of ballots from elections
of British organizations (mostly trade unions using PR-STV or IRV voting)
in which the voters ranked the candidates. The data were gathered under a
stipulation that the organizations involved would remain anonymous.&quot;
</p>
<p>The ballots were encoded in David Hill's format, and have been converted to
the preference-vector format of this package.  Candidates have been renamed
to letters of the alphabet, for ease of comparison with Table 3 of Tideman
(2000). Note: the DOI for this article is 10.1023/A:1005082925477, with an
embedded colon which isn't handled by the usual DOI-to-URL conversions.
</p>
<p>As noted in this table, it is a very close race between candidates D, F,
and B in the final rounds of a Meek count of 'a53_hil'.
</p>
<p>Tideman's implementation of Meek's method excludes B (on 59.02 votes), then
elects D in the final round (on 88.33 votes) with a margin of 0.95 votes
ahead of F (on 87.38 votes).
</p>
<p>In v1.0, 'stv(a53.hil,quota.hare=TRUE)' excludes F (on 56.418 votes), then
elects D in the final round (on 79.705 votes) with a winning margin of
0.747 votes ahead of B (on 78.958 votes). The result of the election is the
same but the vote counts and winning margins differ significantly; so we
conclude that 'stv(quota.hare=TRUE)' in SafeVote v1.0 is <em>not</em> a reliable
proxy for Tideman's implementation of Meek's algorithm.
</p>
<p>Future researchers may wish to adjust the quota calculation of 'vote.stv()'
so that it is no longer biased upward by a &quot;fuzz&quot; of 0.001, to see if this
change significantly reduces the discrepancies with Tideman's
implementation of Meek.
</p>
<p>It would be unreasonable to expect an exact replication of results from two
different implementations of an STV method.  We leave it to future
researchers to develop a formal specification, so that it would be possible
to verify the correctness of an implementation.  We also leave it to future
researchers to develop a set of test cases with appropriate levels of
tolerance for the vagaries of floating-point roundoff in optimised (or even
unoptimised!) compilations of the same code on different computing systems.
We suggest that 'a53_hil' be included in any such test set.
</p>
<p>We note in passing that B.A. Wichmann, in &quot;Checking two STV programs&quot;,
Voting Matters 11, 2000, discussed the cross-validation exercise he
conducted between the ERBS implementation of its voting rules and the
Church of England's implementation of its voting rules.  In both cases, he
discovered ambiguities in the specification as well as defects in the
implementation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(a53_hil)
</code></pre>


<h3>Format</h3>

<p>A data frame with attribute &quot;nseats&quot; = 4, consisting of 460
observations and 10 candidates.
</p>

<hr>
<h2 id='approval'>Count votes using the approval method</h2><span id='topic+approval'></span>

<h3>Description</h3>

<p>See https://arxiv.org/abs/2102.05801
</p>


<h3>Usage</h3>

<pre><code class='language-R'>approval(votes, nseats = 1, fsep = "\t", quiet = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="approval_+3A_votes">votes</code>, <code id="approval_+3A_nseats">nseats</code>, <code id="approval_+3A_fsep">fsep</code>, <code id="approval_+3A_quiet">quiet</code>, <code id="approval_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='as.SafeRankExpt'>as.SafeRankExpt()</h2><span id='topic+as.SafeRankExpt'></span>

<h3>Description</h3>

<p>as.SafeRankExpt()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.SafeRankExpt(df)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as.SafeRankExpt_+3A_df">df</code></td>
<td>
<p>data.frame object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a SafeRankExpt object, or stop() if df fails some sanity checks
</p>

<hr>
<h2 id='assemble.args.for.check.score'>undocumented internal method</h2><span id='topic+assemble.args.for.check.score'></span>

<h3>Description</h3>

<p>undocumented internal method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assemble.args.for.check.score(x, max.score = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="assemble.args.for.check.score_+3A_x">x</code>, <code id="assemble.args.for.check.score_+3A_max.score">max.score</code>, <code id="assemble.args.for.check.score_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='assemble.args.for.check.stv'>undocumented internal method</h2><span id='topic+assemble.args.for.check.stv'></span>

<h3>Description</h3>

<p>undocumented internal method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assemble.args.for.check.stv(x, equal.ranking = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="assemble.args.for.check.stv_+3A_x">x</code>, <code id="assemble.args.for.check.stv_+3A_equal.ranking">equal.ranking</code>, <code id="assemble.args.for.check.stv_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='backwards.tiebreak'>Undocumented internal method</h2><span id='topic+backwards.tiebreak'></span>

<h3>Description</h3>

<p>Undocumented internal method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>backwards.tiebreak(prefs, icans, elim = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="backwards.tiebreak_+3A_prefs">prefs</code></td>
<td>
<p>undocumented</p>
</td></tr>
<tr><td><code id="backwards.tiebreak_+3A_icans">icans</code></td>
<td>
<p>undocumented</p>
</td></tr>
<tr><td><code id="backwards.tiebreak_+3A_elim">elim</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>

<hr>
<h2 id='check.nseats'>parameter-checking method for nseats (internal)</h2><span id='topic+check.nseats'></span>

<h3>Description</h3>

<p>parameter-checking method for nseats (internal)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check.nseats(
  nseats = NULL,
  ncandidates,
  default = 1,
  mcan = NULL,
  complete.ranking = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check.nseats_+3A_nseats">nseats</code></td>
<td>
<p>initially-specified number of seats to be filled in an election</p>
</td></tr>
<tr><td><code id="check.nseats_+3A_ncandidates">ncandidates</code></td>
<td>
<p>the number of candidates standing for election</p>
</td></tr>
<tr><td><code id="check.nseats_+3A_default">default</code></td>
<td>
<p>the return value of this function when nseats=NULL</p>
</td></tr>
<tr><td><code id="check.nseats_+3A_mcan">mcan</code></td>
<td>
<p>a deprecated name for nseats</p>
</td></tr>
<tr><td><code id="check.nseats_+3A_complete.ranking">complete.ranking</code></td>
<td>
<p>when TRUE, the return value is in 1..ncandidates
When FALSE, the return value is in 1..ncandidates-1 (for backwards
compatibility)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a valid non-NULL value for the number of seats to be filled
</p>

<hr>
<h2 id='check.ranking'>check the validity of a partial ranking</h2><span id='topic+check.ranking'></span>

<h3>Description</h3>

<p>check the validity of a partial ranking
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check.ranking(r)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check.ranking_+3A_r">r</code></td>
<td>
<p>a numeric vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a partial ranking of the elements of 'r', using 'ties.method=&quot;min&quot;'
</p>

<hr>
<h2 id='check.votes'>undocumented internal method</h2><span id='topic+check.votes'></span>

<h3>Description</h3>

<p>undocumented internal method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check.votes(x, ..., quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check.votes_+3A_x">x</code>, <code id="check.votes_+3A_quiet">quiet</code>, <code id="check.votes_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='check.votes.approval'>undocumented internal method</h2><span id='topic+check.votes.approval'></span>

<h3>Description</h3>

<p>undocumented internal method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check.votes.approval(record, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check.votes.approval_+3A_record">record</code>, <code id="check.votes.approval_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='check.votes.condorcet'>undocumented internal method</h2><span id='topic+check.votes.condorcet'></span>

<h3>Description</h3>

<p>undocumented internal method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check.votes.condorcet(record, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check.votes.condorcet_+3A_record">record</code>, <code id="check.votes.condorcet_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='check.votes.plurality'>undocumented internal method</h2><span id='topic+check.votes.plurality'></span>

<h3>Description</h3>

<p>undocumented internal method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check.votes.plurality(record, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check.votes.plurality_+3A_record">record</code>, <code id="check.votes.plurality_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='check.votes.score'>undocumented internal method</h2><span id='topic+check.votes.score'></span>

<h3>Description</h3>

<p>undocumented internal method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check.votes.score(record, max.score, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check.votes.score_+3A_record">record</code>, <code id="check.votes.score_+3A_max.score">max.score</code>, <code id="check.votes.score_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='check.votes.stv'>undocumented internal method</h2><span id='topic+check.votes.stv'></span>

<h3>Description</h3>

<p>undocumented internal method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check.votes.stv(record, equal.ranking = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check.votes.stv_+3A_record">record</code>, <code id="check.votes.stv_+3A_equal.ranking">equal.ranking</code>, <code id="check.votes.stv_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='check.votes.tworound.runoff'>undocumented internal method</h2><span id='topic+check.votes.tworound.runoff'></span>

<h3>Description</h3>

<p>undocumented internal method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check.votes.tworound.runoff(record, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check.votes.tworound.runoff_+3A_record">record</code>, <code id="check.votes.tworound.runoff_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='combineRankings'>the least upper bound on a pair of rankings</h2><span id='topic+combineRankings'></span>

<h3>Description</h3>

<p>the least upper bound on a pair of rankings
</p>


<h3>Usage</h3>

<pre><code class='language-R'>combineRankings(r1, r2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="combineRankings_+3A_r1">r1</code>, <code id="combineRankings_+3A_r2">r2</code></td>
<td>
<p>numeric vectors</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the most complete (but possibly partial) ranking which is consistent
with both r1 and r2.  Uses 'ties.method=&quot;min&quot;'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>combineRankings( c(3,1,2), c(2,1,3) )
</code></pre>

<hr>
<h2 id='completeRankingTable'>internal method to analyse the partial results of an stv() ballot count, to
discover a complete ranking of all candidates.  The ranking may depend on the
value of nseats, because this affects how votes are transferred.</h2><span id='topic+completeRankingTable'></span>

<h3>Description</h3>

<p>internal method to analyse the partial results of an stv() ballot count, to
discover a complete ranking of all candidates.  The ranking may depend on the
value of nseats, because this affects how votes are transferred.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>completeRankingTable(object, quiet, verbose)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="completeRankingTable_+3A_object">object</code></td>
<td>
<p>partial results</p>
</td></tr>
<tr><td><code id="completeRankingTable_+3A_quiet">quiet</code></td>
<td>
<p>TRUE to suppress console output</p>
</td></tr>
<tr><td><code id="completeRankingTable_+3A_verbose">verbose</code></td>
<td>
<p>TRUE to produce diagnostic output</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame with columns TotalRank, Margin, Candidate, Elected,
SafeRank
</p>

<hr>
<h2 id='condorcet'>Count votes using the Condorcet voting method.</h2><span id='topic+condorcet'></span>

<h3>Description</h3>

<p>The Condorcet method elects the candidate who wins a majority of the ranked
vote in every head to head election against each of the other candidates.
A Condorcet winner is a candidate who beats all other candidates
in pairwise comparisons. Analogously, a Condorcet loser is a candidate
who loses against all other candidates. Neither Condorcet winner nor loser
might exist.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>condorcet(
  votes,
  runoff = FALSE,
  nseats = 1,
  safety = 1,
  fsep = "\t",
  quiet = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="condorcet_+3A_votes">votes</code></td>
<td>
<p>A <a href="base.html#topic+matrix">matrix</a> or <a href="base.html#topic+data.frame">data.frame</a> containing the votes. Rows correspond
to the votes, columns correspond to the candidates. If 'votes' is a
character string, it is interpreted as a file name from which the votes are
to be read. See
<a href="https://cthombor.github.io/SafeVote/reference/condorcet#details">below</a>.</p>
</td></tr>
<tr><td><code id="condorcet_+3A_runoff">runoff</code></td>
<td>
<p>Logical. If <a href="base.html#topic+TRUE">TRUE</a> and no Condorcet winner exists, the election
goes into a run-off, see
<a href="https://cthombor.github.io/SafeVote/reference/condorcet#details">below</a>.</p>
</td></tr>
<tr><td><code id="condorcet_+3A_nseats">nseats</code></td>
<td>
<p>the number of seats to be filled in this election</p>
</td></tr>
<tr><td><code id="condorcet_+3A_safety">safety</code></td>
<td>
<p>Parameter for a clustering heuristic on a total ranking of
the candidates.  Conjecture: the default of '1.0' ensures a separation
of one s.d. between clusters, when 'votes' are i.u.d. permutations on the
candidates.</p>
</td></tr>
<tr><td><code id="condorcet_+3A_fsep">fsep</code></td>
<td>
<p>If 'votes' is a file name, this argument gives the column
separator in the file.</p>
</td></tr>
<tr><td><code id="condorcet_+3A_quiet">quiet</code></td>
<td>
<p>If <a href="base.html#topic+TRUE">TRUE</a> no output is printed.</p>
</td></tr>
<tr><td><code id="condorcet_+3A_...">...</code></td>
<td>
<p>Undocumented intent (preserved from legacy code)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the runoff argument is set to 'TRUE' and no Condorcet winner exists,
two or more candidates with the most pairwise wins are selected and
the method is applied to such subset. If more than two candidates are in
such run-off, the selection is performed repeatedly, until either a winner
is selected or no more selection is possible.
</p>
<p>The input data votes is structured the same way as for the <a href="#topic+stv">stv</a> method:
Row 'i' contains the preferences of voter 'i' numbered
'1; 2; : : : ; r; 0; 0; 0; 0', in some order, while equal preferences
are allowed. The columns correspond to the candidates. The <a href="base.html#topic+dimnames">dimnames</a> of
the columns are the names of the candidates; if these are not supplied
then the candidates are lettered 'A, B, C, ...'. If the dataset
contains missing values (<a href="base.html#topic+NA">NA</a>), they are replaced by zeros.
</p>
<p>If a ballot has equally-ranked candidates, its rankings are tested for
validity: for each preference <code class="reqn">i</code> which does not have any duplicate,
there are exactly <code class="reqn">i - 1</code> preferences <code class="reqn">j</code> with <code class="reqn">0 &lt; j &lt; i</code>. If
any ballot 'x' fails this validity test, it is automatically corrected (aka
&quot;converted&quot;) into a valid ballot using 'x &lt;- rank(x, ties.method = &quot;min&quot;)',
and a warning is issued.
</p>
<p>This method also computes a Borda ranking of all candidates, using
tournament-style scoring.  This ranking is &quot;fuzzed&quot; into a 'safeRank', with
approximately 1 s.d. of fuzz when 'safety=1.0' and voter preferences are
i.u.d.  A warning is thrown if a 'safeRank' violates the (extended) Condorcet
principle: that Candidate <code class="reqn">i</code> is more highly ranked than Candidate
<code class="reqn">j</code> only if a majority of voters agree with this.
</p>


<h3>Value</h3>

<p>Object of class 'SafeVote.condorcet'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
data(food_election)
condorcet(food_election)
}
</code></pre>

<hr>
<h2 id='correct.ranking'>Amend ballots with equal or incomplete preferences</h2><span id='topic+correct.ranking'></span>

<h3>Description</h3>

<p>The 'correct.ranking' function returns a modified set of ballots.  Its
argument 'partial' determines if ballots are partially set to '0' ('TRUE'),
or if it is a complete re-ranking, as allowed when 'equal.ranking = TRUE'. It
can be used by calling it explicitly. It is called by 'stv' if 'equal.ranking
= TRUE' or 'invalid.partial = TRUE'. It is also called from within the
'condorcet' function with the default value ('FALSE') for 'partial', i.e.
interpreting any '0' as a last= preference.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>correct.ranking(votes, partial = FALSE, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="correct.ranking_+3A_votes">votes</code></td>
<td>
<p>original contents of ballot box</p>
</td></tr>
<tr><td><code id="correct.ranking_+3A_partial">partial</code></td>
<td>
<p>if 'FALSE' (default), each ballot is interpreted, if possible,
as a complete (but not necessarily total) ranking of the candidates.  If
'TRUE', a ballot will contain a '0' on unranked candidates.</p>
</td></tr>
<tr><td><code id="correct.ranking_+3A_quiet">quiet</code></td>
<td>
<p>suppress diagnostics</p>
</td></tr>
</table>


<h3>Value</h3>

<p>corrected ballots
</p>

<hr>
<h2 id='dublin_west'>Dublin West</h2><span id='topic+dublin_west'></span>

<h3>Description</h3>

<p>Dataset containing ranked votes for the Dublin West constituency
in 2002, Ireland.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(dublin_west)
</code></pre>


<h3>Format</h3>

<p>A data frame with 29988 observations and 9 candidates. Each record
corresponds to one ballot with candidates being ranked between 1 and 9 with
zeros allowed.
</p>


<h3>See Also</h3>

<p><a href="https://en.wikipedia.org/wiki/Dublin_West#2002_general_election">Wikipedia</a>
</p>

<hr>
<h2 id='election.info'>prints the basic results of an election</h2><span id='topic+election.info'></span>

<h3>Description</h3>

<p>prints the basic results of an election
</p>


<h3>Usage</h3>

<pre><code class='language-R'>election.info(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="election.info_+3A_x">x</code></td>
<td>
<p>basic election results, as named attributes of an R structure or
object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame : an invisible copy of the printed results
</p>
<p>TODO: refactor into a modern dialect of R, e.g. defining a constructor for an
election_info S3 object with a print method
</p>

<hr>
<h2 id='extractMargins'>extract margins from the results of a ballot count</h2><span id='topic+extractMargins'></span>

<h3>Description</h3>

<p>extract margins from the results of a ballot count
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extractMargins(marginNames, crRanks, cr)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="extractMargins_+3A_marginnames">marginNames</code></td>
<td>
<p>list of colnames of the margins in our SafeRank result</p>
</td></tr>
<tr><td><code id="extractMargins_+3A_crranks">crRanks</code></td>
<td>
<p>ranks of candidates, not necessarily total</p>
</td></tr>
<tr><td><code id="extractMargins_+3A_cr">cr</code></td>
<td>
<p>structure returned by a ballot-counting method
</p>
<p>Margins are adjusted for tied candidates, such that candidates within a tie
group have margins indicative of their relative strengths. Extremely small
margins are indicative of floating-point roundoff errors.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>named list of margins
</p>

<hr>
<h2 id='extractRank'>Extract a ranking vector by name from the results of a ballot count</h2><span id='topic+extractRank'></span>

<h3>Description</h3>

<p>Extract a ranking vector by name from the results of a ballot count
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extractRank(rankMethod, cr)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="extractRank_+3A_rankmethod">rankMethod</code></td>
<td>
<p>&quot;safeRank&quot;, &quot;elected&quot;, or &quot;rank&quot;</p>
</td></tr>
<tr><td><code id="extractRank_+3A_cr">cr</code></td>
<td>
<p>structure returned by a ballot-counting method</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a numeric ranking vector, in order of colnames(cr$data)
</p>

<hr>
<h2 id='food_election'>Food Election</h2><span id='topic+food_election'></span>

<h3>Description</h3>

<p>Sample data for testing SafeVote
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(food_election)
</code></pre>


<h3>Format</h3>

<p>A data frame with 20 observations and 5 candidates (Oranges,
Pears, Chocolate, Strawberries, Sweets). Each record corresponds to
one ballot with ranking for each of the candidates.
</p>

<hr>
<h2 id='forwards.tiebreak'>Undocumented internal method</h2><span id='topic+forwards.tiebreak'></span>

<h3>Description</h3>

<p>Undocumented internal method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>forwards.tiebreak(prefs, icans, elim = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="forwards.tiebreak_+3A_prefs">prefs</code></td>
<td>
<p>undocumented</p>
</td></tr>
<tr><td><code id="forwards.tiebreak_+3A_icans">icans</code></td>
<td>
<p>undocumented</p>
</td></tr>
<tr><td><code id="forwards.tiebreak_+3A_elim">elim</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>

<hr>
<h2 id='image.SafeVote.condorcet'>The image function visualizes the joint distribution of two preferences
(if 'all.pref=FALSE') given 'xpref' and 'ypref', as well as the marginal
distribution of all preferences (if 'all.pref=TRUE'). The joint distribution
can be shown as proportions (if 'proportion=TRUE') or raw vote counts
(if 'proportion=FALSE').</h2><span id='topic+image.SafeVote.condorcet'></span>

<h3>Description</h3>

<p>The image function visualizes the joint distribution of two preferences
(if 'all.pref=FALSE') given 'xpref' and 'ypref', as well as the marginal
distribution of all preferences (if 'all.pref=TRUE'). The joint distribution
can be shown as proportions (if 'proportion=TRUE') or raw vote counts
(if 'proportion=FALSE').
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SafeVote.condorcet'
image(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="image.SafeVote.condorcet_+3A_x">x</code></td>
<td>
<p>object of type SafeVote.condorcet</p>
</td></tr>
<tr><td><code id="image.SafeVote.condorcet_+3A_...">...</code></td>
<td>
<p>See arguments for <a href="#topic+image.SafeVote.stv">image.SafeVote.stv</a>, especially 'xpref',
'ypref', 'all.pref' and 'proportion'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>image object, with side-effect in RStudio Plots pane
</p>

<hr>
<h2 id='image.SafeVote.stv'>visualisation of joint and marginal distributions in STV preferences</h2><span id='topic+image.SafeVote.stv'></span>

<h3>Description</h3>

<p>visualisation of joint and marginal distributions in STV preferences
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SafeVote.stv'
image(x, xpref = 2, ypref = 1, all.pref = FALSE, proportion = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="image.SafeVote.stv_+3A_x">x</code></td>
<td>
<p>STV results to be visualised</p>
</td></tr>
<tr><td><code id="image.SafeVote.stv_+3A_xpref">xpref</code>, <code id="image.SafeVote.stv_+3A_ypref">ypref</code></td>
<td>
<p>candidates shown in a joint distribution plot</p>
</td></tr>
<tr><td><code id="image.SafeVote.stv_+3A_all.pref">all.pref</code></td>
<td>
<p>plot the joint distribution of two preferences (if
'all.pref=FALSE') or the marginal distribution of all preferences (if
'all.pref=TRUE').</p>
</td></tr>
<tr><td><code id="image.SafeVote.stv_+3A_proportion">proportion</code></td>
<td>
<p>The joint distribution can be shown either as proportions
(if 'proportion=TRUE') or raw vote counts (if 'proportion=FALSE').</p>
</td></tr>
<tr><td><code id="image.SafeVote.stv_+3A_...">...</code></td>
<td>
<p>args passed to fields::image.plot()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>image object, with side-effect in RStudio Plots pane
</p>

<hr>
<h2 id='ims_approval'>IMS Approval</h2><span id='topic+ims_approval'></span>

<h3>Description</h3>

<p>Modified version of ims_election, for use in approval voting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(ims_approval)
</code></pre>


<h3>Format</h3>

<p>A data frame with 620 observations and 10 candidates (names were
made up). Each record corresponds to one ballot, with 0 indicating
disapproval of a candidate and 1 indicating approval.
</p>

<hr>
<h2 id='ims_election'>IMS Election</h2><span id='topic+ims_election'></span>

<h3>Description</h3>

<p>Datasets containing anonymized votes for a past Council
election of the Institute of Mathematical Statistics (IMS). The dataset
ims_election is the original dataset used with single transferable vote,
where candidate names have been changed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(ims_election)
</code></pre>


<h3>Format</h3>

<p>A data frame with 620 observations and 10 candidates (names were
made up). Each record corresponds to one ballot. The IMS Council voting
is done using the STV method, and thus the ims_election dataset contains
ballots with candidates being ranked between 1 and 10 with zeros allowed.
</p>

<hr>
<h2 id='ims_plurality'>IMS Plurality</h2><span id='topic+ims_plurality'></span>

<h3>Description</h3>

<p>Modified version of ims_election, for use in plurality voting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(ims_plurality)
</code></pre>


<h3>Format</h3>

<p>A data frame with 620 observations and 10 candidates (names were
made up). Each record corresponds to one ballot, with 1 against
the voter's most-preferred candidate and 0 against all other candidates.
</p>

<hr>
<h2 id='ims_score'>IMS Score</h2><span id='topic+ims_score'></span>

<h3>Description</h3>

<p>Modified version of ims_election, for use in score voting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(ims_score)
</code></pre>


<h3>Format</h3>

<p>A data frame with 620 observations and 10 candidates (names were
made up). Each record corresponds to one ballot, with higher values
indicating the more-preferred candidates.
</p>

<hr>
<h2 id='ims_stv'>IMS STV</h2><span id='topic+ims_stv'></span>

<h3>Description</h3>

<p>Copy of ims_election, included for backwards compatibility.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(ims_election)
</code></pre>


<h3>Format</h3>

<p>A data frame with 620 observations and 10 candidates (names were
made up). Each record corresponds to one ballot. The IMS Council voting
is done using the STV method, and thus the ims_election dataset contains
ballots with candidates being ranked between 1 and 10 with zeros allowed.
</p>

<hr>
<h2 id='invalid.votes'>Extracts the invalid.votes member (if any) from the result of a count</h2><span id='topic+invalid.votes'></span>

<h3>Description</h3>

<p>This method was added Jan 2022 &ndash; it was named in a warning message but had
apparently either never been implemented, or had been &quot;lost&quot; through
versioning.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>invalid.votes(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="invalid.votes_+3A_x">x</code></td>
<td>
<p>value returned by stv, condorcet, approval, plurality, or score</p>
</td></tr>
</table>


<h3>Value</h3>

<p>matrix with one column per candidate and one row per invalid
ballot
</p>

<hr>
<h2 id='is.SafeRankExpt'>is.SafeRankExpt()</h2><span id='topic+is.SafeRankExpt'></span>

<h3>Description</h3>

<p>is.SafeRankExpt()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.SafeRankExpt(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is.SafeRankExpt_+3A_x">x</code></td>
<td>
<p>object of unknown class</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE if x is a valid SafeRankExpt object
</p>

<hr>
<h2 id='is.valid.vote'>undocumented internal method</h2><span id='topic+is.valid.vote'></span>

<h3>Description</h3>

<p>undocumented internal method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.valid.vote(x, method, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is.valid.vote_+3A_x">x</code>, <code id="is.valid.vote_+3A_method">method</code>, <code id="is.valid.vote_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='loserMargin'>Find a loser and their margin of victory</h2><span id='topic+loserMargin'></span>

<h3>Description</h3>

<p>Find a loser and their margin of victory
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loserMargin(votes)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="loserMargin_+3A_votes">votes</code></td>
<td>
<p>cleaned ballots</p>
</td></tr>
</table>


<h3>Value</h3>

<p>length-2 vector: the index of a losing candidate, and their margin
of loss (0 if a tie, NA if no winners)
</p>

<hr>
<h2 id='new_SafeRankExpt'>Constructor for the results of a SafeRank experiment</h2><span id='topic+new_SafeRankExpt'></span>

<h3>Description</h3>

<p>Constructor for the results of a SafeRank experiment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_SafeRankExpt(
  rankNames = list(),
  marginNames = list(),
  countMethod = character(0),
  rankMethod = character(0),
  datasetName = character(0),
  experimentalMethod = character(0),
  countArgs = list(),
  nseats = integer(0),
  otherFactors = list(),
  unitFactors = list()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="new_SafeRankExpt_+3A_ranknames">rankNames</code></td>
<td>
<p>colnames for per-candidate ranks</p>
</td></tr>
<tr><td><code id="new_SafeRankExpt_+3A_marginnames">marginNames</code></td>
<td>
<p>colnames for per-candidate margins</p>
</td></tr>
<tr><td><code id="new_SafeRankExpt_+3A_countmethod">countMethod</code></td>
<td>
<p>secondary factor: counting method e.g. &quot;stv&quot;</p>
</td></tr>
<tr><td><code id="new_SafeRankExpt_+3A_rankmethod">rankMethod</code></td>
<td>
<p>secondary factor: ranking method e.g. &quot;elected&quot;</p>
</td></tr>
<tr><td><code id="new_SafeRankExpt_+3A_datasetname">datasetName</code></td>
<td>
<p>secondary factor: name of the dataset of ballots</p>
</td></tr>
<tr><td><code id="new_SafeRankExpt_+3A_experimentalmethod">experimentalMethod</code></td>
<td>
<p>secondary factor: name of the method which
simulated these elections e.g. &quot;testFraction&quot;</p>
</td></tr>
<tr><td><code id="new_SafeRankExpt_+3A_countargs">countArgs</code></td>
<td>
<p>secondary factor: args passed to countMethod</p>
</td></tr>
<tr><td><code id="new_SafeRankExpt_+3A_nseats">nseats</code></td>
<td>
<p>secondary factor: number of seats to be filled</p>
</td></tr>
<tr><td><code id="new_SafeRankExpt_+3A_otherfactors">otherFactors</code></td>
<td>
<p>other secondary factors, e.g. parameters to
experimentalMethod</p>
</td></tr>
<tr><td><code id="new_SafeRankExpt_+3A_unitfactors">unitFactors</code></td>
<td>
<p>per-unit factors derived from PRNG of the experimental
harness, e.g describing the ballots randomly deleted during testDeletions</p>
</td></tr>
</table>


<h3>Value</h3>

<p>object of class SafeRankExpt
</p>

<hr>
<h2 id='ordered.preferences'>Undocumented internal method</h2><span id='topic+ordered.preferences'></span>

<h3>Description</h3>

<p>Undocumented internal method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ordered.preferences(vmat)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ordered.preferences_+3A_vmat">vmat</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>

<hr>
<h2 id='ordered.tiebreak'>Undocumented internal method</h2><span id='topic+ordered.tiebreak'></span>

<h3>Description</h3>

<p>Undocumented internal method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ordered.tiebreak(vmat, seed = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ordered.tiebreak_+3A_vmat">vmat</code></td>
<td>
<p>undocumented</p>
</td></tr>
<tr><td><code id="ordered.tiebreak_+3A_seed">seed</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>

<hr>
<h2 id='plot.SafeRankExpt'>plot() method for the result of an experiment with varying numbers of ballots</h2><span id='topic+plot.SafeRankExpt'></span>

<h3>Description</h3>

<p>The &quot;adjusted rank&quot; of a candidate is their ranking <code class="reqn">r</code> plus their
scaled &quot;winning margin&quot;. The scaled margin is
<code class="reqn">e^{-cx/\sqrt{n}}</code>, where <code class="reqn">x</code> is the adjusted margin (i.e. the number
of votes by which this candidate is ahead of the next-weaker candidate,
adjusted for the number of ballots <code class="reqn">n</code> and the number of seats <code class="reqn">s</code>),
and <code class="reqn">c&gt;0</code> is the margin-scaling parameter 'cMargin'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SafeRankExpt'
plot(
  x,
  facetWrap = FALSE,
  nResults = NA,
  anBallots = 0,
  cMargin = 1,
  xlab = "Ballots",
  ylab = "Adjusted Rank",
  title = NULL,
  subtitle = "(default)",
  line = TRUE,
  boxPlot = FALSE,
  boxPlotCutInterval = 10,
  pointSize = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.SafeRankExpt_+3A_x">x</code></td>
<td>
<p>object containing experimental results</p>
</td></tr>
<tr><td><code id="plot.SafeRankExpt_+3A_facetwrap">facetWrap</code></td>
<td>
<p>TRUE provides per-candidate scatterplots</p>
</td></tr>
<tr><td><code id="plot.SafeRankExpt_+3A_nresults">nResults</code></td>
<td>
<p>number of candidates whose results are plotted (omitting
the least-favoured candidates first)</p>
</td></tr>
<tr><td><code id="plot.SafeRankExpt_+3A_anballots">anBallots</code>, <code id="plot.SafeRankExpt_+3A_cmargin">cMargin</code></td>
<td>
<p>parameters in the rank-adjustment formula</p>
</td></tr>
<tr><td><code id="plot.SafeRankExpt_+3A_xlab">xlab</code>, <code id="plot.SafeRankExpt_+3A_ylab">ylab</code></td>
<td>
<p>axis labels</p>
</td></tr>
<tr><td><code id="plot.SafeRankExpt_+3A_title">title</code></td>
<td>
<p>overall title for the plot.  Default: NULL</p>
</td></tr>
<tr><td><code id="plot.SafeRankExpt_+3A_subtitle">subtitle</code></td>
<td>
<p>subtitle for the plot.  Default: value of nSeats and
any non-zero rank-adjustment parameters</p>
</td></tr>
<tr><td><code id="plot.SafeRankExpt_+3A_line">line</code></td>
<td>
<p>TRUE will connect points with lines, and will disable jitter</p>
</td></tr>
<tr><td><code id="plot.SafeRankExpt_+3A_boxplot">boxPlot</code></td>
<td>
<p>TRUE for a boxplot, rather than the default xy-scatter</p>
</td></tr>
<tr><td><code id="plot.SafeRankExpt_+3A_boxplotcutinterval">boxPlotCutInterval</code></td>
<td>
<p>parameter of boxplot, default 10</p>
</td></tr>
<tr><td><code id="plot.SafeRankExpt_+3A_pointsize">pointSize</code></td>
<td>
<p>diameter of points</p>
</td></tr>
<tr><td><code id="plot.SafeRankExpt_+3A_...">...</code></td>
<td>
<p>params for generic plot()</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The default value of 'cMargin=1.0' draws visual attention to candidates with
a very small winning margin, as their adjusted rank is very near to
<code class="reqn">r+1</code>.  Candidates with anything more than a small winning margin have
only a small rank adjustment, due to the exponential scaling.
</p>
<p>A scaling linear in <code class="reqn">s/n</code> is applied to margins when 'anBallots&gt;0'.  Such
a linear scaling may be a helpful way to visualise the winning margins in STV
elections because the margin of victory for an elected candidate is typically
not much larger than the quota of <code class="reqn">n/(s+1)</code> (Droop) or <code class="reqn">n/s</code> (Hare).
The linear scaling factor is <code class="reqn">as/n</code>, where <code class="reqn">a</code> is the value of
'anBallots', <code class="reqn">s</code> is the number of seats, and <code class="reqn">n</code> is the number of
ballots. For plotting on the (inverted) adjusted rank scale, the
linearly-scaled margin is added to the candidate's rank.  Note that the
linearly-scaled margins are zero when <code class="reqn">a=0</code>, and thus have no effect on
the adjusted rank.  You might want to increase the value of 'anBallots',
starting from 1.0, until the winning candidate's adjusted rank is 1.0 when
all ballots are counted, then confirm that the adjusted ranks of other
candidates are still congruent with their ranking (i.e. that the
rank-adjustment is less than 1 in all cases except perhaps on an initial
transient with small numbers of ballots).
</p>
<p>When both 'anBallots' and 'cMargins' are non-zero, the ranks are adjusted
with both exponentially-scaled margins and linearly-scaled margins. The
resulting plot would be difficult to interpret in a valid way.
</p>
<p>Todo: Accept a list of SafeVoteExpt objects.
</p>
<p>Todo: Multiple counts with the same number of ballots could be summarised
with a box-and-whisker graphic, rather than a set of jittered points.
</p>
<p>Todo: Consider developing a linear scaling that is appropriate for
plotting stochastic experimental data derived from Condorcet elections.
</p>


<h3>Value</h3>

<p>graphics object, with side-effect in RStudio Plots pane
</p>

<hr>
<h2 id='plot.SafeVote.stv'>plot() method for the result of an stv() ballot-count</h2><span id='topic+plot.SafeVote.stv'></span>

<h3>Description</h3>

<p>The 'plot' function shows the evolution of the total score for each candidate
as well as the quota.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SafeVote.stv'
plot(x, xlab = "Count", ylab = "Preferences", point.size = 2, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.SafeVote.stv_+3A_x">x</code></td>
<td>
<p>stv results</p>
</td></tr>
<tr><td><code id="plot.SafeVote.stv_+3A_xlab">xlab</code>, <code id="plot.SafeVote.stv_+3A_ylab">ylab</code></td>
<td>
<p>axis labels</p>
</td></tr>
<tr><td><code id="plot.SafeVote.stv_+3A_point.size">point.size</code></td>
<td>
<p>diameter of elected/eliminated points</p>
</td></tr>
<tr><td><code id="plot.SafeVote.stv_+3A_...">...</code></td>
<td>
<p>params for generic plot()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>graphics object, with side-effect in RStudio's Plots pane
</p>

<hr>
<h2 id='plurality'>Count votes using the plurality method</h2><span id='topic+plurality'></span>

<h3>Description</h3>

<p>See https://arxiv.org/abs/2102.05801
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plurality(votes, nseats = 1, fsep = "\t", quiet = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plurality_+3A_votes">votes</code>, <code id="plurality_+3A_nseats">nseats</code>, <code id="plurality_+3A_fsep">fsep</code>, <code id="plurality_+3A_quiet">quiet</code>, <code id="plurality_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='prepare.votes'>Coerce input 'data' into a matrix</h2><span id='topic+prepare.votes'></span>

<h3>Description</h3>

<p>Coerce input 'data' into a matrix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prepare.votes(data, fsep = "\n")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prepare.votes_+3A_data">data</code></td>
<td>
<p>possibly a .csv file, possibly an R object</p>
</td></tr>
<tr><td><code id="prepare.votes_+3A_fsep">fsep</code></td>
<td>
<p>separation character for .csv e.g. tab or comma</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a matrix with one row per ballot, one column per candidate, with
named rows and columns
</p>

<hr>
<h2 id='print.summary.SafeRankExpt'>Print method for summary.SafeRankExpt</h2><span id='topic+print.summary.SafeRankExpt'></span>

<h3>Description</h3>

<p>Print method for summary.SafeRankExpt
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'summary.SafeRankExpt'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.summary.SafeRankExpt_+3A_x">x</code></td>
<td>
<p>experimental results</p>
</td></tr>
<tr><td><code id="print.summary.SafeRankExpt_+3A_...">...</code></td>
<td>
<p>args for generic print()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisible(x), with side-effects to console
</p>

<hr>
<h2 id='print.summary.SafeVote.approval'>print method for summary object</h2><span id='topic+print.summary.SafeVote.approval'></span>

<h3>Description</h3>

<p>print method for summary object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'summary.SafeVote.approval'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.summary.SafeVote.approval_+3A_x">x</code>, <code id="print.summary.SafeVote.approval_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='print.summary.SafeVote.condorcet'>print method for summary.SafeVote.condorcet</h2><span id='topic+print.summary.SafeVote.condorcet'></span>

<h3>Description</h3>

<p>print method for summary.SafeVote.condorcet
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'summary.SafeVote.condorcet'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.summary.SafeVote.condorcet_+3A_x">x</code></td>
<td>
<p>object of type summary.SafeVote.condorcet</p>
</td></tr>
<tr><td><code id="print.summary.SafeVote.condorcet_+3A_...">...</code></td>
<td>
<p>parameters passed to generic <a href="base.html#topic+print">print</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p>textual description of 'x'
</p>

<hr>
<h2 id='print.summary.SafeVote.plurality'>print method for summary of plurality object</h2><span id='topic+print.summary.SafeVote.plurality'></span>

<h3>Description</h3>

<p>print method for summary of plurality object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'summary.SafeVote.plurality'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.summary.SafeVote.plurality_+3A_x">x</code>, <code id="print.summary.SafeVote.plurality_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='print.summary.SafeVote.score'>print method for summary.score object</h2><span id='topic+print.summary.SafeVote.score'></span>

<h3>Description</h3>

<p>print method for summary.score object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'summary.SafeVote.score'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.summary.SafeVote.score_+3A_x">x</code>, <code id="print.summary.SafeVote.score_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='print.summary.SafeVote.stv'>print() method for a summary() of a SafeVote result</h2><span id='topic+print.summary.SafeVote.stv'></span>

<h3>Description</h3>

<p>print() method for a summary() of a SafeVote result
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'summary.SafeVote.stv'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.summary.SafeVote.stv_+3A_x">x</code></td>
<td>
<p>election results</p>
</td></tr>
<tr><td><code id="print.summary.SafeVote.stv_+3A_...">...</code></td>
<td>
<p>args to be passed to kable()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>no return value, called for side-effect of printing to console
</p>

<hr>
<h2 id='rbind_SafeRankExpt'>add a row to a SafeRankExpt object</h2><span id='topic+rbind_SafeRankExpt'></span>

<h3>Description</h3>

<p>add a row to a SafeRankExpt object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rbind_SafeRankExpt(object, row)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rbind_SafeRankExpt_+3A_object">object</code></td>
<td>
<p>prior results of experimentation</p>
</td></tr>
<tr><td><code id="rbind_SafeRankExpt_+3A_row">row</code></td>
<td>
<p>new observations</p>
</td></tr>
</table>


<h3>Value</h3>

<p>SafeRankExpt object with an additional row
</p>

<hr>
<h2 id='readHil'>read a set of ballots in .HIL format</h2><span id='topic+readHil'></span>

<h3>Description</h3>

<p><a href="https://rangevoting.org/TidemanData.html">rangevoting.org/TidemanData.html</a>:
The data are in a format developed by David Hill. The first line contains the
number of candidates and the number to be elected. (Many but not all
elections were multi-winner.) In subsequent lines that represent ballot
papers, the first number is always 1. (The format was designed for a counting
program that treats the first number as the number of instances of the
ordering of the candidates on the line.) Next on these lines is a sequence of
numbers representing a voter's reported ranking: The number of the candidate
ranked first, the number of the candidate ranked second, and so on. The end
of the reported ranking is signaled by a zero. A zero at the beginning of the
ranking is a signal that the list of ballot papers has ended. Next come the
names of the candidates, each in parentheses, as required by the counting
program, and finally the name of the election.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readHil(filnm, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readHil_+3A_filnm">filnm</code></td>
<td>
<p>name of a file in .HIL format</p>
</td></tr>
<tr><td><code id="readHil_+3A_quiet">quiet</code></td>
<td>
<p>suppress diagnostic output</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a matrix with one row per ballot, one column per candidate, with
named rows and columns, and with attributes &quot;nseats&quot; and &quot;ename&quot;
</p>

<hr>
<h2 id='remove.candidate'>Remove a candidate, amending ballot papers as required</h2><span id='topic+remove.candidate'></span>

<h3>Description</h3>

<p>Remove a candidate, amending ballot papers as required
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove.candidate(votes, can, quiet = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="remove.candidate_+3A_votes">votes</code></td>
<td>
<p>ballot box</p>
</td></tr>
<tr><td><code id="remove.candidate_+3A_can">can</code></td>
<td>
<p>candidate to be removed</p>
</td></tr>
<tr><td><code id="remove.candidate_+3A_quiet">quiet</code></td>
<td>
<p>suppress diagnostics</p>
</td></tr>
</table>


<h3>Value</h3>

<p>amended ballot box
</p>

<hr>
<h2 id='score'>Count votes using the score (or range) method.</h2><span id='topic+score'></span>

<h3>Description</h3>

<p>See https://arxiv.org/abs/2102.05801
</p>


<h3>Usage</h3>

<pre><code class='language-R'>score(
  votes,
  nseats = 1,
  max.score = NULL,
  larger.wins = TRUE,
  fsep = "\t",
  quiet = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="score_+3A_votes">votes</code>, <code id="score_+3A_nseats">nseats</code>, <code id="score_+3A_max.score">max.score</code>, <code id="score_+3A_larger.wins">larger.wins</code>, <code id="score_+3A_fsep">fsep</code>, <code id="score_+3A_quiet">quiet</code>, <code id="score_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='solveTiebreak'>Undocumented internal method, renamed from 'solve.tiebreak' to avoid
confusion with generic solve()</h2><span id='topic+solveTiebreak'></span>

<h3>Description</h3>

<p>Undocumented internal method, renamed from 'solve.tiebreak' to avoid
confusion with generic solve()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>solveTiebreak(method, prefs, icans, ordered.ranking = NULL, elim = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="solveTiebreak_+3A_method">method</code></td>
<td>
<p>undocumented</p>
</td></tr>
<tr><td><code id="solveTiebreak_+3A_prefs">prefs</code></td>
<td>
<p>undocumented</p>
</td></tr>
<tr><td><code id="solveTiebreak_+3A_icans">icans</code></td>
<td>
<p>undocumented</p>
</td></tr>
<tr><td><code id="solveTiebreak_+3A_ordered.ranking">ordered.ranking</code></td>
<td>
<p>undocumented</p>
</td></tr>
<tr><td><code id="solveTiebreak_+3A_elim">elim</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='stv'>Count preferential ballots using an STV method</h2><span id='topic+stv'></span>

<h3>Description</h3>

<p>The 'votes' parameter is as described in <code><a href="#topic+condorcet">condorcet()</a></code> with the following
additional semantics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stv(
  votes,
  nseats = NULL,
  eps = 0.001,
  equal.ranking = FALSE,
  fsep = "\t",
  ties = c("f", "b"),
  quota.hare = FALSE,
  constant.quota = FALSE,
  win.by.elim = TRUE,
  group.nseats = NULL,
  group.members = NULL,
  complete.ranking = FALSE,
  invalid.partial = FALSE,
  verbose = FALSE,
  seed = NULL,
  quiet = FALSE,
  digits = 3,
  backwards.compatible = FALSE,
  safety = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stv_+3A_votes">votes</code></td>
<td>
<p>an array with one column per candidate and one row per ballot,
as described in <code><a href="#topic+condorcet">condorcet()</a></code></p>
</td></tr>
<tr><td><code id="stv_+3A_nseats">nseats</code></td>
<td>
<p>the number of seats to be filled in this election</p>
</td></tr>
<tr><td><code id="stv_+3A_eps">eps</code></td>
<td>
<p>fuzz-factor when comparing fractional votes.  The default of 0.001
is preserved from the legacy code, injecting substantial validity hazards
into the codebase.  We have not attempted to mitigate any of these hazards
in 'SafeVote v1.0.0'.  We prefer instead to retain backwards-compatibility
with the legacy code in 'vote_2.3-2' in the knowledge that, even if these
hazards were adequately addressed, the resulting code is unlikely to be
reliable at replicating the results of any other implementation of any of
the many variants of &quot;STV&quot; counting methods.  Please see the description of
the 'a53_hil' dataset in this package for some preliminary findings on the
magnitude of the vote-count-variances which may be injected by differing
implementations of broadly-similar &quot;STV&quot; counting methods.</p>
</td></tr>
<tr><td><code id="stv_+3A_equal.ranking">equal.ranking</code></td>
<td>
<p>if 'TRUE', equal preferences are allowed.</p>
</td></tr>
<tr><td><code id="stv_+3A_fsep">fsep</code></td>
<td>
<p>column-separator for output</p>
</td></tr>
<tr><td><code id="stv_+3A_ties">ties</code></td>
<td>
<p>vector of tie-breaking methods: &rdquo;f&rdquo; for forward, &rdquo;b&rdquo; for
backward</p>
</td></tr>
<tr><td><code id="stv_+3A_quota.hare">quota.hare</code></td>
<td>
<p>'TRUE' if Hare quota, 'FALSE' if Droop quota (default)</p>
</td></tr>
<tr><td><code id="stv_+3A_constant.quota">constant.quota</code></td>
<td>
<p>'TRUE' if quota is held constant.  Over-rides
'quota.hare'. Default is 'FALSE'</p>
</td></tr>
<tr><td><code id="stv_+3A_win.by.elim">win.by.elim</code></td>
<td>
<p>'TRUE' (default) if the quota is waived when there are no
more candidates than vacant seats.  Note: there is no lower limit when the
quota is waived, so a candidate may be elected on zero votes.</p>
</td></tr>
<tr><td><code id="stv_+3A_group.nseats">group.nseats</code></td>
<td>
<p>number of seats reserved to members of a group</p>
</td></tr>
<tr><td><code id="stv_+3A_group.members">group.members</code></td>
<td>
<p>vector of members of the group with reserved seats</p>
</td></tr>
<tr><td><code id="stv_+3A_complete.ranking">complete.ranking</code></td>
<td>
<p>is 'TRUE' by default.  This parameter is retained
solely for backwards compatibility with <code><a href="vote.html#topic+stv">vote::stv()</a></code>. It has no effect on
elections in which 'nseats' is explicitly specified in the call to
<code><a href="#topic+stv">stv()</a></code>.</p>
</td></tr>
<tr><td><code id="stv_+3A_invalid.partial">invalid.partial</code></td>
<td>
<p>'TRUE' if ballots which do not specify a complete
ranking of candidates are informal (aka &quot;invalid&quot;) <em>i.e.</em> ignored
(with a warning).  Default is 'FALSE'.</p>
</td></tr>
<tr><td><code id="stv_+3A_verbose">verbose</code></td>
<td>
<p>'TRUE' for diagnostic output</p>
</td></tr>
<tr><td><code id="stv_+3A_seed">seed</code></td>
<td>
<p>integer seed for tie-breaking.  Warning: if non-'NULL', the PRNG
for R is reseeded prior to <em>every</em> random tie-break among the
possibly-elected candidates.  We have preserved this functionality in this
branch to allow regression against the legacy codebase of <code><a href="vote.html#topic+stv">vote::stv()</a></code>. In
<code><a href="#topic+stv">stv()</a></code> the default value for seed is 'NULL' rather than the
legacy value of 1234, to mitigate the validity hazard of PRNG reseedings
during a stochastic experiment.</p>
</td></tr>
<tr><td><code id="stv_+3A_quiet">quiet</code></td>
<td>
<p>'TRUE' to suppress console output</p>
</td></tr>
<tr><td><code id="stv_+3A_digits">digits</code></td>
<td>
<p>number of significant digits in the output table</p>
</td></tr>
<tr><td><code id="stv_+3A_backwards.compatible">backwards.compatible</code></td>
<td>
<p>'TRUE' to regress against vote2_3.2 by
disabling $margins, $fuzz, $rankingTable, $safeRank</p>
</td></tr>
<tr><td><code id="stv_+3A_safety">safety</code></td>
<td>
<p>number of standard deviations on vote-counts, when producing a
safeRank by clustering near-ties in a complete ranking</p>
</td></tr>
<tr><td><code id="stv_+3A_...">...</code></td>
<td>
<p>undocumented intent (preserved from legacy code)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default the preferences are not allowed to contain duplicates per ballot.
However, if the argument 'equal.ranking' is set to 'TRUE', ballots are allowed
to have the same ranking for multiple candidates. The desired format is such
that for each preference $i$ that does not have any duplicate, there must be
exactly $i – 1$ preferences $j$ with $0 &lt; j &lt; i$. For example, valid ordered
preferences are '1; 1; 3; 4; …', or '1; 2; 3; 3; 3; 6; …', but NOT '1; 1; 2;
3; …', or NOT '1; 2; 3; 3; 3; 5; 6; …'. If the data contain such invalid
votes, they are automatically corrected and a warning is issued by calling
the 'correct.ranking' function.
</p>
<p>If equal ranking is not allowed ('equal.ranking = FALSE'), the argument
'invalid.partial' can be used to make ballots containing duplicates or gaps
partially valid. If it is 'TRUE', a ballot is considered valid up to a
preference that is in normal case not allowed. For example, ballots '1; 2; 3;
4; 4; 6' or '1; 2; 3; 5; 6; 7' would be both converted into '1; 2; 3; 0; 0;
0', because the ballots contain valid ranking only up to the third
preference.
</p>
<p>By default, ties in the STV algorithm are resolved using the forwards
tie-breaking method, see Newland and Briton (Section 5.2.5). Argument 'ties'
can be set to ”b” in order to use the backwards tie-breaking method, see
O’Neill (2004). In addition, both methods are complemented by the following
“ordered” method: Prior to the STV election candidates are ordered by the
number of first preferences. Equal ranks are resolved by moving to the number
of second preferences, then third and so on. Remaining ties are broken by
random draws. Such complete ordering is used to break any tie that cannot be
resolved by the forwards or backwards method. If there is at least one tie
during the processing, the output contains a row indicating in which count a
tie-break happened (see the 'ties' element in the Value section for an
explanation of the symbols).
</p>
<p>The ordered tiebreaking described above can be analysed from outside of the
'stv' function by using the 'ordered.tiebreak' function for viewing the
a-priori ordering (the highest number is the best and lowest is the worst).
Such ranking is produced by comparing candidates along the columns of the
matrix returned by 'ordered.preferences'.
</p>


<h3>Value</h3>

<p>object of class 'vote.stv'.  Note: the winning margins in this object
are valid for the elected candidates and their (total) ranking, but must be
adjusted within tiegroups to be valid for the candidates' (possibly
partial) safeRank.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(food_election)
stv(food_election, safety = 0.0)
stv(food_election, nseats = 2)

</code></pre>

<hr>
<h2 id='summary.SafeRankExpt'>summary method for SafeRankExpt</h2><span id='topic+summary.SafeRankExpt'></span>

<h3>Description</h3>

<p>summary method for SafeRankExpt
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SafeRankExpt'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.SafeRankExpt_+3A_object">object</code></td>
<td>
<p>experimental results to be summarised</p>
</td></tr>
<tr><td><code id="summary.SafeRankExpt_+3A_...">...</code></td>
<td>
<p>args for generic summary()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>summary.SafeRankExpt object
</p>

<hr>
<h2 id='summary.SafeVote.approval'>summary method for approval results</h2><span id='topic+summary.SafeVote.approval'></span>

<h3>Description</h3>

<p>summary method for approval results
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SafeVote.approval'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.SafeVote.approval_+3A_object">object</code>, <code id="summary.SafeVote.approval_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='summary.SafeVote.condorcet'>Summary method for condorcet() results</h2><span id='topic+summary.SafeVote.condorcet'></span>

<h3>Description</h3>

<p>Summary method for condorcet() results
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SafeVote.condorcet'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.SafeVote.condorcet_+3A_object">object</code></td>
<td>
<p>of type SafeVote.condorcet</p>
</td></tr>
<tr><td><code id="summary.SafeVote.condorcet_+3A_...">...</code></td>
<td>
<p>undocumented, currently unused</p>
</td></tr>
</table>


<h3>Value</h3>

<p><a href="base.html#topic+data.frame">data.frame</a> object
</p>

<hr>
<h2 id='summary.SafeVote.plurality'>summary method for plurality object</h2><span id='topic+summary.SafeVote.plurality'></span>

<h3>Description</h3>

<p>summary method for plurality object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SafeVote.plurality'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.SafeVote.plurality_+3A_object">object</code>, <code id="summary.SafeVote.plurality_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>descriptive dataframe
</p>

<hr>
<h2 id='summary.SafeVote.score'>summary method for score object</h2><span id='topic+summary.SafeVote.score'></span>

<h3>Description</h3>

<p>summary method for score object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SafeVote.score'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.SafeVote.score_+3A_object">object</code>, <code id="summary.SafeVote.score_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='summary.SafeVote.stv'>summary() method for a SafeVote result</h2><span id='topic+summary.SafeVote.stv'></span>

<h3>Description</h3>

<p>summary() method for a SafeVote result
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SafeVote.stv'
summary(object, ..., digits = 3)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.SafeVote.stv_+3A_object">object</code></td>
<td>
<p>undocumented, legacy code</p>
</td></tr>
<tr><td><code id="summary.SafeVote.stv_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
<tr><td><code id="summary.SafeVote.stv_+3A_digits">digits</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame summarising 'object', for use by 'print' method
</p>

<hr>
<h2 id='sumOfVotes'>internal method, computes column-sums</h2><span id='topic+sumOfVotes'></span>

<h3>Description</h3>

<p>Renamed from 'sum.votes' to avoid confusion with the generic sum()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sumOfVotes(votes)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sumOfVotes_+3A_votes">votes</code></td>
<td>
<p>ballots are rows, candidates are columns</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of votes for each candidate
</p>

<hr>
<h2 id='testAdditions'>Test the sensitivity of a result to tactical voting.</h2><span id='topic+testAdditions'></span>

<h3>Description</h3>

<p>Ballots are added until a specified number of simulated elections ('arep')
have been held.   If a 'favoured' candidate is specified, then the ballot-box
is stuffed with ballots awarding first-preference to this candidate.
Alternatively, a 'tacticalBallot' may be specified.  If both 'favoured' and
'tacticalBallot' are 'NULL', then a random candidate is selected as the
favoured one.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>testAdditions(
  votes,
  ainc = 1,
  arep = NULL,
  favoured = NULL,
  tacticalBallot = NULL,
  rankMethod = "safeRank",
  countMethod = "stv",
  countArgs = list(),
  exptName = NULL,
  equiet = FALSE,
  everbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="testAdditions_+3A_votes">votes</code></td>
<td>
<p>A set of ballots, as in
<a href="https://CRAN.R-project.org/package=vote">vote_2.3.2</a></p>
</td></tr>
<tr><td><code id="testAdditions_+3A_ainc">ainc</code></td>
<td>
<p>Number of ballots to be added in each step</p>
</td></tr>
<tr><td><code id="testAdditions_+3A_arep">arep</code></td>
<td>
<p>Maximum number of ballot-stuffed elections to run</p>
</td></tr>
<tr><td><code id="testAdditions_+3A_favoured">favoured</code></td>
<td>
<p>Name of the candidate being &quot;plumped&quot;.  If 'NULL', a random
candidate is selected from among the candidates not initially top-ranked.
All other candidates are fully-ranked at random, with an identical ballot
paper being stuffed multiple times.  An integer value for 'favoured' is
interpreted as an index into the candidate names.</p>
</td></tr>
<tr><td><code id="testAdditions_+3A_tacticalballot">tacticalBallot</code></td>
<td>
<p>A ballot paper i.e. a vector of length 'ncol(ballots)'.
If this argument is non-'NULL', it takes precedence over 'favoured' when the
ballot box is being stuffed.</p>
</td></tr>
<tr><td><code id="testAdditions_+3A_rankmethod">rankMethod</code></td>
<td>
<p>&quot;safeRank&quot; (default), &quot;elected&quot;, or &quot;rank&quot;.  &quot;rank&quot; is
a total ranking of the candidates, with ties broken at random.  &quot;elected&quot;
assigns rank=1 to elected candidates, rank=2 for eliminated candidates.</p>
</td></tr>
<tr><td><code id="testAdditions_+3A_countmethod">countMethod</code></td>
<td>
<p>countMethod &quot;stv&quot; (default) or &quot;condorcet&quot;</p>
</td></tr>
<tr><td><code id="testAdditions_+3A_countargs">countArgs</code></td>
<td>
<p>List of args to be passed to countMethod (in addition to
votes)</p>
</td></tr>
<tr><td><code id="testAdditions_+3A_exptname">exptName</code></td>
<td>
<p>stem-name of experimental units <em>e.g.</em> &quot;E&quot;.  If 'NULL', then
a 3-character string of capital letters is chosen at random.</p>
</td></tr>
<tr><td><code id="testAdditions_+3A_equiet">equiet</code></td>
<td>
<p>'TRUE' to suppress all experimental output</p>
</td></tr>
<tr><td><code id="testAdditions_+3A_everbose">everbose</code></td>
<td>
<p>'TRUE' to produce diagnostic output from the experiment</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A matrix of experimental results, of dimension <code class="reqn">n</code> by <code class="reqn">2m+1</code>,
where <code class="reqn">n</code> is the number of elections and <code class="reqn">m</code> is the number of
candidates.  The first column is named &quot;nBallots&quot;.  Other columns indicate
the ranking of the eponymous candidate, and their margin over the
next-lower-ranked candidate.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(food_election) 
testAdditions(food_election, arep = 2, favoured = "Strawberries", 
  countArgs = list(safety = 0))

</code></pre>

<hr>
<h2 id='testDeletions'>Assess the safety of a preliminary result for an election</h2><span id='topic+testDeletions'></span>

<h3>Description</h3>

<p>Ballots are deleted at random from the ballot-box, with election results
computed once per 'dinc' ballot-deletions.  The experiment terminates after a
specified number of ballots have been deleted, or a specified number of
ballot-counts have occurred.  Note: these ballot-counts are correlated.  Use
<code><a href="#topic+testFraction">testFraction()</a></code> to experiment with independently-drawn samples from the
ballot-box.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>testDeletions(
  votes,
  countMethod = "stv",
  countArgs = list(),
  dstart = NULL,
  dinc = NULL,
  dlimit = NULL,
  drep = NULL,
  rankMethod = "safeRank",
  exptName = NULL,
  equiet = FALSE,
  everbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="testDeletions_+3A_votes">votes</code></td>
<td>
<p>A set of ballots, as in
<a href="https://CRAN.R-project.org/package=vote">vote_2.3.2</a></p>
</td></tr>
<tr><td><code id="testDeletions_+3A_countmethod">countMethod</code></td>
<td>
<p>&quot;stv&quot; (default) or &quot;condorcet&quot;</p>
</td></tr>
<tr><td><code id="testDeletions_+3A_countargs">countArgs</code></td>
<td>
<p>List of args to be passed to 'countMethod' (in addition to
'votes')</p>
</td></tr>
<tr><td><code id="testDeletions_+3A_dstart">dstart</code></td>
<td>
<p>Number of ballots in the first ballot-count (selected at random
from 'votes', without replacement)</p>
</td></tr>
<tr><td><code id="testDeletions_+3A_dinc">dinc</code></td>
<td>
<p>Number of ballots to be deleted in subsequent steps</p>
</td></tr>
<tr><td><code id="testDeletions_+3A_dlimit">dlimit</code></td>
<td>
<p>Maximum number of ballots to delete (in addition to 'dstart')</p>
</td></tr>
<tr><td><code id="testDeletions_+3A_drep">drep</code></td>
<td>
<p>Maximum number of elections (required if 'dinc=0')</p>
</td></tr>
<tr><td><code id="testDeletions_+3A_rankmethod">rankMethod</code></td>
<td>
<p>&quot;safeRank&quot; (default), &quot;elected&quot;, or &quot;rank&quot;.  &quot;rank&quot; is
a total ranking of the candidates, with ties broken at random.  &quot;elected&quot;
assigns rank=1 to elected candidates, rank=2 for eliminated candidates.</p>
</td></tr>
<tr><td><code id="testDeletions_+3A_exptname">exptName</code></td>
<td>
<p>stem-name of experimental units <em>e.g.</em> &quot;E&quot;.  If 'NULL', then
a 3-character string of capital letters is chosen at random.</p>
</td></tr>
<tr><td><code id="testDeletions_+3A_equiet">equiet</code></td>
<td>
<p>TRUE to suppress all experimental output</p>
</td></tr>
<tr><td><code id="testDeletions_+3A_everbose">everbose</code></td>
<td>
<p>TRUE to produce diagnostic output from the experiment</p>
</td></tr>
</table>


<h3>Value</h3>

<p>'SafeRankExpt' object, describing this experiment and its results
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(food_election)
testDeletions(food_election)
testDeletions(food_election, countMethod="stv",
  countArgs=list(complete.ranking=TRUE))

</code></pre>

<hr>
<h2 id='testFraction'>Bootstrapping experiment, with fractional counts of a ballot box.</h2><span id='topic+testFraction'></span>

<h3>Description</h3>

<p>Starting from some number ('astart') of randomly-selected ballots, an
increasingly-large collection of randomly-selected ballots are counted. The
ballots are chosen independently without replacement for each experimental
unit; if you want to count decreasingly-sized portions of a single sample of
ballots, use <code><a href="#topic+testDeletions">testDeletions()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>testFraction(
  votes = NULL,
  astart = NULL,
  ainc = NULL,
  arep = NULL,
  trep = NULL,
  rankMethod = "safeRank",
  countMethod = "stv",
  countArgs = list(),
  exptName = NULL,
  equiet = FALSE,
  everbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="testFraction_+3A_votes">votes</code></td>
<td>
<p>A numeric matrix: one row per ballot, one column per candidate</p>
</td></tr>
<tr><td><code id="testFraction_+3A_astart">astart</code></td>
<td>
<p>Starting number of ballots (min 2)</p>
</td></tr>
<tr><td><code id="testFraction_+3A_ainc">ainc</code></td>
<td>
<p>Number of ballots to be added in each step. Must be non-negative.</p>
</td></tr>
<tr><td><code id="testFraction_+3A_arep">arep</code></td>
<td>
<p>Number of repetitions of the test on each step. Required to be
non-'NULL' if 'ainc=0' &amp;&amp; is.null(trep)'.</p>
</td></tr>
<tr><td><code id="testFraction_+3A_trep">trep</code></td>
<td>
<p>Limit on the total number of simulated elections. Required to be
non-'NULL' if 'ainc=0 &amp;&amp; is.null(arep)'.</p>
</td></tr>
<tr><td><code id="testFraction_+3A_rankmethod">rankMethod</code></td>
<td>
<p>&quot;safeRank&quot; (default), &quot;elected&quot;, or &quot;rank&quot;.  &quot;rank&quot; is
a total ranking of the candidates, with ties broken at random.  &quot;elected&quot;
assigns rank=1 to elected candidates, rank=2 for eliminated candidates.</p>
</td></tr>
<tr><td><code id="testFraction_+3A_countmethod">countMethod</code></td>
<td>
<p>countMethod &quot;stv&quot; (default) or &quot;condorcet&quot;</p>
</td></tr>
<tr><td><code id="testFraction_+3A_countargs">countArgs</code></td>
<td>
<p>List of args to be passed to 'countMethod' (in addition to
'votes')</p>
</td></tr>
<tr><td><code id="testFraction_+3A_exptname">exptName</code></td>
<td>
<p>stem-name of experimental units <em>e.g.</em> &quot;E&quot;.  If 'NULL', then
a 3-character string of capital letters is chosen at random.</p>
</td></tr>
<tr><td><code id="testFraction_+3A_equiet">equiet</code></td>
<td>
<p>'TRUE' to suppress all experimental output</p>
</td></tr>
<tr><td><code id="testFraction_+3A_everbose">everbose</code></td>
<td>
<p>'TRUE' to produce diagnostic output from the experiment</p>
</td></tr>
</table>


<h3>Value</h3>

<p>SafeRankExpt object of experimental results.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(food_election)
testFraction(food_election, countMethod="condorcet",
             countArgs=list(safety=0.5,complete.ranking=TRUE))
testFraction(dublin_west, astart=20, ainc=10, arep=2, trep=3, 
             countMethod="stv", rankMethod="elected", equiet=FALSE)
</code></pre>

<hr>
<h2 id='translate.ties'>Undocumented internal method from original code</h2><span id='topic+translate.ties'></span>

<h3>Description</h3>

<p>Undocumented internal method from original code
</p>


<h3>Usage</h3>

<pre><code class='language-R'>translate.ties(ties, method)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="translate.ties_+3A_ties">ties</code></td>
<td>
<p>undocumented</p>
</td></tr>
<tr><td><code id="translate.ties_+3A_method">method</code></td>
<td>
<p>'f' for forward, 'b' for backward</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='uk_labour_2010'>UK Labour Party Leader 2010</h2><span id='topic+uk_labour_2010'></span>

<h3>Description</h3>

<p>These are the ballots cast by Labour MPs and MEPs in an election
of their party's leader in 2010, as published by the Manchester Guardian.
The names of the electors have been suppressed in this file, but are
available at rangevoting.org,
along with extensive commentary on the election.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(uk_labour_2010)
</code></pre>


<h3>Format</h3>

<p>A data frame with 266 observations and 5 candidates.
</p>

<hr>
<h2 id='view'>generic view() for classes defined in this package</h2><span id='topic+view'></span>

<h3>Description</h3>

<p>generic view() for classes defined in this package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>view(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="view_+3A_object">object</code></td>
<td>
<p>election object to be viewed</p>
</td></tr>
<tr><td><code id="view_+3A_...">...</code></td>
<td>
<p>additional parameters, passed to formattable::formattable()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>html-formatted object, with side-effect in RStudio's Viewer pane
</p>

<hr>
<h2 id='view.SafeVote.approval'>view method for approval object</h2><span id='topic+view.SafeVote.approval'></span>

<h3>Description</h3>

<p>view method for approval object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SafeVote.approval'
view(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="view.SafeVote.approval_+3A_object">object</code>, <code id="view.SafeVote.approval_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='view.SafeVote.condorcet'>view method for SafeVote.condorcet</h2><span id='topic+view.SafeVote.condorcet'></span>

<h3>Description</h3>

<p>view method for SafeVote.condorcet
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SafeVote.condorcet'
view(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="view.SafeVote.condorcet_+3A_object">object</code></td>
<td>
<p>of type SafeVote.condorcet</p>
</td></tr>
<tr><td><code id="view.SafeVote.condorcet_+3A_...">...</code></td>
<td>
<p>see <a href="#topic+view.SafeVote.approval">view.SafeVote.approval</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p>view object
</p>

<hr>
<h2 id='view.SafeVote.plurality'>view method for plurality object</h2><span id='topic+view.SafeVote.plurality'></span>

<h3>Description</h3>

<p>view method for plurality object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SafeVote.plurality'
view(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="view.SafeVote.plurality_+3A_object">object</code>, <code id="view.SafeVote.plurality_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='view.SafeVote.score'>view method for score object</h2><span id='topic+view.SafeVote.score'></span>

<h3>Description</h3>

<p>view method for score object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SafeVote.score'
view(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="view.SafeVote.score_+3A_object">object</code>, <code id="view.SafeVote.score_+3A_...">...</code></td>
<td>
<p>undocumented</p>
</td></tr>
</table>


<h3>Value</h3>

<p>undocumented
</p>

<hr>
<h2 id='view.SafeVote.stv'>view method for the result of an stv() ballot-count</h2><span id='topic+view.SafeVote.stv'></span>

<h3>Description</h3>

<p>view method for the result of an stv() ballot-count
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SafeVote.stv'
view(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="view.SafeVote.stv_+3A_object">object</code></td>
<td>
<p>object to be viewed</p>
</td></tr>
<tr><td><code id="view.SafeVote.stv_+3A_...">...</code></td>
<td>
<p>additional parameters, passed to formattable::formattable()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>html-formatted object
</p>

<hr>
<h2 id='winnerMargin'>Find a winner and their margin of victory</h2><span id='topic+winnerMargin'></span>

<h3>Description</h3>

<p>Find a winner and their margin of victory
</p>


<h3>Usage</h3>

<pre><code class='language-R'>winnerMargin(votes)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="winnerMargin_+3A_votes">votes</code></td>
<td>
<p>cleaned ballots</p>
</td></tr>
</table>


<h3>Value</h3>

<p>length-2 vector: the index of a winning candidate, and their margin
of victory (0 if a tie, NA if no losers)
</p>

<hr>
<h2 id='yale_ballots'>Yale Faculty Senate 2016</h2><span id='topic+yale_ballots'></span>

<h3>Description</h3>

<p>This data follows the structure of a 2016 Yale
Faculty Senate election, with candidate names anonymised and permuted.
Imported to SafeVote from <a href="https://github.com/jayemerson/STV">STV v1.0.2</a>,
after applying the 'STV::cleanBallots' method to remove the ten empty
rows.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(yale_ballots)
</code></pre>


<h3>Format</h3>

<p>A data frame with 479 observations and 44 candidates.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
