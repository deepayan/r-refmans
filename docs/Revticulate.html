<!DOCTYPE html><html lang="en"><head><title>Help for package Revticulate</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {Revticulate}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#+25+2B+25'><p>Operator for concatenation.</p></a></li>
<li><a href='#callRev'><p>Basic Call to RevBayes</p></a></li>
<li><a href='#callRevFromTerminal'><p>Execute a .rev file in RevBayes Through an RStudio Terminal</p></a></li>
<li><a href='#clearRev'><p>Clear Code from Revticulate History</p></a></li>
<li><a href='#coerceRev'><p>Convert RevBayes Output into R Objects</p></a></li>
<li><a href='#doRev'><p>Call RevBayes with Continuous Session History</p></a></li>
<li><a href='#getRevHistory'><p>Get Revticulate History</p></a></li>
<li><a href='#getRevVars'><p>View RevBayes Variables</p></a></li>
<li><a href='#knitRev'><p>Knitr Engine for RevBayes</p></a></li>
<li><a href='#loadRevHistory'><p>Load Revticulate History from a .Rev File</p></a></li>
<li><a href='#repRev'><p>Interactive Session with RevBayes</p></a></li>
<li><a href='#saveRev'><p>Save Revticulate History</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Interaction with "RevBayes" in R</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Interaction with "RevBayes" via R. Objects created in "RevBayes" can be passed into the R environment, and many types can be converted into similar R objects. To download "RevBayes", go to <a href="https://revbayes.github.io/download">https://revbayes.github.io/download</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>ape, stringr, knitr, utils, comprehenr, jsonlite, usethis,
rstudioapi</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>markdown, rmarkdown, testthat, ggplot2, devtools, RevGadgets,</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-03-15 22:03:53 UTC; april</td>
</tr>
<tr>
<td>Author:</td>
<td>Caleb Charpentier [aut, cre],
  April Wright [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Caleb Charpentier &lt;caleb.charpentier@selu.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-03-15 23:30:07 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+2B+25'>Operator for concatenation.</h2><span id='topic++25+2B+25'></span>

<h3>Description</h3>

<p>Rapid string parsing
</p>


<h3>Usage</h3>

<pre><code class='language-R'>a %+% b
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25+2B2B+2B25_+3A_a">a</code></td>
<td>
<p>The first String</p>
</td></tr>
<tr><td><code id="+2B25+2B2B+2B25_+3A_b">b</code></td>
<td>
<p>The second String</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Method for quicker pasting of Strings.
</p>


<h3>Value</h3>

<p>character formatted concatenation of both input strings.
</p>

<hr>
<h2 id='callRev'>Basic Call to RevBayes</h2><span id='topic+callRev'></span>

<h3>Description</h3>

<p>Submits input to the RevBayes executable and returns output to R in string format. If coerce = TRUE, the function coerceRev()
will attempt to coerce output to a similar R object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>callRev(
  ...,
  coerce = FALSE,
  path = Sys.getenv("rb"),
  viewCode = FALSE,
  use_wd = TRUE,
  knit = FALSE,
  timeout = 5
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="callRev_+3A_...">...</code></td>
<td>
<p>character -  input to send to RevBayes.</p>
</td></tr>
<tr><td><code id="callRev_+3A_coerce">coerce</code></td>
<td>
<p>logical - If TRUE, attempts to coerce output to an R object. If FALSE, output
will remain in String format. Default is FALSE.</p>
</td></tr>
<tr><td><code id="callRev_+3A_path">path</code></td>
<td>
<p>character - Path to the RevBayes executable. Default is Sys.getEnv(&quot;RevBayesPath&quot;), which is created with initRev().</p>
</td></tr>
<tr><td><code id="callRev_+3A_viewcode">viewCode</code></td>
<td>
<p>logical - If TRUE, the input and output in the temporary file used to interact
with RevBayes will be displayed in the viewing pane. This option may be useful for
diagnosing code errors.</p>
</td></tr>
<tr><td><code id="callRev_+3A_use_wd">use_wd</code></td>
<td>
<p>logical - If TRUE, sets the working directory in the temporary RevBayes session
to the working directory of the active R session. Default is TRUE.</p>
</td></tr>
<tr><td><code id="callRev_+3A_knit">knit</code></td>
<td>
<p>logical - Argument used to manage output formatting for knitRev(). This argument
should generally be ignored by the user.</p>
</td></tr>
<tr><td><code id="callRev_+3A_timeout">timeout</code></td>
<td>
<p>integer - Determines how long the system2() call should wait before timing out (seconds). Default is 5.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>##NOTE - This function provides very limited interaction with RevBayes, and is
mostly intended to provide basic functionalities for other methods. For
more effective RevBayes calls, use doRev().
</p>


<h3>Value</h3>

<p>out: character - String formatted output from RevBayes
</p>
<p>coercedOut: type varies. R object formatted output from RevBayes. Object type varies according to Rev output (Ex: numeric vector or ape::Phylo object)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
callRev("2^3")
callRev("2^3", coerce = FALSE, viewcode = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='callRevFromTerminal'>Execute a .rev file in RevBayes Through an RStudio Terminal</h2><span id='topic+callRevFromTerminal'></span>

<h3>Description</h3>

<p>Accesses an RStudio terminal through the RStudio API and runs a .rev script.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>callRevFromTerminal(revscript)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="callRevFromTerminal_+3A_revscript">revscript</code></td>
<td>
<p>character - .rev file to execute in RevBayes</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Many common RevBayes use-cases, such as generating mcmcs, take a long time to execute.
Because of this fact, it is inefficient and inadvisable to run them in knitr documents
or with RevBayes calls through repRev(). Instead, tutorial code or code that has been written
interactively can be externally saved with saveRev(), and then executed in an RStudio terminal
via callRevFromTerminal(). Output files can then be explored and visualized with the
RevGadgets package.
</p>


<h3>Value</h3>

<p>termID Unique identifier of the terminal used to call RevBayes
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
saveRev("archertutorial.rev", use_quit=TRUE)
callRevFromTerminal("archertutorial.rev")

## End(Not run)

</code></pre>

<hr>
<h2 id='clearRev'>Clear Code from Revticulate History</h2><span id='topic+clearRev'></span>

<h3>Description</h3>

<p>Removes code from .Revhistory file used for managing Revticulate history.
Clears all code by default, or last 'n' lines of code specifed by the user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clearRev(n = NULL, silent = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clearRev_+3A_n">n</code></td>
<td>
<p>integer - How many lines to remove. If n = NULL, all lines are removed.</p>
</td></tr>
<tr><td><code id="clearRev_+3A_silent">silent</code></td>
<td>
<p>logical - If TRUE, output messages will be silenced. Default is FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>pseudoError: NULL. Message warning user that they attempted to erase more items from the Rev history than exist. message() is used instead of stop() so that clearRev() functions in repRev().
</p>
<p>undoRev(n): NULL. Removes n number of lines from .Revhistory and cats the remaining history to the screen.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
clearRev() #Clear all Revticulate history
clearRev(n = 3) #Remove the last 3 lines of Revticulate history

## End(Not run)

</code></pre>

<hr>
<h2 id='coerceRev'>Convert RevBayes Output into R Objects</h2><span id='topic+coerceRev'></span>

<h3>Description</h3>

<p>Coerces a RevBayes output string into an equivalent R object.
Automatically determines R object type based on the structure of the string,
and returns the original string if R object equivalent cannot be determined.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>coerceRev(revString)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="coerceRev_+3A_revstring">revString</code></td>
<td>
<p>character - Output from RevBayes</p>
</td></tr>
</table>


<h3>Value</h3>

<p>rObject: Type varies depending on Rev object type. R object-formatted output coerced from a RevBayes output string.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
coerceRev("[1, 2, 3, 4]")

## End(Not run)
</code></pre>

<hr>
<h2 id='doRev'>Call RevBayes with Continuous Session History</h2><span id='topic+doRev'></span>

<h3>Description</h3>

<p>The basic Revticulate function for interacting with RevBayes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>doRev(input, coerce = TRUE, evaluate = TRUE, viewCode = FALSE, timeout = 5)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="doRev_+3A_input">input</code></td>
<td>
<p>character - Rev language expression to execute in RevBayes</p>
</td></tr>
<tr><td><code id="doRev_+3A_coerce">coerce</code></td>
<td>
<p>logical - If TRUE, the output from RevBayes will be coerced into R format with coerceRev()</p>
</td></tr>
<tr><td><code id="doRev_+3A_evaluate">evaluate</code></td>
<td>
<p>logical - If FALSE, input will be written to the .Revhistory file, but will not be interpreted in RevBayes. Default is FALSE.</p>
</td></tr>
<tr><td><code id="doRev_+3A_viewcode">viewCode</code></td>
<td>
<p>logical - If TRUE, Rev code input and output will be displayed in the viewing pane. Mostly used for development purposes.</p>
</td></tr>
<tr><td><code id="doRev_+3A_timeout">timeout</code></td>
<td>
<p>integer - Determines how long the system2() call should wait before timing out. Default is 5 seconds. For longer calls, see 'callRevFromTerminal()'</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function allows users to make multiple calls to RevBayes, while maintaining a
persistent input history. This means that variables defined in one call can be referenced in
another call, giving the feel of a continuous RevBayes session.
</p>
<p>Because this function is the basis for repRev() and knitRev(), variables defined in RevBayes
with any of these functions can be referenced by any of the others.
</p>


<h3>Value</h3>

<p>now - RevBayes output, type varies. If coerce = TRUE, coerceRev() will attempt to convert RevBayes output into an equivalent R object. If else, the return type is character.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
doRev("simTree(16)", coerce=FALSE)
doRev("a &lt;- 10")
doRev("a * 100")

## End(Not run)

</code></pre>

<hr>
<h2 id='getRevHistory'>Get Revticulate History</h2><span id='topic+getRevHistory'></span>

<h3>Description</h3>

<p>Return the history of RevBayes code submitted with doRev() and similar functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getRevHistory()
</code></pre>


<h3>Value</h3>

<p>lines - character. A vector of the line-by-line Revticulate history
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
getRevHistory()

cat(getRevHistory(), sep="\n")

## End(Not run)

</code></pre>

<hr>
<h2 id='getRevVars'>View RevBayes Variables</h2><span id='topic+getRevVars'></span>

<h3>Description</h3>

<p>Wrapper for RevBayes ls() function. Displays variables that have been defined in the working RevBayes session.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getRevVars()
</code></pre>


<h3>Value</h3>

<p>No return - wrapper for RevBayes ls() function to show variables in rb environment
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

getRevVars()

## End(Not run)

</code></pre>

<hr>
<h2 id='knitRev'>Knitr Engine for RevBayes</h2><span id='topic+knitRev'></span>

<h3>Description</h3>

<p>Creates a knitr engine for evaluating RevBayes code
</p>


<h3>Usage</h3>

<pre><code class='language-R'>knitRev()
</code></pre>


<h3>Details</h3>

<p>To use RevBayes in a knitr document, type 'library(Revticulate)' followed by 'knitRev()'
on the next line in the initialization block. The language header for RevBayes chunks is 'rb'.
</p>
<p>The RevBayes knitr engine is built around doRev(), allowing history to persist between chunks.
If a variable 'x &lt;- 10' is defined in one RevBayes chunk, 'x' can then be accessed in a later RevBayes chunk.
Additionally, it could be accessed via doRev() in an R chunk, allowing for quick R analysis of RevBayes variables.
</p>
<p>On top of the standard knitr chunk options, the rb engine provides two extras: rb_eval, and coerce.
</p>
<p>If rb_eval = FALSE, the code in the chunk will be saved to the .Revhistory file, but will not be submitted to RevBayes. This
option is useful for code chunks containing the final loop of an mcmc, which could be saved to an external file
with saveRev() and ran in a terminal with callRevFromTerminal().
</p>
<p>If coerce = TRUE, coerceRev() will attempt to convert RevBayes output into equivalent R formatted objects. The default value
for both coerce and rb_eval is TRUE.
</p>


<h3>Value</h3>

<p>No return. Initiates knitr engine for RevBayes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
```{r setup, include=FALSE}
     knitr::opts_chunk$set(echo = TRUE)
     library(Revticulate)
     knitRev()
```

```{rb rb_eval=TRUE, coerce=FALSE}

x &lt;- simTree(32)

```

```{r}

x &lt;- doRev('x')
plot(x)

```

## End(Not run)


</code></pre>

<hr>
<h2 id='loadRevHistory'>Load Revticulate History from a .Rev File</h2><span id='topic+loadRevHistory'></span>

<h3>Description</h3>

<p>Reads in the code from a .Rev file and writes it into the current Revticulate history.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadRevHistory(filepath, overwrite = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="loadRevHistory_+3A_filepath">filepath</code></td>
<td>
<p>character - File to load .Revhistory from</p>
</td></tr>
<tr><td><code id="loadRevHistory_+3A_overwrite">overwrite</code></td>
<td>
<p>logical - If TRUE, the code in the file at 'filepath' will overwrite current .Revhistory. If FALSE, it will be appended to the end of it.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return - reads in new code to the .Revhistory file
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
     loadRevHistory("someCode.rev")

     loadRevHistory("someMoreCode.rev", overwrite=TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='repRev'>Interactive Session with RevBayes</h2><span id='topic+repRev'></span>

<h3>Description</h3>

<p>Simulates a continuous, interactive session with RevBayes. While this session is active, all code will be interpreted as Rev code, and attempting to run R code may result in error.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repRev(path = Sys.getenv("rb"), viewCode = FALSE, coerce = TRUE, use_wd = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repRev_+3A_path">path</code></td>
<td>
<p>character - Path to the RevBayes executable. Defaults to Sys.getenv(&quot;rb&quot;), which should be assigned upon first loading the package.</p>
</td></tr>
<tr><td><code id="repRev_+3A_viewcode">viewCode</code></td>
<td>
<p>logical - If TRUE, code from the temporary file used to interact with RevBayes will be displayed in
the viewing pane. Default is FALSE. The option is mostly for developer convenience, and can be ignored
by most users.</p>
</td></tr>
<tr><td><code id="repRev_+3A_coerce">coerce</code></td>
<td>
<p>logical - If FALSE, RevBayes output will be printed to the console in character format. If
TRUE, coerceRev() will attempt to coerce output into a suitable R object. Default is TRUE.</p>
</td></tr>
<tr><td><code id="repRev_+3A_use_wd">use_wd</code></td>
<td>
<p>logical - If TRUE, the simulated Revbayes session will use the same working directory as
the active R session. If FALSE, it will use the default for the RevBayes executable. Default is TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default, the interactive session uses the present R working directory as the RevBayes working directory. This behavior can be turned off with use_wd = FALSE
</p>
<p>The exit the session, type 'quit()', 'q()', or hit the 'esc' key.
clearRev(), getRevVars(), and getRevHistory() can still be called from within the session for user convenience
</p>


<h3>Value</h3>

<p>No return. RevBayes variables assigned within the session can be accessed externally via doRev() or viewed with getRevVars().
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
repRev()

myNumber &lt;- 4
myNumber

posteriorPredictiveProbability(v(2), 3)
getrRev()
clearRev()
quit()

## End(Not run)
</code></pre>

<hr>
<h2 id='saveRev'>Save Revticulate History</h2><span id='topic+saveRev'></span>

<h3>Description</h3>

<p>Captures the current Revticulate history and saves it to an external file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saveRev(filepath, use_wd = TRUE, use_quit = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="saveRev_+3A_filepath">filepath</code></td>
<td>
<p>character - Location of the .Rev file to save Revticulate history in. If the file doesn't exist, it will be created. Otherwise, it will be overwritten.</p>
</td></tr>
<tr><td><code id="saveRev_+3A_use_wd">use_wd</code></td>
<td>
<p>logical - If TRUE, the history will be prepended by setwd('users current working directory'). This function will set the script's working directory to
the user's current working directory, which is often desirable for files that will be submitted to callRevFromTerminal() and contain output moniters.</p>
</td></tr>
<tr><td><code id="saveRev_+3A_use_quit">use_quit</code></td>
<td>
<p>logical - If TRUE, q() will be appended to the end of the history before writing it to a file.
This will cause the RevBayes session to quit after evaluating the script's code, and is good practice
when running an mcmc in an RStudio terminal.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By providing a file path, the user can save the RevBayes code in their current
Revticulate session to an external .Rev script.
This script can then be executed in RevBayes via source(),
or in an RStudio terminal via callRevFromTerminal().
Usage of this function can be combined with loadRev() to allow
for the continual use of a Revticulate history instance between R sessions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
      saveRev("mySavedCode.rev", use_quit=FALSE)
      saveRev("mySavedCode.rev", use_wd=FALSE, use_quit=TRUE)

## End(Not run)


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
