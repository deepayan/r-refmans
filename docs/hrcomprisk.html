<!DOCTYPE html><html lang="en"><head><title>Help for package hrcomprisk</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {hrcomprisk}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#bootCRCumInc'><p>Bootstrap for Ratios of Hazard Ratios</p></a></li>
<li><a href='#CRCumInc'><p>Estimation of Cumulative Incidence of competing events</p></a></li>
<li><a href='#dat_ckid'><p>CKID dataset</p></a></li>
<li><a href='#datcheck'><p>Data Check for Wrapper Function</p></a></li>
<li><a href='#hrcomprisk'><p>Nonparametric Assessment Between Competing Risks Hazards</p></a></li>
<li><a href='#npcrest'><p>Nonparametric Estimation of the Ratios of Hazard Ratios</p></a></li>
<li><a href='#plotCIF'><p>Plot Incidence and Ratio of sHR/csHR</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Nonparametric Assessment Between Competing Risks Hazard Ratios</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Author:</td>
<td>Daniel Antiporta &lt;dantiporta@jhu.edu&gt;; 
        Matthew Matheson &lt;mmathes4@jhu.edu&gt;;
        Derek Ng &lt;dng@jhu.edu&gt;;
        Alvaro Munoz &lt;amunoz@jhu.edu&gt;</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Daniel Antiporta &lt;dantiporta@jhu.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Nonparametric cumulative-incidence based estimation of the ratios of sub-hazard ratios to cause-specific hazard ratios using the approach from Ng et al. (2020).</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>survival</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.0.2</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/AntiportaD/hrcomprisk">https://github.com/AntiportaD/hrcomprisk</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/AntiportaD/hrcomprisk/issues">https://github.com/AntiportaD/hrcomprisk/issues</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-01-21 19:49:00 UTC; antiporta</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-01-21 20:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='bootCRCumInc'>Bootstrap for Ratios of Hazard Ratios</h2><span id='topic+bootCRCumInc'></span>

<h3>Description</h3>

<p>Bootstrap 95% Confidence Intervals limits for estimated Ratios of sHR/csHR.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bootCRCumInc(
  df,
  exit,
  event,
  exposure,
  entry = NULL,
  weights = NULL,
  ipwvars = NULL,
  rep = 0,
  print.attr = T,
  seed = 54321
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bootCRCumInc_+3A_df">df</code></td>
<td>
<p>A data frame containing, at a minimum, exit, event, and exposure.</p>
</td></tr>
<tr><td><code id="bootCRCumInc_+3A_exit">exit</code></td>
<td>
<p>Name of the column in df containing times of event or censoring.</p>
</td></tr>
<tr><td><code id="bootCRCumInc_+3A_event">event</code></td>
<td>
<p>Name of the column in df containing codes for censoring (0) and event types (1-4). Analysis of more than 4 competing events is not supported by this function.</p>
</td></tr>
<tr><td><code id="bootCRCumInc_+3A_exposure">exposure</code></td>
<td>
<p>Name of the column in df containing a binary (0/1) exposure variable for stratification.</p>
</td></tr>
<tr><td><code id="bootCRCumInc_+3A_entry">entry</code></td>
<td>
<p>Name of the column in df containing late entry times.</p>
</td></tr>
<tr><td><code id="bootCRCumInc_+3A_weights">weights</code></td>
<td>
<p>Name of the column in df containing user-supplied weights. If ipwvars is utilized, this argument is ignored.</p>
</td></tr>
<tr><td><code id="bootCRCumInc_+3A_ipwvars">ipwvars</code></td>
<td>
<p>A vector of names of columns in 'df' containing predictor variables for building a propensity score model for exposure and creating standardized inverse probability weights using this model. Overrides the weights argument.</p>
</td></tr>
<tr><td><code id="bootCRCumInc_+3A_rep">rep</code></td>
<td>
<p>Number of replicates for bootstrapping if confidence intervals for the sHR/csHR estimate are desired. See more details on bootstrapping below.</p>
</td></tr>
<tr><td><code id="bootCRCumInc_+3A_print.attr">print.attr</code></td>
<td>
<p>A logical indicator for whether results should be returned in console.</p>
</td></tr>
<tr><td><code id="bootCRCumInc_+3A_seed">seed</code></td>
<td>
<p>A seed number start for the bootstrap estimation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the 95% confidence interval limits (upper and lower) for
Sub-hazard ratio/Cause-specific hazard ratio for each event:
</p>

<dl>
<dt>R1.lower</dt><dd><p>Lower limit of the 95%CI of the Sub-hazard ratio/Cause-specific hazard ratio for event 1 at time <code>t</code></p>
</dd>
<dt>R1.upper</dt><dd><p>Upper limit of the 95%CI of the Sub-hazard ratio/Cause-specific hazard ratio for event 1 at time <code>t</code></p>
</dd>
<dt>R2.lower</dt><dd><p>Lower limit of the 95%CI of the Sub-hazard ratio/Cause-specific hazard ratio for event 2 at time <code>t</code></p>
</dd>
<dt>R2.upper</dt><dd><p>Upper limit of the 95%CI of the Sub-hazard ratio/Cause-specific hazard ratio for event 2 at time <code>t</code></p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>#data from the package
data &lt;- hrcomprisk::dat_ckid
#Obtain the 95%CI by bootstraping
ciCIF&lt;-bootCRCumInc(df=data, exit=exit, event=event, exposure=b1nb0, rep=10, print.attr=TRUE)
</code></pre>

<hr>
<h2 id='CRCumInc'>Estimation of Cumulative Incidence of competing events</h2><span id='topic+CRCumInc'></span>

<h3>Description</h3>

<p>Estimation of Cumulative Incidence Functions (CIF) of competing events.
</p>
<p>This function is based on the CIF estimated by the survival package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CRCumInc(
  df,
  time,
  event,
  exposed,
  entry = NULL,
  weights = NULL,
  ipwvars = NULL,
  print.attr = T
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CRCumInc_+3A_df">df</code></td>
<td>
<p>A data frame containing, at a minimum, exit, event, and exposure.</p>
</td></tr>
<tr><td><code id="CRCumInc_+3A_time">time</code></td>
<td>
<p>Name of the column in df containing times of event or censoring.</p>
</td></tr>
<tr><td><code id="CRCumInc_+3A_event">event</code></td>
<td>
<p>Name of the column in df containing codes for censoring (0) and event types (1-4). Analysis of more than 4 competing events is not supported by this function.</p>
</td></tr>
<tr><td><code id="CRCumInc_+3A_exposed">exposed</code></td>
<td>
<p>Name of the column in df containing a binary (0/1) exposure variable for stratification.</p>
</td></tr>
<tr><td><code id="CRCumInc_+3A_entry">entry</code></td>
<td>
<p>Name of the column in df containing late entry times.</p>
</td></tr>
<tr><td><code id="CRCumInc_+3A_weights">weights</code></td>
<td>
<p>Name of the column in df containing user-supplied weights. If ipwvars is utilized, this argument is ignored.</p>
</td></tr>
<tr><td><code id="CRCumInc_+3A_ipwvars">ipwvars</code></td>
<td>
<p>A vector of names of columns in 'df' containing predictor variables for building a propensity score model for exposure and creating standardized inverse probability weights using this model. Overrides the weights argument.</p>
</td></tr>
<tr><td><code id="CRCumInc_+3A_print.attr">print.attr</code></td>
<td>
<p>A logical indicator for whether results should be returned in console.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the following columns:
</p>

<dl>
<dt>event</dt><dd><p>Type of event that occurs at the given time.</p>
</dd>
<dt>exposure</dt><dd><p>Exposure group in which the event happens.</p>
</dd>
<dt>time</dt><dd><p>Time of the event.</p>
</dd>
<dt>CIoinc_comp</dt><dd><p>Value of the unexposed (denoted by “o”) composite cumulative incidence at the given time.</p>
</dd>
<dt>CIxinc_comp</dt><dd><p>Value of the exposed (denoted by “x”) composite cumulative incidence at the given time.</p>
</dd>
<dt>CIoinc_1</dt><dd><p>Value of the unexposed cumulative incidence of event 1 at the given time.</p>
</dd>
<dt>CIxinc_1</dt><dd><p>Value of the exposed cumulative incidence of event 1 at the given time.</p>
</dd>
<dt>R_1</dt><dd><p>Sub-hazard ratio/Cause-specific hazard ratio for event 1.</p>
</dd>
<dt>R_2</dt><dd><p>Sub-hazard ratio/Cause-specific hazard ratio for event 2.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>#data from the package
data &lt;- hrcomprisk::dat_ckid
#Estimate the Cumulative Incidence Functions and Ratios of sHR and csHR
mydat.CIF&lt;-CRCumInc(df=data, time=exit, event=event, exposed=b1nb0, print.attr=TRUE)
</code></pre>

<hr>
<h2 id='dat_ckid'>CKID dataset</h2><span id='topic+dat_ckid'></span>

<h3>Description</h3>

<p>A dataset containing time, socieconomic and outcome variables of 626 subjects from the
Chronic Kidney Disease in Children (CKiD) Study.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dat_ckid
</code></pre>


<h3>Format</h3>

<p>A data frame with 626 rows and 13 variables:
</p>

<dl>
<dt>b1nb0</dt><dd><p>Binary indicator for race: black=1, non-black=0</p>
</dd>
<dt>entry</dt><dd><p>Years since onset of chronic kidney disease at entry into study</p>
</dd>
<dt>event</dt><dd><p>Renal replacement therapy indicator: 0=none, 1=dialysis, 2=transplant</p>
</dd>
<dt>exit</dt><dd><p>Years since onset of chronic kidney disease at event/censoring time</p>
</dd>
<dt>foodassist</dt><dd><p>Binary indicator for use of food assistance</p>
</dd>
<dt>inckd</dt><dd><p>Years in study (=exit-entry)</p>
</dd>
<dt>incomegt75</dt><dd><p>Household income &gt; $75,000 per year</p>
</dd>
<dt>incomelt30</dt><dd><p>Household income &lt; $30,000 per year</p>
</dd>
<dt>lps</dt><dd><p>Binary indicator of low birth weight, premature birth, or small for gestational age</p>
</dd>
<dt>male1fe0</dt><dd><p>Binary indicator for sex: male=1, female=0</p>
</dd>
<dt>matedultcoll</dt><dd><p>Maternal education less than college</p>
</dd>
<dt>privatemd</dt><dd><p>Binary indicator for private doctor</p>
</dd>
<dt>public</dt><dd><p>Binary indicator for public insurance</p>
</dd></dl>
<p>s
</p>


<h3>Source</h3>

<p><a href="https://statepi.jhsph.edu/ckid/ckid.html">https://statepi.jhsph.edu/ckid/ckid.html</a>
</p>

<hr>
<h2 id='datcheck'>Data Check for Wrapper Function</h2><span id='topic+datcheck'></span>

<h3>Description</h3>

<p>A function to ensure that the data frame fulfills the relevant variable content and type requirements.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datcheck(df, qexit, qevent, qexposure, qentry, qweights, qipwvars, eoi = -1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="datcheck_+3A_df">df</code></td>
<td>
<p>A data frame containing, at a minimum, exit, event, and exposure.</p>
</td></tr>
<tr><td><code id="datcheck_+3A_qexit">qexit</code></td>
<td>
<p>Name of the column in df containing times of event or censoring.</p>
</td></tr>
<tr><td><code id="datcheck_+3A_qevent">qevent</code></td>
<td>
<p>Name of the column in df containing codes for censoring (0) and event types (1-4). Analysis of more than 4 competing events is not supported by this function.</p>
</td></tr>
<tr><td><code id="datcheck_+3A_qexposure">qexposure</code></td>
<td>
<p>Name of the column in df containing a binary (0/1) exposure variable for stratification.</p>
</td></tr>
<tr><td><code id="datcheck_+3A_qentry">qentry</code></td>
<td>
<p>Name of the column in df containing late entry times.</p>
</td></tr>
<tr><td><code id="datcheck_+3A_qweights">qweights</code></td>
<td>
<p>Name of the column in df containing user-supplied weights. If ipwvars is utilized, this argument is ignored.</p>
</td></tr>
<tr><td><code id="datcheck_+3A_qipwvars">qipwvars</code></td>
<td>
<p>A vector of names of columns in 'df' containing predictor variables for building a propensity score model for exposure and creating standardized inverse probability weights using this model. Overrides the weights argument.</p>
</td></tr>
<tr><td><code id="datcheck_+3A_eoi">eoi</code></td>
<td>
<p>Event number for the event of interest, useful when more than two events exist. If utilized, only two cumulative incidence curves will be plotted: one for the event of interest, and one for the composite of all competing events. Each event will still have its sHR/csHR ratio plotted.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Check dataset
</p>

<hr>
<h2 id='hrcomprisk'>Nonparametric Assessment Between Competing Risks Hazards</h2><span id='topic+hrcomprisk'></span>

<h3>Description</h3>

<p>Estimate nonparametric cumulative-incidence based estimation
of the ratios of sub-hazard ratios to cause-specific hazard ratios from Ng, Antiporta,
Matheson and Muñoz (2019)[1] to compare sub-hazard ratio (a la Fine and Gray; sHR) and cause-specific hazard ratio
(csHR) approaches.
</p>


<h3>Details</h3>

<p>While doing either analysis individually involves parametric or semi-parametric estimation,
because of the fact that the derivatives of the cumulative incidences involved in the quantities cancel out when
their ratio is considered, this ratio can be characterized completely using nonparametric estimates of the event-specific
cumulative incidences. This provides a useful diagnostic when both analyses are performed as well as a method for estimating
the sub-hazard ratios in a way that is valid and free of tethering assumptions characterized by Muñoz et al. [2].
</p>
<p><strong>1.	Bootstrapped confidence intervals for the sHR/csHR quantities</strong>
</p>
<p>If a positive number of bootstrap replicates is requested via the rep argument, the program will
calculate and provide pointwise percentile-based bootstrap confidence intervals for the sHR/csHR ratios.
The bootstrapping process uses two loops. In the first loop, rep bootstrap samples are taken stratified by
exposure (so each sample has the same exposure prevalence as the original data) and all event-specific cumulative
incidences are calculated and stored for each of them. In the second loop, for each event time (i.e., each change
in any one of the cumulative incidence functions), the 2.5th and 97.5th percentiles of the bootstrap estimates of
the rep sHR/csHR ratios are stored as the lower and upper confidence limits. These are not directly returned to the
user, but are used in the plotting of the sHR/csHR ratios.
</p>
<p><strong>2.	User-supplied vs. program-generated weights</strong>
</p>
<p>If confidence intervals are not desired, the user can supply a column of weights (e.g, inverse probability weights from a model predicting exposure) which will be used in the estimation of the cumulative incidences and the sHR/csHR ratios derived from them. However, the use of bootstrapping for calculation of confidence intervals as described above necessitates that such a model be refit for each bootstrap sample, generating new weights for new estimates of all quantities. If this is desired, the user should include all the predictor variables as columns in the data frame so that the appropriate model can be fit automatically using the ipwvars argument. If this method is used, the program uses a logistic regression model to calculate probability of exposure, stabilizes the resulting weights to the sample size, and winsorizes weights that fall outside ±4 standard deviations on the log scale. Using this method can increase computation time as the model must be refit on each bootstrap replicate.
</p>
<p><strong>3.	Use of the nonparametric sHR/csHR ratio for calculation of sHR estimates</strong>
</p>
<p>Simultaneous estimation of all subhazard ratios and cause-specific hazard ratios is often fraught with problematic results due to incompatible modeling assumptions (e.g., not all ratios can be proportional) and the tethering inherent in subhazard analysis of multiple events as described by Muñoz et al. [2]. Cause-specific hazard ratios are not subject to such tethering constraints, and will admissible regardless of whether the model is misspecified. As such, the output of this function – valid nonparametric estimates of the sHR/csHR ratio – can be combined with (i.e., multiplied by) cause-specific hazard ratio estimates (e.g., from a proportional or loglinear cause-specific hazards model) to produce subhazard ratio estimates which do not violate the principles of tethering.
</p>


<h3>Functions</h3>

<p>The hrcomprisk package provides 3 main functions and a wrapper function:
</p>
<p>- <a href="#topic+npcrest">npcrest</a> : Main wrapper function.
</p>
<p>- <a href="#topic+CRCumInc">CRCumInc</a> : Estimation of Cumulative Incidence Functions (CIF) of competing events.
</p>
<p>- <a href="#topic+plotCIF">plotCIF</a> : Plot Cumulative Incidence and Ratio of sHR/csHR.
</p>
<p>- <a href="#topic+bootCRCumInc">bootCRCumInc</a> : Bootstrap 95
</p>


<h3>Author(s)</h3>

<p><strong>Mantainer:</strong>  Daniel Antiporta &lt;<a href="mailto:dantiporta@jhu.edu">dantiporta@jhu.edu</a>&gt;
</p>
<p><strong>Authors:</strong>
</p>
<p>- Daniel Antiporta
</p>
<p>- Matthew Matheson
</p>
<p>- Derek Ng
</p>
<p>- Alvaro Muñoz
</p>


<h3>References</h3>

<p>1. Ng D, Antiporta DA, Matheson M, Munoz A. Nonparametric assessment of differences
between competing risks hazard ratios: application to racial differences in pediatric
chronic kidney disease progression. Clinical Epidemiology, 2020 (in press)
</p>
<p>2. Muñoz A, Abraham AG, Matheson M, Wada N. In: Risk Assessment and Evaluation of Predictions.
Lee MLT, Gail M, Pfeiffer R, Satten G, Cai T, Gandy A, editor. New York: Springer; 2013.
Non-proportionality of hazards in the competing risks framework; pp. 3–22. <a href="https://link.springer.com/chapter/10.1007/978-1-4614-8981-8_1">[Google Scholar]</a>
</p>


<h3>See Also</h3>

<p>Useful links:
</p>
<p><a href="https://github.com/AntiportaD/hrcomprisk">https://github.com/AntiportaD/hrcomprisk</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#data from the package - See fuctions for specific examples
data &lt;- hrcomprisk::dat_ckid
</code></pre>

<hr>
<h2 id='npcrest'>Nonparametric Estimation of the Ratios of Hazard Ratios</h2><span id='topic+npcrest'></span>

<h3>Description</h3>

<p>A comprehensive wrapper function for implementing the competing risks diagnostic of Ng, Antiporta, Matheson and Muñoz (2019) to compare sub-hazard ratio (a la Fine and Gray; sHR) and cause-specific hazard ratio (csHR) approaches. While doing either analysis individually involves parametric or semi-parametric estimation, because of the fact that the derivatives of the cumulative incidences involved in the quantities cancel out when their ratio is considered, this ratio can be characterized completely using nonparametric estimates of the event-specific cumulative incidences. This provides a useful diagnostic when both analyses are performed as well as a method for estimating the sub-hazard ratios in a way that is valid and free of tethering assumptions characterized by Muñoz et al. (2013).
</p>
<p>This function calls datcheck, CRCumInc, bootCRCumInc (if confidence intervals are requested), and plotCIF, all of which are also included in the hrcomprisk package. These functions should generally not be utilized directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>npcrest(
  df,
  exit,
  event,
  exposure,
  entry = NULL,
  weights = NULL,
  ipwvars = NULL,
  maxtime = Inf,
  rep = NULL,
  eoi = -1,
  print.attr = T
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="npcrest_+3A_df">df</code></td>
<td>
<p>A data frame containing, at a minimum, exit, event, and exposure.</p>
</td></tr>
<tr><td><code id="npcrest_+3A_exit">exit</code></td>
<td>
<p>Name of the column in df containing times of event or censoring.</p>
</td></tr>
<tr><td><code id="npcrest_+3A_event">event</code></td>
<td>
<p>Name of the column in df containing codes for censoring (0) and event types (1-4). Analysis of more than 4 competing events is not supported by this function.</p>
</td></tr>
<tr><td><code id="npcrest_+3A_exposure">exposure</code></td>
<td>
<p>Name of the column in df containing a binary (0/1) exposure variable for stratification.</p>
</td></tr>
<tr><td><code id="npcrest_+3A_entry">entry</code></td>
<td>
<p>Name of the column in df containing late entry times.</p>
</td></tr>
<tr><td><code id="npcrest_+3A_weights">weights</code></td>
<td>
<p>Name of the column in df containing user-supplied weights. If ipwvars is utilized, this argument is ignored.</p>
</td></tr>
<tr><td><code id="npcrest_+3A_ipwvars">ipwvars</code></td>
<td>
<p>A vector of names of columns in 'df' containing predictor variables for building a propensity score model for exposure and creating standardized inverse probability weights using this model. Overrides the weights argument.</p>
</td></tr>
<tr><td><code id="npcrest_+3A_maxtime">maxtime</code></td>
<td>
<p>Largest time to display on the x-axis of all output plots. As data can become sparse and thus more widely variable at times get large, this argument may be used to restrict plots to a range of the data that is discerned to be more accurate and reliable.</p>
</td></tr>
<tr><td><code id="npcrest_+3A_rep">rep</code></td>
<td>
<p>Number of replicates for bootstrapping if confidence intervals for the sHR/csHR estimate are desired. See more details on bootstrapping below.</p>
</td></tr>
<tr><td><code id="npcrest_+3A_eoi">eoi</code></td>
<td>
<p>Event number for the event of interest, useful when more than two events exist. If utilized, only two cumulative incidence curves will be plotted: one for the event of interest, and one for the composite of all competing events. Each event will still have its sHR/csHR ratio plotted.</p>
</td></tr>
<tr><td><code id="npcrest_+3A_print.attr">print.attr</code></td>
<td>
<p>A logical indicator for whether results should be returned in console.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><strong>1.	Bootstrapped confidence intervals for the sHR/csHR quantities</strong>
</p>
<p>If a positive number of bootstrap replicates is requested via the rep argument, the program will calculate and provide pointwise percentile-based bootstrap confidence intervals for the sHR/csHR ratios. The bootstrapping process uses two loops. In the first loop, rep bootstrap samples are taken stratified by exposure (so each sample has the same exposure prevalence as the original data) and all event-specific cumulative incidences are calculated and stored for each of them. In the second loop, for each event time (i.e., each change in any one of the cumulative incidence functions), the 2.5th and 97.5th percentiles of the bootstrap estimates of the rep sHR/csHR ratios are stored as the lower and upper confidence limits. These are not directly returned to the user, but are used in the plotting of the sHR/csHR ratios.
</p>
<p><strong>2.	User-supplied vs. program-generated weights</strong>
</p>
<p>If confidence intervals are not desired, the user can supply a column of weights (e.g, inverse probability weights from a model predicting exposure) which will be used in the estimation of the cumulative incidences and the sHR/csHR ratios derived from them. However, the use of bootstrapping for calculation of confidence intervals as described above necessitates that such a model be refit for each bootstrap sample, generating new weights for new estimates of all quantities. If this is desired, the user should include all the predictor variables as columns in the data frame so that the appropriate model can be fit automatically using the ipwvars argument. If this method is used, the program uses a logistic regression model to calculate probability of exposure, stabilizes the resulting weights to the sample size, and winsorizes weights that fall outside ±4 standard deviations on the log scale. Using this method can increase computation time as the model must be refit on each bootstrap replicate.
</p>
<p><strong>3.	Use of the nonparametric sHR/csHR ratio for calculation of sHR estimates</strong>
</p>
<p>Simultaneous estimation of all subhazard ratios and cause-specific hazard ratios is often fraught with problematic results due to incompatible modeling assumptions (e.g., not all ratios can be proportional) and the tethering inherent in subhazard analysis of multiple events as described by Muñoz et al. (2013). Cause-specific hazard ratios are not subject to such tethering constraints, and will admissible regardless of whether the model is misspecified. As such, the output of this function – valid nonparametric estimates of the sHR/csHR ratio – can be combined with (i.e., multiplied by) cause-specific hazard ratio estimates (e.g., from a proportional or loglinear cause-specific hazards model) to produce subhazard ratio estimates which do not violate the principles of tethering. See below for an example of how to implement this.
</p>


<h3>Value</h3>

<p>An object containing the plotted figures (<code>$plots</code>) and a data frame (<code>$cuminc</code>) with the following columns:
</p>

<dl>
<dt>event</dt><dd><p>Type of event that occurs at the given time.</p>
</dd>
<dt>exposure</dt><dd><p>Exposure group in which the event happens.</p>
</dd>
<dt>time</dt><dd><p>Time of the event.</p>
</dd>
<dt>CIoinc_comp</dt><dd><p>Value of the unexposed (denoted by “o”) composite cumulative incidence at the given time.</p>
</dd>
<dt>CIxinc_comp</dt><dd><p>Value of the exposed (denoted by “x”) composite cumulative incidence at the given time.</p>
</dd>
<dt>CIoinc_1</dt><dd><p>Value of the unexposed cumulative incidence of event 1 at the given time.</p>
</dd>
<dt>CIxinc_1</dt><dd><p>Value of the exposed cumulative incidence of event 1 at the given time.</p>
</dd>
<dt>R_1</dt><dd><p>Sub-hazard ratio/Cause-specific hazard ratio for event 1.</p>
</dd>
<dt>R_2</dt><dd><p>Sub-hazard ratio/Cause-specific hazard ratio for event 2.</p>
</dd>
</dl>



<h3>References</h3>

<p>1. Ng D, Antiporta DA, Matheson M, Munoz A. Nonparametric assessment of differences between competing risks hazard ratios: application to racial differences in pediatric chronic kidney disease progression. (Clinical Epidemiology, 2019-in print)
</p>
<p>2. Muñoz A, Abraham AG, Matheson M, Wada N. In: Risk Assessment and Evaluation of Predictions. Lee MLT, Gail M, Pfeiffer R, Satten G, Cai T, Gandy A, editor. New York: Springer; 2013. Non-proportionality of hazards in the competing risks framework; pp. 3–22. [Google Scholar](https://link.springer.com/chapter/10.1007/978-1-4614-8981-8_1)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#data from the package
data &lt;- hrcomprisk::dat_ckid
#Using the wrapper function
npcrest(df=data, exit=exit, event=event, exposure=b1nb0,rep=10, maxtime=20, print.attr=TRUE)
</code></pre>

<hr>
<h2 id='plotCIF'>Plot Incidence and Ratio of sHR/csHR</h2><span id='topic+plotCIF'></span>

<h3>Description</h3>

<p>Plot Cumulative Incidence and Ratio of sHR/csHR.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotCIF(cifobj, maxtime = Inf, ci = NULL, eoi = -1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotCIF_+3A_cifobj">cifobj</code></td>
<td>
<p>A dataframe containing the Cumulative Incidence of each competing event by exposure group.</p>
</td></tr>
<tr><td><code id="plotCIF_+3A_maxtime">maxtime</code></td>
<td>
<p>Largest time to display on the x-axis of all output plots.</p>
</td></tr>
<tr><td><code id="plotCIF_+3A_ci">ci</code></td>
<td>
<p>A dataframe containing the 95% CI for each ratio of csHR/sHR.</p>
</td></tr>
<tr><td><code id="plotCIF_+3A_eoi">eoi</code></td>
<td>
<p>Event number for the event of interest, useful when more than two events exist.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A large list containing 2 figures:
</p>

<dl>
<dt>$plot1 </dt><dd><p>  Plot the cumulative incidence of the composite event and of each event by exposure group.</p>
</dd>
<dt>$plot2 </dt><dd><p>  Plot the ratio of Sub-hazard ratio and Cause-specific hazard ratio for each event i (Ri).</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>#data from the package
data &lt;- hrcomprisk::dat_ckid
#Estimate the Cumulative Incidence Functions and Ratios of sHR and csHR
mydat.CIF&lt;-CRCumInc(df=data, time=exit, event=event, exposed=b1nb0, print.attr=FALSE)
#Plot the CIs and Ratios estimated
plots&lt;-plotCIF(cifobj=mydat.CIF, maxtime = 20, eoi = 1)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
