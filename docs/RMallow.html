<!DOCTYPE html><html lang="en"><head><title>Help for package RMallow</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {RMallow}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#RMallow-package'><p>Fit Multi-modal Mallows' models to ranking data.</p></a></li>
<li><a href='#AllKendall'><p>All Kendall's distances between two sets of rankings.</p></a></li>
<li><a href='#AllSeqDists'><p>Calculate all distances between a set of sequences and a fixed sequence.</p></a></li>
<li><a href='#BestFit'><p>Fit Mallows model N times and select most likely model.</p>
The EM algorithm to fit Multi-Modal Mallows' models is prone to getting
stuck in local maxima, so we run it several times and selec the best one.</a></li>
<li><a href='#C_lam'><p>Calculate the normalizing coefficient for Mallow's model in a sequence</p>
space.</a></li>
<li><a href='#ConstructSeqs'><p>Constructs sequences from Kendall Information matricies.</p></a></li>
<li><a href='#datas'><p>Sample data set.</p></a></li>
<li><a href='#DistanceDistribution'><p>Calculate the Kendall distance distribution in N! space.</p></a></li>
<li><a href='#elect'><p>1980 APA Presidential Candidate ranking data.</p></a></li>
<li><a href='#EStep'><p>The Expectation step of the EM algorithm.</p></a></li>
<li><a href='#FormatOut'><p>Formats the data in the &quot;Solve&quot; function for output.</p></a></li>
<li><a href='#hello'><p>Hello, World!</p></a></li>
<li><a href='#KendallInfo'><p>All information used to calculate Kendall's distance.</p></a></li>
<li><a href='#Lambda'><p>Objective function to determine lambda.</p></a></li>
<li><a href='#Likelihood'><p>Likelihood of the data and parameters.</p></a></li>
<li><a href='#Mallows'><p>Fits a Multi-Modal Mallows' model to ranking data.</p></a></li>
<li><a href='#NextTable'><p>Calculates the table of Kendall distances in (N+1)! space, given those in N!</p>
space.</a></li>
<li><a href='#Rgen'><p>Initialize sequence modes for the clustering process.</p></a></li>
<li><a href='#SeqDistribution'><p>Calculates distances in N! space.</p></a></li>
<li><a href='#SimplifySequences'><p>Change the form of ordered sequences.</p></a></li>
<li><a href='#three.mode'><p>Fitted version of the toy datas data set, with three modal sequences.</p></a></li>
<li><a href='#two.mode'><p>Two-mode Mallows' model fit to toy data set &quot;datas&quot;</p></a></li>
<li><a href='#two.seq'><p>Bi-modal Mallow's model fit to the APA data set.</p></a></li>
<li><a href='#UpdateLambda'><p>Update the Lambda parameters of clusters.</p></a></li>
<li><a href='#UpdateP'><p>Update Proportion in each cluster.</p></a></li>
<li><a href='#UpdateR'><p>Update modal sequences in each cluster.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Fit Multi-Modal Mallows' Models to Ranking Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-01-23</td>
</tr>
<tr>
<td>Depends:</td>
<td>combinat</td>
</tr>
<tr>
<td>Description:</td>
<td>An EM algorithm to fit Mallows' Models to full or partial rankings, with or without ties.
        Based on Adkins and Flinger (1998) &lt;<a href="https://doi.org/10.1080%2F03610929808832223">doi:10.1080/03610929808832223</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-02-06 17:51:43 UTC; adrien</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-02-07 01:10:16 UTC</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Author:</td>
<td>Erik Gregory [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Erik Gregory &lt;egregory2011@gmail.com&gt;</td>
</tr>
</table>
<hr>
<h2 id='RMallow-package'>Fit Multi-modal Mallows' models to ranking data.</h2><span id='topic+RMallow'></span><span id='topic+RMallow-package'></span>

<h3>Description</h3>

<p>Fits the Mallows' model to ranking data.  Data can be
partially or fully-ranked.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;"> Package: </td><td style="text-align: left;"> RMallow</td>
</tr>
<tr>
 <td style="text-align: left;"> Type: </td><td style="text-align: left;">
  Package</td>
</tr>
<tr>
 <td style="text-align: left;"> Version: </td><td style="text-align: left;"> 1.0</td>
</tr>
<tr>
 <td style="text-align: left;"> Date: </td><td style="text-align: left;"> 2012-02-18</td>
</tr>
<tr>
 <td style="text-align: left;">
  License: </td><td style="text-align: left;"> GPL (&gt;= 2) </td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Erik Gregory Maintainer: &lt;egregory2007@yahoo.com&gt;
</p>


<h3>References</h3>

<p>&quot;Mixtures of distance-based models for ranking data&quot;.
Thomas Brendan Murphy &amp; Donal Martin. 1 April 2002.
Computational Statistics &amp; Data Analysis 41 (2003)
645-655.
</p>
<p>&quot;Estimating a Population Distribution of Sequences of k
Items from Cross- Sectional Data&quot;. Laurel A. Smith
(Beckett) and Denis A. Evans. Journal of the Royal
Statistical Society.  Series C (Applied Statistics). Vol.
40, No. 1 (1991), pp.31-42.  Blackwell Publishing for the
Royal Statistical Society. Accessed 16/08/2010.
http://www.jstor.org/stable/2347903 .
</p>
<p>&quot;A Non-iterative procedure for maximum likelihood
estimation of the parameters of Mallows' Model Based on
Partial Rankings&quot;.  Laura Adkins and Michael Flinger.
Communication in Statistics - Theory and Methods, 27:9,
2199-2220. 1998, Marchel Dekker, Inc.
http://dx.doi.org/10.1080/03610929808832223 .
</p>

<hr>
<h2 id='AllKendall'>All Kendall's distances between two sets of rankings.</h2><span id='topic+AllKendall'></span>

<h3>Description</h3>

<p>Calculates all of the Kendall's distances between two
different sets of rankings.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  AllKendall(r, seqs, data.info = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="AllKendall_+3A_r">r</code></td>
<td>
<p>One set of sequences.</p>
</td></tr>
<tr><td><code id="AllKendall_+3A_seqs">seqs</code></td>
<td>
<p>Another set of sequences.</p>
</td></tr>
<tr><td><code id="AllKendall_+3A_data.info">data.info</code></td>
<td>
<p>Optional argument, a 0/1/NA matrix
specifying all of the relevant information to calculate
Kendall's difference for &quot;r&quot;.  Used for efficiency in
&quot;Solve&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Matrix where output[i, j] represents the distance from
sequence &quot;i&quot; in &quot;r&quot; to sequence &quot;j&quot; in &quot;seqs&quot;.
</p>


<h3>Author(s)</h3>

<p>Erik Gregory
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data1 &lt;- do.call("rbind", list(1:5, 5:1, c(3, 2, 1, 4, 5)))
data2 &lt;- do.call("rbind", list(1:5, 5:1))
# AllKendall(data1, data2)
</code></pre>

<hr>
<h2 id='AllSeqDists'>Calculate all distances between a set of sequences and a fixed sequence.</h2><span id='topic+AllSeqDists'></span>

<h3>Description</h3>

<p>Used to calculate the sequence Kendall distance
distribution in N! space.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  AllSeqDists(seqs)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="AllSeqDists_+3A_seqs">seqs</code></td>
<td>
<p>Matrix or data frame of sequences.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of the distances from the sequences to 1:N.
</p>


<h3>Author(s)</h3>

<p>Erik Gregory
</p>

<hr>
<h2 id='BestFit'>Fit Mallows model N times and select most likely model.
The EM algorithm to fit Multi-Modal Mallows' models is prone to getting
stuck in local maxima, so we run it several times and selec the best one.</h2><span id='topic+BestFit'></span>

<h3>Description</h3>

<p>Fit Mallows model N times and select most likely model.
The EM algorithm to fit Multi-Modal Mallows' models is
prone to getting stuck in local maxima, so we run it
several times and selec the best one.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  BestFit(datas, N, iter, G)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="BestFit_+3A_n">N</code></td>
<td>
<p>number of times to run the model</p>
</td></tr>
<tr><td><code id="BestFit_+3A_iter">iter</code></td>
<td>
<p>maximum number of iterations for each run</p>
</td></tr>
<tr><td><code id="BestFit_+3A_g">G</code></td>
<td>
<p>Number of cluster centers</p>
</td></tr>
<tr><td><code id="BestFit_+3A_datas">datas</code></td>
<td>
<p>data set to fit</p>
</td></tr>
</table>


<h3>Value</h3>

<p>best fitting model.
</p>

<hr>
<h2 id='C_lam'>Calculate the normalizing coefficient for Mallow's model in a sequence
space.</h2><span id='topic+C_lam'></span>

<h3>Description</h3>

<p>Calculate the normalizing coefficient, as a function of
the lambda parameter, and the size of the sequence space.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  C_lam(lambda, dists = NULL, dists.table = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="C_lam_+3A_lambda">lambda</code></td>
<td>
<p>Spread parameter for Mallows' model.</p>
</td></tr>
<tr><td><code id="C_lam_+3A_dists">dists</code></td>
<td>
<p>Vector of all distances from each sequence
to 1:N</p>
</td></tr>
<tr><td><code id="C_lam_+3A_dists.table">dists.table</code></td>
<td>
<p>Table version of &quot;dists&quot; above.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Normalizing coefficient of Mallows' model in N! space
with lambda = lambda.
</p>


<h3>Author(s)</h3>

<p>Erik Gregory
</p>

<hr>
<h2 id='ConstructSeqs'>Constructs sequences from Kendall Information matricies.</h2><span id='topic+ConstructSeqs'></span>

<h3>Description</h3>

<p>Sequences in a fully-ordered sequence space have a unique
Kendall Information vector associated with them.  This
function creates the sequence from the Kendall
information vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  ConstructSeqs(prefs, n.abils)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ConstructSeqs_+3A_prefs">prefs</code></td>
<td>
<p>Ordering preference between columns in the
data. 1 cooresponds to an increase, 0 to a decrease.</p>
</td></tr>
<tr><td><code id="ConstructSeqs_+3A_n.abils">n.abils</code></td>
<td>
<p>Number of columns in the original data
set.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of fully-ordered sequences, one for each row of
prefs.
</p>


<h3>Author(s)</h3>

<p>Erik Gregory
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ConstructSeqs(matrix(c(1, 1, 1, 0, 0, 0), nrow = 1), 4)
# Should output (4, 1, 2, 3)
</code></pre>

<hr>
<h2 id='datas'>Sample data set.</h2><span id='topic+datas'></span>

<h3>Description</h3>

<p>Simple synthetic data set containing 3 modal sequences in
15! space, with some noise added.
</p>


<h3>Format</h3>

<p>The format is: num [1:1700, 1:15] 1 15 1 15 15 12 10 4 1 15 ...</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(datas)
head(datas)
</code></pre>

<hr>
<h2 id='DistanceDistribution'>Calculate the Kendall distance distribution in N! space.</h2><span id='topic+DistanceDistribution'></span>

<h3>Description</h3>

<p>This function counts the number of fully-ordered vectors
at each distance in N! space.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  DistanceDistribution(N = 3)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="DistanceDistribution_+3A_n">N</code></td>
<td>
<p>Integer value, greater than or equal to 3.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Table-like structure, where the names represent the
distance from the modal sequence of each sequence in N!
space, and the values represent the number of sequences
at that distance in the sequence space.
</p>


<h3>Author(s)</h3>

<p>Erik Gregory
</p>

<hr>
<h2 id='elect'>1980 APA Presidential Candidate ranking data.</h2><span id='topic+elect'></span>

<h3>Description</h3>

<p>This data is a pre-processed version of the 1980 American
Psychological Association Presidential candidate ranking
data.  It has uninformative rankings removed, and values
pre-simplified into partial rankings.
</p>


<h3>Format</h3>

<p>The format is: int [1:1378, 1:3] 1 1 1 1 2 2 1 1 2 2 ...  - attr(*,
&quot;dimnames&quot;)=List of 2 ..$ : chr [1:1378] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;6&quot; ...  ..$ : chr
[1:3] &quot;Carter&quot; &quot;Reagan&quot; &quot;Anderson&quot;</p>


<h3>Source</h3>

<p>The American Psychological Association,
http://www.electionstudies.org/studypages/1980prepost/1980prepost.htm
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(elect)
head(elect)
</code></pre>

<hr>
<h2 id='EStep'>The Expectation step of the EM algorithm.</h2><span id='topic+EStep'></span>

<h3>Description</h3>

<p>Assigns each ranking the probability that it belongs to
each cluster, given current parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  EStep(R, r, p, lambda, G, N, C, all.dists = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="EStep_+3A_r">R</code></td>
<td>
<p>Current cluster modal sequences.</p>
</td></tr>
<tr><td><code id="EStep_+3A_r">r</code></td>
<td>
<p>The data of partial or full rankings.</p>
</td></tr>
<tr><td><code id="EStep_+3A_p">p</code></td>
<td>
<p>The proportion of the data currently assigned to
each cluster.</p>
</td></tr>
<tr><td><code id="EStep_+3A_lambda">lambda</code></td>
<td>
<p>The lambda parameters from Mallow's model
for each cluster.</p>
</td></tr>
<tr><td><code id="EStep_+3A_g">G</code></td>
<td>
<p>Number of clusters, length(R).</p>
</td></tr>
<tr><td><code id="EStep_+3A_n">N</code></td>
<td>
<p>Number of rows in the data.</p>
</td></tr>
<tr><td><code id="EStep_+3A_c">C</code></td>
<td>
<p>Vector of normalizing coefficients for the
clusters.</p>
</td></tr>
<tr><td><code id="EStep_+3A_all.dists">all.dists</code></td>
<td>
<p>For efficiency, provide all of the
Kendall distances between each sequence and each cluster
mode.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Matrix where output[i, j] represents the current
probability that subject &quot;i&quot; belongs to cluster &quot;j&quot;.
</p>


<h3>Author(s)</h3>

<p>Erik Gregory
</p>


<h3>References</h3>

<p>&quot;Mixtures of distance-based models for ranking data&quot;.
Thomas Brendan Murphy &amp; Donal Martin. 1 April 2002.
Computational Statistics &amp; Data Analysis 41 (2003)
645-655.
</p>

<hr>
<h2 id='FormatOut'>Formats the data in the &quot;Solve&quot; function for output.</h2><span id='topic+FormatOut'></span>

<h3>Description</h3>

<p>Data formatting function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  FormatOut(R, p, lambda, z, datas, likelihood)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="FormatOut_+3A_r">R</code></td>
<td>
<p>The modal sequences.</p>
</td></tr>
<tr><td><code id="FormatOut_+3A_p">p</code></td>
<td>
<p>Proportion of data in each cluster.</p>
</td></tr>
<tr><td><code id="FormatOut_+3A_lambda">lambda</code></td>
<td>
<p>Mallows' spread parameters for each
cluster.</p>
</td></tr>
<tr><td><code id="FormatOut_+3A_z">z</code></td>
<td>
<p>Probability of cluster membership for each
individual.</p>
</td></tr>
<tr><td><code id="FormatOut_+3A_datas">datas</code></td>
<td>
<p>Matrix of partial sequences.</p>
</td></tr>
<tr><td><code id="FormatOut_+3A_likelihood">likelihood</code></td>
<td>
<p>Vector of the log-likelihood of the
model at each iteration.</p>
</td></tr>
</table>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>R</code></td>
<td>
<p>The modal sequences</p>
</td></tr> <tr><td><code>p</code></td>
<td>
<p>Proportion in each
cluster</p>
</td></tr> <tr><td><code>lambda</code></td>
<td>
<p>Spread parameters for each
cluster</p>
</td></tr> <tr><td><code>datas</code></td>
<td>
<p>Rankings merged with their cluster
membership, distance from each cluster center, and
probability of each cluster membership</p>
</td></tr>
<tr><td><code>min.like</code></td>
<td>
<p>Likelihood at each iteration</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Erik Gregory
</p>

<hr>
<h2 id='hello'>Hello, World!</h2><span id='topic+hello'></span>

<h3>Description</h3>

<p>Prints 'Hello, world!'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hello()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>hello()
</code></pre>

<hr>
<h2 id='KendallInfo'>All information used to calculate Kendall's distance.</h2><span id='topic+KendallInfo'></span>

<h3>Description</h3>

<p>Performs each column-wise comparison on a matrix of
sequences.  A 0 value denotes that there is an increase
between the two columns, 1 a decrease, and NA indicates
that the column values are identical in the row.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  KendallInfo(r, inds = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="KendallInfo_+3A_r">r</code></td>
<td>
<p>Matrix of sequences.</p>
</td></tr>
<tr><td><code id="KendallInfo_+3A_inds">inds</code></td>
<td>
<p>Possibly efficiency increase when doing
repeated calculations, currently not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Matrix of 0s, 1s, and NAs representing pairwise
comparisons of vector values.
</p>


<h3>Author(s)</h3>

<p>Erik Gregory
</p>


<h3>References</h3>

<p>http://en.wikipedia.org/wiki/Kendall_tau_distance
</p>

<hr>
<h2 id='Lambda'>Objective function to determine lambda.</h2><span id='topic+Lambda'></span>

<h3>Description</h3>

<p>Objective function to find the root of in calculating the
lambda parameters for each cluster.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  Lambda(lambda, rhs, dists, dists.table = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Lambda_+3A_lambda">lambda</code></td>
<td>
<p>lambda value to calculate the function
output at.</p>
</td></tr>
<tr><td><code id="Lambda_+3A_rhs">rhs</code></td>
<td>
<p>Right-hand side of the equation in the
referenced paper.</p>
</td></tr>
<tr><td><code id="Lambda_+3A_dists">dists</code></td>
<td>
<p>Not used.</p>
</td></tr>
<tr><td><code id="Lambda_+3A_dists.table">dists.table</code></td>
<td>
<p>Table of distances between each
sequence and the modal sequence in N! space.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Output of the objective function to determine the root
of.  Goal is zero.
</p>


<h3>Author(s)</h3>

<p>Erik Gregory
</p>


<h3>References</h3>

<p>&quot;Mixtures of distance-based models for ranking data&quot;.
Thomas Brendan Murphy &amp; Donal Martin. 1 April 2002.
Computational Statistics &amp; Data Analysis 41 (2003)
645-655.
</p>

<hr>
<h2 id='Likelihood'>Likelihood of the data and parameters.</h2><span id='topic+Likelihood'></span>

<h3>Description</h3>

<p>Calculates the log-likelihood of the data with the
current parameters and Kendall's distance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  Likelihood(z, p, C.lam, lambda, all.dists.data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Likelihood_+3A_z">z</code></td>
<td>
<p>Probability of each cluster membership.</p>
</td></tr>
<tr><td><code id="Likelihood_+3A_p">p</code></td>
<td>
<p>Proportion in each cluster.</p>
</td></tr>
<tr><td><code id="Likelihood_+3A_c.lam">C.lam</code></td>
<td>
<p>Vector of normalizing coefficients for
Mallows' model.</p>
</td></tr>
<tr><td><code id="Likelihood_+3A_lambda">lambda</code></td>
<td>
<p>Current spread parameters</p>
</td></tr>
<tr><td><code id="Likelihood_+3A_all.dists.data">all.dists.data</code></td>
<td>
<p>All distances from the data to the
modal sequences.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Current log-likelihood of the data with the current
parameters.
</p>


<h3>Author(s)</h3>

<p>Erik Gregory
</p>


<h3>References</h3>

<p>&quot;Mixtures of distance-based models for ranking data&quot;.
Thomas Brendan Murphy &amp; Donal Martin. 1 April 2002.
Computational Statistics &amp; Data Analysis 41 (2003)
645-655.
</p>

<hr>
<h2 id='Mallows'>Fits a Multi-Modal Mallows' model to ranking data.</h2><span id='topic+Mallows'></span>

<h3>Description</h3>

<p>Fits the Multi-Modal Mallows' model to partial or full
ranking data, using Kendall's metric and an EM algorithm.
This is essentially metric sequence clustering.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  Mallows(datas, G, iter = 10, hyp = NULL,
    plot.like = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Mallows_+3A_datas">datas</code></td>
<td>
<p>Matrix of partial or fully-ranked data.</p>
</td></tr>
<tr><td><code id="Mallows_+3A_g">G</code></td>
<td>
<p>Number of modes, 2 or greater.</p>
</td></tr>
<tr><td><code id="Mallows_+3A_iter">iter</code></td>
<td>
<p>Maximum number of iterations.</p>
</td></tr>
<tr><td><code id="Mallows_+3A_hyp">hyp</code></td>
<td>
<p>Hypothesis sequence vector, to initialize one
of the cluster centers at.</p>
</td></tr>
<tr><td><code id="Mallows_+3A_plot.like">plot.like</code></td>
<td>
<p>Should the likelihood be printed at each
iteration?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>See output of FormatOut
</p>


<h3>Author(s)</h3>

<p>Erik Gregory
</p>


<h3>References</h3>

<p>&quot;Mixtures of distance-based models for ranking data&quot;.
Thomas Brendan Murphy &amp; Donal Martin. 1 April 2002.
Computational Statistics &amp; Data Analysis 41 (2003)
645-655.
</p>

<hr>
<h2 id='NextTable'>Calculates the table of Kendall distances in (N+1)! space, given those in N!
space.</h2><span id='topic+NextTable'></span>

<h3>Description</h3>

<p>This is identical to counting the number of fully-ordered
vectors at each bubble sort distance in (N+1)! space.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  NextTable(last.table, N.last)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="NextTable_+3A_last.table">last.table</code></td>
<td>
<p>Table of distances in N! space.</p>
</td></tr>
<tr><td><code id="NextTable_+3A_n.last">N.last</code></td>
<td>
<p>N</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Table of distances in (N+1)! space.
</p>


<h3>Author(s)</h3>

<p>Erik Gregory
</p>

<hr>
<h2 id='Rgen'>Initialize sequence modes for the clustering process.</h2><span id='topic+Rgen'></span>

<h3>Description</h3>

<p>Initialize sequence modes for the clustering process.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  Rgen(G, hyp = NULL, abils)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Rgen_+3A_g">G</code></td>
<td>
<p>number of cluster centers, including the
hypothesis if provided</p>
</td></tr>
<tr><td><code id="Rgen_+3A_hyp">hyp</code></td>
<td>
<p>a single sequence of length <code>abils</code> to
initialize one of the cluster centers</p>
</td></tr>
<tr><td><code id="Rgen_+3A_abils">abils</code></td>
<td>
<p>number of items being ranked</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of G cluster centers, each of length abils
</p>


<h3>Author(s)</h3>

<p>Erik Gregory
</p>


<h3>Examples</h3>

<pre><code class='language-R'>Rgen(3, 1:5, 5)
</code></pre>

<hr>
<h2 id='SeqDistribution'>Calculates distances in N! space.</h2><span id='topic+SeqDistribution'></span>

<h3>Description</h3>

<p>Calculates Kendall's distances of each sequence in N!
space.  This is VERY Inefficient for N &gt;= 8.  See
DistanceDistribution for an astronomical improvement
(possibly on the order of 10^10).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  SeqDistribution(N)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="SeqDistribution_+3A_n">N</code></td>
<td>
<p>Length of the ranking.  Preferrably less than
9.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of Kendall distances from 1:N to each sequence in
N! space.
</p>


<h3>Author(s)</h3>

<p>Erik Gregory
</p>

<hr>
<h2 id='SimplifySequences'>Change the form of ordered sequences.</h2><span id='topic+SimplifySequences'></span>

<h3>Description</h3>

<p>Simplifies sequences so that each tie group is only of
distance 1 to the next tie group.  For example, we would
simplify (1, 1, 2, 4, 4, 5) to (1, 1, 2, 3, 3, 4).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  SimplifySequences(loss.time)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="SimplifySequences_+3A_loss.time">loss.time</code></td>
<td>
<p>Matrix of sequences to be simplified.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Simplified sequences, as described in Description.
</p>


<h3>Author(s)</h3>

<p>Erik Gregory
</p>

<hr>
<h2 id='three.mode'>Fitted version of the toy datas data set, with three modal sequences.</h2><span id='topic+three.mode'></span>

<h3>Description</h3>

<p>The data has 3 modal sequences, and we can compare this
to the two.mode data set.
</p>


<h3>Format</h3>

<p>The format is: List of 5 $ R :List of 3 ..$ : int [1:15] 1 2 3 4 5 6
7 8 9 10 ...  ..$ : int [1:15] 1 3 5 7 9 2 4 6 8 10 ...  ..$ : int [1:15] 15
14 13 12 11 10 9 8 7 6 ...  $ p : num [1:3] 0.447 0.118 0.435 $ lambda : num
[1:3] 2.01 1000 2.04 $ datas :'data.frame': 1700 obs. of 23 variables: ..$
X1 : num [1:1700] 1 15 1 15 15 12 10 4 1 15 ...  ..$ X2 : num [1:1700] 2 14
2 14 14 13 13 12 2 14 ...  ..$ X3 : num [1:1700] 3 13 3 13 13 2 4 6 3 13 ...
..$ X4 : num [1:1700] 4 12 4 12 12 8 7 1 4 12 ...  ..$ X5 : num [1:1700] 5
11 5 11 11 9 14 5 5 11 ...  ..$ X6 : num [1:1700] 6 10 6 10 10 1 8 10 6 10
...  ..$ X7 : num [1:1700] 7 9 7 9 9 15 1 13 7 9 ...  ..$ X8 : num [1:1700]
8 8 8 8 8 10 9 9 8 8 ...  ..$ X9 : num [1:1700] 9 7 9 7 7 6 5 14 9 7 ...
..$ X10 : num [1:1700] 10 6 10 6 6 11 11 8 10 6 ...  ..$ X11 : num [1:1700]
11 5 11 5 5 3 15 2 11 5 ...  ..$ X12 : num [1:1700] 12 4 12 4 4 14 12 11 12
4 ...  ..$ X13 : num [1:1700] 13 3 13 3 3 7 2 7 13 3 ...  ..$ X14 : num
[1:1700] 14 2 14 2 2 5 3 15 14 2 ...  ..$ X15 : num [1:1700] 15 1 15 1 1 4 6
3 15 1 ...  ..$ clust : int [1:1700] 1 3 1 3 3 3 3 1 1 3 ...  ..$ pvals.1:
num [1:1700] 1.00 1.03e-91 1.00 2.04e-93 1.03e-91 ...  ..$ pvals.2: num
[1:1700] 0 0 0 0 0 0 0 0 0 0 ...  ..$ pvals.3: num [1:1700] 1.02e-92 1.00
1.34e-93 1.00 1.00 ...  ..$ seq : Factor w/ 3 levels &quot;1 2 3 4 5 6 7 8 9 10
11 12 13 14 15&quot;,..: 1 3 1 3 3 3 3 1 1 3 ...  ..$ dists.1: num [1:1700] 0 105
0 105 105 61 58 46 0 105 ...  ..$ dists.2: num [1:1700] 10 95 10 95 95 61 54
54 10 95 ...  ..$ dists.3: num [1:1700] 105 0 105 0 0 44 47 59 105 0 ...  $
min.like: num [1:100] -122710 -51439 -50310 -49976 -49718 ...</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(three.mode)
head(three.mode[[4]])
</code></pre>

<hr>
<h2 id='two.mode'>Two-mode Mallows' model fit to toy data set &quot;datas&quot;</h2><span id='topic+two.mode'></span>

<h3>Description</h3>

<p>&quot;datas&quot; has 3 modes, but we observe here what happens
when we try to fit it with 2 modal sequences.  The most
prominent modal sequences are 1:15, 15:1
</p>


<h3>Format</h3>

<p>The format is: List of 5 $ R :List of 2 ..$ : int [1:15] 1 2 3 4 5 6
7 8 9 10 ...  ..$ : int [1:15] 15 14 13 12 11 10 9 8 7 6 ...  $ p : num
[1:2] 0.557 0.443 $ lambda : num [1:2] 2.05 2.02 $ datas :'data.frame': 1700
obs. of 21 variables: ..$ X1 : num [1:1700] 1 15 1 15 15 12 10 4 1 15 ...
..$ X2 : num [1:1700] 2 14 2 14 14 13 13 12 2 14 ...  ..$ X3 : num [1:1700]
3 13 3 13 13 2 4 6 3 13 ...  ..$ X4 : num [1:1700] 4 12 4 12 12 8 7 1 4 12
...  ..$ X5 : num [1:1700] 5 11 5 11 11 9 14 5 5 11 ...  ..$ X6 : num
[1:1700] 6 10 6 10 10 1 8 10 6 10 ...  ..$ X7 : num [1:1700] 7 9 7 9 9 15 1
13 7 9 ...  ..$ X8 : num [1:1700] 8 8 8 8 8 10 9 9 8 8 ...  ..$ X9 : num
[1:1700] 9 7 9 7 7 6 5 14 9 7 ...  ..$ X10 : num [1:1700] 10 6 10 6 6 11 11
8 10 6 ...  ..$ X11 : num [1:1700] 11 5 11 5 5 3 15 2 11 5 ...  ..$ X12 :
num [1:1700] 12 4 12 4 4 14 12 11 12 4 ...  ..$ X13 : num [1:1700] 13 3 13 3
3 7 2 7 13 3 ...  ..$ X14 : num [1:1700] 14 2 14 2 2 5 3 15 14 2 ...  ..$
X15 : num [1:1700] 15 1 15 1 1 4 6 3 15 1 ...  ..$ clust : int [1:1700] 1 2
1 2 2 2 2 1 1 2 ...  ..$ pvals.1: num [1:1700] 1.00 4.15e-94 1.00 4.15e-94
4.15e-94 ...  ..$ pvals.2: num [1:1700] 5.4e-93 1.0 5.4e-93 1.0 1.0 ...  ..$
seq : Factor w/ 2 levels &quot;1 2 3 4 5 6 7 8 9 10 11 12 13 14 15&quot;,..: 1 2 1 2 2
2 2 1 1 2 ...  ..$ dists.1: num [1:1700] 0 105 0 105 105 61 58 46 0 105 ...
..$ dists.2: num [1:1700] 105 0 105 0 0 44 47 59 105 0 ...  $ min.like: num
[1:100] -178063 -139298 -58290 -54074 -53902 ...</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(two.mode)
head(two.mode[[4]])
</code></pre>

<hr>
<h2 id='two.seq'>Bi-modal Mallow's model fit to the APA data set.</h2><span id='topic+two.seq'></span>

<h3>Description</h3>

<p>The two-modes seem to divide well between Democrats and
Republicans...
</p>


<h3>Format</h3>

<p>The format is: List of 5 $ R :List of 2 ..$ : int [1:3] 1 3 2 ..$ :
int [1:3] 3 1 2 $ p : num [1:2] 0.541 0.459 $ lambda : num [1:2] 2.19 2.32 $
datas :'data.frame': 1378 obs. of 9 variables: ..$ Carter : int [1:1378] 1 1
1 1 2 2 1 1 2 2 ...  ..$ Reagan : int [1:1378] 1 2 2 2 1 1 2 3 1 1 ...  ..$
Anderson: int [1:1378] 1 2 2 3 3 3 3 2 3 3 ...  ..$ clust : int [1:1378] 1 1
1 1 2 2 1 1 2 2 ...  ..$ pvals.1 : num [1:1378] 0.541 0.992 0.992 0.932
0.131 ...  ..$ pvals.2 : num [1:1378] 0.45893 0.00809 0.00809 0.06802
0.86945 ...  ..$ seq : Factor w/ 2 levels &quot;1 3 2&quot;,&quot;3 1 2&quot;: 1 1 1 1 2 2 1 1 2
2 ...  ..$ dists.1 : num [1:1378] 0 0 0 1 2 2 1 0 2 2 ...  ..$ dists.2 : num
[1:1378] 0 2 2 2 1 1 2 3 1 1 ...  $ min.like: num [1:100] -6421 -3386 -2916
-2811 -2799 ...</p>


<h3>Source</h3>

<p>American Psychological Association
http://www.electionstudies.org/studypages/anes_mergedfile_1980/anes_mergedfile_1980.htm
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(two.seq)
head(two.seq[[4]])
</code></pre>

<hr>
<h2 id='UpdateLambda'>Update the Lambda parameters of clusters.</h2><span id='topic+UpdateLambda'></span>

<h3>Description</h3>

<p>Updates the Lambda parameters to maximize the likelihood
of the data under Mallows' model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  UpdateLambda(r, R, z, G, dists.to.Rg, dists.table,
    top.bound = 1000)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="UpdateLambda_+3A_r">r</code></td>
<td>
<p>Matrix of partial rankings.</p>
</td></tr>
<tr><td><code id="UpdateLambda_+3A_r">R</code></td>
<td>
<p>Current modal sequences.</p>
</td></tr>
<tr><td><code id="UpdateLambda_+3A_z">z</code></td>
<td>
<p>Current probabilities of memberships in each
cluster.</p>
</td></tr>
<tr><td><code id="UpdateLambda_+3A_g">G</code></td>
<td>
<p>Number of modal sequences.</p>
</td></tr>
<tr><td><code id="UpdateLambda_+3A_dists.to.rg">dists.to.Rg</code></td>
<td>
<p>Matrix of the distances between the
data and the current modal sequences.</p>
</td></tr>
<tr><td><code id="UpdateLambda_+3A_dists.table">dists.table</code></td>
<td>
<p>Table of the distance distribution in
N! space, under Kendall's metric.</p>
</td></tr>
<tr><td><code id="UpdateLambda_+3A_top.bound">top.bound</code></td>
<td>
<p>The maximum value for the lambda
parameter.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of new lambda parameters for the clusters.
</p>


<h3>Author(s)</h3>

<p>Erik Gregory
</p>


<h3>References</h3>

<p>&quot;Mixtures of distance-based models for ranking data&quot;.
Thomas Brendan Murphy &amp; Donal Martin. 1 April 2002.
Computational Statistics &amp; Data Analysis 41 (2003)
645-655.
</p>

<hr>
<h2 id='UpdateP'>Update Proportion in each cluster.</h2><span id='topic+UpdateP'></span>

<h3>Description</h3>

<p>Updates the proportion of data assigned to each cluster.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  UpdateP(z)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="UpdateP_+3A_z">z</code></td>
<td>
<p>Probabilities that each sequence is in each
cluster.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Proportion of data in each cluster.
</p>


<h3>Author(s)</h3>

<p>Erik Gregory
</p>


<h3>References</h3>

<p>&quot;Mixtures of distance-based models for ranking data&quot;.
Thomas Brendan Murphy &amp; Donal Martin. 1 April 2002.
Computational Statistics &amp; Data Analysis 41 (2003)
645-655.
</p>

<hr>
<h2 id='UpdateR'>Update modal sequences in each cluster.</h2><span id='topic+UpdateR'></span>

<h3>Description</h3>

<p>Maximizes the likelihood of the data by updating the
cluster centers of the model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  UpdateR(r, z, infos = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="UpdateR_+3A_r">r</code></td>
<td>
<p>Matrix of sequences being clustered.</p>
</td></tr>
<tr><td><code id="UpdateR_+3A_z">z</code></td>
<td>
<p>Probability of cluster membership for each
sequence and each cluster.</p>
</td></tr>
<tr><td><code id="UpdateR_+3A_infos">infos</code></td>
<td>
<p>The KendallInfo matrix for &quot;r&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>New cluster centers for each cluster.
</p>


<h3>Author(s)</h3>

<p>Erik Gregory
</p>


<h3>References</h3>

<p>&quot;Mixtures of distance-based models for ranking data&quot;.
Thomas Brendan Murphy &amp; Donal Martin. 1 April 2002.
Computational Statistics &amp; Data Analysis 41 (2003)
645-655.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
