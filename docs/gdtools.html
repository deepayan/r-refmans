<!DOCTYPE html><html><head><title>Help for package gdtools</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {gdtools}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#addGFontHtmlDependency'><p>Use a font in Shiny or Markdown</p></a></li>
<li><a href='#dummy_setup'><p>dummy 'Google Fonts' cache</p></a></li>
<li><a href='#font_family_exists'><p>Check if font family exists.</p></a></li>
<li><a href='#fontconfig_reinit'><p>reload Fontconfig configuration</p></a></li>
<li><a href='#fonts_cache_dir'><p>manage font working directory</p></a></li>
<li><a href='#gfontHtmlDependency'><p>'Google Font' HTML dependency</p></a></li>
<li><a href='#glyphs_match'><p>Validate glyph entries</p></a></li>
<li><a href='#install_gfont_script'><p>Shell command to install a font from 'Google Fonts'</p></a></li>
<li><a href='#installed_gfonts'><p>List installed 'Google Fonts'</p></a></li>
<li><a href='#liberationsansHtmlDependency'><p>'Liberation Sans' Font HTML dependency</p></a></li>
<li><a href='#m_str_extents'><p>Compute string extents for a vector of string.</p></a></li>
<li><a href='#match_family'><p>Find best family match with systemfonts</p></a></li>
<li><a href='#raster_str'><p>Draw/preview a raster into a string</p></a></li>
<li><a href='#raster_write'><p>Draw/preview a raster to a png file</p></a></li>
<li><a href='#register_gfont'><p>Register a 'Google Fonts'</p></a></li>
<li><a href='#register_liberationsans'><p>Register font 'Liberation Sans'</p></a></li>
<li><a href='#set_dummy_conf'><p>Set and unset a minimalistic Fontconfig configuration</p></a></li>
<li><a href='#str_extents'><p>Compute string extents.</p></a></li>
<li><a href='#str_metrics'><p>Get font metrics for a string.</p></a></li>
<li><a href='#sys_fonts'><p>List fonts for 'systemfonts'.</p></a></li>
<li><a href='#version_freetype'><p>Version numbers of C libraries</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>0.3.7</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> | file LICENSE</td>
</tr>
<tr>
<td>Title:</td>
<td>Utilities for Graphical Rendering and Fonts Management</td>
</tr>
<tr>
<td>Description:</td>
<td>Tools are provided to compute metrics of 
  formatted strings and to check the availability of a font. 
  Another set of functions is provided to support the collection 
  of fonts from 'Google Fonts' in a cache. Their use is simple within 
  'R Markdown' documents and 'shiny' applications but also with graphic 
  productions generated with the 'ggiraph', 'ragg' and 'svglite' packages 
  or with tabular productions from the 'flextable' package.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 0.12.12), systemfonts (&ge; 0.1.1), htmltools, gfonts,
tools, curl, fontquiver (&ge; 0.2.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, methods</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>cairo, freetype2, fontconfig</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://davidgohel.github.io/gdtools/">https://davidgohel.github.io/gdtools/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/davidgohel/gdtools/issues">https://github.com/davidgohel/gdtools/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-04 15:45:25 UTC; davidgohel</td>
</tr>
<tr>
<td>Author:</td>
<td>David Gohel [aut, cre],
  Hadley Wickham [aut],
  Lionel Henry [aut],
  Jeroen Ooms <a href="https://orcid.org/0000-0002-4035-0289"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Yixuan Qiu [ctb],
  R Core Team [cph] (Cairo code from X11 device),
  ArData [cph],
  RStudio [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>David Gohel &lt;david.gohel@ardata.fr&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-05 05:30:36 UTC</td>
</tr>
</table>
<hr>
<h2 id='addGFontHtmlDependency'>Use a font in Shiny or Markdown</h2><span id='topic+addGFontHtmlDependency'></span>

<h3>Description</h3>

<p>Add an empty HTML element attached
to an 'HTML Dependency' containing
the css and the font files so that the font is available
in the HTML page. Multiple families are supported.
</p>
<p>The htmlDependency is defined with function <code><a href="#topic+gfontHtmlDependency">gfontHtmlDependency()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addGFontHtmlDependency(family = "Open Sans", subset = c("latin", "latin-ext"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addGFontHtmlDependency_+3A_family">family</code></td>
<td>
<p>family name of a 'Google Fonts', for example, &quot;Open Sans&quot;, &quot;Roboto&quot;,
&quot;Fira Code&quot; or &quot;Fira Sans Condensed&quot;. Complete list is available with the
following command:
</p>
<div class="sourceCode"><pre>gfonts::get_all_fonts()$family |&gt;
  unlist() |&gt;
  unique() |&gt;
  sort()
</pre></div></td></tr>
<tr><td><code id="addGFontHtmlDependency_+3A_subset">subset</code></td>
<td>
<p>font subset, a character vector, it defaults to only &quot;latin&quot; and
&quot;latin-ext&quot; and can contains values such as &quot;greek&quot;, &quot;emoji&quot;, &quot;chinese-traditional&quot;,
</p>
<p>Run the following code to get a complete list:
</p>
<div class="sourceCode"><pre>gfonts::get_all_fonts()$subsets |&gt; unlist() |&gt; unique() |&gt; sort()
</pre></div></td></tr>
</table>


<h3>Details</h3>

<p>It allows users to use fonts from 'Google Fonts' in an HTML page generated by 'shiny' or 'R Markdown'.
At the first request, the font files will be downloaded and stored in a cache on the
user's machine, thus avoiding many useless downloads or allowing to work with
these fonts afterwards without an Internet connection, in a docker image for example.
See <code><a href="#topic+fonts_cache_dir">fonts_cache_dir()</a></code>.
</p>
<p>The server delivering the font files should not be too busy. That's
why a one second pause is added after each download to respect the server's
limits. This time can be set with the option <code>GFONTS_DOWNLOAD_SLEEPTIME</code> which
must be a number of seconds.
</p>


<h3>Value</h3>

<p>an HTML object
</p>


<h3>See Also</h3>

<p>Other functions for font management: 
<code><a href="#topic+fonts_cache_dir">fonts_cache_dir</a>()</code>,
<code><a href="#topic+gfontHtmlDependency">gfontHtmlDependency</a>()</code>,
<code><a href="#topic+install_gfont_script">install_gfont_script</a>()</code>,
<code><a href="#topic+installed_gfonts">installed_gfonts</a>()</code>,
<code><a href="#topic+liberationsansHtmlDependency">liberationsansHtmlDependency</a>()</code>,
<code><a href="#topic+register_gfont">register_gfont</a>()</code>,
<code><a href="#topic+register_liberationsans">register_liberationsans</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
if (curl::has_internet()) {
  dummy_setup()
  addGFontHtmlDependency(family = "Open Sans")
}

## End(Not run)
</code></pre>

<hr>
<h2 id='dummy_setup'>dummy 'Google Fonts' cache</h2><span id='topic+dummy_setup'></span>

<h3>Description</h3>

<p>dummy 'Google Fonts' cache
used for examples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dummy_setup()
</code></pre>

<hr>
<h2 id='font_family_exists'>Check if font family exists.</h2><span id='topic+font_family_exists'></span>

<h3>Description</h3>

<p>Check if a font family exists in system fonts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>font_family_exists(font_family = "sans")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="font_family_exists_+3A_font_family">font_family</code></td>
<td>
<p>font family name (case sensitive)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical value
</p>


<h3>Examples</h3>

<pre><code class='language-R'>font_family_exists("sans")
font_family_exists("Arial")
font_family_exists("Courier")
</code></pre>

<hr>
<h2 id='fontconfig_reinit'>reload Fontconfig configuration</h2><span id='topic+fontconfig_reinit'></span>

<h3>Description</h3>

<p>This function can be used to make fontconfig
reload font configuration files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fontconfig_reinit()
</code></pre>


<h3>Note</h3>

<p>Fontconfig is not used anymore and that function will be deprecated
in the next release.
</p>


<h3>Author(s)</h3>

<p>Paul Murrell
</p>

<hr>
<h2 id='fonts_cache_dir'>manage font working directory</h2><span id='topic+fonts_cache_dir'></span><span id='topic+rm_fonts_cache'></span><span id='topic+init_fonts_cache'></span>

<h3>Description</h3>

<p>Initialize or remove font directory used
to store downloaded font files.
</p>
<p>This directory is managed by R function <code><a href="tools.html#topic+R_user_dir">R_user_dir()</a></code> but can also
be defined in a non-user location by setting ENV variable <code>GDTOOLS_CACHE_DIR</code>
or by setting R option <code>GDTOOLS_CACHE_DIR</code>.
</p>
<p>Its value can be read with the <code>fonts_cache_dir()</code> function.
</p>
<p>The directory can be deleted with <code>rm_fonts_cache()</code> and
created with <code>init_fonts_cache()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fonts_cache_dir()

rm_fonts_cache()

init_fonts_cache()
</code></pre>


<h3>See Also</h3>

<p>Other functions for font management: 
<code><a href="#topic+addGFontHtmlDependency">addGFontHtmlDependency</a>()</code>,
<code><a href="#topic+gfontHtmlDependency">gfontHtmlDependency</a>()</code>,
<code><a href="#topic+install_gfont_script">install_gfont_script</a>()</code>,
<code><a href="#topic+installed_gfonts">installed_gfonts</a>()</code>,
<code><a href="#topic+liberationsansHtmlDependency">liberationsansHtmlDependency</a>()</code>,
<code><a href="#topic+register_gfont">register_gfont</a>()</code>,
<code><a href="#topic+register_liberationsans">register_liberationsans</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fonts_cache_dir()

options(GDTOOLS_CACHE_DIR = tempdir())
fonts_cache_dir()
options(GDTOOLS_CACHE_DIR = NULL)

Sys.setenv(GDTOOLS_CACHE_DIR=tempdir())
fonts_cache_dir()
Sys.setenv(GDTOOLS_CACHE_DIR="")



init_fonts_cache()
dir.exists(fonts_cache_dir())

rm_fonts_cache()
dir.exists(fonts_cache_dir())
</code></pre>

<hr>
<h2 id='gfontHtmlDependency'>'Google Font' HTML dependency</h2><span id='topic+gfontHtmlDependency'></span>

<h3>Description</h3>

<p>Create an HTML dependency ready
to be used in 'Shiny' or 'R Markdown'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gfontHtmlDependency(family = "Open Sans", subset = c("latin", "latin-ext"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gfontHtmlDependency_+3A_family">family</code></td>
<td>
<p>family name of a 'Google Fonts', for example, &quot;Open Sans&quot;, &quot;Roboto&quot;,
&quot;Fira Code&quot; or &quot;Fira Sans Condensed&quot;. Complete list is available with the
following command:
</p>
<div class="sourceCode"><pre>gfonts::get_all_fonts()$family |&gt;
  unlist() |&gt;
  unique() |&gt;
  sort()
</pre></div></td></tr>
<tr><td><code id="gfontHtmlDependency_+3A_subset">subset</code></td>
<td>
<p>font subset, a character vector, it defaults to only &quot;latin&quot; and
&quot;latin-ext&quot; and can contains values such as &quot;greek&quot;, &quot;emoji&quot;, &quot;chinese-traditional&quot;,
</p>
<p>Run the following code to get a complete list:
</p>
<div class="sourceCode"><pre>gfonts::get_all_fonts()$subsets |&gt; unlist() |&gt; unique() |&gt; sort()
</pre></div></td></tr>
</table>


<h3>Details</h3>

<p>It allows users to use fonts from 'Google Fonts' in an HTML page generated by 'shiny' or 'R Markdown'.
At the first request, the font files will be downloaded and stored in a cache on the
user's machine, thus avoiding many useless downloads or allowing to work with
these fonts afterwards without an Internet connection, in a docker image for example.
See <code><a href="#topic+fonts_cache_dir">fonts_cache_dir()</a></code>.
</p>
<p>The server delivering the font files should not be too busy. That's
why a one second pause is added after each download to respect the server's
limits. This time can be set with the option <code>GFONTS_DOWNLOAD_SLEEPTIME</code> which
must be a number of seconds.
</p>


<h3>Value</h3>

<p>an object defined with <code><a href="htmltools.html#topic+htmlDependency">htmlDependency()</a></code>.
</p>


<h3>See Also</h3>

<p>Other functions for font management: 
<code><a href="#topic+addGFontHtmlDependency">addGFontHtmlDependency</a>()</code>,
<code><a href="#topic+fonts_cache_dir">fonts_cache_dir</a>()</code>,
<code><a href="#topic+install_gfont_script">install_gfont_script</a>()</code>,
<code><a href="#topic+installed_gfonts">installed_gfonts</a>()</code>,
<code><a href="#topic+liberationsansHtmlDependency">liberationsansHtmlDependency</a>()</code>,
<code><a href="#topic+register_gfont">register_gfont</a>()</code>,
<code><a href="#topic+register_liberationsans">register_liberationsans</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
if (curl::has_internet()) {
  dummy_setup()
  gfontHtmlDependency(family = "Open Sans")
}

## End(Not run)
</code></pre>

<hr>
<h2 id='glyphs_match'>Validate glyph entries</h2><span id='topic+glyphs_match'></span>

<h3>Description</h3>

<p>Determines if strings contain glyphs not part of a font.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>glyphs_match(x, fontname = "sans", bold = FALSE, italic = FALSE, fontfile = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="glyphs_match_+3A_x">x</code></td>
<td>
<p>Character vector of strings</p>
</td></tr>
<tr><td><code id="glyphs_match_+3A_fontname">fontname</code></td>
<td>
<p>Font name</p>
</td></tr>
<tr><td><code id="glyphs_match_+3A_bold">bold</code>, <code id="glyphs_match_+3A_italic">italic</code></td>
<td>
<p>Is text bold/italic?</p>
</td></tr>
<tr><td><code id="glyphs_match_+3A_fontfile">fontfile</code></td>
<td>
<p>Font file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a logical vector, if a character element is containing at least
a glyph that can not be matched in the font table, FALSE is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>glyphs_match(letters)
glyphs_match("\u265E", bold = TRUE)
</code></pre>

<hr>
<h2 id='install_gfont_script'>Shell command to install a font from 'Google Fonts'</h2><span id='topic+install_gfont_script'></span>

<h3>Description</h3>

<p>Create a string containing a system command to execute
so that the font from 'Google Fonts' is installed on the system.
Its execution may require root permissions, in dockerfile for example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>install_gfont_script(
  family = "Open Sans",
  subset = c("latin", "latin-ext"),
  platform = c("debian", "windows", "macos"),
  file = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="install_gfont_script_+3A_family">family</code></td>
<td>
<p>family name of a 'Google Fonts', for example, &quot;Open Sans&quot;, &quot;Roboto&quot;,
&quot;Fira Code&quot; or &quot;Fira Sans Condensed&quot;. Complete list is available with the
following command:
</p>
<div class="sourceCode"><pre>gfonts::get_all_fonts()$family |&gt;
  unlist() |&gt;
  unique() |&gt;
  sort()
</pre></div></td></tr>
<tr><td><code id="install_gfont_script_+3A_subset">subset</code></td>
<td>
<p>font subset, a character vector, it defaults to only &quot;latin&quot; and
&quot;latin-ext&quot; and can contains values such as &quot;greek&quot;, &quot;emoji&quot;, &quot;chinese-traditional&quot;,
</p>
<p>Run the following code to get a complete list:
</p>
<div class="sourceCode"><pre>gfonts::get_all_fonts()$subsets |&gt; unlist() |&gt; unique() |&gt; sort()
</pre></div></td></tr>
<tr><td><code id="install_gfont_script_+3A_platform">platform</code></td>
<td>
<p>&quot;debian&quot; and &quot;windows&quot; and &quot;macos&quot; are supported.</p>
</td></tr>
<tr><td><code id="install_gfont_script_+3A_file">file</code></td>
<td>
<p>script file to generate, optional. If the parameter is
specified, a file will be generated ready for execution. If the
platform is Windows, administration rights are required to run
the script.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It allows users to use fonts from 'Google Fonts' in an HTML page generated by 'shiny' or 'R Markdown'.
At the first request, the font files will be downloaded and stored in a cache on the
user's machine, thus avoiding many useless downloads or allowing to work with
these fonts afterwards without an Internet connection, in a docker image for example.
See <code><a href="#topic+fonts_cache_dir">fonts_cache_dir()</a></code>.
</p>
<p>The server delivering the font files should not be too busy. That's
why a one second pause is added after each download to respect the server's
limits. This time can be set with the option <code>GFONTS_DOWNLOAD_SLEEPTIME</code> which
must be a number of seconds.
</p>


<h3>Value</h3>

<p>the 'shell' or 'PowerShell' command as a string
</p>


<h3>See Also</h3>

<p>Other functions for font management: 
<code><a href="#topic+addGFontHtmlDependency">addGFontHtmlDependency</a>()</code>,
<code><a href="#topic+fonts_cache_dir">fonts_cache_dir</a>()</code>,
<code><a href="#topic+gfontHtmlDependency">gfontHtmlDependency</a>()</code>,
<code><a href="#topic+installed_gfonts">installed_gfonts</a>()</code>,
<code><a href="#topic+liberationsansHtmlDependency">liberationsansHtmlDependency</a>()</code>,
<code><a href="#topic+register_gfont">register_gfont</a>()</code>,
<code><a href="#topic+register_liberationsans">register_liberationsans</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
if (curl::has_internet()) {
  dummy_setup()
  install_gfont_script(family = "Roboto", platform = "macos")
}

## End(Not run)
</code></pre>

<hr>
<h2 id='installed_gfonts'>List installed 'Google Fonts'</h2><span id='topic+installed_gfonts'></span>

<h3>Description</h3>

<p>List installed 'Google Fonts' that can be
found in the user cache directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>installed_gfonts()
</code></pre>


<h3>Value</h3>

<p>families names as a character vector
</p>


<h3>See Also</h3>

<p>Other functions for font management: 
<code><a href="#topic+addGFontHtmlDependency">addGFontHtmlDependency</a>()</code>,
<code><a href="#topic+fonts_cache_dir">fonts_cache_dir</a>()</code>,
<code><a href="#topic+gfontHtmlDependency">gfontHtmlDependency</a>()</code>,
<code><a href="#topic+install_gfont_script">install_gfont_script</a>()</code>,
<code><a href="#topic+liberationsansHtmlDependency">liberationsansHtmlDependency</a>()</code>,
<code><a href="#topic+register_gfont">register_gfont</a>()</code>,
<code><a href="#topic+register_liberationsans">register_liberationsans</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
if (curl::has_internet()) {
  dummy_setup()
  register_gfont(family = "Roboto")
  installed_gfonts()
}

## End(Not run)
</code></pre>

<hr>
<h2 id='liberationsansHtmlDependency'>'Liberation Sans' Font HTML dependency</h2><span id='topic+liberationsansHtmlDependency'></span>

<h3>Description</h3>

<p>Create an HTML dependency ready
to be used in 'Shiny' or 'R Markdown' with
'Liberation Sans' Font.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>liberationsansHtmlDependency()
</code></pre>


<h3>See Also</h3>

<p><code><a href="#topic+gfontHtmlDependency">gfontHtmlDependency()</a></code>
</p>
<p>Other functions for font management: 
<code><a href="#topic+addGFontHtmlDependency">addGFontHtmlDependency</a>()</code>,
<code><a href="#topic+fonts_cache_dir">fonts_cache_dir</a>()</code>,
<code><a href="#topic+gfontHtmlDependency">gfontHtmlDependency</a>()</code>,
<code><a href="#topic+install_gfont_script">install_gfont_script</a>()</code>,
<code><a href="#topic+installed_gfonts">installed_gfonts</a>()</code>,
<code><a href="#topic+register_gfont">register_gfont</a>()</code>,
<code><a href="#topic+register_liberationsans">register_liberationsans</a>()</code>
</p>

<hr>
<h2 id='m_str_extents'>Compute string extents for a vector of string.</h2><span id='topic+m_str_extents'></span>

<h3>Description</h3>

<p>For each <code>x</code> element, determines the width and height of a bounding box that's big enough
to (just) enclose the provided text. Unit is pixel.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>m_str_extents(
  x,
  fontname = "sans",
  fontsize = 10,
  bold = FALSE,
  italic = FALSE,
  fontfile = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="m_str_extents_+3A_x">x</code></td>
<td>
<p>Character vector of strings to measure</p>
</td></tr>
<tr><td><code id="m_str_extents_+3A_fontname">fontname</code></td>
<td>
<p>Font name. A vector of character to match with x.</p>
</td></tr>
<tr><td><code id="m_str_extents_+3A_fontsize">fontsize</code></td>
<td>
<p>Font size. A vector of numeric to match with x.</p>
</td></tr>
<tr><td><code id="m_str_extents_+3A_bold">bold</code>, <code id="m_str_extents_+3A_italic">italic</code></td>
<td>
<p>Is text bold/italic?. A vector of logical to match with x.</p>
</td></tr>
<tr><td><code id="m_str_extents_+3A_fontfile">fontfile</code></td>
<td>
<p>Font file. A vector of character to match with x.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
# The first run can be slow when font caches are missing
# as font files are then being scanned to build those font caches.
m_str_extents(letters, fontsize = 1:26)
m_str_extents(letters[1:3],
  bold = c(TRUE, FALSE, TRUE),
  italic = c(FALSE, TRUE, TRUE),
  fontname = c("sans", "sans", "sans") )

</code></pre>

<hr>
<h2 id='match_family'>Find best family match with systemfonts</h2><span id='topic+match_family'></span>

<h3>Description</h3>

<p><code>match_family()</code> returns the best font family match.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>match_family(font = "sans", bold = TRUE, italic = TRUE, debug = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="match_family_+3A_font">font</code></td>
<td>
<p>family or face to match.</p>
</td></tr>
<tr><td><code id="match_family_+3A_bold">bold</code></td>
<td>
<p>Wheter to match a font featuring a <code>bold</code> face.</p>
</td></tr>
<tr><td><code id="match_family_+3A_italic">italic</code></td>
<td>
<p>Wheter to match a font featuring an <code>italic</code> face.</p>
</td></tr>
<tr><td><code id="match_family_+3A_debug">debug</code></td>
<td>
<p>deprecated</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>match_family("sans")
match_family("serif")
</code></pre>

<hr>
<h2 id='raster_str'>Draw/preview a raster into a string</h2><span id='topic+raster_str'></span><span id='topic+raster_view'></span>

<h3>Description</h3>

<p><code>raster_view</code> is a helper function for testing. It uses <code>htmltools</code>
to render a png as an image with base64 encoded data image.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>raster_str(x, width = 480, height = 480, interpolate = FALSE)

raster_view(code)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="raster_str_+3A_x">x</code></td>
<td>
<p>A raster object</p>
</td></tr>
<tr><td><code id="raster_str_+3A_width">width</code>, <code id="raster_str_+3A_height">height</code></td>
<td>
<p>Width and height in pixels.</p>
</td></tr>
<tr><td><code id="raster_str_+3A_interpolate">interpolate</code></td>
<td>
<p>A logical value indicating whether to linearly
interpolate the image.</p>
</td></tr>
<tr><td><code id="raster_str_+3A_code">code</code></td>
<td>
<p>base64 code of a raster</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>r &lt;- as.raster(matrix(hcl(0, 80, seq(50, 80, 10)),
 nrow = 4, ncol = 5))
code &lt;- raster_str(r, width = 50, height = 50)
if (interactive() &amp;&amp; require("htmltools")) {
  raster_view(code = code)
}
</code></pre>

<hr>
<h2 id='raster_write'>Draw/preview a raster to a png file</h2><span id='topic+raster_write'></span>

<h3>Description</h3>

<p>Draw/preview a raster to a png file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>raster_write(x, path, width = 480, height = 480, interpolate = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="raster_write_+3A_x">x</code></td>
<td>
<p>A raster object</p>
</td></tr>
<tr><td><code id="raster_write_+3A_path">path</code></td>
<td>
<p>name of the file to create</p>
</td></tr>
<tr><td><code id="raster_write_+3A_width">width</code>, <code id="raster_write_+3A_height">height</code></td>
<td>
<p>Width and height in pixels.</p>
</td></tr>
<tr><td><code id="raster_write_+3A_interpolate">interpolate</code></td>
<td>
<p>A logical value indicating whether to linearly
interpolate the image.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>r &lt;- as.raster(matrix(hcl(0, 80, seq(50, 80, 10)),
 nrow = 4, ncol = 5))
filepng &lt;- tempfile(fileext = ".png")
raster_write(x = r, path = filepng, width = 50, height = 50)
</code></pre>

<hr>
<h2 id='register_gfont'>Register a 'Google Fonts'</h2><span id='topic+register_gfont'></span>

<h3>Description</h3>

<p>Register a font from 'Google Fonts' so that it can be used
with devices using the 'systemfonts' package, i.e. the 'flextable'
package and graphic outputs generated with the 'ragg', 'svglite'
and 'ggiraph' packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>register_gfont(family = "Open Sans", subset = c("latin", "latin-ext"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="register_gfont_+3A_family">family</code></td>
<td>
<p>family name of a 'Google Fonts', for example, &quot;Open Sans&quot;, &quot;Roboto&quot;,
&quot;Fira Code&quot; or &quot;Fira Sans Condensed&quot;. Complete list is available with the
following command:
</p>
<div class="sourceCode"><pre>gfonts::get_all_fonts()$family |&gt;
  unlist() |&gt;
  unique() |&gt;
  sort()
</pre></div></td></tr>
<tr><td><code id="register_gfont_+3A_subset">subset</code></td>
<td>
<p>font subset, a character vector, it defaults to only &quot;latin&quot; and
&quot;latin-ext&quot; and can contains values such as &quot;greek&quot;, &quot;emoji&quot;, &quot;chinese-traditional&quot;,
</p>
<p>Run the following code to get a complete list:
</p>
<div class="sourceCode"><pre>gfonts::get_all_fonts()$subsets |&gt; unlist() |&gt; unique() |&gt; sort()
</pre></div></td></tr>
</table>


<h3>Details</h3>

<p>It allows users to use fonts from 'Google Fonts' in an HTML page generated by 'shiny' or 'R Markdown'.
At the first request, the font files will be downloaded and stored in a cache on the
user's machine, thus avoiding many useless downloads or allowing to work with
these fonts afterwards without an Internet connection, in a docker image for example.
See <code><a href="#topic+fonts_cache_dir">fonts_cache_dir()</a></code>.
</p>
<p>The server delivering the font files should not be too busy. That's
why a one second pause is added after each download to respect the server's
limits. This time can be set with the option <code>GFONTS_DOWNLOAD_SLEEPTIME</code> which
must be a number of seconds.
</p>


<h3>Value</h3>

<p>TRUE if the operation went ok.
</p>


<h3>See Also</h3>

<p>Other functions for font management: 
<code><a href="#topic+addGFontHtmlDependency">addGFontHtmlDependency</a>()</code>,
<code><a href="#topic+fonts_cache_dir">fonts_cache_dir</a>()</code>,
<code><a href="#topic+gfontHtmlDependency">gfontHtmlDependency</a>()</code>,
<code><a href="#topic+install_gfont_script">install_gfont_script</a>()</code>,
<code><a href="#topic+installed_gfonts">installed_gfonts</a>()</code>,
<code><a href="#topic+liberationsansHtmlDependency">liberationsansHtmlDependency</a>()</code>,
<code><a href="#topic+register_liberationsans">register_liberationsans</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
if (curl::has_internet()) {
  dummy_setup()
  register_gfont(family = "Roboto")
}

## End(Not run)
</code></pre>

<hr>
<h2 id='register_liberationsans'>Register font 'Liberation Sans'</h2><span id='topic+register_liberationsans'></span>

<h3>Description</h3>

<p>Register font 'Liberation Sans' so that it can be used
with devices using the 'systemfonts' package, i.e. the 'flextable'
package and graphic outputs generated with the 'ragg', 'svglite'
and 'ggiraph' packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>register_liberationsans()
</code></pre>


<h3>Value</h3>

<p>TRUE if the operation went ok.
</p>


<h3>See Also</h3>

<p>Other functions for font management: 
<code><a href="#topic+addGFontHtmlDependency">addGFontHtmlDependency</a>()</code>,
<code><a href="#topic+fonts_cache_dir">fonts_cache_dir</a>()</code>,
<code><a href="#topic+gfontHtmlDependency">gfontHtmlDependency</a>()</code>,
<code><a href="#topic+install_gfont_script">install_gfont_script</a>()</code>,
<code><a href="#topic+installed_gfonts">installed_gfonts</a>()</code>,
<code><a href="#topic+liberationsansHtmlDependency">liberationsansHtmlDependency</a>()</code>,
<code><a href="#topic+register_gfont">register_gfont</a>()</code>
</p>

<hr>
<h2 id='set_dummy_conf'>Set and unset a minimalistic Fontconfig configuration</h2><span id='topic+set_dummy_conf'></span><span id='topic+unset_dummy_conf'></span>

<h3>Description</h3>

<p>Set and unset a minimalistic Fontconfig configuration
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_dummy_conf()

unset_dummy_conf()
</code></pre>


<h3>Note</h3>

<p>Fontconfig is not used anymore and these functions will be deprecated
in the next release.
</p>

<hr>
<h2 id='str_extents'>Compute string extents.</h2><span id='topic+str_extents'></span>

<h3>Description</h3>

<p>Determines the width and height of a bounding box that's big enough
to (just) enclose the provided text.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>str_extents(
  x,
  fontname = "sans",
  fontsize = 12,
  bold = FALSE,
  italic = FALSE,
  fontfile = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="str_extents_+3A_x">x</code></td>
<td>
<p>Character vector of strings to measure</p>
</td></tr>
<tr><td><code id="str_extents_+3A_fontname">fontname</code></td>
<td>
<p>Font name</p>
</td></tr>
<tr><td><code id="str_extents_+3A_fontsize">fontsize</code></td>
<td>
<p>Font size</p>
</td></tr>
<tr><td><code id="str_extents_+3A_bold">bold</code>, <code id="str_extents_+3A_italic">italic</code></td>
<td>
<p>Is text bold/italic?</p>
</td></tr>
<tr><td><code id="str_extents_+3A_fontfile">fontfile</code></td>
<td>
<p>Font file</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>str_extents(letters)
str_extents("Hello World!", bold = TRUE, italic = FALSE,
  fontname = "sans", fontsize = 12)
</code></pre>

<hr>
<h2 id='str_metrics'>Get font metrics for a string.</h2><span id='topic+str_metrics'></span>

<h3>Description</h3>

<p>Get font metrics for a string.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>str_metrics(
  x,
  fontname = "sans",
  fontsize = 12,
  bold = FALSE,
  italic = FALSE,
  fontfile = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="str_metrics_+3A_x">x</code></td>
<td>
<p>Character vector of strings to measure</p>
</td></tr>
<tr><td><code id="str_metrics_+3A_fontname">fontname</code></td>
<td>
<p>Font name</p>
</td></tr>
<tr><td><code id="str_metrics_+3A_fontsize">fontsize</code></td>
<td>
<p>Font size</p>
</td></tr>
<tr><td><code id="str_metrics_+3A_bold">bold</code>, <code id="str_metrics_+3A_italic">italic</code></td>
<td>
<p>Is text bold/italic?</p>
</td></tr>
<tr><td><code id="str_metrics_+3A_fontfile">fontfile</code></td>
<td>
<p>Font file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named numeric vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>str_metrics("Hello World!")
</code></pre>

<hr>
<h2 id='sys_fonts'>List fonts for 'systemfonts'.</h2><span id='topic+sys_fonts'></span>

<h3>Description</h3>

<p>List system and registryfonts details into a data.frame
containing columns foundry, family, file, slant and weight.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sys_fonts()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>sys_fonts()
</code></pre>

<hr>
<h2 id='version_freetype'>Version numbers of C libraries</h2><span id='topic+version_freetype'></span><span id='topic+version_cairo'></span>

<h3>Description</h3>

<p><code>version_cairo()</code> and <code>version_freetype()</code> return the
runtime version. These helpers return version objects as with
<code><a href="utils.html#topic+packageVersion">packageVersion</a>()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>version_freetype()

version_cairo()
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
