<!DOCTYPE html><html lang="en"><head><title>Help for package bundle</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {bundle}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#bundle_description'><p>bundle: Serialize Model Objects With A Consistent Interface</p></a></li>
<li><a href='#bundle'><p>Bundling</p></a></li>
<li><a href='#bundle_constr'><p>Internal Functions</p></a></li>
<li><a href='#bundle.bart'><p>Bundle a <code>bart</code> object</p></a></li>
<li><a href='#bundle.H2OAutoML'><p>Bundle an <code>h2o</code> object</p></a></li>
<li><a href='#bundle.keras.engine.training.Model'><p>Bundle a <code>keras</code> object</p></a></li>
<li><a href='#bundle.luz_module_fitted'><p>Bundle a <code>luz_module_fitted</code> object</p></a></li>
<li><a href='#bundle.model_fit'><p>Bundle a parsnip <code>model_fit</code> object</p></a></li>
<li><a href='#bundle.model_stack'><p>Bundle a tidymodels <code>model_stack</code> object</p></a></li>
<li><a href='#bundle.recipe'><p>Bundle a <code>recipe</code> object</p></a></li>
<li><a href='#bundle.step_umap'><p>Bundle a <code>step_umap</code> object</p></a></li>
<li><a href='#bundle.train'><p>Bundle a caret <code>train</code> object</p></a></li>
<li><a href='#bundle.workflow'><p>Bundle a tidymodels <code>workflow</code> object</p></a></li>
<li><a href='#bundle.xgb.Booster'><p>Bundle an <code>xgb.Booster</code> object</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Serialize Model Objects with a Consistent Interface</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Typically, models in 'R' exist in memory and can be saved via
    regular 'R' serialization. However, some models store information in
    locations that cannot be saved using 'R' serialization alone. The goal
    of 'bundle' is to provide a common interface to capture this
    information, situate it within a portable object, and restore it for
    use in new settings.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/rstudio/bundle">https://github.com/rstudio/bundle</a>,
<a href="https://rstudio.github.io/bundle/">https://rstudio.github.io/bundle/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/rstudio/bundle/issues">https://github.com/rstudio/bundle/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6)</td>
</tr>
<tr>
<td>Imports:</td>
<td>glue, purrr, rlang, utils, withr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>bonsai, butcher, callr, caret, covr, dbarts, embed, h2o,
keras, kernlab, knitr, luz, MASS, modeldata, parsnip, recipes,
renv, rmarkdown, stacks, tensorflow, testthat (&ge; 3.0.0),
torch, torchvision, uwot, vetiver, workflows, xgboost (&ge;
1.6.0.1)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>tidyverse/tidytemplate</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-11-12 02:39:09 UTC; juliasilge</td>
</tr>
<tr>
<td>Author:</td>
<td>Julia Silge <a href="https://orcid.org/0000-0002-3671-836X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Simon Couch [aut],
  Qiushi Yan [aut],
  Max Kuhn [aut],
  Posit Software, PBC [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Julia Silge &lt;julia.silge@posit.co&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-11-12 10:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='bundle_description'>bundle: Serialize Model Objects With A Consistent Interface</h2><span id='topic+bundle_description'></span><span id='topic+bundle-package'></span>

<h3>Description</h3>

<p>Typically, models in 'R' exist in memory and can be saved via regular 'R' serialization. However, some models store information in locations that cannot be saved using 'R' serialization alone. The goal of 'bundle' is to provide a common interface to capture this information, situate it within a portable object, and restore it for use in new settings.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Julia Silge <a href="mailto:julia.silge@posit.co">julia.silge@posit.co</a> (<a href="https://orcid.org/0000-0002-3671-836X">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Simon Couch <a href="mailto:simonpatrickcouch@gmail.com">simonpatrickcouch@gmail.com</a>
</p>
</li>
<li><p> Qiushi Yan <a href="mailto:qiushi.yann@gmail.com">qiushi.yann@gmail.com</a>
</p>
</li>
<li><p> Max Kuhn <a href="mailto:max@posit.co">max@posit.co</a>
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Posit Software, PBC [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/rstudio/bundle">https://github.com/rstudio/bundle</a>
</p>
</li>
<li> <p><a href="https://rstudio.github.io/bundle/">https://rstudio.github.io/bundle/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/rstudio/bundle/issues">https://github.com/rstudio/bundle/issues</a>
</p>
</li></ul>


<hr>
<h2 id='bundle'>Bundling</h2><span id='topic+bundle'></span><span id='topic+unbundle'></span>

<h3>Description</h3>

<p><code>bundle()</code> methods provide a consistent interface to serialization
methods for statistical model objects. The created bundle can be saved,
then re-loaded and <code>unbundle()</code>d in a new R session for use in prediction.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bundle(x, ...)

unbundle(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bundle_+3A_x">x</code></td>
<td>
<p>A model object to bundle.</p>
</td></tr>
<tr><td><code id="bundle_+3A_...">...</code></td>
<td>
<p>Additional arguments to bundle methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A bundle object with subclass referencing the modeling function. If a bundle method is not defined for the supplied object, <code>bundle.default</code> is the identity function.
</p>
<p>Bundles are a list subclass with two components:
</p>
<table role = "presentation">
<tr><td><code>object</code></td>
<td>
<p>An R object. Gives the output of native serialization
methods from the model-supplying package, sometimes with additional
classes or attributes that aid portability. This is often
a <a href="base.html#topic+raw">raw</a> object.</p>
</td></tr>
<tr><td><code>situate</code></td>
<td>
<p>A function. The <code>situate()</code> function is defined when
<code><a href="#topic+bundle">bundle()</a></code> is called, though is a loose analogue of an <code><a href="#topic+unbundle">unbundle()</a></code> S3
method for that object. Since the function is defined on <code><a href="#topic+bundle">bundle()</a></code>, it
has access to references and dependency information that can
be saved alongside the <code>object</code> component. Calling <code><a href="#topic+unbundle">unbundle()</a></code> on a
bundled object <code>x</code> calls <code>x$situate(x$object)</code>, returning the
unserialized version of <code>object</code>. <code>situate()</code> will also restore needed
references, such as server instances and environmental variables.</p>
</td></tr>
</table>
<p>Bundles are R objects that represent a &quot;standalone&quot; version of their
analogous model object. Thus, bundles are ready for saving to a file; saving
with <code><a href="base.html#topic+readRDS">base::saveRDS()</a></code> is our recommended serialization strategy for bundles,
unless documented otherwise for a specific method.
</p>
<p>To restore the original model object <code>x</code> in a new environment, load its
bundle with <code><a href="base.html#topic+readRDS">base::readRDS()</a></code> and run <code><a href="#topic+unbundle">unbundle()</a></code> on it. The output
of <code><a href="#topic+unbundle">unbundle()</a></code> is a model object that is ready to <code><a href="stats.html#topic+predict">predict()</a></code> on new data,
and other restored functionality (like plotting or summarizing) is supported
as a side effect only.
</p>
<p>The bundle package wraps native serialization methods from model-supplying
packages. Between versions, those model-supplying packages may change their
native serialization methods, possibly introducing problems with re-loading
objects serialized with previous package versions. The bundle package does
not provide checks for these sorts of changes, and ought to be used in
conjunction with tooling for managing and monitoring model environments
like <a href="vetiver.html#topic+vetiver-package">vetiver</a> or <a href="renv.html#topic+renv-package">renv</a>.
</p>
<p>See <code>vignette("bundle")</code> for more information on bundling and its motivation.
</p>


<h3>See Also</h3>

<p>Other bundlers: 
<code><a href="#topic+bundle.H2OAutoML">bundle.H2OAutoML</a>()</code>,
<code><a href="#topic+bundle.bart">bundle.bart</a>()</code>,
<code><a href="#topic+bundle.keras.engine.training.Model">bundle.keras.engine.training.Model</a>()</code>,
<code><a href="#topic+bundle.luz_module_fitted">bundle.luz_module_fitted</a>()</code>,
<code><a href="#topic+bundle.model_fit">bundle.model_fit</a>()</code>,
<code><a href="#topic+bundle.model_stack">bundle.model_stack</a>()</code>,
<code><a href="#topic+bundle.recipe">bundle.recipe</a>()</code>,
<code><a href="#topic+bundle.step_umap">bundle.step_umap</a>()</code>,
<code><a href="#topic+bundle.train">bundle.train</a>()</code>,
<code><a href="#topic+bundle.workflow">bundle.workflow</a>()</code>,
<code><a href="#topic+bundle.xgb.Booster">bundle.xgb.Booster</a>()</code>
</p>

<hr>
<h2 id='bundle_constr'>Internal Functions</h2><span id='topic+bundle_constr'></span><span id='topic+situate_constr'></span><span id='topic+swap_element'></span>

<h3>Description</h3>

<p>These functions are not user-facing and are only exported for developer
extensions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bundle_constr(object, situate, desc_class)

situate_constr(fn)

swap_element(x, ...)
</code></pre>


<h3>Value</h3>

<p>The two <code style="white-space: pre;">&#8288;_constr()&#8288;</code> functions are constructors that return a bundle
and a situater, respectively. <code>swap_element()</code> returns <code>x</code> after swapping
out the specified element.
</p>

<hr>
<h2 id='bundle.bart'>Bundle a <code>bart</code> object</h2><span id='topic+bundle.bart'></span>

<h3>Description</h3>

<p>Bundling a model prepares it to be saved to a file and later
restored for prediction in a new R session. See the 'Value' section for
more information on bundles and their usage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bart'
bundle(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bundle.bart_+3A_x">x</code></td>
<td>
<p>A <code>bart</code> object returned from <code><a href="dbarts.html#topic+bart">dbarts::bart()</a></code>. Notably, this ought
not to be the output of <code><a href="parsnip.html#topic+bart">parsnip::bart()</a></code>.</p>
</td></tr>
<tr><td><code id="bundle.bart_+3A_...">...</code></td>
<td>
<p>Not used in this bundler and included for compatibility with
the generic only. Additional arguments passed to this method will return
an error.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A bundle object with subclass <code>bundled_bart</code>.
</p>
<p>Bundles are a list subclass with two components:
</p>
<table role = "presentation">
<tr><td><code>object</code></td>
<td>
<p>An R object. Gives the output of native serialization
methods from the model-supplying package, sometimes with additional
classes or attributes that aid portability. This is often
a <a href="base.html#topic+raw">raw</a> object.</p>
</td></tr>
<tr><td><code>situate</code></td>
<td>
<p>A function. The <code>situate()</code> function is defined when
<code><a href="#topic+bundle">bundle()</a></code> is called, though is a loose analogue of an <code><a href="#topic+unbundle">unbundle()</a></code> S3
method for that object. Since the function is defined on <code><a href="#topic+bundle">bundle()</a></code>, it
has access to references and dependency information that can
be saved alongside the <code>object</code> component. Calling <code><a href="#topic+unbundle">unbundle()</a></code> on a
bundled object <code>x</code> calls <code>x$situate(x$object)</code>, returning the
unserialized version of <code>object</code>. <code>situate()</code> will also restore needed
references, such as server instances and environmental variables.</p>
</td></tr>
</table>
<p>Bundles are R objects that represent a &quot;standalone&quot; version of their
analogous model object. Thus, bundles are ready for saving to a file; saving
with <code><a href="base.html#topic+readRDS">base::saveRDS()</a></code> is our recommended serialization strategy for bundles,
unless documented otherwise for a specific method.
</p>
<p>To restore the original model object <code>x</code> in a new environment, load its
bundle with <code><a href="base.html#topic+readRDS">base::readRDS()</a></code> and run <code><a href="#topic+unbundle">unbundle()</a></code> on it. The output
of <code><a href="#topic+unbundle">unbundle()</a></code> is a model object that is ready to <code><a href="stats.html#topic+predict">predict()</a></code> on new data,
and other restored functionality (like plotting or summarizing) is supported
as a side effect only.
</p>
<p>The bundle package wraps native serialization methods from model-supplying
packages. Between versions, those model-supplying packages may change their
native serialization methods, possibly introducing problems with re-loading
objects serialized with previous package versions. The bundle package does
not provide checks for these sorts of changes, and ought to be used in
conjunction with tooling for managing and monitoring model environments
like <a href="vetiver.html#topic+vetiver-package">vetiver</a> or <a href="renv.html#topic+renv-package">renv</a>.
</p>
<p>See <code>vignette("bundle")</code> for more information on bundling and its motivation.
</p>


<h3>bundle and butcher</h3>

<p>The <a href="https://butcher.tidymodels.org/">butcher</a> package allows you to remove
parts of a fitted model object that are not needed for prediction.
</p>
<p>This bundle method is compatible with pre-butchering. That is, for a
fitted model <code>x</code>, you can safely call:
</p>
<div class="sourceCode"><pre>res &lt;-
  x %&gt;%
  butcher() %&gt;%
  bundle()
</pre></div>
<p>and predict with the output of <code>unbundle(res)</code> in a new R session.
</p>


<h3>See Also</h3>

<p>Other bundlers: 
<code><a href="#topic+bundle">bundle</a>()</code>,
<code><a href="#topic+bundle.H2OAutoML">bundle.H2OAutoML</a>()</code>,
<code><a href="#topic+bundle.keras.engine.training.Model">bundle.keras.engine.training.Model</a>()</code>,
<code><a href="#topic+bundle.luz_module_fitted">bundle.luz_module_fitted</a>()</code>,
<code><a href="#topic+bundle.model_fit">bundle.model_fit</a>()</code>,
<code><a href="#topic+bundle.model_stack">bundle.model_stack</a>()</code>,
<code><a href="#topic+bundle.recipe">bundle.recipe</a>()</code>,
<code><a href="#topic+bundle.step_umap">bundle.step_umap</a>()</code>,
<code><a href="#topic+bundle.train">bundle.train</a>()</code>,
<code><a href="#topic+bundle.workflow">bundle.workflow</a>()</code>,
<code><a href="#topic+bundle.xgb.Booster">bundle.xgb.Booster</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# fit model and bundle ------------------------------------------------
library(dbarts)

mtcars$vs &lt;- as.factor(mtcars$vs)

set.seed(1)
fit &lt;- dbarts::bart(mtcars[c("disp", "hp")], mtcars$vs, keeptrees = TRUE)

fit_bundle &lt;- bundle(fit)

# then, after saveRDS + readRDS or passing to a new session ----------
fit_unbundled &lt;- unbundle(fit_bundle)

fit_unbundled_preds &lt;- predict(fit_unbundled, mtcars)

</code></pre>

<hr>
<h2 id='bundle.H2OAutoML'>Bundle an <code>h2o</code> object</h2><span id='topic+bundle.H2OAutoML'></span><span id='topic+bundle.H2OMultinomialModel'></span><span id='topic+bundle.H2OBinomialModel'></span><span id='topic+bundle.H2ORegressionModel'></span>

<h3>Description</h3>

<p>Bundling a model prepares it to be saved to a file and later
restored for prediction in a new R session. See the 'Value' section for
more information on bundles and their usage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'H2OAutoML'
bundle(x, id = NULL, n = NULL, ...)

## S3 method for class 'H2OMultinomialModel'
bundle(x, ...)

## S3 method for class 'H2OBinomialModel'
bundle(x, ...)

## S3 method for class 'H2ORegressionModel'
bundle(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bundle.H2OAutoML_+3A_x">x</code></td>
<td>
<p>An object returned from modeling functions in the <a href="h2o.html#topic+h2o-package">h2o</a>
package.</p>
</td></tr>
<tr><td><code id="bundle.H2OAutoML_+3A_id">id</code></td>
<td>
<p>A single character. The <code>model_id</code> entry in the leaderboard.
Applies to AutoML output only. Supply only one of this argument or
<code>n</code>.</p>
</td></tr>
<tr><td><code id="bundle.H2OAutoML_+3A_n">n</code></td>
<td>
<p>An integer giving the position in the leaderboard of the model
to bundle. Applies to AutoML output only. Will be ignored if <code>id</code> is
supplied.</p>
</td></tr>
<tr><td><code id="bundle.H2OAutoML_+3A_...">...</code></td>
<td>
<p>Not used in this bundler and included for compatibility with
the generic only. Additional arguments passed to this method will return
an error.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A bundle object with subclass <code>bundled_h2o</code>.
</p>
<p>Bundles are a list subclass with two components:
</p>
<table role = "presentation">
<tr><td><code>object</code></td>
<td>
<p>An R object. Gives the output of native serialization
methods from the model-supplying package, sometimes with additional
classes or attributes that aid portability. This is often
a <a href="base.html#topic+raw">raw</a> object.</p>
</td></tr>
<tr><td><code>situate</code></td>
<td>
<p>A function. The <code>situate()</code> function is defined when
<code><a href="#topic+bundle">bundle()</a></code> is called, though is a loose analogue of an <code><a href="#topic+unbundle">unbundle()</a></code> S3
method for that object. Since the function is defined on <code><a href="#topic+bundle">bundle()</a></code>, it
has access to references and dependency information that can
be saved alongside the <code>object</code> component. Calling <code><a href="#topic+unbundle">unbundle()</a></code> on a
bundled object <code>x</code> calls <code>x$situate(x$object)</code>, returning the
unserialized version of <code>object</code>. <code>situate()</code> will also restore needed
references, such as server instances and environmental variables.</p>
</td></tr>
</table>
<p>Bundles are R objects that represent a &quot;standalone&quot; version of their
analogous model object. Thus, bundles are ready for saving to a file; saving
with <code><a href="base.html#topic+readRDS">base::saveRDS()</a></code> is our recommended serialization strategy for bundles,
unless documented otherwise for a specific method.
</p>
<p>To restore the original model object <code>x</code> in a new environment, load its
bundle with <code><a href="base.html#topic+readRDS">base::readRDS()</a></code> and run <code><a href="#topic+unbundle">unbundle()</a></code> on it. The output
of <code><a href="#topic+unbundle">unbundle()</a></code> is a model object that is ready to <code><a href="stats.html#topic+predict">predict()</a></code> on new data,
and other restored functionality (like plotting or summarizing) is supported
as a side effect only.
</p>
<p>The bundle package wraps native serialization methods from model-supplying
packages. Between versions, those model-supplying packages may change their
native serialization methods, possibly introducing problems with re-loading
objects serialized with previous package versions. The bundle package does
not provide checks for these sorts of changes, and ought to be used in
conjunction with tooling for managing and monitoring model environments
like <a href="vetiver.html#topic+vetiver-package">vetiver</a> or <a href="renv.html#topic+renv-package">renv</a>.
</p>
<p>See <code>vignette("bundle")</code> for more information on bundling and its motivation.
</p>


<h3>See Also</h3>

<p>These methods wrap <code><a href="h2o.html#topic+h2o.save_mojo">h2o::h2o.save_mojo()</a></code> and
<code><a href="h2o.html#topic+h2o.saveModel">h2o::h2o.saveModel()</a></code>.
</p>
<p>Other bundlers: 
<code><a href="#topic+bundle">bundle</a>()</code>,
<code><a href="#topic+bundle.bart">bundle.bart</a>()</code>,
<code><a href="#topic+bundle.keras.engine.training.Model">bundle.keras.engine.training.Model</a>()</code>,
<code><a href="#topic+bundle.luz_module_fitted">bundle.luz_module_fitted</a>()</code>,
<code><a href="#topic+bundle.model_fit">bundle.model_fit</a>()</code>,
<code><a href="#topic+bundle.model_stack">bundle.model_stack</a>()</code>,
<code><a href="#topic+bundle.recipe">bundle.recipe</a>()</code>,
<code><a href="#topic+bundle.step_umap">bundle.step_umap</a>()</code>,
<code><a href="#topic+bundle.train">bundle.train</a>()</code>,
<code><a href="#topic+bundle.workflow">bundle.workflow</a>()</code>,
<code><a href="#topic+bundle.xgb.Booster">bundle.xgb.Booster</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# fit model and bundle ------------------------------------------------
library(h2o)

set.seed(1)

h2o.init()

cars_h2o &lt;- as.h2o(mtcars)

cars_fit &lt;-
  h2o.glm(
    x = colnames(cars_h2o)[2:11],
    y = colnames(cars_h2o)[1],
    training_frame = cars_h2o
  )

cars_bundle &lt;- bundle(cars_fit)

# then, after saveRDS + readRDS or passing to a new session ----------
cars_unbundled &lt;- unbundle(cars_fit)

predict(cars_unbundled, cars_h2o[, 2:11])

h2o.shutdown(prompt = FALSE)

</code></pre>

<hr>
<h2 id='bundle.keras.engine.training.Model'>Bundle a <code>keras</code> object</h2><span id='topic+bundle.keras.engine.training.Model'></span>

<h3>Description</h3>

<p>Bundling a model prepares it to be saved to a file and later
restored for prediction in a new R session. See the 'Value' section for
more information on bundles and their usage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'keras.engine.training.Model'
bundle(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bundle.keras.engine.training.Model_+3A_x">x</code></td>
<td>
<p>An object returned from modeling functions in the
<a href="keras.html#topic+keras-package">keras</a> package.</p>
</td></tr>
<tr><td><code id="bundle.keras.engine.training.Model_+3A_...">...</code></td>
<td>
<p>Not used in this bundler and included for compatibility with
the generic only. Additional arguments passed to this method will return
an error.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This bundler does not currently support custom keras extensions,
such as use of a <code><a href="keras.html#topic+new-classes">keras::new_layer_class()</a></code> or custom metric function.
In such situations, consider using <code><a href="keras.html#topic+with_custom_object_scope">keras::with_custom_object_scope()</a></code>.
</p>


<h3>Value</h3>

<p>A bundle object with subclass <code>bundled_keras</code>.
</p>
<p>Bundles are a list subclass with two components:
</p>
<table role = "presentation">
<tr><td><code>object</code></td>
<td>
<p>An R object. Gives the output of native serialization
methods from the model-supplying package, sometimes with additional
classes or attributes that aid portability. This is often
a <a href="base.html#topic+raw">raw</a> object.</p>
</td></tr>
<tr><td><code>situate</code></td>
<td>
<p>A function. The <code>situate()</code> function is defined when
<code><a href="#topic+bundle">bundle()</a></code> is called, though is a loose analogue of an <code><a href="#topic+unbundle">unbundle()</a></code> S3
method for that object. Since the function is defined on <code><a href="#topic+bundle">bundle()</a></code>, it
has access to references and dependency information that can
be saved alongside the <code>object</code> component. Calling <code><a href="#topic+unbundle">unbundle()</a></code> on a
bundled object <code>x</code> calls <code>x$situate(x$object)</code>, returning the
unserialized version of <code>object</code>. <code>situate()</code> will also restore needed
references, such as server instances and environmental variables.</p>
</td></tr>
</table>
<p>Bundles are R objects that represent a &quot;standalone&quot; version of their
analogous model object. Thus, bundles are ready for saving to a file; saving
with <code><a href="base.html#topic+readRDS">base::saveRDS()</a></code> is our recommended serialization strategy for bundles,
unless documented otherwise for a specific method.
</p>
<p>To restore the original model object <code>x</code> in a new environment, load its
bundle with <code><a href="base.html#topic+readRDS">base::readRDS()</a></code> and run <code><a href="#topic+unbundle">unbundle()</a></code> on it. The output
of <code><a href="#topic+unbundle">unbundle()</a></code> is a model object that is ready to <code><a href="stats.html#topic+predict">predict()</a></code> on new data,
and other restored functionality (like plotting or summarizing) is supported
as a side effect only.
</p>
<p>The bundle package wraps native serialization methods from model-supplying
packages. Between versions, those model-supplying packages may change their
native serialization methods, possibly introducing problems with re-loading
objects serialized with previous package versions. The bundle package does
not provide checks for these sorts of changes, and ought to be used in
conjunction with tooling for managing and monitoring model environments
like <a href="vetiver.html#topic+vetiver-package">vetiver</a> or <a href="renv.html#topic+renv-package">renv</a>.
</p>
<p>See <code>vignette("bundle")</code> for more information on bundling and its motivation.
</p>


<h3>See Also</h3>

<p>This method wraps <code><a href="keras.html#topic+save_model_tf">keras::save_model_tf()</a></code> and
<code><a href="keras.html#topic+save_model_tf">keras::load_model_tf()</a></code>.
</p>
<p>Other bundlers: 
<code><a href="#topic+bundle">bundle</a>()</code>,
<code><a href="#topic+bundle.H2OAutoML">bundle.H2OAutoML</a>()</code>,
<code><a href="#topic+bundle.bart">bundle.bart</a>()</code>,
<code><a href="#topic+bundle.luz_module_fitted">bundle.luz_module_fitted</a>()</code>,
<code><a href="#topic+bundle.model_fit">bundle.model_fit</a>()</code>,
<code><a href="#topic+bundle.model_stack">bundle.model_stack</a>()</code>,
<code><a href="#topic+bundle.recipe">bundle.recipe</a>()</code>,
<code><a href="#topic+bundle.step_umap">bundle.step_umap</a>()</code>,
<code><a href="#topic+bundle.train">bundle.train</a>()</code>,
<code><a href="#topic+bundle.workflow">bundle.workflow</a>()</code>,
<code><a href="#topic+bundle.xgb.Booster">bundle.xgb.Booster</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# fit model and bundle ------------------------------------------------
library(keras)

set.seed(1)

mnist &lt;- dataset_mnist()
x_train &lt;- mnist$train$x
y_train &lt;- mnist$train$y
x_test &lt;- mnist$test$x
y_test &lt;- mnist$test$y

x_train &lt;- array_reshape(x_train, c(nrow(x_train), 784))
x_test &lt;- array_reshape(x_test, c(nrow(x_test), 784))

x_train &lt;- x_train / 255
x_test &lt;- x_test / 255

y_train &lt;- to_categorical(y_train, 10)
y_test &lt;- to_categorical(y_test, 10)

mod &lt;- keras_model_sequential()

mod %&gt;%
  layer_dense(units = 128, activation = 'relu', input_shape = c(784)) %&gt;%
  layer_dropout(rate = 0.4) %&gt;%
  layer_dense(units = 64, activation = 'relu') %&gt;%
  layer_dropout(rate = 0.3) %&gt;%
  layer_dense(units = 10, activation = 'softmax')

mod %&gt;% compile(
  loss = 'categorical_crossentropy',
  optimizer = optimizer_rmsprop(),
  metrics = c('accuracy')
)

mod %&gt;% fit(
  x_train, y_train,
  epochs = 5, batch_size = 128,
  validation_split = 0.2,
  verbose = 0
)

mod_bundle &lt;- bundle(mod)

# then, after saveRDS + readRDS or passing to a new session ----------
mod_unbundled &lt;- unbundle(mod_bundle)

predict(mod_unbundled, x_test)

</code></pre>

<hr>
<h2 id='bundle.luz_module_fitted'>Bundle a <code>luz_module_fitted</code> object</h2><span id='topic+bundle.luz_module_fitted'></span>

<h3>Description</h3>

<p>Bundling a model prepares it to be saved to a file and later
restored for prediction in a new R session. See the 'Value' section for
more information on bundles and their usage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'luz_module_fitted'
bundle(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bundle.luz_module_fitted_+3A_x">x</code></td>
<td>
<p>A <code>luz_module_fitted</code> object returned from
<code><a href="luz.html#topic+fit.luz_module_generator">luz::fit.luz_module_generator()</a></code>.</p>
</td></tr>
<tr><td><code id="bundle.luz_module_fitted_+3A_...">...</code></td>
<td>
<p>Not used in this bundler and included for compatibility with
the generic only. Additional arguments passed to this method will return
an error.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For now, bundling methods for torch are only available
via the luz package, &quot;a higher level API for torch providing
abstractions to allow for much less verbose training loops.&quot;
</p>


<h3>Value</h3>

<p>A bundle object with subclass <code>bundled_luz_module_fitted</code>.
</p>
<p>Bundles are a list subclass with two components:
</p>
<table role = "presentation">
<tr><td><code>object</code></td>
<td>
<p>An R object. Gives the output of native serialization
methods from the model-supplying package, sometimes with additional
classes or attributes that aid portability. This is often
a <a href="base.html#topic+raw">raw</a> object.</p>
</td></tr>
<tr><td><code>situate</code></td>
<td>
<p>A function. The <code>situate()</code> function is defined when
<code><a href="#topic+bundle">bundle()</a></code> is called, though is a loose analogue of an <code><a href="#topic+unbundle">unbundle()</a></code> S3
method for that object. Since the function is defined on <code><a href="#topic+bundle">bundle()</a></code>, it
has access to references and dependency information that can
be saved alongside the <code>object</code> component. Calling <code><a href="#topic+unbundle">unbundle()</a></code> on a
bundled object <code>x</code> calls <code>x$situate(x$object)</code>, returning the
unserialized version of <code>object</code>. <code>situate()</code> will also restore needed
references, such as server instances and environmental variables.</p>
</td></tr>
</table>
<p>Bundles are R objects that represent a &quot;standalone&quot; version of their
analogous model object. Thus, bundles are ready for saving to a file; saving
with <code><a href="base.html#topic+readRDS">base::saveRDS()</a></code> is our recommended serialization strategy for bundles,
unless documented otherwise for a specific method.
</p>
<p>To restore the original model object <code>x</code> in a new environment, load its
bundle with <code><a href="base.html#topic+readRDS">base::readRDS()</a></code> and run <code><a href="#topic+unbundle">unbundle()</a></code> on it. The output
of <code><a href="#topic+unbundle">unbundle()</a></code> is a model object that is ready to <code><a href="stats.html#topic+predict">predict()</a></code> on new data,
and other restored functionality (like plotting or summarizing) is supported
as a side effect only.
</p>
<p>The bundle package wraps native serialization methods from model-supplying
packages. Between versions, those model-supplying packages may change their
native serialization methods, possibly introducing problems with re-loading
objects serialized with previous package versions. The bundle package does
not provide checks for these sorts of changes, and ought to be used in
conjunction with tooling for managing and monitoring model environments
like <a href="vetiver.html#topic+vetiver-package">vetiver</a> or <a href="renv.html#topic+renv-package">renv</a>.
</p>
<p>See <code>vignette("bundle")</code> for more information on bundling and its motivation.
</p>


<h3>See Also</h3>

<p>This method wraps <code><a href="luz.html#topic+luz_save">luz::luz_save()</a></code> and <code><a href="luz.html#topic+luz_load">luz::luz_load()</a></code>.
</p>
<p>Other bundlers: 
<code><a href="#topic+bundle">bundle</a>()</code>,
<code><a href="#topic+bundle.H2OAutoML">bundle.H2OAutoML</a>()</code>,
<code><a href="#topic+bundle.bart">bundle.bart</a>()</code>,
<code><a href="#topic+bundle.keras.engine.training.Model">bundle.keras.engine.training.Model</a>()</code>,
<code><a href="#topic+bundle.model_fit">bundle.model_fit</a>()</code>,
<code><a href="#topic+bundle.model_stack">bundle.model_stack</a>()</code>,
<code><a href="#topic+bundle.recipe">bundle.recipe</a>()</code>,
<code><a href="#topic+bundle.step_umap">bundle.step_umap</a>()</code>,
<code><a href="#topic+bundle.train">bundle.train</a>()</code>,
<code><a href="#topic+bundle.workflow">bundle.workflow</a>()</code>,
<code><a href="#topic+bundle.xgb.Booster">bundle.xgb.Booster</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (torch::torch_is_installed()) {
# fit model and bundle ------------------------------------------------
library(torch)
library(torchvision)
library(luz)

set.seed(1)

# example adapted from luz pkgdown article "Autoencoder"
dir &lt;- tempdir()

mnist_dataset2 &lt;- torch::dataset(
  inherit = mnist_dataset,
  .getitem = function(i) {
    output &lt;- super$.getitem(i)
    output$y &lt;- output$x
    output
  }
)

train_ds &lt;- mnist_dataset2(
  dir,
  download = TRUE,
  transform = transform_to_tensor
)

test_ds &lt;- mnist_dataset2(
  dir,
  train = FALSE,
  transform = transform_to_tensor
)

train_dl &lt;- dataloader(train_ds, batch_size = 128, shuffle = TRUE)
test_dl &lt;- dataloader(test_ds, batch_size = 128)

net &lt;- nn_module(
  "Net",
  initialize = function() {
    self$encoder &lt;- nn_sequential(
      nn_conv2d(1, 6, kernel_size=5),
      nn_relu(),
      nn_conv2d(6, 16, kernel_size=5),
      nn_relu()
    )
    self$decoder &lt;- nn_sequential(
      nn_conv_transpose2d(16, 6, kernel_size = 5),
      nn_relu(),
      nn_conv_transpose2d(6, 1, kernel_size = 5),
      nn_sigmoid()
    )
  },
  forward = function(x) {
    x %&gt;%
      self$encoder() %&gt;%
      self$decoder()
  },
  predict = function(x) {
    self$encoder(x) %&gt;%
      torch_flatten(start_dim = 2)
  }
)

mod &lt;- net %&gt;%
  setup(
    loss = nn_mse_loss(),
    optimizer = optim_adam
  ) %&gt;%
  fit(train_dl, epochs = 1, valid_data = test_dl)

mod_bundle &lt;- bundle(mod)


# then, after saveRDS + readRDS or passing to a new session ----------
mod_unbundled &lt;- unbundle(mod_bundle)

mod_unbundled_preds &lt;- predict(mod_unbundled, test_dl)
}

</code></pre>

<hr>
<h2 id='bundle.model_fit'>Bundle a parsnip <code>model_fit</code> object</h2><span id='topic+bundle.model_fit'></span><span id='topic+bundle_model_fit'></span>

<h3>Description</h3>

<p>Bundling a model prepares it to be saved to a file and later
restored for prediction in a new R session. See the 'Value' section for
more information on bundles and their usage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'model_fit'
bundle(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bundle.model_fit_+3A_x">x</code></td>
<td>
<p>A <a href="parsnip.html#topic+model_fit">model_fit</a> object returned
from <a href="parsnip.html#topic+parsnip-package">parsnip</a> or other tidymodels packages.</p>
</td></tr>
<tr><td><code id="bundle.model_fit_+3A_...">...</code></td>
<td>
<p>Not used in this bundler and included for compatibility with
the generic only. Additional arguments passed to this method will return
an error.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Primarily, these methods call <code><a href="#topic+bundle">bundle()</a></code> on the output of
<code><a href="parsnip.html#topic+reexports">parsnip::extract_fit_engine()</a></code>. See the class of the output of that
function for more details on the bundling method for that object.
</p>


<h3>Value</h3>

<p>A bundle object with subclass <code>bundled_model_fit</code>.
</p>
<p>Bundles are a list subclass with two components:
</p>
<table role = "presentation">
<tr><td><code>object</code></td>
<td>
<p>An R object. Gives the output of native serialization
methods from the model-supplying package, sometimes with additional
classes or attributes that aid portability. This is often
a <a href="base.html#topic+raw">raw</a> object.</p>
</td></tr>
<tr><td><code>situate</code></td>
<td>
<p>A function. The <code>situate()</code> function is defined when
<code><a href="#topic+bundle">bundle()</a></code> is called, though is a loose analogue of an <code><a href="#topic+unbundle">unbundle()</a></code> S3
method for that object. Since the function is defined on <code><a href="#topic+bundle">bundle()</a></code>, it
has access to references and dependency information that can
be saved alongside the <code>object</code> component. Calling <code><a href="#topic+unbundle">unbundle()</a></code> on a
bundled object <code>x</code> calls <code>x$situate(x$object)</code>, returning the
unserialized version of <code>object</code>. <code>situate()</code> will also restore needed
references, such as server instances and environmental variables.</p>
</td></tr>
</table>
<p>Bundles are R objects that represent a &quot;standalone&quot; version of their
analogous model object. Thus, bundles are ready for saving to a file; saving
with <code><a href="base.html#topic+readRDS">base::saveRDS()</a></code> is our recommended serialization strategy for bundles,
unless documented otherwise for a specific method.
</p>
<p>To restore the original model object <code>x</code> in a new environment, load its
bundle with <code><a href="base.html#topic+readRDS">base::readRDS()</a></code> and run <code><a href="#topic+unbundle">unbundle()</a></code> on it. The output
of <code><a href="#topic+unbundle">unbundle()</a></code> is a model object that is ready to <code><a href="stats.html#topic+predict">predict()</a></code> on new data,
and other restored functionality (like plotting or summarizing) is supported
as a side effect only.
</p>
<p>The bundle package wraps native serialization methods from model-supplying
packages. Between versions, those model-supplying packages may change their
native serialization methods, possibly introducing problems with re-loading
objects serialized with previous package versions. The bundle package does
not provide checks for these sorts of changes, and ought to be used in
conjunction with tooling for managing and monitoring model environments
like <a href="vetiver.html#topic+vetiver-package">vetiver</a> or <a href="renv.html#topic+renv-package">renv</a>.
</p>
<p>See <code>vignette("bundle")</code> for more information on bundling and its motivation.
</p>


<h3>bundle and butcher</h3>

<p>The <a href="https://butcher.tidymodels.org/">butcher</a> package allows you to remove
parts of a fitted model object that are not needed for prediction.
</p>
<p>This bundle method is compatible with pre-butchering. That is, for a
fitted model <code>x</code>, you can safely call:
</p>
<div class="sourceCode"><pre>res &lt;-
  x %&gt;%
  butcher() %&gt;%
  bundle()
</pre></div>
<p>and predict with the output of <code>unbundle(res)</code> in a new R session.
</p>


<h3>See Also</h3>

<p>Other bundlers: 
<code><a href="#topic+bundle">bundle</a>()</code>,
<code><a href="#topic+bundle.H2OAutoML">bundle.H2OAutoML</a>()</code>,
<code><a href="#topic+bundle.bart">bundle.bart</a>()</code>,
<code><a href="#topic+bundle.keras.engine.training.Model">bundle.keras.engine.training.Model</a>()</code>,
<code><a href="#topic+bundle.luz_module_fitted">bundle.luz_module_fitted</a>()</code>,
<code><a href="#topic+bundle.model_stack">bundle.model_stack</a>()</code>,
<code><a href="#topic+bundle.recipe">bundle.recipe</a>()</code>,
<code><a href="#topic+bundle.step_umap">bundle.step_umap</a>()</code>,
<code><a href="#topic+bundle.train">bundle.train</a>()</code>,
<code><a href="#topic+bundle.workflow">bundle.workflow</a>()</code>,
<code><a href="#topic+bundle.xgb.Booster">bundle.xgb.Booster</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# fit model and bundle ------------------------------------------------
library(parsnip)
library(xgboost)

set.seed(1)

mod &lt;-
  boost_tree(trees = 5, mtry = 3) %&gt;%
  set_mode("regression") %&gt;%
  set_engine("xgboost") %&gt;%
  fit(mpg ~ ., data = mtcars)

mod_bundle &lt;- bundle(mod)

# then, after saveRDS + readRDS or passing to a new session ----------
mod_unbundled &lt;- unbundle(mod_bundle)

mod_unbundled_preds &lt;- predict(mod_unbundled, new_data = mtcars)

</code></pre>

<hr>
<h2 id='bundle.model_stack'>Bundle a tidymodels <code>model_stack</code> object</h2><span id='topic+bundle.model_stack'></span><span id='topic+bundle_model_stack'></span>

<h3>Description</h3>

<p>Bundling a model prepares it to be saved to a file and later
restored for prediction in a new R session. See the 'Value' section for
more information on bundles and their usage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'model_stack'
bundle(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bundle.model_stack_+3A_x">x</code></td>
<td>
<p>A <a href="stacks.html#topic+stacks">model_stack</a> object returned
from <a href="stacks.html#topic+fit_members">fit_members()</a>.</p>
</td></tr>
<tr><td><code id="bundle.model_stack_+3A_...">...</code></td>
<td>
<p>Not used in this bundler and included for compatibility with
the generic only. Additional arguments passed to this method will return
an error.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This bundler wraps <code><a href="#topic+bundle.model_fit">bundle.model_fit()</a></code> and <code><a href="#topic+bundle.workflow">bundle.workflow()</a></code>.
Both the fitted members and the meta-learner (in <code>x$coefs</code>) are bundled.
</p>


<h3>Value</h3>

<p>A bundle object with subclass <code>bundled_model_stack</code>.
</p>
<p>Bundles are a list subclass with two components:
</p>
<table role = "presentation">
<tr><td><code>object</code></td>
<td>
<p>An R object. Gives the output of native serialization
methods from the model-supplying package, sometimes with additional
classes or attributes that aid portability. This is often
a <a href="base.html#topic+raw">raw</a> object.</p>
</td></tr>
<tr><td><code>situate</code></td>
<td>
<p>A function. The <code>situate()</code> function is defined when
<code><a href="#topic+bundle">bundle()</a></code> is called, though is a loose analogue of an <code><a href="#topic+unbundle">unbundle()</a></code> S3
method for that object. Since the function is defined on <code><a href="#topic+bundle">bundle()</a></code>, it
has access to references and dependency information that can
be saved alongside the <code>object</code> component. Calling <code><a href="#topic+unbundle">unbundle()</a></code> on a
bundled object <code>x</code> calls <code>x$situate(x$object)</code>, returning the
unserialized version of <code>object</code>. <code>situate()</code> will also restore needed
references, such as server instances and environmental variables.</p>
</td></tr>
</table>
<p>Bundles are R objects that represent a &quot;standalone&quot; version of their
analogous model object. Thus, bundles are ready for saving to a file; saving
with <code><a href="base.html#topic+readRDS">base::saveRDS()</a></code> is our recommended serialization strategy for bundles,
unless documented otherwise for a specific method.
</p>
<p>To restore the original model object <code>x</code> in a new environment, load its
bundle with <code><a href="base.html#topic+readRDS">base::readRDS()</a></code> and run <code><a href="#topic+unbundle">unbundle()</a></code> on it. The output
of <code><a href="#topic+unbundle">unbundle()</a></code> is a model object that is ready to <code><a href="stats.html#topic+predict">predict()</a></code> on new data,
and other restored functionality (like plotting or summarizing) is supported
as a side effect only.
</p>
<p>The bundle package wraps native serialization methods from model-supplying
packages. Between versions, those model-supplying packages may change their
native serialization methods, possibly introducing problems with re-loading
objects serialized with previous package versions. The bundle package does
not provide checks for these sorts of changes, and ought to be used in
conjunction with tooling for managing and monitoring model environments
like <a href="vetiver.html#topic+vetiver-package">vetiver</a> or <a href="renv.html#topic+renv-package">renv</a>.
</p>
<p>See <code>vignette("bundle")</code> for more information on bundling and its motivation.
</p>


<h3>See Also</h3>

<p>Other bundlers: 
<code><a href="#topic+bundle">bundle</a>()</code>,
<code><a href="#topic+bundle.H2OAutoML">bundle.H2OAutoML</a>()</code>,
<code><a href="#topic+bundle.bart">bundle.bart</a>()</code>,
<code><a href="#topic+bundle.keras.engine.training.Model">bundle.keras.engine.training.Model</a>()</code>,
<code><a href="#topic+bundle.luz_module_fitted">bundle.luz_module_fitted</a>()</code>,
<code><a href="#topic+bundle.model_fit">bundle.model_fit</a>()</code>,
<code><a href="#topic+bundle.recipe">bundle.recipe</a>()</code>,
<code><a href="#topic+bundle.step_umap">bundle.step_umap</a>()</code>,
<code><a href="#topic+bundle.train">bundle.train</a>()</code>,
<code><a href="#topic+bundle.workflow">bundle.workflow</a>()</code>,
<code><a href="#topic+bundle.xgb.Booster">bundle.xgb.Booster</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# fit model and bundle ------------------------------------------------
library(stacks)

set.seed(1)

mod &lt;-
  stacks() %&gt;%
  add_candidates(reg_res_lr) %&gt;%
  add_candidates(reg_res_svm) %&gt;%
  blend_predictions(times = 10) %&gt;%
  fit_members()

mod_bundle &lt;- bundle(mod)

# then, after saveRDS + readRDS or passing to a new session ----------
mod_unbundled &lt;- unbundle(mod_bundle)

</code></pre>

<hr>
<h2 id='bundle.recipe'>Bundle a <code>recipe</code> object</h2><span id='topic+bundle.recipe'></span><span id='topic+bundle_recipe'></span>

<h3>Description</h3>

<p>Bundling a model prepares it to be saved to a file and later
restored for prediction in a new R session. See the 'Value' section for
more information on bundles and their usage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'recipe'
bundle(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bundle.recipe_+3A_x">x</code></td>
<td>
<p>A <a href="recipes.html#topic+recipe">recipe</a> object returned
from <a href="recipes.html#topic+recipe">recipes</a>.</p>
</td></tr>
<tr><td><code id="bundle.recipe_+3A_...">...</code></td>
<td>
<p>Not used in this bundler and included for compatibility with
the generic only. Additional arguments passed to this method will return
an error.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The method call <code><a href="#topic+bundle">bundle()</a></code> on every step in the
<a href="recipes.html#topic+recipe">recipe</a> object. See the classes of individual steps
for more details on the bundling method for that object.
</p>


<h3>Value</h3>

<p>A bundle object with subclass <code>bundled_recipe</code>.
</p>
<p>Bundles are a list subclass with two components:
</p>
<table role = "presentation">
<tr><td><code>object</code></td>
<td>
<p>An R object. Gives the output of native serialization
methods from the model-supplying package, sometimes with additional
classes or attributes that aid portability. This is often
a <a href="base.html#topic+raw">raw</a> object.</p>
</td></tr>
<tr><td><code>situate</code></td>
<td>
<p>A function. The <code>situate()</code> function is defined when
<code><a href="#topic+bundle">bundle()</a></code> is called, though is a loose analogue of an <code><a href="#topic+unbundle">unbundle()</a></code> S3
method for that object. Since the function is defined on <code><a href="#topic+bundle">bundle()</a></code>, it
has access to references and dependency information that can
be saved alongside the <code>object</code> component. Calling <code><a href="#topic+unbundle">unbundle()</a></code> on a
bundled object <code>x</code> calls <code>x$situate(x$object)</code>, returning the
unserialized version of <code>object</code>. <code>situate()</code> will also restore needed
references, such as server instances and environmental variables.</p>
</td></tr>
</table>
<p>Bundles are R objects that represent a &quot;standalone&quot; version of their
analogous model object. Thus, bundles are ready for saving to a file; saving
with <code><a href="base.html#topic+readRDS">base::saveRDS()</a></code> is our recommended serialization strategy for bundles,
unless documented otherwise for a specific method.
</p>
<p>To restore the original model object <code>x</code> in a new environment, load its
bundle with <code><a href="base.html#topic+readRDS">base::readRDS()</a></code> and run <code><a href="#topic+unbundle">unbundle()</a></code> on it. The output
of <code><a href="#topic+unbundle">unbundle()</a></code> is a model object that is ready to <code><a href="stats.html#topic+predict">predict()</a></code> on new data,
and other restored functionality (like plotting or summarizing) is supported
as a side effect only.
</p>
<p>The bundle package wraps native serialization methods from model-supplying
packages. Between versions, those model-supplying packages may change their
native serialization methods, possibly introducing problems with re-loading
objects serialized with previous package versions. The bundle package does
not provide checks for these sorts of changes, and ought to be used in
conjunction with tooling for managing and monitoring model environments
like <a href="vetiver.html#topic+vetiver-package">vetiver</a> or <a href="renv.html#topic+renv-package">renv</a>.
</p>
<p>See <code>vignette("bundle")</code> for more information on bundling and its motivation.
</p>


<h3>See Also</h3>

<p>Other bundlers: 
<code><a href="#topic+bundle">bundle</a>()</code>,
<code><a href="#topic+bundle.H2OAutoML">bundle.H2OAutoML</a>()</code>,
<code><a href="#topic+bundle.bart">bundle.bart</a>()</code>,
<code><a href="#topic+bundle.keras.engine.training.Model">bundle.keras.engine.training.Model</a>()</code>,
<code><a href="#topic+bundle.luz_module_fitted">bundle.luz_module_fitted</a>()</code>,
<code><a href="#topic+bundle.model_fit">bundle.model_fit</a>()</code>,
<code><a href="#topic+bundle.model_stack">bundle.model_stack</a>()</code>,
<code><a href="#topic+bundle.step_umap">bundle.step_umap</a>()</code>,
<code><a href="#topic+bundle.train">bundle.train</a>()</code>,
<code><a href="#topic+bundle.workflow">bundle.workflow</a>()</code>,
<code><a href="#topic+bundle.xgb.Booster">bundle.xgb.Booster</a>()</code>
</p>

<hr>
<h2 id='bundle.step_umap'>Bundle a <code>step_umap</code> object</h2><span id='topic+bundle.step_umap'></span><span id='topic+bundle_step_umap'></span>

<h3>Description</h3>

<p>Bundling a model prepares it to be saved to a file and later
restored for prediction in a new R session. See the 'Value' section for
more information on bundles and their usage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'step_umap'
bundle(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bundle.step_umap_+3A_x">x</code></td>
<td>
<p>A <a href="embed.html#topic+step_umap">step_umap</a> object returned
from <a href="embed.html#topic+step_umap">embed</a>.</p>
</td></tr>
<tr><td><code id="bundle.step_umap_+3A_...">...</code></td>
<td>
<p>Not used in this bundler and included for compatibility with
the generic only. Additional arguments passed to this method will return
an error.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A bundle object with subclass <code>bundled_step_umap</code>.
</p>
<p>Bundles are a list subclass with two components:
</p>
<table role = "presentation">
<tr><td><code>object</code></td>
<td>
<p>An R object. Gives the output of native serialization
methods from the model-supplying package, sometimes with additional
classes or attributes that aid portability. This is often
a <a href="base.html#topic+raw">raw</a> object.</p>
</td></tr>
<tr><td><code>situate</code></td>
<td>
<p>A function. The <code>situate()</code> function is defined when
<code><a href="#topic+bundle">bundle()</a></code> is called, though is a loose analogue of an <code><a href="#topic+unbundle">unbundle()</a></code> S3
method for that object. Since the function is defined on <code><a href="#topic+bundle">bundle()</a></code>, it
has access to references and dependency information that can
be saved alongside the <code>object</code> component. Calling <code><a href="#topic+unbundle">unbundle()</a></code> on a
bundled object <code>x</code> calls <code>x$situate(x$object)</code>, returning the
unserialized version of <code>object</code>. <code>situate()</code> will also restore needed
references, such as server instances and environmental variables.</p>
</td></tr>
</table>
<p>Bundles are R objects that represent a &quot;standalone&quot; version of their
analogous model object. Thus, bundles are ready for saving to a file; saving
with <code><a href="base.html#topic+readRDS">base::saveRDS()</a></code> is our recommended serialization strategy for bundles,
unless documented otherwise for a specific method.
</p>
<p>To restore the original model object <code>x</code> in a new environment, load its
bundle with <code><a href="base.html#topic+readRDS">base::readRDS()</a></code> and run <code><a href="#topic+unbundle">unbundle()</a></code> on it. The output
of <code><a href="#topic+unbundle">unbundle()</a></code> is a model object that is ready to <code><a href="stats.html#topic+predict">predict()</a></code> on new data,
and other restored functionality (like plotting or summarizing) is supported
as a side effect only.
</p>
<p>The bundle package wraps native serialization methods from model-supplying
packages. Between versions, those model-supplying packages may change their
native serialization methods, possibly introducing problems with re-loading
objects serialized with previous package versions. The bundle package does
not provide checks for these sorts of changes, and ought to be used in
conjunction with tooling for managing and monitoring model environments
like <a href="vetiver.html#topic+vetiver-package">vetiver</a> or <a href="renv.html#topic+renv-package">renv</a>.
</p>
<p>See <code>vignette("bundle")</code> for more information on bundling and its motivation.
</p>


<h3>bundle and butcher</h3>

<p>The <a href="https://butcher.tidymodels.org/">butcher</a> package allows you to remove
parts of a fitted model object that are not needed for prediction.
</p>
<p>This bundle method is compatible with pre-butchering. That is, for a
fitted model <code>x</code>, you can safely call:
</p>
<div class="sourceCode"><pre>res &lt;-
  x %&gt;%
  butcher() %&gt;%
  bundle()
</pre></div>
<p>and predict with the output of <code>unbundle(res)</code> in a new R session.
</p>


<h3>See Also</h3>

<p>This method wraps <code><a href="uwot.html#topic+save_uwot">uwot::save_uwot()</a></code> and <code><a href="uwot.html#topic+load_uwot">uwot::load_uwot()</a></code>.
</p>
<p>Other bundlers: 
<code><a href="#topic+bundle">bundle</a>()</code>,
<code><a href="#topic+bundle.H2OAutoML">bundle.H2OAutoML</a>()</code>,
<code><a href="#topic+bundle.bart">bundle.bart</a>()</code>,
<code><a href="#topic+bundle.keras.engine.training.Model">bundle.keras.engine.training.Model</a>()</code>,
<code><a href="#topic+bundle.luz_module_fitted">bundle.luz_module_fitted</a>()</code>,
<code><a href="#topic+bundle.model_fit">bundle.model_fit</a>()</code>,
<code><a href="#topic+bundle.model_stack">bundle.model_stack</a>()</code>,
<code><a href="#topic+bundle.recipe">bundle.recipe</a>()</code>,
<code><a href="#topic+bundle.train">bundle.train</a>()</code>,
<code><a href="#topic+bundle.workflow">bundle.workflow</a>()</code>,
<code><a href="#topic+bundle.xgb.Booster">bundle.xgb.Booster</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# fit model and bundle ------------------------------------------------
library(recipes)
library(embed)

set.seed(1)

rec &lt;- recipe(Species ~ ., data = iris) %&gt;%
  step_normalize(all_predictors()) %&gt;%
  step_umap(all_predictors(), outcome = vars(Species), num_comp = 2) %&gt;%
  prep()

rec_bundle &lt;- bundle(rec)

# then, after saveRDS + readRDS or passing to a new session ----------
rec_unbundled &lt;- unbundle(rec_bundle)

bake(rec_unbundled, new_data = iris)

</code></pre>

<hr>
<h2 id='bundle.train'>Bundle a caret <code>train</code> object</h2><span id='topic+bundle.train'></span><span id='topic+bundle_train'></span>

<h3>Description</h3>

<p>Bundling a model prepares it to be saved to a file and later
restored for prediction in a new R session. See the 'Value' section for
more information on bundles and their usage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'train'
bundle(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bundle.train_+3A_x">x</code></td>
<td>
<p>A <a href="caret.html#topic+train">train</a> object returned
from <code><a href="caret.html#topic+train">caret::train()</a></code>.</p>
</td></tr>
<tr><td><code id="bundle.train_+3A_...">...</code></td>
<td>
<p>Not used in this bundler and included for compatibility with
the generic only. Additional arguments passed to this method will return
an error.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Primarily, these methods call <code><a href="#topic+bundle">bundle()</a></code> on the output of
<code>train_model_object$finalModel</code>. See the class of the output of that
slot for more details on the bundling method for that object.
</p>


<h3>Value</h3>

<p>A bundle object with subclass <code>bundled_train</code>.
</p>
<p>Bundles are a list subclass with two components:
</p>
<table role = "presentation">
<tr><td><code>object</code></td>
<td>
<p>An R object. Gives the output of native serialization
methods from the model-supplying package, sometimes with additional
classes or attributes that aid portability. This is often
a <a href="base.html#topic+raw">raw</a> object.</p>
</td></tr>
<tr><td><code>situate</code></td>
<td>
<p>A function. The <code>situate()</code> function is defined when
<code><a href="#topic+bundle">bundle()</a></code> is called, though is a loose analogue of an <code><a href="#topic+unbundle">unbundle()</a></code> S3
method for that object. Since the function is defined on <code><a href="#topic+bundle">bundle()</a></code>, it
has access to references and dependency information that can
be saved alongside the <code>object</code> component. Calling <code><a href="#topic+unbundle">unbundle()</a></code> on a
bundled object <code>x</code> calls <code>x$situate(x$object)</code>, returning the
unserialized version of <code>object</code>. <code>situate()</code> will also restore needed
references, such as server instances and environmental variables.</p>
</td></tr>
</table>
<p>Bundles are R objects that represent a &quot;standalone&quot; version of their
analogous model object. Thus, bundles are ready for saving to a file; saving
with <code><a href="base.html#topic+readRDS">base::saveRDS()</a></code> is our recommended serialization strategy for bundles,
unless documented otherwise for a specific method.
</p>
<p>To restore the original model object <code>x</code> in a new environment, load its
bundle with <code><a href="base.html#topic+readRDS">base::readRDS()</a></code> and run <code><a href="#topic+unbundle">unbundle()</a></code> on it. The output
of <code><a href="#topic+unbundle">unbundle()</a></code> is a model object that is ready to <code><a href="stats.html#topic+predict">predict()</a></code> on new data,
and other restored functionality (like plotting or summarizing) is supported
as a side effect only.
</p>
<p>The bundle package wraps native serialization methods from model-supplying
packages. Between versions, those model-supplying packages may change their
native serialization methods, possibly introducing problems with re-loading
objects serialized with previous package versions. The bundle package does
not provide checks for these sorts of changes, and ought to be used in
conjunction with tooling for managing and monitoring model environments
like <a href="vetiver.html#topic+vetiver-package">vetiver</a> or <a href="renv.html#topic+renv-package">renv</a>.
</p>
<p>See <code>vignette("bundle")</code> for more information on bundling and its motivation.
</p>


<h3>bundle and butcher</h3>

<p>The <a href="https://butcher.tidymodels.org/">butcher</a> package allows you to remove
parts of a fitted model object that are not needed for prediction.
</p>
<p>This bundle method is compatible with pre-butchering. That is, for a
fitted model <code>x</code>, you can safely call:
</p>
<div class="sourceCode"><pre>res &lt;-
  x %&gt;%
  butcher() %&gt;%
  bundle()
</pre></div>
<p>and predict with the output of <code>unbundle(res)</code> in a new R session.
</p>


<h3>See Also</h3>

<p>Other bundlers: 
<code><a href="#topic+bundle">bundle</a>()</code>,
<code><a href="#topic+bundle.H2OAutoML">bundle.H2OAutoML</a>()</code>,
<code><a href="#topic+bundle.bart">bundle.bart</a>()</code>,
<code><a href="#topic+bundle.keras.engine.training.Model">bundle.keras.engine.training.Model</a>()</code>,
<code><a href="#topic+bundle.luz_module_fitted">bundle.luz_module_fitted</a>()</code>,
<code><a href="#topic+bundle.model_fit">bundle.model_fit</a>()</code>,
<code><a href="#topic+bundle.model_stack">bundle.model_stack</a>()</code>,
<code><a href="#topic+bundle.recipe">bundle.recipe</a>()</code>,
<code><a href="#topic+bundle.step_umap">bundle.step_umap</a>()</code>,
<code><a href="#topic+bundle.workflow">bundle.workflow</a>()</code>,
<code><a href="#topic+bundle.xgb.Booster">bundle.xgb.Booster</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# fit model and bundle ------------------------------------------------
library(caret)

predictors &lt;- mtcars[, c("cyl", "disp", "hp")]

set.seed(1)

mod &lt;-
  train(
    x = predictors,
    y = mtcars$mpg,
    method = "glm"
  )

mod_bundle &lt;- bundle(mod)

# then, after saveRDS + readRDS or passing to a new session ----------
mod_unbundled &lt;- unbundle(mod_bundle)

mod_unbundled_preds &lt;- predict(mod_unbundled, new_data = mtcars)

</code></pre>

<hr>
<h2 id='bundle.workflow'>Bundle a tidymodels <code>workflow</code> object</h2><span id='topic+bundle.workflow'></span><span id='topic+bundle_workflow'></span>

<h3>Description</h3>

<p>Bundling a model prepares it to be saved to a file and later
restored for prediction in a new R session. See the 'Value' section for
more information on bundles and their usage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'workflow'
bundle(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bundle.workflow_+3A_x">x</code></td>
<td>
<p>A <a href="workflows.html#topic+workflow">workflow</a> object returned
from <a href="workflows.html#topic+workflows-package">workflows</a> or other tidymodels packages.</p>
</td></tr>
<tr><td><code id="bundle.workflow_+3A_...">...</code></td>
<td>
<p>Not used in this bundler and included for compatibility with
the generic only. Additional arguments passed to this method will return
an error.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This bundler wraps <code><a href="#topic+bundle.model_fit">bundle.model_fit()</a></code> and <code><a href="#topic+bundle.recipe">bundle.recipe()</a></code>.
</p>


<h3>Value</h3>

<p>A bundle object with subclass <code>bundled_workflow</code>.
</p>
<p>Bundles are a list subclass with two components:
</p>
<table role = "presentation">
<tr><td><code>object</code></td>
<td>
<p>An R object. Gives the output of native serialization
methods from the model-supplying package, sometimes with additional
classes or attributes that aid portability. This is often
a <a href="base.html#topic+raw">raw</a> object.</p>
</td></tr>
<tr><td><code>situate</code></td>
<td>
<p>A function. The <code>situate()</code> function is defined when
<code><a href="#topic+bundle">bundle()</a></code> is called, though is a loose analogue of an <code><a href="#topic+unbundle">unbundle()</a></code> S3
method for that object. Since the function is defined on <code><a href="#topic+bundle">bundle()</a></code>, it
has access to references and dependency information that can
be saved alongside the <code>object</code> component. Calling <code><a href="#topic+unbundle">unbundle()</a></code> on a
bundled object <code>x</code> calls <code>x$situate(x$object)</code>, returning the
unserialized version of <code>object</code>. <code>situate()</code> will also restore needed
references, such as server instances and environmental variables.</p>
</td></tr>
</table>
<p>Bundles are R objects that represent a &quot;standalone&quot; version of their
analogous model object. Thus, bundles are ready for saving to a file; saving
with <code><a href="base.html#topic+readRDS">base::saveRDS()</a></code> is our recommended serialization strategy for bundles,
unless documented otherwise for a specific method.
</p>
<p>To restore the original model object <code>x</code> in a new environment, load its
bundle with <code><a href="base.html#topic+readRDS">base::readRDS()</a></code> and run <code><a href="#topic+unbundle">unbundle()</a></code> on it. The output
of <code><a href="#topic+unbundle">unbundle()</a></code> is a model object that is ready to <code><a href="stats.html#topic+predict">predict()</a></code> on new data,
and other restored functionality (like plotting or summarizing) is supported
as a side effect only.
</p>
<p>The bundle package wraps native serialization methods from model-supplying
packages. Between versions, those model-supplying packages may change their
native serialization methods, possibly introducing problems with re-loading
objects serialized with previous package versions. The bundle package does
not provide checks for these sorts of changes, and ought to be used in
conjunction with tooling for managing and monitoring model environments
like <a href="vetiver.html#topic+vetiver-package">vetiver</a> or <a href="renv.html#topic+renv-package">renv</a>.
</p>
<p>See <code>vignette("bundle")</code> for more information on bundling and its motivation.
</p>


<h3>bundle and butcher</h3>

<p>The <a href="https://butcher.tidymodels.org/">butcher</a> package allows you to remove
parts of a fitted model object that are not needed for prediction.
</p>
<p>This bundle method is compatible with pre-butchering. That is, for a
fitted model <code>x</code>, you can safely call:
</p>
<div class="sourceCode"><pre>res &lt;-
  x %&gt;%
  butcher() %&gt;%
  bundle()
</pre></div>
<p>and predict with the output of <code>unbundle(res)</code> in a new R session.
</p>


<h3>See Also</h3>

<p>Other bundlers: 
<code><a href="#topic+bundle">bundle</a>()</code>,
<code><a href="#topic+bundle.H2OAutoML">bundle.H2OAutoML</a>()</code>,
<code><a href="#topic+bundle.bart">bundle.bart</a>()</code>,
<code><a href="#topic+bundle.keras.engine.training.Model">bundle.keras.engine.training.Model</a>()</code>,
<code><a href="#topic+bundle.luz_module_fitted">bundle.luz_module_fitted</a>()</code>,
<code><a href="#topic+bundle.model_fit">bundle.model_fit</a>()</code>,
<code><a href="#topic+bundle.model_stack">bundle.model_stack</a>()</code>,
<code><a href="#topic+bundle.recipe">bundle.recipe</a>()</code>,
<code><a href="#topic+bundle.step_umap">bundle.step_umap</a>()</code>,
<code><a href="#topic+bundle.train">bundle.train</a>()</code>,
<code><a href="#topic+bundle.xgb.Booster">bundle.xgb.Booster</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# fit model and bundle ------------------------------------------------
library(workflows)
library(recipes)
library(parsnip)
library(xgboost)

set.seed(1)

spec &lt;-
  boost_tree(trees = 5, mtry = 3) %&gt;%
  set_mode("regression") %&gt;%
  set_engine("xgboost")

rec &lt;-
  recipe(mpg ~ ., data = mtcars) %&gt;%
  step_log(hp)

mod &lt;-
  workflow() %&gt;%
  add_model(spec) %&gt;%
  add_recipe(rec) %&gt;%
  fit(data = mtcars)

mod_bundle &lt;- bundle(mod)

# then, after saveRDS + readRDS or passing to a new session ----------
mod_unbundled &lt;- unbundle(mod_bundle)

</code></pre>

<hr>
<h2 id='bundle.xgb.Booster'>Bundle an <code>xgb.Booster</code> object</h2><span id='topic+bundle.xgb.Booster'></span>

<h3>Description</h3>

<p>Bundling a model prepares it to be saved to a file and later
restored for prediction in a new R session. See the 'Value' section for
more information on bundles and their usage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'xgb.Booster'
bundle(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bundle.xgb.Booster_+3A_x">x</code></td>
<td>
<p>An <code>xgb.Booster</code> object returned from <code><a href="xgboost.html#topic+xgb.train">xgboost::xgboost()</a></code> or
<code><a href="xgboost.html#topic+xgb.train">xgboost::xgb.train()</a></code>.</p>
</td></tr>
<tr><td><code id="bundle.xgb.Booster_+3A_...">...</code></td>
<td>
<p>Not used in this bundler and included for compatibility with
the generic only. Additional arguments passed to this method will return
an error.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A bundle object with subclass <code>bundled_xgb.Booster</code>.
</p>
<p>Bundles are a list subclass with two components:
</p>
<table role = "presentation">
<tr><td><code>object</code></td>
<td>
<p>An R object. Gives the output of native serialization
methods from the model-supplying package, sometimes with additional
classes or attributes that aid portability. This is often
a <a href="base.html#topic+raw">raw</a> object.</p>
</td></tr>
<tr><td><code>situate</code></td>
<td>
<p>A function. The <code>situate()</code> function is defined when
<code><a href="#topic+bundle">bundle()</a></code> is called, though is a loose analogue of an <code><a href="#topic+unbundle">unbundle()</a></code> S3
method for that object. Since the function is defined on <code><a href="#topic+bundle">bundle()</a></code>, it
has access to references and dependency information that can
be saved alongside the <code>object</code> component. Calling <code><a href="#topic+unbundle">unbundle()</a></code> on a
bundled object <code>x</code> calls <code>x$situate(x$object)</code>, returning the
unserialized version of <code>object</code>. <code>situate()</code> will also restore needed
references, such as server instances and environmental variables.</p>
</td></tr>
</table>
<p>Bundles are R objects that represent a &quot;standalone&quot; version of their
analogous model object. Thus, bundles are ready for saving to a file; saving
with <code><a href="base.html#topic+readRDS">base::saveRDS()</a></code> is our recommended serialization strategy for bundles,
unless documented otherwise for a specific method.
</p>
<p>To restore the original model object <code>x</code> in a new environment, load its
bundle with <code><a href="base.html#topic+readRDS">base::readRDS()</a></code> and run <code><a href="#topic+unbundle">unbundle()</a></code> on it. The output
of <code><a href="#topic+unbundle">unbundle()</a></code> is a model object that is ready to <code><a href="stats.html#topic+predict">predict()</a></code> on new data,
and other restored functionality (like plotting or summarizing) is supported
as a side effect only.
</p>
<p>The bundle package wraps native serialization methods from model-supplying
packages. Between versions, those model-supplying packages may change their
native serialization methods, possibly introducing problems with re-loading
objects serialized with previous package versions. The bundle package does
not provide checks for these sorts of changes, and ought to be used in
conjunction with tooling for managing and monitoring model environments
like <a href="vetiver.html#topic+vetiver-package">vetiver</a> or <a href="renv.html#topic+renv-package">renv</a>.
</p>
<p>See <code>vignette("bundle")</code> for more information on bundling and its motivation.
</p>


<h3>bundle and butcher</h3>

<p>The <a href="https://butcher.tidymodels.org/">butcher</a> package allows you to remove
parts of a fitted model object that are not needed for prediction.
</p>
<p>This bundle method is compatible with pre-butchering. That is, for a
fitted model <code>x</code>, you can safely call:
</p>
<div class="sourceCode"><pre>res &lt;-
  x %&gt;%
  butcher() %&gt;%
  bundle()
</pre></div>
<p>and predict with the output of <code>unbundle(res)</code> in a new R session.
</p>


<h3>See Also</h3>

<p>This method adapts the xgboost functions <code><a href="xgboost.html#topic+xgb.save.raw">xgboost::xgb.save.raw()</a></code>
and <code><a href="xgboost.html#topic+xgb.load.raw">xgboost::xgb.load.raw()</a></code>.
</p>
<p>Other bundlers: 
<code><a href="#topic+bundle">bundle</a>()</code>,
<code><a href="#topic+bundle.H2OAutoML">bundle.H2OAutoML</a>()</code>,
<code><a href="#topic+bundle.bart">bundle.bart</a>()</code>,
<code><a href="#topic+bundle.keras.engine.training.Model">bundle.keras.engine.training.Model</a>()</code>,
<code><a href="#topic+bundle.luz_module_fitted">bundle.luz_module_fitted</a>()</code>,
<code><a href="#topic+bundle.model_fit">bundle.model_fit</a>()</code>,
<code><a href="#topic+bundle.model_stack">bundle.model_stack</a>()</code>,
<code><a href="#topic+bundle.recipe">bundle.recipe</a>()</code>,
<code><a href="#topic+bundle.step_umap">bundle.step_umap</a>()</code>,
<code><a href="#topic+bundle.train">bundle.train</a>()</code>,
<code><a href="#topic+bundle.workflow">bundle.workflow</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# fit model and bundle ------------------------------------------------
library(xgboost)

set.seed(1)

data(agaricus.train)
data(agaricus.test)

xgb &lt;- xgboost(data = agaricus.train$data, label = agaricus.train$label,
               max_depth = 2, eta = 1, nthread = 2, nrounds = 2,
               objective = "binary:logistic")

xgb_bundle &lt;- bundle(xgb)

# then, after saveRDS + readRDS or passing to a new session ----------
xgb_unbundled &lt;- unbundle(xgb_bundle)

xgb_unbundled_preds &lt;- predict(xgb_unbundled, agaricus.test$data)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
