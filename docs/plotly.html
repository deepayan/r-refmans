<!DOCTYPE html><html><head><title>Help for package plotly</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {plotly}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_annotations'><p>Add an annotation(s) to a plot</p></a></li>
<li><a href='#add_data'><p>Add data to a plotly visualization</p></a></li>
<li><a href='#add_fun'><p>Apply function to plot, without modifying data</p></a></li>
<li><a href='#add_trace'><p>Add trace(s) to a plotly visualization</p></a></li>
<li><a href='#animation_opts'><p>Animation configuration options</p></a></li>
<li><a href='#api_create'><p>Tools for working with plotly's REST API (v2)</p></a></li>
<li><a href='#as_widget'><p>Convert a list to a plotly htmlwidget object</p></a></li>
<li><a href='#as.widget'><p>Convert a plotly object to an htmlwidget object</p></a></li>
<li><a href='#attrs_selected'><p>Specify attributes of selection traces</p></a></li>
<li><a href='#bbox'><p>Estimate bounding box of a rotated string</p></a></li>
<li><a href='#colorbar'><p>Modify the colorbar</p></a></li>
<li><a href='#config'><p>Set the default configuration for plotly</p></a></li>
<li><a href='#embed_notebook'><p>Embed a plot as an iframe into a Jupyter Notebook</p></a></li>
<li><a href='#event_data'><p>Access plotly user input event data in shiny</p></a></li>
<li><a href='#event_register'><p>Register a shiny input value</p></a></li>
<li><a href='#event_unregister'><p>Un-register a shiny input value</p></a></li>
<li><a href='#export'><p>Export a plotly graph to a static file</p></a></li>
<li><a href='#geom2trace'><p>Convert a &quot;basic&quot; geoms to a plotly.js trace.</p></a></li>
<li><a href='#get_figure'><p>Request a figure object</p></a></li>
<li><a href='#gg2list'><p>Convert a ggplot to a list.</p></a></li>
<li><a href='#ggplotly'><p>Convert ggplot2 to plotly</p></a></li>
<li><a href='#group2NA'><p>Separate groups with missing values</p></a></li>
<li><a href='#hide_colorbar'><p>Hide color bar(s)</p></a></li>
<li><a href='#hide_guides'><p>Hide guides (legends and colorbars)</p></a></li>
<li><a href='#hide_legend'><p>Hide legend</p></a></li>
<li><a href='#highlight'><p>Query graphical elements in multiple linked views</p></a></li>
<li><a href='#highlight_key'><p>Highlight/query data based on primary key</p></a></li>
<li><a href='#hobbs'><p>Hobbs data</p></a></li>
<li><a href='#knit_print.api_grid'><p>Embed a plotly grid as an iframe in a knitr doc</p></a></li>
<li><a href='#knit_print.api_grid_local'><p>Embed a plotly grid as an iframe in a knitr doc</p></a></li>
<li><a href='#knit_print.api_plot'><p>Embed a plotly figure as an iframe in a knitr doc</p></a></li>
<li><a href='#last_plot'><p>Retrieve the last plot to be modified or created.</p></a></li>
<li><a href='#layout'><p>Modify the layout of a plotly visualization</p></a></li>
<li><a href='#mic'><p>Mic data</p></a></li>
<li><a href='#mutate'><p>Objects exported from other packages</p></a></li>
<li><a href='#offline'><p>Plotly Offline</p></a></li>
<li><a href='#orca'><p>Static image exporting via orca</p></a></li>
<li><a href='#partial_bundle'><p>Use a partial bundle of plotly.js</p></a></li>
<li><a href='#plot_dendro'><p>Plot an interactive dendrogram</p></a></li>
<li><a href='#plot_geo'><p>Initiate a plotly-geo object</p></a></li>
<li><a href='#plot_ly'><p>Initiate a plotly visualization</p></a></li>
<li><a href='#plot_mapbox'><p>Initiate a plotly-mapbox object</p></a></li>
<li><a href='#plotly'><p>Main interface to plotly</p></a></li>
<li><a href='#plotly_build'><p>'Build' (i.e., evaluate) a plotly object</p></a></li>
<li><a href='#plotly_data'><p>Obtain data associated with a plotly graph</p></a></li>
<li><a href='#plotly_empty'><p>Create a complete empty plotly graph.</p></a></li>
<li><a href='#plotly_example'><p>Run a plotly example(s)</p></a></li>
<li><a href='#plotly_IMAGE'><p>Create a static image</p></a></li>
<li><a href='#plotly_json'><p>Inspect JSON sent to plotly.js</p></a></li>
<li><a href='#plotly_POST'><p>Create/Modify plotly graphs</p></a></li>
<li><a href='#plotly-shiny'><p>Shiny bindings for plotly</p></a></li>
<li><a href='#plotlyProxy'><p>Modify a plotly object inside a shiny app</p></a></li>
<li><a href='#print.api'><p>Print method for a 'generic' API response</p></a></li>
<li><a href='#print.api_grid'><p>Print a plotly grid object</p></a></li>
<li><a href='#print.api_grid_local'><p>Print a plotly grid object</p></a></li>
<li><a href='#print.api_plot'><p>Print a plot on plotly's platform</p></a></li>
<li><a href='#print.kaleidoScope'><p>Print method for kaleido</p></a></li>
<li><a href='#rangeslider'><p>Add a range slider to the x-axis</p></a></li>
<li><a href='#raster2uri'><p>Encode a raster object as a data URI</p></a></li>
<li><a href='#remove_typedarray_polyfill'><p>Remove TypedArray polyfill</p></a></li>
<li><a href='#res_mn'><p>Minnesotan Indian Reservation Lands</p></a></li>
<li><a href='#save_image'><p>Save plot as a static image</p></a></li>
<li><a href='#schema'><p>Acquire (and optionally display) plotly's plot schema</p></a></li>
<li><a href='#showRGB'><p>View colors already formatted by toRGB()</p></a></li>
<li><a href='#signup'><p>Create a new plotly account.</p></a></li>
<li><a href='#style'><p>Modify trace(s)</p></a></li>
<li><a href='#subplot'><p>View multiple plots in a single view</p></a></li>
<li><a href='#TeX'><p>Render TeX in a plotly graph using MathJax</p></a></li>
<li><a href='#to_basic'><p>Convert a geom to a &quot;basic&quot; geom.</p></a></li>
<li><a href='#toRGB'><p>Convert R colours to RGBA hexadecimal colour values</p></a></li>
<li><a href='#toWebGL'><p>Convert trace types to WebGL</p></a></li>
<li><a href='#wind'><p>Wind data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Create Interactive Web Graphics via 'plotly.js'</td>
</tr>
<tr>
<td>Version:</td>
<td>4.10.4</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Description:</td>
<td>Create interactive web graphics from 'ggplot2' graphs and/or a custom interface to the (MIT-licensed) JavaScript library 'plotly.js' inspired by the grammar of graphics.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://plotly-r.com">https://plotly-r.com</a>, <a href="https://github.com/plotly/plotly.R">https://github.com/plotly/plotly.R</a>,
<a href="https://plotly.com/r/">https://plotly.com/r/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/plotly/plotly.R/issues">https://github.com/plotly/plotly.R/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.0), ggplot2 (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>tools, scales, httr (&ge; 1.3.0), jsonlite (&ge; 1.6), magrittr,
digest, viridisLite, base64enc, htmltools (&ge; 0.3.6),
htmlwidgets (&ge; 1.5.2.9001), tidyr (&ge; 1.0.0), RColorBrewer,
dplyr, vctrs, tibble, lazyeval (&ge; 0.2.0), rlang (&ge; 0.4.10),
crosstalk, purrr, data.table, promises</td>
</tr>
<tr>
<td>Suggests:</td>
<td>MASS, maps, hexbin, ggthemes, GGally, ggalluvial, testthat,
knitr, shiny (&ge; 1.1.0), shinytest (&ge; 1.3.0), curl, rmarkdown,
Cairo, broom, webshot, listviewer, dendextend, sf, png,
IRdisplay, processx, plotlyGeoAssets, forcats, withr,
palmerpenguins, rversions, reticulate, rsvg</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Config/Needs/check:</td>
<td>tidyverse/ggplot2, rcmdcheck, devtools, reshape2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-13 20:51:33 UTC; cpsievert</td>
</tr>
<tr>
<td>Author:</td>
<td>Carson Sievert <a href="https://orcid.org/0000-0002-4958-2844"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Chris Parmer [aut],
  Toby Hocking [aut],
  Scott Chamberlain [aut],
  Karthik Ram [aut],
  Marianne Corvellec
    <a href="https://orcid.org/0000-0002-1994-3581"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Pedro Despouy [aut],
  Salim Br√ºggemann <a href="https://orcid.org/0000-0002-5329-5987"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Plotly Technologies Inc. [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Carson Sievert &lt;cpsievert1@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-13 22:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_annotations'>Add an annotation(s) to a plot</h2><span id='topic+add_annotations'></span>

<h3>Description</h3>

<p>Add an annotation(s) to a plot
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_annotations(p, text = NULL, ..., data = NULL, inherit = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_annotations_+3A_p">p</code></td>
<td>
<p>a plotly object</p>
</td></tr>
<tr><td><code id="add_annotations_+3A_text">text</code></td>
<td>
<p>annotation text (required).</p>
</td></tr>
<tr><td><code id="add_annotations_+3A_...">...</code></td>
<td>
<p>these arguments are documented at
<a href="https://github.com/plotly/plotly.js/blob/master/src/components/annotations/attributes.js">https://github.com/plotly/plotly.js/blob/master/src/components/annotations/attributes.js</a></p>
</td></tr>
<tr><td><code id="add_annotations_+3A_data">data</code></td>
<td>
<p>a data frame.</p>
</td></tr>
<tr><td><code id="add_annotations_+3A_inherit">inherit</code></td>
<td>
<p>inherit attributes from <code><a href="#topic+plot_ly">plot_ly()</a></code>?</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>

<hr>
<h2 id='add_data'>Add data to a plotly visualization</h2><span id='topic+add_data'></span>

<h3>Description</h3>

<p>Add data to a plotly visualization
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_data(p, data = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_data_+3A_p">p</code></td>
<td>
<p>a plotly visualization</p>
</td></tr>
<tr><td><code id="add_data_+3A_data">data</code></td>
<td>
<p>a data frame.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>

plot_ly() %&gt;% add_data(economics) %&gt;% add_trace(x = ~date, y = ~pce)

</code></pre>

<hr>
<h2 id='add_fun'>Apply function to plot, without modifying data</h2><span id='topic+add_fun'></span>

<h3>Description</h3>

<p>Useful when you need two or more layers that apply a summary statistic
to the original data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_fun(p, fun, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_fun_+3A_p">p</code></td>
<td>
<p>a plotly object.</p>
</td></tr>
<tr><td><code id="add_fun_+3A_fun">fun</code></td>
<td>
<p>a function. Should take a plotly object as input and return a
modified plotly object.</p>
</td></tr>
<tr><td><code id="add_fun_+3A_...">...</code></td>
<td>
<p>arguments passed to <code>fun</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='add_trace'>Add trace(s) to a plotly visualization</h2><span id='topic+add_trace'></span><span id='topic+add_markers'></span><span id='topic+add_text'></span><span id='topic+add_paths'></span><span id='topic+add_lines'></span><span id='topic+add_segments'></span><span id='topic+add_polygons'></span><span id='topic+add_sf'></span><span id='topic+add_table'></span><span id='topic+add_ribbons'></span><span id='topic+add_image'></span><span id='topic+add_area'></span><span id='topic+add_pie'></span><span id='topic+add_bars'></span><span id='topic+add_histogram'></span><span id='topic+add_histogram2d'></span><span id='topic+add_histogram2dcontour'></span><span id='topic+add_heatmap'></span><span id='topic+add_contour'></span><span id='topic+add_boxplot'></span><span id='topic+add_surface'></span><span id='topic+add_mesh'></span><span id='topic+add_scattergeo'></span><span id='topic+add_choropleth'></span>

<h3>Description</h3>

<p>Add trace(s) to a plotly visualization
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_trace(p, ..., data = NULL, inherit = TRUE)

add_markers(p, x = NULL, y = NULL, z = NULL, ..., data = NULL, inherit = TRUE)

add_text(
  p,
  x = NULL,
  y = NULL,
  z = NULL,
  text = NULL,
  ...,
  data = NULL,
  inherit = TRUE
)

add_paths(p, x = NULL, y = NULL, z = NULL, ..., data = NULL, inherit = TRUE)

add_lines(p, x = NULL, y = NULL, z = NULL, ..., data = NULL, inherit = TRUE)

add_segments(
  p,
  x = NULL,
  y = NULL,
  xend = NULL,
  yend = NULL,
  ...,
  data = NULL,
  inherit = TRUE
)

add_polygons(p, x = NULL, y = NULL, ..., data = NULL, inherit = TRUE)

add_sf(p, ..., x = ~x, y = ~y, data = NULL, inherit = TRUE)

add_table(p, ..., rownames = TRUE, data = NULL, inherit = TRUE)

add_ribbons(
  p,
  x = NULL,
  ymin = NULL,
  ymax = NULL,
  ...,
  data = NULL,
  inherit = TRUE
)

add_image(p, z = NULL, colormodel = NULL, ..., data = NULL, inherit = TRUE)

add_area(p, r = NULL, theta = NULL, t = NULL, ..., data = NULL, inherit = TRUE)

add_pie(p, values = NULL, labels = NULL, ..., data = NULL, inherit = TRUE)

add_bars(p, x = NULL, y = NULL, ..., data = NULL, inherit = TRUE)

add_histogram(p, x = NULL, y = NULL, ..., data = NULL, inherit = TRUE)

add_histogram2d(
  p,
  x = NULL,
  y = NULL,
  z = NULL,
  ...,
  data = NULL,
  inherit = TRUE
)

add_histogram2dcontour(
  p,
  x = NULL,
  y = NULL,
  z = NULL,
  ...,
  data = NULL,
  inherit = TRUE
)

add_heatmap(p, x = NULL, y = NULL, z = NULL, ..., data = NULL, inherit = TRUE)

add_contour(p, z = NULL, ..., data = NULL, inherit = TRUE)

add_boxplot(p, x = NULL, y = NULL, ..., data = NULL, inherit = TRUE)

add_surface(p, z = NULL, ..., data = NULL, inherit = TRUE)

add_mesh(p, x = NULL, y = NULL, z = NULL, ..., data = NULL, inherit = TRUE)

add_scattergeo(p, ...)

add_choropleth(p, z = NULL, ..., data = NULL, inherit = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_trace_+3A_p">p</code></td>
<td>
<p>a plotly object</p>
</td></tr>
<tr><td><code id="add_trace_+3A_...">...</code></td>
<td>
<p>Arguments (i.e., attributes) passed along to the trace <code>type</code>.
See <code><a href="#topic+schema">schema()</a></code> for a list of acceptable attributes for a given trace <code>type</code>
(by going to <code>traces</code> -&gt; <code>type</code> -&gt; <code>attributes</code>). Note that attributes
provided at this level may override other arguments
(e.g. <code>plot_ly(x = 1:10, y = 1:10, color = I("red"), marker = list(color = "blue"))</code>).</p>
</td></tr>
<tr><td><code id="add_trace_+3A_data">data</code></td>
<td>
<p>A data frame (optional) or <a href="crosstalk.html#topic+SharedData">crosstalk::SharedData</a> object.</p>
</td></tr>
<tr><td><code id="add_trace_+3A_inherit">inherit</code></td>
<td>
<p>inherit attributes from <code><a href="#topic+plot_ly">plot_ly()</a></code>?</p>
</td></tr>
<tr><td><code id="add_trace_+3A_x">x</code></td>
<td>
<p>the x variable.</p>
</td></tr>
<tr><td><code id="add_trace_+3A_y">y</code></td>
<td>
<p>the y variable.</p>
</td></tr>
<tr><td><code id="add_trace_+3A_z">z</code></td>
<td>
<p>a numeric matrix (unless <code><a href="#topic+add_image">add_image()</a></code>, which wants a raster object, see <code><a href="grDevices.html#topic+as.raster">as.raster()</a></code>).</p>
</td></tr>
<tr><td><code id="add_trace_+3A_text">text</code></td>
<td>
<p>textual labels.</p>
</td></tr>
<tr><td><code id="add_trace_+3A_xend">xend</code></td>
<td>
<p>&quot;final&quot; x position (in this context, x represents &quot;start&quot;)</p>
</td></tr>
<tr><td><code id="add_trace_+3A_yend">yend</code></td>
<td>
<p>&quot;final&quot; y position (in this context, y represents &quot;start&quot;)</p>
</td></tr>
<tr><td><code id="add_trace_+3A_rownames">rownames</code></td>
<td>
<p>whether or not to display the rownames of <code>data</code>.</p>
</td></tr>
<tr><td><code id="add_trace_+3A_ymin">ymin</code></td>
<td>
<p>a variable used to define the lower boundary of a polygon.</p>
</td></tr>
<tr><td><code id="add_trace_+3A_ymax">ymax</code></td>
<td>
<p>a variable used to define the upper boundary of a polygon.</p>
</td></tr>
<tr><td><code id="add_trace_+3A_colormodel">colormodel</code></td>
<td>
<p>Sets the colormodel for image traces if <code>z</code> is not a raster object.
If <code>z</code> is a raster object (see <code><a href="grDevices.html#topic+as.raster">as.raster()</a></code>), the <code>'rgba'</code> colormodel is always used.</p>
</td></tr>
<tr><td><code id="add_trace_+3A_r">r</code></td>
<td>
<p>Sets the radial coordinates.</p>
</td></tr>
<tr><td><code id="add_trace_+3A_theta">theta</code></td>
<td>
<p>Sets the angular coordinates.</p>
</td></tr>
<tr><td><code id="add_trace_+3A_t">t</code></td>
<td>
<p>Deprecated. Use <code>theta</code> instead.</p>
</td></tr>
<tr><td><code id="add_trace_+3A_values">values</code></td>
<td>
<p>the value to associated with each slice of the pie.</p>
</td></tr>
<tr><td><code id="add_trace_+3A_labels">labels</code></td>
<td>
<p>the labels (categories) corresponding to <code>values</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>References</h3>

<p><a href="https://plotly-r.com/overview.html">https://plotly-r.com/overview.html</a>
</p>
<p><a href="https://plotly.com/r/">https://plotly.com/r/</a>
</p>
<p><a href="https://plotly.com/r/reference/">https://plotly.com/r/reference/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot_ly">plot_ly()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# the `plot_ly()` function initiates an object, and if no trace type
# is specified, it sets a sensible default
p &lt;- plot_ly(economics, x = ~date, y = ~uempmed)
p

# some `add_*()` functions are a specific case of a trace type
# for example, `add_markers()` is a scatter trace with mode of markers
add_markers(p)

# scatter trace with mode of text
add_text(p, text = "%")

# scatter trace with mode of lines 
add_paths(p)

# like `add_paths()`, but ensures points are connected according to `x`
add_lines(p)

# if you prefer to work with plotly.js more directly, can always
# use `add_trace()` and specify the type yourself
add_trace(p, type = "scatter", mode = "markers+lines")

# mappings provided to `plot_ly()` are "global", but can be overwritten
plot_ly(economics, x = ~date, y = ~uempmed, color = I("red"), showlegend = FALSE) %&gt;% 
  add_lines() %&gt;%
  add_markers(color = ~pop)

# a number of `add_*()` functions are special cases of the scatter trace
plot_ly(economics, x = ~date) %&gt;% 
  add_ribbons(ymin = ~pce - 1e3, ymax = ~pce + 1e3)

# use `group_by()` (or `group2NA()`) to apply visual mapping
# once per group (e.g. one line per group)
txhousing %&gt;% 
  group_by(city) %&gt;% 
  plot_ly(x = ~date, y = ~median) %&gt;%
  add_lines(color = I("black"))

## Not run: 
# use `add_sf()` or `add_polygons()` to create geo-spatial maps
# http://blog.cpsievert.me/2018/03/30/visualizing-geo-spatial-data-with-sf-and-plotly/
if (requireNamespace("sf", quietly = TRUE)) {
  nc &lt;- sf::st_read(system.file("shape/nc.shp", package = "sf"), quiet = TRUE)
  plot_ly() %&gt;% add_sf(data = nc)
}

# univariate summary statistics
plot_ly(mtcars, x = ~factor(vs), y = ~mpg) %&gt;% 
  add_boxplot()
plot_ly(mtcars, x = ~factor(vs), y = ~mpg) %&gt;% 
  add_trace(type = "violin")
  
# `add_histogram()` does binning for you...
mtcars %&gt;%
  plot_ly(x = ~factor(vs)) %&gt;%
  add_histogram()
  
# ...but you can 'pre-compute' bar heights in R
mtcars %&gt;%
  dplyr::count(vs) %&gt;%
  plot_ly(x = ~vs, y = ~n) %&gt;%
  add_bars()

# the 2d analogy of add_histogram() is add_histogram2d()/add_histogram2dcontour()
library(MASS)
(p &lt;- plot_ly(geyser, x = ~waiting, y = ~duration))
add_histogram2d(p)
add_histogram2dcontour(p)

# the 2d analogy of add_bars() is add_heatmap()/add_contour()
# (i.e., bin counts must be pre-specified)
den &lt;- kde2d(geyser$waiting, geyser$duration)
p &lt;- plot_ly(x = den$x, y = den$y, z = den$z)
add_heatmap(p)
add_contour(p)

# `add_table()` makes it easy to map a data frame to the table trace type
plot_ly(economics) %&gt;% 
  add_table()

# pie charts!
ds &lt;- data.frame(labels = c("A", "B", "C"), values = c(10, 40, 60))
plot_ly(ds, labels = ~labels, values = ~values) %&gt;%
  add_pie() %&gt;%
  layout(title = "Basic Pie Chart using Plotly")
  
data(wind)
plot_ly(wind, r = ~r, theta = ~t) %&gt;% 
  add_area(color = ~nms) %&gt;%
  layout(
    polar = list(
      radialaxis = list(ticksuffix = "%"), 
      angularaxis = list(rotation = 90)
    )
  )

# ------------------------------------------------------------
# 3D chart types
# ------------------------------------------------------------
plot_ly(z = ~volcano) %&gt;% 
  add_surface()
plot_ly(x = c(0, 0, 1), y = c(0, 1, 0), z = c(0, 0, 0)) %&gt;% 
  add_mesh()

## End(Not run)

</code></pre>

<hr>
<h2 id='animation_opts'>Animation configuration options</h2><span id='topic+animation_opts'></span><span id='topic+animation'></span><span id='topic+animation_slider'></span><span id='topic+animation_button'></span>

<h3>Description</h3>

<p>Animations can be created by either using the <code>frame</code> argument in
<code><a href="#topic+plot_ly">plot_ly()</a></code> or the (unofficial) <code>frame</code> ggplot2 aesthetic in
<code><a href="#topic+ggplotly">ggplotly()</a></code>. By default, animations populate a play button
and slider component for controlling the state of the animation
(to pause an animation, click on a relevant location on the slider bar).
Both the play button and slider component transition between frames according
rules specified by <code><a href="#topic+animation_opts">animation_opts()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>animation_opts(
  p,
  frame = 500,
  transition = frame,
  easing = "linear",
  redraw = TRUE,
  mode = "immediate"
)

animation_slider(p, hide = FALSE, ...)

animation_button(p, ..., label)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="animation_opts_+3A_p">p</code></td>
<td>
<p>a plotly object.</p>
</td></tr>
<tr><td><code id="animation_opts_+3A_frame">frame</code></td>
<td>
<p>The amount of time between frames (in milliseconds).
Note that this amount should include the <code>transition</code>.</p>
</td></tr>
<tr><td><code id="animation_opts_+3A_transition">transition</code></td>
<td>
<p>The duration of the smooth transition between
frames (in milliseconds).</p>
</td></tr>
<tr><td><code id="animation_opts_+3A_easing">easing</code></td>
<td>
<p>The type of transition easing. See the list of options here
<a href="https://github.com/plotly/plotly.js/blob/master/src/plots/animation_attributes.js">https://github.com/plotly/plotly.js/blob/master/src/plots/animation_attributes.js</a></p>
</td></tr>
<tr><td><code id="animation_opts_+3A_redraw">redraw</code></td>
<td>
<p>Trigger a redraw of the plot at completion of the transition?
A redraw may significantly impact performance, but may be necessary to
update graphical elements that can't be transitioned.</p>
</td></tr>
<tr><td><code id="animation_opts_+3A_mode">mode</code></td>
<td>
<p>Describes how a new animate call interacts with currently-running
animations. If <code>immediate</code>, current animations are interrupted and
the new animation is started. If <code>next</code>, the current frame is allowed
to complete, after which the new animation is started. If <code>afterall</code>
all existing frames are animated to completion before the new animation
is started.</p>
</td></tr>
<tr><td><code id="animation_opts_+3A_hide">hide</code></td>
<td>
<p>remove the animation slider?</p>
</td></tr>
<tr><td><code id="animation_opts_+3A_...">...</code></td>
<td>
<p>for <code>animation_slider</code>, attributes are passed to a special
layout.sliders object tied to the animation frames.
The definition of these attributes may be found here
<a href="https://github.com/plotly/plotly.js/blob/master/src/components/sliders/attributes.js">https://github.com/plotly/plotly.js/blob/master/src/components/sliders/attributes.js</a>
For <code>animation_button</code>, arguments are passed to a special
layout.updatemenus button object tied to the animation
<a href="https://github.com/plotly/plotly.js/blob/master/src/components/updatemenus/attributes.js">https://github.com/plotly/plotly.js/blob/master/src/components/updatemenus/attributes.js</a></p>
</td></tr>
<tr><td><code id="animation_opts_+3A_label">label</code></td>
<td>
<p>a character string used for the animation button's label</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

df &lt;- data.frame(
  x = c(1, 2, 2, 1, 1, 2),
  y = c(1, 2, 2, 1, 1, 2),
  z = c(1, 1, 2, 2, 3, 3)
)
plot_ly(df) %&gt;%
  add_markers(x = 1.5, y = 1.5) %&gt;%
  add_markers(x = ~x, y = ~y, frame = ~z)

# it's a good idea to remove smooth transitions when there is
# no relationship between objects in each view
plot_ly(mtcars, x = ~wt, y = ~mpg, frame = ~cyl) %&gt;%
  animation_opts(transition = 0)

# works the same way with ggplotly
if (interactive()) {
  p &lt;- ggplot(txhousing, aes(month, median)) +
    geom_line(aes(group = year), alpha = 0.3) +
    geom_smooth() +
    geom_line(aes(frame = year, ids = month), color = "red") +
    facet_wrap(~ city)
 
  ggplotly(p, width = 1200, height = 900) %&gt;%
    animation_opts(1000)
}

  
#' # for more, see https://plotly.com/r/animating-views.html

</code></pre>

<hr>
<h2 id='api_create'>Tools for working with plotly's REST API (v2)</h2><span id='topic+api_create'></span><span id='topic+api_create.plotly'></span><span id='topic+api_create.ggplot'></span><span id='topic+api_create.data.frame'></span><span id='topic+api_download_plot'></span><span id='topic+api_download_grid'></span><span id='topic+api'></span>

<h3>Description</h3>

<p>Convenience functions for working with version 2 of plotly's REST API.
Upload R objects to a plotly account via <code>api_create()</code> and download
plotly objects via <code>api_download_plot()</code>/<code>api_download_grid()</code>.
For anything else, use <code>api()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>api_create(
  x = last_plot(),
  filename = NULL,
  fileopt = c("overwrite", "new"),
  sharing = c("public", "private", "secret"),
  ...
)

## S3 method for class 'plotly'
api_create(
  x = last_plot(),
  filename = NULL,
  fileopt = "overwrite",
  sharing = "public",
  ...
)

## S3 method for class 'ggplot'
api_create(
  x = last_plot(),
  filename = NULL,
  fileopt = "overwrite",
  sharing = "public",
  ...
)

## S3 method for class 'data.frame'
api_create(x, filename = NULL, fileopt = "overwrite", sharing = "public", ...)

api_download_plot(id, username)

api_download_grid(id, username)

api(endpoint = "/", verb = "GET", body = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="api_create_+3A_x">x</code></td>
<td>
<p>An R object to hosted on plotly's web platform.
Can be a plotly/ggplot2 object or a <a href="base.html#topic+data.frame">data.frame</a>.</p>
</td></tr>
<tr><td><code id="api_create_+3A_filename">filename</code></td>
<td>
<p>character vector naming file(s). If <code>x</code> is a plot,
can be a vector of length 2 naming both the plot AND the underlying grid.</p>
</td></tr>
<tr><td><code id="api_create_+3A_fileopt">fileopt</code></td>
<td>
<p>character string describing whether to &quot;overwrite&quot; existing
files or ensure &quot;new&quot; file(s) are always created.</p>
</td></tr>
<tr><td><code id="api_create_+3A_sharing">sharing</code></td>
<td>
<p>If 'public', anyone can view this graph. It will appear in
your profile and can appear in search engines. You do not need to be
logged in to Plotly to view this chart.
If 'private', only you can view this plot. It will not appear in the
Plotly feed, your profile, or search engines. You must be logged in to
Plotly to view this graph. You can privately share this graph with other
Plotly users in your online Plotly account and they will need to be logged
in to view this plot.
If 'secret', anyone with this secret link can view this chart. It will
not appear in the Plotly feed, your profile, or search engines.
If it is embedded inside a webpage or an IPython notebook, anybody who is
viewing that page will be able to view the graph.
You do not need to be logged in to view this plot.</p>
</td></tr>
<tr><td><code id="api_create_+3A_...">...</code></td>
<td>
<p>For <code>api()</code>, these arguments are passed onto
<code><a href="httr.html#topic+RETRY">httr::RETRY()</a></code>. For <code>api_create()</code>, these arguments are
included in the body of the HTTP request.</p>
</td></tr>
<tr><td><code id="api_create_+3A_id">id</code></td>
<td>
<p>a filename id.</p>
</td></tr>
<tr><td><code id="api_create_+3A_username">username</code></td>
<td>
<p>a plotly username.</p>
</td></tr>
<tr><td><code id="api_create_+3A_endpoint">endpoint</code></td>
<td>
<p>the endpoint (i.e., location) for the request.
To see a list of all available endpoints, call <code>api()</code>.
Any relevant query parameters should be included here (see examples).</p>
</td></tr>
<tr><td><code id="api_create_+3A_verb">verb</code></td>
<td>
<p>name of the HTTP verb to use (as in, <code><a href="httr.html#topic+RETRY">httr::RETRY()</a></code>).</p>
</td></tr>
<tr><td><code id="api_create_+3A_body">body</code></td>
<td>
<p>body of the HTTP request(as in, <code><a href="httr.html#topic+RETRY">httr::RETRY()</a></code>).
If this value is not already converted to JSON
(via <code><a href="jsonlite.html#topic+fromJSON">jsonlite::toJSON()</a></code>), it uses the internal <code>to_JSON()</code>
to ensure values are &quot;automatically unboxed&quot; (i.e., vec.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>References</h3>

<p><a href="https://api.plot.ly/v2">https://api.plot.ly/v2</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+signup">signup()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

## Not run: 

# ------------------------------------------------------------
# api_create() makes it easy to upload ggplot2/plotly objects
# and/or data frames to your plotly account
# ------------------------------------------------------------

# A data frame creates a plotly "grid". Printing one will take you 
# to the it's web address so you can start creating!
(m &lt;- api_create(mtcars))

# A plotly/ggplot2 object create a plotly "plot".
p &lt;- plot_ly(mtcars, x = ~factor(vs))
(r &lt;- api_create(p))

# api_create() returns metadata about the remote "file". Here is
# one way you could use that metadata to download a plot for local use:
fileID &lt;- strsplit(r$file$fid, ":")[[1]]
layout(
  api_download_plot(fileID[2], fileID[1]),
  title = sprintf("Local version of &lt;a href='%s'&gt;this&lt;/a&gt; plot", r$file$web_url)
)

------------------------------------------------------------
# The api() function provides a low-level interface for performing 
# any action at any endpoint! It always returns a list.
# ------------------------------------------------------------

# list all the endpoints
api()

# search the entire platform!
# see https://api.plot.ly/v2/search
api("search?q=overdose")
api("search?q=plottype:pie trump fake")

# these examples will require a user account
usr &lt;- Sys.getenv("plotly_username", NA)
if (!is.na(usr)) {
  # your account info https://api.plot.ly/v2/#users
  api(sprintf("users/%s", usr))
  # your folders/files https://api.plot.ly/v2/folders#user
  api(sprintf("folders/home?user=%s", usr))
}

# Retrieve a specific file https://api.plot.ly/v2/files#retrieve
api("files/cpsievert:14681")

# change the filename https://api.plot.ly/v2/files#update
# (note: this won't work unless you have proper credentials to the relevant account)
api("files/cpsievert:14681", "PATCH", list(filename = "toy file")) 

# Copy a file https://api.plot.ly/v2/files#lookup
api("files/cpsievert:14681/copy", "POST")

# Create a folder https://api.plot.ly/v2/folders#create
api("folders", "POST", list(path = "/starts/at/root/and/ends/here"))


## End(Not run)

</code></pre>

<hr>
<h2 id='as_widget'>Convert a list to a plotly htmlwidget object</h2><span id='topic+as_widget'></span>

<h3>Description</h3>

<p>Convert a list to a plotly htmlwidget object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_widget(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_widget_+3A_x">x</code></td>
<td>
<p>a plotly object.</p>
</td></tr>
<tr><td><code id="as_widget_+3A_...">...</code></td>
<td>
<p>other options passed onto <code>htmlwidgets::createWidget</code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>

trace &lt;- list(x = 1, y = 1)
obj &lt;- list(data = list(trace), layout = list(title = "my plot"))
as_widget(obj)

</code></pre>

<hr>
<h2 id='as.widget'>Convert a plotly object to an htmlwidget object</h2><span id='topic+as.widget'></span>

<h3>Description</h3>

<p>This function was deprecated in  4.0.0,
as plotly objects are now htmlwidget objects,
so there is no need to convert them.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.widget(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.widget_+3A_x">x</code></td>
<td>
<p>a plotly object.</p>
</td></tr>
<tr><td><code id="as.widget_+3A_...">...</code></td>
<td>
<p>other options passed onto <code>htmlwidgets::createWidget</code></p>
</td></tr>
</table>

<hr>
<h2 id='attrs_selected'>Specify attributes of selection traces</h2><span id='topic+attrs_selected'></span>

<h3>Description</h3>

<p>By default the name of the selection trace derives from the selected values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>attrs_selected(opacity = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="attrs_selected_+3A_opacity">opacity</code></td>
<td>
<p>a number between 0 and 1 specifying the overall opacity of
the selected trace</p>
</td></tr>
<tr><td><code id="attrs_selected_+3A_...">...</code></td>
<td>
<p>other trace attributes attached to the selection trace.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>

<hr>
<h2 id='bbox'>Estimate bounding box of a rotated string</h2><span id='topic+bbox'></span>

<h3>Description</h3>

<p>Estimate bounding box of a rotated string
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bbox(txt = "foo", angle = 0, size = 12)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bbox_+3A_txt">txt</code></td>
<td>
<p>a character string of length 1</p>
</td></tr>
<tr><td><code id="bbox_+3A_angle">angle</code></td>
<td>
<p>sets the angle of the tick labels with respect to the
horizontal (e.g., <code>tickangle</code> of -90 draws the tick labels vertically)</p>
</td></tr>
<tr><td><code id="bbox_+3A_size">size</code></td>
<td>
<p>vertical size of a character</p>
</td></tr>
</table>


<h3>References</h3>

<p>https://www.dropbox.com/s/nc6968prgw8ne4w/bbox.pdf?dl=0
</p>

<hr>
<h2 id='colorbar'>Modify the colorbar</h2><span id='topic+colorbar'></span>

<h3>Description</h3>

<p>Modify the colorbar
</p>


<h3>Usage</h3>

<pre><code class='language-R'>colorbar(p, ..., limits = NULL, which = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="colorbar_+3A_p">p</code></td>
<td>
<p>a plotly object</p>
</td></tr>
<tr><td><code id="colorbar_+3A_...">...</code></td>
<td>
<p>arguments are documented here
<a href="https://plotly.com/r/reference/#scatter-marker-colorbar">https://plotly.com/r/reference/#scatter-marker-colorbar</a>.</p>
</td></tr>
<tr><td><code id="colorbar_+3A_limits">limits</code></td>
<td>
<p>numeric vector of length 2. Set the extent of the colorbar scale.</p>
</td></tr>
<tr><td><code id="colorbar_+3A_which">which</code></td>
<td>
<p>colorbar to modify? Should only be relevant for subplots with
multiple colorbars.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

p &lt;- plot_ly(mtcars, x = ~wt, y = ~mpg, color = ~cyl)

# pass any colorbar attribute -- 
# https://plotly.com/r/reference/#scatter-marker-colorbar
colorbar(p, len = 0.5)

# Expand the limits of the colorbar
colorbar(p, limits = c(0, 20))
# values outside the colorbar limits are considered "missing"
colorbar(p, limits = c(5, 6))

# also works on colorbars generated via a z value
corr &lt;- cor(diamonds[vapply(diamonds, is.numeric, logical(1))])
plot_ly(x = rownames(corr), y = colnames(corr), z = corr) %&gt;%
 add_heatmap() %&gt;%
 colorbar(limits = c(-1, 1))

</code></pre>

<hr>
<h2 id='config'>Set the default configuration for plotly</h2><span id='topic+config'></span>

<h3>Description</h3>

<p>Set the default configuration for plotly
</p>


<h3>Usage</h3>

<pre><code class='language-R'>config(
  p,
  ...,
  cloud = FALSE,
  showSendToCloud = cloud,
  locale = NULL,
  mathjax = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="config_+3A_p">p</code></td>
<td>
<p>a plotly object</p>
</td></tr>
<tr><td><code id="config_+3A_...">...</code></td>
<td>
<p>these arguments are documented at
<a href="https://github.com/plotly/plotly.js/blob/master/src/plot_api/plot_config.js">https://github.com/plotly/plotly.js/blob/master/src/plot_api/plot_config.js</a></p>
</td></tr>
<tr><td><code id="config_+3A_cloud">cloud</code></td>
<td>
<p>deprecated. Use <code>showSendToCloud</code> instead.</p>
</td></tr>
<tr><td><code id="config_+3A_showsendtocloud">showSendToCloud</code></td>
<td>
<p>include the send data to cloud button?</p>
</td></tr>
<tr><td><code id="config_+3A_locale">locale</code></td>
<td>
<p>locale to use. See <a href="https://github.com/plotly/plotly.js/tree/master/dist#to-include-localization">here</a> for more info.</p>
</td></tr>
<tr><td><code id="config_+3A_mathjax">mathjax</code></td>
<td>
<p>add <a href="https://github.com/plotly/plotly.js/tree/master/dist#to-support-mathjax">MathJax rendering support</a>.
If <code>"cdn"</code>, mathjax is loaded externally (meaning an internet connection is needed for
TeX rendering). If <code>"local"</code>, the PLOTLY_MATHJAX_PATH environment variable must be
set to the location (a local file path) of MathJax. IMPORTANT: <strong>plotly</strong> uses SVG-based
mathjax rendering which doesn't play nicely with HTML-based rendering
(e.g., <strong>rmarkdown</strong> documents and <strong>shiny</strong> apps). To leverage both types of rendering,
you must <code style="white-space: pre;">&#8288;&lt;iframe&gt;&#8288;</code> your plotly graph(s) into the larger document
(see <a href="https://github.com/plotly/plotly.R/blob/master/inst/examples/rmd/MathJax/index.Rmd">here</a>
for an <strong>rmarkdown</strong> example and
<a href="https://github.com/plotly/plotly.R/blob/master/inst/examples/rmd/MathJax/index.Rmd">here</a> for a <strong>shiny</strong> example).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# remove the plotly logo and collaborate button from modebar
config(plot_ly(), displaylogo = FALSE, collaborate = FALSE)

# enable mathjax
# see more examples at https://plotly.com/r/LaTeX/
plot_ly(x = c(1, 2, 3, 4), y = c(1, 4, 9, 16)) %&gt;%
  layout(title = TeX("\\text{Some mathjax: }\\alpha+\\beta x")) %&gt;%
  config(mathjax = "cdn")

# change the language used to render date axes and on-graph text 
# (e.g., modebar buttons)
today &lt;- Sys.Date()
x &lt;- seq.Date(today, today + 360, by = "day")
p &lt;- plot_ly(x = x, y = rnorm(length(x))) %&gt;%
  add_lines()

# japanese
config(p, locale = "ja")
# german
config(p, locale = "de")
# spanish
config(p, locale = "es")
# chinese
config(p, locale = "zh-CN")

</code></pre>

<hr>
<h2 id='embed_notebook'>Embed a plot as an iframe into a Jupyter Notebook</h2><span id='topic+embed_notebook'></span>

<h3>Description</h3>

<p>Embed a plot as an iframe into a Jupyter Notebook
</p>


<h3>Usage</h3>

<pre><code class='language-R'>embed_notebook(x, width = NULL, height = NULL, file = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="embed_notebook_+3A_x">x</code></td>
<td>
<p>a plotly object</p>
</td></tr>
<tr><td><code id="embed_notebook_+3A_width">width</code></td>
<td>
<p>attribute of the iframe. If <code>NULL</code>, the width in
<code>plot_ly</code> is used. If that is also <code>NULL</code>, '100%' is the default.</p>
</td></tr>
<tr><td><code id="embed_notebook_+3A_height">height</code></td>
<td>
<p>attribute of the iframe. If <code>NULL</code>, the height in
<code>plot_ly</code> is used. If that is also <code>NULL</code>, '400px' is the default.</p>
</td></tr>
<tr><td><code id="embed_notebook_+3A_file">file</code></td>
<td>
<p>deprecated.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>

<hr>
<h2 id='event_data'>Access plotly user input event data in shiny</h2><span id='topic+event_data'></span>

<h3>Description</h3>

<p>This function must be called within a reactive shiny context.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>event_data(
  event = c("plotly_hover", "plotly_unhover", "plotly_click", "plotly_doubleclick",
    "plotly_selected", "plotly_selecting", "plotly_brushed", "plotly_brushing",
    "plotly_deselect", "plotly_relayout", "plotly_restyle", "plotly_legendclick",
    "plotly_legenddoubleclick", "plotly_clickannotation", "plotly_afterplot",
    "plotly_sunburstclick"),
  source = "A",
  session = shiny::getDefaultReactiveDomain(),
  priority = c("input", "event")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="event_data_+3A_event">event</code></td>
<td>
<p>The type of plotly event. All supported events are listed in the
function signature above (i.e., the usage section).</p>
</td></tr>
<tr><td><code id="event_data_+3A_source">source</code></td>
<td>
<p>a character string of length 1. Match the value of this string
with the <code>source</code> argument in <code><a href="#topic+plot_ly">plot_ly()</a></code> (or <code><a href="#topic+ggplotly">ggplotly()</a></code>) to respond to
events emitted from that specific plot.</p>
</td></tr>
<tr><td><code id="event_data_+3A_session">session</code></td>
<td>
<p>a shiny session object (the default should almost always be used).</p>
</td></tr>
<tr><td><code id="event_data_+3A_priority">priority</code></td>
<td>
<p>the priority of the corresponding shiny input value.
If equal to <code>"event"</code>, then <code><a href="#topic+event_data">event_data()</a></code> always triggers re-execution,
instead of re-executing only when the relevant shiny input value changes
(the default).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>References</h3>


<ul>
<li> <p><a href="https://plotly-r.com/linking-views-with-shiny.html#shiny-plotly-inputs">https://plotly-r.com/linking-views-with-shiny.html#shiny-plotly-inputs</a>
</p>
</li>
<li> <p><a href="https://plotly.com/javascript/plotlyjs-function-reference/">https://plotly.com/javascript/plotlyjs-function-reference/</a>
</p>
</li></ul>



<h3>See Also</h3>

<p><a href="#topic+event_register">event_register</a>, <a href="#topic+event_unregister">event_unregister</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
plotly_example("shiny", "event_data")

## End(Not run)
</code></pre>

<hr>
<h2 id='event_register'>Register a shiny input value</h2><span id='topic+event_register'></span>

<h3>Description</h3>

<p>Register a shiny input value
</p>


<h3>Usage</h3>

<pre><code class='language-R'>event_register(p, event = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="event_register_+3A_p">p</code></td>
<td>
<p>a plotly object.</p>
</td></tr>
<tr><td><code id="event_register_+3A_event">event</code></td>
<td>
<p>The type of plotly event. All supported events are listed in the
function signature above (i.e., the usage section).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>See Also</h3>

<p><a href="#topic+event_data">event_data</a>
</p>

<hr>
<h2 id='event_unregister'>Un-register a shiny input value</h2><span id='topic+event_unregister'></span>

<h3>Description</h3>

<p>Un-register a shiny input value
</p>


<h3>Usage</h3>

<pre><code class='language-R'>event_unregister(p, event = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="event_unregister_+3A_p">p</code></td>
<td>
<p>a plotly object.</p>
</td></tr>
<tr><td><code id="event_unregister_+3A_event">event</code></td>
<td>
<p>The type of plotly event. All supported events are listed in the
function signature above (i.e., the usage section).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>See Also</h3>

<p><a href="#topic+event_data">event_data</a>
</p>

<hr>
<h2 id='export'>Export a plotly graph to a static file</h2><span id='topic+export'></span>

<h3>Description</h3>

<p>This function is in the process of being deprecated (use <a href="#topic+orca">orca</a> instead).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>export(p = last_plot(), file = "plotly.png", selenium = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="export_+3A_p">p</code></td>
<td>
<p>a plotly or ggplot object.</p>
</td></tr>
<tr><td><code id="export_+3A_file">file</code></td>
<td>
<p>a filename. The file type is inferred from the file extension.
Valid extensions include 'jpeg' | 'png' | 'webp' | 'svg' | 'pdf'</p>
</td></tr>
<tr><td><code id="export_+3A_selenium">selenium</code></td>
<td>
<p>used only when <code>p</code> is a WebGL plot or the output
format is 'webp' or 'svg'. Should be an object of class &quot;rsClientServer&quot;
returned by <code>RSelenium::rsDriver</code>.</p>
</td></tr>
<tr><td><code id="export_+3A_...">...</code></td>
<td>
<p>if <code>p</code> is non-WebGL and the output file format is
jpeg/png/pdf arguments are passed along to <code>webshot::webshot()</code>.
Otherwise, they are ignored.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For SVG plots, a screenshot is taken via <code>webshot::webshot()</code>.
Since <code>phantomjs</code> (and hence <code>webshot</code>) does not support WebGL,
the RSelenium package is used for exporting WebGL plots.
</p>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>

<hr>
<h2 id='geom2trace'>Convert a &quot;basic&quot; geoms to a plotly.js trace.</h2><span id='topic+geom2trace'></span>

<h3>Description</h3>

<p>This function makes it possible to convert ggplot2 geoms that
are not included with ggplot2 itself. Users shouldn't need to use
this function. It exists purely to allow other package authors to write
their own conversion method(s).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom2trace(data, params, p)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="geom2trace_+3A_data">data</code></td>
<td>
<p>the data returned by <code>plotly::to_basic</code>.</p>
</td></tr>
<tr><td><code id="geom2trace_+3A_params">params</code></td>
<td>
<p>parameters for the geom, statistic, and 'constant' aesthetics</p>
</td></tr>
<tr><td><code id="geom2trace_+3A_p">p</code></td>
<td>
<p>a ggplot2 object (the conversion may depend on scales, for instance).</p>
</td></tr>
</table>

<hr>
<h2 id='get_figure'>Request a figure object</h2><span id='topic+get_figure'></span>

<h3>Description</h3>

<p>Deprecated: see <code><a href="#topic+api_download_plot">api_download_plot()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_figure(username, id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_figure_+3A_username">username</code></td>
<td>
<p>corresponding username for the figure.</p>
</td></tr>
<tr><td><code id="get_figure_+3A_id">id</code></td>
<td>
<p>of the Plotly figure.</p>
</td></tr>
</table>

<hr>
<h2 id='gg2list'>Convert a ggplot to a list.</h2><span id='topic+gg2list'></span>

<h3>Description</h3>

<p>Convert a ggplot to a list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gg2list(
  p,
  width = NULL,
  height = NULL,
  tooltip = "all",
  dynamicTicks = FALSE,
  layerData = 1,
  originalData = TRUE,
  source = "A",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gg2list_+3A_p">p</code></td>
<td>
<p>ggplot2 plot.</p>
</td></tr>
<tr><td><code id="gg2list_+3A_width">width</code></td>
<td>
<p>Width of the plot in pixels (optional, defaults to automatic sizing).</p>
</td></tr>
<tr><td><code id="gg2list_+3A_height">height</code></td>
<td>
<p>Height of the plot in pixels (optional, defaults to automatic sizing).</p>
</td></tr>
<tr><td><code id="gg2list_+3A_tooltip">tooltip</code></td>
<td>
<p>a character vector specifying which aesthetic tooltips to show in the
tooltip. The default, &quot;all&quot;, means show all the aesthetic tooltips
(including the unofficial &quot;text&quot; aesthetic).</p>
</td></tr>
<tr><td><code id="gg2list_+3A_dynamicticks">dynamicTicks</code></td>
<td>
<p>accepts the following values: <code>FALSE</code>, <code>TRUE</code>, <code>"x"</code>, or <code>"y"</code>.
Dynamic ticks are useful for updating ticks in response to zoom/pan/filter
interactions; however, there is no guarantee they reproduce axis tick text
as they would appear in the static ggplot2 image.</p>
</td></tr>
<tr><td><code id="gg2list_+3A_layerdata">layerData</code></td>
<td>
<p>data from which layer should be returned?</p>
</td></tr>
<tr><td><code id="gg2list_+3A_originaldata">originalData</code></td>
<td>
<p>should the &quot;original&quot; or &quot;scaled&quot; data be returned?</p>
</td></tr>
<tr><td><code id="gg2list_+3A_source">source</code></td>
<td>
<p>a character string of length 1. Match the value of this string
with the source argument in <code><a href="#topic+event_data">event_data()</a></code> to retrieve the
event data corresponding to a specific plot (shiny apps can have multiple plots).</p>
</td></tr>
<tr><td><code id="gg2list_+3A_...">...</code></td>
<td>
<p>currently not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a 'built' plotly object (list with names &quot;data&quot; and &quot;layout&quot;).
</p>

<hr>
<h2 id='ggplotly'>Convert ggplot2 to plotly</h2><span id='topic+ggplotly'></span>

<h3>Description</h3>

<p>This function converts a <code><a href="ggplot2.html#topic+ggplot">ggplot2::ggplot()</a></code> object to a
plotly object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggplotly(
  p = ggplot2::last_plot(),
  width = NULL,
  height = NULL,
  tooltip = "all",
  dynamicTicks = FALSE,
  layerData = 1,
  originalData = TRUE,
  source = "A",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ggplotly_+3A_p">p</code></td>
<td>
<p>a ggplot object.</p>
</td></tr>
<tr><td><code id="ggplotly_+3A_width">width</code></td>
<td>
<p>Width of the plot in pixels (optional, defaults to automatic sizing).</p>
</td></tr>
<tr><td><code id="ggplotly_+3A_height">height</code></td>
<td>
<p>Height of the plot in pixels (optional, defaults to automatic sizing).</p>
</td></tr>
<tr><td><code id="ggplotly_+3A_tooltip">tooltip</code></td>
<td>
<p>a character vector specifying which aesthetic mappings to show
in the tooltip. The default, &quot;all&quot;, means show all the aesthetic mappings
(including the unofficial &quot;text&quot; aesthetic). The order of variables here will
also control the order they appear. For example, use
<code>tooltip = c("y", "x", "colour")</code> if you want y first, x second, and
colour last.</p>
</td></tr>
<tr><td><code id="ggplotly_+3A_dynamicticks">dynamicTicks</code></td>
<td>
<p>should plotly.js dynamically generate axis tick labels?
Dynamic ticks are useful for updating ticks in response to zoom/pan
interactions; however, they can not always reproduce labels as they
would appear in the static ggplot2 image.</p>
</td></tr>
<tr><td><code id="ggplotly_+3A_layerdata">layerData</code></td>
<td>
<p>data from which layer should be returned?</p>
</td></tr>
<tr><td><code id="ggplotly_+3A_originaldata">originalData</code></td>
<td>
<p>should the &quot;original&quot; or &quot;scaled&quot; data be returned?</p>
</td></tr>
<tr><td><code id="ggplotly_+3A_source">source</code></td>
<td>
<p>a character string of length 1. Match the value of this string
with the source argument in <code><a href="#topic+event_data">event_data()</a></code> to retrieve the
event data corresponding to a specific plot (shiny apps can have multiple plots).</p>
</td></tr>
<tr><td><code id="ggplotly_+3A_...">...</code></td>
<td>
<p>arguments passed onto methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Conversion of relative sizes depends on the size of the current
graphics device (if no device is open, width/height of a new (off-screen)
device defaults to 640/480). In other words, <code>height</code> and
<code>width</code> must be specified at runtime to ensure sizing is correct.
For examples on how to specify the output container's <code>height</code>/<code>width</code> in a
shiny app, see <code>plotly_example("shiny", "ggplotly_sizing")</code>.
</p>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>References</h3>

<p><a href="https://plotly.com/ggplot2/">https://plotly.com/ggplot2/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot_ly">plot_ly()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# simple example
ggpenguins &lt;- qplot(bill_length_mm , body_mass_g, 
data = palmerpenguins::penguins, color = species)
ggplotly(ggpenguins)

data(canada.cities, package = "maps")
viz &lt;- ggplot(canada.cities, aes(long, lat)) +
  borders(regions = "canada") +
  coord_equal() +
  geom_point(aes(text = name, size = pop), colour = "red", alpha = 1/2)
ggplotly(viz, tooltip = c("text", "size"))

# linked scatterplot brushing
d &lt;- highlight_key(mtcars)
qplot(data = d, x = mpg, y = wt) %&gt;%
  subplot(qplot(data = d, x = mpg, y = vs)) %&gt;% 
  layout(title = "Click and drag to select points") %&gt;%
  highlight("plotly_selected")


# more brushing (i.e. highlighting) examples
demo("crosstalk-highlight-ggplotly", package = "plotly")

# client-side linked brushing in a scatterplot matrix
highlight_key(palmerpenguins::penguins) %&gt;%
  GGally::ggpairs(aes(colour = Species), columns = 1:4) %&gt;%
  ggplotly(tooltip = c("x", "y", "colour")) %&gt;%
  highlight("plotly_selected")

## End(Not run)

</code></pre>

<hr>
<h2 id='group2NA'>Separate groups with missing values</h2><span id='topic+group2NA'></span>

<h3>Description</h3>

<p>This function is used internally by plotly, but may also be useful to some
power users. The details section explains when and why this function is useful.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>group2NA(
  data,
  groupNames = "group",
  nested = NULL,
  ordered = NULL,
  retrace.first = inherits(data, "GeomPolygon")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="group2NA_+3A_data">data</code></td>
<td>
<p>a data frame.</p>
</td></tr>
<tr><td><code id="group2NA_+3A_groupnames">groupNames</code></td>
<td>
<p>character vector of grouping variable(s)</p>
</td></tr>
<tr><td><code id="group2NA_+3A_nested">nested</code></td>
<td>
<p>other variables that group should be nested
(i.e., ordered) within.</p>
</td></tr>
<tr><td><code id="group2NA_+3A_ordered">ordered</code></td>
<td>
<p>a variable to arrange by (within nested &amp; groupNames). This
is useful primarily for ordering by x</p>
</td></tr>
<tr><td><code id="group2NA_+3A_retrace.first">retrace.first</code></td>
<td>
<p>should the first row of each group be appended to the
last row? This is useful for enclosing polygons with lines.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If a group of scatter traces share the same non-positional characteristics
(i.e., color, fill, etc), it is more efficient to draw them as a single trace
with missing values that separate the groups (instead of multiple traces),
In this case, one should also take care to make sure
<a href="https://plotly.com/r/reference/#scatter-connectgaps">connectgaps</a>
is set to <code>FALSE</code>.
</p>


<h3>Value</h3>

<p>a data.frame with rows ordered by: <code>nested</code>,
then <code>groupNames</code>, then <code>ordered</code>. As long as <code>groupNames</code>
contains valid variable names, new rows will also be inserted to separate
the groups.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# note the insertion of new rows with missing values 
group2NA(mtcars, "vs", "cyl")

# need to group lines by city somehow!
plot_ly(txhousing, x = ~date, y = ~median) %&gt;% add_lines()

# instead of using group_by(), you could use group2NA()
tx &lt;- group2NA(txhousing, "city")
plot_ly(tx, x = ~date, y = ~median) %&gt;% add_lines()

# add_lines() will ensure paths are sorted by x, but this is equivalent
tx &lt;- group2NA(txhousing, "city", ordered = "date")
plot_ly(tx, x = ~date, y = ~median) %&gt;% add_paths()

</code></pre>

<hr>
<h2 id='hide_colorbar'>Hide color bar(s)</h2><span id='topic+hide_colorbar'></span>

<h3>Description</h3>

<p>Hide color bar(s)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hide_colorbar(p)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hide_colorbar_+3A_p">p</code></td>
<td>
<p>a plotly object.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+hide_legend">hide_legend()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

p &lt;- plot_ly(mtcars, x = ~wt, y = ~cyl, color = ~cyl)
hide_colorbar(p)
  

</code></pre>

<hr>
<h2 id='hide_guides'>Hide guides (legends and colorbars)</h2><span id='topic+hide_guides'></span>

<h3>Description</h3>

<p>Hide guides (legends and colorbars)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hide_guides(p)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hide_guides_+3A_p">p</code></td>
<td>
<p>a plotly object.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+hide_legend">hide_legend()</a></code>, <code><a href="#topic+hide_colorbar">hide_colorbar()</a></code>
</p>

<hr>
<h2 id='hide_legend'>Hide legend</h2><span id='topic+hide_legend'></span>

<h3>Description</h3>

<p>Hide legend
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hide_legend(p)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hide_legend_+3A_p">p</code></td>
<td>
<p>a plotly object.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+hide_colorbar">hide_colorbar()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

p &lt;- plot_ly(mtcars, x = ~wt, y = ~cyl, color = ~factor(cyl))
hide_legend(p)

</code></pre>

<hr>
<h2 id='highlight'>Query graphical elements in multiple linked views</h2><span id='topic+highlight'></span>

<h3>Description</h3>

<p>This function sets a variety of options for brushing (i.e., highlighting)
multiple plots. These options are primarily designed for linking
multiple plotly graphs, and may not behave as expected when linking
plotly to another htmlwidget package via crosstalk. In some cases,
other htmlwidgets will respect these options, such as persistent selection
in leaflet (see <code>demo("highlight-leaflet", package = "plotly")</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>highlight(
  p,
  on = "plotly_click",
  off,
  persistent = getOption("persistent", FALSE),
  dynamic = FALSE,
  color = NULL,
  selectize = FALSE,
  defaultValues = NULL,
  opacityDim = getOption("opacityDim", 0.2),
  selected = attrs_selected(),
  debounce = 0,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="highlight_+3A_p">p</code></td>
<td>
<p>a plotly visualization.</p>
</td></tr>
<tr><td><code id="highlight_+3A_on">on</code></td>
<td>
<p>turn on a selection on which event(s)? To disable on events
altogether, use <code>NULL</code>. Currently the following are supported:
</p>

<ul>
<li> <p><code>'plotly_click'</code>
</p>
</li>
<li> <p><code>'plotly_hover'</code>
</p>
</li>
<li> <p><code>'plotly_selected'</code>: triggered through rectangular
(layout.dragmode = 'select') or lasso (layout.dragmode = 'lasso') brush.
</p>
</li></ul>
</td></tr>
<tr><td><code id="highlight_+3A_off">off</code></td>
<td>
<p>turn off a selection on which event(s)? To disable off
events altogether, use <code>NULL</code>. Currently the following are supported:
</p>

<ul>
<li> <p><code>'plotly_doubleclick'</code>: triggered on a double mouse click while
(layout.dragmode = 'zoom') or (layout.dragmode = 'pan')
</p>
</li>
<li> <p><code>'plotly_deselect'</code>: triggered on a double mouse click while
(layout.dragmode = 'select') or (layout.dragmode = 'lasso')
</p>
</li>
<li> <p><code>'plotly_relayout'</code>: triggered whenever axes are rescaled
(i.e., clicking the home button in the modebar) or whenever the height/width
of the plot changes.
</p>
</li></ul>
</td></tr>
<tr><td><code id="highlight_+3A_persistent">persistent</code></td>
<td>
<p>should selections persist (i.e., accumulate)? We often
refer to the default (<code>FALSE</code>) as a 'transient' selection mode;
which is recommended, because one may switch from 'transient' to
'persistent' selection by holding the shift key.</p>
</td></tr>
<tr><td><code id="highlight_+3A_dynamic">dynamic</code></td>
<td>
<p>should a widget for changing selection colors be included?</p>
</td></tr>
<tr><td><code id="highlight_+3A_color">color</code></td>
<td>
<p>character string of color(s) to use for
highlighting selections. See <code><a href="#topic+toRGB">toRGB()</a></code> for valid color
specifications. If <code>NULL</code> (the default), the color of selected marks
are not altered.</p>
</td></tr>
<tr><td><code id="highlight_+3A_selectize">selectize</code></td>
<td>
<p>whether or not to render a selectize.js widget for selecting
<code><a href="#topic+highlight_key">highlight_key()</a></code> values. A list of additional selectize.js options may
also be provided. The label used for this widget should be set via the
<code>groupName</code> argument of <code><a href="#topic+highlight_key">highlight_key()</a></code>.</p>
</td></tr>
<tr><td><code id="highlight_+3A_defaultvalues">defaultValues</code></td>
<td>
<p>a vector of values for setting a &quot;default selection&quot;.
These values should match the key attribute.</p>
</td></tr>
<tr><td><code id="highlight_+3A_opacitydim">opacityDim</code></td>
<td>
<p>a number between 0 and 1 used to reduce the
opacity of non-selected traces (by multiplying with the existing opacity).</p>
</td></tr>
<tr><td><code id="highlight_+3A_selected">selected</code></td>
<td>
<p>attributes of the selection, see <code><a href="#topic+attrs_selected">attrs_selected()</a></code>.</p>
</td></tr>
<tr><td><code id="highlight_+3A_debounce">debounce</code></td>
<td>
<p>amount of time to wait before firing an event (in milliseconds).
The default of 0 means do not debounce at all.
Debouncing is mainly useful when <code>on = "plotly_hover"</code> to avoid firing too many events
when users clickly move the mouse over relevant graphical marks.</p>
</td></tr>
<tr><td><code id="highlight_+3A_...">...</code></td>
<td>
<p>currently not supported.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>References</h3>

<p><a href="https://plotly-r.com/client-side-linking.html">https://plotly-r.com/client-side-linking.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+attrs_selected">attrs_selected()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# These examples are designed to show you how to highlight/brush a *single*
# view. For examples of multiple linked views, see `demo(package = "plotly")` 

d &lt;- highlight_key(txhousing, ~city)
p &lt;- ggplot(d, aes(date, median, group = city)) + geom_line()
gg &lt;- ggplotly(p, tooltip = "city") 
highlight(gg, dynamic = TRUE)

# supply custom colors to the brush 
cols &lt;- toRGB(RColorBrewer::brewer.pal(3, "Dark2"), 0.5)
highlight(gg, on = "plotly_hover", color = cols, dynamic = TRUE)

# Use attrs_selected() for complete control over the selection appearance
# note any relevant colors you specify here should override the color argument
s &lt;- attrs_selected(
  showlegend = TRUE,
  mode = "lines+markers",
  marker = list(symbol = "x")
)

highlight(layout(gg, showlegend = TRUE), selected = s)

</code></pre>

<hr>
<h2 id='highlight_key'>Highlight/query data based on primary key</h2><span id='topic+highlight_key'></span>

<h3>Description</h3>

<p>This function simply creates an object of class <a href="crosstalk.html#topic+SharedData">crosstalk::SharedData</a>.
The reason it exists is to make it easier to teach others how to leverage
its functionality in plotly. It also makes it more discoverable if one
is already aware of <a href="#topic+highlight">highlight</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>highlight_key(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="highlight_key_+3A_x">x</code></td>
<td>
<p>a plotly visualization or a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="highlight_key_+3A_...">...</code></td>
<td>
<p>arguments passed to <code>crosstalk::SharedData$new()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <a href="crosstalk.html#topic+SharedData">crosstalk::SharedData</a>
</p>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>See Also</h3>

<p><a href="#topic+highlight">highlight</a>
</p>

<hr>
<h2 id='hobbs'>Hobbs data</h2><span id='topic+hobbs'></span>

<h3>Description</h3>

<p>Description TBD.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hobbs
</code></pre>


<h3>Format</h3>

<p>A data frame with three variables: <code>r</code>, <code>t</code>,
<code>nms</code>.
</p>

<hr>
<h2 id='knit_print.api_grid'>Embed a plotly grid as an iframe in a knitr doc</h2><span id='topic+knit_print.api_grid'></span>

<h3>Description</h3>

<p>Embed a plotly grid as an iframe in a knitr doc
</p>


<h3>Usage</h3>

<pre><code class='language-R'>knit_print.api_grid(x, options, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="knit_print.api_grid_+3A_x">x</code></td>
<td>
<p>a plotly figure object</p>
</td></tr>
<tr><td><code id="knit_print.api_grid_+3A_options">options</code></td>
<td>
<p>knitr options.</p>
</td></tr>
<tr><td><code id="knit_print.api_grid_+3A_...">...</code></td>
<td>
<p>placeholder.</p>
</td></tr>
</table>


<h3>References</h3>

<p>https://github.com/yihui/knitr/blob/master/vignettes/knit_print.Rmd
</p>

<hr>
<h2 id='knit_print.api_grid_local'>Embed a plotly grid as an iframe in a knitr doc</h2><span id='topic+knit_print.api_grid_local'></span>

<h3>Description</h3>

<p>Embed a plotly grid as an iframe in a knitr doc
</p>


<h3>Usage</h3>

<pre><code class='language-R'>knit_print.api_grid_local(x, options, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="knit_print.api_grid_local_+3A_x">x</code></td>
<td>
<p>a plotly figure object</p>
</td></tr>
<tr><td><code id="knit_print.api_grid_local_+3A_options">options</code></td>
<td>
<p>knitr options.</p>
</td></tr>
<tr><td><code id="knit_print.api_grid_local_+3A_...">...</code></td>
<td>
<p>placeholder.</p>
</td></tr>
</table>


<h3>References</h3>

<p>https://github.com/yihui/knitr/blob/master/vignettes/knit_print.Rmd
</p>

<hr>
<h2 id='knit_print.api_plot'>Embed a plotly figure as an iframe in a knitr doc</h2><span id='topic+knit_print.api_plot'></span>

<h3>Description</h3>

<p>Embed a plotly figure as an iframe in a knitr doc
</p>


<h3>Usage</h3>

<pre><code class='language-R'>knit_print.api_plot(x, options, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="knit_print.api_plot_+3A_x">x</code></td>
<td>
<p>a plotly figure object</p>
</td></tr>
<tr><td><code id="knit_print.api_plot_+3A_options">options</code></td>
<td>
<p>knitr options.</p>
</td></tr>
<tr><td><code id="knit_print.api_plot_+3A_...">...</code></td>
<td>
<p>placeholder.</p>
</td></tr>
</table>


<h3>References</h3>

<p>https://github.com/yihui/knitr/blob/master/vignettes/knit_print.Rmd
</p>

<hr>
<h2 id='last_plot'>Retrieve the last plot to be modified or created.</h2><span id='topic+last_plot'></span>

<h3>Description</h3>

<p>Retrieve the last plot to be modified or created.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>last_plot()
</code></pre>


<h3>See Also</h3>

<p><code><a href="ggplot2.html#topic+last_plot">ggplot2::last_plot()</a></code>
</p>

<hr>
<h2 id='layout'>Modify the layout of a plotly visualization</h2><span id='topic+layout'></span>

<h3>Description</h3>

<p>Modify the layout of a plotly visualization
</p>


<h3>Usage</h3>

<pre><code class='language-R'>layout(p, ..., data = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="layout_+3A_p">p</code></td>
<td>
<p>A plotly object.</p>
</td></tr>
<tr><td><code id="layout_+3A_...">...</code></td>
<td>
<p>Arguments to the layout object. For documentation,
see <a href="https://plotly.com/r/reference/#Layout_and_layout_style_objects">https://plotly.com/r/reference/#Layout_and_layout_style_objects</a></p>
</td></tr>
<tr><td><code id="layout_+3A_data">data</code></td>
<td>
<p>A data frame to associate with this layout (optional). If not
provided, arguments are evaluated using the data frame in <code><a href="#topic+plot_ly">plot_ly()</a></code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>

<hr>
<h2 id='mic'>Mic data</h2><span id='topic+mic'></span>

<h3>Description</h3>

<p>Description TBD.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mic
</code></pre>


<h3>Format</h3>

<p>A data frame with three variables: <code>r</code>, <code>t</code>,
<code>nms</code>.
</p>

<hr>
<h2 id='mutate'>Objects exported from other packages</h2><span id='topic+mutate'></span><span id='topic+mutate_'></span><span id='topic+transmute'></span><span id='topic+transmute_'></span><span id='topic+select'></span><span id='topic+select_'></span><span id='topic+rename'></span><span id='topic+rename_'></span><span id='topic+group_by'></span><span id='topic+group_by_'></span><span id='topic+groups'></span><span id='topic+ungroup'></span><span id='topic+summarise'></span><span id='topic+summarise_'></span><span id='topic+do'></span><span id='topic+do_'></span><span id='topic+arrange'></span><span id='topic+arrange_'></span><span id='topic+distinct'></span><span id='topic+distinct_'></span><span id='topic+slice'></span><span id='topic+slice_'></span><span id='topic+filter'></span><span id='topic+filter_'></span><span id='topic+reexports'></span><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>dplyr</dt><dd><p><code><a href="dplyr.html#topic+arrange">arrange</a></code>, <code><a href="dplyr.html#topic+se-deprecated">arrange_</a></code>, <code><a href="dplyr.html#topic+distinct">distinct</a></code>, <code><a href="dplyr.html#topic+se-deprecated">distinct_</a></code>, <code><a href="dplyr.html#topic+do">do</a></code>, <code><a href="dplyr.html#topic+se-deprecated">do_</a></code>, <code><a href="dplyr.html#topic+filter">filter</a></code>, <code><a href="dplyr.html#topic+se-deprecated">filter_</a></code>, <code><a href="dplyr.html#topic+group_by">group_by</a></code>, <code><a href="dplyr.html#topic+se-deprecated">group_by_</a></code>, <code><a href="dplyr.html#topic+group_data">groups</a></code>, <code><a href="dplyr.html#topic+mutate">mutate</a></code>, <code><a href="dplyr.html#topic+se-deprecated">mutate_</a></code>, <code><a href="dplyr.html#topic+rename">rename</a></code>, <code><a href="dplyr.html#topic+se-deprecated">rename_</a></code>, <code><a href="dplyr.html#topic+select">select</a></code>, <code><a href="dplyr.html#topic+se-deprecated">select_</a></code>, <code><a href="dplyr.html#topic+slice">slice</a></code>, <code><a href="dplyr.html#topic+se-deprecated">slice_</a></code>, <code><a href="dplyr.html#topic+summarise">summarise</a></code>, <code><a href="dplyr.html#topic+se-deprecated">summarise_</a></code>, <code><a href="dplyr.html#topic+transmute">transmute</a></code>, <code><a href="dplyr.html#topic+se-deprecated">transmute_</a></code>, <code><a href="dplyr.html#topic+group_by">ungroup</a></code></p>
</dd>
<dt>magrittr</dt><dd><p><code><a href="magrittr.html#topic+pipe">%&gt;%</a></code></p>
</dd>
</dl>

<hr>
<h2 id='offline'>Plotly Offline</h2><span id='topic+offline'></span>

<h3>Description</h3>

<p>Deprecated in version 2.0 (offline plots are now the default)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>offline(p, height, width, out_dir, open_browser)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="offline_+3A_p">p</code></td>
<td>
<p>a plotly object</p>
</td></tr>
<tr><td><code id="offline_+3A_height">height</code></td>
<td>
<p>A valid CSS unit. (like &quot;100\
which will be coerced to a string and have &quot;px&quot; appended.</p>
</td></tr>
<tr><td><code id="offline_+3A_width">width</code></td>
<td>
<p>A valid CSS unit. (like &quot;100\
which will be coerced to a string and have &quot;px&quot; appended.</p>
</td></tr>
<tr><td><code id="offline_+3A_out_dir">out_dir</code></td>
<td>
<p>a directory to place the visualization.
If <code>NULL</code>, a temporary directory is used when the offline object is printed.</p>
</td></tr>
<tr><td><code id="offline_+3A_open_browser">open_browser</code></td>
<td>
<p>open the visualization after creating it?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a plotly object of class &quot;offline&quot;
</p>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>

<hr>
<h2 id='orca'>Static image exporting via orca</h2><span id='topic+orca'></span><span id='topic+orca_serve'></span>

<h3>Description</h3>

<p>Superseded by <code><a href="#topic+kaleido">kaleido()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>orca(
  p,
  file = "plot.png",
  format = tools::file_ext(file),
  scale = NULL,
  width = NULL,
  height = NULL,
  mathjax = FALSE,
  parallel_limit = NULL,
  verbose = FALSE,
  debug = FALSE,
  safe = FALSE,
  more_args = NULL,
  ...
)

orca_serve(
  port = 5151,
  mathjax = FALSE,
  safe = FALSE,
  request_limit = NULL,
  keep_alive = TRUE,
  window_max_number = NULL,
  quiet = FALSE,
  debug = FALSE,
  more_args = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="orca_+3A_p">p</code></td>
<td>
<p>a plotly object.</p>
</td></tr>
<tr><td><code id="orca_+3A_file">file</code></td>
<td>
<p>output filename.</p>
</td></tr>
<tr><td><code id="orca_+3A_format">format</code></td>
<td>
<p>the output format (png, jpeg, webp, svg, pdf, eps).</p>
</td></tr>
<tr><td><code id="orca_+3A_scale">scale</code></td>
<td>
<p>Sets the image scale. Applies to all output images.</p>
</td></tr>
<tr><td><code id="orca_+3A_width">width</code></td>
<td>
<p>Sets the image width. If not set, defaults to <code>layout.width</code> value.
Applies to all output images.</p>
</td></tr>
<tr><td><code id="orca_+3A_height">height</code></td>
<td>
<p>Sets the image height. If not set, defaults to <code>layout.height</code> value.
Applies to all output images.</p>
</td></tr>
<tr><td><code id="orca_+3A_mathjax">mathjax</code></td>
<td>
<p>whether or not to include MathJax (required to render <a href="#topic+TeX">TeX</a>).
If <code>TRUE</code>, the PLOTLY_MATHJAX_PATH environment variable must be set and point
to the location of MathJax (this variable is also used to render <a href="#topic+TeX">TeX</a> in
interactive graphs, see <a href="#topic+config">config</a>).</p>
</td></tr>
<tr><td><code id="orca_+3A_parallel_limit">parallel_limit</code></td>
<td>
<p>Sets the limit of parallel tasks run.</p>
</td></tr>
<tr><td><code id="orca_+3A_verbose">verbose</code></td>
<td>
<p>Turn on verbose logging on stdout.</p>
</td></tr>
<tr><td><code id="orca_+3A_debug">debug</code></td>
<td>
<p>Starts app in debug mode and turn on verbose logs on stdout.</p>
</td></tr>
<tr><td><code id="orca_+3A_safe">safe</code></td>
<td>
<p>Turns on safe mode: where figures likely to make browser window
hang during image generating are skipped.</p>
</td></tr>
<tr><td><code id="orca_+3A_more_args">more_args</code></td>
<td>
<p>additional arguments to pass along to system command. This is useful
for specifying display and/or electron options, such as <code>--enable-webgl</code> or <code>--disable-gpu</code>.</p>
</td></tr>
<tr><td><code id="orca_+3A_...">...</code></td>
<td>
<p>for <code>orca()</code>, additional arguments passed along to <code>processx::run</code>. For
<code>orca_serve()</code>, additional arguments passed along to <code>processx::process</code>.</p>
</td></tr>
<tr><td><code id="orca_+3A_port">port</code></td>
<td>
<p>Sets the server's port number.</p>
</td></tr>
<tr><td><code id="orca_+3A_request_limit">request_limit</code></td>
<td>
<p>Sets a request limit that makes orca exit when reached.</p>
</td></tr>
<tr><td><code id="orca_+3A_keep_alive">keep_alive</code></td>
<td>
<p>Turn on keep alive mode where orca will (try to) relaunch server if process unexpectedly exits.</p>
</td></tr>
<tr><td><code id="orca_+3A_window_max_number">window_max_number</code></td>
<td>
<p>Sets maximum number of browser windows the server can keep open at a given time.</p>
</td></tr>
<tr><td><code id="orca_+3A_quiet">quiet</code></td>
<td>
<p>Suppress all logging info.</p>
</td></tr>
</table>


<h3>Methods</h3>

<p>The <code>orca_serve()</code> function returns an object with two methods:
</p>

<dl>
<dt><code>export(p, file = "plot.png", format = tools::file_ext(file), scale = NULL, width = NULL, height = NULL)</code></dt><dd>
<p>Export a static image of a plotly graph. Arguments found here are the same as those found in <code>orca()</code>
</p>
</dd>
<dt><code>close()</code></dt><dd><p>Close down the orca server and kill the underlying node process.</p>
</dd>
</dl>



<h3>Fields</h3>

<p>The <code>orca_serve()</code> function returns an object with two fields:
</p>

<dl>
<dt><code>port</code></dt><dd><p>The port number that the server is listening to.</p>
</dd>
<dt><code>process</code></dt><dd><p>An R6 class for controlling and querying the underlying node process.</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

## Not run: 
# NOTE: in a headless environment, you may need to set `more_args="--enable-webgl"`
# to export webgl correctly
p &lt;- plot_ly(z = ~volcano) %&gt;% add_surface()
orca(p, "surface-plot.svg")

#' # launch the server
server &lt;- orca_serve()

# export as many graphs as you'd like
server$export(qplot(1:10), "test1.pdf")
server$export(plot_ly(x = 1:10, y = 1:10), "test2.pdf")

# the underlying process is exposed as a field, so you
# have full control over the external process
server$process$is_alive()

# convenience method for closing down the server
server$close()

# remove the exported files from disk
unlink("test1.pdf")
unlink("test2.pdf")

## End(Not run)

</code></pre>

<hr>
<h2 id='partial_bundle'>Use a partial bundle of plotly.js</h2><span id='topic+partial_bundle'></span>

<h3>Description</h3>

<p>Leveraging plotly.js' partial bundles can lead to smaller file sizes
and faster rendering. The full list of available bundles, and the
trace types that they support, are available
<a href="https://github.com/plotly/plotly.js/blob/master/dist/README.md#partial-bundles">here</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>partial_bundle(p, type = "auto", local = TRUE, minified = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="partial_bundle_+3A_p">p</code></td>
<td>
<p>a plotly object.</p>
</td></tr>
<tr><td><code id="partial_bundle_+3A_type">type</code></td>
<td>
<p>name of the (partial) bundle. The default, <code>'auto'</code>, attempts to
find the smallest single bundle that can render <code>p</code>. If no single partial bundle
can render <code>p</code>, then the full bundle is used.</p>
</td></tr>
<tr><td><code id="partial_bundle_+3A_local">local</code></td>
<td>
<p>whether or not to download the partial bundle so that it can be
viewed later without an internet connection.</p>
</td></tr>
<tr><td><code id="partial_bundle_+3A_minified">minified</code></td>
<td>
<p>whether or not to use a minified js file (non-minified file can be useful for debugging plotly.js)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>WARNING: use this function with caution when rendering multiple
plotly graphs on a single website. That's because, if multiple plotly.js
bundles are used, the most recent bundle will override the other bundles.
See the examples section for an example.
</p>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# ----------------------------------------------------------------------
# This function is always safe to use when rendering a single 
# plotly graph. In this case, we get a 3x file reduction.
# ----------------------------------------------------------------------

## Not run: 
library(plotly)
p &lt;- plot_ly(x = 1:10, y = 1:10) %&gt;% add_markers()
save_widget &lt;- function(p, f) {
  owd &lt;- setwd(dirname(f))
  on.exit(setwd(owd))
  htmlwidgets::saveWidget(p, f)
  mb &lt;- round(file.info(f)$size / 1e6, 3)
  message("File is: ", mb," MB")
}
f1 &lt;- tempfile(fileext = ".html")
f2 &lt;- tempfile(fileext = ".html")
save_widget(p, f1)
save_widget(partial_bundle(p), f2)

# ----------------------------------------------------------------------
# But, since plotly.js bundles override one another, 
# be careful when putting multiple graphs in a larger document!
# Note how the surface (part of the gl3d bundle) renders, but the 
# heatmap (part of the cartesian bundle) doesn't...
# ----------------------------------------------------------------------

library(htmltools)
p1 &lt;- plot_ly(z = ~volcano) %&gt;% 
  add_heatmap() %&gt;%
  partial_bundle()
p2 &lt;- plot_ly(z = ~volcano) %&gt;% 
  add_surface() %&gt;%
  partial_bundle()
browsable(tagList(p1, p2))

## End(Not run)

</code></pre>

<hr>
<h2 id='plot_dendro'>Plot an interactive dendrogram</h2><span id='topic+plot_dendro'></span>

<h3>Description</h3>

<p>This function takes advantage of nested key selections to implement an
interactive dendrogram. Selecting a node selects all the labels (i.e. leafs)
under that node.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_dendro(d, set = "A", xmin = -50, height = 500, width = 500, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_dendro_+3A_d">d</code></td>
<td>
<p>a dendrogram object</p>
</td></tr>
<tr><td><code id="plot_dendro_+3A_set">set</code></td>
<td>
<p>defines a crosstalk group</p>
</td></tr>
<tr><td><code id="plot_dendro_+3A_xmin">xmin</code></td>
<td>
<p>minimum of the range of the x-scale</p>
</td></tr>
<tr><td><code id="plot_dendro_+3A_height">height</code></td>
<td>
<p>height</p>
</td></tr>
<tr><td><code id="plot_dendro_+3A_width">width</code></td>
<td>
<p>width</p>
</td></tr>
<tr><td><code id="plot_dendro_+3A_...">...</code></td>
<td>
<p>arguments supplied to <code><a href="#topic+subplot">subplot()</a></code></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot_ly">plot_ly()</a></code>, <code><a href="#topic+plot_mapbox">plot_mapbox()</a></code>, <code><a href="#topic+ggplotly">ggplotly()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

## Not run: 
hc &lt;- hclust(dist(USArrests), "ave")
dend1 &lt;- as.dendrogram(hc)
plot_dendro(dend1, height = 600) %&gt;% 
  hide_legend() %&gt;% 
  highlight(persistent = TRUE, dynamic = TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='plot_geo'>Initiate a plotly-geo object</h2><span id='topic+plot_geo'></span>

<h3>Description</h3>

<p>Use this function instead of <code><a href="#topic+plot_ly">plot_ly()</a></code> to initialize
a plotly-geo object. This enforces the entire plot so use
the scattergeo trace type, and enables higher level geometries
like <code><a href="#topic+add_polygons">add_polygons()</a></code> to work
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_geo(data = data.frame(), ..., offline = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_geo_+3A_data">data</code></td>
<td>
<p>A data frame (optional).</p>
</td></tr>
<tr><td><code id="plot_geo_+3A_...">...</code></td>
<td>
<p>arguments passed along to <code><a href="#topic+plot_ly">plot_ly()</a></code>.</p>
</td></tr>
<tr><td><code id="plot_geo_+3A_offline">offline</code></td>
<td>
<p>whether or not to include geo assets so that the map
can be viewed with or without an internet connection. The plotlyGeoAssets
package is required for this functionality.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot_ly">plot_ly()</a></code>, <code><a href="#topic+plot_mapbox">plot_mapbox()</a></code>, <code><a href="#topic+ggplotly">ggplotly()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

map_data("world", "canada") %&gt;%
  group_by(group) %&gt;%
  plot_geo(x = ~long, y = ~lat) %&gt;%
  add_markers(size = I(1))

</code></pre>

<hr>
<h2 id='plot_ly'>Initiate a plotly visualization</h2><span id='topic+plot_ly'></span>

<h3>Description</h3>

<p>This function maps R objects to <a href="https://plotly.com/javascript/">plotly.js</a>,
an (MIT licensed) web-based interactive charting library. It provides
abstractions for doing common things (e.g. mapping data values to
fill colors (via <code>color</code>) or creating <a href="#topic+animation">animation</a>s (via <code>frame</code>)) and sets
some different defaults to make the interface feel more 'R-like'
(i.e., closer to <code><a href="graphics.html#topic+plot">plot()</a></code> and <code><a href="ggplot2.html#topic+qplot">ggplot2::qplot()</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_ly(
  data = data.frame(),
  ...,
  type = NULL,
  name,
  color,
  colors = NULL,
  alpha = NULL,
  stroke,
  strokes = NULL,
  alpha_stroke = 1,
  size,
  sizes = c(10, 100),
  span,
  spans = c(1, 20),
  symbol,
  symbols = NULL,
  linetype,
  linetypes = NULL,
  split,
  frame,
  width = NULL,
  height = NULL,
  source = "A"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_ly_+3A_data">data</code></td>
<td>
<p>A data frame (optional) or <a href="crosstalk.html#topic+SharedData">crosstalk::SharedData</a> object.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_...">...</code></td>
<td>
<p>Arguments (i.e., attributes) passed along to the trace <code>type</code>.
See <code><a href="#topic+schema">schema()</a></code> for a list of acceptable attributes for a given trace <code>type</code>
(by going to <code>traces</code> -&gt; <code>type</code> -&gt; <code>attributes</code>). Note that attributes
provided at this level may override other arguments
(e.g. <code>plot_ly(x = 1:10, y = 1:10, color = I("red"), marker = list(color = "blue"))</code>).</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_type">type</code></td>
<td>
<p>A character string specifying the trace type (e.g. <code>"scatter"</code>, <code>"bar"</code>, <code>"box"</code>, etc).
If specified, it <em>always</em> creates a trace, otherwise</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_name">name</code></td>
<td>
<p>Values mapped to the trace's name attribute. Since a trace can
only have one name, this argument acts very much like <code>split</code> in that it
creates one trace for every unique value.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_color">color</code></td>
<td>
<p>Values mapped to relevant 'fill-color' attribute(s)
(e.g. <a href="https://plotly.com/r/reference/#scatter-fillcolor">fillcolor</a>,
<a href="https://plotly.com/r/reference/#scatter-marker-color">marker.color</a>,
<a href="https://plotly.com/r/reference/#scatter-textfont-color">textfont.color</a>, etc.).
The mapping from data values to color codes may be controlled using
<code>colors</code> and <code>alpha</code>, or avoided altogether via <code><a href="base.html#topic+I">I()</a></code> (e.g., <code>color = I("red")</code>).
Any color understood by <code><a href="grDevices.html#topic+col2rgb">grDevices::col2rgb()</a></code> may be used in this way.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_colors">colors</code></td>
<td>
<p>Either a colorbrewer2.org palette name (e.g. &quot;YlOrRd&quot; or &quot;Blues&quot;),
or a vector of colors to interpolate in hexadecimal &quot;#RRGGBB&quot; format,
or a color interpolation function like <code>colorRamp()</code>.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_alpha">alpha</code></td>
<td>
<p>A number between 0 and 1 specifying the alpha channel applied to <code>color</code>.
Defaults to 0.5 when mapping to <a href="https://plotly.com/r/reference/#scatter-fillcolor">fillcolor</a> and 1 otherwise.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_stroke">stroke</code></td>
<td>
<p>Similar to <code>color</code>, but values are mapped to relevant 'stroke-color' attribute(s)
(e.g., <a href="https://plotly.com/r/reference/#scatter-marker-line-color">marker.line.color</a>
and <a href="https://plotly.com/r/reference/#scatter-line-color">line.color</a>
for filled polygons). If not specified, <code>stroke</code> inherits from <code>color</code>.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_strokes">strokes</code></td>
<td>
<p>Similar to <code>colors</code>, but controls the <code>stroke</code> mapping.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_alpha_stroke">alpha_stroke</code></td>
<td>
<p>Similar to <code>alpha</code>, but applied to <code>stroke</code>.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_size">size</code></td>
<td>
<p>(Numeric) values mapped to relevant 'fill-size' attribute(s)
(e.g., <a href="https://plotly.com/r/reference/#scatter-marker-size">marker.size</a>,
<a href="https://plotly.com/r/reference/#scatter-textfont-size">textfont.size</a>,
and <a href="https://plotly.com/r/reference/#scatter-error_x-width">error_x.width</a>).
The mapping from data values to symbols may be controlled using
<code>sizes</code>, or avoided altogether via <code><a href="base.html#topic+I">I()</a></code> (e.g., <code>size = I(30)</code>).</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_sizes">sizes</code></td>
<td>
<p>A numeric vector of length 2 used to scale <code>size</code> to pixels.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_span">span</code></td>
<td>
<p>(Numeric) values mapped to relevant 'stroke-size' attribute(s)
(e.g.,
<a href="https://plotly.com/r/reference/#scatter-marker-line-width">marker.line.width</a>,
<a href="https://plotly.com/r/reference/#scatter-line-width">line.width</a> for filled polygons,
and <a href="https://plotly.com/r/reference/#scatter-error_x-thickness">error_x.thickness</a>)
The mapping from data values to symbols may be controlled using
<code>spans</code>, or avoided altogether via <code><a href="base.html#topic+I">I()</a></code> (e.g., <code>span = I(30)</code>).</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_spans">spans</code></td>
<td>
<p>A numeric vector of length 2 used to scale <code>span</code> to pixels.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_symbol">symbol</code></td>
<td>
<p>(Discrete) values mapped to <a href="https://plotly.com/r/reference/#scatter-marker-symbol">marker.symbol</a>.
The mapping from data values to symbols may be controlled using
<code>symbols</code>, or avoided altogether via <code><a href="base.html#topic+I">I()</a></code> (e.g., <code>symbol = I("pentagon")</code>).
Any <a href="graphics.html#topic+pch">pch</a> value or <a href="https://plotly.com/r/reference/#scatter-marker-symbol">symbol name</a> may be used in this way.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_symbols">symbols</code></td>
<td>
<p>A character vector of <a href="graphics.html#topic+pch">pch</a> values or <a href="https://plotly.com/r/reference/#scatter-marker-symbol">symbol names</a>.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_linetype">linetype</code></td>
<td>
<p>(Discrete) values mapped to <a href="https://plotly.com/r/reference/#scatter-line-dash">line.dash</a>.
The mapping from data values to symbols may be controlled using
<code>linetypes</code>, or avoided altogether via <code><a href="base.html#topic+I">I()</a></code> (e.g., <code>linetype = I("dash")</code>).
Any <code>lty</code> (see <a href="graphics.html#topic+par">par</a>) value or <a href="https://plotly.com/r/reference/#scatter-line-dash">dash name</a> may be used in this way.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_linetypes">linetypes</code></td>
<td>
<p>A character vector of <code>lty</code> values or <a href="https://plotly.com/r/reference/#scatter-line-dash">dash names</a></p>
</td></tr>
<tr><td><code id="plot_ly_+3A_split">split</code></td>
<td>
<p>(Discrete) values used to create multiple traces (one trace per value).</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_frame">frame</code></td>
<td>
<p>(Discrete) values used to create animation frames.</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_width">width</code></td>
<td>
<p>Width in pixels (optional, defaults to automatic sizing).</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_height">height</code></td>
<td>
<p>Height in pixels (optional, defaults to automatic sizing).</p>
</td></tr>
<tr><td><code id="plot_ly_+3A_source">source</code></td>
<td>
<p>a character string of length 1. Match the value of this string
with the source argument in <code><a href="#topic+event_data">event_data()</a></code> to retrieve the
event data corresponding to a specific plot (shiny apps can have multiple plots).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Unless <code>type</code> is specified, this function just initiates a plotly
object with 'global' attributes that are passed onto downstream uses of
<code><a href="#topic+add_trace">add_trace()</a></code> (or similar). A <a href="stats.html#topic+formula">formula</a> must always be used when
referencing column name(s) in <code>data</code> (e.g. <code>plot_ly(mtcars, x = ~wt)</code>).
Formulas are optional when supplying values directly, but they do
help inform default axis/scale titles
(e.g., <code>plot_ly(x = mtcars$wt)</code> vs <code>plot_ly(x = ~mtcars$wt)</code>)
</p>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>References</h3>

<p><a href="https://plotly-r.com/overview.html">https://plotly-r.com/overview.html</a>
</p>


<h3>See Also</h3>


<ul>
<li><p> For initializing a plotly-geo object: <code><a href="#topic+plot_geo">plot_geo()</a></code>
</p>
</li>
<li><p> For initializing a plotly-mapbox object: <code><a href="#topic+plot_mapbox">plot_mapbox()</a></code>
</p>
</li>
<li><p> For translating a ggplot2 object to a plotly object: <code><a href="#topic+ggplotly">ggplotly()</a></code>
</p>
</li>
<li><p> For modifying any plotly object: <code><a href="#topic+layout">layout()</a></code>, <code><a href="#topic+add_trace">add_trace()</a></code>, <code><a href="#topic+style">style()</a></code>
</p>
</li>
<li><p> For linked brushing: <code><a href="#topic+highlight">highlight()</a></code>
</p>
</li>
<li><p> For arranging multiple plots: <code><a href="#topic+subplot">subplot()</a></code>, <code><a href="crosstalk.html#topic+bscols">crosstalk::bscols()</a></code>
</p>
</li>
<li><p> For inspecting plotly objects: <code><a href="#topic+plotly_json">plotly_json()</a></code>
</p>
</li>
<li><p> For quick, accurate, and searchable plotly.js reference: <code><a href="#topic+schema">schema()</a></code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

# plot_ly() tries to create a sensible plot based on the information you 
# give it. If you don't provide a trace type, plot_ly() will infer one.
plot_ly(economics, x = ~pop)
plot_ly(economics, x = ~date, y = ~pop)
# plot_ly() doesn't require data frame(s), which allows one to take 
# advantage of trace type(s) designed specifically for numeric matrices
plot_ly(z = ~volcano)
plot_ly(z = ~volcano, type = "surface")

# plotly has a functional interface: every plotly function takes a plotly
# object as it's first input argument and returns a modified plotly object
add_lines(plot_ly(economics, x = ~date, y = ~unemploy/pop))

# To make code more readable, plotly imports the pipe operator from magrittr
economics %&gt;% plot_ly(x = ~date, y = ~unemploy/pop) %&gt;% add_lines()

# Attributes defined via plot_ly() set 'global' attributes that 
# are carried onto subsequent traces, but those may be over-written
plot_ly(economics, x = ~date, color = I("black")) %&gt;%
 add_lines(y = ~uempmed) %&gt;%
 add_lines(y = ~psavert, color = I("red"))

# Attributes are documented in the figure reference -&gt; https://plotly.com/r/reference
# You might notice plot_ly() has named arguments that aren't in this figure
# reference. These arguments make it easier to map abstract data values to
# visual attributes.
p &lt;- plot_ly(palmerpenguins::penguins, x = ~bill_length_mm, y = ~body_mass_g)
add_markers(p, color = ~bill_depth_mm, size = ~bill_depth_mm)
add_markers(p, color = ~species)
add_markers(p, color = ~species, colors = "Set1")
add_markers(p, symbol = ~species)
add_paths(p, linetype = ~species)


## End(Not run)

</code></pre>

<hr>
<h2 id='plot_mapbox'>Initiate a plotly-mapbox object</h2><span id='topic+plot_mapbox'></span>

<h3>Description</h3>

<p>Use this function instead of <code><a href="#topic+plot_ly">plot_ly()</a></code> to initialize
a plotly-mapbox object. This enforces the entire plot so use
the scattermapbox trace type, and enables higher level geometries
like <code><a href="#topic+add_polygons">add_polygons()</a></code> to work
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_mapbox(data = data.frame(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_mapbox_+3A_data">data</code></td>
<td>
<p>A data frame (optional).</p>
</td></tr>
<tr><td><code id="plot_mapbox_+3A_...">...</code></td>
<td>
<p>arguments passed along to <code><a href="#topic+plot_ly">plot_ly()</a></code>. They should be
valid scattermapbox attributes - <a href="https://plotly.com/r/reference/#scattermapbox">https://plotly.com/r/reference/#scattermapbox</a>.
Note that x/y can also be used in place of lat/lon.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot_ly">plot_ly()</a></code>, <code><a href="#topic+plot_geo">plot_geo()</a></code>, <code><a href="#topic+ggplotly">ggplotly()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

plot_mapbox(res_mn)
plot_mapbox(res_mn, color = ~INDRESNAME)

map_data("world", "canada") %&gt;%
  group_by(group) %&gt;%
  plot_mapbox(x = ~long, y = ~lat) %&gt;%
  add_polygons() %&gt;%
  layout(
    mapbox = list(
      center = list(lat = ~median(lat), lon = ~median(long))
    )
  )

## End(Not run)

</code></pre>

<hr>
<h2 id='plotly'>Main interface to plotly</h2><span id='topic+plotly'></span>

<h3>Description</h3>

<p>This function is now deprecated. It used to provide a way to store plotly
account credentials, but that can now be done with environment variables.
For more details and examples, see <a href="https://plotly.com/r/getting-started/">https://plotly.com/r/getting-started/</a>.
</p>
<p>If you're here looking for an intro/overview of the package, see the
<a href="https://github.com/plotly/plotly.R/#getting-started">readme</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotly(username, key)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotly_+3A_username">username</code></td>
<td>
<p>plotly username</p>
</td></tr>
<tr><td><code id="plotly_+3A_key">key</code></td>
<td>
<p>plotly API key</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+ggplotly">ggplotly()</a></code>, <code><a href="#topic+plot_ly">plot_ly()</a></code>, <code><a href="#topic+signup">signup()</a></code>
</p>

<hr>
<h2 id='plotly_build'>'Build' (i.e., evaluate) a plotly object</h2><span id='topic+plotly_build'></span>

<h3>Description</h3>

<p>This generic function creates the list object sent to plotly.js
for rendering. Using this function can be useful for overriding defaults
provided by <code>ggplotly</code>/<code>plot_ly</code> or for debugging rendering
errors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotly_build(p, registerFrames = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotly_build_+3A_p">p</code></td>
<td>
<p>a ggplot object, or a plotly object, or a list.</p>
</td></tr>
<tr><td><code id="plotly_build_+3A_registerframes">registerFrames</code></td>
<td>
<p>should a frame trace attribute be interpreted as frames in an animation?</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>

p &lt;- plot_ly(economics, x = ~date, y = ~pce)
# the unevaluated plotly object
str(p)
# the evaluated data
str(plotly_build(p)$x$data)

</code></pre>

<hr>
<h2 id='plotly_data'>Obtain data associated with a plotly graph</h2><span id='topic+plotly_data'></span><span id='topic+groups.plotly'></span><span id='topic+ungroup.plotly'></span><span id='topic+group_by.plotly'></span><span id='topic+mutate.plotly'></span><span id='topic+do.plotly'></span><span id='topic+summarise.plotly'></span><span id='topic+arrange.plotly'></span><span id='topic+select.plotly'></span><span id='topic+filter.plotly'></span><span id='topic+distinct.plotly'></span><span id='topic+slice.plotly'></span><span id='topic+rename.plotly'></span><span id='topic+transmute.plotly'></span><span id='topic+group_by_.plotly'></span><span id='topic+mutate_.plotly'></span><span id='topic+do_.plotly'></span><span id='topic+summarise_.plotly'></span><span id='topic+arrange_.plotly'></span><span id='topic+select_.plotly'></span><span id='topic+filter_.plotly'></span><span id='topic+distinct_.plotly'></span><span id='topic+slice_.plotly'></span><span id='topic+rename_.plotly'></span><span id='topic+transmute_.plotly'></span>

<h3>Description</h3>

<p><code>plotly_data()</code> returns data associated with
a plotly visualization (if there are multiple data frames, by default,
it returns the most recent one).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotly_data(p, id = p$x$cur_data)

## S3 method for class 'plotly'
groups(x)

## S3 method for class 'plotly'
ungroup(x, ...)

## S3 method for class 'plotly'
group_by(.data, ...)

## S3 method for class 'plotly'
mutate(.data, ...)

## S3 method for class 'plotly'
do(.data, ...)

## S3 method for class 'plotly'
summarise(.data, ...)

## S3 method for class 'plotly'
arrange(.data, ...)

## S3 method for class 'plotly'
select(.data, ...)

## S3 method for class 'plotly'
filter(.data, ...)

## S3 method for class 'plotly'
distinct(.data, ...)

## S3 method for class 'plotly'
slice(.data, ...)

## S3 method for class 'plotly'
rename(.data, ...)

## S3 method for class 'plotly'
transmute(.data, ...)

## S3 method for class 'plotly'
group_by_(.data, ...)

## S3 method for class 'plotly'
mutate_(.data, ...)

## S3 method for class 'plotly'
do_(.data, ...)

## S3 method for class 'plotly'
summarise_(.data, ...)

## S3 method for class 'plotly'
arrange_(.data, ...)

## S3 method for class 'plotly'
select_(.data, ...)

## S3 method for class 'plotly'
filter_(.data, ...)

## S3 method for class 'plotly'
distinct_(.data, ...)

## S3 method for class 'plotly'
slice_(.data, ...)

## S3 method for class 'plotly'
rename_(.data, ...)

## S3 method for class 'plotly'
transmute_(.data, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotly_data_+3A_p">p</code></td>
<td>
<p>a plotly visualization.</p>
</td></tr>
<tr><td><code id="plotly_data_+3A_id">id</code></td>
<td>
<p>a character string or number referencing an &quot;attribute layer&quot;.</p>
</td></tr>
<tr><td><code id="plotly_data_+3A_x">x</code></td>
<td>
<p>a plotly visualization.</p>
</td></tr>
<tr><td><code id="plotly_data_+3A_...">...</code></td>
<td>
<p>arguments passed onto the relevant method.</p>
</td></tr>
<tr><td><code id="plotly_data_+3A_.data">.data</code></td>
<td>
<p>a plotly visualization.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>

# use group_by() to define groups of visual markings
p &lt;- txhousing %&gt;%
  group_by(city) %&gt;%
  plot_ly(x = ~date, y = ~sales)
p

# plotly objects preserve data groupings 
groups(p)
plotly_data(p)

# dplyr verbs operate on plotly objects as if they were data frames
p &lt;- economics %&gt;%
  plot_ly(x = ~date, y = ~unemploy / pop) %&gt;%
  add_lines() %&gt;%
  mutate(rate = unemploy / pop) %&gt;% 
  filter(rate == max(rate))
plotly_data(p)
add_markers(p)
layout(p, annotations = list(x = ~date, y = ~rate, text = "peak"))

# use group_by() + do() + subplot() for trellis displays 
d &lt;- group_by(mpg, drv)
plots &lt;- do(d, p = plot_ly(., x = ~cty, name = ~drv))
subplot(plots[["p"]], nrows = 3, shareX = TRUE)

# arrange displays by their mean
means &lt;- summarise(d, mn = mean(cty, na.rm = TRUE))
means %&gt;%
  dplyr::left_join(plots) %&gt;%
  arrange(mn) %&gt;%
  subplot(nrows = NROW(.), shareX = TRUE)
  
# more dplyr verbs applied to plotly objects
p &lt;- mtcars %&gt;%
  plot_ly(x = ~wt, y = ~mpg, name = "scatter trace") %&gt;%
  add_markers()
p %&gt;% slice(1) %&gt;% plotly_data()
p %&gt;% slice(1) %&gt;% add_markers(name = "first observation")
p %&gt;% filter(cyl == 4) %&gt;% plotly_data()
p %&gt;% filter(cyl == 4) %&gt;% add_markers(name = "four cylinders")


</code></pre>

<hr>
<h2 id='plotly_empty'>Create a complete empty plotly graph.</h2><span id='topic+plotly_empty'></span>

<h3>Description</h3>

<p>Useful when used with <code><a href="#topic+subplot">subplot()</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotly_empty(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotly_empty_+3A_...">...</code></td>
<td>
<p>arguments passed onto <code><a href="#topic+plot_ly">plot_ly()</a></code></p>
</td></tr>
</table>

<hr>
<h2 id='plotly_example'>Run a plotly example(s)</h2><span id='topic+plotly_example'></span>

<h3>Description</h3>

<p>Provides a unified interface for running demos, shiny apps, and Rmd documents
which are bundled with the package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotly_example(type = c("demo", "shiny", "rmd"), name, edit = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotly_example_+3A_type">type</code></td>
<td>
<p>the type of example</p>
</td></tr>
<tr><td><code id="plotly_example_+3A_name">name</code></td>
<td>
<p>the name of the example (valid names depend on <code>type</code>).</p>
</td></tr>
<tr><td><code id="plotly_example_+3A_edit">edit</code></td>
<td>
<p>whether to open the relevant source files using <a href="utils.html#topic+file.edit">file.edit</a>. Only relevant if <code>type</code> is <code>"shiny"</code> or <code>"rmd"</code>.</p>
</td></tr>
<tr><td><code id="plotly_example_+3A_...">...</code></td>
<td>
<p>arguments passed onto the suitable method.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>

<hr>
<h2 id='plotly_IMAGE'>Create a static image</h2><span id='topic+plotly_IMAGE'></span>

<h3>Description</h3>

<p>The images endpoint turns a plot (which may be given in multiple forms)
into an image of the desired format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotly_IMAGE(
  x,
  width = 1000,
  height = 500,
  format = "png",
  scale = 1,
  out_file,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotly_IMAGE_+3A_x">x</code></td>
<td>
<p>either a plotly object or a list.</p>
</td></tr>
<tr><td><code id="plotly_IMAGE_+3A_width">width</code></td>
<td>
<p>Image width in pixels</p>
</td></tr>
<tr><td><code id="plotly_IMAGE_+3A_height">height</code></td>
<td>
<p>Image height in pixels</p>
</td></tr>
<tr><td><code id="plotly_IMAGE_+3A_format">format</code></td>
<td>
<p>The desired image format 'png', 'jpeg', 'svg', 'pdf', 'eps', or 'webp'</p>
</td></tr>
<tr><td><code id="plotly_IMAGE_+3A_scale">scale</code></td>
<td>
<p>Both png and jpeg formats will be scaled beyond the specified width and height by this number.</p>
</td></tr>
<tr><td><code id="plotly_IMAGE_+3A_out_file">out_file</code></td>
<td>
<p>A filename for writing the image to a file.</p>
</td></tr>
<tr><td><code id="plotly_IMAGE_+3A_...">...</code></td>
<td>
<p>arguments passed onto <code>httr::RETRY</code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
p &lt;- plot_ly(x = 1:10)
Png &lt;- plotly_IMAGE(p, out_file = "plotly-test-image.png")
Jpeg &lt;- plotly_IMAGE(p, format = "jpeg", out_file = "plotly-test-image.jpeg")
Svg &lt;- plotly_IMAGE(p, format = "svg",  out_file = "plotly-test-image.svg")
Pdf &lt;- plotly_IMAGE(p, format = "pdf",  out_file = "plotly-test-image.pdf")

## End(Not run)

</code></pre>

<hr>
<h2 id='plotly_json'>Inspect JSON sent to plotly.js</h2><span id='topic+plotly_json'></span>

<h3>Description</h3>

<p>This function is useful for obtaining/viewing/debugging JSON
sent to plotly.js.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotly_json(p = last_plot(), jsonedit = interactive(), pretty = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotly_json_+3A_p">p</code></td>
<td>
<p>a plotly or ggplot object.</p>
</td></tr>
<tr><td><code id="plotly_json_+3A_jsonedit">jsonedit</code></td>
<td>
<p>use <a href="listviewer.html#topic+jsonedit">listviewer::jsonedit</a> to view the JSON?</p>
</td></tr>
<tr><td><code id="plotly_json_+3A_pretty">pretty</code></td>
<td>
<p>adds indentation whitespace to JSON output. Can be TRUE/FALSE
or a number specifying the number of spaces to indent. See <a href="jsonlite.html#topic+prettify">jsonlite::prettify</a>.</p>
</td></tr>
<tr><td><code id="plotly_json_+3A_...">...</code></td>
<td>
<p>other options passed onto <a href="listviewer.html#topic+jsonedit">listviewer::jsonedit</a></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
  
plotly_json(plot_ly())
plotly_json(plot_ly(), FALSE)

</code></pre>

<hr>
<h2 id='plotly_POST'>Create/Modify plotly graphs</h2><span id='topic+plotly_POST'></span>

<h3>Description</h3>

<p>Deprecated: see <code><a href="#topic+api_create">api_create()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotly_POST(
  x = last_plot(),
  filename = NULL,
  fileopt = "overwrite",
  sharing = c("public", "private", "secret"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotly_POST_+3A_x">x</code></td>
<td>
<p>either a ggplot object, a plotly object, or a list.</p>
</td></tr>
<tr><td><code id="plotly_POST_+3A_filename">filename</code></td>
<td>
<p>character string describing the name of the plot in your
plotly account. Use / to specify directories. If a directory path does not
exist it will be created. If this argument is not specified and the title
of the plot exists, that will be used for the filename.</p>
</td></tr>
<tr><td><code id="plotly_POST_+3A_fileopt">fileopt</code></td>
<td>
<p>character string describing whether to create a &quot;new&quot; plotly,
&quot;overwrite&quot; an existing plotly, &quot;append&quot; data to existing plotly,
or &quot;extend&quot; it.</p>
</td></tr>
<tr><td><code id="plotly_POST_+3A_sharing">sharing</code></td>
<td>
<p>If 'public', anyone can view this graph. It will appear in
your profile and can appear in search engines. You do not need to be
logged in to Plotly to view this chart.
If 'private', only you can view this plot. It will not appear in the
Plotly feed, your profile, or search engines. You must be logged in to
Plotly to view this graph. You can privately share this graph with other
Plotly users in your online Plotly account and they will need to be logged
in to view this plot.
If 'secret', anyone with this secret link can view this chart. It will
not appear in the Plotly feed, your profile, or search engines.
If it is embedded inside a webpage or an IPython notebook, anybody who is
viewing that page will be able to view the graph.
You do not need to be logged in to view this plot.</p>
</td></tr>
<tr><td><code id="plotly_POST_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+plot_ly">plot_ly()</a></code>, <code><a href="#topic+signup">signup()</a></code>
</p>

<hr>
<h2 id='plotly-shiny'>Shiny bindings for plotly</h2><span id='topic+plotly-shiny'></span><span id='topic+plotlyOutput'></span><span id='topic+renderPlotly'></span>

<h3>Description</h3>

<p>Output and render functions for using plotly within Shiny
applications and interactive Rmd documents.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotlyOutput(
  outputId,
  width = "100%",
  height = "400px",
  inline = FALSE,
  reportTheme = TRUE,
  fill = !inline
)

renderPlotly(expr, env = parent.frame(), quoted = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotly-shiny_+3A_outputid">outputId</code></td>
<td>
<p>output variable to read from</p>
</td></tr>
<tr><td><code id="plotly-shiny_+3A_width">width</code>, <code id="plotly-shiny_+3A_height">height</code></td>
<td>
<p>Must be a valid CSS unit (like <code>"100%"</code>,
<code>"400px"</code>, <code>"auto"</code>) or a number, which will be coerced to a
string and have <code>"px"</code> appended. Note that, for height, using &quot;auto&quot;
or &quot;100%&quot; generally will not work as expected, because of how
height is computed with HTML/CSS.</p>
</td></tr>
<tr><td><code id="plotly-shiny_+3A_inline">inline</code></td>
<td>
<p>use an inline (<code>span()</code>) or block container
(<code>div()</code>) for the output</p>
</td></tr>
<tr><td><code id="plotly-shiny_+3A_reporttheme">reportTheme</code></td>
<td>
<p>whether or not to report CSS styles (if a sufficient
version of shiny and htmlwidgets is available).</p>
</td></tr>
<tr><td><code id="plotly-shiny_+3A_fill">fill</code></td>
<td>
<p>see <code><a href="htmlwidgets.html#topic+htmlwidgets-shiny">htmlwidgets::shinyWidgetOutput()</a></code> for explanation (requires
a recent version of htmlwidgets).</p>
</td></tr>
<tr><td><code id="plotly-shiny_+3A_expr">expr</code></td>
<td>
<p>An expression that generates a plotly</p>
</td></tr>
<tr><td><code id="plotly-shiny_+3A_env">env</code></td>
<td>
<p>The environment in which to evaluate <code>expr</code>.</p>
</td></tr>
<tr><td><code id="plotly-shiny_+3A_quoted">quoted</code></td>
<td>
<p>Is <code>expr</code> a quoted expression (with <code>quote()</code>)? This
is useful if you want to save an expression in a variable.</p>
</td></tr>
</table>

<hr>
<h2 id='plotlyProxy'>Modify a plotly object inside a shiny app</h2><span id='topic+plotlyProxy'></span><span id='topic+plotlyProxyInvoke'></span>

<h3>Description</h3>

<p>Modify a plotly object inside a shiny app
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotlyProxy(
  outputId,
  session = shiny::getDefaultReactiveDomain(),
  deferUntilFlush = TRUE
)

plotlyProxyInvoke(p, method, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotlyProxy_+3A_outputid">outputId</code></td>
<td>
<p>single-element character vector indicating the output ID
map to modify (if invoked from a Shiny module, the namespace will be added
automatically)</p>
</td></tr>
<tr><td><code id="plotlyProxy_+3A_session">session</code></td>
<td>
<p>the Shiny session object to which the map belongs; usually the
default value will suffice.</p>
</td></tr>
<tr><td><code id="plotlyProxy_+3A_deferuntilflush">deferUntilFlush</code></td>
<td>
<p>indicates whether actions performed against this
instance should be carried out right away, or whether they should be held
until after the next time all of the outputs are updated.</p>
</td></tr>
<tr><td><code id="plotlyProxy_+3A_p">p</code></td>
<td>
<p>a plotly proxy object (created with <code>plotlyProxy</code>)</p>
</td></tr>
<tr><td><code id="plotlyProxy_+3A_method">method</code></td>
<td>
<p>a plotlyjs method to invoke. For a list of options,
visit <a href="https://plotly.com/javascript/plotlyjs-function-reference/">https://plotly.com/javascript/plotlyjs-function-reference/</a></p>
</td></tr>
<tr><td><code id="plotlyProxy_+3A_...">...</code></td>
<td>
<p>unnamed arguments passed onto the plotly.js method</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>


if (require("shiny") &amp;&amp; interactive()) {
  plotly_example("shiny", "proxy_relayout")
  plotly_example("shiny", "proxy_mapbox")
}

</code></pre>

<hr>
<h2 id='print.api'>Print method for a 'generic' API response</h2><span id='topic+print.api'></span>

<h3>Description</h3>

<p>Print method for a 'generic' API response
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'api'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.api_+3A_x">x</code></td>
<td>
<p>a list.</p>
</td></tr>
<tr><td><code id="print.api_+3A_...">...</code></td>
<td>
<p>additional arguments (currently ignored)</p>
</td></tr>
</table>

<hr>
<h2 id='print.api_grid'>Print a plotly grid object</h2><span id='topic+print.api_grid'></span>

<h3>Description</h3>

<p>Print a plotly grid object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'api_grid'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.api_grid_+3A_x">x</code></td>
<td>
<p>a plotly grid object</p>
</td></tr>
<tr><td><code id="print.api_grid_+3A_...">...</code></td>
<td>
<p>additional arguments (currently ignored)</p>
</td></tr>
</table>

<hr>
<h2 id='print.api_grid_local'>Print a plotly grid object</h2><span id='topic+print.api_grid_local'></span>

<h3>Description</h3>

<p>Print a plotly grid object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'api_grid_local'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.api_grid_local_+3A_x">x</code></td>
<td>
<p>a plotly grid object</p>
</td></tr>
<tr><td><code id="print.api_grid_local_+3A_...">...</code></td>
<td>
<p>additional arguments (currently ignored)</p>
</td></tr>
</table>

<hr>
<h2 id='print.api_plot'>Print a plot on plotly's platform</h2><span id='topic+print.api_plot'></span>

<h3>Description</h3>

<p>Print a plot on plotly's platform
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'api_plot'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.api_plot_+3A_x">x</code></td>
<td>
<p>a plotly figure object</p>
</td></tr>
<tr><td><code id="print.api_plot_+3A_...">...</code></td>
<td>
<p>additional arguments (currently ignored)</p>
</td></tr>
</table>

<hr>
<h2 id='print.kaleidoScope'>Print method for kaleido</h2><span id='topic+print.kaleidoScope'></span>

<h3>Description</h3>

<p>S3 method for <code><a href="#topic+kaleido">kaleido()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'kaleidoScope'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.kaleidoScope_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+kaleido">kaleido()</a></code> object.</p>
</td></tr>
<tr><td><code id="print.kaleidoScope_+3A_...">...</code></td>
<td>
<p>currently unused.</p>
</td></tr>
</table>

<hr>
<h2 id='rangeslider'>Add a range slider to the x-axis</h2><span id='topic+rangeslider'></span>

<h3>Description</h3>

<p>Add a range slider to the x-axis
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rangeslider(p, start = NULL, end = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rangeslider_+3A_p">p</code></td>
<td>
<p>plotly object.</p>
</td></tr>
<tr><td><code id="rangeslider_+3A_start">start</code></td>
<td>
<p>a start date/value.</p>
</td></tr>
<tr><td><code id="rangeslider_+3A_end">end</code></td>
<td>
<p>an end date/value.</p>
</td></tr>
<tr><td><code id="rangeslider_+3A_...">...</code></td>
<td>
<p>these arguments are documented here
<a href="https://plotly.com/r/reference/#layout-xaxis-rangeslider">https://plotly.com/r/reference/#layout-xaxis-rangeslider</a></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

plot_ly(x = time(USAccDeaths), y = USAccDeaths) %&gt;% 
  add_lines() %&gt;%
  rangeslider()
  
d &lt;- tibble::tibble(
  time = seq(as.Date("2016-01-01"), as.Date("2016-08-31"), by = "days"),
  y = rnorm(seq_along(time))
 )
 
plot_ly(d, x = ~time, y = ~y) %&gt;%
  add_lines() %&gt;%
  rangeslider(d$time[5], d$time[50])
  

</code></pre>

<hr>
<h2 id='raster2uri'>Encode a raster object as a data URI</h2><span id='topic+raster2uri'></span>

<h3>Description</h3>

<p>Encode a raster object as a data URI, which is suitable for
use with <code>layout()</code> <a href="https://plotly.com/r/reference/#layout-images">images</a>.
This is especially convenient for embedding raster images on a plot in
a self-contained fashion (i.e., so they don't depend on external URL links).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>raster2uri(r, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="raster2uri_+3A_r">r</code></td>
<td>
<p>an object coercable to a raster object via <code><a href="grDevices.html#topic+as.raster">as.raster()</a></code></p>
</td></tr>
<tr><td><code id="raster2uri_+3A_...">...</code></td>
<td>
<p>arguments passed onto <code><a href="grDevices.html#topic+as.raster">as.raster()</a></code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>References</h3>

<p><a href="https://plotly-r.com/embedding-images.html">https://plotly-r.com/embedding-images.html</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# a red gradient (from ?as.raster)
r &lt;- as.raster(matrix(hcl(0, 80, seq(50, 80, 10)), nrow = 4, ncol = 5))
plot(r)

# embed the raster as an image
plot_ly(x = 1, y = 1) %&gt;% 
  layout(
    images = list(list(
     source = raster2uri(r),
     xref = "paper", 
     yref = "paper", 
     x = 0, y = 0, 
     sizex = 0.5, sizey = 0.5, 
     xanchor = "left", yanchor = "bottom"
  ))
 ) 

</code></pre>

<hr>
<h2 id='remove_typedarray_polyfill'>Remove TypedArray polyfill</h2><span id='topic+remove_typedarray_polyfill'></span>

<h3>Description</h3>

<p>By default, plotly.js' TypedArray polyfill is included as a dependency, so
printing &quot;just works&quot; in any context. Many users won't need this polyfill,
so this function may be used to remove it and thus reduce the size of the page.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove_typedarray_polyfill(p)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="remove_typedarray_polyfill_+3A_p">p</code></td>
<td>
<p>a plotly object</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The polyfill seems to be only relevant for those rendering plots
via phantomjs and RStudio on some Windows platforms.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

## Not run: 
p1 &lt;- plot_ly()
p2 &lt;- remove_typedarray_polyfill(p1)
t1 &lt;- tempfile(fileext = ".html")
htmlwidgets::saveWidget(p1, t1)
file.info(t1)$size
htmlwidgets::saveWidget(p2, t1)
file.info(t1)$size

## End(Not run)

</code></pre>

<hr>
<h2 id='res_mn'>Minnesotan Indian Reservation Lands</h2><span id='topic+res_mn'></span>

<h3>Description</h3>

<p>Minnesotan Indian Reservation Lands
</p>


<h3>Usage</h3>

<pre><code class='language-R'>res_mn
</code></pre>


<h3>Format</h3>

<p>An sf data frame with 13 features and 5 fields
</p>


<h3>References</h3>

<p><a href="https://www.dot.state.mn.us/maps/gdma/gis-data.html">https://www.dot.state.mn.us/maps/gdma/gis-data.html</a>
</p>

<hr>
<h2 id='save_image'>Save plot as a static image</h2><span id='topic+save_image'></span><span id='topic+kaleido'></span>

<h3>Description</h3>

<p>Static image exporting via <a href="https://github.com/plotly/Kaleido/">the kaleido python package</a>. <code>kaleido()</code> imports
kaleido into a <span class="pkg">reticulate</span>d Python session and returns a <code style="white-space: pre;">&#8288;$transform()&#8288;</code>
method for converting R plots into static images. <code>save_image()</code> provides a convenience wrapper around <code>kaleido()$transform()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>save_image(p, file, ..., width = NULL, height = NULL, scale = NULL)

kaleido(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="save_image_+3A_p">p</code></td>
<td>
<p>a plot object.</p>
</td></tr>
<tr><td><code id="save_image_+3A_file">file</code></td>
<td>
<p>a file path with a suitable file extension (png, jpg, jpeg,
webp, svg, or pdf).</p>
</td></tr>
<tr><td><code id="save_image_+3A_...">...</code></td>
<td>
<p>not currently used.</p>
</td></tr>
<tr><td><code id="save_image_+3A_width">width</code>, <code id="save_image_+3A_height">height</code></td>
<td>
<p>The width/height of the exported image in layout
pixels. If <code>scale</code> is 1, this will also be the width/height of the exported
image in physical pixels.</p>
</td></tr>
<tr><td><code id="save_image_+3A_scale">scale</code></td>
<td>
<p>The scale factor to use when exporting
the figure. A scale factor larger than 1.0 will increase the image
resolution with respect to the figure's layout pixel dimensions. Whereas as
scale factor of less than 1.0 will decrease the image resolution.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>For <code>save_image()</code>, the generated <code>file</code>. For <code>kaleido()</code>, an environment that contains:
</p>

<ul>
<li> <p><code>transform()</code>: a function to convert plots objects into static images. This function has the same signature (i.e., arguments) as <code>save_image()</code>
</p>
</li>
<li> <p><code>shutdown()</code>: a function for shutting down any currently running subprocesses
that were launched via <code>transform()</code>
</p>
</li>
<li> <p><code>scope</code>: a reference to the underlying <code>kaleido.scopes.plotly.PlotlyScope</code>
python object. Modify this object to customize the underlying Chromium
subprocess and/or configure other details such as URL to plotly.js, MathJax, etc.
</p>
</li></ul>



<h3>Installation</h3>

<p><code>kaleido()</code> requires <a href="https://github.com/plotly/Kaleido/">the kaleido python package</a> to be usable via the <span class="pkg">reticulate</span> package. Here is a recommended way to do the installation:
</p>
<div class="sourceCode"><pre>install.packages('reticulate')
reticulate::install_miniconda()
reticulate::conda_install('r-reticulate', 'python-kaleido')
reticulate::conda_install('r-reticulate', 'plotly', channel = 'plotly')
reticulate::use_miniconda('r-reticulate')
</pre></div>


<h3>Examples</h3>

<pre><code class='language-R'>

## Not run: 
  # Save a single image
  p &lt;- plot_ly(x = 1:10)
  tmp &lt;- tempfile(fileext = ".png")
  save_image(p, tmp)
  file.show(tmp)

  # Efficiently save multiple images
  scope &lt;- kaleido()
  for (i in 1:5) {
    scope$transform(p, tmp)
  }
  # Remove and garbage collect to remove 
  # R/Python objects and shutdown subprocesses
  rm(scope); gc()

## End(Not run)

</code></pre>

<hr>
<h2 id='schema'>Acquire (and optionally display) plotly's plot schema</h2><span id='topic+schema'></span>

<h3>Description</h3>

<p>The schema contains valid attributes names, their value type,
default values (if any), and min/max values (if applicable).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>schema(jsonedit = interactive(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="schema_+3A_jsonedit">jsonedit</code></td>
<td>
<p>use <code>listviewer::jsonedit</code> to view the JSON?</p>
</td></tr>
<tr><td><code id="schema_+3A_...">...</code></td>
<td>
<p>other options passed onto <code>listviewer::jsonedit</code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
s &lt;- schema()

# retrieve acceptable `layout.mapbox.style` values
if (!is.na(Sys.getenv('MAPBOX_TOKEN', NA))) {
  styles &lt;- s$layout$layoutAttributes$mapbox$style$values
  subplot(
    plot_mapbox() %&gt;% layout(mapbox = list(style = styles[3])),
    plot_mapbox() %&gt;% layout(mapbox = list(style = styles[5]))
  )
}



</code></pre>

<hr>
<h2 id='showRGB'>View colors already formatted by toRGB()</h2><span id='topic+showRGB'></span>

<h3>Description</h3>

<p>Useful for viewing colors after they've been converted to plotly.js'
color format &ndash; &quot;rgba(255, 255, 255, 1)&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>showRGB(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="showRGB_+3A_x">x</code></td>
<td>
<p>character string specifying color(s).</p>
</td></tr>
<tr><td><code id="showRGB_+3A_...">...</code></td>
<td>
<p>arguments passed along to <code>scales::show_col</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

showRGB(toRGB(colors()), labels = FALSE)

</code></pre>

<hr>
<h2 id='signup'>Create a new plotly account.</h2><span id='topic+signup'></span>

<h3>Description</h3>

<p>A sign up interface to plotly through the R Console.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>signup(username, email, save = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="signup_+3A_username">username</code></td>
<td>
<p>Desired username.</p>
</td></tr>
<tr><td><code id="signup_+3A_email">email</code></td>
<td>
<p>Desired email.</p>
</td></tr>
<tr><td><code id="signup_+3A_save">save</code></td>
<td>
<p>If request is successful, should the username &amp; API key be
automatically stored as an environment variable in a .Rprofile?</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li><p> api_key key to use with the api
</p>
</li>
<li><p> tmp_pw temporary password to access your plotly account
</p>
</li></ul>



<h3>References</h3>

<p>https://plotly.com/rest/
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# You need a plotly username and API key to communicate with the plotly API.

# If you don't already have an API key, you can obtain one with a valid
# username and email via signup().
s &lt;- signup('anna.lyst', 'anna.lyst@plot.ly')

# If you already have a username and API key, please create the following
# environment variables:
Sys.setenv("plotly_username" = "me")
Sys.setenv("plotly_api_key" = "mykey")
# You can also change the default domain if you have a plotly server.
Sys.setenv("plotly_domain" = "http://mydomain.com")

# If you want to automatically load these environment variables when you
# start R, you can put them inside your ~/.Rprofile 
# (see help(.Rprofile) for more details)


## End(Not run)
</code></pre>

<hr>
<h2 id='style'>Modify trace(s)</h2><span id='topic+style'></span>

<h3>Description</h3>

<p>Modify trace(s) of an existing plotly visualization. Useful when used in
conjunction with <code><a href="#topic+get_figure">get_figure()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>style(p, ..., traces = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="style_+3A_p">p</code></td>
<td>
<p>A plotly visualization.</p>
</td></tr>
<tr><td><code id="style_+3A_...">...</code></td>
<td>
<p>Visual properties.</p>
</td></tr>
<tr><td><code id="style_+3A_traces">traces</code></td>
<td>
<p>numeric vector. Which traces should be modified? By default,
attributes place in <code>...</code> will be applied to every trace.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>See Also</h3>

<p><code><a href="#topic+api_download_plot">api_download_plot()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# style() is especially useful in conjunction with ggplotly()
# It allows you to leverage the underlying plotly.js library to change 
# the return result of ggplotly()
(p &lt;- ggplotly(qplot(data = mtcars, wt, mpg, geom = c("point", "smooth"))))

# removes hoverinfo for the line/ribbon traces (use `plotly_json()` to verify!)
style(p, hoverinfo = "none", traces = c(2, 3))

# another example with plot_ly() instead of ggplotly()
marker &lt;- list(
  color = "red",
  line = list(
    width = 20, 
    color = "black"
 )
)
(p &lt;- plot_ly(x = 1:10, y = 1:10, marker = marker))

# note how the entire (marker) object is replaced if a list is provided
style(p, marker = list(line = list(color = "blue")))

# similar to plotly.js, you can update a particular attribute like so 
# https://github.com/plotly/plotly.js/issues/1866#issuecomment-314115744
style(p, marker.line.color = "blue") 
# this clobbers the previously supplied marker.line.color
style(p, marker.line = list(width = 2.5), marker.size = 10)

</code></pre>

<hr>
<h2 id='subplot'>View multiple plots in a single view</h2><span id='topic+subplot'></span>

<h3>Description</h3>

<p>View multiple plots in a single view
</p>


<h3>Usage</h3>

<pre><code class='language-R'>subplot(
  ...,
  nrows = 1,
  widths = NULL,
  heights = NULL,
  margin = 0.02,
  shareX = FALSE,
  shareY = FALSE,
  titleX = shareX,
  titleY = shareY,
  which_layout = "merge"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="subplot_+3A_...">...</code></td>
<td>
<p>One of the following
</p>

<ul>
<li><p> any number of plotly/ggplot2 objects.
</p>
</li>
<li><p> a list of plotly/ggplot2 objects.
</p>
</li>
<li><p> a tibble with one list-column of plotly/ggplot2 objects.
</p>
</li></ul>
</td></tr>
<tr><td><code id="subplot_+3A_nrows">nrows</code></td>
<td>
<p>number of rows for laying out plots in a grid-like structure.
Only used if no domain is already specified.</p>
</td></tr>
<tr><td><code id="subplot_+3A_widths">widths</code></td>
<td>
<p>relative width of each column on a 0-1 scale. By default all
columns have an equal relative width.</p>
</td></tr>
<tr><td><code id="subplot_+3A_heights">heights</code></td>
<td>
<p>relative height of each row on a 0-1 scale. By default all
rows have an equal relative height.</p>
</td></tr>
<tr><td><code id="subplot_+3A_margin">margin</code></td>
<td>
<p>either a single value or four values (all between 0 and 1).
If four values are provided, the first is used as the left margin, the second
is used as the right margin, the third is used as the top margin, and the
fourth is used as the bottom margin.
If a single value is provided, it will be used as all four margins.</p>
</td></tr>
<tr><td><code id="subplot_+3A_sharex">shareX</code></td>
<td>
<p>should the x-axis be shared amongst the subplots?</p>
</td></tr>
<tr><td><code id="subplot_+3A_sharey">shareY</code></td>
<td>
<p>should the y-axis be shared amongst the subplots?</p>
</td></tr>
<tr><td><code id="subplot_+3A_titlex">titleX</code></td>
<td>
<p>should x-axis titles be retained?</p>
</td></tr>
<tr><td><code id="subplot_+3A_titley">titleY</code></td>
<td>
<p>should y-axis titles be retained?</p>
</td></tr>
<tr><td><code id="subplot_+3A_which_layout">which_layout</code></td>
<td>
<p>adopt the layout of which plot? If the default value of
&quot;merge&quot; is used, layout options found later in the sequence of plots will
override options found earlier in the sequence. This argument also accepts a
numeric vector specifying which plots to consider when merging.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plotly object
</p>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# pass any number of plotly objects to subplot()
p1 &lt;- plot_ly(economics, x = ~date, y = ~uempmed)
p2 &lt;- plot_ly(economics, x = ~date, y = ~unemploy)
subplot(p1, p2, p1, p2, nrows = 2, margin = 0.05)

#'  # anchor multiple traces on the same legend entry
 p1 &lt;- add_lines(p1, color = I("black"), name = "1st", legendgroup = "1st")
 p2 &lt;- add_lines(p2, color = I("red"), name = "2nd", legendgroup = "2nd")
 
 subplot(
   p1, style(p1, showlegend = FALSE),
   p2, style(p2, showlegend = FALSE),
   nrows = 2, margin = 0.05
 )

# or pass a list
economics_long %&gt;%
  split(.$variable) %&gt;%
  lapply(function(d) plot_ly(d, x = ~date, y = ~value)) %&gt;%
  subplot(nrows = NROW(.), shareX = TRUE)
  
# or pass a tibble with a list-column of plotly objects
economics_long %&gt;%
  group_by(variable) %&gt;%
  do(p = plot_ly(., x = ~date, y = ~value)) %&gt;%
  subplot(nrows = NROW(.), shareX = TRUE)
  
# learn more at https://plotly.com/r/subplots/

</code></pre>

<hr>
<h2 id='TeX'>Render TeX in a plotly graph using MathJax</h2><span id='topic+TeX'></span>

<h3>Description</h3>

<p>This function makes it slightly easier to render TeX in a plotly graph &ndash;
it ensures that MathJax is included with the final result and also
ensures the provided string is surrounded with <code>$</code> (this is what plotly.js
uses to declare a string as TeX).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>TeX(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="TeX_+3A_x">x</code></td>
<td>
<p>a character vector</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="#topic+config">config</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

plot_ly(x = c(1, 2, 3, 4), y = c(1, 4, 9, 16)) %&gt;%
  layout(title = TeX("\\text{Some mathjax: }\\alpha+\\beta x")) %&gt;%
  config(mathjax = "cdn")

</code></pre>

<hr>
<h2 id='to_basic'>Convert a geom to a &quot;basic&quot; geom.</h2><span id='topic+to_basic'></span>

<h3>Description</h3>

<p>This function makes it possible to convert ggplot2 geoms that
are not included with ggplot2 itself. Users shouldn't need to use
this function. It exists purely to allow other package authors to write
their own conversion method(s).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>to_basic(data, prestats_data, layout, params, p, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="to_basic_+3A_data">data</code></td>
<td>
<p>the data returned by <code>ggplot2::ggplot_build()</code>.</p>
</td></tr>
<tr><td><code id="to_basic_+3A_prestats_data">prestats_data</code></td>
<td>
<p>the data before statistics are computed.</p>
</td></tr>
<tr><td><code id="to_basic_+3A_layout">layout</code></td>
<td>
<p>the panel layout.</p>
</td></tr>
<tr><td><code id="to_basic_+3A_params">params</code></td>
<td>
<p>parameters for the geom, statistic, and 'constant' aesthetics</p>
</td></tr>
<tr><td><code id="to_basic_+3A_p">p</code></td>
<td>
<p>a ggplot2 object (the conversion may depend on scales, for instance).</p>
</td></tr>
<tr><td><code id="to_basic_+3A_...">...</code></td>
<td>
<p>currently ignored</p>
</td></tr>
</table>

<hr>
<h2 id='toRGB'>Convert R colours to RGBA hexadecimal colour values</h2><span id='topic+toRGB'></span>

<h3>Description</h3>

<p>Convert R colours to RGBA hexadecimal colour values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>toRGB(x, alpha = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="toRGB_+3A_x">x</code></td>
<td>
<p>see the <code>col</code> argument in <code>col2rgb</code> for valid specifications</p>
</td></tr>
<tr><td><code id="toRGB_+3A_alpha">alpha</code></td>
<td>
<p>alpha channel on 0-1 scale</p>
</td></tr>
</table>


<h3>Value</h3>

<p>hexadecimal colour value (if is.na(x), return &quot;transparent&quot; for compatibility with Plotly)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+showRGB">showRGB()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

toRGB("steelblue") 
# [1] "rgba(70,130,180,1)"

m &lt;- list(
  color = toRGB("red"),
  line = list(
    color = toRGB("black"), 
    width = 19
  )
)

plot_ly(x = 1, y = 1, marker = m)

</code></pre>

<hr>
<h2 id='toWebGL'>Convert trace types to WebGL</h2><span id='topic+toWebGL'></span>

<h3>Description</h3>

<p>Convert trace types to WebGL
</p>


<h3>Usage</h3>

<pre><code class='language-R'>toWebGL(p)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="toWebGL_+3A_p">p</code></td>
<td>
<p>a plotly or ggplot object.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>

# currently no bargl trace type
toWebGL(ggplot() + geom_bar(aes(1:10)))
toWebGL(qplot(1:10, 1:10))

</code></pre>

<hr>
<h2 id='wind'>Wind data</h2><span id='topic+wind'></span>

<h3>Description</h3>

<p>Description TBD.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wind
</code></pre>


<h3>Format</h3>

<p>A data frame with three variables: <code>r</code>, <code>t</code>,
<code>nms</code>.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
