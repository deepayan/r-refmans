<!DOCTYPE html><html lang="en"><head><title>Help for package simsurv</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {simsurv}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#brcancer'><p>German breast cancer dataset</p></a></li>
<li><a href='#simsurv'><p>Simulate survival data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Simulate Survival Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-01-09</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Sam Brilleman &lt;sam.brilleman@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Simulate survival times from standard parametric survival
    distributions (exponential, Weibull, Gompertz), 2-component mixture
    distributions, or a user-defined hazard, log hazard, cumulative hazard,
    or log cumulative hazard function. Baseline covariates can be included
    under a proportional hazards assumption.
    Time dependent effects (i.e. non-proportional hazards) can be included by
    interacting covariates with linear time or a user-defined function of time.
    Clustered event times are also accommodated.
    The 2-component mixture distributions can allow for a variety of flexible
    baseline hazard functions reflecting those seen in practice.
    If the user wishes to provide a user-defined
    hazard or log hazard function then this is possible, and the resulting
    cumulative hazard function does not need to have a closed-form solution.
    For details see the supporting paper &lt;<a href="https://doi.org/10.18637%2Fjss.v097.i03">doi:10.18637/jss.v097.i03</a>&gt;.
    Note that this package is modelled on the 'survsim' package available in
    the 'Stata' software (see Crowther and Lambert (2012)
    <a href="https://www.stata-journal.com/sjpdf.html?articlenum=st0275">https://www.stata-journal.com/sjpdf.html?articlenum=st0275</a> or
    Crowther and Lambert (2013) &lt;<a href="https://doi.org/10.1002%2Fsim.5823">doi:10.1002/sim.5823</a>&gt;).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a> | file LICENSE</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.3.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>methods, stats</td>
</tr>
<tr>
<td>Suggests:</td>
<td>BB (&ge; 2014.10.1), eha (&ge; 2.4.5), flexsurv (&ge; 1.1.0), knitr
(&ge; 1.15.1), MASS, rmarkdown, rstpm2 (&ge; 1.4.1), survival (&ge;
2.40.1), testthat (&ge; 1.0.2)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/sambrilleman/simsurv/issues">https://github.com/sambrilleman/simsurv/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-01-10 08:53:42 UTC; sbrilleman</td>
</tr>
<tr>
<td>Author:</td>
<td>Sam Brilleman [cre, aut, cph],
  Alessandro Gasparini [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-01-13 10:50:11 UTC</td>
</tr>
</table>
<hr>
<h2 id='brcancer'>German breast cancer dataset</h2><span id='topic+brcancer'></span>

<h3>Description</h3>

<p>A data set containing a subset of variables from the German
breast cancer study (Schumacher et al. (1994)).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>brcancer
</code></pre>


<h3>Format</h3>

<p>A data frame with 686 rows and 4 variables.
</p>


<h3>Details</h3>


<ul>
<li> <p><code>id</code> Subject ID
</p>
</li>
<li> <p><code>hormon</code> Treatment indicator for hormone therapy (0 = no, 1 = yes)
</p>
</li>
<li> <p><code>rectime</code> Time to recurrence or censoring (in days)
</p>
</li>
<li> <p><code>censrec</code> Event indicator (0 = censored, 1 = recurrence)
</p>
</li></ul>



<h3>References</h3>

<p>Sauerbrei W, Royston P. Building multivariable prognostic and diagnostic models:
transformation of the predictors by using fractional polynomials.
<em>Journal of the Royal Statistics Society Series A</em>. 1999;<strong>162</strong>(1):71&ndash;94.
</p>
<p>Schumacher M, et al. for the German Breast Cancer Study Group. Randomized 2x2
trial evaluating hormonal treatment and the duration of chemotherapy in
node-positive breast cancer patients. <em>Journal of Clinical Oncology</em>.
1994;<strong>12</strong>:2086&ndash;2093.
</p>

<hr>
<h2 id='simsurv'>Simulate survival data</h2><span id='topic+simsurv'></span>

<h3>Description</h3>

<p>Simulate survival times from standard parametric survival distributions,
2-component mixture distributions, or a user-defined hazard or log hazard
function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simsurv(
  dist = c("weibull", "exponential", "gompertz"),
  lambdas,
  gammas,
  x,
  betas,
  tde,
  tdefunction = NULL,
  mixture = FALSE,
  pmix = 0.5,
  hazard,
  loghazard,
  cumhazard,
  logcumhazard,
  idvar = NULL,
  ids = NULL,
  nodes = 15,
  maxt = NULL,
  interval = c(1e-08, 500),
  rootsolver = c("uniroot", "dfsane"),
  rootfun = log,
  seed = sample.int(.Machine$integer.max, 1),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="simsurv_+3A_dist">dist</code></td>
<td>
<p>Character string specifying the parametric survival distribution.
Can be <code>"weibull"</code> (the default), <code>"exponential"</code>, or
<code>"gompertz"</code>. Note that this is ignored if a user-defined baseline
hazard function is provided via the <code>hazard</code> or <code>loghazard</code>
argument.</p>
</td></tr>
<tr><td><code id="simsurv_+3A_lambdas">lambdas</code></td>
<td>
<p>A numeric vector corresponding to the scale parameters for
the exponential, Weibull or Gompertz distributions. This vector should be
length one for any of the standard parametric distributions, or length two
for a 2-component mixture distribution when <code>mixture = TRUE</code>.</p>
</td></tr>
<tr><td><code id="simsurv_+3A_gammas">gammas</code></td>
<td>
<p>A numeric vector corresponding to the shape parameters for
the Weibull or Gompertz distributions. This vector should be length
one for the standard Weibull or Gompertz distributions, or length two
for a 2-component mixture distribution when <code>mixture = TRUE</code>.</p>
</td></tr>
<tr><td><code id="simsurv_+3A_x">x</code></td>
<td>
<p>A data frame containing the covariate values for each individual.
Each row of the data frame should supply covariate data for one individual.
The column names should correspond to the named elements in <code>betas</code>.
If no covariates are being used to simulate the event times, then this data
frame should just include an ID value for each individual; this is necessary
since the number of individuals to simulate event times for is taken to be the
number of rows in <code>x</code> (unless <code>idvar</code> and <code>ids</code> are
specified, in which case the number of individuals to simulate event times
for is taken to be <code>length(ids)</code>).</p>
</td></tr>
<tr><td><code id="simsurv_+3A_betas">betas</code></td>
<td>
<p>A named vector, a data frame, or a list of data frames,
containing the &quot;true&quot; parameters (e.g. log hazard ratios).
If a standard exponential, Weibull, or Gompertz distribution, or a 2-component
mixture distribution is being used then <code>betas</code> should provide the log hazard
ratios for each of the baseline covariates that is to be included in the linear
predictor of the proportional hazards model. This is most easily specified
as a named vector (see the <strong>Examples</strong>). Alternatively, if a
user-defined baseline hazard (or log hazard) function is provided via
the <code>hazard</code> (or <code>loghazard</code>) argument, then <code>betas</code> can be
specified as a vector, a data frame, or a list of data frames, and the
of user-defined hazard (or log hazard) function should extract named elements
<code>betas</code> however necessary in order to calculate the hazard (or log
hazard) for each individual. See the <strong>Examples</strong>.</p>
</td></tr>
<tr><td><code id="simsurv_+3A_tde">tde</code></td>
<td>
<p>A named vector, containing the &quot;true&quot; parameters that will be used
to create time dependent effects (i.e. non-proportional hazards). The
values specified in <code>tde</code> are used as coefficients (in the linear
predictor of the proportional hazards model) on an interaction term between
the corresponding covariate and time (or some function of time, for example
log time, if <code>tdefunction</code> is not <code>NULL</code>).</p>
</td></tr>
<tr><td><code id="simsurv_+3A_tdefunction">tdefunction</code></td>
<td>
<p>An optional function of time to which covariates specified
in <code>tde</code> will be interacted, in order to generate time dependent
effects (i.e. non-proportional hazards). If <code>NULL</code> then the covariates
specified in <code>tde</code> will be interacted with linear time. This can be the
character string corresponding to a standard function (such as &quot;log&quot;) or it
can be a user-defined function with a single argument (for example
<code>function(x) x ^ 2</code>).</p>
</td></tr>
<tr><td><code id="simsurv_+3A_mixture">mixture</code></td>
<td>
<p>Logical specifying whether to use a 2-component mixture
model for the survival distribution. If <code>TRUE</code>, then the distribution
of the mixture components is determined by the <code>dist</code> argument.</p>
</td></tr>
<tr><td><code id="simsurv_+3A_pmix">pmix</code></td>
<td>
<p>Scalar between 0 and 1 defining the mixing parameter when
<code>mixture = TRUE</code>. The baseline survival at time <code class="reqn">t</code> is taken to be
<code class="reqn">S(t) = p S_1(t) + (1 - p) S_2(t)</code>
where <code class="reqn">S_1(t)</code> and <code class="reqn">S_2(t)</code> are the baseline survival under each
component of the mixture distribution.</p>
</td></tr>
<tr><td><code id="simsurv_+3A_hazard">hazard</code></td>
<td>
<p>Optionally, a user-defined hazard function, with arguments
<code>t</code>, <code>x</code>, and <code>betas</code>. This function should return the
hazard at time <code>t</code> for an individual with covariates supplied via <code>x</code>
and parameters supplied via <code>betas</code>. See the <strong>Examples</strong>.</p>
</td></tr>
<tr><td><code id="simsurv_+3A_loghazard">loghazard</code></td>
<td>
<p>Optionally, a user-defined log hazard function, with arguments
<code>t</code>, <code>x</code>, and <code>betas</code>. This function should return the
log hazard at time <code>t</code> for an individual with covariates supplied via
<code>x</code> and parameters supplied via <code>betas</code>. See the <strong>Examples</strong>.</p>
</td></tr>
<tr><td><code id="simsurv_+3A_cumhazard">cumhazard</code></td>
<td>
<p>Optionally, a user-defined cumulative hazard function, with
arguments <code>t</code>, <code>x</code>, and <code>betas</code>. This function should return the
cumulative hazard at time <code>t</code> for an individual with covariates supplied
via <code>x</code> and parameters supplied via <code>betas</code>. See the <strong>Examples</strong>.</p>
</td></tr>
<tr><td><code id="simsurv_+3A_logcumhazard">logcumhazard</code></td>
<td>
<p>Optionally, a user-defined log cumulative hazard function, with
arguments <code>t</code>, <code>x</code>, and <code>betas</code>. This function should return the
log cumulative hazard at time <code>t</code> for an individual with covariates supplied
via <code>x</code> and parameters supplied via <code>betas</code>. See the <strong>Examples</strong>.</p>
</td></tr>
<tr><td><code id="simsurv_+3A_idvar">idvar</code></td>
<td>
<p>The name of the ID variable identifying individuals. This is
only required when <code>x</code> (and <code>betas</code> if it is supplied as a
data frame) contains multiple rows per individual. Otherwise, if
<code>idvar = NULL</code> then each row of <code>x</code> (and <code>betas</code> if it is
supplied as a data frame) is assumed to correspond to a different individual.</p>
</td></tr>
<tr><td><code id="simsurv_+3A_ids">ids</code></td>
<td>
<p>A vector containing the unique values of <code>idvar</code> (i.e. the
unique individual IDs). This is only required when <code>x</code> (and <code>betas</code>
if it is supplied as a data frame) contain multiple rows per individual. Otherwise,
if <code>idvar = NULL</code> then each row of <code>x</code> (and <code>betas</code> if it is
supplied as a data frame) is assumed to correspond to a different individual.</p>
</td></tr>
<tr><td><code id="simsurv_+3A_nodes">nodes</code></td>
<td>
<p>Integer specifying the number of quadrature nodes to use for
the Gauss-Kronrod quadrature. Can be 7, 11, or 15.</p>
</td></tr>
<tr><td><code id="simsurv_+3A_maxt">maxt</code></td>
<td>
<p>The maximum event time. For simulated event times greater than
<code>maxt</code>, the event time (<code>"eventtime"</code>) returned in the data frame
will be truncated at <code>maxt</code> and the event indicator (<code>"status"</code>)
will be set to zero indicating that the individual was right-censored.</p>
</td></tr>
<tr><td><code id="simsurv_+3A_interval">interval</code></td>
<td>
<p>The interval over which to search for the
<code><a href="stats.html#topic+uniroot">uniroot</a></code> corresponding to each simulated event time.</p>
</td></tr>
<tr><td><code id="simsurv_+3A_rootsolver">rootsolver</code></td>
<td>
<p>Character string specifying the function to use for
univariate root finding when required. This can currently be
<code>"uniroot"</code> for using the <code><a href="stats.html#topic+uniroot">uniroot</a></code> function, or
<code>"dfsane"</code> for using the <code><a href="BB.html#topic+dfsane">dfsane</a></code> function.</p>
</td></tr>
<tr><td><code id="simsurv_+3A_rootfun">rootfun</code></td>
<td>
<p>A function to apply to each side of the root finding equation
when numerical root finding is used to solve for the simulated event time.
An appropriate function helps to improve numerical stability. The default
is to use a log transformation; that is, to solve <code class="reqn">log(S(T)) - log(U) = 0</code>
where <code class="reqn">S(T)</code> is the survival probability at the event time and
<code class="reqn">U</code> is a uniform random variate. Suitable alternatives might be to
specify <code>rootfun = NULL</code>, which corresponds to <code class="reqn">S(T) - U = 0</code>,
or <code>rootfun = sqrt</code>, which corresponds to <code class="reqn">sqrt(S(T)) - sqrt(U) = 0</code>.
It is unexpected that the user should need to change this argument from its
default value, except perhaps in the extreme case that the numerical root
finding fails.</p>
</td></tr>
<tr><td><code id="simsurv_+3A_seed">seed</code></td>
<td>
<p>The <code><a href="base.html#topic+set.seed">seed</a></code> to use.</p>
</td></tr>
<tr><td><code id="simsurv_+3A_...">...</code></td>
<td>
<p>Other arguments passed to <code>hazard</code>, <code>loghazard</code>,
<code>cumhazard</code>, or <code>logcumhazard</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>simsurv</code> function simulates survival times from
standard parametric survival distributions (exponential, Weibull, Gompertz),
2-component mixture distributions, or a user-defined hazard or log hazard function.
Baseline covariates can be included under a proportional hazards assumption.
Time dependent effects (i.e. non-proportional hazards) can be included by
interacting covariates with time (by specifying them in the <code>tde</code>
argument); the default behaviour is to interact the covariates with linear
time, however, they can be interacted with some other function of time simply
by using the <code>tdefunction</code> argument.
</p>
<p>Under the 2-component mixture distributions (obtained by setting
<code>mixture = TRUE</code>) the baseline survival at time <code class="reqn">t</code> is taken to be
<code class="reqn">S(t) = p * S_1(t) + (1 - p) * S_2(t)</code>
where <code class="reqn">S_1(t)</code> and <code class="reqn">S_2(t)</code> are the baseline survival under each
component of the mixture distribution and <code class="reqn">p</code> is the mixing parameter
specified via the argument <code>pmix</code>. Each component of the mixture
distribution is assumed to be either exponential, Weibull or Gompertz.
The 2-component mixture distributions can allow for a variety of flexible
baseline hazard functions (see Crowther and Lambert (2013) for some examples).
</p>
<p>If the user wishes to provide a user-defined hazard or log hazard function
(instead of using one of the standard parametric survival distributions) then
this is also possible via the <code>hazard</code> or <code>loghazard</code> argument.
If a user-defined hazard or log hazard function is specified, then this is
allowed to be time-dependent, and the resulting cumulative hazard function
does not need to have a closed-form solution. The survival times are
generated using the approach described in Crowther and Lambert (2013),
whereby the cumulative hazard is evaluated using numerical quadrature and
survival times are generated using an iterative algorithm which nests the
quadrature-based evaluation of the cumulative hazard inside Brent's (1973)
univariate root finder (for the latter the <code><a href="stats.html#topic+uniroot">uniroot</a></code>
function is used). Not requiring a closed form solution to the cumulative
hazard function has the benefit that survival times can be generated for
complex models such as joint longitudinal and survival models; the
<strong>Examples</strong> section provides an example of this.
</p>


<h4>Parameterisation for the exponential distribution</h4>

<p>For the exponential distribution, with scale parameter
<code class="reqn">\lambda &gt; 0</code>, the baseline hazard and survival
functions used by <code>simsurv</code> are:
<code class="reqn">h(t) = \lambda</code> and
<code class="reqn">S(t) = \exp(-\lambda)</code>.
</p>
<p>Our parameterisation is equivalent to the one used by Wikipedia, the
<code><a href="stats.html#topic+dexp">dexp</a></code> function, the <span class="pkg">eha</span> package, and the <span class="pkg">flexsurv</span>
package, except what we call the scale parameter
they call the rate parameter.
</p>



<h4>Parameterisation for the Weibull distribution</h4>

<p>For the Weibull distribution, with shape parameter <code class="reqn">\gamma &gt; 0</code>
and scale parameter <code class="reqn">\lambda &gt; 0</code>, the baseline
hazard and survival functions used by <code>simsurv</code> are:
<code class="reqn">h(t) = \gamma \lambda t ^ {\gamma - 1}</code> and
<code class="reqn">S(t) = \exp(-\lambda t ^ {\gamma})</code>. Setting <code class="reqn">\gamma</code> equal
to 1 leads to the exponential distribution as a special case.
</p>
<p>Our parameterisation differs from the one used by Wikipedia,
<code><a href="stats.html#topic+dweibull">dweibull</a></code>, the <code><a href="eha.html#topic+phreg">phreg</a></code> modelling
function in the <span class="pkg">eha</span> package, and the
<code><a href="flexsurv.html#topic+flexsurvreg">flexsurvreg</a></code> modelling function in the
<span class="pkg">flexsurv</span> package. The parameterisation used in those
functions can be achieved by transforming the scale parameter via the
relationship <code class="reqn">b = \lambda ^ {\frac{-1}{\gamma}}</code>, or equivalently
<code class="reqn">\lambda = b ^ {-\gamma}</code> where <code class="reqn">b</code> is the scale parameter under
their parameterisation of the Weibull distribution.
</p>



<h4>Parameterisation for the Gompertz distribution</h4>

<p>For the Gompertz distribution, with  and shape parameter <code class="reqn">\gamma &gt; 0</code>
and scale parameter <code class="reqn">\lambda &gt; 0</code>, the baseline
hazard and survival functions used by <code>simsurv</code> are:
<code class="reqn">h(t) = \lambda \exp(\gamma t)</code> and
<code class="reqn">S(t) = \exp(\frac{-\lambda (\exp(\gamma t) - 1)}{\gamma})</code>.
Setting <code class="reqn">\gamma</code> equal to 0 leads to the exponential distribution
as a special case.
</p>
<p>Our parameterisation is equivalent to the one used by the
<code><a href="flexsurv.html#topic+dgompertz">dgompertz</a></code> and <code><a href="flexsurv.html#topic+flexsurvreg">flexsurvreg</a></code>
functions in the <span class="pkg">flexsurv</span> package, except they use slightly different
terminology. Their parameterisation can be achieved via the relationship
<code class="reqn">a = \gamma</code> and <code class="reqn">b = \lambda</code> where <code class="reqn">a</code> and <code class="reqn">b</code> are their
shape and rate parameters, respectively.
</p>
<p>Our parameterisation differs from the one used in the
<code><a href="eha.html#topic+dgompertz">dgompertz</a></code> and <code><a href="eha.html#topic+phreg">phreg</a></code> functions
in the <span class="pkg">eha</span> package. Their parameterisation can be achieved via
the relationship <code class="reqn">a = \lambda</code> and <code class="reqn">b = \frac{1}{\gamma}</code> where
<code class="reqn">a</code> and <code class="reqn">b</code> are their shape and scale parameters, respectively.
</p>
<p>Our parameterisation differs from the one used by Wikipedia.
Their parameterisation can be achieved via the relationship
<code class="reqn">a = \frac{\lambda}{\gamma}</code> and <code class="reqn">b = \gamma</code> where
<code class="reqn">a</code> and <code class="reqn">b</code> are their shape and scale parameters, respectively.
</p>



<h3>Value</h3>

<p>A data frame with a row for each individual, and the following three
columns:
</p>

<ul>
<li> <p><code>id</code> The individual identifier
</p>
</li>
<li> <p><code>eventtime</code> The simulated event (or censoring) time
</p>
</li>
<li> <p><code>status</code> The event indicator, 1 for failure, 0 for censored
</p>
</li></ul>



<h3>Note</h3>

<p>This package is modelled on the user-written <code>survsim</code> package
available in the Stata software (see Crowther and Lambert (2012)).
</p>


<h3>Author(s)</h3>

<p>Sam Brilleman (<a href="mailto:sam.brilleman@gmail.com">sam.brilleman@gmail.com</a>)
</p>


<h3>References</h3>

<p>Brilleman SL, Wolfe R, Moreno-Betancur M, and Crowther MJ. (2020)
Simulating survival data using the simsurv R package. <em>Journal
of Statistical Software</em> <strong>96</strong>(9), 1&ndash;27.
doi: <a href="https://doi.org/10.18637/jss.v097.i03">10.18637/jss.v097.i03</a>.
</p>
<p>Crowther MJ, and Lambert PC. (2013) Simulating biologically plausible
complex survival data. <em>Statistics in Medicine</em> <strong>32</strong>,
4118&ndash;4134. doi: <a href="https://doi.org/10.1002/sim.5823">10.1002/sim.5823</a>
</p>
<p>Bender R, Augustin T, and Blettner M. (2005) Generating survival times to
simulate Cox proportional hazards models. <em>Statistics in Medicine</em>
<strong>24</strong>(11), 1713&ndash;1723.
</p>
<p>Brent R. (1973) <em>Algorithms for Minimization without Derivatives</em>.
Englewood Cliffs, NJ: Prentice-Hall.
</p>
<p>Crowther MJ, and Lambert PC. (2012) Simulating complex survival data.
<em>The Stata Journal</em> <strong>12</strong>(4), 674&ndash;687.
<a href="https://www.stata-journal.com/sjpdf.html?articlenum=st0275">https://www.stata-journal.com/sjpdf.html?articlenum=st0275</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  #-------------- Simpler examples

  # Generate times from a Weibull model including a binary
  # treatment variable, with log(hazard ratio) = -0.5, and censoring
  # after 5 years:
  set.seed(9911)
  covs &lt;- data.frame(id = 1:100, trt = stats::rbinom(100, 1L, 0.5))
  s1 &lt;- simsurv(lambdas = 0.1, gammas = 1.5, betas = c(trt = -0.5),
                x = covs, maxt = 5)
  head(s1)

  # Generate times from a Gompertz model:
  s2 &lt;- simsurv(dist = "gompertz", lambdas = 0.1, gammas = 0.05, x = covs)

  # Generate times from a 2-component mixture Weibull model:
  s3 &lt;- simsurv(lambdas = c(0.1, 0.05), gammas = c(1, 1.5),
                mixture = TRUE, pmix = 0.5, x = covs, maxt = 5)

  # Generate times from user-defined log hazard function:
  fn &lt;- function(t, x, betas, ...)
    (-1 + 0.02 * t - 0.03 * t ^ 2 + 0.005 * t ^ 3)
  s4 &lt;- simsurv(loghazard = fn, x = covs, maxt = 1.5)

  # Generate times from a Weibull model with diminishing treatment effect:
  s5 &lt;- simsurv(lambdas = 0.1, gammas = 1.5, betas = c(trt = -0.5),
                x = covs, tde = c(trt = 0.05), tdefunction = "log")

  #-------------- Complex examples

  # Here we present an example of simulating survival times
  # based on a joint longitudinal and survival model

  # First we define the hazard function to pass to simsurv
  # (NB this is a Weibull proportional hazards regression submodel
  # from a joint longitudinal and survival model with a "current
  # value" association structure).
  haz &lt;- function(t, x, betas, ...) {
      betas[["shape"]] * (t ^ (betas[["shape"]] - 1)) * exp(
        betas[["betaEvent_intercept"]] +
        betas[["betaEvent_binary"]] * x[["Z1"]] +
        betas[["betaEvent_continuous"]] * x[["Z2"]] +
        betas[["betaEvent_assoc"]] * (
          betas[["betaLong_intercept"]] +
          betas[["betaLong_slope"]] * t +
          betas[["betaLong_binary"]] * x[["Z1"]] +
          betas[["betaLong_continuous"]] * x[["Z2"]]
        )
      )
  }

  # Then we construct data frames with the true parameter
  # values and the covariate data for each individual
  set.seed(5454) # set seed before simulating data
  N &lt;- 20        # number of individuals

  # Population (fixed effect) parameters
  betas &lt;- data.frame(
    shape                = rep(2,    N),
    betaEvent_intercept  = rep(-11.9,N),
    betaEvent_binary     = rep(0.6,  N),
    betaEvent_continuous = rep(0.08, N),
    betaEvent_assoc      = rep(0.03, N),
    betaLong_binary      = rep(-1.5, N),
    betaLong_continuous  = rep(1,    N),
    betaLong_intercept   = rep(90,   N),
    betaLong_slope       = rep(2.5,  N)
  )

  # Individual-specific (random effect) parameters
  b_corrmat &lt;- matrix(c(1, 0.5, 0.5, 1), 2, 2)
  b_sds     &lt;- c(20, 3)
  b_means   &lt;- rep(0, 2)
  b_z       &lt;- MASS::mvrnorm(n = N, mu = b_means, Sigma = b_corrmat)
  b         &lt;- sapply(1:length(b_sds), function(x) b_sds[x] * b_z[,x])
  betas$betaLong_intercept &lt;- betas$betaLong_intercept + b[,1]
  betas$betaLong_slope     &lt;- betas$betaLong_slope     + b[,2]

  # Covariate data
  covdat &lt;- data.frame(
    Z1 = stats::rbinom(N, 1, 0.45), # a binary covariate
    Z2 = stats::rnorm(N, 44, 8.5)   # a continuous covariate
  )

  # Then we simulate the survival times based on the
  # hazard function, covariates, and true parameter values
  times &lt;- simsurv(hazard = haz, x = covdat, betas = betas, maxt = 10)
  head(times)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
