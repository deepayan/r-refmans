<!DOCTYPE html><html lang="en"><head><title>Help for package eSDM</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {eSDM}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#eSDM-package'><p>Ensemble tool for predictions from Species Distribution Models</p></a></li>
<li><a href='#ensemble_create'><p>Create ensemble of SDM predictions</p></a></li>
<li><a href='#ensemble_rescale'><p>Rescale SDM predictions</p></a></li>
<li><a href='#eSDM_GUI'><p>Open the eSDM GUI</p></a></li>
<li><a href='#evaluation_metrics'><p>Calculate SDM evaluation metrics</p></a></li>
<li><a href='#gshhg.l.L16'><p>Low resolution GSHHG world map</p></a></li>
<li><a href='#model_abundance'><p>Calculate predicted abundance</p></a></li>
<li><a href='#overlay_sdm'><p>Overlay SDM predictions onto base geometry</p></a></li>
<li><a href='#preds'><p>Sample SDM density predictions</p></a></li>
<li><a href='#pts2poly_centroids'><p>Create polygons from centroid coordinates</p></a></li>
<li><a href='#pts2poly_vertices'><p>Create polygons from vertex coordinates</p></a></li>
<li><a href='#validation.data'><p>Sample validation data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Ensemble Tool for Predictions from Species Distribution Models</td>
</tr>
<tr>
<td>Description:</td>
<td>A tool which allows users to create and evaluate ensembles 
    of species distribution model (SDM) predictions. 
    Functionality is offered through R functions or a GUI (R Shiny app). 
    This tool can assist users in identifying spatial uncertainties and 
    making informed conservation and management decisions. The package is 
    further described in Woodman et al (2019) &lt;<a href="https://doi.org/10.1111%2F2041-210X.13283">doi:10.1111/2041-210X.13283</a>&gt;.</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.4</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/swfsc/eSDM/">https://github.com/swfsc/eSDM/</a>, <a href="https://swfsc.github.io/eSDM/">https://swfsc.github.io/eSDM/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/swfsc/eSDM/issues/">https://github.com/swfsc/eSDM/issues/</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr (&ge; 1.1), magrittr, methods, purrr, rlang, ROCR, sf (&ge;
1.0), shiny, stats, units</td>
</tr>
<tr>
<td>Suggests:</td>
<td>colorRamps, colourpicker, dichromat, DT, knitr, leafem,
leaflet, maps, raster, RColorBrewer, rmarkdown, shinybusy,
shinydashboard, shinyjs, testthat (&ge; 2.1.0), tmap (&ge; 2.3),
viridis, zip</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (== 2)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-10-07 22:01:26 UTC; sam.woodman</td>
</tr>
<tr>
<td>Author:</td>
<td>Sam Woodman <a href="https://orcid.org/0000-0001-6071-8186"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Sam Woodman &lt;sam.woodman@noaa.gov&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-10-07 22:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='eSDM-package'>Ensemble tool for predictions from Species Distribution Models</h2><span id='topic+eSDM-package'></span><span id='topic+eSDM'></span>

<h3>Description</h3>

<p>eSDM: A tool for creating and exploring ensembles of predictions from Species
Distribution Models
</p>


<h3>Details</h3>

<p>eSDM provides functionality for overlaying SDM predictions onto a single base
geometry and creating and evaluating ensemble predictions. This can be done
manually in R, or using the eSDM GUI (an R Shiny app) opened through
<a href="#topic+eSDM_GUI">eSDM_GUI</a>
</p>
<p>eSDM allows users to overlay SDM predictions onto a single base
geometry, create ensembles of these predictions via weighted or unweighted
averages, calculate performance metrics for each set of predictions and for
resulting ensembles, and visually compare ensemble predictions with
original predictions. The information provided by this tool can assist
users in understanding spatial uncertainties and making informed
conservation decisions.
</p>
<p>The GUI ensures that the tool is accessible to non-R users, while also
providing a user-friendly environment for functionality such as loading
other polygons to use and visualizing predictions. However, user choices
are restricted to the workflow provided by the GUI.
</p>


<h3>Author(s)</h3>

<p>Sam Woodman <a href="mailto:sam.woodman@noaa.gov">sam.woodman@noaa.gov</a>
</p>


<h3>See Also</h3>

<p><a href="https://swfsc.github.io/eSDM/">https://swfsc.github.io/eSDM/</a>
</p>

<hr>
<h2 id='ensemble_create'>Create ensemble of SDM predictions</h2><span id='topic+ensemble_create'></span><span id='topic+ensemble_create.sf'></span><span id='topic+ensemble_create.data.frame'></span>

<h3>Description</h3>

<p>Create a weighted or unweighted ensemble of SDM predictions, including associated uncertainty values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ensemble_create(x, x.idx, w = NULL, x.var.idx = NULL, ...)

## S3 method for class 'sf'
ensemble_create(x, x.idx, w = NULL, x.var.idx = NULL, ...)

## S3 method for class 'data.frame'
ensemble_create(x, x.idx, w = NULL, x.var.idx = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ensemble_create_+3A_x">x</code></td>
<td>
<p>object of class <code>sf</code> or class <code>data.frame</code></p>
</td></tr>
<tr><td><code id="ensemble_create_+3A_x.idx">x.idx</code></td>
<td>
<p>vector of column names or numerical indices;
indicates which columns in <code>x</code> will be used to create the ensemble</p>
</td></tr>
<tr><td><code id="ensemble_create_+3A_w">w</code></td>
<td>
<p>weights for the ensemble; either a numeric vector the same length as <code>x</code> or
a data frame (or tibble) with the same number of rows as <code>x</code> and <code>ncol(w) == length(x.idx)</code>.
If w is a numeric vector, its values (i.e. the weights) must sum to 1.
The default value is <code>1 / length(x.idx)</code>, i.e. an unweighted ensemble</p>
</td></tr>
<tr><td><code id="ensemble_create_+3A_x.var.idx">x.var.idx</code></td>
<td>
<p>vector of column names or column indices;
indicates columns in <code>x</code> with variance values with which to
calculate uncertainty values for the ensemble.
If <code>x.var.idx</code> is specified, it must be the same length as <code>x.idx</code>.
Use <code>x.var.idx = NULL</code> (the default) if none of the predictions have associated uncertainty values;
in this case the uncertainty values for the ensemble will be calculated using the among-model uncertainty.
See the 'Details' section for more information</p>
</td></tr>
<tr><td><code id="ensemble_create_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to methods; specifically designed for passing
<code>na.rm</code> argument to <code>sum</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>ensemble_create</code> is designed to be used after overlaying predictions with <code><a href="#topic+overlay_sdm">overlay_sdm</a></code> and
(if desired) rescaling the overlaid predictions with <code><a href="#topic+ensemble_rescale">ensemble_rescale</a></code>.
</p>
<p>This function implements ensemble methods provided in <a href="#topic+eSDM_GUI">eSDM_GUI</a>.
Note that it does not implement regional exclusion, which must be done manually if not using the GUI.
</p>
<p>Ensemble uncertainty is calculated using either the within-model uncertainty (if <code>x.var.idx</code> is specified) or
the among-model uncertainty (if <code>x.var.idx</code> is <code>NULL</code>).
See the eSDM GUI manual for applicable formulas.
</p>


<h3>Value</h3>

<p>An object of the same class as <code>x</code> with two columns appended to the data frame:
</p>

<ul>
<li><p> 'Pred_ens' - The ensemble predictions
</p>
</li>
<li><p> 'Var_ens' - The variance of the ensemble predictions,
calculated using either the within-model uncertainty (if <code>x.var.idx</code> is specified) or
the among-model uncertainty (if <code>x.var.idx</code> is <code>NULL</code>)
</p>
</li></ul>

<p>Note that all other columns of <code>x</code> will be included in the returned object.
Also, if <code>x</code> is of class <code>sf</code> then
1) the geometry list-column will be the last column of the returned object and
2) the <code>agr</code> attribute will be set as 'constant' for 'Pred_ens' and 'Var_ens'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ensemble_create(preds.1, c("Density", "Density2"), c(0.2, 0.8))
ensemble_create(preds.1, 1:2, c(0.2, 0.8), c("Var1", "Var2"))
ensemble_create(data.frame(a = 1:5, b = 3:7), c(1, 2))

weights.df &lt;- data.frame(runif(325), c(rep(NA, 100), runif(225)))
ensemble_create(preds.1, c("Density", "Density2"), weights.df, na.rm = TRUE)

</code></pre>

<hr>
<h2 id='ensemble_rescale'>Rescale SDM predictions</h2><span id='topic+ensemble_rescale'></span>

<h3>Description</h3>

<p>Rescale SDM predictions and (if applicable) associated uncertainties
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ensemble_rescale(x, x.idx, y, y.abund = NULL, x.var.idx = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ensemble_rescale_+3A_x">x</code></td>
<td>
<p>object of class <code>sf</code></p>
</td></tr>
<tr><td><code id="ensemble_rescale_+3A_x.idx">x.idx</code></td>
<td>
<p>vector of column names or column indices;
indicates columns in <code>x</code> with prediction values that will be rescaled</p>
</td></tr>
<tr><td><code id="ensemble_rescale_+3A_y">y</code></td>
<td>
<p>rescaling method; must be either &quot;abundance&quot; or &quot;sumto1&quot;.
See 'Details' section for descriptions of the rescaling methods</p>
</td></tr>
<tr><td><code id="ensemble_rescale_+3A_y.abund">y.abund</code></td>
<td>
<p>numeric value; ignored if <code>y</code> is not <code>"abundance"</code></p>
</td></tr>
<tr><td><code id="ensemble_rescale_+3A_x.var.idx">x.var.idx</code></td>
<td>
<p>vector of column names or column indices;
indicates columns in <code>x</code> with variance values that will be rescaled.
If <code>x.var.idx</code> is specified, it must be the same length as <code>x.idx</code>.
Use <code>x.var.idx = NULL</code> (the default) if none of the predictions have associated uncertainty values;
see the 'Details' section for more information</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>ensemble_rescale</code> is intended to be used after overlaying predictions with
<code><a href="#topic+overlay_sdm">overlay_sdm</a></code> and before creating ensembles with <code><a href="#topic+ensemble_create">ensemble_create</a></code>.
The provided rescaling methods are:
</p>

<ul>
<li><p>'abundance' - Rescale the density values so that the predicted abundance is <code>y.abund</code>
</p>
</li>
<li><p>'sumto1' - Rescale the density values so their sum is 1
</p>
</li></ul>

<p>SDM uncertainty values must be rescaled differently than the prediction values.
Columns specified in <code>x.var.idx</code> must contain variance values.
These values will be rescaled using the formula <code>var(c * x) = c^2 * var(x)</code>,
where <code>c</code> is the rescaling factor for the associated predictions.
</p>
<p>If <code>x.var.idx</code> is not <code>NULL</code>, then the function assumes
<code>x.var.idx[1]</code> contains the variance values associated with the predictions in <code>x.idx[1]</code>,
<code>x.var.idx[2]</code> contains the variance values associated with the predictions in <code>x.idx[2]</code>, etc.
Use <code>NA</code> in <code>x.var.idx</code> to indicate a set of predictions that does not have
associated uncertainty values (e.g., <code>x.var.idx = c(4, NA, 5)</code>)
</p>


<h3>Value</h3>

<p>The <code>sf</code> object <code>x</code> with the columns specified by <code>x.idx</code> and <code>x.var.idx</code> rescaled.
The <code>agr</code> attributes of <code>x</code> will be conserved
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ensemble_rescale(preds.1, c("Density", "Density2"), "abundance", 50)
ensemble_rescale(preds.1, c(1, 2), "sumto1")

ensemble_rescale(
  preds.1, c("Density", "Density2"), "abundance", 100, c(3,4)
)


</code></pre>

<hr>
<h2 id='eSDM_GUI'>Open the eSDM GUI</h2><span id='topic+eSDM_GUI'></span>

<h3>Description</h3>

<p>Open the eSDM graphical user interface (GUI);
an R Shiny app for creating ensemble predictions using SDM predictions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eSDM_GUI(launch.browser = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="eSDM_GUI_+3A_launch.browser">launch.browser</code></td>
<td>
<p>Logical with default of <code>TRUE</code>; passed to <code>launch.browser</code>
argument of <code><a href="shiny.html#topic+runApp">runApp</a></code></p>
</td></tr>
</table>

<hr>
<h2 id='evaluation_metrics'>Calculate SDM evaluation metrics</h2><span id='topic+evaluation_metrics'></span>

<h3>Description</h3>

<p>Calculate AUC, TSS, and RMSE for given density predictions and validation data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>evaluation_metrics(x, x.idx, y, y.idx, count.flag = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="evaluation_metrics_+3A_x">x</code></td>
<td>
<p>object of class sf; SDM predictions</p>
</td></tr>
<tr><td><code id="evaluation_metrics_+3A_x.idx">x.idx</code></td>
<td>
<p>name or index of column in <code>x</code> with prediction values</p>
</td></tr>
<tr><td><code id="evaluation_metrics_+3A_y">y</code></td>
<td>
<p>object of class sf; validation data</p>
</td></tr>
<tr><td><code id="evaluation_metrics_+3A_y.idx">y.idx</code></td>
<td>
<p>name or index of column in <code>y</code> with validation data.
This validation data column must have at least two unique values, e.g. 0 and 1</p>
</td></tr>
<tr><td><code id="evaluation_metrics_+3A_count.flag">count.flag</code></td>
<td>
<p>logical; <code>TRUE</code> indicates that the data in column <code>y.idx</code> is count data,
while <code>FALSE</code> indicates that the data is presence/absence.
See details for differences in data processing based on this flag.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>count.flag == TRUE</code>, then <code>eSDM::model_abundance(x, x.idx, FALSE)</code> will be run
to calculate predicted abundance and thus calculate RMSE.
Note that this assumes the data in column <code>x.idx</code> of <code>x</code> are density values.
</p>
<p>If <code>count.flag == FALSE</code>, then all of the values in column <code>y.idx</code> of <code>y</code> must be <code>0</code> or <code>1</code>.
</p>
<p>All rows of <code>x</code> with a value of <code>NA</code> in column <code>x.idx</code> and
all rows of <code>y</code> with a value of <code>NA</code> in column <code>y.idx</code> are removed before calculating metrics
</p>


<h3>Value</h3>

<p>A numeric vector with AUC, TSS and RMSE values, respectively.
If <code>count.flag == FALSE</code>, the RMSE value will be <code>NA</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>evaluation_metrics(preds.1, 2, validation.data, "sight")

evaluation_metrics(preds.1, "Density2", validation.data, "count", TRUE)

</code></pre>

<hr>
<h2 id='gshhg.l.L16'>Low resolution GSHHG world map</h2><span id='topic+gshhg.l.L16'></span>

<h3>Description</h3>

<p>Low resolution GSHHG world map, includes hierarchical levels
L1 and L6. Processed using <code><a href="sf.html#topic+valid">st_make_valid</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gshhg.l.L16
</code></pre>


<h3>Format</h3>

<p>An object of class <code><a href="sf.html#topic+sfc">sfc</a></code>
</p>


<h3>Source</h3>

<p><a href="http://www.soest.hawaii.edu/pwessel/gshhg/">http://www.soest.hawaii.edu/pwessel/gshhg/</a>
</p>

<hr>
<h2 id='model_abundance'>Calculate predicted abundance</h2><span id='topic+model_abundance'></span>

<h3>Description</h3>

<p>Calculates the predicted abundance by multiplying the density prediction values by prediction polygon areas
</p>


<h3>Usage</h3>

<pre><code class='language-R'>model_abundance(x, dens.idx, sum.abund = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="model_abundance_+3A_x">x</code></td>
<td>
<p>object of class <code>sf</code>; SDM with density predictions.
Must have a valid crs code</p>
</td></tr>
<tr><td><code id="model_abundance_+3A_dens.idx">dens.idx</code></td>
<td>
<p>name or index of column(s) in <code>x</code> with density predictions.
Can be a character vector (column names) or numeric vector (column indices)</p>
</td></tr>
<tr><td><code id="model_abundance_+3A_sum.abund">sum.abund</code></td>
<td>
<p>logical; whether or not to sum all of the predicted abundances</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Multiplies the values in the specified column(s) (i.e. the density predictions)
by the area in square kilometers of their corresponding prediction polygon.
The area of each prediction polygon is calculated using <code>st_area</code> from <code><a href="sf.html#topic+geos_measures">geos_measures</a></code>.
x must have a valid crs code to calculate area for these abundance calculations.
</p>


<h3>Value</h3>

<p>If <code>sum.abund == TRUE</code>, then a vector of the same length as <code>dens.idx</code>
representing the predicted abundance for the density values in each column.
</p>
<p>If <code>sum.abund == FALSE</code> and the length of <code>dens.idx</code> is 1,
then a numeric vector with the predicted abundance of each prediction polygon of <code>x</code>.
</p>
<p>If <code>sum.abund == FALSE</code> and the length of <code>dens.idx</code> is greater than 1,
then a data frame with <code>length(dens.idx)</code> columns of the predicted abundance of prediction polygons
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model_abundance(preds.1, "Density")
model_abundance(preds.1, c(1, 1))
model_abundance(preds.1, c(1, 1), FALSE)

</code></pre>

<hr>
<h2 id='overlay_sdm'>Overlay SDM predictions onto base geometry</h2><span id='topic+overlay_sdm'></span>

<h3>Description</h3>

<p>Overlay specified SDM predictions that meet the percent overlap threshold requirement onto base geometry
</p>


<h3>Usage</h3>

<pre><code class='language-R'>overlay_sdm(base.geom, sdm, sdm.idx, overlap.perc)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="overlay_sdm_+3A_base.geom">base.geom</code></td>
<td>
<p>object of class <code>sfc</code>; base geometry</p>
</td></tr>
<tr><td><code id="overlay_sdm_+3A_sdm">sdm</code></td>
<td>
<p>object of class <code>sf</code>; original SDM predictions</p>
</td></tr>
<tr><td><code id="overlay_sdm_+3A_sdm.idx">sdm.idx</code></td>
<td>
<p>names or indices of column(s) with data to be overlaid</p>
</td></tr>
<tr><td><code id="overlay_sdm_+3A_overlap.perc">overlap.perc</code></td>
<td>
<p>numeric; percent overlap threshold,
i.e. percentage of each base geometry polygon must overlap with SDM
prediction polygons for overlaid density value to be calculated and
not set as NA</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See the eSDM GUI manual for specifics about the overlay process.
This process is equivalent to areal interpolation (Goodchild and Lam 1980),
where <code>base.geom</code> is the target, <code>sdm</code> is the source, and the data
specified by <code>sdm.idx</code> are spatially intensive.
</p>
<p>Note that <code>overlay_sdm</code> removes rows in <code>sdm</code> that have NA values
in the first column specified in <code>sdm.idx</code> (i.e. <code>sdm.idx[1]</code>),
before the overlay.
Thus, for valid overlay results, all columns of <code>sdm</code> specified in
<code>sdm.idx</code> must either have NA values in the same rows
or contain only NAs.
</p>


<h3>Value</h3>

<p>Object of class <code>sf</code> with the geometry of <code>base.geom</code> and
the data in the <code>sdm.idx</code> columns of <code>sdm</code> overlaid onto that
geometry. Note that this means all columns of <code>sdm</code> not in
<code>sdm.idx</code> will not be in the returned object.
Because the data are considered spatially intensive, the <code>agr</code>
attribute will be set as 'constant' for all columns in the returned object.
</p>
<p>Additionally, the output will match the class of <code>sdm</code>, with regards
to the classes tbl_df, tbl, and data.frame. This means that, in addition to
being an <code>sf</code> object, if <code>sdm</code> is a tibble then the output will
also be a tibble, while if <code>sdm</code> is just a data frame then the output
will not be a tibble.
</p>


<h3>References</h3>

<p>Goodchild, M.F. &amp; Lam, N.S.-N. (1980) Areal interpolation:
a variant of the traditional spatial problem. Geo-Processing, 1, 297-312.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pol1.geom &lt;- sf::st_sfc(
  sf::st_polygon(list(rbind(c(1,1), c(3,1), c(3,3), c(1,3), c(1,1)))),
  crs = sf::st_crs(4326)
)
pol2.geom &lt;- sf::st_sfc(
  sf::st_polygon(list(rbind(c(0,0), c(2,0), c(2,2), c(0,2), c(0,0)))),
  crs = sf::st_crs(4326)
)
pol2.sf &lt;- sf::st_sf(data.frame(Dens = 0.5), geometry = pol2.geom,
                     crs = sf::st_crs(4326))

overlay_sdm(pol1.geom, pol2.sf, 1, 25)

# Output 'Dens' value is NA because of higher overlap.perc value
overlay_sdm(pol1.geom, pol2.sf, 1, 50)


# These examples take longer to run
overlay_sdm(sf::st_geometry(preds.1), preds.2, 1, 50)
overlay_sdm(sf::st_geometry(preds.2), preds.1, "Density", 50)

</code></pre>

<hr>
<h2 id='preds'>Sample SDM density predictions</h2><span id='topic+preds'></span><span id='topic+preds.1'></span><span id='topic+preds.2'></span><span id='topic+preds.3'></span>

<h3>Description</h3>

<p><code>preds.1</code>, <code>preds.2</code>, and <code>preds.3</code> are objects of class <code><a href="sf.html#topic+sf">sf</a></code> that serve as
sample sets of SDM density predictions for the <code>eSDM</code> package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>preds.1

preds.2

preds.3
</code></pre>


<h3>Format</h3>

<p>Objects of class <code>sf</code> with a column of density predictions (name: <code>Density</code>) and
a simple feature list column (name: <code>geometry</code>).
<code>preds.1</code> also has a second column of sample density predictions (name: <code>Density2</code>),
as well as <code>Var1</code> and <code>Var2</code>, representing the variance
</p>
<p><code>preds1</code>: An object of class sf (inherits from data.frame) with 325 rows and 5 columns.
</p>
<p><code>preds2</code>: An object of class sf (inherits from data.frame) with 1891 rows and 2 columns.
</p>
<p><code>preds3</code>: An object of class sf (inherits from data.frame) with 1445 rows and 2 columns.
</p>
<p>An object of class <code>sf</code> (inherits from <code>data.frame</code>) with 1891 rows and 2 columns.
</p>
<p>An object of class <code>sf</code> (inherits from <code>data.frame</code>) with 1445 rows and 2 columns.
</p>


<h3>Details</h3>

<p><code>preds.1</code> sample SDM density predictions created by importing
Sample_predictions_2.csv into the eSDM GUI, exporting predictions, and then
clipping them to the SoCal_bite.csv region.
Also manually added two variance columns (numbers are randomly generated with a max of 0.01)
</p>
<p><code>preds.2</code> sample SDM density predictions created by importing
Sample_predictions_1.csv into the eSDM GUI, exporting predictions, and then
clipping them to the SoCal_bite.csv region
</p>
<p><code>preds.3</code> is a set of sample SDM density predictions created by importing
Sample_predictions_4_gdb into the eSDM GUI, exporting predictions, and then
clipping them to the SoCal_bite.csv region
</p>

<hr>
<h2 id='pts2poly_centroids'>Create polygons from centroid coordinates</h2><span id='topic+pts2poly_centroids'></span>

<h3>Description</h3>

<p>Create polygon(s) from a data frame with coordinates of the polygon centroid(s)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pts2poly_centroids(x, y, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pts2poly_centroids_+3A_x">x</code></td>
<td>
<p>data frame with at least two columns;
the first two columns must contain longitude and latitude coordinates, respectively.
See 'Details' section for how additional columns are handled</p>
</td></tr>
<tr><td><code id="pts2poly_centroids_+3A_y">y</code></td>
<td>
<p>numeric; the perpendicular distance from the polygon centroid (center) to its edge
(i.e. half the length of one side of a polygon)</p>
</td></tr>
<tr><td><code id="pts2poly_centroids_+3A_...">...</code></td>
<td>
<p>passed to <a href="sf.html#topic+sf">st_sf</a> or to <a href="sf.html#topic+sfc">st_sfc</a>,
e.g. for passing named arguments <code>crs</code> and <code>agr</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function was designed for someone who reads in a .csv file
with a grid of coordinates representing SDM prediction points and needs to create
prediction polygons with the .csv file coordinates as the polygon centroids.
However, the function can be used to create square polygons of any size around the provided points,
regardless of if those polygons touch or overlap.
The created polygons are oriented so that, in a 2D plane, their edges are parallel to either the x or the y axis.
</p>
<p>If <code>x</code> contains more than two column, then additional columns will be treated as simple feature attributes,
i.e. passed along as the first argument to <a href="sf.html#topic+sf">st_sf</a>
</p>
<p>If a <code>crs</code> is not specified in <code>...</code>,
then the <code>crs</code> attribute of the polygon(s) will be <code>NULL</code>.
</p>


<h3>Value</h3>

<p>Object of class <code>sfc</code> (if <code>x</code> has exactly two columns) or class <code>sf</code>
(if <code>x</code> has exactly more than two columns). The object will have a geometry type of <code>POLYGON</code>.
If the object is of class <code>sf</code>, the name of the geometry list-column will be &quot;geometry&quot;
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create an sfc object from a data frame of two columns
x &lt;- data.frame(
  lon = c(5, 10, 15, 20, 5, 10, 15, 20),
  lat = c(5, 5, 5, 5, 10, 10, 10, 10)
)
pts2poly_centroids(x, 2.5, crs = 4326)

# Create an sf object from a data frame of more than two columns
x &lt;- data.frame(
  lon = c(5, 10, 15, 20, 5, 10, 15, 20),
  lat = c(5, 5, 5, 5, 10, 10, 10, 10),
  sdm.pred = runif(8),
  sdm.pred2 = runif(8)
)
pts2poly_centroids(x, 2.5, crs = 4326, agr = "constant")

</code></pre>

<hr>
<h2 id='pts2poly_vertices'>Create polygons from vertex coordinates</h2><span id='topic+pts2poly_vertices'></span>

<h3>Description</h3>

<p>Create polygon(s) from a data frame with the coordinates of the polygon vertices
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pts2poly_vertices(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pts2poly_vertices_+3A_x">x</code></td>
<td>
<p>data frame with at least two columns;
the first two columns must contain longitude and latitude coordinates, respectively.
See 'Details' section for how additional columns are handled</p>
</td></tr>
<tr><td><code id="pts2poly_vertices_+3A_...">...</code></td>
<td>
<p>passed to <a href="sf.html#topic+sfc">st_sfc</a>,
e.g. for passing named argument <code>crs</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Vertices of different polygons must be demarcated by rows with values of <code>NA</code>
in both the first and second columns (i.e. the longitude and latitude columns).
</p>
<p>All columns in <code>x</code> besides the first two columns are ignored.
</p>
<p>If a <code>crs</code> is not specified in <code>...</code>,
then the <code>crs</code> attribute of the polygon(s) will be <code>NULL</code>.
</p>


<h3>Value</h3>

<p>Object of class <code>sfc</code> with the geometry type <code>POLYGON</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- data.frame(
  lon = c(40, 40, 50, 50, 40),
  lat = c(0, 10, 10, 0, 0)
)
pts2poly_vertices(x, crs = 4326)

# Create an sf object
x &lt;- data.frame(
  lon = c(40, 40, 50, 50, 40, NA, 20, 20, 30, 30, 20),
  lat = c(0, 10, 10, 0, 0, NA, 0, 10, 10, 0, 0)
)
sf::st_sf(Pred = 1:2, geometry = pts2poly_vertices(x, crs = 4326))

</code></pre>

<hr>
<h2 id='validation.data'>Sample validation data</h2><span id='topic+validation.data'></span>

<h3>Description</h3>

<p>Sample validation data created by cropping Validation_data.csv to the SoCal_bite.csv region
(.csv files from ...)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validation.data
</code></pre>


<h3>Format</h3>

<p>An object of class <code><a href="sf.html#topic+sf">sf</a></code> with 8 rows and 3 variables
</p>

<dl>
<dt>sight</dt><dd><p>1's and 0's indicating species presence/absence</p>
</dd>
<dt>count</dt><dd><p>number of individuals observed at each point</p>
</dd>
<dt>geometry</dt><dd><p>simple feature list column representing validation data points</p>
</dd>
</dl>


</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
