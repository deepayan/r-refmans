<!DOCTYPE html><html><head><title>Help for package exams2sakai</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {exams2sakai}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#exams2sakai'><p>Generation of Exams in IMS QTI Sakai Format</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Automatic Generation of Exams in R for 'Sakai'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Automatic Generation of Exams in R for 'Sakai'.
  Question templates in the form of the 'exams' package (see <a href="http://www.r-exams.org/">http://www.r-exams.org/</a>)
  are transformed into XML format required by 'Sakai'.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4.0), exams (&ge; 2.3-6)</td>
</tr>
<tr>
<td>Imports:</td>
<td>glue (&ge; 1.4.0), stringr (&ge; 1.4.0), stringi (&ge; 1.4.6), xml2
(&ge; 1.2.5)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/jesusmmp/exams2sakai">https://github.com/jesusmmp/exams2sakai</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jesusmmp/exams2sakai/issues">https://github.com/jesusmmp/exams2sakai/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-04-22 08:46:16 UTC; jesusmmp</td>
</tr>
<tr>
<td>Author:</td>
<td>Fuensanta Arnaldos García [aut],
  María Victoria Caballero Pintado [aut],
  Úrsula Faura Martínez [aut],
  María Teresa Díaz Delfa [aut],
  Jesús María Méndez Pérez [aut, cre],
  Lourdes Molera Peris [aut],
  José Antonio Palazón Ferrando [aut],
  Juan José Pérez Castejón [aut],
  Isabel Parra Frutos [aut],
  Raúl Sánchez Sánchez [aut],
  Nicolás Andrés Ubero Pascal [aut],
  Nikolaus Umlauf [ctb],
  Achim Zeileis <a href="https://orcid.org/0000-0003-0918-3766"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jesús María Méndez Pérez &lt;jesus.mendez@ticarum.es&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-04-22 09:10:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='exams2sakai'>Generation of Exams in IMS QTI Sakai Format</h2><span id='topic+exams2sakai'></span><span id='topic+make_itembody_sakai'></span>

<h3>Description</h3>

<p>Automatic generation of exams in IMS QTI Sakai format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  exams2sakai(file, n = 1L, nsamp = NULL, dir = ".",
    name = NULL, quiet = TRUE, edir = NULL,
    tdir = NULL, sdir = NULL, verbose = FALSE,
    resolution = 100, width = 4, height = 4, svg = FALSE, encoding = "",
    num = NULL, mchoice = NULL,
    schoice = mchoice, string = NULL, cloze = NULL,
    template = "qtisakai", duration = NULL,
    stitle = "Exercise", ititle = "Question",
    adescription = "Please solve the following exercises.",
    sdescription = "Please answer the following question.",
    maxattempts = 1, cutvalue = 0, solutionswitch = TRUE,
    zip = TRUE, points = NULL,
    eval = list(partial = TRUE, negative = FALSE),
    converter = "pandoc-mathjax", xmlcollapse = FALSE, ...)

  make_itembody_sakai(rtiming = FALSE, shuffle = FALSE,
    rshuffle = shuffle, minnumber = NULL, maxnumber = NULL,
    defaultval = NULL, minvalue = NULL, maxvalue = NULL,
    cutvalue = NULL, enumerate = TRUE, digits = NULL,
    tolerance = is.null(digits), maxchars = 12,
    eval = list(partial = TRUE, negative = FALSE),
    fix_num = TRUE)

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams2sakai_+3A_file">file</code></td>
<td>
<p>character. A specification of a (list of) exercise files.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_n">n</code></td>
<td>
<p>integer. The number of copies to be compiled from <code>file</code>.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_nsamp">nsamp</code></td>
<td>
<p>integer. The number(s) of exercise files sampled from each
list element of <code>file</code>. Sampling without replacement is used
if possible. (Only if some element of <code>nsamp</code> is larger than
the length of the corresponding element in <code>file</code>, sampling
with replacement is used.)</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_dir">dir</code></td>
<td>
<p>character. The default is the current working directory.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_name">name</code></td>
<td>
<p>character. A name prefix for resulting exercises and ZIP file.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_quiet">quiet</code></td>
<td>
<p>logical. Should output be suppressed when calling
<code><a href="exams.html#topic+xweave">xweave</a></code>?</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_edir">edir</code></td>
<td>
<p>character specifying the path of the directory (along with its
sub-directories) in which the files in <code>file</code> are stored
(see also <code>xexams</code>).</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_tdir">tdir</code></td>
<td>
<p>character specifying a temporary directory, by default
this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>. Note that this
is cleaned up and potentially temporary files are deleted.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_sdir">sdir</code></td>
<td>
<p>character specifying a directory for storing supplements, by
default this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_verbose">verbose</code></td>
<td>
<p>logical. Should information on progress of exam generation
be reported?</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_resolution">resolution</code>, <code id="exams2sakai_+3A_width">width</code>, <code id="exams2sakai_+3A_height">height</code></td>
<td>
<p>numeric. Options for rendering PNG (or SVG)
graphics passed to <code><a href="exams.html#topic+xweave">xweave</a></code>.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_svg">svg</code></td>
<td>
<p>logical. Should graphics be rendered in SVG or PNG (default)?</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_encoding">encoding</code></td>
<td>
<p>character, passed to <code><a href="exams.html#topic+xweave">xweave</a></code>.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_num">num</code></td>
<td>
<p>function or named list applied to numerical (i.e., type <code>num</code>)
questions. If <code>num</code> is a function, <code>num</code> will be used
for generating the item body of the question, see function <code>make_itembody_sakai()</code>.
If <code>num</code> is a named list, these arguments will be passed to function
<code>make_itembody_sakai()</code> (or <code>make_itembody_qti21()</code> using <code>exams2qti21()</code>).</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_mchoice">mchoice</code>, <code id="exams2sakai_+3A_schoice">schoice</code>, <code id="exams2sakai_+3A_string">string</code>, <code id="exams2sakai_+3A_cloze">cloze</code></td>
<td>
<p>function or named list applied to multiple choice,
single choice, string, and cloze questions (i.e., type <code>mchoice</code>, <code>schoice</code>,
<code>string</code>, and <code>cloze</code>), respectively. See argument <code>num</code> for more details.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_template">template</code></td>
<td>
<p>character. The Sakai template that should be used. Currently,
the package provide <code>"sakaiqti.xml"</code>.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_duration">duration</code></td>
<td>
<p>integer. Set the duration of the exam in minutes.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_stitle">stitle</code></td>
<td>
<p>character. A title that should be used for the sections. May be a vector of
length 1 to use the same title for each section, or a vector containing different section
titles.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_ititle">ititle</code></td>
<td>
<p>character. A title that should be used for the assessment items. May be a vector
of length 1 to use the same title for each item, or a vector containing different item
titles. Note that the maximum of different item titles is the number of sections/questions
that are used for the exam.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_adescription">adescription</code></td>
<td>
<p>character. Description (of length 1) for the overall assessment (i.e., exam).</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_sdescription">sdescription</code></td>
<td>
<p>character. Vector of descriptions for each section.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_maxattempts">maxattempts</code></td>
<td>
<p>integer. The maximum attempts for one question, may also be set to
<code>Inf</code>.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_cutvalue">cutvalue</code></td>
<td>
<p>numeric. The cutvalue at which the exam is passed.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_solutionswitch">solutionswitch</code></td>
<td>
<p>logical. Should the question/item solutionswitch be enabled?
In OLAT this means that the correct solution is shown after an incorrect solution
was entered by an examinee (i.e., this is typically only useful if <code>maxattempts = 1</code>).</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_zip">zip</code></td>
<td>
<p>logical. Should the resulting XML file (plus supplements) be zipped?</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_points">points</code></td>
<td>
<p>integer. How many points should be assigned to each exercise? Note that this
argument overules any exercise points that are provided within an <code>"\expoints{}"</code> tag
in the <code>.Rnw</code> file. The vector of points supplied is expanded to the number of exercises in
the exam.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_eval">eval</code></td>
<td>
<p>named list, specifies the settings for the evaluation policy, see function
<code>exams_eval</code>.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_rtiming">rtiming</code>, <code id="exams2sakai_+3A_shuffle">shuffle</code>, <code id="exams2sakai_+3A_rshuffle">rshuffle</code>, <code id="exams2sakai_+3A_minnumber">minnumber</code>, <code id="exams2sakai_+3A_maxnumber">maxnumber</code>, <code id="exams2sakai_+3A_defaultval">defaultval</code>, <code id="exams2sakai_+3A_minvalue">minvalue</code>, <code id="exams2sakai_+3A_maxvalue">maxvalue</code></td>
<td>
<p>arguments used for IMS QTI 1.2 item construction, for details see the XML
specification (see IMS Global Learning Consortium, Inc. 2012), especially Section 4.
Genereting IMS QTI 2.1 items using <code>exams2qti21()</code> the arguments have similar meaning.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_enumerate">enumerate</code></td>
<td>
<p>logical. Insert potential solutions in enumerated list?</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_digits">digits</code></td>
<td>
<p>integer. How many digits should be used for <code>num</code> exercises?</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_tolerance">tolerance</code></td>
<td>
<p>logical. Should tolerance intervals be used for checking if the supplied
<code>num</code> answer/number is correct? The default is to use tolerance intervals if <code>digits = NULL</code>.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_maxchars">maxchars</code></td>
<td>
<p>numeric. Lower bound for the number of characters in fill-in-blank
fields. The actual number of characters is selected as the maximum number of
characters of this value and the actual solution.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_fix_num">fix_num</code></td>
<td>
<p>logical. This is a special flag to enable/force the display of the
correct solutions for numeric exercises/answers as well as to obtain results when archiving tests.
Note that this is a workaround, which works e.g. within OLAT.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_converter">converter</code></td>
<td>
<p>character. Argument passed on to <code>make_exercise_transform_html</code>.
The default for <code>converter</code> is set to <code>"pandoc-mathjax"</code></p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_xmlcollapse">xmlcollapse</code></td>
<td>
<p>logical or character. Should line breaks be collapsed in the XML
code. If <code>TRUE</code> everything is collapsed with spaces (<code>" "</code>) but other collapse
characters could be supplied.</p>
</td></tr>
<tr><td><code id="exams2sakai_+3A_...">...</code></td>
<td>
<p>further arguments passed on to <code>make_exercise_transform_html</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Question &amp; Test Interoperability (QTI) is an international XML standard for specifying
e-learning tests (IMS Global Learning Consortium, Inc. 2012ab). The standard evolved over various
versions with the first release culminating in the QTI 1.2 standard and the stable version
of the second release currently at QTI 2.1. While both versions share many similarities, they
differ in many details. Hence, separate functions <code>exams2sakai</code> and <code>exams2qti21</code> are
provided. The former has already been thoroughly tested and the latter is still in beta testing
stage and might change in future releases.
</p>
<p><code>exams2sakai</code> produces a <code>.zip</code> file that may be uploaded (e.g. in OLAT). This includes
the final XML file of the exam/assessment as well as possible supplement folders that include
images, data sets etc. used for the exam. It proceeds by (1) calling <code><a href="exams.html#topic+xweave">xweave</a></code>
on each exercise, (2) reading the resulting LaTeX code, (3) transforming the LaTeX code to HTML,
and (4) embedding the HTML code in a XML file using the IMS QTI 1.2 standards for assessments and
question items.
</p>
<p>For steps (1) and (2) the standard drivers in <code>xexams</code> are used. In step (3), a suitable
transformation function is set up on the fly using <code>make_exercise_transform_html</code>, see also
the details section in <code>exams2html</code>.
</p>
<p>For step (4), the function will cycle through all questions and exams to generate the final XML
file in IMS QTI 1.2 standard. Therefore, each question will be included in the XML as one section.
The replicates of each question will be written as question items of the section.
</p>
<p>The function uses the XML template for IMS QTI 1.2 assessments and items to generate
the exam (per default, this is the XML file <code>qti12.xml</code> provided in the <code>xml</code> folder of
this package). The assessment template must provide one section including one item.
<code>exams2sakai</code> will then use the single item template to generate all items, as well as the
assessment and section specifications set within the template.
</p>
<p>The default template will generate exams/assessments that sample one replicate of a question/item
for each section. The usual procedure in exam/assessment generation would be to simply copy \&amp;
paste the XML template of the package and adapt it to the needs of the user. Note that all
specifiers that have a leading <code>##</code> in the XML template will be replaced by suitable code in
<code>exams2sakai</code> and should always be provided in the template. I.e., the user may add
additional tags to the XML template or modify certain specifications, like the number of
replicates/items that should be sampled for each section etc.
</p>
<p>Per default, the individual question/item bodies are generated by function
<code>make_itembody_sakai</code>, i.e. <code>make_itembody_sakai</code> checks the type of the question and
will produce suitable XML code. Note that for each question type, either the arguments of
<code>make_itembody_sakai</code> may be set within <code>num</code>, <code>mchoice</code>, <code>schoice</code>,
<code>string</code> and <code>cloze</code> in <code>exams2sakai</code>, by providing a named list of specifications
that should be used, or for each questiontype, a function that produces the item body XML code may
be provided to <code>num</code>, <code>mchoice</code>, <code>schoice</code>, <code>string</code> and <code>cloze</code>. E.g.,
<code>mchoice = list(shuffle = TRUE)</code> will force only multiple choice questions to have a shuffled
answerlist.
</p>
<p>Note that in OLAT/OpenOLAT <code>num</code> exercises are not officially supported but in fact work
correctly. The only drawback is that in certain settings the correct solution is not shown at the
end of the assessment (although it is used for all internal computations). Therefore, two workarounds
are implemented. Either <code>fix_num</code> can be set to <code>TRUE</code> (default), then a fix is added
by double-checking the result, or <code>digits</code> can be set to a fixed value (e.g., <code>digits = 2</code>).
In the latter case, the <code>num</code> exercise is represented by a <code>string</code>. Then the answer must
be provided exactly to the decimal places specified (e.g., if the exact solution is 16.4562, then the
correct answer in the test will be <code>"16.46"</code>, i.e., a character string of 5 characters).
</p>
<p>Generating exams/assessment in IMS QTI 2.1 format using <code>exams2qti21()</code> and <code>make_itembody_qti21()</code>
is performed in a similar way as described above. Note that the IMS QTI 2.1 generators are
still work in progress. The generated XML files have been validated using the IMS validator provided
at <a href="http://membervalidator.imsglobal.org/qti/">http://membervalidator.imsglobal.org/qti/</a> (when it was still freely available).
Furthermore, a selection of generated exams/assessments has been tested using the ONYX Editor and
Player, see <a href="https://www.onyx-editor.de/">https://www.onyx-editor.de/</a>.
</p>


<h3>Value</h3>

<p><code>exams2sakai</code> return a list of exams as generated by <code><a href="exams.html#topic+xexams">xexams</a></code>.
</p>
<p><code>make_itembody_sakai</code> return a function that generates the XML code
for the itembody tag in IMS QTI Sakai format.
</p>


<h3>References</h3>

<p>IMS Global Learning Consortium, Inc. (2012a).
<em>IMS Question &amp; Test Interoperability: ASI XML Binding Specification Final Specification Version 1.2</em>.
<a href="http://www.imsglobal.org/question/qtiv1p2/imsqti_asi_bindv1p2.html">http://www.imsglobal.org/question/qtiv1p2/imsqti_asi_bindv1p2.html</a>
</p>
<p>IMS Global Learning Consortium, Inc. (2012b).
<em>IMS Question &amp; Test Interoperability (QTI) XSD Binding Version 2.1 Final</em>.
<a href="http://www.imsglobal.org/question/qtiv2p1/imsqti_bindv2p1.html">http://www.imsglobal.org/question/qtiv2p1/imsqti_bindv2p1.html</a>
</p>
<p>BPS Bildungsportal Sachsen GmbH (2014).
<em>ONYX Testsuite</em>.
<a href="http://www.bps-system.de/cms/en/products/onyx-testsuite/">http://www.bps-system.de/cms/en/products/onyx-testsuite/</a>
</p>
<p>Zeileis A, Umlauf N, Leisch F (2014).
Flexible Generation of E-Learning Exams in R: Moodle Quizzes, OLAT Assessments, and Beyond.
<em>Journal of Statistical Software</em>, <b>58</b>(1), 1&ndash;36.
<a href="https://www.jstatsoft.org/v58/i01/">https://www.jstatsoft.org/v58/i01/</a>.
</p>
<p>R/Exams in Sakai (Sakai Virtual Conference 2019). 6th November 2019.
<a href="https://aulavirtual.um.es/access/content/group/COLLAB-3ufsaiywvwzdmvw4rn6ghjl/SVC2019/SVC2019.html">https://aulavirtual.um.es/access/content/group/COLLAB-3ufsaiywvwzdmvw4rn6ghjl/SVC2019/SVC2019.html</a>
</p>
<p>Proyecto de adaptaci&amp;oacute;n de R/Exams a la plataforma Sakai (XI Jornadas de Usuarios de R). 14-16 Noviembre 2019.
<a href="https://aulavirtual.um.es/access/content/group/COLLAB-3ufsaiywvwzdmvw4rn6ghjl/xijur2019/xijur19.html">https://aulavirtual.um.es/access/content/group/COLLAB-3ufsaiywvwzdmvw4rn6ghjl/xijur2019/xijur19.html</a>
<a href="https://canal.uned.es/video/5dd268775578f2766d1cca9d">https://canal.uned.es/video/5dd268775578f2766d1cca9d</a>
</p>
<p>Tareas y ex&amp;aacute;menes en Sakai con R/Exams. 25 Marzo 2021.
<a href="https://youtu.be/4i9YKPiVIrg?t=1920">https://youtu.be/4i9YKPiVIrg?t=1920</a>
<a href="https://gauss.inf.um.es/umur/">https://gauss.inf.um.es/umur/</a>
</p>


<h3>See Also</h3>

<p><code><a href="exams.html#topic+xexams">xexams</a></code>,
<code><a href="tth.html#topic+ttm">ttm</a></code>,
<code><a href="tth.html#topic+tth">tth</a></code>,
<code><a href="exams.html#topic+tex2image">tex2image</a></code>,
<code><a href="exams.html#topic+make_exercise_transform_html">make_exercise_transform_html</a></code>,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## load package and enforce par(ask = FALSE)
library("exams2sakai")
options(device.ask.default = FALSE)

## define an exams (= list of exercises)
myexam &lt;- list( "boxplots", "regression", "scatterplot", "relfreq" )

## output directory
dir.create(mydir &lt;- tempfile())

## generate Sakai quiz in temporary directory
exams2sakai( myexam, n = 1,
                    verbose = TRUE,
                    dir = "mydir", points = c( 1 ) )

dir(mydir)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
