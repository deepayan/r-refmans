<!DOCTYPE html><html><head><title>Help for package fable.prophet</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {fable.prophet}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#fable.prophet-package'><p>fable.prophet: Prophet Modelling Interface for 'fable'</p></a></li>
<li><a href='#components.fbl_prophet'><p>Extract meaningful components</p></a></li>
<li><a href='#fitted.fbl_prophet'><p>Extract fitted values</p></a></li>
<li><a href='#forecast.fbl_prophet'><p>Produce forecasts from the prophet model</p></a></li>
<li><a href='#glance.fbl_prophet'><p>Glance a prophet model</p></a></li>
<li><a href='#prophet'><p>Prophet procedure modelling</p></a></li>
<li><a href='#residuals.fbl_prophet'><p>Extract model residuals</p></a></li>
<li><a href='#tidy.fbl_prophet'><p>Extract estimated coefficients from a prophet model</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Title:</td>
<td>Prophet Modelling Interface for 'fable'</td>
</tr>
<tr>
<td>Description:</td>
<td>Allows prophet models from the 'prophet' package to be used in a tidy workflow with the modelling interface of 'fabletools'. This extends 'prophet' to provide enhanced model specification and management, performance evaluation methods, and model combination tools.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.3), Rcpp, fabletools (&ge; 0.2.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>rlang, tsibble, lubridate, prophet, dplyr, distributional</td>
</tr>
<tr>
<td>Suggests:</td>
<td>tsibbledata, testthat, ggplot2, covr, knitr, rmarkdown</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>true</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://pkg.mitchelloharawild.com/fable.prophet/">https://pkg.mitchelloharawild.com/fable.prophet/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/mitchelloharawild/fable.prophet/issues">https://github.com/mitchelloharawild/fable.prophet/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-08-13 02:30:58 UTC; mitchell</td>
</tr>
<tr>
<td>Author:</td>
<td>Mitchell O'Hara-Wild [aut, cre],
  Sean Taylor [ctb] (Prophet library,
    https://facebook.github.io/prophet/),
  Ben Letham [ctb] (Prophet library, https://facebook.github.io/prophet/)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Mitchell O'Hara-Wild &lt;mail@mitchelloharawild.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-08-20 09:30:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='fable.prophet-package'>fable.prophet: Prophet Modelling Interface for 'fable'</h2><span id='topic+fable.prophet'></span><span id='topic+fable.prophet-package'></span>

<h3>Description</h3>

<p>Allows prophet models from the 'prophet' package to be used in a tidy workflow with the modelling interface of 'fabletools'. This extends 'prophet' to provide enhanced model specification and management, performance evaluation methods, and model combination tools.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Mitchell O'Hara-Wild <a href="mailto:mail@mitchelloharawild.com">mail@mitchelloharawild.com</a>
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Sean Taylor (Prophet library, https://facebook.github.io/prophet/) [contributor]
</p>
</li>
<li><p> Ben Letham (Prophet library, https://facebook.github.io/prophet/) [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://pkg.mitchelloharawild.com/fable.prophet/">https://pkg.mitchelloharawild.com/fable.prophet/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/mitchelloharawild/fable.prophet/issues">https://github.com/mitchelloharawild/fable.prophet/issues</a>
</p>
</li></ul>


<hr>
<h2 id='components.fbl_prophet'>Extract meaningful components</h2><span id='topic+components.fbl_prophet'></span>

<h3>Description</h3>

<p>A prophet model consists of terms which are additively or multiplicatively
included in the model. Multiplicative terms are scaled proportionally to the
estimated trend, while additive terms are not.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'fbl_prophet'
components(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="components.fbl_prophet_+3A_object">object</code></td>
<td>
<p>An estimated model.</p>
</td></tr>
<tr><td><code id="components.fbl_prophet_+3A_...">...</code></td>
<td>
<p>Unused.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Extracting a prophet model's components using this function allows you to
visualise the components in a similar way to <code><a href="prophet.html#topic+prophet_plot_components">prophet::prophet_plot_components()</a></code>.
</p>


<h3>Value</h3>

<p>A <code><a href="fabletools.html#topic+dable">fabletools::dable()</a></code> containing estimated states.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

if (requireNamespace("tsibbledata")) {
library(tsibble)
beer_components &lt;- tsibbledata::aus_production %&gt;%
  model(
    prophet = prophet(Beer ~ season("year", 4, type = "multiplicative"))
  ) %&gt;%
  components()

beer_components

autoplot(beer_components)

library(ggplot2)
library(lubridate)
beer_components %&gt;%
  ggplot(aes(x = quarter(Quarter), y = year, group = year(Quarter))) +
  geom_line()
}


</code></pre>

<hr>
<h2 id='fitted.fbl_prophet'>Extract fitted values</h2><span id='topic+fitted.fbl_prophet'></span>

<h3>Description</h3>

<p>Extracts the fitted values from an estimated Prophet model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'fbl_prophet'
fitted(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fitted.fbl_prophet_+3A_object">object</code></td>
<td>
<p>The time series model used to produce the forecasts</p>
</td></tr>
<tr><td><code id="fitted.fbl_prophet_+3A_...">...</code></td>
<td>
<p>Additional arguments for forecast model methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of fitted values.
</p>

<hr>
<h2 id='forecast.fbl_prophet'>Produce forecasts from the prophet model</h2><span id='topic+forecast.fbl_prophet'></span>

<h3>Description</h3>

<p>If additional future information is required (such as exogenous variables or
carrying capacities) by the model, then they should be included as variables
of the <code>new_data</code> argument.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'fbl_prophet'
forecast(object, new_data, specials = NULL, times = 1000, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="forecast.fbl_prophet_+3A_object">object</code></td>
<td>
<p>The time series model used to produce the forecasts</p>
</td></tr>
<tr><td><code id="forecast.fbl_prophet_+3A_new_data">new_data</code></td>
<td>
<p>A <code>tsibble</code> containing future information used to forecast.</p>
</td></tr>
<tr><td><code id="forecast.fbl_prophet_+3A_specials">specials</code></td>
<td>
<p>(passed by <code><a href="fabletools.html#topic+forecast">fabletools::forecast.mdl_df()</a></code>).</p>
</td></tr>
<tr><td><code id="forecast.fbl_prophet_+3A_times">times</code></td>
<td>
<p>The number of sample paths to use in estimating the forecast distribution when <code>boostrap = TRUE</code>.</p>
</td></tr>
<tr><td><code id="forecast.fbl_prophet_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code><a href="prophet.html#topic+predict.prophet">prophet::predict.prophet()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of forecasts.
</p>


<h3>See Also</h3>

<p><code><a href="prophet.html#topic+predict.prophet">prophet::predict.prophet()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

if (requireNamespace("tsibbledata")) {
library(tsibble)
tsibbledata::aus_production %&gt;%
  model(
    prophet = prophet(Beer ~ season("year", 4, type = "multiplicative"))
  ) %&gt;%
  forecast()
}


</code></pre>

<hr>
<h2 id='glance.fbl_prophet'>Glance a prophet model</h2><span id='topic+glance.fbl_prophet'></span>

<h3>Description</h3>

<p>A glance of a prophet provides the residual's standard deviation (sigma), and
a tibble containing the selected changepoints with their trend adjustments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'fbl_prophet'
glance(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="glance.fbl_prophet_+3A_x">x</code></td>
<td>
<p>model or other R object to convert to single-row data frame</p>
</td></tr>
<tr><td><code id="glance.fbl_prophet_+3A_...">...</code></td>
<td>
<p>other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A one row tibble summarising the model's fit.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

if (requireNamespace("tsibbledata")) {
library(tsibble)
library(dplyr)
fit &lt;- tsibbledata::aus_production %&gt;%
  model(
    prophet = prophet(Beer ~ season("year", 4, type = "multiplicative"))
  )

glance(fit)
}


</code></pre>

<hr>
<h2 id='prophet'>Prophet procedure modelling</h2><span id='topic+prophet'></span>

<h3>Description</h3>

<p>Prepares a prophet model specification for use within the <code>fable</code> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prophet(formula, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prophet_+3A_formula">formula</code></td>
<td>
<p>A symbolic description of the model to be fitted of class <code>formula</code>.</p>
</td></tr>
<tr><td><code id="prophet_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to the <code>optimizing</code> or
<code>sampling</code> functions in Stan.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The prophet modelling interface uses a <code>formula</code> based model specification
(<code>y ~ x</code>), where the left of the formula specifies the response variable,
and the right specifies the model's predictive terms. Like any model in the
fable framework, it is possible to specify transformations on the response.
</p>
<p>A prophet model supports piecewise linear or exponential growth (trend),
additive or multiplicative seasonality, holiday effects and exogenous
regressors. These can be specified using the 'specials' functions detailed
below. The introduction vignette provides more details on how to model data
using this interface to prophet: <code>vignette("intro", package="fable.prophet")</code>.
</p>


<h3>Specials</h3>



<h4>growth</h4>

<p>The <code>growth</code> special is used to specify the trend parameters.
</p>
<pre>
growth(type = c("linear", "logistic"), capacity = NULL, floor = NULL,
       changepoints = NULL, n_changepoints = 25, changepoint_range = 0.8,
       changepoint_prior_scale = 0.05)
</pre>

<table>
<tr>
 <td style="text-align: left;">
<code>type</code>                    </td><td style="text-align: left;"> The type of trend (linear or logistic).</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>capacity</code>                </td><td style="text-align: left;"> The carrying capacity for when <code>type</code> is "logistic".</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>floor</code>                   </td><td style="text-align: left;"> The saturating minimum for when <code>type</code> is "logistic".</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>changepoints</code>            </td><td style="text-align: left;"> A vector of dates/times for changepoints. If <code>NULL</code>, changepoints are automatically selected.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>n_changepoints</code>          </td><td style="text-align: left;"> The total number of changepoints to be selected if <code>changepoints</code> is <code>NULL</code></td>
</tr>
<tr>
 <td style="text-align: left;">
<code>changepoint_range</code>       </td><td style="text-align: left;"> Proportion of the start of the time series where changepoints are automatically selected.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>changepoint_prior_scale</code> </td><td style="text-align: left;"> Controls the flexibility of the trend.
</td>
</tr>

</table>




<h4>season</h4>

<p>The <code>season</code> special is used to specify a seasonal component. This special can be used multiple times for different seasonalities.
</p>
<p><strong>Warning: The inputs controlling the seasonal <code>period</code> is specified is different than <code><a href="prophet.html#topic+prophet">prophet::prophet()</a></code>. Numeric inputs are treated as the number of observations in each seasonal period, not the number of days.</strong>
</p>
<pre>
season(period = NULL, order = NULL, prior_scale = 10,
       type = c("additive", "multiplicative"), name = NULL)
</pre>

<table>
<tr>
 <td style="text-align: left;">
<code>period</code>      </td><td style="text-align: left;"> The periodic nature of the seasonality. If a number is given, it will specify the number of observations in each seasonal period. If a character is given, it will be parsed using <code>lubridate::as.period</code>, allowing seasonal periods such as "2 years".</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>order</code>       </td><td style="text-align: left;"> The number of terms in the partial Fourier sum. The higher the <code>order</code>, the more flexible the seasonality can be.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>prior_scale</code> </td><td style="text-align: left;"> Used to control the amount of regularisation applied. Reducing this will dampen the seasonal effect.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>type</code>        </td><td style="text-align: left;"> The nature of the seasonality. If "additive", the variability in the seasonal pattern is fixed. If "multiplicative", the seasonal pattern varies proportionally to the level of the series.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>name</code>        </td><td style="text-align: left;"> The name of the seasonal term (allowing you to name an annual pattern as 'annual' instead of 'year' or <code>365.25</code> for example).</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>holiday</h4>

<p>The <code>holiday</code> special is used to specify a <code>tsibble</code> containing holidays for the model.
</p>
<pre>
holiday(holidays = NULL, prior_scale = 10L)
</pre>

<table>
<tr>
 <td style="text-align: left;">
<code>holidays</code>    </td><td style="text-align: left;"> A <a href="https://tsibble.tidyverts.org/"><code>tsibble</code></a> containing a set of holiday events. The event name is given in the 'holiday' column, and the event date is given via the index. Additionally, "lower_window" and "upper_window" columns can be used to include days before and after the holiday.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>prior_scale</code> </td><td style="text-align: left;"> Used to control the amount of regularisation applied. Reducing this will dampen the holiday effect.</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>xreg</h4>

<p>The <code>xreg</code> special is used to include exogenous regressors in the model. This special can be used multiple times for different regressors with different arguments.
Exogenous regressors can also be used in the formula without explicitly using the <code>xreg()</code> special, which will then use the default arguments.
</p>
<pre>
xreg(..., prior_scale = NULL, standardize = "auto", type = NULL)
</pre>

<table>
<tr>
 <td style="text-align: left;">
<code>...</code>         </td><td style="text-align: left;"> A set of bare expressions that are evaluated as exogenous regressors</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>prior_scale</code> </td><td style="text-align: left;"> Used to control the amount of regularisation applied. Reducing this will dampen the regressor effect.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>standardize</code> </td><td style="text-align: left;"> Should the regressor be standardised before fitting? If "auto", it will standardise if the regressor is not binary.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>type</code>        </td><td style="text-align: left;"> Does the effect of the regressor vary proportionally to the level of the series? If so, "multiplicative" is best. Otherwise, use "additive"</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h3>See Also</h3>


<ul>
<li> <p><code><a href="prophet.html#topic+prophet">prophet::prophet()</a></code>
</p>
</li>
<li> <p><a href="https://facebook.github.io/prophet/">Prophet homepage</a>
</p>
</li>
<li> <p><a href="https://CRAN.R-project.org/package=prophet">Prophet R package</a>
</p>
</li>
<li> <p><a href="https://pypi.org/project/fbprophet/">Prophet Python package</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>library(tsibble)
as_tsibble(USAccDeaths) %&gt;%
  model(
    prophet = prophet(value ~ season("year", 4, type = "multiplicative"))
  )

</code></pre>

<hr>
<h2 id='residuals.fbl_prophet'>Extract model residuals</h2><span id='topic+residuals.fbl_prophet'></span>

<h3>Description</h3>

<p>Extracts the residuals from an estimated Prophet model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'fbl_prophet'
residuals(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="residuals.fbl_prophet_+3A_object">object</code></td>
<td>
<p>The time series model used to produce the forecasts</p>
</td></tr>
<tr><td><code id="residuals.fbl_prophet_+3A_...">...</code></td>
<td>
<p>Additional arguments for forecast model methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of residuals.
</p>

<hr>
<h2 id='tidy.fbl_prophet'>Extract estimated coefficients from a prophet model</h2><span id='topic+tidy.fbl_prophet'></span>

<h3>Description</h3>

<p>Extract estimated coefficients from a prophet model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'fbl_prophet'
tidy(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tidy.fbl_prophet_+3A_x">x</code></td>
<td>
<p>An object to be converted into a tidy <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code>.</p>
</td></tr>
<tr><td><code id="tidy.fbl_prophet_+3A_...">...</code></td>
<td>
<p>Additional arguments to tidying method.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble containing the model's estimated parameters.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

if (requireNamespace("tsibbledata")) {
library(tsibble)
library(dplyr)
fit &lt;- tsibbledata::aus_production %&gt;%
  model(
    prophet = prophet(Beer ~ season("year", 4, type = "multiplicative"))
  )

tidy(fit) # coef(fit) or coefficients(fit) can also be used
}


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
