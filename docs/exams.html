<!DOCTYPE html><html><head><title>Help for package exams</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {exams}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#exams'><p>Generation of Simple Exams</p></a></li>
<li><a href='#exams_eval'><p>Auxiliary Tools for Evaluating Exams</p></a></li>
<li><a href='#exams_skeleton'><p>Generate Skeleton for Exams Directory/Script</p></a></li>
<li><a href='#exams2arsnova'><p>Generation of Exam/Quiz Sessions in ARSnova Format</p></a></li>
<li><a href='#exams2blackboard'><p>Generation of Exams in Blackboard Format</p></a></li>
<li><a href='#exams2canvas'><p>Generation of Exams for Canvas</p></a></li>
<li><a href='#exams2grasple'><p>Generation of Exercises in Grasple Format</p></a></li>
<li><a href='#exams2html'><p>Generation of Exams in HTML Format</p></a></li>
<li><a href='#exams2ilias'><p>Generation of Exams in ILIAS Format</p></a></li>
<li><a href='#exams2kahoot'><p>Generation of Excel Sheets with Quiz Questions for Kahoot!</p></a></li>
<li><a href='#exams2lops'><p>Generation of Exams in LOPS Exam Server Format (WU Wien)</p></a></li>
<li><a href='#exams2moodle'><p>Generation of Exams in Moodle XML Format</p></a></li>
<li><a href='#exams2nops'><p>Generation of Written Exams for Automatic Evaluation</p></a></li>
<li><a href='#exams2openolat'><p>Generation of Exams for OpenOlat</p></a></li>
<li><a href='#exams2pandoc'><p>Generation of Exams via Pandoc</p></a></li>
<li><a href='#exams2particify'><p>Generation of Exam/Quiz Sessions in Particify Format</p></a></li>
<li><a href='#exams2pdf'><p>Generation of Exams in PDF Format</p></a></li>
<li><a href='#exams2qti12'><p>Generation of Exams in QTI 1.2 Format</p></a></li>
<li><a href='#exams2qti21'><p>Generation of Exams in QTI 2.1 Format</p></a></li>
<li><a href='#exams2tcexam'><p>Generation of Exams in TCExam Format</p></a></li>
<li><a href='#exams2testvision'><p>Generation of Exams in TestVision Format</p></a></li>
<li><a href='#expar'><p>Fix Parameters in Dynamic Exercises</p></a></li>
<li><a href='#fmt'><p>Auxiliary Formatting Functions</p></a></li>
<li><a href='#include_supplement'><p>Copy (Static) Supplement Files for Inclusion in Exercises</p></a></li>
<li><a href='#include_tikz'><p>Including Figures from TikZ Code in Exercises</p></a></li>
<li><a href='#make_exercise_transform_pandoc'><p>Transform Exercises via Pandoc</p></a></li>
<li><a href='#match_exams_call'><p>Query Information from Last xexams/exams2xyz Call</p></a></li>
<li><a href='#matrix_to_schoice'><p>Generate Single- and Multiple-Choice Question Lists for Matrix Solutions</p></a></li>
<li><a href='#mchoice2string'><p>Convenience Functions for Exam Formatting</p></a></li>
<li><a href='#moodle2exams'><p>Convert Moodle XML Quizzes to R/exams Exercises</p></a></li>
<li><a href='#nops_eval'><p>Evaluate NOPS Exams</p></a></li>
<li><a href='#nops_language'><p>Read NOPS Language Specifciation</p></a></li>
<li><a href='#nops_scan'><p>Read Scanned NOPS Exams</p></a></li>
<li><a href='#num_to_schoice'><p>Generate Single-Choice Question List from Numeric Solution</p></a></li>
<li><a href='#read_exercise'><p>Reading LaTeX/Markdown Exercise Files</p></a></li>
<li><a href='#stresstest_exercise'>
<p>Stress Testing Exercises</p></a></li>
<li><a href='#testvision2exams'><p>Convert TestVision XML Questions to R/exams Exercises</p></a></li>
<li><a href='#tex2image'><p>Transforming LaTeX Code Using ImageMagick or pdf2svg</p></a></li>
<li><a href='#xexams'><p>Extensible Generation of Exams</p></a></li>
<li><a href='#xweave'><p>Wrapper Function for Weaving Either Rnw or Rmd Exercises</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>2.4-0</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-10-17</td>
</tr>
<tr>
<td>Title:</td>
<td>Automatic Generation of Exams in R</td>
</tr>
<tr>
<td>Description:</td>
<td>Automatic generation of exams based on exercises in Markdown or LaTeX format,
	possibly including R code for dynamic generation of exercise elements.
	Exercise types include single-choice and multiple-choice questions, arithmetic problems,
	string questions, and combinations thereof (cloze). Output formats include standalone
	files (PDF, HTML, Docx, ODT, ...), Moodle XML, QTI 1.2, QTI 2.1, Blackboard, Canvas, OpenOlat, ILIAS, TestVision,
	Particify, ARSnova, Kahoot!, Grasple, and TCExam. In addition to fully customizable PDF exams, a standardized PDF format
	(NOPS) is provided that can be printed, scanned, and automatically evaluated.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>graphics, grDevices, stats, tools, utils, base64enc, knitr,
rmarkdown</td>
</tr>
<tr>
<td>Suggests:</td>
<td>magick, openxlsx, parallel, png, RCurl, RJSONIO, tinytex,
tth, xml2</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>pandoc (&gt;= 2.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://www.R-exams.org/">https://www.R-exams.org/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://www.R-exams.org/contact/">https://www.R-exams.org/contact/</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-10-17 08:50:46 UTC; zeileis</td>
</tr>
<tr>
<td>Author:</td>
<td>Achim Zeileis <a href="https://orcid.org/0000-0003-0918-3766"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Bettina Gruen <a href="https://orcid.org/0000-0001-7265-4773"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Friedrich Leisch <a href="https://orcid.org/0000-0001-7278-1983"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Nikolaus Umlauf [aut],
  Mirko Birbaumer [ctb],
  Dominik Ernst [ctb],
  Patrik Keller [ctb],
  Niels Smits <a href="https://orcid.org/0000-0003-3669-9266"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Reto Stauffer [ctb],
  Kenji Sato [ctb],
  Florian Wickelmaier [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Achim Zeileis &lt;Achim.Zeileis@R-project.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-10-17 11:22:32 UTC</td>
</tr>
</table>
<hr>
<h2 id='exams'>Generation of Simple Exams</h2><span id='topic+exams'></span>

<h3>Description</h3>

<p>Old (version 1) interface for Sweave-based automatic generation
of exams including multiple choice questions and arithmetic problems.
Now it is recommended to use the (version 2) interface
<code><a href="#topic+exams2pdf">exams2pdf</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  exams(file, n = 1, nsamp = NULL, dir = NULL, template = "plain",
    inputs = NULL, header = list(Date = Sys.Date()), name = NULL,
    quiet = TRUE, edir = NULL, tdir = NULL, control = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams_+3A_file">file</code></td>
<td>
<p>character. A specification of a (list of) exercise files,
for details see below.</p>
</td></tr>
<tr><td><code id="exams_+3A_n">n</code></td>
<td>
<p>integer. The number of copies to be compiled from
<code>file</code>.</p>
</td></tr>
<tr><td><code id="exams_+3A_nsamp">nsamp</code></td>
<td>
<p>integer. The number(s) of exercise files sampled from each
list element of <code>file</code>. Sampling without replacement is used
if possible. (Only if some element of <code>nsamp</code> is larger than
the length of the corresponding element in <code>file</code>, sampling
with replacement is used.)</p>
</td></tr>
<tr><td><code id="exams_+3A_dir">dir</code></td>
<td>
<p>character. The output directory, this has to be set if
<code>n</code> is greater than 1 (or <code>template</code> is longer than 1).</p>
</td></tr>
<tr><td><code id="exams_+3A_template">template</code></td>
<td>
<p>character. A specification of a LaTeX template. The package
currently provides <code>"exam"</code>, <code>"solution"</code>, <code>"plain"</code>.
For details see below.</p>
</td></tr>
<tr><td><code id="exams_+3A_inputs">inputs</code></td>
<td>
<p>character. Names of files that are needed as inputs during
LaTeX compilation (e.g., style files, headers). Either the full path
must be given or the file needs to be in <code>edir</code>.</p>
</td></tr>
<tr><td><code id="exams_+3A_header">header</code></td>
<td>
<p>list. A list of further options to be passed to
the LaTeX files.</p>
</td></tr>
<tr><td><code id="exams_+3A_name">name</code></td>
<td>
<p>character. A name prefix for resulting exercises, by default
chosen based on <code>template</code>.</p>
</td></tr>
<tr><td><code id="exams_+3A_quiet">quiet</code></td>
<td>
<p>logical. Should output be suppressed when calling
<code><a href="utils.html#topic+Sweave">Sweave</a></code> and <code><a href="tools.html#topic+texi2dvi">texi2dvi</a></code>.</p>
</td></tr>
<tr><td><code id="exams_+3A_edir">edir</code></td>
<td>
<p>character specifying the path of the directory in which
the files in <code>file</code> are stored (see also below).</p>
</td></tr>
<tr><td><code id="exams_+3A_tdir">tdir</code></td>
<td>
<p>character specifying a temporary directory, by default
this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>. Note that this
is cleaned up and potentially temporary files are deleted.</p>
</td></tr>
<tr><td><code id="exams_+3A_control">control</code></td>
<td>
<p>A list of control arguments for the appearance of
multiple choice results (see &lsquo;Details&rsquo;).</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>exams</code> is the old (version 1) interface for Sweave-based
generation of PDF exams. It is only provided for backward compatibility
and is superseded by the far more flexible function
<code><a href="#topic+exams2pdf">exams2pdf</a></code>.
</p>
<p><code>exams</code> generates exams from lists of <code><a href="utils.html#topic+Sweave">Sweave</a></code>
source files by:
(1) running <code>Sweave</code> on each exercise,
(2) including the resulting LaTeX files in a <code>template</code>,
(3) running <code><a href="tools.html#topic+texi2dvi">texi2dvi</a></code> on the template, and
(4) storing the resulting PDF file in an output <code>dir</code>
(or displaying it interactively).
</p>
<p>Each exercise in an exam is essentially a standalone Sweave source file
that <code>exams</code> knows (almost) nothing about, it just calls <code>Sweave</code>
(<code>n</code> times). The only exception is some meta-information which
is passed by means of four commands back to <code>exams</code>. The commands
are &lsquo;<span class="samp">&#8288;\extype&#8288;</span>&rsquo; (which may be &lsquo;<span class="samp">&#8288;mchoice&#8288;</span>&rsquo; or &lsquo;<span class="samp">&#8288;num&#8288;</span>&rsquo;),
&lsquo;<span class="samp">&#8288;\exsolution&#8288;</span>&rsquo; (e.g., <code>3.124</code> for a numeric solution and
<code>10010</code> for a multiple choice solution), &lsquo;<span class="samp">&#8288;\exstring&#8288;</span>&rsquo;
(containing a human-readable string with the solution), and
&lsquo;<span class="samp">&#8288;\extol&#8288;</span>&rsquo; (a tolerance for numeric solutions).
</p>
<p>The specification in <code>file</code> should be either of form <code>"foo"</code>
or equivalently <code>"foo.Rnw"</code>, where the file <code>"foo.Rnw"</code> should
either be in the local directory, the <code>edir</code> directory or in
the <code>exercises</code> directory of the package. <code>file</code> can either
be a simple vector or a list of vectors. In the latter case, exercises
are chosen randomly within each list element. For example, the specification
<code>file = list(c("a", "b"), "xyz")</code> will result in an exam with two
exercises: the first exercise is chosen randomly between <code>"a"</code> and
<code>"b"</code> while <code>"xyz"</code> is always included as the second exercise.
</p>
<p>The <code>template</code> is a (vector of) specification(s) of LaTeX templates.
It can be <code>"foo"</code> or equivalently <code>"foo.tex"</code> where <code>"foo.tex"</code>
should either be in the local directory (or provided with the full path)
or in the <code>tex</code> directory
of the package. It should specify where in the template the exercises
are included, using the markup &lsquo;<span class="samp">&#8288;\exinput{exercises}&#8288;</span>&rsquo;. Additionally,
it may contain &lsquo;<span class="samp">&#8288;\exinput{questionnaire}&#8288;</span>&rsquo; and &lsquo;<span class="samp">&#8288;\exinput{header}&#8288;</span>&rsquo;.
<code>template</code> can also be a vector, then for each of the <code>n</code> runs
several output files (one for each template) are created.
</p>
<p>The name prefix for each file is by default the base name of the 
corresponding <code>template</code> but can also be changed via <code>name</code>.
</p>
<p><code>exams</code> creates the PDF files and stores them in an output
directory together with the solution meta information as &lsquo;<span class="samp">&#8288;metainfo.rda&#8288;</span>&rsquo;
(see also below). If only a single PDF is created (currently
the default), <code>dir</code> may be <code>NULL</code> and it is only displayed
on the screen.
</p>
<p>The argument <code>control</code> is specified by a named list with elements
<code>mchoice.print</code> and <code>mchoice.symbol</code>. The element
<code>mchoice.print</code> is used for specifying the characters used for
printing. It is again a named list where element <code>True</code> gives the
(five) characters used for printing when the answer is correct and
<code>False</code> if the answer is wrong. The symbol used for the
questionnaire output in the final PDF file is defined by
<code>mchoice.symbol</code> which is vector with elements <code>True</code> and
<code>False</code>.
</p>


<h3>Value</h3>

<p>An object of class <code>"exams_metainfo"</code> is returned invisibly. It is a
list of length <code>n</code>, containing a list of meta informations for each
exercise:
</p>
<table>
<tr><td><code>mchoice</code></td>
<td>
<p>logical. Is the exercise a multiple choice exercise?</p>
</td></tr>
<tr><td><code>length</code></td>
<td>
<p>integer. Length of solution.</p>
</td></tr>
<tr><td><code>solution</code></td>
<td>
<p>either a logical vector (for multiple choice) or numeric
vector (for arithmetic problems).</p>
</td></tr>
<tr><td><code>string</code></td>
<td>
<p>character. A human-readable version of the solution.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Gruen B, Zeileis A (2009). Automatic Generation of Exams in R.
<em>Journal of Statistical Software</em>, <b>29</b>(10), 1&ndash;14.
<a href="https://doi.org/10.18637/jss.v029.i10">doi:10.18637/jss.v029.i10</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exams2pdf">exams2pdf</a></code>,
<code><a href="utils.html#topic+Sweave">Sweave</a></code>,
<code><a href="tools.html#topic+texi2dvi">texi2dvi</a></code>,
<code><a href="#topic+mchoice2string">mchoice2string</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## load package and enforce par(ask = FALSE)
library("exams")
options(device.ask.default = FALSE)

## define an exams (= list of exercises)
myexam &lt;- list(
  "boxplots.Rnw",
  c("tstat.Rnw", "ttest.Rnw", "confint.Rnw"),
  c("regression.Rnw", "anova.Rnw"),
  "scatterplot.Rnw",
  "relfreq.Rnw"
)


if(interactive()) {
## compile a single random exam (displayed on screen)
sol &lt;- exams(myexam)
sol
}

## generate multiple exams (stored in output directory)
odir &lt;- tempfile()
sol &lt;- exams(myexam, n = 2, dir = odir, template = c("exam", "solution"))
sol

## inspect solution for a particular exam
print(sol, 3)

if(interactive()) {
## modify control argument for printing
mymchoice.control &lt;- list(mchoice.print = list(True = LETTERS[1:5], False = "_"))
sol &lt;- exams("boxplots.Rnw", template = "solution",
  control = mymchoice.control)
sol
}

</code></pre>

<hr>
<h2 id='exams_eval'>Auxiliary Tools for Evaluating Exams</h2><span id='topic+exams_eval'></span>

<h3>Description</h3>

<p>Generation of various helper functions for evaluating exams.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exams_eval(partial = TRUE, negative = FALSE,
  rule = c("false2", "false", "true", "all", "none"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams_eval_+3A_partial">partial</code></td>
<td>
<p>logical. Should multiple-choice (<code>mchoice</code>) answers be evaluated
as a whole pattern (<code>partial = FALSE</code>) or should partial credits
be assigned to each of the choices (<code>partial = TRUE</code>)?</p>
</td></tr>
<tr><td><code id="exams_eval_+3A_negative">negative</code></td>
<td>
<p>logical or numeric. Handling of negative points for an
exercise, for details see below.</p>
</td></tr>
<tr><td><code id="exams_eval_+3A_rule">rule</code></td>
<td>
<p>character specifying which rule to use for negative
partial credits (i.e., only relevant for multiple-choice answers
when <code>partial = TRUE</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function <code>exams_eval</code> is a convenience wrapper for specifying
various types of evaluation policies. It returns a set of auxiliary
functions that may be useful in the evaluation of exams.
</p>
<p>Exercises of types <code>num</code>, <code>string</code>, or <code>schoice</code> can
essentially be just correct or wrong. In the former case they will give 100 percent of
all points, in the latter either 0 percent or some negative percentage
can be assigned. Setting <code>negative = TRUE</code> is equivalent to setting
either <code>negative = 1</code> or equivalently <code>negative = -1</code>, which
all signal that 100 percent of the points for the exercise should be subtracted.
Other percentages are also possible, e.g., <code>negative = 0.25</code>,
which would be a natural choice for <code>"schoice"</code> questions with five
answer alternatives. Not that when using an evaluation strategy with
negative points for wrong answers, the system that collects the participants'
answers should distinguish between &lsquo;solved incorrectly&rsquo; and
&lsquo;not attempted&rsquo; (which should always yield 0 percent).
</p>
<p>Moreover, for <code>mchoice</code> (multiple-choice) answers the evaluation policy can either
pertain to the answer pattern as a whole (which can be correct or wrong, see above)
or it can employ a partial credit strategy. In the latter case, each
selected correct choice will yield the fraction 1/ncorrect of points.
When an incorrect choice is selected, it should lead to negative points.
Five strategies are currently implemented: <code>"false"</code> uses
1/nwrong while <code>"false2"</code> uses 1/max(nwrong, 2);
<code>"true"</code> uses 1/ncorrect (so that each wrong selection cancels
one correct selection); <code>"all"</code> uses 1 (so that a single wrong
selection cancels all correct selections); and <code>"none"</code> uses 0
(so that wrong selections have no effect at all). When aggregating the partial percentages,
the overall points can become negative. By setting <code>negative</code>
a lower bound can be set: <code>negative = TRUE</code> sets no bound while
<code>negative = FALSE</code> sets the bound to zero. Any other numeric
value could be set as well, e.g., <code>negative = 0.25</code>.
</p>
<p>The functions returned by <code>exams_eval</code> try to automatically infer
the type of exercise based on the correct answer. However, this cannot
always infer the type reliably (e.g., the number 10 vs. the string 10
vs. a multiple-choice question with two elements, true and false). Specifically,
multiple-choice vs. single-choice cannot be distinguished automatically.
Hence, it is better to explicitly indicate the exercise type with the 
<code>type</code> argument.
</p>
<p>Evaluations for <code>cloze</code> exercises have to be built by appropriately reusing the building
blocks for <code>num</code>/<code>string</code>/<code>schoice</code>/<code>mchoice</code>. For example,
the components of <code>cloze</code> exercises have to be evaluated individually
and then aggregated as desired. Different evaluations for different item types may be
set as in: <code>exams2qti12(..., eval = eval1, schoice = list(eval = eval2))</code>. 
Then <code>eval = eval1</code> is used as the default for all exercise types except 
<code>schoice</code> where <code>eval = eval2</code> is used.
</p>
<p>Thus, <code>exams_eval</code> might not give the complete finished evaluation
policy for an entire exam but supplies the most important building blocks
for setting this up &lsquo;by hand&rsquo;. Internally, <code>exams_eval</code> is also used by
<code><a href="#topic+exams2moodle">exams2moodle</a></code>, <code><a href="#topic+exams2qti12">exams2qti12</a></code> and 
<code><a href="#topic+exams2blackboard">exams2blackboard</a></code> for writing the evaluation 
specifications in the respective XML specifications.
</p>


<h3>Value</h3>

<p><code>exams_eval</code> returns a list with the input parameters
<code>partial</code>, <code>negative</code>, and <code>rule</code> along with
the following functions:  
</p>
<table>
<tr><td><code>checkanswer</code></td>
<td>
<p>function with arguments
<code>(correct</code>, <code>answer</code>, <code>tolerance = 0</code>, and <code>type = NULL</code>.
It checks whether <code>answer</code> (sufficiently) matches
<code>correct</code> or not. It returns <code>1</code> for correct, <code>-1</code>
for wrong and <code>0</code> for not attempted. In case of <code>partial = TRUE</code>, the
functions returns a vector for multiple-choice questions.</p>
</td></tr>
<tr><td><code>pointvec</code></td>
<td>
<p>function with arguments <code>correct = NULL</code> and <code>type = NULL</code>.
It computes the vector of points for correct and wrong answers,
respectively.</p>
</td></tr>
<tr><td><code>pointsum</code></td>
<td>
<p>function with arguments
<code>(correct</code>, <code>answer</code>, <code>tolerance = 0</code>, and <code>type = NULL</code>.
It computes the overall number of points.</p>
</td></tr>
</table>
<p>All of the functions require at least the <code>correct</code> answer and optionally
the exercise <code>type</code> (num, mchoice/schoice, or string). By default, the
<code>type</code> is inferred from <code>correct</code> which works automatically except
in a few edge cases (e.g., to correctly autodetect a string exercise the correct
answer must contain at least one character that is not 0 or 1).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exams2moodle">exams2moodle</a></code>,
<code><a href="#topic+exams2qti12">exams2qti12</a></code>,
<code><a href="#topic+exams2blackboard">exams2blackboard</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## binary evaluation policy with solutions being either correct
## or wrong: partial = FALSE, negative = FALSE
ee &lt;- exams_eval(partial = FALSE, negative = FALSE)

## points that can be achieved are 0/1
ee$pointvec()

## checkanswer() returns 1 for correct, -1 for incorrect and 0 for missing answer
ee$checkanswer(1.23, 1.23)
ee$checkanswer(1.23, "1.23")
ee$checkanswer(1.23, "1,23")
ee$checkanswer(1.23, 1.24)
ee$checkanswer(1.23, 1.24, tolerance = 0.01)
ee$checkanswer(1.23, NA)
ee$checkanswer(1.23, NULL)
ee$checkanswer(1.23, "")

## similarly for logical (mchoice/schoice) answers
## (which allows either string or logical specification)
ee$checkanswer("10000", "10000")
ee$checkanswer(c(TRUE, FALSE, FALSE, FALSE, FALSE), c(TRUE, FALSE, FALSE, FALSE, FALSE))
ee$checkanswer(c(TRUE, FALSE, FALSE, FALSE, FALSE), "10000")
ee$checkanswer("10000", "01000")
ee$checkanswer("10000", "11000")

## and analogously for strings
ee$checkanswer("foo", "foo")
ee$checkanswer("foo", "bar")
ee$checkanswer("foo", "")

## obtain points achieved
ee$pointsum("10000", "10000")
ee$pointsum("10000", "01000")
ee$pointsum("10000", "00000")
ee$pointsum("10000", NA)

## ---------------------------------------------------------
## evaluation policy with -25% penalty for wrong answers
ee &lt;- exams_eval(partial = FALSE, negative = -0.25)

## points that can be achieved are 1/-0.25 (or zero)
ee$pointvec()

## obtain points achieved
ee$pointsum("10000", "10000")
ee$pointsum("10000", "01000")
ee$pointsum("10000", "00000")
ee$pointsum("10000", NA)
ee$pointsum(1.23, 1.23)
ee$pointsum(1.23, 2.34)
ee$pointsum(1.23, NA)
ee$pointsum(1.23, 1.24)
ee$pointsum(1.23, 1.24, tolerance = 0.1)

## ---------------------------------------------------------
## default evaluation policy with partial points
## (but without negative points overall)
ee &lt;- exams_eval()

## points that can be achieved are 1/3 (1/#true)
## or -1/2 (1/#false)
ee$pointvec("10101")

## obtain points achieved
ee$pointsum("10101", "10101")
ee$pointsum("10101", "10100")
ee$pointsum("10101", "11100")
ee$pointsum("10101", "01010")
ee$pointsum("10101", "00000")

## show individual answer check
ee$checkanswer("10101", "10101")
ee$checkanswer("10101", "10100")
ee$checkanswer("10101", "11100")
ee$checkanswer("10101", "01010")
ee$checkanswer("10101", "00000")

## numeric/string answers are not affected by partial=TRUE
ee$checkanswer(1.23, 1.23)
ee$pointsum(1.23, 1.23)
ee$checkanswer(1.23, 2.34)
ee$pointsum(1.23, 2.34)

## ---------------------------------------------------------
## evaluation policy with partial points
## (and with up to -25% negative points overall)
ee &lt;- exams_eval(partial = TRUE, negative = -0.25)

## points that can be achieved are 1/3 (1/#true)
## or -1/2 (1/#false)
ee$pointvec("10101")

## obtain points achieved
ee$pointsum("10101", "10101")
ee$pointsum("10101", "01010")
ee$pointsum("10101", "00000")

## show individual answer check
ee$checkanswer("10101", "10101")
ee$checkanswer("10101", "10100")
ee$checkanswer("10101", "11100")
ee$checkanswer("10101", "01010")
ee$checkanswer("10101", "00000")

## numeric/string answers are not affected by partial=TRUE
ee$pointsum(1.23, 1.23)
ee$pointsum(1.23, 2.34)
</code></pre>

<hr>
<h2 id='exams_skeleton'>Generate Skeleton for Exams Directory/Script</h2><span id='topic+exams_skeleton'></span><span id='topic+exams.skeleton'></span>

<h3>Description</h3>

<p>Generate a directory structure which contains &lsquo;<span class="file">demo-*.R</span>&rsquo;
scripts along with directories containing all available
demonstation exercise &lsquo;<span class="file">.Rnw</span>&rsquo; or &lsquo;<span class="file">.Rmd</span>&rsquo; files and necessary
template files (LaTeX, HTML, or XML).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exams_skeleton(dir = ".",
  type = c("num", "schoice", "mchoice", "string", "cloze"),
  writer = c("exams2html", "exams2pdf", "exams2moodle",
    "exams2qti12", "exams2qti21", "exams2arsnova", "exams2nops"),
  markup = "markdown", absolute = FALSE, encoding = "UTF-8")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams_skeleton_+3A_dir">dir</code></td>
<td>
<p>character with path to directory. The default is the current
working directory.</p>
</td></tr>
<tr><td><code id="exams_skeleton_+3A_type">type</code></td>
<td>
<p>character vector indicating types of exercises that should be included
in the &lsquo;<span class="file">demo.R</span>&rsquo; script. By default an example for each type of
exercise is included.</p>
</td></tr>
<tr><td><code id="exams_skeleton_+3A_writer">writer</code></td>
<td>
<p>character vector indicating the <code>exams2xyz</code> writer functions
that should be included in the &lsquo;<span class="file">demo.R</span>&rsquo; script. By default an example
for each type of writer is included.</p>
</td></tr>
<tr><td><code id="exams_skeleton_+3A_markup">markup</code></td>
<td>
<p>character vector indicating whether the example exercises
use <code>"latex"</code> markup (.Rnw files) or <code>"markdown"</code> markup
(.Rmd files).</p>
</td></tr>
<tr><td><code id="exams_skeleton_+3A_absolute">absolute</code></td>
<td>
<p>logical. Should the paths in the &lsquo;<span class="file">demo.R</span>&rsquo; script be
absolute? The default is to use relative paths.</p>
</td></tr>
<tr><td><code id="exams_skeleton_+3A_encoding">encoding</code></td>
<td>
<p>character, ignored. The encoding is always assumed to be UTF-8.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>exams_skeleton</code> (or equivalently <code>exams.skeleton</code>) creates a
directory with several &lsquo;<span class="file">demo-*.R</span>&rsquo; scripts illustrating the use of the various
<code>exams2xyz</code> interfaces. Subdirectories with copies of all demonstration
exercise <code>.Rnw</code> or <code>.Rmd</code> files and templates for different output formats
(LaTeX, HTML, or XML) are also created.
</p>
<p>This should provide a starting point for users wishing to start their own
collection of exercises with <span class="pkg">exams</span>.
</p>


<h3>Value</h3>

<p><code>exams_skeleton</code> returns a list of character vectors with the demo scripts
invisibly.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exams2html">exams2html</a></code>,
<code><a href="#topic+exams2pdf">exams2pdf</a></code>,
<code><a href="#topic+exams2moodle">exams2moodle</a></code>,
<code><a href="#topic+exams2qti12">exams2qti12</a></code>,
<code><a href="#topic+exams2qti21">exams2qti21</a></code>,
<code><a href="#topic+exams2arsnova">exams2arsnova</a></code>,
<code><a href="#topic+exams2nops">exams2nops</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## output directory (replace this with mydir &lt;- "/path/to/your/directory")
dir.create(mydir &lt;- tempfile())

## create exams skeleton with absolute paths in demo.R
exams_skeleton(dir = mydir, absolute = TRUE)

## look at created files
dir(mydir)
dir(mydir, recursive = TRUE)

## now open demo-all.R or any of the other demo-*.R scripts in your
## favorite R code editor and run the examples...
</code></pre>

<hr>
<h2 id='exams2arsnova'>Generation of Exam/Quiz Sessions in ARSnova Format</h2><span id='topic+exams2arsnova'></span><span id='topic+make_exams_write_arsnova'></span>

<h3>Description</h3>

<p>Interface for generating interactive sessions in the JSON format of the
audience response system ARSnova (not actively developed anymore).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exams2arsnova(file, n = 1L, dir = ".",
  name = "R/exams", sname = NULL, qname = NULL,
  quiet = TRUE, resolution = 100, width = 4, height = 4, svg = FALSE, encoding = "UTF-8",
  url = "https://arsnova.eu/api", sessionkey = NULL, jsessionid = NULL,
  active = TRUE, votingdisabled = FALSE, showstatistic = FALSE, showanswer = FALSE,
  abstention = TRUE, variant = "lecture", ssl.verifypeer = TRUE,
  fix_choice = TRUE, ...)

make_exams_write_arsnova(url = "https://arsnova.eu/api", sessionkey = NULL,
  jsessionid = NULL, name = "R/exams", sname = NULL, qname = NULL,
  active = TRUE, votingdisabled = FALSE, showstatistic = FALSE, showanswer = FALSE,
  abstention = TRUE, variant = "lecture", ssl.verifypeer = TRUE, fix_choice = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams2arsnova_+3A_file">file</code></td>
<td>
<p>character. A specification of a (list of) exercise files.</p>
</td></tr>
<tr><td><code id="exams2arsnova_+3A_n">n</code></td>
<td>
<p>integer. The number of copies to be compiled from <code>file</code>.</p>
</td></tr>
<tr><td><code id="exams2arsnova_+3A_dir">dir</code></td>
<td>
<p>character. The default is either display on the screen or
the current working directory.</p>
</td></tr>
<tr><td><code id="exams2arsnova_+3A_name">name</code></td>
<td>
<p>character. A name prefix for resulting exercises and RDS file.</p>
</td></tr>
<tr><td><code id="exams2arsnova_+3A_sname">sname</code></td>
<td>
<p>character. A vector of length 2 with the session name (maximum of 50
characters) and its abbreviation (maximum of 8 characters). Ignored if the <code>sessionkey</code>
of an existing session is supplied and otherwise copied by default from <code>name</code>.</p>
</td></tr>
<tr><td><code id="exams2arsnova_+3A_qname">qname</code></td>
<td>
<p>character. A vector of names for each question/exercise in <code>file</code>.
By default, the <code>name</code> is used.</p>
</td></tr>
<tr><td><code id="exams2arsnova_+3A_quiet">quiet</code></td>
<td>
<p>logical. Should output be suppressed when calling
<code><a href="#topic+xweave">xweave</a></code> and <code><a href="tools.html#topic+texi2dvi">texi2dvi</a></code>.</p>
</td></tr>
<tr><td><code id="exams2arsnova_+3A_resolution">resolution</code>, <code id="exams2arsnova_+3A_width">width</code>, <code id="exams2arsnova_+3A_height">height</code></td>
<td>
<p>numeric, passed to <code><a href="#topic+xweave">xweave</a></code>.</p>
</td></tr>
<tr><td><code id="exams2arsnova_+3A_svg">svg</code></td>
<td>
<p>logical. Should graphics be rendered in SVG or PNG (default)?</p>
</td></tr>
<tr><td><code id="exams2arsnova_+3A_encoding">encoding</code></td>
<td>
<p>character, ignored. The encoding is always assumed to be UTF-8.</p>
</td></tr>
<tr><td><code id="exams2arsnova_+3A_url">url</code>, <code id="exams2arsnova_+3A_sessionkey">sessionkey</code>, <code id="exams2arsnova_+3A_jsessionid">jsessionid</code></td>
<td>
<p>character specifying (1) the base URL of the ARSnova API,
(2) the 8-digit ARSnova session key, (3) the JSESSIONID cookie of an active ARSnova session.
If all are provided all questions are imported directly into the existing ARSnova session.
Otherwise, a JSON import file is generated.</p>
</td></tr>
<tr><td><code id="exams2arsnova_+3A_active">active</code></td>
<td>
<p>logical. Should the question be active (i.e., released for students)
or locked?</p>
</td></tr>
<tr><td><code id="exams2arsnova_+3A_votingdisabled">votingdisabled</code></td>
<td>
<p>logical. Should voting be disabled?</p>
</td></tr>
<tr><td><code id="exams2arsnova_+3A_showstatistic">showstatistic</code></td>
<td>
<p>logical. Should statistics be shown?</p>
</td></tr>
<tr><td><code id="exams2arsnova_+3A_showanswer">showanswer</code></td>
<td>
<p>logical. Should answers be shown?</p>
</td></tr>
<tr><td><code id="exams2arsnova_+3A_abstention">abstention</code></td>
<td>
<p>logical. Are abstentions allowed?</p>
</td></tr>
<tr><td><code id="exams2arsnova_+3A_variant">variant</code></td>
<td>
<p>character. Should the question be a <code>"lecture"</code> or
a <code>"preparation"</code> questions?</p>
</td></tr>
<tr><td><code id="exams2arsnova_+3A_ssl.verifypeer">ssl.verifypeer</code></td>
<td>
<p>logical. Should SSL certificates be validated when
connecting via https?</p>
</td></tr>
<tr><td><code id="exams2arsnova_+3A_fix_choice">fix_choice</code></td>
<td>
<p>logical. Should math markup be removed in single and multiple
choice lists? (This may be needed for older ARSnova versions where math
markup is rendered in the question itself but not the choice list.)</p>
</td></tr>
<tr><td><code id="exams2arsnova_+3A_...">...</code></td>
<td>
<p>arguments passed on to <code><a href="#topic+xexams">xexams</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>exams2arsnova</code> generates exams in the JSON format for ARSnova
using <code><a href="#topic+xexams">xexams</a></code>. It proceeds by (1) calling <code><a href="#topic+xweave">xweave</a></code>
on each exercise, (2) reading the resulting Markdown or LaTeX text, (3) transforming
the text to Markdown, and (4) embedding the Markdown text into the
JSON format for ARSnova (and optionally imports it into a running
ARSnova session).
</p>
<p>Since 2020 the development of ARSnova has been shifted to a new tool
called Particify and hence the server <a href="https://arsnova.eu/">https://arsnova.eu/</a> is not
hosted anymore. For an export function to Particify see
<code><a href="#topic+exams2particify">exams2particify</a></code>.
</p>
<p>For steps (1) and (2) the standard drivers in <code>xexams</code> are used.  
For step (3) a suitable transformation function is set up on the fly
using <code><a href="#topic+make_exercise_transform_pandoc">make_exercise_transform_pandoc</a></code>.
For step (4) a simple writer function is set up on the fly that
embeds the transformed Markdown code into a hard-coded JSON template
using <code><a href="RJSONIO.html#topic+toJSON">toJSON</a></code> and either writes a single JSON
file for each exam or imports these directly into an ARSnova session.
</p>
<p>When <code>url</code>, <code>sessionkey</code>, and <code>jsessionid</code> are all supplied,
<code><a href="RCurl.html#topic+curlPerform">curlPerform</a></code> is used to import tall questions directly into
the existing ARSnova session. Otherwise, a file is written to the disk and
then needs to be imported manually into an ARSnova server. This file
is either a JSON file for a whole new session (if <code>sessionkey</code> is
<code>NULL</code>, the default) or a CSV file with the questions only.
</p>


<h3>Value</h3>

<p>A list of exams as generated by <code><a href="#topic+xexams">xexams</a></code> is
returned invisibly.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exams2particify">exams2particify</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## load package and enforce par(ask = FALSE)
library("exams")
options(device.ask.default = FALSE)

## Not run: 
## exams2arsnova can either create text files with JSON data
exams2arsnova("tstat2")

## or directly post this to an active ARSnova session (for which the
## server URL, the 8-digit session key, and the JSESSIONID cookie are needed)
exams2arsnova("tstat2", url = "https://arsnova.eu/api",
  sessionkey = "49061284", jsessionid = "A5BEFDA4141816BB425F2204A602E4B3")

## End(Not run)
</code></pre>

<hr>
<h2 id='exams2blackboard'>Generation of Exams in Blackboard Format</h2><span id='topic+exams2blackboard'></span><span id='topic+make_itembody_blackboard'></span>

<h3>Description</h3>

<p>Automatic generation of exams in Blackboard format (which is
partially based on QTI 1.2).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  exams2blackboard(file, n = 1L, nsamp = NULL, dir = ".",
    name = NULL, quiet = TRUE, edir = NULL,
    tdir = NULL, sdir = NULL, verbose = FALSE, rds = FALSE,
    resolution = 100, width = 4, height = 4, encoding = "UTF-8",
    num = NULL, mchoice = NULL,
    schoice = mchoice, string = NULL, cloze = NULL,
    template = "blackboard",
    pdescription = "This is an item from an item pool.",
    tdescription = "This is today's test.",
    pinstruction = "Please answer the following question.",
    tinstruction = "Give an answer to each question.",
    maxattempts = 1, zip = TRUE, points = NULL,
    eval = list(partial = TRUE, negative = FALSE),
    base64 = FALSE, converter = NULL, seed = NULL, mathjax = NULL,
    fix_pre = TRUE, ...)

  make_itembody_blackboard(rtiming = FALSE, shuffle = FALSE,
    rshuffle = shuffle, minnumber = NULL, maxnumber = NULL,
    defaultval = NULL, minvalue = NULL, maxvalue = NULL,
    cutvalue = NULL, enumerate = TRUE, digits = NULL,
    tolerance = is.null(digits), maxchars = 12,
    eval = list(partial = TRUE, negative = FALSE),
    qti12 = FALSE, mathjax = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams2blackboard_+3A_file">file</code></td>
<td>
<p>character. A specification of a (list of) exercise files.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_n">n</code></td>
<td>
<p>integer. The number of copies to be compiled from <code>file</code>.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_nsamp">nsamp</code></td>
<td>
<p>integer. The number(s) of exercise files sampled from each
list element of <code>file</code>. Sampling without replacement is used
if possible. (Only if some element of <code>nsamp</code> is larger than
the length of the corresponding element in <code>file</code>, sampling
with replacement is used.)</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_dir">dir</code></td>
<td>
<p>character. The default is the current working directory.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_name">name</code></td>
<td>
<p>character. A name prefix for resulting exercises and ZIP file.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_quiet">quiet</code></td>
<td>
<p>logical. Should output be suppressed when calling
<code><a href="#topic+xweave">xweave</a></code>?</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_edir">edir</code></td>
<td>
<p>character specifying the path of the directory (along with its
sub-directories) in which the files in <code>file</code> are stored
(see also <code><a href="#topic+xexams">xexams</a></code>).</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_tdir">tdir</code></td>
<td>
<p>character specifying a temporary directory, by default
this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>. Note that this
is cleaned up (i.e., existing files are deleted) and only certain
temporary files are preserved.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_sdir">sdir</code></td>
<td>
<p>character specifying a directory for storing supplements, by
default this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_verbose">verbose</code></td>
<td>
<p>logical. Should information on progress of exam generation
be reported?</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_rds">rds</code></td>
<td>
<p>logical indicating whether the return list should also be
saved as an RDS data file.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_resolution">resolution</code>, <code id="exams2blackboard_+3A_width">width</code>, <code id="exams2blackboard_+3A_height">height</code></td>
<td>
<p>numeric. Options for rendering PNG
graphics passed to <code><a href="#topic+xweave">xweave</a></code>.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_encoding">encoding</code></td>
<td>
<p>character, ignored. The encoding is always assumed to be UTF-8.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_num">num</code></td>
<td>
<p>function or named list applied to numerical (i.e., type <code>num</code>)
questions. If <code>num</code> is a function, <code>num</code> will be used
for generating the item body of the question, see function <code>make_itembody_blackboard()</code>.
If <code>num</code> is a named list, these arguments will be passed to function
<code>make_itembody_blackboard()</code>.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_mchoice">mchoice</code>, <code id="exams2blackboard_+3A_schoice">schoice</code>, <code id="exams2blackboard_+3A_string">string</code>, <code id="exams2blackboard_+3A_cloze">cloze</code></td>
<td>
<p>function or named list applied to multiple choice,
single choice, string, and cloze questions (i.e., type <code>mchoice</code>, <code>schoice</code>,
<code>string</code>, and <code>cloze</code>), respectively. See argument <code>num</code> for more details.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_template">template</code></td>
<td>
<p>character. The IMS QTI 1.2 or 2.1 template that should be used. Currently,
the package provides <code>"blackboard.xml"</code>.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_pdescription">pdescription</code></td>
<td>
<p>character. Description (of length 1) of the item pool (i.e., the set of copies).</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_tdescription">tdescription</code></td>
<td>
<p>character. Description (of length 1) of the overall assessment (i.e., exam).</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_pinstruction">pinstruction</code></td>
<td>
<p>character. Instruction (of length 1) for the item pool (i.e., set of copies).</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_tinstruction">tinstruction</code></td>
<td>
<p>character. Instruction (of length 1) for the overall assessment (i.e., exam).</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_maxattempts">maxattempts</code></td>
<td>
<p>integer. The maximum attempts for one question, may also be set to
<code>Inf</code>.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_zip">zip</code></td>
<td>
<p>logical. Should the resulting XML file (plus supplements) be zipped?</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_points">points</code></td>
<td>
<p>integer. How many points should be assigned to each exercise? Note that this
argument overules any exercise points that are provided within an <code>expoints</code> tag
in the Rnw/Rmd exercise file. The vector of points supplied is expanded to the number of exercises in
the exam.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_eval">eval</code></td>
<td>
<p>named list, specifies the settings for the evaluation policy, see function
<code><a href="#topic+exams_eval">exams_eval</a></code>.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_base64">base64</code></td>
<td>
<p>logical. Should supplementary files be embedded using Base 64 coding?
Argument <code>base64</code> may also be a character vector of file suffixes that should be encoded, e.g.
<code>base64 = c("png", "rda")</code> will only encode PNG images and binary <code>.rda</code> files.
If set to <code>NULL</code> only image files will be encoded.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_converter">converter</code>, <code id="exams2blackboard_+3A_...">...</code></td>
<td>
<p>arguments passed on to <code>make_exercise_transform_html</code>.
The default for <code>converter</code> is set to <code>"ttm"</code> unless there are Rmd
exercises in <code>file</code> where <code>"pandoc"</code> is used.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_seed">seed</code></td>
<td>
<p>integer matrix or logical. Either <code>NULL</code> (default), logical, or a
matrix of random seeds for each possible exercise to be set prior to calling
<code>driver@sweave</code>. If <code>NULL</code> no random seeds are set. If a matrix,
the number of rows must be <code>n</code> and the number of columns must
correspond to <code>unlist(file)</code>. If <code>TRUE</code> a suitable matrix of seeds
is sampled.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_mathjax">mathjax</code></td>
<td>
<p>logical. Should the JavaScript from <a href="https://www.MathJax.org/">https://www.MathJax.org/</a>
be included for rendering mathematical formulas? By default <code>mathjax = FALSE</code>
unless <code>converter = "pandoc-mathjax"</code> is used. However, also for the default
converters (producing MathML output) <code>mathjax = TRUE</code> can be used, enabling
rendering of mathematical equations in browsers without native MathML support
(like Chrome/Chromium).</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_fix_pre">fix_pre</code></td>
<td>
<p>logical. Should the HTML <code>&lt;pre&gt;</code> environment for rendering verbatim
output be replaced by <code>&lt;code&gt;</code> tags? This is necessary in classical Blackboard
which does not render <code>&lt;pre&gt;</code> correctly.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_rtiming">rtiming</code>, <code id="exams2blackboard_+3A_shuffle">shuffle</code>, <code id="exams2blackboard_+3A_rshuffle">rshuffle</code>, <code id="exams2blackboard_+3A_minnumber">minnumber</code>, <code id="exams2blackboard_+3A_maxnumber">maxnumber</code>, <code id="exams2blackboard_+3A_defaultval">defaultval</code>, <code id="exams2blackboard_+3A_minvalue">minvalue</code>, <code id="exams2blackboard_+3A_maxvalue">maxvalue</code></td>
<td>
<p>arguments used for IMS QTI 1.2 item construction, for details see the XML
specification (see IMS Global Learning Consortium, Inc. 2012), especially Section 4.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_cutvalue">cutvalue</code></td>
<td>
<p>numeric. The cutvalue at which the exam is passed.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_enumerate">enumerate</code></td>
<td>
<p>logical. Insert potential solutions in enumerated list?</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_digits">digits</code></td>
<td>
<p>integer. How many digits should be used for <code>num</code> exercises?</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_tolerance">tolerance</code></td>
<td>
<p>logical. Should tolerance intervals be used for checking if the supplied
<code>num</code> answer/number is correct? The default is to use tolerance intervals if <code>digits = NULL</code>.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_maxchars">maxchars</code></td>
<td>
<p>numeric. Lower bound for the number of characters in fill-in-blank
fields. The actual number of characters is selected as the maximum number of
characters of this value and the actual solution.</p>
</td></tr>
<tr><td><code id="exams2blackboard_+3A_qti12">qti12</code></td>
<td>
<p>logical. For reverse compability to plain QTI 1.2 XML format.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Blackboard employs an XML format that essentially uses the Question &amp; Test
Interoperability (QTI) standard, version 1.2, see IMS Global Learning
Consortium, Inc. (2012). However, as this deviates from the plain QTI 1.2
standard in several places, the <code><a href="#topic+exams2qti12">exams2qti12</a></code> cannot be used
directly. Instead, <code>exams2blackboard</code> is a new interface that is likely
to be improved in future versions.
</p>
<p><code>exams2blackboard</code> produces a <code>.zip</code> file that may be uploaded into
Blackboard. This includes the final XML file of the exam/assessment as well as
possible supplement folders that include images, data sets etc. used for the
exam.  After uploading the test into Blackboard, the material will appear
under &lsquo;Course Tools&rsquo;: the test will be available in &lsquo;Tests&rsquo;,
and each pool within the test  will also appear in &lsquo;Pools&rsquo;.
</p>
<p><code>exams2blackboard</code> proceeds by (1) calling <code><a href="#topic+xweave">xweave</a></code> on
each exercise, (2) reading the resulting LaTeX code, (3) transforming the
LaTeX code to HTML, and (4) embedding the HTML code in a XML file using
Blackboard's QTI standards for assessments and question items. For steps (1)
and (2) the standard drivers in <code>xexams</code> are used. In step (3), a
suitable transformation function is set up on the fly using
<code>make_exercise_transform_html</code>, see also the details section in
<code><a href="#topic+exams2html">exams2html</a></code>. For step (4), the function will cycle through all
questions and exams to generate the final XML file in the Blackboard QTI
standard. Therefore, each question will be included in the XML as one section.
The replicates of each question will be written as question items of the
section.
</p>
<p>The function uses the XML template for Blackboard's QTI standards for
assessments and items to generate the exam (per default, this is the XML file
<code>blackboard.xml</code> provided in the <code>xml</code> folder of this package). The
assessment template must provide one section including one item.
<code>exams2blackboard</code> will then use the single item template to generate all
items, as well as the assessment and section specifications set within the
template.
</p>
<p>The default template will generate exams/assessments that sample one replicate
of a question/item for each section. The usual procedure in exam/assessment
generation would be to simply copy &amp; paste the XML template of the package
and adapt it to the needs of the user. Note that all specifiers that have a
leading <code>##</code> in the XML template will be replaced by suitable code in
<code>exams2blackboard</code> and should always be provided in the template. I.e.,
the user may add additional tags to the XML template or modify certain
specifications, like the number of replicates/items that should be sampled for
each section etc.
</p>
<p>Per default, the individual question/item bodies are generated by function
<code>make_itembody_blackboard</code>, i.e., <code>make_itembody_blackboard</code> checks
the type of the question and will produce suitable XML code. Note that for
each question type, either the arguments of <code>make_itembody_blackboard</code>
may be set within <code>num</code>, <code>mchoice</code>, <code>schoice</code> and <code>string</code>
in <code>exams2blackboard</code>, by providing a named list of specifications that
should be used, or for each questiontype, a function that produces the item
body XML code may be provided to <code>num</code>, <code>mchoice</code>, <code>schoice</code>
and <code>string</code>. E.g., <code>mchoice = list(shuffle = TRUE)</code> will force only
multiple choice questions to have a shuffled answerlist.
</p>
<p>Note that in Blackboard <code>cloze</code> items are not officially supported, and
hence this type of item is  not supported in the current version of
<code>exams2blackboard</code> either. It is currently investigated if a  workaround
may be implemented to allow for <code>cloze</code> items.  
</p>


<h3>Value</h3>

<p><code>exams2blackboard</code> returns a list of exams as generated by <code><a href="#topic+xexams">xexams</a></code>.
</p>
<p><code>make_itembody_blackboard</code> returns a function that generates the XML code
for the itembody tag in Blackboard's version of the IMS QTI 1.2 format.
</p>


<h3>References</h3>

<p>Blackboard, Inc. (2016). <em>Blackboard Help: Question types</em>.
<a href="https://help.blackboard.com/Learn/Instructor/Ultra/Tests_Pools_Surveys/Question_Types">https://help.blackboard.com/Learn/Instructor/Ultra/Tests_Pools_Surveys/Question_Types</a>
</p>
<p>IMS Global Learning Consortium, Inc. (2012).
<em>IMS Question &amp; Test Interoperability: ASI XML Binding Specification Final Specification Version 1.2</em>.
<a href="https://www.imsglobal.org/question/qtiv1p2/imsqti_asi_bindv1p2.html">https://www.imsglobal.org/question/qtiv1p2/imsqti_asi_bindv1p2.html</a>
</p>
<p>Zeileis A, Umlauf N, Leisch F (2014).
Flexible Generation of E-Learning Exams in R: Moodle Quizzes, OLAT Assessments, and Beyond.
<em>Journal of Statistical Software</em>, <b>58</b>(1), 1&ndash;36.
<a href="https://doi.org/10.18637/jss.v058.i01">doi:10.18637/jss.v058.i01</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exams2qti12">exams2qti12</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## load package and enforce par(ask = FALSE)
library("exams")
options(device.ask.default = FALSE)

## define an exams (= list of exercises)
myexam &lt;- list(
  "boxplots.Rmd",
  "ttest.Rmd",
  "anova.Rmd",
  "scatterplot.Rmd",
  "relfreq.Rmd"
)

## output directory
dir.create(mydir &lt;- tempfile())

## generate .zip with Blackboard exam in temporary directory
exams2blackboard(myexam, n = 3, dir = mydir)
dir(mydir)
</code></pre>

<hr>
<h2 id='exams2canvas'>Generation of Exams for Canvas</h2><span id='topic+exams2canvas'></span>

<h3>Description</h3>

<p>Automatic generation of exams in QTI 1.2 with some tweaks
(still under development) for the learning management system Canvas.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  exams2canvas(file, n = 1L, dir = ".", name = "canvasquiz",
    maxattempts = 1, duration = NULL, points = NULL,
    converter = NULL, template = "canvas_qti12.xml", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams2canvas_+3A_file">file</code></td>
<td>
<p>character. A specification of a (list of) exercise files.</p>
</td></tr>
<tr><td><code id="exams2canvas_+3A_n">n</code></td>
<td>
<p>integer. The number of copies to be compiled from <code>file</code>.</p>
</td></tr>
<tr><td><code id="exams2canvas_+3A_dir">dir</code></td>
<td>
<p>character. The default is the current working directory.</p>
</td></tr>
<tr><td><code id="exams2canvas_+3A_name">name</code></td>
<td>
<p>character. A name prefix for resulting exercises and ZIP file.</p>
</td></tr>
<tr><td><code id="exams2canvas_+3A_maxattempts">maxattempts</code></td>
<td>
<p>integer. The maximum attempts for one question
(must be smaller than <code>100000</code>).</p>
</td></tr>
<tr><td><code id="exams2canvas_+3A_duration">duration</code></td>
<td>
<p>integer. Set the duration of the exam in minutes.</p>
</td></tr>
<tr><td><code id="exams2canvas_+3A_points">points</code></td>
<td>
<p>integer. How many points should be assigned to each exercise? Note that this
argument overules any exercise points that are provided within an <code>"\expoints{}"</code> tag
in the <code>.Rnw</code> file. The vector of points supplied is expanded to the number of exercises in
the exam.</p>
</td></tr>
<tr><td><code id="exams2canvas_+3A_converter">converter</code></td>
<td>
<p>character passed on to <code><a href="#topic+make_exercise_transform_html">make_exercise_transform_html</a></code>,
indicating the type of converter from LaTeX/Markdown to HTML. Currently,
Canvas requires HTML with MathML. Hence, if there are Markdown-based .Rmd
exercises, the <code>converter</code> needs to be <code>"pandoc-mathml"</code> (or
equivalently <code>"pandoc"</code>). For only LaTeX-based .Rnw exercises <code>"ttm"</code>
can be used as an alternative and is currently the default.</p>
</td></tr>
<tr><td><code id="exams2canvas_+3A_template">template</code></td>
<td>
<p>character. The IMS QTI 1.2 template that should be used.</p>
</td></tr>
<tr><td><code id="exams2canvas_+3A_...">...</code></td>
<td>
<p>arguments passed on to <code><a href="#topic+exams2qti12">exams2qti12</a></code>.
The arguments <code>base64</code> and <code>eval</code> cannot be modified but are
hard-coded internally (for details see below).</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>exams2canvas</code> is a convenience interface to <code><a href="#topic+exams2qti12">exams2qti12</a></code>
for generating QTI 1.2 with some small tweaks for Canvas
(<a href="https://www.instructure.com/canvas">https://www.instructure.com/canvas</a>). The supported exercise types at the
moment are num, schoice, mchoice, and string (but not cloze, yet). It is still under
development and may change in future versions. Please report any problems to the package
maintainer.
</p>
<p>The Canvas-specific tweaks include:
</p>

<ul>
<li><p> Canvas necessitates a <code>converter</code> that produces HTML plus MathML.
Thus, <code>"pandoc-mathml"</code> (or equivalently <code>"pandoc"</code>) can be used
or alternatively <code>"ttm"</code> for exams with only R/LaTeX .Rnw exercises.
</p>
</li>
<li><p> Supplementary files (images, data, ...) must be embedded without Base 64
encoding. Thus, <code>base64 = FALSE</code> is hard-coded internally in <code>exams2canvas</code>.
</p>
</li>
<li><p> Multiple-choice exercises (referred to as multiple answer questions in Canvas)
are always evaluated (aka scored) with partial credits in Canvas. Therefore,
<code>eval = list(partial = TRUE, negative = FALSE)</code> is hard-coded internally
in <code>exams2canvas</code>. Negative points are not supported in Canvas.
</p>
</li>
<li><p> The QTI XML file requires a few special tags which are enforced through
<code>flavor = "canvas"</code> in <code>exams2qti12</code>.
</p>
</li></ul>

<p><em>Technical note:</em> For multiple-choice questions the QTI XML file produced by
<code>exams2canvas</code> appears to encode an &ldquo;all-or-nothing&rdquo; scheme without partial
credits (i.e., <code>partial = FALSE</code>). However, this is necessary for Canvas to recognize
the answer alternatives correctly. Despite this, Canvas always applies partial-credit
evaluation (as explained above).
</p>


<h3>Value</h3>

<p><code>exams2canvas</code> returns a list of exams as generated by <code><a href="#topic+xexams">xexams</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exams2qti12">exams2qti12</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## load package and enforce par(ask = FALSE)
library("exams")
options(device.ask.default = FALSE)

## define an exams (= list of exercises)
myexam &lt;- c(
  "boxplots.Rmd",
  "tstat.Rmd",
  "ttest.Rmd",
  "regression.Rmd",
  "relfreq.Rmd"
)

## output directory
dir.create(mydir &lt;- tempfile())

## generate .zip with Canvas test in temporary directory
exams2canvas(myexam, n = 3, dir = mydir)
dir(mydir)

</code></pre>

<hr>
<h2 id='exams2grasple'>Generation of Exercises in Grasple Format</h2><span id='topic+exams2grasple'></span><span id='topic+make_exams_write_grasple'></span>

<h3>Description</h3>

<p>Automatic generation of exercises in JSON format for the e-learning platform Grasple.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exams2grasple(file, n = 1L, dir = ".", name = NULL, quiet = TRUE, 
  resolution = 100, width = 4, height = 4, svg = FALSE, encoding = "UTF-8",
  converter = "pandoc-mathjax", zip = TRUE, use_solutionlist = TRUE, 
  license_name = NULL, license_description = NULL, license_value = NULL, 
  license_link = NULL, ...)

make_exams_write_grasple(name = NULL, license_name = NULL, 
  license_description = NULL, license_value = NULL, license_link = NULL, 
  zip = TRUE, use_solutionlist = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams2grasple_+3A_file">file</code></td>
<td>
<p>character. A specification of a (list of) exercise files.</p>
</td></tr>
<tr><td><code id="exams2grasple_+3A_n">n</code></td>
<td>
<p>integer. The number of copies to be compiled from <code>file</code>.</p>
</td></tr>
<tr><td><code id="exams2grasple_+3A_dir">dir</code></td>
<td>
<p>character. The default is the current working directory.</p>
</td></tr>
<tr><td><code id="exams2grasple_+3A_name">name</code></td>
<td>
<p>character. A name prefix for resulting ZIP file.</p>
</td></tr>
<tr><td><code id="exams2grasple_+3A_quiet">quiet</code></td>
<td>
<p>logical. Should output be suppressed when calling
<code><a href="#topic+xweave">xweave</a></code> and <code><a href="tools.html#topic+texi2dvi">texi2dvi</a></code>.</p>
</td></tr>
<tr><td><code id="exams2grasple_+3A_resolution">resolution</code>, <code id="exams2grasple_+3A_width">width</code>, <code id="exams2grasple_+3A_height">height</code></td>
<td>
<p>numeric, passed to <code><a href="#topic+xweave">xweave</a></code>.</p>
</td></tr>
<tr><td><code id="exams2grasple_+3A_svg">svg</code></td>
<td>
<p>logical. Should graphics be rendered in SVG or PNG (default)?</p>
</td></tr>
<tr><td><code id="exams2grasple_+3A_encoding">encoding</code></td>
<td>
<p>character, ignored. The encoding is always assumed to be UTF-8.</p>
</td></tr>
<tr><td><code id="exams2grasple_+3A_converter">converter</code></td>
<td>
<p>character passed on to <code><a href="#topic+make_exercise_transform_html">make_exercise_transform_html</a></code>,
indicating the type of converter from LaTeX/Markdown to the specific requirements in 
Grasple. To accomplish this the converter must be set to <code>"pandoc-mathjax"</code>.</p>
</td></tr>  
<tr><td><code id="exams2grasple_+3A_zip">zip</code></td>
<td>
<p>logical. Should the resulting JSON file(s) be zipped?</p>
</td></tr>   
<tr><td><code id="exams2grasple_+3A_use_solutionlist">use_solutionlist</code></td>
<td>
<p>logical. By default it is assumed that for schoice items 
the solutionlist contains separate feedback for each option. If set to 
<code>FALSE</code> the general feedback is placed in the solutionlist for each option
separately.</p>
</td></tr>
<tr><td><code id="exams2grasple_+3A_license_name">license_name</code>, <code id="exams2grasple_+3A_license_description">license_description</code>, <code id="exams2grasple_+3A_license_value">license_value</code>, <code id="exams2grasple_+3A_license_link">license_link</code></td>
<td>
<p>character, 
arguments for specifying the copyright license for the exercise(s).
Defaults to &quot;Non-explicit license&quot;.</p>
</td></tr>
<tr><td><code id="exams2grasple_+3A_...">...</code></td>
<td>
<p>arguments passed on to <code><a href="#topic+xexams">xexams</a></code>.</p>
</td></tr> 
</table>


<h3>Details</h3>

<p><code>exams2grasple</code> generates exercises in the JSON format for Grasple
using <code><a href="#topic+xexams">xexams</a></code>. It proceeds by (1) calling <code><a href="#topic+xweave">xweave</a></code>
on each exercise, (2) reading the resulting Markdown or LaTeX text, (3) transforming
the text to Markdown, and (4) embedding the Markdown text into the
JSON format for Grasple.
</p>
<p>For steps (1) and (2) the standard drivers in <code>xexams</code> are used.
For step (3) a suitable transformation function is set up on the fly
using <code><a href="#topic+make_exercise_transform_html">make_exercise_transform_html</a></code>.
For step (4) a simple writer function is set up on the fly that
embeds the transformed Markdown code into a hard-coded JSON template
using <code><a href="RJSONIO.html#topic+toJSON">toJSON</a></code> and writes a JSON
file for each exercise and by default bundles the collection in a ZIP file.
</p>
<p>Note that Grasple only officially supports <code>schoice</code> and <code>num</code>
items, and hence other item types are not supported in the current version of
<code>exams2grasple</code> either. If the function is used for other types the execution 
of the function is stopped and a warning is issued.
</p>
<p>For <code>num</code> exercises the content as specified under the solution environment
in the Rmd/Rnw files is presented as feedback in Grasple. By contrast, for <code>schoice</code>
items Grasple requires separate feedback for each option. This can be accomplished in two ways.
First (the default), by putting unique feedback for each option in the items of the 
solutionlist in the Rmd/Rnw file. Second by putting a general feedback in the solution 
environment and setting <code>use_solutionlist</code> to <code>FALSE</code>, which creates a 
solutionlist with this general feedback for each option.
</p>
<p>Within the HTML of Grasple exercises, LaTeX elements must be embedded within \\(\\) blocks. 
After conversion using <code>"pandoc-mathjax"</code> the function employs further tweaks to meet 
Grasple's requirements. Also, in case of displaying multiline equations 
Grasple only allows for using the <code>align</code> environment. Environments <code>eqnarray</code> 
and <code>eqnarray*</code> are automatically converted into <code>align</code>. It is uncertain how 
pandoc deals with other multiline environments.
</p>


<h3>Value</h3>

<p>A list of exercises as generated by <code><a href="#topic+xexams">xexams</a></code> is
returned invisibly.
</p>


<h3>References</h3>

<p>Grasple - Open Education (2022). <em>Format for Open Interactive Math Exercises</em>. <a href="https://github.com/grasple/open-format">https://github.com/grasple/open-format</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>## load package and enforce par(ask = FALSE)
library("exams")
options(device.ask.default = FALSE)

## define a list of exercises
myexam &lt;- list(
  "fruit.Rmd",
  "tstat.Rmd",
  "regression.Rmd",
  "swisscapital.Rmd",
  "tstat2.Rmd",
  "dist3.Rmd"        
)

## output directory
dir.create(mydir &lt;- tempfile())

## Not run: 
## generate .zip with Grasple exercises and use general feedback
exams2grasple(myexam, dir = mydir, use_solutionlist = FALSE)
dir(mydir)

## End(Not run)
</code></pre>

<hr>
<h2 id='exams2html'>Generation of Exams in HTML Format</h2><span id='topic+exams2html'></span><span id='topic+make_exams_write_html'></span><span id='topic+make_exercise_transform_html'></span>

<h3>Description</h3>

<p>Automatic generation of exams in HTML format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  exams2html(file, n = 1L, nsamp = NULL, dir = ".", template = "plain.html",
    name = NULL, quiet = TRUE, edir = NULL, tdir = NULL, sdir = NULL, verbose = FALSE,
    rds = FALSE, question = "&lt;h4&gt;Question&lt;/h4&gt;", solution = "&lt;h4&gt;Solution&lt;/h4&gt;",
    mathjax = NULL, resolution = 100, width = 4, height = 4, svg = FALSE,
    encoding = "UTF-8", envir = NULL, converter = NULL, seed = NULL,
    exshuffle = NULL, ...)

  make_exercise_transform_html(converter = c("ttm", "tth", "pandoc", "tex2image"),
    base64 = TRUE, options = NULL, ...)

  make_exams_write_html(template = "plain", name = NULL,
    question = "&lt;h4&gt;Question&lt;/h4&gt;", solution = "&lt;h4&gt;Solution&lt;/h4&gt;",
    mathjax = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams2html_+3A_file">file</code></td>
<td>
<p>character. A specification of a (list of) exercise files.</p>
</td></tr>
<tr><td><code id="exams2html_+3A_n">n</code></td>
<td>
<p>integer. The number of copies to be compiled from <code>file</code>.</p>
</td></tr>
<tr><td><code id="exams2html_+3A_nsamp">nsamp</code></td>
<td>
<p>integer. The number(s) of exercise files sampled from each
list element of <code>file</code>. Sampling without replacement is used
if possible. (Only if some element of <code>nsamp</code> is larger than
the length of the corresponding element in <code>file</code>, sampling
with replacement is used.)</p>
</td></tr>
<tr><td><code id="exams2html_+3A_dir">dir</code></td>
<td>
<p>character specifying the output directory (default:
current working directory). If only a single HTML file is produced
and no <code>dir</code> is explicitly specified, the file is displayed in the
browser rather than saved in <code>dir</code>.</p>
</td></tr>
<tr><td><code id="exams2html_+3A_template">template</code></td>
<td>
<p>character. A specification of a HTML template.</p>
</td></tr>
<tr><td><code id="exams2html_+3A_name">name</code></td>
<td>
<p>character. A name prefix for resulting exercises.</p>
</td></tr>
<tr><td><code id="exams2html_+3A_quiet">quiet</code></td>
<td>
<p>logical. Should output be suppressed when calling
<code><a href="#topic+xweave">xweave</a></code>?</p>
</td></tr>
<tr><td><code id="exams2html_+3A_edir">edir</code></td>
<td>
<p>character specifying the path of the directory (along with its
sub-directories) in which the files in <code>file</code> are stored
(see also <code><a href="#topic+xexams">xexams</a></code>).</p>
</td></tr>
<tr><td><code id="exams2html_+3A_tdir">tdir</code></td>
<td>
<p>character specifying a temporary directory, by default
this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>. Note that this
is cleaned up (i.e., existing files are deleted) and only certain
temporary files are preserved.</p>
</td></tr>
<tr><td><code id="exams2html_+3A_sdir">sdir</code></td>
<td>
<p>character specifying a directory for storing supplements, by
default this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>.</p>
</td></tr>
<tr><td><code id="exams2html_+3A_verbose">verbose</code></td>
<td>
<p>logical. Should information on progress of exam generation
be reported?</p>
</td></tr>
<tr><td><code id="exams2html_+3A_rds">rds</code></td>
<td>
<p>logical indicating whether the return list should also be
saved as an RDS data file.</p>
</td></tr>
<tr><td><code id="exams2html_+3A_question">question</code></td>
<td>
<p>character or logical. Should the question be included in the HTML
output? If <code>question</code> is a character it will be used as a header for resulting questions.
Argument <code>question</code> may also be a vector that controls the output for the templates.</p>
</td></tr>
<tr><td><code id="exams2html_+3A_solution">solution</code></td>
<td>
<p>character or logical, see argument <code>question</code>.</p>
</td></tr>
<tr><td><code id="exams2html_+3A_mathjax">mathjax</code></td>
<td>
<p>logical. Should the JavaScript from <a href="https://www.MathJax.org/">https://www.MathJax.org/</a>
be included for rendering mathematical formulas? By default <code>mathjax = FALSE</code>
unless <code>converter = "pandoc-mathjax"</code>.</p>
</td></tr>
<tr><td><code id="exams2html_+3A_resolution">resolution</code>, <code id="exams2html_+3A_width">width</code>, <code id="exams2html_+3A_height">height</code></td>
<td>
<p>numeric. Options for rendering PNG (or SVG)
graphics passed to <code><a href="#topic+xweave">xweave</a></code>.</p>
</td></tr>
<tr><td><code id="exams2html_+3A_svg">svg</code></td>
<td>
<p>logical. Should graphics be rendered in SVG or PNG (default)?</p>
</td></tr>
<tr><td><code id="exams2html_+3A_encoding">encoding</code></td>
<td>
<p>character, ignored. The encoding is always assumed to be UTF-8.</p>
</td></tr>
<tr><td><code id="exams2html_+3A_envir">envir</code></td>
<td>
<p>argument passed to <code><a href="#topic+xweave">xweave</a></code> (which passes
it to <code><a href="knitr.html#topic+knit">knit</a></code>).</p>
</td></tr>
<tr><td><code id="exams2html_+3A_base64">base64</code></td>
<td>
<p>logical. Should supplementary files be embedded using Base 64 coding?
Argument <code>base64</code> may also be a character vector of file suffixes that should be encoded, e.g.
<code>base64 = c("png", "rda")</code> will only encode PNG images and binary <code>.rda</code> files.
If set to <code>NULL</code> only image files will be encoded.</p>
</td></tr>
<tr><td><code id="exams2html_+3A_converter">converter</code>, <code id="exams2html_+3A_...">...</code></td>
<td>
<p>arguments passed on to <code>make_exercise_transform_html</code>.
The default for <code>converter</code> is set to <code>"ttm"</code> unless there are Rmd
exercises in <code>file</code> where <code>"pandoc"</code> is used.</p>
</td></tr>
<tr><td><code id="exams2html_+3A_seed">seed</code></td>
<td>
<p>integer matrix or logical. Either <code>NULL</code> (default), logical, or a
matrix of random seeds for each possible exercise to be set prior to calling
<code>driver@sweave</code>. If <code>NULL</code> no random seeds are set. If a matrix,
the number of rows must be <code>n</code> and the number of columns must
correspond to <code>unlist(file)</code>. If <code>TRUE</code> a suitable matrix of seeds
is sampled.</p>
</td></tr>
<tr><td><code id="exams2html_+3A_exshuffle">exshuffle</code></td>
<td>
<p>logical or integer. If the <code>exshuffle</code>
argument is non-<code>NULL</code> it is used to overrule the <code>exshuffle</code>
tag from the <code>file</code> (e.g., <code>exshuffle = FALSE</code> can be used
to keep all available answers without permutation).</p>
</td></tr>
<tr><td><code id="exams2html_+3A_options">options</code></td>
<td>
<p>list of options to be passed on to
<code><a href="rmarkdown.html#topic+pandoc_convert">pandoc_convert</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>exams2html</code> generates exams in a very simple HTML format
using <code><a href="#topic+xexams">xexams</a></code>. It proceeds by (1) calling <code><a href="#topic+xweave">xweave</a></code>
on each exercise, (2) reading the resulting LaTeX code, (3) transforming
the LaTeX code to HTML, and (4) embedding the HTML code in a template
(a simple and plain template is used by default).
</p>
<p>For steps (1) and (2) the standard drivers in <code>xexams</code> are used.
</p>
<p>For step (3) a suitable transformation function is set up on the fly
using <code>make_exercise_transform_html</code>. This transforms the
LaTeX code in <code>question</code>/<code>questionlist</code> and
<code>solution</code>/<code>solutionlist</code> by leveraging one of four
functions: <code><a href="tth.html#topic+ttm">ttm</a></code> produces HTML with MathML
for mathematical formulas, <code><a href="tth.html#topic+tth">tth</a></code> produces
plain HTML that aims to emulate mathematical formulas,
<code><a href="rmarkdown.html#topic+pandoc_convert">pandoc_convert</a></code> employs pandoc offering different
options for handling formulas, and <code><a href="#topic+tex2image">tex2image</a></code> runs
LaTeX and turns the result into a single image. In all cases, images
can either be stored in supplementary files or embedded directly in Base 64 coding.
</p>
<p>For step (4) a simple writer function is set up on the fly that
embeds the transformed HTML code into a template and
writes a single HTML file for each exam.
</p>


<h3>Value</h3>

<p><code>exams2html</code> returns a list of exams as generated by <code><a href="#topic+xexams">xexams</a></code>.
</p>
<p><code>make_exercise_transform_html</code> returns a function that is suitable for being
supplied as <code>driver$transform</code> to <code><a href="#topic+xexams">xexams</a></code>.
</p>
<p><code>make_exams_write_html</code> returns a function that is suitable for being
supplied as <code>driver$write</code> to <code><a href="#topic+xexams">xexams</a></code>.
</p>


<h3>References</h3>

<p>Zeileis A, Umlauf N, Leisch F (2014).
Flexible Generation of E-Learning Exams in R: Moodle Quizzes, OLAT Assessments, and Beyond.
<em>Journal of Statistical Software</em>, <b>58</b>(1), 1&ndash;36.
<a href="https://doi.org/10.18637/jss.v058.i01">doi:10.18637/jss.v058.i01</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+xexams">xexams</a></code>,
<code><a href="tth.html#topic+ttm">ttm</a></code>,
<code><a href="tth.html#topic+tth">tth</a></code>,
<code><a href="rmarkdown.html#topic+pandoc_convert">pandoc_convert</a></code>,
<code><a href="#topic+tex2image">tex2image</a></code>,
<code><a href="utils.html#topic+browseURL">browseURL</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## load package and enforce par(ask = FALSE)
options(device.ask.default = FALSE)

if(interactive() &amp;&amp; requireNamespace("png")) {
## compile a single random exam (displayed in the browser)
exams2html(list(
  "boxplots.Rmd",
  c("tstat.Rmd", "ttest.Rmd", "confint.Rmd"),
  c("regression.Rmd", "anova.Rmd"),
  "scatterplot.Rmd",
  "relfreq.Rmd"
))

## various versions of displaying mathematical formulae

## via MathML (displayed correctly in MathML-aware browsers, e.g. Firefox)
exams2html("tstat")

## via MathML + MathJax (should work in all major browsers,
## note the display options you get when right-clicking on the formulas
## in the browser)
exams2html("tstat", mathjax = TRUE)

## via plain HTML (works in all browsers but with inferior formatting)
exams2html("tstat", converter = "tth")

## via HTML with embedded picture (works in all browsers but
## is slow and requires LaTeX and ImageMagick)
## Not run: 
exams2html("tstat", converter = "tex2image")

## End(Not run)
}
</code></pre>

<hr>
<h2 id='exams2ilias'>Generation of Exams in ILIAS Format</h2><span id='topic+exams2ilias'></span>

<h3>Description</h3>

<p>Automatic generation of exams in QTI 1.2 with some tweaks
(still under development) for the learning management system ILIAS.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  exams2ilias(file, n = 1L, nsamp = NULL, dir = ".",
    name = NULL, quiet = TRUE, edir = NULL, tdir = NULL, sdir = NULL,
    verbose = FALSE, resolution = 100, width = 4, height = 4, svg = FALSE,
    encoding  = "UTF-8", num = list(fix_num = FALSE, minvalue = NA),
    mchoice = list(maxchars = c(3, NA, 3), minvalue = NA),
    schoice = mchoice, string = NULL, cloze = NULL,
    template = "ilias",
    duration = NULL, stitle = "Exercise", ititle = "Question",
    adescription = "Please solve the following exercises.",
    sdescription = "Please answer the following question.", 
    maxattempts = 1, cutvalue = 0, solutionswitch = TRUE, zip = TRUE,
    points = NULL, eval = list(partial = TRUE, negative = FALSE),
    converter = "pandoc-mathjax", xmlcollapse = TRUE,
    metasolution = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams2ilias_+3A_file">file</code></td>
<td>
<p>character. A specification of a (list of) exercise files.</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_n">n</code></td>
<td>
<p>integer. The number of copies to be compiled from <code>file</code>.</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_nsamp">nsamp</code></td>
<td>
<p>integer. The number(s) of exercise files sampled from each
list element of <code>file</code>. Sampling without replacement is used
if possible. (Only if some element of <code>nsamp</code> is larger than
the length of the corresponding element in <code>file</code>, sampling
with replacement is used.)</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_dir">dir</code></td>
<td>
<p>character. The default is the current working directory.</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_name">name</code></td>
<td>
<p>character. A name prefix for resulting exercises and ZIP file.</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_quiet">quiet</code></td>
<td>
<p>logical. Should output be suppressed when calling
<code><a href="#topic+xweave">xweave</a></code>?</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_edir">edir</code></td>
<td>
<p>character specifying the path of the directory (along with its
sub-directories) in which the files in <code>file</code> are stored
(see also <code><a href="#topic+xexams">xexams</a></code>).</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_tdir">tdir</code></td>
<td>
<p>character specifying a temporary directory, by default
this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>. Note that this
is cleaned up (i.e., existing files are deleted) and only certain
temporary files are preserved.</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_sdir">sdir</code></td>
<td>
<p>character specifying a directory for storing supplements, by
default this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>.</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_verbose">verbose</code></td>
<td>
<p>logical. Should information on progress of exam generation
be reported?</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_resolution">resolution</code>, <code id="exams2ilias_+3A_width">width</code>, <code id="exams2ilias_+3A_height">height</code></td>
<td>
<p>numeric. Options for rendering PNG (or SVG)
graphics passed to <code><a href="#topic+xweave">xweave</a></code>.</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_svg">svg</code></td>
<td>
<p>logical. Should graphics be rendered in SVG or PNG (default)?</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_encoding">encoding</code></td>
<td>
<p>character, ignored. The encoding is always assumed to be UTF-8.</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_num">num</code></td>
<td>
<p>function or named list applied to numerical (i.e., type <code>num</code>)
questions. If <code>num</code> is a function, <code>num</code> will be used
for generating the item body of the question, see function <code>make_itembody_qti12()</code>
(or <code>make_itembody_qti21()</code>).
If <code>num</code> is a named list, these arguments will be passed to function
<code>make_itembody_qti12()</code> (or <code>make_itembody_qti21()</code> using <code>exams2qti21()</code>).</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_mchoice">mchoice</code>, <code id="exams2ilias_+3A_schoice">schoice</code>, <code id="exams2ilias_+3A_string">string</code>, <code id="exams2ilias_+3A_cloze">cloze</code></td>
<td>
<p>function or named list applied to multiple choice,
single choice, string, and cloze questions (i.e., type <code>mchoice</code>, <code>schoice</code>,
<code>string</code>, and <code>cloze</code>), respectively. See argument <code>num</code> for more details.</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_template">template</code></td>
<td>
<p>character. The IMS QTI 1.2 or 2.1 template that should be used. Currently,
the package provides <code>"qti12.xml"</code> and <code>"qti21.xml"</code>.</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_duration">duration</code></td>
<td>
<p>integer. Set the duration of the exam in minutes.</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_stitle">stitle</code></td>
<td>
<p>character. A title that should be used for the sections. May be a vector of
length 1 to use the same title for each section, or a vector containing different section
titles.</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_ititle">ititle</code></td>
<td>
<p>character. A title that should be used for the assessment items. May be a vector
of length 1 to use the same title for each item, or a vector containing different item
titles. Note that the maximum of different item titles is the number of sections/questions
that are used for the exam.</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_adescription">adescription</code></td>
<td>
<p>character. Description (of length 1) for the overall assessment (i.e., exam).</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_sdescription">sdescription</code></td>
<td>
<p>character. Vector of descriptions for each section, omitted if empty
(or <code>NULL</code> or <code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_maxattempts">maxattempts</code></td>
<td>
<p>integer. The maximum attempts for one question. This may also be a vector
so that the maximum number of attempts varies across questions. A value of <code>Inf</code> or
<code>0</code> signals that the attempts per question are not limited.</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_cutvalue">cutvalue</code></td>
<td>
<p>numeric. The cutvalue at which the exam is passed.</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_solutionswitch">solutionswitch</code></td>
<td>
<p>logical. Should the question/item solutionswitch be enabled?
In OLAT this means that the correct solution is shown after an incorrect solution
was entered by an examinee (i.e., this is typically only useful if <code>maxattempts = 1</code>).</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_zip">zip</code></td>
<td>
<p>logical. Should the resulting XML file (plus supplements) be zipped?</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_points">points</code></td>
<td>
<p>integer. How many points should be assigned to each exercise? Note that this
argument overules any exercise points that are provided within an <code>"\expoints{}"</code> tag
in the <code>.Rnw</code> file. The vector of points supplied is expanded to the number of exercises in
the exam.</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_eval">eval</code></td>
<td>
<p>named list, specifies the settings for the evaluation policy, see function
<code><a href="#topic+exams_eval">exams_eval</a></code>.</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_converter">converter</code></td>
<td>
<p>character. Argument passed on to <code>make_exercise_transform_html</code>.
The default for <code>converter</code> is set to <code>"ttm"</code> unless there are Rmd
exercises in <code>file</code> where <code>"pandoc"</code> is used.</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_xmlcollapse">xmlcollapse</code></td>
<td>
<p>logical or character. Should line breaks be collapsed in the XML
code. If <code>TRUE</code> everything is collapsed with spaces (<code>" "</code>) but other collapse
characters could be supplied.</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_metasolution">metasolution</code></td>
<td>
<p>logical. Should the solution be added to the XML
output as qtimetadata tag? This currently only works for ILIAS essay
questions.</p>
</td></tr>
<tr><td><code id="exams2ilias_+3A_...">...</code></td>
<td>
<p>further arguments passed on to <code>make_exercise_transform_html</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>exams2ilias</code> is a convenience interface to <code><a href="#topic+exams2qti12">exams2qti12</a></code>
for generating QTI 1.2 with some tweaks for ILIAS (<a href="https://www.ilias.de/">https://www.ilias.de/</a>).
The support for ILIAS so far is somewhat rudimentary. Not all question
types are currently supported. What has been tested most extensively, are
string questions with open answers and solutions; these are rendered into
ILIAS essay questions within a question pool. Also mchoice and schoice
questions render in ILIAS, but have received less amount of testing.
Numeric and cloze questions do not work yet.
</p>


<h3>Value</h3>

<p><code>exams2ilias</code> returns a list of exams as generated by <code><a href="#topic+xexams">xexams</a></code>.
</p>
<p>If <code>zip</code> is <code>TRUE</code> (default), an ILIAS Questionpool object is generated.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exams2qti12">exams2qti12</a></code>,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## load package and enforce par(ask = FALSE)
library("exams")
options(device.ask.default = FALSE)

## define an exams (= list of exercises)
myexam &lt;- list(
  ## multiple-choice with graphics
  c("boxplots.Rmd", "scatterplot.Rmd"),

  ## multiple-choice with output or tables
  c("ttest.Rmd", "anova.Rmd", "relfreq.Rmd"),

  ## single-choice
  c("deriv2.Rmd", "swisscapital.Rmd"),

  ## string (closed)
  "function.Rmd",
  
  ## string (open-ended)
  "essayreg.Rmd"
)

## output directory
dir.create(mydir &lt;- tempfile())

## generate .zip with ILIAS Questionpool in temporary directory
## using a few customization options
exams2ilias(myexam, n = 3, dir = mydir,
  maxattempts = 3,
  num = list(digits = 1),
  mchoice = list(shuffle = TRUE, enumerate = FALSE),
  solutionswitch = FALSE
)
dir(mydir)
</code></pre>

<hr>
<h2 id='exams2kahoot'>Generation of Excel Sheets with Quiz Questions for Kahoot!</h2><span id='topic+exams2kahoot'></span>

<h3>Description</h3>

<p>Interface for generating Excel sheets with plain-text quiz questions
for the Kahoot! game-based learning platform.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exams2kahoot(file, n = 1L, dir = ".", name = "kahootquiz",
  quiet = TRUE, time = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams2kahoot_+3A_file">file</code></td>
<td>
<p>character. A specification of a (list of) exercise files.</p>
</td></tr>
<tr><td><code id="exams2kahoot_+3A_n">n</code></td>
<td>
<p>integer. The number of copies to be compiled from <code>file</code>.</p>
</td></tr>
<tr><td><code id="exams2kahoot_+3A_dir">dir</code></td>
<td>
<p>character. The default is the current working directory.</p>
</td></tr>
<tr><td><code id="exams2kahoot_+3A_name">name</code></td>
<td>
<p>character. A name prefix for resulting Excel sheets.</p>
</td></tr>
<tr><td><code id="exams2kahoot_+3A_quiet">quiet</code></td>
<td>
<p>logical. Should output be suppressed when calling <code><a href="#topic+xweave">xweave</a></code>?</p>
</td></tr>
<tr><td><code id="exams2kahoot_+3A_time">time</code></td>
<td>
<p>numeric. Time limit (in seconds) allowed for answering the question
in Kahoot!, must be one of 5, 10, 20, 30, 60, 90, 120, 240. If other numeric
inputs are made, they are forced to the nearest admissable specification.
Default: 60 seconds.</p>
</td></tr>
<tr><td><code id="exams2kahoot_+3A_...">...</code></td>
<td>
<p>arguments passed on to <code><a href="#topic+xexams">xexams</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>exams2kahoot</code> generates Excel sheets, requiring <code><a href="openxlsx.html#topic+write.xlsx">write.xlsx</a></code>
from the <span class="pkg">openxlsx</span> package, that can be imported to the Kahoot!
game-based learning platform. Only single-choice (schoice) and multiple-choice
(mchoice) questions are allowed with plain questions and answers
(using conversion via <code><a href="rmarkdown.html#topic+pandoc_convert">pandoc_convert</a></code>). Questions
and answers must not exceed 120 and 75 characters, respectively.
</p>


<h3>Value</h3>

<p>A list of exams as generated by <code><a href="#topic+xexams">xexams</a></code> is
returned invisibly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## create an .xlsx file for Kahoot! (requiring openxslx) based
## on three simple text-based single-choice and multiple-choice questions
exams2kahoot(c("capitals", "swisscapital", "switzerland"))

## End(Not run)
</code></pre>

<hr>
<h2 id='exams2lops'>Generation of Exams in LOPS Exam Server Format (WU Wien)</h2><span id='topic+exams2lops'></span><span id='topic+make_exams_write_lops'></span>

<h3>Description</h3>

<p>Automatic generation of exams in LOPS exam server format (WU Wien).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  exams2lops(file, n = 1L, nsamp = NULL, dir = ".", name = NULL, 
    quiet = TRUE, edir = NULL, tdir = NULL, sdir = NULL, verbose = FALSE,
    solution = TRUE, doctype = NULL, head = NULL, resolution = 100, width = 4, 
    height = 4, svg = FALSE,  encoding = "UTF-8", converter = "tex2image", base64 = FALSE,
    auto_scramble = TRUE, ...)

  make_exams_write_lops(name = NULL, auto_scramble = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams2lops_+3A_file">file</code></td>
<td>
<p>character. A specification of a (list of) exercise files.</p>
</td></tr>
<tr><td><code id="exams2lops_+3A_n">n</code></td>
<td>
<p>integer. The number of copies to be compiled from <code>file</code>.</p>
</td></tr>
<tr><td><code id="exams2lops_+3A_nsamp">nsamp</code></td>
<td>
<p>integer. The number(s) of exercise files sampled from each
list element of <code>file</code>. Sampling without replacement is used
if possible. (Only if some element of <code>nsamp</code> is larger than
the length of the corresponding element in <code>file</code>, sampling
with replacement is used.)</p>
</td></tr>
<tr><td><code id="exams2lops_+3A_dir">dir</code></td>
<td>
<p>character. The default is the current working directory.</p>
</td></tr>
<tr><td><code id="exams2lops_+3A_name">name</code></td>
<td>
<p>character. A name prefix for resulting exercises.</p>
</td></tr>
<tr><td><code id="exams2lops_+3A_quiet">quiet</code></td>
<td>
<p>logical. Should output be suppressed when calling
<code><a href="#topic+xweave">xweave</a></code>?</p>
</td></tr>
<tr><td><code id="exams2lops_+3A_edir">edir</code></td>
<td>
<p>character specifying the path of the directory (along with its
sub-directories) in which the files in <code>file</code> are stored
(see also <code><a href="#topic+xexams">xexams</a></code>).</p>
</td></tr>
<tr><td><code id="exams2lops_+3A_tdir">tdir</code></td>
<td>
<p>character specifying a temporary directory, by default
this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>. Note that this
is cleaned up (i.e., existing files are deleted) and only certain
temporary files are preserved.</p>
</td></tr>
<tr><td><code id="exams2lops_+3A_sdir">sdir</code></td>
<td>
<p>character specifying a directory for storing supplements, by
default this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>.</p>
</td></tr>
<tr><td><code id="exams2lops_+3A_verbose">verbose</code></td>
<td>
<p>logical. Should information on progress of exam generation
be reported?</p>
</td></tr>
<tr><td><code id="exams2lops_+3A_solution">solution</code></td>
<td>
<p>logical. Should the solution be included in the HTML
output?</p>
</td></tr>
<tr><td><code id="exams2lops_+3A_doctype">doctype</code></td>
<td>
<p>character vector with a DOCTYPE tag for the HTML page.
By default HTML4 is employed.</p>
</td></tr>
<tr><td><code id="exams2lops_+3A_head">head</code></td>
<td>
<p>character vector for the head tag. By default a simple
header is employed, setting the font to Arial.</p>
</td></tr>
<tr><td><code id="exams2lops_+3A_resolution">resolution</code>, <code id="exams2lops_+3A_width">width</code>, <code id="exams2lops_+3A_height">height</code></td>
<td>
<p>numeric. Options for rendering PNG (or SVG)
graphics passed to <code><a href="#topic+xweave">xweave</a></code>.</p>
</td></tr>
<tr><td><code id="exams2lops_+3A_svg">svg</code></td>
<td>
<p>logical. Should graphics be rendered in SVG or PNG (default)?</p>
</td></tr>
<tr><td><code id="exams2lops_+3A_encoding">encoding</code></td>
<td>
<p>character, ignored. The encoding is always assumed to be UTF-8.</p>
</td></tr>
<tr><td><code id="exams2lops_+3A_converter">converter</code></td>
<td>
<p>character. Workhorse function for transforming LaTeX
code to HTML.</p>
</td></tr>
<tr><td><code id="exams2lops_+3A_base64">base64</code></td>
<td>
<p>logical. Should supplementary files be embedded using Base 64 coding?
Argument <code>base64</code> may also be a character vector of file suffixes that should be encoded, e.g.
<code>base64 = c("png", "rda")</code> will only encode PNG images and binary <code>.rda</code> files.
If set to <code>NULL</code> only image files will be encoded.</p>
</td></tr>
<tr><td><code id="exams2lops_+3A_auto_scramble">auto_scramble</code></td>
<td>
<p>logical. Should answers be scrambled automaticall?</p>
</td></tr>  
<tr><td><code id="exams2lops_+3A_...">...</code></td>
<td>
<p>arguments passed on to <code>make_exercise_transform_html</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>exams2lops</code> will produce a <code>.zip</code> file that may be uploaded. It proceeds by (1)
calling <code><a href="#topic+xweave">xweave</a></code> on each exercise, (2) reading the resulting LaTeX code, (3)
transforming the LaTeX code to HTML, and (4) embedding the HTML code in a XML file using the
LOPS exam server XML format (WU Wien).
</p>
<p>For steps (1) and (2) the standard drivers in <code>xexams</code> are used. In step (3), a suitable
transformation function is set up on the fly using <code>make_exercise_transform_html</code>, see also
the details section in <code><a href="#topic+exams2html">exams2html</a></code>.
</p>
<p>For step (4) a simple writer function is set up on the fly that embeds the transformed HTML code
into the final XML files for each question and the exam.
</p>
<p>Note that in <code>make_exams_write_lops</code> only multiple and single choice questions are supported at
the moment, since the LOPS exam server XML format (WU Wien) is used to generate printed versions for large scale
multiple choice exams. In addition, only images of the question/questionlist/solution/solutionlist
should be generated, since the server has only minimum support for e.g. MathML markup used to
produce mathematical formulas.
</p>


<h3>Value</h3>

<p><code>exams2lops</code> returns a list of exams as generated by <code><a href="#topic+xexams">xexams</a></code>.
</p>
<p><code>make_exams_write_lops</code> eturns a function that generates the XML code
for the question in LOPS exam server format (WU Wien).
</p>


<h3>References</h3>

<p>Zeileis A, Umlauf N, Leisch F (2014).
Flexible Generation of E-Learning Exams in R: Moodle Quizzes, OLAT Assessments, and Beyond.
<em>Journal of Statistical Software</em>, <b>58</b>(1), 1&ndash;36.
<a href="https://doi.org/10.18637/jss.v058.i01">doi:10.18637/jss.v058.i01</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+xexams">xexams</a></code>,
<code><a href="tth.html#topic+ttm">ttm</a></code>,
<code><a href="tth.html#topic+tth">tth</a></code>,
<code><a href="#topic+tex2image">tex2image</a></code>,
<code><a href="#topic+make_exercise_transform_html">make_exercise_transform_html</a></code>,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## output directory
dir.create(mydir &lt;- tempfile())

## generate the exam
exams2lops(c("scatterplot.Rmd", "boxplots.Rmd"), dir = mydir)
dir(mydir)

## End(Not run)
</code></pre>

<hr>
<h2 id='exams2moodle'>Generation of Exams in Moodle XML Format</h2><span id='topic+exams2moodle'></span><span id='topic+make_question_moodle'></span><span id='topic+make_question_moodle23'></span>

<h3>Description</h3>

<p>Automatic generation of exams in Moodle XML format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  exams2moodle(file, n = 1L, nsamp = NULL, dir = ".",
    name = NULL, quiet = TRUE, edir = NULL,
    tdir = NULL, sdir = NULL, verbose = FALSE, rds = FALSE,
    resolution = 100, width = 4, height = 4, svg = FALSE, encoding = "UTF-8",
    iname = TRUE, stitle = NULL,
    testid = FALSE, zip = FALSE, num = NULL, mchoice = NULL,
    schoice = mchoice, string = NULL, cloze = NULL,
    points = NULL, rule = NULL, pluginfile = TRUE, forcedownload = FALSE,
    converter = "pandoc-mathjax", envir = NULL,
    table = NULL, css = NULL, ...)

  make_question_moodle(name = NULL, solution = TRUE,
    shuffle = FALSE, penalty = 0, answernumbering = "abc",
    usecase = FALSE, cloze_mchoice_display = NULL, cloze_schoice_display = NULL,
    truefalse = c("True", "False"), enumerate = TRUE, abstention = NULL,
    eval = list(partial = TRUE, negative = FALSE, rule = "false2"),
    essay = NULL, numwidth = NULL, stringwidth = NULL,
    css = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams2moodle_+3A_file">file</code></td>
<td>
<p>character. A specification of a (list of) exercise files.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_n">n</code></td>
<td>
<p>integer. The number of copies to be compiled from <code>file</code>.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_nsamp">nsamp</code></td>
<td>
<p>integer. The number(s) of exercise files sampled from each
list element of <code>file</code>. Sampling without replacement is used
if possible. (Only if some element of <code>nsamp</code> is larger than
the length of the corresponding element in <code>file</code>, sampling
with replacement is used.)</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_dir">dir</code></td>
<td>
<p>character. The default is the current working directory.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_name">name</code></td>
<td>
<p>character. A name prefix for resulting exercises and ZIP file.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_quiet">quiet</code></td>
<td>
<p>logical. Should output be suppressed when calling
<code><a href="#topic+xweave">xweave</a></code>?</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_edir">edir</code></td>
<td>
<p>character specifying the path of the directory (along with its
sub-directories) in which the files in <code>file</code> are stored
(see also <code><a href="#topic+xexams">xexams</a></code>).</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_tdir">tdir</code></td>
<td>
<p>character specifying a temporary directory, by default
this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>. Note that this
is cleaned up (i.e., existing files are deleted) and only certain
temporary files are preserved.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_sdir">sdir</code></td>
<td>
<p>character specifying a directory for storing supplements, by
default this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_verbose">verbose</code></td>
<td>
<p>logical. Should information on progress of exam generation
be reported?</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_rds">rds</code></td>
<td>
<p>logical indicating whether the return list should also be
saved as an RDS data file.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_resolution">resolution</code>, <code id="exams2moodle_+3A_width">width</code>, <code id="exams2moodle_+3A_height">height</code></td>
<td>
<p>numeric. Options for rendering PNG (or SVG)
graphics passed to <code><a href="#topic+xweave">xweave</a></code>.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_svg">svg</code></td>
<td>
<p>logical. Should graphics be rendered in SVG or PNG (default)?</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_encoding">encoding</code></td>
<td>
<p>character, ignored. The encoding is always assumed to be UTF-8.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_envir">envir</code></td>
<td>
<p>passed to <code><a href="#topic+xweave">xweave</a></code>.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_table">table</code></td>
<td>
<p>character. An optional class assigned to <code>&lt;table&gt;</code> elements
(without a class) in the question (only supported for pandoc-based <code>converter</code>).</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_css">css</code></td>
<td>
<p>character. A character string (or vector) containing the path(s) to
CSS style file(s). Alternatively, a string (or vector) with a <code>&lt;style&gt;</code>
tag to be included in every question (e.g., for formatting <code>&lt;table&gt;</code> elements).</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_iname">iname</code></td>
<td>
<p>logical. Should the exam <code>name</code> be included in the path in the <code>&lt;category&gt;</code>
tag in the final XML file? This option may be useful when questions should be added to
certain already existing question banks, i.e. <code>iname = TRUE</code> will include the exam
<code>name</code> by <code>$course$/ExamName/</code>.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_stitle">stitle</code></td>
<td>
<p>character. For the questions specified in argument <code>file</code>, additional section
titles may be set. The section titles will then be added to the <code>&lt;category&gt;</code>
tag in the final XML file (see also argument <code>iname</code>), i.e. the section name
for each question will be written to <code>$course$/ExamName/SectionName</code>. Note that section
names may also be provided in the <code>\exsection{}</code> tag in the <code>.Rnw</code> file of the
question. However, section names that are specified in <code>stitle</code> will overwrite
<code>\exsection{}</code> tags. <code>stitle</code> may also include <code>NA</code>, e.g.
<code>stitle = c("Exercise 1", NA, "Exercise 3")</code>.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_testid">testid</code></td>
<td>
<p>logical. Should an unique test id be added to the exam <code>name</code>.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_zip">zip</code></td>
<td>
<p>logical. Should the resulting XML file be zipped?</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_num">num</code></td>
<td>
<p>function or named list applied to numerical (i.e., type <code>num</code>)
questions. If <code>num</code> is a function, <code>num</code> will be used
for generating the item body of the question, see function <code>make_itembody_qti12()</code>.
If <code>num</code> is a named list, these arguments will be passed to function
<code>make_itembody_qti12()</code>.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_mchoice">mchoice</code>, <code id="exams2moodle_+3A_schoice">schoice</code>, <code id="exams2moodle_+3A_string">string</code>, <code id="exams2moodle_+3A_cloze">cloze</code></td>
<td>
<p>function or named list applied to multiple choice, 
single choice, string, and cloze questions (i.e., type <code>mchoice</code>, <code>schoice</code>,
<code>string</code>, and <code>cloze</code>), respectively. See argument <code>num</code> for more details.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_points">points</code></td>
<td>
<p>integer. How many points should be assigned to each exercise? Note that this
argument overules any exercise points that are provided within an <code>"\expoints{}"</code> tag
in the <code>.Rnw</code> file. The vector of points supplied is expanded to the number of exercises in
the exam.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_rule">rule</code></td>
<td>
<p>character specifying which rule to use for negative partial credits. see function
<code><a href="#topic+exams_eval">exams_eval</a></code>. Note that the default using cloze exercises is <code>rule = "none"</code>.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_pluginfile">pluginfile</code></td>
<td>
<p>logical. Should supplements be included in the Moodle XML file via Moodle's
Pluginfile mechanism? This is the default but may not work with older versions of Moodle (&lt;2.5).
If set to <code>FALSE</code> supplements like graphics and data are included as data URIs.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_forcedownload">forcedownload</code></td>
<td>
<p>logical. Should all supplementary links be forced to download when clicked
(as opposed to opening in the browser)? Only supported if <code>pluginfile = TRUE</code>.    
If <code>forcedownload = FALSE</code> the behavior typically depends on the browser,
user settings, and file type.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_solution">solution</code></td>
<td>
<p>logical. Should the question solution, if available, be added in the question
XML?</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_shuffle">shuffle</code></td>
<td>
<p>For <code>mchoice</code> and <code>schoice</code> exercises, if set to <code>TRUE</code> will
force Moodle to additionally shuffle the provided answer list.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_penalty">penalty</code></td>
<td>
<p>numeric. Specifies the penalty tag for a question.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_answernumbering">answernumbering</code></td>
<td>
<p>character. Specifies how choice questions should be numbered,
allowed values are: <code>"abc"</code> (default), <code>"ABCD"</code>, <code>"123"</code> or <code>"none"</code>.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_usecase">usecase</code></td>
<td>
<p>logical. Should string questions be case sensitive or not.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_cloze_mchoice_display">cloze_mchoice_display</code>, <code id="exams2moodle_+3A_cloze_schoice_display">cloze_schoice_display</code></td>
<td>
<p>character. In <code>cloze</code> questions,
the user may set the visual appearance of choice questions. If <code>NULL</code> (default),
<code>"MULTIRESPONSE"</code> (column of checkboxes) is used for <code>mchoice</code> questions and
<code>"MULTICHOICE"</code> (drop-down menu) for <code>schoice</code> questions unless math markup is present in the question list.
The latter is not rendered in drop-down menus and hence <code>"MULTICHOICE_V"</code> (radio buttons, vertical column) are used.
Other options include a horizontal row of either checkboxes (<code>"MULTIRESPONSE_H"</code>) or
radio buttons (<code>"MULTICHOICE_H"</code>), respectively. Shuffled versions of all display types are also
available (since Moodle 3.0) by appending an &quot;S&quot;, e.g., <code>"MULTICHOICE_S"</code> or
<code>"MULTICHOICE_VS"</code> etc.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_truefalse">truefalse</code></td>
<td>
<p>character of length 2. For single choice answers in <code>cloze</code> questions,
the user may specify the possible options shown.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_enumerate">enumerate</code></td>
<td>
<p>logical. In <code>cloze</code> questions, if set to <code>TRUE</code>, the answerlist and
solutionlist will be enumerated.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_abstention">abstention</code></td>
<td>
<p>character or logical. Should an explicit abstention option be added
in single/multiple choice exercises? The character text specified is used for an
extra button in Moodle which (when selected) always leads to zero points.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_eval">eval</code></td>
<td>
<p>named list, specifies the settings for the evaluation policy, see function
<code><a href="#topic+exams_eval">exams_eval</a></code>.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_essay">essay</code></td>
<td>
<p>logical. Should <code>string</code> questions be rendered into Moodle <code>shortanswer</code>
or <code>essay</code> questions? The default is to use <code>shortanswer</code> unless either
<code>essay=TRUE</code> or the exercise's metainformation is set to <code>essay</code>.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_numwidth">numwidth</code>, <code id="exams2moodle_+3A_stringwidth">stringwidth</code></td>
<td>
<p>logical, numeric, or character. Should the width of
all <code>num</code> or <code>string</code> sub-items, respectively, in a <code>cloze</code> be fixed to
the same width? This can be accomplished by adding a wrong solution with a suitable
length to all sub-items in Moodle XML. The default (<code>NULL</code> or equivalently
<code>FALSE</code>) is not to do so but let Moodle decide the width of each cell based
on the respective correct solution. Alternatively, the arguments can be set to
<code>TRUE</code> (then the maximum width from the correct solutions is used), an
integer (indicating the maximum width) or a character (like <code>"1111111"</code>,
to be used as the wrong solution). Both arguments can also be set through
exextra tags in each of the exercises' meta-information.</p>
</td></tr>
<tr><td><code id="exams2moodle_+3A_converter">converter</code>, <code id="exams2moodle_+3A_...">...</code></td>
<td>
<p>arguments passed on to <code>make_exercise_transform_html</code>.
The default for <code>converter</code> is <code>"pandoc-mathjax"</code> which assumes that the quiz
is imported in a Moodle site with MathJax plugin activated (which is the default setting in
Moodle). For using MathML instead of MathJax the <code>converter</code> can be set to
<code>NULL</code> or <code>"pandoc-mathml"</code> etc. For details see Zeileis (2019).</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>exams2moodle</code> produces an XML file that may be uploaded into Moodle. It proceeds by (1)
calling <code><a href="#topic+xweave">xweave</a></code> on each exercise, (2) reading the resulting LaTeX code, (3)
transforming the LaTeX code to HTML, and (4) embedding the HTML code in a XML file using the
Moodle standards for exams/quizzes.
</p>
<p>For steps (1) and (2) the standard drivers in <code><a href="#topic+xexams">xexams</a></code> are used. In step (3), a suitable
transformation function is set up on the fly using <code>make_exercise_transform_html</code>, see also
the details section in <code><a href="#topic+exams2html">exams2html</a></code>.
</p>
<p>For step (4), the function will cycle through all questions and exams to generate the final XML
file in Moodle standard. The structure of the resulting XML file is such that one category
will be set for the exam/quiz using the exam/quiz <code>name</code> (or this category may be
suppressed (i.e., not included in the XML) by setting <code>iname = FALSE</code>), followed by one
category/section for each question, while the replicates of each question will be included in the
corresponding category/section. Note that category/section names may also be provided in the
<code>\exsection{}</code> tag in the <code>.Rnw</code> files, or within argument <code>stitle</code> in
<code>exams2moodle</code>. This may be useful when questions should automatically be added to already
existing Moodle question banks. (See also the argument descriptions above.)
</p>
<p>The XML code for each question is then generated using function <code>make_question_moodle</code>.
Note that for each question type, either the arguments of <code>make_question_moodle</code> may be set
within <code>num</code>, <code>mchoice</code>, <code>schoice</code>, <code>string</code> and <code>cloze</code> in
<code>exams2moodle</code>, by providing a named list of specifications that should be used, or for each
questiontype, a function that produces the question XML code may be provided to <code>num</code>,
<code>mchoice</code>, <code>schoice</code>, <code>string</code> and <code>cloze</code>. E.g., to suppress the solution
for numeric questions one may set <code>num = list(solution = FALSE)</code>.
</p>
<p>When specifying cloze exercises, two approaches are possible: Either a <code>answerlist</code> with
all questions is provided within the <code>question</code> or, alternatively, the answer fields can
be placed anywhere in the <code>question</code> text. For the latter, the strings <code>##ANSWER1##</code>,
<code>##ANSWER2##</code>, etc., have to be used, see the exercises <code>"boxhist2.Rnw"</code> and
<code>"fourfold2.Rnw"</code> for illustration and Appendix C in Zeileis et al. (2014) for further
details.
</p>
<p>To fix the width of numeric answer fields withing cloze exercises (in order not to convey any
clues about the length of the correct solution), the <code>\exextra[numwidth]</code> metainformation
command can be used in the <code>.Rnw</code> exercise. For example, it can be set to
<code>\exextra[numwidth,logical]{TRUE}</code>, <code>\exextra[numwidth,numeric]{5}</code>, or
<code>\exextra[numwidth,character]{100.0}</code>.
</p>
<p>In order to generate free text questions in moodle one may
specify extra parameters
via <code>\exextra</code>. Currently the following options are supported:
</p>

<ul>
<li> <p><code>essay</code>: logical. Enables the essay function.
</p>
</li>
<li> <p><code>format</code>: character. Type of text field (one of: <code>plain</code>, <code>editor</code>, editorfilepicker monospaced noinline)
</p>
</li>
<li> <p><code>required</code>: logical. Whether an answer is required.
</p>
</li>
<li> <p><code>attachments</code>: numeric. How many attachments can be uploaded.
</p>
</li>
<li> <p><code>attachmentsrequired</code>: numeric. The number of required attachments.
</p>
</li></ul>



<h3>Value</h3>

<p><code>exams2moodle</code> returns a list of exams as generated by <code><a href="#topic+xexams">xexams</a></code>.
</p>
<p><code>make_question_moodle</code> returns a function that generates the XML code
for the question in Moodle's XML standard.
</p>


<h3>References</h3>

<p>Dougiamas M, et al. (2019). <em>Moodle, Version 3.6</em>.
<a href="https://moodle.org/">https://moodle.org/</a>.
</p>
<p>MoodleDocs (2019). <em>Moodle XML Format</em>.
<a href="https://docs.moodle.org/en/Moodle_XML">https://docs.moodle.org/en/Moodle_XML</a>
</p>
<p>Zeileis A, Umlauf N, Leisch F (2014).
Flexible Generation of E-Learning Exams in R: Moodle Quizzes, OLAT Assessments, and Beyond.
<em>Journal of Statistical Software</em>, <b>58</b>(1), 1&ndash;36.
<a href="https://doi.org/10.18637/jss.v058.i01">doi:10.18637/jss.v058.i01</a>.
</p>
<p>Zeileis A (2019).
<em>Mathematical Notation in Online R/exams</em>.
<a href="https://www.R-exams.org/tutorials/math/">https://www.R-exams.org/tutorials/math/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+xexams">xexams</a></code>,
<code><a href="tth.html#topic+ttm">ttm</a></code>,
<code><a href="tth.html#topic+tth">tth</a></code>,
<code><a href="#topic+tex2image">tex2image</a></code>,
<code><a href="#topic+make_exercise_transform_html">make_exercise_transform_html</a></code>,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## load package and enforce par(ask = FALSE)
library("exams")
options(device.ask.default = FALSE)

## define an exams (= list of exercises)
myexam &lt;- list(
  "boxplots.Rmd",
  c("tstat.Rmd", "ttest.Rmd", "confint.Rmd"),
  c("regression.Rmd", "anova.Rmd"),
  c("scatterplot.Rmd", "boxhist.Rmd"),
  "relfreq.Rmd"
)

## output directory
dir.create(mydir &lt;- tempfile())

## generate moodle quiz in temporary directory
## using a few customization options
exams2moodle(myexam, n = 3, dir = mydir,
  num = list(solution = FALSE),
  mchoice = list(shuffle = TRUE)
)
dir(mydir)
</code></pre>

<hr>
<h2 id='exams2nops'>Generation of Written Exams for Automatic Evaluation</h2><span id='topic+exams2nops'></span><span id='topic+make_nops_template'></span>

<h3>Description</h3>

<p>Generation of exams in PDF format that can be printed, scanned,
and evaluated automatically.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  exams2nops(file, n = 1L, nsamp = NULL, dir = ".", name = NULL,
    language = "en", title = "Exam", course = "",
    institution = "R University", logo = "Rlogo.png", date = Sys.Date(), 
    replacement = FALSE, intro = NULL, blank = NULL, duplex = TRUE, pages = NULL,
    usepackage = NULL, header = NULL, encoding = "UTF-8", startid = 1L,
    points = NULL, showpoints = FALSE, samepage = FALSE,
    twocolumn = FALSE, reglength = 7L, seed = NULL, ...)

  make_nops_template(n, replacement = FALSE, intro = NULL, blank = NULL,
    duplex = TRUE, pages = NULL, file = NULL, nchoice = 5, encoding = "UTF-8",
    samepage = FALSE, twocolumn = FALSE, reglength = 7L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams2nops_+3A_file">file</code></td>
<td>
<p>character. A specification of a (list of) exercise files.</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_n">n</code></td>
<td>
<p>integer. The number of copies to be compiled from <code>file</code>
(in <code>exams2nops</code>) and the number of exercises per exam
(in <code>make_nops_template</code>), respectively.</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_nsamp">nsamp</code></td>
<td>
<p>integer. The number(s) of exercise files sampled from each
list element of <code>file</code>. Sampling without replacement is used
if possible. (Only if some element of <code>nsamp</code> is larger than
the length of the corresponding element in <code>file</code>, sampling
with replacement is used.)</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_dir">dir</code></td>
<td>
<p>character. The default is either display on the screen
(if <code>n = 1L</code>) or the current working directory.</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_name">name</code></td>
<td>
<p>character. A name prefix for resulting exams and RDS file.</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_language">language</code></td>
<td>
<p>character. Path to a DCF file with a language specification.
See below for the list of supported languages.</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_title">title</code></td>
<td>
<p>character. Title of the exam, e.g., <code>"Introduction to Statistics"</code>.</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_course">course</code></td>
<td>
<p>character. Optional course number, e.g., <code>"101"</code>.</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_institution">institution</code></td>
<td>
<p>character. Name of the institution at which the exam is conducted.</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_logo">logo</code></td>
<td>
<p>character. Path to a logo image. If the logo is not found, it is
simply omitted.</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_date">date</code></td>
<td>
<p>character or <code>"Date"</code> object specifying the date of the exam.</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_replacement">replacement</code></td>
<td>
<p>logical. Should a replacement exam sheet be included?</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_intro">intro</code></td>
<td>
<p>character. Either a single string with the path to a .tex file or a vector
with with LaTeX code for optional introduction text on the first page of the exam.</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_blank">blank</code></td>
<td>
<p>integer. Number of blank pages to be added at the end.
(Default is chosen to be half of the number of exercises.)
If <code>pages</code> is specified, <code>blank</code> can also be a vector of
length two with blank pages before and after the extra <code>pages</code>,
respectively.</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_duplex">duplex</code></td>
<td>
<p>logical. Should blank pages be added after the title page
(for duplex printing)?</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_pages">pages</code></td>
<td>
<p>character. Path(s) to additional PDF pages to be included
at the end of the exam (e.g., formulary or distribution tables).</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_usepackage">usepackage</code></td>
<td>
<p>character. Names of additional LaTeX packages to be
included.</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_header">header</code></td>
<td>
<p>character vector or list. Either a character vector with LaTeX
code to include in the header or a named list with further options to
be passed to the LaTeX files.</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_encoding">encoding</code></td>
<td>
<p>character, ignored. The encoding is always assumed to be UTF-8.</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_startid">startid</code></td>
<td>
<p>integer. Starting ID for the exam numbers (defaults to 1).</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_points">points</code></td>
<td>
<p>integer. How many points should be assigned to each exercise? Note that this
argument overules any exercise points that are provided within the <code>expoints</code> tags
of the exercise files (if any). The vector of points supplied should either have
length 1 or the number of exercises in the exam.</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_showpoints">showpoints</code></td>
<td>
<p>logical. Should the PDF show the number of points associated with
each exercise (if specified in the Rnw/Rmd exercise or in <code>points</code>)?</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_samepage">samepage</code></td>
<td>
<p>logical. Should the itemized question lists be forced to be on
the same page?</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_twocolumn">twocolumn</code></td>
<td>
<p>logical. Should a two-column layout be used?</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_reglength">reglength</code></td>
<td>
<p>integer. Number of digits in the registration ID. The
default is 7 and it can be increased up to 10. In case of <code>reglength &lt; 7</code>,
internally <code>reglength = 7</code> is enforced (and thus necessary in the registration
CSV file) but the initial ID digits are fixed to 0 in the exam sheet and
corresponding boxes ticked already.</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_seed">seed</code></td>
<td>
<p>integer matrix or logical. Either <code>NULL</code> (default), logical, or a
matrix of random seeds for each possible exercise to be set prior to calling
<code>driver@sweave</code>. If <code>NULL</code> no random seeds are set. If a matrix,
the number of rows must be <code>n</code> and the number of columns must
correspond to <code>unlist(file)</code>. If <code>TRUE</code> a suitable matrix of seeds
is sampled.</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_...">...</code></td>
<td>
<p>arguments passed on to <code><a href="#topic+exams2pdf">exams2pdf</a></code>.</p>
</td></tr>
<tr><td><code id="exams2nops_+3A_nchoice">nchoice</code></td>
<td>
<p>character. The number of choice alternatives per exercise.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>exams2nops</code> is a convenience interface for <code><a href="#topic+exams2pdf">exams2pdf</a></code>
with a dynamically generated title page which can be printed,
scanned with <code><a href="#topic+nops_scan">nops_scan</a></code> and evaluated automatically
by <code><a href="#topic+nops_eval">nops_eval</a></code>. It is originally intended for
single- and multiple choice (schoice/mchoice) questions only but has also
some limited support for open-ended (string) questions.
</p>
<p>The exam sheet consists of various sections where information is either
printed our filled in by the students. The section with personal data is
just for human readers, it is not read automatically. The registration number
has to be filled in in digits and also marked with corresponding crosses
where only the latter is read automatically. The exam ID/type/scrambling
are printed directly into the PDF and read automatically after scanning.
Note that the font in the PDF must not be modified for the reading step
to work reliably. (A sans-serif font is used and hence the <code>sfmath</code>
LaTeX package is also used - if it is installed.) The questions can have
up to five alternatives which have to answered by the students. The crosses
are read automatically where both empty and completely filled boxes are
regarded as not crossed.
</p>
<p>Tutorial for NOPS workflow: <a href="https://www.R-exams.org/tutorials/exams2nops/">https://www.R-exams.org/tutorials/exams2nops/</a>.
</p>
<p>Limitations: (a) Only up to five answer alternatives per question are supported.
(b) Currently, only up to 45 questions are supported. If you have
more questions, consider splitting the entire exam up into two NOPS exams.
(c) Only up to 3 open-ended questions can be included. (d) Each question
must have the same number of answer alternatives and the same number of
points across random replications. For example, the <code>n</code> replications
drawn for the first exercise all need, say, five alternatives and two points.
Then, the second exercise may have, say, four alternatives and five points
and so on. But this may not be mixed within the same exercise number.
</p>
<p>The examples below show how PDF exams can be generated along with an RDS
file with (serialized) R data containing all meta-information about the exam.
The PDFs can be printed out for conducting the exam and the exam sheet
from the first page then needs to be scanned into PDF or PNG images. Then
the information from these scanned images can be read by <code>nops_scan</code>,
extracting information about the exam, the participants, and the corresponding
answers (as described above). The ZIP file produced by <code>nops_scan</code>
along with the RDS of the exam meta-information and a CSV file with participant
information can then be used by <code>nops_eval</code> to automatically evaluate
the whole exam and producing HTML reports for each participant. See
<code><a href="#topic+nops_eval">nops_eval</a></code> for a worked example.
</p>
<p>Currently, up to three open-ended string questions can also be included.
These do not generate boxes on the first exam sheet but instead a second
exam sheet is produced for these open-ended questions. It is assumed that
a human reader reads these open-ended questions and then assigns points
by marking boxes on this separate sheet. Subsequently, this sheet can
also be read by <code>nops_scan</code>.
</p>
<p>The <code>language</code> elements can be specified through a relatively simple
text file and the package already ships with:
English (<code>"en"</code>),
Croatian (<code>"hr"</code>),
Danish (<code>"da"</code>),
Dutch (<code>"nl"</code>),
Finnish (<code>"fi"</code>),
French (<code>"fr"</code>),
Galician (<code>"gl"</code>),
German (<code>"de"</code>),
Hungarian (<code>"hu"</code>),
Italian (<code>"it"</code>),
Japanese (<code>"ja"</code>),
Korean (<code>"ko"</code>),
Norwegian (Bokmål, <code>"no"</code>),
Portuguese (<code>"pt-PT"</code> or <code>"pt-BR"</code>; also <code>"pt"</code> is synonymous with <code>"pt-PT"</code>),
Romanian (<code>"ro"</code>),
Russian (<code>"ru"</code>),
Serbian (<code>"sr"</code>),
Slovak (<code>"sk"</code>),
Slovenian (<code>"sl"</code>),
Spanish (<code>"es"</code>),
Swiss German (<code>"gsw"</code>),
Turkish (<code>"tr"</code>),
Vietnamese (<code>"vi"</code>).
Note that the language names correspond to the ISO 639 codes
(<a href="https://www.loc.gov/standards/iso639-2/php/code_list.php">https://www.loc.gov/standards/iso639-2/php/code_list.php</a>)
or IETF language tags (<a href="https://en.wikipedia.org/wiki/IETF_language_tag">https://en.wikipedia.org/wiki/IETF_language_tag</a>) if
no ISO 639 codes exists (as for Brazilian Portuguese).
For more details about the underlying text file in DCF format, see
<a href="https://www.R-exams.org/tutorials/nops_language/">https://www.R-exams.org/tutorials/nops_language/</a>
</p>


<h3>Value</h3>

<p>A list of exams as generated by <code><a href="#topic+xexams">xexams</a></code> is
returned invisibly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## load package and enforce par(ask = FALSE)
## additionally, for simplicity, enforce using the basic
## tools::texi2dvi() LaTeX interface instead of the more
## flexible/robust tinytex::latexmk()
library("exams")
oopt &lt;- options(device.ask.default = FALSE, exams_tex = "tools")

## define an exam (= list of exercises)
myexam &lt;- list(
  "tstat2.Rmd",
  "ttest.Rmd",
  "relfreq.Rmd",
  "anova.Rmd",
  c("boxplots.Rmd", "scatterplot.Rmd"),
  "cholesky.Rmd"
)

if(interactive()) {
## compile a single random exam (displayed on screen)
exams2nops(myexam, duplex = FALSE, language = "de")
}

## create multiple exams on the disk (in a
## temporary directory)
dir.create(mydir &lt;- tempfile())

## generate NOPS exam in temporary directory
set.seed(403)
ex1 &lt;- exams2nops(myexam, n = 2, dir = mydir)
dir(mydir)


## use a few customization options: different
## university/logo and language/title
## with a replacement sheet but for non-duplex printing
set.seed(403)
ex2 &lt;- exams2nops(myexam, n = 2, dir = mydir,
  institution = "Universit\\\"at Innsbruck",
  name = "uibk", logo = "uibk-logo-bw.png",
  title = "Klausur", language = "de",
  replacement = TRUE, duplex = FALSE)
dir(mydir)


options(exams_tex = oopt$exams_tex)
</code></pre>

<hr>
<h2 id='exams2openolat'>Generation of Exams for OpenOlat</h2><span id='topic+exams2openolat'></span><span id='topic+openolat_config'></span>

<h3>Description</h3>

<p>Automatic generation of exams in QTI 2.1 (or 1.2) with some
tweaks optimized for OpenOlat.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  exams2openolat(file, n = 1L, dir = ".", name = "olattest",
    qti = "2.1", config = TRUE, converter = "pandoc-mathjax", table = TRUE,
    maxattempts = 1, cutvalue = NULL, ...)

  openolat_config(cancel = FALSE, suspend = FALSE, scoreprogress = FALSE,
    questionprogress = FALSE, maxscoreitem = TRUE, menu = TRUE,
    titles = TRUE, notes = FALSE, hidelms = TRUE, hidefeedbacks = FALSE,
    blockaftersuccess = FALSE, attempts = 1, anonym = FALSE,
    manualcorrect = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams2openolat_+3A_file">file</code></td>
<td>
<p>character. A specification of a (list of) exercise files.</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_n">n</code></td>
<td>
<p>integer. The number of copies to be compiled from <code>file</code>.</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_dir">dir</code></td>
<td>
<p>character. The default is the current working directory.</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_name">name</code></td>
<td>
<p>character. A name prefix for resulting exercises and ZIP file.</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_qti">qti</code></td>
<td>
<p>character indicating whether QTI <code>"1.2"</code> or <code>"2.1"</code>
(default) should be generated.</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_config">config</code></td>
<td>
<p>logical or named list with arguments to be passed to
function <code>openolat_config</code>, for adding an OpenOlat-specifc configuration
file <code>QTI21PackageConfig.xml</code> to the exam. If set to <code>config = FALSE</code>,
no configuration file is added (which was the default behavior up to R/exams 2.3.6).
Setting <code>config = TRUE</code> is equivalent to <code>config = list()</code> or
<code>config = openolat_config()</code> (which is the current default, starting from R/exams 2.4.0).
Custom configurations can be specified using the syntax <code>config = list(...)</code>,
see the details on the possible arguments below.</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_converter">converter</code></td>
<td>
<p>character passed on to <code><a href="#topic+make_exercise_transform_html">make_exercise_transform_html</a></code>,
indicating the type of converter from LaTeX/Markdown to HTML. Defaults
to HTML with MathJax (and OpenOlat-specific fixups).</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_table">table</code></td>
<td>
<p>logical or character. Should a dedicated table class be
used in the HTML for OpenOlat? For details see below.</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_maxattempts">maxattempts</code></td>
<td>
<p>integer. The maximum attempts for one question within an exam.
Set to <code>Inf</code> or <code>0</code> for unlimited attempts. For a finite number of attempts this
must be smaller than <code>100000</code>. See also <code>attempts</code> below for allowing more
than one attempt for the exam as a whole.</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_cutvalue">cutvalue</code></td>
<td>
<p>numeric. The number of points at which the exam is passed. If set to
<code>NULL</code> (default) or equivalently <code>NA</code>, no cutvalue is set and the result
of the exam is just the number of points.</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_...">...</code></td>
<td>
<p>arguments passed on to <code><a href="#topic+exams2qti21">exams2qti21</a></code> (or
<code><a href="#topic+exams2qti12">exams2qti12</a></code>, respectively). See the corresponding
manual pages for further important arguments such as
<code>solutionswitch</code>, <code>casesensitive</code>, <code>cloze_schoice_display</code>
<code>navigation</code>, <code>shufflesections</code>, <code>eval</code>, <code>selection</code>,
among many others.</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_cancel">cancel</code></td>
<td>
<p>logical. Are participants allowed to cancel an exam after starting it?
(Default: <code>FALSE</code>.)</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_suspend">suspend</code></td>
<td>
<p>logical. Are participants allowed to suspend an exam after starting it
(in order to continue it later)? (Default: <code>FALSE</code>.)</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_scoreprogress">scoreprogress</code></td>
<td>
<p>logical. Should the progress of the score/points achieved so far
be displayed during the exam? (Default: <code>FALSE</code>.)</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_questionprogress">questionprogress</code></td>
<td>
<p>logical. Should the number of questions solved so far be
displayed during the exam? (Default: <code>FALSE</code>.)</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_maxscoreitem">maxscoreitem</code></td>
<td>
<p>logical. Should the maximum score of a question/item be displayed?
(Default: <code>TRUE</code>.)</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_menu">menu</code></td>
<td>
<p>logical. Should the menu be displayed during the exam? (Default: <code>TRUE</code>.)</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_titles">titles</code></td>
<td>
<p>logical. Should question titles be displayed during the exam?
(Default: <code>TRUE</code>.)</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_notes">notes</code></td>
<td>
<p>logical. Should participants be enabled to take notes in OpenOlat during
the exam? (Default: <code>FALSE</code>.)</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_hidelms">hidelms</code></td>
<td>
<p>logical. Should access to the OpenOlat learning management system be
hidden during the exam? (Default: <code>TRUE</code>.)</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_hidefeedbacks">hidefeedbacks</code></td>
<td>
<p>logical. Should feedbacks be hidden? (Default: <code>FALSE</code>.)</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_blockaftersuccess">blockaftersuccess</code></td>
<td>
<p>logical. Should the exam be blocked after successful completion?
(Default: <code>FALSE</code>.)</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_attempts">attempts</code></td>
<td>
<p>integer. How many attempts are allowed for the exam as a whole?
Note that this should not be confused with the <code>maxattempts</code> for a question
within the exam (see above).</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_anonym">anonym</code></td>
<td>
<p>logical. Should anonymous users be allowed to take the exam? (Default: <code>FALSE</code>.)</p>
</td></tr>
<tr><td><code id="exams2openolat_+3A_manualcorrect">manualcorrect</code></td>
<td>
<p>logical. Should the points and pass/fail status from the exam
be evaluated manually? (Default: <code>FALSE</code>.)</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>exams2openolat</code> is a convenience interface to <code><a href="#topic+exams2qti12">exams2qti12</a></code>
and <code><a href="#topic+exams2qti21">exams2qti21</a></code> for generating either QTI 1.2 or 2.1
(default) output with some small tweaks for OpenOlat. Specifically, the MathJax
and table output from pandoc is post-processed as expected by OpenOlat. See the
corresponding manual page for many more arguments that are supported by
<code>exams2openolat</code>.
</p>
<p>Dedicated <code>table</code> classes currently include: Full-width tables with borders
(<code>"b_grid"</code>, <code>"b_border"</code>) or without (<code>"b_full"</code>, <code>"b_borderless"</code>).
Or regular tables without background color (<code>"b_middle"</code>) or with white grid
and color background (<code>"b_gray"</code>, <code>"b_red"</code>, <code>"b_green"</code>, <code>"b_blue"</code>,
<code>"b_yellow"</code>). Setting <code>table = TRUE</code> corresponds to <code>table = "b_gray"</code>.
</p>
<p>In addition to controlling the behavior of the exam and its questions via the standard
QTI 2.1 options (see <code><a href="#topic+exams2qti21">exams2qti21</a></code>), it is possible to specify
certain OpenOlat-specific configurations via an additional XML file to be added to the
ZIP output. This is why these options are not part of <code>exams2qti21</code> but are provided in the
separate wrapper function <code>openolat_config</code>. As the resulting XML configuration file
is not part of the official OpenOlat interface, it may be subject to more changes in the future.
</p>


<h3>Value</h3>

<p><code>exams2openolat</code> returns a list of exams as generated by <code><a href="#topic+xexams">xexams</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exams2qti12">exams2qti12</a></code>,
<code><a href="#topic+exams2qti21">exams2qti21</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## load package and enforce par(ask = FALSE)
library("exams")
options(device.ask.default = FALSE)

## define an exams (= list of exercises)
myexam &lt;- list(
  "boxplots.Rmd",
  c("tstat.Rmd", "ttest.Rmd", "confint.Rmd"),
  c("regression.Rmd", "anova.Rmd"),
  c("scatterplot.Rmd", "boxhist.Rmd"),
  "relfreq.Rmd"
)

## output directory
dir.create(mydir &lt;- tempfile())

## generate .zip with OpenOlat test in temporary directory
exams2openolat(myexam, n = 3, dir = mydir)
dir(mydir)
</code></pre>

<hr>
<h2 id='exams2pandoc'>Generation of Exams via Pandoc</h2><span id='topic+exams2pandoc'></span>

<h3>Description</h3>

<p>Automatic generation of exams via pandoc, by default in docx format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  exams2pandoc(file, n = 1L, nsamp = NULL, dir = ".",
    name = "pandoc", type = "docx", template = "plain.tex",
    question = "Question", solution = "Solution",
    header = list(Date = Sys.Date()), inputs = NULL, options = NULL,
    quiet = TRUE, resolution = 100, width = 4, height = 4, svg = FALSE,
    encoding = "UTF-8", edir = NULL, tdir = NULL, sdir = NULL, 
    verbose = FALSE, points = NULL, exshuffle = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams2pandoc_+3A_file">file</code></td>
<td>
<p>character. A specification of a (list of) exercise files.</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_n">n</code></td>
<td>
<p>integer. The number of copies to be compiled from <code>file</code>.</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_nsamp">nsamp</code></td>
<td>
<p>integer. The number(s) of exercise files sampled from each
list element of <code>file</code>. Sampling without replacement is used
if possible. (Only if some element of <code>nsamp</code> is larger than
the length of the corresponding element in <code>file</code>, sampling
with replacement is used.)</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_dir">dir</code></td>
<td>
<p>character specifying the output directory (default:
current working directory). If only a single HTML file is produced
and no <code>dir</code> is explicitly specified, the file is displayed in the
browser rather than saved in <code>dir</code>.</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_name">name</code></td>
<td>
<p>character. A name prefix for resulting exercises.</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_type">type</code></td>
<td>
<p>character. The file type to convert to using pandoc. The default is
<code>"docx"</code> (but other choices are also supported, e.g., <code>"odt"</code>,
<code>"html"</code>, <code>"markdown"</code> etc.).</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_template">template</code></td>
<td>
<p>character. A specification of a template in either
LaTeX, HTML, or Markdown format. The default is to use the <code>"plain.tex"</code>
file provided but an alternative <code>"plain.html"</code> is also available.</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_question">question</code></td>
<td>
<p>character or logical. Should the question be included in the
output? If <code>question</code> is a character it will be used as a header for
resulting questions.</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_solution">solution</code></td>
<td>
<p>character or logical, see argument <code>question</code>.</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_header">header</code></td>
<td>
<p>list. A list of named character strings (or functions generating such)
to be substituted in the <code>template</code>.</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_inputs">inputs</code></td>
<td>
<p>character. Names of files that are needed as inputs for the
<code>template</code> (e.g., images, headers). Either the full path
must be given or the file needs to be in <code>edir</code>.</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_options">options</code></td>
<td>
<p>character. A string of options to be passed on to
<code><a href="rmarkdown.html#topic+pandoc_convert">pandoc_convert</a></code>.</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_quiet">quiet</code></td>
<td>
<p>logical. Should output be suppressed when calling
<code><a href="#topic+xweave">xweave</a></code>?</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_resolution">resolution</code>, <code id="exams2pandoc_+3A_width">width</code>, <code id="exams2pandoc_+3A_height">height</code></td>
<td>
<p>numeric. Options for rendering PNG (or SVG)
graphics passed to <code><a href="#topic+xweave">xweave</a></code>.</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_svg">svg</code></td>
<td>
<p>logical. Should graphics be rendered in SVG or PNG (default)?</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_encoding">encoding</code></td>
<td>
<p>character, ignored. The encoding is always assumed to be UTF-8.</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_edir">edir</code></td>
<td>
<p>character specifying the path of the directory (along with its
sub-directories) in which the files in <code>file</code> are stored
(see also <code><a href="#topic+xexams">xexams</a></code>).</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_tdir">tdir</code></td>
<td>
<p>character specifying a temporary directory, by default
this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>. Note that this
is cleaned up (i.e., existing files are deleted) and only certain
temporary files are preserved.</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_sdir">sdir</code></td>
<td>
<p>character specifying a directory for storing supplements, by
default this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>.</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_verbose">verbose</code></td>
<td>
<p>logical. Should information on progress of exam generation
be reported?</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_points">points</code></td>
<td>
<p>integer. How many points should be assigned to each exercise? Note that this
argument overules any exercise points that are provided within the <code>expoints</code> tags
of the exercise files (if any). The vector of points supplied should either have
length 1 or the number of exercises in the exam.</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_exshuffle">exshuffle</code></td>
<td>
<p>logical or integer. If the <code>exshuffle</code>
argument is non-<code>NULL</code> it is used to overrule the <code>exshuffle</code>
tag from the <code>file</code> (e.g., <code>exshuffle = FALSE</code> can be used
to keep all available answers without permutation).</p>
</td></tr>
<tr><td><code id="exams2pandoc_+3A_...">...</code></td>
<td>
<p>currently not used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>exams2pandoc</code> can generate exams in various output formats
(by default docx) using <code><a href="#topic+xexams">xexams</a></code> and
<code><a href="rmarkdown.html#topic+pandoc_convert">pandoc_convert</a></code>. It proceeds by (1) calling
<code><a href="#topic+xweave">xweave</a></code> on each exercise, (2) reading the resulting
LaTeX or Markdown code, (3) transforming the code to the markup of
some exam template (either LaTeX, HTML, or Markdown), (4) embedding the
code in a template and converting it to the desired output format
using pandoc.
</p>
<p>For steps (1) and (2) the standard drivers in <code>xexams</code> are used.
</p>
<p>For step (3) a suitable transformation function is set up on the fly
using <code><a href="#topic+make_exercise_transform_pandoc">make_exercise_transform_pandoc</a></code>. Depending
on which format the template uses (LaTeX or HTML or Markdown) the
transformation may or may not be trivial.
</p>
<p>For step (4) all exercises are inserted into the template (and also
replacing certain additional tags from <code>header</code>) and then
<code><a href="rmarkdown.html#topic+pandoc_convert">pandoc_convert</a></code> is used to convert to the
desired output format (one file for each exam). In principle, all output
types of pandoc are supported, but most of them have not been tested.
(The main motivation for <code>exams2pandoc</code> was the generation of
<code>"docx"</code> or <code>"odt"</code> files.)
</p>


<h3>Value</h3>

<p><code>exams2pandoc</code> returns a list of exams as generated by <code><a href="#topic+xexams">xexams</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+xexams">xexams</a></code>,
<code><a href="rmarkdown.html#topic+pandoc_convert">pandoc_convert</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## load package and enforce par(ask = FALSE)
options(device.ask.default = FALSE)

## define an exams (= list of exercises)
myexam &lt;- list(
  "boxplots.Rmd",
  c("tstat.Rmd", "ttest.Rmd", "confint.Rmd"),
  c("regression.Rmd", "anova.Rmd"),
  c("scatterplot.Rmd", "boxhist.Rmd"),
  "relfreq.Rmd"
)

## output directory
dir.create(mydir &lt;- tempfile())

## compile two docx and odt versions each
set.seed(1090)
exams2pandoc(myexam, n = 2, dir = mydir, type = "docx")
set.seed(1090)
exams2pandoc(myexam, n = 2, dir = mydir, type = "odt")
</code></pre>

<hr>
<h2 id='exams2particify'>Generation of Exam/Quiz Sessions in Particify Format</h2><span id='topic+exams2particify'></span>

<h3>Description</h3>

<p>Interface for generating comma-separated files for import
in the audience response system Particify.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exams2particify(file, n = 1L, dir = ".", name = "particify",
  quiet = TRUE, resolution = 100, width = 4, height = 4, svg = FALSE,
  abstention = FALSE, fix_choice = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams2particify_+3A_file">file</code></td>
<td>
<p>character. A specification of a (list of) exercise files.</p>
</td></tr>
<tr><td><code id="exams2particify_+3A_n">n</code></td>
<td>
<p>integer. The number of copies to be compiled from <code>file</code>.</p>
</td></tr>
<tr><td><code id="exams2particify_+3A_dir">dir</code></td>
<td>
<p>character. The default is either display on the screen or
the current working directory.</p>
</td></tr>
<tr><td><code id="exams2particify_+3A_name">name</code></td>
<td>
<p>character. A name prefix for resulting exercises and RDS file.</p>
</td></tr>
<tr><td><code id="exams2particify_+3A_quiet">quiet</code></td>
<td>
<p>logical. Should output be suppressed when calling
<code><a href="#topic+xweave">xweave</a></code> and <code><a href="tools.html#topic+texi2dvi">texi2dvi</a></code>.</p>
</td></tr>
<tr><td><code id="exams2particify_+3A_resolution">resolution</code>, <code id="exams2particify_+3A_width">width</code>, <code id="exams2particify_+3A_height">height</code></td>
<td>
<p>numeric, passed to <code><a href="#topic+xweave">xweave</a></code>.</p>
</td></tr>
<tr><td><code id="exams2particify_+3A_svg">svg</code></td>
<td>
<p>logical. Should graphics be rendered in SVG or PNG (default)?</p>
</td></tr>
<tr><td><code id="exams2particify_+3A_abstention">abstention</code></td>
<td>
<p>logical. Are abstentions allowed for choice questions?</p>
</td></tr>
<tr><td><code id="exams2particify_+3A_fix_choice">fix_choice</code></td>
<td>
<p>logical. Should math markup be removed in single and multiple
choice lists? (This may be needed for older Particify versions where math
markup is rendered in the question itself but not the choice list.)</p>
</td></tr>
<tr><td><code id="exams2particify_+3A_...">...</code></td>
<td>
<p>arguments passed on to <code><a href="#topic+xexams">xexams</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>exams2particify</code> generates exams in comma-separated values (CSV)
format that can be imported into the audience response system Particify
(<a href="https://particify.de/">https://particify.de/</a>) using <code><a href="#topic+xexams">xexams</a></code>.
In particular, single-choice and multiple-choice exercises are fully
supported while num and string question are converted to open-ended text
questions.
</p>
<p>The function proceeds by (1) calling <code><a href="#topic+xweave">xweave</a></code>
on each exercise, (2) reading the resulting Markdown/LaTeX text, (3) transforming
the text to Markdown, and (4) embedding the Markdown text into the
CSV format for Particify.
For steps (1) and (2) the standard drivers in <code>xexams</code> are used.  
For step (3) a suitable transformation function is set up on the fly
using <code><a href="#topic+make_exercise_transform_pandoc">make_exercise_transform_pandoc</a></code>.
For step (4) a custom writer function is set up on the fly.
</p>


<h3>Value</h3>

<p>A list of exams as generated by <code><a href="#topic+xexams">xexams</a></code> is
returned invisibly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## load package and enforce par(ask = FALSE)
library("exams")
options(device.ask.default = FALSE)

## output directory
dir.create(mydir &lt;- tempfile())

## create a CSV file particify-1.csv for import in Particify
exams2particify(c("swisscapital.Rmd", "capitals.Rmd", "deriv2.Rmd",
  "boxplots.Rmd", "ttest.Rmd", "function.Rmd"), dir = mydir)
</code></pre>

<hr>
<h2 id='exams2pdf'>Generation of Exams in PDF Format</h2><span id='topic+exams2pdf'></span><span id='topic+make_exams_write_pdf'></span>

<h3>Description</h3>

<p>Automatic generation of exams in PDF format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  exams2pdf(file, n = 1L, nsamp = NULL, dir = ".", template = "plain", 
    inputs = NULL, header = list(Date = Sys.Date()), name = NULL, 
    control = NULL, encoding = "UTF-8", quiet = TRUE, transform = NULL,
    edir = NULL, tdir = NULL, sdir = NULL, texdir = NULL, texengine = "pdflatex",
    verbose = FALSE, rds = FALSE, points = NULL, seed = NULL, 
    attachfile = FALSE, exshuffle = NULL, ...)
  
  make_exams_write_pdf(template = "plain", inputs = NULL,
    header = list(Date = Sys.Date()), name = NULL, encoding = "UTF-8",
    quiet = TRUE, control = NULL, texdir = NULL, texengine = "pdflatex")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams2pdf_+3A_file">file</code></td>
<td>
<p>character. A specification of a (list of) exercise files.</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_n">n</code></td>
<td>
<p>integer. The number of copies to be compiled from <code>file</code>.</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_nsamp">nsamp</code></td>
<td>
<p>integer. The number(s) of exercise files sampled from each
list element of <code>file</code>. Sampling without replacement is used
if possible. (Only if some element of <code>nsamp</code> is larger than
the length of the corresponding element in <code>file</code>, sampling
with replacement is used.)</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_dir">dir</code></td>
<td>
<p>character specifying the output directory (default:
current working directory). If only a single PDF file is produced
and no <code>dir</code> is explicitly specified, the file is displayed on the
screen rather than saved in <code>dir</code>.</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_template">template</code></td>
<td>
<p>character. A specification of a LaTeX template. The package
currently provides <code>"exam"</code>, <code>"solution"</code>, <code>"plain"</code>,
among others. The default is to use the <code>"plain.tex"</code> file unless
there are Rmd exercises in <code>file</code> for which <code>"plain8.tex"</code>
is used. For further details see below.</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_inputs">inputs</code></td>
<td>
<p>character. Names of files that are needed as inputs during
LaTeX compilation (e.g., style files, headers). Either the full path
must be given or the file needs to be in <code>edir</code>.</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_header">header</code></td>
<td>
<p>list. A list of further options to be passed to
the LaTeX files.</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_name">name</code></td>
<td>
<p>character. A name prefix for resulting exercises, of the same
length as <code>template</code>. By default (if <code>name</code> is <code>NULL</code>)
the base name of <code>template</code> is used.</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_control">control</code></td>
<td>
<p>A list of control arguments for the appearance of
multiple choice results (see details).</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_encoding">encoding</code></td>
<td>
<p>character, ignored. The encoding is always assumed to be UTF-8.</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_quiet">quiet</code></td>
<td>
<p>logical. Should output be suppressed when calling
<code><a href="#topic+xweave">xweave</a></code> and <code><a href="tools.html#topic+texi2dvi">texi2dvi</a></code>.</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_transform">transform</code></td>
<td>
<p>function. An optional transform driver passed to
<code>xexams</code> (by default no transformation is used).</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_edir">edir</code></td>
<td>
<p>character specifying the path of the directory (along with its
sub-directories) in which the files in <code>file</code> are stored
(see also <code><a href="#topic+xexams">xexams</a></code>).</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_tdir">tdir</code></td>
<td>
<p>character specifying a temporary directory, by default
this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>. Note that this
is cleaned up (i.e., existing files are deleted) and only certain
temporary files are preserved.</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_sdir">sdir</code></td>
<td>
<p>character specifying a directory for storing supplements, by
default this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>.</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_texdir">texdir</code></td>
<td>
<p>character specifying a directory for running <code><a href="tools.html#topic+texi2dvi">texi2dvi</a></code>
in. By default this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code> (and deleted
again) but, if specified by the user, the temporary LaTeX files from the last
iteration are preserved and not deleted. This is intended especially for debugging purposes.</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_texengine">texengine</code></td>
<td>
<p>character. Passed to <code><a href="tinytex.html#topic+latexmk">latexmk</a></code> if <code>tinytex</code> is available.</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_verbose">verbose</code></td>
<td>
<p>logical. Should information on progress of exam generation
be reported?</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_rds">rds</code></td>
<td>
<p>logical indicating whether the return list should also be
saved as an RDS data file.</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_points">points</code></td>
<td>
<p>integer. How many points should be assigned to each exercise? Note that this
argument overules any exercise points that are provided within the <code>expoints</code> tags
of the exercise files (if any). The vector of points supplied should either have
length 1 or the number of exercises in the exam.</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_seed">seed</code></td>
<td>
<p>integer matrix or logical. Either <code>NULL</code> (default), logical, or a
matrix of random seeds for each possible exercise to be set prior to calling
<code>driver@sweave</code>. If <code>NULL</code> no random seeds are set. If a matrix,
the number of rows must be <code>n</code> and the number of columns must
correspond to <code>unlist(file)</code>. If <code>TRUE</code> a suitable matrix of seeds
is sampled.</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_attachfile">attachfile</code></td>
<td>
<p>logical. Should the LaTeX commands <code>url</code> and <code>href</code>
be replaced by <code>attachfile</code> commends when used for supplementary files?
This enables embedding these supplementary files directly into the PDF when
<code>template</code> loads the <code>attachfile</code> LaTeX package.</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_exshuffle">exshuffle</code></td>
<td>
<p>logical or integer. If the <code>exshuffle</code>
argument is non-<code>NULL</code> it is used to overrule the <code>exshuffle</code>
tag from the <code>file</code> (e.g., <code>exshuffle = FALSE</code> can be used
to keep all available answers without permutation).</p>
</td></tr>
<tr><td><code id="exams2pdf_+3A_...">...</code></td>
<td>
<p>further arguments passed on to <code><a href="#topic+xweave">xweave</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>exams2pdf</code> is a more flexible re-implementation of the old (version 1)
<code><a href="#topic+exams">exams</a></code> function (Gruen and Zeileis 2009), using the new extensible
<code><a href="#topic+xexams">xexams</a></code> framework (Zeileis et al. 2014). A detailed
introduction is provided in <code>vignette("exams", package = "exams")</code>, also
pointing out relative advantages of the new interface.
</p>
<p><code>exams2pdf</code> proceeds by using <code>make_exams_write_pdf</code> to set up a custom
<code>driver$write</code> function on the fly before calling <code>xexams</code>.
This custom driver combines each exams with the desired <code>template</code>
(and <code>inputs</code> etc.) and then calls <code><a href="tools.html#topic+texi2dvi">texi2dvi</a></code>
on the resulting LaTeX file to produce PDF output.  
For a single exam (<code>n = 1</code>) the resulting PDF is displayed on
screen (unless <code>dir</code> is explicitly specified) while for <code>n &gt; 1</code> 
the PDF files are stored in the output directory <code>dir</code>.
</p>
<p>The argument <code>control</code> is specified by a named list, currently with elements
<code>mchoice.symbol</code> and <code>cloze.collapse</code>. <code>mchoice.symbol</code>
has to be a character vector with elements <code>True</code> and <code>False</code>,
specifying the symbol used for the questionnaire output in the final PDF file.
<code>cloze.collapse</code> specifies the character used for collapsing mchoice/schoice
alternatives within a cloze exercise. By default, these are separated by <code>" / "</code>
but with <code>cloze.collapse = "\\\\"</code> each alternative would be in a new line.
Finally, <code>cloze.collapse = "enumerate"</code> can also be used which employs a nested
enumerate environment. In the latter case, the questionnaire uses <code>exclozechoice</code>
rather than <code>exmchoice</code> (see <code>exam.tex</code> or <code>solution.tex</code> for an
illustration.
</p>


<h3>Value</h3>

<p><code>exams2pdf</code> returns a list of exams as generated by <code><a href="#topic+xexams">xexams</a></code>.
</p>
<p><code>make_exams_write_pdf</code> returns a function that is suitable for being
supplied as <code>driver$write</code> to <code><a href="#topic+xexams">xexams</a></code>.
</p>


<h3>References</h3>

<p>Gruen B, Zeileis A (2009). Automatic Generation of Exams in R.
<em>Journal of Statistical Software</em>, <b>29</b>(10), 1&ndash;14.
<a href="https://doi.org/10.18637/jss.v029.i10">doi:10.18637/jss.v029.i10</a>.
</p>
<p>Zeileis A, Umlauf N, Leisch F (2014).
Flexible Generation of E-Learning Exams in R: Moodle Quizzes, OLAT Assessments, and Beyond.
<em>Journal of Statistical Software</em>, <b>58</b>(1), 1&ndash;36.
<a href="https://doi.org/10.18637/jss.v058.i01">doi:10.18637/jss.v058.i01</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+xexams">xexams</a></code>,
<code><a href="#topic+exams">exams</a></code>,
<code><a href="tools.html#topic+texi2dvi">texi2dvi</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## load package and enforce par(ask = FALSE)
##
## additionally, for simplicity, enforce using the basic
## tools::texi2dvi() LaTeX interface instead of the more
## flexible/robust tinytex::latexmk()
library("exams")
oopt &lt;- options(device.ask.default = FALSE, exams_tex = "tools")

if(interactive()) {
## compile a single random exam (displayed on screen)
exams2pdf(list(
  "boxplots.Rmd",
  c("tstat.Rmd", "ttest.Rmd", "confint.Rmd"),
  c("regression.Rmd", "anova.Rmd"),
  "scatterplot.Rmd",
  "relfreq.Rmd"
))
}

options(exams_tex = oopt$exams_tex)
</code></pre>

<hr>
<h2 id='exams2qti12'>Generation of Exams in QTI 1.2 Format</h2><span id='topic+exams2qti12'></span><span id='topic+make_itembody_qti12'></span><span id='topic+exams2qti'></span><span id='topic+make_itembody_qti'></span>

<h3>Description</h3>

<p>Automatic generation of exams in QTI 1.2 format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  exams2qti12(file, n = 1L, nsamp = NULL, dir = ".",
    name = NULL, quiet = TRUE, edir = NULL,
    tdir = NULL, sdir = NULL, verbose = FALSE, rds = FALSE,
    resolution = 100, width = 4, height = 4, svg = FALSE, encoding = "UTF-8",
    num = NULL, mchoice = NULL,
    schoice = mchoice, string = NULL, cloze = NULL,
    template = "qti12", duration = NULL,
    stitle = "Exercise", ititle = "Question",
    adescription = "Please solve the following exercises.",
    sdescription = "Please answer the following question.",
    maxattempts = 1, cutvalue = 0, solutionswitch = TRUE,
    zip = TRUE, points = NULL,
    eval = list(partial = TRUE, negative = FALSE),
    converter = NULL, envir = NULL, xmlcollapse = FALSE,
    flavor = c("plain", "openolat", "canvas", "ilias"), ...)

  make_itembody_qti12(rtiming = FALSE, shuffle = FALSE,
    rshuffle = shuffle, minnumber = NULL, maxnumber = NULL,
    defaultval = NULL, minvalue = NULL, maxvalue = NULL,
    cutvalue = NULL, enumerate = TRUE, digits = NULL,
    tolerance = is.null(digits), maxchars = 12,
    eval = list(partial = TRUE, negative = FALSE),
    fix_num = TRUE, flavor = "plain")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams2qti12_+3A_file">file</code></td>
<td>
<p>character. A specification of a (list of) exercise files.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_n">n</code></td>
<td>
<p>integer. The number of copies to be compiled from <code>file</code>.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_nsamp">nsamp</code></td>
<td>
<p>integer. The number(s) of exercise files sampled from each
list element of <code>file</code>. Sampling without replacement is used
if possible. (Only if some element of <code>nsamp</code> is larger than
the length of the corresponding element in <code>file</code>, sampling
with replacement is used.)</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_dir">dir</code></td>
<td>
<p>character. The default is the current working directory.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_name">name</code></td>
<td>
<p>character. A name prefix for resulting exercises and ZIP file.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_quiet">quiet</code></td>
<td>
<p>logical. Should output be suppressed when calling
<code><a href="#topic+xweave">xweave</a></code>?</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_edir">edir</code></td>
<td>
<p>character specifying the path of the directory (along with its
sub-directories) in which the files in <code>file</code> are stored
(see also <code><a href="#topic+xexams">xexams</a></code>).</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_tdir">tdir</code></td>
<td>
<p>character specifying a temporary directory, by default
this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>. Note that this
is cleaned up (i.e., existing files are deleted) and only certain
temporary files are preserved.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_sdir">sdir</code></td>
<td>
<p>character specifying a directory for storing supplements, by
default this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_verbose">verbose</code></td>
<td>
<p>logical. Should information on progress of exam generation
be reported?</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_rds">rds</code></td>
<td>
<p>logical indicating whether the return list should also be
saved as an RDS data file.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_resolution">resolution</code>, <code id="exams2qti12_+3A_width">width</code>, <code id="exams2qti12_+3A_height">height</code></td>
<td>
<p>numeric. Options for rendering PNG (or SVG)
graphics passed to <code><a href="#topic+xweave">xweave</a></code>.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_svg">svg</code></td>
<td>
<p>logical. Should graphics be rendered in SVG or PNG (default)?</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_encoding">encoding</code></td>
<td>
<p>character, ignored. The encoding is always assumed to be UTF-8.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_num">num</code></td>
<td>
<p>function or named list applied to numerical (i.e., type <code>num</code>)
questions. If <code>num</code> is a function, <code>num</code> will be used
for generating the item body of the question, see function <code>make_itembody_qti12()</code>.
If <code>num</code> is a named list, these arguments will be passed to function
<code>make_itembody_qti12()</code>.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_mchoice">mchoice</code>, <code id="exams2qti12_+3A_schoice">schoice</code>, <code id="exams2qti12_+3A_string">string</code>, <code id="exams2qti12_+3A_cloze">cloze</code></td>
<td>
<p>function or named list applied to multiple choice,
single choice, string, and cloze questions (i.e., type <code>mchoice</code>, <code>schoice</code>,
<code>string</code>, and <code>cloze</code>), respectively. See argument <code>num</code> for more details.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_template">template</code></td>
<td>
<p>character. The QTI 1.2 template that should be used. Currently,
the package provides <code>"qti12.xml"</code>.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_duration">duration</code></td>
<td>
<p>integer. Set the duration of the exam in minutes.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_stitle">stitle</code></td>
<td>
<p>character. A title that should be used for the sections. May be a vector of
length 1 to use the same title for each section, or a vector containing different section
titles.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_ititle">ititle</code></td>
<td>
<p>character or <code>NULL</code>. A title that should be used for the assessment items.
May be a vector
of length 1 to use the same title for each item, or a vector containing different item
titles. Note that the maximum of different item titles is the number of sections/questions
that are used for the exam. Note, if <code>ititle = NULL</code>, simple numbering for the exercises
will be used, however, if the exercise contains meta info extitle, this title will be used.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_adescription">adescription</code></td>
<td>
<p>character. Description (of length 1) for the overall assessment (i.e., exam).</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_sdescription">sdescription</code></td>
<td>
<p>character. Vector of descriptions for each section, omitted if empty
(or <code>NULL</code> or <code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_maxattempts">maxattempts</code></td>
<td>
<p>integer. The maximum attempts for one question. This may also be a vector
so that the maximum number of attempts varies across questions. A value of <code>Inf</code> or
<code>0</code> signals that the attempts per question are not limited.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_cutvalue">cutvalue</code></td>
<td>
<p>numeric. The cutvalue at which the exam is passed.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_solutionswitch">solutionswitch</code></td>
<td>
<p>logical. Should the question/item solutionswitch be enabled?
In OLAT this means that the correct solution is shown after an incorrect solution
was entered by an examinee (i.e., this is typically only useful if <code>maxattempts = 1</code>).</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_zip">zip</code></td>
<td>
<p>logical. Should the resulting XML file (plus supplements) be zipped?</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_points">points</code></td>
<td>
<p>integer. How many points should be assigned to each exercise? Note that this
argument overules any exercise points that are provided within an <code>"\expoints{}"</code> tag
in the <code>.Rnw</code> file. The vector of points supplied is expanded to the number of exercises in
the exam.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_eval">eval</code></td>
<td>
<p>named list, specifies the settings for the evaluation policy, see function
<code><a href="#topic+exams_eval">exams_eval</a></code>.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_converter">converter</code></td>
<td>
<p>character. Argument passed on to <code>make_exercise_transform_html</code>.
The default for <code>converter</code> is set to <code>"ttm"</code> unless there are Rmd
exercises in <code>file</code> where <code>"pandoc"</code> is used.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_envir">envir</code></td>
<td>
<p>passed to <code><a href="#topic+xweave">xweave</a></code>.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_xmlcollapse">xmlcollapse</code></td>
<td>
<p>logical or character. Should line breaks be collapsed in the XML
code. If <code>TRUE</code> everything is collapsed with spaces (<code>" "</code>) but other collapse
characters could be supplied.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_flavor">flavor</code></td>
<td>
<p>character. Which QTI 1.2 &ldquo;flavor&rdquo; should be used? Some learning
management systems require that the QTI XML tags are used in a rather specific
and idiosyncratic way. Typically, users should not set this argument directly but
use the convenience interfaces <code><a href="#topic+exams2openolat">exams2openolat</a></code>, <code><a href="#topic+exams2canvas">exams2canvas</a></code>, 
or <code><a href="#topic+exams2ilias">exams2ilias</a></code> instead (which use the <code>flavor</code> argument internally
along with further customizations).</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_rtiming">rtiming</code>, <code id="exams2qti12_+3A_shuffle">shuffle</code>, <code id="exams2qti12_+3A_rshuffle">rshuffle</code>, <code id="exams2qti12_+3A_minnumber">minnumber</code>, <code id="exams2qti12_+3A_maxnumber">maxnumber</code>, <code id="exams2qti12_+3A_defaultval">defaultval</code>, <code id="exams2qti12_+3A_minvalue">minvalue</code>, <code id="exams2qti12_+3A_maxvalue">maxvalue</code></td>
<td>
<p>arguments used for QTI 1.2 item construction, for details see the XML
specification (see IMS Global Learning Consortium, Inc. 2002), especially Section 4.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_enumerate">enumerate</code></td>
<td>
<p>logical. Insert potential solutions in enumerated list?</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_digits">digits</code></td>
<td>
<p>integer. How many digits should be used for <code>num</code> exercises?</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_tolerance">tolerance</code></td>
<td>
<p>logical. Should tolerance intervals be used for checking if the supplied
<code>num</code> answer/number is correct? The default is to use tolerance intervals if <code>digits = NULL</code>.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_maxchars">maxchars</code></td>
<td>
<p>numeric. Lower bound for the number of characters in fill-in-blank
fields. The actual number of characters is selected as the maximum number of
characters of this value and the actual solution.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_fix_num">fix_num</code></td>
<td>
<p>logical. This is a special flag to enable/force the display of the
correct solutions for numeric exercises/answers as well as to obtain results when archiving tests.
Note that this is a workaround, which works e.g. within OLAT.</p>
</td></tr>
<tr><td><code id="exams2qti12_+3A_...">...</code></td>
<td>
<p>further arguments passed on to <code>make_exercise_transform_html</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Question &amp; Test Interoperability (QTI) is an international XML standard for specifying
e-learning tests established by the IMS Global Learning Consortium, Inc. (2002, 2012).
The standard evolved over various versions with the first release culminating in the QTI 1.2 standard
and the most commonly used stable version of the second release being QTI 2.1.
While both versions share many similarities, they also differ in many details.
Hence, separate functions <code>exams2qti12</code> and <code><a href="#topic+exams2qti21">exams2qti21</a></code> are provided.
Moreover, due to the flexibility of the QTI standard, different learning management systems employ
the standard in slightly different ways. Therefore, dedicated interfaces
<code><a href="#topic+exams2canvas">exams2canvas</a></code> and <code><a href="#topic+exams2ilias">exams2ilias</a></code> (both based on QTI 1.2),
and <code><a href="#topic+exams2openolat">exams2openolat</a></code> (based on either QTI 2.1 or 1.2) are provided
for the learning management systems Canvas, ILIAS, and OLAT/OpenOlat, respectively.
In addition, the interfaces <code><a href="#topic+exams2blackboard">exams2blackboard</a></code>, <code><a href="#topic+exams2testvision">exams2testvision</a></code>,
and the separate package <span class="pkg">exams2sakai</span> started as forks of the <code>exams2qti12</code> and
<code>exams2qti21</code> functions, respectively.
</p>
<p><code>exams2qti12</code> produces a <code>.zip</code> file that may be uploaded into different learning
management systems (see above). This includes the final XML file of the exam/assessment as well
as possible supplement folders that include images, data sets etc. used for the exam. It
proceeds by (1) calling <code><a href="#topic+xweave">xweave</a></code> on each exercise, (2) reading the
resulting Markdown and/or LaTeX code, (3) transforming the Markdown/LaTeX code to HTML,
and (4) embedding the HTML code in a XML file using the QTI 1.2 standards for assessments and
question items.
</p>
<p>For steps (1) and (2) the standard drivers in <code>xexams</code> are used. In step (3), a suitable
transformation function is set up on the fly using <code>make_exercise_transform_html</code>, see also
the details section in <code><a href="#topic+exams2html">exams2html</a></code>.
For step (4), the function will cycle through all questions and exams to generate the final XML
file in QTI 1.2 format. Therefore, each question will be included in the XML as one &quot;section&quot;.
The replicates of each question will be written as question items of the section.
The default XML template generates exams/assessments that sample one replicate of a question/item
for each section. Typically, the learning management systems sample the items from the different
sections independently so that one participant might receive the first random replication from
the first exercise but the third random replication from the second exercise, and so on.
</p>
<p>Templates other than the default <code>qti12.xml</code> provided in the <code>xml</code> folder of
this package could in principle also be specified. However, adapting these is a bit technical.
The assessment template must provide one section including one item. <code>exams2qti12</code> will then
use the single item template to generate all items, as well as the assessment and section specifications set within the template.
Note that all specifiers that have a leading <code>##</code> in the XML template will be replaced by suitable code in
<code>exams2qti12</code> and should always be provided in the template. I.e., the user may add
additional tags to the XML template or modify certain specifications, like the number of
replicates/items that should be sampled for each section etc.
</p>
<p>By default, the individual question/item bodies are generated by function
<code>make_itembody_qti12</code>, which checks the type of the question and
will produce suitable XML code. Note that for each question type, either the arguments of
<code>make_itembody_qti12</code> may be set within <code>num</code>, <code>mchoice</code>, <code>schoice</code>,
<code>string</code> and <code>cloze</code> in <code>exams2qti12</code>, by providing a named list of specifications
that should be used, or for each questiontype, a function that produces the item body XML code may
be provided to <code>num</code>, <code>mchoice</code>, <code>schoice</code>, <code>string</code> and <code>cloze</code>. E.g.,
<code>mchoice = list(shuffle = TRUE)</code> will force only multiple choice questions to have a shuffled
answerlist.
</p>
<p>Note that in very old OLAT/OpenOlat versions with QTI 1.2, <code>num</code> exercises are not officially supported but in fact work
correctly. The only drawback is that in certain settings the correct solution is not shown at the
end of the assessment (although it is used for all internal computations). Therefore, two workarounds
are implemented. Either <code>fix_num</code> can be set to <code>TRUE</code> (default), then a fix is added
by double-checking the result, or <code>digits</code> can be set to a fixed value (e.g., <code>digits = 2</code>).
In the latter case, the <code>num</code> exercise is represented by a <code>string</code>. Then the answer must
be provided exactly to the decimal places specified (e.g., if the exact solution is 16.4562, then the
correct answer in the test will be <code>"16.46"</code>, i.e., a character string of 5 characters).
</p>


<h3>Value</h3>

<p><code>exams2qti12</code> returns a list of exams as generated by <code><a href="#topic+xexams">xexams</a></code>.
</p>
<p><code>make_itembody_qti12</code> returns a function that generates the XML code
for the itembody tag in QTI 1.2 format.
</p>


<h3>References</h3>

<p>IMS Global Learning Consortium, Inc. (2002).
<em>IMS Question &amp; Test Interoperability: ASI XML Binding Specification Final Specification Version 1.2</em>.
<a href="https://www.imsglobal.org/question/qtiv1p2/imsqti_asi_bindv1p2.html">https://www.imsglobal.org/question/qtiv1p2/imsqti_asi_bindv1p2.html</a>
</p>
<p>IMS Global Learning Consortium, Inc. (2012).
<em>IMS Question &amp; Test Interoperability (QTI) XSD Binding Version 2.1 Final</em>.
<a href="https://www.imsglobal.org/question/qtiv2p1/imsqti_bindv2p1.html">https://www.imsglobal.org/question/qtiv2p1/imsqti_bindv2p1.html</a>
</p>
<p>Zeileis A, Umlauf N, Leisch F (2014).
Flexible Generation of E-Learning Exams in R: Moodle Quizzes, OLAT Assessments, and Beyond.
<em>Journal of Statistical Software</em>, <b>58</b>(1), 1&ndash;36.
<a href="https://doi.org/10.18637/jss.v058.i01">doi:10.18637/jss.v058.i01</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+xexams">xexams</a></code>,
<code><a href="tth.html#topic+ttm">ttm</a></code>,
<code><a href="tth.html#topic+tth">tth</a></code>,
<code><a href="#topic+tex2image">tex2image</a></code>,
<code><a href="#topic+make_exercise_transform_html">make_exercise_transform_html</a></code>,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## load package and enforce par(ask = FALSE)
library("exams")
options(device.ask.default = FALSE)

## define an exams (= list of exercises)
myexam &lt;- list(
  "boxplots.Rmd",
  c("tstat.Rmd", "ttest.Rmd", "confint.Rmd"),
  c("regression.Rmd", "anova.Rmd"),
  c("scatterplot.Rmd", "boxhist.Rmd"),
  "relfreq.Rmd"
)

## output directory
dir.create(mydir &lt;- tempfile())

## generate .zip with QTI 1.2 exam in temporary directory
## using a few customization options
exams2qti12(myexam, n = 3, dir = mydir,
  maxattempts = 3,
  num = list(digits = 1),
  mchoice = list(shuffle = TRUE, enumerate = FALSE)
)
dir(mydir)
</code></pre>

<hr>
<h2 id='exams2qti21'>Generation of Exams in QTI 2.1 Format</h2><span id='topic+exams2qti21'></span><span id='topic+make_itembody_qti21'></span>

<h3>Description</h3>

<p>Automatic generation of exams in QTI 2.1 format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  exams2qti21(file, n = 1L, nsamp = NULL, dir = ".",
    name = NULL, quiet = TRUE, edir = NULL,
    tdir = NULL, sdir = NULL, verbose = FALSE, rds = FALSE,
    resolution = 100, width = 4, height = 4, svg = FALSE, encoding  = "UTF-8",
    num = NULL, mchoice = NULL,
    schoice = mchoice, string = NULL, cloze = NULL,
    template = "qti21", duration = NULL,
    stitle = NULL, ititle = NULL,
    adescription = "Please solve the following exercises.", sdescription = "",
    maxattempts = 1, cutvalue = NULL, solutionswitch = TRUE,
    casesensitive = TRUE, cloze_schoice_display = "auto",
    navigation = "nonlinear", allowskipping = TRUE, allowreview = FALSE,
    allowcomment = FALSE, shufflesections = FALSE, zip = TRUE, points = NULL,
    eval = list(partial = TRUE, negative = FALSE),
    converter = NULL, envir = NULL, base64 = TRUE, mode = "hex",
    include = NULL, selection = c("pool", "exam"), ...)

  make_itembody_qti21(shuffle = FALSE, defaultval = NULL,
    minvalue = NULL, maxvalue = NULL, enumerate = TRUE,
    digits = NULL, tolerance = is.null(digits), maxchars = 12,
    eval = list(partial = TRUE, negative = FALSE),
    solutionswitch = TRUE, casesensitive = TRUE,
    cloze_schoice_display = c("auto", "buttons", "dropdown"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams2qti21_+3A_file">file</code></td>
<td>
<p>character. A specification of a (list of) exercise files.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_n">n</code></td>
<td>
<p>integer. The number of copies to be compiled from <code>file</code>.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_nsamp">nsamp</code></td>
<td>
<p>integer. The number(s) of exercise files sampled from each
list element of <code>file</code>. Sampling without replacement is used
if possible. (Only if some element of <code>nsamp</code> is larger than
the length of the corresponding element in <code>file</code>, sampling
with replacement is used.)</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_dir">dir</code></td>
<td>
<p>character. The default is the current working directory.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_name">name</code></td>
<td>
<p>character. A name prefix for resulting exercises and ZIP file.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_quiet">quiet</code></td>
<td>
<p>logical. Should output be suppressed when calling
<code><a href="#topic+xweave">xweave</a></code>?</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_edir">edir</code></td>
<td>
<p>character specifying the path of the directory (along with its
sub-directories) in which the files in <code>file</code> are stored
(see also <code><a href="#topic+xexams">xexams</a></code>).</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_tdir">tdir</code></td>
<td>
<p>character specifying a temporary directory, by default
this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>. Note that this
is cleaned up (i.e., existing files are deleted) and only certain
temporary files are preserved.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_sdir">sdir</code></td>
<td>
<p>character specifying a directory for storing supplements, by
default this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_verbose">verbose</code></td>
<td>
<p>logical. Should information on progress of exam generation
be reported?</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_rds">rds</code></td>
<td>
<p>logical indicating whether the return list should also be
saved as an RDS data file.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_resolution">resolution</code>, <code id="exams2qti21_+3A_width">width</code>, <code id="exams2qti21_+3A_height">height</code></td>
<td>
<p>numeric. Options for rendering PNG (or SVG)
graphics passed to <code><a href="#topic+xweave">xweave</a></code>.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_svg">svg</code></td>
<td>
<p>logical. Should graphics be rendered in SVG or PNG (default)?</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_encoding">encoding</code></td>
<td>
<p>character, ignored. The encoding is always assumed to be UTF-8.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_num">num</code></td>
<td>
<p>function or named list applied to numerical (i.e., type <code>num</code>)
questions. If <code>num</code> is a function, <code>num</code> will be used
for generating the item body of the question, see function <code>make_itembody_qti21()</code>.
If <code>num</code> is a named list, these arguments will be passed to function
<code>make_itembody_qti21()</code>.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_mchoice">mchoice</code>, <code id="exams2qti21_+3A_schoice">schoice</code>, <code id="exams2qti21_+3A_string">string</code>, <code id="exams2qti21_+3A_cloze">cloze</code></td>
<td>
<p>function or named list applied to multiple choice,
single choice, string, and cloze questions (i.e., type <code>mchoice</code>, <code>schoice</code>,
<code>string</code>, and <code>cloze</code>), respectively. See argument <code>num</code> for more details.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_template">template</code></td>
<td>
<p>character. The QTI 2.1 template that should be used. Currently,
the package provides <code>"qti21.xml"</code>.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_duration">duration</code></td>
<td>
<p>integer. Set the duration of the exam in minutes.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_stitle">stitle</code></td>
<td>
<p>character. A title that should be used for the sections. May be a vector of
length 1 to use the same title for each section, or a vector containing different section
titles.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_ititle">ititle</code></td>
<td>
<p>character or <code>NULL</code>. A title that should be used for the assessment items.
May be a vector
of length 1 to use the same title for each item, or a vector containing different item
titles. Note that the maximum of different item titles is the number of sections/questions
that are used for the exam. Note, if <code>ititle = NULL</code>, simple numbering for the exercises
will be used, however, if the exercise contains meta info extitle, this title will be used.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_adescription">adescription</code></td>
<td>
<p>character. Description (of length 1) for the overall assessment (i.e., exam).</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_sdescription">sdescription</code></td>
<td>
<p>character. Vector of descriptions for each section, omitted if empty
(or <code>NULL</code> or <code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_maxattempts">maxattempts</code></td>
<td>
<p>integer. The maximum attempts for one question. This may also be a vector
so that the maximum number of attempts varies across questions. A value of <code>Inf</code> or
<code>0</code> signals that the attempts per question are not limited.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_cutvalue">cutvalue</code></td>
<td>
<p>numeric. The number of points at which the exam is passed. If set to
<code>NULL</code> (default) or equivalently <code>NA</code>, no cutvalue is set and the result
of the exam is just the number of points.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_solutionswitch">solutionswitch</code></td>
<td>
<p>logical. Should the question/item solutionswitch be enabled?
In OLAT this means that the correct solution is shown after an incorrect solution
was entered by an examinee (i.e., this is typically only useful if <code>maxattempts = 1</code>).</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_casesensitive">casesensitive</code></td>
<td>
<p>logical. Should the evaluation of string exercises be case sensitive?</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_cloze_schoice_display">cloze_schoice_display</code></td>
<td>
<p>character. For <code>schoice</code> answers in <code>cloze</code> exercises,
select the display of the possible answers. By default (<code>cloze_schoice_display = "auto"</code>),
radio <code>"buttons"</code> are used if the answer list appears in its own paragraph and
a <code>"dropdown"</code> menu is used if the answer list appears inline (and has no mathematical
markup). Both options can also be enforced explicitly, independently from the answer list
appearing in a separate paragraph or inline. Note that in dropdown menus the answer list
will typically be rendered as plain text which means that mathematical notaion may become
unintelligible.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_navigation">navigation</code></td>
<td>
<p>character. Mode of navigation, can either be <code>"nonlinear"</code> (default)
or <code>"linear"</code>. The former means that test participants can switch back and forth
between questions while the latter implies that the questions need to be answered sequentially.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_allowskipping">allowskipping</code></td>
<td>
<p>logical. Can a question/section be skipped (default) or must it be answered?</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_allowreview">allowreview</code></td>
<td>
<p>logical. Can questions be viewed again at the end of a test/exam or not (default)?</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_allowcomment">allowcomment</code></td>
<td>
<p>logical. Are comments allowed?</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_shufflesections">shufflesections</code></td>
<td>
<p>logical. Should the order of the
exercises be shuffled? For <code>selection = "pool"</code> setting
<code>shufflesections = TRUE</code> this corresponds to shuffling the
sections that contain the pools of exercises. For
<code>selection = "exam"</code> it corresponds to shuffling the exercises
within each exam section.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_zip">zip</code></td>
<td>
<p>logical. Should the resulting XML file (plus supplements) be zipped?</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_points">points</code></td>
<td>
<p>integer. How many points should be assigned to each exercise? Note that this
argument overules any exercise points that are provided within an <code>"\expoints{}"</code> tag
in the <code>.Rnw</code> file. The vector of points supplied is expanded to the number of exercises in
the exam.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_eval">eval</code></td>
<td>
<p>named list, specifies the settings for the evaluation policy, see function
<code><a href="#topic+exams_eval">exams_eval</a></code>.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_converter">converter</code></td>
<td>
<p>character. Argument passed on to <code>make_exercise_transform_html</code>.
The default for <code>converter</code> is set to <code>"ttm"</code> unless there are Rmd
exercises in <code>file</code> where <code>"pandoc"</code> is used.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_envir">envir</code></td>
<td>
<p>passed to <code><a href="#topic+xweave">xweave</a></code>.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_base64">base64</code></td>
<td>
<p>logical. Should supplementary files be embedded using Base 64 coding?
Argument <code>base64</code> may also be a character vector of file suffixes that should be encoded, e.g.
<code>base64 = c("png", "rda")</code> will only encode PNG images and binary <code>.rda</code> files.
If set to <code>NULL</code> only image files will be encoded.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_mode">mode</code></td>
<td>
<p>character. See function <code><a href="tth.html#topic+tth">tth</a></code>.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_include">include</code></td>
<td>
<p>character, paths of extra files that should be included within the final
<code>.zip</code>-file.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_selection">selection</code></td>
<td>
<p>character. If <code>selection = "pool"</code>, the function creates one section
for each exercise from which one replication will be selected in the exam. If
<code>selection = "exam"</code> each section contains all questions and one section will
be selected for the exam. The <code>"exam"</code> variant has the advantage that questions
that build on each other can be used in the exam.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_shuffle">shuffle</code>, <code id="exams2qti21_+3A_defaultval">defaultval</code>, <code id="exams2qti21_+3A_minvalue">minvalue</code>, <code id="exams2qti21_+3A_maxvalue">maxvalue</code></td>
<td>
<p>arguments used for item construction,
for details see the XML specification (see IMS Global Learning Consortium, Inc. 2012),
especially Section 4.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_enumerate">enumerate</code></td>
<td>
<p>logical. Insert potential solutions in enumerated list?</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_digits">digits</code></td>
<td>
<p>integer. How many digits should be used for <code>num</code> exercises?</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_tolerance">tolerance</code></td>
<td>
<p>logical. Should tolerance intervals be used for checking if the supplied
<code>num</code> answer/number is correct? The default is to use tolerance intervals if <code>digits = NULL</code>.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_maxchars">maxchars</code></td>
<td>
<p>numeric. Lower bound for the number of characters in fill-in-blank
fields. The actual number of characters is selected as the maximum number of
characters of this value and the actual solution.</p>
</td></tr>
<tr><td><code id="exams2qti21_+3A_...">...</code></td>
<td>
<p>further arguments passed on to <code>make_exercise_transform_html</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Question &amp; Test Interoperability (QTI) is an international XML standard for specifying
e-learning tests established by the IMS Global Learning Consortium, Inc. (2002, 2012).
The standard evolved over various versions with the first release culminating in the QTI 1.2 standard
and the most commonly used stable version of the second release being QTI 2.1.
While both versions share many similarities, they also differ in many details.
Hence, separate functions <code><a href="#topic+exams2qti12">exams2qti12</a></code> and <code>exams2qti21</code> are provided.
Moreover, due to the flexibility of the QTI standard, different learning management systems employ
the standard in slightly different ways. Therefore, dedicated interfaces
<code><a href="#topic+exams2canvas">exams2canvas</a></code> and <code><a href="#topic+exams2ilias">exams2ilias</a></code> (both based on QTI 1.2),
and <code><a href="#topic+exams2openolat">exams2openolat</a></code> (based on either QTI 2.1 or 1.2) are provided
for the learning management systems Canvas, ILIAS, and OLAT/OpenOlat, respectively.
In addition, the interfaces <code><a href="#topic+exams2blackboard">exams2blackboard</a></code>, <code><a href="#topic+exams2testvision">exams2testvision</a></code>,
and the separate package <span class="pkg">exams2sakai</span> started as forks of the <code>exams2qti12</code> and
<code>exams2qti21</code> functions, respectively.
</p>
<p><code>exams2qti21</code> produces a <code>.zip</code> file that may be uploaded into different learning
management systems (see above). This includes the final XML file of the exam/assessment,
its exercises as well as possible supplement folders that include images, data sets etc.
It proceeds by (1) calling <code><a href="#topic+xweave">xweave</a></code> for each exercise, (2) reading the
resulting Markdown and/or LaTeX code using <code><a href="#topic+read_exercise">read_exercise</a></code>,
(3) transforming the Markdown/LaTeX code to HTML, and (4) embedding the HTML code in XML
files using the QTI 2.1 standard for assessments and question items.
</p>
<p>For steps (1) and (2) the standard drivers in <code>xexams</code> are used. In step (3), a suitable
transformation function is set up on the fly using <code>make_exercise_transform_html</code>, see also
the details section in <code><a href="#topic+exams2html">exams2html</a></code>.
For step (4), the function will cycle through all questions and exams to generate the final XML
files in QTI 2.1 format: separate XML files for each random replication of each exercise (labeled
items in sections in QTI), one XML file tying the overall exam/assessment together based on
the individual exercises and one overall &lsquo;<span class="file">imsmanifest.xml</span>&rsquo;.
</p>
<p>For arranging the individual exercise replications (called &quot;items&quot;) in so-called &quot;sections&quot;
two different types of <code>selection</code> are available: First, a <code>"pool"</code> of replications/items
can be put into a section and then one item will be selected randomly for each participant from
each section. As learning management systems typically sample the sections independently, this means that
one participant might receive the first random replication from
the first exercise but the third random replication from the second exercise, and so on.
Alternatively, <code>selection = "exam"</code> specifies that each section contains
a complete set of exercises and one section will be selected randomly for each participant.
The <code>"exam"</code> variant is less commonly used but has the advantage that questions that build
on each other can be used in the exam. Also, duplicated exercise types can be avoided when
using <code>nsamp</code> to sample a certain number of exercises without replacement.
</p>
<p>Templates other than the default <code>qti21.xml</code> provided in the <code>xml</code> folder of
this package could in principle also be specified. However, adapting these is a bit technical.
The assessment template must provide one section including one item. <code>exams2qti21</code> will then
use the single item template to generate all items, as well as the assessment and section specifications set within the template.
Note that all specifiers that have a leading <code>##</code> in the XML template will be replaced by suitable code in
<code>exams2qti21</code> and should always be provided in the template. Thus, the user may add
additional tags to the XML template or modify certain specifications, like the number of
replicates/items that should be sampled for each section etc.
</p>
<p>By default, the individual question/item bodies are generated by function
<code>make_itembody_qti21</code> which checks the type of the question and
will produce suitable XML code. Note that for each question type, either the arguments of
<code>make_itembody_qti21</code> may be set within <code>num</code>, <code>mchoice</code>, <code>schoice</code>,
<code>string</code> and <code>cloze</code> in <code>exams2qti21</code>, by providing a named list of specifications
that should be used, or for each question type, a function that produces the item body XML code may
be provided to <code>num</code>, <code>mchoice</code>, <code>schoice</code>, <code>string</code> and <code>cloze</code>. E.g.,
<code>mchoice = list(shuffle = TRUE)</code> will force only multiple choice questions to have a shuffled
answerlist.
</p>


<h3>Value</h3>

<p><code>exams2qti21</code> returns a list of exams as generated by <code><a href="#topic+xexams">xexams</a></code>.
</p>
<p><code>make_itembody_qti21</code> returns a function that generates the XML code
for the itembody tag in QTI 2.1 format.
</p>


<h3>References</h3>

<p>IMS Global Learning Consortium, Inc. (2002).
<em>IMS Question &amp; Test Interoperability: ASI XML Binding Specification Final Specification Version 1.2</em>.
<a href="https://www.imsglobal.org/question/qtiv1p2/imsqti_asi_bindv1p2.html">https://www.imsglobal.org/question/qtiv1p2/imsqti_asi_bindv1p2.html</a>
</p>
<p>IMS Global Learning Consortium, Inc. (2012).
<em>IMS Question &amp; Test Interoperability (QTI) XSD Binding Version 2.1 Final</em>.
<a href="https://www.imsglobal.org/question/qtiv2p1/imsqti_bindv2p1.html">https://www.imsglobal.org/question/qtiv2p1/imsqti_bindv2p1.html</a>
</p>
<p>Zeileis A, Umlauf N, Leisch F (2014).
Flexible Generation of E-Learning Exams in R: Moodle Quizzes, OLAT Assessments, and Beyond.
<em>Journal of Statistical Software</em>, <b>58</b>(1), 1&ndash;36.
<a href="https://doi.org/10.18637/jss.v058.i01">doi:10.18637/jss.v058.i01</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+xexams">xexams</a></code>,
<code><a href="tth.html#topic+ttm">ttm</a></code>,
<code><a href="tth.html#topic+tth">tth</a></code>,
<code><a href="#topic+tex2image">tex2image</a></code>,
<code><a href="#topic+make_exercise_transform_html">make_exercise_transform_html</a></code>,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## load package and enforce par(ask = FALSE)
library("exams")
options(device.ask.default = FALSE)

## define an exams (= list of exercises)
myexam &lt;- list(
  "boxplots.Rmd",
  c("tstat.Rmd", "ttest.Rmd", "confint.Rmd"),
  c("regression.Rmd", "anova.Rmd"),
  c("scatterplot.Rmd", "boxhist.Rmd"),
  "relfreq.Rmd"
)

## output directory
dir.create(mydir &lt;- tempfile())

## generate .zip with QTI 2.1 exam in temporary directory
## using a few customization options
exams2qti21(myexam, n = 3, dir = mydir,
  maxattempts = 3,
  num = list(digits = 1),
  mchoice = list(shuffle = TRUE, enumerate = FALSE)
)
dir(mydir)
</code></pre>

<hr>
<h2 id='exams2tcexam'>Generation of Exams in TCExam Format</h2><span id='topic+exams2tcexam'></span>

<h3>Description</h3>

<p>Interface for generating exams in TCExam format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  exams2tcexam(file, n = 1L, nsamp = NULL, dir = ".",
    name = NULL, quiet = TRUE, edir = NULL, tdir = NULL, sdir = NULL, verbose = FALSE,
    resolution = 100, width = 4, height = 4, svg = FALSE, encoding = "UTF-8",
    points = NULL, modulename = name, subjectname = name, subjectdescription = NULL,
    timer = 0, fullscreen = FALSE, inlineanswers = FALSE, autonext = FALSE,
    shuffle = FALSE, lang = "en", date = Sys.time(), zip = FALSE, converter = NULL,
    ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams2tcexam_+3A_file">file</code></td>
<td>
<p>character. A specification of a (list of) exercise files.</p>
</td></tr>
<tr><td><code id="exams2tcexam_+3A_n">n</code></td>
<td>
<p>integer. The number of copies to be compiled from <code>file</code>.</p>
</td></tr>
<tr><td><code id="exams2tcexam_+3A_nsamp">nsamp</code>, <code id="exams2tcexam_+3A_quiet">quiet</code>, <code id="exams2tcexam_+3A_edir">edir</code>, <code id="exams2tcexam_+3A_tdir">tdir</code>, <code id="exams2tcexam_+3A_sdir">sdir</code>, <code id="exams2tcexam_+3A_verbose">verbose</code></td>
<td>
<p>arguments passed to <code><a href="#topic+xexams">xexams</a></code>.</p>
</td></tr>
<tr><td><code id="exams2tcexam_+3A_dir">dir</code></td>
<td>
<p>character specifying the output directory path. The default is
the current working directory.</p>
</td></tr>
<tr><td><code id="exams2tcexam_+3A_name">name</code></td>
<td>
<p>character. A name prefix for resulting XML file.</p>
</td></tr>
<tr><td><code id="exams2tcexam_+3A_resolution">resolution</code>, <code id="exams2tcexam_+3A_width">width</code>, <code id="exams2tcexam_+3A_height">height</code>, <code id="exams2tcexam_+3A_svg">svg</code></td>
<td>
<p>arguments passed to <code><a href="#topic+xweave">xweave</a></code>.</p>
</td></tr>
<tr><td><code id="exams2tcexam_+3A_encoding">encoding</code></td>
<td>
<p>character, ignored. The encoding is always assumed to be UTF-8.</p>
</td></tr>
<tr><td><code id="exams2tcexam_+3A_points">points</code></td>
<td>
<p>numeric. Number of points for the questions.</p>
</td></tr>
<tr><td><code id="exams2tcexam_+3A_modulename">modulename</code></td>
<td>
<p>character. Module name.</p>
</td></tr>
<tr><td><code id="exams2tcexam_+3A_subjectname">subjectname</code></td>
<td>
<p>character. Subject name.</p>
</td></tr>
<tr><td><code id="exams2tcexam_+3A_subjectdescription">subjectdescription</code></td>
<td>
<p>character. Subject description.</p>
</td></tr>
<tr><td><code id="exams2tcexam_+3A_timer">timer</code></td>
<td>
<p>numeric. Number of seconds for each question.</p>
</td></tr>
<tr><td><code id="exams2tcexam_+3A_fullscreen">fullscreen</code></td>
<td>
<p>logical. Should the question be shown in full-screen mode?</p>
</td></tr>
<tr><td><code id="exams2tcexam_+3A_inlineanswers">inlineanswers</code></td>
<td>
<p>logical. Should the question list be presented inline?</p>
</td></tr>
<tr><td><code id="exams2tcexam_+3A_autonext">autonext</code></td>
<td>
<p>logical. Automatically advance to the next item?</p>
</td></tr>
<tr><td><code id="exams2tcexam_+3A_shuffle">shuffle</code></td>
<td>
<p>logical. Should the question list of schoice/mchoice answers be
shuffled (or kept fixed)?</p>
</td></tr>
<tr><td><code id="exams2tcexam_+3A_lang">lang</code></td>
<td>
<p>character. Two-letter indicator of the language.</p>
</td></tr>
<tr><td><code id="exams2tcexam_+3A_date">date</code></td>
<td>
<p>character or <code>"Date"</code> object specifying the date of the exam.</p>
</td></tr>
<tr><td><code id="exams2tcexam_+3A_zip">zip</code></td>
<td>
<p>logical. Should the resulting XML file be zipped?</p>
</td></tr>
<tr><td><code id="exams2tcexam_+3A_converter">converter</code>, <code id="exams2tcexam_+3A_...">...</code></td>
<td>
<p>arguments passed on to <code>make_exercise_transform_html</code>.
The default for <code>converter</code> is set to <code>"ttm"</code> unless there are Rmd
exercises in <code>file</code> where <code>"pandoc"</code> is used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>exams2tcexam</code> generates XML exams that can be imported into the TCExam software
of Asuni (2012). Currently, the subset of HTML(-like) commands that is supported in
TCExam is rather limited, e.g., tables and figures cannot be directly included.
</p>


<h3>Value</h3>

<p>A list of exams as generated by <code><a href="#topic+xexams">xexams</a></code> is
returned invisibly.
</p>


<h3>References</h3>

<p>Asuni (2012). <em>TCExam: Computer-Based Assessment Software</em>.
<a href="https://tcexam.org/">https://tcexam.org/</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## load package and enforce par(ask = FALSE)
library("exams")
options(device.ask.default = FALSE)

## Not run: 
## exams2tcexam creates a single XML file
exams2tcexam("tstat2", n = 2)

## End(Not run)
</code></pre>

<hr>
<h2 id='exams2testvision'>Generation of Exams in TestVision Format</h2><span id='topic+exams2testvision'></span><span id='topic+make_itembody_testvision'></span>

<h3>Description</h3>

<p>Automatic generation of exams in TestVision format (still under development) for the online testing system TestVision Online.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  exams2testvision(file, n = 1L, nsamp = NULL, dir = ".",
    name = NULL, quiet = TRUE, edir = NULL,
    tdir = NULL, sdir = NULL, verbose = FALSE,
    resolution = 100, width = 4, height = 4, svg = FALSE,
    encoding = "UTF-8", num = NULL, mchoice = NULL,
    schoice = mchoice, string = NULL, cloze = NULL,
    template = "testvision",
    stitle = "Exercise", ititle = "Question",
    adescription = "Please solve the following exercises.",
    sdescription = "Please answer the following question.",
    maxattempts = 1, solutionswitch = TRUE, zip = TRUE, points = NULL,
    eval = list(partial = TRUE, negative = FALSE), converter = "pandoc",
    base64 = FALSE, mode = "hex", ...)

  make_itembody_testvision(shuffle = FALSE, defaultval = NULL,
    minvalue = NULL, maxvalue = NULL,
    enumerate = TRUE, digits = NULL,
    tolerance = is.null(digits), maxchars = 12,
    eval = list(partial = TRUE, negative = FALSE), solutionswitch = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exams2testvision_+3A_file">file</code></td>
<td>
<p>character. A specification of a (list of) exercise files.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_n">n</code></td>
<td>
<p>integer. The number of copies to be compiled from <code>file</code>.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_nsamp">nsamp</code></td>
<td>
<p>integer. The number(s) of exercise files sampled from each
list element of <code>file</code>. Sampling without replacement is used
if possible. (Only if some element of <code>nsamp</code> is larger than
the length of the corresponding element in <code>file</code>, sampling
with replacement is used.)</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_dir">dir</code></td>
<td>
<p>character. The default is the current working directory.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_name">name</code></td>
<td>
<p>character. A name prefix for resulting exercises and ZIP file.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_quiet">quiet</code></td>
<td>
<p>logical. Should output be suppressed when calling
<code><a href="#topic+xweave">xweave</a></code>?</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_edir">edir</code></td>
<td>
<p>character specifying the path of the directory (along with its
sub-directories) in which the files in <code>file</code> are stored
(see also <code><a href="#topic+xexams">xexams</a></code>).</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_tdir">tdir</code></td>
<td>
<p>character specifying a temporary directory, by default
this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>. Note that this
is cleaned up (i.e., existing files are deleted) and only certain
temporary files are preserved.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_sdir">sdir</code></td>
<td>
<p>character specifying a directory for storing supplements, by
default this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_verbose">verbose</code></td>
<td>
<p>logical. Should information on progress of exam generation
be reported?</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_resolution">resolution</code>, <code id="exams2testvision_+3A_width">width</code>, <code id="exams2testvision_+3A_height">height</code></td>
<td>
<p>numeric. Options for rendering PNG
graphics passed to <code><a href="#topic+xweave">xweave</a></code>.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_svg">svg</code></td>
<td>
<p>logical. Should graphics be rendered in SVG or PNG (default)?</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_encoding">encoding</code></td>
<td>
<p>character, ignored. The encoding is always assumed to be UTF-8.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_num">num</code></td>
<td>
<p>function or named list applied to numerical (i.e., type <code>num</code>)
questions. If <code>num</code> is a function, <code>num</code> will be used
for generating the item body of the question, see function <code>make_itembody_testvision()</code>.
If <code>num</code> is a named list, these arguments will be passed to function
<code>make_itembody_testvision()</code>.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_mchoice">mchoice</code>, <code id="exams2testvision_+3A_schoice">schoice</code>, <code id="exams2testvision_+3A_string">string</code>, <code id="exams2testvision_+3A_cloze">cloze</code></td>
<td>
<p>function or named list applied to multiple choice,
single choice, string, and cloze questions (i.e., type <code>mchoice</code>, <code>schoice</code>,
<code>string</code>, and <code>cloze</code>), respectively. See argument <code>num</code> for more details.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_template">template</code></td>
<td>
<p>character. The IMS QTI 1.2 or 2.1 template that should be used. Currently,
the package provides <code>"testvision.xml"</code>.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_stitle">stitle</code></td>
<td>
<p>character. A title that should be used for the sections. May be a vector of
length 1 to use the same title for each section, or a vector containing different section
titles.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_ititle">ititle</code></td>
<td>
<p>character. A title that should be used for the assessment items. May be a vector
of length 1 to use the same title for each item, or a vector containing different item
titles. Note that the maximum of different item titles is the number of sections/questions
that are used for the exam.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_adescription">adescription</code></td>
<td>
<p>character. Description (of length 1) for the overall assessment (i.e., exam).</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_sdescription">sdescription</code></td>
<td>
<p>character. Vector of descriptions for each section, omitted if empty
(or <code>NULL</code> or <code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_maxattempts">maxattempts</code></td>
<td>
<p>integer. The maximum attempts for one question, may also be set to
<code>Inf</code>.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_solutionswitch">solutionswitch</code></td>
<td>
<p>logical. Should the question/item solutionswitch be enabled?</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_zip">zip</code></td>
<td>
<p>logical. Should the resulting XML file (plus supplements) be zipped?</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_points">points</code></td>
<td>
<p>integer. How many points should be assigned to each exercise? Note that this
argument overules any exercise points that are provided within an <code>"\expoints{}"</code> tag
in the <code>.Rnw</code> file. The vector of points supplied is expanded to the number of exercises in
the exam.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_eval">eval</code></td>
<td>
<p>named list, specifies the settings for the evaluation policy, see function
<code><a href="#topic+exams_eval">exams_eval</a></code>.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_base64">base64</code></td>
<td>
<p>logical. Should supplementary files be embedded using Base 64 coding?
Argument <code>base64</code> may also be a character vector of file suffixes that should be encoded, e.g.
<code>base64 = c("png", "rda")</code> will only encode PNG images and binary <code>.rda</code> files.
If set to <code>NULL</code> only image files will be encoded.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_converter">converter</code></td>
<td>
<p>character. Argument passed on to <code>make_exercise_transform_html</code>.
The default for <code>converter</code> is set to <code>"pandoc"</code> unless <code>"ttm"</code> is required. The default works best in TestVision.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_mode">mode</code></td>
<td>
<p>character. See function <code><a href="tth.html#topic+tth">tth</a></code>.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_shuffle">shuffle</code>, <code id="exams2testvision_+3A_defaultval">defaultval</code>, <code id="exams2testvision_+3A_minvalue">minvalue</code>, <code id="exams2testvision_+3A_maxvalue">maxvalue</code></td>
<td>
<p>arguments used for IMS QTI 2.1 item construction, for details see the XML
specification (see IMS Global Learning Consortium, Inc. 2012), especially Section 4.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_enumerate">enumerate</code></td>
<td>
<p>logical. Insert potential solutions in enumerated list?</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_digits">digits</code></td>
<td>
<p>integer. How many digits should be used for <code>num</code> exercises?</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_tolerance">tolerance</code></td>
<td>
<p>logical. Should tolerance intervals be used for checking if the supplied
<code>num</code> answer/number is correct? The default is to use tolerance intervals if <code>digits = NULL</code>.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_maxchars">maxchars</code></td>
<td>
<p>numeric. Lower bound for the number of characters in fill-in-blank
fields. The actual number of characters is selected as the maximum number of
characters of this value and the actual solution.</p>
</td></tr>
<tr><td><code id="exams2testvision_+3A_...">...</code></td>
<td>
<p>further arguments passed on to <code>make_exercise_transform_html</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>TestVision employs an XML format that essentially uses the Question &amp; Test
Interoperability (QTI) standard, version 2.1, see IMS Global Learning
Consortium, Inc. (2012). However, as this deviates from the plain QTI 2.1
standard in several places, the <code><a href="#topic+exams2qti21">exams2qti21</a></code> cannot be used
directly. Instead, <code>exams2testvision</code> is a new interface that is likely
to be improved in future versions.
</p>
<p><code>exams2testvision</code> produces a <code>.zip</code> file that may be uploaded into
TestVision. This includes the final XML file of the exam/assessment as well as
possible supplement folders that include images, data sets etc. used for the
exam.
</p>
<p><code>exams2testvision</code> proceeds by (1) calling <code><a href="#topic+xweave">xweave</a></code> on
each exercise, (2) reading the resulting LaTeX code, (3) transforming the
LaTeX code to HTML, and (4) embedding the HTML code in a XML file using
TestVision's QTI standards for assessments and question items. For steps (1)
and (2) the standard drivers in <code>xexams</code> are used. In step (3), a
suitable transformation function is set up on the fly using
<code>make_exercise_transform_html</code>, see also the details section in
<code><a href="#topic+exams2html">exams2html</a></code>. For step (4), the function will cycle through all
questions and exams to generate the final XML file in the TestVision QTI
standard. The questions appear as separate files in the system.
</p>
<p>The function uses the XML template for TestVision's QTI standards for
assessments and items to generate the exam (per default, this is the XML file
<code>testvision.xml</code> provided in the <code>xml</code> folder of this package). The
assessment template must provide one or more sections for including the items.
<code>exams2testvision</code> will then use the single item template to generate all
items, as well as the assessment and section specifications set within the
template.
</p>
<p>The default template will generate exams/assessments that sample one replicate
of a question/item for each section. The usual procedure in exam/assessment
generation would be to simply copy &amp; paste the XML template of the package
and adapt it to the needs of the user. Note that all specifiers that have a
leading <code>##</code> in the XML template will be replaced by suitable code in
<code>exams2testvision</code> and should always be provided in the template. I.e.,
the user may add additional tags to the XML template or modify certain
specifications, like the number of replicates/items that should be sampled for
each section etc.
</p>
<p>Per default, the individual question/item bodies are generated by function
<code>make_itembody_testvision</code>, i.e., <code>make_itembody_testvision</code> checks
the type of the question and will produce suitable XML code. Note that for
each question type, either the arguments of <code>make_itembody_testvision</code>
may be set within <code>num</code>, <code>mchoice</code>, <code>schoice</code> and <code>string</code>
in <code>exams2testvision</code>, by providing a named list of specifications that
should be used, or for each questiontype, a function that produces the item
body XML code may be provided to <code>num</code>, <code>mchoice</code>, <code>schoice</code>
and <code>string</code>. E.g., <code>mchoice = list(shuffle = TRUE)</code> will force only
multiple choice questions to have a shuffled answerlist.
</p>


<h3>Value</h3>

<p><code>exams2testvision</code> returns a list of exams as generated by <code><a href="#topic+xexams">xexams</a></code>.
</p>
<p><code>make_itembody_testvision</code> returns a function that generates the XML code
for the itembody tag in TestVision's version of the IMS QTI 2.1 format.
</p>


<h3>References</h3>

<p>TestVision (2020). <em>English introduction tutorial on TestVision</em>.
<a href="https://www.testvision.nl/en/experience-testvision/tutorials-2/">https://www.testvision.nl/en/experience-testvision/tutorials-2/</a>
</p>
<p>IMS Global Learning Consortium, Inc. (2012).
<em>IMS Question &amp; Test Interoperability (QTI) XSD Binding Version 2.1 Final</em>.
<a href="https://www.imsglobal.org/question/qtiv2p1/imsqti_bindv2p1.html">https://www.imsglobal.org/question/qtiv2p1/imsqti_bindv2p1.html</a>
</p>
<p>Zeileis A, Umlauf N, Leisch F (2014).
Flexible Generation of E-Learning Exams in R: Moodle Quizzes, OLAT Assessments, and Beyond.
<em>Journal of Statistical Software</em>, <b>58</b>(1), 1&ndash;36.
<a href="https://doi.org/10.18637/jss.v058.i01">doi:10.18637/jss.v058.i01</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exams2qti12">exams2qti12</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## load package and enforce par(ask = FALSE)
library("exams")
options(device.ask.default = FALSE)

## define an exams (= list of exercises)
myexam &lt;- list(
  "tstat",
  "tstat2",
  "relfreq",
  "essayreg",
  "dist2",
  "boxhist"
)

## output directory
dir.create(mydir &lt;- tempfile())

## generate .zip with set of TestVision exercises
exams2testvision(myexam, n = 3, dir = mydir)
dir(mydir)
</code></pre>

<hr>
<h2 id='expar'>Fix Parameters in Dynamic Exercises</h2><span id='topic+expar'></span>

<h3>Description</h3>

<p>Set parameters, defined in the first code chunk of an exercise file,
to specific values instead of their definition in the exercise file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expar(file, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="expar_+3A_file">file</code></td>
<td>
<p>character with (path to) an exercise file.</p>
</td></tr>
<tr><td><code id="expar_+3A_...">...</code></td>
<td>
<p>paramters to be fixed within <code>file</code> (or a single
list of parameters to be fixed).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To set certain parameters that are randomly generated within an exercise
file to specific values, a copy of the exercise file is generated in
the temporary directory of the R session. In the temporary copy of the
exercise file the first assignment to the specified parameter in the first
code chunk is replaced with the definition provided in <code>expar</code>.
</p>
<p>To work properly, the parameter of interest must be defined with
a standard assignment in the first code chunk at the beginning of a line.
The original definition of the parameter must be in a single line only
(typically using something like <code>sample</code> or <code>runif</code> etc.).
</p>
<p>After replacing the code chunk, <code>expar</code> returns the path to the
temporary file with the modified exercise. This can then be processed
with <code>exams2xyz</code> &quot;as usual&quot;.
</p>


<h3>Value</h3>

<p>A character string with the file path of the modified exercise.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## fix parameters "a" and "c" in deriv.Rmd
## (but still generate "b" randomly)

## HTML output
if(interactive()){
exams2html(expar("deriv.Rmd", a = 1, c = 0))
}

## just the question text
x &lt;- xexams(expar("deriv.Rmd", a = 1, c = 0))
writeLines(x[[1]][[1]]$question)
</code></pre>

<hr>
<h2 id='fmt'>Auxiliary Formatting Functions</h2><span id='topic+fmt'></span><span id='topic+round2'></span><span id='topic+toLatex.matrix'></span><span id='topic+toLatex.data.frame'></span><span id='topic+char_with_braces'></span><span id='topic+num_to_tol'></span><span id='topic+num2tol'></span>

<h3>Description</h3>

<p>Auxiliary functions for displaying numeric elements in exercises.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fmt(x, digits = 2L, zeros = digits &lt; 4L, ...)

round2(x, digits = 0) 

char_with_braces(x)

num_to_tol(x, reltol = 0.0002, min = 0.01, digits = 2)

## S3 method for class 'matrix'
toLatex(object, skip = FALSE, fix = getOption("olat_fix"),
  escape = TRUE, ...)

## S3 method for class 'data.frame'
toLatex(object, rotate = FALSE, pad = " ~ ", align = NULL, row.names = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fmt_+3A_x">x</code></td>
<td>
<p>numeric vector.</p>
</td></tr>
<tr><td><code id="fmt_+3A_digits">digits</code></td>
<td>
<p>integer. Digits that should be used for rounding.</p>
</td></tr>
<tr><td><code id="fmt_+3A_zeros">zeros</code></td>
<td>
<p>logical. Should trailing zeros be added?</p>
</td></tr>
<tr><td><code id="fmt_+3A_reltol">reltol</code></td>
<td>
<p>numeric. Relative tolerance (relative to correct
solution <code>x</code>).</p>
</td></tr>
<tr><td><code id="fmt_+3A_min">min</code></td>
<td>
<p>numeric. Minimum absolute tolerance.</p>
</td></tr>
<tr><td><code id="fmt_+3A_object">object</code></td>
<td>
<p>matrix or data frame, respectively.</p>
</td></tr>
<tr><td><code id="fmt_+3A_skip">skip</code></td>
<td>
<p>logical. Should an additional skip be added between rows?</p>
</td></tr>
<tr><td><code id="fmt_+3A_fix">fix</code></td>
<td>
<p>logical. Should an additional empty column be added between
all columns? This is a workaround for OLAT that collapses spaces
between columns in MathML.</p>
</td></tr>
<tr><td><code id="fmt_+3A_escape">escape</code></td>
<td>
<p>logical. Should LaTeX commands be escaped (as appropriate
for <code><a href="utils.html#topic+Sweave">Sweave</a></code>) or not (as appropriate for
<code><a href="knitr.html#topic+knit">knit</a></code>)?</p>
</td></tr>
<tr><td><code id="fmt_+3A_...">...</code></td>
<td>
<p>passed to <code><a href="base.html#topic+format">format</a></code> for <code>fmt</code>.</p>
</td></tr>
<tr><td><code id="fmt_+3A_rotate">rotate</code></td>
<td>
<p>logical. Should the table be transposed/rotated by 90 degrees?</p>
</td></tr>
<tr><td><code id="fmt_+3A_pad">pad</code></td>
<td>
<p>character for padding columns of the resulting table.</p>
</td></tr>
<tr><td><code id="fmt_+3A_align">align</code></td>
<td>
<p>character indicating the alignment of the columns. Can either
be a single string like <code>"|l|rrr|"</code> or a vector of characters per column.
By default numeric columns are right-aligned and character columns are
left-aligned.</p>
</td></tr>
<tr><td><code id="fmt_+3A_row.names">row.names</code></td>
<td>
<p>logical. Should a column (or row, if <code>rotate = TRUE</code>)
with the row names be included?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Various functions that help displaying numerical results in exercises:
</p>
<p>The function <code>fmt</code> rounds and adds trailing zeros (by default if <code>digits</code> is
lower than 4).
</p>
<p>The function <code>round2</code> does what is known in German as kaufmaennisches Runden
(rounding away from zero for trailing 5s).
</p>
<p>The function <code>char_with_braces</code> adds parentheses for negative elements
(in order to facilitate their display in equations).
</p>
<p>The function <code>num_to_tol</code> (or equivalently <code>num2tol</code>)
computes the absolute tolerance based on a
numeric solution <code>x</code> and a relative tolerance <code>reltol</code>.
</p>
<p>The <code>toLatex</code> method sets up a matrix array with parentheses.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## emulate how students round
## (rather than using the round-to-even strategy R employs)
round2(c(0.005, 0.015), digits = 2)
round(c(0.005, 0.015), digits = 2)

## this is also employed internally in the fmt() formatting function
fmt(c(0.005, 0.015))

## the main purpose of fmt() is that some numeric result can be displayed
## both at high accuracy and then at the rounding that students should do
## (e.g., with 2 or 3 digits)
sol &lt;- runif(1)
fmt(sol, 6)
fmt(sol, 2)

## but fmt() also assures showing a very high numer of significant digits
## (up to 12)
sol &lt;- 123456 + sol
sol
fmt(sol, 6)
fmt(sol, 2)

## and fmt() also takes care of adding trailing zeros (if digits &lt; 4)
fmt(1)
fmt(1, digits = 3)
fmt(1, digits = 6)

## char_with_braces() is for adding parentheses, e.g., before constructing a sum
paste(char_with_braces(-2:2), collapse = " + ")

## for including a matrix in a LaTeX formula
x &lt;- matrix(1:4, ncol = 2)
toLatex(x)
toLatex(x, skip = TRUE)

## for including a data frame as a plain LaTeX tabular (without caption etc.)
d &lt;- data.frame(Label = c("Foo first", "Bar second"), Value = c(12.3, 1234))
toLatex(d, big.mark = ",", nsmall = 2)

## compute absolute tolerances:
## minimum is 0.01
num_to_tol(1)
## but can be larger for larger solutions
num_to_tol(100)
</code></pre>

<hr>
<h2 id='include_supplement'>Copy (Static) Supplement Files for Inclusion in Exercises</h2><span id='topic+include_supplement'></span>

<h3>Description</h3>

<p>Copy (static) files (e.g., graphics, data sets, etc.)
for inclusion as supplements in an exercise.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>include_supplement(file, dir = NULL, recursive = FALSE, target = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="include_supplement_+3A_file">file</code></td>
<td>
<p>character. A (vector of) file name(s).</p>
</td></tr>
<tr><td><code id="include_supplement_+3A_dir">dir</code></td>
<td>
<p>character. The directory where <code>file</code> can
be found. If used within the code chunks of exercises, the
default is to use the directory in which the exercises are stored.</p>
</td></tr>
<tr><td><code id="include_supplement_+3A_recursive">recursive</code></td>
<td>
<p>logical. Should also sub-directories of <code>dir</code>
be searched for <code>file</code>?</p>
</td></tr>
<tr><td><code id="include_supplement_+3A_target">target</code></td>
<td>
<p>character. A (vector of) target file name(s),
by default taken to be the same as <code>file</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Usually, supplement files are created dynamically within an exercise,
e.g., data is simulated and then plotted or stored in a file etc.
However, sometimes an exercises wants to include a static supplement
file that is available in some directory on the system. Then,
the <code>include_supplement</code> is a convenience function that
copies such a file from its directory into the supplements of
an exercise. Then it can be included/referenced as usual in the
question/solution text.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## The "Rlogo" exercise uses a static image which is provided
## within the "exams" package.
if(interactive()) {
exams2html("Rlogo.Rnw")
}
</code></pre>

<hr>
<h2 id='include_tikz'>Including Figures from TikZ Code in Exercises</h2><span id='topic+include_tikz'></span>

<h3>Description</h3>

<p>Include figures from TikZ code in an exercise after
compiling it with <code><a href="#topic+tex2image">tex2image</a></code>. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>include_tikz(tikz, name = "tikzpicture", format = NULL,
  library = NULL, width = NULL, markup = "tex", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="include_tikz_+3A_tikz">tikz</code></td>
<td>
<p>character vector with the TikZ code.</p>
</td></tr>
<tr><td><code id="include_tikz_+3A_name">name</code></td>
<td>
<p>character. Name prefix of the graphics file
to be produced.</p>
</td></tr>
<tr><td><code id="include_tikz_+3A_format">format</code></td>
<td>
<p>character. The graphics format requested from
<code><a href="#topic+tex2image">tex2image</a></code>, e.g., <code>"png"</code> (default),
<code>"svg"</code>, <code>"pdf"</code>. If set to <code>"tex"</code> then
<code><a href="#topic+tex2image">tex2image</a></code> is not called but the
<code>tikz</code> code is included directly.</p>
</td></tr>
<tr><td><code id="include_tikz_+3A_library">library</code></td>
<td>
<p>character. Names of TikZ libraries required
for compiling the <code>tikz</code> code (if any).</p>
</td></tr>
<tr><td><code id="include_tikz_+3A_width">width</code></td>
<td>
<p>character. The width with which the resulting
graphic should be included in LaTeX.</p>
</td></tr>
<tr><td><code id="include_tikz_+3A_markup">markup</code></td>
<td>
<p>character. Which type of markup should be written?
Can be <code>"tex"</code> (default), <code>"markdown"</code>, or <code>"none"</code>.</p>
</td></tr>
<tr><td><code id="include_tikz_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="#topic+tex2image">tex2image</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function <code>include_tikz</code> takes a character vector with <code>tikz</code>
code, if necessary adds a <code>{tikzpicture}</code> environment, renders it
into a graphics file via <code><a href="#topic+tex2image">tex2image</a></code>, and returns
LaTeX or Markdown code that embeds the graphics into an exercise.
</p>
<p>If <code>format = "tex"</code> and <code>markup = "tex"</code> the TikZ code
is included directly (possibly adding <code>library</code> and <code>{tikzpicture}</code>,
if necessary).
</p>


<h3>Value</h3>

<p>A character vector is returned. This contains just the name of the graphics
file produced (i.e., <code>name.format</code>) except for <code>format = "tex"</code>
where the TikZ code is returned. For <code>markup = "tex"</code> or <code>"markdown"</code>
the value is returned invisibly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## TikZ code for a logic gate
tz &lt;- "
  \\node[left,draw, logic gate inputs=nn, xor gate US,fill=white,,scale=2.5] (G1) at (0,0) {};
  \\draw (G1.output) --++ (0.5,0) node[right] (y) {$y$};
  \\draw (G1.input 1) --++ (-0.5,0) node[left] {$a$};
  \\draw (G1.input 2) --++ (-0.5,0) node[left] {$b$};
"

## switch to temporary directory
wd &lt;- getwd()
td &lt;- tempfile()
dir.create(td)
setwd(td)
dir()

## produce PDF figure and produce includegraphics statement
include_tikz(tz, name = "logicgate", format = "pdf",
  library = c("arrows", "shapes.gates.logic.US", "calc"),
  width = "2.5cm")
dir()


## alternatively produce just the complete TikZ code
include_tikz(tz, name = "logicgate", format = "tex",
  library = c("arrows", "shapes.gates.logic.US", "calc"))


## switch back to original working directory
setwd(wd)
</code></pre>

<hr>
<h2 id='make_exercise_transform_pandoc'>Transform Exercises via Pandoc</h2><span id='topic+make_exercise_transform_pandoc'></span>

<h3>Description</h3>

<p>Generate an exercise transformer function based on
<code><a href="rmarkdown.html#topic+pandoc_convert">pandoc_convert</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  make_exercise_transform_pandoc(to = "latex", base64 = to != "latex",
    attachfile = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_exercise_transform_pandoc_+3A_to">to</code></td>
<td>
<p>character. Specification of the output text format, typically
<code>"latex"</code>, <code>"html"</code>, or <code>"markdown"</code>.</p>
</td></tr>
<tr><td><code id="make_exercise_transform_pandoc_+3A_base64">base64</code></td>
<td>
<p>logical. Should supplementary files be embedded using Base 64 coding?
Argument <code>base64</code> may also be a character vector of file suffixes that should be encoded, e.g.
<code>base64 = c("png", "rda")</code> will only encode PNG images and binary <code>.rda</code> files.
If set to <code>NULL</code> only image files will be encoded.</p>
</td></tr>
<tr><td><code id="make_exercise_transform_pandoc_+3A_attachfile">attachfile</code></td>
<td>
<p>logical. Should <code>attachfile</code> rather than <code>url</code> be used
in LaTeX, e.g., for embedding data files in PDF.</p>
</td></tr>
<tr><td><code id="make_exercise_transform_pandoc_+3A_...">...</code></td>
<td>
<p>arguments to be passed on to <code><a href="rmarkdown.html#topic+pandoc_convert">pandoc_convert</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The generator function <code>make_exercise_transform_pandoc</code> returns a function
that can be used for the <code>transform</code> steps in <code><a href="#topic+xexams">xexams</a></code>.
It is a wrapper to <code><a href="rmarkdown.html#topic+pandoc_convert">pandoc_convert</a></code> from <span class="pkg">rmarkdown</span>
but adds a couple of convenience features that are typically needed in R/exams
exercises. Supplementary files can be handled by Base 64 encoding (often used
for HTML output) or via attachfile in LaTeX (sometimes useful for PDF output).
Some additional LaTeX commands and environments are supported, e.g., Sweave environments
or negated logical comparison symbols. Finally, some default options from
pandoc are changed, namely the defaults <code>--wrap=preserve</code> (instead of
<code>--wrap=auto</code>) and <code>--columns=99999</code> (instead of <code>--columns=72</code>).
</p>


<h3>Value</h3>

<p><code>make_exercise_transform_pandoc</code> returns a function that is suitable for being
supplied as <code>driver$transform</code> to <code><a href="#topic+xexams">xexams</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+xexams">xexams</a></code>,
<code><a href="#topic+make_exercise_transform_html">make_exercise_transform_html</a></code>,
<code><a href="rmarkdown.html#topic+pandoc_convert">pandoc_convert</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## load package and enforce par(ask = FALSE)
options(device.ask.default = FALSE)

## default transformation to LaTeX output
textrafo &lt;- make_exercise_transform_pandoc()

## custom transformation to Markdown output without Base 64 files
mdtrafo &lt;- make_exercise_transform_pandoc(to = "markdown", base64 = FALSE)

## read "lm" exercise via xexams, i.e., without transformation
## Rmd yields Markdown, Rnw yields LaTeX
lm_md &lt;- xexams("lm.Rmd")[[1]][[1]]
lm_tex &lt;- xexams("lm.Rnw")[[1]][[1]]

## original Markdown and transformed LaTeX
writeLines(lm_md$question)
writeLines(textrafo(lm_md)$question)

## original LaTeX and transformed Markdown
writeLines(lm_tex$question)
writeLines(mdtrafo(lm_tex)$question)
</code></pre>

<hr>
<h2 id='match_exams_call'>Query Information from Last xexams/exams2xyz Call</h2><span id='topic+match_exams_call'></span><span id='topic+match_exams_device'></span>

<h3>Description</h3>

<p><code>match_exams_call</code> queries the last call made to <code>xexams</code>
(typically through some <code>exams2xyz</code> interface). <code>match_exams_device</code>
queries the graphics device used in the last <code>xweave</code> call.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>match_exams_call(which = 1L, deparse = TRUE)
match_exams_device()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="match_exams_call_+3A_which">which</code></td>
<td>
<p>integer. Specifies the hierarchy level
at which the <code>exams2xyz</code> call should be extracted.</p>
</td></tr>
<tr><td><code id="match_exams_call_+3A_deparse">deparse</code></td>
<td>
<p>logical. Should only the deparsed function name
be computed (or the entire call)?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function <code>match_exams_call</code> is useful for determining
within an exercise which <code>exams2xyz</code> interface is used in order
to behave slightly differently, e.g., for PDF vs. HTML output.
(This feature only works from R 3.2.0 onwards.)
</p>
<p>Similarly, the function <code>match_exams_device</code> can be used within
an exercise to use the same graphics device that <code>xweave</code> is
using.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## call exams2nops
dir.create(tdir &lt;- tempfile())
exams2nops("tstat2.Rmd", dir = tdir)
match_exams_call()

## graphics device used
match_exams_device()

## exams2nops called exams2pdf called xexams:
match_exams_call(which = NULL)

## get full exams2nops call
match_exams_call(deparse = FALSE)


## but note that convenience wrappers etc. are included
e2n &lt;- function(...) exams2nops(...)
e2n("tstat2.Rmd", dir = tdir)
match_exams_call(which = NULL)

</code></pre>

<hr>
<h2 id='matrix_to_schoice'>Generate Single- and Multiple-Choice Question Lists for Matrix Solutions</h2><span id='topic+matrix2schoice'></span><span id='topic+matrix_to_schoice'></span><span id='topic+matrix2mchoice'></span><span id='topic+matrix_to_mchoice'></span><span id='topic+det2schoice'></span><span id='topic+det_to_schoice'></span>

<h3>Description</h3>

<p>Functions for generating single- and multiple-choice question lists for
a matrix solution. (Optimized for integer matrices.)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>matrix_to_schoice(x, y = NULL, lower = FALSE, name = "a",
  delta = 0.5, digits = 0)

matrix_to_mchoice(x, y = NULL, lower = FALSE, name = "a",
  comparisons = c("==", "&lt;", "&gt;", "&lt;=", "&gt;="), restricted = FALSE)

det_to_schoice(x, y = NULL, range = NULL, delta = 0.5, digits = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="matrix_to_schoice_+3A_x">x</code></td>
<td>
<p>matrix (correct result).</p>
</td></tr>
<tr><td><code id="matrix_to_schoice_+3A_y">y</code></td>
<td>
<p>numeric vector (optional) with (potentially) wrong solutions/comparisons.</p>
</td></tr>
<tr><td><code id="matrix_to_schoice_+3A_lower">lower</code></td>
<td>
<p>logical. Should only elements from the lower triangle be assessed?</p>
</td></tr>
<tr><td><code id="matrix_to_schoice_+3A_name">name</code></td>
<td>
<p>character. Base name for matrix elements.</p>
</td></tr>
<tr><td><code id="matrix_to_schoice_+3A_delta">delta</code></td>
<td>
<p>numeric. Minimal distance between solutions.</p>
</td></tr>
<tr><td><code id="matrix_to_schoice_+3A_digits">digits</code></td>
<td>
<p>integer. Digits that should be displayed.</p>
</td></tr>
<tr><td><code id="matrix_to_schoice_+3A_comparisons">comparisons</code></td>
<td>
<p>character. Vector of logical comparisons that
should be employed.</p>
</td></tr>
<tr><td><code id="matrix_to_schoice_+3A_restricted">restricted</code></td>
<td>
<p>logical. Should the result be restricted ot at least one correct
and one wrong solution/comparison?</p>
</td></tr>
<tr><td><code id="matrix_to_schoice_+3A_range">range</code></td>
<td>
<p>numeric vector of length 2 (optional) with range of random wrong solutions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function <code>matrix_to_schoice</code> (or equivalently <code>matrix2schoice</code>)
can be used for generating a single-choice
question list for a correct result matrix <code>x</code>. One element is picked
randomly from the matrix and chosen to be the correct solution. Other values
from the observed absolute range are used as wrong solutions by default
(if <code>y</code> does not provide an alternative list of potential solutions).
</p>
<p>The function <code>matrix_to_mchoice</code> (or equivalently <code>matrix2mchoice</code>)
can be used for generating a multiple-choice
question list for a correct result matrix <code>x</code>. Each item from the question
list is a logical comparison of one matrix element with a comparion value.
By default the comparisons are picked randomly from the observed absolute range
(unless <code>y</code> specifies a different list of comparisons).
</p>
<p>The function <code>det_to_schoice</code>  (or equivalently <code>det2schoice</code>)
can be used for generating a single-choice
question list for the determinant of a 2x2 matrix. It has been optimized
for matrices with single-digit integer elements. It may not yield very
balanced random solutions for other scenarios.
</p>


<h3>Value</h3>

<p><code>matrix_to_schoice</code>/<code>matrix2schoice</code> returns a list with the following components:
</p>
<table>
<tr><td><code>index</code></td>
<td>
<p>numeric vector with matrix index of the correct solution chosen.</p>
</td></tr>
<tr><td><code>name</code></td>
<td>
<p>character with LaTeX code for the correct matrix element chosen.</p>
</td></tr>
<tr><td><code>solutions</code></td>
<td>
<p>a logical vector of length 5 indicating the <code>correct</code> solution,</p>
</td></tr>
<tr><td><code>questions</code></td>
<td>
<p>a character vector of length 5 with question list.</p>
</td></tr>
</table>
<p><code>matrix_to_mchoice</code>/<code>matrix2mchoice</code> returns a list with the following components:
</p>
<table>
<tr><td><code>solutions</code></td>
<td>
<p>a logical vector of length 5 indicating the <code>correct</code> solution,</p>
</td></tr>
<tr><td><code>questions</code></td>
<td>
<p>a character vector of length 5 with question list.</p>
</td></tr>
<tr><td><code>explanations</code></td>
<td>
<p>a character vector of length 5 with explanations why the
solutions are correct or wrong.</p>
</td></tr>
</table>
<p><code>det_to_schoice</code>/<code>det2schoice</code> returns a list with the following components:
</p>
<table>
<tr><td><code>solutions</code></td>
<td>
<p>a logical vector of length 5 indicating the <code>correct</code> solution,</p>
</td></tr>
<tr><td><code>questions</code></td>
<td>
<p>a character vector of length 5 with question list.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+num_to_schoice">num_to_schoice</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>A &lt;- matrix(c(-9, 0, 5, -2), ncol = 2)
matrix_to_schoice(A)
matrix_to_mchoice(A)
det_to_schoice(A)

B &lt;- matrix(1:9, ncol = 3)
matrix_to_schoice(B)
matrix_to_mchoice(B)
</code></pre>

<hr>
<h2 id='mchoice2string'>Convenience Functions for Exam Formatting</h2><span id='topic+mchoice2string'></span><span id='topic+string2mchoice'></span><span id='topic+mchoice2text'></span><span id='topic+answerlist'></span>

<h3>Description</h3>

<p>A collection of convenience functions for formatting in exam generation
that can be used for switching between suitable logical/text/numeric
representations of multiple choice solutions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  mchoice2string(x, single = FALSE)
  string2mchoice(x, single = FALSE)
  mchoice2text(x, markup = c("latex", "markdown"))
  answerlist(..., sep = ". ", markup = c("latex", "markdown"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mchoice2string_+3A_x">x</code></td>
<td>
<p>an object, see below for examples.</p>
</td></tr>
<tr><td><code id="mchoice2string_+3A_single">single</code></td>
<td>
<p>logical. Should the function check whether exactly
a single answer is true?</p>
</td></tr>
<tr><td><code id="mchoice2string_+3A_...">...</code></td>
<td>
<p>character vectors to be included in answer lists.</p>
</td></tr>
<tr><td><code id="mchoice2string_+3A_sep">sep</code></td>
<td>
<p>character for separation between vectors, see below
for examples.</p>
</td></tr>
<tr><td><code id="mchoice2string_+3A_markup">markup</code></td>
<td>
<p>character indicating which markup (LaTeX vs. Markdown)
should be generated.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Three convenience functions for facilitating work with
multiple choice solutions of exams. All have almost
trivial definitions, see also examples below. 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exams">exams</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## multiple choice answer
mc &lt;- c(TRUE, FALSE, TRUE, FALSE, FALSE)

## switching to string representation
mchoice2string(mc)

## reverse string encoding
string2mchoice("10100")

## switching to text
mchoice2text(mc)

## generating answerlist based on questions,
## solutions and explanations
qu &lt;- c("Zurich is the capital of Switzerland.",
        "Italian is an official language in Switzerland.",
        "Switzerland is part of the European Union.")
sol &lt;- c(FALSE, TRUE, FALSE)
ex &lt;- c("The capital of Switzerland is Bern.",
        "The four official languages are: German, French, Italian, Romansh.",
	"Switzerland is part of the Schengen Area but not the European Union.")
answerlist(qu)
answerlist(ifelse(sol, "True", "False"), ex)
</code></pre>

<hr>
<h2 id='moodle2exams'>Convert Moodle XML Quizzes to R/exams Exercises</h2><span id='topic+moodle2exams'></span>

<h3>Description</h3>

<p>Function to convert Moodle quiz exercises of type numerical, multichoice, shortanswer, and essay
to R/exams exercises of type num, schoice/mchoice, and string.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moodle2exams(x, markup = c("markdown", "latex"), dir = ".",
  exshuffle = TRUE, names = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="moodle2exams_+3A_x">x</code></td>
<td>
<p>character. Path to a Moodle XML file. If a character vector with more than
one element is provided, it is assumed to be an XML file as read with <code><a href="base.html#topic+readLines">readLines</a></code>.</p>
</td></tr>
<tr><td><code id="moodle2exams_+3A_markup">markup</code></td>
<td>
<p>character. Markup language to convert to, i.e., <code>"markdown"</code> (default)
corresponds to Rmd exercises and <code>"latex"</code> to Rnw exercises.</p>
</td></tr>
<tr><td><code id="moodle2exams_+3A_dir">dir</code></td>
<td>
<p>character. Directory where the converted exercises should be saved.
If set to <code>NULL</code> no files are saved.</p>
</td></tr>
<tr><td><code id="moodle2exams_+3A_exshuffle">exshuffle</code></td>
<td>
<p>logical or numeric. Meta-information tag used for single-choice and
multiple-choice items.</p>
</td></tr>
<tr><td><code id="moodle2exams_+3A_names">names</code></td>
<td>
<p>character. Optional file names (without suffix) that should be used for the
R/exams exercise files. The default is to use the name tags from the Moodle XML file
(with some fix-ups, avoiding certain special characters). Alternatively, names can also
be supplied and will then be used for both the file names and the  <code>exname</code>
meta-information tag, thus overwriting other names specified in the Moodle XML file.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function aims to facilitate converting an existing Moodle question pool to R/exams exercises.
The resulting exercise files can subsequently be edited further, e.g., for making them dynamic.
</p>
<p>The function takes a Moodle XML quiz and converts each exercise into a R/Markdown (Rmd) or
R/LaTeX (Rnw) R/exams exercise. The HTML answers and questions from the Moodle XML are converted using
pandoc (via <code><a href="rmarkdown.html#topic+pandoc_convert">pandoc_convert</a></code>). It is recommended to check the outcome
in case certain HTML markup, or mathematical equations, etc., cannot be converted fully automatically.
Currently only the Moodle XML exercise types numerical, multichoice, shortanswer, and essay 
are properly supported.
</p>
<p>There is limited support for cloze exercises, but the resulting meta-information needed by
R/exams will be incorrect. Hence, a warning is issued when converting cloze exercises.
</p>


<h3>Value</h3>

<p>A list of character vectors containing the R/exams exercise code with one element per exercise.
If <code>dir</code> is specified (default), these character vectors are saved in one file per exercise
(using <code><a href="base.html#topic+writeLines">writeLines</a></code>). In this case the list is returned invisibly. If <code>dir = NULL</code>
no files are saved and the list is returned visibly.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exams2moodle">exams2moodle</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>if(requireNamespace("xml2")) {
## path to a Moodle XML quiz file (provided in the package)
moodle_xml &lt;- file.path(find.package("exams"), "xml", "moodlequiz.xml")

## create a temporary directory for R/exams exercise files
dir.create(tdir &lt;- tempfile())

## convert all exercises from the Moodle XML to R/Markdown files
ex_converted &lt;- moodle2exams(moodle_xml, dir = tdir)
print(dir(tdir))

## additionally the source code of the Rmd files is also return invisible
## in 'ex_converted' and can be inspected manually, e.g., via writeLines()
names(ex_converted)
writeLines(ex_converted[[1]])

## clean up temporary directory
unlink(tdir)
}
</code></pre>

<hr>
<h2 id='nops_eval'>Evaluate NOPS Exams</h2><span id='topic+nops_eval'></span><span id='topic+nops_eval_write'></span>

<h3>Description</h3>

<p>Evaluate NOPS exams produced with <code><a href="#topic+exams2nops">exams2nops</a></code>,
and scanned by <code><a href="#topic+nops_scan">nops_scan</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  nops_eval(register = dir(pattern = "\\.csv$"), solutions = dir(pattern = "\\.rds$"),
    scans = dir(pattern = "^nops_scan_[[:digit:]]*\\.zip$"),
    points = NULL, eval = exams_eval(partial = TRUE, negative = FALSE, rule = "false2"),
    mark = c(0.5, 0.6, 0.75, 0.85), labels = NULL,
    dir = ".", results = "nops_eval", file = NULL, flavor = NULL,
    language = "en", interactive = TRUE,
    string_scans = dir(pattern = "^nops_string_scan_[[:digit:]]*\\.zip$"),
    string_points = seq(0, 1, 0.25),
    ...)

  nops_eval_write(results = "nops_eval.csv", file = "exam_eval",
    dir = ".", language = "en", converter = NULL,
    col = hcl(c(0, 0, 60, 120), c(70, 0, 70, 70), 90), encoding = "UTF-8",
    html = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nops_eval_+3A_register">register</code></td>
<td>
<p>character. File name of a CSV file (semicolon-separated)
of the registered students. Must contain columns <code>"registration"</code>
(registration number), <code>"name"</code> (student name), <code>"id"</code> (some user name
or other string unique for each student). The file name should not contain spaces,
umlaut or other special characters (e.g., something like
<code>"exam-2015-07-01.csv"</code> is recommended).</p>
</td></tr>
<tr><td><code id="nops_eval_+3A_solutions">solutions</code></td>
<td>
<p>character. File name of the RDS exam file
produced by <code><a href="#topic+exams2nops">exams2nops</a></code>.</p>
</td></tr>
<tr><td><code id="nops_eval_+3A_scans">scans</code></td>
<td>
<p>character. File name of the ZIP file with scanning results
(containing Daten.txt and PNG files) as produced by
<code><a href="#topic+nops_scan">nops_scan</a></code>.</p>
</td></tr>
<tr><td><code id="nops_eval_+3A_points">points</code></td>
<td>
<p>numeric. Vector of points per exercise. By default read from
<code>solutions</code>.</p>
</td></tr>
<tr><td><code id="nops_eval_+3A_eval">eval</code></td>
<td>
<p>list specification of evaluation policy as computed by
<code><a href="#topic+exams_eval">exams_eval</a></code>.</p>
</td></tr>
<tr><td><code id="nops_eval_+3A_mark">mark</code></td>
<td>
<p>logical or numeric. If <code>mark = FALSE</code>, no marks are computed.
Otherwise <code>mark</code> needs to be a numeric vector with threshold values to
compute marks. The thresholds can either be relative (all lower than 1)
or absolute. In case results exactly matching a threshold, the better mark is used.</p>
</td></tr>
<tr><td><code id="nops_eval_+3A_labels">labels</code></td>
<td>
<p>character. Vector of labels for the marks with
<code>length(mark) + 1</code> elements. Default is <code>(length(mark) + 1):1</code>.</p>
</td></tr>
<tr><td><code id="nops_eval_+3A_dir">dir</code></td>
<td>
<p>character. File path to the output directory (the default being the
current working directory).</p>
</td></tr>
<tr><td><code id="nops_eval_+3A_results">results</code></td>
<td>
<p>character. Prefix for output files.</p>
</td></tr>
<tr><td><code id="nops_eval_+3A_file">file</code></td>
<td>
<p>character. File name for individual report files, in the default
<code>nops_eval_write</code> the same as <code>register</code> with suffix <code>.html</code>.</p>
</td></tr>
<tr><td><code id="nops_eval_+3A_flavor">flavor</code></td>
<td>
<p>character. Rather than using the default <code>nops_eval_write</code>
it is possible to call <code>nops_eval_write_&lt;flavor&gt;</code>. Currently, only
the default writer is available but other formats are planned (e.g., Moodle).</p>
</td></tr>
<tr><td><code id="nops_eval_+3A_language">language</code></td>
<td>
<p>character. Path to a DCF file with a language specification.
Currently, the package ships: English (<code>"en"</code>), Dutch (<code>"nl"</code>),
French (<code>"fr"</code>), German (<code>"de"</code>), Italian (<code>"it"</code>),
Romanian (<code>"ro"</code>), Portuguese (<code>"pt"</code>), Spanish (<code>"es"</code>),
Turkish (<code>"tr"</code>).</p>
</td></tr>
<tr><td><code id="nops_eval_+3A_interactive">interactive</code></td>
<td>
<p>logical. Should possible errors in the Daten.txt file
by corrected interactively? Requires the <span class="pkg">png</span> package for full
interactivity.</p>
</td></tr>
<tr><td><code id="nops_eval_+3A_string_scans">string_scans</code></td>
<td>
<p>character. Optional file name of the ZIP file with scanning results
of string exercise sheets (if any) containing Daten2.txt and PNG files as produced
by <code><a href="#topic+nops_scan">nops_scan</a></code>.</p>
</td></tr>
<tr><td><code id="nops_eval_+3A_string_points">string_points</code></td>
<td>
<p>numeric. Vector of length 5 with points assigned
to string results, multiplied with the <code>points</code> for the corresponding
exercises.</p>
</td></tr>
<tr><td><code id="nops_eval_+3A_...">...</code></td>
<td>
<p>further optional arguments passed from <code>nops_eval</code> to
<code>nops_eval_write</code> (or any other <code>nops_eval_write_&lt;flavor&gt;</code>).</p>
</td></tr>
<tr><td><code id="nops_eval_+3A_converter">converter</code></td>
<td>
<p>character. The HTML converter to be used for the <code>language</code>
text elements. Can be <code>"none"</code>, <code>"tth"</code>, or <code>"pandoc"</code>.</p>
</td></tr>
<tr><td><code id="nops_eval_+3A_col">col</code></td>
<td>
<p>character. Hex color codes used for exercises with
negative, neutral, positive, full solution.</p>
</td></tr>
<tr><td><code id="nops_eval_+3A_encoding">encoding</code></td>
<td>
<p>character. Encoding of <code>register</code>, e.g.,
<code>"latin1"</code> or <code>"UTF-8"</code> (default).</p>
</td></tr>
<tr><td><code id="nops_eval_+3A_html">html</code></td>
<td>
<p>character. Alternative specifciation of the <code>file</code> name for the
individual HTML report files. As <code>html</code> was used rather than <code>file</code>
in earlier versions of the package, <code>html</code> is preserved as an argument
and overwrites <code>file</code> if specified.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>nops_eval</code> is a companion function for <code><a href="#topic+exams2nops">exams2nops</a></code>
and <code><a href="#topic+nops_scan">nops_scan</a></code>. It evaluates the scanned exams by computing
the sums of the points achived and (if desired) maps them to marks. Furthermore
a HTML report for each individual student is generated by default (e.g., for upload into
a learning management system).
</p>
<p>Tutorial for NOPS workflow: <a href="https://www.R-exams.org/tutorials/exams2nops/">https://www.R-exams.org/tutorials/exams2nops/</a>.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> with the detailed exam results is returned invisibly.
It is also written to a CSV file in the current directory, by default along with
a ZIP file containing HTML reports.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exams2nops">exams2nops</a></code>, <code><a href="#topic+nops_scan">nops_scan</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>
## --- Preliminaries ---

## load package and enforce par(ask = FALSE)
## additionally, for simplicity, enforce using the basic
## tools::texi2dvi() LaTeX interface instead of the more
## flexible/robust tinytex::latexmk()
library("exams")
oopt &lt;- options(device.ask.default = FALSE, exams_tex = "tools")

## set up a temporary working directory in which all files are managed
odir &lt;- getwd()
dir.create(mydir &lt;- tempfile())
setwd(mydir)


## --- Step 1 ---
## exam generation

## define an exam (= list of exercises)
myexam &lt;- list(
  "tstat2.Rmd",
  "ttest.Rmd",
  "relfreq.Rmd",
  "anova.Rmd",
  c("boxplots.Rmd", "scatterplot.Rmd"),
  "cholesky.Rmd"
)

## create multiple exams on the disk with different numbers of points
## per exercise (see ?exams2nops for more examples)
set.seed(403)
ex1 &lt;- exams2nops(myexam, n = 2, dir = ".", date = "2015-07-29",
  points = c(1, 1, 1, 2, 2, 3), showpoints = TRUE)
dir()

## assume the PDF exams were already printed (and possibly backed up
## in a different directory) so that they are not needed anymore
file.remove(dir(pattern = "pdf$"))


## --- Step 2 ---
## scan results

## assume two participants filled out the printed exam sheets
## and the corresponding scans are in two PNG files,
img &lt;- dir(system.file("nops", package = "exams"), pattern = "nops_scan",
  full.names = TRUE)

## copy the PNG files to the working directory
file.copy(img, to = ".")

## read the scanned images (all locally available .png files) and collect
## results in a ZIP archive (see ?nops_scan for more details)
nops_scan()
dir()

## the ZIP archive contains copies of the PNG images so that these are
## can be deleted here (possibly after backup in a different directory)
file.remove(dir(pattern = "png$"))


## -- Step 3 ---
## evaluate results

## three files are required: (a) an RDS file with the exam meta-information
## (see Step 1), (b) a ZIP file with the scanned sheets (see Step 2), (c) a
## CSV file with the student infomation (registration number, name, and some
## for of ID/username)

## here we create the CSV file on the fly but in practice this will typically
## be processed from some registration service or learning management system etc
write.table(data.frame(
  registration = c("1501090", "9901071"),
  name = c("Jane Doe", "Ambi Dexter"),
  id = c("jane_doe", "ambi_dexter")
), file = "Exam-2015-07-29.csv", sep = ";", quote = FALSE, row.names = FALSE)
dir()
## now the exam can be evaluated creating an output data frame (also stored
## as CSV file) and individual HTML reports (stored in a ZIP file),

## as there is only exactly on CSV/RDS/ZIP file in the current directory,
## these are found automatically - furthermore an evaluation scheme without
## partial points and differing points per exercise are used
ev1 &lt;- nops_eval(eval = exams_eval(partial = FALSE, negative = FALSE))
dir()

## inspect evaluated data
ev1

## inspect corresponding HTML reports
if(interactive()) {
unzip("nops_eval.zip")
browseURL(file.path(mydir, "jane_doe",    "Exam-2015-07-29.html"))
browseURL(file.path(mydir, "ambi_dexter", "Exam-2015-07-29.html"))
}

## --- Options ---
if(interactive()) {
## below three typically needed options are discussed:
## (a) using a different evaluation strategy (here with partial credits),
## (b) using a different language (here de/German),
## (c) an error of the participant when filling in the registration number.

## as for (a): partial credits should only be used for multiple-choice questions
## where at least one alternative is correct and at least one is false
## [note that in this example this is not the case for the first question
## (single-choice) and the third question for Jane Doe (no alternative correct)]

## as for (c): for Ambi Dexter such an error was included in the PNG example
## image, the actual number is "9911071" but the crosses indicate "9901071"

## clean up previous evaluation
file.remove(c("nops_eval.csv", "nops_eval.zip"))

## write correct registration information
write.table(data.frame(
  registration = c("1501090", "9911071"),
  name = c("Jane Doe", "Ambi Dexter"),
  id = c("jane_doe", "ambi_dexter")
), file = "Exam-2015-07-29.csv", sep = ";", quote = FALSE, row.names = FALSE)

## call nops_eval() with modified options, where the error in the registration
## number of Ambi Dexter will trigger an interactive prompt
ev2 &lt;- nops_eval(eval = exams_eval(partial = TRUE, rule = "false2"),
  language = "de")

## inspect evaluated data
ev2
cbind(ev1$points, ev2$points)

## inspect corresponding HTML reports
unzip("nops_eval.zip")
browseURL(file.path(mydir, "jane_doe",    "Exam-2015-07-29.html"))
browseURL(file.path(mydir, "ambi_dexter", "Exam-2015-07-29.html"))
}

## switch back to original working directory and options
setwd(odir)
options(exams_tex = oopt$exams_tex)

</code></pre>

<hr>
<h2 id='nops_language'>Read NOPS Language Specifciation</h2><span id='topic+nops_language'></span>

<h3>Description</h3>

<p>Read a NOPS language specification from a DCF file and optionally
convert the language text to HTML.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  nops_language(file, converter = c("none", "tth", "pandoc"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nops_language_+3A_file">file</code></td>
<td>
<p>character. Path to a DCF file with a language specification.
See <code><a href="#topic+exams2nops">exams2nops</a></code> for a list of languages shipped in the package.</p>
</td></tr>
<tr><td><code id="nops_language_+3A_converter">converter</code></td>
<td>
<p>character. The HTML converter to be used for the language
text elements. Can be <code>"none"</code>, <code>"tth"</code>, or <code>"pandoc"</code>.</p>
</td></tr>
<tr><td><code id="nops_language_+3A_...">...</code></td>
<td>
<p>further arguments passed to the <code>converter</code> (if any), e.g.,
for obtaining output formats other than HTML.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The NOPS exams infrastructure is internationalized and can be customized through
DCF files (borrowing the format from Debian configuration files). For a detailed
description see: <a href="https://www.R-exams.org/tutorials/nops_language/">https://www.R-exams.org/tutorials/nops_language/</a>.
The DCF files typically either contain special characters as LaTeX commands or
in UTF-8 encoding. To handle the former case, a <code>converter</code> can be applied
to convert the language texts to HTML.
</p>


<h3>Value</h3>

<p>A list with all language components provided by the DCF file.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exams2nops">exams2nops</a></code>, <code><a href="#topic+nops_eval">nops_eval</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## English
en &lt;- nops_language("en")
names(en)
en$NoChanges

## French (LaTeX vs. HTML)
nops_language("fr", converter = "none")$NoChanges
nops_language("fr", converter = "tth")$NoChanges

## French (HTML or Markdown via pandoc)
nops_language("fr", converter = "pandoc")$NoChanges
nops_language("fr", converter = "pandoc", to = "markdown_strict")$NoChanges
</code></pre>

<hr>
<h2 id='nops_scan'>Read Scanned NOPS Exams</h2><span id='topic+nops_scan'></span>

<h3>Description</h3>

<p>Read scanned NOPS exams produced with <code><a href="#topic+exams2nops">exams2nops</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  nops_scan(
    images = dir(pattern = "\\.PNG$|\\.png$|\\.PDF|\\.pdf$",
      path = dir, full.names = TRUE),
    file = NULL, dir = ".",
    verbose = TRUE, rotate = FALSE, cores = NULL, n = NULL,
    density = 300,
    size = 0.03, threshold = c(0.04, 0.42), trim = 0.3, minrot = 0.002,
    string = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nops_scan_+3A_images">images</code></td>
<td>
<p>character. Names of the PDF/PNG images containing the scanned exams.
By default all PDF/PNG images in the current working directory are used.</p>
</td></tr>
<tr><td><code id="nops_scan_+3A_file">file</code></td>
<td>
<p>character or logical. Optional file name for the output ZIP archive
containing the PNG images and the scan results. If <code>file = FALSE</code> no
ZIP archive is created. By default a suitable name using the current time/date
is used.</p>
</td></tr>
<tr><td><code id="nops_scan_+3A_dir">dir</code></td>
<td>
<p>character. Directory in which the ZIP <code>file</code> should be created.
By default the current working directory.</p>
</td></tr>
<tr><td><code id="nops_scan_+3A_verbose">verbose</code></td>
<td>
<p>logical. Should progress information be displayed?</p>
</td></tr>
<tr><td><code id="nops_scan_+3A_rotate">rotate</code></td>
<td>
<p>logical. Should the input PDF/PNG images be rotated by 180 degrees
first?</p>
</td></tr>
<tr><td><code id="nops_scan_+3A_cores">cores</code></td>
<td>
<p>numeric. If set to an integer <code><a href="parallel.html#topic+mclapply">mclapply</a></code> is
called internally using the desired number of <code>cores</code> to read the scanned
exams in parallel.</p>
</td></tr>
<tr><td><code id="nops_scan_+3A_n">n</code></td>
<td>
<p>numeric. The number of answer fields to read (in multiples of 5),
i.e., 5, 10, ..., 45. By default taken from the type field.</p>
</td></tr>
<tr><td><code id="nops_scan_+3A_density">density</code></td>
<td>
<p>numeric. Resolution used in the conversion of PDF images to
PNG. This requires ImageMagick's convert to be available on the system.</p>
</td></tr>
<tr><td><code id="nops_scan_+3A_size">size</code></td>
<td>
<p>numeric. Size of the boxes containing the check marks relative to the
image height. Should typically be between 0.025 and 0.045.</p>
</td></tr>
<tr><td><code id="nops_scan_+3A_threshold">threshold</code></td>
<td>
<p>numeric. Vector of thresholds for the gray levels in the check
mark boxes. If the average gray level is between the gray levels, the box is
checked. If it is above the second threshold, some heuristic is employed for
judging whether the box contains a cross or not.</p>
</td></tr>
<tr><td><code id="nops_scan_+3A_trim">trim</code></td>
<td>
<p>numeric. Amount of trimming to shave the borders of the boxes
before determining the gray level within the check boxes. Should usually be
between 0.25 (default up to version 2.3-1) and 0.35.</p>
</td></tr>
<tr><td><code id="nops_scan_+3A_minrot">minrot</code></td>
<td>
<p>numeric. Minimum angle for rotating images, i.e., images with
a lower angle are considered to be ok.</p>
</td></tr>
<tr><td><code id="nops_scan_+3A_string">string</code></td>
<td>
<p>logical. Are the files to be scanned manually marked string
exercises (rather than single/multiple choice exercises)?</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>nops_scan</code> is a companion function for <code><a href="#topic+exams2nops">exams2nops</a></code>.
Exams generated with <code>exams2nops</code> can be printed and the filled out
answer page can be scanned. Then, <code>nops_scan</code> can be employed to read
the information in the scanned PDF/PNG images. The results are one text line
per image containing the information in a very simple space-separated format.
</p>
<p>If <code>images</code> only contains PNG files, then the R function <code><a href="png.html#topic+readPNG">readPNG</a></code>
is sufficient for reading the images into R. If <code>images</code> contains PDF files,
these need to be converted to PNG first which requires PDFTk, GhostScript, and ImageMagick's
convert to be available on the system. On Linux(-esque) systems this is typically
easy to install by pdftk and imagemagick. The download links for Windows are:
<a href="https://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/pdftk_free-2.02-win-setup.exe">https://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/pdftk_free-2.02-win-setup.exe</a>,
<a href="https://www.imagemagick.org/script/download.php#windows">https://www.imagemagick.org/script/download.php#windows</a>,
<a href="https://www.ghostscript.com/releases/gsdnld.html">https://www.ghostscript.com/releases/gsdnld.html</a>.
</p>
<p>Tutorial for NOPS workflow: <a href="https://www.R-exams.org/tutorials/exams2nops/">https://www.R-exams.org/tutorials/exams2nops/</a>.
</p>
<p>Practical recommendations:
</p>
<p>The scanned images produced by scanners or copying
machines typically become smaller in size if the images are read in just black/white
(or grayscale). This may sometimes even improve the reliability of reading the
images afterwards. Also make sure that the resulting images have a good contrast
and are neither too light or too dark because too many or too little dark pixels
increase the probability of scanning problems.
</p>
<p>Make sure that the sheets are fed firmly into the scanner, e.g., by tightening
the tracks of the feeder.
</p>
<p>The printed exams are often stapled in the top left corner which has to be unhinged
somehow by the exam participants. Although this may damage the exam sheet, this is
usually no problem for scanning it. However, the copying machine's sheet feeder
may work better if the sheets are turned upside down (so that the damaged corner
is not fed first into the machine). This often improves the scanning results
considerably and can be accomodated by setting <code>rotate = TRUE</code> in <code>nops_scan</code>.
</p>


<h3>Value</h3>

<p>A character vector with one element per scanned file (returned invisily if
written to an output ZIP archive). The output contains the following space-separated
information: file name, sheet ID (11 digits), scrambling (2 digits),
type of sheet (3 digits, coding the number of questions rounded up to steps of 5
and the length of the registration number),
0/1 indicator whether the replacement sheet was used,
registration number (7-10 digits),
45 multiple choice answers of length 5 (all 00000 if unused).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exams2nops">exams2nops</a></code>, <code><a href="#topic+nops_eval">nops_eval</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>if(requireNamespace("png")) {
## scanned example images stored in exams package
img &lt;- dir(system.file("nops", package = "exams"), pattern = "nops_scan",
  full.names = TRUE)

## read content
res &lt;- nops_scan(img, file = FALSE)
writeLines(res)
}
</code></pre>

<hr>
<h2 id='num_to_schoice'>Generate Single-Choice Question List from Numeric Solution</h2><span id='topic+num2schoice'></span><span id='topic+num_to_schoice'></span>

<h3>Description</h3>

<p>A function for generating a single-choice question list for one
correct numeric solution along with four wrong solutions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>num_to_schoice(correct, wrong = NULL, range = c(0.5, 1.5) * correct,
  delta = 1, digits = 2, method = c("runif", "delta"), sign = FALSE,
  verbose = getOption("num_to_choice_warnings"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="num_to_schoice_+3A_correct">correct</code></td>
<td>
<p>numeric vector of length 1 with correct solution.</p>
</td></tr>
<tr><td><code id="num_to_schoice_+3A_wrong">wrong</code></td>
<td>
<p>numeric vector (optional) with wrong solutions.</p>
</td></tr>
<tr><td><code id="num_to_schoice_+3A_range">range</code></td>
<td>
<p>numeric vector of length 2 with range of random wrong solutions.</p>
</td></tr>
<tr><td><code id="num_to_schoice_+3A_delta">delta</code></td>
<td>
<p>numeric. Minimal distance between solutions.</p>
</td></tr>
<tr><td><code id="num_to_schoice_+3A_digits">digits</code></td>
<td>
<p>integer. Digits that should be displayed.</p>
</td></tr>
<tr><td><code id="num_to_schoice_+3A_method">method</code></td>
<td>
<p>character specifying method for generating random results.</p>
</td></tr>
<tr><td><code id="num_to_schoice_+3A_sign">sign</code></td>
<td>
<p>logical. Should the sign be changed randomly?</p>
</td></tr>
<tr><td><code id="num_to_schoice_+3A_verbose">verbose</code></td>
<td>
<p>logical. Should warnings be issued if no suitable
set of wrong solutions can be found?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function <code>num_to_schoice</code> (or equivalently <code>num2schoice</code>)
can be used for generating a single-choice
question list for a numeric <code>correct</code> solution. The question list
always comprises five elements, one of which is the correct solution. The
wrong solutions can be provided or are generated randomly. If <code>wrong</code>
is provided only up to 2 elements of it are used in order to assure some
random solutions.
</p>
<p>Two methods can be used to generate the wrong solutions: Either simply
<code><a href="stats.html#topic+runif">runif</a></code> or otherwise a full equi-distant grid for the
<code>range</code> with step size <code>delta</code> is set up from which a discrete
uniform sample is drawn. The former is preferred if the <code>range</code> is large
enough while the latter performs better if the <code>range</code> is small (as
compared to <code>delta</code>.
</p>
<p>Exercise templates using <code>num_to_schoice</code> should be thoroughly
tested in order to avoid problems with too small ranges or almost
identical correct and wrong answers! This can potentially cause problems,
infinite loops, etc.
</p>


<h3>Value</h3>

<p><code>num_to_schoice</code>/<code>num2schoice</code> returns either <code>NULL</code> (if no suitable question
list can be found) or a list with the following components:
</p>
<table>
<tr><td><code>solutions</code></td>
<td>
<p>a logical vector of length 5 indicating the <code>correct</code> solution,</p>
</td></tr>
<tr><td><code>questions</code></td>
<td>
<p>a character vector of length 5 with question list.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+matrix_to_schoice">matrix_to_schoice</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(1)
## just a correct solution
num_to_schoice(123.45)

## or equivalently
set.seed(1)
num2schoice(123.45)

## just a correct integer solution
num_to_schoice(123, digits = 0)

## a correct solution with a wider range
num_to_schoice(123.45, range = c(0, 200))

## here, the defaults can't work...
## num_to_schoice(0.1234)

## alternatives could be
num_to_schoice(0.1234, range = c(0, 1), delta = 0.03, method = "delta")
num_to_schoice(0.1234, range = c(-5, 5), delta = 0.05)
num_to_schoice(0.1234, wrong = c(0.2749, 1.9723), delta = 0.05)
num_to_schoice(0.1234, wrong = c(0.2749, 1.9723), range = c(-5, 5), delta = 0.05)
</code></pre>

<hr>
<h2 id='read_exercise'>Reading LaTeX/Markdown Exercise Files</h2><span id='topic+read_exercise'></span><span id='topic+extract_command'></span><span id='topic+extract_extra'></span><span id='topic+extract_environment'></span><span id='topic+extract_items'></span><span id='topic+read_metainfo'></span>

<h3>Description</h3>

<p>Reading an exercise in either LaTeX format (i.e.,
after <code><a href="utils.html#topic+Sweave">Sweave</a></code> was run) or
Markdown format (i.e., after <code><a href="knitr.html#topic+knit">knit</a></code>
was run).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  read_exercise(file, markup = NULL, exshuffle = NULL)
  read_metainfo(file, markup = NULL, exshuffle = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_exercise_+3A_file">file</code></td>
<td>
<p>character. Name of the LaTeX (<code>.tex</code>) or
Markdown (<code>.md</code>) file that should be read into R.</p>
</td></tr>
<tr><td><code id="read_exercise_+3A_markup">markup</code></td>
<td>
<p>character specifying whether <code>file</code> is a <code>"latex"</code>
or <code>"markdown"</code> exercise. By default (<code>NULL</code>) it is
inferred from the <code>file</code> extension.</p>
</td></tr>
<tr><td><code id="read_exercise_+3A_exshuffle">exshuffle</code></td>
<td>
<p>logical or integer. If the <code>exshuffle</code>
argument is non-<code>NULL</code> it is used to overrule the <code>exshuffle</code>
tag from the <code>file</code> (e.g., <code>exshuffle = FALSE</code> can be used
to keep all available answers without permutation).</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>read_exercise</code> extracts the LaTeX/Markdown code from the question
and solution environments/sections of the exercise file, extracting
the corresponding answerlists separately (if any). Paths to supplementary
files (such as graphics or data files) are stored and the 
metainformation is extracted (by calling <code>read_metainfo</code> which
also includes sanity checks).
</p>
<p>The supported metainformation commands are described in detail in
<code>vignette("exams2", package = "exams")</code>, see Table 2. Essentially
the <code>extype</code> command in is mapped to the <code>type</code>
element of the returned list etc. (see the Value section below), using
the right storage mode for each command (numeric, character, logical).
Additionally, there is an <code>exextra</code> command which allows to set
up arbitrary additional metainformation elements.
</p>


<h3>Value</h3>

<p><code>read_exercise</code> returns a list with elements
</p>
<table>
<tr><td><code>question</code></td>
<td>
<p>a character vector with LaTeX/Markdown code from the
question environment (excluding the answerlist environment,
if any).</p>
</td></tr>
<tr><td><code>questionlist</code></td>
<td>
<p>a character vector with LaTeX/Markdown code from the
answerlist environment within the question environment (if any).</p>
</td></tr>
<tr><td><code>solution</code></td>
<td>
<p>a character vector with LaTeX/Markdown code from the
solution environment (excluding the answerlist environment,
if any).</p>
</td></tr>
<tr><td><code>solutionlist</code></td>
<td>
<p>a character vector with LaTeX/Markdown code from the
answerlist environment within the solution environment (if any).</p>
</td></tr>
<tr><td><code>metainfo</code></td>
<td>
<p>a list of metainformation options, see below.</p>
</td></tr>
<tr><td><code>supplements</code></td>
<td>
<p>a character vector with paths to supplementary
files such as graphics or data files (if any).</p>
</td></tr>
</table>
<p><code>read_metainfo</code> returns a list with the following elements.
Most elements may also be <code>NULL</code> (or empty) if the underlying
information is not specified in the <code>file</code>. If <code>file</code> specifies
extra information, there may also be additional list elements.
</p>
<table>
<tr><td><code>file</code></td>
<td>
<p>character with file name (without extension) of the exercise
template.</p>
</td></tr>
<tr><td><code>markup</code></td>
<td>
<p>character indicating whether <code>"latex"</code> or <code>"markdown"</code>
markup is used in the exercise.</p>
</td></tr>
<tr><td><code>type</code></td>
<td>
<p>character indicating exercise type: <code>num</code>, <code>mchoice</code>,
<code>schoice</code>, <code>string</code>, or <code>cloze</code>.</p>
</td></tr>
<tr><td><code>name</code></td>
<td>
<p>character with short name/description (to be used for printing within R).</p>
</td></tr>
<tr><td><code>title</code></td>
<td>
<p>character with a pretty longer title.</p>
</td></tr>
<tr><td><code>section</code></td>
<td>
<p>character with sections for groups of exercises (using slashes for
subsections like a URL).</p>
</td></tr>
<tr><td><code>version</code></td>
<td>
<p>character with version of exercise.</p>
</td></tr>
<tr><td><code>solution</code></td>
<td>
<p>correct solution. The type/value depends on the
<code>type</code> of the exercise: <code>num</code> leads to a numeric vector (of length 1
or 2), <code>mchoice</code>/<code>schoice</code> lead to logical vector, <code>string</code> to
a character vector (of length 1), and <code>cloze</code> leads to a list of
solutions (depending on <code>clozetype</code>).</p>
</td></tr>
<tr><td><code>tolerance</code></td>
<td>
<p>numeric tolerance limits (of length 1 or 2) for numeric
solutions.</p>
</td></tr>
<tr><td><code>clozetype</code></td>
<td>
<p>character indicating the types of the elements of a
<code>cloze</code> exercise.</p>
</td></tr>
<tr><td><code>points</code></td>
<td>
<p>numeric with (default) points for correct solution.</p>
</td></tr>
<tr><td><code>time</code></td>
<td>
<p>numeric with (default) time (in seconds) for solution.</p>
</td></tr>
<tr><td><code>shuffle</code></td>
<td>
<p>logical indicating whether <code>mchoice</code>/<code>schoice</code>
answers should be shuffled (in Moodle or other e-learning systems).</p>
</td></tr>
<tr><td><code>single</code></td>
<td>
<p>logical indicating whether radio buttons should be
used in Moodle.</p>
</td></tr>
<tr><td><code>length</code></td>
<td>
<p>numeric with length of <code>solution</code>.</p>
</td></tr>
<tr><td><code>string</code></td>
<td>
<p>character with a collapsed string of the solution (and tolerance)
for backward compatibility with <code><a href="#topic+exams">exams</a></code>.</p>
</td></tr>
<tr><td><code>maxchars</code></td>
<td>
<p>character with the maximum number of characters
allowed in QTI text answers (exercise type: string).</p>
</td></tr>
<tr><td><code>abstention</code></td>
<td>
<p>character with the label to be used for an abstention
button in schoice/mchoice answers (currently only supported by Moodle).</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+xexams">xexams</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## xexams() uses read_exercise() by default to read in
## each individual exercise, e.g., here for only a single
## exam with only a single exercise the result is:
set.seed(1090)
xexams("tstat.Rnw")[[1]][[1]]

## the corresponding Markdown version has:
set.seed(1090)
xexams("tstat.Rmd")[[1]][[1]]
</code></pre>

<hr>
<h2 id='stresstest_exercise'>
Stress Testing Exercises
</h2><span id='topic+stresstest_exercise'></span><span id='topic+stresstest'></span><span id='topic+plot.stress'></span>

<h3>Description</h3>

<p>In order to check the correct behavior of an exercise it is compiled several times.
In each iteration the objects created by the exercise are collected and its values
can be inspected.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Stresstest function.
stresstest_exercise(file, n = 100, verbose = TRUE, seeds = NULL,
  stop_on_error = length(as.character(unlist(file))) &lt; 2, ...)

## Plotting stresstest results.
## S3 method for class 'stress'
plot(x, type = c("overview", "solution", "rank", "runtime"),
  threshold = NULL, variables = NULL,
  spar = TRUE, ask = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stresstest_exercise_+3A_file">file</code></td>
<td>
<p>character. A specification of an exercise file. If multiple files
should be tested, argument <code>file</code> can also be a vector, matrix or list of
files. The latter case sets argument <code>plot = FALSE</code>.</p>
</td></tr>
<tr><td><code id="stresstest_exercise_+3A_n">n</code></td>
<td>
<p>integer. The number of replications.</p>
</td></tr>
<tr><td><code id="stresstest_exercise_+3A_verbose">verbose</code></td>
<td>
<p>logical. Should the seeds used for compiling the exercise
be prompted on the console.</p>
</td></tr>
<tr><td><code id="stresstest_exercise_+3A_seeds">seeds</code></td>
<td>
<p>The seeds that should be used when compiling the exercise. The
default is <code>seeds = 1:n</code>.</p>
</td></tr>
<tr><td><code id="stresstest_exercise_+3A_stop_on_error">stop_on_error</code></td>
<td>
<p>logical. Should the function stop on error or return
the the seed, the file name and the error message. Useful when testing
a number of exercises.</p>
</td></tr>
<tr><td><code id="stresstest_exercise_+3A_x">x</code></td>
<td>
<p>An object returned from function <code>stresstest_exercise</code>.</p>
</td></tr>
<tr><td><code id="stresstest_exercise_+3A_type">type</code></td>
<td>
<p>character. <code>type == "overview"</code> plots the basic overview, i.e, the runtimes,
numeric solutions, position/number/rank of correct solution(s), if available.
If <code>type == "solution"</code>, the numeric solutions
are plotted against all input parameters stored in the <code>objects</code> element of <code>x</code>.
<code>type == "rank"</code> draws <code><a href="graphics.html#topic+spineplot">spineplot</a></code>s of ranks
vs. input parameters stored in <code>objects</code>. <code>type == "runtime"</code> plots the compiling
runtimes vs. <code>objects</code>.</p>
</td></tr>
<tr><td><code id="stresstest_exercise_+3A_threshold">threshold</code></td>
<td>
<p>numeric. Can be used to set a threshold, e.g., for numeric solutions a factor
is created, <code>factor(solution &lt;= threshold)</code>, that is used on the y-axis of a
<code><a href="graphics.html#topic+spineplot">spineplot</a></code>.</p>
</td></tr>
<tr><td><code id="stresstest_exercise_+3A_variables">variables</code></td>
<td>
<p>character. The variables that should be used from the <code>objects</code> for
plotting.</p>
</td></tr>
<tr><td><code id="stresstest_exercise_+3A_spar">spar</code></td>
<td>
<p>logical. Should graphical parameters be set or not.</p>
</td></tr>
<tr><td><code id="stresstest_exercise_+3A_ask">ask</code></td>
<td>
<p>logical. For multiple plots, should the user be asked to hit the return key to see the
next plot.</p>
</td></tr>
<tr><td><code id="stresstest_exercise_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code><a href="#topic+xexams">xexams</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In order to check the correct behavior of an exercise function <code>stresstest_exercise</code> runs
<code><a href="#topic+xexams">xexams</a></code> <code>n</code> times using different seeds. If an error occurs when compiling,
the error can be reproduced by setting the seed that is prompted at the console and create
the exercise again, e.g., with <code><a href="#topic+exams2html">exams2html</a></code>. This way errors can be detected
systematically.
</p>
<p>All objects with length 1, which are created by the exercise, are collected in a data frame.
These objects are assumed to be input parameters that control the output of the exercise. This
can be used to detect certain input values that, e.g., lead to very long run times, or
drive the number of correct answers in multiple choice exercises, etc.
</p>
<p>For single and multiple choice type question the position(s) of the correct solution(s) is
returned. For single choice questions that are created from a numeric version, e.g., using
function <code><a href="#topic+num_to_schoice">num_to_schoice</a></code> the answers are again converted to numeric and the rank
of the correct solution is reported. The rank is sometimes heavily driven by some input
parameters, e.g., the correct solution is always the largest or the smallest.
For non-numeric choice questions, the rank is based on the lexicographical order of
the answerlist.
</p>


<h3>Value</h3>

<p>Function <code>stresstest_exercise</code> returns an object of class <code>"stress"</code> (a named list) with
the following elements:
</p>
<table>
<tr><td><code>seeds</code></td>
<td>
<p>The seeds that where used.</p>
</td></tr>
<tr><td><code>runtime</code></td>
<td>
<p>Compiling times for each iteration.</p>
</td></tr>
<tr><td><code>objects</code></td>
<td>
<p>A data frame of length 1 objects that are created by the exercise.</p>
</td></tr>
<tr><td><code>solution</code></td>
<td>
<p>The numeric solution, availability is depending on the type of exercise.</p>
</td></tr>
<tr><td><code>position</code></td>
<td>
<p>A matrix indicating the position of correct solutions.</p>
</td></tr>
<tr><td><code>rank</code></td>
<td>
<p>The rank of the correct solution, only available for choice exercises.</p>
</td></tr>
<tr><td><code>ntrue</code></td>
<td>
<p>The number of correct answers in multiple choice type questions.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+xexams">xexams</a></code>, <code><a href="#topic+num_to_schoice">num_to_schoice</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: ## Stress testing.
t1 &lt;- stresstest_exercise("tstat.Rmd", n = 100)
t2 &lt;- stresstest_exercise("tstat2.Rmd", n = 100)

## Plotting.
plot(t1, type = "overview")
plot(t1, type = "solution")
plot(t1, type = "solution", threshold = 30)
plot(t2, type = "rank")
plot(t2, type = "runtime")

## For custom inspection, object can be
## transformed to a data.frame.
head(as.data.frame(t2))

## Multiple testing.
files &lt;- list(
  "boxplots.Rmd",
  c("tstat.Rmd", "ttest.Rmd", "confint.Rmd"),
  c("regression.Rmd", "anova.Rmd"),
  "scatterplot.Rmd",
  "relfreq.Rmd"
)
t3 &lt;- stresstest_exercise(files, n = 100)
plot(t3)

## End(Not run)
</code></pre>

<hr>
<h2 id='testvision2exams'>Convert TestVision XML Questions to R/exams Exercises</h2><span id='topic+testvision2exams'></span>

<h3>Description</h3>

<p>Function to convert TestVision questions of type 'invul (numeriek)', 'een-uit-meer', 'meer-uit-meer', and 'open'
to R/exams exercises of type num, schoice, mchoice, and string, respectively.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>testvision2exams(x, markup = c("markdown", "latex"), rawHTML = FALSE, dir = ".",
  exshuffle = TRUE, name = NULL, shareStats = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="testvision2exams_+3A_x">x</code></td>
<td>
<p>character. Path to a TestVision XML file.</p>
</td></tr>
<tr><td><code id="testvision2exams_+3A_markup">markup</code></td>
<td>
<p>character. Markup language to convert to, i.e., <code>"markdown"</code> (default)
corresponds to Rmd exercises and <code>"latex"</code> to Rnw exercises.</p>
</td></tr>
<tr><td><code id="testvision2exams_+3A_rawhtml">rawHTML</code></td>
<td>
<p>logical. If <code>rawHTML = TRUE</code> (and <code>markup = "markdown"</code>), instead of 
conversion via pandoc, the function merely obtains the raw HTML inside the exercise.</p>
</td></tr>    
<tr><td><code id="testvision2exams_+3A_dir">dir</code></td>
<td>
<p>character. Directory where the converted exercises should be saved.
If set to <code>NULL</code> no files are saved.</p>
</td></tr>
<tr><td><code id="testvision2exams_+3A_exshuffle">exshuffle</code></td>
<td>
<p>logical or numeric. Meta-information tag used for single-choice and
multiple-choice items.</p>
</td></tr>
<tr><td><code id="testvision2exams_+3A_name">name</code></td>
<td>
<p>character. Optional file name (without suffix) that should be used for the
R/exams exercise file. The default is to use the name tag from the TestVision XML file
(with some fix-ups, avoiding certain special characters). Alternatively, a name can also
be supplied and will then be used for both the file name and the  <code>exname</code>
meta-information tag, thus overwriting other name specified in the TestVision XML file.</p>
</td></tr>
<tr><td><code id="testvision2exams_+3A_sharestats">shareStats</code></td>
<td>
<p>logical indicating whether the taxonomy of statistics exercises as specified
by the <code>shareStats</code> project is incorporated in the TestVision XML file. If <code>shareStats = TRUE</code>,
the function searches for a text string as specified under 'Leerstof' ('Study Reference' in the
English version) in TestVision and converts it into elements of metainformation, such as
<code>exsection</code> and <code>exextra[Level]</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function aims to facilitate converting an existing TestVision question to an R/exams exercise.
The resulting exercise file can subsequently be edited further, e.g., for making it dynamic.
</p>
<p>The function takes a TestVision XML question and converts it into an R/Markdown (Rmd) or
R/LaTeX (Rnw) R/exams exercise. If <code>markup = "latex"</code> the HTML answers and questions from the TestVision XML 
are converted using pandoc (via <code><a href="rmarkdown.html#topic+pandoc_convert">pandoc_convert</a></code>). Similarly, if <code>markup = "markdown"</code>
pandoc converts the content to markdown, but when <code>rawHTML = TRUE</code> the function simply copies the HTML 
content from the TestVision XML (equations are stored within <code>&lt;math&gt; tags</code>). In the latter case, if conversion 
aims at creating dynamic exercises and displaying equations, it is advised to select and adjust the content in the 
<code>&lt;annotation&gt;</code> tag which is a raw latex specification of the equation. It is recommended to check the outcome 
in case certain HTML markup, or mathematical equations, etc., cannot be converted fully automatically.
</p>
<p>Currently only the TestVision XML exercise types 'invul (numeriek)', 'een-uit-meer', 'meer-uit-meer', and 'open'
are properly supported. There is not yet support exercises of type cloze, in TestVision called 'invul
(meervoudig)'. Hence, in case of cloze questions the execution of the function is stopped and a 
warning is issued.
</p>
<p>The TestVision XML may contain links to media content such as data files and images. In the zip-file
that TestVision produces such files are typically stored in the directory 'mediafiles'; the function assumes
that the TestVision XML file and this directory (and its subdirectories with full content) are unzipped in 
the same directory. If media files cannot be found a warning is issued.
</p>
<p>Since TestVision uses a single XML file for each question, it may be cumbersome to run the function for each 
question separately, and it advised to use iteration to convert questions in batch.
</p>


<h3>Value</h3>

<p>A list of character vectors containing the R/exams exercise code.
If <code>dir</code> is specified (default), this character vector is saved in a file
(using <code><a href="base.html#topic+writeLines">writeLines</a></code>). In this case the list is returned invisibly. If <code>dir = NULL</code>
no files are saved and the list is returned visibly.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exams2testvision">exams2testvision</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>if(requireNamespace("xml2")) {
## path to a TestVision XML file (provided in the package)
testvision_xml &lt;- file.path(find.package("exams"), "xml", "testvision_question.xml")

## create a temporary directory for R/exams exercise files
dir.create(tdir &lt;- tempfile())

## convert all exercises from the TestVision XML to R/Markdown files
ex_converted &lt;- testvision2exams(testvision_xml, dir = tdir)
print(dir(tdir))

## additionally the source code of the Rmd file is also return invisible
## in 'ex_converted' and can be inspected manually, e.g., via writeLines()
names(ex_converted)
writeLines(ex_converted[[1]])

## clean up temporary directory
unlink(tdir)
}
</code></pre>

<hr>
<h2 id='tex2image'>Transforming LaTeX Code Using ImageMagick or pdf2svg</h2><span id='topic+tex2image'></span>

<h3>Description</h3>

<p>Transformation of LaTeX code into an image by compiling
to PDF and then transforming to PNG (by default) via
ImageMagick's <code>convert</code> command or to SVG via <code>pdf2svg</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tex2image(tex, format = "png", width = NULL, pt = 12, density = 350,
  dir = NULL, tdir = NULL, idir = NULL,
  width.border = 0L, col.border = "white", resize = 650,
  packages = c("amsmath", "amssymb", "amsfonts"),
  header, header2 = NULL, tikz = NULL, Sweave = TRUE, show = FALSE,
  name = "tex2image")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tex2image_+3A_tex">tex</code></td>
<td>
<p>character vector or list of character vectors. Each character
vector is either the name of a LaTeX file or a vector containing LaTeX
code directly.</p>
</td></tr>
<tr><td><code id="tex2image_+3A_format">format</code></td>
<td>
<p>character. Suffix for the type of graphic to convert to.</p>
</td></tr>
<tr><td><code id="tex2image_+3A_width">width</code></td>
<td>
<p>numeric. Width of the text in inch. If <code>NULL</code> (or <code>0</code>),
the width is chosen to fit the image in <code>tex</code>.</p>
</td></tr>
<tr><td><code id="tex2image_+3A_pt">pt</code></td>
<td>
<p>numeric. Pointsize of the text.</p>
</td></tr>
<tr><td><code id="tex2image_+3A_density">density</code></td>
<td>
<p>numeric. Resolution density of the image.</p>
</td></tr>
<tr><td><code id="tex2image_+3A_dir">dir</code></td>
<td>
<p>character specifying the output directory.</p>
</td></tr>
<tr><td><code id="tex2image_+3A_tdir">tdir</code></td>
<td>
<p>character specifying a temporary directory, by default
this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>.</p>
</td></tr>
<tr><td><code id="tex2image_+3A_idir">idir</code></td>
<td>
<p>character specifying the path additional LaTeX inputs
required.</p>
</td></tr>
<tr><td><code id="tex2image_+3A_width.border">width.border</code></td>
<td>
<p>numeric. Width of the framebox border.</p>
</td></tr>
<tr><td><code id="tex2image_+3A_col.border">col.border</code></td>
<td>
<p>character. Color of framebox border.</p>
</td></tr>
<tr><td><code id="tex2image_+3A_resize">resize</code></td>
<td>
<p>numeric. Number of pixels for resizing the image.</p>
</td></tr>
<tr><td><code id="tex2image_+3A_packages">packages</code></td>
<td>
<p>character. Names of LaTeX packages to be included.</p>
</td></tr>
<tr><td><code id="tex2image_+3A_header">header</code></td>
<td>
<p>character. LaTeX code to be included in the header of the
LaTeX file before the beginning of the document. By default the parindent
is set to 0 and sans serif fonts (phv) are used for both text and math.</p>
</td></tr>
<tr><td><code id="tex2image_+3A_header2">header2</code></td>
<td>
<p>character. LaTeX code to be included in the header of the
LaTeX file after the beginning of the document. </p>
</td></tr>
<tr><td><code id="tex2image_+3A_tikz">tikz</code></td>
<td>
<p>character. Options to be passed to <code>\usetikzlibrary{}</code>. If set, the tikz package
is loaded per default.</p>
</td></tr>
<tr><td><code id="tex2image_+3A_sweave">Sweave</code></td>
<td>
<p>logical. Should the LaTeX package Sweave.sty be included
in the header?</p>
</td></tr>
<tr><td><code id="tex2image_+3A_show">show</code></td>
<td>
<p>logical. Show the resulting image(s) using <code><a href="utils.html#topic+browseURL">browseURL</a></code>.</p>
</td></tr>
<tr><td><code id="tex2image_+3A_name">name</code></td>
<td>
<p>character. Base name of the image file.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>tex2image</code> converts LaTeX code to image files, e.g., for inclusion
in web pages. It proceeds in the following steps: (1) LaTeX code is
embedded into a suitable .tex file. (2) This is compiled to PDF using
<code><a href="tools.html#topic+texi2dvi">texi2dvi</a></code>. (3) The PDF is converted to an image
file. By default, conversion is to PNG using <span class="rlang"><b>R</b></span> package <span class="pkg">magick</span> functionalities
or alternatively to SVG via <code>pdfcrop</code> followed by <code>pdf2svg</code>.
</p>
<p>The LaTeX code is fit into the <code>standalone</code> document class using the
<code>tikzpicture</code> environment as a default.
</p>
<p>If <code>tex</code> is a list of LaTeX chunks, then these are compiled to
separate pages of a single PDF in a single LaTeX run. Each page is
subsequently converted to a separate image.
</p>
<p>In case of SVG output, the respective image manipulation tools, i.e., 
<code>pdfcrop</code>/<code>pdf2svg</code>, are assumed to be installed and available
in the search path.
</p>


<h3>Value</h3>

<p>Character vector with path(s) to image(s) generated from the LaTeX code.
</p>


<h3>See Also</h3>

<p><code><a href="tools.html#topic+texi2dvi">texi2dvi</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## some simple LaTeX
tex &lt;- c("This is \\textbf{bold} and this \\textit{italic}.",
  "Points on the unit circle: $x^2 + y^2 = 1$.")

## default settings: PNG with sans serif fonts
tex2image(tex, show = interactive())

## with fixed widths
tex2image(tex, width = 6, show = interactive())
tex2image(tex, width = 2, show = interactive())

## switch off header (-&gt; LaTeX uses its standard serif fonts)
tex2image(tex, header = NULL, show = interactive())

## SVG output (system requirements: pdfcrop &amp; pdf2svg)
tex2image(tex, format = "svg", show = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='xexams'>Extensible Generation of Exams</h2><span id='topic+xexams'></span><span id='topic+exams_metainfo'></span><span id='topic+print.exams_metainfo'></span>

<h3>Description</h3>

<p>Extensible automatic generation of exams including
multiple choice questions and arithmetic problems.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  xexams(file, n = 1L, nsamp = NULL,
    driver = list(sweave = NULL, read = NULL, transform = NULL, write = NULL),
    dir = ".", edir = NULL, tdir = NULL, sdir = NULL, verbose = FALSE,
    points = NULL, seed = NULL, rds = FALSE, ...)

  exams_metainfo(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="xexams_+3A_file">file</code></td>
<td>
<p>character. A specification of a (list of) exercise files,
for details see below.</p>
</td></tr>
<tr><td><code id="xexams_+3A_n">n</code></td>
<td>
<p>integer. The number of copies to be taken from <code>file</code>.</p>
</td></tr>
<tr><td><code id="xexams_+3A_nsamp">nsamp</code></td>
<td>
<p>integer. The number(s) of exercise files sampled from each
list element of <code>file</code>. Sampling without replacement is used
if possible. (Only if some element of <code>nsamp</code> is larger than
the length of the corresponding element in <code>file</code>, sampling
with replacement is used.)</p>
</td></tr>
<tr><td><code id="xexams_+3A_driver">driver</code></td>
<td>
<p>list with elements <code>sweave</code> (weaver function or list of arguments
for the default <code><a href="#topic+xweave">xweave</a></code>), <code>read</code> (function
for reading exercise files, defaulting to <code><a href="#topic+read_exercise">read_exercise</a></code>),
<code>transform</code> (function to transform each exercise, by default
no transformations are done), <code>write</code> (function to write exams
to output files, by default nothing is written). For more details,
see below.</p>
</td></tr>
<tr><td><code id="xexams_+3A_dir">dir</code></td>
<td>
<p>character. The output directory passed on to <code>driver$write</code>.</p>
</td></tr>
<tr><td><code id="xexams_+3A_edir">edir</code></td>
<td>
<p>character specifying the path of the directory (along with its
sub-directories) in which the files in <code>file</code> are stored (see also below).</p>
</td></tr>
<tr><td><code id="xexams_+3A_tdir">tdir</code></td>
<td>
<p>character specifying a temporary directory, by default
this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>. Note that this
is cleaned up (i.e., existing files are deleted) and only certain
temporary files are preserved.</p>
</td></tr>
<tr><td><code id="xexams_+3A_sdir">sdir</code></td>
<td>
<p>character specifying a directory for storing supplements, by
default this is chosen via <code><a href="base.html#topic+tempfile">tempfile</a></code>.</p>
</td></tr>
<tr><td><code id="xexams_+3A_verbose">verbose</code></td>
<td>
<p>logical. Should information on progress of exam generation
be reported?</p>
</td></tr>
<tr><td><code id="xexams_+3A_points">points</code></td>
<td>
<p>integer. How many points should be assigned to each exercise? Note that this
argument overules any exercise points that are provided within the <code>expoints</code> tags
of the exercise files (if any). The vector of points supplied should either have
length 1 or the number of exercises in the exam.</p>
</td></tr>
<tr><td><code id="xexams_+3A_seed">seed</code></td>
<td>
<p>integer matrix or logical. Either <code>NULL</code> (default), logical, or a
matrix of random seeds for each possible exercise to be set prior to calling
<code>driver@sweave</code>. If <code>NULL</code> no random seeds are set. If a matrix,
the number of rows must be <code>n</code> and the number of columns must
correspond to <code>unlist(file)</code>. If <code>TRUE</code> a suitable matrix of seeds
is sampled.</p>
</td></tr>
<tr><td><code id="xexams_+3A_rds">rds</code></td>
<td>
<p>logical or character indicating whether the list returned by
<code>xexams</code> should also be saved as an RDS data file. If <code>rds = TRUE</code>
the file name <code>"metainfo.rds"</code> is used. Alternatively, <code>rds</code> can
also be a character file name to be used.</p>
</td></tr>
<tr><td><code id="xexams_+3A_x">x</code></td>
<td>
<p>a list as returned by <code>xexams</code>.</p>
</td></tr>
<tr><td><code id="xexams_+3A_...">...</code></td>
<td>
<p>currently not used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>xexams</code> is meant to provide an extensible framework for generating exams
based on exercises in R/LaTeX format (via <code><a href="utils.html#topic+Sweave">Sweave</a></code>) or
R/Markdown format (via <code><a href="knitr.html#topic+knit">knit</a></code>) and rendering them
into various output formats such as PDF, HTML, or XML (e.g., for Moodle or IMS QTI).
<code>xexams</code> is typically not called by the user directly but is used as a common
infrastructure for functions such as <code><a href="#topic+exams2pdf">exams2pdf</a></code>, <code><a href="#topic+exams2html">exams2html</a></code>,
<code><a href="#topic+exams2moodle">exams2moodle</a></code>, <code><a href="#topic+exams2qti12">exams2qti12</a></code>, or
<code><a href="#topic+exams2lops">exams2lops</a></code>.
</p>
<p><code>xexams</code> generates exams from lists (or vectors) of Rnw/Rmd source files by:
(1) running <code>driver$sweave</code> on each exercise (by default <code><a href="#topic+xweave">xweave</a></code> is
used, calling <code><a href="utils.html#topic+Sweave">Sweave</a></code> or <code><a href="knitr.html#topic+knit">knit</a></code>),
(2) running <code>driver$read</code> on the resulting LaTeX/Markdown file which by default
uses <code><a href="#topic+read_exercise">read_exercise</a></code> to read question/solution texts plus
metainformation and stores the result in a list,
(3) running <code>driver$transform</code> on this list for possible transformations
(e.g., from LaTeX to HTML),
(4) running <code>driver$write</code> on the list of exercises within each exam.
</p>
<p>Each exercise in an exam is essentially a standalone source file
that <code>xexams</code> knows (almost) nothing about, it just calls <code>driver$sweave</code>
in each iteration and assumes that <code>driver$read</code> can read the resulting
LaTeX or Markdown file into a list.
</p>
<p>The specification in <code>file</code> should be either of form <code>"foo.Rnw"</code>
(or equivalently just <code>"foo"</code>) or <code>"foo.Rmd"</code>, where the file should
either be in the local directory, the <code>edir</code> directory or in
the <code>exercises</code> directory of the package. If <code>edir</code> is specified,
the directory along with all its sub-directories is searched for the exercises
in <code>file</code>. Also, <code>file</code> can either be a simple vector or a list of vectors.
In the latter case, exercises are chosen randomly within each list element. For example,
the specification <code>file = list(c("a", "b"), "xyz")</code> will result in an exam with two
exercises: the first exercise is chosen randomly between <code>"a"</code> and
<code>"b"</code> while <code>"xyz"</code> is always included as the second exercise.
</p>


<h3>Value</h3>

<p>A list of exams (of length <code>n</code>),
each of which is a list of exercises (whose length depends on the length of <code>file</code> and <code>nsamp</code>),
each of which is a list (whose length/contents depends on <code>driver$read</code>).
</p>
<p>When using the default reader, the resulting list can be simplified
using <code>exams_metainfo</code>, returning the same (classed) structure
as the older <code><a href="#topic+exams">exams</a></code> interface. It is recommended
to use this to inspect whether the &lsquo;extype&rsquo; and &lsquo;exsolution&rsquo;
(and corresponding tolerance, if any) are correctly specified.
</p>


<h3>References</h3>

<p>Zeileis A, Umlauf N, Leisch F (2014).
Flexible Generation of E-Learning Exams in R: Moodle Quizzes, OLAT Assessments, and Beyond.
<em>Journal of Statistical Software</em>, <b>58</b>(1), 1&ndash;36.
<a href="https://doi.org/10.18637/jss.v058.i01">doi:10.18637/jss.v058.i01</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+xweave">xweave</a></code>,
<code><a href="#topic+exams">exams</a></code>,
<code><a href="#topic+exams2pdf">exams2pdf</a></code>,
<code><a href="#topic+exams2html">exams2html</a></code>,
<code><a href="#topic+exams2moodle">exams2moodle</a></code>,
<code><a href="#topic+exams2qti12">exams2qti12</a></code>,
<code><a href="#topic+exams2lops">exams2lops</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## define an exam with five exercises
myexam &lt;- list(
  "boxplots.Rmd",
  c("tstat.Rmd", "ttest.Rmd", "confint.Rmd"),
  c("regression.Rmd", "anova.Rmd"),
  "scatterplot.Rmd",
  "relfreq.Rmd"
)

## run exams with default drivers (i.e., no transformations or writer)
x &lt;- xexams(myexam, n = 2)
## x is a list of 2 exams,
## each of which contains 5 exercises,
## each of which contains LaTeX code for question(list) and solution(list),
## plus metainformation and potential supplements

## The first exercise in each exam is "boxplots.Rmd", a multiple choice question.
## Its general question text is
x[[1]][[1]]$question
## with a list of multiple choice questions given as
x[[1]][[1]]$questionlist
## the corresponding graphic is in supplementary file
x[[1]][[1]]$supplements

## The metainformation is a list read for the \ex*{} items
x[[1]][[1]]$metainfo

## The metainformation can also be extracted/printed
exams_metainfo(x)
## customize printing: only exam 1 in blocks of up to 3 exercises
print(exams_metainfo(x), which = 1, block = 3)
</code></pre>

<hr>
<h2 id='xweave'>Wrapper Function for Weaving Either Rnw or Rmd Exercises</h2><span id='topic+xweave'></span>

<h3>Description</h3>

<p>Simple wrapper function that either calls <code><a href="utils.html#topic+Sweave">Sweave</a></code>
for Rnw exercises or <code><a href="knitr.html#topic+knit">knit</a></code> for Rmd exercises.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  xweave(file, quiet = TRUE, encoding = "UTF-8", engine = NULL, envir = new.env(),
    pdf = TRUE, png = FALSE, svg = FALSE, height = 6, width = 6, resolution = 100,
    highlight = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="xweave_+3A_file">file</code>, <code id="xweave_+3A_quiet">quiet</code></td>
<td>
<p>arguments passed to <code><a href="utils.html#topic+Sweave">Sweave</a></code>
or <code><a href="knitr.html#topic+knit">knit</a></code>, respectively.</p>
</td></tr>
<tr><td><code id="xweave_+3A_encoding">encoding</code></td>
<td>
<p>character, ignored. The encoding is always assumed to be UTF-8.</p>
</td></tr>
<tr><td><code id="xweave_+3A_engine">engine</code></td>
<td>
<p>character indicating whether <code>"Sweave"</code> (default) or
<code>"knitr"</code> should be used for rendering Rnw exercises.</p>
</td></tr>
<tr><td><code id="xweave_+3A_envir">envir</code></td>
<td>
<p>argument passed to <code><a href="knitr.html#topic+knit">knit</a></code>. By default,
or if <code>envir = NULL</code> a <code>new.env()</code> is created for each
<code>xweave()</code> call.</p>
</td></tr>
<tr><td><code id="xweave_+3A_pdf">pdf</code>, <code id="xweave_+3A_png">png</code>, <code id="xweave_+3A_svg">svg</code>, <code id="xweave_+3A_height">height</code>, <code id="xweave_+3A_width">width</code>, <code id="xweave_+3A_resolution">resolution</code>, <code id="xweave_+3A_highlight">highlight</code>, <code id="xweave_+3A_...">...</code></td>
<td>
<p>arguments passed to
<code><a href="utils.html#topic+Sweave">Sweave</a></code> or <code><a href="knitr.html#topic+opts_chunk">opts_chunk</a></code>, respectively.
In the latter case: <code>pdf</code>/<code>png</code>/<code>svg</code> are mapped to <code>dev</code>;
<code>height</code>/<code>width</code> are mapped to <code>fig.height</code>/<code>fig.width</code>;
and <code>resolution</code> is mapped to <code>dpi</code>. <code>highlight</code> is ignored for
<code><a href="utils.html#topic+Sweave">Sweave</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Depending on whether <code>file</code> has an <code>.Rnw</code> or <code>.Rmd</code> suffix,
either <code><a href="utils.html#topic+Sweave">Sweave</a></code> or <code><a href="knitr.html#topic+knit">knit</a></code> is called for
weaving the file by default. Rnw exercises can optionally also be weaved by
<code><a href="knitr.html#topic+knit">knit</a></code> by setting <code>engine = "knitr"</code>.
</p>
<p>If <code>png = TRUE</code> or <code>svg = TRUE</code> when calling <code>Sweave</code>, then
the resulting includegraphics statements are supplemented with the <code>.png</code>
or <code>.svg</code> suffix of the corresponding graphics. For <code>svg</code> a simple
graphics device hook <code>.xweave_svg_grdevice</code> is provided on-the-fly
for plug-in into <code>Sweave</code>.
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+Sweave">Sweave</a></code>,
<code><a href="knitr.html#topic+knit">knit</a></code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
