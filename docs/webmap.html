<!DOCTYPE html><html><head><title>Help for package webmap</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {webmap}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_cluster_button'><p>Add cluster control button to a web map</p></a></li>
<li><a href='#add_fullscreen_button'><p>Add full-screen button to a web map</p></a></li>
<li><a href='#add_home_button'><p>Add home button to a web map</p></a></li>
<li><a href='#add_legend'><p>Add legend to a web map</p></a></li>
<li><a href='#add_search_button'><p>Add search button to a web map</p></a></li>
<li><a href='#make_map'><p>Create a web map using TNM services</p></a></li>
<li><a href='#us_cities'><p>US Major Cities</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Create Interactive Web Maps Using 'The National Map' Services</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Creates interactive web maps using the 'JavaScript' 'Leaflet'
    library with base layers of 'The National Map' ('TNM'). 'TNM' services
    provide access to base geospatial information that describes the landscape
    of the United States and its territories. This package is dependent on, and
    intended to be used with, the 'leaflet' package.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1)</td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate, htmltools, htmlwidgets, leaflet</td>
</tr>
<tr>
<td>Suggests:</td>
<td>connectapi, covr, knitr, pkgbuild, pkgdown, pkgload,
rcmdcheck, remotes, renv, roxygen2, tinytest</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://rconnect.usgs.gov/INLPO/webmap-main/">https://rconnect.usgs.gov/INLPO/webmap-main/</a>,
<a href="https://code.usgs.gov/inl/webmap">https://code.usgs.gov/inl/webmap</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://code.usgs.gov/inl/webmap/-/issues">https://code.usgs.gov/inl/webmap/-/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>LazyDataCompression:</td>
<td>xz</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-25 17:17:18 UTC; jfisher</td>
</tr>
<tr>
<td>Author:</td>
<td>Jason C. Fisher <a href="https://orcid.org/0000-0001-9032-8912"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Stefano Cudini [ctb, cph] (leaflet-search library),
  John Firebaugh [ctb, cph] (Leaflet.fullscreen library)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jason C. Fisher &lt;jfisher@usgs.gov&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-25 20:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_cluster_button'>Add cluster control button to a web map</h2><span id='topic+add_cluster_button'></span>

<h3>Description</h3>

<p>Add a button to a <a href="https://leafletjs.com/">Leaflet</a> map to toggle marker clusters on and off.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_cluster_button(map, cluster_id, position = "topleft")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_cluster_button_+3A_map">map</code></td>
<td>
<p>'leaflet'.
Map widget object</p>
</td></tr>
<tr><td><code id="add_cluster_button_+3A_cluster_id">cluster_id</code></td>
<td>
<p>'character' string.
Identification for the marker cluster layer.</p>
</td></tr>
<tr><td><code id="add_cluster_button_+3A_position">position</code></td>
<td>
<p>'character' string.
Position of the button on the web map.
Possible values are &quot;topleft&quot;, &quot;topright&quot;, &quot;bottomleft&quot;, and &quot;bottomright&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A new HTML web <code>map</code> with added element, an object of class 'leaflet'.
</p>


<h3>Author(s)</h3>

<p>J.C. Fisher, U.S. Geological Survey, Idaho Water Science Center
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make_map">make_map</a></code> function for creating a map widget.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>make_map(maps = "Topo") |&gt;
  leaflet::addMarkers(
    lng = ~lng,
    lat = ~lat,
    label = ~name,
    popup = ~name,
    clusterOptions = leaflet::markerClusterOptions(
      showCoverageOnHover = FALSE
    ),
    clusterId = "cluster",
    group = "marker",
    data = us_cities
  ) |&gt;
  add_cluster_button(cluster_id = "cluster")
</code></pre>

<hr>
<h2 id='add_fullscreen_button'>Add full-screen button to a web map</h2><span id='topic+add_fullscreen_button'></span>

<h3>Description</h3>

<p>Add a button to a <a href="https://leafletjs.com/">Leaflet</a> map that toggles full screen on and off.
Functionality provided by the <a href="https://github.com/Leaflet/Leaflet.fullscreen">leaflet-fullscreen</a>
plugin for Leaflet.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_fullscreen_button(map, pseudo_fullscreen = FALSE, position = "topleft")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_fullscreen_button_+3A_map">map</code></td>
<td>
<p>'leaflet'.
Map widget object</p>
</td></tr>
<tr><td><code id="add_fullscreen_button_+3A_pseudo_fullscreen">pseudo_fullscreen</code></td>
<td>
<p>'logical' flag.
Whether to fullscreen to page width and height.</p>
</td></tr>
<tr><td><code id="add_fullscreen_button_+3A_position">position</code></td>
<td>
<p>'character' string.
Position of the button on the web map.
Possible values are &quot;topleft&quot;, &quot;topright&quot;, &quot;bottomleft&quot;, and &quot;bottomright&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A new HTML web <code>map</code> with added element, an object of class 'leaflet'.
</p>


<h3>Author(s)</h3>

<p>J.C. Fisher, U.S. Geological Survey, Idaho Water Science Center
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make_map">make_map</a></code> function for creating a map widget.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>make_map(maps = "Topo") |&gt;
  add_fullscreen_button()
</code></pre>

<hr>
<h2 id='add_home_button'>Add home button to a web map</h2><span id='topic+add_home_button'></span>

<h3>Description</h3>

<p>Add a button to a <a href="https://leafletjs.com/">Leaflet</a> map that zooms to the provided map extent.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_home_button(map, extent = NULL, position = "topleft")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_home_button_+3A_map">map</code></td>
<td>
<p>'leaflet'.
Map widget object</p>
</td></tr>
<tr><td><code id="add_home_button_+3A_extent">extent</code></td>
<td>
<p>'bbox', or 'numeric' vector of length four, with <code>xmin</code>, <code>xmax</code>, <code>ymin</code> and <code>ymax</code> values.
Extent object representing a rectangular geographical area on the map.
The extent must be specified in the coordinate reference system (CRS) of the web map,
usually in latitude and longitude using WGS 84 (also known as <a href="https://epsg.io/4326">EPSG:4326</a>).
By default, the extent will be automatically determined from
latitudes and longitudes of the map elements.</p>
</td></tr>
<tr><td><code id="add_home_button_+3A_position">position</code></td>
<td>
<p>'character' string.
Position of the button on the web map.
Possible values are &quot;topleft&quot;, &quot;topright&quot;, &quot;bottomleft&quot;, and &quot;bottomright&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A new HTML web <code>map</code> with added element, an object of class 'leaflet'.
</p>


<h3>Author(s)</h3>

<p>J.C. Fisher, U.S. Geological Survey, Idaho Water Science Center
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make_map">make_map</a></code> function for creating a map widget.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>make_map(maps = "Topo") |&gt;
  add_home_button(
    extent = c(-124.409, -114.131, 32.534, 42.009) # California
  )
</code></pre>

<hr>
<h2 id='add_legend'>Add legend to a web map</h2><span id='topic+add_legend'></span>

<h3>Description</h3>

<p>Add a legend to a <a href="https://leafletjs.com/">Leaflet</a> map.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_legend(
  map,
  labels,
  colors,
  radius,
  opacity = 0.5,
  symbol = c("square", "circle"),
  title = "EXPLANATION",
  position = "topright"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_legend_+3A_map">map</code></td>
<td>
<p>'leaflet'.
Map widget object</p>
</td></tr>
<tr><td><code id="add_legend_+3A_labels">labels</code></td>
<td>
<p>'character' vector.
Labels in the legend.</p>
</td></tr>
<tr><td><code id="add_legend_+3A_colors">colors</code></td>
<td>
<p>'character' vector.
HTML colors corresponding to <code>labels</code>.</p>
</td></tr>
<tr><td><code id="add_legend_+3A_radius">radius</code></td>
<td>
<p>'numeric' number.
Border radius of symbols in the legend, in pixels.</p>
</td></tr>
<tr><td><code id="add_legend_+3A_opacity">opacity</code></td>
<td>
<p>'numeric' number.
Opacity of symbols in the legend, from 0 to 1.</p>
</td></tr>
<tr><td><code id="add_legend_+3A_symbol">symbol</code></td>
<td>
<p>'character' string.
Symbol type in the legend, either &quot;square&quot; or &quot;circle&quot;.</p>
</td></tr>
<tr><td><code id="add_legend_+3A_title">title</code></td>
<td>
<p>'character' string.
Legend title</p>
</td></tr>
<tr><td><code id="add_legend_+3A_position">position</code></td>
<td>
<p>'character' string.
Position of the button on the web map.
Possible values are &quot;topleft&quot;, &quot;topright&quot;, &quot;bottomleft&quot;, and &quot;bottomright&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A new HTML web <code>map</code> with added element, an object of class 'leaflet'.
</p>


<h3>Author(s)</h3>

<p>J.C. Fisher, U.S. Geological Survey, Idaho Water Science Center
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make_map">make_map</a></code> function for creating a map widget.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># define marker colors based on whether a city serves as a capital
colors &lt;- c(
  "Non-capital" = "green",
  "Capital" = "red"
)
fill_colors &lt;- colors[(us_cities$capital &gt; 0) + 1L] |&gt;
  as.character()

# print map with city circle markers and a map legend
make_map(maps = "Topo") |&gt;
  leaflet::addCircleMarkers(
    lng = ~lng,
    lat = ~lat,
    radius = 6,
    color = "white",
    weight = 1,
    opacity = 1,
    fillColor = fill_colors,
    fillOpacity = 1,
    fill = TRUE,
    data = us_cities
  ) |&gt;
  add_legend(
    labels = names(colors),
    colors = colors,
    radius = 5,
    opacity = 1,
    symbol = "circle"
  )
</code></pre>

<hr>
<h2 id='add_search_button'>Add search button to a web map</h2><span id='topic+add_search_button'></span>

<h3>Description</h3>

<p>Add a button to a <a href="https://leafletjs.com/">Leaflet</a> map to search markers/features location by property.
Functionality provided by the <a href="https://github.com/stefanocudini/leaflet-search">leaflet-search</a>
plugin for Leaflet.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_search_button(
  map,
  group,
  property_name = "label",
  zoom = NULL,
  text_placeholder = "Search...",
  open_popup = FALSE,
  position = "topleft"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_search_button_+3A_map">map</code></td>
<td>
<p>'leaflet'.
Map widget object</p>
</td></tr>
<tr><td><code id="add_search_button_+3A_group">group</code></td>
<td>
<p>'character' string.
Name of the group whose features will be searched.</p>
</td></tr>
<tr><td><code id="add_search_button_+3A_property_name">property_name</code></td>
<td>
<p>'character' string.
Property name used to describe markers, such as, &quot;label&quot; and &quot;popup&quot;.</p>
</td></tr>
<tr><td><code id="add_search_button_+3A_zoom">zoom</code></td>
<td>
<p>'integer' count.
Zoom level for move to location after marker found in search.</p>
</td></tr>
<tr><td><code id="add_search_button_+3A_text_placeholder">text_placeholder</code></td>
<td>
<p>'character' string.
Message to show in search element.</p>
</td></tr>
<tr><td><code id="add_search_button_+3A_open_popup">open_popup</code></td>
<td>
<p>'logical' flag.
Whether to open the marker popup associated with the searched for marker.</p>
</td></tr>
<tr><td><code id="add_search_button_+3A_position">position</code></td>
<td>
<p>'character' string.
Position of the button on the web map.
Possible values are &quot;topleft&quot;, &quot;topright&quot;, &quot;bottomleft&quot;, and &quot;bottomright&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A new HTML web <code>map</code> with added element, an object of class 'leaflet'.
</p>


<h3>Author(s)</h3>

<p>J.C. Fisher, U.S. Geological Survey, Idaho Water Science Center
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make_map">make_map</a></code> function for creating a map widget.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>make_map(maps = "Topo") |&gt;
  leaflet::addMarkers(
    lng = ~lng,
    lat = ~lat,
    label = ~name,
    popup = ~name,
    group = "marker",
    data = us_cities
  ) |&gt;
  add_search_button(
    group = "marker",
    zoom = 15,
    text_placeholder = "Search city names..."
  )
</code></pre>

<hr>
<h2 id='make_map'>Create a web map using TNM services</h2><span id='topic+make_map'></span>

<h3>Description</h3>

<p>Create a <a href="https://leafletjs.com/">Leaflet</a> map widget that includes base maps offered through
<a href="https://www.usgs.gov/programs/national-geospatial-program/national-map">The National Map</a> (TNM)
cached <a href="https://apps.nationalmap.gov/services">service endpoints</a>.
Information about the content of these base maps can be found within the
<a href="https://apps.nationalmap.gov/help/3.0%20TNM%20Base%20Maps.htm">TNM Base Maps</a> document.
TNM content is limited to the United States and territories.
The map widget can be rendered on HTML pages generated from R Markdown, Shiny, or other applications.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_map(
  maps,
  ...,
  protocol = c("WMTS", "WMS"),
  hydro = FALSE,
  collapse = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_map_+3A_maps">maps</code></td>
<td>
<p>'character' vector.
TNM base maps to include in the web map. Choices include
&quot;Topo&quot;, &quot;Imagery&quot;, &quot;Imagery Topo&quot;, &quot;Hydrography&quot;, &quot;Shaded Relief&quot;, and &quot;Blank&quot;.
See 'Details' section for a description of each base map.
By default, all base maps are included.
The one exception is the &quot;Blank&quot; map,
which is only accessible using a Web Map Service (WMS),
see <code>protocol</code> argument.</p>
</td></tr>
<tr><td><code id="make_map_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to the <code><a href="leaflet.html#topic+leaflet">leaflet</a></code> function.</p>
</td></tr>
<tr><td><code id="make_map_+3A_protocol">protocol</code></td>
<td>
<p>'character' string.
Standard protocol for serving pre-rendered georeferenced TNM map tiles.
Select &quot;WMTS&quot; for the Web Map Tile Service (the default) and &quot;WMS&quot; for the Web Map Service.</p>
</td></tr>
<tr><td><code id="make_map_+3A_hydro">hydro</code></td>
<td>
<p>'logical' flag.
Whether to show or hide (the default) the &quot;Hydrography&quot; overlay base map.</p>
</td></tr>
<tr><td><code id="make_map_+3A_collapse">collapse</code></td>
<td>
<p>'logical' flag.
Whether the layers control should be rendered as an icon that expands when hovered over.
Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Composite base maps include:
</p>

<ul>
<li><p> &quot;Topo&quot; a tile base map that combines the most current TNM data,
and other public-domain data, into a multi-scale topographic reference map.
Data includes boundaries, geographic names, transportation,
contours, hydrography, land cover, shaded relief, and bathymetry.<br/>
 <img src="../help/figures/basemap-topo.png" alt="basemap-topo.png" />
</p>
</li>
<li><p> &quot;Imagery&quot; is a tile base map of orthoimagery in TNM.
Orthoimagery data typically are high resolution aerial images that combine the
visual attributes of an aerial photograph with the spatial accuracy and reliability of a planimetric map.
USGS digital orthoimage resolution may vary from 6 inches to 1 meter.<br/>
 <img src="../help/figures/basemap-imagery.png" alt="basemap-imagery.png" />
</p>
</li>
<li><p> &quot;Imagery Topo&quot; is a tile base map of orthoimagery in TNM as a backdrop,
and a limited selection of topographic data
(boundaries, names, transportation, contours, and hydrography).<br/>
 <img src="../help/figures/basemap-imagery-topo.png" alt="basemap-imagery-topo.png" />
</p>
</li>
<li><p> &quot;Hydrography&quot; is a overlay of cartographic representation of the
<a href="https://www.usgs.gov/national-hydrography/national-hydrography-dataset">National Hydrography Dataset</a> (NHD).
The NHD is a comprehensive set of digital geospatial data that encodes information about naturally occurring
and constructed bodies of surface water, paths through which water flows, related features such as
stream gages and dams, and additional hydrologic information.<br/>
 <img src="../help/figures/basemap-hydrography.png" alt="basemap-hydrography.png" />
</p>
</li>
<li><p> &quot;Shaded Relief&quot; is a tile base map of terrain representation in the form of hillshades created from the
<a href="https://www.usgs.gov/3d-elevation-program">3D Elevation Program</a> (3DEP). 3DEP maintains a seamless dataset
of best available raster elevation data, in the form of digital elevation models (DEMs) for the conterminous
United States, Alaska, Hawaii, and Territorial Islands of the United States.<br/>
 <img src="../help/figures/basemap-shaded-relief.png" alt="basemap-shaded-relief.png" />
</p>
</li>
<li><p> &quot;OSM&quot; is the <a href="https://www.openstreetmap.org/about">OpenStreetMap</a> tile base map.<br/>
 <img src="../help/figures/basemap-osm.png" alt="basemap-osm.png" />
</p>
</li>
<li><p> &quot;Blank&quot; consists of ocean tints to give the outline of land cover as an empty base map.<br/>
 <img src="../help/figures/basemap-blank.png" alt="basemap-blank.png" />
</p>
</li></ul>



<h3>Value</h3>

<p>An object of class 'leaflet', a hypertext markup language (HTML) map widget.
See example for instructions on how to add additional graphic layers
(such as points, lines, and polygons) to the map widget.
Graphic layers added to the web map must be in latitude and longitude using WGS 84
(also known as <a href="https://epsg.io/4326">EPSG:4326</a>).
</p>


<h3>Author(s)</h3>

<p>J.C. Fisher, U.S. Geological Survey, Idaho Water Science Center
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create map widget
map &lt;- make_map()

# Print map widget
map

# Print map with markers
pts &lt;- rbind(
  c(-112.049, 43.517),
  c(-122.171, 37.456),
  c( -77.367, 38.947),
  c(-149.803, 61.187),
  c( -80.248, 26.080)
)
leaflet::addMarkers(map,
  lng = pts[, 1],
  lat = pts[, 2]
)

# Print map of satellite imagery with a rectangle in the vicinity of UCLA
make_map(
  maps = "Imagery",
  collapse = TRUE
) |&gt;
  leaflet::addRectangles(
    lng1 = -118.456,
    lat1 =   34.078,
    lng2 = -118.436,
    lat2 =   34.062,
    fillColor = "transparent"
  )
</code></pre>

<hr>
<h2 id='us_cities'>US Major Cities</h2><span id='topic+us_cities'></span>

<h3>Description</h3>

<p>This dataset contains the locations of cities within the United States
with populations of about 40,000 or greater, all state capitals, and the national capital.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>us_cities
</code></pre>


<h3>Format</h3>

<p>A data frame with columns:
</p>

<dl>
<dt><code>name</code></dt><dd><p>City name</p>
</dd>
<dt><code>capital</code></dt><dd><p>Capital status code indicates whether a city is a capital or not.
A value of 0 indicates that the city is not a capital,
while a value of 1 indicates that the city is a capital.
If the city is a state capital, the value is 2.</p>
</dd>
<dt><code>lng</code></dt><dd><p>Longitude in decimal degrees.</p>
</dd>
<dt><code>lat</code></dt><dd><p>Latitude in decimal degrees.</p>
</dd>
</dl>



<h3>Source</h3>

<p>The census-designated place population as of January 30, 2024,
as enumerated by the 2020 United States census.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>str(us_cities)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
