<!DOCTYPE html><html lang="en"><head><title>Help for package flowmapblue</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {flowmapblue}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ch_flows'><p>Swiss Flows Dataset</p></a></li>
<li><a href='#ch_locations'><p>Swiss Locations Dataset</p></a></li>
<li><a href='#flowmapblue'><p>Create an interactive flow map</p></a></li>
<li><a href='#flowmapblue-shiny'><p>Shiny bindings for flowmapblue</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Flow Map Rendering</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Create interactive flow maps using 'FlowmapBlue' 'TypeScript'
    library <a href="https://github.com/FlowmapBlue/FlowmapBlue">https://github.com/FlowmapBlue/FlowmapBlue</a>, which is a free
    tool for representing aggregated numbers of movements between
    geographic locations as flow maps. It is used to visualize urban
    mobility, commuting behavior, bus, subway and air travels, bicycle
    sharing, human and bird migration, refugee flows, freight
    transportation, trade, supply chains, scientific collaboration,
    epidemiological and historical data and many other topics. The package
    allows to either create standalone flow maps in form of 'htmlwidgets'
    and save them in 'HTML' files, or integrate flow maps into 'Shiny'
    applications.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/FlowmapBlue/flowmapblue.R">https://github.com/FlowmapBlue/flowmapblue.R</a>,
<a href="https://flowmapblue.github.io/flowmapblue.R/">https://flowmapblue.github.io/flowmapblue.R/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/FlowmapBlue/flowmapblue.R/issues">https://github.com/FlowmapBlue/flowmapblue.R/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>htmlwidgets</td>
</tr>
<tr>
<td>Suggests:</td>
<td>quarto</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>quarto</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-09-03 17:01:04 UTC; ek</td>
</tr>
<tr>
<td>Author:</td>
<td>Ilya Boyandin <a href="https://orcid.org/0000-0001-5585-7587"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cph],
  Egor Kotov <a href="https://orcid.org/0000-0001-6690-5345"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Egor Kotov &lt;kotov.egor@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-09-05 17:20:08 UTC</td>
</tr>
</table>
<hr>
<h2 id='ch_flows'>Swiss Flows Dataset</h2><span id='topic+ch_flows'></span>

<h3>Description</h3>

<p>A dataset containing flow data between various locations in Switzerland. This data represents the flow counts between origin and destination locations, identified by their unique codes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ch_flows
</code></pre>


<h3>Format</h3>



<h4><code>ch_flows</code></h4>

<p>A data frame with 676 rows and 3 columns:
</p>

<dl>
<dt>origin</dt><dd><p>A <code>character</code> vector representing the origin location identifier (must match the <code>id</code> in the <code>ch_locations</code> dataset).</p>
</dd>
<dt>dest</dt><dd><p>A <code>character</code> vector representing the destination location identifier (must match the <code>id</code> in the <code>ch_locations</code> dataset).</p>
</dd>
<dt>count</dt><dd><p>An <code>integer</code> vector representing the flow count between the origin and destination locations.</p>
</dd>
</dl>



<hr>
<h2 id='ch_locations'>Swiss Locations Dataset</h2><span id='topic+ch_locations'></span>

<h3>Description</h3>

<p>A dataset containing geographic information about 26 locations in Switzerland. This data includes unique identifiers, names, and geographic coordinates (latitude and longitude) for each location.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ch_locations
</code></pre>


<h3>Format</h3>



<h4><code>ch_locations</code></h4>

<p>A data frame with 26 rows and 4 columns:
</p>

<dl>
<dt>id</dt><dd><p>A <code>character</code> vector representing the unique identifier for each Swiss location (e.g., &quot;JU&quot;, &quot;LU&quot;).</p>
</dd>
<dt>name</dt><dd><p>A <code>character</code> vector representing the name of each location (e.g., &quot;Jura&quot;, &quot;Luzern&quot;).</p>
</dd>
<dt>lat</dt><dd><p>A <code>numeric</code> vector representing the latitude of each location in WGS84 (EPSG: 4326) coordinate reference system.</p>
</dd>
<dt>lon</dt><dd><p>A <code>numeric</code> vector representing the longitude of each location in WGS84 (EPSG: 4326) coordinate reference system.</p>
</dd>
</dl>



<hr>
<h2 id='flowmapblue'>Create an interactive flow map</h2><span id='topic+flowmapblue'></span>

<h3>Description</h3>

<p>Creates an interactive flow map visualizing flows between various locations and outputs it as an HTML widget. This function utilizes the <a href="https://www.flowmap.blue/"><code>FlowmapBlue</code></a> library to create maps with customizable options such as clustering, animation, and dark mode. The widget can be rendered in R Markdown, Shiny, or viewed in a browser. It can also be saved to <code>html</code> file with <code><a href="htmlwidgets.html#topic+saveWidget">htmlwidgets:saveWidget()</a></code>. See examples for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flowmapblue(
  locations,
  flows,
  mapboxAccessToken = NULL,
  clustering = TRUE,
  animation = FALSE,
  darkMode = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="flowmapblue_+3A_locations">locations</code></td>
<td>
<p>A <code>data.frame</code> containing the location data. The <code>data.frame</code> should have the following columns:
</p>

<dl>
<dt>id</dt><dd><p>A character vector representing the unique identifier for each location (e.g., &quot;JU&quot;, &quot;LU&quot;).</p>
</dd>
<dt>name</dt><dd><p>(Optional) A character vector representing the name of each location (e.g., &quot;Jura&quot;, &quot;Luzern&quot;).</p>
</dd>
<dt>lat</dt><dd><p>A numeric vector representing the latitude of each location in WGS84 (EPSG: 4326) coordinate reference system.</p>
</dd>
<dt>lon</dt><dd><p>A numeric vector representing the longitude of each location in WGS84 (EPSG: 4326) coordinate reference system.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="flowmapblue_+3A_flows">flows</code></td>
<td>
<p>A <code>data.frame</code> containing the flow data between locations. The <code>data.frame</code> should have the following columns:
</p>

<dl>
<dt>origin</dt><dd><p>A <code>character</code> vector representing the origin location identifier (must match the <code>id</code> in <code>locations</code>).</p>
</dd>
<dt>dest</dt><dd><p>A <code>character</code> vector representing the destination location identifier (must match the <code>id</code> in <code>locations</code>).</p>
</dd>
<dt>count</dt><dd><p>An <code>integer</code> vector representing the flow count between the origin and destination locations.</p>
</dd>
<dt>time</dt><dd><p>(Optional) A vector of <code>POSIXct</code> or <code>Date</code> objects representing the date or date and time of the flow.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="flowmapblue_+3A_mapboxaccesstoken">mapboxAccessToken</code></td>
<td>
<p>A <code>character</code> string representing the Mapbox access token. This is required to render the map using Mapbox tiles. You can obtain a free token at <a href="https://account.mapbox.com/">https://account.mapbox.com/</a>.</p>
</td></tr>
<tr><td><code id="flowmapblue_+3A_clustering">clustering</code></td>
<td>
<p>A <code>logical</code> value indicating whether to enable clustering of locations on the map. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="flowmapblue_+3A_animation">animation</code></td>
<td>
<p>A <code>logical</code> value indicating whether to enable animation of flows on the map. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="flowmapblue_+3A_darkmode">darkMode</code></td>
<td>
<p>A <code>logical</code> value indicating whether to enable dark mode for the map. Defaults to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An HTML widget of class <code>flowmapblue</code> and <code>htmlwidget</code> that can be rendered in R Markdown, Shiny, or viewed in a browser. It can also be saved to <code>html</code> file with <code><a href="htmlwidgets.html#topic+saveWidget">htmlwidgets:saveWidget()</a></code>. See examples for more details.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# example 1, normal flows
# set your Mapbox access token
Sys.setenv(MAPBOX_API_TOKEN = "YOUR_MAPBOX_ACCESS_TOKEN")

# load locations and flows for Switzerland
locations &lt;- data(ch_locations)
flows &lt;- data(ch_flows)

flowmap &lt;- flowmapblue(
 locations,
 flows,
 mapboxAccessToken = Sys.getenv('MAPBOX_API_TOKEN'),
 clustering = TRUE,
 darkMode = TRUE,
 animation = FALSE
)

# view the map
flowmap

# or save it as an HTML file
htmlwidgets::saveWidget(flowmap, file = "flowmap.html")

# example 2, flows with date in time column
# set your Mapbox access token
Sys.setenv(MAPBOX_API_TOKEN = "YOUR_MAPBOX_ACCESS_TOKEN")

# load locations and flows for Switzerland
locations &lt;- data(ch_locations)
flows &lt;- data(ch_flows)

# generate fake datetime
flows$time &lt;- seq(from =as.POSIXct("2020-01-01"),
  to = as.POSIXct("2020-01-05"), length.out = nrow(flows))

flowmap &lt;- flowmapblue(
 locations,
 flows,
 mapboxAccessToken = Sys.getenv('MAPBOX_API_TOKEN'),
 clustering = TRUE,
 darkMode = TRUE,
 animation = FALSE
)

# view the map
flowmap

# example 3, flows with date in time column
# set your Mapbox access token
Sys.setenv(MAPBOX_API_TOKEN = "YOUR_MAPBOX_ACCESS_TOKEN")

# load locations and flows for Switzerland
locations &lt;- data(ch_locations)
flows &lt;- data(ch_flows)
# generate fake dates
flows$time &lt;- seq(from = as.Date("2020-01-01"),
  to = as.Date("2020-06-01"), length.out = nrow(flows))

flowmap &lt;- flowmapblue(
 locations,
 flows,
 mapboxAccessToken = Sys.getenv('MAPBOX_API_TOKEN'),
 clustering = TRUE,
 darkMode = TRUE,
 animation = FALSE
)

# view the map
flowmap

## End(Not run)

</code></pre>

<hr>
<h2 id='flowmapblue-shiny'>Shiny bindings for flowmapblue</h2><span id='topic+flowmapblue-shiny'></span><span id='topic+flowmapblueOutput'></span><span id='topic+renderFlowmapblue'></span>

<h3>Description</h3>

<p>Output and render functions for using flowmapblue within Shiny
applications and interactive Rmd documents.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flowmapblueOutput(outputId, width = "100%", height = "400px")

renderFlowmapblue(expr, env = parent.frame(), quoted = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="flowmapblue-shiny_+3A_outputid">outputId</code></td>
<td>
<p>output variable to read from.</p>
</td></tr>
<tr><td><code id="flowmapblue-shiny_+3A_width">width</code>, <code id="flowmapblue-shiny_+3A_height">height</code></td>
<td>
<p>Must be a valid CSS unit (like <code>'100%'</code>,
<code>'400px'</code>, <code>'auto'</code>) or a number, which will be coerced to a
string and have <code>'px'</code> appended.</p>
</td></tr>
<tr><td><code id="flowmapblue-shiny_+3A_expr">expr</code></td>
<td>
<p>An expression that generates a <code>flowmapblue</code> widget.</p>
</td></tr>
<tr><td><code id="flowmapblue-shiny_+3A_env">env</code></td>
<td>
<p>The environment in which to evaluate <code>expr</code>.</p>
</td></tr>
<tr><td><code id="flowmapblue-shiny_+3A_quoted">quoted</code></td>
<td>
<p>Is <code>expr</code> a quoted expression (with <code>quote()</code>)? This
is useful if you want to save an expression in a variable.</p>
</td></tr>
</table>


<h3>Value</h3>


<dl>
<dt><code>flowmapblueOutput</code></dt><dd><p>Returns a <code>shiny.tag.list</code> object that can be included in a Shiny UI to display the <code>flowmapblue</code> widget.</p>
</dd>
<dt><code>renderFlowmapblue</code></dt><dd><p>Returns a <code>shiny.render.function</code> that is used to generate the <code>flowmapblue</code> widget on the server side in a Shiny application.</p>
</dd>
</dl>



<h3>See Also</h3>

<p><code><a href="htmlwidgets.html#topic+shinyWidgetOutput">shinyWidgetOutput</a></code>, <code><a href="htmlwidgets.html#topic+shinyRenderWidget">shinyRenderWidget</a></code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
