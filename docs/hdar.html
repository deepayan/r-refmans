<!DOCTYPE html><html lang="en"><head><title>Help for package hdar</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {hdar}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#Auth'><p>Auth Class</p></a></li>
<li><a href='#Client'><p>Client Class</p></a></li>
<li><a href='#SearchResults'><p>SearchResults Class</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>'REST' API Client for Accessing Data on 'WEkEO HDA V2'</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.5</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://www.wekeo.eu/">https://www.wekeo.eu/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/eea/hdar/issues">https://github.com/eea/hdar/issues</a></td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Matteo Mattiuzzi &lt;matteo.mattiuzzi@eea.europa.eu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>
  Provides seamless access to the WEkEO Harmonised Data Access (HDA) API, enabling 
  users to query, download, and process data efficiently from the HDA platform. 
  With 'hdar', researchers and data scientists can integrate the extensive HDA 
  datasets into their R workflows, enhancing their data analysis capabilities. 
  Comprehensive information on the API functionality and usage is available 
  at <a href="https://gateway.prod.wekeo2.eu/hda-broker/docs">https://gateway.prod.wekeo2.eu/hda-broker/docs</a>.  </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://joinup.ec.europa.eu/software/page/eupl">EUPL (&ge; 1.2)</a> | file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>R6, httr2, jsonlite, magrittr, htmltools, stringr, humanize</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10),</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-03-13 13:33:15 UTC; Mattiuzzi</td>
</tr>
<tr>
<td>Author:</td>
<td>Matteo Mattiuzzi [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-03-13 14:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='Auth'>Auth Class</h2><span id='topic+Auth'></span>

<h3>Description</h3>

<p>Authorization
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-Auth-new"><code>Auth$new()</code></a>
</p>
</li>
<li> <p><a href="#method-Auth-token"><code>Auth$token()</code></a>
</p>
</li>
<li> <p><a href="#method-Auth-get_token"><code>Auth$get_token()</code></a>
</p>
</li>
<li> <p><a href="#method-Auth-clone"><code>Auth$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-Auth-new"></a>



<h4>Method <code>new()</code></h4>

<p>This function initializes a new instance of the 'Auth' class with the specified parameters.
</p>


<h5>Usage</h5>

<div class="r"><pre>Auth$new(user = NULL, password = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>user</code></dt><dd><p>A character string representing the username for authentication.</p>
</dd>
<dt><code>password</code></dt><dd><p>A character string representing the password for authentication.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>An instance of the 'Auth' class.
</p>


<hr>
<a id="method-Auth-token"></a>



<h4>Method <code>token()</code></h4>

<p>This function retrieves a previously generated token.
</p>


<h5>Usage</h5>

<div class="r"><pre>Auth$token()</pre></div>



<h5>Returns</h5>

<p>A character string representing the retrieved token.
</p>


<hr>
<a id="method-Auth-get_token"></a>



<h4>Method <code>get_token()</code></h4>

<p>This function generates a unique token for authentication or other purposes.
</p>


<h5>Usage</h5>

<div class="r"><pre>Auth$get_token()</pre></div>



<h5>Returns</h5>

<p>A character string representing the generated token.
</p>


<hr>
<a id="method-Auth-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>Auth$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='Client'>Client Class</h2><span id='topic+Client'></span>

<h3>Description</h3>

<p>The Client is the central gateway for interfacing with the HDA Service.
It provides a comprehensive suite of methods to perform operations and retrieve data from the service efficiently.
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>apiUrl</code></dt><dd><p>API endpoint</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-Client-new"><code>Client$new()</code></a>
</p>
</li>
<li> <p><a href="#method-Client-token"><code>Client$token()</code></a>
</p>
</li>
<li> <p><a href="#method-Client-get_token"><code>Client$get_token()</code></a>
</p>
</li>
<li> <p><a href="#method-Client-send_request"><code>Client$send_request()</code></a>
</p>
</li>
<li> <p><a href="#method-Client-show_terms"><code>Client$show_terms()</code></a>
</p>
</li>
<li> <p><a href="#method-Client-terms_and_conditions"><code>Client$terms_and_conditions()</code></a>
</p>
</li>
<li> <p><a href="#method-Client-datasets"><code>Client$datasets()</code></a>
</p>
</li>
<li> <p><a href="#method-Client-search"><code>Client$search()</code></a>
</p>
</li>
<li> <p><a href="#method-Client-get_querytemplate"><code>Client$get_querytemplate()</code></a>
</p>
</li>
<li> <p><a href="#method-Client-generate_query_template"><code>Client$generate_query_template()</code></a>
</p>
</li>
<li> <p><a href="#method-Client-clone"><code>Client$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-Client-new"></a>



<h4>Method <code>new()</code></h4>

<p>Constructor for the 'Client' class. Initializes a new instance with authentication credentials.
</p>


<h5>Usage</h5>

<div class="r"><pre>Client$new(user, password, save_credentials = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>user</code></dt><dd><p>Character string representing the username for authentication.</p>
</dd>
<dt><code>password</code></dt><dd><p>Character string representing the password for authentication.</p>
</dd>
<dt><code>save_credentials</code></dt><dd><p>A logical value indicating whether to save the credentials to a configuration file. Default is FALSE.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>An instance of the 'Client' class.
</p>


<hr>
<a id="method-Client-token"></a>



<h4>Method <code>token()</code></h4>

<p>Retrieves the current authentication token.
</p>


<h5>Usage</h5>

<div class="r"><pre>Client$token()</pre></div>



<h5>Returns</h5>

<p>Character string representing the authentication token.
</p>


<hr>
<a id="method-Client-get_token"></a>



<h4>Method <code>get_token()</code></h4>

<p>Generates a new authentication token.
</p>


<h5>Usage</h5>

<div class="r"><pre>Client$get_token()</pre></div>



<h5>Returns</h5>

<p>Character string representing the newly generated token.
</p>


<hr>
<a id="method-Client-send_request"></a>



<h4>Method <code>send_request()</code></h4>

<p>Sends a specified request to the server and returns the response.
</p>


<h5>Usage</h5>

<div class="r"><pre>Client$send_request(req, raw_response = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>req</code></dt><dd><p>A request object or list representing the HTTP request.</p>
</dd>
<dt><code>raw_response</code></dt><dd><p>Optional logical value indicating whether the raw response should be returned instead of the parsed body.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A response object containing the server's response.
</p>


<hr>
<a id="method-Client-show_terms"></a>



<h4>Method <code>show_terms()</code></h4>

<p>This function displays the terms and conditions for the services.
</p>


<h5>Usage</h5>

<div class="r"><pre>Client$show_terms()</pre></div>



<h5>Returns</h5>

<p>An HTML document containing the terms and conditions in a collapsible format.
</p>


<hr>
<a id="method-Client-terms_and_conditions"></a>



<h4>Method <code>terms_and_conditions()</code></h4>

<p>Function to retrieve and accept terms and conditions. Accepting T&amp;C is permanent,
it is enough to run this function one.
To read T&amp;C see <code><a href="#topic+Client">show_terms</a></code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>Client$terms_and_conditions(term_id, reject = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>term_id</code></dt><dd><p>A character vector of term_ids that you wish to accept.
If missing current status is returned.
Use &quot;<strong>all</strong>&quot; if you want to accept all terms at once.</p>
</dd>
<dt><code>reject</code></dt><dd><p>Logical, default 'FALSE'. If TRUE it inverts the operation and
the provided term_id's are rejected/revoked.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A data frame reflecting the actual acceptance status for each term.
</p>


<hr>
<a id="method-Client-datasets"></a>



<h4>Method <code>datasets()</code></h4>

<p>Lists datasets available on WEkEO, optionally filtered by a text pattern.
</p>


<h5>Usage</h5>

<div class="r"><pre>Client$datasets(pattern = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>pattern</code></dt><dd><p>Optional character string to filter dataset names by matching text.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>List containing datasets and associated information.
</p>


<hr>
<a id="method-Client-search"></a>



<h4>Method <code>search()</code></h4>

<p>This function performs a search based on a specified query and returns an instance of <code><a href="#topic+SearchResults">SearchResults</a></code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>Client$search(json_query, limit = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>json_query</code></dt><dd><p>Character string representing the search query.</p>
</dd>
<dt><code>limit</code></dt><dd><p>Optional; a number specifying the maximum number of results to return.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>An instance of the <code><a href="#topic+SearchResults">SearchResults</a></code> class containing the search results.
</p>


<hr>
<a id="method-Client-get_querytemplate"></a>



<h4>Method <code>get_querytemplate()</code></h4>

<p>Retrieves the raw query metadata for a specified datasetId.
</p>


<h5>Usage</h5>

<div class="r"><pre>Client$get_querytemplate(datasetId, to_json = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>datasetId</code></dt><dd><p>Character, representing the dataset's identifier.</p>
</dd>
<dt><code>to_json</code></dt><dd><p>Logical; if 'TRUE', returns the data in JSON format.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>List or JSON file containing the raw query options.
</p>


<hr>
<a id="method-Client-generate_query_template"></a>



<h4>Method <code>generate_query_template()</code></h4>

<p>This function generates a query template based on a specified datasetId.
</p>


<h5>Usage</h5>

<div class="r"><pre>Client$generate_query_template(datasetId)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>datasetId</code></dt><dd><p>A numeric or character ID representing the dataset.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A JSON representing the generated query template.
</p>


<hr>
<a id="method-Client-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>Client$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Note</h3>

<p>There are some inconsistencies between the return of 'GET querymetadata' and what must be submitted to the HDA.
Use <code><a href="#topic+Client">generate_query_template</a></code> to resolve these inconsistencies.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Client">show_terms</a></code> to read the Terms and conditions.
</p>
<p><code><a href="#topic+SearchResults">SearchResults</a></code> for details on the returned object.
</p>

<hr>
<h2 id='SearchResults'>SearchResults Class</h2><span id='topic+SearchResults'></span>

<h3>Description</h3>

<p>This class handles the storage and manipulation of search results including downloading resources based on a search query.
</p>
<p>SearchResults
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>results</code></dt><dd><p>Stores the search results data.</p>
</dd>
<dt><code>total_count</code></dt><dd><p>Stores the total count of results' element.</p>
</dd>
<dt><code>total_size</code></dt><dd><p>Stores the total size of results</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-SearchResults-new"><code>SearchResults$new()</code></a>
</p>
</li>
<li> <p><a href="#method-SearchResults-download"><code>SearchResults$download()</code></a>
</p>
</li>
<li> <p><a href="#method-SearchResults-clone"><code>SearchResults$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-SearchResults-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initializes a new SearchResults object with the specified client, results, and dataset identifier.
</p>


<h5>Usage</h5>

<div class="r"><pre>SearchResults$new(client, results, dataset_id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>client</code></dt><dd><p>An object containing the API client used to interact with the dataset.</p>
</dd>
<dt><code>results</code></dt><dd><p>List containing search results.</p>
</dd>
<dt><code>dataset_id</code></dt><dd><p>The identifier for the dataset being queried.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>SearchResult instance
</p>


<hr>
<a id="method-SearchResults-download"></a>



<h4>Method <code>download()</code></h4>

<p>Downloads resources based on stored results or selected indices of results.
</p>


<h5>Usage</h5>

<div class="r"><pre>SearchResults$download(
  output_dir,
  selected_indexes,
  stop_at_failure = TRUE,
  force = FALSE,
  prompt = TRUE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>output_dir</code></dt><dd><p>A string specifying the directory where downloaded files will be saved.</p>
</dd>
<dt><code>selected_indexes</code></dt><dd><p>Optional; indices of the specific results to download.</p>
</dd>
<dt><code>stop_at_failure</code></dt><dd><p>Optional; controls whether the download process of multiple files should immediately stop upon encountering the first failure.</p>
</dd>
<dt><code>force</code></dt><dd><p>Optional; forces the download even if the file already exists in the specified output directory.</p>
</dd>
<dt><code>prompt</code></dt><dd><p>Optional; enables all user prompts for decisions during file downloads. Defaults to true.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Nothing returned but downloaded files are saved at the specified location.
</p>


<hr>
<a id="method-SearchResults-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>SearchResults$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
