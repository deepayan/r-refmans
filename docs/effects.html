<!DOCTYPE html><html lang="en"><head><title>Help for package effects</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {effects}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#effects-package'>
<p>Effect Displays for Linear, Generalized Linear, and Other Models</p></a></li>
<li><a href='#effCoef'>
<p>Function to get coefficient estimates from regression models for use in the effects package.</p></a></li>
<li><a href='#effect'><p>Functions For Constructing Effect Displays</p></a></li>
<li><a href='#EffectMethods'><p>Functions For Constructing Effect Displays for Many Modeling Paradigms</p></a></li>
<li><a href='#effectsHexsticker'>
<p>View the Official Hex Sticker for the effects Package</p></a></li>
<li><a href='#effectsTheme'><p>Set the lattice Theme for Effect Plots</p></a></li>
<li><a href='#LegacyArguments'><p>Legacy Arguments for <code>plot</code> and <code>Effect</code> Methods</p></a></li>
<li><a href='#plot.effects'><p>Plots of Effects and Predictor Effects</p></a></li>
<li><a href='#predictorEffects'>
<p>Functions For Computing Predictor Effects</p></a></li>
<li><a href='#summary.eff'><p>Summarizing and Printing Effects</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>4.2-2</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-07-12</td>
</tr>
<tr>
<td>Title:</td>
<td>Effect Displays for Linear, Generalized Linear, and Other Models</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0), carData</td>
</tr>
<tr>
<td>Suggests:</td>
<td>pbkrtest (&ge; 0.4-4), nlme, MASS, poLCA, heplots, splines,
ordinal, car, knitr, betareg, alr4, robustlmm</td>
</tr>
<tr>
<td>Imports:</td>
<td>lme4, nnet, lattice, grid, colorspace, graphics, grDevices,
stats, survey, utils, estimability, insight</td>
</tr>
<tr>
<td>Description:</td>
<td>
  Graphical and tabular effect displays, e.g., of interactions, for 
  various statistical models with linear predictors.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://www.r-project.org">https://www.r-project.org</a>,
<a href="https://socialsciences.mcmaster.ca/jfox/">https://socialsciences.mcmaster.ca/jfox/</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-07-13 14:09:31 UTC; johnfox</td>
</tr>
<tr>
<td>Author:</td>
<td>John Fox [aut, cre],
  Sanford Weisberg [aut],
  Brad Price [aut],
  Michael Friendly [aut],
  Jangman Hong [aut],
  Robert Andersen [ctb],
  David Firth [ctb],
  Steve Taylor [ctb],
  R Core Team [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>John Fox &lt;jfox@mcmaster.ca&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-07-13 15:00:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='effects-package'>
Effect Displays for Linear, Generalized Linear, and Other Models
</h2><span id='topic+effects-package'></span><span id='topic+effects'></span>

<h3>Description</h3>

<p>Graphical and tabular effect displays, e.g., of interactions, for 
various statistical models with linear predictors.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> effects</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 4.2-2</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2022-02-16</td>
</tr>
<tr>
 <td style="text-align: left;">
Depends: </td><td style="text-align: left;"> R (&gt;= 3.5.0), carData</td>
</tr>
<tr>
 <td style="text-align: left;">
Suggests: </td><td style="text-align: left;"> pbkrtest (&gt;= 0.4-4), nlme, MASS, poLCA, heplots, splines, ordinal, car, knitr, betareg, alr4, robustlmm</td>
</tr>
<tr>
 <td style="text-align: left;">
Imports: </td><td style="text-align: left;"> lme4, nnet, lattice, grid, colorspace, graphics, grDevices, stats, survey, utils, estimability, insight</td>
</tr>
<tr>
 <td style="text-align: left;">
LazyLoad: </td><td style="text-align: left;"> yes</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL (&gt;= 2)</td>
</tr>
<tr>
 <td style="text-align: left;">
URL: </td><td style="text-align: left;"> https://www.r-project.org, https://socialsciences.mcmaster.ca/jfox/</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>This package creates effect displays for various kinds of models, as partly explained in the references.
Typical usage is <code>plot(allEffects(model))</code> or <code>plot(predictorEffects(model))</code>,
where <code>model</code> is an appropriate fitted-model object.
Additional arguments to <code><a href="#topic+allEffects">allEffects</a></code>, <code><a href="#topic+predictorEffects">predictorEffects</a></code> and <code><a href="base.html#topic+plot">plot</a></code> can be used to customize the resulting
displays. The function <code><a href="#topic+effect">effect</a></code> can be employed to produce an effect display for a 
particular term in the model, or to which terms in the model are marginal. The function <code><a href="#topic+predictorEffect">predictorEffect</a></code> can be used
to construct an effect display for a particularly predictor. The function <code><a href="#topic+Effect">Effect</a></code>
may similarly be used to produce an effect display for any combination of predictors. In any of the cases, use <code>plot</code>
to graph the resulting effect object. For linear and generalized linear models it is also possible to plot 
partial residuals to obtain (multidimensional) component+residual plots.
See <code>?effect</code>, <code>?Effect</code>, <code>?predictorEffect</code>, and <code>?plot.eff</code> for details.
</p>


<h3>Author(s)</h3>

<p>John Fox, Sanford Weisberg, Brad Price, Michael Friendly, Jangman Hong, 
Robert Anderson, David Firth, Steve Taylor, and the R Core Team. 
</p>
<p>Maintainer: John Fox &lt;jfox@mcmaster.ca&gt;
</p>


<h3>References</h3>

<p>Fox, J. and S. Weisberg (2019)
<em>An R Companion to Applied Regression, Third Edition</em>
Sage Publications.
</p>
<p>Fox, J. (1987)
Effect displays for generalized linear models.
<em>Sociological Methodology</em>
<b>17</b>, 347&ndash;361.
</p>
<p>Fox, J. (2003)
Effect displays in R for generalised linear models.
<em>Journal of Statistical Software</em>
<b>8:15</b>, 1&ndash;27, <a href="https://doi.org/10.18637/jss.v008.i15">doi:10.18637/jss.v008.i15</a>.
</p>
<p>Fox, J. and R. Andersen (2006)
Effect displays  for multinomial and proportional-odds logit models.
<em>Sociological Methodology</em> 
<b>36</b>, 225&ndash;255.
</p>
<p>Fox, J. and J. Hong (2009).
Effect displays in R for multinomial and proportional-odds logit models: 
Extensions to the effects package.
<em>Journal of Statistical Software</em>
<b>32:1</b>, 1&ndash;24, <a href="https://doi.org/10.18637/jss.v032.i01">doi:10.18637/jss.v032.i01</a>.
</p>
<p>Fox, J. and S. Weisberg (2018).
Visualizing Fit and Lack of Fit in Complex Regression Models:
Effect Plots with Partial Residuals.
<em>Journal of Statistical Software</em>
<b>87:9</b>, 1&ndash;27, <a href="https://doi.org/10.18637/jss.v087.i09">doi:10.18637/jss.v087.i09</a>.
</p>

<hr>
<h2 id='effCoef'>
Function to get coefficient estimates from regression models for use in the effects package.
</h2><span id='topic+effCoef'></span><span id='topic+effCoef.default'></span>

<h3>Description</h3>

<p>This function uses the <code><a href="insight.html#topic+get_parameters">get_parameters</a></code> function in the <code>insight</code> package to get a vector of regression coefficients for use in the effects package.  It converts the two-column <code>data.frame</code> returned by <code>get_parameters</code> to a vector of named elements.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>
effCoef(mod, ...)

## Default S3 method:
effCoef(mod, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="effCoef_+3A_mod">mod</code></td>
<td>

<p>A model object with a linear predictor representing fixed effects.  
</p>
</td></tr>
<tr><td><code id="effCoef_+3A_...">...</code></td>
<td>
<p>Additional parameter passed to <code><a href="insight.html#topic+get_parameters">get_parameters</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code><a href="insight.html#topic+get_parameters">get_parameters</a></code> function can be used to retrieve the coefficient estimates corresponding to a linear predictor for many regression models, and return them as a two column <code>data.frame</code>, with regressor names in the first column and estimates in the second column.  This function converts this output to a named vector as is expected by the <code>effects</code> package.
</p>


<h3>Value</h3>

<p>A vector of coefficient estimates
</p>


<h3>Author(s)</h3>

<p>Sanford Weisberg <a href="mailto:sandy@umn.edu">sandy@umn.edu</a></p>


<h3>See Also</h3>

<p><code>get_parameters</code>, and vignette <a href="../doc/methods-supported-by-effects.pdf">Regression Models Supported by the effects Package</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>m1 &lt;- lm(prestige ~ type + income + education, Duncan)
effCoef(m1)
</code></pre>

<hr>
<h2 id='effect'>Functions For Constructing Effect Displays</h2><span id='topic+effect'></span><span id='topic+effect.default'></span><span id='topic+Effect'></span><span id='topic+Effect.default'></span><span id='topic+Effect.lm'></span><span id='topic+Effect.multinom'></span><span id='topic+Effect.merMod'></span><span id='topic+Effect.mlm'></span><span id='topic+Effect.poLCA'></span><span id='topic+Effect.polr'></span><span id='topic+Effect.svyglm'></span><span id='topic+allEffects'></span><span id='topic+allEffects.default'></span>

<h3>Description</h3>

<p><code>Effect</code> and <code>effect</code> construct an <code>"eff"</code> object for a term (usually a high-order term) in a regression that models a response as a linear function of main effects and interactions of factors and covariates. These models include, among others, linear models (fit by <code><a href="stats.html#topic+lm">lm</a></code> and <code><a href="nlme.html#topic+gls">gls</a></code>), and generalized linear models (fit by <code><a href="stats.html#topic+glm">glm</a></code>), for which an <code>"eff"</code> object is created, and multinomial and proportional-odds logit models (fit respectively by <code><a href="nnet.html#topic+multinom">multinom</a></code> and <code><a href="MASS.html#topic+polr">polr</a></code>), for which an <code>"effpoly"</code> object is created. The computed effect absorbs the lower-order terms marginal to the term in question, and averages over other terms in the model.  For multivariate linear models (of class <code>"mlm"</code>, fit by <code><a href="stats.html#topic+lm">lm</a></code>), the functions construct a list of <code>"eff"</code> objects, separately for the various response variables in the model. 
</p>
<p><code>effect</code> builds the required object by specifying explicitly a focal term like <code>"a:b"</code> for an <code>a</code> by <code>b</code> interaction.  <code>Effect</code> in contrast specifies the predictors in  a term, for example <code>c("a", "b")</code>, rather than the term itself.  <code>Effect</code> is consequently more flexible and robust than <code>effect</code>, and will succeed with some models for which <code>effect</code> fails.  The <code>effect</code> function works by constructing a call to <code>Effect</code> and continues to be included in <span class="pkg">effects</span> so older code that uses it will not break.
</p>
<p>The <code>Effect</code> and <code>effect</code> functions can also be used with many other models; see <code><a href="#topic+Effect.default">Effect.default</a></code> and the <a href="../doc/methods-supported-by-effects.pdf">Regression Models Supported by the effects Package</a> vignette.
</p>
<p><code>allEffects</code> identifies all of the high-order terms in a model and returns a list of <code>"eff"</code> or <code>"effpoly"</code> objects (i.e., an object of class <code>"efflist"</code>).
</p>
<p>For information on computing and displaying <em>predictor effects</em>, see <code><a href="#topic+predictorEffect">predictorEffect</a></code> and <code><a href="#topic+plot.predictoreff">plot.predictoreff</a></code>.
</p>
<p>For further information about plotting effects, see <code><a href="#topic+plot.eff">plot.eff</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>effect(term, mod, vcov.=vcov, ...)

## Default S3 method:
effect(term, mod, vcov.=vcov, ...)

Effect(focal.predictors, mod, ...)

## S3 method for class 'lm'
Effect(focal.predictors, mod, xlevels=list(),
    fixed.predictors, vcov. = vcov, se=TRUE,
    residuals=FALSE, quantiles=seq(0.2, 0.8, by=0.2),
    x.var=NULL,  ...,
    #legacy arguments:
    given.values, typical, offset, confint, confidence.level,
    partial.residuals, transformation)

## S3 method for class 'multinom'
Effect(focal.predictors, mod,
    xlevels=list(), fixed.predictors,
    vcov. = vcov, se=TRUE, ...,
    #legacy arguments:
    confint, confidence.level, given.values, typical)

## S3 method for class 'polr'
Effect(focal.predictors, mod,
    xlevels=list(), fixed.predictors,
    vcov.=vcov, se=TRUE, latent=FALSE, ...,
    #legacy arguments:
    confint, confidence.level, given.values, typical)

## S3 method for class 'svyglm'
Effect(focal.predictors, mod, fixed.predictors, ...)

## S3 method for class 'merMod'
Effect(focal.predictors, mod, ..., KR=FALSE)
    
## S3 method for class 'poLCA'
Effect(focal.predictors, mod, ...)

## S3 method for class 'mlm'
Effect(focal.predictors, mod, response, ...)

allEffects(mod, ...)

## Default S3 method:
allEffects(mod, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="effect_+3A_term">term</code></td>
<td>
<p>the quoted name of a term, usually, but not necessarily, a high-order term in the model. The term must be given exactly as it appears in the printed model, although either colons (<code>:</code>) or asterisks (<code>*</code>) may be used for interactions.  If <code>term</code> is NULL, the function returns the formula for the linear predictor.</p>
</td></tr>
<tr><td><code id="effect_+3A_focal.predictors">focal.predictors</code></td>
<td>
<p>a character vector of one or more predictors in the model in any order.</p>
</td></tr>
<tr><td><code id="effect_+3A_mod">mod</code></td>
<td>
<p>a regression model object.  If no specific method exists for the class of <code>mod</code>, <code>Effect.default</code> will be called.</p>
</td></tr>
<tr><td><code id="effect_+3A_xlevels">xlevels</code></td>
<td>
<p>this argument is used to set the number of levels for any focal numeric predictor (that is predictors that are not factors, character variables, or logical variables, all of which are treated as factors).  If <code>xlevels=NULL</code>, then each numeric predictor is represented by five values over its range, equally spaced and then rounded to 'nice' numbers.  If <code>xlevels=n</code> is an integer, then each numeric predictor is represented by <code>n</code> equally spaced values rounded to 'nice' numbers.  
</p>
<p>More generally, <code>xlevels</code> can be a named list of values at which to set each numeric predictor.  For example, <code>xlevels=list(x1=c(2, 4.5, 7), x2=4)</code> would use the values 2, 4.5, and 7 for <code>x1</code>, use 4 equally spaced values for <code>x2</code>, and use the default for any other numeric predictors. 
</p>
<p>If partial residuals are computed, then the focal predictor that is to appear on the horizontal axis of an effect plot is evaluated at 100 equally spaced values along its full range, and, by default, other numeric predictors are evaluated at the quantiles specified in the <code>quantiles</code> argument, unless their values are given explicitly in <code>xlevels</code>.</p>
</td></tr>
<tr><td><code id="effect_+3A_fixed.predictors">fixed.predictors</code></td>
<td>
<p>an optional list of specifications affecting the values at which fixed predictors for an effect are set, potentially including:
</p>

<dl>
<dt>given.values</dt><dd><p><code>given.values="default"</code> (which is, naturally, the default) specifies averaging over levels of a non-focal factor, weighting levels of the factor in proportion to sample size.
</p>
<p><code>given.values="equal"</code> computes unweighted averages over the levels of non-focal factors.  
</p>
<p>For finer control, the user can also provide a named numeric vector of weights for particular columns of the model matrix that correspond to the regressors for the factor. 
</p>
<p>Character and logical predictors are treated as factors. 
</p>
<p>For example, for a factor <code>X</code> with three levels <code>a</code>, <code>b</code> and <code>c</code>, the regressors generated using the default <code><a href="stats.html#topic+contr.treatment">contr.treatment</a></code> parameterization for a factor will be named <code>Xb</code> and <code>Xc</code>, as the regressor for level <code>a</code> is excluded as the baseline level.  The specification <code>given.values=c(Xb=1/2, Xc=1/4)</code> would average over the levels of <code>X</code> with weight 1/2 for level <code>b</code>, 1/4 for <code>c</code>, and weight 1 = 1/2 - 1/4 = 1/4 for the baseline level <code>a</code>.  Setting <code>given.values=c(Xb=1)</code> would fix <code>X</code> at level <code>b</code>.
</p>
</dd>
<dt>typical</dt><dd><p>a function to be applied to the columns of the model matrix over which the effect is &quot;averaged&quot;; with the exception of the <code>"svyglm"</code> method, the default is <code><a href="base.html#topic+mean">mean</a></code>. For<code>"svyglm"</code> objects, the default is to use the survey-design weighted mean.</p>
</dd>
<dt>apply.typical.to.factors</dt><dd><p>It generally doesn't make sense to apply typical values that aren't means (e.g., medians) to the columns of the model-matrix representing contrasts for factors. This value generally defaults to <code>FALSE</code> except for <code>"svyglm"</code> objects, for which the default is <code>TRUE</code>, using the the survey-design weighted mean.</p>
</dd>
<dt>offset</dt><dd><p>a function to be applied to the offset values (if there is an offset) in a linear or generalized linear model, or a mixed-effects model fit by <code>lmer</code> or <code>glmer</code>; or a numeric value, to which the offset will be set. The default is the <code><a href="base.html#topic+mean">mean</a></code> function, and thus the offset will be set to its mean; in the case of <code>"svyglm"</code> objects, the default is to use the survey-design weighted mean. <em>Note:</em> Only offsets defined by the <code>offset</code> argument to <code><a href="stats.html#topic+lm">lm</a></code>, <code><a href="stats.html#topic+glm">glm</a></code>, <code>svyglm</code>, <code>lmer</code>, or <code>glmer</code> will be handled correctly; use of the <code>offset</code> function in the model formula is not supported.</p>
</dd>
</dl>

</td></tr>
<tr><td><code id="effect_+3A_vcov.">vcov.</code></td>
<td>
<p>Effect methods generally use the matrix returned by <code>vcov(mod)</code> to compute standard errors and confidence bounds.  Alternatively, the user may specify the name of a function that returns a matrix of the same dimension and structure as the matrix returned by <code>vcov(mod)</code>.  For example, <code>vcov. = hccm</code> uses the <code><a href="car.html#topic+hccm">hccm</a></code> function from the <span class="pkg">car</span> package to use a heteroscedasticity corrected covariance matrix for a linear model in place of the standard covariance estimate. This argument can be set to equal matrix of the same size and structure as the matrix returned by <code>vcov(mod)</code>. For example, using <code>vcov. = vcov(Boot(mod))</code> uses <code><a href="car.html#topic+Boot">Boot</a></code> from the <span class="pkg">car</span> package to get a bootstrap estimate of the covariance matrix for linear, generalized linear, and possibly other modeling frameworks.</p>
</td></tr>
<tr><td><code id="effect_+3A_se">se</code></td>
<td>
<p><code>TRUE</code> (the default), <code>FALSE</code>, or a list with any or all of the following elements, controlling whether and how standard errors and confidence limits are computed for the effects: 
</p>

<dl>
<dt>compute</dt><dd><p>(default <code>TRUE</code>) whether or not to compute standard errors and confidence limits.</p>
</dd> 
<dt>level</dt><dd><p>(default <code>0.95</code>) confidence level for confidence limits.</p>
</dd>
<dt>type</dt><dd><p>one of <code>"pointwise"</code> (the default), <code>"Scheffe"</code>, or <code>"scheffe"</code>, whether to compute confidence limits with specified coverage at each point for an effect or to compute limits for a Scheffe-type confidence envelope. For <code>mer</code>, <code>merMod</code>, and <code>lme</code> objects, the normal distribution is used to get confidence limits.</p>
</dd>
</dl>

</td></tr>
<tr><td><code id="effect_+3A_residuals">residuals</code></td>
<td>
<p>if <code>TRUE</code>, residuals for a linear or generalized linear model will be computed and saved; if <code>FALSE</code> (the default), residuals are suppressed. If residuals are saved, partial residuals are computed when the effect is plotted: see <code><a href="#topic+plot.eff">plot.eff</a></code> and the vignette <a href="../doc/partial-residuals.pdf">Effect Displays with Partial Residuals</a>. This argument may also be used for mixed-effects and some other models.</p>
</td></tr>
<tr><td><code id="effect_+3A_quantiles">quantiles</code></td>
<td>
<p>quantiles at which to evaluate numeric focal predictors <em>not</em> on the horizontal axis, used only when partial residuals are displayed; superseded if the <code>xlevels</code> argument gives specific values for a predictor.</p>
</td></tr>
<tr><td><code id="effect_+3A_x.var">x.var</code></td>
<td>
<p>the (quoted) name or index of the numeric predictor to define the horizontal axis of an effect plot for a linear or generalized linear model; the default is <code>NULL</code>, in which case the first numeric predictor in the effect will be used <em>if</em> partial residuals are to be computed. This argument is intended to be used when <code>residuals</code> is <code>TRUE</code>; otherwise, the variable on the horizontal axis can be chosen when the effect object is plotted: see <code><a href="#topic+plot.eff">plot.eff</a></code>.</p>
</td></tr>
<tr><td><code id="effect_+3A_latent">latent</code></td>
<td>
<p>if <code>TRUE</code>, effects in a proportional-odds logit model are computed on the scale of the latent response; if <code>FALSE</code>	(the default) effects are computed as individual-level probabilities and logits.</p>
</td></tr>
<tr><td><code id="effect_+3A_x">x</code></td>
<td>
<p>an object of class <code>"eff"</code>, <code>"effpoly"</code>, or <code>"efflatent"</code>.</p>
</td></tr>
<tr><td><code id="effect_+3A_kr">KR</code></td>
<td>
<p>if <code>TRUE</code> and the <span class="pkg">pbkrtest</span> package is installed, use the Kenward-Roger coefficient covariance matrix to compute effect standard errors for linear mixed models fit with <code>lmer</code>; the default is <code>FALSE</code> because the computation can be time-consuming.</p>
</td></tr>
<tr><td><code id="effect_+3A_response">response</code></td>
<td>
<p>for an <code>"mlm"</code> object, a vector containing the (quoted) name(s) or indices of one or more response variable(s). The default is to use all responses in the model.</p>
</td></tr>
<tr><td><code id="effect_+3A_...">...</code></td>
<td>
<p>arguments to be passed down.</p>
</td></tr>
<tr><td><code id="effect_+3A_confint">confint</code>, <code id="effect_+3A_confidence.level">confidence.level</code>, <code id="effect_+3A_given.values">given.values</code>, <code id="effect_+3A_typical">typical</code>, <code id="effect_+3A_offset">offset</code>, <code id="effect_+3A_partial.residuals">partial.residuals</code>, <code id="effect_+3A_transformation">transformation</code></td>
<td>
<p>legacy arguments retained for backwards compatibility; if present, these arguments take precedence over the <code>level</code> element of the <code>confint</code> list argument and the <code>given.values</code>, <code>typical</code>, and <code>offset</code> elements of the <code>fixed.predictors</code> list argument; <code>confint</code> may be used in place of the <code>se</code> argument; <code>partial.residuals</code> may be used in place of the <code>residuals</code> argument. See <code><a href="#topic+LegacyArguments">LegacyArguments</a></code> for details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Normally, the functions to be used directly are <code>allEffects</code>, to return a list of high-order effects, and the generic <code>plot</code> function to plot the effects (see <code><a href="#topic+plot.efflist">plot.efflist</a></code>, <code><a href="#topic+plot.eff">plot.eff</a></code>, and <code><a href="#topic+plot.effpoly">plot.effpoly</a></code>). Alternatively, <code>Effect</code> can be used to vary a subset of predictors over their ranges, while other predictors are held to typical values.
</p>
<p>Plotting methods for effect objects call the <code><a href="lattice.html#topic+xyplot">xyplot</a></code> (or in some cases, the <code><a href="lattice.html#topic+densityplot">densityplot</a></code>) function in the <span class="pkg">lattice</span> package. Effects may also be printed (implicitly or explicitly via <code>print</code>) or summarized (using <code>summary</code>) (see <code><a href="#topic+print.efflist">print.efflist</a></code>, <code><a href="#topic+summary.efflist">summary.efflist</a></code>, <code><a href="#topic+print.eff">print.eff</a></code>, <code><a href="#topic+summary.eff">summary.eff</a></code>, <code><a href="#topic+print.effpoly">print.effpoly</a></code>, and <code><a href="#topic+summary.effpoly">summary.effpoly</a></code>).
</p>
<p>If asked, the <code>effect</code> function will compute effects for terms that have higher-order relatives in the model, averaging over those terms (which rarely makes sense), or for terms that do not appear in the model but are higher-order relatives of terms that do. For example, for the model <code>Y ~ A*B + A*C + B*C</code>, one could compute the effect corresponding to the absent term <code>A:B:C</code>, which absorbs the constant, the <code>A</code>, <code>B</code>, and <code>C</code> main effects, and the three two-way interactions. In either of these cases, a warning is printed.
</p>
<p>See <code><a href="#topic+predictorEffects">predictorEffects</a></code> for an alternative paradigm for defining effects.
</p>


<h3>Value</h3>

<p>For <code>"lm"</code>, <code>"glm"</code>, <code>"svyglm"</code>, <code>"lmerMod"</code>, <code>"glmerMod"</code>, and <code>"lme"</code>, model objects, <code>effect</code> and <code>Effect</code> return  an <code>"eff"</code> object, and for <code>"multinom"</code>, <code>"polr"</code>, <code>"clm"</code>, <code>"clmm"</code>, and <code>"clm2"</code> models, an <code>"effpoly"</code> object, with the components listed below. For an <code>"mlm"</code> object with one response specified, an <code>"eff"</code> object is returned, otherwise an <code>"efflist"</code> object is returned, containing one <code>"eff"</code> object for each <code>response</code>.
</p>
<table role = "presentation">
<tr><td><code>term</code></td>
<td>
<p>the term to which the effect pertains.</p>
</td></tr>
<tr><td><code>formula</code></td>
<td>
<p>the complete model formula.</p>
</td></tr>
<tr><td><code>response</code></td>
<td>
<p>a character string giving the name of the response variable.</p>
</td></tr>
<tr><td><code>y.levels</code></td>
<td>
<p>(for <code>"effpoly"</code> objects) levels of the polytomous response variable.</p>
</td></tr>
<tr><td><code>variables</code></td>
<td>
<p>a list with information about each predictor, including its name, whether it is a factor, and its levels or values.</p>
</td></tr>
<tr><td><code>fit</code></td>
<td>
<p>(for <code>"eff"</code> objects) a one-column matrix of fitted values, representing the effect on the scale of the linear predictor; this is a raveled table, representing all combinations of predictor values.</p>
</td></tr>
<tr><td><code>prob</code></td>
<td>
<p>(for <code>"effpoly"</code> objects) a matrix giving fitted probabilities for the effect for the various levels of the the response (columns) and combinations of the focal predictors (rows).</p>
</td></tr>
<tr><td><code>logit</code></td>
<td>
<p>(for <code>"effpoly"</code> objects) a matrix giving fitted logits for the effect for the various levels of the the response (columns) and combinations of the focal predictors (rows).</p>
</td></tr>
<tr><td><code>x</code></td>
<td>
<p>a data frame, the columns of which are the predictors in the effect, and the rows of which give all combinations of values of these predictors.</p>
</td></tr>
<tr><td><code>model.matrix</code></td>
<td>
<p>the model matrix from which the effect was calculated.</p>
</td></tr>
<tr><td><code>data</code></td>
<td>
<p>a data frame with the data on which the fitted model was based.</p>
</td></tr>
<tr><td><code>discrepancy</code></td>
<td>
<p>the percentage discrepancy for the &lsquo;safe&rsquo; predictions of the original fit; should be very close to 0.  Note: except for <code>gls</code> models, this is now necessarily 0.</p>
</td></tr>
<tr><td><code>offset</code></td>
<td>
<p>value to which the offset is fixed; <code>0</code> if there is no offset.</p>
</td></tr>
<tr><td><code>model</code></td>
<td>
<p>(for <code>"effpoly"</code> objects) <code>"multinom"</code> or <code>"polr"</code>, as appropriate.</p>
</td></tr>
<tr><td><code>vcov</code></td>
<td>
<p>(for <code>"eff"</code> objects) a covariance matrix for the effect, on the scale of the linear predictor.</p>
</td></tr>
<tr><td><code>se</code></td>
<td>
<p>(for <code>"eff"</code> objects) a vector of standard errors for the effect, on the scale of the linear predictor.</p>
</td></tr>
<tr><td><code>se.prob</code>, <code>se.logit</code></td>
<td>
<p>(for <code>"effpoly"</code> objects) matrices of standard errors for the effect, on the probability and logit scales.</p>
</td></tr>
<tr><td><code>lower</code>, <code>upper</code></td>
<td>
<p>(for <code>"eff"</code> objects) one-column matrices of confidence limits, on the scale of the linear predictor.</p>
</td></tr>
<tr><td><code>lower.prob</code>, <code>upper.prob</code>, <code>lower.logit</code>, <code>upper.logit</code></td>
<td>
<p>(for <code>"effpoly"</code> objects) matrices of confidence limits for the fitted logits and probabilities; the latter are computed by transforming the former.</p>
</td></tr>
<tr><td><code>confidence.level</code></td>
<td>
<p>for the confidence limits.</p>
</td></tr>
<tr><td><code>transformation</code></td>
<td>
<p>(for <code>"eff"</code> objects) a two-element list, with element <code>link</code> giving the link function, and element <code>inverse</code> giving the inverse-link (mean) function.</p>
</td></tr>
<tr><td><code>residuals</code></td>
<td>
<p>(working) residuals for linear or generalized linear models (and some similar models), to be used by <code><a href="#topic+plot.eff">plot.eff</a></code> to compute and plot partial residuals.</p>
</td></tr>
<tr><td><code>x.var</code></td>
<td>
<p>the name of the predictor to appear on the horizontal axis of an effect plot made from the  returned object; will usually be <code>NULL</code> if partial residuals aren't computed.</p>
</td></tr>
<tr><td><code>family</code></td>
<td>
<p>for a <code>"glm"</code> model, the name of the distributional family of the model; for an <code>"lm"</code> model, this is <code>"gaussian"</code>; otherwise <code>NULL</code>. The <code>family</code> controls how partial residuals are smoothed in plots.</p>
</td></tr>
<tr><td><code>link</code></td>
<td>
<p>the value returned by <code>family(mod)</code>.  Down-stream methods may need the link, inverse link and derivative functions.</p>
</td></tr>
</table>
<p><code>allEffects</code> returns an <code>"efflist"</code> object, a list of <code>"eff"</code> or <code>"effpoly"</code> objects corresponding to the high-order terms of the model.
</p>
<p>If <code>mod</code> is of class <code>"poLCA"</code> (from the <span class="pkg">poLCA</span> package), representing a polytomous latent class model, effects are computed for the predictors given the estimated latent classes. The result is of class <code>"eff"</code> if the latent class model has 2 categories and of class <code>"effpoly"</code> with more than 2 categories.
</p>


<h3>Warnings and Limitations</h3>

<p>The <code>Effect</code> function handles factors and covariates differently, and is likely to be confused if one is changed to the other in a model formula. Consequently, formulas that include calls to <code>as.factor</code>, <code>factor</code>, or <code>numeric</code> (as, e.g., in <code>y ~ as.factor(income)</code>) will cause errors. Instead, create the modified variables outside of the model formula (e.g., <code>fincome &lt;- as.factor(income)</code>) and use these in the model formula.
</p>
<p>The <code>effect</code> function doesn't work with factors that have colons in level names (e.g., <code>"level:A"</code>); the <code>effect</code> function will confuse the colons with interactions; rename levels to remove or replace the colons (e.g., <code>"level.A"</code>). Level names with colons are perfectly fine for use with <code>Effect</code>.
</p>
<p>The functions in the <span class="pkg">effects</span> package work properly with predictors that are numeric variables, factors, character variables, or logical variables; consequently, e.g., convert dates to numeric. Character predictors and logical predictors are treated as factors, the latter with &quot;levels&quot; <code>"FALSE"</code> and <code>"TRUE"</code>.
</p>
<p>Empty cells in crossed-factors are now permitted for <code>"lm"</code>, <code>"glm"</code>, and <code>"multinom"</code> models. For <code>"multinom"</code> models with two or more crossed factors with an empty cell, stacked area plots apparently do not work because of a bug in the <code><a href="lattice.html#topic+barchart">barchart</a></code> function in the <span class="pkg">lattice</span> package.  However, the default line plots do work.
</p>
<p>Offsets in linear and generalized linear models are supported, as are offsets in mixed models fit by <code>lmer</code> or <code>glmer</code>, but must be supplied through the <code>offset</code> argument to <code>lm</code>, <code>glm</code>, <code>lmer</code> or <code>glmer</code>; offsets supplied via calls to the <code>offset</code> function on the right-hand side of the model formula are not supported.
</p>
<p>Fitting ordinal mixed models using <code><a href="ordinal.html#topic+clmm">clmm</a></code> or <code><a href="ordinal.html#topic+clmmOld">clmm2</a></code> permits many options, including a variety of link functions, scale functions, nominal regressors, and various methods for setting thresholds.  Effects are currently generated only for the default values of the arguments <code>scale</code>, <code>nominal</code>, <code>link</code>, and <code>threshold</code>, which is equivalent to fitting an ordinal-response mixed-effects model with a logit link. <code>Effect</code> can also be used with objects created by <code><a href="ordinal.html#topic+clm">clm</a></code> or <code><a href="ordinal.html#topic+clmOld">clm2</a></code>, fitting ordinal response models with the same links permitted by <code><a href="MASS.html#topic+polr">polr</a></code> in the <span class="pkg">MASS</span> package, with no random effects, and with results similar to those from <code><a href="MASS.html#topic+polr">polr</a></code>.
</p>
<p>Calling any of these functions from within a user-written function may result in errors due to R's scoping rules.  See the vignette <code>embedding.pdf</code> in the <span class="pkg">car</span> package for a solution to this problem.
</p>


<h3>Author(s)</h3>

<p>John Fox <a href="mailto:jfox@mcmaster.ca">jfox@mcmaster.ca</a>, Sanford Weisberg <a href="mailto:sandy@umn.edu">sandy@umn.edu</a>
and Jangman Hong.</p>


<h3>References</h3>

<p>Fox, J. (1987).
Effect displays for generalized linear models.
<em>Sociological Methodology</em>
<b>17</b>, 347&ndash;361.
</p>
<p>Fox, J. (2003)
Effect displays in R for generalised linear models.
<em>Journal of Statistical Software</em>
<b>8:15</b>, 1&ndash;27, <a href="https://doi.org/10.18637/jss.v008.i15">doi:10.18637/jss.v008.i15</a>.
</p>
<p>Fox, J. and R. Andersen (2006).
Effect displays for multinomial and proportional-odds logit models.
<em>Sociological Methodology</em>
<b>36</b>, 225&ndash;255.
</p>
<p>Fox, J. and J. Hong (2009).
Effect displays in R for multinomial and proportional-odds logit models:?
Extensions to the effects package.
<em>Journal of Statistical Software</em>
<b>32:1</b>, 1&ndash;24, <a href="https://doi.org/10.18637/jss.v032.i01">doi:10.18637/jss.v032.i01</a>.
</p>
<p>Fox, J. and S. Weisberg (2019).  <em>An R Companion to Applied Regression, third edition</em>,
Thousand Oaks: Sage.
</p>
<p>Fox, J. and S. Weisberg (2018).
Visualizing Fit and Lack of Fit in Complex Regression Models
with Predictor Effect Plots with Partial Residuals.
<em>Journal of Statistical Software</em>
<b>87:9</b>, 1&ndash;27, <a href="https://doi.org/10.18637/jss.v087.i09">doi:10.18637/jss.v087.i09</a>.
</p>
<p>Hastie, T. J. (1992).
Generalized additive models.
In Chambers, J. M., and Hastie, T. J. (eds.)
<em>Statistical Models in S</em>, Wadsworth.
</p>
<p>Weisberg, S. (2014).
<em>Applied Linear Regression</em>, 4th edition, Wiley,
<a href="http://z.umn.edu/alr4ed">http://z.umn.edu/alr4ed</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+LegacyArguments">LegacyArguments</a></code>. For information on printing, summarizing, and plotting effects:
<code><a href="#topic+print.eff">print.eff</a></code>, <code><a href="#topic+summary.eff">summary.eff</a></code>, <code><a href="#topic+plot.eff">plot.eff</a></code>,
<code><a href="#topic+print.summary.eff">print.summary.eff</a></code>,
<code><a href="#topic+print.effpoly">print.effpoly</a></code>, <code><a href="#topic+summary.effpoly">summary.effpoly</a></code>, <code><a href="#topic+plot.effpoly">plot.effpoly</a></code>,
<code><a href="#topic+print.efflist">print.efflist</a></code>, <code><a href="#topic+summary.efflist">summary.efflist</a></code>,
<code><a href="#topic+plot.efflist">plot.efflist</a></code>, <code><a href="lattice.html#topic+xyplot">xyplot</a></code>,
<code><a href="lattice.html#topic+densityplot">densityplot</a></code>, and the <a href="../doc/partial-residuals.pdf">Effect Displays with Partial Residuals</a> and <a href="../doc/methods-supported-by-effects.pdf">Regression Models Supported by the effects Package</a> vignettes.</p>


<h3>Examples</h3>

<pre><code class='language-R'>mod.cowles &lt;- glm(volunteer ~ sex + neuroticism*extraversion,
                  data=Cowles, family=binomial)
eff.cowles &lt;- allEffects(mod.cowles, xlevels=list(extraversion=seq(0, 24, 6)),
                   fixed.predictors=list(given.values=c(sexmale=0.5)))
eff.cowles
as.data.frame(eff.cowles[[2]])


# the following are equivalent:
eff.ne &lt;- effect("neuroticism*extraversion", mod.cowles)
Eff.ne &lt;- Effect(c("neuroticism", "extraversion"), mod.cowles)
all.equal(eff.ne$fit, Eff.ne$fit)

plot(eff.cowles, 'sex', axes=list(y=list(lab="Prob(Volunteer)")))

plot(eff.cowles, 'neuroticism:extraversion',
     axes=list(y=list(lab="Prob(Volunteer)",
        ticks=list(at=c(.1,.25,.5,.75,.9)))))

plot(Effect(c("neuroticism", "extraversion"), mod.cowles,
            se=list(type="Scheffe"),
            xlevels=list(extraversion=seq(0, 24, 6)),
            fixed.predictors=list(given.values=c(sexmale=0.5))),
     axes=list(y=list(lab="Prob(Volunteer)",
        ticks=list(at=c(.1,.25,.5,.75,.9)))))

plot(eff.cowles, 'neuroticism:extraversion', lines=list(multiline=TRUE),
     axes=list(y=list(lab="Prob(Volunteer)")))

plot(effect('sex:neuroticism:extraversion', mod.cowles,
            xlevels=list(extraversion=seq(0, 24, 6))),
     lines=list(multiline=TRUE))


# a nested model:

mod &lt;- lm(log(prestige) ~ income:type + education, data=Prestige)

plot(Effect(c("income", "type"), mod, transformation=list(link=log, inverse=exp)),
     axes=list(y=list(lab="prestige")))


if (require(nnet)){
    mod.beps &lt;- multinom(vote ~ age + gender + economic.cond.national +
                             economic.cond.household + Blair + Hague + Kennedy +
                             Europe*political.knowledge, data=BEPS)
    
    plot(effect("Europe*political.knowledge", mod.beps,
                xlevels=list(political.knowledge=0:3)))
    

    plot(Effect(c("Europe", "political.knowledge"), mod.beps,
                xlevels=list(Europe=1:11, political.knowledge=0:3),
                fixed.predictors=list(given.values=c(gendermale=0.5))),
         lines=list(col=c("blue", "red", "orange")),
         axes=list(x=list(rug=FALSE), y=list(style="stacked")))

    
    plot(effect("Europe*political.knowledge", mod.beps, # equivalent
                xlevels=list(Europe=1:11, political.knowledge=0:3),
                fixed.predictors=list(given.values=c(gendermale=0.5))),
         lines=list(col=c("blue", "red", "orange")),
         axes=list(x=list(rug=FALSE), y=list(style="stacked")))
    
}

if (require(MASS)){
    mod.wvs &lt;- polr(poverty ~ gender + religion + degree + country*poly(age,3),
                    data=WVS)
    
    plot(effect("country*poly(age, 3)", mod.wvs))
    

    plot(Effect(c("country", "age"), mod.wvs),
         axes=list(y=list(style="stacked")))

    
    plot(effect("country*poly(age, 3)", mod.wvs),
         axes=list(y=list(style="stacked"))) # equivalent

    plot(effect("country*poly(age, 3)", latent=TRUE, mod.wvs))
    plot(effect("country*poly(age, 3)", latent=TRUE, mod.wvs,
         se=list(type="scheffe"))) # Scheffe-type confidence envelopes
    
}


mod.pres &lt;- lm(prestige ~ log(income, 10) + poly(education, 3) + poly(women, 2),
               data=Prestige)
eff.pres &lt;- allEffects(mod.pres, xlevels=50)
plot(eff.pres)
plot(eff.pres[1],
     axes=list(x=list(income=list(
             transform=list(trans=log10, inverse=function(x) 10^x),
             ticks=list(at=c(1000, 2000, 5000, 10000, 20000))
    ))))

# linear model with log-response and log-predictor
# to illustrate transforming axes and setting tick labels
mod.pres1 &lt;- lm(log(prestige) ~ log(income) + poly(education, 3) + poly(women, 2),
                data=Prestige)
# effect of the log-predictor
eff.log &lt;- Effect("income", mod.pres1)
# effect of the log-predictor transformed to the arithmetic scale
eff.trans &lt;- Effect("income", mod.pres1, transformation=list(link=log, inverse=exp))
#variations:
# y-axis:  scale is log, tick labels are log
# x-axis:  scale is arithmetic, tick labels are arithmetic
plot(eff.log)

# y-axis:  scale is log, tick labels are log
# x-axis:  scale is log, tick labels are arithmetic
plot(eff.log, axes=list(x=list(income=list(
    transform=list(trans=log, inverse=exp),
    ticks=list(at=c(5000, 10000, 20000)),
    lab="income, log-scale"))))

# y-axis:  scale is log, tick labels are arithmetic
# x-axis:  scale is arithmetic, tick labels are arithmetic
plot(eff.trans, axes=list(y=list(lab="prestige")))

# y-axis:  scale is arithmetic, tick labels are arithmetic
# x-axis:  scale is arithmetic, tick labels are arithmetic
plot(eff.trans, axes=list(y=list(type="response", lab="prestige")))

# y-axis:  scale is log, tick labels are arithmetic
# x-axis:  scale is log, tick labels are arithmetic
plot(eff.trans, axes=list(
       x=list(income=list(
            transform=list(trans=log, inverse=exp),
            ticks=list(at=c(1000, 2000, 5000, 10000, 20000)),
            lab="income, log-scale")),
        y=list(lab="prestige, log-scale")),
     main="Both response and X in log-scale")

# y-axis:  scale is arithmetic, tick labels are arithmetic
# x-axis:  scale is log, tick labels are arithmetic
plot(eff.trans, axes=list(
        x=list(
            income=list(transform=list(trans=log, inverse=exp),
                        ticks=list(at=c(1000, 2000, 5000, 10000, 20000)),
                        lab="income, log-scale")),
        y=list(type="response", lab="prestige")))


if (require(nlme)){ # for gls()
    mod.hart &lt;- gls(fconvict ~ mconvict + tfr + partic + degrees, data=Hartnagel,
                    correlation=corARMA(p=2, q=0), method="ML")
    plot(allEffects(mod.hart))
    detach(package:nlme)
}

if (require(lme4)){
    data(cake, package="lme4")
    fm1 &lt;- lmer(angle ~ recipe * temperature + (1|recipe:replicate), cake,
                REML = FALSE)
    plot(Effect(c("recipe", "temperature"), fm1))
    
    plot(effect("recipe:temperature", fm1),
         axes=list(grid=TRUE)) # equivalent (plus grid)
    
    if (any(grepl("pbkrtest", search()))) detach(package:pbkrtest)
    detach(package:lme4)
}


if (require(nlme) &amp;&amp; length(find.package("lme4", quiet=TRUE)) &gt; 0){
    data(cake, package="lme4")
    cake$rep &lt;- with(cake, paste( as.character(recipe), as.character(replicate), sep=""))
    fm2 &lt;- lme(angle ~ recipe * temperature, data=cake,
               random = ~ 1 | rep, method="ML")
    plot(Effect(c("recipe", "temperature"), fm2))
    plot(effect("recipe:temperature", fm2),
         axes=list(grid=TRUE))  # equivalent (plus grid)
    }
    detach(package:nlme)



if (require(poLCA)){
    data(election)
    f2a &lt;- cbind(MORALG,CARESG,KNOWG,LEADG,DISHONG,INTELG,
                 MORALB,CARESB,KNOWB,LEADB,DISHONB,INTELB)~PARTY*AGE
    nes2a &lt;- poLCA(f2a,election,nclass=3,nrep=5)
    plot(Effect(c("PARTY", "AGE"), nes2a),
         axes=list(y=list(style="stacked")))
}


# mlm example
if (require(heplots)) {
    data(NLSY, package="heplots")
    mod &lt;- lm(cbind(read,math) ~ income+educ, data=NLSY)
    eff.inc &lt;- Effect("income", mod)
    plot(eff.inc)
    eff.edu &lt;- Effect("educ", mod)
    plot(eff.edu, axes=list(x=list(rug=FALSE), grid=TRUE))
    
    plot(Effect("educ", mod, response="read"))
    
    detach(package:heplots)
}

# svyglm() example (adapting an example from the survey package)


if (require(survey)){
  data("api")
  dstrat&lt;-svydesign(id=~1, strata=~stype, weights=~pw,
    data=apistrat, fpc=~fpc)
  mod &lt;- svyglm(sch.wide ~ ell + meals + mobility, design=dstrat,
    family=quasibinomial())
  plot(allEffects(mod),
    axes=list(y=list(lim=log(c(0.4, 0.99)/c(0.6, 0.01)),
      ticks=list(at=c(0.4, 0.75, 0.9, 0.95, 0.99)))))
}


# component + residual plot examples


Prestige$type &lt;- factor(Prestige$type, levels=c("bc", "wc", "prof"))

mod.prestige.1 &lt;- lm(prestige ~ income + education, data=Prestige)
plot(allEffects(mod.prestige.1, residuals=TRUE)) # standard C+R plots
plot(allEffects(mod.prestige.1, residuals=TRUE,
    se=list(type="scheffe"))) # with Scheffe-type confidence bands

mod.prestige.2 &lt;- lm(prestige ~ type*(income + education), data=Prestige)
plot(allEffects(mod.prestige.2, residuals=TRUE))

mod.prestige.3 &lt;- lm(prestige ~ type + income*education, data=Prestige)
plot(Effect(c("income", "education"), mod.prestige.3, residuals=TRUE),
     partial.residuals=list(span=1))


#  artificial data

set.seed(12345)
x1 &lt;- runif(500, -75, 100)
x2 &lt;- runif(500, -75, 100)
y &lt;- 10 + 5*x1 + 5*x2 + x1^2 + x2^2 + x1*x2 + rnorm(500, 0, 1e3)
Data &lt;- data.frame(y, x1, x2)
mod.1 &lt;- lm(y ~ poly(x1, x2, degree=2, raw=TRUE), data=Data)
# raw=TRUE necessary for safe prediction
mod.2 &lt;- lm(y ~ x1*x2, data=Data)
mod.3 &lt;- lm(y ~ x1 + x2, data=Data)

plot(Effect(c("x1", "x2"), mod.1, residuals=TRUE)) # correct model
plot(Effect(c("x1", "x2"), mod.2, residuals=TRUE)) # wrong model
plot(Effect(c("x1", "x2"), mod.3, residuals=TRUE)) # wrong model
</code></pre>

<hr>
<h2 id='EffectMethods'>Functions For Constructing Effect Displays for Many Modeling Paradigms</h2><span id='topic+effSources'></span><span id='topic+effSources.default'></span><span id='topic+effSources.gls'></span><span id='topic+effSources.glmmPQL'></span><span id='topic+effSources.rlmerMod'></span><span id='topic+effSources.clm'></span><span id='topic+effSources.clm2'></span><span id='topic+effSources.clmm'></span><span id='topic+effSources.betareg'></span>

<h3>Description</h3>

<p>The <span class="pkg">effects</span> package can be used with many different classes of regression models beyond the basic models described in the <code><a href="#topic+Effect">Effect</a></code> help page.  The <code>effSources</code> function is used to tell an <code>Effect</code> method where to find the information to compute effects.  Details are given in the vignette <a href="../doc/methods-supported-by-effects.pdf">Regression Models Supported by the effects Package</a>.  Unless you are trying to extend <span class="pkg">effects</span> to a different class of regression model, you will have no use for this function.  
</p>


<h3>Usage</h3>

<pre><code class='language-R'>
## Default S3 method:
effSources(mod)

## S3 method for class 'gls'
effSources(mod)

## S3 method for class 'glmmPQL'
effSources(mod)

## S3 method for class 'rlmerMod'
effSources(mod)

## S3 method for class 'clm'
effSources(mod)

## S3 method for class 'clm2'
effSources(mod)

## S3 method for class 'clmm'
effSources(mod)

## S3 method for class 'betareg'
effSources(mod)

</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="EffectMethods_+3A_mod">mod</code></td>
<td>
<p>a fitted model object of the appropriate class. The default method works for many regression models for which there is no specific method.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>Effect</code> function methods by default expect regression objects to provide certain quantities, including a model formula, coefficient estimates, and the variance matrix of the estimates, in standard places. <code>effSources</code> methods return a list of the necessary quantities if they are not in standard places.</p>


<h3>Value</h3>

<p>See the vignette <a href="../doc/methods-supported-by-effects.pdf">Regression Models Supported by the effects Package</a>.</p>


<h3>Author(s)</h3>

<p>John Fox <a href="mailto:jfox@mcmaster.ca">jfox@mcmaster.ca</a>, Sanford Weisberg <a href="mailto:sandy@umn.edu">sandy@umn.edu</a></p>

<hr>
<h2 id='effectsHexsticker'>
View the Official Hex Sticker for the effects Package</h2><span id='topic+effectsHexsticker'></span>

<h3>Description</h3>

<p>Open the official hex sticker for the effects package in your browser</p>


<h3>Usage</h3>

<pre><code class='language-R'>effectsHexsticker()
</code></pre>


<h3>Value</h3>

<p>Used for its side effect of openning the hex sticker for the effects package in your browser.
</p>


<h3>Author(s)</h3>

<p>John Fox <a href="mailto:jfox@mcmaster.ca">jfox@mcmaster.ca</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
effectsHexsticker()

## End(Not run)
</code></pre>

<hr>
<h2 id='effectsTheme'>Set the lattice Theme for Effect Plots</h2><span id='topic+effectsTheme'></span>

<h3>Description</h3>

<p>Set the <span class="pkg">lattice</span> theme (see <code><a href="lattice.html#topic+trellis.device">trellis.device</a></code>) appropriately for effect plots. This function is invoked
automatically when the <span class="pkg">effects</span> package is loaded <em>if</em> the <span class="pkg">lattice</span> package hasn't previously been loaded. A typical
call is <code>lattice::trellis.par.set(effectsTheme())</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>effectsTheme(strip.background = list(col = gray(seq(0.95, 0.5, length = 3))), 
          strip.shingle = list(col = "black"), clip = list(strip = "off"), 
          superpose.line = list(lwd = c(2, rep(1, 6))), col)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="effectsTheme_+3A_strip.background">strip.background</code></td>
<td>
<p>colors for the background of conditioning strips at the top of each panel; the default uses shades of gray and 
makes allowance for up to three conditioning variables.</p>
</td></tr>
<tr><td><code id="effectsTheme_+3A_strip.shingle">strip.shingle</code></td>
<td>
<p>when lines rather than numeric values are used to indicate the values of conditioning variables, the default sets the color of
the lines to black.</p>
</td></tr>
<tr><td><code id="effectsTheme_+3A_clip">clip</code></td>
<td>
<p>the default allows lines showing values of conditioning variables to extend slightly beyond the boundaries of 
the strips&mdash;making the lines more visible at the extremes.</p>
</td></tr>
<tr><td><code id="effectsTheme_+3A_superpose.line">superpose.line</code></td>
<td>
<p>the default sets the line width of the first (of seven) lines to 2.</p>
</td></tr>
<tr><td><code id="effectsTheme_+3A_col">col</code></td>
<td>
<p>an optional argument specifying the colors to use for lines and symbolst: 
if <code>col = "car"</code>, then the color palette for the <span class="pkg">car</span> package is used (see <code><a href="car.html#topic+carPalette">carPalette</a></code>);
<code>col = "R"</code>, then the current R palette (ignoring the first entry which is <code>"black"</code> in the standard R palette) is used (see <code><a href="grDevices.html#topic+palette">palette</a></code>);
if <code>col = "colorblind"</code>, then a colorblind-friendly palette (from <a href="https://jfly.uni-koeln.de/color/">https://jfly.uni-koeln.de/color/</a> but ignoring black) is used;
if a vector of color specifications, then these are used.
If <code>col</code> isn't specified then the current <span class="pkg">lattice</span> colors are used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list suitable as an argument for <code><a href="lattice.html#topic+trellis.par.set">trellis.par.set</a></code>; current values of modified parameters are
supplied as an attribute.
</p>


<h3>Author(s)</h3>

<p>John Fox <a href="mailto:jfox@mcmaster.ca">jfox@mcmaster.ca</a></p>


<h3>See Also</h3>

<p><code><a href="lattice.html#topic+trellis.device">trellis.device</a></code>, <code><a href="lattice.html#topic+trellis.par.set">trellis.par.set</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
lattice::trellis.par.set(effectsTheme())

## End(Not run)
</code></pre>

<hr>
<h2 id='LegacyArguments'>Legacy Arguments for <code>plot</code> and <code>Effect</code> Methods</h2><span id='topic+LegacyArguments'></span><span id='topic+Legacy+20Arguments'></span>

<h3>Description</h3>

<p>Prior to verson 4.0-0 of the <span class="pkg">effects</span> package, there were many (literally dozens) of
arguments to the <code>plot</code> methods for <code>"eff"</code> and <code>"effpoly"</code> objects. 
</p>
<p>In version 4.0-0 of the package, we have consolidated these arguments into a much smaller
number of arguments (e.g., <code>lines</code>, <code>points</code>, <code>axes</code>) that take lists of
specifications. We have similarly consolidated some of the arguments to <code>Effect</code> methods
into the <code>confint</code> and <code>fixed.predictors</code> arguments.
</p>
<p>For backwards compatibility, we have to the extent possible retained the
older arguments. If specified, these legacy arguments take precedence over the newer
list-style arguments
</p>


<h3>Details</h3>

<p>Here is the correspondence between the old and new arguments.
</p>
<p>For <code>plot</code> methods:
</p>

<dl>
<dt><code>multiline=TRUE/FALSE</code></dt><dd><p><code>lines=list(multiline=TRUE/FALSE)</code></p>
</dd>
<dt><code>type=c("rescale", "link", "response")</code></dt><dd><p>For models with a link function, <code>"link"</code> plots in linear predictor scale, <code>"response"</code> plots in the response scale, and the default <code>"rescale"</code> plots in linear predictor scale but labels tick-marks in response scale.</p>
</dd>
<dt><code>z.var=which.min(levels)</code></dt><dd><p><code>lines=list(z.var=which.min(levels))</code> relevant only when <code>lines=list(multiline=TRUE)</code></p>
</dd>
<dt><code>colors={vector of colors}</code></dt><dd><p><code>lines=list(col={vector of colors})</code></p>
</dd>
<dt><code>lty={vector of line types}</code></dt><dd><p><code>lines=list(lty={vector of line types})</code></p>
</dd>
<dt><code>lwd={vector of line widths}</code></dt><dd><p><code>lines=list(lwd={vector of line widths})</code></p>
</dd>
<dt><code>use.splines=TRUE/FALSE</code></dt><dd><p><code>lines=list(splines=TRUE/FALSE)</code></p>
</dd>
<dt><code>cex={number}</code></dt><dd><p><code>points=list(cex={number})</code></p>
</dd>
<dt><code>rug=TRUE/FALSE</code></dt><dd><p><code>axes=list(x=list(rug=TRUE/FALSE)</code></p>
</dd>
<dt><code>xlab={"axis title"}</code></dt><dd><p><code>axes=list(x=list(lab={"axis title"}))</code></p>
</dd>
<dt><code>xlim={c(min, max)}</code></dt><dd><p><code>axes=list(x=list(lim={c(min, max)}))</code></p>
</dd>
<dt><code>rotx={degrees}</code></dt><dd><p><code>axes=list(x=list(rot={degrees}))</code></p>
</dd>
<dt><code>ticks.x=list({tick specifications})</code></dt><dd><p><code>axes=list(x=list(ticks=list({tick specifications})))</code></p>
</dd>
<dt><code>transform.x=list(link={function}, inverse={function})</code></dt><dd><p><code>axes=list(x=list(transform=list({lists of transformations by predictors})))</code></p>
</dd>
<dt><code>ylab={"axis title"}</code></dt><dd><p><code>axes=list(y=list(lab={"axis title"}))</code></p>
</dd>
<dt><code>ylim={c(min, max)}</code></dt><dd><p><code>axes=list(y=list(lim={c(min, max)}))</code></p>
</dd>
<dt><code>roty={degrees}</code></dt><dd><p><code>axes=list(y=list(rot={degrees}))</code></p>
</dd>
<dt><code>ticks=list({tick specifications})</code></dt><dd><p><code>axes=list(y=list(ticks=list({tick specifications})))</code></p>
</dd>
<dt><code>alternating=TRUE/FALSE</code></dt><dd><p><code>axes=list(alternating=TRUE/FALSE)</code></p>
</dd>
<dt><code>grid=TRUE/FALSE</code></dt><dd><p><code>axes=list(grid=TRUE/FALSE)</code></p>
</dd>
<dt><code>ci.style="bands"/"lines"/"bars"/"none"</code></dt><dd><p><code>confint=list(style="bands"/"lines"/"bars"/"none"</code>)</p>
</dd>
<dt><code>band.transparency={number}</code></dt><dd><p><code>confint=list(alpha={number})</code></p>
</dd>
<dt><code>band.colors={vector of colors}</code></dt><dd><p><code>confint=list(col={vector of colors})</code></p>
</dd>
<dt><code>residuals.color={color}</code></dt><dd><p><code>partial.residuals=list(col={color})</code></p>
</dd>
<dt><code>residuals.pch={plotting character}</code></dt><dd><p><code>partial.residuals=list(pch={plotting character})</code></p>
</dd>
<dt><code>residuals.cex={number}</code></dt><dd><p><code>partial.residuals=list(cex={number})</code></p>
</dd>
<dt><code>smooth.residuals=TRUE/FALSE</code></dt><dd><p><code>partial.residuals=list(smooth=TRUE/FALSE)</code></p>
</dd>
<dt><code>residuals.smooth.color={color}</code></dt><dd><p><code>partial.residuals=list(smooth.col={color})</code></p>
</dd>
<dt><code>span={number}</code></dt><dd><p><code>partial.residuals=list(span={number})</code></p>
</dd>
<dt><code>show.fitted=TRUE/FALSE</code></dt><dd><p><code>partial.residuals=list(fitted=TRUE/FALSE)</code></p>
</dd>
<dt><code>factor.names=TRUE/FALSE</code></dt><dd><p><code>lattice=list(strip=list(factor.names=TRUE/FALSE))</code></p>
</dd>
<dt><code>show.strip.values=TRUE/FALSE</code></dt><dd><p><code>lattice=list(strip=list(values=TRUE/FALSE))</code></p>
</dd>
<dt><code>layout={lattice layout}</code></dt><dd><p><code>lattice=list(layout={lattice layout})</code></p>
</dd>
<dt><code>key.args={lattice key args}</code></dt><dd><p><code>lattice=list(key.args={lattice key args})</code></p>
</dd>
<dt><code>style="lines"/"stacked"</code></dt><dd><p>for <code>plot.effpoly</code>, <code>axes=list(y=list(style="lines"/"stacked"))</code></p>
</dd>
<dt><code>rescale.axis=TRUE/FALSE</code></dt><dd><p><code>type="rescale"/"response"/"link"</code></p>
</dd>
</dl>

<p>For <code>Effect</code> methods:
</p>

<dl>
<dt><code>confint=TRUE/FALSE</code> or a list</dt><dd><p>may be substituted for the <code>se</code> argument.</p>
</dd>
<dt><code>confidence.level={number}</code></dt><dd><p><code>se=list(level={number})</code></p>
</dd>
<dt><code>given.values={named vector}</code></dt><dd><p><code>fixed.predictors=list(given.values={named vector})</code></p>
</dd>
<dt><code>typical={function}</code></dt><dd><p><code>fixed.predictors=list(typical={function})</code></p>
</dd>
<dt><code>offset={function}</code></dt><dd><p><code>fixed.predictors=list(offset={function})</code></p>
</dd>
<dt><code>partial.residuals=TRUE/FALSE</code></dt><dd><p><code>residuals=TRUE/FALSE</code></p>
</dd>
<dt><code>transformation</code></dt><dd><p>This argument to <code>Effect</code> is not needed to compute effects.  It can now be set directly with the <code>plot</code> method with the argument <code>axes = list(y = list(transformation=specification))</code>.</p>
</dd>
</dl>


<h3>Author(s)</h3>

<p>John Fox <a href="mailto:jfox@mcmaster.ca">jfox@mcmaster.ca</a></p>


<h3>See Also</h3>

<p><code><a href="#topic+Effect">Effect</a></code>, <code><a href="#topic+plot.eff">plot.eff</a></code>, <code><a href="#topic+plot.effpoly">plot.effpoly</a></code>
</p>

<hr>
<h2 id='plot.effects'>Plots of Effects and Predictor Effects</h2><span id='topic+plot.effect'></span><span id='topic+plot.effects'></span><span id='topic+plot.predictoreff'></span><span id='topic+plot.predictorefflist'></span><span id='topic+plot.eff'></span><span id='topic+plot.effpoly'></span><span id='topic+plot.efflist'></span><span id='topic+plot.mlm.efflist'></span><span id='topic++5B.efflist'></span>

<h3>Description</h3>

<p><code>plot</code> methods for <code>predictoreff</code>, <code>predictorefflist</code>, <code>eff</code>, <code>efflist</code> and <code>effpoly</code> objects created by calls other methods in the <code>effects</code> package.  The plot arguments were substantially changed in mid-2017. For more details and many examples, see the <a href="../doc/predictor-effects-gallery.pdf">Predictor Effects Graphics Gallery</a> vignette.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>
## S3 method for class 'eff'
plot(x, x.var, 
    main=paste(effect, "effect plot"),
    symbols=TRUE, lines=TRUE, axes, confint,
    partial.residuals, id, lattice, ...,
    # legacy arguments:
    multiline, z.var, rug, xlab, ylab, colors, cex, lty, lwd,
    ylim, xlim, factor.names, ci.style,
    band.transparency, band.colors, type, ticks,
    alternating, rotx, roty, grid, layout,
    rescale.axis, transform.x, ticks.x, show.strip.values,
    key.args, use.splines,
    residuals.color, residuals.pch, residuals.cex, smooth.residuals,
    residuals.smooth.color, show.fitted, span)
    
## S3 method for class 'efflist'
plot(x, selection, rows, cols, ask=FALSE, graphics=TRUE, lattice, ...)

## S3 method for class 'predictoreff'
plot(x, x.var, 
    main = paste(names(x$variables)[1], "predictor effect plot"), ...)

## S3 method for class 'predictorefflist'
plot(x, selection, rows, cols, ask = FALSE, 
    graphics = TRUE, lattice, ...)

## S3 method for class 'effpoly'
plot(x, x.var=which.max(levels),
    main=paste(effect, "effect plot"),
    symbols=TRUE, lines=TRUE, axes, confint, lattice, ...,
    # legacy arguments:
    type, multiline, rug, xlab, ylab, colors, cex, lty, lwd,
    factor.names, show.strip.values,
    ci.style, band.colors, band.transparency, style,
    transform.x, ticks.x, xlim,
    ticks, ylim, rotx, roty, alternating, grid,
    layout, key.args, use.splines)
    
## S3 method for class 'mlm.efflist'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.effects_+3A_x">x</code></td>
<td>
<p>an object of class <code>"predictoreff"</code>, <code>"predictorefflist"</code>, <code>"eff"</code>, <code>"effpoly"</code>, <code>"efflist"</code>, <code>"mlm.efflist"</code>, 	or <code>"summary.eff"</code>, as appropriate.</p>
</td></tr>
<tr><td><code id="plot.effects_+3A_x.var">x.var</code></td>
<td>
<p>the index (number) or quoted name of the covariate or factor to place on the horizontal axis of each panel of the effect plot. The default is the predictor with the largest number of levels or values.  This argument is ignored with <code>predictoreff</code> objects.</p>
</td></tr>
<tr><td><code id="plot.effects_+3A_main">main</code></td>
<td>
<p>the title for the plot, printed at the top; the default title is constructed from the name of the effect.</p>
</td></tr>
<tr><td><code id="plot.effects_+3A_symbols">symbols</code></td>
<td>
<p><code>TRUE</code>, <code>FALSE</code>, or an optional list of specifications for plotting symbols; if not given, symbol properties are taken from <code>superpose.symbol</code> in the lattice theme. See Detailed Argument Descriptions under Details for more information.</p>
</td></tr>
<tr><td><code id="plot.effects_+3A_lines">lines</code></td>
<td>
<p><code>TRUE</code>, <code>FALSE</code>, or an optional list of specifications for plotting lines (and possibly areas); if not given, line properties are taken from <code>superpose.line</code> in the lattice theme. See Detailed Argument Descriptions under Details for more information.</p>
</td></tr>
<tr><td><code id="plot.effects_+3A_axes">axes</code></td>
<td>
<p>an optional list of specifications for the x and y axes; if not given, axis properties take generally reasonable default values. See Details for more information.</p>
</td></tr>
<tr><td><code id="plot.effects_+3A_confint">confint</code></td>
<td>
<p>an optional list of specifications for plotting confidence regions and intervals; if not given, generally reasonable default values are used. See Detailed Argument Descriptions under Details for more information.</p>
</td></tr>
<tr><td><code id="plot.effects_+3A_partial.residuals">partial.residuals</code></td>
<td>
<p>an optional list of specifications for plotting partial residuals for linear and generalized linear models; if not given, generally reasonable default values are used. See Detailed Argument Descriptions under Details for more information, along with the <a href="../doc/partial-residuals.pdf">Effect Displays with Partial Residuals</a> vignette.</p>
</td></tr>
<tr><td><code id="plot.effects_+3A_id">id</code></td>
<td>
<p>an optional list of specifications for identifying points when partial residuals are plotted; if not specified, no points are labelled. See Detailed Argument Descriptions under Details for more information.</p>
</td></tr>
<tr><td><code id="plot.effects_+3A_lattice">lattice</code></td>
<td>
<p>an optional list of specifications for various lattice properties, such as legend placement; if not given, generally reasonable default values are used. See Detailed Argument Descriptions under Details for more information.</p>
</td></tr>
<tr><td><code id="plot.effects_+3A_selection">selection</code></td>
<td>
<p>the optional index (number) or quoted name of the effect in an efflist object to be plotted; if not supplied, a menu of high-order terms is presented or all effects are plotted.</p>
</td></tr>
<tr><td><code id="plot.effects_+3A_rows">rows</code>, <code id="plot.effects_+3A_cols">cols</code></td>
<td>
<p>Number of rows and columns in the &ldquo;meta-array&rdquo; of plots produced for an <code>efflist</code> object; if either argument is missing, then the meta-layout will be computed by the <code>plot</code> method.</p>
</td></tr>
<tr><td><code id="plot.effects_+3A_ask">ask</code></td>
<td>
<p>if <code>selection</code> is not supplied and <code>ask</code> is <code>TRUE</code>, a menu of high-order terms is presented; if <code>ask</code> is <code>FALSE</code> (the default), effects for all high-order terms are plotted in an array.</p>
</td></tr>
<tr><td><code id="plot.effects_+3A_graphics">graphics</code></td>
<td>
<p>if <code>TRUE</code> (the default), then the menu of terms to plot is presented in a dialog box rather than as a text menu.</p>
</td></tr>
<tr><td><code id="plot.effects_+3A_...">...</code></td>
<td>
<p>arguments to be passed down. For <code>"predictoreff"</code> or <code>"predictorefflist"</code> objects, the arguments passed down can include all the arguments for <code>"eff"</code>.</p>
</td></tr>
<tr><td><code id="plot.effects_+3A_multiline">multiline</code>, <code id="plot.effects_+3A_z.var">z.var</code>, <code id="plot.effects_+3A_rug">rug</code>, <code id="plot.effects_+3A_xlab">xlab</code>, <code id="plot.effects_+3A_ylab">ylab</code>, <code id="plot.effects_+3A_colors">colors</code>, <code id="plot.effects_+3A_cex">cex</code>, <code id="plot.effects_+3A_lty">lty</code>, <code id="plot.effects_+3A_lwd">lwd</code>, <code id="plot.effects_+3A_ylim">ylim</code>, <code id="plot.effects_+3A_xlim">xlim</code>, <code id="plot.effects_+3A_factor.names">factor.names</code>, <code id="plot.effects_+3A_ci.style">ci.style</code>, <code id="plot.effects_+3A_band.transparency">band.transparency</code>, <code id="plot.effects_+3A_band.colors">band.colors</code>, <code id="plot.effects_+3A_ticks">ticks</code>, <code id="plot.effects_+3A_alternating">alternating</code>, <code id="plot.effects_+3A_rotx">rotx</code>, <code id="plot.effects_+3A_roty">roty</code>, <code id="plot.effects_+3A_grid">grid</code>, <code id="plot.effects_+3A_layout">layout</code>, <code id="plot.effects_+3A_rescale.axis">rescale.axis</code>, <code id="plot.effects_+3A_transform.x">transform.x</code>, <code id="plot.effects_+3A_ticks.x">ticks.x</code>, <code id="plot.effects_+3A_show.strip.values">show.strip.values</code>, <code id="plot.effects_+3A_key.args">key.args</code>, <code id="plot.effects_+3A_use.splines">use.splines</code>, <code id="plot.effects_+3A_type">type</code>, <code id="plot.effects_+3A_residuals.color">residuals.color</code>, <code id="plot.effects_+3A_residuals.pch">residuals.pch</code>, <code id="plot.effects_+3A_residuals.cex">residuals.cex</code>, <code id="plot.effects_+3A_smooth.residuals">smooth.residuals</code>, <code id="plot.effects_+3A_residuals.smooth.color">residuals.smooth.color</code>, <code id="plot.effects_+3A_show.fitted">show.fitted</code>, <code id="plot.effects_+3A_span">span</code>, <code id="plot.effects_+3A_style">style</code></td>
<td>
<p>legacy arguments retained for backwards compatibility; if specified, these will take precedence over the newer list-style arguments described above. See <code><a href="#topic+LegacyArguments">LegacyArguments</a></code> for details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Effects plots and predictor effects plots are produced by these methods.  The plots are highly customizable using the optional arguments described here.  For example, effects in a GLM are plotted on the scale of the linear predictor, but the vertical axis is labelled on the response scale. This preserves the linear structure of the model while permitting interpretation on what is usually a more familiar scale. This approach may also be used with linear models, for example to display effects on the scale of the response even if the data are analyzed on a transformed scale, such as log or square-root.  See the <code>axes</code> argument details below to change the scale to response scale, or to linear predictor scale with tick marks labeled in response scale.
</p>
<p>When a factor is on the x-axis, the <code>plot</code> method for <code>eff</code> objects connects the points representing the effect by line segments, creating a response &ldquo;profile.&rdquo; If you wish to suppress these lines, add <code>lty=0</code> to the <code>lines</code> argument to the call to <code>plot</code> (see below and the examples).
</p>
<p>In a polytomous multinomial or proportional-odds logit model, by default effects are plotted on the probability scale; they may alternatively be plotted on the scale of the individual-level logits.
</p>
<p>All of the arguments to plot objects created by <code>Effect</code> or <code>allEffects</code> can also be used with objects created by <code>predictorEffect</code> or <code>predictorEffects</code>.  
</p>
<p><b>Detailed Argument Descriptions</b>
</p>
<p>For more information about these arguments and many examples, see the <a href="../doc/predictor-effects-gallery.pdf">Predictor Effects Graphics Gallery</a> vignette.
</p>
<p>Maximizing the flexibility of these plot commands requires inclusion of a myriad of options.  In an attempt to simplify the use of these options, they have been organized into just a few arguments that each accept a list of specifications as an argument.  In a few cases the named entries in the list are themselves lists.
</p>
<p>Each of the following arguments takes an optional list of specifications; any specification absent from the list
assumes its default value. Some of the list elements are themselves lists, so in complex cases, the argument can take
the form of nested lists.  All of these arguments can also be used on objects created with <code><a href="#topic+predictorEffects">predictorEffects</a></code>.
</p>

<dl>
<dt><code>symbols</code></dt><dd><p><code>TRUE</code>, <code>FALSE</code>, or a list of options that controls the plotting symbols and their sizes for use with factors;
if <code>FALSE</code> symbols are suppressed; if <code>TRUE</code> default values are used:
</p>

<dl>
<dt><code>pch</code></dt><dd><p>ploting symbols, a vector of plotting characters, with the default taken from <code>trellis.par.get("superpose.symbol")$pch</code>, typically a vector of 1s (circles).</p>
</dd>
<dt><code>cex</code></dt><dd><p>plotting character sizes, a vector of values, with the default taken from <code>trellis.par.get("superpose.symbol")$cex</code>, typically a vector of 0.8s.</p>
</dd>
</dl>

</dd>
<dt><code>lines</code></dt><dd><p><code>TRUE</code>, <code>FALSE</code>, or a list that controls the characteristics of lines drawn on a plot, and also whether or not multiple lines should be drawn in the same panel in the plot; if <code>FALSE</code> lines are suppressed; if <code>TRUE</code> default values are used:
</p>

<dl>
<dt><code>multiline</code></dt><dd><p>display a multiline plot in each panel; the default is <code>TRUE</code> if there are no standard errors
in the <code>"eff"</code> object, <code>FALSE</code> otherwise. For an <code>"effpoly"</code> object <code>multline=TRUE</code> causes all of the response
levels to be shown in the same panel rather than in separate panels.</p>
</dd>
<dt>z.var</dt><dd><p>for linear, generalized linear or mixed models,
the index (number) or quoted name of the covariate or factor for which
individual lines are to be drawn in each panel of the effect plot. 
The default is the
predictor with the smallest number of levels or values. This argument is only
used for multipline plots.</p>
</dd>
<dt><code>lty</code></dt><dd><p>vector of line types, with the default taken from <code>trellis.par.get("superpose.line")$lty</code>, typically a vector of 1s (solid lines).</p>
</dd>
<dt><code>lwd</code></dt><dd><p>vector of line widths, with the default taken from <code>trellis.par.get("superpose.line")$lwd</code>, typically a vector with 2 in the first position followed by 1s.</p>
</dd>
<dt><code>col</code></dt><dd><p>a vector of line colors, with the default taken from from <code>trellis.par.get("superpose.line")$col</code>, used both for lines and
for areas in stacked area plots for <code>"effpoly"</code> objects; in the latter case, the default colors for an ordered response are instead generated by
<code>sequential_hcl</code> in the <span class="pkg">colorspace</span> package.</p>
</dd>
<dt><code>splines</code></dt><dd><p>use splines to smooth plotted effect lines; the default is <code>TRUE</code>.</p>
</dd>
</dl>

</dd>
<dt><code>axes</code></dt><dd><p>a list with elements <code>x</code>, <code>y</code>, <code>alternating</code>, and <code>grid</code> that control axis limits, ticks, and labels.
The <code>x</code> and <code>y</code> elements may themselves be lists.
</p>
<p>The <code>x</code> entry is a list with elements named for predictors, with each predictor element itself a list with the following elements:
</p>

<dl>
<dt><code>lab</code></dt><dd><p>axis label, defaults to the name of the predictor; may either
be a text string or a list with the text label (optionally named <code>label</code>) 
as its first element and the named element <code>cex</code> as its second element.</p>
</dd>
<dt><code>lim</code></dt><dd><p>a two-element vector giving the axis limits, with the default determined from the data.</p>
</dd>
<dt><code>ticks</code></dt><dd><p>a list with either element <code>at</code>, a vector specifying locations for the ticks marks, or <code>n</code>, the number
of tick marks.</p>
</dd>
<dt><code>transform</code></dt><dd><p>transformations to be applied to the horizontal axis of a numeric predictor,
in the form of a list of two functions, with
element names <code>trans</code> and <code>inverse</code>. The
<code>trans</code> function is applied to the values of the predictor, and <code>inverse</code> is used for computing
proper axis tick labels. The default is not to transform the predictor axis.</p>
</dd>
</dl>

<p>Two additional elements may appear in the <code>x</code> list, and apply to all predictors:
</p>

<dl>
<dt><code>rotate</code></dt><dd><p>angle in degrees to rotate tick labels; the default is 0.</p>
</dd>
<dt><code>rug</code></dt><dd><p>display a rug plot showing the marginal distribution of a numeric predictor; the default is <code>TRUE</code>.</p>
</dd>
</dl>

<p>The <code>y</code> list contains <code>lab</code>, <code>lim</code>, <code>ticks</code>, and <code>rotate</code> elements
(similar to those specified for individual predictors in the <code>x</code> list), along with the additional <code>type</code>, <code>transform</code>, and <code>style</code> elements:
</p>

<dl>
<dt><code>type</code></dt><dd><p>for plotting linear or generalized linear models, <code>"rescale"</code> (the default) plots the vertical
axis on the link scale (e.g., the logit scale for a logit model) but labels the axis on the response
scale (e.g., the probability scale for a logit model);
<code>"response"</code> plots and labels the vertical axis on the scale of the response (e.g., the probability scale for a logit model); and
<code>"link"</code> plots and labels the vertical axis on the scale of the link (e.g., the logit scale for a logit model).
For polytomous logit models, this element is either <code>"probability"</code> or <code>"logit"</code>, with the former as the default.</p>
</dd>
<dt><code>transform</code></dt><dd><p>primarily for linear or linear mixed models, this argument is used to apply an arbitrary transformation to the vertical axis.  For example, if fitting a linear model with response <code>log(y)</code>, then setting <code>transform=exp</code> would plot <code>exp(log(y)) = y</code> on the vertical axis.  If the response were <code>1/y</code>, then use <code>transform=function(yt) 1/yt</code>, since the reciprocal is its own inverse.  The <code>transform</code> argument can also be a list of two functions.  For example with a response <code>log(y)</code>, the specification <code>transform=list(trans=log, inverse=log), type="rescale"</code> will plot in log-scale, but will label tick marks in arithmetic scale; see the example below.  The specification <code>transform=list(trans=log, inverse=exp), type="response"</code> is equivalent to <code>transform=exp</code>.   When <code>type="response"</code> the <code>lab</code> argument will geneally be used to get a label for the axis that matches the untransformed response.  If this argument is used with a generalized linear model or another model with a non-identity link function, the function is applied to the linear predictor, and will probably not be of interest.</p>
</dd>
<dt><code>style</code></dt><dd><p>for polytomous logit models, this element can take on the value <code>"lines"</code>
(the default) or <code>"stacked"</code> for line plots or stacked-area plots, respectively.</p>
</dd>
</dl>

<p>Other elements:
</p>

<dl>
<dt><code>alternating</code></dt><dd><p>if <code>TRUE</code> (the default), the tick labels alternate by panels in
multi-panel displays from left to right and top to bottom; if <code>FALSE</code>, tick labels
appear at the bottom and on the left.</p>
</dd>
<dt><code>grid</code></dt><dd><p>if <code>TRUE</code> (the default is <code>FALSE</code>), add grid lines to the plot.</p>
</dd>
</dl>

</dd>
<dt><code>confint</code></dt><dd><p>specifications to add/remove confidence intervals or regions from a plot, and to set the nominal confidence level.
</p>

<dl>
<dt><code>style</code></dt><dd><p>one of <code>"auto"</code>, <code>"bars"</code>, <code>"lines"</code>, <code>"bands"</code>, and <code>"none"</code>; the default
is <code>"bars"</code> for factors, <code>"bands"</code> for numeric predictors, and <code>"none"</code> for multiline plots; <code>"auto"</code> also produces <code>"bars"</code> for factors
and <code>"bands"</code> for numeric predictors, even in multiline plots.</p>
</dd>
<dt><code>alpha</code></dt><dd><p>transparency of confidence bands; the default is 0.15.</p>
</dd>
<dt><code>col</code></dt><dd><p>colors; the default is taken from the line colors.</p>
</dd>
</dl>

</dd>
<dt><code>partial.residuals</code></dt><dd><p>specifications concerning the addition of partial residuals to the plot.
</p>

<dl>
<dt><code>plot</code></dt><dd><p>display the partial residuals;
the default is <code>TRUE</code> if residuals are present in the <code>"eff"</code> object, <code>FALSE</code> otherwise.</p>
</dd>
<dt><code>fitted</code></dt><dd><p>show fitted values as well as residuals; the default is <code>FALSE</code>.</p>
</dd>
<dt><code>col</code></dt><dd><p>color for partial residuals; the default is the second line color.</p>
</dd>
<dt><code>pch</code></dt><dd><p>plotting symbols for partial residuals; the default is 1, a circle.</p>
</dd>
<dt><code>cex</code></dt><dd><p>size of symbols for partial residuals; the default is 1.</p>
</dd>
<dt><code>smooth</code></dt><dd><p>draw a loess smooth of the partial residuals; the default is <code>TRUE</code>.</p>
</dd>
<dt><code>span</code></dt><dd><p>span for the loess smooth; the default is 2/3.</p>
</dd>
<dt><code>smooth.col</code></dt><dd><p>color for the loess smooth; the default is the second line color.</p>
</dd>
<dt><code>lty</code></dt><dd><p>line type for the loess smooth; the default is the first line type, normally 1 (a solid line).</p>
</dd>
<dt><code>lwd</code></dt><dd><p>line width for the loess smooth; the default is the first line width, normally 2.</p>
</dd>
</dl>

</dd>
<dt><code>id</code></dt><dd><p>specifications for optional point identification when partial residuals are plotted.
</p>

<dl>
<dt><code>n</code></dt><dd><p>number of points to identify; default is <code>2</code> if <code>id=TRUE</code>
and <code>0</code> if <code>id=FALSE</code>. Points are selected based on the Mahalanobis
distances of the pairs of x-values and partial residuals from their centroid.</p>
</dd>
<dt><code>col</code></dt><dd><p>color for the point labels; default is the same as the color of the partial residuals.</p>
</dd>
<dt><code>cex</code></dt><dd><p>relative size of text for point labels; default is <code>0.75</code>.</p>
</dd>
<dt><code>labels</code></dt><dd><p>vector of point labels; the default is the names of the residual vector,
which is typically the row names of the data frame to which the model is fit.</p>
</dd>
</dl>

</dd>
<dt><code>lattice</code></dt><dd><p>the plots are drawn with the <span class="pkg"><a href="lattice.html#topic+lattice">lattice</a></span> package, generally by the <code><a href="lattice.html#topic+xyplot">xyplot</a></code> function.  These specifications are passed as arguments to the functions that actually draw the plots.
</p>

<dl>
<dt><code>layout</code></dt><dd><p>the <code>layout</code> argument to the <span class="pkg">lattice</span> function <code><a href="lattice.html#topic+xyplot">xyplot</a></code>
(or, in some cases <code><a href="lattice.html#topic+densityplot">densityplot</a></code>), which
is used to draw the effect display; if not specified, the plot will be formatted so that
it appears on a single page.</p>
</dd>
<dt><code>key.args</code></dt><dd><p>a key, or legend, is added to the plot if <code>multiline=TRUE</code>.  This argument is a list with components that determine the the placement and other characteristics of the key.  The default if not set by the user is <code>key.args = list(space="top", columns=2, border=FALSE, fontfamily="serif", cex.title=.80, cex=0.75)</code>.  If there are more than 6 groups in the plot, <code>columns</code> is set to 3. For stacked-area plots, the default is a one-column key.  In addition to the arguments shown explicitly below, any of the arguments listed in the <code><a href="lattice.html#topic+xyplot">xyplot</a></code> documentation in the <code>key</code> section can be used.
</p>

<dl>
<dt><code>space</code></dt><dd><p>determines the placement of the key outside the plotting area, with default <code>space="above"</code> for above the plot and below its title.  Setting <code>space="right"</code> uses space to the right of the plot for the key.</p>
</dd>
<dt><code>x, y, corner</code></dt><dd><p>used to put the key on the graph itself.  For example, <code>x=.05, y=.95, corner=c(0,1)</code> will locate the upper-left corner of the key at (.05, .95), thinking of the graph as a unit square.</p>
</dd>
<dt><code>columns</code></dt><dd><p>number of columns in the key.  If <code>space="top"</code>, columns should be 2, 3 or 4; if <code>space="right"</code>, set <code>columns=1</code>.</p>
</dd>
<dt><code>border</code></dt><dd><p>if <code>TRUE</code> draw a border around the key; omit the border if <code>FALSE</code>.</p>
</dd>
<dt><code>fontfamily</code></dt><dd><p>the default is <code>"sans"</code> for the sans-serif font used in the rest of the plot; the alternative is <code>"serif"</code> for a serif font.</p>
</dd>
<dt><code>cex, cex.title</code></dt><dd><p>the default relative size of the font for labels and the title, respectively.  To save space set these to be smaller than 1.</p>
</dd>
</dl>

</dd>
<dt><code>strip</code></dt><dd><p>a list with three elements: <code>factor.names</code>, which if <code>TRUE</code>, the default, shows conditioning
variable names in the panel headers;  <code>values</code>, which if <code>TRUE</code>, the default unless partial residuals are plotted,
displays conditioning variable values in the panel headers, and <code>cex</code>, the relative size of the text displayed in the strip.</p>
</dd>
<dt><code>array</code></dt><dd><p>a list with elements <code>row</code>, <code>col</code>, <code>nrow</code>, <code>ncol</code>, and <code>more</code>,
used to graph an effect as part of an array of plots; <code>row</code>, <code>col</code>, <code>nrow</code>, and <code>ncol</code> are used to compose
the <code>split</code> argument and <code>more</code> the <code>more</code> argument to <code><a href="lattice.html#topic+print.trellis">print.trellis</a></code>.
The <code>array</code> argument is automatically set by <code>plot.efflist</code> and will be ignored if used with that function.</p>
</dd>
</dl>

</dd>
</dl>



<h3>Value</h3>

<p>The <code>summary</code> method for <code>"eff"</code> objects returns a <code>"summary.eff"</code> object with the following components
(those pertaining to confidence limits need not be present):
</p>
<table role = "presentation">
<tr><td><code>header</code></td>
<td>
<p>a character string to label the effect.</p>
</td></tr>
<tr><td><code>effect</code></td>
<td>
<p>an array containing the estimated effect.</p>
</td></tr>
<tr><td><code>lower.header</code></td>
<td>
<p>a character string to label the lower confidence limits.</p>
</td></tr>
<tr><td><code>lower</code></td>
<td>
<p>an array containing the lower confidence limits.</p>
</td></tr>
<tr><td><code>upper.header</code></td>
<td>
<p>a character string to label the upper confidence limits.</p>
</td></tr>
<tr><td><code>upper</code></td>
<td>
<p>an array containing the upper confidence limits.</p>
</td></tr>
</table>
<p>The <code>plot</code> method for <code>"eff"</code> objects returns a <code>"plot.eff"</code> object (an enhanced <code>"trellis"</code> object); the provided
<code><a href="base.html#topic+print">print</a></code> method plots the object.
</p>
<p>The <code>[</code> method for <code>"efflist"</code> objects is used to subset an <code>"efflist"</code> object and returns an object of the same class.
</p>


<h3>Author(s)</h3>

<p>John Fox <a href="mailto:jfox@mcmaster.ca">jfox@mcmaster.ca</a> and Jangman Hong.</p>


<h3>See Also</h3>

<p><code><a href="#topic+LegacyArguments">LegacyArguments</a></code>, <code><a href="#topic+effect">effect</a></code>, <code><a href="#topic+allEffects">allEffects</a></code>, <code><a href="#topic+effectsTheme">effectsTheme</a></code>,
<code><a href="lattice.html#topic+xyplot">xyplot</a></code>, <code><a href="lattice.html#topic+densityplot">densityplot</a></code>, <code><a href="lattice.html#topic+print.trellis">print.trellis</a></code>, <code><a href="stats.html#topic+loess">loess</a></code>,
<code>sequential_hcl</code>,
and the <a href="../doc/predictor-effects-gallery.pdf">Predictor Effects Graphics Gallery</a> and <a href="../doc/partial-residuals.pdf">Effect Displays with Partial Residuals</a> vignettes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># also see examples in ?effect

# plot predictorEffects
mod &lt;- lm(prestige ~ education + log(income)*type + women, Prestige)
plot(predictorEffects(mod, ~ income), axes=list(grid=TRUE))
plot(predictorEffects(mod, ~ income), lines=list(multiline=TRUE),
                                                 axes=list(grid=TRUE))
plot(predictorEffects(mod, ~ type), lines=list(multiline=TRUE),
                                                 axes=list(grid=TRUE),
                                                 confint=list(style="bars"))

mod.cowles &lt;- glm(volunteer ~ sex + neuroticism*extraversion,
                  data=Cowles, family=binomial)
eff.cowles &lt;- allEffects(mod.cowles, xlevels=list(extraversion=seq(0, 24, 6)))
eff.cowles
as.data.frame(eff.cowles[[2]]) # neuroticism*extraversion interaction

plot(eff.cowles, 'sex', axes=list(grid=TRUE,
                                  y=list(lab="Prob(Volunteer)"),
                                  x=list(rotate=90)),
                        lines=list(lty=0))

plot(eff.cowles, 'neuroticism:extraversion',
     axes=list(y=list(lab="Prob(Volunteer)",
        ticks=list(at=c(.1,.25,.5,.75,.9)))))

plot(Effect(c("neuroticism", "extraversion"), mod.cowles,
            se=list(type="Scheffe"),
            xlevels=list(extraversion=seq(0, 24, 6))),
     axes=list(y=list(lab="Prob(Volunteer)",
        ticks=list(at=c(.1,.25,.5,.75,.9)))))


    # change color of the confidence bands to 'black' with .15 transparency
plot(eff.cowles, 'neuroticism:extraversion',
     axes=list(y=list(lab="Prob(Volunteer)",
                      ticks=list(at=c(.1,.25,.5,.75,.9)))),
     confint=list(col="red", alpha=.3))

plot(eff.cowles, 'neuroticism:extraversion',
     lines=list(multiline=TRUE),
     axes=list(y=list(lab="Prob(Volunteer)")),
     lattice=list(key.args = list(x = 0.65, y = 0.99, corner = c(0, 1))))

# use probability scale in place of logit scale, all lines are black.
plot(eff.cowles, 'neuroticism:extraversion',
     lines=list(multiline=TRUE, lty=1:8, col="black"),
     axes=list(y=list(type="response", lab="Prob(Volunteer)")),
     lattice=list(key.args = list(x = 0.65, y = 0.99, corner = c(0, 1))),
     confint=list(style="bands"))

plot(effect('sex:neuroticism:extraversion', mod.cowles,
            xlevels=list(extraversion=seq(0, 24, 6))),
     lines=list(multiline=TRUE))

plot(effect('sex:neuroticism:extraversion', mod.cowles,
            xlevels=list(extraversion=seq(0, 24, 6))),
     lines=list(multiline=TRUE),
     axes=list(y=list(type="response")),
     confint=list(style="bands"),
     lattice=list(key.args = list(x=0.75, y=0.75, corner=c(0, 0))))


if (require(nnet)){
    mod.beps &lt;- multinom(vote ~ age + gender + economic.cond.national +
                             economic.cond.household + Blair + Hague + Kennedy +
                             Europe*political.knowledge, data=BEPS)
    
    plot(effect("Europe*political.knowledge", mod.beps,
                xlevels=list(political.knowledge=0:3)))
    

    plot(effect("Europe*political.knowledge", mod.beps,
                xlevels=list(political.knowledge=0:3),
                fixed.predictors=list(given.values=c(gendermale=0.5))),
         axes=list(y=list(style="stacked"), x=list(rug=FALSE), grid=TRUE),
         lines=list(col=c("blue", "red", "orange")))
}

if (require(MASS)){
    mod.wvs &lt;- polr(poverty ~ gender + religion + degree + country*poly(age,3),
                    data=WVS)
    plot(effect("country*poly(age, 3)", mod.wvs))

    
    plot(effect("country*poly(age, 3)", mod.wvs), lines=list(multiline=TRUE))
    plot(effect("country*poly(age, 3)", mod.wvs),
         axes=list(y=list(style="stacked")),
         lines=list(col=c("gray75", "gray50", "gray25")))

    plot(effect("country*poly(age, 3)", latent=TRUE, mod.wvs))
    
}

mod.pres &lt;- lm(prestige ~ log(income, 10) + poly(education, 3) + poly(women, 2),
               data=Prestige)
eff.pres &lt;- allEffects(mod.pres)

plot(eff.pres)
plot(eff.pres[1:2])

plot(eff.pres[1],
     axes=list(x=list(income=list(transform=list(
         trans=log10, inverse=function(x) 10^x),
         ticks=list(at=c(1000, 2000, 5000, 10000, 20000))))))
         
mod &lt;- lm(log(prestige) ~ income:type + education, data=Prestige)
p1 &lt;- predictorEffects(mod, ~ income)
# log-scale for response
plot(p1, lines=list(multiline=TRUE)) 
# log-scale, with arithmetic tick marks
plot(p1, lines=list(multiline=TRUE), 
     axes=list(y=list(transform=list(trans=log, inverse = exp), 
                      lab="prestige", type="rescale")))
# arithmetic scale and tick marks, with other arguments
plot(p1, lines=list(multiline=TRUE), grid=TRUE,
     lattice=list(key.args=list(space="right", border=TRUE)),
     axes=list(y=list(transform=exp, lab="prestige")))
</code></pre>

<hr>
<h2 id='predictorEffects'>
Functions For Computing Predictor Effects
</h2><span id='topic+predictorEffect'></span><span id='topic+predictorEffect.poLCA'></span><span id='topic+predictorEffect.svyglm'></span><span id='topic+predictorEffect.default'></span><span id='topic+predictorEffects'></span><span id='topic+predictorEffects.poLCA'></span><span id='topic+predictorEffects.default'></span>

<h3>Description</h3>

<p>Alternatives to the <code>Effect</code> and <code>allEffects</code> functions that use a different paradigm for conditioning in an effect display.  The user specifies one predictor, either numeric or a factor (where character and logical variables are treated as factors), for the horizontal axis of a plot, and the function determines the appropriate plot to display (which is drawn by <code>plot</code>). See the vignette <a href="../doc/predictor-effects-gallery.pdf">Predictor Effects Graphics Gallery</a> for details and examples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predictorEffect(predictor, mod, focal.levels=50, xlevels=5, ...)

## S3 method for class 'poLCA'
predictorEffect(predictor, mod, focal.levels=50, 
    xlevels=5, ...)

## S3 method for class 'svyglm'
predictorEffect(predictor, mod, focal.levels=50, 
    xlevels=5, ...)

## Default S3 method:
predictorEffect(predictor, mod, focal.levels=50, 
    xlevels=5, ..., sources)

predictorEffects(mod, predictors, focal.levels=50, xlevels=5, ...)

## S3 method for class 'poLCA'
predictorEffects(mod, predictors = ~ ., 
    focal.levels=50, xlevels=5, ...)

## Default S3 method:
predictorEffects(mod, predictors = ~ .,
    focal.levels=50, xlevels=5,  ..., sources)

</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predictorEffects_+3A_mod">mod</code></td>
<td>
<p>A model object.  Supported models include all those described on the help page for <code><a href="#topic+Effect">Effect</a></code>.</p>
</td></tr>
<tr><td><code id="predictorEffects_+3A_predictor">predictor</code></td>
<td>
<p>quoted name of the focal predictor.</p>
</td></tr>
<tr><td><code id="predictorEffects_+3A_predictors">predictors</code></td>
<td>
<p>If the default, <code>~ .</code>, a predictor effect plot is drawn for each predictor (not regressor) in a model.  Otherwise, this is a one-sided formula specifying the first-order predictors for which predictor effect plots are to be drawn.
</p>
</td></tr>
<tr><td><code id="predictorEffects_+3A_focal.levels">focal.levels</code></td>
<td>
<p>for <code>predictorEffect</code>, the number of evenly-spaced values (the default is 50) for the numeric focal predictor or a vector of values for the focal predictor. 
</p>
<p>For <code>predictorEffects</code>, the number of evenly-spaced values (default 50) to use for each numeric focal predictor in turn, or a named list, similar to <code>xlevels</code>, giving the number of values or the values themselves for each predictor individually, to be used when that predictor is the focal predictor; if a numeric focal predictor doesn't appear in the list, the default of 50 values is used.</p>
</td></tr>
<tr><td><code id="predictorEffects_+3A_xlevels">xlevels</code></td>
<td>
<p>this argument is used to set the levels of conditioning predictors; it may either be a single number specifying the number of evenly-spaced values (the default is 5) to which each conditioning predictor is to be set,  or it may be a list with elements named for the predictors giving the number of values or a vector of values to which each conditioning predictor is to be set, as explained in the help for <code><a href="#topic+Effect">Effect</a></code>. 
</p>
<p>If the focal predictor is included in the <code>xlevels</code> list, it is disregarded; if any conditioning predictor is omitted from the list, its number of values is set to 5. 
</p>
<p>The default behavior of <code>xlevels</code> is different when <code>residuals=TRUE</code>; in that case, it behaves as in <code><a href="#topic+Effect.lm">Effect.lm</a></code>, and is effectively set by default to the 0.2, 0.4, 0.6, and 0.8 quantiles of conditioning predictors.
</p>
<p>The <code>xlevels</code> argument works similarly for <code>predictorEffect</code> and <code>predictorEffects</code>.</p>
</td></tr>
<tr><td><code id="predictorEffects_+3A_...">...</code></td>
<td>

<p>Additional arguments passed to <code><a href="#topic+Effect">Effect</a></code>.</p>
</td></tr>
<tr><td><code id="predictorEffects_+3A_sources">sources</code></td>
<td>
<p>Provides a mechanism for applying <code>predictorEffect</code> methods to a variety of regression models; see the vignette <a href="../doc/methods-supported-by-effects.pdf">Regression Models Supported by the effects Package</a> for an explanation.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Effect plots view a fitted regression function E(Y|X) in (sequences of) two-dimensional plots using conditioning and slicing.  The functions described here use a different method of determining the conditioning and slicing than <code>allEffects</code> uses.  The predictor effect of a focal predictor, say <code>x1</code>, is the  usual effect for the generalized interaction of <code>x1</code> with all the other predictors in a model.  When a predictor effect object is plotted, the focal predictor is by default plotted on the horizontal axis.
</p>
<p>For example, in the model <code>mod</code> with formula <code>y ~ x1 + x2 + x3</code>, the predictor effect <code>p1 &lt;- predictorEffects(mod, ~ x1)</code> is essentially equilavent to <code>p2 &lt;- Effect("x1", mod)</code>.  When plotted, these objects may produce different graphs because <code>plot(p1)</code> will always put <code>x1</code> on the horizontal axis, while <code>plot(p2)</code> uses a rule to determine the horizontal axis based on the characteristics of all the predictors, e.g., preferring numeric predictors over factors.
</p>
<p>If <code>mod</code> has the formula <code>y ~ x1 + x2 + x3 + x1:x2</code>, then <code>p1 &lt;- predictorEffects(mod, ~ x1)</code> is essentially equivalent to <code>p2 &lt;- Effect(c("x1", "x2"), mod)</code>.  As in the last example, the plotted versions of these objects may differ because of different rules used to determine the predictor on the horizontal axis.
</p>
<p>If <code>mod</code> has the formula <code>y ~ x1 + x2 + x3 + x1:x2 + x1:x3</code>, then <code>p1 &lt;- predictorEffects(mod, ~ x1)</code> is essentially equilavent to <code>p2 &lt;- Effect(c("x1", "x2", "x3"), mod)</code>.  Again, the plotted versions of these objects may differ because of the rules used to determine the horizontal axis.
</p>


<h3>Value</h3>

<p><code>predictorEffect</code> returns an object of class <code>c("predictoreff", "eff")</code>.  The components of the object are described in the help for <code><a href="#topic+Effect">Effect</a></code>; <code>predictorEffects</code> returns an object of class <code>"predictorefflist"</code>, which is a list whose elements are of class <code>c("predictoreff", "eff")</code>.
</p>


<h3>Author(s)</h3>

<p>S. Weisberg <a href="mailto:sandy@umn.edu">sandy@umn.edu</a> and J. Fox
</p>


<h3>References</h3>

<p>See <code><a href="#topic+Effect">Effect</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Effect">Effect</a></code>, <code><a href="#topic+plot.predictoreff">plot.predictoreff</a></code>, the <a href="../doc/predictor-effects-gallery.pdf">Predictor Effects Graphics Gallery</a> vignette, and the <a href="../doc/partial-residuals.pdf">Effect Displays with Partial Residuals</a> vignette.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mod &lt;- lm(prestige ~ type*(education + income) + women, Prestige)
plot(predictorEffect("income", mod))
plot(predictorEffects(mod, ~ education + income + women))

mod.cowles &lt;- glm(volunteer ~ sex + neuroticism*extraversion, data=Cowles, family=binomial)
plot(predictorEffects(mod.cowles, xlevels=4))
plot(predictorEffect("neuroticism", mod.cowles, xlevels=list(extraversion=seq(5, 20, by=5))),
     axes=list(grid=TRUE,
               x=list(rug=FALSE),
               y=list(lab="Probability of Vounteering")),
     lines=list(multiline=TRUE), 
     type="response")
predictorEffects(mod.cowles, focal.levels=4, xlevels=4)

# svyglm() example (adapting an example from the survey package)

if (require(survey)){
  data(api)
  dstrat&lt;-svydesign(id=~1, strata=~stype, weights=~pw,
    data=apistrat, fpc=~fpc)
  mod &lt;- svyglm(sch.wide ~ ell + meals + mobility, design=dstrat,
    family=quasibinomial())
  plot(predictorEffects(mod),
    axes=list(y=list(lim=log(c(0.4, 0.99)/c(0.6, 0.01)),
      ticks=list(at=c(0.4, 0.75, 0.9, 0.95, 0.99)))))
}

</code></pre>

<hr>
<h2 id='summary.eff'>Summarizing and Printing Effects</h2><span id='topic+print.eff'></span><span id='topic+print.effpoly'></span><span id='topic+print.efflatent'></span><span id='topic+print.efflist'></span><span id='topic+print.mlm.efflist'></span><span id='topic+print.summary.eff'></span><span id='topic+summary.eff'></span><span id='topic+summary.effpoly'></span><span id='topic+summary.efflatent'></span><span id='topic+summary.efflist'></span><span id='topic+summary.mlm.efflist'></span><span id='topic+as.data.frame.eff'></span><span id='topic+as.data.frame.effpoly'></span><span id='topic+as.data.frame.efflatent'></span><span id='topic+as.data.frame.efflist'></span><span id='topic+vcov.eff'></span>

<h3>Description</h3>

<p><code>summary</code>, <code>print</code>, and <code>as.data.frame</code> methods for objects created using the effects package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'eff'
print(x, type=c("response", "link"), ...)
## S3 method for class 'effpoly'
print(x, type=c("probability", "logits"), ...)
## S3 method for class 'efflatent'
print(x, ...)
## S3 method for class 'efflist'
print(x, ...)
## S3 method for class 'mlm.efflist'
print(x, ...)
## S3 method for class 'summary.eff'
print(x, ...)
## S3 method for class 'eff'
summary(object, type=c("response", "link"), ...)
## S3 method for class 'effpoly'
summary(object, type=c("probability", "logits"), ...)
## S3 method for class 'efflatent'
summary(object, ...)
## S3 method for class 'efflist'
summary(object, ...)
## S3 method for class 'mlm.efflist'
summary(object, ...)
## S3 method for class 'eff'
as.data.frame(x, row.names=NULL, optional=TRUE, 
        type=c("response", "link"), ...)
## S3 method for class 'efflist'
as.data.frame(x, row.names=NULL, optional=TRUE, type, ...)
## S3 method for class 'effpoly'
as.data.frame(x, row.names=NULL, optional=TRUE, ...)
## S3 method for class 'efflatent'
as.data.frame(x, row.names=NULL, optional=TRUE, ...)
## S3 method for class 'eff'
vcov(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.eff_+3A_x">x</code>, <code id="summary.eff_+3A_object">object</code></td>
<td>
<p>an object consisting of fitted values and other information needed to draw effects plots that is produced by functions in the <code>effects</code> package.</p>
</td></tr>
<tr><td><code id="summary.eff_+3A_type">type</code></td>
<td>
<p>fitted values are by default printed by these functions in the <code>"response"</code> scale.  For models with a link function like a GLM, fitted values in the linear predictor scale are obtained by setting <code>type="link"</code>.  For polytomous response models setting <code>type="logits"</code> returns fitted values in the logit scale.</p>
</td></tr>
<tr><td><code id="summary.eff_+3A_row.names">row.names</code>, <code id="summary.eff_+3A_optional">optional</code></td>
<td>
<p>arguments to <code>as.data.frame</code> not used by these methods.</p>
</td></tr>
<tr><td><code id="summary.eff_+3A_...">...</code></td>
<td>
<p>other arguments passed on</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The <code>print</code> methods return the fitted values in tables.  The <code>summary</code> methods return the fitted values and 95 percent condifence intervals, also in tables.  The <code>as.data.frame</code> method returns fitted values, standard errors, and 95 percent confidence intervals as a data frame, or as a list of data frames for the <code>efflist</code> method.  The <code>vcov</code> method returns the covariance matrix of the fitted values.
</p>


<h3>Author(s)</h3>

<p>John Fox <a href="mailto:jfox@mcmaster.ca">jfox@mcmaster.ca</a> and Jangman Hong.</p>


<h3>Examples</h3>

<pre><code class='language-R'>
mod.cowles &lt;- glm(volunteer ~ sex + neuroticism*extraversion,
                  data=Cowles, family=binomial)
eff.cowles &lt;- predictorEffects(mod.cowles)
print(eff.cowles)
print(eff.cowles[["neuroticism"]], type="link")
summary(eff.cowles[["neuroticism"]], type="link")
as.data.frame(eff.cowles)
# covariance matrix of fitted values in linear predictor scale
vcov(eff.cowles[[1]]) 
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
