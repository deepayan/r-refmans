<!DOCTYPE html><html><head><title>Help for package materialmodifier</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {materialmodifier}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#cimg2nimg'><p>cimg to nimg conversion</p></a></li>
<li><a href='#face'><p>A face image.</p></a></li>
<li><a href='#get_BS_energy'><p>Calculate the BS feature energy</p></a></li>
<li><a href='#gf_decompose'><p>Scale-space decomposition by the guided filter</p></a></li>
<li><a href='#gf_decompose_parts'><p>Scale-space decomposition</p></a></li>
<li><a href='#gf_decompose_scale'><p>Scale-space decomposition by the guided filter</p></a></li>
<li><a href='#gf_reconstruct'><p>Reconstruct the original image from decomposed data</p></a></li>
<li><a href='#im_load'><p>Load image from file or URL</p></a></li>
<li><a href='#im_save'><p>Save an image to disk</p></a></li>
<li><a href='#modif'><p>Apply material editing effect</p></a></li>
<li><a href='#modif_dim'><p>Check the scale information of an image</p></a></li>
<li><a href='#modif2'><p>Apply material editing effect (For advanced users)</p></a></li>
<li><a href='#nimg2cimg'><p>nimg to cimg conversion</p></a></li>
<li><a href='#plot.nimg'><p>Display an image</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Apply Photo Editing Effects</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.0</td>
</tr>
<tr>
<td>Description:</td>
<td>You can apply image processing effects that modifies the perceived material properties of objects
    in photos, such as gloss, smoothness, and blemishes. This is an implementation of the algorithm proposed by
    Boyadzhiev et al. (2015) "Band-Sifting Decomposition for Image Based Material Editing".
    Documentation and practical tips of the package is available at <a href="https://github.com/tsuda16k/materialmodifier">https://github.com/tsuda16k/materialmodifier</a>.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/tsuda16k/materialmodifier">https://github.com/tsuda16k/materialmodifier</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/tsuda16k/materialmodifier/issues/">https://github.com/tsuda16k/materialmodifier/issues/</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>jpeg, magrittr, methods, png, readbitmap, stringr, downloader,
imager, moments</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-05-19 06:54:45 UTC; tsuda</td>
</tr>
<tr>
<td>Author:</td>
<td>Hiroyuki Tsuda <a href="https://orcid.org/0000-0001-9396-5327"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Hiroyuki Tsuda &lt;tsuda16k@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-05-19 07:10:08 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='cimg2nimg'>cimg to nimg conversion</h2><span id='topic+cimg2nimg'></span>

<h3>Description</h3>

<p>cimg to nimg conversion
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cimg2nimg(im)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cimg2nimg_+3A_im">im</code></td>
<td>
<p>a cimg object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an nimg object
</p>

<hr>
<h2 id='face'>A face image.</h2><span id='topic+face'></span>

<h3>Description</h3>

<p>A photograph obtained from a free stock photos site.
pexels.com/photo/fashion-woman-cute-shoes-5704849/
</p>


<h3>Usage</h3>

<pre><code class='language-R'>face
</code></pre>


<h3>Format</h3>

<p>An array with 500 x 500 x 3 dimensions.
Each dimension represents y-coordinate, x-coordinate, and color channel.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plot(face)
</code></pre>

<hr>
<h2 id='get_BS_energy'>Calculate the BS feature energy</h2><span id='topic+get_BS_energy'></span>

<h3>Description</h3>

<p>Calculate the BS feature energy
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_BS_energy(im, mask = NA, logspace = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_BS_energy_+3A_im">im</code></td>
<td>
<p>An image.</p>
</td></tr>
<tr><td><code id="get_BS_energy_+3A_mask">mask</code></td>
<td>
<p>(optional) If set, only the area of white pixels in the mask image will be included in the calculation.</p>
</td></tr>
<tr><td><code id="get_BS_energy_+3A_logspace">logspace</code></td>
<td>
<p>If TRUE (default), image processing is done in the log space. If FALSE,
computation is performed without log transformation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data = get_BS_energy(face)

## End(Not run)
</code></pre>

<hr>
<h2 id='gf_decompose'>Scale-space decomposition by the guided filter</h2><span id='topic+gf_decompose'></span>

<h3>Description</h3>

<p>Scale-space decomposition by the guided filter
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gf_decompose(
  im,
  mask = NA,
  log_epsilon = 1e-04,
  filter_epsilon = 0.01,
  logspace = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gf_decompose_+3A_im">im</code></td>
<td>
<p>an image</p>
</td></tr>
<tr><td><code id="gf_decompose_+3A_mask">mask</code></td>
<td>
<p>If set, only the area of white pixels in the mask image will be edited.</p>
</td></tr>
<tr><td><code id="gf_decompose_+3A_log_epsilon">log_epsilon</code></td>
<td>
<p>offset for log transformation</p>
</td></tr>
<tr><td><code id="gf_decompose_+3A_filter_epsilon">filter_epsilon</code></td>
<td>
<p>epsilon parameter</p>
</td></tr>
<tr><td><code id="gf_decompose_+3A_logspace">logspace</code></td>
<td>
<p>If TRUE (default), image processing is done in the log space. If FALSE,
computation is performed without log transformation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of images
</p>

<hr>
<h2 id='gf_decompose_parts'>Scale-space decomposition</h2><span id='topic+gf_decompose_parts'></span>

<h3>Description</h3>

<p>Scale-space decomposition
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gf_decompose_parts(dec, mask = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gf_decompose_parts_+3A_dec">dec</code></td>
<td>
<p>output of gf_decompose_scale function</p>
</td></tr>
<tr><td><code id="gf_decompose_parts_+3A_mask">mask</code></td>
<td>
<p>If set, only the area of white pixels in the mask image will be edited.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of images
</p>

<hr>
<h2 id='gf_decompose_scale'>Scale-space decomposition by the guided filter</h2><span id='topic+gf_decompose_scale'></span>

<h3>Description</h3>

<p>Scale-space decomposition by the guided filter
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gf_decompose_scale(
  im,
  depth = NULL,
  log_epsilon = 1e-04,
  filter_epsilon = 0.01,
  logspace = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gf_decompose_scale_+3A_im">im</code></td>
<td>
<p>a grayscale image</p>
</td></tr>
<tr><td><code id="gf_decompose_scale_+3A_depth">depth</code></td>
<td>
<p>scale depth</p>
</td></tr>
<tr><td><code id="gf_decompose_scale_+3A_log_epsilon">log_epsilon</code></td>
<td>
<p>offset for log transformation</p>
</td></tr>
<tr><td><code id="gf_decompose_scale_+3A_filter_epsilon">filter_epsilon</code></td>
<td>
<p>epsilon parameter</p>
</td></tr>
<tr><td><code id="gf_decompose_scale_+3A_logspace">logspace</code></td>
<td>
<p>If TRUE (default), image processing is done in the log space. If FALSE,
computation is performed without log transformation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of images
</p>

<hr>
<h2 id='gf_reconstruct'>Reconstruct the original image from decomposed data</h2><span id='topic+gf_reconstruct'></span>

<h3>Description</h3>

<p>Reconstruct the original image from decomposed data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gf_reconstruct(dec, scales, ind, include.residual = TRUE, logspace = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gf_reconstruct_+3A_dec">dec</code></td>
<td>
<p>decomposed data</p>
</td></tr>
<tr><td><code id="gf_reconstruct_+3A_scales">scales</code></td>
<td>
<p>which spatial scales to use for reconstruction</p>
</td></tr>
<tr><td><code id="gf_reconstruct_+3A_ind">ind</code></td>
<td>
<p>a numeric vector</p>
</td></tr>
<tr><td><code id="gf_reconstruct_+3A_include.residual">include.residual</code></td>
<td>
<p>either TRUE (default) or FALSE</p>
</td></tr>
<tr><td><code id="gf_reconstruct_+3A_logspace">logspace</code></td>
<td>
<p>If TRUE (default), image processing is done in the log space. If FALSE,
computation is performed without log transformation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an image
</p>

<hr>
<h2 id='im_load'>Load image from file or URL</h2><span id='topic+im_load'></span>

<h3>Description</h3>

<p>Load image from file or URL
</p>


<h3>Usage</h3>

<pre><code class='language-R'>im_load(file, name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="im_load_+3A_file">file</code></td>
<td>
<p>path to file or URL</p>
</td></tr>
<tr><td><code id="im_load_+3A_name">name</code></td>
<td>
<p>a string for name attribute. if missing, inferred from the file argument.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an array of image data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# load an image from disk
im = im_load("path/to/your/image.jpg")
plot(im)

## End(Not run)
# load an image from URL
im = im_load("http://placehold.jp/150x150.png")
</code></pre>

<hr>
<h2 id='im_save'>Save an image to disk</h2><span id='topic+im_save'></span>

<h3>Description</h3>

<p>Save an image to disk
</p>


<h3>Usage</h3>

<pre><code class='language-R'>im_save(im, name, path, format = "png", quality = 0.95)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="im_save_+3A_im">im</code></td>
<td>
<p>An image.</p>
</td></tr>
<tr><td><code id="im_save_+3A_name">name</code></td>
<td>
<p>Name of the image file.</p>
</td></tr>
<tr><td><code id="im_save_+3A_path">path</code></td>
<td>
<p>The image is saved in this directory. For example, path = getwd()</p>
</td></tr>
<tr><td><code id="im_save_+3A_format">format</code></td>
<td>
<p>Image format. Either &quot;jpg&quot;, &quot;png&quot;, &quot;tiff&quot;, or &quot;bmp&quot;. Default is &quot;png&quot;.</p>
</td></tr>
<tr><td><code id="im_save_+3A_quality">quality</code></td>
<td>
<p>(jpg only) default is 0.95. Higher quality means less compression.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# face.png is saved to a path (if a path is specified)
im_save( face, path = "yourpath" )
# img.png is saved to a path (if a path is specified)
im_save( face, name = "img", path = "yourpath" )
# myimage.jpg is saved to a path (if a path is specified)
im_save( face, name = "myimage", path = "yourpath", format = "jpg" )

## End(Not run)
</code></pre>

<hr>
<h2 id='modif'>Apply material editing effect</h2><span id='topic+modif'></span>

<h3>Description</h3>

<p>This function is the core function of this package. It edits the input image by specifying
the name of the editing effect (BS feature or its alias) and the strength parameter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modif(
  im,
  effect,
  strength,
  mask = NA,
  max_size = 1280,
  log_epsilon = 1e-04,
  filter_epsilon = 0.01,
  logspace = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modif_+3A_im">im</code></td>
<td>
<p>An input image.</p>
</td></tr>
<tr><td><code id="modif_+3A_effect">effect</code></td>
<td>
<p>A string naming the effect to apply. Either &quot;gloss&quot;, &quot;shine&quot;, &quot;spots&quot;, &quot;blemish&quot;, &quot;rough&quot;,
&quot;stain&quot;, &quot;shadow&quot;, or &quot;aging&quot;.</p>
</td></tr>
<tr><td><code id="modif_+3A_strength">strength</code></td>
<td>
<p>A numeric, which controls the strength of the effect. Strength values between 0 and 1 will
reduce a feature, while strength values larger than 1 will boost a feature. A strength value of 1 does nothing.
Negative values are allowed, which will invert a feature.</p>
</td></tr>
<tr><td><code id="modif_+3A_mask">mask</code></td>
<td>
<p>If set, only the area of white pixels in the mask image will be edited.</p>
</td></tr>
<tr><td><code id="modif_+3A_max_size">max_size</code></td>
<td>
<p>If the shorter side of the input image is larger than this value (the default is 1280),
input image is resized before applying effects. Because the modif() function is very slow for large-resolution
images, it is useful to limit the image resolution to speed-up the image processing.
If you do not want to change the resolution of the input image, you can enter a large value for max_size,
or set max_size = NA</p>
</td></tr>
<tr><td><code id="modif_+3A_log_epsilon">log_epsilon</code></td>
<td>
<p>Offset for log transformation (default is 0.0001).
Need not to change this value in most cases.</p>
</td></tr>
<tr><td><code id="modif_+3A_filter_epsilon">filter_epsilon</code></td>
<td>
<p>Epsilon parameter of the Guided filter (default is 0.01).
Need not to change this value in most cases.</p>
</td></tr>
<tr><td><code id="modif_+3A_logspace">logspace</code></td>
<td>
<p>If TRUE (default), image processing is done in the log space. If FALSE,
computation is performed without log transformation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an output image
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
plot(modif(face, effect = "shine", strength = 2.5)) # Apply the "shine" effect (make objects shiny)
plot(modif(face, effect = "shine", strength = 0.2)) # Less shiny effect with a parameter less than 1
plot(modif(face, effect = c("shine", "stain"), strength = c(0.2, 3))) # Less shiny and more stain

</code></pre>

<hr>
<h2 id='modif_dim'>Check the scale information of an image</h2><span id='topic+modif_dim'></span>

<h3>Description</h3>

<p>Check the scale information of an image
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modif_dim(im)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modif_dim_+3A_im">im</code></td>
<td>
<p>An image.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of depth (number of scale subband images), indexes of high amplitude subbands,
and indexes of low amplitude subbands.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>modif_dim(face)
</code></pre>

<hr>
<h2 id='modif2'>Apply material editing effect (For advanced users)</h2><span id='topic+modif2'></span>

<h3>Description</h3>

<p>This function allows you to specify which image components to edit in more detail than
the modif function. Please refer to the information on the package's Github page for
detailed usage and theoretical background.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modif2(
  im,
  params,
  mask = NA,
  max_size = 1280,
  log_epsilon = 1e-04,
  filter_epsilon = 0.01,
  logspace = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modif2_+3A_im">im</code></td>
<td>
<p>An input image.</p>
</td></tr>
<tr><td><code id="modif2_+3A_params">params</code></td>
<td>
<p>A list of parameter values. Parameter names are freq, amp, sign, and strength.</p>
</td></tr>
<tr><td><code id="modif2_+3A_mask">mask</code></td>
<td>
<p>If set, only the area of white pixels in the mask image will be edited.</p>
</td></tr>
<tr><td><code id="modif2_+3A_max_size">max_size</code></td>
<td>
<p>If the shorter side of the input image is larger than this value (the default is 1280),
input image is resized. The modif function is very slow for large-resolution images.</p>
</td></tr>
<tr><td><code id="modif2_+3A_log_epsilon">log_epsilon</code></td>
<td>
<p>Offset for log transformation (default is 0.0001).
Need not to change this value in most cases.</p>
</td></tr>
<tr><td><code id="modif2_+3A_filter_epsilon">filter_epsilon</code></td>
<td>
<p>Epsilon parameter of the Guided filter (default is 0.01).
Need not to change this value in most cases.</p>
</td></tr>
<tr><td><code id="modif2_+3A_logspace">logspace</code></td>
<td>
<p>If TRUE (default), image processing is done in the log space. If FALSE,
computation is performed without log transformation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an output image
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# shine effect
shine = list(freq = "H", amp = "H", sign = "P", strength = 2)
plot(modif2(face, params = shine))

# shine effect (equivalent to the above)
shine2 = list(freq = 1:4, amp = "H", sign = "P", strength = 2)
plot(modif2(face, params = shine2))

# you can specify a feature name directly, instead of specifying freq/amp/sign separately
plot( modif2( face, params = list( feature = "HHA", strength = 2 ) ) )
plot( modif2( face, params = list( feature = "1HP", strength = 3 ) ) )

# apply multiple effects at the same time
blemish = list(feature = "HLA", strength = 0.1) # less blemish
smooth = list(feature = "HHN", strength = 0.2) # smoother
plot(modif2(face, params = list(blemish, smooth)))

</code></pre>

<hr>
<h2 id='nimg2cimg'>nimg to cimg conversion</h2><span id='topic+nimg2cimg'></span>

<h3>Description</h3>

<p>nimg to cimg conversion
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nimg2cimg(im)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nimg2cimg_+3A_im">im</code></td>
<td>
<p>an nimg object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a cimg object
</p>

<hr>
<h2 id='plot.nimg'>Display an image</h2><span id='topic+plot.nimg'></span>

<h3>Description</h3>

<p>Display an image
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'nimg'
plot(x, rescale = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.nimg_+3A_x">x</code></td>
<td>
<p>an image</p>
</td></tr>
<tr><td><code id="plot.nimg_+3A_rescale">rescale</code></td>
<td>
<p>logical. if true, then pixel value is rescaled to range between 0 and 1.</p>
</td></tr>
<tr><td><code id="plot.nimg_+3A_...">...</code></td>
<td>
<p>other parameters to be passed to plot.default</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plot(face)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
