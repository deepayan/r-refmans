<!DOCTYPE html><html><head><title>Help for package labeling</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {labeling}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#labeling-package'><p>Axis labeling</p></a></li>
<li><a href='#extended'><p>An Extension of Wilkinson's Algorithm for Position Tick Labels on Axes</p></a></li>
<li><a href='#extended.figures'><p>Generate figures from An Extension of Wilkinson's Algorithm for Position Tick Labels on Axes</p></a></li>
<li><a href='#gnuplot'><p>gnuplot's labeling algorithm</p></a></li>
<li><a href='#heckbert'><p>Heckbert's labeling algorithm</p></a></li>
<li><a href='#labeling-internal'><p>Internal labeling objects</p></a></li>
<li><a href='#matplotlib'><p>Matplotlib's labeling algorithm</p></a></li>
<li><a href='#nelder'><p>Nelder's labeling algorithm</p></a></li>
<li><a href='#rpretty'><p>R's pretty algorithm implemented in R</p></a></li>
<li><a href='#sparks'><p>Sparks' labeling algorithm</p></a></li>
<li><a href='#thayer'><p>Thayer and Storer's labeling algorithm</p></a></li>
<li><a href='#wilkinson'><p>Wilkinson's labeling algorithm</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Axis Labeling</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-08-29</td>
</tr>
<tr>
<td>Author:</td>
<td>Justin Talbot,</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Nuno Sempere &lt;nuno.semperelh@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions which provide a range of axis labeling algorithms. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE | Unlimited</td>
</tr>
<tr>
<td>Collate:</td>
<td>'labeling.R'</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, graphics</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-29 21:01:57 UTC; loki</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-29 22:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='labeling-package'>Axis labeling</h2><span id='topic+labeling'></span><span id='topic+labeling-package'></span>

<h3>Description</h3>

<p>Functions for positioning tick labels on axes
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;"> Package: </td><td style="text-align: left;"> labeling</td>
</tr>
<tr>
 <td style="text-align: left;"> Type: </td><td style="text-align: left;">
  Package</td>
</tr>
<tr>
 <td style="text-align: left;"> Version: </td><td style="text-align: left;"> 0.4.3</td>
</tr>
<tr>
 <td style="text-align: left;"> Date: </td><td style="text-align: left;"> 2023-08-29</td>
</tr>
<tr>
 <td style="text-align: left;">
  License: </td><td style="text-align: left;"> Unlimited</td>
</tr>
<tr>
 <td style="text-align: left;"> LazyLoad: </td><td style="text-align: left;"> yes</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>Implements a number of axis labeling schemes, including
those compared in An Extension of Wilkinson's Algorithm
for Positioning Tick Labels on Axes by Talbot, Lin, and
Hanrahan, InfoVis 2010.
</p>


<h3>Author(s)</h3>

<p>Justin Talbot <a href="mailto:justintalbot@gmail.com">justintalbot@gmail.com</a>
</p>


<h3>References</h3>

<p>Heckbert, P. S. (1990) Nice numbers for graph labels,
Graphics Gems I, Academic Press Professional, Inc.
Wilkinson, L. (2005) The Grammar of Graphics,
Springer-Verlag New York, Inc. Talbot, J., Lin, S.,
Hanrahan, P. (2010) An Extension of Wilkinson's Algorithm
for Positioning Tick Labels on Axes, InfoVis 2010.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+extended">extended</a></code>, <code><a href="#topic+wilkinson">wilkinson</a></code>,
<code><a href="#topic+heckbert">heckbert</a></code>, <code><a href="#topic+rpretty">rpretty</a></code>,
<code><a href="#topic+gnuplot">gnuplot</a></code>, <code><a href="#topic+matplotlib">matplotlib</a></code>,
<code><a href="#topic+nelder">nelder</a></code>, <code><a href="#topic+sparks">sparks</a></code>,
<code><a href="#topic+thayer">thayer</a></code>, <code><a href="base.html#topic+pretty">pretty</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>heckbert(8.1, 14.1, 4)	# 5 10 15
wilkinson(8.1, 14.1, 4)	# 8 9 10 11 12 13 14 15
extended(8.1, 14.1, 4)	# 8 10 12 14
# When plotting, extend the plot range to include the labeling
# Should probably have a helper function to make this easier
data(iris)
x &lt;- iris$Sepal.Width
y &lt;- iris$Sepal.Length
xl &lt;- extended(min(x), max(x), 6)
yl &lt;- extended(min(y), max(y), 6)
plot(x, y,
    xlim=c(min(x,xl),max(x,xl)),
    ylim=c(min(y,yl),max(y,yl)),
    axes=FALSE, main="Extended labeling")
axis(1, at=xl)
axis(2, at=yl)
</code></pre>

<hr>
<h2 id='extended'>An Extension of Wilkinson's Algorithm for Position Tick Labels on Axes</h2><span id='topic+extended'></span>

<h3>Description</h3>

<p><code>extended</code> is an enhanced version of Wilkinson's
optimization-based axis labeling approach. It is
described in detail in our paper. See the references.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  extended(dmin, dmax, m, Q = c(1, 5, 2, 2.5, 4, 3),
    only.loose = FALSE, w = c(0.25, 0.2, 0.5, 0.05))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extended_+3A_dmin">dmin</code></td>
<td>
<p>minimum of the data range</p>
</td></tr>
<tr><td><code id="extended_+3A_dmax">dmax</code></td>
<td>
<p>maximum of the data range</p>
</td></tr>
<tr><td><code id="extended_+3A_m">m</code></td>
<td>
<p>number of axis labels</p>
</td></tr>
<tr><td><code id="extended_+3A_q">Q</code></td>
<td>
<p>set of nice numbers</p>
</td></tr>
<tr><td><code id="extended_+3A_only.loose">only.loose</code></td>
<td>
<p>if true, the extreme labels will be
outside the data range</p>
</td></tr>
<tr><td><code id="extended_+3A_w">w</code></td>
<td>
<p>weights applied to the four optimization
components (simplicity, coverage, density, and
legibility)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of axis label locations
</p>


<h3>Author(s)</h3>

<p>Justin Talbot <a href="mailto:justintalbot@gmail.com">justintalbot@gmail.com</a>
</p>


<h3>References</h3>

<p>Talbot, J., Lin, S., Hanrahan, P. (2010) An Extension of
Wilkinson's Algorithm for Positioning Tick Labels on
Axes, InfoVis 2010.
</p>

<hr>
<h2 id='extended.figures'>Generate figures from An Extension of Wilkinson's Algorithm for Position Tick Labels on Axes</h2><span id='topic+extended.figures'></span>

<h3>Description</h3>

<p>Generates Figures 2 and 3 from our paper.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  extended.figures(samples = 100)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extended.figures_+3A_samples">samples</code></td>
<td>
<p>number of samples to use (in the paper we
used 10000, but that takes awhile to run).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>produces plots as a side effect
</p>


<h3>Author(s)</h3>

<p>Justin Talbot <a href="mailto:justintalbot@gmail.com">justintalbot@gmail.com</a>
</p>


<h3>References</h3>

<p>Talbot, J., Lin, S., Hanrahan, P. (2010) An Extension of
Wilkinson's Algorithm for Positioning Tick Labels on
Axes, InfoVis 2010.
</p>

<hr>
<h2 id='gnuplot'>gnuplot's labeling algorithm</h2><span id='topic+gnuplot'></span>

<h3>Description</h3>

<p>gnuplot's labeling algorithm
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  gnuplot(dmin, dmax, m)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gnuplot_+3A_dmin">dmin</code></td>
<td>
<p>minimum of the data range</p>
</td></tr>
<tr><td><code id="gnuplot_+3A_dmax">dmax</code></td>
<td>
<p>maximum of the data range</p>
</td></tr>
<tr><td><code id="gnuplot_+3A_m">m</code></td>
<td>
<p>number of axis labels</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of axis label locations
</p>


<h3>Author(s)</h3>

<p>Justin Talbot <a href="mailto:justintalbot@gmail.com">justintalbot@gmail.com</a>
</p>


<h3>References</h3>

<p><a href="http://www.gnuplot.info/">http://www.gnuplot.info/</a>
</p>

<hr>
<h2 id='heckbert'>Heckbert's labeling algorithm</h2><span id='topic+heckbert'></span>

<h3>Description</h3>

<p>Heckbert's labeling algorithm
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  heckbert(dmin, dmax, m)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="heckbert_+3A_dmin">dmin</code></td>
<td>
<p>minimum of the data range</p>
</td></tr>
<tr><td><code id="heckbert_+3A_dmax">dmax</code></td>
<td>
<p>maximum of the data range</p>
</td></tr>
<tr><td><code id="heckbert_+3A_m">m</code></td>
<td>
<p>number of axis labels</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of axis label locations
</p>


<h3>Author(s)</h3>

<p>Justin Talbot <a href="mailto:justintalbot@gmail.com">justintalbot@gmail.com</a>
</p>


<h3>References</h3>

<p>Heckbert, P. S. (1990) Nice numbers for graph labels,
Graphics Gems I, Academic Press Professional, Inc.
</p>

<hr>
<h2 id='labeling-internal'>Internal labeling objects</h2><span id='topic+.coverage'></span><span id='topic+.coverage.max'></span><span id='topic+.density'></span><span id='topic+.density.max'></span><span id='topic+.floored.mod'></span><span id='topic+.heckbert.nicenum'></span><span id='topic+.legibility'></span><span id='topic+.simplicity'></span><span id='topic+.simplicity.max'></span><span id='topic+.wilkinson.nice.scale'></span>

<h3>Description</h3>

<p>Internal labeling objects.</p>


<h3>Details</h3>

<p>These are not to be called by the user.</p>

<hr>
<h2 id='matplotlib'>Matplotlib's labeling algorithm</h2><span id='topic+matplotlib'></span>

<h3>Description</h3>

<p>Matplotlib's labeling algorithm
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  matplotlib(dmin, dmax, m)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="matplotlib_+3A_dmin">dmin</code></td>
<td>
<p>minimum of the data range</p>
</td></tr>
<tr><td><code id="matplotlib_+3A_dmax">dmax</code></td>
<td>
<p>maximum of the data range</p>
</td></tr>
<tr><td><code id="matplotlib_+3A_m">m</code></td>
<td>
<p>number of axis labels</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of axis label locations
</p>


<h3>Author(s)</h3>

<p>Justin Talbot <a href="mailto:justintalbot@gmail.com">justintalbot@gmail.com</a>
</p>


<h3>References</h3>

<p><a href="https://matplotlib.org/">https://matplotlib.org/</a>
</p>

<hr>
<h2 id='nelder'>Nelder's labeling algorithm</h2><span id='topic+nelder'></span>

<h3>Description</h3>

<p>Nelder's labeling algorithm
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  nelder(dmin, dmax, m,
    Q = c(1, 1.2, 1.6, 2, 2.5, 3, 4, 5, 6, 8, 10))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nelder_+3A_dmin">dmin</code></td>
<td>
<p>minimum of the data range</p>
</td></tr>
<tr><td><code id="nelder_+3A_dmax">dmax</code></td>
<td>
<p>maximum of the data range</p>
</td></tr>
<tr><td><code id="nelder_+3A_m">m</code></td>
<td>
<p>number of axis labels</p>
</td></tr>
<tr><td><code id="nelder_+3A_q">Q</code></td>
<td>
<p>set of nice numbers</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of axis label locations
</p>


<h3>Author(s)</h3>

<p>Justin Talbot <a href="mailto:justintalbot@gmail.com">justintalbot@gmail.com</a>
</p>


<h3>References</h3>

<p>Nelder, J. A. (1976) AS 96. A Simple Algorithm for
Scaling Graphs, Journal of the Royal Statistical Society.
Series C., pp. 94-96.
</p>

<hr>
<h2 id='rpretty'>R's pretty algorithm implemented in R</h2><span id='topic+rpretty'></span>

<h3>Description</h3>

<p>R's pretty algorithm implemented in R
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  rpretty(dmin, dmax, m = 6, n = floor(m) - 1,
    min.n = n%/%3, shrink.sml = 0.75, high.u.bias = 1.5,
    u5.bias = 0.5 + 1.5 * high.u.bias)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rpretty_+3A_dmin">dmin</code></td>
<td>
<p>minimum of the data range</p>
</td></tr>
<tr><td><code id="rpretty_+3A_dmax">dmax</code></td>
<td>
<p>maximum of the data range</p>
</td></tr>
<tr><td><code id="rpretty_+3A_m">m</code></td>
<td>
<p>number of axis labels</p>
</td></tr>
<tr><td><code id="rpretty_+3A_n">n</code></td>
<td>
<p>number of axis intervals (specify one of
<code>m</code> or <code>n</code>)</p>
</td></tr>
<tr><td><code id="rpretty_+3A_min.n">min.n</code></td>
<td>
<p>nonnegative integer giving the
<em>minimal</em> number of intervals. If <code>min.n == 0</code>,
<code>pretty(.)</code> may return a single value.</p>
</td></tr>
<tr><td><code id="rpretty_+3A_shrink.sml">shrink.sml</code></td>
<td>
<p>positive numeric by a which a default
scale is shrunk in the case when <code>range(x)</code> is very
small (usually 0).</p>
</td></tr>
<tr><td><code id="rpretty_+3A_high.u.bias">high.u.bias</code></td>
<td>
<p>non-negative numeric, typically
<code>&gt; 1</code>. The interval unit is determined as
<code>{1,2,5,10}</code> times <code>b</code>, a power of 10. Larger
<code>high.u.bias</code> values favor larger units.</p>
</td></tr>
<tr><td><code id="rpretty_+3A_u5.bias">u5.bias</code></td>
<td>
<p>non-negative numeric multiplier favoring
factor 5 over 2. Default and 'optimal': <code>u5.bias =
  .5 + 1.5*high.u.bias</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of axis label locations
</p>


<h3>Author(s)</h3>

<p>Justin Talbot <a href="mailto:justintalbot@gmail.com">justintalbot@gmail.com</a>
</p>


<h3>References</h3>

<p>Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
<em>The New S Language</em>. Wadsworth &amp; Brooks/Cole.
</p>

<hr>
<h2 id='sparks'>Sparks' labeling algorithm</h2><span id='topic+sparks'></span>

<h3>Description</h3>

<p>Sparks' labeling algorithm
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  sparks(dmin, dmax, m)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sparks_+3A_dmin">dmin</code></td>
<td>
<p>minimum of the data range</p>
</td></tr>
<tr><td><code id="sparks_+3A_dmax">dmax</code></td>
<td>
<p>maximum of the data range</p>
</td></tr>
<tr><td><code id="sparks_+3A_m">m</code></td>
<td>
<p>number of axis labels</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of axis label locations
</p>


<h3>Author(s)</h3>

<p>Justin Talbot <a href="mailto:justintalbot@gmail.com">justintalbot@gmail.com</a>
</p>


<h3>References</h3>

<p>Sparks, D. N. (1971) AS 44. Scatter Diagram Plotting,
Journal of the Royal Statistical Society. Series C., pp.
327-331.
</p>

<hr>
<h2 id='thayer'>Thayer and Storer's labeling algorithm</h2><span id='topic+thayer'></span>

<h3>Description</h3>

<p>Thayer and Storer's labeling algorithm
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  thayer(dmin, dmax, m)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="thayer_+3A_dmin">dmin</code></td>
<td>
<p>minimum of the data range</p>
</td></tr>
<tr><td><code id="thayer_+3A_dmax">dmax</code></td>
<td>
<p>maximum of the data range</p>
</td></tr>
<tr><td><code id="thayer_+3A_m">m</code></td>
<td>
<p>number of axis labels</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of axis label locations
</p>


<h3>Author(s)</h3>

<p>Justin Talbot <a href="mailto:justintalbot@gmail.com">justintalbot@gmail.com</a>
</p>


<h3>References</h3>

<p>Thayer, R. P. and Storer, R. F. (1969) AS 21. Scale
Selection for Computer Plots, Journal of the Royal
Statistical Society. Series C., pp. 206-208.
</p>

<hr>
<h2 id='wilkinson'>Wilkinson's labeling algorithm</h2><span id='topic+wilkinson'></span>

<h3>Description</h3>

<p>Wilkinson's labeling algorithm
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  wilkinson(dmin, dmax, m,
    Q = c(1, 5, 2, 2.5, 3, 4, 1.5, 7, 6, 8, 9),
    mincoverage = 0.8,
    mrange = max(floor(m/2), 2):ceiling(6 * m))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wilkinson_+3A_dmin">dmin</code></td>
<td>
<p>minimum of the data range</p>
</td></tr>
<tr><td><code id="wilkinson_+3A_dmax">dmax</code></td>
<td>
<p>maximum of the data range</p>
</td></tr>
<tr><td><code id="wilkinson_+3A_m">m</code></td>
<td>
<p>number of axis labels</p>
</td></tr>
<tr><td><code id="wilkinson_+3A_q">Q</code></td>
<td>
<p>set of nice numbers</p>
</td></tr>
<tr><td><code id="wilkinson_+3A_mincoverage">mincoverage</code></td>
<td>
<p>minimum ratio between the the data
range and the labeling range, controlling the whitespace
around the labeling (default = 0.8)</p>
</td></tr>
<tr><td><code id="wilkinson_+3A_mrange">mrange</code></td>
<td>
<p>range of <code>m</code>, the number of tick
marks, that should be considered in the optimization
search</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of axis label locations
</p>


<h3>Note</h3>

<p>Ported from Wilkinson's Java implementation with some
changes.  Changes: 1) m (the target number of ticks) is
hard coded in Wilkinson's implementation as 5.  Here we
allow it to vary as a parameter. Since m is fixed,
Wilkinson only searches over a fixed range 4-13 of
possible resulting ticks.  We broadened the search range
to max(floor(m/2),2) to ceiling(6*m), which is a larger
range than Wilkinson considers for 5 and allows us to
vary m, including using non-integer values of m.  2)
Wilkinson's implementation assumes that the scores are
non-negative. But, his revised granularity function can
be extremely negative. We tweaked the code to allow
negative scores.  We found that this produced better
labelings.  3) We added 10 to Q. This seemed to be
necessary to get steps of size 1.  It is possible for
this algorithm to find no solution.  In Wilkinson's
implementation, instead of failing, he returns the
non-nice labels spaced evenly from min to max.  We want
to detect this case, so we return NULL. If this happens,
the search range, mrange, needs to be increased.
</p>


<h3>Author(s)</h3>

<p>Justin Talbot <a href="mailto:justintalbot@gmail.com">justintalbot@gmail.com</a>
</p>


<h3>References</h3>

<p>Wilkinson, L. (2005) The Grammar of Graphics,
Springer-Verlag New York, Inc.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
