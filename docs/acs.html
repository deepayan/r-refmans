<!DOCTYPE html><html><head><title>Help for package acs</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {acs}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#acs-package'>
<p>Download, Manipulate, and Present American Community Survey and</p>
Decennial Data from the US Census</a></li>
<li><a href='#acs-class'><p>Class <code>"acs"</code></p></a></li>
<li><a href='#acs.fetch'><p> Downloads demographic data (ACS, SF1, SF3) via the Census API</p>
and converts to a proper acs object with estimates, standard errors, and
associated metadata.</a></li>
<li><a href='#acs.lookup'><p> Search for relevant demographic variables and tables from the US</p>
Census.</a></li>
<li><a href='#acs.lookup-class'><p>Class <code>"acs.lookup"</code></p></a></li>
<li><a href='#acs.tables.install'>
<p>Downloads and stores XML tables used to lookup variable codes, table</p>
names, and other metadata associated with acs package.</a></li>
<li><a href='#api.key.install'>
<p>Installs an API key from the US Census to use with calls</p>
to <code>acs.fetch</code>.</a></li>
<li><a href='#api.key.migrate'>
<p>After updating the acs package, installs an archived API key from a</p>
previous installation.</a></li>
<li><a href='#cbind.acs'><p>Combine acs Objects by Columns</p></a></li>
<li><a href='#confint.acs'>
<p>Return upper and lower bounds of given confidence intervals for acs objects.</p></a></li>
<li><a href='#cpi'><p>Consumer Price Index data (1913-2015).</p></a></li>
<li><a href='#currency.convert'><p>Convert dollar values of acs object to a new base year.</p></a></li>
<li><a href='#currency.year'><p>Return (or change) currency.year value from the metadata of an acs object.</p></a></li>
<li><a href='#divide.acs'><p>Divide one acs object or variable by another.</p></a></li>
<li><a href='#endyear'><p>Return or replace endyear value from the metadata of an acs object.</p></a></li>
<li><a href='#fips.state'>
<p>FIPS codes and geographic names for use in searching and creating</p>
geographies in the acs package.</a></li>
<li><a href='#flatten.geo.set'>
<p>Convenience function to &quot;flatten&quot; a nested geo.set object.</p></a></li>
<li><a href='#geo.lookup'>
<p>Search Census geographies</p></a></li>
<li><a href='#geo.make'>
<p>Create a new geo.set object for use with the acs package.</p></a></li>
<li><a href='#geo.set-class'><p>Class <code>"geo.set"</code></p></a></li>
<li><a href='#geography'><p>Return or replace geography metadata of an acs object.</p></a></li>
<li><a href='#kansas07'>
<p>County-level data from the 2007 American Community Survey for Kansas for</p>
use in examples of acs package.</a></li>
<li><a href='#kansas09'>
<p>County-level data from the 2005-2009 American Community Survey for Kansas for</p>
use in examples of acs package.</a></li>
<li><a href='#lawrence10'>
<p>Tract-level data from the 2006-2010 American Community Survey for</p>
Lawrence, MA for use in examples of acs package.</a></li>
<li><a href='#plot-methods'><p>acs Methods for Function <code>plot</code></p></a></li>
<li><a href='#prompt.acs'><p>Prompt for new values for metadata in an acs object.</p></a></li>
<li><a href='#rbind.acs'><p>Combine acs Objects by Rows</p></a></li>
<li><a href='#read.acs'>
<p>Reads a comma-delimited file from the American Community</p>
Survey and creates an acs object with estimates, standard errors, and
associated metadata.</a></li>
<li><a href='#sum-methods'><p>acs Methods for Function <code>sum</code></p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Download, Manipulate, and Present American Community Survey and
Decennial Data from the US Census</td>
</tr>
<tr>
<td>Version:</td>
<td>2.1.4</td>
</tr>
<tr>
<td>Date:</td>
<td>2019-02-14</td>
</tr>
<tr>
<td>Author:</td>
<td>Ezra Haber Glenn [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ezra Haber Glenn &lt;eglenn@mit.edu&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://dusp.mit.edu/faculty/ezra-glenn">http://dusp.mit.edu/faculty/ezra-glenn</a>,
<a href="http://eglenn.scripts.mit.edu/citystate/">http://eglenn.scripts.mit.edu/citystate/</a>,
<a href="http://mailman.mit.edu/mailman/listinfo/acs-r">http://mailman.mit.edu/mailman/listinfo/acs-r</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a general toolkit for downloading, managing,
  analyzing, and presenting data from the U.S. Census
  (<a href="https://www.census.gov/data/developers/data-sets.html">https://www.census.gov/data/developers/data-sets.html</a>), including
  SF1 (Decennial short-form), SF3 (Decennial long-form), and the
  American Community Survey (ACS).  Confidence intervals provided with
  ACS data are converted to standard errors to be bundled with
  estimates in complex acs objects.  Package provides new methods to
  conduct standard operations on acs objects and present/plot data in
  statistically appropriate ways.</td>
</tr>
<tr>
<td>Imports:</td>
<td>graphics, stats, plyr, utils, httr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10), stringr, methods, XML</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>yes</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-02-19 20:08:11 UTC; eglenn</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2019-02-19 21:40:14 UTC</td>
</tr>
</table>
<hr>
<h2 id='acs-package'>
Download, Manipulate, and Present American Community Survey and
Decennial Data from the US Census
</h2><span id='topic+acs-package'></span><span id='topic+acs'></span>

<h3>Description</h3>

<p>Provides a general toolkit for downloading, managing, analyzing, and
presenting data from the U.S. Census, including SF1 (Decennial
&quot;short-form&quot;), SF3 (Decennial &quot;long-form&quot;), and the American Community
Survey (ACS).  Confidence intervals provided with ACS data are
converted to standard errors to be bundled with estimates in complex
acs objects.  Package provides new methods to conduct standard
operations on acs objects and present/plot data in statistically
appropriate ways.</p>


<h3>Details</h3>

 
<table>
<tr>
 <td style="text-align: left;"> Package: </td><td style="text-align: left;"> acs</td>
</tr>
<tr>
 <td style="text-align: left;"> Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
  Version: </td><td style="text-align: left;"> 2.1.4</td>
</tr>
<tr>
 <td style="text-align: left;"> Date: </td><td style="text-align: left;"> 2018-02-14</td>
</tr>
<tr>
 <td style="text-align: left;"> License: </td><td style="text-align: left;"> GPL-3</td>
</tr>
<tr>
 <td style="text-align: left;">
  Depends: </td><td style="text-align: left;"> stringr, methods, XML</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>

<p>The package defines a new &quot;acs&quot; class (containing estimates, standard
errors, geography, and metadata for tables from the U.S. Census
American Community Survey), with methods to deal appropriately with
common tasks, such as combining subgroups or geographies, mathematical
operations on estimates, tests of significance, and computing (and
plotting) confidence intervals.
</p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>


<h3>References</h3>


<ol>
<li><p>&quot;A Compass for Understanding and Using American Community Survey
Data: What State and Local Governments Need to Know.&quot; Washington, DC:
U.S. Census Bureau.
2009. <a href="http://www.census.gov/library/publications/2009/acs/state-and-local.html">http://www.census.gov/library/publications/2009/acs/state-and-local.html</a>.
</p>
</li>
<li><p>&quot;acs.R: An R Package for Neighborhood-Level Data from the
U.S. Census.&quot; Ezra Haber Glenn, Department of Urban Studies and
Planning, Massachusetts Institute of Technology.  Presented at the
Computers in Urban Planning and Urban Management Conference, July 6,
2011.
<a href="http://papers.ssrn.com/sol3/papers.cfm?abstract_id=2171390">http://papers.ssrn.com/sol3/papers.cfm?abstract_id=2171390</a>.
</p>
</li>
<li><p>&quot;Working with acs.R (June 2013)&quot;, Ezra Haber Glenn.
<a href="http://papers.ssrn.com/sol3/papers.cfm?abstract_id=2552524">http://papers.ssrn.com/sol3/papers.cfm?abstract_id=2552524</a>
</p>
</li>
<li><p>CityState webpage: <a href="http://eglenn.scripts.mit.edu/citystate/">http://eglenn.scripts.mit.edu/citystate/</a>
</p>
</li>
<li><p>User Group Mailing List: <a href="http://mailman.mit.edu/mailman/listinfo/acs-r">http://mailman.mit.edu/mailman/listinfo/acs-r</a> 
</p>
</li></ol>


<hr>
<h2 id='acs-class'>Class <code>"acs"</code></h2><span id='topic+acs-class'></span><span id='topic+acs.colnames+2Cacs-method'></span><span id='topic+acs.units+2Cacs-method'></span><span id='topic+-+2Cacs+2Cacs-method'></span><span id='topic+-+2Cacs+2Cnumeric-method'></span><span id='topic+-+2Cnumeric+2Cacs-method'></span><span id='topic++2F+2Cacs+2Cacs-method'></span><span id='topic++2F+2Cacs+2Cnumeric-method'></span><span id='topic++2F+2Cnumeric+2Cacs-method'></span><span id='topic++5B+3C-+2Cacs-method'></span><span id='topic++5B+2Cacs-method'></span><span id='topic++2A+2Cacs+2Cacs-method'></span><span id='topic++2A+2Cacs+2Cnumeric-method'></span><span id='topic++2A+2Cnumeric+2Cacs-method'></span><span id='topic++2B+2Cacs+2Cacs-method'></span><span id='topic++2B+2Cacs+2Cnumeric-method'></span><span id='topic++2B+2Cnumeric+2Cacs-method'></span><span id='topic+estimate+2Cacs-method'></span><span id='topic+modified+2Cacs-method'></span><span id='topic+show+2Cacs-method'></span><span id='topic+span+2Cacs-method'></span><span id='topic+standard.error+2Cacs-method'></span><span id='topic+summary+2Cacs-method'></span><span id='topic+estimate'></span><span id='topic+modified'></span><span id='topic+span'></span><span id='topic+standard.error'></span><span id='topic+acs.colnames'></span><span id='topic+acs.units'></span><span id='topic+dim.acs'></span><span id='topic+length.acs'></span><span id='topic+acs.colnames+3C-'></span><span id='topic+acs.units+3C-'></span><span id='topic+is.acs'></span><span id='topic+span+3C-'></span><span id='topic+apply'></span><span id='topic+acs.colnames+3C-+2Cacs-method'></span><span id='topic+acs.units+3C-+2Cacs-method'></span><span id='topic+is.acs'></span><span id='topic+span+3C-+2Cacs-method'></span><span id='topic+apply+2Cacs-method'></span>

<h3>Description</h3>

<p>The acs class provides a convenient wrapper for demographic data from
the U.S. Census, especially the American Community Survey.  Estimates
and standard errors are kept together, along with geographic information
and metadata necessary to manipulate and analyze data in this form.
</p>


<h3>Objects from the Class</h3>

<p>acs objects can be created by calls of the form <code>new("acs", ...)</code>,
or through helper functions provided by the package (currently
<code>read.acs</code> and <code>acs.fetch</code>), or from the output of
subsetting or other calls on existing acs objects.  Once created, acs
objects can be manipulated through new methods to deal appropriately
with common analytical tasks such as combining subgroups or
geographies, mathematical operations on estimates, and computing (and
plotting) confidence intervals.
</p>


<h3>Slots</h3>


<dl>
<dt><code>endyear</code>:</dt><dd><p>Object of class <code>"integer"</code> indicating
the last year included in the dataset (e.g., 2012 for data from the
2008&ndash;2012 ACS)</p>
</dd>
<dt><code>span</code>:</dt><dd><p>Object of class <code>"integer"</code> representing the
number of years the dataset spans (e.g., 3 for data from the
2011&ndash;2013 ACS); for decennial census datasets (SF1 and SF3), span =
0.</p>
</dd>
<dt><code>geography</code>:</dt><dd><p>Object of class <code>"data.frame"</code> containing
columns extracted from the data's geographic header: typically
includes geographic place names, census summary level values, and
unique numeric identifiers, but can contain any geographic names or
labels desired.  When acs objects are created or modified, the first
geography column will be used to label estimates and standard
errors.</p>
</dd>
<dt><code>acs.colnames</code>:</dt><dd><p>Object of class <code>"character"</code> giving
the variable names for each column </p>
</dd>
<dt><code>modified</code>:</dt><dd><p>Object of class <code>"logical"</code> to indicate
whether the object has been modified since construction </p>
</dd>
<dt><code>acs.units</code>:</dt><dd><p>Object of class <code>"factor"</code> designating the
type of units in each column (e.g., count or percentage or dollars);
only used minimally, to check appropriateness of some operations;
mostly reserved for future functionality</p>
</dd>
<dt><code>currency.year</code>:</dt><dd><p>Object of class <code>"integer"</code> indicating
the year that all currency values have been adjusted to (by default
the same as endyear, but able to be modified by the user for
comparisons with other years; see <code><a href="#topic+currency.convert">currency.convert</a></code>.)</p>
</dd>
<dt><code>estimate</code>:</dt><dd><p>Object of class <code>"matrix"</code>  holding
the reported ACS estimates</p>
</dd>
<dt><code>standard.error</code>:</dt><dd><p>Object of class <code>"matrix"</code> holding
the calculated values of the standard errors for each estimate,
derived from the reported 90% confidence intervals </p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt>acs.colnames</dt><dd><p><code>signature(object = "acs")</code>:   Standard
accessor function; returns character vector </p>
</dd>
<dt>acs.units</dt><dd><p><code>signature(object = "acs")</code>:   Standard
accessor function; returns factor vector </p>
</dd>
<dt>currency.year</dt><dd><p><code>signature(object = "acs")</code>: Standard accessor function; returns integer </p>
</dd>
<dt>endyear</dt><dd><p><code>signature(object = "acs")</code>: Standard accessor function; returns integer </p>
</dd>
<dt>estimate</dt><dd><p><code>signature(object = "acs")</code>: Standard accessor
function; returns matrix </p>
</dd>
<dt>geography</dt><dd><p><code>signature(object = "acs")</code>: Standard accessor
function; returns data.frame </p>
</dd>
<dt>modified</dt><dd><p><code>signature(object = "acs")</code>: Standard accessor
function; return logical </p>
</dd>
<dt>span</dt><dd><p><code>signature(object = "acs")</code>: Standard accessor function; returns integer </p>
</dd>
<dt>standard.error</dt><dd><p><code>signature(object = "acs")</code>: Standard
accessor function; returns matrix </p>
</dd>
<dt>sum</dt><dd><p><code>signature(object = "acs")</code>: Aggregates (adds) all
estimates in the object, and adds the corresponding standard
errors in a statistically appropriate way; returns new acs object</p>
</dd>
<dt>summary</dt><dd><p><code>signature(object = "acs")</code>: Prints standard summary data on both estimates
and standard errors</p>
</dd>
<dt>confint</dt><dd><p><code>signature(object = "acs")</code>: Prints estimates
with confidence intervals</p>
</dd>
<dt>[</dt><dd><p><code>signature(x = "acs")</code>: subsetting works for acs objects
using standard <code>[i,j]</code> square bracket notation, similar to
two-dimensional matrices; returns a new acs object with estimates,
standard errors, and associated metadata for &quot;i&quot; rows (geographies) and
&quot;j&quot; columns (variable columns); essentially, subsetting for this class is
structured to mirror standard operations on matrix objects</p>
</dd>
<dt>[&lt;-</dt><dd><p><code>signature(x = "acs")</code>: new values may be
replaced/assigned to an existing acs object using standard
<code>[i,j]</code> bracket notation.  The assignment can accept a number
of different forms: a valid acs object (including a subsetted one),
a list of two matrices (ideally named &quot;estimate&quot; and &quot;error&quot; or
&quot;standard.error&quot;), or a numeric object which may be coerced into a
matrix (to be used as estimates, with zero-values assigned to
corresponding standard errors). </p>
</dd>
</dl>

<p>In addition to these methods, new methods for basic arithmetic
functions (+, -, *, /) have been provided to deal appropriately
with combining estimates and standard errors.  </p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>showClass("acs")
# load some data from the ACS
data(kansas09)
str(kansas09)

# access slots
endyear(kansas09)
span(kansas09)
estimate(kansas09)[1:5,1:5]
standard.error(kansas09[1:5,1:5])


# subset
kansas09[1:4,6:9]

# more complicated subsets
kansas09[c("Linn County, Kansas", "Wilson County, Kansas") ,
   grep(pattern="21.years", x=acs.colnames(kansas09))]

# addition on estimates and errors
kansas09[1:4,25]+kansas09[1:4,49]

# can even multiply and divide
# males per female, by county
kansas09[1:4,2]/kansas09[1:4,26]

# (males&lt;5 plus females&lt;5) * 12
(kansas09[7,3]+kansas09[7,27]) * 12

# some replacement: males&lt;5 as a percentage of all males
kansas09[,3]=kansas09[,3]/kansas09[,2]
</code></pre>

<hr>
<h2 id='acs.fetch'> Downloads demographic data (ACS, SF1, SF3) via the Census API
and converts to a proper acs object with estimates, standard errors, and
associated metadata.</h2><span id='topic+acs.fetch'></span><span id='topic+api.url.maker'></span>

<h3>Description</h3>

<p> When passed a valid geo.set object and either lookup terms
(table.number, table.name, keyword) or a valid acs.lookup object,
queries the Census API and downloads data to create a new acs-class
object.  Geographical information is preserved, metadata in bundled
together with the acs object, and margins of errors are converted to
standard errors to accompany estimates (see <code>help(acs)</code>).</p>


<h3>Usage</h3>

<pre><code class='language-R'>acs.fetch(endyear, span = 5, geography, table.name,
      table.number, variable, keyword, dataset = "acs",
      key, col.names = "auto", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="acs.fetch_+3A_endyear">endyear</code></td>
<td>
<p>an integer indicating the latest year of the data in the
survey (e.g., for data from the 2007-2011 5-year ACS data, endyear would
be 2011)</p>
</td></tr>
<tr><td><code id="acs.fetch_+3A_span">span</code></td>
<td>
<p>an integer indicating the span (in years) of the desired ACS
data (should be 1, 3, or 5 for ACS datasets, and 0 for decennial
census SF1 and SF3 datasets); defaults to 5, but ignored and reset
to 0 if dataset=&quot;sf1&quot; or &quot;sf3&quot;.</p>
</td></tr>
<tr><td><code id="acs.fetch_+3A_geography">geography</code></td>
<td>
<p>a valid geo.set object specifying the census
geography or geographies to be fetched; can be created &quot;on the fly&quot;
with a call to <code>geo.make()</code> </p>
</td></tr>
<tr><td><code id="acs.fetch_+3A_table.name">table.name</code></td>
<td>
<p>a string giving the search term(s) to find in the
name of the ACS census table (for example, &quot;Sex&quot; or &quot;Age&quot;); accepts
multiple words, which must all be found in the returned table names;
always case-sensitive.  (Note: when set, this variable is passed to
an internal call to acs.lookup&mdash;see
<code><a href="#topic+acs.lookup">acs.lookup</a></code>).</p>
</td></tr>
<tr><td><code id="acs.fetch_+3A_table.number">table.number</code></td>
<td>
<p>a string (not a number) indicating the table from
the Census to fetch; examples: &quot;B01003&quot; or &quot;B23013&quot;; always
case-sensitive. Used to fetch all variables for a given table
number; if &quot;table.number&quot; is provided, other lookup variables
(&quot;table.name&quot; or &quot;keyword&quot;) will be ignored.</p>
</td></tr>
<tr><td><code id="acs.fetch_+3A_variable">variable</code></td>
<td>
<p>an object of acs.lookup class, or a string (not a
number) or vector of strings indicating the exact variable
number(s) the Census to fetch.  See details for more.
Non-acs.lookup examples include &quot;B01003_001&quot; or &quot;B23013_003&quot; or
c(&quot;B01003_001&quot;, &quot;B23013_003&quot;).  Used to fetch specific variables,
as opposed to all variables for a given table number; if
&quot;variable&quot; is provided, all other lookup variables (&quot;table.name&quot;,
&quot;table.number&quot;, and &quot;keyword&quot;) will be ignored. </p>
</td></tr>
<tr><td><code id="acs.fetch_+3A_keyword">keyword</code></td>
<td>
<p>a string or vector of strings giving the search
term(s) to find in the name of the census variable (for example,
&quot;Male&quot; or &quot;Haiti&quot;); accepts multiple words, which must all be
found in the returned variable names; always case-sensitive.
(Note: when set, this variable is passed to an internal call to
acs.lookup&mdash;see <code><a href="#topic+acs.lookup">acs.lookup</a></code>).</p>
</td></tr>
<tr><td><code id="acs.fetch_+3A_dataset">dataset</code></td>
<td>
<p>either &quot;acs&quot; (the default), &quot;sf1&quot;, or &quot;sf3&quot;, indicating
whether to fetch data from in the American Community Survey or the
SF1/SF3 datasets.  See details for more information about available
data.</p>
</td></tr>
<tr><td><code id="acs.fetch_+3A_key">key</code></td>
<td>
<p>a string providing the Census API key to use for when
fetching data.  Typically saved once via <code>api.key.install</code>
and passed automatically with each call; see
<code><a href="#topic+api.key.install">api.key.install</a></code></p>
</td></tr>
<tr><td><code id="acs.fetch_+3A_col.names">col.names</code></td>
<td>
<p>either &quot;auto&quot;,&quot;pretty&quot;, or a vector of strings of
the same length as the number of variables to be fetched.  When
&quot;auto&quot; (the default), census variable codes will be used as column
names for the fetched data; when &quot;pretty&quot;, descriptive variables
names will be used; otherwise col.names will be used.</p>
</td></tr>
<tr><td><code id="acs.fetch_+3A_...">...</code></td>
<td>
<p> Not used interactively (reserved for recursive calls).
</p>
</td></tr></table>


<h3>Details</h3>

<p>Assuming you have created some geography with geo.make and you have
already installed an API key, the call is quite simple: for example,
<code>acs.fetch(endyear=2014, geography=my.geo, table.number="B01003")</code>.
(For more on API keys, see <code><a href="#topic+api.key.install">api.key.install</a></code>; if you haven't
installed one, you can always add a &quot;key=YOUR.KEY.HERE&quot; argument to
<code>acs.fetch</code> each time.)
</p>
<p>By default, acs.fetch will download 5-year ACS, but as of version 2.0
users must specify a specific &quot;endyear&quot;.  Users may also select 1- or
3-year ACS data using the &quot;span=&quot; option, as well as Decennial data
using the &quot;dataset&quot; option.  (When dataset=&quot;sf1&quot; or &quot;sf3&quot;, span will be
reset to 0 regardless of any explict or default options.)  At present,
the API provides five-, three- and one-year data for a variety of
different endyears, and Decennial data for 2010, 2000, and 1990; see the
chart below and/or visit
<a href="http://www.census.gov/data/developers/data-sets.html">http://www.census.gov/data/developers/data-sets.html</a> to learn more
about what is available through the API.  (Warning: support for 1990 is
a bit unreliable as of the date of this version, due to non-standard
variable lookup tables.)
</p>
 <ul>
<li><p>American Community Survey 5-Year Data (dataset=&quot;acs&quot;,
span=5): 2005-2009 through 2010-2014
</p>
</li>
<li><p>American Community Survey 3 Year Data (dataset=&quot;acs&quot;, span=3):
2013, 2012
</p>
</li>
<li><p>American Community Survey 1 Year Data (dataset=&quot;acs&quot;, span=1):
2014, 2013, 2012, 2011
</p>
</li>
<li><p>SF1/Short-Form (dataset=&quot;sf1&quot;): 1990, 2000, 2010
</p>
</li>
<li><p>SF3/Long-Form (dataset=&quot;sf3&quot;): 1990, 2000
</p>
</li></ul>

<p>Downloading based on a table number is probably the most fool-proof way
to get the data you want, but acs.fetch will also accept a number of
other arguments instead of &quot;table.number&quot;.  Users can provide strings to
search for in table names (e.g., table.name=&quot;Age by Sex&quot; or
table.name=&quot;First Ancestry Reported&quot;) or keywords to find in the names
of variables (e.g., keyword=&quot;Male&quot; or keyword=&quot;Haiti&quot;)&mdash;but be warned:
given how many tables there are, you may get more matches than you
expected and suffer from the &quot;download overload&quot; of fast-scrolling
screens full of data. (But don't lose hope: see the
<code><a href="#topic+acs.lookup">acs.lookup</a></code> tool, which can help with this problem.)
</p>
<p>On the other hand, if you know you want a specific variable or two (not
a whole table, just a few columns of it, such as variable=&quot;B05001_006&quot;
or variable=c(&quot;B16001_058&quot;, &quot;B16001_059&quot;)), you can ask for that with
<code>acs.fetch(variable="these.variable.codes", ...)</code>.
</p>
<p>Note: when &quot;combine=T&quot; for the fetched geo.set, data will be aggregated
in the resulting acs abject.  Some users may therefore wish to specify
&quot;one.zero=T&quot; as an additional argument to <code>acs.fetch</code>; see
<code><a href="#topic+sum-methods">sum-methods</a></code>. </p>


<h3>Value</h3>

<p>Returns a new acs-class object with estimates, standard errors
(derived from the census 90% margins of error), and metadata of the
fetched data from the Census API.  </p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>


<h3>References</h3>


<ol>
<li><p><a href="http://www.census.gov/developers/">http://www.census.gov/developers/</a>
</p>
</li>
<li><p><a href="http://www.census.gov/data/developers/data-sets.html">http://www.census.gov/data/developers/data-sets.html</a>
</p>
</li></ol>


<h3>See Also</h3>

<p><code><a href="#topic+acs.lookup">acs.lookup</a></code>.
</p>

<hr>
<h2 id='acs.lookup'> Search for relevant demographic variables and tables from the US
Census.  </h2><span id='topic+acs.lookup'></span>

<h3>Description</h3>

<p> The <code>acs.fetch</code> function is used to download data
from the US Census American Community Survey.  The <code>acs.lookup</code>
function provides a convenience function to use in advance to locate
tables and variables that may be of interest.
</p>
<p><code>acs.lookup</code> takes arguments similar to <code>acs.fetch</code> &mdash; in
particular, &quot;table.number&quot;, &quot;table.name&quot;, and &quot;keyword&quot;, as well as
&quot;endyear&quot;,&quot;span&quot;, and &quot;dataset&quot; &mdash; and searches for matches in the
meta-data of the Census tables.  When multiple search terms are passed
to a given argument (e.g., <code>keyword=c("Female", "GED")</code>), the
tool returns matches where ALL of the terms are found; similarly, when
more than one lookup argument is used (e.g.,
<code>table.number="B01001", keyword="Female"</code>), the tool searches for
matches that include all of the terms (i.e., terms are combined with a
logical &quot;AND&quot;, not a logical &quot;OR&quot;).
</p>
<p>Results from acs.lookup &mdash; which are acs.lookup class objects &mdash; can
then be inspected, subsetted (with [square brackets]), and combined
(with <code>c</code> or <code>+</code>) to create custom acs.lookup objects to
store and later pass to <code>acs.fetch</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>acs.lookup(endyear, span = 5, dataset = "acs", keyword,
     table.name, table.number, case.sensitive = T)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="acs.lookup_+3A_endyear">endyear</code></td>
<td>
<p>an integer indicating the latest year of the data in
the survey (e.g., for data from the 2007-2011 5-year ACS data,
endyear would be 2011; limited by acceptable values currently
provided by the Census API); for 2016 and later, the 2015 lookup
tables are used (see details).</p>
</td></tr>
<tr><td><code id="acs.lookup_+3A_span">span</code></td>
<td>
<p>an integer indicating the span (in years) of the desired
ACS data (should be 1, 3, or 5); defaults to 5.  Ignored and reset
to 0 if dataset=&quot;sf1&quot; or &quot;sf3&quot;.</p>
</td></tr>
<tr><td><code id="acs.lookup_+3A_dataset">dataset</code></td>
<td>
<p>either &quot;acs&quot; (the default), &quot;sf1&quot;, or &quot;sf3&quot;, indicating
whether to look for tables and variables in the American Community
Survey, the SF1 dataset (decennial/&quot;short-form&quot;), or the SF3 dataset
(decennial/&quot;long-form&quot;).</p>
</td></tr>
<tr><td><code id="acs.lookup_+3A_keyword">keyword</code></td>
<td>
<p> a string or vector of strings giving the search
term(s) to find in the name of the ACS census variable (for
example, &quot;Male&quot; or &quot;Haiti&quot;); accepts multiple words, which must
all be found in the returned variable names.  </p>
</td></tr>
<tr><td><code id="acs.lookup_+3A_table.name">table.name</code></td>
<td>
<p>a string giving the search term(s) to find in the
name of the ACS census table (for example, &quot;Sex&quot; or &quot;Age&quot; or &quot;Age
by Sex&quot;); accepts multiple words, which must all be found in the
returned table names.  </p>
</td></tr>
<tr><td><code id="acs.lookup_+3A_table.number">table.number</code></td>
<td>
<p>a string (not a number) indicating the desired
table from the Census to fetch; examples: &quot;B01003&quot; or &quot;B23013&quot;;
always case-sensitive. Used to identify all variables for a given
table number. </p>
</td></tr>
<tr><td><code id="acs.lookup_+3A_case.sensitive">case.sensitive</code></td>
<td>
<p>a logical flag indicating whether searching is
case-sensitive (the default) or not.  Note that the Census is not
entirely consistent in capitalization in table and variable names,
so setting <code>case.sensitive=F</code> may be useful in finding all
possible matches.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In many cases, <code>acs.lookup</code> is called internally by
<code>acs.fetch</code>, to determine the variable codes to use for a given
table.name or table.number.  Since each lookup involves a search of
static XML tables (provided by the census for each endyear/span
combination, and included by the acs package in /extdata), searches
involving more recent years (e.g., for version 2.0, endyears &gt; 2014) may
fail.  In such situations, users may wish to call <code>acs.fetch</code> with
the &quot;variable=&quot; option, perhaps reusing variables from a saved
<code>acs.lookup</code> search for a previous year.
</p>
<p>For example, once the 2011-2015 5-year ACS data is available via the
API, users can attempt the following to access Table B01003, even before
the new version of the package is installed with the correct variable
lookup tables: <code>acs.fetch(endyear=2015, span=5,
  variable=acs.lookup(endyear=2014, span=5, table.number="B01003"))</code>.
</p>
<p>Note: version 2.1.3 of the package implements a &quot;workaround&quot; to address a
problem accessing data from 2016, when the Census Bureau seems to have
changed the format for their XML variable lookup tables, causing calls
to acs.lookup (and acs.fetch) to fail for &quot;endyear=2016&quot;.  The
(hopefully) temporary solution was to simply use the 2015 lookup tables
for these requests, which should be safe in most situations, since table
numbers and variable codes generally do not change from year to year.
In certain situations, this may not be true: see
<a href="https://www.census.gov/programs-surveys/acs/technical-documentation/table-and-geography-changes/2016/5-year.html">https://www.census.gov/programs-surveys/acs/technical-documentation/table-and-geography-changes/2016/5-year.html</a>.</p>


<h3>Value</h3>

<p> Returns an acs.lookup class object with the results of the
query.  acs.lookup objects can be subsetted and combined, and passed
to the &quot;variable&quot; argument of <code>acs.fetch</code>.  </p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+acs.lookup-class">acs.lookup-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: acs.lookup(endyear=2014, span=5, table.number="B01001")
acs.lookup(endyear=2012, span=1, table.number="B01001", keyword="Female")
acs.lookup(endyear=2012, span=1, keyword=c("Female", "GED"))
acs.lookup(endyear=2000, dataset="sf3", table.number="P56")
acs.lookup(endyear=1990, dataset="sf3", table.number="H058")
age.by.sex=acs.lookup(endyear=2014, span=5, table.name="Age by Sex")
age.by.sex
workers.age.by.sex=age.by.sex[4:6]
workers.age.by.sex

## End(Not run)
</code></pre>

<hr>
<h2 id='acs.lookup-class'>Class <code>"acs.lookup"</code></h2><span id='topic+acs.lookup-class'></span><span id='topic+is.acs.lookup'></span><span id='topic+results'></span><span id='topic++2B+2Cacs.lookup+2Cacs.lookup-method'></span><span id='topic+c+2Cacs.lookup-method'></span><span id='topic+endyear+2Cacs.lookup-method'></span><span id='topic+show+2Cacs.lookup-method'></span><span id='topic++5B+2Cacs.lookup-method'></span><span id='topic+results+2Cacs.lookup-method'></span><span id='topic+span+2Cacs.lookup-method'></span>

<h3>Description</h3>

<p> A new class to hold the results of calls to
<code>acs.lookup</code>, typically for possible modification and then passing
to calls to <code>acs.fetch</code> (using the &quot;variable=&quot; argument).  </p>


<h3>Objects from the Class</h3>

<p> Objects can be created by calls of the
form <code>new("acs.lookup", ...)</code>, but more typically will be created
as output from calls to <code>acs.lookup</code>.  </p>


<h3>Slots</h3>


<dl>
<dt><code>endyear</code>:</dt><dd><p>Object of class <code>"numeric"</code> indicating
the year of the census dataset; e.g., for data from the 2005-2009 ACS,
endyear=2009</p>
</dd>
<dt><code>span</code>:</dt><dd><p>Object of class <code>"numeric"</code> indicating
the span in years of the census dataset; e.g., for data from the 2005-2009 ACS,
span=5.  For decennial census datasets (SF1 and SF3), span =
0.</p>
</dd>
<dt><code>args</code>:</dt><dd><p>Object of class <code>"list"</code> containing the
search terms used in the call to <code>acs.lookup</code>, including some or
all of: keyword, table.name, endyear, dataset, table.number, and case.sensitive.</p>
</dd>
<dt><code>results</code>:</dt><dd><p>Object of class <code>"data.frame"</code>
containing character strings in four columns: variable.code,
table.number, table.name, and variable.name.</p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt>+</dt><dd><p><code>signature(e1 = "acs.lookup", e2 = "acs.lookup")</code>:
used for combining two acs.lookup objects into one </p>
</dd>
<dt>c</dt><dd><p><code>signature(x = "acs.lookup")</code>: used for combining two
acs.lookup objects into one </p>
</dd>
<dt>endyear</dt><dd><p><code>signature(object = "acs.lookup")</code>: returns
endyear from acs.lookup object </p>
</dd>
<dt>[</dt><dd><p><code>signature(object = "acs.lookup")</code>: used for
subsetting an acs.lookup object </p>
</dd>
<dt>results</dt><dd><p><code>signature(object = "acs.lookup")</code>: returns
results (as dataframe) from acs.lookup object </p>
</dd>
<dt>span</dt><dd><p><code>signature(object = "acs.lookup")</code>: returns
span from acs.lookup object </p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+acs.lookup">acs.lookup</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>showClass("acs.lookup")
</code></pre>

<hr>
<h2 id='acs.tables.install'>
Downloads and stores XML tables used to lookup variable codes, table
names, and other metadata associated with acs package.
</h2><span id='topic+acs.tables.install'></span>

<h3>Description</h3>

<p> To obtain variable codes and other metadata needed to
access the Census API, both <code>acs.fetch</code> and <code>acs.lookup</code>
must consult various XML lookup files, which are provided by the
Census with each data release.  To keep the acs package-size small, as
of version 2.0 these files are accessed online at run-time for each
query.  As an alternative, users may use <code>acs.tables.install</code> to
download and archive all current tables (approximately 10MB, as of
version 2.0 release).
</p>
<p>Use of this function is completely optional and the package should
work fine without it (assuming the computer is online and is able to
access the lookup tables), but running it once may result in faster
searches and quicker downloads for all subsequent sessions.  (The
results are saved and archived, so once a user has run the function,
it is unnecessary to run again, unless the acs package is re-installed
or updated.)  </p>


<h3>Usage</h3>

<pre><code class='language-R'>acs.tables.install() </code></pre>


<h3>Value</h3>

<p>Downloads the files and saves them to the package's &quot;extdata&quot;
directory; return an error if no files found.
</p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>


<h3>References</h3>

<p><a href="http://www.census.gov/data/developers/data-sets.html">http://www.census.gov/data/developers/data-sets.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+acs.fetch">acs.fetch</a></code>
<code><a href="#topic+acs.lookup">acs.lookup</a></code></p>

<hr>
<h2 id='api.key.install'>
Installs an API key from the US Census to use with calls
to <code>acs.fetch</code>.
</h2><span id='topic+api.key.install'></span>

<h3>Description</h3>

<p>The <code>acs.fetch</code> function requires an &quot;API key&quot; to use when
downloading data from the US Census API.  Rather than pass this rather
long string to the function each time, users can save the key as part of
the package installation, using the <code>api.key.install</code> function.
Once installed, an api key is saved on the system and available for use
in future sessions.  (To replace a key, simply call the function again
with the new key.)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>api.key.install(key, file = "key.rda")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="api.key.install_+3A_key">key</code></td>
<td>

<p>The API key provided to the user upon registering with the US Census
Developer's page.  A string.
</p>
</td></tr>
<tr><td><code id="api.key.install_+3A_file">file</code></td>
<td>

<p>An alternate name to use when storing key; reserved for future use. 
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The requirement for a key seems to be laxly enforced by the Census API,
but is nonetheless coded into the acs package.  Users without a key may
find success by simply installing a blank key (i.e., key=&quot;&quot;) via
<code>api.key.install(key="")</code>; similarly, calls to <code>acs.fetch</code> and
<code>geo.make(..., check=T)</code> may succeed with a <code>key=""</code> argument.
Note that while this may work today, it may fail in the future if the
API decides to start enforcing the requirement.
</p>


<h3>Value</h3>

<p>Saves the key and exits silently, unless an error is encountered.
</p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>


<h3>References</h3>

<p>To request an API key, see <a href="http://www.census.gov/developers/">http://www.census.gov/developers/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+acs.fetch">acs.fetch</a></code>
</p>

<hr>
<h2 id='api.key.migrate'>
After updating the acs package, installs an archived API key from a
previous installation.
</h2><span id='topic+api.key.migrate'></span>

<h3>Description</h3>

<p>The <code>acs.fetch</code> function requires an &quot;API key&quot; to use when
downloading data from the US Census API.  Rather than pass this rather
long string to the function each time, users can save the key as part of
the package installation, using the <code>api.key.install</code> function.
Once installed, an api key is saved on the system and available for use
in future sessions.  (To replace a key, simply call the function again
with the new key.)
</p>
<p>During the update process, this key may be lost or left in the wrong
location.  A call to <code>api.key.migrate()</code> can help restore an
archived key, if found.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>api.key.migrate()
</code></pre>


<h3>Value</h3>

<p>Migrates the key (if found) and exits silently; return an error if no
archived key is found.
</p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>


<h3>References</h3>

<p>To request an API key, see <a href="http://www.census.gov/developers/">http://www.census.gov/developers/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+acs.fetch">acs.fetch</a></code>
<code><a href="#topic+api.key.install">api.key.install</a></code></p>

<hr>
<h2 id='cbind.acs'>Combine acs Objects by Columns
</h2><span id='topic+cbind.acs'></span><span id='topic+cbind'></span>

<h3>Description</h3>

<p> Take a pair of acs objects and combine by columns.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>          ## S3 method for class 'acs'
cbind(e1, e2, ...)
          </code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cbind.acs_+3A_e1">e1</code>, <code id="cbind.acs_+3A_e2">e2</code></td>
<td>
<p>two acs-class objects</p>
</td></tr>
<tr><td><code id="cbind.acs_+3A_...">...</code></td>
<td>
<p>provided for consistency with cbind S3 method</p>
</td></tr>
</table>


<h3>Details</h3>

<p> When passed two acs-class objects, cbind will first check to
confirm whether the objects contain compatible data: same endyear and
span; same geography.  If not, it will issue a warning, but will still
proceed.
</p>
<p>After this check, the function will return a new acs object that has
resulted from combining the two arguments column-wise.  The effect is
essentially the same as cbind on the underlying estimate and
standard.error matrices, with all the additional acs metadata tended
to.</p>


<h3>Value</h3>

<p> Returns a single new acs object with all of the data contained
in the two arguments.  </p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>

<hr>
<h2 id='confint.acs'>
Return upper and lower bounds of given confidence intervals for acs objects.
</h2><span id='topic+confint.acs'></span><span id='topic+confint'></span>

<h3>Description</h3>

<p> When passed an acs object, <code>confint</code> will return
a list of two-column dataframes (one dataframe for each variable
specified in <code>parm</code>) including lower and upper bounds for given
confidence intervals.  Intervals can be one- or two-sided.  </p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'acs'
confint(object, parm = "all", level = 0.95, alternative = "two.sided", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="confint.acs_+3A_object">object</code></td>
<td>

<p>a acs object (or subset).
</p>
</td></tr>
<tr><td><code id="confint.acs_+3A_parm">parm</code></td>
<td>
<p>which variables/columns to return confidence intervals for;
defaults to &quot;all&quot;, which computes confidence intervals for all
estimates in the acs object.</p>
</td></tr>
<tr><td><code id="confint.acs_+3A_level">level</code></td>
<td>

<p>the confidence level required &ndash; e.g., .95 = 95% confidence.
</p>
</td></tr>
<tr><td><code id="confint.acs_+3A_alternative">alternative</code></td>
<td>

<p>whether the interval should be one-sided (i.e., one-tailed &ndash; &quot;greater&quot; or
&quot;less&quot; &ndash; extending to Inf (or -Inf) on one side) or &quot;two-sided&quot;.
</p>
</td></tr>
<tr><td><code id="confint.acs_+3A_...">...</code></td>
<td>
<p>additional argument(s) for methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p> Returns a list of dataframes (one for each variable specified in
<code>parm</code>) of the lower and upper bounds of the confidence interval
for each row of the data.  </p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# load ACS data
data(kansas09)

# confidence intervals for select columns
confint(kansas09[20:25,], parm=c(4,5,10))

# another way to accomplish this
confint(kansas09[20:25,c(4,5,10)])

# store data and extract at will
my.conf &lt;- confint(kansas09)
str(my.conf)
my.conf[32]
my.conf$Universe...TOTAL.POPULATION.IN.THE.UNITED.STATES..U.S..citizen.by.naturalization  

# try a different value for level
confint(kansas09[1:10,6], level=.75)

# ... or a one-sided confidence interval
confint(kansas09[1:10,6], level=.75, alternative="greater")
confint(kansas09[1:10,29], level=.75, alternative="less")
 
</code></pre>

<hr>
<h2 id='cpi'>Consumer Price Index data (1913-2015).
</h2><span id='topic+cpi'></span>

<h3>Description</h3>

<p> Contains data on the Consumer Price Index for All Urban
Consumers (CPI-U) for the years 1913-2015 from the U.S. Bureau of Labor
Statistics.  Used by the acs package for currency conversion functions.
Scaled for base (100) to be 1982-84.</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(cpi)
</code></pre>


<h3>Format</h3>

<p>A named vector containing 103 observations, one for each year
from 1913 through 2015.</p>


<h3>Source</h3>

<p><a href="http://www.bls.gov/cpi/">http://www.bls.gov/cpi/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+currency.year">currency.year</a></code>
</p>
<p><code><a href="#topic+currency.convert">currency.convert</a></code>
</p>

<hr>
<h2 id='currency.convert'>Convert dollar values of acs object to a new base year.
</h2><span id='topic+currency.convert'></span><span id='topic+currency.convert+2Cacs-method'></span>

<h3>Description</h3>

<p><code>currency.convert</code> provides a helper function to create a new
copy of an acs-class object with a modified currency.year and
converted dollar values without altering the original object.  
</p>


<h3>Usage</h3>

<pre><code class='language-R'>
currency.convert(object, rate="auto", newyear=NA_integer_, verbose=F)

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="currency.convert_+3A_object">object</code></td>
<td>
<p> an acs object</p>
</td></tr>
<tr><td><code id="currency.convert_+3A_rate">rate</code></td>
<td>
<p>an optional rate to apply; &quot;auto&quot; (the default) will look
up values from the cpi dataset.</p>
</td></tr>
<tr><td><code id="currency.convert_+3A_newyear">newyear</code></td>
<td>
<p>an integer specifying the new value of currency.year to
convert into</p>
</td></tr>
<tr><td><code id="currency.convert_+3A_verbose">verbose</code></td>
<td>
<p>whether to print additional information about the conversion</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>currency.convert</code> provides a helper function to create a new
copy of an acs-class object with a modified currency.year and
converted dollar values without altering the original object.  When
<code>rate="auto"</code> (the default), <code>currency.convert</code> will look up
values from the <code>cpi</code> database to use in conversion.  When a
numeric rate is provided through this option, actual <code>cpi</code> values
are ignored.  When <code>verbose=T</code>, currency.convert will provide
additional information about the rates of conversion and the
acs.colnames converted.
</p>
<p>As of version 2.0 the package includes CPI data from 1913 through
2015, allowing conversion of dollar values for any years in this
range.</p>


<h3>Value</h3>

<p> Returns a new acs object with updated dollar values and
<code>currency.year</code> metadata.
</p>
<p>Unlike <code>currency.year&lt;-</code>, <code>currency.convert</code> does not alter
the original object.</p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+currency.year">currency.year</a></code>
</p>
<p><code><a href="#topic+cpi">cpi</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>lawrence10                                   # median income data, endyear = 2010
currency.convert(lawrence10, newyear=2014)   # convert $$ to 2014 dollars 
currency.convert(lawrence10, newyear=1929)   # convert $$ to 1929 dollars
</code></pre>

<hr>
<h2 id='currency.year'>Return (or change) currency.year value from the metadata of an acs object.
</h2><span id='topic+currency.year'></span><span id='topic+currency.year+3C-'></span><span id='topic+currency.year+2Cacs-method'></span><span id='topic+currency.year+3C-+2Cacs-method'></span>

<h3>Description</h3>

<p> Standard accessor/replacement method for metadata
contained within S4 acs-class objects.  </p>


<h3>Usage</h3>

<pre><code class='language-R'>currency.year(object)

currency.year(object)&lt;-value

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="currency.year_+3A_object">object</code></td>
<td>
<p> an acs object</p>
</td></tr>
<tr><td><code id="currency.year_+3A_value">value</code></td>
<td>
<p>an integer value to be used in replacement </p>
</td></tr>
</table>


<h3>Details</h3>

 <p><code>currency.year</code> will return the (integer) value of the
dollar-year of object.
</p>
<p>Assigning a new value to currency.year (through
<code>currency.year(object)&lt;-value</code> or
<code>currency.year(object)=value</code>) will change the value of
<code>currency.year</code> in the object's metadata and also modify all
dollar values of the object (as determined by
<code>acs.units(object)=="dollars"</code>) to be in the dollars of the
desired new year.
</p>
<p>A related function, <code>currency.convert</code> provides a helper function
to create a new copy of an acs-class object with a modified
currency.year and converted dollar values without altering the
original object.  When <code>rate="auto"</code> (the default),
<code>currency.convert</code> will look up values from the <code>cpi</code>
database to use in conversion.  When a numeric rate is provided
through this option, actual <code>cpi</code> values are ignored.  When
<code>verbose=T</code>, currency.convert will provide additional information
about the rates of conversion and the acs.colnames converted.
</p>
<p>As of version 2.0 the package includes CPI data from 1913 through
2015, allowing conversion of dollar values for any years in this
range.</p>


<h3>Value</h3>

<p>Returns (or replaces) an integer value from the &quot;currency.year&quot; slot of an object.
</p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cpi">cpi</a></code>
</p>
<p><code><a href="#topic+currency.convert">currency.convert</a></code>
</p>
<p><code><a href="#topic+acs-class">acs-class</a></code>
</p>

<hr>
<h2 id='divide.acs'>Divide one acs object or variable by another.
</h2><span id='topic+divide.acs'></span>

<h3>Description</h3>

<p>The <code>acs</code> package provides a new S4 method for
standard division operations using &quot;/&quot; notation.  However, due to the
nature of estimates and errors, there are actually two types of
division, with slightly different meanings: depending on which
variables are being divided, the process may be either a
&quot;proportion&quot;-type division (in which the numerator is a subset of the
denominator) or a &quot;ratio&quot;-type division (in which this is not the
case).  When dividing with standard &quot;a/b&quot; notation, the package will
always use the more conservative ratio-type procedure.  
</p>
<p>When appropriate, &quot;proportion&quot;-type division may be desirable, as it
results in lower standarard errors.  To allow users to specify which
type of division to use for acs objects, the package includes a new
<code>"divide.acs"</code> function.  (See details.)</p>


<h3>Usage</h3>

<pre><code class='language-R'>divide.acs(numerator, denominator, method="ratio", verbose=T, output="result")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="divide.acs_+3A_numerator">numerator</code></td>
<td>
<p> an acs object to divide </p>
</td></tr>
<tr><td><code id="divide.acs_+3A_denominator">denominator</code></td>
<td>
<p> an acs object to divide by </p>
</td></tr>
<tr><td><code id="divide.acs_+3A_method">method</code></td>
<td>
<p> either &quot;ratio&quot; (the default) or &quot;proportion&quot;, to
indicate what kind of division is desired </p>
</td></tr>
<tr><td><code id="divide.acs_+3A_verbose">verbose</code></td>
<td>
<p> whether to provide additional warnings or just shut up </p>
</td></tr>
<tr><td><code id="divide.acs_+3A_output">output</code></td>
<td>
<p>either &quot;result&quot; (the default), &quot;div.method&quot;, or &quot;both&quot;</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In certain cases, &quot;proportion-style&quot; division will fail, due
to the creation of a negative number under a square root when
calculating new standard errors.  To address this problem and prevent
unnecessary NaN values in the standard.errors, the package implements
the recommended Census practice of simply using &quot;ratio-style&quot; division in
those cases.
</p>
<p>If method=&quot;proportion&quot; (not the default) and verbose=T (the default),
<code>division.acs</code> will provide a warning to indicate when
&quot;ratio-style&quot; division has been used, including the number of standard
error cells so affected.  Users wishing to examine a detailed,
cell-by-cell report may run <code>divide.acs</code> with the
output=&quot;div.method&quot; of output=&quot;both&quot; to get additional diagnostic
information.
</p>
<p>See
&quot;A Compass for Understanding and Using American Community Survey Data&quot;
below for details on when this substitution is recommended.</p>


<h3>Value</h3>

<p>Returns a new acs object with the results of the division (the
default), or (when result=&quot;div.method&quot;) a martix with diagnostic
information, or (when result=&quot;both&quot;), a list with both of these
objects (the first name $result and the second $div.method).
</p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>


<h3>References</h3>


<ol>
<li><p>&quot;A Compass for Understanding and Using American Community Survey
Data: What State and Local Governments Need to Know.&quot; Washington, DC:
U.S. Census Bureau.
2009. <a href="http://www.census.gov/library/publications/2009/acs/state-and-local.html">http://www.census.gov/library/publications/2009/acs/state-and-local.html</a>.
</p>
</li></ol>


<h3>See Also</h3>

<p><code><a href="#topic+acs-class">acs-class</a></code>
</p>

<hr>
<h2 id='endyear'>Return or replace endyear value from the metadata of an acs object.
</h2><span id='topic+endyear+3C-'></span><span id='topic+endyear'></span><span id='topic+endyear+2Cacs-method'></span><span id='topic+endyear+3C-+2Cacs-method'></span>

<h3>Description</h3>

 <p><code>endyear()</code> will return the (integer) value of the
latest year of the object (for example, for the 2005-2009 ACS survey,
<code>endyear</code> = 2009.)  When used for assignment, <code>endyear&lt;-</code> will
change the value of the endyear slot in an acs object, warning the user
that this is an unusual thing to do.  </p>


<h3>Usage</h3>

<pre><code class='language-R'>endyear(object)

endyear(object)&lt;-value

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="endyear_+3A_object">object</code></td>
<td>
<p> an acs object
</p>
</td></tr>
<tr><td><code id="endyear_+3A_value">value</code></td>
<td>
<p>an integer to use as the new endyear</p>
</td></tr>
</table>


<h3>Details</h3>

<p> Normal operations on acs objects should not involve altering
the value of endyear (although users may wish to change the value of
currency.year for comparisons with other objects).  Sometimes endyear
may be set incorrectly when data is imported, in which case
<code>endyear&lt;-</code> may be necessary.</p>


<h3>Value</h3>

<p>Returns (or replaces) an integer value from the <code>endyear</code> slot of an object.
</p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>


<h3>See Also</h3>

<p><code>currency.year</code>, which is often what users will be intending to
modify
</p>
<p><code><a href="#topic+acs-class">acs-class</a></code>
</p>

<hr>
<h2 id='fips.state'>
FIPS codes and geographic names for use in searching and creating
geographies in the acs package.
</h2><span id='topic+fips.state'></span><span id='topic+fips.county'></span><span id='topic+fips.county.subdivision'></span><span id='topic+fips.place'></span><span id='topic+fips.school'></span><span id='topic+fips.american.indian.area'></span>

<h3>Description</h3>

<p>FIPS codes and geographic names for use in searching and creating
geographies in the acs package.  (Used internally.)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(fips.state)</code></pre>


<h3>Format</h3>

<p>Each table is a dataframe containing FIPS codes and names from
the US Census.</p>


<h3>Source</h3>

<p>State: http://www.census.gov/geo/reference/ansi_statetables.html
</p>
<p>County: http://www.census.gov/geo/www/codes/county/download.html
</p>
<p>County Subdivision:
http://www.census.gov/geo/www/codes/cousub/download.html
</p>
<p>Place: http://www.census.gov/geo/www/codes/place/download.html
</p>
<p>School: http://www.census.gov/geo/www/codes/sd/
</p>
<p>American Indian Area:  http://www.census.gov/geo/www/codes/aia/
</p>

<hr>
<h2 id='flatten.geo.set'>
Convenience function to &quot;flatten&quot; a nested geo.set object.
</h2><span id='topic+flatten.geo.set'></span>

<h3>Description</h3>

<p>In the acs package, geo.set objects may contain nested levels of geo.set
objects, which is often desired (to organize complex sets and subsets of
geography).  Sometimes, however, when combining these sets, users may
prefer to remove the nesting levels.  This convenience function will
recursively prowl through a geo.set and return a single flat geo.set
(one level deep) containing of the composite geographies.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flatten.geo.set(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flatten.geo.set_+3A_x">x</code></td>
<td>
<p> the geo.set to be flattened
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a new geo.set object.
</p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geo.set-class">geo.set-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# a multiple-county geo.set
psrc=geo.make(state="WA", county=c(33,35,53,61))

# combine geo.sets
north.mercer.island=geo.make(state=53, county=33, tract=c(24300,24400))
optional.tract=geo.make(state=53, county=33, tract=24500)
# add in one more tract to create new, larger geo
north.mercer.island.plus=north.mercer.island + optional.tract

# created a nested geo.set
 my.nested.geo.set=c(north.mercer.island.plus, psrc)
str(my.nested.geo.set)
length(my.nested.geo.set)

# .. and flatten in out
#    note difference in structure and length
my.flat.geo.set=flatten.geo.set(my.nested.geo.set)
str(my.flat.geo.set)
length(my.flat.geo.set)
</code></pre>

<hr>
<h2 id='geo.lookup'>
Search Census geographies 
</h2><span id='topic+geo.lookup'></span>

<h3>Description</h3>

<p>When working with the acs package and the <code>acs.fetch</code> and
<code>geo.make</code> functions, it can be difficult to find exactly the right
geographic units: <code>geo.make</code> expects single matches to the groups
of arguments it is given, which can be problematic when trying to find
names for places or county subdivisions, which are unfamiliar to many
users (and often seem very close or redundant: e.g., knowing whether to
look for &quot;Moses Lake city&quot; vs. &quot;Moses Lake CDP&quot;).  To help, the
<code>geo.lookup</code> function will search on the same arguments as
<code>geo.make</code>, but outputs all the matches for your inspection.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geo.lookup(state, county, county.subdivision, place,
  american.indian.area, school.district, school.district.elementary,
  school.district.secondary, school.district.unified)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="geo.lookup_+3A_state">state</code></td>
<td>
<p>either the two-digit numeric FIPS code for the state, the
two-letter postal abbreviation, or a character string to match in
the state name</p>
</td></tr>
<tr><td><code id="geo.lookup_+3A_county">county</code></td>
<td>
<p>either the numeric FIPS code for the county or a character
string to match in the county name </p>
</td></tr>
<tr><td><code id="geo.lookup_+3A_county.subdivision">county.subdivision</code></td>
<td>
<p>either the numeric FIPS code for the county
subdivision or a character string to match in the county subdivision
name</p>
</td></tr>
<tr><td><code id="geo.lookup_+3A_place">place</code></td>
<td>
<p>either the numeric FIPS code for the place or a character
string to match in the place name</p>
</td></tr>
<tr><td><code id="geo.lookup_+3A_american.indian.area">american.indian.area</code></td>
<td>
<p>either the numeric FIPS code for the
American Indian Area/Alaska Native Area/Hawaiian Home Land, or a
character string to match in the names of these Census areas</p>
</td></tr>
<tr><td><code id="geo.lookup_+3A_school.district">school.district</code></td>
<td>
<p>either the numeric FIPS code for the state
school district (any type), or a character string to search for in
the names of the school districts.</p>
</td></tr>
<tr><td><code id="geo.lookup_+3A_school.district.elementary">school.district.elementary</code></td>
<td>
<p>either the numeric FIPS code for
the state school district (elementary), or a character string to
search for in the names of these elementary school districts.</p>
</td></tr>
<tr><td><code id="geo.lookup_+3A_school.district.secondary">school.district.secondary</code></td>
<td>
<p>either the numeric FIPS code for the
state school district (secondary), or a character string to search
for in the names of these secondary school districts.</p>
</td></tr>
<tr><td><code id="geo.lookup_+3A_school.district.unified">school.district.unified</code></td>
<td>
<p>either the numeric FIPS code for the
state school district (unified), or a character string to search for
in the names of these unified school districts.</p>
</td></tr>
</table>


<h3>Details</h3>

<p> Unlike <code>geo.make</code>, <code>geo.lookup</code> searches for
matches anywhere in geographic names (except when dealing with state
names), and will output a dataframe showing candidates that match some
or all of the arguments.  (When multiple arguments are provided, the
logic is a little complicated: basically, with the exception of American
Indian Areas, to be included all geographies must match the given state
name; when a county and a subdivision are both given, both must match;
otherwise, geographies are included that match any &mdash; but not
necessarily all &mdash; of the other arguments.)  </p>


<h3>Value</h3>

<p> Returns a
dataframe of the matching geographies, with one column for each of the
given search terms.  </p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geo.make">geo.make</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>geo.lookup(state="WA", county="Ska", county.subdivision="oo")
geo.lookup(state="WA", county="Kit", place="Ra")

# find all counties in WA or OR with capital M or B in name
geo.lookup(state=c("WA", "OR"), county=c("M","B"))

# find all unified school districts in Kansas with "Ma" in name
geo.lookup(state="KS", school.district.unified="Ma")

# find all american indian areas with "Hop" in name
geo.lookup(american.indian.area="Hop")
</code></pre>

<hr>
<h2 id='geo.make'>
Create a new geo.set object for use with the acs package.
</h2><span id='topic+geo.make'></span>

<h3>Description</h3>

<p> The <code>geo.make</code> function is used to create new
user-specified geographies for use with the <code>acs.fetch</code> function of
the acs package.  At the most basic level, a user specifies some
combination of existing census levels (state, county, county
subdivision, place, tract, block group, msa, csa, puma, and more &ndash; see
arguments), and the function returns a new geo.set object holding this
information.
</p>
<p>When specifying state, county, county subdivision, place, american
indian area, and/or any of the state school district arguments,
<code>geo.make</code> will accept either FIPS codes or common geographic
names, and will try to match on partial strings; there is also limited
support for regular expressions, but by default the searches are case
sensitive and matches are expected at the start of names. (For example,
<code>geo.make(state="WA", county="Kits")</code> should find Kitsap County,
and the more adventurous <code>yakima=geo.make(state="Washi",
county=".*kima")</code> should work to create the a geo.set for Yakima
county.)
</p>
<p>Other geographies (including tract, block.group, csa, msa, region,
division, urban.area, necta, puma, zip.code. and/or
congressional.district) can only be specified by FIPS codes (or &quot;*&quot; for
all).
</p>
<p>Tracts should be specified as six digit numbers, although initial zeroes
may be removed; note that trailing zeroes are often removed in common
usage, so a tract that may be referred to as &quot;tract 243&quot; is technically
FIPS code 24300; likewise &quot;tract 3872.01&quot; is FIPS code 387201 for the
purposes of geo.make.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geo.make(us, region, division, state, county, county.subdivision,
  place, tract, block.group, msa, csa, necta, urban.area,
  congressional.district, state.legislative.district.upper,
  state.legislative.district.lower, puma, zip.code,
  american.indian.area, school.district.elementary,
  school.district.secondary, school.district.unified,
  combine = F, combine.term = "aggregate", check = FALSE, key = "auto")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="geo.make_+3A_us">us</code></td>
<td>
<p>either the number 1, the character &quot;*&quot;, or TRUE, indicating
whether the geo.set should contain data for the entire U.S.; if
selected, no other geography options may be specified; setting us
corresponds to using census summary level 010.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_region">region</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for all) corresponding
to the desired FIPS region (e.g., region=1 for Census Northeast
Region); if selected, no other geography options may be specified;
setting region corresponds to using census summary level 020.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_division">division</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for all) corresponding
to the desired FIPS division (e.g., division=4 for Census West North
Central Division); if selected, no other geography options may be
specified; setting division corresponds to using census summary
level 030.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_american.indian.area">american.indian.area</code></td>
<td>
<p>either the numeric code (or wildcard &quot;*&quot;
for all) corresponding to the desired FIPS American Indian
Area/Alaska Native Area/Hawaiian Home Land, or a character string to
match in the names of these Census areas; if selected, no other
geography options may be specified; setting american.indian.area
corresponds to using census summary level 250.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_state">state</code></td>
<td>
<p>either the two-digit numeric FIPS code for the state, the
two-letter postal abbreviation, or a character string to match in
the state name (or wildcard &quot;*&quot; for all); setting state without
other options corresponds to using census summary level 040, but it
may be used in conjunction with other summary levels below.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_county">county</code></td>
<td>
<p>either the numeric FIPS code (or wildcard &quot;*&quot; for all)
for the county or a character string to match in the county name;
setting state and county without other options corresponds to using
census summary level 050, but they may be used in conjunction with
other summary levels below.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_county.subdivision">county.subdivision</code></td>
<td>
<p>either the numeric FIPS code (or wildcard
&quot;*&quot; for all) for the county subdivision or a character string to
match in the county subdivision name; setting state, county, and
county.subdivision without other options corresponds to using census
summary level 060.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_place">place</code></td>
<td>
<p>either the numeric FIPS code (or wildcard &quot;*&quot; for all)
for the place or a character string to match in the place name;
setting state and place without other options corresponds to using
census summary level 160.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_tract">tract</code></td>
<td>
<p>a six digit numeric FIPS code (or wildcard &quot;*&quot; for all)
for the census tract, including trailing zeroes; remove decimal
points; leading zeroes may be omitted; see description; tract may be
used with state and county to create geo.sets for census summary
levels 140, and with state, county, and block.group for summary
level 150.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_block.group">block.group</code></td>
<td>
<p>the numeric FIPS code (or wildcard &quot;*&quot; for all) for
the block.group; block.group may be used with state, county, and
tract to create geo.sets for census summary levels 150.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_msa">msa</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for all) corresponding to
the desired FIPS metropolitan statistical area/micropolitan
statistical area (e.g., msa=10100 for Aberdeen, SD micropolitan
statistical area); setting msa without other options corresponds to
using census summary level 310, but it may be used in conjunction
with state for summary level 320.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_csa">csa</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for all) corresponding to
the desired FIPS combined statistical area (e.g., csa=104 for Census
Albany-Schenectady-Amsterdam, NY CSA); setting csa without other
options corresponds to using census summary level 330, but it may be
used in conjunction with state for summary level 340.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_necta">necta</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for all) corresponding to
the desired FIPS New England City and Town Area (e.g., necta=77650
for Rutland, VT Micropolitan NECTA); if selected, no other
geography options may be specified; setting necta corresponds to
using census summary level 350.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_urban.area">urban.area</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for all)
corresponding to the desired FIPS urban area (e.g., urban.area=3169
for Aromas, CA Urban Cluster); if selected, no other
geography options may be specified; setting urban.area corresponds
to using census summary level 400.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_congressional.district">congressional.district</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for all)
corresponding to the desired FIPS congressional district (e.g.,
state=&quot;ME&quot; and congressional.district=1 for Maine's first
congressional district); setting state and congressional.district
without other options corresponds to using census summary level 500,
but they may be used in conjunction with county for summary level
510.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_state.legislative.district.upper">state.legislative.district.upper</code></td>
<td>
<p>a numeric or character code
(or wildcard &quot;*&quot; for all) corresponding to the desired FIPS state
legislative district (upper chamber); these codes vary from state to
state, and are sometimes numbers (1, 2, 3, etc. in Massachusetts)
and sometimes letters (&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, etc. in Alaska); setting state
and state.legislative.district.upper without other options
corresponds to using census summary level 610.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_state.legislative.district.lower">state.legislative.district.lower</code></td>
<td>
<p>a numeric or character code
(or wildcard &quot;*&quot; for all) corresponding to the desired FIPS state
legislative district (lower chamber); these codes vary from state to
state, and are sometimes numbers (1, 2, 3, etc. in Massachusetts)
and sometimes letters (&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, etc. in Alaska); setting state
and state.legislative.district.lower without other options
corresponds to using census summary level 620.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_puma">puma</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for all) corresponding to
the desired FIPS public use microdata area (e.g., state=10 and
puma=103 for PUMA 103 in Delaware); setting state and puma
without other options corresponds to using census summary level
795.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_zip.code">zip.code</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for all) corresponding
to the desired zip code tabulation area (e.g., zip.code=91303 for
zip code 91303); if selected, no other geography options may be
specified; setting zip.code corresponds to using census summary
level 860.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_school.district.elementary">school.district.elementary</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for
all) corresponding to the desired FIPS state school district
(elementary), or a character string to search for in the names of
these districts; setting state and school.district.elementary
without other options corresponds to using census summary level
950.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_school.district.secondary">school.district.secondary</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for
all) corresponding to the desired FIPS state school district
(secondary), or a character string to search for in the names of
these districts; setting state and school.district.secondary
without other options corresponds to using census summary level
960.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_school.district.unified">school.district.unified</code></td>
<td>
<p>a numeric code (or wildcard &quot;*&quot; for
all) corresponding to the desired FIPS state school district
(unified), or a character string to search for in the names of these
districts; setting state and school.district.unified without other
options corresponds to using census summary level 970.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_combine">combine</code></td>
<td>
<p>a logical flag to indicate whether the component
geographies of the geo.set are to be combined when data is
downloaded; see details.</p>
</td></tr>
<tr><td><code id="geo.make_+3A_combine.term">combine.term</code></td>
<td>
<p>a character string to provide a label for
aggregate geography, if data is combined</p>
</td></tr>
<tr><td><code id="geo.make_+3A_check">check</code></td>
<td>
<p>logical flag indicating whether to run a check for valid
geographies with Census API; defaults to FALSE; when TRUE, a current
API key must be provided or installed</p>
</td></tr>
<tr><td><code id="geo.make_+3A_key">key</code></td>
<td>
<p>when check=T and no API key has been previously installed
through <code>api.key.install</code>, a string key may be provided here</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In addition to creating individual combinations of census
geographies, users can pass vector arguments (with recycling) to
geo.make to create sets of geographies.  Important: each set of
arguments must match with exactly one known Census geography: if, for
example, the names of two places (or counties, or whatever) would both
match, the <code>geo.make</code> function will return an error. (To the
development team, this seemed preferable to simply including both
matches, since all sorts of place names might match a string, and it
is doubtful a user really wants them all.)  The one exception to this
&quot;single match&quot; rule is that for the smallest level of geography
specified, a user can enter &quot;*&quot; to indicate that all geographies at
that level should be selected.
</p>
<p>When creating new geographies, note, too, that not all combinations
are valid.  In particular the package attempts to follow paths through
the Census summary levels (such as summary level 140:
&quot;state-county-tract&quot; or summary level 160: &quot;state-place&quot;).  So when
specifying, for example, state, county, and place, the county will be
ignored.
</p>
<p>Note: when a geo.set with &quot;combine=T&quot; is passed to <code>acs.fetch</code>,
downloaded data will be aggregated in the resulting acs abject.  Some
users may therefore wish to specify &quot;one.zero=T&quot; as an additional
argument to <code>acs.fetch</code>; see <code><a href="#topic+sum-methods">sum-methods</a></code>.  
</p>
<p>The following table may be helpful in figuring out which options to set
for which Census summary levels.  For more information on which datasets
and endyear/span combinations are available for each summary level, see
<a href="http://www.census.gov/data/developers/data-sets.html">http://www.census.gov/data/developers/data-sets.html</a> (click each
dataset and search for &quot;Examples and Supported Geography&quot;).
</p>

<table>
<tr>
 <td style="text-align: center;">
  SUMMARY LEVEL </td><td style="text-align: left;"> ARGUMENTS REQUIRED </td>
</tr>
<tr>
 <td style="text-align: center;">
  010  </td><td style="text-align: left;"> us </td>
</tr>
<tr>
 <td style="text-align: center;">
  020  </td><td style="text-align: left;"> region   </td>
</tr>
<tr>
 <td style="text-align: center;">
  030 </td><td style="text-align: left;">  division </td>
</tr>
<tr>
 <td style="text-align: center;">
  040 </td><td style="text-align: left;">  state </td>
</tr>
<tr>
 <td style="text-align: center;">
  050  </td><td style="text-align: left;"> state, county </td>
</tr>
<tr>
 <td style="text-align: center;">
  060 </td><td style="text-align: left;"> state, county, county.subdivision </td>
</tr>
<tr>
 <td style="text-align: center;">
  140  </td><td style="text-align: left;"> state, county, tract </td>
</tr>
<tr>
 <td style="text-align: center;">
  150  </td><td style="text-align: left;"> state, county, tract, block.group  </td>
</tr>
<tr>
 <td style="text-align: center;">
  160 </td><td style="text-align: left;">  state, place </td>
</tr>
<tr>
 <td style="text-align: center;">
  250 </td><td style="text-align: left;"> american.indian.area </td>
</tr>
<tr>
 <td style="text-align: center;">
  310 </td><td style="text-align: left;"> msa </td>
</tr>
<tr>
 <td style="text-align: center;">
  320 </td><td style="text-align: left;"> state, msa  </td>
</tr>
<tr>
 <td style="text-align: center;">
  330 </td><td style="text-align: left;"> csa </td>
</tr>
<tr>
 <td style="text-align: center;">
  340 </td><td style="text-align: left;"> state, csa  </td>
</tr>
<tr>
 <td style="text-align: center;">
  350  </td><td style="text-align: left;"> necta   </td>
</tr>
<tr>
 <td style="text-align: center;">
  400  </td><td style="text-align: left;"> urban.area  </td>
</tr>
<tr>
 <td style="text-align: center;">
  500  </td><td style="text-align: left;"> state, congressional.district </td>
</tr>
<tr>
 <td style="text-align: center;">
  510    </td><td style="text-align: left;"> state, congressional.district, county  </td>
</tr>
<tr>
 <td style="text-align: center;">
  610    </td><td style="text-align: left;"> state, state.legislative.district.upper  </td>
</tr>
<tr>
 <td style="text-align: center;">
  620    </td><td style="text-align: left;"> state, state.legislative.district.lower  </td>
</tr>
<tr>
 <td style="text-align: center;">
  795    </td><td style="text-align: left;"> state, puma  </td>
</tr>
<tr>
 <td style="text-align: center;">
  860  </td><td style="text-align: left;"> zip.code  </td>
</tr>
<tr>
 <td style="text-align: center;">
  950  </td><td style="text-align: left;"> state, school.district.elementary  </td>
</tr>
<tr>
 <td style="text-align: center;">
  960  </td><td style="text-align: left;"> state, school.district.secondary  </td>
</tr>
<tr>
 <td style="text-align: center;">
  970  </td><td style="text-align: left;"> state, school.district.unified  </td>
</tr>
<tr>
 <td style="text-align: center;">
</td>
</tr>

</table>

<p>All other arguments/combinations will either be ignored or result in a
failure.  </p>


<h3>Value</h3>

<p> Returns a geo.set class object.  </p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>


<h3>References</h3>


<ol>
<li><p>&quot;acs.R: An R Package for Neighborhood-Level Data from the
U.S. Census.&quot; Ezra Haber Glenn, Department of Urban Studies and
Planning, Massachusetts Institute of Technology.  Presented at the
Computers in Urban Planning and Urban Management Conference, July
6, 2011.
<a href="http://papers.ssrn.com/sol3/papers.cfm?abstract_id=2171390">http://papers.ssrn.com/sol3/papers.cfm?abstract_id=2171390</a>.
</p>
</li>
<li><p>Census API Supported Geography:
<a href="http://www.census.gov/data/developers/data-sets.html">http://www.census.gov/data/developers/data-sets.html</a></p>
</li></ol>


<h3>See Also</h3>

<p><code><a href="#topic+geo.set-class">geo.set-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# some single-state geo.sets
washington=geo.make(state=53)
alabama=geo.make(state="Alab")

# a county match
yakima=geo.make(state="WA", county="Yakima")
yakima

# a multiple-county geo.set
psrc=geo.make(state="WA", county=c(33,35,53,61))
psrc

# combine geo.sets
north.mercer.island=geo.make(state=53, county=33, tract=c(24300,24400))
optional.tract=geo.make(state=53, county=33, tract=24500)
# add in one more tract to create new, larger geo
north.mercer.island.plus=north.mercer.island + optional.tract

# using wildcards

# all unified school districts in Kansas
geo.make(state="KS", school.district.unified="*")

# all state house districts in Alaska
geo.make(state="AK", state.legislative.district.lower="*")

# all tracts in Kings County, NY
geo.make(state="NY", county="King", tract="*")

</code></pre>

<hr>
<h2 id='geo.set-class'>Class <code>"geo.set"</code></h2><span id='topic+geo-class'></span><span id='topic+geo.set-class'></span><span id='topic+api.for'></span><span id='topic+api.in'></span><span id='topic+sumlev'></span><span id='topic+is.geo'></span><span id='topic+geo.list'></span><span id='topic+is.geo.set'></span><span id='topic++5B+2Cgeo.set-method'></span><span id='topic++5B+5B+2Cgeo.set-method'></span><span id='topic++5B+3C-+2Cgeo.set-method'></span><span id='topic++5B+5B+3C-+2Cgeo.set-method'></span><span id='topic++2B+2Cgeo+2Cgeo.set-method'></span><span id='topic++2B+2Cgeo.set+2Cgeo-method'></span><span id='topic++2B+2Cgeo+2Cgeo-method'></span><span id='topic++2B+2Cgeo.set+2Cgeo.set-method'></span><span id='topic+c+2Cgeo.set-method'></span><span id='topic+combine'></span><span id='topic+combine.term'></span><span id='topic+combine+3C-+2Cgeo.set-method'></span><span id='topic+combine+2Cgeo.set-method'></span><span id='topic+combine.term+3C-+2Cgeo.set-method'></span><span id='topic+combine.term+2Cgeo.set-method'></span><span id='topic+geo.list+2Cgeo.set-method'></span><span id='topic+length+2Cgeo.set-method'></span><span id='topic+show+2Cgeo-method'></span><span id='topic+name+2Cgeo-method'></span><span id='topic+sumlev+2Cgeo-method'></span><span id='topic+api.for+2Cgeo-method'></span><span id='topic+api.in+2Cgeo-method'></span><span id='topic+combine+3C-'></span><span id='topic+combine.term+3C-'></span><span id='topic+name'></span>

<h3>Description</h3>

<p>The geo.set class provides a convenient wrapper for
user-defined geographies, used for downloading data from the U.S. Census
American Community Survey.  A geo.set may hold the designation of a
single geography (say, a census tract, a county, or a state), or may
bundle together multiple geographies of various levels, which may or may
not be &quot;combined&quot; when downloaded.  Note that geo.sets may even contain
nested geo.sets.
</p>
<p>Note: even a single geographic unit &mdash; one specific tract or county &mdash;
must be wrapped up as a geo.set.  Technically, each individual element
in the set is known as a &quot;geo&quot;, but users will rarely (if ever) interact
will individual elements such as this; wrapping all groups of
geographies &mdash; even groups consisting of just one element &mdash; in
geo.sets like this will help make them easier to deal with as the
geographies get more complex.
</p>
<p>geo.set objects may be combined with the simple addition operator
(<code>+</code>).  By default, this will always return &quot;flat&quot; geo.sets with
all the geographies in a single list.  The combination operator
(<code>c</code>), on the other hand, will generally return nested hierarchies,
embedding sets within sets.  When working with nested sets like this,
the &quot;combine&quot; flag can be set at each level to aggregate subsets within
the structure (although be careful &mdash; if a higher level of set includes
&quot;combine=T&quot; you'll never actually see the unaggregated subsets deeper
down).
</p>
<p>Using these different techniques, users are able to create whatever sort
of new geographies they need &mdash; aggregating some geographies, keeping
others distinct (but still bundled as a set for convenience), mixing and
matching different levels of Census geography, and so on.
</p>


<h3>Objects from the Class</h3>

<p>Objects can be created by calls of the form <code>new("geo.set", ...)</code>,
or more frequently through the <code>geo.make()</code> helper function.
</p>


<h3>Slots</h3>


<dl>
<dt><code>geo.list</code>:</dt><dd><p>Object of class <code>"list"</code> containing individual census geographies (as geo class
object) and/or geo.sets.</p>
</dd>
<dt><code>combine</code>:</dt><dd><p>Object of class <code>"logical"</code> indicating
whether or not data from the constituent geographies should be
combined when downloaded.  Set with <code>combine&lt;-</code> or specified
when using <code>geo.make</code>. </p>
</dd>
<dt><code>combine.term</code>:</dt><dd><p>Object of class <code>"character"</code>
indicating a new label to use when data is combined; ignored when
combine set to F.  Set with <code>combine.term&lt;-</code> or specified
when using <code>geo.make</code>. </p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt>[</dt><dd><p><code>signature(x = "geo.set")</code>: subset geo.set, similar to
single-bracket list subsetting in R</p>
</dd>
<dt>[[</dt><dd><p><code>signature(x = "geo.set")</code>: subset geo.set, similar to
double-bracket list subsetting in R </p>
</dd>
<dt>+</dt><dd><p><code>signature(e1 = "geo", e2 = "geo")</code>: combine two geo
objects; returns a geo.set (generally reserved for internal use) </p>
</dd>
<dt>+</dt><dd><p><code>signature(e1 = "geo", e2 = "geo.set")</code>: combine a geo object
onto an existing geo.set; returns a geo.set (generally reserved for internal use)</p>
</dd>
<dt>+</dt><dd><p><code>signature(e1 = "geo.set", e2 = "geo")</code>: combine an
existing geo.set object with a geo object; returns a geo.set (generally reserved for internal use) </p>
</dd>
<dt>+</dt><dd><p><code>signature(e1 = "geo.set", e2 = "geo.set")</code>: combine
two geo.set objects; always flattens each set &ndash; no nesting </p>
</dd>
<dt>c</dt><dd><p><code>signature(x = "geo.set")</code>: combine two or more
geo.set objects, preserving the structure of each &ndash; allows nesting </p>
</dd>
<dt>combine&lt;-</dt><dd><p><code>signature(object = "geo.set")</code>: used to
set or change value of combine</p>
</dd>
<dt>combine</dt><dd><p><code>signature(object = "geo.set")</code>: returns logical
value of combine </p>
</dd>
<dt>combine.term&lt;-</dt><dd><p><code>signature(object = "geo.set")</code>: used to
set or change combine.term </p>
</dd>
<dt>combine.term</dt><dd><p><code>signature(object = "geo.set")</code>: returns combine.term </p>
</dd>
<dt>geo.list</dt><dd><p><code>signature(object = "geo.set")</code>: returns the
geo.list of the geo.set (used internally)</p>
</dd>
<dt>length</dt><dd><p><code>signature(x = "geo.set")</code>: returns an integer
indicating how many geographies it contains; non-recursive. </p>
</dd>
<dt>name</dt><dd><p><code>signature(object = "geo")</code>: returns the text name
of an individual geo object.</p>
</dd>
<dt>sumlev</dt><dd><p><code>signature(object = "geo")</code>: returns the summary
level of an individual geo object.</p>
</dd>  </dl>
 

<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>


<h3>References</h3>

<p>http://eglenn.scripts.mit.edu/citystate/category/code/
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geo.make">geo.make</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>showClass("geo.set")
</code></pre>

<hr>
<h2 id='geography'>Return or replace geography metadata of an acs object.
</h2><span id='topic+geography+3C-'></span><span id='topic+geography'></span><span id='topic+geography+2Cacs-method'></span><span id='topic+geography+3C-+2Cacs-method'></span>

<h3>Description</h3>

 <p><code>geography()</code> will return the geography of an acs
object, as a dataframe.  Depending on the format of the data at import
(and possibly the values of <code>geocols=</code>, if the object was created
with <code>read.acs</code>), this may have multiple columns, but the number
of geographic rows should be the same as the number of rows of the acs
estimates and standard errors.
</p>
<p>When used for assignment, <code>geography&lt;-</code> will change the values
contained in the metadata, replacing the existing dataframe with a new
one.  To replace a single value or a limited subset, call with
subsetting (e.g., <code>geography(object)[i,j]&lt;-value</code> or
<code>geography(object)[[i]]&lt;-value</code>; note that the brackets should
occur <em>outside</em> the call &ndash; you are subsetting the dataframe, not
the object).
</p>
<p>To help with replacement operations, the package provides a new
<code>prompt</code> method, which can be used to interactively set new
values for geography (as well as other metadata); see
<code>prompt.acs</code>. </p>


<h3>Usage</h3>

<pre><code class='language-R'>geography(object)

geography(object)&lt;-value

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="geography_+3A_object">object</code></td>
<td>
<p> an acs object
</p>
</td></tr>
<tr><td><code id="geography_+3A_value">value</code></td>
<td>
<p>a dataframe containing geographic metadata; must contain
the same number of rows as the object </p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns (or replaces) a dataframe containing the <code>geography</code> slot of an object.
</p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+prompt.acs">prompt.acs</a></code>, a helper function to interactively generate
a new geography dataframe to be used for replacement.
</p>
<p><code><a href="#topic+acs-class">acs-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(lawrence10)
geography(lawrence10)
str(geography(lawrence10))
</code></pre>

<hr>
<h2 id='kansas07'>
County-level data from the 2007 American Community Survey for Kansas for
use in examples of acs package.
</h2><span id='topic+kansas07'></span>

<h3>Description</h3>

<p>County-level data from the 2007 American Community Survey for Kansas.
Contains demographic data on sex, age, and citizenship.  Used for
examples in acs package.  <code>kansas07</code> and the corresponding
five-year survey data in <code>kansas09</code> provide acs objects to test
and demonstrate various functions in the package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(kansas07)</code></pre>


<h3>Format</h3>

<p>An acs-class object with 7 rows/geographies and 55 demographic
variables, representing county-level ACS data for the state of Kansas.  Also includes
geographic and other metadata.
</p>
<p>Note that in comparison to <code>kansas09</code>, <code>kansas07</code> has far
fewer rows, which illustrates the fact that the Census only provides
ACS one-year data for the largest counties (over 65,000 population).
</p>


<h3>Source</h3>

<p>U.S. Census American Community Survey, 2007; <a href="http://www.census.gov/">http://www.census.gov/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(kansas07)
str(kansas07)
class(kansas07)

geography(kansas07)

# subsetting
kansas07[1:3,2:4]

# row-wise addition
kansas07[1,6]+kansas07[2,6]

# column-wise addition
kansas07[1:4,3]+kansas07[1:4,27]

</code></pre>

<hr>
<h2 id='kansas09'>
County-level data from the 2005-2009 American Community Survey for Kansas for
use in examples of acs package.
</h2><span id='topic+kansas09'></span>

<h3>Description</h3>

<p>County-level data from the 2005-2009 American Community Survey for Kansas.
Contains demographic data on sex, age, and citizenship.  Used for
examples in acs package.  <code>kansas09</code>, and the corresponding
one-year survey data in <code>kansas07</code>, provide acs objects to test
and demonstrate various functions in the package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(kansas09)</code></pre>


<h3>Format</h3>

<p>An acs-class object with 105 rows/geographies and 55 demographic
variables, representing county-level ACS data for the state of Kansas.  Also includes
geographic and other metadata.</p>


<h3>Source</h3>

<p>U.S. Census American Community Survey, 2009; <a href="http://www.census.gov/">http://www.census.gov/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(kansas09)
str(kansas09)
class(kansas09)

geography(kansas09)

# subsetting
kansas09[1:3,2:4]

# row-wise addition
kansas09[1,6]+kansas09[2,6]

# column-wise addition
kansas09[1:4,3]+kansas09[1:4,27]

</code></pre>

<hr>
<h2 id='lawrence10'>
Tract-level data from the 2006-2010 American Community Survey for
Lawrence, MA for use in examples of acs package.
</h2><span id='topic+lawrence10'></span>

<h3>Description</h3>

<p>Tract-level data from the 2006-2010 American Community Survey for
Lawrence, MA.  Contains median household income.  Used for
examples in acs package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(lawrence10)</code></pre>


<h3>Format</h3>

<p>An acs-class object with 18 rows/geographies and 1 variable,
representing tract-level ACS data for the city of Lawrence, MA from
2006-2010.  Also includes geographic and other metadata.</p>


<h3>Source</h3>

<p>U.S. Census American Community Survey, 2010; <a href="http://www.census.gov/">http://www.census.gov/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(lawrence10)
str(lawrence10)
class(lawrence10)

# subsetting
lawrence10[1:3,1]

# row-wise subtraction
lawrence10[1,1]+lawrence10[2,1]

</code></pre>

<hr>
<h2 id='plot-methods'>acs Methods for Function <code>plot</code></h2><span id='topic+plot'></span><span id='topic+plot-methods'></span><span id='topic+plot+2Cacs-method'></span><span id='topic+plot+2Cacs+2Cacs-method'></span>

<h3>Description</h3>

<p>Plot acs objects, with both estimates and confidence intervals.</p>


<h3>Usage</h3>

<pre><code class='language-R'>
## S4 method for signature 'acs'
plot(x, conf.level=.95, err.col="red", err.lwd=1,
err.pch="-", err.cex=2, err.lty=2, x.res=300, labels="auto",
by="geography", true.min=T, ...)

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot-methods_+3A_x">x</code></td>
<td>
<p>the acs object to be plotted</p>
</td></tr>
<tr><td><code id="plot-methods_+3A_conf.level">conf.level</code></td>
<td>
<p>the desired confidence interval to use for error
bars; numeric between 0&lt;1</p>
</td></tr> 
<tr><td><code id="plot-methods_+3A_err.col">err.col</code></td>
<td>
<p>the color to use for the error bars; analogous to
graphic parameter <code>col</code></p>
</td></tr>
<tr><td><code id="plot-methods_+3A_err.lwd">err.lwd</code></td>
<td>
<p>the line weight to use for the error bars; analogous to
graphic parameter <code>lwd</code></p>
</td></tr>
<tr><td><code id="plot-methods_+3A_err.pch">err.pch</code></td>
<td>
<p>the point character to use for the error bars; analogous to
graphic parameter <code>pch</code></p>
</td></tr>
<tr><td><code id="plot-methods_+3A_err.cex">err.cex</code></td>
<td>
<p>the scaling factor to use for the error bars; analogous to
graphic parameter <code>cex</code></p>
</td></tr>
<tr><td><code id="plot-methods_+3A_err.lty">err.lty</code></td>
<td>
<p>the line type to use for the error bars; analogous to
graphic parameter <code>lty</code></p>
</td></tr>
<tr><td><code id="plot-methods_+3A_x.res">x.res</code></td>
<td>
<p>when plot called with a single acs value (see below), x.res
determines the resolution of the resulting density plot; integer
(defaults to 300, i.e., the curve is drawn with 300 points)</p>
</td></tr>
<tr><td><code id="plot-methods_+3A_labels">labels</code></td>
<td>
<p>the labels to use for the x axis; defaults to either
geography names or acs.colnames based on dimensions of object plotted; vector of proper length required</p>
</td></tr>
<tr><td><code id="plot-methods_+3A_by">by</code></td>
<td>
<p>in cases where multiple rows and columns are plotted,
whether to provide a different plot for each value of <code>geography</code> (the
default) or  <code>acs.colnames</code>; accepts either &quot;geography&quot; or &quot;acs.colnames&quot;</p>
</td></tr> 
<tr><td><code id="plot-methods_+3A_true.min">true.min</code></td>
<td>
<p>whether to limit the lower bound of a confidence
interval to some value or now; <code>TRUE</code> (the default) allows for
negative lower bounds; also accepts <code>FALSE</code> to limit lower bounds
to 0, or any number, to use that as a minimum lower bound; see
details.</p>
</td></tr>
<tr><td><code id="plot-methods_+3A_...">...</code></td>
<td>
<p>provided to allow for passing of additional arguments to
plot functions</p>
</td></tr>
</table>


<h3>Methods</h3>


<dl>
<dt><code>signature(object = "acs")</code></dt><dd>
<p>When passed an acs object (possibly involving subsetting), <code>plot</code>
will call a plot showing both estimates and confidence intervals for
the data contained in the object.
</p>
<p>If the object contains only one row or only one column, <code>plot</code>
will use this dimension as the y-axis and will plot each observation
along the x-axis, as three points (an estimate bracketed by upper and
lower confidence bounds).  If the object contains multiple rows and
columns, <code>plot</code> will return a 1-by-y &quot;plot of plots&quot;: by default
there will be one plot per row showing all the data for each
geography, although this can be changed by specifying
<code>by="acs.colnames"</code>, to plot each variable as its own plot, with
all of the geographies along the x-axis.
</p>
<p>In the special case where the dimensions of the object are
exactly c(1,1) (i.e., a single geography and column),
<code>plot</code> will return a density plot of the estimate.  In this
case, <code>conf.level</code>, <code>err.col</code>, <code>err.lty</code>, and
<code>err.lwd</code> will be used to determine the properties of the
margins of error lines.  (For none, use <code>conf.level=F</code>.
For these density plots, users may also wish to set <code>xlim</code>
and <code>x.res</code>, which specify the horizontal extent and
resolution of the plot.)
</p>
<p><code>plot</code> accepts many of the standard graphical arguments to
<code>plot</code>, such as <code>main</code>, <code>sub</code>, <code>xlab</code>, <code>pch</code>,
and <code>col</code>, as well new ones listed above.
</p>
<p>In some cases, the lower bound of a confidence interval may
extend below 0; in some cases this is desired, especially when a
variable is actually stating the <em>difference</em> between two
estimates.  In other cases, this may seem confusing (for
example, when reporting the estimated count in a particular
category).  Setting <code>true.min</code> to <code>FALSE</code> (or 0) will
limit the lower boundary of any confidence intervals computed
and plotted.
</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>
# load ACS data
data(kansas07)

# plot a single value
plot(kansas07[4,4])

# plot by geography
plot(kansas07[,10])

# plot by columns
plot(kansas07[4,3:10])

# a density plot for a single variable
plot(kansas07[7,10])

# same, using some graphical parameters
plot(kansas07[7,10], col="blue", err.col="purple", err.lty=3)

plot(kansas07[7,49], col="lightblue", type="h", x.res=3000,
err.col="purple", err.lty=3, err.lwd=4, conf.level=.99,
main=(paste("Distribution of Females&gt;85 Years in ",
geography(kansas07)[7,1], sep="")),
sub="(99-percent margin of error shown in purple)")

# something more complicated...

plot(kansas07[c(1,3,4),3:25], err.col="purple",
pch=16, err.pch="x", err.cex=1, ylim=c(0,5000),
col=rainbow(23), conf.level=.99,
labels=paste("grp. ",1:23))

</code></pre>

<hr>
<h2 id='prompt.acs'>Prompt for new values for metadata in an acs object.
</h2><span id='topic+prompt.acs'></span><span id='topic+prompt'></span>

<h3>Description</h3>

<p>Helper function to interactively set new values
for row- and/or column-names in an acs object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>
## S3 method for class 'acs'
prompt(object, filename=NA, name=NA, what="acs.colnames",
geocols="all", ...)

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prompt.acs_+3A_object">object</code></td>
<td>
<p>an acs object</p>
</td></tr>
<tr><td><code id="prompt.acs_+3A_filename">filename</code></td>
<td>
<p>not used; provided for S3 generic/method consistency</p>
</td></tr>
<tr><td><code id="prompt.acs_+3A_name">name</code></td>
<td>
<p>not used; provided for S3 generic/method consistency</p>
</td></tr>
<tr><td><code id="prompt.acs_+3A_what">what</code></td>
<td>
<p>which acs-class metadata slot to prompt for; either
&quot;acs.colnames&quot; (the default), &quot;acs.units&quot;, or &quot;geography&quot;</p>
</td></tr>
<tr><td><code id="prompt.acs_+3A_geocols">geocols</code></td>
<td>
<p>a vector, or &quot;all&quot;, specifying which columns from the
geography metadata to prompt for (optional; defaults to &quot;all&quot;; ignored
when <code>what="acs.colnames"</code>)</p>
</td></tr>
<tr><td><code id="prompt.acs_+3A_...">...</code></td>
<td>
<p>not used; provided for S3 generic/method consistency</p>
</td></tr>
</table>


<h3>Details</h3>

<p> The acs package provides this S3 <code>prompt</code> method for
acs-class objects, primarily as a &quot;helper&quot; function to use in calls to
<code>geography(object)&lt;-</code>, <code>acs.units(object)&lt;-</code>, or
<code>acs.colnames(object)&lt;-</code>.  <code>prompt</code> provides an interactive
interface, <code>prompt</code>ing the user for new metadata values based on
the existing ones.
</p>
<p>When <code>what="geography"</code> and <code>geocols</code> is not &quot;all&quot;,
<code>prompt</code> will only prompt for replacements of the values of
geocols, but will still return values for all geography columns,
suitable for passing to <code>geography(object)&lt;-</code>.
</p>
<p>Anytime during the interactive <code>prompt()</code> session, a user may enter a
blank line to terminate, returning only the changed values
up to that point (along with the unchanged values for remaining entries.)</p>


<h3>Value</h3>

<p> Returns a value of the same class and dimensions as the current
geography, acs.units, or acs.colnames of object, but with new names,
suitable for passing to one of the replacement methods
(<code>acs.colnames&lt;-</code>,   (<code>acs.units&lt;-</code>, or <code>geography&lt;-</code>).</p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>


<h3>See Also</h3>

<p><code>geography&lt;-</code>
</p>
<p><code>acs.colnames&lt;-</code>
</p>
<p><code>acs.units&lt;-</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(kansas07)

acs.colnames(kansas07)=prompt(kansas07, what="acs.colnames")

geography(kansas07)=prompt.acs(kansas07, what="geography")


</code></pre>

<hr>
<h2 id='rbind.acs'>Combine acs Objects by Rows
</h2><span id='topic+rbind.acs'></span><span id='topic+rbind'></span>

<h3>Description</h3>

<p> Take a pair of acs objects and combine by rows.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>          ## S3 method for class 'acs'
rbind(e1, e2, ...)
          </code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rbind.acs_+3A_e1">e1</code>, <code id="rbind.acs_+3A_e2">e2</code></td>
<td>
<p>two acs-class objects</p>
</td></tr>
<tr><td><code id="rbind.acs_+3A_...">...</code></td>
<td>
<p>provided for consistency with cbind S3 method</p>
</td></tr>
</table>


<h3>Details</h3>

<p> When passed two acs-class objects, rbind will first check to
confirm whether the objects contain compatible data: same endyear and
span; same column names.  If not, it will issue a warning, but will
still proceed.
</p>
<p>After this check, the function will return a new acs object that has
resulted from combining the two arguments row-wise.  The effect is
essentially the same as rbind on the underlying estimate and
standard.error matrices, with all the additional acs metadata tended
to.</p>


<h3>Value</h3>

<p> Returns a single new acs object with all of the data contained
in the two arguments.  </p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>

<hr>
<h2 id='read.acs'>
Reads a comma-delimited file from the American Community
Survey and creates an acs object with estimates, standard errors, and
associated metadata.
</h2><span id='topic+read.acs'></span>

<h3>Description</h3>

<p>When passed a comma-delimited file from the U.S. Census American Community
Survey (typically downloaded via the FactFinder website and unzipped),
read.acs returns an acs object  with estimates, standard errors, and
associated metadata.
</p>
<p>Most users will prefer to start with <code><a href="#topic+acs.fetch">acs.fetch</a></code> to import
data; <code>read.acs</code> is maintained as a &quot;legacy&quot; function, primarily
for use in situations where data is not available via the Census API.  
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.acs(filename, endyear = "auto", span = "auto", col.names= "auto",
acs.units = "auto", geocols = "auto", skip = "auto")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read.acs_+3A_filename">filename</code></td>
<td>

<p>the name of the <code>.csv</code>, <code>.zip</code>, or <code>.txt</code> file to be input 
</p>
</td></tr>
<tr><td><code id="read.acs_+3A_endyear">endyear</code></td>
<td>
<p> an integer (or &quot;auto&quot;) indicating the latest year of the
data in the survey (e.g., for data from the 2005-2009 5-year ACS data,
endyear would be 2009) </p>
</td></tr>
<tr><td><code id="read.acs_+3A_span">span</code></td>
<td>
<p> an integer (should be 1, 3, or 5), or &quot;auto&quot; to have
read.acs guess the span from the filename (e.g., for data from the
2005-2009 5-year ACS data, span would be 5) </p>
</td></tr>
<tr><td><code id="read.acs_+3A_col.names">col.names</code></td>
<td>
<p>a vector of column names to be used as
<code>acs.colnames</code> for the object; defaults to &quot;auto&quot;, which will
result in auto-generated names from the headers lines of the input file</p>
</td></tr>
<tr><td><code id="read.acs_+3A_acs.units">acs.units</code></td>
<td>
<p> a vector of factors indicating what sort of data is
contained within each column of data (&quot;count&quot;,&quot;dollars&quot;,&quot;proportion&quot;,
&quot;ratio&quot;, &quot;other&quot;)</p>
</td></tr>
<tr><td><code id="read.acs_+3A_geocols">geocols</code></td>
<td>
<p> a vector of integers indicating which columns contain
the geographic header information; defaults to &quot;auto&quot;, which is the same
as 3:1, which seems to be the standard for FactFinder-2 downloads</p>
</td></tr>
<tr><td><code id="read.acs_+3A_skip">skip</code></td>
<td>
<p>an integer indicating how many rows to skip before
processing the csv file; defaults to &quot;auto&quot;, which will try to guess
the proper value</p>
</td></tr>
</table>


<h3>Details</h3>

<p>After executing a query on the U.S. Census American FactFinder site
(<a href="http://factfinder2.census.gov">http://factfinder2.census.gov</a>), users can download their
results as a zip file containing data in comma-delimited file format
(for example, &quot;ACS_10_5YR_B19013_with_ann.csv&quot;).  <code>read.acs</code>
simplifies the creation of new acs objects from these files.  The
function uses some rudimentary algorithms to guess intelligently about
values for metadata (such as <code>endyear</code> and <code>geography</code>),
based on current file-format used by the Census &quot;AmericanFactFinder 2&quot;
download site. 
</p>
<p>The specified <code>filename</code> can be an actual <code>.csv</code> file, or
can be the name of a <code>.zip</code> file downloaded from the FactFinder
site.  If the latter, <code>read.acs</code> will extract the necessary data
and leave the compressed zipfile in place.
</p>
<p>As a default, <code>read.acs</code> assumes the first three columns will
contain geographic header information, which seems to be the standard
for the new Census American Factfinder download site. Users can also
set different values for the <code>geocols=</code> to specify other columns
for this geographic information.  The function will use the first of
these columns for geographic rownames to label estimates.  (By
default, then, this would be the third column of the actual file,
since <code>geocols=3:1</code>.  For files downloaded via the Census
&quot;legacy&quot; version of FactFinder prior to 2012, users will probably want
to specify <code>geocols=4:1</code>.
</p>
<p>As for column names, by default <code>read.acs</code> will scan the file to
determine how many of the initial rows contain &quot;header&quot; information,
and will generate new <code>acs.colnames</code> by concatenating information
found in these rows.  Note that this can result in <em>very long</em>
variable names, and users may want to modify the contents of
<code>acs.colnames</code> after creation.
</p>
<p>Alternatively, users can inspect downloaded csv files prior to import
and specify the <code>skip=</code> option explicitly, as with
<code>read.csv</code> and other <code>read.XXX</code> functions (i.e., the value
of skip is equal to the number of rows prior to the last header row).
Regardless of whether <code>skip=</code> is set or &quot;auto&quot;, however, the
column names will be created using all of the rows at the top of the
file, <em>even the &quot;skipped&quot; ones</em>.
</p>
<p>Finally, these new <code>acs.colnames</code> are used to guess intelligently
about values for <code>acs.units</code>, but currently all this includes is
a check for the word &quot;dollars&quot; in the names; if this is not found, the
columns are assumed to be &quot;counts&quot;.
</p>
<p>When no other values are provided, <code>read.acs</code> will attempt to
determine <code>endyear</code> and <code>span</code> from the filename.
</p>


<h3>Value</h3>

<p>Returns a new acs-class object with estimates, standard errors
(derived from the census 90% margins of error), and metadata associated
with the survey, 
</p>


<h3>Author(s)</h3>

<p>Ezra Haber Glenn <a href="mailto:eglenn@mit.edu">eglenn@mit.edu</a>
</p>

<hr>
<h2 id='sum-methods'>acs Methods for Function <code>sum</code></h2><span id='topic+sum'></span><span id='topic+sum-methods'></span><span id='topic+sum+2Cacs-method'></span><span id='topic+sum+2Cacs+2Cacs-method'></span>

<h3>Description</h3>

<p>Returns the sum of all the estimates present in its arguments,
along with proper treatment of standard errors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>
## S4 method for signature 'acs'
sum(x, agg.term=c("aggregate", "aggregate"),
one.zero=FALSE, ..., na.rm=FALSE)

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sum-methods_+3A_x">x</code></td>
<td>
<p>the acs object to be summed</p>
</td></tr>
<tr><td><code id="sum-methods_+3A_agg.term">agg.term</code></td>
<td>
<p>a character vector (length 1 or 2) of labels to use
for the geography or acs.colnames of the new object</p>
</td></tr>
<tr><td><code id="sum-methods_+3A_one.zero">one.zero</code></td>
<td>
<p>a logical flag indicating whether to include
standard errors for only one zero-value estimates or all (the
default); see details.</p>
</td></tr>
<tr><td><code id="sum-methods_+3A_...">...</code></td>
<td>
<p>reserved for other arguments to pass</p>
</td></tr>
<tr><td><code id="sum-methods_+3A_na.rm">na.rm</code></td>
<td>
<p>whether to remove <code>NA</code>s from the values before
<code>sum</code>ming; defaults to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note: when aggregating ACS data, users may want to sum many
fields with &quot;0&quot; values for estimates, especially when working with small
geographies or detailed tables that split the population into many
categories.  In these cases, some analysts have suggested that the
traditional summation procedure for standard errors (taking the
square-root of the sum of the squares of the errors) may over-inflate
the associated margins of error; instead, they recommend an alternative
method, which ignores all but the single largest of the standard errors
for any &quot;zero-estimate&quot; fields.  Although this is somewhat
unconventional, it is provided as an additional user-specified option
here, through the &quot;one.zero&quot; argument.</p>


<h3>Methods</h3>


<dl>
<dt><code>signature(object = "acs")</code></dt><dd>
<p>When passed an acs object (possibly involving subsetting), <code>sum</code>
will return a new acs object created by aggregating (adding) all
estimates in the object, and adding the corresponding standard errors in
a statistically appropriate way.  (Aggregate standard errors are
computed by taking the square root of the sum of the squared standard
errors of the terms to be aggregated.)
</p>
<p>If the original object contains a single row, the geographic metadata and
row name is preserved; if not, the geographic metadata is replaced with
the term &quot;aggregate&quot; (or the contents of the first item of the (vector)
option <code>agg.term</code>).
</p>
<p>If the original object contains a single column, the column names and
acs.units data are preserved; if not, the column names are replaced with
the term &quot;aggregate&quot; or the contents of the second item of the (vector)
option <code>agg.term</code>; note: if <code>agg.term</code> is only one item in
length, it will be repeated here if needed.
</p>
<p>All other acs-class metadata is preserved, except for the <code>modified</code>
flag, which is set to TRUE.
</p>
</dd>
</dl>


<h3>Examples</h3>

<pre><code class='language-R'>
# load ACS data
data(kansas09)

# aggregate the third column, all rows
sum(kansas09[,3])

# aggregate the fifth row, all column
sum(kansas09[5,])

# aggregate all rows, columns 3 through 25, rename rows "Kansas" and columns "Total Males"
sum(kansas09[, 3:25], agg.term=c("Kansas","Total Males"))
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
