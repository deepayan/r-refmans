<!DOCTYPE html><html lang="en"><head><title>Help for package chartql</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {chartql}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#cql'><p><code>chartql</code> Chart Generator</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Simplified Language for Plots and Charts</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Imports:</td>
<td>ggplot2 (&ge; 2.1.0), stringr, stats</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Rohail Syed &lt;rohailsyed@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a very simple syntax for the user to generate custom plot(s) without having to remember complicated 'ggplot2' syntax. The 'chartql' package uses 'ggplot2' and manages all the syntax complexities internally. As an example, to generate a bar chart of company sales faceted by product category further faceted by season of the year, we simply write: "CHART bar X category, season Y sales".</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/rmsyed/chartql">https://github.com/rmsyed/chartql</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-04-01 18:46:44 UTC; rohailsyed</td>
</tr>
<tr>
<td>Author:</td>
<td>Rohail Syed [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2019-04-04 15:40:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='cql'><code>chartql</code> Chart Generator</h2><span id='topic+cql'></span>

<h3>Description</h3>

<p>Generates a chart/plot using <code>source_frame</code> as the source dataframe and using <code>cql_string</code> as the query string. Options and structure of the query string are described below:
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cql(source_frame, cql_string)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cql_+3A_source_frame">source_frame</code></td>
<td>
<p>DataFrame object. Used as the source to build the plot.</p>
</td></tr>
<tr><td><code id="cql_+3A_cql_string">cql_string</code></td>
<td>
<p><code>chartql</code> query string. Used to specify options in terms of how to build the plot. This includes the type of plot, choice of x and y variables, axis titles and more. Full parameter list below.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>chartql</code> query language uses a fairly simple format to let users generate amazing plots but with minimal scripting, allowing for much faster prototyping. The <code>chartql</code> string uses the following general format:
</p>
<p><code>CHART &lt;chart_type&gt; X &lt;x_var&gt; Y &lt;y_var&gt; (Options) &lt;options&gt;</code>
</p>
<p>The main variables that are required for all types of plots are:
</p>

<table>
<tr>
 <td style="text-align: right;">
Chart <code>&lt;chart_type&gt;</code>: </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> <code>bar|scatter|hist|line</code></td>
</tr>
<tr>
 <td style="text-align: right;">
X <code>&lt;x_var&gt;, &lt;(x_facet)&gt;</code>: </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;">  X-axis variable. May include a second categorical</td>
</tr>
<tr>
 <td style="text-align: right;">
</td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> variable (comma separated)</td>
</tr>
<tr>
 <td style="text-align: right;">
Y <code>&lt;y_var&gt;</code>: </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Y-axis variable. *Not used for <code>hist</code>.</td>
</tr>
<tr>
 <td style="text-align: right;">
</td>
</tr>

</table>

<p><b>Optional Variables</b>
</p>

<table>
<tr>
 <td style="text-align: right;">
X_label <code>'&lt;xlab&gt;'</code>: </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;">  X-axis custom label. Defaults to &lt;x_var&gt;</td>
</tr>
<tr>
 <td style="text-align: right;">
Y_label <code>'&lt;ylab&gt;'</code>: </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;">  Y-axis custom label. Defaults to &lt;y_var&gt;</td>
</tr>
<tr>
 <td style="text-align: right;">
Legend <code>'&lt;legend&gt;'</code>: </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;">  Legend custom label. Defaults to &lt;x_category&gt;</td>
</tr>
<tr>
 <td style="text-align: right;">
Colorset <code>'&lt;clist&gt;'</code>: </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;">  Custom set of colors for &lt;x_category&gt; levels.</td>
</tr>
<tr>
 <td style="text-align: right;">
</td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Must be comma-separated list.</td>
</tr>
<tr>
 <td style="text-align: right;">
AggFunc <code>'&lt;func&gt;'</code>: </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Summary function for <code>bar</code> type.</td>
</tr>
<tr>
 <td style="text-align: right;">
</td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Valid types: <code>mean|median|count|sum</code>.</td>
</tr>
<tr>
 <td style="text-align: right;">
</td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Defaults to <code>mean</code>.</td>
</tr>
<tr>
 <td style="text-align: right;">
Fit <code>'&lt;show_se&gt;'</code>: </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Valid types: <code>true|false</code>. Fit quadratic line.</td>
</tr>
<tr>
 <td style="text-align: right;">
</td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"> Show/Don't show standard error curves.</td>
</tr>
<tr>
 <td style="text-align: right;">
ConfInt <code>'&lt;interval&gt;'</code>: </td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;"></td><td style="text-align: left;">  Show error bars. Value is confidence interval value. E.g. '.95'
</td>
</tr>

</table>



<h3>Value</h3>

<table role = "presentation">
<tr><td><code>response</code></td>
<td>
<p>List object. Entries are the valid parameters and their values extracted from <code>cql_string</code>.</p>
</td></tr>
<tr><td><code>plot_obj</code></td>
<td>
<p>ggplot object. This is the resulting plot.</p>
</td></tr>
</table>


<h3>Note</h3>


<ol>
<li><p> Custom label parameters <code>X_label</code>, <code>Y_label</code> and <code>Legend</code> may contain newlines but should be escaped with an extra backslash as: &quot;\\n&quot;.
</p>
</li>
<li><p> The parameter names themselves are not case-sensitive (e.g. both <code>"CHART bar"</code> and <code>"chart bar"</code> are valid formatting).
</p>
</li>
<li><p> You can hide the Legend by setting the value to &quot;&lt;&gt;&quot; (e.g. <code>"Legend '&lt;&gt;'"</code>)
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>
# Test data
dframe &lt;- data.frame(
category = factor(c(rep("Sports",50), rep("Home", 150), rep("Fashion", 100))),
season = factor(c(rep(c("Fall","Winter"),150))),
sales = c(runif(100,min=0,max=100), runif(100,min=50,max=200), runif(100,min=50,max=80))
)
dframe$visitors &lt;- dframe$sales * runif(300, min=0.5, max=1.5)


# Bar chart with product category on x-axis and total sales on y-axis
cql_str &lt;- "CHART bar X category Y sales";
cql(dframe, cql_str);


# Bar chart but facet x-axis with both category and season of the year
cql_str &lt;- "CHART bar X category, season Y sales X_label 'Product\\nCategory'";
cql(dframe, cql_str);


# Bar chart with 95% confidence interval error bars
cql_str &lt;- "CHART bar X category, season Y sales ConfInt '.95'";
cql(dframe, cql_str);


# Bar chart but specify the colors for each season
cql_str &lt;- "CHART bar X category, season Y sales Colorset '#FF9900, #990099'";
cql(dframe, cql_str);


# Scatter plot of number of visitors and sales
cql_str &lt;- "CHART scatter X visitors Y sales";
cql(dframe, cql_str);


# Scatter plot but facet by season
cql_str &lt;- "CHART scatter X visitors, season Y sales";
cql(dframe, cql_str);


# Scatter plot with fitted line (no SE curves)
cql_str &lt;- "CHART scatter X visitors, season Y sales Fit 'false'";
cql(dframe, cql_str);
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
