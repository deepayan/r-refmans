<!DOCTYPE html><html><head><title>Help for package oceanis</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {oceanis}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_legende_'><p>Add a legend on a 'leaflet' map</p></a></li>
<li><a href='#add_source'><p>Add a source on a 'leaflet' map</p></a></li>
<li><a href='#add_titre'><p>Add a title on a 'leaflet' map</p></a></li>
<li><a href='#add_typo_symboles'><p>Add symbols on a 'leaflet' map</p></a></li>
<li><a href='#affiche_palette'><p>Returns a palette colors of the graphic chart of INSEE</p></a></li>
<li><a href='#calcul_'><p>Calculating a class variable</p></a></li>
<li><a href='#coord_legende'><p>Returns the lon / lat coordinates of a 'leaflet' map's legend</p></a></li>
<li><a href='#coordonnees_etiquettes'><p>Data table of labels</p></a></li>
<li><a href='#distrib_variable'><p>Histogram of the distribution of the class variable</p></a></li>
<li><a href='#donnees'><p>Examples of data</p></a></li>
<li><a href='#export_'><p>Export a 'leaflet' map in image format</p></a></li>
<li><a href='#export_qgis_'><p>Export a 'leaflet' map to Qgis project</p></a></li>
<li><a href='#largeur_fleche'><p>Width of the arrow for 'leaflet' maps</p></a></li>
<li><a href='#leaflet_'><p>Creation 'leaflet' maps</p></a></li>
<li><a href='#oceanis-package'><p>Package : oceanis</p></a></li>
<li><a href='#plot_'><p>Creation maps in plot</p></a></li>
<li><a href='#rapport_ronds'><p>Ratio between radius and value for 'leaflet' maps</p></a></li>
<li><a href='#rayon_ronds'><p>Radius of the largest circle for 'leaflet' maps</p></a></li>
<li><a href='#recup_palette'><p>Returns a palette of the graphic chart of INSEE</p></a></li>
<li><a href='#set_bordure_ronds'><p>Modify the circles' borders of 'leaflet' map's analysis</p></a></li>
<li><a href='#set_couleur_'><p>Modify the colors of 'leaflet' map's analysis</p></a></li>
<li><a href='#set_fonds_simples'><p>Modify the style of 'leaflet' map's.</p></a></li>
<li><a href='#set_opacite_elargi'><p>Modify the opacity of the expanded representation of a 'leaflet' map</p></a></li>
<li><a href='#set_pop_up'><p>Modify the pop_up of 'leaflet' map's analysis</p></a></li>
<li><a href='#set_style_oursins'><p>Modify the style of 'leaflet' map's urchins</p></a></li>
<li><a href='#shiny_'><p>Creation 'leaflet' maps in a 'shiny' web environment</p></a></li>
<li><a href='#zonage_a_facon'><p>Creating a custom zoning</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Cartography for Statistical Analysis</td>
</tr>
<tr>
<td>Version:</td>
<td>1.8.5</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-07-13</td>
</tr>
<tr>
<td>Description:</td>
<td>Creating maps for statistical analysis such as proportional circles, choropleth, typology and flows. Some functions use 'shiny' or 'leaflet' technologies for dynamism and interactivity.
	The great features are :
	- Create maps in a web environment where the parameters are modifiable on the fly ('shiny' and 'leaflet' technologies).
	- Create interactive maps through zoom and pop-up ('leaflet' technology).
	- Create frozen maps with the possibility to add labels.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> | file LICENSE [expanded from: GPL (&ge; 2.0) | file LICENSE]</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/insee-psar-at/oceanis-package/">https://github.com/insee-psar-at/oceanis-package/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/insee-psar-at/oceanis-package/issues">https://github.com/insee-psar-at/oceanis-package/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0),shiny (&ge; 1.4.0.2),shinyBS (&ge; 0.61)</td>
</tr>
<tr>
<td>Imports:</td>
<td>classInt (&ge; 0.4.2),sf (&ge; 0.9.0),shinyjs (&ge; 1.1),shinythemes
(&ge; 1.1.2),DT (&ge; 0.12),stringr (&ge; 1.4.0),leaflet (&ge;
2.0.3),leaflet.extras (&ge; 1.0.0),ggplot2 (&ge; 3.2.0),dplyr (&ge;
0.8.4),lwgeom (&ge; 0.2.1),zip (&ge; 2.1.1),htmlwidgets (&ge;
1.5.4),webshot (&ge; 0.5.2)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, markdown, rio</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-07-13 07:32:14 UTC; ZZ0SRJ</td>
</tr>
<tr>
<td>Author:</td>
<td>Sébastien Novella [aut, cre],
  Sébastien Calvet [aut],
  Nicolas Chauvot [aut],
  PSAR-AT Unité CED - INSEE PACA [ctb],
  SED - DR Hauts-de-France - INSEE [ctb],
  PSAR-SL - DR Auvergne-Rhone-Alpes - INSEE [ctb],
  PSAR-EER - DR Occitanie - INSEE [ctb],
  SED - DR Pays-de-la-Loire - INSEE [ctb],
  Institut national de la statistique et des études économiques [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Sébastien Novella &lt;sebastien.novella@insee.fr&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-07-13 13:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_legende_'>Add a legend on a 'leaflet' map</h2><span id='topic+add_legende_'></span><span id='topic+add_legende_fonds_simples'></span><span id='topic+add_legende_ronds'></span><span id='topic+add_legende_classes'></span><span id='topic+add_legende_typo'></span><span id='topic+add_legende_typo_symboles'></span><span id='topic+add_legende_joignantes'></span><span id='topic+add_legende_saphirs'></span>

<h3>Description</h3>

<p>Add a legend on a 'leaflet' map for proportional circles, chroropleth,
typology, proportional and sapphire arrows.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_legende_fonds_simples(map, titre = NULL, lng = NULL, lat = NULL,
labels = NULL, choixLeg = NULL, zoom = 8, map_leaflet = NULL)

add_legende_ronds(map, titre = NULL, lng = NULL, lat = NULL, precision = 0,
zoom = 8, map_leaflet = NULL)

add_legende_classes(map, titre = NULL, lng = NULL, lat = NULL, typeLegende =
1, zoom = 8, map_leaflet = NULL)

add_legende_typo(map, titre = NULL, lng = NULL, lat = NULL, labels = NULL,
zoom = 8, map_leaflet = NULL)

add_legende_typo_symboles(map, titre = NULL, lng = NULL, lat = NULL, labels
= NULL, zoom = 8, map_leaflet = NULL)

add_legende_joignantes(map, titre = NULL, lng = NULL, lat = NULL, precision
= 0, zoom = 8, map_leaflet = NULL)

add_legende_saphirs(map, titre = NULL, lng = NULL, lat = NULL, precision =
0, zoom = 8, map_leaflet = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_legende__+3A_map">map</code></td>
<td>
<p>objet leaflet.</p>
</td></tr>
<tr><td><code id="add_legende__+3A_titre">titre</code></td>
<td>
<p>chaine de caracteres (character). Titre de la legende des
classes. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="add_legende__+3A_lng">lng</code></td>
<td>
<p>valeur numerique (numeric). Longitude (x) de la legende des
classes dans le systeme de projection WGS84 (code EPSG 4326). Par defaut a
NULL.</p>
</td></tr>
<tr><td><code id="add_legende__+3A_lat">lat</code></td>
<td>
<p>valeur numerique (numeric). Latitude (y) de la legende des
classes dans le systeme de projection WGS84 (code EPSG 4326). Par defaut a
NULL.</p>
</td></tr>
<tr><td><code id="add_legende__+3A_typelegende">typeLegende</code></td>
<td>
<p>valeur numerique (numeric). 1 (par defaut) pour une
legende litterale, 2 pour une legende en echelle.</p>
</td></tr>
<tr><td><code id="add_legende__+3A_labels">labels</code></td>
<td>
<p>vecteur de caracteres (character). Labels personnalises pour
la legende de la carte en typologie. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="add_legende__+3A_choixleg">choixLeg</code></td>
<td>
<p>vecteur de numeriques (numeric). Choix des couches a
afficher dans la legende. Par defaut a NULL (toutes les couches presentes).</p>
</td></tr>
<tr><td><code id="add_legende__+3A_precision">precision</code></td>
<td>
<p>valeur numerique (numeric). Arrondit les valeurs de la
legende des ronds ou des fleches. 0 (par defaut) pour arrondir a l'unite, -1
pour arrondir a la dizaine, -2 a la centaine...</p>
</td></tr>
<tr><td><code id="add_legende__+3A_zoom">zoom</code></td>
<td>
<p>valeur numerique (numeric). Valeur entre 6 et 10 (8 par defaut).
Definit le niveau de zoom de la carte pour un affichage optimal.</p>
</td></tr>
<tr><td><code id="add_legende__+3A_map_leaflet">map_leaflet</code></td>
<td>
<p>objet leaflet. Pour l'integration des fonctions leaflet
dans les applications shiny (cf vignette). Par defaut a NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Par defaut, <code>lng</code> et <code>lat</code> sont NULL ; la legende est alors
positionnee en haut a droite de la carte sauf pour l'analyse en classes ou
elle est positionnee en bas.
</p>
<p>Les valeurs <code>lng</code> et <code>lat</code> peuvent etre negatives. Une longitude a
0 correspond au meridien de Greenwich.
</p>
<p>Pour deplacer la legende, reexecutez la fonction add_legende_xxx en
specifiant les parametres <code>lng</code> et <code>lat</code>.
</p>
<p>Pour supprimer la legende, reexecutez la fonction add_legende_xxx en
laissant les parametres <code>lng</code> et <code>lat</code> a NULL.
</p>
<p>Pour supprimer le titre, reexecutez la fonction add_legende_xxx en laissant
le parametre <code>titre</code> a NULL.
</p>
<p>Concernant la legende des ronds proportionnels, le grand cercle correspond a
la valeur max en volume et le petit cercle au tiers de la valeur max.
</p>
<p>Idem pour la largeur des fleches joignantes et des fleches saphirs.
</p>
<p>Les valeurs de la legende des ronds et des fleches peuvent etre arrondies
grace au parametre <code>precision</code>.
</p>
<p>Pour la légende des cartes en typologie, il est possible de specifier ses
propres labels sans avoir besoin de modifier les noms de variables dans la
table de donnees.
</p>
<p>Si le titre et les valeurs de legende sont trop decales, il faut modifier la
valeur du zoom : entre 6 (zoom maximal, niveau commune) et 10 (zoom minimal,
niveau France metro)
</p>


<h3>Value</h3>

<p>Retourne un objet de type leaflet.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+coord_legende">coord_legende</a></code>
</p>
<p><code><a href="#topic+leaflet_fonds_simples">leaflet_fonds_simples</a></code>
</p>
<p><code><a href="#topic+leaflet_ronds">leaflet_ronds</a> <a href="#topic+leaflet_classes">leaflet_classes</a>
<a href="#topic+leaflet_ronds_classes">leaflet_ronds_classes</a> <a href="#topic+leaflet_classes_ronds">leaflet_classes_ronds</a>
<a href="#topic+leaflet_typo">leaflet_typo</a></code>
</p>
<p><code><a href="#topic+leaflet_oursins">leaflet_oursins</a> <a href="#topic+leaflet_joignantes">leaflet_joignantes</a>
<a href="#topic+leaflet_saphirs">leaflet_saphirs</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("depm")
data("regm")

data("donnees_monoloc")

# Ronds proportionnels sur une analyse en classes
map &lt;- leaflet_classes_ronds(data = donnees_monoloc, fondMaille = depm, idData = "COD_DEP",
varVolume = "POP_2015", varRatio = "VAR_AN_MOY", nbClasses = 4)
map &lt;- add_legende_classes(map = map, titre = "VAR_AN_MOY", lng = 9, lat = 48, zoom = 6)
map &lt;- add_legende_ronds(map = map, titre = "POP_2015", lng = 9, lat = 50, zoom = 6)

 map


data("donnees_biloc")

# Fleches joignantes
map &lt;- leaflet_joignantes(data = donnees_biloc, fondMaille = regm, typeMaille = "REG",
idDataDepart = "REG_DEPART", idDataArrivee = "REG_ARRIVEE",
varFlux = "MIGR", filtreDist = 1000, filtreMajeurs = 3)
map &lt;- add_legende_joignantes(map = map, titre = "MIGR")

 map


</code></pre>

<hr>
<h2 id='add_source'>Add a source on a 'leaflet' map</h2><span id='topic+add_source'></span>

<h3>Description</h3>

<p>Add a source on a 'leaflet' map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_source(map, source)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_source_+3A_map">map</code></td>
<td>
<p>objet leaflet.</p>
</td></tr>
<tr><td><code id="add_source_+3A_source">source</code></td>
<td>
<p>chaine de caracteres (character). Source de la carte.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Pour supprimer la source, reexecutez la fonction add_source en laissant le
parametre <code>source</code> a NULL.
</p>


<h3>Value</h3>

<p>Retourne un objet de type leaflet.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+leaflet_ronds">leaflet_ronds</a>, <a href="#topic+leaflet_classes">leaflet_classes</a>,
<a href="#topic+leaflet_ronds_classes">leaflet_ronds_classes</a>, <a href="#topic+leaflet_classes_ronds">leaflet_classes_ronds</a>,
<a href="#topic+leaflet_typo">leaflet_typo</a>,</code>
</p>
<p><code><a href="#topic+leaflet_oursins">leaflet_oursins</a>, <a href="#topic+leaflet_joignantes">leaflet_joignantes</a>,
<a href="#topic+leaflet_saphirs">leaflet_saphirs</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("donnees_monoloc")
data("depm")

# Ronds proportionnels
map &lt;- leaflet_ronds(data = donnees_monoloc, fondMaille = depm, idData = "COD_DEP",
varVolume = "POP_2015")
map &lt;- add_source(map = map, source = "Source : INSEE - RP2016")

 map


</code></pre>

<hr>
<h2 id='add_titre'>Add a title on a 'leaflet' map</h2><span id='topic+add_titre'></span>

<h3>Description</h3>

<p>Add a title on a 'leaflet' map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_titre(map, titre, sousTitre = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_titre_+3A_map">map</code></td>
<td>
<p>objet leaflet.</p>
</td></tr>
<tr><td><code id="add_titre_+3A_titre">titre</code></td>
<td>
<p>chaine de caracteres (character). Titre de la carte.</p>
</td></tr>
<tr><td><code id="add_titre_+3A_soustitre">sousTitre</code></td>
<td>
<p>chaine de caracteres (character). Sous-titre de la carte.
Par defaut a NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Pour supprimer le titre ou le sous-titre, reexecutez la fonction add_titre
en laissant le parametre <code>titre</code> ou <code>sousTitre</code> a NULL.
</p>


<h3>Value</h3>

<p>Retourne un objet de type leaflet.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+leaflet_ronds">leaflet_ronds</a>, <a href="#topic+leaflet_classes">leaflet_classes</a>,
<a href="#topic+leaflet_ronds_classes">leaflet_ronds_classes</a>, <a href="#topic+leaflet_classes_ronds">leaflet_classes_ronds</a>,
<a href="#topic+leaflet_typo">leaflet_typo</a>,</code>
</p>
<p><code><a href="#topic+leaflet_oursins">leaflet_oursins</a>, <a href="#topic+leaflet_joignantes">leaflet_joignantes</a>,
<a href="#topic+leaflet_saphirs">leaflet_saphirs</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("donnees_monoloc")
data("depm")

# Ronds proportionnels
map &lt;- leaflet_ronds(data = donnees_monoloc, fondMaille = depm, idData = "COD_DEP",
varVolume = "POP_2015")
map &lt;- add_titre(map = map,
titre = "Population des departements de France metropolitaine en 2015")

 map


</code></pre>

<hr>
<h2 id='add_typo_symboles'>Add symbols on a 'leaflet' map</h2><span id='topic+add_typo_symboles'></span>

<h3>Description</h3>

<p>Add a symbols on a 'leaflet' map for typology.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_typo_symboles(map, fondPoints, types = NULL, couleurs = NULL,
tailles = NULL, epaisseurs = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_typo_symboles_+3A_map">map</code></td>
<td>
<p>objet leaflet.</p>
</td></tr>
<tr><td><code id="add_typo_symboles_+3A_fondpoints">fondPoints</code></td>
<td>
<p>objets sf. Fond de points.</p>
</td></tr>
<tr><td><code id="add_typo_symboles_+3A_types">types</code></td>
<td>
<p>vecteur de numeriques (numeric). Par defaut a NULL. Voir
details.</p>
</td></tr>
<tr><td><code id="add_typo_symboles_+3A_couleurs">couleurs</code></td>
<td>
<p>vecteur de caracteres (character). Par defaut a NULL. Voir
details.</p>
</td></tr>
<tr><td><code id="add_typo_symboles_+3A_tailles">tailles</code></td>
<td>
<p>vecteur de numeriques (numeric). Par defaut a NULL. Voir
details.</p>
</td></tr>
<tr><td><code id="add_typo_symboles_+3A_epaisseurs">epaisseurs</code></td>
<td>
<p>vecteur de numeriques (numeric). Par defaut a NULL. Voir
details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Pour ajouter des symboles a la carte leaflet, il faut fournir un fond de
points et si besoin preciser le type des points (par defaut un carre plein -
voir l'aide de ?graphics::points), leurs couleurs (par defaut rouge), leurs
tailles (par defaut 30) et l'epaisseur de la bordure du symbole si ce
dernier n'est pas plein.
</p>
<p>Attention a l'ordre des elements des vecteurs qui doivent correspondre a
l'ordre du fond de points.
</p>


<h3>Value</h3>

<p>Retourne un objet de type leaflet.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+coord_legende">coord_legende</a></code>
</p>
<p><code><a href="#topic+leaflet_fonds_simples">leaflet_fonds_simples</a></code>
</p>
<p><code><a href="#topic+leaflet_ronds">leaflet_ronds</a> <a href="#topic+leaflet_classes">leaflet_classes</a>
<a href="#topic+leaflet_ronds_classes">leaflet_ronds_classes</a> <a href="#topic+leaflet_classes_ronds">leaflet_classes_ronds</a>
<a href="#topic+leaflet_typo">leaflet_typo</a></code>
</p>
<p><code><a href="#topic+leaflet_oursins">leaflet_oursins</a> <a href="#topic+leaflet_joignantes">leaflet_joignantes</a>
<a href="#topic+leaflet_saphirs">leaflet_saphirs</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("depm")
data("regm")

# Typologie en symboles
map &lt;- leaflet_fonds_simples(listFonds = list(depm))
points &lt;- suppressWarnings(sf::st_centroid(depm[depm$CODE=="75",]))
points &lt;- rbind(points,suppressWarnings(sf::st_centroid(depm[depm$CODE=="13",])))
points &lt;- rbind(points,suppressWarnings(sf::st_centroid(depm[depm$CODE=="69",])))
types &lt;- c(16,15,15)
couleurs &lt;- c("blue","red","red")
tailles &lt;- c(25,20,20)
map &lt;- add_typo_symboles(map, fondPoints=points, types = types,
couleurs = couleurs, tailles = tailles)

 map


</code></pre>

<hr>
<h2 id='affiche_palette'>Returns a palette colors of the graphic chart of INSEE</h2><span id='topic+affiche_palette'></span>

<h3>Description</h3>

<p>Returns a palette colors of the graphic chart of INSEE.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>affiche_palette(nomPalette = "defaut")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="affiche_palette_+3A_nompalette">nomPalette</code></td>
<td>
<p>chaine de caracteres (character). A choisir parmi
&quot;defaut&quot;, &quot;Insee_Rouge&quot;, &quot;Insee_Jaune&quot;, &quot;Insee_Bleu&quot;, &quot;Insee_Turquoise&quot;,
&quot;Insee_Vert&quot;, &quot;Insee_Violet&quot;, &quot;Insee_Gris&quot;, &quot;Turquoise_Neg&quot;, &quot;Vert_Neg&quot;,
&quot;Violet_Neg&quot; ou &quot;Gris_Neg&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Les couleurs de palettes préfixées par &quot;Insee_&quot; sont celles de la charte graphique
INSEE. La fonction affiche_palette(nomPalette) permet de visualiser les couleurs de chaque
palette disponible.
Les modalités pour l'argument 'nomPalette' sont &quot;Insee_Rouge&quot;, &quot;Insee_Jaune&quot;, Insee_Bleu&quot;,
&quot;Insee_Turquoise&quot;, &quot;Insee_Vert&quot;, &quot;Insee_Violet&quot; et &quot;Insee_Gris&quot; pour les palettes de la
charte graphique INSEE, &quot;defaut&quot;, &quot;Turquoise_Neg&quot;, &quot;Vert_Neg&quot;, &quot;Violet_Neg&quot; et &quot;Gris_Neg&quot;
pour les palettes hors charte.
</p>
<p>La palette &quot;defaut&quot; reprend les couleurs de la palette RdYlBu de ColorBrewer.
</p>
<p>Seules les palettes &quot;Insee_Rouge&quot; et &quot;Insee_Jaune&quot; proposent des palettes pour des valeurs
négatives et positives. Pour ces deux palettes, la palette &quot;Insee_Bleu&quot; est utilisée
pour représenter les valeurs négatives. Cette dernière peut également être utilisée seule 
pour des valeurs uniquement positives ou négatives.
</p>
<p>La fonction permet de visualiser tous les dégradés possibles pour une palette donnée.
</p>
<p>La liste des valeurs hexadécimales de toutes les palettes est dipsonible en chargeant
les données suivantes : data(&quot;palettes_insee&quot;)
</p>


<h3>Value</h3>

<p>Affiche la palette dans l'onglet Plots.
</p>


<h3>References</h3>

<p>Un convertisseur de couleurs pour visualiser une couleur a
partir de son nom, son code hexadecimal ou RGB :
http://www.proftnj.com/RGB3.htm
</p>
<p>ColorBrewer 2.0 :
https://colorbrewer2.org/#type=diverging&amp;scheme=RdYlBu&amp;n=10
</p>


<h3>See Also</h3>

<p><code><a href="#topic+set_couleur_classes">set_couleur_classes</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
affiche_palette(nomPalette = "defaut")

</code></pre>

<hr>
<h2 id='calcul_'>Calculating a class variable</h2><span id='topic+calcul_'></span><span id='topic+calcul_ratio'></span><span id='topic+calcul_tx_evol_global'></span><span id='topic+calcul_tx_evol_ann_moy'></span><span id='topic+calcul_part_ens'></span><span id='topic+calculette'></span>

<h3>Description</h3>

<p>Add to a data table a column whose values can be represented in a class
analysis (ratio, part, evolution ...).
</p>
<p>The calculation is based on volume data (from the population, for example).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calcul_ratio(data, var1, var2)

calcul_tx_evol_global(data, var1, var2)

calcul_tx_evol_ann_moy(data, var1, var2, nbAnnees)

calcul_part_ens(data, var)

calculette(data, formule = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calcul__+3A_data">data</code></td>
<td>
<p>tableau de donnees (data.frame).</p>
</td></tr>
<tr><td><code id="calcul__+3A_var1">var1</code></td>
<td>
<p>chaine de caracteres (character). Variable en volume de la
table.</p>
</td></tr>
<tr><td><code id="calcul__+3A_var2">var2</code></td>
<td>
<p>chaine de caracteres (character). Variable en volume de la
table.</p>
</td></tr>
<tr><td><code id="calcul__+3A_nbannees">nbAnnees</code></td>
<td>
<p>nombre (numeric). Nombre d'annees appliquable au taux
d'evolution annuel moyen.</p>
</td></tr>
<tr><td><code id="calcul__+3A_var">var</code></td>
<td>
<p>chaine de caracteres (character). Variable en volume de la table.</p>
</td></tr>
<tr><td><code id="calcul__+3A_formule">formule</code></td>
<td>
<p>chaine de caracteres (character). Formule libre pour le
calcul d'une variable de classes. Seuls les caracteres + - * / ^ ( ) sont
acceptes.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Les formules utilisees sont : </p>

<dl>
<dt>ratio</dt><dd><p><code>(data[,var1]/data[,var2])*100</code></p>
</dd>
<dt>tx_evol_global</dt><dd><p><code>((data[,var2]-data[,var1])/data[,var1])*100</code></p>
</dd>
<dt>tx_evol_ann_moy</dt><dd><p><code>((data[,var2]/data[,var1])^(1/nbAnnees)-1)*100</code></p>
</dd>
<dt>part_ens</dt><dd><p><code>(data[,var]/sum(data[,var],na.rm = TRUE))*100</code></p>
</dd> </dl>



<h3>Value</h3>

<p>Retourne un objet data.frame.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("donnees_monoloc")

ratio &lt;- calcul_ratio(data = donnees_monoloc, var1 = "POP_2010", var2 = "POP_2015")
teg &lt;- calcul_tx_evol_global(data = donnees_monoloc, var1 = "POP_2010", var2 = "POP_2015")
team &lt;- calcul_tx_evol_ann_moy(data = donnees_monoloc, var1 = "POP_2010", var2 = "POP_2015",
nbAnnees = 5)
part &lt;- calcul_part_ens(data = donnees_monoloc, var = "POP_2015")

</code></pre>

<hr>
<h2 id='coord_legende'>Returns the lon / lat coordinates of a 'leaflet' map's legend</h2><span id='topic+coord_legende'></span>

<h3>Description</h3>

<p>Returns the lon / lat coordinates of a 'leaflet' map's legend for
proportional circles, chroropleth, typology, proportional and sapphire
arrows.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>coord_legende(map)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="coord_legende_+3A_map">map</code></td>
<td>
<p>objet leaflet.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Au moins une legende doit exister sur la carte avant de pouvoir connaitre sa
position. Les cartes en ronds proportionnels avec une analyse en classes ont
2 legendes.
</p>


<h3>Value</h3>

<p>Retourne un objet data.frame avec les coordonnees lon/lat de la (ou
des) legende(s). Le type de legende est indique dans le row.names.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+add_legende_ronds">add_legende_ronds</a>, <a href="#topic+add_legende_classes">add_legende_classes</a>,
<a href="#topic+add_legende_typo">add_legende_typo</a>,</code>
</p>
<p><code><a href="#topic+add_legende_joignantes">add_legende_joignantes</a>, <a href="#topic+add_legende_saphirs">add_legende_saphirs</a>,</code>
</p>
<p><code><a href="#topic+leaflet_ronds">leaflet_ronds</a>, <a href="#topic+leaflet_classes">leaflet_classes</a>,
<a href="#topic+leaflet_ronds_classes">leaflet_ronds_classes</a>,</code>
</p>
<p><code><a href="#topic+leaflet_classes_ronds">leaflet_classes_ronds</a>, <a href="#topic+leaflet_typo">leaflet_typo</a>,
<a href="#topic+leaflet_oursins">leaflet_oursins</a>, <a href="#topic+leaflet_joignantes">leaflet_joignantes</a>,</code>
</p>
<p><code><a href="#topic+leaflet_saphirs">leaflet_saphirs</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("donnees_monoloc")
data("depm")

# Ronds proportionnels
map &lt;- leaflet_ronds(data = donnees_monoloc, fondMaille = depm,
idData = "COD_DEP", varVolume = "POP_2015")
map &lt;- add_legende_ronds(map = map, titre = "POP_2015")

 map


coord &lt;- coord_legende(map)
map &lt;- add_legende_ronds(map = map, titre = "POP_2015", lng = 8, lat = 50)

 map


</code></pre>

<hr>
<h2 id='coordonnees_etiquettes'>Data table of labels</h2><span id='topic+coordonnees_etiquettes'></span>

<h3>Description</h3>

<p>Returns a data table for formatting labels and their position for a map in
plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>coordonnees_etiquettes(fondMaille, listeCode)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="coordonnees_etiquettes_+3A_fondmaille">fondMaille</code></td>
<td>
<p>objet sf. Fond de carte.</p>
</td></tr>
<tr><td><code id="coordonnees_etiquettes_+3A_listecode">listeCode</code></td>
<td>
<p>vecteur de caracteres (character). Liste des codes de la
maille a afficher sur la carte.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Le tableau des etiquettes contient le code, le libelle a afficher, les
coordonnees x et y du centroid de la maille donc des etiquettes, la taille,
le style et la couleur de la police. Le style de police (colonne
<code>FONT</code>) est un entier : 1 (normal), 2 (gras, par defaut), 3 (italique)
et 4 (gras italique).
</p>
<p>Ce tableau peut etre modifie pour changer le style d'une ou plusieurs
etiquettes mais aussi leur position (x et y) pour eviter le chevauchement.
</p>
<p>Pour afficher la carte avec les etiquettes formatees, il faut passer ce
tableau dans le parametre &quot;etiquettes&quot; d'une fonction plot.
</p>


<h3>Value</h3>

<p>Retourne un objet data.frame.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot_ronds">plot_ronds</a>, <a href="#topic+plot_classes">plot_classes</a>,
<a href="#topic+plot_ronds_classes">plot_ronds_classes</a>, <a href="#topic+plot_classes_ronds">plot_classes_ronds</a>, <a href="#topic+plot_typo">plot_typo</a>,</code>
</p>
<p><code><a href="#topic+plot_oursins">plot_oursins</a>, <a href="#topic+plot_joignantes">plot_joignantes</a>, <a href="#topic+plot_saphirs">plot_saphirs</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("donnees_monoloc")
data("depm")

etiquettes &lt;- coordonnees_etiquettes(fondMaille = depm,
listeCode = c("06","13","31","33","44","67","69","59","75"))
etiquettes$LIBELLE &lt;- c("Nice","Marseille","Toulouse","Bordeaux","Nantes",
"Lille","Strasbourg","Lyon","Paris")
etiquettes[etiquettes$CODE=="75","TAILLE"] &lt;- 1.3

# Ronds proportionnels sur une analyse en classes
fond_ronds &lt;- plot_classes_ronds(data = donnees_monoloc, fondMaille = depm,
idData = "COD_DEP", varVolume = "POP_2015", varRatio = "VAR_AN_MOY", nbClasses = 4,
titreLegRonds = "POP_2015", titreLegClasses = "VAR_AN_MOY",
xLegClasses = 1150000, yLegClasses = 6600000, etiquettes = etiquettes)

</code></pre>

<hr>
<h2 id='distrib_variable'>Histogram of the distribution of the class variable</h2><span id='topic+distrib_variable'></span>

<h3>Description</h3>

<p>Displays a histogram of the distribution of the class variable (ratio, part,
evolution ...)  based on the specified method, number of classes or breaks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>distrib_variable(data, varRatio, methode = "kmeans", nbClasses = 3,
bornes = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="distrib_variable_+3A_data">data</code></td>
<td>
<p>tableau de donnees (data.frame).</p>
</td></tr>
<tr><td><code id="distrib_variable_+3A_varratio">varRatio</code></td>
<td>
<p>chaine de caracteres (character). Variable des classes de la
table.</p>
</td></tr>
<tr><td><code id="distrib_variable_+3A_methode">methode</code></td>
<td>
<p>chaine de caracteres (character). A choisir parmi &quot;kmeans&quot;
(par defaut), &quot;fisher&quot;, &quot;jenks&quot; ou &quot;quantile&quot;.</p>
</td></tr>
<tr><td><code id="distrib_variable_+3A_nbclasses">nbClasses</code></td>
<td>
<p>valeur numerique (numeric). Nombre de classes. Par defaut 3
classes.</p>
</td></tr>
<tr><td><code id="distrib_variable_+3A_bornes">bornes</code></td>
<td>
<p>vecteur de valeurs numeriques (numeric). Par defaut a NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Si les bornes sont renseignees, aucune methode est appliquee. Elle est
consideree comme manuelle.
</p>
<p>Si les donnees a representer possedent des valeurs negatives et positives,
alors une borne de classe a zero est geree automatiquement pour les methodes
&quot;kmeans&quot;, &quot;fisher&quot; et &quot;jenks&quot;. La distribution des valeurs dans les classes,
effectuee par la methode specifiee, est independante entre les valeurs
negatives et les valeurs positives.
</p>
<p>La methode &quot;quantile&quot; ne gere pas de borne a zero.
</p>
<p>La fonction <code>ggplot2::ggplot</code> est utilisee pour la creation de
l'histogramme.
</p>


<h3>Value</h3>

<p>Retourne un objet de type <code>ggplot</code>
</p>
<p>Affiche l'histogramme dans le plot.
</p>


<h3>See Also</h3>

<p><code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("donnees_monoloc")

distrib_variable(data = donnees_monoloc ,varRatio = "VAR_AN_MOY", nbClasses = 4)

</code></pre>

<hr>
<h2 id='donnees'>Examples of data</h2><span id='topic+donnees'></span><span id='topic+com_dep_13_30_83_84'></span><span id='topic+donnees_a_facon'></span><span id='topic+donnees_monoloc'></span><span id='topic+donnees_biloc'></span><span id='topic+donnees_biloc_saphirs'></span><span id='topic+depm'></span><span id='topic+regm'></span><span id='topic+fram'></span><span id='topic+palettes_insee'></span>

<h3>Description</h3>

<p>Data tables for examples.
</p>
<p>- <code>com_dep_13_30_83_84</code> for <code>zonage_a_facon</code>
</p>
<p>- <code>donnees_a_facon</code> for <code>zonage_a_facon</code>
</p>
<p>- <code>donnees_monoloc</code> for proportional circles, chroropleth and typology
</p>
<p>- <code>donnees_biloc</code> for propotionnal arrows
</p>
<p>- <code>donnees_biloc_saphirs</code> for sapphire arrows
</p>
<p>- <code>depm, regm, fram</code> for the meshes and contours of the maps
</p>
<p>- <code>palettes_insee</code> for palette of the graphic chart of INSEE
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("com_dep_13_30_83_84")

data("donnees_a_facon")

data("donnees_monoloc")

data("donnees_biloc")

data("donnees_biloc_saphirs")

data("depm")

data("regm")

data("fram")

data("palettes_insee")
</code></pre>


<h3>Format</h3>

<p><code>com_dep_13_30_83_84</code> Un data frame de 792 observations et 3
variables.  </p>
 <dl>
<dt>&quot;CODE&quot;</dt><dd><p>vecteur caracteres</p>
</dd>
<dt>&quot;LIBELLE&quot;</dt><dd><p>vecteur caracteres</p>
</dd>
<dt>&quot;geometry&quot;</dt><dd><p>sfc_GEOMETRY</p>
</dd> </dl>

<p>Un data frame de 281 observations et 3 variables.  </p>

<dl>
<dt>&quot;DEPCOM&quot;</dt><dd><p>vecteur caracteres</p>
</dd> <dt>&quot;ZE2010&quot;</dt><dd><p>vecteur
caracteres</p>
</dd> <dt>&quot;LIB_ZE2010&quot;</dt><dd><p>vecteur caracteres</p>
</dd> </dl>

<p><code>donnees_monoloc</code> Un data frame de 96 observations et 6 variables.
</p>
 <dl>
<dt>&quot;COD_DEP&quot;</dt><dd><p>vecteur caracteres</p>
</dd>
<dt>&quot;LIB_DEP&quot;</dt><dd><p>vecteur caracteres</p>
</dd> <dt>&quot;POP_2010&quot;</dt><dd><p>vecteur
numerique</p>
</dd> <dt>&quot;POP_2015&quot;</dt><dd><p>vecteur numerique</p>
</dd>
<dt>&quot;VAR_AN_MOY&quot;</dt><dd><p>vecteur numerique</p>
</dd> <dt>&quot;REG&quot;</dt><dd><p>vecteur
caracteres</p>
</dd> </dl>

<p><code>donnees_biloc</code> Un data frame de 378 observations et 3 variables.
</p>
 <dl>
<dt>&quot;REG_DEPART&quot;</dt><dd><p>vecteur caracteres</p>
</dd>
<dt>&quot;REG_ARRIVEE&quot;</dt><dd><p>vecteur caracteres</p>
</dd> <dt>&quot;MIGR&quot;</dt><dd><p>vecteur
numerique</p>
</dd> </dl>

<p><code>donnees_biloc_saphirs</code> Un data frame de 21 observations et 3
variables.  </p>
 <dl>
<dt>&quot;REG_DEPART&quot;</dt><dd><p>vecteur caracteres</p>
</dd>
<dt>&quot;REG_ARRIVEE&quot;</dt><dd><p>vecteur caracteres</p>
</dd> <dt>&quot;MIGR&quot;</dt><dd><p>vecteur
numerique</p>
</dd> </dl>

<p><code>depm</code> Un data frame de 96 observations et 5 variables.  </p>

<dl>
<dt>&quot;CODE&quot;</dt><dd><p>vecteur caracteres</p>
</dd> <dt>&quot;LIBELLE&quot;</dt><dd><p>vecteur
caracteres</p>
</dd> <dt>&quot;REG&quot;</dt><dd><p>vecteur caracteres</p>
</dd>
<dt>&quot;SURF&quot;</dt><dd><p>vecteur numerique</p>
</dd> <dt>&quot;geometry&quot;</dt><dd><p>sfc_GEOMETRY</p>
</dd>
</dl>

<p><code>regm</code> Un data frame de 13 observations et 4 variables.  </p>

<dl>
<dt>&quot;CODE&quot;</dt><dd><p>vecteur caracteres</p>
</dd> <dt>&quot;LIBELLE&quot;</dt><dd><p>vecteur
caracteres</p>
</dd> <dt>&quot;SURF&quot;</dt><dd><p>vecteur numerique</p>
</dd>
<dt>&quot;geometry&quot;</dt><dd><p>sfc_GEOMETRY</p>
</dd> </dl>

<p><code>fram</code> Un data frame de 1 observation et 4 variables.  </p>

<dl>
<dt>&quot;CODE&quot;</dt><dd><p>vecteur caracteres</p>
</dd> <dt>&quot;LIBELLE&quot;</dt><dd><p>vecteur
caracteres</p>
</dd> <dt>&quot;SURF&quot;</dt><dd><p>vecteur numerique</p>
</dd>
<dt>&quot;geometry&quot;</dt><dd><p>sfc_GEOMETRY</p>
</dd> </dl>

<p><code>palettes_insee</code> Une liste de vecteurs caracteres.  </p>

<dl>
<dt>&quot;nomPalette&quot;</dt><dd><p>vecteur caracteres de codes hexadecimaux</p>
</dd> </dl>



<h3>Examples</h3>

<pre><code class='language-R'>
data(com_dep_13_30_83_84)
data(donnees_a_facon)
data(donnees_monoloc)
data(donnees_biloc)
data(donnees_biloc_saphirs)
data(depm)
data(regm)
data(fram)
data(palettes_insee)

</code></pre>

<hr>
<h2 id='export_'>Export a 'leaflet' map in image format</h2><span id='topic+export_'></span><span id='topic+export_jpeg'></span><span id='topic+export_pdf'></span><span id='topic+export_png'></span>

<h3>Description</h3>

<p>Export a 'leaflet' map in image format (.jpeg, .pdf or .png).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>export_jpeg(map, chemin, nomFichier)

export_pdf(map, chemin, nomFichier)

export_png(map, chemin, nomFichier)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="export__+3A_map">map</code></td>
<td>
<p>objet leaflet.</p>
</td></tr>
<tr><td><code id="export__+3A_chemin">chemin</code></td>
<td>
<p>chaine de caracteres (character). Chemin du dossier
d'exportation de la carte.</p>
</td></tr>
<tr><td><code id="export__+3A_nomfichier">nomFichier</code></td>
<td>
<p>chaine de caracteres (character). Nom du fichier en sortie
sans l'extension.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Attention, l'export en format image peut durer quelques minutes.
</p>


<h3>Value</h3>

<p>Ne retourne aucun objet.
</p>
<p>Exporte la carte dans le format .jpeg, .pdf ou .png a l'emplacement
specifie.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+leaflet_ronds">leaflet_ronds</a>, <a href="#topic+leaflet_classes">leaflet_classes</a>,
<a href="#topic+leaflet_ronds_classes">leaflet_ronds_classes</a>, <a href="#topic+leaflet_classes_ronds">leaflet_classes_ronds</a>,</code>
</p>
<p><code><a href="#topic+leaflet_typo">leaflet_typo</a>, <a href="#topic+leaflet_oursins">leaflet_oursins</a>,
<a href="#topic+leaflet_joignantes">leaflet_joignantes</a>, <a href="#topic+leaflet_saphirs">leaflet_saphirs</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("depm")
data("regm")

data("donnees_monoloc")

# Ronds proportionnels
map &lt;- leaflet_ronds(data = donnees_monoloc, fondMaille = depm,
idData = "COD_DEP", varVolume = "POP_2015")


 ## Not run:
 export_jpeg(map = map, chemin = tempdir(), nomFichier = "map")
 export_pdf(map = map, chemin = tempdir(), nomFichier = "map")
 export_png(map = map, chemin = tempdir(), nomFichier = "map")
 ## End(Not run)


</code></pre>

<hr>
<h2 id='export_qgis_'>Export a 'leaflet' map to Qgis project</h2><span id='topic+export_qgis_'></span><span id='topic+export_qgis_ronds'></span><span id='topic+export_qgis_classes'></span><span id='topic+export_qgis_ronds_classes'></span><span id='topic+export_qgis_classes_ronds'></span><span id='topic+export_qgis_typo'></span><span id='topic+export_qgis_oursins'></span><span id='topic+export_qgis_joignantes'></span><span id='topic+export_qgis_saphirs'></span>

<h3>Description</h3>

<p>Export a 'leaflet' map to Qgis project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>export_qgis_ronds(map, cheminDossier, nomFichier, titre1 = "", titre2
= "", source = "")

export_qgis_classes(map, cheminDossier, nomFichier, titre1 = "", titre2 =
"", source = "")

export_qgis_ronds_classes(map, cheminDossier, nomFichier, titre1 = "",
titre2 = "", source = "")

export_qgis_classes_ronds(map, cheminDossier, nomFichier, titre1 = "",
titre2 = "", source = "")

export_qgis_typo(map, cheminDossier, nomFichier, titre1 = "", titre2 = "",
source = "")

export_qgis_oursins(map, cheminDossier, nomFichier, titre1 = "", titre2 =
"", source = "")

export_qgis_joignantes(map, cheminDossier, nomFichier, titre1 = "", titre2 =
"", source = "")

export_qgis_saphirs(map, cheminDossier, nomFichier, titre1 = "", titre2 =
"", source = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="export_qgis__+3A_map">map</code></td>
<td>
<p>objet leaflet.</p>
</td></tr>
<tr><td><code id="export_qgis__+3A_chemindossier">cheminDossier</code></td>
<td>
<p>chaine de caracteres (character). Chemin du dossier
d'exportation du projet.</p>
</td></tr>
<tr><td><code id="export_qgis__+3A_nomfichier">nomFichier</code></td>
<td>
<p>chaine de caracteres (character). Nom du projet en sortie
sans l'extension.</p>
</td></tr>
<tr><td><code id="export_qgis__+3A_titre1">titre1</code></td>
<td>
<p>chaine de caracteres (character). Titre principal de la carte,
le plus souvent informatif.</p>
</td></tr>
<tr><td><code id="export_qgis__+3A_titre2">titre2</code></td>
<td>
<p>chaine de caracteres (character). Titre secondaire de la
carte, le plus souvent descriptif.</p>
</td></tr>
<tr><td><code id="export_qgis__+3A_source">source</code></td>
<td>
<p>chaine de caracteres (character). Source de la carte.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Il faut obligatoirement ajouter la legende a la carte avant d'utiliser la
fonction d'export Qgis.
</p>
<p>Le projet .qgs est associe a tous les fonds ShapeFile qui composent la carte
(.shp, .dbf, .prj, .shx).
</p>
<p>Attention, l'export du projet Qgis peut durer quelques minutes.
</p>


<h3>Value</h3>

<p>Ne retourne aucun objet.
</p>
<p>Exporte la carte en projet Qgis a l'emplacement specifie.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+leaflet_ronds">leaflet_ronds</a>, <a href="#topic+leaflet_classes">leaflet_classes</a>,
<a href="#topic+leaflet_ronds_classes">leaflet_ronds_classes</a>, <a href="#topic+leaflet_classes_ronds">leaflet_classes_ronds</a>,</code>
</p>
<p><code><a href="#topic+leaflet_typo">leaflet_typo</a>, <a href="#topic+leaflet_oursins">leaflet_oursins</a>,
<a href="#topic+leaflet_joignantes">leaflet_joignantes</a>, <a href="#topic+leaflet_saphirs">leaflet_saphirs</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("depm")
data("regm")

data("donnees_monoloc")

# Ronds proportionnels
map &lt;- leaflet_ronds(data = donnees_monoloc, fondMaille = depm,
idData = "COD_DEP", varVolume = "POP_2015")
map &lt;- add_legende_ronds(map = map, titre = "POP_2015", lng = 9, lat = 50, zoom = 6)


 ## Not run:
 export_qgis_ronds(map = map, cheminDossier = tempdir(), nomFichier = "projet_qgis",
 source = "Source : INSEE - RP2016")
 ## End(Not run)


</code></pre>

<hr>
<h2 id='largeur_fleche'>Width of the arrow for 'leaflet' maps</h2><span id='topic+largeur_fleche'></span>

<h3>Description</h3>

<p>Width of the largest arrow of the map in kilometers for 'leaflet' maps.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>largeur_fleche(map)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="largeur_fleche_+3A_map">map</code></td>
<td>
<p>objet leaflet.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>La largeur de la fleche est disponible uniquement pour les representations
de fleches joignantes et de fleches saphirs.
</p>


<h3>Value</h3>

<p>Retourne une valeur numerique.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+leaflet_joignantes">leaflet_joignantes</a> <a href="#topic+leaflet_saphirs">leaflet_saphirs</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("donnees_biloc")
data("regm")

# Fleches joignantes
map &lt;- leaflet_joignantes(data = donnees_biloc, fondMaille = regm, typeMaille = "REG",
idDataDepart = "REG_DEPART", idDataArrivee = "REG_ARRIVEE",
varFlux = "MIGR", filtreDist = 1000, filtreMajeurs = 3)

 map

largeur_fleche(map)
# [1] 100

# Fleches joignantes
map &lt;- leaflet_joignantes(data = donnees_biloc, fondMaille = regm, typeMaille = "REG",
idDataDepart = "REG_DEPART", idDataArrivee = "REG_ARRIVEE",
varFlux = "MIGR", largeurFlecheMax = 200, filtreDist = 1000,
filtreMajeurs = 3)

 map

largeur_fleche(map)
# [1] 200

</code></pre>

<hr>
<h2 id='leaflet_'>Creation 'leaflet' maps</h2><span id='topic+leaflet_'></span><span id='topic+leaflet_fonds_simples'></span><span id='topic+leaflet_ronds'></span><span id='topic+leaflet_classes'></span><span id='topic+leaflet_ronds_classes'></span><span id='topic+leaflet_classes_ronds'></span><span id='topic+leaflet_typo'></span><span id='topic+leaflet_oursins'></span><span id='topic+leaflet_joignantes'></span><span id='topic+leaflet_saphirs'></span>

<h3>Description</h3>

<p>Create interactive maps for statistical analysis by 'leaflet' (zoom +
pop-up).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>leaflet_fonds_simples(listFonds, popup = NULL, init = TRUE, map =
NULL)

leaflet_ronds(data, fondMaille, fondMailleElargi = NULL, fondSuppl = NULL,
idData, varVolume, rayonRond = NULL, rapportRond = NULL, emprise = "FRM",
fondEtranger = NULL, fondChx = NULL, colPos = "#EB617F", colNeg = "#286AC7",
colBorderPos = "white", colBorderNeg = "white", epaisseurBorder = 1,
opacityElargi = 0.6, zoomMaille = NULL, map_proxy = NULL)

leaflet_classes(data, fondMaille, fondMailleElargi = NULL, fondSuppl = NULL,
idData, varRatio, methode = "kmeans", nbClasses = 3, bornes = NULL,
stylePalette = "defaut", opacityElargi = 0.6, colBorder = "white", precision
= 1, emprise = "FRM", fondEtranger = NULL, zoomMaille = NULL, map_proxy =
NULL)

leaflet_ronds_classes(data, fondMaille, fondMailleElargi = NULL, fondSuppl =
NULL, idData, varVolume, varRatio, rayonRond = NULL, rapportRond = NULL,
methode = "kmeans", nbClasses = 3, bornes = NULL, stylePalette = "defaut",
opacityElargi = 0.6, colBorderPos = "white", colBorderNeg = "white",
epaisseurBorder = 1, precision = 1, emprise = "FRM", fondEtranger = NULL,
fondChx = NULL, zoomMaille = NULL, map_proxy = NULL)

leaflet_classes_ronds(data, fondMaille, fondMailleElargi = NULL, fondSuppl =
NULL, idData, varVolume, varRatio, rayonRond = NULL, rapportRond = NULL,
methode = "kmeans", nbClasses = 3, bornes = NULL, stylePalette = "defaut",
opacityElargi = 0.6, colBorderClasses = "white", colBorderRondsPos =
"#303030", colBorderRondsNeg = "#303030", epaisseurBorder = 1.5, precision =
1, emprise = "FRM", fondEtranger = NULL, fondChx = NULL, zoomMaille = NULL,
map_proxy = NULL)

leaflet_typo(data, fondMaille, fondSuppl = NULL, idData, varTypo, emprise =
"FRM", fondEtranger = NULL, zoomMaille = NULL, map_proxy = NULL)

leaflet_oursins(data, fondMaille, fondSuppl = NULL, idDataDepart,
idDataArrivee, varFlux, filtreVol = 0, filtreDist = 100, filtreMajeurs = 10,
decalageAllerRetour = 0, decalageCentroid = 0, emprise = "FRM", fondEtranger
= NULL, zoomMaille = NULL, map_proxy = NULL)

leaflet_joignantes(data, fondMaille, typeMaille, fondSuppl = NULL,
idDataDepart, idDataArrivee, varFlux, largeurFlecheMax = NULL, filtreVol =
0, filtreDist = 100, filtreMajeurs = 10, decalageAllerRetour = 0,
decalageCentroid = 0, colFleche = "#286AC7", colBorder = "#303030", emprise
= "FRM", fondEtranger = NULL, zoomMaille = NULL, map_proxy = NULL)

leaflet_saphirs(data, fondMaille, typeMaille, fondSuppl = NULL,
idDataDepart, idDataArrivee, varFlux, largeurFlecheMax = NULL, direction =
"Ent", filtreVol = 0, colEntree = "#EB617F", colSortie = "#286AC7",
colBorder = "#303030", emprise = "FRM", fondEtranger = NULL, zoomMaille =
NULL, map_proxy = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="leaflet__+3A_data">data</code></td>
<td>
<p>tableau de donnees (data.frame).</p>
</td></tr>
<tr><td><code id="leaflet__+3A_fondmaille">fondMaille</code></td>
<td>
<p>objet sf. Fond de carte.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_listfonds">listFonds</code></td>
<td>
<p>list d'objets sf. Liste de fonds de carte.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_popup">popup</code></td>
<td>
<p>vecteur de numeriques (numeric). Choix des couches avec les
popup actifs. Par defaut a NULL (toutes les couches ont les popup actifs).</p>
</td></tr>
<tr><td><code id="leaflet__+3A_init">init</code></td>
<td>
<p>booleen. TRUE pour creer une carte avec des fonds d'habillage.
FALSE pour des fonds d'analyses. Par defaut a TRUE.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_map">map</code></td>
<td>
<p>objet leaflet. Permet d'ajouter des couches a une carte
existante. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_typemaille">typeMaille</code></td>
<td>
<p>chaine de caracteres (character). Type de maille issus
d'un zonage administratifs ou d'etudes (&quot;REG&quot;, &quot;DEP&quot;, &quot;UU&quot;, &quot;AU&quot;, &quot;ZE&quot;,
&quot;BV&quot;, &quot;EPCI&quot; ou &quot;COM&quot;).</p>
</td></tr>
<tr><td><code id="leaflet__+3A_fondmailleelargi">fondMailleElargi</code></td>
<td>
<p>objet sf. Fond de carte. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_fondsuppl">fondSuppl</code></td>
<td>
<p>objet sf. Fond de carte. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_iddata">idData</code></td>
<td>
<p>chaine de caracteres (character). Variable identifiant la
maille.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_iddatadepart">idDataDepart</code></td>
<td>
<p>chaine de caracteres (character). Variable identifiant
le depart du flux.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_iddataarrivee">idDataArrivee</code></td>
<td>
<p>chaine de caracteres (character). Variable identifiant
l'arrivee du flux.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_varvolume">varVolume</code></td>
<td>
<p>chaine de caracteres (character). Variable en volume pour
des ronds proportionnels.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_varratio">varRatio</code></td>
<td>
<p>chaine de caracteres (character). Variable en ratio pour des
analyses en classes.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_vartypo">varTypo</code></td>
<td>
<p>chaine de caracteres (character). Variable de typologie.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_varflux">varFlux</code></td>
<td>
<p>chaine de caracteres (character). Variable de flux pour des
oursins, fleches joignantes ou fleches saphirs.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_rayonrond">rayonRond</code></td>
<td>
<p>valeur numerique (numeric). Rayon du rond le plus grand en
metres. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_rapportrond">rapportRond</code></td>
<td>
<p>valeur numerique (numeric). Rapport entre l'aire du rond
le plus grand et la valeur maximale des donnees en volume. Par defaut a
NULL.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_methode">methode</code></td>
<td>
<p>chaine de caracteres (character). A choisir parmi &quot;kmeans&quot;
(par defaut), &quot;fisher&quot;, &quot;jenks&quot; ou &quot;quantile&quot;.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_nbclasses">nbClasses</code></td>
<td>
<p>valeur numerique (numeric). Nombre de classes. Par defaut 3
classes.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_bornes">bornes</code></td>
<td>
<p>vecteur de valeurs numeriques (numeric). Le nombre de bornes
correspond au nombre de classes -1. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_precision">precision</code></td>
<td>
<p>valeur numerique (numeric). Arrondi des valeurs en ratio
pour le calcul des bornes de classes. Par defaut, 1 chiffre apres la
virgule.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_largeurflechemax">largeurFlecheMax</code></td>
<td>
<p>valeur numerique (numeric). Valeur correspondant a
la largeur de la fleche la plus grande de la carte (km). Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_direction">direction</code></td>
<td>
<p>chaine de caracteres (character). Pour les fleches saphirs,
type de flux a choisir parmi &quot;Ent&quot; pour entrees (par defaut), &quot;Sor&quot; pour
sorties et &quot;Sol&quot; pour soldes (entrees - sorties).</p>
</td></tr>
<tr><td><code id="leaflet__+3A_filtrevol">filtreVol</code></td>
<td>
<p>valeur numerique (numeric). Filtre sur la valeur minimale
du nombre de flux a afficher. Par defaut a 0 : affichage de tous les flux.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_filtredist">filtreDist</code></td>
<td>
<p>valeur numerique (numeric). Filtre sur la distance
maximale des fleches pour les oursins et les fleches joignantes. Par defaut
a 100 km : affichage des flux a moins de 100 km.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_filtremajeurs">filtreMajeurs</code></td>
<td>
<p>valeur numerique (numeric). Filtre sur le nombre de
flux entrants et sortants les plus importants d'un territoire. Par defaut a
10 : les 10 flux les plus importants sortant d'un territoire ou y entrant.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_decalageallerretour">decalageAllerRetour</code></td>
<td>
<p>valeur numerique (numeric). Decalage entre les
fleches aller-retour (km).</p>
</td></tr>
<tr><td><code id="leaflet__+3A_decalagecentroid">decalageCentroid</code></td>
<td>
<p>valeur numerique (numeric). Decalage des fleches
depuis et vers les centroides des territoires (km).</p>
</td></tr>
<tr><td><code id="leaflet__+3A_colpos">colPos</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee (par exemple
&quot;orange&quot;) ou hexadecimal (par exemple &quot;#FFA500&quot;). Par defaut &quot;#EB617F&quot;.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_colneg">colNeg</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee (par exemple
&quot;blue&quot;) ou hexadecimal (par exemple &quot;#0000FF&quot;). Par defaut &quot;#286AC7&quot;.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_colborder">colBorder</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee (par
exemple &quot;white&quot;) ou hexadecimal (par exemple &quot;#FFFFFF&quot;). Par defaut &quot;white&quot;
pour les classes, &quot;#303030&quot; pour les fleches.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_colborderpos">colBorderPos</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee (par
exemple &quot;white&quot;) ou hexadecimal (par exemple &quot;#FFFFFF&quot;). Par defaut &quot;white&quot;.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_colborderneg">colBorderNeg</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee (par
exemple &quot;white&quot;) ou hexadecimal (par exemple &quot;#FFFFFF&quot;). Par defaut &quot;white&quot;.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_colborderrondspos">colBorderRondsPos</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee
(par exemple &quot;grey&quot;) ou hexadecimal (par exemple &quot;#808080&quot;). Par defaut
&quot;#303030&quot;.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_colborderrondsneg">colBorderRondsNeg</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee
(par exemple &quot;grey&quot;) ou hexadecimal (par exemple &quot;#808080&quot;). Par defaut
&quot;#303030&quot;.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_colborderclasses">colBorderClasses</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee
(par exemple &quot;grey&quot;) ou hexadecimal (par exemple &quot;#808080&quot;). Par defaut
&quot;white&quot;.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_epaisseurborder">epaisseurBorder</code></td>
<td>
<p>chaine de caracteres (numeric). Epaisseur de la
bordure des ronds. Par defaut a 1&quot;.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_stylepalette">stylePalette</code></td>
<td>
<p>chaine de caracteres (character). Palette de la charte
INSEE. A choisir entre &quot;defaut&quot;, &quot;Insee_Rouge&quot;, &quot;Insee_Jaune&quot;, &quot;Insee_Bleu&quot;,
&quot;Insee_Turquoise&quot;, &quot;Insee_Vert&quot;, &quot;Insee_Violet&quot; ou &quot;Insee_Gris&quot;
(voir 'affiche_palette(nomPalette)').</p>
</td></tr>
<tr><td><code id="leaflet__+3A_colfleche">colFleche</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee (par
exemple &quot;orange&quot;) ou hexadecimal (par exemple &quot;#FFA500&quot;). Par defaut
&quot;#286AC7&quot;.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_colentree">colEntree</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee (par
exemple &quot;orange&quot;) ou hexadecimal (par exemple &quot;#FFA500&quot;). Par defaut
&quot;#EB617F&quot;.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_colsortie">colSortie</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee (par
exemple &quot;blue&quot;) ou hexadecimal (par exemple &quot;#0000FF&quot;). Par defaut
&quot;#286AC7&quot;.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_opacityelargi">opacityElargi</code></td>
<td>
<p>valeur numerique (numeric). Opacite de la
representation elargie. Par defaut a 0.6 (valeur comprise entre
0-transparent et 1-opaque).</p>
</td></tr>
<tr><td><code id="leaflet__+3A_emprise">emprise</code></td>
<td>
<p>chaine de caracteres (character). &quot;FRM&quot; (par defaut pour la
France metropolitaine), &quot;971&quot; (Guadeloupe), &quot;972&quot; (Martinique), &quot;973&quot;
(Guyane), &quot;974&quot; (La Reunion), &quot;976&quot; (Mayotte) ou &quot;999&quot; (Etranger). Ce
parametre permet de definir le systeme de projection de la carte.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_fondetranger">fondEtranger</code></td>
<td>
<p>objet sf. Fond de carte d'habillage personnalisable pour
les fonds autres que la France (metropolitaine et DOM). Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_fondchx">fondChx</code></td>
<td>
<p>objet sf. Fond des chefs-lieux. Pour les ronds proportionnels
avec une maille communale, choix entre la position du centre des ronds sur
les centroides des communes (NULL par defaut) ou sur les chefs-lieux (chx)
des communes.</p>
</td></tr>
<tr><td><code id="leaflet__+3A_zoommaille">zoomMaille</code></td>
<td>
<p>vecteur de caracteres ou numeriques (character ou
numeric). Identifiant(s) de la maille du parametre fondMaille. Permet de
zoomer sur une ou plusieurs entités de la maille. Par defaut a NULL (zoom
sur l'emprise de la maille).</p>
</td></tr>
<tr><td><code id="leaflet__+3A_map_proxy">map_proxy</code></td>
<td>
<p>objet leaflet ou leaflet_proxy. Pour l'integration des
fonctions leaflet dans les applications shiny (cf vignette). Par defaut a
NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Les cartes leaflet sont interactives, il est alors possible :
</p>
<p>- de deplacer la carte avec un cliquer-glisser de la souris.
</p>
<p>- de zoomer/dezoomer la carte avec la roulette de la souris ou les boutons
+/- en haut a gauche de la carte. Le niveau de zoom peut varier de l'echelle
de la France metropolitaine a l'echelle communale.
</p>
<p>- de faire apparaitre des informations en cliquant sur des territoires. En
cliquant, par exemple, sur une maille d'une analyse en classes, un pop-up
s'affiche indiquant le nom du territoire et sa valeur en ratio. En cliquant
ailleurs, le 1er pop-up est remplace par un nouveau. On ferme le pop-up en
cliquant sur sa croix.
</p>
<p>- d'ajouter une legende, des elements contextuels et de modifier son
apparence via les fonctions oceanis associees.
</p>
<p>Les fonctions leaflet_() retournent un objet de type leaflet. Si vous
executez une fonction leaflet_() sans recuperer le resultat dans une
variable, la carte s'affichera automatiquement dans la fenetre viewer de
RStudio mais ne pourra pas etre reutilisee pour etre modifiee.  Si vous
sauvegardez le resultat dans une variable, la carte ne s'affichera qu'a
l'execution de cette variable (voir exemples).
</p>
<p>Il est possible de remplacer le fond d'habillage par defaut (France
metropolitaine ou DOM) par un autre fond. Pour cela, il faut specifier le
parametre emprise=&quot;999&quot; ET ajouter un fond sf dans le parametre
fondEtranger, par exemple, une carte de l'Europe ou d'un pays particulier.
Le systeme de coordonnees du fond doit etre projete (en unite de longueur)
et non geographique (lng/lat).  Si aucun code EPSG valide n'est trouve pour
ce fond, le code EPSG 3395 est choisi (projection Mercator). Attention car
la legende des ronds sera d'autant plus deformee qu'elle se situera loin de
l'equateur.
</p>
<p>Les fonctions leaflet peuvent etre integrees dans les applications shiny. Le
parametre map_proxy permet d'actualiser uniquement les couches modifiees et
non toute la carte entiere (voir vignette).
</p>
 <dl>
<dt>Fonds simples</dt><dd><p> Il s'agit d'une carte sans analyse avec
uniquement des fonds. Le premier fond de la liste est positionne derriere la
carte et le dernier fond de la liste devant. La personnalisation des fonds
se fait avec la fonction <code>set_fonds_simples</code>.  </p>
</dd>
<dt>Ronds proportionnels</dt><dd><p> L'interieur des cercles est de couleur orange
(couleur par defaut) pour representer les valeurs positives de la variable
en volume et bleu pour les valeurs negatives.
</p>
<p>Le parametre <code>fondChx</code> est a renseigner UNIQUEMENT si la maille est
communale.
</p>
<p>Pour information, le chef-lieu (ou chx) est un point de la commune autour
duquel la population est la plus dense. Le plus souvent, il s'agit de
l'hotel de ville de la commune.  </p>
</dd>
<dt>Analyse en classes</dt><dd><p> En semiologie, il est deconseille de multiplier
le nombre de classes pour des raisons de visibilite et de clarte de la
carte.
</p>
<p>Si les donnees ne comprennnent que des valeurs positives ou que des valeurs
negatives, il est conseille 5 classes au maximum.
</p>
<p>Si les donnees comprennnent a la fois des valeurs positives et negatives, le
nombre maximum conseille est 9 classes.
</p>
<p>Il est possible de specifier manuellement les bornes des classes en
implementant le parametre <code>bornes</code> d'un vecteur de valeurs numeriques
de type c(bornes1,bornes2,...). Le nombre de bornes correspond au nombre de
classes -1 <code>(length(bornes)==nbClasses-1)</code>. Il n'est pas obligatoire de
specifier les valeurs min et max.  </p>
</dd>
</dl>
<p>Les palettes de couleurs disponibles sont celles de la Charte Graphique
INSEE. En exécutant la fonction affiche_palette(nomPalette), il est
possible de visualiser les couleurs de chaque palette disponible. A choisir
entre &quot;defaut&quot;, &quot;Insee_Rouge&quot;, &quot;Insee_Jaune&quot;,  &quot;Insee_Bleu&quot;, &quot;Insee_Turquoise&quot;,
&quot;Insee_Vert&quot;, &quot;Insee_Violet&quot; ou &quot;Insee_Gris&quot;.
</p>
<dl>
<dt>Analyse en classes dans ronds proportionnels</dt><dd><p> L'analyse en classes
colore l'interieur des ronds (fonction <code>leaflet_ronds_classes()</code>) </p>
</dd>
<dt>Ronds proportionnels sur analyse en classes</dt><dd><p> Les ronds proportionnels
sont poses sur l'analyse en classes (fonction
<code>leaflet_classes_ronds()</code>) </p>
</dd>
<dt>Typologie</dt><dd><p> Meme conseil que pour les analyses en classes. Le choix
des couleurs ne doit pas etre un degrade si il n'existe pas de classement
dans les modalites.  </p>
</dd>
<dt>Oursins</dt><dd><p> Les oursins representent uniquement l'existence d'un flux
entre 2 territoires. Le sens du flux et le volume ne sont pas pris en
compte.
</p>
<p>Les filtres sur le volume, la distance et les flux majeurs sont
independants. Chacun d'eux s'appliquent sur les donnees initiales. Autrement
dit, le filtre sur les flux majeurs ne se fera pas apres un eventuel filtre
sur la distance mais sur toutes les donnees en entree.
</p>
<p>Le filtre sur le volume est plutot complementaire au filtre sur les flux
majeurs. En effet, il est possible de vouloir representer des faibles flux
significatifs. Le filtre sur les flux majeurs le permet contrairement au
filtre sur le volume seul.  </p>
</dd>
<dt>Fleches joignantes</dt><dd><p> Les fleches joignantes representent un flux entre
2 territoires, son sens et son volume. Dans le cas de flux aller et retour,
deux fleches de sens oppose sont superposees.
</p>
<p>La regle des filtres est la meme que pour les oursins.  </p>
</dd>
<dt>Fleches saphirs</dt><dd><p> Les fleches saphirs convergent vers ou divergent
d'un meme territoire. Elles permettent de representer les entrees, les
sorties ou le solde (entrees - sorties) d'un territoire par rapport aux
autres.
</p>
<p>Pour un solde positif, les fleches sont representees en orange, pour un
solde negatif en bleu.
</p>
<p>Une attention particuliere est a apporter au choix de la variable
idDataDepart et idDataArrivee selon si le flux est entrant, sortant ou en
solde.  </p>
</dd> </dl>



<h3>Value</h3>

<p>Retourne un objet leaflet.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+zonage_a_facon">zonage_a_facon</a>,</code>
</p>
<p><code><a href="#topic+rayon_ronds">rayon_ronds</a>, <a href="#topic+rapport_ronds">rapport_ronds</a>, <a href="#topic+largeur_fleche">largeur_fleche</a>,</code>
</p>
<p><code><a href="#topic+calcul_ratio">calcul_ratio</a>, <a href="#topic+calcul_tx_evol_global">calcul_tx_evol_global</a>,
<a href="#topic+calcul_tx_evol_ann_moy">calcul_tx_evol_ann_moy</a>, <a href="#topic+calcul_part_ens">calcul_part_ens</a>, <a href="#topic+calculette">calculette</a>,</code>
</p>
<p><code><a href="#topic+distrib_variable">distrib_variable</a>,</code>
</p>
<p><code><a href="#topic+add_legende_ronds">add_legende_ronds</a>, <a href="#topic+add_legende_classes">add_legende_classes</a>,
<a href="#topic+add_legende_typo">add_legende_typo</a>, <a href="#topic+add_legende_typo_symboles">add_legende_typo_symboles</a>,</code>
</p>
<p><code><a href="#topic+add_legende_joignantes">add_legende_joignantes</a>, <a href="#topic+add_legende_saphirs">add_legende_saphirs</a>,</code>
</p>
<p><code><a href="#topic+coord_legende">coord_legende</a>,</code>
</p>
<p><code><a href="#topic+add_source">add_source</a>, <a href="#topic+add_titre">add_titre</a>,</code>
</p>
<p><code><a href="#topic+set_fonds_simples">set_fonds_simples</a>,</code>
</p>
<p><code><a href="#topic+export_qgis_ronds">export_qgis_ronds</a>, <a href="#topic+export_qgis_classes">export_qgis_classes</a>,
<a href="#topic+export_qgis_ronds_classes">export_qgis_ronds_classes</a>, <a href="#topic+export_qgis_classes_ronds">export_qgis_classes_ronds</a>,</code>
</p>
<p><code><a href="#topic+export_qgis_typo">export_qgis_typo</a>, <a href="#topic+export_qgis_oursins">export_qgis_oursins</a>,
<a href="#topic+export_qgis_joignantes">export_qgis_joignantes</a>, <a href="#topic+export_qgis_saphirs">export_qgis_saphirs</a>,</code>
</p>
<p><code><a href="#topic+export_jpeg">export_jpeg</a>, <a href="#topic+export_pdf">export_pdf</a>, <a href="#topic+export_png">export_png</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("depm")
data("regm")

data("donnees_monoloc")


# Ronds proportionnels
map &lt;- leaflet_ronds(data = donnees_monoloc, fondMaille = depm,
idData = "COD_DEP", varVolume = "POP_2015")

 map

# Analyse en classes
map &lt;- leaflet_classes(data = donnees_monoloc, fondMaille = depm,
idData = "COD_DEP", varRatio = "VAR_AN_MOY", nbClasses = 4)

 map


# Analyse en classes dans les ronds proportionnels
map &lt;- leaflet_ronds_classes(data = donnees_monoloc, fondMaille = depm,
idData = "COD_DEP", varVolume = "POP_2015", varRatio = "VAR_AN_MOY", nbClasses = 4)

 map



# Ronds proportionnels sur une analyse en classes
map &lt;- leaflet_classes_ronds(data = donnees_monoloc, fondMaille = depm,
idData = "COD_DEP", varVolume = "POP_2015", varRatio = "VAR_AN_MOY", nbClasses = 4)

 map

 # Typologie
map &lt;- leaflet_typo(data = donnees_monoloc, fondMaille = depm, idData = "COD_DEP",
varTypo = "REG")

 map

data("donnees_biloc")

# Oursins
map &lt;- leaflet_oursins(data = donnees_biloc, fondMaille = regm,
idDataDepart = "REG_DEPART", idDataArrivee = "REG_ARRIVEE", varFlux = "MIGR",
filtreDist = 1000, filtreMajeurs = 3)

 map

# Fleches joignantes
map &lt;- leaflet_joignantes(data = donnees_biloc, fondMaille = regm,
typeMaille = "REG", idDataDepart = "REG_DEPART", idDataArrivee = "REG_ARRIVEE",
varFlux = "MIGR", filtreDist = 1000, filtreMajeurs = 3)

 map


data("donnees_biloc_saphirs")

# Fleches saphirs
map &lt;- leaflet_saphirs(data = donnees_biloc_saphirs, fondMaille = regm,
typeMaille = "REG", idDataDepart = "REG_DEPART", idDataArrivee = "REG_ARRIVEE",
varFlux = "MIGR", largeurFlecheMax = 80, direction = "Ent")

 map


</code></pre>

<hr>
<h2 id='oceanis-package'>Package : oceanis</h2><span id='topic+oceanis-package'></span>

<h3>Description</h3>

<p>Type : Package
</p>
<p>Version : 1.0.3
</p>
<p>Date : 2019-09-06
</p>
<p>License : GPL(&gt;=2.0)
</p>


<h3>Details</h3>

<p>Outil de cartographie permettant de realiser des cartes d'etudes et
d'analyses (ronds proportionnels, analyse en classes, typologie, oursins,
fleches joignantes et fleches saphirs).
</p>
<p>Le package <code>oceanis</code> repond a 3 types de besoins :
</p>
<p>- Creer des cartes fixes avec la possibilite d'ajouter des etiquettes. Ideal
pour les impressions de documents (.pdf ou autres).
</p>
<p>- Creer des cartes interactives grace au zoom et aux pop-up (technologie
leaflet). Ideal pour l'integration dans une application (en shiny par
exemple) ou dans une presentation en direct (en HTML).
</p>
<p>- Creer des cartes dans un environnement web ou les parametres sont
modifiables a la volee (technologie R-Shiny + leaflet). Ideal pour une
visualisation rapide des donnees ou pour une presentation en direct. Ici, la
carte est externalisee vers une nouvelle fenetre du navigateur.
</p>
<p>Les fonctions de creation de cartes sont classees en 3 categories,
correspondant aux 3 besoins precedents. Elles sont respectivement prefixees
par <code>plot_</code>, <code>leaflet_</code> et <code>shiny_</code>.
</p>
<p>D'autres fonctions existent pour completer l'offre :
</p>
<p>Des fonctions pour exporter une carte leaflet en projet Qgis, des fonctions
pour modifier son apparence, des fonctions permettant de creer ses propres
zonages (connus ou a facon) a partir de tableaux de donnees.
</p>
<p>Un exemple possible d'enchainement de fonctions :
</p>
<p>1- Chargement du package oceanis (<code>library(oceanis)</code>)
</p>
<p>2- Chargement des donnees avec la fonction <code>import()</code> du package
<code>rio</code>
</p>
<p>3- Chargement des fonds de carte avec la fonction <code>read_sf()</code> du
package <code>sf</code>
</p>
<p>4- Appel a une fonction de creation de carte (shiny_(), leaflet_() ou
plot_())
</p>
<p>5- Modification du parametrage (legende, fonds supplementaire, taille,
couleur, habillage...)
</p>
<p>6- Export de la carte en projet Qgis (uniquement pour les fonctions shiny_()
et leaflet_())
</p>
<p>ou 6-bis- Export de la carte en format image.
</p>
<p>Pour resumer, voici un comparatif des fonctionnalites proposees :
</p>
<p>PLOT
</p>
<p>Interactivite : Non
</p>
<p>Personnalisation / Parametrages : Fort
</p>
<p>Integration dans les applications : Moyen
</p>
<p>Export Qgis : Non
</p>
<p>Etiquettes : Oui
</p>
<p>Habillage : Fort
</p>
<p>Zonage a facon : Oui
</p>
<p>Representation elargie : Non
</p>
<p>LEAFLET
</p>
<p>Interactivite : Oui
</p>
<p>Personnalisation / Parametrages : Moyen
</p>
<p>Integration dans les applications : Fort
</p>
<p>Export Qgis : Oui
</p>
<p>Etiquettes : Non
</p>
<p>Habillage : Fort
</p>
<p>Zonage a facon : Oui
</p>
<p>Representation elargie : Oui
</p>
<p>R-SHINY
</p>
<p>Interactivite : Oui
</p>
<p>Personnalisation / Parametrages : Faible
</p>
<p>Integration dans les applications : Moyen
</p>
<p>Export Qgis : Oui
</p>
<p>Etiquettes : Non
</p>
<p>Habillage : Faible
</p>
<p>Zonage a facon : Oui
</p>
<p>Representation elargie : Oui
</p>

<hr>
<h2 id='plot_'>Creation maps in plot</h2><span id='topic+plot_'></span><span id='topic+plot_ronds'></span><span id='topic+plot_classes'></span><span id='topic+plot_ronds_classes'></span><span id='topic+plot_classes_ronds'></span><span id='topic+plot_typo'></span><span id='topic+plot_typo_symboles'></span><span id='topic+plot_oursins'></span><span id='topic+plot_joignantes'></span><span id='topic+plot_saphirs'></span>

<h3>Description</h3>

<p>Displays the map in a plot output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_ronds(data, fondMaille, fondSousAnalyse = NULL, fondSurAnalyse =
NULL, idData, varVolume, rayonRond = NULL, rapportRond = NULL, emprise =
"FRM", fondChx = NULL, precisionLegRonds = 0, titreLeg = "", xLeg = NULL,
yLeg = NULL, cadreLeg = FALSE, xLimCadreLeg = NULL, yLimCadreLeg = NULL,
titreCarte = "", sourceCarte = "", etiquettes = NULL, colPos =
"#EB617F", colNeg = "#286AC7", colBorder = "white", colBorderMaille =
"black", xlim = NULL, ylim = NULL)

plot_classes(data, fondMaille, fondSousAnalyse = NULL, fondSurAnalyse =
NULL, idData, varRatio, methode = "kmeans", nbClasses = 3, bornes = NULL,
precisionLegClasses = 1, titreLeg = "", labels = NULL, xLeg = NULL,
yLeg = NULL, cadreLeg = FALSE, xLimCadreLeg = NULL, yLimCadreLeg = NULL,
titreCarte = "", sourceCarte = "", etiquettes = NULL, stylePalette = "defaut",
palettePos = NULL, paletteNeg = NULL, colBorder = "white", xlim = NULL,
ylim = NULL)

plot_ronds_classes(data, fondMaille, fondSousAnalyse = NULL, fondSurAnalyse
= NULL, idData, varVolume, varRatio, rayonRond = NULL, rapportRond = NULL,
methode = "kmeans", nbClasses = 3, bornes = NULL, precisionLegRonds = 0,
precisionLegClasses = 1, emprise = "FRM", fondChx = NULL, titreLegRonds =
"", titreLegClasses = "", labels = NULL, xLegRonds = NULL, yLegRonds = NULL,
xLegClasses = NULL, yLegClasses = NULL, cadreLeg = FALSE, xLimCadreLegRonds = NULL,
yLimCadreLegRonds = NULL, xLimCadreLegClasses = NULL, yLimCadreLegClasses = NULL,
titreCarte = "", sourceCarte = "", etiquettes = NULL, stylePalette = "defaut",
palettePos = NULL, paletteNeg = NULL, colBorder = "white",
colBorderMaille = "black", xlim = NULL, ylim = NULL)

plot_classes_ronds(data, fondMaille, fondSousAnalyse = NULL, fondSurAnalyse
= NULL, idData, varVolume, varRatio, rayonRond = NULL, rapportRond = NULL,
methode = "kmeans", nbClasses = 3, bornes = NULL, precisionLegRonds = 0,
precisionLegClasses = 1, emprise = "FRM", fondChx = NULL, titreLegRonds = "",
titreLegClasses = "", labels = NULL, xLegRonds = NULL, yLegRonds = NULL,
xLegClasses = NULL, yLegClasses = NULL, cadreLeg = FALSE, xLimCadreLegRonds = NULL,
yLimCadreLegRonds = NULL, xLimCadreLegClasses = NULL, yLimCadreLegClasses = NULL,
titreCarte = "", sourceCarte = "", etiquettes = NULL, stylePalette = "defaut",
palettePos = NULL, paletteNeg = NULL, colBorder = "white",
colBorderRonds = "#303030", xlim = NULL, ylim = NULL)

plot_typo(data, fondMaille, fondSousAnalyse = NULL, fondSurAnalyse = NULL,
idData, varTypo, titreLeg = "", xLeg = NULL, yLeg = NULL, titreCarte = "",
sourceCarte = "", etiquettes = NULL, paletteTypo = NULL, labels = NULL,
cadreLeg = FALSE, xLimCadreLeg = NULL, yLimCadreLeg = NULL, colBorder = "white",
xlim = NULL, ylim = NULL)

plot_typo_symboles(fondPoints, listFonds, emprise = "FRM", types = NULL,
couleurs = NULL, tailles = NULL, epaisseurs = NULL, titreLeg = "", xLeg =
NULL, yLeg = NULL, cadreLeg = FALSE, xLimCadreLeg = NULL, yLimCadreLeg = NULL,
titreCarte = "", sourceCarte = "", etiquettes = NULL, labels = NULL, xlim = NULL,
ylim = NULL)

plot_oursins(data, fondMaille, fondSousAnalyse = NULL, fondSurAnalyse =
NULL, idDataDepart, idDataArrivee, varFlux, filtreVol = 0, filtreDist = 100,
filtreMajeurs = 10, decalageAllerRetour = 0, decalageCentroid = 0,
titreCarte = "", sourceCarte = "", etiquettes = NULL, epaisseur = 2,
colTrait = "black", colBorderMaille = "black", xlim = NULL, ylim = NULL)

plot_joignantes(data, fondMaille, fondSousAnalyse = NULL, fondSurAnalyse =
NULL, typeMaille, idDataDepart, idDataArrivee, varFlux, largeurFlecheMax =
NULL, filtreVol = 0, filtreDist = 100, filtreMajeurs = 10,
decalageAllerRetour = 0, decalageCentroid = 0, emprise = "FRM",
precisionLegFleches = 0, titreLeg = "", xLeg = NULL, yLeg = NULL,
cadreLeg = FALSE, xLimCadreLeg = NULL, yLimCadreLeg = NULL, titreCarte = "",
sourceCarte = "", etiquettes = NULL, colFleche = "#286AC7", colBorder
= "white", colBorderMaille = "black", xlim = NULL, ylim = NULL)

plot_saphirs(data, fondMaille, fondSousAnalyse = NULL, fondSurAnalyse =
NULL, typeMaille, idDataDepart, idDataArrivee, varFlux, largeurFlecheMax =
NULL, direction = "Ent", filtreVol = 0, emprise = "FRM", precisionLegFleches
= 0, titreLeg = "", xLeg = NULL, yLeg = NULL, cadreLeg = FALSE,
xLimCadreLeg = NULL, yLimCadreLeg = NULL, titreCarte = "", sourceCarte = "",
etiquettes = NULL, colEntree = "#EB617F", colSortie = "#286AC7",
colBorder = "white", colBorderMaille = "black", xlim = NULL, ylim = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot__+3A_data">data</code></td>
<td>
<p>tableau de donnees (data.frame).</p>
</td></tr>
<tr><td><code id="plot__+3A_fondmaille">fondMaille</code></td>
<td>
<p>objet sf. Fond de carte.</p>
</td></tr>
<tr><td><code id="plot__+3A_typemaille">typeMaille</code></td>
<td>
<p>chaine de caracteres (character). Type de maille issus
d'un zonage administratifs ou d'etudes (&quot;REG&quot;, &quot;DEP&quot;, &quot;UU&quot;, &quot;AU&quot;, &quot;ZE&quot;,
&quot;BV&quot;, &quot;EPCI&quot; ou &quot;COM&quot;).</p>
</td></tr>
<tr><td><code id="plot__+3A_fondsousanalyse">fondSousAnalyse</code></td>
<td>
<p>list d'objets sf. Liste de fonds de carte a ajouter
en-dessous de l'analyse. Par exemple, un fond de mer et des pays
frontaliers. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="plot__+3A_fondpoints">fondPoints</code></td>
<td>
<p>objets sf. Fond de points.</p>
</td></tr>
<tr><td><code id="plot__+3A_fondsuranalyse">fondSurAnalyse</code></td>
<td>
<p>list d'objets sf. Liste de fonds de carte a ajouter
au-dessus de l'analyse. Par exemple, un fond de departement. Par defaut a
NULL.</p>
</td></tr>
<tr><td><code id="plot__+3A_listfonds">listFonds</code></td>
<td>
<p>list d'objets sf. Liste de fonds de carte a ajouter.</p>
</td></tr>
<tr><td><code id="plot__+3A_iddata">idData</code></td>
<td>
<p>chaine de caracteres (character). Variable identifiant la
maille.</p>
</td></tr>
<tr><td><code id="plot__+3A_iddatadepart">idDataDepart</code></td>
<td>
<p>chaine de caracteres (character). Variable identifiant
le territoire de depart du flux.</p>
</td></tr>
<tr><td><code id="plot__+3A_iddataarrivee">idDataArrivee</code></td>
<td>
<p>chaine de caracteres (character). Variable identifiant
le territoire d'arrivee du flux.</p>
</td></tr>
<tr><td><code id="plot__+3A_varvolume">varVolume</code></td>
<td>
<p>chaine de caracteres (character). Variable en volume pour
des ronds proportionnels.</p>
</td></tr>
<tr><td><code id="plot__+3A_varratio">varRatio</code></td>
<td>
<p>chaine de caracteres (character). Variable en ratio pour des
analyses en classes.</p>
</td></tr>
<tr><td><code id="plot__+3A_vartypo">varTypo</code></td>
<td>
<p>chaine de caracteres (character). Variable de typologie.</p>
</td></tr>
<tr><td><code id="plot__+3A_varflux">varFlux</code></td>
<td>
<p>chaine de caracteres (character). Variable de flux pour des
oursins, fleches joignantes ou fleches saphirs.</p>
</td></tr>
<tr><td><code id="plot__+3A_rayonrond">rayonRond</code></td>
<td>
<p>valeur numerique (numeric). Rayon du rond le plus grand en
metres.</p>
</td></tr>
<tr><td><code id="plot__+3A_rapportrond">rapportRond</code></td>
<td>
<p>valeur numerique (numeric). Rapport entre l'aire du rond
le plus grand et la valeur maximale des donnees en volume.</p>
</td></tr>
<tr><td><code id="plot__+3A_methode">methode</code></td>
<td>
<p>chaine de caracteres (character). A choisir parmi &quot;kmeans&quot;
(par defaut), &quot;fisher&quot;, &quot;jenks&quot; ou &quot;quantile&quot;.</p>
</td></tr>
<tr><td><code id="plot__+3A_nbclasses">nbClasses</code></td>
<td>
<p>valeur numerique (numeric). Nombre de classes. Par defaut 3
classes.</p>
</td></tr>
<tr><td><code id="plot__+3A_bornes">bornes</code></td>
<td>
<p>vecteur de valeurs numeriques (numeric). Le nombre de bornes
correspond au nombre de classes -1. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="plot__+3A_precisionlegronds">precisionLegRonds</code></td>
<td>
<p>valeur numerique (numeric). Arrondit les valeurs de
la legende des ronds. 0 (par defaut) pour arrondir a l'unite, -1 pour
arrondir a la dizaine, -2 a la centaine...</p>
</td></tr>
<tr><td><code id="plot__+3A_precisionlegclasses">precisionLegClasses</code></td>
<td>
<p>valeur numerique (numeric). Arrondit les valeurs
en ratio pour le calcul des bornes de classes. Par defaut, 1 chiffre apres
la virgule.</p>
</td></tr>
<tr><td><code id="plot__+3A_precisionlegfleches">precisionLegFleches</code></td>
<td>
<p>valeur numerique (numeric). Arrondit les valeurs
de la legende des fleches. 0 (par defaut) pour arrondir a l'unite, -1 pour
arrondir a la dizaine, -2 a la centaine...</p>
</td></tr>
<tr><td><code id="plot__+3A_largeurflechemax">largeurFlecheMax</code></td>
<td>
<p>valeur numerique (numeric). Valeur relative
correspondant a la largeur de la fleche la plus grande de la carte. Par
defaut a NULL.</p>
</td></tr>
<tr><td><code id="plot__+3A_direction">direction</code></td>
<td>
<p>chaine de caracteres (character). Pour les fleches saphirs,
type de flux a choisir parmi &quot;Ent&quot; pour entrees (par defaut), &quot;Sor&quot; pour
sorties et &quot;Sol&quot; pour soldes (entrees - sorties).</p>
</td></tr>
<tr><td><code id="plot__+3A_filtrevol">filtreVol</code></td>
<td>
<p>valeur numerique (numeric). Filtre des valeurs en volume de
flux. Par defaut a 0 : affichage de tous les flux.</p>
</td></tr>
<tr><td><code id="plot__+3A_filtredist">filtreDist</code></td>
<td>
<p>valeur numerique (numeric). Filtre sur la distance des
fleches pour les oursins et les fleches joignantes. Par defaut a 100 km :
affichage des flux a moins de 100 km.</p>
</td></tr>
<tr><td><code id="plot__+3A_filtremajeurs">filtreMajeurs</code></td>
<td>
<p>valeur numerique (numeric). Filtre sur les flux
entrants et sortants les plus importants d'un territoire. Par defaut a 10 :
10 flux maximum sortent d'un territoire ou en entrent.</p>
</td></tr>
<tr><td><code id="plot__+3A_decalageallerretour">decalageAllerRetour</code></td>
<td>
<p>valeur numerique (numeric). Decalage entre les
fleches aller-retour (km).</p>
</td></tr>
<tr><td><code id="plot__+3A_decalagecentroid">decalageCentroid</code></td>
<td>
<p>valeur numerique (numeric). Decalage des fleches
depuis et vers les centroides des territoires (km).</p>
</td></tr>
<tr><td><code id="plot__+3A_emprise">emprise</code></td>
<td>
<p>chaine de caracteres (character). &quot;FRM&quot; (par defaut pour la
France metropolitaine), &quot;971&quot; (Guadeloupe), &quot;972&quot; (Martinique), &quot;973&quot;
(Guyane), &quot;974&quot; (La Reunion) ou &quot;976&quot; (Mayotte). Ce parametre permet de
definir le systeme de projection de la carte.</p>
</td></tr>
<tr><td><code id="plot__+3A_fondchx">fondChx</code></td>
<td>
<p>objet sf. Fond des chefs-lieux. Pour les ronds proportionnels
avec une maille communale uniquement, choix entre position du centre des
ronds sur les centroides des communes (NULL par defaut) ou sur les
chefs-lieux (chx) des communes.</p>
</td></tr>
<tr><td><code id="plot__+3A_types">types</code></td>
<td>
<p>vecteur de numeriques (numeric). Par defaut a NULL. Voir
details.</p>
</td></tr>
<tr><td><code id="plot__+3A_couleurs">couleurs</code></td>
<td>
<p>vecteur de caracteres (character). Par defaut a NULL. Voir
details.</p>
</td></tr>
<tr><td><code id="plot__+3A_tailles">tailles</code></td>
<td>
<p>vecteur de numeriques (numeric). Par defaut a NULL. Voir
details.</p>
</td></tr>
<tr><td><code id="plot__+3A_epaisseurs">epaisseurs</code></td>
<td>
<p>vecteur de numeriques (numeric). Par defaut a NULL. Voir
details.</p>
</td></tr>
<tr><td><code id="plot__+3A_titreleg">titreLeg</code></td>
<td>
<p>chaine de caracteres (character). Titre de la legende.</p>
</td></tr>
<tr><td><code id="plot__+3A_xleg">xLeg</code></td>
<td>
<p>valeur numerique (numeric). Coordonnees x de la legende dans le
systeme de projection locale. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="plot__+3A_yleg">yLeg</code></td>
<td>
<p>valeur numerique (numeric). Coordonnees y de la legende dans le
systeme de projection locale. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="plot__+3A_cadreleg">cadreLeg</code></td>
<td>
<p>booleen (logical). Affichage d'un cadre blanc autour de la legende.
Par defaut FALSE.</p>
</td></tr>
<tr><td><code id="plot__+3A_xlimcadreleg">xLimCadreLeg</code></td>
<td>
<p>vecteur numerique (numeric). Coordonnees xmin et xmax du cadre de
la legende. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="plot__+3A_ylimcadreleg">yLimCadreLeg</code></td>
<td>
<p>vecteur numerique (numeric). Coordonnees ymin et ymax du cadre de
la legende. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="plot__+3A_xlimcadrelegronds">xLimCadreLegRonds</code></td>
<td>
<p>vecteur numerique (numeric). Coordonnees xmin et xmax du cadre de
la legende des ronds. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="plot__+3A_ylimcadrelegronds">yLimCadreLegRonds</code></td>
<td>
<p>vecteur numerique (numeric). Coordonnees ymin et ymax du cadre de
la legende des ronds. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="plot__+3A_xlimcadrelegclasses">xLimCadreLegClasses</code></td>
<td>
<p>vecteur numerique (numeric). Coordonnees xmin et xmax du cadre de
la legende des classes. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="plot__+3A_ylimcadrelegclasses">yLimCadreLegClasses</code></td>
<td>
<p>vecteur numerique (numeric). Coordonnees ymin et ymax du cadre de
la legende des classes. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="plot__+3A_titrelegronds">titreLegRonds</code></td>
<td>
<p>chaine de caracteres (character). Titre de la legende
des ronds.</p>
</td></tr>
<tr><td><code id="plot__+3A_xlegronds">xLegRonds</code></td>
<td>
<p>valeur numerique (numeric). Coordonnees x de la legende des
ronds dans le systeme de projection locale. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="plot__+3A_ylegronds">yLegRonds</code></td>
<td>
<p>valeur numerique (numeric). Coordonnees y de la legende des
ronds dans le systeme de projection locale. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="plot__+3A_titrelegclasses">titreLegClasses</code></td>
<td>
<p>chaine de caracteres (character). Titre de la legende
des classes.</p>
</td></tr>
<tr><td><code id="plot__+3A_xlegclasses">xLegClasses</code></td>
<td>
<p>valeur numerique (numeric). Coordonnees x de la legende
des classes dans le systeme de projection locale. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="plot__+3A_ylegclasses">yLegClasses</code></td>
<td>
<p>valeur numerique (numeric). Coordonnees y de la legende
des classes dans le systeme de projection locale. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="plot__+3A_titrecarte">titreCarte</code></td>
<td>
<p>chaine de caracteres (character). Titre de la carte.</p>
</td></tr>
<tr><td><code id="plot__+3A_sourcecarte">sourceCarte</code></td>
<td>
<p>chaine de caracteres (character). Source de la carte.</p>
</td></tr>
<tr><td><code id="plot__+3A_etiquettes">etiquettes</code></td>
<td>
<p>vecteur de caracteres (character) ou tableau de donnees
(data.frame). Liste des codes de la maille dont on affiche le libelle sur la
carte. Par defaut a NULL. Voir details.</p>
</td></tr>
<tr><td><code id="plot__+3A_colpos">colPos</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee (par exemple
&quot;orange&quot;) ou hexadecimal (par exemple &quot;#FFA500&quot;). Par defaut &quot;#EB617F&quot;.</p>
</td></tr>
<tr><td><code id="plot__+3A_colneg">colNeg</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee (par exemple
&quot;blue&quot;) ou hexadecimal (par exemple &quot;#0000FF&quot;). Par defaut &quot;#286AC7&quot;.</p>
</td></tr>
<tr><td><code id="plot__+3A_stylepalette">stylePalette</code></td>
<td>
<p>chaine de caracteres (character). Palette de la charte
INSEE. A choisir entre &quot;defaut&quot;, &quot;Insee_Rouge&quot;, &quot;Insee_Jaune&quot;, &quot;Insee_Bleu&quot;,
&quot;Insee_Turquoise&quot;, &quot;Insee_Vert&quot;, &quot;Insee_Violet&quot; ou &quot;Insee_Gris&quot; 
(voir 'affiche_palette(nomPalette)').</p>
</td></tr>
<tr><td><code id="plot__+3A_palettepos">palettePos</code></td>
<td>
<p>vecteur de caracteres (character). Couleurs nommees (par
exemple c(&quot;red&quot;,&quot;orange&quot;,&quot;yellow&quot;)) ou hexadecimal (par exemple
c(&quot;#FFA500&quot;)). Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="plot__+3A_paletteneg">paletteNeg</code></td>
<td>
<p>vecteur de caracteres (character). Couleurs nommees (par
exemple c(&quot;purple&quot;,&quot;blue&quot;,&quot;green&quot;)) ou hexadecimal (par exemple
c(&quot;#800080&quot;,&quot;#0000FF&quot;,&quot;#008000&quot;)). Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="plot__+3A_palettetypo">paletteTypo</code></td>
<td>
<p>vecteur de caracteres (character). Couleurs nommees (par
exemple c(&quot;red&quot;,&quot;blue&quot;,&quot;green&quot;)) ou hexadecimal (par exemple
c(&quot;#FFA500&quot;,&quot;#0000FF&quot;,&quot;#008000&quot;)). Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="plot__+3A_labels">labels</code></td>
<td>
<p>vecteur de caracteres (character). Labels personnalises pour
la legende de la carte en typologie. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="plot__+3A_epaisseur">epaisseur</code></td>
<td>
<p>valeur numerique (numeric). Epaisseur des traits des
oursins. Par defaut 2.</p>
</td></tr>
<tr><td><code id="plot__+3A_colborder">colBorder</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee (par
exemple &quot;white&quot;) ou hexadecimal (par exemple &quot;#FFFFFF&quot;). Par defaut &quot;white&quot;.</p>
</td></tr>
<tr><td><code id="plot__+3A_coltrait">colTrait</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee (par
exemple &quot;black&quot;) ou hexadecimal (par exemple &quot;#000000&quot;). Par defaut &quot;black&quot;.</p>
</td></tr>
<tr><td><code id="plot__+3A_colbordermaille">colBorderMaille</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee (par
exemple &quot;grey&quot;) ou hexadecimal (par exemple &quot;#808080&quot;). Par defaut &quot;black&quot;.</p>
</td></tr>
<tr><td><code id="plot__+3A_colborderronds">colBorderRonds</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee (par
exemple &quot;grey&quot;) ou hexadecimal (par exemple &quot;#808080&quot;). Par defaut
&quot;#303030&quot;.</p>
</td></tr>
<tr><td><code id="plot__+3A_colfleche">colFleche</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee (par
exemple &quot;orange&quot;) ou hexadecimal (par exemple &quot;#FFA500&quot;). Par defaut
&quot;#286AC7&quot;.</p>
</td></tr>
<tr><td><code id="plot__+3A_colentree">colEntree</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee (par
exemple &quot;orange&quot;) ou hexadecimal (par exemple &quot;#FFA500&quot;). Par defaut
&quot;#EB617F&quot;.</p>
</td></tr>
<tr><td><code id="plot__+3A_colsortie">colSortie</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee (par
exemple &quot;blue&quot;) ou hexadecimal (par exemple &quot;#0000FF&quot;). Par defaut
&quot;#286AC7&quot;.</p>
</td></tr>
<tr><td><code id="plot__+3A_xlim">xlim</code></td>
<td>
<p>vecteur numerique (numeric). Coordonnees xmin et xmax de la
carte. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="plot__+3A_ylim">ylim</code></td>
<td>
<p>vecteur numerique (numeric). Coordonnees ymin et ymax de la
carte. Par defaut a NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Les cartes en sortie &quot;plot&quot; ne sont pas interactives. Il faut eviter de
zoomer sur la carte au risque de voir apparaitre des decalages entre les
couches.
</p>
<p>Elles peuvent etre personnalisees grace aux parametres de style des
fonctions plot_().
</p>
 <dl>
<dt>Ronds proportionnels</dt><dd><p> L'interieur des cercles est de
couleur orange (couleur par defaut) pour representer les valeurs positives
de la variable en volume et bleu pour les valeurs negatives.
</p>
<p>Le parametre <code>fondChx</code> est a renseigner UNIQUEMENT si la maille est
communale.
</p>
<p>Pour information, le chef-lieu (ou chx) est un point de la commune autour
duquel la population est la plus dense. Le plus souvent, il s'agit de
l'hotel de ville de la commune.  </p>
</dd>
<dt>Analyse en classes</dt><dd><p> En semiologie, il est deconseille de multiplier
le nombre de classes pour des raisons de visibilite et de clarte de la
carte.
</p>
<p>Si les donnees ne comprennnent que des valeurs positives ou que des valeurs
negatives, il est conseille 5 classes au maximum.
</p>
<p>Si les donnees comprennnent a la fois des valeurs positives et negatives, le
nombre maximum conseille est 9 classes.
</p>
<p>Il est possible de specifier manuellement les bornes des classes en
implementant le parametre <code>bornes</code> d'un vecteur de valeurs numeriques
de type c(bornes1,bornes2,...). Le nombre de bornes correspond au nombre de
classes -1 <code>(length(bornes)==nbClasses-1)</code>. Il n'est pas obligatoire de
specifier les valeurs min et max.  </p>
</dd>
<dt>Analyse en classes dans ronds proportionnels</dt><dd><p> L'analyse en classes
colore l'interieur des ronds : (fonction <code>plot_ronds_classes()</code>) </p>
</dd>
<dt>Ronds proportionnels sur analyse en classes</dt><dd><p> Les ronds proportionnels
sont poses sur l'analyse en classes : (fonction <code>plot_classes_ronds()</code>)
</p>
</dd>
<dt>Typologie</dt><dd><p> Meme conseil que pour les analyses en classes. Le choix
des couleurs ne doit pas etre un degrade si il n'existe pas de classement
dans les modalites.
</p>
<p>Il est possible de specifier ses propres labels sans avoir besoin de
modifier les noms de variables dans la table de donnees.  </p>
</dd>
<dt>Typologie en symboles</dt><dd><p> Les fonds de carte doivent etre passes en list
et peuvent etre personnalises (voir ci-dessous modifier l'apparence des
fonds).
</p>
<p>Les parametres types, couleurs, tailles et epaisseurs sont des vecteurs de
meme longueur. Chaque element correspond a un point du fond fourni. Verifier
bien l'ordre des points pour modifier leur apparence ensuite.
</p>
<p>Il existe differents types de points (voir l'aide de ?graphics::points).  </p>
</dd>
<dt>Oursins</dt><dd><p> Les oursins representent uniquement l'existence d'un flux
entre 2 territoires. Le sens du flux et le volume ne sont pas pris en
compte.
</p>
<p>Les filtres sur le volume, la distance et les flux majeurs sont
independants. Chacun d'eux s'appliquent sur les donnees initiales. Autrement
dit, le filtre sur les flux majeurs ne se fera pas apres un eventuel filtre
sur la distance mais sur toutes les donnees en entree.
</p>
<p>Le filtre sur le volume est plutot complementaire au filtre sur les flux
majeurs. En effet, il est possible de vouloir representer des faibles flux
significatifs. Le filtre sur les flux majeurs le permet contrairement au
filtre sur le volume seul.  </p>
</dd>
<dt>Fleches joignantes</dt><dd><p> Les fleches joignantes representent un flux entre
2 territoires, son sens et son volume. Dans le cas de flux aller et retour,
deux fleches de sens oppose sont superposees.
</p>
<p>La regle des filtres est la meme que pour les oursins.  </p>
</dd>
<dt>Fleches saphirs</dt><dd><p> Les fleches saphirs convergent vers ou divergent
d'un meme territoire. Elles permettent de representer les entrees, les
sorties ou le solde (entrees - sorties) d'un territoire par rapport aux
autres.
</p>
<p>Pour un solde positif, les fleches sont representees en orange, pour un
solde negatif en bleu.
</p>
<p>Une attention particuliere est a apporter au choix de la variable
idDataDepart et idDataArrivee selon si le flux est entrant, sortant ou en
solde.  </p>
</dd> </dl>

<p>La legende est positionnee par defaut sur la carte si les coordonnees x et y
ne sont pas specifiees. Elle est positionnee en haut a droite de la carte
sauf pour l'analyse en classes ou elle est positionnee en bas a droite.
</p>
<p>Les coordonnees x et y doivent etre dans le systeme de projection locale :
</p>
 <ul>
<li><p> France metropolitaine : Lambert 93 (code epsg 2154) </p>
</li>
<li>
<p>Guadeloupe : UTM 20 N (code epsg 32620) </p>
</li>
<li><p> Martinique : UTM 20 N (code
epsg 32620) </p>
</li>
<li><p> Guyane : UTM 22 N (code epsg 2972) </p>
</li>
<li><p> La Reunion : UTM
40 S (code epsg 2975) </p>
</li>
<li><p> Mayotte : UTM 38 S (code epsg 4471) </p>
</li></ul>

<p>Il est possible d'ajouter des fonds de carte pour l'habiller. Il y existe 2
parametres : <code>fondSousAnalyse</code> et <code>fondSurAnalyse</code>.
</p>
<p>Le parametre <code>fondSousAnalyse</code> permet d'ajouter des fonds en-dessous de
l'analyse et la parametre <code>fondSurAnalyse</code> au-dessus.
</p>
<p>Chacun de ces parametres est une liste d'objets sf. Par defaut, la couleur
de remplissage est transparente, la bordure est noire et l'epaisseur est de
1.
</p>
<p>Pour modifier l'apparence de ces fonds, il faut ajouter des colonnes dans
les objets sf correspondants :
</p>
 <ul>
<li><p> COL : un colonne COL pour modifier la couleur de
remplissage.  </p>
</li>
<li><p> BORDER : une colonne BORDER pour modifier la couleur de
la bordure.  </p>
</li>
<li><p> EPAISSEUR : une colonne EPAISSEUR pour modifier
l'epaisseur de la bordure.  </p>
</li></ul>

<p>Pour ajouter des colonnes un objet sf, il faut utiliser la fonction
<code>cbind</code>. Exemple : paysf &lt;- cbind(paysf, COL=&quot;grey&quot;, BORDER=&quot;#404040&quot;,
EPAISSEUR=2)
</p>
 <dl>
<dt>etiquettes</dt><dd><p> Des etiquettes peuvent etre affichees sur les
cartes en plot grace au parametre &quot;etiquettes&quot;. Comment proceder ?
</p>
<p>- Specifier un vecteur de codes des territoires a etiqueter appartenant a la
maille. La fonction recupere les libelles a afficher. Les etiquettes se
placent au centroide des territoires, reperes par leurs coordonnees x et y.
Une mise en forme des etiquettes par defaut est proposee.
</p>
<p>- Pour formater les etiquettes, il est utile de passer par la fonction
<code><a href="#topic+coordonnees_etiquettes">coordonnees_etiquettes</a></code>. A partir d'un fond de maille et d'un
vecteur de codes, un data.frame est produit en sortie de la fonction.
</p>
<p>Ce tableau contient le code du territoire, le libelle a afficher, les
coordonnees x et y du centroide du territoire (position des etiquettes X et
Y), la taille (TAILLE), le style (FONT) et la couleur de la police (COL). Le
style de police est un entier : 1 (normal), 2 (gras, par defaut), 3
(italique) et 4 (gras italique).
</p>
<p>Il est possible de modifier les valeurs du tableau pour changer le style
d'une ou plusieurs etiquettes.
</p>
<p>Il est egalement possible de modifier les coordonnees x et y pour deplacer
les etiquettes et ainsi eviter leur chevauchement.
</p>
<p>- Pour afficher la carte avec les etiquettes formatees, il faut passer ce
tableau dans le parametre &quot;etiquettes&quot; de la fonction plot.  </p>
</dd> </dl>

<p>Il est tout de meme possible de zoomer sur la carte en specifiant les
parametres xlim et ylim. Par defaut, la carte est centree sur le fond de
maille. Pour connaitre les limites par defaut, executer la fonction
<code>sf::st_bbox(fondMaille)</code>
</p>


<h3>Value</h3>

<p>Retourne un objet sf. Il s'agit du fond des ronds (ronds
proportionnels, classes dans ronds proportionnels, ronds sur analyse en
classes), de la maille (analyse en classes, typologie) ou des fleches
(oursins, fleches joignantes, fleches saphirs).
</p>
<p>Affiche dans le plot la carte demandee.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+zonage_a_facon">zonage_a_facon</a>,</code>
</p>
<p><code><a href="#topic+coordonnees_etiquettes">coordonnees_etiquettes</a>,</code>
</p>
<p><code><a href="#topic+rayon_ronds">rayon_ronds</a>, <a href="#topic+rapport_ronds">rapport_ronds</a>, <a href="#topic+largeur_fleche">largeur_fleche</a>,</code>
</p>
<p><code><a href="#topic+calcul_ratio">calcul_ratio</a>, <a href="#topic+calcul_tx_evol_global">calcul_tx_evol_global</a>,
<a href="#topic+calcul_tx_evol_ann_moy">calcul_tx_evol_ann_moy</a>, <a href="#topic+calcul_part_ens">calcul_part_ens</a>, <a href="#topic+calculette">calculette</a>,</code>
</p>
<p><code><a href="#topic+distrib_variable">distrib_variable</a>,</code>
</p>
<p><code><a href="#topic+recup_palette">recup_palette</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("donnees_monoloc")
data("depm")

# Ronds proportionnels sur une analyse en classes
fond_ronds &lt;- plot_classes_ronds(data = donnees_monoloc, fondMaille = depm,
idData = "COD_DEP", varVolume = "POP_2015", varRatio = "VAR_AN_MOY", nbClasses = 4,
titreLegRonds = "POP_2015", titreLegClasses = "VAR_AN_MOY",
xLegClasses = 1150000, yLegClasses = 6600000)

etiquettes &lt;- coordonnees_etiquettes(fondMaille = depm,
listeCode = c("06","13","31","33","44","67","69","59","75"))
etiquettes$LIBELLE &lt;- c("Nice","Marseille","Toulouse","Bordeaux","Nantes","Lille",
"Strasbourg","Lyon","Paris")
etiquettes[etiquettes$CODE=="75","TAILLE"] &lt;- 1.5

# Ronds proportionnels sur une analyse en classes
fond_ronds &lt;- plot_classes_ronds(data = donnees_monoloc, fondMaille = depm,
idData = "COD_DEP", varVolume = "POP_2015", varRatio = "VAR_AN_MOY", nbClasses = 4,
titreLegRonds = "POP_2015", titreLegClasses = "VAR_AN_MOY",
xLegClasses = 1150000, yLegClasses = 6600000,
etiquettes = etiquettes)

</code></pre>

<hr>
<h2 id='rapport_ronds'>Ratio between radius and value for 'leaflet' maps</h2><span id='topic+rapport_ronds'></span>

<h3>Description</h3>

<p>Returns the ratio between the area of the largest circle and the maximum
value of the volume data for 'leaflet' maps.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rapport_ronds(map)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rapport_ronds_+3A_map">map</code></td>
<td>
<p>objet leaflet.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Le rapport n'a pas d'unite. Il s'agit d'une valeur relative.
</p>
<p>Le calcul du rapport sert a comparer plusieurs cartes en ronds
proportionnels entre elles puisque la valeur du rapport est fonction du
volume a representer.
</p>
<p>La formule utilisee pour calculer le rapport est :
(pi*(rayonRond)^2)/max_var
</p>
<p>Il peut y avoir une legere difference entre la valeur du rapport passee en
parametre de la fonction <code>leaflet_ronds</code> et la valeur renvoyee par la
fonction <code>rapport_ronds</code>. Cette difference s'explique par l'arrondi de
pi a 6 chiffres apres la virgule.
</p>


<h3>Value</h3>

<p>Retourne un numerique.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+leaflet_ronds">leaflet_ronds</a>, <a href="#topic+leaflet_ronds_classes">leaflet_ronds_classes</a>,
<a href="#topic+leaflet_classes_ronds">leaflet_classes_ronds</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("donnees_monoloc")
data("depm")

# Ronds proportionnels
map &lt;- leaflet_ronds(data = donnees_monoloc, fondMaille = depm, idData = "COD_DEP",
					 varVolume = "POP_2015")

 map

rapport_ronds(map)
# [1] 1924095

# Ronds proportionnels
map &lt;- leaflet_ronds(data = donnees_monoloc, fondMaille = depm, idData = "COD_DEP",
varVolume = "POP_2015", rapportRond = 1900000)

 map

rapport_ronds(map)
# [1] 1900022

</code></pre>

<hr>
<h2 id='rayon_ronds'>Radius of the largest circle for 'leaflet' maps</h2><span id='topic+rayon_ronds'></span>

<h3>Description</h3>

<p>Returns the radius of the largest circle for 'leaflet' maps.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rayon_ronds(map)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rayon_ronds_+3A_map">map</code></td>
<td>
<p>objet leaflet.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>L'unite du rayon est le metre.
</p>
<p>A noter, que la taille du rayon est limitee afin d'eviter de trop masquer le
territoire d'etude en arriere-plan.
</p>
<p>En effet, la regle semiologique des 1/7eme s'applique a toutes les cartes
affichant des ronds proportionnels. Cette regle specifie que la somme des
aires des ronds ne doit pas depasser 1/7eme de l'aire du territoire d'etude.
</p>


<h3>Value</h3>

<p>Retourne un numerique.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+leaflet_ronds">leaflet_ronds</a>, <a href="#topic+leaflet_ronds_classes">leaflet_ronds_classes</a>,
<a href="#topic+leaflet_classes_ronds">leaflet_classes_ronds</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("donnees_monoloc")
data("depm")

# Ronds proportionnels
map &lt;- leaflet_ronds(data = donnees_monoloc, fondMaille = depm, idData = "COD_DEP",
					 varVolume = "POP_2015")

 map

rayon_ronds(map)
# [1] 39944.67

# Ronds proportionnels
map &lt;- leaflet_ronds(data = donnees_monoloc, fondMaille = depm, idData = "COD_DEP",
varVolume = "POP_2015", rayonRond = 30000)

 map

rayon_ronds(map)
# [1] 30000

</code></pre>

<hr>
<h2 id='recup_palette'>Returns a palette of the graphic chart of INSEE</h2><span id='topic+recup_palette'></span>

<h3>Description</h3>

<p>Returns a palette of the graphic chart of INSEE.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recup_palette(stylePalette, nbNeg = 0, nbPos = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="recup_palette_+3A_stylepalette">stylePalette</code></td>
<td>
<p>chaine de caracteres (character). A choisir parmi
&quot;defaut&quot;, &quot;Insee_Rouge&quot;, &quot;Insee_Jaune&quot;, &quot;Insee_Bleu&quot;, &quot;Insee_Turquoise&quot;,
&quot;Insee_Vert&quot;, &quot;Insee_Violet&quot;, &quot;Insee_Gris&quot;, &quot;Turquoise_Neg&quot;, &quot;Vert_Neg&quot;,
&quot;Violet_Neg&quot; ou &quot;Gris_Neg&quot;.</p>
</td></tr>
<tr><td><code id="recup_palette_+3A_nbneg">nbNeg</code></td>
<td>
<p>numeric. Nombre de classes negatives. De 0 (par défaut) à 6.</p>
</td></tr>
<tr><td><code id="recup_palette_+3A_nbpos">nbPos</code></td>
<td>
<p>numeric. Nombre de classes positives. De 0 (par défaut) à 6.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Les couleurs de palettes préfixées par &quot;Insee_&quot; sont celles de la charte graphique
INSEE. En exécutant la fonction affiche_palette(nomPalette), il est possible de visualiser
les couleurs de chaque palette disponible.
Les modalités pour l'argument 'nomPalette' sont &quot;Insee_Rouge&quot;, &quot;Insee_Jaune&quot;, Insee_Bleu&quot;,
&quot;Insee_Turquoise&quot;, &quot;Insee_Vert&quot;, &quot;Insee_Violet&quot; et &quot;Insee_Gris&quot; pour les palettes de la
charte graphique INSEE, &quot;defaut&quot;, &quot;Turquoise_Neg&quot;, &quot;Vert_Neg&quot;, &quot;Violet_Neg&quot; et &quot;Gris_Neg&quot;
pour les palettes hors charte.
</p>
<p>La palette &quot;defaut&quot; reprend les couleurs de la palette RdYlBu de ColorBrewer.
</p>
<p>Seules les palettes &quot;Insee_Rouge&quot; et &quot;Insee_Jaune&quot; proposent des palettes pour des valeurs
négatives et positives. Pour ces deux palettes, la palette &quot;Insee_Bleu&quot; est utilisée
pour représenter les valeurs négatives. Cette dernière peut également être utilisée seule 
pour des valeurs uniquement positives ou négatives.
</p>
<p>La fonction renvoie une liste d'un vecteur composé du nom de la palette au format
nomPalette_xN_yP et des valeurs hexadécimales de la palette.
</p>
<p>La liste des valeurs hexadécimales de toutes les palettes est disponible en
chargeant les données suivantes : data(&quot;palettes_insee&quot;).
</p>
<p>Il est obligatoire de spécifier un nombre de classes négatives ou positives supérieur à 0 et
jusqu'à 6 maximum.
Un message d'erreur apparaîtra si les choix du nombre de couleurs négatives et positives
ne sont pas adaptés à la palette spécifiée.
</p>


<h3>Value</h3>

<p>Retourne une liste d'un vecteur caracteres.
</p>


<h3>References</h3>

<p>Un convertisseur de couleurs pour visualiser une couleur a
partir de son nom, son code hexadecimal ou RGB :
http://www.proftnj.com/RGB3.htm
</p>
<p>ColorBrewer 2.0 :
https://colorbrewer2.org/#type=diverging&amp;scheme=RdYlBu&amp;n=10
</p>


<h3>See Also</h3>

<p><code><a href="#topic+set_couleur_classes">set_couleur_classes</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
recup_palette(stylePalette = "defaut", nbNeg = 3, nbPos = 3)

# $defaut_3N3P
# [1] "#003269" "#005289" "#95BAE2" "#E4A75A" "#D47130" "#B24B1D"

</code></pre>

<hr>
<h2 id='set_bordure_ronds'>Modify the circles' borders of 'leaflet' map's analysis</h2><span id='topic+set_bordure_ronds'></span>

<h3>Description</h3>

<p>Modify the circles' borders of 'leaflet' map's analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_bordure_ronds(map, colBorderPos = "white", colBorderNeg =
"white", epaisseurBorder = 1, map_leaflet = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_bordure_ronds_+3A_map">map</code></td>
<td>
<p>objet leaflet.</p>
</td></tr>
<tr><td><code id="set_bordure_ronds_+3A_colborderpos">colBorderPos</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee (par
exemple &quot;white&quot;) ou hexadecimal (par exemple &quot;#FFFFFF&quot;). Par defaut &quot;white&quot;.</p>
</td></tr>
<tr><td><code id="set_bordure_ronds_+3A_colborderneg">colBorderNeg</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee (par
exemple &quot;white&quot;) ou hexadecimal (par exemple &quot;#FFFFFF&quot;). Par defaut &quot;white&quot;.</p>
</td></tr>
<tr><td><code id="set_bordure_ronds_+3A_epaisseurborder">epaisseurBorder</code></td>
<td>
<p>chaine de caracteres (numeric). Epaisseur de la
bordure des ronds. Par defaut a 1&quot;.</p>
</td></tr>
<tr><td><code id="set_bordure_ronds_+3A_map_leaflet">map_leaflet</code></td>
<td>
<p>objet leaflet. Pour l'integration des fonctions leaflet
dans les applications shiny (cf vignette). Par defaut a NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Permet de modifier l'apparence des bordures des ronds, c'est-a-dire leur
couleur et leur epaisseur.
</p>
<p>Il est possible de distinguer les valeurs en volume positives des valeurs en
volume negatives.
</p>
<p>Applicable pour les analyses en ronds proportionnels, en classes dans les
ronds et en ronds sur les classes.
</p>


<h3>Value</h3>

<p>Retourne un objet de type leaflet.
</p>


<h3>References</h3>

<p>Un convertisseur de couleurs pour visualiser une couleur a
partir de son nom, son code hexadecimal ou RGB :
http://www.proftnj.com/RGB3.htm
</p>


<h3>See Also</h3>

<p><code><a href="#topic+recup_palette">recup_palette</a>,</code>
</p>
<p><code><a href="#topic+leaflet_ronds">leaflet_ronds</a>, <a href="#topic+leaflet_classes">leaflet_classes</a>,
<a href="#topic+leaflet_ronds_classes">leaflet_ronds_classes</a>, <a href="#topic+leaflet_classes_ronds">leaflet_classes_ronds</a>,
<a href="#topic+leaflet_typo">leaflet_typo</a>,</code>
</p>
<p><code><a href="#topic+leaflet_oursins">leaflet_oursins</a>, <a href="#topic+leaflet_joignantes">leaflet_joignantes</a>,
<a href="#topic+leaflet_saphirs">leaflet_saphirs</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("depm")

data("donnees_monoloc")

# Ronds proportionnels sur une analyse en classes
map &lt;- leaflet_ronds(data = donnees_monoloc, fondMaille = depm, idData = "COD_DEP",
varVolume = "POP_2015")
map &lt;- set_bordure_ronds(map = map, colBorderPos = "grey", epaisseurBorder = 3)

 map


</code></pre>

<hr>
<h2 id='set_couleur_'>Modify the colors of 'leaflet' map's analysis</h2><span id='topic+set_couleur_'></span><span id='topic+set_couleur_ronds'></span><span id='topic+set_couleur_classes'></span><span id='topic+set_couleur_typo'></span><span id='topic+set_couleur_joignantes'></span><span id='topic+set_couleur_saphirs'></span>

<h3>Description</h3>

<p>Modify the colors of 'leaflet' map's analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_couleur_ronds(map, colorPos = "#EB617F", colorNeg = "#286AC7",
map_leaflet = NULL)

set_couleur_classes(map, stylePalette = "defaut", palettePos = NULL,
paletteNeg = NULL, colBorder = "white", map_leaflet = NULL)

set_couleur_typo(map, paletteTypo = NULL, colBorder = "white", map_leaflet =
NULL)

set_couleur_joignantes(map, colFleche = "#286AC7", colBorder = "black",
map_leaflet = NULL)

set_couleur_saphirs(map, colEntree = "#EB617F", colSortie = "#286AC7",
colBorder = "black", map_leaflet = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_couleur__+3A_map">map</code></td>
<td>
<p>objet leaflet.</p>
</td></tr>
<tr><td><code id="set_couleur__+3A_colorpos">colorPos</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee ou
hexadecimal. Par defaut &quot;#EB617F&quot;.</p>
</td></tr>
<tr><td><code id="set_couleur__+3A_colorneg">colorNeg</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee ou
hexadecimal. Par defaut &quot;#286AC7&quot;.</p>
</td></tr>
<tr><td><code id="set_couleur__+3A_stylepalette">stylePalette</code></td>
<td>
<p>chaine de caracteres (character). A choisir parmi
&quot;defaut&quot;, &quot;Insee_Rouge&quot;, &quot;Insee_Jaune&quot;, &quot;Insee_Bleu&quot;, &quot;Insee_Turquoise&quot;,
&quot;Insee_Vert&quot;, &quot;Insee_Violet&quot; ou &quot;Insee_Gris&quot; (voir
'affiche_palette(nomPalette)').</p>
</td></tr>
<tr><td><code id="set_couleur__+3A_palettepos">palettePos</code></td>
<td>
<p>vecteur de caracteres (character). Specifier le vecteur de
couleurs (nommees ou hexadecimal) des valeurs positives (au choix). Par
defaut a NULL.</p>
</td></tr>
<tr><td><code id="set_couleur__+3A_paletteneg">paletteNeg</code></td>
<td>
<p>vecteur de caracteres (character). Specifier le vecteur de
couleurs (nommees ou hexadecimal) des valeurs negatives (au choix). Par
defaut a NULL.</p>
</td></tr>
<tr><td><code id="set_couleur__+3A_palettetypo">paletteTypo</code></td>
<td>
<p>vecteur de caracteres (character). Specifier le vecteur
de couleurs (nommees ou hexadecimal) de la typologie (au choix). Par defaut
a NULL.</p>
</td></tr>
<tr><td><code id="set_couleur__+3A_colborder">colBorder</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee (par
exemple &quot;white&quot;) ou hexadecimal (par exemple &quot;#FFFFFF&quot;). Par defaut &quot;white&quot;
pour classes et typo, &quot;black&quot; pour joignantes et saphirs.</p>
</td></tr>
<tr><td><code id="set_couleur__+3A_colfleche">colFleche</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee ou
hexadecimal. Par defaut &quot;#286AC7&quot;.</p>
</td></tr>
<tr><td><code id="set_couleur__+3A_colentree">colEntree</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee ou
hexadecimal. Par defaut &quot;#EB617F&quot;.</p>
</td></tr>
<tr><td><code id="set_couleur__+3A_colsortie">colSortie</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee ou
hexadecimal. Par defaut &quot;#286AC7&quot;.</p>
</td></tr>
<tr><td><code id="set_couleur__+3A_map_leaflet">map_leaflet</code></td>
<td>
<p>objet leaflet. Pour l'integration des fonctions leaflet
dans les applications shiny (cf vignette). Par defaut a NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Les palettes proposées pour l'analyse en classes sont celles
utilisées par la Charte Graphique INSEE. Utilisez la fonction
affiche_palette(nomPalette) pour visualiser les couleurs d'une palette.
L'argument 'nomPalette' peut prendre comme valeur : &quot;defaut&quot;, &quot;Insee_Rouge&quot;,
&quot;Insee_Jaune&quot;, &quot;Insee_Bleu&quot;, &quot;Insee_Turquoise&quot;, &quot;Insee_Vert&quot;, &quot;Insee_Violet&quot;
ou &quot;Insee_Gris&quot;.
</p>
<p>Le code des couleurs est le code hexadécimal. Pour récupérer les codes
hexadécimaux des différentes palettes proposées : data(&quot;palettes_insee&quot;)
</p>


<h3>Value</h3>

<p>Retourne un objet de type leaflet.
</p>


<h3>References</h3>

<p>Un convertisseur de couleurs pour visualiser une couleur a
partir de son nom, son code hexadecimal ou RGB :
http://www.proftnj.com/RGB3.htm
</p>


<h3>See Also</h3>

<p><code><a href="#topic+recup_palette">recup_palette</a>,</code>
</p>
<p><code><a href="#topic+leaflet_ronds">leaflet_ronds</a>, <a href="#topic+leaflet_classes">leaflet_classes</a>,
<a href="#topic+leaflet_ronds_classes">leaflet_ronds_classes</a>, <a href="#topic+leaflet_classes_ronds">leaflet_classes_ronds</a>,
<a href="#topic+leaflet_typo">leaflet_typo</a>,</code>
</p>
<p><code><a href="#topic+leaflet_oursins">leaflet_oursins</a>, <a href="#topic+leaflet_joignantes">leaflet_joignantes</a>,
<a href="#topic+leaflet_saphirs">leaflet_saphirs</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("depm")

data("donnees_monoloc")

# Ronds proportionnels
map &lt;- leaflet_ronds(data = donnees_monoloc, fondMaille = depm, idData = "COD_DEP",
varVolume = "POP_2015")
map &lt;- set_couleur_ronds(map = map, colorPos = "orange")

 map


# Ronds proportionnels sur une analyse en classes
map &lt;- leaflet_classes_ronds(data = donnees_monoloc, fondMaille = depm, idData = "COD_DEP",
varVolume = "POP_2015", varRatio = "VAR_AN_MOY", nbClasses = 4)
map &lt;- set_couleur_classes(map = map, stylePalette = "Insee_Rouge", colBorder = "black")

 map


data("donnees_biloc_saphirs")
data("regm")

# Fleches saphirs
map &lt;- leaflet_saphirs(data = donnees_biloc_saphirs, fondMaille = regm, typeMaille = "REG",
idDataDepart = "REG_DEPART", idDataArrivee = "REG_ARRIVEE",
varFlux = "MIGR", largeurFlecheMax = 500, direction = "Ent")
map &lt;- set_couleur_saphirs(map = map, colEntree = "#4BB375", colBorder = "grey")

 map


</code></pre>

<hr>
<h2 id='set_fonds_simples'>Modify the style of 'leaflet' map's.</h2><span id='topic+set_fonds_simples'></span>

<h3>Description</h3>

<p>Modify the style of 'leaflet' map's.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_fonds_simples(map, colRemplissageFonds = NULL, colBordureFonds =
NULL, transparenceFonds = NULL, epaisseurFonds = NULL, map_leaflet = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_fonds_simples_+3A_map">map</code></td>
<td>
<p>objet leaflet.</p>
</td></tr>
<tr><td><code id="set_fonds_simples_+3A_colremplissagefonds">colRemplissageFonds</code></td>
<td>
<p>vecteur de caracteres (character). Le vecteur
comporte des couleurs nommees (par exemple &quot;black&quot;) ou hexadecimal (par
exemple &quot;#000000&quot;). Colore l'interieur du fond. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="set_fonds_simples_+3A_colbordurefonds">colBordureFonds</code></td>
<td>
<p>vecteur de caracteres (character). Le vecteur
comporte des couleurs nommees (par exemple &quot;black&quot;) ou hexadecimal (par
exemple &quot;#000000&quot;). Colore la bordure du fond. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="set_fonds_simples_+3A_transparencefonds">transparenceFonds</code></td>
<td>
<p>valeur numerique (numeric). Le vecteur comporte les
valeurs numeriques pour la transparence (valeur comprise entre 0 -
transparent - et 1 - opaque). Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="set_fonds_simples_+3A_epaisseurfonds">epaisseurFonds</code></td>
<td>
<p>valeur numerique (numeric). Le vecteur comporte les
valeurs numeriques pour l'epaiseeur de la bordure des fonds. Par defaut a
NULL.</p>
</td></tr>
<tr><td><code id="set_fonds_simples_+3A_map_leaflet">map_leaflet</code></td>
<td>
<p>objet leaflet. Pour l'integration des fonctions leaflet
dans les applications shiny (cf vignette). Par defaut a NULL.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Retourne un objet leaflet.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+leaflet_fonds_simples">leaflet_fonds_simples</a></code>
</p>
<p><code><a href="#topic+leaflet_ronds">leaflet_ronds</a> <a href="#topic+leaflet_classes">leaflet_classes</a>
<a href="#topic+leaflet_ronds_classes">leaflet_ronds_classes</a> <a href="#topic+leaflet_classes_ronds">leaflet_classes_ronds</a></code>
</p>
<p><code><a href="#topic+leaflet_typo">leaflet_typo</a> <a href="#topic+leaflet_oursins">leaflet_oursins</a> <a href="#topic+leaflet_joignantes">leaflet_joignantes</a>
<a href="#topic+leaflet_saphirs">leaflet_saphirs</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("regm")
data("fram")

# Fonds simples
map &lt;- leaflet_fonds_simples(listFonds = list(fram, regm[regm$CODE == '93',]))
map &lt;- set_fonds_simples(map, colRemplissageFonds = c("white","grey"),
colBordureFonds = c("grey","black"), transparenceFonds = c(1,0.6), epaisseurFonds = c(1,3))

 map


</code></pre>

<hr>
<h2 id='set_opacite_elargi'>Modify the opacity of the expanded representation of a 'leaflet' map</h2><span id='topic+set_opacite_elargi'></span>

<h3>Description</h3>

<p>Modify the opacity of the expanded representation of a 'leaflet' map for
proportional circles and chroropleth.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_opacite_elargi(map, opacite = 0.6, map_leaflet = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_opacite_elargi_+3A_map">map</code></td>
<td>
<p>objet leaflet.</p>
</td></tr>
<tr><td><code id="set_opacite_elargi_+3A_opacite">opacite</code></td>
<td>
<p>valeur numerique (numeric). Chiffre entre 0 (transparent) et
1 (opaque). Par defaut a 0.6 (60 pour cent d'opacite ou 40 pour cent de
transparence).</p>
</td></tr>
<tr><td><code id="set_opacite_elargi_+3A_map_leaflet">map_leaflet</code></td>
<td>
<p>objet leaflet. Pour l'integration des fonctions leaflet
dans les applications shiny (cf vignette). Par defaut a NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Seule la representation elargie est concernee par la modification de
l'opacite. La representation principale reste 100 pour cent opaque.
</p>


<h3>Value</h3>

<p>Retourne un objet leaflet.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+leaflet_ronds">leaflet_ronds</a>, <a href="#topic+leaflet_classes">leaflet_classes</a>,
<a href="#topic+leaflet_ronds_classes">leaflet_ronds_classes</a>, <a href="#topic+leaflet_classes_ronds">leaflet_classes_ronds</a>,
<a href="#topic+leaflet_typo">leaflet_typo</a>,</code>
</p>
<p><code><a href="#topic+leaflet_oursins">leaflet_oursins</a>, <a href="#topic+leaflet_joignantes">leaflet_joignantes</a>,
<a href="#topic+leaflet_saphirs">leaflet_saphirs</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("donnees_monoloc")
data("depm")

# Ronds proportionnels
map &lt;- leaflet_ronds(data = donnees_monoloc, fondMaille = depm[depm$REG=="93",],
fondMailleElargi = depm, fondSuppl = depm, idData = "COD_DEP",
varVolume = "POP_2015")
map &lt;- set_opacite_elargi(map = map, opacite = 0.8)

 map


</code></pre>

<hr>
<h2 id='set_pop_up'>Modify the pop_up of 'leaflet' map's analysis</h2><span id='topic+set_pop_up'></span>

<h3>Description</h3>

<p>Modify the pop_up of 'leaflet' map's analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_pop_up(map, popup = NULL, popupRonds = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_pop_up_+3A_map">map</code></td>
<td>
<p>objet leaflet.</p>
</td></tr>
<tr><td><code id="set_pop_up_+3A_popup">popup</code></td>
<td>
<p>vecteur de caracteres (character). Peut etre du HTML pour
mettre en forme le texte. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="set_pop_up_+3A_popupronds">popupRonds</code></td>
<td>
<p>vecteur de caracteres (character). Peut etre du HTML pour
mettre en forme le texte. Par defaut a NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Le nouveau texte pour le pop-up peut etre du contenu HTML.  Par exemple :
&quot;&lt;b&gt; &lt;font color=#2B3E50&gt;Greater City of Paris&lt;/font&gt; &lt;/b&gt;&lt;br&gt;&lt;b&gt;&lt;font
color=#2B3E50&gt;PART : &lt;/font&gt;&lt;/b&gt;&lt;b&gt; &lt;font color=#2B3E50&gt;21,2&lt;/font&gt;&lt;/b&gt;&quot;
Attention : conserver le meme ordre des pop-up dans le vecteur que celui des
donnees pour que les valeurs correspondent bien a l'analyse.
</p>
<p>Ne fonctionne que pour les ronds proportionnels, les analyses en classes et les typologies.
</p>
<p>Pour supprimer les pop-up, laisser le parametre a NULL.
</p>


<h3>Value</h3>

<p>Retourne un objet de type leaflet.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+leaflet_ronds">leaflet_ronds</a>, <a href="#topic+leaflet_classes">leaflet_classes</a>,
<a href="#topic+leaflet_ronds_classes">leaflet_ronds_classes</a>, <a href="#topic+leaflet_classes_ronds">leaflet_classes_ronds</a>,
<a href="#topic+leaflet_typo">leaflet_typo</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("depm")

data("donnees_monoloc")

# Ronds proportionnels sur une analyse en classes
map &lt;- leaflet_ronds_classes(data = donnees_monoloc[donnees_monoloc$REG=="93",],
fondMaille = depm[depm$REG=="93",], idData = "COD_DEP", varVolume = "POP_2015",
varRatio = "VAR_AN_MOY", nbClasses = 4)

new_popup &lt;- c(paste0("&lt;b&gt;&lt;font color=#2B3E50&gt;Bouches-du-Rhone&lt;/font&gt;&lt;/b&gt;&lt;br&gt;",
"&lt;font color=#2B3E50&gt;Population 2015 : &lt;/font&gt;&lt;font color=#2B3E50&gt;2 016,6&lt;/font&gt;&lt;br&gt;",
"&lt;font color=#2B3E50&gt;Variation annuelle moyenne : &lt;/font&gt;&lt;font color=#2B3E50&gt;0,4&lt;/font&gt;"),
paste0("&lt;b&gt;&lt;font color=#2B3E50&gt;Alpes-Maritimes&lt;/font&gt;&lt;/b&gt;&lt;br&gt;",
"&lt;font color=#2B3E50&gt;Population 2015 : &lt;/font&gt;&lt;font color=#2B3E50&gt;1 082,4&lt;/font&gt;&lt;br&gt;",
"&lt;font color=#2B3E50&gt;Variation annuelle moyenne : &lt;/font&gt;&lt;font color=#2B3E50&gt;0,1&lt;/font&gt;"),
paste0("&lt;b&gt;&lt;font color=#2B3E50&gt;Var&lt;/font&gt;&lt;/b&gt;&lt;br&gt;",
"&lt;font color=#2B3E50&gt;Population 2015 : &lt;/font&gt;&lt;font color=#2B3E50&gt;1 048,7&lt;/font&gt;&lt;br&gt;",
"&lt;font color=#2B3E50&gt;Variation annuelle moyenne : &lt;/font&gt;&lt;font color=#2B3E50&gt;0,8&lt;/font&gt;"),
paste0("&lt;b&gt;&lt;font color=#2B3E50&gt;Vaucluse&lt;/font&gt;&lt;/b&gt;&lt;br&gt;",
"&lt;font color=#2B3E50&gt;Population 2015 : &lt;/font&gt;&lt;font color=#2B3E50&gt;  557,5&lt;/font&gt;&lt;br&gt;",
"&lt;font color=#2B3E50&gt;Variation annuelle moyenne : &lt;/font&gt;&lt;font color=#2B3E50&gt;0,6&lt;/font&gt;"),
paste0("&lt;b&gt;&lt;font color=#2B3E50&gt;Alpes-de-Haute-Provence&lt;/font&gt;&lt;/b&gt;&lt;br&gt;",
"&lt;font color=#2B3E50&gt;Population 2015 : &lt;/font&gt;&lt;font color=#2B3E50&gt;  161,8&lt;/font&gt;&lt;br&gt;",
"&lt;font color=#2B3E50&gt;Variation annuelle moyenne : &lt;/font&gt;&lt;font color=#2B3E50&gt;0,2&lt;/font&gt;"),
paste0("&lt;b&gt;&lt;font color=#2B3E50&gt;Hautes-Alpes&lt;/font&gt;&lt;/b&gt;&lt;br&gt;",
"&lt;font color=#2B3E50&gt;Population 2015 : &lt;/font&gt;&lt;font color=#2B3E50&gt;  140,9&lt;/font&gt;&lt;br&gt;",
"&lt;font color=#2B3E50&gt;Variation annuelle moyenne : &lt;/font&gt;&lt;font color=#2B3E50&gt;0,6&lt;/font&gt;"))

map &lt;- set_pop_up(map = map, popupRonds = new_popup)

 map


</code></pre>

<hr>
<h2 id='set_style_oursins'>Modify the style of 'leaflet' map's urchins</h2><span id='topic+set_style_oursins'></span>

<h3>Description</h3>

<p>Modify the style of 'leaflet' map's urchins.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_style_oursins(map, epaisseur = 2, colTrait = "black", map_leaflet
= NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_style_oursins_+3A_map">map</code></td>
<td>
<p>objet leaflet.</p>
</td></tr>
<tr><td><code id="set_style_oursins_+3A_epaisseur">epaisseur</code></td>
<td>
<p>valeur numerique (numeric). Par defaut a 2.</p>
</td></tr>
<tr><td><code id="set_style_oursins_+3A_coltrait">colTrait</code></td>
<td>
<p>chaine de caracteres (character). Couleur nommee (par
exemple &quot;black&quot;) ou hexadecimal (par exemple &quot;#000000&quot;). Par defaut &quot;black&quot;.</p>
</td></tr>
<tr><td><code id="set_style_oursins_+3A_map_leaflet">map_leaflet</code></td>
<td>
<p>objet leaflet. Pour l'integration des fonctions leaflet
dans les applications shiny (cf vignette). Par defaut a NULL.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Retourne un objet leaflet.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+leaflet_fonds_simples">leaflet_fonds_simples</a></code>
</p>
<p><code><a href="#topic+leaflet_ronds">leaflet_ronds</a> <a href="#topic+leaflet_classes">leaflet_classes</a>
<a href="#topic+leaflet_ronds_classes">leaflet_ronds_classes</a> <a href="#topic+leaflet_classes_ronds">leaflet_classes_ronds</a></code>
</p>
<p><code><a href="#topic+leaflet_typo">leaflet_typo</a> <a href="#topic+leaflet_oursins">leaflet_oursins</a> <a href="#topic+leaflet_joignantes">leaflet_joignantes</a>
<a href="#topic+leaflet_saphirs">leaflet_saphirs</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("donnees_biloc")
data("regm")

# Oursins
map &lt;- leaflet_oursins(data = donnees_biloc, fondMaille = regm, idDataDepart = "REG_DEPART",
idDataArrivee = "REG_ARRIVEE", varFlux = "MIGR", filtreDist = 1000,
filtreMajeurs = 3)
map &lt;- set_style_oursins(map = map, epaisseur = 3, colTrait = "grey")

 map


</code></pre>

<hr>
<h2 id='shiny_'>Creation 'leaflet' maps in a 'shiny' web environment</h2><span id='topic+shiny_'></span><span id='topic+shiny_ronds'></span><span id='topic+shiny_classes'></span><span id='topic+shiny_ronds_classes'></span><span id='topic+shiny_classes_ronds'></span><span id='topic+shiny_typo'></span><span id='topic+shiny_oursins'></span><span id='topic+shiny_joignantes'></span><span id='topic+shiny_saphirs'></span>

<h3>Description</h3>

<p>Creation 'leaflet' maps in a 'shiny' web environment where the parameters
are modifiable on the fly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shiny_ronds(data, fondMaille, fondMailleElargi = NULL, fondContour,
fondSuppl = NULL, idData, varVolume, emprise = "FRM", fondEtranger = NULL,
fondChx = NULL)

shiny_classes(data, fondMaille, fondMailleElargi = NULL, fondContour,
fondSuppl = NULL, idData, varRatio, emprise = "FRM", fondEtranger = NULL)

shiny_ronds_classes(data, fondMaille, fondMailleElargi = NULL, fondContour,
fondSuppl = NULL, idData, varVolume, varRatio, emprise = "FRM", fondEtranger
= NULL, fondChx = NULL)

shiny_classes_ronds(data, fondMaille, fondMailleElargi = NULL, fondContour,
fondSuppl = NULL, idData, varVolume, varRatio, emprise = "FRM", fondEtranger
= NULL, fondChx = NULL)

shiny_typo(data, fondMaille, fondContour, fondSuppl = NULL, idData, varTypo,
emprise = "FRM", fondEtranger = NULL)

shiny_oursins(data, fondMaille, fondContour, fondSuppl = NULL, idDataDepart,
idDataArrivee, varFlux, decalageAllerRetour = 0, decalageCentroid = 0,
emprise = "FRM", fondEtranger = NULL)

shiny_joignantes(data, fondMaille, typeMaille, fondContour, fondSuppl =
NULL, idDataDepart, idDataArrivee, varFlux, decalageAllerRetour = 0,
decalageCentroid = 0, emprise = "FRM", fondEtranger = NULL)

shiny_saphirs(data, fondMaille, typeMaille, fondContour, fondSuppl = NULL,
idDataDepart, idDataArrivee, varFlux, direction = "Ent", emprise = "FRM",
fondEtranger = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="shiny__+3A_data">data</code></td>
<td>
<p>tableau de donnees (data.frame).</p>
</td></tr>
<tr><td><code id="shiny__+3A_fondmaille">fondMaille</code></td>
<td>
<p>objet sf. Fond de carte.</p>
</td></tr>
<tr><td><code id="shiny__+3A_typemaille">typeMaille</code></td>
<td>
<p>chaine de caracteres (character). Type de maille issu d'un
zonage administratif ou d'etudes (&quot;REG&quot;, &quot;DEP&quot;, &quot;UU&quot;, &quot;AU&quot;, &quot;ZE&quot;, &quot;BV&quot;,
&quot;EPCI&quot; ou &quot;COM&quot;).</p>
</td></tr>
<tr><td><code id="shiny__+3A_fondmailleelargi">fondMailleElargi</code></td>
<td>
<p>objet sf. Fond de carte. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="shiny__+3A_fondcontour">fondContour</code></td>
<td>
<p>objet sf. Fond de carte.</p>
</td></tr>
<tr><td><code id="shiny__+3A_fondsuppl">fondSuppl</code></td>
<td>
<p>objet sf. Fond de carte. Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="shiny__+3A_iddata">idData</code></td>
<td>
<p>chaine de caracteres (character). Variable identifiant la
maille.</p>
</td></tr>
<tr><td><code id="shiny__+3A_iddatadepart">idDataDepart</code></td>
<td>
<p>chaine de caracteres (character). Variable identifiant
le depart du flux.</p>
</td></tr>
<tr><td><code id="shiny__+3A_iddataarrivee">idDataArrivee</code></td>
<td>
<p>chaine de caracteres (character). Variable identifiant
l'arrivee du flux.</p>
</td></tr>
<tr><td><code id="shiny__+3A_varvolume">varVolume</code></td>
<td>
<p>chaine de caracteres (character). Variable en volume pour
les ronds proportionnels.</p>
</td></tr>
<tr><td><code id="shiny__+3A_varratio">varRatio</code></td>
<td>
<p>chaine de caracteres (character). Variable en ratio pour
l'analyse en classes.</p>
</td></tr>
<tr><td><code id="shiny__+3A_vartypo">varTypo</code></td>
<td>
<p>chaine de caracteres (character). Variable de typologie.</p>
</td></tr>
<tr><td><code id="shiny__+3A_varflux">varFlux</code></td>
<td>
<p>chaine de caracteres (character). Variable de flux pour les
oursins, fleches joignantes ou fleches saphirs.</p>
</td></tr>
<tr><td><code id="shiny__+3A_direction">direction</code></td>
<td>
<p>chaine de caracteres (character). Type de flux. A choisir
parmi &quot;Ent&quot; pour entrees (par defaut), &quot;Sor&quot; pour sorties et &quot;Sol&quot; pour
soldes (entrees - sorties).</p>
</td></tr>
<tr><td><code id="shiny__+3A_decalageallerretour">decalageAllerRetour</code></td>
<td>
<p>valeur numerique (numeric). Decalage entre les
fleches aller-retour (km).</p>
</td></tr>
<tr><td><code id="shiny__+3A_decalagecentroid">decalageCentroid</code></td>
<td>
<p>valeur numerique (numeric). Decalage des fleches
depuis et vers les centroides des territoires (km).</p>
</td></tr>
<tr><td><code id="shiny__+3A_emprise">emprise</code></td>
<td>
<p>chaine de caracteres (character). &quot;FRM&quot; (par defaut pour la
France metropolitaine), &quot;971&quot; (Guadeloupe), &quot;972&quot; (Martinique), &quot;973&quot;
(Guyane), &quot;974&quot; (La Reunion), &quot;976&quot; (Mayotte) ou &quot;999&quot; (Etranger). Ce
parametre permet de definir le systeme de projection de la carte.</p>
</td></tr>
<tr><td><code id="shiny__+3A_fondetranger">fondEtranger</code></td>
<td>
<p>objet sf. Fond de carte d'habillage personnalisable pour
les fonds autres que la France (metropolitaine et DOM). Par defaut a NULL.</p>
</td></tr>
<tr><td><code id="shiny__+3A_fondchx">fondChx</code></td>
<td>
<p>objet sf. Fond des chefs-lieux. Pour les ronds proportionnels
avec une maille communale uniquement, choix entre position du centre des
ronds sur les centroides des communes (NULL par defaut) ou sur les
chefs-lieux (chx) des communes.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Les cartes sont externalisees de l'environnement R contrairement aux cartes
plot et leaflet. Elles s'affichent dans le navigateur.
</p>
<p>Les cartes produites possedent les memes avantages que les cartes leaflet
(deplacement de la carte, zoom/dezoom, pop-up d'informations, placement
libre de la legende).
</p>
<p>L'environnement R-Shiny propose en plus la possibilite de modifier a la
volee les parametres de la carte (ordre des fonds, ajout de fonds,
representation elargie, taille et rapport des ronds, methode des classes,
nombre de classes, bornes, filtre de flux, legende).
</p>
<p>Les cartes peuvent etre exportees en projet Qgis via un bouton de
l'interface R-Shiny. La fonctionnalite cree un .zip a dezipper au meme
emplacement.
</p>
<p>L'apparence des cartes (choix de la palette et des couleurs, etiquettes)
n'est cependant pas modifiable. Le but des fonctions shiny est de proposer
des cartes realisables et modifiables rapidement avec un minimum de
parametrage. En effet, une mise en forme specifique pourra s'effecuer dans
Qgis pour la diffusion par exemple.
</p>
<p>Il est obligatoire de renseigner le contour du territoire d'études dans le
paramètre <code>fondContour</code>.
</p>
<p>Il est possible de remplacer le fond d'habillage par defaut (France
metropolitaine ou DOM) par un autre fond. Pour cela, il faut specifier le
parametre emprise=&quot;999&quot; ET ajouter un fond sf dans le parametre
fondEtranger, par exemple, une carte de l'Europe ou d'un pays particulier.
Le systeme de coordonnees du fond doit etre projete (en unite de longueur)
et non geographique (lng/lat).  Si aucun code EPSG valide n'est trouve pour
ce fond, le code EPSG 3395 est choisi (projection Mercator). Attention car
la legende des ronds sera d'autant plus deformee qu'elle se situera loin de
l'equateur.
</p>
 <dl>
<dt>Ronds proportionnels</dt><dd><p> L'interieur des cercles est de
couleur orange (couleur par defaut) pour representer les valeurs positives
de la variable en volume et bleu pour les valeurs negatives.
</p>
<p>Le parametre <code>fondChx</code> est a renseigner UNIQUEMENT si la maille est
communale.
</p>
<p>Pour information, le chef-lieu (ou chx) est un point de la commune autour
duquel la population est la plus dense. Le plus souvent, il s'agit de
l'hotel de ville de la commune.  </p>
</dd>
<dt>Analyse en classes</dt><dd><p> En semiologie, il est deconseille de multiplier
le nombre de classes pour des raisons de visibilite et de clarte de la
carte.
</p>
<p>Si les donnees ne comprennnent que des valeurs positives ou que des valeurs
negatives, il est conseille 5 classes au maximum.
</p>
<p>Si les donnees comprennnent a la fois des valeurs positives et negatives, le
nombre maximum conseille est 9 classes.  </p>
</dd>
<dt>Analyse en classes dans ronds proportionnels</dt><dd><p> L'analyse en classes
colore l'interieur des ronds (fonction <code>shiny_ronds_classes()</code>) </p>
</dd>
<dt>Ronds proportionnels sur analyse en classes</dt><dd><p> Les ronds proportionnels
sont poses sur l'analyse en classes (fonction <code>shiny_classes_ronds()</code>)
</p>
</dd>
<dt>Typologie</dt><dd><p> Meme conseil que pour les analyses en classes. Le choix
des couleurs ne doit pas etre un degrade si il n'existe pas de classement
dans les modalites.  </p>
</dd>
<dt>Oursins</dt><dd><p> Les oursins representent uniquement l'existence d'un flux
entre 2 territoires. Le sens du flux et le volume ne sont pas pris en
compte.
</p>
<p>Les filtres sur le volume, la distance et les flux majeurs sont
independants. Chacun d'eux s'appliquent sur les donnees initiales. Autrement
dit, le filtre sur les flux majeurs ne se fera pas apres un eventuel filtre
sur la distance mais sur toutes les donnees en entree.
</p>
<p>Le filtre sur le volume est plutot complementaire au filtre sur les flux
majeurs. En effet, il est possible de vouloir representer des faibles flux
significatifs. Le filtre sur les flux majeurs le permet contrairement au
filtre sur le volume seul.  </p>
</dd>
<dt>Fleches joignantes</dt><dd><p> Les fleches joignantes representent un flux entre
2 territoires, son sens et son volume. Dans le cas de flux aller et retour,
deux fleches de sens oppose sont superposees.
</p>
<p>La regle des filtres est la meme que pour les oursins.  </p>
</dd>
<dt>Fleches saphirs</dt><dd><p> Les fleches saphirs convergent vers ou divergent
d'un meme territoire. Elles permettent de representer les entrees, les
sorties ou le solde (entrees - sorties) d'un territoire par rapport aux
autres.
</p>
<p>Pour un solde positif, les fleches sont representees en orange, pour un
solde negatif en bleu.
</p>
<p>Une attention particuliere est a apporter au choix de la variable
idDataDepart et idDataArrivee selon si le flux est entrant, sortant ou en
solde.  </p>
</dd> </dl>



<h3>Value</h3>

<p>Ne retourne aucun objet.
</p>
<p>Ouvre une fenetre avec un environnement R-Shiny dans le navigateur.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+leaflet_ronds">leaflet_ronds</a>, <a href="#topic+leaflet_classes">leaflet_classes</a>,
<a href="#topic+leaflet_ronds_classes">leaflet_ronds_classes</a>, <a href="#topic+leaflet_classes_ronds">leaflet_classes_ronds</a>,
<a href="#topic+leaflet_typo">leaflet_typo</a>,</code>
</p>
<p><code><a href="#topic+leaflet_oursins">leaflet_oursins</a>, <a href="#topic+leaflet_joignantes">leaflet_joignantes</a>,
<a href="#topic+leaflet_saphirs">leaflet_saphirs</a>,</code>
</p>
<p><code><a href="#topic+export_qgis_ronds">export_qgis_ronds</a>, <a href="#topic+export_qgis_classes">export_qgis_classes</a>,
<a href="#topic+export_qgis_ronds_classes">export_qgis_ronds_classes</a>, <a href="#topic+export_qgis_classes_ronds">export_qgis_classes_ronds</a>,</code>
</p>
<p><code><a href="#topic+export_qgis_typo">export_qgis_typo</a>,</code>
</p>
<p><code><a href="#topic+export_qgis_oursins">export_qgis_oursins</a>, <a href="#topic+export_qgis_joignantes">export_qgis_joignantes</a>,
<a href="#topic+export_qgis_saphirs">export_qgis_saphirs</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

data("depm")
data("regm")
data("fram")

data("donnees_monoloc")

if(interactive()){
# Ronds proportionnels
shiny_ronds(data = donnees_monoloc, fondMaille = depm, fondContour = fram,
idData = "COD_DEP", varVolume = "POP_2015")

# Analyse en classes
shiny_classes(data = donnees_monoloc, fondMaille = depm, fondContour = fram,
idData = "COD_DEP", varRatio = "VAR_AN_MOY")

# Analyse en classes dans les ronds proportionnels
shiny_ronds_classes(data = donnees_monoloc, fondMaille = depm, fondContour = fram,
idData = "COD_DEP", varVolume = "POP_2015", varRatio = "VAR_AN_MOY")

# Ronds proportionnels sur une analyse en classes
shiny_classes_ronds(data = donnees_monoloc, fondMaille = depm, fondContour = fram,
idData = "COD_DEP", varVolume = "POP_2015", varRatio = "VAR_AN_MOY")

 # Typologie
shiny_typo(data = donnees_monoloc, fondMaille = depm, fondContour = fram,
idData = "COD_DEP", varTypo = "REG")
}

data("donnees_biloc")

if(interactive()){
# Oursins
shiny_oursins(data = donnees_biloc, fondMaille = regm, fondContour = fram,
idDataDepart = "REG_DEPART", idDataArrivee = "REG_ARRIVEE", varFlux = "MIGR")

# Fleches joignantes
shiny_joignantes(data = donnees_biloc, fondMaille = regm, typeMaille = "REG",
fondContour = fram, idDataDepart = "REG_DEPART",
idDataArrivee = "REG_ARRIVEE", varFlux = "MIGR")
}

data("donnees_biloc_saphirs")

if(interactive()){
# Fleches saphirs
shiny_saphirs(data = donnees_biloc_saphirs, fondMaille = regm, typeMaille = "REG",
fondContour = fram, idDataDepart = "REG_DEPART", idDataArrivee = "REG_ARRIVEE",
varFlux = "MIGR", direction = "Ent")
}

</code></pre>

<hr>
<h2 id='zonage_a_facon'>Creating a custom zoning</h2><span id='topic+zonage_a_facon'></span>

<h3>Description</h3>

<p>Creating a custom zoning from a group of entities.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>zonage_a_facon(fondMaille, groupe, idMaille, idGroupe, libGroupe,
fondContour = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="zonage_a_facon_+3A_fondmaille">fondMaille</code></td>
<td>
<p>objet sf. Fond de carte.</p>
</td></tr>
<tr><td><code id="zonage_a_facon_+3A_groupe">groupe</code></td>
<td>
<p>tableau de donnees (data.frame) contenant un identifiant de
maille, un identifiant de groupes et un libelle de groupes.</p>
</td></tr>
<tr><td><code id="zonage_a_facon_+3A_idmaille">idMaille</code></td>
<td>
<p>chaine de caractere (character). Variable identifiant la
maille.</p>
</td></tr>
<tr><td><code id="zonage_a_facon_+3A_idgroupe">idGroupe</code></td>
<td>
<p>chaine de caractere (character). Variable identifiant les
groupes. Le choix de l'identifiant de groupes est libre (&quot;A&quot;, &quot;B&quot; et &quot;C&quot; par
exemple).</p>
</td></tr>
<tr><td><code id="zonage_a_facon_+3A_libgroupe">libGroupe</code></td>
<td>
<p>chaine de caractere (character). Variable des libelles de
groupes.</p>
</td></tr>
<tr><td><code id="zonage_a_facon_+3A_fondcontour">fondContour</code></td>
<td>
<p>objet sf. Fond de carte. Par defaut a NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>La fonction <code>zonage_a_facon</code> permet de creer son propre zonage.
</p>
<p>A partir d'un fond de maille, la fonction va regrouper certaines entites
pour en former des plus grandes. Par exemple, partir d'une maille communale
pour former une maille de zones d'emploi (voir examples).
</p>
<p>Il faut s'assurer que l'identifiant de maille de la table corresponde bien a
l'identifiant du fond de maille.
</p>
<p>Le zonage ainsi genere peut correspondre a un zonage connu (administratif ou
d'etudes) ou inconnu (personnalise).
</p>
<p>La fonction peut prendre en parametre un contour de territoire. Il s'agit du
contour qui delimite l'ensemble de la maille. Il peut etre utile de le
specifier si vous voulez tronquer la maille sur ce contour. Par exemple,
pour representer uniquement la partie regionale des zones d'emploi.
</p>


<h3>Value</h3>

<p>Retourne un objet de type <code>sf</code> (fond de carte)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("donnees_a_facon")
data("com_dep_13_30_83_84")
data("depm")

ze13etplus &lt;- zonage_a_facon(fondMaille = com_dep_13_30_83_84, groupe = donnees_a_facon,
idMaille = "DEPCOM", idGroupe = "ZE2010", libGroupe = "LIB_ZE2010",
fondContour = NULL) # sans contour
ze13 &lt;- zonage_a_facon(fondMaille = com_dep_13_30_83_84, groupe = donnees_a_facon,
idMaille = "DEPCOM", idGroupe = "ZE2010", libGroupe = "LIB_ZE2010",
fondContour = depm[depm$CODE=="13",]) # avec contour


# affiche les ZE2010 ayant au moins une partie dans les Bouches-du-Rhone
plot(sf::st_geometry(ze13etplus), col = "transparent", border = "grey")
# affiche uniquement la partie des ZE2010 contenue dans les Bouches-du-Rhone
plot(sf::st_geometry(ze13), col = "transparent", add = TRUE)
# affiche le contour des Bouches-du-Rhone
plot(sf::st_geometry(depm[depm$CODE=="13",]), border = "red", add = TRUE)


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
