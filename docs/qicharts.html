<!DOCTYPE html><html><head><title>Help for package qicharts</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {qicharts}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#paretochart'><p>Pareto chart</p></a></li>
<li><a href='#plot.qic'><p>Plot qic object</p></a></li>
<li><a href='#qic'><p>Quality improvement charts</p></a></li>
<li><a href='#summary.tcc'><p>Summarise Trellis Control Charts</p></a></li>
<li><a href='#tcc'><p>Trellis Control Charts</p></a></li>
<li><a href='#trc'><p>Trellis run charts for multivariate data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>0.5.8</td>
</tr>
<tr>
<td>Title:</td>
<td>Quality Improvement Charts</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions for making run charts 
    [Anhoej, Olesen (2014) &lt;<a href="https://doi.org/10.1371%2Fjournal.pone.0113825">doi:10.1371/journal.pone.0113825</a>&gt;] and basic
    Shewhart control charts [Mohammed, Worthington, Woodall (2008)
    &lt;<a href="https://doi.org/10.1136%2Fqshc.2004.012047">doi:10.1136/qshc.2004.012047</a>&gt;] for measure and count data.
    The main function, qic(), creates run and control charts and has a
    simple interface with a rich set of options to control data analysis
    and plotting, including options for automatic data aggregation by
    subgroups, easy analysis of before-and-after data, exclusion of one
    or more data points from analysis, and splitting charts into
    sequential time periods.
    Missing values and empty subgroups are handled gracefully.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>lattice, latticeExtra, graphics, grDevices, stats, scales,
ggplot2 (&ge; 2.0.0),</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-04-20 03:45:20 UTC; jacob</td>
</tr>
<tr>
<td>Author:</td>
<td>Jacob Anhoej [aut, cre],
  Timo Roeder [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jacob Anhoej &lt;jacob@anhoej.net&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-04-20 12:20:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='paretochart'>Pareto chart</h2><span id='topic+paretochart'></span>

<h3>Description</h3>

<p>Creates a pareto chart from a categorical variable
</p>


<h3>Usage</h3>

<pre><code class='language-R'>paretochart(
  x,
  main,
  ylab = "Frequency",
  xlab = "",
  cumperc.by = 20,
  cex = 0.8,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="paretochart_+3A_x">x</code></td>
<td>
<p>Categorical vector to be plotted</p>
</td></tr>
<tr><td><code id="paretochart_+3A_main">main</code></td>
<td>
<p>Plot title</p>
</td></tr>
<tr><td><code id="paretochart_+3A_ylab">ylab</code></td>
<td>
<p>Label on y axis</p>
</td></tr>
<tr><td><code id="paretochart_+3A_xlab">xlab</code></td>
<td>
<p>Label on x axis</p>
</td></tr>
<tr><td><code id="paretochart_+3A_cumperc.by">cumperc.by</code></td>
<td>
<p>Grid interval</p>
</td></tr>
<tr><td><code id="paretochart_+3A_cex">cex</code></td>
<td>
<p>Number indicating the amount by which text and symbols should be magnified.</p>
</td></tr>
<tr><td><code id="paretochart_+3A_...">...</code></td>
<td>
<p>Further arguments to plot function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table of frequencies and percentages from the pareto analysis
</p>


<h3>Author(s)</h3>

<p>Jacob Anhoej
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- rep(LETTERS[1:9], c(256, 128, 64, 32, 16, 8, 4, 2, 1))
paretochart(x)
</code></pre>

<hr>
<h2 id='plot.qic'>Plot qic object</h2><span id='topic+plot.qic'></span>

<h3>Description</h3>

<p>Plot qic object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'qic'
plot(x, y = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.qic_+3A_x">x</code></td>
<td>
<p>List object returned from the qic() function.</p>
</td></tr>
<tr><td><code id="plot.qic_+3A_y">y</code></td>
<td>
<p>Ignored. Included for compatibility with generic plot function.</p>
</td></tr>
<tr><td><code id="plot.qic_+3A_...">...</code></td>
<td>
<p>Further arguments to plot function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Creates a qic plot.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>y &lt;- rnorm(24)
p &lt;- qic(y, plot.chart = FALSE)
plot(p)

</code></pre>

<hr>
<h2 id='qic'>Quality improvement charts</h2><span id='topic+qic'></span>

<h3>Description</h3>

<p>Run and control charts for quality improvement and control
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qic(
  y,
  n,
  x,
  data,
  chart = c("run", "i", "mr", "xbar", "s", "t", "p", "c", "u", "g"),
  notes = NULL,
  cl = NULL,
  agg.fun = c("mean", "sum"),
  ylim = NULL,
  target = NULL,
  direction = NULL,
  freeze = NULL,
  breaks = NULL,
  exclude = NULL,
  negy = TRUE,
  dots.only = FALSE,
  multiply = 1,
  prime = FALSE,
  standardised = FALSE,
  x.format = "%Y-%m-%d",
  nint = 5,
  cex = 0.8,
  main,
  xlab = "Subgroup",
  ylab = "Indicator",
  sub = NULL,
  decimals = NULL,
  pre.text = "Before data",
  post.text = "After data",
  llabs = c("LCL", "CL", "UCL", "TRG"),
  runvals = FALSE,
  linevals = TRUE,
  plot.chart = TRUE,
  print.out = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="qic_+3A_y">y</code></td>
<td>
<p>Numeric vector of counts or measures to plot. Mandatory.</p>
</td></tr>
<tr><td><code id="qic_+3A_n">n</code></td>
<td>
<p>Numeric vector of sample sizes. Mandatory for P and U charts.</p>
</td></tr>
<tr><td><code id="qic_+3A_x">x</code></td>
<td>
<p>Subgrouping vector used for aggregating data and making x-labels.
Mandatory for Xbar and S charts.</p>
</td></tr>
<tr><td><code id="qic_+3A_data">data</code></td>
<td>
<p>Data frame containing variables.</p>
</td></tr>
<tr><td><code id="qic_+3A_chart">chart</code></td>
<td>
<p>Type of control chart. Possible types are: </p>
 <ul>
<li>
<p>&quot;run&quot;: run chart (default). </p>
</li>
<li><p> &quot;i&quot;: individuals chart. </p>
</li>
<li><p> &quot;mr&quot;:
moving range chart. </p>
</li>
<li><p> &quot;xbar&quot;: sample average chart. </p>
</li>
<li><p> &quot;s&quot;: sample
standard deviation chart. </p>
</li>
<li><p> &quot;t&quot;: time between events chart. </p>
</li>
<li><p> &quot;p&quot;:
proportions chart. </p>
</li>
<li><p> &quot;c&quot;: counts chart. </p>
</li>
<li><p> &quot;u&quot;: rates chart. </p>
</li>
<li>
<p>&quot;g&quot;: cases between events chart. </p>
</li></ul>
</td></tr>
<tr><td><code id="qic_+3A_notes">notes</code></td>
<td>
<p>Character vector of notes to be added to individual. data
points.</p>
</td></tr>
<tr><td><code id="qic_+3A_cl">cl</code></td>
<td>
<p>Value specifying the center line (if known). Must be of length one
or same as number of subgroups (for variable center line).</p>
</td></tr>
<tr><td><code id="qic_+3A_agg.fun">agg.fun</code></td>
<td>
<p>String specifying the aggregate function if there is more than
one value per subgroup. Possible values are  'mean' and 'sum'. Only
relevant if you want to aggregate count data with run charts or I charts.
If <code>agg.fun</code> = 'sum', the <code>n</code> argument (if provided) will be
ignored.</p>
</td></tr>
<tr><td><code id="qic_+3A_ylim">ylim</code></td>
<td>
<p>Range of y axis limits.</p>
</td></tr>
<tr><td><code id="qic_+3A_target">target</code></td>
<td>
<p>Value specifying a target line to plot.</p>
</td></tr>
<tr><td><code id="qic_+3A_direction">direction</code></td>
<td>
<p>Value indication direction of improvement, 0 (down) or 1
(up).</p>
</td></tr>
<tr><td><code id="qic_+3A_freeze">freeze</code></td>
<td>
<p>Number identifying the last data point to include in
calculations of center and limits (ignored if <code>breaks</code> argument is
given).</p>
</td></tr>
<tr><td><code id="qic_+3A_breaks">breaks</code></td>
<td>
<p>Numeric vector of break points. Useful for splitting graph in
two or more sections with separate center line and control limits.</p>
</td></tr>
<tr><td><code id="qic_+3A_exclude">exclude</code></td>
<td>
<p>Numeric vector of data points to exclude from calculations of
center and control lines.</p>
</td></tr>
<tr><td><code id="qic_+3A_negy">negy</code></td>
<td>
<p>Logical value, if TRUE, the y axis is allowed to be negative
(only relevant for I and Xbar charts).</p>
</td></tr>
<tr><td><code id="qic_+3A_dots.only">dots.only</code></td>
<td>
<p>Logical value. If TRUE, data points are not connected by
lines and runs analysis is not performed. Useful for comparison and funnel
plots.</p>
</td></tr>
<tr><td><code id="qic_+3A_multiply">multiply</code></td>
<td>
<p>Integer indicating a number to multiply y axis by, e.g. 100
for percents rather than proportions.</p>
</td></tr>
<tr><td><code id="qic_+3A_prime">prime</code></td>
<td>
<p>Logical value, if TRUE, control limits incorporate
between-subgroup variation as proposed by Laney (2002). This is recommended
for data involving very large sample sizes. Only relevant for P and U
charts.</p>
</td></tr>
<tr><td><code id="qic_+3A_standardised">standardised</code></td>
<td>
<p>Logical value, if TRUE, creates a standardised control
chart, where points are plotted in standard deviation units along with a
center line at zero and control limits at 3 and -3. Only relevant for P, U
and Xbar charts.</p>
</td></tr>
<tr><td><code id="qic_+3A_x.format">x.format</code></td>
<td>
<p>Date format of x axis labels. See ?strftime for date formats.</p>
</td></tr>
<tr><td><code id="qic_+3A_nint">nint</code></td>
<td>
<p>Number indicating (approximately) the desired number of tick
marks on the x axis.</p>
</td></tr>
<tr><td><code id="qic_+3A_cex">cex</code></td>
<td>
<p>Number indicating the amount by which text and symbols should be
magnified.</p>
</td></tr>
<tr><td><code id="qic_+3A_main">main</code></td>
<td>
<p>Character string specifying the title of the plot.</p>
</td></tr>
<tr><td><code id="qic_+3A_xlab">xlab</code></td>
<td>
<p>Character string specifying the x axis label.</p>
</td></tr>
<tr><td><code id="qic_+3A_ylab">ylab</code></td>
<td>
<p>Character string specifying the y axis label.</p>
</td></tr>
<tr><td><code id="qic_+3A_sub">sub</code></td>
<td>
<p>Character string specifying a subtitle to be printed in the lower
left corner of the plot.</p>
</td></tr>
<tr><td><code id="qic_+3A_decimals">decimals</code></td>
<td>
<p>Integer indicating the number of decimals shown for center
and limits on the plot. Default behaviour is smart rounding to at least two
significant digits.</p>
</td></tr>
<tr><td><code id="qic_+3A_pre.text">pre.text</code></td>
<td>
<p>Character string labelling pre-freeze period</p>
</td></tr>
<tr><td><code id="qic_+3A_post.text">post.text</code></td>
<td>
<p>Character string labelling post-freeze period</p>
</td></tr>
<tr><td><code id="qic_+3A_llabs">llabs</code></td>
<td>
<p>Character vector with four elements specifying labels for lower
control limit, centre line, upper control limit and target line
respectively</p>
</td></tr>
<tr><td><code id="qic_+3A_runvals">runvals</code></td>
<td>
<p>Logical value, if TRUE, prints statistics from runs analysis
on plot.</p>
</td></tr>
<tr><td><code id="qic_+3A_linevals">linevals</code></td>
<td>
<p>Logical value, if TRUE, prints values for center and control
lines on plot.</p>
</td></tr>
<tr><td><code id="qic_+3A_plot.chart">plot.chart</code></td>
<td>
<p>Logical value, if TRUE, prints plot.</p>
</td></tr>
<tr><td><code id="qic_+3A_print.out">print.out</code></td>
<td>
<p>Logical value, if TRUE, prints return value</p>
</td></tr>
<tr><td><code id="qic_+3A_...">...</code></td>
<td>
<p>Further arguments to plot function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>chart</code> is not specified, <code>qic()</code> plots a <strong>run
chart</strong>. Non-random variation will be marked by a dashed, yellow center line
(the median) if either the longest run of data points above or below the
median is longer than predicted or if the graph crosses the median fewer
times than predicted (see references for details).
</p>
<p>Only the <code>y</code> argument giving the count or measure of interest is
mandatory for a run chart. If a denominator argument, <code>n</code>, is given,
<code class="reqn">y/n</code> will be plotted. If a subgrouping argument, <code>x</code>, is given,
<code class="reqn">sum(y)/sum(n)</code>, within each subgroup will be plotted. This behaviour
can be modified using the <code>agg.fun</code> argument.
</p>
<p>With <strong>controlcharts</strong>, data aggregation by subgroups is handled
according to chart type. For P, U, and I charts, data are aggregated as
described for the run chart. For the C chart, the sum of counts,
<code>sum(y)</code>, within each subgroups will be plotted.
</p>
<p>For Xbar and S charts, the subgrouping argument, <code>x</code>, is mandatory.
However, the sample size argument, <code>n</code>, is irrelevant and will be
ignored.
</p>
<p>The subgrouping argument, <code>x</code>, is irrelevant for T and G charts, and,
if given, an error will occur if any subgroup has more than one element.
</p>
<p>If more than one <code>note</code> is present within any subgroup, the first
<code>note</code> (alphabetically) is chosen.
</p>
<p>If both <code>prime</code> and <code>standardised</code> are <code>TRUE</code>, points are
plotted in units corresponding to Laney's modified &quot;standard deviation&quot;,
which incorporates the variation between subgroups.
</p>


<h3>Value</h3>

<p>A list of of class qic containing values and parameters of the qic
plot.
</p>


<h3>References</h3>

<p>Runs analysis: </p>
 <ul>
<li><p> Jacob Anhoej, Anne Vingaard Olesen
(2014). Run Charts Revisited: A Simulation Study of Run Chart Rules for
Detection of Non-Random Variation in Health Care Processes. PLoS ONE 9(11):
e113825. doi: 10.1371/journal.pone.0113825 . </p>
</li>
<li><p> Jacob Anhoej (2015).
Diagnostic Value of Run Chart Analysis: Using Likelihood Ratios to Compare
Run Chart Rules on Simulated Data Series. PLoS ONE 10(3): e0121349. doi:
10.1371/journal.pone.0121349 </p>
</li>
<li><p> Mark F. Schilling (2012). The Surprising
Predictability of Long Runs. Math. Mag. 85, 141-149. </p>
</li>
<li><p> Zhenmin Chen
(2010). A note on the runs test. Model Assisted Statistics and Applications
5, 73-77. </p>
</li></ul>
<p> Calculation of control limits: </p>
 <ul>
<li><p>   Douglas C.
Montgomery (2009). Introduction to Statistical Process Control, Sixth
Edition, John Wiley &amp; Sons. </p>
</li>
<li><p> James C. Benneyan (2001). Number-Between
g-Type Statistical Quality Control Charts for Monitoring Adverse Events.
Health Care Management Science 4, 305-318. </p>
</li>
<li><p> Lloyd P. Provost, Sandra
K. Murray (2011). The Health Care Data Guide: Learning from Data for
Improvement. San Francisco: John Wiley &amp; Sons Inc. </p>
</li>
<li><p> David B. Laney
(2002). Improved control charts for attributes. Quality Engineering, 14(4),
531-537.</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>set.seed(1)
# Run chart of 24 samples of a random continuous variable
# with an approximate mean = 12 and standard deviation = 3.
y &lt;- rnorm(24, 12, 3)
qic(y)

# Add subgroup vector (dates) and a target
x &lt;- seq.Date(as.Date('2013-08-04'), by = 'week', length = 24)
qic(y, x = x, target = 16)

# Individuals control chart
qic(y, x = x, chart = 'i')

# Xbar control chart, sample size = 5
y &lt;- rnorm(5 * 24)
x &lt;- rep(x, 5)
qic(y, x = x, chart = 'xbar')

# Create data frame with counts and sample sizes by week
d &lt;- data.frame(week = seq.Date(as.Date('2013-08-04'),
                                by = 'week',
                                length = 36),
                y = c(rbinom(24, 20, 0.5), rbinom(12, 20, 0.8)),
                n = round(rnorm(36, 20, 2)))

# Proportions control chart
qic(y, n, x = week, data = d[1:24,], chart = 'p')

# Introduce change in process performance
qic(y, n, x = week, data = d, chart = 'p')

# Freeze baseline to first 24 samples
qic(y, n, x = week, data = d, chart = 'p', freeze = 24)

# Break control chart before and after change
qic(y, n, x = week, data = d, chart = 'p', breaks = 24)

# Introduce extreme sample value and notes
d$a &lt;- ''
d$a[30] &lt;- 'Extreme value'
d$y[30] &lt;- 1
qic(y, n, x = week, data = d, chart = 'p',
    breaks = 24,
    notes = a)

# Exclude value from calculations
d$a[30] &lt;- 'Value excluded from calculations'
qic(y, n, x = week, data = d, chart = 'p',
    breaks = 24,
    notes = a,
    exclude = 30)
</code></pre>

<hr>
<h2 id='summary.tcc'>Summarise Trellis Control Charts</h2><span id='topic+summary.tcc'></span>

<h3>Description</h3>

<p>Summary function for tcc objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'tcc'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.tcc_+3A_object">object</code></td>
<td>
<p>tcc object</p>
</td></tr>
<tr><td><code id="summary.tcc_+3A_...">...</code></td>
<td>
<p>Ignored. Included for compatibility with generic summary function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with summary statistics of the tcc object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Build data frame for example
d &lt;- data.frame(x = rep(1:24, 4),
                mo = (rep(seq(as.Date('2014-1-1'),
                              length.out = 24,
                              by = 'month'),
                          4)),
                n = rbinom(4 * 24, 100, 0.5),
                d = round(runif(4 * 24, 90, 110)),
                g1 = rep(c('a', 'b'), each = 48),
                g2 = rep(c('A', 'B'), each = 24))

# P chart
p &lt;- tcc(n, d, mo, g1 = g1, g2 = g2, breaks = 12, data = d, chart = 'p')
plot(p)
summary(p)
</code></pre>

<hr>
<h2 id='tcc'>Trellis Control Charts</h2><span id='topic+tcc'></span>

<h3>Description</h3>

<p>Run and control charts for multivariate data i trellis (grid) layout.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tcc(
  n,
  d,
  x,
  g1,
  g2,
  breaks,
  notes,
  data,
  chart = c("run", "i", "mr", "xbar", "s", "t", "p", "c", "u", "g"),
  multiply = 1,
  freeze = NULL,
  exclude,
  target = NA,
  n.sum = FALSE,
  y.neg = TRUE,
  y.percent = FALSE,
  y.expand = NULL,
  x.pad = 1,
  x.date.format = NULL,
  cl.lab = TRUE,
  cl.decimals = NULL,
  main,
  xlab = "Subgroup",
  ylab = "Value",
  subtitle = NULL,
  caption = NULL,
  cex = 1,
  pex = 1,
  prime = TRUE,
  flip = FALSE,
  dots.only = FALSE,
  print.summary = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tcc_+3A_n">n</code></td>
<td>
<p>Numerator, numeric vector of counts or measures to plot. Mandatory.</p>
</td></tr>
<tr><td><code id="tcc_+3A_d">d</code></td>
<td>
<p>Denominator, numeric vector of subgroup sizes. Mandatory for P and U
charts.</p>
</td></tr>
<tr><td><code id="tcc_+3A_x">x</code></td>
<td>
<p>Subgrouping vector used for aggregating data by subgroup and making
x-labels. Mandatory for Xbar and S charts.</p>
</td></tr>
<tr><td><code id="tcc_+3A_g1">g1</code></td>
<td>
<p>Grouping vector 1 used for trellis layout (facets).</p>
</td></tr>
<tr><td><code id="tcc_+3A_g2">g2</code></td>
<td>
<p>Grouping vector 2 used for trellis layout (facets).</p>
</td></tr>
<tr><td><code id="tcc_+3A_breaks">breaks</code></td>
<td>
<p>Numeric vector of break points. Useful for splitting graph in
two or more sections with separate center line and control limits.</p>
</td></tr>
<tr><td><code id="tcc_+3A_notes">notes</code></td>
<td>
<p>Character vector of notes to be added to individual. data
points.</p>
</td></tr>
<tr><td><code id="tcc_+3A_data">data</code></td>
<td>
<p>Data frame containing variables.</p>
</td></tr>
<tr><td><code id="tcc_+3A_chart">chart</code></td>
<td>
<p>Type of control chart. Possible types are: </p>
 <ul>
<li>
<p>&quot;run&quot;: run chart (default). </p>
</li>
<li><p> &quot;i&quot;: individuals chart. </p>
</li>
<li><p> &quot;mr&quot;:
moving range chart. </p>
</li>
<li><p> &quot;xbar&quot;: sample average chart. </p>
</li>
<li><p> &quot;s&quot;: sample
standard deviation chart. </p>
</li>
<li><p> &quot;t&quot;: time between events chart. </p>
</li>
<li><p> &quot;p&quot;:
proportions chart. </p>
</li>
<li><p> &quot;c&quot;: counts chart. </p>
</li>
<li><p> &quot;u&quot;: rates chart. </p>
</li>
<li>
<p>&quot;g&quot;: cases between events chart. </p>
</li></ul>
</td></tr>
<tr><td><code id="tcc_+3A_multiply">multiply</code></td>
<td>
<p>Integer indicating a number to multiply y axis by, e.g. 100
for percents rather than proportions. See also <code>y.percent</code> argument.</p>
</td></tr>
<tr><td><code id="tcc_+3A_freeze">freeze</code></td>
<td>
<p>Number identifying the last data point to include in
calculations of center and limits (ignored if <code>breaks</code> argument is
given).</p>
</td></tr>
<tr><td><code id="tcc_+3A_exclude">exclude</code></td>
<td>
<p>Numeric vector of data points to exclude from runs analysis
and calculations of center and control lines (same for each facet).</p>
</td></tr>
<tr><td><code id="tcc_+3A_target">target</code></td>
<td>
<p>Numeric value indicating a target value to be plotted as a
horizontal line (same for each facet).</p>
</td></tr>
<tr><td><code id="tcc_+3A_n.sum">n.sum</code></td>
<td>
<p>Logical value indicating whether the mean (default) or sum of
numerator (n argument) per subgroup should be plotted. Only relevant for
run, C, and I charts with multiple counts per subgroup.</p>
</td></tr>
<tr><td><code id="tcc_+3A_y.neg">y.neg</code></td>
<td>
<p>Logical value. If TRUE (default), the y axis is allowed to be
negative (only relevant for I and Xbar charts).</p>
</td></tr>
<tr><td><code id="tcc_+3A_y.percent">y.percent</code></td>
<td>
<p>Logical. If TRUE, formats y axis labels as percent.</p>
</td></tr>
<tr><td><code id="tcc_+3A_y.expand">y.expand</code></td>
<td>
<p>Numeric value to include in y axis. Useful e.g. for beginning
y axis at zero.</p>
</td></tr>
<tr><td><code id="tcc_+3A_x.pad">x.pad</code></td>
<td>
<p>Number indicating expansion of x axis to make room for center
line labels.</p>
</td></tr>
<tr><td><code id="tcc_+3A_x.date.format">x.date.format</code></td>
<td>
<p>Date format of x axis labels. See <code>?strftime()</code> for
possible date formats.</p>
</td></tr>
<tr><td><code id="tcc_+3A_cl.lab">cl.lab</code></td>
<td>
<p>Logical value. If TRUE (default), plots center line labels.</p>
</td></tr>
<tr><td><code id="tcc_+3A_cl.decimals">cl.decimals</code></td>
<td>
<p>Number of decimals on center line labels.</p>
</td></tr>
<tr><td><code id="tcc_+3A_main">main</code></td>
<td>
<p>Character string specifying the title of the plot.</p>
</td></tr>
<tr><td><code id="tcc_+3A_xlab">xlab</code></td>
<td>
<p>Character string specifying the x axis label.</p>
</td></tr>
<tr><td><code id="tcc_+3A_ylab">ylab</code></td>
<td>
<p>Character string specifying the y axis label.</p>
</td></tr>
<tr><td><code id="tcc_+3A_subtitle">subtitle</code></td>
<td>
<p>Character string specifying the subtitle.</p>
</td></tr>
<tr><td><code id="tcc_+3A_caption">caption</code></td>
<td>
<p>Character string specifying the caption.</p>
</td></tr>
<tr><td><code id="tcc_+3A_cex">cex</code></td>
<td>
<p>Number indicating the amount by which text should be magnified.</p>
</td></tr>
<tr><td><code id="tcc_+3A_pex">pex</code></td>
<td>
<p>Number indicating the amount by which plotting symbols should be
magnified.</p>
</td></tr>
<tr><td><code id="tcc_+3A_prime">prime</code></td>
<td>
<p>Logical value, If TRUE (default unless <code>dots.only = TRUE</code>),
control limits incorporate between-subgroup variation as proposed by Laney
(2002). Only relevant for P and U charts.</p>
</td></tr>
<tr><td><code id="tcc_+3A_flip">flip</code></td>
<td>
<p>Logical. If TRUE rotates the plot 90 degrees.</p>
</td></tr>
<tr><td><code id="tcc_+3A_dots.only">dots.only</code></td>
<td>
<p>Logical value. If TRUE, data points are not connected by
lines, prime is forced to be FALSE, and runs analysis is not performed.
Useful for comparison and funnel plots.</p>
</td></tr>
<tr><td><code id="tcc_+3A_print.summary">print.summary</code></td>
<td>
<p>Logical. If TRUE, prints summary of tcc object.</p>
</td></tr>
<tr><td><code id="tcc_+3A_...">...</code></td>
<td>
<p>Further arguments to ggplot function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>tcc()</code> is a wrapper function for <code>ggplot2()</code> that makes
multivariate run and control charts. It takes up to two grouping variables
for multidimensional trellis plots.
</p>
<p>Note that, in contrast to the qic() function, the prime argument defaults
to TRUE, which means that control limits of P and U charts by default
incorporate between-subgroup variation as proposed by Laney (2002).
</p>


<h3>Value</h3>

<p>An object of class ggplot.
</p>


<h3>References</h3>

<p>Runs analysis: </p>
 <ul>
<li><p> Jacob Anhoej, Anne Vingaard Olesen
(2014). Run Charts Revisited: A Simulation Study of Run Chart Rules for
Detection of Non-Random Variation in Health Care Processes. PLoS ONE 9(11):
e113825. doi: 10.1371/journal.pone.0113825 . </p>
</li>
<li><p> Jacob Anhoej (2015).
Diagnostic Value of Run Chart Analysis: Using Likelihood Ratios to Compare
Run Chart Rules on Simulated Data Series. PLoS ONE 10(3): e0121349. doi:
10.1371/journal.pone.0121349 </p>
</li>
<li><p> Mark F. Schilling (2012). The Surprising
Predictability of Long Runs. Math. Mag. 85, 141-149. </p>
</li>
<li><p> Zhenmin Chen
(2010). A note on the runs test. Model Assisted Statistics and Applications
5, 73-77. </p>
</li></ul>
<p> Calculation of control limits: </p>
 <ul>
<li><p>   Douglas C.
Montgomery (2009). Introduction to Statistical Process Control, Sixth
Edition, John Wiley &amp; Sons. </p>
</li>
<li><p> James C. Benneyan (2001). Number-Between
g-Type Statistical Quality Control Charts for Monitoring Adverse Events.
Health Care Management Science 4, 305-318. </p>
</li>
<li><p> Lloyd P. Provost, Sandra
K. Murray (2011). The Health Care Data Guide: Learning from Data for
Improvement. San Francisco: John Wiley &amp; Sons Inc. </p>
</li>
<li><p> David B. Laney
(2002). Improved control charts for attributes. Quality Engineering, 14(4),
531-537.</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># Run chart of 24 random normal variables
tcc(rnorm(24))

# Build data frame for examples
d &lt;- data.frame(x = rep(1:24, 4),
                mo = (rep(seq(as.Date('2014-1-1'),
                              length.out = 24,
                              by = 'month'),
                          4)),
                n = rbinom(4 * 24, 100, 0.5),
                d = round(runif(4 * 24, 90, 110)),
                g1 = rep(c('a', 'b'), each = 48),
                g2 = rep(c('A', 'B'), each = 24))

# Run chart with two grouping variables
tcc(n, d, mo, g1 = g1, g2 = g2, data = d)

# P chart
tcc(n, d, mo, g1 = g1, g2 = g2, data = d, chart = 'p')

# P chart with baseline fixed to the first 12 data points
tcc(n, d, mo, g1 = g1, g2 = g2, data = d, chart = 'p', freeze = 12)

# P chart with two breaks and summary output
tcc(n, d, mo, g1 = g1, g2 = g2, data = d, chart = 'p',
 breaks = c(12, 18), print.summary = TRUE)
</code></pre>

<hr>
<h2 id='trc'>Trellis run charts for multivariate data</h2><span id='topic+trc'></span>

<h3>Description</h3>

<p>Run charts for multivariate data in trellis (grid) layout.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trc(
  x,
  chart = c("run", "i"),
  xscale = "same",
  yscale = "same",
  dec = NULL,
  xpad = 0.1,
  pch = 20,
  cex = 0.7,
  gap = 0.5,
  target = NA,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trc_+3A_x">x</code></td>
<td>
<p>Formula object to plot. The formula is of the form y ~ x | g1 + g2 +
..., indicating that plots of y (on the y-axis) versus x (on the x-axis)
should be produced conditional on the variables g1, g2.</p>
</td></tr>
<tr><td><code id="trc_+3A_chart">chart</code></td>
<td>
<p>Type of chart: 'run' or 'i'.</p>
</td></tr>
<tr><td><code id="trc_+3A_xscale">xscale</code></td>
<td>
<p>Scaling of x-axes: 'same' or 'free'.</p>
</td></tr>
<tr><td><code id="trc_+3A_yscale">yscale</code></td>
<td>
<p>Scaling of y-axes: 'same' or 'free'.</p>
</td></tr>
<tr><td><code id="trc_+3A_dec">dec</code></td>
<td>
<p>Number of decimals of median value. The default behaviour (smart
rounding to at least two significant digits) should be satisfactory in most
cases.</p>
</td></tr>
<tr><td><code id="trc_+3A_xpad">xpad</code></td>
<td>
<p>Number specifying the fraction by which to extend the x-axis in
order to make space for the median label.</p>
</td></tr>
<tr><td><code id="trc_+3A_pch">pch</code></td>
<td>
<p>Plotting character.</p>
</td></tr>
<tr><td><code id="trc_+3A_cex">cex</code></td>
<td>
<p>Number indicating the magnification of plotting character.</p>
</td></tr>
<tr><td><code id="trc_+3A_gap">gap</code></td>
<td>
<p>Number indicating spacing between panels.</p>
</td></tr>
<tr><td><code id="trc_+3A_target">target</code></td>
<td>
<p>Value specifying a target line to plot.</p>
</td></tr>
<tr><td><code id="trc_+3A_...">...</code></td>
<td>
<p>Further arguments to xyplot.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is a wrapper for <code><a href="lattice.html#topic+xyplot">xyplot</a></code> from the
<code><a href="lattice.html#topic+lattice">lattice</a></code> package. Some usefull arguments from
<code><a href="lattice.html#topic+xyplot">xyplot</a></code> are <code>main</code>, <code>ylab</code>, <code>xlab</code>, and
<code>layout</code>.
</p>


<h3>Value</h3>

<p>Returns an object of class &quot;trellis&quot;.
</p>


<h3>See Also</h3>

<p><code><a href="lattice.html#topic+xyplot">xyplot</a></code>, <code><a href="#topic+qic">qic</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Trellis run chart on 1 conditioning variable
d1 &lt;- data.frame(y = rnorm(96, 12, 3),
                 expand.grid(x = 1:24,
                             g = LETTERS[1:4]))
trc(y ~ x | g, data = d1, main = 'Trellis run chart')

# Add target line
trc(y ~ x | g, data = d1, main = 'Trellis run chart', target = 20)

# Trellis run chart on 2 conditioning variables
d2 &lt;- data.frame(y = rnorm(144, 12, 3),
                 expand.grid(x = seq.Date(as.Date('2014-1-1'),
                                          by = 'week',
                                          length.out = 24),
                             g1 = LETTERS[1:3],
                             g2 = letters[1:2]))
trc(y ~ x | g1 + g2, data = d2, main = 'Trellis run chart')

# Introduce a shift in process performance
d2$y[132:144] &lt;- d2$y[132:144] * 3
trc(y ~ x | g1 + g2, data = d2, main = 'Trellis run chart')

# Make I chart
trc(y ~ x | g1 + g2, data = d2, main = 'Trellis run chart', chart = 'i')
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
