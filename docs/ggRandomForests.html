<!DOCTYPE html><html><head><title>Help for package ggRandomForests</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ggRandomForests}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#calc_auc'><p>Area Under the ROC Curve calculator</p></a></li>
<li><a href='#calc_roc.rfsrc'><p>Receiver Operator Characteristic calculator</p></a></li>
<li><a href='#combine.gg_partial'><p>combine two gg_partial objects</p></a></li>
<li><a href='#gg_error'><p>randomForest error rate data object</p></a></li>
<li><a href='#gg_interaction'><p>Minimal Depth Variable Interaction data object</p>
(<code>find.interaction</code>).</a></li>
<li><a href='#gg_minimal_depth'><p>Minimal depth data object (<code>[randomForestSRC]{var.select}</code>)</p></a></li>
<li><a href='#gg_minimal_vimp'><p>Minimal depth vs VIMP comparison by variable rankings.</p></a></li>
<li><a href='#gg_partial'><p>Partial variable dependence object</p></a></li>
<li><a href='#gg_partial_coplot.rfsrc'><p>Data structures for stratified partial coplots</p></a></li>
<li><a href='#gg_rfsrc.rfsrc'><p>Predicted response data object</p></a></li>
<li><a href='#gg_roc.rfsrc'><p>ROC (Receiver operator curve) data from a classification random forest.</p></a></li>
<li><a href='#gg_survival'><p>Nonparametric survival estimates.</p></a></li>
<li><a href='#gg_variable'><p>Marginal variable dependence data object.</p></a></li>
<li><a href='#gg_vimp'><p>Variable Importance (VIMP) data object</p></a></li>
<li><a href='#ggRandomForests-package'><p>ggRandomForests: Visually Exploring Random Forests</p></a></li>
<li><a href='#kaplan'><p>nonparametric Kaplan-Meier estimates</p></a></li>
<li><a href='#nelson'><p>nonparametric Nelson-Aalen estimates</p></a></li>
<li><a href='#plot.gg_error'><p>Plot a <code>gg_error</code> object</p></a></li>
<li><a href='#plot.gg_interaction'><p>plot.gg_interaction</p>
Plot a <code>gg_interaction</code> object,</a></li>
<li><a href='#plot.gg_minimal_depth'><p>Plot a <code>gg_minimal_depth</code> object for random forest variable</p>
ranking.</a></li>
<li><a href='#plot.gg_minimal_vimp'><p>Plot a <code>gg_minimal_vimp</code> object for comparing the Minimal</p>
Depth and VIMP variable rankings.</a></li>
<li><a href='#plot.gg_partial'><p>Partial variable dependence plot, operates on a <code>gg_partial</code></p>
object.</a></li>
<li><a href='#plot.gg_partial_list'><p>Partial variable dependence plot, operates on a <code>gg_partial_list</code></p>
object.</a></li>
<li><a href='#plot.gg_rfsrc'><p>Predicted response plot from a <code>gg_rfsrc</code> object.</p></a></li>
<li><a href='#plot.gg_roc'><p>ROC plot generic function for a <code>gg_roc</code> object.</p></a></li>
<li><a href='#plot.gg_survival'><p>Plot a <code>gg_survival</code>  object.</p></a></li>
<li><a href='#plot.gg_variable'><p>Plot a <code>gg_variable</code> object,</p></a></li>
<li><a href='#plot.gg_vimp'><p>Plot a <code>gg_vimp</code> object, extracted variable importance of a</p>
<code>rfsrc</code> object</a></li>
<li><a href='#print.gg_minimal_depth'><p>Print a <code>gg_minimal_depth</code> object.</p></a></li>
<li><a href='#quantile_pts'><p>Find points evenly distributed along the vectors values.</p></a></li>
<li><a href='#shift'><p>lead function to shift by one (or more).</p></a></li>
<li><a href='#surface_matrix'><p>Construct a set of (x, y, z) matrices for surface plotting a</p>
<code>gg_partial_coplot</code> object</a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Visually Exploring Random Forests</td>
</tr>
<tr>
<td>Version:</td>
<td>2.2.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-08-31</td>
</tr>
<tr>
<td>Author:</td>
<td>John Ehrlinger &lt;john.ehrlinger@gmail.com&gt;</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>John Ehrlinger &lt;john.ehrlinger@gmail.com&gt;</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ehrlinger/ggRandomForests">https://github.com/ehrlinger/ggRandomForests</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ehrlinger/ggRandomForests/issues">https://github.com/ehrlinger/ggRandomForests/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Graphic elements for exploring Random Forests using the 'randomForest' or
    'randomForestSRC' package for survival, regression and classification forests and
    'ggplot2' package plotting.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0), randomForestSRC (&ge; 1.5.5), randomForest</td>
</tr>
<tr>
<td>Imports:</td>
<td>survival, parallel, tidyr, ggplot2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, rmdformats, bookdown, RColorBrewer, MASS, dplyr,
knitr, rmarkdown, plot3D, lintr, datasets</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-08-31 19:11:49 UTC; jehrling</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-09-01 09:10:45 UTC</td>
</tr>
</table>
<hr>
<h2 id='calc_auc'>Area Under the ROC Curve calculator</h2><span id='topic+calc_auc'></span><span id='topic+calc_auc.gg_roc'></span>

<h3>Description</h3>

<p>Area Under the ROC Curve calculator
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_auc(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calc_auc_+3A_x">x</code></td>
<td>
<p><code><a href="#topic+gg_roc">gg_roc</a></code> object</p>
</td></tr>
</table>


<h3>Details</h3>

<p>calc_auc uses the trapezoidal rule to calculate the area under
the ROC curve.
</p>
<p>This is a helper function for the <code><a href="#topic+gg_roc">gg_roc</a></code> functions.
</p>


<h3>Value</h3>

<p>AUC. 50% is random guessing, higher is better.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+calc_roc">calc_roc</a></code> <code><a href="#topic+gg_roc">gg_roc</a></code>
</p>
<p><code><a href="#topic+plot.gg_roc">plot.gg_roc</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>##
## Taken from the gg_roc example
rfsrc_iris &lt;- rfsrc(Species ~ ., data = iris)

## Not run: 
gg_dta &lt;- gg_roc(rfsrc_iris, which_outcome=1)

calc_auc(gg_dta)

## End(Not run)

gg_dta &lt;- gg_roc(rfsrc_iris, which_outcome=2)

calc_auc(gg_dta)

## randomForest tests
rf_iris &lt;- randomForest::randomForest(Species ~ ., data = iris)
gg_dta &lt;- gg_roc(rfsrc_iris, which_outcome=2)

calc_auc(gg_dta)

</code></pre>

<hr>
<h2 id='calc_roc.rfsrc'>Receiver Operator Characteristic calculator</h2><span id='topic+calc_roc.rfsrc'></span><span id='topic+calc_roc.randomForest'></span><span id='topic+calc_roc'></span>

<h3>Description</h3>

<p>Receiver Operator Characteristic calculator
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rfsrc'
calc_roc(object, dta, which_outcome = "all", oob = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calc_roc.rfsrc_+3A_object">object</code></td>
<td>
<p><code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> or
<code><a href="randomForestSRC.html#topic+predict.rfsrc">predict.rfsrc</a></code> object
containing predicted response</p>
</td></tr>
<tr><td><code id="calc_roc.rfsrc_+3A_dta">dta</code></td>
<td>
<p>True response variable</p>
</td></tr>
<tr><td><code id="calc_roc.rfsrc_+3A_which_outcome">which_outcome</code></td>
<td>
<p>If defined, only show ROC for this response.</p>
</td></tr>
<tr><td><code id="calc_roc.rfsrc_+3A_oob">oob</code></td>
<td>
<p>Use OOB estimates, the normal validation method (TRUE)</p>
</td></tr>
<tr><td><code id="calc_roc.rfsrc_+3A_...">...</code></td>
<td>
<p>extra arguments passed to helper functions</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For a randomForestSRC prediction and the actual
response value, calculate the specificity (1-False Positive Rate) and
sensitivity (True Positive Rate) of a predictor.
</p>
<p>This is a helper function for the <code><a href="#topic+gg_roc">gg_roc</a></code> functions, and
not intended for use by the end user.
</p>


<h3>Value</h3>

<p>A <code>gg_roc</code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+calc_auc">calc_auc</a></code> <code><a href="#topic+gg_roc">gg_roc</a></code>
</p>
<p><code><a href="#topic+plot.gg_roc">plot.gg_roc</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Taken from the gg_roc example
rfsrc_iris &lt;- rfsrc(Species ~ ., data = iris)

gg_dta &lt;- calc_roc(rfsrc_iris, rfsrc_iris$yvar,
     which_outcome=1, oob=TRUE)
gg_dta &lt;- calc_roc(rfsrc_iris, rfsrc_iris$yvar,
     which_outcome=1, oob=FALSE)

rf_iris &lt;- randomForest(Species ~ ., data = iris)
gg_dta &lt;- calc_roc(rf_iris, rf_iris$yvar,
     which_outcome=1)
gg_dta &lt;- calc_roc(rf_iris, rf_iris$yvar,
     which_outcome=2)

</code></pre>

<hr>
<h2 id='combine.gg_partial'>combine two gg_partial objects</h2><span id='topic+combine.gg_partial'></span><span id='topic+combine.gg_partial_list'></span>

<h3>Description</h3>

<p>The <code>combine.gg_partial</code> function assumes the two 
<code><a href="#topic+gg_partial">gg_partial</a></code> objects were generated from the same 
<code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object. So, the function joins along the
<code><a href="#topic+gg_partial">gg_partial</a></code> list item names (one per partial plot variable). 
Further, we combine the two <code><a href="#topic+gg_partial">gg_partial</a></code> objects along the group 
variable.
</p>
<p>Hence, to join three <code><a href="#topic+gg_partial">gg_partial</a></code> objects together (i.e. for
three different time points from a survival random forest) would require
two <code>combine.gg_partial</code> calls: One to join the first two
<code><a href="#topic+gg_partial">gg_partial</a></code> object, and one to append the third
<code><a href="#topic+gg_partial">gg_partial</a></code> object to the output from the first call.
The second call will append a single <code>lbls</code> label to the
<code><a href="#topic+gg_partial">gg_partial</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>combine.gg_partial(x, y, lbls, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="combine.gg_partial_+3A_x">x</code></td>
<td>
<p><code><a href="#topic+gg_partial">gg_partial</a></code>  object</p>
</td></tr>
<tr><td><code id="combine.gg_partial_+3A_y">y</code></td>
<td>
<p><code><a href="#topic+gg_partial">gg_partial</a></code>  object</p>
</td></tr>
<tr><td><code id="combine.gg_partial_+3A_lbls">lbls</code></td>
<td>
<p>vector of 2 strings to label the combined data.</p>
</td></tr>
<tr><td><code id="combine.gg_partial_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="#topic+gg_partial">gg_partial</a></code> or <code>gg_partial_list</code> based on
class of x and y.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# We need to create this dataset
data(pbc, package = "randomForestSRC",) 
# For whatever reason, the age variable is in days... makes no sense to me
for (ind in seq_len(dim(pbc)[2])) {
 if (!is.factor(pbc[, ind])) {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(range(pbc[, ind], na.rm = TRUE) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 } else {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(sort(unique(pbc[, ind])) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
     if (sum(sort(unique(pbc[, ind])) == c(FALSE, TRUE)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 }
 if (!is.logical(pbc[, ind]) &amp;
     length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 5) {
   pbc[, ind] &lt;- factor(pbc[, ind])
 }
}
#Convert age to years
pbc$age &lt;- pbc$age / 364.24

pbc$years &lt;- pbc$days / 364.24
pbc &lt;- pbc[, -which(colnames(pbc) == "days")]
pbc$treatment &lt;- as.numeric(pbc$treatment)
pbc$treatment[which(pbc$treatment == 1)] &lt;- "DPCA"
pbc$treatment[which(pbc$treatment == 2)] &lt;- "placebo"
pbc$treatment &lt;- factor(pbc$treatment)
dta_train &lt;- pbc[-which(is.na(pbc$treatment)), ]
# Create a test set from the remaining patients
pbc_test &lt;- pbc[which(is.na(pbc$treatment)), ]

#========
# build the forest:
rfsrc_pbc &lt;- randomForestSRC::rfsrc(
  Surv(years, status) ~ .,
 dta_train,
 nsplit = 10,
 na.action = "na.impute",
 forest = TRUE,
 importance = TRUE,
 save.memory = TRUE
)
xvar &lt;- c("bili", "albumin", "copper", "prothrombin", "age")
xvar_cat &lt;- c("edema")
xvar &lt;- c(xvar, xvar_cat)

time_index &lt;- c(which(rfsrc_pbc$time.interest &gt; 1)[1] - 1,  
                which(rfsrc_pbc$time.interest &gt; 3)[1] - 1,  
                which(rfsrc_pbc$time.interest &gt; 5)[1] - 1)
                
partial_pbc &lt;- mclapply(rfsrc_pbc$time.interest[time_index],
                  function(tm) {
                    plot.variable(rfsrc_pbc, surv.type = "surv", 
                                       time = tm, xvar.names = xvar,
                                       partial = TRUE, 
                                       show.plots = FALSE)
                       })
                       
# A list of 2 plot.variable objects
length(partial_pbc)
class(partial_pbc)

class(partial_pbc[[1]])
class(partial_pbc[[2]])

# Create gg_partial objects
ggPrtl.1 &lt;- gg_partial(partial_pbc[[1]])
ggPrtl.2 &lt;- gg_partial(partial_pbc[[2]])

# Combine the objects to get multiple time curves
# along variables on a single figure.
ggpart &lt;- combine.gg_partial(ggPrtl.1, ggPrtl.2,
                             lbls = c("1 year", "3 years"))

# Plot each figure separately
plot(ggpart)

# Get the continuous data for a panel of continuous plots.
ggcont &lt;- ggpart
ggcont$edema &lt;- ggcont$ascites &lt;- ggcont$stage &lt;- NULL
plot(ggcont, panel=TRUE)

# And the categorical for a panel of categorical plots.
nms &lt;- colnames(sapply(ggcont, function(st) {st}))
for(ind in nms) {
   ggpart[[ind]] &lt;- NULL
}
plot(ggpart, panel=TRUE)


## End(Not run)
</code></pre>

<hr>
<h2 id='gg_error'>randomForest error rate data object</h2><span id='topic+gg_error'></span><span id='topic+gg_error.rfsrc'></span><span id='topic+gg_error.randomForest'></span><span id='topic+gg_error.randomForest.formula'></span>

<h3>Description</h3>

<p>Extract the cumulative (OOB) <code>randomForestSRC</code> error rate as a 
function of number of trees.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gg_error(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gg_error_+3A_object">object</code></td>
<td>
<p><code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object.</p>
</td></tr>
<tr><td><code id="gg_error_+3A_...">...</code></td>
<td>
<p>optional arguments (not used).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>gg_error</code> function simply returns the
<code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a>$err.rate</code> object as a data.frame, 
and assigns the class for connecting to the S3 
<code><a href="#topic+plot.gg_error">plot.gg_error</a></code> function.
</p>


<h3>Value</h3>

<p><code>gg_error</code> <code>data.frame</code> with one column indicating 
the tree number, and the remaining columns from the 
<code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a>$err.rate</code> return value.
</p>


<h3>References</h3>

<p>Breiman L. (2001). Random forests, Machine Learning, 45:5-32.
</p>
<p>Ishwaran H. and Kogalur U.B. (2007). Random survival forests for R, 
Rnews, 7(2):25-31.
</p>
<p>Ishwaran H. and Kogalur U.B. (2013). Random Forests for Survival, Regression
and Classification (RF-SRC), R package version 1.4.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot.gg_error">plot.gg_error</a></code> <code>rfsrc</code> <code>plot.rfsrc</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Examples from RFSRC package...
## ------------------------------------------------------------
## classification example
## ------------------------------------------------------------
## ------------- iris data
## You can build a randomForest
rfsrc_iris &lt;- rfsrc(Species ~ ., data = iris, tree.err = TRUE)

# Get a data.frame containing error rates
gg_dta &lt;- gg_error(rfsrc_iris)

# Plot the gg_error object
plot(gg_dta)

## RandomForest example
rf_iris &lt;- randomForest::randomForest(Species ~ ., data = iris, 
                                      tree.err = TRUE, )
gg_dta &lt;- gg_error(rf_iris)
plot(gg_dta)

gg_dta &lt;- gg_error(rf_iris, training=TRUE)
plot(gg_dta)
## ------------------------------------------------------------
## Regression example
## ------------------------------------------------------------
## Not run: 
## ------------- airq data
rfsrc_airq &lt;- rfsrc(Ozone ~ ., data = airquality, 
    na.action = "na.impute", tree.err = TRUE, )

# Get a data.frame containing error rates
gg_dta &lt;- gg_error(rfsrc_airq)

# Plot the gg_error object
plot(gg_dta)

## End(Not run)

## ------------- Boston data
data(Boston, package = "MASS")
Boston$chas &lt;- as.logical(Boston$chas)
rfsrc_boston &lt;- rfsrc(medv ~ .,
   data = Boston,
   forest = TRUE,
   importance = TRUE,
   tree.err = TRUE,
   save.memory = TRUE)

# Get a data.frame containing error rates
gg_dta&lt;- gg_error(rfsrc_boston)

# Plot the gg_error object
plot(gg_dta)

## Not run: 
## ------------- mtcars data
rfsrc_mtcars &lt;- rfsrc(mpg ~ ., data = mtcars, tree.err = TRUE)
# Get a data.frame containing error rates
gg_dta&lt;- gg_error(rfsrc_mtcars)

# Plot the gg_error object
plot(gg_dta)

## End(Not run)

## ------------------------------------------------------------
## Survival example
## ------------------------------------------------------------
## Not run: 
## ------------- veteran data
## randomized trial of two treatment regimens for lung cancer
data(veteran, package = "randomForestSRC")
rfsrc_veteran &lt;- rfsrc(Surv(time, status) ~ ., data = veteran,
                       tree.err = TRUE)

gg_dta &lt;- gg_error(rfsrc_veteran)
plot(gg_dta)

## ------------- pbc data
# Load a cached randomForestSRC object
# We need to create this dataset
data(pbc, package = "randomForestSRC",) 
# For whatever reason, the age variable is in days... makes no sense to me
for (ind in seq_len(dim(pbc)[2])) {
 if (!is.factor(pbc[, ind])) {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(range(pbc[, ind], na.rm = TRUE) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 } else {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(sort(unique(pbc[, ind])) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
     if (sum(sort(unique(pbc[, ind])) == c(FALSE, TRUE)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 }
 if (!is.logical(pbc[, ind]) &amp;
     length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 5) {
   pbc[, ind] &lt;- factor(pbc[, ind])
 }
}
#Convert age to years
pbc$age &lt;- pbc$age / 364.24

pbc$years &lt;- pbc$days / 364.24
pbc &lt;- pbc[, -which(colnames(pbc) == "days")]
pbc$treatment &lt;- as.numeric(pbc$treatment)
pbc$treatment[which(pbc$treatment == 1)] &lt;- "DPCA"
pbc$treatment[which(pbc$treatment == 2)] &lt;- "placebo"
pbc$treatment &lt;- factor(pbc$treatment)
dta_train &lt;- pbc[-which(is.na(pbc$treatment)), ]
# Create a test set from the remaining patients
pbc_test &lt;- pbc[which(is.na(pbc$treatment)), ]

#========
# build the forest:
rfsrc_pbc &lt;- randomForestSRC::rfsrc(
  Surv(years, status) ~ .,
 dta_train,
 nsplit = 10,
 na.action = "na.impute",
 tree.err = TRUE, 
 forest = TRUE,
 importance = TRUE,
 save.memory = TRUE
)


gg_dta &lt;- gg_error(rfsrc_pbc)
plot(gg_dta)

## End(Not run)

</code></pre>

<hr>
<h2 id='gg_interaction'>Minimal Depth Variable Interaction data object
(<code><a href="randomForestSRC.html#topic+find.interaction">find.interaction</a></code>).</h2><span id='topic+gg_interaction'></span><span id='topic+gg_interaction.randomForest'></span><span id='topic+gg_interaction.rfsrc'></span>

<h3>Description</h3>

<p>Converts the matrix returned from
<code><a href="randomForestSRC.html#topic+find.interaction">find.interaction</a></code> to a <code>data.frame</code>
and add attributes for S3 identification. If passed  a
<code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object, <code>gg_interaction</code>
first runs the <code><a href="randomForestSRC.html#topic+find.interaction">find.interaction</a></code>
function with all optional arguments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gg_interaction(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gg_interaction_+3A_object">object</code></td>
<td>
<p>a <code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object or the
output from the <code><a href="randomForestSRC.html#topic+find.interaction">find.interaction</a></code>
function call.</p>
</td></tr>
<tr><td><code id="gg_interaction_+3A_...">...</code></td>
<td>
<p>optional extra arguments passed to
<code><a href="randomForestSRC.html#topic+find.interaction">find.interaction</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>gg_interaction</code> object
</p>


<h3>References</h3>

<p>Ishwaran H. (2007). Variable importance in binary regression trees and
forests, Electronic J. Statist., 1:519-537.
</p>
<p>Ishwaran H., Kogalur U.B., Gorodeski E.Z, Minn A.J. and Lauer M.S. (2010).
High-dimensional variable selection for survival data. J. Amer. Statist.
Assoc., 105:205-217.
</p>
<p>Ishwaran H., Kogalur U.B., Chen X. and Minn A.J. (2011). Random survival
forests for high-dimensional data. Statist. Anal. Data Mining, 4:115-132.
</p>


<h3>See Also</h3>

<p><code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code>
<code><a href="randomForestSRC.html#topic+find.interaction">find.interaction</a></code>
<code><a href="randomForestSRC.html#topic+max.subtree">max.subtree</a></code>
<code><a href="randomForestSRC.html#topic+var.select">var.select</a></code>
<code><a href="randomForestSRC.html#topic+vimp">vimp</a></code>
<code><a href="#topic+plot.gg_interaction">plot.gg_interaction</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Examples from randomForestSRC package...
## ------------------------------------------------------------
## find interactions, classification setting
## ------------------------------------------------------------
## -------- iris data
iris.obj &lt;- rfsrc(Species ~., data = iris)
## TODO: VIMP interactions not handled yet....
## randomForestSRC::find.interaction(iris.obj, method = "vimp", nrep = 3)

interaction_iris &lt;- randomForestSRC::find.interaction(iris.obj)
gg_dta &lt;- gg_interaction(interaction_iris)

plot(gg_dta, xvar="Petal.Width")
plot(gg_dta, panel=TRUE)

## ------------------------------------------------------------
## find interactions, regression setting
## ------------------------------------------------------------
## Not run: 
## -------- air quality data
airq.obj &lt;- rfsrc(Ozone ~ ., data = airquality)
##
## TODO: VIMP interactions not handled yet....
## randomForestSRC::find.interaction(airq.obj, method = "vimp", nrep = 3)
interaction_airq &lt;- randomForestSRC::find.interaction(airq.obj)

gg_dta &lt;- gg_interaction(interaction_airq)

plot(gg_dta, xvar="Temp")
plot(gg_dta, xvar="Solar.R")

plot(gg_dta, panel=TRUE)

## End(Not run)
## Not run: 
## -------- Boston data
data(Boston, package = "MASS")
Boston$chas &lt;- as.logical(Boston$chas)
rfsrc_boston &lt;- rfsrc(medv ~ .,
   data = Boston,
   forest = TRUE,
   importance = TRUE,
   tree.err = TRUE,
   save.memory = TRUE)
   
interaction_boston &lt;- find.interaction(rfsrc_boston)

gg_dta &lt;- gg_interaction(interaction_boston)

plot(gg_dta, panel=TRUE)

## End(Not run)
## Not run: 
## -------- mtcars data
rfsrc_mtcars &lt;- rfsrc(mpg ~ ., data = mtcars)

interaction_mtcars &lt;- find.interaction(rfsrc_mtcars)

gg_dta &lt;- gg_interaction(interaction_mtcars)

plot(gg_dta, panel=TRUE)

## End(Not run)
## Not run: 
## ------------------------------------------------------------
## find interactions, survival setting
## ------------- veteran data
## randomized trial of two treatment regimens for lung cancer
data(veteran, package = "randomForestSRC")
rfsrc_veteran &lt;- rfsrc(Surv(time, status) ~ ., data = veteran)

interaction_vet &lt;- find.interaction(rfsrc_veteran)

gg_dta &lt;- gg_interaction(interaction_vet)

plot(gg_dta, panel = True)

## ------------------------------------------------------------
## -------- pbc data
# We need to create this dataset
data(pbc, package = "randomForestSRC",) 
# For whatever reason, the age variable is in days... makes no sense to me
for (ind in seq_len(dim(pbc)[2])) {
 if (!is.factor(pbc[, ind])) {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(range(pbc[, ind], na.rm = TRUE) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 } else {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(sort(unique(pbc[, ind])) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
     if (sum(sort(unique(pbc[, ind])) == c(FALSE, TRUE)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 }
 if (!is.logical(pbc[, ind]) &amp;
     length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 5) {
   pbc[, ind] &lt;- factor(pbc[, ind])
 }
}
# Convert age to years
pbc$age &lt;- pbc$age / 364.24

pbc$years &lt;- pbc$days / 364.24
pbc &lt;- pbc[, -which(colnames(pbc) == "days")]
pbc$treatment &lt;- as.numeric(pbc$treatment)
pbc$treatment[which(pbc$treatment == 1)] &lt;- "DPCA"
pbc$treatment[which(pbc$treatment == 2)] &lt;- "placebo"
pbc$treatment &lt;- factor(pbc$treatment)
dta_train &lt;- pbc[-which(is.na(pbc$treatment)), ]
# Create a test set from the remaining patients
pbc_test &lt;- pbc[which(is.na(pbc$treatment)), ]

#========
# build the forest:
rfsrc_pbc &lt;- randomForestSRC::rfsrc(
  Surv(years, status) ~ .,
 dta_train,
 nsplit = 10,
 na.action = "na.impute",
 forest = TRUE,
 importance = TRUE,
 save.memory = TRUE
)

interaction_pbc &lt;- find.interaction(rfsrc_pbc, nvar = 9)
gg_dta &lt;- gg_interaction(interaction_pbc)

plot(gg_dta, xvar="bili")
plot(gg_dta, panel=TRUE)


## End(Not run)

</code></pre>

<hr>
<h2 id='gg_minimal_depth'>Minimal depth data object (<code>[randomForestSRC]{var.select}</code>)</h2><span id='topic+gg_minimal_depth'></span><span id='topic+gg_minimal_depth.rfsrc'></span><span id='topic+gg_minimal_depth.randomForest'></span>

<h3>Description</h3>

<p>the <code>[randomForestSRC]{var.select}</code> function implements
random forest variable selection using tree minimal depth methodology. The
<code>gg_minimal_depth</code> function takes the output from
<code>[randomForestSRC]{var.select}</code> and creates a <code>data.frame</code>
formatted for the <code><a href="#topic+plot.gg_minimal_depth">plot.gg_minimal_depth</a></code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gg_minimal_depth(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gg_minimal_depth_+3A_object">object</code></td>
<td>
<p>A <code>[randomForestSRC]{rfsrc}</code> object,
<code>[randomForestSRC]{predict}</code> object or the list from the
<code>[randomForestSRC]{var.select.rfsrc}</code> function.</p>
</td></tr>
<tr><td><code id="gg_minimal_depth_+3A_...">...</code></td>
<td>
<p>optional arguments passed to the
<code>[randomForestSRC]{var.select}</code> function if operating on an
<code>[randomForestSRC]{rfsrc}</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>gg_minimal_depth</code> object, A modified list of variables from
the <code>[randomForestSRC]{var.select}</code> function, ordered by minimal
depth rank.
</p>


<h3>See Also</h3>

<p><code>[randomForestSRC]{var.select}</code>
</p>
<p><code><a href="#topic+plot.gg_minimal_depth">plot.gg_minimal_depth</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Examples from RFSRC package...
## ------------------------------------------------------------
## classification example
## ------------------------------------------------------------
## -------- iris data
## You can build a randomForest
rfsrc_iris &lt;- rfsrc(Species ~ ., data = iris)
varsel_iris &lt;- randomForestSRC::var.select(rfsrc_iris)

# Get a data.frame containing minimaldepth measures
gg_dta &lt;- gg_minimal_depth(varsel_iris)

# Plot the gg_minimal_depth object
plot(gg_dta)

## ------------------------------------------------------------
## Regression example
## ------------------------------------------------------------
## Not run: 
## -------- air quality data
rfsrc_airq &lt;- rfsrc(Ozone ~ ., data = airquality, 
                    na.action = "na.impute")
varsel_airq &lt;- var.select(rfsrc_airq)

# Get a data.frame containing error rates
gg_dta&lt;- gg_minimal_depth(varsel_airq)

# Plot the gg_minimal_depth object
plot(gg_dta)

## End(Not run)
## Not run: 

## -------- Boston data
data(Boston, package = "MASS")
Boston$chas &lt;- as.logical(Boston$chas)
rfsrc_boston &lt;- rfsrc(medv ~ .,
   data = Boston,
   forest = TRUE,
   importance = TRUE,
   tree.err = TRUE,
   save.memory = TRUE)
   
varsel_boston &lt;- var.select(rfsrc_boston)

# Get a data.frame containing error rates
gg_dta &lt;- gg_minimal_depth(varsel_boston)
print(gg_dta)
plot(gg_dta)

## End(Not run)
## Not run: 
## -------- mtcars data
rfsrc_mtcars &lt;- rfsrc(mpg ~ ., data = mtcars)
varsel_mtcars &lt;- var.select(rfsrc_mtcars)

# Get a data.frame containing error rates
plot.gg_minimal_depth(varsel_mtcars)

## End(Not run)

## ------------------------------------------------------------
## Survival example
## ------------------------------------------------------------
## Not run: 
## -------- veteran data
## randomized trial of two treatment regimens for lung cancer
data(veteran, package = "randomForestSRC")
rfsrc_veteran &lt;- rfsrc(Surv(time, status) ~ ., data = veteran, ntree = 100)
varsel_veteran &lt;- randomForestSRC::var.select(rfsrc_veteran)

gg_dta &lt;- gg_minimal_depth(varsel_veteran)
plot(gg_dta)

## ------------------------------------------------------------
## -------- pbc data
# We need to create this dataset
data(pbc, package = "randomForestSRC",) 
# For whatever reason, the age variable is in days... makes no sense to me
for (ind in seq_len(dim(pbc)[2])) {
 if (!is.factor(pbc[, ind])) {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(range(pbc[, ind], na.rm = TRUE) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 } else {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(sort(unique(pbc[, ind])) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
     if (sum(sort(unique(pbc[, ind])) == c(FALSE, TRUE)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 }
 if (!is.logical(pbc[, ind]) &amp;
     length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 5) {
   pbc[, ind] &lt;- factor(pbc[, ind])
 }
}
#Convert age to years
pbc$age &lt;- pbc$age / 364.24

pbc$years &lt;- pbc$days / 364.24
pbc &lt;- pbc[, -which(colnames(pbc) == "days")]
pbc$treatment &lt;- as.numeric(pbc$treatment)
pbc$treatment[which(pbc$treatment == 1)] &lt;- "DPCA"
pbc$treatment[which(pbc$treatment == 2)] &lt;- "placebo"
pbc$treatment &lt;- factor(pbc$treatment)
dta_train &lt;- pbc[-which(is.na(pbc$treatment)), ]
# Create a test set from the remaining patients
pbc_test &lt;- pbc[which(is.na(pbc$treatment)), ]

#========
# build the forest:
rfsrc_pbc &lt;- randomForestSRC::rfsrc(
  Surv(years, status) ~ .,
 dta_train,
 nsplit = 10,
 na.action = "na.impute",
 forest = TRUE,
 importance = TRUE,
 save.memory = TRUE
)

varsel_pbc &lt;- var.select(rfsrc_pbc)

gg_dta &lt;- gg_minimal_depth(varsel_pbc)
plot(gg_dta)

## End(Not run)
</code></pre>

<hr>
<h2 id='gg_minimal_vimp'>Minimal depth vs VIMP comparison by variable rankings.</h2><span id='topic+gg_minimal_vimp'></span><span id='topic+gg_minimal_vimp.randomForest'></span><span id='topic+gg_minimal_vimp.rfsrc'></span>

<h3>Description</h3>

<p>Minimal depth vs VIMP comparison by variable rankings.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gg_minimal_vimp(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gg_minimal_vimp_+3A_object">object</code></td>
<td>
<p>A <code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object,
<code><a href="randomForestSRC.html#topic+predict.rfsrc">predict.rfsrc</a></code> object or the list from the 
<code><a href="randomForestSRC.html#topic+var.select.rfsrc">var.select.rfsrc</a></code> function.</p>
</td></tr>
<tr><td><code id="gg_minimal_vimp_+3A_...">...</code></td>
<td>
<p>optional arguments passed to the 
<code><a href="randomForestSRC.html#topic+var.select">var.select</a></code> function if operating on an 
<code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>gg_minimal_vimp</code> comparison object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot.gg_minimal_vimp">plot.gg_minimal_vimp</a></code> 
<code><a href="randomForestSRC.html#topic+var.select">var.select</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Examples from RFSRC package...
## ------------------------------------------------------------
## classification example
## ------------------------------------------------------------
## -------- iris data
## You can build a randomForest
rfsrc_iris &lt;- rfsrc(Species ~ ., data = iris)
varsel_iris &lt;- randomForestSRC::var.select(rfsrc_iris)

# Get a data.frame containing minimaldepth measures
gg_dta&lt;- gg_minimal_vimp(varsel_iris)

# Plot the gg_minimal_depth object
plot(gg_dta)

## ------------------------------------------------------------
## Regression example
## ------------------------------------------------------------
## Not run: 
## -------- air quality data
rfsrc_airq &lt;- rfsrc(Ozone ~ ., data = airquality, 
                    na.action = "na.impute")
varsel_airq &lt;- randomForestSRC::var.select(rfsrc_airq)

# Get a data.frame containing error rates
gg_dta&lt;- gg_minimal_vimp(varsel_airq)

# Plot the gg_minimal_vimp object
plot(gg_dta)

## End(Not run)
## Not run: 
## -------- Boston data
data(Boston, package = "MASS")
Boston$chas &lt;- as.logical(Boston$chas)
rfsrc_boston &lt;- rfsrc(medv ~ .,
   data = Boston,
   forest = TRUE,
   importance = TRUE,
   tree.err = TRUE,
   save.memory = TRUE)
   
varsel_boston &lt;- var.select(rfsrc_boston)

# Get a data.frame containing error rates
gg_dta&lt;- gg_minimal_vimp(varsel_boston)

# Plot the gg_minimal_vimp object
plot(gg_dta)

## End(Not run)
## Not run: 
## -------- mtcars data

rfsrc_mtcars &lt;- rfsrc(mpg ~ ., data = mtcars)
varsel_mtcars &lt;- var.select(rfsrc_mtcars)

# Get a data.frame containing error rates
gg_dta &lt;- gg_minimal_vimp(varsel_mtcars)

# Plot the gg_minimal_vimp object
plot(gg_dta)

## End(Not run)
## ------------------------------------------------------------
## Survival example
## ------------------------------------------------------------
## Not run: 
## -------- veteran data
## randomized trial of two treatment regimens for lung cancer
data(veteran, package = "randomForestSRC")
rfsrc_veteran &lt;- rfsrc(Surv(time, status) ~ ., data = veteran, 
                        ntree = 100)
varsel_veteran &lt;- randomForestSRC::var.select(rfsrc_veteran)

gg_dta &lt;- gg_minimal_vimp(varsel_veteran)
plot(gg_dta)


## ------------------------------------------------------------
## -------- pbc data
# We need to create this dataset
data(pbc, package = "randomForestSRC") 
# For whatever reason, the age variable is in days... makes no sense to me
for (ind in seq_len(dim(pbc)[2])) {
 if (!is.factor(pbc[, ind])) {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(range(pbc[, ind], na.rm = TRUE) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 } else {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(sort(unique(pbc[, ind])) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
     if (sum(sort(unique(pbc[, ind])) == c(FALSE, TRUE)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 }
 if (!is.logical(pbc[, ind]) &amp;
     length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 5) {
   pbc[, ind] &lt;- factor(pbc[, ind])
 }
}
#Convert age to years
pbc$age &lt;- pbc$age / 364.24

pbc$years &lt;- pbc$days / 364.24
pbc &lt;- pbc[, -which(colnames(pbc) == "days")]
pbc$treatment &lt;- as.numeric(pbc$treatment)
pbc$treatment[which(pbc$treatment == 1)] &lt;- "DPCA"
pbc$treatment[which(pbc$treatment == 2)] &lt;- "placebo"
pbc$treatment &lt;- factor(pbc$treatment)
dta_train &lt;- pbc[-which(is.na(pbc$treatment)), ]
# Create a test set from the remaining patients
pbc_test &lt;- pbc[which(is.na(pbc$treatment)), ]

#========
# build the forest:
rfsrc_pbc &lt;- randomForestSRC::rfsrc(
  Surv(years, status) ~ .,
 dta_train,
 nsplit = 10,
 na.action = "na.impute",
 forest = TRUE,
 importance = TRUE,
 save.memory = TRUE
)

varsel_pbc &lt;- var.select(rfsrc_pbc)


gg_dta &lt;- gg_minimal_vimp(varsel_pbc)
plot(gg_dta)

## End(Not run)

</code></pre>

<hr>
<h2 id='gg_partial'>Partial variable dependence object</h2><span id='topic+gg_partial'></span><span id='topic+gg_partial_list'></span><span id='topic+gg_partial.rfsrc'></span><span id='topic+gg_partial.randomForest'></span>

<h3>Description</h3>

<p>The <code><a href="randomForestSRC.html#topic+plot.variable">plot.variable</a></code> function
returns a list of either marginal variable dependence or partial variable
dependence data from a <code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object.
The <code>gg_partial</code> function formulates the
<code><a href="randomForestSRC.html#topic+plot.variable">plot.variable</a></code> output for partial plots
(where <code>partial=TRUE</code>) into a data object for creation of partial
dependence plots using the <code><a href="#topic+plot.gg_partial">plot.gg_partial</a></code> function.
</p>
<p>Partial variable dependence plots are the risk adjusted estimates of the
specified response as a function of a single covariate, possibly subsetted
on other covariates.
</p>
<p>An option <code>named</code> argument can name a column for merging multiple
plots together
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gg_partial(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gg_partial_+3A_object">object</code></td>
<td>
<p>the partial variable dependence data object from
<code><a href="randomForestSRC.html#topic+plot.variable">plot.variable</a></code> function</p>
</td></tr>
<tr><td><code id="gg_partial_+3A_...">...</code></td>
<td>
<p>optional arguments</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>gg_partial</code> object. A <code>data.frame</code> or <code>list</code> of
<code>data.frames</code> corresponding the variables
contained within the <code><a href="randomForestSRC.html#topic+plot.variable">plot.variable</a></code> output.
</p>


<h3>References</h3>

<p>Friedman, Jerome H. 2000. &quot;Greedy Function Approximation: A Gradient
Boosting Machine.&quot; Annals of Statistics 29: 1189-1232.&quot;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot.gg_partial">plot.gg_partial</a></code>
</p>
<p><code><a href="randomForestSRC.html#topic+plot.variable">plot.variable</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## ------------------------------------------------------------
## classification
## ------------------------------------------------------------
## -------- iris data
## iris "Petal.Width" partial dependence plot
##
rfsrc_iris &lt;- rfsrc(Species ~., data = iris)
partial_iris &lt;- plot.variable(rfsrc_iris, 
                              xvar.names = "Petal.Width",
                              partial=TRUE)

gg_dta &lt;- gg_partial(partial_iris)
plot(gg_dta)

## ------------------------------------------------------------
## regression
## ------------------------------------------------------------
## Not run: 
## -------- air quality data
## airquality "Wind" partial dependence plot
##
rfsrc_airq &lt;- rfsrc(Ozone ~ ., data = airquality)
partial_airq &lt;- plot.variable(rfsrc_airq, 
                              xvar.names = "Wind",
                             partial=TRUE, show.plot=FALSE)

gg_dta &lt;- gg_partial(partial_airq)
plot(gg_dta)


## End(Not run)
## Not run: 
## -------- Boston data
data(Boston, package = "MASS")
Boston$chas &lt;- as.logical(Boston$chas)
rfsrc_boston &lt;- rfsrc(medv ~ .,
   data = Boston,
   forest = TRUE,
   importance = TRUE,
   tree.err = TRUE,
   save.memory = TRUE)
   
varsel_boston &lt;- var.select(rfsrc_boston)

partial_boston &lt;- plot.variable(rfsrc_boston, 
  xvar.names = varsel_boston$topvars,
  sorted = FALSE,
  partial = TRUE, 
  show.plots = FALSE)
gg_dta &lt;- gg_partial(partial_boston)
plot(gg_dta, panel=TRUE)

## End(Not run)
## Not run: 
## -------- mtcars data
rfsrc_mtcars &lt;- rfsrc(mpg ~ ., data = mtcars)
varsel_mtcars &lt;- var.select(rfsrc_mtcars)

partial_mtcars &lt;- plot.variable(rfsrc_mtcars, 
  xvar.names = varsel_mtcars$topvars,
  sorted = FALSE,
  partial = TRUE, 
  show.plots = FALSE)

gg_dta &lt;- gg_partial(partial_mtcars)

gg_dta.cat &lt;- gg_dta
gg_dta.cat[["disp"]] &lt;- gg_dta.cat[["wt"]] &lt;- gg_dta.cat[["hp"]] &lt;- NULL
gg_dta.cat[["drat"]] &lt;- gg_dta.cat[["carb"]] &lt;- gg_dta.cat[["qsec"]] &lt;- NULL

plot(gg_dta.cat, panel=TRUE, notch=TRUE)

gg_dta[["cyl"]] &lt;- gg_dta[["vs"]] &lt;- gg_dta[["am"]] &lt;- NULL
gg_dta[["gear"]] &lt;- NULL
plot(gg_dta, panel=TRUE)

## End(Not run)

## ------------------------------------------------------------
## survival examples
## ------------------------------------------------------------
## Not run: 
## -------- veteran data
## survival "age" partial variable dependence plot
##
 data(veteran, package = "randomForestSRC")
 rfsrc_veteran &lt;- rfsrc(Surv(time,status)~., veteran, nsplit = 10,
     ntree = 100)

varsel_rfsrc &lt;- var.select(rfsrc_veteran)

## 30 day partial plot for age
partial_veteran &lt;- plot.variable(rfsrc_veteran, surv.type = "surv",
                               partial = TRUE, time=30,
                               show.plots=FALSE)

gg_dta &lt;- gg_partial(partial_veteran)
plot(gg_dta, panel=TRUE)

gg_dta.cat &lt;- gg_dta
gg_dta[["celltype"]] &lt;- gg_dta[["trt"]] &lt;- gg_dta[["prior"]] &lt;- NULL
plot(gg_dta, panel=TRUE)

gg_dta.cat[["karno"]] &lt;- gg_dta.cat[["diagtime"]] &lt;-
    gg_dta.cat[["age"]] &lt;- NULL
plot(gg_dta.cat, panel=TRUE, notch=TRUE)

gg_dta &lt;- lapply(partial_veteran, gg_partial)
gg_dta &lt;- combine.gg_partial(gg_dta[[1]], gg_dta[[2]] )

plot(gg_dta[["karno"]])
plot(gg_dta[["celltype"]])

gg_dta.cat &lt;- gg_dta
gg_dta[["celltype"]] &lt;- gg_dta[["trt"]] &lt;- gg_dta[["prior"]] &lt;- NULL
plot(gg_dta, panel=TRUE)

gg_dta.cat[["karno"]] &lt;- gg_dta.cat[["diagtime"]] &lt;-
    gg_dta.cat[["age"]] &lt;- NULL
plot(gg_dta.cat, panel=TRUE, notch=TRUE)

## ------------------------------------------------------------
## -------- pbc data
# We need to create this dataset
data(pbc, package = "randomForestSRC",) 
# For whatever reason, the age variable is in days... makes no sense to me
for (ind in seq_len(dim(pbc)[2])) {
 if (!is.factor(pbc[, ind])) {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(range(pbc[, ind], na.rm = TRUE) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 } else {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(sort(unique(pbc[, ind])) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
     if (sum(sort(unique(pbc[, ind])) == c(FALSE, TRUE)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 }
 if (!is.logical(pbc[, ind]) &amp;
     length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 5) {
   pbc[, ind] &lt;- factor(pbc[, ind])
 }
}
#Convert age to years
pbc$age &lt;- pbc$age / 364.24

pbc$years &lt;- pbc$days / 364.24
pbc &lt;- pbc[, -which(colnames(pbc) == "days")]
pbc$treatment &lt;- as.numeric(pbc$treatment)
pbc$treatment[which(pbc$treatment == 1)] &lt;- "DPCA"
pbc$treatment[which(pbc$treatment == 2)] &lt;- "placebo"
pbc$treatment &lt;- factor(pbc$treatment)
dta_train &lt;- pbc[-which(is.na(pbc$treatment)), ]
# Create a test set from the remaining patients
 pbc_test &lt;- pbc[which(is.na(pbc$treatment)), ]

#========
# build the forest:
rfsrc_pbc &lt;- randomForestSRC::rfsrc(
  Surv(years, status) ~ .,
 dta_train,
 nsplit = 10,
 na.action = "na.impute",
 forest = TRUE,
 importance = TRUE,
 save.memory = TRUE
)

varsel_pbc &lt;- var.select(rfsrc_pbc)

xvar &lt;- varsel_pbc$topvars

# Convert all partial plots to gg_partial objects
gg_dta &lt;- lapply(partial_pbc, gg_partial)

# Combine the objects to get multiple time curves
# along variables on a single figure.
pbc_ggpart &lt;- combine.gg_partial(gg_dta[[1]], gg_dta[[2]],
                                 lbls = c("1 Year", "3 Years"))

summary(pbc_ggpart)
class(pbc_ggpart[["bili"]])

# Plot the highest ranked variable, by name.
#plot(pbc_ggpart[["bili"]])

# Create a temporary holder and remove the stage and edema data
ggpart &lt;- pbc_ggpart
ggpart$edema &lt;- NULL

# Panel plot the remainder.
plot(ggpart, panel = TRUE)

plot(pbc_ggpart[["edema"]])

## End(Not run)
</code></pre>

<hr>
<h2 id='gg_partial_coplot.rfsrc'>Data structures for stratified partial coplots</h2><span id='topic+gg_partial_coplot.rfsrc'></span><span id='topic+gg_partial_coplot'></span>

<h3>Description</h3>

<p>Data structures for stratified partial coplots
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rfsrc'
gg_partial_coplot(
  object,
  xvar,
  groups,
  surv_type = c("mort", "rel.freq", "surv", "years.lost", "cif", "chf"),
  time,
  show_plots = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gg_partial_coplot.rfsrc_+3A_object">object</code></td>
<td>
<p><code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object</p>
</td></tr>
<tr><td><code id="gg_partial_coplot.rfsrc_+3A_xvar">xvar</code></td>
<td>
<p>list of partial plot variables</p>
</td></tr>
<tr><td><code id="gg_partial_coplot.rfsrc_+3A_groups">groups</code></td>
<td>
<p>vector of stratification variable.</p>
</td></tr>
<tr><td><code id="gg_partial_coplot.rfsrc_+3A_surv_type">surv_type</code></td>
<td>
<p>for survival random forests,  c(&quot;mort&quot;, &quot;rel.freq&quot;, &quot;surv&quot;,
&quot;years.lost&quot;, &quot;cif&quot;, &quot;chf&quot;)</p>
</td></tr>
<tr><td><code id="gg_partial_coplot.rfsrc_+3A_time">time</code></td>
<td>
<p>vector of time points for survival random forests partial plots.</p>
</td></tr>
<tr><td><code id="gg_partial_coplot.rfsrc_+3A_show_plots">show_plots</code></td>
<td>
<p>boolean passed to 
<code><a href="randomForestSRC.html#topic+plot.variable">plot.variable</a></code> show.plots argument.</p>
</td></tr>
<tr><td><code id="gg_partial_coplot.rfsrc_+3A_...">...</code></td>
<td>
<p>extra arguments passed to
<code><a href="randomForestSRC.html#topic+plot.variable">plot.variable</a></code> function</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>gg_partial_coplot</code> object. An subclass of a
<code><a href="#topic+gg_partial_list">gg_partial_list</a></code> object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

## ------------------------------------------------------------
## -------- pbc data
# We need to create this dataset
data(pbc, package = "randomForestSRC") 
# For whatever reason, the age variable is in days... makes no sense to me
for (ind in seq_len(dim(pbc)[2])) {
 if (!is.factor(pbc[, ind])) {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(range(pbc[, ind], na.rm = TRUE) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 } else {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(sort(unique(pbc[, ind])) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
     if (sum(sort(unique(pbc[, ind])) == c(FALSE, TRUE)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 }
 if (!is.logical(pbc[, ind]) &amp;
     length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 5) {
   pbc[, ind] &lt;- factor(pbc[, ind])
 }
}
#Convert age to years
pbc$age &lt;- pbc$age / 364.24

pbc$years &lt;- pbc$days / 364.24
pbc &lt;- pbc[, -which(colnames(pbc) == "days")]
pbc$treatment &lt;- as.numeric(pbc$treatment)
pbc$treatment[which(pbc$treatment == 1)] &lt;- "DPCA"
pbc$treatment[which(pbc$treatment == 2)] &lt;- "placebo"
pbc$treatment &lt;- factor(pbc$treatment)
dta_train &lt;- pbc[-which(is.na(pbc$treatment)), ]
# Create a test set from the remaining patients
 pbc_test &lt;- pbc[which(is.na(pbc$treatment)), ]

#========
# build the forest:
rfsrc_pbc &lt;- randomForestSRC::rfsrc(
  Surv(years, status) ~ .,
 dta_train,
 nsplit = 10,
 na.action = "na.impute",
 forest = TRUE,
 importance = TRUE,
 save.memory = TRUE
)
# Create the variable plot.
ggvar &lt;- gg_variable(rfsrc_pbc, time = 1)

# Find intervals with similar number of observations.
copper_cts &lt;- quantile_pts(ggvar$copper, groups = 6, intervals = TRUE)

# Create the conditional groups and add to the gg_variable object
copper_grp &lt;- cut(ggvar$copper, breaks = copper_cts)

## We would run this, but it's expensive
partial_coplot_pbc &lt;- gg_partial_coplot(rfsrc_pbc, xvar = "bili",
                                         groups = copper_grp,
                                         surv_type = "surv",
                                         time = 1,
                                         show.plots = FALSE)

# Partial coplot
plot(partial_coplot_pbc) #, se = FALSE)

## End(Not run)

</code></pre>

<hr>
<h2 id='gg_rfsrc.rfsrc'>Predicted response data object</h2><span id='topic+gg_rfsrc.rfsrc'></span><span id='topic+gg_rfsrc'></span>

<h3>Description</h3>

<p>Extracts the predicted response values from the
<code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object, and formats data for plotting
the response using <code><a href="#topic+plot.gg_rfsrc">plot.gg_rfsrc</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rfsrc'
gg_rfsrc(object, oob = TRUE, by, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gg_rfsrc.rfsrc_+3A_object">object</code></td>
<td>
<p><code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object</p>
</td></tr>
<tr><td><code id="gg_rfsrc.rfsrc_+3A_oob">oob</code></td>
<td>
<p>boolean, should we return the oob prediction , or the full
forest prediction.</p>
</td></tr>
<tr><td><code id="gg_rfsrc.rfsrc_+3A_by">by</code></td>
<td>
<p>stratifying variable in the training dataset, defaults to NULL</p>
</td></tr>
<tr><td><code id="gg_rfsrc.rfsrc_+3A_...">...</code></td>
<td>
<p>extra arguments</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>surv_type</code> (&quot;surv&quot;, &quot;chf&quot;, &quot;mortality&quot;, &quot;hazard&quot;) for survival
forests
</p>
<p><code>oob</code> boolean, should we return the oob prediction , or the full
forest prediction.
</p>


<h3>Value</h3>

<p><code>gg_rfsrc</code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot.gg_rfsrc">plot.gg_rfsrc</a></code> <code>rfsrc</code> <code>plot.rfsrc</code>
<code><a href="#topic+gg_survival">gg_survival</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## ------------------------------------------------------------
## classification example
## ------------------------------------------------------------
## -------- iris data
rfsrc_iris &lt;- rfsrc(Species ~ ., data = iris)
gg_dta&lt;- gg_rfsrc(rfsrc_iris)

plot(gg_dta)

## ------------------------------------------------------------
## Regression example
## ------------------------------------------------------------
## Not run: 
## -------- air quality data
rfsrc_airq &lt;- rfsrc(Ozone ~ ., data = airquality, na.action = "na.impute")
gg_dta&lt;- gg_rfsrc(rfsrc_airq)

plot(gg_dta)

## End(Not run)

## -------- Boston data
data(Boston, package = "MASS")
Boston$chas &lt;- as.logical(Boston$chas)
rfsrc_boston &lt;- rfsrc(medv ~ .,
   data = Boston,
   forest = TRUE,
   importance = TRUE,
   tree.err = TRUE,
   save.memory = TRUE)

plot(gg_rfsrc(rfsrc_boston))

### randomForest example
data(Boston, package="MASS")
rf_boston &lt;- randomForest::randomForest(medv ~ ., data = Boston)
plot(gg_rfsrc(rf_boston))

## Not run: 
## -------- mtcars data
rfsrc_mtcars &lt;- rfsrc(mpg ~ ., data = mtcars)
gg_dta&lt;- gg_rfsrc(rfsrc_mtcars)

plot(gg_dta)

## End(Not run)
## ------------------------------------------------------------
## Survival example
## ------------------------------------------------------------
## Not run: 
## -------- veteran data
## randomized trial of two treatment regimens for lung cancer
data(veteran, package = "randomForestSRC")
rfsrc_veteran &lt;- rfsrc(Surv(time, status) ~ ., data = veteran, ntree = 100)

gg_dta &lt;- gg_rfsrc(rfsrc_veteran)
plot(gg_dta)

gg_dta &lt;- gg_rfsrc(rfsrc_veteran, conf.int=.95)
plot(gg_dta)

gg_dta &lt;- gg_rfsrc(rfsrc_veteran, by="trt")
plot(gg_dta)


## -------- pbc data
## We don't run this because of bootstrap confidence limits
# We need to create this dataset
data(pbc, package = "randomForestSRC",) 
# For whatever reason, the age variable is in days... makes no sense to me
for (ind in seq_len(dim(pbc)[2])) {
 if (!is.factor(pbc[, ind])) {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(range(pbc[, ind], na.rm = TRUE) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 } else {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(sort(unique(pbc[, ind])) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
     if (sum(sort(unique(pbc[, ind])) == c(FALSE, TRUE)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 }
 if (!is.logical(pbc[, ind]) &amp;
     length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 5) {
   pbc[, ind] &lt;- factor(pbc[, ind])
 }
}
#Convert age to years
pbc$age &lt;- pbc$age / 364.24

pbc$years &lt;- pbc$days / 364.24
pbc &lt;- pbc[, -which(colnames(pbc) == "days")]
pbc$treatment &lt;- as.numeric(pbc$treatment)
pbc$treatment[which(pbc$treatment == 1)] &lt;- "DPCA"
pbc$treatment[which(pbc$treatment == 2)] &lt;- "placebo"
pbc$treatment &lt;- factor(pbc$treatment)
dta_train &lt;- pbc[-which(is.na(pbc$treatment)), ]
# Create a test set from the remaining patients
 pbc_test &lt;- pbc[which(is.na(pbc$treatment)), ]

#========
# build the forest:
rfsrc_pbc &lt;- randomForestSRC::rfsrc(
  Surv(years, status) ~ .,
 dta_train,
 nsplit = 10,
 na.action = "na.impute",
 forest = TRUE,
 importance = TRUE,
 save.memory = TRUE
)
gg_dta &lt;- gg_rfsrc(rfsrc_pbc)
plot(gg_dta)

gg_dta &lt;- gg_rfsrc(rfsrc_pbc, conf.int=.95)
plot(gg_dta)


gg_dta &lt;- gg_rfsrc(rfsrc_pbc, by="treatment")
plot(gg_dta)

## End(Not run)

</code></pre>

<hr>
<h2 id='gg_roc.rfsrc'>ROC (Receiver operator curve) data from a classification random forest.</h2><span id='topic+gg_roc.rfsrc'></span><span id='topic+gg_roc'></span><span id='topic+gg_roc.randomForest'></span>

<h3>Description</h3>

<p>The sensitivity and specificity of a randomForest classification object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rfsrc'
gg_roc(object, which_outcome, oob, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gg_roc.rfsrc_+3A_object">object</code></td>
<td>
<p>an <code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> classification object</p>
</td></tr>
<tr><td><code id="gg_roc.rfsrc_+3A_which_outcome">which_outcome</code></td>
<td>
<p>select the classification outcome of interest.</p>
</td></tr>
<tr><td><code id="gg_roc.rfsrc_+3A_oob">oob</code></td>
<td>
<p>use oob estimates (default TRUE)</p>
</td></tr>
<tr><td><code id="gg_roc.rfsrc_+3A_...">...</code></td>
<td>
<p>extra arguments (not used)</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>gg_roc</code> <code>data.frame</code> for plotting ROC curves.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot.gg_roc">plot.gg_roc</a></code> <code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code>
<code><a href="randomForest.html#topic+randomForest">randomForest</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## ------------------------------------------------------------
## classification example
## ------------------------------------------------------------
## -------- iris data
rfsrc_iris &lt;- rfsrc(Species ~ ., data = iris)

# ROC for setosa
gg_dta &lt;- gg_roc(rfsrc_iris, which_outcome=1)
plot(gg_dta)

# ROC for versicolor
gg_dta &lt;- gg_roc(rfsrc_iris, which_outcome=2)
plot(gg_dta)

# ROC for virginica
gg_dta &lt;- gg_roc(rfsrc_iris, which_outcome=3)
plot(gg_dta)

## -------- iris data
rf_iris &lt;- randomForest::randomForest(Species ~ ., data = iris)

# ROC for setosa
gg_dta &lt;- gg_roc(rf_iris, which_outcome=1)
plot(gg_dta)

# ROC for versicolor
gg_dta &lt;- gg_roc(rf_iris, which_outcome=2)
plot(gg_dta)

# ROC for virginica
gg_dta &lt;- gg_roc(rf_iris, which_outcome=3)
plot(gg_dta)


</code></pre>

<hr>
<h2 id='gg_survival'>Nonparametric survival estimates.</h2><span id='topic+gg_survival'></span>

<h3>Description</h3>

<p>Nonparametric survival estimates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gg_survival(
  interval = NULL,
  censor = NULL,
  by = NULL,
  data,
  type = c("kaplan", "nelson"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gg_survival_+3A_interval">interval</code></td>
<td>
<p>name of the interval variable in the training dataset.</p>
</td></tr>
<tr><td><code id="gg_survival_+3A_censor">censor</code></td>
<td>
<p>name of the censoring variable in the training dataset.</p>
</td></tr>
<tr><td><code id="gg_survival_+3A_by">by</code></td>
<td>
<p>stratifying variable in the training dataset, defaults to NULL</p>
</td></tr>
<tr><td><code id="gg_survival_+3A_data">data</code></td>
<td>
<p>name of the training data.frame</p>
</td></tr>
<tr><td><code id="gg_survival_+3A_type">type</code></td>
<td>
<p>one of (&quot;kaplan&quot;,&quot;nelson&quot;), defaults to Kaplan-Meier</p>
</td></tr>
<tr><td><code id="gg_survival_+3A_...">...</code></td>
<td>
<p>extra arguments passed to Kaplan or Nelson functions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>gg_survival</code> is a wrapper function for generating 
nonparametric survival estimates using either <code><a href="#topic+nelson">nelson</a></code>-Aalen 
or <code><a href="#topic+kaplan">kaplan</a></code>-Meier estimates.
</p>


<h3>Value</h3>

<p>A <code>gg_survival</code> object created using the non-parametric 
Kaplan-Meier or Nelson-Aalen estimators.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+kaplan">kaplan</a></code> <code><a href="#topic+nelson">nelson</a></code>
</p>
<p><code><a href="#topic+plot.gg_survival">plot.gg_survival</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## -------- pbc data
data(pbc, package="randomForestSRC")
pbc$time &lt;- pbc$days/364.25

# This is the same as kaplan
gg_dta &lt;- gg_survival(interval="time", censor="status",
                     data=pbc)

plot(gg_dta, error="none")
plot(gg_dta)

# Stratified on treatment variable.
gg_dta &lt;- gg_survival(interval="time", censor="status",
                     data=pbc, by="treatment")

plot(gg_dta, error="none")
plot(gg_dta)

# ...with smaller confidence limits.
gg_dta &lt;- gg_survival(interval="time", censor="status",
                     data=pbc, by="treatment", conf.int=.68)

plot(gg_dta, error="lines")

## End(Not run)
</code></pre>

<hr>
<h2 id='gg_variable'>Marginal variable dependence data object.</h2><span id='topic+gg_variable'></span><span id='topic+gg_variable.rfsrc'></span><span id='topic+gg_variable.randomForest'></span><span id='topic+gg_variable.random'></span>

<h3>Description</h3>

<p><code><a href="randomForestSRC.html#topic+plot.variable">plot.variable</a></code> generates a
<code>data.frame</code> containing the marginal variable dependence or the
partial variable dependence. The <code>gg_variable</code> function creates a
<code>data.frame</code> of containing the full set of covariate data (predictor
variables) and the predicted response for each observation. Marginal
dependence figures are created using the <code><a href="#topic+plot.gg_variable">plot.gg_variable</a></code>
function.
</p>
<p>Optional arguments <code>time</code> point (or vector of points) of interest
(for survival forests only) <code>time_labels</code> If more than one time is
specified, a vector of time labels for differentiating the time points
(for survival forests only) <code>oob</code> indicate if predicted results
should include oob or full data set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gg_variable(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gg_variable_+3A_object">object</code></td>
<td>
<p>a <code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object</p>
</td></tr>
<tr><td><code id="gg_variable_+3A_...">...</code></td>
<td>
<p>optional arguments</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The marginal variable dependence is determined by comparing
relation between the predicted response from the randomForest and a
covariate of interest.
</p>
<p>The <code>gg_variable</code> function operates on a
<code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object, or the output from the
<code><a href="randomForestSRC.html#topic+plot.variable">plot.variable</a></code> function.
</p>


<h3>Value</h3>

<p><code>gg_variable</code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot.gg_variable">plot.gg_variable</a></code>
</p>
<p><code><a href="randomForestSRC.html#topic+plot.variable">plot.variable</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## ------------------------------------------------------------
## classification
## ------------------------------------------------------------
## -------- iris data
## iris
rfsrc_iris &lt;- rfsrc(Species ~., data = iris)

gg_dta &lt;- gg_variable(rfsrc_iris)
plot(gg_dta, xvar="Sepal.Width")
plot(gg_dta, xvar="Sepal.Length")

plot(gg_dta, xvar=rfsrc_iris$xvar.names,
     panel=TRUE) # , se=FALSE)

## ------------------------------------------------------------
## regression
## ------------------------------------------------------------
## Not run: 
## -------- air quality data
rfsrc_airq &lt;- rfsrc(Ozone ~ ., data = airquality)
gg_dta &lt;- gg_variable(rfsrc_airq)

# an ordinal variable
gg_dta[,"Month"] &lt;- factor(gg_dta[,"Month"])

plot(gg_dta, xvar="Wind")
plot(gg_dta, xvar="Temp")
plot(gg_dta, xvar="Solar.R")


plot(gg_dta, xvar=c("Solar.R", "Wind", "Temp", "Day"), panel=TRUE)

plot(gg_dta, xvar="Month", notch=TRUE)

## End(Not run)
## Not run: 
## -------- motor trend cars data
rfsrc_mtcars &lt;- rfsrc(mpg ~ ., data = mtcars)

gg_dta &lt;- gg_variable(rfsrc_mtcars)

# mtcars$cyl is an ordinal variable
gg_dta$cyl &lt;- factor(gg_dta$cyl)
gg_dta$am &lt;- factor(gg_dta$am)
gg_dta$vs &lt;- factor(gg_dta$vs)
gg_dta$gear &lt;- factor(gg_dta$gear)
gg_dta$carb &lt;- factor(gg_dta$carb)

plot(gg_dta, xvar="cyl")

# Others are continuous
plot(gg_dta, xvar="disp")
plot(gg_dta, xvar="hp")
plot(gg_dta, xvar="wt")

# panels
plot(gg_dta,xvar=c("disp","hp", "drat", "wt", "qsec"),  panel=TRUE)
plot(gg_dta, xvar=c("cyl", "vs", "am", "gear", "carb"), panel=TRUE,
     notch=TRUE)

## End(Not run)
## -------- Boston data
data(Boston, package="MASS")

rf_boston &lt;- randomForest::randomForest(medv~., data=Boston)
gg_dta &lt;- gg_variable(rf_boston)
plot(gg_dta)
plot(gg_dta, panel = TRUE)
## ------------------------------------------------------------
## survival examples
## ------------------------------------------------------------
## Not run: 
## -------- veteran data
## survival
data(veteran, package = "randomForestSRC")
rfsrc_veteran &lt;- rfsrc(Surv(time,status)~., veteran, nsplit = 10,
                        ntree = 100)
                        
# get the 1 year survival time.
gg_dta &lt;- gg_variable(rfsrc_veteran, time=90)

# Generate variable dependence plots for age and diagtime
plot(gg_dta, xvar = "age")
plot(gg_dta, xvar = "diagtime", )

# Generate coplots
plot(gg_dta, xvar = c("age", "diagtime"), panel=TRUE, se=FALSE)

# If we want to compare survival at different time points, say 30, 90 day
# and 1 year
gg_dta &lt;- gg_variable(rfsrc_veteran, time=c(30, 90, 365))

# Generate variable dependence plots for age and diagtime
plot(gg_dta, xvar = "age")

## End(Not run)
## Not run: 
## -------- pbc data
## We don't run this because of bootstrap confidence limits
# We need to create this dataset
data(pbc, package = "randomForestSRC",) 
# For whatever reason, the age variable is in days... makes no sense to me
for (ind in seq_len(dim(pbc)[2])) {
 if (!is.factor(pbc[, ind])) {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(range(pbc[, ind], na.rm = TRUE) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 } else {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(sort(unique(pbc[, ind])) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
     if (sum(sort(unique(pbc[, ind])) == c(FALSE, TRUE)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 }
 if (!is.logical(pbc[, ind]) &amp;
     length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 5) {
   pbc[, ind] &lt;- factor(pbc[, ind])
 }
}
#Convert age to years
pbc$age &lt;- pbc$age / 364.24

pbc$years &lt;- pbc$days / 364.24
pbc &lt;- pbc[, -which(colnames(pbc) == "days")]
pbc$treatment &lt;- as.numeric(pbc$treatment)
pbc$treatment[which(pbc$treatment == 1)] &lt;- "DPCA"
pbc$treatment[which(pbc$treatment == 2)] &lt;- "placebo"
pbc$treatment &lt;- factor(pbc$treatment)
dta_train &lt;- pbc[-which(is.na(pbc$treatment)), ]
# Create a test set from the remaining patients
 pbc_test &lt;- pbc[which(is.na(pbc$treatment)), ]

#========
# build the forest:
rfsrc_pbc &lt;- randomForestSRC::rfsrc(
  Surv(years, status) ~ .,
 dta_train,
 nsplit = 10,
 na.action = "na.impute",
 forest = TRUE,
 importance = TRUE,
 save.memory = TRUE
)

gg_dta &lt;- gg_variable(rfsrc_pbc, time=c(.5, 1, 3))
plot(gg_dta, xvar = "age")
plot(gg_dta, xvar = "trig")

# Generate coplots
plot(gg_dta, xvar = c("age", "trig"), panel=TRUE, se=FALSE)


## End(Not run)

</code></pre>

<hr>
<h2 id='gg_vimp'>Variable Importance (VIMP) data object</h2><span id='topic+gg_vimp'></span><span id='topic+gg_vimp.rfsrc'></span><span id='topic+gg_vimp.randomForest'></span><span id='topic+gg_vimp.randomForest.formula'></span>

<h3>Description</h3>

<p><code>gg_vimp</code> Extracts the variable importance (VIMP) information from a
a <code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gg_vimp(object, nvar, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gg_vimp_+3A_object">object</code></td>
<td>
<p>A <code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object or output from
<code><a href="randomForestSRC.html#topic+vimp">vimp</a></code></p>
</td></tr>
<tr><td><code id="gg_vimp_+3A_nvar">nvar</code></td>
<td>
<p>argument to control the number of variables included in the
output.</p>
</td></tr>
<tr><td><code id="gg_vimp_+3A_...">...</code></td>
<td>
<p>arguments passed to the <code><a href="randomForestSRC.html#topic+vimp.rfsrc">vimp.rfsrc</a></code>
function if the <code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object does not contain
importance information.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>gg_vimp</code> object. A <code>data.frame</code> of VIMP measures, in rank
order.
</p>


<h3>References</h3>

<p>Ishwaran H. (2007). Variable importance in binary regression trees and
forests, <em>Electronic J. Statist.</em>, 1:519-537.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot.gg_vimp">plot.gg_vimp</a></code> <code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code>
</p>
<p><code><a href="randomForestSRC.html#topic+vimp">vimp</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## ------------------------------------------------------------
## classification example
## ------------------------------------------------------------
## -------- iris data
rfsrc_iris &lt;- rfsrc(Species ~ ., data = iris,
                    importance = TRUE)
gg_dta &lt;- gg_vimp(rfsrc_iris)
plot(gg_dta)

## ------------------------------------------------------------
## regression example
## ------------------------------------------------------------
## Not run: 
## -------- air quality data
rfsrc_airq &lt;- rfsrc(Ozone ~ ., airquality,
                    importance = TRUE)
gg_dta &lt;- gg_vimp(rfsrc_airq)
plot(gg_dta)

## End(Not run)

## -------- Boston data
data(Boston, package="MASS")
rfsrc_boston &lt;- randomForestSRC::rfsrc(medv~., Boston,
                                       importance = TRUE)
gg_dta &lt;- gg_vimp(rfsrc_boston)
plot(gg_dta)

## -------- Boston data
rf_boston &lt;- randomForest::randomForest(medv~., Boston)
gg_dta &lt;- gg_vimp(rf_boston)
plot(gg_dta)

## Not run: 
## -------- mtcars data
rfsrc_mtcars &lt;- rfsrc(mpg ~ ., data = mtcars,
                      importance = TRUE)
gg_dta &lt;- gg_vimp(rfsrc_mtcars)
plot(gg_dta)

## End(Not run)
## ------------------------------------------------------------
## survival example
## ------------------------------------------------------------
## Not run: 
## -------- veteran data
data(veteran, package = "randomForestSRC")
rfsrc_veteran &lt;- rfsrc(Surv(time, status) ~ ., 
   data = veteran, 
   ntree = 100,
   importance = TRUE)

gg_dta &lt;- gg_vimp(rfsrc_veteran)
plot(gg_dta)

## -------- pbc data
# We need to create this dataset
data(pbc, package = "randomForestSRC",) 
# For whatever reason, the age variable is in days... 
# makes no sense to me
for (ind in seq_len(dim(pbc)[2])) {
 if (!is.factor(pbc[, ind])) {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(range(pbc[, ind], na.rm = TRUE) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 } else {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(sort(unique(pbc[, ind])) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
     if (sum(sort(unique(pbc[, ind])) == c(FALSE, TRUE)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 }
 if (!is.logical(pbc[, ind]) &amp;
     length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 5) {
   pbc[, ind] &lt;- factor(pbc[, ind])
 }
}
#Convert age to years
pbc$age &lt;- pbc$age / 364.24

pbc$years &lt;- pbc$days / 364.24
pbc &lt;- pbc[, -which(colnames(pbc) == "days")]
pbc$treatment &lt;- as.numeric(pbc$treatment)
pbc$treatment[which(pbc$treatment == 1)] &lt;- "DPCA"
pbc$treatment[which(pbc$treatment == 2)] &lt;- "placebo"
pbc$treatment &lt;- factor(pbc$treatment)
dta_train &lt;- pbc[-which(is.na(pbc$treatment)), ]
# Create a test set from the remaining patients
pbc_test &lt;- pbc[which(is.na(pbc$treatment)), ]

#========
# build the forest:
rfsrc_pbc &lt;- randomForestSRC::rfsrc(
  Surv(years, status) ~ .,
 dta_train,
 nsplit = 10,
 na.action = "na.impute",
 forest = TRUE,
 importance = TRUE,
 save.memory = TRUE
)

gg_dta &lt;- gg_vimp(rfsrc_pbc)
plot(gg_dta)

# Restrict to only the top 10.
gg_dta &lt;- gg_vimp(rfsrc_pbc, nvar=10)
plot(gg_dta)

## End(Not run)
</code></pre>

<hr>
<h2 id='ggRandomForests-package'>ggRandomForests: Visually Exploring Random Forests</h2><span id='topic+ggRandomForests-package'></span>

<h3>Description</h3>

<p><code>ggRandomForests</code> is a utility package for 
<code>randomForestSRC</code> (Ishwaran et.al. 2014, 2008, 2007) for survival, 
regression and classification forests and uses the <code>ggplot2</code> 
(Wickham 2009) package for plotting results. <code>ggRandomForests</code> is 
structured to extract data objects from the random forest and provides S3 
functions for printing and plotting these objects.
</p>
<p>The <code>randomForestSRC</code> package provides a unified treatment of 
Breiman's (2001) random forests for a variety of data settings. Regression 
and classification forests are grown when the response is numeric or 
categorical (factor) while survival and competing risk forests 
(Ishwaran et al. 2008, 2012) are grown for right-censored survival data.
</p>
<p>Many of the figures created by the <code>ggRandomForests</code> package are also 
available directly from within the <code>randomForestSRC</code> package. However, 
<code>ggRandomForests</code> offers the following advantages:
</p>

<ul>
<li><p> Separation of data and figures: <code>ggRandomForest</code> contains 
functions that operate on either the <code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> 
forest object directly, or on the output from <code>randomForestSRC</code> post 
processing functions (i.e. <code>plot.variable</code>, <code>var.select</code>, 
<code>find.interaction</code>) to generate intermediate <code>ggRandomForests</code> 
data objects. S3 functions are provide to further process these objects and 
plot results using the <code>ggplot2</code> graphics package. Alternatively, 
users can use these data objects for additional custom plotting or 
analysis operations.
</p>
</li>
<li><p> Each data object/figure is a single, self contained object. This 
allows simple modification and manipulation of the data or <code>ggplot2</code> 
objects to meet users specific needs and requirements. 
</p>
</li>
<li><p> The use of <code>ggplot2</code> for plotting. We chose to use the 
<code>ggplot2</code> package for our figures to allow users flexibility in 
modifying the figures to their liking. Each S3 plot function returns either
a single <code>ggplot2</code> object, or a <code>list</code> of <code>ggplot2</code> objects, 
allowing users to use additional <code>ggplot2</code> functions or themes to 
modify and customize the figures to their liking. 
</p>
</li></ul>

<p>The <code>ggRandomForests</code> package contains the following data functions:
</p>

<ul>
<li> <p><code><a href="#topic+gg_rfsrc">gg_rfsrc</a></code>: randomForest[SRC] predictions.
</p>
</li>
<li> <p><code><a href="#topic+gg_error">gg_error</a></code>: randomForest[SRC] convergence rate based on 
the OOB error rate.
</p>
</li>
<li> <p><code><a href="#topic+gg_roc">gg_roc</a></code>: ROC curves for randomForest classification 
models.
</p>
</li>
<li> <p><code><a href="#topic+gg_vimp">gg_vimp</a></code>: Variable Importance ranking for variable 
selection.
</p>
</li>
<li> <p><code><a href="#topic+gg_minimal_depth">gg_minimal_depth</a></code>: Minimal Depth ranking for variable 
selection 
(Ishwaran et.al. 2010).
</p>
</li>
<li> <p><code><a href="#topic+gg_minimal_vimp">gg_minimal_vimp</a></code>: Comparing Minimal Depth and VIMP 
rankings for variable selection.
</p>
</li>
<li> <p><code><a href="#topic+gg_interaction">gg_interaction</a></code>: Minimal Depth interaction detection 
(Ishwaran et.al. 2010)
</p>
</li>
<li> <p><code><a href="#topic+gg_variable">gg_variable</a></code>: Marginal variable dependence.
</p>
</li>
<li> <p><code><a href="#topic+gg_partial">gg_partial</a></code>: Partial (risk adjusted) variable 
dependence.
</p>
</li>
<li> <p><code><a href="#topic+gg_partial_coplot">gg_partial_coplot</a></code>: Partial variable conditional 
dependence (computationally expensive).
</p>
</li>
<li> <p><code><a href="#topic+gg_survival">gg_survival</a></code>: Kaplan-Meier/Nelson-Aalen hazard analysis.  
</p>
</li></ul>

<p>Each of these data functions has an associated S3 plot function that 
returns <code>ggplot2</code> objects, either individually or as a list, which can 
be further customized using standard <code>ggplot2</code> commands.
</p>


<h3>References</h3>

<p>Breiman, L. (2001). Random forests, Machine Learning, 45:5-32.
</p>
<p>Ishwaran H. and Kogalur U.B. (2014). Random Forests for Survival,
Regression and Classification (RF-SRC), R package version 1.5.5.12.
</p>
<p>Ishwaran H. and Kogalur U.B. (2007). Random survival forests for R. R News
7(2), 25&ndash;31.
</p>
<p>Ishwaran H., Kogalur U.B., Blackstone E.H. and Lauer M.S. (2008). Random
survival forests. Ann. Appl. Statist. 2(3), 841&ndash;860.
</p>
<p>Ishwaran, H., U. B. Kogalur, E. Z. Gorodeski, A. J. Minn, and M. S. Lauer 
(2010). High-dimensional variable selection for survival data. J. Amer. 
Statist. Assoc. 105, 205-217.
</p>
<p>Ishwaran, H. (2007). Variable importance in binary regression trees and 
forests. Electronic J. Statist., 1, 519-537.
</p>
<p>Wickham, H. ggplot2: elegant graphics for data analysis. Springer New York, 
2009.
</p>

<hr>
<h2 id='kaplan'>nonparametric Kaplan-Meier estimates</h2><span id='topic+kaplan'></span>

<h3>Description</h3>

<p>nonparametric Kaplan-Meier estimates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kaplan(interval, censor, data, by = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kaplan_+3A_interval">interval</code></td>
<td>
<p>name of the interval variable in the training dataset.</p>
</td></tr>
<tr><td><code id="kaplan_+3A_censor">censor</code></td>
<td>
<p>name of the censoring variable in the training dataset.</p>
</td></tr>
<tr><td><code id="kaplan_+3A_data">data</code></td>
<td>
<p>name of the training set <code>data.frame</code></p>
</td></tr>
<tr><td><code id="kaplan_+3A_by">by</code></td>
<td>
<p>stratifying variable in the training dataset, defaults to NULL</p>
</td></tr>
<tr><td><code id="kaplan_+3A_...">...</code></td>
<td>
<p>arguments passed to the <code>survfit</code> function</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="#topic+gg_survival">gg_survival</a></code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+gg_survival">gg_survival</a></code> <code><a href="#topic+nelson">nelson</a></code>
<code><a href="#topic+plot.gg_survival">plot.gg_survival</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# These get run through the gg_survival examples.
data(pbc, package="randomForestSRC")
pbc$time &lt;- pbc$days/364.25

# This is the same as gg_survival
gg_dta &lt;- kaplan(interval="time", censor="status",
                     data=pbc)

plot(gg_dta, error="none")
plot(gg_dta)

# Stratified on treatment variable.
gg_dta &lt;- gg_survival(interval="time", censor="status",
                     data=pbc, by="treatment")

plot(gg_dta, error="none")
plot(gg_dta)

## End(Not run)
</code></pre>

<hr>
<h2 id='nelson'>nonparametric Nelson-Aalen estimates</h2><span id='topic+nelson'></span>

<h3>Description</h3>

<p>nonparametric Nelson-Aalen estimates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nelson(interval, censor, data, by = NULL, weight = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nelson_+3A_interval">interval</code></td>
<td>
<p>name of the interval variable in the training dataset.</p>
</td></tr>
<tr><td><code id="nelson_+3A_censor">censor</code></td>
<td>
<p>name of the censoring variable in the training dataset.</p>
</td></tr>
<tr><td><code id="nelson_+3A_data">data</code></td>
<td>
<p>name of the survival training data.frame</p>
</td></tr>
<tr><td><code id="nelson_+3A_by">by</code></td>
<td>
<p>stratifying variable in the training dataset, defaults to NULL</p>
</td></tr>
<tr><td><code id="nelson_+3A_weight">weight</code></td>
<td>
<p>for each observation (default=NULL)</p>
</td></tr>
<tr><td><code id="nelson_+3A_...">...</code></td>
<td>
<p>arguments passed to the <code>survfit</code> function</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="#topic+gg_survival">gg_survival</a></code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+gg_survival">gg_survival</a></code> <code><a href="#topic+nelson">nelson</a></code>
<code><a href="#topic+plot.gg_survival">plot.gg_survival</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# These get run through the gg_survival examples.
data(pbc, package="randomForestSRC")
pbc$time &lt;- pbc$days/364.25

# This is the same as gg_survival
gg_dta &lt;- nelson(interval="time", censor="status",
                     data=pbc)

plot(gg_dta, error="none")
plot(gg_dta)

# Stratified on treatment variable.
gg_dta &lt;- gg_survival(interval="time", censor="status",
                     data=pbc, by="treatment")

plot(gg_dta, error="none")
plot(gg_dta, error="lines")
plot(gg_dta)

gg_dta &lt;- gg_survival(interval="time", censor="status",
                     data=pbc, by="treatment",
                     type="nelson")

plot(gg_dta, error="bars")
plot(gg_dta)


## End(Not run)
</code></pre>

<hr>
<h2 id='plot.gg_error'>Plot a <code><a href="#topic+gg_error">gg_error</a></code> object</h2><span id='topic+plot.gg_error'></span>

<h3>Description</h3>

<p>A plot of the cumulative OOB error rates of the random forest as a
function of number of trees.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'gg_error'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.gg_error_+3A_x">x</code></td>
<td>
<p>gg_error object created from a <code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code>
object</p>
</td></tr>
<tr><td><code id="plot.gg_error_+3A_...">...</code></td>
<td>
<p>extra arguments passed to <code>ggplot</code> functions</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The gg_error plot is used to track the convergence of the
randomForest. This figure is a reproduction of the error plot
from the <code><a href="randomForestSRC.html#topic+plot.rfsrc">plot.rfsrc</a></code> function.
</p>


<h3>Value</h3>

<p><code>ggplot</code> object
</p>


<h3>References</h3>

<p>Breiman L. (2001). Random forests, Machine Learning, 45:5-32.
</p>
<p>Ishwaran H. and Kogalur U.B. (2007). Random survival forests for R, Rnews,
7(2):25-31.
</p>
<p>Ishwaran H. and Kogalur U.B. (2013). Random Forests for Survival, Regression
and Classification (RF-SRC), R package version 1.4.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+gg_error">gg_error</a></code> <code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code>
<code><a href="randomForestSRC.html#topic+plot.rfsrc">plot.rfsrc</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 ## Examples from RFSRC package...
## ------------------------------------------------------------
## classification example
## ------------------------------------------------------------
## ------------- iris data
## You can build a randomForest
rfsrc_iris &lt;- rfsrc(Species ~ ., data = iris, tree.err = TRUE)

# Get a data.frame containing error rates
gg_dta &lt;- gg_error(rfsrc_iris)

# Plot the gg_error object
plot(gg_dta)

## RandomForest example
rf_iris &lt;- randomForest::randomForest(Species ~ ., data = iris, 
                                      tree.err = TRUE, )
gg_dta &lt;- gg_error(rf_iris)
plot(gg_dta)

gg_dta &lt;- gg_error(rf_iris, training=TRUE)
plot(gg_dta)
## ------------------------------------------------------------
## Regression example
## ------------------------------------------------------------
## ------------- airq data
rfsrc_airq &lt;- rfsrc(Ozone ~ ., data = airquality, 
    na.action = "na.impute", tree.err = TRUE, )

# Get a data.frame containing error rates
gg_dta &lt;- gg_error(rfsrc_airq)

# Plot the gg_error object
plot(gg_dta)


## ------------- Boston data
data(Boston, package = "MASS")
Boston$chas &lt;- as.logical(Boston$chas)
rfsrc_boston &lt;- rfsrc(medv ~ .,
   data = Boston,
   forest = TRUE,
   importance = TRUE,
   tree.err = TRUE,
   save.memory = TRUE)

# Get a data.frame containing error rates
gg_dta&lt;- gg_error(rfsrc_boston)

# Plot the gg_error object
plot(gg_dta)

## ------------- mtcars data
rfsrc_mtcars &lt;- rfsrc(mpg ~ ., data = mtcars, tree.err = TRUE)
# Get a data.frame containing error rates
gg_dta&lt;- gg_error(rfsrc_mtcars)

# Plot the gg_error object
plot(gg_dta)


## ------------------------------------------------------------
## Survival example
## ------------------------------------------------------------
## ------------- veteran data
## randomized trial of two treatment regimens for lung cancer
data(veteran, package = "randomForestSRC")
rfsrc_veteran &lt;- rfsrc(Surv(time, status) ~ ., data = veteran,
                       tree.err = TRUE)

gg_dta &lt;- gg_error(rfsrc_veteran)
plot(gg_dta)

## ------------- pbc data
# Load a cached randomForestSRC object
# We need to create this dataset
data(pbc, package = "randomForestSRC",) 
# For whatever reason, the age variable is in days... makes no sense to me
for (ind in seq_len(dim(pbc)[2])) {
 if (!is.factor(pbc[, ind])) {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(range(pbc[, ind], na.rm = TRUE) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 } else {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(sort(unique(pbc[, ind])) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
     if (sum(sort(unique(pbc[, ind])) == c(FALSE, TRUE)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 }
 if (!is.logical(pbc[, ind]) &amp;
     length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 5) {
   pbc[, ind] &lt;- factor(pbc[, ind])
 }
}
#Convert age to years
pbc$age &lt;- pbc$age / 364.24

pbc$years &lt;- pbc$days / 364.24
pbc &lt;- pbc[, -which(colnames(pbc) == "days")]
pbc$treatment &lt;- as.numeric(pbc$treatment)
pbc$treatment[which(pbc$treatment == 1)] &lt;- "DPCA"
pbc$treatment[which(pbc$treatment == 2)] &lt;- "placebo"
pbc$treatment &lt;- factor(pbc$treatment)
dta_train &lt;- pbc[-which(is.na(pbc$treatment)), ]
# Create a test set from the remaining patients
pbc_test &lt;- pbc[which(is.na(pbc$treatment)), ]

#========
# build the forest:
rfsrc_pbc &lt;- randomForestSRC::rfsrc(
  Surv(years, status) ~ .,
 dta_train,
 nsplit = 10,
 na.action = "na.impute",
 tree.err = TRUE, 
 forest = TRUE,
 importance = TRUE,
 save.memory = TRUE
)


gg_dta &lt;- gg_error(rfsrc_pbc)
plot(gg_dta)


## End(Not run)
</code></pre>

<hr>
<h2 id='plot.gg_interaction'>plot.gg_interaction
Plot a <code><a href="#topic+gg_interaction">gg_interaction</a></code> object,</h2><span id='topic+plot.gg_interaction'></span>

<h3>Description</h3>

<p>plot.gg_interaction
Plot a <code><a href="#topic+gg_interaction">gg_interaction</a></code> object,
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'gg_interaction'
plot(x, xvar, lbls, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.gg_interaction_+3A_x">x</code></td>
<td>
<p>gg_interaction object created from a 
<code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object</p>
</td></tr>
<tr><td><code id="plot.gg_interaction_+3A_xvar">xvar</code></td>
<td>
<p>variable (or list of variables) of interest.</p>
</td></tr>
<tr><td><code id="plot.gg_interaction_+3A_lbls">lbls</code></td>
<td>
<p>A vector of alternative variable names.</p>
</td></tr>
<tr><td><code id="plot.gg_interaction_+3A_...">...</code></td>
<td>
<p>arguments passed to the <code><a href="#topic+gg_interaction">gg_interaction</a></code> function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>ggplot</code> object
</p>


<h3>References</h3>

<p>Breiman L. (2001). Random forests, Machine Learning, 45:5-32.
</p>
<p>Ishwaran H. and Kogalur U.B. (2007). Random survival forests for
R, Rnews, 7(2):25-31.
</p>
<p>Ishwaran H. and Kogalur U.B. (2013). Random Forests for Survival,
Regression and Classification (RF-SRC), R package version 1.4.
</p>


<h3>See Also</h3>

<p><code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code>
<code><a href="randomForestSRC.html#topic+find.interaction">find.interaction</a></code>
<code><a href="randomForestSRC.html#topic+max.subtree">max.subtree</a></code> 
<code><a href="randomForestSRC.html#topic+var.select">var.select</a></code>
<code><a href="randomForestSRC.html#topic+vimp">vimp</a></code>
<code><a href="#topic+plot.gg_interaction">plot.gg_interaction</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## Examples from randomForestSRC package...
## ------------------------------------------------------------
## find interactions, classification setting
## ------------------------------------------------------------
## -------- iris data
## iris.obj &lt;- rfsrc(Species ~., data = iris)
## TODO: VIMP interactions not handled yet....
## find.interaction(iris.obj, method = "vimp", nrep = 3)
## interaction_iris &lt;- find.interaction(iris.obj)
data(interaction_iris, package="ggRandomForests")
gg_dta &lt;- gg_interaction(interaction_iris)

plot(gg_dta, xvar="Petal.Width")
plot(gg_dta, xvar="Petal.Length")
plot(gg_dta, panel=TRUE)

## ------------------------------------------------------------
## find interactions, regression setting
## ------------------------------------------------------------
## -------- air quality data
## airq.obj &lt;- rfsrc(Ozone ~ ., data = airquality)
##
## TODO: VIMP interactions not handled yet....
## find.interaction(airq.obj, method = "vimp", nrep = 3)
## interaction_airq &lt;- find.interaction(airq.obj)
data(interaction_airq, package="ggRandomForests")
gg_dta &lt;- gg_interaction(interaction_airq)

plot(gg_dta, xvar="Temp")
plot(gg_dta, xvar="Solar.R")
plot(gg_dta, panel=TRUE)

## -------- Boston data
data(interaction_boston, package="ggRandomForests")
gg_dta &lt;- gg_interaction(interaction_boston)

plot(gg_dta, panel=TRUE)

## -------- mtcars data
data(interaction_mtcars, package="ggRandomForests")
gg_dta &lt;- gg_interaction(interaction_mtcars)

plot(gg_dta, panel=TRUE)

## ------------------------------------------------------------
## find interactions, survival setting
## ------------------------------------------------------------
## -------- pbc data
## data(pbc, package = "randomForestSRC")
## pbc.obj &lt;- rfsrc(Surv(days,status) ~ ., pbc, nsplit = 10)
## interaction_pbc &lt;- find.interaction(pbc.obj, nvar = 8)
data(interaction_pbc, package="ggRandomForests")
gg_dta &lt;- gg_interaction(interaction_pbc)

plot(gg_dta, xvar="bili")
plot(gg_dta, xvar="copper")
plot(gg_dta, panel=TRUE)

## -------- veteran data
data(interaction_veteran, package="ggRandomForests")
gg_dta &lt;- gg_interaction(interaction_veteran)

plot(gg_dta, panel=TRUE)


## End(Not run)

</code></pre>

<hr>
<h2 id='plot.gg_minimal_depth'>Plot a <code><a href="#topic+gg_minimal_depth">gg_minimal_depth</a></code> object for random forest variable 
ranking.</h2><span id='topic+plot.gg_minimal_depth'></span>

<h3>Description</h3>

<p>Plot a <code><a href="#topic+gg_minimal_depth">gg_minimal_depth</a></code> object for random forest variable 
ranking.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'gg_minimal_depth'
plot(x, selection = FALSE, type = c("named", "rank"), lbls, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.gg_minimal_depth_+3A_x">x</code></td>
<td>
<p><code><a href="#topic+gg_minimal_depth">gg_minimal_depth</a></code> object created from a
<code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object</p>
</td></tr>
<tr><td><code id="plot.gg_minimal_depth_+3A_selection">selection</code></td>
<td>
<p>should we restrict the plot to only include variables 
selected by the minimal depth criteria (boolean).</p>
</td></tr>
<tr><td><code id="plot.gg_minimal_depth_+3A_type">type</code></td>
<td>
<p>select type of y axis labels c(&quot;named&quot;,&quot;rank&quot;)</p>
</td></tr>
<tr><td><code id="plot.gg_minimal_depth_+3A_lbls">lbls</code></td>
<td>
<p>a vector of alternative variable names.</p>
</td></tr>
<tr><td><code id="plot.gg_minimal_depth_+3A_...">...</code></td>
<td>
<p>optional arguments passed to <code><a href="#topic+gg_minimal_depth">gg_minimal_depth</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>ggplot</code> object
</p>


<h3>References</h3>

<p>Breiman L. (2001). Random forests, Machine Learning, 45:5-32.
</p>
<p>Ishwaran H. and Kogalur U.B. (2007). Random survival forests for R,
Rnews, 7(2):25-31.
</p>
<p>Ishwaran H. and Kogalur U.B. (2014). Random Forests for Survival,
Regression and Classification (RF-SRC), R package version 1.5.
</p>


<h3>See Also</h3>

<p><code><a href="randomForestSRC.html#topic+var.select">var.select</a></code> 
<code><a href="#topic+gg_minimal_depth">gg_minimal_depth</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## Examples from RFSRC package...
## ------------------------------------------------------------
## classification example
## ------------------------------------------------------------
## -------- iris data
## You can build a randomForest
rfsrc_iris &lt;- rfsrc(Species ~ ., data = iris)
varsel_iris &lt;- var.select(rfsrc_iris)

# Get a data.frame containing minimaldepth measures
gg_dta&lt;- gg_minimal_depth(varsel_iris)

# Plot the gg_minimal_depth object
plot(gg_dta)

## ------------------------------------------------------------
## Regression example
## ------------------------------------------------------------
## -------- air quality data
rfsrc_airq &lt;- rfsrc(Ozone ~ ., data = airquality, na.action = "na.impute")
varsel_airq &lt;- var.select(rfsrc_airq)

# Get a data.frame containing error rates
gg_dta&lt;- gg_minimal_depth(varsel_airq)

# Plot the gg_minimal_depth object
plot(gg_dta)

## -------- Boston data
data(Boston, package="MASS")
rfsrc_boston &lt;- randomForestSRC::rfsrc(medv~., Boston)
# Get a data.frame containing error rates
plot(gg_minimal_depth(varsel_boston))

## -------- mtcars data
rfsrc_mtcars &lt;- rfsrc(mpg ~ ., data = mtcars)
varsel_mtcars &lt;- var.select(rfsrc_mtcars)


# Get a data.frame containing error rates
plot.gg_minimal_depth(varsel_mtcars)

## ------------------------------------------------------------
## Survival example
## ------------------------------------------------------------
## -------- veteran data
## randomized trial of two treatment regimens for lung cancer
data(veteran, package = "randomForestSRC")
rfsrc_veteran &lt;- rfsrc(Surv(time, status) ~ ., data = veteran, ntree = 100)
varsel_veteran &lt;- var.select(rfsrc_veteran)

gg_dta &lt;- gg_minimal_depth(varsel_veteran)
plot(gg_dta)

## -------- pbc data
#' # We need to create this dataset
data(pbc, package = "randomForestSRC",) 
# For whatever reason, the age variable is in days... makes no sense to me
for (ind in seq_len(dim(pbc)[2])) {
 if (!is.factor(pbc[, ind])) {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(range(pbc[, ind], na.rm = TRUE) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 } else {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(sort(unique(pbc[, ind])) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
     if (sum(sort(unique(pbc[, ind])) == c(FALSE, TRUE)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 }
 if (!is.logical(pbc[, ind]) &amp;
     length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 5) {
   pbc[, ind] &lt;- factor(pbc[, ind])
 }
}
#Convert age to years
pbc$age &lt;- pbc$age / 364.24

pbc$years &lt;- pbc$days / 364.24
pbc &lt;- pbc[, -which(colnames(pbc) == "days")]
pbc$treatment &lt;- as.numeric(pbc$treatment)
pbc$treatment[which(pbc$treatment == 1)] &lt;- "DPCA"
pbc$treatment[which(pbc$treatment == 2)] &lt;- "placebo"
pbc$treatment &lt;- factor(pbc$treatment)
dta_train &lt;- pbc[-which(is.na(pbc$treatment)), ]
# Create a test set from the remaining patients
pbc_test &lt;- pbc[which(is.na(pbc$treatment)), ]

#========
# build the forest:
rfsrc_pbc &lt;- randomForestSRC::rfsrc(
  Surv(years, status) ~ .,
 dta_train,
 nsplit = 10,
 na.action = "na.impute",
 forest = TRUE,
 importance = TRUE,
 save.memory = TRUE
)

varsel_pbc &lt;- var.select(rfsrc_pbc)

gg_dta &lt;- gg_minimal_depth(varsel_pbc)
plot(gg_dta)


## End(Not run)

</code></pre>

<hr>
<h2 id='plot.gg_minimal_vimp'>Plot a <code><a href="#topic+gg_minimal_vimp">gg_minimal_vimp</a></code> object for comparing the Minimal
Depth and VIMP variable rankings.</h2><span id='topic+plot.gg_minimal_vimp'></span>

<h3>Description</h3>

<p>Plot a <code><a href="#topic+gg_minimal_vimp">gg_minimal_vimp</a></code> object for comparing the Minimal
Depth and VIMP variable rankings.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'gg_minimal_vimp'
plot(x, nvar, lbls, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.gg_minimal_vimp_+3A_x">x</code></td>
<td>
<p><code><a href="#topic+gg_minimal_depth">gg_minimal_depth</a></code> object created from a
<code><a href="randomForestSRC.html#topic+var.select">var.select</a></code>
object</p>
</td></tr>
<tr><td><code id="plot.gg_minimal_vimp_+3A_nvar">nvar</code></td>
<td>
<p>should the figure be restricted to a subset of the points.</p>
</td></tr>
<tr><td><code id="plot.gg_minimal_vimp_+3A_lbls">lbls</code></td>
<td>
<p>a vector of alternative variable names.</p>
</td></tr>
<tr><td><code id="plot.gg_minimal_vimp_+3A_...">...</code></td>
<td>
<p>optional arguments (not used)</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>ggplot</code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+gg_minimal_vimp">gg_minimal_vimp</a></code>
<code><a href="randomForestSRC.html#topic+var.select">var.select</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## Examples from RFSRC package...
## ------------------------------------------------------------
## classification example
## ------------------------------------------------------------
## -------- iris data
## You can build a randomForest
rfsrc_iris &lt;- rfsrc(Species ~ ., data = iris)
varsel_iris &lt;- var.select(rfsrc_iris)

# Get a data.frame containing minimaldepth measures
gg_dta&lt;- gg_minimal_vimp(varsel_iris)

# Plot the gg_minimal_depth object
plot(gg_dta)

## ------------------------------------------------------------
## Regression example
## ------------------------------------------------------------
## -------- air quality data
rfsrc_airq &lt;- rfsrc(Ozone ~ ., data = airquality, na.action = "na.impute")
varsel_airq &lt;- var.select(rfsrc_airq)

# Get a data.frame containing error rates
gg_dta&lt;- gg_minimal_vimp(varsel_airq)

# Plot the gg_minimal_vimp object
plot(gg_dta)

## -------- Boston data
data(Boston, package="MASS")
rfsrc_boston &lt;- randomForestSRC::rfsrc(medv~., Boston)

varsel_boston &lt;- var.select(rfsrc_boston)

# Get a data.frame containing error rates
gg_dta&lt;- gg_minimal_vimp(varsel_boston)

# Plot the gg_minimal_vimp object
plot(gg_dta)

## -------- mtcars data
rfsrc_mtcars &lt;- rfsrc(mpg ~ ., data = mtcars)
varsel_mtcars &lt;- var.select(rfsrc_mtcars)

# Get a data.frame containing error rates
gg_dta&lt;- gg_minimal_vimp(varsel_mtcars)

# Plot the gg_minimal_vimp object
plot(gg_dta)

## ------------------------------------------------------------
## Survival example
## ------------------------------------------------------------
## -------- veteran data
## randomized trial of two treatment regimens for lung cancer
data(veteran, package = "randomForestSRC")
rfsrc_veteran &lt;- rfsrc(Surv(time, status) ~ ., data = veteran, ntree = 100)
varsel_veteran &lt;- var.select(rfsrc_veteran)

gg_dta &lt;- gg_minimal_vimp(varsel_veteran)
plot(gg_dta)

## -------- pbc data
# We need to create this dataset
data(pbc, package = "randomForestSRC",) 
# For whatever reason, the age variable is in days... makes no sense to me
for (ind in seq_len(dim(pbc)[2])) {
 if (!is.factor(pbc[, ind])) {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(range(pbc[, ind], na.rm = TRUE) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 } else {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(sort(unique(pbc[, ind])) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
     if (sum(sort(unique(pbc[, ind])) == c(FALSE, TRUE)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 }
 if (!is.logical(pbc[, ind]) &amp;
     length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 5) {
   pbc[, ind] &lt;- factor(pbc[, ind])
 }
}
#Convert age to years
pbc$age &lt;- pbc$age / 364.24

pbc$years &lt;- pbc$days / 364.24
pbc &lt;- pbc[, -which(colnames(pbc) == "days")]
pbc$treatment &lt;- as.numeric(pbc$treatment)
pbc$treatment[which(pbc$treatment == 1)] &lt;- "DPCA"
pbc$treatment[which(pbc$treatment == 2)] &lt;- "placebo"
pbc$treatment &lt;- factor(pbc$treatment)
dta_train &lt;- pbc[-which(is.na(pbc$treatment)), ]
# Create a test set from the remaining patients
pbc_test &lt;- pbc[which(is.na(pbc$treatment)), ]

#========
# build the forest:
rfsrc_pbc &lt;- randomForestSRC::rfsrc(
  Surv(years, status) ~ .,
 dta_train,
 nsplit = 10,
 na.action = "na.impute",
 forest = TRUE,
 importance = TRUE,
 save.memory = TRUE
)

varsel_pbc &lt;- var.select(rfsrc_pbc)

gg_dta &lt;- gg_minimal_vimp(varsel_pbc)
plot(gg_dta)

## End(Not run)

</code></pre>

<hr>
<h2 id='plot.gg_partial'>Partial variable dependence plot, operates on a <code><a href="#topic+gg_partial">gg_partial</a></code>
object.</h2><span id='topic+plot.gg_partial'></span>

<h3>Description</h3>

<p>Generate a risk adjusted (partial) variable dependence plot.
The function plots the <code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> response variable
(y-axis) against the covariate of interest (specified when creating the
<code><a href="#topic+gg_partial">gg_partial</a></code> object).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'gg_partial'
plot(x, points = TRUE, error = c("none", "shade", "bars", "lines"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.gg_partial_+3A_x">x</code></td>
<td>
<p><code><a href="#topic+gg_partial">gg_partial</a></code> object created from a
<code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> forest object</p>
</td></tr>
<tr><td><code id="plot.gg_partial_+3A_points">points</code></td>
<td>
<p>plot points (boolean) or a smooth line.</p>
</td></tr>
<tr><td><code id="plot.gg_partial_+3A_error">error</code></td>
<td>
<p>&quot;shade&quot;, &quot;bars&quot;, &quot;lines&quot; or &quot;none&quot;</p>
</td></tr>
<tr><td><code id="plot.gg_partial_+3A_...">...</code></td>
<td>
<p>extra arguments passed to <code>ggplot2</code> functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>ggplot</code> object
</p>


<h3>References</h3>

<p>Breiman L. (2001). Random forests, Machine Learning, 45:5-32.
</p>
<p>Ishwaran H. and Kogalur U.B. (2007). Random survival forests for R,
Rnews, 7(2):25-31.
</p>
<p>Ishwaran H. and Kogalur U.B. (2013). Random Forests for Survival,
Regression and Classification (RF-SRC), R package version 1.4.
</p>


<h3>See Also</h3>

<p><code><a href="randomForestSRC.html#topic+plot.variable">plot.variable</a></code>
<code><a href="#topic+gg_partial">gg_partial</a></code>
<code><a href="#topic+plot.gg_partial_list">plot.gg_partial_list</a></code> <code><a href="#topic+gg_variable">gg_variable</a></code>
<code><a href="#topic+plot.gg_variable">plot.gg_variable</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## ------------------------------------------------------------
## classification
## ------------------------------------------------------------
## -------- iris data

## iris "Petal.Width" partial dependence plot
##
# rfsrc_iris &lt;- rfsrc(Species ~., data = iris)
# partial_iris &lt;- plot.variable(rfsrc_iris, xvar.names = "Petal.Width",
#                            partial=TRUE)
data(partial_iris, package="ggRandomForests")

gg_dta &lt;- gg_partial(partial_iris)
plot(gg_dta)

## ------------------------------------------------------------
## regression
## ------------------------------------------------------------
## -------- air quality data
## airquality "Wind" partial dependence plot
##
# rfsrc_airq &lt;- rfsrc(Ozone ~ ., data = airquality)
# partial_airq &lt;- plot.variable(rfsrc_airq, xvar.names = "Wind",
#                            partial=TRUE, show.plot=FALSE)
data(partial_airq, package="ggRandomForests")

gg_dta &lt;- gg_partial(partial_airq)
plot(gg_dta)

gg_dta.m &lt;- gg_dta[["Month"]]
plot(gg_dta.m, notch=TRUE)

gg_dta[["Month"]] &lt;- NULL
plot(gg_dta, panel=TRUE)

## -------- Boston data
data(partial_boston, package="ggRandomForests")

gg_dta &lt;- gg_partial(partial_boston)
plot(gg_dta)
plot(gg_dta, panel=TRUE)

## -------- mtcars data
data(partial_mtcars, package="ggRandomForests")

gg_dta &lt;- gg_partial(partial_mtcars)

plot(gg_dta)

gg_dta.cat &lt;- gg_dta
gg_dta.cat[["disp"]] &lt;- gg_dta.cat[["wt"]] &lt;- gg_dta.cat[["hp"]] &lt;- NULL
gg_dta.cat[["drat"]] &lt;- gg_dta.cat[["carb"]] &lt;-
   gg_dta.cat[["qsec"]] &lt;- NULL

plot(gg_dta.cat, panel=TRUE)

gg_dta[["cyl"]] &lt;- gg_dta[["vs"]] &lt;- gg_dta[["am"]] &lt;- NULL
gg_dta[["gear"]] &lt;- NULL
plot(gg_dta, panel=TRUE)

## ------------------------------------------------------------
## survival examples
## ------------------------------------------------------------
## -------- veteran data
## survival "age" partial variable dependence plot
##
# data(veteran, package = "randomForestSRC")
# rfsrc_veteran &lt;- rfsrc(Surv(time,status)~., veteran, nsplit = 10,
#                        ntree = 100)
#
## 30 day partial plot for age
# partial_veteran &lt;- plot.variable(rfsrc_veteran, surv.type = "surv",
#                               partial = TRUE, time=30,
#                               xvar.names = "age",
#                               show.plots=FALSE)
data(partial_veteran, package="ggRandomForests")

gg_dta &lt;- gg_partial(partial_veteran[[1]])
plot(gg_dta)

gg_dta.cat &lt;- gg_dta
gg_dta[["celltype"]] &lt;- gg_dta[["trt"]] &lt;- gg_dta[["prior"]] &lt;- NULL
plot(gg_dta, panel=TRUE)

gg_dta.cat[["karno"]] &lt;- gg_dta.cat[["diagtime"]] &lt;-
     gg_dta.cat[["age"]] &lt;- NULL
plot(gg_dta.cat, panel=TRUE, notch=TRUE)

gg_dta &lt;- lapply(partial_veteran, gg_partial)
length(gg_dta)
gg_dta &lt;- combine.gg_partial(gg_dta[[1]], gg_dta[[2]] )

plot(gg_dta[["karno"]])
plot(gg_dta[["celltype"]])

gg_dta.cat &lt;- gg_dta
gg_dta[["celltype"]] &lt;- gg_dta[["trt"]] &lt;- gg_dta[["prior"]] &lt;- NULL
plot(gg_dta, panel=TRUE)

gg_dta.cat[["karno"]] &lt;- gg_dta.cat[["diagtime"]] &lt;-
     gg_dta.cat[["age"]] &lt;- NULL
plot(gg_dta.cat, panel=TRUE, notch=TRUE)

## -------- pbc data

## End(Not run)

</code></pre>

<hr>
<h2 id='plot.gg_partial_list'>Partial variable dependence plot, operates on a <code>gg_partial_list</code> 
object.</h2><span id='topic+plot.gg_partial_list'></span>

<h3>Description</h3>

<p>Generate a risk adjusted (partial) variable dependence plot.
The function plots the <code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> response 
variable (y-axis) against the covariate of interest (specified when creating
the <code>gg_partial_list</code> object).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'gg_partial_list'
plot(x, points = TRUE, panel = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.gg_partial_list_+3A_x">x</code></td>
<td>
<p><code>gg_partial_list</code> object created from a 
<code><a href="#topic+gg_partial">gg_partial</a></code> forest object</p>
</td></tr>
<tr><td><code id="plot.gg_partial_list_+3A_points">points</code></td>
<td>
<p>plot points (boolean) or a smooth line.</p>
</td></tr>
<tr><td><code id="plot.gg_partial_list_+3A_panel">panel</code></td>
<td>
<p>should the entire list be plotted together?</p>
</td></tr>
<tr><td><code id="plot.gg_partial_list_+3A_...">...</code></td>
<td>
<p>extra arguments</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of <code>ggplot</code> objects, or a single faceted <code>ggplot</code> 
object
</p>


<h3>References</h3>

<p>Breiman L. (2001). Random forests, Machine Learning, 45:5-32.
</p>
<p>Ishwaran H. and Kogalur U.B. (2007). Random survival forests for R,
Rnews, 7(2):25-31.
</p>
<p>Ishwaran H. and Kogalur U.B. (2013). Random Forests for Survival,
Regression and Classification (RF-SRC), R package version 1.4.
</p>


<h3>See Also</h3>

<p><code><a href="randomForestSRC.html#topic+plot.variable">plot.variable</a></code> 
<code><a href="#topic+gg_partial">gg_partial</a></code>
<code><a href="#topic+plot.gg_partial">plot.gg_partial</a></code> <code><a href="#topic+gg_variable">gg_variable</a></code>
<code><a href="#topic+plot.gg_variable">plot.gg_variable</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## ------------------------------------------------------------
## classification
## ------------------------------------------------------------
## -------- iris data

## iris "Petal.Width" partial dependence plot
##
# rfsrc_iris &lt;- rfsrc(Species ~., data = iris)
# partial_iris &lt;- plot.variable(rfsrc_iris, xvar.names = "Petal.Width",
#                            partial=TRUE)
data(partial_iris, package="ggRandomForests")

gg_dta &lt;- gg_partial(partial_iris)
plot(gg_dta)

## ------------------------------------------------------------
## regression
## ------------------------------------------------------------
## -------- air quality data
## airquality "Wind" partial dependence plot
##
# rfsrc_airq &lt;- rfsrc(Ozone ~ ., data = airquality)
# partial_airq &lt;- plot.variable(rfsrc_airq, xvar.names = "Wind",
#                            partial=TRUE, show.plot=FALSE)
data(partial_airq, package="ggRandomForests")

gg_dta &lt;- gg_partial(partial_airq)
plot(gg_dta)

gg_dta.m &lt;- gg_dta[["Month"]]
plot(gg_dta.m, notch=TRUE)

gg_dta[["Month"]] &lt;- NULL
plot(gg_dta, panel=TRUE)

## -------- Boston data
data(partial_boston, package="ggRandomForests")

gg_dta &lt;- gg_partial(partial_boston)
plot(gg_dta)
plot(gg_dta, panel=TRUE)

## -------- mtcars data
data(partial_mtcars, package="ggRandomForests")

gg_dta &lt;- gg_partial(partial_mtcars)

plot(gg_dta)

gg_dta.cat &lt;- gg_dta
gg_dta.cat[["disp"]] &lt;- gg_dta.cat[["wt"]] &lt;- gg_dta.cat[["hp"]] &lt;- NULL
gg_dta.cat[["drat"]] &lt;- gg_dta.cat[["carb"]] &lt;- gg_dta.cat[["qsec"]] &lt;- NULL

plot(gg_dta.cat, panel=TRUE)

gg_dta[["cyl"]] &lt;- gg_dta[["vs"]] &lt;- gg_dta[["am"]] &lt;- NULL
gg_dta[["gear"]] &lt;- NULL
plot(gg_dta, panel=TRUE)

## ------------------------------------------------------------
## survival examples
## ------------------------------------------------------------
## -------- veteran data
## survival "age" partial variable dependence plot
##
# data(veteran, package = "randomForestSRC")
# rfsrc_veteran &lt;- rfsrc(Surv(time,status)~., veteran, nsplit = 10, 
#                        ntree = 100)
#
## 30 day partial plot for age
# partial_veteran &lt;- plot.variable(rfsrc_veteran, surv.type = "surv",
#                               partial = TRUE, time=30,
#                               xvar.names = "age",
#                               show.plots=FALSE)
data(partial_veteran, package="ggRandomForests")

gg_dta &lt;- gg_partial(partial_veteran[[1]])
plot(gg_dta)

gg_dta.cat &lt;- gg_dta
gg_dta[["celltype"]] &lt;- gg_dta[["trt"]] &lt;- gg_dta[["prior"]] &lt;- NULL
plot(gg_dta, panel=TRUE)

gg_dta.cat[["karno"]] &lt;- gg_dta.cat[["diagtime"]] &lt;- 
    gg_dta.cat[["age"]] &lt;- NULL
plot(gg_dta.cat, panel=TRUE, notch=TRUE)

gg_dta &lt;- lapply(partial_veteran, gg_partial)
length(gg_dta)
gg_dta &lt;- combine.gg_partial(gg_dta[[1]], gg_dta[[2]] )

plot(gg_dta[["karno"]])
plot(gg_dta[["celltype"]])

gg_dta.cat &lt;- gg_dta
gg_dta[["celltype"]] &lt;- gg_dta[["trt"]] &lt;- gg_dta[["prior"]] &lt;- NULL
plot(gg_dta, panel=TRUE)

gg_dta.cat[["karno"]] &lt;- gg_dta.cat[["diagtime"]] &lt;- 
     gg_dta.cat[["age"]] &lt;- NULL
plot(gg_dta.cat, panel=TRUE, notch=TRUE)

## -------- pbc data

## End(Not run)

</code></pre>

<hr>
<h2 id='plot.gg_rfsrc'>Predicted response plot from a <code><a href="#topic+gg_rfsrc">gg_rfsrc</a></code> object.</h2><span id='topic+plot.gg_rfsrc'></span>

<h3>Description</h3>

<p>Plot the predicted response from a <code><a href="#topic+gg_rfsrc">gg_rfsrc</a></code> object, the
<code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> prediction, using the OOB prediction
from the forest.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'gg_rfsrc'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.gg_rfsrc_+3A_x">x</code></td>
<td>
<p><code><a href="#topic+gg_rfsrc">gg_rfsrc</a></code> object created from a
<code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object</p>
</td></tr>
<tr><td><code id="plot.gg_rfsrc_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="#topic+gg_rfsrc">gg_rfsrc</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>ggplot</code> object
</p>


<h3>References</h3>

<p>Breiman L. (2001). Random forests, Machine Learning, 45:5-32.
</p>
<p>Ishwaran H. and Kogalur U.B. (2007). Random survival forests for
R, Rnews, 7(2):25-31.
</p>
<p>Ishwaran H. and Kogalur U.B. (2013). Random Forests for Survival, Regression
and Classification (RF-SRC), R package version 1.4.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+gg_rfsrc">gg_rfsrc</a></code> <code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## ------------------------------------------------------------
## classification example
## ------------------------------------------------------------
## -------- iris data
# rfsrc_iris &lt;- rfsrc(Species ~ ., data = iris)
data(rfsrc_iris, package="ggRandomForests")
gg_dta&lt;- gg_rfsrc(rfsrc_iris)

plot(gg_dta)

## ------------------------------------------------------------
## Regression example
## ------------------------------------------------------------
## -------- air quality data
rfsrc_airq &lt;- rfsrc(Ozone ~ ., data = airquality, na.action = "na.impute")
gg_dta&lt;- gg_rfsrc(rfsrc_airq)

plot(gg_dta)

## -------- Boston data
data(Boston, package = "MASS")
rfsrc_boston &lt;- randomForestSRC::rfsrc(medv~., Boston)

plot(rfsrc_boston)

## -------- mtcars data
rfsrc_mtcars &lt;- rfsrc(mpg ~ ., data = mtcars)
gg_dta&lt;- gg_rfsrc(rfsrc_mtcars)

plot(gg_dta)

## ------------------------------------------------------------
## Survival example
## ------------------------------------------------------------
## -------- veteran data
## randomized trial of two treatment regimens for lung cancer
data(veteran, package = "randomForestSRC")
rfsrc_veteran &lt;- rfsrc(Surv(time, status) ~ ., data = veteran, ntree = 100)
gg_dta &lt;- gg_rfsrc(rfsrc_veteran)
plot(gg_dta)

gg_dta &lt;- gg_rfsrc(rfsrc_veteran, conf.int=.95)
plot(gg_dta)

gg_dta &lt;- gg_rfsrc(rfsrc_veteran, by="trt")
plot(gg_dta)

## -------- pbc data
#' # We need to create this dataset
data(pbc, package = "randomForestSRC",) 
# For whatever reason, the age variable is in days... makes no sense to me
for (ind in seq_len(dim(pbc)[2])) {
 if (!is.factor(pbc[, ind])) {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(range(pbc[, ind], na.rm = TRUE) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 } else {
   if (length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 2) {
     if (sum(sort(unique(pbc[, ind])) == c(0, 1)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
     if (sum(sort(unique(pbc[, ind])) == c(FALSE, TRUE)) == 2) {
       pbc[, ind] &lt;- as.logical(pbc[, ind])
     }
   }
 }
 if (!is.logical(pbc[, ind]) &amp;
     length(unique(pbc[which(!is.na(pbc[, ind])), ind])) &lt;= 5) {
   pbc[, ind] &lt;- factor(pbc[, ind])
 }
}
#Convert age to years
pbc$age &lt;- pbc$age / 364.24

pbc$years &lt;- pbc$days / 364.24
pbc &lt;- pbc[, -which(colnames(pbc) == "days")]
pbc$treatment &lt;- as.numeric(pbc$treatment)
pbc$treatment[which(pbc$treatment == 1)] &lt;- "DPCA"
pbc$treatment[which(pbc$treatment == 2)] &lt;- "placebo"
pbc$treatment &lt;- factor(pbc$treatment)
dta_train &lt;- pbc[-which(is.na(pbc$treatment)), ]
# Create a test set from the remaining patients
pbc_test &lt;- pbc[which(is.na(pbc$treatment)), ]

#========
# build the forest:
rfsrc_pbc &lt;- randomForestSRC::rfsrc(
  Surv(years, status) ~ .,
 dta_train,
 nsplit = 10,
 na.action = "na.impute",
 forest = TRUE,
 importance = TRUE,
 save.memory = TRUE
)

gg_dta &lt;- gg_rfsrc(rfsrc_pbc)
plot(gg_dta)

gg_dta &lt;- gg_rfsrc(rfsrc_pbc, conf.int=.95)
plot(gg_dta)

gg_dta &lt;- gg_rfsrc(rfsrc_pbc, by="treatment")
plot(gg_dta)



## End(Not run)
</code></pre>

<hr>
<h2 id='plot.gg_roc'>ROC plot generic function for a <code><a href="#topic+gg_roc">gg_roc</a></code> object.</h2><span id='topic+plot.gg_roc'></span>

<h3>Description</h3>

<p>ROC plot generic function for a <code><a href="#topic+gg_roc">gg_roc</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'gg_roc'
plot(x, which_outcome = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.gg_roc_+3A_x">x</code></td>
<td>
<p><code><a href="#topic+gg_roc">gg_roc</a></code> object created from a classification forest</p>
</td></tr>
<tr><td><code id="plot.gg_roc_+3A_which_outcome">which_outcome</code></td>
<td>
<p>for multiclass problems, choose the class for plotting</p>
</td></tr>
<tr><td><code id="plot.gg_roc_+3A_...">...</code></td>
<td>
<p>arguments passed to the <code><a href="#topic+gg_roc">gg_roc</a></code> function</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>ggplot</code> object of the ROC curve
</p>


<h3>References</h3>

<p>Breiman L. (2001). Random forests, Machine Learning, 45:5-32.
</p>
<p>Ishwaran H. and Kogalur U.B. (2007). Random survival forests for R,
Rnews, 7(2):25-31.
</p>
<p>Ishwaran H. and Kogalur U.B. (2013). Random Forests for Survival,
Regression and Classification (RF-SRC), R package version 1.4.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+gg_roc">gg_roc</a></code> rfsrc
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## ------------------------------------------------------------
## classification example
## ------------------------------------------------------------
## -------- iris data
#rfsrc_iris &lt;- rfsrc(Species ~ ., data = iris)
data(rfsrc_iris, package="ggRandomForests")

# ROC for setosa
gg_dta &lt;- gg_roc(rfsrc_iris, which_outcome=1)
plot.gg_roc(gg_dta)

# ROC for versicolor
gg_dta &lt;- gg_roc(rfsrc_iris, which_outcome=2)
plot.gg_roc(gg_dta)

# ROC for virginica
gg_dta &lt;- gg_roc(rfsrc_iris, which_outcome=3)
plot.gg_roc(gg_dta)

# Alternatively, you can plot all three outcomes in one go
# by calling the plot function on the forest object.
plot.gg_roc(rfsrc_iris)


## End(Not run)

</code></pre>

<hr>
<h2 id='plot.gg_survival'>Plot a <code><a href="#topic+gg_survival">gg_survival</a></code>  object.</h2><span id='topic+plot.gg_survival'></span>

<h3>Description</h3>

<p>Plot a <code><a href="#topic+gg_survival">gg_survival</a></code>  object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'gg_survival'
plot(
  x,
  type = c("surv", "cum_haz", "hazard", "density", "mid_int", "life", "proplife"),
  error = c("shade", "bars", "lines", "none"),
  label = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.gg_survival_+3A_x">x</code></td>
<td>
<p><code><a href="#topic+gg_survival">gg_survival</a></code> or a survival <code><a href="#topic+gg_rfsrc">gg_rfsrc</a></code>
object created from a <code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object</p>
</td></tr>
<tr><td><code id="plot.gg_survival_+3A_type">type</code></td>
<td>
<p>&quot;surv&quot;, &quot;cum_haz&quot;, &quot;hazard&quot;, &quot;density&quot;, &quot;mid_int&quot;, &quot;life&quot;, &quot;proplife&quot;</p>
</td></tr>
<tr><td><code id="plot.gg_survival_+3A_error">error</code></td>
<td>
<p>&quot;shade&quot;, &quot;bars&quot;, &quot;lines&quot; or &quot;none&quot;</p>
</td></tr>
<tr><td><code id="plot.gg_survival_+3A_label">label</code></td>
<td>
<p>Modify the legend label when gg_survival has stratified samples</p>
</td></tr>
<tr><td><code id="plot.gg_survival_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>ggplot</code> object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## -------- pbc data
data(pbc, package="randomForestSRC")
pbc$time &lt;- pbc$days/364.25

# This is the same as kaplan
gg_dta &lt;- gg_survival(interval="time", censor="status",
                     data=pbc)

plot(gg_dta, error="none")
plot(gg_dta)

# Stratified on treatment variable.
gg_dta &lt;- gg_survival(interval="time", censor="status",
                     data=pbc, by="treatment")

plot(gg_dta, error="none")
plot(gg_dta)
plot(gg_dta, label="treatment")

# ...with smaller confidence limits.
gg_dta &lt;- gg_survival(interval="time", censor="status",
                     data=pbc, by="treatment", conf.int=.68)

plot(gg_dta, error="lines")
plot(gg_dta, label="treatment", error="lines")

# ...with smaller confidence limits.
gg_dta &lt;- gg_survival(interval="time", censor="status",
                     data=pbc, by="sex", conf.int=.68)

plot(gg_dta, error="lines")
plot(gg_dta, label="sex", error="lines")



## End(Not run)

</code></pre>

<hr>
<h2 id='plot.gg_variable'>Plot a <code><a href="#topic+gg_variable">gg_variable</a></code> object,</h2><span id='topic+plot.gg_variable'></span>

<h3>Description</h3>

<p>Plot a <code><a href="#topic+gg_variable">gg_variable</a></code> object,
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'gg_variable'
plot(
  x,
  xvar,
  time,
  time_labels,
  panel = FALSE,
  oob = TRUE,
  points = TRUE,
  smooth = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.gg_variable_+3A_x">x</code></td>
<td>
<p><code><a href="#topic+gg_variable">gg_variable</a></code> object created from a
<code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object</p>
</td></tr>
<tr><td><code id="plot.gg_variable_+3A_xvar">xvar</code></td>
<td>
<p>variable (or list of variables) of interest.</p>
</td></tr>
<tr><td><code id="plot.gg_variable_+3A_time">time</code></td>
<td>
<p>For survival, one or more times of interest</p>
</td></tr>
<tr><td><code id="plot.gg_variable_+3A_time_labels">time_labels</code></td>
<td>
<p>string labels for times</p>
</td></tr>
<tr><td><code id="plot.gg_variable_+3A_panel">panel</code></td>
<td>
<p>Should plots be faceted along multiple xvar?</p>
</td></tr>
<tr><td><code id="plot.gg_variable_+3A_oob">oob</code></td>
<td>
<p>oob estimates (boolean)</p>
</td></tr>
<tr><td><code id="plot.gg_variable_+3A_points">points</code></td>
<td>
<p>plot the raw data points (boolean)</p>
</td></tr>
<tr><td><code id="plot.gg_variable_+3A_smooth">smooth</code></td>
<td>
<p>include a smooth curve (boolean)</p>
</td></tr>
<tr><td><code id="plot.gg_variable_+3A_...">...</code></td>
<td>
<p>arguments passed to the <code>ggplot2</code> functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single <code>ggplot</code> object, or list of <code>ggplot</code> objects
</p>


<h3>References</h3>

<p>Breiman L. (2001). Random forests, Machine Learning, 45:5-32.
</p>
<p>Ishwaran H. and Kogalur U.B. (2007). Random survival forests for R, Rnews,
7(2):25-31.
</p>
<p>Ishwaran H. and Kogalur U.B. (2013). Random Forests for Survival, Regression
and Classification (RF-SRC), R package version 1.4.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## ------------------------------------------------------------
## classification
## ------------------------------------------------------------
## -------- iris data
## iris
#rfsrc_iris &lt;- rfsrc(Species ~., data = iris)
data(rfsrc_iris, package="ggRandomForests")

gg_dta &lt;- gg_variable(rfsrc_iris)
plot(gg_dta, xvar="Sepal.Width")
plot(gg_dta, xvar="Sepal.Length")

## !! TODO !! this needs to be corrected
plot(gg_dta, xvar=rfsrc_iris$xvar.names,
     panel=TRUE, se=FALSE)

## ------------------------------------------------------------
## regression
## ------------------------------------------------------------
## -------- air quality data
#rfsrc_airq &lt;- rfsrc(Ozone ~ ., data = airquality)
data(rfsrc_airq, package="ggRandomForests")
gg_dta &lt;- gg_variable(rfsrc_airq)

# an ordinal variable
gg_dta[,"Month"] &lt;- factor(gg_dta[,"Month"])

plot(gg_dta, xvar="Wind")
plot(gg_dta, xvar="Temp")
plot(gg_dta, xvar="Solar.R")

plot(gg_dta, xvar=c("Solar.R", "Wind", "Temp", "Day"), panel=TRUE)

plot(gg_dta, xvar="Month", notch=TRUE)

## -------- motor trend cars data
#rfsrc_mtcars &lt;- rfsrc(mpg ~ ., data = mtcars)
data(rfsrc_mtcars, package="ggRandomForests")
gg_dta &lt;- gg_variable(rfsrc_mtcars)

# mtcars$cyl is an ordinal variable
gg_dta$cyl &lt;- factor(gg_dta$cyl)
gg_dta$am &lt;- factor(gg_dta$am)
gg_dta$vs &lt;- factor(gg_dta$vs)
gg_dta$gear &lt;- factor(gg_dta$gear)
gg_dta$carb &lt;- factor(gg_dta$carb)

plot(gg_dta, xvar="cyl")

# Others are continuous
plot(gg_dta, xvar="disp")
plot(gg_dta, xvar="hp")
plot(gg_dta, xvar="wt")

# panel
plot(gg_dta,xvar=c("disp","hp", "drat", "wt", "qsec"),  panel=TRUE)
plot(gg_dta, xvar=c("cyl", "vs", "am", "gear", "carb") ,panel=TRUE)

## -------- Boston data

## ------------------------------------------------------------
## survival examples
## ------------------------------------------------------------
## -------- veteran data
## survival
data(veteran, package = "randomForestSRC")
rfsrc_veteran &lt;- rfsrc(Surv(time,status)~., veteran, nsplit = 10,
                       ntree = 100)

# get the 1 year survival time.
gg_dta &lt;- gg_variable(rfsrc_veteran, time=90)

# Generate variable dependance plots for age and diagtime
plot(gg_dta, xvar = "age")
plot(gg_dta, xvar = "diagtime")

# Generate coplots
plot(gg_dta, xvar = c("age", "diagtime"), panel=TRUE)

# If we want to compare survival at different time points, say 30, 90 day
# and 1 year
gg_dta &lt;- gg_variable(rfsrc_veteran, time=c(30, 90, 365))

# Generate variable dependance plots for age and diagtime
plot(gg_dta, xvar = "age")
plot(gg_dta, xvar = "diagtime")

# Generate coplots
plot(gg_dta, xvar =  c("age", "diagtime"), panel=TRUE)

## -------- pbc data

## End(Not run)

</code></pre>

<hr>
<h2 id='plot.gg_vimp'>Plot a <code><a href="#topic+gg_vimp">gg_vimp</a></code> object, extracted variable importance of a
<code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object</h2><span id='topic+plot.gg_vimp'></span>

<h3>Description</h3>

<p>Plot a <code><a href="#topic+gg_vimp">gg_vimp</a></code> object, extracted variable importance of a
<code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'gg_vimp'
plot(x, relative, lbls, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.gg_vimp_+3A_x">x</code></td>
<td>
<p><code><a href="#topic+gg_vimp">gg_vimp</a></code> object created from a
<code><a href="randomForestSRC.html#topic+rfsrc">rfsrc</a></code> object</p>
</td></tr>
<tr><td><code id="plot.gg_vimp_+3A_relative">relative</code></td>
<td>
<p>should we plot vimp or relative vimp. Defaults to vimp.</p>
</td></tr>
<tr><td><code id="plot.gg_vimp_+3A_lbls">lbls</code></td>
<td>
<p>A vector of alternative variable labels. Item names should be
the same as the variable names.</p>
</td></tr>
<tr><td><code id="plot.gg_vimp_+3A_...">...</code></td>
<td>
<p>optional arguments passed to gg_vimp if necessary</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>ggplot</code> object
</p>


<h3>References</h3>

<p>Breiman L. (2001). Random forests, Machine Learning, 45:5-32.
</p>
<p>Ishwaran H. and Kogalur U.B. (2007). Random survival forests for
R, Rnews, 7(2):25-31.
</p>
<p>Ishwaran H. and Kogalur U.B. (2013). Random Forests for Survival,
Regression and Classification (RF-SRC), R package version 1.4.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+gg_vimp">gg_vimp</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## ------------------------------------------------------------
## classification example
## ------------------------------------------------------------
## -------- iris data
# rfsrc_iris &lt;- rfsrc(Species ~ ., data = iris)
data(rfsrc_iris, package="ggRandomForests")
gg_dta &lt;- gg_vimp(rfsrc_iris)
plot(gg_dta)

## ------------------------------------------------------------
## regression example
## ------------------------------------------------------------
## -------- air quality data
# rfsrc_airq &lt;- rfsrc(Ozone ~ ., airquality)
data(rfsrc_airq, package="ggRandomForests")
gg_dta &lt;- gg_vimp(rfsrc_airq)
plot(gg_dta)

## -------- Boston data
data(rfsrc_boston, package="ggRandomForests")
gg_dta &lt;- gg_vimp(rfsrc_boston)
plot(gg_dta)

## -------- mtcars data
data(rfsrc_mtcars, package="ggRandomForests")
gg_dta &lt;- gg_vimp(rfsrc_mtcars)
plot(gg_dta)

## ------------------------------------------------------------
## survival example
## ------------------------------------------------------------
## -------- veteran data
data(rfsrc_veteran, package="ggRandomForests")
gg_dta &lt;- gg_vimp(rfsrc_veteran)
plot(gg_dta)

## -------- pbc data
data(rfsrc_pbc, package="ggRandomForests")
gg_dta &lt;- gg_vimp(rfsrc_pbc)
plot(gg_dta)


## End(Not run)

</code></pre>

<hr>
<h2 id='print.gg_minimal_depth'>Print a <code><a href="#topic+gg_minimal_depth">gg_minimal_depth</a></code> object.</h2><span id='topic+print.gg_minimal_depth'></span>

<h3>Description</h3>

<p>Print a <code><a href="#topic+gg_minimal_depth">gg_minimal_depth</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'gg_minimal_depth'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.gg_minimal_depth_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+gg_minimal_depth">gg_minimal_depth</a></code> object.</p>
</td></tr>
<tr><td><code id="print.gg_minimal_depth_+3A_...">...</code></td>
<td>
<p>optional arguments</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## ------------------------------------------------------------
## classification example
## ------------------------------------------------------------
## You can build a randomForest
rfsrc_iris &lt;- rfsrc(Species ~ ., data = iris)
varsel_iris &lt;- var.select(rfsrc_iris)

# Get a data.frame containing minimaldepth measures
gg_dta &lt;- gg_minimal_depth(varsel_iris)
print(gg_dta)

## ------------------------------------------------------------
## regression example
## ------------------------------------------------------------
# ... or load a cached randomForestSRC object
rfsrc_airq &lt;- rfsrc(Ozone ~ ., data = airquality, na.action = "na.impute")
varsel_airq &lt;- var.select(rfsrc_airq)


# Get a data.frame containing minimaldepth measures
gg_dta&lt;- gg_minimal_depth(varsel_airq)
print(gg_dta)

# To nicely print a rfsrc::var.select output...
print(varsel_airq)


# ... or load a cached randomForestSRC object
data(Boston, package="MASS")
rfsrc_boston &lt;- randomForestSRC::rfsrc(medv~., Boston)

varsel_boston &lt;- var.select(rfsrc_boston)

# Get a data.frame containing minimaldepth measures
gg_dta&lt;- gg_minimal_depth(varsel_boston)
print(gg_dta)

# To nicely print a rfsrc::var.select output...
print(varsel_boston)

## End(Not run)
</code></pre>

<hr>
<h2 id='quantile_pts'>Find points evenly distributed along the vectors values.</h2><span id='topic+quantile_pts'></span>

<h3>Description</h3>

<p>This function finds point values from a vector argument to produce
<code>groups</code> intervals. Setting <code>groups=2</code> will return three values,
the two end points, and one mid point (at the median value of the vector).
</p>
<p>The output can be passed directly into the breaks argument of the
<code>cut</code> function for creating groups for coplots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>quantile_pts(object, groups, intervals = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="quantile_pts_+3A_object">object</code></td>
<td>
<p>vector object of values.</p>
</td></tr>
<tr><td><code id="quantile_pts_+3A_groups">groups</code></td>
<td>
<p>how many points do we want</p>
</td></tr>
<tr><td><code id="quantile_pts_+3A_intervals">intervals</code></td>
<td>
<p>should we return the raw points or intervals to
be passed to the <code>cut</code> function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of groups+1 cut point values.
</p>


<h3>See Also</h3>

<p><code>cut</code> <code><a href="#topic+gg_partial_coplot">gg_partial_coplot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(Boston, package="MASS")
rfsrc_boston &lt;- randomForestSRC::rfsrc(medv~., Boston)

# To create 6 intervals, we want 7 points.
# quantile_pts will find balanced intervals
rm_pts &lt;- quantile_pts(rfsrc_boston$xvar$rm, groups=6, intervals=TRUE)

# Use cut to create the intervals
rm_grp &lt;- cut(rfsrc_boston$xvar$rm, breaks=rm_pts)

summary(rm_grp)

</code></pre>

<hr>
<h2 id='shift'>lead function to shift by one (or more).</h2><span id='topic+shift'></span>

<h3>Description</h3>

<p>lead function to shift by one (or more).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shift(x, shift_by = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="shift_+3A_x">x</code></td>
<td>
<p>a vector of values</p>
</td></tr>
<tr><td><code id="shift_+3A_shift_by">shift_by</code></td>
<td>
<p>an integer of length 1, giving the number of positions
to lead (positive) or lag (negative) by</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Lead and lag are useful for comparing values offset by a constant
(e.g. the previous or next value)
</p>
<p>Taken from:
http://ctszkin.com/2012/03/11/generating-a-laglead-variables/
</p>
<p>This function allows me to remove the dplyr::lead depends. Still suggest for
vignettes though.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>d&lt;-data.frame(x=1:15)
#generate lead variable
d$df_lead2&lt;-ggRandomForests:::shift(d$x,2)
#generate lag variable
d$df_lag2&lt;-ggRandomForests:::shift(d$x,-2)
</code></pre>

<hr>
<h2 id='surface_matrix'>Construct a set of (x, y, z) matrices for surface plotting a
<code>gg_partial_coplot</code> object</h2><span id='topic+surface_matrix'></span><span id='topic+surface_matrix.gg_partial_coplot'></span>

<h3>Description</h3>

<p>Construct a set of (x, y, z) matrices for surface plotting a
<code>gg_partial_coplot</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>surface_matrix(dta, xvar)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="surface_matrix_+3A_dta">dta</code></td>
<td>
<p>a gg_partial_coplot object containing at least 3 numeric columns
of data</p>
</td></tr>
<tr><td><code id="surface_matrix_+3A_xvar">xvar</code></td>
<td>
<p>a vector of 3 column names from the data object, in (x, y, z)
order</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To create a surface plot, the <code>plot3D::surf3D</code> function expects
3 matrices of n.x by n.y. Take the p+1 by n <code>gg_partial_coplot</code> object,
and extract and construct the x, y and z matrices from the provided
<code>xvar</code> column names.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## From vignette(randomForestRegression, package="ggRandomForests")
data(Boston, package="MASS")
rfsrc_boston &lt;- randomForestSRC::rfsrc(medv~., Boston)

varsel_boston &lt;- var.select(rfsrc_boston)

 rm_pts &lt;- quantile_pts(rfsrc_boston$xvar$rm,
    groups = 9, 
    intervals = TRUE)

 partial_boston_surf &lt;- lapply(rm_pts, function(ct) {
  rfsrc_boston$xvar$rm &lt;- ct
  randomForestSRC::plot.variable(
    rfsrc_boston,
    xvar.names = "lstat", 
    time = 1,
    npts = 10,
    show.plots = FALSE,
    partial = TRUE
   )
 })
   
# Instead of groups, we want the raw rm point values,
# To make the dimensions match, we need to repeat the values
# for each of the 50 points in the lstat direction
rm.tmp &lt;- do.call(c,lapply(rm_pts,
                           function(grp) {rep(grp,
                           length(partial_boston_surf))}))

# Convert the list of plot.variable output to
partial_surf &lt;- do.call(rbind,lapply(partial_boston_surf, gg_partial))

# attach the data to the gg_partial_coplot
partial_surf$rm &lt;- rm.tmp

# Transform the gg_partial_coplot object into a list of three named matrices
# for surface plotting with plot3D::surf3D
srf &lt;- surface_matrix(partial_surf, c("lstat", "rm", "yhat"))

## End(Not run)

## Not run: 
# surf3D is in the plot3D package.
library(plot3D)
# Generate the figure.
surf3D(x=srf$x, y=srf$y, z=srf$z, col=topo.colors(10),
       colkey=FALSE, border = "black", bty="b2",
       shade = 0.5, expand = 0.5,
       lighting = TRUE, lphi = -50,
       xlab="Lower Status", ylab="Average Rooms", zlab="Median Value"
)

## End(Not run)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
