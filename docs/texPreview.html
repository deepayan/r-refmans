<!DOCTYPE html><html><head><title>Help for package texPreview</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {texPreview}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#as.kable'><p>Try to coerce an object into a knitr_kable object</p></a></li>
<li><a href='#build_usepackage'><p>Build usepackage command for TeX document</p></a></li>
<li><a href='#check_requirements'><p>Check TeX Requirements for Package</p></a></li>
<li><a href='#get_texpackages'><p>Get list of TeX packages installed on System</p></a></li>
<li><a href='#tex_opts'><p>Default and current tex options</p></a></li>
<li><a href='#tex_preview'><p>Render and Preview snippets of TeX in R Viewer</p></a></li>
<li><a href='#tex_requirements'><p>Query TeX file for Required Packages</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Compile and Preview Snippets of 'LaTeX'</td>
</tr>
<tr>
<td>Version:</td>
<td>2.1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-01-23</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jonathan Sidi &lt;yonicd@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Compile snippets of 'LaTeX' directly into images
    from the R console to view in the 'RStudio' viewer pane, Shiny apps
    and 'RMarkdown' documents.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/yonicd/texPreview">https://github.com/yonicd/texPreview</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/yonicd/texPreview/issues">https://github.com/yonicd/texPreview/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>base64enc, details, fs, htmltools, knitr, magick, rematch2,
rstudioapi, svgPanZoom, utils, whisker, xml2, tinytex</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, kableExtra, nlme, pdftools, rmarkdown, shiny, testthat,
texreg, xtable</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RdMacros:</td>
<td>details</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-24 15:03:59 UTC; yonis</td>
</tr>
<tr>
<td>Author:</td>
<td>Jonathan Sidi [aut, cre],
  Daniel Polhamus [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-24 15:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='as.kable'>Try to coerce an object into a knitr_kable object</h2><span id='topic+as.kable'></span>

<h3>Description</h3>

<p>coerce objects into a knitr_kable class object with a latex format
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.kable(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.kable_+3A_x">x</code></td>
<td>
<p>object, can be tex character, object return by returnType = &quot;input&quot;,
or a path to a tex file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class knitr_kable
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
tex &lt;- '\\begin{tabular}{llr}
\\hline
\\multicolumn{2}{c}{Item} \\\\
\\cline{1-2}
Animal    &amp; Description &amp; Price (\\$) \\\\
\\hline
Gnat      &amp; per gram    &amp; 13.65      \\\\
&amp; each        &amp; 0.01       \\\\
Gnu       &amp; stuffed     &amp; 92.50      \\\\
Emu       &amp; stuffed     &amp; 33.33      \\\\
Armadillo &amp; frozen      &amp; 8.99       \\\\
\\hline
\\end{tabular}'

ktex &lt;- as.kable(tex)

class(ktex)

attributes(ktex)

ktex

# file path

toy &lt;- system.file('examples/toy/toy.tex',package = 'texPreview')

ktex_path &lt;- as.kable(toy)

class(ktex_path)

attributes(ktex_path)

ktex_path

# texpreview_input class
  # this is the same output class as one would get with
  # tex_preview(tex,returnType = 'input')

toy_input &lt;- structure(sprintf('\\input{%s}',toy),class = 'texpreview_input')

toy_input

as.kable(toy_input)

</code></pre>

<hr>
<h2 id='build_usepackage'>Build usepackage command for TeX document</h2><span id='topic+build_usepackage'></span>

<h3>Description</h3>

<p>input TeX package name and optional package functions to create usepackage call
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_usepackage(pkg, options = NULL, uselibrary = NULL, chk.inst = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="build_usepackage_+3A_pkg">pkg</code></td>
<td>
<p>character, name of TeX package</p>
</td></tr>
<tr><td><code id="build_usepackage_+3A_options">options</code></td>
<td>
<p>character, name(s) of options to use in the package</p>
</td></tr>
<tr><td><code id="build_usepackage_+3A_uselibrary">uselibrary</code></td>
<td>
<p>character, part of document preamble to specify a uselibrary call related to package</p>
</td></tr>
<tr><td><code id="build_usepackage_+3A_chk.inst">chk.inst</code></td>
<td>
<p>logical, invokes a check to see if pkg is currently installed on system (default FALSE)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>if options and uselibrary are NULL (default) then only the call for the package is returned.
See the TeX wikibook for more information <a href="https://en.wikibooks.org/wiki/LaTeX/Document_Structure#Packages">https://en.wikibooks.org/wiki/LaTeX/Document_Structure#Packages</a> on
the usepackage command. If chk.inst finds that the package is not installed on system function returns NULL.
</p>


<h3>Value</h3>

<p>character
</p>


<h3>Examples</h3>

<pre><code class='language-R'>build_usepackage(pkg = 'xcolor')
build_usepackage(pkg = 'xcolor',options = 'usenames')

#build many at once using mapply

geom.opts=c('paperwidth=35cm','paperheight=35cm','left=2.5cm','top=2.5cm')
use.opts="\\usetikzlibrary{mindmap,backgrounds}"

unlist(mapply(build_usepackage,
pkg =        list('times','geometry','tikz'),
options=     list(NULL   ,geom.opts ,NULL),
uselibrary = list(NULL   ,NULL      ,use.opts)
))
</code></pre>

<hr>
<h2 id='check_requirements'>Check TeX Requirements for Package</h2><span id='topic+check_requirements'></span>

<h3>Description</h3>

<p>Checks if the required TeX libraries are installed on the system to render the
internal tex file template.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_requirements()
</code></pre>


<h3>Value</h3>

<p>logical
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#check_requirements()
</code></pre>

<hr>
<h2 id='get_texpackages'>Get list of TeX packages installed on System</h2><span id='topic+get_texpackages'></span>

<h3>Description</h3>

<p>Fetch all TeX packages currently installed on system
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_texpackages()
</code></pre>


<h3>Details</h3>

<p>If OS is Windows function checks against MikTex else function checks against TexLive.
</p>


<h3>Value</h3>

<p>character
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#head(get_texpackages())
</code></pre>

<hr>
<h2 id='tex_opts'>Default and current tex options</h2><span id='topic+tex_opts'></span><span id='topic+tex_opts_current'></span>

<h3>Description</h3>

<p>Options for functions in the texPreview package. When running R code, the object <code>tex_opts</code>
(default options) is not modified by chunk headers (local chunk options are
merged with default options), whereas <code>tex_opts_current</code> (current options)
changes with different chunk headers and it always reflects the options for
the current chunk.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tex_opts

tex_opts_current
</code></pre>


<h3>Format</h3>

<p>An object of class <code>list</code> of length 5.
</p>
<p>An object of class <code>list</code> of length 5.
</p>


<h3>Details</h3>

<p>Normally we set up the global options once in the first code chunk in a
document using <code>tex_opts$set()</code>, so that all <em>latter</em> chunks will
use these options. Note the global options set in one chunk will not affect
the options in this chunk itself, and that is why we often need to set global
options in a separate chunk.
</p>
<p>Below is a list of default chunk options, retrieved via
<code>tex_opts$get()</code>:
</p>
<p>These options correspond to fields in the direct call to <code><a href="#topic+tex_preview">tex_preview</a></code>, which are listed in explained
</p>
<p>in the help manual.
</p>


<h3>Note</h3>

<p><code>tex_opts_current</code> is read-only in the sense that it does nothing if
you call <code>tex_opts_current$set()</code>; you can only query the options via
<code>tex_opts_current$get()</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tex_opts$get()
</code></pre>

<hr>
<h2 id='tex_preview'>Render and Preview snippets of TeX in R Viewer</h2><span id='topic+tex_preview'></span>

<h3>Description</h3>

<p>input TeX script into the function and it renders a pdf and
converts it an image which is sent to Viewer.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tex_preview(
  obj,
  tex_lines = NULL,
  stem = "tex_temp",
  overwrite = TRUE,
  keep_pdf = FALSE,
  tex_message = FALSE,
  fileDir = tex_opts$get("fileDir"),
  margin = tex_opts$get("margin"),
  imgFormat = tex_opts$get("imgFormat"),
  returnType = tex_opts$get("returnType"),
  resizebox = tex_opts$get("resizebox"),
  usrPackages = tex_opts$get("usrPackages"),
  engine = tex_opts$get("engine"),
  cleanup = tex_opts$get("cleanup"),
  density = tex_opts$get("density"),
  svg_max = tex_opts$get("svg_max"),
  print.xtable.opts = tex_opts$get("print.xtable.opts"),
  opts.html = tex_opts$get("opts.html"),
  markers = interactive(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tex_preview_+3A_obj">obj</code></td>
<td>
<p>object to convert to TeX script</p>
</td></tr>
<tr><td><code id="tex_preview_+3A_tex_lines">tex_lines</code></td>
<td>
<p>vector of character, in case of special needs, instead of
asking texPreview to build up, you may choose to pass in the contents of the
complete LaTeX file directly. It should be a vector of character with each
element as a line of raw TeX code.</p>
</td></tr>
<tr><td><code id="tex_preview_+3A_stem">stem</code></td>
<td>
<p>character, name to use in output files, Default: &quot;tex_temp&quot;</p>
</td></tr>
<tr><td><code id="tex_preview_+3A_overwrite">overwrite</code></td>
<td>
<p>logical, controls if overwriting of output
stem* files given their existences, Default: TRUE</p>
</td></tr>
<tr><td><code id="tex_preview_+3A_keep_pdf">keep_pdf</code></td>
<td>
<p>logical, controls if the rendered pdf file should be kept
or deleted, Default: FALSE</p>
</td></tr>
<tr><td><code id="tex_preview_+3A_tex_message">tex_message</code></td>
<td>
<p>logical, controls if latex executing messages
are displayed in console. Default: FALSE</p>
</td></tr>
<tr><td><code id="tex_preview_+3A_filedir">fileDir</code></td>
<td>
<p>character, output destination. If NULL a temp.dir()
will be used and no output will be saved, Default: tex_opts$get('fileDir')</p>
</td></tr>
<tr><td><code id="tex_preview_+3A_margin">margin</code></td>
<td>
<p>table margin for pdflatex call, Default: tex_opts$get('margin')</p>
</td></tr>
<tr><td><code id="tex_preview_+3A_imgformat">imgFormat</code></td>
<td>
<p>character, defines the type of image the PDF is
converted to Default: tex_opts$get('imgFormat')</p>
</td></tr>
<tr><td><code id="tex_preview_+3A_returntype">returnType</code></td>
<td>
<p>character, one of &quot;viewer&quot;, &quot;html&quot;, or &quot;tex&quot;
determining appropriate return type for the rendering process,
Default: tex_opts$get('returnType')</p>
</td></tr>
<tr><td><code id="tex_preview_+3A_resizebox">resizebox</code></td>
<td>
<p>logical, forces a tabular tex object to be constrained on the
margins of the document, Default: tex_opts$get('resizebox')</p>
</td></tr>
<tr><td><code id="tex_preview_+3A_usrpackages">usrPackages</code></td>
<td>
<p>character, vector of usepackage commands,
see details for string format</p>
</td></tr>
<tr><td><code id="tex_preview_+3A_engine">engine</code></td>
<td>
<p>character, specifies which latex to pdf engine to use
('pdflatex','xelatex','lualatex'), Default: tex_opts$get('engine')</p>
</td></tr>
<tr><td><code id="tex_preview_+3A_cleanup">cleanup</code></td>
<td>
<p>character, vector of file extensions to clean up after
building pdf, Default: tex_opts$get('cleanup')</p>
</td></tr>
<tr><td><code id="tex_preview_+3A_density">density</code></td>
<td>
<p>numeric, controls the density of the image.
Default is 150: tex_opts$get('density)</p>
</td></tr>
<tr><td><code id="tex_preview_+3A_svg_max">svg_max</code></td>
<td>
<p>numeric, maximum svg file size allowable to preview,
Default: tex_opts$get('svg_max')</p>
</td></tr>
<tr><td><code id="tex_preview_+3A_print.xtable.opts">print.xtable.opts</code></td>
<td>
<p>list, contains arguments to pass to print.table,
relevant only if xtable is used as the input,
Default: tex_opts$get('print.xtable.opts')</p>
</td></tr>
<tr><td><code id="tex_preview_+3A_opts.html">opts.html</code></td>
<td>
<p>list, html options, Default: tex_opts$get('opts.html')</p>
</td></tr>
<tr><td><code id="tex_preview_+3A_markers">markers</code></td>
<td>
<p>logical, if TRUE then RStudio markers will be invoked to
create links for the log file on rendering errors, Default: interactive()</p>
</td></tr>
<tr><td><code id="tex_preview_+3A_...">...</code></td>
<td>
<p>passed to <a href="base.html#topic+system2">system2</a></p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>tex_preview</code> is an <code style="white-space: pre;">&#8288;S3 method&#8288;</code> that can be used to preview TeX output from different
object classes.
</p>
<p>Built-in support includes:
</p>

<ul>
<li><p> character (tex lines)
</p>
</li>
<li><p> knitr_kable (kable/kableExtra)
</p>
</li>
<li><p> xtable
</p>
</li>
<li><p> texreg
</p>
</li>
<li><p> equatiomatic
</p>
</li></ul>

<br><details><summary> <span title='Click to Expand'> System Requirements </span> </summary>
<p>The function assumes the system has pdflatex installed and it is  defined in the PATH.
</p>
</details>
<br><details><summary> <span title='Click to Expand'> TeX Packages </span> </summary>
<p>To add packages to the tex file on render there are two options
</p>

<ul>
<li><p> Use <a href="#topic+build_usepackage">build_usepackage</a> and use the input
argument <code>usrPackages</code>.
</p>
</li>
<li><p> Append to the input object <code style="white-space: pre;">&#8288;\\usepackage{...}&#8288;</code> calls, they will be parsed
and added the to rendering.
</p>
</li></ul>

</details>
<br><details><summary> <span title='Click to Expand'> Images </span> </summary>

<ul>
<li><p> An image file of the name stem with the extension specified in <code>imgFormat</code>.
</p>
</li>
<li><p> The default extension is png.
</p>
</li></ul>

</details>
<br><details><summary> <span title='Click to Expand'> Side effects </span> </summary>

<ul>
<li><p> The function writes two files to disk in the <code>fileDir</code>
</p>

<ul>
<li><p> Image file
</p>
</li>
<li><p> TeX script
</p>
</li></ul>

</li>
<li><p> The rendering files are removed up from the <code>fileDir</code>. This can
be controlled using the <code>cleanup</code> argument or <code>tex_opts$get('cleanup')</code>
</p>
</li></ul>

</details>


<h3>Value</h3>

<p>The output of the function is dependent on the value of returnType:
</p>

<ul>
<li><p> viewer: NULL
</p>

<ul>
<li><p> magick image is printed in the internal viewer
</p>
</li></ul>

</li>
<li><p> tex:
</p>

<ul>
<li><p> character, TeX lines
</p>
</li>
<li><p> printed 'asis' in RMarkdown
</p>
</li></ul>

</li>
<li><p> input: character
</p>

<ul>
<li><p> path to the file containing the tex wrapped in an input call
</p>
</li>
<li><p> printed 'asis' in RMarkdown
</p>
</li></ul>

</li>
<li><p> html: magick image
</p>

<ul>
<li><p> Printed as an HTML document in the internal viewer
</p>
</li>
<li><p> Printed as an image in RMarkdown
</p>
</li></ul>

</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>data('iris')
if(interactive()){

# Raw TeX

tex &lt;- '\\begin{tabular}{llr}
\\hline
\\multicolumn{2}{c}{Item} \\\\
\\cline{1-2}
Animal    &amp; Description &amp; Price (\\$) \\\\
\\hline
Gnat      &amp; per gram    &amp; 13.65      \\\\
&amp; each        &amp; 0.01       \\\\
Gnu       &amp; stuffed     &amp; 92.50      \\\\
Emu       &amp; stuffed     &amp; 33.33      \\\\
Armadillo &amp; frozen      &amp; 8.99       \\\\
\\hline
\\end{tabular}'

# knitr kable

 mtcars |&gt;
   head() |&gt;
   knitr::kable("latex") |&gt;
   tex_preview()

# with svg output pan/zoom is enabled in the internal viewer

tex_preview(obj = tex,stem = 'eq',imgFormat = 'svg')

# use tex_lines parameter to pass full document

tikz_path &lt;- system.file(
                  'examples/tikz/credit_rationing.tex',
                  package = 'texPreview'
                  )

tex_preview(tex_lines = readLines(tikz_path))

}
</code></pre>

<hr>
<h2 id='tex_requirements'>Query TeX file for Required Packages</h2><span id='topic+tex_requirements'></span>

<h3>Description</h3>

<p>Parse TeX file for usepackage calls and return a vector of the packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tex_requirements(
  file = system.file("tmpl.tex", package = "texPreview"),
  lines = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tex_requirements_+3A_file">file</code></td>
<td>
<p>character, Path to TeX file, Default: system.file(&quot;tmpl.tex&quot;, package = &quot;texPreview&quot;)</p>
</td></tr>
<tr><td><code id="tex_requirements_+3A_lines">lines</code></td>
<td>
<p>character, character vector containing TeX script, Default: NULL</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If file is NULL then function will use the the value in lines.
The default path used in file is the internal template that the package uses.
</p>


<h3>Value</h3>

<p>character
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tex_requirements()
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
