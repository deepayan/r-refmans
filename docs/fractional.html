<!DOCTYPE html><html lang="en"><head><title>Help for package fractional</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {fractional}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#fractional'><p>Representation of a numeric vector in vulgar fractional form</p></a></li>
<li><a href='#Math.fractional'><p>Method for the group generic function for the elementary mathematical functions</p></a></li>
<li><a href='#numerators'><p>Extract the parts of a fractional object</p></a></li>
<li><a href='#numerical'><p>Convert a fractional object to the equivalent numeric object</p></a></li>
<li><a href='#Ops.fractional'><p>Method for the group generic function for the arithmetic operators</p></a></li>
<li><a href='#rat'><p>Calculate Rational Approximation Using Continued Fraction Methods</p></a></li>
<li><a href='#unfractional'><p>Demote a fractional object back to a numeric one</p></a></li>
<li><a href='#vfractional'><p>Vectorized form for fractional</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Vulgar Fractions in R</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.3</td>
</tr>
<tr>
<td>Author:</td>
<td>Bill Venables</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Bill Venables &lt;bill.venables@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>The main function of this package allows numerical vector objects to
  be displayed with their values in vulgar fractional form.  This is convenient if
  patterns can then be more easily detected.  In some cases replacing the components
  of a numeric vector by a rational approximation can also be expected to remove
  some component of round-off error.  The main functions form a re-implementation
  of the functions 'fractions' and 'rational' of the MASS package, but using a
  radically improved programming strategy.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Suggests:</td>
<td>stats, MASS, knitr, rmarkdown, ggplot2, dplyr</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>5.0.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2016-02-13 06:51:58 UTC; bill</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2016-02-15 16:03:13</td>
</tr>
</table>
<hr>
<h2 id='fractional'>Representation of a numeric vector in vulgar fractional form</h2><span id='topic+as.character.fractional'></span><span id='topic+fractional'></span><span id='topic+print.charFrac'></span><span id='topic+print.fractional'></span>

<h3>Description</h3>

<p>The object is flagged so that if it is coerced to <code>character</code>,
or printed, the numerical quantities are represented by a rational
approximation.  In other respects the numerical object behaves as
normally.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fractional(x, eps = 1e-06, maxConv = 20, sync = FALSE)

## S3 method for class 'fractional'
as.character(x, eps = attr(x, "eps"), maxConv = attr(x,
  "maxConv"), ...)

## S3 method for class 'charFrac'
print(x, ...)

## S3 method for class 'fractional'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fractional_+3A_x">x</code></td>
<td>
<p>A numeric object</p>
</td></tr>
<tr><td><code id="fractional_+3A_eps">eps</code></td>
<td>
<p>An absolute error tolerance</p>
</td></tr>
<tr><td><code id="fractional_+3A_maxconv">maxConv</code></td>
<td>
<p>An upper limit on the number of convergents to use in the
continued fractions.</p>
</td></tr>
<tr><td><code id="fractional_+3A_sync">sync</code></td>
<td>
<p>A logical value.  Should the numerical value be changed to match
the rational approximation, as closely as possible with floating point, (TRUE)? Or,
should it be left and used in its original state (FALSE)?</p>
</td></tr>
<tr><td><code id="fractional_+3A_...">...</code></td>
<td>
<p>Currently ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric object of class <code>"fractional"</code>.
</p>


<h3>Methods (by generic)</h3>


<ul>
<li> <p><code>as.character</code>: S3 method for coercion to character,
producing an object inheriting from class <code>"charFrac"</code>
</p>
</li>
<li> <p><code>print</code>: Print method for class <code>"charFrac"</code> objects, unquoted.
</p>
</li>
<li> <p><code>print</code>: Print method for <code>"fractional"</code> objects
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="MASS.html#topic+fractions">fractions</a></code> for a similar functionality.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>(M &lt;- solve(cbind(1, contr.helmert(5))))
(Mf &lt;- fractional(M))     ## print method right justifies
(Mc &lt;- as.character(Mf))  ## print method left justifies
(Mn &lt;- numerical(Mc))
set.seed(123)
u &lt;- matrix(runif(10), 2, 5)
(uf &lt;- fractional(u))
(us &lt;- fractional(u, sync = TRUE))  ## may look different!
unfractional(uf) - unfractional(us)  ## rational approximation errors
</code></pre>

<hr>
<h2 id='Math.fractional'>Method for the group generic function for the elementary mathematical functions</h2><span id='topic+Math.fractional'></span>

<h3>Description</h3>

<p>Allows graceful operations with mathematical functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'fractional'
Math(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Math.fractional_+3A_x">x</code></td>
<td>
<p>A numerical object flagged as <code>fractional</code></p>
</td></tr>
<tr><td><code id="Math.fractional_+3A_...">...</code></td>
<td>
<p>Passed on to further methods (but usually not required)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric object with the results of the computations, but NOT flagged
as of class <code>"fractional"</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>(M &lt;- fractional(solve(cbind(1, contr.helmert(5)))))
(M0 &lt;- abs(M)*sign(M))  ## fractional flag lost
</code></pre>

<hr>
<h2 id='numerators'>Extract the parts of a fractional object</h2><span id='topic+denominators'></span><span id='topic+denominators.charFrac'></span><span id='topic+denominators.default'></span><span id='topic+denominators.fractional'></span><span id='topic+numerators'></span><span id='topic+numerators.charFrac'></span><span id='topic+numerators.default'></span><span id='topic+numerators.fractional'></span>

<h3>Description</h3>

<p>Generic function for extracting numerators with methods for <code>"fractional"</code> or
<code>"charFrac"</code> objects
</p>
<p>Generic function for extracting denominators with methods for <code>"fractional"</code> or
<code>"charFrac"</code> objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>numerators(x)

## S3 method for class 'charFrac'
numerators(x)

## S3 method for class 'fractional'
numerators(x)

## Default S3 method:
numerators(x)

denominators(x)

## S3 method for class 'charFrac'
denominators(x)

## S3 method for class 'fractional'
denominators(x)

## Default S3 method:
denominators(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="numerators_+3A_x">x</code></td>
<td>
<p>An object of class <code>"fractional"</code> or
<code>"charFrac"</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>integer</code> vector of numerators
</p>
<p>An <code>integer</code> vector of denominators
</p>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>charFrac</code>: <code>numerators</code> method function for <code>"charFrac"</code> objects
</p>
</li>
<li> <p><code>fractional</code>: <code>numerators</code> method function for <code>"fractional"</code> objects
</p>
</li>
<li> <p><code>default</code>: Default <code>numerators</code> method for <code>numeric</code> objects
</p>
</li>
<li> <p><code>charFrac</code>: <code>denominators</code> method function for <code>"charFrac"</code> objects
</p>
</li>
<li> <p><code>fractional</code>: <code>denominators</code> method function for <code>"fractional"</code> objects
</p>
</li>
<li> <p><code>default</code>: Default <code>denominators</code> method for <code>numeric</code> objects
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>(pi_approx &lt;- vfractional(base::pi, eps = 0, maxConv = 1:10))
numerators(pi_approx)
denominators(pi_approx)
</code></pre>

<hr>
<h2 id='numerical'>Convert a fractional object to the equivalent numeric object</h2><span id='topic+numerical'></span><span id='topic+numerical.charFrac'></span><span id='topic+numerical.default'></span><span id='topic+numerical.fractional'></span>

<h3>Description</h3>

<p>Convert an object of class <code>"fractional"</code> or <code>"charFrac"</code> to a purely
numeric object.  This is effectively a method function for the <code>.Primitive</code>
generic function <code>as.numeric</code> but written as a separate function for purely
technical reasons.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>numerical(vulgar)

## S3 method for class 'fractional'
numerical(vulgar)

## S3 method for class 'charFrac'
numerical(vulgar)

## Default S3 method:
numerical(vulgar)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="numerical_+3A_vulgar">vulgar</code></td>
<td>
<p>character string form of a class 'fractional' object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>numeric</code> object as represented by its (usually <code>fractional</code>) display.
</p>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>fractional</code>: Method for <code>"fractional"</code> objects
</p>
</li>
<li> <p><code>charFrac</code>: Method for <code>"charFrac"</code> objects
</p>
</li>
<li> <p><code>default</code>: Default method for <code>numerical</code> generic
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>suppressPackageStartupMessages(library(dplyr))
m &lt;- 2*diag(5)
m[abs(row(m) - col(m)) == 1] &lt;- -1
m  ## How much roundoff error does inverting entail?
(mi  &lt;- solve(m) %&gt;% fractional) ## patterned inverse
mi * max(denominators(mi)) ## clearer pattern
m1 &lt;- solve(mi)
range(m1 - m)           ## roundoff still present
m2 &lt;- m1 %&gt;% numerical  ## remove roundoff error - hopefully!
identical(m2, m)        ## no roundoff
</code></pre>

<hr>
<h2 id='Ops.fractional'>Method for the group generic function for the arithmetic operators</h2><span id='topic+Ops.fractional'></span>

<h3>Description</h3>

<p>Provides arithmetic operations for numeric objects or of class <code>"fractional"</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'fractional'
Ops(e1, e2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Ops.fractional_+3A_e1">e1</code></td>
<td>
<p>A numeric objet, possibly of class <code>"fractional"</code></p>
</td></tr>
<tr><td><code id="Ops.fractional_+3A_e2">e2</code></td>
<td>
<p>A numeric objet, possibly of class <code>"fractional"</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of the arithmetic operation, flagged as class
<code>"fractional"</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>(M &lt;- fractional(1:10/7))
M + 1
1 + M + M^2

</code></pre>

<hr>
<h2 id='rat'>Calculate Rational Approximation Using Continued Fraction Methods</h2><span id='topic+.ratr'></span><span id='topic+rat'></span><span id='topic+ratr'></span>

<h3>Description</h3>

<p>This is a behind-the-scenes function not likely to be used other than
internally within the package.  It computes the rational approximations for
each value in the principal argument.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rat(x, eps = 1e-06, maxConv = 20L)

.ratr(x, eps = 1e-06, maxConv = 20)

ratr(x, eps = 1e-06, maxConv = 20)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rat_+3A_x">x</code></td>
<td>
<p>A numeric vector for which rational approximations are required.</p>
</td></tr>
<tr><td><code id="rat_+3A_eps">eps</code></td>
<td>
<p>An absolute error tolerance on the approximation</p>
</td></tr>
<tr><td><code id="rat_+3A_maxconv">maxConv</code></td>
<td>
<p>An upper limit on the number of convergents that the continued
fraction expansion may employ.  The fraction is terminated once the desired
accuracy is met (or the upper limit is about to be exceeded).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A 3 column matrix giving, respectively, the numerators, denominators
and number of convergents needed to achieve the error tolerance, in the columns
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>rat</code>: C++ version of the same function used for speed
</p>
</li>
<li> <p><code>.ratr</code>: Workhorse function for a single value
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="#topic+rat">rat</a></code> which has the same functionality, but is coded in <code>C++</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fractional(base::pi)
ratr(base::pi)

set.seed(123)
(u &lt;- matrix(runif(10), 2, 5))
(ru &lt;- ratr(u, eps = 1.0e-3, maxConv = 6))
(abs_error &lt;- matrix(abs(u - ru[, 1]/ru[, 2]), 2, 5))

</code></pre>

<hr>
<h2 id='unfractional'>Demote a fractional object back to a numeric one</h2><span id='topic+unfractional'></span>

<h3>Description</h3>

<p>Given an object of class <code>"fractional"</code> this simple function
removes the attributes that signal that it is to be treated as a
fractional object, thus returning it to its original <code>numeric</code>
status alone
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unfractional(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="unfractional_+3A_x">x</code></td>
<td>
<p>A <code>"fractional"</code> object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A simple <code>numeric</code> object like <code>x</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>(tst &lt;- fractional(matrix(0:9/10, 2, 5)))
(tst &lt;- unfractional(tst))
</code></pre>

<hr>
<h2 id='vfractional'>Vectorized form for fractional</h2><span id='topic+vfractional'></span>

<h3>Description</h3>

<p>A function which allows any or all of the first three
arguments of <code>fractional</code> to be vectors, with short
vectors recycled in the usual way.  Note that the return
value is a <em>character string</em> vector and may not be
used in arithmetic operations
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vfractional(x, eps = 1e-06, maxConv = 20)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="vfractional_+3A_x">x</code></td>
<td>
<p>as for <code>fractional</code></p>
</td></tr>
<tr><td><code id="vfractional_+3A_eps">eps</code></td>
<td>
<p>as for <code>fractional</code>, but may be a vector</p>
</td></tr>
<tr><td><code id="vfractional_+3A_maxconv">maxConv</code></td>
<td>
<p>as for <code>fractional</code> but may be a vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string vector of class <code>"charFrac"</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>oldOpt &lt;- options(scipen = 15)
pi_approx &lt;- vfractional(base::pi, eps = 0, maxConv = 1:10)
within(data.frame(pi_approx, stringsAsFactors = FALSE), {
  value = numerical(pi_approx)
  error = signif(base::pi - value, 3)
  n = seq_along(value) - 1
})[, c("n", "pi_approx", "value", "error")]
options(oldOpt)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
