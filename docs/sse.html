<!DOCTYPE html><html><head><title>Help for package sse</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {sse}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#Extracting+20actual+20elements+20from+20objects+20of+20class+20powPar'><p>Extracting an actual n, theta, and xi</p></a></li>
<li><a href='#Extracting+20from+20objects+20of+20class+20powPar'><p>Extracting from an object of class powPar</p></a></li>
<li><a href='#inspect'><p>Inspection Plot</p></a></li>
<li><a href='#plot'><p>Power Plot</p></a></li>
<li><a href='#powCalc'><p>Power calculation</p></a></li>
<li><a href='#power-class'><p>Class &quot;power&quot; and its subclasses &quot;powPar&quot;, &quot;powFun&quot;, &quot;powCalc&quot;, &quot;powEx&quot;.</p></a></li>
<li><a href='#powEx'>
<p>Defining the example to be used and the method to be used for sample</p>
size estimation.</a></li>
<li><a href='#powPar'><p>Constructing an object of class 'powPar'.</p></a></li>
<li><a href='#refine'><p>Refining the estimation</p></a></li>
<li><a href='#SampleSize-class'><p>Class &quot;SampleSize&quot;</p></a></li>
<li><a href='#tex'><p>Preparing text for using with LaTeX</p></a></li>
<li><a href='#update'><p>Updating a powCalc or a power object.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Sample Size Estimation</td>
</tr>
<tr>
<td>Version:</td>
<td>0.7-17</td>
</tr>
<tr>
<td>Author:</td>
<td>Thomas Fabbro [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Thomas Fabbro &lt;thomas.fabbro@unibas.ch&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://r-forge.r-project.org/projects/power/">http://r-forge.r-project.org/projects/power/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="http://r-forge.r-project.org/projects/power/">http://r-forge.r-project.org/projects/power/</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Provides functions to evaluate user-defined power functions for a parameter range, and draws a sensitivity plot. It also provides a resampling procedure for semi-parametric sample size estimation and methods for adding information to a Sweave report.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>Imports:</td>
<td>methods, grid, lattice, graphics, stats, parallel</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Repository/R-Forge/Project:</td>
<td>power</td>
</tr>
<tr>
<td>Repository/R-Forge/Revision:</td>
<td>44</td>
</tr>
<tr>
<td>Repository/R-Forge/DateTimeStamp:</td>
<td>2021-05-19 12:29:42</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-05-19 15:20:02 UTC</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-05-19 12:49:00 UTC; rforge</td>
</tr>
</table>
<hr>
<h2 id='Extracting+20actual+20elements+20from+20objects+20of+20class+20powPar'>Extracting an actual n, theta, and xi</h2><span id='topic+n'></span><span id='topic+theta'></span><span id='topic+xi'></span>

<h3>Description</h3>

<p>Extracting the actual <code>n</code>, <code>theta</code>, or <code>xi</code> from an
object of class <a href="#topic+powPar-class">powPar</a>. This functions are needed within
the 'power-function' for extracting always the actual element during
evaluation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>n(x)
theta(x)
xi(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Extracting+2B20actual+2B20elements+2B20from+2B20objects+2B20of+2B20class+2B20powPar_+3A_x">x</code></td>
<td>
<p>An object of class <a href="#topic+powPar-class">powPar</a>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>During the evaluation process with <code><a href="#topic+powCalc">powCalc</a></code> every
combination of <code>n</code>, <code>theta</code>, and <code>xi</code> is evaluated.  The
described functions extract the actual <code>n</code>, <code>theta</code>, or
<code>xi</code> during the evaluation process. The evaluation process with
<code><a href="#topic+powCalc">powCalc</a></code> changes the actual element to ensure that all
combinations are evaluated.
</p>
<p>When a objcect of class <a href="#topic+powPar-class">powPar</a> is created, the first
element of <code>n</code>, <code>theta</code>, or <code>xi</code> is also set to be the
actual element.  This allows to use this method also outside the
evaluation with <code><a href="#topic+powCalc">powCalc</a></code> for testing the 'power function'.
</p>


<h3>Value</h3>

<p>An integer value for <code>n</code>. A numeric value for <code>theta</code>
and <code>xi</code>.</p>


<h3>Note</h3>

<p>Do not use the method <code>pp</code> inside the power-function
e.g. like <code>pp(x, "n")</code>, because this would extract the whole
vector of <code>n</code> and not just the actual element.</p>


<h3>See Also</h3>

<p><code><a href="#topic+pp">pp</a></code>, for extracting all other elements provided by
the user (exept <code>n</code>, <code>theta</code>, and <code>xi</code>.</p>


<h3>Examples</h3>

<pre><code class='language-R'>## defining the range of n and theta to be evaluated
psi &lt;- powPar(n = seq(from = 20, to = 60, by = 2),
              theta = seq(from = 0.5, to = 1.5, by = 0.1),
              muA = 0,
              muB = 1)

## extracting all elements of psi individually, starting with the first
n(psi)
theta(psi)
xi(psi)

## extracting all elements, not just the actual:
pp(psi, name = "n")
pp(psi, name = "theta")
pp(psi, name = "xi")

## an example of usage
powFun &lt;- function(psi){
  power.t.test(n = n(psi),
               delta = pp(psi, "muA") - pp(psi, "muB"),
               sd = theta(psi)
               )$power
}

## testing the power-function
powFun(psi)

</code></pre>

<hr>
<h2 id='Extracting+20from+20objects+20of+20class+20powPar'>Extracting from an object of class <a href="#topic+powPar-class">powPar</a></h2><span id='topic+pp'></span>

<h3>Description</h3>

<p>All information needed for the 'power-function' should be provided by
an object of class <code>powPar</code>.  To extract this information the
function <code>pp</code> should be used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pp(x, name)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Extracting+2B20from+2B20objects+2B20of+2B20class+2B20powPar_+3A_x">x</code></td>
<td>
<p>An object of class <a href="#topic+powPar-class">powPar</a>.</p>
</td></tr>
<tr><td><code id="Extracting+2B20from+2B20objects+2B20of+2B20class+2B20powPar_+3A_name">name</code></td>
<td>
<p>A character indicating the name of the object to be
extracted.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Everything that can be stored within a list is possible.</p>


<h3>Note</h3>

<p>The name <code>pp</code> is an abbreviation for power parameter.</p>


<h3>See Also</h3>

<p>For extracting individual elements of <code>n</code>, <code>theta</code>
and <code>xi</code> the functions <code><a href="#topic+n">n</a></code>, <code><a href="#topic+theta">theta</a></code>, or
<code><a href="#topic+xi">xi</a></code> should be used.</p>


<h3>Examples</h3>

<pre><code class='language-R'>psi &lt;- powPar(theta = seq(from = 0.5, to = 1.5, by = 0.5),
              n = seq(from = 10, to = 30, by = 10),
              muA = 0,
              muB = 1)
              

pp(psi, name = "muA")

## an example of usage
powFun &lt;- function(psi){
  power.t.test(n = n(psi),
               delta = pp(psi, "muA") - pp(psi, "muB"),
               sd = theta(psi)
               )$power
}

## testing the power-function
powFun(psi)
</code></pre>

<hr>
<h2 id='inspect'>Inspection Plot</h2><span id='topic+inspect'></span>

<h3>Description</h3>

<p>Creating a plot that allows to inspect the sample size calculation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inspect(object)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="inspect_+3A_object">object</code></td>
<td>
<p>An object of class <a href="#topic+power-class">power</a>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The plot shows for every evaluated theta the sample size and
the power on a transformed scale.
The method used for sample size estimation 'step' or 'lm' is
indicated.
If the method 'lm' is used a red regression line is shown for the
range that was used for estimation.
</p>


<h3>Value</h3>

<p>A plot is generated but nothing is returned.</p>


<h3>Examples</h3>

<pre><code class='language-R'>## defining the range of n and theta to be evaluated
psi &lt;- powPar(theta = seq(from = 0.5, to = 1.5, by = 0.1),
              n = seq(from = 20, to = 60, by = 2),
              muA = 0,
              muB = 1)

## defining a power-function               
powFun &lt;- function(psi){
  power.t.test(n = n(psi)/2,
               delta = pp(psi, "muA") - pp(psi, "muB"),
               sd = theta(psi)
               )$power
}

## evaluating the power-function for all combinations of n and theta
calc &lt;- powCalc(psi, powFun)

## adding example at theta of 1 and power of 0.9
pow &lt;- powEx(calc, theta = 1, power = 0.9)

## drawing an inspection plot
inspect(pow)
</code></pre>

<hr>
<h2 id='plot'>Power Plot</h2><span id='topic+plot'></span>

<h3>Description</h3>

<p>A sensitivity plot (called power plot) for the sample size
calculation. Using a contour for a given power, it shows how sample
size changes if <code>theta</code> is varied.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot(x, y, ...)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_+3A_x">x</code></td>
<td>
<p>The object of class <a href="#topic+power-class">power</a> used for plotting</p>
</td></tr>
<tr><td><code id="plot_+3A_y">y</code></td>
<td>
<p>Not used</p>
</td></tr>
<tr><td><code id="plot_+3A_...">...</code></td>
<td>
<p>additional arguments implemented:
</p>

<ul>
<li><p><code>at = c(0.9, 0.8, 0.85, 0.95)</code> a numeric vector giving
breakpoints along the power range.  Contours (if any) will be
drawn at these values. The contour line of the example will be
emphasised. If <code>example = FALSE</code> the first number
indicates, which contour should be emphasized.
</p>
</li>
<li><p><code>smooth = FALSE</code> logical that indicates if the contours
should be smoothed. If TRUE a span of 0.75 will be used by
default. Alternatively the argument smooth can also take a
numeric value that will be used for smoothing.See the
documentation of the function <code>loess</code> for details.
</p>
</li>
<li><p><code>example = TRUE</code> a logical indicating if an example
should be drawn or not. An example is an arrow that points from
the particular <code>theta</code> on the x-axis to the contour line
and to the sample size on the y-axis.
</p>
</li>
<li><p><code>reflines = TRUE</code> a logical indicating if reference
lines should be drawn or not. Reference lines are drawn at every
n and theta that was used for evaluating the power function. If
reference lines are drawn the background will be grey.
</p>
</li></ul>

</td></tr>
</table>


<h3>Details</h3>

<p>Generates a contour plot with theta on the x-axis and n on the y-axis
and the contours for the estimated power (indicated with the argument
at).
</p>


<h3>Value</h3>

<p>A plot is generated but nothing is returned.</p>


<h3>See Also</h3>

<p><code><a href="#topic+inspect">inspect</a></code> for drawing an inspection plot and
<code><a href="lattice.html#topic+levelplot">levelplot</a></code> for further arguments that can be passed to
plot.</p>


<h3>Examples</h3>

<pre><code class='language-R'>## defining the range of n and theta to be evaluated
psi &lt;- powPar(theta = seq(from = 0.5, to = 1.5, by = 0.1),
              n = seq(from = 20, to = 60, by = 2),
              muA = 0,
              muB = 1)

## defining a power-function     
powFun &lt;- function(psi){
  power.t.test(n = n(psi)/2,
               delta = pp(psi, "muA") - pp(psi, "muB"),
               sd = theta(psi)
               )$power
}

## evaluating the power-function for all combinations of n and theta
calc &lt;- powCalc(psi, powFun)

## adding example at theta of 1 and power of 0.9
pow &lt;- powEx(calc, theta = 1, power = 0.9)

## drawing the power plot with 3 contour lines
plot(pow,
     xlab = "Standard Deviation",
     ylab = "Total Sample Size",
     at = c(0.85, 0.9, 0.95))

## without example the contour line at the first element of at is bold
plot(pow, example = FALSE)
</code></pre>

<hr>
<h2 id='powCalc'>Power calculation</h2><span id='topic+powCalc'></span>

<h3>Description</h3>

<p>The user-defined 'power-function' provided as <code>statistic</code> will be
evaluated for the whole range of <code>n</code>, <code>theta</code>, and <code>xi</code>
as specified in the <a href="#topic+powPar-class">powPar</a>-object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>powCalc(object, statistic, n.iter = NA, cluster = FALSE)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="powCalc_+3A_object">object</code></td>
<td>
<p>An object of class <code>powPar</code>.</p>
</td></tr>
<tr><td><code id="powCalc_+3A_statistic">statistic</code></td>
<td>
<p>A function that takes an object of class
<code>powPar</code> as argument. Ideally this is also the only
argument. The function should return a vector of numeric values or a
vector of logicals, depending on the <code>type</code>. See Details.</p>
</td></tr>
<tr><td><code id="powCalc_+3A_n.iter">n.iter</code></td>
<td>
<p>A number specifying how often the power-function is
evaluated.</p>
</td></tr>
<tr><td><code id="powCalc_+3A_cluster">cluster</code></td>
<td>
<p>Still experimental! This argument can be logical,
indicating if the library parallel should be used or not, or
numeric. In the latter case the number is passed as integer to the
function makeCluster from library parallel. The default is FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the statistic does not return the power (a numeric value
between 0 and 1) but returns a logical (TRUE or FALSE) the argument
<code>n.iter</code> is expected. The statitic will then be evaluated
n.iter-times and the proportion of successes will be interpreted as
the power.
</p>


<h3>Value</h3>

<p>An object of class <a href="#topic+powCalc-class">powCalc</a>.</p>


<h3>Examples</h3>

<pre><code class='language-R'>## defining the range of n and theta to be evaluated
psi &lt;- powPar(theta = seq(from = 0.5, to = 1.5, by = 0.1),
              n = seq(from = 20, to = 60, by = 2),
              muA = 0,
              muB = 1)

## defining a power-function     
powFun &lt;- function(psi){
  power.t.test(n = n(psi)/2,
               delta = pp(psi, "muA") - pp(psi, "muB"),
               sd = theta(psi)
               )$power
}

## evaluating the power-function for all combinations of n and theta
calc &lt;- powCalc(psi, powFun)
</code></pre>

<hr>
<h2 id='power-class'>Class &quot;power&quot; and its subclasses &quot;powPar&quot;, &quot;powFun&quot;, &quot;powCalc&quot;, &quot;powEx&quot;.</h2><span id='topic+powPar-class'></span><span id='topic+dim+2CpowPar-method'></span><span id='topic+n+2CpowPar-method'></span><span id='topic+theta+2CpowPar-method'></span><span id='topic+xi+2CpowPar-method'></span><span id='topic+pp+2CpowPar-method'></span><span id='topic+powCalc+2CpowPar-method'></span><span id='topic+powFun-class'></span><span id='topic+powCalc-class'></span><span id='topic+powEx+2CpowCalc-method'></span><span id='topic+dim+2CpowCalc-method'></span><span id='topic+update+2CpowCalc-method'></span><span id='topic+powEx-class'></span><span id='topic+power-class'></span><span id='topic+refine+2Cpower-method'></span><span id='topic+inspect+2Cpower-method'></span><span id='topic+show+2Cpower-method'></span><span id='topic+plot+2CANY+2CANY-method'></span><span id='topic+plot+2Cpower+2Cmissing-method'></span><span id='topic+tex+2Cpower+2Ccharacter-method'></span>

<h3>Description</h3>

<p>A class used internally for storing information about the power
calculation. It inherits from different classes, see section &quot;Extends&quot; for
details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'power'
show(object)
## S4 method for signature 'powPar'
dim(x)
## S4 method for signature 'powCalc'
dim(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="power-class_+3A_object">object</code>, <code id="power-class_+3A_x">x</code></td>
<td>
<p>object of class <a href="#topic+power-class">power</a>, <a href="#topic+powPar-class">powPar</a> or <a href="#topic+powCalc-class">powCalc</a></p>
</td></tr>
</table>


<h3>Extends</h3>

<p>The power-class has no privat slots but inherits everything from its
ancestors.
</p>
<p>Class <a href="#topic+powPar-class">powPar</a>, by class <a href="#topic+powCalc-class">powCalc</a>, distance 2.
Class <a href="#topic+powFun-class">powFun</a>, by class <a href="#topic+powCalc-class">powCalc</a>, distance 2.
Class <a href="#topic+powCalc-class">powCalc</a>, directly.
Class <a href="#topic+powEx-class">powEx</a>, directly.
</p>


<h3>powPar-class</h3>

<p>A class used internally. Contains all the parameters needed to feed
the 'power function'.  For users there is a function
<code><a href="#topic+powPar">powPar</a></code> that constructs objects of this class and there
are several functions for extracting information <code><a href="#topic+n">n</a></code>,
<code><a href="#topic+theta">theta</a></code>, <code><a href="#topic+xi">xi</a></code>, <code><a href="#topic+pp">pp</a></code>. These
functions should be used when writing the 'power function'.
Contains the Slots:
</p>

<dl>
<dt><code>list</code>:</dt><dd><p>Object of class <code>"list"</code> that contains all
elements that were provided to <code><a href="#topic+powPar">powPar</a></code> with the
<code>...</code> argument.</p>
</dd>
<dt><code>theta</code>:</dt><dd><p>An <code>"numeric"</code> vector with values that are
used to evaluate the power.</p>
</dd>
<dt><code>theta.name</code>:</dt><dd><p>Object of class <code>"character"</code> only
used if argument 'theta.name' of <code><a href="#topic+powPar">powPar</a></code> was used.</p>
</dd>
<dt><code>theta.act</code>:</dt><dd><p>Object of class <code>"numeric"</code>. This slot
is only used during evaluation where it contains one element of
'theta' after the other. The function <code><a href="#topic+theta">theta</a></code> extracts
this value. If not under evaluation this slot contains the first
element of 'theta'.</p>
</dd>
<dt><code>xi</code>:</dt><dd><p>Object of class <code>"numeric"</code> with values that
are used to evaluate the power.</p>
</dd>
<dt><code>xi.name</code>:</dt><dd><p>Object of class <code>"character"</code> only
used if argument 'theta.name' of <code><a href="#topic+powPar">powPar</a></code> was used.</p>
</dd>
<dt><code>xi.act</code>:</dt><dd><p>Object of class <code>"numeric"</code>. This slot
is only used during evaluation where it contains one element of
'xi' after the other. The function <code><a href="#topic+xi">xi</a></code> extracts
this value. If not under evaluation this slot contains the first
element of xi'.</p>
</dd>
<dt><code>n</code>:</dt><dd><p>Object of class <code>"integer"</code> with values that
are used to evaluate the power.</p>
</dd>
<dt><code>n.act</code>:</dt><dd><p>Object of class <code>"integer"</code>.  This slot
is only used during evaluation where it contains one element of
'n' after the other. The function <code><a href="#topic+n">n</a></code> extracts
this value. If not under evaluation this slot contains the first
element of 'n'.</p>
</dd>
</dl>



<h3>powFun-class</h3>

<p>A class used internally. It contains the user defined 'power function'
and some information about what this function returns.
</p>
<p><code>showMethods(class = "powFun")</code> shows what methods are available.
</p>
<p>Contains the Slots:
</p>

<dl>
<dt><code>statistic</code>:</dt><dd><p>Object of class <code>"function"</code></p>
</dd>
<dt><code>return.power</code>:</dt><dd><p>Object of class <code>"logical"</code>,
indicating if the 'power function' returns a <code>"logical"</code>.</p>
</dd>
<dt><code>return.list</code>:</dt><dd><p>Object of class <code>"logical"</code>,
indicating if the 'power function' returns a <code>"list"</code>.</p>
</dd>
<dt><code>return.n</code>:</dt><dd><p>Object of class <code>"integer"</code>, indicating
the number of elements returned by the 'power function'.</p>
</dd>
<dt><code>return.names</code>:</dt><dd><p>Object of class <code>"character"</code>,
indicating the name of the elements returned by the 'power
function'.</p>
</dd>
</dl>



<h3>powCalc-class</h3>

<p>A class used internally. Objects can be created by calls to the
function <code><a href="#topic+powCalc">powCalc</a></code>.
</p>
<p><code>showMethods(class = "powCalc")</code> shows what methods are available.
</p>
<p>Contains the Slots:
</p>

<dl>
<dt><code>core</code>:</dt><dd><p>Object of class <code>"array"</code> with 4
dimentions, n, theta, xi and endpoint.</p>
</dd>
<dt><code>core</code>:</dt><dd><p>Object of class <code>"array"</code> with 4
dimentions, n, theta, xi and endpoint.</p>
</dd>
<dt><code>statistic</code>:</dt><dd><p>Object of class <code>"function"</code>, this
function was used for calculating the power.</p>
</dd>
<dt><code>endpoint.name</code>:</dt><dd><p>Object of class <code>"character"</code>
names of the endpoints</p>
</dd>
<dt><code>iter</code>:</dt><dd><p>Object of class <code>"integer"</code> how many
iterations were used to estimate the power</p>
</dd>
</dl>



<h3>powEx-class</h3>

<p>A class used internally. Objects can be created by calls to the
function <code><a href="#topic+powEx">powEx</a></code> but are never visible because they are
directly included in <a href="#topic+power-class">power</a>.
</p>
<p><code>showMethods(class = "powEx")</code> shows what methods are available.
</p>
<p>Contains the Slots:
</p>

<dl>
<dt><code>theta.example</code>:</dt><dd><p>Object of class <code>"numeric"</code>, the
value of the parameter 'theta' used for illustration and for
estimating sample size.</p>
</dd>
<dt><code>xi.example</code>:</dt><dd><p>Object of class <code>"numeric"</code> Like
'theta.example' but for 'xi'.</p>
</dd>
<dt><code>endpoint.example</code>:</dt><dd><p>Object of class <code>"character"</code>,
the endpoint to be used, only if several endpoints were evaluated.</p>
</dd>
<dt><code>power.example</code>:</dt><dd><p>Object of class <code>"numeric"</code>,
indicating for which power the sample size should be evaluated and
which power (contourline) should be used for illustration
<code><a href="#topic+plot">plot</a></code>.</p>
</dd>
<dt><code>method</code>:</dt><dd><p>Object of class <code>"character"</code>, indicating
which 'method' was used for sample size estimation, see
<code><a href="#topic+powEx">powEx</a></code>.</p>
</dd>
<dt><code>lm.range</code>:</dt><dd><p>Object of class <code>"numeric"</code>, indicating
which 'lm.range' was used for sample size estimation, see
<code><a href="#topic+powEx">powEx</a></code>.</p>
</dd>
<dt><code>drop</code>:</dt><dd><p>Object of class <code>"numeric"</code>, indicating
which drop out rate was used for sample size estimation, see
<code><a href="#topic+powEx">powEx</a></code>.</p>
</dd>
<dt><code>forceDivisor</code>:</dt><dd><p>Object of class <code>"logical"</code>, indicating
whether a divisability was forced for sample size estimation, see
<code><a href="#topic+powEx">powEx</a></code>.</p>
</dd>
<dt><code>divisor</code>:</dt><dd><p>Object of class <code>"logical"</code>, indicating
which 'divisor' was enforced for sample size estimation, see
<code><a href="#topic+powEx">powEx</a></code>.</p>
</dd>
</dl>



<h3>power-class</h3>

<p>A class used internally. Objects can be created by calls to the
function <code><a href="#topic+powEx">powEx</a></code>.
</p>
<p><code>showMethods(class = "power")</code> shows what methods are available.
</p>
<p>For the users important are <code><a href="#topic+inspect">inspect</a></code>, <code><a href="#topic+plot">plot</a></code>,
<code><a href="#topic+tex">tex</a></code>.
</p>


<h3>Author(s)</h3>

<p><a href="mailto:thomas.fabbro@unibas.ch">thomas.fabbro@unibas.ch</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>showClass("power")
</code></pre>

<hr>
<h2 id='powEx'>
Defining the example to be used and the method to be used for sample
size estimation.
</h2><span id='topic+powEx'></span>

<h3>Description</h3>

<p>A function for constructing an object of class <a href="#topic+power-class">power</a>
used for drawing an example in a sensitivity plot and for estimating
the sample size.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>powEx(x, theta, xi = NA, endpoint = NA, power = 0.9, drop = 0,
             method = c("default", "lm", "step"), lm.range = NA,
             forceDivisor = FALSE)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="powEx_+3A_x">x</code></td>
<td>
<p>An object of class <a href="#topic+powCalc-class">powCalc</a>.</p>
</td></tr>
<tr><td><code id="powEx_+3A_theta">theta</code></td>
<td>
<p>a numeric value indicating for which <code>theta</code> to draw
the example in the sensitivity plot and where to evaluate sample
size. It makes only sense to use a <code>theta</code> in the range
evaluated.</p>
</td></tr>
<tr><td><code id="powEx_+3A_xi">xi</code></td>
<td>
<p>a numeric value, as <code>theta</code> but for <code>xi</code></p>
</td></tr>
<tr><td><code id="powEx_+3A_endpoint">endpoint</code></td>
<td>
<p>Object of class <code>character</code>, indidating for which
endpoint sample size should be evaluated</p>
</td></tr>
<tr><td><code id="powEx_+3A_power">power</code></td>
<td>
<p>Object of class <code>numeric</code>, indicating for what power
samle size should be evaluated</p>
</td></tr>
<tr><td><code id="powEx_+3A_method">method</code></td>
<td>
<p>Defining the method how the sample size for the is
calculated. <code>method = "default"</code> uses <code>"lm"</code> if resampling
was used to calculate the <a href="#topic+powCalc-class">powCalc</a> object, otherwise
<code>"step"</code> is used.</p>
</td></tr>
<tr><td><code id="powEx_+3A_lm.range">lm.range</code></td>
<td>
<p>The range of evaluations that are used for estimating
the sample size if the <code>method = "lm"</code> or evaluates to
<code>"lm"</code>. For the default <code>lm.range</code> = 0.2 this means from
80 to 120 % of the power in the example, e.g. for the power of 0.9
this is a range from 0.72 to 1.08. Note that the range is cut at 0
and 1.</p>
</td></tr>
<tr><td><code id="powEx_+3A_drop">drop</code></td>
<td>
<p>Object of class <code>numeric</code> (range: 0 to 1), indicating
how many drop outs are expected.  This information is used to
calculate the number of subject that should be recruited (addressed
e.g. by the function <code>tex</code> using type <code>nRec</code>).</p>
</td></tr>
<tr><td><code id="powEx_+3A_forcedivisor">forceDivisor</code></td>
<td>
<p>If <code>TRUE</code> the biggest common divisor of all
evaluated sample sizes is used as divisor and the estimated sample
size is increased to be divisible by this divisor. If an integer is
provided it is used as divisor.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For method equal to <code>"lm"</code> a linear model is fit as
lm(sample.size ~ transformed(power)) with all data where theta, and xi
are equal to the theta and xi of the example and within the
power-range as defined by the argument <code>lm.range</code>. This model is
then used for predicting the sample size. Always inspect the result
using <code>inspect</code>!
</p>
<p>The method &quot;step&quot; returns the last element in the sequence of sample
sizes - power pairs, sorted with decreasing power, where the power is
above the power defined for the example.
</p>


<h3>Value</h3>

<p>An object of class <a href="#topic+power-class">power</a>.</p>


<h3>Note</h3>

<p>In older verstions of the package: The function <code>merge</code> was
used together with an object of class <a href="#topic+powEx-class">powEx</a> to form an
object of class <a href="#topic+power-class">power</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## defining the range of n and theta to be evaluated
psi &lt;- powPar(theta = seq(from = 0.5, to = 1.5, by = 0.1),
              n = seq(from = 20, to = 60, by = 2),
              muA = 0,
              muB = 1)

## defining a power-function     
powFun &lt;- function(psi){
  power.t.test(n = n(psi)/2,
               delta = pp(psi, "muA") - pp(psi, "muB"),
               sd = theta(psi)
               )$power
}

## evaluating the power-function for all combinations of n and theta
calc &lt;- powCalc(psi, powFun)

## adding example at theta of 1 and power of 0.9
pow &lt;- powEx(calc, theta = 1, power = 0.9)

## drawing the power plot with 3 contour lines
plot(pow,
     xlab = "Standard Deviation",
     ylab = "Total Sample Size",
     at = c(0.85, 0.9, 0.95))

## changing the estimation method
pow2 &lt;- powEx(calc, theta = 1, power = 0.9, method = "lm")

## drawing an inspection plot
inspect(pow2)
</code></pre>

<hr>
<h2 id='powPar'>Constructing an object of class 'powPar'.</h2><span id='topic+powPar'></span>

<h3>Description</h3>

<p>A function for constructing an object of class
<a href="#topic+powPar-class">powPar</a>. Such an object is used for evaluating the user
defined 'power function' for a parameter range.  All information that is
needed for calculating the power (e.g. a pilot data set) should be
provided by making use of the <code>...</code> argument.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>powPar(n, theta = NA, xi = NA, ...)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="powPar_+3A_n">n</code></td>
<td>
<p>A numeric vector, indicating for which sample sizes
to evaluate the power function.</p>
</td></tr>
<tr><td><code id="powPar_+3A_theta">theta</code></td>
<td>
<p>A numeric vector that will be used for evaluating the
power function. The method <code>theta</code> can be used within the power
function to extract the elements of this vector one by one.</p>
</td></tr>
<tr><td><code id="powPar_+3A_xi">xi</code></td>
<td>
<p>A numeric vector that will be used for evaluating the power
function.  Since for every element of<code>xi</code> an individuall
sensitivity plot has to be constructed, the length of the <code>xi</code>
vector is usually short.</p>
</td></tr>
<tr><td><code id="powPar_+3A_...">...</code></td>
<td>
<p>This arguemt is used to provide additional parameters
needed by the power function for calculating the power. This
parameters can be extracted using the function <code><a href="#topic+pp">pp</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An object of class <a href="#topic+powPar-class">powPar</a> is used to evaluate the 'power
function' for a range of <code>n</code> and <code>theta</code> and optionally for
several <code>xi</code> values.
</p>
<p>The user can write a 'power function' and extract the individual
elements using the functions <code><a href="#topic+n">n</a></code>, <code><a href="#topic+theta">theta</a></code>,
<code><a href="#topic+xi">xi</a></code> and <code><a href="#topic+pp">pp</a></code>.
</p>
<p>It is a good practice to include everything that is needed for the
calculation, also data sets etc.
</p>
<p>To extract the vector of <code>theta</code>, instead of individual values, you can
use the method <code>pp</code> with the name theta.
</p>
<p>For historical reasons: If the argument <code>theta = NA</code> the
argument <code>theta.name</code> (a character) has to be used, to indicate
the name of a numeric vector that was passed to the argument
(<code>...</code>).  The same is true for the argument <code>xi</code>.
</p>


<h3>Value</h3>

<p>An object of the class <a href="#topic+powPar-class">powPar</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>## defining the range of n and theta to be evaluated
psi &lt;- powPar(n = seq(from = 20, to = 60, by = 2),
              theta = seq(from = 0.5, to = 1.5, by = 0.05)
              )

## defining a power-function  
powFun &lt;- function(psi){
  return(power.t.test(n = n(psi)/2, delta = theta(psi), sig.level = 0.05)$power)
}

## evaluating the power-function for all combinations of n and theta
calc &lt;- powCalc(psi, statistic = powFun)

## adding example at theta of 1 and power of 0.9
pow &lt;- powEx(calc, theta = 1)

## drawing the power plot
plot(pow,
     xlab = "Difference",
     ylab = "Total Sample Size")
</code></pre>

<hr>
<h2 id='refine'>Refining the estimation</h2><span id='topic+refine'></span>

<h3>Description</h3>

<p>Increasing the number of iterations for estimating the sample size for
the 'theta' and 'xi' as specified for the example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>refine(object, factor = 10)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="refine_+3A_object">object</code></td>
<td>
<p>An object of class <a href="#topic+power-class">power</a>.</p>
</td></tr>
<tr><td><code id="refine_+3A_factor">factor</code></td>
<td>
<p>An integer larger than one that is multiplied with the
available number of iterations to from the target number of
iterations.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <a href="#topic+power-class">power</a>.</p>


<h3>Note</h3>

<p>This function is only useful if the object of class
<a href="#topic+power-class">power</a> was generated using a resamling approach.</p>


<h3>Examples</h3>

<pre><code class='language-R'> ## takes quite some time
## defining the range of n and theta to be evaluated
psi &lt;- powPar(theta = seq(from = 0.5, to = 1.5, by = 0.1),
              n = seq(from = 20, to = 60, by = 2))

## defining a power-function               
powFun &lt;- function(psi){
  x &lt;- rnorm(n(psi)/2)
  y &lt;- rnorm(n(psi)/2) + theta(psi)
  return(wilcox.test(x = x, y = y)$p.value &lt; 0.05)
}


## evaluating the power-function for all combinations of n and theta
calc &lt;- powCalc(psi, powFun, n.iter = 10)

## adding example at theta of 1 and power of 0.9
pow &lt;- powEx(calc, theta = 1, power = 0.9)

## another 900 (= 1000 - 100) iterations
refine(pow)

</code></pre>

<hr>
<h2 id='SampleSize-class'>Class &quot;SampleSize&quot;</h2><span id='topic+SampleSize-class'></span>

<h3>Description</h3>

<p>A class used internally only that contains an integer (the
estimated sample size).
</p>


<h3>Objects from the Class</h3>

<p>These objects are only used internally.
</p>


<h3>Slots</h3>


<dl>
<dt><code>estimate</code>:</dt><dd><p>Object of class <code>"integer"</code> </p>
</dd>
</dl>



<h3>Methods</h3>

<p>No methods defined with class &quot;SampleSize&quot; in the signature.
</p>


<h3>Author(s)</h3>

<p><a href="mailto:thomas.fabbro@unibas.ch">thomas.fabbro@unibas.ch</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>showClass("SampleSize")
</code></pre>

<hr>
<h2 id='tex'>Preparing text for using with LaTeX</h2><span id='topic+tex'></span>

<h3>Description</h3>

<p>Methods for function <code>tex</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tex(x, type, ...)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tex_+3A_x">x</code></td>
<td>
<p>The object of class <a href="#topic+power-class">power</a> used for extraction</p>
</td></tr>
<tr><td><code id="tex_+3A_type">type</code></td>
<td>
<p>Currently available:
</p>

<ul>
<li><p><code>"drop"</code>, indicating the drop-out rate used for calculation.
</p>
</li>
<li><p><code>"nRec"</code>, sample size that was increased to take into
account the drop-out rate.
</p>
</li>
<li><p><code>"nEval"</code>, sample size needed for evaluation without
taking into account the drop-out rate.
</p>
</li>
<li><p><code>"n.iter"</code>, nuber of iterations used for calculation.
</p>
</li>
<li><p><code>"power"</code>, 'power' used for calculation.
</p>
</li>
<li><p><code>"sampling"</code>, a description of the sampling process.
</p>
</li>
<li><p><code>"theta"</code>, 'theta' used for calculation.
</p>
</li></ul>
</td></tr>
<tr><td><code id="tex_+3A_...">...</code></td>
<td>
<p>Not used so far</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string.</p>


<h3>Methods</h3>

<p>This methods prepare strings that can directly be used for
including information from objects of <a href="#topic+power-class">power</a> into Sweave reports.

</p>


<h3>Examples</h3>

<pre><code class='language-R'>## defining the range of n and theta to be evaluated
psi &lt;- powPar(theta = seq(from = 0.5, to = 1.5, by = 0.1),
              n = seq(from = 20, to = 60, by = 2),
              muA = 0,
              muB = 1)

## defining a power-function     
powFun &lt;- function(psi){
  power.t.test(n = n(psi)/2,
               delta = pp(psi, "muA") - pp(psi, "muB"),
               sd = theta(psi)
               )$power
}

## evaluating the power-function for all combinations of n and theta
calc &lt;- powCalc(psi, powFun)

## adding example at theta of 1 and power of 0.9
pow &lt;- powEx(calc, theta = 1, power = 0.9)

## drawing the power plot with 3 contour lines
plot(pow,
     xlab = "Standard Deviation",
     ylab = "Total Sample Size",
     at = c(0.85, 0.9, 0.95))

## 
tex(pow, type = "sampling")
</code></pre>

<hr>
<h2 id='update'>Updating a powCalc or a power object.</h2><span id='topic+update'></span>

<h3>Description</h3>

<p>A function for updating an existing object of class <a href="#topic+powCalc-class">powCalc</a> or
<a href="#topic+power-class">power</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update(object, ...)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_+3A_object">object</code></td>
<td>
<p>An object of class <a href="#topic+powCalc-class">powCalc</a> or
<a href="#topic+power-class">power</a>.</p>
</td></tr>
<tr><td><code id="update_+3A_...">...</code></td>
<td>
<p>The following elements (slots) of the object can be
updated:
</p>

<dl>
<dt>n.iter</dt><dd><p>A number indicating the number of iterations used to
dertermine the power if the calcualation is based on
resampling.
The existing iterations will be kept. <code>n.iter</code> indicates
the number of iterations after evaluation, therefore
<code>n.iter</code> has to be equal or larger than the existing
number of iterations.</p>
</dd>
<dt>n</dt><dd><p>A vector with numbers for evaluating the power.
New elements will be evaluated and existing elements reused.
If some elements of the original are not part of <code>n</code> they
will be ommitted.</p>
</dd>
<dt>theta</dt><dd><p>see <code>n</code> for details.</p>
</dd>
<dt>xi</dt><dd><p>see <code>n</code> for details.</p>
</dd>
<dt>statistic</dt><dd><p>A function of an object of class <code>psi</code>.
If a new statistic is provided all elements will be evaluated
again.</p>
</dd>
</dl>

</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <a href="#topic+powCalc-class">powCalc</a>.</p>


<h3>Note</h3>

<p>Be careful if you use this function to update objects of class
<a href="#topic+power-class">power</a>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+powCalc">powCalc</a></code> for geneating new objcets of class
<a href="#topic+powCalc-class">powCalc</a>.</p>


<h3>Examples</h3>

<pre><code class='language-R'>## defining the range of n and theta to be evaluated
psi &lt;- powPar(theta = seq(from = 0.5, to = 1.5, by = 0.1),
              n = seq(from = 20, to = 60, by = 2),
              muA = 0,
              muB = 1)

## defining a power-function     
powFun &lt;- function(psi){
  power.t.test(n = n(psi)/2,
               delta = pp(psi, "muA") - pp(psi, "muB"),
               sd = theta(psi)
               )$power
}

## evaluating the power-function for all combinations of n and theta
calc &lt;- powCalc(psi, powFun)

## updating by using additional elements for "n"
calc2 &lt;- update(calc, n = seq(from = 20, to = 90, by = 2))

## adding example at theta of 1 and power of 0.9
pow &lt;- powEx(calc2, theta = 1, power = 0.9)

## drawing the power plot with 3 contour lines
plot(pow,
     xlab = "Standard Deviation",
     ylab = "Total Sample Size",
     at = c(0.85, 0.9, 0.95))
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
