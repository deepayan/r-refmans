<!DOCTYPE html><html lang="en-GB"><head><title>Help for package srppp</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {srppp}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#srppp-package'><p>srppp: Read the Swiss Register of Plant Protection Products</p></a></li>
<li><a href='#alternative_products'><p>Find alternative products for all products containing certain active substances</p></a></li>
<li><a href='#application_rate_g_per_ha'><p>Calculate application rates for active ingredients</p></a></li>
<li><a href='#description_table'><p>Get a table of descriptions for a certain Meta Information Tag</p></a></li>
<li><a href='#get_descriptions'><p>Get descriptions from a node with children that hold descriptions</p></a></li>
<li><a href='#get_grandparent_wNbr'><p>Get W-Number from grandparent node</p></a></li>
<li><a href='#get_great_grandparent_wNbr'><p>Get W-Number from grandparent node</p></a></li>
<li><a href='#get_parent_wNbr'><p>Get W-Number from parent node</p></a></li>
<li><a href='#get_use_nr'><p>Get use number from parent node (indication information node)</p></a></li>
<li><a href='#l_per_ha_is_water_volume'><p>Use definitions where the rate in l/ha refers to the volume of the spraying solution</p></a></li>
<li><a href='#srppp_dm'><p>Create a dm object from an XML version of the Swiss Register of Plant Protection Products</p></a></li>
<li><a href='#srppp_xml_clean_product_names'><p>Clean product names</p></a></li>
<li><a href='#srppp_xml_define_use_numbers'><p>Define use identification numbers in an SRPPP read in from an XML file</p></a></li>
<li><a href='#srppp_xml_get'><p>Read an XML version of the Swiss Register of Plant Protection Products</p></a></li>
<li><a href='#srppp_xml_get_ingredients'><p>Get ingredients for all registered products described in an XML version of the Swiss Register of Plant Protection Products</p></a></li>
<li><a href='#srppp_xml_get_parallel_imports'><p>Get Parallel Imports from an XML version of the Swiss Register of Plant Protection Products</p></a></li>
<li><a href='#srppp_xml_get_products'><p>Get Products from an XML version of the Swiss Register of Plant Protection Products</p></a></li>
<li><a href='#srppp_xml_get_substances'><p>Get substances from an XML version of the Swiss Register of Plant Protection Products</p></a></li>
<li><a href='#srppp_xml_get_uses'><p>Get uses ('indications') for all products described in an XML version of the Swiss Register of Plant Protection Products</p></a></li>
<li><a href='#srppp_xml_url'><p>URL of the XML version of the Swiss Register of Plant Protection Products</p></a></li>
<li><a href='#units_convertible_to_g_per_ha'><p>Product application rate units convertible to grams active substance per hectare</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Read the Swiss Register of Plant Protection Products</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-10-29</td>
</tr>
<tr>
<td>Description:</td>
<td>Generate data objects from XML versions of the Swiss
  Register of Plant Protection Products. An online version of the
  register can be accessed at <a href="https://www.psm.admin.ch/de/produkte">https://www.psm.admin.ch/de/produkte</a>. There is no
  guarantee of correspondence of the data read in using this package with that
  online version, or with the original registration documents.  Also, the
  Federal Food Safety and Veterinary Office, coordinating the authorisation of
  plant protection products in Switzerland, does not answer requests regarding
  this package. </td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0), dm</td>
</tr>
<tr>
<td>Imports:</td>
<td>xml2, tibble, stringr, dplyr, tidyr, cli</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, here, DiagrammeR, DiagrammeRsvg, testthat
(&ge; 3.0.0), parallel, waldo</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/agroscope-ch/srppp/issues">https://github.com/agroscope-ch/srppp/issues</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://agroscope-ch.github.io/srppp/">https://agroscope-ch.github.io/srppp/</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2.9000</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-10-29 15:59:16 UTC; f80868656</td>
</tr>
<tr>
<td>Author:</td>
<td>Daniel Baumgartner [ctb] (Provided feedback, explanations and
    background information),
  Marcel Mathis [rev, ctb],
  Romualdus Kasteel [rev] (Provided feedback to version 0.3.4),
  Elisabeth Lutz [ctb],
  Johannes Ranke <a href="https://orcid.org/0000-0003-4371-6538"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Agroscope [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Johannes Ranke &lt;johannes.ranke@agroscope.admin.ch&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-11-01 14:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='srppp-package'>srppp: Read the Swiss Register of Plant Protection Products</h2><span id='topic+srppp'></span><span id='topic+srppp-package'></span>

<h3>Description</h3>

<p>Generate data objects from XML versions of the Swiss Register of Plant Protection Products. An online version of the register can be accessed at <a href="https://www.psm.admin.ch/de/produkte">https://www.psm.admin.ch/de/produkte</a>. There is no guarantee of correspondence of the data read in using this package with that online version, or with the original registration documents. Also, the Federal Food Safety and Veterinary Office, coordinating the authorisation of plant protection products in Switzerland, does not answer requests regarding this package.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Johannes Ranke <a href="mailto:johannes.ranke@agroscope.admin.ch">johannes.ranke@agroscope.admin.ch</a> (<a href="https://orcid.org/0000-0003-4371-6538">ORCID</a>)
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Daniel Baumgartner (Provided feedback, explanations and background information) [contributor]
</p>
</li>
<li><p> Marcel Mathis <a href="mailto:marcel.mathis@agroscope.admin.ch">marcel.mathis@agroscope.admin.ch</a> [reviewer, contributor]
</p>
</li>
<li><p> Romualdus Kasteel <a href="mailto:romualdus.kasteel@agroscope.admin.ch">romualdus.kasteel@agroscope.admin.ch</a> (Provided feedback to version 0.3.4) [reviewer]
</p>
</li>
<li><p> Elisabeth Lutz <a href="mailto:elisabeth.lutz@agroscope.admin.ch">elisabeth.lutz@agroscope.admin.ch</a> [contributor]
</p>
</li>
<li><p> Agroscope [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://agroscope-ch.github.io/srppp/">https://agroscope-ch.github.io/srppp/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/agroscope-ch/srppp/issues">https://github.com/agroscope-ch/srppp/issues</a>
</p>
</li></ul>


<hr>
<h2 id='alternative_products'>Find alternative products for all products containing certain active substances</h2><span id='topic+alternative_products'></span>

<h3>Description</h3>

<p>This function searches for uses of a given list of active substances and reports
either a table of uses with the number of available alternative products for each
use, a detailed table of the alternative product uses, a table of uses without
alternatives, or a list containing these three tables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>alternative_products(
  srppp,
  active_ingredients,
  details = FALSE,
  missing = FALSE,
  list = FALSE,
  lang = c("de", "fr", "it")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="alternative_products_+3A_srppp">srppp</code></td>
<td>
<p>A <a href="#topic+srppp_dm">srppp_dm</a> object.</p>
</td></tr>
<tr><td><code id="alternative_products_+3A_active_ingredients">active_ingredients</code></td>
<td>
<p>Character vector of active ingredient names that will be
matched against the column 'substances_de' in the srppp table 'substances'.</p>
</td></tr>
<tr><td><code id="alternative_products_+3A_details">details</code></td>
<td>
<p>Should a table of alternative uses with 'wNbr' and 'use_nr' be returned?</p>
</td></tr>
<tr><td><code id="alternative_products_+3A_missing">missing</code></td>
<td>
<p>If this is set to TRUE, uses without alternative product registrations
are listed.</p>
</td></tr>
<tr><td><code id="alternative_products_+3A_list">list</code></td>
<td>
<p>If TRUE, a list of three tables is returned, a table of uses
without alternative products (&quot;LÃ¼ckenindikationen&quot;), a table of the number
of alternative products for each use, if any, and a detailed table of all
the alternative uses. This argument overrides the arguments 'details' and
'missing'.</p>
</td></tr>
<tr><td><code id="alternative_products_+3A_lang">lang</code></td>
<td>
<p>The language used for the active ingredient names and the returned
tables.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A use is defined here as a combination of an application area, a crop
('culture') and a pathogen ('pest'). This means, that for an alternative
product to be found, there has to be an exact match of application
area, crop an pathogen.
</p>


<h3>Value</h3>

<p>A <a href="tibble.html#topic+tibble">tibble::tibble</a> containing use definitions as defined above, i.e. containing
columns with the application area, crop and pathogen. Depending on the
arguments, columns summarizing or listing the alternative products and/or uses
are also contained.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
sr &lt;- srppp_dm()

actives_de &lt;- c("Lambda-Cyhalothrin", "Deltamethrin")

alternative_products(sr, actives_de)
alternative_products(sr, actives_de, missing = TRUE)
alternative_products(sr, actives_de, details = TRUE)
alternative_products(sr, actives_de, list = TRUE)

# Example in Italian
actives_it &lt;- c("Lambda-Cialotrina", "Deltametrina")
alternative_products(sr, actives_it, lang = "it")

</code></pre>

<hr>
<h2 id='application_rate_g_per_ha'>Calculate application rates for active ingredients</h2><span id='topic+application_rate_g_per_ha'></span>

<h3>Description</h3>

<p>An application rate in g active substance/ha is calculated from information
on dosage (product concentration in the application solution), application volume,
or directly from the product application rate. This is complicated by the fact
that a rate (&quot;expenditure&quot; in the XML file) with units l/ha can refer
to the application solution or to the liquid product.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>application_rate_g_per_ha(
  product_uses,
  aggregation = c("max", "mean", "min"),
  dosage_units = c("percent_ww", "percent_vv", "state_of_matter"),
  skip_l_per_ha_without_g_per_L = TRUE,
  fix_l_per_ha = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="application_rate_g_per_ha_+3A_product_uses">product_uses</code></td>
<td>
<p>A tibble containing the columns 'pNbr', 'use_nr',
'application_area_de', 'min_dosage', 'max_dosage', 'min_rate', 'max_rate',
from the 'uses' table in a <a href="#topic+srppp_dm">srppp_dm</a> object, as well as the columns
'percent' and 'g_per_L' from the 'ingredients' table in a <a href="#topic+srppp_dm">srppp_dm</a> object.</p>
</td></tr>
<tr><td><code id="application_rate_g_per_ha_+3A_aggregation">aggregation</code></td>
<td>
<p>How to represent a range if present, e.g. &quot;max&quot; (default)
or &quot;mean&quot;.</p>
</td></tr>
<tr><td><code id="application_rate_g_per_ha_+3A_dosage_units">dosage_units</code></td>
<td>
<p>If no units are given, or units are &quot;%&quot;, then the applied
amount in g/ha is calculated using a reference application volume and the
dosage. As the dosage units are not explicitly given, we can specify our
assumptions about these using this argument (currently not implemented, i.e.
specifying the argument has no effect).</p>
</td></tr>
<tr><td><code id="application_rate_g_per_ha_+3A_skip_l_per_ha_without_g_per_l">skip_l_per_ha_without_g_per_L</code></td>
<td>
<p>Per default, uses where the use rate
has units of l/ha are skipped, if there is not product concentration
in g/L. This was also done in the 2023 indicator project.</p>
</td></tr>
<tr><td><code id="application_rate_g_per_ha_+3A_fix_l_per_ha">fix_l_per_ha</code></td>
<td>
<p>During the review of the 2023 indicator
project calculations, a number of cases were identified where the unit
l/ha specifies a water volume, and not a product volume. If TRUE (default),
these cases are corrected, if FALSE, these cases are discarded.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In some cases (currently one), external information was found, indicating
that the &quot;expenditure&quot; is an application volume <a href="#topic+l_per_ha_is_water_volume">l_per_ha_is_water_volume</a>.
</p>


<h3>Value</h3>

<p>A tibble containing one additional column 'rate_g_per_ha'
</p>


<h3>Note</h3>

<p>A reference application volume is used if there is no 'expenditure'.
It is selected only based on the product application area. This is not correct
if hops ('Hopfen') is the culture, as it has a unique reference application
volume of 3000 L/ha.
</p>
<p>Applications to hops were excluded for calculating mean use rates in the
indicator project (Korkaric 2023), arguing that it is not grown in large
areas in Switzerland.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(srppp)
library(dplyr, warn.conflicts = FALSE)
library(dm, warn.conflicts = FALSE)
sr &lt;- srppp_dm()

product_uses_with_ingredients &lt;- sr$substances |&gt;
  filter(substance_de %in% c("Halauxifen-methyl", "Kupfer (als Kalkpr\u00E4parat)")) |&gt;
  left_join(sr$ingredients, by = "pk") |&gt;
  left_join(sr$uses, by = "pNbr") |&gt;
  left_join(sr$products, by = "pNbr") |&gt;
  select(pNbr, name, use_nr,
    min_dosage, max_dosage, min_rate, max_rate, units_de,
    application_area_de,
    substance_de, percent, g_per_L)

application_rate_g_per_ha(product_uses_with_ingredients) |&gt;
  filter(name %in% c("Cerelex", "Pixxaro EC", "Bordeaux S")) |&gt;
  select(ai = substance_de, app_area = application_area_de,
    min_d = min_dosage,  max_d = max_dosage,
    min_r = min_rate, max_r = max_rate,
    units_de, rate = rate_g_per_ha) |&gt;
  print(n = Inf)

</code></pre>

<hr>
<h2 id='description_table'>Get a table of descriptions for a certain Meta Information Tag</h2><span id='topic+description_table'></span>

<h3>Description</h3>

<p>Get a table of descriptions for a certain Meta Information Tag
</p>


<h3>Usage</h3>

<pre><code class='language-R'>description_table(
  srppp_xml,
  tag_name,
  code = FALSE,
  latin = FALSE,
  parent_keys = FALSE
)
</code></pre>

<hr>
<h2 id='get_descriptions'>Get descriptions from a node with children that hold descriptions</h2><span id='topic+get_descriptions'></span>

<h3>Description</h3>

<p>Get descriptions from a node with children that hold descriptions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_descriptions(node, code = FALSE, latin = FALSE, parent_keys = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_descriptions_+3A_node">node</code></td>
<td>
<p>The node to look at</p>
</td></tr>
<tr><td><code id="get_descriptions_+3A_code">code</code></td>
<td>
<p>Do the description nodes have a child holding a code?</p>
</td></tr>
<tr><td><code id="get_descriptions_+3A_latin">latin</code></td>
<td>
<p>Are there latin descriptions (e.g. for pest descriptions)</p>
</td></tr>
<tr><td><code id="get_descriptions_+3A_parent_keys">parent_keys</code></td>
<td>
<p>For culture descriptions, we also return up to two primary keys
that link to parent cultures</p>
</td></tr>
</table>

<hr>
<h2 id='get_grandparent_wNbr'>Get W-Number from grandparent node</h2><span id='topic+get_grandparent_wNbr'></span>

<h3>Description</h3>

<p>Get W-Number from grandparent node
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_grandparent_wNbr(node)
</code></pre>

<hr>
<h2 id='get_great_grandparent_wNbr'>Get W-Number from grandparent node</h2><span id='topic+get_great_grandparent_wNbr'></span>

<h3>Description</h3>

<p>Get W-Number from grandparent node
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_great_grandparent_wNbr(node)
</code></pre>

<hr>
<h2 id='get_parent_wNbr'>Get W-Number from parent node</h2><span id='topic+get_parent_wNbr'></span>

<h3>Description</h3>

<p>Get W-Number from parent node
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_parent_wNbr(node)
</code></pre>

<hr>
<h2 id='get_use_nr'>Get use number from parent node (indication information node)</h2><span id='topic+get_use_nr'></span>

<h3>Description</h3>

<p>Get use number from parent node (indication information node)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_use_nr(node)
</code></pre>

<hr>
<h2 id='l_per_ha_is_water_volume'>Use definitions where the rate in l/ha refers to the volume of the spraying solution</h2><span id='topic+l_per_ha_is_water_volume'></span>

<h3>Description</h3>

<p>Use definitions where the rate in l/ha refers to the volume of the spraying solution
</p>


<h3>Usage</h3>

<pre><code class='language-R'>l_per_ha_is_water_volume
</code></pre>


<h3>Format</h3>

<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 1 rows and 4 columns.
</p>


<h3>See Also</h3>

<p><a href="#topic+application_rate_g_per_ha">application_rate_g_per_ha</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(srppp)
l_per_ha_is_water_volume
</code></pre>

<hr>
<h2 id='srppp_dm'>Create a dm object from an XML version of the Swiss Register of Plant Protection Products</h2><span id='topic+srppp_dm'></span><span id='topic+print.srppp_dm'></span>

<h3>Description</h3>

<p>While reading in the data, the information obtained from the XML file is
left unchanged, with the exceptions listed in the section 'Details'.
An overview of the contents of the most important tables in the resulting
data object is given in <code>vignette("srppp")</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>srppp_dm(from = srppp_xml_url, remove_duplicates = TRUE)

## S3 method for class 'srppp_dm'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="srppp_dm_+3A_from">from</code></td>
<td>
<p>A specification of the way to retrieve the XML</p>
</td></tr>
<tr><td><code id="srppp_dm_+3A_remove_duplicates">remove_duplicates</code></td>
<td>
<p>Should duplicates based on wNbrs be removed?</p>
</td></tr>
<tr><td><code id="srppp_dm_+3A_x">x</code></td>
<td>
<p>A <a href="#topic+srppp_dm">srppp_dm</a> object</p>
</td></tr>
<tr><td><code id="srppp_dm_+3A_...">...</code></td>
<td>
<p>Not used</p>
</td></tr>
</table>


<h3>Details</h3>



<h4>Corrections made to the data</h4>


<ul>
<li><p> In the following case, the product composition is corrected while reading in
the data: The active substance content of Dormex (W-3066) is not 667 g/L,
but 520 g/L This was confirmed by a visit to the WÃ¤denswil archive by
Johannes Ranke and Daniel Baumgartner, 2024-03-27.
</p>
</li></ul>




<h4>Removal of redundant information</h4>


<ul>
<li><p> Information on products that has been duplicated across several products
sharing the same P-Number has been associated directly with this P-Number,
in order to avoid duplications. While reading in the XML file, it is checked
that the resulting deduplication does not remove any data.
</p>
</li>
<li><p> In very few cases of historical XML files, there are two <code style="white-space: pre;">&#8288;&lt;Product&gt;&#8288;</code>
sections sharing the same W-Number. In these cases, one of these has apparently
been included in error and an informed decision is taken while reading in
the data which one of these sections is discarded. The details of this
procedure can be found in the source code of the function
<code>srppp_xml_get_products</code>.
</p>
</li></ul>




<h4>Amendments to the data</h4>

<p>In the table of obligations, the following information on mitigation
measures is extracted from the ones relevant for the environment (SPe 3).
</p>

<ul>
<li><p> &quot;sw_drift_dist&quot;: Unsprayed buffer towards surface waters to mitigate
spray drift in meters
</p>
</li>
<li><p> &quot;sw_runoff_dist&quot;: Vegetated buffer towards surface waters to mitigate
runoff in meters
</p>
</li>
<li><p> &quot;sw_runoff_points&quot;: Required runoff mitigation points to mitigate runoff
</p>
</li>
<li><p> &quot;biotope_drift_dist&quot;: Unsprayed buffer towards biotopes (as defined in
articles 18a and 18b of the Federal Act on the Protection of Nature and
Cultural Heritage) to mitigate spray drift in meters
</p>
</li></ul>




<h3>Value</h3>

<p>A <a href="dm.html#topic+dm">dm::dm</a> object with tables linked by foreign keys
pointing to primary keys, i.e. with referential integrity.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> # Avoid NOTE on CRAN caused by checks &gt;5s
library(dplyr, warn.conflicts = FALSE)
library(dm, warn.conflicts = FALSE)

sr &lt;- srppp_dm()
dm_examine_constraints(sr)
dm_draw(sr)

# Show ingredients for products named 'Boxer'
sr$products |&gt;
  filter(name == "Boxer") |&gt;
  left_join(sr$ingredients, by = "pNbr") |&gt;
  left_join(sr$substances, by = "pk") |&gt;
  select(wNbr, name, pNbr, isSalePermission, substance_de, g_per_L)

# Show authorised uses of the original product
boxer_uses &lt;- sr$products |&gt;
  filter(name == "Boxer", !isSalePermission) |&gt;
  left_join(sr$uses, by = "pNbr") |&gt;
  select(pNbr, use_nr,
    min_dosage, max_dosage, min_rate, max_rate, units_de,
    waiting_period, time_units_de, application_area_de)
print(boxer_uses)

# Show crop for use number 1
boxer_uses |&gt;
  filter(use_nr == 1) |&gt;
  left_join(sr$cultures, join_by(pNbr, use_nr)) |&gt;
  select(use_nr, culture_de)

# Show target pests for use number 1
boxer_uses |&gt;
  filter(use_nr == 1) |&gt;
  left_join(sr$pests, join_by(pNbr, use_nr)) |&gt;
  select(use_nr, pest_de)

# Show obligations for use number 1
boxer_uses |&gt;
  filter(use_nr == 1) |&gt;
  left_join(sr$obligations, join_by(pNbr, use_nr)) |&gt;
  select(use_nr, sw_runoff_points, obligation_de) |&gt;
  knitr::kable() |&gt;
  print()

# Show application comments for use number 1
boxer_uses |&gt;
  filter(use_nr == 1) |&gt;
  left_join(sr$application_comments, join_by(pNbr, use_nr)) |&gt;
  select(use_nr, application_comment_de)


</code></pre>

<hr>
<h2 id='srppp_xml_clean_product_names'>Clean product names</h2><span id='topic+srppp_xml_clean_product_names'></span>

<h3>Description</h3>

<p>Clean product names
</p>


<h3>Usage</h3>

<pre><code class='language-R'>srppp_xml_clean_product_names(names)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="srppp_xml_clean_product_names_+3A_names">names</code></td>
<td>
<p>Character vector of product names that should be cleaned from comments</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character vector of cleaned names
</p>

<hr>
<h2 id='srppp_xml_define_use_numbers'>Define use identification numbers in an SRPPP read in from an XML file</h2><span id='topic+srppp_xml_define_use_numbers'></span>

<h3>Description</h3>

<p>Define use identification numbers in an SRPPP read in from an XML file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>srppp_xml_define_use_numbers(srppp_xml = srppp_xml_get())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="srppp_xml_define_use_numbers_+3A_srppp_xml">srppp_xml</code></td>
<td>
<p>An object as returned by <a href="#topic+srppp_xml_get">srppp_xml_get</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of the same class, with 'use_nr' added as an attribute of 'Indication' nodes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
srppp_xml_define_use_numbers()

</code></pre>

<hr>
<h2 id='srppp_xml_get'>Read an XML version of the Swiss Register of Plant Protection Products</h2><span id='topic+srppp_xml_get'></span><span id='topic+srppp_xml_get.NULL'></span><span id='topic+srppp_xml_get.character'></span><span id='topic+srppp_xml_get_from_path'></span>

<h3>Description</h3>

<p>Read an XML version of the Swiss Register of Plant Protection Products
</p>


<h3>Usage</h3>

<pre><code class='language-R'>srppp_xml_get(from, ...)

## S3 method for class ''NULL''
srppp_xml_get(from, ...)

## S3 method for class 'character'
srppp_xml_get(from, ...)

srppp_xml_get_from_path(path, from)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="srppp_xml_get_+3A_from">from</code></td>
<td>
<p>A specification of the way to retrieve the XML</p>
</td></tr>
<tr><td><code id="srppp_xml_get_+3A_...">...</code></td>
<td>
<p>Unused argument introduced to facilitate future extensions</p>
</td></tr>
<tr><td><code id="srppp_xml_get_+3A_path">path</code></td>
<td>
<p>A path to a zipped SRPPP XML file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object inheriting from 'srppp_xml', 'xml_document', 'xml_node'
</p>


<h3>Examples</h3>

<pre><code class='language-R'># The current SRPPP as available from the FOAG website

srppp_cur &lt;- srppp_xml_get()

</code></pre>

<hr>
<h2 id='srppp_xml_get_ingredients'>Get ingredients for all registered products described in an XML version of the Swiss Register of Plant Protection Products</h2><span id='topic+srppp_xml_get_ingredients'></span>

<h3>Description</h3>

<p>Get ingredients for all registered products described in an XML version of the Swiss Register of Plant Protection Products
</p>


<h3>Usage</h3>

<pre><code class='language-R'>srppp_xml_get_ingredients(srppp_xml = srppp_xml_get())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="srppp_xml_get_ingredients_+3A_srppp_xml">srppp_xml</code></td>
<td>
<p>An object as returned by 'srppp_xml_get'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="tibble.html#topic+tibble">tibble::tibble</a> containing a line for each ingredient of each W-Number
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(srppp)
srppp_xml_get_ingredients()

</code></pre>

<hr>
<h2 id='srppp_xml_get_parallel_imports'>Get Parallel Imports from an XML version of the Swiss Register of Plant Protection Products</h2><span id='topic+srppp_xml_get_parallel_imports'></span>

<h3>Description</h3>

<p>Get Parallel Imports from an XML version of the Swiss Register of Plant Protection Products
</p>


<h3>Usage</h3>

<pre><code class='language-R'>srppp_xml_get_parallel_imports(srppp_xml = srppp_xml_get())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="srppp_xml_get_parallel_imports_+3A_srppp_xml">srppp_xml</code></td>
<td>
<p>An object as returned by 'srppp_xml_get'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="tibble.html#topic+tibble">tibble::tibble</a> with a row for each parallel import section
in the XML file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get current list of parallel_imports

srppp_xml_get_parallel_imports()

</code></pre>

<hr>
<h2 id='srppp_xml_get_products'>Get Products from an XML version of the Swiss Register of Plant Protection Products</h2><span id='topic+srppp_xml_get_products'></span>

<h3>Description</h3>

<p>Get Products from an XML version of the Swiss Register of Plant Protection Products
</p>


<h3>Usage</h3>

<pre><code class='language-R'>srppp_xml_get_products(
  srppp_xml = srppp_xml_get(),
  verbose = TRUE,
  remove_duplicates = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="srppp_xml_get_products_+3A_srppp_xml">srppp_xml</code></td>
<td>
<p>An object as returned by 'srppp_xml_get'</p>
</td></tr>
<tr><td><code id="srppp_xml_get_products_+3A_verbose">verbose</code></td>
<td>
<p>Should we give some feedback?</p>
</td></tr>
<tr><td><code id="srppp_xml_get_products_+3A_remove_duplicates">remove_duplicates</code></td>
<td>
<p>Should duplicates based on wNbrs be removed? If set
to 'TRUE', one of the two entries with identical wNbrs is removed, based on
an investigation of background information carried out by the package authors.
In all cases except for one, one of the product sections with duplicate wNbrs
has information about an expiry of the registration, and the other doesn't.
In these cases the registration without expiry is kept, and the expiring
registration is discarded. In the remaining case (wNbr 5945), the second
entry is selected, as it contains more indications which were apparently
intended to be published as well.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="tibble.html#topic+tibble">tibble::tibble</a> with a row for each product section
in the XML file. An attribute 'duplicated_wNbrs' is
also returned, containing duplicated W-Numbers, if applicable,
or NULL.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get current list of products

srppp_xml_get_products()

</code></pre>

<hr>
<h2 id='srppp_xml_get_substances'>Get substances from an XML version of the Swiss Register of Plant Protection Products</h2><span id='topic+srppp_xml_get_substances'></span>

<h3>Description</h3>

<p>Get substances from an XML version of the Swiss Register of Plant Protection Products
</p>


<h3>Usage</h3>

<pre><code class='language-R'>srppp_xml_get_substances(srppp_xml = srppp_xml_get())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="srppp_xml_get_substances_+3A_srppp_xml">srppp_xml</code></td>
<td>
<p>An object as returned by 'srppp_xml_get'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="tibble.html#topic+tibble">tibble::tibble</a> containing primary keys, IUPAC names and substance names in
German, French and Italian.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
srppp_xml_get_substances()

</code></pre>

<hr>
<h2 id='srppp_xml_get_uses'>Get uses ('indications') for all products described in an XML version of the Swiss Register of Plant Protection Products</h2><span id='topic+srppp_xml_get_uses'></span>

<h3>Description</h3>

<p>Get uses ('indications') for all products described in an XML version of the Swiss Register of Plant Protection Products
</p>


<h3>Usage</h3>

<pre><code class='language-R'>srppp_xml_get_uses(srppp_xml = srppp_xml_get())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="srppp_xml_get_uses_+3A_srppp_xml">srppp_xml</code></td>
<td>
<p>An object as returned by <a href="#topic+srppp_xml_get">srppp_xml_get</a> with use numbers
defined by <a href="#topic+srppp_xml_define_use_numbers">srppp_xml_define_use_numbers</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="tibble.html#topic+tibble">tibble::tibble</a> of use definitions
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
srppp_xml &lt;- srppp_xml_get()
srppp_xml &lt;- srppp_xml_define_use_numbers(srppp_xml)
srppp_xml_get_uses(srppp_xml)

</code></pre>

<hr>
<h2 id='srppp_xml_url'>URL of the XML version of the Swiss Register of Plant Protection Products</h2><span id='topic+srppp_xml_url'></span>

<h3>Description</h3>

<p>URL of the XML version of the Swiss Register of Plant Protection Products
</p>


<h3>Usage</h3>

<pre><code class='language-R'>srppp_xml_url
</code></pre>


<h3>Format</h3>

<p>length one character string
</p>


<h3>Examples</h3>

<pre><code class='language-R'>print(srppp_xml_url)
</code></pre>

<hr>
<h2 id='units_convertible_to_g_per_ha'>Product application rate units convertible to grams active substance per hectare</h2><span id='topic+units_convertible_to_g_per_ha'></span>

<h3>Description</h3>

<p>Product application rate units convertible to grams active substance per hectare
</p>


<h3>Usage</h3>

<pre><code class='language-R'>units_convertible_to_g_per_ha
</code></pre>


<h3>Format</h3>

<p>An object of class <code>character</code> of length 7.
</p>


<h3>See Also</h3>

<p><a href="#topic+application_rate_g_per_ha">application_rate_g_per_ha</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(srppp)
library(dplyr)
# These are the convertible units
units_convertible_to_g_per_ha
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
