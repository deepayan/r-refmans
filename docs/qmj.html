<!DOCTYPE html><html lang="en"><head><title>Help for package qmj</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {qmj}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#qmj'><p>Exploring a quality minus junk approach to evaluating stocks</p></a></li>
<li><a href='#clean_downloads'><p>Removes downloaded temporary files.</p></a></li>
<li><a href='#companies_r3k16'><p>A list of all companies in the Russell 3000 Index</p></a></li>
<li><a href='#financials_r3k16'><p>Financial statements of all companies in the Russell 3000 index</p>
for the past four years</a></li>
<li><a href='#get_companies'><p>Builds a companies data frame from a text file.</p></a></li>
<li><a href='#get_info'><p>Gets raw financial statements from Google Finance.</p></a></li>
<li><a href='#get_prices'><p>Grab daily prices and price returns for the previous two years.</p></a></li>
<li><a href='#install_yfinance'><p>Install yfinance and dependencies</p></a></li>
<li><a href='#market_data'><p>Produces component and quality scores.</p></a></li>
<li><a href='#market_growth'><p>Collects growth z-scores for companies</p></a></li>
<li><a href='#market_payouts'><p>Collects payout z-scores for companies</p></a></li>
<li><a href='#market_profitability'><p>Collects profitability z-scores for companies</p></a></li>
<li><a href='#market_safety'><p>Collects safety z-scores for companies</p></a></li>
<li><a href='#prices_r3k16'><p>A dataframe of price returns and closing prices for companies in</p>
the Russell 3000 Index</a></li>
<li><a href='#quality_r3k16'><p>A dataframe of quality scores for companies listed in the Russell 3000</p></a></li>
<li><a href='#tidy_balancesheets'><p>Makes raw balancesheet data usable and readable.</p></a></li>
<li><a href='#tidy_cashflows'><p>Makes raw cash flow data usable and readable.</p></a></li>
<li><a href='#tidy_helper'><p>Main helper function for all tidy functions.</p></a></li>
<li><a href='#tidy_incomestatements'><p>Makes raw incomestatement data usable and readable.</p></a></li>
<li><a href='#tidy_prices'><p>Formats raw price data.</p></a></li>
<li><a href='#tidyinfo'><p>Formats raw financial data.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Quality Scores for the Russell 3000</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Produces quality scores for each of the US companies from 
    the Russell 3000, following the approach described in 
    "Quality Minus Junk" (Asness, Frazzini, &amp; Pedersen, 2013) 
    <a href="http://www.aqr.com/library/working-papers/quality-minus-junk">http://www.aqr.com/library/working-papers/quality-minus-junk</a>. 
    The package includes datasets for users who wish to view the most recently 
    uploaded quality scores. It also provides tools to automatically gather 
    relevant financials and stock price information, allowing users to update 
    their data and customize their universe for further analysis.</td>
</tr>
<tr>
<td>Imports:</td>
<td>quantmod(&ge; 0.4-3), dplyr, reticulate, rlang</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/anttsou/qmj/issues">https://github.com/anttsou/qmj/issues</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>LazyDataCompression:</td>
<td>xz</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Config/reticulate:</td>
<td>list(packages = list(list(package = "yfinance")))</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-01-14 13:52:36 UTC; milz</td>
</tr>
<tr>
<td>Author:</td>
<td>Anthoney Tsou [aut],
  Eugene Choe [aut],
  David Kane [aut],
  Ryan Kwon [aut],
  Yanrong Song [aut, cre],
  Zijie Zhu [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Yanrong Song &lt;yrsong129@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-15 18:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='qmj'>Exploring a quality minus junk approach to evaluating stocks</h2><span id='topic+qmj-package'></span><span id='topic+qmj'></span>

<h3>Description</h3>

<p>The <strong>qmj</strong> package calculates quality scores for the companies 
in the Russell 3000 Index based on the paper 
<em>Quality Minus Junk</em> by Clifford Asness, Andrea Frazzini, 
and Lasse Pedersen.
</p>


<h3>Details</h3>

<p>Quality is a scaled measure of a company's profitability, growth, 
safety, and payouts. By using publicly available data for 
company balance sheets, income statements, and cash flows, <strong>qmj</strong> 
calculates relative quality z-scores for companies. 
</p>
<p>All functions and datasets are documented, and are freely 
available for use.
Index of datasets:
</p>

<ul>
<li><p> companies_r3k16 - A data frame of publicly traded companies in the Russell 
3000 Index.
</p>
</li>
<li><p> financials_r3k16 - Financial statements for companies in the 
companies_r3k16 dataset.
</p>
</li>
<li><p> prices_r3k16 - Daily prices and price returns for the past two years for
each company.
</p>
</li>
<li><p> quality_r3k16 - Measured quality z-scores and component scores
</p>
</li></ul>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Yanrong Song <a href="mailto:yrsong129@gmail.com">yrsong129@gmail.com</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Anthoney Tsou <a href="mailto:anttsou@gmail.com">anttsou@gmail.com</a>
</p>
</li>
<li><p> Eugene Choe <a href="mailto:ec7@williams.edu">ec7@williams.edu</a>
</p>
</li>
<li><p> David Kane <a href="mailto:dave.kane@gmail.com">dave.kane@gmail.com</a>
</p>
</li>
<li><p> Ryan Kwon <a href="mailto:rynkwn@gmail.com">rynkwn@gmail.com</a>
</p>
</li>
<li><p> Zijie Zhu <a href="mailto:zijie.miller.zhu@gmail.com">zijie.miller.zhu@gmail.com</a>
</p>
</li></ul>



<h3>References</h3>

<p>Asness, Clifford S., Andrea Frazzini, and Lasse H. Pedersen. 'Quality Minus Junk.' AQR (2013)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li><p> Report bugs at <a href="https://github.com/anttsou/qmj/issues">https://github.com/anttsou/qmj/issues</a>
</p>
</li></ul>


<hr>
<h2 id='clean_downloads'>Removes downloaded temporary files.</h2><span id='topic+clean_downloads'></span>

<h3>Description</h3>

<p><code>clean_downloads</code> removes files that get_info and get_prices
temporarily store when progress is interrupted while updating. 
Because the temporarily stored data may become irrelvant over time,
clean_downloads removes these files so that get_info and
get_prices will download completely fresh sets of data for a given
data frame of companies.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_downloads(x = qmj::companies_r3k16)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clean_downloads_+3A_x">x</code></td>
<td>
<p>A data frame of companies. Must have a ticker column.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The clean_downloads() function will also automatically remove any
temporarily stored data for the S&amp;P 500, with the stock ticker ^GSPC.
</p>


<h3>Value</h3>

<p>A logical vector Where the (2i-1)th and (2i)th element corresponds to
whether or not a temporary financial and/or price file, respectively, 
was found and removed for the ith company provided. 
</p>
<p>For example, if AAPL was our 3rd company, for which we had not 
partially downloaded financial data, but did have temporary 
price data, the 5th and 6th elements of the logical vector 
would be FALSE and TRUE, respectively.
</p>
<p>The last two indices refer to the S&amp;P 500 temporary data.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_prices">get_prices</a></code>
</p>
<p><code><a href="#topic+get_info">get_info</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>clean_downloads()

</code></pre>

<hr>
<h2 id='companies_r3k16'>A list of all companies in the Russell 3000 Index</h2><span id='topic+companies_r3k16'></span>

<h3>Description</h3>

<p>Stores the names and tickers for all companies in the 
Russell 3000 Index as of January 2016.The list from 
which the data was culled was last updated 2015/06/26.
</p>


<h3>Format</h3>

<p>A data frame with approximately 3000 rows and 2 variables.
</p>

<ul>
<li><p> name = The name of the company. Of class 
<code>"character"</code>.
</p>
</li>
<li><p> ticker = The ticker of the company. Of class 
<code>"character"</code>.
</p>
</li></ul>



<h3>Details</h3>

<p>The Russell 3000 Index is an equity index that tracks 
the performance of the &quot;3000&quot; (this number may actually 
vary from year to year, but is always in the neighborhood 
of 3000) largest US companies as measured by market cap. 
The component companies that make up this index are 
reconstituted once a year, usually between May and June.
At this reconstitution, all companies are reranked based 
on their market caps for the year, and any companies which 
become &quot;ineligible&quot; by,for example, going bankrupt, 
becoming acquired, or becoming private, are replaced at 
this time.
</p>
<p>This Index was chosen due to the size of its component
companies (which mitigates the likelihood of erroneous 
items, such as a tiny company doubling in profitability 
despite there being little absolute change), this package's 
reliance on US-centric data sources, and to produce items which
are more likely to interest the user.
</p>
<p>Companies_r3k16 crucially provides tickers to many functions in the
package, allowing the package to connect financial statements 
and price information to a specific company. It is also the 
basis of the many &quot;get&quot; functions of the package, which retrieves 
and then formats data from the web. The Companies_r3k16 data set is the 
&quot;base&quot; data that produces financials, prices, and ultimately 
quality scores.
</p>


<h3>Source</h3>

<p><a href="https://www.lseg.com/en/ftse-russell">https://www.lseg.com/en/ftse-russell</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+financials_r3k16">financials_r3k16</a></code>
</p>
<p><code><a href="#topic+prices_r3k16">prices_r3k16</a></code>
</p>

<hr>
<h2 id='financials_r3k16'>Financial statements of all companies in the Russell 3000 index 
for the past four years</h2><span id='topic+financials_r3k16'></span>

<h3>Description</h3>

<p>A data frame containing all annual financial statements (balancesheets,
cashflows, and income statements) for the past four years if available.
For a description of the Russell 3000 index, as well as why it was used
for this package, see <code><a href="#topic+companies_r3k16">companies_r3k16</a></code>. Last updated 2016/01/06.
</p>


<h3>Format</h3>

<p>A data frame with approximately 12000 rows and 23 variables
</p>

<ul>
<li><p> AM = Amortization, of class <code>"character"</code>.
</p>
</li>
<li><p> CWC = Changes in Working Capital, of class <code>"character"</code>.
</p>
</li>
<li><p> CX = Capital Expenditures, of class <code>"character"</code>.
</p>
</li>
<li><p> DIVC = Dividends per Share, of class <code>"character"</code>.
</p>
</li>
<li><p> DO = Discontinued Operations, of class <code>"character"</code>.
</p>
</li>
<li><p> DP.DPL = Depreciation/Depletion, of class <code>"character"</code>.
</p>
</li>
<li><p> GPROF = Gross Profits, of class <code>"character"</code>.
</p>
</li>
<li><p> IAT = Income After Taxes, of class <code>"character"</code>.
</p>
</li>
<li><p> IBT = Income Before Taxes, of class <code>"character"</code>.
</p>
</li>
<li><p> NI = Net Income, of class <code>"character"</code>.
</p>
</li>
<li><p> NINT = Interest and Expense - Net Operating, of class 
<code>"character"</code>.
</p>
</li>
<li><p> NRPS = Non-redeemable Preferred Stock, of class 
<code>"character"</code>.
</p>
</li>
<li><p> RPS = Redeemable Preferred Stock, of class 
<code>"character"</code>.
</p>
</li>
<li><p> TA = Total Assets, of class <code>"character"</code>.
</p>
</li>
<li><p> TCA = Total Current Assets, of class <code>"character"</code>.
</p>
</li>
<li><p> TCL = Total Current Liabilities, of class 
<code>"character"</code>.
</p>
</li>
<li><p> TCSO = Total Common Shares Outstanding, of class 
<code>"character"</code>.
</p>
</li>
<li><p> TD = Total Debt, of class <code>"character"</code>.
</p>
</li>
<li><p> TL = Total Liabilities, of class <code>"character"</code>.
</p>
</li>
<li><p> TLSE = Total Liabilities and Shareholders' Equity, 
of class <code>"character"</code>.
</p>
</li>
<li><p> TREV = Total Revenue, of class <code>"character"</code>.
</p>
</li></ul>



<h3>Details</h3>

<p>Some companies may store &quot;weird&quot; data, such as having information solely 
for the years 1997-2001, or by having multiple annual reports within the
same year (such as one report being filed in March of 2013, and another 
filed in December of 2013). In the case of companies reporting multiple 
annual data from the same year, the years of their reports are suffixed 
with their order. For example, GOOG may have data from 2013.1, 2013.2, 
2012.3, 2011.4. This means Google's most recent data set is from 
2013 (2013.1), another data set was published in 2013 (2013.2), and the 
remaining years are also suffixed for convenience.
</p>
<p>The main purpose of financials_r3k16 is to provide key information for each 
company in order to calculate each of the quality component scores 
(profitability, growth, safety, and payouts). For every ticker in the 
<code><a href="#topic+companies_r3k16">companies_r3k16</a></code> data set, financials_r3k16 will try to store the most 
recent four years of annual data, though this may vary based on 
availability.
</p>


<h3>Source</h3>

<p>Google &amp; Yahoo Finance, accessed through quantmod &amp; yfinance
</p>


<h3>See Also</h3>

<p><code><a href="#topic+companies_r3k16">companies_r3k16</a></code>
</p>
<p><code><a href="#topic+prices_r3k16">prices_r3k16</a></code>
</p>

<hr>
<h2 id='get_companies'>Builds a companies data frame from a text file.</h2><span id='topic+get_companies'></span>

<h3>Description</h3>

<p><code>get_companies</code> reads in the contents of a text file
created from the pdf of company names and tickers given by
the Russell 3000 Index.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_companies(filepath = system.file("extdata/companies.txt", package = "qmj"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_companies_+3A_filepath">filepath</code></td>
<td>
<p>Specifies the filepath of the text file containing the company names and 
tickers of interest. May be either absolute or relative to working directory.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The user must copy and paste the contents of the Russell
3000 Index into a text file for this function to process the
data correctly. Simply select all of the component list and paste 
the contents into an empty document with
the .txt extension. The list may be found 
<a href="https://www.lseg.com/en/ftse-russell">here</a>.
</p>
<p>If you wish to use your own text file of companies for get_companies to process,
create a text file containing each company on a separate line. Every word and ticker
must be capitalized, and the ticker must be the last word, separated by a space, on
each line.
</p>
<p><code>get_companies</code> by default uses a text file created from
the Russell 3000 Index in the package.
</p>


<h3>Value</h3>

<p>data.frame of companies info
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>get_companies()</code>: function splits by space and grabs everything before 
the last word as the name and has the last word as the ticker.
Which chunk it returns is determined by the is_name variable.
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>get_companies()

</code></pre>

<hr>
<h2 id='get_info'>Gets raw financial statements from Google Finance.</h2><span id='topic+get_info'></span>

<h3>Description</h3>

<p><code>get_info</code> grabs annual financial data for a given data frame of companies.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_info(companies = qmj::companies_r3k16)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_info_+3A_companies">companies</code></td>
<td>
<p>A data frame of companies. Must have a ticker column.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For each ticker in the data frame of companies, <code>get_info</code> grabs
financial data using the quantmod package and generates a list with 
three sub-lists. Also writes .RData files to the user's temporary directory. 
If cancelled partway through, <code>get_info</code> is able to find and re-read this
data, quickly resuming its progress. Once complete, <code>get_info</code> deletes
all used temporary data.
</p>
<p>Parameter data frame defaults to provided <code>companies_r3k16</code> data set if not specified.
</p>


<h3>Value</h3>

<p>A list with three elements. Each element is a list containing
all financial documents of a specific type for each company. These lists are, in order,
all cash flow statements, all income statements, and all balance sheets.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_prices">get_prices</a></code>
</p>
<p><code><a href="#topic+clean_downloads">clean_downloads</a></code>
</p>
<p><code><a href="#topic+tidyinfo">tidyinfo</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Takes more than 10 secs
if (reticulate::py_module_available("yfinance")) 
  get_info(companies_r3k16[companies_r3k16$ticker %in% c("AAPL", "AMZN"), ])


</code></pre>

<hr>
<h2 id='get_prices'>Grab daily prices and price returns for the previous two years.</h2><span id='topic+get_prices'></span>

<h3>Description</h3>

<p><code>get_prices</code> grabs price-related data for a given data frame
of companies and returns a matrix-like object containing relevant
price data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_prices(companies = qmj::companies_r3k16)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_prices_+3A_companies">companies</code></td>
<td>
<p>A data frame of company names and tickers.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>get_prices</code> is also able to write .RData files
to the user's temporary directory. If canceled partway through,
the function is able to find and re-read this data to resume progress.
Once complete, the function deletes all used temporary data.
</p>
<p>Parameter defaults to provided data set of companies if empty.
</p>


<h3>Value</h3>

<p>A matrix-like object containing relevant price data. The rows
of the matrix are dates in the international standard of YYYY-MM-DD. Each
column specifies what data it covers in the form of TICKER.DATA, with the
exception of price returns, which are stored as pret.#, where # refers to
the the i-th company given. 
</p>
<p>The first company calculated is always the S&amp;P 500, and its price return
column is simply 'pret'.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>get_prices()</code>: Calculates price returns for an xts object.
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="#topic+get_info">get_info</a></code>
</p>
<p><code><a href="#topic+clean_downloads">clean_downloads</a></code>
</p>
<p><code><a href="#topic+tidy_prices">tidy_prices</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_prices(companies_r3k16[companies_r3k16$ticker %in% c("AAPL", "AMZN"), ])

</code></pre>

<hr>
<h2 id='install_yfinance'>Install yfinance and dependencies</h2><span id='topic+install_yfinance'></span>

<h3>Description</h3>

<p>&lsquo;install_yfinance()' installs just the yfinance python package and it&rsquo;s
direct dependencies. Users may be asked to install miniconda for the python installations. 
Even if you first decline it, you can later install miniconda by running
['reticulate::install_miniconda()']
</p>


<h3>Usage</h3>

<pre><code class='language-R'>install_yfinance(..., envname = "r-qmj", new_env = identical(envname, "r-qmj"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="install_yfinance_+3A_...">...</code></td>
<td>
<p>other arguments passed to ['reticulate::py_install()']</p>
</td></tr>
<tr><td><code id="install_yfinance_+3A_envname">envname</code></td>
<td>
<p>The name, or full path, of the environment in which Python
packages are to be installed. When <code>NULL</code> (the default), the active
environment as set by the <code>RETICULATE_PYTHON_ENV</code> variable will be used;
if that is unset, then the <code>r-reticulate</code> environment will be used.</p>
</td></tr>
<tr><td><code id="install_yfinance_+3A_new_env">new_env</code></td>
<td>
<p>Delete 'envname' if it already exists</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for installing Python yfinance module
</p>

<hr>
<h2 id='market_data'>Produces component and quality scores.</h2><span id='topic+market_data'></span>

<h3>Description</h3>

<p>Calculates market growth, payouts, safety, and 
profitability of our list of companies for later 
processing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>market_data(
  companies = qmj::companies_r3k16,
  financials = qmj::financials_r3k16,
  prices = qmj::prices_r3k16
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="market_data_+3A_companies">companies</code></td>
<td>
<p>A data frame of company names and 
tickers.</p>
</td></tr>
<tr><td><code id="market_data_+3A_financials">financials</code></td>
<td>
<p>A data frame containing financial 
information for the given companies.</p>
</td></tr>
<tr><td><code id="market_data_+3A_prices">prices</code></td>
<td>
<p>A data frame containing the daily 
market closing prices and returns.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All parameters default to package data sets and must
be formatted similarly to a data frame produced by
<code><a href="#topic+tidy_prices">tidy_prices</a></code> and <code><a href="#topic+tidyinfo">tidyinfo</a></code>.
</p>


<h3>Value</h3>

<p>A data frame containing company names, tickers, 
profitability z-scores, growth z-scores, safety z-scores,
payout z-scores, and quality z-scores. Organized by
quality in descending order.
</p>
<p>data.frame of all market data
</p>


<h3>See Also</h3>

<p><code><a href="#topic+market_profitability">market_profitability</a></code>
</p>
<p><code><a href="#topic+market_growth">market_growth</a></code>
</p>
<p><code><a href="#topic+market_safety">market_safety</a></code>
</p>
<p><code><a href="#topic+market_payouts">market_payouts</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Takes more than 10 secs
market_data(companies_r3k16[companies_r3k16$ticker %in% c("AAPL"), ])


</code></pre>

<hr>
<h2 id='market_growth'>Collects growth z-scores for companies</h2><span id='topic+market_growth'></span>

<h3>Description</h3>

<p>Given a data frame of companies (names and tickers) and 
a data frame of financial statements, calculates GPOA, 
ROE, ROA, CFOA, GMAR, ACC over a four-year time span
and determines the z-score of overall growth for each 
company based on the paper Quality Minus Junk 
(Asness et al.) in Appendix page A2.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>market_growth(
  companies = qmj::companies_r3k16,
  financials = qmj::financials_r3k16
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="market_growth_+3A_companies">companies</code></td>
<td>
<p>A data frame of company names and tickers.</p>
</td></tr>
<tr><td><code id="market_growth_+3A_financials">financials</code></td>
<td>
<p>A data frame containing financial
statements for every company.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame of market growth values
</p>


<h3>See Also</h3>

<p><code><a href="#topic+market_data">market_data</a></code>
</p>
<p><code><a href="#topic+market_profitability">market_profitability</a></code>
</p>
<p><code><a href="#topic+market_safety">market_safety</a></code>
</p>
<p><code><a href="#topic+market_payouts">market_payouts</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>market_growth(companies_r3k16[1,], financials_r3k16)
</code></pre>

<hr>
<h2 id='market_payouts'>Collects payout z-scores for companies</h2><span id='topic+market_payouts'></span>

<h3>Description</h3>

<p>Given a data frame of companies (names and tickers) and a data frame of 
financial statements, calculates EISS, DISS, NPOP and determines the 
z-score of overall payout for each company based on the paper Quality 
Minus Junk (Asness et al.) in Appendix page A3-4.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>market_payouts(
  companies = qmj::companies_r3k16,
  financials = qmj::financials_r3k16
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="market_payouts_+3A_companies">companies</code></td>
<td>
<p>A data frame of company names and tickers. Requires
a 'ticker' column. Defaults to the provided companies data set.</p>
</td></tr>
<tr><td><code id="market_payouts_+3A_financials">financials</code></td>
<td>
<p>A data frame containing financial statements for every
company. Defaults to the provided financials data set.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame of market payouts values
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>market_payouts()</code>: Returns all rows in x that aren't in y,
where x and y are data frames.
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="#topic+market_data">market_data</a></code>
</p>
<p><code><a href="#topic+market_profitability">market_profitability</a></code>
</p>
<p><code><a href="#topic+market_growth">market_growth</a></code>
</p>
<p><code><a href="#topic+market_safety">market_safety</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>market_payouts(companies_r3k16[1,], financials_r3k16)
</code></pre>

<hr>
<h2 id='market_profitability'>Collects profitability z-scores for companies</h2><span id='topic+market_profitability'></span>

<h3>Description</h3>

<p>Given a data frame of companies (names and tickers) and
a data frame of financial statements, calculates GPOA, 
ROE, ROA, CFOA, GMAR, ACC and determines the z-score of 
overall profitability for each company based on the paper 
Quality Minus Junk (Asness et al.) in Appendix page A2.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>market_profitability(
  companies = qmj::companies_r3k16,
  financials = qmj::financials_r3k16
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="market_profitability_+3A_companies">companies</code></td>
<td>
<p>A data frame of company names and tickers.
Requires a 'ticker' column. Defaults to provided companies
data set.</p>
</td></tr>
<tr><td><code id="market_profitability_+3A_financials">financials</code></td>
<td>
<p>A data frame containing financial 
statements for every company. Defaults to provided
financial data set.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Whatdata.frame of market profitability values
</p>


<h3>See Also</h3>

<p><code><a href="#topic+market_data">market_data</a></code>
</p>
<p><code><a href="#topic+market_growth">market_growth</a></code>
</p>
<p><code><a href="#topic+market_safety">market_safety</a></code>
</p>
<p><code><a href="#topic+market_payouts">market_payouts</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>market_profitability(companies_r3k16[1,], financials_r3k16)
</code></pre>

<hr>
<h2 id='market_safety'>Collects safety z-scores for companies</h2><span id='topic+market_safety'></span>

<h3>Description</h3>

<p>Given a data frame of companies (names and tickers), a data frame of financial
statements, and a data frame of daily price data, calculates BAB, IVOL, LEV, 
O, Z, and EVOL, and determines the z-score of overall safety for each company 
based on the paper Quality Minus Junk (Asness et al.) in Appendix page A2.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>market_safety(
  companies = qmj::companies_r3k16,
  financials = qmj::financials_r3k16,
  prices = qmj::prices_r3k16
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="market_safety_+3A_companies">companies</code></td>
<td>
<p>A data frame of company names and tickers.</p>
</td></tr>
<tr><td><code id="market_safety_+3A_financials">financials</code></td>
<td>
<p>A data frame containing financial statements for every 
company.</p>
</td></tr>
<tr><td><code id="market_safety_+3A_prices">prices</code></td>
<td>
<p>A data frame containing the daily market closing prices and 
returns.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame of market safety values
</p>


<h3>See Also</h3>

<p><code><a href="#topic+market_data">market_data</a></code>
</p>
<p><code><a href="#topic+market_profitability">market_profitability</a></code>
</p>
<p><code><a href="#topic+market_growth">market_growth</a></code>
</p>
<p><code><a href="#topic+market_payouts">market_payouts</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Takes more than 10 secs
market_safety(companies_r3k16[companies_r3k16$ticker %in% c("AAPL"), ])


</code></pre>

<hr>
<h2 id='prices_r3k16'>A dataframe of price returns and closing prices for companies in 
the Russell 3000 Index</h2><span id='topic+prices_r3k16'></span>

<h3>Description</h3>

<p>Stores price returns and closing prices for the past two years 
(if available) for the Russell 3000 Index companies as well as 
the S&amp;P 500 (uniquely taken from Yahoo finance), to serve as a 
benchmark. For a description of the Russell 3000 index, as well as 
why it was used for this package, see <code><a href="#topic+companies_r3k16">companies_r3k16</a></code>.
Last updated 2016/01/06.
</p>


<h3>Format</h3>

<p>A data frame with roughly 1,500,000 rows and 4 variables
</p>

<ul>
<li><p> ticker = Company ticker, of class <code>"character"</code>.
</p>
</li>
<li><p> date = Date in format YYYY-MM-DD, of class <code>"character"</code>.
</p>
</li>
<li><p> pret = Price returns, of class <code>"numeric"</code>.
</p>
</li>
<li><p> close = Closing stock prices for the day, of class <code>"numeric"</code>.
</p>
</li></ul>



<h3>Details</h3>

<p>Prices is used to calculate the safety score of companies, and
stores closing stock prices and price returns for every company 
in <code><a href="#topic+companies_r3k16">companies_r3k16</a></code> for the past two years. Price data 
varies significantly among companies, and companies that do not 
return price data are not represented here. Price returns are 
also calculated using two adjacent days in the dataset, a timespan
which may cover one day or several depending on the company and 
what day is being considered.
</p>


<h3>Source</h3>

<p>Google Finance, accessed through quantmod
</p>


<h3>See Also</h3>

<p><code><a href="#topic+companies_r3k16">companies_r3k16</a></code>
</p>
<p><code><a href="#topic+financials_r3k16">financials_r3k16</a></code>
</p>

<hr>
<h2 id='quality_r3k16'>A dataframe of quality scores for companies listed in the Russell 3000</h2><span id='topic+quality_r3k16'></span>

<h3>Description</h3>

<p>Displays overall quality scores as well as the scores for profitability, 
growth, safety, and payouts. Companies are sorted in order of quality 
score, with NAs stored at the end of the data set. For a description of 
the Russell 3000 index, as well as why it was used for this package, 
see <code><a href="#topic+companies_r3k16">companies_r3k16</a></code>. Last updated 2016/01/06.
</p>


<h3>Format</h3>

<p>A data frame with approximately 3000 rows and 7 variables
</p>

<ul>
<li><p> quality = class <code>"numeric"</code>.
</p>
</li>
<li><p> profitability = class <code>"numeric"</code>.
</p>
</li>
<li><p> growth = class <code>"numeric"</code>.
</p>
</li>
<li><p> safety = class <code>"numeric"</code>.
</p>
</li>
<li><p> payouts = class <code>"numeric"</code>.
</p>
</li></ul>



<h3>Details</h3>

<p>The quality data set stores quality and component scores for the 
various companies list in the <code><a href="#topic+companies_r3k16">companies_r3k16</a></code> data set. For 
every ticker in companies, quality attempts to assign a profitability, 
growth, safety, and payouts score to each company using data from 
<code><a href="#topic+financials_r3k16">financials_r3k16</a></code> and <code><a href="#topic+prices_r3k16">prices_r3k16</a></code>, and then attempts 
to provide a quality score. It is possible that one or more companies 
may not have sufficient information to provide one or more component 
scores, in which case those companies can still be found at the end 
of the data set, with NA's making up any data that cannot be found.
</p>
<p>If partial information exists (i.e., a profitability score was able to 
be calculated), then those scores are kept for that company, even if
insufficient information exists to produce a quality score. More 
details may be found on the technical vignette.
</p>

<hr>
<h2 id='tidy_balancesheets'>Makes raw balancesheet data usable and readable.</h2><span id='topic+tidy_balancesheets'></span>

<h3>Description</h3>

<p>Processes raw balance sheet data produced from quantmod 
into a tidy data frame. Raw balance sheet data must be 
formatted in a list such that every element is a data 
frame or matrix containing quantmod data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tidy_balancesheets(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tidy_balancesheets_+3A_x">x</code></td>
<td>
<p>A list of raw cash flow data produced from quantmod</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>tidy_balancesheets</code> produces a data frame that is
'tidy' or more readily readable by a user and usable by
other functions within this package.
</p>


<h3>Value</h3>

<p>Returns a data set that's been 'tidied' up for use 
by other functions in this package.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_info">get_info</a></code>
</p>
<p><code><a href="#topic+tidyinfo">tidyinfo</a></code>
</p>
<p><code><a href="#topic+tidy_cashflows">tidy_cashflows</a></code>
</p>
<p><code><a href="#topic+tidy_incomestatements">tidy_incomestatements</a></code>
</p>

<hr>
<h2 id='tidy_cashflows'>Makes raw cash flow data usable and readable.</h2><span id='topic+tidy_cashflows'></span>

<h3>Description</h3>

<p>Processes raw cash flow data from quantmod to return 
a tidied data frame. Raw cash flow data must be formatted 
in a list such that every element is a data frame or 
matrix containing quantmod data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tidy_cashflows(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tidy_cashflows_+3A_x">x</code></td>
<td>
<p>A list of raw cash flow data produced from quantmod</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>tidy_cashflows</code> produces a data frame that is 'tidy' 
or more readily readable by a user and usable by other 
functions within this package.
</p>


<h3>Value</h3>

<p>Returns a data set that's been 'tidied' up for use
by other functions in this package.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_info">get_info</a></code>
</p>
<p><code><a href="#topic+tidyinfo">tidyinfo</a></code>
</p>
<p><code><a href="#topic+tidy_balancesheets">tidy_balancesheets</a></code>
</p>
<p><code><a href="#topic+tidy_incomestatements">tidy_incomestatements</a></code>
</p>

<hr>
<h2 id='tidy_helper'>Main helper function for all tidy functions.</h2><span id='topic+tidy_helper'></span>

<h3>Description</h3>

<p>This function does the main work of converting
raw financial data into organized data frames. 
It is used by qmj's tidy functions to reuse common
code and to avoid potential mistakes from repeating
similar processes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tidy_helper(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tidy_helper_+3A_x">x</code></td>
<td>
<p>A matrix containing financial information, 
either cash flows, balancesheets, or income statements,
downloaded from Google Finance. The formatting of the 
matrix has not been altered yet, as if just retrieved.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+tidy_cashflows">tidy_cashflows</a></code>
</p>
<p><code><a href="#topic+tidy_balancesheets">tidy_balancesheets</a></code>
</p>
<p><code><a href="#topic+tidy_incomestatements">tidy_incomestatements</a></code>
</p>

<hr>
<h2 id='tidy_incomestatements'>Makes raw incomestatement data usable and readable.</h2><span id='topic+tidy_incomestatements'></span>

<h3>Description</h3>

<p>Tidies raw income statement data produced from quantmod and returns 
the tidied data frame. Raw income statement data must be formatted 
in a list such that every element is a data frame or matrix containing
quantmod data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tidy_incomestatements(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tidy_incomestatements_+3A_x">x</code></td>
<td>
<p>A list of raw incomestatement file data produced from quantmod</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>tidy_incomestatements</code> produces a data frame that is 'tidy' 
or more readily readable by a user and usable by other functions within 
this package.
</p>


<h3>Value</h3>

<p>Returns a data set that's been 'tidied' up for use by other 
functions in this package.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_info">get_info</a></code>
</p>
<p><code><a href="#topic+tidyinfo">tidyinfo</a></code>
</p>
<p><code><a href="#topic+tidy_cashflows">tidy_cashflows</a></code>
</p>
<p><code><a href="#topic+tidy_balancesheets">tidy_balancesheets</a></code>
</p>

<hr>
<h2 id='tidy_prices'>Formats raw price data.</h2><span id='topic+tidy_prices'></span>

<h3>Description</h3>

<p>Tidies raw prices and returns a tidied, usable data frame. 
Raw data should be structured identically to that produced
by get_prices(), as this function depends on that structure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tidy_prices(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tidy_prices_+3A_x">x</code></td>
<td>
<p>Raw daily data, as produced by get_prices()</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>tidy_prices</code> produces a data frame that is 'tidy' or 
more readily readable by a user and usable by other functions
within this package.
</p>


<h3>Value</h3>

<p>Returns a data set that's been 'tidied' up for use 
by other functions in this package.
</p>
<p>data.frame of cleaned prices
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>tidy_prices()</code>: combines relevant columns from the original price
data set.
Convert certain columns into character in order to
bypass the warning generated by dplyr::bind_rows()
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="#topic+get_prices">get_prices</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>my_companies &lt;- data.frame(ticker=c('GOOG', 'IBM'))
raw_price_data &lt;- get_prices(my_companies)
prices &lt;- tidy_prices(raw_price_data)

</code></pre>

<hr>
<h2 id='tidyinfo'>Formats raw financial data.</h2><span id='topic+tidyinfo'></span>

<h3>Description</h3>

<p><code>tidyinfo</code> works by formatting and curtailing the 
raw data generated by quantmod (and, by extension, 
the <code>get_info</code> function of this package)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tidyinfo(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tidyinfo_+3A_x">x</code></td>
<td>
<p>A list of lists of financial statements. 
Generated from get_info(companies).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data set that is usable by the 
other functions of this package, as well as being 
generally more readable.
</p>
<p>data.frame of cleaned info (cash flows, income statements, balance sheets)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_info">get_info</a></code>
</p>
<p><code><a href="#topic+tidy_cashflows">tidy_cashflows</a></code>
</p>
<p><code><a href="#topic+tidy_balancesheets">tidy_balancesheets</a></code>
</p>
<p><code><a href="#topic+tidy_incomestatements">tidy_incomestatements</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (reticulate::py_module_available("yfinance")) {
  my_companies &lt;- data.frame(ticker = c('GOOG', 'IBM'))
  raw_data &lt;- get_info(my_companies)
  financials &lt;- tidyinfo(raw_data)
}


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
