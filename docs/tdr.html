<!DOCTYPE html><html><head><title>Help for package tdr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {tdr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#Stats'>
<p>Error Statistics</p></a></li>
<li><a href='#TargetDiagram'>
<p>Target Diagrams</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Target Diagram</td>
</tr>
<tr>
<td>Version:</td>
<td>0.13</td>
</tr>
<tr>
<td>Date:</td>
<td>2018-01-10</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Description:</td>
<td>Implementation of target diagrams using 'lattice' and 'ggplot2' graphics. Target diagrams provide a graphical overview of the respective contributions of the unbiased RMSE and MBE to the total RMSE (Jolliff, J. et al., 2009. "Summary Diagrams for Coupled Hydrodynamic-Ecosystem Model Skill Assessment." Journal of Marine Systems 76: 64–82.)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://github.com/oscarperpinan/tdr">http://github.com/oscarperpinan/tdr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/oscarperpinan/tdr/issues">https://github.com/oscarperpinan/tdr/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>lattice, ggplot2</td>
</tr>
<tr>
<td>Imports:</td>
<td>RColorBrewer, grDevices, stats, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>latticeExtra</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2018-01-10 21:09:35 UTC; oscar</td>
</tr>
<tr>
<td>Author:</td>
<td>Oscar Perpinan Lamigueiro [cre, aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Oscar Perpinan Lamigueiro &lt;oscar.perpinan@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2018-01-10 21:19:37 UTC</td>
</tr>
</table>
<hr>
<h2 id='Stats'>
Error Statistics
</h2><span id='topic+tdStats'></span><span id='topic+applyStats'></span><span id='topic+pvObs'></span><span id='topic+pvModels'></span>

<h3>Description</h3>

<p>Error Statistics
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tdStats(m, o,
         functions = c("mo", "mm",
                       "sdo", "sdm",
                       "mbe", "mae", "rmse",
                       "nmbe", "cvmbe",
                       "nmae", "cvmae",
                       "nrmse", "cvrmse",
                       "r2", "tStone"))

applyStats(models, o,
           functions = c("mo", "mm",
                         "sdo", "sdm",
                         "mbe", "mae", "rmse",
                         "nmbe", "cvmbe",
                         "nmae", "cvmae",
                         "nrmse", "cvrmse",
                         "r2", "tStone"))

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Stats_+3A_m">m</code></td>
<td>
<p>Numeric, vector, model values</p>
</td></tr>
<tr><td><code id="Stats_+3A_models">models</code></td>
<td>
<p>Numeric, matrix, model values</p>
</td></tr>
<tr><td><code id="Stats_+3A_o">o</code></td>
<td>
<p>Numeric, vector, observation values</p>
</td></tr>
<tr><td><code id="Stats_+3A_functions">functions</code></td>
<td>
<p>Character, name of functions to compute model
errors. The package includes definitions for these functions:
</p>

<ul>
<li><p>Mean: <code>mo</code>, <code>mm</code>
</p>
</li>
<li><p>Standard Deviation: <code>sdo</code>, <code>sdm</code>
</p>
</li>
<li><p>Mean Bias Error: <code>mbe</code>
</p>
</li>
<li><p>Mean Absolute Error: <code>mae</code>
</p>
</li>
<li><p>Root Mean Square Error: <code>rmse</code>
</p>
</li>
<li><p>t of Stone: <code>tStone</code>
</p>
</li>
<li><p>Coefficient of determination, <code class="reqn">R^2</code>: <code>r2</code>
</p>
</li></ul>

<p>There are also functions that normalize the MBE, MAE and RMSE values. <code>nmbe</code>, <code>nmae</code>, and <code>nrmse</code> use the  observation range as factor of normalization, while <code>cvmbe</code>, <code>cvmae</code>, and <code>cvrmse</code>, use the observation average to normalize.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> with a column for each function, and a row for each model.
</p>


<h3>Author(s)</h3>

<p>Oscar Perpiñán Lamigueiro
</p>


<h3>See Also</h3>

<p><code><a href="#topic+targetDiagram">targetDiagram</a></code>,
<code><a href="#topic+target_diagram">target_diagram</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(modelEx)

## Analyze one model
tdStats(pvModels$M01, pvObs)

## Analyze a set of models
applyStats(pvModels, pvObs)
</code></pre>

<hr>
<h2 id='TargetDiagram'>
Target Diagrams
</h2><span id='topic+targetDiagram'></span><span id='topic+target_diagram'></span><span id='topic+tdTheme'></span>

<h3>Description</h3>

<p>Target diagrams with lattice, <code>targetDiagram</code>, and ggplot2, <code>target_diagram</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>
targetDiagram(data, class = "",
              xlab = expression("RMSEc" %.% "sign(" * sigma^"*" * ")"),
              ylab = "MBE",
              auto.key = list(space = "right"),
              default.scales = list(cex = 0.6),
              scales = list(),
              type = "quantile",
              cuts = seq(0.25, 1, 0.25),
              par.settings = tdTheme(),
              ...)

target_diagram(data,
               xlab = expression("RMSEc"%.%"sign("*sigma^"*"*")"),
               ylab = 'MBE', 
               type = 'quantile', cuts = seq(0.25, 1, .25),
               ...)

tdTheme(pch = 21:25,
        col.points = brewer.pal(n= 8, 'Dark2'),
        fill = brewer.pal(n= 8, 'Pastel2'),
        cex = 1.1,
        ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="TargetDiagram_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> with these columns: nrmse (Root Mean Square Error), nmbe (Mean Bias Error), sdm (Standard Deviation of the model), sdo (Standard Deviation of observations)</p>
</td></tr>
<tr><td><code id="TargetDiagram_+3A_class">class</code></td>
<td>
<p>Character, the name of the variable that defines the panels of a trellis graphic.</p>
</td></tr>
<tr><td><code id="TargetDiagram_+3A_xlab">xlab</code>, <code id="TargetDiagram_+3A_ylab">ylab</code></td>
<td>
<p>Character or expression, define the axis labels.</p>
</td></tr>
<tr><td><code id="TargetDiagram_+3A_auto.key">auto.key</code>, <code id="TargetDiagram_+3A_default.scales">default.scales</code>, <code id="TargetDiagram_+3A_scales">scales</code></td>
<td>
<p>Legend and scales customization. Read the <code><a href="lattice.html#topic+xyplot">xyplot</a></code> and <code><a href="lattice.html#topic+panel.xyplot">panel.xyplot</a></code> help pages for details.</p>
</td></tr>
<tr><td><code id="TargetDiagram_+3A_type">type</code></td>
<td>
<p>Character, defines the type of cuts between 'quantile' and 'at'.</p>
</td></tr>
<tr><td><code id="TargetDiagram_+3A_cuts">cuts</code></td>
<td>
<p>Numeric, defines the radius of the RMSE circles. If <code>type = 'quantile'</code> it defines the probabilities with values between 0 and 1, and the radius are such that the circles are the corresponding quantile. If <code>type = 'at'</code> <code>cuts</code> defines the radius of the circles.</p>
</td></tr>
<tr><td><code id="TargetDiagram_+3A_par.settings">par.settings</code></td>
<td>
<p>Definition of graphical parameters using <code><a href="lattice.html#topic+simpleTheme">simpleTheme</a></code> or its wrapper <code>tdTheme</code></p>
</td></tr>
<tr><td><code id="TargetDiagram_+3A_pch">pch</code>, <code id="TargetDiagram_+3A_col.points">col.points</code>, <code id="TargetDiagram_+3A_fill">fill</code>, <code id="TargetDiagram_+3A_cex">cex</code></td>
<td>
<p>Arguments for <code><a href="lattice.html#topic+simpleTheme">simpleTheme</a></code></p>
</td></tr>
<tr><td><code id="TargetDiagram_+3A_...">...</code></td>
<td>
<p>Additional arguments for <code><a href="lattice.html#topic+xyplot">xyplot</a></code> or <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Target Diagram is derived from the relation between the unbiased RMSE, MBE, and RMSE. In a Cartesian coordinate system, the x-axis represents the unbiased RMSE (variance of the error), and the y-axis represents the MBE. Therefore the distance between any point to the origin is equal to the RMSE. Because the unbiased RMSE is always positive, the left area of the coordinate system is empty with this scheme. With additional information this region may be also used: the unbiased RMSE is multiplied by the sign of the difference between the standard deviations of model and observations.
</p>
<p>The resulting diagram provides three different measures: whether the model overestimates or underestimates (positive or negative values of the MBE on the y-axis, respectively), whether the model standard deviation is larger or smaller than the standard deviation of the measurements (positive or negative values on the x-axis, respectively), and the error performance as quantified by the RMSE represented as the distance to the coordinates origin. This tool is particularly powerful when comparing competing models.
</p>
<p><code>targetDiagram</code> is built around the <code>lattice</code> package, while
<code>target_diagram</code> is the <code>ggplot2</code> version.
</p>
<p><code>targetDiagram</code> uses <code>tdTheme</code> to define the graphical settings, which is just a wrapper around <code>simpleTheme</code>.
</p>


<h3>Value</h3>

<p><code>targetDiagram</code> produces a trellis object.
<code>target_diagram</code> produces a ggplot object.
</p>


<h3>Author(s)</h3>

<p>Oscar Perpiñán Lamigueiro
</p>


<h3>References</h3>

<p>Jolliff, J. K., Kindle, J. C., Shulman, I., Penta, B., Friedrichs, M. A., Helber, R., &amp; Arnone, R. A. (2009). Summary diagrams for coupled hydrodynamic-ecosystem model skill assessment. Journal of Marine Systems, 76(1), 64-82.
</p>


<h3>See Also</h3>

<p><code><a href="lattice.html#topic+xyplot">xyplot</a></code>,
<code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>,
<code><a href="lattice.html#topic+simpleTheme">simpleTheme</a></code>,
<code><a href="#topic+tdStats">tdStats</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(modelEx)

## Compute statistics
errModel &lt;- applyStats(pvModels, pvObs)

## Display results
## Default settings use type = 'quantile'
targetDiagram(errModel, groups = model)

target_diagram(errModel, fill = 'model')

## whose breaks can be defined with 'cuts'
targetDiagram(errModel, groups = model,
              type = 'quantile',
              cuts = seq(0, 1, .1))

target_diagram(errModel, fill = 'model',
              type = 'quantile',
              cuts = seq(0, 1, .1))

## Alternatively, with type = 'at'
## one can define manually the breaks
targetDiagram(errModel, groups = model,
              type = 'at',
              cuts = seq(0, .1, .02))

target_diagram(errModel, fill = 'model',
              type = 'at',
              cuts = seq(0, .1, .02))

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
