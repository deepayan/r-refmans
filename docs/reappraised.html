<!DOCTYPE html><html lang="en"><head><title>Help for package reappraised</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {reappraised}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#anova_fn'><p>Compares differences between baseline means using Carlisle's montecarlo anova method</p></a></li>
<li><a href='#cat_all_fn'><p>Compares observed and expected distribution of all categorical (binomial) variables</p></a></li>
<li><a href='#cat_fn'><p>Compares observed and expected distribution of a categorical (binomial) variable</p></a></li>
<li><a href='#cohort_fn'><p>Compares proportions of matching summary statistics in different cohorts</p></a></li>
<li><a href='#final_digit_fn'><p>Compares proportions of final digits from summary statistics</p></a></li>
<li><a href='#load_clean'><p>Load data then clean and format it</p></a></li>
<li><a href='#match_fn'><p>Compares proportions of matching summary statistics within two-arm randomised trials</p></a></li>
<li><a href='#pval_cat_fn'><p>Compares observed and expected distribution of p-values for categorical variables</p></a></li>
<li><a href='#pval_cont_fn'><p>Compares observed and expected distribution of p-values for continuous variables</p></a></li>
<li><a href='#SI_cat'><p>Example of 20 observations for categorical analysis</p></a></li>
<li><a href='#SI_cat_all'><p>Example of 50 variables from different studies for categorical (cat_all_fn) analysis</p></a></li>
<li><a href='#SI_cohort'><p>Example of 100 observations for cohort analysis</p></a></li>
<li><a href='#SI_pvals_cont'><p>Example of 50 observations for p-value analysis</p></a></li>
<li><a href='#sr_fn'><p>Compares observed and expected distribution of difference in numbers of participants between groups in two-arm randomised trials</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Statistical Tools for Assessing Publication Integrity of Groups
of Trials</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Takes user-provided baseline data from groups of randomised controlled data and  
    assesses whether the observed distribution of baseline p-values, numbers of participants 
    in each group, or categorical variables are consistent with the expected distribution, as 
    an aid to the assessment of integrity concerns in published randomised controlled trials. 
    References (citations in PubMed format in details of each function):
    Bolland MJ, Avenell A, Gamble GD, Grey A. (2016) &lt;<a href="https://doi.org/10.1212%2FWNL.0000000000003387">doi:10.1212/WNL.0000000000003387</a>&gt;.
    Bolland MJ, Gamble GD, Avenell A, Grey A, Lumley T. (2019) 
    &lt;<a href="https://doi.org/10.1016%2Fj.jclinepi.2019.05.006">doi:10.1016/j.jclinepi.2019.05.006</a>&gt;.
    Bolland MJ, Gamble GD, Avenell A, Grey A. (2019) &lt;<a href="https://doi.org/10.1016%2Fj.jclinepi.2019.03.001">doi:10.1016/j.jclinepi.2019.03.001</a>&gt;.
    Bolland MJ, Gamble GD, Grey A, Avenell A. (2020) &lt;<a href="https://doi.org/10.1111%2Fanae.15165">doi:10.1111/anae.15165</a>&gt;.
    Bolland MJ, Gamble GD, Avenell A, Cooper DJ, Grey A. (2021) 
    &lt;<a href="https://doi.org/10.1016%2Fj.jclinepi.2020.11.012">doi:10.1016/j.jclinepi.2020.11.012</a>&gt;.
    Bolland MJ, Gamble GD, Avenell A, Grey A. (2021) &lt;<a href="https://doi.org/10.1016%2Fj.jclinepi.2021.05.002">doi:10.1016/j.jclinepi.2021.05.002</a>&gt;.
    Bolland MJ, Gamble GD, Avenell A, Cooper DJ, Grey A. (2023) 
    &lt;<a href="https://doi.org/10.1016%2Fj.jclinepi.2022.12.018">doi:10.1016/j.jclinepi.2022.12.018</a>&gt;.
    Carlisle JB, Loadsman JA. (2017) &lt;<a href="https://doi.org/10.1111%2Fanae.13650">doi:10.1111/anae.13650</a>&gt;.
    Carlisle JB. (2017) &lt;<a href="https://doi.org/10.1111%2Fanae.13938">doi:10.1111/anae.13938</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Imports:</td>
<td>boot, broom, data.table, dplyr, epitools, flextable, ggplot2,
ggpubr, magrittr, officer, purrr, readxl, rlang, stats, tidyr,
utils, vcd, vcdExtra</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-10-06 01:33:59 UTC; mbol006</td>
</tr>
<tr>
<td>Author:</td>
<td>Mark Bolland <a href="https://orcid.org/0000-0003-0465-2674"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Mark Bolland &lt;m.bolland@auckland.ac.nz&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-10-06 04:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='anova_fn'>Compares differences between baseline means using Carlisle's montecarlo anova method</h2><span id='topic+anova_fn'></span>

<h3>Description</h3>

<p>Creates plots of distribution of p-values for differences in baseline means calculated using Carlisle's montecarlo anova method.<br />
</p>


<h3>Usage</h3>

<pre><code class='language-R'>anova_fn(
  df = anova_data,
  method = "alt",
  seed = 0,
  sims = -1,
  btsp = 500,
  title = "",
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="anova_fn_+3A_df">df</code></td>
<td>
<p>dataframe generated from load_clean function</p>
</td></tr>
<tr><td><code id="anova_fn_+3A_method">method</code></td>
<td>
<p>&quot;orig&quot; is adapted from original code; &quot;alt&quot; avoids using loops in the code (see details)</p>
</td></tr>
<tr><td><code id="anova_fn_+3A_seed">seed</code></td>
<td>
<p>the seed to use for random number generation, default 0 = current date and time. Specify seed to make repeatable.</p>
</td></tr>
<tr><td><code id="anova_fn_+3A_sims">sims</code></td>
<td>
<p>number of simulations, default -1 = function selects based on number of variables and sample size</p>
</td></tr>
<tr><td><code id="anova_fn_+3A_btsp">btsp</code></td>
<td>
<p>number of bootstrap repeats used to generate 95% confidence interval around AUC</p>
</td></tr>
<tr><td><code id="anova_fn_+3A_title">title</code></td>
<td>
<p>optional title for plots</p>
</td></tr>
<tr><td><code id="anova_fn_+3A_verbose">verbose</code></td>
<td>
<p>TRUE or FALSE indicates whether progress bar and comments show and prints plot</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Method is from Carlisle JB, Loadsman JA. Evidence for non-random sampling in randomised, controlled trials by Yuhji Saitoh. Anaesthesia. 2017;72:17-27.<br />
R code is in appendix to paper. This function is adapted from that code.<br />
The function has two methods. The published code selects each variable from each study then generates
simulations for that variable using a row-wise approach with several loops. The adapted method is method = &quot;orig&quot;.
The method = &quot;alt&quot; generates all the simulations at once and initially I thought was considerably faster, but in practice the time savings are small.<br />
The results from the two approaches will not be identical even if the same random number seed is used
because they use the generated random numbers in different orders but the p-values generated differ by about &lt;0.1. Usually the
differences are close to 0.01 (although this depends on the number of simulations- more simulations = smaller differences).
The code that generates the p-value for each variable from the simulated means is essentially the same.
</p>
<p>Returns a list containing 3 objects and (if verbose = TRUE) prints the plot anova_ecdf
</p>


<h3>Value</h3>

<p>list containing 3 objects as described
</p>

<ul>
<li><p> anova_ecdf = plot of cumulative distribution of calculated p-values compared to the expected uniform distribution
</p>
</li>
<li><p> anova_pvalues = plots of distribution of calculated p-values and AUC, as for pval_cont_fn()
</p>
</li>
<li><p> anova_all_results = list containing
</p>

<ul>
<li><p> anova_data = data frame of baseline data, with calculated p-values
</p>
</li>
<li><p> anova_pvals = plot of distribution of calculated p-values from anova_pvalues
</p>
</li>
<li><p> anova_auc = plot of AUC of calculated p-values from anova_pvalues
</p>
</li></ul>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># load example data
anova_data &lt;- load_clean(import= "no", file.cont = "SI_pvals_cont",anova= "yes",
format.cont = "wide")$anova_data


# run function (takes only a few seconds)
anova_fn(seed=10, sims = 100, btsp = 100)$anova_ecdf

# to import an excel spreadsheet (modify using local path,
# file and sheet name, range, and format):

# get path for example files
path &lt;- system.file("extdata", "reappraised_examples.xlsx", package = "reappraised",
                    mustWork = TRUE)
# delete file name from path
path &lt;- sub("/[^/]+$", "", path)

# load data
anova_data &lt;- load_clean(import= "yes", anova = "yes", dir = path,
     file.name.cont = "reappraised_examples.xlsx", sheet.name.cont = "SI_pvals_cont",
     range.name.cont = "A:O", format.cont = "wide")$anova_data

</code></pre>

<hr>
<h2 id='cat_all_fn'>Compares observed and expected distribution of all categorical (binomial) variables</h2><span id='topic+cat_all_fn'></span>

<h3>Description</h3>

<p>Creates plots of observed to expected numbers and ratios for the binomial variables and/or compares reported and calculated p-values for the variables<br />
Reference: Bolland MJ, Gamble GD, Avenell A, Cooper DJ, Grey A. Distributions of baseline categorical variables were different from the expected distributions in randomized trials with integrity concerns. J Clin Epidemiol. 2023;154:117-124
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cat_all_fn(
  df = cat_all_data,
  comp.pvals = "no",
  fisher.sim = "y",
  fish.n.sims = 10000,
  binom = "no",
  two_levels = "no",
  del.disparate = "yes",
  excl.level = "yes",
  seed = 0,
  title = "",
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cat_all_fn_+3A_df">df</code></td>
<td>
<p>data frame generated from load_clean function</p>
</td></tr>
<tr><td><code id="cat_all_fn_+3A_comp.pvals">comp.pvals</code></td>
<td>
<p>&quot;yes&quot; or &quot;no&quot; indicator whether reported and calculated p-values should be compared</p>
</td></tr>
<tr><td><code id="cat_all_fn_+3A_fisher.sim">fisher.sim</code></td>
<td>
<p>&quot;yes&quot; or &quot;no&quot; indicator whether to allow fisher test to simulate p-values for &gt;2*2 tables</p>
</td></tr>
<tr><td><code id="cat_all_fn_+3A_fish.n.sims">fish.n.sims</code></td>
<td>
<p>number of simulations to use in Fisher test, default 10,000</p>
</td></tr>
<tr><td><code id="cat_all_fn_+3A_binom">binom</code></td>
<td>
<p>&quot;yes&quot; or &quot;no&quot; indicator whether observed to expected distributions of binomial variables should be calculated</p>
</td></tr>
<tr><td><code id="cat_all_fn_+3A_two_levels">two_levels</code></td>
<td>
<p>&quot;yes&quot; or &quot;no&quot; indicator whether variables with more than 2 levels should be collapsed to 2 levels</p>
</td></tr>
<tr><td><code id="cat_all_fn_+3A_del.disparate">del.disparate</code></td>
<td>
<p>if yes, data in which the absolute difference between group sizes is &gt;20% are deleted</p>
</td></tr>
<tr><td><code id="cat_all_fn_+3A_excl.level">excl.level</code></td>
<td>
<p>&quot;yes&quot; or &quot;no&quot; indicator whether one level of a variable should be deleted. Deleted level is chosen randomly using seed parameter.</p>
</td></tr>
<tr><td><code id="cat_all_fn_+3A_seed">seed</code></td>
<td>
<p>seed for random number generator, default 0 = current date and time. Specify seed to make repeatable.</p>
</td></tr>
<tr><td><code id="cat_all_fn_+3A_title">title</code></td>
<td>
<p>title name for plots (optional)</p>
</td></tr>
<tr><td><code id="cat_all_fn_+3A_verbose">verbose</code></td>
<td>
<p>TRUE or FALSE indicates whether progress bar and comments show and flextable or plot or both are printed</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns a list containing objects described below and (if verbose = TRUE) prints the flextable cat_all_diff_calc_rep_ft and/or graph cat_all_graph depending on options chosen
</p>


<h3>Value</h3>

<p>list containing objects as described<br />
</p>
<p>if p-value comparison used:
</p>

<ul>
<li><p> cat_all_pvals = data frame of data for comparison of reported and calculated p-values
</p>
</li>
<li><p> cat_all_diff_calc_rep_ft = flextable of comparison of reported and calculated p-values
</p>
</li>
<li><p> cat_all_diff_calc_rep_data = data frame used to make flextable
</p>
</li>
<li><p> cat_all_diff_thresh_ft = flextable of comparison of reported and calculated p-values when only threshold given
</p>
</li>
<li><p> cat_all_diff_thresh_data = data frame used to make flextable for p-value thresholds
</p>
</li></ul>

<p>if comparing categorical variables used
</p>

<ul>
<li><p> cat_all_graph = plot of observed to expected numbers and differences between groups, top panels are the absolute numbers, bottom panels are the differences between trial arms in two arm studies
</p>
</li>
<li><p> cat_all_graph_pc = plot of observed to expected numbers expressed as percentages and differences between groups, top panels are the percentages, bottom panels are the differences between trial arms in two arm studies
</p>
</li>
<li><p> cat_all_data_abs = data frame of data for absolute numbers
</p>
</li>
<li><p> cat_all_data_df = data frame of data for difference between groups in two arm studies
</p>
</li>
<li><p> cat_all_dataset_abs = data frame of dataset used for all trials
</p>
</li>
<li><p> cat_all_dataset_df = data frame of dataset used for two arm trials
</p>
</li>
<li><p> cat_all_all_graphs list containing
</p>

<ul>
<li><p> abs = plot for absolute numbers only
</p>
</li>
<li><p> df = plot for difference between groups in two arm studies only
</p>
</li>
<li><p> pc = plot for percentages only
</p>
</li>
<li><p> all_pc = composite plot of percentages and absolute numbers
</p>
</li>
<li><p> individual_graphs list of 6 individual plots making up composite figures
</p>
</li></ul>

</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># load example data
cat_all_data &lt;- load_clean(import= "no", file.cat = "SI_cat_all", cat_all= "yes",
format.cat = "wide")$cat_all_data


# run function comparing p-values only (takes only a few seconds)
cat_all_fn (comp.pvals = "yes")$cat_all_diff_calc_rep_ft

# run function comparing distribution of binomial variables only

# to speed example up limit to 12 2-arm trials with 20 variables
# (takes close to 5 secs)

cat_all_data &lt;- cat_all_data [1:41, c(1:8,10:11,13:15)]

cat_all_fn (binom = "yes", two_levels = "yes", del.disparate = "yes",
excl.level = "yes", seed = 10)$cat_all_graph


# to import an excel spreadsheet (modify using local path,
# file and sheet name, range, and format):

# get path for example files
path &lt;- system.file("extdata", "reappraised_examples.xlsx", package = "reappraised",
                   mustWork = TRUE)
# delete file name from path
path &lt;- sub("/[^/]+$", "", path)

# load data
cat_all_data &lt;- load_clean(import= "yes", cat_all = "yes", dir = path,
   file.name.cat = "reappraised_examples.xlsx", sheet.name.cat = "SI_cat_all",
   range.name.cat = "A:N", format.cat = "wide")$cat_all_data

</code></pre>

<hr>
<h2 id='cat_fn'>Compares observed and expected distribution of a categorical (binomial) variable</h2><span id='topic+cat_fn'></span>

<h3>Description</h3>

<p>Creates plots of observed to expected numbers and ratios for the specified binomial variable <br />
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cat_fn(
  df = cat_data,
  x_title = "",
  prefix = "",
  del.disparate = "yes",
  title = "",
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cat_fn_+3A_df">df</code></td>
<td>
<p>data frame generated from load_clean function</p>
</td></tr>
<tr><td><code id="cat_fn_+3A_x_title">x_title</code></td>
<td>
<p>name of the variable for use on the x-axis</p>
</td></tr>
<tr><td><code id="cat_fn_+3A_prefix">prefix</code></td>
<td>
<p>letter for variable columns in data frame</p>
</td></tr>
<tr><td><code id="cat_fn_+3A_del.disparate">del.disparate</code></td>
<td>
<p>if yes, data in which the absolute difference between group sizes is &gt;20% are deleted</p>
</td></tr>
<tr><td><code id="cat_fn_+3A_title">title</code></td>
<td>
<p>title name for plots (optional)</p>
</td></tr>
<tr><td><code id="cat_fn_+3A_verbose">verbose</code></td>
<td>
<p>TRUE or FALSE indicates whether to print plot</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An example is for trial withdrawls in Bolland 2021<br />
Bolland MJ, Gamble GD, Avenell A, Cooper DJ, Grey A. Participant withdrawals were unusually distributed in randomized trials with integrity concerns: a statistical investigation. J Clin Epidemiol 2021;131:22-29.
</p>
<p>Returns a list containing 4 objects and (if verbose = TRUE) prints the plot cat_graph
</p>


<h3>Value</h3>

<p>list containing 4 objects as described
</p>

<ul>
<li><p> cat_graph = plot of observed to expected numbers and differences between groups, top panels are the absolute numbers, bottom panels are the differences between trial arms in two arm studies
</p>
</li>
<li><p> cat_data_abs = data frame of data for absolute numbers
</p>
</li>
<li><p> cat_data_df = data frame of data for difference between groups in two arm studies
</p>
</li>
<li><p> cat_all_graphs = list containing
</p>

<ul>
<li><p> abs = plot for absolute numbers only
</p>
</li>
<li><p> df = plot for difference between groups in two arm studies only
</p>
</li>
<li><p> individual_graphs list of 4 individual plots making up composite figures
</p>
</li></ul>

</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># load example data
cat_data &lt;- load_clean(import= "no", file.cat = "SI_cat", cat= "yes",
format.cat = "wide", cat.names = c("n", "w"))$cat_data


# run function (takes only a few seconds)
cat_fn(x_title= "withdrawals", prefix="w", del.disparate = "yes")$cat_graph


# to import an excel spreadsheet (modify using local path,
# file and sheet name, range, and format):

# get path for example files
path &lt;- system.file("extdata", "reappraised_examples.xlsx", package = "reappraised",
                    mustWork = TRUE)
# delete file name from path
path &lt;- sub("/[^/]+$", "", path)

# load data
cat_data &lt;- load_clean(import= "yes", cat = "yes", dir = path,
    file.name.cat = "reappraised_examples.xlsx", sheet.name.cat = "SI_cat",
    range.name.cat = "A:G", cat.names = c("n", "w"), format.cat = "wide")$cat_data

</code></pre>

<hr>
<h2 id='cohort_fn'>Compares proportions of matching summary statistics in different cohorts</h2><span id='topic+cohort_fn'></span>

<h3>Description</h3>

<p>Creates flextable of probability of matching mean, SD, and mean and SD for each variable in different cohorts in the
specified number of simulations<br />
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cohort_fn(
  df = cohort_data,
  seed = 0,
  sims = -1,
  n_vars = 10,
  popn = "",
  title = "",
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cohort_fn_+3A_df">df</code></td>
<td>
<p>data frame generated from load_clean function</p>
</td></tr>
<tr><td><code id="cohort_fn_+3A_seed">seed</code></td>
<td>
<p>the seed to use for random number generation, default 0 = current date and time. Specify seed to make repeatable.</p>
</td></tr>
<tr><td><code id="cohort_fn_+3A_sims">sims</code></td>
<td>
<p>number of simulations, default -1 = function selects based on number of variables and sample size.</p>
</td></tr>
<tr><td><code id="cohort_fn_+3A_n_vars">n_vars</code></td>
<td>
<p>restrict analyses to variables in at least (&gt;=) this number of cohorts, default = 10 (ie variable has mean in 10 or more cohorts).</p>
</td></tr>
<tr><td><code id="cohort_fn_+3A_popn">popn</code></td>
<td>
<p>if dataset contains studies in different sub-populations, code this in cohort_data$population and studies are subsetted if match in this variable. 'All' overrides this and uses all data regardless of information in this variable.</p>
</td></tr>
<tr><td><code id="cohort_fn_+3A_title">title</code></td>
<td>
<p>title name for plots (optional)</p>
</td></tr>
<tr><td><code id="cohort_fn_+3A_verbose">verbose</code></td>
<td>
<p>TRUE or FALSE indicates whether progress bar and comments show and flextable is printed</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Reference data is from Bolland 2021<br />
Bolland MJ, Gamble GD, Avenell A, Grey A. Identical summary statistics were uncommon in randomized trials and cohort studies. J Clin Epidemiol 2021;136:180-188.
</p>
<p>Returns a list containing 6 objects and (if verbose = TRUE) prints the flextable cohort_ft
</p>


<h3>Value</h3>

<p>list containing 6 objects as described
</p>

<ul>
<li><p> cohort_ft = flextable of results
</p>
</li>
<li><p> cohort_graph = plot of observed to expected numbers of matches per cohort for mean; SD; and mean and SD
</p>
</li>
<li><p> all_graphs = list containing
</p>

<ul>
<li><p> all_graphs = all plots on single plot
</p>
</li>
<li><p> both_graphs = list of 3 plots row by row used to form all_graphs
</p>
</li>
<li><p> individual_graphs= list of 6 individual plots used to form all_graphs
</p>
</li></ul>

</li>
<li><p> cohort_cohort_data = data frame used to generate results data
</p>
</li>
<li><p> cohort_prob_data = data frame used to make flextable
</p>
</li>
<li><p> cohort_oe_data= data frame used to make observed to expected plots
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># load example data
cohort_data &lt;- load_clean(import= "no", file.cont = "SI_cohort", cohort= "yes",
format.cont = "long")$cohort_data


# run function (takes close to 5 seconds)
cohort_fn(seed=10, sims = 100)$cohort_ft

# to import an excel spreadsheet (modify using local path,
# file and sheet name, range, and format):

# get path for example files
path &lt;- system.file("extdata", "reappraised_examples.xlsx", package = "reappraised",
                     mustWork = TRUE)
# delete file name from path
path &lt;- sub("/[^/]+$", "", path)

# load data
cohort_data &lt;- load_clean(import= "yes", cohort = "yes", dir = path,
     file.name.cont = "reappraised_examples.xlsx", sheet.name.cont = "SI_cohort",
     range.name.cont = "A1:F101", format.cont = "long")$cohort_data

</code></pre>

<hr>
<h2 id='final_digit_fn'>Compares proportions of final digits from summary statistics</h2><span id='topic+final_digit_fn'></span>

<h3>Description</h3>

<p>Creates graph of proportion of final digits for summary statistics of specified variables<br />
</p>


<h3>Usage</h3>

<pre><code class='language-R'>final_digit_fn(
  df = generic_data,
  vars = "",
  dec.pl = "no",
  dec.pl.vars = "",
  title = "",
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="final_digit_fn_+3A_df">df</code></td>
<td>
<p>data frame generated from load_clean function</p>
</td></tr>
<tr><td><code id="final_digit_fn_+3A_vars">vars</code></td>
<td>
<p>vector of the summary statistics to be used</p>
</td></tr>
<tr><td><code id="final_digit_fn_+3A_dec.pl">dec.pl</code></td>
<td>
<p>&quot;yes&quot; or &quot;no&quot; indicator whether columns for decimal places are included (yes) or should be calculated (no)</p>
</td></tr>
<tr><td><code id="final_digit_fn_+3A_dec.pl.vars">dec.pl.vars</code></td>
<td>
<p>vector of the names of the columns for decimal places for each statistics</p>
</td></tr>
<tr><td><code id="final_digit_fn_+3A_title">title</code></td>
<td>
<p>title name for plots (optional)</p>
</td></tr>
<tr><td><code id="final_digit_fn_+3A_verbose">verbose</code></td>
<td>
<p>TRUE or FALSE indicates whether print plot</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This approach is still in development and needs validation and discussion about its place in integrity assessment.<br />
</p>
<p>Requires data frame containing columns for study, variable (named var), summary statistic(s) (named with single letter eg m or s),
and optional columns for decimal places for each statistic (named dp_* eg dp_m, dp_s). Data can be imported using the generic option of load_clean function<br />
</p>
<p>Returns a list containing 5 objects and prints the plot digit_graph
</p>


<h3>Value</h3>

<p>list containing 5 objects as described
</p>

<ul>
<li><p> digit_graph = plot of proportions of final digits
</p>
</li>
<li><p> digit_ft = flextable of results
</p>
</li>
<li><p> digit_table = data frame of results
</p>
</li>
<li><p> digit_dataset = data frame of data set used to generate results data
</p>
</li>
<li><p> digit_data = results of analyses used to generate results data
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># load example data
generic_data &lt;- load_clean(import= "no", file.cont = "SI_pvals_cont", generic= "yes",
gen.vars.del = c("p"), format.cont = "wide")$generic_data


# run function (takes only a few seconds)
final_digit_fn(vars = c("m","s"), dec.pl = "n")$digit_graph

# to import an excel spreadsheet (modify using local path,
# file and sheet name, range, and format):

# get path for example files
path &lt;- system.file("extdata", "reappraised_examples.xlsx", package = "reappraised",
                    mustWork = TRUE)
# delete file name from path
path &lt;- sub("/[^/]+$", "", path)

# load data
generic_data &lt;- load_clean(import= "yes", generic = "yes", dir = path,
    file.name.cont = "reappraised_examples.xlsx", sheet.name.cont = "SI_pvals_cont",
    range.name.cont = "A1:O51", gen.vars.del = c("p"),
    format.cont = "wide")$generic_data
</code></pre>

<hr>
<h2 id='load_clean'>Load data then clean and format it</h2><span id='topic+load_clean'></span>

<h3>Description</h3>

<p>Function loads and cleans data for the nine functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_clean(
  import = "yes",
  file.cont = "",
  file.cat = "",
  dir = "",
  file.name = "",
  pval_cont = "no",
  match = "no",
  cohort = "no",
  anova = "no",
  dir.cont = "",
  file.name.cont = "",
  sheet.name.cont = "Sheet1",
  range.name.cont = "",
  format.cont = "wide",
  cat = "no",
  sr = "no",
  cat_all = "no",
  pval_cat = "no",
  cat.names = c("n"),
  dir.cat = "",
  file.name.cat = "",
  sheet.name.cat = "Sheet1",
  range.name.cat = "",
  format.cat = "wide",
  generic = "",
  gen.vars.keep = "",
  gen.vars.del = "",
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="load_clean_+3A_import">import</code></td>
<td>
<p>'yes' indicates import excel file. 'no' indicates takes dataset already loaded into R as data frame</p>
</td></tr>
<tr><td><code id="load_clean_+3A_file.cont">file.cont</code></td>
<td>
<p>If import = 'no', name of data frame containing continuous data</p>
</td></tr>
<tr><td><code id="load_clean_+3A_file.cat">file.cat</code></td>
<td>
<p>If import = 'no', name of data frame containing categorical data</p>
</td></tr>
<tr><td><code id="load_clean_+3A_dir">dir</code></td>
<td>
<p>If import = 'yes', path to location of excel file for continuous and categorical data</p>
</td></tr>
<tr><td><code id="load_clean_+3A_file.name">file.name</code></td>
<td>
<p>If import = 'yes', file name of excel file containing continuous and categorical data</p>
</td></tr>
<tr><td><code id="load_clean_+3A_pval_cont">pval_cont</code></td>
<td>
<p>'yes'/'no' indicating if data will be used for pval_cont_fn. Only data for 1 continuous data function can be loaded with each run of this function.</p>
</td></tr>
<tr><td><code id="load_clean_+3A_match">match</code></td>
<td>
<p>'yes'/'no' indicating if data will be used for match_fn. Only data for 1 continuous data function can be loaded with each run of this function.</p>
</td></tr>
<tr><td><code id="load_clean_+3A_cohort">cohort</code></td>
<td>
<p>'yes'/'no' indicating if data will be used for cohort_fn. Only data for 1 continuous data function can be loaded with each run of this function.</p>
</td></tr>
<tr><td><code id="load_clean_+3A_anova">anova</code></td>
<td>
<p>'yes'/'no' indicating if data will be used for anova_fn. Only data for 1 continuous data function can be loaded with each run of this function.</p>
</td></tr>
<tr><td><code id="load_clean_+3A_dir.cont">dir.cont</code></td>
<td>
<p>If import = 'yes', path to location of excel file for continuous data</p>
</td></tr>
<tr><td><code id="load_clean_+3A_file.name.cont">file.name.cont</code></td>
<td>
<p>If import = 'yes', file name of excel file containing continuous data</p>
</td></tr>
<tr><td><code id="load_clean_+3A_sheet.name.cont">sheet.name.cont</code></td>
<td>
<p>Sheet name containing continuous data</p>
</td></tr>
<tr><td><code id="load_clean_+3A_range.name.cont">range.name.cont</code></td>
<td>
<p>Range of cells containing continuous data. Can be in format 'a1:b20' or 'a:b'</p>
</td></tr>
<tr><td><code id="load_clean_+3A_format.cont">format.cont</code></td>
<td>
<p>'wide'/'long' indicating continuous data is in wide or long format</p>
</td></tr>
<tr><td><code id="load_clean_+3A_cat">cat</code></td>
<td>
<p>'yes'/'no' indicating if data will be used for cat_fn. Only data for 1 categorical data function can be loaded with each run of this function.</p>
</td></tr>
<tr><td><code id="load_clean_+3A_sr">sr</code></td>
<td>
<p>'yes'/'no' indicating if data will be used for sr_fn. Only data for 1 categorical data function can be loaded with each run of this function.</p>
</td></tr>
<tr><td><code id="load_clean_+3A_cat_all">cat_all</code></td>
<td>
<p>'yes'/'no' indicating if data will be used for cat_all_fn. Only data for 1 categorical data function can be loaded with each run of this function.</p>
</td></tr>
<tr><td><code id="load_clean_+3A_pval_cat">pval_cat</code></td>
<td>
<p>'yes'/'no' indicating if data will be used for cat_all_fn. Only data for 1 categorical data function can be loaded with each run of this function.</p>
</td></tr>
<tr><td><code id="load_clean_+3A_cat.names">cat.names</code></td>
<td>
<p>names of variables to be used in cat_fn and sr_fn</p>
</td></tr>
<tr><td><code id="load_clean_+3A_dir.cat">dir.cat</code></td>
<td>
<p>If import = 'yes', path to location of excel file for categorical data</p>
</td></tr>
<tr><td><code id="load_clean_+3A_file.name.cat">file.name.cat</code></td>
<td>
<p>If import = 'yes', file name of excel file containing categorical data</p>
</td></tr>
<tr><td><code id="load_clean_+3A_sheet.name.cat">sheet.name.cat</code></td>
<td>
<p>Sheet name containing categorical data</p>
</td></tr>
<tr><td><code id="load_clean_+3A_range.name.cat">range.name.cat</code></td>
<td>
<p>Range of cells containing categorical. Can be in format 'a1:b20' or 'a:b'</p>
</td></tr>
<tr><td><code id="load_clean_+3A_format.cat">format.cat</code></td>
<td>
<p>'wide'/'long' indicating categorical data is in wide or long format</p>
</td></tr>
<tr><td><code id="load_clean_+3A_generic">generic</code></td>
<td>
<p>'yes'/'no' indicating if data to be loaded for generic use</p>
</td></tr>
<tr><td><code id="load_clean_+3A_gen.vars.keep">gen.vars.keep</code></td>
<td>
<p>Vector of variables in data to keep</p>
</td></tr>
<tr><td><code id="load_clean_+3A_gen.vars.del">gen.vars.del</code></td>
<td>
<p>Vector of variables in data to delete</p>
</td></tr>
<tr><td><code id="load_clean_+3A_verbose">verbose</code></td>
<td>
<p>TRUE/FALSE TRUE indicates comments will be printed during loading</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Function can load continuous or categorical data.
Continuous data can be used for comparison of baseline p-values (pval_cont_fn),
matching summary stats within a trial (match_fn), matching summary stats in different cohorts (cohort_fn),
or comparing means of baseline p-values (anova_fn).
Categorical data can be used for comparisons of observed with expected distributions for single variable (cat_fn),
for group numbers in trials using simple randomisation (sr_fn), for all variables (cat_all_fn), and for comparison
of baseline p-values (pval_cat_fn).<br />
</p>
<p>There is one function in development that allows assessment of proportion of final digits in summary statistics (final_digit_fn).
This function works using summary statistics but could be adapted to use on raw continuous or categorical data.
</p>
<p>Only 1 continuous and/or 1 categorical data set allowed per load to avoid clashes
</p>
<p>Data can be imported from a file (import = &quot;yes&quot;) or taken from an existing data frame, import = &quot;no&quot;
</p>
<p>If loading from an existing data use file.cont and file.cat
</p>
<p>If loading from common directory or file, can use dir and file.name rather than more specific dir.cont, dir.cat,
file.name.cont, or file.name.cat.
</p>
<p><strong>Comments about each indicator:</strong>
<em>pval_cont</em><br />
loads continuous data for pval_cont_fn, outputs as list of 1 containing named data frame pval_cont_data.<br />
</p>
<p>format should be study, variable or var, n, m, s, p. Can be in any order. n = sample size, m = mean, s = standard deviation,
p = baseline p value (can omit if not reported)<br />
</p>
<p>can be in wide or long format<br />
wide: study, var, n1, n2, n3 ..., m1, m2, m3 ... s1, s2, s3..., p<br />
long: study, var, group, m , s,  n , p<br />
</p>
<p>group or g or grp required for long format<br />
separators (eg n1 n_1 n.1) are stripped and replaced<br />
</p>
<p><em>match</em><br />
loads continuous data for match_fn, outputs as list of 1 containing named data frame match_data<br />
</p>
<p>remainder is same as for pval_cont above.<br />
only difference between pval_cont and match is that match allows for missing mean or SD whereas pval_cont does not<br />
</p>
<p>format should be study, variable or var, n, m, s. Can be in any order. n = sample size, m = mean, s = standard deviation<br />
</p>
<p>can be in wide or long format<br />
wide: study, var, n1, n2, m1, m2, s1, s2, p<br />
long: study, var, group, m , s,  n <br />
</p>
<p>group or g or grp required for long format<br />
separators (eg n1 n_1 n.1) are stripped and replaced<br />
</p>
<p><em>cohort</em><br />
loads continuous data for cohort_fn, outputs as list of 1 containing named data frame cohort_data<br />
</p>
<p>same as pval_cont but allows a lookup variable for variable names<br />
</p>
<p>format should be study, variable or var, n, m, s, p. Can be in any order. n = sample size, m = mean, s = standard deviation<br />
</p>
<p>can be in wide or long format<br />
wide: study, var, n1, n2, n3 ..., m1, m2, m3 ... s1, s2, s3... <br />
long: study, var, group, m , s,  n <br />
</p>
<p>group or g or grp required for long format<br />
separators (eg n1 n_1 n.1) are stripped and replaced<br />
</p>
<p>lookup table is var_name_final, var_name_orig and allows you to specify a list of all variables names (var_name_orig)
from all studies and a lookup table of standardised names (var_name_final) allowing different names in different studies to
be standardised<br />
</p>
<p>has optional variable 'population' which can be used to subset the data if trials in different populations are reported<br />
</p>
<p><em>anova</em><br />
loads continuous data for anova_fn, outputs as list of 1 containing named data frame anova_data<br />
</p>
<p>same as for pval_cont above but allows for optional value for decimal place<br />
</p>
<p>format should be study, variable or var, n, m, s, p. Can be in any order. n = sample size, m = mean, s = standard deviation,
d= decimal place of mean (if omitted, this is calculated automatically in anova_fn)<br />
</p>
<p>can be in wide or long format<br />
wide: study, var, n1, n2, n3 ..., m1, m2, m3 ... s1, s2, s3..., d<br />
long: study, var, group, m , s,  n , d<br />
</p>
<p>group or g or grp required for long format<br />
separators (eg n1 n_1 n.1) are stripped and replaced<br />
</p>
<p><em>cat</em><br />
loads categorical data for cat_fn, outputs as list of 1 containing named data frame cat_data<br />
</p>
<p>format should be study, n, v. Can be in any order, n= group size, v= number with characteristic<br />
</p>
<p>can be in wide or long format<br />
wide: study, n1, n2, n3 ..., v1, v2, v3...<br />
long: study, group, n, v<br />
</p>
<p>group or g or grp required for long format<br />
use cat.names to name variable eg c(&quot;n&quot;, &quot;v&quot;) , c(&quot;n&quot;, &quot;g&quot;) ...<br />
separators (eg n1 n_1 n.1) are stripped and replaced<br />
</p>
<p><em>sr</em><br />
loads categorial data for sr_fn, outputs as list of 1 containing named data frame sr_data<br />
</p>
<p>as for cat but only requires study and n
</p>
<p>format should be study, n. n= group size<br />
</p>
<p>can be in wide or long format<br />
wide: study, n1, n2, n3 ...<br />
long: study, group, n<br />
</p>
<p>group or g or grp required for long format<br />
separators (eg n1 n_1 n.1) are stripped and replaced<br />
</p>
<p><em>cat_all</em><br />
loads categorical data for cat_all_fn, outputs as list of 1 containing named data frame cat_all_data<br />
</p>
<p>format should be study, var or variable, n, N, level, stat, recode, p. Can be in any order, n = number with characteristic, N = group size,
p = baseline p value (can omit if not reported), can use &quot;ns&quot; for not significant or &quot;&lt;&quot; or &quot;&gt;&quot; to indicate threshold (eg &quot;&lt;0.05&quot;) <br />
</p>
<p>optional level - number for level of variable (eg y/n =1,2; high/med/low =1,2,3)<br />
optional recode- for variables with &gt;2 levels to tell how to recode into 2 groups<br />
optional stat: statistical test used for p-value : chisq - Chisquare, chisqc- Chisquare with correction,
fisher- Fisher's exact, midp - midp -calculated using two different methods, lr- likelihood ratio,
mh - Mantel-Haenszel test<br />
</p>
<p>can be in wide or long format<br />
wide study, var, n1, n2, n3, ... N1, N2, N3... p, stat, level, recode<br />
long study, var, group, n, N, p, stat, level, recode<br />
</p>
<p>group or g or grp required for long format<br />
</p>
<p>if variable has 2 levels, only 1 required, other will be calculated.<br />
</p>
<p>separators (eg n1 n_1 n.1) are stripped and replaced<br />
</p>
<p><em>pval_cat</em><br />
loads categorical data for pval_cat_fn, outputs as list of 1 containing named data frame pval_cat_data<br />
</p>
<p>as for cat_all but recode variable is not generated
</p>
<p>format should be study, var or variable, n, N, p. Can be in any order, n = number with characteristic, N = group size,
p = baseline p value (can omit if not reported), can use &quot;ns&quot; for not significant or &quot;&lt;&quot; or &quot;&gt;&quot; to indicate threshold (eg &quot;&lt;0.05&quot;) <br />
</p>
<p>optional level - number for level of variable (eg y/n =1,2; high/med/low =1,2,3)<br />
optional stat: statistical test used for p-value : chisq - Chisquare, fisher- Fisher's exact<br />
</p>
<p>can be in wide or long format<br />
wide study, var, n1, n2, n3, ... N1, N2, N3... p, stat, level<br />
long study, var, group, n, N, p, stat, level<br />
</p>
<p>group or g or grp required for long format<br />
</p>
<p>if variable has 2 levels, only 1 required, other will be calculated.<br />
</p>
<p>separators (eg n1 n_1 n.1) are stripped and replaced<br />
</p>
<p><em>generic</em><br />
loads data for use generic use, outputs as list of 1 containing named data frame generic_data<br />
</p>
<p>use cont suffixes for file details: dir.cont (or dir), file.name.cont (or file.name), sheet.name,cont, range.name.cont)<br />
</p>
<p>format should be study, var or variable, variable names<br />
</p>
<p>optional gen.vars.keep = vector of variables to keep<br />
optional gen.vars.del = vector of variables to delete
</p>
<p>can be in wide or long format<br />
wide study, var, a1, a2..., b1, b2 ... <br />
long study, var, group, a, b, ....<br />
</p>
<p>group or g or grp required for long format<br />
</p>
<p>separators (eg n1 n_1 n.1) are stripped and replaced<br />
no data checking or other transformations take place<br />
</p>


<h3>Value</h3>

<p>list containing a named data frame containing data in suitable format for appropriate function as described in Details
</p>


<h3>Examples</h3>

<pre><code class='language-R'># examples of loading data for each function are given in the individual functions.
# Here is one- for pval_cont_fn():

pval_cont_data &lt;- load_clean(import= "no", file.cont = "SI_pvals_cont", pval_cont= "yes",
format.cont = "wide")$pval_cont_data


# to import an excel spreadsheet (modify using local path,
# file and sheet name, range, and format):

# get path for example files
path &lt;- system.file("extdata", "reappraised_examples.xlsx", package = "reappraised",
                    mustWork = TRUE)
# delete file name from path
path &lt;- sub("/[^/]+$", "", path)

# load data
pval_cont_data &lt;- load_clean(import= "yes", pval_cont = "yes", dir = path,
     file.name.cont = "reappraised_examples.xlsx", sheet.name.cont = "SI_pvals_cont",
     range.name.cont = "A1:O51", format.cont = "wide")$pval_cont_data

</code></pre>

<hr>
<h2 id='match_fn'>Compares proportions of matching summary statistics within two-arm randomised trials</h2><span id='topic+match_fn'></span>

<h3>Description</h3>

<p>Creates flextable of matching summary statistics by significant figures with Reference data<br />
</p>


<h3>Usage</h3>

<pre><code class='language-R'>match_fn(df = match_data, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="match_fn_+3A_df">df</code></td>
<td>
<p>data frame generated from load_clean function</p>
</td></tr>
<tr><td><code id="match_fn_+3A_verbose">verbose</code></td>
<td>
<p>TRUE or FALSE indicates whether to print flextable</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Reference data is from Bolland 2021<br />
Bolland MJ, Gamble GD, Avenell A, Grey A. Identical summary statistics were uncommon in randomized trials and cohort studies. J Clin Epidemiol 2021;136:180-188.
</p>
<p>Returns a list containing 6 objects and (if verbose = TRUE ) prints the flextable match_ft_all
</p>


<h3>Value</h3>

<p>list containing 6 objects as described
</p>

<ul>
<li><p> match_ft_all = flextable of matches with reference data
</p>
</li>
<li><p> match_ft = flextable of matches (no reference data)
</p>
</li>
<li><p> ref_match_ft = flextable of reference data
</p>
</li>
<li><p> match_match_data = data frame of results used in calculations
</p>
</li>
<li><p> match_table = data frame of matches used to make flextable
</p>
</li>
<li><p> ref_table = data frame of reference data used to make flextable
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># load example data
match_data &lt;- load_clean(import= "no", file.cont = "SI_pvals_cont", match= "yes",
format.cont = "wide")$match_data


# run function (takes only a few seconds)
match_fn()$match_ft_all

# to import an excel spreadsheet (modify using local path,
# file and sheet name, range, and format):

# get path for example files
path &lt;- system.file("extdata", "reappraised_examples.xlsx", package = "reappraised",
                    mustWork = TRUE)
# delete file name from path
path &lt;- sub("/[^/]+$", "", path)

# load data
match_data &lt;- load_clean(import= "yes", match = "yes", dir = path,
     file.name.cont = "reappraised_examples.xlsx", sheet.name.cont = "SI_pvals_cont",
     range.name.cont = "A:O", format.cont = "wide")$match_data

</code></pre>

<hr>
<h2 id='pval_cat_fn'>Compares observed and expected distribution of p-values for categorical variables</h2><span id='topic+pval_cat_fn'></span>

<h3>Description</h3>

<p>Creates plots of calculated p-value distribution and AUC (area under curve)<br />
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pval_cat_fn(
  df = pval_cat_data,
  seed = 0,
  sims = -1,
  btsp = 500,
  title = "",
  stat = "chi_midp",
  stat.override = "no",
  fisher.sim = "y",
  fish.n.sims = 10000,
  method = "mix",
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pval_cat_fn_+3A_df">df</code></td>
<td>
<p>data frame generated from load_clean function</p>
</td></tr>
<tr><td><code id="pval_cat_fn_+3A_seed">seed</code></td>
<td>
<p>the seed to use for random number generation, default 0 = current date and time. Specify seed to make repeatable.</p>
</td></tr>
<tr><td><code id="pval_cat_fn_+3A_sims">sims</code></td>
<td>
<p>number of simulations, default -1 = function selects based on number of variables.</p>
</td></tr>
<tr><td><code id="pval_cat_fn_+3A_btsp">btsp</code></td>
<td>
<p>number of bootstrap repeats used to generate 95% confidence interval around AUC</p>
</td></tr>
<tr><td><code id="pval_cat_fn_+3A_title">title</code></td>
<td>
<p>optional title for plots</p>
</td></tr>
<tr><td><code id="pval_cat_fn_+3A_stat">stat</code></td>
<td>
<p>statistical test to be used 'chisq', 'fisher', 'midp' or 'midp.epitools' (from epitools package), 'midp.sas' (as calculated in SAS), or combinations -if chisq is not appropriate because expected cells&lt;5, use second test: 'chi_fish', 'chi_midp' or 'chi_midp.epi','chi_midp.sas'</p>
</td></tr>
<tr><td><code id="pval_cat_fn_+3A_stat.override">stat.override</code></td>
<td>
<p>if 'yes' then test specified in stat will be used rather than values for stat in data frame</p>
</td></tr>
<tr><td><code id="pval_cat_fn_+3A_fisher.sim">fisher.sim</code></td>
<td>
<p>&quot;yes&quot; or &quot;no&quot; indicator whether to allow fisher test to simulate p-values for &gt;2*2 tables</p>
</td></tr>
<tr><td><code id="pval_cat_fn_+3A_fish.n.sims">fish.n.sims</code></td>
<td>
<p>number of simulations to use in Fisher test, default 10,000</p>
</td></tr>
<tr><td><code id="pval_cat_fn_+3A_method">method</code></td>
<td>
<p>'sm', 'mix', or 'ind'. 'ind' does test on individual data, 'sm' summarises data and then does test on summary data, 'mix' does 'ind' for fisher and 'sm' for others. Duration varies with size of studies, test, and number of simulations. Experiment before running large simulations.</p>
</td></tr>
<tr><td><code id="pval_cat_fn_+3A_verbose">verbose</code></td>
<td>
<p>TRUE or FALSE indicates whether progress bar and comments show and prints plot</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See also Bolland MJ, Gamble GD, Avenell A, Grey A, Lumley T. Baseline P value distributions in randomized trials were uniform for continuous but not categorical variables. J Clin Epidemiol 2019;112:67-76.<br />
</p>
<p>Returns a list containing 3 objects and (if verbose = TRUE) prints the plot pval_cat_calculated_pvalues
</p>


<h3>Value</h3>

<p>list containing 3 objects as described
</p>

<ul>
<li><p> pval_cat_calculated_pvalues = plots of calculated p-value distribution and AUC
</p>
</li>
<li><p> pval_cat_reported_pvalues = plots of reported p-value distribution and AUC (if p-values were reported)
</p>
</li>
<li><p> all_results = list containing
</p>

<ul>
<li><p> pval_cat_baseline_pvalues_data = data frame of all results used in calculations
</p>
</li>
<li><p> pval_cat_reported_pvalues= plot of reported p-value distribution
</p>
</li>
<li><p> pval_cat_auc_reported_pvalues = AUC of reported p-values
</p>
</li>
<li><p> pval_cat_calculated_pvalues = plot of calculated p-value distribution
</p>
</li>
<li><p> pval_cat_auc_calculated_pvalues= AUC of calculated p-values
</p>
</li></ul>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># load example data
pval_cat_data &lt;- load_clean(import= "no", file.cat = "SI_cat_all", pval_cat= "yes",
format.cont = "wide")$pval_cat_data


# run function (takes a few seconds)
pval_cat_fn(seed=10, sims = 50, btsp = 100)$pval_cat_calculated_pvalues

# to import an excel spreadsheet (modify using local path,
# file and sheet name, range, and format):

# get path for example files
path &lt;- system.file("extdata", "reappraised_examples.xlsx", package = "reappraised",
                    mustWork = TRUE)
# delete file name from path
path &lt;- sub("/[^/]+$", "", path)

# load data
pval_cat_data &lt;- load_clean(import= "yes", pval_cat = "yes", dir = path,
     file.name.cat = "reappraised_examples.xlsx", sheet.name.cat = "SI_cat_all",
     range.name.cat = "A:n", format.cat = "wide")$pval_cat_data

</code></pre>

<hr>
<h2 id='pval_cont_fn'>Compares observed and expected distribution of p-values for continuous variables</h2><span id='topic+pval_cont_fn'></span>

<h3>Description</h3>

<p>Creates plots of calculated p-value distribution and AUC (area under curve)<br />
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pval_cont_fn(df = pval_cont_data, btsp = 500, title = "", verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pval_cont_fn_+3A_df">df</code></td>
<td>
<p>data frame generated from load_clean function</p>
</td></tr>
<tr><td><code id="pval_cont_fn_+3A_btsp">btsp</code></td>
<td>
<p>number of bootstrap repeats used to generate 95% confidence interval around AUC</p>
</td></tr>
<tr><td><code id="pval_cont_fn_+3A_title">title</code></td>
<td>
<p>optional title for plots</p>
</td></tr>
<tr><td><code id="pval_cont_fn_+3A_verbose">verbose</code></td>
<td>
<p>TRUE or FALSE indicates whether progress bar and comments show and prints plot</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Reference data is from (Carlisle 2017, Bolland 2021)<br />
Carlisle JB . Data fabrication and other reasons for non-random sampling in 5087 randomised, controlled trials in anaesthetic and general medical journals. Anaesthesia 2017;72:94452 .2017<br />
Bolland MJ, Gamble GD, Grey A, Avenell A. Empirically generated reference proportions for baseline p values from rounded summary statistics. Anaesthesia 2020;75:1685-1687.<br />
See also Bolland MJ, Gamble GD, Avenell A, Grey A, Lumley T. Baseline P value distributions in randomized trials were uniform for continuous but not categorical variables. J Clin Epidemiol 2019;112:67-76.<br />
and Bolland MJ, Gamble GD, Avenell A, Grey A. Rounding, but not randomization method, non-normality, or correlation, affected baseline P-value distributions in randomized trials. J Clin Epidemiol 2019;110:50-62.
</p>
<p>Returns a list containing 4 objects and (if verbose = TRUE) prints the plot pval_cont_calculated_pvalues
</p>


<h3>Value</h3>

<p>list containing 4 objects as described
</p>

<ul>
<li><p> pval_cont_calculated_pvalues = plots of calculated p-value distribution and AUC
</p>
</li>
<li><p> pval_cont_reported_pvalues = plots of reported p-value distribution and AUC (if p-values were reported)
</p>
</li>
<li><p> pval_cont_ft_diff_calc_rep_p = flextable of distribution of differences in calculated and reported results
</p>
</li>
<li><p> all_results = list containing
</p>

<ul>
<li><p> pval_cont_baseline_pvalues_data = data frame of all results used in calculations
</p>
</li>
<li><p> pval_cont_diff_calc_rep_p = data frame of differences between calculated and reported p-values
</p>
</li>
<li><p> pval_cont_reported_pvalues= plot of reported p-value distribution
</p>
</li>
<li><p> pval_cont_auc_reported_pvalues = AUC of reported p-values
</p>
</li>
<li><p> pval_cont_calculated_pvalues = plot of calculated p-value distribution
</p>
</li>
<li><p> pval_cont_auc_calculated_pvalues= AUC of calculated p-values
</p>
</li></ul>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># load example data
pval_cont_data &lt;- load_clean(import= "no", file.cont = "SI_pvals_cont", pval_cont= "yes",
format.cont = "wide")$pval_cont_data


# run function (takes only a few seconds)
pval_cont_fn(btsp=100)$pval_cont_calculated_pvalues

# to import an excel spreadsheet (modify using local path,
# file and sheet name, range, and format):

# get path for example files
path &lt;- system.file("extdata", "reappraised_examples.xlsx", package = "reappraised",
                    mustWork = TRUE)
# delete file name from path
path &lt;- sub("/[^/]+$", "", path)

# load data
pval_cont_data &lt;- load_clean(import= "yes", pval_cont = "yes", dir = path,
     file.name.cont = "reappraised_examples.xlsx", sheet.name.cont = "SI_pvals_cont",
     range.name.cont = "A1:O51", format.cont = "wide")$pval_cont_data

</code></pre>

<hr>
<h2 id='SI_cat'>Example of 20 observations for categorical analysis</h2><span id='topic+SI_cat'></span>

<h3>Description</h3>

<p>Sample from Sato/Iwamoto dataset of 35 studies with withdrawal data<br />
see Bolland MJ, Gamble GD, Avenell A, Cooper DJ, Grey A. Participant withdrawals were unusually distributed in randomized trials with integrity concerns: a statistical investigation. J Clin Epidemiol 2021;131:22-29.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SI_cat
</code></pre>


<h3>Format</h3>

<p>A data frame with 20 rows and 8 variables:
</p>

<dl>
<dt>study</dt><dd><p>study ID</p>
</dd>
<dt>n1, n2, n3</dt><dd><p>number of participants in each group</p>
</dd>
<dt>w1, w2, w3</dt><dd><p>number of withdrawals in each group</p>
</dd>
</dl>


<hr>
<h2 id='SI_cat_all'>Example of 50 variables from different studies for categorical (cat_all_fn) analysis</h2><span id='topic+SI_cat_all'></span>

<h3>Description</h3>

<p>Sample from Sato/Iwamoto dataset of 31 studies with categorical data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SI_cat_all
</code></pre>


<h3>Format</h3>

<p>A data frame with 106 rows and 14 variables:
</p>

<dl>
<dt>study</dt><dd><p>study ID</p>
</dd>
<dt>var</dt><dd><p>variable</p>
</dd>
<dt>level</dt><dd><p>level of variable</p>
</dd>
<dt>recode</dt><dd><p>value to recode level two if collapsing variable to two levels</p>
</dd>
<dt>levels_no</dt><dd><p>total number of levels for each variable</p>
</dd>
<dt>group</dt><dd><p>number of trial arms</p>
</dd>
<dt>n1, n2, n3</dt><dd><p>number of participants with characteristic in each group</p>
</dd>
<dt>N1, N2, N3</dt><dd><p>number of participants in each group</p>
</dd>
<dt>p</dt><dd><p>reported p-value</p>
</dd>
<dt>stat</dt><dd><p>reported statistical test used to calculate p-value</p>
</dd>
</dl>


<hr>
<h2 id='SI_cohort'>Example of 100 observations for cohort analysis</h2><span id='topic+SI_cohort'></span>

<h3>Description</h3>

<p>Sample from Sato/Iwamoto dataset of 226 baseline variables in 34 cohorts<br />
see Bolland MJ, Gamble GD, Avenell A, Grey A. Identical summary statistics were uncommon in randomized trials and cohort studies. J Clin Epidemiol 2021;136:180-188.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SI_cohort
</code></pre>


<h3>Format</h3>

<p>A data frame with 100 rows and 6 variables:
</p>

<dl>
<dt>study</dt><dd><p>study ID</p>
</dd>
<dt>var</dt><dd><p>variable name</p>
</dd>
<dt>n</dt><dd><p>number of participants in group</p>
</dd>
<dt>m</dt><dd><p>mean of variable</p>
</dd>
<dt>s</dt><dd><p>sd of variable</p>
</dd>
<dt>group</dt><dd><p>number of group</p>
</dd>
</dl>


<hr>
<h2 id='SI_pvals_cont'>Example of 50 observations for p-value analysis</h2><span id='topic+SI_pvals_cont'></span>

<h3>Description</h3>

<p>Sample from Sato/Iwamoto dataset of 500 baseline variables in 41 trials<br />
for details see Bolland MJ, Avenell A, Gamble GD, Grey A. Systematic review and statistical analysis of the integrity of 33 randomized controlled trials. Neurology 2016;87:2391-2402.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SI_pvals_cont
</code></pre>


<h3>Format</h3>

<p>A data frame with 50 rows and 15 variables:
</p>

<dl>
<dt>study</dt><dd><p>study ID</p>
</dd>
<dt>var</dt><dd><p>variable name</p>
</dd>
<dt>n1,n2,n3,n4</dt><dd><p>size of group 1, 2, 3, 4</p>
</dd>
<dt>m1,m2,m3,m4</dt><dd><p>mean of variable for group 1, 2, 3, 4</p>
</dd>
<dt>s1,s2,s3,s4</dt><dd><p>sd of variable for group 1, 2, 3, 4</p>
</dd>
<dt>p</dt><dd><p>reported p-value</p>
</dd>
</dl>


<hr>
<h2 id='sr_fn'>Compares observed and expected distribution of difference in numbers of participants between groups in two-arm randomised trials</h2><span id='topic+sr_fn'></span>

<h3>Description</h3>

<p>Creates plot of observed to expected numbers and ratios for differences in numbers of participants between trial groups<br />
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sr_fn(
  df = sr_data,
  br = "no",
  block = data.frame(study = "", fbsz = "", n_fb = "", df = ""),
  title = "",
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sr_fn_+3A_df">df</code></td>
<td>
<p>data frame generated from load_clean function</p>
</td></tr>
<tr><td><code id="sr_fn_+3A_br">br</code></td>
<td>
<p>block randomisation: 'yes' or 'no'. If 'no' runs function as if all trials used simple randomisation. If 'yes' performs simple calculations as if block randomised</p>
</td></tr>
<tr><td><code id="sr_fn_+3A_block">block</code></td>
<td>
<p>an additional option for studies using block randomisation. block is a data frame containing columns named study (for study id); fbsz (for the final block size); n_fb (for number of participants in the final block); df (the difference between groups)</p>
</td></tr>
<tr><td><code id="sr_fn_+3A_title">title</code></td>
<td>
<p>title name for plots (optional)</p>
</td></tr>
<tr><td><code id="sr_fn_+3A_verbose">verbose</code></td>
<td>
<p>TRUE or FALSE indicates whether progress bar and comments in block randomisation function show and whether to print plot</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An example is for Sato and Iwamoto trials in Bolland 2016<br />
Bolland MJ, Avenell A, Gamble GD, Grey A. Systematic review and statistical analysis of the integrity of 33 randomized controlled trials. Neurology 2016;87:2391-2402.
</p>
<p>Returns a list containing 4 objects and (if verbose = TRUE) prints the plot sr_graph
</p>


<h3>Value</h3>

<p>list containing 4 objects as described
</p>

<ul>
<li><p> sr_graph = plot of observed to expected numbers for differences between numbers of participants in trial groups
</p>
</li>
<li><p> sr_graph = plot of observed to expected numbers and ratios for differences between numbers of participants in trial groups
</p>
</li>
<li><p> sr_individual_graphs = list containing 2 plots making up composite figure
</p>
</li>
<li><p> sr_data = data frame containing data for plots
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># load example data
sr_data &lt;- load_clean(import= "no", file.cat = "SI_cat", sr= "yes",
format.cat = "wide")$sr_data


# run function (takes only a few seconds)
sr_fn()$sr_graph

# to import an excel spreadsheet (modify using local path,
# file and sheet name, range, and format):

# get path for example files
path &lt;- system.file("extdata", "reappraised_examples.xlsx", package = "reappraised",
                    mustWork = TRUE)
# delete file name from path
path &lt;- sub("/[^/]+$", "", path)

# load data
sr_data &lt;- load_clean(import= "yes", sr = "yes", dir = path,
   file.name.cat = "reappraised_examples.xlsx", sheet.name.cat = "SI_cat",
   range.name.cat = "A:D", format.cat = "wide")$sr_data

# function has an additional option for block randomisation.
#  If studies are block randomised and the final block size is known,
#  the number of participants in the final block can be determined.
#  The distribution of differences between groups for the final block
#  can be compared to the expected distribution
#
#  Few studies provide all these details so it seems unlikely this function
#  would get used often

# Example takes only a few seconds to run

sr_fn(br = "yes", block = data.frame(study = c(1,2,3,4,5,6,7,8,9,10),
         fb_sz= c(2,4,6,8,10,12,8,8,6,14), n_fb = c(1,1,4,5,7,8,4,6,2,10),
         df=c(1,1,0,1,3,4,2,2,0,0)))$sr_graph

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
