<!DOCTYPE html><html lang="en"><head><title>Help for package gmailr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {gmailr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#gmailr-package'><p>gmailr: Access the 'Gmail' 'RESTful' API</p></a></li>
<li><a href='#as.character.mime'><p>Convert a mime object to character representation</p></a></li>
<li><a href='#gm_attachment'><p>Retrieve an attachment to a message</p></a></li>
<li><a href='#gm_attachments'><p>Retrieve information about attachments</p></a></li>
<li><a href='#gm_auth'><p>Authorize gmailr</p></a></li>
<li><a href='#gm_auth_configure'><p>Edit auth configuration</p></a></li>
<li><a href='#gm_body'><p>Get the body text of a message or draft</p></a></li>
<li><a href='#gm_create_draft'><p>Create a draft from a mime message</p></a></li>
<li><a href='#gm_create_label'><p>Create a new label</p></a></li>
<li><a href='#gm_deauth'><p>Clear current token</p></a></li>
<li><a href='#gm_delete_draft'><p>Permanently delete a single draft</p></a></li>
<li><a href='#gm_delete_label'><p>Permanently delete a label</p></a></li>
<li><a href='#gm_delete_message'><p>Permanently delete a single message</p></a></li>
<li><a href='#gm_delete_thread'><p>Permanently delete a single thread.</p></a></li>
<li><a href='#gm_draft'><p>Get a single draft</p></a></li>
<li><a href='#gm_drafts'><p>Get a list of drafts</p></a></li>
<li><a href='#gm_has_token'><p>Is there a token on hand?</p></a></li>
<li><a href='#gm_history'><p>Retrieve change history for the inbox</p></a></li>
<li><a href='#gm_id'><p>Get the id of a gmailr object</p></a></li>
<li><a href='#gm_import_message'><p>Import a message into the gmail mailbox from a mime message</p></a></li>
<li><a href='#gm_insert_message'><p>Insert a message into the gmail mailbox from a mime message</p></a></li>
<li><a href='#gm_label'><p>Get a specific label</p></a></li>
<li><a href='#gm_labels'><p>Get a list of all labels</p></a></li>
<li><a href='#gm_last_response'><p>Response from the last query</p></a></li>
<li><a href='#gm_message'><p>Get a single message</p></a></li>
<li><a href='#gm_messages'><p>Get a list of messages</p></a></li>
<li><a href='#gm_mime'><p>Create a mime formatted message object</p></a></li>
<li><a href='#gm_modify_message'><p>Modify the labels on a message</p></a></li>
<li><a href='#gm_modify_thread'><p>Modify the labels on a thread</p></a></li>
<li><a href='#gm_oauth_app'><p>Get currently configured OAuth app (deprecated)</p></a></li>
<li><a href='#gm_profile'><p>Get info on current gmail profile</p></a></li>
<li><a href='#gm_save_attachment'><p>Save the attachment to a file</p></a></li>
<li><a href='#gm_save_attachments'><p>Save attachments to a message</p></a></li>
<li><a href='#gm_scopes'><p>Produce scopes specific to the Gmail API</p></a></li>
<li><a href='#gm_send_draft'><p>Send a draft</p></a></li>
<li><a href='#gm_send_message'><p>Send a message from a mime message</p></a></li>
<li><a href='#gm_thread'><p>Get a single thread</p></a></li>
<li><a href='#gm_threads'><p>Get a list of threads</p></a></li>
<li><a href='#gm_to'><p>Methods to get values from message or drafts</p></a></li>
<li><a href='#gm_token'><p>Produce configured token</p></a></li>
<li><a href='#gm_token_write'><p>Write/read a gmailr user token</p></a></li>
<li><a href='#gm_trash_message'><p>Send a single message to the trash</p></a></li>
<li><a href='#gm_trash_thread'><p>Send a single thread to the trash</p></a></li>
<li><a href='#gm_untrash_message'><p>Remove a single message from the trash</p></a></li>
<li><a href='#gm_untrash_thread'><p>Remove a single thread from the trash.</p></a></li>
<li><a href='#gm_update_label'><p>Update a existing label.</p></a></li>
<li><a href='#gmailr-configuration'><p>Configuring gmailr</p></a></li>
<li><a href='#gmailr-deprecated'><p>Deprecated functions</p></a></li>
<li><a href='#gmailr-deprecated-auth'><p>Deprecated auth</p></a></li>
<li><a href='#quoted_printable_encode'><p>Encode text using quoted printable</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Access the 'Gmail' 'RESTful' API</td>
</tr>
<tr>
<td>Version:</td>
<td>2.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>An interface to the 'Gmail' 'RESTful' API.  Allows access to
    your 'Gmail' messages, threads, drafts and labels.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://gmailr.r-lib.org">https://gmailr.r-lib.org</a>, <a href="https://github.com/r-lib/gmailr">https://github.com/r-lib/gmailr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/r-lib/gmailr/issues">https://github.com/r-lib/gmailr/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6)</td>
</tr>
<tr>
<td>Imports:</td>
<td>base64enc, cli, crayon, gargle (&ge; 1.5.1), glue, httr,
jsonlite, lifecycle, mime, rappdirs, rematch2, rlang (&ge; 1.1.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>curl, knitr, methods, rmarkdown, testthat (&ge; 3.1.8), withr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>tidyverse/tidytemplate</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-06-30 05:00:31 UTC; jenny</td>
</tr>
<tr>
<td>Author:</td>
<td>Jim Hester [aut],
  Jennifer Bryan [aut, cre],
  Posit Software, PBC [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jennifer Bryan &lt;jenny@posit.co&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-06-30 05:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='gmailr-package'>gmailr: Access the 'Gmail' 'RESTful' API</h2><span id='topic+gmailr'></span><span id='topic+gmailr-package'></span>

<h3>Description</h3>

<p>An interface to the 'Gmail' 'RESTful' API. Allows access to your 'Gmail' messages, threads, drafts and labels.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Jennifer Bryan <a href="mailto:jenny@posit.co">jenny@posit.co</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Jim Hester
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Posit Software, PBC [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://gmailr.r-lib.org">https://gmailr.r-lib.org</a>
</p>
</li>
<li> <p><a href="https://github.com/r-lib/gmailr">https://github.com/r-lib/gmailr</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/r-lib/gmailr/issues">https://github.com/r-lib/gmailr/issues</a>
</p>
</li></ul>


<hr>
<h2 id='as.character.mime'>Convert a mime object to character representation</h2><span id='topic+as.character.mime'></span>

<h3>Description</h3>

<p>This function converts a mime object into a character vector
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mime'
as.character(x, newline = "\r\n", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as.character.mime_+3A_x">x</code></td>
<td>
<p>object to convert</p>
</td></tr>
<tr><td><code id="as.character.mime_+3A_newline">newline</code></td>
<td>
<p>value to use as newline character</p>
</td></tr>
<tr><td><code id="as.character.mime_+3A_...">...</code></td>
<td>
<p>further arguments ignored</p>
</td></tr>
</table>

<hr>
<h2 id='gm_attachment'>Retrieve an attachment to a message</h2><span id='topic+gm_attachment'></span>

<h3>Description</h3>

<p>This is a low level function to retrieve an attachment to a message by id of the attachment
and message. Most users are better off using <code><a href="#topic+gm_save_attachments">gm_save_attachments()</a></code> to
automatically save all the attachments in a given message.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_attachment(id, message_id, user_id = "me")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_attachment_+3A_id">id</code></td>
<td>
<p>id of the attachment</p>
</td></tr>
<tr><td><code id="gm_attachment_+3A_message_id">message_id</code></td>
<td>
<p>id of the parent message</p>
</td></tr>
<tr><td><code id="gm_attachment_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.messages.attachments/get">https://developers.google.com/gmail/api/reference/rest/v1/users.messages.attachments/get</a>
</p>


<h3>See Also</h3>

<p>Other message: 
<code><a href="#topic+gm_delete_message">gm_delete_message</a>()</code>,
<code><a href="#topic+gm_import_message">gm_import_message</a>()</code>,
<code><a href="#topic+gm_insert_message">gm_insert_message</a>()</code>,
<code><a href="#topic+gm_messages">gm_messages</a>()</code>,
<code><a href="#topic+gm_message">gm_message</a>()</code>,
<code><a href="#topic+gm_modify_message">gm_modify_message</a>()</code>,
<code><a href="#topic+gm_save_attachments">gm_save_attachments</a>()</code>,
<code><a href="#topic+gm_save_attachment">gm_save_attachment</a>()</code>,
<code><a href="#topic+gm_send_message">gm_send_message</a>()</code>,
<code><a href="#topic+gm_trash_message">gm_trash_message</a>()</code>,
<code><a href="#topic+gm_untrash_message">gm_untrash_message</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
my_attachment &lt;- gm_attachment("a32e324b", "12345")
# save attachment to a file
gm_save_attachment(my_attachment, "photo.jpg")

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_attachments'>Retrieve information about attachments</h2><span id='topic+gm_attachments'></span>

<h3>Description</h3>

<p>Retrieve information about attachments
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_attachments(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_attachments_+3A_x">x</code></td>
<td>
<p>An object from which to retrieve the attachment information.</p>
</td></tr>
<tr><td><code id="gm_attachments_+3A_...">...</code></td>
<td>
<p>other parameters passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with the <code>filename</code>, <code>type</code>, <code>size</code> and <code>id</code> of each
attachment in the message.
</p>

<hr>
<h2 id='gm_auth'>Authorize gmailr</h2><span id='topic+gm_auth'></span>

<h3>Description</h3>

<p>Authorize gmailr to view and manage your Gmail projects. This function is a
wrapper around <code><a href="gargle.html#topic+token_fetch">gargle::token_fetch()</a></code>.
</p>
<p>By default, you are directed to a web browser, asked to sign in to your
Google account, and to grant gmailr permission to operate on your
behalf with Google Gmail. By default, with your permission, these user
credentials are cached in a folder below your home directory, from where
they can be automatically refreshed, as necessary. Storage at the user
level means the same token can be used across multiple projects and
tokens are less likely to be synced to the cloud by accident.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_auth(
  email = gm_default_email(),
  path = NULL,
  subject = NULL,
  scopes = "full",
  cache = gargle::gargle_oauth_cache(),
  use_oob = gargle::gargle_oob_default(),
  token = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_auth_+3A_email">email</code></td>
<td>
<p>Optional. If specified, <code>email</code> can take several different
forms:
</p>

<ul>
<li> <p><code>"jane@gmail.com"</code>, i.e. an actual email address. This allows the user to
target a specific Google identity. If specified, this is used for token
lookup, i.e. to determine if a suitable token is already available in the
cache. If no such token is found, <code>email</code> is used to pre-select the targeted
Google identity in the OAuth chooser. (Note, however, that the email
associated with a token when it's cached is always determined from the token
itself, never from this argument).
</p>
</li>
<li> <p><code>"*@example.com"</code>, i.e. a domain-only glob pattern. This can be helpful if
you need code that &quot;just works&quot; for both <code>alice@example.com</code> and
<code>bob@example.com</code>.
</p>
</li>
<li> <p><code>TRUE</code> means that you are approving email auto-discovery. If exactly one
matching token is found in the cache, it will be used.
</p>
</li>
<li> <p><code>FALSE</code> or <code>NA</code> mean that you want to ignore the token cache and force a
new OAuth dance in the browser.
</p>
</li></ul>

<p>Defaults to the option named <code>"gargle_oauth_email"</code>, retrieved by
<code><a href="gargle.html#topic+gargle_oauth_email">gargle_oauth_email()</a></code> (unless a wrapper package implements different
default behavior).</p>
</td></tr>
<tr><td><code id="gm_auth_+3A_path">path</code></td>
<td>
<p>JSON identifying the service account, in one of the forms
supported for the <code>txt</code> argument of <code><a href="jsonlite.html#topic+fromJSON">jsonlite::fromJSON()</a></code> (typically, a
file path or JSON string).</p>
</td></tr>
<tr><td><code id="gm_auth_+3A_subject">subject</code></td>
<td>
<p>An optional subject claim. Specify this if you wish to use the
service account represented by <code>path</code> to impersonate the <code>subject</code>, who is
a normal user. Before this can work, an administrator must grant the service
account domain-wide authority. Identify the user to impersonate via their
email, e.g. <code>subject = "user@example.com"</code>. Note that gargle automatically
adds the non-sensitive <code>"https://www.googleapis.com/auth/userinfo.email"</code>
scope, so this scope must be enabled for the service account, along with
any other <code>scopes</code> being requested.</p>
</td></tr>
<tr><td><code id="gm_auth_+3A_scopes">scopes</code></td>
<td>
<p>One or more API scopes. Each scope can be specified in full or,
for Gmail API-specific scopes, in an abbreviated form that is recognized by
<code><a href="#topic+gm_scopes">gm_scopes()</a></code>:
</p>

<ul>
<li><p> &quot;full&quot; = &quot;https://mail.google.com/&quot; (the default)
</p>
</li>
<li><p> &quot;gmail.compose&quot; = &quot;https://www.googleapis.com/auth/gmail.compose&quot;
</p>
</li>
<li><p> &quot;gmail.readonly&quot; = &quot;https://www.googleapis.com/auth/gmail.readonly&quot;
</p>
</li>
<li><p> &quot;gmail.labels&quot; = &quot;https://www.googleapis.com/auth/gmail.labels&quot;
</p>
</li>
<li><p> &quot;gmail.send&quot; = &quot;https://www.googleapis.com/auth/gmail.send&quot;
</p>
</li>
<li><p> &quot;gmail.insert&quot; = &quot;https://www.googleapis.com/auth/gmail.insert&quot;
</p>
</li>
<li><p> &quot;gmail.modify&quot; = &quot;https://www.googleapis.com/auth/gmail.modify&quot;
</p>
</li>
<li><p> &quot;gmail.metadata&quot; = &quot;https://www.googleapis.com/auth/gmail.metadata&quot;
</p>
</li>
<li><p> &quot;gmail.settings_basic&quot; = &quot;https://www.googleapis.com/auth/gmail.settings.basic&quot;
</p>
</li>
<li><p> &quot;gmail.settings_sharing&quot; = &quot;https://www.googleapis.com/auth/gmail.settings.sharing&quot;
</p>
</li></ul>

<p>See <a href="https://developers.google.com/gmail/api/auth/scopes">https://developers.google.com/gmail/api/auth/scopes</a> for details on the
permissions for each scope.</p>
</td></tr>
<tr><td><code id="gm_auth_+3A_cache">cache</code></td>
<td>
<p>Specifies the OAuth token cache. Defaults to the option named
<code>"gargle_oauth_cache"</code>, retrieved via <code><a href="gargle.html#topic+gargle_oauth_cache">gargle_oauth_cache()</a></code>.</p>
</td></tr>
<tr><td><code id="gm_auth_+3A_use_oob">use_oob</code></td>
<td>
<p>Whether to use out-of-band authentication (or, perhaps, a
variant implemented by gargle and known as &quot;pseudo-OOB&quot;) when first
acquiring the token. Defaults to the value returned by
<code><a href="gargle.html#topic+gargle_oob_default">gargle_oob_default()</a></code>. Note that (pseudo-)OOB auth only affects
the initial OAuth dance. If we retrieve (and possibly refresh) a
cached token, <code>use_oob</code> has no effect.
</p>
<p>If the OAuth client is provided implicitly by a wrapper package, its type
probably defaults to the value returned by
<code><a href="gargle.html#topic+gargle_oauth_client_type">gargle_oauth_client_type()</a></code>. You can take control of the client
type by setting <code>options(gargle_oauth_client_type = "web")</code> or
<code>options(gargle_oauth_client_type = "installed")</code>.</p>
</td></tr>
<tr><td><code id="gm_auth_+3A_token">token</code></td>
<td>
<p>A token with class <a href="httr.html#topic+Token-class">Token2.0</a> or an object of
httr's class <code>request</code>, i.e. a token that has been prepared with
<code><a href="httr.html#topic+config">httr::config()</a></code> and has a <a href="httr.html#topic+Token-class">Token2.0</a> in the
<code>auth_token</code> component.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Most users, most of the time, do not need to call <code>gm_auth()</code>
explicitly &ndash; it is triggered by the first action that requires
authorization. Even when called, the default arguments often suffice.
</p>
<p>However, when necessary, <code>gm_auth()</code> allows the user to explicitly:
</p>

<ul>
<li><p> Declare which Google identity to use, via an <code>email</code> specification.
</p>
</li>
<li><p> Use a service account token or workload identity federation via
<code>path</code>.
</p>
</li>
<li><p> Bring your own <code>token</code>.
</p>
</li>
<li><p> Customize <code>scopes</code>.
</p>
</li>
<li><p> Use a non-default <code>cache</code> folder or turn caching off.
</p>
</li>
<li><p> Explicitly request out-of-bound (OOB) auth via <code>use_oob</code>.
</p>
</li></ul>

<p>If you are interacting with R within a browser (applies to RStudio
Server, Posit Workbench, Posit Cloud, and Google Colaboratory), you need
OOB auth or the pseudo-OOB variant. If this does not happen
automatically, you can request it explicitly with <code>use_oob = TRUE</code> or,
more persistently, by setting an option via
<code>options(gargle_oob_default = TRUE)</code>.
</p>
<p>The choice between conventional OOB or pseudo-OOB auth is determined
by the type of OAuth client. If the client is of the &quot;installed&quot; type,
<code>use_oob = TRUE</code> results in conventional OOB auth. If the client is of
the &quot;web&quot; type, <code>use_oob = TRUE</code> results in pseudo-OOB auth. Packages
that provide a built-in OAuth client can usually detect which type of
client to use. But if you need to set this explicitly, use the
<code>"gargle_oauth_client_type"</code> option:
</p>
<div class="sourceCode r"><pre>options(gargle_oauth_client_type = "web")       # pseudo-OOB
# or, alternatively
options(gargle_oauth_client_type = "installed") # conventional OOB
</pre></div>
<p>For details on the many ways to find a token, see
<code><a href="gargle.html#topic+token_fetch">gargle::token_fetch()</a></code>. For deeper control over auth, use
<code><a href="#topic+gm_auth_configure">gm_auth_configure()</a></code> to bring your own OAuth client or API key.
To learn more about gargle options, see <a href="gargle.html#topic+gargle_options">gargle::gargle_options</a>.
</p>


<h3>See Also</h3>

<p>Other auth functions: 
<code><a href="#topic+gm_auth_configure">gm_auth_configure</a>()</code>,
<code><a href="#topic+gm_deauth">gm_deauth</a>()</code>,
<code><a href="#topic+gm_scopes">gm_scopes</a>()</code>,
<code><a href="#topic+gmailr-configuration">gmailr-configuration</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# load/refresh existing credentials, if available
# otherwise, go to browser for authentication and authorization
gm_auth()

# indicate the specific identity you want to auth as
gm_auth(email = "jenny@example.com")

# force a new browser dance, i.e. don't even try to use existing user
# credentials
gm_auth(email = NA)

# specify the identity, use a 'read only' scope, so it's impossible to
# send or delete email, and specify a cache folder
gm_auth(
  "target.user@example.com",
  scopes = "gmail.readonly",
  cache = "some/nice/directory/"
)

</code></pre>

<hr>
<h2 id='gm_auth_configure'>Edit auth configuration</h2><span id='topic+gm_auth_configure'></span><span id='topic+gm_oauth_client'></span>

<h3>Description</h3>

<p>See the article <a href="https://gmailr.r-lib.org/dev/articles/oauth-client.html">Set up an OAuth client</a> for
instructions on how to get an OAuth client. Then you can use
<code>gm_auth_configure()</code> to register your client for use with gmailr.
<code>gm_oauth_client()</code> retrieves the currently configured OAuth client.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_auth_configure(
  client = NULL,
  path = gm_default_oauth_client(),
  key = deprecated(),
  secret = deprecated(),
  appname = deprecated(),
  app = deprecated()
)

gm_oauth_client()
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_auth_configure_+3A_client">client</code></td>
<td>
<p>A Google OAuth client, presumably constructed via
<code><a href="gargle.html#topic+gargle_oauth_client_from_json">gargle::gargle_oauth_client_from_json()</a></code>. Note, however, that it is
preferred to specify the client with JSON, using the <code>path</code> argument.</p>
</td></tr>
<tr><td><code id="gm_auth_configure_+3A_path">path</code></td>
<td>
<p>JSON downloaded from <a href="https://console.cloud.google.com">Google Cloud Console</a>, containing a client id and
secret, in one of the forms supported for the <code>txt</code> argument of
<code><a href="jsonlite.html#topic+fromJSON">jsonlite::fromJSON()</a></code> (typically, a file path or JSON string).</p>
</td></tr>
<tr><td><code id="gm_auth_configure_+3A_key">key</code>, <code id="gm_auth_configure_+3A_secret">secret</code>, <code id="gm_auth_configure_+3A_appname">appname</code>, <code id="gm_auth_configure_+3A_app">app</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> Use the
<code>path</code> (strongly recommended) or <code>client</code> argument instead.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li> <p><code>gm_auth_configure()</code>: An object of R6 class
<a href="gargle.html#topic+AuthState-class">gargle::AuthState</a>, invisibly.
</p>
</li>
<li> <p><code>gm_oauth_client()</code>: the current user-configured OAuth client.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+gm_default_oauth_client">gm_default_oauth_client()</a></code> to learn how you can make your OAuth
client easy for gmailr to discover.
</p>
<p>Other auth functions: 
<code><a href="#topic+gm_auth">gm_auth</a>()</code>,
<code><a href="#topic+gm_deauth">gm_deauth</a>()</code>,
<code><a href="#topic+gm_scopes">gm_scopes</a>()</code>,
<code><a href="#topic+gmailr-configuration">gmailr-configuration</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# if your OAuth client can be auto-discovered (see ?gm_default_oauth_client),
# you don't need to provide anything!
gm_auth_configure()

# see and store the current user-configured OAuth client
(original_client &lt;- gm_oauth_client())

# the preferred way to configure your own client is via a JSON file
# downloaded from Google Developers Console
# this example JSON is indicative, but fake
path_to_json &lt;- system.file(
  "extdata", "client_secret_installed.googleusercontent.com.json",
  package = "gargle"
)
gm_auth_configure(path = path_to_json)

# confirm that a (fake) OAuth client is now configured
gm_oauth_client()

# restore original auth config
gm_auth_configure(client = original_client)
</code></pre>

<hr>
<h2 id='gm_body'>Get the body text of a message or draft</h2><span id='topic+gm_body'></span>

<h3>Description</h3>

<p>Get the body text of a message or draft
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_body(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_body_+3A_x">x</code></td>
<td>
<p>the object from which to retrieve the body</p>
</td></tr>
<tr><td><code id="gm_body_+3A_...">...</code></td>
<td>
<p>other parameters passed to methods</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
gm_body(my_message)
gm_body(my_draft)

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_create_draft'>Create a draft from a mime message</h2><span id='topic+gm_create_draft'></span>

<h3>Description</h3>

<p>Create a draft from a mime message
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_create_draft(mail, user_id = "me")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_create_draft_+3A_mail">mail</code></td>
<td>
<p>mime mail message created by mime</p>
</td></tr>
<tr><td><code id="gm_create_draft_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.drafts/create">https://developers.google.com/gmail/api/reference/rest/v1/users.drafts/create</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
gm_create_draft(gm_mime(
  From = "you@me.com", To = "any@one.com",
  Subject = "hello", "how are you doing?"
))

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_create_label'>Create a new label</h2><span id='topic+gm_create_label'></span>

<h3>Description</h3>

<p>Function to create a label.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_create_label(
  name,
  label_list_visibility = c("show", "hide", "show_unread"),
  message_list_visibility = c("show", "hide"),
  user_id = "me"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_create_label_+3A_name">name</code></td>
<td>
<p>name to give to the new label</p>
</td></tr>
<tr><td><code id="gm_create_label_+3A_label_list_visibility">label_list_visibility</code></td>
<td>
<p>The visibility of the label in the label list in the Gmail web interface.</p>
</td></tr>
<tr><td><code id="gm_create_label_+3A_message_list_visibility">message_list_visibility</code></td>
<td>
<p>The visibility of messages with this label in the message list in the Gmail web interface.</p>
</td></tr>
<tr><td><code id="gm_create_label_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.labels/create">https://developers.google.com/gmail/api/reference/rest/v1/users.labels/create</a>
</p>


<h3>See Also</h3>

<p>Other label: 
<code><a href="#topic+gm_delete_label">gm_delete_label</a>()</code>,
<code><a href="#topic+gm_labels">gm_labels</a>()</code>,
<code><a href="#topic+gm_label">gm_label</a>()</code>,
<code><a href="#topic+gm_update_label">gm_update_label</a>()</code>
</p>

<hr>
<h2 id='gm_deauth'>Clear current token</h2><span id='topic+gm_deauth'></span>

<h3>Description</h3>

<p>Clears any currently stored token. The next time gmailr needs a token,
the token acquisition process starts over, with a fresh call to
<code><a href="#topic+gm_auth">gm_auth()</a></code> and, therefore, internally, a call to
<code><a href="gargle.html#topic+token_fetch">gargle::token_fetch()</a></code>. Unlike some other packages that use gargle,
gmailr is not usable in a de-authorized state. Therefore, calling
<code>gm_deauth()</code> only clears the token, i.e. it does NOT imply that
subsequent requests are made with an API key in lieu of a token.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_deauth()
</code></pre>


<h3>See Also</h3>

<p>Other auth functions: 
<code><a href="#topic+gm_auth_configure">gm_auth_configure</a>()</code>,
<code><a href="#topic+gm_auth">gm_auth</a>()</code>,
<code><a href="#topic+gm_scopes">gm_scopes</a>()</code>,
<code><a href="#topic+gmailr-configuration">gmailr-configuration</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
gm_deauth()

</code></pre>

<hr>
<h2 id='gm_delete_draft'>Permanently delete a single draft</h2><span id='topic+gm_delete_draft'></span>

<h3>Description</h3>

<p>Function to delete a given draft by id.  This cannot be undone!
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_delete_draft(id, user_id = "me")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_delete_draft_+3A_id">id</code></td>
<td>
<p>message id to access</p>
</td></tr>
<tr><td><code id="gm_delete_draft_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.drafts/delete">https://developers.google.com/gmail/api/reference/rest/v1/users.drafts/delete</a>
</p>


<h3>See Also</h3>

<p>Other draft: 
<code><a href="#topic+gm_drafts">gm_drafts</a>()</code>,
<code><a href="#topic+gm_draft">gm_draft</a>()</code>,
<code><a href="#topic+gm_send_draft">gm_send_draft</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
delete_draft("12345")

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_delete_label'>Permanently delete a label</h2><span id='topic+gm_delete_label'></span>

<h3>Description</h3>

<p>Function to delete a label by id.  This cannot be undone!
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_delete_label(id, user_id = "me")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_delete_label_+3A_id">id</code></td>
<td>
<p>label id to retrieve</p>
</td></tr>
<tr><td><code id="gm_delete_label_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.labels/delete">https://developers.google.com/gmail/api/reference/rest/v1/users.labels/delete</a>
</p>


<h3>See Also</h3>

<p>Other label: 
<code><a href="#topic+gm_create_label">gm_create_label</a>()</code>,
<code><a href="#topic+gm_labels">gm_labels</a>()</code>,
<code><a href="#topic+gm_label">gm_label</a>()</code>,
<code><a href="#topic+gm_update_label">gm_update_label</a>()</code>
</p>

<hr>
<h2 id='gm_delete_message'>Permanently delete a single message</h2><span id='topic+gm_delete_message'></span>

<h3>Description</h3>

<p>Function to delete a given message by id.  This cannot be undone!
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_delete_message(id, user_id = "me")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_delete_message_+3A_id">id</code></td>
<td>
<p>message id to access</p>
</td></tr>
<tr><td><code id="gm_delete_message_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.messages/delete">https://developers.google.com/gmail/api/reference/rest/v1/users.messages/delete</a>
</p>


<h3>See Also</h3>

<p>Other message: 
<code><a href="#topic+gm_attachment">gm_attachment</a>()</code>,
<code><a href="#topic+gm_import_message">gm_import_message</a>()</code>,
<code><a href="#topic+gm_insert_message">gm_insert_message</a>()</code>,
<code><a href="#topic+gm_messages">gm_messages</a>()</code>,
<code><a href="#topic+gm_message">gm_message</a>()</code>,
<code><a href="#topic+gm_modify_message">gm_modify_message</a>()</code>,
<code><a href="#topic+gm_save_attachments">gm_save_attachments</a>()</code>,
<code><a href="#topic+gm_save_attachment">gm_save_attachment</a>()</code>,
<code><a href="#topic+gm_send_message">gm_send_message</a>()</code>,
<code><a href="#topic+gm_trash_message">gm_trash_message</a>()</code>,
<code><a href="#topic+gm_untrash_message">gm_untrash_message</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
gm_delete_message("12345")

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_delete_thread'>Permanently delete a single thread.</h2><span id='topic+gm_delete_thread'></span>

<h3>Description</h3>

<p>Function to delete a given thread by id.  This cannot be undone!
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_delete_thread(id, user_id = "me")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_delete_thread_+3A_id">id</code></td>
<td>
<p>thread id to access</p>
</td></tr>
<tr><td><code id="gm_delete_thread_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.threads/delete">https://developers.google.com/gmail/api/reference/rest/v1/users.threads/delete</a>
</p>


<h3>See Also</h3>

<p>Other thread: 
<code><a href="#topic+gm_modify_thread">gm_modify_thread</a>()</code>,
<code><a href="#topic+gm_threads">gm_threads</a>()</code>,
<code><a href="#topic+gm_thread">gm_thread</a>()</code>,
<code><a href="#topic+gm_trash_thread">gm_trash_thread</a>()</code>,
<code><a href="#topic+gm_untrash_thread">gm_untrash_thread</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
gm_delete_thread(12345)

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_draft'>Get a single draft</h2><span id='topic+gm_draft'></span>

<h3>Description</h3>

<p>Function to retrieve a given draft by &lt;-
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_draft(id, user_id = "me", format = c("full", "minimal", "raw"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_draft_+3A_id">id</code></td>
<td>
<p>draft id to access</p>
</td></tr>
<tr><td><code id="gm_draft_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
<tr><td><code id="gm_draft_+3A_format">format</code></td>
<td>
<p>format of the draft returned</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.drafts/get">https://developers.google.com/gmail/api/reference/rest/v1/users.drafts/get</a>
</p>


<h3>See Also</h3>

<p>Other draft: 
<code><a href="#topic+gm_delete_draft">gm_delete_draft</a>()</code>,
<code><a href="#topic+gm_drafts">gm_drafts</a>()</code>,
<code><a href="#topic+gm_send_draft">gm_send_draft</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
my_draft &lt;- gm_draft("12345")

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_drafts'>Get a list of drafts</h2><span id='topic+gm_drafts'></span>

<h3>Description</h3>

<p>Get a list of drafts possibly matching a given query string.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_drafts(num_results = NULL, page_token = NULL, user_id = "me")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_drafts_+3A_num_results">num_results</code></td>
<td>
<p>the number of results to return.</p>
</td></tr>
<tr><td><code id="gm_drafts_+3A_page_token">page_token</code></td>
<td>
<p>retrieve a specific page of results</p>
</td></tr>
<tr><td><code id="gm_drafts_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.drafts/list">https://developers.google.com/gmail/api/reference/rest/v1/users.drafts/list</a>
</p>


<h3>See Also</h3>

<p>Other draft: 
<code><a href="#topic+gm_delete_draft">gm_delete_draft</a>()</code>,
<code><a href="#topic+gm_draft">gm_draft</a>()</code>,
<code><a href="#topic+gm_send_draft">gm_send_draft</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
my_drafts &lt;- gm_drafts()

first_10_drafts &lt;- gm_drafts(10)

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_has_token'>Is there a token on hand?</h2><span id='topic+gm_has_token'></span>

<h3>Description</h3>

<p>Reports whether gmailr has stored a token, ready for use in downstream
requests.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_has_token()
</code></pre>


<h3>Value</h3>

<p>Logical.
</p>


<h3>See Also</h3>

<p>Other low-level API functions: 
<code><a href="#topic+gm_token">gm_token</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gm_has_token()
</code></pre>

<hr>
<h2 id='gm_history'>Retrieve change history for the inbox</h2><span id='topic+gm_history'></span>

<h3>Description</h3>

<p>Retrieves the history results in chronological order
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_history(
  start_history_id = NULL,
  num_results = NULL,
  label_id = NULL,
  page_token = NULL,
  user_id = "me"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_history_+3A_start_history_id">start_history_id</code></td>
<td>
<p>the point to start the history.  The historyId can be obtained from a message, thread or previous list response.</p>
</td></tr>
<tr><td><code id="gm_history_+3A_num_results">num_results</code></td>
<td>
<p>the number of results to return, max per page is 100</p>
</td></tr>
<tr><td><code id="gm_history_+3A_label_id">label_id</code></td>
<td>
<p>filter history only for this label</p>
</td></tr>
<tr><td><code id="gm_history_+3A_page_token">page_token</code></td>
<td>
<p>retrieve a specific page of results</p>
</td></tr>
<tr><td><code id="gm_history_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.history/list">https://developers.google.com/gmail/api/reference/rest/v1/users.history/list</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
my_history &lt;- gm_history("10")

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_id'>Get the id of a gmailr object</h2><span id='topic+gm_id'></span><span id='topic+gm_id.gmail_messages'></span>

<h3>Description</h3>

<p>Get the id of a gmailr object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_id(x, ...)

## S3 method for class 'gmail_messages'
gm_id(x, what = c("message_id", "thread_id"), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_id_+3A_x">x</code></td>
<td>
<p>the object from which to retrieve the id</p>
</td></tr>
<tr><td><code id="gm_id_+3A_...">...</code></td>
<td>
<p>other parameters passed to methods</p>
</td></tr>
<tr><td><code id="gm_id_+3A_what">what</code></td>
<td>
<p>the type of id to return</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
gm_id(my_message)
gm_id(my_draft)

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_import_message'>Import a message into the gmail mailbox from a mime message</h2><span id='topic+gm_import_message'></span>

<h3>Description</h3>

<p>Import a message into the gmail mailbox from a mime message
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_import_message(
  mail,
  label_ids,
  type = c("multipart", "media", "resumable"),
  internal_date_source = c("dateHeader", "recievedTime"),
  user_id = "me"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_import_message_+3A_mail">mail</code></td>
<td>
<p>mime mail message created by mime</p>
</td></tr>
<tr><td><code id="gm_import_message_+3A_label_ids">label_ids</code></td>
<td>
<p>optional label ids to apply to the message</p>
</td></tr>
<tr><td><code id="gm_import_message_+3A_type">type</code></td>
<td>
<p>the type of upload to perform</p>
</td></tr>
<tr><td><code id="gm_import_message_+3A_internal_date_source">internal_date_source</code></td>
<td>
<p>whether to date the object based on the date of
the message or when it was received by gmail.</p>
</td></tr>
<tr><td><code id="gm_import_message_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.messages/import">https://developers.google.com/gmail/api/reference/rest/v1/users.messages/import</a>
</p>


<h3>See Also</h3>

<p>Other message: 
<code><a href="#topic+gm_attachment">gm_attachment</a>()</code>,
<code><a href="#topic+gm_delete_message">gm_delete_message</a>()</code>,
<code><a href="#topic+gm_insert_message">gm_insert_message</a>()</code>,
<code><a href="#topic+gm_messages">gm_messages</a>()</code>,
<code><a href="#topic+gm_message">gm_message</a>()</code>,
<code><a href="#topic+gm_modify_message">gm_modify_message</a>()</code>,
<code><a href="#topic+gm_save_attachments">gm_save_attachments</a>()</code>,
<code><a href="#topic+gm_save_attachment">gm_save_attachment</a>()</code>,
<code><a href="#topic+gm_send_message">gm_send_message</a>()</code>,
<code><a href="#topic+gm_trash_message">gm_trash_message</a>()</code>,
<code><a href="#topic+gm_untrash_message">gm_untrash_message</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
gm_import_message(gm_mime(
  From = "you@me.com", To = "any@one.com",
  Subject = "hello", "how are you doing?"
))

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_insert_message'>Insert a message into the gmail mailbox from a mime message</h2><span id='topic+gm_insert_message'></span>

<h3>Description</h3>

<p>Insert a message into the gmail mailbox from a mime message
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_insert_message(
  mail,
  label_ids,
  type = c("multipart", "media", "resumable"),
  internal_date_source = c("dateHeader", "recievedTime"),
  user_id = "me"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_insert_message_+3A_mail">mail</code></td>
<td>
<p>mime mail message created by mime</p>
</td></tr>
<tr><td><code id="gm_insert_message_+3A_label_ids">label_ids</code></td>
<td>
<p>optional label ids to apply to the message</p>
</td></tr>
<tr><td><code id="gm_insert_message_+3A_type">type</code></td>
<td>
<p>the type of upload to perform</p>
</td></tr>
<tr><td><code id="gm_insert_message_+3A_internal_date_source">internal_date_source</code></td>
<td>
<p>whether to date the object based on the date of
the message or when it was received by gmail.</p>
</td></tr>
<tr><td><code id="gm_insert_message_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.messages/insert">https://developers.google.com/gmail/api/reference/rest/v1/users.messages/insert</a>
</p>


<h3>See Also</h3>

<p>Other message: 
<code><a href="#topic+gm_attachment">gm_attachment</a>()</code>,
<code><a href="#topic+gm_delete_message">gm_delete_message</a>()</code>,
<code><a href="#topic+gm_import_message">gm_import_message</a>()</code>,
<code><a href="#topic+gm_messages">gm_messages</a>()</code>,
<code><a href="#topic+gm_message">gm_message</a>()</code>,
<code><a href="#topic+gm_modify_message">gm_modify_message</a>()</code>,
<code><a href="#topic+gm_save_attachments">gm_save_attachments</a>()</code>,
<code><a href="#topic+gm_save_attachment">gm_save_attachment</a>()</code>,
<code><a href="#topic+gm_send_message">gm_send_message</a>()</code>,
<code><a href="#topic+gm_trash_message">gm_trash_message</a>()</code>,
<code><a href="#topic+gm_untrash_message">gm_untrash_message</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
gm_insert_message(gm_mime(
  From = "you@me.com", To = "any@one.com",
  Subject = "hello", "how are you doing?"
))

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_label'>Get a specific label</h2><span id='topic+gm_label'></span>

<h3>Description</h3>

<p>Get a specific label by id and user_id.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_label(id, user_id = "me")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_label_+3A_id">id</code></td>
<td>
<p>label id to retrieve</p>
</td></tr>
<tr><td><code id="gm_label_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.labels/get">https://developers.google.com/gmail/api/reference/rest/v1/users.labels/get</a>
</p>


<h3>See Also</h3>

<p>Other label: 
<code><a href="#topic+gm_create_label">gm_create_label</a>()</code>,
<code><a href="#topic+gm_delete_label">gm_delete_label</a>()</code>,
<code><a href="#topic+gm_labels">gm_labels</a>()</code>,
<code><a href="#topic+gm_update_label">gm_update_label</a>()</code>
</p>

<hr>
<h2 id='gm_labels'>Get a list of all labels</h2><span id='topic+gm_labels'></span>

<h3>Description</h3>

<p>Get a list of all labels for a user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_labels(user_id = "me")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_labels_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.labels/list">https://developers.google.com/gmail/api/reference/rest/v1/users.labels/list</a>
</p>


<h3>See Also</h3>

<p>Other label: 
<code><a href="#topic+gm_create_label">gm_create_label</a>()</code>,
<code><a href="#topic+gm_delete_label">gm_delete_label</a>()</code>,
<code><a href="#topic+gm_label">gm_label</a>()</code>,
<code><a href="#topic+gm_update_label">gm_update_label</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
my_labels &lt;- gm_labels()

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_last_response'>Response from the last query</h2><span id='topic+gm_last_response'></span>

<h3>Description</h3>

<p>Response from the last query
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_last_response()
</code></pre>

<hr>
<h2 id='gm_message'>Get a single message</h2><span id='topic+gm_message'></span>

<h3>Description</h3>

<p>Function to retrieve a given message by id
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_message(
  id,
  user_id = "me",
  format = c("full", "metadata", "minimal", "raw")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_message_+3A_id">id</code></td>
<td>
<p>message id to access</p>
</td></tr>
<tr><td><code id="gm_message_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
<tr><td><code id="gm_message_+3A_format">format</code></td>
<td>
<p>format of the message returned</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.messages">https://developers.google.com/gmail/api/reference/rest/v1/users.messages</a>
</p>


<h3>See Also</h3>

<p>Other message: 
<code><a href="#topic+gm_attachment">gm_attachment</a>()</code>,
<code><a href="#topic+gm_delete_message">gm_delete_message</a>()</code>,
<code><a href="#topic+gm_import_message">gm_import_message</a>()</code>,
<code><a href="#topic+gm_insert_message">gm_insert_message</a>()</code>,
<code><a href="#topic+gm_messages">gm_messages</a>()</code>,
<code><a href="#topic+gm_modify_message">gm_modify_message</a>()</code>,
<code><a href="#topic+gm_save_attachments">gm_save_attachments</a>()</code>,
<code><a href="#topic+gm_save_attachment">gm_save_attachment</a>()</code>,
<code><a href="#topic+gm_send_message">gm_send_message</a>()</code>,
<code><a href="#topic+gm_trash_message">gm_trash_message</a>()</code>,
<code><a href="#topic+gm_untrash_message">gm_untrash_message</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
my_message &lt;- gm_message(12345)

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_messages'>Get a list of messages</h2><span id='topic+gm_messages'></span>

<h3>Description</h3>

<p>Get a list of messages possibly matching a given query string.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_messages(
  search = NULL,
  num_results = NULL,
  label_ids = NULL,
  include_spam_trash = NULL,
  page_token = NULL,
  user_id = "me"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_messages_+3A_search">search</code></td>
<td>
<p>query to use, same format as gmail search box.</p>
</td></tr>
<tr><td><code id="gm_messages_+3A_num_results">num_results</code></td>
<td>
<p>the number of results to return.</p>
</td></tr>
<tr><td><code id="gm_messages_+3A_label_ids">label_ids</code></td>
<td>
<p>restrict search to given labels</p>
</td></tr>
<tr><td><code id="gm_messages_+3A_include_spam_trash">include_spam_trash</code></td>
<td>
<p>boolean whether to include the spam and trash folders in the search</p>
</td></tr>
<tr><td><code id="gm_messages_+3A_page_token">page_token</code></td>
<td>
<p>retrieve a specific page of results</p>
</td></tr>
<tr><td><code id="gm_messages_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.messages/list">https://developers.google.com/gmail/api/reference/rest/v1/users.messages/list</a>
</p>


<h3>See Also</h3>

<p>Other message: 
<code><a href="#topic+gm_attachment">gm_attachment</a>()</code>,
<code><a href="#topic+gm_delete_message">gm_delete_message</a>()</code>,
<code><a href="#topic+gm_import_message">gm_import_message</a>()</code>,
<code><a href="#topic+gm_insert_message">gm_insert_message</a>()</code>,
<code><a href="#topic+gm_message">gm_message</a>()</code>,
<code><a href="#topic+gm_modify_message">gm_modify_message</a>()</code>,
<code><a href="#topic+gm_save_attachments">gm_save_attachments</a>()</code>,
<code><a href="#topic+gm_save_attachment">gm_save_attachment</a>()</code>,
<code><a href="#topic+gm_send_message">gm_send_message</a>()</code>,
<code><a href="#topic+gm_trash_message">gm_trash_message</a>()</code>,
<code><a href="#topic+gm_untrash_message">gm_untrash_message</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Search for R, return 10 results using label 1 including spam and trash folders
my_messages &lt;- gm_messages("R", 10, "label_1", TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_mime'>Create a mime formatted message object</h2><span id='topic+gm_mime'></span><span id='topic+gm_to.mime'></span><span id='topic+gm_from.mime'></span><span id='topic+gm_cc.mime'></span><span id='topic+gm_bcc.mime'></span><span id='topic+gm_subject.mime'></span><span id='topic+gm_text_body'></span><span id='topic+gm_html_body'></span><span id='topic+gm_attach_part'></span><span id='topic+gm_attach_file'></span>

<h3>Description</h3>

<p>These functions create a MIME message. They can be created atomically using
<code>gm_mime()</code> or iteratively using the various accessors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_mime(..., attr = NULL, body = NULL, parts = list())

## S3 method for class 'mime'
gm_to(x, val, ...)

## S3 method for class 'mime'
gm_from(x, val, ...)

## S3 method for class 'mime'
gm_cc(x, val, ...)

## S3 method for class 'mime'
gm_bcc(x, val, ...)

## S3 method for class 'mime'
gm_subject(x, val, ...)

gm_text_body(
  mime,
  body,
  content_type = "text/plain",
  charset = "utf-8",
  encoding = "quoted-printable",
  format = "flowed",
  ...
)

gm_html_body(
  mime,
  body,
  content_type = "text/html",
  charset = "utf-8",
  encoding = "base64",
  ...
)

gm_attach_part(mime, part, id = NULL, ...)

gm_attach_file(mime, filename, type = NULL, id = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_mime_+3A_...">...</code></td>
<td>
<p>additional parameters to put in the attr field</p>
</td></tr>
<tr><td><code id="gm_mime_+3A_attr">attr</code></td>
<td>
<p>attributes to pass to the message</p>
</td></tr>
<tr><td><code id="gm_mime_+3A_body">body</code></td>
<td>
<p>Message body.</p>
</td></tr>
<tr><td><code id="gm_mime_+3A_parts">parts</code></td>
<td>
<p>mime parts to pass to the message</p>
</td></tr>
<tr><td><code id="gm_mime_+3A_x">x</code></td>
<td>
<p>the object whose fields you are setting</p>
</td></tr>
<tr><td><code id="gm_mime_+3A_val">val</code></td>
<td>
<p>the value to set, can be a vector, in which case the values will be joined by &quot;, &quot;.</p>
</td></tr>
<tr><td><code id="gm_mime_+3A_mime">mime</code></td>
<td>
<p>message.</p>
</td></tr>
<tr><td><code id="gm_mime_+3A_content_type">content_type</code></td>
<td>
<p>The content type to use for the body.</p>
</td></tr>
<tr><td><code id="gm_mime_+3A_charset">charset</code></td>
<td>
<p>The character set to use for the body.</p>
</td></tr>
<tr><td><code id="gm_mime_+3A_encoding">encoding</code></td>
<td>
<p>The transfer encoding to use for the body.</p>
</td></tr>
<tr><td><code id="gm_mime_+3A_format">format</code></td>
<td>
<p>The mime format to use for the body.</p>
</td></tr>
<tr><td><code id="gm_mime_+3A_part">part</code></td>
<td>
<p>Message part to attach</p>
</td></tr>
<tr><td><code id="gm_mime_+3A_id">id</code></td>
<td>
<p>The content ID of the attachment</p>
</td></tr>
<tr><td><code id="gm_mime_+3A_filename">filename</code></td>
<td>
<p>name of file to attach</p>
</td></tr>
<tr><td><code id="gm_mime_+3A_type">type</code></td>
<td>
<p>mime type of the attached file</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># using the field functions
msg &lt;- gm_mime() |&gt;
  gm_from("james.f.hester@gmail.com") |&gt;
  gm_to("asdf@asdf.com") |&gt;
  gm_text_body("Test Message")

# alternatively you can set the fields using gm_mime(), however you have
#  to use properly formatted MIME names
msg &lt;- gm_mime(
  From = "james.f.hester@gmail.com",
  To = "asdf@asdf.com"
) |&gt;
  gm_html_body("&lt;b&gt;Test&lt;\b&gt; Message")
</code></pre>

<hr>
<h2 id='gm_modify_message'>Modify the labels on a message</h2><span id='topic+gm_modify_message'></span>

<h3>Description</h3>

<p>Function to modify the labels on a given message by id.  Note you need to
use the label ID as arguments to this function, not the label name.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_modify_message(id, add_labels = NULL, remove_labels = NULL, user_id = "me")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_modify_message_+3A_id">id</code></td>
<td>
<p>message id to access</p>
</td></tr>
<tr><td><code id="gm_modify_message_+3A_add_labels">add_labels</code></td>
<td>
<p>label IDs to add to the specified message</p>
</td></tr>
<tr><td><code id="gm_modify_message_+3A_remove_labels">remove_labels</code></td>
<td>
<p>label IDs to remove from the specified message</p>
</td></tr>
<tr><td><code id="gm_modify_message_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.messages/modify">https://developers.google.com/gmail/api/reference/rest/v1/users.messages/modify</a>
</p>


<h3>See Also</h3>

<p>Other message: 
<code><a href="#topic+gm_attachment">gm_attachment</a>()</code>,
<code><a href="#topic+gm_delete_message">gm_delete_message</a>()</code>,
<code><a href="#topic+gm_import_message">gm_import_message</a>()</code>,
<code><a href="#topic+gm_insert_message">gm_insert_message</a>()</code>,
<code><a href="#topic+gm_messages">gm_messages</a>()</code>,
<code><a href="#topic+gm_message">gm_message</a>()</code>,
<code><a href="#topic+gm_save_attachments">gm_save_attachments</a>()</code>,
<code><a href="#topic+gm_save_attachment">gm_save_attachment</a>()</code>,
<code><a href="#topic+gm_send_message">gm_send_message</a>()</code>,
<code><a href="#topic+gm_trash_message">gm_trash_message</a>()</code>,
<code><a href="#topic+gm_untrash_message">gm_untrash_message</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
gm_modify_message(12345, add_labels = "label_1")
gm_modify_message(12345, remove_labels = "label_1")
# add and remove at the same time
gm_modify_message(12345, add_labels = "label_2", remove_labels = "label_1")

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_modify_thread'>Modify the labels on a thread</h2><span id='topic+gm_modify_thread'></span>

<h3>Description</h3>

<p>Function to modify the labels on a given thread by id.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_modify_thread(
  id,
  add_labels = character(0),
  remove_labels = character(0),
  user_id = "me"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_modify_thread_+3A_id">id</code></td>
<td>
<p>thread id to access</p>
</td></tr>
<tr><td><code id="gm_modify_thread_+3A_add_labels">add_labels</code></td>
<td>
<p>labels to add to the specified thread</p>
</td></tr>
<tr><td><code id="gm_modify_thread_+3A_remove_labels">remove_labels</code></td>
<td>
<p>labels to remove from the specified thread</p>
</td></tr>
<tr><td><code id="gm_modify_thread_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.threads/modify">https://developers.google.com/gmail/api/reference/rest/v1/users.threads/modify</a>
</p>


<h3>See Also</h3>

<p>Other thread: 
<code><a href="#topic+gm_delete_thread">gm_delete_thread</a>()</code>,
<code><a href="#topic+gm_threads">gm_threads</a>()</code>,
<code><a href="#topic+gm_thread">gm_thread</a>()</code>,
<code><a href="#topic+gm_trash_thread">gm_trash_thread</a>()</code>,
<code><a href="#topic+gm_untrash_thread">gm_untrash_thread</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
gm_modify_thread(12345, add_labels = "label_1")
gm_modify_thread(12345, remove_labels = "label_1")
# add and remove at the same time
gm_modify_thread(12345, add_labels = "label_2", remove_labels = "label_1")

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_oauth_app'>Get currently configured OAuth app (deprecated)</h2><span id='topic+gm_oauth_app'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
</p>
<p>In light of the new <code><a href="gargle.html#topic+gargle_oauth_client_from_json">gargle::gargle_oauth_client()</a></code> constructor and class of
the same name, <code>gm_oauth_app()</code> is being replaced by <code><a href="#topic+gm_oauth_client">gm_oauth_client()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_oauth_app()
</code></pre>

<hr>
<h2 id='gm_profile'>Get info on current gmail profile</h2><span id='topic+gm_profile'></span>

<h3>Description</h3>

<p>Reveals information about the profile associated with the current token.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_profile(user_id = "me", verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_profile_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
<tr><td><code id="gm_profile_+3A_verbose">verbose</code></td>
<td>
<p>Logical, indicating whether to print informative messages
(default <code>TRUE</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of class <code>gmail_profile</code>.
</p>


<h3>See Also</h3>

<p>Wraps the <code>getProfile</code> endpoint:
</p>

<ul>
<li> <p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users/getProfile">https://developers.google.com/gmail/api/reference/rest/v1/users/getProfile</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
gm_profile()

## more info is returned than is printed
prof &lt;- gm_profile()
prof[["historyId"]]

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_save_attachment'>Save the attachment to a file</h2><span id='topic+gm_save_attachment'></span>

<h3>Description</h3>

<p>This is a low level function that only works on attachments retrieved with <code><a href="#topic+gm_attachment">gm_attachment()</a></code>.
To save an attachment directly from a message see <code><a href="#topic+gm_save_attachments">gm_save_attachments()</a></code>,
which is a higher level interface more suitable for most uses.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_save_attachment(x, filename)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_save_attachment_+3A_x">x</code></td>
<td>
<p>attachment to save</p>
</td></tr>
<tr><td><code id="gm_save_attachment_+3A_filename">filename</code></td>
<td>
<p>location to save to</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other message: 
<code><a href="#topic+gm_attachment">gm_attachment</a>()</code>,
<code><a href="#topic+gm_delete_message">gm_delete_message</a>()</code>,
<code><a href="#topic+gm_import_message">gm_import_message</a>()</code>,
<code><a href="#topic+gm_insert_message">gm_insert_message</a>()</code>,
<code><a href="#topic+gm_messages">gm_messages</a>()</code>,
<code><a href="#topic+gm_message">gm_message</a>()</code>,
<code><a href="#topic+gm_modify_message">gm_modify_message</a>()</code>,
<code><a href="#topic+gm_save_attachments">gm_save_attachments</a>()</code>,
<code><a href="#topic+gm_send_message">gm_send_message</a>()</code>,
<code><a href="#topic+gm_trash_message">gm_trash_message</a>()</code>,
<code><a href="#topic+gm_untrash_message">gm_untrash_message</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
my_attachment &lt;- gm_attachment("a32e324b", "12345")
# save attachment to a file
gm_save_attachment(my_attachment, "photo.jpg")

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_save_attachments'>Save attachments to a message</h2><span id='topic+gm_save_attachments'></span>

<h3>Description</h3>

<p>Function to retrieve and save all of the attachments to a message by id of the message.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_save_attachments(x, attachment_id = NULL, path = ".", user_id = "me")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_save_attachments_+3A_x">x</code></td>
<td>
<p>message with attachment</p>
</td></tr>
<tr><td><code id="gm_save_attachments_+3A_attachment_id">attachment_id</code></td>
<td>
<p>id of the attachment to save, if none specified saves all attachments</p>
</td></tr>
<tr><td><code id="gm_save_attachments_+3A_path">path</code></td>
<td>
<p>where to save the attachments</p>
</td></tr>
<tr><td><code id="gm_save_attachments_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.messages.attachments/get">https://developers.google.com/gmail/api/reference/rest/v1/users.messages.attachments/get</a>
</p>


<h3>See Also</h3>

<p>Other message: 
<code><a href="#topic+gm_attachment">gm_attachment</a>()</code>,
<code><a href="#topic+gm_delete_message">gm_delete_message</a>()</code>,
<code><a href="#topic+gm_import_message">gm_import_message</a>()</code>,
<code><a href="#topic+gm_insert_message">gm_insert_message</a>()</code>,
<code><a href="#topic+gm_messages">gm_messages</a>()</code>,
<code><a href="#topic+gm_message">gm_message</a>()</code>,
<code><a href="#topic+gm_modify_message">gm_modify_message</a>()</code>,
<code><a href="#topic+gm_save_attachment">gm_save_attachment</a>()</code>,
<code><a href="#topic+gm_send_message">gm_send_message</a>()</code>,
<code><a href="#topic+gm_trash_message">gm_trash_message</a>()</code>,
<code><a href="#topic+gm_untrash_message">gm_untrash_message</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# save all attachments
gm_save_attachments(my_message)
# save a specific attachment
gm_save_attachments(my_message, "a32e324b")

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_scopes'>Produce scopes specific to the Gmail API</h2><span id='topic+gm_scopes'></span>

<h3>Description</h3>

<p>When called with no arguments, <code>gm_scopes()</code> returns a named character vector
of scopes associated with the Gmail API. If <code>gm_scopes(scopes =)</code> is given,
an abbreviated entry such as <code>"gmail.readonly"</code> is expanded to a full scope
(<code>"https://www.googleapis.com/auth/gmail.readonly"</code> in this case).
Unrecognized scopes are passed through unchanged.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_scopes(scopes = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_scopes_+3A_scopes">scopes</code></td>
<td>
<p>One or more API scopes. Each scope can be specified in full or,
for Gmail API-specific scopes, in an abbreviated form that is recognized by
<code><a href="#topic+gm_scopes">gm_scopes()</a></code>:
</p>

<ul>
<li><p> &quot;full&quot; = &quot;https://mail.google.com/&quot; (the default)
</p>
</li>
<li><p> &quot;gmail.compose&quot; = &quot;https://www.googleapis.com/auth/gmail.compose&quot;
</p>
</li>
<li><p> &quot;gmail.readonly&quot; = &quot;https://www.googleapis.com/auth/gmail.readonly&quot;
</p>
</li>
<li><p> &quot;gmail.labels&quot; = &quot;https://www.googleapis.com/auth/gmail.labels&quot;
</p>
</li>
<li><p> &quot;gmail.send&quot; = &quot;https://www.googleapis.com/auth/gmail.send&quot;
</p>
</li>
<li><p> &quot;gmail.insert&quot; = &quot;https://www.googleapis.com/auth/gmail.insert&quot;
</p>
</li>
<li><p> &quot;gmail.modify&quot; = &quot;https://www.googleapis.com/auth/gmail.modify&quot;
</p>
</li>
<li><p> &quot;gmail.metadata&quot; = &quot;https://www.googleapis.com/auth/gmail.metadata&quot;
</p>
</li>
<li><p> &quot;gmail.settings_basic&quot; = &quot;https://www.googleapis.com/auth/gmail.settings.basic&quot;
</p>
</li>
<li><p> &quot;gmail.settings_sharing&quot; = &quot;https://www.googleapis.com/auth/gmail.settings.sharing&quot;
</p>
</li></ul>

<p>See <a href="https://developers.google.com/gmail/api/auth/scopes">https://developers.google.com/gmail/api/auth/scopes</a> for details on the
permissions for each scope.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of scopes.
</p>


<h3>See Also</h3>

<p><a href="https://developers.google.com/gmail/api/auth/scopes">https://developers.google.com/gmail/api/auth/scopes</a> for details on
the permissions for each scope.
</p>
<p>Other auth functions: 
<code><a href="#topic+gm_auth_configure">gm_auth_configure</a>()</code>,
<code><a href="#topic+gm_auth">gm_auth</a>()</code>,
<code><a href="#topic+gm_deauth">gm_deauth</a>()</code>,
<code><a href="#topic+gmailr-configuration">gmailr-configuration</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gm_scopes("full")
gm_scopes("gmail.readonly")
gm_scopes()
</code></pre>

<hr>
<h2 id='gm_send_draft'>Send a draft</h2><span id='topic+gm_send_draft'></span>

<h3>Description</h3>

<p>Send a draft to the recipients in the To, CC, and Bcc headers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_send_draft(draft, user_id = "me")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_send_draft_+3A_draft">draft</code></td>
<td>
<p>the draft to send</p>
</td></tr>
<tr><td><code id="gm_send_draft_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.drafts/send">https://developers.google.com/gmail/api/reference/rest/v1/users.drafts/send</a>
</p>


<h3>See Also</h3>

<p>Other draft: 
<code><a href="#topic+gm_delete_draft">gm_delete_draft</a>()</code>,
<code><a href="#topic+gm_drafts">gm_drafts</a>()</code>,
<code><a href="#topic+gm_draft">gm_draft</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
draft &lt;- gm_create_draft(gm_mime(
  From = "you@me.com", To = "any@one.com",
  Subject = "hello", "how are you doing?"
))
gm_send_draft(draft)

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_send_message'>Send a message from a mime message</h2><span id='topic+gm_send_message'></span>

<h3>Description</h3>

<p>Send a message from a mime message
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_send_message(
  mail,
  type = c("multipart", "media", "resumable"),
  thread_id = NULL,
  user_id = "me"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_send_message_+3A_mail">mail</code></td>
<td>
<p>mime mail message created by mime</p>
</td></tr>
<tr><td><code id="gm_send_message_+3A_type">type</code></td>
<td>
<p>the type of upload to perform</p>
</td></tr>
<tr><td><code id="gm_send_message_+3A_thread_id">thread_id</code></td>
<td>
<p>the id of the thread to send from.</p>
</td></tr>
<tr><td><code id="gm_send_message_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.messages/send">https://developers.google.com/gmail/api/reference/rest/v1/users.messages/send</a>
</p>


<h3>See Also</h3>

<p>Other message: 
<code><a href="#topic+gm_attachment">gm_attachment</a>()</code>,
<code><a href="#topic+gm_delete_message">gm_delete_message</a>()</code>,
<code><a href="#topic+gm_import_message">gm_import_message</a>()</code>,
<code><a href="#topic+gm_insert_message">gm_insert_message</a>()</code>,
<code><a href="#topic+gm_messages">gm_messages</a>()</code>,
<code><a href="#topic+gm_message">gm_message</a>()</code>,
<code><a href="#topic+gm_modify_message">gm_modify_message</a>()</code>,
<code><a href="#topic+gm_save_attachments">gm_save_attachments</a>()</code>,
<code><a href="#topic+gm_save_attachment">gm_save_attachment</a>()</code>,
<code><a href="#topic+gm_trash_message">gm_trash_message</a>()</code>,
<code><a href="#topic+gm_untrash_message">gm_untrash_message</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
gm_send_message(gm_mime(
  from = "you@me.com", to = "any@one.com",
  subject = "hello", "how are you doing?"
))

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_thread'>Get a single thread</h2><span id='topic+gm_thread'></span>

<h3>Description</h3>

<p>Function to retrieve a given thread by id
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_thread(id, user_id = "me")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_thread_+3A_id">id</code></td>
<td>
<p>thread id to access</p>
</td></tr>
<tr><td><code id="gm_thread_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.threads">https://developers.google.com/gmail/api/reference/rest/v1/users.threads</a>
</p>


<h3>See Also</h3>

<p>Other thread: 
<code><a href="#topic+gm_delete_thread">gm_delete_thread</a>()</code>,
<code><a href="#topic+gm_modify_thread">gm_modify_thread</a>()</code>,
<code><a href="#topic+gm_threads">gm_threads</a>()</code>,
<code><a href="#topic+gm_trash_thread">gm_trash_thread</a>()</code>,
<code><a href="#topic+gm_untrash_thread">gm_untrash_thread</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
my_thread &lt;- gm_thread(12345)

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_threads'>Get a list of threads</h2><span id='topic+gm_threads'></span>

<h3>Description</h3>

<p>Get a list of threads possibly matching a given query string.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_threads(
  search = NULL,
  num_results = NULL,
  page_token = NULL,
  label_ids = NULL,
  include_spam_trash = NULL,
  user_id = "me"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_threads_+3A_search">search</code></td>
<td>
<p>query to use, same format as gmail search box.</p>
</td></tr>
<tr><td><code id="gm_threads_+3A_num_results">num_results</code></td>
<td>
<p>the number of results to return.</p>
</td></tr>
<tr><td><code id="gm_threads_+3A_page_token">page_token</code></td>
<td>
<p>retrieve a specific page of results</p>
</td></tr>
<tr><td><code id="gm_threads_+3A_label_ids">label_ids</code></td>
<td>
<p>restrict search to given labels</p>
</td></tr>
<tr><td><code id="gm_threads_+3A_include_spam_trash">include_spam_trash</code></td>
<td>
<p>boolean whether to include the spam and trash folders in the search</p>
</td></tr>
<tr><td><code id="gm_threads_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.threads/list">https://developers.google.com/gmail/api/reference/rest/v1/users.threads/list</a>
</p>


<h3>See Also</h3>

<p>Other thread: 
<code><a href="#topic+gm_delete_thread">gm_delete_thread</a>()</code>,
<code><a href="#topic+gm_modify_thread">gm_modify_thread</a>()</code>,
<code><a href="#topic+gm_thread">gm_thread</a>()</code>,
<code><a href="#topic+gm_trash_thread">gm_trash_thread</a>()</code>,
<code><a href="#topic+gm_untrash_thread">gm_untrash_thread</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
my_threads &lt;- gm_threads()

first_10_threads &lt;- gm_threads(10)

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_to'>Methods to get values from message or drafts</h2><span id='topic+gm_to'></span><span id='topic+gm_from'></span><span id='topic+gm_cc'></span><span id='topic+gm_bcc'></span><span id='topic+gm_date'></span><span id='topic+gm_subject'></span>

<h3>Description</h3>

<p>Methods to get values from message or drafts
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_to(x, ...)

gm_from(x, ...)

gm_cc(x, ...)

gm_bcc(x, ...)

gm_date(x, ...)

gm_subject(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_to_+3A_x">x</code></td>
<td>
<p>the object from which to get or set the field</p>
</td></tr>
<tr><td><code id="gm_to_+3A_...">...</code></td>
<td>
<p>other parameters passed to methods</p>
</td></tr>
</table>

<hr>
<h2 id='gm_token'>Produce configured token</h2><span id='topic+gm_token'></span>

<h3>Description</h3>

<p>For internal use or for those programming around the Gmail API.
Returns a token pre-processed with <code><a href="httr.html#topic+config">httr::config()</a></code>. Most users
do not need to handle tokens &quot;by hand&quot; or, even if they need some
control, <code><a href="#topic+gm_auth">gm_auth()</a></code> is what they need. If there is no current
token, <code><a href="#topic+gm_auth">gm_auth()</a></code> is called to either load from cache or
initiate OAuth2.0 flow.
If auth has been deactivated via <code><a href="#topic+gm_deauth">gm_deauth()</a></code>, <code>gm_token()</code>
returns <code>NULL</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_token()
</code></pre>


<h3>Value</h3>

<p>A <code>request</code> object (an S3 class provided by <a href="httr.html#topic+httr-package">httr</a>).
</p>


<h3>See Also</h3>

<p>Other low-level API functions: 
<code><a href="#topic+gm_has_token">gm_has_token</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
gm_token()

</code></pre>

<hr>
<h2 id='gm_token_write'>Write/read a gmailr user token</h2><span id='topic+gm_token_write'></span><span id='topic+gm_token_read'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>This pair of functions writes an OAuth2 user token to file and reads it back
in. This is rarely necessary when working in your primary, interactive
computing environment. In that setting, it is recommended to lean into the
automatic token caching built-in to gmailr / gargle. However, when preparing
a user token for use elsewhere, such as in CI or in a deployed data product,
it can be useful to take the full control granted by <code>gm_token_write()</code> and
<code>gm_token_read()</code>.
</p>
<p>Below is an outline of the intended workflow, but you will need to fill in
particulars, such as filepaths and environment variables:
</p>

<ul>
<li><p> Do auth in your primary, interactive environment as the target user, with
the desired OAuth client and scopes.
</p>
<div class="sourceCode r"><pre>gm_auth_configure()
gm_auth("jane@example.com", cache = FALSE)
</pre></div>
</li>
<li><p> Confirm you are logged in as the intended user:
</p>
<div class="sourceCode r"><pre>gm_profile()
</pre></div>
</li>
<li><p> Write the current token to file:
</p>
<div class="sourceCode r"><pre>gm_token_write(
  path = "path/to/gmailr-token.rds",
  key = "GMAILR_KEY"
)
</pre></div>
</li>
<li><p> In the deployed, non-interactive setting, read the token from file and
tell gmailr to use it:
</p>
<div class="sourceCode r"><pre>gm_auth(token = gm_token_read(
  path = "path/to/gmailr-token.rds",
  key = "GMAILR_KEY"
)
</pre></div>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>gm_token_write(token = gm_token(), path = "gmailr-token.rds", key = NULL)

gm_token_read(path = "gmailr-token.rds", key = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_token_write_+3A_token">token</code></td>
<td>
<p>A token with class <a href="httr.html#topic+Token-class">Token2.0</a> or an object of
httr's class <code>request</code>, i.e. a token that has been prepared with
<code><a href="httr.html#topic+config">httr::config()</a></code> and has a <a href="httr.html#topic+Token-class">Token2.0</a> in the
<code>auth_token</code> component.</p>
</td></tr>
<tr><td><code id="gm_token_write_+3A_path">path</code></td>
<td>
<p>The path to write to (<code>gm_token_write()</code>) or to read from
(<code>gm_token_read()</code>).</p>
</td></tr>
<tr><td><code id="gm_token_write_+3A_key">key</code></td>
<td>
<p>Encryption key, as implemented by httr2's <a href="https://httr2.r-lib.org/reference/secrets.html">secret functions</a>. If absent, a
built-in <code>key</code> is used. If supplied, the <code>key</code> should usually be the name
of an environment variable whose value was generated with
<code>gargle::secret_make_key()</code> (which is a copy of
<code>httr2::secret_make_key()</code>). The <code>key</code> argument of <code>gm_token_read()</code> must
match the <code>key</code> used in <code>gm_token_write()</code>.</p>
</td></tr>
</table>


<h3>Security</h3>

<p><code>gm_token_write()</code> and <code>gm_token_read()</code> have a more security-oriented
implementation than the default token caching strategy. OAuth2 user tokens
are somewhat opaque by definition, because they aren't written to file in a
particularly transparent format. However, <code>gm_token_write()</code> always applies
some additional obfuscation to make such credentials even more resilient
against scraping by an automated tool. However, a knowledgeable R programmer
could decode the credential with some effort. The default behaviour of
<code>gm_token_write()</code> (called without <code>key</code>) is suitable for tokens stored in a
relatively secure place, such as on Posit Connect within your organization.
</p>
<p>To prepare a stored credential for exposure in a more public setting, such as
on GitHub or CRAN, you must actually encrypt it, using a <code>key</code> known only to
you. You must make the encryption <code>key</code> available via a secure environment
variable in any setting where you wish to decrypt and use the token, such as
on GitHub Actions.
</p>

<hr>
<h2 id='gm_trash_message'>Send a single message to the trash</h2><span id='topic+gm_trash_message'></span>

<h3>Description</h3>

<p>Function to trash a given message by id.  This can be undone by <code><a href="#topic+gm_untrash_message">gm_untrash_message()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_trash_message(id, user_id = "me")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_trash_message_+3A_id">id</code></td>
<td>
<p>message id to access</p>
</td></tr>
<tr><td><code id="gm_trash_message_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.messages/trash">https://developers.google.com/gmail/api/reference/rest/v1/users.messages/trash</a>
</p>


<h3>See Also</h3>

<p>Other message: 
<code><a href="#topic+gm_attachment">gm_attachment</a>()</code>,
<code><a href="#topic+gm_delete_message">gm_delete_message</a>()</code>,
<code><a href="#topic+gm_import_message">gm_import_message</a>()</code>,
<code><a href="#topic+gm_insert_message">gm_insert_message</a>()</code>,
<code><a href="#topic+gm_messages">gm_messages</a>()</code>,
<code><a href="#topic+gm_message">gm_message</a>()</code>,
<code><a href="#topic+gm_modify_message">gm_modify_message</a>()</code>,
<code><a href="#topic+gm_save_attachments">gm_save_attachments</a>()</code>,
<code><a href="#topic+gm_save_attachment">gm_save_attachment</a>()</code>,
<code><a href="#topic+gm_send_message">gm_send_message</a>()</code>,
<code><a href="#topic+gm_untrash_message">gm_untrash_message</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
gm_trash_message("12345")

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_trash_thread'>Send a single thread to the trash</h2><span id='topic+gm_trash_thread'></span>

<h3>Description</h3>

<p>Function to trash a given thread by id.  This can be undone by <code><a href="#topic+gm_untrash_thread">gm_untrash_thread()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_trash_thread(id, user_id = "me")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_trash_thread_+3A_id">id</code></td>
<td>
<p>thread id to access</p>
</td></tr>
<tr><td><code id="gm_trash_thread_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.threads/trash">https://developers.google.com/gmail/api/reference/rest/v1/users.threads/trash</a>
</p>


<h3>See Also</h3>

<p>Other thread: 
<code><a href="#topic+gm_delete_thread">gm_delete_thread</a>()</code>,
<code><a href="#topic+gm_modify_thread">gm_modify_thread</a>()</code>,
<code><a href="#topic+gm_threads">gm_threads</a>()</code>,
<code><a href="#topic+gm_thread">gm_thread</a>()</code>,
<code><a href="#topic+gm_untrash_thread">gm_untrash_thread</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
gm_trash_thread(12345)

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_untrash_message'>Remove a single message from the trash</h2><span id='topic+gm_untrash_message'></span>

<h3>Description</h3>

<p>Function to trash a given message by id.  This can be undone by <code><a href="#topic+gm_untrash_message">gm_untrash_message()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_untrash_message(id, user_id = "me")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_untrash_message_+3A_id">id</code></td>
<td>
<p>message id to access</p>
</td></tr>
<tr><td><code id="gm_untrash_message_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.messages/trash">https://developers.google.com/gmail/api/reference/rest/v1/users.messages/trash</a>
</p>


<h3>See Also</h3>

<p>Other message: 
<code><a href="#topic+gm_attachment">gm_attachment</a>()</code>,
<code><a href="#topic+gm_delete_message">gm_delete_message</a>()</code>,
<code><a href="#topic+gm_import_message">gm_import_message</a>()</code>,
<code><a href="#topic+gm_insert_message">gm_insert_message</a>()</code>,
<code><a href="#topic+gm_messages">gm_messages</a>()</code>,
<code><a href="#topic+gm_message">gm_message</a>()</code>,
<code><a href="#topic+gm_modify_message">gm_modify_message</a>()</code>,
<code><a href="#topic+gm_save_attachments">gm_save_attachments</a>()</code>,
<code><a href="#topic+gm_save_attachment">gm_save_attachment</a>()</code>,
<code><a href="#topic+gm_send_message">gm_send_message</a>()</code>,
<code><a href="#topic+gm_trash_message">gm_trash_message</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
gm_untrash_message("12345")

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_untrash_thread'>Remove a single thread from the trash.</h2><span id='topic+gm_untrash_thread'></span>

<h3>Description</h3>

<p>Function to untrash a given thread by id.  This can reverse the results of a previous <code><a href="#topic+gm_trash_thread">gm_trash_thread()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_untrash_thread(id, user_id = "me")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_untrash_thread_+3A_id">id</code></td>
<td>
<p>thread id to access</p>
</td></tr>
<tr><td><code id="gm_untrash_thread_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.threads/untrash">https://developers.google.com/gmail/api/reference/rest/v1/users.threads/untrash</a>
</p>


<h3>See Also</h3>

<p>Other thread: 
<code><a href="#topic+gm_delete_thread">gm_delete_thread</a>()</code>,
<code><a href="#topic+gm_modify_thread">gm_modify_thread</a>()</code>,
<code><a href="#topic+gm_threads">gm_threads</a>()</code>,
<code><a href="#topic+gm_thread">gm_thread</a>()</code>,
<code><a href="#topic+gm_trash_thread">gm_trash_thread</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
gm_untrash_thread(12345)

## End(Not run)
</code></pre>

<hr>
<h2 id='gm_update_label'>Update a existing label.</h2><span id='topic+gm_update_label'></span><span id='topic+gm_update_label_patch'></span>

<h3>Description</h3>

<p>Get a specific label by id and user_id. <code>gm_update_label_patch()</code> is
identical to <code>gm_update_label()</code> but the latter uses <a href="https://datatracker.ietf.org/doc/html/rfc5789">HTTP PATCH</a> to allow partial
update.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_update_label(id, label, user_id = "me")

gm_update_label_patch(id, label, user_id = "me")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gm_update_label_+3A_id">id</code></td>
<td>
<p>label id to update</p>
</td></tr>
<tr><td><code id="gm_update_label_+3A_label">label</code></td>
<td>
<p>the label fields to update</p>
</td></tr>
<tr><td><code id="gm_update_label_+3A_user_id">user_id</code></td>
<td>
<p>gmail user_id to access, special value of 'me' indicates the authenticated user.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.labels/update">https://developers.google.com/gmail/api/reference/rest/v1/users.labels/update</a>
</p>
<p><a href="https://developers.google.com/gmail/api/reference/rest/v1/users.labels/patch">https://developers.google.com/gmail/api/reference/rest/v1/users.labels/patch</a>
</p>


<h3>See Also</h3>

<p>Other label: 
<code><a href="#topic+gm_create_label">gm_create_label</a>()</code>,
<code><a href="#topic+gm_delete_label">gm_delete_label</a>()</code>,
<code><a href="#topic+gm_labels">gm_labels</a>()</code>,
<code><a href="#topic+gm_label">gm_label</a>()</code>
</p>
<p>Other label: 
<code><a href="#topic+gm_create_label">gm_create_label</a>()</code>,
<code><a href="#topic+gm_delete_label">gm_delete_label</a>()</code>,
<code><a href="#topic+gm_labels">gm_labels</a>()</code>,
<code><a href="#topic+gm_label">gm_label</a>()</code>
</p>

<hr>
<h2 id='gmailr-configuration'>Configuring gmailr</h2><span id='topic+gmailr-configuration'></span><span id='topic+gm_default_email'></span><span id='topic+gm_default_oauth_client'></span>

<h3>Description</h3>

<p>gmailr can be configured with various environment variables, which are
accessed through wrapper functions that provide some additional smarts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gm_default_email()

gm_default_oauth_client()
</code></pre>


<h3><code>gm_default_email()</code></h3>

<p><code>gm_default_email()</code> returns the environment variable <code>GMAILR_EMAIL</code>, if it
exists, and <code><a href="gargle.html#topic+gargle_options">gargle::gargle_oauth_email()</a></code>, otherwise.
</p>


<h3><code>gm_default_oauth_client()</code></h3>

<p><code>gm_default_oauth_client()</code> consults a specific set of locations, looking for
the filepath for the JSON file that represents an OAuth client. This file can
be downloaded from the APIs &amp; Services section of the Google Cloud console
<a href="https://console.cloud.google.com">https://console.cloud.google.com</a>). The search unfolds like so:
</p>

<ul>
<li> <p><code>GMAILR_OAUTH_CLIENT</code> environment variable: If defined, it is assumed to be
the path to the target JSON file.
</p>
</li>
<li><p> A <code>.json</code> file found in the directory returned by
<code>rappdirs::user_data_dir("gmailr")</code>, whose filename uniquely matches the
regular expression <code>"client_secret.+[.]json$"</code>.
</p>
</li>
<li> <p><code>GMAILR_APP</code> environment variable: This is supported for backwards
compatibility, but it is preferable to store the JSON below
<code>rappdirs::user_data_dir("gmailr")</code> or to store the path in the
<code>GMAILR_OAUTH_CLIENT</code> environment variable.
</p>
</li></ul>

<p>Here's an inspirational snippet to move the JSON file you downloaded into the
right place for auto-discovery by <code>gm_auth_configure()</code>:
</p>
<div class="sourceCode r"><pre>path_old &lt;- "~/Downloads/client_secret_123-abc.apps.googleusercontent.com.json"
d &lt;- fs::dir_create(rappdirs::user_data_dir("gmailr"), recurse = TRUE)
fs::file_move(path_old, d)
</pre></div>


<h3>See Also</h3>

<p>Since gmailr uses the gargle package to handle auth, gargle's
configuration is also relevant, which is mostly accomplished through
<a href="gargle.html#topic+gargle_options">options and associated accessor functions</a>.
</p>
<p>Other auth functions: 
<code><a href="#topic+gm_auth_configure">gm_auth_configure</a>()</code>,
<code><a href="#topic+gm_auth">gm_auth</a>()</code>,
<code><a href="#topic+gm_deauth">gm_deauth</a>()</code>,
<code><a href="#topic+gm_scopes">gm_scopes</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gm_default_email()

withr::with_envvar(
  c(GMAILR_EMAIL = "jenny@example.com"),
  gm_default_email()
)

gm_default_oauth_client()

withr::with_envvar(
  c(GMAILR_OAUTH_CLIENT = "path/to/my-client.json"),
  gm_default_oauth_client()
)
</code></pre>

<hr>
<h2 id='gmailr-deprecated'>Deprecated functions</h2><span id='topic+gmailr-deprecated'></span><span id='topic+id'></span><span id='topic+to'></span><span id='topic+from'></span><span id='topic+cc'></span><span id='topic+bcc'></span><span id='topic+date'></span><span id='topic+subject'></span><span id='topic+body'></span><span id='topic+message'></span><span id='topic+messages'></span><span id='topic+trash_message'></span><span id='topic+untrash_message'></span><span id='topic+delete_message'></span><span id='topic+modify_message'></span><span id='topic+attachment'></span><span id='topic+save_attachment'></span><span id='topic+save_attachments'></span><span id='topic+insert_message'></span><span id='topic+import_message'></span><span id='topic+send_message'></span><span id='topic+threads'></span><span id='topic+thread'></span><span id='topic+trash_thread'></span><span id='topic+untrash_thread'></span><span id='topic+delete_thread'></span><span id='topic+modify_thread'></span><span id='topic+draft'></span><span id='topic+drafts'></span><span id='topic+create_draft'></span><span id='topic+send_draft'></span><span id='topic+labels'></span><span id='topic+label'></span><span id='topic+update_label'></span><span id='topic+update_label_patch'></span><span id='topic+delete_label'></span><span id='topic+create_label'></span><span id='topic+history'></span><span id='topic+mime'></span><span id='topic+text_body'></span><span id='topic+html_body'></span><span id='topic+attach_part'></span><span id='topic+attach_file'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
</p>
<p>All of these functions have been renamed, by adding a <code>gm_</code> prefix. This is
to eliminate name conflicts with other packages (including the base package).
Starting with gmailr 1.0.0 (released 2019-08-23), the deprecated functions
generated a warning. As of gmailr 2.0.0, they generate an error and they will
be completely removed in a future release.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>id(x, ...)

to(x, ...)

from(x, ...)

cc(x, ...)

bcc(x, ...)

date(x, ...)

subject(x, ...)

body(x, ...)

message(...)

messages(...)

trash_message(...)

untrash_message(...)

delete_message(...)

modify_message(...)

attachment(...)

save_attachment(...)

save_attachments(...)

insert_message(...)

import_message(...)

send_message(...)

threads(...)

thread(...)

trash_thread(...)

untrash_thread(...)

delete_thread(...)

modify_thread(...)

draft(...)

drafts(...)

create_draft(...)

send_draft(...)

labels(...)

label(...)

update_label(...)

update_label_patch(...)

delete_label(...)

create_label(...)

history(...)

mime(...)

text_body(...)

html_body(...)

attach_part(...)

attach_file(...)
</code></pre>

<hr>
<h2 id='gmailr-deprecated-auth'>Deprecated auth</h2><span id='topic+gmailr-deprecated-auth'></span><span id='topic+clear_token'></span><span id='topic+gmail_auth'></span><span id='topic+use_secret_file'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
</p>
<p>These functions are deprecated and no longer work.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clear_token()

gmail_auth(
  scope = c("read_only", "modify", "compose", "full"),
  id = the$id,
  secret = the$secret,
  secret_file = NULL
)

use_secret_file(filename)
</code></pre>

<hr>
<h2 id='quoted_printable_encode'>Encode text using quoted printable</h2><span id='topic+quoted_printable_encode'></span>

<h3>Description</h3>

<p>Does no do any line wrapping of the output to 76 characters
Implementation derived from the perl MIME::QuotedPrint
</p>


<h3>Usage</h3>

<pre><code class='language-R'>quoted_printable_encode(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="quoted_printable_encode_+3A_data">data</code></td>
<td>
<p>data to encode</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="http://search.cpan.org/~gaas/MIME-Base64-3.14/QuotedPrint.pm">http://search.cpan.org/~gaas/MIME-Base64-3.14/QuotedPrint.pm</a>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
