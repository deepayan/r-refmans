<!DOCTYPE html><html lang="en"><head><title>Help for package fedstatAPIr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {fedstatAPIr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#fedstatAPIr-package'><p>fedstatAPIr: Unofficial API for Fedstat (Rosstat EMISS System) for Automatic and Efficient Data Queries</p></a></li>
<li><a href='#fedstat_data_ids_filter'><p>Filters <code>data_ids</code> based on <code>filters</code> that are given in JSON format</p></a></li>
<li><a href='#fedstat_data_load_with_filters'><p>Download subset of indicator data from fedstat.ru by specifying filters in JSON</p></a></li>
<li><a href='#fedstat_get_data_ids'><p>Get data filters ids from fedstat.ru indicator web page</p></a></li>
<li><a href='#fedstat_indicator_info'><p>Download indicator information</p></a></li>
<li><a href='#fedstat_indicators_names_database'><p>Database of all indicator names presented on the fedstat.ru with hierarchical grouping</p></a></li>
<li><a href='#fedstat_parse_sdmx_to_table'><p>Parse sdmx raw bytes to data.frame</p></a></li>
<li><a href='#fedstat_post_data_ids_filtered'><p>Post data filters ids to fedstat.ru and download specified subset of data</p></a></li>
<li><a href='#parse_js1'><p>Get data ids from java script source</p></a></li>
<li><a href='#parse_js2'><p>Get default data ids object ids from java script source</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Unofficial API for Fedstat (Rosstat EMISS System) for Automatic
and Efficient Data Queries</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.3</td>
</tr>
<tr>
<td>Description:</td>
<td>An API for automatic data queries to the fedstat <a href="https://www.fedstat.ru">https://www.fedstat.ru</a>, using a small set of functions with a common interface.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/DenchPokepon/fedstatAPIr">https://github.com/DenchPokepon/fedstatAPIr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/DenchPokepon/fedstatAPIr/issues">https://github.com/DenchPokepon/fedstatAPIr/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Imports:</td>
<td>httr, jsonlite, xml2, readsdmx, magrittr, utils, methods,
data.table</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-03-30 07:02:25 UTC; denis</td>
</tr>
<tr>
<td>Author:</td>
<td>Denis Krylov [aut, cre],
  Dmitry Kibalnikov [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Denis Krylov &lt;deniskrylovvit@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-03-30 08:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='fedstatAPIr-package'>fedstatAPIr: Unofficial API for Fedstat (Rosstat EMISS System) for Automatic and Efficient Data Queries</h2><span id='topic+fedstatAPIr'></span><span id='topic+fedstatAPIr-package'></span>

<h3>Description</h3>

<p>An API for automatic data queries to the fedstat &lt;https://www.fedstat.ru&gt;, using a small set of functions with a common interface.
</p>
<p>An API for automatic data queries to the fedstat &lt;https://www.fedstat.ru&gt;, using a small set of functions with a common interface.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Denis Krylov <a href="mailto:deniskrylovvit@gmail.com">deniskrylovvit@gmail.com</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Dmitry Kibalnikov <a href="mailto:d.kibalnikov@gmail.com">d.kibalnikov@gmail.com</a>
</p>
</li></ul>

<p><strong>Maintainer</strong>: Denis Krylov <a href="mailto:deniskrylovvit@gmail.com">deniskrylovvit@gmail.com</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Dmitry Kibalnikov <a href="mailto:d.kibalnikov@gmail.com">d.kibalnikov@gmail.com</a>
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/DenchPokepon/fedstatAPIr">https://github.com/DenchPokepon/fedstatAPIr</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/DenchPokepon/fedstatAPIr/issues">https://github.com/DenchPokepon/fedstatAPIr/issues</a>
</p>
</li></ul>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/DenchPokepon/fedstatAPIr">https://github.com/DenchPokepon/fedstatAPIr</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/DenchPokepon/fedstatAPIr/issues">https://github.com/DenchPokepon/fedstatAPIr/issues</a>
</p>
</li></ul>


<hr>
<h2 id='fedstat_data_ids_filter'>Filters <code>data_ids</code> based on <code>filters</code> that are given in JSON format</h2><span id='topic+fedstat_data_ids_filter'></span>

<h3>Description</h3>

<p>Filters indicator <code>data_ids</code> with given <code>filters</code>
taking into account possible <code>filters</code> specification errors and default filters.
</p>
<p><code>filters</code> should use <code>filter_field_title</code> in names and <code>filter_value_title</code> in values as
they are presented on fedstat.ru. If for some reason the specified filters
do not return the expected result, it is worth inspecting possible
filter values in <code>data_ids</code> to see if the strings are defined correctly
(e.g. encoding issues, mixing latin and cyrillic symbols)
</p>
<p><code>filter_value_title</code> currently supports the following special values:
</p>

<ol>
<li><p> asterix (*), it's alias for &quot;select all possible filter values for this filter field&quot;
</p>
</li></ol>

<p>Unspecified filters use asterix as a default
(i.e. all possible filter values are selected and a warning is given)
</p>
<p>Internally normalized <code>filter_field_title</code> and <code>filter_value_title</code> are
used (all lowercase, removed extra whitespaces)
to compare the equality of <code>data_ids</code> and <code>filters</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fedstat_data_ids_filter(data_ids, filters = list(), disable_warnings = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fedstat_data_ids_filter_+3A_data_ids">data_ids</code></td>
<td>
<p>data.frame, result of <code>fedstat_get_data_ids</code>
with or without conjunction with <code>fedstat_get_data_ids_special_cases_handle</code></p>
</td></tr>
<tr><td><code id="fedstat_data_ids_filter_+3A_filters">filters</code></td>
<td>
<p>JSON in R list form. The structure should be like this:
</p>
<pre>
{
 "filter_field_title1": ["filter_value_title1", "filter_value_title2"],
 "filter_field_title2": ["filter_value_title1", "filter_value_title2"],
 ...
}
</pre>
<p>Where for example <code>filter_field_title1</code> could be a string &quot;Year&quot; with
<code>filter_value_title1</code> equal to 2020 and <code>filter_field_title2</code>
could be a string &quot;OKATO&quot; with <code>filter_value_title1</code>
equal to &quot;Russian Federation&quot;
Not actual filter field titles and filter values titles
because of ASCII requirement for CRAN</p>
</td></tr>
<tr><td><code id="fedstat_data_ids_filter_+3A_disable_warnings">disable_warnings</code></td>
<td>
<p>bool, enables or disables following warnings:
</p>

<ol>
<li><p> About non matched <code>filter_value_title</code> in <code>filters</code> and <code>filter_value_title</code> from <code>data_ids</code>;
</p>
</li>
<li><p> About unspecified <code>filter_filed_title</code> in filters.
</p>
</li></ol>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame, filtered <code>data_ids</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fedstat_get_data_ids">fedstat_get_data_ids</a>,
  <a href="#topic+fedstat_post_data_ids_filtered">fedstat_post_data_ids_filtered</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Get data filters identificators for CPI
# filter the data_ids to get data for january of 2023
# for all goods and services for Russian Federation
data_ids_filtered &lt;- fedstat_get_data_ids("31074") %&gt;%
  fedstat_data_ids_filter(
    filters = list(
      "Territory" = "Russian Federation",
      "Year" = "2023",
      "Period" = "January",
      "Types of goods and services" = "*"
    )
  )

# Not actual filter field titles and filter values titles because of ASCII requirement for CRAN

## End(Not run)
</code></pre>

<hr>
<h2 id='fedstat_data_load_with_filters'>Download subset of indicator data from fedstat.ru by specifying filters in JSON</h2><span id='topic+fedstat_data_load_with_filters'></span>

<h3>Description</h3>

<p>This function is a wrapper for the other functions of the package
to provide a simple one function API for fedstat.ru
</p>
<p>There are two basic terms in this API: <code>filter_field</code> and <code>filter_value</code>
</p>
<p>The <code style="white-space: pre;">&#8288;filter field&#8288;</code> reflects the individual property of the data point.
For example, Year, Region, Unit of measurement, etc.
Each filter field has its own title (<code>filter_field_title</code>),
it is simply a human-readable word or phrase (e.g. &quot;Year&quot;, &quot;Region&quot;)
that reflects the essence of the property by which filtering takes place
</p>
<p>The <code style="white-space: pre;">&#8288;filter value&#8288;</code> reflects the individual property specific value of the data point.
(e.g. 2021 for the Year, &quot;Russian Federation&quot; for the region, etc.)
It also has a title (<code>filter_value_title</code>) with
the same purpose as <code>filter_field_title</code>
</p>
<p><code>filters</code> should use <code>filter_field_title</code> in names and <code>filter_value_title</code> in values as
they are presented on fedstat.ru. If for some reason the specified filters
do not return the expected result, it is worth using
<code><a href="#topic+fedstat_get_data_ids">fedstat_get_data_ids</a></code> separately and inspecting possible
filter values in <code>data_ids</code> to see if the strings are defined correctly
(e.g. encoding issues, mixing latin and cyrillic symbols)
</p>
<p><code>filter_value_title</code> currently supports the following special values:
</p>

<ol>
<li><p> asterix (*), alias for &quot;select all possible filter values for this filter field&quot;
</p>
</li></ol>

<p>Unspecified filters use asterix as a default
(i.e. all possible filter values are selected and a warning is given)
</p>
<p>Internally normalized <code>filter_field_title</code> and <code>filter_value_title</code> are
used (all lowercase, removed extra whitespaces)
to compare the equality of <code>data_ids</code> and <code>filters</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fedstat_data_load_with_filters(
  indicator_id,
  ...,
  filters = list(),
  timeout_seconds = 180,
  retry_max_times = 3,
  disable_warnings = FALSE,
  httr_verbose = NULL,
  loading_steps_verbose = TRUE,
  return_type = c("data", "dictionary"),
  try_to_parse_ObsValue = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fedstat_data_load_with_filters_+3A_indicator_id">indicator_id</code></td>
<td>
<p>character, indicator id/code from indicator URL.
For example for indicator with URL https://www.fedstat.ru/indicator/37426 indicator id will be 37426</p>
</td></tr>
<tr><td><code id="fedstat_data_load_with_filters_+3A_...">...</code></td>
<td>
<p>other arguments passed to httr::GET and httr::POST</p>
</td></tr>
<tr><td><code id="fedstat_data_load_with_filters_+3A_filters">filters</code></td>
<td>
<p>JSON in R list form. The structure should be like this:
</p>
<pre>
{
 "filter_field_title1": ["filter_value_title1", "filter_value_title2"],
 "filter_field_title2": ["filter_value_title1", "filter_value_title2"],
 ...
}
</pre>
<p>Where for example <code>filter_field_title1</code> could be a string &quot;Year&quot; with
<code>filter_value_title1</code> equal to 2020 and <code>filter_field_title2</code>
could be a string &quot;OKATO&quot; with <code>filter_value_title1</code>
equal to &quot;Russian Federation&quot;
Not actual filter field titles and filter values titles
because of ASCII requirement for CRAN</p>
</td></tr>
<tr><td><code id="fedstat_data_load_with_filters_+3A_timeout_seconds">timeout_seconds</code></td>
<td>
<p>numeric, maximum time before a new GET and POST request is tried</p>
</td></tr>
<tr><td><code id="fedstat_data_load_with_filters_+3A_retry_max_times">retry_max_times</code></td>
<td>
<p>numeric, maximum number of tries to GET and POST <code>data_ids</code></p>
</td></tr>
<tr><td><code id="fedstat_data_load_with_filters_+3A_disable_warnings">disable_warnings</code></td>
<td>
<p>bool, enables or disables following warnings:
</p>

<ol>
<li><p> About non matched <code>filter_value_title</code> in <code>filters</code> and <code>filter_value_title</code> from <code>data_ids</code>;
</p>
</li>
<li><p> About unspecified <code>filter_filed_title</code> in filters.
</p>
</li></ol>
</td></tr>
<tr><td><code id="fedstat_data_load_with_filters_+3A_httr_verbose">httr_verbose</code></td>
<td>
<p><code>httr::verbose()</code> or NULL, outputs messages to the console
about the processing of the request</p>
</td></tr>
<tr><td><code id="fedstat_data_load_with_filters_+3A_loading_steps_verbose">loading_steps_verbose</code></td>
<td>
<p>logical, print data loading steps to console</p>
</td></tr>
<tr><td><code id="fedstat_data_load_with_filters_+3A_return_type">return_type</code></td>
<td>
<p>character, &quot;data&quot; or &quot;dicionary&quot;, data for actual data,
dictionary for sdmx lookup table (full data codes dictionary)</p>
</td></tr>
<tr><td><code id="fedstat_data_load_with_filters_+3A_try_to_parse_obsvalue">try_to_parse_ObsValue</code></td>
<td>
<p>logical, try to parse ObsValue column from character to R numeric type</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame with filtered indicator data from fedstat.ru
</p>


<h3>See Also</h3>

<p><code>
  <a href="#topic+fedstat_get_data_ids">fedstat_get_data_ids</a>,
  <a href="#topic+fedstat_data_ids_filter">fedstat_data_ids_filter</a>,
  <a href="#topic+fedstat_post_data_ids_filtered">fedstat_post_data_ids_filtered</a>,
  <a href="#topic+fedstat_parse_sdmx_to_table">fedstat_parse_sdmx_to_table</a>
  </code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Download CPI data
# for all goods and services for Russian Federation
data &lt;- fedstat_data_load_with_filters(
  indicator_id = "31074",
  filters = list(
    "Territory" = "Russian Federation",
    "Year" = "2023",
    "Period" = "January",
    "Types of goods and services" = "*"
  )
)
# Not actual filter field titles and filter values titles because of ASCII requirement for CRAN

## End(Not run)
</code></pre>

<hr>
<h2 id='fedstat_get_data_ids'>Get data filters ids from fedstat.ru indicator web page</h2><span id='topic+fedstat_get_data_ids'></span>

<h3>Description</h3>

<p>To query data from fedstat we need to POST some filters in form of filter numeric identificators.
Most filters don't have some rule from which their ids can be generated based on
filters titles and values. It seems like these ids are just indexes in the fedstat inner database.
So in order to get the data, we first need to get the ids of the filter values by
parsing specific part of java script source code on indicator web page.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fedstat_get_data_ids(
  indicator_id,
  ...,
  timeout_seconds = 180,
  retry_max_times = 3,
  httr_verbose = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fedstat_get_data_ids_+3A_indicator_id">indicator_id</code></td>
<td>
<p>character, indicator id/code from indicator URL.
For example for indicator with URL https://www.fedstat.ru/indicator/37426 indicator id will be 37426</p>
</td></tr>
<tr><td><code id="fedstat_get_data_ids_+3A_...">...</code></td>
<td>
<p>other arguments passed to httr::GET</p>
</td></tr>
<tr><td><code id="fedstat_get_data_ids_+3A_timeout_seconds">timeout_seconds</code></td>
<td>
<p>numeric, maximum time before a new GET request is tried</p>
</td></tr>
<tr><td><code id="fedstat_get_data_ids_+3A_retry_max_times">retry_max_times</code></td>
<td>
<p>numeric, maximum number of tries to GET <code>data_ids</code></p>
</td></tr>
<tr><td><code id="fedstat_get_data_ids_+3A_httr_verbose">httr_verbose</code></td>
<td>
<p><code>httr::verbose()</code> or NULL, outputs messages to the console
about the processing of the request</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It is known that the fedstat lags quite often. Sometimes site never responds at all.
This is especially true for the most popular indicators web pages.
In this regard, by default, a GET request is sent 3 times with a timeout
of 180 seconds and with initially small, but growing exponentially, pauses between requests.
</p>
<p>As a rule, requests to the indicator web page take much longer than requests
to get the data itself. A POST request for data is sent to a single
URL https://www.fedstat.ru/indicator/data.do?format=(excel or sdmx)
for all indicators and is often quite fast. In this regard, for many indicators,
it makes sense to cache <code>data_ids</code> to increase the speed of data download.
This is not possible for all data, for example, for weekly prices,
each new week adds a new filter (new week), the id of which can only be found on the indicator web page.
But for most data (e.g. monthly frequency), time filters are trivial.
There are 12 months in total with unique ids that do not change
and year ids that match their values
(that is, <code>filter_value_id</code> = <code>filter_value</code>, in other words 2020 = 2020)
</p>
<p>Correct filter_field_object_ids are needed to get data.
For the sdmx format, these ids do not change anything,
except for the standard data sorting,
but their incorrect specification will lead either to incomplete data loading or to no data at all.
For the excel format, these ids determine the form of data presentation, as in the data preview on the fedstat site.
For now only default filter_field_object_ids are used, which are parsed from java script source code on indicator web page.
Users can specify filter_field_object_ids for each filter_field in resulting data_ids table.
</p>


<h3>Value</h3>

<p>data.frame with all character type columns:
</p>

<ol>
<li><p> filter_field_id - id for filter field;
</p>
</li>
<li><p> filter_field_title - filter field title string representation;
</p>
</li>
<li><p> filter_value_id - id for filter field value;
</p>
</li>
<li><p> filter_value_title - filter field value title string representation;
</p>
</li>
<li><p> filter_field_object_ids - special strings that define the location of the filters fields.
It can take the following values: lineObjectIds (filters in lines),
columnObjectIds (filters in columns), filterObjectIds (hidden filters for all data);
</p>
</li></ol>



<h3>See Also</h3>

<p><code><a href="#topic+fedstat_data_ids_filter">fedstat_data_ids_filter</a>,
  <a href="#topic+fedstat_post_data_ids_filtered">fedstat_post_data_ids_filtered</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Get data filters identificators for CPI
data_ids &lt;- fedstat_get_data_ids("31074")

## End(Not run)
</code></pre>

<hr>
<h2 id='fedstat_indicator_info'>Download indicator information</h2><span id='topic+fedstat_indicator_info'></span>

<h3>Description</h3>

<p>Download indicator information from https://www.fedstat.ru/organizations/ <br />
Result table contains fedstat indicator id which is needed to request fedstat data <br />
Indicator with condition <code>hidden == TRUE</code> shows disabled records in fedstat hence ones might not be requested <br />
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fedstat_indicator_info()
</code></pre>


<h3>Value</h3>

<p>data.frame
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fedstat_get_data_ids">fedstat_get_data_ids</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
Get all indicator info
get_indicators()

## End(Not run)
</code></pre>

<hr>
<h2 id='fedstat_indicators_names_database'>Database of all indicator names presented on the fedstat.ru with hierarchical grouping</h2><span id='topic+fedstat_indicators_names_database'></span>

<h3>Description</h3>

<p>Allows researchers to search for interesting indicators more easily
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fedstat_indicators_names_database
</code></pre>


<h3>Format</h3>

<p>A data frame with 9335 rows and 10 variables:
</p>

<dl>
<dt>name</dt><dd><p>indicator name</p>
</dd>
<dt>url</dt><dd><p>indicator url</p>
</dd>
<dt>excluded</dt><dd><p>boolean, TRUE if indicator is not used and updated anymore</p>
</dd>
<dt>department</dt><dd><p>the name of the department from which the data is coming from</p>
</dd>
<dt>group_level_2</dt><dd><p>grouping of indicator</p>
</dd>
<dt>group_level_3</dt><dd><p>grouping of indicator</p>
</dd>
<dt>group_level_4</dt><dd><p>grouping of indicator</p>
</dd>
<dt>group_level_5</dt><dd><p>grouping of indicator</p>
</dd>
<dt>group_level_6</dt><dd><p>grouping of indicator</p>
</dd>
<dt>date_of_update</dt><dd><p>date of the last update of the current database</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://fedstat.ru/organizations/">https://fedstat.ru/organizations/</a>
</p>

<hr>
<h2 id='fedstat_parse_sdmx_to_table'>Parse sdmx raw bytes to data.frame</h2><span id='topic+fedstat_parse_sdmx_to_table'></span>

<h3>Description</h3>

<p>Parses sdmx raw bytes received in response to POST request.
This function is a wrapper around <code>readsdmx::read_sdmx</code>,
in addition to reading data, automatically adds columns with values from lookup tables.
Can also return full data codes dictionary for the indicator
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fedstat_parse_sdmx_to_table(
  data_raw,
  return_type = c("data", "dictionary"),
  try_to_parse_ObsValue = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fedstat_parse_sdmx_to_table_+3A_data_raw">data_raw</code></td>
<td>
<p>sdmx raw bytes</p>
</td></tr>
<tr><td><code id="fedstat_parse_sdmx_to_table_+3A_return_type">return_type</code></td>
<td>
<p>character, &quot;data&quot; or &quot;dicionary&quot;, data for actual data,
dictionary for sdmx lookup table (full data codes dictionary)</p>
</td></tr>
<tr><td><code id="fedstat_parse_sdmx_to_table_+3A_try_to_parse_obsvalue">try_to_parse_ObsValue</code></td>
<td>
<p>logical, try to parse ObsValue column from character to R numeric type</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fedstat_parse_sdmx_to_table">fedstat_parse_sdmx_to_table</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Get data filters identificators for CPI
# filter the data_ids to get data for january of 2023
# for all goods and services for Russian Federation
# POST filters and download data in sdmx format
# Parse raw sdmx to data.frame
data &lt;- fedstat_get_data_ids("31074") %&gt;%
  fedstat_data_ids_filter(
    filters = list(
      "Territory" = "Russian Federation",
      "Year" = "2023",
      "Period" = "January",
      "Types of goods and services" = "*"
    )
  ) %&gt;%
  fedstat_post_data_ids_filtered() %&gt;%
  fedstat_parse_sdmx_to_table()

# Not actual filter field titles and filter values titles because of ASCII requirement for CRAN

## End(Not run)
</code></pre>

<hr>
<h2 id='fedstat_post_data_ids_filtered'>Post data filters ids to fedstat.ru and download specified subset of data</h2><span id='topic+fedstat_post_data_ids_filtered'></span>

<h3>Description</h3>

<p>Creates a request body from <code>data_ids</code> and sends it to
https://www.fedstat.ru/indicator/data.do?format=<code>data_format</code>.
Gets an sdmx or excel with data in binary format.
</p>
<p>sdmx raw bytes can be passed to <code>fedstat_parse_sdmx_to_table</code> to create a
data.frame or to <code>rawToChar</code> and <code>writeLines</code> to create an xml file
</p>
<p>excel raw bytes can be passed to <code>writeBin</code> to create an xls file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fedstat_post_data_ids_filtered(
  data_ids,
  ...,
  data_format = c("sdmx", "excel"),
  timeout_seconds = 180,
  retry_max_times = 3,
  httr_verbose = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fedstat_post_data_ids_filtered_+3A_data_ids">data_ids</code></td>
<td>
<p>data.frame, can be a result of <code>fedstat_get_data_ids</code> or
<code>fedstat_get_data_ids_special_cases_handle</code> to download all available data,
or a result of <code>fedstat_data_ids_filter</code> to download subset of available data</p>
</td></tr>
<tr><td><code id="fedstat_post_data_ids_filtered_+3A_...">...</code></td>
<td>
<p>other arguments passed to httr::POST</p>
</td></tr>
<tr><td><code id="fedstat_post_data_ids_filtered_+3A_data_format">data_format</code></td>
<td>
<p>string, one of sdmx, excel</p>
</td></tr>
<tr><td><code id="fedstat_post_data_ids_filtered_+3A_timeout_seconds">timeout_seconds</code></td>
<td>
<p>numeric, maximum time before a new POST request is tried</p>
</td></tr>
<tr><td><code id="fedstat_post_data_ids_filtered_+3A_retry_max_times">retry_max_times</code></td>
<td>
<p>numeric, maximum number of tries to POST <code>data_ids</code></p>
</td></tr>
<tr><td><code id="fedstat_post_data_ids_filtered_+3A_httr_verbose">httr_verbose</code></td>
<td>
<p><code>httr::verbose()</code> or NULL, outputs messages to the console
about the processing of the request</p>
</td></tr>
</table>


<h3>Value</h3>

<p>raw bytes (sdmx or excel)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fedstat_parse_sdmx_to_table">fedstat_parse_sdmx_to_table</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Get data filters identificators for CPI
# filter the data_ids to get data for january of 2023
# for all goods and services for Russian Federation
# POST filters and download data in sdmx format
data &lt;- fedstat_get_data_ids("31074") %&gt;%
  fedstat_data_ids_filter(
    filters = list(
      "Territory" = "Russian Federation",
      "Year" = "2023",
      "Period" = "January",
      "Types of goods and services" = "*"
    )
  ) %&gt;%
  fedstat_post_data_ids_filtered()

# Not actual filter field titles and filter values titles because of ASCII requirement for CRAN

## End(Not run)
</code></pre>

<hr>
<h2 id='parse_js1'>Get data ids from java script source</h2><span id='topic+parse_js1'></span>

<h3>Description</h3>

<p>Get data ids from java script source
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_js1(script)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="parse_js1_+3A_script">script</code></td>
<td>
<p>character, java script source code with data ids</p>
</td></tr>
</table>


<h3>Value</h3>

<p>json in form of list with data ids
</p>

<hr>
<h2 id='parse_js2'>Get default data ids object ids from java script source</h2><span id='topic+parse_js2'></span>

<h3>Description</h3>

<p>Get default data ids object ids from java script source
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_js2(script)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="parse_js2_+3A_script">script</code></td>
<td>
<p>character, java script source code with data ids
and default object ids in it</p>
</td></tr>
</table>


<h3>Value</h3>

<p>json in form of list with 3 character vectors for
lineObjectIds, columnObjectIds, filterObjectIds, which consist of <code>filters_id</code>
</p>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>magrittr</dt><dd><p><code><a href="magrittr.html#topic+pipe">%&gt;%</a></code></p>
</dd>
</dl>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
