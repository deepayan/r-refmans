<!DOCTYPE html><html><head><title>Help for package forestecology</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {forestecology}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#add_buffer_variable'><p>Identify trees in the buffer region</p></a></li>
<li><a href='#autoplot.comp_bayes_lm'><p>Plot Bayesian model parameters</p></a></li>
<li><a href='#blocks_ex'><p>Example cross validation grid</p></a></li>
<li><a href='#census_1_ex'><p>Example input census data for package use</p></a></li>
<li><a href='#census_2_ex'><p>Example input census data for package use</p></a></li>
<li><a href='#census_2008_bw'><p>Michigan Big Woods research plot data</p></a></li>
<li><a href='#census_2014_bw'><p>Michigan Big Woods research plot data</p></a></li>
<li><a href='#comp_bayes_lm'><p>Fit Bayesian competition model</p></a></li>
<li><a href='#comp_bayes_lm_ex'><p>Example bayesian competition model fit</p></a></li>
<li><a href='#compute_buffer_region'><p>Compute buffer to a region.</p></a></li>
<li><a href='#compute_growth'><p>Compute growth of trees</p></a></li>
<li><a href='#create_bayes_lm_data'><p>Create input data frame for Bayesian regression</p></a></li>
<li><a href='#create_focal_vs_comp'><p>Create focal versus competitor trees data frame</p></a></li>
<li><a href='#focal_vs_comp_distance'><p>Return all pairwise distances between two data frames of trees</p></a></li>
<li><a href='#focal_vs_comp_ex'><p>Example focal versus comp data frame</p></a></li>
<li><a href='#forestecology'><p><code>forestecology</code> package</p></a></li>
<li><a href='#growth_ex'><p>Example growth data frame for small example</p></a></li>
<li><a href='#growth_spatial_ex'><p>Example growth data frame with spatial data for small example</p></a></li>
<li><a href='#growth_toy'><p>Example input data for <code>create_focal_vs_comp()</code></p></a></li>
<li><a href='#predict.comp_bayes_lm'><p>Make predictions based on fitted Bayesian model</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#run_cv'><p>Run the bayesian model with spatial cross validation</p></a></li>
<li><a href='#species_bw'><p>Phylogenic groupings and trait based clustering of various tree species</p></a></li>
<li><a href='#study_region_bw'><p>Bigwoods forest study region boundary</p></a></li>
<li><a href='#study_region_ex'><p>Study region for example data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Fitting and Assessing Neighborhood Models of the Effect of
Interspecific Competition on the Growth of Trees</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.0</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Albert Y. Kim &lt;albert.ys.kim@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Code for fitting and assessing models for the growth of trees. In 
    particular for the Bayesian neighborhood competition linear regression model 
    of Allen (2020): methods for model fitting and generating fitted/predicted 
    values, evaluating the effect of competitor species identity using 
    permutation tests, and evaluating model performance using spatial 
    cross-validation. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/rudeboybert/forestecology">https://github.com/rudeboybert/forestecology</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/rudeboybert/forestecology/issues">https://github.com/rudeboybert/forestecology/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.4)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), knitr, rmarkdown, covr</td>
</tr>
<tr>
<td>Imports:</td>
<td>magrittr, rlang, glue, ggplot2, stringr, dplyr, tidyr, purrr,
ggridges, mvnfast, sf, sfheaders, snakecase, tibble, yardstick,
blockCV, forcats, patchwork</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-10-01 20:47:00 UTC; akim04</td>
</tr>
<tr>
<td>Author:</td>
<td>Albert Y. Kim <a href="https://orcid.org/0000-0001-7824-306X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  David Allen <a href="https://orcid.org/0000-0002-0712-9603"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Simon Couch <a href="https://orcid.org/0000-0001-5676-5107"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-10-02 13:30:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic++25+3E+25">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>

<hr>
<h2 id='add_buffer_variable'>Identify trees in the buffer region</h2><span id='topic+add_buffer_variable'></span>

<h3>Description</h3>

<p>Identify trees in the buffer region
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_buffer_variable(growth_df, direction = "in", size, region)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_buffer_variable_+3A_growth_df">growth_df</code></td>
<td>
<p><code>sf</code> data frame</p>
</td></tr>
<tr><td><code id="add_buffer_variable_+3A_direction">direction</code></td>
<td>
<p>&quot;in&quot; for buffers that are contained within <code>region</code> (default), &quot;out&quot; for buffers that contain <code>region</code>.</p>
</td></tr>
<tr><td><code id="add_buffer_variable_+3A_size">size</code></td>
<td>
<p>Distance to determine which neighboring trees to a focal tree are
competitors. The units are assumed to be the same as the <code>geometry</code> variables in <code>growth_df</code>.</p>
</td></tr>
<tr><td><code id="add_buffer_variable_+3A_region">region</code></td>
<td>
<p>An <code>sf</code> polygon object of region to be buffered</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same <code>growth_df</code> data frame but with a new boolean
variable <code>buffer</code> indicating if a tree is in the study region buffer
area. This uses <code><a href="#topic+compute_buffer_region">compute_buffer_region()</a></code> to define the boundary
of the buffer region.
</p>


<h3>See Also</h3>

<p>Other spatial functions: 
<code><a href="#topic+compute_buffer_region">compute_buffer_region</a>()</code>,
<code><a href="#topic+focal_vs_comp_distance">focal_vs_comp_distance</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(tibble)
library(sfheaders)
library(ggplot2)

# Example square region to be buffered
region &lt;- tibble(
  x = c(0, 0, 1, 1),
  y = c(0, 1, 1, 0)
) %&gt;%
  sf_polygon()

# Example points
study_points &lt;- tibble(
  x = runif(50),
  y = runif(50)
) %&gt;%
  sf_point()

# Size of buffer
size &lt;- 0.05

# Identify whether points are within size of boundary
study_points &lt;- study_points %&gt;%
  add_buffer_variable(direction = "in", size = size, region = region)

# Plot study points coded by whether they are within size of boundary
p &lt;- ggplot() +
  geom_sf(data = region, fill = "transparent") +
  geom_sf(data = study_points, aes(col = buffer))
p

# Additionally, show buffer boundary in red
buffer_boundary &lt;- region %&gt;%
  compute_buffer_region(direction = "in", size = size)
p +
  geom_sf(data = buffer_boundary, col = "red", fill = "transparent")
</code></pre>

<hr>
<h2 id='autoplot.comp_bayes_lm'>Plot Bayesian model parameters</h2><span id='topic+autoplot.comp_bayes_lm'></span>

<h3>Description</h3>

<p>Plot Bayesian model parameters
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'comp_bayes_lm'
autoplot(object, type = "intercepts", sp_to_plot = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="autoplot.comp_bayes_lm_+3A_object">object</code></td>
<td>
<p>Output of <code><a href="#topic+comp_bayes_lm">comp_bayes_lm</a></code></p>
</td></tr>
<tr><td><code id="autoplot.comp_bayes_lm_+3A_type">type</code></td>
<td>
<p>A single character string for plot type with possible values
&quot;intercepts&quot;, &quot;dbh_slopes&quot;, or &quot;competition&quot;.</p>
</td></tr>
<tr><td><code id="autoplot.comp_bayes_lm_+3A_sp_to_plot">sp_to_plot</code></td>
<td>
<p>Vector of subset of species to plot</p>
</td></tr>
<tr><td><code id="autoplot.comp_bayes_lm_+3A_...">...</code></td>
<td>
<p>Currently ignoredâ€”only included for consistency with generic.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>focal_vs_comp</code> with new column of predicted <code>growth_hat</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)
library(ggridges)

# Load in posterior parameter example
data(comp_bayes_lm_ex)

# Plot beta_0, growth intercepts
autoplot(comp_bayes_lm_ex, type = "intercepts")

# Plot beta_dbh, growth-dbh slope
autoplot(comp_bayes_lm_ex, type = "dbh_slopes")

# Plot lambdas, competition coefficients
autoplot(comp_bayes_lm_ex, type = "competition")
</code></pre>

<hr>
<h2 id='blocks_ex'>Example cross validation grid</h2><span id='topic+blocks_ex'></span>

<h3>Description</h3>

<p>This is an example cross validation grid. This is needed to create the focal versus
comp data frame and run cross-validated models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>blocks_ex
</code></pre>


<h3>Format</h3>

<p>A <code>sf</code> polygons
</p>

<dl>
<dt>foldID</dt><dd><p>Tree identification number. This identifies an individual tree and
can be used to connect trees between the two censuses.</p>
</dd>
<dt>geometry</dt><dd><p>Point location of the individual</p>
</dd>
</dl>



<h3>See Also</h3>

<p>Other example data objects: 
<code><a href="#topic+census_1_ex">census_1_ex</a></code>,
<code><a href="#topic+census_2008_bw">census_2008_bw</a></code>,
<code><a href="#topic+census_2014_bw">census_2014_bw</a></code>,
<code><a href="#topic+census_2_ex">census_2_ex</a></code>,
<code><a href="#topic+comp_bayes_lm_ex">comp_bayes_lm_ex</a></code>,
<code><a href="#topic+focal_vs_comp_ex">focal_vs_comp_ex</a></code>,
<code><a href="#topic+growth_ex">growth_ex</a></code>,
<code><a href="#topic+growth_spatial_ex">growth_spatial_ex</a></code>,
<code><a href="#topic+growth_toy">growth_toy</a></code>,
<code><a href="#topic+species_bw">species_bw</a></code>,
<code><a href="#topic+study_region_bw">study_region_bw</a></code>,
<code><a href="#topic+study_region_ex">study_region_ex</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)
library(sf)
library(dplyr)

comp_dist &lt;- 1

ggplot(blocks_ex) +
  geom_sf() +
  geom_sf(data = growth_spatial_ex)

focal_vs_comp_ex &lt;- growth_spatial_ex %&gt;%
  mutate(basal_area = 0.0001 * pi * (dbh1 / 2)^2) %&gt;%
  create_focal_vs_comp(comp_dist, blocks = blocks_ex, id = "ID", comp_x_var = "basal_area")
</code></pre>

<hr>
<h2 id='census_1_ex'>Example input census data for package use</h2><span id='topic+census_1_ex'></span>

<h3>Description</h3>

<p>This is example forest census data to be analyzed with this package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>census_1_ex
</code></pre>


<h3>Format</h3>

<p>A <code>tibble</code>
</p>

<dl>
<dt>ID</dt><dd><p>Tree identification number. This identifies an individual tree and
can be used to connect trees between the two censuses.</p>
</dd>
<dt>sp</dt><dd><p>Species of the individual</p>
</dd>
<dt>gx</dt><dd><p>x-coordinate meters from reference point</p>
</dd>
<dt>gy</dt><dd><p>y-coordinate meters from reference point</p>
</dd>
<dt>date</dt><dd><p>Date the stem was measured</p>
</dd>
<dt>codes</dt><dd><p>Code for additional information on the stem: M means the main stem
of the individual tree and R means the stem was lost, but the tag was moved to another stem greater than DBH cutoff,
this stands for resprout.</p>
</dd>
<dt>dbh</dt><dd><p>Diameter at breast height of the tree in cm</p>
</dd>
</dl>



<h3>See Also</h3>

<p>Other example data objects: 
<code><a href="#topic+blocks_ex">blocks_ex</a></code>,
<code><a href="#topic+census_2008_bw">census_2008_bw</a></code>,
<code><a href="#topic+census_2014_bw">census_2014_bw</a></code>,
<code><a href="#topic+census_2_ex">census_2_ex</a></code>,
<code><a href="#topic+comp_bayes_lm_ex">comp_bayes_lm_ex</a></code>,
<code><a href="#topic+focal_vs_comp_ex">focal_vs_comp_ex</a></code>,
<code><a href="#topic+growth_ex">growth_ex</a></code>,
<code><a href="#topic+growth_spatial_ex">growth_spatial_ex</a></code>,
<code><a href="#topic+growth_toy">growth_toy</a></code>,
<code><a href="#topic+species_bw">species_bw</a></code>,
<code><a href="#topic+study_region_bw">study_region_bw</a></code>,
<code><a href="#topic+study_region_ex">study_region_ex</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
library(stringr)

growth_ex &lt;-
  compute_growth(
    census_1 = census_1_ex %&gt;%
      mutate(sp = to_any_case(sp) %&gt;% factor()),
    census_2 = census_2_ex %&gt;%
      filter(!str_detect(codes, "R")) %&gt;%
      mutate(sp = to_any_case(sp) %&gt;% factor()),
    id = "ID"
  )
</code></pre>

<hr>
<h2 id='census_2_ex'>Example input census data for package use</h2><span id='topic+census_2_ex'></span>

<h3>Description</h3>

<p>This is an example second census to be analyzed with the package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>census_2_ex
</code></pre>


<h3>Format</h3>

<p>A <code>tibble</code>
</p>

<dl>
<dt>ID</dt><dd><p>Tree identification number. This identifies an individual tree and
can be used to connect trees between the two censuses.</p>
</dd>
<dt>sp</dt><dd><p>Species of the individual</p>
</dd>
<dt>gx</dt><dd><p>x-coordinate meters from reference point</p>
</dd>
<dt>gy</dt><dd><p>y-coordinate meters from reference point</p>
</dd>
<dt>date</dt><dd><p>Date the stem was measured</p>
</dd>
<dt>codes</dt><dd><p>Code for additional information on the stem: M means the main stem
of the individual tree and R means the stem was lost, but the tag was moved to another stem greater than DBH cutoff,
this stands for resprout.</p>
</dd>
<dt>dbh</dt><dd><p>Diameter at breast height of the tree in cm</p>
</dd>
</dl>



<h3>See Also</h3>

<p>Other example data objects: 
<code><a href="#topic+blocks_ex">blocks_ex</a></code>,
<code><a href="#topic+census_1_ex">census_1_ex</a></code>,
<code><a href="#topic+census_2008_bw">census_2008_bw</a></code>,
<code><a href="#topic+census_2014_bw">census_2014_bw</a></code>,
<code><a href="#topic+comp_bayes_lm_ex">comp_bayes_lm_ex</a></code>,
<code><a href="#topic+focal_vs_comp_ex">focal_vs_comp_ex</a></code>,
<code><a href="#topic+growth_ex">growth_ex</a></code>,
<code><a href="#topic+growth_spatial_ex">growth_spatial_ex</a></code>,
<code><a href="#topic+growth_toy">growth_toy</a></code>,
<code><a href="#topic+species_bw">species_bw</a></code>,
<code><a href="#topic+study_region_bw">study_region_bw</a></code>,
<code><a href="#topic+study_region_ex">study_region_ex</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
library(stringr)

growth_ex &lt;-
  compute_growth(
    census_1 = census_1_ex %&gt;%
      mutate(sp = to_any_case(sp) %&gt;% factor()),
    census_2 = census_2_ex %&gt;%
      filter(!str_detect(codes, "R")) %&gt;%
      mutate(sp = to_any_case(sp) %&gt;% factor()),
    id = "ID"
  )
</code></pre>

<hr>
<h2 id='census_2008_bw'>Michigan Big Woods research plot data</h2><span id='topic+census_2008_bw'></span>

<h3>Description</h3>

<p>The <a href="https://deepblue.lib.umich.edu/data/concern/data_sets/ht24wj48w">Big Woods</a>
data come from three censuses of a 23 ha forest research plots. All
free-standing vegetation greater than 1 cm diameter at 1.3 m height (diameter
at breast height; DBH) were tagged, identified, spatially mapped and had
their DBH measured. The original census took place in 2003 and covered only
12 ha. A second census took place from 2008-2010 and expanded the plot to its
current 23 ha. In the first and second censuses trees larger than 3.1 cm DBH
were included. Finally a third census took place in 2014. In this census
trees larger than 1 cm DBH were included. In the second and third censuses
the original trees were found, recorded for survival, remeasured, and new
individuals were tagged. This data frame has data from the second census
(2008-2010).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>census_2008_bw
</code></pre>


<h3>Format</h3>

<p>A data frame with 27193 rows and 8 variables:
</p>

<dl>
<dt>treeID</dt><dd><p>Tree identification number. This identifies an individual tree and
can be used to connect trees between the two censuses.</p>
</dd>
<dt>stemID</dt><dd><p>Stem number for a multi-stemmed individual. For all trees this starts
at 1 and continues up from there. To uniquely identify a stem across the plot this
value must be combined with <code>treeID</code>.</p>
</dd>
<dt>dbh</dt><dd><p>Diameter at breast</p>
</dd>
<dt>sp</dt><dd><p>Code for the species. See <code>species_bw</code> for scientific name.</p>
</dd>
<dt>gx</dt><dd><p>x-coordinate meters from reference point</p>
</dd>
<dt>gy</dt><dd><p>y-coordinate meters from reference point</p>
</dd>
<dt>date</dt><dd><p>Approximate date the stem was measured</p>
</dd>
<dt>codes</dt><dd><p>Code for additional information on the stem: M means the main stem
of the individual tree; AL means the stem is alive but leaning or completely fallen
over; B means the stem is broken and over half the canopy is assumed to be missing;
and R means the stem was lost, but the tag was moved to another stem greater than DBH cutoff,
this stands for resprout.</p>
</dd>
</dl>



<h3>Details</h3>

<p>This plot is part of the Smithsonian Institution's Forest Global Earth
Observatory <a href="https://forestgeo.si.edu/">(ForestGEO)</a> global network of
forest research sites. For complete details on this dataset see its
<a href="https://deepblue.lib.umich.edu/data/concern/data_sets/ht24wj48w">Deep Blue Data repository page</a>.
</p>


<h3>See Also</h3>

<p>Other Big Woods data: 
<code><a href="#topic+census_2014_bw">census_2014_bw</a></code>,
<code><a href="#topic+species_bw">species_bw</a></code>,
<code><a href="#topic+study_region_bw">study_region_bw</a></code>
</p>
<p>Other example data objects: 
<code><a href="#topic+blocks_ex">blocks_ex</a></code>,
<code><a href="#topic+census_1_ex">census_1_ex</a></code>,
<code><a href="#topic+census_2014_bw">census_2014_bw</a></code>,
<code><a href="#topic+census_2_ex">census_2_ex</a></code>,
<code><a href="#topic+comp_bayes_lm_ex">comp_bayes_lm_ex</a></code>,
<code><a href="#topic+focal_vs_comp_ex">focal_vs_comp_ex</a></code>,
<code><a href="#topic+growth_ex">growth_ex</a></code>,
<code><a href="#topic+growth_spatial_ex">growth_spatial_ex</a></code>,
<code><a href="#topic+growth_toy">growth_toy</a></code>,
<code><a href="#topic+species_bw">species_bw</a></code>,
<code><a href="#topic+study_region_bw">study_region_bw</a></code>,
<code><a href="#topic+study_region_ex">study_region_ex</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)
library(sf)

# Convert all 2008 plot stems to sf object
census_2008_bw_sf &lt;- census_2008_bw %&gt;%
  st_as_sf(coords = c("gx", "gy"))

# Plot stems with plot boundary
ggplot() +
  geom_sf(data = census_2008_bw_sf, size = 0.25)
</code></pre>

<hr>
<h2 id='census_2014_bw'>Michigan Big Woods research plot data</h2><span id='topic+census_2014_bw'></span>

<h3>Description</h3>

<p>The <a href="https://deepblue.lib.umich.edu/data/concern/data_sets/ht24wj48w">Big Woods</a>
data come from three censuses of a 23 ha forest research plots. All
free-standing vegetation greater than 1 cm diameter at 1.3 m height (diameter
at breast height; DBH) were tagged, identified, spatially mapped and had
their DBH measured. The original census took place in 2003 and covered only
12 ha. A second census took place from 2008-2010 and expanded the plot to its
current 23 ha. In the first and second censuses trees larger than 3.1 cm DBH
were included. Finally a third census took place in 2014. In this census
trees larger than 1 cm DBH were included. In the second and third censuses
the original trees were found, recorded for survival, remeasured, and new
individuals were tagged. This data frame has data from the third census
(2014).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>census_2014_bw
</code></pre>


<h3>Format</h3>

<p>A data frame with 48371 rows and 8 variables:
</p>

<dl>
<dt>treeID</dt><dd><p>Tree identification number. This identifies an individual tree and
can be used to connect trees between the two censuses.</p>
</dd>
<dt>stemID</dt><dd><p>Stem number for a multi-stemmed individual. For all trees this starts
at 1 and continues up from there. To uniquely identify a stem across the plot this
value must be combined with <code>treeID</code>.</p>
</dd>
<dt>sp</dt><dd><p>Code for the species. See <code><a href="#topic+species_bw">species_bw</a></code> for scientific name.</p>
</dd>
<dt>dbh</dt><dd><p>Diameter at breast</p>
</dd>
<dt>gx</dt><dd><p>x-coordinate meters from reference point</p>
</dd>
<dt>gy</dt><dd><p>y-coordinate meters from reference point</p>
</dd>
<dt>date</dt><dd><p>Approximate date the stem was measured</p>
</dd>
<dt>codes</dt><dd><p>Code for additional information on the stem: M means the main stem
of the individual tree; AL means the stem is alive but leaning or completely fallen
over; B means the stem is broken and over half the canopy is assumed to be missing;
and R means the stem was lost, but the tag was moved to another stem greater than DBH cutoff,
this stands for resprout.</p>
</dd>
</dl>



<h3>Details</h3>

<p>This plot is part of the Smithsonian Institution's Forest Global Earth
Observatory <a href="https://forestgeo.si.edu/">(ForestGEO)</a> global network of
forest research sites. For complete details on this dataset see its
<a href="https://deepblue.lib.umich.edu/data/concern/data_sets/ht24wj48w">Deep Blue Data repository page</a>.
</p>


<h3>See Also</h3>

<p>Other Big Woods data: 
<code><a href="#topic+census_2008_bw">census_2008_bw</a></code>,
<code><a href="#topic+species_bw">species_bw</a></code>,
<code><a href="#topic+study_region_bw">study_region_bw</a></code>
</p>
<p>Other example data objects: 
<code><a href="#topic+blocks_ex">blocks_ex</a></code>,
<code><a href="#topic+census_1_ex">census_1_ex</a></code>,
<code><a href="#topic+census_2008_bw">census_2008_bw</a></code>,
<code><a href="#topic+census_2_ex">census_2_ex</a></code>,
<code><a href="#topic+comp_bayes_lm_ex">comp_bayes_lm_ex</a></code>,
<code><a href="#topic+focal_vs_comp_ex">focal_vs_comp_ex</a></code>,
<code><a href="#topic+growth_ex">growth_ex</a></code>,
<code><a href="#topic+growth_spatial_ex">growth_spatial_ex</a></code>,
<code><a href="#topic+growth_toy">growth_toy</a></code>,
<code><a href="#topic+species_bw">species_bw</a></code>,
<code><a href="#topic+study_region_bw">study_region_bw</a></code>,
<code><a href="#topic+study_region_ex">study_region_ex</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)
library(sf)
library(dplyr)

# Convert all 2008 plot stems to sf object
census_2008_bw_sf &lt;- census_2008_bw %&gt;%
  st_as_sf(coords = c("gx", "gy"))

# Plot stems with plot boundary
ggplot() +
  geom_sf(data = census_2008_bw_sf, size = 0.25)

# Species-specific mortality between 2008 and 2014 censuses
census_2008_bw %&gt;%
  left_join(census_2014_bw, by = c("treeID", "stemID"), suffix = c("_2008", "_2014")) %&gt;%
  mutate(mortality = ifelse(is.na(dbh_2014), 1, 0)) %&gt;%
  group_by(sp_2008) %&gt;%
  summarize(mortality = mean(mortality), n = n()) %&gt;%
  arrange(desc(n))
</code></pre>

<hr>
<h2 id='comp_bayes_lm'>Fit Bayesian competition model</h2><span id='topic+comp_bayes_lm'></span>

<h3>Description</h3>

<p>Fit a Bayesian linear regression model with interactions terms where </p>
<p style="text-align: center;"><code class="reqn">y = X \beta + \epsilon</code>
</p>


<table>
<tr>
 <td style="text-align: left;">
<code class="reqn">\mu</code> </td><td style="text-align: left;"> mean hyperparameter vector for <code class="reqn">\beta</code> of length <code class="reqn">p + 1</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code class="reqn">V</code> </td><td style="text-align: left;"> covariance hyperparameter matrix for <code class="reqn">\beta</code> of dimension <code class="reqn">(p + 1) x (p + 1)</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code class="reqn">a</code> </td><td style="text-align: left;"> shape hyperparameter for <code class="reqn">\sigma^2 &gt; 0</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code class="reqn">b</code> </td><td style="text-align: left;"> scale hyperparameter for <code class="reqn">\sigma^2 &gt; 0</code></td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Usage</h3>

<pre><code class='language-R'>comp_bayes_lm(focal_vs_comp, prior_param = NULL, run_shuffle = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="comp_bayes_lm_+3A_focal_vs_comp">focal_vs_comp</code></td>
<td>
<p>data frame from <code><a href="#topic+create_focal_vs_comp">create_focal_vs_comp()</a></code></p>
</td></tr>
<tr><td><code id="comp_bayes_lm_+3A_prior_param">prior_param</code></td>
<td>
<p>A list of <code style="white-space: pre;">&#8288;{a_0, b_0, mu_0, V_0}&#8288;</code> prior hyperparameters.
Defaults to <code>a_0 = 250</code>, <code>b_0 = 250</code>, <code>mu_0</code> a vector of zeros of
length <code class="reqn">p + 1</code>, <code>V_0</code> an identity matrix of dimension <code class="reqn">(p + 1) x (p
  + 1)</code></p>
</td></tr>
<tr><td><code id="comp_bayes_lm_+3A_run_shuffle">run_shuffle</code></td>
<td>
<p>boolean as to whether to run permutation test shuffle of
competitor tree species within a particular focal_ID</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of <code style="white-space: pre;">&#8288;{a_star, b_star, mu_star, V_star}&#8288;</code> posterior hyperparameters
</p>


<h3>Source</h3>

<p>Closed-form solutions of Bayesian linear
regression doi: <a href="https://doi.org/10.1371/journal.pone.0229930.s004">10.1371/journal.pone.0229930.s004</a>
</p>


<h3>See Also</h3>

<p>Other modeling functions: 
<code><a href="#topic+create_bayes_lm_data">create_bayes_lm_data</a>()</code>,
<code><a href="#topic+predict.comp_bayes_lm">predict.comp_bayes_lm</a>()</code>,
<code><a href="#topic+run_cv">run_cv</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

# Load in focal versus comp
data(focal_vs_comp_ex)

comp_bayes_lm_ex &lt;- focal_vs_comp_ex %&gt;%
  comp_bayes_lm(prior_param = NULL, run_shuffle = FALSE)
</code></pre>

<hr>
<h2 id='comp_bayes_lm_ex'>Example bayesian competition model fit</h2><span id='topic+comp_bayes_lm_ex'></span>

<h3>Description</h3>

<p>This object contains an example fitted Bayesian competition
model outputted by <code><a href="#topic+comp_bayes_lm">comp_bayes_lm()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>comp_bayes_lm_ex
</code></pre>


<h3>Format</h3>

<p>A list subclass containing the following elements:
</p>

<dl>
<dt>prior_params</dt><dd><p>Prior parameters supplied to <code><a href="#topic+comp_bayes_lm">comp_bayes_lm()</a></code></p>
</dd>
<dt>post_params</dt><dd><p>Posterior parameters outputted by <code><a href="#topic+comp_bayes_lm">comp_bayes_lm()</a></code></p>
</dd>
<dt>terms</dt><dd><p>The formula object used in model fitting</p>
</dd>
</dl>



<h3>See Also</h3>

<p><code><a href="#topic+comp_bayes_lm">comp_bayes_lm()</a></code>
</p>
<p>Other example data objects: 
<code><a href="#topic+blocks_ex">blocks_ex</a></code>,
<code><a href="#topic+census_1_ex">census_1_ex</a></code>,
<code><a href="#topic+census_2008_bw">census_2008_bw</a></code>,
<code><a href="#topic+census_2014_bw">census_2014_bw</a></code>,
<code><a href="#topic+census_2_ex">census_2_ex</a></code>,
<code><a href="#topic+focal_vs_comp_ex">focal_vs_comp_ex</a></code>,
<code><a href="#topic+growth_ex">growth_ex</a></code>,
<code><a href="#topic+growth_spatial_ex">growth_spatial_ex</a></code>,
<code><a href="#topic+growth_toy">growth_toy</a></code>,
<code><a href="#topic+species_bw">species_bw</a></code>,
<code><a href="#topic+study_region_bw">study_region_bw</a></code>,
<code><a href="#topic+study_region_ex">study_region_ex</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
library(yardstick)

# Compare model predictions to observation
predictions &lt;- focal_vs_comp_ex %&gt;%
  mutate(growth_hat = predict(comp_bayes_lm_ex, focal_vs_comp_ex))

predictions %&gt;%
  rmse(truth = growth, estimate = growth_hat) %&gt;%
  pull(.estimate)

# Plot posterior parameters
comp_bayes_lm_ex %&gt;%
  autoplot()
</code></pre>

<hr>
<h2 id='compute_buffer_region'>Compute buffer to a region.</h2><span id='topic+compute_buffer_region'></span>

<h3>Description</h3>

<p>Compute buffer to a region.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_buffer_region(region, direction = "in", size)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compute_buffer_region_+3A_region">region</code></td>
<td>
<p>An <code>sf</code> polygon object of region to be buffered</p>
</td></tr>
<tr><td><code id="compute_buffer_region_+3A_direction">direction</code></td>
<td>
<p>&quot;in&quot; for buffers that are contained within <code>region</code> (default), &quot;out&quot; for buffers that contain <code>region</code>.</p>
</td></tr>
<tr><td><code id="compute_buffer_region_+3A_size">size</code></td>
<td>
<p>Distance to determine which neighboring trees to a focal tree are
competitors. The units are assumed to be the same as the <code>geometry</code> variables in <code>growth_df</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>sf</code> polygon object of buffer
</p>


<h3>See Also</h3>

<p>Other spatial functions: 
<code><a href="#topic+add_buffer_variable">add_buffer_variable</a>()</code>,
<code><a href="#topic+focal_vs_comp_distance">focal_vs_comp_distance</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(tibble)
library(sfheaders)
library(ggplot2)

# Example square region to be buffered (as sf object)
region &lt;- tibble(
  x = c(0, 0, 1, 1),
  y = c(0, 1, 1, 0)
) %&gt;%
  sf_polygon()

# Size of buffer
size &lt;- 0.05

# Compute "inwards" buffer
inwards_buffer_region &lt;- region %&gt;%
  compute_buffer_region(direction = "in", size = size)

# Compute "outwards" buffer
outwards_buffer_region &lt;- region %&gt;%
  compute_buffer_region(direction = "out", size = size)

# Plot all three regions:
ggplot() +
  geom_sf(data = outwards_buffer_region, col = "blue", fill = "transparent") +
  geom_sf(data = region, fill = "transparent") +
  geom_sf(data = inwards_buffer_region, col = "orange", fill = "transparent") +
  labs(title = "Regions: original (black), inwards buffer (orange), and outwards buffer (blue)")
</code></pre>

<hr>
<h2 id='compute_growth'>Compute growth of trees</h2><span id='topic+compute_growth'></span>

<h3>Description</h3>

<p>Based on two tree censuses, compute the average annual growth in <code>dbh</code> for all
trees.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_growth(census_1, census_2, id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compute_growth_+3A_census_1">census_1</code></td>
<td>
<p>A data frame of the first census.</p>
</td></tr>
<tr><td><code id="compute_growth_+3A_census_2">census_2</code></td>
<td>
<p>A data frame of the second (later) census</p>
</td></tr>
<tr><td><code id="compute_growth_+3A_id">id</code></td>
<td>
<p>Name of variable that uniquely identifies each tree common
to <code>census_1</code> and <code>census_2</code> allowing you to join/merge
both data frames.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>sf</code> data frame with column <code>growth</code> giving the average
annual growth in <code>dbh</code>.
</p>


<h3>See Also</h3>

<p>Other data processing functions: 
<code><a href="#topic+create_bayes_lm_data">create_bayes_lm_data</a>()</code>,
<code><a href="#topic+create_focal_vs_comp">create_focal_vs_comp</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
library(stringr)

growth_ex &lt;-
  compute_growth(
    census_1 = census_1_ex %&gt;%
      mutate(sp = to_any_case(sp) %&gt;% factor()),
    census_2 = census_2_ex %&gt;%
      filter(!str_detect(codes, "R")) %&gt;%
      mutate(sp = to_any_case(sp) %&gt;% factor()),
    id = "ID"
  )
</code></pre>

<hr>
<h2 id='create_bayes_lm_data'>Create input data frame for Bayesian regression</h2><span id='topic+create_bayes_lm_data'></span>

<h3>Description</h3>

<p>This function &quot;widens&quot; focal-competitor data frames for use inside of
package modeling functions, where each <code>comp_sp</code> inside of the <code>comp</code>
list-column receives its own column with its associated total basal area.
</p>
<p>This function is used internally by <code><a href="#topic+comp_bayes_lm">comp_bayes_lm()</a></code> and
<code><a href="#topic+predict.comp_bayes_lm">predict.comp_bayes_lm()</a></code> exported as a convenience for
applications extending this package's functionality.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_bayes_lm_data(focal_vs_comp, run_shuffle = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_bayes_lm_data_+3A_focal_vs_comp">focal_vs_comp</code></td>
<td>
<p>data frame from <code><a href="#topic+create_focal_vs_comp">create_focal_vs_comp()</a></code></p>
</td></tr>
<tr><td><code id="create_bayes_lm_data_+3A_run_shuffle">run_shuffle</code></td>
<td>
<p>boolean as to whether to run permutation test shuffle of
competitor tree species within a particular focal_ID</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame for internal package use.
</p>


<h3>See Also</h3>

<p>Other modeling functions: 
<code><a href="#topic+comp_bayes_lm">comp_bayes_lm</a>()</code>,
<code><a href="#topic+predict.comp_bayes_lm">predict.comp_bayes_lm</a>()</code>,
<code><a href="#topic+run_cv">run_cv</a>()</code>
</p>
<p>Other data processing functions: 
<code><a href="#topic+compute_growth">compute_growth</a>()</code>,
<code><a href="#topic+create_focal_vs_comp">create_focal_vs_comp</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>create_bayes_lm_data(focal_vs_comp_ex)
</code></pre>

<hr>
<h2 id='create_focal_vs_comp'>Create focal versus competitor trees data frame</h2><span id='topic+create_focal_vs_comp'></span>

<h3>Description</h3>

<p>&quot;Focal versus competitor trees&quot; data frames are the main data
frame used for analysis. &quot;Focal trees&quot; are all trees that satisfy the
following criteria
</p>

<ol>
<li><p> Were alive at both censuses
</p>
</li>
<li><p> Were not part of the study region's buffer as computed by <code><a href="#topic+add_buffer_variable">add_buffer_variable()</a></code>
</p>
</li>
<li><p> Were not a resprout at the second census. Such trees should be coded as
<code>"R"</code> in the <code>codes2</code> variable (OK if a resprout at first census)
</p>
</li></ol>

<p>For each focal tree, &quot;competitor trees&quot; are all trees that (1) were alive at
the first census and (2) within <code>comp_dist</code> distance of the focal tree.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_focal_vs_comp(growth_df, comp_dist, blocks, id, comp_x_var)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_focal_vs_comp_+3A_growth_df">growth_df</code></td>
<td>
<p>A <code><a href="#topic+compute_growth">compute_growth()</a></code> output converted to <code>sf</code> object</p>
</td></tr>
<tr><td><code id="create_focal_vs_comp_+3A_comp_dist">comp_dist</code></td>
<td>
<p>Distance to determine which neighboring trees to a focal tree are competitors.</p>
</td></tr>
<tr><td><code id="create_focal_vs_comp_+3A_blocks">blocks</code></td>
<td>
<p>An sf object of a <code>blockCV</code> block output</p>
</td></tr>
<tr><td><code id="create_focal_vs_comp_+3A_id">id</code></td>
<td>
<p>A character string of the variable name in <code>growth_df</code> uniquely identifying each tree</p>
</td></tr>
<tr><td><code id="create_focal_vs_comp_+3A_comp_x_var">comp_x_var</code></td>
<td>
<p>A character string indicating which numerical variable to use as competitor explanatory variable</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>focal_vs_comp</code> data frame of all focal trees and for
each focal tree all possible competitor trees. In particular, for
each competitor tree we return <code>comp_x_var</code>. Potential examples of
<code>comp_x_var</code> include
<a href="https://en.wikipedia.org/wiki/Basal_area">basal area</a> or
estimate above ground biomass.
</p>


<h3>Note</h3>

<p>In order to speed computation, in particular of distances between all
focal/competitor tree pairs, we use the cross-validation <code>blockCV</code>
object to divide the study region into smaller subsets.
</p>


<h3>See Also</h3>

<p>Other data processing functions: 
<code><a href="#topic+compute_growth">compute_growth</a>()</code>,
<code><a href="#topic+create_bayes_lm_data">create_bayes_lm_data</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)
library(dplyr)
library(stringr)
library(sf)
library(sfheaders)
library(tibble)

# Create fold information sf object.
SpatialBlock_ex &lt;-
  tibble(
    # Study region boundary
    x = c(0, 0, 5, 5),
    y = c(0, 5, 5, 0)
  ) %&gt;%
  # Convert to sf object
  sf_polygon() %&gt;%
  mutate(folds = "1")

# Plot example data. Observe for comp_dist = 1.5, there are 6 focal vs comp pairs:
# 1. focal 1 vs comp 2
# 2. focal 2 vs comp 1
# 3. focal 2 vs comp 3
# 4. focal 3 vs comp 2
# 5. focal 4 vs comp 5
# 6. focal 5 vs comp 4
ggplot() +
  geom_sf(data = SpatialBlock_ex, fill = "transparent") +
  geom_sf_label(data = growth_toy, aes(label = ID))

# Return corresponding data frame
growth_toy %&gt;%
  mutate(basal_area = 0.0001 * pi * (dbh1 / 2)^2) %&gt;%
  create_focal_vs_comp(comp_dist = 1.5, blocks = SpatialBlock_ex, id = "ID",
                       comp_x_var = "basal_area")

# Load in growth_df with spatial data
# See ?growth_ex for attaching spatial data to growth_df
data(growth_spatial_ex)
# Load in blocks
data(blocks_ex)

focal_vs_comp_ex &lt;- growth_spatial_ex %&gt;%
  mutate(basal_area = 0.0001 * pi * (dbh1 / 2)^2) %&gt;%
  create_focal_vs_comp(comp_dist = 1, blocks = blocks_ex, id = "ID",
                       comp_x_var = "basal_area")
</code></pre>

<hr>
<h2 id='focal_vs_comp_distance'>Return all pairwise distances between two data frames of trees</h2><span id='topic+focal_vs_comp_distance'></span>

<h3>Description</h3>

<p>Return all pairwise distances between two data frames of trees
</p>


<h3>Usage</h3>

<pre><code class='language-R'>focal_vs_comp_distance(focal_trees, comp_trees)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="focal_vs_comp_distance_+3A_focal_trees">focal_trees</code></td>
<td>
<p>An <code>sf</code> polygon object of the focal trees of interest</p>
</td></tr>
<tr><td><code id="focal_vs_comp_distance_+3A_comp_trees">comp_trees</code></td>
<td>
<p>An <code>sf</code> polygon object of the competitor trees</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with three columns: <code>focal_ID</code> of focal tree,
<code>comp_dist</code> of competitor tree, and <code>dist</code> of distance between
them.
</p>


<h3>See Also</h3>

<p>Other spatial functions: 
<code><a href="#topic+add_buffer_variable">add_buffer_variable</a>()</code>,
<code><a href="#topic+compute_buffer_region">compute_buffer_region</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(tibble)
library(ggplot2)
library(sf)

# Create toy example focal and competitor trees
focal_trees &lt;- tibble(
  focal_ID = c(1, 2, 3),
  x = c(0.3, 0.6, 0.7),
  y = c(0.1, 0.5, 0.7)
) %&gt;%
  st_as_sf(coords = c("x", "y"))

comp_trees &lt;- tibble(
  comp_ID = c(4, 5, 6, 7),
  x = c(0, 0.2, 0.4, 0.6),
  y = c(0.6, 0.7, 1, 0.2)
) %&gt;%
  st_as_sf(coords = c("x", "y"))

# Plot both sets of trees
ggplot() +
  geom_sf_label(data = focal_trees, aes(label = focal_ID), col = "black") +
  geom_sf_label(data = comp_trees, aes(label = comp_ID), col = "orange") +
  labs(title = "Focal trees in black, competitor trees in orange")

# Compute corresponding distances between the 3 focal trees and 4 competitor trees
focal_vs_comp_distance(focal_trees, comp_trees)
</code></pre>

<hr>
<h2 id='focal_vs_comp_ex'>Example focal versus comp data frame</h2><span id='topic+focal_vs_comp_ex'></span>

<h3>Description</h3>

<p>This is an example focal versus comp data frame. The rows are focal
trees which are repeated for all competitor trees within a specified
distance from them. In this case that distance is 1. This is the focal
versus comp for <a href="#topic+growth_spatial_ex">growth_spatial_ex</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>focal_vs_comp_ex
</code></pre>


<h3>Format</h3>

<p>A <a href="tibble.html#topic+tbl_df-class">tibble::tbl_df</a>:
</p>

<dl>
<dt>focal_ID</dt><dd><p>Tree identification number for the focal tree</p>
</dd>
<dt>focal_sp</dt><dd><p>Species of the focal tree</p>
</dd>
<dt>dbh</dt><dd><p>Diameter at breast height of the focal tree at the first census</p>
</dd>
<dt>foldID</dt><dd><p>The CV-fold that the focal tree is in</p>
</dd>
<dt>geometry</dt><dd><p>The point location of the focal tree</p>
</dd>
<dt>growth</dt><dd><p>The average annual growth of the focal tree between censuses</p>
</dd>
<dt>comp</dt><dd><p>A list-column: characteristics of the relevant competitor trees</p>
</dd>
</dl>

<p>The <code>comp</code> list-column contains <a href="tibble.html#topic+tbl_df-class">tibble::tbl_df</a>s with columns:
</p>

<dl>
<dt>comp_ID</dt><dd><p>Tree identification number for the competitor tree</p>
</dd>
<dt>dist</dt><dd><p>The distance between the focal and comp tree, this will be less than the max distance specified.</p>
</dd>
<dt>comp_sp</dt><dd><p>Species of the comp tree</p>
</dd>
<dt>comp_x_var</dt><dd><p>Numerical variable associated with comp tree</p>
</dd>
</dl>



<h3>See Also</h3>

<p><code><a href="#topic+create_focal_vs_comp">create_focal_vs_comp()</a></code>
</p>
<p>Other example data objects: 
<code><a href="#topic+blocks_ex">blocks_ex</a></code>,
<code><a href="#topic+census_1_ex">census_1_ex</a></code>,
<code><a href="#topic+census_2008_bw">census_2008_bw</a></code>,
<code><a href="#topic+census_2014_bw">census_2014_bw</a></code>,
<code><a href="#topic+census_2_ex">census_2_ex</a></code>,
<code><a href="#topic+comp_bayes_lm_ex">comp_bayes_lm_ex</a></code>,
<code><a href="#topic+growth_ex">growth_ex</a></code>,
<code><a href="#topic+growth_spatial_ex">growth_spatial_ex</a></code>,
<code><a href="#topic+growth_toy">growth_toy</a></code>,
<code><a href="#topic+species_bw">species_bw</a></code>,
<code><a href="#topic+study_region_bw">study_region_bw</a></code>,
<code><a href="#topic+study_region_ex">study_region_ex</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>comp_bayes_lm_ex &lt;- focal_vs_comp_ex %&gt;%
  comp_bayes_lm(prior_param = NULL, run_shuffle = FALSE)
</code></pre>

<hr>
<h2 id='forestecology'><code>forestecology</code> package</h2><span id='topic+forestecology'></span>

<h3>Description</h3>

<p>Methods and data for forest ecology model selection and assessment
</p>


<h3>Details</h3>

<p>See the README on
<a href="https://github.com/rudeboybert/forestecology#readme">GitHub</a>
</p>

<hr>
<h2 id='growth_ex'>Example growth data frame for small example</h2><span id='topic+growth_ex'></span>

<h3>Description</h3>

<p>This is an example growth data frame formed from two census data frames. In this case it is
made by combining <a href="#topic+census_1_ex">census_1_ex</a> and <a href="#topic+census_2_ex">census_2_ex</a>. The
individuals alive in both censuses were linked by their tree ID.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>growth_ex
</code></pre>


<h3>Format</h3>

<p>A <code>sf</code> spatial tibble
</p>

<dl>
<dt>ID</dt><dd><p>Tree identification number. This identifies an individual tree and
can be used to connect trees between the two censuses.</p>
</dd>
<dt>sp</dt><dd><p>Species of the individual</p>
</dd>
<dt>codes1</dt><dd><p>Code for additional information on the stem during the first census: M means the main stem
of the individual tree and R means the stem was lost, but the tag was moved to another stem greater than DBH cutoff,
this stands for resprout.</p>
</dd>
<dt>dbh1</dt><dd><p>Diameter at breast height of the tree in cm at the first census</p>
</dd>
<dt>dbh2</dt><dd><p>Diameter at breast height of the tree in cm at the second census</p>
</dd>
<dt>growth</dt><dd><p>Average annual growth between the two censuses in cm per year</p>
</dd>
<dt>codes2</dt><dd><p>Codes at the second census</p>
</dd>
<dt>geometry</dt><dd><p>Point location of the individual</p>
</dd>
</dl>



<h3>See Also</h3>

<p><code><a href="#topic+compute_growth">compute_growth()</a></code>
</p>
<p>Other example data objects: 
<code><a href="#topic+blocks_ex">blocks_ex</a></code>,
<code><a href="#topic+census_1_ex">census_1_ex</a></code>,
<code><a href="#topic+census_2008_bw">census_2008_bw</a></code>,
<code><a href="#topic+census_2014_bw">census_2014_bw</a></code>,
<code><a href="#topic+census_2_ex">census_2_ex</a></code>,
<code><a href="#topic+comp_bayes_lm_ex">comp_bayes_lm_ex</a></code>,
<code><a href="#topic+focal_vs_comp_ex">focal_vs_comp_ex</a></code>,
<code><a href="#topic+growth_spatial_ex">growth_spatial_ex</a></code>,
<code><a href="#topic+growth_toy">growth_toy</a></code>,
<code><a href="#topic+species_bw">species_bw</a></code>,
<code><a href="#topic+study_region_bw">study_region_bw</a></code>,
<code><a href="#topic+study_region_ex">study_region_ex</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)
library(dplyr)
library(sf)
library(sfheaders)
library(blockCV)

growth_ex %&gt;%
  ggplot() +
  geom_sf()

growth_ex %&gt;%
  group_by(sp) %&gt;%
  summarize(mean(growth))

# Add buffer
growth_spatial_ex &lt;- growth_ex %&gt;%
  add_buffer_variable(direction = "in", size = 1, region = study_region_ex)

# Add cross-validation folds
fold1 &lt;- rbind(c(0, 0), c(5, 0), c(5, 5), c(0, 5), c(0, 0))
fold2 &lt;- rbind(c(5, 0), c(10, 0), c(10, 5), c(5, 5), c(5, 0))
blocks &lt;- bind_rows(
  sf_polygon(fold1),
  sf_polygon(fold2)
) %&gt;%
  mutate(foldID = c(1, 2))

SpatialBlock_ex &lt;- spatialBlock(
  speciesData = growth_ex,
  verbose = FALSE,
  k = 2,
  selection = "systematic",
  blocks = blocks
)

# Add foldID to data
growth_spatial_ex &lt;- growth_spatial_ex %&gt;%
  mutate(foldID = SpatialBlock_ex$foldID %&gt;% as.factor())
</code></pre>

<hr>
<h2 id='growth_spatial_ex'>Example growth data frame with spatial data for small example</h2><span id='topic+growth_spatial_ex'></span>

<h3>Description</h3>

<p>This is an example growth data frame formed from two census data frames which
has been updated with spatial data. It starts from <a href="#topic+growth_ex">growth_ex</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>growth_spatial_ex
</code></pre>


<h3>Format</h3>

<p>A <code>sf</code> spatial tibble
</p>

<dl>
<dt>ID</dt><dd><p>Tree identification number. This identifies an individual tree and
can be used to connect trees between the two censuses.</p>
</dd>
<dt>sp</dt><dd><p>Species of the individual</p>
</dd>
<dt>codes1</dt><dd><p>Code for additional information on the stem during the first census: M means the main stem
of the individual tree and R means the stem was lost, but the tag was moved to another stem greater than DBH cutoff,
this stands for resprout.</p>
</dd>
<dt>dbh1</dt><dd><p>Diameter at breast height of the tree in cm at the first census</p>
</dd>
<dt>dbh2</dt><dd><p>Diameter at breast height of the tree in cm at the second census</p>
</dd>
<dt>growth</dt><dd><p>Average annual growth between the two censuses in cm per year</p>
</dd>
<dt>codes2</dt><dd><p>Codes at the second census</p>
</dd>
<dt>geometry</dt><dd><p>Point location of the individual</p>
</dd>
<dt>buffer</dt><dd><p>A boolean variable for whether the individual is in the buffer region or not</p>
</dd>
<dt>foldID</dt><dd><p>Which cross-validation fold the individual is in</p>
</dd>
</dl>



<h3>See Also</h3>

<p><code><a href="#topic+compute_growth">compute_growth()</a></code>
</p>
<p>Other example data objects: 
<code><a href="#topic+blocks_ex">blocks_ex</a></code>,
<code><a href="#topic+census_1_ex">census_1_ex</a></code>,
<code><a href="#topic+census_2008_bw">census_2008_bw</a></code>,
<code><a href="#topic+census_2014_bw">census_2014_bw</a></code>,
<code><a href="#topic+census_2_ex">census_2_ex</a></code>,
<code><a href="#topic+comp_bayes_lm_ex">comp_bayes_lm_ex</a></code>,
<code><a href="#topic+focal_vs_comp_ex">focal_vs_comp_ex</a></code>,
<code><a href="#topic+growth_ex">growth_ex</a></code>,
<code><a href="#topic+growth_toy">growth_toy</a></code>,
<code><a href="#topic+species_bw">species_bw</a></code>,
<code><a href="#topic+study_region_bw">study_region_bw</a></code>,
<code><a href="#topic+study_region_ex">study_region_ex</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)
library(dplyr)
library(sf)

comp_dist &lt;- 1

ggplot() +
  geom_sf(data = growth_spatial_ex, aes(col = buffer), size = 2)

ggplot() +
  geom_sf(data = growth_spatial_ex, aes(col = foldID), size = 2)

# Create the focal versus comp data frame
focal_vs_comp_ex &lt;- growth_spatial_ex %&gt;%
  mutate(basal_area = 0.0001 * pi * (dbh1 / 2)^2) %&gt;%
  create_focal_vs_comp(comp_dist, blocks = blocks_ex, id = "ID", comp_x_var = "basal_area")
</code></pre>

<hr>
<h2 id='growth_toy'>Example input data for <code><a href="#topic+create_focal_vs_comp">create_focal_vs_comp()</a></code></h2><span id='topic+growth_toy'></span>

<h3>Description</h3>

<p>An example <code>sf</code> of type generated by <code><a href="#topic+compute_growth">compute_growth()</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>growth_toy
</code></pre>


<h3>Format</h3>

<p>A <code>sf</code> spatial features polygon
</p>


<h3>See Also</h3>

<p>Other example data objects: 
<code><a href="#topic+blocks_ex">blocks_ex</a></code>,
<code><a href="#topic+census_1_ex">census_1_ex</a></code>,
<code><a href="#topic+census_2008_bw">census_2008_bw</a></code>,
<code><a href="#topic+census_2014_bw">census_2014_bw</a></code>,
<code><a href="#topic+census_2_ex">census_2_ex</a></code>,
<code><a href="#topic+comp_bayes_lm_ex">comp_bayes_lm_ex</a></code>,
<code><a href="#topic+focal_vs_comp_ex">focal_vs_comp_ex</a></code>,
<code><a href="#topic+growth_ex">growth_ex</a></code>,
<code><a href="#topic+growth_spatial_ex">growth_spatial_ex</a></code>,
<code><a href="#topic+species_bw">species_bw</a></code>,
<code><a href="#topic+study_region_bw">study_region_bw</a></code>,
<code><a href="#topic+study_region_ex">study_region_ex</a></code>
</p>

<hr>
<h2 id='predict.comp_bayes_lm'>Make predictions based on fitted Bayesian model</h2><span id='topic+predict.comp_bayes_lm'></span>

<h3>Description</h3>

<p>Applies fitted model from <code><a href="#topic+comp_bayes_lm">comp_bayes_lm()</a></code> and
returns posterior predicted values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'comp_bayes_lm'
predict(object, newdata, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict.comp_bayes_lm_+3A_object">object</code></td>
<td>
<p>Output of <code><a href="#topic+comp_bayes_lm">comp_bayes_lm()</a></code>: A list of
<code style="white-space: pre;">&#8288;{a_star, b_star, mu_star, V_star}&#8288;</code> posterior hyperparameters</p>
</td></tr>
<tr><td><code id="predict.comp_bayes_lm_+3A_newdata">newdata</code></td>
<td>
<p>A data frame of type <code>focal_vs_comp</code> in which to look for variables with which to predict.</p>
</td></tr>
<tr><td><code id="predict.comp_bayes_lm_+3A_...">...</code></td>
<td>
<p>Currently ignoredâ€”only included for consistency with generic.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of predictions with length equal to the input data.
</p>


<h3>Source</h3>

<p>Closed-form solutions of Bayesian linear
regression doi: <a href="https://doi.org/10.1371/journal.pone.0229930.s004">10.1371/journal.pone.0229930.s004</a>
</p>


<h3>See Also</h3>

<p>Other modeling functions: 
<code><a href="#topic+comp_bayes_lm">comp_bayes_lm</a>()</code>,
<code><a href="#topic+create_bayes_lm_data">create_bayes_lm_data</a>()</code>,
<code><a href="#topic+run_cv">run_cv</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
library(sf)
library(ggplot2)

# Load in posterior parameter example
# and growth data to compare to
data(comp_bayes_lm_ex, growth_ex)

predictions &lt;- focal_vs_comp_ex %&gt;%
  mutate(growth_hat = predict(comp_bayes_lm_ex, focal_vs_comp_ex))

predictions %&gt;%
  ggplot(aes(growth, growth_hat)) +
  geom_point() +
  geom_abline(slope = 1, intercept = 0)
</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+autoplot'></span><span id='topic+to_any_case'></span><span id='topic+rmse'></span><span id='topic+sf_polygon'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>ggplot2</dt><dd><p><code><a href="ggplot2.html#topic+autoplot">autoplot</a></code></p>
</dd>
<dt>sfheaders</dt><dd><p><code><a href="sfheaders.html#topic+sf_polygon">sf_polygon</a></code></p>
</dd>
<dt>snakecase</dt><dd><p><code><a href="snakecase.html#topic+to_any_case">to_any_case</a></code></p>
</dd>
<dt>yardstick</dt><dd><p><code><a href="yardstick.html#topic+rmse">rmse</a></code></p>
</dd>
</dl>

<hr>
<h2 id='run_cv'>Run the bayesian model with spatial cross validation</h2><span id='topic+run_cv'></span>

<h3>Description</h3>

<p>This function carries out the bayesian modeling process with spatial
cross-validation as described in Allen and Kim (2020). Given a
focal-competitor data frame, it appends a column with predicted growth values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_cv(
  focal_vs_comp,
  comp_dist,
  blocks,
  prior_param = NULL,
  run_shuffle = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="run_cv_+3A_focal_vs_comp">focal_vs_comp</code></td>
<td>
<p>data frame from <code><a href="#topic+create_focal_vs_comp">create_focal_vs_comp()</a></code></p>
</td></tr>
<tr><td><code id="run_cv_+3A_comp_dist">comp_dist</code></td>
<td>
<p>Distance to determine which neighboring trees to a focal tree are competitors.</p>
</td></tr>
<tr><td><code id="run_cv_+3A_blocks">blocks</code></td>
<td>
<p>An sf object of a <code>blockCV</code> block output</p>
</td></tr>
<tr><td><code id="run_cv_+3A_prior_param">prior_param</code></td>
<td>
<p>A list of <code style="white-space: pre;">&#8288;{a_0, b_0, mu_0, V_0}&#8288;</code> prior hyperparameters.
Defaults to <code>a_0 = 250</code>, <code>b_0 = 250</code>, <code>mu_0</code> a vector of zeros of
length <code class="reqn">p + 1</code>, <code>V_0</code> an identity matrix of dimension <code class="reqn">(p + 1) x (p
  + 1)</code></p>
</td></tr>
<tr><td><code id="run_cv_+3A_run_shuffle">run_shuffle</code></td>
<td>
<p>boolean as to whether to run permutation test shuffle of
competitor tree species within a particular focal_ID</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>focal_vs_comp</code> with new column of predicted <code>growth_hat</code>
</p>


<h3>See Also</h3>

<p>Other modeling functions: 
<code><a href="#topic+comp_bayes_lm">comp_bayes_lm</a>()</code>,
<code><a href="#topic+create_bayes_lm_data">create_bayes_lm_data</a>()</code>,
<code><a href="#topic+predict.comp_bayes_lm">predict.comp_bayes_lm</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
run_cv(
  focal_vs_comp_ex,
  comp_dist = 1,
  blocks = blocks_ex
)
</code></pre>

<hr>
<h2 id='species_bw'>Phylogenic groupings and trait based clustering of various tree species</h2><span id='topic+species_bw'></span>

<h3>Description</h3>

<p>A date frame mapping the species codes to their common names, scientific
names, and families. This also includes a trait-based clustering of the
species.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>species_bw
</code></pre>


<h3>Format</h3>

<p>A data frame with 46 rows and 6 variables:
</p>

<dl>
<dt>sp</dt><dd><p>The code for the species. Link to <code><a href="#topic+census_2008_bw">census_2008_bw</a></code> and <code><a href="#topic+census_2014_bw">census_2014_bw</a></code> with <code>sp</code> variable.</p>
</dd>
<dt>genus</dt><dd><p>Genus</p>
</dd>
<dt>species</dt><dd><p>Species epithet</p>
</dd>
<dt>latin</dt><dd><p>Scientific name</p>
</dd>
<dt>family</dt><dd><p>Family</p>
</dd>
<dt>trait_group</dt><dd><p>Clustering of species based on three traits rather than
their evolutionary relationships. The traits are specific leaf area, maximum
height, and wood density</p>
</dd>
</dl>



<h3>Source</h3>

<p>For more information on trait clustering see Allen and Kim 2020 &quot;A permutation
test and spatial cross-validation approach to assess models of interspecific competition
between trees.&quot; doi: <a href="https://doi.org/10.1371/journal.pone.0229930">10.1371/journal.pone.0229930</a>PLOS One 15: e0229930.
</p>


<h3>See Also</h3>

<p>Other Big Woods data: 
<code><a href="#topic+census_2008_bw">census_2008_bw</a></code>,
<code><a href="#topic+census_2014_bw">census_2014_bw</a></code>,
<code><a href="#topic+study_region_bw">study_region_bw</a></code>
</p>
<p>Other example data objects: 
<code><a href="#topic+blocks_ex">blocks_ex</a></code>,
<code><a href="#topic+census_1_ex">census_1_ex</a></code>,
<code><a href="#topic+census_2008_bw">census_2008_bw</a></code>,
<code><a href="#topic+census_2014_bw">census_2014_bw</a></code>,
<code><a href="#topic+census_2_ex">census_2_ex</a></code>,
<code><a href="#topic+comp_bayes_lm_ex">comp_bayes_lm_ex</a></code>,
<code><a href="#topic+focal_vs_comp_ex">focal_vs_comp_ex</a></code>,
<code><a href="#topic+growth_ex">growth_ex</a></code>,
<code><a href="#topic+growth_spatial_ex">growth_spatial_ex</a></code>,
<code><a href="#topic+growth_toy">growth_toy</a></code>,
<code><a href="#topic+study_region_bw">study_region_bw</a></code>,
<code><a href="#topic+study_region_ex">study_region_ex</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

# Original 2008 census data
census_2008_bw

# 2008 census data with additional species information
census_2008_bw %&gt;%
  left_join(species_bw, by = "sp")
</code></pre>

<hr>
<h2 id='study_region_bw'>Bigwoods forest study region boundary</h2><span id='topic+study_region_bw'></span>

<h3>Description</h3>

<p>Boundary region for Bigwoods defined in terms of (x,y) vertices of a polygon.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>study_region_bw
</code></pre>


<h3>Format</h3>

<p>A <code>sf</code> spatial features polygon
</p>


<h3>See Also</h3>

<p>Other Big Woods data: 
<code><a href="#topic+census_2008_bw">census_2008_bw</a></code>,
<code><a href="#topic+census_2014_bw">census_2014_bw</a></code>,
<code><a href="#topic+species_bw">species_bw</a></code>
</p>
<p>Other example data objects: 
<code><a href="#topic+blocks_ex">blocks_ex</a></code>,
<code><a href="#topic+census_1_ex">census_1_ex</a></code>,
<code><a href="#topic+census_2008_bw">census_2008_bw</a></code>,
<code><a href="#topic+census_2014_bw">census_2014_bw</a></code>,
<code><a href="#topic+census_2_ex">census_2_ex</a></code>,
<code><a href="#topic+comp_bayes_lm_ex">comp_bayes_lm_ex</a></code>,
<code><a href="#topic+focal_vs_comp_ex">focal_vs_comp_ex</a></code>,
<code><a href="#topic+growth_ex">growth_ex</a></code>,
<code><a href="#topic+growth_spatial_ex">growth_spatial_ex</a></code>,
<code><a href="#topic+growth_toy">growth_toy</a></code>,
<code><a href="#topic+species_bw">species_bw</a></code>,
<code><a href="#topic+study_region_ex">study_region_ex</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)
library(sf)

# Convert all 2008 plot stems to sf object
census_2008_bw_sf &lt;- census_2008_bw %&gt;%
  st_as_sf(coords = c("gx", "gy"))

# Plot stems with plot boundary
ggplot() +
  geom_sf(data = census_2008_bw_sf, size = 0.25) +
  geom_sf(data = study_region_bw, color = "red", fill = "transparent")
</code></pre>

<hr>
<h2 id='study_region_ex'>Study region for example data</h2><span id='topic+study_region_ex'></span>

<h3>Description</h3>

<p>Boundary region for small example data set defined in terms of (x,y) vertices of a polygon.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>study_region_ex
</code></pre>


<h3>Format</h3>

<p>A <code>sf</code> spatial features polygon
</p>


<h3>See Also</h3>

<p>Other example data objects: 
<code><a href="#topic+blocks_ex">blocks_ex</a></code>,
<code><a href="#topic+census_1_ex">census_1_ex</a></code>,
<code><a href="#topic+census_2008_bw">census_2008_bw</a></code>,
<code><a href="#topic+census_2014_bw">census_2014_bw</a></code>,
<code><a href="#topic+census_2_ex">census_2_ex</a></code>,
<code><a href="#topic+comp_bayes_lm_ex">comp_bayes_lm_ex</a></code>,
<code><a href="#topic+focal_vs_comp_ex">focal_vs_comp_ex</a></code>,
<code><a href="#topic+growth_ex">growth_ex</a></code>,
<code><a href="#topic+growth_spatial_ex">growth_spatial_ex</a></code>,
<code><a href="#topic+growth_toy">growth_toy</a></code>,
<code><a href="#topic+species_bw">species_bw</a></code>,
<code><a href="#topic+study_region_bw">study_region_bw</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)
library(sf)

# Convert stems to sf object
census_1_ex_sf &lt;- census_1_ex %&gt;%
  st_as_sf(coords = c("gx", "gy"))

# Plot stems with plot boundary
ggplot() +
  geom_sf(data = study_region_ex) +
  geom_sf(data = study_region_bw, color = "red", fill = "transparent")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
